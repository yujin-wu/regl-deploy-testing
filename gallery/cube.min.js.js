(function(){function w(u,C,a){function b(d,c){if(!C[d]){if(!u[d]){var n="function"==typeof require&&require;if(!c&&n)return n(d,!0);if(g)return g(d,!0);n=Error("Cannot find module '"+d+"'");throw n.code="MODULE_NOT_FOUND",n;}n=C[d]={exports:{}};u[d][0].call(n.exports,function(a){return b(u[d][1][a]||a)},n,n.exports,w,u,C,a)}return C[d].exports}for(var g="function"==typeof require&&require,h=0;h<a.length;h++)b(a[h]);return b}return w})()({1:[function(w,u,C){var a=w("../regl")(),b=w("gl-mat4"),g=a({frag:"\n  precision mediump float;\n  varying vec2 vUv;\n  uniform sampler2D tex;\n  void main () {\n    gl_FragColor = texture2D(tex,vUv);\n  }",
vert:"\n  precision mediump float;\n  attribute vec3 position;\n  attribute vec2 uv;\n  varying vec2 vUv;\n  uniform mat4 projection, view;\n  void main() {\n    vUv = uv;\n    gl_Position = projection * view * vec4(position, 1);\n  }",attributes:{position:[[-.5,.5,.5],[.5,.5,.5],[.5,-.5,.5],[-.5,-.5,.5],[.5,.5,.5],[.5,.5,-.5],[.5,-.5,-.5],[.5,-.5,.5],[.5,.5,-.5],[-.5,.5,-.5],[-.5,-.5,-.5],[.5,-.5,-.5],[-.5,.5,-.5],[-.5,.5,.5],[-.5,-.5,.5],[-.5,-.5,-.5],[-.5,.5,-.5],[.5,.5,-.5],[.5,.5,.5],[-.5,.5,
.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,-.5,.5],[-.5,-.5,.5]],uv:[[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1]]},elements:[[2,1,0],[2,0,3],[6,5,4],[6,4,7],[10,9,8],[10,8,11],[14,13,12],[14,12,15],[18,17,16],[18,16,19],[20,21,22],[23,20,22]],uniforms:{view:function(a){a=.01*a.tick;return b.lookAt([],[5*Math.cos(a),2.5*Math.sin(a),5*Math.sin(a)],[0,0,0],[0,1,0])},projection:function(a){return b.perspective([],
Math.PI/4,a.viewportWidth/a.viewportHeight,.01,10)},tex:a.prop("texture")}});w("resl")({manifest:{texture:{type:"image",src:"assets/peppers.png",parser:function(b){return a.texture({data:b,mag:"linear",min:"linear"})}}},onDone:function(b){var d=b.texture;a.frame(function(){a.clear({color:[0,0,0,255],depth:1});g({texture:d})})}})},{"../regl":69,"gl-mat4":53,resl:68}],2:[function(w,u,C){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;
this.divisor=this.stride=this.offset=0}var b=w("./util/sorted-object-keys"),g=w("./util/check"),h=w("./util/values"),d=w("./constants/dtypes.json"),c=w("./util/is-typed-array"),n=w("./util/is-ndarray"),e=w("./constants/primitives.json"),q="attributes elements offset count primitive instances".split(" ");u.exports=function(ka,da,l,E,r,D,K){function z(a){if(a!==Q.currentVAO){var c=da.oes_vertex_array_object;a?c.bindVertexArrayOES(a.vao):c.bindVertexArrayOES(null);Q.currentVAO=a}}function ha(a){if(a!==
Q.currentVAO){if(a)a.bindAttrs();else{for(var c=da.angle_instanced_arrays,b=0;b<v.length;++b){var e=v[b];e.buffer?(ka.enableVertexAttribArray(b),e.buffer.bind(),ka.vertexAttribPointer(b,e.size,e.type,e.normalized,e.stride,e.offfset),c&&e.divisor&&c.vertexAttribDivisorANGLE(b,e.divisor)):(ka.disableVertexAttribArray(b),ka.vertexAttrib4f(b,e.x,e.y,e.z,e.w))}K.elements?ka.bindBuffer(34963,K.elements.buffer.buffer):ka.bindBuffer(34963,null)}Q.currentVAO=a}}function db(){h(S).forEach(function(a){a.destroy()})}
function J(){this.id=++k;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=da.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;S[this.id]=this;this.buffers=[]}function ma(){da.oes_vertex_array_object&&h(S).forEach(function(a){a.refresh()})}var p=l.maxAttributes,v=Array(p);for(l=0;l<p;++l)v[l]=new a;var k=0,S={},Q={Record:a,scope:{},state:v,currentVAO:null,targetVAO:null,restore:da.oes_vertex_array_object?ma:
function(){},createVAO:function(h){function A(h){var v;if(Array.isArray(h))v=h,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{g("object"===typeof h,"invalid arguments for create vao");g("attributes"in h,"must specify attributes for vao");if(h.elements){var f=h.elements;k.ownsElements?("function"===typeof f&&"elements"===f._reglType?k.elements.destroy():k.elements(f),k.ownsElements=!1):D.getElements(h.elements)?
(k.elements=h.elements,k.ownsElements=!1):(k.elements=D.create(h.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;v=h.attributes;k.offset=0;k.count=-1;k.instances=-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in h&&(k.offset=h.offset|0);"count"in h&&(k.count=h.count|0);"instances"in h&&(k.instances=h.instances|0);"primitive"in h&&(g(h.primitive in e,"bad primitive type: "+h.primitive),k.primitive=e[h.primitive]);
g.optional(function(){for(var a=b(h),c=0;c<a.length;++c)g(0<=q.indexOf(a[c]),'invalid option for vao: "'+a[c]+'" valid options are '+q)});g(Array.isArray(v),"attributes must be an array")}g(v.length<p,"too many attributes");g(0<v.length,"must specify at least one attribute");var f={},m=k.attributes;m.length=v.length;for(var T=0;T<v.length;++T){var V=v[T],l=m[T]=new a,S=V.data||V;if(Array.isArray(S)||c(S)||n(S)){var z;k.buffers[T]&&(z=k.buffers[T],c(S)&&z._buffer.byteLength>=S.byteLength?z.subdata(S):
(z.destroy(),k.buffers[T]=null));k.buffers[T]||(z=k.buffers[T]=r.create(V,34962,!1,!0));l.buffer=r.getBuffer(z);l.size=l.buffer.dimension|0;l.normalized=!1;l.type=l.buffer.dtype;l.offset=0;l.stride=0;l.divisor=0;l.state=1;f[T]=1}else r.getBuffer(V)?(l.buffer=r.getBuffer(V),l.size=l.buffer.dimension|0,l.normalized=!1,l.type=l.buffer.dtype,l.offset=0,l.stride=0,l.divisor=0,l.state=1):r.getBuffer(V.buffer)?(l.buffer=r.getBuffer(V.buffer),l.size=(+V.size||l.buffer.dimension)|0,l.normalized=!!V.normalized||
!1,"type"in V?(g.parameter(V.type,d,"invalid buffer type"),l.type=d[V.type]):l.type=l.buffer.dtype,l.offset=(V.offset||0)|0,l.stride=(V.stride||0)|0,l.divisor=(V.divisor||0)|0,l.state=1,g(1<=l.size&&4>=l.size,"size must be between 1 and 4"),g(0<=l.offset,"invalid offset"),g(0<=l.stride&&255>=l.stride,"stride must be between 0 and 255"),g(0<=l.divisor,"divisor must be positive"),g(!l.divisor||!!da.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in V?(g(0<T,"first attribute must not be a constant"),
l.x=+V.x||0,l.y=+V.y||0,l.z=+V.z||0,l.w=+V.w||0,l.state=2):g(!1,"invalid attribute spec for location "+T)}for(z=0;z<k.buffers.length;++z)!f[z]&&k.buffers[z]&&(k.buffers[z].destroy(),k.buffers[z]=null);k.refresh();return A}var k=new J;E.vaoCount+=1;A.destroy=function(){for(var a=0;a<k.buffers.length;++a)k.buffers[a]&&k.buffers[a].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1);k.destroy()};A._vao=k;A._reglType="vao";return A(h)},getVAO:function(a){return"function"===
typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var c=0;c<v.length;++c){var b=v[c];b.buffer===a&&(ka.disableVertexAttribArray(c),b.buffer=null)}},setVAO:da.oes_vertex_array_object?z:ha,clear:da.oes_vertex_array_object?db:function(){}};J.prototype.bindAttrs=function(){for(var a=da.angle_instanced_arrays,c=this.attributes,b=0;b<c.length;++b){var e=c[b];e.buffer?(ka.enableVertexAttribArray(b),ka.bindBuffer(34962,e.buffer.buffer),ka.vertexAttribPointer(b,e.size,e.type,e.normalized,e.stride,
e.offset),a&&e.divisor&&a.vertexAttribDivisorANGLE(b,e.divisor)):(ka.disableVertexAttribArray(b),ka.vertexAttrib4f(b,e.x,e.y,e.z,e.w))}for(a=c.length;a<p;++a)ka.disableVertexAttribArray(a);(a=D.getElements(this.elements))?ka.bindBuffer(34963,a.buffer.buffer):ka.bindBuffer(34963,null)};J.prototype.refresh=function(){var a=da.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),Q.currentVAO=null,a.bindVertexArrayOES(null))};J.prototype.destroy=function(){if(this.vao){var a=da.oes_vertex_array_object;
this===Q.currentVAO&&(Q.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);S[this.id]&&(delete S[this.id],--E.vaoCount)};return Q}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(w,u,C){function a(a){return l[Object.prototype.toString.call(a)]|
0}function b(a,c){for(var b=0;b<c.length;++b)a[b]=c[b]}function g(a,c,b,e,d,g,h){for(var n=0,k=0;k<b;++k)for(var q=0;q<e;++q)a[n++]=c[d*k+g*q+h]}var h=w("./util/sorted-object-keys"),d=w("./util/check"),c=w("./util/is-typed-array"),n=w("./util/is-ndarray"),e=w("./util/values"),q=w("./util/pool");C=w("./util/flatten");var ka=C.flatten,da=C.shape,l=w("./constants/arraytypes.json"),E=w("./constants/dtypes.json"),r=w("./constants/usage.json"),D=[];D[5120]=1;D[5122]=2;D[5124]=4;D[5121]=1;D[5123]=2;D[5125]=
4;D[5126]=4;u.exports=function(l,z,ha,db){function J(a){this.id=k++;this.buffer=l.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;ha.profile&&(this.stats={size:0})}function ma(a,c,b){a.byteLength=c.byteLength;l.bufferData(a.type,c,b)}function p(e,k,h,p,l,f){e.usage=h;if(Array.isArray(k)){if(e.dtype=p||5126,0<k.length)if(Array.isArray(k[0])){l=da(k);for(var m=p=1;m<l.length;++m)p*=l[m];e.dimension=p;k=ka(k,l,e.dtype);ma(e,k,h);
f?e.persistentData=k:q.freeType(k)}else"number"===typeof k[0]?(e.dimension=l,l=q.allocType(e.dtype,k.length),b(l,k),ma(e,l,h),f?e.persistentData=l:q.freeType(l)):c(k[0])?(e.dimension=k[0].length,e.dtype=p||a(k[0])||5126,k=ka(k,[k.length,k[0].length],e.dtype),ma(e,k,h),f?e.persistentData=k:q.freeType(k)):d.raise("invalid buffer data")}else if(c(k))e.dtype=p||a(k),e.dimension=l,ma(e,k,h),f&&(e.persistentData=new Uint8Array(new Uint8Array(k.buffer)));else if(n(k)){l=k.shape;var v=k.stride,m=k.offset,
r=0,z=0,S=0,E=0;1===l.length?(r=l[0],z=1,S=v[0],E=0):2===l.length?(r=l[0],z=l[1],S=v[0],E=v[1]):d.raise("invalid shape");e.dtype=p||a(k.data)||5126;e.dimension=z;l=q.allocType(e.dtype,r*z);g(l,k.data,r,z,S,E,m);ma(e,l,h);f?e.persistentData=l:q.freeType(l)}else k instanceof ArrayBuffer?(e.dtype=5121,e.dimension=l,ma(e,k,h),f&&(e.persistentData=new Uint8Array(new Uint8Array(k)))):d.raise("invalid buffer data")}function v(a){z.bufferCount--;db(a);var e=a.buffer;d(e,"buffer must not be deleted already");
l.deleteBuffer(e);a.buffer=null;delete S[a.id]}var k=0,S={};J.prototype.bind=function(){l.bindBuffer(this.type,this.buffer)};J.prototype.destroy=function(){v(this)};var Q=[];ha.profile&&(z.getTotalBufferSize=function(){var a=0;h(S).forEach(function(e){a+=S[e].stats.size});return a});return{create:function(e,k,h,db){function Q(a){var e=35044,b=null,f=0,k=0,h=1;Array.isArray(a)||c(a)||n(a)||a instanceof ArrayBuffer?b=a:"number"===typeof a?f=a|0:a&&(d.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(d(null===b||Array.isArray(b)||c(b)||n(b),"invalid data for buffer"),b=a.data),"usage"in a&&(d.parameter(a.usage,r,"invalid buffer usage"),e=r[a.usage]),"type"in a&&(d.parameter(a.type,E,"invalid buffer type"),k=E[a.type]),"dimension"in a&&(d.type(a.dimension,"number","invalid dimension"),h=a.dimension|0),"length"in a&&(d.nni(f,"buffer length must be a nonnegative integer"),f=a.length|0));m.bind();b?p(m,b,e,k,h,db):(f&&l.bufferData(m.type,f,e),m.dtype=k||5121,m.usage=e,m.dimension=h,m.byteLength=
f);ha.profile&&(m.stats.size=m.byteLength*D[m.dtype]);return Q}function f(a,e){d(e+a.byteLength<=m.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+e+" to a buffer of size "+m.byteLength);l.bufferSubData(m.type,e,a)}z.bufferCount++;var m=new J(k);S[m.id]=m;h||Q(e);Q._reglType="buffer";Q._buffer=m;Q.subdata=function(e,k){var h=(k||0)|0,l;m.bind();if(c(e)||e instanceof ArrayBuffer)f(e,h);else if(Array.isArray(e)){if(0<e.length)if("number"===
typeof e[0]){var p=q.allocType(m.dtype,e.length);b(p,e);f(p,h);q.freeType(p)}else Array.isArray(e[0])||c(e[0])?(l=da(e),p=ka(e,l,m.dtype),f(p,h),q.freeType(p)):d.raise("invalid buffer data")}else if(n(e)){l=e.shape;var v=e.stride,A=p=0,r=0,z=0;1===l.length?(p=l[0],A=1,r=v[0],z=0):2===l.length?(p=l[0],A=l[1],r=v[0],z=v[1]):d.raise("invalid shape");l=Array.isArray(e.data)?m.dtype:a(e.data);l=q.allocType(l,p*A);g(l,e.data,p,A,r,z,e.offset);f(l,h);q.freeType(l)}else d.raise("invalid data for buffer subdata");
return Q};ha.profile&&(Q.stats=m.stats);Q.destroy=function(){v(m)};return Q},createStream:function(a,e){var b=Q.pop();b||(b=new J(a));b.bind();p(b,e,35040,0,1,!1);return b},destroyStream:function(a){Q.push(a)},clear:function(){e(S).forEach(v);Q.forEach(v)},getBuffer:function(a){return a&&a._buffer instanceof J?a._buffer:null},restore:function(){e(S).forEach(function(a){a.buffer=l.createBuffer();l.bindBuffer(a.type,a.buffer);l.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:p}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(w,u,C){u.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(w,u,C){u.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(w,u,C){u.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(w,u,C){u.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(w,u,C){function a(a){return Array.isArray(a)||l(a)||E(a)}function b(a){return a.sort(function(a,
e){return"viewport"===a?-1:"viewport"===e?1:a<e?-1:1})}function g(a,e,b,c){this.thisDep=a;this.contextDep=e;this.propDep=b;this.append=c}function h(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function d(a){return new g(!1,!1,!1,a)}function c(a,e){var b=a.type;if(0===b)return b=a.data.length,new g(!0,1<=b,2<=b,e);if(4===b)return b=a.data,new g(b.thisDep,b.contextDep,b.propDep,e);if(5===b)return new g(!1,!1,!1,e);if(6===b){for(var c=b=!1,d=!1,f=0;f<a.data.length;++f){var k=a.data[f];1===k.type?
d=!0:2===k.type?c=!0:3===k.type?b=!0:0===k.type?(b=!0,k=k.data,1<=k&&(c=!0),2<=k&&(d=!0)):4===k.type&&(b=b||k.data.thisDep,c=c||k.data.contextDep,d=d||k.data.propDep)}return new g(b,c,d,e)}return new g(3===b,2===b,1===b,e)}var n=w("./util/sorted-object-keys"),e=w("./util/check"),q=w("./util/extend"),ka=w("./util/codegen"),da=w("./util/loop"),l=w("./util/is-typed-array"),E=w("./util/is-ndarray"),r=w("./util/is-array-like"),D=w("./dynamic"),K=w("./constants/primitives.json"),z=w("./constants/dtypes.json"),
ha=["x","y","z","w"],db="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),J={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ma="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
p={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},v={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},k={frag:35632,vert:35633},S={cw:2304,ccw:2305},Q=new g(!1,!1,!1,function(){});u.exports=function(l,A,E,H,O,f,m,T,w,na,Yc,pc,la,Pa,Z){function L(a){return a.replace(".","_")}function I(a,e,b){var c=L(a);ca.push(a);
x[c]=G[c]=!!b;M[c]=e}function U(a,e,b){var c=L(a);ca.push(a);Array.isArray(b)?(G[c]=b.slice(),x[c]=b.slice()):G[c]=x[c]=b;Ba[c]=e}function qa(){var a=ka(),b=a.link,c=a.global;a.id=qc++;a.batchId="0";var d=b(Ga),f=a.shared={props:"a0"};n(Ga).forEach(function(a){f[a]=c.def(d,".",a)});e.optional(function(){a.CHECK=b(e);a.commandStr=e.guessCommand();a.command=b(a.commandStr);a.assert=function(a,e,c){a("if(!(",e,"))",this.CHECK,".commandRaise(",b(c),",",this.command,");")};t.invalidBlendCombinations=ma});
var k=a.next={},h=a.current={};n(Ba).forEach(function(a){Array.isArray(G[a])&&(k[a]=c.def(f.next,".",a),h[a]=c.def(f.current,".",a))});var M=a.constants={};n(t).forEach(function(a){M[a]=c.def(JSON.stringify(t[a]))});a.invoke=function(e,c){switch(c.type){case 0:var d=["this",f.context,f.props,a.batchId];return e.def(b(c.data),".call(",d.slice(0,Math.max(c.data.length+1,4)),")");case 1:return e.def(f.props,c.data);case 2:return e.def(f.context,c.data);case 3:return e.def("this",c.data);case 4:return c.data.append(a,
e),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(b){return a.invoke(e,b)})}};a.attribCache={};var g={};a.scopeAttrib=function(a){a=A.id(a);if(a in g)return g[a];var e=na.scope[a];e||(e=na.scope[a]=new fa);return g[a]=b(e)};return a}function P(a){var e=a["static"];a=a.dynamic;var b;if("profile"in e){var f=!!e.profile;b=d(function(a,e){return f});b.enable=f}else if("profile"in a){var k=a.profile;b=c(k,function(a,e){return a.invoke(e,k)})}return b}function u(a,b){var f=
a["static"],k=a.dynamic;if("framebuffer"in f){var t=f.framebuffer;return t?(t=T.getFramebuffer(t),e.command(t,"invalid framebuffer object"),d(function(a,e){var b=a.link(t),c=a.shared;e.set(c.framebuffer,".next",b);c=c.context;e.set(c,".framebufferWidth",b+".width");e.set(c,".framebufferHeight",b+".height");return b})):d(function(a,e){var b=a.shared;e.set(b.framebuffer,".next","null");b=b.context;e.set(b,".framebufferWidth",b+".drawingBufferWidth");e.set(b,".framebufferHeight",b+".drawingBufferHeight");
return"null"})}if("framebuffer"in k){var h=k.framebuffer;return c(h,function(a,b){var c=a.invoke(b,h),d=a.shared,W=d.framebuffer,f=b.def(W,".getFramebuffer(",c,")");e.optional(function(){a.assert(b,"!"+c+"||"+f,"invalid framebuffer object")});b.set(W,".next",f);d=d.context;b.set(d,".framebufferWidth",f+"?"+f+".width:"+d+".drawingBufferWidth");b.set(d,".framebufferHeight",f+"?"+f+".height:"+d+".drawingBufferHeight");return f})}return null}function $a(a,b,d){function f(a){if(a in k){var h=k[a];e.commandType(h,
"object","invalid "+a,d.commandStr);var Ha=!0,M=h.x|0,l=h.y|0,n,p;"width"in h?(n=h.width|0,e.command(0<=n,"invalid "+a,d.commandStr)):Ha=!1;"height"in h?(p=h.height|0,e.command(0<=p,"invalid "+a,d.commandStr)):Ha=!1;return new g(!Ha&&b&&b.thisDep,!Ha&&b&&b.contextDep,!Ha&&b&&b.propDep,function(a,b){var e=a.shared.context,c=n;"width"in h||(c=b.def(e,".","framebufferWidth","-",M));var d=p;"height"in h||(d=b.def(e,".","framebufferHeight","-",l));return[M,l,c,d]})}if(a in t){var m=t[a],Ha=c(m,function(b,
c){var d=b.invoke(c,m);e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var f=b.shared.context,W=c.def(d,".x|0"),k=c.def(d,".y|0"),t=c.def('"width" in ',d,"?",d,".width|0:","(",f,".","framebufferWidth","-",W,")"),h=c.def('"height" in ',d,"?",d,".height|0:","(",f,".","framebufferHeight","-",k,")");e.optional(function(){b.assert(c,t+">=0&&"+h+">=0","invalid "+a)});return[W,k,t,h]});b&&(Ha.thisDep=Ha.thisDep||b.thisDep,Ha.contextDep=Ha.contextDep||b.contextDep,Ha.propDep=
Ha.propDep||b.propDep);return Ha}return b?new g(b.thisDep,b.contextDep,b.propDep,function(a,b){var e=a.shared.context;return[0,0,b.def(e,".","framebufferWidth"),b.def(e,".","framebufferHeight")]}):null}var k=a["static"],t=a.dynamic;if(a=f("viewport")){var h=a;a=new g(a.thisDep,a.contextDep,a.propDep,function(a,b){var e=h.append(a,b),c=a.shared.context;b.set(c,".viewportWidth",e[2]);b.set(c,".viewportHeight",e[3]);return e})}return{viewport:a,scissor_box:f("scissor.box")}}function R(a,b){var c=a["static"];
if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<n(b.dynamic).length)return null;var c=b["static"],d=n(c);if(0<d.length&&"number"===typeof c[d[0]]){for(var f=[],k=0;k<d.length;++k)e("number"===typeof c[d[k]],"must specify all vertex attribute locations when using vaos"),f.push([c[d[k]]|0,d[k]]);return f}}return null}function y(a,b,f){function t(a){if(a in M){var b=A.id(M[a]);e.optional(function(){Yc.shader(k[a],b,e.guessCommand())});var f=d(function(){return b});f.id=b;return f}if(a in
n){var W=n[a];return c(W,function(b,c){var d=b.invoke(c,W),f=c.def(b.shared.strings,".id(",d,")");e.optional(function(){c(b.shared.shader,".shader(",k[a],",",f,",",b.command,");")});return f})}return null}var M=a["static"],n=a.dynamic,l=t("frag"),p=t("vert"),m=null;h(l)&&h(p)?(m=Yc.program(p.id,l.id,null,f),a=d(function(a,b){return a.link(m)})):a=new g(l&&l.thisDep||p&&p.thisDep,l&&l.contextDep||p&&p.contextDep,l&&l.propDep||p&&p.propDep,function(a,b){var c=a.shared.shader,d;d=l?l.append(a,b):b.def(c,
".","frag");var f;f=p?p.append(a,b):b.def(c,".","vert");var W=c+".program("+f+","+d;e.optional(function(){W+=","+a.command});return b.def(W+")")});return{frag:l,vert:p,progVar:a,program:m}}function ja(b,W){function k(a,b){if(a in t){var f=t[a]|0;b?l.offset=f:l.instances=f;e.command(!b||0<=f,"invalid "+a,W.commandStr);return d(function(a,e){b&&(a.OFFSET=f);return f})}if(a in M){var h=M[a];return c(h,function(c,d){var f=c.invoke(d,h);b&&(c.OFFSET=f,e.optional(function(){c.assert(d,f+">=0","invalid "+
a)}));return f})}if(b){if(q)return d(function(a,b){return a.OFFSET=0});if(p)return new g(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(p)return new g(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var t=b["static"],M=b.dynamic,l={},p=!1,m=function(){if("vao"in t){var a=t.vao;null!==a&&null===na.getVAO(a)&&(a=na.createVAO(a));
p=!0;l.vao=a;return d(function(b){var e=na.getVAO(a);return e?b.link(e):"null"})}if("vao"in M){p=!0;var b=M.vao;return c(b,function(a,e){var c=a.invoke(e,b);return e.def(a.shared.vao+".getVAO("+c+")")})}return null}(),q=!1,v=function(){if("elements"in t){var b=t.elements;l.elements=b;if(a(b)){var k=l.elements=f.create(b,!0),b=f.getElements(k);q=!0}else b&&(b=f.getElements(b),q=!0,e.command(b,"invalid elements",W.commandStr));k=d(function(a,e){if(b){var c=a.link(b);return a.ELEMENTS=c}return a.ELEMENTS=
null});k.value=b;return k}if("elements"in M){q=!0;var h=M.elements;return c(h,function(a,b){var c=a.shared,d=c.isBufferArgs,c=c.elements,f=a.invoke(b,h),W=b.def("null"),d=b.def(d,"(",f,")"),k=a.cond(d).then(W,"=",c,".createStream(",f,");")["else"](W,"=",c,".getElements(",f,");");e.optional(function(){a.assert(k["else"],"!"+f+"||"+W,"invalid elements")});b.entry(k);b.exit(a.cond(d).then(c,".destroyStream(",W,");"));return a.ELEMENTS=W})}return p?new g(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+
".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),Kc=k("offset",!0),A=function(){if("primitive"in t){var a=t.primitive;l.primitive=a;e.commandParameter(a,K,"invalid primitve",W.commandStr);return d(function(b,e){return K[a]})}if("primitive"in M){var b=M.primitive;return c(b,function(a,c){var d=a.constants.primTypes,f=a.invoke(c,b);e.optional(function(){a.assert(c,f+" in "+d,"invalid primitive, must be one of "+n(K))});return c.def(d,"[",f,"]")})}return q?
h(v)?v.value?d(function(a,b){return b.def(a.ELEMENTS,".primType")}):d(function(){return 4}):new g(v.thisDep,v.contextDep,v.propDep,function(a,b){var e=a.ELEMENTS;return b.def(e,"?",e,".primType:",4)}):p?new g(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),r=function(){if("count"in t){var a=t.count|0;l.count=a;e.command("number"===typeof a&&0<=a,"invalid vertex count",W.commandStr);return d(function(){return a})}if("count"in
M){var b=M.count;return c(b,function(a,c){var d=a.invoke(c,b);e.optional(function(){a.assert(c,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(q){if(h(v)){if(v)return Kc?new g(Kc.thisDep,Kc.contextDep,Kc.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);e.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")});return c}):d(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var f=d(function(){return-1});
e.optional(function(){f.MISSING=!0});return f}var k=new g(v.thisDep||Kc.thisDep,v.contextDep||Kc.contextDep,v.propDep||Kc.propDep,function(a,b){var e=a.ELEMENTS;return a.OFFSET?b.def(e,"?",e,".vertCount-",a.OFFSET,":-1"):b.def(e,"?",e,".vertCount:-1")});e.optional(function(){k.DYNAMIC=!0});return k}return p?new g(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),x=k("instances",!1);return{elements:v,primitive:A,count:r,
instances:x,offset:Kc,vao:m,vaoActive:p,elementsActive:q,"static":l}}function ba(a,b){var f=a["static"],k=a.dynamic,t={};ca.forEach(function(a){function h(b,e){if(a in f){var W=b(f[a]);t[M]=d(function(){return W})}else if(a in k){var Ha=k[a];t[M]=c(Ha,function(a,b){return e(a,b,a.invoke(b,Ha))})}}var M=L(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return h(function(c){e.commandType(c,
"boolean",a,b.commandStr);return c},function(b,c,d){e.optional(function(){b.assert(c,"typeof "+d+'==="boolean"',"invalid flag "+a,b.commandStr)});return d});case "depth.func":return h(function(c){e.commandParameter(c,p,"invalid "+a,b.commandStr);return p[c]},function(b,c,d){var f=b.constants.compareFuncs;e.optional(function(){b.assert(c,d+" in "+f,"invalid "+a+", must be one of "+n(p))});return c.def(f,"[",d,"]")});case "depth.range":return h(function(a){e.command(r(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",b.commandStr);return a},function(a,b,c){e.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var d=b.def("+",c,"[0]"),f=b.def("+",c,"[1]");return[d,f]});case "blend.func":return h(function(a){e.commandType(a,"object","blend.func",b.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in a?a.srcAlpha:
a.src,f="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;e.commandParameter(c,J,M+".srcRGB",b.commandStr);e.commandParameter(d,J,M+".srcAlpha",b.commandStr);e.commandParameter(f,J,M+".dstRGB",b.commandStr);e.commandParameter(a,J,M+".dstAlpha",b.commandStr);e.command(-1===ma.indexOf(c+", "+f),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+f+")",b.commandStr);return[J[c],J[f],J[d],J[a]]},function(b,c,d){function f(W,t){var h=c.def('"',W,t,'" in ',d,"?",d,".",W,t,":",d,".",
W);e.optional(function(){b.assert(c,h+" in "+k,"invalid "+a+"."+W+t+", must be one of "+n(J))});return h}var k=b.constants.blendFuncs;e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var W=f("src","RGB"),t=f("dst","RGB");e.optional(function(){b.assert(c,b.constants.invalidBlendCombinations+".indexOf("+W+'+", "+'+t+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var h=c.def(k,"[",W,"]"),M=c.def(k,"[",f("src","Alpha"),"]"),
Ha=c.def(k,"[",t,"]"),l=c.def(k,"[",f("dst","Alpha"),"]");return[h,Ha,M,l]});case "blend.equation":return h(function(c){if("string"===typeof c)return e.commandParameter(c,sa,"invalid "+a,b.commandStr),[sa[c],sa[c]];if("object"===typeof c)return e.commandParameter(c.rgb,sa,a+".rgb",b.commandStr),e.commandParameter(c.alpha,sa,a+".alpha",b.commandStr),[sa[c.rgb],sa[c.alpha]];e.commandRaise("invalid blend.equation",b.commandStr)},function(b,c,d){var f=b.constants.blendEquations,k=c.def(),W=c.def(),t=
b.cond("typeof ",d,'==="string"');e.optional(function(){function c(a,e,d){b.assert(a,d+" in "+f,"invalid "+e+", must be one of "+n(sa))}c(t.then,a,d);b.assert(t["else"],d+"&&typeof "+d+'==="object"',"invalid "+a);c(t["else"],a+".rgb",d+".rgb");c(t["else"],a+".alpha",d+".alpha")});t.then(k,"=",W,"=",f,"[",d,"];");t["else"](k,"=",f,"[",d,".rgb];",W,"=",f,"[",d,".alpha];");c(t);return[k,W]});case "blend.color":return h(function(a){e.command(r(a)&&4===a.length,"blend.color must be a 4d array",b.commandStr);
return da(4,function(b){return+a[b]})},function(a,b,c){e.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});return da(4,function(a){return b.def("+",c,"[",a,"]")})});case "stencil.mask":return h(function(a){e.commandType(a,"number",M,b.commandStr);return a|0},function(a,b,c){e.optional(function(){a.assert(b,"typeof "+c+'==="number"',"invalid stencil.mask")});return b.def(c,"|0")});case "stencil.func":return h(function(c){e.commandType(c,
"object",M,b.commandStr);var d=c.cmp||"keep",f=c.ref||0;c="mask"in c?c.mask:-1;e.commandParameter(d,p,a+".cmp",b.commandStr);e.commandType(f,"number",a+".ref",b.commandStr);e.commandType(c,"number",a+".mask",b.commandStr);return[p[d],f,c]},function(a,b,c){var d=a.constants.compareFuncs;e.optional(function(){function e(){a.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(c+"&&typeof ",c,'==="object"');e('!("cmp" in ',c,")||(",c,".cmp in ",d,")")});var f=b.def('"cmp" in ',
c,"?",d,"[",c,".cmp]",":",7680),k=b.def(c,".ref|0"),W=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[f,k,W]});case "stencil.opFront":case "stencil.opBack":return h(function(c){e.commandType(c,"object",M,b.commandStr);var d=c.fail||"keep",f=c.zfail||"keep";c=c.zpass||"keep";e.commandParameter(d,v,a+".fail",b.commandStr);e.commandParameter(f,v,a+".zfail",b.commandStr);e.commandParameter(c,v,a+".zpass",b.commandStr);return["stencil.opBack"===a?1029:1028,v[d],v[f],v[c]]},function(b,c,d){function f(W){e.optional(function(){b.assert(c,
'!("'+W+'" in '+d+")||("+d+"."+W+" in "+k+")","invalid "+a+"."+W+", must be one of "+n(v))});return c.def('"',W,'" in ',d,"?",k,"[",d,".",W,"]:",7680)}var k=b.constants.stencilOps;e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return h(function(a){e.commandType(a,"object",M,b.commandStr);var c=a.factor|0;a=a.units|0;e.commandType(c,"number",M+".factor",b.commandStr);
e.commandType(a,"number",M+".units",b.commandStr);return[c,a]},function(b,c,d){e.optional(function(){b.assert(c,d+"&&typeof "+d+'==="object"',"invalid "+a)});var f=c.def(d,".factor|0"),k=c.def(d,".units|0");return[f,k]});case "cull.face":return h(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);e.command(!!c,M,b.commandStr);return c},function(a,b,c){e.optional(function(){a.assert(b,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return b.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return h(function(a){e.command("number"===
typeof a&&a>=H.lineWidthDims[0]&&a<=H.lineWidthDims[1],"invalid line width, must be a positive number between "+H.lineWidthDims[0]+" and "+H.lineWidthDims[1],b.commandStr);return a},function(a,b,c){e.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">="+H.lineWidthDims[0]+"&&"+c+"<="+H.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return h(function(a){e.commandParameter(a,S,M,b.commandStr);return S[a]},function(a,b,c){e.optional(function(){a.assert(b,c+'==="cw"||'+
c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return b.def(c+'==="cw"?2304:2305')});case "colorMask":return h(function(a){e.command(r(a)&&4===a.length,"color.mask must be length 4 array",b.commandStr);return a.map(function(a){return!!a})},function(a,b,c){e.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return da(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return h(function(a){e.command("object"===typeof a&&a,
M,b.commandStr);var c="value"in a?a.value:1;a=!!a.invert;e.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",b.commandStr);return[c,a]},function(a,b,c){e.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var d=b.def('"value" in ',c,"?+",c,".value:1"),f=b.def("!!",c,".invert");return[d,f]})}});return t}function xa(a,b){var f=a["static"],k=a.dynamic,t={};n(f).forEach(function(a){var c=f[a],k;if("number"===typeof c||
"boolean"===typeof c)k=d(function(){return c});else if("function"===typeof c){var h=c._reglType;"texture2d"===h||"textureCube"===h?k=d(function(a){return a.link(c)}):"framebuffer"===h||"framebufferCube"===h?(e.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',b.commandStr),k=d(function(a){return a.link(c.color[0])})):e.commandRaise('invalid data for uniform "'+a+'"',b.commandStr)}else r(c)?k=d(function(b){return b.global.def("[",da(c.length,function(d){e.command("number"===
typeof c[d]||"boolean"===typeof c[d],"invalid uniform "+a,b.commandStr);return c[d]}),"]")}):e.commandRaise('invalid or missing data for uniform "'+a+'"',b.commandStr);k.value=c;t[a]=k});n(k).forEach(function(a){var b=k[a];t[a]=c(b,function(a,c){return a.invoke(c,b)})});return t}function La(b,f){var k=b["static"],t=b.dynamic,h={};n(k).forEach(function(b){var c=k[b],t=A.id(b),M=new fa;if(a(c))M.state=1,M.buffer=O.getBuffer(O.create(c,34962,!1,!0)),M.type=0;else{var l=O.getBuffer(c);if(l)M.state=1,
M.buffer=l,M.type=0;else if(e.command("object"===typeof c&&c,"invalid data for attribute "+b,f.commandStr),"constant"in c){var Ha=c.constant;M.buffer="null";M.state=2;"number"===typeof Ha?M.x=Ha:(e.command(r(Ha)&&0<Ha.length&&4>=Ha.length,"invalid constant for attribute "+b,f.commandStr),ha.forEach(function(a,b){b<Ha.length&&(M[a]=Ha[b])}))}else{l=a(c.buffer)?O.getBuffer(O.create(c.buffer,34962,!1,!0)):O.getBuffer(c.buffer);e.command(!!l,'missing buffer for attribute "'+b+'"',f.commandStr);var g=
c.offset|0;e.command(0<=g,'invalid offset for attribute "'+b+'"',f.commandStr);var p=c.stride|0;e.command(0<=p&&256>p,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',f.commandStr);var m=c.size|0;e.command(!("size"in c)||0<m&&4>=m,'invalid size for attribute "'+b+'", must be 1,2,3,4',f.commandStr);var q=!!c.normalized,v=0;"type"in c&&(e.commandParameter(c.type,z,"invalid type for attribute "+b,f.commandStr),v=z[c.type]);var x=c.divisor|0;e.optional(function(){"divisor"in c&&
(e.command(0===x||aa,'cannot specify divisor for attribute "'+b+'", instancing not supported',f.commandStr),e.command(0<=x,'invalid divisor for attribute "'+b+'"',f.commandStr));var a=f.commandStr,d="buffer offset divisor normalized type size stride".split(" ");n(c).forEach(function(c){e.command(0<=d.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+b+'" (valid parameters are '+d+")",a)})});M.buffer=l;M.state=1;M.size=m;M.normalized=q;M.type=v||l.dtype;M.offset=g;M.stride=p;M.divisor=
x}}h[b]=d(function(a,b){var c=a.attribCache;if(t in c)return c[t];var e={isStream:!1};n(M).forEach(function(a){e[a]=M[a]});M.buffer&&(e.buffer=a.link(M.buffer),e.type=e.type||e.buffer+".dtype");return c[t]=e})});n(t).forEach(function(a){var b=t[a];h[a]=c(b,function(c,d){function f(a){d(l[a],"=",k,".",a,"|0;")}var k=c.invoke(d,b),t=c.shared,W=c.constants,h=t.isBufferArgs,M=t.buffer;e.optional(function(){c.assert(d,k+"&&(typeof "+k+'==="object"||typeof '+k+'==="function")&&('+h+"("+k+")||"+M+".getBuffer("+
k+")||"+M+".getBuffer("+k+".buffer)||"+h+"("+k+'.buffer)||("constant" in '+k+"&&(typeof "+k+'.constant==="number"||'+t.isArrayLike+"("+k+".constant))))",'invalid dynamic attribute "'+a+'"')});var l={isStream:d.def(!1)},Ha=new fa;Ha.state=1;n(Ha).forEach(function(a){l[a]=d.def(""+Ha[a])});var g=l.buffer,p=l.type;d("if(",h,"(",k,")){",l.isStream,"=true;",g,"=",M,".createStream(",34962,",",k,");",p,"=",g,".dtype;","}else{",g,"=",M,".getBuffer(",k,");","if(",g,"){",p,"=",g,".dtype;",'}else if("constant" in ',
k,"){",l.state,"=",2,";","if(typeof "+k+'.constant === "number"){',l[ha[0]],"=",k,".constant;",ha.slice(1).map(function(a){return l[a]}).join("="),"=0;","}else{",ha.map(function(a,b){return l[a]+"="+k+".constant.length>"+b+"?"+k+".constant["+b+"]:0;"}).join(""),"}}else{","if(",h,"(",k,".buffer)){",g,"=",M,".createStream(",34962,",",k,".buffer);","}else{",g,"=",M,".getBuffer(",k,".buffer);","}",p,'="type" in ',k,"?",W.glTypes,"[",k,".type]:",g,".dtype;",l.normalized,"=!!",k,".normalized;");f("size");
f("offset");f("stride");f("divisor");d("}}");d.exit("if(",l.isStream,"){",M,".destroyStream(",g,");","}");return l})});return h}function bc(a){var b=a["static"],e=a.dynamic,f={};n(b).forEach(function(a){var c=b[a];f[a]=d(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});n(e).forEach(function(a){var b=e[a];f[a]=c(b,function(a,c){return a.invoke(c,b)})});return f}function Ua(a,b,c,d,f){function k(a){var b=p[a];b&&(q[a]=b)}var t=a["static"],h=a.dynamic;e.optional(function(){function a(c){n(c).forEach(function(a){e.command(0<=
b.indexOf(a),'unknown parameter "'+a+'"',f.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ca);a(t);a(h)});var M=R(a,b),l=u(a,f),p=$a(a,l,f),m=ja(a,f),q=ba(a,f),v=y(a,f,M);k("viewport");k(L("scissor.box"));var A=0<n(q).length,l={framebuffer:l,draw:m,shader:v,state:q,dirty:A,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};l.profile=P(a,f);l.uniforms=xa(c,f);l.drawVAO=l.scopeVAO=m.vao;if(!l.drawVAO&&v.program&&!M&&E.angle_instanced_arrays&&
m["static"].elements){var r=!0;a=v.program.attributes.map(function(a){a=b["static"][a];r=r&&!!a;return a});if(r&&0<a.length){var x=na.getVAO(na.createVAO({attributes:a,elements:m["static"].elements}));l.drawVAO=new g(null,null,null,function(a,b){return a.link(x)});l.useVAO=!0}}M?l.useVAO=!0:l.attributes=La(b,f);l.context=bc(d,f);return l}function Y(a,b,c){var e=a.shared.context,d=a.scope();n(c).forEach(function(f){b.save(e,"."+f);var k=c[f].append(a,b);Array.isArray(k)?d(e,".",f,"=[",k.join(),"];"):
d(e,".",f,"=",k,";")});b(d)}function kb(a,b,c,e){var d=a.shared,f=d.gl,k=d.framebuffer,t;ga&&(t=b.def(d.extensions,".webgl_draw_buffers"));var h=a.constants,d=h.drawBuffer,h=h.backBuffer;a=c?c.append(a,b):b.def(k,".next");e||b("if(",a,"!==",k,".cur){");b("if(",a,"){",f,".bindFramebuffer(",36160,",",a,".framebuffer);");ga&&b(t,".drawBuffersWEBGL(",d,"[",a,".colorAttachments.length]);");b("}else{",f,".bindFramebuffer(",36160,",null);");ga&&b(t,".drawBuffersWEBGL(",h,");");b("}",k,".cur=",a,";");e||
b("}")}function ea(a,b,c){var e=a.shared,d=e.gl,f=a.current,k=a.next,t=e.current,h=e.next,l=a.cond(t,".dirty");ca.forEach(function(b){b=L(b);if(!(b in c.state)){var e,W;if(b in k){e=k[b];W=f[b];var g=da(G[b].length,function(a){return l.def(e,"[",a,"]")});l(a.cond(g.map(function(a,b){return a+"!=="+W+"["+b+"]"}).join("||")).then(d,".",Ba[b],"(",g,");",g.map(function(a,b){return W+"["+b+"]="+a}).join(";"),";"))}else e=l.def(h,".",b),g=a.cond(e,"!==",t,".",b),l(g),b in M?g(a.cond(e).then(d,".enable(",
M[b],");")["else"](d,".disable(",M[b],");"),t,".",b,"=",e,";"):g(d,".",Ba[b],"(",e,");",t,".",b,"=",e,";")}});0===n(c.state).length&&l(t,".dirty=false;");b(l)}function oa(a,c,e,d){var f=a.shared,k=a.current,t=f.current,l=f.gl;b(n(e)).forEach(function(b){var f=e[b];if(!d||d(f)){var g=f.append(a,c);if(M[b]){var p=M[b];h(f)?g?c(l,".enable(",p,");"):c(l,".disable(",p,");"):c(a.cond(g).then(l,".enable(",p,");")["else"](l,".disable(",p,");"));c(t,".",b,"=",g,";")}else if(r(g)){var m=k[b];c(l,".",Ba[b],
"(",g,");",g.map(function(a,b){return m+"["+b+"]="+a}).join(";"),";")}else c(l,".",Ba[b],"(",g,");",t,".",b,"=",g,";")}})}function fc(a,b){aa&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function hc(a,b,c,e,d){function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function k(a){n=b.def();a(n,"=",f(),";");"string"===typeof d?a(g,".count+=",d,";"):a(g,".count++;");Pa&&(e?(q=b.def(),a(q,"=",m,".getNumPendingQueries();")):a(m,".beginQuery(",g,");"))}
function t(a){a(g,".cpuTime+=",f(),"-",n,";");Pa&&(e?a(m,".pushScopeStats(",q,",",m,".getNumPendingQueries(),",g,");"):a(m,".endQuery();"))}function M(a){var c=b.def(p,".profile");b(p,".profile=",a,";");b.exit(p,".profile=",c,";")}var l=a.shared,g=a.stats,p=l.current,m=l.timer;c=c.profile;var n,q;if(c){if(h(c)){c.enable?(k(b),t(b.exit),M("true")):M("false");return}c=c.append(a,b);M(c)}else c=b.def(p,".profile");l=a.block();k(l);b("if(",c,"){",l,"}");a=a.block();t(a);b.exit("if(",c,"){",a,"}")}function tc(a,
b,c,d,f){function k(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function t(c,e,d){function f(){b("if(!",g,".buffer){",M,".enableVertexAttribArray(",l,");}");var c=d.type,k;k=d.size?b.def(d.size,"||",e):e;b("if(",g,".type!==",c,"||",g,".size!==",k,"||",n.map(function(a){return g+"."+a+"!=="+d[a]}).join("||"),"){",M,".bindBuffer(",34962,",",p,".buffer);",M,".vertexAttribPointer(",[l,k,c,
d.normalized,d.stride,d.offset],");",g,".type=",c,";",g,".size=",k,";",n.map(function(a){return g+"."+a+"="+d[a]+";"}).join(""),"}");aa&&(c=d.divisor,b("if(",g,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[l,c],");",g,".divisor=",c,";}"))}function k(){b("if(",g,".buffer){",M,".disableVertexAttribArray(",l,");",g,".buffer=null;","}if(",ha.map(function(a,b){return g+"."+a+"!=="+m[b]}).join("||"),"){",M,".vertexAttrib4f(",l,",",m,");",ha.map(function(a,b){return g+"."+a+"="+m[b]+";"}).join(""),
"}")}var M=h.gl,l=b.def(c,".location"),g=b.def(h.attributes,"[",l,"]");c=d.state;var p=d.buffer,m=[d.x,d.y,d.z,d.w],n=["buffer","normalized","offset","stride"];1===c?f():2===c?k():(b("if(",c,"===",1,"){"),f(),b("}else{"),k(),b("}"))}var h=a.shared;d.forEach(function(d){var h=d.name,M=c.attributes[h],l;if(M){if(!f(M))return;l=M.append(a,b)}else{if(!f(Q))return;var g=a.scopeAttrib(h);e.optional(function(){a.assert(b,g+".state","missing attribute "+h)});l={};n(new fa).forEach(function(a){l[a]=b.def(g,
".",a)})}t(a.link(d),k(d.info.type),l)})}function wd(a,b,c,d,f,k){for(var t=a.shared,M=t.gl,l,g=0;g<d.length;++g){var p=d[g],m=p.name,n=p.info.type,q=c.uniforms[m],p=a.link(p)+".location",v;if(q){if(!f(q))continue;if(h(q)){var x=q.value;e.command(null!==x&&"undefined"!==typeof x,'missing uniform "'+m+'"',a.commandStr);if(35678===n||35680===n)e.command("function"===typeof x&&(35678===n&&("texture2d"===x._reglType||"framebuffer"===x._reglType)||35680===n&&("textureCube"===x._reglType||"framebufferCube"===
x._reglType)),"invalid texture for uniform "+m,a.commandStr),q=a.link(x._texture||x.color[0]._texture),b(M,".uniform1i(",p,",",q+".bind());"),b.exit(q,".unbind();");else if(35674===n||35675===n||35676===n){e.optional(function(){e.command(r(x),"invalid matrix for uniform "+m,a.commandStr);e.command(35674===n&&4===x.length||35675===n&&9===x.length||35676===n&&16===x.length,"invalid length for matrix uniform "+m,a.commandStr)});var q=a.global.def("new Float32Array(["+Array.prototype.slice.call(x)+"])"),
y=2;35675===n?y=3:35676===n&&(y=4);b(M,".uniformMatrix",y,"fv(",p,",false,",q,");")}else{switch(n){case 5126:e.commandType(x,"number","uniform "+m,a.commandStr);l="1f";break;case 35664:e.command(r(x)&&2===x.length,"uniform "+m,a.commandStr);l="2f";break;case 35665:e.command(r(x)&&3===x.length,"uniform "+m,a.commandStr);l="3f";break;case 35666:e.command(r(x)&&4===x.length,"uniform "+m,a.commandStr);l="4f";break;case 35670:e.commandType(x,"boolean","uniform "+m,a.commandStr);l="1i";break;case 5124:e.commandType(x,
"number","uniform "+m,a.commandStr);l="1i";break;case 35671:e.command(r(x)&&2===x.length,"uniform "+m,a.commandStr);l="2i";break;case 35667:e.command(r(x)&&2===x.length,"uniform "+m,a.commandStr);l="2i";break;case 35672:e.command(r(x)&&3===x.length,"uniform "+m,a.commandStr);l="3i";break;case 35668:e.command(r(x)&&3===x.length,"uniform "+m,a.commandStr);l="3i";break;case 35673:e.command(r(x)&&4===x.length,"uniform "+m,a.commandStr);l="4i";break;case 35669:e.command(r(x)&&4===x.length,"uniform "+m,
a.commandStr),l="4i"}b(M,".uniform",l,"(",p,",",r(x)?Array.prototype.slice.call(x):x,");")}continue}else v=q.append(a,b)}else{if(!f(Q))continue;v=b.def(t.uniforms,"[",A.id(m),"]")}35678===n?(e(!Array.isArray(v),"must specify a scalar prop for textures"),b("if(",v,"&&",v,'._reglType==="framebuffer"){',v,"=",v,".color[0];","}")):35680===n&&(e(!Array.isArray(v),"must specify a scalar prop for cube maps"),b("if(",v,"&&",v,'._reglType==="framebufferCube"){',v,"=",v,".color[0];","}"));e.optional(function(){function c(e,
d){a.assert(b,e,'bad data or missing for uniform "'+m+'".  '+d)}function d(a){e(!Array.isArray(v),"must not specify an array type for uniform");c("typeof "+v+'==="'+a+'"',"invalid type, expected "+a)}function f(b,d){Array.isArray(v)?e(v.length===b,"must have length "+b):c(t.isArrayLike+"("+v+")&&"+v+".length==="+b,"invalid vector, should have length "+b,a.commandStr)}function k(b){e(!Array.isArray(v),"must not specify a value type");c("typeof "+v+'==="function"&&'+v+'._reglType==="texture'+(3553===
b?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(n){case 5124:d("number");break;case 35667:f(2,"number");break;case 35668:f(3,"number");break;case 35669:f(4,"number");break;case 5126:d("number");break;case 35664:f(2,"number");break;case 35665:f(3,"number");break;case 35666:f(4,"number");break;case 35670:d("boolean");break;case 35671:f(2,"boolean");break;case 35672:f(3,"boolean");break;case 35673:f(4,"boolean");break;case 35674:f(4,"number");break;case 35675:f(9,"number");break;case 35676:f(16,
"number");break;case 35678:k(3553);break;case 35680:k(34067)}});q=1;switch(n){case 35678:case 35680:q=b.def(v,"._texture");b(M,".uniform1i(",p,",",q,".bind());");b.exit(q,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";q=2;break;case 35668:case 35672:l="3i";q=3;break;case 35669:case 35673:l="4i";q=4;break;case 5126:l="1f";break;case 35664:l="2f";q=2;break;case 35665:l="3f";q=3;break;case 35666:l="4f";q=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";
break;case 35676:l="Matrix4fv"}if("M"===l.charAt(0)){b(M,".uniform",l,"(",p,",");var p=Math.pow(n-35674+2,2),Ga=a.global.def("new Float32Array(",p,")");Array.isArray(v)?b("false,(",da(p,function(a){return Ga+"["+a+"]="+v[a]}),",",Ga,")"):b("false,(Array.isArray(",v,")||",v," instanceof Float32Array)?",v,":(",da(p,function(a){return Ga+"["+a+"]="+v+"["+a+"]"}),",",Ga,")");b(");")}else{if(1<q){for(var y=[],z=[],B=0;B<q;++B)Array.isArray(v)?z.push(v[B]):z.push(b.def(v+"["+B+"]")),k&&y.push(b.def());
k&&b("if(!",a.batchId,"||",y.map(function(a,b){return a+"!=="+z[b]}).join("||"),"){",y.map(function(a,b){return a+"="+z[b]+";"}).join(""));b(M,".uniform",l,"(",p,",",z.join(","),");")}else e(!Array.isArray(v),"uniform value must not be an array"),k&&(q=b.def(),b("if(!",a.batchId,"||",q,"!==",v,"){",q,"=",v,";")),b(M,".uniform",l,"(",p,",",v,");");k&&b("}")}}}function wc(a,b,c,d){function f(e){var k=p[e];return k?k.contextDep&&d.contextDynamic||k.propDep?k.append(a,c):k.append(a,b):b.def(g,".",e)}
function k(){function a(){c(A,".drawElementsInstancedANGLE(",[n,q,r,v+"<<(("+r+"-5121)>>1)",x],");")}function b(){c(A,".drawArraysInstancedANGLE(",[n,v,q,x],");")}m&&"null"!==m?y?a():(c("if(",m,"){"),a(),c("}else{"),b(),c("}")):b()}function t(){function a(){c(M+".drawElements("+[n,q,r,v+"<<(("+r+"-5121)>>1)"]+");")}function b(){c(M+".drawArrays("+[n,v,q]+");")}m&&"null"!==m?y?a():(c("if(",m,"){"),a(),c("}else{"),b(),c("}")):b()}var l=a.shared,M=l.gl,g=l.draw,p=d.draw,m=function(){var e=p.elements,
f=b;if(e){if(e.contextDep&&d.contextDynamic||e.propDep)f=c;e=e.append(a,f);p.elementsActive&&f("if("+e+")"+M+".bindBuffer(34963,"+e+".buffer.buffer);")}else e=f.def(),f(e,"=",g,".","elements",";","if(",e,"){",M,".bindBuffer(",34963,",",e,".buffer.buffer);}","else if(",l.vao,".currentVAO){",e,"=",a.shared.elements+".getElements("+l.vao,".currentVAO.elements);",pa?"":"if("+e+")"+M+".bindBuffer(34963,"+e+".buffer.buffer);","}");return e}(),n=f("primitive"),v=f("offset"),q=function(){var f=p.count,k,
t=b;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)t=c;k=f.append(a,t);e.optional(function(){f.MISSING&&a.assert(b,"false","missing vertex count");f.DYNAMIC&&a.assert(t,k+">=0","missing vertex count")})}else k=t.def(g,".","count"),e.optional(function(){a.assert(t,k+">=0","missing vertex count")});return k}();if("number"===typeof q){if(0===q)return}else c("if(",q,"){"),c.exit("}");var x,A;aa&&(x=f("instances"),A=a.instancing);var r=m+".type",y=p.elements&&h(p.elements)&&!p.vaoActive;aa&&("number"!==
typeof x||0<=x)?"string"===typeof x?(c("if(",x,">0){"),k(),c("}else if(",x,"<0){"),t(),c("}")):k():t()}function X(a,b,c,d,f){var k=qa();f=k.proc("body",f);e.optional(function(){k.commandStr=b.commandStr;k.command=k.link(b.commandStr)});aa&&(k.instancing=f.def(k.shared.extensions,".angle_instanced_arrays"));a(k,f,c,d);return k.compile().body}function N(a,b,c,e){fc(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,
".setVAO(null);"),tc(a,b,c,e.attributes,function(){return!0}));wd(a,b,c,e.uniforms,function(){return!0},!1);wc(a,b,b,c)}function ia(a,b){var c=a.proc("draw",1);fc(a,c);Y(a,c,b.context);kb(a,c,b.framebuffer);ea(a,c,b);oa(a,c,b.state);hc(a,c,b,!1,!0);var e=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",e,".program);");if(b.shader.program)N(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var d=a.global.def("{}"),f=c.def(e,".id"),k=c.def(d,"[",f,"]");c(a.cond(k).then(k,".call(this,a0);")["else"](k,
"=",d,"[",f,"]=",a.link(function(c){return X(N,a,b,c,1)}),"(",e,");",k,".call(this,a0);"))}0<n(b.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Ca(a,b,c,e){function d(){return!0}a.batchId="a1";fc(a,b);tc(a,b,c,e.attributes,d);wd(a,b,c,e.uniforms,d,!1);wc(a,b,b,c)}function Gb(a,b,c,e){function d(a){return a.contextDep&&k||a.propDep}function f(a){return!d(a)}fc(a,b);var k=c.contextDep,t=b.def(),l=b.def();a.shared.props=l;a.batchId=t;var M=a.scope(),
h=a.scope();b(M.entry,"for(",t,"=0;",t,"<","a1",";++",t,"){",l,"=","a0","[",t,"];",h,"}",M.exit);c.needsContext&&Y(a,h,c.context);c.needsFramebuffer&&kb(a,h,c.framebuffer);oa(a,h,c.state,d);c.profile&&d(c.profile)&&hc(a,h,c,!1,!0);e?(c.useVAO?c.drawVAO?d(c.drawVAO)?h(a.shared.vao,".setVAO(",c.drawVAO.append(a,h),");"):M(a.shared.vao,".setVAO(",c.drawVAO.append(a,M),");"):M(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(M(a.shared.vao,".setVAO(null);"),tc(a,M,c,e.attributes,f),tc(a,h,c,e.attributes,
d)),wd(a,M,c,e.uniforms,f,!1),wd(a,h,c,e.uniforms,d,!0),wc(a,M,h,c)):(b=a.global.def("{}"),e=c.shader.progVar.append(a,h),l=h.def(e,".id"),M=h.def(b,"[",l,"]"),h(a.shared.gl,".useProgram(",e,".program);","if(!",M,"){",M,"=",b,"[",l,"]=",a.link(function(b){return X(Ca,a,c,b,2)}),"(",e,");}",M,".call(this,a0[",t,"],",t,");"))}function Lc(a,b){function c(a){return a.contextDep&&d||a.propDep}var e=a.proc("batch",2);a.batchId="0";fc(a,e);var d=!1,f=!0;n(b.context).forEach(function(a){d=d||b.context[a].propDep});
d||(Y(a,e,b.context),f=!1);var k=b.framebuffer,t=!1;k?(k.propDep?d=t=!0:k.contextDep&&d&&(t=!0),t||kb(a,e,k)):kb(a,e,null);b.state.viewport&&b.state.viewport.propDep&&(d=!0);ea(a,e,b);oa(a,e,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||hc(a,e,b,!1,"a1");b.contextDep=d;b.needsContext=f;b.needsFramebuffer=t;f=b.shader.progVar;if(f.contextDep&&d||f.propDep)Gb(a,e,b,null);else if(f=f.append(a,e),e(a.shared.gl,".useProgram(",f,".program);"),b.shader.program)Gb(a,e,b,b.shader.program);else{e(a.shared.vao,
".setVAO(null);");var k=a.global.def("{}"),t=e.def(f,".id"),l=e.def(k,"[",t,"]");e(a.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",k,"[",t,"]=",a.link(function(c){return X(Gb,a,b,c,2)}),"(",f,");",l,".call(this,a0,a1);"))}0<n(b.state).length&&e(a.shared.current,".dirty=true;");a.shared.vao&&e(a.shared.vao,".setVAO(null);")}function Wc(a,c){function e(b){var k=c.shader[b];k&&d.set(f.shader,"."+b,k.append(a,d))}var d=a.proc("scope",3);a.batchId="a2";var f=a.shared,k=f.current;Y(a,d,c.context);
c.framebuffer&&c.framebuffer.append(a,d);b(n(c.state)).forEach(function(b){var e=c.state[b].append(a,d);r(e)?e.forEach(function(c,e){d.set(a.next[b],"["+e+"]",c)}):d.set(f.next,"."+b,e)});hc(a,d,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var e=c.draw[b];e&&d.set(f.draw,"."+b,""+e.append(a,d))});n(c.uniforms).forEach(function(b){var e=c.uniforms[b].append(a,d);Array.isArray(e)&&(e="["+e.join()+"]");d.set(f.uniforms,"["+A.id(b)+"]",e)});n(c.attributes).forEach(function(b){var e=
c.attributes[b].append(a,d),f=a.scopeAttrib(b);n(new fa).forEach(function(a){d.set(f,"."+a,e[a])})});c.scopeVAO&&d.set(f.vao,".targetVAO",c.scopeVAO.append(a,d));e("vert");e("frag");0<n(c.state).length&&(d(k,".dirty=true;"),d.exit(k,".dirty=true;"));d("a1(",a.shared.context,",a0,",a.batchId,");")}function F(a){if("object"===typeof a&&!r(a)){for(var b=n(a),c=0;c<b.length;++c)if(D.isDynamic(a[b[c]]))return!0;return!1}}function B(a,b,e){function d(a,b){t.forEach(function(c){var e=f[c];D.isDynamic(e)&&
(e=a.invoke(b,e),b(g,".",c,"=",e,";"))})}var f=b["static"][e];if(f&&F(f)){var k=a.global,t=n(f),l=!1,M=!1,h=!1,g=a.global.def("{}");t.forEach(function(b){var e=f[b];if(D.isDynamic(e))"function"===typeof e&&(e=f[b]=D.unbox(e)),b=c(e,null),l=l||b.thisDep,h=h||b.propDep,M=M||b.contextDep;else{k(g,".",b,"=");switch(typeof e){case "number":k(e);break;case "string":k('"',e,'"');break;case "object":Array.isArray(e)&&k("[",e.join(),"]");break;default:k(a.link(e))}k(";")}});b.dynamic[e]=new D.DynamicVariable(4,
{thisDep:l,contextDep:M,propDep:h,ref:g,append:d});delete b["static"][e]}}var fa=na.Record,sa={add:32774,subtract:32778,"reverse subtract":32779};E.ext_blend_minmax&&(sa.min=32775,sa.max=32776);var aa=E.angle_instanced_arrays,ga=E.webgl_draw_buffers,pa=E.oes_vertex_array_object,G={dirty:!0,profile:Z.profile},x={},ca=[],M={},Ba={};I("dither",3024);I("blend.enable",3042);U("blend.color","blendColor",[0,0,0,0]);U("blend.equation","blendEquationSeparate",[32774,32774]);U("blend.func","blendFuncSeparate",
[1,0,1,0]);I("depth.enable",2929,!0);U("depth.func","depthFunc",513);U("depth.range","depthRange",[0,1]);U("depth.mask","depthMask",!0);U("colorMask","colorMask",[!0,!0,!0,!0]);I("cull.enable",2884);U("cull.face","cullFace",1029);U("frontFace","frontFace",2305);U("lineWidth","lineWidth",1);I("polygonOffset.enable",32823);U("polygonOffset.offset","polygonOffset",[0,0]);I("sample.alpha",32926);I("sample.enable",32928);U("sample.coverage","sampleCoverage",[1,!1]);I("stencil.enable",2960);U("stencil.mask",
"stencilMask",-1);U("stencil.func","stencilFunc",[519,0,-1]);U("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);U("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);I("scissor.enable",3089);U("scissor.box","scissor",[0,0,l.drawingBufferWidth,l.drawingBufferHeight]);U("viewport","viewport",[0,0,l.drawingBufferWidth,l.drawingBufferHeight]);var Ga={gl:l,context:la,strings:A,next:x,current:G,draw:pc,elements:f,buffer:O,shader:Yc,attributes:na.state,vao:na,uniforms:w,framebuffer:T,
extensions:E,timer:Pa,isBufferArgs:a},t={primTypes:K,compareFuncs:p,blendFuncs:J,blendEquations:sa,stencilOps:v,glTypes:z,orientationType:S};e.optional(function(){Ga.isArrayLike=r});ga&&(t.backBuffer=[1029],t.drawBuffer=da(H.maxDrawbuffers,function(a){return 0===a?[0]:da(a,function(a){return 36064+a})}));var qc=0;return{next:x,current:G,procs:function(){var a=qa(),b=a.proc("poll"),c=a.proc("refresh"),e=a.block();b(e);c(e);var d=a.shared,f=d.gl,k=d.next,t=d.current;e(t,".dirty=false;");kb(a,b);kb(a,
c,null,!0);var l;aa&&(l=a.link(aa));E.oes_vertex_array_object&&c(a.link(E.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<H.maxAttributes;++h){var g=c.def(d.attributes,"[",h,"]"),p=a.cond(g,".buffer");p.then(f,".enableVertexAttribArray(",h,");",f,".bindBuffer(",34962,",",g,".buffer.buffer);",f,".vertexAttribPointer(",h,",",g,".size,",g,".type,",g,".normalized,",g,".stride,",g,".offset);")["else"](f,".disableVertexAttribArray(",h,");",f,".vertexAttrib4f(",h,",",g,".x,",g,".y,",
g,".z,",g,".w);",g,".buffer=null;");c(p);aa&&c(l,".vertexAttribDivisorANGLE(",h,",",g,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");n(M).forEach(function(d){var l=M[d],h=e.def(k,".",d),g=a.block();g("if(",h,"){",f,".enable(",l,")}else{",f,".disable(",l,")}",t,".",d,"=",h,";");c(g);b("if(",h,"!==",t,".",d,"){",g,"}")});n(Ba).forEach(function(d){var l=Ba[d],h=G[d],M,g,p=a.block();p(f,".",l,"(");r(h)?(l=h.length,M=a.global.def(k,".",d),g=a.global.def(t,
".",d),p(da(l,function(a){return M+"["+a+"]"}),");",da(l,function(a){return g+"["+a+"]="+M+"["+a+"];"}).join("")),b("if(",da(l,function(a){return M+"["+a+"]!=="+g+"["+a+"]"}).join("||"),"){",p,"}")):(M=e.def(k,".",d),g=e.def(t,".",d),p(M,");",t,".",d,"=",M,";"),b("if(",M,"!==",g,"){",p,"}"));c(p)});return a.compile()}(),compile:function(a,b,c,e,d){var f=qa();f.stats=f.link(d);n(b["static"]).forEach(function(a){B(f,b,a)});db.forEach(function(b){B(f,a,b)});var k=Ua(a,b,c,e,f);ia(f,k);Wc(f,k);Lc(f,k);
return q(f.compile(),{destroy:function(){k.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(w,u,C){function a(a,b){this.id=c++;this.type=a;this.data=b}function b(a){if(0===a.length)return[];var c=a.charAt(0),d=a.charAt(a.length-1);if(1<a.length&&c===
d&&('"'===c||"'"===c))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return b(a.substr(0,c.index)).concat(b(c[1])).concat(b(a.substr(c.index+c[0].length)));c=a.split(".");if(1===c.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(d=0;d<c.length;++d)a=a.concat(b(c[d]));return a}function g(a){return"["+b(a).join("][")+"]"}function h(b,c){if("function"===typeof b)return new a(0,b);if("number"===
typeof b||"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(a,b){return h(a,c+"["+b+"]")}));if(b instanceof a)return b;d(!1,"invalid option type in uniform "+c)}var d=w("./util/check"),c=0;u.exports={DynamicVariable:a,define:function(b,c){return new a(b,g(c+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:h,accessor:g}},{"./util/check":21}],10:[function(w,u,C){var a=w("./util/check"),b=w("./util/is-typed-array"),g=
w("./util/is-ndarray"),h=w("./util/values"),d=w("./constants/primitives.json"),c=w("./constants/usage.json");u.exports=function(n,e,q,ka){function da(a){this.id=D++;r[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function l(c,d,l,h,p,v,k){c.buffer.bind();var r;d?((r=k)||b(d)&&(!g(d)||b(d.data))||(r=e.oes_element_index_uint?5125:5123),q._initBuffer(c.buffer,d,l,r,3)):(n.bufferData(34963,v,l),c.buffer.dtype=r||5121,c.buffer.usage=l,c.buffer.dimension=3,c.buffer.byteLength=v);
r=k;if(!k){switch(c.buffer.dtype){case 5121:case 5120:r=5121;break;case 5123:case 5122:r=5123;break;case 5125:case 5124:r=5125;break;default:a.raise("unsupported type for element array")}c.buffer.dtype=r}c.type=r;a(5125!==r||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");d=p;0>d&&(d=c.buffer.byteLength,5123===r?d>>=1:5125===r&&(d>>=2));c.vertCount=d;d=h;0>h&&(d=4,h=c.buffer.dimension,1===h&&(d=0),2===h&&(d=1),3===h&&(d=4));c.primType=d}function E(b){ka.elementsCount--;
a(null!==b.buffer,"must not double destroy elements");delete r[b.id];b.buffer.destroy();b.buffer=null}var r={},D=0,K={uint8:5121,uint16:5123};e.oes_element_index_uint&&(K.uint32=5125);da.prototype.bind=function(){this.buffer.bind()};var z=[];return{create:function(e,h){function n(e){if(e)if("number"===typeof e)r(e),p.primType=4,p.vertCount=e|0,p.type=5121;else{var k=null,h=35044,q=-1,z=-1,A=0,E=0;if(Array.isArray(e)||b(e)||g(e))k=e;else if(a.type(e,"object","invalid arguments for elements"),"data"in
e&&(k=e.data,a(Array.isArray(k)||b(k)||g(k),"invalid data for element buffer")),"usage"in e&&(a.parameter(e.usage,c,"invalid element buffer usage"),h=c[e.usage]),"primitive"in e&&(a.parameter(e.primitive,d,"invalid element buffer primitive"),q=d[e.primitive]),"count"in e&&(a("number"===typeof e.count&&0<=e.count,"invalid vertex count for elements"),z=e.count|0),"type"in e&&(a.parameter(e.type,K,"invalid buffer type"),E=K[e.type]),"length"in e)A=e.length|0;else if(A=z,5123===E||5122===E)A*=2;else if(5125===
E||5124===E)A*=4;l(p,k,h,q,z,A,E)}else r(),p.primType=4,p.vertCount=0,p.type=5121;return n}var r=q.create(null,34963,!0),p=new da(r._buffer);ka.elementsCount++;n(e);n._reglType="elements";n._elements=p;n.subdata=function(a,b){r.subdata(a,b);return n};n.destroy=function(){E(p)};return n},createStream:function(a){var b=z.pop();b||(b=new da(q.create(null,34963,!0,!1)._buffer));l(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){z.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof
da?a._elements:null},clear:function(){h(r).forEach(E)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(w,u,C){var a=w("./util/sorted-object-keys"),b=w("./util/check");u.exports=function(g,h){function d(a){b.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=c[a]=g.getExtension(a)}catch(d){}return!!e}for(var c={},n=0;n<h.extensions.length;++n){var e=h.extensions[n];
if(!d(e))return h.onDestroy(),h.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}h.optionalExtensions.forEach(d);return{extensions:c,restore:function(){a(c).forEach(function(a){if(c[a]&&!d(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(w,u,C){var a=w("./util/check"),b=w("./util/values"),g=w("./util/extend"),h=[6407,6408],d=[];d[6408]=4;d[6407]=
3;var c=[];c[5121]=1;c[5126]=4;c[36193]=2;var n=[32854,32855,36194,35907,34842,34843,34836],e={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};u.exports=function(q,ka,da,l,E,r){function D(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var e=a=0;b?(a=b.width,e=b.height):c&&(a=c.width,e=c.height);this.width=a;this.height=e}function K(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}
function z(b,c,e){if(b){if(b.texture){b=b.texture._texture;var d=Math.max(1,b.height);a(Math.max(1,b.width)===c&&d===e,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,a(b.width===c&&b.height===e,"inconsistent width/height for renderbuffer");b.refCount+=1}}function ha(a,b){b&&(b.texture?q.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):q.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function db(b){var c=3553,
e=null,d=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(c=b.target|0));a.type(f,"function","invalid attachment data");b=f._reglType;"texture2d"===b?(e=f,a(3553===c)):"textureCube"===b?(e=f,a(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===b?(d=f,c=36161):a.raise("invalid regl object for attachment");return new D(c,e,d)}function J(a,b,c,e,d){if(c)return a=l.create2D({width:a,height:b,format:e,type:d}),a._texture.refCount=0,new D(3553,a,null);a=E.create({width:a,height:b,format:e});
a._renderbuffer.refCount=0;return new D(36161,null,a)}function ma(a){return a&&(a.texture||a.renderbuffer)}function p(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function v(){this.id=f++;m[this.id]=this;this.framebuffer=q.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function k(a){a.colorAttachments.forEach(K);K(a.depthAttachment);K(a.stencilAttachment);
K(a.depthStencilAttachment)}function S(b){var c=b.framebuffer;a(c,"must not double destroy framebuffer");q.deleteFramebuffer(c);b.framebuffer=null;r.framebufferCount--;delete m[b.id]}function Q(b){var c;q.bindFramebuffer(36160,b.framebuffer);var d=b.colorAttachments;for(c=0;c<d.length;++c)ha(36064+c,d[c]);for(c=d.length;c<da.maxColorAttachments;++c)q.framebufferTexture2D(36160,36064+c,3553,null,0);q.framebufferTexture2D(36160,33306,3553,null,0);q.framebufferTexture2D(36160,36096,3553,null,0);q.framebufferTexture2D(36160,
36128,3553,null,0);ha(36096,b.depthAttachment);ha(36128,b.stencilAttachment);ha(33306,b.depthStencilAttachment);b=q.checkFramebufferStatus(36160);q.isContextLost()||36053===b||a.raise("framebuffer configuration not supported, status = "+e[b]);q.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;q.getError()}function V(b,e){function f(b,e){var g;a(A.next!==l,"can not update framebuffer which is currently in use");var p=0,m=0,q=!0,v=!0;g=null;var r=!0,E="rgba",S="uint8",D=1,K=null,y=
null,ha=null,V=!1;if("number"===typeof b)p=b|0,m=e|0||p;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(m=b.shape,a(Array.isArray(m)&&2<=m.length,"invalid shape for framebuffer"),p=m[0],m=m[1]):("radius"in b&&(p=m=b.radius),"width"in b&&(p=b.width),"height"in b&&(m=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||ka.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(D=b.colorCount|0,a(0<
D,"invalid color buffer count"));"colorTexture"in b&&(r=!!b.colorTexture,E="rgba4");if("colorType"in b){S=b.colorType;if(r)a(ka.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(ka.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===S||"float16"===S)a(ka.ext_color_buffer_half_float,
"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),E="rgba16f";else if("float"===S||"float32"===S)a(ka.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),E="rgba32f";a.oneOf(S,O,"invalid color type")}"colorFormat"in b&&(E=b.colorFormat,0<=w.indexOf(E)?r=!0:0<=H.indexOf(E)?r=!1:a.optional(function(){if(r)a.oneOf(b.colorFormat,w,"invalid color format for texture");else a.oneOf(b.colorFormat,H,"invalid color format for renderbuffer")}))}if("depthTexture"in
b||"depthStencilTexture"in b)V=!(!b.depthTexture&&!b.depthStencilTexture),a(!V||ka.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?q=b.depth:(K=b.depth,v=!1));"stencil"in b&&("boolean"===typeof b.stencil?v=b.stencil:(y=b.stencil,q=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?q=v=b.depthStencil:(ha=b.depthStencil,v=q=!1))}else p=m=1;var T=null,ra=null,u=null,Ua=null;if(Array.isArray(g))T=g.map(db);else if(g)T=[db(g)];else for(T=
Array(D),g=0;g<D;++g)T[g]=J(p,m,r,E,S);a(ka.webgl_draw_buffers||1>=T.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(T.length<=da.maxColorAttachments,"too many color attachments, not supported");p=p||T[0].width;m=m||T[0].height;K?ra=db(K):q&&!v&&(ra=J(p,m,V,"depth","uint32"));y?u=db(y):v&&!q&&(u=J(p,m,!1,"stencil","uint8"));ha?Ua=db(ha):!K&&!y&&v&&q&&(Ua=J(p,m,V,"depth stencil","depth stencil"));a(1>=!!K+!!y+!!ha,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
q=null;for(g=0;g<T.length;++g)z(T[g],p,m),a(!T[g]||T[g].texture&&0<=h.indexOf(T[g].texture._texture.format)||T[g].renderbuffer&&0<=n.indexOf(T[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+g+" is invalid"),T[g]&&T[g].texture&&(v=d[T[g].texture._texture.format]*c[T[g].texture._texture.type],null===q?q=v:a(q===v,"all color attachments much have the same number of bits per pixel."));z(ra,p,m);a(!ra||ra.texture&&6402===ra.texture._texture.format||ra.renderbuffer&&33189===ra.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");z(u,p,m);a(!u||u.renderbuffer&&36168===u.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");z(Ua,p,m);a(!Ua||Ua.texture&&34041===Ua.texture._texture.format||Ua.renderbuffer&&34041===Ua.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");k(l);l.width=p;l.height=m;l.colorAttachments=T;l.depthAttachment=ra;l.stencilAttachment=u;l.depthStencilAttachment=Ua;f.color=T.map(ma);
f.depth=ma(ra);f.stencil=ma(u);f.depthStencil=ma(Ua);f.width=l.width;f.height=l.height;Q(l);return f}var l=new v;r.framebufferCount++;f(b,e);return g(f,{resize:function(b,c){a(A.next!==l,"can not resize a framebuffer which is currently in use");var e=Math.max(b|0,1),d=Math.max(c|0||e,1);if(e===l.width&&d===l.height)return f;for(var k=l.colorAttachments,h=0;h<k.length;++h)p(k[h],e,d);p(l.depthAttachment,e,d);p(l.stencilAttachment,e,d);p(l.depthStencilAttachment,e,d);l.width=f.width=e;l.height=f.height=
d;Q(l);return f},_reglType:"framebuffer",_framebuffer:l,destroy:function(){S(l);k(l)},use:function(a){A.setFBO({framebuffer:f},a)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],H=["rgba4","rgb565","rgb5 a1"];ka.ext_srgb&&H.push("srgba");ka.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");ka.webgl_color_buffer_float&&H.push("rgba32f");var O=["uint8"];ka.oes_texture_half_float&&O.push("half float","float16");ka.oes_texture_float&&O.push("float","float32");var f=0,m={};return g(A,
{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof v)?a:null},create:V,createCube:function(b){function c(b){var d;a(0>e.indexOf(A.next),"can not update framebuffer which is currently in use");var f={color:null},k=0,h=null;d="rgba";var p="uint8",m=1;if("number"===typeof b)k=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(k=b.shape,a(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),a(k[0]===
k[1],"cube framebuffer must be square"),k=k[0]):("radius"in b&&(k=b.radius|0),"width"in b?(k=b.width|0,"height"in b&&a(b.height===k,"must be square")):"height"in b&&(k=b.height|0));if("color"in b||"colors"in b)h=b.color||b.colors,Array.isArray(h)&&a(1===h.length||ka.webgl_draw_buffers,"multiple render targets not supported");h||("colorCount"in b&&(m=b.colorCount|0,a(0<m,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,O,"invalid color type"),p=b.colorType),"colorFormat"in b&&(d=
b.colorFormat,a.oneOf(b.colorFormat,w,"invalid color format for texture")));"depth"in b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=b.depthStencil)}else k=1;if(h)if(Array.isArray(h))for(b=[],d=0;d<h.length;++d)b[d]=h[d];else b=[h];else for(b=Array(m),h={radius:k,format:d,type:p},d=0;d<m;++d)b[d]=l.createCube(h);f.color=Array(b.length);for(d=0;d<b.length;++d)m=b[d],a("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),k=k||m.width,
a(m.width===k&&m.height===k,"invalid cube map shape"),f.color[d]={target:34069,data:b[d]};for(d=0;6>d;++d){for(m=0;m<b.length;++m)f.color[m].target=34069+d;0<d&&(f.depth=e[0].depth,f.stencil=e[0].stencil,f.depthStencil=e[0].depthStencil);if(e[d])e[d](f);else e[d]=V(f)}return g(c,{width:k,height:k,color:b})}var e=Array(6);c(b);return g(c,{faces:e,resize:function(b){var d=b|0;a(0<d&&d<=da.maxCubeMapSize,"invalid radius for cube fbo");if(d===c.width)return c;var f=c.color;for(b=0;b<f.length;++b)f[b].resize(d);
for(b=0;6>b;++b)e[b].resize(d);c.width=c.height=d;return c},_reglType:"framebufferCube",destroy:function(){e.forEach(function(a){a.destroy()})}})},clear:function(){b(m).forEach(S)},restore:function(){A.cur=null;A.next=null;A.dirty=!0;b(m).forEach(function(a){a.framebuffer=q.createFramebuffer();Q(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(w,u,C){var a=w("./util/sorted-object-keys"),b=w("./util/pool");u.exports=function(g,h){var d=1;h.ext_texture_filter_anisotropic&&
(d=g.getParameter(34047));var c=1,n=1;h.webgl_draw_buffers&&(c=g.getParameter(34852),n=g.getParameter(36063));var e=!!h.oes_texture_float;if(e){e=g.createTexture();g.bindTexture(3553,e);g.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var q=g.createFramebuffer();g.bindFramebuffer(36160,q);g.framebufferTexture2D(36160,36064,3553,e,0);g.bindTexture(3553,null);if(36053!==g.checkFramebufferStatus(36160))e=!1;else{g.viewport(0,0,1,1);g.clearColor(1,0,0,1);g.clear(16384);var ka=b.allocType(5126,4);g.readPixels(0,
0,1,1,6408,5126,ka);g.getError()?e=!1:(g.deleteFramebuffer(q),g.deleteTexture(e),e=1===ka[0]);b.freeType(ka)}}ka=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ka=g.createTexture(),q=b.allocType(5121,36),g.activeTexture(33984),g.bindTexture(34067,ka),g.texImage2D(34069,0,6408,3,3,0,6408,5121,q),b.freeType(q),g.bindTexture(34067,null),g.deleteTexture(ka),ka=!g.getError());return{colorBits:[g.getParameter(3410),
g.getParameter(3411),g.getParameter(3412),g.getParameter(3413)],depthBits:g.getParameter(3414),stencilBits:g.getParameter(3415),subpixelBits:g.getParameter(3408),extensions:a(h).filter(function(a){return!!h[a]}),maxAnisotropic:d,maxDrawbuffers:c,maxColorAttachments:n,pointSizeDims:g.getParameter(33901),lineWidthDims:g.getParameter(33902),maxViewportDims:g.getParameter(3386),maxCombinedTextureUnits:g.getParameter(35661),maxCubeMapSize:g.getParameter(34076),maxRenderbufferSize:g.getParameter(34024),
maxTextureUnits:g.getParameter(34930),maxTextureSize:g.getParameter(3379),maxAttributes:g.getParameter(34921),maxVertexUniforms:g.getParameter(36347),maxVertexTextureUnits:g.getParameter(35660),maxVaryingVectors:g.getParameter(36348),maxFragmentUniforms:g.getParameter(36349),glsl:g.getParameter(35724),renderer:g.getParameter(7937),vendor:g.getParameter(7936),version:g.getParameter(7938),readFloat:e,npotTextureCube:ka}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(w,u,C){var a=
w("./util/check"),b=w("./util/is-typed-array");u.exports=function(g,h,d,c,n,e,q){function ka(l){var E;null===h.next?(a(n.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),E=5121):(a(null!==h.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),E=h.next.colorAttachments[0].texture._texture.type,a.optional(function(){e.oes_texture_float?(a(5121===E||5126===E,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),
5126===E&&a(q.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===E,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var r=0,D=0,K=c.framebufferWidth,z=c.framebufferHeight,da=null;b(l)?da=l:l&&(a.type(l,"object","invalid arguments to regl.read()"),r=l.x|0,D=l.y|0,a(0<=r&&r<c.framebufferWidth,"invalid x offset for regl.read"),a(0<=D&&D<c.framebufferHeight,"invalid y offset for regl.read"),
K=(l.width||c.framebufferWidth-r)|0,z=(l.height||c.framebufferHeight-D)|0,da=l.data||null);da&&(5121===E?a(da instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===E&&a(da instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<K&&K+r<=c.framebufferWidth,"invalid width for read pixels");a(0<z&&z+D<=c.framebufferHeight,"invalid height for read pixels");d();l=K*z*4;da||(5121===E?da=new Uint8Array(l):
5126===E&&(da=da||new Float32Array(l)));a.isTypedArray(da,"data buffer for regl.read() must be a typedarray");a(da.byteLength>=l,"data buffer for regl.read() too small");g.pixelStorei(3333,4);g.readPixels(r,D,K,z,6408,E,da);return da}function da(a){var b;h.setFBO({framebuffer:a.framebuffer},function(){b=ka(a)});return b}return function(a){return a&&"framebuffer"in a?da(a):ka(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(w,u,C){var a=w("./util/sorted-object-keys"),b=w("./util/check"),
g=w("./util/values"),h=[];h[32854]=2;h[32855]=2;h[36194]=2;h[33189]=2;h[36168]=1;h[34041]=4;h[35907]=4;h[34836]=16;h[34842]=8;h[34843]=6;u.exports=function(d,c,n,e,q){function ka(a){this.id=r++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;q.profile&&(this.stats={size:0})}function da(a){var c=a.renderbuffer;b(c,"must not double destroy renderbuffer");d.bindRenderbuffer(36161,null);d.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete D[a.id];e.renderbufferCount--}
var l={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};c.ext_srgb&&(l.srgba=35907);c.ext_color_buffer_half_float&&(l.rgba16f=34842,l.rgb16f=34843);c.webgl_color_buffer_float&&(l.rgba32f=34836);var E=[];a(l).forEach(function(a){E[l[a]]=a});var r=0,D={};ka.prototype.decRef=function(){0>=--this.refCount&&da(this)};q.profile&&(e.getTotalRenderbufferSize=function(){var b=0;a(D).forEach(function(a){b+=D[a].stats.size});return b});return{create:function(a,c){function g(a,
c){var e=0,v=0,k=32854;"object"===typeof a&&a?("shape"in a?(v=a.shape,b(Array.isArray(v)&&2<=v.length,"invalid renderbuffer shape"),e=v[0]|0,v=v[1]|0):("radius"in a&&(e=v=a.radius|0),"width"in a&&(e=a.width|0),"height"in a&&(v=a.height|0)),"format"in a&&(b.parameter(a.format,l,"invalid renderbuffer format"),k=l[a.format])):"number"===typeof a?(e=a|0,v="number"===typeof c?c|0:e):a?b.raise("invalid arguments to renderbuffer constructor"):e=v=1;b(0<e&&0<v&&e<=n.maxRenderbufferSize&&v<=n.maxRenderbufferSize,
"invalid renderbuffer size");if(e!==r.width||v!==r.height||k!==r.format)return g.width=r.width=e,g.height=r.height=v,r.format=k,d.bindRenderbuffer(36161,r.renderbuffer),d.renderbufferStorage(36161,k,e,v),b(0===d.getError(),"invalid render buffer format"),q.profile&&(r.stats.size=h[r.format]*r.width*r.height),g.format=E[r.format],g}var r=new ka(d.createRenderbuffer());D[r.id]=r;e.renderbufferCount++;g(a,c);g.resize=function(a,c){var e=a|0,l=c|0||e;if(e===r.width&&l===r.height)return g;b(0<e&&0<l&&
e<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size");g.width=r.width=e;g.height=r.height=l;d.bindRenderbuffer(36161,r.renderbuffer);d.renderbufferStorage(36161,r.format,e,l);b(0===d.getError(),"invalid render buffer format");q.profile&&(r.stats.size=h[r.format]*r.width*r.height);return g};g._reglType="renderbuffer";g._renderbuffer=r;q.profile&&(g.stats=r.stats);g.destroy=function(){r.decRef()};return g},clear:function(){g(D).forEach(da)},restore:function(){g(D).forEach(function(a){a.renderbuffer=
d.createRenderbuffer();d.bindRenderbuffer(36161,a.renderbuffer);d.renderbufferStorage(36161,a.format,a.width,a.height)});d.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(w,u,C){var a=w("./util/sorted-object-keys"),b=w("./util/check"),g=w("./util/extend"),h=w("./util/values");u.exports=function(d,c,n,e){function q(a,b,c,e){this.name=a;this.id=b;this.location=c;this.info=e}function ka(a,b){for(var c=0;c<a.length;++c)if(a[c].id===
b.id){a[c].location=b.location;return}a.push(b)}function da(a,e,l){var h=35632===a?r:D,g=h[e];if(!g){var k=c.str(e),g=d.createShader(a);d.shaderSource(g,k);d.compileShader(g);b.shaderError(d,g,k,a,l);h[e]=g}return g}function l(a,b){this.id=ha++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;e.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function E(a,l,h){var g;g=da(35632,a.fragId);var n=da(35633,a.vertId),k=a.program=d.createProgram();
d.attachShader(k,g);d.attachShader(k,n);if(h)for(g=0;g<h.length;++g)n=h[g],d.bindAttribLocation(k,n[0],n[1]);d.linkProgram(k);b.linkError(d,k,c.str(a.fragId),c.str(a.vertId),l);h=d.getProgramParameter(k,35718);e.profile&&(a.stats.uniformsCount=h);n=a.uniforms;for(g=0;g<h;++g)if(l=d.getActiveUniform(k,g))if(1<l.size)for(var r=0;r<l.size;++r){var z=l.name.replace("[0]","["+r+"]");ka(n,new q(z,c.id(z),d.getUniformLocation(k,z),l))}else ka(n,new q(l.name,c.id(l.name),d.getUniformLocation(k,l.name),l));
h=d.getProgramParameter(k,35721);e.profile&&(a.stats.attributesCount=h);a=a.attributes;for(g=0;g<h;++g)(l=d.getActiveAttrib(k,g))&&ka(a,new q(l.name,c.id(l.name),d.getAttribLocation(k,l.name),l))}var r={},D={},K={},z=[],ha=0;e.profile&&(n.getMaxUniformsCount=function(){var a=0;z.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},n.getMaxAttributesCount=function(){var a=0;z.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var a=
d.deleteShader.bind(d);h(r).forEach(a);r={};h(D).forEach(a);D={};z.forEach(function(a){d.deleteProgram(a.program)});z.length=0;K={};n.shaderCount=0},program:function(c,e,h,p){b.command(0<=c,"missing vertex shader",h);b.command(0<=e,"missing fragment shader",h);var q=K[e];q||(q=K[e]={});var k=q[c];if(k&&(k.refCount++,!p))return k;var S=new l(e,c);n.shaderCount++;E(S,h,p);k||(q[c]=S);z.push(S);return g(S,{destroy:function(){S.refCount--;if(0>=S.refCount){d.deleteProgram(S.program);var b=z.indexOf(S);
z.splice(b,1);n.shaderCount--}0>=q[S.vertId].refCount&&(d.deleteShader(D[S.vertId]),delete D[S.vertId],delete K[S.fragId][S.vertId]);a(K[S.fragId]).length||(d.deleteShader(r[S.fragId]),delete r[S.fragId],delete K[S.fragId])}})},restore:function(){r={};D={};for(var a=0;a<z.length;++a)E(z[a],null,z[a].attributes.map(function(a){return[a.location,a.name]}))},shader:da,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(w,u,C){u.exports=
function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(w,u,C){u.exports=function(){var a={"":0},b=[""];return{id:function(g){var h=a[g];if(h)return h;h=a[g]=b.length;b.push(g);return h},str:function(a){return b[a]}}}},{}],19:[function(w,u,C){function a(a){return"[object "+a+"]"}function b(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function g(a){return Array.isArray(a)&&
0!==a.length&&K(a[0])?!0:!1}function h(a){return Object.prototype.toString.call(a)}function d(a){if(!a)return!1;var c=h(a);return 0<=cb.indexOf(c)?!0:b(a)||g(a)||E(a)}function c(a,b){36193===a.type?(a.data=D(b),r.freeType(b)):a.data=b}function n(a,b,c,e,d,k){a="undefined"!==typeof O[a]?O[a]:p[a]*H[b];k&&(a*=6);if(d){for(e=0;1<=c;)e+=a*c*c,c/=2;return e}return a*c*e}var e=w("./util/sorted-object-keys"),q=w("./util/check"),ka=w("./util/extend"),da=w("./util/values"),l=w("./util/is-typed-array"),E=w("./util/is-ndarray"),
r=w("./util/pool"),D=w("./util/to-half-float"),K=w("./util/is-array-like"),z=w("./util/flatten"),ha=w("./util/is-pow2");C=w("./constants/arraytypes.json");var db=w("./constants/arraytypes.json"),J=[9984,9986,9985,9987],ma=[0,6409,6410,6407,6408],p={};p[6409]=p[6406]=p[6402]=1;p[34041]=p[6410]=2;p[6407]=p[35904]=3;p[6408]=p[35906]=4;var v=a("HTMLCanvasElement"),k=a("OffscreenCanvas"),S=a("CanvasRenderingContext2D"),Q=a("ImageBitmap"),V=a("HTMLImageElement"),A=a("HTMLVideoElement"),cb=e(C).concat([v,
k,S,Q,V,A]),H=[];H[5121]=1;H[5126]=4;H[36193]=2;H[5123]=2;H[5125]=4;var O=[];O[32854]=2;O[32855]=2;O[36194]=2;O[34041]=4;O[33776]=.5;O[33777]=.5;O[33778]=1;O[33779]=1;O[35986]=.5;O[35987]=1;O[34798]=1;O[35840]=.5;O[35841]=.25;O[35842]=.5;O[35843]=.25;O[36196]=.5;u.exports=function(a,m,H,w,O,cb,u){function la(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Pa(a,
b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function Z(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(q.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(q.type(b.flipY,"boolean","invalid texture flip"),
a.flipY=b.flipY);"alignment"in b&&(q.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(q.parameter(b.colorSpace,wc,"invalid colorSpace"),a.colorSpace=wc[b.colorSpace]);if("type"in b){var c=b.type;q(m.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");q(m.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");
q(m.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");q.parameter(c,X,"invalid texture type");a.type=X[c]}var e=a.width,d=a.height,f=a.channels,c=!1;"shape"in b?(q(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),e=b.shape[0],d=b.shape[1],3===b.shape.length&&(f=b.shape[2],q(0<f&&4>=f,"invalid number of channels"),c=!0),q(0<=e&&e<=H.maxTextureSize,"invalid width"),q(0<=
d&&d<=H.maxTextureSize,"invalid height")):("radius"in b&&(e=d=b.radius,q(0<=e&&e<=H.maxTextureSize,"invalid radius")),"width"in b&&(e=b.width,q(0<=e&&e<=H.maxTextureSize,"invalid width")),"height"in b&&(d=b.height,q(0<=d&&d<=H.maxTextureSize,"invalid height")),"channels"in b&&(f=b.channels,q(0<f&&4>=f,"invalid number of channels"),c=!0));a.width=e|0;a.height=d|0;a.channels=f|0;e=!1;"format"in b&&(e=b.format,q(m.webgl_depth_texture||!("depth"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),
q.parameter(e,N,"invalid texture format"),d=a.internalformat=N[e],a.format=sa[d],e in X&&!("type"in b)&&(a.type=X[e]),e in ia&&(a.compressed=!0),e=!0);!c&&e?a.channels=p[a.format]:c&&!e?a.channels!==ma[a.format]&&(a.format=a.internalformat=ma[a.channels]):e&&c&&q(a.channels===p[a.format],"number of channels inconsistent with specified format")}}function L(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}
function I(){la.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function U(a,e){var f=null;d(e)?f=e:e&&(q.type(e,"object","invalid pixel data type"),Z(a,e),"x"in e&&(a.xOffset=e.x|0),"y"in e&&(a.yOffset=e.y|0),d(e.data)&&(f=e.data));q(!a.compressed||f instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(e.copy){q(!f,"can not specify copy and data field for the same texture");var t=O.viewportWidth,m=O.viewportHeight;
a.width=a.width||t-a.xOffset;a.height=a.height||m-a.yOffset;a.needsCopy=!0;q(0<=a.xOffset&&a.xOffset<t&&0<=a.yOffset&&a.yOffset<m&&0<a.width&&a.width<=t&&0<a.height&&a.height<=m,"copy texture read out of bounds")}else if(!f)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(l(f))a.channels=a.channels||4,a.data=f,"type"in e||5121!==a.type||(a.type=db[Object.prototype.toString.call(f)]|0);else if(b(f)){a.channels=a.channels||4;t=f;m=t.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:m=
r.allocType(a.type,m);m.set(t);a.data=m;break;case 36193:a.data=D(t);break;default:q.raise("unsupported texture type, must specify a typed array")}a.alignment=1;a.needsFree=!0}else if(E(f)){t=f.data;Array.isArray(t)||5121!==a.type||(a.type=db[Object.prototype.toString.call(t)]|0);var m=f.shape,p=f.stride,n,x,y,B;3===m.length?(y=m[2],B=p[2]):(q(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),B=y=1);n=m[0];x=m[1];m=p[0];p=p[1];a.alignment=1;a.width=n;a.height=x;a.channels=y;a.format=a.internalformat=
ma[y];a.needsFree=!0;n=B;f=f.offset;y=a.width;B=a.height;x=a.channels;for(var N=r.allocType(36193===a.type?5126:a.type,y*B*x),da=0,G=0;G<B;++G)for(var ca=0;ca<y;++ca)for(var F=0;F<x;++F)N[da++]=t[m*ca+p*G+n*F+f];c(a,N)}else if(h(f)===v||h(f)===k||h(f)===S)h(f)===v||h(f)===k?a.element=f:a.element=f.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(h(f)===Q)a.element=f,a.width=f.width,a.height=f.height,a.channels=4;else if(h(f)===V)a.element=f,a.width=f.naturalWidth,a.height=
f.naturalHeight,a.channels=4;else if(h(f)===A)a.element=f,a.width=f.videoWidth,a.height=f.videoHeight,a.channels=4;else if(g(f)){t=a.width||f[0].length;m=a.height||f.length;p=a.channels;p=K(f[0][0])?p||f[0][0].length:p||1;n=z.shape(f);y=1;for(B=0;B<n.length;++B)y*=n[B];y=r.allocType(36193===a.type?5126:a.type,y);z.flatten(f,n,"",y);c(a,y);a.alignment=1;a.width=t;a.height=m;a.channels=p;a.format=a.internalformat=ma[p];a.needsFree=!0}5126===a.type?q(0<=H.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):
36193===a.type&&q(0<=H.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function qa(b,c,e,d,k){var l=b.element,h=b.data,g=b.internalformat,m=b.format,p=b.type,n=b.width,q=b.height;L(b);l?a.texSubImage2D(c,k,e,d,m,p,l):b.compressed?a.compressedTexSubImage2D(c,k,e,d,g,n,q,h):b.needsCopy?(w(),a.copyTexSubImage2D(c,k,e,d,b.xOffset,b.yOffset,n,q)):a.texSubImage2D(c,k,e,d,n,q,m,p,h)}function P(){return aa.pop()||new I}function Ub(a){a.needsFree&&r.freeType(a.data);
I.call(a);aa.push(a)}function $a(){la.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function R(a,b,c){var e=a.images[0]=P();a.mipmask=1;e.width=a.width=b;e.height=a.height=c;e.channels=a.channels=4}function y(a,b){var c=null;if(d(b))c=a.images[0]=P(),Pa(c,a),U(c,b),a.mipmask=1;else if(Z(a,b),Array.isArray(b.mipmap))for(var e=b.mipmap,f=0;f<e.length;++f)c=a.images[f]=P(),Pa(c,a),c.width>>=f,c.height>>=f,U(c,e[f]),a.mipmask|=1<<f;else c=a.images[0]=P(),Pa(c,
a),U(c,b),a.mipmask=1;Pa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&33779!==a.internalformat||q(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ja(b,c){for(var e=b.images,d=0;d<e.length&&e[d];++d){var k=e[d],l=c,h=d,g=k.element,m=k.data,p=k.internalformat,n=k.format,q=k.type,r=k.width,x=k.height;L(k);g?a.texImage2D(l,h,n,n,q,g):k.compressed?
a.compressedTexImage2D(l,h,p,r,x,0,m):k.needsCopy?(w(),a.copyTexImage2D(l,h,n,k.xOffset,k.yOffset,r,x,0)):a.texImage2D(l,h,n,r,x,0,n,q,m||null)}}function ba(){var a=ga.pop()||new $a;la.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function xa(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&Ub(b[c]),b[c]=null;ga.push(a)}function La(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function C(a,b){if("min"in
b){var c=b.min;q.parameter(c,wd);a.minFilter=wd[c];0<=J.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in b&&(c=b.mag,q.parameter(c,tc),a.magFilter=tc[c]);var c=a.wrapS,e=a.wrapT;if("wrap"in b){var d=b.wrap;"string"===typeof d?(q.parameter(d,hc),c=e=hc[d]):Array.isArray(d)&&(q.parameter(d[0],hc),q.parameter(d[1],hc),c=hc[d[0]],e=hc[d[1]])}else"wrapS"in b&&(c=b.wrapS,q.parameter(c,hc),c=hc[c]),"wrapT"in b&&(e=b.wrapT,q.parameter(e,hc),e=hc[e]);a.wrapS=c;a.wrapT=e;"anisotropic"in b&&(c=
b.anisotropic,q("number"===typeof c&&1<=c&&c<=H.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":q.parameter(b.mipmap,fc,"invalid mipmap hint");a.mipmapHint=fc[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":q(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;c=!0;break;default:q.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ua(b,
c){a.texParameteri(c,10241,b.minFilter);a.texParameteri(c,10240,b.magFilter);a.texParameteri(c,10242,b.wrapS);a.texParameteri(c,10243,b.wrapT);m.ext_texture_filter_anisotropic&&a.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(a.hint(33170,b.mipmapHint),a.generateMipmap(c))}function Y(b){la.call(this);this.mipmask=0;this.internalformat=6408;this.id=pa++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new La;u.profile&&(this.stats={size:0})}
function kb(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function ea(){var b=ca[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function oa(b){var c=b.texture;q(c,"must not double destroy texture");var e=b.unit,d=b.target;0<=e&&(a.activeTexture(33984+e),a.bindTexture(d,null),ca[e]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete G[b.id];cb.textureCount--}var fc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},hc={repeat:10497,
clamp:33071,mirror:33648},tc={nearest:9728,linear:9729},wd=ka({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},tc),wc={none:0,browser:37444},X={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},N={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ia={};m.ext_srgb&&(N.srgb=35904,N.srgba=35906);m.oes_texture_float&&(X.float32=X["float"]=5126);m.oes_texture_half_float&&
(X.float16=X["half float"]=36193);m.webgl_depth_texture&&(ka(N,{depth:6402,"depth stencil":34041}),ka(X,{uint16:5123,uint32:5125,"depth stencil":34042}));m.webgl_compressed_texture_s3tc&&ka(ia,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});m.webgl_compressed_texture_atc&&ka(ia,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});m.webgl_compressed_texture_pvrtc&&ka(ia,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,
"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});m.webgl_compressed_texture_etc1&&(ia["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(a.getParameter(34467));e(ia).forEach(function(a){var b=ia[a];0<=Ca.indexOf(b)&&(N[a]=b)});var Gb=e(N);H.textureFormats=Gb;var Lc=[];e(N).forEach(function(a){Lc[N[a]]=a});var Wc=[];e(X).forEach(function(a){Wc[X[a]]=a});var F=[];e(tc).forEach(function(a){F[tc[a]]=a});var B=[];e(wd).forEach(function(a){B[wd[a]]=a});var fa=[];e(hc).forEach(function(a){fa[hc[a]]=
a});var sa=Gb.reduce(function(a,b){var c=N[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||m.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),aa=[],ga=[],pa=0,G={},x=H.maxTextureUnits,ca=Array(x).map(function(){return null});ka(Y.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<x;++c){var e=ca[c];if(e){if(0<e.bindCount)continue;e.unit=-1}ca[c]=this;b=c;break}b>=x&&q.raise("insufficient number of texture units");
u.profile&&cb.maxTextureUnits<b+1&&(cb.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&oa(this)}});u.profile&&(cb.getTotalTextureSize=function(){var a=0;e(G).forEach(function(b){a+=G[b].stats.size});return a});return{create2D:function(b,c){function e(a,b){var c=d.texInfo;La.call(c);var f=ba();"number"===typeof a?"number"===typeof b?R(f,a|0,b|0):R(f,a|0,a|0):a?(q.type(a,
"object","invalid arguments to regl.texture"),C(c,a),y(f,a)):R(f,1,1);c.genMipmaps&&(f.mipmask=(f.width<<1)-1);d.mipmask=f.mipmask;Pa(d,f);q.texture2D(c,f,H);d.internalformat=f.internalformat;e.width=f.width;e.height=f.height;kb(d);ja(f,3553);Ua(c,3553);ea();xa(f);u.profile&&(d.stats.size=n(d.internalformat,d.type,f.width,f.height,c.genMipmaps,!1));e.format=Lc[d.internalformat];e.type=Wc[d.type];e.mag=F[c.magFilter];e.min=B[c.minFilter];e.wrapS=fa[c.wrapS];e.wrapT=fa[c.wrapT];return e}var d=new Y(3553);
G[d.id]=d;cb.textureCount++;e(b,c);e.subimage=function(a,b,c,f){q(!!a,"must specify image data");b|=0;c|=0;f|=0;var k=P();Pa(k,d);k.width=0;k.height=0;U(k,a);k.width=k.width||(d.width>>f)-b;k.height=k.height||(d.height>>f)-c;q(d.type===k.type&&d.format===k.format&&d.internalformat===k.internalformat,"incompatible format for texture.subimage");q(0<=b&&0<=c&&b+k.width<=d.width&&c+k.height<=d.height,"texture.subimage write out of bounds");q(d.mipmask&1<<f,"missing mipmap data");q(k.data||k.element||
k.needsCopy,"missing image data");kb(d);qa(k,3553,b,c,f);ea();Ub(k);return e};e.resize=function(b,c){var k=b|0,l=c|0||k;if(k===d.width&&l===d.height)return e;e.width=d.width=k;e.height=d.height=l;kb(d);for(var h=0;d.mipmask>>h;++h){var g=k>>h,m=l>>h;if(!g||!m)break;a.texImage2D(3553,h,d.format,g,m,0,d.format,d.type,null)}ea();u.profile&&(d.stats.size=n(d.internalformat,d.type,k,l,!1,!1));return e};e._reglType="texture2d";e._texture=d;u.profile&&(e.stats=d.stats);e.destroy=function(){d.decRef()};return e},
createCube:function(b,c,e,d,k,l){function h(a,b,c,e,d,f){var k,l=g.texInfo;La.call(l);for(k=0;6>k;++k)m[k]=ba();if("number"!==typeof a&&a)if("object"===typeof a)if(b)y(m[0],a),y(m[1],b),y(m[2],c),y(m[3],e),y(m[4],d),y(m[5],f);else if(C(l,a),Z(g,a),"faces"in a)for(a=a.faces,q(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),k=0;6>k;++k)q("object"===typeof a[k]&&!!a[k],"invalid input for cube map face"),Pa(m[k],g),y(m[k],a[k]);else for(k=0;6>k;++k)y(m[k],a);else q.raise("invalid arguments to cube map");
else for(a=a|0||1,k=0;6>k;++k)R(m[k],a,a);Pa(g,m[0]);q.optional(function(){H.npotTextureCube||q(ha(g.width)&&ha(g.height),"your browser does not support non power or two texture dimensions")});g.mipmask=l.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;q.textureCube(g,l,m,H);g.internalformat=m[0].internalformat;h.width=m[0].width;h.height=m[0].height;kb(g);for(k=0;6>k;++k)ja(m[k],34069+k);Ua(l,34067);ea();u.profile&&(g.stats.size=n(g.internalformat,g.type,h.width,h.height,l.genMipmaps,!0));h.format=Lc[g.internalformat];
h.type=Wc[g.type];h.mag=F[l.magFilter];h.min=B[l.minFilter];h.wrapS=fa[l.wrapS];h.wrapT=fa[l.wrapT];for(k=0;6>k;++k)xa(m[k]);return h}var g=new Y(34067);G[g.id]=g;cb.cubeCount++;var m=Array(6);h(b,c,e,d,k,l);h.subimage=function(a,b,c,e,d){q(!!b,"must specify image data");q("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;e|=0;d|=0;var f=P();Pa(f,g);f.width=0;f.height=0;U(f,b);f.width=f.width||(g.width>>d)-c;f.height=f.height||(g.height>>d)-e;q(g.type===f.type&&g.format===f.format&&g.internalformat===
f.internalformat,"incompatible format for texture.subimage");q(0<=c&&0<=e&&c+f.width<=g.width&&e+f.height<=g.height,"texture.subimage write out of bounds");q(g.mipmask&1<<d,"missing mipmap data");q(f.data||f.element||f.needsCopy,"missing image data");kb(g);qa(f,34069+a,c,e,d);ea();Ub(f);return h};h.resize=function(b){b|=0;if(b!==g.width){h.width=g.width=b;h.height=g.height=b;kb(g);for(var c=0;6>c;++c)for(var e=0;g.mipmask>>e;++e)a.texImage2D(34069+c,e,g.format,b>>e,b>>e,0,g.format,g.type,null);ea();
u.profile&&(g.stats.size=n(g.internalformat,g.type,h.width,h.height,!1,!0));return h}};h._reglType="textureCube";h._texture=g;u.profile&&(h.stats=g.stats);h.destroy=function(){g.decRef()};return h},clear:function(){for(var b=0;b<x;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),ca[b]=null;da(G).forEach(oa);cb.cubeCount=0;cb.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=0;b<x;++b){var c=ca[b];c&&(c.bindCount=0,c.unit=-1,ca[b]=null)}da(G).forEach(function(b){b.texture=
a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var e=0;6>e;++e)a.texImage2D(34069+e,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);Ua(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<x;++b){var c=ca[b];c&&(c.bindCount=0,c.unit=-1,ca[b]=null);a.activeTexture(33984+b);a.bindTexture(3553,null);a.bindTexture(34067,
null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(w,u,C){u.exports=function(a,b){function g(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function h(a,b,c){var d=n.pop()||new g;d.startQueryIndex=a;d.endQueryIndex=b;d.sum=
0;d.stats=c;e.push(d)}if(!b.ext_disjoint_timer_query)return null;var d=[],c=[],n=[],e=[],q=[],ka=[];return{beginQuery:function(a){var e=d.pop()||b.ext_disjoint_timer_query.createQueryEXT();b.ext_disjoint_timer_query.beginQueryEXT(35007,e);c.push(e);h(c.length-1,c.length,a)},endQuery:function(){b.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:h,update:function(){var a,h;a=c.length;if(0!==a){ka.length=Math.max(ka.length,a+1);q.length=Math.max(q.length,a+1);q[0]=0;var g=ka[0]=0;for(h=a=
0;h<c.length;++h){var r=c[h];b.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(g+=b.ext_disjoint_timer_query.getQueryObjectEXT(r,34918),d.push(r)):c[a++]=r;q[h+1]=g;ka[h+1]=a}c.length=a;for(h=a=0;h<e.length;++h){var g=e[h],D=g.startQueryIndex,r=g.endQueryIndex;g.sum+=q[r]-q[D];D=ka[D];r=ka[r];r===D?(g.stats.gpuTime+=g.sum/1E6,n.push(g)):(g.startQueryIndex=D,g.endQueryIndex=r,e[a++]=g)}e.length=a}},getNumPendingQueries:function(){return c.length},clear:function(){d.push.apply(d,c);for(var a=0;a<
d.length;a++)b.ext_disjoint_timer_query.deleteQueryEXT(d[a]);c.length=0;d.length=0},restore:function(){c.length=0;d.length=0}}}},{}],21:[function(w,u,C){function a(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function b(a){a=Error("(regl) "+a);console.error(a);throw a;}function g(a,c){a||b(c)}function h(a){return a?": "+a:""}function d(a,b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===
typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function c(a,c,e){0>c.indexOf(a)&&b("invalid value"+h(e)+". must be one of: "+c)}function n(a,b){for(a+="";a.length<b;)a=" "+a;return a}function e(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function q(a,b){this.number=a;this.line=b;this.errors=[]}function ka(a,b,c){this.file=a;this.line=b;this.message=c}function da(){var a=Error(),a=(a.stack||
a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function l(){var a=Error(),a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function E(b,c){var d=b.split("\n"),h=1,g=0,l={unknown:new e,0:new e};l.unknown.name=l[0].name=c||da();l.unknown.lines.push(new q(0,""));for(var p=0;p<d.length;++p){var n=d[p],f=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(n);
if(f)switch(f[1]){case "line":if(f=/(\d+)(\s+\d+)?/.exec(f[2]))h=f[1]|0,f[2]&&(g=f[2]|0,g in l||(l[g]=new e));break;case "define":if(f=/SHADER_NAME(_B64)?\s+(.*)$/.exec(f[2]))l[g].name=f[1]?a(f[2]):f[2]}l[g].lines.push(new q(h++,n))}J(l).forEach(function(a){var b=l[a];b.lines.forEach(function(a){b.index[a.number]=a})});return l}function r(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);c?b.push(new ka(c[1]|0,c[2]|0,c[3].trim())):0<a.length&&
b.push(new ka("unknown",0,a))}});return b}function D(a,b){b.forEach(function(b){var c=a[b.file];if(c){var e=c.index[b.line];if(e){e.errors.push(b);c.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(b)})}function K(a){a._commandRef=da()}function z(a,c){var e=l();b(a+" in command "+(c||da())+("unknown"===e?"":" called from "+e))}function ha(a,b,c,e){d(a,b)||z("invalid parameter type"+h(c)+". expected "+b+", got "+typeof a,e||da())}function db(a,b){return 32820===a||32819===
a||33635===a?2:34042===a?4:v[a]*b}var J=w("./sorted-object-keys"),ma=w("./is-typed-array");w=w("./extend");var p="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),v={};v[5120]=v[5121]=1;v[5122]=v[5123]=v[36193]=v[33635]=v[32819]=v[32820]=2;v[5124]=v[5125]=v[5126]=v[34042]=4;u.exports=w(g,{optional:function(a){a()},raise:b,commandRaise:z,command:function(a,b,c){a||z(b,c||da())},parameter:function(a,c,e){a in c||b("unknown parameter ("+a+")"+h(e)+". possible values: "+
J(c).join())},commandParameter:function(a,b,c,e){a in b||z("unknown parameter ("+a+")"+h(c)+". possible values: "+J(b).join(),e||da())},constructor:function(a){J(a).forEach(function(a){0>p.indexOf(a)&&b('invalid regl constructor argument "'+a+'". must be one of '+p)})},type:function(a,c,e){d(a,c)||b("invalid parameter type"+h(e)+". expected "+c+", got "+typeof a)},commandType:ha,isTypedArray:function(a,c){ma(a)||b("invalid parameter type"+h(c)+". must be a typed array")},nni:function(a,c){0<=a&&(a|
0)===a||b("invalid parameter type, ("+a+")"+h(c)+". must be a nonnegative integer")},oneOf:c,shaderError:function(a,b,c,e,d){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=e===a.FRAGMENT_SHADER?"fragment":"vertex";ha(c,"string",a+" shader source must be a string",d);var h=E(c,d);c=r(b);D(h,c);J(h).forEach(function(a){function b(a,c){e.push(a);d.push(c||"")}var c=h[a];if(c.hasErrors){var e=[""],d=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");
c.lines.forEach(function(a){if(0<a.errors.length){b(n(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var c=0;a.errors.forEach(function(e){e=e.message;var d=/^\s*'(.*)'\s*:\s*(.*)$/.exec(e);if(d){var f=d[1];e=d[2];switch(f){case "assign":f="="}c=Math.max(a.line.indexOf(f,c),0)}else c=0;b(n("| ",6));b(n("^^^",c+3)+"\n","font-weight:bold");b(n("| ",6));b(e+"\n","font-weight:bold")});b(n("| ",6)+"\n")}else b(n(a.number,
4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(e.join("")):(d[0]=e.join("%c"),console.log.apply(console,d))}});g.raise("Error compiling "+a+" shader, "+h[0].name)}},linkError:function(a,b,c,e,d){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),c=E(c,d),e='Error linking program with vertex shader, "'+E(e,d)[0].name+'", and fragment shader "'+c[0].name+'"',"undefined"!==typeof document?console.log("%c"+e+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold",
"color:red"):console.log(e+"\n"+a),g.raise(e))},callSite:l,saveCommandRef:K,saveDrawInfo:function(a,b,c,e){function d(a){return a?e.id(a):0}function h(a,b){J(b).forEach(function(b){a[e.id(b)]=!0})}K(a);a._fragId=d(a["static"].frag);a._vertId=d(a["static"].vert);var g=a._uniformSet={};h(g,b["static"]);h(g,b.dynamic);b=a._attributeSet={};h(b,c["static"]);h(b,c.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,
b,e){a.texture?c(a.texture._texture.internalformat,b,"unsupported texture format for attachment"):c(a.renderbuffer._renderbuffer.format,e,"unsupported renderbuffer format for attachment")},guessCommand:da,texture2D:function(a,b,c){var e=b.width,d=b.height,h=b.channels;g(0<e&&e<=c.maxTextureSize&&0<d&&d<=c.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||g(!(e&e-1)&&!!e&&!(d&d-1)&&!!d,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?
1!==e&&1!==d&&g(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(g(!(e&e-1)&&!!e&&!(d&d-1)&&!!d,"texture must be a square power of 2 to support mipmapping"),g(b.mipmask===(e<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>c.extensions.indexOf("oes_texture_float_linear")&&g(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),g(!a.genMipmaps,"mipmap generation not supported with float textures"));
var l=b.images;for(c=0;16>c;++c)if(l[c]){var p=e>>c,f=d>>c;g(b.mipmask&1<<c,"missing mipmap data");var m=l[c];g(m.width===p&&m.height===f,"invalid shape for mip images");g(m.format===b.format&&m.internalformat===b.internalformat&&m.type===b.type,"incompatible type for mip image");!m.compressed&&m.data&&(p=Math.ceil(db(m.type,h)*p/m.unpackAlignment)*m.unpackAlignment,g(m.data.byteLength===p*f,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||g(0===(b.mipmask&
1<<c),"extra mipmap data");b.compressed&&g(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,c,e){var d=a.width,h=a.height,l=a.channels;g(0<d&&d<=e.maxTextureSize&&0<h&&h<=e.maxTextureSize,"invalid texture shape");g(d===h,"cube map must be square");g(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(e=0;e<c.length;++e){var p=c[e];g(p.width===d&&p.height===h,"inconsistent cube map face shape");b.genMipmaps&&(g(!p.compressed,"can not generate mipmap for compressed textures"),
g(1===p.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=p.images,m=0;16>m;++m){var n=f[m];if(n){var q=d>>m,r=h>>m;g(p.mipmask&1<<m,"missing mipmap data");g(n.width===q&&n.height===r,"invalid shape for mip images");g(n.format===a.format&&n.internalformat===a.internalformat&&n.type===a.type,"incompatible type for mip image");n.compressed||n.data&&g(n.data.byteLength===q*r*Math.max(db(n.type,l),n.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},
{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(w,u,C){u.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(w,u,C){function a(a){return Array.prototype.slice.call(a)}var b=w("./extend"),g=w("./compiled-fns");u.exports=function(){function h(){var c=[],e=[];return b(function(){c.push.apply(c,a(arguments))},{def:function(){var b="v"+n;n++;e.push(b);0<arguments.length&&(c.push(b,"="),
c.push.apply(c,a(arguments)),c.push(";"));return b},toString:function(){return a([0<e.length?"var "+e.join(",")+";":"",a(c).join("")]).join("")}})}function d(){function c(a,b){d(a,b,"=",e.def(a,b),";")}var e=h(),d=h(),g=e.toString,n=d.toString;return b(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:d,save:c,set:function(a,b,d){c(a,b);e(a,b,"=",d,";")},toString:function(){return g()+n()}})}var c=0,n=0,e={},q={};return{global:h(),link:function(a){var b="$"+c,d=!1;"object"===typeof a&&a.name&&
(b=a.name.replace(/ /g,"_"),d=!0);if(b in e)return b;e[b]=a;d||c++;return b},block:h,proc:function(c,e){function h(){var a="a"+g.length;g.push(a);return a}var g=[];e=e||0;for(var n=0;n<e;++n)h();var n=d(),D=n.toString;return q[c]=b(n,{arg:h,toString:function(){return a(["function(",g.join(),"){",D(),"}"]).join("")}})},scope:d,cond:function(){var c=a(arguments).join(""),e=d(),h=d(),g=e.toString,n=h.toString;return b(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){h.apply(h,
a(arguments));return this},toString:function(){var b=n();b&&(b="else{"+b+"}");return a(["if(",c,"){",g(),"}",b]).join("")}})},compile:function(){var a=[],b=[];Object.keys(e).sort(function(a,b){var c="$"===a.charAt(0),e="$"===b.charAt(0);return c||e?c&&e?+a.slice(1)<+b.slice(1)?-1:1:c&&!e?-1:1:a.localeCompare(b)}).forEach(function(c){var d=e[c];a.push(c);b.push(d)});for(var c=0,d=a.length-1;-1<d;d--)if("$"===a[d].charAt(0)){c=d;break}c=a.slice(c).join();d=g[c];if(!d)throw Error("missing precompiled function with key: "+
c);return d.apply(null,b)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(w,u,C){u.exports={$0:function(a){var b,g,h,d,c,n,e,q,ka,da,l,E,r,D,K,z,ha,w,J,ma,p,v,k,S,Q,V,A,u,H,O;b=a.attributes;g=a.current;h=a.framebuffer;d=a.gl;c=a.next;n=a.vao;e=c.blend_color;q=g.blend_color;ka=c.blend_equation;da=g.blend_equation;l=c.blend_func;E=g.blend_func;r=c.colorMask;D=g.colorMask;K=c.depth_range;z=g.depth_range;ha=c.polygonOffset_offset;w=g.polygonOffset_offset;J=c.sample_coverage;ma=g.sample_coverage;
p=c.scissor_box;v=g.scissor_box;k=c.stencil_func;S=g.stencil_func;Q=c.stencil_opBack;V=g.stencil_opBack;A=c.stencil_opFront;u=g.stencil_opFront;H=c.viewport;O=g.viewport;return{poll:function(){var a,b,n,ra,na,Yc,C,la,Pa,Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa;g.dirty=!1;b=c.blend_enable;n=c.cull_enable;ra=c.depth_enable;na=c.dither;Yc=c.polygonOffset_enable;C=c.sample_alpha;la=c.sample_enable;Pa=c.scissor_enable;Z=c.stencil_enable;L=c.cull_face;I=g.cull_face;U=c.depth_func;qa=g.depth_func;P=c.depth_mask;
Ub=g.depth_mask;$a=c.frontFace;R=g.frontFace;y=c.lineWidth;ja=g.lineWidth;ba=c.stencil_mask;xa=g.stencil_mask;a=h.next;a!==h.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null),h.cur=a);b!==g.blend_enable&&(b?d.enable(3042):d.disable(3042),g.blend_enable=b);n!==g.cull_enable&&(n?d.enable(2884):d.disable(2884),g.cull_enable=n);ra!==g.depth_enable&&(ra?d.enable(2929):d.disable(2929),g.depth_enable=ra);na!==g.dither&&(na?d.enable(3024):d.disable(3024),g.dither=na);Yc!==g.polygonOffset_enable&&
(Yc?d.enable(32823):d.disable(32823),g.polygonOffset_enable=Yc);C!==g.sample_alpha&&(C?d.enable(32926):d.disable(32926),g.sample_alpha=C);la!==g.sample_enable&&(la?d.enable(32928):d.disable(32928),g.sample_enable=la);Pa!==g.scissor_enable&&(Pa?d.enable(3089):d.disable(3089),g.scissor_enable=Pa);Z!==g.stencil_enable&&(Z?d.enable(2960):d.disable(2960),g.stencil_enable=Z);if(e[0]!==q[0]||e[1]!==q[1]||e[2]!==q[2]||e[3]!==q[3])d.blendColor(e[0],e[1],e[2],e[3]),q[0]=e[0],q[1]=e[1],q[2]=e[2],q[3]=e[3];if(ka[0]!==
da[0]||ka[1]!==da[1])d.blendEquationSeparate(ka[0],ka[1]),da[0]=ka[0],da[1]=ka[1];if(l[0]!==E[0]||l[1]!==E[1]||l[2]!==E[2]||l[3]!==E[3])d.blendFuncSeparate(l[0],l[1],l[2],l[3]),E[0]=l[0],E[1]=l[1],E[2]=l[2],E[3]=l[3];if(r[0]!==D[0]||r[1]!==D[1]||r[2]!==D[2]||r[3]!==D[3])d.colorMask(r[0],r[1],r[2],r[3]),D[0]=r[0],D[1]=r[1],D[2]=r[2],D[3]=r[3];L!==I&&(d.cullFace(L),g.cull_face=L);U!==qa&&(d.depthFunc(U),g.depth_func=U);P!==Ub&&(d.depthMask(P),g.depth_mask=P);if(K[0]!==z[0]||K[1]!==z[1])d.depthRange(K[0],
K[1]),z[0]=K[0],z[1]=K[1];$a!==R&&(d.frontFace($a),g.frontFace=$a);y!==ja&&(d.lineWidth(y),g.lineWidth=y);if(ha[0]!==w[0]||ha[1]!==w[1])d.polygonOffset(ha[0],ha[1]),w[0]=ha[0],w[1]=ha[1];if(J[0]!==ma[0]||J[1]!==ma[1])d.sampleCoverage(J[0],J[1]),ma[0]=J[0],ma[1]=J[1];if(p[0]!==v[0]||p[1]!==v[1]||p[2]!==v[2]||p[3]!==v[3])d.scissor(p[0],p[1],p[2],p[3]),v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3];if(k[0]!==S[0]||k[1]!==S[1]||k[2]!==S[2])d.stencilFunc(k[0],k[1],k[2]),S[0]=k[0],S[1]=k[1],S[2]=k[2];ba!==xa&&
(d.stencilMask(ba),g.stencil_mask=ba);if(Q[0]!==V[0]||Q[1]!==V[1]||Q[2]!==V[2]||Q[3]!==V[3])d.stencilOpSeparate(Q[0],Q[1],Q[2],Q[3]),V[0]=Q[0],V[1]=Q[1],V[2]=Q[2],V[3]=Q[3];if(A[0]!==u[0]||A[1]!==u[1]||A[2]!==u[2]||A[3]!==u[3])d.stencilOpSeparate(A[0],A[1],A[2],A[3]),u[0]=A[0],u[1]=A[1],u[2]=A[2],u[3]=A[3];if(H[0]!==O[0]||H[1]!==O[1]||H[2]!==O[2]||H[3]!==O[3])d.viewport(H[0],H[1],H[2],H[3]),O[0]=H[0],O[1]=H[1],O[2]=H[2],O[3]=H[3]},refresh:function(){var a,m,T,ra,na,Yc,C,la,Pa,Z,L,I,U,qa,P,Ub;g.dirty=
!1;m=c.blend_enable;T=c.cull_enable;ra=c.depth_enable;na=c.dither;Yc=c.polygonOffset_enable;C=c.sample_alpha;la=c.sample_enable;Pa=c.scissor_enable;Z=c.stencil_enable;L=c.cull_face;I=c.depth_func;U=c.depth_mask;qa=c.frontFace;P=c.lineWidth;Ub=c.stencil_mask;(a=h.next)?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null);h.cur=a;a=b[0];a.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(0),
d.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=b[1];a.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=b[2];a.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,a.x,a.y,a.z,
a.w),a.buffer=null);a=b[3];a.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=b[4];a.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=b[5];a.buffer?
(d.enableVertexAttribArray(5),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=b[6];a.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=b[7];a.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,
a.buffer.buffer),d.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=b[8];a.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=b[9];a.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(9,
a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=b[10];a.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=b[11];a.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(11,a.size,a.type,a.normalized,
a.stride,a.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=b[12];a.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=b[13];a.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(13),
d.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=b[14];a.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=b[15];a.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,a.x,
a.y,a.z,a.w),a.buffer=null);n.currentVAO=null;n.setVAO(n.targetVAO);m?d.enable(3042):d.disable(3042);g.blend_enable=m;T?d.enable(2884):d.disable(2884);g.cull_enable=T;ra?d.enable(2929):d.disable(2929);g.depth_enable=ra;na?d.enable(3024):d.disable(3024);g.dither=na;Yc?d.enable(32823):d.disable(32823);g.polygonOffset_enable=Yc;C?d.enable(32926):d.disable(32926);g.sample_alpha=C;la?d.enable(32928):d.disable(32928);g.sample_enable=la;Pa?d.enable(3089):d.disable(3089);g.scissor_enable=Pa;Z?d.enable(2960):
d.disable(2960);g.stencil_enable=Z;d.blendColor(e[0],e[1],e[2],e[3]);q[0]=e[0];q[1]=e[1];q[2]=e[2];q[3]=e[3];d.blendEquationSeparate(ka[0],ka[1]);da[0]=ka[0];da[1]=ka[1];d.blendFuncSeparate(l[0],l[1],l[2],l[3]);E[0]=l[0];E[1]=l[1];E[2]=l[2];E[3]=l[3];d.colorMask(r[0],r[1],r[2],r[3]);D[0]=r[0];D[1]=r[1];D[2]=r[2];D[3]=r[3];d.cullFace(L);g.cull_face=L;d.depthFunc(I);g.depth_func=I;d.depthMask(U);g.depth_mask=U;d.depthRange(K[0],K[1]);z[0]=K[0];z[1]=K[1];d.frontFace(qa);g.frontFace=qa;d.lineWidth(P);
g.lineWidth=P;d.polygonOffset(ha[0],ha[1]);w[0]=ha[0];w[1]=ha[1];d.sampleCoverage(J[0],J[1]);ma[0]=J[0];ma[1]=J[1];d.scissor(p[0],p[1],p[2],p[3]);v[0]=p[0];v[1]=p[1];v[2]=p[2];v[3]=p[3];d.stencilFunc(k[0],k[1],k[2]);S[0]=k[0];S[1]=k[1];S[2]=k[2];d.stencilMask(Ub);g.stencil_mask=Ub;d.stencilOpSeparate(Q[0],Q[1],Q[2],Q[3]);V[0]=Q[0];V[1]=Q[1];V[2]=Q[2];V[3]=Q[3];d.stencilOpSeparate(A[0],A[1],A[2],A[3]);u[0]=A[0];u[1]=A[1];u[2]=A[2];u[3]=A[3];d.viewport(H[0],H[1],H[2],H[3]);O[0]=H[0];O[1]=H[1];O[2]=
H[2];O[3]=H[3]}}},$3:function(a,b,g,h){var d,c,n,e,q,ka,da,l,E,r,D,K,z,ha,w,J,ma,p,v,k,S,Q,V,A,u,H,O,f,m,T,ra,na,C;d=a.context;c=a.current;n=a.framebuffer;e=a.gl;q=a.next;ka=a.shader;da=a.vao;l=q.blend_color;E=c.blend_color;r=q.blend_equation;D=c.blend_equation;K=q.blend_func;z=c.blend_func;ha=q.colorMask;w=c.colorMask;J=q.depth_range;ma=c.depth_range;p=q.polygonOffset_offset;v=c.polygonOffset_offset;k=q.sample_coverage;S=c.sample_coverage;Q=q.scissor_box;V=c.scissor_box;A=q.stencil_func;u=c.stencil_func;
H=q.stencil_opBack;O=c.stencil_opBack;f=q.stencil_opFront;m=c.stencil_opFront;T=q.viewport;ra=c.viewport;na={};C={};return{batch:function(a,d){var g,Z,L,I,U;g=n.next;g!==n.cur&&(g?e.bindFramebuffer(36160,g.framebuffer):e.bindFramebuffer(36160,null),n.cur=g);if(c.dirty){g=q.dither;g!==c.dither&&(g?e.enable(3024):e.disable(3024),c.dither=g);g=q.blend_enable;g!==c.blend_enable&&(g?e.enable(3042):e.disable(3042),c.blend_enable=g);g=l[0];L=l[1];I=l[2];U=l[3];if(g!==E[0]||L!==E[1]||I!==E[2]||U!==E[3])e.blendColor(g,
L,I,U),E[0]=g,E[1]=L,E[2]=I,E[3]=U;g=r[0];L=r[1];if(g!==D[0]||L!==D[1])e.blendEquationSeparate(g,L),D[0]=g,D[1]=L;g=K[0];L=K[1];I=K[2];U=K[3];if(g!==z[0]||L!==z[1]||I!==z[2]||U!==z[3])e.blendFuncSeparate(g,L,I,U),z[0]=g,z[1]=L,z[2]=I,z[3]=U;g=q.depth_enable;g!==c.depth_enable&&(g?e.enable(2929):e.disable(2929),c.depth_enable=g);g=q.depth_func;g!==c.depth_func&&(e.depthFunc(g),c.depth_func=g);g=J[0];L=J[1];if(g!==ma[0]||L!==ma[1])e.depthRange(g,L),ma[0]=g,ma[1]=L;g=q.depth_mask;g!==c.depth_mask&&(e.depthMask(g),
c.depth_mask=g);g=ha[0];L=ha[1];I=ha[2];U=ha[3];if(g!==w[0]||L!==w[1]||I!==w[2]||U!==w[3])e.colorMask(g,L,I,U),w[0]=g,w[1]=L,w[2]=I,w[3]=U;g=q.cull_enable;g!==c.cull_enable&&(g?e.enable(2884):e.disable(2884),c.cull_enable=g);g=q.cull_face;g!==c.cull_face&&(e.cullFace(g),c.cull_face=g);g=q.frontFace;g!==c.frontFace&&(e.frontFace(g),c.frontFace=g);g=q.lineWidth;g!==c.lineWidth&&(e.lineWidth(g),c.lineWidth=g);g=q.polygonOffset_enable;g!==c.polygonOffset_enable&&(g?e.enable(32823):e.disable(32823),c.polygonOffset_enable=
g);g=p[0];L=p[1];if(g!==v[0]||L!==v[1])e.polygonOffset(g,L),v[0]=g,v[1]=L;g=q.sample_alpha;g!==c.sample_alpha&&(g?e.enable(32926):e.disable(32926),c.sample_alpha=g);g=q.sample_enable;g!==c.sample_enable&&(g?e.enable(32928):e.disable(32928),c.sample_enable=g);g=k[0];L=k[1];if(g!==S[0]||L!==S[1])e.sampleCoverage(g,L),S[0]=g,S[1]=L;g=q.stencil_enable;g!==c.stencil_enable&&(g?e.enable(2960):e.disable(2960),c.stencil_enable=g);g=q.stencil_mask;g!==c.stencil_mask&&(e.stencilMask(g),c.stencil_mask=g);g=
A[0];L=A[1];I=A[2];if(g!==u[0]||L!==u[1]||I!==u[2])e.stencilFunc(g,L,I),u[0]=g,u[1]=L,u[2]=I;g=f[0];L=f[1];I=f[2];U=f[3];if(g!==m[0]||L!==m[1]||I!==m[2]||U!==m[3])e.stencilOpSeparate(g,L,I,U),m[0]=g,m[1]=L,m[2]=I,m[3]=U;g=H[0];L=H[1];I=H[2];U=H[3];if(g!==O[0]||L!==O[1]||I!==O[2]||U!==O[3])e.stencilOpSeparate(g,L,I,U),O[0]=g,O[1]=L,O[2]=I,O[3]=U;g=q.scissor_enable;g!==c.scissor_enable&&(g?e.enable(3089):e.disable(3089),c.scissor_enable=g);g=Q[0];L=Q[1];I=Q[2];U=Q[3];if(g!==V[0]||L!==V[1]||I!==V[2]||
U!==V[3])e.scissor(g,L,I,U),V[0]=g,V[1]=L,V[2]=I,V[3]=U;g=T[0];L=T[1];I=T[2];U=T[3];if(g!==ra[0]||L!==ra[1]||I!==ra[2]||U!==ra[3])e.viewport(g,L,I,U),ra[0]=g,ra[1]=L,ra[2]=I,ra[3]=U;c.dirty=!1}if(g=c.profile)Z=performance.now(),b.count+=d;L=ka.program(ka.vert,ka.frag);e.useProgram(L.program);da.setVAO(null);I=L.id;(U=C[I])||(U=C[I]=h(L));U.call(this,a,d);da.setVAO(null);g&&(b.cpuTime+=performance.now()-Z)},draw:function(a){var d,h,Z,L,I;d=n.next;d!==n.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):
e.bindFramebuffer(36160,null),n.cur=d);if(c.dirty){d=q.dither;d!==c.dither&&(d?e.enable(3024):e.disable(3024),c.dither=d);d=q.blend_enable;d!==c.blend_enable&&(d?e.enable(3042):e.disable(3042),c.blend_enable=d);d=l[0];Z=l[1];L=l[2];I=l[3];if(d!==E[0]||Z!==E[1]||L!==E[2]||I!==E[3])e.blendColor(d,Z,L,I),E[0]=d,E[1]=Z,E[2]=L,E[3]=I;d=r[0];Z=r[1];if(d!==D[0]||Z!==D[1])e.blendEquationSeparate(d,Z),D[0]=d,D[1]=Z;d=K[0];Z=K[1];L=K[2];I=K[3];if(d!==z[0]||Z!==z[1]||L!==z[2]||I!==z[3])e.blendFuncSeparate(d,
Z,L,I),z[0]=d,z[1]=Z,z[2]=L,z[3]=I;d=q.depth_enable;d!==c.depth_enable&&(d?e.enable(2929):e.disable(2929),c.depth_enable=d);d=q.depth_func;d!==c.depth_func&&(e.depthFunc(d),c.depth_func=d);d=J[0];Z=J[1];if(d!==ma[0]||Z!==ma[1])e.depthRange(d,Z),ma[0]=d,ma[1]=Z;d=q.depth_mask;d!==c.depth_mask&&(e.depthMask(d),c.depth_mask=d);d=ha[0];Z=ha[1];L=ha[2];I=ha[3];if(d!==w[0]||Z!==w[1]||L!==w[2]||I!==w[3])e.colorMask(d,Z,L,I),w[0]=d,w[1]=Z,w[2]=L,w[3]=I;d=q.cull_enable;d!==c.cull_enable&&(d?e.enable(2884):
e.disable(2884),c.cull_enable=d);d=q.cull_face;d!==c.cull_face&&(e.cullFace(d),c.cull_face=d);d=q.frontFace;d!==c.frontFace&&(e.frontFace(d),c.frontFace=d);d=q.lineWidth;d!==c.lineWidth&&(e.lineWidth(d),c.lineWidth=d);d=q.polygonOffset_enable;d!==c.polygonOffset_enable&&(d?e.enable(32823):e.disable(32823),c.polygonOffset_enable=d);d=p[0];Z=p[1];if(d!==v[0]||Z!==v[1])e.polygonOffset(d,Z),v[0]=d,v[1]=Z;d=q.sample_alpha;d!==c.sample_alpha&&(d?e.enable(32926):e.disable(32926),c.sample_alpha=d);d=q.sample_enable;
d!==c.sample_enable&&(d?e.enable(32928):e.disable(32928),c.sample_enable=d);d=k[0];Z=k[1];if(d!==S[0]||Z!==S[1])e.sampleCoverage(d,Z),S[0]=d,S[1]=Z;d=q.stencil_enable;d!==c.stencil_enable&&(d?e.enable(2960):e.disable(2960),c.stencil_enable=d);d=q.stencil_mask;d!==c.stencil_mask&&(e.stencilMask(d),c.stencil_mask=d);d=A[0];Z=A[1];L=A[2];if(d!==u[0]||Z!==u[1]||L!==u[2])e.stencilFunc(d,Z,L),u[0]=d,u[1]=Z,u[2]=L;d=f[0];Z=f[1];L=f[2];I=f[3];if(d!==m[0]||Z!==m[1]||L!==m[2]||I!==m[3])e.stencilOpSeparate(d,
Z,L,I),m[0]=d,m[1]=Z,m[2]=L,m[3]=I;d=H[0];Z=H[1];L=H[2];I=H[3];if(d!==O[0]||Z!==O[1]||L!==O[2]||I!==O[3])e.stencilOpSeparate(d,Z,L,I),O[0]=d,O[1]=Z,O[2]=L,O[3]=I;d=q.scissor_enable;d!==c.scissor_enable&&(d?e.enable(3089):e.disable(3089),c.scissor_enable=d);d=Q[0];Z=Q[1];L=Q[2];I=Q[3];if(d!==V[0]||Z!==V[1]||L!==V[2]||I!==V[3])e.scissor(d,Z,L,I),V[0]=d,V[1]=Z,V[2]=L,V[3]=I;d=T[0];Z=T[1];L=T[2];I=T[3];if(d!==ra[0]||Z!==ra[1]||L!==ra[2]||I!==ra[3])e.viewport(d,Z,L,I),ra[0]=d,ra[1]=Z,ra[2]=L,ra[3]=I;c.dirty=
!1}if(d=c.profile)h=performance.now(),b.count++;Z=ka.program(ka.vert,ka.frag);e.useProgram(Z.program);da.setVAO(null);L=Z.id;(I=na[L])||(I=na[L]=g(Z));I.call(this,a);da.setVAO(null);d&&(b.cpuTime+=performance.now()-h)},scope:function(a,e,g){var h,k;if(h=c.profile)k=performance.now(),b.count++;e(d,a,g);h&&(b.cpuTime+=performance.now()-k)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,
b,g,h,d,c,n,e,q,ka,da,l,E,r,D,K,z,ha,w,J,u,p,v,k,S,Q,V,A,cb,H,O,f,m,T,ra,na,C,pc,la,Pa,Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa,fc,hc,tc,wd,wc,X,N,ia,Ca,Gb,Lc,Wc,F,B,fa,sa,aa,ga,pa){var G,x,ca,M,Ba,Ga,t,qc,Ha,W,Hb,zb,Ze,Xd,be,Ud,te,re,Kc,de,se,Pd,Qd,Yd,Jd,Me,mf,bf,Ad,Be,Rd,Sd,je,He,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb;G=a.attributes;x=a.context;ca=a.current;M=a.draw;Ba=a.elements;Ga=a.framebuffer;t=a.gl;qc=a.next;Ha=a.shader;
W=a.uniforms;Hb=a.vao;zb=qc.blend_color;Ze=ca.blend_color;Xd=qc.blend_equation;be=ca.blend_equation;Ud=qc.blend_func;te=ca.blend_func;re=qc.colorMask;Kc=ca.colorMask;de=qc.depth_range;se=ca.depth_range;Pd=qc.polygonOffset_offset;Qd=ca.polygonOffset_offset;Yd=qc.sample_coverage;Jd=ca.sample_coverage;Me=qc.scissor_box;mf=ca.scissor_box;bf=qc.stencil_func;Ad=ca.stencil_func;Be=qc.stencil_opBack;Rd=ca.stencil_opBack;Sd=qc.stencil_opFront;je=ca.stencil_opFront;He=qc.viewport;td=ca.viewport;nd={};yd={};
rd=new Float32Array(16);ed=new Float32Array(16);Bc=new Float32Array(16);ud=new Float32Array(16);gd=new Float32Array(16);Mc=new Float32Array(16);nc=new Float32Array(16);ab=new Float32Array(16);Cc=new Float32Array(16);Db=new Float32Array(16);mc=new Float32Array(16);Sa=new Float32Array(16);ic=new Float32Array(16);Zb=new Float32Array(16);ad=new Float32Array(16);Dd=new Float32Array(16);od=new Float32Array(16);Dc=new Float32Array(16);Vb=new Float32Array(16);xc=new Float32Array(16);Sc=new Float32Array(16);
Ka=new Float32Array(16);Eb=new Float32Array(16);Wa=new Float32Array(16);ya=new Float32Array(16);xd=new Float32Array(16);ub=new Float32Array(16);Ra=new Float32Array(16);Sb=new Float32Array(16);eb=new Float32Array(16);Tc=new Float32Array(16);Wb=new Float32Array(16);return{batch:function(a,b){var g,k,f,m;g=Ga.next;g!==Ga.cur&&(g?t.bindFramebuffer(36160,g.framebuffer):t.bindFramebuffer(36160,null),Ga.cur=g);if(ca.dirty){var p,v,A,W,H,S,Q,J,V,T,u,Ha,ma,O,ab,ua,Sa,zb,za,Db,Ia,Zb,Mc,Qa,ra;p=re[0];v=re[1];
A=re[2];W=re[3];if(p!==Kc[0]||v!==Kc[1]||A!==Kc[2]||W!==Kc[3])t.colorMask(p,v,A,W),Kc[0]=p,Kc[1]=v,Kc[2]=A,Kc[3]=W;H=qc.frontFace;H!==ca.frontFace&&(t.frontFace(H),ca.frontFace=H);S=qc.polygonOffset_enable;S!==ca.polygonOffset_enable&&(S?t.enable(32823):t.disable(32823),ca.polygonOffset_enable=S);Q=Pd[0];J=Pd[1];if(Q!==Qd[0]||J!==Qd[1])t.polygonOffset(Q,J),Qd[0]=Q,Qd[1]=J;V=qc.sample_alpha;V!==ca.sample_alpha&&(V?t.enable(32926):t.disable(32926),ca.sample_alpha=V);T=qc.sample_enable;T!==ca.sample_enable&&
(T?t.enable(32928):t.disable(32928),ca.sample_enable=T);u=Yd[0];Ha=Yd[1];if(u!==Jd[0]||Ha!==Jd[1])t.sampleCoverage(u,Ha),Jd[0]=u,Jd[1]=Ha;ma=qc.stencil_enable;ma!==ca.stencil_enable&&(ma?t.enable(2960):t.disable(2960),ca.stencil_enable=ma);O=qc.stencil_mask;O!==ca.stencil_mask&&(t.stencilMask(O),ca.stencil_mask=O);ab=bf[0];ua=bf[1];Sa=bf[2];if(ab!==Ad[0]||ua!==Ad[1]||Sa!==Ad[2])t.stencilFunc(ab,ua,Sa),Ad[0]=ab,Ad[1]=ua,Ad[2]=Sa;zb=Sd[0];za=Sd[1];Db=Sd[2];Ia=Sd[3];if(zb!==je[0]||za!==je[1]||Db!==je[2]||
Ia!==je[3])t.stencilOpSeparate(zb,za,Db,Ia),je[0]=zb,je[1]=za,je[2]=Db,je[3]=Ia;Zb=Be[0];Mc=Be[1];Qa=Be[2];ra=Be[3];if(Zb!==Rd[0]||Mc!==Rd[1]||Qa!==Rd[2]||ra!==Rd[3])t.stencilOpSeparate(Zb,Mc,Qa,ra),Rd[0]=Zb,Rd[1]=Mc,Rd[2]=Qa,Rd[3]=ra}t.blendColor(0,0,0,0);Ze[0]=0;Ze[1]=0;Ze[2]=0;Ze[3]=0;t.disable(3042);ca.blend_enable=!1;t.blendEquationSeparate(32774,32774);be[0]=32774;be[1]=32774;t.blendFuncSeparate(770,771,1,1);te[0]=770;te[1]=771;te[2]=1;te[3]=1;t.enable(2884);ca.cull_enable=!0;t.cullFace(1029);
ca.cull_face=1029;t.enable(2929);ca.depth_enable=!0;t.depthFunc(513);ca.depth_func=513;t.depthMask(!0);ca.depth_mask=!0;t.depthRange(0,1);se[0]=0;se[1]=1;t.disable(3024);ca.dither=!1;t.lineWidth(2);ca.lineWidth=2;t.enable(3089);ca.scissor_enable=!0;k=ca.profile;ca.profile=!1;t.useProgram(pc.program);var gd,Za,nc,va,C,Ja,cb,hb,jb,wa,Me,Da,rb,sb,Xa,Ya,Bc,ic,Cc,Va,ad,ed,Ea,mc,Oa,Aa,nb,wb,Cb,tb,rd,xb,ud;Hb.setVAO(null);gd=fc.location;Za=G[gd];Za.buffer||t.enableVertexAttribArray(gd);if(Za.type!==h.dtype||
4!==Za.size||Za.buffer!==h||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(gd,4,h.dtype,!1,0,0),Za.type=h.dtype,Za.size=4,Za.buffer=h,Za.normalized=!1,Za.offset=0,Za.stride=0;nc=hc.location;va=G[nc];va.buffer||t.enableVertexAttribArray(nc);if(va.type!==d.dtype||4!==va.size||va.buffer!==d||!1!==va.normalized||0!==va.offset||0!==va.stride)t.bindBuffer(34962,d.buffer),t.vertexAttribPointer(nc,4,d.dtype,!1,0,0),va.type=d.dtype,va.size=4,va.buffer=d,
va.normalized=!1,va.offset=0,va.stride=0;C=tc.location;Ja=G[C];Ja.buffer||t.enableVertexAttribArray(C);if(Ja.type!==c.dtype||4!==Ja.size||Ja.buffer!==c||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)t.bindBuffer(34962,c.buffer),t.vertexAttribPointer(C,4,c.dtype,!1,0,0),Ja.type=c.dtype,Ja.size=4,Ja.buffer=c,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;cb=wd.location;hb=G[cb];hb.buffer||t.enableVertexAttribArray(cb);if(hb.type!==n.dtype||4!==hb.size||hb.buffer!==n||!1!==hb.normalized||0!==hb.offset||
0!==hb.stride)t.bindBuffer(34962,n.buffer),t.vertexAttribPointer(cb,4,n.dtype,!1,0,0),hb.type=n.dtype,hb.size=4,hb.buffer=n,hb.normalized=!1,hb.offset=0,hb.stride=0;jb=wc.location;wa=G[jb];wa.buffer||t.enableVertexAttribArray(jb);if(wa.type!==e.dtype||4!==wa.size||wa.buffer!==e||!1!==wa.normalized||0!==wa.offset||0!==wa.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(jb,4,e.dtype,!1,0,0),wa.type=e.dtype,wa.size=4,wa.buffer=e,wa.normalized=!1,wa.offset=0,wa.stride=0;Me=X.location;Da=G[Me];
Da.buffer||t.enableVertexAttribArray(Me);if(Da.type!==q.dtype||4!==Da.size||Da.buffer!==q||!1!==Da.normalized||0!==Da.offset||0!==Da.stride)t.bindBuffer(34962,q.buffer),t.vertexAttribPointer(Me,4,q.dtype,!1,0,0),Da.type=q.dtype,Da.size=4,Da.buffer=q,Da.normalized=!1,Da.offset=0,Da.stride=0;rb=N.location;sb=G[rb];sb.buffer||t.enableVertexAttribArray(rb);if(sb.type!==ka.dtype||4!==sb.size||sb.buffer!==ka||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)t.bindBuffer(34962,ka.buffer),t.vertexAttribPointer(rb,
4,ka.dtype,!1,0,0),sb.type=ka.dtype,sb.size=4,sb.buffer=ka,sb.normalized=!1,sb.offset=0,sb.stride=0;Xa=ia.location;Ya=G[Xa];Ya.buffer||t.enableVertexAttribArray(Xa);if(Ya.type!==da.dtype||4!==Ya.size||Ya.buffer!==da||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)t.bindBuffer(34962,da.buffer),t.vertexAttribPointer(Xa,4,da.dtype,!1,0,0),Ya.type=da.dtype,Ya.size=4,Ya.buffer=da,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Bc=Ca.location;ic=G[Bc];ic.buffer||t.enableVertexAttribArray(Bc);if(ic.type!==l.dtype||
4!==ic.size||ic.buffer!==l||!1!==ic.normalized||0!==ic.offset||0!==ic.stride)t.bindBuffer(34962,l.buffer),t.vertexAttribPointer(Bc,4,l.dtype,!1,0,0),ic.type=l.dtype,ic.size=4,ic.buffer=l,ic.normalized=!1,ic.offset=0,ic.stride=0;Cc=Gb.location;Va=G[Cc];Va.buffer||t.enableVertexAttribArray(Cc);if(Va.type!==E.dtype||4!==Va.size||Va.buffer!==E||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)t.bindBuffer(34962,E.buffer),t.vertexAttribPointer(Cc,4,E.dtype,!1,0,0),Va.type=E.dtype,Va.size=4,Va.buffer=E,
Va.normalized=!1,Va.offset=0,Va.stride=0;ad=Lc.location;ed=G[ad];ed.buffer||t.enableVertexAttribArray(ad);if(ed.type!==r.dtype||4!==ed.size||ed.buffer!==r||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)t.bindBuffer(34962,r.buffer),t.vertexAttribPointer(ad,4,r.dtype,!1,0,0),ed.type=r.dtype,ed.size=4,ed.buffer=r,ed.normalized=!1,ed.offset=0,ed.stride=0;Ea=Wc.location;mc=G[Ea];mc.buffer||t.enableVertexAttribArray(Ea);if(mc.type!==D.dtype||4!==mc.size||mc.buffer!==D||!1!==mc.normalized||0!==mc.offset||
0!==mc.stride)t.bindBuffer(34962,D.buffer),t.vertexAttribPointer(Ea,4,D.dtype,!1,0,0),mc.type=D.dtype,mc.size=4,mc.buffer=D,mc.normalized=!1,mc.offset=0,mc.stride=0;Oa=F.location;Aa=G[Oa];Aa.buffer||t.enableVertexAttribArray(Oa);if(Aa.type!==K.dtype||4!==Aa.size||Aa.buffer!==K||!1!==Aa.normalized||0!==Aa.offset||0!==Aa.stride)t.bindBuffer(34962,K.buffer),t.vertexAttribPointer(Oa,4,K.dtype,!1,0,0),Aa.type=K.dtype,Aa.size=4,Aa.buffer=K,Aa.normalized=!1,Aa.offset=0,Aa.stride=0;nb=B.location;wb=G[nb];
wb.buffer||t.enableVertexAttribArray(nb);if(wb.type!==z.dtype||4!==wb.size||wb.buffer!==z||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)t.bindBuffer(34962,z.buffer),t.vertexAttribPointer(nb,4,z.dtype,!1,0,0),wb.type=z.dtype,wb.size=4,wb.buffer=z,wb.normalized=!1,wb.offset=0,wb.stride=0;Cb=fa.location;tb=G[Cb];tb.buffer||t.enableVertexAttribArray(Cb);if(tb.type!==ha.dtype||4!==tb.size||tb.buffer!==ha||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)t.bindBuffer(34962,ha.buffer),t.vertexAttribPointer(Cb,
4,ha.dtype,!1,0,0),tb.type=ha.dtype,tb.size=4,tb.buffer=ha,tb.normalized=!1,tb.offset=0,tb.stride=0;rd=Pa.location;xb=G[rd];xb.buffer||t.enableVertexAttribArray(rd);if(xb.type!==w.dtype||4!==xb.size||xb.buffer!==w||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)t.bindBuffer(34962,w.buffer),t.vertexAttribPointer(rd,4,w.dtype,!1,0,0),xb.type=w.dtype,xb.size=4,xb.buffer=w,xb.normalized=!1,xb.offset=0,xb.stride=0;t.uniform1i(sa.location,la.bind());(ud=M.elements)?t.bindBuffer(34963,ud.buffer.buffer):
Hb.currentVAO&&(ud=Ba.getElements(Hb.currentVAO.elements))&&t.bindBuffer(34963,ud.buffer.buffer);for(f=0;f<b;++f){m=a[f];var Ud,de,He,Dd,Xd,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,na,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Gf,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,ve,ue,We,le,ce,ae,oe,Zd;nd.height=m.viewportHeight;nd.width=m.viewportWidth;nd.x=m.viewportX;nd.y=m.viewportY;Ud=nd.x|0;de=nd.y|0;He="width"in nd?nd.width|0:x.framebufferWidth-Ud;Dd="height"in nd?nd.height|0:x.framebufferHeight-
de;Xd=x.viewportWidth;x.viewportWidth=He;Tb=x.viewportHeight;x.viewportHeight=Dd;t.viewport(Ud,de,He,Dd);td[0]=Ud;td[1]=de;td[2]=He;td[3]=Dd;yd.height=m.scissorHeight;yd.width=m.scissorWidth;yd.x=m.scissorX;yd.y=m.scissorY;$b=yd.x|0;Mb=yd.y|0;Fa="width"in yd?yd.width|0:x.framebufferWidth-$b;Yb="height"in yd?yd.height|0:x.framebufferHeight-Mb;t.scissor($b,Mb,Fa,Yb);mf[0]=$b;mf[1]=Mb;mf[2]=Fa;mf[3]=Yb;ob=m.dim0A;t.uniformMatrix4fv(L.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(od[0]=
ob[0],od[1]=ob[1],od[2]=ob[2],od[3]=ob[3],od[4]=ob[4],od[5]=ob[5],od[6]=ob[6],od[7]=ob[7],od[8]=ob[8],od[9]=ob[9],od[10]=ob[10],od[11]=ob[11],od[12]=ob[12],od[13]=ob[13],od[14]=ob[14],od[15]=ob[15],od));yb=m.dim1A;t.uniformMatrix4fv(P.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(Dc[0]=yb[0],Dc[1]=yb[1],Dc[2]=yb[2],Dc[3]=yb[3],Dc[4]=yb[4],Dc[5]=yb[5],Dc[6]=yb[6],Dc[7]=yb[7],Dc[8]=yb[8],Dc[9]=yb[9],Dc[10]=yb[10],Dc[11]=yb[11],Dc[12]=yb[12],Dc[13]=yb[13],Dc[14]=yb[14],Dc[15]=yb[15],
Dc));Kb=m.dim0B;t.uniformMatrix4fv(I.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(Vb[0]=Kb[0],Vb[1]=Kb[1],Vb[2]=Kb[2],Vb[3]=Kb[3],Vb[4]=Kb[4],Vb[5]=Kb[5],Vb[6]=Kb[6],Vb[7]=Kb[7],Vb[8]=Kb[8],Vb[9]=Kb[9],Vb[10]=Kb[10],Vb[11]=Kb[11],Vb[12]=Kb[12],Vb[13]=Kb[13],Vb[14]=Kb[14],Vb[15]=Kb[15],Vb));Nb=m.dim1B;t.uniformMatrix4fv(Ub.location,!1,Array.isArray(Nb)||Nb instanceof Float32Array?Nb:(xc[0]=Nb[0],xc[1]=Nb[1],xc[2]=Nb[2],xc[3]=Nb[3],xc[4]=Nb[4],xc[5]=Nb[5],xc[6]=Nb[6],xc[7]=Nb[7],xc[8]=
Nb[8],xc[9]=Nb[9],xc[10]=Nb[10],xc[11]=Nb[11],xc[12]=Nb[12],xc[13]=Nb[13],xc[14]=Nb[14],xc[15]=Nb[15],xc));dc=m.dim0C;t.uniformMatrix4fv(U.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Sc[0]=dc[0],Sc[1]=dc[1],Sc[2]=dc[2],Sc[3]=dc[3],Sc[4]=dc[4],Sc[5]=dc[5],Sc[6]=dc[6],Sc[7]=dc[7],Sc[8]=dc[8],Sc[9]=dc[9],Sc[10]=dc[10],Sc[11]=dc[11],Sc[12]=dc[12],Sc[13]=dc[13],Sc[14]=dc[14],Sc[15]=dc[15],Sc));gc=m.dim1C;t.uniformMatrix4fv($a.location,!1,Array.isArray(gc)||gc instanceof Float32Array?
gc:(Ka[0]=gc[0],Ka[1]=gc[1],Ka[2]=gc[2],Ka[3]=gc[3],Ka[4]=gc[4],Ka[5]=gc[5],Ka[6]=gc[6],Ka[7]=gc[7],Ka[8]=gc[8],Ka[9]=gc[9],Ka[10]=gc[10],Ka[11]=gc[11],Ka[12]=gc[12],Ka[13]=gc[13],Ka[14]=gc[14],Ka[15]=gc[15],Ka));na=m.dim0D;t.uniformMatrix4fv(qa.location,!1,Array.isArray(na)||na instanceof Float32Array?na:(Eb[0]=na[0],Eb[1]=na[1],Eb[2]=na[2],Eb[3]=na[3],Eb[4]=na[4],Eb[5]=na[5],Eb[6]=na[6],Eb[7]=na[7],Eb[8]=na[8],Eb[9]=na[9],Eb[10]=na[10],Eb[11]=na[11],Eb[12]=na[12],Eb[13]=na[13],Eb[14]=na[14],Eb[15]=
na[15],Eb));Ec=m.dim1D;t.uniformMatrix4fv(R.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(Wa[0]=Ec[0],Wa[1]=Ec[1],Wa[2]=Ec[2],Wa[3]=Ec[3],Wa[4]=Ec[4],Wa[5]=Ec[5],Wa[6]=Ec[6],Wa[7]=Ec[7],Wa[8]=Ec[8],Wa[9]=Ec[9],Wa[10]=Ec[10],Wa[11]=Ec[11],Wa[12]=Ec[12],Wa[13]=Ec[13],Wa[14]=Ec[14],Wa[15]=Ec[15],Wa));Fc=m.loA;t.uniformMatrix4fv(bc.location,!1,Array.isArray(Fc)||Fc instanceof Float32Array?Fc:(ya[0]=Fc[0],ya[1]=Fc[1],ya[2]=Fc[2],ya[3]=Fc[3],ya[4]=Fc[4],ya[5]=Fc[5],ya[6]=Fc[6],ya[7]=Fc[7],
ya[8]=Fc[8],ya[9]=Fc[9],ya[10]=Fc[10],ya[11]=Fc[11],ya[12]=Fc[12],ya[13]=Fc[13],ya[14]=Fc[14],ya[15]=Fc[15],ya));Hc=m.hiA;t.uniformMatrix4fv(ja.location,!1,Array.isArray(Hc)||Hc instanceof Float32Array?Hc:(xd[0]=Hc[0],xd[1]=Hc[1],xd[2]=Hc[2],xd[3]=Hc[3],xd[4]=Hc[4],xd[5]=Hc[5],xd[6]=Hc[6],xd[7]=Hc[7],xd[8]=Hc[8],xd[9]=Hc[9],xd[10]=Hc[10],xd[11]=Hc[11],xd[12]=Hc[12],xd[13]=Hc[13],xd[14]=Hc[14],xd[15]=Hc[15],xd));Oc=m.loB;t.uniformMatrix4fv(Ua.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?
Oc:(ub[0]=Oc[0],ub[1]=Oc[1],ub[2]=Oc[2],ub[3]=Oc[3],ub[4]=Oc[4],ub[5]=Oc[5],ub[6]=Oc[6],ub[7]=Oc[7],ub[8]=Oc[8],ub[9]=Oc[9],ub[10]=Oc[10],ub[11]=Oc[11],ub[12]=Oc[12],ub[13]=Oc[13],ub[14]=Oc[14],ub[15]=Oc[15],ub));bd=m.hiB;t.uniformMatrix4fv(ba.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:(Ra[0]=bd[0],Ra[1]=bd[1],Ra[2]=bd[2],Ra[3]=bd[3],Ra[4]=bd[4],Ra[5]=bd[5],Ra[6]=bd[6],Ra[7]=bd[7],Ra[8]=bd[8],Ra[9]=bd[9],Ra[10]=bd[10],Ra[11]=bd[11],Ra[12]=bd[12],Ra[13]=bd[13],Ra[14]=bd[14],Ra[15]=
bd[15],Ra));Uc=m.loC;t.uniformMatrix4fv(Y.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(Sb[0]=Uc[0],Sb[1]=Uc[1],Sb[2]=Uc[2],Sb[3]=Uc[3],Sb[4]=Uc[4],Sb[5]=Uc[5],Sb[6]=Uc[6],Sb[7]=Uc[7],Sb[8]=Uc[8],Sb[9]=Uc[9],Sb[10]=Uc[10],Sb[11]=Uc[11],Sb[12]=Uc[12],Sb[13]=Uc[13],Sb[14]=Uc[14],Sb[15]=Uc[15],Sb));Pc=m.hiC;t.uniformMatrix4fv(xa.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(eb[0]=Pc[0],eb[1]=Pc[1],eb[2]=Pc[2],eb[3]=Pc[3],eb[4]=Pc[4],eb[5]=Pc[5],eb[6]=Pc[6],eb[7]=Pc[7],
eb[8]=Pc[8],eb[9]=Pc[9],eb[10]=Pc[10],eb[11]=Pc[11],eb[12]=Pc[12],eb[13]=Pc[13],eb[14]=Pc[14],eb[15]=Pc[15],eb));Jb=m.loD;t.uniformMatrix4fv(kb.location,!1,Array.isArray(Jb)||Jb instanceof Float32Array?Jb:(Tc[0]=Jb[0],Tc[1]=Jb[1],Tc[2]=Jb[2],Tc[3]=Jb[3],Tc[4]=Jb[4],Tc[5]=Jb[5],Tc[6]=Jb[6],Tc[7]=Jb[7],Tc[8]=Jb[8],Tc[9]=Jb[9],Tc[10]=Jb[10],Tc[11]=Jb[11],Tc[12]=Jb[12],Tc[13]=Jb[13],Tc[14]=Jb[14],Tc[15]=Jb[15],Tc));Fb=m.hiD;t.uniformMatrix4fv(La.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?
Fb:(Wb[0]=Fb[0],Wb[1]=Fb[1],Wb[2]=Fb[2],Wb[3]=Fb[3],Wb[4]=Fb[4],Wb[5]=Fb[5],Wb[6]=Fb[6],Wb[7]=Fb[7],Wb[8]=Fb[8],Wb[9]=Fb[9],Wb[10]=Fb[10],Wb[11]=Fb[11],Wb[12]=Fb[12],Wb[13]=Fb[13],Wb[14]=Fb[14],Wb[15]=Fb[15],Wb));Qc=m.resolution;Jc=Qc[0];ec=Qc[1];f&&Vc===Jc&&Zc===ec||(Vc=Jc,Zc=ec,t.uniform2f(aa.location,Jc,ec));dd=m.viewBoxPos;pd=dd[0];$c=dd[1];f&&ne===pd&&Gf===$c||(ne=pd,Gf=$c,t.uniform2f(ga.location,pd,$c));Vd=m.viewBoxSize;he=Vd[0];ke=Vd[1];f&&Ie===he&&Gd===ke||(Ie=he,Gd=ke,t.uniform2f(pa.location,
he,ke));Ed=m.maskHeight;f&&fd===Ed||(fd=Ed,t.uniform1f(ea.location,Ed));Ic=m.drwLayer;f&&qd===Ic||(qd=Ic,t.uniform1f(y.location,Ic));jd=m.contextColor;cd=jd[0];Cd=jd[1];ve=jd[2];We=jd[3];f&&md===cd&&zd===Cd&&ue===ve&&le===We||(md=cd,zd=Cd,ue=ve,le=We,t.uniform4f(Z.location,cd,Cd,ve,We));(ce=m.maskTexture)&&"framebuffer"===ce._reglType&&(ce=ce.color[0]);ae=ce._texture;t.uniform1i(oa.location,ae.bind());oe=m.offset;if(Zd=m.count)ud?t.drawElements(1,Zd,ud.type,oe<<(ud.type-5121>>1)):t.drawArrays(1,oe,
Zd),x.viewportWidth=Xd,x.viewportHeight=Tb,ae.unbind()}la.unbind();ca.dirty=!0;Hb.setVAO(null);ca.profile=k},draw:function(a){var b,k,f,m,p,v;b=Ga.next;b!==Ga.cur&&(b?t.bindFramebuffer(36160,b.framebuffer):t.bindFramebuffer(36160,null),Ga.cur=b);if(ca.dirty){b=re[0];v=re[1];k=re[2];f=re[3];if(b!==Kc[0]||v!==Kc[1]||k!==Kc[2]||f!==Kc[3])t.colorMask(b,v,k,f),Kc[0]=b,Kc[1]=v,Kc[2]=k,Kc[3]=f;b=qc.frontFace;b!==ca.frontFace&&(t.frontFace(b),ca.frontFace=b);b=qc.polygonOffset_enable;b!==ca.polygonOffset_enable&&
(b?t.enable(32823):t.disable(32823),ca.polygonOffset_enable=b);b=Pd[0];v=Pd[1];if(b!==Qd[0]||v!==Qd[1])t.polygonOffset(b,v),Qd[0]=b,Qd[1]=v;b=qc.sample_alpha;b!==ca.sample_alpha&&(b?t.enable(32926):t.disable(32926),ca.sample_alpha=b);b=qc.sample_enable;b!==ca.sample_enable&&(b?t.enable(32928):t.disable(32928),ca.sample_enable=b);b=Yd[0];v=Yd[1];if(b!==Jd[0]||v!==Jd[1])t.sampleCoverage(b,v),Jd[0]=b,Jd[1]=v;b=qc.stencil_enable;b!==ca.stencil_enable&&(b?t.enable(2960):t.disable(2960),ca.stencil_enable=
b);b=qc.stencil_mask;b!==ca.stencil_mask&&(t.stencilMask(b),ca.stencil_mask=b);b=bf[0];v=bf[1];k=bf[2];if(b!==Ad[0]||v!==Ad[1]||k!==Ad[2])t.stencilFunc(b,v,k),Ad[0]=b,Ad[1]=v,Ad[2]=k;b=Sd[0];v=Sd[1];k=Sd[2];f=Sd[3];if(b!==je[0]||v!==je[1]||k!==je[2]||f!==je[3])t.stencilOpSeparate(b,v,k,f),je[0]=b,je[1]=v,je[2]=k,je[3]=f;b=Be[0];v=Be[1];k=Be[2];f=Be[3];if(b!==Rd[0]||v!==Rd[1]||k!==Rd[2]||f!==Rd[3])t.stencilOpSeparate(b,v,k,f),Rd[0]=b,Rd[1]=v,Rd[2]=k,Rd[3]=f}nd.height=a.viewportHeight;nd.width=a.viewportWidth;
nd.x=a.viewportX;nd.y=a.viewportY;k=nd.x|0;f=nd.y|0;m="width"in nd?nd.width|0:x.framebufferWidth-k;p="height"in nd?nd.height|0:x.framebufferHeight-f;b=x.viewportWidth;x.viewportWidth=m;v=x.viewportHeight;x.viewportHeight=p;t.viewport(k,f,m,p);td[0]=k;td[1]=f;td[2]=m;td[3]=p;t.blendColor(0,0,0,0);Ze[0]=0;Ze[1]=0;Ze[2]=0;Ze[3]=0;t.disable(3042);ca.blend_enable=!1;t.blendEquationSeparate(32774,32774);be[0]=32774;be[1]=32774;t.blendFuncSeparate(770,771,1,1);te[0]=770;te[1]=771;te[2]=1;te[3]=1;t.enable(2884);
ca.cull_enable=!0;t.cullFace(1029);ca.cull_face=1029;t.enable(2929);ca.depth_enable=!0;t.depthFunc(513);ca.depth_func=513;t.depthMask(!0);ca.depth_mask=!0;t.depthRange(0,1);se[0]=0;se[1]=1;t.disable(3024);ca.dither=!1;t.lineWidth(2);ca.lineWidth=2;yd.height=a.scissorHeight;yd.width=a.scissorWidth;yd.x=a.scissorX;yd.y=a.scissorY;k=yd.x|0;f=yd.y|0;m="width"in yd?yd.width|0:x.framebufferWidth-k;p="height"in yd?yd.height|0:x.framebufferHeight-f;t.scissor(k,f,m,p);mf[0]=k;mf[1]=f;mf[2]=m;mf[3]=p;t.enable(3089);
ca.scissor_enable=!0;k=ca.profile;ca.profile=!1;t.useProgram(g.program);Hb.setVAO(null);f=fc.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==h.dtype||4!==m.size||m.buffer!==h||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,h.buffer),t.vertexAttribPointer(f,4,h.dtype,!1,0,0),m.type=h.dtype,m.size=4,m.buffer=h,m.normalized=!1,m.offset=0,m.stride=0;f=hc.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==d.dtype||4!==m.size||m.buffer!==d||!1!==m.normalized||
0!==m.offset||0!==m.stride)t.bindBuffer(34962,d.buffer),t.vertexAttribPointer(f,4,d.dtype,!1,0,0),m.type=d.dtype,m.size=4,m.buffer=d,m.normalized=!1,m.offset=0,m.stride=0;f=tc.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==c.dtype||4!==m.size||m.buffer!==c||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,c.buffer),t.vertexAttribPointer(f,4,c.dtype,!1,0,0),m.type=c.dtype,m.size=4,m.buffer=c,m.normalized=!1,m.offset=0,m.stride=0;f=wd.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);
if(m.type!==n.dtype||4!==m.size||m.buffer!==n||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,n.buffer),t.vertexAttribPointer(f,4,n.dtype,!1,0,0),m.type=n.dtype,m.size=4,m.buffer=n,m.normalized=!1,m.offset=0,m.stride=0;f=wc.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==e.dtype||4!==m.size||m.buffer!==e||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(f,4,e.dtype,!1,0,0),m.type=e.dtype,m.size=4,m.buffer=e,m.normalized=
!1,m.offset=0,m.stride=0;f=X.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==q.dtype||4!==m.size||m.buffer!==q||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,q.buffer),t.vertexAttribPointer(f,4,q.dtype,!1,0,0),m.type=q.dtype,m.size=4,m.buffer=q,m.normalized=!1,m.offset=0,m.stride=0;f=N.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==ka.dtype||4!==m.size||m.buffer!==ka||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,ka.buffer),
t.vertexAttribPointer(f,4,ka.dtype,!1,0,0),m.type=ka.dtype,m.size=4,m.buffer=ka,m.normalized=!1,m.offset=0,m.stride=0;f=ia.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==da.dtype||4!==m.size||m.buffer!==da||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,da.buffer),t.vertexAttribPointer(f,4,da.dtype,!1,0,0),m.type=da.dtype,m.size=4,m.buffer=da,m.normalized=!1,m.offset=0,m.stride=0;f=Ca.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==l.dtype||
4!==m.size||m.buffer!==l||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,l.buffer),t.vertexAttribPointer(f,4,l.dtype,!1,0,0),m.type=l.dtype,m.size=4,m.buffer=l,m.normalized=!1,m.offset=0,m.stride=0;f=Gb.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==E.dtype||4!==m.size||m.buffer!==E||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,E.buffer),t.vertexAttribPointer(f,4,E.dtype,!1,0,0),m.type=E.dtype,m.size=4,m.buffer=E,m.normalized=!1,m.offset=0,
m.stride=0;f=Lc.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==r.dtype||4!==m.size||m.buffer!==r||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,r.buffer),t.vertexAttribPointer(f,4,r.dtype,!1,0,0),m.type=r.dtype,m.size=4,m.buffer=r,m.normalized=!1,m.offset=0,m.stride=0;f=Wc.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==D.dtype||4!==m.size||m.buffer!==D||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,D.buffer),t.vertexAttribPointer(f,
4,D.dtype,!1,0,0),m.type=D.dtype,m.size=4,m.buffer=D,m.normalized=!1,m.offset=0,m.stride=0;f=F.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==K.dtype||4!==m.size||m.buffer!==K||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,K.buffer),t.vertexAttribPointer(f,4,K.dtype,!1,0,0),m.type=K.dtype,m.size=4,m.buffer=K,m.normalized=!1,m.offset=0,m.stride=0;f=B.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==z.dtype||4!==m.size||m.buffer!==z||!1!==m.normalized||
0!==m.offset||0!==m.stride)t.bindBuffer(34962,z.buffer),t.vertexAttribPointer(f,4,z.dtype,!1,0,0),m.type=z.dtype,m.size=4,m.buffer=z,m.normalized=!1,m.offset=0,m.stride=0;f=fa.location;m=G[f];m.buffer||t.enableVertexAttribArray(f);if(m.type!==ha.dtype||4!==m.size||m.buffer!==ha||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,ha.buffer),t.vertexAttribPointer(f,4,ha.dtype,!1,0,0),m.type=ha.dtype,m.size=4,m.buffer=ha,m.normalized=!1,m.offset=0,m.stride=0;f=Pa.location;m=G[f];m.buffer||
t.enableVertexAttribArray(f);if(m.type!==w.dtype||4!==m.size||m.buffer!==w||!1!==m.normalized||0!==m.offset||0!==m.stride)t.bindBuffer(34962,w.buffer),t.vertexAttribPointer(f,4,w.dtype,!1,0,0),m.type=w.dtype,m.size=4,m.buffer=w,m.normalized=!1,m.offset=0,m.stride=0;f=a.dim0A;t.uniformMatrix4fv(L.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(rd[0]=f[0],rd[1]=f[1],rd[2]=f[2],rd[3]=f[3],rd[4]=f[4],rd[5]=f[5],rd[6]=f[6],rd[7]=f[7],rd[8]=f[8],rd[9]=f[9],rd[10]=f[10],rd[11]=f[11],rd[12]=f[12],
rd[13]=f[13],rd[14]=f[14],rd[15]=f[15],rd));f=a.dim1A;t.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ed[0]=f[0],ed[1]=f[1],ed[2]=f[2],ed[3]=f[3],ed[4]=f[4],ed[5]=f[5],ed[6]=f[6],ed[7]=f[7],ed[8]=f[8],ed[9]=f[9],ed[10]=f[10],ed[11]=f[11],ed[12]=f[12],ed[13]=f[13],ed[14]=f[14],ed[15]=f[15],ed));f=a.dim0B;t.uniformMatrix4fv(I.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bc[0]=f[0],Bc[1]=f[1],Bc[2]=f[2],Bc[3]=f[3],Bc[4]=f[4],Bc[5]=f[5],Bc[6]=f[6],Bc[7]=f[7],
Bc[8]=f[8],Bc[9]=f[9],Bc[10]=f[10],Bc[11]=f[11],Bc[12]=f[12],Bc[13]=f[13],Bc[14]=f[14],Bc[15]=f[15],Bc));f=a.dim1B;t.uniformMatrix4fv(Ub.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ud[0]=f[0],ud[1]=f[1],ud[2]=f[2],ud[3]=f[3],ud[4]=f[4],ud[5]=f[5],ud[6]=f[6],ud[7]=f[7],ud[8]=f[8],ud[9]=f[9],ud[10]=f[10],ud[11]=f[11],ud[12]=f[12],ud[13]=f[13],ud[14]=f[14],ud[15]=f[15],ud));f=a.dim0C;t.uniformMatrix4fv(U.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(gd[0]=f[0],gd[1]=f[1],
gd[2]=f[2],gd[3]=f[3],gd[4]=f[4],gd[5]=f[5],gd[6]=f[6],gd[7]=f[7],gd[8]=f[8],gd[9]=f[9],gd[10]=f[10],gd[11]=f[11],gd[12]=f[12],gd[13]=f[13],gd[14]=f[14],gd[15]=f[15],gd));f=a.dim1C;t.uniformMatrix4fv($a.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Mc[0]=f[0],Mc[1]=f[1],Mc[2]=f[2],Mc[3]=f[3],Mc[4]=f[4],Mc[5]=f[5],Mc[6]=f[6],Mc[7]=f[7],Mc[8]=f[8],Mc[9]=f[9],Mc[10]=f[10],Mc[11]=f[11],Mc[12]=f[12],Mc[13]=f[13],Mc[14]=f[14],Mc[15]=f[15],Mc));f=a.dim0D;t.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(nc[0]=f[0],nc[1]=f[1],nc[2]=f[2],nc[3]=f[3],nc[4]=f[4],nc[5]=f[5],nc[6]=f[6],nc[7]=f[7],nc[8]=f[8],nc[9]=f[9],nc[10]=f[10],nc[11]=f[11],nc[12]=f[12],nc[13]=f[13],nc[14]=f[14],nc[15]=f[15],nc));f=a.dim1D;t.uniformMatrix4fv(R.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ab[0]=f[0],ab[1]=f[1],ab[2]=f[2],ab[3]=f[3],ab[4]=f[4],ab[5]=f[5],ab[6]=f[6],ab[7]=f[7],ab[8]=f[8],ab[9]=f[9],ab[10]=f[10],ab[11]=f[11],ab[12]=f[12],ab[13]=f[13],ab[14]=f[14],ab[15]=f[15],ab));
f=a.loA;t.uniformMatrix4fv(bc.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Cc[0]=f[0],Cc[1]=f[1],Cc[2]=f[2],Cc[3]=f[3],Cc[4]=f[4],Cc[5]=f[5],Cc[6]=f[6],Cc[7]=f[7],Cc[8]=f[8],Cc[9]=f[9],Cc[10]=f[10],Cc[11]=f[11],Cc[12]=f[12],Cc[13]=f[13],Cc[14]=f[14],Cc[15]=f[15],Cc));f=a.hiA;t.uniformMatrix4fv(ja.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Db[0]=f[0],Db[1]=f[1],Db[2]=f[2],Db[3]=f[3],Db[4]=f[4],Db[5]=f[5],Db[6]=f[6],Db[7]=f[7],Db[8]=f[8],Db[9]=f[9],Db[10]=f[10],Db[11]=
f[11],Db[12]=f[12],Db[13]=f[13],Db[14]=f[14],Db[15]=f[15],Db));f=a.loB;t.uniformMatrix4fv(Ua.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(mc[0]=f[0],mc[1]=f[1],mc[2]=f[2],mc[3]=f[3],mc[4]=f[4],mc[5]=f[5],mc[6]=f[6],mc[7]=f[7],mc[8]=f[8],mc[9]=f[9],mc[10]=f[10],mc[11]=f[11],mc[12]=f[12],mc[13]=f[13],mc[14]=f[14],mc[15]=f[15],mc));f=a.hiB;t.uniformMatrix4fv(ba.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Sa[0]=f[0],Sa[1]=f[1],Sa[2]=f[2],Sa[3]=f[3],Sa[4]=f[4],Sa[5]=f[5],Sa[6]=
f[6],Sa[7]=f[7],Sa[8]=f[8],Sa[9]=f[9],Sa[10]=f[10],Sa[11]=f[11],Sa[12]=f[12],Sa[13]=f[13],Sa[14]=f[14],Sa[15]=f[15],Sa));f=a.loC;t.uniformMatrix4fv(Y.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ic[0]=f[0],ic[1]=f[1],ic[2]=f[2],ic[3]=f[3],ic[4]=f[4],ic[5]=f[5],ic[6]=f[6],ic[7]=f[7],ic[8]=f[8],ic[9]=f[9],ic[10]=f[10],ic[11]=f[11],ic[12]=f[12],ic[13]=f[13],ic[14]=f[14],ic[15]=f[15],ic));f=a.hiC;t.uniformMatrix4fv(xa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Zb[0]=f[0],
Zb[1]=f[1],Zb[2]=f[2],Zb[3]=f[3],Zb[4]=f[4],Zb[5]=f[5],Zb[6]=f[6],Zb[7]=f[7],Zb[8]=f[8],Zb[9]=f[9],Zb[10]=f[10],Zb[11]=f[11],Zb[12]=f[12],Zb[13]=f[13],Zb[14]=f[14],Zb[15]=f[15],Zb));f=a.loD;t.uniformMatrix4fv(kb.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ad[0]=f[0],ad[1]=f[1],ad[2]=f[2],ad[3]=f[3],ad[4]=f[4],ad[5]=f[5],ad[6]=f[6],ad[7]=f[7],ad[8]=f[8],ad[9]=f[9],ad[10]=f[10],ad[11]=f[11],ad[12]=f[12],ad[13]=f[13],ad[14]=f[14],ad[15]=f[15],ad));f=a.hiD;t.uniformMatrix4fv(La.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(Dd[0]=f[0],Dd[1]=f[1],Dd[2]=f[2],Dd[3]=f[3],Dd[4]=f[4],Dd[5]=f[5],Dd[6]=f[6],Dd[7]=f[7],Dd[8]=f[8],Dd[9]=f[9],Dd[10]=f[10],Dd[11]=f[11],Dd[12]=f[12],Dd[13]=f[13],Dd[14]=f[14],Dd[15]=f[15],Dd));f=a.resolution;t.uniform2f(aa.location,f[0],f[1]);f=a.viewBoxPos;t.uniform2f(ga.location,f[0],f[1]);f=a.viewBoxSize;t.uniform2f(pa.location,f[0],f[1]);t.uniform1f(ea.location,a.maskHeight);t.uniform1f(y.location,a.drwLayer);f=a.contextColor;t.uniform4f(Z.location,
f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;t.uniform1i(oa.location,f.bind());t.uniform1i(sa.location,J.bind());(m=M.elements)?t.bindBuffer(34963,m.buffer.buffer):Hb.currentVAO&&(m=Ba.getElements(Hb.currentVAO.elements))&&t.bindBuffer(34963,m.buffer.buffer);p=a.offset;if(a=a.count)m?t.drawElements(1,a,m.type,p<<(m.type-5121>>1)):t.drawArrays(1,p,a),ca.dirty=!0,Hb.setVAO(null),x.viewportWidth=b,x.viewportHeight=v,ca.profile=k,f.unbind(),J.unbind()},
scope:function(a,b,g){var t,y,B,N,G,F,X,I,L,P,J,U,R,Y,aa,ga,ia,Z,fa,ba,ea,ja,Ba,sa,Ga,ya,hc,ab,pa,Sa,Ca,va,Ka,Jd,Db,Hb,Wa,wa,Sd,Da,Zb,xc,Mc,qa,gd,Vb,ic,Ra,Eb,nc,Ea,Sc,Oa,Aa,wd,oa,ed,ub,eb,la,Bc,mc,Ad,Rd,Cc,Dc,Kc,ad,Sb,Fa,Gb,ob,yb,td,ud,je,Lc,Wb,rd,wc,xd,Tc,xa,od,Ze,Jb,Fb,be,Pd,mf,Be,Dd,fc,bf,$a,Pa,tc,Yd,re,La,kb,Qd,te,se,Ic,Ub,Ua,Wc,md,bc,zd,pc,ue,We,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,
hf,jf,kf,qf,nf,rf,Bf,Cf,Le,ye,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf,dg,Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;nd.height=a.viewportHeight;nd.width=a.viewportWidth;nd.x=a.viewportX;nd.y=a.viewportY;t=nd.x|0;y=nd.y|0;B="width"in nd?nd.width|0:x.framebufferWidth-
t;N="height"in nd?nd.height|0:x.framebufferHeight-y;G=x.viewportWidth;x.viewportWidth=B;F=x.viewportHeight;x.viewportHeight=N;X=He[0];He[0]=t;I=He[1];He[1]=y;L=He[2];He[2]=B;P=He[3];He[3]=N;J=zb[0];zb[0]=0;U=zb[1];zb[1]=0;R=zb[2];zb[2]=0;Y=zb[3];zb[3]=0;aa=qc.blend_enable;qc.blend_enable=!1;ga=Xd[0];Xd[0]=32774;ia=Xd[1];Xd[1]=32774;Z=Ud[0];Ud[0]=770;fa=Ud[1];Ud[1]=771;ba=Ud[2];Ud[2]=1;ea=Ud[3];Ud[3]=1;ja=qc.cull_enable;qc.cull_enable=!0;Ba=qc.cull_face;qc.cull_face=1029;sa=qc.depth_enable;qc.depth_enable=
!0;Ga=qc.depth_func;qc.depth_func=513;ya=qc.depth_mask;qc.depth_mask=!0;hc=de[0];de[0]=0;ab=de[1];de[1]=1;pa=qc.dither;qc.dither=!1;Sa=qc.lineWidth;qc.lineWidth=2;yd.height=a.scissorHeight;yd.width=a.scissorWidth;yd.x=a.scissorX;yd.y=a.scissorY;Ca=yd.x|0;va=yd.y|0;Ka="width"in yd?yd.width|0:x.framebufferWidth-Ca;Jd="height"in yd?yd.height|0:x.framebufferHeight-va;Db=Me[0];Me[0]=Ca;Hb=Me[1];Me[1]=va;Wa=Me[2];Me[2]=Ka;wa=Me[3];Me[3]=Jd;Sd=qc.scissor_enable;qc.scissor_enable=!0;Da=ca.profile;ca.profile=
!1;Zb=a.offset;xc=M.offset;M.offset=Zb;Mc=a.count;qa=M.count;M.count=Mc;gd=M.primitive;M.primitive=1;Vb=a.contextColor;ic=W[24];W[24]=Vb;Ra=a.dim0A;Eb=W[3];W[3]=Ra;nc=a.dim0B;Ea=W[5];W[5]=nc;Sc=a.dim0C;Oa=W[7];W[7]=Sc;Aa=a.dim0D;wd=W[9];W[9]=Aa;oa=a.dim1A;ed=W[4];W[4]=oa;ub=a.dim1B;eb=W[6];W[6]=ub;la=a.dim1C;Bc=W[8];W[8]=la;mc=a.dim1D;Ad=W[10];W[10]=mc;Rd=a.drwLayer;Cc=W[23];W[23]=Rd;Dc=a.hiA;Kc=W[12];W[12]=Dc;ad=a.hiB;Sb=W[14];W[14]=ad;Fa=a.hiC;Gb=W[16];W[16]=Fa;ob=a.hiD;yb=W[18];W[18]=ob;td=a.loA;
ud=W[11];W[11]=td;je=a.loB;Lc=W[13];W[13]=je;Wb=a.loC;rd=W[15];W[15]=Wb;wc=a.loD;xd=W[17];W[17]=wc;Tc=a.maskHeight;xa=W[22];W[22]=Tc;od=a.maskTexture;Ze=W[25];W[25]=od;Jb=W[26];W[26]=u;Fb=a.resolution;be=W[19];W[19]=Fb;Pd=a.viewBoxPos;mf=W[20];W[20]=Pd;Be=a.viewBoxSize;Dd=W[21];W[21]=Be;fc=p.buffer;p.buffer=w;bf=p.divisor;p.divisor=0;$a=p.normalized;p.normalized=!1;Pa=p.offset;p.offset=0;tc=p.size;p.size=0;Yd=p.state;p.state=1;re=p.stride;p.stride=0;La=p.type;p.type=w.dtype;kb=p.w;p.w=0;Qd=p.x;p.x=
0;te=p.y;p.y=0;se=p.z;p.z=0;Ic=v.buffer;v.buffer=h;Ub=v.divisor;v.divisor=0;Ua=v.normalized;v.normalized=!1;Wc=v.offset;v.offset=0;md=v.size;v.size=0;bc=v.state;v.state=1;zd=v.stride;v.stride=0;pc=v.type;v.type=h.dtype;ue=v.w;v.w=0;We=v.x;v.x=0;le=v.y;v.y=0;ce=v.z;v.z=0;ae=k.buffer;k.buffer=d;oe=k.divisor;k.divisor=0;Zd=k.normalized;k.normalized=!1;fe=k.offset;k.offset=0;Ac=k.size;k.size=0;Xc=k.state;k.state=1;pe=k.stride;k.stride=0;ie=k.type;k.type=d.dtype;Fd=k.w;k.w=0;Id=k.x;k.x=0;Kd=k.y;k.y=0;
Ld=k.z;k.z=0;ge=S.buffer;S.buffer=c;Te=S.divisor;S.divisor=0;we=S.normalized;S.normalized=!1;me=S.offset;S.offset=0;Ne=S.size;S.size=0;Oe=S.state;S.state=1;Je=S.stride;S.stride=0;qe=S.type;S.type=c.dtype;ze=S.w;S.w=0;Ce=S.x;S.x=0;De=S.y;S.y=0;Ee=S.z;S.z=0;Ae=Q.buffer;Q.buffer=n;Hd=Q.divisor;Q.divisor=0;Od=Q.normalized;Q.normalized=!1;Wd=Q.offset;Q.offset=0;$d=Q.size;Q.size=0;Fe=Q.state;Q.state=1;Bd=Q.stride;Q.stride=0;Md=Q.type;Q.type=n.dtype;xe=Q.w;Q.w=0;Ge=Q.x;Q.x=0;ff=Q.y;Q.y=0;Ye=Q.z;Q.z=0;Pe=
V.buffer;V.buffer=e;Ke=V.divisor;V.divisor=0;Xe=V.normalized;V.normalized=!1;Ue=V.offset;V.offset=0;Qe=V.size;V.size=0;Re=V.state;V.state=1;Nd=V.stride;V.stride=0;Td=V.type;V.type=e.dtype;Se=V.w;V.w=0;gf=V.x;V.x=0;lf=V.y;V.y=0;cf=V.z;V.z=0;hf=A.buffer;A.buffer=q;jf=A.divisor;A.divisor=0;kf=A.normalized;A.normalized=!1;qf=A.offset;A.offset=0;nf=A.size;A.size=0;rf=A.state;A.state=1;Bf=A.stride;A.stride=0;Cf=A.type;A.type=q.dtype;Le=A.w;A.w=0;ye=A.x;A.x=0;of=A.y;A.y=0;pf=A.z;A.z=0;Df=cb.buffer;cb.buffer=
ka;Hf=cb.divisor;cb.divisor=0;Af=cb.normalized;cb.normalized=!1;Ef=cb.offset;cb.offset=0;Ff=cb.size;cb.size=0;wf=cb.state;cb.state=1;xf=cb.stride;cb.stride=0;uf=cb.type;cb.type=ka.dtype;yf=cb.w;cb.w=0;zf=cb.x;cb.x=0;Jf=cb.y;cb.y=0;Kf=cb.z;cb.z=0;Lf=H.buffer;H.buffer=da;Mf=H.divisor;H.divisor=0;sf=H.normalized;H.normalized=!1;Rf=H.offset;H.offset=0;If=H.size;H.size=0;tf=H.state;H.state=1;dg=H.stride;H.stride=0;Sf=H.type;H.type=da.dtype;Tf=H.w;H.w=0;qg=H.x;H.x=0;df=H.y;H.y=0;$e=H.z;H.z=0;Nf=O.buffer;
O.buffer=l;Of=O.divisor;O.divisor=0;eg=O.normalized;O.normalized=!1;fg=O.offset;O.offset=0;gg=O.size;O.size=0;hg=O.state;O.state=1;ig=O.stride;O.stride=0;Wf=O.type;O.type=l.dtype;Uf=O.w;O.w=0;Xf=O.x;O.x=0;Yf=O.y;O.y=0;Zf=O.z;O.z=0;jg=f.buffer;f.buffer=E;rg=f.divisor;f.divisor=0;sg=f.normalized;f.normalized=!1;tg=f.offset;f.offset=0;ug=f.size;f.size=0;vg=f.state;f.state=1;wg=f.stride;f.stride=0;xg=f.type;f.type=E.dtype;yg=f.w;f.w=0;zg=f.x;f.x=0;Ag=f.y;f.y=0;Bg=f.z;f.z=0;ef=m.buffer;m.buffer=r;af=m.divisor;
m.divisor=0;Pf=m.normalized;m.normalized=!1;Qf=m.offset;m.offset=0;kg=m.size;m.size=0;lg=m.state;m.state=1;mg=m.stride;m.stride=0;ng=m.type;m.type=r.dtype;og=m.w;m.w=0;$f=m.x;m.x=0;Vf=m.y;m.y=0;ag=m.z;m.z=0;bg=T.buffer;T.buffer=D;cg=T.divisor;T.divisor=0;pg=T.normalized;T.normalized=!1;Cg=T.offset;T.offset=0;Dg=T.size;T.size=0;Eg=T.state;T.state=1;Fg=T.stride;T.stride=0;Gg=T.type;T.type=D.dtype;Hg=T.w;T.w=0;Ig=T.x;T.x=0;Jg=T.y;T.y=0;Kg=T.z;T.z=0;Lg=ra.buffer;ra.buffer=K;Mg=ra.divisor;ra.divisor=0;
Ng=ra.normalized;ra.normalized=!1;Og=ra.offset;ra.offset=0;Pg=ra.size;ra.size=0;Qg=ra.state;ra.state=1;Rg=ra.stride;ra.stride=0;Sg=ra.type;ra.type=K.dtype;Tg=ra.w;ra.w=0;Ug=ra.x;ra.x=0;Vg=ra.y;ra.y=0;Wg=ra.z;ra.z=0;Xg=na.buffer;na.buffer=z;Yg=na.divisor;na.divisor=0;Zg=na.normalized;na.normalized=!1;$g=na.offset;na.offset=0;ah=na.size;na.size=0;bh=na.state;na.state=1;ch=na.stride;na.stride=0;dh=na.type;na.type=z.dtype;eh=na.w;na.w=0;fh=na.x;na.x=0;gh=na.y;na.y=0;hh=na.z;na.z=0;ih=C.buffer;C.buffer=
ha;jh=C.divisor;C.divisor=0;kh=C.normalized;C.normalized=!1;lh=C.offset;C.offset=0;mh=C.size;C.size=0;nh=C.state;C.state=1;oh=C.stride;C.stride=0;ph=C.type;C.type=ha.dtype;qh=C.w;C.w=0;rh=C.x;C.x=0;sh=C.y;C.y=0;th=C.z;C.z=0;uh=Ha.vert;Ha.vert=2;vh=Ha.frag;Ha.frag=1;ca.dirty=!0;b(x,a,g);x.viewportWidth=G;x.viewportHeight=F;He[0]=X;He[1]=I;He[2]=L;He[3]=P;zb[0]=J;zb[1]=U;zb[2]=R;zb[3]=Y;qc.blend_enable=aa;Xd[0]=ga;Xd[1]=ia;Ud[0]=Z;Ud[1]=fa;Ud[2]=ba;Ud[3]=ea;qc.cull_enable=ja;qc.cull_face=Ba;qc.depth_enable=
sa;qc.depth_func=Ga;qc.depth_mask=ya;de[0]=hc;de[1]=ab;qc.dither=pa;qc.lineWidth=Sa;Me[0]=Db;Me[1]=Hb;Me[2]=Wa;Me[3]=wa;qc.scissor_enable=Sd;ca.profile=Da;M.offset=xc;M.count=qa;M.primitive=gd;W[24]=ic;W[3]=Eb;W[5]=Ea;W[7]=Oa;W[9]=wd;W[4]=ed;W[6]=eb;W[8]=Bc;W[10]=Ad;W[23]=Cc;W[12]=Kc;W[14]=Sb;W[16]=Gb;W[18]=yb;W[11]=ud;W[13]=Lc;W[15]=rd;W[17]=xd;W[22]=xa;W[25]=Ze;W[26]=Jb;W[19]=be;W[20]=mf;W[21]=Dd;p.buffer=fc;p.divisor=bf;p.normalized=$a;p.offset=Pa;p.size=tc;p.state=Yd;p.stride=re;p.type=La;p.w=
kb;p.x=Qd;p.y=te;p.z=se;v.buffer=Ic;v.divisor=Ub;v.normalized=Ua;v.offset=Wc;v.size=md;v.state=bc;v.stride=zd;v.type=pc;v.w=ue;v.x=We;v.y=le;v.z=ce;k.buffer=ae;k.divisor=oe;k.normalized=Zd;k.offset=fe;k.size=Ac;k.state=Xc;k.stride=pe;k.type=ie;k.w=Fd;k.x=Id;k.y=Kd;k.z=Ld;S.buffer=ge;S.divisor=Te;S.normalized=we;S.offset=me;S.size=Ne;S.state=Oe;S.stride=Je;S.type=qe;S.w=ze;S.x=Ce;S.y=De;S.z=Ee;Q.buffer=Ae;Q.divisor=Hd;Q.normalized=Od;Q.offset=Wd;Q.size=$d;Q.state=Fe;Q.stride=Bd;Q.type=Md;Q.w=xe;Q.x=
Ge;Q.y=ff;Q.z=Ye;V.buffer=Pe;V.divisor=Ke;V.normalized=Xe;V.offset=Ue;V.size=Qe;V.state=Re;V.stride=Nd;V.type=Td;V.w=Se;V.x=gf;V.y=lf;V.z=cf;A.buffer=hf;A.divisor=jf;A.normalized=kf;A.offset=qf;A.size=nf;A.state=rf;A.stride=Bf;A.type=Cf;A.w=Le;A.x=ye;A.y=of;A.z=pf;cb.buffer=Df;cb.divisor=Hf;cb.normalized=Af;cb.offset=Ef;cb.size=Ff;cb.state=wf;cb.stride=xf;cb.type=uf;cb.w=yf;cb.x=zf;cb.y=Jf;cb.z=Kf;H.buffer=Lf;H.divisor=Mf;H.normalized=sf;H.offset=Rf;H.size=If;H.state=tf;H.stride=dg;H.type=Sf;H.w=
Tf;H.x=qg;H.y=df;H.z=$e;O.buffer=Nf;O.divisor=Of;O.normalized=eg;O.offset=fg;O.size=gg;O.state=hg;O.stride=ig;O.type=Wf;O.w=Uf;O.x=Xf;O.y=Yf;O.z=Zf;f.buffer=jg;f.divisor=rg;f.normalized=sg;f.offset=tg;f.size=ug;f.state=vg;f.stride=wg;f.type=xg;f.w=yg;f.x=zg;f.y=Ag;f.z=Bg;m.buffer=ef;m.divisor=af;m.normalized=Pf;m.offset=Qf;m.size=kg;m.state=lg;m.stride=mg;m.type=ng;m.w=og;m.x=$f;m.y=Vf;m.z=ag;T.buffer=bg;T.divisor=cg;T.normalized=pg;T.offset=Cg;T.size=Dg;T.state=Eg;T.stride=Fg;T.type=Gg;T.w=Hg;T.x=
Ig;T.y=Jg;T.z=Kg;ra.buffer=Lg;ra.divisor=Mg;ra.normalized=Ng;ra.offset=Og;ra.size=Pg;ra.state=Qg;ra.stride=Rg;ra.type=Sg;ra.w=Tg;ra.x=Ug;ra.y=Vg;ra.z=Wg;na.buffer=Xg;na.divisor=Yg;na.normalized=Zg;na.offset=$g;na.size=ah;na.state=bh;na.stride=ch;na.type=dh;na.w=eh;na.x=fh;na.y=gh;na.z=hh;C.buffer=ih;C.divisor=jh;C.normalized=kh;C.offset=lh;C.size=mh;C.state=nh;C.stride=oh;C.type=ph;C.w=qh;C.x=rh;C.y=sh;C.z=th;Ha.vert=uh;Ha.frag=vh;ca.dirty=!0}}},$1:function(a,b){var g,h,d,c,n,e,q,ka,da,l,E,r,D,K,
z,w,u,J,ma,p,v,k,S,Q,V,A,C,H,O,f;g=a.attributes;h=a.current;d=a.framebuffer;c=a.gl;n=a.next;e=a.vao;q=n.blend_color;ka=h.blend_color;da=n.blend_equation;l=h.blend_equation;E=n.blend_func;r=h.blend_func;D=n.colorMask;K=h.colorMask;z=n.depth_range;w=h.depth_range;u=n.polygonOffset_offset;J=h.polygonOffset_offset;ma=n.sample_coverage;p=h.sample_coverage;v=n.scissor_box;k=h.scissor_box;S=n.stencil_func;Q=h.stencil_func;V=n.stencil_opBack;A=h.stencil_opBack;C=n.stencil_opFront;H=h.stencil_opFront;O=n.viewport;
f=h.viewport;return{poll:function(){var a,b,e,g,Yc,pc,la,Pa,Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La;h.dirty=!1;b=n.blend_enable;e=n.cull_enable;g=n.depth_enable;Yc=n.dither;pc=n.polygonOffset_enable;la=n.sample_alpha;Pa=n.sample_enable;Z=n.scissor_enable;L=n.stencil_enable;I=n.cull_face;U=h.cull_face;qa=n.depth_func;P=h.depth_func;Ub=n.depth_mask;$a=h.depth_mask;R=n.frontFace;y=h.frontFace;ja=n.lineWidth;ba=h.lineWidth;xa=n.stencil_mask;La=h.stencil_mask;a=d.next;a!==d.cur&&(a?c.bindFramebuffer(36160,
a.framebuffer):c.bindFramebuffer(36160,null),d.cur=a);b!==h.blend_enable&&(b?c.enable(3042):c.disable(3042),h.blend_enable=b);e!==h.cull_enable&&(e?c.enable(2884):c.disable(2884),h.cull_enable=e);g!==h.depth_enable&&(g?c.enable(2929):c.disable(2929),h.depth_enable=g);Yc!==h.dither&&(Yc?c.enable(3024):c.disable(3024),h.dither=Yc);pc!==h.polygonOffset_enable&&(pc?c.enable(32823):c.disable(32823),h.polygonOffset_enable=pc);la!==h.sample_alpha&&(la?c.enable(32926):c.disable(32926),h.sample_alpha=la);
Pa!==h.sample_enable&&(Pa?c.enable(32928):c.disable(32928),h.sample_enable=Pa);Z!==h.scissor_enable&&(Z?c.enable(3089):c.disable(3089),h.scissor_enable=Z);L!==h.stencil_enable&&(L?c.enable(2960):c.disable(2960),h.stencil_enable=L);if(q[0]!==ka[0]||q[1]!==ka[1]||q[2]!==ka[2]||q[3]!==ka[3])c.blendColor(q[0],q[1],q[2],q[3]),ka[0]=q[0],ka[1]=q[1],ka[2]=q[2],ka[3]=q[3];if(da[0]!==l[0]||da[1]!==l[1])c.blendEquationSeparate(da[0],da[1]),l[0]=da[0],l[1]=da[1];if(E[0]!==r[0]||E[1]!==r[1]||E[2]!==r[2]||E[3]!==
r[3])c.blendFuncSeparate(E[0],E[1],E[2],E[3]),r[0]=E[0],r[1]=E[1],r[2]=E[2],r[3]=E[3];if(D[0]!==K[0]||D[1]!==K[1]||D[2]!==K[2]||D[3]!==K[3])c.colorMask(D[0],D[1],D[2],D[3]),K[0]=D[0],K[1]=D[1],K[2]=D[2],K[3]=D[3];I!==U&&(c.cullFace(I),h.cull_face=I);qa!==P&&(c.depthFunc(qa),h.depth_func=qa);Ub!==$a&&(c.depthMask(Ub),h.depth_mask=Ub);if(z[0]!==w[0]||z[1]!==w[1])c.depthRange(z[0],z[1]),w[0]=z[0],w[1]=z[1];R!==y&&(c.frontFace(R),h.frontFace=R);ja!==ba&&(c.lineWidth(ja),h.lineWidth=ja);if(u[0]!==J[0]||
u[1]!==J[1])c.polygonOffset(u[0],u[1]),J[0]=u[0],J[1]=u[1];if(ma[0]!==p[0]||ma[1]!==p[1])c.sampleCoverage(ma[0],ma[1]),p[0]=ma[0],p[1]=ma[1];if(v[0]!==k[0]||v[1]!==k[1]||v[2]!==k[2]||v[3]!==k[3])c.scissor(v[0],v[1],v[2],v[3]),k[0]=v[0],k[1]=v[1],k[2]=v[2],k[3]=v[3];if(S[0]!==Q[0]||S[1]!==Q[1]||S[2]!==Q[2])c.stencilFunc(S[0],S[1],S[2]),Q[0]=S[0],Q[1]=S[1],Q[2]=S[2];xa!==La&&(c.stencilMask(xa),h.stencil_mask=xa);if(V[0]!==A[0]||V[1]!==A[1]||V[2]!==A[2]||V[3]!==A[3])c.stencilOpSeparate(V[0],V[1],V[2],
V[3]),A[0]=V[0],A[1]=V[1],A[2]=V[2],A[3]=V[3];if(C[0]!==H[0]||C[1]!==H[1]||C[2]!==H[2]||C[3]!==H[3])c.stencilOpSeparate(C[0],C[1],C[2],C[3]),H[0]=C[0],H[1]=C[1],H[2]=C[2],H[3]=C[3];if(O[0]!==f[0]||O[1]!==f[1]||O[2]!==f[2]||O[3]!==f[3])c.viewport(O[0],O[1],O[2],O[3]),f[0]=O[0],f[1]=O[1],f[2]=O[2],f[3]=O[3]},refresh:function(){var a,T,ra,na,Yc,pc,la,Pa,Z,L,I,U,qa,P,Ub,$a;h.dirty=!1;T=n.blend_enable;ra=n.cull_enable;na=n.depth_enable;Yc=n.dither;pc=n.polygonOffset_enable;la=n.sample_alpha;Pa=n.sample_enable;
Z=n.scissor_enable;L=n.stencil_enable;I=n.cull_face;U=n.depth_func;qa=n.depth_mask;P=n.frontFace;Ub=n.lineWidth;$a=n.stencil_mask;(a=d.next)?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null);d.cur=a;a=g[0];a.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(0,a.divisor);a=g[1];a.buffer?
(c.enableVertexAttribArray(1),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(1,a.divisor);a=g[2];a.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(2),c.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(2,
a.divisor);a=g[3];a.buffer?(c.enableVertexAttribArray(3),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(3,a.divisor);a=g[4];a.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,a.x,a.y,a.z,
a.w),a.buffer=null);b.vertexAttribDivisorANGLE(4,a.divisor);a=g[5];a.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(5,a.divisor);a=g[6];a.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(6),
c.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(6,a.divisor);a=g[7];a.buffer?(c.enableVertexAttribArray(7),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(7,a.divisor);a=g[8];a.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,
a.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(8,a.divisor);a=g[9];a.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(9,a.divisor);a=g[10];a.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(10,a.divisor);a=g[11];a.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(11),c.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(11,a.divisor);a=g[12];a.buffer?(c.enableVertexAttribArray(12),
c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(12,a.divisor);a=g[13];a.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(13,
a.divisor);a=g[14];a.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(14,a.divisor);a=g[15];a.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(15),c.vertexAttrib4f(15,a.x,
a.y,a.z,a.w),a.buffer=null);b.vertexAttribDivisorANGLE(15,a.divisor);e.currentVAO=null;e.setVAO(e.targetVAO);T?c.enable(3042):c.disable(3042);h.blend_enable=T;ra?c.enable(2884):c.disable(2884);h.cull_enable=ra;na?c.enable(2929):c.disable(2929);h.depth_enable=na;Yc?c.enable(3024):c.disable(3024);h.dither=Yc;pc?c.enable(32823):c.disable(32823);h.polygonOffset_enable=pc;la?c.enable(32926):c.disable(32926);h.sample_alpha=la;Pa?c.enable(32928):c.disable(32928);h.sample_enable=Pa;Z?c.enable(3089):c.disable(3089);
h.scissor_enable=Z;L?c.enable(2960):c.disable(2960);h.stencil_enable=L;c.blendColor(q[0],q[1],q[2],q[3]);ka[0]=q[0];ka[1]=q[1];ka[2]=q[2];ka[3]=q[3];c.blendEquationSeparate(da[0],da[1]);l[0]=da[0];l[1]=da[1];c.blendFuncSeparate(E[0],E[1],E[2],E[3]);r[0]=E[0];r[1]=E[1];r[2]=E[2];r[3]=E[3];c.colorMask(D[0],D[1],D[2],D[3]);K[0]=D[0];K[1]=D[1];K[2]=D[2];K[3]=D[3];c.cullFace(I);h.cull_face=I;c.depthFunc(U);h.depth_func=U;c.depthMask(qa);h.depth_mask=qa;c.depthRange(z[0],z[1]);w[0]=z[0];w[1]=z[1];c.frontFace(P);
h.frontFace=P;c.lineWidth(Ub);h.lineWidth=Ub;c.polygonOffset(u[0],u[1]);J[0]=u[0];J[1]=u[1];c.sampleCoverage(ma[0],ma[1]);p[0]=ma[0];p[1]=ma[1];c.scissor(v[0],v[1],v[2],v[3]);k[0]=v[0];k[1]=v[1];k[2]=v[2];k[3]=v[3];c.stencilFunc(S[0],S[1],S[2]);Q[0]=S[0];Q[1]=S[1];Q[2]=S[2];c.stencilMask($a);h.stencil_mask=$a;c.stencilOpSeparate(V[0],V[1],V[2],V[3]);A[0]=V[0];A[1]=V[1];A[2]=V[2];A[3]=V[3];c.stencilOpSeparate(C[0],C[1],C[2],C[3]);H[0]=C[0];H[1]=C[1];H[2]=C[2];H[3]=C[3];c.viewport(O[0],O[1],O[2],O[3]);
f[0]=O[0];f[1]=O[1];f[2]=O[2];f[3]=O[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,b,g,h,d,c,n,e,q,w,da,l,E,r,D,K,z,ha,u,J,ma,p,v,k,S,Q,V,A,C,H,O,f,m,T,ra,na,Yc,pc,la,Pa,Z,L,I,U,qa,P,Ub,$a){var R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa,fc,hc,tc,wd,wc,X,N,ia,Ca,Gb,Lc,Wc,F,B,fa,sa,aa,ga,pa,G,x,ca,M,Ba,Ga,t,qc,Ha,W,Hb,zb;R=a.attributes;y=a.buffer;ja=a.context;ba=a.current;xa=a.draw;La=a.elements;
bc=a.extensions;Ua=a.framebuffer;Y=a.gl;kb=a.isBufferArgs;ea=a.next;oa=a.shader;fc=a.uniforms;hc=a.vao;tc=ea.blend_color;wd=ba.blend_color;wc=ea.blend_equation;X=ba.blend_equation;N=ea.blend_func;ia=ba.blend_func;Ca=ea.colorMask;Gb=ba.colorMask;Lc=ea.depth_range;Wc=ba.depth_range;F=ea.polygonOffset_offset;B=ba.polygonOffset_offset;fa=ea.sample_coverage;sa=ba.sample_coverage;aa=ea.scissor_box;ga=ba.scissor_box;pa=ea.stencil_func;G=ba.stencil_func;x=ea.stencil_opBack;ca=ba.stencil_opBack;M=ea.stencil_opFront;
Ba=ba.stencil_opFront;Ga=ea.viewport;t=ba.viewport;qc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Ha={};Ha.buffer=g;Ha.divisor=1;W={};W.buffer=h;W.divisor=1;Hb={};Hb.buffer=d;Hb.divisor=1;zb={};zb.buffer=c;zb.divisor=1;return{batch:function(a,c){var e,d,g,h,k,p;e=Ua.next;e!==Ua.cur&&(e?Y.bindFramebuffer(36160,e.framebuffer):Y.bindFramebuffer(36160,null),Ua.cur=e);if(ba.dirty){var n,q,v,z,N,D,w,K,ka,da,u,S,ha,Q,J,V,aa,ma,Ga,oa,ud,gd,Mc,nc,ab,Cc,Db,
mc,Sa,ic,Zb,ad,wc;n=ea.dither;n!==ba.dither&&(n?Y.enable(3024):Y.disable(3024),ba.dither=n);q=ea.depth_func;q!==ba.depth_func&&(Y.depthFunc(q),ba.depth_func=q);v=Lc[0];z=Lc[1];if(v!==Wc[0]||z!==Wc[1])Y.depthRange(v,z),Wc[0]=v,Wc[1]=z;N=ea.depth_mask;N!==ba.depth_mask&&(Y.depthMask(N),ba.depth_mask=N);D=Ca[0];w=Ca[1];K=Ca[2];ka=Ca[3];if(D!==Gb[0]||w!==Gb[1]||K!==Gb[2]||ka!==Gb[3])Y.colorMask(D,w,K,ka),Gb[0]=D,Gb[1]=w,Gb[2]=K,Gb[3]=ka;da=ea.cull_enable;da!==ba.cull_enable&&(da?Y.enable(2884):Y.disable(2884),
ba.cull_enable=da);u=ea.cull_face;u!==ba.cull_face&&(Y.cullFace(u),ba.cull_face=u);S=ea.frontFace;S!==ba.frontFace&&(Y.frontFace(S),ba.frontFace=S);ha=ea.lineWidth;ha!==ba.lineWidth&&(Y.lineWidth(ha),ba.lineWidth=ha);Q=ea.polygonOffset_enable;Q!==ba.polygonOffset_enable&&(Q?Y.enable(32823):Y.disable(32823),ba.polygonOffset_enable=Q);J=F[0];V=F[1];if(J!==B[0]||V!==B[1])Y.polygonOffset(J,V),B[0]=J,B[1]=V;aa=ea.sample_alpha;aa!==ba.sample_alpha&&(aa?Y.enable(32926):Y.disable(32926),ba.sample_alpha=aa);
ma=ea.sample_enable;ma!==ba.sample_enable&&(ma?Y.enable(32928):Y.disable(32928),ba.sample_enable=ma);Ga=fa[0];oa=fa[1];if(Ga!==sa[0]||oa!==sa[1])Y.sampleCoverage(Ga,oa),sa[0]=Ga,sa[1]=oa;ud=ea.stencil_enable;ud!==ba.stencil_enable&&(ud?Y.enable(2960):Y.disable(2960),ba.stencil_enable=ud);gd=ea.stencil_mask;gd!==ba.stencil_mask&&(Y.stencilMask(gd),ba.stencil_mask=gd);Mc=pa[0];nc=pa[1];ab=pa[2];if(Mc!==G[0]||nc!==G[1]||ab!==G[2])Y.stencilFunc(Mc,nc,ab),G[0]=Mc,G[1]=nc,G[2]=ab;Cc=M[0];Db=M[1];mc=M[2];
Sa=M[3];if(Cc!==Ba[0]||Db!==Ba[1]||mc!==Ba[2]||Sa!==Ba[3])Y.stencilOpSeparate(Cc,Db,mc,Sa),Ba[0]=Cc,Ba[1]=Db,Ba[2]=mc,Ba[3]=Sa;ic=x[0];Zb=x[1];ad=x[2];wc=x[3];if(ic!==ca[0]||Zb!==ca[1]||ad!==ca[2]||wc!==ca[3])Y.stencilOpSeparate(ic,Zb,ad,wc),ca[0]=ic,ca[1]=Zb,ca[2]=ad,ca[3]=wc}Y.blendColor(0,0,0,0);wd[0]=0;wd[1]=0;wd[2]=0;wd[3]=0;Y.enable(3042);ba.blend_enable=!0;Y.blendEquationSeparate(32774,32774);X[0]=32774;X[1]=32774;Y.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;Y.disable(2929);
ba.depth_enable=!1;Y.enable(3089);ba.scissor_enable=!0;if(d=ba.profile)g=performance.now(),b.count+=c;Y.useProgram(A.program);h=bc.angle_instanced_arrays;var od,Dc,Vb,xc,Sc,Ka,Eb,Wa;hc.setVAO(null);od=Yc.location;Dc=R[od];Dc.buffer||Y.enableVertexAttribArray(od);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==l||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)Y.bindBuffer(34962,l.buffer),Y.vertexAttribPointer(od,2,5126,!1,24,0),Dc.type=5126,Dc.size=2,Dc.buffer=l,Dc.normalized=!1,Dc.offset=0,Dc.stride=
24;0!==Dc.divisor&&(h.vertexAttribDivisorANGLE(od,0),Dc.divisor=0);Vb=la.location;xc=R[Vb];xc.buffer||Y.enableVertexAttribArray(Vb);if(5126!==xc.type||2!==xc.size||xc.buffer!==E||!1!==xc.normalized||8!==xc.offset||24!==xc.stride)Y.bindBuffer(34962,E.buffer),Y.vertexAttribPointer(Vb,2,5126,!1,24,8),xc.type=5126,xc.size=2,xc.buffer=E,xc.normalized=!1,xc.offset=8,xc.stride=24;0!==xc.divisor&&(h.vertexAttribDivisorANGLE(Vb,0),xc.divisor=0);Sc=T.location;Ka=R[Sc];Ka.buffer||Y.enableVertexAttribArray(Sc);
if(5126!==Ka.type||2!==Ka.size||Ka.buffer!==r||!1!==Ka.normalized||16!==Ka.offset||24!==Ka.stride)Y.bindBuffer(34962,r.buffer),Y.vertexAttribPointer(Sc,2,5126,!1,24,16),Ka.type=5126,Ka.size=2,Ka.buffer=r,Ka.normalized=!1,Ka.offset=16,Ka.stride=24;0!==Ka.divisor&&(h.vertexAttribDivisorANGLE(Sc,0),Ka.divisor=0);(Eb=xa.elements)?Y.bindBuffer(34963,Eb.buffer.buffer):hc.currentVAO&&(Eb=La.getElements(hc.currentVAO.elements))&&Y.bindBuffer(34963,Eb.buffer.buffer);Wa=xa.offset;for(k=0;k<c;++k){p=a[k];var ya,
xd,ub,Ra,Sb,eb,Tc,Wb,fc,jc,Ob,tc,Pb,Ma,pb,vb,ib,Na,yc,Qb,db,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,vf,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Gf,Vd,he,Ie,ke,Gd,Ed,fd,Ic;ya=p.viewport;xd=ya.x|0;ub=ya.y|0;Ra="width"in ya?ya.width|0:ja.framebufferWidth-xd;Sb="height"in ya?ya.height|0:ja.framebufferHeight-ub;eb=ja.viewportWidth;
ja.viewportWidth=Ra;Tc=ja.viewportHeight;ja.viewportHeight=Sb;Y.viewport(xd,ub,Ra,Sb);t[0]=xd;t[1]=ub;t[2]=Ra;t[3]=Sb;Wb=p.viewport;fc=Wb.x|0;jc=Wb.y|0;Ob="width"in Wb?Wb.width|0:ja.framebufferWidth-fc;tc="height"in Wb?Wb.height|0:ja.framebufferHeight-jc;Y.scissor(fc,jc,Ob,tc);ga[0]=fc;ga[1]=jc;ga[2]=Ob;ga[3]=tc;Pb=C.call(this,ja,p,k);Hb.offset=Pb;Ma=!1;pb=null;vb=0;ib=!1;yc=Na=0;Qb=1;db=0;fb=5126;lb=ac=Rc=kc=0;kb(Hb)?(Ma=!0,pb=y.createStream(34962,Hb),fb=pb.dtype):(pb=y.getBuffer(Hb))?fb=pb.dtype:
"constant"in Hb?(Qb=2,"number"===typeof Hb.constant?(Rc=Hb.constant,ac=lb=kc=0):(Rc=0<Hb.constant.length?Hb.constant[0]:0,ac=1<Hb.constant.length?Hb.constant[1]:0,lb=2<Hb.constant.length?Hb.constant[2]:0,kc=3<Hb.constant.length?Hb.constant[3]:0)):(pb=kb(Hb.buffer)?y.createStream(34962,Hb.buffer):y.getBuffer(Hb.buffer),fb="type"in Hb?qc[Hb.type]:pb.dtype,ib=!!Hb.normalized,yc=Hb.size|0,Na=Hb.offset|0,db=Hb.stride|0,vb=Hb.divisor|0);mb=L.location;ta=R[mb];if(1===Qb){ta.buffer||Y.enableVertexAttribArray(mb);
qb=yc||2;if(ta.type!==fb||ta.size!==qb||ta.buffer!==pb||ta.normalized!==ib||ta.offset!==Na||ta.stride!==db)Y.bindBuffer(34962,pb.buffer),Y.vertexAttribPointer(mb,qb,fb,ib,db,Na),ta.type=fb,ta.size=qb,ta.buffer=pb,ta.normalized=ib,ta.offset=Na,ta.stride=db;ta.divisor!==vb&&(h.vertexAttribDivisorANGLE(mb,vb),ta.divisor=vb)}else if(ta.buffer&&(Y.disableVertexAttribArray(mb),ta.buffer=null),ta.x!==Rc||ta.y!==ac||ta.z!==lb||ta.w!==kc)Y.vertexAttrib4f(mb,Rc,ac,lb,kc),ta.x=Rc,ta.y=ac,ta.z=lb,ta.w=kc;ua=
H.call(this,ja,p,k);zb.offset=ua;Ta=!1;bb=null;za=0;gb=!1;Bb=Ia=0;Ab=1;Qa=0;uc=5126;va=Rb=Za=Ib=0;kb(zb)?(Ta=!0,bb=y.createStream(34962,zb),uc=bb.dtype):(bb=y.getBuffer(zb))?uc=bb.dtype:"constant"in zb?(Ab=2,"number"===typeof zb.constant?(Za=zb.constant,Rb=va=Ib=0):(Za=0<zb.constant.length?zb.constant[0]:0,Rb=1<zb.constant.length?zb.constant[1]:0,va=2<zb.constant.length?zb.constant[2]:0,Ib=3<zb.constant.length?zb.constant[3]:0)):(bb=kb(zb.buffer)?y.createStream(34962,zb.buffer):y.getBuffer(zb.buffer),
uc="type"in zb?qc[zb.type]:bb.dtype,gb=!!zb.normalized,Bb=zb.size|0,Ia=zb.offset|0,Qa=zb.stride|0,za=zb.divisor|0);kd=I.location;Ja=R[kd];if(1===Ab){Ja.buffer||Y.enableVertexAttribArray(kd);Lb=Bb||2;if(Ja.type!==uc||Ja.size!==Lb||Ja.buffer!==bb||Ja.normalized!==gb||Ja.offset!==Ia||Ja.stride!==Qa)Y.bindBuffer(34962,bb.buffer),Y.vertexAttribPointer(kd,Lb,uc,gb,Qa,Ia),Ja.type=uc,Ja.size=Lb,Ja.buffer=bb,Ja.normalized=gb,Ja.offset=Ia,Ja.stride=Qa;Ja.divisor!==za&&(h.vertexAttribDivisorANGLE(kd,za),Ja.divisor=
za)}else if(Ja.buffer&&(Y.disableVertexAttribArray(kd),Ja.buffer=null),Ja.x!==Za||Ja.y!==Rb||Ja.z!==va||Ja.w!==Ib)Y.vertexAttrib4f(kd,Za,Rb,va,Ib),Ja.x=Za,Ja.y=Rb,Ja.z=va,Ja.w=Ib;hb=O.call(this,ja,p,k);W.offset=hb;jb=!1;wa=null;cc=0;Da=!1;sb=rb=0;Xa=1;Ya=0;lc=5126;Xb=Va=rc=vc=0;kb(W)?(jb=!0,wa=y.createStream(34962,W),lc=wa.dtype):(wa=y.getBuffer(W))?lc=wa.dtype:"constant"in W?(Xa=2,"number"===typeof W.constant?(rc=W.constant,Va=Xb=vc=0):(rc=0<W.constant.length?W.constant[0]:0,Va=1<W.constant.length?
W.constant[1]:0,Xb=2<W.constant.length?W.constant[2]:0,vc=3<W.constant.length?W.constant[3]:0)):(wa=kb(W.buffer)?y.createStream(34962,W.buffer):y.getBuffer(W.buffer),lc="type"in W?qc[W.type]:wa.dtype,Da=!!W.normalized,sb=W.size|0,rb=W.offset|0,Ya=W.stride|0,cc=W.divisor|0);Gc=pc.location;Ea=R[Gc];if(1===Xa){Ea.buffer||Y.enableVertexAttribArray(Gc);zc=sb||4;if(Ea.type!==lc||Ea.size!==zc||Ea.buffer!==wa||Ea.normalized!==Da||Ea.offset!==rb||Ea.stride!==Ya)Y.bindBuffer(34962,wa.buffer),Y.vertexAttribPointer(Gc,
zc,lc,Da,Ya,rb),Ea.type=lc,Ea.size=zc,Ea.buffer=wa,Ea.normalized=Da,Ea.offset=rb,Ea.stride=Ya;Ea.divisor!==cc&&(h.vertexAttribDivisorANGLE(Gc,cc),Ea.divisor=cc)}else if(Ea.buffer&&(Y.disableVertexAttribArray(Gc),Ea.buffer=null),Ea.x!==rc||Ea.y!==Va||Ea.z!==Xb||Ea.w!==vc)Y.vertexAttrib4f(Gc,rc,Va,Xb,vc),Ea.x=rc,Ea.y=Va,Ea.z=Xb,Ea.w=vc;Oa=f.call(this,ja,p,k);Ha.offset=Oa;Aa=!1;nb=null;wb=0;Cb=!1;sc=tb=0;xb=1;ld=0;oc=5126;id=hd=Nc=ee=0;kb(Ha)?(Aa=!0,nb=y.createStream(34962,Ha),oc=nb.dtype):(nb=y.getBuffer(Ha))?
oc=nb.dtype:"constant"in Ha?(xb=2,"number"===typeof Ha.constant?(Nc=Ha.constant,hd=id=ee=0):(Nc=0<Ha.constant.length?Ha.constant[0]:0,hd=1<Ha.constant.length?Ha.constant[1]:0,id=2<Ha.constant.length?Ha.constant[2]:0,ee=3<Ha.constant.length?Ha.constant[3]:0)):(nb=kb(Ha.buffer)?y.createStream(34962,Ha.buffer):y.getBuffer(Ha.buffer),oc="type"in Ha?qc[Ha.type]:nb.dtype,Cb=!!Ha.normalized,sc=Ha.size|0,tb=Ha.offset|0,ld=Ha.stride|0,wb=Ha.divisor|0);Tb=na.location;$b=R[Tb];if(1===xb){$b.buffer||Y.enableVertexAttribArray(Tb);
Mb=sc||4;if($b.type!==oc||$b.size!==Mb||$b.buffer!==nb||$b.normalized!==Cb||$b.offset!==tb||$b.stride!==ld)Y.bindBuffer(34962,nb.buffer),Y.vertexAttribPointer(Tb,Mb,oc,Cb,ld,tb),$b.type=oc,$b.size=Mb,$b.buffer=nb,$b.normalized=Cb,$b.offset=tb,$b.stride=ld;$b.divisor!==wb&&(h.vertexAttribDivisorANGLE(Tb,wb),$b.divisor=wb)}else if($b.buffer&&(Y.disableVertexAttribArray(Tb),$b.buffer=null),$b.x!==Nc||$b.y!==hd||$b.z!==id||$b.w!==ee)Y.vertexAttrib4f(Tb,Nc,hd,id,ee),$b.x=Nc,$b.y=hd,$b.z=id,$b.w=ee;Fa=
m.call(this,ja,p,k);Yb=Fa[0];yb=Fa[1];Nb=Fa[2];gc=Fa[3];k&&ob===Yb&&Kb===yb&&dc===Nb&&vf===gc||(ob=Yb,Kb=yb,dc=Nb,vf=gc,Y.uniform4f($a.location,Yb,yb,Nb,gc));Ec=p.lineWidth;k&&Fc===Ec||(Fc=Ec,Y.uniform1f(Pa.location,Ec));Hc=p.capSize;k&&Oc===Hc||(Oc=Hc,Y.uniform1f(ra.location,Hc));bd=p.scale;Uc=bd[0];Jb=bd[1];k&&Pc===Uc&&Fb===Jb||(Pc=Uc,Fb=Jb,Y.uniform2f(U.location,Uc,Jb));Qc=p.scaleFract;Jc=Qc[0];ec=Qc[1];k&&Vc===Jc&&Zc===ec||(Vc=Jc,Zc=ec,Y.uniform2f(qa.location,Jc,ec));dd=p.translate;pd=dd[0];$c=
dd[1];k&&ne===pd&&Gf===$c||(ne=pd,Gf=$c,Y.uniform2f(P.location,pd,$c));Vd=p.translateFract;he=Vd[0];ke=Vd[1];k&&Ie===he&&Gd===ke||(Ie=he,Gd=ke,Y.uniform2f(Ub.location,he,ke));Ed=p.opacity;k&&fd===Ed||(fd=Ed,Y.uniform1f(Z.location,Ed));Ic=p.count;0<Ic?Eb?h.drawElementsInstancedANGLE(4,36,Eb.type,Wa<<(Eb.type-5121>>1),Ic):h.drawArraysInstancedANGLE(4,Wa,36,Ic):0>Ic&&(Eb?Y.drawElements(4,36,Eb.type,Wa<<(Eb.type-5121>>1)):Y.drawArrays(4,Wa,36));ja.viewportWidth=eb;ja.viewportHeight=Tc;Ma&&y.destroyStream(pb);
Ta&&y.destroyStream(bb);jb&&y.destroyStream(wa);Aa&&y.destroyStream(nb)}ba.dirty=!0;hc.setVAO(null);d&&(b.cpuTime+=performance.now()-g)},draw:function(a){var c,d,f,g,k,h,m,p,v,A,z,N,H,K,u,S,ha,Q,J,V,aa,ma,O,Ga,C,oa,Bc,wc,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,fc,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,tc,jc,Ob,db,Pb,Ma,pb,vb,ib,Na,cb,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc;c=Ua.next;c!==Ua.cur&&(c?Y.bindFramebuffer(36160,c.framebuffer):Y.bindFramebuffer(36160,
null),Ua.cur=c);if(ba.dirty){var Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob;Da=ea.dither;Da!==ba.dither&&(Da?Y.enable(3024):Y.disable(3024),ba.dither=Da);rb=ea.depth_func;rb!==ba.depth_func&&(Y.depthFunc(rb),ba.depth_func=rb);sb=Lc[0];Xa=Lc[1];if(sb!==Wc[0]||Xa!==Wc[1])Y.depthRange(sb,Xa),Wc[0]=sb,Wc[1]=Xa;Ya=ea.depth_mask;Ya!==ba.depth_mask&&(Y.depthMask(Ya),ba.depth_mask=Ya);lc=Ca[0];vc=Ca[1];rc=Ca[2];Va=Ca[3];if(lc!==Gb[0]||vc!==Gb[1]||rc!==
Gb[2]||Va!==Gb[3])Y.colorMask(lc,vc,rc,Va),Gb[0]=lc,Gb[1]=vc,Gb[2]=rc,Gb[3]=Va;Xb=ea.cull_enable;Xb!==ba.cull_enable&&(Xb?Y.enable(2884):Y.disable(2884),ba.cull_enable=Xb);Gc=ea.cull_face;Gc!==ba.cull_face&&(Y.cullFace(Gc),ba.cull_face=Gc);Ea=ea.frontFace;Ea!==ba.frontFace&&(Y.frontFace(Ea),ba.frontFace=Ea);zc=ea.lineWidth;zc!==ba.lineWidth&&(Y.lineWidth(zc),ba.lineWidth=zc);Oa=ea.polygonOffset_enable;Oa!==ba.polygonOffset_enable&&(Oa?Y.enable(32823):Y.disable(32823),ba.polygonOffset_enable=Oa);Aa=
F[0];nb=F[1];if(Aa!==B[0]||nb!==B[1])Y.polygonOffset(Aa,nb),B[0]=Aa,B[1]=nb;wb=ea.sample_alpha;wb!==ba.sample_alpha&&(wb?Y.enable(32926):Y.disable(32926),ba.sample_alpha=wb);Cb=ea.sample_enable;Cb!==ba.sample_enable&&(Cb?Y.enable(32928):Y.disable(32928),ba.sample_enable=Cb);tb=fa[0];sc=fa[1];if(tb!==sa[0]||sc!==sa[1])Y.sampleCoverage(tb,sc),sa[0]=tb,sa[1]=sc;xb=ea.stencil_enable;xb!==ba.stencil_enable&&(xb?Y.enable(2960):Y.disable(2960),ba.stencil_enable=xb);ld=ea.stencil_mask;ld!==ba.stencil_mask&&
(Y.stencilMask(ld),ba.stencil_mask=ld);oc=pa[0];ee=pa[1];Nc=pa[2];if(oc!==G[0]||ee!==G[1]||Nc!==G[2])Y.stencilFunc(oc,ee,Nc),G[0]=oc,G[1]=ee,G[2]=Nc;hd=M[0];id=M[1];Tb=M[2];$b=M[3];if(hd!==Ba[0]||id!==Ba[1]||Tb!==Ba[2]||$b!==Ba[3])Y.stencilOpSeparate(hd,id,Tb,$b),Ba[0]=hd,Ba[1]=id,Ba[2]=Tb,Ba[3]=$b;Mb=x[0];Fa=x[1];Yb=x[2];ob=x[3];if(Mb!==ca[0]||Fa!==ca[1]||Yb!==ca[2]||ob!==ca[3])Y.stencilOpSeparate(Mb,Fa,Yb,ob),ca[0]=Mb,ca[1]=Fa,ca[2]=Yb,ca[3]=ob}d=a.viewport;f=d.x|0;g=d.y|0;k="width"in d?d.width|
0:ja.framebufferWidth-f;h="height"in d?d.height|0:ja.framebufferHeight-g;m=ja.viewportWidth;ja.viewportWidth=k;p=ja.viewportHeight;ja.viewportHeight=h;Y.viewport(f,g,k,h);t[0]=f;t[1]=g;t[2]=k;t[3]=h;Y.blendColor(0,0,0,0);wd[0]=0;wd[1]=0;wd[2]=0;wd[3]=0;Y.enable(3042);ba.blend_enable=!0;Y.blendEquationSeparate(32774,32774);X[0]=32774;X[1]=32774;Y.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;Y.disable(2929);ba.depth_enable=!1;v=a.viewport;A=v.x|0;z=v.y|0;N="width"in v?v.width|
0:ja.framebufferWidth-A;H="height"in v?v.height|0:ja.framebufferHeight-z;Y.scissor(A,z,N,H);ga[0]=A;ga[1]=z;ga[2]=N;ga[3]=H;Y.enable(3089);ba.scissor_enable=!0;if(K=ba.profile)u=performance.now(),b.count++;Y.useProgram(n.program);S=bc.angle_instanced_arrays;hc.setVAO(null);ha=e.call(this,ja,a,0);Hb.offset=ha;Q=!1;J=null;V=0;aa=!1;O=ma=0;Ga=1;C=0;oa=5126;Mc=gd=wc=Bc=0;kb(Hb)?(Q=!0,J=y.createStream(34962,Hb),oa=J.dtype):(J=y.getBuffer(Hb))?oa=J.dtype:"constant"in Hb?(Ga=2,"number"===typeof Hb.constant?
(wc=Hb.constant,gd=Mc=Bc=0):(wc=0<Hb.constant.length?Hb.constant[0]:0,gd=1<Hb.constant.length?Hb.constant[1]:0,Mc=2<Hb.constant.length?Hb.constant[2]:0,Bc=3<Hb.constant.length?Hb.constant[3]:0)):(J=kb(Hb.buffer)?y.createStream(34962,Hb.buffer):y.getBuffer(Hb.buffer),oa="type"in Hb?qc[Hb.type]:J.dtype,aa=!!Hb.normalized,O=Hb.size|0,ma=Hb.offset|0,C=Hb.stride|0,V=Hb.divisor|0);nc=L.location;ab=R[nc];if(1===Ga){ab.buffer||Y.enableVertexAttribArray(nc);Cc=O||2;if(ab.type!==oa||ab.size!==Cc||ab.buffer!==
J||ab.normalized!==aa||ab.offset!==ma||ab.stride!==C)Y.bindBuffer(34962,J.buffer),Y.vertexAttribPointer(nc,Cc,oa,aa,C,ma),ab.type=oa,ab.size=Cc,ab.buffer=J,ab.normalized=aa,ab.offset=ma,ab.stride=C;ab.divisor!==V&&(S.vertexAttribDivisorANGLE(nc,V),ab.divisor=V)}else if(ab.buffer&&(Y.disableVertexAttribArray(nc),ab.buffer=null),ab.x!==wc||ab.y!==gd||ab.z!==Mc||ab.w!==Bc)Y.vertexAttrib4f(nc,wc,gd,Mc,Bc),ab.x=wc,ab.y=gd,ab.z=Mc,ab.w=Bc;Db=q.call(this,ja,a,0);zb.offset=Db;mc=!1;Sa=null;ic=0;Zb=!1;fc=
ad=0;od=1;Dc=0;Vb=5126;Eb=Ka=Sc=xc=0;kb(zb)?(mc=!0,Sa=y.createStream(34962,zb),Vb=Sa.dtype):(Sa=y.getBuffer(zb))?Vb=Sa.dtype:"constant"in zb?(od=2,"number"===typeof zb.constant?(Sc=zb.constant,Ka=Eb=xc=0):(Sc=0<zb.constant.length?zb.constant[0]:0,Ka=1<zb.constant.length?zb.constant[1]:0,Eb=2<zb.constant.length?zb.constant[2]:0,xc=3<zb.constant.length?zb.constant[3]:0)):(Sa=kb(zb.buffer)?y.createStream(34962,zb.buffer):y.getBuffer(zb.buffer),Vb="type"in zb?qc[zb.type]:Sa.dtype,Zb=!!zb.normalized,fc=
zb.size|0,ad=zb.offset|0,Dc=zb.stride|0,ic=zb.divisor|0);Wa=I.location;ya=R[Wa];if(1===od){ya.buffer||Y.enableVertexAttribArray(Wa);xd=fc||2;if(ya.type!==Vb||ya.size!==xd||ya.buffer!==Sa||ya.normalized!==Zb||ya.offset!==ad||ya.stride!==Dc)Y.bindBuffer(34962,Sa.buffer),Y.vertexAttribPointer(Wa,xd,Vb,Zb,Dc,ad),ya.type=Vb,ya.size=xd,ya.buffer=Sa,ya.normalized=Zb,ya.offset=ad,ya.stride=Dc;ya.divisor!==ic&&(S.vertexAttribDivisorANGLE(Wa,ic),ya.divisor=ic)}else if(ya.buffer&&(Y.disableVertexAttribArray(Wa),
ya.buffer=null),ya.x!==Sc||ya.y!==Ka||ya.z!==Eb||ya.w!==xc)Y.vertexAttrib4f(Wa,Sc,Ka,Eb,xc),ya.x=Sc,ya.y=Ka,ya.z=Eb,ya.w=xc;ub=w.call(this,ja,a,0);W.offset=ub;Ra=!1;Sb=null;eb=0;Tc=!1;tc=Wb=0;jc=1;Ob=0;db=5126;vb=pb=Ma=Pb=0;kb(W)?(Ra=!0,Sb=y.createStream(34962,W),db=Sb.dtype):(Sb=y.getBuffer(W))?db=Sb.dtype:"constant"in W?(jc=2,"number"===typeof W.constant?(Ma=W.constant,pb=vb=Pb=0):(Ma=0<W.constant.length?W.constant[0]:0,pb=1<W.constant.length?W.constant[1]:0,vb=2<W.constant.length?W.constant[2]:
0,Pb=3<W.constant.length?W.constant[3]:0)):(Sb=kb(W.buffer)?y.createStream(34962,W.buffer):y.getBuffer(W.buffer),db="type"in W?qc[W.type]:Sb.dtype,Tc=!!W.normalized,tc=W.size|0,Wb=W.offset|0,Ob=W.stride|0,eb=W.divisor|0);ib=pc.location;Na=R[ib];if(1===jc){Na.buffer||Y.enableVertexAttribArray(ib);cb=tc||4;if(Na.type!==db||Na.size!==cb||Na.buffer!==Sb||Na.normalized!==Tc||Na.offset!==Wb||Na.stride!==Ob)Y.bindBuffer(34962,Sb.buffer),Y.vertexAttribPointer(ib,cb,db,Tc,Ob,Wb),Na.type=db,Na.size=cb,Na.buffer=
Sb,Na.normalized=Tc,Na.offset=Wb,Na.stride=Ob;Na.divisor!==eb&&(S.vertexAttribDivisorANGLE(ib,eb),Na.divisor=eb)}else if(Na.buffer&&(Y.disableVertexAttribArray(ib),Na.buffer=null),Na.x!==Ma||Na.y!==pb||Na.z!==vb||Na.w!==Pb)Y.vertexAttrib4f(ib,Ma,pb,vb,Pb),Na.x=Ma,Na.y=pb,Na.z=vb,Na.w=Pb;Qb=da.call(this,ja,a,0);Ha.offset=Qb;sd=!1;fb=null;kc=0;Rc=!1;lb=ac=0;mb=1;ta=0;qb=5126;za=bb=Ta=ua=0;kb(Ha)?(sd=!0,fb=y.createStream(34962,Ha),qb=fb.dtype):(fb=y.getBuffer(Ha))?qb=fb.dtype:"constant"in Ha?(mb=2,"number"===
typeof Ha.constant?(Ta=Ha.constant,bb=za=ua=0):(Ta=0<Ha.constant.length?Ha.constant[0]:0,bb=1<Ha.constant.length?Ha.constant[1]:0,za=2<Ha.constant.length?Ha.constant[2]:0,ua=3<Ha.constant.length?Ha.constant[3]:0)):(fb=kb(Ha.buffer)?y.createStream(34962,Ha.buffer):y.getBuffer(Ha.buffer),qb="type"in Ha?qc[Ha.type]:fb.dtype,Rc=!!Ha.normalized,lb=Ha.size|0,ac=Ha.offset|0,ta=Ha.stride|0,kc=Ha.divisor|0);gb=na.location;Ia=R[gb];if(1===mb){Ia.buffer||Y.enableVertexAttribArray(gb);Bb=lb||4;if(Ia.type!==qb||
Ia.size!==Bb||Ia.buffer!==fb||Ia.normalized!==Rc||Ia.offset!==ac||Ia.stride!==ta)Y.bindBuffer(34962,fb.buffer),Y.vertexAttribPointer(gb,Bb,qb,Rc,ta,ac),Ia.type=qb,Ia.size=Bb,Ia.buffer=fb,Ia.normalized=Rc,Ia.offset=ac,Ia.stride=ta;Ia.divisor!==kc&&(S.vertexAttribDivisorANGLE(gb,kc),Ia.divisor=kc)}else if(Ia.buffer&&(Y.disableVertexAttribArray(gb),Ia.buffer=null),Ia.x!==Ta||Ia.y!==bb||Ia.z!==za||Ia.w!==ua)Y.vertexAttrib4f(gb,Ta,bb,za,ua),Ia.x=Ta,Ia.y=bb,Ia.z=za,Ia.w=ua;Ab=Yc.location;Qa=R[Ab];Qa.buffer||
Y.enableVertexAttribArray(Ab);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==l||!1!==Qa.normalized||0!==Qa.offset||24!==Qa.stride)Y.bindBuffer(34962,l.buffer),Y.vertexAttribPointer(Ab,2,5126,!1,24,0),Qa.type=5126,Qa.size=2,Qa.buffer=l,Qa.normalized=!1,Qa.offset=0,Qa.stride=24;0!==Qa.divisor&&(S.vertexAttribDivisorANGLE(Ab,0),Qa.divisor=0);uc=la.location;Ib=R[uc];Ib.buffer||Y.enableVertexAttribArray(uc);if(5126!==Ib.type||2!==Ib.size||Ib.buffer!==E||!1!==Ib.normalized||8!==Ib.offset||24!==Ib.stride)Y.bindBuffer(34962,
E.buffer),Y.vertexAttribPointer(uc,2,5126,!1,24,8),Ib.type=5126,Ib.size=2,Ib.buffer=E,Ib.normalized=!1,Ib.offset=8,Ib.stride=24;0!==Ib.divisor&&(S.vertexAttribDivisorANGLE(uc,0),Ib.divisor=0);Za=T.location;Rb=R[Za];Rb.buffer||Y.enableVertexAttribArray(Za);if(5126!==Rb.type||2!==Rb.size||Rb.buffer!==r||!1!==Rb.normalized||16!==Rb.offset||24!==Rb.stride)Y.bindBuffer(34962,r.buffer),Y.vertexAttribPointer(Za,2,5126,!1,24,16),Rb.type=5126,Rb.size=2,Rb.buffer=r,Rb.normalized=!1,Rb.offset=16,Rb.stride=24;
0!==Rb.divisor&&(S.vertexAttribDivisorANGLE(Za,0),Rb.divisor=0);va=D.call(this,ja,a,0);Y.uniform4f($a.location,va[0],va[1],va[2],va[3]);Y.uniform1f(Pa.location,a.lineWidth);Y.uniform1f(ra.location,a.capSize);kd=a.scale;Y.uniform2f(U.location,kd[0],kd[1]);Ja=a.scaleFract;Y.uniform2f(qa.location,Ja[0],Ja[1]);Lb=a.translate;Y.uniform2f(P.location,Lb[0],Lb[1]);hb=a.translateFract;Y.uniform2f(Ub.location,hb[0],hb[1]);Y.uniform1f(Z.location,a.opacity);(jb=xa.elements)?Y.bindBuffer(34963,jb.buffer.buffer):
hc.currentVAO&&(jb=La.getElements(hc.currentVAO.elements))&&Y.bindBuffer(34963,jb.buffer.buffer);wa=xa.offset;cc=a.count;0<cc?jb?S.drawElementsInstancedANGLE(4,36,jb.type,wa<<(jb.type-5121>>1),cc):S.drawArraysInstancedANGLE(4,wa,36,cc):0>cc&&(jb?Y.drawElements(4,36,jb.type,wa<<(jb.type-5121>>1)):Y.drawArrays(4,wa,36));ba.dirty=!0;hc.setVAO(null);ja.viewportWidth=m;ja.viewportHeight=p;K&&(b.cpuTime+=performance.now()-u);Q&&y.destroyStream(J);mc&&y.destroyStream(Sa);Ra&&y.destroyStream(Sb);sd&&y.destroyStream(fb)},
scope:function(a,c,e){var d,f,g,h,m,t,n,q,x,A,B,D,G,F,M,ca,H,X,w,ka,da,I,L,P,U,R,Y,ga,ia,T,Z,fa,O,Ba,sa,hc,pa,C,Ca,qa,Vb,xc,Sc,Ka,Eb,Wa,ya,wd,ra,Ra,la,eb,Gb,Lc,cb,jc,Ob,na,Pb,Ma,pb,vb,ib,Na,$a,Qb,Pa,fb,kc,La,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,Ub,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,Ua,oc,Wc,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,bc,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,pc,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,
ve,ue,We,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Yc,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd;d=a.viewport;f=d.x|0;g=d.y|0;h="width"in d?d.width|0:ja.framebufferWidth-f;m="height"in d?d.height|0:ja.framebufferHeight-g;t=ja.viewportWidth;ja.viewportWidth=h;n=ja.viewportHeight;ja.viewportHeight=m;q=Ga[0];Ga[0]=f;x=Ga[1];Ga[1]=g;A=Ga[2];Ga[2]=h;B=Ga[3];Ga[3]=m;D=tc[0];tc[0]=0;G=tc[1];tc[1]=0;F=tc[2];tc[2]=0;M=tc[3];tc[3]=0;ca=ea.blend_enable;ea.blend_enable=!0;H=wc[0];wc[0]=32774;X=wc[1];wc[1]=32774;
w=N[0];N[0]=770;ka=N[1];N[1]=771;da=N[2];N[2]=773;I=N[3];N[3]=1;L=ea.depth_enable;ea.depth_enable=!1;P=a.viewport;U=P.x|0;R=P.y|0;Y="width"in P?P.width|0:ja.framebufferWidth-U;ga="height"in P?P.height|0:ja.framebufferHeight-R;ia=aa[0];aa[0]=U;T=aa[1];aa[1]=R;Z=aa[2];aa[2]=Y;fa=aa[3];aa[3]=ga;O=ea.scissor_enable;ea.scissor_enable=!0;if(Ba=ba.profile)sa=performance.now(),b.count++;hc=xa.count;xa.count=36;pa=a.count;C=xa.instances;xa.instances=pa;Ca=xa.primitive;xa.primitive=4;qa=a.capSize;Vb=fc[5];
fc[5]=qa;xc=a.lineWidth;Sc=fc[4];fc[4]=xc;Ka=a.opacity;Eb=fc[10];fc[10]=Ka;Wa=a.range;ya=fc[18];fc[18]=Wa;wd=a.scale;ra=fc[6];fc[6]=wd;Ra=a.scaleFract;la=fc[7];fc[7]=Ra;eb=a.translate;Gb=fc[8];fc[8]=eb;Lc=a.translateFract;cb=fc[9];fc[9]=Lc;jc=K.call(this,ja,a,e);Ob=fc[3];fc[3]=jc;na=z.buffer;z.buffer=r;Pb=z.divisor;z.divisor=0;Ma=z.normalized;z.normalized=!1;pb=z.offset;z.offset=16;vb=z.size;z.size=0;ib=z.state;z.state=1;Na=z.stride;z.stride=24;$a=z.type;z.type=5126;Qb=z.w;z.w=0;Pa=z.x;z.x=0;fb=z.y;
z.y=0;kc=z.z;z.z=0;La=ha.call(this,ja,a,e);Ha.offset=La;ac=!1;lb=null;mb=0;ta=!1;ua=qb=0;Ta=1;bb=0;za=5126;Ab=Bb=Ia=gb=0;kb(Ha)?(ac=!0,lb=y.createStream(34962,Ha),za=lb.dtype):(lb=y.getBuffer(Ha))?za=lb.dtype:"constant"in Ha?(Ta=2,"number"===typeof Ha.constant?(Ia=Ha.constant,Bb=Ab=gb=0):(Ia=0<Ha.constant.length?Ha.constant[0]:0,Bb=1<Ha.constant.length?Ha.constant[1]:0,Ab=2<Ha.constant.length?Ha.constant[2]:0,gb=3<Ha.constant.length?Ha.constant[3]:0)):(lb=kb(Ha.buffer)?y.createStream(34962,Ha.buffer):
y.getBuffer(Ha.buffer),za="type"in Ha?qc[Ha.type]:lb.dtype,ta=!!Ha.normalized,ua=Ha.size|0,qb=Ha.offset|0,bb=Ha.stride|0,mb=Ha.divisor|0);Qa=u.buffer;u.buffer=lb;uc=u.divisor;u.divisor=mb;Ib=u.normalized;u.normalized=ta;Za=u.offset;u.offset=qb;Rb=u.size;u.size=ua;va=u.state;u.state=Ta;Ub=u.stride;u.stride=bb;Ja=u.type;u.type=za;Lb=u.w;u.w=gb;hb=u.x;u.x=Ia;jb=u.y;u.y=Bb;wa=u.z;u.z=Ab;cc=J.buffer;J.buffer=l;Da=J.divisor;J.divisor=0;rb=J.normalized;J.normalized=!1;sb=J.offset;J.offset=0;Xa=J.size;J.size=
0;Ya=J.state;J.state=1;lc=J.stride;J.stride=24;vc=J.type;J.type=5126;rc=J.w;J.w=0;Va=J.x;J.x=0;Xb=J.y;J.y=0;Gc=J.z;J.z=0;Ea=ma.call(this,ja,a,e);W.offset=Ea;zc=!1;Oa=null;Aa=0;nb=!1;Cb=wb=0;tb=1;sc=0;xb=5126;Nc=Wc=oc=Ua=0;kb(W)?(zc=!0,Oa=y.createStream(34962,W),xb=Oa.dtype):(Oa=y.getBuffer(W))?xb=Oa.dtype:"constant"in W?(tb=2,"number"===typeof W.constant?(oc=W.constant,Wc=Nc=Ua=0):(oc=0<W.constant.length?W.constant[0]:0,Wc=1<W.constant.length?W.constant[1]:0,Nc=2<W.constant.length?W.constant[2]:0,
Ua=3<W.constant.length?W.constant[3]:0)):(Oa=kb(W.buffer)?y.createStream(34962,W.buffer):y.getBuffer(W.buffer),xb="type"in W?qc[W.type]:Oa.dtype,nb=!!W.normalized,Cb=W.size|0,wb=W.offset|0,sc=W.stride|0,Aa=W.divisor|0);hd=p.buffer;p.buffer=Oa;id=p.divisor;p.divisor=Aa;Tb=p.normalized;p.normalized=nb;$b=p.offset;p.offset=wb;Mb=p.size;p.size=Cb;Fa=p.state;p.state=tb;Yb=p.stride;p.stride=sc;ob=p.type;p.type=xb;yb=p.w;p.w=Ua;Kb=p.x;p.x=oc;Nb=p.y;p.y=Wc;dc=p.z;p.z=Nc;gc=v.buffer;v.buffer=E;bc=v.divisor;
v.divisor=0;Ec=v.normalized;v.normalized=!1;Fc=v.offset;v.offset=8;Hc=v.size;v.size=0;Oc=v.state;v.state=1;bd=v.stride;v.stride=24;Uc=v.type;v.type=5126;Pc=v.w;v.w=0;Jb=v.x;v.x=0;Fb=v.y;v.y=0;Qc=v.z;v.z=0;Jc=k.call(this,ja,a,e);Hb.offset=Jc;Vc=!1;ec=null;Zc=0;dd=!1;ne=pd=0;$c=1;pc=0;Vd=5126;Gd=ke=Ie=he=0;kb(Hb)?(Vc=!0,ec=y.createStream(34962,Hb),Vd=ec.dtype):(ec=y.getBuffer(Hb))?Vd=ec.dtype:"constant"in Hb?($c=2,"number"===typeof Hb.constant?(Ie=Hb.constant,ke=Gd=he=0):(Ie=0<Hb.constant.length?Hb.constant[0]:
0,ke=1<Hb.constant.length?Hb.constant[1]:0,Gd=2<Hb.constant.length?Hb.constant[2]:0,he=3<Hb.constant.length?Hb.constant[3]:0)):(ec=kb(Hb.buffer)?y.createStream(34962,Hb.buffer):y.getBuffer(Hb.buffer),Vd="type"in Hb?qc[Hb.type]:ec.dtype,dd=!!Hb.normalized,ne=Hb.size|0,pd=Hb.offset|0,pc=Hb.stride|0,Zc=Hb.divisor|0);Ed=S.buffer;S.buffer=ec;fd=S.divisor;S.divisor=Zc;Ic=S.normalized;S.normalized=dd;qd=S.offset;S.offset=pd;jd=S.size;S.size=ne;cd=S.state;S.state=$c;md=S.stride;S.stride=pc;Cd=S.type;S.type=
Vd;zd=S.w;S.w=he;ve=S.x;S.x=Ie;ue=S.y;S.y=ke;We=S.z;S.z=Gd;le=Q.call(this,ja,a,e);zb.offset=le;ce=!1;ae=null;oe=0;Zd=!1;Ac=fe=0;Xc=1;pe=0;ie=5126;Ld=Kd=Id=Fd=0;kb(zb)?(ce=!0,ae=y.createStream(34962,zb),ie=ae.dtype):(ae=y.getBuffer(zb))?ie=ae.dtype:"constant"in zb?(Xc=2,"number"===typeof zb.constant?(Id=zb.constant,Kd=Ld=Fd=0):(Id=0<zb.constant.length?zb.constant[0]:0,Kd=1<zb.constant.length?zb.constant[1]:0,Ld=2<zb.constant.length?zb.constant[2]:0,Fd=3<zb.constant.length?zb.constant[3]:0)):(ae=kb(zb.buffer)?
y.createStream(34962,zb.buffer):y.getBuffer(zb.buffer),ie="type"in zb?qc[zb.type]:ae.dtype,Zd=!!zb.normalized,Ac=zb.size|0,fe=zb.offset|0,pe=zb.stride|0,oe=zb.divisor|0);ge=V.buffer;V.buffer=ae;Yc=V.divisor;V.divisor=oe;we=V.normalized;V.normalized=Zd;me=V.offset;V.offset=fe;Ne=V.size;V.size=Ac;Oe=V.state;V.state=Xc;Je=V.stride;V.stride=pe;qe=V.type;V.type=ie;ze=V.w;V.w=Fd;Ce=V.x;V.x=Id;De=V.y;V.y=Kd;Ee=V.z;V.z=Ld;Ae=oa.vert;oa.vert=2;Hd=oa.frag;oa.frag=1;ba.dirty=!0;c(ja,a,e);ja.viewportWidth=t;
ja.viewportHeight=n;Ga[0]=q;Ga[1]=x;Ga[2]=A;Ga[3]=B;tc[0]=D;tc[1]=G;tc[2]=F;tc[3]=M;ea.blend_enable=ca;wc[0]=H;wc[1]=X;N[0]=w;N[1]=ka;N[2]=da;N[3]=I;ea.depth_enable=L;aa[0]=ia;aa[1]=T;aa[2]=Z;aa[3]=fa;ea.scissor_enable=O;Ba&&(b.cpuTime+=performance.now()-sa);xa.count=hc;xa.instances=C;xa.primitive=Ca;fc[5]=Vb;fc[4]=Sc;fc[10]=Eb;fc[18]=ya;fc[6]=ra;fc[7]=la;fc[8]=Gb;fc[9]=cb;fc[3]=Ob;z.buffer=na;z.divisor=Pb;z.normalized=Ma;z.offset=pb;z.size=vb;z.state=ib;z.stride=Na;z.type=$a;z.w=Qb;z.x=Pa;z.y=fb;
z.z=kc;ac&&y.destroyStream(lb);u.buffer=Qa;u.divisor=uc;u.normalized=Ib;u.offset=Za;u.size=Rb;u.state=va;u.stride=Ub;u.type=Ja;u.w=Lb;u.x=hb;u.y=jb;u.z=wa;J.buffer=cc;J.divisor=Da;J.normalized=rb;J.offset=sb;J.size=Xa;J.state=Ya;J.stride=lc;J.type=vc;J.w=rc;J.x=Va;J.y=Xb;J.z=Gc;zc&&y.destroyStream(Oa);p.buffer=hd;p.divisor=id;p.normalized=Tb;p.offset=$b;p.size=Mb;p.state=Fa;p.stride=Yb;p.type=ob;p.w=yb;p.x=Kb;p.y=Nb;p.z=dc;v.buffer=gc;v.divisor=bc;v.normalized=Ec;v.offset=Fc;v.size=Hc;v.state=Oc;
v.stride=bd;v.type=Uc;v.w=Pc;v.x=Jb;v.y=Fb;v.z=Qc;Vc&&y.destroyStream(ec);S.buffer=Ed;S.divisor=fd;S.normalized=Ic;S.offset=qd;S.size=jd;S.state=cd;S.stride=md;S.type=Cd;S.w=zd;S.x=ve;S.y=ue;S.z=We;ce&&y.destroyStream(ae);V.buffer=ge;V.divisor=Yc;V.normalized=we;V.offset=me;V.size=Ne;V.state=Oe;V.stride=Je;V.type=qe;V.w=ze;V.x=Ce;V.y=De;V.z=Ee;oa.vert=Ae;oa.frag=Hd;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
b,g,h,d,c,n,e,q,w,da,l,E,r,D,K,z,u,C,J,ma,p,v,k,S,Q,V,A,cb,H,O,f,m,T,ra,na,Yc){var pc,la,Pa,Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa,fc,hc,tc,wd,wc,X,N,ia,Ca,Gb,Lc,Wc,F,B,fa,sa,aa,ga,pa,G,x;pc=a.attributes;la=a.buffer;Pa=a.context;Z=a.current;L=a.draw;I=a.elements;U=a.extensions;qa=a.framebuffer;P=a.gl;Ub=a.isBufferArgs;$a=a.next;R=a.shader;y=a.uniforms;ja=a.vao;ba=$a.blend_color;xa=Z.blend_color;La=$a.blend_equation;bc=Z.blend_equation;Ua=$a.blend_func;Y=Z.blend_func;kb=$a.colorMask;ea=
Z.colorMask;oa=$a.depth_range;fc=Z.depth_range;hc=$a.polygonOffset_offset;tc=Z.polygonOffset_offset;wd=$a.sample_coverage;wc=Z.sample_coverage;X=$a.scissor_box;N=Z.scissor_box;ia=$a.stencil_func;Ca=Z.stencil_func;Gb=$a.stencil_opBack;Lc=Z.stencil_opBack;Wc=$a.stencil_opFront;F=Z.stencil_opFront;B=$a.viewport;fa=Z.viewport;sa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};aa={divisor:1,offset:8,stride:8};ga={divisor:1,offset:8,stride:8};pa={divisor:1,
offset:16,stride:8};G={divisor:1,offset:16,stride:8};x={divisor:1,offset:0,stride:4};return{batch:function(a,e){var g,h,l,n,q,r;g=qa.next;g!==qa.cur&&(g?P.bindFramebuffer(36160,g.framebuffer):P.bindFramebuffer(36160,null),qa.cur=g);if(Z.dirty){var y,B,z,E,D,w,X,K,da,ka,R,ba,La,Ua,Jd,Me,mf,bf,Ad,Be,Rd,Sd,je,He,td,nd,yd,rd,ed,Bc,ud,gd;y=$a.dither;y!==Z.dither&&(y?P.enable(3024):P.disable(3024),Z.dither=y);B=$a.depth_func;B!==Z.depth_func&&(P.depthFunc(B),Z.depth_func=B);z=oa[0];E=oa[1];if(z!==fc[0]||
E!==fc[1])P.depthRange(z,E),fc[0]=z,fc[1]=E;D=$a.depth_mask;D!==Z.depth_mask&&(P.depthMask(D),Z.depth_mask=D);w=kb[0];X=kb[1];K=kb[2];da=kb[3];if(w!==ea[0]||X!==ea[1]||K!==ea[2]||da!==ea[3])P.colorMask(w,X,K,da),ea[0]=w,ea[1]=X,ea[2]=K,ea[3]=da;ka=$a.cull_enable;ka!==Z.cull_enable&&(ka?P.enable(2884):P.disable(2884),Z.cull_enable=ka);R=$a.cull_face;R!==Z.cull_face&&(P.cullFace(R),Z.cull_face=R);ba=$a.frontFace;ba!==Z.frontFace&&(P.frontFace(ba),Z.frontFace=ba);La=$a.lineWidth;La!==Z.lineWidth&&(P.lineWidth(La),
Z.lineWidth=La);Ua=$a.polygonOffset_enable;Ua!==Z.polygonOffset_enable&&(Ua?P.enable(32823):P.disable(32823),Z.polygonOffset_enable=Ua);Jd=hc[0];Me=hc[1];if(Jd!==tc[0]||Me!==tc[1])P.polygonOffset(Jd,Me),tc[0]=Jd,tc[1]=Me;mf=$a.sample_alpha;mf!==Z.sample_alpha&&(mf?P.enable(32926):P.disable(32926),Z.sample_alpha=mf);bf=$a.sample_enable;bf!==Z.sample_enable&&(bf?P.enable(32928):P.disable(32928),Z.sample_enable=bf);Ad=wd[0];Be=wd[1];if(Ad!==wc[0]||Be!==wc[1])P.sampleCoverage(Ad,Be),wc[0]=Ad,wc[1]=Be;
Rd=$a.stencil_mask;Rd!==Z.stencil_mask&&(P.stencilMask(Rd),Z.stencil_mask=Rd);Sd=ia[0];je=ia[1];He=ia[2];if(Sd!==Ca[0]||je!==Ca[1]||He!==Ca[2])P.stencilFunc(Sd,je,He),Ca[0]=Sd,Ca[1]=je,Ca[2]=He;td=Wc[0];nd=Wc[1];yd=Wc[2];rd=Wc[3];if(td!==F[0]||nd!==F[1]||yd!==F[2]||rd!==F[3])P.stencilOpSeparate(td,nd,yd,rd),F[0]=td,F[1]=nd,F[2]=yd,F[3]=rd;ed=Gb[0];Bc=Gb[1];ud=Gb[2];gd=Gb[3];if(ed!==Lc[0]||Bc!==Lc[1]||ud!==Lc[2]||gd!==Lc[3])P.stencilOpSeparate(ed,Bc,ud,gd),Lc[0]=ed,Lc[1]=Bc,Lc[2]=ud,Lc[3]=gd}P.blendColor(0,
0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;P.enable(3042);Z.blend_enable=!0;P.blendEquationSeparate(32774,32774);bc[0]=32774;bc[1]=32774;P.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;P.enable(3089);Z.scissor_enable=!0;P.disable(2960);Z.stencil_enable=!1;if(h=Z.profile)l=performance.now(),b.count+=e;P.useProgram(u.program);n=U.angle_instanced_arrays;var Mc,nc,ab,Cc,Db;ja.setVAO(null);Mc=cb.location;nc=pc[Mc];nc.buffer||P.enableVertexAttribArray(Mc);if(5126!==nc.type||1!==nc.size||
nc.buffer!==d||!1!==nc.normalized||0!==nc.offset||8!==nc.stride)P.bindBuffer(34962,d.buffer),P.vertexAttribPointer(Mc,1,5126,!1,8,0),nc.type=5126,nc.size=1,nc.buffer=d,nc.normalized=!1,nc.offset=0,nc.stride=8;0!==nc.divisor&&(n.vertexAttribDivisorANGLE(Mc,0),nc.divisor=0);ab=H.location;Cc=pc[ab];Cc.buffer||P.enableVertexAttribArray(ab);if(5126!==Cc.type||1!==Cc.size||Cc.buffer!==c||!1!==Cc.normalized||4!==Cc.offset||8!==Cc.stride)P.bindBuffer(34962,c.buffer),P.vertexAttribPointer(ab,1,5126,!1,8,4),
Cc.type=5126,Cc.size=1,Cc.buffer=c,Cc.normalized=!1,Cc.offset=4,Cc.stride=8;0!==Cc.divisor&&(n.vertexAttribDivisorANGLE(ab,0),Cc.divisor=0);(Db=L.elements)?P.bindBuffer(34963,Db.buffer.buffer):ja.currentVAO&&(Db=I.getElements(ja.currentVAO.elements))&&P.bindBuffer(34963,Db.buffer.buffer);for(q=0;q<e;++q){r=a[q];var mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,Ve,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,
wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,vf,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Gf,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd;mc=r.viewport;Sa=mc.x|0;ic=mc.y|0;Zb="width"in mc?mc.width|0:Pa.framebufferWidth-Sa;ad="height"in mc?mc.height|0:Pa.framebufferHeight-ic;Dd=Pa.viewportWidth;Pa.viewportWidth=Zb;od=Pa.viewportHeight;Pa.viewportHeight=ad;P.viewport(Sa,ic,Zb,ad);fa[0]=Sa;fa[1]=ic;fa[2]=Zb;fa[3]=ad;(Dc=C.call(this,
Pa,r,q))?P.enable(2929):P.disable(2929);Z.depth_enable=Dc;Vb=r.viewport;xc=Vb.x|0;Sc=Vb.y|0;Ka="width"in Vb?Vb.width|0:Pa.framebufferWidth-xc;Eb="height"in Vb?Vb.height|0:Pa.framebufferHeight-Sc;P.scissor(xc,Sc,Ka,Eb);N[0]=xc;N[1]=Sc;N[2]=Ka;N[3]=Eb;aa.buffer=r.positionBuffer;Wa=!1;ya=null;xd=0;ub=!1;Sb=Ra=0;eb=1;Tc=0;Wb=5126;vd=Ob=jc=Ve=0;Ub(aa)?(Wa=!0,ya=la.createStream(34962,aa),Wb=ya.dtype):(ya=la.getBuffer(aa))?Wb=ya.dtype:"constant"in aa?(eb=2,"number"===typeof aa.constant?(jc=aa.constant,Ob=
vd=Ve=0):(jc=0<aa.constant.length?aa.constant[0]:0,Ob=1<aa.constant.length?aa.constant[1]:0,vd=2<aa.constant.length?aa.constant[2]:0,Ve=3<aa.constant.length?aa.constant[3]:0)):(ya=Ub(aa.buffer)?la.createStream(34962,aa.buffer):la.getBuffer(aa.buffer),Wb="type"in aa?sa[aa.type]:ya.dtype,ub=!!aa.normalized,Sb=aa.size|0,Ra=aa.offset|0,Tc=aa.stride|0,xd=aa.divisor|0);Pb=ma.location;Ma=pc[Pb];if(1===eb){Ma.buffer||P.enableVertexAttribArray(Pb);pb=Sb||2;if(Ma.type!==Wb||Ma.size!==pb||Ma.buffer!==ya||Ma.normalized!==
ub||Ma.offset!==Ra||Ma.stride!==Tc)P.bindBuffer(34962,ya.buffer),P.vertexAttribPointer(Pb,pb,Wb,ub,Tc,Ra),Ma.type=Wb,Ma.size=pb,Ma.buffer=ya,Ma.normalized=ub,Ma.offset=Ra,Ma.stride=Tc;Ma.divisor!==xd&&(n.vertexAttribDivisorANGLE(Pb,xd),Ma.divisor=xd)}else if(Ma.buffer&&(P.disableVertexAttribArray(Pb),Ma.buffer=null),Ma.x!==jc||Ma.y!==Ob||Ma.z!==vd||Ma.w!==Ve)P.vertexAttrib4f(Pb,jc,Ob,vd,Ve),Ma.x=jc,Ma.y=Ob,Ma.z=vd,Ma.w=Ve;pa.buffer=r.positionBuffer;vb=!1;ib=null;Na=0;yc=!1;sd=Qb=0;fb=1;kc=0;Rc=5126;
ta=mb=lb=ac=0;Ub(pa)?(vb=!0,ib=la.createStream(34962,pa),Rc=ib.dtype):(ib=la.getBuffer(pa))?Rc=ib.dtype:"constant"in pa?(fb=2,"number"===typeof pa.constant?(lb=pa.constant,mb=ta=ac=0):(lb=0<pa.constant.length?pa.constant[0]:0,mb=1<pa.constant.length?pa.constant[1]:0,ta=2<pa.constant.length?pa.constant[2]:0,ac=3<pa.constant.length?pa.constant[3]:0)):(ib=Ub(pa.buffer)?la.createStream(34962,pa.buffer):la.getBuffer(pa.buffer),Rc="type"in pa?sa[pa.type]:ib.dtype,yc=!!pa.normalized,sd=pa.size|0,Qb=pa.offset|
0,kc=pa.stride|0,Na=pa.divisor|0);qb=v.location;ua=pc[qb];if(1===fb){ua.buffer||P.enableVertexAttribArray(qb);Ta=sd||2;if(ua.type!==Rc||ua.size!==Ta||ua.buffer!==ib||ua.normalized!==yc||ua.offset!==Qb||ua.stride!==kc)P.bindBuffer(34962,ib.buffer),P.vertexAttribPointer(qb,Ta,Rc,yc,kc,Qb),ua.type=Rc,ua.size=Ta,ua.buffer=ib,ua.normalized=yc,ua.offset=Qb,ua.stride=kc;ua.divisor!==Na&&(n.vertexAttribDivisorANGLE(qb,Na),ua.divisor=Na)}else if(ua.buffer&&(P.disableVertexAttribArray(qb),ua.buffer=null),ua.x!==
lb||ua.y!==mb||ua.z!==ta||ua.w!==ac)P.vertexAttrib4f(qb,lb,mb,ta,ac),ua.x=lb,ua.y=mb,ua.z=ta,ua.w=ac;ga.buffer=r.positionFractBuffer;bb=!1;za=null;gb=0;Ia=!1;Ab=Bb=0;Qa=1;uc=0;Ib=5126;kd=va=Rb=Za=0;Ub(ga)?(bb=!0,za=la.createStream(34962,ga),Ib=za.dtype):(za=la.getBuffer(ga))?Ib=za.dtype:"constant"in ga?(Qa=2,"number"===typeof ga.constant?(Rb=ga.constant,va=kd=Za=0):(Rb=0<ga.constant.length?ga.constant[0]:0,va=1<ga.constant.length?ga.constant[1]:0,kd=2<ga.constant.length?ga.constant[2]:0,Za=3<ga.constant.length?
ga.constant[3]:0)):(za=Ub(ga.buffer)?la.createStream(34962,ga.buffer):la.getBuffer(ga.buffer),Ib="type"in ga?sa[ga.type]:za.dtype,Ia=!!ga.normalized,Ab=ga.size|0,Bb=ga.offset|0,uc=ga.stride|0,gb=ga.divisor|0);Ja=p.location;Lb=pc[Ja];if(1===Qa){Lb.buffer||P.enableVertexAttribArray(Ja);hb=Ab||2;if(Lb.type!==Ib||Lb.size!==hb||Lb.buffer!==za||Lb.normalized!==Ia||Lb.offset!==Bb||Lb.stride!==uc)P.bindBuffer(34962,za.buffer),P.vertexAttribPointer(Ja,hb,Ib,Ia,uc,Bb),Lb.type=Ib,Lb.size=hb,Lb.buffer=za,Lb.normalized=
Ia,Lb.offset=Bb,Lb.stride=uc;Lb.divisor!==gb&&(n.vertexAttribDivisorANGLE(Ja,gb),Lb.divisor=gb)}else if(Lb.buffer&&(P.disableVertexAttribArray(Ja),Lb.buffer=null),Lb.x!==Rb||Lb.y!==va||Lb.z!==kd||Lb.w!==Za)P.vertexAttrib4f(Ja,Rb,va,kd,Za),Lb.x=Rb,Lb.y=va,Lb.z=kd,Lb.w=Za;G.buffer=r.positionFractBuffer;jb=!1;wa=null;cc=0;Da=!1;sb=rb=0;Xa=1;Ya=0;lc=5126;Xb=Va=rc=vc=0;Ub(G)?(jb=!0,wa=la.createStream(34962,G),lc=wa.dtype):(wa=la.getBuffer(G))?lc=wa.dtype:"constant"in G?(Xa=2,"number"===typeof G.constant?
(rc=G.constant,Va=Xb=vc=0):(rc=0<G.constant.length?G.constant[0]:0,Va=1<G.constant.length?G.constant[1]:0,Xb=2<G.constant.length?G.constant[2]:0,vc=3<G.constant.length?G.constant[3]:0)):(wa=Ub(G.buffer)?la.createStream(34962,G.buffer):la.getBuffer(G.buffer),lc="type"in G?sa[G.type]:wa.dtype,Da=!!G.normalized,sb=G.size|0,rb=G.offset|0,Ya=G.stride|0,cc=G.divisor|0);Gc=k.location;Ea=pc[Gc];if(1===Xa){Ea.buffer||P.enableVertexAttribArray(Gc);zc=sb||2;if(Ea.type!==lc||Ea.size!==zc||Ea.buffer!==wa||Ea.normalized!==
Da||Ea.offset!==rb||Ea.stride!==Ya)P.bindBuffer(34962,wa.buffer),P.vertexAttribPointer(Gc,zc,lc,Da,Ya,rb),Ea.type=lc,Ea.size=zc,Ea.buffer=wa,Ea.normalized=Da,Ea.offset=rb,Ea.stride=Ya;Ea.divisor!==cc&&(n.vertexAttribDivisorANGLE(Gc,cc),Ea.divisor=cc)}else if(Ea.buffer&&(P.disableVertexAttribArray(Gc),Ea.buffer=null),Ea.x!==rc||Ea.y!==Va||Ea.z!==Xb||Ea.w!==vc)P.vertexAttrib4f(Gc,rc,Va,Xb,vc),Ea.x=rc,Ea.y=Va,Ea.z=Xb,Ea.w=vc;x.buffer=r.colorBuffer;Oa=!1;Aa=null;nb=0;wb=!1;tb=Cb=0;sc=1;xb=0;ld=5126;hd=
Nc=ee=oc=0;Ub(x)?(Oa=!0,Aa=la.createStream(34962,x),ld=Aa.dtype):(Aa=la.getBuffer(x))?ld=Aa.dtype:"constant"in x?(sc=2,"number"===typeof x.constant?(ee=x.constant,Nc=hd=oc=0):(ee=0<x.constant.length?x.constant[0]:0,Nc=1<x.constant.length?x.constant[1]:0,hd=2<x.constant.length?x.constant[2]:0,oc=3<x.constant.length?x.constant[3]:0)):(Aa=Ub(x.buffer)?la.createStream(34962,x.buffer):la.getBuffer(x.buffer),ld="type"in x?sa[x.type]:Aa.dtype,wb=!!x.normalized,tb=x.size|0,Cb=x.offset|0,xb=x.stride|0,nb=
x.divisor|0);id=S.location;Tb=pc[id];if(1===sc){Tb.buffer||P.enableVertexAttribArray(id);$b=tb||4;if(Tb.type!==ld||Tb.size!==$b||Tb.buffer!==Aa||Tb.normalized!==wb||Tb.offset!==Cb||Tb.stride!==xb)P.bindBuffer(34962,Aa.buffer),P.vertexAttribPointer(id,$b,ld,wb,xb,Cb),Tb.type=ld,Tb.size=$b,Tb.buffer=Aa,Tb.normalized=wb,Tb.offset=Cb,Tb.stride=xb;Tb.divisor!==nb&&(n.vertexAttribDivisorANGLE(id,nb),Tb.divisor=nb)}else if(Tb.buffer&&(P.disableVertexAttribArray(id),Tb.buffer=null),Tb.x!==ee||Tb.y!==Nc||
Tb.z!==hd||Tb.w!==oc)P.vertexAttrib4f(id,ee,Nc,hd,oc),Tb.x=ee,Tb.y=Nc,Tb.z=hd,Tb.w=oc;Mb=r.scale;Fa=Mb[0];ob=Mb[1];q&&Yb===Fa&&yb===ob||(Yb=Fa,yb=ob,P.uniform2f(f.location,Fa,ob));Kb=r.scaleFract;Nb=Kb[0];gc=Kb[1];q&&dc===Nb&&vf===gc||(dc=Nb,vf=gc,P.uniform2f(m.location,Nb,gc));Ec=r.translate;Fc=Ec[0];Oc=Ec[1];q&&Hc===Fc&&bd===Oc||(Hc=Fc,bd=Oc,P.uniform2f(ra.location,Fc,Oc));Uc=r.translateFract;Pc=Uc[0];Fb=Uc[1];q&&Jb===Pc&&Qc===Fb||(Jb=Pc,Qc=Fb,P.uniform2f(na.location,Pc,Fb));Jc=r.thickness;q&&Vc===
Jc||(Vc=Jc,P.uniform1f(T.location,Jc));ec=r.depth;q&&Zc===ec||(Zc=ec,P.uniform1f(A.location,ec));dd=J.call(this,Pa,r,q);pd=dd[0];$c=dd[1];Vd=dd[2];Ie=dd[3];q&&ne===pd&&Gf===$c&&he===Vd&&ke===Ie||(ne=pd,Gf=$c,he=Vd,ke=Ie,P.uniform4f(Yc.location,pd,$c,Vd,Ie));Gd=r.dashLength;q&&Ed===Gd||(Ed=Gd,P.uniform1f(Q.location,Gd));fd=r.opacity;q&&Ic===fd||(Ic=fd,P.uniform1f(O.location,fd));(qd=r.dashTexture)&&"framebuffer"===qd._reglType&&(qd=qd.color[0]);jd=qd._texture;P.uniform1i(V.location,jd.bind());cd=r.count;
0<cd?Db?n.drawElementsInstancedANGLE(5,4,Db.type,0<<(Db.type-5121>>1),cd):n.drawArraysInstancedANGLE(5,0,4,cd):0>cd&&(Db?P.drawElements(5,4,Db.type,0<<(Db.type-5121>>1)):P.drawArrays(5,0,4));Pa.viewportWidth=Dd;Pa.viewportHeight=od;Wa&&la.destroyStream(ya);vb&&la.destroyStream(ib);bb&&la.destroyStream(za);jb&&la.destroyStream(wa);Oa&&la.destroyStream(Aa);jd.unbind()}Z.dirty=!0;ja.setVAO(null);h&&(b.cpuTime+=performance.now()-l)},draw:function(a){var e,l,q,t,r,y,B,z,E,D,w,X,K,da,ka,u,J,ha,R,ba,C,Jd,
Me,db,La,Ad,Be,Rd,Sd,je,Ua,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,Ve,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb;e=qa.next;e!==qa.cur&&(e?P.bindFramebuffer(36160,e.framebuffer):P.bindFramebuffer(36160,null),qa.cur=e);if(Z.dirty){var sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb;sb=$a.dither;sb!==Z.dither&&
(sb?P.enable(3024):P.disable(3024),Z.dither=sb);Xa=$a.depth_func;Xa!==Z.depth_func&&(P.depthFunc(Xa),Z.depth_func=Xa);Ya=oa[0];lc=oa[1];if(Ya!==fc[0]||lc!==fc[1])P.depthRange(Ya,lc),fc[0]=Ya,fc[1]=lc;vc=$a.depth_mask;vc!==Z.depth_mask&&(P.depthMask(vc),Z.depth_mask=vc);rc=kb[0];Va=kb[1];Xb=kb[2];Gc=kb[3];if(rc!==ea[0]||Va!==ea[1]||Xb!==ea[2]||Gc!==ea[3])P.colorMask(rc,Va,Xb,Gc),ea[0]=rc,ea[1]=Va,ea[2]=Xb,ea[3]=Gc;Ea=$a.cull_enable;Ea!==Z.cull_enable&&(Ea?P.enable(2884):P.disable(2884),Z.cull_enable=
Ea);zc=$a.cull_face;zc!==Z.cull_face&&(P.cullFace(zc),Z.cull_face=zc);Oa=$a.frontFace;Oa!==Z.frontFace&&(P.frontFace(Oa),Z.frontFace=Oa);Aa=$a.lineWidth;Aa!==Z.lineWidth&&(P.lineWidth(Aa),Z.lineWidth=Aa);nb=$a.polygonOffset_enable;nb!==Z.polygonOffset_enable&&(nb?P.enable(32823):P.disable(32823),Z.polygonOffset_enable=nb);wb=hc[0];Cb=hc[1];if(wb!==tc[0]||Cb!==tc[1])P.polygonOffset(wb,Cb),tc[0]=wb,tc[1]=Cb;tb=$a.sample_alpha;tb!==Z.sample_alpha&&(tb?P.enable(32926):P.disable(32926),Z.sample_alpha=
tb);sc=$a.sample_enable;sc!==Z.sample_enable&&(sc?P.enable(32928):P.disable(32928),Z.sample_enable=sc);xb=wd[0];ld=wd[1];if(xb!==wc[0]||ld!==wc[1])P.sampleCoverage(xb,ld),wc[0]=xb,wc[1]=ld;oc=$a.stencil_mask;oc!==Z.stencil_mask&&(P.stencilMask(oc),Z.stencil_mask=oc);ee=ia[0];Nc=ia[1];hd=ia[2];if(ee!==Ca[0]||Nc!==Ca[1]||hd!==Ca[2])P.stencilFunc(ee,Nc,hd),Ca[0]=ee,Ca[1]=Nc,Ca[2]=hd;id=Wc[0];Tb=Wc[1];$b=Wc[2];Mb=Wc[3];if(id!==F[0]||Tb!==F[1]||$b!==F[2]||Mb!==F[3])P.stencilOpSeparate(id,Tb,$b,Mb),F[0]=
id,F[1]=Tb,F[2]=$b,F[3]=Mb;Fa=Gb[0];Yb=Gb[1];ob=Gb[2];yb=Gb[3];if(Fa!==Lc[0]||Yb!==Lc[1]||ob!==Lc[2]||yb!==Lc[3])P.stencilOpSeparate(Fa,Yb,ob,yb),Lc[0]=Fa,Lc[1]=Yb,Lc[2]=ob,Lc[3]=yb}l=a.viewport;q=l.x|0;t=l.y|0;r="width"in l?l.width|0:Pa.framebufferWidth-q;y="height"in l?l.height|0:Pa.framebufferHeight-t;B=Pa.viewportWidth;Pa.viewportWidth=r;z=Pa.viewportHeight;Pa.viewportHeight=y;P.viewport(q,t,r,y);fa[0]=q;fa[1]=t;fa[2]=r;fa[3]=y;P.blendColor(0,0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;P.enable(3042);
Z.blend_enable=!0;P.blendEquationSeparate(32774,32774);bc[0]=32774;bc[1]=32774;P.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;(E=g.call(this,Pa,a,0))?P.enable(2929):P.disable(2929);Z.depth_enable=E;D=a.viewport;w=D.x|0;X=D.y|0;K="width"in D?D.width|0:Pa.framebufferWidth-w;da="height"in D?D.height|0:Pa.framebufferHeight-X;P.scissor(w,X,K,da);N[0]=w;N[1]=X;N[2]=K;N[3]=da;P.enable(3089);Z.scissor_enable=!0;P.disable(2960);Z.stencil_enable=!1;if(ka=Z.profile)u=performance.now(),
b.count++;P.useProgram(h.program);J=U.angle_instanced_arrays;ja.setVAO(null);aa.buffer=a.positionBuffer;ha=!1;R=null;ba=0;C=!1;Me=Jd=0;db=1;La=0;Ad=5126;je=Sd=Rd=Be=0;Ub(aa)?(ha=!0,R=la.createStream(34962,aa),Ad=R.dtype):(R=la.getBuffer(aa))?Ad=R.dtype:"constant"in aa?(db=2,"number"===typeof aa.constant?(Rd=aa.constant,Sd=je=Be=0):(Rd=0<aa.constant.length?aa.constant[0]:0,Sd=1<aa.constant.length?aa.constant[1]:0,je=2<aa.constant.length?aa.constant[2]:0,Be=3<aa.constant.length?aa.constant[3]:0)):(R=
Ub(aa.buffer)?la.createStream(34962,aa.buffer):la.getBuffer(aa.buffer),Ad="type"in aa?sa[aa.type]:R.dtype,C=!!aa.normalized,Me=aa.size|0,Jd=aa.offset|0,La=aa.stride|0,ba=aa.divisor|0);Ua=ma.location;td=pc[Ua];if(1===db){td.buffer||P.enableVertexAttribArray(Ua);nd=Me||2;if(td.type!==Ad||td.size!==nd||td.buffer!==R||td.normalized!==C||td.offset!==Jd||td.stride!==La)P.bindBuffer(34962,R.buffer),P.vertexAttribPointer(Ua,nd,Ad,C,La,Jd),td.type=Ad,td.size=nd,td.buffer=R,td.normalized=C,td.offset=Jd,td.stride=
La;td.divisor!==ba&&(J.vertexAttribDivisorANGLE(Ua,ba),td.divisor=ba)}else if(td.buffer&&(P.disableVertexAttribArray(Ua),td.buffer=null),td.x!==Rd||td.y!==Sd||td.z!==je||td.w!==Be)P.vertexAttrib4f(Ua,Rd,Sd,je,Be),td.x=Rd,td.y=Sd,td.z=je,td.w=Be;pa.buffer=a.positionBuffer;yd=!1;rd=null;ed=0;Bc=!1;gd=ud=0;Mc=1;nc=0;ab=5126;Sa=mc=Db=Cc=0;Ub(pa)?(yd=!0,rd=la.createStream(34962,pa),ab=rd.dtype):(rd=la.getBuffer(pa))?ab=rd.dtype:"constant"in pa?(Mc=2,"number"===typeof pa.constant?(Db=pa.constant,mc=Sa=
Cc=0):(Db=0<pa.constant.length?pa.constant[0]:0,mc=1<pa.constant.length?pa.constant[1]:0,Sa=2<pa.constant.length?pa.constant[2]:0,Cc=3<pa.constant.length?pa.constant[3]:0)):(rd=Ub(pa.buffer)?la.createStream(34962,pa.buffer):la.getBuffer(pa.buffer),ab="type"in pa?sa[pa.type]:rd.dtype,Bc=!!pa.normalized,gd=pa.size|0,ud=pa.offset|0,nc=pa.stride|0,ed=pa.divisor|0);ic=v.location;Zb=pc[ic];if(1===Mc){Zb.buffer||P.enableVertexAttribArray(ic);ad=gd||2;if(Zb.type!==ab||Zb.size!==ad||Zb.buffer!==rd||Zb.normalized!==
Bc||Zb.offset!==ud||Zb.stride!==nc)P.bindBuffer(34962,rd.buffer),P.vertexAttribPointer(ic,ad,ab,Bc,nc,ud),Zb.type=ab,Zb.size=ad,Zb.buffer=rd,Zb.normalized=Bc,Zb.offset=ud,Zb.stride=nc;Zb.divisor!==ed&&(J.vertexAttribDivisorANGLE(ic,ed),Zb.divisor=ed)}else if(Zb.buffer&&(P.disableVertexAttribArray(ic),Zb.buffer=null),Zb.x!==Db||Zb.y!==mc||Zb.z!==Sa||Zb.w!==Cc)P.vertexAttrib4f(ic,Db,mc,Sa,Cc),Zb.x=Db,Zb.y=mc,Zb.z=Sa,Zb.w=Cc;ga.buffer=a.positionFractBuffer;Dd=!1;od=null;Dc=0;Vb=!1;Sc=xc=0;Ka=1;Eb=0;
Wa=5126;Ra=ub=xd=ya=0;Ub(ga)?(Dd=!0,od=la.createStream(34962,ga),Wa=od.dtype):(od=la.getBuffer(ga))?Wa=od.dtype:"constant"in ga?(Ka=2,"number"===typeof ga.constant?(xd=ga.constant,ub=Ra=ya=0):(xd=0<ga.constant.length?ga.constant[0]:0,ub=1<ga.constant.length?ga.constant[1]:0,Ra=2<ga.constant.length?ga.constant[2]:0,ya=3<ga.constant.length?ga.constant[3]:0)):(od=Ub(ga.buffer)?la.createStream(34962,ga.buffer):la.getBuffer(ga.buffer),Wa="type"in ga?sa[ga.type]:od.dtype,Vb=!!ga.normalized,Sc=ga.size|0,
xc=ga.offset|0,Eb=ga.stride|0,Dc=ga.divisor|0);Sb=p.location;eb=pc[Sb];if(1===Ka){eb.buffer||P.enableVertexAttribArray(Sb);Tc=Sc||2;if(eb.type!==Wa||eb.size!==Tc||eb.buffer!==od||eb.normalized!==Vb||eb.offset!==xc||eb.stride!==Eb)P.bindBuffer(34962,od.buffer),P.vertexAttribPointer(Sb,Tc,Wa,Vb,Eb,xc),eb.type=Wa,eb.size=Tc,eb.buffer=od,eb.normalized=Vb,eb.offset=xc,eb.stride=Eb;eb.divisor!==Dc&&(J.vertexAttribDivisorANGLE(Sb,Dc),eb.divisor=Dc)}else if(eb.buffer&&(P.disableVertexAttribArray(Sb),eb.buffer=
null),eb.x!==xd||eb.y!==ub||eb.z!==Ra||eb.w!==ya)P.vertexAttrib4f(Sb,xd,ub,Ra,ya),eb.x=xd,eb.y=ub,eb.z=Ra,eb.w=ya;G.buffer=a.positionFractBuffer;Wb=!1;Ve=null;jc=0;Ob=!1;Pb=vd=0;Ma=1;pb=0;vb=5126;Qb=yc=Na=ib=0;Ub(G)?(Wb=!0,Ve=la.createStream(34962,G),vb=Ve.dtype):(Ve=la.getBuffer(G))?vb=Ve.dtype:"constant"in G?(Ma=2,"number"===typeof G.constant?(Na=G.constant,yc=Qb=ib=0):(Na=0<G.constant.length?G.constant[0]:0,yc=1<G.constant.length?G.constant[1]:0,Qb=2<G.constant.length?G.constant[2]:0,ib=3<G.constant.length?
G.constant[3]:0)):(Ve=Ub(G.buffer)?la.createStream(34962,G.buffer):la.getBuffer(G.buffer),vb="type"in G?sa[G.type]:Ve.dtype,Ob=!!G.normalized,Pb=G.size|0,vd=G.offset|0,pb=G.stride|0,jc=G.divisor|0);sd=k.location;fb=pc[sd];if(1===Ma){fb.buffer||P.enableVertexAttribArray(sd);kc=Pb||2;if(fb.type!==vb||fb.size!==kc||fb.buffer!==Ve||fb.normalized!==Ob||fb.offset!==vd||fb.stride!==pb)P.bindBuffer(34962,Ve.buffer),P.vertexAttribPointer(sd,kc,vb,Ob,pb,vd),fb.type=vb,fb.size=kc,fb.buffer=Ve,fb.normalized=
Ob,fb.offset=vd,fb.stride=pb;fb.divisor!==jc&&(J.vertexAttribDivisorANGLE(sd,jc),fb.divisor=jc)}else if(fb.buffer&&(P.disableVertexAttribArray(sd),fb.buffer=null),fb.x!==Na||fb.y!==yc||fb.z!==Qb||fb.w!==ib)P.vertexAttrib4f(sd,Na,yc,Qb,ib),fb.x=Na,fb.y=yc,fb.z=Qb,fb.w=ib;x.buffer=a.colorBuffer;Rc=!1;ac=null;lb=0;mb=!1;qb=ta=0;ua=1;Ta=0;bb=5126;Bb=Ia=gb=za=0;Ub(x)?(Rc=!0,ac=la.createStream(34962,x),bb=ac.dtype):(ac=la.getBuffer(x))?bb=ac.dtype:"constant"in x?(ua=2,"number"===typeof x.constant?(gb=x.constant,
Ia=Bb=za=0):(gb=0<x.constant.length?x.constant[0]:0,Ia=1<x.constant.length?x.constant[1]:0,Bb=2<x.constant.length?x.constant[2]:0,za=3<x.constant.length?x.constant[3]:0)):(ac=Ub(x.buffer)?la.createStream(34962,x.buffer):la.getBuffer(x.buffer),bb="type"in x?sa[x.type]:ac.dtype,mb=!!x.normalized,qb=x.size|0,ta=x.offset|0,Ta=x.stride|0,lb=x.divisor|0);Ab=S.location;Qa=pc[Ab];if(1===ua){Qa.buffer||P.enableVertexAttribArray(Ab);uc=qb||4;if(Qa.type!==bb||Qa.size!==uc||Qa.buffer!==ac||Qa.normalized!==mb||
Qa.offset!==ta||Qa.stride!==Ta)P.bindBuffer(34962,ac.buffer),P.vertexAttribPointer(Ab,uc,bb,mb,Ta,ta),Qa.type=bb,Qa.size=uc,Qa.buffer=ac,Qa.normalized=mb,Qa.offset=ta,Qa.stride=Ta;Qa.divisor!==lb&&(J.vertexAttribDivisorANGLE(Ab,lb),Qa.divisor=lb)}else if(Qa.buffer&&(P.disableVertexAttribArray(Ab),Qa.buffer=null),Qa.x!==gb||Qa.y!==Ia||Qa.z!==Bb||Qa.w!==za)P.vertexAttrib4f(Ab,gb,Ia,Bb,za),Qa.x=gb,Qa.y=Ia,Qa.z=Bb,Qa.w=za;Ib=cb.location;Za=pc[Ib];Za.buffer||P.enableVertexAttribArray(Ib);if(5126!==Za.type||
1!==Za.size||Za.buffer!==d||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)P.bindBuffer(34962,d.buffer),P.vertexAttribPointer(Ib,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=d,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(J.vertexAttribDivisorANGLE(Ib,0),Za.divisor=0);Rb=H.location;va=pc[Rb];va.buffer||P.enableVertexAttribArray(Rb);if(5126!==va.type||1!==va.size||va.buffer!==c||!1!==va.normalized||4!==va.offset||8!==va.stride)P.bindBuffer(34962,c.buffer),P.vertexAttribPointer(Rb,
1,5126,!1,8,4),va.type=5126,va.size=1,va.buffer=c,va.normalized=!1,va.offset=4,va.stride=8;0!==va.divisor&&(J.vertexAttribDivisorANGLE(Rb,0),va.divisor=0);kd=a.scale;P.uniform2f(f.location,kd[0],kd[1]);Ja=a.scaleFract;P.uniform2f(m.location,Ja[0],Ja[1]);Lb=a.translate;P.uniform2f(ra.location,Lb[0],Lb[1]);hb=a.translateFract;P.uniform2f(na.location,hb[0],hb[1]);P.uniform1f(T.location,a.thickness);P.uniform1f(A.location,a.depth);jb=n.call(this,Pa,a,0);P.uniform4f(Yc.location,jb[0],jb[1],jb[2],jb[3]);
P.uniform1f(Q.location,a.dashLength);P.uniform1f(O.location,a.opacity);(wa=a.dashTexture)&&"framebuffer"===wa._reglType&&(wa=wa.color[0]);cc=wa._texture;P.uniform1i(V.location,cc.bind());(Da=L.elements)?P.bindBuffer(34963,Da.buffer.buffer):ja.currentVAO&&(Da=I.getElements(ja.currentVAO.elements))&&P.bindBuffer(34963,Da.buffer.buffer);rb=a.count;0<rb?Da?J.drawElementsInstancedANGLE(5,4,Da.type,0<<(Da.type-5121>>1),rb):J.drawArraysInstancedANGLE(5,0,4,rb):0>rb&&(Da?P.drawElements(5,4,Da.type,0<<(Da.type-
5121>>1)):P.drawArrays(5,0,4));Z.dirty=!0;ja.setVAO(null);Pa.viewportWidth=B;Pa.viewportHeight=z;ka&&(b.cpuTime+=performance.now()-u);ha&&la.destroyStream(R);yd&&la.destroyStream(rd);Dd&&la.destroyStream(od);Wb&&la.destroyStream(Ve);Rc&&la.destroyStream(ac);cc.unbind()},scope:function(a,f,g){var h,k,m,p,n,v,A,N,F,H,J,I,u,S,P,ha,Q,V,U,Y,ia,T,fa,ma,O,ea,ja,C,hc,Ca,oa,qa,wd,ra,wc,Gb,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,Lc,fc,db,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xa,ub,Ra,Sb,eb,cb,Wb,na,tc,Ob,kb,Pb,Ma,pb,vb,ib,Na,yc,Qb,
Wc,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,bc,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,pc,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Gf,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,ve,ue,Yc,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,Pe,Ke;h=a.viewport;k=h.x|0;m=h.y|0;p="width"in h?h.width|0:Pa.framebufferWidth-
k;n="height"in h?h.height|0:Pa.framebufferHeight-m;v=Pa.viewportWidth;Pa.viewportWidth=p;A=Pa.viewportHeight;Pa.viewportHeight=n;N=B[0];B[0]=k;F=B[1];B[1]=m;H=B[2];B[2]=p;J=B[3];B[3]=n;I=ba[0];ba[0]=0;u=ba[1];ba[1]=0;S=ba[2];ba[2]=0;P=ba[3];ba[3]=0;ha=$a.blend_enable;$a.blend_enable=!0;Q=La[0];La[0]=32774;V=La[1];La[1]=32774;U=Ua[0];Ua[0]=770;Y=Ua[1];Ua[1]=771;ia=Ua[2];Ua[2]=773;T=Ua[3];Ua[3]=1;fa=e.call(this,Pa,a,g);ma=$a.depth_enable;$a.depth_enable=fa;O=a.viewport;ea=O.x|0;ja=O.y|0;C="width"in
O?O.width|0:Pa.framebufferWidth-ea;hc="height"in O?O.height|0:Pa.framebufferHeight-ja;Ca=X[0];X[0]=ea;oa=X[1];X[1]=ja;qa=X[2];X[2]=C;wd=X[3];X[3]=hc;ra=$a.scissor_enable;$a.scissor_enable=!0;wc=$a.stencil_enable;$a.stencil_enable=!1;if(Gb=Z.profile)gd=performance.now(),b.count++;Mc=L.offset;L.offset=0;nc=L.count;L.count=4;ab=a.count;Cc=L.instances;L.instances=ab;Db=L.primitive;L.primitive=5;mc=a.dashLength;Sa=y[23];y[23]=mc;ic=a.dashTexture;Zb=y[24];y[24]=ic;Lc=a.depth;fc=y[22];y[22]=Lc;db=a.id;Dc=
y[31];y[31]=db;Vb=a.miterLimit;xc=y[32];y[32]=Vb;Sc=q.call(this,Pa,a,g);Ka=y[33];y[33]=Sc;Eb=a.opacity;Wa=y[10];y[10]=Eb;ya=Pa.pixelRatio;xa=y[34];y[34]=ya;ub=a.scale;Ra=y[6];y[6]=ub;Sb=a.scaleFract;eb=y[7];y[7]=Sb;cb=a.thickness;Wb=y[21];y[21]=cb;na=a.translate;tc=y[8];y[8]=na;Ob=a.translateFract;kb=y[9];y[9]=Ob;Pb=w.call(this,Pa,a,g);Ma=y[3];y[3]=Pb;aa.buffer=a.positionBuffer;pb=!1;vb=null;ib=0;Na=!1;Qb=yc=0;Wc=1;fb=0;kc=5126;mb=lb=ac=Rc=0;Ub(aa)?(pb=!0,vb=la.createStream(34962,aa),kc=vb.dtype):
(vb=la.getBuffer(aa))?kc=vb.dtype:"constant"in aa?(Wc=2,"number"===typeof aa.constant?(ac=aa.constant,lb=mb=Rc=0):(ac=0<aa.constant.length?aa.constant[0]:0,lb=1<aa.constant.length?aa.constant[1]:0,mb=2<aa.constant.length?aa.constant[2]:0,Rc=3<aa.constant.length?aa.constant[3]:0)):(vb=Ub(aa.buffer)?la.createStream(34962,aa.buffer):la.getBuffer(aa.buffer),kc="type"in aa?sa[aa.type]:vb.dtype,Na=!!aa.normalized,Qb=aa.size|0,yc=aa.offset|0,fb=aa.stride|0,ib=aa.divisor|0);ta=da.buffer;da.buffer=vb;qb=da.divisor;
da.divisor=ib;ua=da.normalized;da.normalized=Na;Ta=da.offset;da.offset=yc;bb=da.size;da.size=Qb;za=da.state;da.state=Wc;gb=da.stride;da.stride=fb;Ia=da.type;da.type=kc;Bb=da.w;da.w=Rc;Ab=da.x;da.x=ac;Qa=da.y;da.y=lb;uc=da.z;da.z=mb;ga.buffer=a.positionFractBuffer;Ib=!1;Za=null;Rb=0;va=!1;Ja=kd=0;Lb=1;hb=0;jb=5126;rb=Da=cc=wa=0;Ub(ga)?(Ib=!0,Za=la.createStream(34962,ga),jb=Za.dtype):(Za=la.getBuffer(ga))?jb=Za.dtype:"constant"in ga?(Lb=2,"number"===typeof ga.constant?(cc=ga.constant,Da=rb=wa=0):(cc=
0<ga.constant.length?ga.constant[0]:0,Da=1<ga.constant.length?ga.constant[1]:0,rb=2<ga.constant.length?ga.constant[2]:0,wa=3<ga.constant.length?ga.constant[3]:0)):(Za=Ub(ga.buffer)?la.createStream(34962,ga.buffer):la.getBuffer(ga.buffer),jb="type"in ga?sa[ga.type]:Za.dtype,va=!!ga.normalized,Ja=ga.size|0,kd=ga.offset|0,hb=ga.stride|0,Rb=ga.divisor|0);sb=l.buffer;l.buffer=Za;Xa=l.divisor;l.divisor=Rb;Ya=l.normalized;l.normalized=va;lc=l.offset;l.offset=kd;vc=l.size;l.size=Ja;rc=l.state;l.state=Lb;
Va=l.stride;l.stride=hb;Xb=l.type;l.type=jb;Gc=l.w;l.w=wa;Ea=l.x;l.x=cc;zc=l.y;l.y=Da;Oa=l.z;l.z=rb;pa.buffer=a.positionBuffer;Aa=!1;nb=null;wb=0;Cb=!1;sc=tb=0;xb=1;ld=0;oc=5126;id=hd=Nc=bc=0;Ub(pa)?(Aa=!0,nb=la.createStream(34962,pa),oc=nb.dtype):(nb=la.getBuffer(pa))?oc=nb.dtype:"constant"in pa?(xb=2,"number"===typeof pa.constant?(Nc=pa.constant,hd=id=bc=0):(Nc=0<pa.constant.length?pa.constant[0]:0,hd=1<pa.constant.length?pa.constant[1]:0,id=2<pa.constant.length?pa.constant[2]:0,bc=3<pa.constant.length?
pa.constant[3]:0)):(nb=Ub(pa.buffer)?la.createStream(34962,pa.buffer):la.getBuffer(pa.buffer),oc="type"in pa?sa[pa.type]:nb.dtype,Cb=!!pa.normalized,sc=pa.size|0,tb=pa.offset|0,ld=pa.stride|0,wb=pa.divisor|0);Tb=E.buffer;E.buffer=nb;$b=E.divisor;E.divisor=wb;Mb=E.normalized;E.normalized=Cb;Fa=E.offset;E.offset=tb;Yb=E.size;E.size=sc;ob=E.state;E.state=xb;yb=E.stride;E.stride=ld;Kb=E.type;E.type=oc;Nb=E.w;E.w=bc;dc=E.x;E.x=Nc;gc=E.y;E.y=hd;pc=E.z;E.z=id;G.buffer=a.positionFractBuffer;Ec=!1;Fc=null;
Hc=0;Oc=!1;Uc=bd=0;Pc=1;Jb=0;Fb=5126;ec=Vc=Jc=Qc=0;Ub(G)?(Ec=!0,Fc=la.createStream(34962,G),Fb=Fc.dtype):(Fc=la.getBuffer(G))?Fb=Fc.dtype:"constant"in G?(Pc=2,"number"===typeof G.constant?(Jc=G.constant,Vc=ec=Qc=0):(Jc=0<G.constant.length?G.constant[0]:0,Vc=1<G.constant.length?G.constant[1]:0,ec=2<G.constant.length?G.constant[2]:0,Qc=3<G.constant.length?G.constant[3]:0)):(Fc=Ub(G.buffer)?la.createStream(34962,G.buffer):la.getBuffer(G.buffer),Fb="type"in G?sa[G.type]:Fc.dtype,Oc=!!G.normalized,Uc=
G.size|0,bd=G.offset|0,Jb=G.stride|0,Hc=G.divisor|0);Zc=r.buffer;r.buffer=Fc;dd=r.divisor;r.divisor=Hc;pd=r.normalized;r.normalized=Oc;ne=r.offset;r.offset=bd;$c=r.size;r.size=Uc;Gf=r.state;r.state=Pc;Vd=r.stride;r.stride=Jb;he=r.type;r.type=Fb;Ie=r.w;r.w=Qc;ke=r.x;r.x=Jc;Gd=r.y;r.y=Vc;Ed=r.z;r.z=ec;x.buffer=a.colorBuffer;fd=!1;Ic=null;qd=0;jd=!1;md=cd=0;Cd=1;zd=0;ve=5126;ce=le=Yc=ue=0;Ub(x)?(fd=!0,Ic=la.createStream(34962,x),ve=Ic.dtype):(Ic=la.getBuffer(x))?ve=Ic.dtype:"constant"in x?(Cd=2,"number"===
typeof x.constant?(Yc=x.constant,le=ce=ue=0):(Yc=0<x.constant.length?x.constant[0]:0,le=1<x.constant.length?x.constant[1]:0,ce=2<x.constant.length?x.constant[2]:0,ue=3<x.constant.length?x.constant[3]:0)):(Ic=Ub(x.buffer)?la.createStream(34962,x.buffer):la.getBuffer(x.buffer),ve="type"in x?sa[x.type]:Ic.dtype,jd=!!x.normalized,md=x.size|0,cd=x.offset|0,zd=x.stride|0,qd=x.divisor|0);ae=D.buffer;D.buffer=Ic;oe=D.divisor;D.divisor=qd;Zd=D.normalized;D.normalized=jd;fe=D.offset;D.offset=cd;Ac=D.size;D.size=
md;Xc=D.state;D.state=Cd;pe=D.stride;D.stride=zd;ie=D.type;D.type=ve;Fd=D.w;D.w=ue;Id=D.x;D.x=Yc;Kd=D.y;D.y=le;Ld=D.z;D.z=ce;ge=K.buffer;K.buffer=d;Te=K.divisor;K.divisor=0;we=K.normalized;K.normalized=!1;me=K.offset;K.offset=0;Ne=K.size;K.size=0;Oe=K.state;K.state=1;Je=K.stride;K.stride=8;qe=K.type;K.type=5126;ze=K.w;K.w=0;Ce=K.x;K.x=0;De=K.y;K.y=0;Ee=K.z;K.z=0;Ae=z.buffer;z.buffer=c;Hd=z.divisor;z.divisor=0;Od=z.normalized;z.normalized=!1;Wd=z.offset;z.offset=4;$d=z.size;z.size=0;Fe=z.state;z.state=
1;Bd=z.stride;z.stride=8;Md=z.type;z.type=5126;xe=z.w;z.w=0;Ge=z.x;z.x=0;ff=z.y;z.y=0;Ye=z.z;z.z=0;Pe=R.vert;R.vert=20;Ke=R.frag;R.frag=19;Z.dirty=!0;f(Pa,a,g);Pa.viewportWidth=v;Pa.viewportHeight=A;B[0]=N;B[1]=F;B[2]=H;B[3]=J;ba[0]=I;ba[1]=u;ba[2]=S;ba[3]=P;$a.blend_enable=ha;La[0]=Q;La[1]=V;Ua[0]=U;Ua[1]=Y;Ua[2]=ia;Ua[3]=T;$a.depth_enable=ma;X[0]=Ca;X[1]=oa;X[2]=qa;X[3]=wd;$a.scissor_enable=ra;$a.stencil_enable=wc;Gb&&(b.cpuTime+=performance.now()-gd);L.offset=Mc;L.count=nc;L.instances=Cc;L.primitive=
Db;y[23]=Sa;y[24]=Zb;y[22]=fc;y[31]=Dc;y[32]=xc;y[33]=Ka;y[10]=Wa;y[34]=xa;y[6]=Ra;y[7]=eb;y[21]=Wb;y[8]=tc;y[9]=kb;y[3]=Ma;pb&&la.destroyStream(vb);da.buffer=ta;da.divisor=qb;da.normalized=ua;da.offset=Ta;da.size=bb;da.state=za;da.stride=gb;da.type=Ia;da.w=Bb;da.x=Ab;da.y=Qa;da.z=uc;Ib&&la.destroyStream(Za);l.buffer=sb;l.divisor=Xa;l.normalized=Ya;l.offset=lc;l.size=vc;l.state=rc;l.stride=Va;l.type=Xb;l.w=Gc;l.x=Ea;l.y=zc;l.z=Oa;Aa&&la.destroyStream(nb);E.buffer=Tb;E.divisor=$b;E.normalized=Mb;E.offset=
Fa;E.size=Yb;E.state=ob;E.stride=yb;E.type=Kb;E.w=Nb;E.x=dc;E.y=gc;E.z=pc;Ec&&la.destroyStream(Fc);r.buffer=Zc;r.divisor=dd;r.normalized=pd;r.offset=ne;r.size=$c;r.state=Gf;r.stride=Vd;r.type=he;r.w=Ie;r.x=ke;r.y=Gd;r.z=Ed;fd&&la.destroyStream(Ic);D.buffer=ae;D.divisor=oe;D.normalized=Zd;D.offset=fe;D.size=Ac;D.state=Xc;D.stride=pe;D.type=ie;D.w=Fd;D.x=Id;D.y=Kd;D.z=Ld;K.buffer=ge;K.divisor=Te;K.normalized=we;K.offset=me;K.size=Ne;K.state=Oe;K.stride=Je;K.type=qe;K.w=ze;K.x=Ce;K.y=De;K.z=Ee;z.buffer=
Ae;z.divisor=Hd;z.normalized=Od;z.offset=Wd;z.size=$d;z.state=Fe;z.stride=Bd;z.type=Md;z.w=xe;z.x=Ge;z.y=ff;z.z=Ye;R.vert=Pe;R.frag=Ke;Z.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,b,g,h,d,c,n,e,q,w,da,l,E,r,D,K,z,u,C,J,ma,p,v,k,S,Q,V,A,cb,H,O,f,m,T,ra,na,Yc,pc,la,Pa,Z){var L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa,fc,hc,tc,wd,wc,X,N,ia,Ca,Gb,Lc,Wc,
F,B,fa,sa,aa,ga,pa,G,x,ca,M,Ba,Ga,t;L=a.attributes;I=a.buffer;U=a.context;qa=a.current;P=a.draw;Ub=a.elements;$a=a.extensions;R=a.framebuffer;y=a.gl;ja=a.isBufferArgs;ba=a.next;xa=a.shader;La=a.uniforms;bc=a.vao;Ua=ba.blend_color;Y=qa.blend_color;kb=ba.blend_equation;ea=qa.blend_equation;oa=ba.blend_func;fc=qa.blend_func;hc=ba.colorMask;tc=qa.colorMask;wd=ba.depth_range;wc=qa.depth_range;X=ba.polygonOffset_offset;N=qa.polygonOffset_offset;ia=ba.sample_coverage;Ca=qa.sample_coverage;Gb=ba.scissor_box;
Lc=qa.scissor_box;Wc=ba.stencil_func;F=qa.stencil_func;B=ba.stencil_opBack;fa=qa.stencil_opBack;sa=ba.stencil_opFront;aa=qa.stencil_opFront;ga=ba.viewport;pa=qa.viewport;G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};x={divisor:1,offset:0,stride:4};ca={divisor:1,offset:8,stride:8};M={divisor:1,offset:4,stride:4};Ba={divisor:1,offset:16,stride:8};Ga={divisor:1,offset:24,stride:8};t={divisor:1,offset:0,stride:8};return{batch:function(a,e){var g,h,l,
n,q,r;g=R.next;g!==R.cur&&(g?y.bindFramebuffer(36160,g.framebuffer):y.bindFramebuffer(36160,null),R.cur=g);if(qa.dirty){var z,D,E,u,w,K,da,ka,C,ga,ha,oa,Gb,xa,La,Rd,Sd,Ua,kb,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab;z=ba.dither;z!==qa.dither&&(z?y.enable(3024):y.disable(3024),qa.dither=z);D=ba.depth_func;D!==qa.depth_func&&(y.depthFunc(D),qa.depth_func=D);E=wd[0];u=wd[1];if(E!==wc[0]||u!==wc[1])y.depthRange(E,u),wc[0]=E,wc[1]=u;w=ba.depth_mask;w!==qa.depth_mask&&(y.depthMask(w),qa.depth_mask=w);K=hc[0];da=
hc[1];ka=hc[2];C=hc[3];if(K!==tc[0]||da!==tc[1]||ka!==tc[2]||C!==tc[3])y.colorMask(K,da,ka,C),tc[0]=K,tc[1]=da,tc[2]=ka,tc[3]=C;ga=ba.frontFace;ga!==qa.frontFace&&(y.frontFace(ga),qa.frontFace=ga);ha=ba.lineWidth;ha!==qa.lineWidth&&(y.lineWidth(ha),qa.lineWidth=ha);oa=ba.polygonOffset_enable;oa!==qa.polygonOffset_enable&&(oa?y.enable(32823):y.disable(32823),qa.polygonOffset_enable=oa);Gb=X[0];xa=X[1];if(Gb!==N[0]||xa!==N[1])y.polygonOffset(Gb,xa),N[0]=Gb,N[1]=xa;La=ba.sample_alpha;La!==qa.sample_alpha&&
(La?y.enable(32926):y.disable(32926),qa.sample_alpha=La);Rd=ba.sample_enable;Rd!==qa.sample_enable&&(Rd?y.enable(32928):y.disable(32928),qa.sample_enable=Rd);Sd=ia[0];Ua=ia[1];if(Sd!==Ca[0]||Ua!==Ca[1])y.sampleCoverage(Sd,Ua),Ca[0]=Sd,Ca[1]=Ua;kb=ba.stencil_mask;kb!==qa.stencil_mask&&(y.stencilMask(kb),qa.stencil_mask=kb);td=Wc[0];nd=Wc[1];yd=Wc[2];if(td!==F[0]||nd!==F[1]||yd!==F[2])y.stencilFunc(td,nd,yd),F[0]=td,F[1]=nd,F[2]=yd;rd=sa[0];ed=sa[1];Bc=sa[2];ud=sa[3];if(rd!==aa[0]||ed!==aa[1]||Bc!==
aa[2]||ud!==aa[3])y.stencilOpSeparate(rd,ed,Bc,ud),aa[0]=rd,aa[1]=ed,aa[2]=Bc,aa[3]=ud;gd=B[0];Mc=B[1];nc=B[2];ab=B[3];if(gd!==fa[0]||Mc!==fa[1]||nc!==fa[2]||ab!==fa[3])y.stencilOpSeparate(gd,Mc,nc,ab),fa[0]=gd,fa[1]=Mc,fa[2]=nc,fa[3]=ab}y.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;y.enable(3042);qa.blend_enable=!0;y.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;y.blendFuncSeparate(770,771,773,1);fc[0]=770;fc[1]=771;fc[2]=773;fc[3]=1;y.enable(2884);qa.cull_enable=!0;y.cullFace(1029);
qa.cull_face=1029;y.enable(3089);qa.scissor_enable=!0;y.disable(2960);qa.stencil_enable=!1;if(h=qa.profile)l=performance.now(),b.count+=e;y.useProgram(J.program);n=$a.angle_instanced_arrays;var Cc,Db,mc,Sa,ic;bc.setVAO(null);Cc=O.location;Db=L[Cc];Db.buffer||y.enableVertexAttribArray(Cc);if(5126!==Db.type||1!==Db.size||Db.buffer!==d||!1!==Db.normalized||0!==Db.offset||8!==Db.stride)y.bindBuffer(34962,d.buffer),y.vertexAttribPointer(Cc,1,5126,!1,8,0),Db.type=5126,Db.size=1,Db.buffer=d,Db.normalized=
!1,Db.offset=0,Db.stride=8;0!==Db.divisor&&(n.vertexAttribDivisorANGLE(Cc,0),Db.divisor=0);mc=f.location;Sa=L[mc];Sa.buffer||y.enableVertexAttribArray(mc);if(5126!==Sa.type||1!==Sa.size||Sa.buffer!==c||!1!==Sa.normalized||4!==Sa.offset||8!==Sa.stride)y.bindBuffer(34962,c.buffer),y.vertexAttribPointer(mc,1,5126,!1,8,4),Sa.type=5126,Sa.size=1,Sa.buffer=c,Sa.normalized=!1,Sa.offset=4,Sa.stride=8;0!==Sa.divisor&&(n.vertexAttribDivisorANGLE(mc,0),Sa.divisor=0);(ic=P.elements)?y.bindBuffer(34963,ic.buffer.buffer):
bc.currentVAO&&(ic=Ub.getElements(bc.currentVAO.elements))&&y.bindBuffer(34963,ic.buffer.buffer);for(q=0;q<e;++q){r=a[q];var Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,db,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,vf,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Gf,Vd,he,Ie,ke,Gd,Ed,fd,
Ic,qd,jd,cd,md,Cd,zd,ve,ue,We,le,ce,ae,oe,Zd,fe,Ac;Zb=r.viewport;ad=Zb.x|0;Dd=Zb.y|0;od="width"in Zb?Zb.width|0:U.framebufferWidth-ad;Dc="height"in Zb?Zb.height|0:U.framebufferHeight-Dd;Vb=U.viewportWidth;U.viewportWidth=od;xc=U.viewportHeight;U.viewportHeight=Dc;y.viewport(ad,Dd,od,Dc);pa[0]=ad;pa[1]=Dd;pa[2]=od;pa[3]=Dc;(Sc=ma.call(this,U,r,q))?y.enable(2929):y.disable(2929);qa.depth_enable=Sc;Ka=r.viewport;Eb=Ka.x|0;Wa=Ka.y|0;ya="width"in Ka?Ka.width|0:U.framebufferWidth-Eb;xd="height"in Ka?Ka.height|
0:U.framebufferHeight-Wa;y.scissor(Eb,Wa,ya,xd);Lc[0]=Eb;Lc[1]=Wa;Lc[2]=ya;Lc[3]=xd;ca.buffer=r.positionBuffer;ub=!1;Ra=null;Sb=0;eb=!1;Wb=Tc=0;db=1;jc=0;Ob=5126;pb=Ma=Pb=vd=0;ja(ca)?(ub=!0,Ra=I.createStream(34962,ca),Ob=Ra.dtype):(Ra=I.getBuffer(ca))?Ob=Ra.dtype:"constant"in ca?(db=2,"number"===typeof ca.constant?(Pb=ca.constant,Ma=pb=vd=0):(Pb=0<ca.constant.length?ca.constant[0]:0,Ma=1<ca.constant.length?ca.constant[1]:0,pb=2<ca.constant.length?ca.constant[2]:0,vd=3<ca.constant.length?ca.constant[3]:
0)):(Ra=ja(ca.buffer)?I.createStream(34962,ca.buffer):I.getBuffer(ca.buffer),Ob="type"in ca?G[ca.type]:Ra.dtype,eb=!!ca.normalized,Wb=ca.size|0,Tc=ca.offset|0,jc=ca.stride|0,Sb=ca.divisor|0);vb=S.location;ib=L[vb];if(1===db){ib.buffer||y.enableVertexAttribArray(vb);Na=Wb||2;if(ib.type!==Ob||ib.size!==Na||ib.buffer!==Ra||ib.normalized!==eb||ib.offset!==Tc||ib.stride!==jc)y.bindBuffer(34962,Ra.buffer),y.vertexAttribPointer(vb,Na,Ob,eb,jc,Tc),ib.type=Ob,ib.size=Na,ib.buffer=Ra,ib.normalized=eb,ib.offset=
Tc,ib.stride=jc;ib.divisor!==Sb&&(n.vertexAttribDivisorANGLE(vb,Sb),ib.divisor=Sb)}else if(ib.buffer&&(y.disableVertexAttribArray(vb),ib.buffer=null),ib.x!==Pb||ib.y!==Ma||ib.z!==pb||ib.w!==vd)y.vertexAttrib4f(vb,Pb,Ma,pb,vd),ib.x=Pb,ib.y=Ma,ib.z=pb,ib.w=vd;Ba.buffer=r.positionBuffer;yc=!1;Qb=null;sd=0;fb=!1;Rc=kc=0;ac=1;lb=0;mb=5126;Ta=ua=qb=ta=0;ja(Ba)?(yc=!0,Qb=I.createStream(34962,Ba),mb=Qb.dtype):(Qb=I.getBuffer(Ba))?mb=Qb.dtype:"constant"in Ba?(ac=2,"number"===typeof Ba.constant?(qb=Ba.constant,
ua=Ta=ta=0):(qb=0<Ba.constant.length?Ba.constant[0]:0,ua=1<Ba.constant.length?Ba.constant[1]:0,Ta=2<Ba.constant.length?Ba.constant[2]:0,ta=3<Ba.constant.length?Ba.constant[3]:0)):(Qb=ja(Ba.buffer)?I.createStream(34962,Ba.buffer):I.getBuffer(Ba.buffer),mb="type"in Ba?G[Ba.type]:Qb.dtype,fb=!!Ba.normalized,Rc=Ba.size|0,kc=Ba.offset|0,lb=Ba.stride|0,sd=Ba.divisor|0);bb=V.location;za=L[bb];if(1===ac){za.buffer||y.enableVertexAttribArray(bb);gb=Rc||2;if(za.type!==mb||za.size!==gb||za.buffer!==Qb||za.normalized!==
fb||za.offset!==kc||za.stride!==lb)y.bindBuffer(34962,Qb.buffer),y.vertexAttribPointer(bb,gb,mb,fb,lb,kc),za.type=mb,za.size=gb,za.buffer=Qb,za.normalized=fb,za.offset=kc,za.stride=lb;za.divisor!==sd&&(n.vertexAttribDivisorANGLE(bb,sd),za.divisor=sd)}else if(za.buffer&&(y.disableVertexAttribArray(bb),za.buffer=null),za.x!==qb||za.y!==ua||za.z!==Ta||za.w!==ta)y.vertexAttrib4f(bb,qb,ua,Ta,ta),za.x=qb,za.y=ua,za.z=Ta,za.w=ta;Ga.buffer=r.positionBuffer;Ia=!1;Bb=null;Ab=0;Qa=!1;Ib=uc=0;Za=1;Rb=0;va=5126;
hb=Lb=Ja=kd=0;ja(Ga)?(Ia=!0,Bb=I.createStream(34962,Ga),va=Bb.dtype):(Bb=I.getBuffer(Ga))?va=Bb.dtype:"constant"in Ga?(Za=2,"number"===typeof Ga.constant?(Ja=Ga.constant,Lb=hb=kd=0):(Ja=0<Ga.constant.length?Ga.constant[0]:0,Lb=1<Ga.constant.length?Ga.constant[1]:0,hb=2<Ga.constant.length?Ga.constant[2]:0,kd=3<Ga.constant.length?Ga.constant[3]:0)):(Bb=ja(Ga.buffer)?I.createStream(34962,Ga.buffer):I.getBuffer(Ga.buffer),va="type"in Ga?G[Ga.type]:Bb.dtype,Qa=!!Ga.normalized,Ib=Ga.size|0,uc=Ga.offset|
0,Rb=Ga.stride|0,Ab=Ga.divisor|0);jb=ra.location;wa=L[jb];if(1===Za){wa.buffer||y.enableVertexAttribArray(jb);cc=Ib||2;if(wa.type!==va||wa.size!==cc||wa.buffer!==Bb||wa.normalized!==Qa||wa.offset!==uc||wa.stride!==Rb)y.bindBuffer(34962,Bb.buffer),y.vertexAttribPointer(jb,cc,va,Qa,Rb,uc),wa.type=va,wa.size=cc,wa.buffer=Bb,wa.normalized=Qa,wa.offset=uc,wa.stride=Rb;wa.divisor!==Ab&&(n.vertexAttribDivisorANGLE(jb,Ab),wa.divisor=Ab)}else if(wa.buffer&&(y.disableVertexAttribArray(jb),wa.buffer=null),wa.x!==
Ja||wa.y!==Lb||wa.z!==hb||wa.w!==kd)y.vertexAttrib4f(jb,Ja,Lb,hb,kd),wa.x=Ja,wa.y=Lb,wa.z=hb,wa.w=kd;t.buffer=r.positionBuffer;Da=!1;rb=null;sb=0;Xa=!1;lc=Ya=0;vc=1;rc=0;Va=5126;zc=Ea=Gc=Xb=0;ja(t)?(Da=!0,rb=I.createStream(34962,t),Va=rb.dtype):(rb=I.getBuffer(t))?Va=rb.dtype:"constant"in t?(vc=2,"number"===typeof t.constant?(Gc=t.constant,Ea=zc=Xb=0):(Gc=0<t.constant.length?t.constant[0]:0,Ea=1<t.constant.length?t.constant[1]:0,zc=2<t.constant.length?t.constant[2]:0,Xb=3<t.constant.length?t.constant[3]:
0)):(rb=ja(t.buffer)?I.createStream(34962,t.buffer):I.getBuffer(t.buffer),Va="type"in t?G[t.type]:rb.dtype,Xa=!!t.normalized,lc=t.size|0,Ya=t.offset|0,rc=t.stride|0,sb=t.divisor|0);Oa=Yc.location;Aa=L[Oa];if(1===vc){Aa.buffer||y.enableVertexAttribArray(Oa);nb=lc||2;if(Aa.type!==Va||Aa.size!==nb||Aa.buffer!==rb||Aa.normalized!==Xa||Aa.offset!==Ya||Aa.stride!==rc)y.bindBuffer(34962,rb.buffer),y.vertexAttribPointer(Oa,nb,Va,Xa,rc,Ya),Aa.type=Va,Aa.size=nb,Aa.buffer=rb,Aa.normalized=Xa,Aa.offset=Ya,Aa.stride=
rc;Aa.divisor!==sb&&(n.vertexAttribDivisorANGLE(Oa,sb),Aa.divisor=sb)}else if(Aa.buffer&&(y.disableVertexAttribArray(Oa),Aa.buffer=null),Aa.x!==Gc||Aa.y!==Ea||Aa.z!==zc||Aa.w!==Xb)y.vertexAttrib4f(Oa,Gc,Ea,zc,Xb),Aa.x=Gc,Aa.y=Ea,Aa.z=zc,Aa.w=Xb;x.buffer=r.colorBuffer;wb=!1;Cb=null;tb=0;sc=!1;ld=xb=0;oc=1;ee=0;Nc=5126;$b=Tb=id=hd=0;ja(x)?(wb=!0,Cb=I.createStream(34962,x),Nc=Cb.dtype):(Cb=I.getBuffer(x))?Nc=Cb.dtype:"constant"in x?(oc=2,"number"===typeof x.constant?(id=x.constant,Tb=$b=hd=0):(id=0<
x.constant.length?x.constant[0]:0,Tb=1<x.constant.length?x.constant[1]:0,$b=2<x.constant.length?x.constant[2]:0,hd=3<x.constant.length?x.constant[3]:0)):(Cb=ja(x.buffer)?I.createStream(34962,x.buffer):I.getBuffer(x.buffer),Nc="type"in x?G[x.type]:Cb.dtype,sc=!!x.normalized,ld=x.size|0,xb=x.offset|0,ee=x.stride|0,tb=x.divisor|0);Mb=k.location;Fa=L[Mb];if(1===oc){Fa.buffer||y.enableVertexAttribArray(Mb);Yb=ld||4;if(Fa.type!==Nc||Fa.size!==Yb||Fa.buffer!==Cb||Fa.normalized!==sc||Fa.offset!==xb||Fa.stride!==
ee)y.bindBuffer(34962,Cb.buffer),y.vertexAttribPointer(Mb,Yb,Nc,sc,ee,xb),Fa.type=Nc,Fa.size=Yb,Fa.buffer=Cb,Fa.normalized=sc,Fa.offset=xb,Fa.stride=ee;Fa.divisor!==tb&&(n.vertexAttribDivisorANGLE(Mb,tb),Fa.divisor=tb)}else if(Fa.buffer&&(y.disableVertexAttribArray(Mb),Fa.buffer=null),Fa.x!==id||Fa.y!==Tb||Fa.z!==$b||Fa.w!==hd)y.vertexAttrib4f(Mb,id,Tb,$b,hd),Fa.x=id,Fa.y=Tb,Fa.z=$b,Fa.w=hd;M.buffer=r.colorBuffer;ob=!1;yb=null;Kb=0;Nb=!1;gc=dc=0;vf=1;Ec=0;Fc=5126;Uc=bd=Oc=Hc=0;ja(M)?(ob=!0,yb=I.createStream(34962,
M),Fc=yb.dtype):(yb=I.getBuffer(M))?Fc=yb.dtype:"constant"in M?(vf=2,"number"===typeof M.constant?(Oc=M.constant,bd=Uc=Hc=0):(Oc=0<M.constant.length?M.constant[0]:0,bd=1<M.constant.length?M.constant[1]:0,Uc=2<M.constant.length?M.constant[2]:0,Hc=3<M.constant.length?M.constant[3]:0)):(yb=ja(M.buffer)?I.createStream(34962,M.buffer):I.getBuffer(M.buffer),Fc="type"in M?G[M.type]:yb.dtype,Nb=!!M.normalized,gc=M.size|0,dc=M.offset|0,Ec=M.stride|0,Kb=M.divisor|0);Pc=Q.location;Jb=L[Pc];if(1===vf){Jb.buffer||
y.enableVertexAttribArray(Pc);Fb=gc||4;if(Jb.type!==Fc||Jb.size!==Fb||Jb.buffer!==yb||Jb.normalized!==Nb||Jb.offset!==dc||Jb.stride!==Ec)y.bindBuffer(34962,yb.buffer),y.vertexAttribPointer(Pc,Fb,Fc,Nb,Ec,dc),Jb.type=Fc,Jb.size=Fb,Jb.buffer=yb,Jb.normalized=Nb,Jb.offset=dc,Jb.stride=Ec;Jb.divisor!==Kb&&(n.vertexAttribDivisorANGLE(Pc,Kb),Jb.divisor=Kb)}else if(Jb.buffer&&(y.disableVertexAttribArray(Pc),Jb.buffer=null),Jb.x!==Oc||Jb.y!==bd||Jb.z!==Uc||Jb.w!==Hc)y.vertexAttrib4f(Pc,Oc,bd,Uc,Hc),Jb.x=
Oc,Jb.y=bd,Jb.z=Uc,Jb.w=Hc;Qc=r.scale;Jc=Qc[0];ec=Qc[1];q&&Vc===Jc&&Zc===ec||(Vc=Jc,Zc=ec,y.uniform2f(pc.location,Jc,ec));dd=r.translate;pd=dd[0];$c=dd[1];q&&ne===pd&&Gf===$c||(ne=pd,Gf=$c,y.uniform2f(Pa.location,pd,$c));Vd=r.thickness;q&&he===Vd||(he=Vd,y.uniform1f(la.location,Vd));Ie=r.depth;q&&ke===Ie||(ke=Ie,y.uniform1f(H.location,Ie));Gd=p.call(this,U,r,q);Ed=Gd[0];Ic=Gd[1];jd=Gd[2];md=Gd[3];q&&fd===Ed&&qd===Ic&&cd===jd&&Cd===md||(fd=Ed,qd=Ic,cd=jd,Cd=md,y.uniform4f(Z.location,Ed,Ic,jd,md));
zd=r.miterLimit;q&&ve===zd||(ve=zd,y.uniform1f(m.location,zd));ue=v.call(this,U,r,q);q&&We===ue||(We=ue,y.uniform1f(T.location,ue));le=r.dashLength;q&&ce===le||(ce=le,y.uniform1f(A.location,le));ae=r.opacity;q&&oe===ae||(oe=ae,y.uniform1f(na.location,ae));(Zd=r.dashTexture)&&"framebuffer"===Zd._reglType&&(Zd=Zd.color[0]);fe=Zd._texture;y.uniform1i(cb.location,fe.bind());Ac=r.count;0<Ac?ic?n.drawElementsInstancedANGLE(5,4,ic.type,0<<(ic.type-5121>>1),Ac):n.drawArraysInstancedANGLE(5,0,4,Ac):0>Ac&&
(ic?y.drawElements(5,4,ic.type,0<<(ic.type-5121>>1)):y.drawArrays(5,0,4));U.viewportWidth=Vb;U.viewportHeight=xc;ub&&I.destroyStream(Ra);yc&&I.destroyStream(Qb);Ia&&I.destroyStream(Bb);Da&&I.destroyStream(rb);wb&&I.destroyStream(Cb);ob&&I.destroyStream(yb);fe.unbind()}qa.dirty=!0;bc.setVAO(null);h&&(b.cpuTime+=performance.now()-l)},draw:function(a){var l,p,q,r,v,z,D,E,u,w,K,da,ka,J,C,ga,ha,ma,oa,Gb,xa,La,Rd,Sd,Ua,kb,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,
ya,xd,ub,Ra,Sb,eb,Tc,Wb,db,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld;l=R.next;l!==R.cur&&(l?y.bindFramebuffer(36160,l.framebuffer):y.bindFramebuffer(36160,null),R.cur=l);if(qa.dirty){var oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,vf,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec;oc=ba.dither;oc!==qa.dither&&(oc?y.enable(3024):y.disable(3024),qa.dither=oc);
ee=ba.depth_func;ee!==qa.depth_func&&(y.depthFunc(ee),qa.depth_func=ee);Nc=wd[0];hd=wd[1];if(Nc!==wc[0]||hd!==wc[1])y.depthRange(Nc,hd),wc[0]=Nc,wc[1]=hd;id=ba.depth_mask;id!==qa.depth_mask&&(y.depthMask(id),qa.depth_mask=id);Tb=hc[0];$b=hc[1];Mb=hc[2];Fa=hc[3];if(Tb!==tc[0]||$b!==tc[1]||Mb!==tc[2]||Fa!==tc[3])y.colorMask(Tb,$b,Mb,Fa),tc[0]=Tb,tc[1]=$b,tc[2]=Mb,tc[3]=Fa;Yb=ba.frontFace;Yb!==qa.frontFace&&(y.frontFace(Yb),qa.frontFace=Yb);ob=ba.lineWidth;ob!==qa.lineWidth&&(y.lineWidth(ob),qa.lineWidth=
ob);yb=ba.polygonOffset_enable;yb!==qa.polygonOffset_enable&&(yb?y.enable(32823):y.disable(32823),qa.polygonOffset_enable=yb);Kb=X[0];Nb=X[1];if(Kb!==N[0]||Nb!==N[1])y.polygonOffset(Kb,Nb),N[0]=Kb,N[1]=Nb;dc=ba.sample_alpha;dc!==qa.sample_alpha&&(dc?y.enable(32926):y.disable(32926),qa.sample_alpha=dc);gc=ba.sample_enable;gc!==qa.sample_enable&&(gc?y.enable(32928):y.disable(32928),qa.sample_enable=gc);vf=ia[0];Ec=ia[1];if(vf!==Ca[0]||Ec!==Ca[1])y.sampleCoverage(vf,Ec),Ca[0]=vf,Ca[1]=Ec;Fc=ba.stencil_mask;
Fc!==qa.stencil_mask&&(y.stencilMask(Fc),qa.stencil_mask=Fc);Hc=Wc[0];Oc=Wc[1];bd=Wc[2];if(Hc!==F[0]||Oc!==F[1]||bd!==F[2])y.stencilFunc(Hc,Oc,bd),F[0]=Hc,F[1]=Oc,F[2]=bd;Uc=sa[0];Pc=sa[1];Jb=sa[2];Fb=sa[3];if(Uc!==aa[0]||Pc!==aa[1]||Jb!==aa[2]||Fb!==aa[3])y.stencilOpSeparate(Uc,Pc,Jb,Fb),aa[0]=Uc,aa[1]=Pc,aa[2]=Jb,aa[3]=Fb;Qc=B[0];Jc=B[1];Vc=B[2];ec=B[3];if(Qc!==fa[0]||Jc!==fa[1]||Vc!==fa[2]||ec!==fa[3])y.stencilOpSeparate(Qc,Jc,Vc,ec),fa[0]=Qc,fa[1]=Jc,fa[2]=Vc,fa[3]=ec}p=a.viewport;q=p.x|0;r=p.y|
0;v="width"in p?p.width|0:U.framebufferWidth-q;z="height"in p?p.height|0:U.framebufferHeight-r;D=U.viewportWidth;U.viewportWidth=v;E=U.viewportHeight;U.viewportHeight=z;y.viewport(q,r,v,z);pa[0]=q;pa[1]=r;pa[2]=v;pa[3]=z;y.blendColor(0,0,0,0);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=0;y.enable(3042);qa.blend_enable=!0;y.blendEquationSeparate(32774,32774);ea[0]=32774;ea[1]=32774;y.blendFuncSeparate(770,771,773,1);fc[0]=770;fc[1]=771;fc[2]=773;fc[3]=1;y.enable(2884);qa.cull_enable=!0;y.cullFace(1029);qa.cull_face=
1029;(u=g.call(this,U,a,0))?y.enable(2929):y.disable(2929);qa.depth_enable=u;w=a.viewport;K=w.x|0;da=w.y|0;ka="width"in w?w.width|0:U.framebufferWidth-K;J="height"in w?w.height|0:U.framebufferHeight-da;y.scissor(K,da,ka,J);Lc[0]=K;Lc[1]=da;Lc[2]=ka;Lc[3]=J;y.enable(3089);qa.scissor_enable=!0;y.disable(2960);qa.stencil_enable=!1;if(C=qa.profile)ga=performance.now(),b.count++;y.useProgram(h.program);ha=$a.angle_instanced_arrays;bc.setVAO(null);ca.buffer=a.positionBuffer;ma=!1;oa=null;Gb=0;xa=!1;Rd=
La=0;Sd=1;Ua=0;kb=5126;rd=yd=nd=td=0;ja(ca)?(ma=!0,oa=I.createStream(34962,ca),kb=oa.dtype):(oa=I.getBuffer(ca))?kb=oa.dtype:"constant"in ca?(Sd=2,"number"===typeof ca.constant?(nd=ca.constant,yd=rd=td=0):(nd=0<ca.constant.length?ca.constant[0]:0,yd=1<ca.constant.length?ca.constant[1]:0,rd=2<ca.constant.length?ca.constant[2]:0,td=3<ca.constant.length?ca.constant[3]:0)):(oa=ja(ca.buffer)?I.createStream(34962,ca.buffer):I.getBuffer(ca.buffer),kb="type"in ca?G[ca.type]:oa.dtype,xa=!!ca.normalized,Rd=
ca.size|0,La=ca.offset|0,Ua=ca.stride|0,Gb=ca.divisor|0);ed=S.location;Bc=L[ed];if(1===Sd){Bc.buffer||y.enableVertexAttribArray(ed);ud=Rd||2;if(Bc.type!==kb||Bc.size!==ud||Bc.buffer!==oa||Bc.normalized!==xa||Bc.offset!==La||Bc.stride!==Ua)y.bindBuffer(34962,oa.buffer),y.vertexAttribPointer(ed,ud,kb,xa,Ua,La),Bc.type=kb,Bc.size=ud,Bc.buffer=oa,Bc.normalized=xa,Bc.offset=La,Bc.stride=Ua;Bc.divisor!==Gb&&(ha.vertexAttribDivisorANGLE(ed,Gb),Bc.divisor=Gb)}else if(Bc.buffer&&(y.disableVertexAttribArray(ed),
Bc.buffer=null),Bc.x!==nd||Bc.y!==yd||Bc.z!==rd||Bc.w!==td)y.vertexAttrib4f(ed,nd,yd,rd,td),Bc.x=nd,Bc.y=yd,Bc.z=rd,Bc.w=td;Ba.buffer=a.positionBuffer;gd=!1;Mc=null;nc=0;ab=!1;Db=Cc=0;mc=1;Sa=0;ic=5126;od=Dd=ad=Zb=0;ja(Ba)?(gd=!0,Mc=I.createStream(34962,Ba),ic=Mc.dtype):(Mc=I.getBuffer(Ba))?ic=Mc.dtype:"constant"in Ba?(mc=2,"number"===typeof Ba.constant?(ad=Ba.constant,Dd=od=Zb=0):(ad=0<Ba.constant.length?Ba.constant[0]:0,Dd=1<Ba.constant.length?Ba.constant[1]:0,od=2<Ba.constant.length?Ba.constant[2]:
0,Zb=3<Ba.constant.length?Ba.constant[3]:0)):(Mc=ja(Ba.buffer)?I.createStream(34962,Ba.buffer):I.getBuffer(Ba.buffer),ic="type"in Ba?G[Ba.type]:Mc.dtype,ab=!!Ba.normalized,Db=Ba.size|0,Cc=Ba.offset|0,Sa=Ba.stride|0,nc=Ba.divisor|0);Dc=V.location;Vb=L[Dc];if(1===mc){Vb.buffer||y.enableVertexAttribArray(Dc);xc=Db||2;if(Vb.type!==ic||Vb.size!==xc||Vb.buffer!==Mc||Vb.normalized!==ab||Vb.offset!==Cc||Vb.stride!==Sa)y.bindBuffer(34962,Mc.buffer),y.vertexAttribPointer(Dc,xc,ic,ab,Sa,Cc),Vb.type=ic,Vb.size=
xc,Vb.buffer=Mc,Vb.normalized=ab,Vb.offset=Cc,Vb.stride=Sa;Vb.divisor!==nc&&(ha.vertexAttribDivisorANGLE(Dc,nc),Vb.divisor=nc)}else if(Vb.buffer&&(y.disableVertexAttribArray(Dc),Vb.buffer=null),Vb.x!==ad||Vb.y!==Dd||Vb.z!==od||Vb.w!==Zb)y.vertexAttrib4f(Dc,ad,Dd,od,Zb),Vb.x=ad,Vb.y=Dd,Vb.z=od,Vb.w=Zb;Ga.buffer=a.positionBuffer;Sc=!1;Ka=null;Eb=0;Wa=!1;xd=ya=0;ub=1;Ra=0;Sb=5126;db=Wb=Tc=eb=0;ja(Ga)?(Sc=!0,Ka=I.createStream(34962,Ga),Sb=Ka.dtype):(Ka=I.getBuffer(Ga))?Sb=Ka.dtype:"constant"in Ga?(ub=
2,"number"===typeof Ga.constant?(Tc=Ga.constant,Wb=db=eb=0):(Tc=0<Ga.constant.length?Ga.constant[0]:0,Wb=1<Ga.constant.length?Ga.constant[1]:0,db=2<Ga.constant.length?Ga.constant[2]:0,eb=3<Ga.constant.length?Ga.constant[3]:0)):(Ka=ja(Ga.buffer)?I.createStream(34962,Ga.buffer):I.getBuffer(Ga.buffer),Sb="type"in Ga?G[Ga.type]:Ka.dtype,Wa=!!Ga.normalized,xd=Ga.size|0,ya=Ga.offset|0,Ra=Ga.stride|0,Eb=Ga.divisor|0);jc=ra.location;Ob=L[jc];if(1===ub){Ob.buffer||y.enableVertexAttribArray(jc);vd=xd||2;if(Ob.type!==
Sb||Ob.size!==vd||Ob.buffer!==Ka||Ob.normalized!==Wa||Ob.offset!==ya||Ob.stride!==Ra)y.bindBuffer(34962,Ka.buffer),y.vertexAttribPointer(jc,vd,Sb,Wa,Ra,ya),Ob.type=Sb,Ob.size=vd,Ob.buffer=Ka,Ob.normalized=Wa,Ob.offset=ya,Ob.stride=Ra;Ob.divisor!==Eb&&(ha.vertexAttribDivisorANGLE(jc,Eb),Ob.divisor=Eb)}else if(Ob.buffer&&(y.disableVertexAttribArray(jc),Ob.buffer=null),Ob.x!==Tc||Ob.y!==Wb||Ob.z!==db||Ob.w!==eb)y.vertexAttrib4f(jc,Tc,Wb,db,eb),Ob.x=Tc,Ob.y=Wb,Ob.z=db,Ob.w=eb;t.buffer=a.positionBuffer;
Pb=!1;Ma=null;pb=0;vb=!1;Na=ib=0;yc=1;Qb=0;sd=5126;ac=Rc=kc=fb=0;ja(t)?(Pb=!0,Ma=I.createStream(34962,t),sd=Ma.dtype):(Ma=I.getBuffer(t))?sd=Ma.dtype:"constant"in t?(yc=2,"number"===typeof t.constant?(kc=t.constant,Rc=ac=fb=0):(kc=0<t.constant.length?t.constant[0]:0,Rc=1<t.constant.length?t.constant[1]:0,ac=2<t.constant.length?t.constant[2]:0,fb=3<t.constant.length?t.constant[3]:0)):(Ma=ja(t.buffer)?I.createStream(34962,t.buffer):I.getBuffer(t.buffer),sd="type"in t?G[t.type]:Ma.dtype,vb=!!t.normalized,
Na=t.size|0,ib=t.offset|0,Qb=t.stride|0,pb=t.divisor|0);lb=Yc.location;mb=L[lb];if(1===yc){mb.buffer||y.enableVertexAttribArray(lb);ta=Na||2;if(mb.type!==sd||mb.size!==ta||mb.buffer!==Ma||mb.normalized!==vb||mb.offset!==ib||mb.stride!==Qb)y.bindBuffer(34962,Ma.buffer),y.vertexAttribPointer(lb,ta,sd,vb,Qb,ib),mb.type=sd,mb.size=ta,mb.buffer=Ma,mb.normalized=vb,mb.offset=ib,mb.stride=Qb;mb.divisor!==pb&&(ha.vertexAttribDivisorANGLE(lb,pb),mb.divisor=pb)}else if(mb.buffer&&(y.disableVertexAttribArray(lb),
mb.buffer=null),mb.x!==kc||mb.y!==Rc||mb.z!==ac||mb.w!==fb)y.vertexAttrib4f(lb,kc,Rc,ac,fb),mb.x=kc,mb.y=Rc,mb.z=ac,mb.w=fb;x.buffer=a.colorBuffer;qb=!1;ua=null;Ta=0;bb=!1;gb=za=0;Ia=1;Bb=0;Ab=5126;Za=Ib=uc=Qa=0;ja(x)?(qb=!0,ua=I.createStream(34962,x),Ab=ua.dtype):(ua=I.getBuffer(x))?Ab=ua.dtype:"constant"in x?(Ia=2,"number"===typeof x.constant?(uc=x.constant,Ib=Za=Qa=0):(uc=0<x.constant.length?x.constant[0]:0,Ib=1<x.constant.length?x.constant[1]:0,Za=2<x.constant.length?x.constant[2]:0,Qa=3<x.constant.length?
x.constant[3]:0)):(ua=ja(x.buffer)?I.createStream(34962,x.buffer):I.getBuffer(x.buffer),Ab="type"in x?G[x.type]:ua.dtype,bb=!!x.normalized,gb=x.size|0,za=x.offset|0,Bb=x.stride|0,Ta=x.divisor|0);Rb=k.location;va=L[Rb];if(1===Ia){va.buffer||y.enableVertexAttribArray(Rb);kd=gb||4;if(va.type!==Ab||va.size!==kd||va.buffer!==ua||va.normalized!==bb||va.offset!==za||va.stride!==Bb)y.bindBuffer(34962,ua.buffer),y.vertexAttribPointer(Rb,kd,Ab,bb,Bb,za),va.type=Ab,va.size=kd,va.buffer=ua,va.normalized=bb,va.offset=
za,va.stride=Bb;va.divisor!==Ta&&(ha.vertexAttribDivisorANGLE(Rb,Ta),va.divisor=Ta)}else if(va.buffer&&(y.disableVertexAttribArray(Rb),va.buffer=null),va.x!==uc||va.y!==Ib||va.z!==Za||va.w!==Qa)y.vertexAttrib4f(Rb,uc,Ib,Za,Qa),va.x=uc,va.y=Ib,va.z=Za,va.w=Qa;M.buffer=a.colorBuffer;Ja=!1;Lb=null;hb=0;jb=!1;cc=wa=0;Da=1;rb=0;sb=5126;vc=lc=Ya=Xa=0;ja(M)?(Ja=!0,Lb=I.createStream(34962,M),sb=Lb.dtype):(Lb=I.getBuffer(M))?sb=Lb.dtype:"constant"in M?(Da=2,"number"===typeof M.constant?(Ya=M.constant,lc=vc=
Xa=0):(Ya=0<M.constant.length?M.constant[0]:0,lc=1<M.constant.length?M.constant[1]:0,vc=2<M.constant.length?M.constant[2]:0,Xa=3<M.constant.length?M.constant[3]:0)):(Lb=ja(M.buffer)?I.createStream(34962,M.buffer):I.getBuffer(M.buffer),sb="type"in M?G[M.type]:Lb.dtype,jb=!!M.normalized,cc=M.size|0,wa=M.offset|0,rb=M.stride|0,hb=M.divisor|0);rc=Q.location;Va=L[rc];if(1===Da){Va.buffer||y.enableVertexAttribArray(rc);Xb=cc||4;if(Va.type!==sb||Va.size!==Xb||Va.buffer!==Lb||Va.normalized!==jb||Va.offset!==
wa||Va.stride!==rb)y.bindBuffer(34962,Lb.buffer),y.vertexAttribPointer(rc,Xb,sb,jb,rb,wa),Va.type=sb,Va.size=Xb,Va.buffer=Lb,Va.normalized=jb,Va.offset=wa,Va.stride=rb;Va.divisor!==hb&&(ha.vertexAttribDivisorANGLE(rc,hb),Va.divisor=hb)}else if(Va.buffer&&(y.disableVertexAttribArray(rc),Va.buffer=null),Va.x!==Ya||Va.y!==lc||Va.z!==vc||Va.w!==Xa)y.vertexAttrib4f(rc,Ya,lc,vc,Xa),Va.x=Ya,Va.y=lc,Va.z=vc,Va.w=Xa;Gc=O.location;Ea=L[Gc];Ea.buffer||y.enableVertexAttribArray(Gc);if(5126!==Ea.type||1!==Ea.size||
Ea.buffer!==d||!1!==Ea.normalized||0!==Ea.offset||8!==Ea.stride)y.bindBuffer(34962,d.buffer),y.vertexAttribPointer(Gc,1,5126,!1,8,0),Ea.type=5126,Ea.size=1,Ea.buffer=d,Ea.normalized=!1,Ea.offset=0,Ea.stride=8;0!==Ea.divisor&&(ha.vertexAttribDivisorANGLE(Gc,0),Ea.divisor=0);zc=f.location;Oa=L[zc];Oa.buffer||y.enableVertexAttribArray(zc);if(5126!==Oa.type||1!==Oa.size||Oa.buffer!==c||!1!==Oa.normalized||4!==Oa.offset||8!==Oa.stride)y.bindBuffer(34962,c.buffer),y.vertexAttribPointer(zc,1,5126,!1,8,4),
Oa.type=5126,Oa.size=1,Oa.buffer=c,Oa.normalized=!1,Oa.offset=4,Oa.stride=8;0!==Oa.divisor&&(ha.vertexAttribDivisorANGLE(zc,0),Oa.divisor=0);Aa=a.scale;y.uniform2f(pc.location,Aa[0],Aa[1]);nb=a.translate;y.uniform2f(Pa.location,nb[0],nb[1]);y.uniform1f(la.location,a.thickness);y.uniform1f(H.location,a.depth);wb=n.call(this,U,a,0);y.uniform4f(Z.location,wb[0],wb[1],wb[2],wb[3]);y.uniform1f(m.location,a.miterLimit);Cb=e.call(this,U,a,0);y.uniform1f(T.location,Cb);y.uniform1f(A.location,a.dashLength);
y.uniform1f(na.location,a.opacity);(tb=a.dashTexture)&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);sc=tb._texture;y.uniform1i(cb.location,sc.bind());(xb=P.elements)?y.bindBuffer(34963,xb.buffer.buffer):bc.currentVAO&&(xb=Ub.getElements(bc.currentVAO.elements))&&y.bindBuffer(34963,xb.buffer.buffer);ld=a.count;0<ld?xb?ha.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),ld):ha.drawArraysInstancedANGLE(5,0,4,ld):0>ld&&(xb?y.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):y.drawArrays(5,0,
4));qa.dirty=!0;bc.setVAO(null);U.viewportWidth=D;U.viewportHeight=E;C&&(b.cpuTime+=performance.now()-ga);ma&&I.destroyStream(oa);gd&&I.destroyStream(Mc);Sc&&I.destroyStream(Ka);Pb&&I.destroyStream(Ma);qb&&I.destroyStream(ua);Ja&&I.destroyStream(Lb);sc.unbind()},scope:function(a,e,f){var g,h,k,m,p,n,v,y,B,A,N,F,H,X,J,S,Q,L,V,R,aa,Y,ia,T,Z,ma,fa,O,ea,sa,hc,pa,Ca,wd,ab,ra,Db,la,Sa,ic,Zb,wc,Lc,fc,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,cb,ub,Ra,Sb,eb,na,tc,$a,Pa,Ob,Wc,Pb,Ma,pb,vb,ib,Na,yc,Qb,Ub,fb,kc,Rc,ac,lb,mb,ta,
qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,bc,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,pc,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Yc,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,ve,ue,We,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Le,ye,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,
yf,zf;g=a.viewport;h=g.x|0;k=g.y|0;m="width"in g?g.width|0:U.framebufferWidth-h;p="height"in g?g.height|0:U.framebufferHeight-k;n=U.viewportWidth;U.viewportWidth=m;v=U.viewportHeight;U.viewportHeight=p;y=ga[0];ga[0]=h;B=ga[1];ga[1]=k;A=ga[2];ga[2]=m;N=ga[3];ga[3]=p;F=Ua[0];Ua[0]=0;H=Ua[1];Ua[1]=0;X=Ua[2];Ua[2]=0;J=Ua[3];Ua[3]=0;S=ba.blend_enable;ba.blend_enable=!0;Q=kb[0];kb[0]=32774;L=kb[1];kb[1]=32774;V=oa[0];oa[0]=770;R=oa[1];oa[1]=771;aa=oa[2];oa[2]=773;Y=oa[3];oa[3]=1;ia=ba.cull_enable;ba.cull_enable=
!0;T=ba.cull_face;ba.cull_face=1029;Z=q.call(this,U,a,f);ma=ba.depth_enable;ba.depth_enable=Z;fa=a.viewport;O=fa.x|0;ea=fa.y|0;sa="width"in fa?fa.width|0:U.framebufferWidth-O;hc="height"in fa?fa.height|0:U.framebufferHeight-ea;pa=Gb[0];Gb[0]=O;Ca=Gb[1];Gb[1]=ea;wd=Gb[2];Gb[2]=sa;ab=Gb[3];Gb[3]=hc;ra=ba.scissor_enable;ba.scissor_enable=!0;Db=ba.stencil_enable;ba.stencil_enable=!1;if(la=qa.profile)Sa=performance.now(),b.count++;ic=P.offset;P.offset=0;Zb=P.count;P.count=4;wc=a.count;Lc=P.instances;P.instances=
wc;fc=P.primitive;P.primitive=5;Dc=a.dashLength;Vb=La[23];La[23]=Dc;xc=a.dashTexture;Sc=La[24];La[24]=xc;Ka=a.depth;Eb=La[22];La[22]=Ka;Wa=a.id;ya=La[31];La[31]=Wa;cb=a.miterLimit;ub=La[32];La[32]=cb;Ra=w.call(this,U,a,f);Sb=La[33];La[33]=Ra;eb=a.opacity;na=La[10];La[10]=eb;tc=U.pixelRatio;$a=La[34];La[34]=tc;Pa=a.scale;Ob=La[6];La[6]=Pa;Wc=a.scaleFract;Pb=La[7];La[7]=Wc;Ma=a.thickness;pb=La[21];La[21]=Ma;vb=a.translate;ib=La[8];La[8]=vb;Na=a.translateFract;yc=La[9];La[9]=Na;Qb=da.call(this,U,a,f);
Ub=La[3];La[3]=Qb;x.buffer=a.colorBuffer;fb=!1;kc=null;Rc=0;ac=!1;mb=lb=0;ta=1;qb=0;ua=5126;gb=za=bb=Ta=0;ja(x)?(fb=!0,kc=I.createStream(34962,x),ua=kc.dtype):(kc=I.getBuffer(x))?ua=kc.dtype:"constant"in x?(ta=2,"number"===typeof x.constant?(bb=x.constant,za=gb=Ta=0):(bb=0<x.constant.length?x.constant[0]:0,za=1<x.constant.length?x.constant[1]:0,gb=2<x.constant.length?x.constant[2]:0,Ta=3<x.constant.length?x.constant[3]:0)):(kc=ja(x.buffer)?I.createStream(34962,x.buffer):I.getBuffer(x.buffer),ua="type"in
x?G[x.type]:kc.dtype,ac=!!x.normalized,mb=x.size|0,lb=x.offset|0,qb=x.stride|0,Rc=x.divisor|0);Ia=l.buffer;l.buffer=kc;Bb=l.divisor;l.divisor=Rc;Ab=l.normalized;l.normalized=ac;Qa=l.offset;l.offset=lb;uc=l.size;l.size=mb;Ib=l.state;l.state=ta;Za=l.stride;l.stride=qb;Rb=l.type;l.type=ua;va=l.w;l.w=Ta;kd=l.x;l.x=bb;Ja=l.y;l.y=za;Lb=l.z;l.z=gb;ca.buffer=a.positionBuffer;hb=!1;jb=null;wa=0;cc=!1;rb=Da=0;sb=1;Xa=0;Ya=5126;Va=rc=vc=lc=0;ja(ca)?(hb=!0,jb=I.createStream(34962,ca),Ya=jb.dtype):(jb=I.getBuffer(ca))?
Ya=jb.dtype:"constant"in ca?(sb=2,"number"===typeof ca.constant?(vc=ca.constant,rc=Va=lc=0):(vc=0<ca.constant.length?ca.constant[0]:0,rc=1<ca.constant.length?ca.constant[1]:0,Va=2<ca.constant.length?ca.constant[2]:0,lc=3<ca.constant.length?ca.constant[3]:0)):(jb=ja(ca.buffer)?I.createStream(34962,ca.buffer):I.getBuffer(ca.buffer),Ya="type"in ca?G[ca.type]:jb.dtype,cc=!!ca.normalized,rb=ca.size|0,Da=ca.offset|0,Xa=ca.stride|0,wa=ca.divisor|0);Xb=E.buffer;E.buffer=jb;Gc=E.divisor;E.divisor=wa;Ea=E.normalized;
E.normalized=cc;zc=E.offset;E.offset=Da;Oa=E.size;E.size=rb;Aa=E.state;E.state=sb;nb=E.stride;E.stride=Xa;wb=E.type;E.type=Ya;Cb=E.w;E.w=lc;tb=E.x;E.x=vc;sc=E.y;E.y=rc;xb=E.z;E.z=Va;M.buffer=a.colorBuffer;ld=!1;oc=null;bc=0;Nc=!1;id=hd=0;Tb=1;$b=0;Mb=5126;yb=ob=Yb=Fa=0;ja(M)?(ld=!0,oc=I.createStream(34962,M),Mb=oc.dtype):(oc=I.getBuffer(M))?Mb=oc.dtype:"constant"in M?(Tb=2,"number"===typeof M.constant?(Yb=M.constant,ob=yb=Fa=0):(Yb=0<M.constant.length?M.constant[0]:0,ob=1<M.constant.length?M.constant[1]:
0,yb=2<M.constant.length?M.constant[2]:0,Fa=3<M.constant.length?M.constant[3]:0)):(oc=ja(M.buffer)?I.createStream(34962,M.buffer):I.getBuffer(M.buffer),Mb="type"in M?G[M.type]:oc.dtype,Nc=!!M.normalized,id=M.size|0,hd=M.offset|0,$b=M.stride|0,bc=M.divisor|0);Kb=r.buffer;r.buffer=oc;Nb=r.divisor;r.divisor=bc;dc=r.normalized;r.normalized=Nc;gc=r.offset;r.offset=hd;pc=r.size;r.size=id;Ec=r.state;r.state=Tb;Fc=r.stride;r.stride=$b;Hc=r.type;r.type=Mb;Oc=r.w;r.w=Fa;bd=r.x;r.x=Yb;Uc=r.y;r.y=ob;Pc=r.z;r.z=
yb;Ba.buffer=a.positionBuffer;Jb=!1;Fb=null;Qc=0;Jc=!1;ec=Vc=0;Zc=1;dd=0;pd=5126;Vd=Yc=$c=ne=0;ja(Ba)?(Jb=!0,Fb=I.createStream(34962,Ba),pd=Fb.dtype):(Fb=I.getBuffer(Ba))?pd=Fb.dtype:"constant"in Ba?(Zc=2,"number"===typeof Ba.constant?($c=Ba.constant,Yc=Vd=ne=0):($c=0<Ba.constant.length?Ba.constant[0]:0,Yc=1<Ba.constant.length?Ba.constant[1]:0,Vd=2<Ba.constant.length?Ba.constant[2]:0,ne=3<Ba.constant.length?Ba.constant[3]:0)):(Fb=ja(Ba.buffer)?I.createStream(34962,Ba.buffer):I.getBuffer(Ba.buffer),
pd="type"in Ba?G[Ba.type]:Fb.dtype,Jc=!!Ba.normalized,ec=Ba.size|0,Vc=Ba.offset|0,dd=Ba.stride|0,Qc=Ba.divisor|0);he=D.buffer;D.buffer=Fb;Ie=D.divisor;D.divisor=Qc;ke=D.normalized;D.normalized=Jc;Gd=D.offset;D.offset=Vc;Ed=D.size;D.size=ec;fd=D.state;D.state=Zc;Ic=D.stride;D.stride=dd;qd=D.type;D.type=pd;jd=D.w;D.w=ne;cd=D.x;D.x=$c;md=D.y;D.y=Yc;Cd=D.z;D.z=Vd;zd=K.buffer;K.buffer=d;ve=K.divisor;K.divisor=0;ue=K.normalized;K.normalized=!1;We=K.offset;K.offset=0;le=K.size;K.size=0;ce=K.state;K.state=
1;ae=K.stride;K.stride=8;oe=K.type;K.type=5126;Zd=K.w;K.w=0;fe=K.x;K.x=0;Ac=K.y;K.y=0;Xc=K.z;K.z=0;pe=z.buffer;z.buffer=c;ie=z.divisor;z.divisor=0;Fd=z.normalized;z.normalized=!1;Id=z.offset;z.offset=4;Kd=z.size;z.size=0;Ld=z.state;z.state=1;ge=z.stride;z.stride=8;Te=z.type;z.type=5126;we=z.w;z.w=0;me=z.x;z.x=0;Ne=z.y;z.y=0;Oe=z.z;z.z=0;Ga.buffer=a.positionBuffer;Je=!1;qe=null;ze=0;Ce=!1;Ee=De=0;Ae=1;Hd=0;Od=5126;Bd=Fe=$d=Wd=0;ja(Ga)?(Je=!0,qe=I.createStream(34962,Ga),Od=qe.dtype):(qe=I.getBuffer(Ga))?
Od=qe.dtype:"constant"in Ga?(Ae=2,"number"===typeof Ga.constant?($d=Ga.constant,Fe=Bd=Wd=0):($d=0<Ga.constant.length?Ga.constant[0]:0,Fe=1<Ga.constant.length?Ga.constant[1]:0,Bd=2<Ga.constant.length?Ga.constant[2]:0,Wd=3<Ga.constant.length?Ga.constant[3]:0)):(qe=ja(Ga.buffer)?I.createStream(34962,Ga.buffer):I.getBuffer(Ga.buffer),Od="type"in Ga?G[Ga.type]:qe.dtype,Ce=!!Ga.normalized,Ee=Ga.size|0,De=Ga.offset|0,Hd=Ga.stride|0,ze=Ga.divisor|0);Md=u.buffer;u.buffer=qe;xe=u.divisor;u.divisor=ze;Ge=u.normalized;
u.normalized=Ce;ff=u.offset;u.offset=De;Ye=u.size;u.size=Ee;Pe=u.state;u.state=Ae;Ke=u.stride;u.stride=Hd;Xe=u.type;u.type=Od;Ue=u.w;u.w=Wd;Qe=u.x;u.x=$d;Re=u.y;u.y=Fe;Nd=u.z;u.z=Bd;t.buffer=a.positionBuffer;Td=!1;Se=null;gf=0;lf=!1;hf=cf=0;jf=1;kf=0;qf=5126;Cf=Bf=rf=nf=0;ja(t)?(Td=!0,Se=I.createStream(34962,t),qf=Se.dtype):(Se=I.getBuffer(t))?qf=Se.dtype:"constant"in t?(jf=2,"number"===typeof t.constant?(rf=t.constant,Bf=Cf=nf=0):(rf=0<t.constant.length?t.constant[0]:0,Bf=1<t.constant.length?t.constant[1]:
0,Cf=2<t.constant.length?t.constant[2]:0,nf=3<t.constant.length?t.constant[3]:0)):(Se=ja(t.buffer)?I.createStream(34962,t.buffer):I.getBuffer(t.buffer),qf="type"in t?G[t.type]:Se.dtype,lf=!!t.normalized,hf=t.size|0,cf=t.offset|0,kf=t.stride|0,gf=t.divisor|0);Le=C.buffer;C.buffer=Se;ye=C.divisor;C.divisor=gf;of=C.normalized;C.normalized=lf;pf=C.offset;C.offset=cf;Df=C.size;C.size=hf;Hf=C.state;C.state=jf;Af=C.stride;C.stride=kf;Ef=C.type;C.type=qf;Ff=C.w;C.w=nf;wf=C.x;C.x=rf;xf=C.y;C.y=Bf;uf=C.z;C.z=
Cf;yf=xa.vert;xa.vert=36;zf=xa.frag;xa.frag=35;qa.dirty=!0;e(U,a,f);U.viewportWidth=n;U.viewportHeight=v;ga[0]=y;ga[1]=B;ga[2]=A;ga[3]=N;Ua[0]=F;Ua[1]=H;Ua[2]=X;Ua[3]=J;ba.blend_enable=S;kb[0]=Q;kb[1]=L;oa[0]=V;oa[1]=R;oa[2]=aa;oa[3]=Y;ba.cull_enable=ia;ba.cull_face=T;ba.depth_enable=ma;Gb[0]=pa;Gb[1]=Ca;Gb[2]=wd;Gb[3]=ab;ba.scissor_enable=ra;ba.stencil_enable=Db;la&&(b.cpuTime+=performance.now()-Sa);P.offset=ic;P.count=Zb;P.instances=Lc;P.primitive=fc;La[23]=Vb;La[24]=Sc;La[22]=Eb;La[31]=ya;La[32]=
ub;La[33]=Sb;La[10]=na;La[34]=$a;La[6]=Ob;La[7]=Pb;La[21]=pb;La[8]=ib;La[9]=yc;La[3]=Ub;fb&&I.destroyStream(kc);l.buffer=Ia;l.divisor=Bb;l.normalized=Ab;l.offset=Qa;l.size=uc;l.state=Ib;l.stride=Za;l.type=Rb;l.w=va;l.x=kd;l.y=Ja;l.z=Lb;hb&&I.destroyStream(jb);E.buffer=Xb;E.divisor=Gc;E.normalized=Ea;E.offset=zc;E.size=Oa;E.state=Aa;E.stride=nb;E.type=wb;E.w=Cb;E.x=tb;E.y=sc;E.z=xb;ld&&I.destroyStream(oc);r.buffer=Kb;r.divisor=Nb;r.normalized=dc;r.offset=gc;r.size=pc;r.state=Ec;r.stride=Fc;r.type=
Hc;r.w=Oc;r.x=bd;r.y=Uc;r.z=Pc;Jb&&I.destroyStream(Fb);D.buffer=he;D.divisor=Ie;D.normalized=ke;D.offset=Gd;D.size=Ed;D.state=fd;D.stride=Ic;D.type=qd;D.w=jd;D.x=cd;D.y=md;D.z=Cd;K.buffer=zd;K.divisor=ve;K.normalized=ue;K.offset=We;K.size=le;K.state=ce;K.stride=ae;K.type=oe;K.w=Zd;K.x=fe;K.y=Ac;K.z=Xc;z.buffer=pe;z.divisor=ie;z.normalized=Fd;z.offset=Id;z.size=Kd;z.state=Ld;z.stride=ge;z.type=Te;z.w=we;z.x=me;z.y=Ne;z.z=Oe;Je&&I.destroyStream(qe);u.buffer=Md;u.divisor=xe;u.normalized=Ge;u.offset=
ff;u.size=Ye;u.state=Pe;u.stride=Ke;u.type=Xe;u.w=Ue;u.x=Qe;u.y=Re;u.z=Nd;Td&&I.destroyStream(Se);C.buffer=Le;C.divisor=ye;C.normalized=of;C.offset=pf;C.size=Df;C.state=Hf;C.stride=Af;C.type=Ef;C.w=Ff;C.x=wf;C.y=xf;C.z=uf;xa.vert=yf;xa.frag=zf;qa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,b,g,h,d,c,n,e,q,u,w,l,E,r,D,K,z,ha,C){var J,ma,p,v,k,S,Q,V,A,cb,H,O,f,m,T,ra,na,Yc,pc,la,Pa,Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa;
J=a.attributes;ma=a.buffer;p=a.context;v=a.current;k=a.draw;S=a.elements;Q=a.extensions;V=a.framebuffer;A=a.gl;cb=a.isBufferArgs;H=a.next;O=a.shader;f=a.uniforms;m=a.vao;T=H.blend_color;ra=v.blend_color;na=H.blend_equation;Yc=v.blend_equation;pc=H.blend_func;la=v.blend_func;Pa=H.colorMask;Z=v.colorMask;L=H.depth_range;I=v.depth_range;U=H.polygonOffset_offset;qa=v.polygonOffset_offset;P=H.sample_coverage;Ub=v.sample_coverage;$a=H.scissor_box;R=v.scissor_box;y=H.stencil_func;ja=v.stencil_func;ba=H.stencil_opBack;
xa=v.stencil_opBack;La=H.stencil_opFront;bc=v.stencil_opFront;Ua=H.viewport;Y=v.viewport;kb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ea={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(a,c){var e,d,f,g,h,n;e=V.next;e!==V.cur&&(e?A.bindFramebuffer(36160,e.framebuffer):A.bindFramebuffer(36160,null),V.cur=e);if(v.dirty){var T,O,Lc,na,F,B,fa,sa,aa,ga,pa,G,x,ca,M,Ba,Ga,t,Ua,Ha,W,Hb,zb,$a,pc,be,Ud,te,re,Kc,de,se;T=H.dither;T!==v.dither&&
(T?A.enable(3024):A.disable(3024),v.dither=T);O=H.depth_func;O!==v.depth_func&&(A.depthFunc(O),v.depth_func=O);Lc=L[0];na=L[1];if(Lc!==I[0]||na!==I[1])A.depthRange(Lc,na),I[0]=Lc,I[1]=na;F=H.depth_mask;F!==v.depth_mask&&(A.depthMask(F),v.depth_mask=F);B=Pa[0];fa=Pa[1];sa=Pa[2];aa=Pa[3];if(B!==Z[0]||fa!==Z[1]||sa!==Z[2]||aa!==Z[3])A.colorMask(B,fa,sa,aa),Z[0]=B,Z[1]=fa,Z[2]=sa,Z[3]=aa;ga=H.cull_enable;ga!==v.cull_enable&&(ga?A.enable(2884):A.disable(2884),v.cull_enable=ga);pa=H.cull_face;pa!==v.cull_face&&
(A.cullFace(pa),v.cull_face=pa);G=H.frontFace;G!==v.frontFace&&(A.frontFace(G),v.frontFace=G);x=H.lineWidth;x!==v.lineWidth&&(A.lineWidth(x),v.lineWidth=x);ca=H.polygonOffset_enable;ca!==v.polygonOffset_enable&&(ca?A.enable(32823):A.disable(32823),v.polygonOffset_enable=ca);M=U[0];Ba=U[1];if(M!==qa[0]||Ba!==qa[1])A.polygonOffset(M,Ba),qa[0]=M,qa[1]=Ba;Ga=H.sample_alpha;Ga!==v.sample_alpha&&(Ga?A.enable(32926):A.disable(32926),v.sample_alpha=Ga);t=H.sample_enable;t!==v.sample_enable&&(t?A.enable(32928):
A.disable(32928),v.sample_enable=t);Ua=P[0];Ha=P[1];if(Ua!==Ub[0]||Ha!==Ub[1])A.sampleCoverage(Ua,Ha),Ub[0]=Ua,Ub[1]=Ha;W=H.stencil_mask;W!==v.stencil_mask&&(A.stencilMask(W),v.stencil_mask=W);Hb=y[0];zb=y[1];$a=y[2];if(Hb!==ja[0]||zb!==ja[1]||$a!==ja[2])A.stencilFunc(Hb,zb,$a),ja[0]=Hb,ja[1]=zb,ja[2]=$a;pc=La[0];be=La[1];Ud=La[2];te=La[3];if(pc!==bc[0]||be!==bc[1]||Ud!==bc[2]||te!==bc[3])A.stencilOpSeparate(pc,be,Ud,te),bc[0]=pc,bc[1]=be,bc[2]=Ud,bc[3]=te;re=ba[0];Kc=ba[1];de=ba[2];se=ba[3];if(re!==
xa[0]||Kc!==xa[1]||de!==xa[2]||se!==xa[3])A.stencilOpSeparate(re,Kc,de,se),xa[0]=re,xa[1]=Kc,xa[2]=de,xa[3]=se}A.blendColor(0,0,0,0);ra[0]=0;ra[1]=0;ra[2]=0;ra[3]=0;A.enable(3042);v.blend_enable=!0;A.blendEquationSeparate(32774,32774);Yc[0]=32774;Yc[1]=32774;A.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=1;A.disable(2929);v.depth_enable=!1;A.enable(3089);v.scissor_enable=!0;A.disable(2960);v.stencil_enable=!1;if(d=v.profile)f=performance.now(),b.count+=c;A.useProgram(q.program);
g=Q.angle_instanced_arrays;var Pd;m.setVAO(null);Pd=k.instances;for(h=0;h<c;++h){n=a[h];var Qd,Yd,Jd,Me,mf,bf,Ad,Be,Rd,Sd,je,He,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,Ve,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb;Qd=n.viewport;Yd=Qd.x|0;Jd=Qd.y|0;Me="width"in Qd?Qd.width|0:p.framebufferWidth-Yd;mf="height"in Qd?Qd.height|0:p.framebufferHeight-Jd;bf=p.viewportWidth;p.viewportWidth=
Me;Ad=p.viewportHeight;p.viewportHeight=mf;A.viewport(Yd,Jd,Me,mf);Y[0]=Yd;Y[1]=Jd;Y[2]=Me;Y[3]=mf;Be=n.viewport;Rd=Be.x|0;Sd=Be.y|0;je="width"in Be?Be.width|0:p.framebufferWidth-Rd;He="height"in Be?Be.height|0:p.framebufferHeight-Sd;A.scissor(Rd,Sd,je,He);R[0]=Rd;R[1]=Sd;R[2]=je;R[3]=He;ea.buffer=n.positionBuffer;td=!1;nd=null;yd=0;rd=!1;Bc=ed=0;ud=1;gd=0;Mc=5126;Db=Cc=ab=nc=0;cb(ea)?(td=!0,nd=ma.createStream(34962,ea),Mc=nd.dtype):(nd=ma.getBuffer(ea))?Mc=nd.dtype:"constant"in ea?(ud=2,"number"===
typeof ea.constant?(ab=ea.constant,Cc=Db=nc=0):(ab=0<ea.constant.length?ea.constant[0]:0,Cc=1<ea.constant.length?ea.constant[1]:0,Db=2<ea.constant.length?ea.constant[2]:0,nc=3<ea.constant.length?ea.constant[3]:0)):(nd=cb(ea.buffer)?ma.createStream(34962,ea.buffer):ma.getBuffer(ea.buffer),Mc="type"in ea?kb[ea.type]:nd.dtype,rd=!!ea.normalized,Bc=ea.size|0,ed=ea.offset|0,gd=ea.stride|0,yd=ea.divisor|0);mc=r.location;Sa=J[mc];if(1===ud){Sa.buffer||A.enableVertexAttribArray(mc);ic=Bc||2;if(Sa.type!==
Mc||Sa.size!==ic||Sa.buffer!==nd||Sa.normalized!==rd||Sa.offset!==ed||Sa.stride!==gd)A.bindBuffer(34962,nd.buffer),A.vertexAttribPointer(mc,ic,Mc,rd,gd,ed),Sa.type=Mc,Sa.size=ic,Sa.buffer=nd,Sa.normalized=rd,Sa.offset=ed,Sa.stride=gd;Sa.divisor!==yd&&(g.vertexAttribDivisorANGLE(mc,yd),Sa.divisor=yd)}else if(Sa.buffer&&(A.disableVertexAttribArray(mc),Sa.buffer=null),Sa.x!==ab||Sa.y!==Cc||Sa.z!==Db||Sa.w!==nc)A.vertexAttrib4f(mc,ab,Cc,Db,nc),Sa.x=ab,Sa.y=Cc,Sa.z=Db,Sa.w=nc;oa.buffer=n.positionFractBuffer;
Zb=!1;ad=null;Dd=0;od=!1;Vb=Dc=0;xc=1;Sc=0;Ka=5126;xd=ya=Wa=Eb=0;cb(oa)?(Zb=!0,ad=ma.createStream(34962,oa),Ka=ad.dtype):(ad=ma.getBuffer(oa))?Ka=ad.dtype:"constant"in oa?(xc=2,"number"===typeof oa.constant?(Wa=oa.constant,ya=xd=Eb=0):(Wa=0<oa.constant.length?oa.constant[0]:0,ya=1<oa.constant.length?oa.constant[1]:0,xd=2<oa.constant.length?oa.constant[2]:0,Eb=3<oa.constant.length?oa.constant[3]:0)):(ad=cb(oa.buffer)?ma.createStream(34962,oa.buffer):ma.getBuffer(oa.buffer),Ka="type"in oa?kb[oa.type]:
ad.dtype,od=!!oa.normalized,Vb=oa.size|0,Dc=oa.offset|0,Sc=oa.stride|0,Dd=oa.divisor|0);ub=D.location;Ra=J[ub];if(1===xc){Ra.buffer||A.enableVertexAttribArray(ub);Sb=Vb||2;if(Ra.type!==Ka||Ra.size!==Sb||Ra.buffer!==ad||Ra.normalized!==od||Ra.offset!==Dc||Ra.stride!==Sc)A.bindBuffer(34962,ad.buffer),A.vertexAttribPointer(ub,Sb,Ka,od,Sc,Dc),Ra.type=Ka,Ra.size=Sb,Ra.buffer=ad,Ra.normalized=od,Ra.offset=Dc,Ra.stride=Sc;Ra.divisor!==Dd&&(g.vertexAttribDivisorANGLE(ub,Dd),Ra.divisor=Dd)}else if(Ra.buffer&&
(A.disableVertexAttribArray(ub),Ra.buffer=null),Ra.x!==Wa||Ra.y!==ya||Ra.z!==xd||Ra.w!==Eb)A.vertexAttrib4f(ub,Wa,ya,xd,Eb),Ra.x=Wa,Ra.y=ya,Ra.z=xd,Ra.w=Eb;eb=n.fill;Tc=eb[0];Ve=eb[1];Ob=eb[2];Pb=eb[3];h&&Wb===Tc&&jc===Ve&&vd===Ob&&Ma===Pb||(Wb=Tc,jc=Ve,vd=Ob,Ma=Pb,A.uniform4f(w.location,Tc,Ve,Ob,Pb));pb=n.scale;vb=pb[0];Na=pb[1];h&&ib===vb&&yc===Na||(ib=vb,yc=Na,A.uniform2f(K.location,vb,Na));Qb=n.scaleFract;sd=Qb[0];kc=Qb[1];h&&fb===sd&&Rc===kc||(fb=sd,Rc=kc,A.uniform2f(z.location,sd,kc));ac=n.translate;
lb=ac[0];ta=ac[1];h&&mb===lb&&qb===ta||(mb=lb,qb=ta,A.uniform2f(ha.location,lb,ta));ua=n.translateFract;Ta=ua[0];za=ua[1];h&&bb===Ta&&gb===za||(bb=Ta,gb=za,A.uniform2f(C.location,Ta,za));Ia=n.id;h&&Bb===Ia||(Bb=Ia,A.uniform1f(l.location,Ia));Ab=n.opacity;h&&Qa===Ab||(Qa=Ab,A.uniform1f(E.location,Ab));uc=u.call(this,p,n,h);Ib=null;(Ib=(Za=cb(uc))?S.createStream(uc):S.getElements(uc))&&A.bindBuffer(34963,Ib.buffer.buffer);if(Rb=Ib?Ib.vertCount:-1)0<Pd?Ib?g.drawElementsInstancedANGLE(4,Rb,Ib.type,0<<
(Ib.type-5121>>1),Pd):g.drawArraysInstancedANGLE(4,0,Rb,Pd):0>Pd&&(Ib?A.drawElements(4,Rb,Ib.type,0<<(Ib.type-5121>>1)):A.drawArrays(4,0,Rb)),p.viewportWidth=bf,p.viewportHeight=Ad,td&&ma.destroyStream(nd),Zb&&ma.destroyStream(ad),Za&&S.destroyStream(Ib)}v.dirty=!0;m.setVAO(null);d&&(b.cpuTime+=performance.now()-f)},draw:function(a){var c,e,d,f,n,q,u,ka,T,O,na,F,B,fa,sa,aa,ga,pa,G,x,ca,M;c=V.next;c!==V.cur&&(c?A.bindFramebuffer(36160,c.framebuffer):A.bindFramebuffer(36160,null),V.cur=c);if(v.dirty){c=
H.dither;c!==v.dither&&(c?A.enable(3024):A.disable(3024),v.dither=c);c=H.depth_func;c!==v.depth_func&&(A.depthFunc(c),v.depth_func=c);c=L[0];q=L[1];if(c!==I[0]||q!==I[1])A.depthRange(c,q),I[0]=c,I[1]=q;c=H.depth_mask;c!==v.depth_mask&&(A.depthMask(c),v.depth_mask=c);c=Pa[0];q=Pa[1];e=Pa[2];d=Pa[3];if(c!==Z[0]||q!==Z[1]||e!==Z[2]||d!==Z[3])A.colorMask(c,q,e,d),Z[0]=c,Z[1]=q,Z[2]=e,Z[3]=d;c=H.cull_enable;c!==v.cull_enable&&(c?A.enable(2884):A.disable(2884),v.cull_enable=c);c=H.cull_face;c!==v.cull_face&&
(A.cullFace(c),v.cull_face=c);c=H.frontFace;c!==v.frontFace&&(A.frontFace(c),v.frontFace=c);c=H.lineWidth;c!==v.lineWidth&&(A.lineWidth(c),v.lineWidth=c);c=H.polygonOffset_enable;c!==v.polygonOffset_enable&&(c?A.enable(32823):A.disable(32823),v.polygonOffset_enable=c);c=U[0];q=U[1];if(c!==qa[0]||q!==qa[1])A.polygonOffset(c,q),qa[0]=c,qa[1]=q;c=H.sample_alpha;c!==v.sample_alpha&&(c?A.enable(32926):A.disable(32926),v.sample_alpha=c);c=H.sample_enable;c!==v.sample_enable&&(c?A.enable(32928):A.disable(32928),
v.sample_enable=c);c=P[0];q=P[1];if(c!==Ub[0]||q!==Ub[1])A.sampleCoverage(c,q),Ub[0]=c,Ub[1]=q;c=H.stencil_mask;c!==v.stencil_mask&&(A.stencilMask(c),v.stencil_mask=c);c=y[0];q=y[1];e=y[2];if(c!==ja[0]||q!==ja[1]||e!==ja[2])A.stencilFunc(c,q,e),ja[0]=c,ja[1]=q,ja[2]=e;c=La[0];q=La[1];e=La[2];d=La[3];if(c!==bc[0]||q!==bc[1]||e!==bc[2]||d!==bc[3])A.stencilOpSeparate(c,q,e,d),bc[0]=c,bc[1]=q,bc[2]=e,bc[3]=d;c=ba[0];q=ba[1];e=ba[2];d=ba[3];if(c!==xa[0]||q!==xa[1]||e!==xa[2]||d!==xa[3])A.stencilOpSeparate(c,
q,e,d),xa[0]=c,xa[1]=q,xa[2]=e,xa[3]=d}c=a.viewport;e=c.x|0;d=c.y|0;f="width"in c?c.width|0:p.framebufferWidth-e;n="height"in c?c.height|0:p.framebufferHeight-d;c=p.viewportWidth;p.viewportWidth=f;q=p.viewportHeight;p.viewportHeight=n;A.viewport(e,d,f,n);Y[0]=e;Y[1]=d;Y[2]=f;Y[3]=n;A.blendColor(0,0,0,0);ra[0]=0;ra[1]=0;ra[2]=0;ra[3]=0;A.enable(3042);v.blend_enable=!0;A.blendEquationSeparate(32774,32774);Yc[0]=32774;Yc[1]=32774;A.blendFuncSeparate(770,771,773,1);la[0]=770;la[1]=771;la[2]=773;la[3]=
1;A.disable(2929);v.depth_enable=!1;n=a.viewport;e=n.x|0;d=n.y|0;f="width"in n?n.width|0:p.framebufferWidth-e;n="height"in n?n.height|0:p.framebufferHeight-d;A.scissor(e,d,f,n);R[0]=e;R[1]=d;R[2]=f;R[3]=n;A.enable(3089);v.scissor_enable=!0;A.disable(2960);v.stencil_enable=!1;if(e=v.profile)u=performance.now(),b.count++;A.useProgram(g.program);d=Q.angle_instanced_arrays;m.setVAO(null);ea.buffer=a.positionBuffer;f=!1;ka=0;T=!1;na=O=0;F=1;B=0;fa=5126;pa=ga=aa=sa=0;cb(ea)?(f=!0,n=ma.createStream(34962,
ea),fa=n.dtype):(n=ma.getBuffer(ea))?fa=n.dtype:"constant"in ea?(F=2,"number"===typeof ea.constant?(aa=ea.constant,ga=pa=sa=0):(aa=0<ea.constant.length?ea.constant[0]:0,ga=1<ea.constant.length?ea.constant[1]:0,pa=2<ea.constant.length?ea.constant[2]:0,sa=3<ea.constant.length?ea.constant[3]:0)):(n=cb(ea.buffer)?ma.createStream(34962,ea.buffer):ma.getBuffer(ea.buffer),fa="type"in ea?kb[ea.type]:n.dtype,T=!!ea.normalized,na=ea.size|0,O=ea.offset|0,B=ea.stride|0,ka=ea.divisor|0);G=r.location;x=J[G];if(1===
F){x.buffer||A.enableVertexAttribArray(G);na=na||2;if(x.type!==fa||x.size!==na||x.buffer!==n||x.normalized!==T||x.offset!==O||x.stride!==B)A.bindBuffer(34962,n.buffer),A.vertexAttribPointer(G,na,fa,T,B,O),x.type=fa,x.size=na,x.buffer=n,x.normalized=T,x.offset=O,x.stride=B;x.divisor!==ka&&(d.vertexAttribDivisorANGLE(G,ka),x.divisor=ka)}else if(x.buffer&&(A.disableVertexAttribArray(G),x.buffer=null),x.x!==aa||x.y!==ga||x.z!==pa||x.w!==sa)A.vertexAttrib4f(G,aa,ga,pa,sa),x.x=aa,x.y=ga,x.z=pa,x.w=sa;oa.buffer=
a.positionFractBuffer;ka=!1;O=0;B=!1;sa=fa=0;aa=1;G=0;x=5126;M=ca=pa=ga=0;cb(oa)?(ka=!0,T=ma.createStream(34962,oa),x=T.dtype):(T=ma.getBuffer(oa))?x=T.dtype:"constant"in oa?(aa=2,"number"===typeof oa.constant?(pa=oa.constant,ca=M=ga=0):(pa=0<oa.constant.length?oa.constant[0]:0,ca=1<oa.constant.length?oa.constant[1]:0,M=2<oa.constant.length?oa.constant[2]:0,ga=3<oa.constant.length?oa.constant[3]:0)):(T=cb(oa.buffer)?ma.createStream(34962,oa.buffer):ma.getBuffer(oa.buffer),x="type"in oa?kb[oa.type]:
T.dtype,B=!!oa.normalized,sa=oa.size|0,fa=oa.offset|0,G=oa.stride|0,O=oa.divisor|0);na=D.location;F=J[na];if(1===aa){F.buffer||A.enableVertexAttribArray(na);sa=sa||2;if(F.type!==x||F.size!==sa||F.buffer!==T||F.normalized!==B||F.offset!==fa||F.stride!==G)A.bindBuffer(34962,T.buffer),A.vertexAttribPointer(na,sa,x,B,G,fa),F.type=x,F.size=sa,F.buffer=T,F.normalized=B,F.offset=fa,F.stride=G;F.divisor!==O&&(d.vertexAttribDivisorANGLE(na,O),F.divisor=O)}else if(F.buffer&&(A.disableVertexAttribArray(na),
F.buffer=null),F.x!==pa||F.y!==ca||F.z!==M||F.w!==ga)A.vertexAttrib4f(na,pa,ca,M,ga),F.x=pa,F.y=ca,F.z=M,F.w=ga;O=a.fill;A.uniform4f(w.location,O[0],O[1],O[2],O[3]);O=a.scale;A.uniform2f(K.location,O[0],O[1]);O=a.scaleFract;A.uniform2f(z.location,O[0],O[1]);O=a.translate;A.uniform2f(ha.location,O[0],O[1]);O=a.translateFract;A.uniform2f(C.location,O[0],O[1]);A.uniform1f(l.location,a.id);A.uniform1f(E.location,a.opacity);O=h.call(this,p,a,0);(O=(a=cb(O))?S.createStream(O):S.getElements(O))&&A.bindBuffer(34963,
O.buffer.buffer);if(B=O?O.vertCount:-1)fa=k.instances,0<fa?O?d.drawElementsInstancedANGLE(4,B,O.type,0<<(O.type-5121>>1),fa):d.drawArraysInstancedANGLE(4,0,B,fa):0>fa&&(O?A.drawElements(4,B,O.type,0<<(O.type-5121>>1)):A.drawArrays(4,0,B)),v.dirty=!0,m.setVAO(null),p.viewportWidth=c,p.viewportHeight=q,e&&(b.cpuTime+=performance.now()-u),f&&ma.destroyStream(n),ka&&ma.destroyStream(T),a&&S.destroyStream(O)},scope:function(a,g,h){var l,m,q,r,y,A,z,D,E,u,B,w,K,ka,da,J,G,x,I,M,P,Q,t,L,V,W,R,ha,U,C,Y,Z,
ba,ja,qa,ra,la,xa,La,Pa,Jd,Me,Ub,db,Ad,bc,Rd,Sd,je,He,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,Ve,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab;l=a.viewport;m=l.x|0;q=l.y|0;r="width"in l?l.width|0:p.framebufferWidth-m;y="height"in l?l.height|0:p.framebufferHeight-q;A=p.viewportWidth;p.viewportWidth=r;z=p.viewportHeight;p.viewportHeight=y;D=Ua[0];Ua[0]=m;E=Ua[1];Ua[1]=q;u=Ua[2];Ua[2]=r;B=Ua[3];Ua[3]=
y;w=T[0];T[0]=0;K=T[1];T[1]=0;ka=T[2];T[2]=0;da=T[3];T[3]=0;J=H.blend_enable;H.blend_enable=!0;G=na[0];na[0]=32774;x=na[1];na[1]=32774;I=pc[0];pc[0]=770;M=pc[1];pc[1]=771;P=pc[2];pc[2]=773;Q=pc[3];pc[3]=1;t=H.depth_enable;H.depth_enable=!1;L=a.viewport;V=L.x|0;W=L.y|0;R="width"in L?L.width|0:p.framebufferWidth-V;ha="height"in L?L.height|0:p.framebufferHeight-W;U=$a[0];$a[0]=V;C=$a[1];$a[1]=W;Y=$a[2];$a[2]=R;Z=$a[3];$a[3]=ha;ba=H.scissor_enable;H.scissor_enable=!0;ja=H.stencil_enable;H.stencil_enable=
!1;if(qa=v.profile)ra=performance.now(),b.count++;la=d.call(this,p,a,h);xa=null;xa=(La=cb(la))?S.createStream(la):S.getElements(la);Pa=k.elements;k.elements=xa;Jd=k.offset;k.offset=0;Me=xa?xa.vertCount:-1;Ub=k.count;k.count=Me;db=k.primitive;k.primitive=4;Ad=a.fill;bc=f[14];f[14]=Ad;Rd=a.id;Sd=f[31];f[31]=Rd;je=a.opacity;He=f[10];f[10]=je;td=p.pixelRatio;nd=f[34];f[34]=td;yd=a.scale;rd=f[6];f[6]=yd;ed=a.scaleFract;Bc=f[7];f[7]=ed;ud=a.translate;gd=f[8];f[8]=ud;Mc=a.translateFract;nc=f[9];f[9]=Mc;
ab=c.call(this,p,a,h);Cc=f[3];f[3]=ab;ea.buffer=a.positionBuffer;Db=!1;mc=null;Sa=0;ic=!1;ad=Zb=0;Dd=1;od=0;Dc=5126;Ka=Sc=xc=Vb=0;cb(ea)?(Db=!0,mc=ma.createStream(34962,ea),Dc=mc.dtype):(mc=ma.getBuffer(ea))?Dc=mc.dtype:"constant"in ea?(Dd=2,"number"===typeof ea.constant?(xc=ea.constant,Sc=Ka=Vb=0):(xc=0<ea.constant.length?ea.constant[0]:0,Sc=1<ea.constant.length?ea.constant[1]:0,Ka=2<ea.constant.length?ea.constant[2]:0,Vb=3<ea.constant.length?ea.constant[3]:0)):(mc=cb(ea.buffer)?ma.createStream(34962,
ea.buffer):ma.getBuffer(ea.buffer),Dc="type"in ea?kb[ea.type]:mc.dtype,ic=!!ea.normalized,ad=ea.size|0,Zb=ea.offset|0,od=ea.stride|0,Sa=ea.divisor|0);Eb=n.buffer;n.buffer=mc;Wa=n.divisor;n.divisor=Sa;ya=n.normalized;n.normalized=ic;xd=n.offset;n.offset=Zb;ub=n.size;n.size=ad;Ra=n.state;n.state=Dd;Sb=n.stride;n.stride=od;eb=n.type;n.type=Dc;Tc=n.w;n.w=Vb;Wb=n.x;n.x=xc;Ve=n.y;n.y=Sc;jc=n.z;n.z=Ka;oa.buffer=a.positionFractBuffer;Ob=!1;vd=null;Pb=0;Ma=!1;vb=pb=0;ib=1;Na=0;yc=5126;kc=fb=sd=Qb=0;cb(oa)?
(Ob=!0,vd=ma.createStream(34962,oa),yc=vd.dtype):(vd=ma.getBuffer(oa))?yc=vd.dtype:"constant"in oa?(ib=2,"number"===typeof oa.constant?(sd=oa.constant,fb=kc=Qb=0):(sd=0<oa.constant.length?oa.constant[0]:0,fb=1<oa.constant.length?oa.constant[1]:0,kc=2<oa.constant.length?oa.constant[2]:0,Qb=3<oa.constant.length?oa.constant[3]:0)):(vd=cb(oa.buffer)?ma.createStream(34962,oa.buffer):ma.getBuffer(oa.buffer),yc="type"in oa?kb[oa.type]:vd.dtype,Ma=!!oa.normalized,vb=oa.size|0,pb=oa.offset|0,Na=oa.stride|
0,Pb=oa.divisor|0);Rc=e.buffer;e.buffer=vd;ac=e.divisor;e.divisor=Pb;lb=e.normalized;e.normalized=Ma;mb=e.offset;e.offset=pb;ta=e.size;e.size=vb;qb=e.state;e.state=ib;ua=e.stride;e.stride=Na;Ta=e.type;e.type=yc;bb=e.w;e.w=Qb;za=e.x;e.x=sd;gb=e.y;e.y=fb;Ia=e.z;e.z=kc;Bb=O.vert;O.vert=42;Ab=O.frag;O.frag=41;v.dirty=!0;g(p,a,h);p.viewportWidth=A;p.viewportHeight=z;Ua[0]=D;Ua[1]=E;Ua[2]=u;Ua[3]=B;T[0]=w;T[1]=K;T[2]=ka;T[3]=da;H.blend_enable=J;na[0]=G;na[1]=x;pc[0]=I;pc[1]=M;pc[2]=P;pc[3]=Q;H.depth_enable=
t;$a[0]=U;$a[1]=C;$a[2]=Y;$a[3]=Z;H.scissor_enable=ba;H.stencil_enable=ja;qa&&(b.cpuTime+=performance.now()-ra);La&&S.destroyStream(xa);k.elements=Pa;k.offset=Jd;k.count=Ub;k.primitive=db;f[14]=bc;f[31]=Sd;f[10]=He;f[34]=nd;f[6]=rd;f[7]=Bc;f[8]=gd;f[9]=nc;f[3]=Cc;Db&&ma.destroyStream(mc);n.buffer=Eb;n.divisor=Wa;n.normalized=ya;n.offset=xd;n.size=ub;n.state=Ra;n.stride=Sb;n.type=eb;n.w=Tc;n.x=Wb;n.y=Ve;n.z=jc;Ob&&ma.destroyStream(vd);e.buffer=Rc;e.divisor=ac;e.normalized=lb;e.offset=mb;e.size=ta;
e.state=qb;e.stride=ua;e.type=Ta;e.w=bb;e.x=za;e.y=gb;e.z=Ia;O.vert=Bb;O.frag=Ab;v.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,b,g,h,d,c,n,e,q,u,w,l,E,r,D,K,z,ha,C,J,ma,p,v,k,S,Q,V,A,cb,H,O,f,m,T,ra,na,Yc,pc,la,Pa,Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa,fc,hc,tc,wd,wc){var X,N,ia,Ca,Gb,Lc,Wc,F,B,fa,sa,aa,ga,pa,G,x,ca,M,Ba,
Ga,t,qc,Ha,W,Hb,zb,Ze,Xd,be,Ud,te,re,Kc,de,se,Pd,Qd,Yd,Jd;X=a.attributes;N=a.buffer;ia=a.context;Ca=a.current;Gb=a.draw;Lc=a.elements;Wc=a.extensions;F=a.framebuffer;B=a.gl;fa=a.isBufferArgs;sa=a.next;aa=a.shader;ga=a.uniforms;pa=a.vao;G=sa.blend_color;x=Ca.blend_color;ca=sa.blend_equation;M=Ca.blend_equation;Ba=sa.blend_func;Ga=Ca.blend_func;t=sa.colorMask;qc=Ca.colorMask;Ha=sa.depth_range;W=Ca.depth_range;Hb=sa.polygonOffset_offset;zb=Ca.polygonOffset_offset;Ze=sa.sample_coverage;Xd=Ca.sample_coverage;
be=sa.scissor_box;Ud=Ca.scissor_box;te=sa.stencil_func;re=Ca.stencil_func;Kc=sa.stencil_opBack;de=Ca.stencil_opBack;se=sa.stencil_opFront;Pd=Ca.stencil_opFront;Qd=sa.viewport;Yd=Ca.viewport;Jd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var e,d,f,g,h,k;e=F.next;e!==F.cur&&(e?B.bindFramebuffer(36160,e.framebuffer):B.bindFramebuffer(36160,null),F.cur=e);if(Ca.dirty){var l,m,n,p,q,r,v,A,z,D,E,u,w,G,H,K,ka,da,J,S,Q,O,V,T,C,
ha,aa,ga,ma,Ba,ub,Ra,cb,eb;l=sa.dither;l!==Ca.dither&&(l?B.enable(3024):B.disable(3024),Ca.dither=l);m=ca[0];n=ca[1];if(m!==M[0]||n!==M[1])B.blendEquationSeparate(m,n),M[0]=m,M[1]=n;p=sa.depth_func;p!==Ca.depth_func&&(B.depthFunc(p),Ca.depth_func=p);q=Ha[0];r=Ha[1];if(q!==W[0]||r!==W[1])B.depthRange(q,r),W[0]=q,W[1]=r;v=sa.depth_mask;v!==Ca.depth_mask&&(B.depthMask(v),Ca.depth_mask=v);A=t[0];z=t[1];D=t[2];E=t[3];if(A!==qc[0]||z!==qc[1]||D!==qc[2]||E!==qc[3])B.colorMask(A,z,D,E),qc[0]=A,qc[1]=z,qc[2]=
D,qc[3]=E;u=sa.cull_enable;u!==Ca.cull_enable&&(u?B.enable(2884):B.disable(2884),Ca.cull_enable=u);w=sa.cull_face;w!==Ca.cull_face&&(B.cullFace(w),Ca.cull_face=w);G=sa.frontFace;G!==Ca.frontFace&&(B.frontFace(G),Ca.frontFace=G);H=sa.lineWidth;H!==Ca.lineWidth&&(B.lineWidth(H),Ca.lineWidth=H);K=sa.polygonOffset_enable;K!==Ca.polygonOffset_enable&&(K?B.enable(32823):B.disable(32823),Ca.polygonOffset_enable=K);ka=Hb[0];da=Hb[1];if(ka!==zb[0]||da!==zb[1])B.polygonOffset(ka,da),zb[0]=ka,zb[1]=da;J=sa.sample_alpha;
J!==Ca.sample_alpha&&(J?B.enable(32926):B.disable(32926),Ca.sample_alpha=J);S=sa.sample_enable;S!==Ca.sample_enable&&(S?B.enable(32928):B.disable(32928),Ca.sample_enable=S);Q=Ze[0];O=Ze[1];if(Q!==Xd[0]||O!==Xd[1])B.sampleCoverage(Q,O),Xd[0]=Q,Xd[1]=O;V=sa.stencil_mask;V!==Ca.stencil_mask&&(B.stencilMask(V),Ca.stencil_mask=V);T=te[0];C=te[1];ha=te[2];if(T!==re[0]||C!==re[1]||ha!==re[2])B.stencilFunc(T,C,ha),re[0]=T,re[1]=C,re[2]=ha;aa=se[0];ga=se[1];ma=se[2];Ba=se[3];if(aa!==Pd[0]||ga!==Pd[1]||ma!==
Pd[2]||Ba!==Pd[3])B.stencilOpSeparate(aa,ga,ma,Ba),Pd[0]=aa,Pd[1]=ga,Pd[2]=ma,Pd[3]=Ba;ub=Kc[0];Ra=Kc[1];cb=Kc[2];eb=Kc[3];if(ub!==de[0]||Ra!==de[1]||cb!==de[2]||eb!==de[3])B.stencilOpSeparate(ub,Ra,cb,eb),de[0]=ub,de[1]=Ra,de[2]=cb,de[3]=eb}B.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;B.enable(3042);Ca.blend_enable=!0;B.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;B.disable(2929);Ca.depth_enable=!1;B.enable(3089);Ca.scissor_enable=!0;B.disable(2960);Ca.stencil_enable=
!1;if(d=Ca.profile)f=performance.now(),b.count+=c;B.useProgram(ra.program);g=Wc.angle_instanced_arrays;var Tc;pa.setVAO(null);B.uniform1i(y.location,!1);B.uniform1i(bc.location,qa.bind());Tc=Gb.instances;for(h=0;h<c;++h){k=a[h];var Wb,db,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,Qd,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,
Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,be,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,ve,ue,We,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Le,ye,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf,dg,Sf,Tf;Wb=k.viewport;db=Wb.x|0;jc=Wb.y|0;Ob="width"in Wb?Wb.width|0:ia.framebufferWidth-db;vd="height"in Wb?Wb.height|0:ia.framebufferHeight-jc;Pb=ia.viewportWidth;ia.viewportWidth=
Ob;Ma=ia.viewportHeight;ia.viewportHeight=vd;B.viewport(db,jc,Ob,vd);Yd[0]=db;Yd[1]=jc;Yd[2]=Ob;Yd[3]=vd;pb=k.viewport;vb=pb.x|0;ib=pb.y|0;Na="width"in pb?pb.width|0:ia.framebufferWidth-vb;yc="height"in pb?pb.height|0:ia.framebufferHeight-ib;B.scissor(vb,ib,Na,yc);Ud[0]=vb;Ud[1]=ib;Ud[2]=Na;Ud[3]=yc;Qb=na.call(this,ia,k,h);sd=!1;fb=null;kc=0;Rc=!1;lb=ac=0;mb=1;ta=0;qb=5126;za=bb=Ta=ua=0;fa(Qb)?(sd=!0,fb=N.createStream(34962,Qb),qb=fb.dtype):(fb=N.getBuffer(Qb))?qb=fb.dtype:"constant"in Qb?(mb=2,"number"===
typeof Qb.constant?(Ta=Qb.constant,bb=za=ua=0):(Ta=0<Qb.constant.length?Qb.constant[0]:0,bb=1<Qb.constant.length?Qb.constant[1]:0,za=2<Qb.constant.length?Qb.constant[2]:0,ua=3<Qb.constant.length?Qb.constant[3]:0)):(fb=fa(Qb.buffer)?N.createStream(34962,Qb.buffer):N.getBuffer(Qb.buffer),qb="type"in Qb?Jd[Qb.type]:fb.dtype,Rc=!!Qb.normalized,lb=Qb.size|0,ac=Qb.offset|0,ta=Qb.stride|0,kc=Qb.divisor|0);gb=hc.location;Ia=X[gb];if(1===mb){Ia.buffer||B.enableVertexAttribArray(gb);Bb=lb||1;if(Ia.type!==qb||
Ia.size!==Bb||Ia.buffer!==fb||Ia.normalized!==Rc||Ia.offset!==ac||Ia.stride!==ta)B.bindBuffer(34962,fb.buffer),B.vertexAttribPointer(gb,Bb,qb,Rc,ta,ac),Ia.type=qb,Ia.size=Bb,Ia.buffer=fb,Ia.normalized=Rc,Ia.offset=ac,Ia.stride=ta;Ia.divisor!==kc&&(g.vertexAttribDivisorANGLE(gb,kc),Ia.divisor=kc)}else if(Ia.buffer&&(B.disableVertexAttribArray(gb),Ia.buffer=null),Ia.x!==Ta||Ia.y!==bb||Ia.z!==za||Ia.w!==ua)B.vertexAttrib4f(gb,Ta,bb,za,ua),Ia.x=Ta,Ia.y=bb,Ia.z=za,Ia.w=ua;Ab=Yc.call(this,ia,k,h);Qa=!1;
uc=null;Ib=0;Za=!1;va=Rb=0;kd=1;Ja=0;Lb=5126;cc=wa=jb=hb=0;fa(Ab)?(Qa=!0,uc=N.createStream(34962,Ab),Lb=uc.dtype):(uc=N.getBuffer(Ab))?Lb=uc.dtype:"constant"in Ab?(kd=2,"number"===typeof Ab.constant?(jb=Ab.constant,wa=cc=hb=0):(jb=0<Ab.constant.length?Ab.constant[0]:0,wa=1<Ab.constant.length?Ab.constant[1]:0,cc=2<Ab.constant.length?Ab.constant[2]:0,hb=3<Ab.constant.length?Ab.constant[3]:0)):(uc=fa(Ab.buffer)?N.createStream(34962,Ab.buffer):N.getBuffer(Ab.buffer),Lb="type"in Ab?Jd[Ab.type]:uc.dtype,
Za=!!Ab.normalized,va=Ab.size|0,Rb=Ab.offset|0,Ja=Ab.stride|0,Ib=Ab.divisor|0);Da=wd.location;rb=X[Da];if(1===kd){rb.buffer||B.enableVertexAttribArray(Da);sb=va||1;if(rb.type!==Lb||rb.size!==sb||rb.buffer!==uc||rb.normalized!==Za||rb.offset!==Rb||rb.stride!==Ja)B.bindBuffer(34962,uc.buffer),B.vertexAttribPointer(Da,sb,Lb,Za,Ja,Rb),rb.type=Lb,rb.size=sb,rb.buffer=uc,rb.normalized=Za,rb.offset=Rb,rb.stride=Ja;rb.divisor!==Ib&&(g.vertexAttribDivisorANGLE(Da,Ib),rb.divisor=Ib)}else if(rb.buffer&&(B.disableVertexAttribArray(Da),
rb.buffer=null),rb.x!==jb||rb.y!==wa||rb.z!==cc||rb.w!==hb)B.vertexAttrib4f(Da,jb,wa,cc,hb),rb.x=jb,rb.y=wa,rb.z=cc,rb.w=hb;Xa=pc.call(this,ia,k,h);Ya=!1;lc=null;vc=0;rc=!1;Xb=Va=0;Gc=1;Ea=0;zc=5126;wb=nb=Aa=Oa=0;fa(Xa)?(Ya=!0,lc=N.createStream(34962,Xa),zc=lc.dtype):(lc=N.getBuffer(Xa))?zc=lc.dtype:"constant"in Xa?(Gc=2,"number"===typeof Xa.constant?(Aa=Xa.constant,nb=wb=Oa=0):(Aa=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,wb=2<Xa.constant.length?Xa.constant[2]:
0,Oa=3<Xa.constant.length?Xa.constant[3]:0)):(lc=fa(Xa.buffer)?N.createStream(34962,Xa.buffer):N.getBuffer(Xa.buffer),zc="type"in Xa?Jd[Xa.type]:lc.dtype,rc=!!Xa.normalized,Xb=Xa.size|0,Va=Xa.offset|0,Ea=Xa.stride|0,vc=Xa.divisor|0);Cb=tc.location;tb=X[Cb];if(1===Gc){tb.buffer||B.enableVertexAttribArray(Cb);sc=Xb||1;if(tb.type!==zc||tb.size!==sc||tb.buffer!==lc||tb.normalized!==rc||tb.offset!==Va||tb.stride!==Ea)B.bindBuffer(34962,lc.buffer),B.vertexAttribPointer(Cb,sc,zc,rc,Ea,Va),tb.type=zc,tb.size=
sc,tb.buffer=lc,tb.normalized=rc,tb.offset=Va,tb.stride=Ea;tb.divisor!==vc&&(g.vertexAttribDivisorANGLE(Cb,vc),tb.divisor=vc)}else if(tb.buffer&&(B.disableVertexAttribArray(Cb),tb.buffer=null),tb.x!==Aa||tb.y!==nb||tb.z!==wb||tb.w!==Oa)B.vertexAttrib4f(Cb,Aa,nb,wb,Oa),tb.x=Aa,tb.y=nb,tb.z=wb,tb.w=Oa;xb=la.call(this,ia,k,h);ld=!1;oc=null;ee=0;Nc=!1;id=hd=0;Tb=1;$b=0;Mb=5126;yb=ob=Yb=Fa=0;fa(xb)?(ld=!0,oc=N.createStream(34962,xb),Mb=oc.dtype):(oc=N.getBuffer(xb))?Mb=oc.dtype:"constant"in xb?(Tb=2,"number"===
typeof xb.constant?(Yb=xb.constant,ob=yb=Fa=0):(Yb=0<xb.constant.length?xb.constant[0]:0,ob=1<xb.constant.length?xb.constant[1]:0,yb=2<xb.constant.length?xb.constant[2]:0,Fa=3<xb.constant.length?xb.constant[3]:0)):(oc=fa(xb.buffer)?N.createStream(34962,xb.buffer):N.getBuffer(xb.buffer),Mb="type"in xb?Jd[xb.type]:oc.dtype,Nc=!!xb.normalized,id=xb.size|0,hd=xb.offset|0,$b=xb.stride|0,ee=xb.divisor|0);Kb=wc.location;Nb=X[Kb];if(1===Tb){Nb.buffer||B.enableVertexAttribArray(Kb);dc=id||1;if(Nb.type!==Mb||
Nb.size!==dc||Nb.buffer!==oc||Nb.normalized!==Nc||Nb.offset!==hd||Nb.stride!==$b)B.bindBuffer(34962,oc.buffer),B.vertexAttribPointer(Kb,dc,Mb,Nc,$b,hd),Nb.type=Mb,Nb.size=dc,Nb.buffer=oc,Nb.normalized=Nc,Nb.offset=hd,Nb.stride=$b;Nb.divisor!==ee&&(g.vertexAttribDivisorANGLE(Kb,ee),Nb.divisor=ee)}else if(Nb.buffer&&(B.disableVertexAttribArray(Kb),Nb.buffer=null),Nb.x!==Yb||Nb.y!==ob||Nb.z!==yb||Nb.w!==Fa)B.vertexAttrib4f(Kb,Yb,ob,yb,Fa),Nb.x=Yb,Nb.y=ob,Nb.z=yb,Nb.w=Fa;gc=Pa.call(this,ia,k,h);Qd=!1;
Ec=null;Fc=0;Hc=!1;bd=Oc=0;Uc=1;Pc=0;Jb=5126;Vc=Jc=Qc=Fb=0;fa(gc)?(Qd=!0,Ec=N.createStream(34962,gc),Jb=Ec.dtype):(Ec=N.getBuffer(gc))?Jb=Ec.dtype:"constant"in gc?(Uc=2,"number"===typeof gc.constant?(Qc=gc.constant,Jc=Vc=Fb=0):(Qc=0<gc.constant.length?gc.constant[0]:0,Jc=1<gc.constant.length?gc.constant[1]:0,Vc=2<gc.constant.length?gc.constant[2]:0,Fb=3<gc.constant.length?gc.constant[3]:0)):(Ec=fa(gc.buffer)?N.createStream(34962,gc.buffer):N.getBuffer(gc.buffer),Jb="type"in gc?Jd[gc.type]:Ec.dtype,
Hc=!!gc.normalized,bd=gc.size|0,Oc=gc.offset|0,Pc=gc.stride|0,Fc=gc.divisor|0);ec=ea.location;Zc=X[ec];if(1===Uc){Zc.buffer||B.enableVertexAttribArray(ec);dd=bd||1;if(Zc.type!==Jb||Zc.size!==dd||Zc.buffer!==Ec||Zc.normalized!==Hc||Zc.offset!==Oc||Zc.stride!==Pc)B.bindBuffer(34962,Ec.buffer),B.vertexAttribPointer(ec,dd,Jb,Hc,Pc,Oc),Zc.type=Jb,Zc.size=dd,Zc.buffer=Ec,Zc.normalized=Hc,Zc.offset=Oc,Zc.stride=Pc;Zc.divisor!==Fc&&(g.vertexAttribDivisorANGLE(ec,Fc),Zc.divisor=Fc)}else if(Zc.buffer&&(B.disableVertexAttribArray(ec),
Zc.buffer=null),Zc.x!==Qc||Zc.y!==Jc||Zc.z!==Vc||Zc.w!==Fb)B.vertexAttrib4f(ec,Qc,Jc,Vc,Fb),Zc.x=Qc,Zc.y=Jc,Zc.z=Vc,Zc.w=Fb;pd=Z.call(this,ia,k,h);ne=!1;$c=null;be=0;Vd=!1;Ie=he=0;ke=1;Gd=0;Ed=5126;jd=qd=Ic=fd=0;fa(pd)?(ne=!0,$c=N.createStream(34962,pd),Ed=$c.dtype):($c=N.getBuffer(pd))?Ed=$c.dtype:"constant"in pd?(ke=2,"number"===typeof pd.constant?(Ic=pd.constant,qd=jd=fd=0):(Ic=0<pd.constant.length?pd.constant[0]:0,qd=1<pd.constant.length?pd.constant[1]:0,jd=2<pd.constant.length?pd.constant[2]:
0,fd=3<pd.constant.length?pd.constant[3]:0)):($c=fa(pd.buffer)?N.createStream(34962,pd.buffer):N.getBuffer(pd.buffer),Ed="type"in pd?Jd[pd.type]:$c.dtype,Vd=!!pd.normalized,Ie=pd.size|0,he=pd.offset|0,Gd=pd.stride|0,be=pd.divisor|0);cd=$a.location;md=X[cd];if(1===ke){md.buffer||B.enableVertexAttribArray(cd);Cd=Ie||1;if(md.type!==Ed||md.size!==Cd||md.buffer!==$c||md.normalized!==Vd||md.offset!==he||md.stride!==Gd)B.bindBuffer(34962,$c.buffer),B.vertexAttribPointer(cd,Cd,Ed,Vd,Gd,he),md.type=Ed,md.size=
Cd,md.buffer=$c,md.normalized=Vd,md.offset=he,md.stride=Gd;md.divisor!==be&&(g.vertexAttribDivisorANGLE(cd,be),md.divisor=be)}else if(md.buffer&&(B.disableVertexAttribArray(cd),md.buffer=null),md.x!==Ic||md.y!==qd||md.z!==jd||md.w!==fd)B.vertexAttrib4f(cd,Ic,qd,jd,fd),md.x=Ic,md.y=qd,md.z=jd,md.w=fd;zd=L.call(this,ia,k,h);ve=!1;ue=null;We=0;le=!1;ae=ce=0;oe=1;Zd=0;fe=5126;ie=pe=Xc=Ac=0;fa(zd)?(ve=!0,ue=N.createStream(34962,zd),fe=ue.dtype):(ue=N.getBuffer(zd))?fe=ue.dtype:"constant"in zd?(oe=2,"number"===
typeof zd.constant?(Xc=zd.constant,pe=ie=Ac=0):(Xc=0<zd.constant.length?zd.constant[0]:0,pe=1<zd.constant.length?zd.constant[1]:0,ie=2<zd.constant.length?zd.constant[2]:0,Ac=3<zd.constant.length?zd.constant[3]:0)):(ue=fa(zd.buffer)?N.createStream(34962,zd.buffer):N.getBuffer(zd.buffer),fe="type"in zd?Jd[zd.type]:ue.dtype,le=!!zd.normalized,ae=zd.size|0,ce=zd.offset|0,Zd=zd.stride|0,We=zd.divisor|0);Fd=R.location;Id=X[Fd];if(1===oe){Id.buffer||B.enableVertexAttribArray(Fd);Kd=ae||4;if(Id.type!==fe||
Id.size!==Kd||Id.buffer!==ue||Id.normalized!==le||Id.offset!==ce||Id.stride!==Zd)B.bindBuffer(34962,ue.buffer),B.vertexAttribPointer(Fd,Kd,fe,le,Zd,ce),Id.type=fe,Id.size=Kd,Id.buffer=ue,Id.normalized=le,Id.offset=ce,Id.stride=Zd;Id.divisor!==We&&(g.vertexAttribDivisorANGLE(Fd,We),Id.divisor=We)}else if(Id.buffer&&(B.disableVertexAttribArray(Fd),Id.buffer=null),Id.x!==Xc||Id.y!==pe||Id.z!==ie||Id.w!==Ac)B.vertexAttrib4f(Fd,Xc,pe,ie,Ac),Id.x=Xc,Id.y=pe,Id.z=ie,Id.w=Ac;Ld=I.call(this,ia,k,h);ge=!1;
Te=null;we=0;me=!1;Oe=Ne=0;Je=1;qe=0;ze=5126;Ae=Ee=De=Ce=0;fa(Ld)?(ge=!0,Te=N.createStream(34962,Ld),ze=Te.dtype):(Te=N.getBuffer(Ld))?ze=Te.dtype:"constant"in Ld?(Je=2,"number"===typeof Ld.constant?(De=Ld.constant,Ee=Ae=Ce=0):(De=0<Ld.constant.length?Ld.constant[0]:0,Ee=1<Ld.constant.length?Ld.constant[1]:0,Ae=2<Ld.constant.length?Ld.constant[2]:0,Ce=3<Ld.constant.length?Ld.constant[3]:0)):(Te=fa(Ld.buffer)?N.createStream(34962,Ld.buffer):N.getBuffer(Ld.buffer),ze="type"in Ld?Jd[Ld.type]:Te.dtype,
me=!!Ld.normalized,Oe=Ld.size|0,Ne=Ld.offset|0,qe=Ld.stride|0,we=Ld.divisor|0);Hd=Ub.location;Od=X[Hd];if(1===Je){Od.buffer||B.enableVertexAttribArray(Hd);Wd=Oe||4;if(Od.type!==ze||Od.size!==Wd||Od.buffer!==Te||Od.normalized!==me||Od.offset!==Ne||Od.stride!==qe)B.bindBuffer(34962,Te.buffer),B.vertexAttribPointer(Hd,Wd,ze,me,qe,Ne),Od.type=ze,Od.size=Wd,Od.buffer=Te,Od.normalized=me,Od.offset=Ne,Od.stride=qe;Od.divisor!==we&&(g.vertexAttribDivisorANGLE(Hd,we),Od.divisor=we)}else if(Od.buffer&&(B.disableVertexAttribArray(Hd),
Od.buffer=null),Od.x!==De||Od.y!==Ee||Od.z!==Ae||Od.w!==Ce)B.vertexAttrib4f(Hd,De,Ee,Ae,Ce),Od.x=De,Od.y=Ee,Od.z=Ae,Od.w=Ce;$d=U.call(this,ia,k,h);Fe=!1;Bd=null;Md=0;xe=!1;ff=Ge=0;Ye=1;Pe=0;Ke=5126;Re=Qe=Ue=Xe=0;fa($d)?(Fe=!0,Bd=N.createStream(34962,$d),Ke=Bd.dtype):(Bd=N.getBuffer($d))?Ke=Bd.dtype:"constant"in $d?(Ye=2,"number"===typeof $d.constant?(Ue=$d.constant,Qe=Re=Xe=0):(Ue=0<$d.constant.length?$d.constant[0]:0,Qe=1<$d.constant.length?$d.constant[1]:0,Re=2<$d.constant.length?$d.constant[2]:
0,Xe=3<$d.constant.length?$d.constant[3]:0)):(Bd=fa($d.buffer)?N.createStream(34962,$d.buffer):N.getBuffer($d.buffer),Ke="type"in $d?Jd[$d.type]:Bd.dtype,xe=!!$d.normalized,ff=$d.size|0,Ge=$d.offset|0,Pe=$d.stride|0,Md=$d.divisor|0);Nd=ja.location;Td=X[Nd];if(1===Ye){Td.buffer||B.enableVertexAttribArray(Nd);Se=ff||1;if(Td.type!==Ke||Td.size!==Se||Td.buffer!==Bd||Td.normalized!==xe||Td.offset!==Ge||Td.stride!==Pe)B.bindBuffer(34962,Bd.buffer),B.vertexAttribPointer(Nd,Se,Ke,xe,Pe,Ge),Td.type=Ke,Td.size=
Se,Td.buffer=Bd,Td.normalized=xe,Td.offset=Ge,Td.stride=Pe;Td.divisor!==Md&&(g.vertexAttribDivisorANGLE(Nd,Md),Td.divisor=Md)}else if(Td.buffer&&(B.disableVertexAttribArray(Nd),Td.buffer=null),Td.x!==Ue||Td.y!==Qe||Td.z!==Re||Td.w!==Xe)B.vertexAttrib4f(Nd,Ue,Qe,Re,Xe),Td.x=Ue,Td.y=Qe,Td.z=Re,Td.w=Xe;gf=ia.pixelRatio;h&&lf===gf||(lf=gf,B.uniform1f(Ua.location,gf));cf=k.scale;hf=cf[0];kf=cf[1];h&&jf===hf&&qf===kf||(jf=hf,qf=kf,B.uniform2f(Y.location,hf,kf));nf=k.scaleFract;rf=nf[0];Cf=nf[1];h&&Bf===
rf&&Le===Cf||(Bf=rf,Le=Cf,B.uniform2f(kb.location,rf,Cf));ye=k.translate;of=ye[0];Df=ye[1];h&&pf===of&&Hf===Df||(pf=of,Hf=Df,B.uniform2f(oa.location,of,Df));Af=k.translateFract;Ef=Af[0];wf=Af[1];h&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,B.uniform2f(fc.location,Ef,wf));uf=P.call(this,ia,k,h);yf=uf[0];Jf=uf[1];h&&zf===yf&&Kf===Jf||(zf=yf,Kf=Jf,B.uniform2f(La.location,yf,Jf));Lf=k.opacity;h&&Mf===Lf||(Mf=Lf,B.uniform1f(xa.location,Lf));(sf=k.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Rf=
sf._texture;B.uniform1i(ba.location,Rf.bind());If=k.elements;tf=null;(tf=(dg=fa(If))?Lc.createStream(If):Lc.getElements(If))&&B.bindBuffer(34963,tf.buffer.buffer);Sf=k.offset;if(Tf=k.count)0<Tc?tf?g.drawElementsInstancedANGLE(0,Tf,tf.type,Sf<<(tf.type-5121>>1),Tc):g.drawArraysInstancedANGLE(0,Sf,Tf,Tc):0>Tc&&(tf?B.drawElements(0,Tf,tf.type,Sf<<(tf.type-5121>>1)):B.drawArrays(0,Sf,Tf)),ia.viewportWidth=Pb,ia.viewportHeight=Ma,sd&&N.destroyStream(fb),Qa&&N.destroyStream(uc),Ya&&N.destroyStream(lc),
ld&&N.destroyStream(oc),Qd&&N.destroyStream(Ec),ne&&N.destroyStream($c),ve&&N.destroyStream(ue),ge&&N.destroyStream(Te),Fe&&N.destroyStream(Bd),Rf.unbind(),dg&&Lc.destroyStream(tf)}qa.unbind();Ca.dirty=!0;pa.setVAO(null);d&&(b.cpuTime+=performance.now()-f)},draw:function(a){var f,k,m,p,v,A,z,D,G,H,K,J,S,I,Q,O,L,V,P,T,C,ha,U,aa,ga,Z,ma,Ba,qa,ra,la,na,Ka,Eb,Wa,ya,cb,ub,Ra,Sb,eb,Pa,Wb,db,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,
jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,pc,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,Qd,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Yc,Vd,he,be,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,ve,ue,We,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne,Oe,Je,qe;f=F.next;f!==F.cur&&(f?B.bindFramebuffer(36160,f.framebuffer):B.bindFramebuffer(36160,null),F.cur=f);if(Ca.dirty){var ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,
hf,jf,kf,qf,nf,rf;ze=sa.dither;ze!==Ca.dither&&(ze?B.enable(3024):B.disable(3024),Ca.dither=ze);Ce=ca[0];De=ca[1];if(Ce!==M[0]||De!==M[1])B.blendEquationSeparate(Ce,De),M[0]=Ce,M[1]=De;Ee=sa.depth_func;Ee!==Ca.depth_func&&(B.depthFunc(Ee),Ca.depth_func=Ee);Ae=Ha[0];Hd=Ha[1];if(Ae!==W[0]||Hd!==W[1])B.depthRange(Ae,Hd),W[0]=Ae,W[1]=Hd;Od=sa.depth_mask;Od!==Ca.depth_mask&&(B.depthMask(Od),Ca.depth_mask=Od);Wd=t[0];$d=t[1];Fe=t[2];Bd=t[3];if(Wd!==qc[0]||$d!==qc[1]||Fe!==qc[2]||Bd!==qc[3])B.colorMask(Wd,
$d,Fe,Bd),qc[0]=Wd,qc[1]=$d,qc[2]=Fe,qc[3]=Bd;Md=sa.cull_enable;Md!==Ca.cull_enable&&(Md?B.enable(2884):B.disable(2884),Ca.cull_enable=Md);xe=sa.cull_face;xe!==Ca.cull_face&&(B.cullFace(xe),Ca.cull_face=xe);Ge=sa.frontFace;Ge!==Ca.frontFace&&(B.frontFace(Ge),Ca.frontFace=Ge);ff=sa.lineWidth;ff!==Ca.lineWidth&&(B.lineWidth(ff),Ca.lineWidth=ff);Ye=sa.polygonOffset_enable;Ye!==Ca.polygonOffset_enable&&(Ye?B.enable(32823):B.disable(32823),Ca.polygonOffset_enable=Ye);Pe=Hb[0];Ke=Hb[1];if(Pe!==zb[0]||Ke!==
zb[1])B.polygonOffset(Pe,Ke),zb[0]=Pe,zb[1]=Ke;Xe=sa.sample_alpha;Xe!==Ca.sample_alpha&&(Xe?B.enable(32926):B.disable(32926),Ca.sample_alpha=Xe);Ue=sa.sample_enable;Ue!==Ca.sample_enable&&(Ue?B.enable(32928):B.disable(32928),Ca.sample_enable=Ue);Qe=Ze[0];Re=Ze[1];if(Qe!==Xd[0]||Re!==Xd[1])B.sampleCoverage(Qe,Re),Xd[0]=Qe,Xd[1]=Re;Nd=sa.stencil_mask;Nd!==Ca.stencil_mask&&(B.stencilMask(Nd),Ca.stencil_mask=Nd);Td=te[0];Se=te[1];gf=te[2];if(Td!==re[0]||Se!==re[1]||gf!==re[2])B.stencilFunc(Td,Se,gf),
re[0]=Td,re[1]=Se,re[2]=gf;lf=se[0];cf=se[1];hf=se[2];jf=se[3];if(lf!==Pd[0]||cf!==Pd[1]||hf!==Pd[2]||jf!==Pd[3])B.stencilOpSeparate(lf,cf,hf,jf),Pd[0]=lf,Pd[1]=cf,Pd[2]=hf,Pd[3]=jf;kf=Kc[0];qf=Kc[1];nf=Kc[2];rf=Kc[3];if(kf!==de[0]||qf!==de[1]||nf!==de[2]||rf!==de[3])B.stencilOpSeparate(kf,qf,nf,rf),de[0]=kf,de[1]=qf,de[2]=nf,de[3]=rf}k=a.viewport;m=k.x|0;p=k.y|0;v="width"in k?k.width|0:ia.framebufferWidth-m;A="height"in k?k.height|0:ia.framebufferHeight-p;z=ia.viewportWidth;ia.viewportWidth=v;D=
ia.viewportHeight;ia.viewportHeight=A;B.viewport(m,p,v,A);Yd[0]=m;Yd[1]=p;Yd[2]=v;Yd[3]=A;B.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;B.enable(3042);Ca.blend_enable=!0;B.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;B.disable(2929);Ca.depth_enable=!1;G=a.viewport;H=G.x|0;K=G.y|0;J="width"in G?G.width|0:ia.framebufferWidth-H;S="height"in G?G.height|0:ia.framebufferHeight-K;B.scissor(H,K,J,S);Ud[0]=H;Ud[1]=K;Ud[2]=J;Ud[3]=S;B.enable(3089);Ca.scissor_enable=!0;B.disable(2960);
Ca.stencil_enable=!1;if(I=Ca.profile)Q=performance.now(),b.count++;B.useProgram(g.program);O=Wc.angle_instanced_arrays;pa.setVAO(null);L=h.call(this,ia,a,0);V=!1;P=null;T=0;C=!1;U=ha=0;aa=1;ga=0;Z=5126;ra=qa=Ba=ma=0;fa(L)?(V=!0,P=N.createStream(34962,L),Z=P.dtype):(P=N.getBuffer(L))?Z=P.dtype:"constant"in L?(aa=2,"number"===typeof L.constant?(Ba=L.constant,qa=ra=ma=0):(Ba=0<L.constant.length?L.constant[0]:0,qa=1<L.constant.length?L.constant[1]:0,ra=2<L.constant.length?L.constant[2]:0,ma=3<L.constant.length?
L.constant[3]:0)):(P=fa(L.buffer)?N.createStream(34962,L.buffer):N.getBuffer(L.buffer),Z="type"in L?Jd[L.type]:P.dtype,C=!!L.normalized,U=L.size|0,ha=L.offset|0,ga=L.stride|0,T=L.divisor|0);la=hc.location;na=X[la];if(1===aa){na.buffer||B.enableVertexAttribArray(la);Ka=U||1;if(na.type!==Z||na.size!==Ka||na.buffer!==P||na.normalized!==C||na.offset!==ha||na.stride!==ga)B.bindBuffer(34962,P.buffer),B.vertexAttribPointer(la,Ka,Z,C,ga,ha),na.type=Z,na.size=Ka,na.buffer=P,na.normalized=C,na.offset=ha,na.stride=
ga;na.divisor!==T&&(O.vertexAttribDivisorANGLE(la,T),na.divisor=T)}else if(na.buffer&&(B.disableVertexAttribArray(la),na.buffer=null),na.x!==Ba||na.y!==qa||na.z!==ra||na.w!==ma)B.vertexAttrib4f(la,Ba,qa,ra,ma),na.x=Ba,na.y=qa,na.z=ra,na.w=ma;Eb=d.call(this,ia,a,0);Wa=!1;ya=null;cb=0;ub=!1;Sb=Ra=0;eb=1;Pa=0;Wb=5126;vd=Ob=jc=db=0;fa(Eb)?(Wa=!0,ya=N.createStream(34962,Eb),Wb=ya.dtype):(ya=N.getBuffer(Eb))?Wb=ya.dtype:"constant"in Eb?(eb=2,"number"===typeof Eb.constant?(jc=Eb.constant,Ob=vd=db=0):(jc=
0<Eb.constant.length?Eb.constant[0]:0,Ob=1<Eb.constant.length?Eb.constant[1]:0,vd=2<Eb.constant.length?Eb.constant[2]:0,db=3<Eb.constant.length?Eb.constant[3]:0)):(ya=fa(Eb.buffer)?N.createStream(34962,Eb.buffer):N.getBuffer(Eb.buffer),Wb="type"in Eb?Jd[Eb.type]:ya.dtype,ub=!!Eb.normalized,Sb=Eb.size|0,Ra=Eb.offset|0,Pa=Eb.stride|0,cb=Eb.divisor|0);Pb=wd.location;Ma=X[Pb];if(1===eb){Ma.buffer||B.enableVertexAttribArray(Pb);pb=Sb||1;if(Ma.type!==Wb||Ma.size!==pb||Ma.buffer!==ya||Ma.normalized!==ub||
Ma.offset!==Ra||Ma.stride!==Pa)B.bindBuffer(34962,ya.buffer),B.vertexAttribPointer(Pb,pb,Wb,ub,Pa,Ra),Ma.type=Wb,Ma.size=pb,Ma.buffer=ya,Ma.normalized=ub,Ma.offset=Ra,Ma.stride=Pa;Ma.divisor!==cb&&(O.vertexAttribDivisorANGLE(Pb,cb),Ma.divisor=cb)}else if(Ma.buffer&&(B.disableVertexAttribArray(Pb),Ma.buffer=null),Ma.x!==jc||Ma.y!==Ob||Ma.z!==vd||Ma.w!==db)B.vertexAttrib4f(Pb,jc,Ob,vd,db),Ma.x=jc,Ma.y=Ob,Ma.z=vd,Ma.w=db;vb=c.call(this,ia,a,0);ib=!1;Na=null;yc=0;Qb=!1;fb=sd=0;kc=1;Rc=0;ac=5126;qb=ta=
mb=lb=0;fa(vb)?(ib=!0,Na=N.createStream(34962,vb),ac=Na.dtype):(Na=N.getBuffer(vb))?ac=Na.dtype:"constant"in vb?(kc=2,"number"===typeof vb.constant?(mb=vb.constant,ta=qb=lb=0):(mb=0<vb.constant.length?vb.constant[0]:0,ta=1<vb.constant.length?vb.constant[1]:0,qb=2<vb.constant.length?vb.constant[2]:0,lb=3<vb.constant.length?vb.constant[3]:0)):(Na=fa(vb.buffer)?N.createStream(34962,vb.buffer):N.getBuffer(vb.buffer),ac="type"in vb?Jd[vb.type]:Na.dtype,Qb=!!vb.normalized,fb=vb.size|0,sd=vb.offset|0,Rc=
vb.stride|0,yc=vb.divisor|0);ua=tc.location;Ta=X[ua];if(1===kc){Ta.buffer||B.enableVertexAttribArray(ua);bb=fb||1;if(Ta.type!==ac||Ta.size!==bb||Ta.buffer!==Na||Ta.normalized!==Qb||Ta.offset!==sd||Ta.stride!==Rc)B.bindBuffer(34962,Na.buffer),B.vertexAttribPointer(ua,bb,ac,Qb,Rc,sd),Ta.type=ac,Ta.size=bb,Ta.buffer=Na,Ta.normalized=Qb,Ta.offset=sd,Ta.stride=Rc;Ta.divisor!==yc&&(O.vertexAttribDivisorANGLE(ua,yc),Ta.divisor=yc)}else if(Ta.buffer&&(B.disableVertexAttribArray(ua),Ta.buffer=null),Ta.x!==
mb||Ta.y!==ta||Ta.z!==qb||Ta.w!==lb)B.vertexAttrib4f(ua,mb,ta,qb,lb),Ta.x=mb,Ta.y=ta,Ta.z=qb,Ta.w=lb;za=n.call(this,ia,a,0);gb=!1;Ia=null;Bb=0;Ab=!1;uc=Qa=0;Ib=1;Za=0;Rb=5126;Lb=Ja=kd=va=0;fa(za)?(gb=!0,Ia=N.createStream(34962,za),Rb=Ia.dtype):(Ia=N.getBuffer(za))?Rb=Ia.dtype:"constant"in za?(Ib=2,"number"===typeof za.constant?(kd=za.constant,Ja=Lb=va=0):(kd=0<za.constant.length?za.constant[0]:0,Ja=1<za.constant.length?za.constant[1]:0,Lb=2<za.constant.length?za.constant[2]:0,va=3<za.constant.length?
za.constant[3]:0)):(Ia=fa(za.buffer)?N.createStream(34962,za.buffer):N.getBuffer(za.buffer),Rb="type"in za?Jd[za.type]:Ia.dtype,Ab=!!za.normalized,uc=za.size|0,Qa=za.offset|0,Za=za.stride|0,Bb=za.divisor|0);hb=wc.location;jb=X[hb];if(1===Ib){jb.buffer||B.enableVertexAttribArray(hb);wa=uc||1;if(jb.type!==Rb||jb.size!==wa||jb.buffer!==Ia||jb.normalized!==Ab||jb.offset!==Qa||jb.stride!==Za)B.bindBuffer(34962,Ia.buffer),B.vertexAttribPointer(hb,wa,Rb,Ab,Za,Qa),jb.type=Rb,jb.size=wa,jb.buffer=Ia,jb.normalized=
Ab,jb.offset=Qa,jb.stride=Za;jb.divisor!==Bb&&(O.vertexAttribDivisorANGLE(hb,Bb),jb.divisor=Bb)}else if(jb.buffer&&(B.disableVertexAttribArray(hb),jb.buffer=null),jb.x!==kd||jb.y!==Ja||jb.z!==Lb||jb.w!==va)B.vertexAttrib4f(hb,kd,Ja,Lb,va),jb.x=kd,jb.y=Ja,jb.z=Lb,jb.w=va;cc=e.call(this,ia,a,0);Da=!1;rb=null;sb=0;Xa=!1;lc=Ya=0;vc=1;rc=0;Va=5126;zc=Ea=Gc=Xb=0;fa(cc)?(Da=!0,rb=N.createStream(34962,cc),Va=rb.dtype):(rb=N.getBuffer(cc))?Va=rb.dtype:"constant"in cc?(vc=2,"number"===typeof cc.constant?(Gc=
cc.constant,Ea=zc=Xb=0):(Gc=0<cc.constant.length?cc.constant[0]:0,Ea=1<cc.constant.length?cc.constant[1]:0,zc=2<cc.constant.length?cc.constant[2]:0,Xb=3<cc.constant.length?cc.constant[3]:0)):(rb=fa(cc.buffer)?N.createStream(34962,cc.buffer):N.getBuffer(cc.buffer),Va="type"in cc?Jd[cc.type]:rb.dtype,Xa=!!cc.normalized,lc=cc.size|0,Ya=cc.offset|0,rc=cc.stride|0,sb=cc.divisor|0);Oa=ea.location;Aa=X[Oa];if(1===vc){Aa.buffer||B.enableVertexAttribArray(Oa);nb=lc||1;if(Aa.type!==Va||Aa.size!==nb||Aa.buffer!==
rb||Aa.normalized!==Xa||Aa.offset!==Ya||Aa.stride!==rc)B.bindBuffer(34962,rb.buffer),B.vertexAttribPointer(Oa,nb,Va,Xa,rc,Ya),Aa.type=Va,Aa.size=nb,Aa.buffer=rb,Aa.normalized=Xa,Aa.offset=Ya,Aa.stride=rc;Aa.divisor!==sb&&(O.vertexAttribDivisorANGLE(Oa,sb),Aa.divisor=sb)}else if(Aa.buffer&&(B.disableVertexAttribArray(Oa),Aa.buffer=null),Aa.x!==Gc||Aa.y!==Ea||Aa.z!==zc||Aa.w!==Xb)B.vertexAttrib4f(Oa,Gc,Ea,zc,Xb),Aa.x=Gc,Aa.y=Ea,Aa.z=zc,Aa.w=Xb;wb=q.call(this,ia,a,0);Cb=!1;tb=null;sc=0;xb=!1;oc=ld=0;
pc=1;Nc=0;hd=5126;Mb=$b=Tb=id=0;fa(wb)?(Cb=!0,tb=N.createStream(34962,wb),hd=tb.dtype):(tb=N.getBuffer(wb))?hd=tb.dtype:"constant"in wb?(pc=2,"number"===typeof wb.constant?(Tb=wb.constant,$b=Mb=id=0):(Tb=0<wb.constant.length?wb.constant[0]:0,$b=1<wb.constant.length?wb.constant[1]:0,Mb=2<wb.constant.length?wb.constant[2]:0,id=3<wb.constant.length?wb.constant[3]:0)):(tb=fa(wb.buffer)?N.createStream(34962,wb.buffer):N.getBuffer(wb.buffer),hd="type"in wb?Jd[wb.type]:tb.dtype,xb=!!wb.normalized,oc=wb.size|
0,ld=wb.offset|0,Nc=wb.stride|0,sc=wb.divisor|0);Fa=$a.location;Yb=X[Fa];if(1===pc){Yb.buffer||B.enableVertexAttribArray(Fa);ob=oc||1;if(Yb.type!==hd||Yb.size!==ob||Yb.buffer!==tb||Yb.normalized!==xb||Yb.offset!==ld||Yb.stride!==Nc)B.bindBuffer(34962,tb.buffer),B.vertexAttribPointer(Fa,ob,hd,xb,Nc,ld),Yb.type=hd,Yb.size=ob,Yb.buffer=tb,Yb.normalized=xb,Yb.offset=ld,Yb.stride=Nc;Yb.divisor!==sc&&(O.vertexAttribDivisorANGLE(Fa,sc),Yb.divisor=sc)}else if(Yb.buffer&&(B.disableVertexAttribArray(Fa),Yb.buffer=
null),Yb.x!==Tb||Yb.y!==$b||Yb.z!==Mb||Yb.w!==id)B.vertexAttrib4f(Fa,Tb,$b,Mb,id),Yb.x=Tb,Yb.y=$b,Yb.z=Mb,Yb.w=id;yb=u.call(this,ia,a,0);Kb=!1;Nb=null;dc=0;gc=!1;Ec=Qd=0;Fc=1;Hc=0;Oc=5126;Jb=Pc=Uc=bd=0;fa(yb)?(Kb=!0,Nb=N.createStream(34962,yb),Oc=Nb.dtype):(Nb=N.getBuffer(yb))?Oc=Nb.dtype:"constant"in yb?(Fc=2,"number"===typeof yb.constant?(Uc=yb.constant,Pc=Jb=bd=0):(Uc=0<yb.constant.length?yb.constant[0]:0,Pc=1<yb.constant.length?yb.constant[1]:0,Jb=2<yb.constant.length?yb.constant[2]:0,bd=3<yb.constant.length?
yb.constant[3]:0)):(Nb=fa(yb.buffer)?N.createStream(34962,yb.buffer):N.getBuffer(yb.buffer),Oc="type"in yb?Jd[yb.type]:Nb.dtype,gc=!!yb.normalized,Ec=yb.size|0,Qd=yb.offset|0,Hc=yb.stride|0,dc=yb.divisor|0);Fb=R.location;Qc=X[Fb];if(1===Fc){Qc.buffer||B.enableVertexAttribArray(Fb);Jc=Ec||4;if(Qc.type!==Oc||Qc.size!==Jc||Qc.buffer!==Nb||Qc.normalized!==gc||Qc.offset!==Qd||Qc.stride!==Hc)B.bindBuffer(34962,Nb.buffer),B.vertexAttribPointer(Fb,Jc,Oc,gc,Hc,Qd),Qc.type=Oc,Qc.size=Jc,Qc.buffer=Nb,Qc.normalized=
gc,Qc.offset=Qd,Qc.stride=Hc;Qc.divisor!==dc&&(O.vertexAttribDivisorANGLE(Fb,dc),Qc.divisor=dc)}else if(Qc.buffer&&(B.disableVertexAttribArray(Fb),Qc.buffer=null),Qc.x!==Uc||Qc.y!==Pc||Qc.z!==Jb||Qc.w!==bd)B.vertexAttrib4f(Fb,Uc,Pc,Jb,bd),Qc.x=Uc,Qc.y=Pc,Qc.z=Jb,Qc.w=bd;Vc=w.call(this,ia,a,0);ec=!1;Zc=null;dd=0;pd=!1;$c=ne=0;Yc=1;Vd=0;he=5126;Ed=Gd=ke=be=0;fa(Vc)?(ec=!0,Zc=N.createStream(34962,Vc),he=Zc.dtype):(Zc=N.getBuffer(Vc))?he=Zc.dtype:"constant"in Vc?(Yc=2,"number"===typeof Vc.constant?(ke=
Vc.constant,Gd=Ed=be=0):(ke=0<Vc.constant.length?Vc.constant[0]:0,Gd=1<Vc.constant.length?Vc.constant[1]:0,Ed=2<Vc.constant.length?Vc.constant[2]:0,be=3<Vc.constant.length?Vc.constant[3]:0)):(Zc=fa(Vc.buffer)?N.createStream(34962,Vc.buffer):N.getBuffer(Vc.buffer),he="type"in Vc?Jd[Vc.type]:Zc.dtype,pd=!!Vc.normalized,$c=Vc.size|0,ne=Vc.offset|0,Vd=Vc.stride|0,dd=Vc.divisor|0);fd=Ub.location;Ic=X[fd];if(1===Yc){Ic.buffer||B.enableVertexAttribArray(fd);qd=$c||4;if(Ic.type!==he||Ic.size!==qd||Ic.buffer!==
Zc||Ic.normalized!==pd||Ic.offset!==ne||Ic.stride!==Vd)B.bindBuffer(34962,Zc.buffer),B.vertexAttribPointer(fd,qd,he,pd,Vd,ne),Ic.type=he,Ic.size=qd,Ic.buffer=Zc,Ic.normalized=pd,Ic.offset=ne,Ic.stride=Vd;Ic.divisor!==dd&&(O.vertexAttribDivisorANGLE(fd,dd),Ic.divisor=dd)}else if(Ic.buffer&&(B.disableVertexAttribArray(fd),Ic.buffer=null),Ic.x!==ke||Ic.y!==Gd||Ic.z!==Ed||Ic.w!==be)B.vertexAttrib4f(fd,ke,Gd,Ed,be),Ic.x=ke,Ic.y=Gd,Ic.z=Ed,Ic.w=be;jd=l.call(this,ia,a,0);cd=!1;md=null;Cd=0;zd=!1;ue=ve=0;
We=1;le=0;ce=5126;fe=Zd=oe=ae=0;fa(jd)?(cd=!0,md=N.createStream(34962,jd),ce=md.dtype):(md=N.getBuffer(jd))?ce=md.dtype:"constant"in jd?(We=2,"number"===typeof jd.constant?(oe=jd.constant,Zd=fe=ae=0):(oe=0<jd.constant.length?jd.constant[0]:0,Zd=1<jd.constant.length?jd.constant[1]:0,fe=2<jd.constant.length?jd.constant[2]:0,ae=3<jd.constant.length?jd.constant[3]:0)):(md=fa(jd.buffer)?N.createStream(34962,jd.buffer):N.getBuffer(jd.buffer),ce="type"in jd?Jd[jd.type]:md.dtype,zd=!!jd.normalized,ue=jd.size|
0,ve=jd.offset|0,le=jd.stride|0,Cd=jd.divisor|0);Ac=ja.location;Xc=X[Ac];if(1===We){Xc.buffer||B.enableVertexAttribArray(Ac);pe=ue||1;if(Xc.type!==ce||Xc.size!==pe||Xc.buffer!==md||Xc.normalized!==zd||Xc.offset!==ve||Xc.stride!==le)B.bindBuffer(34962,md.buffer),B.vertexAttribPointer(Ac,pe,ce,zd,le,ve),Xc.type=ce,Xc.size=pe,Xc.buffer=md,Xc.normalized=zd,Xc.offset=ve,Xc.stride=le;Xc.divisor!==Cd&&(O.vertexAttribDivisorANGLE(Ac,Cd),Xc.divisor=Cd)}else if(Xc.buffer&&(B.disableVertexAttribArray(Ac),Xc.buffer=
null),Xc.x!==oe||Xc.y!==Zd||Xc.z!==fe||Xc.w!==ae)B.vertexAttrib4f(Ac,oe,Zd,fe,ae),Xc.x=oe,Xc.y=Zd,Xc.z=fe,Xc.w=ae;B.uniform1i(y.location,!1);B.uniform1f(Ua.location,ia.pixelRatio);ie=a.scale;B.uniform2f(Y.location,ie[0],ie[1]);Fd=a.scaleFract;B.uniform2f(kb.location,Fd[0],Fd[1]);Id=a.translate;B.uniform2f(oa.location,Id[0],Id[1]);Kd=a.translateFract;B.uniform2f(fc.location,Kd[0],Kd[1]);Ld=E.call(this,ia,a,0);B.uniform2f(La.location,Ld[0],Ld[1]);B.uniform1f(xa.location,a.opacity);B.uniform1i(bc.location,
r.bind());(ge=a.markerTexture)&&"framebuffer"===ge._reglType&&(ge=ge.color[0]);Te=ge._texture;B.uniform1i(ba.location,Te.bind());we=a.elements;me=null;(me=(Ne=fa(we))?Lc.createStream(we):Lc.getElements(we))&&B.bindBuffer(34963,me.buffer.buffer);Oe=a.offset;if(Je=a.count)qe=Gb.instances,0<qe?me?O.drawElementsInstancedANGLE(0,Je,me.type,Oe<<(me.type-5121>>1),qe):O.drawArraysInstancedANGLE(0,Oe,Je,qe):0>qe&&(me?B.drawElements(0,Je,me.type,Oe<<(me.type-5121>>1)):B.drawArrays(0,Oe,Je)),Ca.dirty=!0,pa.setVAO(null),
ia.viewportWidth=z,ia.viewportHeight=D,I&&(b.cpuTime+=performance.now()-Q),V&&N.destroyStream(P),Wa&&N.destroyStream(ya),ib&&N.destroyStream(Na),gb&&N.destroyStream(Ia),Da&&N.destroyStream(rb),Cb&&N.destroyStream(tb),Kb&&N.destroyStream(Nb),ec&&N.destroyStream(Zc),cd&&N.destroyStream(md),r.unbind(),Te.unbind(),Ne&&Lc.destroyStream(me)},scope:function(a,c,e){var d,g,h,l,n,q,t,r,x,y,B,E,u,w,F,ka,da,M,L,I,P,X,ca,R,W,U,Y,Z,ba,ea,ja,na,pa,ya,oa,Ga,qa,Ha,ra,la,xa,La,zb,Pa,Ua,$a,Ma,pb,vb,ib,Na,wc,Hb,kb,
fb,wd,qc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,Ub,Ib,Za,Rb,va,fc,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,bc,oc,hc,Nc,tc,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,pc,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,Wc,$c,Kc,Ud,Yd,Yc,te,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,Pd,de,re,se,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Xd,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,Ze,Ye,Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Le,ye,of,pf,Df,
Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf,dg,Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;d=a.viewport;g=d.x|0;h=d.y|0;l="width"in d?d.width|0:ia.framebufferWidth-g;n="height"in d?d.height|0:ia.framebufferHeight-h;q=ia.viewportWidth;ia.viewportWidth=l;t=ia.viewportHeight;ia.viewportHeight=n;r=Qd[0];Qd[0]=g;x=Qd[1];Qd[1]=h;y=Qd[2];Qd[2]=l;B=Qd[3];Qd[3]=n;E=G[0];
G[0]=0;u=G[1];G[1]=0;w=G[2];G[2]=0;F=G[3];G[3]=1;ka=sa.blend_enable;sa.blend_enable=!0;da=Ba[0];Ba[0]=770;M=Ba[1];Ba[1]=771;L=Ba[2];Ba[2]=773;I=Ba[3];Ba[3]=1;P=sa.depth_enable;sa.depth_enable=!1;X=a.viewport;ca=X.x|0;R=X.y|0;W="width"in X?X.width|0:ia.framebufferWidth-ca;U="height"in X?X.height|0:ia.framebufferHeight-R;Y=be[0];be[0]=ca;Z=be[1];be[1]=R;ba=be[2];be[2]=W;ea=be[3];be[3]=U;ja=sa.scissor_enable;sa.scissor_enable=!0;na=sa.stencil_enable;sa.stencil_enable=!1;if(pa=Ca.profile)ya=performance.now(),
b.count++;oa=a.elements;Ga=null;Ga=(qa=fa(oa))?Lc.createStream(oa):Lc.getElements(oa);Ha=Gb.elements;Gb.elements=Ga;ra=a.offset;la=Gb.offset;Gb.offset=ra;xa=a.count;La=Gb.count;Gb.count=xa;zb=Gb.primitive;Gb.primitive=0;Pa=ga[45];ga[45]=!1;Ua=a.markerTexture;$a=ga[48];ga[48]=Ua;Ma=a.opacity;pb=ga[10];ga[10]=Ma;vb=D.call(this,ia,a,e);ib=ga[46];ga[46]=vb;Na=ga[47];ga[47]=K;wc=ia.pixelRatio;Hb=ga[34];ga[34]=wc;kb=a.scale;fb=ga[6];ga[6]=kb;wd=a.scaleFract;qc=ga[7];ga[7]=wd;ac=a.translate;lb=ga[8];ga[8]=
ac;mb=a.translateFract;ta=ga[9];ga[9]=mb;qb=z.call(this,ia,a,e);ua=!1;Ta=null;bb=0;za=!1;Ia=gb=0;Bb=1;Ab=0;Qa=5126;Rb=Za=Ib=Ub=0;fa(qb)?(ua=!0,Ta=N.createStream(34962,qb),Qa=Ta.dtype):(Ta=N.getBuffer(qb))?Qa=Ta.dtype:"constant"in qb?(Bb=2,"number"===typeof qb.constant?(Ib=qb.constant,Za=Rb=Ub=0):(Ib=0<qb.constant.length?qb.constant[0]:0,Za=1<qb.constant.length?qb.constant[1]:0,Rb=2<qb.constant.length?qb.constant[2]:0,Ub=3<qb.constant.length?qb.constant[3]:0)):(Ta=fa(qb.buffer)?N.createStream(34962,
qb.buffer):N.getBuffer(qb.buffer),Qa="type"in qb?Jd[qb.type]:Ta.dtype,za=!!qb.normalized,Ia=qb.size|0,gb=qb.offset|0,Ab=qb.stride|0,bb=qb.divisor|0);va=ha.buffer;ha.buffer=Ta;fc=ha.divisor;ha.divisor=bb;Ja=ha.normalized;ha.normalized=za;Lb=ha.offset;ha.offset=gb;hb=ha.size;ha.size=Ia;jb=ha.state;ha.state=Bb;wa=ha.stride;ha.stride=Ab;cc=ha.type;ha.type=Qa;Da=ha.w;ha.w=Ub;rb=ha.x;ha.x=Ib;sb=ha.y;ha.y=Za;Xa=ha.z;ha.z=Rb;Ya=C.call(this,ia,a,e);lc=!1;vc=null;rc=0;Va=!1;Gc=Xb=0;Ea=1;zc=0;Oa=5126;Cb=wb=
nb=Aa=0;fa(Ya)?(lc=!0,vc=N.createStream(34962,Ya),Oa=vc.dtype):(vc=N.getBuffer(Ya))?Oa=vc.dtype:"constant"in Ya?(Ea=2,"number"===typeof Ya.constant?(nb=Ya.constant,wb=Cb=Aa=0):(nb=0<Ya.constant.length?Ya.constant[0]:0,wb=1<Ya.constant.length?Ya.constant[1]:0,Cb=2<Ya.constant.length?Ya.constant[2]:0,Aa=3<Ya.constant.length?Ya.constant[3]:0)):(vc=fa(Ya.buffer)?N.createStream(34962,Ya.buffer):N.getBuffer(Ya.buffer),Oa="type"in Ya?Jd[Ya.type]:vc.dtype,Va=!!Ya.normalized,Gc=Ya.size|0,Xb=Ya.offset|0,zc=
Ya.stride|0,rc=Ya.divisor|0);tb=J.buffer;J.buffer=vc;sc=J.divisor;J.divisor=rc;xb=J.normalized;J.normalized=Va;bc=J.offset;J.offset=Xb;oc=J.size;J.size=Gc;hc=J.state;J.state=Ea;Nc=J.stride;J.stride=zc;tc=J.type;J.type=Oa;id=J.w;J.w=Aa;Tb=J.x;J.x=nb;$b=J.y;J.y=wb;Mb=J.z;J.z=Cb;Fa=ma.call(this,ia,a,e);Yb=!1;ob=null;yb=0;Kb=!1;dc=Nb=0;gc=1;pc=0;Ec=5126;bd=Oc=Hc=Fc=0;fa(Fa)?(Yb=!0,ob=N.createStream(34962,Fa),Ec=ob.dtype):(ob=N.getBuffer(Fa))?Ec=ob.dtype:"constant"in Fa?(gc=2,"number"===typeof Fa.constant?
(Hc=Fa.constant,Oc=bd=Fc=0):(Hc=0<Fa.constant.length?Fa.constant[0]:0,Oc=1<Fa.constant.length?Fa.constant[1]:0,bd=2<Fa.constant.length?Fa.constant[2]:0,Fc=3<Fa.constant.length?Fa.constant[3]:0)):(ob=fa(Fa.buffer)?N.createStream(34962,Fa.buffer):N.getBuffer(Fa.buffer),Ec="type"in Fa?Jd[Fa.type]:ob.dtype,Kb=!!Fa.normalized,dc=Fa.size|0,Nb=Fa.offset|0,pc=Fa.stride|0,yb=Fa.divisor|0);Uc=p.buffer;p.buffer=ob;Pc=p.divisor;p.divisor=yb;Jb=p.normalized;p.normalized=Kb;Fb=p.offset;p.offset=Nb;Qc=p.size;p.size=
dc;Jc=p.state;p.state=gc;Vc=p.stride;p.stride=pc;ec=p.type;p.type=Ec;Zc=p.w;p.w=Fc;dd=p.x;p.x=Hc;pd=p.y;p.y=Oc;Wc=p.z;p.z=bd;$c=v.call(this,ia,a,e);Kc=!1;Ud=null;Yd=0;Yc=!1;Gd=te=0;Ed=1;fd=0;Ic=5126;md=cd=jd=qd=0;fa($c)?(Kc=!0,Ud=N.createStream(34962,$c),Ic=Ud.dtype):(Ud=N.getBuffer($c))?Ic=Ud.dtype:"constant"in $c?(Ed=2,"number"===typeof $c.constant?(jd=$c.constant,cd=md=qd=0):(jd=0<$c.constant.length?$c.constant[0]:0,cd=1<$c.constant.length?$c.constant[1]:0,md=2<$c.constant.length?$c.constant[2]:
0,qd=3<$c.constant.length?$c.constant[3]:0)):(Ud=fa($c.buffer)?N.createStream(34962,$c.buffer):N.getBuffer($c.buffer),Ic="type"in $c?Jd[$c.type]:Ud.dtype,Yc=!!$c.normalized,Gd=$c.size|0,te=$c.offset|0,fd=$c.stride|0,Yd=$c.divisor|0);Cd=k.buffer;k.buffer=Ud;zd=k.divisor;k.divisor=Yd;Pd=k.normalized;k.normalized=Yc;de=k.offset;k.offset=te;re=k.size;k.size=Gd;se=k.state;k.state=Ed;ce=k.stride;k.stride=fd;ae=k.type;k.type=Ic;oe=k.w;k.w=qd;Zd=k.x;k.x=jd;fe=k.y;k.y=cd;Ac=k.z;k.z=md;Xc=S.call(this,ia,a,
e);pe=!1;ie=null;Fd=0;Id=!1;Ld=Kd=0;ge=1;Xd=0;we=5126;Je=Oe=Ne=me=0;fa(Xc)?(pe=!0,ie=N.createStream(34962,Xc),we=ie.dtype):(ie=N.getBuffer(Xc))?we=ie.dtype:"constant"in Xc?(ge=2,"number"===typeof Xc.constant?(Ne=Xc.constant,Oe=Je=me=0):(Ne=0<Xc.constant.length?Xc.constant[0]:0,Oe=1<Xc.constant.length?Xc.constant[1]:0,Je=2<Xc.constant.length?Xc.constant[2]:0,me=3<Xc.constant.length?Xc.constant[3]:0)):(ie=fa(Xc.buffer)?N.createStream(34962,Xc.buffer):N.getBuffer(Xc.buffer),we="type"in Xc?Jd[Xc.type]:
ie.dtype,Id=!!Xc.normalized,Ld=Xc.size|0,Kd=Xc.offset|0,Xd=Xc.stride|0,Fd=Xc.divisor|0);qe=Q.buffer;Q.buffer=ie;ze=Q.divisor;Q.divisor=Fd;Ce=Q.normalized;Q.normalized=Id;De=Q.offset;Q.offset=Kd;Ee=Q.size;Q.size=Ld;Ae=Q.state;Q.state=ge;Hd=Q.stride;Q.stride=Xd;Od=Q.type;Q.type=we;Wd=Q.w;Q.w=me;$d=Q.x;Q.x=Ne;Fe=Q.y;Q.y=Oe;Bd=Q.z;Q.z=Je;Md=V.call(this,ia,a,e);xe=!1;Ge=null;Ze=0;Ye=!1;Ke=Pe=0;Xe=1;Ue=0;Qe=5126;Se=Td=Nd=Re=0;fa(Md)?(xe=!0,Ge=N.createStream(34962,Md),Qe=Ge.dtype):(Ge=N.getBuffer(Md))?Qe=
Ge.dtype:"constant"in Md?(Xe=2,"number"===typeof Md.constant?(Nd=Md.constant,Td=Se=Re=0):(Nd=0<Md.constant.length?Md.constant[0]:0,Td=1<Md.constant.length?Md.constant[1]:0,Se=2<Md.constant.length?Md.constant[2]:0,Re=3<Md.constant.length?Md.constant[3]:0)):(Ge=fa(Md.buffer)?N.createStream(34962,Md.buffer):N.getBuffer(Md.buffer),Qe="type"in Md?Jd[Md.type]:Ge.dtype,Ye=!!Md.normalized,Ke=Md.size|0,Pe=Md.offset|0,Ue=Md.stride|0,Ze=Md.divisor|0);gf=A.buffer;A.buffer=Ge;lf=A.divisor;A.divisor=Ze;cf=A.normalized;
A.normalized=Ye;hf=A.offset;A.offset=Pe;jf=A.size;A.size=Ke;kf=A.state;A.state=Xe;qf=A.stride;A.stride=Ue;nf=A.type;A.type=Qe;rf=A.w;A.w=Re;Bf=A.x;A.x=Nd;Cf=A.y;A.y=Td;Le=A.z;A.z=Se;ye=cb.call(this,ia,a,e);of=!1;pf=null;Df=0;Hf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;Jf=zf=yf=uf=0;fa(ye)?(of=!0,pf=N.createStream(34962,ye),xf=pf.dtype):(pf=N.getBuffer(ye))?xf=pf.dtype:"constant"in ye?(Ff=2,"number"===typeof ye.constant?(yf=ye.constant,zf=Jf=uf=0):(yf=0<ye.constant.length?ye.constant[0]:0,zf=1<ye.constant.length?
ye.constant[1]:0,Jf=2<ye.constant.length?ye.constant[2]:0,uf=3<ye.constant.length?ye.constant[3]:0)):(pf=fa(ye.buffer)?N.createStream(34962,ye.buffer):N.getBuffer(ye.buffer),xf="type"in ye?Jd[ye.type]:pf.dtype,Hf=!!ye.normalized,Ef=ye.size|0,Af=ye.offset|0,wf=ye.stride|0,Df=ye.divisor|0);Kf=H.buffer;H.buffer=pf;Lf=H.divisor;H.divisor=Df;Mf=H.normalized;H.normalized=Hf;sf=H.offset;H.offset=Af;Rf=H.size;H.size=Ef;If=H.state;H.state=Ff;tf=H.stride;H.stride=wf;dg=H.type;H.type=xf;Sf=H.w;H.w=uf;Tf=H.x;
H.x=yf;qg=H.y;H.y=zf;df=H.z;H.z=Jf;$e=O.call(this,ia,a,e);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;fa($e)?(Nf=!0,Of=N.createStream(34962,$e),Uf=Of.dtype):(Of=N.getBuffer($e))?Uf=Of.dtype:"constant"in $e?(ig=2,"number"===typeof $e.constant?(Yf=$e.constant,Zf=jg=Xf=0):(Yf=0<$e.constant.length?$e.constant[0]:0,Zf=1<$e.constant.length?$e.constant[1]:0,jg=2<$e.constant.length?$e.constant[2]:0,Xf=3<$e.constant.length?$e.constant[3]:0)):(Of=fa($e.buffer)?N.createStream(34962,$e.buffer):
N.getBuffer($e.buffer),Uf="type"in $e?Jd[$e.type]:Of.dtype,fg=!!$e.normalized,hg=$e.size|0,gg=$e.offset|0,Wf=$e.stride|0,eg=$e.divisor|0);rg=f.buffer;f.buffer=Of;sg=f.divisor;f.divisor=eg;tg=f.normalized;f.normalized=fg;ug=f.offset;f.offset=gg;vg=f.size;f.size=hg;wg=f.state;f.state=ig;xg=f.stride;f.stride=Wf;yg=f.type;f.type=Uf;zg=f.w;f.w=Xf;Ag=f.x;f.x=Yf;Bg=f.y;f.y=Zf;ef=f.z;f.z=jg;af=m.call(this,ia,a,e);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;fa(af)?(Pf=!0,Qf=N.createStream(34962,
af),Vf=Qf.dtype):(Qf=N.getBuffer(af))?Vf=Qf.dtype:"constant"in af?(og=2,"number"===typeof af.constant?(bg=af.constant,cg=pg=ag=0):(bg=0<af.constant.length?af.constant[0]:0,cg=1<af.constant.length?af.constant[1]:0,pg=2<af.constant.length?af.constant[2]:0,ag=3<af.constant.length?af.constant[3]:0)):(Qf=fa(af.buffer)?N.createStream(34962,af.buffer):N.getBuffer(af.buffer),Vf="type"in af?Jd[af.type]:Qf.dtype,lg=!!af.normalized,ng=af.size|0,mg=af.offset|0,$f=af.stride|0,kg=af.divisor|0);Cg=T.buffer;T.buffer=
Qf;Dg=T.divisor;T.divisor=kg;Eg=T.normalized;T.normalized=lg;Fg=T.offset;T.offset=mg;Gg=T.size;T.size=ng;Hg=T.state;T.state=og;Ig=T.stride;T.stride=$f;Jg=T.type;T.type=Vf;Kg=T.w;T.w=ag;Lg=T.x;T.x=bg;Mg=T.y;T.y=cg;Ng=T.z;T.z=pg;Og=aa.vert;aa.vert=44;Pg=aa.frag;aa.frag=43;Ca.dirty=!0;c(ia,a,e);ia.viewportWidth=q;ia.viewportHeight=t;Qd[0]=r;Qd[1]=x;Qd[2]=y;Qd[3]=B;G[0]=E;G[1]=u;G[2]=w;G[3]=F;sa.blend_enable=ka;Ba[0]=da;Ba[1]=M;Ba[2]=L;Ba[3]=I;sa.depth_enable=P;be[0]=Y;be[1]=Z;be[2]=ba;be[3]=ea;sa.scissor_enable=
ja;sa.stencil_enable=na;pa&&(b.cpuTime+=performance.now()-ya);qa&&Lc.destroyStream(Ga);Gb.elements=Ha;Gb.offset=la;Gb.count=La;Gb.primitive=zb;ga[45]=Pa;ga[48]=$a;ga[10]=pb;ga[46]=ib;ga[47]=Na;ga[34]=Hb;ga[6]=fb;ga[7]=qc;ga[8]=lb;ga[9]=ta;ua&&N.destroyStream(Ta);ha.buffer=va;ha.divisor=fc;ha.normalized=Ja;ha.offset=Lb;ha.size=hb;ha.state=jb;ha.stride=wa;ha.type=cc;ha.w=Da;ha.x=rb;ha.y=sb;ha.z=Xa;lc&&N.destroyStream(vc);J.buffer=tb;J.divisor=sc;J.normalized=xb;J.offset=bc;J.size=oc;J.state=hc;J.stride=
Nc;J.type=tc;J.w=id;J.x=Tb;J.y=$b;J.z=Mb;Yb&&N.destroyStream(ob);p.buffer=Uc;p.divisor=Pc;p.normalized=Jb;p.offset=Fb;p.size=Qc;p.state=Jc;p.stride=Vc;p.type=ec;p.w=Zc;p.x=dd;p.y=pd;p.z=Wc;Kc&&N.destroyStream(Ud);k.buffer=Cd;k.divisor=zd;k.normalized=Pd;k.offset=de;k.size=re;k.state=se;k.stride=ce;k.type=ae;k.w=oe;k.x=Zd;k.y=fe;k.z=Ac;pe&&N.destroyStream(ie);Q.buffer=qe;Q.divisor=ze;Q.normalized=Ce;Q.offset=De;Q.size=Ee;Q.state=Ae;Q.stride=Hd;Q.type=Od;Q.w=Wd;Q.x=$d;Q.y=Fe;Q.z=Bd;xe&&N.destroyStream(Ge);
A.buffer=gf;A.divisor=lf;A.normalized=cf;A.offset=hf;A.size=jf;A.state=kf;A.stride=qf;A.type=nf;A.w=rf;A.x=Bf;A.y=Cf;A.z=Le;of&&N.destroyStream(pf);H.buffer=Kf;H.divisor=Lf;H.normalized=Mf;H.offset=sf;H.size=Rf;H.state=If;H.stride=tf;H.type=dg;H.w=Sf;H.x=Tf;H.y=qg;H.z=df;Nf&&N.destroyStream(Of);f.buffer=rg;f.divisor=sg;f.normalized=tg;f.offset=ug;f.size=vg;f.state=wg;f.stride=xg;f.type=yg;f.w=zg;f.x=Ag;f.y=Bg;f.z=ef;Pf&&N.destroyStream(Qf);T.buffer=Cg;T.divisor=Dg;T.normalized=Eg;T.offset=Fg;T.size=
Gg;T.state=Hg;T.stride=Ig;T.type=Jg;T.w=Kg;T.x=Lg;T.y=Mg;T.z=Ng;aa.vert=Og;aa.frag=Pg;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,b,g,h,d,c,n,e,q,u,w,l,E,r,D,K,z,C,db,J,ma,p,v,k,S,Q,V,A,cb,H,O,f,m,T,ra,na,Yc,pc,la,Pa,Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa,fc,hc,tc,wd){var wc,X,N,ia,Ca,Gb,Lc,Wc,F,B,fa,sa,aa,ga,pa,G,x,ca,M,Ba,Ga,t,qc,
Ha,W,Hb,zb,Ze,Xd,be,Ud,te,re,Kc,de,se,Pd,Qd,Yd;wc=a.attributes;X=a.buffer;N=a.context;ia=a.current;Ca=a.draw;Gb=a.elements;Lc=a.extensions;Wc=a.framebuffer;F=a.gl;B=a.isBufferArgs;fa=a.next;sa=a.shader;aa=a.uniforms;ga=a.vao;pa=fa.blend_color;G=ia.blend_color;x=fa.blend_equation;ca=ia.blend_equation;M=fa.blend_func;Ba=ia.blend_func;Ga=fa.colorMask;t=ia.colorMask;qc=fa.depth_range;Ha=ia.depth_range;W=fa.polygonOffset_offset;Hb=ia.polygonOffset_offset;zb=fa.sample_coverage;Ze=ia.sample_coverage;Xd=
fa.scissor_box;be=ia.scissor_box;Ud=fa.stencil_func;te=ia.stencil_func;re=fa.stencil_opBack;Kc=ia.stencil_opBack;de=fa.stencil_opFront;se=ia.stencil_opFront;Pd=fa.viewport;Qd=ia.viewport;Yd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var e,d,f,g,h,k;e=Wc.next;e!==Wc.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),Wc.cur=e);if(ia.dirty){var l,m,n,p,q,r,v,A,z,D,E,u,w,H,K,ka,M,da,J,C,S,O,Q,V,T,
aa,ma,ha,sa,pa,cb,ub,Ra,Sb;l=fa.dither;l!==ia.dither&&(l?F.enable(3024):F.disable(3024),ia.dither=l);m=x[0];n=x[1];if(m!==ca[0]||n!==ca[1])F.blendEquationSeparate(m,n),ca[0]=m,ca[1]=n;p=fa.depth_func;p!==ia.depth_func&&(F.depthFunc(p),ia.depth_func=p);q=qc[0];r=qc[1];if(q!==Ha[0]||r!==Ha[1])F.depthRange(q,r),Ha[0]=q,Ha[1]=r;v=fa.depth_mask;v!==ia.depth_mask&&(F.depthMask(v),ia.depth_mask=v);A=Ga[0];z=Ga[1];D=Ga[2];E=Ga[3];if(A!==t[0]||z!==t[1]||D!==t[2]||E!==t[3])F.colorMask(A,z,D,E),t[0]=A,t[1]=
z,t[2]=D,t[3]=E;u=fa.cull_enable;u!==ia.cull_enable&&(u?F.enable(2884):F.disable(2884),ia.cull_enable=u);w=fa.cull_face;w!==ia.cull_face&&(F.cullFace(w),ia.cull_face=w);H=fa.frontFace;H!==ia.frontFace&&(F.frontFace(H),ia.frontFace=H);K=fa.lineWidth;K!==ia.lineWidth&&(F.lineWidth(K),ia.lineWidth=K);ka=fa.polygonOffset_enable;ka!==ia.polygonOffset_enable&&(ka?F.enable(32823):F.disable(32823),ia.polygonOffset_enable=ka);M=W[0];da=W[1];if(M!==Hb[0]||da!==Hb[1])F.polygonOffset(M,da),Hb[0]=M,Hb[1]=da;J=
fa.sample_alpha;J!==ia.sample_alpha&&(J?F.enable(32926):F.disable(32926),ia.sample_alpha=J);C=fa.sample_enable;C!==ia.sample_enable&&(C?F.enable(32928):F.disable(32928),ia.sample_enable=C);S=zb[0];O=zb[1];if(S!==Ze[0]||O!==Ze[1])F.sampleCoverage(S,O),Ze[0]=S,Ze[1]=O;Q=fa.stencil_mask;Q!==ia.stencil_mask&&(F.stencilMask(Q),ia.stencil_mask=Q);V=Ud[0];T=Ud[1];aa=Ud[2];if(V!==te[0]||T!==te[1]||aa!==te[2])F.stencilFunc(V,T,aa),te[0]=V,te[1]=T,te[2]=aa;ma=de[0];ha=de[1];sa=de[2];pa=de[3];if(ma!==se[0]||
ha!==se[1]||sa!==se[2]||pa!==se[3])F.stencilOpSeparate(ma,ha,sa,pa),se[0]=ma,se[1]=ha,se[2]=sa,se[3]=pa;cb=re[0];ub=re[1];Ra=re[2];Sb=re[3];if(cb!==Kc[0]||ub!==Kc[1]||Ra!==Kc[2]||Sb!==Kc[3])F.stencilOpSeparate(cb,ub,Ra,Sb),Kc[0]=cb,Kc[1]=ub,Kc[2]=Ra,Kc[3]=Sb}F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);ia.blend_enable=!0;F.blendFuncSeparate(770,771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;F.disable(2929);ia.depth_enable=!1;F.enable(3089);ia.scissor_enable=!0;F.disable(2960);
ia.stencil_enable=!1;if(d=ia.profile)f=performance.now(),b.count+=c;F.useProgram(ra.program);g=Lc.angle_instanced_arrays;var eb;ga.setVAO(null);F.uniform1i(y.location,!1);F.uniform1i(La.location,qa.bind());eb=Ca.instances;for(h=0;h<c;++h){k=a[h];var db,Wb,Pd,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,Xd,Ec,
Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Gf,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,ve,ue,We,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Le,ye,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf;db=k.viewport;Wb=db.x|0;Pd=db.y|0;jc="width"in db?db.width|0:N.framebufferWidth-Wb;Ob="height"in db?db.height|0:N.framebufferHeight-Pd;vd=N.viewportWidth;N.viewportWidth=
jc;Pb=N.viewportHeight;N.viewportHeight=Ob;F.viewport(Wb,Pd,jc,Ob);Qd[0]=Wb;Qd[1]=Pd;Qd[2]=jc;Qd[3]=Ob;Ma=k.viewport;pb=Ma.x|0;vb=Ma.y|0;ib="width"in Ma?Ma.width|0:N.framebufferWidth-pb;Na="height"in Ma?Ma.height|0:N.framebufferHeight-vb;F.scissor(pb,vb,ib,Na);be[0]=pb;be[1]=vb;be[2]=ib;be[3]=Na;yc=na.call(this,N,k,h);Qb=!1;sd=null;fb=0;kc=!1;ac=Rc=0;lb=1;mb=0;ta=5126;bb=Ta=ua=qb=0;B(yc)?(Qb=!0,sd=X.createStream(34962,yc),ta=sd.dtype):(sd=X.getBuffer(yc))?ta=sd.dtype:"constant"in yc?(lb=2,"number"===
typeof yc.constant?(ua=yc.constant,Ta=bb=qb=0):(ua=0<yc.constant.length?yc.constant[0]:0,Ta=1<yc.constant.length?yc.constant[1]:0,bb=2<yc.constant.length?yc.constant[2]:0,qb=3<yc.constant.length?yc.constant[3]:0)):(sd=B(yc.buffer)?X.createStream(34962,yc.buffer):X.getBuffer(yc.buffer),ta="type"in yc?Yd[yc.type]:sd.dtype,kc=!!yc.normalized,ac=yc.size|0,Rc=yc.offset|0,mb=yc.stride|0,fb=yc.divisor|0);za=fc.location;gb=wc[za];if(1===lb){gb.buffer||F.enableVertexAttribArray(za);Ia=ac||1;if(gb.type!==ta||
gb.size!==Ia||gb.buffer!==sd||gb.normalized!==kc||gb.offset!==Rc||gb.stride!==mb)F.bindBuffer(34962,sd.buffer),F.vertexAttribPointer(za,Ia,ta,kc,mb,Rc),gb.type=ta,gb.size=Ia,gb.buffer=sd,gb.normalized=kc,gb.offset=Rc,gb.stride=mb;gb.divisor!==fb&&(g.vertexAttribDivisorANGLE(za,fb),gb.divisor=fb)}else if(gb.buffer&&(F.disableVertexAttribArray(za),gb.buffer=null),gb.x!==ua||gb.y!==Ta||gb.z!==bb||gb.w!==qb)F.vertexAttrib4f(za,ua,Ta,bb,qb),gb.x=ua,gb.y=Ta,gb.z=bb,gb.w=qb;Bb=Yc.call(this,N,k,h);Ab=!1;
Qa=null;uc=0;Ib=!1;Rb=Za=0;va=1;kd=0;Ja=5126;wa=jb=hb=Lb=0;B(Bb)?(Ab=!0,Qa=X.createStream(34962,Bb),Ja=Qa.dtype):(Qa=X.getBuffer(Bb))?Ja=Qa.dtype:"constant"in Bb?(va=2,"number"===typeof Bb.constant?(hb=Bb.constant,jb=wa=Lb=0):(hb=0<Bb.constant.length?Bb.constant[0]:0,jb=1<Bb.constant.length?Bb.constant[1]:0,wa=2<Bb.constant.length?Bb.constant[2]:0,Lb=3<Bb.constant.length?Bb.constant[3]:0)):(Qa=B(Bb.buffer)?X.createStream(34962,Bb.buffer):X.getBuffer(Bb.buffer),Ja="type"in Bb?Yd[Bb.type]:Qa.dtype,
Ib=!!Bb.normalized,Rb=Bb.size|0,Za=Bb.offset|0,kd=Bb.stride|0,uc=Bb.divisor|0);cc=tc.location;Da=wc[cc];if(1===va){Da.buffer||F.enableVertexAttribArray(cc);rb=Rb||1;if(Da.type!==Ja||Da.size!==rb||Da.buffer!==Qa||Da.normalized!==Ib||Da.offset!==Za||Da.stride!==kd)F.bindBuffer(34962,Qa.buffer),F.vertexAttribPointer(cc,rb,Ja,Ib,kd,Za),Da.type=Ja,Da.size=rb,Da.buffer=Qa,Da.normalized=Ib,Da.offset=Za,Da.stride=kd;Da.divisor!==uc&&(g.vertexAttribDivisorANGLE(cc,uc),Da.divisor=uc)}else if(Da.buffer&&(F.disableVertexAttribArray(cc),
Da.buffer=null),Da.x!==hb||Da.y!==jb||Da.z!==wa||Da.w!==Lb)F.vertexAttrib4f(cc,hb,jb,wa,Lb),Da.x=hb,Da.y=jb,Da.z=wa,Da.w=Lb;sb=pc.call(this,N,k,h);Xa=!1;Ya=null;lc=0;vc=!1;Va=rc=0;Xb=1;Gc=0;Ea=5126;nb=Aa=Oa=zc=0;B(sb)?(Xa=!0,Ya=X.createStream(34962,sb),Ea=Ya.dtype):(Ya=X.getBuffer(sb))?Ea=Ya.dtype:"constant"in sb?(Xb=2,"number"===typeof sb.constant?(Oa=sb.constant,Aa=nb=zc=0):(Oa=0<sb.constant.length?sb.constant[0]:0,Aa=1<sb.constant.length?sb.constant[1]:0,nb=2<sb.constant.length?sb.constant[2]:
0,zc=3<sb.constant.length?sb.constant[3]:0)):(Ya=B(sb.buffer)?X.createStream(34962,sb.buffer):X.getBuffer(sb.buffer),Ea="type"in sb?Yd[sb.type]:Ya.dtype,vc=!!sb.normalized,Va=sb.size|0,rc=sb.offset|0,Gc=sb.stride|0,lc=sb.divisor|0);wb=hc.location;Cb=wc[wb];if(1===Xb){Cb.buffer||F.enableVertexAttribArray(wb);tb=Va||1;if(Cb.type!==Ea||Cb.size!==tb||Cb.buffer!==Ya||Cb.normalized!==vc||Cb.offset!==rc||Cb.stride!==Gc)F.bindBuffer(34962,Ya.buffer),F.vertexAttribPointer(wb,tb,Ea,vc,Gc,rc),Cb.type=Ea,Cb.size=
tb,Cb.buffer=Ya,Cb.normalized=vc,Cb.offset=rc,Cb.stride=Gc;Cb.divisor!==lc&&(g.vertexAttribDivisorANGLE(wb,lc),Cb.divisor=lc)}else if(Cb.buffer&&(F.disableVertexAttribArray(wb),Cb.buffer=null),Cb.x!==Oa||Cb.y!==Aa||Cb.z!==nb||Cb.w!==zc)F.vertexAttrib4f(wb,Oa,Aa,nb,zc),Cb.x=Oa,Cb.y=Aa,Cb.z=nb,Cb.w=zc;sc=la.call(this,N,k,h);xb=!1;ld=null;oc=0;ee=!1;hd=Nc=0;id=1;Tb=0;$b=5126;ob=Yb=Fa=Mb=0;B(sc)?(xb=!0,ld=X.createStream(34962,sc),$b=ld.dtype):(ld=X.getBuffer(sc))?$b=ld.dtype:"constant"in sc?(id=2,"number"===
typeof sc.constant?(Fa=sc.constant,Yb=ob=Mb=0):(Fa=0<sc.constant.length?sc.constant[0]:0,Yb=1<sc.constant.length?sc.constant[1]:0,ob=2<sc.constant.length?sc.constant[2]:0,Mb=3<sc.constant.length?sc.constant[3]:0)):(ld=B(sc.buffer)?X.createStream(34962,sc.buffer):X.getBuffer(sc.buffer),$b="type"in sc?Yd[sc.type]:ld.dtype,ee=!!sc.normalized,hd=sc.size|0,Nc=sc.offset|0,Tb=sc.stride|0,oc=sc.divisor|0);yb=wd.location;Kb=wc[yb];if(1===id){Kb.buffer||F.enableVertexAttribArray(yb);Nb=hd||1;if(Kb.type!==$b||
Kb.size!==Nb||Kb.buffer!==ld||Kb.normalized!==ee||Kb.offset!==Nc||Kb.stride!==Tb)F.bindBuffer(34962,ld.buffer),F.vertexAttribPointer(yb,Nb,$b,ee,Tb,Nc),Kb.type=$b,Kb.size=Nb,Kb.buffer=ld,Kb.normalized=ee,Kb.offset=Nc,Kb.stride=Tb;Kb.divisor!==oc&&(g.vertexAttribDivisorANGLE(yb,oc),Kb.divisor=oc)}else if(Kb.buffer&&(F.disableVertexAttribArray(yb),Kb.buffer=null),Kb.x!==Fa||Kb.y!==Yb||Kb.z!==ob||Kb.w!==Mb)F.vertexAttrib4f(yb,Fa,Yb,ob,Mb),Kb.x=Fa,Kb.y=Yb,Kb.z=ob,Kb.w=Mb;dc=Pa.call(this,N,k,h);gc=!1;
Xd=null;Ec=0;Fc=!1;Oc=Hc=0;bd=1;Uc=0;Pc=5126;Jc=Qc=Fb=Jb=0;B(dc)?(gc=!0,Xd=X.createStream(34962,dc),Pc=Xd.dtype):(Xd=X.getBuffer(dc))?Pc=Xd.dtype:"constant"in dc?(bd=2,"number"===typeof dc.constant?(Fb=dc.constant,Qc=Jc=Jb=0):(Fb=0<dc.constant.length?dc.constant[0]:0,Qc=1<dc.constant.length?dc.constant[1]:0,Jc=2<dc.constant.length?dc.constant[2]:0,Jb=3<dc.constant.length?dc.constant[3]:0)):(Xd=B(dc.buffer)?X.createStream(34962,dc.buffer):X.getBuffer(dc.buffer),Pc="type"in dc?Yd[dc.type]:Xd.dtype,
Fc=!!dc.normalized,Oc=dc.size|0,Hc=dc.offset|0,Uc=dc.stride|0,Ec=dc.divisor|0);Vc=kb.location;ec=wc[Vc];if(1===bd){ec.buffer||F.enableVertexAttribArray(Vc);Zc=Oc||1;if(ec.type!==Pc||ec.size!==Zc||ec.buffer!==Xd||ec.normalized!==Fc||ec.offset!==Hc||ec.stride!==Uc)F.bindBuffer(34962,Xd.buffer),F.vertexAttribPointer(Vc,Zc,Pc,Fc,Uc,Hc),ec.type=Pc,ec.size=Zc,ec.buffer=Xd,ec.normalized=Fc,ec.offset=Hc,ec.stride=Uc;ec.divisor!==Ec&&(g.vertexAttribDivisorANGLE(Vc,Ec),ec.divisor=Ec)}else if(ec.buffer&&(F.disableVertexAttribArray(Vc),
ec.buffer=null),ec.x!==Fb||ec.y!==Qc||ec.z!==Jc||ec.w!==Jb)F.vertexAttrib4f(Vc,Fb,Qc,Jc,Jb),ec.x=Fb,ec.y=Qc,ec.z=Jc,ec.w=Jb;dd=Z.call(this,N,k,h);pd=!1;ne=null;$c=0;Gf=!1;he=Vd=0;Ie=1;ke=0;Gd=5126;qd=Ic=fd=Ed=0;B(dd)?(pd=!0,ne=X.createStream(34962,dd),Gd=ne.dtype):(ne=X.getBuffer(dd))?Gd=ne.dtype:"constant"in dd?(Ie=2,"number"===typeof dd.constant?(fd=dd.constant,Ic=qd=Ed=0):(fd=0<dd.constant.length?dd.constant[0]:0,Ic=1<dd.constant.length?dd.constant[1]:0,qd=2<dd.constant.length?dd.constant[2]:0,
Ed=3<dd.constant.length?dd.constant[3]:0)):(ne=B(dd.buffer)?X.createStream(34962,dd.buffer):X.getBuffer(dd.buffer),Gd="type"in dd?Yd[dd.type]:ne.dtype,Gf=!!dd.normalized,he=dd.size|0,Vd=dd.offset|0,ke=dd.stride|0,$c=dd.divisor|0);jd=$a.location;cd=wc[jd];if(1===Ie){cd.buffer||F.enableVertexAttribArray(jd);md=he||1;if(cd.type!==Gd||cd.size!==md||cd.buffer!==ne||cd.normalized!==Gf||cd.offset!==Vd||cd.stride!==ke)F.bindBuffer(34962,ne.buffer),F.vertexAttribPointer(jd,md,Gd,Gf,ke,Vd),cd.type=Gd,cd.size=
md,cd.buffer=ne,cd.normalized=Gf,cd.offset=Vd,cd.stride=ke;cd.divisor!==$c&&(g.vertexAttribDivisorANGLE(jd,$c),cd.divisor=$c)}else if(cd.buffer&&(F.disableVertexAttribArray(jd),cd.buffer=null),cd.x!==fd||cd.y!==Ic||cd.z!==qd||cd.w!==Ed)F.vertexAttrib4f(jd,fd,Ic,qd,Ed),cd.x=fd,cd.y=Ic,cd.z=qd,cd.w=Ed;Cd=L.call(this,N,k,h);zd=!1;ve=null;ue=0;We=!1;ce=le=0;ae=1;oe=0;Zd=5126;pe=Xc=Ac=fe=0;B(Cd)?(zd=!0,ve=X.createStream(34962,Cd),Zd=ve.dtype):(ve=X.getBuffer(Cd))?Zd=ve.dtype:"constant"in Cd?(ae=2,"number"===
typeof Cd.constant?(Ac=Cd.constant,Xc=pe=fe=0):(Ac=0<Cd.constant.length?Cd.constant[0]:0,Xc=1<Cd.constant.length?Cd.constant[1]:0,pe=2<Cd.constant.length?Cd.constant[2]:0,fe=3<Cd.constant.length?Cd.constant[3]:0)):(ve=B(Cd.buffer)?X.createStream(34962,Cd.buffer):X.getBuffer(Cd.buffer),Zd="type"in Cd?Yd[Cd.type]:ve.dtype,We=!!Cd.normalized,ce=Cd.size|0,le=Cd.offset|0,oe=Cd.stride|0,ue=Cd.divisor|0);ie=R.location;Fd=wc[ie];if(1===ae){Fd.buffer||F.enableVertexAttribArray(ie);Id=ce||4;if(Fd.type!==Zd||
Fd.size!==Id||Fd.buffer!==ve||Fd.normalized!==We||Fd.offset!==le||Fd.stride!==oe)F.bindBuffer(34962,ve.buffer),F.vertexAttribPointer(ie,Id,Zd,We,oe,le),Fd.type=Zd,Fd.size=Id,Fd.buffer=ve,Fd.normalized=We,Fd.offset=le,Fd.stride=oe;Fd.divisor!==ue&&(g.vertexAttribDivisorANGLE(ie,ue),Fd.divisor=ue)}else if(Fd.buffer&&(F.disableVertexAttribArray(ie),Fd.buffer=null),Fd.x!==Ac||Fd.y!==Xc||Fd.z!==pe||Fd.w!==fe)F.vertexAttrib4f(ie,Ac,Xc,pe,fe),Fd.x=Ac,Fd.y=Xc,Fd.z=pe,Fd.w=fe;Kd=I.call(this,N,k,h);Ld=!1;ge=
null;Te=0;we=!1;Ne=me=0;Oe=1;Je=0;qe=5126;Ee=De=Ce=ze=0;B(Kd)?(Ld=!0,ge=X.createStream(34962,Kd),qe=ge.dtype):(ge=X.getBuffer(Kd))?qe=ge.dtype:"constant"in Kd?(Oe=2,"number"===typeof Kd.constant?(Ce=Kd.constant,De=Ee=ze=0):(Ce=0<Kd.constant.length?Kd.constant[0]:0,De=1<Kd.constant.length?Kd.constant[1]:0,Ee=2<Kd.constant.length?Kd.constant[2]:0,ze=3<Kd.constant.length?Kd.constant[3]:0)):(ge=B(Kd.buffer)?X.createStream(34962,Kd.buffer):X.getBuffer(Kd.buffer),qe="type"in Kd?Yd[Kd.type]:ge.dtype,we=
!!Kd.normalized,Ne=Kd.size|0,me=Kd.offset|0,Je=Kd.stride|0,Te=Kd.divisor|0);Ae=Ub.location;Hd=wc[Ae];if(1===Oe){Hd.buffer||F.enableVertexAttribArray(Ae);Od=Ne||4;if(Hd.type!==qe||Hd.size!==Od||Hd.buffer!==ge||Hd.normalized!==we||Hd.offset!==me||Hd.stride!==Je)F.bindBuffer(34962,ge.buffer),F.vertexAttribPointer(Ae,Od,qe,we,Je,me),Hd.type=qe,Hd.size=Od,Hd.buffer=ge,Hd.normalized=we,Hd.offset=me,Hd.stride=Je;Hd.divisor!==Te&&(g.vertexAttribDivisorANGLE(Ae,Te),Hd.divisor=Te)}else if(Hd.buffer&&(F.disableVertexAttribArray(Ae),
Hd.buffer=null),Hd.x!==Ce||Hd.y!==De||Hd.z!==Ee||Hd.w!==ze)F.vertexAttrib4f(Ae,Ce,De,Ee,ze),Hd.x=Ce,Hd.y=De,Hd.z=Ee,Hd.w=ze;Wd=U.call(this,N,k,h);$d=!1;Fe=null;Bd=0;Md=!1;Ge=xe=0;ff=1;Ye=0;Pe=5126;Qe=Ue=Xe=Ke=0;B(Wd)?($d=!0,Fe=X.createStream(34962,Wd),Pe=Fe.dtype):(Fe=X.getBuffer(Wd))?Pe=Fe.dtype:"constant"in Wd?(ff=2,"number"===typeof Wd.constant?(Xe=Wd.constant,Ue=Qe=Ke=0):(Xe=0<Wd.constant.length?Wd.constant[0]:0,Ue=1<Wd.constant.length?Wd.constant[1]:0,Qe=2<Wd.constant.length?Wd.constant[2]:0,
Ke=3<Wd.constant.length?Wd.constant[3]:0)):(Fe=B(Wd.buffer)?X.createStream(34962,Wd.buffer):X.getBuffer(Wd.buffer),Pe="type"in Wd?Yd[Wd.type]:Fe.dtype,Md=!!Wd.normalized,Ge=Wd.size|0,xe=Wd.offset|0,Ye=Wd.stride|0,Bd=Wd.divisor|0);Re=ja.location;Nd=wc[Re];if(1===ff){Nd.buffer||F.enableVertexAttribArray(Re);Td=Ge||1;if(Nd.type!==Pe||Nd.size!==Td||Nd.buffer!==Fe||Nd.normalized!==Md||Nd.offset!==xe||Nd.stride!==Ye)F.bindBuffer(34962,Fe.buffer),F.vertexAttribPointer(Re,Td,Pe,Md,Ye,xe),Nd.type=Pe,Nd.size=
Td,Nd.buffer=Fe,Nd.normalized=Md,Nd.offset=xe,Nd.stride=Ye;Nd.divisor!==Bd&&(g.vertexAttribDivisorANGLE(Re,Bd),Nd.divisor=Bd)}else if(Nd.buffer&&(F.disableVertexAttribArray(Re),Nd.buffer=null),Nd.x!==Xe||Nd.y!==Ue||Nd.z!==Qe||Nd.w!==Ke)F.vertexAttrib4f(Re,Xe,Ue,Qe,Ke),Nd.x=Xe,Nd.y=Ue,Nd.z=Qe,Nd.w=Ke;Se=N.pixelRatio;h&&gf===Se||(gf=Se,F.uniform1f(bc.location,Se));lf=P.call(this,N,k,h);cf=lf[0];jf=lf[1];h&&hf===cf&&kf===jf||(hf=cf,kf=jf,F.uniform2f(xa.location,cf,jf));qf=k.scale;nf=qf[0];Bf=qf[1];h&&
rf===nf&&Cf===Bf||(rf=nf,Cf=Bf,F.uniform2f(Ua.location,nf,Bf));Le=k.scaleFract;ye=Le[0];pf=Le[1];h&&of===ye&&Df===pf||(of=ye,Df=pf,F.uniform2f(Y.location,ye,pf));Hf=k.translate;Af=Hf[0];Ff=Hf[1];h&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,F.uniform2f(ea.location,Af,Ff));xf=k.translateFract;uf=xf[0];zf=xf[1];h&&yf===uf&&Jf===zf||(yf=uf,Jf=zf,F.uniform2f(oa.location,uf,zf));Kf=k.opacity;h&&Lf===Kf||(Lf=Kf,F.uniform1f(ba.location,Kf));Mf=k.elements;sf=null;(sf=(Rf=B(Mf))?Gb.createStream(Mf):Gb.getElements(Mf))&&
F.bindBuffer(34963,sf.buffer.buffer);If=k.offset;if(tf=k.count)0<eb?sf?g.drawElementsInstancedANGLE(0,tf,sf.type,If<<(sf.type-5121>>1),eb):g.drawArraysInstancedANGLE(0,If,tf,eb):0>eb&&(sf?F.drawElements(0,tf,sf.type,If<<(sf.type-5121>>1)):F.drawArrays(0,If,tf)),N.viewportWidth=vd,N.viewportHeight=Pb,Qb&&X.destroyStream(sd),Ab&&X.destroyStream(Qa),Xa&&X.destroyStream(Ya),xb&&X.destroyStream(ld),gc&&X.destroyStream(Xd),pd&&X.destroyStream(ne),zd&&X.destroyStream(ve),Ld&&X.destroyStream(ge),$d&&X.destroyStream(Fe),
Rf&&Gb.destroyStream(sf)}qa.unbind();ia.dirty=!0;ga.setVAO(null);d&&(b.cpuTime+=performance.now()-f)},draw:function(a){var f,k,m,p,v,A,z,D,H,K,M,J,L,C,S,O,I,P,Q,V,T,U,aa,Z,ma,ha,sa,pa,na,qa,ra,la,cb,Ka,Pa,Wa,ya,db,ub,Ra,Sb,eb,Tc,Wb,pc,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,Yc,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,Pd,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,
Qc,Jc,Vc,ec,Zc,dd,pd,ne,$c,Xd,Vd,he,Ie,ke,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,ve,ue,We,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne;f=Wc.next;f!==Wc.cur&&(f?F.bindFramebuffer(36160,f.framebuffer):F.bindFramebuffer(36160,null),Wc.cur=f);if(ia.dirty){var Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,hf,jf,kf;Oe=fa.dither;Oe!==ia.dither&&(Oe?F.enable(3024):F.disable(3024),ia.dither=Oe);Je=x[0];qe=x[1];if(Je!==ca[0]||qe!==ca[1])F.blendEquationSeparate(Je,
qe),ca[0]=Je,ca[1]=qe;ze=fa.depth_func;ze!==ia.depth_func&&(F.depthFunc(ze),ia.depth_func=ze);Ce=qc[0];De=qc[1];if(Ce!==Ha[0]||De!==Ha[1])F.depthRange(Ce,De),Ha[0]=Ce,Ha[1]=De;Ee=fa.depth_mask;Ee!==ia.depth_mask&&(F.depthMask(Ee),ia.depth_mask=Ee);Ae=Ga[0];Hd=Ga[1];Od=Ga[2];Wd=Ga[3];if(Ae!==t[0]||Hd!==t[1]||Od!==t[2]||Wd!==t[3])F.colorMask(Ae,Hd,Od,Wd),t[0]=Ae,t[1]=Hd,t[2]=Od,t[3]=Wd;$d=fa.cull_enable;$d!==ia.cull_enable&&($d?F.enable(2884):F.disable(2884),ia.cull_enable=$d);Fe=fa.cull_face;Fe!==
ia.cull_face&&(F.cullFace(Fe),ia.cull_face=Fe);Bd=fa.frontFace;Bd!==ia.frontFace&&(F.frontFace(Bd),ia.frontFace=Bd);Md=fa.lineWidth;Md!==ia.lineWidth&&(F.lineWidth(Md),ia.lineWidth=Md);xe=fa.polygonOffset_enable;xe!==ia.polygonOffset_enable&&(xe?F.enable(32823):F.disable(32823),ia.polygonOffset_enable=xe);Ge=W[0];ff=W[1];if(Ge!==Hb[0]||ff!==Hb[1])F.polygonOffset(Ge,ff),Hb[0]=Ge,Hb[1]=ff;Ye=fa.sample_alpha;Ye!==ia.sample_alpha&&(Ye?F.enable(32926):F.disable(32926),ia.sample_alpha=Ye);Pe=fa.sample_enable;
Pe!==ia.sample_enable&&(Pe?F.enable(32928):F.disable(32928),ia.sample_enable=Pe);Ke=zb[0];Xe=zb[1];if(Ke!==Ze[0]||Xe!==Ze[1])F.sampleCoverage(Ke,Xe),Ze[0]=Ke,Ze[1]=Xe;Ue=fa.stencil_mask;Ue!==ia.stencil_mask&&(F.stencilMask(Ue),ia.stencil_mask=Ue);Qe=Ud[0];Re=Ud[1];Nd=Ud[2];if(Qe!==te[0]||Re!==te[1]||Nd!==te[2])F.stencilFunc(Qe,Re,Nd),te[0]=Qe,te[1]=Re,te[2]=Nd;Td=de[0];Se=de[1];gf=de[2];lf=de[3];if(Td!==se[0]||Se!==se[1]||gf!==se[2]||lf!==se[3])F.stencilOpSeparate(Td,Se,gf,lf),se[0]=Td,se[1]=Se,se[2]=
gf,se[3]=lf;cf=re[0];hf=re[1];jf=re[2];kf=re[3];if(cf!==Kc[0]||hf!==Kc[1]||jf!==Kc[2]||kf!==Kc[3])F.stencilOpSeparate(cf,hf,jf,kf),Kc[0]=cf,Kc[1]=hf,Kc[2]=jf,Kc[3]=kf}k=a.viewport;m=k.x|0;p=k.y|0;v="width"in k?k.width|0:N.framebufferWidth-m;A="height"in k?k.height|0:N.framebufferHeight-p;z=N.viewportWidth;N.viewportWidth=v;D=N.viewportHeight;N.viewportHeight=A;F.viewport(m,p,v,A);Qd[0]=m;Qd[1]=p;Qd[2]=v;Qd[3]=A;F.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;F.enable(3042);ia.blend_enable=!0;F.blendFuncSeparate(770,
771,773,1);Ba[0]=770;Ba[1]=771;Ba[2]=773;Ba[3]=1;F.disable(2929);ia.depth_enable=!1;H=a.viewport;K=H.x|0;M=H.y|0;J="width"in H?H.width|0:N.framebufferWidth-K;L="height"in H?H.height|0:N.framebufferHeight-M;F.scissor(K,M,J,L);be[0]=K;be[1]=M;be[2]=J;be[3]=L;F.enable(3089);ia.scissor_enable=!0;F.disable(2960);ia.stencil_enable=!1;if(C=ia.profile)S=performance.now(),b.count++;F.useProgram(g.program);O=Lc.angle_instanced_arrays;ga.setVAO(null);I=h.call(this,N,a,0);P=!1;Q=null;V=0;T=!1;aa=U=0;Z=1;ma=0;
ha=5126;qa=na=pa=sa=0;B(I)?(P=!0,Q=X.createStream(34962,I),ha=Q.dtype):(Q=X.getBuffer(I))?ha=Q.dtype:"constant"in I?(Z=2,"number"===typeof I.constant?(pa=I.constant,na=qa=sa=0):(pa=0<I.constant.length?I.constant[0]:0,na=1<I.constant.length?I.constant[1]:0,qa=2<I.constant.length?I.constant[2]:0,sa=3<I.constant.length?I.constant[3]:0)):(Q=B(I.buffer)?X.createStream(34962,I.buffer):X.getBuffer(I.buffer),ha="type"in I?Yd[I.type]:Q.dtype,T=!!I.normalized,aa=I.size|0,U=I.offset|0,ma=I.stride|0,V=I.divisor|
0);ra=fc.location;la=wc[ra];if(1===Z){la.buffer||F.enableVertexAttribArray(ra);cb=aa||1;if(la.type!==ha||la.size!==cb||la.buffer!==Q||la.normalized!==T||la.offset!==U||la.stride!==ma)F.bindBuffer(34962,Q.buffer),F.vertexAttribPointer(ra,cb,ha,T,ma,U),la.type=ha,la.size=cb,la.buffer=Q,la.normalized=T,la.offset=U,la.stride=ma;la.divisor!==V&&(O.vertexAttribDivisorANGLE(ra,V),la.divisor=V)}else if(la.buffer&&(F.disableVertexAttribArray(ra),la.buffer=null),la.x!==pa||la.y!==na||la.z!==qa||la.w!==sa)F.vertexAttrib4f(ra,
pa,na,qa,sa),la.x=pa,la.y=na,la.z=qa,la.w=sa;Ka=d.call(this,N,a,0);Pa=!1;Wa=null;ya=0;db=!1;Ra=ub=0;Sb=1;eb=0;Tc=5126;Ob=jc=pc=Wb=0;B(Ka)?(Pa=!0,Wa=X.createStream(34962,Ka),Tc=Wa.dtype):(Wa=X.getBuffer(Ka))?Tc=Wa.dtype:"constant"in Ka?(Sb=2,"number"===typeof Ka.constant?(pc=Ka.constant,jc=Ob=Wb=0):(pc=0<Ka.constant.length?Ka.constant[0]:0,jc=1<Ka.constant.length?Ka.constant[1]:0,Ob=2<Ka.constant.length?Ka.constant[2]:0,Wb=3<Ka.constant.length?Ka.constant[3]:0)):(Wa=B(Ka.buffer)?X.createStream(34962,
Ka.buffer):X.getBuffer(Ka.buffer),Tc="type"in Ka?Yd[Ka.type]:Wa.dtype,db=!!Ka.normalized,Ra=Ka.size|0,ub=Ka.offset|0,eb=Ka.stride|0,ya=Ka.divisor|0);vd=tc.location;Pb=wc[vd];if(1===Sb){Pb.buffer||F.enableVertexAttribArray(vd);Ma=Ra||1;if(Pb.type!==Tc||Pb.size!==Ma||Pb.buffer!==Wa||Pb.normalized!==db||Pb.offset!==ub||Pb.stride!==eb)F.bindBuffer(34962,Wa.buffer),F.vertexAttribPointer(vd,Ma,Tc,db,eb,ub),Pb.type=Tc,Pb.size=Ma,Pb.buffer=Wa,Pb.normalized=db,Pb.offset=ub,Pb.stride=eb;Pb.divisor!==ya&&(O.vertexAttribDivisorANGLE(vd,
ya),Pb.divisor=ya)}else if(Pb.buffer&&(F.disableVertexAttribArray(vd),Pb.buffer=null),Pb.x!==pc||Pb.y!==jc||Pb.z!==Ob||Pb.w!==Wb)F.vertexAttrib4f(vd,pc,jc,Ob,Wb),Pb.x=pc,Pb.y=jc,Pb.z=Ob,Pb.w=Wb;pb=c.call(this,N,a,0);vb=!1;ib=null;Na=0;yc=!1;sd=Qb=0;fb=1;kc=0;Rc=5126;ta=mb=lb=ac=0;B(pb)?(vb=!0,ib=X.createStream(34962,pb),Rc=ib.dtype):(ib=X.getBuffer(pb))?Rc=ib.dtype:"constant"in pb?(fb=2,"number"===typeof pb.constant?(lb=pb.constant,mb=ta=ac=0):(lb=0<pb.constant.length?pb.constant[0]:0,mb=1<pb.constant.length?
pb.constant[1]:0,ta=2<pb.constant.length?pb.constant[2]:0,ac=3<pb.constant.length?pb.constant[3]:0)):(ib=B(pb.buffer)?X.createStream(34962,pb.buffer):X.getBuffer(pb.buffer),Rc="type"in pb?Yd[pb.type]:ib.dtype,yc=!!pb.normalized,sd=pb.size|0,Qb=pb.offset|0,kc=pb.stride|0,Na=pb.divisor|0);qb=hc.location;ua=wc[qb];if(1===fb){ua.buffer||F.enableVertexAttribArray(qb);Ta=sd||1;if(ua.type!==Rc||ua.size!==Ta||ua.buffer!==ib||ua.normalized!==yc||ua.offset!==Qb||ua.stride!==kc)F.bindBuffer(34962,ib.buffer),
F.vertexAttribPointer(qb,Ta,Rc,yc,kc,Qb),ua.type=Rc,ua.size=Ta,ua.buffer=ib,ua.normalized=yc,ua.offset=Qb,ua.stride=kc;ua.divisor!==Na&&(O.vertexAttribDivisorANGLE(qb,Na),ua.divisor=Na)}else if(ua.buffer&&(F.disableVertexAttribArray(qb),ua.buffer=null),ua.x!==lb||ua.y!==mb||ua.z!==ta||ua.w!==ac)F.vertexAttrib4f(qb,lb,mb,ta,ac),ua.x=lb,ua.y=mb,ua.z=ta,ua.w=ac;bb=n.call(this,N,a,0);za=!1;gb=null;Ia=0;Bb=!1;Qa=Ab=0;uc=1;Ib=0;Za=5126;Ja=kd=va=Rb=0;B(bb)?(za=!0,gb=X.createStream(34962,bb),Za=gb.dtype):
(gb=X.getBuffer(bb))?Za=gb.dtype:"constant"in bb?(uc=2,"number"===typeof bb.constant?(va=bb.constant,kd=Ja=Rb=0):(va=0<bb.constant.length?bb.constant[0]:0,kd=1<bb.constant.length?bb.constant[1]:0,Ja=2<bb.constant.length?bb.constant[2]:0,Rb=3<bb.constant.length?bb.constant[3]:0)):(gb=B(bb.buffer)?X.createStream(34962,bb.buffer):X.getBuffer(bb.buffer),Za="type"in bb?Yd[bb.type]:gb.dtype,Bb=!!bb.normalized,Qa=bb.size|0,Ab=bb.offset|0,Ib=bb.stride|0,Ia=bb.divisor|0);Lb=wd.location;hb=wc[Lb];if(1===uc){hb.buffer||
F.enableVertexAttribArray(Lb);jb=Qa||1;if(hb.type!==Za||hb.size!==jb||hb.buffer!==gb||hb.normalized!==Bb||hb.offset!==Ab||hb.stride!==Ib)F.bindBuffer(34962,gb.buffer),F.vertexAttribPointer(Lb,jb,Za,Bb,Ib,Ab),hb.type=Za,hb.size=jb,hb.buffer=gb,hb.normalized=Bb,hb.offset=Ab,hb.stride=Ib;hb.divisor!==Ia&&(O.vertexAttribDivisorANGLE(Lb,Ia),hb.divisor=Ia)}else if(hb.buffer&&(F.disableVertexAttribArray(Lb),hb.buffer=null),hb.x!==va||hb.y!==kd||hb.z!==Ja||hb.w!==Rb)F.vertexAttrib4f(Lb,va,kd,Ja,Rb),hb.x=
va,hb.y=kd,hb.z=Ja,hb.w=Rb;wa=e.call(this,N,a,0);cc=!1;Da=null;rb=0;sb=!1;Ya=Xa=0;lc=1;vc=0;rc=5126;Ea=Gc=Xb=Va=0;B(wa)?(cc=!0,Da=X.createStream(34962,wa),rc=Da.dtype):(Da=X.getBuffer(wa))?rc=Da.dtype:"constant"in wa?(lc=2,"number"===typeof wa.constant?(Xb=wa.constant,Gc=Ea=Va=0):(Xb=0<wa.constant.length?wa.constant[0]:0,Gc=1<wa.constant.length?wa.constant[1]:0,Ea=2<wa.constant.length?wa.constant[2]:0,Va=3<wa.constant.length?wa.constant[3]:0)):(Da=B(wa.buffer)?X.createStream(34962,wa.buffer):X.getBuffer(wa.buffer),
rc="type"in wa?Yd[wa.type]:Da.dtype,sb=!!wa.normalized,Ya=wa.size|0,Xa=wa.offset|0,vc=wa.stride|0,rb=wa.divisor|0);zc=kb.location;Oa=wc[zc];if(1===lc){Oa.buffer||F.enableVertexAttribArray(zc);Aa=Ya||1;if(Oa.type!==rc||Oa.size!==Aa||Oa.buffer!==Da||Oa.normalized!==sb||Oa.offset!==Xa||Oa.stride!==vc)F.bindBuffer(34962,Da.buffer),F.vertexAttribPointer(zc,Aa,rc,sb,vc,Xa),Oa.type=rc,Oa.size=Aa,Oa.buffer=Da,Oa.normalized=sb,Oa.offset=Xa,Oa.stride=vc;Oa.divisor!==rb&&(O.vertexAttribDivisorANGLE(zc,rb),Oa.divisor=
rb)}else if(Oa.buffer&&(F.disableVertexAttribArray(zc),Oa.buffer=null),Oa.x!==Xb||Oa.y!==Gc||Oa.z!==Ea||Oa.w!==Va)F.vertexAttrib4f(zc,Xb,Gc,Ea,Va),Oa.x=Xb,Oa.y=Gc,Oa.z=Ea,Oa.w=Va;nb=q.call(this,N,a,0);wb=!1;Cb=null;tb=0;sc=!1;ld=xb=0;oc=1;Yc=0;Nc=5126;$b=Tb=id=hd=0;B(nb)?(wb=!0,Cb=X.createStream(34962,nb),Nc=Cb.dtype):(Cb=X.getBuffer(nb))?Nc=Cb.dtype:"constant"in nb?(oc=2,"number"===typeof nb.constant?(id=nb.constant,Tb=$b=hd=0):(id=0<nb.constant.length?nb.constant[0]:0,Tb=1<nb.constant.length?nb.constant[1]:
0,$b=2<nb.constant.length?nb.constant[2]:0,hd=3<nb.constant.length?nb.constant[3]:0)):(Cb=B(nb.buffer)?X.createStream(34962,nb.buffer):X.getBuffer(nb.buffer),Nc="type"in nb?Yd[nb.type]:Cb.dtype,sc=!!nb.normalized,ld=nb.size|0,xb=nb.offset|0,Yc=nb.stride|0,tb=nb.divisor|0);Mb=$a.location;Fa=wc[Mb];if(1===oc){Fa.buffer||F.enableVertexAttribArray(Mb);Yb=ld||1;if(Fa.type!==Nc||Fa.size!==Yb||Fa.buffer!==Cb||Fa.normalized!==sc||Fa.offset!==xb||Fa.stride!==Yc)F.bindBuffer(34962,Cb.buffer),F.vertexAttribPointer(Mb,
Yb,Nc,sc,Yc,xb),Fa.type=Nc,Fa.size=Yb,Fa.buffer=Cb,Fa.normalized=sc,Fa.offset=xb,Fa.stride=Yc;Fa.divisor!==tb&&(O.vertexAttribDivisorANGLE(Mb,tb),Fa.divisor=tb)}else if(Fa.buffer&&(F.disableVertexAttribArray(Mb),Fa.buffer=null),Fa.x!==id||Fa.y!==Tb||Fa.z!==$b||Fa.w!==hd)F.vertexAttrib4f(Mb,id,Tb,$b,hd),Fa.x=id,Fa.y=Tb,Fa.z=$b,Fa.w=hd;ob=u.call(this,N,a,0);yb=!1;Kb=null;Nb=0;dc=!1;Pd=gc=0;Ec=1;Fc=0;Hc=5126;Pc=Uc=bd=Oc=0;B(ob)?(yb=!0,Kb=X.createStream(34962,ob),Hc=Kb.dtype):(Kb=X.getBuffer(ob))?Hc=
Kb.dtype:"constant"in ob?(Ec=2,"number"===typeof ob.constant?(bd=ob.constant,Uc=Pc=Oc=0):(bd=0<ob.constant.length?ob.constant[0]:0,Uc=1<ob.constant.length?ob.constant[1]:0,Pc=2<ob.constant.length?ob.constant[2]:0,Oc=3<ob.constant.length?ob.constant[3]:0)):(Kb=B(ob.buffer)?X.createStream(34962,ob.buffer):X.getBuffer(ob.buffer),Hc="type"in ob?Yd[ob.type]:Kb.dtype,dc=!!ob.normalized,Pd=ob.size|0,gc=ob.offset|0,Fc=ob.stride|0,Nb=ob.divisor|0);Jb=R.location;Fb=wc[Jb];if(1===Ec){Fb.buffer||F.enableVertexAttribArray(Jb);
Qc=Pd||4;if(Fb.type!==Hc||Fb.size!==Qc||Fb.buffer!==Kb||Fb.normalized!==dc||Fb.offset!==gc||Fb.stride!==Fc)F.bindBuffer(34962,Kb.buffer),F.vertexAttribPointer(Jb,Qc,Hc,dc,Fc,gc),Fb.type=Hc,Fb.size=Qc,Fb.buffer=Kb,Fb.normalized=dc,Fb.offset=gc,Fb.stride=Fc;Fb.divisor!==Nb&&(O.vertexAttribDivisorANGLE(Jb,Nb),Fb.divisor=Nb)}else if(Fb.buffer&&(F.disableVertexAttribArray(Jb),Fb.buffer=null),Fb.x!==bd||Fb.y!==Uc||Fb.z!==Pc||Fb.w!==Oc)F.vertexAttrib4f(Jb,bd,Uc,Pc,Oc),Fb.x=bd,Fb.y=Uc,Fb.z=Pc,Fb.w=Oc;Jc=
w.call(this,N,a,0);Vc=!1;ec=null;Zc=0;dd=!1;ne=pd=0;$c=1;Xd=0;Vd=5126;Gd=ke=Ie=he=0;B(Jc)?(Vc=!0,ec=X.createStream(34962,Jc),Vd=ec.dtype):(ec=X.getBuffer(Jc))?Vd=ec.dtype:"constant"in Jc?($c=2,"number"===typeof Jc.constant?(Ie=Jc.constant,ke=Gd=he=0):(Ie=0<Jc.constant.length?Jc.constant[0]:0,ke=1<Jc.constant.length?Jc.constant[1]:0,Gd=2<Jc.constant.length?Jc.constant[2]:0,he=3<Jc.constant.length?Jc.constant[3]:0)):(ec=B(Jc.buffer)?X.createStream(34962,Jc.buffer):X.getBuffer(Jc.buffer),Vd="type"in
Jc?Yd[Jc.type]:ec.dtype,dd=!!Jc.normalized,ne=Jc.size|0,pd=Jc.offset|0,Xd=Jc.stride|0,Zc=Jc.divisor|0);Ed=Ub.location;fd=wc[Ed];if(1===$c){fd.buffer||F.enableVertexAttribArray(Ed);Ic=ne||4;if(fd.type!==Vd||fd.size!==Ic||fd.buffer!==ec||fd.normalized!==dd||fd.offset!==pd||fd.stride!==Xd)F.bindBuffer(34962,ec.buffer),F.vertexAttribPointer(Ed,Ic,Vd,dd,Xd,pd),fd.type=Vd,fd.size=Ic,fd.buffer=ec,fd.normalized=dd,fd.offset=pd,fd.stride=Xd;fd.divisor!==Zc&&(O.vertexAttribDivisorANGLE(Ed,Zc),fd.divisor=Zc)}else if(fd.buffer&&
(F.disableVertexAttribArray(Ed),fd.buffer=null),fd.x!==Ie||fd.y!==ke||fd.z!==Gd||fd.w!==he)F.vertexAttrib4f(Ed,Ie,ke,Gd,he),fd.x=Ie,fd.y=ke,fd.z=Gd,fd.w=he;qd=l.call(this,N,a,0);jd=!1;cd=null;md=0;Cd=!1;ve=zd=0;ue=1;We=0;le=5126;Zd=oe=ae=ce=0;B(qd)?(jd=!0,cd=X.createStream(34962,qd),le=cd.dtype):(cd=X.getBuffer(qd))?le=cd.dtype:"constant"in qd?(ue=2,"number"===typeof qd.constant?(ae=qd.constant,oe=Zd=ce=0):(ae=0<qd.constant.length?qd.constant[0]:0,oe=1<qd.constant.length?qd.constant[1]:0,Zd=2<qd.constant.length?
qd.constant[2]:0,ce=3<qd.constant.length?qd.constant[3]:0)):(cd=B(qd.buffer)?X.createStream(34962,qd.buffer):X.getBuffer(qd.buffer),le="type"in qd?Yd[qd.type]:cd.dtype,Cd=!!qd.normalized,ve=qd.size|0,zd=qd.offset|0,We=qd.stride|0,md=qd.divisor|0);fe=ja.location;Ac=wc[fe];if(1===ue){Ac.buffer||F.enableVertexAttribArray(fe);Xc=ve||1;if(Ac.type!==le||Ac.size!==Xc||Ac.buffer!==cd||Ac.normalized!==Cd||Ac.offset!==zd||Ac.stride!==We)F.bindBuffer(34962,cd.buffer),F.vertexAttribPointer(fe,Xc,le,Cd,We,zd),
Ac.type=le,Ac.size=Xc,Ac.buffer=cd,Ac.normalized=Cd,Ac.offset=zd,Ac.stride=We;Ac.divisor!==md&&(O.vertexAttribDivisorANGLE(fe,md),Ac.divisor=md)}else if(Ac.buffer&&(F.disableVertexAttribArray(fe),Ac.buffer=null),Ac.x!==ae||Ac.y!==oe||Ac.z!==Zd||Ac.w!==ce)F.vertexAttrib4f(fe,ae,oe,Zd,ce),Ac.x=ae,Ac.y=oe,Ac.z=Zd,Ac.w=ce;F.uniform1i(y.location,!1);F.uniform1f(bc.location,N.pixelRatio);pe=E.call(this,N,a,0);F.uniform2f(xa.location,pe[0],pe[1]);ie=a.scale;F.uniform2f(Ua.location,ie[0],ie[1]);Fd=a.scaleFract;
F.uniform2f(Y.location,Fd[0],Fd[1]);Id=a.translate;F.uniform2f(ea.location,Id[0],Id[1]);Kd=a.translateFract;F.uniform2f(oa.location,Kd[0],Kd[1]);F.uniform1f(ba.location,a.opacity);F.uniform1i(La.location,r.bind());Ld=a.elements;ge=null;(ge=(Te=B(Ld))?Gb.createStream(Ld):Gb.getElements(Ld))&&F.bindBuffer(34963,ge.buffer.buffer);we=a.offset;if(me=a.count)Ne=Ca.instances,0<Ne?ge?O.drawElementsInstancedANGLE(0,me,ge.type,we<<(ge.type-5121>>1),Ne):O.drawArraysInstancedANGLE(0,we,me,Ne):0>Ne&&(ge?F.drawElements(0,
me,ge.type,we<<(ge.type-5121>>1)):F.drawArrays(0,we,me)),ia.dirty=!0,ga.setVAO(null),N.viewportWidth=z,N.viewportHeight=D,C&&(b.cpuTime+=performance.now()-S),P&&X.destroyStream(Q),Pa&&X.destroyStream(Wa),vb&&X.destroyStream(ib),za&&X.destroyStream(gb),cc&&X.destroyStream(Da),wb&&X.destroyStream(Cb),yb&&X.destroyStream(Kb),Vc&&X.destroyStream(ec),jd&&X.destroyStream(cd),r.unbind(),Te&&Gb.destroyStream(ge)},scope:function(a,c,e){var d,g,h,l,n,q,t,r,x,y,E,u,w,G,F,I,ka,da,L,P,ca,R,W,U,Y,Z,ga,ba,ea,ja,
la,na,Ba,oa,qa,Ga,ra,Ha,xa,La,Pa,zb,Ua,$a,wc,Hb,kb,Ma,pb,vb,ib,Na,wd,Qb,qc,fb,Ub,fc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,pc,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,bc,oc,hc,Nc,tc,Lc,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,Ud,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd,Wc,Kc,$c,Yc,Qd,te,be,de,Gd,Ed,fd,Ic,qd,jd,cd,md,Cd,zd,re,se,Ze,le,ce,ae,oe,Zd,fe,Ac,Xc,pe,ie,Fd,Id,Kd,Ld,ge,Te,we,me,Ne,Oe,Je,qe,ze,Ce,De,Ee,Ae,Hd,Od,Wd,$d,Fe,Bd,Md,xe,Ge,ff,Ye,
Pe,Ke,Xe,Ue,Qe,Re,Nd,Td,Se,gf,lf,cf,hf,jf,kf,qf,nf,rf,Bf,Cf,Le,ye,of,pf,Df,Hf,Af,Ef,Ff,wf,xf,uf,yf,zf,Jf,Kf,Lf,Mf,sf,Rf,If,tf,dg,Sf,Tf,qg,df,$e,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,af,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;d=a.viewport;g=d.x|0;h=d.y|0;l="width"in d?d.width|0:N.framebufferWidth-g;n="height"in d?d.height|0:N.framebufferHeight-h;q=N.viewportWidth;N.viewportWidth=l;t=N.viewportHeight;N.viewportHeight=n;r=Pd[0];
Pd[0]=g;x=Pd[1];Pd[1]=h;y=Pd[2];Pd[2]=l;E=Pd[3];Pd[3]=n;u=pa[0];pa[0]=0;w=pa[1];pa[1]=0;G=pa[2];pa[2]=0;F=pa[3];pa[3]=1;I=fa.blend_enable;fa.blend_enable=!0;ka=M[0];M[0]=770;da=M[1];M[1]=771;L=M[2];M[2]=773;P=M[3];M[3]=1;ca=fa.depth_enable;fa.depth_enable=!1;R=a.viewport;W=R.x|0;U=R.y|0;Y="width"in R?R.width|0:N.framebufferWidth-W;Z="height"in R?R.height|0:N.framebufferHeight-U;ga=Xd[0];Xd[0]=W;ba=Xd[1];Xd[1]=U;ea=Xd[2];Xd[2]=Y;ja=Xd[3];Xd[3]=Z;la=fa.scissor_enable;fa.scissor_enable=!0;na=fa.stencil_enable;
fa.stencil_enable=!1;if(Ba=ia.profile)oa=performance.now(),b.count++;qa=a.elements;Ga=null;Ga=(ra=B(qa))?Gb.createStream(qa):Gb.getElements(qa);Ha=Ca.elements;Ca.elements=Ga;xa=a.offset;La=Ca.offset;Ca.offset=xa;Pa=a.count;zb=Ca.count;Ca.count=Pa;Ua=Ca.primitive;Ca.primitive=0;$a=aa[45];aa[45]=!1;wc=a.markerTexture;Hb=aa[48];aa[48]=wc;kb=a.opacity;Ma=aa[10];aa[10]=kb;pb=D.call(this,N,a,e);vb=aa[46];aa[46]=pb;ib=aa[47];aa[47]=K;Na=N.pixelRatio;wd=aa[34];aa[34]=Na;Qb=a.scale;qc=aa[6];aa[6]=Qb;fb=a.scaleFract;
Ub=aa[7];aa[7]=fb;fc=a.translate;ac=aa[8];aa[8]=fc;lb=a.translateFract;mb=aa[9];aa[9]=lb;ta=z.call(this,N,a,e);qb=!1;ua=null;Ta=0;bb=!1;gb=za=0;Ia=1;Bb=0;Ab=5126;Za=Ib=uc=Qa=0;B(ta)?(qb=!0,ua=X.createStream(34962,ta),Ab=ua.dtype):(ua=X.getBuffer(ta))?Ab=ua.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(uc=ta.constant,Ib=Za=Qa=0):(uc=0<ta.constant.length?ta.constant[0]:0,Ib=1<ta.constant.length?ta.constant[1]:0,Za=2<ta.constant.length?ta.constant[2]:0,Qa=3<ta.constant.length?ta.constant[3]:
0)):(ua=B(ta.buffer)?X.createStream(34962,ta.buffer):X.getBuffer(ta.buffer),Ab="type"in ta?Yd[ta.type]:ua.dtype,bb=!!ta.normalized,gb=ta.size|0,za=ta.offset|0,Bb=ta.stride|0,Ta=ta.divisor|0);Rb=C.buffer;C.buffer=ua;va=C.divisor;C.divisor=Ta;pc=C.normalized;C.normalized=bb;Ja=C.offset;C.offset=za;Lb=C.size;C.size=gb;hb=C.state;C.state=Ia;jb=C.stride;C.stride=Bb;wa=C.type;C.type=Ab;cc=C.w;C.w=Qa;Da=C.x;C.x=uc;rb=C.y;C.y=Ib;sb=C.z;C.z=Za;Xa=db.call(this,N,a,e);Ya=!1;lc=null;vc=0;rc=!1;Xb=Va=0;Gc=1;Ea=
0;zc=5126;wb=nb=Aa=Oa=0;B(Xa)?(Ya=!0,lc=X.createStream(34962,Xa),zc=lc.dtype):(lc=X.getBuffer(Xa))?zc=lc.dtype:"constant"in Xa?(Gc=2,"number"===typeof Xa.constant?(Aa=Xa.constant,nb=wb=Oa=0):(Aa=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,wb=2<Xa.constant.length?Xa.constant[2]:0,Oa=3<Xa.constant.length?Xa.constant[3]:0)):(lc=B(Xa.buffer)?X.createStream(34962,Xa.buffer):X.getBuffer(Xa.buffer),zc="type"in Xa?Yd[Xa.type]:lc.dtype,rc=!!Xa.normalized,Xb=Xa.size|0,Va=
Xa.offset|0,Ea=Xa.stride|0,vc=Xa.divisor|0);Cb=J.buffer;J.buffer=lc;tb=J.divisor;J.divisor=vc;sc=J.normalized;J.normalized=rc;xb=J.offset;J.offset=Va;bc=J.size;J.size=Xb;oc=J.state;J.state=Gc;hc=J.stride;J.stride=Ea;Nc=J.type;J.type=zc;tc=J.w;J.w=Oa;Lc=J.x;J.x=Aa;Tb=J.y;J.y=nb;$b=J.z;J.z=wb;Mb=ma.call(this,N,a,e);Fa=!1;Yb=null;ob=0;yb=!1;Nb=Kb=0;dc=1;gc=0;Ud=5126;Oc=Hc=Fc=Ec=0;B(Mb)?(Fa=!0,Yb=X.createStream(34962,Mb),Ud=Yb.dtype):(Yb=X.getBuffer(Mb))?Ud=Yb.dtype:"constant"in Mb?(dc=2,"number"===typeof Mb.constant?
(Fc=Mb.constant,Hc=Oc=Ec=0):(Fc=0<Mb.constant.length?Mb.constant[0]:0,Hc=1<Mb.constant.length?Mb.constant[1]:0,Oc=2<Mb.constant.length?Mb.constant[2]:0,Ec=3<Mb.constant.length?Mb.constant[3]:0)):(Yb=B(Mb.buffer)?X.createStream(34962,Mb.buffer):X.getBuffer(Mb.buffer),Ud="type"in Mb?Yd[Mb.type]:Yb.dtype,yb=!!Mb.normalized,Nb=Mb.size|0,Kb=Mb.offset|0,gc=Mb.stride|0,ob=Mb.divisor|0);bd=p.buffer;p.buffer=Yb;Uc=p.divisor;p.divisor=ob;Pc=p.normalized;p.normalized=yb;Jb=p.offset;p.offset=Kb;Fb=p.size;p.size=
Nb;Qc=p.state;p.state=dc;Jc=p.stride;p.stride=gc;Vc=p.type;p.type=Ud;ec=p.w;p.w=Ec;Zc=p.x;p.x=Fc;dd=p.y;p.y=Hc;Wc=p.z;p.z=Oc;Kc=v.call(this,N,a,e);$c=!1;Yc=null;Qd=0;te=!1;de=be=0;Gd=1;Ed=0;fd=5126;cd=jd=qd=Ic=0;B(Kc)?($c=!0,Yc=X.createStream(34962,Kc),fd=Yc.dtype):(Yc=X.getBuffer(Kc))?fd=Yc.dtype:"constant"in Kc?(Gd=2,"number"===typeof Kc.constant?(qd=Kc.constant,jd=cd=Ic=0):(qd=0<Kc.constant.length?Kc.constant[0]:0,jd=1<Kc.constant.length?Kc.constant[1]:0,cd=2<Kc.constant.length?Kc.constant[2]:
0,Ic=3<Kc.constant.length?Kc.constant[3]:0)):(Yc=B(Kc.buffer)?X.createStream(34962,Kc.buffer):X.getBuffer(Kc.buffer),fd="type"in Kc?Yd[Kc.type]:Yc.dtype,te=!!Kc.normalized,de=Kc.size|0,be=Kc.offset|0,Ed=Kc.stride|0,Qd=Kc.divisor|0);md=k.buffer;k.buffer=Yc;Cd=k.divisor;k.divisor=Qd;zd=k.normalized;k.normalized=te;re=k.offset;k.offset=be;se=k.size;k.size=de;Ze=k.state;k.state=Gd;le=k.stride;k.stride=Ed;ce=k.type;k.type=fd;ae=k.w;k.w=Ic;oe=k.x;k.x=qd;Zd=k.y;k.y=jd;fe=k.z;k.z=cd;Ac=S.call(this,N,a,e);
Xc=!1;pe=null;ie=0;Fd=!1;Kd=Id=0;Ld=1;ge=0;Te=5126;Oe=Ne=me=we=0;B(Ac)?(Xc=!0,pe=X.createStream(34962,Ac),Te=pe.dtype):(pe=X.getBuffer(Ac))?Te=pe.dtype:"constant"in Ac?(Ld=2,"number"===typeof Ac.constant?(me=Ac.constant,Ne=Oe=we=0):(me=0<Ac.constant.length?Ac.constant[0]:0,Ne=1<Ac.constant.length?Ac.constant[1]:0,Oe=2<Ac.constant.length?Ac.constant[2]:0,we=3<Ac.constant.length?Ac.constant[3]:0)):(pe=B(Ac.buffer)?X.createStream(34962,Ac.buffer):X.getBuffer(Ac.buffer),Te="type"in Ac?Yd[Ac.type]:pe.dtype,
Fd=!!Ac.normalized,Kd=Ac.size|0,Id=Ac.offset|0,ge=Ac.stride|0,ie=Ac.divisor|0);Je=Q.buffer;Q.buffer=pe;qe=Q.divisor;Q.divisor=ie;ze=Q.normalized;Q.normalized=Fd;Ce=Q.offset;Q.offset=Id;De=Q.size;Q.size=Kd;Ee=Q.state;Q.state=Ld;Ae=Q.stride;Q.stride=ge;Hd=Q.type;Q.type=Te;Od=Q.w;Q.w=we;Wd=Q.x;Q.x=me;$d=Q.y;Q.y=Ne;Fe=Q.z;Q.z=Oe;Bd=V.call(this,N,a,e);Md=!1;xe=null;Ge=0;ff=!1;Pe=Ye=0;Ke=1;Xe=0;Ue=5126;Td=Nd=Re=Qe=0;B(Bd)?(Md=!0,xe=X.createStream(34962,Bd),Ue=xe.dtype):(xe=X.getBuffer(Bd))?Ue=xe.dtype:
"constant"in Bd?(Ke=2,"number"===typeof Bd.constant?(Re=Bd.constant,Nd=Td=Qe=0):(Re=0<Bd.constant.length?Bd.constant[0]:0,Nd=1<Bd.constant.length?Bd.constant[1]:0,Td=2<Bd.constant.length?Bd.constant[2]:0,Qe=3<Bd.constant.length?Bd.constant[3]:0)):(xe=B(Bd.buffer)?X.createStream(34962,Bd.buffer):X.getBuffer(Bd.buffer),Ue="type"in Bd?Yd[Bd.type]:xe.dtype,ff=!!Bd.normalized,Pe=Bd.size|0,Ye=Bd.offset|0,Xe=Bd.stride|0,Ge=Bd.divisor|0);Se=A.buffer;A.buffer=xe;gf=A.divisor;A.divisor=Ge;lf=A.normalized;A.normalized=
ff;cf=A.offset;A.offset=Ye;hf=A.size;A.size=Pe;jf=A.state;A.state=Ke;kf=A.stride;A.stride=Xe;qf=A.type;A.type=Ue;nf=A.w;A.w=Qe;rf=A.x;A.x=Re;Bf=A.y;A.y=Nd;Cf=A.z;A.z=Td;Le=cb.call(this,N,a,e);ye=!1;of=null;pf=0;Df=!1;Af=Hf=0;Ef=1;Ff=0;wf=5126;zf=yf=uf=xf=0;B(Le)?(ye=!0,of=X.createStream(34962,Le),wf=of.dtype):(of=X.getBuffer(Le))?wf=of.dtype:"constant"in Le?(Ef=2,"number"===typeof Le.constant?(uf=Le.constant,yf=zf=xf=0):(uf=0<Le.constant.length?Le.constant[0]:0,yf=1<Le.constant.length?Le.constant[1]:
0,zf=2<Le.constant.length?Le.constant[2]:0,xf=3<Le.constant.length?Le.constant[3]:0)):(of=B(Le.buffer)?X.createStream(34962,Le.buffer):X.getBuffer(Le.buffer),wf="type"in Le?Yd[Le.type]:of.dtype,Df=!!Le.normalized,Af=Le.size|0,Hf=Le.offset|0,Ff=Le.stride|0,pf=Le.divisor|0);Jf=H.buffer;H.buffer=of;Kf=H.divisor;H.divisor=pf;Lf=H.normalized;H.normalized=Df;Mf=H.offset;H.offset=Hf;sf=H.size;H.size=Af;Rf=H.state;H.state=Ef;If=H.stride;H.stride=Ff;tf=H.type;H.type=wf;dg=H.w;H.w=xf;Sf=H.x;H.x=uf;Tf=H.y;H.y=
yf;qg=H.z;H.z=zf;df=O.call(this,N,a,e);$e=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;B(df)?($e=!0,Nf=X.createStream(34962,df),Wf=Nf.dtype):(Nf=X.getBuffer(df))?Wf=Nf.dtype:"constant"in df?(hg=2,"number"===typeof df.constant?(Xf=df.constant,Yf=Zf=Uf=0):(Xf=0<df.constant.length?df.constant[0]:0,Yf=1<df.constant.length?df.constant[1]:0,Zf=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Nf=B(df.buffer)?X.createStream(34962,df.buffer):X.getBuffer(df.buffer),
Wf="type"in df?Yd[df.type]:Nf.dtype,eg=!!df.normalized,gg=df.size|0,fg=df.offset|0,ig=df.stride|0,Of=df.divisor|0);jg=f.buffer;f.buffer=Nf;rg=f.divisor;f.divisor=Of;sg=f.normalized;f.normalized=eg;tg=f.offset;f.offset=fg;ug=f.size;f.size=gg;vg=f.state;f.state=hg;wg=f.stride;f.stride=ig;xg=f.type;f.type=Wf;yg=f.w;f.w=Uf;zg=f.x;f.x=Xf;Ag=f.y;f.y=Yf;Bg=f.z;f.z=Zf;ef=m.call(this,N,a,e);af=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;B(ef)?(af=!0,Pf=X.createStream(34962,ef),$f=Pf.dtype):
(Pf=X.getBuffer(ef))?$f=Pf.dtype:"constant"in ef?(ng=2,"number"===typeof ef.constant?(ag=ef.constant,bg=cg=Vf=0):(ag=0<ef.constant.length?ef.constant[0]:0,bg=1<ef.constant.length?ef.constant[1]:0,cg=2<ef.constant.length?ef.constant[2]:0,Vf=3<ef.constant.length?ef.constant[3]:0)):(Pf=B(ef.buffer)?X.createStream(34962,ef.buffer):X.getBuffer(ef.buffer),$f="type"in ef?Yd[ef.type]:Pf.dtype,kg=!!ef.normalized,mg=ef.size|0,lg=ef.offset|0,og=ef.stride|0,Qf=ef.divisor|0);pg=T.buffer;T.buffer=Pf;Cg=T.divisor;
T.divisor=Qf;Dg=T.normalized;T.normalized=kg;Eg=T.offset;T.offset=lg;Fg=T.size;T.size=mg;Gg=T.state;T.state=ng;Hg=T.stride;T.stride=og;Ig=T.type;T.type=$f;Jg=T.w;T.w=Vf;Kg=T.x;T.x=ag;Lg=T.y;T.y=bg;Mg=T.z;T.z=cg;Ng=sa.vert;sa.vert=59;Og=sa.frag;sa.frag=58;ia.dirty=!0;c(N,a,e);N.viewportWidth=q;N.viewportHeight=t;Pd[0]=r;Pd[1]=x;Pd[2]=y;Pd[3]=E;pa[0]=u;pa[1]=w;pa[2]=G;pa[3]=F;fa.blend_enable=I;M[0]=ka;M[1]=da;M[2]=L;M[3]=P;fa.depth_enable=ca;Xd[0]=ga;Xd[1]=ba;Xd[2]=ea;Xd[3]=ja;fa.scissor_enable=la;
fa.stencil_enable=na;Ba&&(b.cpuTime+=performance.now()-oa);ra&&Gb.destroyStream(Ga);Ca.elements=Ha;Ca.offset=La;Ca.count=zb;Ca.primitive=Ua;aa[45]=$a;aa[48]=Hb;aa[10]=Ma;aa[46]=vb;aa[47]=ib;aa[34]=wd;aa[6]=qc;aa[7]=Ub;aa[8]=ac;aa[9]=mb;qb&&X.destroyStream(ua);C.buffer=Rb;C.divisor=va;C.normalized=pc;C.offset=Ja;C.size=Lb;C.state=hb;C.stride=jb;C.type=wa;C.w=cc;C.x=Da;C.y=rb;C.z=sb;Ya&&X.destroyStream(lc);J.buffer=Cb;J.divisor=tb;J.normalized=sc;J.offset=xb;J.size=bc;J.state=oc;J.stride=hc;J.type=
Nc;J.w=tc;J.x=Lc;J.y=Tb;J.z=$b;Fa&&X.destroyStream(Yb);p.buffer=bd;p.divisor=Uc;p.normalized=Pc;p.offset=Jb;p.size=Fb;p.state=Qc;p.stride=Jc;p.type=Vc;p.w=ec;p.x=Zc;p.y=dd;p.z=Wc;$c&&X.destroyStream(Yc);k.buffer=md;k.divisor=Cd;k.normalized=zd;k.offset=re;k.size=se;k.state=Ze;k.stride=le;k.type=ce;k.w=ae;k.x=oe;k.y=Zd;k.z=fe;Xc&&X.destroyStream(pe);Q.buffer=Je;Q.divisor=qe;Q.normalized=ze;Q.offset=Ce;Q.size=De;Q.state=Ee;Q.stride=Ae;Q.type=Hd;Q.w=Od;Q.x=Wd;Q.y=$d;Q.z=Fe;Md&&X.destroyStream(xe);A.buffer=
Se;A.divisor=gf;A.normalized=lf;A.offset=cf;A.size=hf;A.state=jf;A.stride=kf;A.type=qf;A.w=nf;A.x=rf;A.y=Bf;A.z=Cf;ye&&X.destroyStream(of);H.buffer=Jf;H.divisor=Kf;H.normalized=Lf;H.offset=Mf;H.size=sf;H.state=Rf;H.stride=If;H.type=tf;H.w=dg;H.x=Sf;H.y=Tf;H.z=qg;$e&&X.destroyStream(Nf);f.buffer=jg;f.divisor=rg;f.normalized=sg;f.offset=tg;f.size=ug;f.state=vg;f.stride=wg;f.type=xg;f.w=yg;f.x=zg;f.y=Ag;f.z=Bg;af&&X.destroyStream(Pf);T.buffer=pg;T.divisor=Cg;T.normalized=Dg;T.offset=Eg;T.size=Fg;T.state=
Gg;T.stride=Hg;T.type=Ig;T.w=Jg;T.x=Kg;T.y=Lg;T.z=Mg;sa.vert=Ng;sa.frag=Og;ia.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,b,g,h,d,c,n,e,q,u,w,l,E,r,D,K,z,C,db,J,ma,p,v,k,S,Q,V,A,cb,H,O,f,m,T,ra,na,Yc,pc,la,Pa){var Z,L,I,U,qa,P,Ub,$a,R,y,ja,ba,xa,La,bc,Ua,Y,kb,ea,oa,fc,hc,tc,wd,wc,X,N,ia,Ca,Gb,Lc,Wc,F,B,fa,sa,aa,ga,pa,G,x;Z=a.attributes;L=a.buffer;I=a.context;U=a.current;qa=a.draw;
P=a.elements;Ub=a.extensions;$a=a.framebuffer;R=a.gl;y=a.isBufferArgs;ja=a.next;ba=a.shader;xa=a.uniforms;La=a.vao;bc=ja.blend_color;Ua=U.blend_color;Y=ja.blend_equation;kb=U.blend_equation;ea=ja.blend_func;oa=U.blend_func;fc=ja.colorMask;hc=U.colorMask;tc=ja.depth_range;wd=U.depth_range;wc=ja.polygonOffset_offset;X=U.polygonOffset_offset;N=ja.sample_coverage;ia=U.sample_coverage;Ca=ja.scissor_box;Gb=U.scissor_box;Lc=ja.stencil_func;Wc=U.stencil_func;F=ja.stencil_opBack;B=U.stencil_opBack;fa=ja.stencil_opFront;
sa=U.stencil_opFront;aa=ja.viewport;ga=U.viewport;pa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};G={offset:4,stride:8};x={offset:0,stride:8};return{batch:function(a,c){var e,d,g,h,l,n,q,r,z,D,E,u,w;e=$a.next;e!==$a.cur&&(e?R.bindFramebuffer(36160,e.framebuffer):R.bindFramebuffer(36160,null),$a.cur=e);if(U.dirty){var K,ka,da,aa,ba,ea,xa,bc,Me,mf,bf,Ad,Be,Rd,Sd,je,He,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb;K=ja.dither;K!==
U.dither&&(K?R.enable(3024):R.disable(3024),U.dither=K);ka=Y[0];da=Y[1];if(ka!==kb[0]||da!==kb[1])R.blendEquationSeparate(ka,da),kb[0]=ka,kb[1]=da;aa=ja.depth_func;aa!==U.depth_func&&(R.depthFunc(aa),U.depth_func=aa);ba=tc[0];ea=tc[1];if(ba!==wd[0]||ea!==wd[1])R.depthRange(ba,ea),wd[0]=ba,wd[1]=ea;xa=ja.depth_mask;xa!==U.depth_mask&&(R.depthMask(xa),U.depth_mask=xa);bc=fc[0];Me=fc[1];mf=fc[2];bf=fc[3];if(bc!==hc[0]||Me!==hc[1]||mf!==hc[2]||bf!==hc[3])R.colorMask(bc,Me,mf,bf),hc[0]=bc,hc[1]=Me,hc[2]=
mf,hc[3]=bf;Ad=ja.cull_enable;Ad!==U.cull_enable&&(Ad?R.enable(2884):R.disable(2884),U.cull_enable=Ad);Be=ja.cull_face;Be!==U.cull_face&&(R.cullFace(Be),U.cull_face=Be);Rd=ja.frontFace;Rd!==U.frontFace&&(R.frontFace(Rd),U.frontFace=Rd);Sd=ja.lineWidth;Sd!==U.lineWidth&&(R.lineWidth(Sd),U.lineWidth=Sd);je=ja.polygonOffset_enable;je!==U.polygonOffset_enable&&(je?R.enable(32823):R.disable(32823),U.polygonOffset_enable=je);He=wc[0];td=wc[1];if(He!==X[0]||td!==X[1])R.polygonOffset(He,td),X[0]=He,X[1]=
td;nd=ja.sample_alpha;nd!==U.sample_alpha&&(nd?R.enable(32926):R.disable(32926),U.sample_alpha=nd);yd=ja.sample_enable;yd!==U.sample_enable&&(yd?R.enable(32928):R.disable(32928),U.sample_enable=yd);rd=N[0];ed=N[1];if(rd!==ia[0]||ed!==ia[1])R.sampleCoverage(rd,ed),ia[0]=rd,ia[1]=ed;Bc=ja.stencil_mask;Bc!==U.stencil_mask&&(R.stencilMask(Bc),U.stencil_mask=Bc);ud=Lc[0];gd=Lc[1];Mc=Lc[2];if(ud!==Wc[0]||gd!==Wc[1]||Mc!==Wc[2])R.stencilFunc(ud,gd,Mc),Wc[0]=ud,Wc[1]=gd,Wc[2]=Mc;nc=fa[0];ab=fa[1];Cc=fa[2];
Db=fa[3];if(nc!==sa[0]||ab!==sa[1]||Cc!==sa[2]||Db!==sa[3])R.stencilOpSeparate(nc,ab,Cc,Db),sa[0]=nc,sa[1]=ab,sa[2]=Cc,sa[3]=Db;mc=F[0];Sa=F[1];ic=F[2];Zb=F[3];if(mc!==B[0]||Sa!==B[1]||ic!==B[2]||Zb!==B[3])R.stencilOpSeparate(mc,Sa,ic,Zb),B[0]=mc,B[1]=Sa,B[2]=ic,B[3]=Zb;ad=ja.scissor_enable;ad!==U.scissor_enable&&(ad?R.enable(3089):R.disable(3089),U.scissor_enable=ad);Dd=Ca[0];od=Ca[1];Dc=Ca[2];Vb=Ca[3];if(Dd!==Gb[0]||od!==Gb[1]||Dc!==Gb[2]||Vb!==Gb[3])R.scissor(Dd,od,Dc,Vb),Gb[0]=Dd,Gb[1]=od,Gb[2]=
Dc,Gb[3]=Vb}d=this.viewport;g=d.x|0;h=d.y|0;l="width"in d?d.width|0:I.framebufferWidth-g;n="height"in d?d.height|0:I.framebufferHeight-h;q=I.viewportWidth;I.viewportWidth=l;r=I.viewportHeight;I.viewportHeight=n;R.viewport(g,h,l,n);ga[0]=g;ga[1]=h;ga[2]=l;ga[3]=n;R.blendColor(0,0,0,1);Ua[0]=0;Ua[1]=0;Ua[2]=0;Ua[3]=1;R.enable(3042);U.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;R.disable(2929);U.depth_enable=!1;R.disable(2960);U.stencil_enable=!1;if(z=U.profile)D=
performance.now(),b.count+=c;R.useProgram(C.program);E=Ub.angle_instanced_arrays;var xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,Ve,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb;La.setVAO(null);x.buffer=this.sizeBuffer;xc=!1;Sc=null;Ka=0;Eb=!1;ya=Wa=0;xd=1;ub=0;Ra=5126;Wb=Tc=eb=Sb=0;y(x)?(xc=!0,Sc=L.createStream(34962,x),Ra=Sc.dtype):(Sc=L.getBuffer(x))?Ra=Sc.dtype:"constant"in x?
(xd=2,"number"===typeof x.constant?(eb=x.constant,Tc=Wb=Sb=0):(eb=0<x.constant.length?x.constant[0]:0,Tc=1<x.constant.length?x.constant[1]:0,Wb=2<x.constant.length?x.constant[2]:0,Sb=3<x.constant.length?x.constant[3]:0)):(Sc=y(x.buffer)?L.createStream(34962,x.buffer):L.getBuffer(x.buffer),Ra="type"in x?pa[x.type]:Sc.dtype,Eb=!!x.normalized,ya=x.size|0,Wa=x.offset|0,ub=x.stride|0,Ka=x.divisor|0);Ve=Pa.location;jc=Z[Ve];if(1===xd){jc.buffer||R.enableVertexAttribArray(Ve);Ob=ya||1;if(jc.type!==Ra||jc.size!==
Ob||jc.buffer!==Sc||jc.normalized!==Eb||jc.offset!==Wa||jc.stride!==ub)R.bindBuffer(34962,Sc.buffer),R.vertexAttribPointer(Ve,Ob,Ra,Eb,ub,Wa),jc.type=Ra,jc.size=Ob,jc.buffer=Sc,jc.normalized=Eb,jc.offset=Wa,jc.stride=ub;jc.divisor!==Ka&&(E.vertexAttribDivisorANGLE(Ve,Ka),jc.divisor=Ka)}else if(jc.buffer&&(R.disableVertexAttribArray(Ve),jc.buffer=null),jc.x!==eb||jc.y!==Tc||jc.z!==Wb||jc.w!==Sb)R.vertexAttrib4f(Ve,eb,Tc,Wb,Sb),jc.x=eb,jc.y=Tc,jc.z=Wb,jc.w=Sb;G.buffer=this.sizeBuffer;vd=!1;Pb=null;
Ma=0;pb=!1;ib=vb=0;Na=1;yc=0;Qb=5126;Rc=kc=fb=sd=0;y(G)?(vd=!0,Pb=L.createStream(34962,G),Qb=Pb.dtype):(Pb=L.getBuffer(G))?Qb=Pb.dtype:"constant"in G?(Na=2,"number"===typeof G.constant?(fb=G.constant,kc=Rc=sd=0):(fb=0<G.constant.length?G.constant[0]:0,kc=1<G.constant.length?G.constant[1]:0,Rc=2<G.constant.length?G.constant[2]:0,sd=3<G.constant.length?G.constant[3]:0)):(Pb=y(G.buffer)?L.createStream(34962,G.buffer):L.getBuffer(G.buffer),Qb="type"in G?pa[G.type]:Pb.dtype,pb=!!G.normalized,ib=G.size|
0,vb=G.offset|0,yc=G.stride|0,Ma=G.divisor|0);ac=H.location;lb=Z[ac];if(1===Na){lb.buffer||R.enableVertexAttribArray(ac);mb=ib||1;if(lb.type!==Qb||lb.size!==mb||lb.buffer!==Pb||lb.normalized!==pb||lb.offset!==vb||lb.stride!==yc)R.bindBuffer(34962,Pb.buffer),R.vertexAttribPointer(ac,mb,Qb,pb,yc,vb),lb.type=Qb,lb.size=mb,lb.buffer=Pb,lb.normalized=pb,lb.offset=vb,lb.stride=yc;lb.divisor!==Ma&&(E.vertexAttribDivisorANGLE(ac,Ma),lb.divisor=Ma)}else if(lb.buffer&&(R.disableVertexAttribArray(ac),lb.buffer=
null),lb.x!==fb||lb.y!==kc||lb.z!==Rc||lb.w!==sd)R.vertexAttrib4f(ac,fb,kc,Rc,sd),lb.x=fb,lb.y=kc,lb.z=Rc,lb.w=sd;ta=this.charBuffer;qb=!1;ua=null;Ta=0;bb=!1;gb=za=0;Ia=1;Bb=0;Ab=5126;Za=Ib=uc=Qa=0;y(ta)?(qb=!0,ua=L.createStream(34962,ta),Ab=ua.dtype):(ua=L.getBuffer(ta))?Ab=ua.dtype:"constant"in ta?(Ia=2,"number"===typeof ta.constant?(uc=ta.constant,Ib=Za=Qa=0):(uc=0<ta.constant.length?ta.constant[0]:0,Ib=1<ta.constant.length?ta.constant[1]:0,Za=2<ta.constant.length?ta.constant[2]:0,Qa=3<ta.constant.length?
ta.constant[3]:0)):(ua=y(ta.buffer)?L.createStream(34962,ta.buffer):L.getBuffer(ta.buffer),Ab="type"in ta?pa[ta.type]:ua.dtype,bb=!!ta.normalized,gb=ta.size|0,za=ta.offset|0,Bb=ta.stride|0,Ta=ta.divisor|0);Rb=cb.location;va=Z[Rb];if(1===Ia){va.buffer||R.enableVertexAttribArray(Rb);kd=gb||1;if(va.type!==Ab||va.size!==kd||va.buffer!==ua||va.normalized!==bb||va.offset!==za||va.stride!==Bb)R.bindBuffer(34962,ua.buffer),R.vertexAttribPointer(Rb,kd,Ab,bb,Bb,za),va.type=Ab,va.size=kd,va.buffer=ua,va.normalized=
bb,va.offset=za,va.stride=Bb;va.divisor!==Ta&&(E.vertexAttribDivisorANGLE(Rb,Ta),va.divisor=Ta)}else if(va.buffer&&(R.disableVertexAttribArray(Rb),va.buffer=null),va.x!==uc||va.y!==Ib||va.z!==Za||va.w!==Qa)R.vertexAttrib4f(Rb,uc,Ib,Za,Qa),va.x=uc,va.y=Ib,va.z=Za,va.w=Qa;Ja=this.position;Lb=!1;hb=null;jb=0;wa=!1;Da=cc=0;rb=1;sb=0;Xa=5126;rc=vc=lc=Ya=0;y(Ja)?(Lb=!0,hb=L.createStream(34962,Ja),Xa=hb.dtype):(hb=L.getBuffer(Ja))?Xa=hb.dtype:"constant"in Ja?(rb=2,"number"===typeof Ja.constant?(lc=Ja.constant,
vc=rc=Ya=0):(lc=0<Ja.constant.length?Ja.constant[0]:0,vc=1<Ja.constant.length?Ja.constant[1]:0,rc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(hb=y(Ja.buffer)?L.createStream(34962,Ja.buffer):L.getBuffer(Ja.buffer),Xa="type"in Ja?pa[Ja.type]:hb.dtype,wa=!!Ja.normalized,Da=Ja.size|0,cc=Ja.offset|0,sb=Ja.stride|0,jb=Ja.divisor|0);Va=ra.location;Xb=Z[Va];if(1===rb){Xb.buffer||R.enableVertexAttribArray(Va);Gc=Da||2;if(Xb.type!==Xa||Xb.size!==Gc||Xb.buffer!==hb||Xb.normalized!==
wa||Xb.offset!==cc||Xb.stride!==sb)R.bindBuffer(34962,hb.buffer),R.vertexAttribPointer(Va,Gc,Xa,wa,sb,cc),Xb.type=Xa,Xb.size=Gc,Xb.buffer=hb,Xb.normalized=wa,Xb.offset=cc,Xb.stride=sb;Xb.divisor!==jb&&(E.vertexAttribDivisorANGLE(Va,jb),Xb.divisor=jb)}else if(Xb.buffer&&(R.disableVertexAttribArray(Va),Xb.buffer=null),Xb.x!==lc||Xb.y!==vc||Xb.z!==rc||Xb.w!==Ya)R.vertexAttrib4f(Va,lc,vc,rc,Ya),Xb.x=lc,Xb.y=vc,Xb.z=rc,Xb.w=Ya;Ea=this.viewportArray;R.uniform4f(la.location,Ea[0],Ea[1],Ea[2],Ea[3]);zc=this.scale;
R.uniform2f(Yc.location,zc[0],zc[1]);Oa=this.translate;R.uniform2f(pc.location,Oa[0],Oa[1]);(Aa=qa.elements)?R.bindBuffer(34963,Aa.buffer.buffer):La.currentVAO&&(Aa=P.getElements(La.currentVAO.elements))&&R.bindBuffer(34963,Aa.buffer.buffer);nb=qa.instances;for(u=0;u<c;++u){w=a[u];var wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,vf,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc,dd;wb=db.call(this,I,w,u);u&&Cb===wb||(Cb=wb,R.uniform1f(O.location,wb));tb=J.call(this,I,w,u);u&&sc===tb||
(sc=tb,R.uniform1f(m.location,tb));xb=w.align;u&&ld===xb||(ld=xb,R.uniform1f(k.location,xb));oc=w.baseline;u&&ee===oc||(ee=oc,R.uniform1f(A.location,oc));Nc=w.color;hd=Nc[0];Tb=Nc[1];Mb=Nc[2];Yb=Nc[3];u&&id===hd&&$b===Tb&&Fa===Mb&&ob===Yb||(id=hd,$b=Tb,Fa=Mb,ob=Yb,R.uniform4f(f.location,hd,Tb,Mb,Yb));yb=ma.call(this,I,w,u);Kb=yb[0];dc=yb[1];u&&Nb===Kb&&gc===dc||(Nb=Kb,gc=dc,R.uniform2f(V.location,Kb,dc));vf=p.call(this,I,w,u);Ec=vf[0];Hc=vf[1];u&&Fc===Ec&&Oc===Hc||(Fc=Ec,Oc=Hc,R.uniform2f(Q.location,
Ec,Hc));bd=w.positionOffset;Uc=bd[0];Jb=bd[1];u&&Pc===Uc&&Fb===Jb||(Pc=Uc,Fb=Jb,R.uniform2f(na.location,Uc,Jb));Qc=w.opacity;u&&Jc===Qc||(Jc=Qc,R.uniform1f(T.location,Qc));(Vc=v.call(this,I,w,u))&&"framebuffer"===Vc._reglType&&(Vc=Vc.color[0]);ec=Vc._texture;R.uniform1i(S.location,ec.bind());Zc=w.offset;if(dd=w.count)0<nb?Aa?E.drawElementsInstancedANGLE(0,dd,Aa.type,Zc<<(Aa.type-5121>>1),nb):E.drawArraysInstancedANGLE(0,Zc,dd,nb):0>nb&&(Aa?R.drawElements(0,dd,Aa.type,Zc<<(Aa.type-5121>>1)):R.drawArrays(0,
Zc,dd)),ec.unbind()}xc&&L.destroyStream(Sc);vd&&L.destroyStream(Pb);qb&&L.destroyStream(ua);Lb&&L.destroyStream(hb);U.dirty=!0;La.setVAO(null);I.viewportWidth=q;I.viewportHeight=r;z&&(b.cpuTime+=performance.now()-D)},draw:function(a){var l,p,q,t,r,v,z,u,E,D,w,K,ka,da,J,C,aa,ma,ha,ba,ea,xa,db,bc,bf,Ad,Be,Rd,Sd,je,He,td,nd,yd,rd,ed,Bc,ud,gd,Mc,nc,ab,Cc,Db,mc,Sa,ic,Zb,ad,Dd,od,Dc,Vb,xc,Sc,Ka,Eb,Wa,ya,xd,ub,Ra,Sb,eb,Tc,Wb,Ve,jc,Ob,vd,Pb,Ma,pb,vb,ib,Na,yc,Qb,sd,fb,kc,Rc,ac,lb,mb,ta,qb,ua,Ta,bb,za,gb;l=
$a.next;l!==$a.cur&&(l?R.bindFramebuffer(36160,l.framebuffer):R.bindFramebuffer(36160,null),$a.cur=l);if(U.dirty){var Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc;Ia=ja.dither;Ia!==U.dither&&(Ia?R.enable(3024):R.disable(3024),U.dither=Ia);Bb=Y[0];Ab=Y[1];if(Bb!==kb[0]||Ab!==kb[1])R.blendEquationSeparate(Bb,Ab),kb[0]=Bb,kb[1]=Ab;Qa=ja.depth_func;Qa!==U.depth_func&&(R.depthFunc(Qa),U.depth_func=Qa);uc=tc[0];Ib=tc[1];if(uc!==wd[0]||
Ib!==wd[1])R.depthRange(uc,Ib),wd[0]=uc,wd[1]=Ib;Za=ja.depth_mask;Za!==U.depth_mask&&(R.depthMask(Za),U.depth_mask=Za);Rb=fc[0];va=fc[1];kd=fc[2];Ja=fc[3];if(Rb!==hc[0]||va!==hc[1]||kd!==hc[2]||Ja!==hc[3])R.colorMask(Rb,va,kd,Ja),hc[0]=Rb,hc[1]=va,hc[2]=kd,hc[3]=Ja;Lb=ja.cull_enable;Lb!==U.cull_enable&&(Lb?R.enable(2884):R.disable(2884),U.cull_enable=Lb);hb=ja.cull_face;hb!==U.cull_face&&(R.cullFace(hb),U.cull_face=hb);jb=ja.frontFace;jb!==U.frontFace&&(R.frontFace(jb),U.frontFace=jb);wa=ja.lineWidth;
wa!==U.lineWidth&&(R.lineWidth(wa),U.lineWidth=wa);cc=ja.polygonOffset_enable;cc!==U.polygonOffset_enable&&(cc?R.enable(32823):R.disable(32823),U.polygonOffset_enable=cc);Da=wc[0];rb=wc[1];if(Da!==X[0]||rb!==X[1])R.polygonOffset(Da,rb),X[0]=Da,X[1]=rb;sb=ja.sample_alpha;sb!==U.sample_alpha&&(sb?R.enable(32926):R.disable(32926),U.sample_alpha=sb);Xa=ja.sample_enable;Xa!==U.sample_enable&&(Xa?R.enable(32928):R.disable(32928),U.sample_enable=Xa);Ya=N[0];lc=N[1];if(Ya!==ia[0]||lc!==ia[1])R.sampleCoverage(Ya,
lc),ia[0]=Ya,ia[1]=lc;vc=ja.stencil_mask;vc!==U.stencil_mask&&(R.stencilMask(vc),U.stencil_mask=vc);rc=Lc[0];Va=Lc[1];Xb=Lc[2];if(rc!==Wc[0]||Va!==Wc[1]||Xb!==Wc[2])R.stencilFunc(rc,Va,Xb),Wc[0]=rc,Wc[1]=Va,Wc[2]=Xb;Gc=fa[0];Ea=fa[1];zc=fa[2];Oa=fa[3];if(Gc!==sa[0]||Ea!==sa[1]||zc!==sa[2]||Oa!==sa[3])R.stencilOpSeparate(Gc,Ea,zc,Oa),sa[0]=Gc,sa[1]=Ea,sa[2]=zc,sa[3]=Oa;Aa=F[0];nb=F[1];wb=F[2];Cb=F[3];if(Aa!==B[0]||nb!==B[1]||wb!==B[2]||Cb!==B[3])R.stencilOpSeparate(Aa,nb,wb,Cb),B[0]=Aa,B[1]=nb,B[2]=
wb,B[3]=Cb;tb=ja.scissor_enable;tb!==U.scissor_enable&&(tb?R.enable(3089):R.disable(3089),U.scissor_enable=tb);sc=Ca[0];xb=Ca[1];ld=Ca[2];oc=Ca[3];if(sc!==Gb[0]||xb!==Gb[1]||ld!==Gb[2]||oc!==Gb[3])R.scissor(sc,xb,ld,oc),Gb[0]=sc,Gb[1]=xb,Gb[2]=ld,Gb[3]=oc}p=this.viewport;q=p.x|0;t=p.y|0;r="width"in p?p.width|0:I.framebufferWidth-q;v="height"in p?p.height|0:I.framebufferHeight-t;z=I.viewportWidth;I.viewportWidth=r;u=I.viewportHeight;I.viewportHeight=v;R.viewport(q,t,r,v);ga[0]=q;ga[1]=t;ga[2]=r;ga[3]=
v;R.blendColor(0,0,0,1);Ua[0]=0;Ua[1]=0;Ua[2]=0;Ua[3]=1;R.enable(3042);U.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;R.disable(2929);U.depth_enable=!1;R.disable(2960);U.stencil_enable=!1;if(E=U.profile)D=performance.now(),b.count++;R.useProgram(g.program);w=Ub.angle_instanced_arrays;La.setVAO(null);x.buffer=this.sizeBuffer;K=!1;ka=null;da=0;J=!1;aa=C=0;ma=1;ha=0;ba=5126;bc=db=xa=ea=0;y(x)?(K=!0,ka=L.createStream(34962,x),ba=ka.dtype):(ka=L.getBuffer(x))?
ba=ka.dtype:"constant"in x?(ma=2,"number"===typeof x.constant?(xa=x.constant,db=bc=ea=0):(xa=0<x.constant.length?x.constant[0]:0,db=1<x.constant.length?x.constant[1]:0,bc=2<x.constant.length?x.constant[2]:0,ea=3<x.constant.length?x.constant[3]:0)):(ka=y(x.buffer)?L.createStream(34962,x.buffer):L.getBuffer(x.buffer),ba="type"in x?pa[x.type]:ka.dtype,J=!!x.normalized,aa=x.size|0,C=x.offset|0,ha=x.stride|0,da=x.divisor|0);bf=Pa.location;Ad=Z[bf];if(1===ma){Ad.buffer||R.enableVertexAttribArray(bf);Be=
aa||1;if(Ad.type!==ba||Ad.size!==Be||Ad.buffer!==ka||Ad.normalized!==J||Ad.offset!==C||Ad.stride!==ha)R.bindBuffer(34962,ka.buffer),R.vertexAttribPointer(bf,Be,ba,J,ha,C),Ad.type=ba,Ad.size=Be,Ad.buffer=ka,Ad.normalized=J,Ad.offset=C,Ad.stride=ha;Ad.divisor!==da&&(w.vertexAttribDivisorANGLE(bf,da),Ad.divisor=da)}else if(Ad.buffer&&(R.disableVertexAttribArray(bf),Ad.buffer=null),Ad.x!==xa||Ad.y!==db||Ad.z!==bc||Ad.w!==ea)R.vertexAttrib4f(bf,xa,db,bc,ea),Ad.x=xa,Ad.y=db,Ad.z=bc,Ad.w=ea;G.buffer=this.sizeBuffer;
Rd=!1;Sd=null;je=0;He=!1;nd=td=0;yd=1;rd=0;ed=5126;Mc=gd=ud=Bc=0;y(G)?(Rd=!0,Sd=L.createStream(34962,G),ed=Sd.dtype):(Sd=L.getBuffer(G))?ed=Sd.dtype:"constant"in G?(yd=2,"number"===typeof G.constant?(ud=G.constant,gd=Mc=Bc=0):(ud=0<G.constant.length?G.constant[0]:0,gd=1<G.constant.length?G.constant[1]:0,Mc=2<G.constant.length?G.constant[2]:0,Bc=3<G.constant.length?G.constant[3]:0)):(Sd=y(G.buffer)?L.createStream(34962,G.buffer):L.getBuffer(G.buffer),ed="type"in G?pa[G.type]:Sd.dtype,He=!!G.normalized,
nd=G.size|0,td=G.offset|0,rd=G.stride|0,je=G.divisor|0);nc=H.location;ab=Z[nc];if(1===yd){ab.buffer||R.enableVertexAttribArray(nc);Cc=nd||1;if(ab.type!==ed||ab.size!==Cc||ab.buffer!==Sd||ab.normalized!==He||ab.offset!==td||ab.stride!==rd)R.bindBuffer(34962,Sd.buffer),R.vertexAttribPointer(nc,Cc,ed,He,rd,td),ab.type=ed,ab.size=Cc,ab.buffer=Sd,ab.normalized=He,ab.offset=td,ab.stride=rd;ab.divisor!==je&&(w.vertexAttribDivisorANGLE(nc,je),ab.divisor=je)}else if(ab.buffer&&(R.disableVertexAttribArray(nc),
ab.buffer=null),ab.x!==ud||ab.y!==gd||ab.z!==Mc||ab.w!==Bc)R.vertexAttrib4f(nc,ud,gd,Mc,Bc),ab.x=ud,ab.y=gd,ab.z=Mc,ab.w=Bc;Db=this.charBuffer;mc=!1;Sa=null;ic=0;Zb=!1;Dd=ad=0;od=1;Dc=0;Vb=5126;Eb=Ka=Sc=xc=0;y(Db)?(mc=!0,Sa=L.createStream(34962,Db),Vb=Sa.dtype):(Sa=L.getBuffer(Db))?Vb=Sa.dtype:"constant"in Db?(od=2,"number"===typeof Db.constant?(Sc=Db.constant,Ka=Eb=xc=0):(Sc=0<Db.constant.length?Db.constant[0]:0,Ka=1<Db.constant.length?Db.constant[1]:0,Eb=2<Db.constant.length?Db.constant[2]:0,xc=
3<Db.constant.length?Db.constant[3]:0)):(Sa=y(Db.buffer)?L.createStream(34962,Db.buffer):L.getBuffer(Db.buffer),Vb="type"in Db?pa[Db.type]:Sa.dtype,Zb=!!Db.normalized,Dd=Db.size|0,ad=Db.offset|0,Dc=Db.stride|0,ic=Db.divisor|0);Wa=cb.location;ya=Z[Wa];if(1===od){ya.buffer||R.enableVertexAttribArray(Wa);xd=Dd||1;if(ya.type!==Vb||ya.size!==xd||ya.buffer!==Sa||ya.normalized!==Zb||ya.offset!==ad||ya.stride!==Dc)R.bindBuffer(34962,Sa.buffer),R.vertexAttribPointer(Wa,xd,Vb,Zb,Dc,ad),ya.type=Vb,ya.size=xd,
ya.buffer=Sa,ya.normalized=Zb,ya.offset=ad,ya.stride=Dc;ya.divisor!==ic&&(w.vertexAttribDivisorANGLE(Wa,ic),ya.divisor=ic)}else if(ya.buffer&&(R.disableVertexAttribArray(Wa),ya.buffer=null),ya.x!==Sc||ya.y!==Ka||ya.z!==Eb||ya.w!==xc)R.vertexAttrib4f(Wa,Sc,Ka,Eb,xc),ya.x=Sc,ya.y=Ka,ya.z=Eb,ya.w=xc;ub=this.position;Ra=!1;Sb=null;eb=0;Tc=!1;Ve=Wb=0;jc=1;Ob=0;vd=5126;vb=pb=Ma=Pb=0;y(ub)?(Ra=!0,Sb=L.createStream(34962,ub),vd=Sb.dtype):(Sb=L.getBuffer(ub))?vd=Sb.dtype:"constant"in ub?(jc=2,"number"===typeof ub.constant?
(Ma=ub.constant,pb=vb=Pb=0):(Ma=0<ub.constant.length?ub.constant[0]:0,pb=1<ub.constant.length?ub.constant[1]:0,vb=2<ub.constant.length?ub.constant[2]:0,Pb=3<ub.constant.length?ub.constant[3]:0)):(Sb=y(ub.buffer)?L.createStream(34962,ub.buffer):L.getBuffer(ub.buffer),vd="type"in ub?pa[ub.type]:Sb.dtype,Tc=!!ub.normalized,Ve=ub.size|0,Wb=ub.offset|0,Ob=ub.stride|0,eb=ub.divisor|0);ib=ra.location;Na=Z[ib];if(1===jc){Na.buffer||R.enableVertexAttribArray(ib);yc=Ve||2;if(Na.type!==vd||Na.size!==yc||Na.buffer!==
Sb||Na.normalized!==Tc||Na.offset!==Wb||Na.stride!==Ob)R.bindBuffer(34962,Sb.buffer),R.vertexAttribPointer(ib,yc,vd,Tc,Ob,Wb),Na.type=vd,Na.size=yc,Na.buffer=Sb,Na.normalized=Tc,Na.offset=Wb,Na.stride=Ob;Na.divisor!==eb&&(w.vertexAttribDivisorANGLE(ib,eb),Na.divisor=eb)}else if(Na.buffer&&(R.disableVertexAttribArray(ib),Na.buffer=null),Na.x!==Ma||Na.y!==pb||Na.z!==vb||Na.w!==Pb)R.vertexAttrib4f(ib,Ma,pb,vb,Pb),Na.x=Ma,Na.y=pb,Na.z=vb,Na.w=Pb;Qb=h.call(this,I,a,0);R.uniform1f(O.location,Qb);sd=d.call(this,
I,a,0);R.uniform1f(m.location,sd);R.uniform1f(k.location,a.align);R.uniform1f(A.location,a.baseline);fb=this.viewportArray;R.uniform4f(la.location,fb[0],fb[1],fb[2],fb[3]);kc=a.color;R.uniform4f(f.location,kc[0],kc[1],kc[2],kc[3]);Rc=c.call(this,I,a,0);R.uniform2f(V.location,Rc[0],Rc[1]);ac=n.call(this,I,a,0);R.uniform2f(Q.location,ac[0],ac[1]);lb=this.scale;R.uniform2f(Yc.location,lb[0],lb[1]);mb=this.translate;R.uniform2f(pc.location,mb[0],mb[1]);ta=a.positionOffset;R.uniform2f(na.location,ta[0],
ta[1]);R.uniform1f(T.location,a.opacity);(qb=e.call(this,I,a,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);ua=qb._texture;R.uniform1i(S.location,ua.bind());(Ta=qa.elements)?R.bindBuffer(34963,Ta.buffer.buffer):La.currentVAO&&(Ta=P.getElements(La.currentVAO.elements))&&R.bindBuffer(34963,Ta.buffer.buffer);bb=a.offset;if(za=a.count)gb=qa.instances,0<gb?Ta?w.drawElementsInstancedANGLE(0,za,Ta.type,bb<<(Ta.type-5121>>1),gb):w.drawArraysInstancedANGLE(0,bb,za,gb):0>gb&&(Ta?R.drawElements(0,za,Ta.type,
bb<<(Ta.type-5121>>1)):R.drawArrays(0,bb,za)),U.dirty=!0,La.setVAO(null),I.viewportWidth=z,I.viewportHeight=u,E&&(b.cpuTime+=performance.now()-D),K&&L.destroyStream(ka),Rd&&L.destroyStream(Sd),mc&&L.destroyStream(Sa),Ra&&L.destroyStream(Sb),ua.unbind()},scope:function(a,c,e){var d,f,g,h,k,m,n,p,v,A,B,H,F,J,C,N,O,S,Q,P,V,X,T,R,ma,Y,Z,ga,ha,fa,ia,sa,la,na,oa,ra,Ca,cb,La,Pa,Ua,db,$a,Sa,wc,kb,Gb,wd,Ub,fc,Vb,xc,pc,Ka,Eb,Wa,ya,hc,ub,Ra,Sb,eb,tc,Wb,Lc,jc,Ob,Wc,Pb,Ma,pb,vb,ib,Na,yc,Qb,Yc,fb,kc,Rc,ac,lb,mb,
ta,qb,ua,Ta,bb,za,gb,Ia,Bb,Ab,Qa,uc,Ib,Za,Rb,va,kd,Ja,Lb,hb,jb,wa,cc,Da,rb,sb,Xa,Ya,lc,vc,rc,Va,Xb,Gc,Ea,zc,Oa,Aa,nb,wb,Cb,tb,sc,xb,ld,oc,ee,Nc,hd,id,Tb,$b,Mb,Fa,Yb,ob,yb,Kb,Nb,dc,gc,vf,Ec,Fc,Hc,Oc,bd,Uc,Pc,Jb,Fb,Qc,Jc,Vc,ec,Zc;d=this.viewport;f=d.x|0;g=d.y|0;h="width"in d?d.width|0:I.framebufferWidth-f;k="height"in d?d.height|0:I.framebufferHeight-g;m=I.viewportWidth;I.viewportWidth=h;n=I.viewportHeight;I.viewportHeight=k;p=aa[0];aa[0]=f;v=aa[1];aa[1]=g;A=aa[2];aa[2]=h;B=aa[3];aa[3]=k;H=bc[0];bc[0]=
0;F=bc[1];bc[1]=0;J=bc[2];bc[2]=0;C=bc[3];bc[3]=1;N=ja.blend_enable;ja.blend_enable=!0;O=ea[0];ea[0]=770;S=ea[1];ea[1]=771;Q=ea[2];ea[2]=773;P=ea[3];ea[3]=1;V=ja.depth_enable;ja.depth_enable=!1;X=ja.stencil_enable;ja.stencil_enable=!1;if(T=U.profile)R=performance.now(),b.count++;ma=a.offset;Y=qa.offset;qa.offset=ma;Z=a.count;ga=qa.count;qa.count=Z;ha=qa.primitive;qa.primitive=0;fa=a.align;ia=xa[64];xa[64]=fa;sa=q.call(this,I,a,e);la=xa[69];xa[69]=sa;na=u.call(this,I,a,e);oa=xa[67];xa[67]=na;ra=w.call(this,
I,a,e);Ca=xa[66];xa[66]=ra;cb=a.baseline;La=xa[65];xa[65]=cb;Pa=l.call(this,I,a,e);Ua=xa[62];xa[62]=Pa;db=a.color;$a=xa[14];xa[14]=db;Sa=E.call(this,I,a,e);wc=xa[63];xa[63]=Sa;kb=a.opacity;Gb=xa[10];xa[10]=kb;wd=a.positionOffset;Ub=xa[68];xa[68]=wd;fc=this.scale;Vb=xa[6];xa[6]=fc;xc=this.translate;pc=xa[8];xa[8]=xc;Ka=this.viewportArray;Eb=xa[3];xa[3]=Ka;Wa=this.charBuffer;ya=!1;hc=null;ub=0;Ra=!1;eb=Sb=0;tc=1;Wb=0;Lc=5126;Pb=Wc=Ob=jc=0;y(Wa)?(ya=!0,hc=L.createStream(34962,Wa),Lc=hc.dtype):(hc=L.getBuffer(Wa))?
Lc=hc.dtype:"constant"in Wa?(tc=2,"number"===typeof Wa.constant?(Ob=Wa.constant,Wc=Pb=jc=0):(Ob=0<Wa.constant.length?Wa.constant[0]:0,Wc=1<Wa.constant.length?Wa.constant[1]:0,Pb=2<Wa.constant.length?Wa.constant[2]:0,jc=3<Wa.constant.length?Wa.constant[3]:0)):(hc=y(Wa.buffer)?L.createStream(34962,Wa.buffer):L.getBuffer(Wa.buffer),Lc="type"in Wa?pa[Wa.type]:hc.dtype,Ra=!!Wa.normalized,eb=Wa.size|0,Sb=Wa.offset|0,Wb=Wa.stride|0,ub=Wa.divisor|0);Ma=r.buffer;r.buffer=hc;pb=r.divisor;r.divisor=ub;vb=r.normalized;
r.normalized=Ra;ib=r.offset;r.offset=Sb;Na=r.size;r.size=eb;yc=r.state;r.state=tc;Qb=r.stride;r.stride=Wb;Yc=r.type;r.type=Lc;fb=r.w;r.w=jc;kc=r.x;r.x=Ob;Rc=r.y;r.y=Wc;ac=r.z;r.z=Pb;G.buffer=this.sizeBuffer;lb=!1;mb=null;ta=0;qb=!1;Ta=ua=0;bb=1;za=0;gb=5126;Qa=Ab=Bb=Ia=0;y(G)?(lb=!0,mb=L.createStream(34962,G),gb=mb.dtype):(mb=L.getBuffer(G))?gb=mb.dtype:"constant"in G?(bb=2,"number"===typeof G.constant?(Bb=G.constant,Ab=Qa=Ia=0):(Bb=0<G.constant.length?G.constant[0]:0,Ab=1<G.constant.length?G.constant[1]:
0,Qa=2<G.constant.length?G.constant[2]:0,Ia=3<G.constant.length?G.constant[3]:0)):(mb=y(G.buffer)?L.createStream(34962,G.buffer):L.getBuffer(G.buffer),gb="type"in G?pa[G.type]:mb.dtype,qb=!!G.normalized,Ta=G.size|0,ua=G.offset|0,za=G.stride|0,ta=G.divisor|0);uc=D.buffer;D.buffer=mb;Ib=D.divisor;D.divisor=ta;Za=D.normalized;D.normalized=qb;Rb=D.offset;D.offset=ua;va=D.size;D.size=Ta;kd=D.state;D.state=bb;Ja=D.stride;D.stride=za;Lb=D.type;D.type=gb;hb=D.w;D.w=Ia;jb=D.x;D.x=Bb;wa=D.y;D.y=Ab;cc=D.z;D.z=
Qa;Da=this.position;rb=!1;sb=null;Xa=0;Ya=!1;vc=lc=0;rc=1;Va=0;Xb=5126;Oa=zc=Ea=Gc=0;y(Da)?(rb=!0,sb=L.createStream(34962,Da),Xb=sb.dtype):(sb=L.getBuffer(Da))?Xb=sb.dtype:"constant"in Da?(rc=2,"number"===typeof Da.constant?(Ea=Da.constant,zc=Oa=Gc=0):(Ea=0<Da.constant.length?Da.constant[0]:0,zc=1<Da.constant.length?Da.constant[1]:0,Oa=2<Da.constant.length?Da.constant[2]:0,Gc=3<Da.constant.length?Da.constant[3]:0)):(sb=y(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),Xb="type"in
Da?pa[Da.type]:sb.dtype,Ya=!!Da.normalized,vc=Da.size|0,lc=Da.offset|0,Va=Da.stride|0,Xa=Da.divisor|0);Aa=K.buffer;K.buffer=sb;nb=K.divisor;K.divisor=Xa;wb=K.normalized;K.normalized=Ya;Cb=K.offset;K.offset=lc;tb=K.size;K.size=vc;sc=K.state;K.state=rc;xb=K.stride;K.stride=Va;ld=K.type;K.type=Xb;oc=K.w;K.w=Gc;ee=K.x;K.x=Ea;Nc=K.y;K.y=zc;hd=K.z;K.z=Oa;x.buffer=this.sizeBuffer;id=!1;Tb=null;$b=0;Mb=!1;Yb=Fa=0;ob=1;yb=0;Kb=5126;vf=gc=dc=Nb=0;y(x)?(id=!0,Tb=L.createStream(34962,x),Kb=Tb.dtype):(Tb=L.getBuffer(x))?
Kb=Tb.dtype:"constant"in x?(ob=2,"number"===typeof x.constant?(dc=x.constant,gc=vf=Nb=0):(dc=0<x.constant.length?x.constant[0]:0,gc=1<x.constant.length?x.constant[1]:0,vf=2<x.constant.length?x.constant[2]:0,Nb=3<x.constant.length?x.constant[3]:0)):(Tb=y(x.buffer)?L.createStream(34962,x.buffer):L.getBuffer(x.buffer),Kb="type"in x?pa[x.type]:Tb.dtype,Mb=!!x.normalized,Yb=x.size|0,Fa=x.offset|0,yb=x.stride|0,$b=x.divisor|0);Ec=z.buffer;z.buffer=Tb;Fc=z.divisor;z.divisor=$b;Hc=z.normalized;z.normalized=
Mb;Oc=z.offset;z.offset=Fa;bd=z.size;z.size=Yb;Uc=z.state;z.state=ob;Pc=z.stride;z.stride=yb;Jb=z.type;z.type=Kb;Fb=z.w;z.w=Nb;Qc=z.x;z.x=dc;Jc=z.y;z.y=gc;Vc=z.z;z.z=vf;ec=ba.vert;ba.vert=61;Zc=ba.frag;ba.frag=60;U.dirty=!0;c(I,a,e);I.viewportWidth=m;I.viewportHeight=n;aa[0]=p;aa[1]=v;aa[2]=A;aa[3]=B;bc[0]=H;bc[1]=F;bc[2]=J;bc[3]=C;ja.blend_enable=N;ea[0]=O;ea[1]=S;ea[2]=Q;ea[3]=P;ja.depth_enable=V;ja.stencil_enable=X;T&&(b.cpuTime+=performance.now()-R);qa.offset=Y;qa.count=ga;qa.primitive=ha;xa[64]=
ia;xa[69]=la;xa[67]=oa;xa[66]=Ca;xa[65]=La;xa[62]=Ua;xa[14]=$a;xa[63]=wc;xa[10]=Gb;xa[68]=Ub;xa[6]=Vb;xa[8]=pc;xa[3]=Eb;ya&&L.destroyStream(hc);r.buffer=Ma;r.divisor=pb;r.normalized=vb;r.offset=ib;r.size=Na;r.state=yc;r.stride=Qb;r.type=Yc;r.w=fb;r.x=kc;r.y=Rc;r.z=ac;lb&&L.destroyStream(mb);D.buffer=uc;D.divisor=Ib;D.normalized=Za;D.offset=Rb;D.size=va;D.state=kd;D.stride=Ja;D.type=Lb;D.w=hb;D.x=jb;D.y=wa;D.z=cc;rb&&L.destroyStream(sb);K.buffer=Aa;K.divisor=nb;K.normalized=wb;K.offset=Cb;K.size=tb;
K.state=sc;K.stride=xb;K.type=ld;K.w=oc;K.x=ee;K.y=Nc;K.z=hd;id&&L.destroyStream(Tb);z.buffer=Ec;z.divisor=Fc;z.normalized=Hc;z.offset=Oc;z.size=bd;z.state=Uc;z.stride=Pc;z.type=Jb;z.w=Fb;z.x=Qc;z.y=Jc;z.z=Vc;ba.vert=ec;ba.frag=Zc;U.dirty=!0}}}}},{}],25:[function(w,u,C){var a=w("./sorted-object-keys");u.exports=function(b,g){for(var h=a(g),d=0;d<h.length;++d)b[h[d]]=g[h[d]];return b}},{"./sorted-object-keys":34}],26:[function(w,u,C){function a(a,b,c,g,e,q){for(var u=0;u<b;++u)for(var w=a[u],l=0;l<
c;++l)for(var E=w[l],r=0;r<g;++r)e[q++]=E[r]}function b(g,d,c,n,e){for(var q=1,u=c+1;u<d.length;++u)q*=d[u];var w=d[c];if(4===d.length-c){var l=d[c+1],E=d[c+2];d=d[c+3];for(u=0;u<w;++u)a(g[u],l,E,d,n,e),e+=q}else for(u=0;u<w;++u)b(g[u],d,c+1,n,e),e+=q}var g=w("./pool");u.exports={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);return b},flatten:function(h,d,c,n){var e=1;if(d.length)for(var q=0;q<d.length;++q)e*=d[q];else e=0;c=n||g.allocType(c,e);switch(d.length){case 0:break;case 1:n=
d[0];for(d=0;d<n;++d)c[d]=h[d];break;case 2:n=d[0];d=d[1];for(q=e=0;q<n;++q)for(var u=h[q],w=0;w<d;++w)c[e++]=u[w];break;case 3:a(h,d[0],d[1],d[2],c,0);break;default:b(h,d,0,c,0)}return c}}},{"./pool":32}],27:[function(w,u,C){var a=w("./is-typed-array");u.exports=function(b){return Array.isArray(b)||a(b)}},{"./is-typed-array":30}],28:[function(w,u,C){var a=w("./is-typed-array");u.exports=function(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&"number"===typeof b.offset&&
b.shape.length===b.stride.length&&(Array.isArray(b.data)||a(b.data))}},{"./is-typed-array":30}],29:[function(w,u,C){u.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(w,u,C){u.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(w,u,C){u.exports=function(a,b){for(var g=
Array(a),h=0;h<a;++h)g[h]=b(h);return g}},{}],32:[function(w,u,C){function a(a){var b,c;b=(65535<a)<<4;a>>>=b;c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1}function b(){function b(d){a:{for(var e=16;268435456>=e;e*=16)if(d<=e){d=e;break a}d=0}e=c[a(d)>>2];return 0<e.length?e.pop():new ArrayBuffer(d)}function d(b){c[a(b.byteLength)>>2].push(b)}var c=g(8,function(){return[]});return{alloc:b,free:d,allocType:function(a,c){var d=null;switch(a){case 5120:d=new Int8Array(b(c),
0,c);break;case 5121:d=new Uint8Array(b(c),0,c);break;case 5122:d=new Int16Array(b(2*c),0,c);break;case 5123:d=new Uint16Array(b(2*c),0,c);break;case 5124:d=new Int32Array(b(4*c),0,c);break;case 5125:d=new Uint32Array(b(4*c),0,c);break;case 5126:d=new Float32Array(b(4*c),0,c);break;default:return null}return d.length!==c?d.subarray(0,c):d},freeType:function(a){d(a.buffer)}}}var g=w("./loop");w=b();w.zero=b();u.exports=w},{"./loop":31}],33:[function(w,u,C){u.exports={next:"function"===typeof requestAnimationFrame?
function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(w,u,C){u.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(w,u,C){var a=w("./pool"),b=new Float32Array(1),g=new Uint32Array(b.buffer);u.exports=function(h){for(var d=a.allocType(5123,h.length),c=0;c<h.length;++c)if(isNaN(h[c]))d[c]=65535;else if(Infinity===h[c])d[c]=31744;else if(-Infinity===
h[c])d[c]=64512;else{b[0]=h[c];var n=g[0],e=n>>>31<<15,q=(n<<1>>>24)-127,n=n>>13&1023;d[c]=-24>q?e:-14>q?e+(n+1024>>-14-q):15<q?e+31744:e+(q+15<<10)+n}return d}},{"./pool":32}],36:[function(w,u,C){var a=w("./sorted-object-keys");u.exports=function(b){return a(b).map(function(a){return b[a]})}},{"./sorted-object-keys":34}],37:[function(w,u,C){function a(a,b,d){function g(){var b=window.innerWidth,c=window.innerHeight;a!==document.body&&(c=h.getBoundingClientRect(),b=c.right-c.left,c=c.bottom-c.top);
h.width=d*b;h.height=d*c}var h=document.createElement("canvas");c(h.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(h);a===document.body&&(h.style.position="absolute",c(a.style,{margin:0,padding:0}));var l;a!==document.body&&"function"===typeof ResizeObserver?(l=new ResizeObserver(function(){setTimeout(g)}),l.observe(a)):window.addEventListener("resize",g,!1);g();return{canvas:h,onDestroy:function(){l?l.disconnect():window.removeEventListener("resize",g);
a.removeChild(h)}}}function b(a,b){function c(d){try{return a.getContext(d,b)}catch(g){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function g(a){if("string"===typeof a)return a.split();d(Array.isArray(a),"invalid extension array");return a}function h(a){return"string"===typeof a?(d("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var d=w("./util/check"),c=w("./util/extend");u.exports=function(c){var e=c||{},q,u,w,l;c={};
var E=[],r=[],D="undefined"===typeof window?1:window.devicePixelRatio,K=!1,z=function(a){a&&d.raise(a)},C=function(){};"string"===typeof e?(d("undefined"!==typeof document,"selector queries only supported in DOM environments"),q=document.querySelector(e),d(q,"invalid query string for element")):"object"===typeof e?"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&"function"===typeof e.getBoundingClientRect?q=e:"function"===typeof e.drawArrays||"function"===typeof e.drawElements?(l=
e,w=l.canvas):(d.constructor(e),"gl"in e?l=e.gl:"canvas"in e?w=h(e.canvas):"container"in e&&(u=h(e.container)),"attributes"in e&&(c=e.attributes,d.type(c,"object","invalid context attributes")),"extensions"in e&&(E=g(e.extensions)),"optionalExtensions"in e&&(r=g(e.optionalExtensions)),"onDone"in e&&(d.type(e.onDone,"function","invalid or missing onDone callback"),z=e.onDone),"profile"in e&&(K=!!e.profile),"pixelRatio"in e&&(D=+e.pixelRatio,d(0<D,"invalid pixel ratio"))):d.raise("invalid arguments to regl");
q&&("canvas"===q.nodeName.toLowerCase()?w=q:u=q);if(!l){if(!w){d("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");q=a(u||document.body,z,D);if(!q)return null;w=q.canvas;C=q.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);l=b(w,c)}return l?{gl:l,canvas:w,container:u,extensions:E,optionalExtensions:r,pixelRatio:D,profile:K,onDone:z,onDestroy:C}:(C(),z("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(w,u,C){u.exports=function(a,b){var g=b[0],h=b[1],d=b[2],c=b[3],n=b[4],e=b[5],q=b[6],u=b[7],w=b[8],l=b[9],E=b[10],r=b[11],D=b[12],K=b[13],z=b[14],C=b[15];a[0]=e*(E*C-r*z)-l*(q*C-u*z)+K*(q*r-u*E);a[1]=-(h*(E*C-r*z)-l*(d*C-c*z)+K*(d*r-c*E));a[2]=h*(q*C-u*z)-e*(d*C-c*z)+K*(d*u-c*q);a[3]=-(h*(q*r-u*E)-e*(d*r-c*E)+l*(d*u-c*q));a[4]=-(n*(E*C-r*z)-w*(q*C-u*z)+D*(q*r-u*E));a[5]=g*(E*C-r*z)-w*(d*C-c*z)+D*(d*r-c*E);a[6]=-(g*(q*C-u*z)-n*(d*C-c*z)+D*
(d*u-c*q));a[7]=g*(q*r-u*E)-n*(d*r-c*E)+w*(d*u-c*q);a[8]=n*(l*C-r*K)-w*(e*C-u*K)+D*(e*r-u*l);a[9]=-(g*(l*C-r*K)-w*(h*C-c*K)+D*(h*r-c*l));a[10]=g*(e*C-u*K)-n*(h*C-c*K)+D*(h*u-c*e);a[11]=-(g*(e*r-u*l)-n*(h*r-c*l)+w*(h*u-c*e));a[12]=-(n*(l*z-E*K)-w*(e*z-q*K)+D*(e*E-q*l));a[13]=g*(l*z-E*K)-w*(h*z-d*K)+D*(h*E-d*l);a[14]=-(g*(e*z-q*K)-n*(h*z-d*K)+D*(h*q-d*e));a[15]=g*(e*E-q*l)-n*(h*E-d*l)+w*(h*q-d*e);return a}},{}],39:[function(w,u,C){u.exports=function(a){var b=new Float32Array(16);b[0]=a[0];b[1]=a[1];
b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b}},{}],40:[function(w,u,C){u.exports=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],41:[function(w,u,C){u.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;
a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],42:[function(w,u,C){u.exports=function(a){var b=a[0],g=a[1],h=a[2],d=a[3],c=a[4],n=a[5],e=a[6],q=a[7],u=a[8],w=a[9],l=a[10],E=a[11],r=a[12],D=a[13],C=a[14];a=a[15];return(b*n-g*c)*(l*a-E*C)-(b*e-h*c)*(w*a-E*D)+(b*q-d*c)*(w*C-l*D)+(g*e-h*n)*(u*a-E*r)-(g*q-d*n)*(u*C-l*r)+(h*q-d*e)*(u*D-w*r)}},{}],43:[function(w,u,C){u.exports=function(a,b){var g=b[0],h=b[1],d=b[2],c=b[3],n=g+g,e=h+h,q=d+d,g=g*n,u=h*n,h=
h*e,w=d*n,l=d*e,d=d*q,n=c*n,e=c*e,c=c*q;a[0]=1-h-d;a[1]=u+c;a[2]=w-e;a[3]=0;a[4]=u-c;a[5]=1-g-d;a[6]=l+n;a[7]=0;a[8]=w+e;a[9]=l-n;a[10]=1-g-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],44:[function(w,u,C){u.exports=function(a,b,g){var h,d,c=g[0],n=g[1];g=g[2];h=Math.sqrt(c*c+n*n+g*g);if(1E-6>Math.abs(h))return null;h=1/h;c*=h;n*=h;g*=h;h=Math.sin(b);b=Math.cos(b);d=1-b;a[0]=c*c*d+b;a[1]=n*c*d+g*h;a[2]=g*c*d-n*h;a[3]=0;a[4]=c*n*d-g*h;a[5]=n*n*d+b;a[6]=g*n*d+c*h;a[7]=0;a[8]=c*g*d+n*h;a[9]=
n*g*d-c*h;a[10]=g*g*d+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],45:[function(w,u,C){u.exports=function(a,b,g){var h=b[0],d=b[1],c=b[2],n=b[3],e=h+h,q=d+d,u=c+c;b=h*e;var w=h*q,h=h*u,l=d*q,d=d*u,c=c*u,e=n*e,q=n*q,n=n*u;a[0]=1-(l+c);a[1]=w+n;a[2]=h-q;a[3]=0;a[4]=w-n;a[5]=1-(b+c);a[6]=d+e;a[7]=0;a[8]=h+q;a[9]=d-e;a[10]=1-(b+l);a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}},{}],46:[function(w,u,C){u.exports=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=
0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],47:[function(w,u,C){u.exports=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}},{}],48:[function(w,u,C){u.exports=function(a,b){var g=Math.sin(b),h=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=h;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],49:[function(w,u,
C){u.exports=function(a,b){var g=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(w,u,C){u.exports=function(a,b){var g=Math.sin(b),h=Math.cos(b);a[0]=h;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(w,u,C){u.exports=function(a,b,g,h,d,c,n){var e=1/(g-b),q=1/(d-h),u=1/(c-n);a[0]=2*c*e;
a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*c*q;a[6]=0;a[7]=0;a[8]=(g+b)*e;a[9]=(d+h)*q;a[10]=(n+c)*u;a[11]=-1;a[12]=0;a[13]=0;a[14]=n*c*2*u;a[15]=0;return a}},{}],52:[function(w,u,C){u.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(w,u,C){u.exports={create:w("./create"),clone:w("./clone"),copy:w("./copy"),identity:w("./identity"),transpose:w("./transpose"),invert:w("./invert"),adjoint:w("./adjoint"),
determinant:w("./determinant"),multiply:w("./multiply"),translate:w("./translate"),scale:w("./scale"),rotate:w("./rotate"),rotateX:w("./rotateX"),rotateY:w("./rotateY"),rotateZ:w("./rotateZ"),fromRotation:w("./fromRotation"),fromRotationTranslation:w("./fromRotationTranslation"),fromScaling:w("./fromScaling"),fromTranslation:w("./fromTranslation"),fromXRotation:w("./fromXRotation"),fromYRotation:w("./fromYRotation"),fromZRotation:w("./fromZRotation"),fromQuat:w("./fromQuat"),frustum:w("./frustum"),
perspective:w("./perspective"),perspectiveFromFieldOfView:w("./perspectiveFromFieldOfView"),ortho:w("./ortho"),lookAt:w("./lookAt"),str:w("./str")}},{"./adjoint":38,"./clone":39,"./copy":40,"./create":41,"./determinant":42,"./fromQuat":43,"./fromRotation":44,"./fromRotationTranslation":45,"./fromScaling":46,"./fromTranslation":47,"./fromXRotation":48,"./fromYRotation":49,"./fromZRotation":50,"./frustum":51,"./identity":52,"./invert":54,"./lookAt":55,"./multiply":56,"./ortho":57,"./perspective":58,
"./perspectiveFromFieldOfView":59,"./rotate":60,"./rotateX":61,"./rotateY":62,"./rotateZ":63,"./scale":64,"./str":65,"./translate":66,"./transpose":67}],54:[function(w,u,C){u.exports=function(a,b){var g=b[0],h=b[1],d=b[2],c=b[3],n=b[4],e=b[5],q=b[6],u=b[7],w=b[8],l=b[9],E=b[10],r=b[11],D=b[12],C=b[13],z=b[14],ha=b[15],db=g*e-h*n,J=g*q-d*n,ma=g*u-c*n,p=h*q-d*e,v=h*u-c*e,k=d*u-c*q,S=w*C-l*D,Q=w*z-E*D,V=w*ha-r*D,A=l*z-E*C,cb=l*ha-r*C,H=E*ha-r*z,O=db*H-J*cb+ma*A+p*V-v*Q+k*S;if(!O)return null;O=1/O;a[0]=
(e*H-q*cb+u*A)*O;a[1]=(d*cb-h*H-c*A)*O;a[2]=(C*k-z*v+ha*p)*O;a[3]=(E*v-l*k-r*p)*O;a[4]=(q*V-n*H-u*Q)*O;a[5]=(g*H-d*V+c*Q)*O;a[6]=(z*ma-D*k-ha*J)*O;a[7]=(w*k-E*ma+r*J)*O;a[8]=(n*cb-e*V+u*S)*O;a[9]=(h*V-g*cb-c*S)*O;a[10]=(D*v-C*ma+ha*db)*O;a[11]=(l*ma-w*v-r*db)*O;a[12]=(e*Q-n*A-q*S)*O;a[13]=(g*A-h*Q+d*S)*O;a[14]=(C*J-D*p-z*db)*O;a[15]=(w*p-l*J+E*db)*O;return a}},{}],55:[function(w,u,C){var a=w("./identity");u.exports=function(b,g,h,d){var c,n,e,q,u,w,l,E,r=g[0],D=g[1];g=g[2];e=d[0];q=d[1];n=d[2];l=
h[0];d=h[1];c=h[2];if(1E-6>Math.abs(r-l)&&1E-6>Math.abs(D-d)&&1E-6>Math.abs(g-c))return a(b);h=r-l;d=D-d;l=g-c;E=1/Math.sqrt(h*h+d*d+l*l);h*=E;d*=E;l*=E;c=q*l-n*d;n=n*h-e*l;e=e*d-q*h;(E=Math.sqrt(c*c+n*n+e*e))?(E=1/E,c*=E,n*=E,e*=E):e=n=c=0;q=d*e-l*n;u=l*c-h*e;w=h*n-d*c;(E=Math.sqrt(q*q+u*u+w*w))?(E=1/E,q*=E,u*=E,w*=E):w=u=q=0;b[0]=c;b[1]=q;b[2]=h;b[3]=0;b[4]=n;b[5]=u;b[6]=d;b[7]=0;b[8]=e;b[9]=w;b[10]=l;b[11]=0;b[12]=-(c*r+n*D+e*g);b[13]=-(q*r+u*D+w*g);b[14]=-(h*r+d*D+l*g);b[15]=1;return b}},{"./identity":52}],
56:[function(w,u,C){u.exports=function(a,b,g){var h=b[0],d=b[1],c=b[2],n=b[3],e=b[4],q=b[5],u=b[6],w=b[7],l=b[8],E=b[9],r=b[10],D=b[11],C=b[12],z=b[13],ha=b[14];b=b[15];var db=g[0],J=g[1],ma=g[2],p=g[3];a[0]=db*h+J*e+ma*l+p*C;a[1]=db*d+J*q+ma*E+p*z;a[2]=db*c+J*u+ma*r+p*ha;a[3]=db*n+J*w+ma*D+p*b;db=g[4];J=g[5];ma=g[6];p=g[7];a[4]=db*h+J*e+ma*l+p*C;a[5]=db*d+J*q+ma*E+p*z;a[6]=db*c+J*u+ma*r+p*ha;a[7]=db*n+J*w+ma*D+p*b;db=g[8];J=g[9];ma=g[10];p=g[11];a[8]=db*h+J*e+ma*l+p*C;a[9]=db*d+J*q+ma*E+p*z;a[10]=
db*c+J*u+ma*r+p*ha;a[11]=db*n+J*w+ma*D+p*b;db=g[12];J=g[13];ma=g[14];p=g[15];a[12]=db*h+J*e+ma*l+p*C;a[13]=db*d+J*q+ma*E+p*z;a[14]=db*c+J*u+ma*r+p*ha;a[15]=db*n+J*w+ma*D+p*b;return a}},{}],57:[function(w,u,C){u.exports=function(a,b,g,h,d,c,n){var e=1/(b-g),q=1/(h-d),u=1/(c-n);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*q;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*u;a[11]=0;a[12]=(b+g)*e;a[13]=(d+h)*q;a[14]=(n+c)*u;a[15]=1;return a}},{}],58:[function(w,u,C){u.exports=function(a,b,g,h,d){b=1/Math.tan(b/
2);var c=1/(h-d);a[0]=b/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+h)*c;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*h*c;a[15]=0;return a}},{}],59:[function(w,u,C){u.exports=function(a,b,g,h){var d=Math.tan(b.upDegrees*Math.PI/180),c=Math.tan(b.downDegrees*Math.PI/180),n=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var e=2/(n+b),q=2/(d+c);a[0]=e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=q;a[6]=0;a[7]=0;a[8]=-((n-b)*e*.5);a[9]=(d-c)*q*.5;a[10]=h/(g-h);a[11]=
-1;a[12]=0;a[13]=0;a[14]=h*g/(g-h);a[15]=0;return a}},{}],60:[function(w,u,C){u.exports=function(a,b,g,h){var d=h[0],c=h[1];h=h[2];var n=Math.sqrt(d*d+c*c+h*h),e,q,u,w,l,E,r,D,C,z,ha,db,J,ma,p,v,k,S,Q,V;if(1E-6>Math.abs(n))return null;n=1/n;d*=n;c*=n;h*=n;e=Math.sin(g);q=Math.cos(g);u=1-q;g=b[0];n=b[1];w=b[2];l=b[3];E=b[4];r=b[5];D=b[6];C=b[7];z=b[8];ha=b[9];db=b[10];J=b[11];ma=d*d*u+q;p=c*d*u+h*e;v=h*d*u-c*e;k=d*c*u-h*e;S=c*c*u+q;Q=h*c*u+d*e;V=d*h*u+c*e;d=c*h*u-d*e;c=h*h*u+q;a[0]=g*ma+E*p+z*v;a[1]=
n*ma+r*p+ha*v;a[2]=w*ma+D*p+db*v;a[3]=l*ma+C*p+J*v;a[4]=g*k+E*S+z*Q;a[5]=n*k+r*S+ha*Q;a[6]=w*k+D*S+db*Q;a[7]=l*k+C*S+J*Q;a[8]=g*V+E*d+z*c;a[9]=n*V+r*d+ha*c;a[10]=w*V+D*d+db*c;a[11]=l*V+C*d+J*c;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}},{}],61:[function(w,u,C){u.exports=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var d=b[4],c=b[5],n=b[6],e=b[7],q=b[8],u=b[9],w=b[10],l=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
a[4]=d*g+q*h;a[5]=c*g+u*h;a[6]=n*g+w*h;a[7]=e*g+l*h;a[8]=q*g-d*h;a[9]=u*g-c*h;a[10]=w*g-n*h;a[11]=l*g-e*h;return a}},{}],62:[function(w,u,C){u.exports=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var d=b[0],c=b[1],n=b[2],e=b[3],q=b[8],u=b[9],w=b[10],l=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*g-q*h;a[1]=c*g-u*h;a[2]=n*g-w*h;a[3]=e*g-l*h;a[8]=d*h+q*g;a[9]=c*h+u*g;a[10]=n*h+w*g;a[11]=e*h+l*g;return a}},{}],63:[function(w,u,C){u.exports=
function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var d=b[0],c=b[1],n=b[2],e=b[3],q=b[4],u=b[5],w=b[6],l=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*g+q*h;a[1]=c*g+u*h;a[2]=n*g+w*h;a[3]=e*g+l*h;a[4]=q*g-d*h;a[5]=u*g-c*h;a[6]=w*g-n*h;a[7]=l*g-e*h;return a}},{}],64:[function(w,u,C){u.exports=function(a,b,g){var h=g[0],d=g[1];g=g[2];a[0]=b[0]*h;a[1]=b[1]*h;a[2]=b[2]*h;a[3]=b[3]*h;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*
g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}},{}],65:[function(w,u,C){u.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],66:[function(w,u,C){u.exports=function(a,b,g){var h=g[0],d=g[1];g=g[2];var c,n,e,q,u,w,l,E,r,D,C,z;b===a?(a[12]=b[0]*h+b[4]*d+b[8]*g+b[12],a[13]=b[1]*h+b[5]*d+b[9]*g+b[13],
a[14]=b[2]*h+b[6]*d+b[10]*g+b[14],a[15]=b[3]*h+b[7]*d+b[11]*g+b[15]):(c=b[0],n=b[1],e=b[2],q=b[3],u=b[4],w=b[5],l=b[6],E=b[7],r=b[8],D=b[9],C=b[10],z=b[11],a[0]=c,a[1]=n,a[2]=e,a[3]=q,a[4]=u,a[5]=w,a[6]=l,a[7]=E,a[8]=r,a[9]=D,a[10]=C,a[11]=z,a[12]=c*h+u*d+r*g+b[12],a[13]=n*h+w*d+D*g+b[13],a[14]=e*h+l*d+C*g+b[14],a[15]=q*h+E*d+z*g+b[15]);return a}},{}],67:[function(w,u,C){u.exports=function(a,b){if(a===b){var g=b[1],h=b[2],d=b[3],c=b[6],n=b[7],e=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=g;a[6]=b[9];
a[7]=b[13];a[8]=h;a[9]=c;a[11]=b[14];a[12]=d;a[13]=n;a[14]=e}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}},{}],68:[function(w,u,C){function a(a){throw Error("resl: "+a);}function b(b,c,d){Object.keys(b).forEach(function(b){0>c.indexOf(b)&&a('invalid parameter "'+b+'" in '+d)})}function g(a,b){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=
b}var h=["manifest","onDone","onProgress","onError"],d=["type","src","stream","credentials","parser"],c=["onData","onDone"];u.exports=function(n){function e(b,c){if(b in n){var e=n[b];"function"!==typeof e&&a('invalid callback "'+b+'"');return e}return null}function q(a){function b(){if(!(2>n.readyState||1===r.state||-1===r.state)){if(200!==n.status)return w('error loading resource "'+a.name+'"');if(2<n.readyState&&0===r.state){var e;e="binary"===a.type?n.response:n.responseText;if(h.data)try{q=h.data(e)}catch(d){return w(d)}else q=
e}if(3<n.readyState&&0===r.state){if(h.done)try{q=h.done()}catch(d){return w(d)}r.state=1}z[c]=q;r.progress=.75*r.progress+.25;r.ready=a.stream&&!!q||1===r.state;l()}}var c=a.name,e=a.stream,d="binary"===a.type,h=a.parser,n=new XMLHttpRequest,q=null,r=new g(c,function(){1!==r.state&&-1!==r.state&&(n.onreadystatechange=null,n.abort(),r.state=-1)});n.onreadystatechange=e?b:function(){4===n.readyState&&b()};d&&(n.responseType="arraybuffer");a.credentials&&(n.withCredentials=!0);n.open("GET",a.src,!0);
n.send();return r}function u(a,b){function c(){if(0===C.state)if(r.data)try{D=r.data(b)}catch(a){return w(a)}else D=b}function e(a){c();z[q]=D;C.progress=a.lengthComputable?Math.max(C.progress,a.loaded/a.total):.75*C.progress+.25;l(q)}function d(){c();if(0===C.state){if(r.done)try{D=r.done()}catch(a){return w(a)}C.state=1}C.progress=1;C.ready=!0;z[q]=D;n();l("finish "+q)}function h(){w('error loading asset "'+q+'"')}function n(){a.stream&&b.removeEventListener("progress",e);"image"===a.type?b.addEventListener("load",
d):b.addEventListener("canplay",d);b.removeEventListener("error",h)}var q=a.name,r=a.parser,C=new g(q,function(){1!==C.state&&-1!==C.state&&(C.state=-1,n(),b.src="")}),D=b;a.stream&&b.addEventListener("progress",e);if("image"===a.type)b.addEventListener("load",d);else{var f=!1,m=!1;b.addEventListener("loadedmetadata",function(){m=!0;f&&d()});b.addEventListener("canplay",function(){f=!0;m&&d()})}b.addEventListener("error",h);b.crossOrigin=a.credentials?"use-credentials":"anonymous";b.src=a.src;return C}
function w(a){-1!==ha&&1!==ha&&(ha=-1,J.forEach(function(a){a.cancel()}),K?"string"===typeof a?K(Error("resl: "+a)):K(a):console.error("resl error:",a))}function l(a){if(-1!==ha&&1!==ha){var b=0,c=0;J.forEach(function(a){a.ready&&(c+=1);b+=a.progress});c===J.length?(ha=1,r(z)):D&&D(b/J.length,a)}}"object"===typeof n&&n||a("invalid or missing configuration");b(n,h,"config");var C=n.manifest;"object"===typeof C&&C||a("missing manifest");var r=e("onDone");r||a("missing onDone() callback");var D=e("onProgress"),
K=e("onError"),z={},ha=0,db={text:q,binary:function(a){return q(a)},image:function(a){return u(a,document.createElement("img"))},video:function(a){return u(a,document.createElement("video"))},audio:function(a){return u(a,document.createElement("audio"))}},J=Object.keys(C).map(function(e){function g(b,c){if(b in h.parser){var e=h.parser[b];"function"!==typeof e&&a("invalid parser callback "+b+' for asset "'+b+'"');return e}return c}var h=C[e];"string"===typeof h?h={src:h}:"object"===typeof h&&h||a('invalid asset definition "'+
e+'"');b(h,d,'asset "'+e+'"');var k={};"parser"in h&&("function"===typeof h.parser?k={data:h.parser}:"object"===typeof h.parser&&h.parser?(b(k,c,'parser for asset "'+e+'"'),"onData"in k||a('missing onData callback for parser in asset "'+e+'"'),k={data:g("onData"),done:g("onDone")}):a('invalid parser for asset "'+e+'"'));return{name:e,type:function(b,c,d){b in h&&(d=h[b]);0>c.indexOf(d)&&a("invalid "+b+' "'+d+'" for asset "'+e+'", possible values: '+c);return d}("type",Object.keys(db),"text"),stream:!!h.stream,
credentials:!!h.credentials,src:function(b,c,d){b in h?d=h[b]:c&&a("missing "+b+' for asset "'+e+'"');"string"!==typeof d&&a("invalid "+b+' for asset "'+e+'", must be a string');return d}("src",!0,""),parser:k}}).map(function(a){return db[a.type](a)});0===J.length&&setTimeout(function(){l("done")},1)}},{}],69:[function(w,u,C){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var b=w("./lib/util/check"),g=w("./lib/util/extend"),h=w("./lib/dynamic"),d=w("./lib/util/raf"),c=w("./lib/util/clock"),
n=w("./lib/strings"),e=w("./lib/webgl"),q=w("./lib/extension"),ka=w("./lib/limits"),da=w("./lib/buffer"),l=w("./lib/elements"),E=w("./lib/texture"),r=w("./lib/renderbuffer"),D=w("./lib/framebuffer"),K=w("./lib/attribute"),z=w("./lib/shader"),ha=w("./lib/read"),db=w("./lib/core"),J=w("./lib/stats"),ma=w("./lib/timer");u.exports=function(p){function u(){if(0===kb.length)L&&L.update(),hc=null;else{hc=d.next(u);f();for(var a=kb.length-1;0<=a;--a){var b=kb[a];b&&b(P,null,0)}ra.flush();L&&L.update()}}function k(){!hc&&
0<kb.length&&(hc=d.next(u))}function w(){hc&&(d.cancel(u),hc=null)}function C(a){a.preventDefault();Yc=!0;w();ea.forEach(function(a){a()})}function V(a){ra.getError();Yc=!1;pc.restore();ja.restore();$a.restore();ba.restore();xa.restore();La.restore();y.restore();L&&L.restore();bc.procs.refresh();k();oa.forEach(function(a){a()})}function A(a){function c(a,b){var e={},d={};Object.keys(a).forEach(function(c){var f=a[c];if(h.isDynamic(f))d[c]=h.unbox(f,c);else{if(b&&Array.isArray(f))for(var g=0;g<f.length;++g)if(h.isDynamic(f[g])){d[c]=
h.unbox(f,c);return}e[c]=f}});return{dynamic:d,"static":e}}function e(a){for(;r.length<a;)r.push(null);return r}b(!!a,"invalid args to regl({...})");b.type(a,"object","invalid args to regl({...})");var d=c(a.context||{},!0),f=c(a.uniforms||{},!0),k=c(a.attributes||{},!1);a=c(function(a){function b(a){if(a in c){var e=c[a];delete c[a];Object.keys(e).forEach(function(b){c[a+"."+b]=e[b]})}}var c=g({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var l={gpuTime:0,cpuTime:0,count:0},m=bc.compile(a,k,f,d,l),n=m.draw,q=m.batch,p=m.scope,r=[];return g(function(a,c){var d;Yc&&b.raise("context lost");if("function"===typeof a)return p.call(this,null,a,0);if("function"===typeof c)if("number"===typeof a)for(d=0;d<a;++d)p.call(this,null,c,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)p.call(this,a[d],c,d);else return p.call(this,a,c,0);else if("number"===typeof a){if(0<a)return q.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return q.call(this,a,a.length)}else return n.call(this,a)},{stats:l,destroy:function(){m.destroy()}})}function cb(a,c){var d=0;bc.procs.poll();var e=c.color;e&&(ra.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),d|=16384);"depth"in c&&(ra.clearDepth(+c.depth),d|=256);"stencil"in c&&(ra.clearStencil(c.stencil|0),d|=1024);b(!!d,
"called regl.clear with no buffer specified");ra.clear(d)}function H(c){b.type(c,"function","regl.frame() callback must be a function");kb.push(c);k();return{cancel:function(){function d(){var b=a(kb,d);kb[b]=kb[kb.length-1];--kb.length;0>=kb.length&&w()}var e=a(kb,c);b(0<=e,"cannot cancel a frame twice");kb[e]=d}}}function O(){var a=Ua.viewport,b=Ua.scissor_box;a[0]=a[1]=b[0]=b[1]=0;P.viewportWidth=P.framebufferWidth=P.drawingBufferWidth=a[2]=b[2]=ra.drawingBufferWidth;P.viewportHeight=P.framebufferHeight=
P.drawingBufferHeight=a[3]=b[3]=ra.drawingBufferHeight}function f(){P.tick+=1;P.time=T();O();bc.procs.poll()}function m(){ba.refresh();O();bc.procs.refresh();L&&L.update()}function T(){return(c()-I)/1E3}console.log("REGL args are:",p);p=e(p);console.log("REGL configs are:",p);if(!p)return null;var ra=p.gl,na=ra.getContextAttributes(),Yc=ra.isContextLost(),pc=q(ra,p);if(!pc)return null;var la=n(),Pa=J(),Z=pc.extensions,L=ma(ra,Z),I=c(),U=ra.drawingBufferWidth,qa=ra.drawingBufferHeight,P={tick:0,time:0,
viewportWidth:U,viewportHeight:qa,framebufferWidth:U,framebufferHeight:qa,drawingBufferWidth:U,drawingBufferHeight:qa,pixelRatio:p.pixelRatio},U={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ub=ka(ra,Z),$a=da(ra,Pa,p,function(a){return y.destroyBuffer(a)}),R=l(ra,Z,$a,Pa),y=K(ra,Z,Ub,Pa,$a,R,U),ja=z(ra,la,Pa,p),ba=E(ra,Z,Ub,function(){bc.procs.poll()},P,Pa,p),xa=r(ra,Z,Ub,Pa,p),La=D(ra,Z,Ub,ba,xa,Pa),bc=db(ra,la,Z,Ub,$a,R,ba,La,{},y,ja,U,P,L,p),la=ha(ra,La,bc.procs.poll,P,na,Z,Ub),Ua=
bc.next,Y=ra.canvas,kb=[],ea=[],oa=[],fc=[p.onDestroy],hc=null;Y&&(Y.addEventListener("webglcontextlost",C,!1),Y.addEventListener("webglcontextrestored",V,!1));var tc=La.setFBO=A({framebuffer:h.define.call(null,1,"framebuffer")});m();na=g(A,{clear:function(a){b("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var c=0;6>c;++c)tc(g({framebuffer:a.framebuffer.faces[c]},a),cb);else tc(a,cb);else cb(null,
a)},prop:h.define.bind(null,1),context:h.define.bind(null,2),"this":h.define.bind(null,3),draw:A({}),buffer:function(a){return $a.create(a,34962,!1,!1)},elements:function(a){return R.create(a,!1)},texture:ba.create2D,cube:ba.createCube,renderbuffer:xa.create,framebuffer:La.create,framebufferCube:La.createCube,vao:y.createVAO,attributes:na,frame:H,on:function(a,c){b.type(c,"function","listener callback must be a function");var d;switch(a){case "frame":return H(c);case "lost":d=ea;break;case "restore":d=
oa;break;case "destroy":d=fc;break;default:b.raise("invalid event, must be one of frame,lost,restore,destroy")}d.push(c);return{cancel:function(){for(var a=0;a<d.length;++a)if(d[a]===c){d[a]=d[d.length-1];d.pop();break}}}},limits:Ub,hasExtension:function(a){return 0<=Ub.extensions.indexOf(a.toLowerCase())},read:la,destroy:function(){kb.length=0;w();Y&&(Y.removeEventListener("webglcontextlost",C),Y.removeEventListener("webglcontextrestored",V));ja.clear();La.clear();xa.clear();y.clear();ba.clear();
R.clear();$a.clear();L&&L.clear();fc.forEach(function(a){a()})},_gl:ra,_refresh:m,poll:function(){f();L&&L.update()},now:T,stats:Pa});p.onDone(null,na);return na}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,
"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

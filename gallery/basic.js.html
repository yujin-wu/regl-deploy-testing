<!DOCTYPE html>
      <html>
        <head>
          <title>example/basic.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function Z(ha,$a,b){function da(e,l){if(!$a[e]){if(!ha[e]){var q="function"==typeof require&&require;if(!l&&q)return q(e,!0);if(K)return K(e,!0);q=Error("Cannot find module '"+e+"'");throw q.code="MODULE_NOT_FOUND",q;}q=$a[e]={exports:{}};ha[e][0].call(q.exports,function(c){return da(ha[e][1][c]||c)},q,q.exports,Z,ha,$a,b)}return $a[e].exports}for(var K="function"==typeof require&&require,L=0;L<b.length;L++)da(b[L]);return da}return Z})()({1:[function(Z,ha,$a){Z=Z("../regl")();Z.clear({color:[0,
0,0,1],depth:1});Z({frag:"\n  precision mediump float;\n  uniform vec4 color;\n  void main () {\n    gl_FragColor = color;\n  }",vert:"\n  precision mediump float;\n  attribute vec2 position;\n  void main () {\n    gl_Position = vec4(position, 0, 1);\n  }",attributes:{position:[[-1,0],[0,-1],[1,1]]},uniforms:{color:[1,0,0,1]},count:3})()},{"../regl":38}],2:[function(Z,ha,$a){function b(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=
this.stride=this.offset=0}var da=Z("./util/sorted-object-keys"),K=Z("./util/check"),L=Z("./util/values"),e=Z("./constants/dtypes.json"),l=Z("./util/is-typed-array"),q=Z("./util/is-ndarray"),c=Z("./constants/primitives.json"),G="attributes elements offset count primitive instances".split(" ");ha.exports=function(H,B,U,n,v,y,ba){function w(f){if(f!==X.currentVAO){var x=B.oes_vertex_array_object;f?x.bindVertexArrayOES(f.vao):x.bindVertexArrayOES(null);X.currentVAO=f}}function T(f){if(f!==X.currentVAO){if(f)f.bindAttrs();
else{for(var x=B.angle_instanced_arrays,k=0;k<u.length;++k){var c=u[k];c.buffer?(H.enableVertexAttribArray(k),c.buffer.bind(),H.vertexAttribPointer(k,c.size,c.type,c.normalized,c.stride,c.offfset),x&&c.divisor&&x.vertexAttribDivisorANGLE(k,c.divisor)):(H.disableVertexAttribArray(k),H.vertexAttrib4f(k,c.x,c.y,c.z,c.w))}ba.elements?H.bindBuffer(34963,ba.elements.buffer.buffer):H.bindBuffer(34963,null)}X.currentVAO=f}}function z(){L(h).forEach(function(f){f.destroy()})}function Q(){this.id=++S;this.attributes=
[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var f=B.oes_vertex_array_object;this.vao=f?f.createVertexArrayOES():null;h[this.id]=this;this.buffers=[]}function ia(){B.oes_vertex_array_object&&L(h).forEach(function(f){f.refresh()})}var k=U.maxAttributes,u=Array(k);for(U=0;U<k;++U)u[U]=new b;var S=0,h={},X={Record:b,scope:{},state:u,currentVAO:null,targetVAO:null,restore:B.oes_vertex_array_object?ia:function(){},createVAO:function(f){function x(f){var u;
if(Array.isArray(f))u=f,h.elements&&h.ownsElements&&h.elements.destroy(),h.elements=null,h.ownsElements=!1,h.offset=0,h.count=0,h.instances=-1,h.primitive=4;else{K("object"===typeof f,"invalid arguments for create vao");K("attributes"in f,"must specify attributes for vao");if(f.elements){var d=f.elements;h.ownsElements?("function"===typeof d&&"elements"===d._reglType?h.elements.destroy():h.elements(d),h.ownsElements=!1):y.getElements(f.elements)?(h.elements=f.elements,h.ownsElements=!1):(h.elements=
y.create(f.elements),h.ownsElements=!0)}else h.elements=null,h.ownsElements=!1;u=f.attributes;h.offset=0;h.count=-1;h.instances=-1;h.primitive=4;h.elements&&(h.count=h.elements._elements.vertCount,h.primitive=h.elements._elements.primType);"offset"in f&&(h.offset=f.offset|0);"count"in f&&(h.count=f.count|0);"instances"in f&&(h.instances=f.instances|0);"primitive"in f&&(K(f.primitive in c,"bad primitive type: "+f.primitive),h.primitive=c[f.primitive]);K.optional(function(){for(var a=da(f),d=0;d<a.length;++d)K(0<=
G.indexOf(a[d]),'invalid option for vao: "'+a[d]+'" valid options are '+G)});K(Array.isArray(u),"attributes must be an array")}K(u.length<k,"too many attributes");K(0<u.length,"must specify at least one attribute");var d={},t=h.attributes;t.length=u.length;for(var a=0;a<u.length;++a){var S=u[a],A=t[a]=new b,z=S.data||S;if(Array.isArray(z)||l(z)||q(z)){var w;h.buffers[a]&&(w=h.buffers[a],l(z)&&w._buffer.byteLength>=z.byteLength?w.subdata(z):(w.destroy(),h.buffers[a]=null));h.buffers[a]||(w=h.buffers[a]=
v.create(S,34962,!1,!0));A.buffer=v.getBuffer(w);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;d[a]=1}else v.getBuffer(S)?(A.buffer=v.getBuffer(S),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=0,A.stride=0,A.divisor=0,A.state=1):v.getBuffer(S.buffer)?(A.buffer=v.getBuffer(S.buffer),A.size=(+S.size||A.buffer.dimension)|0,A.normalized=!!S.normalized||!1,"type"in S?(K.parameter(S.type,e,"invalid buffer type"),
A.type=e[S.type]):A.type=A.buffer.dtype,A.offset=(S.offset||0)|0,A.stride=(S.stride||0)|0,A.divisor=(S.divisor||0)|0,A.state=1,K(1<=A.size&&4>=A.size,"size must be between 1 and 4"),K(0<=A.offset,"invalid offset"),K(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),K(0<=A.divisor,"divisor must be positive"),K(!A.divisor||!!B.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in S?(K(0<a,"first attribute must not be a constant"),A.x=+S.x||0,A.y=+S.y||0,
A.z=+S.z||0,A.w=+S.w||0,A.state=2):K(!1,"invalid attribute spec for location "+a)}for(w=0;w<h.buffers.length;++w)!d[w]&&h.buffers[w]&&(h.buffers[w].destroy(),h.buffers[w]=null);h.refresh();return x}var h=new Q;n.vaoCount+=1;x.destroy=function(){for(var f=0;f<h.buffers.length;++f)h.buffers[f]&&h.buffers[f].destroy();h.buffers.length=0;h.ownsElements&&(h.elements.destroy(),h.elements=null,h.ownsElements=!1);h.destroy()};x._vao=h;x._reglType="vao";return x(f)},getVAO:function(f){return"function"===typeof f&&
f._vao?f._vao:null},destroyBuffer:function(f){for(var x=0;x<u.length;++x){var c=u[x];c.buffer===f&&(H.disableVertexAttribArray(x),c.buffer=null)}},setVAO:B.oes_vertex_array_object?w:T,clear:B.oes_vertex_array_object?z:function(){}};Q.prototype.bindAttrs=function(){for(var f=B.angle_instanced_arrays,x=this.attributes,c=0;c<x.length;++c){var l=x[c];l.buffer?(H.enableVertexAttribArray(c),H.bindBuffer(34962,l.buffer.buffer),H.vertexAttribPointer(c,l.size,l.type,l.normalized,l.stride,l.offset),f&&l.divisor&&
f.vertexAttribDivisorANGLE(c,l.divisor)):(H.disableVertexAttribArray(c),H.vertexAttrib4f(c,l.x,l.y,l.z,l.w))}for(f=x.length;f<k;++f)H.disableVertexAttribArray(f);(f=y.getElements(this.elements))?H.bindBuffer(34963,f.buffer.buffer):H.bindBuffer(34963,null)};Q.prototype.refresh=function(){var f=B.oes_vertex_array_object;f&&(f.bindVertexArrayOES(this.vao),this.bindAttrs(),X.currentVAO=null,f.bindVertexArrayOES(null))};Q.prototype.destroy=function(){if(this.vao){var f=B.oes_vertex_array_object;this===
X.currentVAO&&(X.currentVAO=null,f.bindVertexArrayOES(null));f.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);h[this.id]&&(delete h[this.id],--n.vaoCount)};return X}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(Z,ha,$a){function b(c){return U[Object.prototype.toString.call(c)]|
0}function da(c,l){for(var q=0;q<l.length;++q)c[q]=l[q]}function K(c,l,q,e,b,v,k){for(var u=0,S=0;S<q;++S)for(var h=0;h<e;++h)c[u++]=l[b*S+v*h+k]}var L=Z("./util/sorted-object-keys"),e=Z("./util/check"),l=Z("./util/is-typed-array"),q=Z("./util/is-ndarray"),c=Z("./util/values"),G=Z("./util/pool");$a=Z("./util/flatten");var H=$a.flatten,B=$a.shape,U=Z("./constants/arraytypes.json"),n=Z("./constants/dtypes.json"),v=Z("./constants/usage.json"),y=[];y[5120]=1;y[5122]=2;y[5124]=4;y[5121]=1;y[5123]=2;y[5125]=
4;y[5126]=4;ha.exports=function(U,w,T,z){function Q(f){this.id=S++;this.buffer=U.createBuffer();this.type=f;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;T.profile&&(this.stats={size:0})}function ia(f,c,k){f.byteLength=c.byteLength;U.bufferData(f.type,c,k)}function k(f,c,k,h,u,d){f.usage=k;if(Array.isArray(c)){if(f.dtype=h||5126,0<c.length)if(Array.isArray(c[0])){u=B(c);for(var t=h=1;t<u.length;++t)h*=u[t];f.dimension=h;c=H(c,u,f.dtype);ia(f,c,k);d?f.persistentData=
c:G.freeType(c)}else"number"===typeof c[0]?(f.dimension=u,u=G.allocType(f.dtype,c.length),da(u,c),ia(f,u,k),d?f.persistentData=u:G.freeType(u)):l(c[0])?(f.dimension=c[0].length,f.dtype=h||b(c[0])||5126,c=H(c,[c.length,c[0].length],f.dtype),ia(f,c,k),d?f.persistentData=c:G.freeType(c)):e.raise("invalid buffer data")}else if(l(c))f.dtype=h||b(c),f.dimension=u,ia(f,c,k),d&&(f.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(q(c)){u=c.shape;var a=c.stride,t=c.offset,S=0,A=0,z=0,w=0;1===
u.length?(S=u[0],A=1,z=a[0],w=0):2===u.length?(S=u[0],A=u[1],z=a[0],w=a[1]):e.raise("invalid shape");f.dtype=h||b(c.data)||5126;f.dimension=A;u=G.allocType(f.dtype,S*A);K(u,c.data,S,A,z,w,t);ia(f,u,k);d?f.persistentData=u:G.freeType(u)}else c instanceof ArrayBuffer?(f.dtype=5121,f.dimension=u,ia(f,c,k),d&&(f.persistentData=new Uint8Array(new Uint8Array(c)))):e.raise("invalid buffer data")}function u(c){w.bufferCount--;z(c);var k=c.buffer;e(k,"buffer must not be deleted already");U.deleteBuffer(k);
c.buffer=null;delete h[c.id]}var S=0,h={};Q.prototype.bind=function(){U.bindBuffer(this.type,this.buffer)};Q.prototype.destroy=function(){u(this)};var X=[];T.profile&&(w.getTotalBufferSize=function(){var c=0;L(h).forEach(function(k){c+=h[k].stats.size});return c});return{create:function(c,x,S,z){function F(a){var d=35044,c=null,f=0,h=0,x=1;Array.isArray(a)||l(a)||q(a)||a instanceof ArrayBuffer?c=a:"number"===typeof a?f=a|0:a&&(e.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(e(null===c||Array.isArray(c)||l(c)||q(c),"invalid data for buffer"),c=a.data),"usage"in a&&(e.parameter(a.usage,v,"invalid buffer usage"),d=v[a.usage]),"type"in a&&(e.parameter(a.type,n,"invalid buffer type"),h=n[a.type]),"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),x=a.dimension|0),"length"in a&&(e.nni(f,"buffer length must be a nonnegative integer"),f=a.length|0));t.bind();c?k(t,c,d,h,x,z):(f&&U.bufferData(t.type,f,d),t.dtype=h||5121,t.usage=d,t.dimension=x,t.byteLength=
f);T.profile&&(t.stats.size=t.byteLength*y[t.dtype]);return F}function d(a,d){e(d+a.byteLength<=t.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+d+" to a buffer of size "+t.byteLength);U.bufferSubData(t.type,d,a)}w.bufferCount++;var t=new Q(x);h[t.id]=t;S||F(c);F._reglType="buffer";F._buffer=t;F.subdata=function(a,c){var f=(c||0)|0,k;t.bind();if(l(a)||a instanceof ArrayBuffer)d(a,f);else if(Array.isArray(a)){if(0<a.length)if("number"===
typeof a[0]){var h=G.allocType(t.dtype,a.length);da(h,a);d(h,f);G.freeType(h)}else Array.isArray(a[0])||l(a[0])?(k=B(a),h=H(a,k,t.dtype),d(h,f),G.freeType(h)):e.raise("invalid buffer data")}else if(q(a)){k=a.shape;var x=a.stride,u=h=0,R=0,O=0;1===k.length?(h=k[0],u=1,R=x[0],O=0):2===k.length?(h=k[0],u=k[1],R=x[0],O=x[1]):e.raise("invalid shape");k=Array.isArray(a.data)?t.dtype:b(a.data);k=G.allocType(k,h*u);K(k,a.data,h,u,R,O,a.offset);d(k,f);G.freeType(k)}else e.raise("invalid data for buffer subdata");
return F};T.profile&&(F.stats=t.stats);F.destroy=function(){u(t)};return F},createStream:function(c,l){var h=X.pop();h||(h=new Q(c));h.bind();k(h,l,35040,0,1,!1);return h},destroyStream:function(c){X.push(c)},clear:function(){c(h).forEach(u);X.forEach(u)},getBuffer:function(c){return c&&c._buffer instanceof Q?c._buffer:null},restore:function(){c(h).forEach(function(c){c.buffer=U.createBuffer();U.bindBuffer(c.type,c.buffer);U.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:k}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(Z,ha,$a){ha.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(Z,ha,$a){ha.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(Z,ha,$a){ha.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(Z,ha,$a){ha.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(Z,ha,$a){function b(c){return Array.isArray(c)||U(c)||
n(c)}function da(c){return c.sort(function(c,k){return"viewport"===c?-1:"viewport"===k?1:c<k?-1:1})}function K(c,k,l,h){this.thisDep=c;this.contextDep=k;this.propDep=l;this.append=h}function L(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function e(c){return new K(!1,!1,!1,c)}function l(c,k){var l=c.type;if(0===l)return l=c.data.length,new K(!0,1<=l,2<=l,k);if(4===l)return l=c.data,new K(l.thisDep,l.contextDep,l.propDep,k);if(5===l)return new K(!1,!1,!1,k);if(6===l){for(var h=l=!1,q=!1,d=0;d<
c.data.length;++d){var t=c.data[d];1===t.type?q=!0:2===t.type?h=!0:3===t.type?l=!0:0===t.type?(l=!0,t=t.data,1<=t&&(h=!0),2<=t&&(q=!0)):4===t.type&&(l=l||t.data.thisDep,h=h||t.data.contextDep,q=q||t.data.propDep)}return new K(l,h,q,k)}return new K(3===l,2===l,1===l,k)}var q=Z("./util/sorted-object-keys"),c=Z("./util/check"),G=Z("./util/extend"),H=Z("./util/codegen"),B=Z("./util/loop"),U=Z("./util/is-typed-array"),n=Z("./util/is-ndarray"),v=Z("./util/is-array-like"),y=Z("./dynamic"),ba=Z("./constants/primitives.json"),
w=Z("./constants/dtypes.json"),T=["x","y","z","w"],z="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Q={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
ia="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),k={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,
always:519},u={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},S={frag:35632,vert:35633},h={cw:2304,ccw:2305},X=new K(!1,!1,!1,function(){});ha.exports=function(f,x,n,C,F,d,t,a,U,A,ja,Cc,W,ea,R){function O(a){return a.replace(".","_")}function D(a,d,c){var g=O(a);ua.push(a);V[g]=ma[g]=!!c;Ia[g]=d}function g(a,d,c){var g=O(a);ua.push(a);Array.isArray(c)?(ma[g]=c.slice(),V[g]=c.slice()):ma[g]=V[g]=c;za[g]=d}function N(){var a=
H(),d=a.link,g=a.global;a.id=yd++;a.batchId="0";var m=d(mb),r=a.shared={props:"a0"};q(mb).forEach(function(a){r[a]=g.def(m,".",a)});c.optional(function(){a.CHECK=d(c);a.commandStr=c.guessCommand();a.command=d(a.commandStr);a.assert=function(a,c,g){a("if(!(",c,"))",this.CHECK,".commandRaise(",d(g),",",this.command,");")};ca.invalidBlendCombinations=ia});var k=a.next={},p=a.current={};q(za).forEach(function(a){Array.isArray(ma[a])&&(k[a]=g.def(r.next,".",a),p[a]=g.def(r.current,".",a))});var l=a.constants=
{};q(ca).forEach(function(a){l[a]=g.def(JSON.stringify(ca[a]))});a.invoke=function(c,g){switch(g.type){case 0:var m=["this",r.context,r.props,a.batchId];return c.def(d(g.data),".call(",m.slice(0,Math.max(g.data.length+1,4)),")");case 1:return c.def(r.props,g.data);case 2:return c.def(r.context,g.data);case 3:return c.def("this",g.data);case 4:return g.data.append(a,c),g.data.ref;case 5:return g.data.toString();case 6:return g.data.map(function(d){return a.invoke(c,d)})}};a.attribCache={};var h={};
a.scopeAttrib=function(a){a=x.id(a);if(a in h)return h[a];var c=A.scope[a];c||(c=A.scope[a]=new sa);return h[a]=d(c)};return a}function M(a){var d=a["static"];a=a.dynamic;var c;if("profile"in d){var g=!!d.profile;c=e(function(a,d){return g});c.enable=g}else if("profile"in a){var r=a.profile;c=l(r,function(a,d){return a.invoke(d,r)})}return c}function Ca(d,g){var r=d["static"],m=d.dynamic;if("framebuffer"in r){var k=r.framebuffer;return k?(k=a.getFramebuffer(k),c.command(k,"invalid framebuffer object"),
e(function(a,d){var c=a.link(k),g=a.shared;d.set(g.framebuffer,".next",c);g=g.context;d.set(g,".framebufferWidth",c+".width");d.set(g,".framebufferHeight",c+".height");return c})):e(function(a,d){var c=a.shared;d.set(c.framebuffer,".next","null");c=c.context;d.set(c,".framebufferWidth",c+".drawingBufferWidth");d.set(c,".framebufferHeight",c+".drawingBufferHeight");return"null"})}if("framebuffer"in m){var p=m.framebuffer;return l(p,function(a,d){var g=a.invoke(d,p),r=a.shared,m=r.framebuffer,k=d.def(m,
".getFramebuffer(",g,")");c.optional(function(){a.assert(d,"!"+g+"||"+k,"invalid framebuffer object")});d.set(m,".next",k);r=r.context;d.set(r,".framebufferWidth",k+"?"+k+".width:"+r+".drawingBufferWidth");d.set(r,".framebufferHeight",k+"?"+k+".height:"+r+".drawingBufferHeight");return k})}return null}function qa(a,d,g){function r(a){if(a in k){var p=k[a];c.commandType(p,"object","invalid "+a,g.commandStr);var h=!0,f=p.x|0,I=p.y|0,E,x;"width"in p?(E=p.width|0,c.command(0<=E,"invalid "+a,g.commandStr)):
h=!1;"height"in p?(x=p.height|0,c.command(0<=x,"invalid "+a,g.commandStr)):h=!1;return new K(!h&&d&&d.thisDep,!h&&d&&d.contextDep,!h&&d&&d.propDep,function(a,d){var c=a.shared.context,g=E;"width"in p||(g=d.def(c,".","framebufferWidth","-",f));var r=x;"height"in p||(r=d.def(c,".","framebufferHeight","-",I));return[f,I,g,r]})}if(a in m){var na=m[a],h=l(na,function(d,g){var r=d.invoke(g,na);c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});var k=d.shared.context,m=g.def(r,
".x|0"),p=g.def(r,".y|0"),l=g.def('"width" in ',r,"?",r,".width|0:","(",k,".","framebufferWidth","-",m,")"),h=g.def('"height" in ',r,"?",r,".height|0:","(",k,".","framebufferHeight","-",p,")");c.optional(function(){d.assert(g,l+">=0&&"+h+">=0","invalid "+a)});return[m,p,l,h]});d&&(h.thisDep=h.thisDep||d.thisDep,h.contextDep=h.contextDep||d.contextDep,h.propDep=h.propDep||d.propDep);return h}return d?new K(d.thisDep,d.contextDep,d.propDep,function(a,d){var c=a.shared.context;return[0,0,d.def(c,".",
"framebufferWidth"),d.def(c,".","framebufferHeight")]}):null}var k=a["static"],m=a.dynamic;if(a=r("viewport")){var p=a;a=new K(a.thisDep,a.contextDep,a.propDep,function(a,d){var c=p.append(a,d),g=a.shared.context;d.set(g,".viewportWidth",c[2]);d.set(g,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:r("scissor.box")}}function m(a,d){var g=a["static"];if("string"===typeof g.frag&&"string"===typeof g.vert){if(0<q(d.dynamic).length)return null;var g=d["static"],r=q(g);if(0<r.length&&
"number"===typeof g[r[0]]){for(var k=[],m=0;m<r.length;++m)c("number"===typeof g[r[m]],"must specify all vertex attribute locations when using vaos"),k.push([g[r[m]]|0,r[m]]);return k}}return null}function J(a,d,g){function r(a){if(a in k){var d=x.id(k[a]);c.optional(function(){ja.shader(S[a],d,c.guessCommand())});var g=e(function(){return d});g.id=d;return g}if(a in m){var p=m[a];return l(p,function(d,g){var r=d.invoke(g,p),k=g.def(d.shared.strings,".id(",r,")");c.optional(function(){g(d.shared.shader,
".shader(",S[a],",",k,",",d.command,");")});return k})}return null}var k=a["static"],m=a.dynamic,p=r("frag"),h=r("vert"),f=null;L(p)&&L(h)?(f=ja.program(h.id,p.id,null,g),a=e(function(a,d){return a.link(f)})):a=new K(p&&p.thisDep||h&&h.thisDep,p&&p.contextDep||h&&h.contextDep,p&&p.propDep||h&&h.propDep,function(a,d){var g=a.shared.shader,r;r=p?p.append(a,d):d.def(g,".","frag");var k;k=h?h.append(a,d):d.def(g,".","vert");var m=g+".program("+k+","+r;c.optional(function(){m+=","+a.command});return d.def(m+
")")});return{frag:p,vert:h,progVar:a,program:f}}function aa(a,g){function r(a,d){if(a in k){var E=k[a]|0;d?p.offset=E:p.instances=E;c.command(!d||0<=E,"invalid "+a,g.commandStr);return e(function(a,c){d&&(a.OFFSET=E);return E})}if(a in m){var x=m[a];return l(x,function(g,r){var k=g.invoke(r,x);d&&(g.OFFSET=k,c.optional(function(){g.assert(r,k+">=0","invalid "+a)}));return k})}if(d){if(I)return e(function(a,d){return a.OFFSET=0});if(h)return new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+
".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(h)return new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var k=a["static"],m=a.dynamic,p={},h=!1,f=function(){if("vao"in k){var a=k.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));h=!0;p.vao=a;return e(function(d){var c=A.getVAO(a);return c?d.link(c):"null"})}if("vao"in m){h=!0;var d=m.vao;return l(d,function(a,c){var g=a.invoke(c,
d);return c.def(a.shared.vao+".getVAO("+g+")")})}return null}(),I=!1,E=function(){if("elements"in k){var a=k.elements;p.elements=a;if(b(a)){var r=p.elements=d.create(a,!0),a=d.getElements(r);I=!0}else a&&(a=d.getElements(a),I=!0,c.command(a,"invalid elements",g.commandStr));r=e(function(d,c){if(a){var g=d.link(a);return d.ELEMENTS=g}return d.ELEMENTS=null});r.value=a;return r}if("elements"in m){I=!0;var E=m.elements;return l(E,function(a,d){var g=a.shared,r=g.isBufferArgs,g=g.elements,k=a.invoke(d,
E),m=d.def("null"),r=d.def(r,"(",k,")"),p=a.cond(r).then(m,"=",g,".createStream(",k,");")["else"](m,"=",g,".getElements(",k,");");c.optional(function(){a.assert(p["else"],"!"+k+"||"+m,"invalid elements")});d.entry(p);d.exit(a.cond(r).then(g,".destroyStream(",m,");"));return a.ELEMENTS=m})}return h?new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),x=r("offset",!0),na=function(){if("primitive"in
k){var a=k.primitive;p.primitive=a;c.commandParameter(a,ba,"invalid primitve",g.commandStr);return e(function(d,c){return ba[a]})}if("primitive"in m){var d=m.primitive;return l(d,function(a,g){var r=a.constants.primTypes,k=a.invoke(g,d);c.optional(function(){a.assert(g,k+" in "+r,"invalid primitive, must be one of "+q(ba))});return g.def(r,"[",k,"]")})}return I?L(E)?E.value?e(function(a,d){return d.def(a.ELEMENTS,".primType")}):e(function(){return 4}):new K(E.thisDep,E.contextDep,E.propDep,function(a,
d){var c=a.ELEMENTS;return d.def(c,"?",c,".primType:",4)}):h?new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),t=function(){if("count"in k){var a=k.count|0;p.count=a;c.command("number"===typeof a&&0<=a,"invalid vertex count",g.commandStr);return e(function(){return a})}if("count"in m){var d=m.count;return l(d,function(a,g){var r=a.invoke(g,d);c.optional(function(){a.assert(g,"typeof "+r+'==="number"&&'+r+
">=0&&"+r+"===("+r+"|0)","invalid vertex count")});return r})}if(I){if(L(E)){if(E)return x?new K(x.thisDep,x.contextDep,x.propDep,function(a,d){var g=d.def(a.ELEMENTS,".vertCount-",a.OFFSET);c.optional(function(){a.assert(d,g+">=0","invalid vertex offset/element buffer too small")});return g}):e(function(a,d){return d.def(a.ELEMENTS,".vertCount")});var r=e(function(){return-1});c.optional(function(){r.MISSING=!0});return r}var na=new K(E.thisDep||x.thisDep,E.contextDep||x.contextDep,E.propDep||x.propDep,
function(a,d){var c=a.ELEMENTS;return a.OFFSET?d.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):d.def(c,"?",c,".vertCount:-1")});c.optional(function(){na.DYNAMIC=!0});return na}return h?new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),u=r("instances",!1);return{elements:E,primitive:na,count:t,instances:u,offset:x,vao:f,vaoActive:h,elementsActive:I,"static":p}}function P(a,d){var g=a["static"],r=a.dynamic,m={};ua.forEach(function(a){function p(d,
c){if(a in g){var k=d(g[a]);m[f]=e(function(){return k})}else if(a in r){var h=r[a];m[f]=l(h,function(a,d){return c(a,d,a.invoke(d,h))})}}var f=O(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return p(function(g){c.commandType(g,"boolean",a,d.commandStr);return g},function(d,g,r){c.optional(function(){d.assert(g,"typeof "+r+'==="boolean"',
"invalid flag "+a,d.commandStr)});return r});case "depth.func":return p(function(g){c.commandParameter(g,k,"invalid "+a,d.commandStr);return k[g]},function(d,g,r){var p=d.constants.compareFuncs;c.optional(function(){d.assert(g,r+" in "+p,"invalid "+a+", must be one of "+q(k))});return g.def(p,"[",r,"]")});case "depth.range":return p(function(a){c.command(v(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",d.commandStr);return a},function(a,d,g){c.optional(function(){a.assert(d,
a.shared.isArrayLike+"("+g+")&&"+g+".length===2&&typeof "+g+'[0]==="number"&&typeof '+g+'[1]==="number"&&'+g+"[0]<="+g+"[1]","depth range must be a 2d array")});var r=d.def("+",g,"[0]"),p=d.def("+",g,"[1]");return[r,p]});case "blend.func":return p(function(a){c.commandType(a,"object","blend.func",d.commandStr);var g="srcRGB"in a?a.srcRGB:a.src,r="srcAlpha"in a?a.srcAlpha:a.src,p="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;c.commandParameter(g,Q,f+".srcRGB",d.commandStr);c.commandParameter(r,
Q,f+".srcAlpha",d.commandStr);c.commandParameter(p,Q,f+".dstRGB",d.commandStr);c.commandParameter(a,Q,f+".dstAlpha",d.commandStr);c.command(-1===ia.indexOf(g+", "+p),"unallowed blending combination (srcRGB, dstRGB) = ("+g+", "+p+")",d.commandStr);return[Q[g],Q[p],Q[r],Q[a]]},function(d,g,r){function p(m,h){var f=g.def('"',m,h,'" in ',r,"?",r,".",m,h,":",r,".",m);c.optional(function(){d.assert(g,f+" in "+k,"invalid "+a+"."+m+h+", must be one of "+q(Q))});return f}var k=d.constants.blendFuncs;c.optional(function(){d.assert(g,
r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var m=p("src","RGB"),h=p("dst","RGB");c.optional(function(){d.assert(g,d.constants.invalidBlendCombinations+".indexOf("+m+'+", "+'+h+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=g.def(k,"[",m,"]"),l=g.def(k,"[",p("src","Alpha"),"]"),I=g.def(k,"[",h,"]"),E=g.def(k,"[",p("dst","Alpha"),"]");return[f,I,l,E]});case "blend.equation":return p(function(g){if("string"===typeof g)return c.commandParameter(g,
Da,"invalid "+a,d.commandStr),[Da[g],Da[g]];if("object"===typeof g)return c.commandParameter(g.rgb,Da,a+".rgb",d.commandStr),c.commandParameter(g.alpha,Da,a+".alpha",d.commandStr),[Da[g.rgb],Da[g.alpha]];c.commandRaise("invalid blend.equation",d.commandStr)},function(d,g,r){var p=d.constants.blendEquations,k=g.def(),m=g.def(),h=d.cond("typeof ",r,'==="string"');c.optional(function(){function g(a,c,r){d.assert(a,r+" in "+p,"invalid "+c+", must be one of "+q(Da))}g(h.then,a,r);d.assert(h["else"],r+
"&&typeof "+r+'==="object"',"invalid "+a);g(h["else"],a+".rgb",r+".rgb");g(h["else"],a+".alpha",r+".alpha")});h.then(k,"=",m,"=",p,"[",r,"];");h["else"](k,"=",p,"[",r,".rgb];",m,"=",p,"[",r,".alpha];");g(h);return[k,m]});case "blend.color":return p(function(a){c.command(v(a)&&4===a.length,"blend.color must be a 4d array",d.commandStr);return B(4,function(d){return+a[d]})},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===4","blend.color must be a 4d array")});
return B(4,function(a){return d.def("+",g,"[",a,"]")})});case "stencil.mask":return p(function(a){c.commandType(a,"number",f,d.commandStr);return a|0},function(a,d,g){c.optional(function(){a.assert(d,"typeof "+g+'==="number"',"invalid stencil.mask")});return d.def(g,"|0")});case "stencil.func":return p(function(g){c.commandType(g,"object",f,d.commandStr);var r=g.cmp||"keep",p=g.ref||0;g="mask"in g?g.mask:-1;c.commandParameter(r,k,a+".cmp",d.commandStr);c.commandType(p,"number",a+".ref",d.commandStr);
c.commandType(g,"number",a+".mask",d.commandStr);return[k[r],p,g]},function(a,d,g){var r=a.constants.compareFuncs;c.optional(function(){function c(){a.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(g+"&&typeof ",g,'==="object"');c('!("cmp" in ',g,")||(",g,".cmp in ",r,")")});var p=d.def('"cmp" in ',g,"?",r,"[",g,".cmp]",":",7680),k=d.def(g,".ref|0"),m=d.def('"mask" in ',g,"?",g,".mask|0:-1");return[p,k,m]});case "stencil.opFront":case "stencil.opBack":return p(function(g){c.commandType(g,
"object",f,d.commandStr);var r=g.fail||"keep",p=g.zfail||"keep";g=g.zpass||"keep";c.commandParameter(r,u,a+".fail",d.commandStr);c.commandParameter(p,u,a+".zfail",d.commandStr);c.commandParameter(g,u,a+".zpass",d.commandStr);return["stencil.opBack"===a?1029:1028,u[r],u[p],u[g]]},function(d,g,r){function p(m){c.optional(function(){d.assert(g,'!("'+m+'" in '+r+")||("+r+"."+m+" in "+k+")","invalid "+a+"."+m+", must be one of "+q(u))});return g.def('"',m,'" in ',r,"?",k,"[",r,".",m,"]:",7680)}var k=d.constants.stencilOps;
c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,p("fail"),p("zfail"),p("zpass")]});case "polygonOffset.offset":return p(function(a){c.commandType(a,"object",f,d.commandStr);var g=a.factor|0;a=a.units|0;c.commandType(g,"number",f+".factor",d.commandStr);c.commandType(a,"number",f+".units",d.commandStr);return[g,a]},function(d,g,r){c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});var p=g.def(r,".factor|0"),
k=g.def(r,".units|0");return[p,k]});case "cull.face":return p(function(a){var g=0;"front"===a?g=1028:"back"===a&&(g=1029);c.command(!!g,f,d.commandStr);return g},function(a,d,g){c.optional(function(){a.assert(d,g+'==="front"||'+g+'==="back"',"invalid cull.face")});return d.def(g,'==="front"?',1028,":",1029)});case "lineWidth":return p(function(a){c.command("number"===typeof a&&a>=C.lineWidthDims[0]&&a<=C.lineWidthDims[1],"invalid line width, must be a positive number between "+C.lineWidthDims[0]+
" and "+C.lineWidthDims[1],d.commandStr);return a},function(a,d,g){c.optional(function(){a.assert(d,"typeof "+g+'==="number"&&'+g+">="+C.lineWidthDims[0]+"&&"+g+"<="+C.lineWidthDims[1],"invalid line width")});return g});case "frontFace":return p(function(a){c.commandParameter(a,h,f,d.commandStr);return h[a]},function(a,d,g){c.optional(function(){a.assert(d,g+'==="cw"||'+g+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(g+'==="cw"?2304:2305')});case "colorMask":return p(function(a){c.command(v(a)&&
4===a.length,"color.mask must be length 4 array",d.commandStr);return a.map(function(a){return!!a})},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===4","invalid color.mask")});return B(4,function(a){return"!!"+g+"["+a+"]"})});case "sample.coverage":return p(function(a){c.command("object"===typeof a&&a,f,d.commandStr);var g="value"in a?a.value:1;a=!!a.invert;c.command("number"===typeof g&&0<=g&&1>=g,"sample.coverage.value must be a number between 0 and 1",
d.commandStr);return[g,a]},function(a,d,g){c.optional(function(){a.assert(d,g+"&&typeof "+g+'==="object"',"invalid sample.coverage")});var r=d.def('"value" in ',g,"?+",g,".value:1"),p=d.def("!!",g,".invert");return[r,p]})}});return m}function la(a,d){var g=a["static"],r=a.dynamic,p={};q(g).forEach(function(a){var r=g[a],k;if("number"===typeof r||"boolean"===typeof r)k=e(function(){return r});else if("function"===typeof r){var m=r._reglType;"texture2d"===m||"textureCube"===m?k=e(function(a){return a.link(r)}):
"framebuffer"===m||"framebufferCube"===m?(c.command(0<r.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',d.commandStr),k=e(function(a){return a.link(r.color[0])})):c.commandRaise('invalid data for uniform "'+a+'"',d.commandStr)}else v(r)?k=e(function(d){return d.global.def("[",B(r.length,function(g){c.command("number"===typeof r[g]||"boolean"===typeof r[g],"invalid uniform "+a,d.commandStr);return r[g]}),"]")}):c.commandRaise('invalid or missing data for uniform "'+
a+'"',d.commandStr);k.value=r;p[a]=k});q(r).forEach(function(a){var d=r[a];p[a]=l(d,function(a,g){return a.invoke(g,d)})});return p}function ra(a,d){var g=a["static"],r=a.dynamic,p={};q(g).forEach(function(a){var r=g[a],k=x.id(a),m=new sa;if(b(r))m.state=1,m.buffer=F.getBuffer(F.create(r,34962,!1,!0)),m.type=0;else{var h=F.getBuffer(r);if(h)m.state=1,m.buffer=h,m.type=0;else if(c.command("object"===typeof r&&r,"invalid data for attribute "+a,d.commandStr),"constant"in r){var f=r.constant;m.buffer=
"null";m.state=2;"number"===typeof f?m.x=f:(c.command(v(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,d.commandStr),T.forEach(function(a,d){d<f.length&&(m[a]=f[d])}))}else{h=b(r.buffer)?F.getBuffer(F.create(r.buffer,34962,!1,!0)):F.getBuffer(r.buffer);c.command(!!h,'missing buffer for attribute "'+a+'"',d.commandStr);var l=r.offset|0;c.command(0<=l,'invalid offset for attribute "'+a+'"',d.commandStr);var I=r.stride|0;c.command(0<=I&&256>I,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',
d.commandStr);var E=r.size|0;c.command(!("size"in r)||0<E&&4>=E,'invalid size for attribute "'+a+'", must be 1,2,3,4',d.commandStr);var na=!!r.normalized,t=0;"type"in r&&(c.commandParameter(r.type,w,"invalid type for attribute "+a,d.commandStr),t=w[r.type]);var u=r.divisor|0;c.optional(function(){"divisor"in r&&(c.command(0===u||oa,'cannot specify divisor for attribute "'+a+'", instancing not supported',d.commandStr),c.command(0<=u,'invalid divisor for attribute "'+a+'"',d.commandStr));var g=d.commandStr,
p="buffer offset divisor normalized type size stride".split(" ");q(r).forEach(function(d){c.command(0<=p.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+a+'" (valid parameters are '+p+")",g)})});m.buffer=h;m.state=1;m.size=E;m.normalized=na;m.type=t||h.dtype;m.offset=l;m.stride=I;m.divisor=u}}p[a]=e(function(a,d){var g=a.attribCache;if(k in g)return g[k];var r={isStream:!1};q(m).forEach(function(a){r[a]=m[a]});m.buffer&&(r.buffer=a.link(m.buffer),r.type=r.type||r.buffer+".dtype");return g[k]=
r})});q(r).forEach(function(a){var d=r[a];p[a]=l(d,function(g,r){function p(a){r(I[a],"=",m,".",a,"|0;")}var m=g.invoke(r,d),k=g.shared,h=g.constants,f=k.isBufferArgs,l=k.buffer;c.optional(function(){g.assert(r,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+f+"("+m+")||"+l+".getBuffer("+m+")||"+l+".getBuffer("+m+".buffer)||"+f+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+k.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+a+'"')});var I=
{isStream:r.def(!1)},E=new sa;E.state=1;q(E).forEach(function(a){I[a]=r.def(""+E[a])});var x=I.buffer,na=I.type;r("if(",f,"(",m,")){",I.isStream,"=true;",x,"=",l,".createStream(",34962,",",m,");",na,"=",x,".dtype;","}else{",x,"=",l,".getBuffer(",m,");","if(",x,"){",na,"=",x,".dtype;",'}else if("constant" in ',m,"){",I.state,"=",2,";","if(typeof "+m+'.constant === "number"){',I[T[0]],"=",m,".constant;",T.slice(1).map(function(a){return I[a]}).join("="),"=0;","}else{",T.map(function(a,d){return I[a]+
"="+m+".constant.length>"+d+"?"+m+".constant["+d+"]:0;"}).join(""),"}}else{","if(",f,"(",m,".buffer)){",x,"=",l,".createStream(",34962,",",m,".buffer);","}else{",x,"=",l,".getBuffer(",m,".buffer);","}",na,'="type" in ',m,"?",h.glTypes,"[",m,".type]:",x,".dtype;",I.normalized,"=!!",m,".normalized;");p("size");p("offset");p("stride");p("divisor");r("}}");r.exit("if(",I.isStream,"){",l,".destroyStream(",x,");","}");return I})});return p}function Aa(a){var d=a["static"],g=a.dynamic,r={};q(d).forEach(function(a){var g=
d[a];r[a]=e(function(a,d){return"number"===typeof g||"boolean"===typeof g?""+g:a.link(g)})});q(g).forEach(function(a){var d=g[a];r[a]=l(d,function(a,g){return a.invoke(g,d)})});return r}function wa(a,d,g,r,p){function k(a){var d=E[a];d&&(na[a]=d)}var h=a["static"],f=a.dynamic;c.optional(function(){function a(g){q(g).forEach(function(a){c.command(0<=d.indexOf(a),'unknown parameter "'+a+'"',p.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);
a(h);a(f)});var l=m(a,d),I=Ca(a,p),E=qa(a,I,p),x=aa(a,p),na=P(a,p),t=J(a,p,l);k("viewport");k(O("scissor.box"));var u=0<q(na).length,I={framebuffer:I,draw:x,shader:t,state:na,dirty:u,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};I.profile=M(a,p);I.uniforms=la(g,p);I.drawVAO=I.scopeVAO=x.vao;if(!I.drawVAO&&t.program&&!l&&n.angle_instanced_arrays&&x["static"].elements){var sa=!0;a=t.program.attributes.map(function(a){a=d["static"][a];sa=sa&&!!a;return a});if(sa&&0<a.length){var Ja=A.getVAO(A.createVAO({attributes:a,
elements:x["static"].elements}));I.drawVAO=new K(null,null,null,function(a,d){return a.link(Ja)});I.useVAO=!0}}l?I.useVAO=!0:I.attributes=ra(d,p);I.context=Aa(r,p);return I}function fa(a,d,g){var r=a.shared.context,c=a.scope();q(g).forEach(function(m){d.save(r,"."+m);var p=g[m].append(a,d);Array.isArray(p)?c(r,".",m,"=[",p.join(),"];"):c(r,".",m,"=",p,";")});d(c)}function Ba(a,d,g,r){var c=a.shared,m=c.gl,p=c.framebuffer,k;xa&&(k=d.def(c.extensions,".webgl_draw_buffers"));var h=a.constants,c=h.drawBuffer,
h=h.backBuffer;a=g?g.append(a,d):d.def(p,".next");r||d("if(",a,"!==",p,".cur){");d("if(",a,"){",m,".bindFramebuffer(",36160,",",a,".framebuffer);");xa&&d(k,".drawBuffersWEBGL(",c,"[",a,".colorAttachments.length]);");d("}else{",m,".bindFramebuffer(",36160,",null);");xa&&d(k,".drawBuffersWEBGL(",h,");");d("}",p,".cur=",a,";");r||d("}")}function ka(a,d,g){var r=a.shared,c=r.gl,m=a.current,p=a.next,k=r.current,h=r.next,f=a.cond(k,".dirty");ua.forEach(function(d){d=O(d);if(!(d in g.state)){var r,l;if(d in
p){r=p[d];l=m[d];var I=B(ma[d].length,function(a){return f.def(r,"[",a,"]")});f(a.cond(I.map(function(a,d){return a+"!=="+l+"["+d+"]"}).join("||")).then(c,".",za[d],"(",I,");",I.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";"))}else r=f.def(h,".",d),I=a.cond(r,"!==",k,".",d),f(I),d in Ia?I(a.cond(r).then(c,".enable(",Ia[d],");")["else"](c,".disable(",Ia[d],");"),k,".",d,"=",r,";"):I(c,".",za[d],"(",r,");",k,".",d,"=",r,";")}});0===q(g.state).length&&f(k,".dirty=false;");d(f)}function pa(a,
d,g,r){var c=a.shared,m=a.current,p=c.current,k=c.gl;da(q(g)).forEach(function(c){var h=g[c];if(!r||r(h)){var f=h.append(a,d);if(Ia[c]){var I=Ia[c];L(h)?f?d(k,".enable(",I,");"):d(k,".disable(",I,");"):d(a.cond(f).then(k,".enable(",I,");")["else"](k,".disable(",I,");"));d(p,".",c,"=",f,";")}else if(v(f)){var l=m[c];d(k,".",za[c],"(",f,");",f.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";")}else d(k,".",za[c],"(",f,");",p,".",c,"=",f,";")}})}function ya(a,d){oa&&(a.instancing=d.def(a.shared.extensions,
".angle_instanced_arrays"))}function Ja(a,d,g,r,c){function m(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function p(a){x=d.def();a(x,"=",m(),";");"string"===typeof c?a(I,".count+=",c,";"):a(I,".count++;");ea&&(r?(na=d.def(),a(na,"=",E,".getNumPendingQueries();")):a(E,".beginQuery(",I,");"))}function k(a){a(I,".cpuTime+=",m(),"-",x,";");ea&&(r?a(E,".pushScopeStats(",na,",",E,".getNumPendingQueries(),",I,");"):a(E,".endQuery();"))}function h(a){var g=d.def(l,".profile");
d(l,".profile=",a,";");d.exit(l,".profile=",g,";")}var f=a.shared,I=a.stats,l=f.current,E=f.timer;g=g.profile;var x,na;if(g){if(L(g)){g.enable?(p(d),k(d.exit),h("true")):h("false");return}g=g.append(a,d);h(g)}else g=d.def(l,".profile");f=a.block();p(f);d("if(",g,"){",f,"}");a=a.block();k(a);d.exit("if(",g,"){",a,"}")}function na(a,d,g,r,m){function p(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function k(g,r,c){function m(){d("if(!",l,".buffer){",f,".enableVertexAttribArray(",I,");}");var g=c.type,p;p=c.size?d.def(c.size,"||",r):r;d("if(",l,".type!==",g,"||",l,".size!==",p,"||",na.map(function(a){return l+"."+a+"!=="+c[a]}).join("||"),"){",f,".bindBuffer(",34962,",",E,".buffer);",f,".vertexAttribPointer(",[I,p,g,c.normalized,c.stride,c.offset],");",l,".type=",g,";",l,".size=",p,";",na.map(function(a){return l+"."+a+"="+c[a]+";"}).join(""),"}");oa&&(g=c.divisor,d("if(",l,".divisor!==",g,
"){",a.instancing,".vertexAttribDivisorANGLE(",[I,g],");",l,".divisor=",g,";}"))}function p(){d("if(",l,".buffer){",f,".disableVertexAttribArray(",I,");",l,".buffer=null;","}if(",T.map(function(a,d){return l+"."+a+"!=="+x[d]}).join("||"),"){",f,".vertexAttrib4f(",I,",",x,");",T.map(function(a,d){return l+"."+a+"="+x[d]+";"}).join(""),"}")}var f=h.gl,I=d.def(g,".location"),l=d.def(h.attributes,"[",I,"]");g=c.state;var E=c.buffer,x=[c.x,c.y,c.z,c.w],na=["buffer","normalized","offset","stride"];1===
g?m():2===g?p():(d("if(",g,"===",1,"){"),m(),d("}else{"),p(),d("}"))}var h=a.shared;r.forEach(function(r){var h=r.name,f=g.attributes[h],l;if(f){if(!m(f))return;l=f.append(a,d)}else{if(!m(X))return;var I=a.scopeAttrib(h);c.optional(function(){a.assert(d,I+".state","missing attribute "+h)});l={};q(new sa).forEach(function(a){l[a]=d.def(I,".",a)})}k(a.link(r),p(r.info.type),l)})}function Za(a,d,g,r,p,m){for(var k=a.shared,h=k.gl,f,l=0;l<r.length;++l){var I=r[l],E=I.name,na=I.info.type,t=g.uniforms[E],
I=a.link(I)+".location",q;if(t){if(!p(t))continue;if(L(t)){var u=t.value;c.command(null!==u&&"undefined"!==typeof u,'missing uniform "'+E+'"',a.commandStr);if(35678===na||35680===na)c.command("function"===typeof u&&(35678===na&&("texture2d"===u._reglType||"framebuffer"===u._reglType)||35680===na&&("textureCube"===u._reglType||"framebufferCube"===u._reglType)),"invalid texture for uniform "+E,a.commandStr),t=a.link(u._texture||u.color[0]._texture),d(h,".uniform1i(",I,",",t+".bind());"),d.exit(t,".unbind();");
else if(35674===na||35675===na||35676===na){c.optional(function(){c.command(v(u),"invalid matrix for uniform "+E,a.commandStr);c.command(35674===na&&4===u.length||35675===na&&9===u.length||35676===na&&16===u.length,"invalid length for matrix uniform "+E,a.commandStr)});var t=a.global.def("new Float32Array(["+Array.prototype.slice.call(u)+"])"),O=2;35675===na?O=3:35676===na&&(O=4);d(h,".uniformMatrix",O,"fv(",I,",false,",t,");")}else{switch(na){case 5126:c.commandType(u,"number","uniform "+E,a.commandStr);
f="1f";break;case 35664:c.command(v(u)&&2===u.length,"uniform "+E,a.commandStr);f="2f";break;case 35665:c.command(v(u)&&3===u.length,"uniform "+E,a.commandStr);f="3f";break;case 35666:c.command(v(u)&&4===u.length,"uniform "+E,a.commandStr);f="4f";break;case 35670:c.commandType(u,"boolean","uniform "+E,a.commandStr);f="1i";break;case 5124:c.commandType(u,"number","uniform "+E,a.commandStr);f="1i";break;case 35671:c.command(v(u)&&2===u.length,"uniform "+E,a.commandStr);f="2i";break;case 35667:c.command(v(u)&&
2===u.length,"uniform "+E,a.commandStr);f="2i";break;case 35672:c.command(v(u)&&3===u.length,"uniform "+E,a.commandStr);f="3i";break;case 35668:c.command(v(u)&&3===u.length,"uniform "+E,a.commandStr);f="3i";break;case 35673:c.command(v(u)&&4===u.length,"uniform "+E,a.commandStr);f="4i";break;case 35669:c.command(v(u)&&4===u.length,"uniform "+E,a.commandStr),f="4i"}d(h,".uniform",f,"(",I,",",v(u)?Array.prototype.slice.call(u):u,");")}continue}else q=t.append(a,d)}else{if(!p(X))continue;q=d.def(k.uniforms,
"[",x.id(E),"]")}35678===na?(c(!Array.isArray(q),"must specify a scalar prop for textures"),d("if(",q,"&&",q,'._reglType==="framebuffer"){',q,"=",q,".color[0];","}")):35680===na&&(c(!Array.isArray(q),"must specify a scalar prop for cube maps"),d("if(",q,"&&",q,'._reglType==="framebufferCube"){',q,"=",q,".color[0];","}"));c.optional(function(){function g(r,c){a.assert(d,r,'bad data or missing for uniform "'+E+'".  '+c)}function r(a){c(!Array.isArray(q),"must not specify an array type for uniform");
g("typeof "+q+'==="'+a+'"',"invalid type, expected "+a)}function m(d,r){Array.isArray(q)?c(q.length===d,"must have length "+d):g(k.isArrayLike+"("+q+")&&"+q+".length==="+d,"invalid vector, should have length "+d,a.commandStr)}function p(d){c(!Array.isArray(q),"must not specify a value type");g("typeof "+q+'==="function"&&'+q+'._reglType==="texture'+(3553===d?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(na){case 5124:r("number");break;case 35667:m(2,"number");break;case 35668:m(3,"number");
break;case 35669:m(4,"number");break;case 5126:r("number");break;case 35664:m(2,"number");break;case 35665:m(3,"number");break;case 35666:m(4,"number");break;case 35670:r("boolean");break;case 35671:m(2,"boolean");break;case 35672:m(3,"boolean");break;case 35673:m(4,"boolean");break;case 35674:m(4,"number");break;case 35675:m(9,"number");break;case 35676:m(16,"number");break;case 35678:p(3553);break;case 35680:p(34067)}});t=1;switch(na){case 35678:case 35680:t=d.def(q,"._texture");d(h,".uniform1i(",
I,",",t,".bind());");d.exit(t,".unbind();");continue;case 5124:case 35670:f="1i";break;case 35667:case 35671:f="2i";t=2;break;case 35668:case 35672:f="3i";t=3;break;case 35669:case 35673:f="4i";t=4;break;case 5126:f="1f";break;case 35664:f="2f";t=2;break;case 35665:f="3f";t=3;break;case 35666:f="4f";t=4;break;case 35674:f="Matrix2fv";break;case 35675:f="Matrix3fv";break;case 35676:f="Matrix4fv"}if("M"===f.charAt(0)){d(h,".uniform",f,"(",I,",");var I=Math.pow(na-35674+2,2),sa=a.global.def("new Float32Array(",
I,")");Array.isArray(q)?d("false,(",B(I,function(a){return sa+"["+a+"]="+q[a]}),",",sa,")"):d("false,(Array.isArray(",q,")||",q," instanceof Float32Array)?",q,":(",B(I,function(a){return sa+"["+a+"]="+q+"["+a+"]"}),",",sa,")");d(");")}else{if(1<t){for(var O=[],Ja=[],Da=0;Da<t;++Da)Array.isArray(q)?Ja.push(q[Da]):Ja.push(d.def(q+"["+Da+"]")),m&&O.push(d.def());m&&d("if(!",a.batchId,"||",O.map(function(a,d){return a+"!=="+Ja[d]}).join("||"),"){",O.map(function(a,d){return a+"="+Ja[d]+";"}).join(""));
d(h,".uniform",f,"(",I,",",Ja.join(","),");")}else c(!Array.isArray(q),"uniform value must not be an array"),m&&(t=d.def(),d("if(!",a.batchId,"||",t,"!==",q,"){",t,"=",q,";")),d(h,".uniform",f,"(",I,",",q,");");m&&d("}")}}}function Ta(a,d,g,r){function m(c){var p=l[c];return p?p.contextDep&&r.contextDynamic||p.propDep?p.append(a,g):p.append(a,d):d.def(I,".",c)}function p(){function a(){g(t,".drawElementsInstancedANGLE(",[na,u,O,x+"<<(("+O+"-5121)>>1)",q],");")}function d(){g(t,".drawArraysInstancedANGLE(",
[na,x,u,q],");")}E&&"null"!==E?sa?a():(g("if(",E,"){"),a(),g("}else{"),d(),g("}")):d()}function k(){function a(){g(h+".drawElements("+[na,u,O,x+"<<(("+O+"-5121)>>1)"]+");")}function d(){g(h+".drawArrays("+[na,x,u]+");")}E&&"null"!==E?sa?a():(g("if(",E,"){"),a(),g("}else{"),d(),g("}")):d()}var f=a.shared,h=f.gl,I=f.draw,l=r.draw,E=function(){var c=l.elements,m=d;if(c){if(c.contextDep&&r.contextDynamic||c.propDep)m=g;c=c.append(a,m);l.elementsActive&&m("if("+c+")"+h+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=
m.def(),m(c,"=",I,".","elements",";","if(",c,"){",h,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",f.vao,".currentVAO){",c,"=",a.shared.elements+".getElements("+f.vao,".currentVAO.elements);",Fa?"":"if("+c+")"+h+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),na=m("primitive"),x=m("offset"),u=function(){var m=l.count,p,k=d;if(m){if(m.contextDep&&r.contextDynamic||m.propDep)k=g;p=m.append(a,k);c.optional(function(){m.MISSING&&a.assert(d,"false","missing vertex count");m.DYNAMIC&&
a.assert(k,p+">=0","missing vertex count")})}else p=k.def(I,".","count"),c.optional(function(){a.assert(k,p+">=0","missing vertex count")});return p}();if("number"===typeof u){if(0===u)return}else g("if(",u,"){"),g.exit("}");var q,t;oa&&(q=m("instances"),t=a.instancing);var O=E+".type",sa=l.elements&&L(l.elements)&&!l.vaoActive;oa&&("number"!==typeof q||0<=q)?"string"===typeof q?(g("if(",q,">0){"),p(),g("}else if(",q,"<0){"),k(),g("}")):p():k()}function r(a,d,g,r,m){var p=N();m=p.proc("body",m);c.optional(function(){p.commandStr=
d.commandStr;p.command=p.link(d.commandStr)});oa&&(p.instancing=m.def(p.shared.extensions,".angle_instanced_arrays"));a(p,m,g,r);return p.compile().body}function p(a,d,g,r){ya(a,d);g.useVAO?g.drawVAO?d(a.shared.vao,".setVAO(",g.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(d(a.shared.vao,".setVAO(null);"),na(a,d,g,r.attributes,function(){return!0}));Za(a,d,g,r.uniforms,function(){return!0},!1);Ta(a,d,d,g)}function E(a,d){var g=a.proc("draw",1);ya(a,g);fa(a,g,d.context);
Ba(a,g,d.framebuffer);ka(a,g,d);pa(a,g,d.state);Ja(a,g,d,!1,!0);var c=d.shader.progVar.append(a,g);g(a.shared.gl,".useProgram(",c,".program);");if(d.shader.program)p(a,g,d,d.shader.program);else{g(a.shared.vao,".setVAO(null);");var m=a.global.def("{}"),k=g.def(c,".id"),f=g.def(m,"[",k,"]");g(a.cond(f).then(f,".call(this,a0);")["else"](f,"=",m,"[",k,"]=",a.link(function(g){return r(p,a,d,g,1)}),"(",c,");",f,".call(this,a0);"))}0<q(d.state).length&&g(a.shared.current,".dirty=true;");a.shared.vao&&g(a.shared.vao,
".setVAO(null);")}function va(a,d,g,r){function c(){return!0}a.batchId="a1";ya(a,d);na(a,d,g,r.attributes,c);Za(a,d,g,r.uniforms,c,!1);Ta(a,d,d,g)}function Ea(a,d,g,c){function m(a){return a.contextDep&&k||a.propDep}function p(a){return!m(a)}ya(a,d);var k=g.contextDep,f=d.def(),h=d.def();a.shared.props=h;a.batchId=f;var I=a.scope(),l=a.scope();d(I.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",h,"=","a0","[",f,"];",l,"}",I.exit);g.needsContext&&fa(a,l,g.context);g.needsFramebuffer&&Ba(a,l,g.framebuffer);
pa(a,l,g.state,m);g.profile&&m(g.profile)&&Ja(a,l,g,!1,!0);c?(g.useVAO?g.drawVAO?m(g.drawVAO)?l(a.shared.vao,".setVAO(",g.drawVAO.append(a,l),");"):I(a.shared.vao,".setVAO(",g.drawVAO.append(a,I),");"):I(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(I(a.shared.vao,".setVAO(null);"),na(a,I,g,c.attributes,p),na(a,l,g,c.attributes,m)),Za(a,I,g,c.uniforms,p,!1),Za(a,l,g,c.uniforms,m,!0),Ta(a,I,l,g)):(d=a.global.def("{}"),c=g.shader.progVar.append(a,l),h=l.def(c,".id"),I=l.def(d,"[",h,"]"),l(a.shared.gl,
".useProgram(",c,".program);","if(!",I,"){",I,"=",d,"[",h,"]=",a.link(function(d){return r(va,a,g,d,2)}),"(",c,");}",I,".call(this,a0[",f,"],",f,");"))}function td(a,d){function g(a){return a.contextDep&&m||a.propDep}var c=a.proc("batch",2);a.batchId="0";ya(a,c);var m=!1,p=!0;q(d.context).forEach(function(a){m=m||d.context[a].propDep});m||(fa(a,c,d.context),p=!1);var k=d.framebuffer,f=!1;k?(k.propDep?m=f=!0:k.contextDep&&m&&(f=!0),f||Ba(a,c,k)):Ba(a,c,null);d.state.viewport&&d.state.viewport.propDep&&
(m=!0);ka(a,c,d);pa(a,c,d.state,function(a){return!g(a)});d.profile&&g(d.profile)||Ja(a,c,d,!1,"a1");d.contextDep=m;d.needsContext=p;d.needsFramebuffer=f;p=d.shader.progVar;if(p.contextDep&&m||p.propDep)Ea(a,c,d,null);else if(p=p.append(a,c),c(a.shared.gl,".useProgram(",p,".program);"),d.shader.program)Ea(a,c,d,d.shader.program);else{c(a.shared.vao,".setVAO(null);");var k=a.global.def("{}"),f=c.def(p,".id"),h=c.def(k,"[",f,"]");c(a.cond(h).then(h,".call(this,a0,a1);")["else"](h,"=",k,"[",f,"]=",a.link(function(g){return r(Ea,
a,d,g,2)}),"(",p,");",h,".call(this,a0,a1);"))}0<q(d.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Hb(a,d){function g(m){var p=d.shader[m];p&&r.set(c.shader,"."+m,p.append(a,r))}var r=a.proc("scope",3);a.batchId="a2";var c=a.shared,m=c.current;fa(a,r,d.context);d.framebuffer&&d.framebuffer.append(a,r);da(q(d.state)).forEach(function(g){var m=d.state[g].append(a,r);v(m)?m.forEach(function(d,c){r.set(a.next[g],"["+c+"]",d)}):r.set(c.next,"."+
g,m)});Ja(a,r,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(g){var m=d.draw[g];m&&r.set(c.draw,"."+g,""+m.append(a,r))});q(d.uniforms).forEach(function(g){var m=d.uniforms[g].append(a,r);Array.isArray(m)&&(m="["+m.join()+"]");r.set(c.uniforms,"["+x.id(g)+"]",m)});q(d.attributes).forEach(function(g){var c=d.attributes[g].append(a,r),m=a.scopeAttrib(g);q(new sa).forEach(function(a){r.set(m,"."+a,c[a])})});d.scopeVAO&&r.set(c.vao,".targetVAO",d.scopeVAO.append(a,r));
g("vert");g("frag");0<q(d.state).length&&(r(m,".dirty=true;"),r.exit(m,".dirty=true;"));r("a1(",a.shared.context,",a0,",a.batchId,");")}function ga(a){if("object"===typeof a&&!v(a)){for(var d=q(a),g=0;g<d.length;++g)if(y.isDynamic(a[d[g]]))return!0;return!1}}function I(a,d,g){function r(a,d){p.forEach(function(g){var r=c[g];y.isDynamic(r)&&(r=a.invoke(d,r),d(I,".",g,"=",r,";"))})}var c=d["static"][g];if(c&&ga(c)){var m=a.global,p=q(c),k=!1,f=!1,h=!1,I=a.global.def("{}");p.forEach(function(d){var g=
c[d];if(y.isDynamic(g))"function"===typeof g&&(g=c[d]=y.unbox(g)),d=l(g,null),k=k||d.thisDep,h=h||d.propDep,f=f||d.contextDep;else{m(I,".",d,"=");switch(typeof g){case "number":m(g);break;case "string":m('"',g,'"');break;case "object":Array.isArray(g)&&m("[",g.join(),"]");break;default:m(a.link(g))}m(";")}});d.dynamic[g]=new y.DynamicVariable(4,{thisDep:k,contextDep:f,propDep:h,ref:I,append:r});delete d["static"][g]}}var sa=A.Record,Da={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&
(Da.min=32775,Da.max=32776);var oa=n.angle_instanced_arrays,xa=n.webgl_draw_buffers,Fa=n.oes_vertex_array_object,ma={dirty:!0,profile:R.profile},V={},ua=[],Ia={},za={};D("dither",3024);D("blend.enable",3042);g("blend.color","blendColor",[0,0,0,0]);g("blend.equation","blendEquationSeparate",[32774,32774]);g("blend.func","blendFuncSeparate",[1,0,1,0]);D("depth.enable",2929,!0);g("depth.func","depthFunc",513);g("depth.range","depthRange",[0,1]);g("depth.mask","depthMask",!0);g("colorMask","colorMask",
[!0,!0,!0,!0]);D("cull.enable",2884);g("cull.face","cullFace",1029);g("frontFace","frontFace",2305);g("lineWidth","lineWidth",1);D("polygonOffset.enable",32823);g("polygonOffset.offset","polygonOffset",[0,0]);D("sample.alpha",32926);D("sample.enable",32928);g("sample.coverage","sampleCoverage",[1,!1]);D("stencil.enable",2960);g("stencil.mask","stencilMask",-1);g("stencil.func","stencilFunc",[519,0,-1]);g("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);g("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);D("scissor.enable",3089);g("scissor.box","scissor",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);g("viewport","viewport",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);var mb={gl:f,context:W,strings:x,next:V,current:ma,draw:Cc,elements:d,buffer:F,shader:ja,attributes:A.state,vao:A,uniforms:U,framebuffer:a,extensions:n,timer:ea,isBufferArgs:b},ca={primTypes:ba,compareFuncs:k,blendFuncs:Q,blendEquations:Da,stencilOps:u,glTypes:w,orientationType:h};c.optional(function(){mb.isArrayLike=
v});xa&&(ca.backBuffer=[1029],ca.drawBuffer=B(C.maxDrawbuffers,function(a){return 0===a?[0]:B(a,function(a){return 36064+a})}));var yd=0;return{next:V,current:ma,procs:function(){var a=N(),d=a.proc("poll"),g=a.proc("refresh"),r=a.block();d(r);g(r);var c=a.shared,m=c.gl,p=c.next,k=c.current;r(k,".dirty=false;");Ba(a,d);Ba(a,g,null,!0);var f;oa&&(f=a.link(oa));n.oes_vertex_array_object&&g(a.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<C.maxAttributes;++h){var I=g.def(c.attributes,
"[",h,"]"),l=a.cond(I,".buffer");l.then(m,".enableVertexAttribArray(",h,");",m,".bindBuffer(",34962,",",I,".buffer.buffer);",m,".vertexAttribPointer(",h,",",I,".size,",I,".type,",I,".normalized,",I,".stride,",I,".offset);")["else"](m,".disableVertexAttribArray(",h,");",m,".vertexAttrib4f(",h,",",I,".x,",I,".y,",I,".z,",I,".w);",I,".buffer=null;");g(l);oa&&g(f,".vertexAttribDivisorANGLE(",h,",",I,".divisor);")}g(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");
q(Ia).forEach(function(c){var f=Ia[c],h=r.def(p,".",c),I=a.block();I("if(",h,"){",m,".enable(",f,")}else{",m,".disable(",f,")}",k,".",c,"=",h,";");g(I);d("if(",h,"!==",k,".",c,"){",I,"}")});q(za).forEach(function(c){var f=za[c],h=ma[c],I,l,E=a.block();E(m,".",f,"(");v(h)?(f=h.length,I=a.global.def(p,".",c),l=a.global.def(k,".",c),E(B(f,function(a){return I+"["+a+"]"}),");",B(f,function(a){return l+"["+a+"]="+I+"["+a+"];"}).join("")),d("if(",B(f,function(a){return I+"["+a+"]!=="+l+"["+a+"]"}).join("||"),
"){",E,"}")):(I=r.def(p,".",c),l=r.def(k,".",c),E(I,");",k,".",c,"=",I,";"),d("if(",I,"!==",l,"){",E,"}"));g(E)});return a.compile()}(),compile:function(a,d,g,r,c){var m=N();m.stats=m.link(c);q(d["static"]).forEach(function(a){I(m,d,a)});z.forEach(function(d){I(m,a,d)});var p=wa(a,d,g,r,m);E(m,p);Hb(m,p);td(m,p);return G(m.compile(),{destroy:function(){p.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,
"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(Z,ha,$a){function b(q,c){this.id=l++;this.type=q;this.data=c}function da(l){if(0===l.length)return[];var c=l.charAt(0),e=l.charAt(l.length-1);if(1<l.length&&c===e&&('"'===c||"'"===c))return['"'+l.substr(1,l.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(l))return da(l.substr(0,c.index)).concat(da(c[1])).concat(da(l.substr(c.index+
c[0].length)));c=l.split(".");if(1===c.length)return['"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];l=[];for(e=0;e<c.length;++e)l=l.concat(da(c[e]));return l}function K(l){return"["+da(l).join("][")+"]"}function L(l,c){if("function"===typeof l)return new b(0,l);if("number"===typeof l||"boolean"===typeof l)return new b(5,l);if(Array.isArray(l))return new b(6,l.map(function(l,q){return L(l,c+"["+q+"]")}));if(l instanceof b)return l;e(!1,"invalid option type in uniform "+c)}var e=Z("./util/check"),
l=0;ha.exports={DynamicVariable:b,define:function(l,c){return new b(l,K(c+""))},isDynamic:function(l){return"function"===typeof l&&!l._reglType||l instanceof b},unbox:L,accessor:K}},{"./util/check":21}],10:[function(Z,ha,$a){var b=Z("./util/check"),da=Z("./util/is-typed-array"),K=Z("./util/is-ndarray"),L=Z("./util/values"),e=Z("./constants/primitives.json"),l=Z("./constants/usage.json");ha.exports=function(q,c,G,H){function B(c){this.id=y++;v[this.id]=this;this.buffer=c;this.primType=4;this.type=
this.vertCount=0}function U(l,e,w,v,k,u,S){l.buffer.bind();var h;e?((h=S)||da(e)&&(!K(e)||da(e.data))||(h=c.oes_element_index_uint?5125:5123),G._initBuffer(l.buffer,e,w,h,3)):(q.bufferData(34963,u,w),l.buffer.dtype=h||5121,l.buffer.usage=w,l.buffer.dimension=3,l.buffer.byteLength=u);h=S;if(!S){switch(l.buffer.dtype){case 5121:case 5120:h=5121;break;case 5123:case 5122:h=5123;break;case 5125:case 5124:h=5125;break;default:b.raise("unsupported type for element array")}l.buffer.dtype=h}l.type=h;b(5125!==
h||!!c.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=k;0>e&&(e=l.buffer.byteLength,5123===h?e>>=1:5125===h&&(e>>=2));l.vertCount=e;e=v;0>v&&(e=4,v=l.buffer.dimension,1===v&&(e=0),2===v&&(e=1),3===v&&(e=4));l.primType=e}function n(c){H.elementsCount--;b(null!==c.buffer,"must not double destroy elements");delete v[c.id];c.buffer.destroy();c.buffer=null}var v={},y=0,ba={uint8:5121,uint16:5123};c.oes_element_index_uint&&(ba.uint32=5125);B.prototype.bind=
function(){this.buffer.bind()};var w=[];return{create:function(c,q){function w(c){if(c)if("number"===typeof c)v(c),k.primType=4,k.vertCount=c|0,k.type=5121;else{var q=null,h=35044,z=-1,f=-1,x=0,n=0;if(Array.isArray(c)||da(c)||K(c))q=c;else if(b.type(c,"object","invalid arguments for elements"),"data"in c&&(q=c.data,b(Array.isArray(q)||da(q)||K(q),"invalid data for element buffer")),"usage"in c&&(b.parameter(c.usage,l,"invalid element buffer usage"),h=l[c.usage]),"primitive"in c&&(b.parameter(c.primitive,
e,"invalid element buffer primitive"),z=e[c.primitive]),"count"in c&&(b("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),f=c.count|0),"type"in c&&(b.parameter(c.type,ba,"invalid buffer type"),n=ba[c.type]),"length"in c)x=c.length|0;else if(x=f,5123===n||5122===n)x*=2;else if(5125===n||5124===n)x*=4;U(k,q,h,z,f,x,n)}else v(),k.primType=4,k.vertCount=0,k.type=5121;return w}var v=G.create(null,34963,!0),k=new B(v._buffer);H.elementsCount++;w(c);w._reglType="elements";w._elements=
k;w.subdata=function(c,k){v.subdata(c,k);return w};w.destroy=function(){n(k)};return w},createStream:function(c){var l=w.pop();l||(l=new B(G.create(null,34963,!0,!1)._buffer));U(l,c,35040,-1,-1,0,0);return l},destroyStream:function(c){w.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof B?c._elements:null},clear:function(){L(v).forEach(n)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,
"./util/values":36}],11:[function(Z,ha,$a){var b=Z("./util/sorted-object-keys"),da=Z("./util/check");ha.exports=function(K,L){function e(c){da.type(c,"string","extension name must be string");c=c.toLowerCase();var q;try{q=l[c]=K.getExtension(c)}catch(e){}return!!q}for(var l={},q=0;q<L.extensions.length;++q){var c=L.extensions[q];if(!e(c))return L.onDestroy(),L.onDone('"'+c+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}L.optionalExtensions.forEach(e);
return{extensions:l,restore:function(){b(l).forEach(function(c){if(l[c]&&!e(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(Z,ha,$a){var b=Z("./util/check"),da=Z("./util/values"),K=Z("./util/extend"),L=[6407,6408],e=[];e[6408]=4;e[6407]=3;var l=[];l[5121]=1;l[5126]=4;l[36193]=2;var q=[32854,32855,36194,35907,34842,34843,34836],c={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};ha.exports=function(G,H,B,U,n,v){function y(a,d,c){this.target=a;this.texture=d;this.renderbuffer=c;var k=a=0;d?(a=d.width,k=d.height):c&&(a=c.width,k=c.height);this.width=a;this.height=k}function ba(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function w(a,d,c){if(a){if(a.texture){a=a.texture._texture;var k=Math.max(1,a.height);b(Math.max(1,a.width)===d&&k===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,
b(a.width===d&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function T(a,d){d&&(d.texture?G.framebufferTexture2D(36160,a,d.target,d.texture._texture.texture,0):G.framebufferRenderbuffer(36160,a,36161,d.renderbuffer._renderbuffer.renderbuffer))}function z(a){var d=3553,c=null,k=null,l=a;"object"===typeof a&&(l=a.data,"target"in a&&(d=a.target|0));b.type(l,"function","invalid attachment data");a=l._reglType;"texture2d"===a?(c=l,b(3553===d)):"textureCube"===a?(c=l,b(34069<=
d&&34075>d,"invalid cube map target")):"renderbuffer"===a?(k=l,d=36161):b.raise("invalid regl object for attachment");return new y(d,c,k)}function Q(a,d,c,k,l){if(c)return a=U.create2D({width:a,height:d,format:k,type:l}),a._texture.refCount=0,new y(3553,a,null);a=n.create({width:a,height:d,format:k});a._renderbuffer.refCount=0;return new y(36161,null,a)}function ia(a){return a&&(a.texture||a.renderbuffer)}function k(a,d,c){a&&(a.texture?a.texture.resize(d,c):a.renderbuffer&&a.renderbuffer.resize(d,
c),a.width=d,a.height=c)}function u(){this.id=d++;t[this.id]=this;this.framebuffer=G.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function S(a){a.colorAttachments.forEach(ba);ba(a.depthAttachment);ba(a.stencilAttachment);ba(a.depthStencilAttachment)}function h(a){var d=a.framebuffer;b(d,"must not double destroy framebuffer");G.deleteFramebuffer(d);a.framebuffer=null;v.framebufferCount--;delete t[a.id]}
function X(a){var d;G.bindFramebuffer(36160,a.framebuffer);var k=a.colorAttachments;for(d=0;d<k.length;++d)T(36064+d,k[d]);for(d=k.length;d<B.maxColorAttachments;++d)G.framebufferTexture2D(36160,36064+d,3553,null,0);G.framebufferTexture2D(36160,33306,3553,null,0);G.framebufferTexture2D(36160,36096,3553,null,0);G.framebufferTexture2D(36160,36128,3553,null,0);T(36096,a.depthAttachment);T(36128,a.stencilAttachment);T(33306,a.depthStencilAttachment);a=G.checkFramebufferStatus(36160);G.isContextLost()||
36053===a||b.raise("framebuffer configuration not supported, status = "+c[a]);G.bindFramebuffer(36160,x.next?x.next.framebuffer:null);x.cur=x.next;G.getError()}function f(a,d){function c(a,d){var k;b(x.next!==f,"can not update framebuffer which is currently in use");var h=0,t=0,u=!0,g=!0;k=null;var v=!0,M="rgba",n="uint8",U=1,m=null,J=null,aa=null,P=!1;if("number"===typeof a)h=a|0,t=d|0||h;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(t=a.shape,b(Array.isArray(t)&&
2<=t.length,"invalid shape for framebuffer"),h=t[0],t=t[1]):("radius"in a&&(h=t=a.radius),"width"in a&&(h=a.width),"height"in a&&(t=a.height));if("color"in a||"colors"in a)k=a.color||a.colors,Array.isArray(k)&&b(1===k.length||H.webgl_draw_buffers,"multiple render targets not supported");if(!k){"colorCount"in a&&(U=a.colorCount|0,b(0<U,"invalid color buffer count"));"colorTexture"in a&&(v=!!a.colorTexture,M="rgba4");if("colorType"in a){n=a.colorType;if(v)b(H.oes_texture_float||!("float"===n||"float32"===
n),"you must enable OES_texture_float in order to use floating point framebuffer objects"),b(H.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===n||"float16"===n)b(H.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),M="rgba16f";else if("float"===n||"float32"===n)b(H.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
M="rgba32f";b.oneOf(n,F,"invalid color type")}"colorFormat"in a&&(M=a.colorFormat,0<=Y.indexOf(M)?v=!0:0<=C.indexOf(M)?v=!1:b.optional(function(){if(v)b.oneOf(a.colorFormat,Y,"invalid color format for texture");else b.oneOf(a.colorFormat,C,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in a)P=!(!a.depthTexture&&!a.depthStencilTexture),b(!P||H.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?u=a.depth:
(m=a.depth,g=!1));"stencil"in a&&("boolean"===typeof a.stencil?g=a.stencil:(J=a.stencil,u=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?u=g=a.depthStencil:(aa=a.depthStencil,g=u=!1))}else h=t=1;var y=null,ra=null,T=null,wa=null;if(Array.isArray(k))y=k.map(z);else if(k)y=[z(k)];else for(y=Array(U),k=0;k<U;++k)y[k]=Q(h,t,v,M,n);b(H.webgl_draw_buffers||1>=y.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");b(y.length<=B.maxColorAttachments,
"too many color attachments, not supported");h=h||y[0].width;t=t||y[0].height;m?ra=z(m):u&&!g&&(ra=Q(h,t,P,"depth","uint32"));J?T=z(J):g&&!u&&(T=Q(h,t,!1,"stencil","uint8"));aa?wa=z(aa):!m&&!J&&g&&u&&(wa=Q(h,t,P,"depth stencil","depth stencil"));b(1>=!!m+!!J+!!aa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");u=null;for(k=0;k<y.length;++k)w(y[k],h,t),b(!y[k]||y[k].texture&&0<=L.indexOf(y[k].texture._texture.format)||y[k].renderbuffer&&0<=q.indexOf(y[k].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+k+" is invalid"),y[k]&&y[k].texture&&(g=e[y[k].texture._texture.format]*l[y[k].texture._texture.type],null===u?u=g:b(u===g,"all color attachments much have the same number of bits per pixel."));w(ra,h,t);b(!ra||ra.texture&&6402===ra.texture._texture.format||ra.renderbuffer&&33189===ra.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");w(T,h,t);b(!T||T.renderbuffer&&36168===T.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
w(wa,h,t);b(!wa||wa.texture&&34041===wa.texture._texture.format||wa.renderbuffer&&34041===wa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");S(f);f.width=h;f.height=t;f.colorAttachments=y;f.depthAttachment=ra;f.stencilAttachment=T;f.depthStencilAttachment=wa;c.color=y.map(ia);c.depth=ia(ra);c.stencil=ia(T);c.depthStencil=ia(wa);c.width=f.width;c.height=f.height;X(f);return c}var f=new u;v.framebufferCount++;c(a,d);return K(c,{resize:function(a,d){b(x.next!==
f,"can not resize a framebuffer which is currently in use");var l=Math.max(a|0,1),h=Math.max(d|0||l,1);if(l===f.width&&h===f.height)return c;for(var t=f.colorAttachments,u=0;u<t.length;++u)k(t[u],l,h);k(f.depthAttachment,l,h);k(f.stencilAttachment,l,h);k(f.depthStencilAttachment,l,h);f.width=c.width=l;f.height=c.height=h;X(f);return c},_reglType:"framebuffer",_framebuffer:f,destroy:function(){h(f);S(f)},use:function(a){x.setFBO({framebuffer:c},a)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},
Y=["rgba"],C=["rgba4","rgb565","rgb5 a1"];H.ext_srgb&&C.push("srgba");H.ext_color_buffer_half_float&&C.push("rgba16f","rgb16f");H.webgl_color_buffer_float&&C.push("rgba32f");var F=["uint8"];H.oes_texture_half_float&&F.push("half float","float16");H.oes_texture_float&&F.push("float","float32");var d=0,t={};return K(x,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof u)?a:null},create:f,createCube:function(a){function d(a){var k;b(0>
c.indexOf(x.next),"can not update framebuffer which is currently in use");var l={color:null},h=0,t=null;k="rgba";var u="uint8",q=1;if("number"===typeof a)h=a|0;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(h=a.shape,b(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),b(h[0]===h[1],"cube framebuffer must be square"),h=h[0]):("radius"in a&&(h=a.radius|0),"width"in a?(h=a.width|0,"height"in a&&b(a.height===h,"must be square")):"height"in a&&(h=a.height|0));
if("color"in a||"colors"in a)t=a.color||a.colors,Array.isArray(t)&&b(1===t.length||H.webgl_draw_buffers,"multiple render targets not supported");t||("colorCount"in a&&(q=a.colorCount|0,b(0<q,"invalid color buffer count")),"colorType"in a&&(b.oneOf(a.colorType,F,"invalid color type"),u=a.colorType),"colorFormat"in a&&(k=a.colorFormat,b.oneOf(a.colorFormat,Y,"invalid color format for texture")));"depth"in a&&(l.depth=a.depth);"stencil"in a&&(l.stencil=a.stencil);"depthStencil"in a&&(l.depthStencil=
a.depthStencil)}else h=1;if(t)if(Array.isArray(t))for(a=[],k=0;k<t.length;++k)a[k]=t[k];else a=[t];else for(a=Array(q),t={radius:h,format:k,type:u},k=0;k<q;++k)a[k]=U.createCube(t);l.color=Array(a.length);for(k=0;k<a.length;++k)q=a[k],b("function"===typeof q&&"textureCube"===q._reglType,"invalid cube map"),h=h||q.width,b(q.width===h&&q.height===h,"invalid cube map shape"),l.color[k]={target:34069,data:a[k]};for(k=0;6>k;++k){for(q=0;q<a.length;++q)l.color[q].target=34069+k;0<k&&(l.depth=c[0].depth,
l.stencil=c[0].stencil,l.depthStencil=c[0].depthStencil);if(c[k])c[k](l);else c[k]=f(l)}return K(d,{width:h,height:h,color:a})}var c=Array(6);d(a);return K(d,{faces:c,resize:function(a){var k=a|0;b(0<k&&k<=B.maxCubeMapSize,"invalid radius for cube fbo");if(k===d.width)return d;var l=d.color;for(a=0;a<l.length;++a)l[a].resize(k);for(a=0;6>a;++a)c[a].resize(k);d.width=d.height=k;return d},_reglType:"framebufferCube",destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){da(t).forEach(h)},
restore:function(){x.cur=null;x.next=null;x.dirty=!0;da(t).forEach(function(a){a.framebuffer=G.createFramebuffer();X(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(Z,ha,$a){var b=Z("./util/sorted-object-keys"),da=Z("./util/pool");ha.exports=function(K,L){var e=1;L.ext_texture_filter_anisotropic&&(e=K.getParameter(34047));var l=1,q=1;L.webgl_draw_buffers&&(l=K.getParameter(34852),q=K.getParameter(36063));var c=!!L.oes_texture_float;if(c){c=K.createTexture();K.bindTexture(3553,
c);K.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var G=K.createFramebuffer();K.bindFramebuffer(36160,G);K.framebufferTexture2D(36160,36064,3553,c,0);K.bindTexture(3553,null);if(36053!==K.checkFramebufferStatus(36160))c=!1;else{K.viewport(0,0,1,1);K.clearColor(1,0,0,1);K.clear(16384);var H=da.allocType(5126,4);K.readPixels(0,0,1,1,6408,5126,H);K.getError()?c=!1:(K.deleteFramebuffer(G),K.deleteTexture(c),c=1===H[0]);da.freeType(H)}}H=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(H=K.createTexture(),G=da.allocType(5121,36),K.activeTexture(33984),K.bindTexture(34067,H),K.texImage2D(34069,0,6408,3,3,0,6408,5121,G),da.freeType(G),K.bindTexture(34067,null),K.deleteTexture(H),H=!K.getError());return{colorBits:[K.getParameter(3410),K.getParameter(3411),K.getParameter(3412),K.getParameter(3413)],depthBits:K.getParameter(3414),stencilBits:K.getParameter(3415),subpixelBits:K.getParameter(3408),extensions:b(L).filter(function(c){return!!L[c]}),
maxAnisotropic:e,maxDrawbuffers:l,maxColorAttachments:q,pointSizeDims:K.getParameter(33901),lineWidthDims:K.getParameter(33902),maxViewportDims:K.getParameter(3386),maxCombinedTextureUnits:K.getParameter(35661),maxCubeMapSize:K.getParameter(34076),maxRenderbufferSize:K.getParameter(34024),maxTextureUnits:K.getParameter(34930),maxTextureSize:K.getParameter(3379),maxAttributes:K.getParameter(34921),maxVertexUniforms:K.getParameter(36347),maxVertexTextureUnits:K.getParameter(35660),maxVaryingVectors:K.getParameter(36348),
maxFragmentUniforms:K.getParameter(36349),glsl:K.getParameter(35724),renderer:K.getParameter(7937),vendor:K.getParameter(7936),version:K.getParameter(7938),readFloat:c,npotTextureCube:H}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(Z,ha,$a){var b=Z("./util/check"),da=Z("./util/is-typed-array");ha.exports=function(K,L,e,l,q,c,G){function H(U){var n;null===L.next?(b(q.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
n=5121):(b(null!==L.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),n=L.next.colorAttachments[0].texture._texture.type,b.optional(function(){c.oes_texture_float?(b(5121===n||5126===n,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===n&&b(G.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):b(5121===n,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var v=0,y=0,H=l.framebufferWidth,w=l.framebufferHeight,T=null;da(U)?T=U:U&&(b.type(U,"object","invalid arguments to regl.read()"),v=U.x|0,y=U.y|0,b(0<=v&&v<l.framebufferWidth,"invalid x offset for regl.read"),b(0<=y&&y<l.framebufferHeight,"invalid y offset for regl.read"),H=(U.width||l.framebufferWidth-v)|0,w=(U.height||l.framebufferHeight-y)|0,T=U.data||null);T&&(5121===n?b(T instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===n&&b(T instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));b(0<H&&H+v<=l.framebufferWidth,"invalid width for read pixels");b(0<w&&w+y<=l.framebufferHeight,"invalid height for read pixels");e();U=H*w*4;T||(5121===n?T=new Uint8Array(U):5126===n&&(T=T||new Float32Array(U)));b.isTypedArray(T,"data buffer for regl.read() must be a typedarray");b(T.byteLength>=U,"data buffer for regl.read() too small");K.pixelStorei(3333,4);K.readPixels(v,y,H,w,6408,n,T);return T}function B(c){var l;
L.setFBO({framebuffer:c.framebuffer},function(){l=H(c)});return l}return function(c){return c&&"framebuffer"in c?B(c):H(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(Z,ha,$a){var b=Z("./util/sorted-object-keys"),da=Z("./util/check"),K=Z("./util/values"),L=[];L[32854]=2;L[32855]=2;L[36194]=2;L[33189]=2;L[36168]=1;L[34041]=4;L[35907]=4;L[34836]=16;L[34842]=8;L[34843]=6;ha.exports=function(e,l,q,c,G){function H(c){this.id=v++;this.refCount=1;this.renderbuffer=c;this.format=32854;
this.height=this.width=0;G.profile&&(this.stats={size:0})}function B(l){var q=l.renderbuffer;da(q,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(q);l.renderbuffer=null;l.refCount=0;delete y[l.id];c.renderbufferCount--}var U={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};l.ext_srgb&&(U.srgba=35907);l.ext_color_buffer_half_float&&(U.rgba16f=34842,U.rgb16f=34843);l.webgl_color_buffer_float&&(U.rgba32f=34836);var n=
[];b(U).forEach(function(c){n[U[c]]=c});var v=0,y={};H.prototype.decRef=function(){0>=--this.refCount&&B(this)};G.profile&&(c.getTotalRenderbufferSize=function(){var c=0;b(y).forEach(function(l){c+=y[l].stats.size});return c});return{create:function(l,w){function b(c,l){var k=0,u=0,S=32854;"object"===typeof c&&c?("shape"in c?(u=c.shape,da(Array.isArray(u)&&2<=u.length,"invalid renderbuffer shape"),k=u[0]|0,u=u[1]|0):("radius"in c&&(k=u=c.radius|0),"width"in c&&(k=c.width|0),"height"in c&&(u=c.height|
0)),"format"in c&&(da.parameter(c.format,U,"invalid renderbuffer format"),S=U[c.format])):"number"===typeof c?(k=c|0,u="number"===typeof l?l|0:k):c?da.raise("invalid arguments to renderbuffer constructor"):k=u=1;da(0<k&&0<u&&k<=q.maxRenderbufferSize&&u<=q.maxRenderbufferSize,"invalid renderbuffer size");if(k!==z.width||u!==z.height||S!==z.format)return b.width=z.width=k,b.height=z.height=u,z.format=S,e.bindRenderbuffer(36161,z.renderbuffer),e.renderbufferStorage(36161,S,k,u),da(0===e.getError(),"invalid render buffer format"),
G.profile&&(z.stats.size=L[z.format]*z.width*z.height),b.format=n[z.format],b}var z=new H(e.createRenderbuffer());y[z.id]=z;c.renderbufferCount++;b(l,w);b.resize=function(c,l){var k=c|0,u=l|0||k;if(k===z.width&&u===z.height)return b;da(0<k&&0<u&&k<=q.maxRenderbufferSize&&u<=q.maxRenderbufferSize,"invalid renderbuffer size");b.width=z.width=k;b.height=z.height=u;e.bindRenderbuffer(36161,z.renderbuffer);e.renderbufferStorage(36161,z.format,k,u);da(0===e.getError(),"invalid render buffer format");G.profile&&
(z.stats.size=L[z.format]*z.width*z.height);return b};b._reglType="renderbuffer";b._renderbuffer=z;G.profile&&(b.stats=z.stats);b.destroy=function(){z.decRef()};return b},clear:function(){K(y).forEach(B)},restore:function(){K(y).forEach(function(c){c.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,c.renderbuffer);e.renderbufferStorage(36161,c.format,c.width,c.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(Z,
ha,$a){var b=Z("./util/sorted-object-keys"),da=Z("./util/check"),K=Z("./util/extend"),L=Z("./util/values");ha.exports=function(e,l,q,c){function G(c,l,q,k){this.name=c;this.id=l;this.location=q;this.info=k}function H(c,l){for(var q=0;q<c.length;++q)if(c[q].id===l.id){c[q].location=l.location;return}c.push(l)}function B(c,q,w){var k=35632===c?v:y,u=k[q];if(!u){var S=l.str(q),u=e.createShader(c);e.shaderSource(u,S);e.compileShader(u);da.shaderError(e,u,S,c,w);k[q]=u}return u}function U(l,q){this.id=
T++;this.fragId=l;this.vertId=q;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;c.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function n(q,w,b){var k;k=B(35632,q.fragId);var u=B(35633,q.vertId),S=q.program=e.createProgram();e.attachShader(S,k);e.attachShader(S,u);if(b)for(k=0;k<b.length;++k)u=b[k],e.bindAttribLocation(S,u[0],u[1]);e.linkProgram(S);da.linkError(e,S,l.str(q.fragId),l.str(q.vertId),w);b=e.getProgramParameter(S,35718);c.profile&&(q.stats.uniformsCount=
b);u=q.uniforms;for(k=0;k<b;++k)if(w=e.getActiveUniform(S,k))if(1<w.size)for(var h=0;h<w.size;++h){var v=w.name.replace("[0]","["+h+"]");H(u,new G(v,l.id(v),e.getUniformLocation(S,v),w))}else H(u,new G(w.name,l.id(w.name),e.getUniformLocation(S,w.name),w));b=e.getProgramParameter(S,35721);c.profile&&(q.stats.attributesCount=b);q=q.attributes;for(k=0;k<b;++k)(w=e.getActiveAttrib(S,k))&&H(q,new G(w.name,l.id(w.name),e.getAttribLocation(S,w.name),w))}var v={},y={},ba={},w=[],T=0;c.profile&&(q.getMaxUniformsCount=
function(){var c=0;w.forEach(function(l){l.stats.uniformsCount>c&&(c=l.stats.uniformsCount)});return c},q.getMaxAttributesCount=function(){var c=0;w.forEach(function(l){l.stats.attributesCount>c&&(c=l.stats.attributesCount)});return c});return{clear:function(){var c=e.deleteShader.bind(e);L(v).forEach(c);v={};L(y).forEach(c);y={};w.forEach(function(c){e.deleteProgram(c.program)});w.length=0;ba={};q.shaderCount=0},program:function(c,l,L,k){da.command(0<=c,"missing vertex shader",L);da.command(0<=l,
"missing fragment shader",L);var u=ba[l];u||(u=ba[l]={});var S=u[c];if(S&&(S.refCount++,!k))return S;var h=new U(l,c);q.shaderCount++;n(h,L,k);S||(u[c]=h);w.push(h);return K(h,{destroy:function(){h.refCount--;if(0>=h.refCount){e.deleteProgram(h.program);var c=w.indexOf(h);w.splice(c,1);q.shaderCount--}0>=u[h.vertId].refCount&&(e.deleteShader(y[h.vertId]),delete y[h.vertId],delete ba[h.fragId][h.vertId]);b(ba[h.fragId]).length||(e.deleteShader(v[h.fragId]),delete v[h.fragId],delete ba[h.fragId])}})},
restore:function(){v={};y={};for(var c=0;c<w.length;++c)n(w[c],null,w[c].attributes.map(function(c){return[c.location,c.name]}))},shader:B,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(Z,ha,$a){ha.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(Z,ha,$a){ha.exports=function(){var b={"":0},
da=[""];return{id:function(K){var L=b[K];if(L)return L;L=b[K]=da.length;da.push(K);return L},str:function(b){return da[b]}}}},{}],19:[function(Z,ha,$a){function b(d){return"[object "+d+"]"}function da(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function K(d){return Array.isArray(d)&&0!==d.length&&ba(d[0])?!0:!1}function L(d){return Object.prototype.toString.call(d)}function e(d){if(!d)return!1;var c=L(d);return 0<=Y.indexOf(c)?!0:da(d)||K(d)||n(d)}function l(d,c){36193===d.type?
(d.data=y(c),v.freeType(c)):d.data=c}function q(d,c,a,l,h,f){d="undefined"!==typeof F[d]?F[d]:k[d]*C[c];f&&(d*=6);if(h){for(l=0;1<=a;)l+=d*a*a,a/=2;return l}return d*a*l}var c=Z("./util/sorted-object-keys"),G=Z("./util/check"),H=Z("./util/extend"),B=Z("./util/values"),U=Z("./util/is-typed-array"),n=Z("./util/is-ndarray"),v=Z("./util/pool"),y=Z("./util/to-half-float"),ba=Z("./util/is-array-like"),w=Z("./util/flatten"),T=Z("./util/is-pow2");$a=Z("./constants/arraytypes.json");var z=Z("./constants/arraytypes.json"),
Q=[9984,9986,9985,9987],ia=[0,6409,6410,6407,6408],k={};k[6409]=k[6406]=k[6402]=1;k[34041]=k[6410]=2;k[6407]=k[35904]=3;k[6408]=k[35906]=4;var u=b("HTMLCanvasElement"),S=b("OffscreenCanvas"),h=b("CanvasRenderingContext2D"),X=b("ImageBitmap"),f=b("HTMLImageElement"),x=b("HTMLVideoElement"),Y=c($a).concat([u,S,h,X,f,x]),C=[];C[5121]=1;C[5126]=4;C[36193]=2;C[5123]=2;C[5125]=4;var F=[];F[32854]=2;F[32855]=2;F[36194]=2;F[34041]=4;F[33776]=.5;F[33777]=.5;F[33778]=1;F[33779]=1;F[35986]=.5;F[35987]=1;F[34798]=
1;F[35840]=.5;F[35841]=.25;F[35842]=.5;F[35843]=.25;F[36196]=.5;ha.exports=function(d,t,a,b,A,F,C){function W(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(a,d){a.internalformat=d.internalformat;a.format=d.format;a.type=d.type;a.compressed=d.compressed;a.premultiplyAlpha=d.premultiplyAlpha;a.flipY=d.flipY;a.unpackAlignment=d.unpackAlignment;a.colorSpace=
d.colorSpace;a.width=d.width;a.height=d.height;a.channels=d.channels}function R(d,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(G.type(c.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),d.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(G.type(c.flipY,"boolean","invalid texture flip"),d.flipY=c.flipY);"alignment"in c&&(G.oneOf(c.alignment,[1,2,4,8],"invalid texture unpack alignment"),d.unpackAlignment=c.alignment);"colorSpace"in c&&(G.parameter(c.colorSpace,Ta,"invalid colorSpace"),
d.colorSpace=Ta[c.colorSpace]);if("type"in c){var g=c.type;G(t.oes_texture_float||!("float"===g||"float32"===g),"you must enable the OES_texture_float extension in order to use floating point textures.");G(t.oes_texture_half_float||!("half float"===g||"float16"===g),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");G(t.webgl_depth_texture||!("uint16"===g||"uint32"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
G.parameter(g,r,"invalid texture type");d.type=r[g]}var m=d.width,l=d.height,h=d.channels,g=!1;"shape"in c?(G(Array.isArray(c.shape)&&2<=c.shape.length,"shape must be an array"),m=c.shape[0],l=c.shape[1],3===c.shape.length&&(h=c.shape[2],G(0<h&&4>=h,"invalid number of channels"),g=!0),G(0<=m&&m<=a.maxTextureSize,"invalid width"),G(0<=l&&l<=a.maxTextureSize,"invalid height")):("radius"in c&&(m=l=c.radius,G(0<=m&&m<=a.maxTextureSize,"invalid radius")),"width"in c&&(m=c.width,G(0<=m&&m<=a.maxTextureSize,
"invalid width")),"height"in c&&(l=c.height,G(0<=l&&l<=a.maxTextureSize,"invalid height")),"channels"in c&&(h=c.channels,G(0<h&&4>=h,"invalid number of channels"),g=!0));d.width=m|0;d.height=l|0;d.channels=h|0;m=!1;"format"in c&&(m=c.format,G(t.webgl_depth_texture||!("depth"===m||"depth stencil"===m),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),G.parameter(m,p,"invalid texture format"),l=d.internalformat=p[m],d.format=Da[l],m in r&&!("type"in c)&&(d.type=
r[m]),m in E&&(d.compressed=!0),m=!0);!g&&m?d.channels=k[d.format]:g&&!m?d.channels!==ia[d.format]&&(d.format=d.internalformat=ia[d.channels]):m&&g&&G(d.channels===k[d.format],"number of channels inconsistent with specified format")}}function O(a){d.pixelStorei(37440,a.flipY);d.pixelStorei(37441,a.premultiplyAlpha);d.pixelStorei(37443,a.colorSpace);d.pixelStorei(3317,a.unpackAlignment)}function D(){W.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function g(d,c){var g=null;e(c)?g=c:c&&(G.type(c,"object","invalid pixel data type"),R(d,c),"x"in c&&(d.xOffset=c.x|0),"y"in c&&(d.yOffset=c.y|0),e(c.data)&&(g=c.data));G(!d.compressed||g instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){G(!g,"can not specify copy and data field for the same texture");var r=A.viewportWidth,m=A.viewportHeight;d.width=d.width||r-d.xOffset;d.height=d.height||m-d.yOffset;d.needsCopy=!0;G(0<=d.xOffset&&d.xOffset<r&&0<=d.yOffset&&
d.yOffset<m&&0<d.width&&d.width<=r&&0<d.height&&d.height<=m,"copy texture read out of bounds")}else if(!g)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(U(g))d.channels=d.channels||4,d.data=g,"type"in c||5121!==d.type||(d.type=z[Object.prototype.toString.call(g)]|0);else if(da(g)){d.channels=d.channels||4;r=g;m=r.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:m=v.allocType(d.type,m);m.set(r);d.data=m;break;case 36193:d.data=y(r);break;default:G.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(n(g)){r=g.data;Array.isArray(r)||5121!==d.type||(d.type=z[Object.prototype.toString.call(r)]|0);var m=g.shape,k=g.stride,p,I,E,q;3===m.length?(E=m[2],q=k[2]):(G(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),q=E=1);p=m[0];I=m[1];m=k[0];k=k[1];d.alignment=1;d.width=p;d.height=I;d.channels=E;d.format=d.internalformat=ia[E];d.needsFree=!0;p=q;g=g.offset;E=d.width;q=d.height;I=d.channels;for(var t=v.allocType(36193===d.type?5126:d.type,E*q*I),na=0,sa=0;sa<q;++sa)for(var Ja=
0;Ja<E;++Ja)for(var Da=0;Da<I;++Da)t[na++]=r[m*Ja+k*sa+p*Da+g];l(d,t)}else if(L(g)===u||L(g)===S||L(g)===h)L(g)===u||L(g)===S?d.element=g:d.element=g.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(L(g)===X)d.element=g,d.width=g.width,d.height=g.height,d.channels=4;else if(L(g)===f)d.element=g,d.width=g.naturalWidth,d.height=g.naturalHeight,d.channels=4;else if(L(g)===x)d.element=g,d.width=g.videoWidth,d.height=g.videoHeight,d.channels=4;else if(K(g)){r=d.width||g[0].length;
m=d.height||g.length;k=d.channels;k=ba(g[0][0])?k||g[0][0].length:k||1;p=w.shape(g);E=1;for(q=0;q<p.length;++q)E*=p[q];E=v.allocType(36193===d.type?5126:d.type,E);w.flatten(g,p,"",E);l(d,E);d.alignment=1;d.width=r;d.height=m;d.channels=k;d.format=d.internalformat=ia[k];d.needsFree=!0}5126===d.type?G(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&G(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function N(a,c,g,r,m){var k=a.element,p=a.data,l=a.internalformat,h=a.format,f=a.type,I=a.width,E=a.height;O(a);k?d.texSubImage2D(c,m,g,r,h,f,k):a.compressed?d.compressedTexSubImage2D(c,m,g,r,l,I,E,p):a.needsCopy?(b(),d.copyTexSubImage2D(c,m,g,r,a.xOffset,a.yOffset,I,E)):d.texSubImage2D(c,m,g,r,I,E,h,f,p)}function M(){return oa.pop()||new D}function Ca(a){a.needsFree&&v.freeType(a.data);D.call(a);oa.push(a)}function qa(){W.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function m(a,d,c){var g=a.images[0]=M();a.mipmask=1;g.width=a.width=d;g.height=a.height=c;g.channels=a.channels=4}function J(a,d){var c=null;if(e(d))c=a.images[0]=M(),ea(c,a),g(c,d),a.mipmask=1;else if(R(a,d),Array.isArray(d.mipmap))for(var r=d.mipmap,m=0;m<r.length;++m)c=a.images[m]=M(),ea(c,a),c.width>>=m,c.height>>=m,g(c,r[m]),a.mipmask|=1<<m;else c=a.images[0]=M(),ea(c,a),g(c,d),a.mipmask=1;ea(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||G(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function aa(a,c){for(var g=a.images,r=0;r<g.length&&g[r];++r){var m=g[r],k=c,p=r,l=m.element,h=m.data,f=m.internalformat,I=m.format,E=m.type,q=m.width,t=m.height;O(m);l?d.texImage2D(k,p,I,I,E,l):m.compressed?d.compressedTexImage2D(k,p,f,q,t,0,h):m.needsCopy?(b(),d.copyTexImage2D(k,p,I,m.xOffset,m.yOffset,q,t,0)):d.texImage2D(k,
p,I,q,t,0,I,E,h||null)}}function P(){var a=xa.pop()||new qa;W.call(a);for(var d=a.mipmask=0;16>d;++d)a.images[d]=null;return a}function la(a){for(var d=a.images,c=0;c<d.length;++c)d[c]&&Ca(d[c]),d[c]=null;xa.push(a)}function ra(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Y(d,c){if("min"in c){var g=c.min;G.parameter(g,Za);d.minFilter=Za[g];0<=Q.indexOf(d.minFilter)&&!("faces"in c)&&(d.genMipmaps=!0)}"mag"in c&&
(g=c.mag,G.parameter(g,na),d.magFilter=na[g]);var g=d.wrapS,r=d.wrapT;if("wrap"in c){var m=c.wrap;"string"===typeof m?(G.parameter(m,Ja),g=r=Ja[m]):Array.isArray(m)&&(G.parameter(m[0],Ja),G.parameter(m[1],Ja),g=Ja[m[0]],r=Ja[m[1]])}else"wrapS"in c&&(g=c.wrapS,G.parameter(g,Ja),g=Ja[g]),"wrapT"in c&&(r=c.wrapT,G.parameter(r,Ja),r=Ja[r]);d.wrapS=g;d.wrapT=r;"anisotropic"in c&&(g=c.anisotropic,G("number"===typeof g&&1<=g&&g<=a.maxAnisotropic,"aniso samples must be between 1 and "),d.anisotropic=c.anisotropic);
if("mipmap"in c){g=!1;switch(typeof c.mipmap){case "string":G.parameter(c.mipmap,ya,"invalid mipmap hint");d.mipmapHint=ya[c.mipmap];g=d.genMipmaps=!0;break;case "boolean":g=d.genMipmaps=c.mipmap;break;case "object":G(Array.isArray(c.mipmap),"invalid mipmap type");d.genMipmaps=!1;g=!0;break;default:G.raise("invalid mipmap type")}!g||"min"in c||(d.minFilter=9984)}}function wa(a,c){d.texParameteri(c,10241,a.minFilter);d.texParameteri(c,10240,a.magFilter);d.texParameteri(c,10242,a.wrapS);d.texParameteri(c,
10243,a.wrapT);t.ext_texture_filter_anisotropic&&d.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(d.hint(33170,a.mipmapHint),d.generateMipmap(c))}function fa(a){W.call(this);this.mipmask=0;this.internalformat=6408;this.id=Fa++;this.refCount=1;this.target=a;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ra;C.profile&&(this.stats={size:0})}function Ba(a){d.activeTexture(33984);d.bindTexture(a.target,a.texture)}function ka(){var a=ua[0];a?d.bindTexture(a.target,a.texture):
d.bindTexture(3553,null)}function pa(a){var c=a.texture;G(c,"must not double destroy texture");var g=a.unit,m=a.target;0<=g&&(d.activeTexture(33984+g),d.bindTexture(m,null),ua[g]=null);d.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete ma[a.id];F.textureCount--}var ya={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ja={repeat:10497,clamp:33071,mirror:33648},na={nearest:9728,linear:9729},Za=H({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},na),Ta={none:0,browser:37444},r={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},p={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},E={};t.ext_srgb&&(p.srgb=35904,p.srgba=35906);t.oes_texture_float&&(r.float32=r["float"]=5126);t.oes_texture_half_float&&(r.float16=r["half float"]=36193);t.webgl_depth_texture&&(H(p,{depth:6402,"depth stencil":34041}),H(r,{uint16:5123,uint32:5125,
"depth stencil":34042}));t.webgl_compressed_texture_s3tc&&H(E,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});t.webgl_compressed_texture_atc&&H(E,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});t.webgl_compressed_texture_pvrtc&&H(E,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});t.webgl_compressed_texture_etc1&&(E["rgb etc1"]=36196);var va=Array.prototype.slice.call(d.getParameter(34467));
c(E).forEach(function(a){var d=E[a];0<=va.indexOf(d)&&(p[a]=d)});var Ea=c(p);a.textureFormats=Ea;var td=[];c(p).forEach(function(a){td[p[a]]=a});var Hb=[];c(r).forEach(function(a){Hb[r[a]]=a});var ga=[];c(na).forEach(function(a){ga[na[a]]=a});var I=[];c(Za).forEach(function(a){I[Za[a]]=a});var sa=[];c(Ja).forEach(function(a){sa[Ja[a]]=a});var Da=Ea.reduce(function(a,d){var c=p[d];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||t.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=d.indexOf("rgba")?
a[c]=6408:a[c]=6407;return a},{}),oa=[],xa=[],Fa=0,ma={},V=a.maxTextureUnits,ua=Array(V).map(function(){return null});H(fa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<V;++c){var g=ua[c];if(g){if(0<g.bindCount)continue;g.unit=-1}ua[c]=this;a=c;break}a>=V&&G.raise("insufficient number of texture units");C.profile&&F.maxTextureUnits<a+1&&(F.maxTextureUnits=a+1);this.unit=a;d.activeTexture(33984+a);d.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});C.profile&&(F.getTotalTextureSize=function(){var a=0;c(ma).forEach(function(d){a+=ma[d].stats.size});return a});return{create2D:function(c,r){function k(d,c){var g=p.texInfo;ra.call(g);var r=P();"number"===typeof d?"number"===typeof c?m(r,d|0,c|0):m(r,d|0,d|0):d?(G.type(d,"object","invalid arguments to regl.texture"),Y(g,d),J(r,d)):m(r,1,1);g.genMipmaps&&(r.mipmask=(r.width<<1)-1);p.mipmask=r.mipmask;ea(p,r);G.texture2D(g,r,a);p.internalformat=r.internalformat;
k.width=r.width;k.height=r.height;Ba(p);aa(r,3553);wa(g,3553);ka();la(r);C.profile&&(p.stats.size=q(p.internalformat,p.type,r.width,r.height,g.genMipmaps,!1));k.format=td[p.internalformat];k.type=Hb[p.type];k.mag=ga[g.magFilter];k.min=I[g.minFilter];k.wrapS=sa[g.wrapS];k.wrapT=sa[g.wrapT];return k}var p=new fa(3553);ma[p.id]=p;F.textureCount++;k(c,r);k.subimage=function(a,d,c,r){G(!!a,"must specify image data");d|=0;c|=0;r|=0;var m=M();ea(m,p);m.width=0;m.height=0;g(m,a);m.width=m.width||(p.width>>
r)-d;m.height=m.height||(p.height>>r)-c;G(p.type===m.type&&p.format===m.format&&p.internalformat===m.internalformat,"incompatible format for texture.subimage");G(0<=d&&0<=c&&d+m.width<=p.width&&c+m.height<=p.height,"texture.subimage write out of bounds");G(p.mipmask&1<<r,"missing mipmap data");G(m.data||m.element||m.needsCopy,"missing image data");Ba(p);N(m,3553,d,c,r);ka();Ca(m);return k};k.resize=function(a,c){var g=a|0,r=c|0||g;if(g===p.width&&r===p.height)return k;k.width=p.width=g;k.height=p.height=
r;Ba(p);for(var m=0;p.mipmask>>m;++m){var l=g>>m,h=r>>m;if(!l||!h)break;d.texImage2D(3553,m,p.format,l,h,0,p.format,p.type,null)}ka();C.profile&&(p.stats.size=q(p.internalformat,p.type,g,r,!1,!1));return k};k._reglType="texture2d";k._texture=p;C.profile&&(k.stats=p.stats);k.destroy=function(){p.decRef()};return k},createCube:function(c,r,k,p,l,h){function f(d,c,g,r,k,p){var l,h=E.texInfo;ra.call(h);for(l=0;6>l;++l)t[l]=P();if("number"!==typeof d&&d)if("object"===typeof d)if(c)J(t[0],d),J(t[1],c),
J(t[2],g),J(t[3],r),J(t[4],k),J(t[5],p);else if(Y(h,d),R(E,d),"faces"in d)for(d=d.faces,G(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),l=0;6>l;++l)G("object"===typeof d[l]&&!!d[l],"invalid input for cube map face"),ea(t[l],E),J(t[l],d[l]);else for(l=0;6>l;++l)J(t[l],d);else G.raise("invalid arguments to cube map");else for(d=d|0||1,l=0;6>l;++l)m(t[l],d,d);ea(E,t[0]);G.optional(function(){a.npotTextureCube||G(T(E.width)&&T(E.height),"your browser does not support non power or two texture dimensions")});
E.mipmask=h.genMipmaps?(t[0].width<<1)-1:t[0].mipmask;G.textureCube(E,h,t,a);E.internalformat=t[0].internalformat;f.width=t[0].width;f.height=t[0].height;Ba(E);for(l=0;6>l;++l)aa(t[l],34069+l);wa(h,34067);ka();C.profile&&(E.stats.size=q(E.internalformat,E.type,f.width,f.height,h.genMipmaps,!0));f.format=td[E.internalformat];f.type=Hb[E.type];f.mag=ga[h.magFilter];f.min=I[h.minFilter];f.wrapS=sa[h.wrapS];f.wrapT=sa[h.wrapT];for(l=0;6>l;++l)la(t[l]);return f}var E=new fa(34067);ma[E.id]=E;F.cubeCount++;
var t=Array(6);f(c,r,k,p,l,h);f.subimage=function(a,d,c,r,m){G(!!d,"must specify image data");G("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;r|=0;m|=0;var k=M();ea(k,E);k.width=0;k.height=0;g(k,d);k.width=k.width||(E.width>>m)-c;k.height=k.height||(E.height>>m)-r;G(E.type===k.type&&E.format===k.format&&E.internalformat===k.internalformat,"incompatible format for texture.subimage");G(0<=c&&0<=r&&c+k.width<=E.width&&r+k.height<=E.height,"texture.subimage write out of bounds");G(E.mipmask&
1<<m,"missing mipmap data");G(k.data||k.element||k.needsCopy,"missing image data");Ba(E);N(k,34069+a,c,r,m);ka();Ca(k);return f};f.resize=function(a){a|=0;if(a!==E.width){f.width=E.width=a;f.height=E.height=a;Ba(E);for(var c=0;6>c;++c)for(var g=0;E.mipmask>>g;++g)d.texImage2D(34069+c,g,E.format,a>>g,a>>g,0,E.format,E.type,null);ka();C.profile&&(E.stats.size=q(E.internalformat,E.type,f.width,f.height,!1,!0));return f}};f._reglType="textureCube";f._texture=E;C.profile&&(f.stats=E.stats);f.destroy=function(){E.decRef()};
return f},clear:function(){for(var a=0;a<V;++a)d.activeTexture(33984+a),d.bindTexture(3553,null),ua[a]=null;B(ma).forEach(pa);F.cubeCount=0;F.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<V;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null)}B(ma).forEach(function(a){a.texture=d.createTexture();d.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)d.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,
a.type,null);else for(var g=0;6>g;++g)d.texImage2D(34069+g,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);wa(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<V;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null);d.activeTexture(33984+a);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(Z,ha,$a){ha.exports=function(b,da){function K(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function L(l,e,b){var v=q.pop()||new K;v.startQueryIndex=l;v.endQueryIndex=e;v.sum=0;v.stats=b;c.push(v)}if(!da.ext_disjoint_timer_query)return null;var e=[],l=[],q=[],c=[],G=[],H=[];return{beginQuery:function(c){var q=e.pop()||da.ext_disjoint_timer_query.createQueryEXT();da.ext_disjoint_timer_query.beginQueryEXT(35007,
q);l.push(q);L(l.length-1,l.length,c)},endQuery:function(){da.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:L,update:function(){var b,L;b=l.length;if(0!==b){H.length=Math.max(H.length,b+1);G.length=Math.max(G.length,b+1);G[0]=0;var n=H[0]=0;for(L=b=0;L<l.length;++L){var v=l[L];da.ext_disjoint_timer_query.getQueryObjectEXT(v,34919)?(n+=da.ext_disjoint_timer_query.getQueryObjectEXT(v,34918),e.push(v)):l[b++]=v;G[L+1]=n;H[L+1]=b}l.length=b;for(L=b=0;L<c.length;++L){var n=c[L],y=n.startQueryIndex,
v=n.endQueryIndex;n.sum+=G[v]-G[y];y=H[y];v=H[v];v===y?(n.stats.gpuTime+=n.sum/1E6,q.push(n)):(n.startQueryIndex=y,n.endQueryIndex=v,c[b++]=n)}c.length=b}},getNumPendingQueries:function(){return l.length},clear:function(){e.push.apply(e,l);for(var c=0;c<e.length;c++)da.ext_disjoint_timer_query.deleteQueryEXT(e[c]);l.length=0;e.length=0},restore:function(){l.length=0;e.length=0}}}},{}],21:[function(Z,ha,$a){function b(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function da(c){c=Error("(regl) "+
c);console.error(c);throw c;}function K(c,k){c||da(k)}function L(c){return c?": "+c:""}function e(c,k){switch(k){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function l(c,k,l){0>k.indexOf(c)&&da("invalid value"+L(l)+". must be one of: "+k)}function q(c,
k){for(c+="";c.length<k;)c=" "+c;return c}function c(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function G(c,k){this.number=c;this.line=k;this.errors=[]}function H(c,k,l){this.file=c;this.line=k;this.message=l}function B(){var c=Error(),c=(c.stack||c).toString(),k=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return k?k[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function U(){var c=Error(),c=(c.stack||c).toString(),k=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return k?k[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function n(k,l){var q=k.split("\n"),f=1,x=0,u={unknown:new c,0:new c};u.unknown.name=u[0].name=l||B();u.unknown.lines.push(new G(0,""));for(var e=0;e<q.length;++e){var w=q[e],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(w);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))f=d[1]|0,d[2]&&(x=d[2]|0,x in u||(u[x]=new c));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))u[x].name=d[1]?b(d[2]):d[2]}u[x].lines.push(new G(f++,
w))}Q(u).forEach(function(d){var a=u[d];a.lines.forEach(function(d){a.index[d.number]=d})});return u}function v(c){var k=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var l=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);l?k.push(new H(l[1]|0,l[2]|0,l[3].trim())):0<c.length&&k.push(new H("unknown",0,c))}});return k}function y(c,k){k.forEach(function(k){var l=c[k.file];if(l){var h=l.index[k.line];if(h){h.errors.push(k);l.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(k)})}
function ba(c){c._commandRef=B()}function w(c,k){var l=U();da(c+" in command "+(k||B())+("unknown"===l?"":" called from "+l))}function T(c,k,l,f){e(c,k)||w("invalid parameter type"+L(l)+". expected "+k+", got "+typeof c,f||B())}function z(c,k){return 32820===c||32819===c||33635===c?2:34042===c?4:u[c]*k}var Q=Z("./sorted-object-keys"),ia=Z("./is-typed-array");Z=Z("./extend");var k="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),u={};u[5120]=u[5121]=
1;u[5122]=u[5123]=u[36193]=u[33635]=u[32819]=u[32820]=2;u[5124]=u[5125]=u[5126]=u[34042]=4;ha.exports=Z(K,{optional:function(c){c()},raise:da,commandRaise:w,command:function(c,k,l){c||w(k,l||B())},parameter:function(c,k,l){c in k||da("unknown parameter ("+c+")"+L(l)+". possible values: "+Q(k).join())},commandParameter:function(c,k,l,f){c in k||w("unknown parameter ("+c+")"+L(l)+". possible values: "+Q(k).join(),f||B())},constructor:function(c){Q(c).forEach(function(c){0>k.indexOf(c)&&da('invalid regl constructor argument "'+
c+'". must be one of '+k)})},type:function(c,k,l){e(c,k)||da("invalid parameter type"+L(l)+". expected "+k+", got "+typeof c)},commandType:T,isTypedArray:function(c,k){ia(c)||da("invalid parameter type"+L(k)+". must be a typed array")},nni:function(c,k){0<=c&&(c|0)===c||da("invalid parameter type, ("+c+")"+L(k)+". must be a nonnegative integer")},oneOf:l,shaderError:function(c,k,l,f,x){if(!c.getShaderParameter(k,c.COMPILE_STATUS)){k=c.getShaderInfoLog(k);c=f===c.FRAGMENT_SHADER?"fragment":"vertex";
T(l,"string",c+" shader source must be a string",x);var u=n(l,x);l=v(k);y(u,l);Q(u).forEach(function(c){function k(d,c){l.push(d);a.push(c||"")}var d=u[c];if(d.hasErrors){var l=[""],a=[""];k("file number "+c+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(a){if(0<a.errors.length){k(q(a.number,4)+"|  ","background-color:yellow; font-weight:bold");k(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var d=0;a.errors.forEach(function(c){c=
c.message;var l=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(l){var f=l[1];c=l[2];switch(f){case "assign":f="="}d=Math.max(a.line.indexOf(f,d),0)}else d=0;k(q("| ",6));k(q("^^^",d+3)+"\n","font-weight:bold");k(q("| ",6));k(c+"\n","font-weight:bold")});k(q("| ",6)+"\n")}else k(q(a.number,4)+"|  "),k(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(l.join("")):(a[0]=l.join("%c"),console.log.apply(console,a))}});K.raise("Error compiling "+c+" shader, "+u[0].name)}},linkError:function(c,
k,l,f,q){c.getProgramParameter(k,c.LINK_STATUS)||(c=c.getProgramInfoLog(k),l=n(l,q),f='Error linking program with vertex shader, "'+n(f,q)[0].name+'", and fragment shader "'+l[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+c),K.raise(f))},callSite:U,saveCommandRef:ba,saveDrawInfo:function(c,k,l,f){function q(c){return c?f.id(c):0}function u(c,d){Q(d).forEach(function(d){c[f.id(d)]=!0})}ba(c);
c._fragId=q(c["static"].frag);c._vertId=q(c["static"].vert);var e=c._uniformSet={};u(e,k["static"]);u(e,k.dynamic);k=c._attributeSet={};u(k,l["static"]);u(k,l.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,k,q){c.texture?l(c.texture._texture.internalformat,k,"unsupported texture format for attachment"):l(c.renderbuffer._renderbuffer.format,q,"unsupported renderbuffer format for attachment")},guessCommand:B,
texture2D:function(c,k,l){var f=k.width,q=k.height,u=k.channels;K(0<f&&f<=l.maxTextureSize&&0<q&&q<=l.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||K(!(f&f-1)&&!!f&&!(q&q-1)&&!!q,"incompatible wrap mode for texture, both width and height must be power of 2");1===k.mipmask?1!==f&&1!==q&&K(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(K(!(f&f-1)&&!!f&&!(q&q-1)&&!!q,"texture must be a square power of 2 to support mipmapping"),
K(k.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===k.type&&(0>l.extensions.indexOf("oes_texture_float_linear")&&K(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),K(!c.genMipmaps,"mipmap generation not supported with float textures"));var e=k.images;for(l=0;16>l;++l)if(e[l]){var w=f>>l,d=q>>l;K(k.mipmask&1<<l,"missing mipmap data");var t=e[l];K(t.width===w&&t.height===d,"invalid shape for mip images");K(t.format===k.format&&t.internalformat===
k.internalformat&&t.type===k.type,"incompatible type for mip image");!t.compressed&&t.data&&(w=Math.ceil(z(t.type,u)*w/t.unpackAlignment)*t.unpackAlignment,K(t.data.byteLength===w*d,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||K(0===(k.mipmask&1<<l),"extra mipmap data");k.compressed&&K(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,k,l,f){var q=c.width,u=c.height,e=c.channels;K(0<q&&q<=f.maxTextureSize&&
0<u&&u<=f.maxTextureSize,"invalid texture shape");K(q===u,"cube map must be square");K(33071===k.wrapS&&33071===k.wrapT,"wrap mode not supported by cube map");for(f=0;f<l.length;++f){var w=l[f];K(w.width===q&&w.height===u,"inconsistent cube map face shape");k.genMipmaps&&(K(!w.compressed,"can not generate mipmap for compressed textures"),K(1===w.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=w.images,t=0;16>t;++t){var a=d[t];if(a){var b=q>>t,v=u>>t;K(w.mipmask&1<<t,"missing mipmap data");
K(a.width===b&&a.height===v,"invalid shape for mip images");K(a.format===c.format&&a.internalformat===c.internalformat&&a.type===c.type,"incompatible type for mip image");a.compressed||a.data&&K(a.data.byteLength===b*v*Math.max(z(a.type,e),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(Z,ha,$a){ha.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(Z,ha,$a){function b(e){return Array.prototype.slice.call(e)}function da(e){return b(e).join("")}var K=Z("./extend"),L=Z("./compiled-fns");ha.exports=function(){function e(){var l=[],q=[];return K(function(){l.push.apply(l,b(arguments))},{def:function(){var e="v"+c;c++;q.push(e);0<arguments.length&&(l.push(e,"="),l.push.apply(l,b(arguments)),l.push(";"));return e},toString:function(){return da([0<q.length?"var "+q.join(",")+";":"",da(l)])}})}function l(){function c(e,
b){q(e,b,"=",l.def(e,b),";")}var l=e(),q=e(),L=l.toString,H=q.toString;return K(function(){l.apply(l,b(arguments))},{def:l.def,entry:l,exit:q,save:c,set:function(q,e,b){c(q,e);l(q,e,"=",b,";")},toString:function(){return L()+H()}})}var q=0,c=0,G={},H=e(),B={};return{global:H,link:function(c){var l="$"+q,e=!1;"object"===typeof c&&c.name&&(l=c.name.replace(/ /g,"_"),e=!0);if(l in G)return l;G[l]=c;e||q++;return l},block:e,proc:function(c,q){function e(){var c="a"+b.length;b.push(c);return c}var b=[];
q=q||0;for(var L=0;L<q;++L)e();var L=l(),w=L.toString;return B[c]=K(L,{arg:e,toString:function(){return da(["function(",b.join(),"){",w(),"}"])}})},scope:l,cond:function(){var c=da(arguments),q=l(),e=l(),L=q.toString,H=e.toString;return K(q,{then:function(){q.apply(q,b(arguments));return this},"else":function(){e.apply(e,b(arguments));return this},toString:function(){var l=H();l&&(l="else{"+l+"}");return da(["if(",c,"){",L(),"}",l])}})},compile:function(){var c=[],l=[];Object.keys(G).sort(function(c,
l){var q="$"===c.charAt(0),e="$"===l.charAt(0);return q||e?q&&e?+c.slice(1)<+l.slice(1)?-1:1:q&&!e?-1:1:c.localeCompare(l)}).forEach(function(q){var e=G[q];c.push(q);l.push(e)});for(var q=0,e=c.length-1;-1<e;e--)if("$"===c[e].charAt(0)){q=e;break}var b=['"use strict";',H,"return {"];Object.keys(B).forEach(function(c){b.push('"',c,'":',B[c].toString(),",")});b.push("}");var e=da(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),q=c.slice(q).join(),w=L[q];if(!w)throw console.log("src code is:"),
console.log(e),console.log("compiled values:",l),console.log("linked names:",c),console.log("Keys available:",Object.keys(L)),console.log("Key:",q),console.log('"'+q+'": function('+c.join(", ")+") \n{\n"+e+"\n},"),Error("missing precompiled function with key: "+q);return w.apply(null,l)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(Z,ha,$a){ha.exports={$0:function(b){var da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F;da=b.attributes;K=b.current;L=b.framebuffer;e=b.gl;l=b.next;
q=b.vao;c=l.blend_color;G=K.blend_color;H=l.blend_equation;B=K.blend_equation;U=l.blend_func;n=K.blend_func;v=l.colorMask;y=K.colorMask;ba=l.depth_range;w=K.depth_range;T=l.polygonOffset_offset;z=K.polygonOffset_offset;Q=l.sample_coverage;ia=K.sample_coverage;k=l.scissor_box;u=K.scissor_box;S=l.stencil_func;h=K.stencil_func;X=l.stencil_opBack;f=K.stencil_opBack;x=l.stencil_opFront;Y=K.stencil_opFront;C=l.viewport;F=K.viewport;return{poll:function(){var d,q,a,b,A,da,Cc,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,
P,la;K.dirty=!1;q=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;da=l.polygonOffset_enable;Cc=l.sample_alpha;W=l.sample_enable;ea=l.scissor_enable;R=l.stencil_enable;O=l.cull_face;D=K.cull_face;g=l.depth_func;N=K.depth_func;M=l.depth_mask;Ca=K.depth_mask;qa=l.frontFace;m=K.frontFace;J=l.lineWidth;aa=K.lineWidth;P=l.stencil_mask;la=K.stencil_mask;d=L.next;d!==L.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null),L.cur=d);q!==K.blend_enable&&(q?e.enable(3042):e.disable(3042),
K.blend_enable=q);a!==K.cull_enable&&(a?e.enable(2884):e.disable(2884),K.cull_enable=a);b!==K.depth_enable&&(b?e.enable(2929):e.disable(2929),K.depth_enable=b);A!==K.dither&&(A?e.enable(3024):e.disable(3024),K.dither=A);da!==K.polygonOffset_enable&&(da?e.enable(32823):e.disable(32823),K.polygonOffset_enable=da);Cc!==K.sample_alpha&&(Cc?e.enable(32926):e.disable(32926),K.sample_alpha=Cc);W!==K.sample_enable&&(W?e.enable(32928):e.disable(32928),K.sample_enable=W);ea!==K.scissor_enable&&(ea?e.enable(3089):
e.disable(3089),K.scissor_enable=ea);R!==K.stencil_enable&&(R?e.enable(2960):e.disable(2960),K.stencil_enable=R);if(c[0]!==G[0]||c[1]!==G[1]||c[2]!==G[2]||c[3]!==G[3])e.blendColor(c[0],c[1],c[2],c[3]),G[0]=c[0],G[1]=c[1],G[2]=c[2],G[3]=c[3];if(H[0]!==B[0]||H[1]!==B[1])e.blendEquationSeparate(H[0],H[1]),B[0]=H[0],B[1]=H[1];if(U[0]!==n[0]||U[1]!==n[1]||U[2]!==n[2]||U[3]!==n[3])e.blendFuncSeparate(U[0],U[1],U[2],U[3]),n[0]=U[0],n[1]=U[1],n[2]=U[2],n[3]=U[3];if(v[0]!==y[0]||v[1]!==y[1]||v[2]!==y[2]||
v[3]!==y[3])e.colorMask(v[0],v[1],v[2],v[3]),y[0]=v[0],y[1]=v[1],y[2]=v[2],y[3]=v[3];O!==D&&(e.cullFace(O),K.cull_face=O);g!==N&&(e.depthFunc(g),K.depth_func=g);M!==Ca&&(e.depthMask(M),K.depth_mask=M);if(ba[0]!==w[0]||ba[1]!==w[1])e.depthRange(ba[0],ba[1]),w[0]=ba[0],w[1]=ba[1];qa!==m&&(e.frontFace(qa),K.frontFace=qa);J!==aa&&(e.lineWidth(J),K.lineWidth=J);if(T[0]!==z[0]||T[1]!==z[1])e.polygonOffset(T[0],T[1]),z[0]=T[0],z[1]=T[1];if(Q[0]!==ia[0]||Q[1]!==ia[1])e.sampleCoverage(Q[0],Q[1]),ia[0]=Q[0],
ia[1]=Q[1];if(k[0]!==u[0]||k[1]!==u[1]||k[2]!==u[2]||k[3]!==u[3])e.scissor(k[0],k[1],k[2],k[3]),u[0]=k[0],u[1]=k[1],u[2]=k[2],u[3]=k[3];if(S[0]!==h[0]||S[1]!==h[1]||S[2]!==h[2])e.stencilFunc(S[0],S[1],S[2]),h[0]=S[0],h[1]=S[1],h[2]=S[2];P!==la&&(e.stencilMask(P),K.stencil_mask=P);if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2]||X[3]!==f[3])e.stencilOpSeparate(X[0],X[1],X[2],X[3]),f[0]=X[0],f[1]=X[1],f[2]=X[2],f[3]=X[3];if(x[0]!==Y[0]||x[1]!==Y[1]||x[2]!==Y[2]||x[3]!==Y[3])e.stencilOpSeparate(x[0],x[1],x[2],
x[3]),Y[0]=x[0],Y[1]=x[1],Y[2]=x[2],Y[3]=x[3];if(C[0]!==F[0]||C[1]!==F[1]||C[2]!==F[2]||C[3]!==F[3])e.viewport(C[0],C[1],C[2],C[3]),F[0]=C[0],F[1]=C[1],F[2]=C[2],F[3]=C[3]},refresh:function(){var d,t,a,b,A,ja,Cc,W,ea,R,O,D,g,N,M,Ca;K.dirty=!1;t=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;ja=l.polygonOffset_enable;Cc=l.sample_alpha;W=l.sample_enable;ea=l.scissor_enable;R=l.stencil_enable;O=l.cull_face;D=l.depth_func;g=l.depth_mask;N=l.frontFace;M=l.lineWidth;Ca=l.stencil_mask;(d=L.next)?
e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null);L.cur=d;d=da[0];d.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=da[1];d.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,
d.x,d.y,d.z,d.w),d.buffer=null);d=da[2];d.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=da[3];d.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);
d=da[4];d.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=da[5];d.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=da[6];d.buffer?(e.enableVertexAttribArray(6),
e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=da[7];d.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=da[8];d.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,d.buffer.buffer),
e.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=da[9];d.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=da[10];d.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(10,d.size,
d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=da[11];d.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=da[12];d.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=da[13];d.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=da[14];d.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):
(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=da[15];d.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);q.currentVAO=null;q.setVAO(q.targetVAO);t?e.enable(3042):e.disable(3042);K.blend_enable=t;a?e.enable(2884):e.disable(2884);K.cull_enable=a;b?e.enable(2929):e.disable(2929);K.depth_enable=
b;A?e.enable(3024):e.disable(3024);K.dither=A;ja?e.enable(32823):e.disable(32823);K.polygonOffset_enable=ja;Cc?e.enable(32926):e.disable(32926);K.sample_alpha=Cc;W?e.enable(32928):e.disable(32928);K.sample_enable=W;ea?e.enable(3089):e.disable(3089);K.scissor_enable=ea;R?e.enable(2960):e.disable(2960);K.stencil_enable=R;e.blendColor(c[0],c[1],c[2],c[3]);G[0]=c[0];G[1]=c[1];G[2]=c[2];G[3]=c[3];e.blendEquationSeparate(H[0],H[1]);B[0]=H[0];B[1]=H[1];e.blendFuncSeparate(U[0],U[1],U[2],U[3]);n[0]=U[0];
n[1]=U[1];n[2]=U[2];n[3]=U[3];e.colorMask(v[0],v[1],v[2],v[3]);y[0]=v[0];y[1]=v[1];y[2]=v[2];y[3]=v[3];e.cullFace(O);K.cull_face=O;e.depthFunc(D);K.depth_func=D;e.depthMask(g);K.depth_mask=g;e.depthRange(ba[0],ba[1]);w[0]=ba[0];w[1]=ba[1];e.frontFace(N);K.frontFace=N;e.lineWidth(M);K.lineWidth=M;e.polygonOffset(T[0],T[1]);z[0]=T[0];z[1]=T[1];e.sampleCoverage(Q[0],Q[1]);ia[0]=Q[0];ia[1]=Q[1];e.scissor(k[0],k[1],k[2],k[3]);u[0]=k[0];u[1]=k[1];u[2]=k[2];u[3]=k[3];e.stencilFunc(S[0],S[1],S[2]);h[0]=S[0];
h[1]=S[1];h[2]=S[2];e.stencilMask(Ca);K.stencil_mask=Ca;e.stencilOpSeparate(X[0],X[1],X[2],X[3]);f[0]=X[0];f[1]=X[1];f[2]=X[2];f[3]=X[3];e.stencilOpSeparate(x[0],x[1],x[2],x[3]);Y[0]=x[0];Y[1]=x[1];Y[2]=x[2];Y[3]=x[3];e.viewport(C[0],C[1],C[2],C[3]);F[0]=C[0];F[1]=C[1];F[2]=C[2];F[3]=C[3]}}},$3:function(b,da,K,L){var e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja;e=b.context;l=b.current;q=b.framebuffer;c=b.gl;G=b.next;H=b.shader;B=b.vao;U=G.blend_color;n=l.blend_color;v=G.blend_equation;
y=l.blend_equation;ba=G.blend_func;w=l.blend_func;T=G.colorMask;z=l.colorMask;Q=G.depth_range;ia=l.depth_range;k=G.polygonOffset_offset;u=l.polygonOffset_offset;S=G.sample_coverage;h=l.sample_coverage;X=G.scissor_box;f=l.scissor_box;x=G.stencil_func;Y=l.stencil_func;C=G.stencil_opBack;F=l.stencil_opBack;d=G.stencil_opFront;t=l.stencil_opFront;a=G.viewport;ta=l.viewport;A={};ja={};return{batch:function(e,b){var A,R,O,D,g;A=q.next;A!==q.cur&&(A?c.bindFramebuffer(36160,A.framebuffer):c.bindFramebuffer(36160,
null),q.cur=A);if(l.dirty){A=G.dither;A!==l.dither&&(A?c.enable(3024):c.disable(3024),l.dither=A);A=G.blend_enable;A!==l.blend_enable&&(A?c.enable(3042):c.disable(3042),l.blend_enable=A);A=U[0];O=U[1];D=U[2];g=U[3];if(A!==n[0]||O!==n[1]||D!==n[2]||g!==n[3])c.blendColor(A,O,D,g),n[0]=A,n[1]=O,n[2]=D,n[3]=g;A=v[0];O=v[1];if(A!==y[0]||O!==y[1])c.blendEquationSeparate(A,O),y[0]=A,y[1]=O;A=ba[0];O=ba[1];D=ba[2];g=ba[3];if(A!==w[0]||O!==w[1]||D!==w[2]||g!==w[3])c.blendFuncSeparate(A,O,D,g),w[0]=A,w[1]=
O,w[2]=D,w[3]=g;A=G.depth_enable;A!==l.depth_enable&&(A?c.enable(2929):c.disable(2929),l.depth_enable=A);A=G.depth_func;A!==l.depth_func&&(c.depthFunc(A),l.depth_func=A);A=Q[0];O=Q[1];if(A!==ia[0]||O!==ia[1])c.depthRange(A,O),ia[0]=A,ia[1]=O;A=G.depth_mask;A!==l.depth_mask&&(c.depthMask(A),l.depth_mask=A);A=T[0];O=T[1];D=T[2];g=T[3];if(A!==z[0]||O!==z[1]||D!==z[2]||g!==z[3])c.colorMask(A,O,D,g),z[0]=A,z[1]=O,z[2]=D,z[3]=g;A=G.cull_enable;A!==l.cull_enable&&(A?c.enable(2884):c.disable(2884),l.cull_enable=
A);A=G.cull_face;A!==l.cull_face&&(c.cullFace(A),l.cull_face=A);A=G.frontFace;A!==l.frontFace&&(c.frontFace(A),l.frontFace=A);A=G.lineWidth;A!==l.lineWidth&&(c.lineWidth(A),l.lineWidth=A);A=G.polygonOffset_enable;A!==l.polygonOffset_enable&&(A?c.enable(32823):c.disable(32823),l.polygonOffset_enable=A);A=k[0];O=k[1];if(A!==u[0]||O!==u[1])c.polygonOffset(A,O),u[0]=A,u[1]=O;A=G.sample_alpha;A!==l.sample_alpha&&(A?c.enable(32926):c.disable(32926),l.sample_alpha=A);A=G.sample_enable;A!==l.sample_enable&&
(A?c.enable(32928):c.disable(32928),l.sample_enable=A);A=S[0];O=S[1];if(A!==h[0]||O!==h[1])c.sampleCoverage(A,O),h[0]=A,h[1]=O;A=G.stencil_enable;A!==l.stencil_enable&&(A?c.enable(2960):c.disable(2960),l.stencil_enable=A);A=G.stencil_mask;A!==l.stencil_mask&&(c.stencilMask(A),l.stencil_mask=A);A=x[0];O=x[1];D=x[2];if(A!==Y[0]||O!==Y[1]||D!==Y[2])c.stencilFunc(A,O,D),Y[0]=A,Y[1]=O,Y[2]=D;A=d[0];O=d[1];D=d[2];g=d[3];if(A!==t[0]||O!==t[1]||D!==t[2]||g!==t[3])c.stencilOpSeparate(A,O,D,g),t[0]=A,t[1]=
O,t[2]=D,t[3]=g;A=C[0];O=C[1];D=C[2];g=C[3];if(A!==F[0]||O!==F[1]||D!==F[2]||g!==F[3])c.stencilOpSeparate(A,O,D,g),F[0]=A,F[1]=O,F[2]=D,F[3]=g;A=G.scissor_enable;A!==l.scissor_enable&&(A?c.enable(3089):c.disable(3089),l.scissor_enable=A);A=X[0];O=X[1];D=X[2];g=X[3];if(A!==f[0]||O!==f[1]||D!==f[2]||g!==f[3])c.scissor(A,O,D,g),f[0]=A,f[1]=O,f[2]=D,f[3]=g;A=a[0];O=a[1];D=a[2];g=a[3];if(A!==ta[0]||O!==ta[1]||D!==ta[2]||g!==ta[3])c.viewport(A,O,D,g),ta[0]=A,ta[1]=O,ta[2]=D,ta[3]=g;l.dirty=!1}if(A=l.profile)R=
performance.now(),da.count+=b;O=H.program(H.vert,H.frag);c.useProgram(O.program);B.setVAO(null);D=O.id;(g=ja[D])||(g=ja[D]=L(O));g.call(this,e,b);B.setVAO(null);A&&(da.cpuTime+=performance.now()-R)},draw:function(e){var b,L,R,O,D;b=q.next;b!==q.cur&&(b?c.bindFramebuffer(36160,b.framebuffer):c.bindFramebuffer(36160,null),q.cur=b);if(l.dirty){b=G.dither;b!==l.dither&&(b?c.enable(3024):c.disable(3024),l.dither=b);b=G.blend_enable;b!==l.blend_enable&&(b?c.enable(3042):c.disable(3042),l.blend_enable=b);
b=U[0];R=U[1];O=U[2];D=U[3];if(b!==n[0]||R!==n[1]||O!==n[2]||D!==n[3])c.blendColor(b,R,O,D),n[0]=b,n[1]=R,n[2]=O,n[3]=D;b=v[0];R=v[1];if(b!==y[0]||R!==y[1])c.blendEquationSeparate(b,R),y[0]=b,y[1]=R;b=ba[0];R=ba[1];O=ba[2];D=ba[3];if(b!==w[0]||R!==w[1]||O!==w[2]||D!==w[3])c.blendFuncSeparate(b,R,O,D),w[0]=b,w[1]=R,w[2]=O,w[3]=D;b=G.depth_enable;b!==l.depth_enable&&(b?c.enable(2929):c.disable(2929),l.depth_enable=b);b=G.depth_func;b!==l.depth_func&&(c.depthFunc(b),l.depth_func=b);b=Q[0];R=Q[1];if(b!==
ia[0]||R!==ia[1])c.depthRange(b,R),ia[0]=b,ia[1]=R;b=G.depth_mask;b!==l.depth_mask&&(c.depthMask(b),l.depth_mask=b);b=T[0];R=T[1];O=T[2];D=T[3];if(b!==z[0]||R!==z[1]||O!==z[2]||D!==z[3])c.colorMask(b,R,O,D),z[0]=b,z[1]=R,z[2]=O,z[3]=D;b=G.cull_enable;b!==l.cull_enable&&(b?c.enable(2884):c.disable(2884),l.cull_enable=b);b=G.cull_face;b!==l.cull_face&&(c.cullFace(b),l.cull_face=b);b=G.frontFace;b!==l.frontFace&&(c.frontFace(b),l.frontFace=b);b=G.lineWidth;b!==l.lineWidth&&(c.lineWidth(b),l.lineWidth=
b);b=G.polygonOffset_enable;b!==l.polygonOffset_enable&&(b?c.enable(32823):c.disable(32823),l.polygonOffset_enable=b);b=k[0];R=k[1];if(b!==u[0]||R!==u[1])c.polygonOffset(b,R),u[0]=b,u[1]=R;b=G.sample_alpha;b!==l.sample_alpha&&(b?c.enable(32926):c.disable(32926),l.sample_alpha=b);b=G.sample_enable;b!==l.sample_enable&&(b?c.enable(32928):c.disable(32928),l.sample_enable=b);b=S[0];R=S[1];if(b!==h[0]||R!==h[1])c.sampleCoverage(b,R),h[0]=b,h[1]=R;b=G.stencil_enable;b!==l.stencil_enable&&(b?c.enable(2960):
c.disable(2960),l.stencil_enable=b);b=G.stencil_mask;b!==l.stencil_mask&&(c.stencilMask(b),l.stencil_mask=b);b=x[0];R=x[1];O=x[2];if(b!==Y[0]||R!==Y[1]||O!==Y[2])c.stencilFunc(b,R,O),Y[0]=b,Y[1]=R,Y[2]=O;b=d[0];R=d[1];O=d[2];D=d[3];if(b!==t[0]||R!==t[1]||O!==t[2]||D!==t[3])c.stencilOpSeparate(b,R,O,D),t[0]=b,t[1]=R,t[2]=O,t[3]=D;b=C[0];R=C[1];O=C[2];D=C[3];if(b!==F[0]||R!==F[1]||O!==F[2]||D!==F[3])c.stencilOpSeparate(b,R,O,D),F[0]=b,F[1]=R,F[2]=O,F[3]=D;b=G.scissor_enable;b!==l.scissor_enable&&(b?
c.enable(3089):c.disable(3089),l.scissor_enable=b);b=X[0];R=X[1];O=X[2];D=X[3];if(b!==f[0]||R!==f[1]||O!==f[2]||D!==f[3])c.scissor(b,R,O,D),f[0]=b,f[1]=R,f[2]=O,f[3]=D;b=a[0];R=a[1];O=a[2];D=a[3];if(b!==ta[0]||R!==ta[1]||O!==ta[2]||D!==ta[3])c.viewport(b,R,O,D),ta[0]=b,ta[1]=R,ta[2]=O,ta[3]=D;l.dirty=!1}if(b=l.profile)L=performance.now(),da.count++;R=H.program(H.vert,H.frag);c.useProgram(R.program);B.setVAO(null);O=R.id;(D=A[O])||(D=A[O]=K(R));D.call(this,e);B.setVAO(null);b&&(da.cpuTime+=performance.now()-
L)},scope:function(a,d,c){var k,f;if(k=l.profile)f=performance.now(),da.count++;d(e,a,c);k&&(da.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,
Cc,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,td,Hb,ga,I,sa,Da,oa,xa,Fa){var ma,V,ua,Ia,za,mb,ca,yd,$b,Ga,ac,Sb,Z,Dd,re,Wd,ze,Ad,Rd,oe,ie,Ed,Yd,fe,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua;ma=b.attributes;V=b.context;ua=b.current;Ia=b.draw;za=b.elements;mb=b.framebuffer;ca=b.gl;yd=b.next;$b=b.shader;Ga=b.uniforms;ac=b.vao;Sb=yd.blend_color;Z=ua.blend_color;Dd=yd.blend_equation;
re=ua.blend_equation;Wd=yd.blend_func;ze=ua.blend_func;Ad=yd.colorMask;Rd=ua.colorMask;oe=yd.depth_range;ie=ua.depth_range;Ed=yd.polygonOffset_offset;Yd=ua.polygonOffset_offset;fe=yd.sample_coverage;Md=ua.sample_coverage;Ye=yd.scissor_box;$e=ua.scissor_box;Re=yd.stencil_func;Gd=ua.stencil_func;Ae=yd.stencil_opBack;te=ua.stencil_opBack;Zd=yd.stencil_opFront;Bd=ua.stencil_opFront;$d=yd.viewport;ld=ua.viewport;bd={};pd={};Lc=new Float32Array(16);nd=new Float32Array(16);Gc=new Float32Array(16);fd=new Float32Array(16);
Pc=new Float32Array(16);Wc=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);Dc=new Float32Array(16);xb=new Float32Array(16);xc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);lc=new Float32Array(16);Hc=new Float32Array(16);Xc=new Float32Array(16);Vc=new Float32Array(16);Ec=new Float32Array(16);dc=new Float32Array(16);Ic=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);mc=new Float32Array(16);ec=new Float32Array(16);ab=new Float32Array(16);
qc=new Float32Array(16);yb=new Float32Array(16);db=new Float32Array(16);Nb=new Float32Array(16);bb=new Float32Array(16);ob=new Float32Array(16);Ua=new Float32Array(16);return{batch:function(a,d){var k,f,h,t;k=mb.next;k!==mb.cur&&(k?ca.bindFramebuffer(36160,k.framebuffer):ca.bindFramebuffer(36160,null),mb.cur=k);if(ua.dirty){var b,u,x,A,C,F,S,Q,K,da,X,ia,Ga,ta,ja,Y,Sb,$b,La,Fb,Pc,Bb,Cb,Oa,Ye;b=Ad[0];u=Ad[1];x=Ad[2];A=Ad[3];if(b!==Rd[0]||u!==Rd[1]||x!==Rd[2]||A!==Rd[3])ca.colorMask(b,u,x,A),Rd[0]=b,
Rd[1]=u,Rd[2]=x,Rd[3]=A;C=yd.frontFace;C!==ua.frontFace&&(ca.frontFace(C),ua.frontFace=C);F=yd.polygonOffset_enable;F!==ua.polygonOffset_enable&&(F?ca.enable(32823):ca.disable(32823),ua.polygonOffset_enable=F);S=Ed[0];Q=Ed[1];if(S!==Yd[0]||Q!==Yd[1])ca.polygonOffset(S,Q),Yd[0]=S,Yd[1]=Q;K=yd.sample_alpha;K!==ua.sample_alpha&&(K?ca.enable(32926):ca.disable(32926),ua.sample_alpha=K);da=yd.sample_enable;da!==ua.sample_enable&&(da?ca.enable(32928):ca.disable(32928),ua.sample_enable=da);X=fe[0];ia=fe[1];
if(X!==Md[0]||ia!==Md[1])ca.sampleCoverage(X,ia),Md[0]=X,Md[1]=ia;Ga=yd.stencil_enable;Ga!==ua.stencil_enable&&(Ga?ca.enable(2960):ca.disable(2960),ua.stencil_enable=Ga);ta=yd.stencil_mask;ta!==ua.stencil_mask&&(ca.stencilMask(ta),ua.stencil_mask=ta);ja=Re[0];Y=Re[1];Sb=Re[2];if(ja!==Gd[0]||Y!==Gd[1]||Sb!==Gd[2])ca.stencilFunc(ja,Y,Sb),Gd[0]=ja,Gd[1]=Y,Gd[2]=Sb;$b=Zd[0];La=Zd[1];Fb=Zd[2];Pc=Zd[3];if($b!==Bd[0]||La!==Bd[1]||Fb!==Bd[2]||Pc!==Bd[3])ca.stencilOpSeparate($b,La,Fb,Pc),Bd[0]=$b,Bd[1]=La,
Bd[2]=Fb,Bd[3]=Pc;Bb=Ae[0];Cb=Ae[1];Oa=Ae[2];Ye=Ae[3];if(Bb!==te[0]||Cb!==te[1]||Oa!==te[2]||Ye!==te[3])ca.stencilOpSeparate(Bb,Cb,Oa,Ye),te[0]=Bb,te[1]=Cb,te[2]=Oa,te[3]=Ye}ca.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;ca.disable(3042);ua.blend_enable=!1;ca.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;ca.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ca.enable(2884);ua.cull_enable=!0;ca.cullFace(1029);ua.cull_face=1029;ca.enable(2929);ua.depth_enable=!0;ca.depthFunc(513);
ua.depth_func=513;ca.depthMask(!0);ua.depth_mask=!0;ca.depthRange(0,1);ie[0]=0;ie[1]=1;ca.disable(3024);ua.dither=!1;ca.lineWidth(2);ua.lineWidth=2;ca.enable(3089);ua.scissor_enable=!0;f=ua.profile;ua.profile=!1;ca.useProgram(Cc.program);var Qa,xb,Wc,Ma,lc,Xa,Gc,Wd,lb,Na,Dc,Pa,ub,vb,Sa,nb,nd,Dd,Hc,cb,Jc,fd,Wa,Lc,Ab,Ya,oe,xc,Wb,Qb,$d,Rb,Xc;ac.setVAO(null);Qa=ya.location;xb=ma[Qa];xb.buffer||ca.enableVertexAttribArray(Qa);if(xb.type!==L.dtype||4!==xb.size||xb.buffer!==L||!1!==xb.normalized||0!==xb.offset||
0!==xb.stride)ca.bindBuffer(34962,L.buffer),ca.vertexAttribPointer(Qa,4,L.dtype,!1,0,0),xb.type=L.dtype,xb.size=4,xb.buffer=L,xb.normalized=!1,xb.offset=0,xb.stride=0;Wc=Ja.location;Ma=ma[Wc];Ma.buffer||ca.enableVertexAttribArray(Wc);if(Ma.type!==e.dtype||4!==Ma.size||Ma.buffer!==e||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(Wc,4,e.dtype,!1,0,0),Ma.type=e.dtype,Ma.size=4,Ma.buffer=e,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;lc=na.location;
Xa=ma[lc];Xa.buffer||ca.enableVertexAttribArray(lc);if(Xa.type!==l.dtype||4!==Xa.size||Xa.buffer!==l||!1!==Xa.normalized||0!==Xa.offset||0!==Xa.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(lc,4,l.dtype,!1,0,0),Xa.type=l.dtype,Xa.size=4,Xa.buffer=l,Xa.normalized=!1,Xa.offset=0,Xa.stride=0;Gc=Za.location;Wd=ma[Gc];Wd.buffer||ca.enableVertexAttribArray(Gc);if(Wd.type!==q.dtype||4!==Wd.size||Wd.buffer!==q||!1!==Wd.normalized||0!==Wd.offset||0!==Wd.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(Gc,
4,q.dtype,!1,0,0),Wd.type=q.dtype,Wd.size=4,Wd.buffer=q,Wd.normalized=!1,Wd.offset=0,Wd.stride=0;lb=Ta.location;Na=ma[lb];Na.buffer||ca.enableVertexAttribArray(lb);if(Na.type!==c.dtype||4!==Na.size||Na.buffer!==c||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ca.bindBuffer(34962,c.buffer),ca.vertexAttribPointer(lb,4,c.dtype,!1,0,0),Na.type=c.dtype,Na.size=4,Na.buffer=c,Na.normalized=!1,Na.offset=0,Na.stride=0;Dc=r.location;Pa=ma[Dc];Pa.buffer||ca.enableVertexAttribArray(Dc);if(Pa.type!==G.dtype||
4!==Pa.size||Pa.buffer!==G||!1!==Pa.normalized||0!==Pa.offset||0!==Pa.stride)ca.bindBuffer(34962,G.buffer),ca.vertexAttribPointer(Dc,4,G.dtype,!1,0,0),Pa.type=G.dtype,Pa.size=4,Pa.buffer=G,Pa.normalized=!1,Pa.offset=0,Pa.stride=0;ub=p.location;vb=ma[ub];vb.buffer||ca.enableVertexAttribArray(ub);if(vb.type!==H.dtype||4!==vb.size||vb.buffer!==H||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)ca.bindBuffer(34962,H.buffer),ca.vertexAttribPointer(ub,4,H.dtype,!1,0,0),vb.type=H.dtype,vb.size=4,vb.buffer=
H,vb.normalized=!1,vb.offset=0,vb.stride=0;Sa=E.location;nb=ma[Sa];nb.buffer||ca.enableVertexAttribArray(Sa);if(nb.type!==B.dtype||4!==nb.size||nb.buffer!==B||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)ca.bindBuffer(34962,B.buffer),ca.vertexAttribPointer(Sa,4,B.dtype,!1,0,0),nb.type=B.dtype,nb.size=4,nb.buffer=B,nb.normalized=!1,nb.offset=0,nb.stride=0;nd=va.location;Dd=ma[nd];Dd.buffer||ca.enableVertexAttribArray(nd);if(Dd.type!==U.dtype||4!==Dd.size||Dd.buffer!==U||!1!==Dd.normalized||0!==
Dd.offset||0!==Dd.stride)ca.bindBuffer(34962,U.buffer),ca.vertexAttribPointer(nd,4,U.dtype,!1,0,0),Dd.type=U.dtype,Dd.size=4,Dd.buffer=U,Dd.normalized=!1,Dd.offset=0,Dd.stride=0;Hc=Ea.location;cb=ma[Hc];cb.buffer||ca.enableVertexAttribArray(Hc);if(cb.type!==n.dtype||4!==cb.size||cb.buffer!==n||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)ca.bindBuffer(34962,n.buffer),ca.vertexAttribPointer(Hc,4,n.dtype,!1,0,0),cb.type=n.dtype,cb.size=4,cb.buffer=n,cb.normalized=!1,cb.offset=0,cb.stride=0;Jc=td.location;
fd=ma[Jc];fd.buffer||ca.enableVertexAttribArray(Jc);if(fd.type!==v.dtype||4!==fd.size||fd.buffer!==v||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(Jc,4,v.dtype,!1,0,0),fd.type=v.dtype,fd.size=4,fd.buffer=v,fd.normalized=!1,fd.offset=0,fd.stride=0;Wa=Hb.location;Lc=ma[Wa];Lc.buffer||ca.enableVertexAttribArray(Wa);if(Lc.type!==y.dtype||4!==Lc.size||Lc.buffer!==y||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ca.bindBuffer(34962,y.buffer),ca.vertexAttribPointer(Wa,
4,y.dtype,!1,0,0),Lc.type=y.dtype,Lc.size=4,Lc.buffer=y,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=ga.location;Ya=ma[Ab];Ya.buffer||ca.enableVertexAttribArray(Ab);if(Ya.type!==ba.dtype||4!==Ya.size||Ya.buffer!==ba||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ca.bindBuffer(34962,ba.buffer),ca.vertexAttribPointer(Ab,4,ba.dtype,!1,0,0),Ya.type=ba.dtype,Ya.size=4,Ya.buffer=ba,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;oe=I.location;xc=ma[oe];xc.buffer||ca.enableVertexAttribArray(oe);if(xc.type!==
w.dtype||4!==xc.size||xc.buffer!==w||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)ca.bindBuffer(34962,w.buffer),ca.vertexAttribPointer(oe,4,w.dtype,!1,0,0),xc.type=w.dtype,xc.size=4,xc.buffer=w,xc.normalized=!1,xc.offset=0,xc.stride=0;Wb=sa.location;Qb=ma[Wb];Qb.buffer||ca.enableVertexAttribArray(Wb);if(Qb.type!==T.dtype||4!==Qb.size||Qb.buffer!==T||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ca.bindBuffer(34962,T.buffer),ca.vertexAttribPointer(Wb,4,T.dtype,!1,0,0),Qb.type=T.dtype,Qb.size=
4,Qb.buffer=T,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;$d=ea.location;Rb=ma[$d];Rb.buffer||ca.enableVertexAttribArray($d);if(Rb.type!==z.dtype||4!==Rb.size||Rb.buffer!==z||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)ca.bindBuffer(34962,z.buffer),ca.vertexAttribPointer($d,4,z.dtype,!1,0,0),Rb.type=z.dtype,Rb.size=4,Rb.buffer=z,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;ca.uniform1i(Da.location,W.bind());(Xc=Ia.elements)?ca.bindBuffer(34963,Xc.buffer.buffer):ac.currentVAO&&(Xc=za.getElements(ac.currentVAO.elements))&&
ca.bindBuffer(34963,Xc.buffer.buffer);for(h=0;h<d;++h){t=a[h];var Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd,xd,ue,jd,ha,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de;bd.height=t.viewportHeight;bd.width=t.viewportWidth;bd.x=t.viewportX;bd.y=t.viewportY;Fc=bd.x|0;sd=bd.y|0;Nc="width"in bd?bd.width|0:V.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:V.framebufferHeight-sd;ud=V.viewportWidth;V.viewportWidth=Nc;nc=V.viewportHeight;
V.viewportHeight=Yc;ca.viewport(Fc,sd,Nc,Yc);ld[0]=Fc;ld[1]=sd;ld[2]=Nc;ld[3]=Yc;pd.height=t.scissorHeight;pd.width=t.scissorWidth;pd.x=t.scissorX;pd.y=t.scissorY;wc=pd.x|0;gc=pd.y|0;eb="width"in pd?pd.width|0:V.framebufferWidth-wc;sc="height"in pd?pd.height|0:V.framebufferHeight-gc;ca.scissor(wc,gc,eb,sc);$e[0]=wc;$e[1]=gc;$e[2]=eb;$e[3]=sc;Tb=t.dim0A;ca.uniformMatrix4fv(O.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(Vc[0]=Tb[0],Vc[1]=Tb[1],Vc[2]=Tb[2],Vc[3]=Tb[3],Vc[4]=Tb[4],Vc[5]=
Tb[5],Vc[6]=Tb[6],Vc[7]=Tb[7],Vc[8]=Tb[8],Vc[9]=Tb[9],Vc[10]=Tb[10],Vc[11]=Tb[11],Vc[12]=Tb[12],Vc[13]=Tb[13],Vc[14]=Tb[14],Vc[15]=Tb[15],Vc));Xb=t.dim1A;ca.uniformMatrix4fv(M.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Ec[0]=Xb[0],Ec[1]=Xb[1],Ec[2]=Xb[2],Ec[3]=Xb[3],Ec[4]=Xb[4],Ec[5]=Xb[5],Ec[6]=Xb[6],Ec[7]=Xb[7],Ec[8]=Xb[8],Ec[9]=Xb[9],Ec[10]=Xb[10],Ec[11]=Xb[11],Ec[12]=Xb[12],Ec[13]=Xb[13],Ec[14]=Xb[14],Ec[15]=Xb[15],Ec));cc=t.dim0B;ca.uniformMatrix4fv(D.location,!1,Array.isArray(cc)||
cc instanceof Float32Array?cc:(dc[0]=cc[0],dc[1]=cc[1],dc[2]=cc[2],dc[3]=cc[3],dc[4]=cc[4],dc[5]=cc[5],dc[6]=cc[6],dc[7]=cc[7],dc[8]=cc[8],dc[9]=cc[9],dc[10]=cc[10],dc[11]=cc[11],dc[12]=cc[12],dc[13]=cc[13],dc[14]=cc[14],dc[15]=cc[15],dc));hc=t.dim1B;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(hc)||hc instanceof Float32Array?hc:(Ic[0]=hc[0],Ic[1]=hc[1],Ic[2]=hc[2],Ic[3]=hc[3],Ic[4]=hc[4],Ic[5]=hc[5],Ic[6]=hc[6],Ic[7]=hc[7],Ic[8]=hc[8],Ic[9]=hc[9],Ic[10]=hc[10],Ic[11]=hc[11],Ic[12]=hc[12],Ic[13]=
hc[13],Ic[14]=hc[14],Ic[15]=hc[15],Ic));yc=t.dim0C;ca.uniformMatrix4fv(g.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(oc[0]=yc[0],oc[1]=yc[1],oc[2]=yc[2],oc[3]=yc[3],oc[4]=yc[4],oc[5]=yc[5],oc[6]=yc[6],oc[7]=yc[7],oc[8]=yc[8],oc[9]=yc[9],oc[10]=yc[10],oc[11]=yc[11],oc[12]=yc[12],oc[13]=yc[13],oc[14]=yc[14],oc[15]=yc[15],oc));Bc=t.dim1C;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(pc[0]=Bc[0],pc[1]=Bc[1],pc[2]=Bc[2],pc[3]=Bc[3],pc[4]=Bc[4],pc[5]=
Bc[5],pc[6]=Bc[6],pc[7]=Bc[7],pc[8]=Bc[8],pc[9]=Bc[9],pc[10]=Bc[10],pc[11]=Bc[11],pc[12]=Bc[12],pc[13]=Bc[13],pc[14]=Bc[14],pc[15]=Bc[15],pc));cd=t.dim0D;ca.uniformMatrix4fv(N.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(mc[0]=cd[0],mc[1]=cd[1],mc[2]=cd[2],mc[3]=cd[3],mc[4]=cd[4],mc[5]=cd[5],mc[6]=cd[6],mc[7]=cd[7],mc[8]=cd[8],mc[9]=cd[9],mc[10]=cd[10],mc[11]=cd[11],mc[12]=cd[12],mc[13]=cd[13],mc[14]=cd[14],mc[15]=cd[15],mc));Qc=t.dim1D;ca.uniformMatrix4fv(m.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(ec[0]=Qc[0],ec[1]=Qc[1],ec[2]=Qc[2],ec[3]=Qc[3],ec[4]=Qc[4],ec[5]=Qc[5],ec[6]=Qc[6],ec[7]=Qc[7],ec[8]=Qc[8],ec[9]=Qc[9],ec[10]=Qc[10],ec[11]=Qc[11],ec[12]=Qc[12],ec[13]=Qc[13],ec[14]=Qc[14],ec[15]=Qc[15],ec));Rc=t.loA;ca.uniformMatrix4fv(Aa.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(ab[0]=Rc[0],ab[1]=Rc[1],ab[2]=Rc[2],ab[3]=Rc[3],ab[4]=Rc[4],ab[5]=Rc[5],ab[6]=Rc[6],ab[7]=Rc[7],ab[8]=Rc[8],ab[9]=Rc[9],ab[10]=Rc[10],ab[11]=Rc[11],ab[12]=Rc[12],ab[13]=
Rc[13],ab[14]=Rc[14],ab[15]=Rc[15],ab));Sc=t.hiA;ca.uniformMatrix4fv(aa.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(qc[0]=Sc[0],qc[1]=Sc[1],qc[2]=Sc[2],qc[3]=Sc[3],qc[4]=Sc[4],qc[5]=Sc[5],qc[6]=Sc[6],qc[7]=Sc[7],qc[8]=Sc[8],qc[9]=Sc[9],qc[10]=Sc[10],qc[11]=Sc[11],qc[12]=Sc[12],qc[13]=Sc[13],qc[14]=Sc[14],qc[15]=Sc[15],qc));Zc=t.loB;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(yb[0]=Zc[0],yb[1]=Zc[1],yb[2]=Zc[2],yb[3]=Zc[3],yb[4]=Zc[4],yb[5]=
Zc[5],yb[6]=Zc[6],yb[7]=Zc[7],yb[8]=Zc[8],yb[9]=Zc[9],yb[10]=Zc[10],yb[11]=Zc[11],yb[12]=Zc[12],yb[13]=Zc[13],yb[14]=Zc[14],yb[15]=Zc[15],yb));od=t.hiB;ca.uniformMatrix4fv(P.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(db[0]=od[0],db[1]=od[1],db[2]=od[2],db[3]=od[3],db[4]=od[4],db[5]=od[5],db[6]=od[6],db[7]=od[7],db[8]=od[8],db[9]=od[9],db[10]=od[10],db[11]=od[11],db[12]=od[12],db[13]=od[13],db[14]=od[14],db[15]=od[15],db));dd=t.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(dd)||
dd instanceof Float32Array?dd:(Nb[0]=dd[0],Nb[1]=dd[1],Nb[2]=dd[2],Nb[3]=dd[3],Nb[4]=dd[4],Nb[5]=dd[5],Nb[6]=dd[6],Nb[7]=dd[7],Nb[8]=dd[8],Nb[9]=dd[9],Nb[10]=dd[10],Nb[11]=dd[11],Nb[12]=dd[12],Nb[13]=dd[13],Nb[14]=dd[14],Nb[15]=dd[15],Nb));$c=t.hiC;ca.uniformMatrix4fv(la.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(bb[0]=$c[0],bb[1]=$c[1],bb[2]=$c[2],bb[3]=$c[3],bb[4]=$c[4],bb[5]=$c[5],bb[6]=$c[6],bb[7]=$c[7],bb[8]=$c[8],bb[9]=$c[9],bb[10]=$c[10],bb[11]=$c[11],bb[12]=$c[12],bb[13]=
$c[13],bb[14]=$c[14],bb[15]=$c[15],bb));kc=t.loD;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(ob[0]=kc[0],ob[1]=kc[1],ob[2]=kc[2],ob[3]=kc[3],ob[4]=kc[4],ob[5]=kc[5],ob[6]=kc[6],ob[7]=kc[7],ob[8]=kc[8],ob[9]=kc[9],ob[10]=kc[10],ob[11]=kc[11],ob[12]=kc[12],ob[13]=kc[13],ob[14]=kc[14],ob[15]=kc[15],ob));bc=t.hiD;ca.uniformMatrix4fv(ra.location,!1,Array.isArray(bc)||bc instanceof Float32Array?bc:(Ua[0]=bc[0],Ua[1]=bc[1],Ua[2]=bc[2],Ua[3]=bc[3],Ua[4]=bc[4],Ua[5]=
bc[5],Ua[6]=bc[6],Ua[7]=bc[7],Ua[8]=bc[8],Ua[9]=bc[9],Ua[10]=bc[10],Ua[11]=bc[11],Ua[12]=bc[12],Ua[13]=bc[13],Ua[14]=bc[14],Ua[15]=bc[15],Ua));ad=t.resolution;Uc=ad[0];zc=ad[1];h&&ed===Uc&&id===zc||(ed=Uc,id=zc,ca.uniform2f(oa.location,Uc,zc));Nd=t.viewBoxPos;xd=Nd[0];jd=Nd[1];h&&ue===xd&&ha===jd||(ue=xd,ha=jd,ca.uniform2f(xa.location,xd,jd));Od=t.viewBoxSize;ge=Od[0];Pd=Od[1];h&&ce===ge&&Jd===Pd||(ce=ge,Jd=Pd,ca.uniform2f(Fa.location,ge,Pd));Hd=t.maskHeight;h&&md===Hd||(md=Hd,ca.uniform1f(ka.location,
Hd));Tc=t.drwLayer;h&&vd===Tc||(vd=Tc,ca.uniform1f(J.location,Tc));rd=t.contextColor;kd=rd[0];Cd=rd[1];je=rd[2];Fe=rd[3];h&&wd===kd&&Fd===Cd&&ye===je&&le===Fe||(wd=kd,Fd=Cd,ye=je,le=Fe,ca.uniform4f(R.location,kd,Cd,je,Fe));(ke=t.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);he=ke._texture;ca.uniform1i(pa.location,he.bind());ve=t.offset;if(de=t.count)Xc?ca.drawElements(1,de,Xc.type,ve<<(Xc.type-5121>>1)):ca.drawArrays(1,ve,de),V.viewportWidth=ud,V.viewportHeight=nc,he.unbind()}W.unbind();
ua.dirty=!0;ac.setVAO(null);ua.profile=f},draw:function(a){var d,k,f,h,t,b;d=mb.next;d!==mb.cur&&(d?ca.bindFramebuffer(36160,d.framebuffer):ca.bindFramebuffer(36160,null),mb.cur=d);if(ua.dirty){d=Ad[0];b=Ad[1];k=Ad[2];f=Ad[3];if(d!==Rd[0]||b!==Rd[1]||k!==Rd[2]||f!==Rd[3])ca.colorMask(d,b,k,f),Rd[0]=d,Rd[1]=b,Rd[2]=k,Rd[3]=f;d=yd.frontFace;d!==ua.frontFace&&(ca.frontFace(d),ua.frontFace=d);d=yd.polygonOffset_enable;d!==ua.polygonOffset_enable&&(d?ca.enable(32823):ca.disable(32823),ua.polygonOffset_enable=
d);d=Ed[0];b=Ed[1];if(d!==Yd[0]||b!==Yd[1])ca.polygonOffset(d,b),Yd[0]=d,Yd[1]=b;d=yd.sample_alpha;d!==ua.sample_alpha&&(d?ca.enable(32926):ca.disable(32926),ua.sample_alpha=d);d=yd.sample_enable;d!==ua.sample_enable&&(d?ca.enable(32928):ca.disable(32928),ua.sample_enable=d);d=fe[0];b=fe[1];if(d!==Md[0]||b!==Md[1])ca.sampleCoverage(d,b),Md[0]=d,Md[1]=b;d=yd.stencil_enable;d!==ua.stencil_enable&&(d?ca.enable(2960):ca.disable(2960),ua.stencil_enable=d);d=yd.stencil_mask;d!==ua.stencil_mask&&(ca.stencilMask(d),
ua.stencil_mask=d);d=Re[0];b=Re[1];k=Re[2];if(d!==Gd[0]||b!==Gd[1]||k!==Gd[2])ca.stencilFunc(d,b,k),Gd[0]=d,Gd[1]=b,Gd[2]=k;d=Zd[0];b=Zd[1];k=Zd[2];f=Zd[3];if(d!==Bd[0]||b!==Bd[1]||k!==Bd[2]||f!==Bd[3])ca.stencilOpSeparate(d,b,k,f),Bd[0]=d,Bd[1]=b,Bd[2]=k,Bd[3]=f;d=Ae[0];b=Ae[1];k=Ae[2];f=Ae[3];if(d!==te[0]||b!==te[1]||k!==te[2]||f!==te[3])ca.stencilOpSeparate(d,b,k,f),te[0]=d,te[1]=b,te[2]=k,te[3]=f}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;k=bd.x|0;f=
bd.y|0;h="width"in bd?bd.width|0:V.framebufferWidth-k;t="height"in bd?bd.height|0:V.framebufferHeight-f;d=V.viewportWidth;V.viewportWidth=h;b=V.viewportHeight;V.viewportHeight=t;ca.viewport(k,f,h,t);ld[0]=k;ld[1]=f;ld[2]=h;ld[3]=t;ca.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;ca.disable(3042);ua.blend_enable=!1;ca.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;ca.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ca.enable(2884);ua.cull_enable=!0;ca.cullFace(1029);
ua.cull_face=1029;ca.enable(2929);ua.depth_enable=!0;ca.depthFunc(513);ua.depth_func=513;ca.depthMask(!0);ua.depth_mask=!0;ca.depthRange(0,1);ie[0]=0;ie[1]=1;ca.disable(3024);ua.dither=!1;ca.lineWidth(2);ua.lineWidth=2;pd.height=a.scissorHeight;pd.width=a.scissorWidth;pd.x=a.scissorX;pd.y=a.scissorY;k=pd.x|0;f=pd.y|0;h="width"in pd?pd.width|0:V.framebufferWidth-k;t="height"in pd?pd.height|0:V.framebufferHeight-f;ca.scissor(k,f,h,t);$e[0]=k;$e[1]=f;$e[2]=h;$e[3]=t;ca.enable(3089);ua.scissor_enable=
!0;k=ua.profile;ua.profile=!1;ca.useProgram(K.program);ac.setVAO(null);f=ya.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==L.dtype||4!==h.size||h.buffer!==L||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,L.buffer),ca.vertexAttribPointer(f,4,L.dtype,!1,0,0),h.type=L.dtype,h.size=4,h.buffer=L,h.normalized=!1,h.offset=0,h.stride=0;f=Ja.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==e.dtype||4!==h.size||h.buffer!==e||!1!==h.normalized||0!==
h.offset||0!==h.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(f,4,e.dtype,!1,0,0),h.type=e.dtype,h.size=4,h.buffer=e,h.normalized=!1,h.offset=0,h.stride=0;f=na.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==l.dtype||4!==h.size||h.buffer!==l||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(f,4,l.dtype,!1,0,0),h.type=l.dtype,h.size=4,h.buffer=l,h.normalized=!1,h.offset=0,h.stride=0;f=Za.location;h=ma[f];h.buffer||
ca.enableVertexAttribArray(f);if(h.type!==q.dtype||4!==h.size||h.buffer!==q||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(f,4,q.dtype,!1,0,0),h.type=q.dtype,h.size=4,h.buffer=q,h.normalized=!1,h.offset=0,h.stride=0;f=Ta.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==c.dtype||4!==h.size||h.buffer!==c||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,c.buffer),ca.vertexAttribPointer(f,4,c.dtype,!1,0,0),h.type=
c.dtype,h.size=4,h.buffer=c,h.normalized=!1,h.offset=0,h.stride=0;f=r.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==G.dtype||4!==h.size||h.buffer!==G||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,G.buffer),ca.vertexAttribPointer(f,4,G.dtype,!1,0,0),h.type=G.dtype,h.size=4,h.buffer=G,h.normalized=!1,h.offset=0,h.stride=0;f=p.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==H.dtype||4!==h.size||h.buffer!==H||!1!==h.normalized||0!==h.offset||
0!==h.stride)ca.bindBuffer(34962,H.buffer),ca.vertexAttribPointer(f,4,H.dtype,!1,0,0),h.type=H.dtype,h.size=4,h.buffer=H,h.normalized=!1,h.offset=0,h.stride=0;f=E.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==B.dtype||4!==h.size||h.buffer!==B||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,B.buffer),ca.vertexAttribPointer(f,4,B.dtype,!1,0,0),h.type=B.dtype,h.size=4,h.buffer=B,h.normalized=!1,h.offset=0,h.stride=0;f=va.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);
if(h.type!==U.dtype||4!==h.size||h.buffer!==U||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,U.buffer),ca.vertexAttribPointer(f,4,U.dtype,!1,0,0),h.type=U.dtype,h.size=4,h.buffer=U,h.normalized=!1,h.offset=0,h.stride=0;f=Ea.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==n.dtype||4!==h.size||h.buffer!==n||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,n.buffer),ca.vertexAttribPointer(f,4,n.dtype,!1,0,0),h.type=n.dtype,h.size=4,h.buffer=n,
h.normalized=!1,h.offset=0,h.stride=0;f=td.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==v.dtype||4!==h.size||h.buffer!==v||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(f,4,v.dtype,!1,0,0),h.type=v.dtype,h.size=4,h.buffer=v,h.normalized=!1,h.offset=0,h.stride=0;f=Hb.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==y.dtype||4!==h.size||h.buffer!==y||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,
y.buffer),ca.vertexAttribPointer(f,4,y.dtype,!1,0,0),h.type=y.dtype,h.size=4,h.buffer=y,h.normalized=!1,h.offset=0,h.stride=0;f=ga.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==ba.dtype||4!==h.size||h.buffer!==ba||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,ba.buffer),ca.vertexAttribPointer(f,4,ba.dtype,!1,0,0),h.type=ba.dtype,h.size=4,h.buffer=ba,h.normalized=!1,h.offset=0,h.stride=0;f=I.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==
w.dtype||4!==h.size||h.buffer!==w||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,w.buffer),ca.vertexAttribPointer(f,4,w.dtype,!1,0,0),h.type=w.dtype,h.size=4,h.buffer=w,h.normalized=!1,h.offset=0,h.stride=0;f=sa.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==T.dtype||4!==h.size||h.buffer!==T||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,T.buffer),ca.vertexAttribPointer(f,4,T.dtype,!1,0,0),h.type=T.dtype,h.size=4,h.buffer=T,h.normalized=
!1,h.offset=0,h.stride=0;f=ea.location;h=ma[f];h.buffer||ca.enableVertexAttribArray(f);if(h.type!==z.dtype||4!==h.size||h.buffer!==z||!1!==h.normalized||0!==h.offset||0!==h.stride)ca.bindBuffer(34962,z.buffer),ca.vertexAttribPointer(f,4,z.dtype,!1,0,0),h.type=z.dtype,h.size=4,h.buffer=z,h.normalized=!1,h.offset=0,h.stride=0;f=a.dim0A;ca.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],
Lc[8]=f[8],Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.dim1A;ca.uniformMatrix4fv(M.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(nd[0]=f[0],nd[1]=f[1],nd[2]=f[2],nd[3]=f[3],nd[4]=f[4],nd[5]=f[5],nd[6]=f[6],nd[7]=f[7],nd[8]=f[8],nd[9]=f[9],nd[10]=f[10],nd[11]=f[11],nd[12]=f[12],nd[13]=f[13],nd[14]=f[14],nd[15]=f[15],nd));f=a.dim0B;ca.uniformMatrix4fv(D.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],
Gc[2]=f[2],Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=f[14],Gc[15]=f[15],Gc));f=a.dim1B;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(fd[0]=f[0],fd[1]=f[1],fd[2]=f[2],fd[3]=f[3],fd[4]=f[4],fd[5]=f[5],fd[6]=f[6],fd[7]=f[7],fd[8]=f[8],fd[9]=f[9],fd[10]=f[10],fd[11]=f[11],fd[12]=f[12],fd[13]=f[13],fd[14]=f[14],fd[15]=f[15],fd));f=a.dim0C;ca.uniformMatrix4fv(g.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Pc[0]=f[0],Pc[1]=f[1],Pc[2]=f[2],Pc[3]=f[3],Pc[4]=f[4],Pc[5]=f[5],Pc[6]=f[6],Pc[7]=f[7],Pc[8]=f[8],Pc[9]=f[9],Pc[10]=f[10],Pc[11]=f[11],Pc[12]=f[12],Pc[13]=f[13],Pc[14]=f[14],Pc[15]=f[15],Pc));f=a.dim1C;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Wc[0]=f[0],Wc[1]=f[1],Wc[2]=f[2],Wc[3]=f[3],Wc[4]=f[4],Wc[5]=f[5],Wc[6]=f[6],Wc[7]=f[7],Wc[8]=f[8],Wc[9]=f[9],Wc[10]=f[10],Wc[11]=f[11],Wc[12]=f[12],Wc[13]=f[13],Wc[14]=f[14],Wc[15]=f[15],
Wc));f=a.dim0D;ca.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.dim1D;ca.uniformMatrix4fv(m.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fb[0]=f[0],Fb[1]=f[1],Fb[2]=f[2],Fb[3]=f[3],Fb[4]=f[4],Fb[5]=f[5],Fb[6]=f[6],Fb[7]=f[7],Fb[8]=f[8],Fb[9]=f[9],Fb[10]=f[10],
Fb[11]=f[11],Fb[12]=f[12],Fb[13]=f[13],Fb[14]=f[14],Fb[15]=f[15],Fb));f=a.loA;ca.uniformMatrix4fv(Aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Dc[0]=f[0],Dc[1]=f[1],Dc[2]=f[2],Dc[3]=f[3],Dc[4]=f[4],Dc[5]=f[5],Dc[6]=f[6],Dc[7]=f[7],Dc[8]=f[8],Dc[9]=f[9],Dc[10]=f[10],Dc[11]=f[11],Dc[12]=f[12],Dc[13]=f[13],Dc[14]=f[14],Dc[15]=f[15],Dc));f=a.hiA;ca.uniformMatrix4fv(aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xb[0]=f[0],xb[1]=f[1],xb[2]=f[2],xb[3]=f[3],xb[4]=f[4],xb[5]=
f[5],xb[6]=f[6],xb[7]=f[7],xb[8]=f[8],xb[9]=f[9],xb[10]=f[10],xb[11]=f[11],xb[12]=f[12],xb[13]=f[13],xb[14]=f[14],xb[15]=f[15],xb));f=a.loB;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xc[0]=f[0],xc[1]=f[1],xc[2]=f[2],xc[3]=f[3],xc[4]=f[4],xc[5]=f[5],xc[6]=f[6],xc[7]=f[7],xc[8]=f[8],xc[9]=f[9],xc[10]=f[10],xc[11]=f[11],xc[12]=f[12],xc[13]=f[13],xc[14]=f[14],xc[15]=f[15],xc));f=a.hiB;ca.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Cb[0]=f[0],Cb[1]=f[1],Cb[2]=f[2],Cb[3]=f[3],Cb[4]=f[4],Cb[5]=f[5],Cb[6]=f[6],Cb[7]=f[7],Cb[8]=f[8],Cb[9]=f[9],Cb[10]=f[10],Cb[11]=f[11],Cb[12]=f[12],Cb[13]=f[13],Cb[14]=f[14],Cb[15]=f[15],Cb));f=a.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;ca.uniformMatrix4fv(la.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(lc[0]=f[0],lc[1]=f[1],lc[2]=f[2],lc[3]=f[3],lc[4]=f[4],lc[5]=f[5],lc[6]=f[6],lc[7]=f[7],lc[8]=f[8],lc[9]=f[9],lc[10]=f[10],lc[11]=f[11],lc[12]=f[12],lc[13]=f[13],lc[14]=f[14],lc[15]=f[15],lc));f=a.loD;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=
f[14],Hc[15]=f[15],Hc));f=a.hiD;ca.uniformMatrix4fv(ra.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Xc[0]=f[0],Xc[1]=f[1],Xc[2]=f[2],Xc[3]=f[3],Xc[4]=f[4],Xc[5]=f[5],Xc[6]=f[6],Xc[7]=f[7],Xc[8]=f[8],Xc[9]=f[9],Xc[10]=f[10],Xc[11]=f[11],Xc[12]=f[12],Xc[13]=f[13],Xc[14]=f[14],Xc[15]=f[15],Xc));f=a.resolution;ca.uniform2f(oa.location,f[0],f[1]);f=a.viewBoxPos;ca.uniform2f(xa.location,f[0],f[1]);f=a.viewBoxSize;ca.uniform2f(Fa.location,f[0],f[1]);ca.uniform1f(ka.location,a.maskHeight);ca.uniform1f(J.location,
a.drwLayer);f=a.contextColor;ca.uniform4f(R.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;ca.uniform1i(pa.location,f.bind());ca.uniform1i(Da.location,Q.bind());(h=Ia.elements)?ca.bindBuffer(34963,h.buffer.buffer):ac.currentVAO&&(h=za.getElements(ac.currentVAO.elements))&&ca.bindBuffer(34963,h.buffer.buffer);t=a.offset;if(a=a.count)h?ca.drawElements(1,a,h.type,t<<(h.type-5121>>1)):ca.drawArrays(1,t,a),ua.dirty=!0,ac.setVAO(null),V.viewportWidth=
d,V.viewportHeight=b,ua.profile=k,f.unbind(),Q.unbind()},scope:function(g,r,m){var p,I,E,b,na,sa,Ja,Da,O,J,P,Za,D,R,fa,oa,ga,ma,M,va,N,aa,xa,Fa,ca,Ca,ra,wa,Q,K,ka,W,da,Ta,ea,ya,Ea,pa,Ba,qa,la,Hb,Aa,td,za,mb,Cc,ab,dc,Fb,Pc,Bb,ec,oc,xb,Cb,Md,Ae,mc,ac,Zd,pc,db,bb,Ua,Ic,Re,Wc,lc,Z,ob,Gc,te,fd,Gd,Lc,Dc,yb,xc,re,nd,Hc,Ec,Jc,Rd,ld,Bd,Nb,Ed,qc,$e,Vc,pg,Xc,fe,Ad,ze,Yd,ie,ha,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,$a,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,
Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=g.viewportHeight;bd.width=g.viewportWidth;bd.x=g.viewportX;bd.y=g.viewportY;
p=bd.x|0;I=bd.y|0;E="width"in bd?bd.width|0:V.framebufferWidth-p;b="height"in bd?bd.height|0:V.framebufferHeight-I;na=V.viewportWidth;V.viewportWidth=E;sa=V.viewportHeight;V.viewportHeight=b;Ja=$d[0];$d[0]=p;Da=$d[1];$d[1]=I;O=$d[2];$d[2]=E;J=$d[3];$d[3]=b;P=Sb[0];Sb[0]=0;Za=Sb[1];Sb[1]=0;D=Sb[2];Sb[2]=0;R=Sb[3];Sb[3]=0;fa=yd.blend_enable;yd.blend_enable=!1;oa=Dd[0];Dd[0]=32774;ga=Dd[1];Dd[1]=32774;ma=Wd[0];Wd[0]=770;M=Wd[1];Wd[1]=771;va=Wd[2];Wd[2]=1;N=Wd[3];Wd[3]=1;aa=yd.cull_enable;yd.cull_enable=
!0;xa=yd.cull_face;yd.cull_face=1029;Fa=yd.depth_enable;yd.depth_enable=!0;ca=yd.depth_func;yd.depth_func=513;Ca=yd.depth_mask;yd.depth_mask=!0;ra=oe[0];oe[0]=0;wa=oe[1];oe[1]=1;Q=yd.dither;yd.dither=!1;K=yd.lineWidth;yd.lineWidth=2;pd.height=g.scissorHeight;pd.width=g.scissorWidth;pd.x=g.scissorX;pd.y=g.scissorY;ka=pd.x|0;W=pd.y|0;da="width"in pd?pd.width|0:V.framebufferWidth-ka;Ta="height"in pd?pd.height|0:V.framebufferHeight-W;ea=Ye[0];Ye[0]=ka;ya=Ye[1];Ye[1]=W;Ea=Ye[2];Ye[2]=da;pa=Ye[3];Ye[3]=
Ta;Ba=yd.scissor_enable;yd.scissor_enable=!0;qa=ua.profile;ua.profile=!1;la=g.offset;Hb=Ia.offset;Ia.offset=la;Aa=g.count;td=Ia.count;Ia.count=Aa;za=Ia.primitive;Ia.primitive=1;mb=g.contextColor;Cc=Ga[24];Ga[24]=mb;ab=g.dim0A;dc=Ga[3];Ga[3]=ab;Fb=g.dim0B;Pc=Ga[5];Ga[5]=Fb;Bb=g.dim0C;ec=Ga[7];Ga[7]=Bb;oc=g.dim0D;xb=Ga[9];Ga[9]=oc;Cb=g.dim1A;Md=Ga[4];Ga[4]=Cb;Ae=g.dim1B;mc=Ga[6];Ga[6]=Ae;ac=g.dim1C;Zd=Ga[8];Ga[8]=ac;pc=g.dim1D;db=Ga[10];Ga[10]=pc;bb=g.drwLayer;Ua=Ga[23];Ga[23]=bb;Ic=g.hiA;Re=Ga[12];
Ga[12]=Ic;Wc=g.hiB;lc=Ga[14];Ga[14]=Wc;Z=g.hiC;ob=Ga[16];Ga[16]=Z;Gc=g.hiD;te=Ga[18];Ga[18]=Gc;fd=g.loA;Gd=Ga[11];Ga[11]=fd;Lc=g.loB;Dc=Ga[13];Ga[13]=Lc;yb=g.loC;xc=Ga[15];Ga[15]=yb;re=g.loD;nd=Ga[17];Ga[17]=re;Hc=g.maskHeight;Ec=Ga[22];Ga[22]=Hc;Jc=g.maskTexture;Rd=Ga[25];Ga[25]=Jc;ld=Ga[26];Ga[26]=ia;Bd=g.resolution;Nb=Ga[19];Ga[19]=Bd;Ed=g.viewBoxPos;qc=Ga[20];Ga[20]=Ed;$e=g.viewBoxSize;Vc=Ga[21];Ga[21]=$e;pg=k.buffer;k.buffer=z;Xc=k.divisor;k.divisor=0;fe=k.normalized;k.normalized=!1;Ad=k.offset;
k.offset=0;ze=k.size;k.size=0;Yd=k.state;k.state=1;ie=k.stride;k.stride=0;ha=k.type;k.type=z.dtype;Pd=k.w;k.w=0;Jd=k.x;k.x=0;Hd=k.y;k.y=0;md=k.z;k.z=0;Tc=u.buffer;u.buffer=L;vd=u.divisor;u.divisor=0;rd=u.normalized;u.normalized=!1;kd=u.offset;u.offset=0;wd=u.size;u.size=0;Cd=u.state;u.state=1;Fd=u.stride;u.stride=0;je=u.type;u.type=L.dtype;ye=u.w;u.w=0;Fe=u.x;u.x=0;le=u.y;u.y=0;ke=u.z;u.z=0;he=S.buffer;S.buffer=e;ve=S.divisor;S.divisor=0;de=S.normalized;S.normalized=!1;me=S.offset;S.offset=0;Oc=S.size;
S.size=0;gd=S.state;S.state=1;we=S.stride;S.stride=0;qe=S.type;S.type=e.dtype;Kd=S.w;S.w=0;Qd=S.x;S.x=0;Sd=S.y;S.y=0;Td=S.z;S.z=0;ne=h.buffer;h.buffer=l;$a=h.divisor;h.divisor=0;Be=h.normalized;h.normalized=!1;se=h.offset;h.offset=0;Se=h.size;h.size=0;Te=h.state;h.state=1;Oe=h.stride;h.stride=0;xe=h.type;h.type=l.dtype;He=h.w;h.w=0;Je=h.x;h.x=0;Ke=h.y;h.y=0;Le=h.z;h.z=0;Ie=X.buffer;X.buffer=q;Ld=X.divisor;X.divisor=0;Xd=X.normalized;X.normalized=!1;be=X.offset;X.offset=0;ee=X.size;X.size=0;Me=X.state;
X.state=1;Id=X.stride;X.stride=0;Ud=X.type;X.type=q.dtype;De=X.w;X.w=0;Ne=X.x;X.x=0;hf=X.y;X.y=0;bf=X.z;X.z=0;Ue=f.buffer;f.buffer=c;Pe=f.divisor;f.divisor=0;af=f.normalized;f.normalized=!1;Ze=f.offset;f.offset=0;Ve=f.size;f.size=0;We=f.state;f.state=1;Vd=f.stride;f.stride=0;ae=f.type;f.type=c.dtype;Xe=f.w;f.w=0;jf=f.x;f.x=0;nf=f.y;f.y=0;ef=f.z;f.z=0;kf=x.buffer;x.buffer=G;lf=x.divisor;x.divisor=0;mf=x.normalized;x.normalized=!1;rf=x.offset;x.offset=0;of=x.size;x.size=0;sf=x.state;x.state=1;Bf=x.stride;
x.stride=0;Cf=x.type;x.type=G.dtype;Qe=x.w;x.w=0;Ee=x.x;x.x=0;pf=x.y;x.y=0;qf=x.z;x.z=0;Df=Y.buffer;Y.buffer=H;Gf=Y.divisor;Y.divisor=0;Af=Y.normalized;Y.normalized=!1;Ef=Y.offset;Y.offset=0;Ff=Y.size;Y.size=0;wf=Y.state;Y.state=1;xf=Y.stride;Y.stride=0;vf=Y.type;Y.type=H.dtype;yf=Y.w;Y.w=0;zf=Y.x;Y.x=0;If=Y.y;Y.y=0;Jf=Y.z;Y.z=0;Kf=C.buffer;C.buffer=B;Lf=C.divisor;C.divisor=0;tf=C.normalized;C.normalized=!1;Qf=C.offset;C.offset=0;Hf=C.size;C.size=0;uf=C.state;C.state=1;cg=C.stride;C.stride=0;Rf=C.type;
C.type=B.dtype;Sf=C.w;C.w=0;qg=C.x;C.x=0;ff=C.y;C.y=0;cf=C.z;C.z=0;Mf=F.buffer;F.buffer=U;Nf=F.divisor;F.divisor=0;dg=F.normalized;F.normalized=!1;eg=F.offset;F.offset=0;fg=F.size;F.size=0;gg=F.state;F.state=1;hg=F.stride;F.stride=0;Vf=F.type;F.type=U.dtype;Tf=F.w;F.w=0;Wf=F.x;F.x=0;Xf=F.y;F.y=0;Yf=F.z;F.z=0;ig=d.buffer;d.buffer=n;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=0;xg=d.type;d.type=n.dtype;
yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;gf=t.buffer;t.buffer=v;df=t.divisor;t.divisor=0;Of=t.normalized;t.normalized=!1;Pf=t.offset;t.offset=0;jg=t.size;t.size=0;kg=t.state;t.state=1;lg=t.stride;t.stride=0;mg=t.type;t.type=v.dtype;ng=t.w;t.w=0;Zf=t.x;t.x=0;Uf=t.y;t.y=0;$f=t.z;t.z=0;ag=a.buffer;a.buffer=y;bg=a.divisor;a.divisor=0;og=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=y.dtype;Hg=a.w;a.w=0;Ig=
a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=ta.buffer;ta.buffer=ba;Mg=ta.divisor;ta.divisor=0;Ng=ta.normalized;ta.normalized=!1;Og=ta.offset;ta.offset=0;Pg=ta.size;ta.size=0;Qg=ta.state;ta.state=1;Rg=ta.stride;ta.stride=0;Sg=ta.type;ta.type=ba.dtype;Tg=ta.w;ta.w=0;Ug=ta.x;ta.x=0;Vg=ta.y;ta.y=0;Wg=ta.z;ta.z=0;Xg=A.buffer;A.buffer=w;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=w.dtype;eh=A.w;
A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ja.buffer;ja.buffer=T;jh=ja.divisor;ja.divisor=0;kh=ja.normalized;ja.normalized=!1;lh=ja.offset;ja.offset=0;mh=ja.size;ja.size=0;nh=ja.state;ja.state=1;oh=ja.stride;ja.stride=0;ph=ja.type;ja.type=T.dtype;qh=ja.w;ja.w=0;rh=ja.x;ja.x=0;sh=ja.y;ja.y=0;th=ja.z;ja.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ua.dirty=!0;r(V,g,m);V.viewportWidth=na;V.viewportHeight=sa;$d[0]=Ja;$d[1]=Da;$d[2]=O;$d[3]=J;Sb[0]=P;Sb[1]=Za;Sb[2]=D;Sb[3]=R;yd.blend_enable=fa;Dd[0]=
oa;Dd[1]=ga;Wd[0]=ma;Wd[1]=M;Wd[2]=va;Wd[3]=N;yd.cull_enable=aa;yd.cull_face=xa;yd.depth_enable=Fa;yd.depth_func=ca;yd.depth_mask=Ca;oe[0]=ra;oe[1]=wa;yd.dither=Q;yd.lineWidth=K;Ye[0]=ea;Ye[1]=ya;Ye[2]=Ea;Ye[3]=pa;yd.scissor_enable=Ba;ua.profile=qa;Ia.offset=Hb;Ia.count=td;Ia.primitive=za;Ga[24]=Cc;Ga[3]=dc;Ga[5]=Pc;Ga[7]=ec;Ga[9]=xb;Ga[4]=Md;Ga[6]=mc;Ga[8]=Zd;Ga[10]=db;Ga[23]=Ua;Ga[12]=Re;Ga[14]=lc;Ga[16]=ob;Ga[18]=te;Ga[11]=Gd;Ga[13]=Dc;Ga[15]=xc;Ga[17]=nd;Ga[22]=Ec;Ga[25]=Rd;Ga[26]=ld;Ga[19]=Nb;
Ga[20]=qc;Ga[21]=Vc;k.buffer=pg;k.divisor=Xc;k.normalized=fe;k.offset=Ad;k.size=ze;k.state=Yd;k.stride=ie;k.type=ha;k.w=Pd;k.x=Jd;k.y=Hd;k.z=md;u.buffer=Tc;u.divisor=vd;u.normalized=rd;u.offset=kd;u.size=wd;u.state=Cd;u.stride=Fd;u.type=je;u.w=ye;u.x=Fe;u.y=le;u.z=ke;S.buffer=he;S.divisor=ve;S.normalized=de;S.offset=me;S.size=Oc;S.state=gd;S.stride=we;S.type=qe;S.w=Kd;S.x=Qd;S.y=Sd;S.z=Td;h.buffer=ne;h.divisor=$a;h.normalized=Be;h.offset=se;h.size=Se;h.state=Te;h.stride=Oe;h.type=xe;h.w=He;h.x=Je;
h.y=Ke;h.z=Le;X.buffer=Ie;X.divisor=Ld;X.normalized=Xd;X.offset=be;X.size=ee;X.state=Me;X.stride=Id;X.type=Ud;X.w=De;X.x=Ne;X.y=hf;X.z=bf;f.buffer=Ue;f.divisor=Pe;f.normalized=af;f.offset=Ze;f.size=Ve;f.state=We;f.stride=Vd;f.type=ae;f.w=Xe;f.x=jf;f.y=nf;f.z=ef;x.buffer=kf;x.divisor=lf;x.normalized=mf;x.offset=rf;x.size=of;x.state=sf;x.stride=Bf;x.type=Cf;x.w=Qe;x.x=Ee;x.y=pf;x.z=qf;Y.buffer=Df;Y.divisor=Gf;Y.normalized=Af;Y.offset=Ef;Y.size=Ff;Y.state=wf;Y.stride=xf;Y.type=vf;Y.w=yf;Y.x=zf;Y.y=If;
Y.z=Jf;C.buffer=Kf;C.divisor=Lf;C.normalized=tf;C.offset=Qf;C.size=Hf;C.state=uf;C.stride=cg;C.type=Rf;C.w=Sf;C.x=qg;C.y=ff;C.z=cf;F.buffer=Mf;F.divisor=Nf;F.normalized=dg;F.offset=eg;F.size=fg;F.state=gg;F.stride=hg;F.type=Vf;F.w=Tf;F.x=Wf;F.y=Xf;F.z=Yf;d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;t.buffer=gf;t.divisor=df;t.normalized=Of;t.offset=Pf;t.size=jg;t.state=kg;t.stride=lg;t.type=mg;t.w=ng;t.x=Zf;t.y=Uf;t.z=$f;
a.buffer=ag;a.divisor=bg;a.normalized=og;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;ta.buffer=Lg;ta.divisor=Mg;ta.normalized=Ng;ta.offset=Og;ta.size=Pg;ta.state=Qg;ta.stride=Rg;ta.type=Sg;ta.w=Tg;ta.x=Ug;ta.y=Vg;ta.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ja.buffer=ih;ja.divisor=jh;ja.normalized=kh;ja.offset=lh;ja.size=mh;ja.state=nh;ja.stride=oh;ja.type=ph;ja.w=qh;ja.x=
rh;ja.y=sh;ja.z=th;$b.vert=uh;$b.frag=vh;ua.dirty=!0}}},$1:function(b,da){var K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d;K=b.attributes;L=b.current;e=b.framebuffer;l=b.gl;q=b.next;c=b.vao;G=q.blend_color;H=L.blend_color;B=q.blend_equation;U=L.blend_equation;n=q.blend_func;v=L.blend_func;y=q.colorMask;ba=L.colorMask;w=q.depth_range;T=L.depth_range;z=q.polygonOffset_offset;Q=L.polygonOffset_offset;ia=q.sample_coverage;k=L.sample_coverage;u=q.scissor_box;S=L.scissor_box;h=q.stencil_func;
X=L.stencil_func;f=q.stencil_opBack;x=L.stencil_opBack;Y=q.stencil_opFront;C=L.stencil_opFront;F=q.viewport;d=L.viewport;return{poll:function(){var c,a,b,A,K,da,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra;L.dirty=!1;a=q.blend_enable;b=q.cull_enable;A=q.depth_enable;K=q.dither;da=q.polygonOffset_enable;W=q.sample_alpha;ea=q.sample_enable;R=q.scissor_enable;O=q.stencil_enable;D=q.cull_face;g=L.cull_face;N=q.depth_func;M=L.depth_func;Ca=q.depth_mask;qa=L.depth_mask;m=q.frontFace;J=L.frontFace;aa=q.lineWidth;
P=L.lineWidth;la=q.stencil_mask;ra=L.stencil_mask;c=e.next;c!==e.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),e.cur=c);a!==L.blend_enable&&(a?l.enable(3042):l.disable(3042),L.blend_enable=a);b!==L.cull_enable&&(b?l.enable(2884):l.disable(2884),L.cull_enable=b);A!==L.depth_enable&&(A?l.enable(2929):l.disable(2929),L.depth_enable=A);K!==L.dither&&(K?l.enable(3024):l.disable(3024),L.dither=K);da!==L.polygonOffset_enable&&(da?l.enable(32823):l.disable(32823),L.polygonOffset_enable=
da);W!==L.sample_alpha&&(W?l.enable(32926):l.disable(32926),L.sample_alpha=W);ea!==L.sample_enable&&(ea?l.enable(32928):l.disable(32928),L.sample_enable=ea);R!==L.scissor_enable&&(R?l.enable(3089):l.disable(3089),L.scissor_enable=R);O!==L.stencil_enable&&(O?l.enable(2960):l.disable(2960),L.stencil_enable=O);if(G[0]!==H[0]||G[1]!==H[1]||G[2]!==H[2]||G[3]!==H[3])l.blendColor(G[0],G[1],G[2],G[3]),H[0]=G[0],H[1]=G[1],H[2]=G[2],H[3]=G[3];if(B[0]!==U[0]||B[1]!==U[1])l.blendEquationSeparate(B[0],B[1]),U[0]=
B[0],U[1]=B[1];if(n[0]!==v[0]||n[1]!==v[1]||n[2]!==v[2]||n[3]!==v[3])l.blendFuncSeparate(n[0],n[1],n[2],n[3]),v[0]=n[0],v[1]=n[1],v[2]=n[2],v[3]=n[3];if(y[0]!==ba[0]||y[1]!==ba[1]||y[2]!==ba[2]||y[3]!==ba[3])l.colorMask(y[0],y[1],y[2],y[3]),ba[0]=y[0],ba[1]=y[1],ba[2]=y[2],ba[3]=y[3];D!==g&&(l.cullFace(D),L.cull_face=D);N!==M&&(l.depthFunc(N),L.depth_func=N);Ca!==qa&&(l.depthMask(Ca),L.depth_mask=Ca);if(w[0]!==T[0]||w[1]!==T[1])l.depthRange(w[0],w[1]),T[0]=w[0],T[1]=w[1];m!==J&&(l.frontFace(m),L.frontFace=
m);aa!==P&&(l.lineWidth(aa),L.lineWidth=aa);if(z[0]!==Q[0]||z[1]!==Q[1])l.polygonOffset(z[0],z[1]),Q[0]=z[0],Q[1]=z[1];if(ia[0]!==k[0]||ia[1]!==k[1])l.sampleCoverage(ia[0],ia[1]),k[0]=ia[0],k[1]=ia[1];if(u[0]!==S[0]||u[1]!==S[1]||u[2]!==S[2]||u[3]!==S[3])l.scissor(u[0],u[1],u[2],u[3]),S[0]=u[0],S[1]=u[1],S[2]=u[2],S[3]=u[3];if(h[0]!==X[0]||h[1]!==X[1]||h[2]!==X[2])l.stencilFunc(h[0],h[1],h[2]),X[0]=h[0],X[1]=h[1],X[2]=h[2];la!==ra&&(l.stencilMask(la),L.stencil_mask=la);if(f[0]!==x[0]||f[1]!==x[1]||
f[2]!==x[2]||f[3]!==x[3])l.stencilOpSeparate(f[0],f[1],f[2],f[3]),x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3];if(Y[0]!==C[0]||Y[1]!==C[1]||Y[2]!==C[2]||Y[3]!==C[3])l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]),C[0]=Y[0],C[1]=Y[1],C[2]=Y[2],C[3]=Y[3];if(F[0]!==d[0]||F[1]!==d[1]||F[2]!==d[2]||F[3]!==d[3])l.viewport(F[0],F[1],F[2],F[3]),d[0]=F[0],d[1]=F[1],d[2]=F[2],d[3]=F[3]},refresh:function(){var t,a,b,A,ja,Cc,W,ea,R,O,D,g,N,M,Ca,qa;L.dirty=!1;a=q.blend_enable;b=q.cull_enable;A=q.depth_enable;ja=q.dither;
Cc=q.polygonOffset_enable;W=q.sample_alpha;ea=q.sample_enable;R=q.scissor_enable;O=q.stencil_enable;D=q.cull_face;g=q.depth_func;N=q.depth_mask;M=q.frontFace;Ca=q.lineWidth;qa=q.stencil_mask;(t=e.next)?l.bindFramebuffer(36160,t.framebuffer):l.bindFramebuffer(36160,null);e.cur=t;t=K[0];t.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(0,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,t.x,t.y,t.z,t.w),t.buffer=
null);da.vertexAttribDivisorANGLE(0,t.divisor);t=K[1];t.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(1,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(1,t.divisor);t=K[2];t.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(2,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(2),
l.vertexAttrib4f(2,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(2,t.divisor);t=K[3];t.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(3,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(3,t.divisor);t=K[4];t.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(4,t.size,t.type,t.normalized,
t.stride,t.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(4,t.divisor);t=K[5];t.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(5,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(5,t.divisor);t=K[6];t.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,t.buffer.buffer),
l.vertexAttribPointer(6,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(6,t.divisor);t=K[7];t.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(7,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(7,t.divisor);t=K[8];t.buffer?(l.enableVertexAttribArray(8),
l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(8,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(8,t.divisor);t=K[9];t.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(9,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(9,t.divisor);
t=K[10];t.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(10,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(10,t.divisor);t=K[11];t.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(11,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,t.x,t.y,t.z,
t.w),t.buffer=null);da.vertexAttribDivisorANGLE(11,t.divisor);t=K[12];t.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(12,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(12,t.divisor);t=K[13];t.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(13,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(13),
l.vertexAttrib4f(13,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(13,t.divisor);t=K[14];t.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(14,t.size,t.type,t.normalized,t.stride,t.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(14,t.divisor);t=K[15];t.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,t.buffer.buffer),l.vertexAttribPointer(15,t.size,t.type,t.normalized,
t.stride,t.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,t.x,t.y,t.z,t.w),t.buffer=null);da.vertexAttribDivisorANGLE(15,t.divisor);c.currentVAO=null;c.setVAO(c.targetVAO);a?l.enable(3042):l.disable(3042);L.blend_enable=a;b?l.enable(2884):l.disable(2884);L.cull_enable=b;A?l.enable(2929):l.disable(2929);L.depth_enable=A;ja?l.enable(3024):l.disable(3024);L.dither=ja;Cc?l.enable(32823):l.disable(32823);L.polygonOffset_enable=Cc;W?l.enable(32926):l.disable(32926);L.sample_alpha=W;ea?l.enable(32928):
l.disable(32928);L.sample_enable=ea;R?l.enable(3089):l.disable(3089);L.scissor_enable=R;O?l.enable(2960):l.disable(2960);L.stencil_enable=O;l.blendColor(G[0],G[1],G[2],G[3]);H[0]=G[0];H[1]=G[1];H[2]=G[2];H[3]=G[3];l.blendEquationSeparate(B[0],B[1]);U[0]=B[0];U[1]=B[1];l.blendFuncSeparate(n[0],n[1],n[2],n[3]);v[0]=n[0];v[1]=n[1];v[2]=n[2];v[3]=n[3];l.colorMask(y[0],y[1],y[2],y[3]);ba[0]=y[0];ba[1]=y[1];ba[2]=y[2];ba[3]=y[3];l.cullFace(D);L.cull_face=D;l.depthFunc(g);L.depth_func=g;l.depthMask(N);L.depth_mask=
N;l.depthRange(w[0],w[1]);T[0]=w[0];T[1]=w[1];l.frontFace(M);L.frontFace=M;l.lineWidth(Ca);L.lineWidth=Ca;l.polygonOffset(z[0],z[1]);Q[0]=z[0];Q[1]=z[1];l.sampleCoverage(ia[0],ia[1]);k[0]=ia[0];k[1]=ia[1];l.scissor(u[0],u[1],u[2],u[3]);S[0]=u[0];S[1]=u[1];S[2]=u[2];S[3]=u[3];l.stencilFunc(h[0],h[1],h[2]);X[0]=h[0];X[1]=h[1];X[2]=h[2];l.stencilMask(qa);L.stencil_mask=qa;l.stencilOpSeparate(f[0],f[1],f[2],f[3]);x[0]=f[0];x[1]=f[1];x[2]=f[2];x[3]=f[3];l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]);C[0]=Y[0];
C[1]=Y[1];C[2]=Y[2];C[3]=Y[3];l.viewport(F[0],F[1],F[2],F[3]);d[0]=F[0];d[1]=F[1];d[2]=F[2];d[3]=F[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Cc,W,ea,R,O,D,g,N,M,Ca,qa){var m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,td,Hb,ga,I,sa,Da,oa,xa,Fa,ma,V,ua,Ia,za,mb,ca,yd,$b,Ga,ac,Sb;m=b.attributes;
J=b.buffer;aa=b.context;P=b.current;la=b.draw;ra=b.elements;Aa=b.extensions;wa=b.framebuffer;fa=b.gl;Ba=b.isBufferArgs;ka=b.next;pa=b.shader;ya=b.uniforms;Ja=b.vao;na=ka.blend_color;Za=P.blend_color;Ta=ka.blend_equation;r=P.blend_equation;p=ka.blend_func;E=P.blend_func;va=ka.colorMask;Ea=P.colorMask;td=ka.depth_range;Hb=P.depth_range;ga=ka.polygonOffset_offset;I=P.polygonOffset_offset;sa=ka.sample_coverage;Da=P.sample_coverage;oa=ka.scissor_box;xa=P.scissor_box;Fa=ka.stencil_func;ma=P.stencil_func;
V=ka.stencil_opBack;ua=P.stencil_opBack;Ia=ka.stencil_opFront;za=P.stencil_opFront;mb=ka.viewport;ca=P.viewport;yd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=K;$b.divisor=1;Ga={};Ga.buffer=L;Ga.divisor=1;ac={};ac.buffer=e;ac.divisor=1;Sb={};Sb.buffer=l;Sb.divisor=1;return{batch:function(c,f){var k,l,h,p,q,b;k=wa.next;k!==wa.cur&&(k?fa.bindFramebuffer(36160,k.framebuffer):fa.bindFramebuffer(36160,null),wa.cur=k);if(P.dirty){var u,
na,e,w,oa,L,z,y,H,S,K,Q,G,B,T,Ta,X,ya,pa,ba,ia,mb,Wc,Bb,Fb,Z,xb,xc,Cb,Jc,lc,Hc,Xc;u=ka.dither;u!==P.dither&&(u?fa.enable(3024):fa.disable(3024),P.dither=u);na=ka.depth_func;na!==P.depth_func&&(fa.depthFunc(na),P.depth_func=na);e=td[0];w=td[1];if(e!==Hb[0]||w!==Hb[1])fa.depthRange(e,w),Hb[0]=e,Hb[1]=w;oa=ka.depth_mask;oa!==P.depth_mask&&(fa.depthMask(oa),P.depth_mask=oa);L=va[0];z=va[1];y=va[2];H=va[3];if(L!==Ea[0]||z!==Ea[1]||y!==Ea[2]||H!==Ea[3])fa.colorMask(L,z,y,H),Ea[0]=L,Ea[1]=z,Ea[2]=y,Ea[3]=
H;S=ka.cull_enable;S!==P.cull_enable&&(S?fa.enable(2884):fa.disable(2884),P.cull_enable=S);K=ka.cull_face;K!==P.cull_face&&(fa.cullFace(K),P.cull_face=K);Q=ka.frontFace;Q!==P.frontFace&&(fa.frontFace(Q),P.frontFace=Q);G=ka.lineWidth;G!==P.lineWidth&&(fa.lineWidth(G),P.lineWidth=G);B=ka.polygonOffset_enable;B!==P.polygonOffset_enable&&(B?fa.enable(32823):fa.disable(32823),P.polygonOffset_enable=B);T=ga[0];Ta=ga[1];if(T!==I[0]||Ta!==I[1])fa.polygonOffset(T,Ta),I[0]=T,I[1]=Ta;X=ka.sample_alpha;X!==P.sample_alpha&&
(X?fa.enable(32926):fa.disable(32926),P.sample_alpha=X);ya=ka.sample_enable;ya!==P.sample_enable&&(ya?fa.enable(32928):fa.disable(32928),P.sample_enable=ya);pa=sa[0];ba=sa[1];if(pa!==Da[0]||ba!==Da[1])fa.sampleCoverage(pa,ba),Da[0]=pa,Da[1]=ba;ia=ka.stencil_enable;ia!==P.stencil_enable&&(ia?fa.enable(2960):fa.disable(2960),P.stencil_enable=ia);mb=ka.stencil_mask;mb!==P.stencil_mask&&(fa.stencilMask(mb),P.stencil_mask=mb);Wc=Fa[0];Bb=Fa[1];Fb=Fa[2];if(Wc!==ma[0]||Bb!==ma[1]||Fb!==ma[2])fa.stencilFunc(Wc,
Bb,Fb),ma[0]=Wc,ma[1]=Bb,ma[2]=Fb;Z=Ia[0];xb=Ia[1];xc=Ia[2];Cb=Ia[3];if(Z!==za[0]||xb!==za[1]||xc!==za[2]||Cb!==za[3])fa.stencilOpSeparate(Z,xb,xc,Cb),za[0]=Z,za[1]=xb,za[2]=xc,za[3]=Cb;Jc=V[0];lc=V[1];Hc=V[2];Xc=V[3];if(Jc!==ua[0]||lc!==ua[1]||Hc!==ua[2]||Xc!==ua[3])fa.stencilOpSeparate(Jc,lc,Hc,Xc),ua[0]=Jc,ua[1]=lc,ua[2]=Hc,ua[3]=Xc}fa.blendColor(0,0,0,0);Za[0]=0;Za[1]=0;Za[2]=0;Za[3]=0;fa.enable(3042);P.blend_enable=!0;fa.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;fa.blendFuncSeparate(770,
771,773,1);E[0]=770;E[1]=771;E[2]=773;E[3]=1;fa.disable(2929);P.depth_enable=!1;fa.enable(3089);P.scissor_enable=!0;if(l=P.profile)h=performance.now(),da.count+=f;fa.useProgram(x.program);p=Aa.angle_instanced_arrays;var Vc,Ec,dc,Ic,oc,pc,mc,ec;Ja.setVAO(null);Vc=ja.location;Ec=m[Vc];Ec.buffer||fa.enableVertexAttribArray(Vc);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==U||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(Vc,2,5126,!1,24,0),Ec.type=
5126,Ec.size=2,Ec.buffer=U,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(p.vertexAttribDivisorANGLE(Vc,0),Ec.divisor=0);dc=W.location;Ic=m[dc];Ic.buffer||fa.enableVertexAttribArray(dc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==n||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)fa.bindBuffer(34962,n.buffer),fa.vertexAttribPointer(dc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=n,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(p.vertexAttribDivisorANGLE(dc,0),Ic.divisor=
0);oc=a.location;pc=m[oc];pc.buffer||fa.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==v||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)fa.bindBuffer(34962,v.buffer),fa.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=v,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(p.vertexAttribDivisorANGLE(oc,0),pc.divisor=0);(mc=la.elements)?fa.bindBuffer(34963,mc.buffer.buffer):Ja.currentVAO&&(mc=ra.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,
mc.buffer.buffer);ec=la.offset;for(q=0;q<f;++q){b=c[q];var ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,ha,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc;ab=b.viewport;qc=ab.x|0;yb=ab.y|0;db="width"in ab?ab.width|0:aa.framebufferWidth-qc;Nb="height"in
ab?ab.height|0:aa.framebufferHeight-yb;bb=aa.viewportWidth;aa.viewportWidth=db;ob=aa.viewportHeight;aa.viewportHeight=Nb;fa.viewport(qc,yb,db,Nb);ca[0]=qc;ca[1]=yb;ca[2]=db;ca[3]=Nb;Ua=b.viewport;hd=Ua.x|0;Ib=Ua.y|0;Jb="width"in Ua?Ua.width|0:aa.framebufferWidth-hd;rc="height"in Ua?Ua.height|0:aa.framebufferHeight-Ib;fa.scissor(hd,Ib,Jb,rc);xa[0]=hd;xa[1]=Ib;xa[2]=Jb;xa[3]=rc;Ob=Y.call(this,aa,b,q);ac.offset=Ob;jb=!1;Gb=null;Db=0;wb=!1;Yb=hb=0;Pb=1;qb=0;Ra=5126;ib=ic=zb=Ub=0;Ba(ac)?(jb=!0,Gb=J.createStream(34962,
ac),Ra=Gb.dtype):(Gb=J.getBuffer(ac))?Ra=Gb.dtype:"constant"in ac?(Pb=2,"number"===typeof ac.constant?(zb=ac.constant,ic=ib=Ub=0):(zb=0<ac.constant.length?ac.constant[0]:0,ic=1<ac.constant.length?ac.constant[1]:0,ib=2<ac.constant.length?ac.constant[2]:0,Ub=3<ac.constant.length?ac.constant[3]:0)):(Gb=Ba(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Ra="type"in ac?yd[ac.type]:Gb.dtype,wb=!!ac.normalized,Yb=ac.size|0,hb=ac.offset|0,qb=ac.stride|0,Db=ac.divisor|0);pb=O.location;Ha=
m[pb];if(1===Pb){Ha.buffer||fa.enableVertexAttribArray(pb);rb=Yb||2;if(Ha.type!==Ra||Ha.size!==rb||Ha.buffer!==Gb||Ha.normalized!==wb||Ha.offset!==hb||Ha.stride!==qb)fa.bindBuffer(34962,Gb.buffer),fa.vertexAttribPointer(pb,rb,Ra,wb,qb,hb),Ha.type=Ra,Ha.size=rb,Ha.buffer=Gb,Ha.normalized=wb,Ha.offset=hb,Ha.stride=qb;Ha.divisor!==Db&&(p.vertexAttribDivisorANGLE(pb,Db),Ha.divisor=Db)}else if(Ha.buffer&&(fa.disableVertexAttribArray(pb),Ha.buffer=null),Ha.x!==zb||Ha.y!==ic||Ha.z!==ib||Ha.w!==Ub)fa.vertexAttrib4f(pb,
zb,ic,ib,Ub),Ha.x=zb,Ha.y=ic,Ha.z=ib,Ha.w=Ub;Ka=C.call(this,aa,b,q);Sb.offset=Ka;fb=!1;gb=null;La=0;kb=!1;tb=Va=0;sb=1;Oa=0;tc=5126;Ma=Eb=Kb=Qa=0;Ba(Sb)?(fb=!0,gb=J.createStream(34962,Sb),tc=gb.dtype):(gb=J.getBuffer(Sb))?tc=gb.dtype:"constant"in Sb?(sb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Ma=Qa=0):(Kb=0<Sb.constant.length?Sb.constant[0]:0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?Sb.constant[2]:0,Qa=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Ba(Sb.buffer)?J.createStream(34962,
Sb.buffer):J.getBuffer(Sb.buffer),tc="type"in Sb?yd[Sb.type]:gb.dtype,kb=!!Sb.normalized,tb=Sb.size|0,Va=Sb.offset|0,Oa=Sb.stride|0,La=Sb.divisor|0);zd=D.location;Xa=m[zd];if(1===sb){Xa.buffer||fa.enableVertexAttribArray(zd);Lb=tb||2;if(Xa.type!==tc||Xa.size!==Lb||Xa.buffer!==gb||Xa.normalized!==kb||Xa.offset!==Va||Xa.stride!==Oa)fa.bindBuffer(34962,gb.buffer),fa.vertexAttribPointer(zd,Lb,tc,kb,Oa,Va),Xa.type=tc,Xa.size=Lb,Xa.buffer=gb,Xa.normalized=kb,Xa.offset=Va,Xa.stride=Oa;Xa.divisor!==La&&(p.vertexAttribDivisorANGLE(zd,
La),Xa.divisor=La)}else if(Xa.buffer&&(fa.disableVertexAttribArray(zd),Xa.buffer=null),Xa.x!==Kb||Xa.y!==Eb||Xa.z!==Ma||Xa.w!==Qa)fa.vertexAttrib4f(zd,Kb,Eb,Ma,Qa),Xa.x=Kb,Xa.y=Eb,Xa.z=Ma,Xa.w=Qa;Mb=F.call(this,aa,b,q);Ga.offset=Mb;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;fc=5126;jc=cb=vc=Ac=0;Ba(Ga)?(lb=!0,Na=J.createStream(34962,Ga),fc=Na.dtype):(Na=J.getBuffer(Ga))?fc=Na.dtype:"constant"in Ga?(Sa=2,"number"===typeof Ga.constant?(vc=Ga.constant,cb=jc=Ac=0):(vc=0<Ga.constant.length?Ga.constant[0]:
0,cb=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,Ac=3<Ga.constant.length?Ga.constant[3]:0)):(Na=Ba(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),fc="type"in Ga?yd[Ga.type]:Na.dtype,Pa=!!Ga.normalized,vb=Ga.size|0,ub=Ga.offset|0,nb=Ga.stride|0,Zb=Ga.divisor|0);qd=Cc.location;Wa=m[qd];if(1===Sa){Wa.buffer||fa.enableVertexAttribArray(qd);Mc=vb||4;if(Wa.type!==fc||Wa.size!==Mc||Wa.buffer!==Na||Wa.normalized!==Pa||Wa.offset!==ub||Wa.stride!==nb)fa.bindBuffer(34962,
Na.buffer),fa.vertexAttribPointer(qd,Mc,fc,Pa,nb,ub),Wa.type=fc,Wa.size=Mc,Wa.buffer=Na,Wa.normalized=Pa,Wa.offset=ub,Wa.stride=nb;Wa.divisor!==Zb&&(p.vertexAttribDivisorANGLE(qd,Zb),Wa.divisor=Zb)}else if(Wa.buffer&&(fa.disableVertexAttribArray(qd),Wa.buffer=null),Wa.x!==vc||Wa.y!==cb||Wa.z!==jc||Wa.w!==Ac)fa.vertexAttrib4f(qd,vc,cb,jc,Ac),Wa.x=vc,Wa.y=cb,Wa.z=jc,Wa.w=Ac;Ab=d.call(this,aa,b,q);$b.offset=Ab;Ya=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;pe=0;Fc=5126;ud=Yc=Nc=sd=0;Ba($b)?(Ya=!0,Vb=J.createStream(34962,
$b),Fc=Vb.dtype):(Vb=J.getBuffer($b))?Fc=Vb.dtype:"constant"in $b?(Rb=2,"number"===typeof $b.constant?(Nc=$b.constant,Yc=ud=sd=0):(Nc=0<$b.constant.length?$b.constant[0]:0,Yc=1<$b.constant.length?$b.constant[1]:0,ud=2<$b.constant.length?$b.constant[2]:0,sd=3<$b.constant.length?$b.constant[3]:0)):(Vb=Ba($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),Fc="type"in $b?yd[$b.type]:Vb.dtype,Wb=!!$b.normalized,Kc=$b.size|0,Qb=$b.offset|0,pe=$b.stride|0,uc=$b.divisor|0);nc=A.location;wc=
m[nc];if(1===Rb){wc.buffer||fa.enableVertexAttribArray(nc);gc=Kc||4;if(wc.type!==Fc||wc.size!==gc||wc.buffer!==Vb||wc.normalized!==Wb||wc.offset!==Qb||wc.stride!==pe)fa.bindBuffer(34962,Vb.buffer),fa.vertexAttribPointer(nc,gc,Fc,Wb,pe,Qb),wc.type=Fc,wc.size=gc,wc.buffer=Vb,wc.normalized=Wb,wc.offset=Qb,wc.stride=pe;wc.divisor!==uc&&(p.vertexAttribDivisorANGLE(nc,uc),wc.divisor=uc)}else if(wc.buffer&&(fa.disableVertexAttribArray(nc),wc.buffer=null),wc.x!==Nc||wc.y!==Yc||wc.z!==ud||wc.w!==sd)fa.vertexAttrib4f(nc,
Nc,Yc,ud,sd),wc.x=Nc,wc.y=Yc,wc.z=ud,wc.w=sd;eb=t.call(this,aa,b,q);sc=eb[0];Xb=eb[1];hc=eb[2];Bc=eb[3];q&&Tb===sc&&cc===Xb&&yc===hc&&cd===Bc||(Tb=sc,cc=Xb,yc=hc,cd=Bc,fa.uniform4f(qa.location,sc,Xb,hc,Bc));Qc=b.lineWidth;q&&Rc===Qc||(Rc=Qc,fa.uniform1f(ea.location,Qc));Sc=b.capSize;q&&Zc===Sc||(Zc=Sc,fa.uniform1f(ta.location,Sc));od=b.scale;dd=od[0];kc=od[1];q&&$c===dd&&bc===kc||($c=dd,bc=kc,fa.uniform2f(g.location,dd,kc));ad=b.scaleFract;Uc=ad[0];zc=ad[1];q&&ed===Uc&&id===zc||(ed=Uc,id=zc,fa.uniform2f(N.location,
Uc,zc));ha=b.translate;xd=ha[0];jd=ha[1];q&&ue===xd&&Ce===jd||(ue=xd,Ce=jd,fa.uniform2f(M.location,xd,jd));Od=b.translateFract;ge=Od[0];Pd=Od[1];q&&ce===ge&&Jd===Pd||(ce=ge,Jd=Pd,fa.uniform2f(Ca.location,ge,Pd));Hd=b.opacity;q&&md===Hd||(md=Hd,fa.uniform1f(R.location,Hd));Tc=b.count;0<Tc?mc?p.drawElementsInstancedANGLE(4,36,mc.type,ec<<(mc.type-5121>>1),Tc):p.drawArraysInstancedANGLE(4,ec,36,Tc):0>Tc&&(mc?fa.drawElements(4,36,mc.type,ec<<(mc.type-5121>>1)):fa.drawArrays(4,ec,36));aa.viewportWidth=
bb;aa.viewportHeight=ob;jb&&J.destroyStream(Gb);fb&&J.destroyStream(gb);lb&&J.destroyStream(Na);Ya&&J.destroyStream(Vb)}P.dirty=!0;Ja.setVAO(null);l&&(da.cpuTime+=performance.now()-h)},draw:function(d){var f,k,l,h,p,b,t,u,na,x,e,w,oa,C,F,L,z,S,K,Q,T,Ta,X,ya,pa,ba,ia,Y,mb,Z,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb;f=wa.next;f!==wa.cur&&(f?
fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),wa.cur=f);if(P.dirty){var Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,ha,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb;Pa=ka.dither;Pa!==P.dither&&(Pa?fa.enable(3024):fa.disable(3024),P.dither=Pa);ub=ka.depth_func;ub!==P.depth_func&&(fa.depthFunc(ub),P.depth_func=ub);vb=td[0];Sa=td[1];if(vb!==Hb[0]||Sa!==Hb[1])fa.depthRange(vb,Sa),Hb[0]=vb,Hb[1]=Sa;nb=ka.depth_mask;nb!==P.depth_mask&&(fa.depthMask(nb),P.depth_mask=nb);fc=
va[0];Ac=va[1];vc=va[2];cb=va[3];if(fc!==Ea[0]||Ac!==Ea[1]||vc!==Ea[2]||cb!==Ea[3])fa.colorMask(fc,Ac,vc,cb),Ea[0]=fc,Ea[1]=Ac,Ea[2]=vc,Ea[3]=cb;jc=ka.cull_enable;jc!==P.cull_enable&&(jc?fa.enable(2884):fa.disable(2884),P.cull_enable=jc);qd=ka.cull_face;qd!==P.cull_face&&(fa.cullFace(qd),P.cull_face=qd);Wa=ka.frontFace;Wa!==P.frontFace&&(fa.frontFace(Wa),P.frontFace=Wa);Mc=ka.lineWidth;Mc!==P.lineWidth&&(fa.lineWidth(Mc),P.lineWidth=Mc);Ab=ka.polygonOffset_enable;Ab!==P.polygonOffset_enable&&(Ab?
fa.enable(32823):fa.disable(32823),P.polygonOffset_enable=Ab);Ya=ga[0];Vb=ga[1];if(Ya!==I[0]||Vb!==I[1])fa.polygonOffset(Ya,Vb),I[0]=Ya,I[1]=Vb;uc=ka.sample_alpha;uc!==P.sample_alpha&&(uc?fa.enable(32926):fa.disable(32926),P.sample_alpha=uc);Wb=ka.sample_enable;Wb!==P.sample_enable&&(Wb?fa.enable(32928):fa.disable(32928),P.sample_enable=Wb);Qb=sa[0];Kc=sa[1];if(Qb!==Da[0]||Kc!==Da[1])fa.sampleCoverage(Qb,Kc),Da[0]=Qb,Da[1]=Kc;Rb=ka.stencil_enable;Rb!==P.stencil_enable&&(Rb?fa.enable(2960):fa.disable(2960),
P.stencil_enable=Rb);ha=ka.stencil_mask;ha!==P.stencil_mask&&(fa.stencilMask(ha),P.stencil_mask=ha);Fc=Fa[0];sd=Fa[1];Nc=Fa[2];if(Fc!==ma[0]||sd!==ma[1]||Nc!==ma[2])fa.stencilFunc(Fc,sd,Nc),ma[0]=Fc,ma[1]=sd,ma[2]=Nc;Yc=Ia[0];ud=Ia[1];nc=Ia[2];wc=Ia[3];if(Yc!==za[0]||ud!==za[1]||nc!==za[2]||wc!==za[3])fa.stencilOpSeparate(Yc,ud,nc,wc),za[0]=Yc,za[1]=ud,za[2]=nc,za[3]=wc;gc=V[0];eb=V[1];sc=V[2];Tb=V[3];if(gc!==ua[0]||eb!==ua[1]||sc!==ua[2]||Tb!==ua[3])fa.stencilOpSeparate(gc,eb,sc,Tb),ua[0]=gc,ua[1]=
eb,ua[2]=sc,ua[3]=Tb}k=d.viewport;l=k.x|0;h=k.y|0;p="width"in k?k.width|0:aa.framebufferWidth-l;b="height"in k?k.height|0:aa.framebufferHeight-h;t=aa.viewportWidth;aa.viewportWidth=p;u=aa.viewportHeight;aa.viewportHeight=b;fa.viewport(l,h,p,b);ca[0]=l;ca[1]=h;ca[2]=p;ca[3]=b;fa.blendColor(0,0,0,0);Za[0]=0;Za[1]=0;Za[2]=0;Za[3]=0;fa.enable(3042);P.blend_enable=!0;fa.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;fa.blendFuncSeparate(770,771,773,1);E[0]=770;E[1]=771;E[2]=773;E[3]=1;fa.disable(2929);
P.depth_enable=!1;na=d.viewport;x=na.x|0;e=na.y|0;w="width"in na?na.width|0:aa.framebufferWidth-x;oa="height"in na?na.height|0:aa.framebufferHeight-e;fa.scissor(x,e,w,oa);xa[0]=x;xa[1]=e;xa[2]=w;xa[3]=oa;fa.enable(3089);P.scissor_enable=!0;if(C=P.profile)F=performance.now(),da.count++;fa.useProgram(q.program);L=Aa.angle_instanced_arrays;Ja.setVAO(null);z=c.call(this,aa,d,0);ac.offset=z;S=!1;K=null;Q=0;T=!1;X=Ta=0;ya=1;pa=0;ba=5126;Z=mb=Y=ia=0;Ba(ac)?(S=!0,K=J.createStream(34962,ac),ba=K.dtype):(K=
J.getBuffer(ac))?ba=K.dtype:"constant"in ac?(ya=2,"number"===typeof ac.constant?(Y=ac.constant,mb=Z=ia=0):(Y=0<ac.constant.length?ac.constant[0]:0,mb=1<ac.constant.length?ac.constant[1]:0,Z=2<ac.constant.length?ac.constant[2]:0,ia=3<ac.constant.length?ac.constant[3]:0)):(K=Ba(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),ba="type"in ac?yd[ac.type]:K.dtype,T=!!ac.normalized,X=ac.size|0,Ta=ac.offset|0,pa=ac.stride|0,Q=ac.divisor|0);Bb=O.location;Fb=m[Bb];if(1===ya){Fb.buffer||fa.enableVertexAttribArray(Bb);
Dc=X||2;if(Fb.type!==ba||Fb.size!==Dc||Fb.buffer!==K||Fb.normalized!==T||Fb.offset!==Ta||Fb.stride!==pa)fa.bindBuffer(34962,K.buffer),fa.vertexAttribPointer(Bb,Dc,ba,T,pa,Ta),Fb.type=ba,Fb.size=Dc,Fb.buffer=K,Fb.normalized=T,Fb.offset=Ta,Fb.stride=pa;Fb.divisor!==Q&&(L.vertexAttribDivisorANGLE(Bb,Q),Fb.divisor=Q)}else if(Fb.buffer&&(fa.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==Y||Fb.y!==mb||Fb.z!==Z||Fb.w!==ia)fa.vertexAttrib4f(Bb,Y,mb,Z,ia),Fb.x=Y,Fb.y=mb,Fb.z=Z,Fb.w=ia;xb=G.call(this,
aa,d,0);Sb.offset=xb;xc=!1;Cb=null;Jc=0;lc=!1;Xc=Hc=0;Vc=1;Ec=0;dc=5126;mc=pc=oc=Ic=0;Ba(Sb)?(xc=!0,Cb=J.createStream(34962,Sb),dc=Cb.dtype):(Cb=J.getBuffer(Sb))?dc=Cb.dtype:"constant"in Sb?(Vc=2,"number"===typeof Sb.constant?(oc=Sb.constant,pc=mc=Ic=0):(oc=0<Sb.constant.length?Sb.constant[0]:0,pc=1<Sb.constant.length?Sb.constant[1]:0,mc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Ba(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),dc="type"in
Sb?yd[Sb.type]:Cb.dtype,lc=!!Sb.normalized,Xc=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Jc=Sb.divisor|0);ec=D.location;ab=m[ec];if(1===Vc){ab.buffer||fa.enableVertexAttribArray(ec);qc=Xc||2;if(ab.type!==dc||ab.size!==qc||ab.buffer!==Cb||ab.normalized!==lc||ab.offset!==Hc||ab.stride!==Ec)fa.bindBuffer(34962,Cb.buffer),fa.vertexAttribPointer(ec,qc,dc,lc,Ec,Hc),ab.type=dc,ab.size=qc,ab.buffer=Cb,ab.normalized=lc,ab.offset=Hc,ab.stride=Ec;ab.divisor!==Jc&&(L.vertexAttribDivisorANGLE(ec,Jc),ab.divisor=Jc)}else if(ab.buffer&&
(fa.disableVertexAttribArray(ec),ab.buffer=null),ab.x!==oc||ab.y!==pc||ab.z!==mc||ab.w!==Ic)fa.vertexAttrib4f(ec,oc,pc,mc,Ic),ab.x=oc,ab.y=pc,ab.z=mc,ab.w=Ic;yb=H.call(this,aa,d,0);Ga.offset=yb;db=!1;Nb=null;bb=0;ob=!1;hd=Ua=0;Ib=1;Jb=0;rc=5126;Db=Gb=jb=Ob=0;Ba(Ga)?(db=!0,Nb=J.createStream(34962,Ga),rc=Nb.dtype):(Nb=J.getBuffer(Ga))?rc=Nb.dtype:"constant"in Ga?(Ib=2,"number"===typeof Ga.constant?(jb=Ga.constant,Gb=Db=Ob=0):(jb=0<Ga.constant.length?Ga.constant[0]:0,Gb=1<Ga.constant.length?Ga.constant[1]:
0,Db=2<Ga.constant.length?Ga.constant[2]:0,Ob=3<Ga.constant.length?Ga.constant[3]:0)):(Nb=Ba(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),rc="type"in Ga?yd[Ga.type]:Nb.dtype,ob=!!Ga.normalized,hd=Ga.size|0,Ua=Ga.offset|0,Jb=Ga.stride|0,bb=Ga.divisor|0);wb=Cc.location;hb=m[wb];if(1===Ib){hb.buffer||fa.enableVertexAttribArray(wb);Yb=hd||4;if(hb.type!==rc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Ua||hb.stride!==Jb)fa.bindBuffer(34962,Nb.buffer),fa.vertexAttribPointer(wb,
Yb,rc,ob,Jb,Ua),hb.type=rc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Ua,hb.stride=Jb;hb.divisor!==bb&&(L.vertexAttribDivisorANGLE(wb,bb),hb.divisor=bb)}else if(hb.buffer&&(fa.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)fa.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=B.call(this,aa,d,0);$b.offset=Pb;qb=!1;Ra=null;Ub=0;zb=!1;ib=ic=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;Ba($b)?(qb=!0,Ra=J.createStream(34962,$b),rb=Ra.dtype):(Ra=J.getBuffer($b))?
rb=Ra.dtype:"constant"in $b?(pb=2,"number"===typeof $b.constant?(fb=$b.constant,gb=La=Ka=0):(fb=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,La=2<$b.constant.length?$b.constant[2]:0,Ka=3<$b.constant.length?$b.constant[3]:0)):(Ra=Ba($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),rb="type"in $b?yd[$b.type]:Ra.dtype,zb=!!$b.normalized,ib=$b.size|0,ic=$b.offset|0,Ha=$b.stride|0,Ub=$b.divisor|0);kb=A.location;Va=m[kb];if(1===pb){Va.buffer||fa.enableVertexAttribArray(kb);
tb=ib||4;if(Va.type!==rb||Va.size!==tb||Va.buffer!==Ra||Va.normalized!==zb||Va.offset!==ic||Va.stride!==Ha)fa.bindBuffer(34962,Ra.buffer),fa.vertexAttribPointer(kb,tb,rb,zb,Ha,ic),Va.type=rb,Va.size=tb,Va.buffer=Ra,Va.normalized=zb,Va.offset=ic,Va.stride=Ha;Va.divisor!==Ub&&(L.vertexAttribDivisorANGLE(kb,Ub),Va.divisor=Ub)}else if(Va.buffer&&(fa.disableVertexAttribArray(kb),Va.buffer=null),Va.x!==fb||Va.y!==gb||Va.z!==La||Va.w!==Ka)fa.vertexAttrib4f(kb,fb,gb,La,Ka),Va.x=fb,Va.y=gb,Va.z=La,Va.w=Ka;
sb=ja.location;Oa=m[sb];Oa.buffer||fa.enableVertexAttribArray(sb);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==U||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(sb,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=U,Oa.normalized=!1,Oa.offset=0,Oa.stride=24;0!==Oa.divisor&&(L.vertexAttribDivisorANGLE(sb,0),Oa.divisor=0);tc=W.location;Qa=m[tc];Qa.buffer||fa.enableVertexAttribArray(tc);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==n||!1!==Qa.normalized||
8!==Qa.offset||24!==Qa.stride)fa.bindBuffer(34962,n.buffer),fa.vertexAttribPointer(tc,2,5126,!1,24,8),Qa.type=5126,Qa.size=2,Qa.buffer=n,Qa.normalized=!1,Qa.offset=8,Qa.stride=24;0!==Qa.divisor&&(L.vertexAttribDivisorANGLE(tc,0),Qa.divisor=0);Kb=a.location;Eb=m[Kb];Eb.buffer||fa.enableVertexAttribArray(Kb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==v||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)fa.bindBuffer(34962,v.buffer),fa.vertexAttribPointer(Kb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,
Eb.buffer=v,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(L.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Ma=y.call(this,aa,d,0);fa.uniform4f(qa.location,Ma[0],Ma[1],Ma[2],Ma[3]);fa.uniform1f(ea.location,d.lineWidth);fa.uniform1f(ta.location,d.capSize);zd=d.scale;fa.uniform2f(g.location,zd[0],zd[1]);Xa=d.scaleFract;fa.uniform2f(N.location,Xa[0],Xa[1]);Lb=d.translate;fa.uniform2f(M.location,Lb[0],Lb[1]);Mb=d.translateFract;fa.uniform2f(Ca.location,Mb[0],Mb[1]);fa.uniform1f(R.location,
d.opacity);(lb=la.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ja.currentVAO&&(lb=ra.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Na=la.offset;Zb=d.count;0<Zb?lb?L.drawElementsInstancedANGLE(4,36,lb.type,Na<<(lb.type-5121>>1),Zb):L.drawArraysInstancedANGLE(4,Na,36,Zb):0>Zb&&(lb?fa.drawElements(4,36,lb.type,Na<<(lb.type-5121>>1)):fa.drawArrays(4,Na,36));P.dirty=!0;Ja.setVAO(null);aa.viewportWidth=t;aa.viewportHeight=u;C&&(da.cpuTime+=performance.now()-F);S&&J.destroyStream(K);
xc&&J.destroyStream(Cb);db&&J.destroyStream(Nb);qb&&J.destroyStream(Ra)},scope:function(a,d,c){var g,r,m,l,I,q,E,b,t,x,e,A,sa,Ja,Da,O,Za,D,R,fa,ga,ma,M,C,F,L,V,va,N,xa,Fa,y,H,ca,Ca,K,ra,wa,G,B,W,ua,ea,Ea,qa,Hb,Y,ta,ja,Aa,td,za,Ia,Cc,Z,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,ha,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,
ad,Uc,ed,zc,id,Nd,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,$a,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld;g=a.viewport;r=g.x|0;m=g.y|0;l="width"in g?g.width|0:aa.framebufferWidth-r;I="height"in g?g.height|0:aa.framebufferHeight-m;q=aa.viewportWidth;aa.viewportWidth=l;E=aa.viewportHeight;aa.viewportHeight=I;b=mb[0];mb[0]=r;t=mb[1];mb[1]=m;x=mb[2];mb[2]=l;e=mb[3];mb[3]=I;A=na[0];na[0]=0;sa=na[1];na[1]=0;Ja=na[2];na[2]=0;Da=na[3];na[3]=0;O=ka.blend_enable;
ka.blend_enable=!0;Za=Ta[0];Ta[0]=32774;D=Ta[1];Ta[1]=32774;R=p[0];p[0]=770;fa=p[1];p[1]=771;ga=p[2];p[2]=773;ma=p[3];p[3]=1;M=ka.depth_enable;ka.depth_enable=!1;C=a.viewport;F=C.x|0;L=C.y|0;V="width"in C?C.width|0:aa.framebufferWidth-F;va="height"in C?C.height|0:aa.framebufferHeight-L;N=oa[0];oa[0]=F;xa=oa[1];oa[1]=L;Fa=oa[2];oa[2]=V;y=oa[3];oa[3]=va;H=ka.scissor_enable;ka.scissor_enable=!0;if(ca=P.profile)Ca=performance.now(),da.count++;K=la.count;la.count=36;ra=a.count;wa=la.instances;la.instances=
ra;G=la.primitive;la.primitive=4;B=a.capSize;W=ya[5];ya[5]=B;ua=a.lineWidth;ea=ya[4];ya[4]=ua;Ea=a.opacity;qa=ya[10];ya[10]=Ea;Hb=a.range;Y=ya[18];ya[18]=Hb;ta=a.scale;ja=ya[6];ya[6]=ta;Aa=a.scaleFract;td=ya[7];ya[7]=Aa;za=a.translate;Ia=ya[8];ya[8]=za;Cc=a.translateFract;Z=ya[9];ya[9]=Cc;Ib=ba.call(this,aa,a,c);Jb=ya[3];ya[3]=Ib;rc=w.buffer;w.buffer=v;Ob=w.divisor;w.divisor=0;jb=w.normalized;w.normalized=!1;Gb=w.offset;w.offset=16;Db=w.size;w.size=0;wb=w.state;w.state=1;hb=w.stride;w.stride=24;Yb=
w.type;w.type=5126;Pb=w.w;w.w=0;qb=w.x;w.x=0;Ra=w.y;w.y=0;Ub=w.z;w.z=0;zb=T.call(this,aa,a,c);$b.offset=zb;ic=!1;ib=null;pb=0;Ha=!1;Ka=rb=0;fb=1;gb=0;La=5126;sb=tb=Va=kb=0;Ba($b)?(ic=!0,ib=J.createStream(34962,$b),La=ib.dtype):(ib=J.getBuffer($b))?La=ib.dtype:"constant"in $b?(fb=2,"number"===typeof $b.constant?(Va=$b.constant,tb=sb=kb=0):(Va=0<$b.constant.length?$b.constant[0]:0,tb=1<$b.constant.length?$b.constant[1]:0,sb=2<$b.constant.length?$b.constant[2]:0,kb=3<$b.constant.length?$b.constant[3]:
0)):(ib=Ba($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),La="type"in $b?yd[$b.type]:ib.dtype,Ha=!!$b.normalized,Ka=$b.size|0,rb=$b.offset|0,gb=$b.stride|0,pb=$b.divisor|0);Oa=z.buffer;z.buffer=ib;tc=z.divisor;z.divisor=pb;Qa=z.normalized;z.normalized=Ha;Kb=z.offset;z.offset=rb;Eb=z.size;z.size=Ka;Ma=z.state;z.state=fb;zd=z.stride;z.stride=gb;Xa=z.type;z.type=La;Lb=z.w;z.w=kb;Mb=z.x;z.x=Va;lb=z.y;z.y=tb;Na=z.z;z.z=sb;Zb=Q.buffer;Q.buffer=U;Pa=Q.divisor;Q.divisor=0;ub=Q.normalized;
Q.normalized=!1;vb=Q.offset;Q.offset=0;Sa=Q.size;Q.size=0;nb=Q.state;Q.state=1;fc=Q.stride;Q.stride=24;Ac=Q.type;Q.type=5126;vc=Q.w;Q.w=0;cb=Q.x;Q.x=0;jc=Q.y;Q.y=0;qd=Q.z;Q.z=0;Wa=ia.call(this,aa,a,c);Ga.offset=Wa;Mc=!1;Ab=null;Ya=0;Vb=!1;Wb=uc=0;Qb=1;Kc=0;Rb=5126;Nc=sd=Fc=ha=0;Ba(Ga)?(Mc=!0,Ab=J.createStream(34962,Ga),Rb=Ab.dtype):(Ab=J.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Fc=Ga.constant,sd=Nc=ha=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,sd=1<Ga.constant.length?
Ga.constant[1]:0,Nc=2<Ga.constant.length?Ga.constant[2]:0,ha=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Ba(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Rb="type"in Ga?yd[Ga.type]:Ab.dtype,Vb=!!Ga.normalized,Wb=Ga.size|0,uc=Ga.offset|0,Kc=Ga.stride|0,Ya=Ga.divisor|0);Yc=k.buffer;k.buffer=Ab;ud=k.divisor;k.divisor=Ya;nc=k.normalized;k.normalized=Vb;wc=k.offset;k.offset=uc;gc=k.size;k.size=Wb;eb=k.state;k.state=Qb;sc=k.stride;k.stride=Kc;Tb=k.type;k.type=Rb;Xb=k.w;k.w=ha;cc=k.x;
k.x=Fc;hc=k.y;k.y=sd;yc=k.z;k.z=Nc;Bc=u.buffer;u.buffer=n;cd=u.divisor;u.divisor=0;Qc=u.normalized;u.normalized=!1;Rc=u.offset;u.offset=8;Sc=u.size;u.size=0;Zc=u.state;u.state=1;od=u.stride;u.stride=24;dd=u.type;u.type=5126;$c=u.w;u.w=0;kc=u.x;u.x=0;bc=u.y;u.y=0;ad=u.z;u.z=0;Uc=S.call(this,aa,a,c);ac.offset=Uc;ed=!1;zc=null;id=0;Nd=!1;ue=xd=0;jd=1;Ce=0;Od=5126;Jd=Pd=ce=ge=0;Ba(ac)?(ed=!0,zc=J.createStream(34962,ac),Od=zc.dtype):(zc=J.getBuffer(ac))?Od=zc.dtype:"constant"in ac?(jd=2,"number"===typeof ac.constant?
(ce=ac.constant,Pd=Jd=ge=0):(ce=0<ac.constant.length?ac.constant[0]:0,Pd=1<ac.constant.length?ac.constant[1]:0,Jd=2<ac.constant.length?ac.constant[2]:0,ge=3<ac.constant.length?ac.constant[3]:0)):(zc=Ba(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Od="type"in ac?yd[ac.type]:zc.dtype,Nd=!!ac.normalized,ue=ac.size|0,xd=ac.offset|0,Ce=ac.stride|0,id=ac.divisor|0);Hd=h.buffer;h.buffer=zc;md=h.divisor;h.divisor=id;Tc=h.normalized;h.normalized=Nd;vd=h.offset;h.offset=xd;rd=h.size;h.size=
ue;kd=h.state;h.state=jd;wd=h.stride;h.stride=Ce;Cd=h.type;h.type=Od;Fd=h.w;h.w=ge;je=h.x;h.x=ce;ye=h.y;h.y=Pd;$a=h.z;h.z=Jd;le=X.call(this,aa,a,c);Sb.offset=le;ke=!1;he=null;ve=0;de=!1;Oc=me=0;gd=1;we=0;qe=5126;Td=Sd=Qd=Kd=0;Ba(Sb)?(ke=!0,he=J.createStream(34962,Sb),qe=he.dtype):(he=J.getBuffer(Sb))?qe=he.dtype:"constant"in Sb?(gd=2,"number"===typeof Sb.constant?(Qd=Sb.constant,Sd=Td=Kd=0):(Qd=0<Sb.constant.length?Sb.constant[0]:0,Sd=1<Sb.constant.length?Sb.constant[1]:0,Td=2<Sb.constant.length?
Sb.constant[2]:0,Kd=3<Sb.constant.length?Sb.constant[3]:0)):(he=Ba(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),qe="type"in Sb?yd[Sb.type]:he.dtype,de=!!Sb.normalized,Oc=Sb.size|0,me=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);ne=f.buffer;f.buffer=he;Ge=f.divisor;f.divisor=ve;Be=f.normalized;f.normalized=de;se=f.offset;f.offset=me;Se=f.size;f.size=Oc;Te=f.state;f.state=gd;Oe=f.stride;f.stride=we;xe=f.type;f.type=qe;He=f.w;f.w=Kd;Je=f.x;f.x=Qd;Ke=f.y;f.y=Sd;Le=f.z;f.z=Td;Ie=pa.vert;
pa.vert=2;Ld=pa.frag;pa.frag=1;P.dirty=!0;d(aa,a,c);aa.viewportWidth=q;aa.viewportHeight=E;mb[0]=b;mb[1]=t;mb[2]=x;mb[3]=e;na[0]=A;na[1]=sa;na[2]=Ja;na[3]=Da;ka.blend_enable=O;Ta[0]=Za;Ta[1]=D;p[0]=R;p[1]=fa;p[2]=ga;p[3]=ma;ka.depth_enable=M;oa[0]=N;oa[1]=xa;oa[2]=Fa;oa[3]=y;ka.scissor_enable=H;ca&&(da.cpuTime+=performance.now()-Ca);la.count=K;la.instances=wa;la.primitive=G;ya[5]=W;ya[4]=ea;ya[10]=qa;ya[18]=Y;ya[6]=ja;ya[7]=td;ya[8]=Ia;ya[9]=Z;ya[3]=Jb;w.buffer=rc;w.divisor=Ob;w.normalized=jb;w.offset=
Gb;w.size=Db;w.state=wb;w.stride=hb;w.type=Yb;w.w=Pb;w.x=qb;w.y=Ra;w.z=Ub;ic&&J.destroyStream(ib);z.buffer=Oa;z.divisor=tc;z.normalized=Qa;z.offset=Kb;z.size=Eb;z.state=Ma;z.stride=zd;z.type=Xa;z.w=Lb;z.x=Mb;z.y=lb;z.z=Na;Q.buffer=Zb;Q.divisor=Pa;Q.normalized=ub;Q.offset=vb;Q.size=Sa;Q.state=nb;Q.stride=fc;Q.type=Ac;Q.w=vc;Q.x=cb;Q.y=jc;Q.z=qd;Mc&&J.destroyStream(Ab);k.buffer=Yc;k.divisor=ud;k.normalized=nc;k.offset=wc;k.size=gc;k.state=eb;k.stride=sc;k.type=Tb;k.w=Xb;k.x=cc;k.y=hc;k.z=yc;u.buffer=
Bc;u.divisor=cd;u.normalized=Qc;u.offset=Rc;u.size=Sc;u.state=Zc;u.stride=od;u.type=dd;u.w=$c;u.x=kc;u.y=bc;u.z=ad;ed&&J.destroyStream(zc);h.buffer=Hd;h.divisor=md;h.normalized=Tc;h.offset=vd;h.size=rd;h.state=kd;h.stride=wd;h.type=Cd;h.w=Fd;h.x=je;h.y=ye;h.z=$a;ke&&J.destroyStream(he);f.buffer=ne;f.divisor=Ge;f.normalized=Be;f.offset=se;f.size=Se;f.state=Te;f.stride=Oe;f.type=xe;f.w=He;f.x=Je;f.y=Ke;f.z=Le;pa.vert=Ie;pa.frag=Ld;P.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(b,
da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja){var Cc,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,td,Hb,ga,I,sa,Da,oa,xa,Fa,ma,V;Cc=b.attributes;W=b.buffer;ea=b.context;R=b.current;O=b.draw;D=b.elements;g=b.extensions;N=b.framebuffer;M=b.gl;Ca=b.isBufferArgs;qa=b.next;m=b.shader;J=b.uniforms;aa=b.vao;P=qa.blend_color;la=R.blend_color;ra=qa.blend_equation;Aa=R.blend_equation;wa=qa.blend_func;fa=R.blend_func;Ba=qa.colorMask;ka=R.colorMask;
pa=qa.depth_range;ya=R.depth_range;Ja=qa.polygonOffset_offset;na=R.polygonOffset_offset;Za=qa.sample_coverage;Ta=R.sample_coverage;r=qa.scissor_box;p=R.scissor_box;E=qa.stencil_func;va=R.stencil_func;Ea=qa.stencil_opBack;td=R.stencil_opBack;Hb=qa.stencil_opFront;ga=R.stencil_opFront;I=qa.viewport;sa=R.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};oa={divisor:1,offset:8,stride:8};xa={divisor:1,offset:8,stride:8};Fa={divisor:1,offset:16,stride:8};
ma={divisor:1,offset:16,stride:8};V={divisor:1,offset:0,stride:4};return{batch:function(c,r){var m,I,q,b,J,w;m=N.next;m!==N.cur&&(m?M.bindFramebuffer(36160,m.framebuffer):M.bindFramebuffer(36160,null),N.cur=m);if(R.dirty){var P,L,v,n,y,H,K,ra,wa,G,B,U,ba,Z,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc;P=qa.dither;P!==R.dither&&(P?M.enable(3024):M.disable(3024),R.dither=P);L=qa.depth_func;L!==R.depth_func&&(M.depthFunc(L),R.depth_func=L);v=pa[0];n=pa[1];if(v!==ya[0]||n!==ya[1])M.depthRange(v,
n),ya[0]=v,ya[1]=n;y=qa.depth_mask;y!==R.depth_mask&&(M.depthMask(y),R.depth_mask=y);H=Ba[0];K=Ba[1];ra=Ba[2];wa=Ba[3];if(H!==ka[0]||K!==ka[1]||ra!==ka[2]||wa!==ka[3])M.colorMask(H,K,ra,wa),ka[0]=H,ka[1]=K,ka[2]=ra,ka[3]=wa;G=qa.cull_enable;G!==R.cull_enable&&(G?M.enable(2884):M.disable(2884),R.cull_enable=G);B=qa.cull_face;B!==R.cull_face&&(M.cullFace(B),R.cull_face=B);U=qa.frontFace;U!==R.frontFace&&(M.frontFace(U),R.frontFace=U);ba=qa.lineWidth;ba!==R.lineWidth&&(M.lineWidth(ba),R.lineWidth=ba);
Z=qa.polygonOffset_enable;Z!==R.polygonOffset_enable&&(Z?M.enable(32823):M.disable(32823),R.polygonOffset_enable=Z);Md=Ja[0];Ye=Ja[1];if(Md!==na[0]||Ye!==na[1])M.polygonOffset(Md,Ye),na[0]=Md,na[1]=Ye;$e=qa.sample_alpha;$e!==R.sample_alpha&&($e?M.enable(32926):M.disable(32926),R.sample_alpha=$e);Re=qa.sample_enable;Re!==R.sample_enable&&(Re?M.enable(32928):M.disable(32928),R.sample_enable=Re);Gd=Za[0];Ae=Za[1];if(Gd!==Ta[0]||Ae!==Ta[1])M.sampleCoverage(Gd,Ae),Ta[0]=Gd,Ta[1]=Ae;te=qa.stencil_mask;
te!==R.stencil_mask&&(M.stencilMask(te),R.stencil_mask=te);Zd=E[0];Bd=E[1];$d=E[2];if(Zd!==va[0]||Bd!==va[1]||$d!==va[2])M.stencilFunc(Zd,Bd,$d),va[0]=Zd,va[1]=Bd,va[2]=$d;ld=Hb[0];bd=Hb[1];pd=Hb[2];Lc=Hb[3];if(ld!==ga[0]||bd!==ga[1]||pd!==ga[2]||Lc!==ga[3])M.stencilOpSeparate(ld,bd,pd,Lc),ga[0]=ld,ga[1]=bd,ga[2]=pd,ga[3]=Lc;nd=Ea[0];Gc=Ea[1];fd=Ea[2];Pc=Ea[3];if(nd!==td[0]||Gc!==td[1]||fd!==td[2]||Pc!==td[3])M.stencilOpSeparate(nd,Gc,fd,Pc),td[0]=nd,td[1]=Gc,td[2]=fd,td[3]=Pc}M.blendColor(0,0,0,
0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;M.enable(3042);R.blend_enable=!0;M.blendEquationSeparate(32774,32774);Aa[0]=32774;Aa[1]=32774;M.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;M.enable(3089);R.scissor_enable=!0;M.disable(2960);R.stencil_enable=!1;if(I=R.profile)q=performance.now(),da.count+=r;M.useProgram(T.program);b=g.angle_instanced_arrays;var Wc,Bb,Fb,Dc,xb;aa.setVAO(null);Wc=Y.location;Bb=Cc[Wc];Bb.buffer||M.enableVertexAttribArray(Wc);if(5126!==Bb.type||1!==Bb.size||
Bb.buffer!==e||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)M.bindBuffer(34962,e.buffer),M.vertexAttribPointer(Wc,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=e,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(b.vertexAttribDivisorANGLE(Wc,0),Bb.divisor=0);Fb=C.location;Dc=Cc[Fb];Dc.buffer||M.enableVertexAttribArray(Fb);if(5126!==Dc.type||1!==Dc.size||Dc.buffer!==l||!1!==Dc.normalized||4!==Dc.offset||8!==Dc.stride)M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(Fb,1,5126,!1,8,4),
Dc.type=5126,Dc.size=1,Dc.buffer=l,Dc.normalized=!1,Dc.offset=4,Dc.stride=8;0!==Dc.divisor&&(b.vertexAttribDivisorANGLE(Fb,0),Dc.divisor=0);(xb=O.elements)?M.bindBuffer(34963,xb.buffer.buffer):aa.currentVAO&&(xb=D.getElements(aa.currentVAO.elements))&&M.bindBuffer(34963,xb.buffer.buffer);for(J=0;J<r;++J){w=c[J];var xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,ha,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd;xc=w.viewport;Cb=xc.x|0;Jc=xc.y|0;lc="width"in xc?xc.width|0:ea.framebufferWidth-Cb;Hc="height"in xc?xc.height|0:ea.framebufferHeight-Jc;Xc=ea.viewportWidth;ea.viewportWidth=lc;Vc=ea.viewportHeight;ea.viewportHeight=Hc;M.viewport(Cb,Jc,lc,Hc);sa[0]=Cb;sa[1]=Jc;sa[2]=lc;sa[3]=Hc;(Ec=z.call(this,
ea,w,J))?M.enable(2929):M.disable(2929);R.depth_enable=Ec;dc=w.viewport;Ic=dc.x|0;oc=dc.y|0;pc="width"in dc?dc.width|0:ea.framebufferWidth-Ic;mc="height"in dc?dc.height|0:ea.framebufferHeight-oc;M.scissor(Ic,oc,pc,mc);p[0]=Ic;p[1]=oc;p[2]=pc;p[3]=mc;oa.buffer=w.positionBuffer;ec=!1;ab=null;qc=0;yb=!1;Nb=db=0;bb=1;ob=0;Ua=5126;rc=Jb=Ib=hd=0;Ca(oa)?(ec=!0,ab=W.createStream(34962,oa),Ua=ab.dtype):(ab=W.getBuffer(oa))?Ua=ab.dtype:"constant"in oa?(bb=2,"number"===typeof oa.constant?(Ib=oa.constant,Jb=
rc=hd=0):(Ib=0<oa.constant.length?oa.constant[0]:0,Jb=1<oa.constant.length?oa.constant[1]:0,rc=2<oa.constant.length?oa.constant[2]:0,hd=3<oa.constant.length?oa.constant[3]:0)):(ab=Ca(oa.buffer)?W.createStream(34962,oa.buffer):W.getBuffer(oa.buffer),Ua="type"in oa?Da[oa.type]:ab.dtype,yb=!!oa.normalized,Nb=oa.size|0,db=oa.offset|0,ob=oa.stride|0,qc=oa.divisor|0);Ob=ia.location;jb=Cc[Ob];if(1===bb){jb.buffer||M.enableVertexAttribArray(Ob);Gb=Nb||2;if(jb.type!==Ua||jb.size!==Gb||jb.buffer!==ab||jb.normalized!==
yb||jb.offset!==db||jb.stride!==ob)M.bindBuffer(34962,ab.buffer),M.vertexAttribPointer(Ob,Gb,Ua,yb,ob,db),jb.type=Ua,jb.size=Gb,jb.buffer=ab,jb.normalized=yb,jb.offset=db,jb.stride=ob;jb.divisor!==qc&&(b.vertexAttribDivisorANGLE(Ob,qc),jb.divisor=qc)}else if(jb.buffer&&(M.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==rc||jb.w!==hd)M.vertexAttrib4f(Ob,Ib,Jb,rc,hd),jb.x=Ib,jb.y=Jb,jb.z=rc,jb.w=hd;Fa.buffer=w.positionBuffer;Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;
Ha=pb=ib=ic=0;Ca(Fa)?(Db=!0,wb=W.createStream(34962,Fa),zb=wb.dtype):(wb=W.getBuffer(Fa))?zb=wb.dtype:"constant"in Fa?(Ra=2,"number"===typeof Fa.constant?(ib=Fa.constant,pb=Ha=ic=0):(ib=0<Fa.constant.length?Fa.constant[0]:0,pb=1<Fa.constant.length?Fa.constant[1]:0,Ha=2<Fa.constant.length?Fa.constant[2]:0,ic=3<Fa.constant.length?Fa.constant[3]:0)):(wb=Ca(Fa.buffer)?W.createStream(34962,Fa.buffer):W.getBuffer(Fa.buffer),zb="type"in Fa?Da[Fa.type]:wb.dtype,Yb=!!Fa.normalized,qb=Fa.size|0,Pb=Fa.offset|
0,Ub=Fa.stride|0,hb=Fa.divisor|0);rb=u.location;Ka=Cc[rb];if(1===Ra){Ka.buffer||M.enableVertexAttribArray(rb);fb=qb||2;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)M.bindBuffer(34962,wb.buffer),M.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(b.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(M.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==
ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==ic)M.vertexAttrib4f(rb,ib,pb,Ha,ic),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=ic;xa.buffer=w.positionFractBuffer;gb=!1;La=null;kb=0;Va=!1;sb=tb=0;Oa=1;tc=0;Qa=5126;zd=Ma=Eb=Kb=0;Ca(xa)?(gb=!0,La=W.createStream(34962,xa),Qa=La.dtype):(La=W.getBuffer(xa))?Qa=La.dtype:"constant"in xa?(Oa=2,"number"===typeof xa.constant?(Eb=xa.constant,Ma=zd=Kb=0):(Eb=0<xa.constant.length?xa.constant[0]:0,Ma=1<xa.constant.length?xa.constant[1]:0,zd=2<xa.constant.length?xa.constant[2]:0,Kb=3<xa.constant.length?
xa.constant[3]:0)):(La=Ca(xa.buffer)?W.createStream(34962,xa.buffer):W.getBuffer(xa.buffer),Qa="type"in xa?Da[xa.type]:La.dtype,Va=!!xa.normalized,sb=xa.size|0,tb=xa.offset|0,tc=xa.stride|0,kb=xa.divisor|0);Xa=k.location;Lb=Cc[Xa];if(1===Oa){Lb.buffer||M.enableVertexAttribArray(Xa);Mb=sb||2;if(Lb.type!==Qa||Lb.size!==Mb||Lb.buffer!==La||Lb.normalized!==Va||Lb.offset!==tb||Lb.stride!==tc)M.bindBuffer(34962,La.buffer),M.vertexAttribPointer(Xa,Mb,Qa,Va,tc,tb),Lb.type=Qa,Lb.size=Mb,Lb.buffer=La,Lb.normalized=
Va,Lb.offset=tb,Lb.stride=tc;Lb.divisor!==kb&&(b.vertexAttribDivisorANGLE(Xa,kb),Lb.divisor=kb)}else if(Lb.buffer&&(M.disableVertexAttribArray(Xa),Lb.buffer=null),Lb.x!==Eb||Lb.y!==Ma||Lb.z!==zd||Lb.w!==Kb)M.vertexAttrib4f(Xa,Eb,Ma,zd,Kb),Lb.x=Eb,Lb.y=Ma,Lb.z=zd,Lb.w=Kb;ma.buffer=w.positionFractBuffer;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;fc=5126;jc=cb=vc=Ac=0;Ca(ma)?(lb=!0,Na=W.createStream(34962,ma),fc=Na.dtype):(Na=W.getBuffer(ma))?fc=Na.dtype:"constant"in ma?(Sa=2,"number"===typeof ma.constant?
(vc=ma.constant,cb=jc=Ac=0):(vc=0<ma.constant.length?ma.constant[0]:0,cb=1<ma.constant.length?ma.constant[1]:0,jc=2<ma.constant.length?ma.constant[2]:0,Ac=3<ma.constant.length?ma.constant[3]:0)):(Na=Ca(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),fc="type"in ma?Da[ma.type]:Na.dtype,Pa=!!ma.normalized,vb=ma.size|0,ub=ma.offset|0,nb=ma.stride|0,Zb=ma.divisor|0);ha=S.location;Wa=Cc[ha];if(1===Sa){Wa.buffer||M.enableVertexAttribArray(ha);Mc=vb||2;if(Wa.type!==fc||Wa.size!==Mc||Wa.buffer!==
Na||Wa.normalized!==Pa||Wa.offset!==ub||Wa.stride!==nb)M.bindBuffer(34962,Na.buffer),M.vertexAttribPointer(ha,Mc,fc,Pa,nb,ub),Wa.type=fc,Wa.size=Mc,Wa.buffer=Na,Wa.normalized=Pa,Wa.offset=ub,Wa.stride=nb;Wa.divisor!==Zb&&(b.vertexAttribDivisorANGLE(ha,Zb),Wa.divisor=Zb)}else if(Wa.buffer&&(M.disableVertexAttribArray(ha),Wa.buffer=null),Wa.x!==vc||Wa.y!==cb||Wa.z!==jc||Wa.w!==Ac)M.vertexAttrib4f(ha,vc,cb,jc,Ac),Wa.x=vc,Wa.y=cb,Wa.z=jc,Wa.w=Ac;V.buffer=w.colorBuffer;Ab=!1;Ya=null;Vb=0;uc=!1;Qb=Wb=0;
Kc=1;Rb=0;pe=5126;Yc=Nc=sd=Fc=0;Ca(V)?(Ab=!0,Ya=W.createStream(34962,V),pe=Ya.dtype):(Ya=W.getBuffer(V))?pe=Ya.dtype:"constant"in V?(Kc=2,"number"===typeof V.constant?(sd=V.constant,Nc=Yc=Fc=0):(sd=0<V.constant.length?V.constant[0]:0,Nc=1<V.constant.length?V.constant[1]:0,Yc=2<V.constant.length?V.constant[2]:0,Fc=3<V.constant.length?V.constant[3]:0)):(Ya=Ca(V.buffer)?W.createStream(34962,V.buffer):W.getBuffer(V.buffer),pe="type"in V?Da[V.type]:Ya.dtype,uc=!!V.normalized,Qb=V.size|0,Wb=V.offset|0,
Rb=V.stride|0,Vb=V.divisor|0);ud=h.location;nc=Cc[ud];if(1===Kc){nc.buffer||M.enableVertexAttribArray(ud);wc=Qb||4;if(nc.type!==pe||nc.size!==wc||nc.buffer!==Ya||nc.normalized!==uc||nc.offset!==Wb||nc.stride!==Rb)M.bindBuffer(34962,Ya.buffer),M.vertexAttribPointer(ud,wc,pe,uc,Rb,Wb),nc.type=pe,nc.size=wc,nc.buffer=Ya,nc.normalized=uc,nc.offset=Wb,nc.stride=Rb;nc.divisor!==Vb&&(b.vertexAttribDivisorANGLE(ud,Vb),nc.divisor=Vb)}else if(nc.buffer&&(M.disableVertexAttribArray(ud),nc.buffer=null),nc.x!==
sd||nc.y!==Nc||nc.z!==Yc||nc.w!==Fc)M.vertexAttrib4f(ud,sd,Nc,Yc,Fc),nc.x=sd,nc.y=Nc,nc.z=Yc,nc.w=Fc;gc=w.scale;eb=gc[0];Tb=gc[1];J&&sc===eb&&Xb===Tb||(sc=eb,Xb=Tb,M.uniform2f(d.location,eb,Tb));cc=w.scaleFract;hc=cc[0];Bc=cc[1];J&&yc===hc&&cd===Bc||(yc=hc,cd=Bc,M.uniform2f(t.location,hc,Bc));Qc=w.translate;Rc=Qc[0];Zc=Qc[1];J&&Sc===Rc&&od===Zc||(Sc=Rc,od=Zc,M.uniform2f(ta.location,Rc,Zc));dd=w.translateFract;$c=dd[0];bc=dd[1];J&&kc===$c&&ad===bc||(kc=$c,ad=bc,M.uniform2f(A.location,$c,bc));Uc=w.thickness;
J&&ed===Uc||(ed=Uc,M.uniform1f(a.location,Uc));zc=w.depth;J&&id===zc||(id=zc,M.uniform1f(x.location,zc));Nd=Q.call(this,ea,w,J);xd=Nd[0];jd=Nd[1];Od=Nd[2];ce=Nd[3];J&&ue===xd&&Ce===jd&&ge===Od&&Pd===ce||(ue=xd,Ce=jd,ge=Od,Pd=ce,M.uniform4f(ja.location,xd,jd,Od,ce));Jd=w.dashLength;J&&Hd===Jd||(Hd=Jd,M.uniform1f(X.location,Jd));md=w.opacity;J&&Tc===md||(Tc=md,M.uniform1f(F.location,md));(vd=w.dashTexture)&&"framebuffer"===vd._reglType&&(vd=vd.color[0]);rd=vd._texture;M.uniform1i(f.location,rd.bind());
kd=w.count;0<kd?xb?b.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),kd):b.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(xb?M.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):M.drawArrays(5,0,4));ea.viewportWidth=Xc;ea.viewportHeight=Vc;ec&&W.destroyStream(ab);Db&&W.destroyStream(wb);gb&&W.destroyStream(La);lb&&W.destroyStream(Na);Ab&&W.destroyStream(Ya);rd.unbind()}R.dirty=!0;aa.setVAO(null);I&&(da.cpuTime+=performance.now()-q)},draw:function(c){var r,m,I,b,J,w,P,v,z,n,y,H,ra,wa,Q,G,B,T,U,
ba,Z,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,ha,Xa,Lb,Mb,lb,Na,Zb,Pa,ub;r=N.next;r!==N.cur&&(r?M.bindFramebuffer(36160,r.framebuffer):M.bindFramebuffer(36160,null),N.cur=r);if(R.dirty){var vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb;vb=qa.dither;vb!==
R.dither&&(vb?M.enable(3024):M.disable(3024),R.dither=vb);Sa=qa.depth_func;Sa!==R.depth_func&&(M.depthFunc(Sa),R.depth_func=Sa);nb=pa[0];fc=pa[1];if(nb!==ya[0]||fc!==ya[1])M.depthRange(nb,fc),ya[0]=nb,ya[1]=fc;Ac=qa.depth_mask;Ac!==R.depth_mask&&(M.depthMask(Ac),R.depth_mask=Ac);vc=Ba[0];cb=Ba[1];jc=Ba[2];qd=Ba[3];if(vc!==ka[0]||cb!==ka[1]||jc!==ka[2]||qd!==ka[3])M.colorMask(vc,cb,jc,qd),ka[0]=vc,ka[1]=cb,ka[2]=jc,ka[3]=qd;Wa=qa.cull_enable;Wa!==R.cull_enable&&(Wa?M.enable(2884):M.disable(2884),R.cull_enable=
Wa);Mc=qa.cull_face;Mc!==R.cull_face&&(M.cullFace(Mc),R.cull_face=Mc);Ab=qa.frontFace;Ab!==R.frontFace&&(M.frontFace(Ab),R.frontFace=Ab);Ya=qa.lineWidth;Ya!==R.lineWidth&&(M.lineWidth(Ya),R.lineWidth=Ya);Vb=qa.polygonOffset_enable;Vb!==R.polygonOffset_enable&&(Vb?M.enable(32823):M.disable(32823),R.polygonOffset_enable=Vb);uc=Ja[0];Wb=Ja[1];if(uc!==na[0]||Wb!==na[1])M.polygonOffset(uc,Wb),na[0]=uc,na[1]=Wb;Qb=qa.sample_alpha;Qb!==R.sample_alpha&&(Qb?M.enable(32926):M.disable(32926),R.sample_alpha=
Qb);Kc=qa.sample_enable;Kc!==R.sample_enable&&(Kc?M.enable(32928):M.disable(32928),R.sample_enable=Kc);Rb=Za[0];pe=Za[1];if(Rb!==Ta[0]||pe!==Ta[1])M.sampleCoverage(Rb,pe),Ta[0]=Rb,Ta[1]=pe;Fc=qa.stencil_mask;Fc!==R.stencil_mask&&(M.stencilMask(Fc),R.stencil_mask=Fc);sd=E[0];Nc=E[1];Yc=E[2];if(sd!==va[0]||Nc!==va[1]||Yc!==va[2])M.stencilFunc(sd,Nc,Yc),va[0]=sd,va[1]=Nc,va[2]=Yc;ud=Hb[0];nc=Hb[1];wc=Hb[2];gc=Hb[3];if(ud!==ga[0]||nc!==ga[1]||wc!==ga[2]||gc!==ga[3])M.stencilOpSeparate(ud,nc,wc,gc),ga[0]=
ud,ga[1]=nc,ga[2]=wc,ga[3]=gc;eb=Ea[0];sc=Ea[1];Tb=Ea[2];Xb=Ea[3];if(eb!==td[0]||sc!==td[1]||Tb!==td[2]||Xb!==td[3])M.stencilOpSeparate(eb,sc,Tb,Xb),td[0]=eb,td[1]=sc,td[2]=Tb,td[3]=Xb}m=c.viewport;I=m.x|0;b=m.y|0;J="width"in m?m.width|0:ea.framebufferWidth-I;w="height"in m?m.height|0:ea.framebufferHeight-b;P=ea.viewportWidth;ea.viewportWidth=J;v=ea.viewportHeight;ea.viewportHeight=w;M.viewport(I,b,J,w);sa[0]=I;sa[1]=b;sa[2]=J;sa[3]=w;M.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;M.enable(3042);
R.blend_enable=!0;M.blendEquationSeparate(32774,32774);Aa[0]=32774;Aa[1]=32774;M.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(z=K.call(this,ea,c,0))?M.enable(2929):M.disable(2929);R.depth_enable=z;n=c.viewport;y=n.x|0;H=n.y|0;ra="width"in n?n.width|0:ea.framebufferWidth-y;wa="height"in n?n.height|0:ea.framebufferHeight-H;M.scissor(y,H,ra,wa);p[0]=y;p[1]=H;p[2]=ra;p[3]=wa;M.enable(3089);R.scissor_enable=!0;M.disable(2960);R.stencil_enable=!1;if(Q=R.profile)G=performance.now(),
da.count++;M.useProgram(L.program);B=g.angle_instanced_arrays;aa.setVAO(null);oa.buffer=c.positionBuffer;T=!1;U=null;ba=0;Z=!1;Ye=Md=0;$e=1;Re=0;Gd=5126;Bd=Zd=te=Ae=0;Ca(oa)?(T=!0,U=W.createStream(34962,oa),Gd=U.dtype):(U=W.getBuffer(oa))?Gd=U.dtype:"constant"in oa?($e=2,"number"===typeof oa.constant?(te=oa.constant,Zd=Bd=Ae=0):(te=0<oa.constant.length?oa.constant[0]:0,Zd=1<oa.constant.length?oa.constant[1]:0,Bd=2<oa.constant.length?oa.constant[2]:0,Ae=3<oa.constant.length?oa.constant[3]:0)):(U=Ca(oa.buffer)?
W.createStream(34962,oa.buffer):W.getBuffer(oa.buffer),Gd="type"in oa?Da[oa.type]:U.dtype,Z=!!oa.normalized,Ye=oa.size|0,Md=oa.offset|0,Re=oa.stride|0,ba=oa.divisor|0);$d=ia.location;ld=Cc[$d];if(1===$e){ld.buffer||M.enableVertexAttribArray($d);bd=Ye||2;if(ld.type!==Gd||ld.size!==bd||ld.buffer!==U||ld.normalized!==Z||ld.offset!==Md||ld.stride!==Re)M.bindBuffer(34962,U.buffer),M.vertexAttribPointer($d,bd,Gd,Z,Re,Md),ld.type=Gd,ld.size=bd,ld.buffer=U,ld.normalized=Z,ld.offset=Md,ld.stride=Re;ld.divisor!==
ba&&(B.vertexAttribDivisorANGLE($d,ba),ld.divisor=ba)}else if(ld.buffer&&(M.disableVertexAttribArray($d),ld.buffer=null),ld.x!==te||ld.y!==Zd||ld.z!==Bd||ld.w!==Ae)M.vertexAttrib4f($d,te,Zd,Bd,Ae),ld.x=te,ld.y=Zd,ld.z=Bd,ld.w=Ae;Fa.buffer=c.positionBuffer;pd=!1;Lc=null;nd=0;Gc=!1;Pc=fd=0;Wc=1;Bb=0;Fb=5126;Cb=xc=xb=Dc=0;Ca(Fa)?(pd=!0,Lc=W.createStream(34962,Fa),Fb=Lc.dtype):(Lc=W.getBuffer(Fa))?Fb=Lc.dtype:"constant"in Fa?(Wc=2,"number"===typeof Fa.constant?(xb=Fa.constant,xc=Cb=Dc=0):(xb=0<Fa.constant.length?
Fa.constant[0]:0,xc=1<Fa.constant.length?Fa.constant[1]:0,Cb=2<Fa.constant.length?Fa.constant[2]:0,Dc=3<Fa.constant.length?Fa.constant[3]:0)):(Lc=Ca(Fa.buffer)?W.createStream(34962,Fa.buffer):W.getBuffer(Fa.buffer),Fb="type"in Fa?Da[Fa.type]:Lc.dtype,Gc=!!Fa.normalized,Pc=Fa.size|0,fd=Fa.offset|0,Bb=Fa.stride|0,nd=Fa.divisor|0);Jc=u.location;lc=Cc[Jc];if(1===Wc){lc.buffer||M.enableVertexAttribArray(Jc);Hc=Pc||2;if(lc.type!==Fb||lc.size!==Hc||lc.buffer!==Lc||lc.normalized!==Gc||lc.offset!==fd||lc.stride!==
Bb)M.bindBuffer(34962,Lc.buffer),M.vertexAttribPointer(Jc,Hc,Fb,Gc,Bb,fd),lc.type=Fb,lc.size=Hc,lc.buffer=Lc,lc.normalized=Gc,lc.offset=fd,lc.stride=Bb;lc.divisor!==nd&&(B.vertexAttribDivisorANGLE(Jc,nd),lc.divisor=nd)}else if(lc.buffer&&(M.disableVertexAttribArray(Jc),lc.buffer=null),lc.x!==xb||lc.y!==xc||lc.z!==Cb||lc.w!==Dc)M.vertexAttrib4f(Jc,xb,xc,Cb,Dc),lc.x=xb,lc.y=xc,lc.z=Cb,lc.w=Dc;xa.buffer=c.positionFractBuffer;Xc=!1;Vc=null;Ec=0;dc=!1;oc=Ic=0;pc=1;mc=0;ec=5126;db=yb=qc=ab=0;Ca(xa)?(Xc=
!0,Vc=W.createStream(34962,xa),ec=Vc.dtype):(Vc=W.getBuffer(xa))?ec=Vc.dtype:"constant"in xa?(pc=2,"number"===typeof xa.constant?(qc=xa.constant,yb=db=ab=0):(qc=0<xa.constant.length?xa.constant[0]:0,yb=1<xa.constant.length?xa.constant[1]:0,db=2<xa.constant.length?xa.constant[2]:0,ab=3<xa.constant.length?xa.constant[3]:0)):(Vc=Ca(xa.buffer)?W.createStream(34962,xa.buffer):W.getBuffer(xa.buffer),ec="type"in xa?Da[xa.type]:Vc.dtype,dc=!!xa.normalized,oc=xa.size|0,Ic=xa.offset|0,mc=xa.stride|0,Ec=xa.divisor|
0);Nb=k.location;bb=Cc[Nb];if(1===pc){bb.buffer||M.enableVertexAttribArray(Nb);ob=oc||2;if(bb.type!==ec||bb.size!==ob||bb.buffer!==Vc||bb.normalized!==dc||bb.offset!==Ic||bb.stride!==mc)M.bindBuffer(34962,Vc.buffer),M.vertexAttribPointer(Nb,ob,ec,dc,mc,Ic),bb.type=ec,bb.size=ob,bb.buffer=Vc,bb.normalized=dc,bb.offset=Ic,bb.stride=mc;bb.divisor!==Ec&&(B.vertexAttribDivisorANGLE(Nb,Ec),bb.divisor=Ec)}else if(bb.buffer&&(M.disableVertexAttribArray(Nb),bb.buffer=null),bb.x!==qc||bb.y!==yb||bb.z!==db||
bb.w!==ab)M.vertexAttrib4f(Nb,qc,yb,db,ab),bb.x=qc,bb.y=yb,bb.z=db,bb.w=ab;ma.buffer=c.positionFractBuffer;Ua=!1;hd=null;Ib=0;Jb=!1;Ob=rc=0;jb=1;Gb=0;Db=5126;Pb=Yb=hb=wb=0;Ca(ma)?(Ua=!0,hd=W.createStream(34962,ma),Db=hd.dtype):(hd=W.getBuffer(ma))?Db=hd.dtype:"constant"in ma?(jb=2,"number"===typeof ma.constant?(hb=ma.constant,Yb=Pb=wb=0):(hb=0<ma.constant.length?ma.constant[0]:0,Yb=1<ma.constant.length?ma.constant[1]:0,Pb=2<ma.constant.length?ma.constant[2]:0,wb=3<ma.constant.length?ma.constant[3]:
0)):(hd=Ca(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),Db="type"in ma?Da[ma.type]:hd.dtype,Jb=!!ma.normalized,Ob=ma.size|0,rc=ma.offset|0,Gb=ma.stride|0,Ib=ma.divisor|0);qb=S.location;Ra=Cc[qb];if(1===jb){Ra.buffer||M.enableVertexAttribArray(qb);Ub=Ob||2;if(Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==hd||Ra.normalized!==Jb||Ra.offset!==rc||Ra.stride!==Gb)M.bindBuffer(34962,hd.buffer),M.vertexAttribPointer(qb,Ub,Db,Jb,Gb,rc),Ra.type=Db,Ra.size=Ub,Ra.buffer=hd,Ra.normalized=Jb,Ra.offset=
rc,Ra.stride=Gb;Ra.divisor!==Ib&&(B.vertexAttribDivisorANGLE(qb,Ib),Ra.divisor=Ib)}else if(Ra.buffer&&(M.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Yb||Ra.z!==Pb||Ra.w!==wb)M.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ra.x=hb,Ra.y=Yb,Ra.z=Pb,Ra.w=wb;V.buffer=c.colorBuffer;zb=!1;ic=null;ib=0;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Va=kb=La=0;Ca(V)?(zb=!0,ic=W.createStream(34962,V),gb=ic.dtype):(ic=W.getBuffer(V))?gb=ic.dtype:"constant"in V?(Ka=2,"number"===typeof V.constant?(kb=V.constant,Va=tb=
La=0):(kb=0<V.constant.length?V.constant[0]:0,Va=1<V.constant.length?V.constant[1]:0,tb=2<V.constant.length?V.constant[2]:0,La=3<V.constant.length?V.constant[3]:0)):(ic=Ca(V.buffer)?W.createStream(34962,V.buffer):W.getBuffer(V.buffer),gb="type"in V?Da[V.type]:ic.dtype,pb=!!V.normalized,rb=V.size|0,Ha=V.offset|0,fb=V.stride|0,ib=V.divisor|0);sb=h.location;Oa=Cc[sb];if(1===Ka){Oa.buffer||M.enableVertexAttribArray(sb);tc=rb||4;if(Oa.type!==gb||Oa.size!==tc||Oa.buffer!==ic||Oa.normalized!==pb||Oa.offset!==
Ha||Oa.stride!==fb)M.bindBuffer(34962,ic.buffer),M.vertexAttribPointer(sb,tc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=tc,Oa.buffer=ic,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb;Oa.divisor!==ib&&(B.vertexAttribDivisorANGLE(sb,ib),Oa.divisor=ib)}else if(Oa.buffer&&(M.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Va||Oa.z!==tb||Oa.w!==La)M.vertexAttrib4f(sb,kb,Va,tb,La),Oa.x=kb,Oa.y=Va,Oa.z=tb,Oa.w=La;Qa=Y.location;Kb=Cc[Qa];Kb.buffer||M.enableVertexAttribArray(Qa);if(5126!==Kb.type||1!==Kb.size||
Kb.buffer!==e||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)M.bindBuffer(34962,e.buffer),M.vertexAttribPointer(Qa,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=e,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(B.vertexAttribDivisorANGLE(Qa,0),Kb.divisor=0);Eb=C.location;Ma=Cc[Eb];Ma.buffer||M.enableVertexAttribArray(Eb);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==l||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(Eb,1,5126,!1,8,4),
Ma.type=5126,Ma.size=1,Ma.buffer=l,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(B.vertexAttribDivisorANGLE(Eb,0),Ma.divisor=0);ha=c.scale;M.uniform2f(d.location,ha[0],ha[1]);Xa=c.scaleFract;M.uniform2f(t.location,Xa[0],Xa[1]);Lb=c.translate;M.uniform2f(ta.location,Lb[0],Lb[1]);Mb=c.translateFract;M.uniform2f(A.location,Mb[0],Mb[1]);M.uniform1f(a.location,c.thickness);M.uniform1f(x.location,c.depth);lb=q.call(this,ea,c,0);M.uniform4f(ja.location,lb[0],lb[1],lb[2],lb[3]);M.uniform1f(X.location,
c.dashLength);M.uniform1f(F.location,c.opacity);(Na=c.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);Zb=Na._texture;M.uniform1i(f.location,Zb.bind());(Pa=O.elements)?M.bindBuffer(34963,Pa.buffer.buffer):aa.currentVAO&&(Pa=D.getElements(aa.currentVAO.elements))&&M.bindBuffer(34963,Pa.buffer.buffer);ub=c.count;0<ub?Pa?B.drawElementsInstancedANGLE(5,4,Pa.type,0<<(Pa.type-5121>>1),ub):B.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Pa?M.drawElements(5,4,Pa.type,0<<(Pa.type-5121>>1)):M.drawArrays(5,
0,4));R.dirty=!0;aa.setVAO(null);ea.viewportWidth=P;ea.viewportHeight=v;Q&&(da.cpuTime+=performance.now()-G);T&&W.destroyStream(U);pd&&W.destroyStream(Lc);Xc&&W.destroyStream(Vc);Ua&&W.destroyStream(hd);zb&&W.destroyStream(ic);Zb.unbind()},scope:function(a,d,g){var f,k,h,p,q,E,b,t,u,na,x,A,sa,Ja,Za,D,fa,ga,C,M,L,F,va,N,aa,z,K,Q,S,T,ka,Ta,X,ya,pa,Ea,Ba,Hb,ia,la,Y,ta,ja,Aa,td,Cc,Z,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,
gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,ha,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,$a,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe;f=a.viewport;k=f.x|0;h=f.y|0;p="width"in f?f.width|0:ea.framebufferWidth-k;q="height"in f?f.height|
0:ea.framebufferHeight-h;E=ea.viewportWidth;ea.viewportWidth=p;b=ea.viewportHeight;ea.viewportHeight=q;t=I[0];I[0]=k;u=I[1];I[1]=h;na=I[2];I[2]=p;x=I[3];I[3]=q;A=P[0];P[0]=0;sa=P[1];P[1]=0;Ja=P[2];P[2]=0;Za=P[3];P[3]=0;D=qa.blend_enable;qa.blend_enable=!0;fa=ra[0];ra[0]=32774;ga=ra[1];ra[1]=32774;C=wa[0];wa[0]=770;M=wa[1];wa[1]=771;L=wa[2];wa[2]=773;F=wa[3];wa[3]=1;va=c.call(this,ea,a,g);N=qa.depth_enable;qa.depth_enable=va;aa=a.viewport;z=aa.x|0;K=aa.y|0;Q="width"in aa?aa.width|0:ea.framebufferWidth-
z;S="height"in aa?aa.height|0:ea.framebufferHeight-K;T=r[0];r[0]=z;ka=r[1];r[1]=K;Ta=r[2];r[2]=Q;X=r[3];r[3]=S;ya=qa.scissor_enable;qa.scissor_enable=!0;pa=qa.stencil_enable;qa.stencil_enable=!1;if(Ea=R.profile)Ba=performance.now(),da.count++;Hb=O.offset;O.offset=0;ia=O.count;O.count=4;la=a.count;Y=O.instances;O.instances=la;ta=O.primitive;O.primitive=5;ja=a.dashLength;Aa=J[23];J[23]=ja;td=a.dashTexture;Cc=J[24];J[24]=td;Z=a.depth;Xc=J[22];J[22]=Z;Vc=a.id;Ec=J[31];J[31]=Vc;dc=a.miterLimit;Ic=J[32];
J[32]=dc;oc=G.call(this,ea,a,g);pc=J[33];J[33]=oc;mc=a.opacity;ec=J[10];J[10]=mc;ab=ea.pixelRatio;qc=J[34];J[34]=ab;yb=a.scale;db=J[6];J[6]=yb;Nb=a.scaleFract;bb=J[7];J[7]=Nb;ob=a.thickness;Ua=J[21];J[21]=ob;hd=a.translate;Ib=J[8];J[8]=hd;Jb=a.translateFract;rc=J[9];J[9]=Jb;Ob=H.call(this,ea,a,g);jb=J[3];J[3]=Ob;oa.buffer=a.positionBuffer;Gb=!1;Db=null;wb=0;hb=!1;Pb=Yb=0;qb=1;Ra=0;Ub=5126;pb=ib=ic=zb=0;Ca(oa)?(Gb=!0,Db=W.createStream(34962,oa),Ub=Db.dtype):(Db=W.getBuffer(oa))?Ub=Db.dtype:"constant"in
oa?(qb=2,"number"===typeof oa.constant?(ic=oa.constant,ib=pb=zb=0):(ic=0<oa.constant.length?oa.constant[0]:0,ib=1<oa.constant.length?oa.constant[1]:0,pb=2<oa.constant.length?oa.constant[2]:0,zb=3<oa.constant.length?oa.constant[3]:0)):(Db=Ca(oa.buffer)?W.createStream(34962,oa.buffer):W.getBuffer(oa.buffer),Ub="type"in oa?Da[oa.type]:Db.dtype,hb=!!oa.normalized,Pb=oa.size|0,Yb=oa.offset|0,Ra=oa.stride|0,wb=oa.divisor|0);Ha=B.buffer;B.buffer=Db;rb=B.divisor;B.divisor=wb;Ka=B.normalized;B.normalized=
hb;fb=B.offset;B.offset=Yb;gb=B.size;B.size=Pb;La=B.state;B.state=qb;kb=B.stride;B.stride=Ra;Va=B.type;B.type=Ub;tb=B.w;B.w=zb;sb=B.x;B.x=ic;Oa=B.y;B.y=ib;tc=B.z;B.z=pb;xa.buffer=a.positionFractBuffer;Qa=!1;Kb=null;Eb=0;Ma=!1;Xa=ha=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;Ca(xa)?(Qa=!0,Kb=W.createStream(34962,xa),lb=Kb.dtype):(Kb=W.getBuffer(xa))?lb=Kb.dtype:"constant"in xa?(Lb=2,"number"===typeof xa.constant?(Zb=xa.constant,Pa=ub=Na=0):(Zb=0<xa.constant.length?xa.constant[0]:0,Pa=1<xa.constant.length?xa.constant[1]:
0,ub=2<xa.constant.length?xa.constant[2]:0,Na=3<xa.constant.length?xa.constant[3]:0)):(Kb=Ca(xa.buffer)?W.createStream(34962,xa.buffer):W.getBuffer(xa.buffer),lb="type"in xa?Da[xa.type]:Kb.dtype,Ma=!!xa.normalized,Xa=xa.size|0,ha=xa.offset|0,Mb=xa.stride|0,Eb=xa.divisor|0);vb=U.buffer;U.buffer=Kb;Sa=U.divisor;U.divisor=Eb;nb=U.normalized;U.normalized=Ma;fc=U.offset;U.offset=ha;Ac=U.size;U.size=Xa;vc=U.state;U.state=Lb;cb=U.stride;U.stride=Mb;jc=U.type;U.type=lb;qd=U.w;U.w=Na;Wa=U.x;U.x=Zb;Mc=U.y;
U.y=Pa;Ab=U.z;U.z=ub;Fa.buffer=a.positionBuffer;Ya=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;pe=0;Fc=5126;ud=Yc=Nc=sd=0;Ca(Fa)?(Ya=!0,Vb=W.createStream(34962,Fa),Fc=Vb.dtype):(Vb=W.getBuffer(Fa))?Fc=Vb.dtype:"constant"in Fa?(Rb=2,"number"===typeof Fa.constant?(Nc=Fa.constant,Yc=ud=sd=0):(Nc=0<Fa.constant.length?Fa.constant[0]:0,Yc=1<Fa.constant.length?Fa.constant[1]:0,ud=2<Fa.constant.length?Fa.constant[2]:0,sd=3<Fa.constant.length?Fa.constant[3]:0)):(Vb=Ca(Fa.buffer)?W.createStream(34962,Fa.buffer):W.getBuffer(Fa.buffer),
Fc="type"in Fa?Da[Fa.type]:Vb.dtype,Wb=!!Fa.normalized,Kc=Fa.size|0,Qb=Fa.offset|0,pe=Fa.stride|0,uc=Fa.divisor|0);nc=n.buffer;n.buffer=Vb;wc=n.divisor;n.divisor=uc;gc=n.normalized;n.normalized=Wb;eb=n.offset;n.offset=Qb;sc=n.size;n.size=Kc;Tb=n.state;n.state=Rb;Xb=n.stride;n.stride=pe;cc=n.type;n.type=Fc;hc=n.w;n.w=sd;yc=n.x;n.x=Nc;Bc=n.y;n.y=Yc;cd=n.z;n.z=ud;ma.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Sc=0;Zc=!1;dd=od=0;$c=1;kc=0;bc=5126;zc=ed=Uc=ad=0;Ca(ma)?(Qc=!0,Rc=W.createStream(34962,ma),
bc=Rc.dtype):(Rc=W.getBuffer(ma))?bc=Rc.dtype:"constant"in ma?($c=2,"number"===typeof ma.constant?(Uc=ma.constant,ed=zc=ad=0):(Uc=0<ma.constant.length?ma.constant[0]:0,ed=1<ma.constant.length?ma.constant[1]:0,zc=2<ma.constant.length?ma.constant[2]:0,ad=3<ma.constant.length?ma.constant[3]:0)):(Rc=Ca(ma.buffer)?W.createStream(34962,ma.buffer):W.getBuffer(ma.buffer),bc="type"in ma?Da[ma.type]:Rc.dtype,Zc=!!ma.normalized,dd=ma.size|0,od=ma.offset|0,kc=ma.stride|0,Sc=ma.divisor|0);id=v.buffer;v.buffer=
Rc;Nd=v.divisor;v.divisor=Sc;xd=v.normalized;v.normalized=Zc;ue=v.offset;v.offset=od;jd=v.size;v.size=dd;Ce=v.state;v.state=$c;Od=v.stride;v.stride=kc;ge=v.type;v.type=bc;ce=v.w;v.w=ad;Pd=v.x;v.x=Uc;Jd=v.y;v.y=ed;Hd=v.z;v.z=zc;V.buffer=a.colorBuffer;md=!1;Tc=null;vd=0;rd=!1;wd=kd=0;Cd=1;Fd=0;je=5126;ke=le=Fe=$a=0;Ca(V)?(md=!0,Tc=W.createStream(34962,V),je=Tc.dtype):(Tc=W.getBuffer(V))?je=Tc.dtype:"constant"in V?(Cd=2,"number"===typeof V.constant?(Fe=V.constant,le=ke=$a=0):(Fe=0<V.constant.length?
V.constant[0]:0,le=1<V.constant.length?V.constant[1]:0,ke=2<V.constant.length?V.constant[2]:0,$a=3<V.constant.length?V.constant[3]:0)):(Tc=Ca(V.buffer)?W.createStream(34962,V.buffer):W.getBuffer(V.buffer),je="type"in V?Da[V.type]:Tc.dtype,rd=!!V.normalized,wd=V.size|0,kd=V.offset|0,Fd=V.stride|0,vd=V.divisor|0);he=y.buffer;y.buffer=Tc;ve=y.divisor;y.divisor=vd;de=y.normalized;y.normalized=rd;me=y.offset;y.offset=kd;Oc=y.size;y.size=wd;gd=y.state;y.state=Cd;we=y.stride;y.stride=Fd;qe=y.type;y.type=
je;Kd=y.w;y.w=$a;Qd=y.x;y.x=Fe;Sd=y.y;y.y=le;Td=y.z;y.z=ke;ne=ba.buffer;ba.buffer=e;Ge=ba.divisor;ba.divisor=0;Be=ba.normalized;ba.normalized=!1;se=ba.offset;ba.offset=0;Se=ba.size;ba.size=0;Te=ba.state;ba.state=1;Oe=ba.stride;ba.stride=8;xe=ba.type;ba.type=5126;He=ba.w;ba.w=0;Je=ba.x;ba.x=0;Ke=ba.y;ba.y=0;Le=ba.z;ba.z=0;Ie=w.buffer;w.buffer=l;Ld=w.divisor;w.divisor=0;Xd=w.normalized;w.normalized=!1;be=w.offset;w.offset=4;ee=w.size;w.size=0;Me=w.state;w.state=1;Id=w.stride;w.stride=8;Ud=w.type;w.type=
5126;De=w.w;w.w=0;Ne=w.x;w.x=0;hf=w.y;w.y=0;bf=w.z;w.z=0;Ue=m.vert;m.vert=20;Pe=m.frag;m.frag=19;R.dirty=!0;d(ea,a,g);ea.viewportWidth=E;ea.viewportHeight=b;I[0]=t;I[1]=u;I[2]=na;I[3]=x;P[0]=A;P[1]=sa;P[2]=Ja;P[3]=Za;qa.blend_enable=D;ra[0]=fa;ra[1]=ga;wa[0]=C;wa[1]=M;wa[2]=L;wa[3]=F;qa.depth_enable=N;r[0]=T;r[1]=ka;r[2]=Ta;r[3]=X;qa.scissor_enable=ya;qa.stencil_enable=pa;Ea&&(da.cpuTime+=performance.now()-Ba);O.offset=Hb;O.count=ia;O.instances=Y;O.primitive=ta;J[23]=Aa;J[24]=Cc;J[22]=Xc;J[31]=Ec;
J[32]=Ic;J[33]=pc;J[10]=ec;J[34]=qc;J[6]=db;J[7]=bb;J[21]=Ua;J[8]=Ib;J[9]=rc;J[3]=jb;Gb&&W.destroyStream(Db);B.buffer=Ha;B.divisor=rb;B.normalized=Ka;B.offset=fb;B.size=gb;B.state=La;B.stride=kb;B.type=Va;B.w=tb;B.x=sb;B.y=Oa;B.z=tc;Qa&&W.destroyStream(Kb);U.buffer=vb;U.divisor=Sa;U.normalized=nb;U.offset=fc;U.size=Ac;U.state=vc;U.stride=cb;U.type=jc;U.w=qd;U.x=Wa;U.y=Mc;U.z=Ab;Ya&&W.destroyStream(Vb);n.buffer=nc;n.divisor=wc;n.normalized=gc;n.offset=eb;n.size=sc;n.state=Tb;n.stride=Xb;n.type=cc;
n.w=hc;n.x=yc;n.y=Bc;n.z=cd;Qc&&W.destroyStream(Rc);v.buffer=id;v.divisor=Nd;v.normalized=xd;v.offset=ue;v.size=jd;v.state=Ce;v.stride=Od;v.type=ge;v.w=ce;v.x=Pd;v.y=Jd;v.z=Hd;md&&W.destroyStream(Tc);y.buffer=he;y.divisor=ve;y.normalized=de;y.offset=me;y.size=Oc;y.state=gd;y.stride=we;y.type=qe;y.w=Kd;y.x=Qd;y.y=Sd;y.z=Td;ba.buffer=ne;ba.divisor=Ge;ba.normalized=Be;ba.offset=se;ba.size=Se;ba.state=Te;ba.stride=Oe;ba.type=xe;ba.w=He;ba.x=Je;ba.y=Ke;ba.z=Le;w.buffer=Ie;w.divisor=Ld;w.normalized=Xd;
w.offset=be;w.size=ee;w.state=Me;w.stride=Id;w.type=Ud;w.w=De;w.x=Ne;w.y=hf;w.z=bf;m.vert=Ue;m.frag=Pe;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Cc,W,ea,R){var O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,td,Hb,ga,I,sa,Da,oa,xa,Fa,ma,V,ua,Ia,za,mb,
ca;O=b.attributes;D=b.buffer;g=b.context;N=b.current;M=b.draw;Ca=b.elements;qa=b.extensions;m=b.framebuffer;J=b.gl;aa=b.isBufferArgs;P=b.next;la=b.shader;ra=b.uniforms;Aa=b.vao;wa=P.blend_color;fa=N.blend_color;Ba=P.blend_equation;ka=N.blend_equation;pa=P.blend_func;ya=N.blend_func;Ja=P.colorMask;na=N.colorMask;Za=P.depth_range;Ta=N.depth_range;r=P.polygonOffset_offset;p=N.polygonOffset_offset;E=P.sample_coverage;va=N.sample_coverage;Ea=P.scissor_box;td=N.scissor_box;Hb=P.stencil_func;ga=N.stencil_func;
I=P.stencil_opBack;sa=N.stencil_opBack;Da=P.stencil_opFront;oa=N.stencil_opFront;xa=P.viewport;Fa=N.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ia={divisor:1,offset:4,stride:4};za={divisor:1,offset:16,stride:8};mb={divisor:1,offset:24,stride:8};ca={divisor:1,offset:0,stride:8};return{batch:function(c,q){var b,w,L,v,z,n;b=m.next;b!==m.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):
J.bindFramebuffer(36160,null),m.cur=b);if(N.dirty){var xa,y,H,K,ra,wa,G,B,U,T,pa,Ea,ba,Ba,la,Z,Zd,Bd,ha,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb;xa=P.dither;xa!==N.dither&&(xa?J.enable(3024):J.disable(3024),N.dither=xa);y=P.depth_func;y!==N.depth_func&&(J.depthFunc(y),N.depth_func=y);H=Za[0];K=Za[1];if(H!==Ta[0]||K!==Ta[1])J.depthRange(H,K),Ta[0]=H,Ta[1]=K;ra=P.depth_mask;ra!==N.depth_mask&&(J.depthMask(ra),N.depth_mask=ra);wa=Ja[0];G=Ja[1];B=Ja[2];U=Ja[3];if(wa!==na[0]||G!==na[1]||B!==na[2]||U!==na[3])J.colorMask(wa,
G,B,U),na[0]=wa,na[1]=G,na[2]=B,na[3]=U;T=P.frontFace;T!==N.frontFace&&(J.frontFace(T),N.frontFace=T);pa=P.lineWidth;pa!==N.lineWidth&&(J.lineWidth(pa),N.lineWidth=pa);Ea=P.polygonOffset_enable;Ea!==N.polygonOffset_enable&&(Ea?J.enable(32823):J.disable(32823),N.polygonOffset_enable=Ea);ba=r[0];Ba=r[1];if(ba!==p[0]||Ba!==p[1])J.polygonOffset(ba,Ba),p[0]=ba,p[1]=Ba;la=P.sample_alpha;la!==N.sample_alpha&&(la?J.enable(32926):J.disable(32926),N.sample_alpha=la);Z=P.sample_enable;Z!==N.sample_enable&&(Z?
J.enable(32928):J.disable(32928),N.sample_enable=Z);Zd=E[0];Bd=E[1];if(Zd!==va[0]||Bd!==va[1])J.sampleCoverage(Zd,Bd),va[0]=Zd,va[1]=Bd;ha=P.stencil_mask;ha!==N.stencil_mask&&(J.stencilMask(ha),N.stencil_mask=ha);ld=Hb[0];bd=Hb[1];pd=Hb[2];if(ld!==ga[0]||bd!==ga[1]||pd!==ga[2])J.stencilFunc(ld,bd,pd),ga[0]=ld,ga[1]=bd,ga[2]=pd;Lc=Da[0];nd=Da[1];Gc=Da[2];fd=Da[3];if(Lc!==oa[0]||nd!==oa[1]||Gc!==oa[2]||fd!==oa[3])J.stencilOpSeparate(Lc,nd,Gc,fd),oa[0]=Lc,oa[1]=nd,oa[2]=Gc,oa[3]=fd;Pc=I[0];Wc=I[1];Bb=
I[2];Fb=I[3];if(Pc!==sa[0]||Wc!==sa[1]||Bb!==sa[2]||Fb!==sa[3])J.stencilOpSeparate(Pc,Wc,Bb,Fb),sa[0]=Pc,sa[1]=Wc,sa[2]=Bb,sa[3]=Fb}J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(w=N.profile)L=
performance.now(),da.count+=q;J.useProgram(Q.program);v=qa.angle_instanced_arrays;var Dc,xb,xc,Cb,Jc;Aa.setVAO(null);Dc=F.location;xb=O[Dc];xb.buffer||J.enableVertexAttribArray(Dc);if(5126!==xb.type||1!==xb.size||xb.buffer!==e||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(Dc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=e,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(v.vertexAttribDivisorANGLE(Dc,0),xb.divisor=0);xc=d.location;Cb=
O[xc];Cb.buffer||J.enableVertexAttribArray(xc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==l||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(xc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=l,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(v.vertexAttribDivisorANGLE(xc,0),Cb.divisor=0);(Jc=M.elements)?J.bindBuffer(34963,Jc.buffer.buffer):Aa.currentVAO&&(Jc=Ca.getElements(Aa.currentVAO.elements))&&J.bindBuffer(34963,Jc.buffer.buffer);
for(z=0;z<q;++z){n=c[z];var lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd,xd,ue,jd,$a,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc;lc=n.viewport;Hc=lc.x|0;Xc=lc.y|0;Vc="width"in
lc?lc.width|0:g.framebufferWidth-Hc;Ec="height"in lc?lc.height|0:g.framebufferHeight-Xc;dc=g.viewportWidth;g.viewportWidth=Vc;Ic=g.viewportHeight;g.viewportHeight=Ec;J.viewport(Hc,Xc,Vc,Ec);Fa[0]=Hc;Fa[1]=Xc;Fa[2]=Vc;Fa[3]=Ec;(oc=ia.call(this,g,n,z))?J.enable(2929):J.disable(2929);N.depth_enable=oc;pc=n.viewport;mc=pc.x|0;ec=pc.y|0;ab="width"in pc?pc.width|0:g.framebufferWidth-mc;qc="height"in pc?pc.height|0:g.framebufferHeight-ec;J.scissor(mc,ec,ab,qc);td[0]=mc;td[1]=ec;td[2]=ab;td[3]=qc;ua.buffer=
n.positionBuffer;yb=!1;db=null;Nb=0;bb=!1;Ua=ob=0;hd=1;Ib=0;Jb=5126;Gb=jb=Ob=rc=0;aa(ua)?(yb=!0,db=D.createStream(34962,ua),Jb=db.dtype):(db=D.getBuffer(ua))?Jb=db.dtype:"constant"in ua?(hd=2,"number"===typeof ua.constant?(Ob=ua.constant,jb=Gb=rc=0):(Ob=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,rc=3<ua.constant.length?ua.constant[3]:0)):(db=aa(ua.buffer)?D.createStream(34962,ua.buffer):D.getBuffer(ua.buffer),Jb="type"in
ua?ma[ua.type]:db.dtype,bb=!!ua.normalized,Ua=ua.size|0,ob=ua.offset|0,Ib=ua.stride|0,Nb=ua.divisor|0);Db=h.location;wb=O[Db];if(1===hd){wb.buffer||J.enableVertexAttribArray(Db);hb=Ua||2;if(wb.type!==Jb||wb.size!==hb||wb.buffer!==db||wb.normalized!==bb||wb.offset!==ob||wb.stride!==Ib)J.bindBuffer(34962,db.buffer),J.vertexAttribPointer(Db,hb,Jb,bb,Ib,ob),wb.type=Jb,wb.size=hb,wb.buffer=db,wb.normalized=bb,wb.offset=ob,wb.stride=Ib;wb.divisor!==Nb&&(v.vertexAttribDivisorANGLE(Db,Nb),wb.divisor=Nb)}else if(wb.buffer&&
(J.disableVertexAttribArray(Db),wb.buffer=null),wb.x!==Ob||wb.y!==jb||wb.z!==Gb||wb.w!==rc)J.vertexAttrib4f(Db,Ob,jb,Gb,rc),wb.x=Ob,wb.y=jb,wb.z=Gb,wb.w=rc;za.buffer=n.positionBuffer;Yb=!1;Pb=null;qb=0;Ra=!1;zb=Ub=0;ic=1;ib=0;pb=5126;fb=Ka=rb=Ha=0;aa(za)?(Yb=!0,Pb=D.createStream(34962,za),pb=Pb.dtype):(Pb=D.getBuffer(za))?pb=Pb.dtype:"constant"in za?(ic=2,"number"===typeof za.constant?(rb=za.constant,Ka=fb=Ha=0):(rb=0<za.constant.length?za.constant[0]:0,Ka=1<za.constant.length?za.constant[1]:0,fb=
2<za.constant.length?za.constant[2]:0,Ha=3<za.constant.length?za.constant[3]:0)):(Pb=aa(za.buffer)?D.createStream(34962,za.buffer):D.getBuffer(za.buffer),pb="type"in za?ma[za.type]:Pb.dtype,Ra=!!za.normalized,zb=za.size|0,Ub=za.offset|0,ib=za.stride|0,qb=za.divisor|0);gb=f.location;La=O[gb];if(1===ic){La.buffer||J.enableVertexAttribArray(gb);kb=zb||2;if(La.type!==pb||La.size!==kb||La.buffer!==Pb||La.normalized!==Ra||La.offset!==Ub||La.stride!==ib)J.bindBuffer(34962,Pb.buffer),J.vertexAttribPointer(gb,
kb,pb,Ra,ib,Ub),La.type=pb,La.size=kb,La.buffer=Pb,La.normalized=Ra,La.offset=Ub,La.stride=ib;La.divisor!==qb&&(v.vertexAttribDivisorANGLE(gb,qb),La.divisor=qb)}else if(La.buffer&&(J.disableVertexAttribArray(gb),La.buffer=null),La.x!==rb||La.y!==Ka||La.z!==fb||La.w!==Ha)J.vertexAttrib4f(gb,rb,Ka,fb,Ha),La.x=rb,La.y=Ka,La.z=fb,La.w=Ha;mb.buffer=n.positionBuffer;Va=!1;tb=null;sb=0;Oa=!1;Qa=tc=0;Kb=1;Eb=0;Ma=5126;Mb=Lb=Xa=zd=0;aa(mb)?(Va=!0,tb=D.createStream(34962,mb),Ma=tb.dtype):(tb=D.getBuffer(mb))?
Ma=tb.dtype:"constant"in mb?(Kb=2,"number"===typeof mb.constant?(Xa=mb.constant,Lb=Mb=zd=0):(Xa=0<mb.constant.length?mb.constant[0]:0,Lb=1<mb.constant.length?mb.constant[1]:0,Mb=2<mb.constant.length?mb.constant[2]:0,zd=3<mb.constant.length?mb.constant[3]:0)):(tb=aa(mb.buffer)?D.createStream(34962,mb.buffer):D.getBuffer(mb.buffer),Ma="type"in mb?ma[mb.type]:tb.dtype,Oa=!!mb.normalized,Qa=mb.size|0,tc=mb.offset|0,Eb=mb.stride|0,sb=mb.divisor|0);lb=ta.location;Na=O[lb];if(1===Kb){Na.buffer||J.enableVertexAttribArray(lb);
Zb=Qa||2;if(Na.type!==Ma||Na.size!==Zb||Na.buffer!==tb||Na.normalized!==Oa||Na.offset!==tc||Na.stride!==Eb)J.bindBuffer(34962,tb.buffer),J.vertexAttribPointer(lb,Zb,Ma,Oa,Eb,tc),Na.type=Ma,Na.size=Zb,Na.buffer=tb,Na.normalized=Oa,Na.offset=tc,Na.stride=Eb;Na.divisor!==sb&&(v.vertexAttribDivisorANGLE(lb,sb),Na.divisor=sb)}else if(Na.buffer&&(J.disableVertexAttribArray(lb),Na.buffer=null),Na.x!==Xa||Na.y!==Lb||Na.z!==Mb||Na.w!==zd)J.vertexAttrib4f(lb,Xa,Lb,Mb,zd),Na.x=Xa,Na.y=Lb,Na.z=Mb,Na.w=zd;ca.buffer=
n.positionBuffer;Pa=!1;ub=null;vb=0;Sa=!1;fc=nb=0;Ac=1;vc=0;cb=5126;Mc=Wa=qd=jc=0;aa(ca)?(Pa=!0,ub=D.createStream(34962,ca),cb=ub.dtype):(ub=D.getBuffer(ca))?cb=ub.dtype:"constant"in ca?(Ac=2,"number"===typeof ca.constant?(qd=ca.constant,Wa=Mc=jc=0):(qd=0<ca.constant.length?ca.constant[0]:0,Wa=1<ca.constant.length?ca.constant[1]:0,Mc=2<ca.constant.length?ca.constant[2]:0,jc=3<ca.constant.length?ca.constant[3]:0)):(ub=aa(ca.buffer)?D.createStream(34962,ca.buffer):D.getBuffer(ca.buffer),cb="type"in
ca?ma[ca.type]:ub.dtype,Sa=!!ca.normalized,fc=ca.size|0,nb=ca.offset|0,vc=ca.stride|0,vb=ca.divisor|0);Ab=ja.location;Ya=O[Ab];if(1===Ac){Ya.buffer||J.enableVertexAttribArray(Ab);Vb=fc||2;if(Ya.type!==cb||Ya.size!==Vb||Ya.buffer!==ub||Ya.normalized!==Sa||Ya.offset!==nb||Ya.stride!==vc)J.bindBuffer(34962,ub.buffer),J.vertexAttribPointer(Ab,Vb,cb,Sa,vc,nb),Ya.type=cb,Ya.size=Vb,Ya.buffer=ub,Ya.normalized=Sa,Ya.offset=nb,Ya.stride=vc;Ya.divisor!==vb&&(v.vertexAttribDivisorANGLE(Ab,vb),Ya.divisor=vb)}else if(Ya.buffer&&
(J.disableVertexAttribArray(Ab),Ya.buffer=null),Ya.x!==qd||Ya.y!==Wa||Ya.z!==Mc||Ya.w!==jc)J.vertexAttrib4f(Ab,qd,Wa,Mc,jc),Ya.x=qd,Ya.y=Wa,Ya.z=Mc,Ya.w=jc;V.buffer=n.colorBuffer;uc=!1;Wb=null;Qb=0;Kc=!1;pe=Rb=0;Fc=1;sd=0;Nc=5126;wc=nc=ud=Yc=0;aa(V)?(uc=!0,Wb=D.createStream(34962,V),Nc=Wb.dtype):(Wb=D.getBuffer(V))?Nc=Wb.dtype:"constant"in V?(Fc=2,"number"===typeof V.constant?(ud=V.constant,nc=wc=Yc=0):(ud=0<V.constant.length?V.constant[0]:0,nc=1<V.constant.length?V.constant[1]:0,wc=2<V.constant.length?
V.constant[2]:0,Yc=3<V.constant.length?V.constant[3]:0)):(Wb=aa(V.buffer)?D.createStream(34962,V.buffer):D.getBuffer(V.buffer),Nc="type"in V?ma[V.type]:Wb.dtype,Kc=!!V.normalized,pe=V.size|0,Rb=V.offset|0,sd=V.stride|0,Qb=V.divisor|0);gc=S.location;eb=O[gc];if(1===Fc){eb.buffer||J.enableVertexAttribArray(gc);sc=pe||4;if(eb.type!==Nc||eb.size!==sc||eb.buffer!==Wb||eb.normalized!==Kc||eb.offset!==Rb||eb.stride!==sd)J.bindBuffer(34962,Wb.buffer),J.vertexAttribPointer(gc,sc,Nc,Kc,sd,Rb),eb.type=Nc,eb.size=
sc,eb.buffer=Wb,eb.normalized=Kc,eb.offset=Rb,eb.stride=sd;eb.divisor!==Qb&&(v.vertexAttribDivisorANGLE(gc,Qb),eb.divisor=Qb)}else if(eb.buffer&&(J.disableVertexAttribArray(gc),eb.buffer=null),eb.x!==ud||eb.y!==nc||eb.z!==wc||eb.w!==Yc)J.vertexAttrib4f(gc,ud,nc,wc,Yc),eb.x=ud,eb.y=nc,eb.z=wc,eb.w=Yc;Ia.buffer=n.colorBuffer;Tb=!1;Xb=null;cc=0;hc=!1;Bc=yc=0;cd=1;Qc=0;Rc=5126;dd=od=Zc=Sc=0;aa(Ia)?(Tb=!0,Xb=D.createStream(34962,Ia),Rc=Xb.dtype):(Xb=D.getBuffer(Ia))?Rc=Xb.dtype:"constant"in Ia?(cd=2,"number"===
typeof Ia.constant?(Zc=Ia.constant,od=dd=Sc=0):(Zc=0<Ia.constant.length?Ia.constant[0]:0,od=1<Ia.constant.length?Ia.constant[1]:0,dd=2<Ia.constant.length?Ia.constant[2]:0,Sc=3<Ia.constant.length?Ia.constant[3]:0)):(Xb=aa(Ia.buffer)?D.createStream(34962,Ia.buffer):D.getBuffer(Ia.buffer),Rc="type"in Ia?ma[Ia.type]:Xb.dtype,hc=!!Ia.normalized,Bc=Ia.size|0,yc=Ia.offset|0,Qc=Ia.stride|0,cc=Ia.divisor|0);$c=X.location;kc=O[$c];if(1===cd){kc.buffer||J.enableVertexAttribArray($c);bc=Bc||4;if(kc.type!==Rc||
kc.size!==bc||kc.buffer!==Xb||kc.normalized!==hc||kc.offset!==yc||kc.stride!==Qc)J.bindBuffer(34962,Xb.buffer),J.vertexAttribPointer($c,bc,Rc,hc,Qc,yc),kc.type=Rc,kc.size=bc,kc.buffer=Xb,kc.normalized=hc,kc.offset=yc,kc.stride=Qc;kc.divisor!==cc&&(v.vertexAttribDivisorANGLE($c,cc),kc.divisor=cc)}else if(kc.buffer&&(J.disableVertexAttribArray($c),kc.buffer=null),kc.x!==Zc||kc.y!==od||kc.z!==dd||kc.w!==Sc)J.vertexAttrib4f($c,Zc,od,dd,Sc),kc.x=Zc,kc.y=od,kc.z=dd,kc.w=Sc;ad=n.scale;Uc=ad[0];zc=ad[1];
z&&ed===Uc&&id===zc||(ed=Uc,id=zc,J.uniform2f(Cc.location,Uc,zc));Nd=n.translate;xd=Nd[0];jd=Nd[1];z&&ue===xd&&$a===jd||(ue=xd,$a=jd,J.uniform2f(ea.location,xd,jd));Od=n.thickness;z&&ge===Od||(ge=Od,J.uniform1f(W.location,Od));ce=n.depth;z&&Pd===ce||(Pd=ce,J.uniform1f(C.location,ce));Jd=k.call(this,g,n,z);Hd=Jd[0];Tc=Jd[1];rd=Jd[2];wd=Jd[3];z&&md===Hd&&vd===Tc&&kd===rd&&Cd===wd||(md=Hd,vd=Tc,kd=rd,Cd=wd,J.uniform4f(R.location,Hd,Tc,rd,wd));Fd=n.miterLimit;z&&je===Fd||(je=Fd,J.uniform1f(t.location,
Fd));ye=u.call(this,g,n,z);z&&Fe===ye||(Fe=ye,J.uniform1f(a.location,ye));le=n.dashLength;z&&ke===le||(ke=le,J.uniform1f(x.location,le));he=n.opacity;z&&ve===he||(ve=he,J.uniform1f(A.location,he));(de=n.dashTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);me=de._texture;J.uniform1i(Y.location,me.bind());Oc=n.count;0<Oc?Jc?v.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):v.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?J.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):J.drawArrays(5,
0,4));g.viewportWidth=dc;g.viewportHeight=Ic;yb&&D.destroyStream(db);Yb&&D.destroyStream(Pb);Va&&D.destroyStream(tb);Pa&&D.destroyStream(ub);uc&&D.destroyStream(Wb);Tb&&D.destroyStream(Xb);me.unbind()}N.dirty=!0;Aa.setVAO(null);w&&(da.cpuTime+=performance.now()-L)},draw:function(k){var b,u,w,v,n,z,xa,y,H,ra,wa,Q,G,B,U,T,pa,Ea,ba,Ba,la,ia,Z,Zd,Bd,ha,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,
zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe;b=m.next;b!==m.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):J.bindFramebuffer(36160,null),m.cur=b);if(N.dirty){var Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc;Fc=P.dither;Fc!==N.dither&&(Fc?J.enable(3024):J.disable(3024),N.dither=Fc);sd=P.depth_func;sd!==N.depth_func&&(J.depthFunc(sd),N.depth_func=sd);Nc=
Za[0];Yc=Za[1];if(Nc!==Ta[0]||Yc!==Ta[1])J.depthRange(Nc,Yc),Ta[0]=Nc,Ta[1]=Yc;ud=P.depth_mask;ud!==N.depth_mask&&(J.depthMask(ud),N.depth_mask=ud);nc=Ja[0];wc=Ja[1];gc=Ja[2];eb=Ja[3];if(nc!==na[0]||wc!==na[1]||gc!==na[2]||eb!==na[3])J.colorMask(nc,wc,gc,eb),na[0]=nc,na[1]=wc,na[2]=gc,na[3]=eb;sc=P.frontFace;sc!==N.frontFace&&(J.frontFace(sc),N.frontFace=sc);Tb=P.lineWidth;Tb!==N.lineWidth&&(J.lineWidth(Tb),N.lineWidth=Tb);Xb=P.polygonOffset_enable;Xb!==N.polygonOffset_enable&&(Xb?J.enable(32823):
J.disable(32823),N.polygonOffset_enable=Xb);cc=r[0];hc=r[1];if(cc!==p[0]||hc!==p[1])J.polygonOffset(cc,hc),p[0]=cc,p[1]=hc;yc=P.sample_alpha;yc!==N.sample_alpha&&(yc?J.enable(32926):J.disable(32926),N.sample_alpha=yc);Bc=P.sample_enable;Bc!==N.sample_enable&&(Bc?J.enable(32928):J.disable(32928),N.sample_enable=Bc);cd=E[0];Qc=E[1];if(cd!==va[0]||Qc!==va[1])J.sampleCoverage(cd,Qc),va[0]=cd,va[1]=Qc;Rc=P.stencil_mask;Rc!==N.stencil_mask&&(J.stencilMask(Rc),N.stencil_mask=Rc);Sc=Hb[0];Zc=Hb[1];od=Hb[2];
if(Sc!==ga[0]||Zc!==ga[1]||od!==ga[2])J.stencilFunc(Sc,Zc,od),ga[0]=Sc,ga[1]=Zc,ga[2]=od;dd=Da[0];$c=Da[1];kc=Da[2];bc=Da[3];if(dd!==oa[0]||$c!==oa[1]||kc!==oa[2]||bc!==oa[3])J.stencilOpSeparate(dd,$c,kc,bc),oa[0]=dd,oa[1]=$c,oa[2]=kc,oa[3]=bc;ad=I[0];Uc=I[1];ed=I[2];zc=I[3];if(ad!==sa[0]||Uc!==sa[1]||ed!==sa[2]||zc!==sa[3])J.stencilOpSeparate(ad,Uc,ed,zc),sa[0]=ad,sa[1]=Uc,sa[2]=ed,sa[3]=zc}u=k.viewport;w=u.x|0;v=u.y|0;n="width"in u?u.width|0:g.framebufferWidth-w;z="height"in u?u.height|0:g.framebufferHeight-
v;xa=g.viewportWidth;g.viewportWidth=n;y=g.viewportHeight;g.viewportHeight=z;J.viewport(w,v,n,z);Fa[0]=w;Fa[1]=v;Fa[2]=n;Fa[3]=z;J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;(H=K.call(this,g,k,0))?J.enable(2929):J.disable(2929);N.depth_enable=H;ra=k.viewport;
wa=ra.x|0;Q=ra.y|0;G="width"in ra?ra.width|0:g.framebufferWidth-wa;B="height"in ra?ra.height|0:g.framebufferHeight-Q;J.scissor(wa,Q,G,B);td[0]=wa;td[1]=Q;td[2]=G;td[3]=B;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(U=N.profile)T=performance.now(),da.count++;J.useProgram(L.program);pa=qa.angle_instanced_arrays;Aa.setVAO(null);ua.buffer=k.positionBuffer;Ea=!1;ba=null;Ba=0;la=!1;Z=ia=0;Zd=1;Bd=0;ha=5126;Lc=pd=bd=ld=0;aa(ua)?(Ea=!0,ba=D.createStream(34962,ua),ha=ba.dtype):
(ba=D.getBuffer(ua))?ha=ba.dtype:"constant"in ua?(Zd=2,"number"===typeof ua.constant?(bd=ua.constant,pd=Lc=ld=0):(bd=0<ua.constant.length?ua.constant[0]:0,pd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,ld=3<ua.constant.length?ua.constant[3]:0)):(ba=aa(ua.buffer)?D.createStream(34962,ua.buffer):D.getBuffer(ua.buffer),ha="type"in ua?ma[ua.type]:ba.dtype,la=!!ua.normalized,Z=ua.size|0,ia=ua.offset|0,Bd=ua.stride|0,Ba=ua.divisor|0);nd=h.location;Gc=O[nd];if(1===Zd){Gc.buffer||
J.enableVertexAttribArray(nd);fd=Z||2;if(Gc.type!==ha||Gc.size!==fd||Gc.buffer!==ba||Gc.normalized!==la||Gc.offset!==ia||Gc.stride!==Bd)J.bindBuffer(34962,ba.buffer),J.vertexAttribPointer(nd,fd,ha,la,Bd,ia),Gc.type=ha,Gc.size=fd,Gc.buffer=ba,Gc.normalized=la,Gc.offset=ia,Gc.stride=Bd;Gc.divisor!==Ba&&(pa.vertexAttribDivisorANGLE(nd,Ba),Gc.divisor=Ba)}else if(Gc.buffer&&(J.disableVertexAttribArray(nd),Gc.buffer=null),Gc.x!==bd||Gc.y!==pd||Gc.z!==Lc||Gc.w!==ld)J.vertexAttrib4f(nd,bd,pd,Lc,ld),Gc.x=
bd,Gc.y=pd,Gc.z=Lc,Gc.w=ld;za.buffer=k.positionBuffer;Pc=!1;Wc=null;Bb=0;Fb=!1;xb=Dc=0;xc=1;Cb=0;Jc=5126;Vc=Xc=Hc=lc=0;aa(za)?(Pc=!0,Wc=D.createStream(34962,za),Jc=Wc.dtype):(Wc=D.getBuffer(za))?Jc=Wc.dtype:"constant"in za?(xc=2,"number"===typeof za.constant?(Hc=za.constant,Xc=Vc=lc=0):(Hc=0<za.constant.length?za.constant[0]:0,Xc=1<za.constant.length?za.constant[1]:0,Vc=2<za.constant.length?za.constant[2]:0,lc=3<za.constant.length?za.constant[3]:0)):(Wc=aa(za.buffer)?D.createStream(34962,za.buffer):
D.getBuffer(za.buffer),Jc="type"in za?ma[za.type]:Wc.dtype,Fb=!!za.normalized,xb=za.size|0,Dc=za.offset|0,Cb=za.stride|0,Bb=za.divisor|0);Ec=f.location;dc=O[Ec];if(1===xc){dc.buffer||J.enableVertexAttribArray(Ec);Ic=xb||2;if(dc.type!==Jc||dc.size!==Ic||dc.buffer!==Wc||dc.normalized!==Fb||dc.offset!==Dc||dc.stride!==Cb)J.bindBuffer(34962,Wc.buffer),J.vertexAttribPointer(Ec,Ic,Jc,Fb,Cb,Dc),dc.type=Jc,dc.size=Ic,dc.buffer=Wc,dc.normalized=Fb,dc.offset=Dc,dc.stride=Cb;dc.divisor!==Bb&&(pa.vertexAttribDivisorANGLE(Ec,
Bb),dc.divisor=Bb)}else if(dc.buffer&&(J.disableVertexAttribArray(Ec),dc.buffer=null),dc.x!==Hc||dc.y!==Xc||dc.z!==Vc||dc.w!==lc)J.vertexAttrib4f(Ec,Hc,Xc,Vc,lc),dc.x=Hc,dc.y=Xc,dc.z=Vc,dc.w=lc;mb.buffer=k.positionBuffer;oc=!1;pc=null;mc=0;ec=!1;qc=ab=0;yb=1;db=0;Nb=5126;hd=Ua=ob=bb=0;aa(mb)?(oc=!0,pc=D.createStream(34962,mb),Nb=pc.dtype):(pc=D.getBuffer(mb))?Nb=pc.dtype:"constant"in mb?(yb=2,"number"===typeof mb.constant?(ob=mb.constant,Ua=hd=bb=0):(ob=0<mb.constant.length?mb.constant[0]:0,Ua=1<
mb.constant.length?mb.constant[1]:0,hd=2<mb.constant.length?mb.constant[2]:0,bb=3<mb.constant.length?mb.constant[3]:0)):(pc=aa(mb.buffer)?D.createStream(34962,mb.buffer):D.getBuffer(mb.buffer),Nb="type"in mb?ma[mb.type]:pc.dtype,ec=!!mb.normalized,qc=mb.size|0,ab=mb.offset|0,db=mb.stride|0,mc=mb.divisor|0);Ib=ta.location;Jb=O[Ib];if(1===yb){Jb.buffer||J.enableVertexAttribArray(Ib);rc=qc||2;if(Jb.type!==Nb||Jb.size!==rc||Jb.buffer!==pc||Jb.normalized!==ec||Jb.offset!==ab||Jb.stride!==db)J.bindBuffer(34962,
pc.buffer),J.vertexAttribPointer(Ib,rc,Nb,ec,db,ab),Jb.type=Nb,Jb.size=rc,Jb.buffer=pc,Jb.normalized=ec,Jb.offset=ab,Jb.stride=db;Jb.divisor!==mc&&(pa.vertexAttribDivisorANGLE(Ib,mc),Jb.divisor=mc)}else if(Jb.buffer&&(J.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==ob||Jb.y!==Ua||Jb.z!==hd||Jb.w!==bb)J.vertexAttrib4f(Ib,ob,Ua,hd,bb),Jb.x=ob,Jb.y=Ua,Jb.z=hd,Jb.w=bb;ca.buffer=k.positionBuffer;Ob=!1;jb=null;Gb=0;Db=!1;hb=wb=0;Yb=1;Pb=0;qb=5126;ic=zb=Ub=Ra=0;aa(ca)?(Ob=!0,jb=D.createStream(34962,
ca),qb=jb.dtype):(jb=D.getBuffer(ca))?qb=jb.dtype:"constant"in ca?(Yb=2,"number"===typeof ca.constant?(Ub=ca.constant,zb=ic=Ra=0):(Ub=0<ca.constant.length?ca.constant[0]:0,zb=1<ca.constant.length?ca.constant[1]:0,ic=2<ca.constant.length?ca.constant[2]:0,Ra=3<ca.constant.length?ca.constant[3]:0)):(jb=aa(ca.buffer)?D.createStream(34962,ca.buffer):D.getBuffer(ca.buffer),qb="type"in ca?ma[ca.type]:jb.dtype,Db=!!ca.normalized,hb=ca.size|0,wb=ca.offset|0,Pb=ca.stride|0,Gb=ca.divisor|0);ib=ja.location;pb=
O[ib];if(1===Yb){pb.buffer||J.enableVertexAttribArray(ib);Ha=hb||2;if(pb.type!==qb||pb.size!==Ha||pb.buffer!==jb||pb.normalized!==Db||pb.offset!==wb||pb.stride!==Pb)J.bindBuffer(34962,jb.buffer),J.vertexAttribPointer(ib,Ha,qb,Db,Pb,wb),pb.type=qb,pb.size=Ha,pb.buffer=jb,pb.normalized=Db,pb.offset=wb,pb.stride=Pb;pb.divisor!==Gb&&(pa.vertexAttribDivisorANGLE(ib,Gb),pb.divisor=Gb)}else if(pb.buffer&&(J.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==ic||pb.w!==Ra)J.vertexAttrib4f(ib,
Ub,zb,ic,Ra),pb.x=Ub,pb.y=zb,pb.z=ic,pb.w=Ra;V.buffer=k.colorBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;aa(V)?(rb=!0,Ka=D.createStream(34962,V),sb=Ka.dtype):(Ka=D.getBuffer(V))?sb=Ka.dtype:"constant"in V?(Va=2,"number"===typeof V.constant?(tc=V.constant,Qa=Kb=Oa=0):(tc=0<V.constant.length?V.constant[0]:0,Qa=1<V.constant.length?V.constant[1]:0,Kb=2<V.constant.length?V.constant[2]:0,Oa=3<V.constant.length?V.constant[3]:0)):(Ka=aa(V.buffer)?D.createStream(34962,V.buffer):
D.getBuffer(V.buffer),sb="type"in V?ma[V.type]:Ka.dtype,gb=!!V.normalized,kb=V.size|0,La=V.offset|0,tb=V.stride|0,fb=V.divisor|0);Eb=S.location;Ma=O[Eb];if(1===Va){Ma.buffer||J.enableVertexAttribArray(Eb);zd=kb||4;if(Ma.type!==sb||Ma.size!==zd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)J.bindBuffer(34962,Ka.buffer),J.vertexAttribPointer(Eb,zd,sb,gb,tb,La),Ma.type=sb,Ma.size=zd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(pa.vertexAttribDivisorANGLE(Eb,
fb),Ma.divisor=fb)}else if(Ma.buffer&&(J.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==tc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)J.vertexAttrib4f(Eb,tc,Qa,Kb,Oa),Ma.x=tc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Ia.buffer=k.colorBuffer;Xa=!1;Lb=null;Mb=0;lb=!1;Zb=Na=0;Pa=1;ub=0;vb=5126;Ac=fc=nb=Sa=0;aa(Ia)?(Xa=!0,Lb=D.createStream(34962,Ia),vb=Lb.dtype):(Lb=D.getBuffer(Ia))?vb=Lb.dtype:"constant"in Ia?(Pa=2,"number"===typeof Ia.constant?(nb=Ia.constant,fc=Ac=Sa=0):(nb=0<Ia.constant.length?Ia.constant[0]:0,fc=1<Ia.constant.length?
Ia.constant[1]:0,Ac=2<Ia.constant.length?Ia.constant[2]:0,Sa=3<Ia.constant.length?Ia.constant[3]:0)):(Lb=aa(Ia.buffer)?D.createStream(34962,Ia.buffer):D.getBuffer(Ia.buffer),vb="type"in Ia?ma[Ia.type]:Lb.dtype,lb=!!Ia.normalized,Zb=Ia.size|0,Na=Ia.offset|0,ub=Ia.stride|0,Mb=Ia.divisor|0);vc=X.location;cb=O[vc];if(1===Pa){cb.buffer||J.enableVertexAttribArray(vc);jc=Zb||4;if(cb.type!==vb||cb.size!==jc||cb.buffer!==Lb||cb.normalized!==lb||cb.offset!==Na||cb.stride!==ub)J.bindBuffer(34962,Lb.buffer),
J.vertexAttribPointer(vc,jc,vb,lb,ub,Na),cb.type=vb,cb.size=jc,cb.buffer=Lb,cb.normalized=lb,cb.offset=Na,cb.stride=ub;cb.divisor!==Mb&&(pa.vertexAttribDivisorANGLE(vc,Mb),cb.divisor=Mb)}else if(cb.buffer&&(J.disableVertexAttribArray(vc),cb.buffer=null),cb.x!==nb||cb.y!==fc||cb.z!==Ac||cb.w!==Sa)J.vertexAttrib4f(vc,nb,fc,Ac,Sa),cb.x=nb,cb.y=fc,cb.z=Ac,cb.w=Sa;qd=F.location;Wa=O[qd];Wa.buffer||J.enableVertexAttribArray(qd);if(5126!==Wa.type||1!==Wa.size||Wa.buffer!==e||!1!==Wa.normalized||0!==Wa.offset||
8!==Wa.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(qd,1,5126,!1,8,0),Wa.type=5126,Wa.size=1,Wa.buffer=e,Wa.normalized=!1,Wa.offset=0,Wa.stride=8;0!==Wa.divisor&&(pa.vertexAttribDivisorANGLE(qd,0),Wa.divisor=0);Mc=d.location;Ab=O[Mc];Ab.buffer||J.enableVertexAttribArray(Mc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==l||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(Mc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=l,Ab.normalized=
!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(pa.vertexAttribDivisorANGLE(Mc,0),Ab.divisor=0);Ya=k.scale;J.uniform2f(Cc.location,Ya[0],Ya[1]);Vb=k.translate;J.uniform2f(ea.location,Vb[0],Vb[1]);J.uniform1f(W.location,k.thickness);J.uniform1f(C.location,k.depth);uc=q.call(this,g,k,0);J.uniform4f(R.location,uc[0],uc[1],uc[2],uc[3]);J.uniform1f(t.location,k.miterLimit);Wb=c.call(this,g,k,0);J.uniform1f(a.location,Wb);J.uniform1f(x.location,k.dashLength);J.uniform1f(A.location,k.opacity);(Qb=k.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;J.uniform1i(Y.location,Kc.bind());(Rb=M.elements)?J.bindBuffer(34963,Rb.buffer.buffer):Aa.currentVAO&&(Rb=Ca.getElements(Aa.currentVAO.elements))&&J.bindBuffer(34963,Rb.buffer.buffer);pe=k.count;0<pe?Rb?pa.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),pe):pa.drawArraysInstancedANGLE(5,0,4,pe):0>pe&&(Rb?J.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):J.drawArrays(5,0,4));N.dirty=!0;Aa.setVAO(null);g.viewportWidth=xa;g.viewportHeight=
y;U&&(da.cpuTime+=performance.now()-T);Ea&&D.destroyStream(ba);Pc&&D.destroyStream(Wc);oc&&D.destroyStream(pc);Ob&&D.destroyStream(jb);rb&&D.destroyStream(Ka);Xa&&D.destroyStream(Lb);Kc.unbind()},scope:function(a,d,c){var f,k,r,m,h,p,I,q,b,E,t,u,na,x,A,sa,Ja,J,Da,O,Za,oa,fa,R,ga,C,L,F,va,K,Fa,Ca,Q,S,ka,Ta,W,X,ya,ea,ia,Hb,qa,Y,ta,ja,Aa,td,Cc,Z,ec,ab,qc,yb,db,Nb,bb,ob,Ua,ha,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,
ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd,xd,ue,jd,$a,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;f=a.viewport;k=f.x|0;r=f.y|0;m="width"in f?f.width|0:g.framebufferWidth-
k;h="height"in f?f.height|0:g.framebufferHeight-r;p=g.viewportWidth;g.viewportWidth=m;I=g.viewportHeight;g.viewportHeight=h;q=xa[0];xa[0]=k;b=xa[1];xa[1]=r;E=xa[2];xa[2]=m;t=xa[3];xa[3]=h;u=wa[0];wa[0]=0;na=wa[1];wa[1]=0;x=wa[2];wa[2]=0;A=wa[3];wa[3]=0;sa=P.blend_enable;P.blend_enable=!0;Ja=Ba[0];Ba[0]=32774;J=Ba[1];Ba[1]=32774;Da=pa[0];pa[0]=770;O=pa[1];pa[1]=771;Za=pa[2];pa[2]=773;oa=pa[3];pa[3]=1;fa=P.cull_enable;P.cull_enable=!0;R=P.cull_face;P.cull_face=1029;ga=G.call(this,g,a,c);C=P.depth_enable;
P.depth_enable=ga;L=a.viewport;F=L.x|0;va=L.y|0;K="width"in L?L.width|0:g.framebufferWidth-F;Fa="height"in L?L.height|0:g.framebufferHeight-va;Ca=Ea[0];Ea[0]=F;Q=Ea[1];Ea[1]=va;S=Ea[2];Ea[2]=K;ka=Ea[3];Ea[3]=Fa;Ta=P.scissor_enable;P.scissor_enable=!0;W=P.stencil_enable;P.stencil_enable=!1;if(X=N.profile)ya=performance.now(),da.count++;ea=M.offset;M.offset=0;ia=M.count;M.count=4;Hb=a.count;qa=M.instances;M.instances=Hb;Y=M.primitive;M.primitive=5;ta=a.dashLength;ja=ra[23];ra[23]=ta;Aa=a.dashTexture;
td=ra[24];ra[24]=Aa;Cc=a.depth;Z=ra[22];ra[22]=Cc;ec=a.id;ab=ra[31];ra[31]=ec;qc=a.miterLimit;yb=ra[32];ra[32]=qc;db=H.call(this,g,a,c);Nb=ra[33];ra[33]=db;bb=a.opacity;ob=ra[10];ra[10]=bb;Ua=g.pixelRatio;ha=ra[34];ra[34]=Ua;Ib=a.scale;Jb=ra[6];ra[6]=Ib;rc=a.scaleFract;Ob=ra[7];ra[7]=rc;jb=a.thickness;Gb=ra[21];ra[21]=jb;Db=a.translate;wb=ra[8];ra[8]=Db;hb=a.translateFract;Yb=ra[9];ra[9]=hb;Pb=B.call(this,g,a,c);qb=ra[3];ra[3]=Pb;V.buffer=a.colorBuffer;Ra=!1;Ub=null;zb=0;ic=!1;pb=ib=0;Ha=1;rb=0;Ka=
5126;kb=La=gb=fb=0;aa(V)?(Ra=!0,Ub=D.createStream(34962,V),Ka=Ub.dtype):(Ub=D.getBuffer(V))?Ka=Ub.dtype:"constant"in V?(Ha=2,"number"===typeof V.constant?(gb=V.constant,La=kb=fb=0):(gb=0<V.constant.length?V.constant[0]:0,La=1<V.constant.length?V.constant[1]:0,kb=2<V.constant.length?V.constant[2]:0,fb=3<V.constant.length?V.constant[3]:0)):(Ub=aa(V.buffer)?D.createStream(34962,V.buffer):D.getBuffer(V.buffer),Ka="type"in V?ma[V.type]:Ub.dtype,ic=!!V.normalized,pb=V.size|0,ib=V.offset|0,rb=V.stride|0,
zb=V.divisor|0);Va=U.buffer;U.buffer=Ub;tb=U.divisor;U.divisor=zb;sb=U.normalized;U.normalized=ic;Oa=U.offset;U.offset=ib;tc=U.size;U.size=pb;Qa=U.state;U.state=Ha;Kb=U.stride;U.stride=rb;Eb=U.type;U.type=Ka;Ma=U.w;U.w=fb;zd=U.x;U.x=gb;Xa=U.y;U.y=La;Lb=U.z;U.z=kb;ua.buffer=a.positionBuffer;Mb=!1;lb=null;Na=0;Zb=!1;ub=Pa=0;vb=1;Sa=0;nb=5126;cb=vc=Ac=fc=0;aa(ua)?(Mb=!0,lb=D.createStream(34962,ua),nb=lb.dtype):(lb=D.getBuffer(ua))?nb=lb.dtype:"constant"in ua?(vb=2,"number"===typeof ua.constant?(Ac=ua.constant,
vc=cb=fc=0):(Ac=0<ua.constant.length?ua.constant[0]:0,vc=1<ua.constant.length?ua.constant[1]:0,cb=2<ua.constant.length?ua.constant[2]:0,fc=3<ua.constant.length?ua.constant[3]:0)):(lb=aa(ua.buffer)?D.createStream(34962,ua.buffer):D.getBuffer(ua.buffer),nb="type"in ua?ma[ua.type]:lb.dtype,Zb=!!ua.normalized,ub=ua.size|0,Pa=ua.offset|0,Sa=ua.stride|0,Na=ua.divisor|0);jc=n.buffer;n.buffer=lb;qd=n.divisor;n.divisor=Na;Wa=n.normalized;n.normalized=Zb;Mc=n.offset;n.offset=Pa;Ab=n.size;n.size=ub;Ya=n.state;
n.state=vb;Vb=n.stride;n.stride=Sa;uc=n.type;n.type=nb;Wb=n.w;n.w=fc;Qb=n.x;n.x=Ac;Kc=n.y;n.y=vc;Rb=n.z;n.z=cb;Ia.buffer=a.colorBuffer;pe=!1;Fc=null;sd=0;Nc=!1;ud=Yc=0;nc=1;wc=0;gc=5126;Xb=Tb=sc=eb=0;aa(Ia)?(pe=!0,Fc=D.createStream(34962,Ia),gc=Fc.dtype):(Fc=D.getBuffer(Ia))?gc=Fc.dtype:"constant"in Ia?(nc=2,"number"===typeof Ia.constant?(sc=Ia.constant,Tb=Xb=eb=0):(sc=0<Ia.constant.length?Ia.constant[0]:0,Tb=1<Ia.constant.length?Ia.constant[1]:0,Xb=2<Ia.constant.length?Ia.constant[2]:0,eb=3<Ia.constant.length?
Ia.constant[3]:0)):(Fc=aa(Ia.buffer)?D.createStream(34962,Ia.buffer):D.getBuffer(Ia.buffer),gc="type"in Ia?ma[Ia.type]:Fc.dtype,Nc=!!Ia.normalized,ud=Ia.size|0,Yc=Ia.offset|0,wc=Ia.stride|0,sd=Ia.divisor|0);cc=v.buffer;v.buffer=Fc;hc=v.divisor;v.divisor=sd;yc=v.normalized;v.normalized=Nc;Bc=v.offset;v.offset=Yc;cd=v.size;v.size=ud;Qc=v.state;v.state=nc;Rc=v.stride;v.stride=wc;Sc=v.type;v.type=gc;Zc=v.w;v.w=eb;od=v.x;v.x=sc;dd=v.y;v.y=Tb;$c=v.z;v.z=Xb;za.buffer=a.positionBuffer;kc=!1;bc=null;ad=0;
Uc=!1;zc=ed=0;id=1;Nd=0;xd=5126;Od=$a=jd=ue=0;aa(za)?(kc=!0,bc=D.createStream(34962,za),xd=bc.dtype):(bc=D.getBuffer(za))?xd=bc.dtype:"constant"in za?(id=2,"number"===typeof za.constant?(jd=za.constant,$a=Od=ue=0):(jd=0<za.constant.length?za.constant[0]:0,$a=1<za.constant.length?za.constant[1]:0,Od=2<za.constant.length?za.constant[2]:0,ue=3<za.constant.length?za.constant[3]:0)):(bc=aa(za.buffer)?D.createStream(34962,za.buffer):D.getBuffer(za.buffer),xd="type"in za?ma[za.type]:bc.dtype,Uc=!!za.normalized,
zc=za.size|0,ed=za.offset|0,Nd=za.stride|0,ad=za.divisor|0);ge=y.buffer;y.buffer=bc;ce=y.divisor;y.divisor=ad;Pd=y.normalized;y.normalized=Uc;Jd=y.offset;y.offset=ed;Hd=y.size;y.size=zc;md=y.state;y.state=id;Tc=y.stride;y.stride=Nd;vd=y.type;y.type=xd;rd=y.w;y.w=ue;kd=y.x;y.x=jd;wd=y.y;y.y=$a;Cd=y.z;y.z=Od;Fd=ba.buffer;ba.buffer=e;je=ba.divisor;ba.divisor=0;ye=ba.normalized;ba.normalized=!1;Fe=ba.offset;ba.offset=0;le=ba.size;ba.size=0;ke=ba.state;ba.state=1;he=ba.stride;ba.stride=8;ve=ba.type;ba.type=
5126;de=ba.w;ba.w=0;me=ba.x;ba.x=0;Oc=ba.y;ba.y=0;gd=ba.z;ba.z=0;we=w.buffer;w.buffer=l;qe=w.divisor;w.divisor=0;Kd=w.normalized;w.normalized=!1;Qd=w.offset;w.offset=4;Sd=w.size;w.size=0;Td=w.state;w.state=1;ne=w.stride;w.stride=8;Ge=w.type;w.type=5126;Be=w.w;w.w=0;se=w.x;w.x=0;Se=w.y;w.y=0;Te=w.z;w.z=0;mb.buffer=a.positionBuffer;Oe=!1;xe=null;He=0;Je=!1;Le=Ke=0;Ie=1;Ld=0;Xd=5126;Id=Me=ee=be=0;aa(mb)?(Oe=!0,xe=D.createStream(34962,mb),Xd=xe.dtype):(xe=D.getBuffer(mb))?Xd=xe.dtype:"constant"in mb?
(Ie=2,"number"===typeof mb.constant?(ee=mb.constant,Me=Id=be=0):(ee=0<mb.constant.length?mb.constant[0]:0,Me=1<mb.constant.length?mb.constant[1]:0,Id=2<mb.constant.length?mb.constant[2]:0,be=3<mb.constant.length?mb.constant[3]:0)):(xe=aa(mb.buffer)?D.createStream(34962,mb.buffer):D.getBuffer(mb.buffer),Xd="type"in mb?ma[mb.type]:xe.dtype,Je=!!mb.normalized,Le=mb.size|0,Ke=mb.offset|0,Ld=mb.stride|0,He=mb.divisor|0);Ud=T.buffer;T.buffer=xe;De=T.divisor;T.divisor=He;Ne=T.normalized;T.normalized=Je;
hf=T.offset;T.offset=Ke;bf=T.size;T.size=Le;Ue=T.state;T.state=Ie;Pe=T.stride;T.stride=Ld;af=T.type;T.type=Xd;Ze=T.w;T.w=be;Ve=T.x;T.x=ee;We=T.y;T.y=Me;Vd=T.z;T.z=Id;ca.buffer=a.positionBuffer;ae=!1;Xe=null;jf=0;nf=!1;kf=ef=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;aa(ca)?(ae=!0,Xe=D.createStream(34962,ca),rf=Xe.dtype):(Xe=D.getBuffer(ca))?rf=Xe.dtype:"constant"in ca?(lf=2,"number"===typeof ca.constant?(sf=ca.constant,Bf=Cf=of=0):(sf=0<ca.constant.length?ca.constant[0]:0,Bf=1<ca.constant.length?ca.constant[1]:
0,Cf=2<ca.constant.length?ca.constant[2]:0,of=3<ca.constant.length?ca.constant[3]:0)):(Xe=aa(ca.buffer)?D.createStream(34962,ca.buffer):D.getBuffer(ca.buffer),rf="type"in ca?ma[ca.type]:Xe.dtype,nf=!!ca.normalized,kf=ca.size|0,ef=ca.offset|0,mf=ca.stride|0,jf=ca.divisor|0);Qe=z.buffer;z.buffer=Xe;Ee=z.divisor;z.divisor=jf;pf=z.normalized;z.normalized=nf;qf=z.offset;z.offset=ef;Df=z.size;z.size=kf;Gf=z.state;z.state=lf;Af=z.stride;z.stride=mf;Ef=z.type;z.type=rf;Ff=z.w;z.w=of;wf=z.x;z.x=sf;xf=z.y;
z.y=Bf;vf=z.z;z.z=Cf;yf=la.vert;la.vert=36;zf=la.frag;la.frag=35;N.dirty=!0;d(g,a,c);g.viewportWidth=p;g.viewportHeight=I;xa[0]=q;xa[1]=b;xa[2]=E;xa[3]=t;wa[0]=u;wa[1]=na;wa[2]=x;wa[3]=A;P.blend_enable=sa;Ba[0]=Ja;Ba[1]=J;pa[0]=Da;pa[1]=O;pa[2]=Za;pa[3]=oa;P.cull_enable=fa;P.cull_face=R;P.depth_enable=C;Ea[0]=Ca;Ea[1]=Q;Ea[2]=S;Ea[3]=ka;P.scissor_enable=Ta;P.stencil_enable=W;X&&(da.cpuTime+=performance.now()-ya);M.offset=ea;M.count=ia;M.instances=qa;M.primitive=Y;ra[23]=ja;ra[24]=td;ra[22]=Z;ra[31]=
ab;ra[32]=yb;ra[33]=Nb;ra[10]=ob;ra[34]=ha;ra[6]=Jb;ra[7]=Ob;ra[21]=Gb;ra[8]=wb;ra[9]=Yb;ra[3]=qb;Ra&&D.destroyStream(Ub);U.buffer=Va;U.divisor=tb;U.normalized=sb;U.offset=Oa;U.size=tc;U.state=Qa;U.stride=Kb;U.type=Eb;U.w=Ma;U.x=zd;U.y=Xa;U.z=Lb;Mb&&D.destroyStream(lb);n.buffer=jc;n.divisor=qd;n.normalized=Wa;n.offset=Mc;n.size=Ab;n.state=Ya;n.stride=Vb;n.type=uc;n.w=Wb;n.x=Qb;n.y=Kc;n.z=Rb;pe&&D.destroyStream(Fc);v.buffer=cc;v.divisor=hc;v.normalized=yc;v.offset=Bc;v.size=cd;v.state=Qc;v.stride=
Rc;v.type=Sc;v.w=Zc;v.x=od;v.y=dd;v.z=$c;kc&&D.destroyStream(bc);y.buffer=ge;y.divisor=ce;y.normalized=Pd;y.offset=Jd;y.size=Hd;y.state=md;y.stride=Tc;y.type=vd;y.w=rd;y.x=kd;y.y=wd;y.z=Cd;ba.buffer=Fd;ba.divisor=je;ba.normalized=ye;ba.offset=Fe;ba.size=le;ba.state=ke;ba.stride=he;ba.type=ve;ba.w=de;ba.x=me;ba.y=Oc;ba.z=gd;w.buffer=we;w.divisor=qe;w.normalized=Kd;w.offset=Qd;w.size=Sd;w.state=Td;w.stride=ne;w.type=Ge;w.w=Be;w.x=se;w.y=Se;w.z=Te;Oe&&D.destroyStream(xe);T.buffer=Ud;T.divisor=De;T.normalized=
Ne;T.offset=hf;T.size=bf;T.state=Ue;T.stride=Pe;T.type=af;T.w=Ze;T.x=Ve;T.y=We;T.z=Vd;ae&&D.destroyStream(Xe);z.buffer=Qe;z.divisor=Ee;z.normalized=pf;z.offset=qf;z.size=Df;z.state=Gf;z.stride=Af;z.type=Ef;z.w=Ff;z.x=wf;z.y=xf;z.z=vf;la.vert=yf;la.frag=zf;N.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z){var Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Cc,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,
ka,pa;Q=b.attributes;ia=b.buffer;k=b.context;u=b.current;S=b.draw;h=b.elements;X=b.extensions;f=b.framebuffer;x=b.gl;Y=b.isBufferArgs;C=b.next;F=b.shader;d=b.uniforms;t=b.vao;a=C.blend_color;ta=u.blend_color;A=C.blend_equation;ja=u.blend_equation;Cc=C.blend_func;W=u.blend_func;ea=C.colorMask;R=u.colorMask;O=C.depth_range;D=u.depth_range;g=C.polygonOffset_offset;N=u.polygonOffset_offset;M=C.sample_coverage;Ca=u.sample_coverage;qa=C.scissor_box;m=u.scissor_box;J=C.stencil_func;aa=u.stencil_func;P=C.stencil_opBack;
la=u.stencil_opBack;ra=C.stencil_opFront;Aa=u.stencil_opFront;wa=C.viewport;fa=u.viewport;Ba={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,d){var c,l,q,r,p,b;c=f.next;c!==f.cur&&(c?x.bindFramebuffer(36160,c.framebuffer):x.bindFramebuffer(36160,null),f.cur=c);if(u.dirty){var A,e,L,F,ga,I,sa,Da,oa,xa,K,ma,V,wa,qa,za,Cc,ca,Z,$b,Ga,ac,Sb,ha,Dd,re,Wd,ze,Ad,Rd,oe,ie;A=C.dither;A!==u.dither&&
(A?x.enable(3024):x.disable(3024),u.dither=A);e=C.depth_func;e!==u.depth_func&&(x.depthFunc(e),u.depth_func=e);L=O[0];F=O[1];if(L!==D[0]||F!==D[1])x.depthRange(L,F),D[0]=L,D[1]=F;ga=C.depth_mask;ga!==u.depth_mask&&(x.depthMask(ga),u.depth_mask=ga);I=ea[0];sa=ea[1];Da=ea[2];oa=ea[3];if(I!==R[0]||sa!==R[1]||Da!==R[2]||oa!==R[3])x.colorMask(I,sa,Da,oa),R[0]=I,R[1]=sa,R[2]=Da,R[3]=oa;xa=C.cull_enable;xa!==u.cull_enable&&(xa?x.enable(2884):x.disable(2884),u.cull_enable=xa);K=C.cull_face;K!==u.cull_face&&
(x.cullFace(K),u.cull_face=K);ma=C.frontFace;ma!==u.frontFace&&(x.frontFace(ma),u.frontFace=ma);V=C.lineWidth;V!==u.lineWidth&&(x.lineWidth(V),u.lineWidth=V);wa=C.polygonOffset_enable;wa!==u.polygonOffset_enable&&(wa?x.enable(32823):x.disable(32823),u.polygonOffset_enable=wa);qa=g[0];za=g[1];if(qa!==N[0]||za!==N[1])x.polygonOffset(qa,za),N[0]=qa,N[1]=za;Cc=C.sample_alpha;Cc!==u.sample_alpha&&(Cc?x.enable(32926):x.disable(32926),u.sample_alpha=Cc);ca=C.sample_enable;ca!==u.sample_enable&&(ca?x.enable(32928):
x.disable(32928),u.sample_enable=ca);Z=M[0];$b=M[1];if(Z!==Ca[0]||$b!==Ca[1])x.sampleCoverage(Z,$b),Ca[0]=Z,Ca[1]=$b;Ga=C.stencil_mask;Ga!==u.stencil_mask&&(x.stencilMask(Ga),u.stencil_mask=Ga);ac=J[0];Sb=J[1];ha=J[2];if(ac!==aa[0]||Sb!==aa[1]||ha!==aa[2])x.stencilFunc(ac,Sb,ha),aa[0]=ac,aa[1]=Sb,aa[2]=ha;Dd=ra[0];re=ra[1];Wd=ra[2];ze=ra[3];if(Dd!==Aa[0]||re!==Aa[1]||Wd!==Aa[2]||ze!==Aa[3])x.stencilOpSeparate(Dd,re,Wd,ze),Aa[0]=Dd,Aa[1]=re,Aa[2]=Wd,Aa[3]=ze;Ad=P[0];Rd=P[1];oe=P[2];ie=P[3];if(Ad!==
la[0]||Rd!==la[1]||oe!==la[2]||ie!==la[3])x.stencilOpSeparate(Ad,Rd,oe,ie),la[0]=Ad,la[1]=Rd,la[2]=oe,la[3]=ie}x.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;x.enable(3042);u.blend_enable=!0;x.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;x.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;x.disable(2929);u.depth_enable=!1;x.enable(3089);u.scissor_enable=!0;x.disable(2960);u.stencil_enable=!1;if(l=u.profile)q=performance.now(),da.count+=d;x.useProgram(G.program);
r=X.angle_instanced_arrays;var Ed;t.setVAO(null);Ed=S.instances;for(p=0;p<d;++p){b=a[p];var Yd,fe,Md,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb;Yd=b.viewport;fe=Yd.x|0;Md=Yd.y|0;Ye="width"in Yd?Yd.width|0:k.framebufferWidth-fe;$e="height"in Yd?Yd.height|0:k.framebufferHeight-Md;Re=k.viewportWidth;k.viewportWidth=
Ye;Gd=k.viewportHeight;k.viewportHeight=$e;x.viewport(fe,Md,Ye,$e);fa[0]=fe;fa[1]=Md;fa[2]=Ye;fa[3]=$e;Ae=b.viewport;te=Ae.x|0;Zd=Ae.y|0;Bd="width"in Ae?Ae.width|0:k.framebufferWidth-te;$d="height"in Ae?Ae.height|0:k.framebufferHeight-Zd;x.scissor(te,Zd,Bd,$d);m[0]=te;m[1]=Zd;m[2]=Bd;m[3]=$d;ka.buffer=b.positionBuffer;ld=!1;bd=null;pd=0;Lc=!1;Gc=nd=0;fd=1;Pc=0;Wc=5126;xb=Dc=Fb=Bb=0;Y(ka)?(ld=!0,bd=ia.createStream(34962,ka),Wc=bd.dtype):(bd=ia.getBuffer(ka))?Wc=bd.dtype:"constant"in ka?(fd=2,"number"===
typeof ka.constant?(Fb=ka.constant,Dc=xb=Bb=0):(Fb=0<ka.constant.length?ka.constant[0]:0,Dc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Bb=3<ka.constant.length?ka.constant[3]:0)):(bd=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),Wc="type"in ka?Ba[ka.type]:bd.dtype,Lc=!!ka.normalized,Gc=ka.size|0,nd=ka.offset|0,Pc=ka.stride|0,pd=ka.divisor|0);xc=v.location;Cb=Q[xc];if(1===fd){Cb.buffer||x.enableVertexAttribArray(xc);Jc=Gc||2;if(Cb.type!==Wc||
Cb.size!==Jc||Cb.buffer!==bd||Cb.normalized!==Lc||Cb.offset!==nd||Cb.stride!==Pc)x.bindBuffer(34962,bd.buffer),x.vertexAttribPointer(xc,Jc,Wc,Lc,Pc,nd),Cb.type=Wc,Cb.size=Jc,Cb.buffer=bd,Cb.normalized=Lc,Cb.offset=nd,Cb.stride=Pc;Cb.divisor!==pd&&(r.vertexAttribDivisorANGLE(xc,pd),Cb.divisor=pd)}else if(Cb.buffer&&(x.disableVertexAttribArray(xc),Cb.buffer=null),Cb.x!==Fb||Cb.y!==Dc||Cb.z!==xb||Cb.w!==Bb)x.vertexAttrib4f(xc,Fb,Dc,xb,Bb),Cb.x=Fb,Cb.y=Dc,Cb.z=xb,Cb.w=Bb;pa.buffer=b.positionFractBuffer;
lc=!1;Hc=null;Xc=0;Vc=!1;dc=Ec=0;Ic=1;oc=0;pc=5126;qc=ab=ec=mc=0;Y(pa)?(lc=!0,Hc=ia.createStream(34962,pa),pc=Hc.dtype):(Hc=ia.getBuffer(pa))?pc=Hc.dtype:"constant"in pa?(Ic=2,"number"===typeof pa.constant?(ec=pa.constant,ab=qc=mc=0):(ec=0<pa.constant.length?pa.constant[0]:0,ab=1<pa.constant.length?pa.constant[1]:0,qc=2<pa.constant.length?pa.constant[2]:0,mc=3<pa.constant.length?pa.constant[3]:0)):(Hc=Y(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),pc="type"in pa?Ba[pa.type]:
Hc.dtype,Vc=!!pa.normalized,dc=pa.size|0,Ec=pa.offset|0,oc=pa.stride|0,Xc=pa.divisor|0);yb=y.location;db=Q[yb];if(1===Ic){db.buffer||x.enableVertexAttribArray(yb);Nb=dc||2;if(db.type!==pc||db.size!==Nb||db.buffer!==Hc||db.normalized!==Vc||db.offset!==Ec||db.stride!==oc)x.bindBuffer(34962,Hc.buffer),x.vertexAttribPointer(yb,Nb,pc,Vc,oc,Ec),db.type=pc,db.size=Nb,db.buffer=Hc,db.normalized=Vc,db.offset=Ec,db.stride=oc;db.divisor!==Xc&&(r.vertexAttribDivisorANGLE(yb,Xc),db.divisor=Xc)}else if(db.buffer&&
(x.disableVertexAttribArray(yb),db.buffer=null),db.x!==ec||db.y!==ab||db.z!==qc||db.w!==mc)x.vertexAttrib4f(yb,ec,ab,qc,mc),db.x=ec,db.y=ab,db.z=qc,db.w=mc;bb=b.fill;ob=bb[0];hd=bb[1];Jb=bb[2];Ob=bb[3];p&&Ua===ob&&Ib===hd&&rc===Jb&&jb===Ob||(Ua=ob,Ib=hd,rc=Jb,jb=Ob,x.uniform4f(B.location,ob,hd,Jb,Ob));Gb=b.scale;Db=Gb[0];hb=Gb[1];p&&wb===Db&&Yb===hb||(wb=Db,Yb=hb,x.uniform2f(ba.location,Db,hb));Pb=b.scaleFract;qb=Pb[0];Ub=Pb[1];p&&Ra===qb&&zb===Ub||(Ra=qb,zb=Ub,x.uniform2f(w.location,qb,Ub));ic=b.translate;
ib=ic[0];Ha=ic[1];p&&pb===ib&&rb===Ha||(pb=ib,rb=Ha,x.uniform2f(T.location,ib,Ha));Ka=b.translateFract;fb=Ka[0];La=Ka[1];p&&gb===fb&&kb===La||(gb=fb,kb=La,x.uniform2f(z.location,fb,La));Va=b.id;p&&tb===Va||(tb=Va,x.uniform1f(U.location,Va));sb=b.opacity;p&&Oa===sb||(Oa=sb,x.uniform1f(n.location,sb));tc=H.call(this,k,b,p);Qa=null;(Qa=(Kb=Y(tc))?h.createStream(tc):h.getElements(tc))&&x.bindBuffer(34963,Qa.buffer.buffer);if(Eb=Qa?Qa.vertCount:-1)0<Ed?Qa?r.drawElementsInstancedANGLE(4,Eb,Qa.type,0<<(Qa.type-
5121>>1),Ed):r.drawArraysInstancedANGLE(4,0,Eb,Ed):0>Ed&&(Qa?x.drawElements(4,Eb,Qa.type,0<<(Qa.type-5121>>1)):x.drawArrays(4,0,Eb)),k.viewportWidth=Re,k.viewportHeight=Gd,ld&&ia.destroyStream(bd),lc&&ia.destroyStream(Hc),Kb&&h.destroyStream(Qa)}u.dirty=!0;t.setVAO(null);l&&(da.cpuTime+=performance.now()-q)},draw:function(a){var d,c,l,b,r,p,q,A,e,F,H,ga,I,sa,Da,oa,xa,wa,ma,V,G,qa;d=f.next;d!==f.cur&&(d?x.bindFramebuffer(36160,d.framebuffer):x.bindFramebuffer(36160,null),f.cur=d);if(u.dirty){d=C.dither;
d!==u.dither&&(d?x.enable(3024):x.disable(3024),u.dither=d);d=C.depth_func;d!==u.depth_func&&(x.depthFunc(d),u.depth_func=d);d=O[0];p=O[1];if(d!==D[0]||p!==D[1])x.depthRange(d,p),D[0]=d,D[1]=p;d=C.depth_mask;d!==u.depth_mask&&(x.depthMask(d),u.depth_mask=d);d=ea[0];p=ea[1];c=ea[2];l=ea[3];if(d!==R[0]||p!==R[1]||c!==R[2]||l!==R[3])x.colorMask(d,p,c,l),R[0]=d,R[1]=p,R[2]=c,R[3]=l;d=C.cull_enable;d!==u.cull_enable&&(d?x.enable(2884):x.disable(2884),u.cull_enable=d);d=C.cull_face;d!==u.cull_face&&(x.cullFace(d),
u.cull_face=d);d=C.frontFace;d!==u.frontFace&&(x.frontFace(d),u.frontFace=d);d=C.lineWidth;d!==u.lineWidth&&(x.lineWidth(d),u.lineWidth=d);d=C.polygonOffset_enable;d!==u.polygonOffset_enable&&(d?x.enable(32823):x.disable(32823),u.polygonOffset_enable=d);d=g[0];p=g[1];if(d!==N[0]||p!==N[1])x.polygonOffset(d,p),N[0]=d,N[1]=p;d=C.sample_alpha;d!==u.sample_alpha&&(d?x.enable(32926):x.disable(32926),u.sample_alpha=d);d=C.sample_enable;d!==u.sample_enable&&(d?x.enable(32928):x.disable(32928),u.sample_enable=
d);d=M[0];p=M[1];if(d!==Ca[0]||p!==Ca[1])x.sampleCoverage(d,p),Ca[0]=d,Ca[1]=p;d=C.stencil_mask;d!==u.stencil_mask&&(x.stencilMask(d),u.stencil_mask=d);d=J[0];p=J[1];c=J[2];if(d!==aa[0]||p!==aa[1]||c!==aa[2])x.stencilFunc(d,p,c),aa[0]=d,aa[1]=p,aa[2]=c;d=ra[0];p=ra[1];c=ra[2];l=ra[3];if(d!==Aa[0]||p!==Aa[1]||c!==Aa[2]||l!==Aa[3])x.stencilOpSeparate(d,p,c,l),Aa[0]=d,Aa[1]=p,Aa[2]=c,Aa[3]=l;d=P[0];p=P[1];c=P[2];l=P[3];if(d!==la[0]||p!==la[1]||c!==la[2]||l!==la[3])x.stencilOpSeparate(d,p,c,l),la[0]=
d,la[1]=p,la[2]=c,la[3]=l}d=a.viewport;c=d.x|0;l=d.y|0;b="width"in d?d.width|0:k.framebufferWidth-c;r="height"in d?d.height|0:k.framebufferHeight-l;d=k.viewportWidth;k.viewportWidth=b;p=k.viewportHeight;k.viewportHeight=r;x.viewport(c,l,b,r);fa[0]=c;fa[1]=l;fa[2]=b;fa[3]=r;x.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;x.enable(3042);u.blend_enable=!0;x.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;x.blendFuncSeparate(770,771,773,1);W[0]=770;W[1]=771;W[2]=773;W[3]=1;x.disable(2929);
u.depth_enable=!1;r=a.viewport;c=r.x|0;l=r.y|0;b="width"in r?r.width|0:k.framebufferWidth-c;r="height"in r?r.height|0:k.framebufferHeight-l;x.scissor(c,l,b,r);m[0]=c;m[1]=l;m[2]=b;m[3]=r;x.enable(3089);u.scissor_enable=!0;x.disable(2960);u.stencil_enable=!1;if(c=u.profile)q=performance.now(),da.count++;x.useProgram(K.program);l=X.angle_instanced_arrays;t.setVAO(null);ka.buffer=a.positionBuffer;b=!1;A=0;e=!1;H=F=0;ga=1;I=0;sa=5126;wa=xa=oa=Da=0;Y(ka)?(b=!0,r=ia.createStream(34962,ka),sa=r.dtype):(r=
ia.getBuffer(ka))?sa=r.dtype:"constant"in ka?(ga=2,"number"===typeof ka.constant?(oa=ka.constant,xa=wa=Da=0):(oa=0<ka.constant.length?ka.constant[0]:0,xa=1<ka.constant.length?ka.constant[1]:0,wa=2<ka.constant.length?ka.constant[2]:0,Da=3<ka.constant.length?ka.constant[3]:0)):(r=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),sa="type"in ka?Ba[ka.type]:r.dtype,e=!!ka.normalized,H=ka.size|0,F=ka.offset|0,I=ka.stride|0,A=ka.divisor|0);ma=v.location;V=Q[ma];if(1===ga){V.buffer||
x.enableVertexAttribArray(ma);H=H||2;if(V.type!==sa||V.size!==H||V.buffer!==r||V.normalized!==e||V.offset!==F||V.stride!==I)x.bindBuffer(34962,r.buffer),x.vertexAttribPointer(ma,H,sa,e,I,F),V.type=sa,V.size=H,V.buffer=r,V.normalized=e,V.offset=F,V.stride=I;V.divisor!==A&&(l.vertexAttribDivisorANGLE(ma,A),V.divisor=A)}else if(V.buffer&&(x.disableVertexAttribArray(ma),V.buffer=null),V.x!==oa||V.y!==xa||V.z!==wa||V.w!==Da)x.vertexAttrib4f(ma,oa,xa,wa,Da),V.x=oa,V.y=xa,V.z=wa,V.w=Da;pa.buffer=a.positionFractBuffer;
A=!1;F=0;I=!1;Da=sa=0;oa=1;ma=0;V=5126;qa=G=wa=xa=0;Y(pa)?(A=!0,e=ia.createStream(34962,pa),V=e.dtype):(e=ia.getBuffer(pa))?V=e.dtype:"constant"in pa?(oa=2,"number"===typeof pa.constant?(wa=pa.constant,G=qa=xa=0):(wa=0<pa.constant.length?pa.constant[0]:0,G=1<pa.constant.length?pa.constant[1]:0,qa=2<pa.constant.length?pa.constant[2]:0,xa=3<pa.constant.length?pa.constant[3]:0)):(e=Y(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),V="type"in pa?Ba[pa.type]:e.dtype,I=!!pa.normalized,
Da=pa.size|0,sa=pa.offset|0,ma=pa.stride|0,F=pa.divisor|0);H=y.location;ga=Q[H];if(1===oa){ga.buffer||x.enableVertexAttribArray(H);Da=Da||2;if(ga.type!==V||ga.size!==Da||ga.buffer!==e||ga.normalized!==I||ga.offset!==sa||ga.stride!==ma)x.bindBuffer(34962,e.buffer),x.vertexAttribPointer(H,Da,V,I,ma,sa),ga.type=V,ga.size=Da,ga.buffer=e,ga.normalized=I,ga.offset=sa,ga.stride=ma;ga.divisor!==F&&(l.vertexAttribDivisorANGLE(H,F),ga.divisor=F)}else if(ga.buffer&&(x.disableVertexAttribArray(H),ga.buffer=null),
ga.x!==wa||ga.y!==G||ga.z!==qa||ga.w!==xa)x.vertexAttrib4f(H,wa,G,qa,xa),ga.x=wa,ga.y=G,ga.z=qa,ga.w=xa;F=a.fill;x.uniform4f(B.location,F[0],F[1],F[2],F[3]);F=a.scale;x.uniform2f(ba.location,F[0],F[1]);F=a.scaleFract;x.uniform2f(w.location,F[0],F[1]);F=a.translate;x.uniform2f(T.location,F[0],F[1]);F=a.translateFract;x.uniform2f(z.location,F[0],F[1]);x.uniform1f(U.location,a.id);x.uniform1f(n.location,a.opacity);F=L.call(this,k,a,0);(F=(a=Y(F))?h.createStream(F):h.getElements(F))&&x.bindBuffer(34963,
F.buffer.buffer);if(I=F?F.vertCount:-1)sa=S.instances,0<sa?F?l.drawElementsInstancedANGLE(4,I,F.type,0<<(F.type-5121>>1),sa):l.drawArraysInstancedANGLE(4,0,I,sa):0>sa&&(F?x.drawElements(4,I,F.type,0<<(F.type-5121>>1)):x.drawArrays(4,0,I)),u.dirty=!0,t.setVAO(null),k.viewportWidth=d,k.viewportHeight=p,c&&(da.cpuTime+=performance.now()-q),b&&ia.destroyStream(r),A&&ia.destroyStream(e),a&&h.destroyStream(F)},scope:function(g,f,m){var b,t,r,p,E,x,J,w,O,P,I,sa,Da,D,fa,R,L,v,M,n,z,aa,N,H,y,K,ra,Ca,G,Q,B,
U,T,W,X,ea,ba,la,ta,ja,Aa,Z,ha,Re,Gd,Ae,te,Zd,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb;b=g.viewport;t=b.x|0;r=b.y|0;p="width"in b?b.width|0:k.framebufferWidth-t;E="height"in b?b.height|0:k.framebufferHeight-r;x=k.viewportWidth;k.viewportWidth=p;J=k.viewportHeight;k.viewportHeight=E;w=wa[0];wa[0]=t;O=wa[1];wa[1]=r;P=wa[2];wa[2]=p;I=wa[3];wa[3]=
E;sa=a[0];a[0]=0;Da=a[1];a[1]=0;D=a[2];a[2]=0;fa=a[3];a[3]=0;R=C.blend_enable;C.blend_enable=!0;L=A[0];A[0]=32774;v=A[1];A[1]=32774;M=Cc[0];Cc[0]=770;n=Cc[1];Cc[1]=771;z=Cc[2];Cc[2]=773;aa=Cc[3];Cc[3]=1;N=C.depth_enable;C.depth_enable=!1;H=g.viewport;y=H.x|0;K=H.y|0;ra="width"in H?H.width|0:k.framebufferWidth-y;Ca="height"in H?H.height|0:k.framebufferHeight-K;G=qa[0];qa[0]=y;Q=qa[1];qa[1]=K;B=qa[2];qa[2]=ra;U=qa[3];qa[3]=Ca;T=C.scissor_enable;C.scissor_enable=!0;W=C.stencil_enable;C.stencil_enable=
!1;if(X=u.profile)ea=performance.now(),da.count++;ba=e.call(this,k,g,m);la=null;la=(ta=Y(ba))?h.createStream(ba):h.getElements(ba);ja=S.elements;S.elements=la;Aa=S.offset;S.offset=0;Z=la?la.vertCount:-1;ha=S.count;S.count=Z;Re=S.primitive;S.primitive=4;Gd=g.fill;Ae=d[14];d[14]=Gd;te=g.id;Zd=d[31];d[31]=te;Bd=g.opacity;$d=d[10];d[10]=Bd;ld=k.pixelRatio;bd=d[34];d[34]=ld;pd=g.scale;Lc=d[6];d[6]=pd;nd=g.scaleFract;Gc=d[7];d[7]=nd;fd=g.translate;Pc=d[8];d[8]=fd;Wc=g.translateFract;Bb=d[9];d[9]=Wc;Fb=
l.call(this,k,g,m);Dc=d[3];d[3]=Fb;ka.buffer=g.positionBuffer;xb=!1;xc=null;Cb=0;Jc=!1;Hc=lc=0;Xc=1;Vc=0;Ec=5126;pc=oc=Ic=dc=0;Y(ka)?(xb=!0,xc=ia.createStream(34962,ka),Ec=xc.dtype):(xc=ia.getBuffer(ka))?Ec=xc.dtype:"constant"in ka?(Xc=2,"number"===typeof ka.constant?(Ic=ka.constant,oc=pc=dc=0):(Ic=0<ka.constant.length?ka.constant[0]:0,oc=1<ka.constant.length?ka.constant[1]:0,pc=2<ka.constant.length?ka.constant[2]:0,dc=3<ka.constant.length?ka.constant[3]:0)):(xc=Y(ka.buffer)?ia.createStream(34962,
ka.buffer):ia.getBuffer(ka.buffer),Ec="type"in ka?Ba[ka.type]:xc.dtype,Jc=!!ka.normalized,Hc=ka.size|0,lc=ka.offset|0,Vc=ka.stride|0,Cb=ka.divisor|0);mc=q.buffer;q.buffer=xc;ec=q.divisor;q.divisor=Cb;ab=q.normalized;q.normalized=Jc;qc=q.offset;q.offset=lc;yb=q.size;q.size=Hc;db=q.state;q.state=Xc;Nb=q.stride;q.stride=Vc;bb=q.type;q.type=Ec;ob=q.w;q.w=dc;Ua=q.x;q.x=Ic;hd=q.y;q.y=oc;Ib=q.z;q.z=pc;pa.buffer=g.positionFractBuffer;Jb=!1;rc=null;Ob=0;jb=!1;Db=Gb=0;wb=1;hb=0;Yb=5126;Ub=Ra=qb=Pb=0;Y(pa)?
(Jb=!0,rc=ia.createStream(34962,pa),Yb=rc.dtype):(rc=ia.getBuffer(pa))?Yb=rc.dtype:"constant"in pa?(wb=2,"number"===typeof pa.constant?(qb=pa.constant,Ra=Ub=Pb=0):(qb=0<pa.constant.length?pa.constant[0]:0,Ra=1<pa.constant.length?pa.constant[1]:0,Ub=2<pa.constant.length?pa.constant[2]:0,Pb=3<pa.constant.length?pa.constant[3]:0)):(rc=Y(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),Yb="type"in pa?Ba[pa.type]:rc.dtype,jb=!!pa.normalized,Db=pa.size|0,Gb=pa.offset|0,hb=pa.stride|0,
Ob=pa.divisor|0);zb=c.buffer;c.buffer=rc;ic=c.divisor;c.divisor=Ob;ib=c.normalized;c.normalized=jb;pb=c.offset;c.offset=Gb;Ha=c.size;c.size=Db;rb=c.state;c.state=wb;Ka=c.stride;c.stride=hb;fb=c.type;c.type=Yb;gb=c.w;c.w=Pb;La=c.x;c.x=qb;kb=c.y;c.y=Ra;Va=c.z;c.z=Ub;tb=F.vert;F.vert=42;sb=F.frag;F.frag=41;u.dirty=!0;f(k,g,m);k.viewportWidth=x;k.viewportHeight=J;wa[0]=w;wa[1]=O;wa[2]=P;wa[3]=I;a[0]=sa;a[1]=Da;a[2]=D;a[3]=fa;C.blend_enable=R;A[0]=L;A[1]=v;Cc[0]=M;Cc[1]=n;Cc[2]=z;Cc[3]=aa;C.depth_enable=
N;qa[0]=G;qa[1]=Q;qa[2]=B;qa[3]=U;C.scissor_enable=T;C.stencil_enable=W;X&&(da.cpuTime+=performance.now()-ea);ta&&h.destroyStream(la);S.elements=ja;S.offset=Aa;S.count=ha;S.primitive=Re;d[14]=Ae;d[31]=Zd;d[10]=$d;d[34]=bd;d[6]=Lc;d[7]=Gc;d[8]=Pc;d[9]=Bb;d[3]=Dc;xb&&ia.destroyStream(xc);q.buffer=mc;q.divisor=ec;q.normalized=ab;q.offset=qc;q.size=yb;q.state=db;q.stride=Nb;q.type=bb;q.w=ob;q.x=Ua;q.y=hd;q.z=Ib;Jb&&ia.destroyStream(rc);c.buffer=zb;c.divisor=ic;c.normalized=ib;c.offset=pb;c.size=Ha;c.state=
rb;c.stride=Ka;c.type=fb;c.w=gb;c.x=La;c.y=kb;c.z=Va;F.vert=tb;F.frag=sb;u.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta){var r,p,E,va,Ea,td,Hb,ga,I,sa,Da,oa,xa,Fa,ma,V,ua,Ia,za,mb,ca,ha,
$b,Ga,ac,Sb,$a,Dd,re,Wd,ze,Ad,Rd,oe,ie,Ed,Yd,fe,Md;r=b.attributes;p=b.buffer;E=b.context;va=b.current;Ea=b.draw;td=b.elements;Hb=b.extensions;ga=b.framebuffer;I=b.gl;sa=b.isBufferArgs;Da=b.next;oa=b.shader;xa=b.uniforms;Fa=b.vao;ma=Da.blend_color;V=va.blend_color;ua=Da.blend_equation;Ia=va.blend_equation;za=Da.blend_func;mb=va.blend_func;ca=Da.colorMask;ha=va.colorMask;$b=Da.depth_range;Ga=va.depth_range;ac=Da.polygonOffset_offset;Sb=va.polygonOffset_offset;$a=Da.sample_coverage;Dd=va.sample_coverage;
re=Da.scissor_box;Wd=va.scissor_box;ze=Da.stencil_func;Ad=va.stencil_func;Rd=Da.stencil_opBack;oe=va.stencil_opBack;ie=Da.stencil_opFront;Ed=va.stencil_opFront;Yd=Da.viewport;fe=va.viewport;Md={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,d){var c,f,k,l,h,b;c=ga.next;c!==ga.cur&&(c?I.bindFramebuffer(36160,c.framebuffer):I.bindFramebuffer(36160,null),ga.cur=c);if(va.dirty){var q,t,u,x,e,w,F,oa,L,C,v,ma,n,z,H,xa,y,K,G,Q,S,B,U,
T,X,ba,ia,Y,za,qc,yb,db,Nb,bb;q=Da.dither;q!==va.dither&&(q?I.enable(3024):I.disable(3024),va.dither=q);t=ua[0];u=ua[1];if(t!==Ia[0]||u!==Ia[1])I.blendEquationSeparate(t,u),Ia[0]=t,Ia[1]=u;x=Da.depth_func;x!==va.depth_func&&(I.depthFunc(x),va.depth_func=x);e=$b[0];w=$b[1];if(e!==Ga[0]||w!==Ga[1])I.depthRange(e,w),Ga[0]=e,Ga[1]=w;F=Da.depth_mask;F!==va.depth_mask&&(I.depthMask(F),va.depth_mask=F);oa=ca[0];L=ca[1];C=ca[2];v=ca[3];if(oa!==ha[0]||L!==ha[1]||C!==ha[2]||v!==ha[3])I.colorMask(oa,L,C,v),
ha[0]=oa,ha[1]=L,ha[2]=C,ha[3]=v;ma=Da.cull_enable;ma!==va.cull_enable&&(ma?I.enable(2884):I.disable(2884),va.cull_enable=ma);n=Da.cull_face;n!==va.cull_face&&(I.cullFace(n),va.cull_face=n);z=Da.frontFace;z!==va.frontFace&&(I.frontFace(z),va.frontFace=z);H=Da.lineWidth;H!==va.lineWidth&&(I.lineWidth(H),va.lineWidth=H);xa=Da.polygonOffset_enable;xa!==va.polygonOffset_enable&&(xa?I.enable(32823):I.disable(32823),va.polygonOffset_enable=xa);y=ac[0];K=ac[1];if(y!==Sb[0]||K!==Sb[1])I.polygonOffset(y,K),
Sb[0]=y,Sb[1]=K;G=Da.sample_alpha;G!==va.sample_alpha&&(G?I.enable(32926):I.disable(32926),va.sample_alpha=G);Q=Da.sample_enable;Q!==va.sample_enable&&(Q?I.enable(32928):I.disable(32928),va.sample_enable=Q);S=$a[0];B=$a[1];if(S!==Dd[0]||B!==Dd[1])I.sampleCoverage(S,B),Dd[0]=S,Dd[1]=B;U=Da.stencil_mask;U!==va.stencil_mask&&(I.stencilMask(U),va.stencil_mask=U);T=ze[0];X=ze[1];ba=ze[2];if(T!==Ad[0]||X!==Ad[1]||ba!==Ad[2])I.stencilFunc(T,X,ba),Ad[0]=T,Ad[1]=X,Ad[2]=ba;ia=ie[0];Y=ie[1];za=ie[2];qc=ie[3];
if(ia!==Ed[0]||Y!==Ed[1]||za!==Ed[2]||qc!==Ed[3])I.stencilOpSeparate(ia,Y,za,qc),Ed[0]=ia,Ed[1]=Y,Ed[2]=za,Ed[3]=qc;yb=Rd[0];db=Rd[1];Nb=Rd[2];bb=Rd[3];if(yb!==oe[0]||db!==oe[1]||Nb!==oe[2]||bb!==oe[3])I.stencilOpSeparate(yb,db,Nb,bb),oe[0]=yb,oe[1]=db,oe[2]=Nb,oe[3]=bb}I.blendColor(0,0,0,1);V[0]=0;V[1]=0;V[2]=0;V[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;I.enable(3089);va.scissor_enable=!0;I.disable(2960);
va.stencil_enable=!1;if(f=va.profile)k=performance.now(),da.count+=d;I.useProgram(ta.program);l=Hb.angle_instanced_arrays;var ob;Fa.setVAO(null);I.uniform1i(J.location,!1);I.uniform1i(Aa.location,N.bind());ob=Ea.instances;for(h=0;h<d;++h){b=a[h];var Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,re,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,
Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Yd,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf;Ua=b.viewport;hd=Ua.x|0;Ib=Ua.y|0;Jb="width"in Ua?Ua.width|0:E.framebufferWidth-hd;rc="height"in Ua?Ua.height|0:E.framebufferHeight-Ib;Ob=E.viewportWidth;
E.viewportWidth=Jb;jb=E.viewportHeight;E.viewportHeight=rc;I.viewport(hd,Ib,Jb,rc);fe[0]=hd;fe[1]=Ib;fe[2]=Jb;fe[3]=rc;Gb=b.viewport;Db=Gb.x|0;wb=Gb.y|0;hb="width"in Gb?Gb.width|0:E.framebufferWidth-Db;Yb="height"in Gb?Gb.height|0:E.framebufferHeight-wb;I.scissor(Db,wb,hb,Yb);Wd[0]=Db;Wd[1]=wb;Wd[2]=hb;Wd[3]=Yb;Pb=A.call(this,E,b,h);qb=!1;Ra=null;Ub=0;zb=!1;ib=ic=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;sa(Pb)?(qb=!0,Ra=p.createStream(34962,Pb),rb=Ra.dtype):(Ra=p.getBuffer(Pb))?rb=Ra.dtype:"constant"in Pb?
(pb=2,"number"===typeof Pb.constant?(fb=Pb.constant,gb=La=Ka=0):(fb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,La=2<Pb.constant.length?Pb.constant[2]:0,Ka=3<Pb.constant.length?Pb.constant[3]:0)):(Ra=sa(Pb.buffer)?p.createStream(34962,Pb.buffer):p.getBuffer(Pb.buffer),rb="type"in Pb?Md[Pb.type]:Ra.dtype,zb=!!Pb.normalized,ib=Pb.size|0,ic=Pb.offset|0,Ha=Pb.stride|0,Ub=Pb.divisor|0);kb=Ja.location;Va=r[kb];if(1===pb){Va.buffer||I.enableVertexAttribArray(kb);tb=ib||
1;if(Va.type!==rb||Va.size!==tb||Va.buffer!==Ra||Va.normalized!==zb||Va.offset!==ic||Va.stride!==Ha)I.bindBuffer(34962,Ra.buffer),I.vertexAttribPointer(kb,tb,rb,zb,Ha,ic),Va.type=rb,Va.size=tb,Va.buffer=Ra,Va.normalized=zb,Va.offset=ic,Va.stride=Ha;Va.divisor!==Ub&&(l.vertexAttribDivisorANGLE(kb,Ub),Va.divisor=Ub)}else if(Va.buffer&&(I.disableVertexAttribArray(kb),Va.buffer=null),Va.x!==fb||Va.y!==gb||Va.z!==La||Va.w!==Ka)I.vertexAttrib4f(kb,fb,gb,La,Ka),Va.x=fb,Va.y=gb,Va.z=La,Va.w=Ka;sb=ja.call(this,
E,b,h);Oa=!1;tc=null;Qa=0;Kb=!1;Ma=Eb=0;zd=1;Xa=0;Lb=5126;Zb=Na=lb=Mb=0;sa(sb)?(Oa=!0,tc=p.createStream(34962,sb),Lb=tc.dtype):(tc=p.getBuffer(sb))?Lb=tc.dtype:"constant"in sb?(zd=2,"number"===typeof sb.constant?(lb=sb.constant,Na=Zb=Mb=0):(lb=0<sb.constant.length?sb.constant[0]:0,Na=1<sb.constant.length?sb.constant[1]:0,Zb=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?sb.constant[3]:0)):(tc=sa(sb.buffer)?p.createStream(34962,sb.buffer):p.getBuffer(sb.buffer),Lb="type"in sb?Md[sb.type]:
tc.dtype,Kb=!!sb.normalized,Ma=sb.size|0,Eb=sb.offset|0,Xa=sb.stride|0,Qa=sb.divisor|0);Pa=Za.location;ub=r[Pa];if(1===zd){ub.buffer||I.enableVertexAttribArray(Pa);vb=Ma||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==tc||ub.normalized!==Kb||ub.offset!==Eb||ub.stride!==Xa)I.bindBuffer(34962,tc.buffer),I.vertexAttribPointer(Pa,vb,Lb,Kb,Xa,Eb),ub.type=Lb,ub.size=vb,ub.buffer=tc,ub.normalized=Kb,ub.offset=Eb,ub.stride=Xa;ub.divisor!==Qa&&(l.vertexAttribDivisorANGLE(Pa,Qa),ub.divisor=Qa)}else if(ub.buffer&&
(I.disableVertexAttribArray(Pa),ub.buffer=null),ub.x!==lb||ub.y!==Na||ub.z!==Zb||ub.w!==Mb)I.vertexAttrib4f(Pa,lb,Na,Zb,Mb),ub.x=lb,ub.y=Na,ub.z=Zb,ub.w=Mb;Sa=Z.call(this,E,b,h);nb=!1;fc=null;Ac=0;vc=!1;jc=cb=0;qd=1;Wa=0;Mc=5126;uc=Vb=Ya=Ab=0;sa(Sa)?(nb=!0,fc=p.createStream(34962,Sa),Mc=fc.dtype):(fc=p.getBuffer(Sa))?Mc=fc.dtype:"constant"in Sa?(qd=2,"number"===typeof Sa.constant?(Ya=Sa.constant,Vb=uc=Ab=0):(Ya=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?
Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(fc=sa(Sa.buffer)?p.createStream(34962,Sa.buffer):p.getBuffer(Sa.buffer),Mc="type"in Sa?Md[Sa.type]:fc.dtype,vc=!!Sa.normalized,jc=Sa.size|0,cb=Sa.offset|0,Wa=Sa.stride|0,Ac=Sa.divisor|0);Wb=na.location;Qb=r[Wb];if(1===qd){Qb.buffer||I.enableVertexAttribArray(Wb);Kc=jc||1;if(Qb.type!==Mc||Qb.size!==Kc||Qb.buffer!==fc||Qb.normalized!==vc||Qb.offset!==cb||Qb.stride!==Wa)I.bindBuffer(34962,fc.buffer),I.vertexAttribPointer(Wb,Kc,Mc,vc,Wa,cb),
Qb.type=Mc,Qb.size=Kc,Qb.buffer=fc,Qb.normalized=vc,Qb.offset=cb,Qb.stride=Wa;Qb.divisor!==Ac&&(l.vertexAttribDivisorANGLE(Wb,Ac),Qb.divisor=Ac)}else if(Qb.buffer&&(I.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==Ya||Qb.y!==Vb||Qb.z!==uc||Qb.w!==Ab)I.vertexAttrib4f(Wb,Ya,Vb,uc,Ab),Qb.x=Ya,Qb.y=Vb,Qb.z=uc,Qb.w=Ab;Rb=W.call(this,E,b,h);re=!1;Fc=null;sd=0;Nc=!1;ud=Yc=0;nc=1;wc=0;gc=5126;Xb=Tb=sc=eb=0;sa(Rb)?(re=!0,Fc=p.createStream(34962,Rb),gc=Fc.dtype):(Fc=p.getBuffer(Rb))?gc=Fc.dtype:"constant"in
Rb?(nc=2,"number"===typeof Rb.constant?(sc=Rb.constant,Tb=Xb=eb=0):(sc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Xb=2<Rb.constant.length?Rb.constant[2]:0,eb=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=sa(Rb.buffer)?p.createStream(34962,Rb.buffer):p.getBuffer(Rb.buffer),gc="type"in Rb?Md[Rb.type]:Fc.dtype,Nc=!!Rb.normalized,ud=Rb.size|0,Yc=Rb.offset|0,wc=Rb.stride|0,sd=Rb.divisor|0);cc=Ta.location;hc=r[cc];if(1===nc){hc.buffer||I.enableVertexAttribArray(cc);yc=
ud||1;if(hc.type!==gc||hc.size!==yc||hc.buffer!==Fc||hc.normalized!==Nc||hc.offset!==Yc||hc.stride!==wc)I.bindBuffer(34962,Fc.buffer),I.vertexAttribPointer(cc,yc,gc,Nc,wc,Yc),hc.type=gc,hc.size=yc,hc.buffer=Fc,hc.normalized=Nc,hc.offset=Yc,hc.stride=wc;hc.divisor!==sd&&(l.vertexAttribDivisorANGLE(cc,sd),hc.divisor=sd)}else if(hc.buffer&&(I.disableVertexAttribArray(cc),hc.buffer=null),hc.x!==sc||hc.y!==Tb||hc.z!==Xb||hc.w!==eb)I.vertexAttrib4f(cc,sc,Tb,Xb,eb),hc.x=sc,hc.y=Tb,hc.z=Xb,hc.w=eb;Bc=ea.call(this,
E,b,h);cd=!1;Qc=null;Rc=0;Sc=!1;od=Zc=0;dd=1;$c=0;kc=5126;ed=Uc=ad=bc=0;sa(Bc)?(cd=!0,Qc=p.createStream(34962,Bc),kc=Qc.dtype):(Qc=p.getBuffer(Bc))?kc=Qc.dtype:"constant"in Bc?(dd=2,"number"===typeof Bc.constant?(ad=Bc.constant,Uc=ed=bc=0):(ad=0<Bc.constant.length?Bc.constant[0]:0,Uc=1<Bc.constant.length?Bc.constant[1]:0,ed=2<Bc.constant.length?Bc.constant[2]:0,bc=3<Bc.constant.length?Bc.constant[3]:0)):(Qc=sa(Bc.buffer)?p.createStream(34962,Bc.buffer):p.getBuffer(Bc.buffer),kc="type"in Bc?Md[Bc.type]:
Qc.dtype,Sc=!!Bc.normalized,od=Bc.size|0,Zc=Bc.offset|0,$c=Bc.stride|0,Rc=Bc.divisor|0);zc=ka.location;id=r[zc];if(1===dd){id.buffer||I.enableVertexAttribArray(zc);Yd=od||1;if(id.type!==kc||id.size!==Yd||id.buffer!==Qc||id.normalized!==Sc||id.offset!==Zc||id.stride!==$c)I.bindBuffer(34962,Qc.buffer),I.vertexAttribPointer(zc,Yd,kc,Sc,$c,Zc),id.type=kc,id.size=Yd,id.buffer=Qc,id.normalized=Sc,id.offset=Zc,id.stride=$c;id.divisor!==Rc&&(l.vertexAttribDivisorANGLE(zc,Rc),id.divisor=Rc)}else if(id.buffer&&
(I.disableVertexAttribArray(zc),id.buffer=null),id.x!==ad||id.y!==Uc||id.z!==ed||id.w!==bc)I.vertexAttrib4f(zc,ad,Uc,ed,bc),id.x=ad,id.y=Uc,id.z=ed,id.w=bc;xd=R.call(this,E,b,h);ue=!1;jd=null;Ce=0;Od=!1;ce=ge=0;Pd=1;Jd=0;Hd=5126;rd=vd=Tc=md=0;sa(xd)?(ue=!0,jd=p.createStream(34962,xd),Hd=jd.dtype):(jd=p.getBuffer(xd))?Hd=jd.dtype:"constant"in xd?(Pd=2,"number"===typeof xd.constant?(Tc=xd.constant,vd=rd=md=0):(Tc=0<xd.constant.length?xd.constant[0]:0,vd=1<xd.constant.length?xd.constant[1]:0,rd=2<xd.constant.length?
xd.constant[2]:0,md=3<xd.constant.length?xd.constant[3]:0)):(jd=sa(xd.buffer)?p.createStream(34962,xd.buffer):p.getBuffer(xd.buffer),Hd="type"in xd?Md[xd.type]:jd.dtype,Od=!!xd.normalized,ce=xd.size|0,ge=xd.offset|0,Jd=xd.stride|0,Ce=xd.divisor|0);kd=qa.location;wd=r[kd];if(1===Pd){wd.buffer||I.enableVertexAttribArray(kd);Cd=ce||1;if(wd.type!==Hd||wd.size!==Cd||wd.buffer!==jd||wd.normalized!==Od||wd.offset!==ge||wd.stride!==Jd)I.bindBuffer(34962,jd.buffer),I.vertexAttribPointer(kd,Cd,Hd,Od,Jd,ge),
wd.type=Hd,wd.size=Cd,wd.buffer=jd,wd.normalized=Od,wd.offset=ge,wd.stride=Jd;wd.divisor!==Ce&&(l.vertexAttribDivisorANGLE(kd,Ce),wd.divisor=Ce)}else if(wd.buffer&&(I.disableVertexAttribArray(kd),wd.buffer=null),wd.x!==Tc||wd.y!==vd||wd.z!==rd||wd.w!==md)I.vertexAttrib4f(kd,Tc,vd,rd,md),wd.x=Tc,wd.y=vd,wd.z=rd,wd.w=md;Fd=O.call(this,E,b,h);je=!1;ye=null;Fe=0;le=!1;he=ke=0;ve=1;de=0;me=5126;qe=we=gd=Oc=0;sa(Fd)?(je=!0,ye=p.createStream(34962,Fd),me=ye.dtype):(ye=p.getBuffer(Fd))?me=ye.dtype:"constant"in
Fd?(ve=2,"number"===typeof Fd.constant?(gd=Fd.constant,we=qe=Oc=0):(gd=0<Fd.constant.length?Fd.constant[0]:0,we=1<Fd.constant.length?Fd.constant[1]:0,qe=2<Fd.constant.length?Fd.constant[2]:0,Oc=3<Fd.constant.length?Fd.constant[3]:0)):(ye=sa(Fd.buffer)?p.createStream(34962,Fd.buffer):p.getBuffer(Fd.buffer),me="type"in Fd?Md[Fd.type]:ye.dtype,le=!!Fd.normalized,he=Fd.size|0,ke=Fd.offset|0,de=Fd.stride|0,Fe=Fd.divisor|0);Kd=m.location;Qd=r[Kd];if(1===ve){Qd.buffer||I.enableVertexAttribArray(Kd);Sd=he||
4;if(Qd.type!==me||Qd.size!==Sd||Qd.buffer!==ye||Qd.normalized!==le||Qd.offset!==ke||Qd.stride!==de)I.bindBuffer(34962,ye.buffer),I.vertexAttribPointer(Kd,Sd,me,le,de,ke),Qd.type=me,Qd.size=Sd,Qd.buffer=ye,Qd.normalized=le,Qd.offset=ke,Qd.stride=de;Qd.divisor!==Fe&&(l.vertexAttribDivisorANGLE(Kd,Fe),Qd.divisor=Fe)}else if(Qd.buffer&&(I.disableVertexAttribArray(Kd),Qd.buffer=null),Qd.x!==gd||Qd.y!==we||Qd.z!==qe||Qd.w!==Oc)I.vertexAttrib4f(Kd,gd,we,qe,Oc),Qd.x=gd,Qd.y=we,Qd.z=qe,Qd.w=Oc;Td=D.call(this,
E,b,h);ne=!1;Ge=null;Be=0;se=!1;Te=Se=0;Oe=1;xe=0;He=5126;Ie=Le=Ke=Je=0;sa(Td)?(ne=!0,Ge=p.createStream(34962,Td),He=Ge.dtype):(Ge=p.getBuffer(Td))?He=Ge.dtype:"constant"in Td?(Oe=2,"number"===typeof Td.constant?(Ke=Td.constant,Le=Ie=Je=0):(Ke=0<Td.constant.length?Td.constant[0]:0,Le=1<Td.constant.length?Td.constant[1]:0,Ie=2<Td.constant.length?Td.constant[2]:0,Je=3<Td.constant.length?Td.constant[3]:0)):(Ge=sa(Td.buffer)?p.createStream(34962,Td.buffer):p.getBuffer(Td.buffer),He="type"in Td?Md[Td.type]:
Ge.dtype,se=!!Td.normalized,Te=Td.size|0,Se=Td.offset|0,xe=Td.stride|0,Be=Td.divisor|0);Ld=Ca.location;Xd=r[Ld];if(1===Oe){Xd.buffer||I.enableVertexAttribArray(Ld);be=Te||4;if(Xd.type!==He||Xd.size!==be||Xd.buffer!==Ge||Xd.normalized!==se||Xd.offset!==Se||Xd.stride!==xe)I.bindBuffer(34962,Ge.buffer),I.vertexAttribPointer(Ld,be,He,se,xe,Se),Xd.type=He,Xd.size=be,Xd.buffer=Ge,Xd.normalized=se,Xd.offset=Se,Xd.stride=xe;Xd.divisor!==Be&&(l.vertexAttribDivisorANGLE(Ld,Be),Xd.divisor=Be)}else if(Xd.buffer&&
(I.disableVertexAttribArray(Ld),Xd.buffer=null),Xd.x!==Ke||Xd.y!==Le||Xd.z!==Ie||Xd.w!==Je)I.vertexAttrib4f(Ld,Ke,Le,Ie,Je),Xd.x=Ke,Xd.y=Le,Xd.z=Ie,Xd.w=Je;ee=g.call(this,E,b,h);Me=!1;Id=null;Ud=0;De=!1;hf=Ne=0;bf=1;Ue=0;Pe=5126;We=Ve=Ze=af=0;sa(ee)?(Me=!0,Id=p.createStream(34962,ee),Pe=Id.dtype):(Id=p.getBuffer(ee))?Pe=Id.dtype:"constant"in ee?(bf=2,"number"===typeof ee.constant?(Ze=ee.constant,Ve=We=af=0):(Ze=0<ee.constant.length?ee.constant[0]:0,Ve=1<ee.constant.length?ee.constant[1]:0,We=2<ee.constant.length?
ee.constant[2]:0,af=3<ee.constant.length?ee.constant[3]:0)):(Id=sa(ee.buffer)?p.createStream(34962,ee.buffer):p.getBuffer(ee.buffer),Pe="type"in ee?Md[ee.type]:Id.dtype,De=!!ee.normalized,hf=ee.size|0,Ne=ee.offset|0,Ue=ee.stride|0,Ud=ee.divisor|0);Vd=aa.location;ae=r[Vd];if(1===bf){ae.buffer||I.enableVertexAttribArray(Vd);Xe=hf||1;if(ae.type!==Pe||ae.size!==Xe||ae.buffer!==Id||ae.normalized!==De||ae.offset!==Ne||ae.stride!==Ue)I.bindBuffer(34962,Id.buffer),I.vertexAttribPointer(Vd,Xe,Pe,De,Ue,Ne),
ae.type=Pe,ae.size=Xe,ae.buffer=Id,ae.normalized=De,ae.offset=Ne,ae.stride=Ue;ae.divisor!==Ud&&(l.vertexAttribDivisorANGLE(Vd,Ud),ae.divisor=Ud)}else if(ae.buffer&&(I.disableVertexAttribArray(Vd),ae.buffer=null),ae.x!==Ze||ae.y!==Ve||ae.z!==We||ae.w!==af)I.vertexAttrib4f(Vd,Ze,Ve,We,af),ae.x=Ze,ae.y=Ve,ae.z=We,ae.w=af;jf=E.pixelRatio;h&&nf===jf||(nf=jf,I.uniform1f(wa.location,jf));ef=b.scale;kf=ef[0];mf=ef[1];h&&lf===kf&&rf===mf||(lf=kf,rf=mf,I.uniform2f(fa.location,kf,mf));of=b.scaleFract;sf=of[0];
Cf=of[1];h&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,I.uniform2f(Ba.location,sf,Cf));Ee=b.translate;pf=Ee[0];Df=Ee[1];h&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,I.uniform2f(pa.location,pf,Df));Af=b.translateFract;Ef=Af[0];wf=Af[1];h&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,I.uniform2f(ya.location,Ef,wf));vf=M.call(this,E,b,h);yf=vf[0];If=vf[1];h&&zf===yf&&Jf===If||(zf=yf,Jf=If,I.uniform2f(ra.location,yf,If));Kf=b.opacity;h&&Lf===Kf||(Lf=Kf,I.uniform1f(la.location,Kf));(tf=b.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Qf=tf._texture;I.uniform1i(P.location,Qf.bind());Hf=b.elements;uf=null;(uf=(cg=sa(Hf))?td.createStream(Hf):td.getElements(Hf))&&I.bindBuffer(34963,uf.buffer.buffer);Rf=b.offset;if(Sf=b.count)0<ob?uf?l.drawElementsInstancedANGLE(0,Sf,uf.type,Rf<<(uf.type-5121>>1),ob):l.drawArraysInstancedANGLE(0,Rf,Sf,ob):0>ob&&(uf?I.drawElements(0,Sf,uf.type,Rf<<(uf.type-5121>>1)):I.drawArrays(0,Rf,Sf)),E.viewportWidth=Ob,E.viewportHeight=jb,qb&&p.destroyStream(Ra),Oa&&p.destroyStream(tc),nb&&p.destroyStream(fc),
re&&p.destroyStream(Fc),cd&&p.destroyStream(Qc),ue&&p.destroyStream(jd),je&&p.destroyStream(ye),ne&&p.destroyStream(Ge),Me&&p.destroyStream(Id),Qf.unbind(),cg&&td.destroyStream(uf)}N.unbind();va.dirty=!0;Fa.setVAO(null);f&&(da.cpuTime+=performance.now()-k)},draw:function(a){var d,g,f,k,h,b,t,u,x,A,w,O,D,F,oa,R,C,ma,M,z,N,xa,y,Q,S,T,W,X,ea,ba,ia,Y,ta,ja,Z,za,Cc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Yd,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,re,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe;d=ga.next;d!==ga.cur&&(d?I.bindFramebuffer(36160,d.framebuffer):I.bindFramebuffer(36160,null),ga.cur=d);if(va.dirty){var He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,
kf,lf,mf,rf,of,sf;He=Da.dither;He!==va.dither&&(He?I.enable(3024):I.disable(3024),va.dither=He);Je=ua[0];Ke=ua[1];if(Je!==Ia[0]||Ke!==Ia[1])I.blendEquationSeparate(Je,Ke),Ia[0]=Je,Ia[1]=Ke;Le=Da.depth_func;Le!==va.depth_func&&(I.depthFunc(Le),va.depth_func=Le);Ie=$b[0];Ld=$b[1];if(Ie!==Ga[0]||Ld!==Ga[1])I.depthRange(Ie,Ld),Ga[0]=Ie,Ga[1]=Ld;Xd=Da.depth_mask;Xd!==va.depth_mask&&(I.depthMask(Xd),va.depth_mask=Xd);be=ca[0];ee=ca[1];Me=ca[2];Id=ca[3];if(be!==ha[0]||ee!==ha[1]||Me!==ha[2]||Id!==ha[3])I.colorMask(be,
ee,Me,Id),ha[0]=be,ha[1]=ee,ha[2]=Me,ha[3]=Id;Ud=Da.cull_enable;Ud!==va.cull_enable&&(Ud?I.enable(2884):I.disable(2884),va.cull_enable=Ud);De=Da.cull_face;De!==va.cull_face&&(I.cullFace(De),va.cull_face=De);Ne=Da.frontFace;Ne!==va.frontFace&&(I.frontFace(Ne),va.frontFace=Ne);hf=Da.lineWidth;hf!==va.lineWidth&&(I.lineWidth(hf),va.lineWidth=hf);bf=Da.polygonOffset_enable;bf!==va.polygonOffset_enable&&(bf?I.enable(32823):I.disable(32823),va.polygonOffset_enable=bf);Ue=ac[0];Pe=ac[1];if(Ue!==Sb[0]||Pe!==
Sb[1])I.polygonOffset(Ue,Pe),Sb[0]=Ue,Sb[1]=Pe;af=Da.sample_alpha;af!==va.sample_alpha&&(af?I.enable(32926):I.disable(32926),va.sample_alpha=af);Ze=Da.sample_enable;Ze!==va.sample_enable&&(Ze?I.enable(32928):I.disable(32928),va.sample_enable=Ze);Ve=$a[0];We=$a[1];if(Ve!==Dd[0]||We!==Dd[1])I.sampleCoverage(Ve,We),Dd[0]=Ve,Dd[1]=We;Vd=Da.stencil_mask;Vd!==va.stencil_mask&&(I.stencilMask(Vd),va.stencil_mask=Vd);ae=ze[0];Xe=ze[1];jf=ze[2];if(ae!==Ad[0]||Xe!==Ad[1]||jf!==Ad[2])I.stencilFunc(ae,Xe,jf),
Ad[0]=ae,Ad[1]=Xe,Ad[2]=jf;nf=ie[0];ef=ie[1];kf=ie[2];lf=ie[3];if(nf!==Ed[0]||ef!==Ed[1]||kf!==Ed[2]||lf!==Ed[3])I.stencilOpSeparate(nf,ef,kf,lf),Ed[0]=nf,Ed[1]=ef,Ed[2]=kf,Ed[3]=lf;mf=Rd[0];rf=Rd[1];of=Rd[2];sf=Rd[3];if(mf!==oe[0]||rf!==oe[1]||of!==oe[2]||sf!==oe[3])I.stencilOpSeparate(mf,rf,of,sf),oe[0]=mf,oe[1]=rf,oe[2]=of,oe[3]=sf}g=a.viewport;f=g.x|0;k=g.y|0;h="width"in g?g.width|0:E.framebufferWidth-f;b="height"in g?g.height|0:E.framebufferHeight-k;t=E.viewportWidth;E.viewportWidth=h;u=E.viewportHeight;
E.viewportHeight=b;I.viewport(f,k,h,b);fe[0]=f;fe[1]=k;fe[2]=h;fe[3]=b;I.blendColor(0,0,0,1);V[0]=0;V[1]=0;V[2]=0;V[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;x=a.viewport;A=x.x|0;w=x.y|0;O="width"in x?x.width|0:E.framebufferWidth-A;D="height"in x?x.height|0:E.framebufferHeight-w;I.scissor(A,w,O,D);Wd[0]=A;Wd[1]=w;Wd[2]=O;Wd[3]=D;I.enable(3089);va.scissor_enable=!0;I.disable(2960);va.stencil_enable=
!1;if(F=va.profile)oa=performance.now(),da.count++;I.useProgram(K.program);R=Hb.angle_instanced_arrays;Fa.setVAO(null);C=L.call(this,E,a,0);ma=!1;M=null;z=0;N=!1;y=xa=0;Q=1;S=0;T=5126;ba=ea=X=W=0;sa(C)?(ma=!0,M=p.createStream(34962,C),T=M.dtype):(M=p.getBuffer(C))?T=M.dtype:"constant"in C?(Q=2,"number"===typeof C.constant?(X=C.constant,ea=ba=W=0):(X=0<C.constant.length?C.constant[0]:0,ea=1<C.constant.length?C.constant[1]:0,ba=2<C.constant.length?C.constant[2]:0,W=3<C.constant.length?C.constant[3]:
0)):(M=sa(C.buffer)?p.createStream(34962,C.buffer):p.getBuffer(C.buffer),T="type"in C?Md[C.type]:M.dtype,N=!!C.normalized,y=C.size|0,xa=C.offset|0,S=C.stride|0,z=C.divisor|0);ia=Ja.location;Y=r[ia];if(1===Q){Y.buffer||I.enableVertexAttribArray(ia);ta=y||1;if(Y.type!==T||Y.size!==ta||Y.buffer!==M||Y.normalized!==N||Y.offset!==xa||Y.stride!==S)I.bindBuffer(34962,M.buffer),I.vertexAttribPointer(ia,ta,T,N,S,xa),Y.type=T,Y.size=ta,Y.buffer=M,Y.normalized=N,Y.offset=xa,Y.stride=S;Y.divisor!==z&&(R.vertexAttribDivisorANGLE(ia,
z),Y.divisor=z)}else if(Y.buffer&&(I.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ba||Y.w!==W)I.vertexAttrib4f(ia,X,ea,ba,W),Y.x=X,Y.y=ea,Y.z=ba,Y.w=W;ja=e.call(this,E,a,0);Z=!1;za=null;Cc=0;yb=!1;Nb=db=0;bb=1;ob=0;Ua=5126;rc=Jb=Ib=hd=0;sa(ja)?(Z=!0,za=p.createStream(34962,ja),Ua=za.dtype):(za=p.getBuffer(ja))?Ua=za.dtype:"constant"in ja?(bb=2,"number"===typeof ja.constant?(Ib=ja.constant,Jb=rc=hd=0):(Ib=0<ja.constant.length?ja.constant[0]:0,Jb=1<ja.constant.length?ja.constant[1]:
0,rc=2<ja.constant.length?ja.constant[2]:0,hd=3<ja.constant.length?ja.constant[3]:0)):(za=sa(ja.buffer)?p.createStream(34962,ja.buffer):p.getBuffer(ja.buffer),Ua="type"in ja?Md[ja.type]:za.dtype,yb=!!ja.normalized,Nb=ja.size|0,db=ja.offset|0,ob=ja.stride|0,Cc=ja.divisor|0);Ob=Za.location;jb=r[Ob];if(1===bb){jb.buffer||I.enableVertexAttribArray(Ob);Gb=Nb||1;if(jb.type!==Ua||jb.size!==Gb||jb.buffer!==za||jb.normalized!==yb||jb.offset!==db||jb.stride!==ob)I.bindBuffer(34962,za.buffer),I.vertexAttribPointer(Ob,
Gb,Ua,yb,ob,db),jb.type=Ua,jb.size=Gb,jb.buffer=za,jb.normalized=yb,jb.offset=db,jb.stride=ob;jb.divisor!==Cc&&(R.vertexAttribDivisorANGLE(Ob,Cc),jb.divisor=Cc)}else if(jb.buffer&&(I.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==rc||jb.w!==hd)I.vertexAttrib4f(Ob,Ib,Jb,rc,hd),jb.x=Ib,jb.y=Jb,jb.z=rc,jb.w=hd;Db=l.call(this,E,a,0);wb=!1;hb=null;Yb=0;Pb=!1;Ra=qb=0;Ub=1;zb=0;ic=5126;rb=Ha=pb=ib=0;sa(Db)?(wb=!0,hb=p.createStream(34962,Db),ic=hb.dtype):(hb=p.getBuffer(Db))?ic=
hb.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(pb=Db.constant,Ha=rb=ib=0):(pb=0<Db.constant.length?Db.constant[0]:0,Ha=1<Db.constant.length?Db.constant[1]:0,rb=2<Db.constant.length?Db.constant[2]:0,ib=3<Db.constant.length?Db.constant[3]:0)):(hb=sa(Db.buffer)?p.createStream(34962,Db.buffer):p.getBuffer(Db.buffer),ic="type"in Db?Md[Db.type]:hb.dtype,Pb=!!Db.normalized,Ra=Db.size|0,qb=Db.offset|0,zb=Db.stride|0,Yb=Db.divisor|0);Ka=na.location;fb=r[Ka];if(1===Ub){fb.buffer||I.enableVertexAttribArray(Ka);
gb=Ra||1;if(fb.type!==ic||fb.size!==gb||fb.buffer!==hb||fb.normalized!==Pb||fb.offset!==qb||fb.stride!==zb)I.bindBuffer(34962,hb.buffer),I.vertexAttribPointer(Ka,gb,ic,Pb,zb,qb),fb.type=ic,fb.size=gb,fb.buffer=hb,fb.normalized=Pb,fb.offset=qb,fb.stride=zb;fb.divisor!==Yb&&(R.vertexAttribDivisorANGLE(Ka,Yb),fb.divisor=Yb)}else if(fb.buffer&&(I.disableVertexAttribArray(Ka),fb.buffer=null),fb.x!==pb||fb.y!==Ha||fb.z!==rb||fb.w!==ib)I.vertexAttrib4f(Ka,pb,Ha,rb,ib),fb.x=pb,fb.y=Ha,fb.z=rb,fb.w=ib;La=
q.call(this,E,a,0);kb=!1;Va=null;tb=0;sb=!1;tc=Oa=0;Qa=1;Kb=0;Eb=5126;Lb=Xa=zd=Ma=0;sa(La)?(kb=!0,Va=p.createStream(34962,La),Eb=Va.dtype):(Va=p.getBuffer(La))?Eb=Va.dtype:"constant"in La?(Qa=2,"number"===typeof La.constant?(zd=La.constant,Xa=Lb=Ma=0):(zd=0<La.constant.length?La.constant[0]:0,Xa=1<La.constant.length?La.constant[1]:0,Lb=2<La.constant.length?La.constant[2]:0,Ma=3<La.constant.length?La.constant[3]:0)):(Va=sa(La.buffer)?p.createStream(34962,La.buffer):p.getBuffer(La.buffer),Eb="type"in
La?Md[La.type]:Va.dtype,sb=!!La.normalized,tc=La.size|0,Oa=La.offset|0,Kb=La.stride|0,tb=La.divisor|0);Mb=Ta.location;lb=r[Mb];if(1===Qa){lb.buffer||I.enableVertexAttribArray(Mb);Na=tc||1;if(lb.type!==Eb||lb.size!==Na||lb.buffer!==Va||lb.normalized!==sb||lb.offset!==Oa||lb.stride!==Kb)I.bindBuffer(34962,Va.buffer),I.vertexAttribPointer(Mb,Na,Eb,sb,Kb,Oa),lb.type=Eb,lb.size=Na,lb.buffer=Va,lb.normalized=sb,lb.offset=Oa,lb.stride=Kb;lb.divisor!==tb&&(R.vertexAttribDivisorANGLE(Mb,tb),lb.divisor=tb)}else if(lb.buffer&&
(I.disableVertexAttribArray(Mb),lb.buffer=null),lb.x!==zd||lb.y!==Xa||lb.z!==Lb||lb.w!==Ma)I.vertexAttrib4f(Mb,zd,Xa,Lb,Ma),lb.x=zd,lb.y=Xa,lb.z=Lb,lb.w=Ma;Zb=c.call(this,E,a,0);Pa=!1;ub=null;vb=0;Sa=!1;fc=nb=0;Ac=1;vc=0;cb=5126;Mc=Wa=qd=jc=0;sa(Zb)?(Pa=!0,ub=p.createStream(34962,Zb),cb=ub.dtype):(ub=p.getBuffer(Zb))?cb=ub.dtype:"constant"in Zb?(Ac=2,"number"===typeof Zb.constant?(qd=Zb.constant,Wa=Mc=jc=0):(qd=0<Zb.constant.length?Zb.constant[0]:0,Wa=1<Zb.constant.length?Zb.constant[1]:0,Mc=2<Zb.constant.length?
Zb.constant[2]:0,jc=3<Zb.constant.length?Zb.constant[3]:0)):(ub=sa(Zb.buffer)?p.createStream(34962,Zb.buffer):p.getBuffer(Zb.buffer),cb="type"in Zb?Md[Zb.type]:ub.dtype,Sa=!!Zb.normalized,fc=Zb.size|0,nb=Zb.offset|0,vc=Zb.stride|0,vb=Zb.divisor|0);Ab=ka.location;Ya=r[Ab];if(1===Ac){Ya.buffer||I.enableVertexAttribArray(Ab);Vb=fc||1;if(Ya.type!==cb||Ya.size!==Vb||Ya.buffer!==ub||Ya.normalized!==Sa||Ya.offset!==nb||Ya.stride!==vc)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(Ab,Vb,cb,Sa,vc,nb),
Ya.type=cb,Ya.size=Vb,Ya.buffer=ub,Ya.normalized=Sa,Ya.offset=nb,Ya.stride=vc;Ya.divisor!==vb&&(R.vertexAttribDivisorANGLE(Ab,vb),Ya.divisor=vb)}else if(Ya.buffer&&(I.disableVertexAttribArray(Ab),Ya.buffer=null),Ya.x!==qd||Ya.y!==Wa||Ya.z!==Mc||Ya.w!==jc)I.vertexAttrib4f(Ab,qd,Wa,Mc,jc),Ya.x=qd,Ya.y=Wa,Ya.z=Mc,Ya.w=jc;uc=G.call(this,E,a,0);Wb=!1;Qb=null;Kc=0;Rb=!1;Fc=Yd=0;sd=1;Nc=0;Yc=5126;gc=wc=nc=ud=0;sa(uc)?(Wb=!0,Qb=p.createStream(34962,uc),Yc=Qb.dtype):(Qb=p.getBuffer(uc))?Yc=Qb.dtype:"constant"in
uc?(sd=2,"number"===typeof uc.constant?(nc=uc.constant,wc=gc=ud=0):(nc=0<uc.constant.length?uc.constant[0]:0,wc=1<uc.constant.length?uc.constant[1]:0,gc=2<uc.constant.length?uc.constant[2]:0,ud=3<uc.constant.length?uc.constant[3]:0)):(Qb=sa(uc.buffer)?p.createStream(34962,uc.buffer):p.getBuffer(uc.buffer),Yc="type"in uc?Md[uc.type]:Qb.dtype,Rb=!!uc.normalized,Fc=uc.size|0,Yd=uc.offset|0,Nc=uc.stride|0,Kc=uc.divisor|0);eb=qa.location;sc=r[eb];if(1===sd){sc.buffer||I.enableVertexAttribArray(eb);Tb=
Fc||1;if(sc.type!==Yc||sc.size!==Tb||sc.buffer!==Qb||sc.normalized!==Rb||sc.offset!==Yd||sc.stride!==Nc)I.bindBuffer(34962,Qb.buffer),I.vertexAttribPointer(eb,Tb,Yc,Rb,Nc,Yd),sc.type=Yc,sc.size=Tb,sc.buffer=Qb,sc.normalized=Rb,sc.offset=Yd,sc.stride=Nc;sc.divisor!==Kc&&(R.vertexAttribDivisorANGLE(eb,Kc),sc.divisor=Kc)}else if(sc.buffer&&(I.disableVertexAttribArray(eb),sc.buffer=null),sc.x!==nc||sc.y!==wc||sc.z!==gc||sc.w!==ud)I.vertexAttrib4f(eb,nc,wc,gc,ud),sc.x=nc,sc.y=wc,sc.z=gc,sc.w=ud;Xb=H.call(this,
E,a,0);cc=!1;hc=null;yc=0;Bc=!1;Qc=cd=0;Rc=1;Sc=0;Zc=5126;kc=$c=dd=od=0;sa(Xb)?(cc=!0,hc=p.createStream(34962,Xb),Zc=hc.dtype):(hc=p.getBuffer(Xb))?Zc=hc.dtype:"constant"in Xb?(Rc=2,"number"===typeof Xb.constant?(dd=Xb.constant,$c=kc=od=0):(dd=0<Xb.constant.length?Xb.constant[0]:0,$c=1<Xb.constant.length?Xb.constant[1]:0,kc=2<Xb.constant.length?Xb.constant[2]:0,od=3<Xb.constant.length?Xb.constant[3]:0)):(hc=sa(Xb.buffer)?p.createStream(34962,Xb.buffer):p.getBuffer(Xb.buffer),Zc="type"in Xb?Md[Xb.type]:
hc.dtype,Bc=!!Xb.normalized,Qc=Xb.size|0,cd=Xb.offset|0,Sc=Xb.stride|0,yc=Xb.divisor|0);bc=m.location;ad=r[bc];if(1===Rc){ad.buffer||I.enableVertexAttribArray(bc);Uc=Qc||4;if(ad.type!==Zc||ad.size!==Uc||ad.buffer!==hc||ad.normalized!==Bc||ad.offset!==cd||ad.stride!==Sc)I.bindBuffer(34962,hc.buffer),I.vertexAttribPointer(bc,Uc,Zc,Bc,Sc,cd),ad.type=Zc,ad.size=Uc,ad.buffer=hc,ad.normalized=Bc,ad.offset=cd,ad.stride=Sc;ad.divisor!==yc&&(R.vertexAttribDivisorANGLE(bc,yc),ad.divisor=yc)}else if(ad.buffer&&
(I.disableVertexAttribArray(bc),ad.buffer=null),ad.x!==dd||ad.y!==$c||ad.z!==kc||ad.w!==od)I.vertexAttrib4f(bc,dd,$c,kc,od),ad.x=dd,ad.y=$c,ad.z=kc,ad.w=od;ed=B.call(this,E,a,0);zc=!1;id=null;re=0;xd=!1;jd=ue=0;Ce=1;Od=0;ge=5126;Hd=Jd=Pd=ce=0;sa(ed)?(zc=!0,id=p.createStream(34962,ed),ge=id.dtype):(id=p.getBuffer(ed))?ge=id.dtype:"constant"in ed?(Ce=2,"number"===typeof ed.constant?(Pd=ed.constant,Jd=Hd=ce=0):(Pd=0<ed.constant.length?ed.constant[0]:0,Jd=1<ed.constant.length?ed.constant[1]:0,Hd=2<ed.constant.length?
ed.constant[2]:0,ce=3<ed.constant.length?ed.constant[3]:0)):(id=sa(ed.buffer)?p.createStream(34962,ed.buffer):p.getBuffer(ed.buffer),ge="type"in ed?Md[ed.type]:id.dtype,xd=!!ed.normalized,jd=ed.size|0,ue=ed.offset|0,Od=ed.stride|0,re=ed.divisor|0);md=Ca.location;Tc=r[md];if(1===Ce){Tc.buffer||I.enableVertexAttribArray(md);vd=jd||4;if(Tc.type!==ge||Tc.size!==vd||Tc.buffer!==id||Tc.normalized!==xd||Tc.offset!==ue||Tc.stride!==Od)I.bindBuffer(34962,id.buffer),I.vertexAttribPointer(md,vd,ge,xd,Od,ue),
Tc.type=ge,Tc.size=vd,Tc.buffer=id,Tc.normalized=xd,Tc.offset=ue,Tc.stride=Od;Tc.divisor!==re&&(R.vertexAttribDivisorANGLE(md,re),Tc.divisor=re)}else if(Tc.buffer&&(I.disableVertexAttribArray(md),Tc.buffer=null),Tc.x!==Pd||Tc.y!==Jd||Tc.z!==Hd||Tc.w!==ce)I.vertexAttrib4f(md,Pd,Jd,Hd,ce),Tc.x=Pd,Tc.y=Jd,Tc.z=Hd,Tc.w=ce;rd=U.call(this,E,a,0);kd=!1;wd=null;Cd=0;Fd=!1;ye=je=0;Fe=1;le=0;ke=5126;me=de=ve=he=0;sa(rd)?(kd=!0,wd=p.createStream(34962,rd),ke=wd.dtype):(wd=p.getBuffer(rd))?ke=wd.dtype:"constant"in
rd?(Fe=2,"number"===typeof rd.constant?(ve=rd.constant,de=me=he=0):(ve=0<rd.constant.length?rd.constant[0]:0,de=1<rd.constant.length?rd.constant[1]:0,me=2<rd.constant.length?rd.constant[2]:0,he=3<rd.constant.length?rd.constant[3]:0)):(wd=sa(rd.buffer)?p.createStream(34962,rd.buffer):p.getBuffer(rd.buffer),ke="type"in rd?Md[rd.type]:wd.dtype,Fd=!!rd.normalized,ye=rd.size|0,je=rd.offset|0,le=rd.stride|0,Cd=rd.divisor|0);Oc=aa.location;gd=r[Oc];if(1===Fe){gd.buffer||I.enableVertexAttribArray(Oc);we=
ye||1;if(gd.type!==ke||gd.size!==we||gd.buffer!==wd||gd.normalized!==Fd||gd.offset!==je||gd.stride!==le)I.bindBuffer(34962,wd.buffer),I.vertexAttribPointer(Oc,we,ke,Fd,le,je),gd.type=ke,gd.size=we,gd.buffer=wd,gd.normalized=Fd,gd.offset=je,gd.stride=le;gd.divisor!==Cd&&(R.vertexAttribDivisorANGLE(Oc,Cd),gd.divisor=Cd)}else if(gd.buffer&&(I.disableVertexAttribArray(Oc),gd.buffer=null),gd.x!==ve||gd.y!==de||gd.z!==me||gd.w!==he)I.vertexAttrib4f(Oc,ve,de,me,he),gd.x=ve,gd.y=de,gd.z=me,gd.w=he;I.uniform1i(J.location,
!1);I.uniform1f(wa.location,E.pixelRatio);qe=a.scale;I.uniform2f(fa.location,qe[0],qe[1]);Kd=a.scaleFract;I.uniform2f(Ba.location,Kd[0],Kd[1]);Qd=a.translate;I.uniform2f(pa.location,Qd[0],Qd[1]);Sd=a.translateFract;I.uniform2f(ya.location,Sd[0],Sd[1]);Td=n.call(this,E,a,0);I.uniform2f(ra.location,Td[0],Td[1]);I.uniform1f(la.location,a.opacity);I.uniform1i(Aa.location,v.bind());(ne=a.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);Ge=ne._texture;I.uniform1i(P.location,Ge.bind());Be=
a.elements;se=null;(se=(Se=sa(Be))?td.createStream(Be):td.getElements(Be))&&I.bindBuffer(34963,se.buffer.buffer);Te=a.offset;if(Oe=a.count)xe=Ea.instances,0<xe?se?R.drawElementsInstancedANGLE(0,Oe,se.type,Te<<(se.type-5121>>1),xe):R.drawArraysInstancedANGLE(0,Te,Oe,xe):0>xe&&(se?I.drawElements(0,Oe,se.type,Te<<(se.type-5121>>1)):I.drawArrays(0,Te,Oe)),va.dirty=!0,Fa.setVAO(null),E.viewportWidth=t,E.viewportHeight=u,F&&(da.cpuTime+=performance.now()-oa),ma&&p.destroyStream(M),Z&&p.destroyStream(za),
wb&&p.destroyStream(hb),kb&&p.destroyStream(Va),Pa&&p.destroyStream(ub),Wb&&p.destroyStream(Qb),cc&&p.destroyStream(hc),zc&&p.destroyStream(id),kd&&p.destroyStream(wd),v.unbind(),Ge.unbind(),Se&&td.destroyStream(se)},scope:function(c,g,l){var m,r,b,I,q,na,e,A,J,O,P,D,R,fa,ga,Za,L,M,Ja,v,n,V,N,H,aa,K,wa,ra,G,Ca,Fa,B,ca,U,ka,W,Ta,ea,pa,Ba,la,qa,ya,ja,ta,ua,Hb,Aa,Z,Ga,Cc,mb,Ia,Sb,Ra,ha,$b,ac,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,Wd,Qa,Kb,Eb,Ma,yd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,Dd,Wa,
Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Rd,Fc,fe,Nc,Yc,ze,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Ed,xd,oe,jd,Ad,ie,$a,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,pg,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;m=c.viewport;r=m.x|0;b=m.y|0;I="width"in m?m.width|0:E.framebufferWidth-r;q="height"in m?m.height|0:E.framebufferHeight-b;na=E.viewportWidth;E.viewportWidth=I;e=E.viewportHeight;E.viewportHeight=q;A=Yd[0];Yd[0]=r;J=Yd[1];Yd[1]=b;O=Yd[2];Yd[2]=I;P=Yd[3];Yd[3]=q;D=ma[0];ma[0]=0;R=ma[1];ma[1]=0;fa=ma[2];ma[2]=0;ga=ma[3];ma[3]=1;Za=Da.blend_enable;Da.blend_enable=!0;L=za[0];za[0]=770;M=za[1];za[1]=
771;Ja=za[2];za[2]=773;v=za[3];za[3]=1;n=Da.depth_enable;Da.depth_enable=!1;V=c.viewport;N=V.x|0;H=V.y|0;aa="width"in V?V.width|0:E.framebufferWidth-N;K="height"in V?V.height|0:E.framebufferHeight-H;wa=re[0];re[0]=N;ra=re[1];re[1]=H;G=re[2];re[2]=aa;Ca=re[3];re[3]=K;Fa=Da.scissor_enable;Da.scissor_enable=!0;B=Da.stencil_enable;Da.stencil_enable=!1;if(ca=va.profile)U=performance.now(),da.count++;ka=c.elements;W=null;W=(Ta=sa(ka))?td.createStream(ka):td.getElements(ka);ea=Ea.elements;Ea.elements=W;
pa=c.offset;Ba=Ea.offset;Ea.offset=pa;la=c.count;qa=Ea.count;Ea.count=la;ya=Ea.primitive;Ea.primitive=0;ja=xa[45];xa[45]=!1;ta=c.markerTexture;ua=xa[48];xa[48]=ta;Hb=c.opacity;Aa=xa[10];xa[10]=Hb;Z=y.call(this,E,c,l);Ga=xa[46];xa[46]=Z;Cc=xa[47];xa[47]=ba;mb=E.pixelRatio;Ia=xa[34];xa[34]=mb;Sb=c.scale;Ra=xa[6];xa[6]=Sb;ha=c.scaleFract;$b=xa[7];xa[7]=ha;ac=c.translate;ib=xa[8];xa[8]=ac;pb=c.translateFract;Ha=xa[9];xa[9]=pb;rb=w.call(this,E,c,l);Ka=!1;fb=null;gb=0;La=!1;Va=kb=0;tb=1;sb=0;Oa=5126;Eb=
Kb=Qa=Wd=0;sa(rb)?(Ka=!0,fb=p.createStream(34962,rb),Oa=fb.dtype):(fb=p.getBuffer(rb))?Oa=fb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Qa=rb.constant,Kb=Eb=Wd=0):(Qa=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Eb=2<rb.constant.length?rb.constant[2]:0,Wd=3<rb.constant.length?rb.constant[3]:0)):(fb=sa(rb.buffer)?p.createStream(34962,rb.buffer):p.getBuffer(rb.buffer),Oa="type"in rb?Md[rb.type]:fb.dtype,La=!!rb.normalized,Va=rb.size|0,kb=rb.offset|0,
sb=rb.stride|0,gb=rb.divisor|0);Ma=T.buffer;T.buffer=fb;yd=T.divisor;T.divisor=gb;Xa=T.normalized;T.normalized=La;Lb=T.offset;T.offset=kb;Mb=T.size;T.size=Va;lb=T.state;T.state=tb;Na=T.stride;T.stride=sb;Zb=T.type;T.type=Oa;Pa=T.w;T.w=Wd;ub=T.x;T.x=Qa;vb=T.y;T.y=Kb;Sa=T.z;T.z=Eb;nb=z.call(this,E,c,l);fc=!1;Ac=null;vc=0;cb=!1;Dd=jc=0;Wa=1;Mc=0;Ab=5126;Wb=uc=Vb=Ya=0;sa(nb)?(fc=!0,Ac=p.createStream(34962,nb),Ab=Ac.dtype):(Ac=p.getBuffer(nb))?Ab=Ac.dtype:"constant"in nb?(Wa=2,"number"===typeof nb.constant?
(Vb=nb.constant,uc=Wb=Ya=0):(Vb=0<nb.constant.length?nb.constant[0]:0,uc=1<nb.constant.length?nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,Ya=3<nb.constant.length?nb.constant[3]:0)):(Ac=sa(nb.buffer)?p.createStream(34962,nb.buffer):p.getBuffer(nb.buffer),Ab="type"in nb?Md[nb.type]:Ac.dtype,cb=!!nb.normalized,Dd=nb.size|0,jc=nb.offset|0,Mc=nb.stride|0,vc=nb.divisor|0);Qb=Q.buffer;Q.buffer=Ac;Kc=Q.divisor;Q.divisor=vc;Rb=Q.normalized;Q.normalized=cb;Rd=Q.offset;Q.offset=jc;Fc=Q.size;Q.size=
Dd;fe=Q.state;Q.state=Wa;Nc=Q.stride;Q.stride=Mc;Yc=Q.type;Q.type=Ab;ze=Q.w;Q.w=Ya;nc=Q.x;Q.x=Vb;wc=Q.y;Q.y=uc;gc=Q.z;Q.z=Wb;eb=ia.call(this,E,c,l);sc=!1;Tb=null;Xb=0;cc=!1;yc=hc=0;Bc=1;cd=0;Qc=5126;od=Zc=Sc=Rc=0;sa(eb)?(sc=!0,Tb=p.createStream(34962,eb),Qc=Tb.dtype):(Tb=p.getBuffer(eb))?Qc=Tb.dtype:"constant"in eb?(Bc=2,"number"===typeof eb.constant?(Sc=eb.constant,Zc=od=Rc=0):(Sc=0<eb.constant.length?eb.constant[0]:0,Zc=1<eb.constant.length?eb.constant[1]:0,od=2<eb.constant.length?eb.constant[2]:
0,Rc=3<eb.constant.length?eb.constant[3]:0)):(Tb=sa(eb.buffer)?p.createStream(34962,eb.buffer):p.getBuffer(eb.buffer),Qc="type"in eb?Md[eb.type]:Tb.dtype,cc=!!eb.normalized,yc=eb.size|0,hc=eb.offset|0,cd=eb.stride|0,Xb=eb.divisor|0);dd=k.buffer;k.buffer=Tb;$c=k.divisor;k.divisor=Xb;kc=k.normalized;k.normalized=cc;bc=k.offset;k.offset=hc;ad=k.size;k.size=yc;Uc=k.state;k.state=Bc;ed=k.stride;k.stride=cd;zc=k.type;k.type=Qc;id=k.w;k.w=Rc;Ed=k.x;k.x=Sc;xd=k.y;k.y=Zc;oe=k.z;k.z=od;jd=u.call(this,E,c,l);
Ad=!1;ie=null;$a=0;ce=!1;Jd=Pd=0;Hd=1;md=0;Tc=5126;wd=kd=rd=vd=0;sa(jd)?(Ad=!0,ie=p.createStream(34962,jd),Tc=ie.dtype):(ie=p.getBuffer(jd))?Tc=ie.dtype:"constant"in jd?(Hd=2,"number"===typeof jd.constant?(rd=jd.constant,kd=wd=vd=0):(rd=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,wd=2<jd.constant.length?jd.constant[2]:0,vd=3<jd.constant.length?jd.constant[3]:0)):(ie=sa(jd.buffer)?p.createStream(34962,jd.buffer):p.getBuffer(jd.buffer),Tc="type"in jd?Md[jd.type]:ie.dtype,
ce=!!jd.normalized,Jd=jd.size|0,Pd=jd.offset|0,md=jd.stride|0,$a=jd.divisor|0);Cd=S.buffer;S.buffer=ie;Fd=S.divisor;S.divisor=$a;je=S.normalized;S.normalized=ce;ye=S.offset;S.offset=Pd;pg=S.size;S.size=Jd;le=S.state;S.state=Hd;ke=S.stride;S.stride=md;he=S.type;S.type=Tc;ve=S.w;S.w=vd;de=S.x;S.x=rd;me=S.y;S.y=kd;Oc=S.z;S.z=wd;gd=h.call(this,E,c,l);we=!1;qe=null;Kd=0;Qd=!1;Td=Sd=0;ne=1;Ge=0;Be=5126;Oe=Te=Se=se=0;sa(gd)?(we=!0,qe=p.createStream(34962,gd),Be=qe.dtype):(qe=p.getBuffer(gd))?Be=qe.dtype:
"constant"in gd?(ne=2,"number"===typeof gd.constant?(Se=gd.constant,Te=Oe=se=0):(Se=0<gd.constant.length?gd.constant[0]:0,Te=1<gd.constant.length?gd.constant[1]:0,Oe=2<gd.constant.length?gd.constant[2]:0,se=3<gd.constant.length?gd.constant[3]:0)):(qe=sa(gd.buffer)?p.createStream(34962,gd.buffer):p.getBuffer(gd.buffer),Be="type"in gd?Md[gd.type]:qe.dtype,Qd=!!gd.normalized,Td=gd.size|0,Sd=gd.offset|0,Ge=gd.stride|0,Kd=gd.divisor|0);xe=X.buffer;X.buffer=qe;He=X.divisor;X.divisor=Kd;Je=X.normalized;
X.normalized=Qd;Ke=X.offset;X.offset=Sd;Le=X.size;X.size=Td;Ie=X.state;X.state=ne;Ld=X.stride;X.stride=Ge;Xd=X.type;X.type=Be;be=X.w;X.w=se;ee=X.x;X.x=Se;Me=X.y;X.y=Te;Id=X.z;X.z=Oe;Ud=f.call(this,E,c,l);De=!1;Ne=null;hf=0;bf=!1;Pe=Ue=0;af=1;Ze=0;Ve=5126;Xe=ae=Vd=We=0;sa(Ud)?(De=!0,Ne=p.createStream(34962,Ud),Ve=Ne.dtype):(Ne=p.getBuffer(Ud))?Ve=Ne.dtype:"constant"in Ud?(af=2,"number"===typeof Ud.constant?(Vd=Ud.constant,ae=Xe=We=0):(Vd=0<Ud.constant.length?Ud.constant[0]:0,ae=1<Ud.constant.length?
Ud.constant[1]:0,Xe=2<Ud.constant.length?Ud.constant[2]:0,We=3<Ud.constant.length?Ud.constant[3]:0)):(Ne=sa(Ud.buffer)?p.createStream(34962,Ud.buffer):p.getBuffer(Ud.buffer),Ve="type"in Ud?Md[Ud.type]:Ne.dtype,bf=!!Ud.normalized,Pe=Ud.size|0,Ue=Ud.offset|0,Ze=Ud.stride|0,hf=Ud.divisor|0);jf=x.buffer;x.buffer=Ne;nf=x.divisor;x.divisor=hf;ef=x.normalized;x.normalized=bf;kf=x.offset;x.offset=Ue;lf=x.size;x.size=Pe;mf=x.state;x.state=af;rf=x.stride;x.stride=Ze;of=x.type;x.type=Ve;sf=x.w;x.w=We;Bf=x.x;
x.x=Vd;Cf=x.y;x.y=ae;Qe=x.z;x.z=Xe;Ee=Y.call(this,E,c,l);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Ee)?(pf=!0,qf=p.createStream(34962,Ee),xf=qf.dtype):(qf=p.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=sa(Ee.buffer)?p.createStream(34962,Ee.buffer):
p.getBuffer(Ee.buffer),xf="type"in Ee?Md[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Jf=C.buffer;C.buffer=qf;Kf=C.divisor;C.divisor=Df;Lf=C.normalized;C.normalized=Gf;tf=C.offset;C.offset=Af;Qf=C.size;C.size=Ef;Hf=C.state;C.state=Ff;uf=C.stride;C.stride=wf;cg=C.type;C.type=xf;Rf=C.w;C.w=vf;Sf=C.x;C.x=yf;qg=C.y;C.y=zf;ff=C.z;C.z=If;cf=F.call(this,E,c,l);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;sa(cf)?(Mf=!0,Nf=p.createStream(34962,
cf),Tf=Nf.dtype):(Nf=p.getBuffer(cf))?Tf=Nf.dtype:"constant"in cf?(hg=2,"number"===typeof cf.constant?(Xf=cf.constant,Yf=ig=Wf=0):(Xf=0<cf.constant.length?cf.constant[0]:0,Yf=1<cf.constant.length?cf.constant[1]:0,ig=2<cf.constant.length?cf.constant[2]:0,Wf=3<cf.constant.length?cf.constant[3]:0)):(Nf=sa(cf.buffer)?p.createStream(34962,cf.buffer):p.getBuffer(cf.buffer),Tf="type"in cf?Md[cf.type]:Nf.dtype,eg=!!cf.normalized,gg=cf.size|0,fg=cf.offset|0,Vf=cf.stride|0,dg=cf.divisor|0);rg=d.buffer;d.buffer=
Nf;sg=d.divisor;d.divisor=dg;tg=d.normalized;d.normalized=eg;ug=d.offset;d.offset=fg;vg=d.size;d.size=gg;wg=d.state;d.state=hg;xg=d.stride;d.stride=Vf;yg=d.type;d.type=Tf;zg=d.w;d.w=Wf;Ag=d.x;d.x=Xf;Bg=d.y;d.y=Yf;gf=d.z;d.z=ig;df=t.call(this,E,c,l);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;sa(df)?(Of=!0,Pf=p.createStream(34962,df),Uf=Pf.dtype):(Pf=p.getBuffer(df))?Uf=Pf.dtype:"constant"in df?(ng=2,"number"===typeof df.constant?(ag=df.constant,bg=og=$f=0):(ag=0<df.constant.length?
df.constant[0]:0,bg=1<df.constant.length?df.constant[1]:0,og=2<df.constant.length?df.constant[2]:0,$f=3<df.constant.length?df.constant[3]:0)):(Pf=sa(df.buffer)?p.createStream(34962,df.buffer):p.getBuffer(df.buffer),Uf="type"in df?Md[df.type]:Pf.dtype,kg=!!df.normalized,mg=df.size|0,lg=df.offset|0,Zf=df.stride|0,jg=df.divisor|0);Cg=a.buffer;a.buffer=Pf;Dg=a.divisor;a.divisor=jg;Eg=a.normalized;a.normalized=kg;Fg=a.offset;a.offset=lg;Gg=a.size;a.size=mg;Hg=a.state;a.state=ng;Ig=a.stride;a.stride=Zf;
Jg=a.type;a.type=Uf;Kg=a.w;a.w=$f;Lg=a.x;a.x=ag;Mg=a.y;a.y=bg;Ng=a.z;a.z=og;Og=oa.vert;oa.vert=44;Pg=oa.frag;oa.frag=43;va.dirty=!0;g(E,c,l);E.viewportWidth=na;E.viewportHeight=e;Yd[0]=A;Yd[1]=J;Yd[2]=O;Yd[3]=P;ma[0]=D;ma[1]=R;ma[2]=fa;ma[3]=ga;Da.blend_enable=Za;za[0]=L;za[1]=M;za[2]=Ja;za[3]=v;Da.depth_enable=n;re[0]=wa;re[1]=ra;re[2]=G;re[3]=Ca;Da.scissor_enable=Fa;Da.stencil_enable=B;ca&&(da.cpuTime+=performance.now()-U);Ta&&td.destroyStream(W);Ea.elements=ea;Ea.offset=Ba;Ea.count=qa;Ea.primitive=
ya;xa[45]=ja;xa[48]=ua;xa[10]=Aa;xa[46]=Ga;xa[47]=Cc;xa[34]=Ia;xa[6]=Ra;xa[7]=$b;xa[8]=ib;xa[9]=Ha;Ka&&p.destroyStream(fb);T.buffer=Ma;T.divisor=yd;T.normalized=Xa;T.offset=Lb;T.size=Mb;T.state=lb;T.stride=Na;T.type=Zb;T.w=Pa;T.x=ub;T.y=vb;T.z=Sa;fc&&p.destroyStream(Ac);Q.buffer=Qb;Q.divisor=Kc;Q.normalized=Rb;Q.offset=Rd;Q.size=Fc;Q.state=fe;Q.stride=Nc;Q.type=Yc;Q.w=ze;Q.x=nc;Q.y=wc;Q.z=gc;sc&&p.destroyStream(Tb);k.buffer=dd;k.divisor=$c;k.normalized=kc;k.offset=bc;k.size=ad;k.state=Uc;k.stride=
ed;k.type=zc;k.w=id;k.x=Ed;k.y=xd;k.z=oe;Ad&&p.destroyStream(ie);S.buffer=Cd;S.divisor=Fd;S.normalized=je;S.offset=ye;S.size=pg;S.state=le;S.stride=ke;S.type=he;S.w=ve;S.x=de;S.y=me;S.z=Oc;we&&p.destroyStream(qe);X.buffer=xe;X.divisor=He;X.normalized=Je;X.offset=Ke;X.size=Le;X.state=Ie;X.stride=Ld;X.type=Xd;X.w=be;X.x=ee;X.y=Me;X.z=Id;De&&p.destroyStream(Ne);x.buffer=jf;x.divisor=nf;x.normalized=ef;x.offset=kf;x.size=lf;x.state=mf;x.stride=rf;x.type=of;x.w=sf;x.x=Bf;x.y=Cf;x.z=Qe;pf&&p.destroyStream(qf);
C.buffer=Jf;C.divisor=Kf;C.normalized=Lf;C.offset=tf;C.size=Qf;C.state=Hf;C.stride=uf;C.type=cg;C.w=Rf;C.x=Sf;C.y=qg;C.z=ff;Mf&&p.destroyStream(Nf);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;d.x=Ag;d.y=Bg;d.z=gf;Of&&p.destroyStream(Pf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;oa.vert=Og;oa.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,
da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za){var Ta,r,p,E,va,Ea,td,Hb,ga,I,sa,Da,oa,xa,Fa,ma,V,ua,Ia,za,mb,ca,ha,$b,Ga,ac,Sb,$a,Dd,re,Wd,ze,Ad,Rd,oe,ie,Ed,Yd,fe;Ta=b.attributes;r=b.buffer;p=b.context;E=b.current;va=b.draw;Ea=b.elements;td=b.extensions;Hb=b.framebuffer;ga=b.gl;I=b.isBufferArgs;sa=b.next;Da=b.shader;oa=b.uniforms;xa=b.vao;Fa=sa.blend_color;ma=E.blend_color;V=sa.blend_equation;ua=E.blend_equation;
Ia=sa.blend_func;za=E.blend_func;mb=sa.colorMask;ca=E.colorMask;ha=sa.depth_range;$b=E.depth_range;Ga=sa.polygonOffset_offset;ac=E.polygonOffset_offset;Sb=sa.sample_coverage;$a=E.sample_coverage;Dd=sa.scissor_box;re=E.scissor_box;Wd=sa.stencil_func;ze=E.stencil_func;Ad=sa.stencil_opBack;Rd=E.stencil_opBack;oe=sa.stencil_opFront;ie=E.stencil_opFront;Ed=sa.viewport;Yd=E.viewport;fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
d){var c,f,k,l,h,b;c=Hb.next;c!==Hb.cur&&(c?ga.bindFramebuffer(36160,c.framebuffer):ga.bindFramebuffer(36160,null),Hb.cur=c);if(E.dirty){var q,t,u,x,e,w,Da,F,oa,C,L,v,n,z,H,y,K,Q,G,S,Fa,B,T,U,X,ba,ia,Y,Ia,ab,qc,yb,db,Nb;q=sa.dither;q!==E.dither&&(q?ga.enable(3024):ga.disable(3024),E.dither=q);t=V[0];u=V[1];if(t!==ua[0]||u!==ua[1])ga.blendEquationSeparate(t,u),ua[0]=t,ua[1]=u;x=sa.depth_func;x!==E.depth_func&&(ga.depthFunc(x),E.depth_func=x);e=ha[0];w=ha[1];if(e!==$b[0]||w!==$b[1])ga.depthRange(e,
w),$b[0]=e,$b[1]=w;Da=sa.depth_mask;Da!==E.depth_mask&&(ga.depthMask(Da),E.depth_mask=Da);F=mb[0];oa=mb[1];C=mb[2];L=mb[3];if(F!==ca[0]||oa!==ca[1]||C!==ca[2]||L!==ca[3])ga.colorMask(F,oa,C,L),ca[0]=F,ca[1]=oa,ca[2]=C,ca[3]=L;v=sa.cull_enable;v!==E.cull_enable&&(v?ga.enable(2884):ga.disable(2884),E.cull_enable=v);n=sa.cull_face;n!==E.cull_face&&(ga.cullFace(n),E.cull_face=n);z=sa.frontFace;z!==E.frontFace&&(ga.frontFace(z),E.frontFace=z);H=sa.lineWidth;H!==E.lineWidth&&(ga.lineWidth(H),E.lineWidth=
H);y=sa.polygonOffset_enable;y!==E.polygonOffset_enable&&(y?ga.enable(32823):ga.disable(32823),E.polygonOffset_enable=y);K=Ga[0];Q=Ga[1];if(K!==ac[0]||Q!==ac[1])ga.polygonOffset(K,Q),ac[0]=K,ac[1]=Q;G=sa.sample_alpha;G!==E.sample_alpha&&(G?ga.enable(32926):ga.disable(32926),E.sample_alpha=G);S=sa.sample_enable;S!==E.sample_enable&&(S?ga.enable(32928):ga.disable(32928),E.sample_enable=S);Fa=Sb[0];B=Sb[1];if(Fa!==$a[0]||B!==$a[1])ga.sampleCoverage(Fa,B),$a[0]=Fa,$a[1]=B;T=sa.stencil_mask;T!==E.stencil_mask&&
(ga.stencilMask(T),E.stencil_mask=T);U=Wd[0];X=Wd[1];ba=Wd[2];if(U!==ze[0]||X!==ze[1]||ba!==ze[2])ga.stencilFunc(U,X,ba),ze[0]=U,ze[1]=X,ze[2]=ba;ia=oe[0];Y=oe[1];Ia=oe[2];ab=oe[3];if(ia!==ie[0]||Y!==ie[1]||Ia!==ie[2]||ab!==ie[3])ga.stencilOpSeparate(ia,Y,Ia,ab),ie[0]=ia,ie[1]=Y,ie[2]=Ia,ie[3]=ab;qc=Ad[0];yb=Ad[1];db=Ad[2];Nb=Ad[3];if(qc!==Rd[0]||yb!==Rd[1]||db!==Rd[2]||Nb!==Rd[3])ga.stencilOpSeparate(qc,yb,db,Nb),Rd[0]=qc,Rd[1]=yb,Rd[2]=db,Rd[3]=Nb}ga.blendColor(0,0,0,1);ma[0]=0;ma[1]=0;ma[2]=0;
ma[3]=1;ga.enable(3042);E.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;ga.disable(2929);E.depth_enable=!1;ga.enable(3089);E.scissor_enable=!0;ga.disable(2960);E.stencil_enable=!1;if(f=E.profile)k=performance.now(),da.count+=d;ga.useProgram(ta.program);l=td.angle_instanced_arrays;var bb;xa.setVAO(null);ga.uniform1i(J.location,!1);ga.uniform1i(ra.location,N.bind());bb=va.instances;for(h=0;h<d;++h){b=a[h];var ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,
Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,Dd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Ed,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,
Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf;ob=b.viewport;Ua=ob.x|0;hd=ob.y|0;Ib="width"in ob?ob.width|0:p.framebufferWidth-Ua;Jb="height"in ob?ob.height|0:p.framebufferHeight-hd;rc=p.viewportWidth;p.viewportWidth=Ib;Ob=p.viewportHeight;p.viewportHeight=Jb;ga.viewport(Ua,hd,Ib,Jb);Yd[0]=Ua;Yd[1]=hd;Yd[2]=Ib;Yd[3]=Jb;jb=b.viewport;Gb=jb.x|0;Db=jb.y|0;wb="width"in jb?jb.width|0:p.framebufferWidth-Gb;hb="height"in jb?jb.height|0:p.framebufferHeight-Db;ga.scissor(Gb,Db,wb,hb);re[0]=Gb;re[1]=Db;re[2]=
wb;re[3]=hb;Yb=A.call(this,p,b,h);Pb=!1;qb=null;Ra=0;Ub=!1;ic=zb=0;ib=1;pb=0;Ha=5126;gb=fb=Ka=rb=0;I(Yb)?(Pb=!0,qb=r.createStream(34962,Yb),Ha=qb.dtype):(qb=r.getBuffer(Yb))?Ha=qb.dtype:"constant"in Yb?(ib=2,"number"===typeof Yb.constant?(Ka=Yb.constant,fb=gb=rb=0):(Ka=0<Yb.constant.length?Yb.constant[0]:0,fb=1<Yb.constant.length?Yb.constant[1]:0,gb=2<Yb.constant.length?Yb.constant[2]:0,rb=3<Yb.constant.length?Yb.constant[3]:0)):(qb=I(Yb.buffer)?r.createStream(34962,Yb.buffer):r.getBuffer(Yb.buffer),
Ha="type"in Yb?fe[Yb.type]:qb.dtype,Ub=!!Yb.normalized,ic=Yb.size|0,zb=Yb.offset|0,pb=Yb.stride|0,Ra=Yb.divisor|0);La=ya.location;kb=Ta[La];if(1===ib){kb.buffer||ga.enableVertexAttribArray(La);Va=ic||1;if(kb.type!==Ha||kb.size!==Va||kb.buffer!==qb||kb.normalized!==Ub||kb.offset!==zb||kb.stride!==pb)ga.bindBuffer(34962,qb.buffer),ga.vertexAttribPointer(La,Va,Ha,Ub,pb,zb),kb.type=Ha,kb.size=Va,kb.buffer=qb,kb.normalized=Ub,kb.offset=zb,kb.stride=pb;kb.divisor!==Ra&&(l.vertexAttribDivisorANGLE(La,Ra),
kb.divisor=Ra)}else if(kb.buffer&&(ga.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==fb||kb.z!==gb||kb.w!==rb)ga.vertexAttrib4f(La,Ka,fb,gb,rb),kb.x=Ka,kb.y=fb,kb.z=gb,kb.w=rb;tb=ja.call(this,p,b,h);sb=!1;Oa=null;tc=0;Qa=!1;Eb=Kb=0;Ma=1;Dd=0;Xa=5126;Na=lb=Mb=Lb=0;I(tb)?(sb=!0,Oa=r.createStream(34962,tb),Xa=Oa.dtype):(Oa=r.getBuffer(tb))?Xa=Oa.dtype:"constant"in tb?(Ma=2,"number"===typeof tb.constant?(Mb=tb.constant,lb=Na=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,lb=1<tb.constant.length?
tb.constant[1]:0,Na=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Oa=I(tb.buffer)?r.createStream(34962,tb.buffer):r.getBuffer(tb.buffer),Xa="type"in tb?fe[tb.type]:Oa.dtype,Qa=!!tb.normalized,Eb=tb.size|0,Kb=tb.offset|0,Dd=tb.stride|0,tc=tb.divisor|0);Zb=na.location;Pa=Ta[Zb];if(1===Ma){Pa.buffer||ga.enableVertexAttribArray(Zb);ub=Eb||1;if(Pa.type!==Xa||Pa.size!==ub||Pa.buffer!==Oa||Pa.normalized!==Qa||Pa.offset!==Kb||Pa.stride!==Dd)ga.bindBuffer(34962,Oa.buffer),
ga.vertexAttribPointer(Zb,ub,Xa,Qa,Dd,Kb),Pa.type=Xa,Pa.size=ub,Pa.buffer=Oa,Pa.normalized=Qa,Pa.offset=Kb,Pa.stride=Dd;Pa.divisor!==tc&&(l.vertexAttribDivisorANGLE(Zb,tc),Pa.divisor=tc)}else if(Pa.buffer&&(ga.disableVertexAttribArray(Zb),Pa.buffer=null),Pa.x!==Mb||Pa.y!==lb||Pa.z!==Na||Pa.w!==Lb)ga.vertexAttrib4f(Zb,Mb,lb,Na,Lb),Pa.x=Mb,Pa.y=lb,Pa.z=Na,Pa.w=Lb;vb=Z.call(this,p,b,h);Sa=!1;nb=null;fc=0;Ac=!1;cb=vc=0;jc=1;qd=0;Wa=5126;Vb=Ya=Ab=Mc=0;I(vb)?(Sa=!0,nb=r.createStream(34962,vb),Wa=nb.dtype):
(nb=r.getBuffer(vb))?Wa=nb.dtype:"constant"in vb?(jc=2,"number"===typeof vb.constant?(Ab=vb.constant,Ya=Vb=Mc=0):(Ab=0<vb.constant.length?vb.constant[0]:0,Ya=1<vb.constant.length?vb.constant[1]:0,Vb=2<vb.constant.length?vb.constant[2]:0,Mc=3<vb.constant.length?vb.constant[3]:0)):(nb=I(vb.buffer)?r.createStream(34962,vb.buffer):r.getBuffer(vb.buffer),Wa="type"in vb?fe[vb.type]:nb.dtype,Ac=!!vb.normalized,cb=vb.size|0,vc=vb.offset|0,qd=vb.stride|0,fc=vb.divisor|0);uc=Ja.location;Wb=Ta[uc];if(1===jc){Wb.buffer||
ga.enableVertexAttribArray(uc);Qb=cb||1;if(Wb.type!==Wa||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==Ac||Wb.offset!==vc||Wb.stride!==qd)ga.bindBuffer(34962,nb.buffer),ga.vertexAttribPointer(uc,Qb,Wa,Ac,qd,vc),Wb.type=Wa,Wb.size=Qb,Wb.buffer=nb,Wb.normalized=Ac,Wb.offset=vc,Wb.stride=qd;Wb.divisor!==fc&&(l.vertexAttribDivisorANGLE(uc,fc),Wb.divisor=fc)}else if(Wb.buffer&&(ga.disableVertexAttribArray(uc),Wb.buffer=null),Wb.x!==Ab||Wb.y!==Ya||Wb.z!==Vb||Wb.w!==Mc)ga.vertexAttrib4f(uc,Ab,Ya,Vb,Mc),
Wb.x=Ab,Wb.y=Ya,Wb.z=Vb,Wb.w=Mc;Kc=W.call(this,p,b,h);Rb=!1;Ed=null;Fc=0;sd=!1;Yc=Nc=0;ud=1;nc=0;wc=5126;Tb=sc=eb=gc=0;I(Kc)?(Rb=!0,Ed=r.createStream(34962,Kc),wc=Ed.dtype):(Ed=r.getBuffer(Kc))?wc=Ed.dtype:"constant"in Kc?(ud=2,"number"===typeof Kc.constant?(eb=Kc.constant,sc=Tb=gc=0):(eb=0<Kc.constant.length?Kc.constant[0]:0,sc=1<Kc.constant.length?Kc.constant[1]:0,Tb=2<Kc.constant.length?Kc.constant[2]:0,gc=3<Kc.constant.length?Kc.constant[3]:0)):(Ed=I(Kc.buffer)?r.createStream(34962,Kc.buffer):
r.getBuffer(Kc.buffer),wc="type"in Kc?fe[Kc.type]:Ed.dtype,sd=!!Kc.normalized,Yc=Kc.size|0,Nc=Kc.offset|0,nc=Kc.stride|0,Fc=Kc.divisor|0);Xb=Za.location;cc=Ta[Xb];if(1===ud){cc.buffer||ga.enableVertexAttribArray(Xb);hc=Yc||1;if(cc.type!==wc||cc.size!==hc||cc.buffer!==Ed||cc.normalized!==sd||cc.offset!==Nc||cc.stride!==nc)ga.bindBuffer(34962,Ed.buffer),ga.vertexAttribPointer(Xb,hc,wc,sd,nc,Nc),cc.type=wc,cc.size=hc,cc.buffer=Ed,cc.normalized=sd,cc.offset=Nc,cc.stride=nc;cc.divisor!==Fc&&(l.vertexAttribDivisorANGLE(Xb,
Fc),cc.divisor=Fc)}else if(cc.buffer&&(ga.disableVertexAttribArray(Xb),cc.buffer=null),cc.x!==eb||cc.y!==sc||cc.z!==Tb||cc.w!==gc)ga.vertexAttrib4f(Xb,eb,sc,Tb,gc),cc.x=eb,cc.y=sc,cc.z=Tb,cc.w=gc;yc=ea.call(this,p,b,h);Bc=!1;cd=null;Qc=0;Rc=!1;Zc=Sc=0;od=1;dd=0;$c=5126;Uc=ad=bc=kc=0;I(yc)?(Bc=!0,cd=r.createStream(34962,yc),$c=cd.dtype):(cd=r.getBuffer(yc))?$c=cd.dtype:"constant"in yc?(od=2,"number"===typeof yc.constant?(bc=yc.constant,ad=Uc=kc=0):(bc=0<yc.constant.length?yc.constant[0]:0,ad=1<yc.constant.length?
yc.constant[1]:0,Uc=2<yc.constant.length?yc.constant[2]:0,kc=3<yc.constant.length?yc.constant[3]:0)):(cd=I(yc.buffer)?r.createStream(34962,yc.buffer):r.getBuffer(yc.buffer),$c="type"in yc?fe[yc.type]:cd.dtype,Rc=!!yc.normalized,Zc=yc.size|0,Sc=yc.offset|0,dd=yc.stride|0,Qc=yc.divisor|0);ed=Ba.location;zc=Ta[ed];if(1===od){zc.buffer||ga.enableVertexAttribArray(ed);id=Zc||1;if(zc.type!==$c||zc.size!==id||zc.buffer!==cd||zc.normalized!==Rc||zc.offset!==Sc||zc.stride!==dd)ga.bindBuffer(34962,cd.buffer),
ga.vertexAttribPointer(ed,id,$c,Rc,dd,Sc),zc.type=$c,zc.size=id,zc.buffer=cd,zc.normalized=Rc,zc.offset=Sc,zc.stride=dd;zc.divisor!==Qc&&(l.vertexAttribDivisorANGLE(ed,Qc),zc.divisor=Qc)}else if(zc.buffer&&(ga.disableVertexAttribArray(ed),zc.buffer=null),zc.x!==bc||zc.y!==ad||zc.z!==Uc||zc.w!==kc)ga.vertexAttrib4f(ed,bc,ad,Uc,kc),zc.x=bc,zc.y=ad,zc.z=Uc,zc.w=kc;Nd=R.call(this,p,b,h);xd=!1;ue=null;jd=0;Ce=!1;ge=Od=0;ce=1;Pd=0;Jd=5126;vd=Tc=md=Hd=0;I(Nd)?(xd=!0,ue=r.createStream(34962,Nd),Jd=ue.dtype):
(ue=r.getBuffer(Nd))?Jd=ue.dtype:"constant"in Nd?(ce=2,"number"===typeof Nd.constant?(md=Nd.constant,Tc=vd=Hd=0):(md=0<Nd.constant.length?Nd.constant[0]:0,Tc=1<Nd.constant.length?Nd.constant[1]:0,vd=2<Nd.constant.length?Nd.constant[2]:0,Hd=3<Nd.constant.length?Nd.constant[3]:0)):(ue=I(Nd.buffer)?r.createStream(34962,Nd.buffer):r.getBuffer(Nd.buffer),Jd="type"in Nd?fe[Nd.type]:ue.dtype,Ce=!!Nd.normalized,ge=Nd.size|0,Od=Nd.offset|0,Pd=Nd.stride|0,jd=Nd.divisor|0);rd=qa.location;kd=Ta[rd];if(1===ce){kd.buffer||
ga.enableVertexAttribArray(rd);wd=ge||1;if(kd.type!==Jd||kd.size!==wd||kd.buffer!==ue||kd.normalized!==Ce||kd.offset!==Od||kd.stride!==Pd)ga.bindBuffer(34962,ue.buffer),ga.vertexAttribPointer(rd,wd,Jd,Ce,Pd,Od),kd.type=Jd,kd.size=wd,kd.buffer=ue,kd.normalized=Ce,kd.offset=Od,kd.stride=Pd;kd.divisor!==jd&&(l.vertexAttribDivisorANGLE(rd,jd),kd.divisor=jd)}else if(kd.buffer&&(ga.disableVertexAttribArray(rd),kd.buffer=null),kd.x!==md||kd.y!==Tc||kd.z!==vd||kd.w!==Hd)ga.vertexAttrib4f(rd,md,Tc,vd,Hd),
kd.x=md,kd.y=Tc,kd.z=vd,kd.w=Hd;Cd=O.call(this,p,b,h);Fd=!1;je=null;ye=0;Fe=!1;ke=le=0;he=1;ve=0;de=5126;we=gd=Oc=me=0;I(Cd)?(Fd=!0,je=r.createStream(34962,Cd),de=je.dtype):(je=r.getBuffer(Cd))?de=je.dtype:"constant"in Cd?(he=2,"number"===typeof Cd.constant?(Oc=Cd.constant,gd=we=me=0):(Oc=0<Cd.constant.length?Cd.constant[0]:0,gd=1<Cd.constant.length?Cd.constant[1]:0,we=2<Cd.constant.length?Cd.constant[2]:0,me=3<Cd.constant.length?Cd.constant[3]:0)):(je=I(Cd.buffer)?r.createStream(34962,Cd.buffer):
r.getBuffer(Cd.buffer),de="type"in Cd?fe[Cd.type]:je.dtype,Fe=!!Cd.normalized,ke=Cd.size|0,le=Cd.offset|0,ve=Cd.stride|0,ye=Cd.divisor|0);qe=m.location;Kd=Ta[qe];if(1===he){Kd.buffer||ga.enableVertexAttribArray(qe);Qd=ke||4;if(Kd.type!==de||Kd.size!==Qd||Kd.buffer!==je||Kd.normalized!==Fe||Kd.offset!==le||Kd.stride!==ve)ga.bindBuffer(34962,je.buffer),ga.vertexAttribPointer(qe,Qd,de,Fe,ve,le),Kd.type=de,Kd.size=Qd,Kd.buffer=je,Kd.normalized=Fe,Kd.offset=le,Kd.stride=ve;Kd.divisor!==ye&&(l.vertexAttribDivisorANGLE(qe,
ye),Kd.divisor=ye)}else if(Kd.buffer&&(ga.disableVertexAttribArray(qe),Kd.buffer=null),Kd.x!==Oc||Kd.y!==gd||Kd.z!==we||Kd.w!==me)ga.vertexAttrib4f(qe,Oc,gd,we,me),Kd.x=Oc,Kd.y=gd,Kd.z=we,Kd.w=me;Sd=D.call(this,p,b,h);Td=!1;ne=null;Ge=0;Be=!1;Se=se=0;Te=1;Oe=0;xe=5126;Le=Ke=Je=He=0;I(Sd)?(Td=!0,ne=r.createStream(34962,Sd),xe=ne.dtype):(ne=r.getBuffer(Sd))?xe=ne.dtype:"constant"in Sd?(Te=2,"number"===typeof Sd.constant?(Je=Sd.constant,Ke=Le=He=0):(Je=0<Sd.constant.length?Sd.constant[0]:0,Ke=1<Sd.constant.length?
Sd.constant[1]:0,Le=2<Sd.constant.length?Sd.constant[2]:0,He=3<Sd.constant.length?Sd.constant[3]:0)):(ne=I(Sd.buffer)?r.createStream(34962,Sd.buffer):r.getBuffer(Sd.buffer),xe="type"in Sd?fe[Sd.type]:ne.dtype,Be=!!Sd.normalized,Se=Sd.size|0,se=Sd.offset|0,Oe=Sd.stride|0,Ge=Sd.divisor|0);Ie=Ca.location;Ld=Ta[Ie];if(1===Te){Ld.buffer||ga.enableVertexAttribArray(Ie);Xd=Se||4;if(Ld.type!==xe||Ld.size!==Xd||Ld.buffer!==ne||Ld.normalized!==Be||Ld.offset!==se||Ld.stride!==Oe)ga.bindBuffer(34962,ne.buffer),
ga.vertexAttribPointer(Ie,Xd,xe,Be,Oe,se),Ld.type=xe,Ld.size=Xd,Ld.buffer=ne,Ld.normalized=Be,Ld.offset=se,Ld.stride=Oe;Ld.divisor!==Ge&&(l.vertexAttribDivisorANGLE(Ie,Ge),Ld.divisor=Ge)}else if(Ld.buffer&&(ga.disableVertexAttribArray(Ie),Ld.buffer=null),Ld.x!==Je||Ld.y!==Ke||Ld.z!==Le||Ld.w!==He)ga.vertexAttrib4f(Ie,Je,Ke,Le,He),Ld.x=Je,Ld.y=Ke,Ld.z=Le,Ld.w=He;be=g.call(this,p,b,h);ee=!1;Me=null;Id=0;Ud=!1;Ne=De=0;hf=1;bf=0;Ue=5126;Ve=Ze=af=Pe=0;I(be)?(ee=!0,Me=r.createStream(34962,be),Ue=Me.dtype):
(Me=r.getBuffer(be))?Ue=Me.dtype:"constant"in be?(hf=2,"number"===typeof be.constant?(af=be.constant,Ze=Ve=Pe=0):(af=0<be.constant.length?be.constant[0]:0,Ze=1<be.constant.length?be.constant[1]:0,Ve=2<be.constant.length?be.constant[2]:0,Pe=3<be.constant.length?be.constant[3]:0)):(Me=I(be.buffer)?r.createStream(34962,be.buffer):r.getBuffer(be.buffer),Ue="type"in be?fe[be.type]:Me.dtype,Ud=!!be.normalized,Ne=be.size|0,De=be.offset|0,bf=be.stride|0,Id=be.divisor|0);We=aa.location;Vd=Ta[We];if(1===hf){Vd.buffer||
ga.enableVertexAttribArray(We);ae=Ne||1;if(Vd.type!==Ue||Vd.size!==ae||Vd.buffer!==Me||Vd.normalized!==Ud||Vd.offset!==De||Vd.stride!==bf)ga.bindBuffer(34962,Me.buffer),ga.vertexAttribPointer(We,ae,Ue,Ud,bf,De),Vd.type=Ue,Vd.size=ae,Vd.buffer=Me,Vd.normalized=Ud,Vd.offset=De,Vd.stride=bf;Vd.divisor!==Id&&(l.vertexAttribDivisorANGLE(We,Id),Vd.divisor=Id)}else if(Vd.buffer&&(ga.disableVertexAttribArray(We),Vd.buffer=null),Vd.x!==af||Vd.y!==Ze||Vd.z!==Ve||Vd.w!==Pe)ga.vertexAttrib4f(We,af,Ze,Ve,Pe),
Vd.x=af,Vd.y=Ze,Vd.z=Ve,Vd.w=Pe;Xe=p.pixelRatio;h&&jf===Xe||(jf=Xe,ga.uniform1f(Aa.location,Xe));nf=M.call(this,p,b,h);ef=nf[0];lf=nf[1];h&&kf===ef&&mf===lf||(kf=ef,mf=lf,ga.uniform2f(la.location,ef,lf));rf=b.scale;of=rf[0];Bf=rf[1];h&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ga.uniform2f(wa.location,of,Bf));Qe=b.scaleFract;Ee=Qe[0];qf=Qe[1];h&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ga.uniform2f(fa.location,Ee,qf));Gf=b.translate;Af=Gf[0];Ff=Gf[1];h&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ga.uniform2f(ka.location,Af,Ff));
xf=b.translateFract;vf=xf[0];zf=xf[1];h&&yf===vf&&If===zf||(yf=vf,If=zf,ga.uniform2f(pa.location,vf,zf));Jf=b.opacity;h&&Kf===Jf||(Kf=Jf,ga.uniform1f(P.location,Jf));Lf=b.elements;tf=null;(tf=(Qf=I(Lf))?Ea.createStream(Lf):Ea.getElements(Lf))&&ga.bindBuffer(34963,tf.buffer.buffer);Hf=b.offset;if(uf=b.count)0<bb?tf?l.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),bb):l.drawArraysInstancedANGLE(0,Hf,uf,bb):0>bb&&(tf?ga.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ga.drawArrays(0,
Hf,uf)),p.viewportWidth=rc,p.viewportHeight=Ob,Pb&&r.destroyStream(qb),sb&&r.destroyStream(Oa),Sa&&r.destroyStream(nb),Rb&&r.destroyStream(Ed),Bc&&r.destroyStream(cd),xd&&r.destroyStream(ue),Fd&&r.destroyStream(je),Td&&r.destroyStream(ne),ee&&r.destroyStream(Me),Qf&&Ea.destroyStream(tf)}N.unbind();E.dirty=!0;xa.setVAO(null);f&&(da.cpuTime+=performance.now()-k)},draw:function(a){var d,g,f,k,h,b,t,u,x,A,w,Da,O,D,F,R,oa,C,M,z,N,y,Q,S,Fa,T,W,X,ea,ba,ia,Y,ja,ta,Z,Cc,Ia,qc,yb,db,Nb,bb,ob,Ua,Dd,Ib,Jb,rc,
Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,Ed,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd,xd,ue,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se;d=Hb.next;d!==Hb.cur&&(d?ga.bindFramebuffer(36160,d.framebuffer):ga.bindFramebuffer(36160,null),Hb.cur=d);
if(E.dirty){var Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,hf,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf;Te=sa.dither;Te!==E.dither&&(Te?ga.enable(3024):ga.disable(3024),E.dither=Te);Oe=V[0];xe=V[1];if(Oe!==ua[0]||xe!==ua[1])ga.blendEquationSeparate(Oe,xe),ua[0]=Oe,ua[1]=xe;He=sa.depth_func;He!==E.depth_func&&(ga.depthFunc(He),E.depth_func=He);Je=ha[0];Ke=ha[1];if(Je!==$b[0]||Ke!==$b[1])ga.depthRange(Je,Ke),$b[0]=Je,$b[1]=Ke;Le=sa.depth_mask;Le!==E.depth_mask&&(ga.depthMask(Le),E.depth_mask=
Le);Ie=mb[0];Ld=mb[1];Xd=mb[2];be=mb[3];if(Ie!==ca[0]||Ld!==ca[1]||Xd!==ca[2]||be!==ca[3])ga.colorMask(Ie,Ld,Xd,be),ca[0]=Ie,ca[1]=Ld,ca[2]=Xd,ca[3]=be;ee=sa.cull_enable;ee!==E.cull_enable&&(ee?ga.enable(2884):ga.disable(2884),E.cull_enable=ee);Me=sa.cull_face;Me!==E.cull_face&&(ga.cullFace(Me),E.cull_face=Me);Id=sa.frontFace;Id!==E.frontFace&&(ga.frontFace(Id),E.frontFace=Id);Ud=sa.lineWidth;Ud!==E.lineWidth&&(ga.lineWidth(Ud),E.lineWidth=Ud);De=sa.polygonOffset_enable;De!==E.polygonOffset_enable&&
(De?ga.enable(32823):ga.disable(32823),E.polygonOffset_enable=De);Ne=Ga[0];hf=Ga[1];if(Ne!==ac[0]||hf!==ac[1])ga.polygonOffset(Ne,hf),ac[0]=Ne,ac[1]=hf;bf=sa.sample_alpha;bf!==E.sample_alpha&&(bf?ga.enable(32926):ga.disable(32926),E.sample_alpha=bf);Ue=sa.sample_enable;Ue!==E.sample_enable&&(Ue?ga.enable(32928):ga.disable(32928),E.sample_enable=Ue);Pe=Sb[0];af=Sb[1];if(Pe!==$a[0]||af!==$a[1])ga.sampleCoverage(Pe,af),$a[0]=Pe,$a[1]=af;Ze=sa.stencil_mask;Ze!==E.stencil_mask&&(ga.stencilMask(Ze),E.stencil_mask=
Ze);Ve=Wd[0];We=Wd[1];Vd=Wd[2];if(Ve!==ze[0]||We!==ze[1]||Vd!==ze[2])ga.stencilFunc(Ve,We,Vd),ze[0]=Ve,ze[1]=We,ze[2]=Vd;ae=oe[0];Xe=oe[1];jf=oe[2];nf=oe[3];if(ae!==ie[0]||Xe!==ie[1]||jf!==ie[2]||nf!==ie[3])ga.stencilOpSeparate(ae,Xe,jf,nf),ie[0]=ae,ie[1]=Xe,ie[2]=jf,ie[3]=nf;ef=Ad[0];kf=Ad[1];lf=Ad[2];mf=Ad[3];if(ef!==Rd[0]||kf!==Rd[1]||lf!==Rd[2]||mf!==Rd[3])ga.stencilOpSeparate(ef,kf,lf,mf),Rd[0]=ef,Rd[1]=kf,Rd[2]=lf,Rd[3]=mf}g=a.viewport;f=g.x|0;k=g.y|0;h="width"in g?g.width|0:p.framebufferWidth-
f;b="height"in g?g.height|0:p.framebufferHeight-k;t=p.viewportWidth;p.viewportWidth=h;u=p.viewportHeight;p.viewportHeight=b;ga.viewport(f,k,h,b);Yd[0]=f;Yd[1]=k;Yd[2]=h;Yd[3]=b;ga.blendColor(0,0,0,1);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=1;ga.enable(3042);E.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;ga.disable(2929);E.depth_enable=!1;x=a.viewport;A=x.x|0;w=x.y|0;Da="width"in x?x.width|0:p.framebufferWidth-A;O="height"in x?x.height|0:p.framebufferHeight-w;ga.scissor(A,
w,Da,O);re[0]=A;re[1]=w;re[2]=Da;re[3]=O;ga.enable(3089);E.scissor_enable=!0;ga.disable(2960);E.stencil_enable=!1;if(D=E.profile)F=performance.now(),da.count++;ga.useProgram(K.program);R=td.angle_instanced_arrays;xa.setVAO(null);oa=L.call(this,p,a,0);C=!1;M=null;z=0;N=!1;Q=y=0;S=1;Fa=0;T=5126;ba=ea=X=W=0;I(oa)?(C=!0,M=r.createStream(34962,oa),T=M.dtype):(M=r.getBuffer(oa))?T=M.dtype:"constant"in oa?(S=2,"number"===typeof oa.constant?(X=oa.constant,ea=ba=W=0):(X=0<oa.constant.length?oa.constant[0]:
0,ea=1<oa.constant.length?oa.constant[1]:0,ba=2<oa.constant.length?oa.constant[2]:0,W=3<oa.constant.length?oa.constant[3]:0)):(M=I(oa.buffer)?r.createStream(34962,oa.buffer):r.getBuffer(oa.buffer),T="type"in oa?fe[oa.type]:M.dtype,N=!!oa.normalized,Q=oa.size|0,y=oa.offset|0,Fa=oa.stride|0,z=oa.divisor|0);ia=ya.location;Y=Ta[ia];if(1===S){Y.buffer||ga.enableVertexAttribArray(ia);ja=Q||1;if(Y.type!==T||Y.size!==ja||Y.buffer!==M||Y.normalized!==N||Y.offset!==y||Y.stride!==Fa)ga.bindBuffer(34962,M.buffer),
ga.vertexAttribPointer(ia,ja,T,N,Fa,y),Y.type=T,Y.size=ja,Y.buffer=M,Y.normalized=N,Y.offset=y,Y.stride=Fa;Y.divisor!==z&&(R.vertexAttribDivisorANGLE(ia,z),Y.divisor=z)}else if(Y.buffer&&(ga.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ba||Y.w!==W)ga.vertexAttrib4f(ia,X,ea,ba,W),Y.x=X,Y.y=ea,Y.z=ba,Y.w=W;ta=e.call(this,p,a,0);Z=!1;Cc=null;Ia=0;qc=!1;db=yb=0;Nb=1;bb=0;ob=5126;Jb=Ib=Dd=Ua=0;I(ta)?(Z=!0,Cc=r.createStream(34962,ta),ob=Cc.dtype):(Cc=r.getBuffer(ta))?ob=Cc.dtype:
"constant"in ta?(Nb=2,"number"===typeof ta.constant?(Dd=ta.constant,Ib=Jb=Ua=0):(Dd=0<ta.constant.length?ta.constant[0]:0,Ib=1<ta.constant.length?ta.constant[1]:0,Jb=2<ta.constant.length?ta.constant[2]:0,Ua=3<ta.constant.length?ta.constant[3]:0)):(Cc=I(ta.buffer)?r.createStream(34962,ta.buffer):r.getBuffer(ta.buffer),ob="type"in ta?fe[ta.type]:Cc.dtype,qc=!!ta.normalized,db=ta.size|0,yb=ta.offset|0,bb=ta.stride|0,Ia=ta.divisor|0);rc=na.location;Ob=Ta[rc];if(1===Nb){Ob.buffer||ga.enableVertexAttribArray(rc);
jb=db||1;if(Ob.type!==ob||Ob.size!==jb||Ob.buffer!==Cc||Ob.normalized!==qc||Ob.offset!==yb||Ob.stride!==bb)ga.bindBuffer(34962,Cc.buffer),ga.vertexAttribPointer(rc,jb,ob,qc,bb,yb),Ob.type=ob,Ob.size=jb,Ob.buffer=Cc,Ob.normalized=qc,Ob.offset=yb,Ob.stride=bb;Ob.divisor!==Ia&&(R.vertexAttribDivisorANGLE(rc,Ia),Ob.divisor=Ia)}else if(Ob.buffer&&(ga.disableVertexAttribArray(rc),Ob.buffer=null),Ob.x!==Dd||Ob.y!==Ib||Ob.z!==Jb||Ob.w!==Ua)ga.vertexAttrib4f(rc,Dd,Ib,Jb,Ua),Ob.x=Dd,Ob.y=Ib,Ob.z=Jb,Ob.w=Ua;
Gb=l.call(this,p,a,0);Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;Ha=pb=ib=ic=0;I(Gb)?(Db=!0,wb=r.createStream(34962,Gb),zb=wb.dtype):(wb=r.getBuffer(Gb))?zb=wb.dtype:"constant"in Gb?(Ra=2,"number"===typeof Gb.constant?(ib=Gb.constant,pb=Ha=ic=0):(ib=0<Gb.constant.length?Gb.constant[0]:0,pb=1<Gb.constant.length?Gb.constant[1]:0,Ha=2<Gb.constant.length?Gb.constant[2]:0,ic=3<Gb.constant.length?Gb.constant[3]:0)):(wb=I(Gb.buffer)?r.createStream(34962,Gb.buffer):r.getBuffer(Gb.buffer),zb="type"in
Gb?fe[Gb.type]:wb.dtype,Yb=!!Gb.normalized,qb=Gb.size|0,Pb=Gb.offset|0,Ub=Gb.stride|0,hb=Gb.divisor|0);rb=Ja.location;Ka=Ta[rb];if(1===Ra){Ka.buffer||ga.enableVertexAttribArray(rb);fb=qb||1;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)ga.bindBuffer(34962,wb.buffer),ga.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(R.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=
hb)}else if(Ka.buffer&&(ga.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==ic)ga.vertexAttrib4f(rb,ib,pb,Ha,ic),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=ic;gb=q.call(this,p,a,0);La=!1;kb=null;Va=0;tb=!1;Oa=sb=0;tc=1;Qa=0;Kb=5126;Xa=Ed=Ma=Eb=0;I(gb)?(La=!0,kb=r.createStream(34962,gb),Kb=kb.dtype):(kb=r.getBuffer(gb))?Kb=kb.dtype:"constant"in gb?(tc=2,"number"===typeof gb.constant?(Ma=gb.constant,Ed=Xa=Eb=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Ed=1<gb.constant.length?
gb.constant[1]:0,Xa=2<gb.constant.length?gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(kb=I(gb.buffer)?r.createStream(34962,gb.buffer):r.getBuffer(gb.buffer),Kb="type"in gb?fe[gb.type]:kb.dtype,tb=!!gb.normalized,Oa=gb.size|0,sb=gb.offset|0,Qa=gb.stride|0,Va=gb.divisor|0);Lb=Za.location;Mb=Ta[Lb];if(1===tc){Mb.buffer||ga.enableVertexAttribArray(Lb);lb=Oa||1;if(Mb.type!==Kb||Mb.size!==lb||Mb.buffer!==kb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Qa)ga.bindBuffer(34962,kb.buffer),
ga.vertexAttribPointer(Lb,lb,Kb,tb,Qa,sb),Mb.type=Kb,Mb.size=lb,Mb.buffer=kb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Qa;Mb.divisor!==Va&&(R.vertexAttribDivisorANGLE(Lb,Va),Mb.divisor=Va)}else if(Mb.buffer&&(ga.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Ma||Mb.y!==Ed||Mb.z!==Xa||Mb.w!==Eb)ga.vertexAttrib4f(Lb,Ma,Ed,Xa,Eb),Mb.x=Ma,Mb.y=Ed,Mb.z=Xa,Mb.w=Eb;Na=c.call(this,p,a,0);Zb=!1;Pa=null;ub=0;vb=!1;nb=Sa=0;fc=1;Ac=0;vc=5126;Wa=qd=jc=cb=0;I(Na)?(Zb=!0,Pa=r.createStream(34962,Na),vc=Pa.dtype):
(Pa=r.getBuffer(Na))?vc=Pa.dtype:"constant"in Na?(fc=2,"number"===typeof Na.constant?(jc=Na.constant,qd=Wa=cb=0):(jc=0<Na.constant.length?Na.constant[0]:0,qd=1<Na.constant.length?Na.constant[1]:0,Wa=2<Na.constant.length?Na.constant[2]:0,cb=3<Na.constant.length?Na.constant[3]:0)):(Pa=I(Na.buffer)?r.createStream(34962,Na.buffer):r.getBuffer(Na.buffer),vc="type"in Na?fe[Na.type]:Pa.dtype,vb=!!Na.normalized,nb=Na.size|0,Sa=Na.offset|0,Ac=Na.stride|0,ub=Na.divisor|0);Mc=Ba.location;Ab=Ta[Mc];if(1===fc){Ab.buffer||
ga.enableVertexAttribArray(Mc);Ya=nb||1;if(Ab.type!==vc||Ab.size!==Ya||Ab.buffer!==Pa||Ab.normalized!==vb||Ab.offset!==Sa||Ab.stride!==Ac)ga.bindBuffer(34962,Pa.buffer),ga.vertexAttribPointer(Mc,Ya,vc,vb,Ac,Sa),Ab.type=vc,Ab.size=Ya,Ab.buffer=Pa,Ab.normalized=vb,Ab.offset=Sa,Ab.stride=Ac;Ab.divisor!==ub&&(R.vertexAttribDivisorANGLE(Mc,ub),Ab.divisor=ub)}else if(Ab.buffer&&(ga.disableVertexAttribArray(Mc),Ab.buffer=null),Ab.x!==jc||Ab.y!==qd||Ab.z!==Wa||Ab.w!==cb)ga.vertexAttrib4f(Mc,jc,qd,Wa,cb),
Ab.x=jc,Ab.y=qd,Ab.z=Wa,Ab.w=cb;Vb=G.call(this,p,a,0);uc=!1;Wb=null;Qb=0;Kc=!1;pe=Rb=0;Fc=1;sd=0;Nc=5126;wc=nc=ud=Yc=0;I(Vb)?(uc=!0,Wb=r.createStream(34962,Vb),Nc=Wb.dtype):(Wb=r.getBuffer(Vb))?Nc=Wb.dtype:"constant"in Vb?(Fc=2,"number"===typeof Vb.constant?(ud=Vb.constant,nc=wc=Yc=0):(ud=0<Vb.constant.length?Vb.constant[0]:0,nc=1<Vb.constant.length?Vb.constant[1]:0,wc=2<Vb.constant.length?Vb.constant[2]:0,Yc=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=I(Vb.buffer)?r.createStream(34962,Vb.buffer):
r.getBuffer(Vb.buffer),Nc="type"in Vb?fe[Vb.type]:Wb.dtype,Kc=!!Vb.normalized,pe=Vb.size|0,Rb=Vb.offset|0,sd=Vb.stride|0,Qb=Vb.divisor|0);gc=qa.location;eb=Ta[gc];if(1===Fc){eb.buffer||ga.enableVertexAttribArray(gc);sc=pe||1;if(eb.type!==Nc||eb.size!==sc||eb.buffer!==Wb||eb.normalized!==Kc||eb.offset!==Rb||eb.stride!==sd)ga.bindBuffer(34962,Wb.buffer),ga.vertexAttribPointer(gc,sc,Nc,Kc,sd,Rb),eb.type=Nc,eb.size=sc,eb.buffer=Wb,eb.normalized=Kc,eb.offset=Rb,eb.stride=sd;eb.divisor!==Qb&&(R.vertexAttribDivisorANGLE(gc,
Qb),eb.divisor=Qb)}else if(eb.buffer&&(ga.disableVertexAttribArray(gc),eb.buffer=null),eb.x!==ud||eb.y!==nc||eb.z!==wc||eb.w!==Yc)ga.vertexAttrib4f(gc,ud,nc,wc,Yc),eb.x=ud,eb.y=nc,eb.z=wc,eb.w=Yc;Tb=H.call(this,p,a,0);Xb=!1;cc=null;hc=0;yc=!1;cd=Bc=0;Qc=1;Rc=0;Sc=5126;$c=dd=od=Zc=0;I(Tb)?(Xb=!0,cc=r.createStream(34962,Tb),Sc=cc.dtype):(cc=r.getBuffer(Tb))?Sc=cc.dtype:"constant"in Tb?(Qc=2,"number"===typeof Tb.constant?(od=Tb.constant,dd=$c=Zc=0):(od=0<Tb.constant.length?Tb.constant[0]:0,dd=1<Tb.constant.length?
Tb.constant[1]:0,$c=2<Tb.constant.length?Tb.constant[2]:0,Zc=3<Tb.constant.length?Tb.constant[3]:0)):(cc=I(Tb.buffer)?r.createStream(34962,Tb.buffer):r.getBuffer(Tb.buffer),Sc="type"in Tb?fe[Tb.type]:cc.dtype,yc=!!Tb.normalized,cd=Tb.size|0,Bc=Tb.offset|0,Rc=Tb.stride|0,hc=Tb.divisor|0);kc=m.location;bc=Ta[kc];if(1===Qc){bc.buffer||ga.enableVertexAttribArray(kc);ad=cd||4;if(bc.type!==Sc||bc.size!==ad||bc.buffer!==cc||bc.normalized!==yc||bc.offset!==Bc||bc.stride!==Rc)ga.bindBuffer(34962,cc.buffer),
ga.vertexAttribPointer(kc,ad,Sc,yc,Rc,Bc),bc.type=Sc,bc.size=ad,bc.buffer=cc,bc.normalized=yc,bc.offset=Bc,bc.stride=Rc;bc.divisor!==hc&&(R.vertexAttribDivisorANGLE(kc,hc),bc.divisor=hc)}else if(bc.buffer&&(ga.disableVertexAttribArray(kc),bc.buffer=null),bc.x!==od||bc.y!==dd||bc.z!==$c||bc.w!==Zc)ga.vertexAttrib4f(kc,od,dd,$c,Zc),bc.x=od,bc.y=dd,bc.z=$c,bc.w=Zc;Uc=B.call(this,p,a,0);ed=!1;zc=null;id=0;Nd=!1;ue=xd=0;jd=1;Ce=0;Od=5126;Jd=Pd=ce=ge=0;I(Uc)?(ed=!0,zc=r.createStream(34962,Uc),Od=zc.dtype):
(zc=r.getBuffer(Uc))?Od=zc.dtype:"constant"in Uc?(jd=2,"number"===typeof Uc.constant?(ce=Uc.constant,Pd=Jd=ge=0):(ce=0<Uc.constant.length?Uc.constant[0]:0,Pd=1<Uc.constant.length?Uc.constant[1]:0,Jd=2<Uc.constant.length?Uc.constant[2]:0,ge=3<Uc.constant.length?Uc.constant[3]:0)):(zc=I(Uc.buffer)?r.createStream(34962,Uc.buffer):r.getBuffer(Uc.buffer),Od="type"in Uc?fe[Uc.type]:zc.dtype,Nd=!!Uc.normalized,ue=Uc.size|0,xd=Uc.offset|0,Ce=Uc.stride|0,id=Uc.divisor|0);Hd=Ca.location;md=Ta[Hd];if(1===jd){md.buffer||
ga.enableVertexAttribArray(Hd);Tc=ue||4;if(md.type!==Od||md.size!==Tc||md.buffer!==zc||md.normalized!==Nd||md.offset!==xd||md.stride!==Ce)ga.bindBuffer(34962,zc.buffer),ga.vertexAttribPointer(Hd,Tc,Od,Nd,Ce,xd),md.type=Od,md.size=Tc,md.buffer=zc,md.normalized=Nd,md.offset=xd,md.stride=Ce;md.divisor!==id&&(R.vertexAttribDivisorANGLE(Hd,id),md.divisor=id)}else if(md.buffer&&(ga.disableVertexAttribArray(Hd),md.buffer=null),md.x!==ce||md.y!==Pd||md.z!==Jd||md.w!==ge)ga.vertexAttrib4f(Hd,ce,Pd,Jd,ge),
md.x=ce,md.y=Pd,md.z=Jd,md.w=ge;vd=U.call(this,p,a,0);rd=!1;kd=null;wd=0;Cd=!1;je=Fd=0;ye=1;Fe=0;le=5126;de=ve=he=ke=0;I(vd)?(rd=!0,kd=r.createStream(34962,vd),le=kd.dtype):(kd=r.getBuffer(vd))?le=kd.dtype:"constant"in vd?(ye=2,"number"===typeof vd.constant?(he=vd.constant,ve=de=ke=0):(he=0<vd.constant.length?vd.constant[0]:0,ve=1<vd.constant.length?vd.constant[1]:0,de=2<vd.constant.length?vd.constant[2]:0,ke=3<vd.constant.length?vd.constant[3]:0)):(kd=I(vd.buffer)?r.createStream(34962,vd.buffer):
r.getBuffer(vd.buffer),le="type"in vd?fe[vd.type]:kd.dtype,Cd=!!vd.normalized,je=vd.size|0,Fd=vd.offset|0,Fe=vd.stride|0,wd=vd.divisor|0);me=aa.location;Oc=Ta[me];if(1===ye){Oc.buffer||ga.enableVertexAttribArray(me);gd=je||1;if(Oc.type!==le||Oc.size!==gd||Oc.buffer!==kd||Oc.normalized!==Cd||Oc.offset!==Fd||Oc.stride!==Fe)ga.bindBuffer(34962,kd.buffer),ga.vertexAttribPointer(me,gd,le,Cd,Fe,Fd),Oc.type=le,Oc.size=gd,Oc.buffer=kd,Oc.normalized=Cd,Oc.offset=Fd,Oc.stride=Fe;Oc.divisor!==wd&&(R.vertexAttribDivisorANGLE(me,
wd),Oc.divisor=wd)}else if(Oc.buffer&&(ga.disableVertexAttribArray(me),Oc.buffer=null),Oc.x!==he||Oc.y!==ve||Oc.z!==de||Oc.w!==ke)ga.vertexAttrib4f(me,he,ve,de,ke),Oc.x=he,Oc.y=ve,Oc.z=de,Oc.w=ke;ga.uniform1i(J.location,!1);ga.uniform1f(Aa.location,p.pixelRatio);we=n.call(this,p,a,0);ga.uniform2f(la.location,we[0],we[1]);qe=a.scale;ga.uniform2f(wa.location,qe[0],qe[1]);Kd=a.scaleFract;ga.uniform2f(fa.location,Kd[0],Kd[1]);Qd=a.translate;ga.uniform2f(ka.location,Qd[0],Qd[1]);Sd=a.translateFract;ga.uniform2f(pa.location,
Sd[0],Sd[1]);ga.uniform1f(P.location,a.opacity);ga.uniform1i(ra.location,v.bind());Td=a.elements;ne=null;(ne=(Ge=I(Td))?Ea.createStream(Td):Ea.getElements(Td))&&ga.bindBuffer(34963,ne.buffer.buffer);Be=a.offset;if(se=a.count)Se=va.instances,0<Se?ne?R.drawElementsInstancedANGLE(0,se,ne.type,Be<<(ne.type-5121>>1),Se):R.drawArraysInstancedANGLE(0,Be,se,Se):0>Se&&(ne?ga.drawElements(0,se,ne.type,Be<<(ne.type-5121>>1)):ga.drawArrays(0,Be,se)),E.dirty=!0,xa.setVAO(null),p.viewportWidth=t,p.viewportHeight=
u,D&&(da.cpuTime+=performance.now()-F),C&&r.destroyStream(M),Z&&r.destroyStream(Cc),Db&&r.destroyStream(wb),La&&r.destroyStream(kb),Zb&&r.destroyStream(Pa),uc&&r.destroyStream(Wb),Xb&&r.destroyStream(cc),ed&&r.destroyStream(zc),rd&&r.destroyStream(kd),v.unbind(),Ge&&Ea.destroyStream(ne)},scope:function(c,g,l){var m,b,q,na,e,A,J,O,D,P,R,fa,M,ga,L,Za,v,Ja,ma,n,N,V,H,aa,xa,K,wa,ra,G,Ca,B,U,ca,ka,W,ea,Ta,pa,Ba,la,qa,ya,ta,ja,ua,Hb,Aa,Cc,Z,za,Ga,td,mb,Sb,ha,Ra,$b,ac,Wd,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,
sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,Rd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,Yd,Fc,re,Nc,Yc,ze,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,$a,dd,$c,kc,bc,ad,Uc,ed,zc,id,ie,oe,Ad,jd,Ce,Od,ge,ce,Pd,Jd,Hd,md,Tc,vd,rd,kd,wd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Qd,Sd,Td,ne,Ge,Be,se,Se,Te,Oe,xe,He,Je,Ke,Le,Ie,Ld,Xd,be,ee,Me,Id,Ud,De,Ne,pg,bf,Ue,Pe,af,Ze,Ve,We,Vd,ae,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,
Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;m=c.viewport;b=m.x|0;q=m.y|0;na="width"in m?m.width|0:p.framebufferWidth-b;e="height"in m?m.height|0:p.framebufferHeight-q;A=p.viewportWidth;p.viewportWidth=na;J=p.viewportHeight;p.viewportHeight=e;O=Ed[0];Ed[0]=b;D=Ed[1];Ed[1]=q;P=Ed[2];Ed[2]=na;R=Ed[3];Ed[3]=e;fa=Fa[0];Fa[0]=0;M=Fa[1];Fa[1]=0;ga=Fa[2];Fa[2]=0;L=Fa[3];
Fa[3]=1;Za=sa.blend_enable;sa.blend_enable=!0;v=Ia[0];Ia[0]=770;Ja=Ia[1];Ia[1]=771;ma=Ia[2];Ia[2]=773;n=Ia[3];Ia[3]=1;N=sa.depth_enable;sa.depth_enable=!1;V=c.viewport;H=V.x|0;aa=V.y|0;xa="width"in V?V.width|0:p.framebufferWidth-H;K="height"in V?V.height|0:p.framebufferHeight-aa;wa=Dd[0];Dd[0]=H;ra=Dd[1];Dd[1]=aa;G=Dd[2];Dd[2]=xa;Ca=Dd[3];Dd[3]=K;B=sa.scissor_enable;sa.scissor_enable=!0;U=sa.stencil_enable;sa.stencil_enable=!1;if(ca=E.profile)ka=performance.now(),da.count++;W=c.elements;ea=null;ea=
(Ta=I(W))?Ea.createStream(W):Ea.getElements(W);pa=va.elements;va.elements=ea;Ba=c.offset;la=va.offset;va.offset=Ba;qa=c.count;ya=va.count;va.count=qa;ta=va.primitive;va.primitive=0;ja=oa[45];oa[45]=!1;ua=c.markerTexture;Hb=oa[48];oa[48]=ua;Aa=c.opacity;Cc=oa[10];oa[10]=Aa;Z=y.call(this,p,c,l);za=oa[46];oa[46]=Z;Ga=oa[47];oa[47]=ba;td=p.pixelRatio;mb=oa[34];oa[34]=td;Sb=c.scale;ha=oa[6];oa[6]=Sb;Ra=c.scaleFract;$b=oa[7];oa[7]=Ra;ac=c.translate;Wd=oa[8];oa[8]=ac;ib=c.translateFract;pb=oa[9];oa[9]=ib;
Ha=w.call(this,p,c,l);rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;I(Ha)?(rb=!0,Ka=r.createStream(34962,Ha),sb=Ka.dtype):(Ka=r.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Va=2,"number"===typeof Ha.constant?(tc=Ha.constant,Qa=Kb=Oa=0):(tc=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=I(Ha.buffer)?r.createStream(34962,Ha.buffer):r.getBuffer(Ha.buffer),sb="type"in
Ha?fe[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=T.buffer;T.buffer=Ka;Ma=T.divisor;T.divisor=fb;yd=T.normalized;T.normalized=gb;Xa=T.offset;T.offset=La;Lb=T.size;T.size=kb;Mb=T.state;T.state=Va;lb=T.stride;T.stride=tb;Na=T.type;T.type=sb;Zb=T.w;T.w=Oa;Pa=T.x;T.x=tc;ub=T.y;T.y=Qa;vb=T.z;T.z=Kb;Sa=z.call(this,p,c,l);nb=!1;fc=null;Ac=0;vc=!1;jc=cb=0;Rd=1;Wa=0;Mc=5126;uc=Vb=Ya=Ab=0;I(Sa)?(nb=!0,fc=r.createStream(34962,Sa),Mc=fc.dtype):(fc=r.getBuffer(Sa))?
Mc=fc.dtype:"constant"in Sa?(Rd=2,"number"===typeof Sa.constant?(Ya=Sa.constant,Vb=uc=Ab=0):(Ya=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(fc=I(Sa.buffer)?r.createStream(34962,Sa.buffer):r.getBuffer(Sa.buffer),Mc="type"in Sa?fe[Sa.type]:fc.dtype,vc=!!Sa.normalized,jc=Sa.size|0,cb=Sa.offset|0,Wa=Sa.stride|0,Ac=Sa.divisor|0);Wb=Q.buffer;Q.buffer=fc;Qb=Q.divisor;Q.divisor=Ac;Kc=Q.normalized;
Q.normalized=vc;Rb=Q.offset;Q.offset=cb;Yd=Q.size;Q.size=jc;Fc=Q.state;Q.state=Rd;re=Q.stride;Q.stride=Wa;Nc=Q.type;Q.type=Mc;Yc=Q.w;Q.w=Ab;ze=Q.x;Q.x=Ya;nc=Q.y;Q.y=Vb;wc=Q.z;Q.z=uc;gc=ia.call(this,p,c,l);eb=!1;sc=null;Tb=0;Xb=!1;hc=cc=0;yc=1;Bc=0;cd=5126;Zc=Sc=Rc=Qc=0;I(gc)?(eb=!0,sc=r.createStream(34962,gc),cd=sc.dtype):(sc=r.getBuffer(gc))?cd=sc.dtype:"constant"in gc?(yc=2,"number"===typeof gc.constant?(Rc=gc.constant,Sc=Zc=Qc=0):(Rc=0<gc.constant.length?gc.constant[0]:0,Sc=1<gc.constant.length?
gc.constant[1]:0,Zc=2<gc.constant.length?gc.constant[2]:0,Qc=3<gc.constant.length?gc.constant[3]:0)):(sc=I(gc.buffer)?r.createStream(34962,gc.buffer):r.getBuffer(gc.buffer),cd="type"in gc?fe[gc.type]:sc.dtype,Xb=!!gc.normalized,hc=gc.size|0,cc=gc.offset|0,Bc=gc.stride|0,Tb=gc.divisor|0);$a=k.buffer;k.buffer=sc;dd=k.divisor;k.divisor=Tb;$c=k.normalized;k.normalized=Xb;kc=k.offset;k.offset=cc;bc=k.size;k.size=hc;ad=k.state;k.state=yc;Uc=k.stride;k.stride=Bc;ed=k.type;k.type=cd;zc=k.w;k.w=Qc;id=k.x;
k.x=Rc;ie=k.y;k.y=Sc;oe=k.z;k.z=Zc;Ad=u.call(this,p,c,l);jd=!1;Ce=null;Od=0;ge=!1;Pd=ce=0;Jd=1;Hd=0;md=5126;kd=rd=vd=Tc=0;I(Ad)?(jd=!0,Ce=r.createStream(34962,Ad),md=Ce.dtype):(Ce=r.getBuffer(Ad))?md=Ce.dtype:"constant"in Ad?(Jd=2,"number"===typeof Ad.constant?(vd=Ad.constant,rd=kd=Tc=0):(vd=0<Ad.constant.length?Ad.constant[0]:0,rd=1<Ad.constant.length?Ad.constant[1]:0,kd=2<Ad.constant.length?Ad.constant[2]:0,Tc=3<Ad.constant.length?Ad.constant[3]:0)):(Ce=I(Ad.buffer)?r.createStream(34962,Ad.buffer):
r.getBuffer(Ad.buffer),md="type"in Ad?fe[Ad.type]:Ce.dtype,ge=!!Ad.normalized,Pd=Ad.size|0,ce=Ad.offset|0,Hd=Ad.stride|0,Od=Ad.divisor|0);wd=S.buffer;S.buffer=Ce;Cd=S.divisor;S.divisor=Od;Fd=S.normalized;S.normalized=ge;je=S.offset;S.offset=ce;ye=S.size;S.size=Pd;Fe=S.state;S.state=Jd;le=S.stride;S.stride=Hd;ke=S.type;S.type=md;he=S.w;S.w=Tc;ve=S.x;S.x=vd;de=S.y;S.y=rd;me=S.z;S.z=kd;Oc=h.call(this,p,c,l);gd=!1;we=null;qe=0;Kd=!1;Sd=Qd=0;Td=1;ne=0;Ge=5126;Te=Se=se=Be=0;I(Oc)?(gd=!0,we=r.createStream(34962,
Oc),Ge=we.dtype):(we=r.getBuffer(Oc))?Ge=we.dtype:"constant"in Oc?(Td=2,"number"===typeof Oc.constant?(se=Oc.constant,Se=Te=Be=0):(se=0<Oc.constant.length?Oc.constant[0]:0,Se=1<Oc.constant.length?Oc.constant[1]:0,Te=2<Oc.constant.length?Oc.constant[2]:0,Be=3<Oc.constant.length?Oc.constant[3]:0)):(we=I(Oc.buffer)?r.createStream(34962,Oc.buffer):r.getBuffer(Oc.buffer),Ge="type"in Oc?fe[Oc.type]:we.dtype,Kd=!!Oc.normalized,Sd=Oc.size|0,Qd=Oc.offset|0,ne=Oc.stride|0,qe=Oc.divisor|0);Oe=X.buffer;X.buffer=
we;xe=X.divisor;X.divisor=qe;He=X.normalized;X.normalized=Kd;Je=X.offset;X.offset=Qd;Ke=X.size;X.size=Sd;Le=X.state;X.state=Td;Ie=X.stride;X.stride=ne;Ld=X.type;X.type=Ge;Xd=X.w;X.w=Be;be=X.x;X.x=se;ee=X.y;X.y=Se;Me=X.z;X.z=Te;Id=f.call(this,p,c,l);Ud=!1;De=null;Ne=0;pg=!1;Ue=bf=0;Pe=1;af=0;Ze=5126;ae=Vd=We=Ve=0;I(Id)?(Ud=!0,De=r.createStream(34962,Id),Ze=De.dtype):(De=r.getBuffer(Id))?Ze=De.dtype:"constant"in Id?(Pe=2,"number"===typeof Id.constant?(We=Id.constant,Vd=ae=Ve=0):(We=0<Id.constant.length?
Id.constant[0]:0,Vd=1<Id.constant.length?Id.constant[1]:0,ae=2<Id.constant.length?Id.constant[2]:0,Ve=3<Id.constant.length?Id.constant[3]:0)):(De=I(Id.buffer)?r.createStream(34962,Id.buffer):r.getBuffer(Id.buffer),Ze="type"in Id?fe[Id.type]:De.dtype,pg=!!Id.normalized,Ue=Id.size|0,bf=Id.offset|0,af=Id.stride|0,Ne=Id.divisor|0);Xe=x.buffer;x.buffer=De;jf=x.divisor;x.divisor=Ne;nf=x.normalized;x.normalized=pg;ef=x.offset;x.offset=bf;kf=x.size;x.size=Ue;lf=x.state;x.state=Pe;mf=x.stride;x.stride=af;
rf=x.type;x.type=Ze;of=x.w;x.w=Ve;sf=x.x;x.x=We;Bf=x.y;x.y=Vd;Cf=x.z;x.z=ae;Qe=Y.call(this,p,c,l);Ee=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;I(Qe)?(Ee=!0,pf=r.createStream(34962,Qe),wf=pf.dtype):(pf=r.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(pf=
I(Qe.buffer)?r.createStream(34962,Qe.buffer):r.getBuffer(Qe.buffer),wf="type"in Qe?fe[Qe.type]:pf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=C.buffer;C.buffer=pf;Jf=C.divisor;C.divisor=qf;Kf=C.normalized;C.normalized=Df;Lf=C.offset;C.offset=Gf;tf=C.size;C.size=Af;Qf=C.state;C.state=Ef;Hf=C.stride;C.stride=Ff;uf=C.type;C.type=wf;cg=C.w;C.w=xf;Rf=C.x;C.x=vf;Sf=C.y;C.y=yf;qg=C.z;C.z=zf;ff=F.call(this,p,c,l);cf=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;
Yf=Xf=Wf=Tf=0;I(ff)?(cf=!0,Mf=r.createStream(34962,ff),Vf=Mf.dtype):(Mf=r.getBuffer(ff))?Vf=Mf.dtype:"constant"in ff?(gg=2,"number"===typeof ff.constant?(Wf=ff.constant,Xf=Yf=Tf=0):(Wf=0<ff.constant.length?ff.constant[0]:0,Xf=1<ff.constant.length?ff.constant[1]:0,Yf=2<ff.constant.length?ff.constant[2]:0,Tf=3<ff.constant.length?ff.constant[3]:0)):(Mf=I(ff.buffer)?r.createStream(34962,ff.buffer):r.getBuffer(ff.buffer),Vf="type"in ff?fe[ff.type]:Mf.dtype,dg=!!ff.normalized,fg=ff.size|0,eg=ff.offset|
0,hg=ff.stride|0,Nf=ff.divisor|0);ig=d.buffer;d.buffer=Mf;rg=d.divisor;d.divisor=Nf;sg=d.normalized;d.normalized=dg;tg=d.offset;d.offset=eg;ug=d.size;d.size=fg;vg=d.state;d.state=gg;wg=d.stride;d.stride=hg;xg=d.type;d.type=Vf;yg=d.w;d.w=Tf;zg=d.x;d.x=Wf;Ag=d.y;d.y=Xf;Bg=d.z;d.z=Yf;gf=t.call(this,p,c,l);df=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;I(gf)?(df=!0,Of=r.createStream(34962,gf),Zf=Of.dtype):(Of=r.getBuffer(gf))?Zf=Of.dtype:"constant"in gf?(mg=2,"number"===typeof gf.constant?
($f=gf.constant,ag=bg=Uf=0):($f=0<gf.constant.length?gf.constant[0]:0,ag=1<gf.constant.length?gf.constant[1]:0,bg=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Of=I(gf.buffer)?r.createStream(34962,gf.buffer):r.getBuffer(gf.buffer),Zf="type"in gf?fe[gf.type]:Of.dtype,jg=!!gf.normalized,lg=gf.size|0,kg=gf.offset|0,ng=gf.stride|0,Pf=gf.divisor|0);og=a.buffer;a.buffer=Of;Cg=a.divisor;a.divisor=Pf;Dg=a.normalized;a.normalized=jg;Eg=a.offset;a.offset=kg;Fg=a.size;a.size=
lg;Gg=a.state;a.state=mg;Hg=a.stride;a.stride=ng;Ig=a.type;a.type=Zf;Jg=a.w;a.w=Uf;Kg=a.x;a.x=$f;Lg=a.y;a.y=ag;Mg=a.z;a.z=bg;Ng=Da.vert;Da.vert=59;Og=Da.frag;Da.frag=58;E.dirty=!0;g(p,c,l);p.viewportWidth=A;p.viewportHeight=J;Ed[0]=O;Ed[1]=D;Ed[2]=P;Ed[3]=R;Fa[0]=fa;Fa[1]=M;Fa[2]=ga;Fa[3]=L;sa.blend_enable=Za;Ia[0]=v;Ia[1]=Ja;Ia[2]=ma;Ia[3]=n;sa.depth_enable=N;Dd[0]=wa;Dd[1]=ra;Dd[2]=G;Dd[3]=Ca;sa.scissor_enable=B;sa.stencil_enable=U;ca&&(da.cpuTime+=performance.now()-ka);Ta&&Ea.destroyStream(ea);
va.elements=pa;va.offset=la;va.count=ya;va.primitive=ta;oa[45]=ja;oa[48]=Hb;oa[10]=Cc;oa[46]=za;oa[47]=Ga;oa[34]=mb;oa[6]=ha;oa[7]=$b;oa[8]=Wd;oa[9]=pb;rb&&r.destroyStream(Ka);T.buffer=Eb;T.divisor=Ma;T.normalized=yd;T.offset=Xa;T.size=Lb;T.state=Mb;T.stride=lb;T.type=Na;T.w=Zb;T.x=Pa;T.y=ub;T.z=vb;nb&&r.destroyStream(fc);Q.buffer=Wb;Q.divisor=Qb;Q.normalized=Kc;Q.offset=Rb;Q.size=Yd;Q.state=Fc;Q.stride=re;Q.type=Nc;Q.w=Yc;Q.x=ze;Q.y=nc;Q.z=wc;eb&&r.destroyStream(sc);k.buffer=$a;k.divisor=dd;k.normalized=
$c;k.offset=kc;k.size=bc;k.state=ad;k.stride=Uc;k.type=ed;k.w=zc;k.x=id;k.y=ie;k.z=oe;jd&&r.destroyStream(Ce);S.buffer=wd;S.divisor=Cd;S.normalized=Fd;S.offset=je;S.size=ye;S.state=Fe;S.stride=le;S.type=ke;S.w=he;S.x=ve;S.y=de;S.z=me;gd&&r.destroyStream(we);X.buffer=Oe;X.divisor=xe;X.normalized=He;X.offset=Je;X.size=Ke;X.state=Le;X.stride=Ie;X.type=Ld;X.w=Xd;X.x=be;X.y=ee;X.z=Me;Ud&&r.destroyStream(De);x.buffer=Xe;x.divisor=jf;x.normalized=nf;x.offset=ef;x.size=kf;x.state=lf;x.stride=mf;x.type=rf;
x.w=of;x.x=sf;x.y=Bf;x.z=Cf;Ee&&r.destroyStream(pf);C.buffer=If;C.divisor=Jf;C.normalized=Kf;C.offset=Lf;C.size=tf;C.state=Qf;C.stride=Hf;C.type=uf;C.w=cg;C.x=Rf;C.y=Sf;C.z=qg;cf&&r.destroyStream(Mf);d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;df&&r.destroyStream(Of);a.buffer=og;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Da.vert=Ng;Da.frag=Og;E.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Cc,W,ea){var R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,Z,Hb,ga,I,sa,Da,oa,xa,Fa,ma,V;R=b.attributes;O=b.buffer;D=b.context;g=b.current;N=b.draw;M=b.elements;Ca=b.extensions;qa=b.framebuffer;m=b.gl;J=b.isBufferArgs;aa=b.next;P=b.shader;
la=b.uniforms;ra=b.vao;Aa=aa.blend_color;wa=g.blend_color;fa=aa.blend_equation;Ba=g.blend_equation;ka=aa.blend_func;pa=g.blend_func;ya=aa.colorMask;Ja=g.colorMask;na=aa.depth_range;Za=g.depth_range;Ta=aa.polygonOffset_offset;r=g.polygonOffset_offset;p=aa.sample_coverage;E=g.sample_coverage;va=aa.scissor_box;Ea=g.scissor_box;Z=aa.stencil_func;Hb=g.stencil_func;ga=aa.stencil_opBack;I=g.stencil_opBack;sa=aa.stencil_opFront;Da=g.stencil_opFront;oa=aa.viewport;xa=g.viewport;Fa={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ma={offset:4,stride:8};V={offset:0,stride:8};return{batch:function(c,l){var b,q,e,w,oa,P,L,v,n,H,y,K,G;b=qa.next;b!==qa.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),qa.cur=b);if(g.dirty){var B,U,ka,ba,la,Aa,ha,Md,$a,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc;B=aa.dither;B!==g.dither&&(B?m.enable(3024):m.disable(3024),g.dither=B);U=fa[0];ka=fa[1];if(U!==Ba[0]||
ka!==Ba[1])m.blendEquationSeparate(U,ka),Ba[0]=U,Ba[1]=ka;ba=aa.depth_func;ba!==g.depth_func&&(m.depthFunc(ba),g.depth_func=ba);la=na[0];Aa=na[1];if(la!==Za[0]||Aa!==Za[1])m.depthRange(la,Aa),Za[0]=la,Za[1]=Aa;ha=aa.depth_mask;ha!==g.depth_mask&&(m.depthMask(ha),g.depth_mask=ha);Md=ya[0];$a=ya[1];$e=ya[2];Re=ya[3];if(Md!==Ja[0]||$a!==Ja[1]||$e!==Ja[2]||Re!==Ja[3])m.colorMask(Md,$a,$e,Re),Ja[0]=Md,Ja[1]=$a,Ja[2]=$e,Ja[3]=Re;Gd=aa.cull_enable;Gd!==g.cull_enable&&(Gd?m.enable(2884):m.disable(2884),g.cull_enable=
Gd);Ae=aa.cull_face;Ae!==g.cull_face&&(m.cullFace(Ae),g.cull_face=Ae);te=aa.frontFace;te!==g.frontFace&&(m.frontFace(te),g.frontFace=te);Zd=aa.lineWidth;Zd!==g.lineWidth&&(m.lineWidth(Zd),g.lineWidth=Zd);Bd=aa.polygonOffset_enable;Bd!==g.polygonOffset_enable&&(Bd?m.enable(32823):m.disable(32823),g.polygonOffset_enable=Bd);$d=Ta[0];ld=Ta[1];if($d!==r[0]||ld!==r[1])m.polygonOffset($d,ld),r[0]=$d,r[1]=ld;bd=aa.sample_alpha;bd!==g.sample_alpha&&(bd?m.enable(32926):m.disable(32926),g.sample_alpha=bd);
pd=aa.sample_enable;pd!==g.sample_enable&&(pd?m.enable(32928):m.disable(32928),g.sample_enable=pd);Lc=p[0];nd=p[1];if(Lc!==E[0]||nd!==E[1])m.sampleCoverage(Lc,nd),E[0]=Lc,E[1]=nd;Gc=aa.stencil_mask;Gc!==g.stencil_mask&&(m.stencilMask(Gc),g.stencil_mask=Gc);fd=Z[0];Pc=Z[1];Wc=Z[2];if(fd!==Hb[0]||Pc!==Hb[1]||Wc!==Hb[2])m.stencilFunc(fd,Pc,Wc),Hb[0]=fd,Hb[1]=Pc,Hb[2]=Wc;Bb=sa[0];Fb=sa[1];Dc=sa[2];xb=sa[3];if(Bb!==Da[0]||Fb!==Da[1]||Dc!==Da[2]||xb!==Da[3])m.stencilOpSeparate(Bb,Fb,Dc,xb),Da[0]=Bb,Da[1]=
Fb,Da[2]=Dc,Da[3]=xb;xc=ga[0];Cb=ga[1];Jc=ga[2];lc=ga[3];if(xc!==I[0]||Cb!==I[1]||Jc!==I[2]||lc!==I[3])m.stencilOpSeparate(xc,Cb,Jc,lc),I[0]=xc,I[1]=Cb,I[2]=Jc,I[3]=lc;Hc=aa.scissor_enable;Hc!==g.scissor_enable&&(Hc?m.enable(3089):m.disable(3089),g.scissor_enable=Hc);Xc=va[0];Vc=va[1];Ec=va[2];dc=va[3];if(Xc!==Ea[0]||Vc!==Ea[1]||Ec!==Ea[2]||dc!==Ea[3])m.scissor(Xc,Vc,Ec,dc),Ea[0]=Xc,Ea[1]=Vc,Ea[2]=Ec,Ea[3]=dc}q=this.viewport;e=q.x|0;w=q.y|0;oa="width"in q?q.width|0:D.framebufferWidth-e;P="height"in
q?q.height|0:D.framebufferHeight-w;L=D.viewportWidth;D.viewportWidth=oa;v=D.viewportHeight;D.viewportHeight=P;m.viewport(e,w,oa,P);xa[0]=e;xa[1]=w;xa[2]=oa;xa[3]=P;m.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;m.enable(3042);g.blend_enable=!0;m.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;m.disable(2929);g.depth_enable=!1;m.disable(2960);g.stencil_enable=!1;if(n=g.profile)H=performance.now(),da.count+=l;m.useProgram(T.program);y=Ca.angle_instanced_arrays;var Ic,oc,
pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb;ra.setVAO(null);V.buffer=this.sizeBuffer;Ic=!1;oc=null;pc=0;mc=!1;ab=ec=0;qc=1;yb=0;db=5126;Ua=ob=bb=Nb=0;J(V)?(Ic=!0,oc=O.createStream(34962,V),db=oc.dtype):(oc=O.getBuffer(V))?db=oc.dtype:"constant"in V?(qc=2,"number"===typeof V.constant?(bb=V.constant,ob=Ua=Nb=0):(bb=0<V.constant.length?V.constant[0]:
0,ob=1<V.constant.length?V.constant[1]:0,Ua=2<V.constant.length?V.constant[2]:0,Nb=3<V.constant.length?V.constant[3]:0)):(oc=J(V.buffer)?O.createStream(34962,V.buffer):O.getBuffer(V.buffer),db="type"in V?Fa[V.type]:oc.dtype,mc=!!V.normalized,ab=V.size|0,ec=V.offset|0,yb=V.stride|0,pc=V.divisor|0);hd=ea.location;Ib=R[hd];if(1===qc){Ib.buffer||m.enableVertexAttribArray(hd);Jb=ab||1;if(Ib.type!==db||Ib.size!==Jb||Ib.buffer!==oc||Ib.normalized!==mc||Ib.offset!==ec||Ib.stride!==yb)m.bindBuffer(34962,oc.buffer),
m.vertexAttribPointer(hd,Jb,db,mc,yb,ec),Ib.type=db,Ib.size=Jb,Ib.buffer=oc,Ib.normalized=mc,Ib.offset=ec,Ib.stride=yb;Ib.divisor!==pc&&(y.vertexAttribDivisorANGLE(hd,pc),Ib.divisor=pc)}else if(Ib.buffer&&(m.disableVertexAttribArray(hd),Ib.buffer=null),Ib.x!==bb||Ib.y!==ob||Ib.z!==Ua||Ib.w!==Nb)m.vertexAttrib4f(hd,bb,ob,Ua,Nb),Ib.x=bb,Ib.y=ob,Ib.z=Ua,Ib.w=Nb;ma.buffer=this.sizeBuffer;rc=!1;Ob=null;jb=0;Gb=!1;wb=Db=0;hb=1;Yb=0;Pb=5126;zb=Ub=Ra=qb=0;J(ma)?(rc=!0,Ob=O.createStream(34962,ma),Pb=Ob.dtype):
(Ob=O.getBuffer(ma))?Pb=Ob.dtype:"constant"in ma?(hb=2,"number"===typeof ma.constant?(Ra=ma.constant,Ub=zb=qb=0):(Ra=0<ma.constant.length?ma.constant[0]:0,Ub=1<ma.constant.length?ma.constant[1]:0,zb=2<ma.constant.length?ma.constant[2]:0,qb=3<ma.constant.length?ma.constant[3]:0)):(Ob=J(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),Pb="type"in ma?Fa[ma.type]:Ob.dtype,Gb=!!ma.normalized,wb=ma.size|0,Db=ma.offset|0,Yb=ma.stride|0,jb=ma.divisor|0);ic=C.location;ib=R[ic];if(1===hb){ib.buffer||
m.enableVertexAttribArray(ic);pb=wb||1;if(ib.type!==Pb||ib.size!==pb||ib.buffer!==Ob||ib.normalized!==Gb||ib.offset!==Db||ib.stride!==Yb)m.bindBuffer(34962,Ob.buffer),m.vertexAttribPointer(ic,pb,Pb,Gb,Yb,Db),ib.type=Pb,ib.size=pb,ib.buffer=Ob,ib.normalized=Gb,ib.offset=Db,ib.stride=Yb;ib.divisor!==jb&&(y.vertexAttribDivisorANGLE(ic,jb),ib.divisor=jb)}else if(ib.buffer&&(m.disableVertexAttribArray(ic),ib.buffer=null),ib.x!==Ra||ib.y!==Ub||ib.z!==zb||ib.w!==qb)m.vertexAttrib4f(ic,Ra,Ub,zb,qb),ib.x=
Ra,ib.y=Ub,ib.z=zb,ib.w=qb;Ha=this.charBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;J(Ha)?(rb=!0,Ka=O.createStream(34962,Ha),sb=Ka.dtype):(Ka=O.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Va=2,"number"===typeof Ha.constant?(tc=Ha.constant,Qa=Kb=Oa=0):(tc=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=J(Ha.buffer)?O.createStream(34962,Ha.buffer):O.getBuffer(Ha.buffer),
sb="type"in Ha?Fa[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=Y.location;Ma=R[Eb];if(1===Va){Ma.buffer||m.enableVertexAttribArray(Eb);zd=kb||1;if(Ma.type!==sb||Ma.size!==zd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)m.bindBuffer(34962,Ka.buffer),m.vertexAttribPointer(Eb,zd,sb,gb,tb,La),Ma.type=sb,Ma.size=zd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(y.vertexAttribDivisorANGLE(Eb,fb),Ma.divisor=
fb)}else if(Ma.buffer&&(m.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==tc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)m.vertexAttrib4f(Eb,tc,Qa,Kb,Oa),Ma.x=tc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Xa=this.position;Lb=!1;Mb=null;lb=0;Na=!1;Pa=Zb=0;ub=1;vb=0;Sa=5126;vc=Ac=fc=nb=0;J(Xa)?(Lb=!0,Mb=O.createStream(34962,Xa),Sa=Mb.dtype):(Mb=O.getBuffer(Xa))?Sa=Mb.dtype:"constant"in Xa?(ub=2,"number"===typeof Xa.constant?(fc=Xa.constant,Ac=vc=nb=0):(fc=0<Xa.constant.length?Xa.constant[0]:0,Ac=1<Xa.constant.length?Xa.constant[1]:
0,vc=2<Xa.constant.length?Xa.constant[2]:0,nb=3<Xa.constant.length?Xa.constant[3]:0)):(Mb=J(Xa.buffer)?O.createStream(34962,Xa.buffer):O.getBuffer(Xa.buffer),Sa="type"in Xa?Fa[Xa.type]:Mb.dtype,Na=!!Xa.normalized,Pa=Xa.size|0,Zb=Xa.offset|0,vb=Xa.stride|0,lb=Xa.divisor|0);cb=ta.location;jc=R[cb];if(1===ub){jc.buffer||m.enableVertexAttribArray(cb);qd=Pa||2;if(jc.type!==Sa||jc.size!==qd||jc.buffer!==Mb||jc.normalized!==Na||jc.offset!==Zb||jc.stride!==vb)m.bindBuffer(34962,Mb.buffer),m.vertexAttribPointer(cb,
qd,Sa,Na,vb,Zb),jc.type=Sa,jc.size=qd,jc.buffer=Mb,jc.normalized=Na,jc.offset=Zb,jc.stride=vb;jc.divisor!==lb&&(y.vertexAttribDivisorANGLE(cb,lb),jc.divisor=lb)}else if(jc.buffer&&(m.disableVertexAttribArray(cb),jc.buffer=null),jc.x!==fc||jc.y!==Ac||jc.z!==vc||jc.w!==nb)m.vertexAttrib4f(cb,fc,Ac,vc,nb),jc.x=fc,jc.y=Ac,jc.z=vc,jc.w=nb;Wa=this.viewportArray;m.uniform4f(W.location,Wa[0],Wa[1],Wa[2],Wa[3]);Mc=this.scale;m.uniform2f(ja.location,Mc[0],Mc[1]);Ab=this.translate;m.uniform2f(Cc.location,Ab[0],
Ab[1]);(Ya=N.elements)?m.bindBuffer(34963,Ya.buffer.buffer):ra.currentVAO&&(Ya=M.getElements(ra.currentVAO.elements))&&m.bindBuffer(34963,Ya.buffer.buffer);Vb=N.instances;for(K=0;K<l;++K){G=c[K];var uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id,Nd;uc=z.call(this,D,G,K);K&&Wb===uc||(Wb=uc,m.uniform1f(F.location,uc));Qb=Q.call(this,D,G,K);K&&Kc===Qb||(Kc=Qb,m.uniform1f(t.location,Qb));Rb=G.align;K&&pe===Rb||(pe=Rb,m.uniform1f(S.location,
Rb));Fc=G.baseline;K&&sd===Fc||(sd=Fc,m.uniform1f(x.location,Fc));Nc=G.color;Yc=Nc[0];nc=Nc[1];gc=Nc[2];sc=Nc[3];K&&ud===Yc&&wc===nc&&eb===gc&&Tb===sc||(ud=Yc,wc=nc,eb=gc,Tb=sc,m.uniform4f(d.location,Yc,nc,gc,sc));Xb=ia.call(this,D,G,K);cc=Xb[0];yc=Xb[1];K&&hc===cc&&Bc===yc||(hc=cc,Bc=yc,m.uniform2f(f.location,cc,yc));cd=k.call(this,D,G,K);Qc=cd[0];Sc=cd[1];K&&Rc===Qc&&Zc===Sc||(Rc=Qc,Zc=Sc,m.uniform2f(X.location,Qc,Sc));od=G.positionOffset;dd=od[0];kc=od[1];K&&$c===dd&&bc===kc||($c=dd,bc=kc,m.uniform2f(A.location,
dd,kc));ad=G.opacity;K&&Uc===ad||(Uc=ad,m.uniform1f(a.location,ad));(ed=u.call(this,D,G,K))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);zc=ed._texture;m.uniform1i(h.location,zc.bind());id=G.offset;if(Nd=G.count)0<Vb?Ya?y.drawElementsInstancedANGLE(0,Nd,Ya.type,id<<(Ya.type-5121>>1),Vb):y.drawArraysInstancedANGLE(0,id,Nd,Vb):0>Vb&&(Ya?m.drawElements(0,Nd,Ya.type,id<<(Ya.type-5121>>1)):m.drawArrays(0,id,Nd)),zc.unbind()}Ic&&O.destroyStream(oc);rc&&O.destroyStream(Ob);rb&&O.destroyStream(Ka);Lb&&
O.destroyStream(Mb);g.dirty=!0;ra.setVAO(null);D.viewportWidth=L;D.viewportHeight=v;n&&(da.cpuTime+=performance.now()-H)},draw:function(k){var b,u,w,oa,P,v,n,z,H,y,G,Q,B,T,U,ka,ba,ia,la,Aa,ha,$a,Ye,$e,Re,Gd,Ae,te,Zd,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb;b=qa.next;b!==qa.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),qa.cur=
b);if(g.dirty){var Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc;Va=aa.dither;Va!==g.dither&&(Va?m.enable(3024):m.disable(3024),g.dither=Va);tb=fa[0];sb=fa[1];if(tb!==Ba[0]||sb!==Ba[1])m.blendEquationSeparate(tb,sb),Ba[0]=tb,Ba[1]=sb;Oa=aa.depth_func;Oa!==g.depth_func&&(m.depthFunc(Oa),g.depth_func=Oa);tc=na[0];Qa=na[1];if(tc!==Za[0]||Qa!==Za[1])m.depthRange(tc,Qa),Za[0]=tc,Za[1]=Qa;Kb=aa.depth_mask;Kb!==g.depth_mask&&(m.depthMask(Kb),
g.depth_mask=Kb);Eb=ya[0];Ma=ya[1];zd=ya[2];Xa=ya[3];if(Eb!==Ja[0]||Ma!==Ja[1]||zd!==Ja[2]||Xa!==Ja[3])m.colorMask(Eb,Ma,zd,Xa),Ja[0]=Eb,Ja[1]=Ma,Ja[2]=zd,Ja[3]=Xa;Lb=aa.cull_enable;Lb!==g.cull_enable&&(Lb?m.enable(2884):m.disable(2884),g.cull_enable=Lb);Mb=aa.cull_face;Mb!==g.cull_face&&(m.cullFace(Mb),g.cull_face=Mb);lb=aa.frontFace;lb!==g.frontFace&&(m.frontFace(lb),g.frontFace=lb);Na=aa.lineWidth;Na!==g.lineWidth&&(m.lineWidth(Na),g.lineWidth=Na);Zb=aa.polygonOffset_enable;Zb!==g.polygonOffset_enable&&
(Zb?m.enable(32823):m.disable(32823),g.polygonOffset_enable=Zb);Pa=Ta[0];ub=Ta[1];if(Pa!==r[0]||ub!==r[1])m.polygonOffset(Pa,ub),r[0]=Pa,r[1]=ub;vb=aa.sample_alpha;vb!==g.sample_alpha&&(vb?m.enable(32926):m.disable(32926),g.sample_alpha=vb);Sa=aa.sample_enable;Sa!==g.sample_enable&&(Sa?m.enable(32928):m.disable(32928),g.sample_enable=Sa);nb=p[0];fc=p[1];if(nb!==E[0]||fc!==E[1])m.sampleCoverage(nb,fc),E[0]=nb,E[1]=fc;Ac=aa.stencil_mask;Ac!==g.stencil_mask&&(m.stencilMask(Ac),g.stencil_mask=Ac);vc=
Z[0];cb=Z[1];jc=Z[2];if(vc!==Hb[0]||cb!==Hb[1]||jc!==Hb[2])m.stencilFunc(vc,cb,jc),Hb[0]=vc,Hb[1]=cb,Hb[2]=jc;qd=sa[0];Wa=sa[1];Mc=sa[2];Ab=sa[3];if(qd!==Da[0]||Wa!==Da[1]||Mc!==Da[2]||Ab!==Da[3])m.stencilOpSeparate(qd,Wa,Mc,Ab),Da[0]=qd,Da[1]=Wa,Da[2]=Mc,Da[3]=Ab;Ya=ga[0];Vb=ga[1];uc=ga[2];Wb=ga[3];if(Ya!==I[0]||Vb!==I[1]||uc!==I[2]||Wb!==I[3])m.stencilOpSeparate(Ya,Vb,uc,Wb),I[0]=Ya,I[1]=Vb,I[2]=uc,I[3]=Wb;Qb=aa.scissor_enable;Qb!==g.scissor_enable&&(Qb?m.enable(3089):m.disable(3089),g.scissor_enable=
Qb);Kc=va[0];Rb=va[1];pe=va[2];Fc=va[3];if(Kc!==Ea[0]||Rb!==Ea[1]||pe!==Ea[2]||Fc!==Ea[3])m.scissor(Kc,Rb,pe,Fc),Ea[0]=Kc,Ea[1]=Rb,Ea[2]=pe,Ea[3]=Fc}u=this.viewport;w=u.x|0;oa=u.y|0;P="width"in u?u.width|0:D.framebufferWidth-w;v="height"in u?u.height|0:D.framebufferHeight-oa;n=D.viewportWidth;D.viewportWidth=P;z=D.viewportHeight;D.viewportHeight=v;m.viewport(w,oa,P,v);xa[0]=w;xa[1]=oa;xa[2]=P;xa[3]=v;m.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;m.enable(3042);g.blend_enable=!0;m.blendFuncSeparate(770,
771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;m.disable(2929);g.depth_enable=!1;m.disable(2960);g.stencil_enable=!1;if(H=g.profile)y=performance.now(),da.count++;m.useProgram(K.program);G=Ca.angle_instanced_arrays;ra.setVAO(null);V.buffer=this.sizeBuffer;Q=!1;B=null;T=0;U=!1;ba=ka=0;ia=1;la=0;Aa=5126;$e=Ye=$a=ha=0;J(V)?(Q=!0,B=O.createStream(34962,V),Aa=B.dtype):(B=O.getBuffer(V))?Aa=B.dtype:"constant"in V?(ia=2,"number"===typeof V.constant?($a=V.constant,Ye=$e=ha=0):($a=0<V.constant.length?V.constant[0]:
0,Ye=1<V.constant.length?V.constant[1]:0,$e=2<V.constant.length?V.constant[2]:0,ha=3<V.constant.length?V.constant[3]:0)):(B=J(V.buffer)?O.createStream(34962,V.buffer):O.getBuffer(V.buffer),Aa="type"in V?Fa[V.type]:B.dtype,U=!!V.normalized,ba=V.size|0,ka=V.offset|0,la=V.stride|0,T=V.divisor|0);Re=ea.location;Gd=R[Re];if(1===ia){Gd.buffer||m.enableVertexAttribArray(Re);Ae=ba||1;if(Gd.type!==Aa||Gd.size!==Ae||Gd.buffer!==B||Gd.normalized!==U||Gd.offset!==ka||Gd.stride!==la)m.bindBuffer(34962,B.buffer),
m.vertexAttribPointer(Re,Ae,Aa,U,la,ka),Gd.type=Aa,Gd.size=Ae,Gd.buffer=B,Gd.normalized=U,Gd.offset=ka,Gd.stride=la;Gd.divisor!==T&&(G.vertexAttribDivisorANGLE(Re,T),Gd.divisor=T)}else if(Gd.buffer&&(m.disableVertexAttribArray(Re),Gd.buffer=null),Gd.x!==$a||Gd.y!==Ye||Gd.z!==$e||Gd.w!==ha)m.vertexAttrib4f(Re,$a,Ye,$e,ha),Gd.x=$a,Gd.y=Ye,Gd.z=$e,Gd.w=ha;ma.buffer=this.sizeBuffer;te=!1;Zd=null;Bd=0;$d=!1;bd=ld=0;pd=1;Lc=0;nd=5126;Wc=Pc=fd=Gc=0;J(ma)?(te=!0,Zd=O.createStream(34962,ma),nd=Zd.dtype):(Zd=
O.getBuffer(ma))?nd=Zd.dtype:"constant"in ma?(pd=2,"number"===typeof ma.constant?(fd=ma.constant,Pc=Wc=Gc=0):(fd=0<ma.constant.length?ma.constant[0]:0,Pc=1<ma.constant.length?ma.constant[1]:0,Wc=2<ma.constant.length?ma.constant[2]:0,Gc=3<ma.constant.length?ma.constant[3]:0)):(Zd=J(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),nd="type"in ma?Fa[ma.type]:Zd.dtype,$d=!!ma.normalized,bd=ma.size|0,ld=ma.offset|0,Lc=ma.stride|0,Bd=ma.divisor|0);Bb=C.location;Fb=R[Bb];if(1===pd){Fb.buffer||
m.enableVertexAttribArray(Bb);Dc=bd||1;if(Fb.type!==nd||Fb.size!==Dc||Fb.buffer!==Zd||Fb.normalized!==$d||Fb.offset!==ld||Fb.stride!==Lc)m.bindBuffer(34962,Zd.buffer),m.vertexAttribPointer(Bb,Dc,nd,$d,Lc,ld),Fb.type=nd,Fb.size=Dc,Fb.buffer=Zd,Fb.normalized=$d,Fb.offset=ld,Fb.stride=Lc;Fb.divisor!==Bd&&(G.vertexAttribDivisorANGLE(Bb,Bd),Fb.divisor=Bd)}else if(Fb.buffer&&(m.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==fd||Fb.y!==Pc||Fb.z!==Wc||Fb.w!==Gc)m.vertexAttrib4f(Bb,fd,Pc,Wc,Gc),Fb.x=
fd,Fb.y=Pc,Fb.z=Wc,Fb.w=Gc;xb=this.charBuffer;xc=!1;Cb=null;Jc=0;lc=!1;Xc=Hc=0;Vc=1;Ec=0;dc=5126;mc=pc=oc=Ic=0;J(xb)?(xc=!0,Cb=O.createStream(34962,xb),dc=Cb.dtype):(Cb=O.getBuffer(xb))?dc=Cb.dtype:"constant"in xb?(Vc=2,"number"===typeof xb.constant?(oc=xb.constant,pc=mc=Ic=0):(oc=0<xb.constant.length?xb.constant[0]:0,pc=1<xb.constant.length?xb.constant[1]:0,mc=2<xb.constant.length?xb.constant[2]:0,Ic=3<xb.constant.length?xb.constant[3]:0)):(Cb=J(xb.buffer)?O.createStream(34962,xb.buffer):O.getBuffer(xb.buffer),
dc="type"in xb?Fa[xb.type]:Cb.dtype,lc=!!xb.normalized,Xc=xb.size|0,Hc=xb.offset|0,Ec=xb.stride|0,Jc=xb.divisor|0);ec=Y.location;ab=R[ec];if(1===Vc){ab.buffer||m.enableVertexAttribArray(ec);qc=Xc||1;if(ab.type!==dc||ab.size!==qc||ab.buffer!==Cb||ab.normalized!==lc||ab.offset!==Hc||ab.stride!==Ec)m.bindBuffer(34962,Cb.buffer),m.vertexAttribPointer(ec,qc,dc,lc,Ec,Hc),ab.type=dc,ab.size=qc,ab.buffer=Cb,ab.normalized=lc,ab.offset=Hc,ab.stride=Ec;ab.divisor!==Jc&&(G.vertexAttribDivisorANGLE(ec,Jc),ab.divisor=
Jc)}else if(ab.buffer&&(m.disableVertexAttribArray(ec),ab.buffer=null),ab.x!==oc||ab.y!==pc||ab.z!==mc||ab.w!==Ic)m.vertexAttrib4f(ec,oc,pc,mc,Ic),ab.x=oc,ab.y=pc,ab.z=mc,ab.w=Ic;yb=this.position;db=!1;Nb=null;bb=0;ob=!1;hd=Ua=0;Ib=1;Jb=0;rc=5126;Db=Gb=jb=Ob=0;J(yb)?(db=!0,Nb=O.createStream(34962,yb),rc=Nb.dtype):(Nb=O.getBuffer(yb))?rc=Nb.dtype:"constant"in yb?(Ib=2,"number"===typeof yb.constant?(jb=yb.constant,Gb=Db=Ob=0):(jb=0<yb.constant.length?yb.constant[0]:0,Gb=1<yb.constant.length?yb.constant[1]:
0,Db=2<yb.constant.length?yb.constant[2]:0,Ob=3<yb.constant.length?yb.constant[3]:0)):(Nb=J(yb.buffer)?O.createStream(34962,yb.buffer):O.getBuffer(yb.buffer),rc="type"in yb?Fa[yb.type]:Nb.dtype,ob=!!yb.normalized,hd=yb.size|0,Ua=yb.offset|0,Jb=yb.stride|0,bb=yb.divisor|0);wb=ta.location;hb=R[wb];if(1===Ib){hb.buffer||m.enableVertexAttribArray(wb);Yb=hd||2;if(hb.type!==rc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Ua||hb.stride!==Jb)m.bindBuffer(34962,Nb.buffer),m.vertexAttribPointer(wb,
Yb,rc,ob,Jb,Ua),hb.type=rc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Ua,hb.stride=Jb;hb.divisor!==bb&&(G.vertexAttribDivisorANGLE(wb,bb),hb.divisor=bb)}else if(hb.buffer&&(m.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)m.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=L.call(this,D,k,0);m.uniform1f(F.location,Pb);qb=e.call(this,D,k,0);m.uniform1f(t.location,qb);m.uniform1f(S.location,k.align);m.uniform1f(x.location,k.baseline);
Ra=this.viewportArray;m.uniform4f(W.location,Ra[0],Ra[1],Ra[2],Ra[3]);Ub=k.color;m.uniform4f(d.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=l.call(this,D,k,0);m.uniform2f(f.location,zb[0],zb[1]);ic=q.call(this,D,k,0);m.uniform2f(X.location,ic[0],ic[1]);ib=this.scale;m.uniform2f(ja.location,ib[0],ib[1]);pb=this.translate;m.uniform2f(Cc.location,pb[0],pb[1]);Ha=k.positionOffset;m.uniform2f(A.location,Ha[0],Ha[1]);m.uniform1f(a.location,k.opacity);(rb=c.call(this,D,k,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);
Ka=rb._texture;m.uniform1i(h.location,Ka.bind());(fb=N.elements)?m.bindBuffer(34963,fb.buffer.buffer):ra.currentVAO&&(fb=M.getElements(ra.currentVAO.elements))&&m.bindBuffer(34963,fb.buffer.buffer);gb=k.offset;if(La=k.count)kb=N.instances,0<kb?fb?G.drawElementsInstancedANGLE(0,La,fb.type,gb<<(fb.type-5121>>1),kb):G.drawArraysInstancedANGLE(0,gb,La,kb):0>kb&&(fb?m.drawElements(0,La,fb.type,gb<<(fb.type-5121>>1)):m.drawArrays(0,gb,La)),g.dirty=!0,ra.setVAO(null),D.viewportWidth=n,D.viewportHeight=z,
H&&(da.cpuTime+=performance.now()-y),Q&&O.destroyStream(B),te&&O.destroyStream(Zd),xc&&O.destroyStream(Cb),db&&O.destroyStream(Nb),Ka.unbind()},scope:function(a,d,c){var f,k,l,h,m,r,p,b,q,I,E,t,u,x,e,na,A,sa,Da,R,F,C,fa,M,ga,L,Za,Ja,z,K,xa,va,wa,Q,ra,S,Ca,T,W,X,ea,Ta,Y,pa,ia,Ba,qa,ya,ta,ja,Ea,Hb,Z,Cc,td,ha,ab,qc,yb,db,Nb,bb,ob,Ua,$a,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa,Mc,Ab,Ya,
Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,ud,nc,wc,gc,eb,sc,Tb,Xb,cc,hc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,kc,bc,ad,Uc,ed,zc,id;f=this.viewport;k=f.x|0;l=f.y|0;h="width"in f?f.width|0:D.framebufferWidth-k;m="height"in f?f.height|0:D.framebufferHeight-l;r=D.viewportWidth;D.viewportWidth=h;p=D.viewportHeight;D.viewportHeight=m;b=oa[0];oa[0]=k;q=oa[1];oa[1]=l;I=oa[2];oa[2]=h;E=oa[3];oa[3]=m;t=Aa[0];Aa[0]=0;u=Aa[1];Aa[1]=0;x=Aa[2];Aa[2]=0;e=Aa[3];Aa[3]=1;na=aa.blend_enable;aa.blend_enable=!0;A=ka[0];ka[0]=770;sa=ka[1];
ka[1]=771;Da=ka[2];ka[2]=773;R=ka[3];ka[3]=1;F=aa.depth_enable;aa.depth_enable=!1;C=aa.stencil_enable;aa.stencil_enable=!1;if(fa=g.profile)M=performance.now(),da.count++;ga=a.offset;L=N.offset;N.offset=ga;Za=a.count;Ja=N.count;N.count=Za;z=N.primitive;N.primitive=0;K=a.align;xa=la[64];la[64]=K;va=G.call(this,D,a,c);wa=la[69];la[69]=va;Q=H.call(this,D,a,c);ra=la[67];la[67]=Q;S=B.call(this,D,a,c);Ca=la[66];la[66]=S;T=a.baseline;W=la[65];la[65]=T;X=U.call(this,D,a,c);ea=la[62];la[62]=X;Ta=a.color;Y=
la[14];la[14]=Ta;pa=n.call(this,D,a,c);ia=la[63];la[63]=pa;Ba=a.opacity;qa=la[10];la[10]=Ba;ya=a.positionOffset;ta=la[68];la[68]=ya;ja=this.scale;Ea=la[6];la[6]=ja;Hb=this.translate;Z=la[8];la[8]=Hb;Cc=this.viewportArray;td=la[3];la[3]=Cc;ha=this.charBuffer;ab=!1;qc=null;yb=0;db=!1;bb=Nb=0;ob=1;Ua=0;$a=5126;Ob=rc=Jb=Ib=0;J(ha)?(ab=!0,qc=O.createStream(34962,ha),$a=qc.dtype):(qc=O.getBuffer(ha))?$a=qc.dtype:"constant"in ha?(ob=2,"number"===typeof ha.constant?(Jb=ha.constant,rc=Ob=Ib=0):(Jb=0<ha.constant.length?
ha.constant[0]:0,rc=1<ha.constant.length?ha.constant[1]:0,Ob=2<ha.constant.length?ha.constant[2]:0,Ib=3<ha.constant.length?ha.constant[3]:0)):(qc=J(ha.buffer)?O.createStream(34962,ha.buffer):O.getBuffer(ha.buffer),$a="type"in ha?Fa[ha.type]:qc.dtype,db=!!ha.normalized,bb=ha.size|0,Nb=ha.offset|0,Ua=ha.stride|0,yb=ha.divisor|0);jb=v.buffer;v.buffer=qc;Gb=v.divisor;v.divisor=yb;Db=v.normalized;v.normalized=db;wb=v.offset;v.offset=Nb;hb=v.size;v.size=bb;Yb=v.state;v.state=ob;Pb=v.stride;v.stride=Ua;
qb=v.type;v.type=$a;Ra=v.w;v.w=Ib;Ub=v.x;v.x=Jb;zb=v.y;v.y=rc;ic=v.z;v.z=Ob;ma.buffer=this.sizeBuffer;ib=!1;pb=null;Ha=0;rb=!1;fb=Ka=0;gb=1;La=0;kb=5126;Oa=sb=tb=Va=0;J(ma)?(ib=!0,pb=O.createStream(34962,ma),kb=pb.dtype):(pb=O.getBuffer(ma))?kb=pb.dtype:"constant"in ma?(gb=2,"number"===typeof ma.constant?(tb=ma.constant,sb=Oa=Va=0):(tb=0<ma.constant.length?ma.constant[0]:0,sb=1<ma.constant.length?ma.constant[1]:0,Oa=2<ma.constant.length?ma.constant[2]:0,Va=3<ma.constant.length?ma.constant[3]:0)):
(pb=J(ma.buffer)?O.createStream(34962,ma.buffer):O.getBuffer(ma.buffer),kb="type"in ma?Fa[ma.type]:pb.dtype,rb=!!ma.normalized,fb=ma.size|0,Ka=ma.offset|0,La=ma.stride|0,Ha=ma.divisor|0);tc=y.buffer;y.buffer=pb;Qa=y.divisor;y.divisor=Ha;Kb=y.normalized;y.normalized=rb;Eb=y.offset;y.offset=Ka;Ma=y.size;y.size=fb;zd=y.state;y.state=gb;Xa=y.stride;y.stride=La;Lb=y.type;y.type=kb;Mb=y.w;y.w=Va;lb=y.x;y.x=tb;Na=y.y;y.y=sb;Zb=y.z;y.z=Oa;Pa=this.position;ub=!1;vb=null;Sa=0;nb=!1;Ac=fc=0;vc=1;cb=0;jc=5126;
Ab=Mc=Wa=qd=0;J(Pa)?(ub=!0,vb=O.createStream(34962,Pa),jc=vb.dtype):(vb=O.getBuffer(Pa))?jc=vb.dtype:"constant"in Pa?(vc=2,"number"===typeof Pa.constant?(Wa=Pa.constant,Mc=Ab=qd=0):(Wa=0<Pa.constant.length?Pa.constant[0]:0,Mc=1<Pa.constant.length?Pa.constant[1]:0,Ab=2<Pa.constant.length?Pa.constant[2]:0,qd=3<Pa.constant.length?Pa.constant[3]:0)):(vb=J(Pa.buffer)?O.createStream(34962,Pa.buffer):O.getBuffer(Pa.buffer),jc="type"in Pa?Fa[Pa.type]:vb.dtype,nb=!!Pa.normalized,Ac=Pa.size|0,fc=Pa.offset|
0,cb=Pa.stride|0,Sa=Pa.divisor|0);Ya=ba.buffer;ba.buffer=vb;Vb=ba.divisor;ba.divisor=Sa;uc=ba.normalized;ba.normalized=nb;Wb=ba.offset;ba.offset=fc;Qb=ba.size;ba.size=Ac;Kc=ba.state;ba.state=vc;Rb=ba.stride;ba.stride=cb;pe=ba.type;ba.type=jc;Fc=ba.w;ba.w=qd;sd=ba.x;ba.x=Wa;Nc=ba.y;ba.y=Mc;Yc=ba.z;ba.z=Ab;V.buffer=this.sizeBuffer;ud=!1;nc=null;wc=0;gc=!1;sc=eb=0;Tb=1;Xb=0;cc=5126;cd=Bc=yc=hc=0;J(V)?(ud=!0,nc=O.createStream(34962,V),cc=nc.dtype):(nc=O.getBuffer(V))?cc=nc.dtype:"constant"in V?(Tb=2,
"number"===typeof V.constant?(yc=V.constant,Bc=cd=hc=0):(yc=0<V.constant.length?V.constant[0]:0,Bc=1<V.constant.length?V.constant[1]:0,cd=2<V.constant.length?V.constant[2]:0,hc=3<V.constant.length?V.constant[3]:0)):(nc=J(V.buffer)?O.createStream(34962,V.buffer):O.getBuffer(V.buffer),cc="type"in V?Fa[V.type]:nc.dtype,gc=!!V.normalized,sc=V.size|0,eb=V.offset|0,Xb=V.stride|0,wc=V.divisor|0);Qc=w.buffer;w.buffer=nc;Rc=w.divisor;w.divisor=wc;Sc=w.normalized;w.normalized=gc;Zc=w.offset;w.offset=eb;od=
w.size;w.size=sc;dd=w.state;w.state=Tb;$c=w.stride;w.stride=Xb;kc=w.type;w.type=cc;bc=w.w;w.w=hc;ad=w.x;w.x=yc;Uc=w.y;w.y=Bc;ed=w.z;w.z=cd;zc=P.vert;P.vert=61;id=P.frag;P.frag=60;g.dirty=!0;d(D,a,c);D.viewportWidth=r;D.viewportHeight=p;oa[0]=b;oa[1]=q;oa[2]=I;oa[3]=E;Aa[0]=t;Aa[1]=u;Aa[2]=x;Aa[3]=e;aa.blend_enable=na;ka[0]=A;ka[1]=sa;ka[2]=Da;ka[3]=R;aa.depth_enable=F;aa.stencil_enable=C;fa&&(da.cpuTime+=performance.now()-M);N.offset=L;N.count=Ja;N.primitive=z;la[64]=xa;la[69]=wa;la[67]=ra;la[66]=
Ca;la[65]=W;la[62]=ea;la[14]=Y;la[63]=ia;la[10]=qa;la[68]=ta;la[6]=Ea;la[8]=Z;la[3]=td;ab&&O.destroyStream(qc);v.buffer=jb;v.divisor=Gb;v.normalized=Db;v.offset=wb;v.size=hb;v.state=Yb;v.stride=Pb;v.type=qb;v.w=Ra;v.x=Ub;v.y=zb;v.z=ic;ib&&O.destroyStream(pb);y.buffer=tc;y.divisor=Qa;y.normalized=Kb;y.offset=Eb;y.size=Ma;y.state=zd;y.stride=Xa;y.type=Lb;y.w=Mb;y.x=lb;y.y=Na;y.z=Zb;ub&&O.destroyStream(vb);ba.buffer=Ya;ba.divisor=Vb;ba.normalized=uc;ba.offset=Wb;ba.size=Qb;ba.state=Kc;ba.stride=Rb;ba.type=
pe;ba.w=Fc;ba.x=sd;ba.y=Nc;ba.z=Yc;ud&&O.destroyStream(nc);w.buffer=Qc;w.divisor=Rc;w.normalized=Sc;w.offset=Zc;w.size=od;w.state=dd;w.stride=$c;w.type=kc;w.w=bc;w.x=ad;w.y=Uc;w.z=ed;P.vert=zc;P.frag=id;g.dirty=!0}}},$2:function(b,da,K){var L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t;L=b.attributes;e=b.current;l=b.framebuffer;q=b.gl;c=b.next;G=b.vao;H=c.blend_color;B=e.blend_color;U=c.blend_equation;n=e.blend_equation;v=c.blend_func;y=e.blend_func;ba=c.colorMask;w=e.colorMask;T=
c.depth_range;z=e.depth_range;Q=c.polygonOffset_offset;ia=e.polygonOffset_offset;k=c.sample_coverage;u=e.sample_coverage;S=c.scissor_box;h=e.scissor_box;X=c.stencil_func;f=e.stencil_func;x=c.stencil_opBack;Y=e.stencil_opBack;C=c.stencil_opFront;F=e.stencil_opFront;d=c.viewport;t=e.viewport;return{poll:function(){var a,b,A,L,K,G,ea,R,O,D,g,N,M,Ca,da,m,J,aa,P,la,ra,Aa;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;L=c.depth_enable;K=c.dither;G=c.polygonOffset_enable;ea=c.sample_alpha;R=c.sample_enable;
O=c.scissor_enable;D=c.stencil_enable;g=c.cull_face;N=e.cull_face;M=c.depth_func;Ca=e.depth_func;da=c.depth_mask;m=e.depth_mask;J=c.frontFace;aa=e.frontFace;P=c.lineWidth;la=e.lineWidth;ra=c.stencil_mask;Aa=e.stencil_mask;a=l.next;a!==l.cur&&(a?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null),l.cur=a);b!==e.blend_enable&&(b?q.enable(3042):q.disable(3042),e.blend_enable=b);A!==e.cull_enable&&(A?q.enable(2884):q.disable(2884),e.cull_enable=A);L!==e.depth_enable&&(L?q.enable(2929):
q.disable(2929),e.depth_enable=L);K!==e.dither&&(K?q.enable(3024):q.disable(3024),e.dither=K);G!==e.polygonOffset_enable&&(G?q.enable(32823):q.disable(32823),e.polygonOffset_enable=G);ea!==e.sample_alpha&&(ea?q.enable(32926):q.disable(32926),e.sample_alpha=ea);R!==e.sample_enable&&(R?q.enable(32928):q.disable(32928),e.sample_enable=R);O!==e.scissor_enable&&(O?q.enable(3089):q.disable(3089),e.scissor_enable=O);D!==e.stencil_enable&&(D?q.enable(2960):q.disable(2960),e.stencil_enable=D);if(H[0]!==B[0]||
H[1]!==B[1]||H[2]!==B[2]||H[3]!==B[3])q.blendColor(H[0],H[1],H[2],H[3]),B[0]=H[0],B[1]=H[1],B[2]=H[2],B[3]=H[3];if(U[0]!==n[0]||U[1]!==n[1])q.blendEquationSeparate(U[0],U[1]),n[0]=U[0],n[1]=U[1];if(v[0]!==y[0]||v[1]!==y[1]||v[2]!==y[2]||v[3]!==y[3])q.blendFuncSeparate(v[0],v[1],v[2],v[3]),y[0]=v[0],y[1]=v[1],y[2]=v[2],y[3]=v[3];if(ba[0]!==w[0]||ba[1]!==w[1]||ba[2]!==w[2]||ba[3]!==w[3])q.colorMask(ba[0],ba[1],ba[2],ba[3]),w[0]=ba[0],w[1]=ba[1],w[2]=ba[2],w[3]=ba[3];g!==N&&(q.cullFace(g),e.cull_face=
g);M!==Ca&&(q.depthFunc(M),e.depth_func=M);da!==m&&(q.depthMask(da),e.depth_mask=da);if(T[0]!==z[0]||T[1]!==z[1])q.depthRange(T[0],T[1]),z[0]=T[0],z[1]=T[1];J!==aa&&(q.frontFace(J),e.frontFace=J);P!==la&&(q.lineWidth(P),e.lineWidth=P);if(Q[0]!==ia[0]||Q[1]!==ia[1])q.polygonOffset(Q[0],Q[1]),ia[0]=Q[0],ia[1]=Q[1];if(k[0]!==u[0]||k[1]!==u[1])q.sampleCoverage(k[0],k[1]),u[0]=k[0],u[1]=k[1];if(S[0]!==h[0]||S[1]!==h[1]||S[2]!==h[2]||S[3]!==h[3])q.scissor(S[0],S[1],S[2],S[3]),h[0]=S[0],h[1]=S[1],h[2]=S[2],
h[3]=S[3];if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2])q.stencilFunc(X[0],X[1],X[2]),f[0]=X[0],f[1]=X[1],f[2]=X[2];ra!==Aa&&(q.stencilMask(ra),e.stencil_mask=ra);if(x[0]!==Y[0]||x[1]!==Y[1]||x[2]!==Y[2]||x[3]!==Y[3])q.stencilOpSeparate(x[0],x[1],x[2],x[3]),Y[0]=x[0],Y[1]=x[1],Y[2]=x[2],Y[3]=x[3];if(C[0]!==F[0]||C[1]!==F[1]||C[2]!==F[2]||C[3]!==F[3])q.stencilOpSeparate(C[0],C[1],C[2],C[3]),F[0]=C[0],F[1]=C[1],F[2]=C[2],F[3]=C[3];if(d[0]!==t[0]||d[1]!==t[1]||d[2]!==t[2]||d[3]!==t[3])q.viewport(d[0],d[1],
d[2],d[3]),t[0]=d[0],t[1]=d[1],t[2]=d[2],t[3]=d[3]},refresh:function(){var a,b,A,K,da,W,ea,R,O,D,g,N,M,Ca,qa,m;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;K=c.depth_enable;da=c.dither;W=c.polygonOffset_enable;ea=c.sample_alpha;R=c.sample_enable;O=c.scissor_enable;D=c.stencil_enable;g=c.cull_face;N=c.depth_func;M=c.depth_mask;Ca=c.frontFace;qa=c.lineWidth;m=c.stencil_mask;(a=l.next)?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null);l.cur=a;a=L[0];a.buffer?(q.enableVertexAttribArray(0),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=L[1];a.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=L[2];a.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,a.buffer.buffer),
q.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=L[3];a.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=L[4];a.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(4,a.size,
a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=L[5];a.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=L[6];a.buffer?(q.enableVertexAttribArray(6),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):
(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=L[7];a.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=L[8];a.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(8),
q.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=L[9];a.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=L[10];a.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,a.x,a.y,
a.z,a.w),a.buffer=null);a=L[11];a.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=L[12];a.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);
a=L[13];a.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=L[14];a.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(14),q.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=L[15];a.buffer?(q.enableVertexAttribArray(15),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);G.currentVAO=null;G.setVAO(G.targetVAO);b?q.enable(3042):q.disable(3042);e.blend_enable=b;A?q.enable(2884):q.disable(2884);e.cull_enable=A;K?q.enable(2929):q.disable(2929);e.depth_enable=K;da?q.enable(3024):q.disable(3024);e.dither=da;W?q.enable(32823):q.disable(32823);e.polygonOffset_enable=W;ea?q.enable(32926):
q.disable(32926);e.sample_alpha=ea;R?q.enable(32928):q.disable(32928);e.sample_enable=R;O?q.enable(3089):q.disable(3089);e.scissor_enable=O;D?q.enable(2960):q.disable(2960);e.stencil_enable=D;q.blendColor(H[0],H[1],H[2],H[3]);B[0]=H[0];B[1]=H[1];B[2]=H[2];B[3]=H[3];q.blendEquationSeparate(U[0],U[1]);n[0]=U[0];n[1]=U[1];q.blendFuncSeparate(v[0],v[1],v[2],v[3]);y[0]=v[0];y[1]=v[1];y[2]=v[2];y[3]=v[3];q.colorMask(ba[0],ba[1],ba[2],ba[3]);w[0]=ba[0];w[1]=ba[1];w[2]=ba[2];w[3]=ba[3];q.cullFace(g);e.cull_face=
g;q.depthFunc(N);e.depth_func=N;q.depthMask(M);e.depth_mask=M;q.depthRange(T[0],T[1]);z[0]=T[0];z[1]=T[1];q.frontFace(Ca);e.frontFace=Ca;q.lineWidth(qa);e.lineWidth=qa;q.polygonOffset(Q[0],Q[1]);ia[0]=Q[0];ia[1]=Q[1];q.sampleCoverage(k[0],k[1]);u[0]=k[0];u[1]=k[1];q.scissor(S[0],S[1],S[2],S[3]);h[0]=S[0];h[1]=S[1];h[2]=S[2];h[3]=S[3];q.stencilFunc(X[0],X[1],X[2]);f[0]=X[0];f[1]=X[1];f[2]=X[2];q.stencilMask(m);e.stencil_mask=m;q.stencilOpSeparate(x[0],x[1],x[2],x[3]);Y[0]=x[0];Y[1]=x[1];Y[2]=x[2];
Y[3]=x[3];q.stencilOpSeparate(C[0],C[1],C[2],C[3]);F[0]=C[0];F[1]=C[1];F[2]=C[2];F[3]=C[3];q.viewport(d[0],d[1],d[2],d[3]);t[0]=d[0];t[1]=d[1];t[2]=d[2];t[3]=d[3]}}},$7:function(b,da,K,L,e,l,q,c){var G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W,ea,R;G=b.context;H=b.current;B=b.framebuffer;U=b.gl;n=b.next;v=b.shader;y=b.vao;ba=n.blend_color;w=H.blend_color;T=n.blend_equation;z=H.blend_equation;Q=n.blend_func;ia=H.blend_func;k=n.colorMask;u=H.colorMask;S=n.depth_range;h=H.depth_range;
X=n.polygonOffset_offset;f=H.polygonOffset_offset;x=n.sample_coverage;Y=H.sample_coverage;C=n.scissor_box;F=H.scissor_box;d=n.stencil_func;t=H.stencil_func;a=n.stencil_opBack;ta=H.stencil_opBack;A=n.stencil_opFront;ja=H.stencil_opFront;Z=n.viewport;W=H.viewport;ea={};R={};return{draw:function(c){var b,g,q,R,C,qa,m,J,aa,P;b=c.framebuffer;g=B.getFramebuffer(b);b&&!g&&da.commandRaise(e,K);b=B.next;B.next=g;q=G.framebufferWidth;G.framebufferWidth=g?g.width:G.drawingBufferWidth;R=G.framebufferHeight;G.framebufferHeight=
g?g.height:G.drawingBufferHeight;g!==B.cur&&(g?U.bindFramebuffer(36160,g.framebuffer):U.bindFramebuffer(36160,null),B.cur=g);if(H.dirty){g=n.dither;g!==H.dither&&(g?U.enable(3024):U.disable(3024),H.dither=g);g=n.blend_enable;g!==H.blend_enable&&(g?U.enable(3042):U.disable(3042),H.blend_enable=g);g=ba[0];m=ba[1];C=ba[2];qa=ba[3];if(g!==w[0]||m!==w[1]||C!==w[2]||qa!==w[3])U.blendColor(g,m,C,qa),w[0]=g,w[1]=m,w[2]=C,w[3]=qa;g=T[0];m=T[1];if(g!==z[0]||m!==z[1])U.blendEquationSeparate(g,m),z[0]=g,z[1]=
m;g=Q[0];m=Q[1];C=Q[2];qa=Q[3];if(g!==ia[0]||m!==ia[1]||C!==ia[2]||qa!==ia[3])U.blendFuncSeparate(g,m,C,qa),ia[0]=g,ia[1]=m,ia[2]=C,ia[3]=qa;g=n.depth_enable;g!==H.depth_enable&&(g?U.enable(2929):U.disable(2929),H.depth_enable=g);g=n.depth_func;g!==H.depth_func&&(U.depthFunc(g),H.depth_func=g);g=S[0];m=S[1];if(g!==h[0]||m!==h[1])U.depthRange(g,m),h[0]=g,h[1]=m;g=n.depth_mask;g!==H.depth_mask&&(U.depthMask(g),H.depth_mask=g);g=k[0];m=k[1];C=k[2];qa=k[3];if(g!==u[0]||m!==u[1]||C!==u[2]||qa!==u[3])U.colorMask(g,
m,C,qa),u[0]=g,u[1]=m,u[2]=C,u[3]=qa;g=n.cull_enable;g!==H.cull_enable&&(g?U.enable(2884):U.disable(2884),H.cull_enable=g);g=n.cull_face;g!==H.cull_face&&(U.cullFace(g),H.cull_face=g);g=n.frontFace;g!==H.frontFace&&(U.frontFace(g),H.frontFace=g);g=n.lineWidth;g!==H.lineWidth&&(U.lineWidth(g),H.lineWidth=g);g=n.polygonOffset_enable;g!==H.polygonOffset_enable&&(g?U.enable(32823):U.disable(32823),H.polygonOffset_enable=g);g=X[0];m=X[1];if(g!==f[0]||m!==f[1])U.polygonOffset(g,m),f[0]=g,f[1]=m;g=n.sample_alpha;
g!==H.sample_alpha&&(g?U.enable(32926):U.disable(32926),H.sample_alpha=g);g=n.sample_enable;g!==H.sample_enable&&(g?U.enable(32928):U.disable(32928),H.sample_enable=g);g=x[0];m=x[1];if(g!==Y[0]||m!==Y[1])U.sampleCoverage(g,m),Y[0]=g,Y[1]=m;g=n.stencil_enable;g!==H.stencil_enable&&(g?U.enable(2960):U.disable(2960),H.stencil_enable=g);g=n.stencil_mask;g!==H.stencil_mask&&(U.stencilMask(g),H.stencil_mask=g);g=d[0];m=d[1];C=d[2];if(g!==t[0]||m!==t[1]||C!==t[2])U.stencilFunc(g,m,C),t[0]=g,t[1]=m,t[2]=
C;g=A[0];m=A[1];C=A[2];qa=A[3];if(g!==ja[0]||m!==ja[1]||C!==ja[2]||qa!==ja[3])U.stencilOpSeparate(g,m,C,qa),ja[0]=g,ja[1]=m,ja[2]=C,ja[3]=qa;g=a[0];m=a[1];C=a[2];qa=a[3];if(g!==ta[0]||m!==ta[1]||C!==ta[2]||qa!==ta[3])U.stencilOpSeparate(g,m,C,qa),ta[0]=g,ta[1]=m,ta[2]=C,ta[3]=qa;g=n.scissor_enable;g!==H.scissor_enable&&(g?U.enable(3089):U.disable(3089),H.scissor_enable=g)}C=G.framebufferWidth;qa=G.framebufferHeight;g=G.viewportWidth;G.viewportWidth=C;m=G.viewportHeight;G.viewportHeight=qa;U.viewport(0,
0,C,qa);W[0]=0;W[1]=0;W[2]=C;W[3]=qa;C=G.framebufferWidth;qa=G.framebufferHeight;U.scissor(0,0,C,qa);F[0]=0;F[1]=0;F[2]=C;F[3]=qa;if(C=H.profile)J=performance.now(),L.count++;qa=v.program(v.vert,v.frag,K);U.useProgram(qa.program);y.setVAO(null);aa=qa.id;(P=ea[aa])||(P=ea[aa]=l(qa));P.call(this,c);H.dirty=!0;y.setVAO(null);B.next=b;G.framebufferWidth=q;G.framebufferHeight=R;G.viewportWidth=g;G.viewportHeight=m;C&&(L.cpuTime+=performance.now()-J)},scope:function(a,d,c){var f,k,l,h,m,b,t,u,x,e,A,w,R,
F,v;f=a.framebuffer;k=B.getFramebuffer(f);f&&!k&&da.commandRaise(q,K);f=B.next;B.next=k;l=G.framebufferWidth;G.framebufferWidth=k?k.width:G.drawingBufferWidth;h=G.framebufferHeight;G.framebufferHeight=k?k.height:G.drawingBufferHeight;m=G.framebufferWidth;b=G.framebufferHeight;k=G.viewportWidth;G.viewportWidth=m;t=G.viewportHeight;G.viewportHeight=b;u=Z[0];Z[0]=0;x=Z[1];Z[1]=0;e=Z[2];Z[2]=m;m=Z[3];Z[3]=b;A=G.framebufferWidth;w=G.framebufferHeight;b=C[0];C[0]=0;R=C[1];C[1]=0;F=C[2];C[2]=A;A=C[3];C[3]=
w;if(w=H.profile)v=performance.now(),L.count++;H.dirty=!0;d(G,a,c);B.next=f;G.framebufferWidth=l;G.framebufferHeight=h;G.viewportWidth=k;G.viewportHeight=t;Z[0]=u;Z[1]=x;Z[2]=e;Z[3]=m;C[0]=b;C[1]=R;C[2]=F;C[3]=A;w&&(L.cpuTime+=performance.now()-v);H.dirty=!0},batch:function(l,b){var g,q,e,C,F;if(H.dirty){g=n.dither;g!==H.dither&&(g?U.enable(3024):U.disable(3024),H.dither=g);g=n.blend_enable;g!==H.blend_enable&&(g?U.enable(3042):U.disable(3042),H.blend_enable=g);g=ba[0];e=ba[1];C=ba[2];F=ba[3];if(g!==
w[0]||e!==w[1]||C!==w[2]||F!==w[3])U.blendColor(g,e,C,F),w[0]=g,w[1]=e,w[2]=C,w[3]=F;g=T[0];e=T[1];if(g!==z[0]||e!==z[1])U.blendEquationSeparate(g,e),z[0]=g,z[1]=e;g=Q[0];e=Q[1];C=Q[2];F=Q[3];if(g!==ia[0]||e!==ia[1]||C!==ia[2]||F!==ia[3])U.blendFuncSeparate(g,e,C,F),ia[0]=g,ia[1]=e,ia[2]=C,ia[3]=F;g=n.depth_enable;g!==H.depth_enable&&(g?U.enable(2929):U.disable(2929),H.depth_enable=g);g=n.depth_func;g!==H.depth_func&&(U.depthFunc(g),H.depth_func=g);g=S[0];e=S[1];if(g!==h[0]||e!==h[1])U.depthRange(g,
e),h[0]=g,h[1]=e;g=n.depth_mask;g!==H.depth_mask&&(U.depthMask(g),H.depth_mask=g);g=k[0];e=k[1];C=k[2];F=k[3];if(g!==u[0]||e!==u[1]||C!==u[2]||F!==u[3])U.colorMask(g,e,C,F),u[0]=g,u[1]=e,u[2]=C,u[3]=F;g=n.cull_enable;g!==H.cull_enable&&(g?U.enable(2884):U.disable(2884),H.cull_enable=g);g=n.cull_face;g!==H.cull_face&&(U.cullFace(g),H.cull_face=g);g=n.frontFace;g!==H.frontFace&&(U.frontFace(g),H.frontFace=g);g=n.lineWidth;g!==H.lineWidth&&(U.lineWidth(g),H.lineWidth=g);g=n.polygonOffset_enable;g!==
H.polygonOffset_enable&&(g?U.enable(32823):U.disable(32823),H.polygonOffset_enable=g);g=X[0];e=X[1];if(g!==f[0]||e!==f[1])U.polygonOffset(g,e),f[0]=g,f[1]=e;g=n.sample_alpha;g!==H.sample_alpha&&(g?U.enable(32926):U.disable(32926),H.sample_alpha=g);g=n.sample_enable;g!==H.sample_enable&&(g?U.enable(32928):U.disable(32928),H.sample_enable=g);g=x[0];e=x[1];if(g!==Y[0]||e!==Y[1])U.sampleCoverage(g,e),Y[0]=g,Y[1]=e;g=n.stencil_enable;g!==H.stencil_enable&&(g?U.enable(2960):U.disable(2960),H.stencil_enable=
g);g=n.stencil_mask;g!==H.stencil_mask&&(U.stencilMask(g),H.stencil_mask=g);g=d[0];e=d[1];C=d[2];if(g!==t[0]||e!==t[1]||C!==t[2])U.stencilFunc(g,e,C),t[0]=g,t[1]=e,t[2]=C;g=A[0];e=A[1];C=A[2];F=A[3];if(g!==ja[0]||e!==ja[1]||C!==ja[2]||F!==ja[3])U.stencilOpSeparate(g,e,C,F),ja[0]=g,ja[1]=e,ja[2]=C,ja[3]=F;g=a[0];e=a[1];C=a[2];F=a[3];if(g!==ta[0]||e!==ta[1]||C!==ta[2]||F!==ta[3])U.stencilOpSeparate(g,e,C,F),ta[0]=g,ta[1]=e,ta[2]=C,ta[3]=F;g=n.scissor_enable;g!==H.scissor_enable&&(g?U.enable(3089):U.disable(3089),
H.scissor_enable=g)}if(g=H.profile)q=performance.now(),L.count+=b;e=v.program(v.vert,v.frag,K);U.useProgram(e.program);y.setVAO(null);C=e.id;(F=R[C])||(F=R[C]=c(e));F.call(this,l,b);H.dirty=!0;y.setVAO(null);g&&(L.cpuTime+=performance.now()-q)}}},$5:function(b,da,K,L,e,l){var q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W;q=b.context;c=b.current;G=b.framebuffer;H=b.gl;B=b.next;U=b.shader;n=b.vao;v=B.blend_color;y=c.blend_color;ba=B.blend_equation;w=c.blend_equation;T=B.blend_func;
z=c.blend_func;Q=B.colorMask;ia=c.colorMask;k=B.depth_range;u=c.depth_range;S=B.polygonOffset_offset;h=c.polygonOffset_offset;X=B.sample_coverage;f=c.sample_coverage;x=B.scissor_box;Y=c.scissor_box;C=B.stencil_func;F=c.stencil_func;d=B.stencil_opBack;t=c.stencil_opBack;a=B.stencil_opFront;ta=c.stencil_opFront;A=B.viewport;ja=c.viewport;Z={};W={};return{draw:function(l){var b,q,D,g,N;b=G.next;b!==G.cur&&(b?H.bindFramebuffer(36160,b.framebuffer):H.bindFramebuffer(36160,null),G.cur=b);if(c.dirty){b=
B.dither;b!==c.dither&&(b?H.enable(3024):H.disable(3024),c.dither=b);b=B.blend_enable;b!==c.blend_enable&&(b?H.enable(3042):H.disable(3042),c.blend_enable=b);b=v[0];D=v[1];g=v[2];N=v[3];if(b!==y[0]||D!==y[1]||g!==y[2]||N!==y[3])H.blendColor(b,D,g,N),y[0]=b,y[1]=D,y[2]=g,y[3]=N;b=ba[0];D=ba[1];if(b!==w[0]||D!==w[1])H.blendEquationSeparate(b,D),w[0]=b,w[1]=D;b=T[0];D=T[1];g=T[2];N=T[3];if(b!==z[0]||D!==z[1]||g!==z[2]||N!==z[3])H.blendFuncSeparate(b,D,g,N),z[0]=b,z[1]=D,z[2]=g,z[3]=N;b=B.depth_enable;
b!==c.depth_enable&&(b?H.enable(2929):H.disable(2929),c.depth_enable=b);b=B.depth_func;b!==c.depth_func&&(H.depthFunc(b),c.depth_func=b);b=k[0];D=k[1];if(b!==u[0]||D!==u[1])H.depthRange(b,D),u[0]=b,u[1]=D;b=B.depth_mask;b!==c.depth_mask&&(H.depthMask(b),c.depth_mask=b);b=Q[0];D=Q[1];g=Q[2];N=Q[3];if(b!==ia[0]||D!==ia[1]||g!==ia[2]||N!==ia[3])H.colorMask(b,D,g,N),ia[0]=b,ia[1]=D,ia[2]=g,ia[3]=N;b=B.cull_enable;b!==c.cull_enable&&(b?H.enable(2884):H.disable(2884),c.cull_enable=b);b=B.cull_face;b!==
c.cull_face&&(H.cullFace(b),c.cull_face=b);b=B.frontFace;b!==c.frontFace&&(H.frontFace(b),c.frontFace=b);b=B.lineWidth;b!==c.lineWidth&&(H.lineWidth(b),c.lineWidth=b);b=B.polygonOffset_enable;b!==c.polygonOffset_enable&&(b?H.enable(32823):H.disable(32823),c.polygonOffset_enable=b);b=S[0];D=S[1];if(b!==h[0]||D!==h[1])H.polygonOffset(b,D),h[0]=b,h[1]=D;b=B.sample_alpha;b!==c.sample_alpha&&(b?H.enable(32926):H.disable(32926),c.sample_alpha=b);b=B.sample_enable;b!==c.sample_enable&&(b?H.enable(32928):
H.disable(32928),c.sample_enable=b);b=X[0];D=X[1];if(b!==f[0]||D!==f[1])H.sampleCoverage(b,D),f[0]=b,f[1]=D;b=B.stencil_enable;b!==c.stencil_enable&&(b?H.enable(2960):H.disable(2960),c.stencil_enable=b);b=B.stencil_mask;b!==c.stencil_mask&&(H.stencilMask(b),c.stencil_mask=b);b=C[0];D=C[1];g=C[2];if(b!==F[0]||D!==F[1]||g!==F[2])H.stencilFunc(b,D,g),F[0]=b,F[1]=D,F[2]=g;b=a[0];D=a[1];g=a[2];N=a[3];if(b!==ta[0]||D!==ta[1]||g!==ta[2]||N!==ta[3])H.stencilOpSeparate(b,D,g,N),ta[0]=b,ta[1]=D,ta[2]=g,ta[3]=
N;b=d[0];D=d[1];g=d[2];N=d[3];if(b!==t[0]||D!==t[1]||g!==t[2]||N!==t[3])H.stencilOpSeparate(b,D,g,N),t[0]=b,t[1]=D,t[2]=g,t[3]=N;b=B.scissor_enable;b!==c.scissor_enable&&(b?H.enable(3089):H.disable(3089),c.scissor_enable=b);b=x[0];D=x[1];g=x[2];N=x[3];if(b!==Y[0]||D!==Y[1]||g!==Y[2]||N!==Y[3])H.scissor(b,D,g,N),Y[0]=b,Y[1]=D,Y[2]=g,Y[3]=N;b=A[0];D=A[1];g=A[2];N=A[3];if(b!==ja[0]||D!==ja[1]||g!==ja[2]||N!==ja[3])H.viewport(b,D,g,N),ja[0]=b,ja[1]=D,ja[2]=g,ja[3]=N;c.dirty=!1}if(b=c.profile)q=performance.now(),
L.count++;D=U.program(U.vert,U.frag,K);H.useProgram(D.program);n.setVAO(null);g=D.id;(N=Z[g])||(N=Z[g]=e(D));N.call(this,l);n.setVAO(null);b&&(L.cpuTime+=performance.now()-q)},scope:function(a,d,f){var k,g;if(k=c.profile)g=performance.now(),L.count++;d(q,a,f);k&&(L.cpuTime+=performance.now()-g)},batch:function(b,q){var e,D,g,N,M;e=G.next;e!==G.cur&&(e?H.bindFramebuffer(36160,e.framebuffer):H.bindFramebuffer(36160,null),G.cur=e);if(c.dirty){e=B.dither;e!==c.dither&&(e?H.enable(3024):H.disable(3024),
c.dither=e);e=B.blend_enable;e!==c.blend_enable&&(e?H.enable(3042):H.disable(3042),c.blend_enable=e);e=v[0];g=v[1];N=v[2];M=v[3];if(e!==y[0]||g!==y[1]||N!==y[2]||M!==y[3])H.blendColor(e,g,N,M),y[0]=e,y[1]=g,y[2]=N,y[3]=M;e=ba[0];g=ba[1];if(e!==w[0]||g!==w[1])H.blendEquationSeparate(e,g),w[0]=e,w[1]=g;e=T[0];g=T[1];N=T[2];M=T[3];if(e!==z[0]||g!==z[1]||N!==z[2]||M!==z[3])H.blendFuncSeparate(e,g,N,M),z[0]=e,z[1]=g,z[2]=N,z[3]=M;e=B.depth_enable;e!==c.depth_enable&&(e?H.enable(2929):H.disable(2929),c.depth_enable=
e);e=B.depth_func;e!==c.depth_func&&(H.depthFunc(e),c.depth_func=e);e=k[0];g=k[1];if(e!==u[0]||g!==u[1])H.depthRange(e,g),u[0]=e,u[1]=g;e=B.depth_mask;e!==c.depth_mask&&(H.depthMask(e),c.depth_mask=e);e=Q[0];g=Q[1];N=Q[2];M=Q[3];if(e!==ia[0]||g!==ia[1]||N!==ia[2]||M!==ia[3])H.colorMask(e,g,N,M),ia[0]=e,ia[1]=g,ia[2]=N,ia[3]=M;e=B.cull_enable;e!==c.cull_enable&&(e?H.enable(2884):H.disable(2884),c.cull_enable=e);e=B.cull_face;e!==c.cull_face&&(H.cullFace(e),c.cull_face=e);e=B.frontFace;e!==c.frontFace&&
(H.frontFace(e),c.frontFace=e);e=B.lineWidth;e!==c.lineWidth&&(H.lineWidth(e),c.lineWidth=e);e=B.polygonOffset_enable;e!==c.polygonOffset_enable&&(e?H.enable(32823):H.disable(32823),c.polygonOffset_enable=e);e=S[0];g=S[1];if(e!==h[0]||g!==h[1])H.polygonOffset(e,g),h[0]=e,h[1]=g;e=B.sample_alpha;e!==c.sample_alpha&&(e?H.enable(32926):H.disable(32926),c.sample_alpha=e);e=B.sample_enable;e!==c.sample_enable&&(e?H.enable(32928):H.disable(32928),c.sample_enable=e);e=X[0];g=X[1];if(e!==f[0]||g!==f[1])H.sampleCoverage(e,
g),f[0]=e,f[1]=g;e=B.stencil_enable;e!==c.stencil_enable&&(e?H.enable(2960):H.disable(2960),c.stencil_enable=e);e=B.stencil_mask;e!==c.stencil_mask&&(H.stencilMask(e),c.stencil_mask=e);e=C[0];g=C[1];N=C[2];if(e!==F[0]||g!==F[1]||N!==F[2])H.stencilFunc(e,g,N),F[0]=e,F[1]=g,F[2]=N;e=a[0];g=a[1];N=a[2];M=a[3];if(e!==ta[0]||g!==ta[1]||N!==ta[2]||M!==ta[3])H.stencilOpSeparate(e,g,N,M),ta[0]=e,ta[1]=g,ta[2]=N,ta[3]=M;e=d[0];g=d[1];N=d[2];M=d[3];if(e!==t[0]||g!==t[1]||N!==t[2]||M!==t[3])H.stencilOpSeparate(e,
g,N,M),t[0]=e,t[1]=g,t[2]=N,t[3]=M;e=B.scissor_enable;e!==c.scissor_enable&&(e?H.enable(3089):H.disable(3089),c.scissor_enable=e);e=x[0];g=x[1];N=x[2];M=x[3];if(e!==Y[0]||g!==Y[1]||N!==Y[2]||M!==Y[3])H.scissor(e,g,N,M),Y[0]=e,Y[1]=g,Y[2]=N,Y[3]=M;e=A[0];g=A[1];N=A[2];M=A[3];if(e!==ja[0]||g!==ja[1]||N!==ja[2]||M!==ja[3])H.viewport(e,g,N,M),ja[0]=e,ja[1]=g,ja[2]=N,ja[3]=M;c.dirty=!1}if(e=c.profile)D=performance.now(),L.count+=q;g=U.program(U.vert,U.frag,K);H.useProgram(g.program);n.setVAO(null);N=g.id;
(M=W[N])||(M=W[N]=l(g));M.call(this,b,q);n.setVAO(null);e&&(L.cpuTime+=performance.now()-D)}}},"$26,color,freq,phase,projection,time,view":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t){var a,ta,A,ja,Z,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,ha,Hb,ga;a=b.attributes;ta=b.context;A=b.current;ja=b.draw;Z=b.elements;W=b.framebuffer;ea=b.gl;R=b.isArrayLike;O=b.next;D=b.shader;g=b.uniforms;N=b.vao;M=O.blend_color;Ca=A.blend_color;
qa=O.blend_equation;m=A.blend_equation;J=O.blend_func;aa=A.blend_func;P=O.colorMask;la=A.colorMask;ra=O.depth_range;Aa=A.depth_range;wa=O.polygonOffset_offset;fa=A.polygonOffset_offset;Ba=O.sample_coverage;ka=A.sample_coverage;pa=O.scissor_box;ya=A.scissor_box;Ja=O.stencil_func;na=A.stencil_func;Za=O.stencil_opBack;Ta=A.stencil_opBack;r=O.stencil_opFront;p=A.stencil_opFront;E=O.viewport;va=A.viewport;Ea=new Float32Array(16);ha=new Float32Array(16);Hb=new Float32Array(16);ga=new Float32Array(16);return{draw:function(g){var f,
k,h,b;f=W.next;f!==W.cur&&(f?ea.bindFramebuffer(36160,f.framebuffer):ea.bindFramebuffer(36160,null),W.cur=f);if(A.dirty){var u;f=O.dither;f!==A.dither&&(f?ea.enable(3024):ea.disable(3024),A.dither=f);f=O.blend_enable;f!==A.blend_enable&&(f?ea.enable(3042):ea.disable(3042),A.blend_enable=f);f=M[0];h=M[1];b=M[2];u=M[3];if(f!==Ca[0]||h!==Ca[1]||b!==Ca[2]||u!==Ca[3])ea.blendColor(f,h,b,u),Ca[0]=f,Ca[1]=h,Ca[2]=b,Ca[3]=u;f=qa[0];h=qa[1];if(f!==m[0]||h!==m[1])ea.blendEquationSeparate(f,h),m[0]=f,m[1]=h;
f=J[0];h=J[1];b=J[2];u=J[3];if(f!==aa[0]||h!==aa[1]||b!==aa[2]||u!==aa[3])ea.blendFuncSeparate(f,h,b,u),aa[0]=f,aa[1]=h,aa[2]=b,aa[3]=u;f=O.depth_enable;f!==A.depth_enable&&(f?ea.enable(2929):ea.disable(2929),A.depth_enable=f);f=O.depth_func;f!==A.depth_func&&(ea.depthFunc(f),A.depth_func=f);f=ra[0];h=ra[1];if(f!==Aa[0]||h!==Aa[1])ea.depthRange(f,h),Aa[0]=f,Aa[1]=h;f=O.depth_mask;f!==A.depth_mask&&(ea.depthMask(f),A.depth_mask=f);f=P[0];h=P[1];b=P[2];u=P[3];if(f!==la[0]||h!==la[1]||b!==la[2]||u!==
la[3])ea.colorMask(f,h,b,u),la[0]=f,la[1]=h,la[2]=b,la[3]=u;f=O.cull_enable;f!==A.cull_enable&&(f?ea.enable(2884):ea.disable(2884),A.cull_enable=f);f=O.cull_face;f!==A.cull_face&&(ea.cullFace(f),A.cull_face=f);f=O.frontFace;f!==A.frontFace&&(ea.frontFace(f),A.frontFace=f);f=O.lineWidth;f!==A.lineWidth&&(ea.lineWidth(f),A.lineWidth=f);f=O.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=f);f=wa[0];h=wa[1];if(f!==fa[0]||h!==fa[1])ea.polygonOffset(f,
h),fa[0]=f,fa[1]=h;f=O.sample_alpha;f!==A.sample_alpha&&(f?ea.enable(32926):ea.disable(32926),A.sample_alpha=f);f=O.sample_enable;f!==A.sample_enable&&(f?ea.enable(32928):ea.disable(32928),A.sample_enable=f);f=Ba[0];h=Ba[1];if(f!==ka[0]||h!==ka[1])ea.sampleCoverage(f,h),ka[0]=f,ka[1]=h;f=O.stencil_enable;f!==A.stencil_enable&&(f?ea.enable(2960):ea.disable(2960),A.stencil_enable=f);f=O.stencil_mask;f!==A.stencil_mask&&(ea.stencilMask(f),A.stencil_mask=f);f=Ja[0];h=Ja[1];b=Ja[2];if(f!==na[0]||h!==na[1]||
b!==na[2])ea.stencilFunc(f,h,b),na[0]=f,na[1]=h,na[2]=b;f=r[0];h=r[1];b=r[2];u=r[3];if(f!==p[0]||h!==p[1]||b!==p[2]||u!==p[3])ea.stencilOpSeparate(f,h,b,u),p[0]=f,p[1]=h,p[2]=b,p[3]=u;f=Za[0];h=Za[1];b=Za[2];u=Za[3];if(f!==Ta[0]||h!==Ta[1]||b!==Ta[2]||u!==Ta[3])ea.stencilOpSeparate(f,h,b,u),Ta[0]=f,Ta[1]=h,Ta[2]=b,Ta[3]=u;f=O.scissor_enable;f!==A.scissor_enable&&(f?ea.enable(3089):ea.disable(3089),A.scissor_enable=f);f=pa[0];h=pa[1];b=pa[2];u=pa[3];if(f!==ya[0]||h!==ya[1]||b!==ya[2]||u!==ya[3])ea.scissor(f,
h,b,u),ya[0]=f,ya[1]=h,ya[2]=b,ya[3]=u;f=E[0];h=E[1];b=E[2];u=E[3];if(f!==va[0]||h!==va[1]||b!==va[2]||u!==va[3])ea.viewport(f,h,b,u),va[0]=f,va[1]=h,va[2]=b,va[3]=u;A.dirty=!1}if(f=A.profile)k=performance.now(),L.count++;ea.useProgram(e.program);N.setVAO(null);h=Y.location;b=a[h];b.buffer||ea.enableVertexAttribArray(h);if(5126!==b.type||4!==b.size||b.buffer!==l||!1!==b.normalized||0!==b.offset||44!==b.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(h,4,5126,!1,44,0),b.type=5126,b.size=
4,b.buffer=l,b.normalized=!1,b.offset=0,b.stride=44;h=C.location;b=a[h];b.buffer||ea.enableVertexAttribArray(h);if(5126!==b.type||4!==b.size||b.buffer!==q||!1!==b.normalized||16!==b.offset||44!==b.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(h,4,5126,!1,44,16),b.type=5126,b.size=4,b.buffer=q,b.normalized=!1,b.offset=16,b.stride=44;h=x.location;b=a[h];b.buffer||ea.enableVertexAttribArray(h);if(5126!==b.type||3!==b.size||b.buffer!==c||!1!==b.normalized||32!==b.offset||44!==b.stride)ea.bindBuffer(34962,
c.buffer),ea.vertexAttribPointer(h,3,5126,!1,44,32),b.type=5126,b.size=3,b.buffer=c,b.normalized=!1,b.offset=32,b.stride=44;h=G.call(this,ta,g,0);"number"!==typeof h&&da.commandRaise(H,K);ea.uniform1f(d.location,h);h=B.call(this,ta,g,0);R(h)&&16===h.length||da.commandRaise(U,K);ea.uniformMatrix4fv(t.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ea[0]=h[0],Ea[1]=h[1],Ea[2]=h[2],Ea[3]=h[3],Ea[4]=h[4],Ea[5]=h[5],Ea[6]=h[6],Ea[7]=h[7],Ea[8]=h[8],Ea[9]=h[9],Ea[10]=h[10],Ea[11]=h[11],Ea[12]=
h[12],Ea[13]=h[13],Ea[14]=h[14],Ea[15]=h[15],Ea));g=n.call(this,ta,g,0);R(g)&&16===g.length||da.commandRaise(v,K);ea.uniformMatrix4fv(F.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(ha[0]=g[0],ha[1]=g[1],ha[2]=g[2],ha[3]=g[3],ha[4]=g[4],ha[5]=g[5],ha[6]=g[6],ha[7]=g[7],ha[8]=g[8],ha[9]=g[9],ha[10]=g[10],ha[11]=g[11],ha[12]=g[12],ha[13]=g[13],ha[14]=g[14],ha[15]=g[15],ha));(g=ja.elements)?ea.bindBuffer(34963,g.buffer.buffer):N.currentVAO&&(g=Z.getElements(N.currentVAO.elements))&&ea.bindBuffer(34963,
g.buffer.buffer);h=ja.offset;g?ea.drawElements(0,1E4,g.type,h<<(g.type-5121>>1)):ea.drawArrays(0,h,1E4);N.setVAO(null);f&&(L.cpuTime+=performance.now()-k)},scope:function(a,d,f){var k,h,b,m,r,p,e,E,t,u,x,na,C,J,F,P,fa,ga,v,Za,Ja,n,H,K,N,aa,M,G,va,O,wa,R,ra,B,S,U,ka,W,X,da,ea,Ca,Ta,Y,pa;if(k=A.profile)h=performance.now(),L.count++;b=ja.count;ja.count=1E4;m=ja.primitive;ja.primitive=0;r=y.call(this,ta,a,f);p=g[5];g[5]=r;e=ba.call(this,ta,a,f);r=g[3];g[3]=e;E=w.call(this,ta,a,f);e=g[4];g[4]=E;E=T.buffer;
T.buffer=c;t=T.divisor;T.divisor=0;u=T.normalized;T.normalized=!1;x=T.offset;T.offset=32;na=T.size;T.size=0;C=T.state;T.state=1;J=T.stride;T.stride=44;F=T.type;T.type=5126;P=T.w;T.w=0;fa=T.x;T.x=0;ga=T.y;T.y=0;v=T.z;T.z=0;Za=z.buffer;z.buffer=l;Ja=z.divisor;z.divisor=0;n=z.normalized;z.normalized=!1;H=z.offset;z.offset=0;K=z.size;z.size=0;N=z.state;z.state=1;aa=z.stride;z.stride=44;M=z.type;z.type=5126;G=z.w;z.w=0;va=z.x;z.x=0;O=z.y;z.y=0;wa=z.z;z.z=0;R=Q.buffer;Q.buffer=q;ra=Q.divisor;Q.divisor=
0;B=Q.normalized;Q.normalized=!1;S=Q.offset;Q.offset=16;U=Q.size;Q.size=0;ka=Q.state;Q.state=1;W=Q.stride;Q.stride=44;X=Q.type;Q.type=5126;da=Q.w;Q.w=0;ea=Q.x;Q.x=0;Ca=Q.y;Q.y=0;Ta=Q.z;Q.z=0;Y=D.vert;D.vert=2;pa=D.frag;D.frag=1;d(ta,a,f);k&&(L.cpuTime+=performance.now()-h);ja.count=b;ja.primitive=m;g[5]=p;g[3]=r;g[4]=e;T.buffer=E;T.divisor=t;T.normalized=u;T.offset=x;T.size=na;T.state=C;T.stride=J;T.type=F;T.w=P;T.x=fa;T.y=ga;T.z=v;z.buffer=Za;z.divisor=Ja;z.normalized=n;z.offset=H;z.size=K;z.state=
N;z.stride=aa;z.type=M;z.w=G;z.x=va;z.y=O;z.z=wa;Q.buffer=R;Q.divisor=ra;Q.normalized=B;Q.offset=S;Q.size=U;Q.state=ka;Q.stride=W;Q.type=X;Q.w=da;Q.x=ea;Q.y=Ca;Q.z=Ta;D.vert=Y;D.frag=pa},batch:function(g,b){var e,w,D;e=W.next;e!==W.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),W.cur=e);if(A.dirty){var v,n,z;e=O.dither;e!==A.dither&&(e?ea.enable(3024):ea.disable(3024),A.dither=e);e=O.blend_enable;e!==A.blend_enable&&(e?ea.enable(3042):ea.disable(3042),A.blend_enable=
e);e=M[0];v=M[1];n=M[2];z=M[3];if(e!==Ca[0]||v!==Ca[1]||n!==Ca[2]||z!==Ca[3])ea.blendColor(e,v,n,z),Ca[0]=e,Ca[1]=v,Ca[2]=n,Ca[3]=z;e=qa[0];v=qa[1];if(e!==m[0]||v!==m[1])ea.blendEquationSeparate(e,v),m[0]=e,m[1]=v;e=J[0];v=J[1];n=J[2];z=J[3];if(e!==aa[0]||v!==aa[1]||n!==aa[2]||z!==aa[3])ea.blendFuncSeparate(e,v,n,z),aa[0]=e,aa[1]=v,aa[2]=n,aa[3]=z;e=O.depth_enable;e!==A.depth_enable&&(e?ea.enable(2929):ea.disable(2929),A.depth_enable=e);e=O.depth_func;e!==A.depth_func&&(ea.depthFunc(e),A.depth_func=
e);e=ra[0];v=ra[1];if(e!==Aa[0]||v!==Aa[1])ea.depthRange(e,v),Aa[0]=e,Aa[1]=v;e=O.depth_mask;e!==A.depth_mask&&(ea.depthMask(e),A.depth_mask=e);e=P[0];v=P[1];n=P[2];z=P[3];if(e!==la[0]||v!==la[1]||n!==la[2]||z!==la[3])ea.colorMask(e,v,n,z),la[0]=e,la[1]=v,la[2]=n,la[3]=z;e=O.cull_enable;e!==A.cull_enable&&(e?ea.enable(2884):ea.disable(2884),A.cull_enable=e);e=O.cull_face;e!==A.cull_face&&(ea.cullFace(e),A.cull_face=e);e=O.frontFace;e!==A.frontFace&&(ea.frontFace(e),A.frontFace=e);e=O.lineWidth;e!==
A.lineWidth&&(ea.lineWidth(e),A.lineWidth=e);e=O.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=e);e=wa[0];v=wa[1];if(e!==fa[0]||v!==fa[1])ea.polygonOffset(e,v),fa[0]=e,fa[1]=v;e=O.sample_alpha;e!==A.sample_alpha&&(e?ea.enable(32926):ea.disable(32926),A.sample_alpha=e);e=O.sample_enable;e!==A.sample_enable&&(e?ea.enable(32928):ea.disable(32928),A.sample_enable=e);e=Ba[0];v=Ba[1];if(e!==ka[0]||v!==ka[1])ea.sampleCoverage(e,v),ka[0]=e,ka[1]=
v;e=O.stencil_enable;e!==A.stencil_enable&&(e?ea.enable(2960):ea.disable(2960),A.stencil_enable=e);e=O.stencil_mask;e!==A.stencil_mask&&(ea.stencilMask(e),A.stencil_mask=e);e=Ja[0];v=Ja[1];n=Ja[2];if(e!==na[0]||v!==na[1]||n!==na[2])ea.stencilFunc(e,v,n),na[0]=e,na[1]=v,na[2]=n;e=r[0];v=r[1];n=r[2];z=r[3];if(e!==p[0]||v!==p[1]||n!==p[2]||z!==p[3])ea.stencilOpSeparate(e,v,n,z),p[0]=e,p[1]=v,p[2]=n,p[3]=z;e=Za[0];v=Za[1];n=Za[2];z=Za[3];if(e!==Ta[0]||v!==Ta[1]||n!==Ta[2]||z!==Ta[3])ea.stencilOpSeparate(e,
v,n,z),Ta[0]=e,Ta[1]=v,Ta[2]=n,Ta[3]=z;e=O.scissor_enable;e!==A.scissor_enable&&(e?ea.enable(3089):ea.disable(3089),A.scissor_enable=e);e=pa[0];v=pa[1];n=pa[2];z=pa[3];if(e!==ya[0]||v!==ya[1]||n!==ya[2]||z!==ya[3])ea.scissor(e,v,n,z),ya[0]=e,ya[1]=v,ya[2]=n,ya[3]=z;e=E[0];v=E[1];n=E[2];z=E[3];if(e!==va[0]||v!==va[1]||n!==va[2]||z!==va[3])ea.viewport(e,v,n,z),va[0]=e,va[1]=v,va[2]=n,va[3]=z;A.dirty=!1}if(e=A.profile)w=performance.now(),L.count+=b;ea.useProgram(ia.program);N.setVAO(null);v=Y.location;
n=a[v];n.buffer||ea.enableVertexAttribArray(v);if(5126!==n.type||4!==n.size||n.buffer!==l||!1!==n.normalized||0!==n.offset||44!==n.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(v,4,5126,!1,44,0),n.type=5126,n.size=4,n.buffer=l,n.normalized=!1,n.offset=0,n.stride=44;v=C.location;n=a[v];n.buffer||ea.enableVertexAttribArray(v);if(5126!==n.type||4!==n.size||n.buffer!==q||!1!==n.normalized||16!==n.offset||44!==n.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(v,4,5126,!1,44,16),
n.type=5126,n.size=4,n.buffer=q,n.normalized=!1,n.offset=16,n.stride=44;v=x.location;n=a[v];n.buffer||ea.enableVertexAttribArray(v);if(5126!==n.type||3!==n.size||n.buffer!==c||!1!==n.normalized||32!==n.offset||44!==n.stride)ea.bindBuffer(34962,c.buffer),ea.vertexAttribPointer(v,3,5126,!1,44,32),n.type=5126,n.size=3,n.buffer=c,n.normalized=!1,n.offset=32,n.stride=44;v=k.call(this,ta,void 0,D);"number"!==typeof v&&da.commandRaise(u,K);ea.uniform1f(d.location,v);v=S.call(this,ta,void 0,D);R(v)&&16===
v.length||da.commandRaise(h,K);ea.uniformMatrix4fv(t.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Hb[0]=v[0],Hb[1]=v[1],Hb[2]=v[2],Hb[3]=v[3],Hb[4]=v[4],Hb[5]=v[5],Hb[6]=v[6],Hb[7]=v[7],Hb[8]=v[8],Hb[9]=v[9],Hb[10]=v[10],Hb[11]=v[11],Hb[12]=v[12],Hb[13]=v[13],Hb[14]=v[14],Hb[15]=v[15],Hb));D=X.call(this,ta,void 0,D);R(D)&&16===D.length||da.commandRaise(f,K);ea.uniformMatrix4fv(F.location,!1,Array.isArray(D)||D instanceof Float32Array?D:(ga[0]=D[0],ga[1]=D[1],ga[2]=D[2],ga[3]=D[3],ga[4]=
D[4],ga[5]=D[5],ga[6]=D[6],ga[7]=D[7],ga[8]=D[8],ga[9]=D[9],ga[10]=D[10],ga[11]=D[11],ga[12]=D[12],ga[13]=D[13],ga[14]=D[14],ga[15]=D[15],ga));(v=ja.elements)?ea.bindBuffer(34963,v.buffer.buffer):N.currentVAO&&(v=Z.getElements(N.currentVAO.elements))&&ea.bindBuffer(34963,v.buffer.buffer);n=ja.offset;for(D=0;D<b;++D)v?ea.drawElements(0,1E4,v.type,n<<(v.type-5121>>1)):ea.drawArrays(0,n,1E4);N.setVAO(null);e&&(L.cpuTime+=performance.now()-w)}}},"$34,atlas,normal,position,projection,uv,view":function(b,
da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W,ea,R){var O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,ha,Hb,ga,I,sa,Da,oa,xa,Fa,ma,V,ua,Ia,za;O=b.attributes;D=b.buffer;g=b.context;N=b.current;M=b.draw;Ca=b.elements;qa=b.framebuffer;m=b.gl;J=b.isArrayLike;aa=b.isBufferArgs;P=b.next;la=b.shader;ra=b.uniforms;Aa=b.vao;wa=P.blend_color;fa=N.blend_color;Ba=P.blend_equation;ka=N.blend_equation;pa=P.blend_func;ya=N.blend_func;Ja=P.colorMask;
na=N.colorMask;Za=P.depth_range;Ta=N.depth_range;r=P.polygonOffset_offset;p=N.polygonOffset_offset;E=P.sample_coverage;va=N.sample_coverage;Ea=P.scissor_box;ha=N.scissor_box;Hb=P.stencil_func;ga=N.stencil_func;I=P.stencil_opBack;sa=N.stencil_opBack;Da=P.stencil_opFront;oa=N.stencil_opFront;xa=P.viewport;Fa=N.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V=new Float32Array(16);ua=new Float32Array(16);Ia=new Float32Array(16);za=new Float32Array(16);
return{draw:function(a){var d,f,k,h,b,t,u,x,w,C,F,z,M,Q,ra,S,T,X,ba,Y,ia,la,ta,za,Ia,$a,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb,bb,ob;d=g.view;f=e.call(this,g,a,0);g.view=f;k=qa.next;k!==qa.cur&&(k?m.bindFramebuffer(36160,k.framebuffer):m.bindFramebuffer(36160,null),qa.cur=k);if(N.dirty){var Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,
Ac,vc,cb;Ua=P.dither;Ua!==N.dither&&(Ua?m.enable(3024):m.disable(3024),N.dither=Ua);hd=P.blend_enable;hd!==N.blend_enable&&(hd?m.enable(3042):m.disable(3042),N.blend_enable=hd);Ib=wa[0];Jb=wa[1];rc=wa[2];Ob=wa[3];if(Ib!==fa[0]||Jb!==fa[1]||rc!==fa[2]||Ob!==fa[3])m.blendColor(Ib,Jb,rc,Ob),fa[0]=Ib,fa[1]=Jb,fa[2]=rc,fa[3]=Ob;jb=Ba[0];Gb=Ba[1];if(jb!==ka[0]||Gb!==ka[1])m.blendEquationSeparate(jb,Gb),ka[0]=jb,ka[1]=Gb;Db=pa[0];wb=pa[1];hb=pa[2];Yb=pa[3];if(Db!==ya[0]||wb!==ya[1]||hb!==ya[2]||Yb!==ya[3])m.blendFuncSeparate(Db,
wb,hb,Yb),ya[0]=Db,ya[1]=wb,ya[2]=hb,ya[3]=Yb;Pb=P.depth_enable;Pb!==N.depth_enable&&(Pb?m.enable(2929):m.disable(2929),N.depth_enable=Pb);qb=P.depth_func;qb!==N.depth_func&&(m.depthFunc(qb),N.depth_func=qb);Ra=Za[0];Ub=Za[1];if(Ra!==Ta[0]||Ub!==Ta[1])m.depthRange(Ra,Ub),Ta[0]=Ra,Ta[1]=Ub;zb=P.depth_mask;zb!==N.depth_mask&&(m.depthMask(zb),N.depth_mask=zb);ic=Ja[0];ib=Ja[1];pb=Ja[2];Ha=Ja[3];if(ic!==na[0]||ib!==na[1]||pb!==na[2]||Ha!==na[3])m.colorMask(ic,ib,pb,Ha),na[0]=ic,na[1]=ib,na[2]=pb,na[3]=
Ha;rb=P.frontFace;rb!==N.frontFace&&(m.frontFace(rb),N.frontFace=rb);Ka=P.lineWidth;Ka!==N.lineWidth&&(m.lineWidth(Ka),N.lineWidth=Ka);fb=P.polygonOffset_enable;fb!==N.polygonOffset_enable&&(fb?m.enable(32823):m.disable(32823),N.polygonOffset_enable=fb);gb=r[0];La=r[1];if(gb!==p[0]||La!==p[1])m.polygonOffset(gb,La),p[0]=gb,p[1]=La;kb=P.sample_alpha;kb!==N.sample_alpha&&(kb?m.enable(32926):m.disable(32926),N.sample_alpha=kb);Va=P.sample_enable;Va!==N.sample_enable&&(Va?m.enable(32928):m.disable(32928),
N.sample_enable=Va);tb=E[0];sb=E[1];if(tb!==va[0]||sb!==va[1])m.sampleCoverage(tb,sb),va[0]=tb,va[1]=sb;Oa=P.stencil_enable;Oa!==N.stencil_enable&&(Oa?m.enable(2960):m.disable(2960),N.stencil_enable=Oa);tc=P.stencil_mask;tc!==N.stencil_mask&&(m.stencilMask(tc),N.stencil_mask=tc);Qa=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Qa!==ga[0]||Kb!==ga[1]||Eb!==ga[2])m.stencilFunc(Qa,Kb,Eb),ga[0]=Qa,ga[1]=Kb,ga[2]=Eb;Ma=Da[0];zd=Da[1];Xa=Da[2];Lb=Da[3];if(Ma!==oa[0]||zd!==oa[1]||Xa!==oa[2]||Lb!==oa[3])m.stencilOpSeparate(Ma,
zd,Xa,Lb),oa[0]=Ma,oa[1]=zd,oa[2]=Xa,oa[3]=Lb;Mb=I[0];lb=I[1];Na=I[2];Zb=I[3];if(Mb!==sa[0]||lb!==sa[1]||Na!==sa[2]||Zb!==sa[3])m.stencilOpSeparate(Mb,lb,Na,Zb),sa[0]=Mb,sa[1]=lb,sa[2]=Na,sa[3]=Zb;Pa=P.scissor_enable;Pa!==N.scissor_enable&&(Pa?m.enable(3089):m.disable(3089),N.scissor_enable=Pa);ub=Ea[0];vb=Ea[1];Sa=Ea[2];nb=Ea[3];if(ub!==ha[0]||vb!==ha[1]||Sa!==ha[2]||nb!==ha[3])m.scissor(ub,vb,Sa,nb),ha[0]=ub,ha[1]=vb,ha[2]=Sa,ha[3]=nb;fc=xa[0];Ac=xa[1];vc=xa[2];cb=xa[3];if(fc!==Fa[0]||Ac!==Fa[1]||
vc!==Fa[2]||cb!==Fa[3])m.viewport(fc,Ac,vc,cb),Fa[0]=fc,Fa[1]=Ac,Fa[2]=vc,Fa[3]=cb}m.enable(2884);N.cull_enable=!0;m.cullFace(1029);N.cull_face=1029;if(h=N.profile)b=performance.now(),L.count++;m.useProgram(l.program);Aa.setVAO(null);(t=a.position)&&("object"===typeof t||"function"===typeof t)&&(aa(t)||D.getBuffer(t)||D.getBuffer(t.buffer)||aa(t.buffer)||"constant"in t&&("number"===typeof t.constant||J(t.constant)))||da.commandRaise(q,K);u=!1;x=null;w=!1;F=C=0;z=1;M=0;Q=5126;X=T=S=ra=0;aa(t)?(u=!0,
x=D.createStream(34962,t),Q=x.dtype):(x=D.getBuffer(t))?Q=x.dtype:"constant"in t?(z=2,"number"===typeof t.constant?(S=t.constant,T=X=ra=0):(S=0<t.constant.length?t.constant[0]:0,T=1<t.constant.length?t.constant[1]:0,X=2<t.constant.length?t.constant[2]:0,ra=3<t.constant.length?t.constant[3]:0)):(x=aa(t.buffer)?D.createStream(34962,t.buffer):D.getBuffer(t.buffer),Q="type"in t?ma[t.type]:x.dtype,w=!!t.normalized,F=t.size|0,C=t.offset|0,M=t.stride|0);ba=Z.location;Y=O[ba];if(1===z){if(Y.buffer||m.enableVertexAttribArray(ba),
ia=F||3,Y.type!==Q||Y.size!==ia||Y.buffer!==x||Y.normalized!==w||Y.offset!==C||Y.stride!==M)m.bindBuffer(34962,x.buffer),m.vertexAttribPointer(ba,ia,Q,w,M,C),Y.type=Q,Y.size=ia,Y.buffer=x,Y.normalized=w,Y.offset=C,Y.stride=M}else if(Y.buffer&&(m.disableVertexAttribArray(ba),Y.buffer=null),Y.x!==S||Y.y!==T||Y.z!==X||Y.w!==ra)m.vertexAttrib4f(ba,S,T,X,ra),Y.x=S,Y.y=T,Y.z=X,Y.w=ra;(la=a.normal)&&("object"===typeof la||"function"===typeof la)&&(aa(la)||D.getBuffer(la)||D.getBuffer(la.buffer)||aa(la.buffer)||
"constant"in la&&("number"===typeof la.constant||J(la.constant)))||da.commandRaise(c,K);ta=!1;za=null;Ia=!1;Bd=$a=0;$d=1;ld=0;bd=5126;Gc=nd=Lc=pd=0;aa(la)?(ta=!0,za=D.createStream(34962,la),bd=za.dtype):(za=D.getBuffer(la))?bd=za.dtype:"constant"in la?($d=2,"number"===typeof la.constant?(Lc=la.constant,nd=Gc=pd=0):(Lc=0<la.constant.length?la.constant[0]:0,nd=1<la.constant.length?la.constant[1]:0,Gc=2<la.constant.length?la.constant[2]:0,pd=3<la.constant.length?la.constant[3]:0)):(za=aa(la.buffer)?
D.createStream(34962,la.buffer):D.getBuffer(la.buffer),bd="type"in la?ma[la.type]:za.dtype,Ia=!!la.normalized,Bd=la.size|0,$a=la.offset|0,ld=la.stride|0);fd=ja.location;Pc=O[fd];if(1===$d){if(Pc.buffer||m.enableVertexAttribArray(fd),Wc=Bd||3,Pc.type!==bd||Pc.size!==Wc||Pc.buffer!==za||Pc.normalized!==Ia||Pc.offset!==$a||Pc.stride!==ld)m.bindBuffer(34962,za.buffer),m.vertexAttribPointer(fd,Wc,bd,Ia,ld,$a),Pc.type=bd,Pc.size=Wc,Pc.buffer=za,Pc.normalized=Ia,Pc.offset=$a,Pc.stride=ld}else if(Pc.buffer&&
(m.disableVertexAttribArray(fd),Pc.buffer=null),Pc.x!==Lc||Pc.y!==nd||Pc.z!==Gc||Pc.w!==pd)m.vertexAttrib4f(fd,Lc,nd,Gc,pd),Pc.x=Lc,Pc.y=nd,Pc.z=Gc,Pc.w=pd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(aa(Bb)||D.getBuffer(Bb)||D.getBuffer(Bb.buffer)||aa(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||J(Bb.constant)))||da.commandRaise(G,K);Fb=!1;Dc=null;xb=!1;Cb=xc=0;Jc=1;lc=0;Hc=5126;dc=Ec=Vc=Xc=0;aa(Bb)?(Fb=!0,Dc=D.createStream(34962,Bb),Hc=Dc.dtype):(Dc=D.getBuffer(Bb))?
Hc=Dc.dtype:"constant"in Bb?(Jc=2,"number"===typeof Bb.constant?(Vc=Bb.constant,Ec=dc=Xc=0):(Vc=0<Bb.constant.length?Bb.constant[0]:0,Ec=1<Bb.constant.length?Bb.constant[1]:0,dc=2<Bb.constant.length?Bb.constant[2]:0,Xc=3<Bb.constant.length?Bb.constant[3]:0)):(Dc=aa(Bb.buffer)?D.createStream(34962,Bb.buffer):D.getBuffer(Bb.buffer),Hc="type"in Bb?ma[Bb.type]:Dc.dtype,xb=!!Bb.normalized,Cb=Bb.size|0,xc=Bb.offset|0,lc=Bb.stride|0);Ic=ea.location;oc=O[Ic];if(1===Jc){if(oc.buffer||m.enableVertexAttribArray(Ic),
pc=Cb||2,oc.type!==Hc||oc.size!==pc||oc.buffer!==Dc||oc.normalized!==xb||oc.offset!==xc||oc.stride!==lc)m.bindBuffer(34962,Dc.buffer),m.vertexAttribPointer(Ic,pc,Hc,xb,lc,xc),oc.type=Hc,oc.size=pc,oc.buffer=Dc,oc.normalized=xb,oc.offset=xc,oc.stride=lc}else if(oc.buffer&&(m.disableVertexAttribArray(Ic),oc.buffer=null),oc.x!==Vc||oc.y!==Ec||oc.z!==dc||oc.w!==Xc)m.vertexAttrib4f(Ic,Vc,Ec,dc,Xc),oc.x=Vc,oc.y=Ec,oc.z=dc,oc.w=Xc;mc=H.call(this,g,a,0);J(mc)&&16===mc.length||da.commandRaise(B,K);m.uniformMatrix4fv(W.location,
!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(V[0]=mc[0],V[1]=mc[1],V[2]=mc[2],V[3]=mc[3],V[4]=mc[4],V[5]=mc[5],V[6]=mc[6],V[7]=mc[7],V[8]=mc[8],V[9]=mc[9],V[10]=mc[10],V[11]=mc[11],V[12]=mc[12],V[13]=mc[13],V[14]=mc[14],V[15]=mc[15],V));ec=g.view;J(ec)&&16===ec.length||da.commandRaise(U,K);m.uniformMatrix4fv(R.location,!1,Array.isArray(ec)||ec instanceof Float32Array?ec:(ua[0]=ec[0],ua[1]=ec[1],ua[2]=ec[2],ua[3]=ec[3],ua[4]=ec[4],ua[5]=ec[5],ua[6]=ec[6],ua[7]=ec[7],ua[8]=ec[8],ua[9]=ec[9],
ua[10]=ec[10],ua[11]=ec[11],ua[12]=ec[12],ua[13]=ec[13],ua[14]=ec[14],ua[15]=ec[15],ua));(ab=a.atlas)&&"framebuffer"===ab._reglType&&(ab=ab.color[0]);"function"===typeof ab&&"texture2d"===ab._reglType||da.commandRaise(n,K);qc=ab._texture;m.uniform1i(A.location,qc.bind());yb=a.elements;db=null;(Nb=aa(yb))?db=Ca.createStream(yb):(db=Ca.getElements(yb),yb&&!db&&da.commandRaise(v,K));db&&m.bindBuffer(34963,db.buffer.buffer);bb=db?db.primType:4;ob=db?db.vertCount:-1;0<=ob||da.commandRaise(y,K);ob&&(db?
m.drawElements(bb,ob,db.type,0<<(db.type-5121>>1)):m.drawArrays(bb,0,ob),N.dirty=!0,Aa.setVAO(null),g.view=d,h&&(L.cpuTime+=performance.now()-b),u&&D.destroyStream(x),ta&&D.destroyStream(za),Fb&&D.destroyStream(Dc),qc.unbind(),Nb&&Ca.destroyStream(db))},scope:function(a,d,c){var f,h,l,b,m,r,p,e,q,t,I,E,x,na,A,v,C,n,F,fa,ga,Za,Ja,H,sa,y,oa,Da,G,va,O,V,wa,R,B,U,ka,W,X,Y,ea,Ta,xa,pa,Ba,ya,ta,ja,Ea,Fa,Aa,qa,Hb,Z,ua,ha,za,Cc,Ia,td,Ua,$a,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,
gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb;f=g.view;h=ba.call(this,g,a,c);g.view=h;l=P.cull_enable;P.cull_enable=!0;b=P.cull_face;P.cull_face=1029;if(m=N.profile)r=performance.now(),L.count++;p=a.elements;e=null;(q=aa(p))?e=Ca.createStream(p):(e=Ca.getElements(p),p&&!e&&da.commandRaise(w,K));t=M.elements;M.elements=e;I=M.offset;M.offset=0;E=e?e.vertCount:-1;x=M.count;M.count=E;na=e?e.primType:4;A=M.primitive;M.primitive=na;v=a.atlas;C=ra[5];ra[5]=v;n=T.call(this,g,a,c);F=ra[3];ra[3]=n;fa=
g.view;ga=ra[4];ra[4]=fa;(Za=a.normal)&&("object"===typeof Za||"function"===typeof Za)&&(aa(Za)||D.getBuffer(Za)||D.getBuffer(Za.buffer)||aa(Za.buffer)||"constant"in Za&&("number"===typeof Za.constant||J(Za.constant)))||da.commandRaise(z,K);Ja=!1;H=null;sa=0;y=!1;Da=oa=0;G=1;va=0;O=5126;B=R=wa=V=0;aa(Za)?(Ja=!0,H=D.createStream(34962,Za),O=H.dtype):(H=D.getBuffer(Za))?O=H.dtype:"constant"in Za?(G=2,"number"===typeof Za.constant?(wa=Za.constant,R=B=V=0):(wa=0<Za.constant.length?Za.constant[0]:0,R=
1<Za.constant.length?Za.constant[1]:0,B=2<Za.constant.length?Za.constant[2]:0,V=3<Za.constant.length?Za.constant[3]:0)):(H=aa(Za.buffer)?D.createStream(34962,Za.buffer):D.getBuffer(Za.buffer),O="type"in Za?ma[Za.type]:H.dtype,y=!!Za.normalized,Da=Za.size|0,oa=Za.offset|0,va=Za.stride|0,sa=Za.divisor|0);U=Q.buffer;Q.buffer=H;ka=Q.divisor;Q.divisor=sa;W=Q.normalized;Q.normalized=y;X=Q.offset;Q.offset=oa;Y=Q.size;Q.size=Da;ea=Q.state;Q.state=G;Ta=Q.stride;Q.stride=va;xa=Q.type;Q.type=O;pa=Q.w;Q.w=V;
Ba=Q.x;Q.x=wa;ya=Q.y;Q.y=R;ta=Q.z;Q.z=B;(ja=a.position)&&("object"===typeof ja||"function"===typeof ja)&&(aa(ja)||D.getBuffer(ja)||D.getBuffer(ja.buffer)||aa(ja.buffer)||"constant"in ja&&("number"===typeof ja.constant||J(ja.constant)))||da.commandRaise(ia,K);Ea=!1;Fa=null;Aa=0;qa=!1;Z=Hb=0;ua=1;ha=0;za=5126;Ua=td=Ia=Cc=0;aa(ja)?(Ea=!0,Fa=D.createStream(34962,ja),za=Fa.dtype):(Fa=D.getBuffer(ja))?za=Fa.dtype:"constant"in ja?(ua=2,"number"===typeof ja.constant?(Ia=ja.constant,td=Ua=Cc=0):(Ia=0<ja.constant.length?
ja.constant[0]:0,td=1<ja.constant.length?ja.constant[1]:0,Ua=2<ja.constant.length?ja.constant[2]:0,Cc=3<ja.constant.length?ja.constant[3]:0)):(Fa=aa(ja.buffer)?D.createStream(34962,ja.buffer):D.getBuffer(ja.buffer),za="type"in ja?ma[ja.type]:Fa.dtype,qa=!!ja.normalized,Z=ja.size|0,Hb=ja.offset|0,ha=ja.stride|0,Aa=ja.divisor|0);$a=k.buffer;k.buffer=Fa;Ib=k.divisor;k.divisor=Aa;Jb=k.normalized;k.normalized=qa;rc=k.offset;k.offset=Hb;Ob=k.size;k.size=Z;jb=k.state;k.state=ua;Gb=k.stride;k.stride=ha;Db=
k.type;k.type=za;wb=k.w;k.w=Cc;hb=k.x;k.x=Ia;Yb=k.y;k.y=td;Pb=k.z;k.z=Ua;(qb=a.uv)&&("object"===typeof qb||"function"===typeof qb)&&(aa(qb)||D.getBuffer(qb)||D.getBuffer(qb.buffer)||aa(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||J(qb.constant)))||da.commandRaise(u,K);Ra=!1;Ub=null;zb=0;ic=!1;pb=ib=0;Ha=1;rb=0;Ka=5126;kb=La=gb=fb=0;aa(qb)?(Ra=!0,Ub=D.createStream(34962,qb),Ka=Ub.dtype):(Ub=D.getBuffer(qb))?Ka=Ub.dtype:"constant"in qb?(Ha=2,"number"===typeof qb.constant?(gb=qb.constant,
La=kb=fb=0):(gb=0<qb.constant.length?qb.constant[0]:0,La=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,fb=3<qb.constant.length?qb.constant[3]:0)):(Ub=aa(qb.buffer)?D.createStream(34962,qb.buffer):D.getBuffer(qb.buffer),Ka="type"in qb?ma[qb.type]:Ub.dtype,ic=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|0);Va=S.buffer;S.buffer=Ub;tb=S.divisor;S.divisor=zb;sb=S.normalized;S.normalized=ic;Oa=S.offset;S.offset=ib;tc=S.size;S.size=pb;Qa=S.state;
S.state=Ha;Kb=S.stride;S.stride=rb;Eb=S.type;S.type=Ka;Ma=S.w;S.w=fb;zd=S.x;S.x=gb;Xa=S.y;S.y=La;Lb=S.z;S.z=kb;Mb=la.vert;la.vert=2;lb=la.frag;la.frag=1;N.dirty=!0;d(g,a,c);g.view=f;P.cull_enable=l;P.cull_face=b;m&&(L.cpuTime+=performance.now()-r);q&&Ca.destroyStream(e);M.elements=t;M.offset=I;M.count=x;M.primitive=A;ra[5]=C;ra[3]=F;ra[4]=ga;Ja&&D.destroyStream(H);Q.buffer=U;Q.divisor=ka;Q.normalized=W;Q.offset=X;Q.size=Y;Q.state=ea;Q.stride=Ta;Q.type=xa;Q.w=pa;Q.x=Ba;Q.y=ya;Q.z=ta;Ea&&D.destroyStream(Fa);
k.buffer=$a;k.divisor=Ib;k.normalized=Jb;k.offset=rc;k.size=Ob;k.state=jb;k.stride=Gb;k.type=Db;k.w=wb;k.x=hb;k.y=Yb;k.z=Pb;Ra&&D.destroyStream(Ub);S.buffer=Va;S.divisor=tb;S.normalized=sb;S.offset=Oa;S.size=tc;S.state=Qa;S.stride=Kb;S.type=Eb;S.w=Ma;S.x=zd;S.y=Xa;S.z=Lb;la.vert=Mb;la.frag=lb;N.dirty=!0},batch:function(c,k){var l,b,e,q,u,w,v;l=g.view;b=h.call(this,g,c,0);g.view=b;e=qa.next;e!==qa.cur&&(e?m.bindFramebuffer(36160,e.framebuffer):m.bindFramebuffer(36160,null),qa.cur=e);if(N.dirty){var n,
z,H,y,M,G,V,Q,ra,B,S,T,U,ba,la,ia,ua,$a,Bd,$d,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,lc,Hc,Xc,Vc,Ec,dc,Ic,oc,pc,mc,ec,ab,qc,yb,db,Nb;n=P.dither;n!==N.dither&&(n?m.enable(3024):m.disable(3024),N.dither=n);z=P.blend_enable;z!==N.blend_enable&&(z?m.enable(3042):m.disable(3042),N.blend_enable=z);H=wa[0];y=wa[1];M=wa[2];G=wa[3];if(H!==fa[0]||y!==fa[1]||M!==fa[2]||G!==fa[3])m.blendColor(H,y,M,G),fa[0]=H,fa[1]=y,fa[2]=M,fa[3]=G;V=Ba[0];Q=Ba[1];if(V!==ka[0]||Q!==ka[1])m.blendEquationSeparate(V,Q),
ka[0]=V,ka[1]=Q;ra=pa[0];B=pa[1];S=pa[2];T=pa[3];if(ra!==ya[0]||B!==ya[1]||S!==ya[2]||T!==ya[3])m.blendFuncSeparate(ra,B,S,T),ya[0]=ra,ya[1]=B,ya[2]=S,ya[3]=T;U=P.depth_enable;U!==N.depth_enable&&(U?m.enable(2929):m.disable(2929),N.depth_enable=U);ba=P.depth_func;ba!==N.depth_func&&(m.depthFunc(ba),N.depth_func=ba);la=Za[0];ia=Za[1];if(la!==Ta[0]||ia!==Ta[1])m.depthRange(la,ia),Ta[0]=la,Ta[1]=ia;ua=P.depth_mask;ua!==N.depth_mask&&(m.depthMask(ua),N.depth_mask=ua);$a=Ja[0];Bd=Ja[1];$d=Ja[2];ld=Ja[3];
if($a!==na[0]||Bd!==na[1]||$d!==na[2]||ld!==na[3])m.colorMask($a,Bd,$d,ld),na[0]=$a,na[1]=Bd,na[2]=$d,na[3]=ld;bd=P.frontFace;bd!==N.frontFace&&(m.frontFace(bd),N.frontFace=bd);pd=P.lineWidth;pd!==N.lineWidth&&(m.lineWidth(pd),N.lineWidth=pd);Lc=P.polygonOffset_enable;Lc!==N.polygonOffset_enable&&(Lc?m.enable(32823):m.disable(32823),N.polygonOffset_enable=Lc);nd=r[0];Gc=r[1];if(nd!==p[0]||Gc!==p[1])m.polygonOffset(nd,Gc),p[0]=nd,p[1]=Gc;fd=P.sample_alpha;fd!==N.sample_alpha&&(fd?m.enable(32926):m.disable(32926),
N.sample_alpha=fd);Pc=P.sample_enable;Pc!==N.sample_enable&&(Pc?m.enable(32928):m.disable(32928),N.sample_enable=Pc);Wc=E[0];Bb=E[1];if(Wc!==va[0]||Bb!==va[1])m.sampleCoverage(Wc,Bb),va[0]=Wc,va[1]=Bb;Fb=P.stencil_enable;Fb!==N.stencil_enable&&(Fb?m.enable(2960):m.disable(2960),N.stencil_enable=Fb);Dc=P.stencil_mask;Dc!==N.stencil_mask&&(m.stencilMask(Dc),N.stencil_mask=Dc);xb=Hb[0];xc=Hb[1];Cb=Hb[2];if(xb!==ga[0]||xc!==ga[1]||Cb!==ga[2])m.stencilFunc(xb,xc,Cb),ga[0]=xb,ga[1]=xc,ga[2]=Cb;Jc=Da[0];
lc=Da[1];Hc=Da[2];Xc=Da[3];if(Jc!==oa[0]||lc!==oa[1]||Hc!==oa[2]||Xc!==oa[3])m.stencilOpSeparate(Jc,lc,Hc,Xc),oa[0]=Jc,oa[1]=lc,oa[2]=Hc,oa[3]=Xc;Vc=I[0];Ec=I[1];dc=I[2];Ic=I[3];if(Vc!==sa[0]||Ec!==sa[1]||dc!==sa[2]||Ic!==sa[3])m.stencilOpSeparate(Vc,Ec,dc,Ic),sa[0]=Vc,sa[1]=Ec,sa[2]=dc,sa[3]=Ic;oc=P.scissor_enable;oc!==N.scissor_enable&&(oc?m.enable(3089):m.disable(3089),N.scissor_enable=oc);pc=Ea[0];mc=Ea[1];ec=Ea[2];ab=Ea[3];if(pc!==ha[0]||mc!==ha[1]||ec!==ha[2]||ab!==ha[3])m.scissor(pc,mc,ec,
ab),ha[0]=pc,ha[1]=mc,ha[2]=ec,ha[3]=ab;qc=xa[0];yb=xa[1];db=xa[2];Nb=xa[3];if(qc!==Fa[0]||yb!==Fa[1]||db!==Fa[2]||Nb!==Fa[3])m.viewport(qc,yb,db,Nb),Fa[0]=qc,Fa[1]=yb,Fa[2]=db,Fa[3]=Nb}m.enable(2884);N.cull_enable=!0;m.cullFace(1029);N.cull_face=1029;if(q=N.profile)u=performance.now(),L.count+=k;m.useProgram(X.program);var bb,ob;Aa.setVAO(null);bb=C.call(this,g,v,w);J(bb)&&16===bb.length||da.commandRaise(F,K);m.uniformMatrix4fv(W.location,!1,Array.isArray(bb)||bb instanceof Float32Array?bb:(Ia[0]=
bb[0],Ia[1]=bb[1],Ia[2]=bb[2],Ia[3]=bb[3],Ia[4]=bb[4],Ia[5]=bb[5],Ia[6]=bb[6],Ia[7]=bb[7],Ia[8]=bb[8],Ia[9]=bb[9],Ia[10]=bb[10],Ia[11]=bb[11],Ia[12]=bb[12],Ia[13]=bb[13],Ia[14]=bb[14],Ia[15]=bb[15],Ia));ob=g.view;J(ob)&&16===ob.length||da.commandRaise(d,K);m.uniformMatrix4fv(R.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(za[0]=ob[0],za[1]=ob[1],za[2]=ob[2],za[3]=ob[3],za[4]=ob[4],za[5]=ob[5],za[6]=ob[6],za[7]=ob[7],za[8]=ob[8],za[9]=ob[9],za[10]=ob[10],za[11]=ob[11],za[12]=ob[12],
za[13]=ob[13],za[14]=ob[14],za[15]=ob[15],za));for(w=0;w<k;++w){v=c[w];var Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,ic,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,zd,Xa,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,fc,Ac,vc,cb,jc,qd,Wa;(Ua=v.position)&&("object"===typeof Ua||"function"===typeof Ua)&&(aa(Ua)||D.getBuffer(Ua)||D.getBuffer(Ua.buffer)||aa(Ua.buffer)||"constant"in Ua&&("number"===typeof Ua.constant||J(Ua.constant)))||da.commandRaise(f,K);hd=!1;Ib=null;Jb=!1;Ob=rc=0;jb=1;Gb=0;Db=5126;
Pb=Yb=hb=wb=0;aa(Ua)?(hd=!0,Ib=D.createStream(34962,Ua),Db=Ib.dtype):(Ib=D.getBuffer(Ua))?Db=Ib.dtype:"constant"in Ua?(jb=2,"number"===typeof Ua.constant?(hb=Ua.constant,Yb=Pb=wb=0):(hb=0<Ua.constant.length?Ua.constant[0]:0,Yb=1<Ua.constant.length?Ua.constant[1]:0,Pb=2<Ua.constant.length?Ua.constant[2]:0,wb=3<Ua.constant.length?Ua.constant[3]:0)):(Ib=aa(Ua.buffer)?D.createStream(34962,Ua.buffer):D.getBuffer(Ua.buffer),Db="type"in Ua?ma[Ua.type]:Ib.dtype,Jb=!!Ua.normalized,Ob=Ua.size|0,rc=Ua.offset|
0,Gb=Ua.stride|0);qb=Z.location;Ra=O[qb];if(1===jb){if(Ra.buffer||m.enableVertexAttribArray(qb),Ub=Ob||3,Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==Ib||Ra.normalized!==Jb||Ra.offset!==rc||Ra.stride!==Gb)m.bindBuffer(34962,Ib.buffer),m.vertexAttribPointer(qb,Ub,Db,Jb,Gb,rc),Ra.type=Db,Ra.size=Ub,Ra.buffer=Ib,Ra.normalized=Jb,Ra.offset=rc,Ra.stride=Gb}else if(Ra.buffer&&(m.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Yb||Ra.z!==Pb||Ra.w!==wb)m.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ra.x=hb,Ra.y=
Yb,Ra.z=Pb,Ra.w=wb;(zb=v.normal)&&("object"===typeof zb||"function"===typeof zb)&&(aa(zb)||D.getBuffer(zb)||D.getBuffer(zb.buffer)||aa(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||J(zb.constant)))||da.commandRaise(x,K);ic=!1;ib=null;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Va=kb=La=0;aa(zb)?(ic=!0,ib=D.createStream(34962,zb),gb=ib.dtype):(ib=D.getBuffer(zb))?gb=ib.dtype:"constant"in zb?(Ka=2,"number"===typeof zb.constant?(kb=zb.constant,Va=tb=La=0):(kb=0<zb.constant.length?zb.constant[0]:
0,Va=1<zb.constant.length?zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,La=3<zb.constant.length?zb.constant[3]:0)):(ib=aa(zb.buffer)?D.createStream(34962,zb.buffer):D.getBuffer(zb.buffer),gb="type"in zb?ma[zb.type]:ib.dtype,pb=!!zb.normalized,rb=zb.size|0,Ha=zb.offset|0,fb=zb.stride|0);sb=ja.location;Oa=O[sb];if(1===Ka){if(Oa.buffer||m.enableVertexAttribArray(sb),tc=rb||3,Oa.type!==gb||Oa.size!==tc||Oa.buffer!==ib||Oa.normalized!==pb||Oa.offset!==Ha||Oa.stride!==fb)m.bindBuffer(34962,
ib.buffer),m.vertexAttribPointer(sb,tc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=tc,Oa.buffer=ib,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb}else if(Oa.buffer&&(m.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Va||Oa.z!==tb||Oa.w!==La)m.vertexAttrib4f(sb,kb,Va,tb,La),Oa.x=kb,Oa.y=Va,Oa.z=tb,Oa.w=La;(Qa=v.uv)&&("object"===typeof Qa||"function"===typeof Qa)&&(aa(Qa)||D.getBuffer(Qa)||D.getBuffer(Qa.buffer)||aa(Qa.buffer)||"constant"in Qa&&("number"===typeof Qa.constant||J(Qa.constant)))||da.commandRaise(Y,
K);Kb=!1;Eb=null;Ma=!1;Xa=zd=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;aa(Qa)?(Kb=!0,Eb=D.createStream(34962,Qa),lb=Eb.dtype):(Eb=D.getBuffer(Qa))?lb=Eb.dtype:"constant"in Qa?(Lb=2,"number"===typeof Qa.constant?(Zb=Qa.constant,Pa=ub=Na=0):(Zb=0<Qa.constant.length?Qa.constant[0]:0,Pa=1<Qa.constant.length?Qa.constant[1]:0,ub=2<Qa.constant.length?Qa.constant[2]:0,Na=3<Qa.constant.length?Qa.constant[3]:0)):(Eb=aa(Qa.buffer)?D.createStream(34962,Qa.buffer):D.getBuffer(Qa.buffer),lb="type"in Qa?ma[Qa.type]:Eb.dtype,
Ma=!!Qa.normalized,Xa=Qa.size|0,zd=Qa.offset|0,Mb=Qa.stride|0);vb=ea.location;Sa=O[vb];if(1===Lb){if(Sa.buffer||m.enableVertexAttribArray(vb),nb=Xa||2,Sa.type!==lb||Sa.size!==nb||Sa.buffer!==Eb||Sa.normalized!==Ma||Sa.offset!==zd||Sa.stride!==Mb)m.bindBuffer(34962,Eb.buffer),m.vertexAttribPointer(vb,nb,lb,Ma,Mb,zd),Sa.type=lb,Sa.size=nb,Sa.buffer=Eb,Sa.normalized=Ma,Sa.offset=zd,Sa.stride=Mb}else if(Sa.buffer&&(m.disableVertexAttribArray(vb),Sa.buffer=null),Sa.x!==Zb||Sa.y!==Pa||Sa.z!==ub||Sa.w!==
Na)m.vertexAttrib4f(vb,Zb,Pa,ub,Na),Sa.x=Zb,Sa.y=Pa,Sa.z=ub,Sa.w=Na;(fc=v.atlas)&&"framebuffer"===fc._reglType&&(fc=fc.color[0]);"function"===typeof fc&&"texture2d"===fc._reglType||da.commandRaise(t,K);Ac=fc._texture;m.uniform1i(A.location,Ac.bind());vc=v.elements;cb=null;(jc=aa(vc))?cb=Ca.createStream(vc):(cb=Ca.getElements(vc),vc&&!cb&&da.commandRaise(a,K));cb&&m.bindBuffer(34963,cb.buffer.buffer);qd=cb?cb.primType:4;Wa=cb?cb.vertCount:-1;0<=Wa||da.commandRaise(ta,K);Wa&&(cb?m.drawElements(qd,Wa,
cb.type,0<<(cb.type-5121>>1)):m.drawArrays(qd,0,Wa),hd&&D.destroyStream(Ib),ic&&D.destroyStream(ib),Kb&&D.destroyStream(Eb),Ac.unbind(),jc&&Ca.destroyStream(cb))}N.dirty=!0;Aa.setVAO(null);g.view=l;q&&(L.cpuTime+=performance.now()-u)}}},"$7,color,position":function(b,da,K,L,e,l,q,c,G,H){var B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W,ea,R,O,D,g,N,M;B=b.attributes;U=b.context;n=b.current;v=b.draw;y=b.elements;ba=b.framebuffer;w=b.gl;T=b.next;z=b.shader;Q=b.uniforms;ia=b.vao;k=T.blend_color;
u=n.blend_color;S=T.blend_equation;h=n.blend_equation;X=T.blend_func;f=n.blend_func;x=T.colorMask;Y=n.colorMask;C=T.depth_range;F=n.depth_range;d=T.polygonOffset_offset;t=n.polygonOffset_offset;a=T.sample_coverage;ta=n.sample_coverage;A=T.scissor_box;ja=n.scissor_box;Z=T.stencil_func;W=n.stencil_func;ea=T.stencil_opBack;R=n.stencil_opBack;O=T.stencil_opFront;D=n.stencil_opFront;g=T.viewport;N=n.viewport;M=[1,0,0,1];return{draw:function(c){var b,m,q,z;c=ba.next;c!==ba.cur&&(c?w.bindFramebuffer(36160,
c.framebuffer):w.bindFramebuffer(36160,null),ba.cur=c);if(n.dirty){c=T.dither;c!==n.dither&&(c?w.enable(3024):w.disable(3024),n.dither=c);c=T.blend_enable;c!==n.blend_enable&&(c?w.enable(3042):w.disable(3042),n.blend_enable=c);c=k[0];m=k[1];q=k[2];z=k[3];if(c!==u[0]||m!==u[1]||q!==u[2]||z!==u[3])w.blendColor(c,m,q,z),u[0]=c,u[1]=m,u[2]=q,u[3]=z;c=S[0];m=S[1];if(c!==h[0]||m!==h[1])w.blendEquationSeparate(c,m),h[0]=c,h[1]=m;c=X[0];m=X[1];q=X[2];z=X[3];if(c!==f[0]||m!==f[1]||q!==f[2]||z!==f[3])w.blendFuncSeparate(c,
m,q,z),f[0]=c,f[1]=m,f[2]=q,f[3]=z;c=T.depth_enable;c!==n.depth_enable&&(c?w.enable(2929):w.disable(2929),n.depth_enable=c);c=T.depth_func;c!==n.depth_func&&(w.depthFunc(c),n.depth_func=c);c=C[0];m=C[1];if(c!==F[0]||m!==F[1])w.depthRange(c,m),F[0]=c,F[1]=m;c=T.depth_mask;c!==n.depth_mask&&(w.depthMask(c),n.depth_mask=c);c=x[0];m=x[1];q=x[2];z=x[3];if(c!==Y[0]||m!==Y[1]||q!==Y[2]||z!==Y[3])w.colorMask(c,m,q,z),Y[0]=c,Y[1]=m,Y[2]=q,Y[3]=z;c=T.cull_enable;c!==n.cull_enable&&(c?w.enable(2884):w.disable(2884),
n.cull_enable=c);c=T.cull_face;c!==n.cull_face&&(w.cullFace(c),n.cull_face=c);c=T.frontFace;c!==n.frontFace&&(w.frontFace(c),n.frontFace=c);c=T.lineWidth;c!==n.lineWidth&&(w.lineWidth(c),n.lineWidth=c);c=T.polygonOffset_enable;c!==n.polygonOffset_enable&&(c?w.enable(32823):w.disable(32823),n.polygonOffset_enable=c);c=d[0];m=d[1];if(c!==t[0]||m!==t[1])w.polygonOffset(c,m),t[0]=c,t[1]=m;c=T.sample_alpha;c!==n.sample_alpha&&(c?w.enable(32926):w.disable(32926),n.sample_alpha=c);c=T.sample_enable;c!==
n.sample_enable&&(c?w.enable(32928):w.disable(32928),n.sample_enable=c);c=a[0];m=a[1];if(c!==ta[0]||m!==ta[1])w.sampleCoverage(c,m),ta[0]=c,ta[1]=m;c=T.stencil_enable;c!==n.stencil_enable&&(c?w.enable(2960):w.disable(2960),n.stencil_enable=c);c=T.stencil_mask;c!==n.stencil_mask&&(w.stencilMask(c),n.stencil_mask=c);c=Z[0];m=Z[1];q=Z[2];if(c!==W[0]||m!==W[1]||q!==W[2])w.stencilFunc(c,m,q),W[0]=c,W[1]=m,W[2]=q;c=O[0];m=O[1];q=O[2];z=O[3];if(c!==D[0]||m!==D[1]||q!==D[2]||z!==D[3])w.stencilOpSeparate(c,
m,q,z),D[0]=c,D[1]=m,D[2]=q,D[3]=z;c=ea[0];m=ea[1];q=ea[2];z=ea[3];if(c!==R[0]||m!==R[1]||q!==R[2]||z!==R[3])w.stencilOpSeparate(c,m,q,z),R[0]=c,R[1]=m,R[2]=q,R[3]=z;c=T.scissor_enable;c!==n.scissor_enable&&(c?w.enable(3089):w.disable(3089),n.scissor_enable=c);c=A[0];m=A[1];q=A[2];z=A[3];if(c!==ja[0]||m!==ja[1]||q!==ja[2]||z!==ja[3])w.scissor(c,m,q,z),ja[0]=c,ja[1]=m,ja[2]=q,ja[3]=z;c=g[0];m=g[1];q=g[2];z=g[3];if(c!==N[0]||m!==N[1]||q!==N[2]||z!==N[3])w.viewport(c,m,q,z),N[0]=c,N[1]=m,N[2]=q,N[3]=
z;n.dirty=!1}if(c=n.profile)b=performance.now(),L.count++;w.useProgram(e.program);ia.setVAO(null);m=H.location;q=B[m];q.buffer||w.enableVertexAttribArray(m);if(q.type!==l.dtype||2!==q.size||q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)w.bindBuffer(34962,l.buffer),w.vertexAttribPointer(m,2,l.dtype,!1,0,0),q.type=l.dtype,q.size=2,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;w.uniform4f(G.location,1,0,0,1);(m=v.elements)?w.bindBuffer(34963,m.buffer.buffer):ia.currentVAO&&(m=y.getElements(ia.currentVAO.elements))&&
w.bindBuffer(34963,m.buffer.buffer);q=v.primitive;z=v.offset;m?w.drawElements(q,3,m.type,z<<(m.type-5121>>1)):w.drawArrays(q,z,3);ia.setVAO(null);c&&(L.cpuTime+=performance.now()-b)},scope:function(a,c,d){var f,g,k,h,b,e,t,u,x,A,w,C,F,na,D,H,r,p;if(f=n.profile)g=performance.now(),L.count++;k=v.count;v.count=3;h=Q[3];Q[3]=M;b=q.buffer;q.buffer=l;e=q.divisor;q.divisor=0;t=q.normalized;q.normalized=!1;u=q.offset;q.offset=0;x=q.size;q.size=0;A=q.state;q.state=1;w=q.stride;q.stride=0;C=q.type;q.type=l.dtype;
F=q.w;q.w=0;na=q.x;q.x=0;D=q.y;q.y=0;H=q.z;q.z=0;r=z.vert;z.vert=2;p=z.frag;z.frag=1;c(U,a,d);f&&(L.cpuTime+=performance.now()-g);v.count=k;Q[3]=h;q.buffer=b;q.divisor=e;q.normalized=t;q.offset=u;q.size=x;q.state=A;q.stride=w;q.type=C;q.w=F;q.x=na;q.y=D;q.z=H;z.vert=r;z.frag=p},batch:function(b,e){var m,q,z;m=ba.next;m!==ba.cur&&(m?w.bindFramebuffer(36160,m.framebuffer):w.bindFramebuffer(36160,null),ba.cur=m);if(n.dirty){var P,K;m=T.dither;m!==n.dither&&(m?w.enable(3024):w.disable(3024),n.dither=
m);m=T.blend_enable;m!==n.blend_enable&&(m?w.enable(3042):w.disable(3042),n.blend_enable=m);m=k[0];z=k[1];P=k[2];K=k[3];if(m!==u[0]||z!==u[1]||P!==u[2]||K!==u[3])w.blendColor(m,z,P,K),u[0]=m,u[1]=z,u[2]=P,u[3]=K;m=S[0];z=S[1];if(m!==h[0]||z!==h[1])w.blendEquationSeparate(m,z),h[0]=m,h[1]=z;m=X[0];z=X[1];P=X[2];K=X[3];if(m!==f[0]||z!==f[1]||P!==f[2]||K!==f[3])w.blendFuncSeparate(m,z,P,K),f[0]=m,f[1]=z,f[2]=P,f[3]=K;m=T.depth_enable;m!==n.depth_enable&&(m?w.enable(2929):w.disable(2929),n.depth_enable=
m);m=T.depth_func;m!==n.depth_func&&(w.depthFunc(m),n.depth_func=m);m=C[0];z=C[1];if(m!==F[0]||z!==F[1])w.depthRange(m,z),F[0]=m,F[1]=z;m=T.depth_mask;m!==n.depth_mask&&(w.depthMask(m),n.depth_mask=m);m=x[0];z=x[1];P=x[2];K=x[3];if(m!==Y[0]||z!==Y[1]||P!==Y[2]||K!==Y[3])w.colorMask(m,z,P,K),Y[0]=m,Y[1]=z,Y[2]=P,Y[3]=K;m=T.cull_enable;m!==n.cull_enable&&(m?w.enable(2884):w.disable(2884),n.cull_enable=m);m=T.cull_face;m!==n.cull_face&&(w.cullFace(m),n.cull_face=m);m=T.frontFace;m!==n.frontFace&&(w.frontFace(m),
n.frontFace=m);m=T.lineWidth;m!==n.lineWidth&&(w.lineWidth(m),n.lineWidth=m);m=T.polygonOffset_enable;m!==n.polygonOffset_enable&&(m?w.enable(32823):w.disable(32823),n.polygonOffset_enable=m);m=d[0];z=d[1];if(m!==t[0]||z!==t[1])w.polygonOffset(m,z),t[0]=m,t[1]=z;m=T.sample_alpha;m!==n.sample_alpha&&(m?w.enable(32926):w.disable(32926),n.sample_alpha=m);m=T.sample_enable;m!==n.sample_enable&&(m?w.enable(32928):w.disable(32928),n.sample_enable=m);m=a[0];z=a[1];if(m!==ta[0]||z!==ta[1])w.sampleCoverage(m,
z),ta[0]=m,ta[1]=z;m=T.stencil_enable;m!==n.stencil_enable&&(m?w.enable(2960):w.disable(2960),n.stencil_enable=m);m=T.stencil_mask;m!==n.stencil_mask&&(w.stencilMask(m),n.stencil_mask=m);m=Z[0];z=Z[1];P=Z[2];if(m!==W[0]||z!==W[1]||P!==W[2])w.stencilFunc(m,z,P),W[0]=m,W[1]=z,W[2]=P;m=O[0];z=O[1];P=O[2];K=O[3];if(m!==D[0]||z!==D[1]||P!==D[2]||K!==D[3])w.stencilOpSeparate(m,z,P,K),D[0]=m,D[1]=z,D[2]=P,D[3]=K;m=ea[0];z=ea[1];P=ea[2];K=ea[3];if(m!==R[0]||z!==R[1]||P!==R[2]||K!==R[3])w.stencilOpSeparate(m,
z,P,K),R[0]=m,R[1]=z,R[2]=P,R[3]=K;m=T.scissor_enable;m!==n.scissor_enable&&(m?w.enable(3089):w.disable(3089),n.scissor_enable=m);m=A[0];z=A[1];P=A[2];K=A[3];if(m!==ja[0]||z!==ja[1]||P!==ja[2]||K!==ja[3])w.scissor(m,z,P,K),ja[0]=m,ja[1]=z,ja[2]=P,ja[3]=K;m=g[0];z=g[1];P=g[2];K=g[3];if(m!==N[0]||z!==N[1]||P!==N[2]||K!==N[3])w.viewport(m,z,P,K),N[0]=m,N[1]=z,N[2]=P,N[3]=K;n.dirty=!1}if(m=n.profile)q=performance.now(),L.count+=e;w.useProgram(c.program);var M;ia.setVAO(null);z=H.location;P=B[z];P.buffer||
w.enableVertexAttribArray(z);if(P.type!==l.dtype||2!==P.size||P.buffer!==l||!1!==P.normalized||0!==P.offset||0!==P.stride)w.bindBuffer(34962,l.buffer),w.vertexAttribPointer(z,2,l.dtype,!1,0,0),P.type=l.dtype,P.size=2,P.buffer=l,P.normalized=!1,P.offset=0,P.stride=0;w.uniform4f(G.location,1,0,0,1);(P=v.elements)?w.bindBuffer(34963,P.buffer.buffer):ia.currentVAO&&(P=y.getElements(ia.currentVAO.elements))&&w.bindBuffer(34963,P.buffer.buffer);K=v.primitive;M=v.offset;for(z=0;z<e;++z)P?w.drawElements(K,
3,P.type,M<<(P.type-5121>>1)):w.drawArrays(K,M,3);ia.setVAO(null);m&&(L.cpuTime+=performance.now()-q)}}},"$19,angle,color,offset,position":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S){var h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W,ea,R,O,D,g,N,M,ha,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa;h=b.attributes;X=b.context;f=b.current;x=b.draw;Y=b.elements;C=b.framebuffer;F=b.gl;d=b.isArrayLike;t=b.next;a=b.shader;ta=b.uniforms;A=b.vao;ja=t.blend_color;Z=f.blend_color;W=t.blend_equation;ea=f.blend_equation;
R=t.blend_func;O=f.blend_func;D=t.colorMask;g=f.colorMask;N=t.depth_range;M=f.depth_range;ha=t.polygonOffset_offset;qa=f.polygonOffset_offset;m=t.sample_coverage;J=f.sample_coverage;aa=t.scissor_box;P=f.scissor_box;la=t.stencil_func;ra=f.stencil_func;Aa=t.stencil_opBack;wa=f.stencil_opBack;fa=t.stencil_opFront;Ba=f.stencil_opFront;ka=t.viewport;pa=f.viewport;return{draw:function(a){var b,na,w,z;b=C.next;b!==C.cur&&(b?F.bindFramebuffer(36160,b.framebuffer):F.bindFramebuffer(36160,null),C.cur=b);if(f.dirty){var r;
b=t.dither;b!==f.dither&&(b?F.enable(3024):F.disable(3024),f.dither=b);b=t.blend_enable;b!==f.blend_enable&&(b?F.enable(3042):F.disable(3042),f.blend_enable=b);b=ja[0];w=ja[1];z=ja[2];r=ja[3];if(b!==Z[0]||w!==Z[1]||z!==Z[2]||r!==Z[3])F.blendColor(b,w,z,r),Z[0]=b,Z[1]=w,Z[2]=z,Z[3]=r;b=W[0];w=W[1];if(b!==ea[0]||w!==ea[1])F.blendEquationSeparate(b,w),ea[0]=b,ea[1]=w;b=R[0];w=R[1];z=R[2];r=R[3];if(b!==O[0]||w!==O[1]||z!==O[2]||r!==O[3])F.blendFuncSeparate(b,w,z,r),O[0]=b,O[1]=w,O[2]=z,O[3]=r;b=t.depth_func;
b!==f.depth_func&&(F.depthFunc(b),f.depth_func=b);b=N[0];w=N[1];if(b!==M[0]||w!==M[1])F.depthRange(b,w),M[0]=b,M[1]=w;b=t.depth_mask;b!==f.depth_mask&&(F.depthMask(b),f.depth_mask=b);b=D[0];w=D[1];z=D[2];r=D[3];if(b!==g[0]||w!==g[1]||z!==g[2]||r!==g[3])F.colorMask(b,w,z,r),g[0]=b,g[1]=w,g[2]=z,g[3]=r;b=t.cull_enable;b!==f.cull_enable&&(b?F.enable(2884):F.disable(2884),f.cull_enable=b);b=t.cull_face;b!==f.cull_face&&(F.cullFace(b),f.cull_face=b);b=t.frontFace;b!==f.frontFace&&(F.frontFace(b),f.frontFace=
b);b=t.lineWidth;b!==f.lineWidth&&(F.lineWidth(b),f.lineWidth=b);b=t.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?F.enable(32823):F.disable(32823),f.polygonOffset_enable=b);b=ha[0];w=ha[1];if(b!==qa[0]||w!==qa[1])F.polygonOffset(b,w),qa[0]=b,qa[1]=w;b=t.sample_alpha;b!==f.sample_alpha&&(b?F.enable(32926):F.disable(32926),f.sample_alpha=b);b=t.sample_enable;b!==f.sample_enable&&(b?F.enable(32928):F.disable(32928),f.sample_enable=b);b=m[0];w=m[1];if(b!==J[0]||w!==J[1])F.sampleCoverage(b,w),J[0]=
b,J[1]=w;b=t.stencil_enable;b!==f.stencil_enable&&(b?F.enable(2960):F.disable(2960),f.stencil_enable=b);b=t.stencil_mask;b!==f.stencil_mask&&(F.stencilMask(b),f.stencil_mask=b);b=la[0];w=la[1];z=la[2];if(b!==ra[0]||w!==ra[1]||z!==ra[2])F.stencilFunc(b,w,z),ra[0]=b,ra[1]=w,ra[2]=z;b=fa[0];w=fa[1];z=fa[2];r=fa[3];if(b!==Ba[0]||w!==Ba[1]||z!==Ba[2]||r!==Ba[3])F.stencilOpSeparate(b,w,z,r),Ba[0]=b,Ba[1]=w,Ba[2]=z,Ba[3]=r;b=Aa[0];w=Aa[1];z=Aa[2];r=Aa[3];if(b!==wa[0]||w!==wa[1]||z!==wa[2]||r!==wa[3])F.stencilOpSeparate(b,
w,z,r),wa[0]=b,wa[1]=w,wa[2]=z,wa[3]=r;b=t.scissor_enable;b!==f.scissor_enable&&(b?F.enable(3089):F.disable(3089),f.scissor_enable=b);b=aa[0];w=aa[1];z=aa[2];r=aa[3];if(b!==P[0]||w!==P[1]||z!==P[2]||r!==P[3])F.scissor(b,w,z,r),P[0]=b,P[1]=w,P[2]=z,P[3]=r;b=ka[0];w=ka[1];z=ka[2];r=ka[3];if(b!==pa[0]||w!==pa[1]||z!==pa[2]||r!==pa[3])F.viewport(b,w,z,r),pa[0]=b,pa[1]=w,pa[2]=z,pa[3]=r}F.disable(2929);f.depth_enable=!1;if(b=f.profile)na=performance.now(),L.count++;F.useProgram(e.program);A.setVAO(null);
w=S.location;z=h[w];z.buffer||F.enableVertexAttribArray(w);if(z.type!==l.dtype||2!==z.size||z.buffer!==l||!1!==z.normalized||0!==z.offset||0!==z.stride)F.bindBuffer(34962,l.buffer),F.vertexAttribPointer(w,2,l.dtype,!1,0,0),z.type=l.dtype,z.size=2,z.buffer=l,z.normalized=!1,z.offset=0,z.stride=0;w=q.call(this,X,a,0);"number"!==typeof w&&da.commandRaise(c,K);F.uniform1f(ia.location,w);w=a.offset;d(w)&&2===w.length||da.commandRaise(G,K);F.uniform2f(u.location,w[0],w[1]);a=H.call(this,X,a,0);d(a)&&4===
a.length||da.commandRaise(B,K);F.uniform4f(k.location,a[0],a[1],a[2],a[3]);(a=x.elements)?F.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=Y.getElements(A.currentVAO.elements))&&F.bindBuffer(34963,a.buffer.buffer);w=x.primitive;z=x.offset;a?F.drawElements(w,3,a.type,z<<(a.type-5121>>1)):F.drawArrays(w,z,3);f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-na)},scope:function(c,d,g){var b,k,h,m,e,q,u,w,z,A,I,C,F,D,P,J,fa,K,H,y,M;b=t.depth_enable;t.depth_enable=!1;if(k=f.profile)h=performance.now(),
L.count++;m=x.count;x.count=3;e=U.call(this,X,c,g);q=ta[3];ta[3]=e;u=n.call(this,X,c,g);e=ta[5];ta[5]=u;w=c.offset;u=ta[4];ta[4]=w;w=v.buffer;v.buffer=l;z=v.divisor;v.divisor=0;A=v.normalized;v.normalized=!1;I=v.offset;v.offset=0;C=v.size;v.size=0;F=v.state;v.state=1;D=v.stride;v.stride=0;P=v.type;v.type=l.dtype;J=v.w;v.w=0;fa=v.x;v.x=0;K=v.y;v.y=0;H=v.z;v.z=0;y=a.vert;a.vert=2;M=a.frag;a.frag=1;f.dirty=!0;d(X,c,g);t.depth_enable=b;k&&(L.cpuTime+=performance.now()-h);x.count=m;ta[3]=q;ta[5]=e;ta[4]=
u;v.buffer=w;v.divisor=z;v.normalized=A;v.offset=I;v.size=C;v.state=F;v.stride=D;v.type=P;v.w=J;v.x=fa;v.y=K;v.z=H;a.vert=y;a.frag=M;f.dirty=!0},batch:function(a,c){var b,e,q,r;b=C.next;b!==C.cur&&(b?F.bindFramebuffer(36160,b.framebuffer):F.bindFramebuffer(36160,null),C.cur=b);if(f.dirty){var p,E,v;b=t.dither;b!==f.dither&&(b?F.enable(3024):F.disable(3024),f.dither=b);b=t.blend_enable;b!==f.blend_enable&&(b?F.enable(3042):F.disable(3042),f.blend_enable=b);b=ja[0];p=ja[1];E=ja[2];v=ja[3];if(b!==Z[0]||
p!==Z[1]||E!==Z[2]||v!==Z[3])F.blendColor(b,p,E,v),Z[0]=b,Z[1]=p,Z[2]=E,Z[3]=v;b=W[0];p=W[1];if(b!==ea[0]||p!==ea[1])F.blendEquationSeparate(b,p),ea[0]=b,ea[1]=p;b=R[0];p=R[1];E=R[2];v=R[3];if(b!==O[0]||p!==O[1]||E!==O[2]||v!==O[3])F.blendFuncSeparate(b,p,E,v),O[0]=b,O[1]=p,O[2]=E,O[3]=v;b=t.depth_func;b!==f.depth_func&&(F.depthFunc(b),f.depth_func=b);b=N[0];p=N[1];if(b!==M[0]||p!==M[1])F.depthRange(b,p),M[0]=b,M[1]=p;b=t.depth_mask;b!==f.depth_mask&&(F.depthMask(b),f.depth_mask=b);b=D[0];p=D[1];
E=D[2];v=D[3];if(b!==g[0]||p!==g[1]||E!==g[2]||v!==g[3])F.colorMask(b,p,E,v),g[0]=b,g[1]=p,g[2]=E,g[3]=v;b=t.cull_enable;b!==f.cull_enable&&(b?F.enable(2884):F.disable(2884),f.cull_enable=b);b=t.cull_face;b!==f.cull_face&&(F.cullFace(b),f.cull_face=b);b=t.frontFace;b!==f.frontFace&&(F.frontFace(b),f.frontFace=b);b=t.lineWidth;b!==f.lineWidth&&(F.lineWidth(b),f.lineWidth=b);b=t.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?F.enable(32823):F.disable(32823),f.polygonOffset_enable=b);b=ha[0];p=
ha[1];if(b!==qa[0]||p!==qa[1])F.polygonOffset(b,p),qa[0]=b,qa[1]=p;b=t.sample_alpha;b!==f.sample_alpha&&(b?F.enable(32926):F.disable(32926),f.sample_alpha=b);b=t.sample_enable;b!==f.sample_enable&&(b?F.enable(32928):F.disable(32928),f.sample_enable=b);b=m[0];p=m[1];if(b!==J[0]||p!==J[1])F.sampleCoverage(b,p),J[0]=b,J[1]=p;b=t.stencil_enable;b!==f.stencil_enable&&(b?F.enable(2960):F.disable(2960),f.stencil_enable=b);b=t.stencil_mask;b!==f.stencil_mask&&(F.stencilMask(b),f.stencil_mask=b);b=la[0];p=
la[1];E=la[2];if(b!==ra[0]||p!==ra[1]||E!==ra[2])F.stencilFunc(b,p,E),ra[0]=b,ra[1]=p,ra[2]=E;b=fa[0];p=fa[1];E=fa[2];v=fa[3];if(b!==Ba[0]||p!==Ba[1]||E!==Ba[2]||v!==Ba[3])F.stencilOpSeparate(b,p,E,v),Ba[0]=b,Ba[1]=p,Ba[2]=E,Ba[3]=v;b=Aa[0];p=Aa[1];E=Aa[2];v=Aa[3];if(b!==wa[0]||p!==wa[1]||E!==wa[2]||v!==wa[3])F.stencilOpSeparate(b,p,E,v),wa[0]=b,wa[1]=p,wa[2]=E,wa[3]=v;b=t.scissor_enable;b!==f.scissor_enable&&(b?F.enable(3089):F.disable(3089),f.scissor_enable=b);b=aa[0];p=aa[1];E=aa[2];v=aa[3];if(b!==
P[0]||p!==P[1]||E!==P[2]||v!==P[3])F.scissor(b,p,E,v),P[0]=b,P[1]=p,P[2]=E,P[3]=v;b=ka[0];p=ka[1];E=ka[2];v=ka[3];if(b!==pa[0]||p!==pa[1]||E!==pa[2]||v!==pa[3])F.viewport(b,p,E,v),pa[0]=b,pa[1]=p,pa[2]=E,pa[3]=v}F.disable(2929);f.depth_enable=!1;if(b=f.profile)e=performance.now(),L.count+=c;F.useProgram(y.program);A.setVAO(null);p=S.location;E=h[p];E.buffer||F.enableVertexAttribArray(p);if(E.type!==l.dtype||2!==E.size||E.buffer!==l||!1!==E.normalized||0!==E.offset||0!==E.stride)F.bindBuffer(34962,
l.buffer),F.vertexAttribPointer(p,2,l.dtype,!1,0,0),E.type=l.dtype,E.size=2,E.buffer=l,E.normalized=!1,E.offset=0,E.stride=0;q=ba.call(this,X,r,q);"number"!==typeof q&&da.commandRaise(w,K);F.uniform1f(ia.location,q);(p=x.elements)?F.bindBuffer(34963,p.buffer.buffer):A.currentVAO&&(p=Y.getElements(A.currentVAO.elements))&&F.bindBuffer(34963,p.buffer.buffer);E=x.primitive;v=x.offset;for(q=0;q<c;++q){r=a[q];var n,H,G,ga,I,sa,Da,oa,B;n=r.offset;d(n)&&2===n.length||da.commandRaise(T,K);H=n[0];n=n[1];q&&
G===H&&ga===n||(G=H,ga=n,F.uniform2f(u.location,H,n));I=z.call(this,X,r,q);d(I)&&4===I.length||da.commandRaise(Q,K);r=I[0];H=I[1];n=I[2];I=I[3];q&&sa===r&&Da===H&&oa===n&&B===I||(sa=r,Da=H,oa=n,B=I,F.uniform4f(k.location,r,H,n,I));p?F.drawElements(E,3,p.type,v<<(p.type-5121>>1)):F.drawArrays(E,v,3)}f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-e)}}},"$23,model,position,projection,view":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x){var Y,C,F,d,t,a,ta,A,ja,Z,W,ea,
R,O,D,g,N,M,ha,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea;Y=b.attributes;C=b.context;F=b.current;d=b.draw;t=b.framebuffer;a=b.gl;ta=b.isArrayLike;A=b.next;ja=b.shader;Z=b.uniforms;W=b.vao;ea=A.blend_color;R=F.blend_color;O=A.blend_equation;D=F.blend_equation;g=A.blend_func;N=F.blend_func;M=A.colorMask;ha=F.colorMask;qa=A.depth_range;m=F.depth_range;J=A.polygonOffset_offset;aa=F.polygonOffset_offset;P=A.sample_coverage;la=F.sample_coverage;ra=A.scissor_box;Aa=F.scissor_box;wa=A.stencil_func;
fa=F.stencil_func;Ba=A.stencil_opBack;ka=F.stencil_opBack;pa=A.stencil_opFront;ya=F.stencil_opFront;Ja=A.viewport;na=F.viewport;Za=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);r=new Float32Array(16);p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];E=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);Ea=new Float32Array(16);return{draw:function(d){var b,k,p,u;b=t.next;b!==t.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),t.cur=
b);if(F.dirty){var E;b=A.dither;b!==F.dither&&(b?a.enable(3024):a.disable(3024),F.dither=b);b=A.blend_enable;b!==F.blend_enable&&(b?a.enable(3042):a.disable(3042),F.blend_enable=b);b=ea[0];p=ea[1];u=ea[2];E=ea[3];if(b!==R[0]||p!==R[1]||u!==R[2]||E!==R[3])a.blendColor(b,p,u,E),R[0]=b,R[1]=p,R[2]=u,R[3]=E;b=O[0];p=O[1];if(b!==D[0]||p!==D[1])a.blendEquationSeparate(b,p),D[0]=b,D[1]=p;b=g[0];p=g[1];u=g[2];E=g[3];if(b!==N[0]||p!==N[1]||u!==N[2]||E!==N[3])a.blendFuncSeparate(b,p,u,E),N[0]=b,N[1]=p,N[2]=
u,N[3]=E;b=A.depth_enable;b!==F.depth_enable&&(b?a.enable(2929):a.disable(2929),F.depth_enable=b);b=A.depth_func;b!==F.depth_func&&(a.depthFunc(b),F.depth_func=b);b=qa[0];p=qa[1];if(b!==m[0]||p!==m[1])a.depthRange(b,p),m[0]=b,m[1]=p;b=A.depth_mask;b!==F.depth_mask&&(a.depthMask(b),F.depth_mask=b);b=M[0];p=M[1];u=M[2];E=M[3];if(b!==ha[0]||p!==ha[1]||u!==ha[2]||E!==ha[3])a.colorMask(b,p,u,E),ha[0]=b,ha[1]=p,ha[2]=u,ha[3]=E;b=A.cull_enable;b!==F.cull_enable&&(b?a.enable(2884):a.disable(2884),F.cull_enable=
b);b=A.cull_face;b!==F.cull_face&&(a.cullFace(b),F.cull_face=b);b=A.frontFace;b!==F.frontFace&&(a.frontFace(b),F.frontFace=b);b=A.lineWidth;b!==F.lineWidth&&(a.lineWidth(b),F.lineWidth=b);b=A.polygonOffset_enable;b!==F.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),F.polygonOffset_enable=b);b=J[0];p=J[1];if(b!==aa[0]||p!==aa[1])a.polygonOffset(b,p),aa[0]=b,aa[1]=p;b=A.sample_alpha;b!==F.sample_alpha&&(b?a.enable(32926):a.disable(32926),F.sample_alpha=b);b=A.sample_enable;b!==F.sample_enable&&
(b?a.enable(32928):a.disable(32928),F.sample_enable=b);b=P[0];p=P[1];if(b!==la[0]||p!==la[1])a.sampleCoverage(b,p),la[0]=b,la[1]=p;b=A.stencil_enable;b!==F.stencil_enable&&(b?a.enable(2960):a.disable(2960),F.stencil_enable=b);b=A.stencil_mask;b!==F.stencil_mask&&(a.stencilMask(b),F.stencil_mask=b);b=wa[0];p=wa[1];u=wa[2];if(b!==fa[0]||p!==fa[1]||u!==fa[2])a.stencilFunc(b,p,u),fa[0]=b,fa[1]=p,fa[2]=u;b=pa[0];p=pa[1];u=pa[2];E=pa[3];if(b!==ya[0]||p!==ya[1]||u!==ya[2]||E!==ya[3])a.stencilOpSeparate(b,
p,u,E),ya[0]=b,ya[1]=p,ya[2]=u,ya[3]=E;b=Ba[0];p=Ba[1];u=Ba[2];E=Ba[3];if(b!==ka[0]||p!==ka[1]||u!==ka[2]||E!==ka[3])a.stencilOpSeparate(b,p,u,E),ka[0]=b,ka[1]=p,ka[2]=u,ka[3]=E;b=A.scissor_enable;b!==F.scissor_enable&&(b?a.enable(3089):a.disable(3089),F.scissor_enable=b);b=ra[0];p=ra[1];u=ra[2];E=ra[3];if(b!==Aa[0]||p!==Aa[1]||u!==Aa[2]||E!==Aa[3])a.scissor(b,p,u,E),Aa[0]=b,Aa[1]=p,Aa[2]=u,Aa[3]=E;b=Ja[0];p=Ja[1];u=Ja[2];E=Ja[3];if(b!==na[0]||p!==na[1]||u!==na[2]||E!==na[3])a.viewport(b,p,u,E),na[0]=
b,na[1]=p,na[2]=u,na[3]=E;F.dirty=!1}if(b=F.profile)k=performance.now(),L.count++;a.useProgram(e.program);W.setVAO(null);p=X.location;u=Y[p];u.buffer||a.enableVertexAttribArray(p);if(u.type!==l.dtype||3!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(p,3,l.dtype,!1,0,0),u.type=l.dtype,u.size=3,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;a.uniformMatrix4fv(h.location,!1,Za);p=q.call(this,C,d,0);ta(p)&&16===p.length||da.commandRaise(c,
K);a.uniformMatrix4fv(x.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Ta[0]=p[0],Ta[1]=p[1],Ta[2]=p[2],Ta[3]=p[3],Ta[4]=p[4],Ta[5]=p[5],Ta[6]=p[6],Ta[7]=p[7],Ta[8]=p[8],Ta[9]=p[9],Ta[10]=p[10],Ta[11]=p[11],Ta[12]=p[12],Ta[13]=p[13],Ta[14]=p[14],Ta[15]=p[15],Ta));d=G.call(this,C,d,0);ta(d)&&16===d.length||da.commandRaise(H,K);a.uniformMatrix4fv(f.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(r[0]=d[0],r[1]=d[1],r[2]=d[2],r[3]=d[3],r[4]=d[4],r[5]=d[5],r[6]=d[6],r[7]=d[7],r[8]=
d[8],r[9]=d[9],r[10]=d[10],r[11]=d[11],r[12]=d[12],r[13]=d[13],r[14]=d[14],r[15]=d[15],r));B&&a.bindBuffer(34963,B.buffer.buffer);d=B.primType;p=B.vertCount-0;0<=p||da.commandRaise(U,K);p&&(a.drawElements(d,p,B.type,0<<(B.type-5121>>1)),W.setVAO(null),b&&(L.cpuTime+=performance.now()-k))},scope:function(a,c,f){var b,g,k,h,m,r,e,q,u,t,E,x,z,A,D,P,na,J,fa,H,M,Za,G;if(b=F.profile)g=performance.now(),L.count++;k=d.elements;d.elements=n;h=d.offset;d.offset=0;m=n.vertCount-0;0<=m||da.commandRaise(v,K);
r=d.count;d.count=m;e=n.primType;m=d.primitive;d.primitive=e;e=Z[3];Z[3]=p;q=y.call(this,C,a,f);u=Z[5];Z[5]=q;t=ba.call(this,C,a,f);q=Z[4];Z[4]=t;t=w.buffer;w.buffer=l;E=w.divisor;w.divisor=0;x=w.normalized;w.normalized=!1;z=w.offset;w.offset=0;A=w.size;w.size=0;D=w.state;w.state=1;P=w.stride;w.stride=0;na=w.type;w.type=l.dtype;J=w.w;w.w=0;fa=w.x;w.x=0;H=w.y;w.y=0;M=w.z;w.z=0;Za=ja.vert;ja.vert=2;G=ja.frag;ja.frag=1;c(C,a,f);b&&(L.cpuTime+=performance.now()-g);d.elements=k;d.offset=h;d.count=r;d.primitive=
m;Z[3]=e;Z[5]=u;Z[4]=q;w.buffer=t;w.divisor=E;w.normalized=x;w.offset=z;w.size=A;w.state=D;w.stride=P;w.type=na;w.w=J;w.x=fa;w.y=H;w.z=M;ja.vert=Za;ja.frag=G},batch:function(d,c){var b,r,p;b=t.next;b!==t.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),t.cur=b);if(F.dirty){var e,q,w;b=A.dither;b!==F.dither&&(b?a.enable(3024):a.disable(3024),F.dither=b);b=A.blend_enable;b!==F.blend_enable&&(b?a.enable(3042):a.disable(3042),F.blend_enable=b);b=ea[0];e=ea[1];q=ea[2];w=ea[3];
if(b!==R[0]||e!==R[1]||q!==R[2]||w!==R[3])a.blendColor(b,e,q,w),R[0]=b,R[1]=e,R[2]=q,R[3]=w;b=O[0];e=O[1];if(b!==D[0]||e!==D[1])a.blendEquationSeparate(b,e),D[0]=b,D[1]=e;b=g[0];e=g[1];q=g[2];w=g[3];if(b!==N[0]||e!==N[1]||q!==N[2]||w!==N[3])a.blendFuncSeparate(b,e,q,w),N[0]=b,N[1]=e,N[2]=q,N[3]=w;b=A.depth_enable;b!==F.depth_enable&&(b?a.enable(2929):a.disable(2929),F.depth_enable=b);b=A.depth_func;b!==F.depth_func&&(a.depthFunc(b),F.depth_func=b);b=qa[0];e=qa[1];if(b!==m[0]||e!==m[1])a.depthRange(b,
e),m[0]=b,m[1]=e;b=A.depth_mask;b!==F.depth_mask&&(a.depthMask(b),F.depth_mask=b);b=M[0];e=M[1];q=M[2];w=M[3];if(b!==ha[0]||e!==ha[1]||q!==ha[2]||w!==ha[3])a.colorMask(b,e,q,w),ha[0]=b,ha[1]=e,ha[2]=q,ha[3]=w;b=A.cull_enable;b!==F.cull_enable&&(b?a.enable(2884):a.disable(2884),F.cull_enable=b);b=A.cull_face;b!==F.cull_face&&(a.cullFace(b),F.cull_face=b);b=A.frontFace;b!==F.frontFace&&(a.frontFace(b),F.frontFace=b);b=A.lineWidth;b!==F.lineWidth&&(a.lineWidth(b),F.lineWidth=b);b=A.polygonOffset_enable;
b!==F.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),F.polygonOffset_enable=b);b=J[0];e=J[1];if(b!==aa[0]||e!==aa[1])a.polygonOffset(b,e),aa[0]=b,aa[1]=e;b=A.sample_alpha;b!==F.sample_alpha&&(b?a.enable(32926):a.disable(32926),F.sample_alpha=b);b=A.sample_enable;b!==F.sample_enable&&(b?a.enable(32928):a.disable(32928),F.sample_enable=b);b=P[0];e=P[1];if(b!==la[0]||e!==la[1])a.sampleCoverage(b,e),la[0]=b,la[1]=e;b=A.stencil_enable;b!==F.stencil_enable&&(b?a.enable(2960):a.disable(2960),
F.stencil_enable=b);b=A.stencil_mask;b!==F.stencil_mask&&(a.stencilMask(b),F.stencil_mask=b);b=wa[0];e=wa[1];q=wa[2];if(b!==fa[0]||e!==fa[1]||q!==fa[2])a.stencilFunc(b,e,q),fa[0]=b,fa[1]=e,fa[2]=q;b=pa[0];e=pa[1];q=pa[2];w=pa[3];if(b!==ya[0]||e!==ya[1]||q!==ya[2]||w!==ya[3])a.stencilOpSeparate(b,e,q,w),ya[0]=b,ya[1]=e,ya[2]=q,ya[3]=w;b=Ba[0];e=Ba[1];q=Ba[2];w=Ba[3];if(b!==ka[0]||e!==ka[1]||q!==ka[2]||w!==ka[3])a.stencilOpSeparate(b,e,q,w),ka[0]=b,ka[1]=e,ka[2]=q,ka[3]=w;b=A.scissor_enable;b!==F.scissor_enable&&
(b?a.enable(3089):a.disable(3089),F.scissor_enable=b);b=ra[0];e=ra[1];q=ra[2];w=ra[3];if(b!==Aa[0]||e!==Aa[1]||q!==Aa[2]||w!==Aa[3])a.scissor(b,e,q,w),Aa[0]=b,Aa[1]=e,Aa[2]=q,Aa[3]=w;b=Ja[0];e=Ja[1];q=Ja[2];w=Ja[3];if(b!==na[0]||e!==na[1]||q!==na[2]||w!==na[3])a.viewport(b,e,q,w),na[0]=b,na[1]=e,na[2]=q,na[3]=w;F.dirty=!1}if(b=F.profile)r=performance.now(),L.count+=c;a.useProgram(T.program);W.setVAO(null);e=X.location;q=Y[e];q.buffer||a.enableVertexAttribArray(e);if(q.type!==l.dtype||3!==q.size||
q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(e,3,l.dtype,!1,0,0),q.type=l.dtype,q.size=3,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;a.uniformMatrix4fv(h.location,!1,E);e=z.call(this,C,void 0,p);ta(e)&&16===e.length||da.commandRaise(Q,K);a.uniformMatrix4fv(x.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(va[0]=e[0],va[1]=e[1],va[2]=e[2],va[3]=e[3],va[4]=e[4],va[5]=e[5],va[6]=e[6],va[7]=e[7],va[8]=e[8],va[9]=e[9],va[10]=
e[10],va[11]=e[11],va[12]=e[12],va[13]=e[13],va[14]=e[14],va[15]=e[15],va));p=ia.call(this,C,void 0,p);ta(p)&&16===p.length||da.commandRaise(k,K);a.uniformMatrix4fv(f.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Ea[0]=p[0],Ea[1]=p[1],Ea[2]=p[2],Ea[3]=p[3],Ea[4]=p[4],Ea[5]=p[5],Ea[6]=p[6],Ea[7]=p[7],Ea[8]=p[8],Ea[9]=p[9],Ea[10]=p[10],Ea[11]=p[11],Ea[12]=p[12],Ea[13]=p[13],Ea[14]=p[14],Ea[15]=p[15],Ea));u&&a.bindBuffer(34963,u.buffer.buffer);e=u.primType;q=u.vertCount-0;0<=q||da.commandRaise(S,
K);for(p=0;p<c;++p)q&&a.drawElements(e,q,u.type,0<<(u.type-5121>>1));W.setVAO(null);b&&(L.cpuTime+=performance.now()-r)}}},$20:function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia){var k,u,S,h,X,f,x,Y,C,F,d,t,a,ta,A,ja,Z,W,ea,R,O,D,g,N,M,ha,qa,m,J,aa,P,la,ra,Aa;k=b.context;u=b.current;S=b.framebuffer;h=b.gl;X=b.next;f=b.shader;x=b.uniforms;Y=b.vao;C=X.blend_color;F=u.blend_color;d=X.blend_equation;t=u.blend_equation;a=X.blend_func;ta=u.blend_func;A=X.colorMask;ja=u.colorMask;Z=X.depth_range;W=u.depth_range;
ea=X.polygonOffset_offset;R=u.polygonOffset_offset;O=X.sample_coverage;D=u.sample_coverage;g=X.scissor_box;N=u.scissor_box;M=X.stencil_func;ha=u.stencil_func;qa=X.stencil_opBack;m=u.stencil_opBack;J=X.stencil_opFront;aa=u.stencil_opFront;P=X.viewport;la=u.viewport;ra={};Aa={};return{draw:function(b){var w,x,z,v,n,y,na,Za,Q,r,p,E,B;w=k.center;x=k.distance;z=k.eye;v=k.phi;n=k.projection;y=q.call(this,k,b,0);na=k.theta;Za=k.up;Q=k.view;k.center=e;k.distance=2.302585092994046;k.eye=l;k.phi=0;k.projection=
y;k.theta=0;k.up=c;k.view=G;y=S.next;y!==S.cur&&(y?h.bindFramebuffer(36160,y.framebuffer):h.bindFramebuffer(36160,null),S.cur=y);if(u.dirty){y=X.dither;y!==u.dither&&(y?h.enable(3024):h.disable(3024),u.dither=y);y=X.blend_enable;y!==u.blend_enable&&(y?h.enable(3042):h.disable(3042),u.blend_enable=y);y=C[0];p=C[1];E=C[2];B=C[3];if(y!==F[0]||p!==F[1]||E!==F[2]||B!==F[3])h.blendColor(y,p,E,B),F[0]=y,F[1]=p,F[2]=E,F[3]=B;y=d[0];p=d[1];if(y!==t[0]||p!==t[1])h.blendEquationSeparate(y,p),t[0]=y,t[1]=p;y=
a[0];p=a[1];E=a[2];B=a[3];if(y!==ta[0]||p!==ta[1]||E!==ta[2]||B!==ta[3])h.blendFuncSeparate(y,p,E,B),ta[0]=y,ta[1]=p,ta[2]=E,ta[3]=B;y=X.depth_enable;y!==u.depth_enable&&(y?h.enable(2929):h.disable(2929),u.depth_enable=y);y=X.depth_func;y!==u.depth_func&&(h.depthFunc(y),u.depth_func=y);y=Z[0];p=Z[1];if(y!==W[0]||p!==W[1])h.depthRange(y,p),W[0]=y,W[1]=p;y=X.depth_mask;y!==u.depth_mask&&(h.depthMask(y),u.depth_mask=y);y=A[0];p=A[1];E=A[2];B=A[3];if(y!==ja[0]||p!==ja[1]||E!==ja[2]||B!==ja[3])h.colorMask(y,
p,E,B),ja[0]=y,ja[1]=p,ja[2]=E,ja[3]=B;y=X.cull_enable;y!==u.cull_enable&&(y?h.enable(2884):h.disable(2884),u.cull_enable=y);y=X.cull_face;y!==u.cull_face&&(h.cullFace(y),u.cull_face=y);y=X.frontFace;y!==u.frontFace&&(h.frontFace(y),u.frontFace=y);y=X.lineWidth;y!==u.lineWidth&&(h.lineWidth(y),u.lineWidth=y);y=X.polygonOffset_enable;y!==u.polygonOffset_enable&&(y?h.enable(32823):h.disable(32823),u.polygonOffset_enable=y);y=ea[0];p=ea[1];if(y!==R[0]||p!==R[1])h.polygonOffset(y,p),R[0]=y,R[1]=p;y=X.sample_alpha;
y!==u.sample_alpha&&(y?h.enable(32926):h.disable(32926),u.sample_alpha=y);y=X.sample_enable;y!==u.sample_enable&&(y?h.enable(32928):h.disable(32928),u.sample_enable=y);y=O[0];p=O[1];if(y!==D[0]||p!==D[1])h.sampleCoverage(y,p),D[0]=y,D[1]=p;y=X.stencil_enable;y!==u.stencil_enable&&(y?h.enable(2960):h.disable(2960),u.stencil_enable=y);y=X.stencil_mask;y!==u.stencil_mask&&(h.stencilMask(y),u.stencil_mask=y);y=M[0];p=M[1];E=M[2];if(y!==ha[0]||p!==ha[1]||E!==ha[2])h.stencilFunc(y,p,E),ha[0]=y,ha[1]=p,
ha[2]=E;y=J[0];p=J[1];E=J[2];B=J[3];if(y!==aa[0]||p!==aa[1]||E!==aa[2]||B!==aa[3])h.stencilOpSeparate(y,p,E,B),aa[0]=y,aa[1]=p,aa[2]=E,aa[3]=B;y=qa[0];p=qa[1];E=qa[2];B=qa[3];if(y!==m[0]||p!==m[1]||E!==m[2]||B!==m[3])h.stencilOpSeparate(y,p,E,B),m[0]=y,m[1]=p,m[2]=E,m[3]=B;y=X.scissor_enable;y!==u.scissor_enable&&(y?h.enable(3089):h.disable(3089),u.scissor_enable=y);y=g[0];p=g[1];E=g[2];B=g[3];if(y!==N[0]||p!==N[1]||E!==N[2]||B!==N[3])h.scissor(y,p,E,B),N[0]=y,N[1]=p,N[2]=E,N[3]=B;y=P[0];p=P[1];E=
P[2];B=P[3];if(y!==la[0]||p!==la[1]||E!==la[2]||B!==la[3])h.viewport(y,p,E,B),la[0]=y,la[1]=p,la[2]=E,la[3]=B;u.dirty=!1}if(y=u.profile)r=performance.now(),L.count++;p=f.program(f.vert,f.frag,K);h.useProgram(p.program);Y.setVAO(null);E=p.id;(B=ra[E])||(B=ra[E]=H(p));B.call(this,b);Y.setVAO(null);k.center=w;k.distance=x;k.eye=z;k.phi=v;k.projection=n;k.theta=na;k.up=Za;k.view=Q;y&&(L.cpuTime+=performance.now()-r)},scope:function(a,d,c){var b,f,g,h,l,m,e,r,p,q,t,w,z,A,C,I,F,D,P;b=k.center;f=k.distance;
g=k.eye;h=k.phi;l=k.projection;m=n.call(this,k,a,c);e=k.theta;r=k.up;p=k.view;k.center=B;k.distance=2.302585092994046;k.eye=U;k.phi=0;k.projection=m;k.theta=0;k.up=v;k.view=y;if(m=u.profile)q=performance.now(),L.count++;t=k.center;w=x[1];x[1]=t;z=k.distance;t=x[2];x[2]=z;A=k.eye;z=x[3];x[3]=A;C=k.phi;A=x[4];x[4]=C;I=k.projection;C=x[5];x[5]=I;F=k.theta;I=x[6];x[6]=F;D=k.up;F=x[7];x[7]=D;D=k.view;P=x[8];x[8]=D;d(k,a,c);k.center=b;k.distance=f;k.eye=g;k.phi=h;k.projection=l;k.theta=e;k.up=r;k.view=
p;m&&(L.cpuTime+=performance.now()-q);x[1]=w;x[2]=t;x[3]=z;x[4]=A;x[5]=C;x[6]=I;x[7]=F;x[8]=P},batch:function(c,b){var l,e,q,x,v,n,y,H,r,p,E,B,G;l=k.center;e=k.distance;q=k.eye;x=k.phi;v=k.projection;n=T.call(this,k,c,0);y=k.theta;H=k.up;r=k.view;k.center=ba;k.distance=2.302585092994046;k.eye=w;k.phi=0;k.projection=n;k.theta=0;k.up=z;k.view=Q;n=S.next;n!==S.cur&&(n?h.bindFramebuffer(36160,n.framebuffer):h.bindFramebuffer(36160,null),S.cur=n);if(u.dirty){n=X.dither;n!==u.dither&&(n?h.enable(3024):
h.disable(3024),u.dither=n);n=X.blend_enable;n!==u.blend_enable&&(n?h.enable(3042):h.disable(3042),u.blend_enable=n);n=C[0];E=C[1];B=C[2];G=C[3];if(n!==F[0]||E!==F[1]||B!==F[2]||G!==F[3])h.blendColor(n,E,B,G),F[0]=n,F[1]=E,F[2]=B,F[3]=G;n=d[0];E=d[1];if(n!==t[0]||E!==t[1])h.blendEquationSeparate(n,E),t[0]=n,t[1]=E;n=a[0];E=a[1];B=a[2];G=a[3];if(n!==ta[0]||E!==ta[1]||B!==ta[2]||G!==ta[3])h.blendFuncSeparate(n,E,B,G),ta[0]=n,ta[1]=E,ta[2]=B,ta[3]=G;n=X.depth_enable;n!==u.depth_enable&&(n?h.enable(2929):
h.disable(2929),u.depth_enable=n);n=X.depth_func;n!==u.depth_func&&(h.depthFunc(n),u.depth_func=n);n=Z[0];E=Z[1];if(n!==W[0]||E!==W[1])h.depthRange(n,E),W[0]=n,W[1]=E;n=X.depth_mask;n!==u.depth_mask&&(h.depthMask(n),u.depth_mask=n);n=A[0];E=A[1];B=A[2];G=A[3];if(n!==ja[0]||E!==ja[1]||B!==ja[2]||G!==ja[3])h.colorMask(n,E,B,G),ja[0]=n,ja[1]=E,ja[2]=B,ja[3]=G;n=X.cull_enable;n!==u.cull_enable&&(n?h.enable(2884):h.disable(2884),u.cull_enable=n);n=X.cull_face;n!==u.cull_face&&(h.cullFace(n),u.cull_face=
n);n=X.frontFace;n!==u.frontFace&&(h.frontFace(n),u.frontFace=n);n=X.lineWidth;n!==u.lineWidth&&(h.lineWidth(n),u.lineWidth=n);n=X.polygonOffset_enable;n!==u.polygonOffset_enable&&(n?h.enable(32823):h.disable(32823),u.polygonOffset_enable=n);n=ea[0];E=ea[1];if(n!==R[0]||E!==R[1])h.polygonOffset(n,E),R[0]=n,R[1]=E;n=X.sample_alpha;n!==u.sample_alpha&&(n?h.enable(32926):h.disable(32926),u.sample_alpha=n);n=X.sample_enable;n!==u.sample_enable&&(n?h.enable(32928):h.disable(32928),u.sample_enable=n);n=
O[0];E=O[1];if(n!==D[0]||E!==D[1])h.sampleCoverage(n,E),D[0]=n,D[1]=E;n=X.stencil_enable;n!==u.stencil_enable&&(n?h.enable(2960):h.disable(2960),u.stencil_enable=n);n=X.stencil_mask;n!==u.stencil_mask&&(h.stencilMask(n),u.stencil_mask=n);n=M[0];E=M[1];B=M[2];if(n!==ha[0]||E!==ha[1]||B!==ha[2])h.stencilFunc(n,E,B),ha[0]=n,ha[1]=E,ha[2]=B;n=J[0];E=J[1];B=J[2];G=J[3];if(n!==aa[0]||E!==aa[1]||B!==aa[2]||G!==aa[3])h.stencilOpSeparate(n,E,B,G),aa[0]=n,aa[1]=E,aa[2]=B,aa[3]=G;n=qa[0];E=qa[1];B=qa[2];G=qa[3];
if(n!==m[0]||E!==m[1]||B!==m[2]||G!==m[3])h.stencilOpSeparate(n,E,B,G),m[0]=n,m[1]=E,m[2]=B,m[3]=G;n=X.scissor_enable;n!==u.scissor_enable&&(n?h.enable(3089):h.disable(3089),u.scissor_enable=n);n=g[0];E=g[1];B=g[2];G=g[3];if(n!==N[0]||E!==N[1]||B!==N[2]||G!==N[3])h.scissor(n,E,B,G),N[0]=n,N[1]=E,N[2]=B,N[3]=G;n=P[0];E=P[1];B=P[2];G=P[3];if(n!==la[0]||E!==la[1]||B!==la[2]||G!==la[3])h.viewport(n,E,B,G),la[0]=n,la[1]=E,la[2]=B,la[3]=G;u.dirty=!1}if(n=u.profile)p=performance.now(),L.count+=b;E=f.program(f.vert,
f.frag,K);h.useProgram(E.program);Y.setVAO(null);B=E.id;(G=Aa[B])||(G=Aa[B]=ia(E));G.call(this,c,b);Y.setVAO(null);k.center=l;k.distance=e;k.eye=q;k.phi=x;k.projection=v;k.theta=y;k.up=H;k.view=r;n&&(L.cpuTime+=performance.now()-p)}}},"$27,position,projection,tex,uv,view":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t){var a,Z,A,ja,ha,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na,Za,Ta,r,p,E,va,Ea,$a,Hb;a=b.attributes;Z=b.context;A=b.current;ja=b.draw;
ha=b.framebuffer;W=b.gl;ea=b.isArrayLike;R=b.next;O=b.shader;D=b.uniforms;g=b.vao;N=R.blend_color;M=A.blend_color;Ca=R.blend_equation;qa=A.blend_equation;m=R.blend_func;J=A.blend_func;aa=R.colorMask;P=A.colorMask;la=R.depth_range;ra=A.depth_range;Aa=R.polygonOffset_offset;wa=A.polygonOffset_offset;fa=R.sample_coverage;Ba=A.sample_coverage;ka=R.scissor_box;pa=A.scissor_box;ya=R.stencil_func;Ja=A.stencil_func;na=R.stencil_opBack;Za=A.stencil_opBack;Ta=R.stencil_opFront;r=A.stencil_opFront;p=R.viewport;
E=A.viewport;va=new Float32Array(16);Ea=new Float32Array(16);$a=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(b){var f,k,h,u;f=ha.next;f!==ha.cur&&(f?W.bindFramebuffer(36160,f.framebuffer):W.bindFramebuffer(36160,null),ha.cur=f);if(A.dirty){var w;f=R.dither;f!==A.dither&&(f?W.enable(3024):W.disable(3024),A.dither=f);f=R.blend_enable;f!==A.blend_enable&&(f?W.enable(3042):W.disable(3042),A.blend_enable=f);f=N[0];h=N[1];u=N[2];w=N[3];if(f!==M[0]||h!==M[1]||u!==M[2]||w!==M[3])W.blendColor(f,
h,u,w),M[0]=f,M[1]=h,M[2]=u,M[3]=w;f=Ca[0];h=Ca[1];if(f!==qa[0]||h!==qa[1])W.blendEquationSeparate(f,h),qa[0]=f,qa[1]=h;f=m[0];h=m[1];u=m[2];w=m[3];if(f!==J[0]||h!==J[1]||u!==J[2]||w!==J[3])W.blendFuncSeparate(f,h,u,w),J[0]=f,J[1]=h,J[2]=u,J[3]=w;f=R.depth_enable;f!==A.depth_enable&&(f?W.enable(2929):W.disable(2929),A.depth_enable=f);f=R.depth_func;f!==A.depth_func&&(W.depthFunc(f),A.depth_func=f);f=la[0];h=la[1];if(f!==ra[0]||h!==ra[1])W.depthRange(f,h),ra[0]=f,ra[1]=h;f=R.depth_mask;f!==A.depth_mask&&
(W.depthMask(f),A.depth_mask=f);f=aa[0];h=aa[1];u=aa[2];w=aa[3];if(f!==P[0]||h!==P[1]||u!==P[2]||w!==P[3])W.colorMask(f,h,u,w),P[0]=f,P[1]=h,P[2]=u,P[3]=w;f=R.cull_enable;f!==A.cull_enable&&(f?W.enable(2884):W.disable(2884),A.cull_enable=f);f=R.cull_face;f!==A.cull_face&&(W.cullFace(f),A.cull_face=f);f=R.frontFace;f!==A.frontFace&&(W.frontFace(f),A.frontFace=f);f=R.lineWidth;f!==A.lineWidth&&(W.lineWidth(f),A.lineWidth=f);f=R.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?W.enable(32823):W.disable(32823),
A.polygonOffset_enable=f);f=Aa[0];h=Aa[1];if(f!==wa[0]||h!==wa[1])W.polygonOffset(f,h),wa[0]=f,wa[1]=h;f=R.sample_alpha;f!==A.sample_alpha&&(f?W.enable(32926):W.disable(32926),A.sample_alpha=f);f=R.sample_enable;f!==A.sample_enable&&(f?W.enable(32928):W.disable(32928),A.sample_enable=f);f=fa[0];h=fa[1];if(f!==Ba[0]||h!==Ba[1])W.sampleCoverage(f,h),Ba[0]=f,Ba[1]=h;f=R.stencil_enable;f!==A.stencil_enable&&(f?W.enable(2960):W.disable(2960),A.stencil_enable=f);f=R.stencil_mask;f!==A.stencil_mask&&(W.stencilMask(f),
A.stencil_mask=f);f=ya[0];h=ya[1];u=ya[2];if(f!==Ja[0]||h!==Ja[1]||u!==Ja[2])W.stencilFunc(f,h,u),Ja[0]=f,Ja[1]=h,Ja[2]=u;f=Ta[0];h=Ta[1];u=Ta[2];w=Ta[3];if(f!==r[0]||h!==r[1]||u!==r[2]||w!==r[3])W.stencilOpSeparate(f,h,u,w),r[0]=f,r[1]=h,r[2]=u,r[3]=w;f=na[0];h=na[1];u=na[2];w=na[3];if(f!==Za[0]||h!==Za[1]||u!==Za[2]||w!==Za[3])W.stencilOpSeparate(f,h,u,w),Za[0]=f,Za[1]=h,Za[2]=u,Za[3]=w;f=R.scissor_enable;f!==A.scissor_enable&&(f?W.enable(3089):W.disable(3089),A.scissor_enable=f);f=ka[0];h=ka[1];
u=ka[2];w=ka[3];if(f!==pa[0]||h!==pa[1]||u!==pa[2]||w!==pa[3])W.scissor(f,h,u,w),pa[0]=f,pa[1]=h,pa[2]=u,pa[3]=w;f=p[0];h=p[1];u=p[2];w=p[3];if(f!==E[0]||h!==E[1]||u!==E[2]||w!==E[3])W.viewport(f,h,u,w),E[0]=f,E[1]=h,E[2]=u,E[3]=w;A.dirty=!1}if(f=A.profile)k=performance.now(),L.count++;W.useProgram(e.program);g.setVAO(null);h=Y.location;u=a[h];u.buffer||W.enableVertexAttribArray(h);if(u.type!==l.dtype||3!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)W.bindBuffer(34962,l.buffer),
W.vertexAttribPointer(h,3,l.dtype,!1,0,0),u.type=l.dtype,u.size=3,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;h=d.location;u=a[h];u.buffer||W.enableVertexAttribArray(h);if(u.type!==q.dtype||2!==u.size||u.buffer!==q||!1!==u.normalized||0!==u.offset||0!==u.stride)W.bindBuffer(34962,q.buffer),W.vertexAttribPointer(h,2,q.dtype,!1,0,0),u.type=q.dtype,u.size=2,u.buffer=q,u.normalized=!1,u.offset=0,u.stride=0;h=c.call(this,Z,b,0);ea(h)&&16===h.length||da.commandRaise(G,K);W.uniformMatrix4fv(C.location,
!1,Array.isArray(h)||h instanceof Float32Array?h:(va[0]=h[0],va[1]=h[1],va[2]=h[2],va[3]=h[3],va[4]=h[4],va[5]=h[5],va[6]=h[6],va[7]=h[7],va[8]=h[8],va[9]=h[9],va[10]=h[10],va[11]=h[11],va[12]=h[12],va[13]=h[13],va[14]=h[14],va[15]=h[15],va));h=H.call(this,Z,b,0);ea(h)&&16===h.length||da.commandRaise(B,K);W.uniformMatrix4fv(t.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ea[0]=h[0],Ea[1]=h[1],Ea[2]=h[2],Ea[3]=h[3],Ea[4]=h[4],Ea[5]=h[5],Ea[6]=h[6],Ea[7]=h[7],Ea[8]=h[8],Ea[9]=h[9],Ea[10]=
h[10],Ea[11]=h[11],Ea[12]=h[12],Ea[13]=h[13],Ea[14]=h[14],Ea[15]=h[15],Ea));(b=b.texture)&&"framebuffer"===b._reglType&&(b=b.color[0]);"function"===typeof b&&"texture2d"===b._reglType||da.commandRaise(U,K);b=b._texture;W.uniform1i(F.location,b.bind());n&&W.bindBuffer(34963,n.buffer.buffer);h=n.primType;u=n.vertCount-0;0<=u||da.commandRaise(v,K);u&&(W.drawElements(h,u,n.type,0<<(n.type-5121>>1)),g.setVAO(null),f&&(L.cpuTime+=performance.now()-k),b.unbind())},scope:function(a,d,c){var b,f,g,h,k,m,r,
p,e,u,t,E,n,x,v,C,F,P,J,fa,H,B,G,M,Za,N,R,S,ra,wa,U,na,W,ka,X;if(b=A.profile)f=performance.now(),L.count++;g=ja.elements;ja.elements=y;h=ja.offset;ja.offset=0;k=y.vertCount-0;0<=k||da.commandRaise(ba,K);m=ja.count;ja.count=k;r=y.primType;k=ja.primitive;ja.primitive=r;p=w.call(this,Z,a,c);r=D[3];D[3]=p;e=a.texture;p=D[5];D[5]=e;u=T.call(this,Z,a,c);e=D[4];D[4]=u;u=z.buffer;z.buffer=l;t=z.divisor;z.divisor=0;E=z.normalized;z.normalized=!1;n=z.offset;z.offset=0;x=z.size;z.size=0;v=z.state;z.state=1;
C=z.stride;z.stride=0;F=z.type;z.type=l.dtype;P=z.w;z.w=0;J=z.x;z.x=0;fa=z.y;z.y=0;H=z.z;z.z=0;B=Q.buffer;Q.buffer=q;G=Q.divisor;Q.divisor=0;M=Q.normalized;Q.normalized=!1;Za=Q.offset;Q.offset=0;N=Q.size;Q.size=0;R=Q.state;Q.state=1;S=Q.stride;Q.stride=0;ra=Q.type;Q.type=q.dtype;wa=Q.w;Q.w=0;U=Q.x;Q.x=0;na=Q.y;Q.y=0;W=Q.z;Q.z=0;ka=O.vert;O.vert=2;X=O.frag;O.frag=1;d(Z,a,c);b&&(L.cpuTime+=performance.now()-f);ja.elements=g;ja.offset=h;ja.count=m;ja.primitive=k;D[3]=r;D[5]=p;D[4]=e;z.buffer=u;z.divisor=
t;z.normalized=E;z.offset=n;z.size=x;z.state=v;z.stride=C;z.type=F;z.w=P;z.x=J;z.y=fa;z.z=H;Q.buffer=B;Q.divisor=G;Q.normalized=M;Q.offset=Za;Q.size=N;Q.state=R;Q.stride=S;Q.type=ra;Q.w=wa;Q.x=U;Q.y=na;Q.z=W;O.vert=ka;O.frag=X},batch:function(c,b){var e,w,n,z;e=ha.next;e!==ha.cur&&(e?W.bindFramebuffer(36160,e.framebuffer):W.bindFramebuffer(36160,null),ha.cur=e);if(A.dirty){var v,y,D;e=R.dither;e!==A.dither&&(e?W.enable(3024):W.disable(3024),A.dither=e);e=R.blend_enable;e!==A.blend_enable&&(e?W.enable(3042):
W.disable(3042),A.blend_enable=e);e=N[0];v=N[1];y=N[2];D=N[3];if(e!==M[0]||v!==M[1]||y!==M[2]||D!==M[3])W.blendColor(e,v,y,D),M[0]=e,M[1]=v,M[2]=y,M[3]=D;e=Ca[0];v=Ca[1];if(e!==qa[0]||v!==qa[1])W.blendEquationSeparate(e,v),qa[0]=e,qa[1]=v;e=m[0];v=m[1];y=m[2];D=m[3];if(e!==J[0]||v!==J[1]||y!==J[2]||D!==J[3])W.blendFuncSeparate(e,v,y,D),J[0]=e,J[1]=v,J[2]=y,J[3]=D;e=R.depth_enable;e!==A.depth_enable&&(e?W.enable(2929):W.disable(2929),A.depth_enable=e);e=R.depth_func;e!==A.depth_func&&(W.depthFunc(e),
A.depth_func=e);e=la[0];v=la[1];if(e!==ra[0]||v!==ra[1])W.depthRange(e,v),ra[0]=e,ra[1]=v;e=R.depth_mask;e!==A.depth_mask&&(W.depthMask(e),A.depth_mask=e);e=aa[0];v=aa[1];y=aa[2];D=aa[3];if(e!==P[0]||v!==P[1]||y!==P[2]||D!==P[3])W.colorMask(e,v,y,D),P[0]=e,P[1]=v,P[2]=y,P[3]=D;e=R.cull_enable;e!==A.cull_enable&&(e?W.enable(2884):W.disable(2884),A.cull_enable=e);e=R.cull_face;e!==A.cull_face&&(W.cullFace(e),A.cull_face=e);e=R.frontFace;e!==A.frontFace&&(W.frontFace(e),A.frontFace=e);e=R.lineWidth;
e!==A.lineWidth&&(W.lineWidth(e),A.lineWidth=e);e=R.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?W.enable(32823):W.disable(32823),A.polygonOffset_enable=e);e=Aa[0];v=Aa[1];if(e!==wa[0]||v!==wa[1])W.polygonOffset(e,v),wa[0]=e,wa[1]=v;e=R.sample_alpha;e!==A.sample_alpha&&(e?W.enable(32926):W.disable(32926),A.sample_alpha=e);e=R.sample_enable;e!==A.sample_enable&&(e?W.enable(32928):W.disable(32928),A.sample_enable=e);e=fa[0];v=fa[1];if(e!==Ba[0]||v!==Ba[1])W.sampleCoverage(e,v),Ba[0]=e,Ba[1]=
v;e=R.stencil_enable;e!==A.stencil_enable&&(e?W.enable(2960):W.disable(2960),A.stencil_enable=e);e=R.stencil_mask;e!==A.stencil_mask&&(W.stencilMask(e),A.stencil_mask=e);e=ya[0];v=ya[1];y=ya[2];if(e!==Ja[0]||v!==Ja[1]||y!==Ja[2])W.stencilFunc(e,v,y),Ja[0]=e,Ja[1]=v,Ja[2]=y;e=Ta[0];v=Ta[1];y=Ta[2];D=Ta[3];if(e!==r[0]||v!==r[1]||y!==r[2]||D!==r[3])W.stencilOpSeparate(e,v,y,D),r[0]=e,r[1]=v,r[2]=y,r[3]=D;e=na[0];v=na[1];y=na[2];D=na[3];if(e!==Za[0]||v!==Za[1]||y!==Za[2]||D!==Za[3])W.stencilOpSeparate(e,
v,y,D),Za[0]=e,Za[1]=v,Za[2]=y,Za[3]=D;e=R.scissor_enable;e!==A.scissor_enable&&(e?W.enable(3089):W.disable(3089),A.scissor_enable=e);e=ka[0];v=ka[1];y=ka[2];D=ka[3];if(e!==pa[0]||v!==pa[1]||y!==pa[2]||D!==pa[3])W.scissor(e,v,y,D),pa[0]=e,pa[1]=v,pa[2]=y,pa[3]=D;e=p[0];v=p[1];y=p[2];D=p[3];if(e!==E[0]||v!==E[1]||y!==E[2]||D!==E[3])W.viewport(e,v,y,D),E[0]=e,E[1]=v,E[2]=y,E[3]=D;A.dirty=!1}if(e=A.profile)w=performance.now(),L.count+=b;W.useProgram(ia.program);g.setVAO(null);v=Y.location;y=a[v];y.buffer||
W.enableVertexAttribArray(v);if(y.type!==l.dtype||3!==y.size||y.buffer!==l||!1!==y.normalized||0!==y.offset||0!==y.stride)W.bindBuffer(34962,l.buffer),W.vertexAttribPointer(v,3,l.dtype,!1,0,0),y.type=l.dtype,y.size=3,y.buffer=l,y.normalized=!1,y.offset=0,y.stride=0;v=d.location;y=a[v];y.buffer||W.enableVertexAttribArray(v);if(y.type!==q.dtype||2!==y.size||y.buffer!==q||!1!==y.normalized||0!==y.offset||0!==y.stride)W.bindBuffer(34962,q.buffer),W.vertexAttribPointer(v,2,q.dtype,!1,0,0),y.type=q.dtype,
y.size=2,y.buffer=q,y.normalized=!1,y.offset=0,y.stride=0;v=k.call(this,Z,z,n);ea(v)&&16===v.length||da.commandRaise(u,K);W.uniformMatrix4fv(C.location,!1,Array.isArray(v)||v instanceof Float32Array?v:($a[0]=v[0],$a[1]=v[1],$a[2]=v[2],$a[3]=v[3],$a[4]=v[4],$a[5]=v[5],$a[6]=v[6],$a[7]=v[7],$a[8]=v[8],$a[9]=v[9],$a[10]=v[10],$a[11]=v[11],$a[12]=v[12],$a[13]=v[13],$a[14]=v[14],$a[15]=v[15],$a));n=S.call(this,Z,z,n);ea(n)&&16===n.length||da.commandRaise(h,K);W.uniformMatrix4fv(t.location,!1,Array.isArray(n)||
n instanceof Float32Array?n:(Hb[0]=n[0],Hb[1]=n[1],Hb[2]=n[2],Hb[3]=n[3],Hb[4]=n[4],Hb[5]=n[5],Hb[6]=n[6],Hb[7]=n[7],Hb[8]=n[8],Hb[9]=n[9],Hb[10]=n[10],Hb[11]=n[11],Hb[12]=n[12],Hb[13]=n[13],Hb[14]=n[14],Hb[15]=n[15],Hb));f&&W.bindBuffer(34963,f.buffer.buffer);v=f.primType;y=f.vertCount-0;0<=y||da.commandRaise(x,K);for(n=0;n<b;++n)z=c[n],(z=z.texture)&&"framebuffer"===z._reglType&&(z=z.color[0]),"function"===typeof z&&"texture2d"===z._reglType||da.commandRaise(X,K),z=z._texture,W.uniform1i(F.location,
z.bind()),y&&(W.drawElements(v,y,f.type,0<<(f.type-5121>>1)),z.unbind());g.setVAO(null);e&&(L.cpuTime+=performance.now()-w)}}},"$19,normal,position,projection,view":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,ia,k,u,S){var h,X,f,x,Y,C,F,d,t,a,Z,A,ja,ha,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya,Ja,na;h=b.attributes;X=b.context;f=b.current;x=b.draw;Y=b.framebuffer;C=b.gl;F=b.isArrayLike;d=b.next;t=b.shader;a=b.uniforms;Z=b.vao;A=d.blend_color;ja=f.blend_color;ha=d.blend_equation;
W=f.blend_equation;ea=d.blend_func;R=f.blend_func;O=d.colorMask;D=f.colorMask;g=d.depth_range;N=f.depth_range;M=d.polygonOffset_offset;Ca=f.polygonOffset_offset;qa=d.sample_coverage;m=f.sample_coverage;J=d.scissor_box;aa=f.scissor_box;P=d.stencil_func;la=f.stencil_func;ra=d.stencil_opBack;Aa=f.stencil_opBack;wa=d.stencil_opFront;fa=f.stencil_opFront;Ba=d.viewport;ka=f.viewport;pa=new Float32Array(16);ya=new Float32Array(16);Ja=new Float32Array(16);na=new Float32Array(16);return{draw:function(b){var t,
r,p;b=Y.next;b!==Y.cur&&(b?C.bindFramebuffer(36160,b.framebuffer):C.bindFramebuffer(36160,null),Y.cur=b);if(f.dirty){var E;b=d.dither;b!==f.dither&&(b?C.enable(3024):C.disable(3024),f.dither=b);b=d.blend_enable;b!==f.blend_enable&&(b?C.enable(3042):C.disable(3042),f.blend_enable=b);b=A[0];r=A[1];p=A[2];E=A[3];if(b!==ja[0]||r!==ja[1]||p!==ja[2]||E!==ja[3])C.blendColor(b,r,p,E),ja[0]=b,ja[1]=r,ja[2]=p,ja[3]=E;b=ha[0];r=ha[1];if(b!==W[0]||r!==W[1])C.blendEquationSeparate(b,r),W[0]=b,W[1]=r;b=ea[0];r=
ea[1];p=ea[2];E=ea[3];if(b!==R[0]||r!==R[1]||p!==R[2]||E!==R[3])C.blendFuncSeparate(b,r,p,E),R[0]=b,R[1]=r,R[2]=p,R[3]=E;b=d.depth_enable;b!==f.depth_enable&&(b?C.enable(2929):C.disable(2929),f.depth_enable=b);b=d.depth_func;b!==f.depth_func&&(C.depthFunc(b),f.depth_func=b);b=g[0];r=g[1];if(b!==N[0]||r!==N[1])C.depthRange(b,r),N[0]=b,N[1]=r;b=d.depth_mask;b!==f.depth_mask&&(C.depthMask(b),f.depth_mask=b);b=O[0];r=O[1];p=O[2];E=O[3];if(b!==D[0]||r!==D[1]||p!==D[2]||E!==D[3])C.colorMask(b,r,p,E),D[0]=
b,D[1]=r,D[2]=p,D[3]=E;b=d.cull_enable;b!==f.cull_enable&&(b?C.enable(2884):C.disable(2884),f.cull_enable=b);b=d.cull_face;b!==f.cull_face&&(C.cullFace(b),f.cull_face=b);b=d.frontFace;b!==f.frontFace&&(C.frontFace(b),f.frontFace=b);b=d.lineWidth;b!==f.lineWidth&&(C.lineWidth(b),f.lineWidth=b);b=d.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?C.enable(32823):C.disable(32823),f.polygonOffset_enable=b);b=M[0];r=M[1];if(b!==Ca[0]||r!==Ca[1])C.polygonOffset(b,r),Ca[0]=b,Ca[1]=r;b=d.sample_alpha;
b!==f.sample_alpha&&(b?C.enable(32926):C.disable(32926),f.sample_alpha=b);b=d.sample_enable;b!==f.sample_enable&&(b?C.enable(32928):C.disable(32928),f.sample_enable=b);b=qa[0];r=qa[1];if(b!==m[0]||r!==m[1])C.sampleCoverage(b,r),m[0]=b,m[1]=r;b=d.stencil_enable;b!==f.stencil_enable&&(b?C.enable(2960):C.disable(2960),f.stencil_enable=b);b=d.stencil_mask;b!==f.stencil_mask&&(C.stencilMask(b),f.stencil_mask=b);b=P[0];r=P[1];p=P[2];if(b!==la[0]||r!==la[1]||p!==la[2])C.stencilFunc(b,r,p),la[0]=b,la[1]=
r,la[2]=p;b=wa[0];r=wa[1];p=wa[2];E=wa[3];if(b!==fa[0]||r!==fa[1]||p!==fa[2]||E!==fa[3])C.stencilOpSeparate(b,r,p,E),fa[0]=b,fa[1]=r,fa[2]=p,fa[3]=E;b=ra[0];r=ra[1];p=ra[2];E=ra[3];if(b!==Aa[0]||r!==Aa[1]||p!==Aa[2]||E!==Aa[3])C.stencilOpSeparate(b,r,p,E),Aa[0]=b,Aa[1]=r,Aa[2]=p,Aa[3]=E;b=d.scissor_enable;b!==f.scissor_enable&&(b?C.enable(3089):C.disable(3089),f.scissor_enable=b);b=J[0];r=J[1];p=J[2];E=J[3];if(b!==aa[0]||r!==aa[1]||p!==aa[2]||E!==aa[3])C.scissor(b,r,p,E),aa[0]=b,aa[1]=r,aa[2]=p,aa[3]=
E;b=Ba[0];r=Ba[1];p=Ba[2];E=Ba[3];if(b!==ka[0]||r!==ka[1]||p!==ka[2]||E!==ka[3])C.viewport(b,r,p,E),ka[0]=b,ka[1]=r,ka[2]=p,ka[3]=E;f.dirty=!1}if(b=f.profile)t=performance.now(),L.count++;C.useProgram(e.program);Z.setVAO(null);r=k.location;p=h[r];p.buffer||C.enableVertexAttribArray(r);if(p.type!==l.dtype||3!==p.size||p.buffer!==l||!1!==p.normalized||0!==p.offset||0!==p.stride)C.bindBuffer(34962,l.buffer),C.vertexAttribPointer(r,3,l.dtype,!1,0,0),p.type=l.dtype,p.size=3,p.buffer=l,p.normalized=!1,
p.offset=0,p.stride=0;r=ia.location;p=h[r];p.buffer||C.enableVertexAttribArray(r);if(p.type!==q.dtype||3!==p.size||p.buffer!==q||!1!==p.normalized||0!==p.offset||0!==p.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(r,3,q.dtype,!1,0,0),p.type=q.dtype,p.size=3,p.buffer=q,p.normalized=!1,p.offset=0,p.stride=0;r=a[5];F(r)&&16===r.length||da.commandRaise(c,K);C.uniformMatrix4fv(u.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(pa[0]=r[0],pa[1]=r[1],pa[2]=r[2],pa[3]=r[3],pa[4]=r[4],
pa[5]=r[5],pa[6]=r[6],pa[7]=r[7],pa[8]=r[8],pa[9]=r[9],pa[10]=r[10],pa[11]=r[11],pa[12]=r[12],pa[13]=r[13],pa[14]=r[14],pa[15]=r[15],pa));r=a[8];F(r)&&16===r.length||da.commandRaise(G,K);C.uniformMatrix4fv(S.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(ya[0]=r[0],ya[1]=r[1],ya[2]=r[2],ya[3]=r[3],ya[4]=r[4],ya[5]=r[5],ya[6]=r[6],ya[7]=r[7],ya[8]=r[8],ya[9]=r[9],ya[10]=r[10],ya[11]=r[11],ya[12]=r[12],ya[13]=r[13],ya[14]=r[14],ya[15]=r[15],ya));H&&C.bindBuffer(34963,H.buffer.buffer);r=
H.primType;p=H.vertCount-0;0<=p||da.commandRaise(B,K);p&&(C.drawElements(r,p,H.type,0<<(H.type-5121>>1)),Z.setVAO(null),b&&(L.cpuTime+=performance.now()-t))},scope:function(a,d,c){var b,g,h,k,e,m,u,w,z,A,C,D,F,P,J,fa,H,B,G,M,N,O,Q,R,S,ra,wa,T,na,W,ka,aa;if(b=f.profile)g=performance.now(),L.count++;h=x.elements;x.elements=U;k=x.offset;x.offset=0;e=U.vertCount-0;0<=e||da.commandRaise(n,K);m=x.count;x.count=e;u=U.primType;e=x.primitive;x.primitive=u;u=v.buffer;v.buffer=q;w=v.divisor;v.divisor=0;z=v.normalized;
v.normalized=!1;A=v.offset;v.offset=0;C=v.size;v.size=0;D=v.state;v.state=1;F=v.stride;v.stride=0;P=v.type;v.type=q.dtype;J=v.w;v.w=0;fa=v.x;v.x=0;H=v.y;v.y=0;B=v.z;v.z=0;G=y.buffer;y.buffer=l;M=y.divisor;y.divisor=0;N=y.normalized;y.normalized=!1;O=y.offset;y.offset=0;Q=y.size;y.size=0;R=y.state;y.state=1;S=y.stride;y.stride=0;ra=y.type;y.type=l.dtype;wa=y.w;y.w=0;T=y.x;y.x=0;na=y.y;y.y=0;W=y.z;y.z=0;ka=t.vert;t.vert=10;aa=t.frag;t.frag=9;d(X,a,c);b&&(L.cpuTime+=performance.now()-g);x.elements=h;
x.offset=k;x.count=m;x.primitive=e;v.buffer=u;v.divisor=w;v.normalized=z;v.offset=A;v.size=C;v.state=D;v.stride=F;v.type=P;v.w=J;v.x=fa;v.y=H;v.z=B;y.buffer=G;y.divisor=M;y.normalized=N;y.offset=O;y.size=Q;y.state=R;y.stride=S;y.type=ra;y.w=wa;y.x=T;y.y=na;y.z=W;t.vert=ka;t.frag=aa},batch:function(c,b){var e,p,t;e=Y.next;e!==Y.cur&&(e?C.bindFramebuffer(36160,e.framebuffer):C.bindFramebuffer(36160,null),Y.cur=e);if(f.dirty){var n,v;e=d.dither;e!==f.dither&&(e?C.enable(3024):C.disable(3024),f.dither=
e);e=d.blend_enable;e!==f.blend_enable&&(e?C.enable(3042):C.disable(3042),f.blend_enable=e);e=A[0];t=A[1];n=A[2];v=A[3];if(e!==ja[0]||t!==ja[1]||n!==ja[2]||v!==ja[3])C.blendColor(e,t,n,v),ja[0]=e,ja[1]=t,ja[2]=n,ja[3]=v;e=ha[0];t=ha[1];if(e!==W[0]||t!==W[1])C.blendEquationSeparate(e,t),W[0]=e,W[1]=t;e=ea[0];t=ea[1];n=ea[2];v=ea[3];if(e!==R[0]||t!==R[1]||n!==R[2]||v!==R[3])C.blendFuncSeparate(e,t,n,v),R[0]=e,R[1]=t,R[2]=n,R[3]=v;e=d.depth_enable;e!==f.depth_enable&&(e?C.enable(2929):C.disable(2929),
f.depth_enable=e);e=d.depth_func;e!==f.depth_func&&(C.depthFunc(e),f.depth_func=e);e=g[0];t=g[1];if(e!==N[0]||t!==N[1])C.depthRange(e,t),N[0]=e,N[1]=t;e=d.depth_mask;e!==f.depth_mask&&(C.depthMask(e),f.depth_mask=e);e=O[0];t=O[1];n=O[2];v=O[3];if(e!==D[0]||t!==D[1]||n!==D[2]||v!==D[3])C.colorMask(e,t,n,v),D[0]=e,D[1]=t,D[2]=n,D[3]=v;e=d.cull_enable;e!==f.cull_enable&&(e?C.enable(2884):C.disable(2884),f.cull_enable=e);e=d.cull_face;e!==f.cull_face&&(C.cullFace(e),f.cull_face=e);e=d.frontFace;e!==f.frontFace&&
(C.frontFace(e),f.frontFace=e);e=d.lineWidth;e!==f.lineWidth&&(C.lineWidth(e),f.lineWidth=e);e=d.polygonOffset_enable;e!==f.polygonOffset_enable&&(e?C.enable(32823):C.disable(32823),f.polygonOffset_enable=e);e=M[0];t=M[1];if(e!==Ca[0]||t!==Ca[1])C.polygonOffset(e,t),Ca[0]=e,Ca[1]=t;e=d.sample_alpha;e!==f.sample_alpha&&(e?C.enable(32926):C.disable(32926),f.sample_alpha=e);e=d.sample_enable;e!==f.sample_enable&&(e?C.enable(32928):C.disable(32928),f.sample_enable=e);e=qa[0];t=qa[1];if(e!==m[0]||t!==
m[1])C.sampleCoverage(e,t),m[0]=e,m[1]=t;e=d.stencil_enable;e!==f.stencil_enable&&(e?C.enable(2960):C.disable(2960),f.stencil_enable=e);e=d.stencil_mask;e!==f.stencil_mask&&(C.stencilMask(e),f.stencil_mask=e);e=P[0];t=P[1];n=P[2];if(e!==la[0]||t!==la[1]||n!==la[2])C.stencilFunc(e,t,n),la[0]=e,la[1]=t,la[2]=n;e=wa[0];t=wa[1];n=wa[2];v=wa[3];if(e!==fa[0]||t!==fa[1]||n!==fa[2]||v!==fa[3])C.stencilOpSeparate(e,t,n,v),fa[0]=e,fa[1]=t,fa[2]=n,fa[3]=v;e=ra[0];t=ra[1];n=ra[2];v=ra[3];if(e!==Aa[0]||t!==Aa[1]||
n!==Aa[2]||v!==Aa[3])C.stencilOpSeparate(e,t,n,v),Aa[0]=e,Aa[1]=t,Aa[2]=n,Aa[3]=v;e=d.scissor_enable;e!==f.scissor_enable&&(e?C.enable(3089):C.disable(3089),f.scissor_enable=e);e=J[0];t=J[1];n=J[2];v=J[3];if(e!==aa[0]||t!==aa[1]||n!==aa[2]||v!==aa[3])C.scissor(e,t,n,v),aa[0]=e,aa[1]=t,aa[2]=n,aa[3]=v;e=Ba[0];t=Ba[1];n=Ba[2];v=Ba[3];if(e!==ka[0]||t!==ka[1]||n!==ka[2]||v!==ka[3])C.viewport(e,t,n,v),ka[0]=e,ka[1]=t,ka[2]=n,ka[3]=v;f.dirty=!1}if(e=f.profile)p=performance.now(),L.count+=b;C.useProgram(ba.program);
Z.setVAO(null);t=k.location;n=h[t];n.buffer||C.enableVertexAttribArray(t);if(n.type!==l.dtype||3!==n.size||n.buffer!==l||!1!==n.normalized||0!==n.offset||0!==n.stride)C.bindBuffer(34962,l.buffer),C.vertexAttribPointer(t,3,l.dtype,!1,0,0),n.type=l.dtype,n.size=3,n.buffer=l,n.normalized=!1,n.offset=0,n.stride=0;t=ia.location;n=h[t];n.buffer||C.enableVertexAttribArray(t);if(n.type!==q.dtype||3!==n.size||n.buffer!==q||!1!==n.normalized||0!==n.offset||0!==n.stride)C.bindBuffer(34962,q.buffer),C.vertexAttribPointer(t,
3,q.dtype,!1,0,0),n.type=q.dtype,n.size=3,n.buffer=q,n.normalized=!1,n.offset=0,n.stride=0;t=a[5];F(t)&&16===t.length||da.commandRaise(w,K);C.uniformMatrix4fv(u.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Ja[0]=t[0],Ja[1]=t[1],Ja[2]=t[2],Ja[3]=t[3],Ja[4]=t[4],Ja[5]=t[5],Ja[6]=t[6],Ja[7]=t[7],Ja[8]=t[8],Ja[9]=t[9],Ja[10]=t[10],Ja[11]=t[11],Ja[12]=t[12],Ja[13]=t[13],Ja[14]=t[14],Ja[15]=t[15],Ja));t=a[8];F(t)&&16===t.length||da.commandRaise(T,K);C.uniformMatrix4fv(S.location,!1,Array.isArray(t)||
t instanceof Float32Array?t:(na[0]=t[0],na[1]=t[1],na[2]=t[2],na[3]=t[3],na[4]=t[4],na[5]=t[5],na[6]=t[6],na[7]=t[7],na[8]=t[8],na[9]=t[9],na[10]=t[10],na[11]=t[11],na[12]=t[12],na[13]=t[13],na[14]=t[14],na[15]=t[15],na));z&&C.bindBuffer(34963,z.buffer.buffer);n=z.primType;v=z.vertCount-0;0<=v||da.commandRaise(Q,K);for(t=0;t<b;++t)v&&C.drawElements(n,v,z.type,0<<(z.type-5121>>1));Z.setVAO(null);e&&(L.cpuTime+=performance.now()-p)}}},"$14,angle,color,position":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,
y,ba,w,T){var z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,Z,A,ja,ha,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa,P,la,ra;z=b.attributes;Q=b.context;ia=b.current;k=b.draw;u=b.elements;S=b.framebuffer;h=b.gl;X=b.isArrayLike;f=b.next;x=b.shader;Y=b.uniforms;C=b.vao;F=f.blend_color;d=ia.blend_color;t=f.blend_equation;a=ia.blend_equation;Z=f.blend_func;A=ia.blend_func;ja=f.colorMask;ha=ia.colorMask;W=f.depth_range;ea=ia.depth_range;R=f.polygonOffset_offset;O=ia.polygonOffset_offset;D=f.sample_coverage;g=ia.sample_coverage;N=f.scissor_box;
M=ia.scissor_box;Ca=f.stencil_func;qa=ia.stencil_func;m=f.stencil_opBack;J=ia.stencil_opBack;aa=f.stencil_opFront;P=ia.stencil_opFront;la=f.viewport;ra=ia.viewport;return{draw:function(b){var n,v,x,y;n=S.next;n!==S.cur&&(n?h.bindFramebuffer(36160,n.framebuffer):h.bindFramebuffer(36160,null),S.cur=n);if(ia.dirty){var H;n=f.dither;n!==ia.dither&&(n?h.enable(3024):h.disable(3024),ia.dither=n);n=f.blend_enable;n!==ia.blend_enable&&(n?h.enable(3042):h.disable(3042),ia.blend_enable=n);n=F[0];x=F[1];y=F[2];
H=F[3];if(n!==d[0]||x!==d[1]||y!==d[2]||H!==d[3])h.blendColor(n,x,y,H),d[0]=n,d[1]=x,d[2]=y,d[3]=H;n=t[0];x=t[1];if(n!==a[0]||x!==a[1])h.blendEquationSeparate(n,x),a[0]=n,a[1]=x;n=Z[0];x=Z[1];y=Z[2];H=Z[3];if(n!==A[0]||x!==A[1]||y!==A[2]||H!==A[3])h.blendFuncSeparate(n,x,y,H),A[0]=n,A[1]=x,A[2]=y,A[3]=H;n=f.depth_func;n!==ia.depth_func&&(h.depthFunc(n),ia.depth_func=n);n=W[0];x=W[1];if(n!==ea[0]||x!==ea[1])h.depthRange(n,x),ea[0]=n,ea[1]=x;n=f.depth_mask;n!==ia.depth_mask&&(h.depthMask(n),ia.depth_mask=
n);n=ja[0];x=ja[1];y=ja[2];H=ja[3];if(n!==ha[0]||x!==ha[1]||y!==ha[2]||H!==ha[3])h.colorMask(n,x,y,H),ha[0]=n,ha[1]=x,ha[2]=y,ha[3]=H;n=f.cull_enable;n!==ia.cull_enable&&(n?h.enable(2884):h.disable(2884),ia.cull_enable=n);n=f.cull_face;n!==ia.cull_face&&(h.cullFace(n),ia.cull_face=n);n=f.frontFace;n!==ia.frontFace&&(h.frontFace(n),ia.frontFace=n);n=f.lineWidth;n!==ia.lineWidth&&(h.lineWidth(n),ia.lineWidth=n);n=f.polygonOffset_enable;n!==ia.polygonOffset_enable&&(n?h.enable(32823):h.disable(32823),
ia.polygonOffset_enable=n);n=R[0];x=R[1];if(n!==O[0]||x!==O[1])h.polygonOffset(n,x),O[0]=n,O[1]=x;n=f.sample_alpha;n!==ia.sample_alpha&&(n?h.enable(32926):h.disable(32926),ia.sample_alpha=n);n=f.sample_enable;n!==ia.sample_enable&&(n?h.enable(32928):h.disable(32928),ia.sample_enable=n);n=D[0];x=D[1];if(n!==g[0]||x!==g[1])h.sampleCoverage(n,x),g[0]=n,g[1]=x;n=f.stencil_enable;n!==ia.stencil_enable&&(n?h.enable(2960):h.disable(2960),ia.stencil_enable=n);n=f.stencil_mask;n!==ia.stencil_mask&&(h.stencilMask(n),
ia.stencil_mask=n);n=Ca[0];x=Ca[1];y=Ca[2];if(n!==qa[0]||x!==qa[1]||y!==qa[2])h.stencilFunc(n,x,y),qa[0]=n,qa[1]=x,qa[2]=y;n=aa[0];x=aa[1];y=aa[2];H=aa[3];if(n!==P[0]||x!==P[1]||y!==P[2]||H!==P[3])h.stencilOpSeparate(n,x,y,H),P[0]=n,P[1]=x,P[2]=y,P[3]=H;n=m[0];x=m[1];y=m[2];H=m[3];if(n!==J[0]||x!==J[1]||y!==J[2]||H!==J[3])h.stencilOpSeparate(n,x,y,H),J[0]=n,J[1]=x,J[2]=y,J[3]=H;n=f.scissor_enable;n!==ia.scissor_enable&&(n?h.enable(3089):h.disable(3089),ia.scissor_enable=n);n=N[0];x=N[1];y=N[2];H=
N[3];if(n!==M[0]||x!==M[1]||y!==M[2]||H!==M[3])h.scissor(n,x,y,H),M[0]=n,M[1]=x,M[2]=y,M[3]=H;n=la[0];x=la[1];y=la[2];H=la[3];if(n!==ra[0]||x!==ra[1]||y!==ra[2]||H!==ra[3])h.viewport(n,x,y,H),ra[0]=n,ra[1]=x,ra[2]=y,ra[3]=H}h.disable(2929);ia.depth_enable=!1;if(n=ia.profile)v=performance.now(),L.count++;h.useProgram(e.program);C.setVAO(null);x=T.location;y=z[x];y.buffer||h.enableVertexAttribArray(x);if(y.type!==l.dtype||2!==y.size||y.buffer!==l||!1!==y.normalized||0!==y.offset||0!==y.stride)h.bindBuffer(34962,
l.buffer),h.vertexAttribPointer(x,2,l.dtype,!1,0,0),y.type=l.dtype,y.size=2,y.buffer=l,y.normalized=!1,y.offset=0,y.stride=0;x=q.call(this,Q,b,0);"number"!==typeof x&&da.commandRaise(c,K);h.uniform1f(ba.location,x);b=b.color;X(b)&&4===b.length||da.commandRaise(G,K);h.uniform4f(w.location,b[0],b[1],b[2],b[3]);(b=k.elements)?h.bindBuffer(34963,b.buffer.buffer):C.currentVAO&&(b=u.getElements(C.currentVAO.elements))&&h.bindBuffer(34963,b.buffer.buffer);x=k.primitive;y=k.offset;b?h.drawElements(x,3,b.type,
y<<(b.type-5121>>1)):h.drawArrays(x,y,3);ia.dirty=!0;C.setVAO(null);n&&(L.cpuTime+=performance.now()-v)},scope:function(a,c,d){var b,g,h,e,m,q,n,t,r,p,u,v,w,y,z,A,C,D,F,P;b=f.depth_enable;f.depth_enable=!1;if(g=ia.profile)h=performance.now(),L.count++;e=k.count;k.count=3;m=H.call(this,Q,a,d);q=Y[3];Y[3]=m;n=a.color;m=Y[4];Y[4]=n;n=B.buffer;B.buffer=l;t=B.divisor;B.divisor=0;r=B.normalized;B.normalized=!1;p=B.offset;B.offset=0;u=B.size;B.size=0;v=B.state;B.state=1;w=B.stride;B.stride=0;y=B.type;B.type=
l.dtype;z=B.w;B.w=0;A=B.x;B.x=0;C=B.y;B.y=0;D=B.z;B.z=0;F=x.vert;x.vert=2;P=x.frag;x.frag=1;ia.dirty=!0;c(Q,a,d);f.depth_enable=b;g&&(L.cpuTime+=performance.now()-h);k.count=e;Y[3]=q;Y[4]=m;B.buffer=n;B.divisor=t;B.normalized=r;B.offset=p;B.size=u;B.state=v;B.stride=w;B.type=y;B.w=z;B.x=A;B.y=C;B.z=D;x.vert=F;x.frag=P;ia.dirty=!0},batch:function(c,b){var e,q,x,H;e=S.next;e!==S.cur&&(e?h.bindFramebuffer(36160,e.framebuffer):h.bindFramebuffer(36160,null),S.cur=e);if(ia.dirty){var B,G,na;e=f.dither;
e!==ia.dither&&(e?h.enable(3024):h.disable(3024),ia.dither=e);e=f.blend_enable;e!==ia.blend_enable&&(e?h.enable(3042):h.disable(3042),ia.blend_enable=e);e=F[0];B=F[1];G=F[2];na=F[3];if(e!==d[0]||B!==d[1]||G!==d[2]||na!==d[3])h.blendColor(e,B,G,na),d[0]=e,d[1]=B,d[2]=G,d[3]=na;e=t[0];B=t[1];if(e!==a[0]||B!==a[1])h.blendEquationSeparate(e,B),a[0]=e,a[1]=B;e=Z[0];B=Z[1];G=Z[2];na=Z[3];if(e!==A[0]||B!==A[1]||G!==A[2]||na!==A[3])h.blendFuncSeparate(e,B,G,na),A[0]=e,A[1]=B,A[2]=G,A[3]=na;e=f.depth_func;
e!==ia.depth_func&&(h.depthFunc(e),ia.depth_func=e);e=W[0];B=W[1];if(e!==ea[0]||B!==ea[1])h.depthRange(e,B),ea[0]=e,ea[1]=B;e=f.depth_mask;e!==ia.depth_mask&&(h.depthMask(e),ia.depth_mask=e);e=ja[0];B=ja[1];G=ja[2];na=ja[3];if(e!==ha[0]||B!==ha[1]||G!==ha[2]||na!==ha[3])h.colorMask(e,B,G,na),ha[0]=e,ha[1]=B,ha[2]=G,ha[3]=na;e=f.cull_enable;e!==ia.cull_enable&&(e?h.enable(2884):h.disable(2884),ia.cull_enable=e);e=f.cull_face;e!==ia.cull_face&&(h.cullFace(e),ia.cull_face=e);e=f.frontFace;e!==ia.frontFace&&
(h.frontFace(e),ia.frontFace=e);e=f.lineWidth;e!==ia.lineWidth&&(h.lineWidth(e),ia.lineWidth=e);e=f.polygonOffset_enable;e!==ia.polygonOffset_enable&&(e?h.enable(32823):h.disable(32823),ia.polygonOffset_enable=e);e=R[0];B=R[1];if(e!==O[0]||B!==O[1])h.polygonOffset(e,B),O[0]=e,O[1]=B;e=f.sample_alpha;e!==ia.sample_alpha&&(e?h.enable(32926):h.disable(32926),ia.sample_alpha=e);e=f.sample_enable;e!==ia.sample_enable&&(e?h.enable(32928):h.disable(32928),ia.sample_enable=e);e=D[0];B=D[1];if(e!==g[0]||B!==
g[1])h.sampleCoverage(e,B),g[0]=e,g[1]=B;e=f.stencil_enable;e!==ia.stencil_enable&&(e?h.enable(2960):h.disable(2960),ia.stencil_enable=e);e=f.stencil_mask;e!==ia.stencil_mask&&(h.stencilMask(e),ia.stencil_mask=e);e=Ca[0];B=Ca[1];G=Ca[2];if(e!==qa[0]||B!==qa[1]||G!==qa[2])h.stencilFunc(e,B,G),qa[0]=e,qa[1]=B,qa[2]=G;e=aa[0];B=aa[1];G=aa[2];na=aa[3];if(e!==P[0]||B!==P[1]||G!==P[2]||na!==P[3])h.stencilOpSeparate(e,B,G,na),P[0]=e,P[1]=B,P[2]=G,P[3]=na;e=m[0];B=m[1];G=m[2];na=m[3];if(e!==J[0]||B!==J[1]||
G!==J[2]||na!==J[3])h.stencilOpSeparate(e,B,G,na),J[0]=e,J[1]=B,J[2]=G,J[3]=na;e=f.scissor_enable;e!==ia.scissor_enable&&(e?h.enable(3089):h.disable(3089),ia.scissor_enable=e);e=N[0];B=N[1];G=N[2];na=N[3];if(e!==M[0]||B!==M[1]||G!==M[2]||na!==M[3])h.scissor(e,B,G,na),M[0]=e,M[1]=B,M[2]=G,M[3]=na;e=la[0];B=la[1];G=la[2];na=la[3];if(e!==ra[0]||B!==ra[1]||G!==ra[2]||na!==ra[3])h.viewport(e,B,G,na),ra[0]=e,ra[1]=B,ra[2]=G,ra[3]=na}h.disable(2929);ia.depth_enable=!1;if(e=ia.profile)q=performance.now(),
L.count+=b;h.useProgram(U.program);C.setVAO(null);B=T.location;G=z[B];G.buffer||h.enableVertexAttribArray(B);if(G.type!==l.dtype||2!==G.size||G.buffer!==l||!1!==G.normalized||0!==G.offset||0!==G.stride)h.bindBuffer(34962,l.buffer),h.vertexAttribPointer(B,2,l.dtype,!1,0,0),G.type=l.dtype,G.size=2,G.buffer=l,G.normalized=!1,G.offset=0,G.stride=0;x=n.call(this,Q,H,x);"number"!==typeof x&&da.commandRaise(v,K);h.uniform1f(ba.location,x);(B=k.elements)?h.bindBuffer(34963,B.buffer.buffer):C.currentVAO&&
(B=u.getElements(C.currentVAO.elements))&&h.bindBuffer(34963,B.buffer.buffer);G=k.primitive;na=k.offset;for(x=0;x<b;++x){H=c[x];var Y,Ta,r,p,E,va,Ea;Y=H.color;X(Y)&&4===Y.length||da.commandRaise(y,K);H=Y[0];r=Y[1];E=Y[2];Y=Y[3];x&&Ta===H&&p===r&&va===E&&Ea===Y||(Ta=H,p=r,va=E,Ea=Y,h.uniform4f(w.location,H,r,E,Y));B?h.drawElements(G,3,B.type,na<<(B.type-5121>>1)):h.drawArrays(G,na,3)}ia.dirty=!0;C.setVAO(null);e&&(L.cpuTime+=performance.now()-q)}}},"$13,color,position":function(b,da,K,L,e,l,q,c,G,
H,B,U,n,v,y,ba){var w,T,z,Q,ia,k,u,S,h,X,f,x,Y,C,F,d,t,a,Z,A,ja,ha,W,ea,R,O,D,g,N,M,Ca,qa,m,J,aa;w=b.attributes;T=b.context;z=b.current;Q=b.draw;ia=b.framebuffer;k=b.gl;u=b.next;S=b.shader;h=b.uniforms;X=b.vao;f=u.blend_color;x=z.blend_color;Y=u.blend_equation;C=z.blend_equation;F=u.blend_func;d=z.blend_func;t=u.colorMask;a=z.colorMask;Z=u.depth_range;A=z.depth_range;ja=u.polygonOffset_offset;ha=z.polygonOffset_offset;W=u.sample_coverage;ea=z.sample_coverage;R=u.scissor_box;O=z.scissor_box;D=u.stencil_func;
g=z.stencil_func;N=u.stencil_opBack;M=z.stencil_opBack;Ca=u.stencil_opFront;qa=z.stencil_opFront;m=u.viewport;J=z.viewport;aa=[1,0,0,1];return{draw:function(b){var h,n,v;b=ia.next;b!==ia.cur&&(b?k.bindFramebuffer(36160,b.framebuffer):k.bindFramebuffer(36160,null),ia.cur=b);if(z.dirty){var B;b=u.dither;b!==z.dither&&(b?k.enable(3024):k.disable(3024),z.dither=b);b=u.blend_enable;b!==z.blend_enable&&(b?k.enable(3042):k.disable(3042),z.blend_enable=b);b=f[0];n=f[1];v=f[2];B=f[3];if(b!==x[0]||n!==x[1]||
v!==x[2]||B!==x[3])k.blendColor(b,n,v,B),x[0]=b,x[1]=n,x[2]=v,x[3]=B;b=Y[0];n=Y[1];if(b!==C[0]||n!==C[1])k.blendEquationSeparate(b,n),C[0]=b,C[1]=n;b=F[0];n=F[1];v=F[2];B=F[3];if(b!==d[0]||n!==d[1]||v!==d[2]||B!==d[3])k.blendFuncSeparate(b,n,v,B),d[0]=b,d[1]=n,d[2]=v,d[3]=B;b=u.depth_enable;b!==z.depth_enable&&(b?k.enable(2929):k.disable(2929),z.depth_enable=b);b=u.depth_func;b!==z.depth_func&&(k.depthFunc(b),z.depth_func=b);b=Z[0];n=Z[1];if(b!==A[0]||n!==A[1])k.depthRange(b,n),A[0]=b,A[1]=n;b=u.depth_mask;
b!==z.depth_mask&&(k.depthMask(b),z.depth_mask=b);b=t[0];n=t[1];v=t[2];B=t[3];if(b!==a[0]||n!==a[1]||v!==a[2]||B!==a[3])k.colorMask(b,n,v,B),a[0]=b,a[1]=n,a[2]=v,a[3]=B;b=u.cull_enable;b!==z.cull_enable&&(b?k.enable(2884):k.disable(2884),z.cull_enable=b);b=u.cull_face;b!==z.cull_face&&(k.cullFace(b),z.cull_face=b);b=u.frontFace;b!==z.frontFace&&(k.frontFace(b),z.frontFace=b);b=u.polygonOffset_enable;b!==z.polygonOffset_enable&&(b?k.enable(32823):k.disable(32823),z.polygonOffset_enable=b);b=ja[0];
n=ja[1];if(b!==ha[0]||n!==ha[1])k.polygonOffset(b,n),ha[0]=b,ha[1]=n;b=u.sample_alpha;b!==z.sample_alpha&&(b?k.enable(32926):k.disable(32926),z.sample_alpha=b);b=u.sample_enable;b!==z.sample_enable&&(b?k.enable(32928):k.disable(32928),z.sample_enable=b);b=W[0];n=W[1];if(b!==ea[0]||n!==ea[1])k.sampleCoverage(b,n),ea[0]=b,ea[1]=n;b=u.stencil_enable;b!==z.stencil_enable&&(b?k.enable(2960):k.disable(2960),z.stencil_enable=b);b=u.stencil_mask;b!==z.stencil_mask&&(k.stencilMask(b),z.stencil_mask=b);b=D[0];
n=D[1];v=D[2];if(b!==g[0]||n!==g[1]||v!==g[2])k.stencilFunc(b,n,v),g[0]=b,g[1]=n,g[2]=v;b=Ca[0];n=Ca[1];v=Ca[2];B=Ca[3];if(b!==qa[0]||n!==qa[1]||v!==qa[2]||B!==qa[3])k.stencilOpSeparate(b,n,v,B),qa[0]=b,qa[1]=n,qa[2]=v,qa[3]=B;b=N[0];n=N[1];v=N[2];B=N[3];if(b!==M[0]||n!==M[1]||v!==M[2]||B!==M[3])k.stencilOpSeparate(b,n,v,B),M[0]=b,M[1]=n,M[2]=v,M[3]=B;b=u.scissor_enable;b!==z.scissor_enable&&(b?k.enable(3089):k.disable(3089),z.scissor_enable=b);b=R[0];n=R[1];v=R[2];B=R[3];if(b!==O[0]||n!==O[1]||v!==
O[2]||B!==O[3])k.scissor(b,n,v,B),O[0]=b,O[1]=n,O[2]=v,O[3]=B;b=m[0];n=m[1];v=m[2];B=m[3];if(b!==J[0]||n!==J[1]||v!==J[2]||B!==J[3])k.viewport(b,n,v,B),J[0]=b,J[1]=n,J[2]=v,J[3]=B}k.lineWidth(1);z.lineWidth=1;if(b=z.profile)h=performance.now(),L.count++;k.useProgram(e.program);X.setVAO(null);n=ba.location;v=w[n];v.buffer||k.enableVertexAttribArray(n);if(v.type!==l.dtype||2!==v.size||v.buffer!==l||!1!==v.normalized||0!==v.offset||0!==v.stride)k.bindBuffer(34962,l.buffer),k.vertexAttribPointer(n,2,
l.dtype,!1,0,0),v.type=l.dtype,v.size=2,v.buffer=l,v.normalized=!1,v.offset=0,v.stride=0;k.uniform4f(y.location,1,0,0,1);q&&k.bindBuffer(34963,q.buffer.buffer);n=q.primType;v=q.vertCount-0;0<=v||da.commandRaise(c,K);v&&(k.drawElements(n,v,q.type,0<<(q.type-5121>>1)),z.dirty=!0,X.setVAO(null),b&&(L.cpuTime+=performance.now()-h))},scope:function(a,b,c){var d,f,e,g,k,m,n,q,t,v,x,r,p,w,y,A,C,D,F,I,J,M;d=u.lineWidth;u.lineWidth=1;if(f=z.profile)e=performance.now(),L.count++;g=Q.elements;Q.elements=G;k=
Q.offset;Q.offset=0;m=G.vertCount-0;0<=m||da.commandRaise(H,K);n=Q.count;Q.count=m;q=G.primType;m=Q.primitive;Q.primitive=q;q=h[3];h[3]=aa;t=B.buffer;B.buffer=l;v=B.divisor;B.divisor=0;x=B.normalized;B.normalized=!1;r=B.offset;B.offset=0;p=B.size;B.size=0;w=B.state;B.state=1;y=B.stride;B.stride=0;A=B.type;B.type=l.dtype;C=B.w;B.w=0;D=B.x;B.x=0;F=B.y;B.y=0;I=B.z;B.z=0;J=S.vert;S.vert=2;M=S.frag;S.frag=1;z.dirty=!0;b(T,a,c);u.lineWidth=d;f&&(L.cpuTime+=performance.now()-e);Q.elements=g;Q.offset=k;Q.count=
n;Q.primitive=m;h[3]=q;B.buffer=t;B.divisor=v;B.normalized=x;B.offset=r;B.size=p;B.state=w;B.stride=y;B.type=A;B.w=C;B.x=D;B.y=F;B.z=I;S.vert=J;S.frag=M;z.dirty=!0},batch:function(b,c){var e,h,q;e=ia.next;e!==ia.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),ia.cur=e);if(z.dirty){var B,G;e=u.dither;e!==z.dither&&(e?k.enable(3024):k.disable(3024),z.dither=e);e=u.blend_enable;e!==z.blend_enable&&(e?k.enable(3042):k.disable(3042),z.blend_enable=e);e=f[0];q=f[1];B=f[2];G=
f[3];if(e!==x[0]||q!==x[1]||B!==x[2]||G!==x[3])k.blendColor(e,q,B,G),x[0]=e,x[1]=q,x[2]=B,x[3]=G;e=Y[0];q=Y[1];if(e!==C[0]||q!==C[1])k.blendEquationSeparate(e,q),C[0]=e,C[1]=q;e=F[0];q=F[1];B=F[2];G=F[3];if(e!==d[0]||q!==d[1]||B!==d[2]||G!==d[3])k.blendFuncSeparate(e,q,B,G),d[0]=e,d[1]=q,d[2]=B,d[3]=G;e=u.depth_enable;e!==z.depth_enable&&(e?k.enable(2929):k.disable(2929),z.depth_enable=e);e=u.depth_func;e!==z.depth_func&&(k.depthFunc(e),z.depth_func=e);e=Z[0];q=Z[1];if(e!==A[0]||q!==A[1])k.depthRange(e,
q),A[0]=e,A[1]=q;e=u.depth_mask;e!==z.depth_mask&&(k.depthMask(e),z.depth_mask=e);e=t[0];q=t[1];B=t[2];G=t[3];if(e!==a[0]||q!==a[1]||B!==a[2]||G!==a[3])k.colorMask(e,q,B,G),a[0]=e,a[1]=q,a[2]=B,a[3]=G;e=u.cull_enable;e!==z.cull_enable&&(e?k.enable(2884):k.disable(2884),z.cull_enable=e);e=u.cull_face;e!==z.cull_face&&(k.cullFace(e),z.cull_face=e);e=u.frontFace;e!==z.frontFace&&(k.frontFace(e),z.frontFace=e);e=u.polygonOffset_enable;e!==z.polygonOffset_enable&&(e?k.enable(32823):k.disable(32823),z.polygonOffset_enable=
e);e=ja[0];q=ja[1];if(e!==ha[0]||q!==ha[1])k.polygonOffset(e,q),ha[0]=e,ha[1]=q;e=u.sample_alpha;e!==z.sample_alpha&&(e?k.enable(32926):k.disable(32926),z.sample_alpha=e);e=u.sample_enable;e!==z.sample_enable&&(e?k.enable(32928):k.disable(32928),z.sample_enable=e);e=W[0];q=W[1];if(e!==ea[0]||q!==ea[1])k.sampleCoverage(e,q),ea[0]=e,ea[1]=q;e=u.stencil_enable;e!==z.stencil_enable&&(e?k.enable(2960):k.disable(2960),z.stencil_enable=e);e=u.stencil_mask;e!==z.stencil_mask&&(k.stencilMask(e),z.stencil_mask=
e);e=D[0];q=D[1];B=D[2];if(e!==g[0]||q!==g[1]||B!==g[2])k.stencilFunc(e,q,B),g[0]=e,g[1]=q,g[2]=B;e=Ca[0];q=Ca[1];B=Ca[2];G=Ca[3];if(e!==qa[0]||q!==qa[1]||B!==qa[2]||G!==qa[3])k.stencilOpSeparate(e,q,B,G),qa[0]=e,qa[1]=q,qa[2]=B,qa[3]=G;e=N[0];q=N[1];B=N[2];G=N[3];if(e!==M[0]||q!==M[1]||B!==M[2]||G!==M[3])k.stencilOpSeparate(e,q,B,G),M[0]=e,M[1]=q,M[2]=B,M[3]=G;e=u.scissor_enable;e!==z.scissor_enable&&(e?k.enable(3089):k.disable(3089),z.scissor_enable=e);e=R[0];q=R[1];B=R[2];G=R[3];if(e!==O[0]||q!==
O[1]||B!==O[2]||G!==O[3])k.scissor(e,q,B,G),O[0]=e,O[1]=q,O[2]=B,O[3]=G;e=m[0];q=m[1];B=m[2];G=m[3];if(e!==J[0]||q!==J[1]||B!==J[2]||G!==J[3])k.viewport(e,q,B,G),J[0]=e,J[1]=q,J[2]=B,J[3]=G}k.lineWidth(1);z.lineWidth=1;if(e=z.profile)h=performance.now(),L.count+=c;k.useProgram(U.program);X.setVAO(null);q=ba.location;B=w[q];B.buffer||k.enableVertexAttribArray(q);if(B.type!==l.dtype||2!==B.size||B.buffer!==l||!1!==B.normalized||0!==B.offset||0!==B.stride)k.bindBuffer(34962,l.buffer),k.vertexAttribPointer(q,
2,l.dtype,!1,0,0),B.type=l.dtype,B.size=2,B.buffer=l,B.normalized=!1,B.offset=0,B.stride=0;k.uniform4f(y.location,1,0,0,1);n&&k.bindBuffer(34963,n.buffer.buffer);B=n.primType;G=n.vertCount-0;0<=G||da.commandRaise(v,K);for(q=0;q<c;++q)G&&k.drawElements(B,G,n.type,0<<(n.type-5121>>1));z.dirty=!0;X.setVAO(null);e&&(L.cpuTime+=performance.now()-h)}}},"$20,mouse,position,t,texture":function(b,da,K,L,e,l,q,c,G,H,B,U,n,v,y,ba,w,T,z,Q,Z,k,u,S,h){var X,f,x,Y,C,F,d,t,a,ha,A,ja,$a,W,ea,R,O,D,g,N,M,Ca,qa,m,J,
aa,P,la,ra,Aa,wa,fa,Ba,ka,pa,ya;X=b.attributes;f=b.context;x=b.current;Y=b.draw;C=b.elements;F=b.framebuffer;d=b.gl;t=b.isArrayLike;a=b.next;ha=b.shader;A=b.uniforms;ja=b.vao;$a=a.blend_color;W=x.blend_color;ea=a.blend_equation;R=x.blend_equation;O=a.blend_func;D=x.blend_func;g=a.colorMask;N=x.colorMask;M=a.depth_range;Ca=x.depth_range;qa=a.polygonOffset_offset;m=x.polygonOffset_offset;J=a.sample_coverage;aa=x.sample_coverage;P=a.scissor_box;la=x.scissor_box;ra=a.stencil_func;Aa=x.stencil_func;wa=
a.stencil_opBack;fa=x.stencil_opBack;Ba=a.stencil_opFront;ka=x.stencil_opFront;pa=a.viewport;ya=x.viewport;return{draw:function(b){var n,v,w,r;n=F.next;n!==F.cur&&(n?d.bindFramebuffer(36160,n.framebuffer):d.bindFramebuffer(36160,null),F.cur=n);if(x.dirty){var p;n=a.dither;n!==x.dither&&(n?d.enable(3024):d.disable(3024),x.dither=n);n=a.blend_enable;n!==x.blend_enable&&(n?d.enable(3042):d.disable(3042),x.blend_enable=n);n=$a[0];w=$a[1];r=$a[2];p=$a[3];if(n!==W[0]||w!==W[1]||r!==W[2]||p!==W[3])d.blendColor(n,
w,r,p),W[0]=n,W[1]=w,W[2]=r,W[3]=p;n=ea[0];w=ea[1];if(n!==R[0]||w!==R[1])d.blendEquationSeparate(n,w),R[0]=n,R[1]=w;n=O[0];w=O[1];r=O[2];p=O[3];if(n!==D[0]||w!==D[1]||r!==D[2]||p!==D[3])d.blendFuncSeparate(n,w,r,p),D[0]=n,D[1]=w,D[2]=r,D[3]=p;n=a.depth_enable;n!==x.depth_enable&&(n?d.enable(2929):d.disable(2929),x.depth_enable=n);n=a.depth_func;n!==x.depth_func&&(d.depthFunc(n),x.depth_func=n);n=M[0];w=M[1];if(n!==Ca[0]||w!==Ca[1])d.depthRange(n,w),Ca[0]=n,Ca[1]=w;n=a.depth_mask;n!==x.depth_mask&&
(d.depthMask(n),x.depth_mask=n);n=g[0];w=g[1];r=g[2];p=g[3];if(n!==N[0]||w!==N[1]||r!==N[2]||p!==N[3])d.colorMask(n,w,r,p),N[0]=n,N[1]=w,N[2]=r,N[3]=p;n=a.cull_enable;n!==x.cull_enable&&(n?d.enable(2884):d.disable(2884),x.cull_enable=n);n=a.cull_face;n!==x.cull_face&&(d.cullFace(n),x.cull_face=n);n=a.frontFace;n!==x.frontFace&&(d.frontFace(n),x.frontFace=n);n=a.lineWidth;n!==x.lineWidth&&(d.lineWidth(n),x.lineWidth=n);n=a.polygonOffset_enable;n!==x.polygonOffset_enable&&(n?d.enable(32823):d.disable(32823),
x.polygonOffset_enable=n);n=qa[0];w=qa[1];if(n!==m[0]||w!==m[1])d.polygonOffset(n,w),m[0]=n,m[1]=w;n=a.sample_alpha;n!==x.sample_alpha&&(n?d.enable(32926):d.disable(32926),x.sample_alpha=n);n=a.sample_enable;n!==x.sample_enable&&(n?d.enable(32928):d.disable(32928),x.sample_enable=n);n=J[0];w=J[1];if(n!==aa[0]||w!==aa[1])d.sampleCoverage(n,w),aa[0]=n,aa[1]=w;n=a.stencil_enable;n!==x.stencil_enable&&(n?d.enable(2960):d.disable(2960),x.stencil_enable=n);n=a.stencil_mask;n!==x.stencil_mask&&(d.stencilMask(n),
x.stencil_mask=n);n=ra[0];w=ra[1];r=ra[2];if(n!==Aa[0]||w!==Aa[1]||r!==Aa[2])d.stencilFunc(n,w,r),Aa[0]=n,Aa[1]=w,Aa[2]=r;n=Ba[0];w=Ba[1];r=Ba[2];p=Ba[3];if(n!==ka[0]||w!==ka[1]||r!==ka[2]||p!==ka[3])d.stencilOpSeparate(n,w,r,p),ka[0]=n,ka[1]=w,ka[2]=r,ka[3]=p;n=wa[0];w=wa[1];r=wa[2];p=wa[3];if(n!==fa[0]||w!==fa[1]||r!==fa[2]||p!==fa[3])d.stencilOpSeparate(n,w,r,p),fa[0]=n,fa[1]=w,fa[2]=r,fa[3]=p;n=a.scissor_enable;n!==x.scissor_enable&&(n?d.enable(3089):d.disable(3089),x.scissor_enable=n);n=P[0];
w=P[1];r=P[2];p=P[3];if(n!==la[0]||w!==la[1]||r!==la[2]||p!==la[3])d.scissor(n,w,r,p),la[0]=n,la[1]=w,la[2]=r,la[3]=p;n=pa[0];w=pa[1];r=pa[2];p=pa[3];if(n!==ya[0]||w!==ya[1]||r!==ya[2]||p!==ya[3])d.viewport(n,w,r,p),ya[0]=n,ya[1]=w,ya[2]=r,ya[3]=p;x.dirty=!1}if(n=x.profile)v=performance.now(),L.count++;d.useProgram(e.program);ja.setVAO(null);w=u.location;r=X[w];r.buffer||d.enableVertexAttribArray(w);if(r.type!==l.dtype||2!==r.size||r.buffer!==l||!1!==r.normalized||0!==r.offset||0!==r.stride)d.bindBuffer(34962,
l.buffer),d.vertexAttribPointer(w,2,l.dtype,!1,0,0),r.type=l.dtype,r.size=2,r.buffer=l,r.normalized=!1,r.offset=0,r.stride=0;w=q.call(this,f,b,0);t(w)&&2===w.length||da.commandRaise(c,K);d.uniform2f(k.location,w[0],w[1]);b=G.call(this,f,b,0);"number"!==typeof b&&da.commandRaise(H,K);d.uniform1f(S.location,b);d.uniform1i(h.location,B.bind());(b=Y.elements)?d.bindBuffer(34963,b.buffer.buffer):ja.currentVAO&&(b=C.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,b.buffer.buffer);w=Y.primitive;
r=Y.offset;b?d.drawElements(w,3,b.type,r<<(b.type-5121>>1)):d.drawArrays(w,r,3);ja.setVAO(null);n&&(L.cpuTime+=performance.now()-v);B.unbind()},scope:function(a,b,c){var d,e,g,h,k,m,q,t,u,w,z,B,C,D,F,G,H,J,K,M;if(d=x.profile)e=performance.now(),L.count++;g=Y.count;Y.count=3;h=U.call(this,f,a,c);k=A[3];A[3]=h;m=n.call(this,f,a,c);h=A[4];A[4]=m;m=A[5];A[5]=v;q=y.buffer;y.buffer=l;t=y.divisor;y.divisor=0;u=y.normalized;y.normalized=!1;w=y.offset;y.offset=0;z=y.size;y.size=0;B=y.state;y.state=1;C=y.stride;
y.stride=0;D=y.type;y.type=l.dtype;F=y.w;y.w=0;G=y.x;y.x=0;H=y.y;y.y=0;J=y.z;y.z=0;K=ha.vert;ha.vert=2;M=ha.frag;ha.frag=1;b(f,a,c);d&&(L.cpuTime+=performance.now()-e);Y.count=g;A[3]=k;A[4]=h;A[5]=m;y.buffer=q;y.divisor=t;y.normalized=u;y.offset=w;y.size=z;y.state=B;y.stride=C;y.type=D;y.w=F;y.x=G;y.y=H;y.z=J;ha.vert=K;ha.frag=M},batch:function(b,c){var e,n,q;e=F.next;e!==F.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),F.cur=e);if(x.dirty){var p,v,y;e=a.dither;e!==x.dither&&
(e?d.enable(3024):d.disable(3024),x.dither=e);e=a.blend_enable;e!==x.blend_enable&&(e?d.enable(3042):d.disable(3042),x.blend_enable=e);e=$a[0];p=$a[1];v=$a[2];y=$a[3];if(e!==W[0]||p!==W[1]||v!==W[2]||y!==W[3])d.blendColor(e,p,v,y),W[0]=e,W[1]=p,W[2]=v,W[3]=y;e=ea[0];p=ea[1];if(e!==R[0]||p!==R[1])d.blendEquationSeparate(e,p),R[0]=e,R[1]=p;e=O[0];p=O[1];v=O[2];y=O[3];if(e!==D[0]||p!==D[1]||v!==D[2]||y!==D[3])d.blendFuncSeparate(e,p,v,y),D[0]=e,D[1]=p,D[2]=v,D[3]=y;e=a.depth_enable;e!==x.depth_enable&&
(e?d.enable(2929):d.disable(2929),x.depth_enable=e);e=a.depth_func;e!==x.depth_func&&(d.depthFunc(e),x.depth_func=e);e=M[0];p=M[1];if(e!==Ca[0]||p!==Ca[1])d.depthRange(e,p),Ca[0]=e,Ca[1]=p;e=a.depth_mask;e!==x.depth_mask&&(d.depthMask(e),x.depth_mask=e);e=g[0];p=g[1];v=g[2];y=g[3];if(e!==N[0]||p!==N[1]||v!==N[2]||y!==N[3])d.colorMask(e,p,v,y),N[0]=e,N[1]=p,N[2]=v,N[3]=y;e=a.cull_enable;e!==x.cull_enable&&(e?d.enable(2884):d.disable(2884),x.cull_enable=e);e=a.cull_face;e!==x.cull_face&&(d.cullFace(e),
x.cull_face=e);e=a.frontFace;e!==x.frontFace&&(d.frontFace(e),x.frontFace=e);e=a.lineWidth;e!==x.lineWidth&&(d.lineWidth(e),x.lineWidth=e);e=a.polygonOffset_enable;e!==x.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),x.polygonOffset_enable=e);e=qa[0];p=qa[1];if(e!==m[0]||p!==m[1])d.polygonOffset(e,p),m[0]=e,m[1]=p;e=a.sample_alpha;e!==x.sample_alpha&&(e?d.enable(32926):d.disable(32926),x.sample_alpha=e);e=a.sample_enable;e!==x.sample_enable&&(e?d.enable(32928):d.disable(32928),x.sample_enable=
e);e=J[0];p=J[1];if(e!==aa[0]||p!==aa[1])d.sampleCoverage(e,p),aa[0]=e,aa[1]=p;e=a.stencil_enable;e!==x.stencil_enable&&(e?d.enable(2960):d.disable(2960),x.stencil_enable=e);e=a.stencil_mask;e!==x.stencil_mask&&(d.stencilMask(e),x.stencil_mask=e);e=ra[0];p=ra[1];v=ra[2];if(e!==Aa[0]||p!==Aa[1]||v!==Aa[2])d.stencilFunc(e,p,v),Aa[0]=e,Aa[1]=p,Aa[2]=v;e=Ba[0];p=Ba[1];v=Ba[2];y=Ba[3];if(e!==ka[0]||p!==ka[1]||v!==ka[2]||y!==ka[3])d.stencilOpSeparate(e,p,v,y),ka[0]=e,ka[1]=p,ka[2]=v,ka[3]=y;e=wa[0];p=wa[1];
v=wa[2];y=wa[3];if(e!==fa[0]||p!==fa[1]||v!==fa[2]||y!==fa[3])d.stencilOpSeparate(e,p,v,y),fa[0]=e,fa[1]=p,fa[2]=v,fa[3]=y;e=a.scissor_enable;e!==x.scissor_enable&&(e?d.enable(3089):d.disable(3089),x.scissor_enable=e);e=P[0];p=P[1];v=P[2];y=P[3];if(e!==la[0]||p!==la[1]||v!==la[2]||y!==la[3])d.scissor(e,p,v,y),la[0]=e,la[1]=p,la[2]=v,la[3]=y;e=pa[0];p=pa[1];v=pa[2];y=pa[3];if(e!==ya[0]||p!==ya[1]||v!==ya[2]||y!==ya[3])d.viewport(e,p,v,y),ya[0]=e,ya[1]=p,ya[2]=v,ya[3]=y;x.dirty=!1}if(e=x.profile)n=
performance.now(),L.count+=c;d.useProgram(ba.program);ja.setVAO(null);p=u.location;v=X[p];v.buffer||d.enableVertexAttribArray(p);if(v.type!==l.dtype||2!==v.size||v.buffer!==l||!1!==v.normalized||0!==v.offset||0!==v.stride)d.bindBuffer(34962,l.buffer),d.vertexAttribPointer(p,2,l.dtype,!1,0,0),v.type=l.dtype,v.size=2,v.buffer=l,v.normalized=!1,v.offset=0,v.stride=0;p=w.call(this,f,void 0,q);t(p)&&2===p.length||da.commandRaise(T,K);d.uniform2f(k.location,p[0],p[1]);q=z.call(this,f,void 0,q);"number"!==
typeof q&&da.commandRaise(Q,K);d.uniform1f(S.location,q);d.uniform1i(h.location,Z.bind());(p=Y.elements)?d.bindBuffer(34963,p.buffer.buffer):ja.currentVAO&&(p=C.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,p.buffer.buffer);v=Y.primitive;y=Y.offset;for(q=0;q<c;++q)p?d.drawElements(v,3,p.type,y<<(p.type-5121>>1)):d.drawArrays(v,y,3);Z.unbind();ja.setVAO(null);e&&(L.cpuTime+=performance.now()-n)}}}}},{}],25:[function(Z,ha,$a){var b=Z("./sorted-object-keys");ha.exports=function(da,K){for(var L=
b(K),e=0;e<L.length;++e)da[L[e]]=K[L[e]];return da}},{"./sorted-object-keys":34}],26:[function(Z,ha,$a){function b(b,e,l,q,c,G){for(var H=0;H<e;++H)for(var B=b[H],K=0;K<l;++K)for(var n=B[K],v=0;v<q;++v)c[G++]=n[v]}function da(K,e,l,q,c){for(var G=1,H=l+1;H<e.length;++H)G*=e[H];var B=e[l];if(4===e.length-l){var U=e[l+1],n=e[l+2];e=e[l+3];for(H=0;H<B;++H)b(K[H],U,n,e,q,c),c+=G}else for(H=0;H<B;++H)da(K[H],e,l+1,q,c),c+=G}var K=Z("./pool");ha.exports={shape:function(b){for(var e=[];b.length;b=b[0])e.push(b.length);
return e},flatten:function(L,e,l,q){var c=1;if(e.length)for(var G=0;G<e.length;++G)c*=e[G];else c=0;l=q||K.allocType(l,c);switch(e.length){case 0:break;case 1:q=e[0];for(e=0;e<q;++e)l[e]=L[e];break;case 2:q=e[0];e=e[1];for(G=c=0;G<q;++G)for(var H=L[G],B=0;B<e;++B)l[c++]=H[B];break;case 3:b(L,e[0],e[1],e[2],l,0);break;default:da(L,e,0,l,0)}return l}}},{"./pool":32}],27:[function(Z,ha,$a){var b=Z("./is-typed-array");ha.exports=function(da){return Array.isArray(da)||b(da)}},{"./is-typed-array":30}],
28:[function(Z,ha,$a){var b=Z("./is-typed-array");ha.exports=function(da){return!!da&&"object"===typeof da&&Array.isArray(da.shape)&&Array.isArray(da.stride)&&"number"===typeof da.offset&&da.shape.length===da.stride.length&&(Array.isArray(da.data)||b(da.data))}},{"./is-typed-array":30}],29:[function(Z,ha,$a){ha.exports=function(b){return!(b&b-1)&&!!b}},{}],30:[function(Z,ha,$a){ha.exports=function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||
b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Uint8ClampedArray}},{}],31:[function(Z,ha,$a){ha.exports=function(b,da){for(var K=Array(b),L=0;L<b;++L)K[L]=da(L);return K}},{}],32:[function(Z,ha,$a){function b(b){var e,l;e=(65535<b)<<4;b>>>=e;l=(255<b)<<3;b>>>=l;e|=l;l=(15<b)<<2;b>>>=l;e|=l;l=(3<b)<<1;return e|l|b>>>l>>1}function da(){function L(e){a:{for(var c=16;268435456>=c;c*=16)if(e<=c){e=c;break a}e=0}c=l[b(e)>>2];return 0<
c.length?c.pop():new ArrayBuffer(e)}function e(e){l[b(e.byteLength)>>2].push(e)}var l=K(8,function(){return[]});return{alloc:L,free:e,allocType:function(b,c){var e=null;switch(b){case 5120:e=new Int8Array(L(c),0,c);break;case 5121:e=new Uint8Array(L(c),0,c);break;case 5122:e=new Int16Array(L(2*c),0,c);break;case 5123:e=new Uint16Array(L(2*c),0,c);break;case 5124:e=new Int32Array(L(4*c),0,c);break;case 5125:e=new Uint32Array(L(4*c),0,c);break;case 5126:e=new Float32Array(L(4*c),0,c);break;default:return null}return e.length!==
c?e.subarray(0,c):e},freeType:function(b){e(b.buffer)}}}var K=Z("./loop");Z=da();Z.zero=da();ha.exports=Z},{"./loop":31}],33:[function(Z,ha,$a){ha.exports={next:"function"===typeof requestAnimationFrame?function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:clearTimeout}},{}],34:[function(Z,ha,$a){ha.exports=function(b){return Object.keys(b).sort()}},{}],35:[function(Z,ha,$a){var b=
Z("./pool"),da=new Float32Array(1),K=new Uint32Array(da.buffer);ha.exports=function(L){for(var e=b.allocType(5123,L.length),l=0;l<L.length;++l)if(isNaN(L[l]))e[l]=65535;else if(Infinity===L[l])e[l]=31744;else if(-Infinity===L[l])e[l]=64512;else{da[0]=L[l];var q=K[0],c=q>>>31<<15,G=(q<<1>>>24)-127,q=q>>13&1023;e[l]=-24>G?c:-14>G?c+(q+1024>>-14-G):15<G?c+31744:c+(G+15<<10)+q}return e}},{"./pool":32}],36:[function(Z,ha,$a){var b=Z("./sorted-object-keys");ha.exports=function(da){return b(da).map(function(b){return da[b]})}},
{"./sorted-object-keys":34}],37:[function(Z,ha,$a){function b(b,c,e){function H(){var c=window.innerWidth,l=window.innerHeight;b!==document.body&&(l=B.getBoundingClientRect(),c=l.right-l.left,l=l.bottom-l.top);B.width=e*c;B.height=e*l}var B=document.createElement("canvas");l(B.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(B);b===document.body&&(B.style.position="absolute",l(b.style,{margin:0,padding:0}));var K;b!==document.body&&"function"===typeof ResizeObserver?
(K=new ResizeObserver(function(){setTimeout(H)}),K.observe(b)):window.addEventListener("resize",H,!1);H();return{canvas:B,onDestroy:function(){K?K.disconnect():window.removeEventListener("resize",H);b.removeChild(B)}}}function da(b,c){function e(l){try{return b.getContext(l,c)}catch(B){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function K(b){if("string"===typeof b)return b.split();e(Array.isArray(b),"invalid extension array");return b}function L(b){return"string"===
typeof b?(e("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(b)):b}var e=Z("./util/check"),l=Z("./util/extend");ha.exports=function(l){var c=l||{},G,H,B,U;l={};var n=[],v=[],y="undefined"===typeof window?1:window.devicePixelRatio,ba=!1,w=function(b){b&&e.raise(b)},T=function(){};"string"===typeof c?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),G=document.querySelector(c),e(G,"invalid query string for element")):"object"===
typeof c?"string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?G=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(U=c,B=U.canvas):(e.constructor(c),"gl"in c?U=c.gl:"canvas"in c?B=L(c.canvas):"container"in c&&(H=L(c.container)),"attributes"in c&&(l=c.attributes,e.type(l,"object","invalid context attributes")),"extensions"in c&&(n=K(c.extensions)),"optionalExtensions"in c&&(v=K(c.optionalExtensions)),"onDone"in c&&(e.type(c.onDone,
"function","invalid or missing onDone callback"),w=c.onDone),"profile"in c&&(ba=!!c.profile),"pixelRatio"in c&&(y=+c.pixelRatio,e(0<y,"invalid pixel ratio"))):e.raise("invalid arguments to regl");G&&("canvas"===G.nodeName.toLowerCase()?B=G:H=G);if(!U){if(!B){e("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");G=b(H||document.body,w,y);if(!G)return null;B=G.canvas;T=G.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0);U=da(B,l)}return U?
{gl:U,canvas:B,container:H,extensions:n,optionalExtensions:v,pixelRatio:y,profile:ba,onDone:w,onDestroy:T}:(T(),w("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(Z,ha,$a){function b(b,c){for(var e=0;e<b.length;++e)if(b[e]===c)return e;return-1}var da=Z("./lib/util/check"),K=Z("./lib/util/extend"),L=Z("./lib/dynamic"),e=Z("./lib/util/raf"),l=Z("./lib/util/clock"),q=Z("./lib/strings"),c=Z("./lib/webgl"),
G=Z("./lib/extension"),H=Z("./lib/limits"),B=Z("./lib/buffer"),U=Z("./lib/elements"),n=Z("./lib/texture"),v=Z("./lib/renderbuffer"),y=Z("./lib/framebuffer"),ba=Z("./lib/attribute"),w=Z("./lib/shader"),T=Z("./lib/read"),z=Z("./lib/core"),Q=Z("./lib/stats"),ia=Z("./lib/timer");ha.exports=function(k){function u(){if(0===Ba.length)O&&O.update(),Ja=null;else{Ja=e.next(u);d();for(var a=Ba.length-1;0<=a;--a){var b=Ba[a];b&&b(M,null,0)}Z.flush();O&&O.update()}}function S(){!Ja&&0<Ba.length&&(Ja=e.next(u))}
function h(){Ja&&(e.cancel(u),Ja=null)}function X(a){a.preventDefault();ha=!0;h();ka.forEach(function(a){a()})}function f(a){Z.getError();ha=!1;$a.restore();aa.restore();qa.restore();P.restore();la.restore();ra.restore();J.restore();O&&O.restore();Aa.procs.refresh();S();pa.forEach(function(a){a()})}function x(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(L.isDynamic(f))e[b]=L.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(L.isDynamic(f[g])){e[b]=
L.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<a;)n.push(null);return n}da(!!a,"invalid args to regl({...})");da.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=K({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Aa.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return K(function(a,b){var d;ha&&da.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function Y(a,b){var c=0;Aa.procs.poll();var d=b.color;d&&(Z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Z.clearDepth(+b.depth),c|=256);"stencil"in b&&(Z.clearStencil(b.stencil|0),c|=1024);da(!!c,"called regl.clear with no buffer specified");
Z.clear(c)}function C(a){da.type(a,"function","regl.frame() callback must be a function");Ba.push(a);S();return{cancel:function(){function c(){var a=b(Ba,c);Ba[a]=Ba[Ba.length-1];--Ba.length;0>=Ba.length&&h()}var d=b(Ba,a);da(0<=d,"cannot cancel a frame twice");Ba[d]=c}}}function F(){var a=wa.viewport,b=wa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;M.viewportWidth=M.framebufferWidth=M.drawingBufferWidth=a[2]=b[2]=Z.drawingBufferWidth;M.viewportHeight=M.framebufferHeight=M.drawingBufferHeight=a[3]=b[3]=Z.drawingBufferHeight}
function d(){M.tick+=1;M.time=a();F();Aa.procs.poll()}function t(){P.refresh();F();Aa.procs.refresh();O&&O.update()}function a(){return(l()-D)/1E3}console.log("REGL args are:",k);k=c(k);console.log("REGL configs are:",k);if(!k)return null;var Z=k.gl,A=Z.getContextAttributes(),ha=Z.isContextLost(),$a=G(Z,k);if(!$a)return null;var W=q(),ea=Q(),R=$a.extensions,O=ia(Z,R),D=l(),g=Z.drawingBufferWidth,N=Z.drawingBufferHeight,M={tick:0,time:0,viewportWidth:g,viewportHeight:N,framebufferWidth:g,framebufferHeight:N,
drawingBufferWidth:g,drawingBufferHeight:N,pixelRatio:k.pixelRatio},g={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ca=H(Z,R),qa=B(Z,ea,k,function(a){return J.destroyBuffer(a)}),m=U(Z,R,qa,ea),J=ba(Z,R,Ca,ea,qa,m,g),aa=w(Z,W,ea,k),P=n(Z,R,Ca,function(){Aa.procs.poll()},M,ea,k),la=v(Z,R,Ca,ea,k),ra=y(Z,R,Ca,P,la,ea),Aa=z(Z,W,R,Ca,qa,m,P,ra,{},J,aa,g,M,O,k),W=T(Z,ra,Aa.procs.poll,M,A,R,Ca),wa=Aa.next,fa=Z.canvas,Ba=[],ka=[],pa=[],ya=[k.onDestroy],Ja=null;fa&&(fa.addEventListener("webglcontextlost",
X,!1),fa.addEventListener("webglcontextrestored",f,!1));var na=ra.setFBO=x({framebuffer:L.define.call(null,1,"framebuffer")});t();A=K(x,{clear:function(a){da("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)na(K({framebuffer:a.framebuffer.faces[b]},a),Y);else na(a,Y);else Y(null,a)},prop:L.define.bind(null,1),context:L.define.bind(null,2),"this":L.define.bind(null,3),draw:x({}),buffer:function(a){return qa.create(a,
34962,!1,!1)},elements:function(a){return m.create(a,!1)},texture:P.create2D,cube:P.createCube,renderbuffer:la.create,framebuffer:ra.create,framebufferCube:ra.createCube,vao:J.createVAO,attributes:A,frame:C,on:function(a,b){da.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return C(b);case "lost":c=ka;break;case "restore":c=pa;break;case "destroy":c=ya;break;default:da.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Ca,hasExtension:function(a){return 0<=Ca.extensions.indexOf(a.toLowerCase())},read:W,destroy:function(){Ba.length=0;h();fa&&(fa.removeEventListener("webglcontextlost",X),fa.removeEventListener("webglcontextrestored",f));aa.clear();ra.clear();la.clear();J.clear();P.clear();m.clear();qa.clear();O&&O.clear();ya.forEach(function(a){a()})},_gl:Z,_refresh:t,poll:function(){d();O&&O.update()},now:a,stats:ea});k.onDone(null,A);return A}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
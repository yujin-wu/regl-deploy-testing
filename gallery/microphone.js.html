<!DOCTYPE html>
      <html>
        <head>
          <title>example/microphone.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function u(B,ea,e){function l(f,a){if(!ea[f]){if(!B[f]){var b="function"==typeof require&&require;if(!a&&b)return b(f,!0);if(c)return c(f,!0);b=Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b;}b=ea[f]={exports:{}};B[f][0].call(b.exports,function(a){return l(B[f][1][a]||a)},b,b.exports,u,B,ea,e)}return ea[f].exports}for(var c="function"==typeof require&&require,b=0;b<e.length;b++)l(e[b]);return l}return u})()({1:[function(u,B,ea){var e=u("../regl")();u("getusermedia")({audio:!0},
function(l,c){if(!l){var b=new AudioContext,f=b.createAnalyser();b.createMediaStreamSource(c).connect(f);var b=f.frequencyBinCount,a=new Uint8Array(b),n=e.buffer({length:b,type:"uint8",usage:"dynamic"}),d=e({vert:"\n    precision mediump float;\n\n    #define FFT_SIZE "+b+"\n    #define PI "+Math.PI+"\n\n    attribute float index, frequency;\n\n    void main() {\n      float theta = 2.0 * PI * index / float(FFT_SIZE);\n      gl_Position = vec4(\n        0.5 * cos(theta) * (1.0 + frequency),\n        0.5 * sin(theta) * (1.0 + frequency),\n        0,\n        1);\n    }",
frag:"\n    void main() {\n      gl_FragColor = vec4(1, 1, 1, 1);\n    }",attributes:{index:Array(b).fill().map(function(a,c){return c}),frequency:{buffer:n,normalized:!0}},elements:null,instances:-1,lineWidth:1,depth:{enable:!1},count:b,primitive:"line loop"});e.frame(function(c){e.clear({color:[0,0,0,1],depth:1});f.getByteFrequencyData(a);n.subdata(a);d()})}})},{"../regl":49,getusermedia:38}],2:[function(u,B,ea){function e(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;
this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var l=u("./util/sorted-object-keys"),c=u("./util/check"),b=u("./util/values"),f=u("./constants/dtypes.json"),a=u("./util/is-typed-array"),n=u("./util/is-ndarray"),d=u("./constants/primitives.json"),p="attributes elements offset count primitive instances".split(" ");B.exports=function(aa,R,r,wa,v,C,O){function A(a){if(a!==P.currentVAO){var c=R.oes_vertex_array_object;a?c.bindVertexArrayOES(a.vao):c.bindVertexArrayOES(null);P.currentVAO=
a}}function I(a){if(a!==P.currentVAO){if(a)a.bindAttrs();else{for(var c=R.angle_instanced_arrays,f=0;f<z.length;++f){var d=z[f];d.buffer?(aa.enableVertexAttribArray(f),d.buffer.bind(),aa.vertexAttribPointer(f,d.size,d.type,d.normalized,d.stride,d.offfset),c&&d.divisor&&c.vertexAttribDivisorANGLE(f,d.divisor)):(aa.disableVertexAttribArray(f),aa.vertexAttrib4f(f,d.x,d.y,d.z,d.w))}O.elements?aa.bindBuffer(34963,O.elements.buffer.buffer):aa.bindBuffer(34963,null)}P.currentVAO=a}}function db(){b(da).forEach(function(a){a.destroy()})}
function N(){this.id=++k;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=R.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;da[this.id]=this;this.buffers=[]}function u(){R.oes_vertex_array_object&&b(da).forEach(function(a){a.refresh()})}var q=r.maxAttributes,z=Array(q);for(r=0;r<q;++r)z[r]=new e;var k=0,da={},P={Record:e,scope:{},state:z,currentVAO:null,targetVAO:null,restore:R.oes_vertex_array_object?u:function(){},
createVAO:function(b){function w(b){var z;if(Array.isArray(b))z=b,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{c("object"===typeof b,"invalid arguments for create vao");c("attributes"in b,"must specify attributes for vao");if(b.elements){var h=b.elements;k.ownsElements?("function"===typeof h&&"elements"===h._reglType?k.elements.destroy():k.elements(h),k.ownsElements=!1):C.getElements(b.elements)?(k.elements=
b.elements,k.ownsElements=!1):(k.elements=C.create(b.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;z=b.attributes;k.offset=0;k.count=-1;k.instances=-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in b&&(k.offset=b.offset|0);"count"in b&&(k.count=b.count|0);"instances"in b&&(k.instances=b.instances|0);"primitive"in b&&(c(b.primitive in d,"bad primitive type: "+b.primitive),k.primitive=d[b.primitive]);c.optional(function(){for(var a=
l(b),d=0;d<a.length;++d)c(0<=p.indexOf(a[d]),'invalid option for vao: "'+a[d]+'" valid options are '+p)});c(Array.isArray(z),"attributes must be an array")}c(z.length<q,"too many attributes");c(0<z.length,"must specify at least one attribute");var h={},g=k.attributes;g.length=z.length;for(var U=0;U<z.length;++U){var r=z[U],K=g[U]=new e,aa=r.data||r;if(Array.isArray(aa)||a(aa)||n(aa)){var A;k.buffers[U]&&(A=k.buffers[U],a(aa)&&A._buffer.byteLength>=aa.byteLength?A.subdata(aa):(A.destroy(),k.buffers[U]=
null));k.buffers[U]||(A=k.buffers[U]=v.create(r,34962,!1,!0));K.buffer=v.getBuffer(A);K.size=K.buffer.dimension|0;K.normalized=!1;K.type=K.buffer.dtype;K.offset=0;K.stride=0;K.divisor=0;K.state=1;h[U]=1}else v.getBuffer(r)?(K.buffer=v.getBuffer(r),K.size=K.buffer.dimension|0,K.normalized=!1,K.type=K.buffer.dtype,K.offset=0,K.stride=0,K.divisor=0,K.state=1):v.getBuffer(r.buffer)?(K.buffer=v.getBuffer(r.buffer),K.size=(+r.size||K.buffer.dimension)|0,K.normalized=!!r.normalized||!1,"type"in r?(c.parameter(r.type,
f,"invalid buffer type"),K.type=f[r.type]):K.type=K.buffer.dtype,K.offset=(r.offset||0)|0,K.stride=(r.stride||0)|0,K.divisor=(r.divisor||0)|0,K.state=1,c(1<=K.size&&4>=K.size,"size must be between 1 and 4"),c(0<=K.offset,"invalid offset"),c(0<=K.stride&&255>=K.stride,"stride must be between 0 and 255"),c(0<=K.divisor,"divisor must be positive"),c(!K.divisor||!!R.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in r?(c(0<U,"first attribute must not be a constant"),
K.x=+r.x||0,K.y=+r.y||0,K.z=+r.z||0,K.w=+r.w||0,K.state=2):c(!1,"invalid attribute spec for location "+U)}for(A=0;A<k.buffers.length;++A)!h[A]&&k.buffers[A]&&(k.buffers[A].destroy(),k.buffers[A]=null);k.refresh();return w}var k=new N;wa.vaoCount+=1;w.destroy=function(){for(var a=0;a<k.buffers.length;++a)k.buffers[a]&&k.buffers[a].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1);k.destroy()};w._vao=k;w._reglType="vao";return w(b)},getVAO:function(a){return"function"===
typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var c=0;c<z.length;++c){var d=z[c];d.buffer===a&&(aa.disableVertexAttribArray(c),d.buffer=null)}},setVAO:R.oes_vertex_array_object?A:I,clear:R.oes_vertex_array_object?db:function(){}};N.prototype.bindAttrs=function(){for(var a=R.angle_instanced_arrays,c=this.attributes,d=0;d<c.length;++d){var f=c[d];f.buffer?(aa.enableVertexAttribArray(d),aa.bindBuffer(34962,f.buffer.buffer),aa.vertexAttribPointer(d,f.size,f.type,f.normalized,f.stride,f.offset),
a&&f.divisor&&a.vertexAttribDivisorANGLE(d,f.divisor)):(aa.disableVertexAttribArray(d),aa.vertexAttrib4f(d,f.x,f.y,f.z,f.w))}for(a=c.length;a<q;++a)aa.disableVertexAttribArray(a);(a=C.getElements(this.elements))?aa.bindBuffer(34963,a.buffer.buffer):aa.bindBuffer(34963,null)};N.prototype.refresh=function(){var a=R.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),P.currentVAO=null,a.bindVertexArrayOES(null))};N.prototype.destroy=function(){if(this.vao){var a=R.oes_vertex_array_object;
this===P.currentVAO&&(P.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);da[this.id]&&(delete da[this.id],--wa.vaoCount)};return P}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(u,B,ea){function e(a){return r[Object.prototype.toString.call(a)]|
0}function l(a,c){for(var d=0;d<c.length;++d)a[d]=c[d]}function c(a,c,d,f,b,l,e){for(var n=0,k=0;k<d;++k)for(var p=0;p<f;++p)a[n++]=c[b*k+l*p+e]}var b=u("./util/sorted-object-keys"),f=u("./util/check"),a=u("./util/is-typed-array"),n=u("./util/is-ndarray"),d=u("./util/values"),p=u("./util/pool");ea=u("./util/flatten");var aa=ea.flatten,R=ea.shape,r=u("./constants/arraytypes.json"),wa=u("./constants/dtypes.json"),v=u("./constants/usage.json"),C=[];C[5120]=1;C[5122]=2;C[5124]=4;C[5121]=1;C[5123]=2;C[5125]=
4;C[5126]=4;B.exports=function(r,A,I,db){function N(a){this.id=k++;this.buffer=r.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;I.profile&&(this.stats={size:0})}function u(a,c,d){a.byteLength=c.byteLength;r.bufferData(a.type,c,d)}function q(d,b,k,r,q,h){d.usage=k;if(Array.isArray(b)){if(d.dtype=r||5126,0<b.length)if(Array.isArray(b[0])){q=R(b);for(var g=r=1;g<q.length;++g)r*=q[g];d.dimension=r;b=aa(b,q,d.dtype);u(d,b,k);h?d.persistentData=
b:p.freeType(b)}else"number"===typeof b[0]?(d.dimension=q,q=p.allocType(d.dtype,b.length),l(q,b),u(d,q,k),h?d.persistentData=q:p.freeType(q)):a(b[0])?(d.dimension=b[0].length,d.dtype=r||e(b[0])||5126,b=aa(b,[b.length,b[0].length],d.dtype),u(d,b,k),h?d.persistentData=b:p.freeType(b)):f.raise("invalid buffer data")}else if(a(b))d.dtype=r||e(b),d.dimension=q,u(d,b,k),h&&(d.persistentData=new Uint8Array(new Uint8Array(b.buffer)));else if(n(b)){q=b.shape;var U=b.stride,g=b.offset,z=0,v=0,C=0,A=0;1===q.length?
(z=q[0],v=1,C=U[0],A=0):2===q.length?(z=q[0],v=q[1],C=U[0],A=U[1]):f.raise("invalid shape");d.dtype=r||e(b.data)||5126;d.dimension=v;q=p.allocType(d.dtype,z*v);c(q,b.data,z,v,C,A,g);u(d,q,k);h?d.persistentData=q:p.freeType(q)}else b instanceof ArrayBuffer?(d.dtype=5121,d.dimension=q,u(d,b,k),h&&(d.persistentData=new Uint8Array(new Uint8Array(b)))):f.raise("invalid buffer data")}function z(a){A.bufferCount--;db(a);var d=a.buffer;f(d,"buffer must not be deleted already");r.deleteBuffer(d);a.buffer=
null;delete da[a.id]}var k=0,da={};N.prototype.bind=function(){r.bindBuffer(this.type,this.buffer)};N.prototype.destroy=function(){z(this)};var P=[];I.profile&&(A.getTotalBufferSize=function(){var a=0;b(da).forEach(function(d){a+=da[d].stats.size});return a});return{create:function(d,b,k,db){function P(d){var c=35044,b=null,h=0,l=0,e=1;Array.isArray(d)||a(d)||n(d)||d instanceof ArrayBuffer?b=d:"number"===typeof d?h=d|0:d&&(f.type(d,"object","buffer arguments must be an object, a number or an array"),
"data"in d&&(f(null===b||Array.isArray(b)||a(b)||n(b),"invalid data for buffer"),b=d.data),"usage"in d&&(f.parameter(d.usage,v,"invalid buffer usage"),c=v[d.usage]),"type"in d&&(f.parameter(d.type,wa,"invalid buffer type"),l=wa[d.type]),"dimension"in d&&(f.type(d.dimension,"number","invalid dimension"),e=d.dimension|0),"length"in d&&(f.nni(h,"buffer length must be a nonnegative integer"),h=d.length|0));g.bind();b?q(g,b,c,l,e,db):(h&&r.bufferData(g.type,h,c),g.dtype=l||5121,g.usage=c,g.dimension=e,
g.byteLength=h);I.profile&&(g.stats.size=g.byteLength*C[g.dtype]);return P}function h(a,d){f(d+a.byteLength<=g.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+d+" to a buffer of size "+g.byteLength);r.bufferSubData(g.type,d,a)}A.bufferCount++;var g=new N(b);da[g.id]=g;k||P(d);P._reglType="buffer";P._buffer=g;P.subdata=function(d,b){var k=(b||0)|0,w;g.bind();if(a(d)||d instanceof ArrayBuffer)h(d,k);else if(Array.isArray(d)){if(0<
d.length)if("number"===typeof d[0]){var q=p.allocType(g.dtype,d.length);l(q,d);h(q,k);p.freeType(q)}else Array.isArray(d[0])||a(d[0])?(w=R(d),q=aa(d,w,g.dtype),h(q,k),p.freeType(q)):f.raise("invalid buffer data")}else if(n(d)){w=d.shape;var r=d.stride,z=q=0,v=0,C=0;1===w.length?(q=w[0],z=1,v=r[0],C=0):2===w.length?(q=w[0],z=w[1],v=r[0],C=r[1]):f.raise("invalid shape");w=Array.isArray(d.data)?g.dtype:e(d.data);w=p.allocType(w,q*z);c(w,d.data,q,z,v,C,d.offset);h(w,k);p.freeType(w)}else f.raise("invalid data for buffer subdata");
return P};I.profile&&(P.stats=g.stats);P.destroy=function(){z(g)};return P},createStream:function(d,a){var c=P.pop();c||(c=new N(d));c.bind();q(c,a,35040,0,1,!1);return c},destroyStream:function(d){P.push(d)},clear:function(){d(da).forEach(z);P.forEach(z)},getBuffer:function(d){return d&&d._buffer instanceof N?d._buffer:null},restore:function(){d(da).forEach(function(d){d.buffer=r.createBuffer();r.bindBuffer(d.type,d.buffer);r.bufferData(d.type,d.persistentData||d.byteLength,d.usage)})},_initBuffer:q}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(u,B,ea){B.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(u,B,ea){B.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(u,B,ea){B.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(u,B,ea){B.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(u,B,ea){function e(d){return Array.isArray(d)||r(d)||wa(d)}function l(d){return d.sort(function(d,
a){return"viewport"===d?-1:"viewport"===a?1:d<a?-1:1})}function c(d,a,c,b){this.thisDep=d;this.contextDep=a;this.propDep=c;this.append=b}function b(d){return d&&!(d.thisDep||d.contextDep||d.propDep)}function f(d){return new c(!1,!1,!1,d)}function a(d,a){var b=d.type;if(0===b)return b=d.data.length,new c(!0,1<=b,2<=b,a);if(4===b)return b=d.data,new c(b.thisDep,b.contextDep,b.propDep,a);if(5===b)return new c(!1,!1,!1,a);if(6===b){for(var f=b=!1,l=!1,h=0;h<d.data.length;++h){var e=d.data[h];1===e.type?
l=!0:2===e.type?f=!0:3===e.type?b=!0:0===e.type?(b=!0,e=e.data,1<=e&&(f=!0),2<=e&&(l=!0)):4===e.type&&(b=b||e.data.thisDep,f=f||e.data.contextDep,l=l||e.data.propDep)}return new c(b,f,l,a)}return new c(3===b,2===b,1===b,a)}var n=u("./util/sorted-object-keys"),d=u("./util/check"),p=u("./util/extend"),aa=u("./util/codegen"),R=u("./util/loop"),r=u("./util/is-typed-array"),wa=u("./util/is-ndarray"),v=u("./util/is-array-like"),C=u("./dynamic"),O=u("./constants/primitives.json"),A=u("./constants/dtypes.json"),
I=["x","y","z","w"],db="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),N={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jc="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
q={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},z={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},k={frag:35632,vert:35633},da={cw:2304,ccw:2305},P=new c(!1,!1,!1,function(){});B.exports=function(r,w,wa,G,u,h,g,U,ka,la,gb,hc,sa,Pa,X){function H(d){return d.replace(".","_")}function L(d,a,c){var b=H(d);
Z.push(d);x[b]=D[b]=!!c;F[b]=a}function Q(d,a,c){var b=H(d);Z.push(d);Array.isArray(c)?(D[b]=c.slice(),x[b]=c.slice()):D[b]=x[b]=c;xa[b]=a}function qa(){var a=aa(),c=a.link,b=a.global;a.id=rc++;a.batchId="0";var f=c(Da),h=a.shared={props:"a0"};n(Da).forEach(function(d){h[d]=b.def(f,".",d)});d.optional(function(){a.CHECK=c(d);a.commandStr=d.guessCommand();a.command=c(a.commandStr);a.assert=function(d,a,b){d("if(!(",a,"))",this.CHECK,".commandRaise(",c(b),",",this.command,");")};m.invalidBlendCombinations=
Jc});var l=a.next={},e=a.current={};n(xa).forEach(function(d){Array.isArray(D[d])&&(l[d]=b.def(h.next,".",d),e[d]=b.def(h.current,".",d))});var k=a.constants={};n(m).forEach(function(d){k[d]=b.def(JSON.stringify(m[d]))});a.invoke=function(d,b){switch(b.type){case 0:var f=["this",h.context,h.props,a.batchId];return d.def(c(b.data),".call(",f.slice(0,Math.max(b.data.length+1,4)),")");case 1:return d.def(h.props,b.data);case 2:return d.def(h.context,b.data);case 3:return d.def("this",b.data);case 4:return b.data.append(a,
d),b.data.ref;case 5:return b.data.toString();case 6:return b.data.map(function(c){return a.invoke(d,c)})}};a.attribCache={};var F={};a.scopeAttrib=function(d){d=w.id(d);if(d in F)return F[d];var a=la.scope[d];a||(a=la.scope[d]=new ha);return F[d]=c(a)};return a}function M(d){var c=d["static"];d=d.dynamic;var b;if("profile"in c){var h=!!c.profile;b=f(function(d,a){return h});b.enable=h}else if("profile"in d){var m=d.profile;b=a(m,function(d,a){return d.invoke(a,m)})}return b}function B(c,b){var h=
c["static"],m=c.dynamic;if("framebuffer"in h){var l=h.framebuffer;return l?(l=U.getFramebuffer(l),d.command(l,"invalid framebuffer object"),f(function(d,a){var c=d.link(l),b=d.shared;a.set(b.framebuffer,".next",c);b=b.context;a.set(b,".framebufferWidth",c+".width");a.set(b,".framebufferHeight",c+".height");return c})):f(function(d,a){var c=d.shared;a.set(c.framebuffer,".next","null");c=c.context;a.set(c,".framebufferWidth",c+".drawingBufferWidth");a.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in m){var e=m.framebuffer;return a(e,function(a,c){var b=a.invoke(c,e),f=a.shared,S=f.framebuffer,h=c.def(S,".getFramebuffer(",b,")");d.optional(function(){a.assert(c,"!"+b+"||"+h,"invalid framebuffer object")});c.set(S,".next",h);f=f.context;c.set(f,".framebufferWidth",h+"?"+h+".width:"+f+".drawingBufferWidth");c.set(f,".framebufferHeight",h+"?"+h+".height:"+f+".drawingBufferHeight");return h})}return null}function $a(b,f,h){function m(b){if(b in l){var k=l[b];d.commandType(k,
"object","invalid "+b,h.commandStr);var Ia=!0,F=k.x|0,n=k.y|0,g,p;"width"in k?(g=k.width|0,d.command(0<=g,"invalid "+b,h.commandStr)):Ia=!1;"height"in k?(p=k.height|0,d.command(0<=p,"invalid "+b,h.commandStr)):Ia=!1;return new c(!Ia&&f&&f.thisDep,!Ia&&f&&f.contextDep,!Ia&&f&&f.propDep,function(d,a){var b=d.shared.context,c=g;"width"in k||(c=a.def(b,".","framebufferWidth","-",F));var f=p;"height"in k||(f=a.def(b,".","framebufferHeight","-",n));return[F,n,c,f]})}if(b in e){var q=e[b],Ia=a(q,function(a,
c){var f=a.invoke(c,q);d.optional(function(){a.assert(c,f+"&&typeof "+f+'==="object"',"invalid "+b)});var h=a.shared.context,S=c.def(f,".x|0"),m=c.def(f,".y|0"),l=c.def('"width" in ',f,"?",f,".width|0:","(",h,".","framebufferWidth","-",S,")"),e=c.def('"height" in ',f,"?",f,".height|0:","(",h,".","framebufferHeight","-",m,")");d.optional(function(){a.assert(c,l+">=0&&"+e+">=0","invalid "+b)});return[S,m,l,e]});f&&(Ia.thisDep=Ia.thisDep||f.thisDep,Ia.contextDep=Ia.contextDep||f.contextDep,Ia.propDep=
Ia.propDep||f.propDep);return Ia}return f?new c(f.thisDep,f.contextDep,f.propDep,function(d,a){var c=d.shared.context;return[0,0,a.def(c,".","framebufferWidth"),a.def(c,".","framebufferHeight")]}):null}var l=b["static"],e=b.dynamic;if(b=m("viewport")){var k=b;b=new c(b.thisDep,b.contextDep,b.propDep,function(d,a){var c=k.append(d,a),b=d.shared.context;a.set(b,".viewportWidth",c[2]);a.set(b,".viewportHeight",c[3]);return c})}return{viewport:b,scissor_box:m("scissor.box")}}function T(a,c){var b=a["static"];
if("string"===typeof b.frag&&"string"===typeof b.vert){if(0<n(c.dynamic).length)return null;var b=c["static"],f=n(b);if(0<f.length&&"number"===typeof b[f[0]]){for(var h=[],m=0;m<f.length;++m)d("number"===typeof b[f[m]],"must specify all vertex attribute locations when using vaos"),h.push([b[f[m]]|0,f[m]]);return h}}return null}function t(h,S,m){function l(c){if(c in e){var b=w.id(e[c]);d.optional(function(){gb.shader(k[c],b,d.guessCommand())});var h=f(function(){return b});h.id=b;return h}if(c in
F){var S=F[c];return a(S,function(a,b){var f=a.invoke(b,S),h=b.def(a.shared.strings,".id(",f,")");d.optional(function(){b(a.shared.shader,".shader(",k[c],",",h,",",a.command,");")});return h})}return null}var e=h["static"],F=h.dynamic,n=l("frag"),g=l("vert"),p=null;b(n)&&b(g)?(p=gb.program(g.id,n.id,null,m),h=f(function(d,a){return d.link(p)})):h=new c(n&&n.thisDep||g&&g.thisDep,n&&n.contextDep||g&&g.contextDep,n&&n.propDep||g&&g.propDep,function(a,c){var b=a.shared.shader,f;f=n?n.append(a,c):c.def(b,
".","frag");var h;h=g?g.append(a,c):c.def(b,".","vert");var S=b+".program("+h+","+f;d.optional(function(){S+=","+a.command});return c.def(S+")")});return{frag:n,vert:g,progVar:h,program:p}}function ia(m,S){function l(b,h){if(b in k){var m=k[b]|0;h?g.offset=m:g.instances=m;d.command(!h||0<=m,"invalid "+b,S.commandStr);return f(function(d,a){h&&(d.OFFSET=m);return m})}if(b in F){var e=F[b];return a(e,function(a,c){var f=a.invoke(c,e);h&&(a.OFFSET=f,d.optional(function(){a.assert(c,f+">=0","invalid "+
b)}));return f})}if(h){if(Hd)return f(function(d,a){return d.OFFSET=0});if(p)return new c(q.thisDep,q.contextDep,q.propDep,function(d,a){return a.def(d.shared.vao+".currentVAO?"+d.shared.vao+".currentVAO.offset:0")})}else if(p)return new c(q.thisDep,q.contextDep,q.propDep,function(d,a){return a.def(d.shared.vao+".currentVAO?"+d.shared.vao+".currentVAO.instances:-1")});return null}var k=m["static"],F=m.dynamic,g={},p=!1,q=function(){if("vao"in k){var d=k.vao;null!==d&&null===la.getVAO(d)&&(d=la.createVAO(d));
p=!0;g.vao=d;return f(function(a){var c=la.getVAO(d);return c?a.link(c):"null"})}if("vao"in F){p=!0;var c=F.vao;return a(c,function(d,a){var b=d.invoke(a,c);return a.def(d.shared.vao+".getVAO("+b+")")})}return null}(),Hd=!1,r=function(){if("elements"in k){var b=k.elements;g.elements=b;if(e(b)){var m=g.elements=h.create(b,!0),b=h.getElements(m);Hd=!0}else b&&(b=h.getElements(b),Hd=!0,d.command(b,"invalid elements",S.commandStr));m=f(function(d,a){if(b){var c=d.link(b);return d.ELEMENTS=c}return d.ELEMENTS=
null});m.value=b;return m}if("elements"in F){Hd=!0;var l=F.elements;return a(l,function(a,b){var c=a.shared,f=c.isBufferArgs,c=c.elements,h=a.invoke(b,l),S=b.def("null"),f=b.def(f,"(",h,")"),m=a.cond(f).then(S,"=",c,".createStream(",h,");")["else"](S,"=",c,".getElements(",h,");");d.optional(function(){a.assert(m["else"],"!"+h+"||"+S,"invalid elements")});b.entry(m);b.exit(a.cond(f).then(c,".destroyStream(",S,");"));return a.ELEMENTS=S})}return p?new c(q.thisDep,q.contextDep,q.propDep,function(d,a){return a.def(d.shared.vao+
".currentVAO?"+d.shared.elements+".getElements("+d.shared.vao+".currentVAO.elements):null")}):null}(),xd=l("offset",!0),w=function(){if("primitive"in k){var h=k.primitive;g.primitive=h;d.commandParameter(h,O,"invalid primitve",S.commandStr);return f(function(d,a){return O[h]})}if("primitive"in F){var m=F.primitive;return a(m,function(a,b){var c=a.constants.primTypes,f=a.invoke(b,m);d.optional(function(){a.assert(b,f+" in "+c,"invalid primitive, must be one of "+n(O))});return b.def(c,"[",f,"]")})}return Hd?
b(r)?r.value?f(function(d,a){return a.def(d.ELEMENTS,".primType")}):f(function(){return 4}):new c(r.thisDep,r.contextDep,r.propDep,function(d,a){var b=d.ELEMENTS;return a.def(b,"?",b,".primType:",4)}):p?new c(q.thisDep,q.contextDep,q.propDep,function(d,a){return a.def(d.shared.vao+".currentVAO?"+d.shared.vao+".currentVAO.primitive:4")}):null}(),x=function(){if("count"in k){var h=k.count|0;g.count=h;d.command("number"===typeof h&&0<=h,"invalid vertex count",S.commandStr);return f(function(){return h})}if("count"in
F){var m=F.count;return a(m,function(a,b){var c=a.invoke(b,m);d.optional(function(){a.assert(b,"typeof "+c+'==="number"&&'+c+">=0&&"+c+"===("+c+"|0)","invalid vertex count")});return c})}if(Hd){if(b(r)){if(r)return xd?new c(xd.thisDep,xd.contextDep,xd.propDep,function(a,b){var c=b.def(a.ELEMENTS,".vertCount-",a.OFFSET);d.optional(function(){a.assert(b,c+">=0","invalid vertex offset/element buffer too small")});return c}):f(function(d,a){return a.def(d.ELEMENTS,".vertCount")});var l=f(function(){return-1});
d.optional(function(){l.MISSING=!0});return l}var e=new c(r.thisDep||xd.thisDep,r.contextDep||xd.contextDep,r.propDep||xd.propDep,function(d,a){var b=d.ELEMENTS;return d.OFFSET?a.def(b,"?",b,".vertCount-",d.OFFSET,":-1"):a.def(b,"?",b,".vertCount:-1")});d.optional(function(){e.DYNAMIC=!0});return e}return p?new c(q.thisDep,q.contextDep,q.propDep,function(d,a){return a.def(d.shared.vao,".currentVAO?",d.shared.vao,".currentVAO.count:-1")}):null}(),t=l("instances",!1);return{elements:r,primitive:w,count:x,
instances:t,offset:xd,vao:q,vaoActive:p,elementsActive:Hd,"static":g}}function ba(b,c){var h=b["static"],m=b.dynamic,l={};Z.forEach(function(b){function e(d,c){if(b in h){var S=d(h[b]);l[k]=f(function(){return S})}else if(b in m){var F=m[b];l[k]=a(F,function(d,a){return c(d,a,d.invoke(a,F))})}}var k=H(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return e(function(a){d.commandType(a,
"boolean",b,c.commandStr);return a},function(a,c,f){d.optional(function(){a.assert(c,"typeof "+f+'==="boolean"',"invalid flag "+b,a.commandStr)});return f});case "depth.func":return e(function(a){d.commandParameter(a,q,"invalid "+b,c.commandStr);return q[a]},function(a,c,f){var h=a.constants.compareFuncs;d.optional(function(){a.assert(c,f+" in "+h,"invalid "+b+", must be one of "+n(q))});return c.def(h,"[",f,"]")});case "depth.range":return e(function(a){d.command(v(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",c.commandStr);return a},function(a,b,c){d.optional(function(){a.assert(b,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var f=b.def("+",c,"[0]"),h=b.def("+",c,"[1]");return[f,h]});case "blend.func":return e(function(a){d.commandType(a,"object","blend.func",c.commandStr);var b="srcRGB"in a?a.srcRGB:a.src,f="srcAlpha"in a?a.srcAlpha:
a.src,h="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;d.commandParameter(b,N,k+".srcRGB",c.commandStr);d.commandParameter(f,N,k+".srcAlpha",c.commandStr);d.commandParameter(h,N,k+".dstRGB",c.commandStr);d.commandParameter(a,N,k+".dstAlpha",c.commandStr);d.command(-1===Jc.indexOf(b+", "+h),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+h+")",c.commandStr);return[N[b],N[h],N[f],N[a]]},function(a,c,f){function h(S,e){var l=c.def('"',S,e,'" in ',f,"?",f,".",S,e,":",f,".",
S);d.optional(function(){a.assert(c,l+" in "+m,"invalid "+b+"."+S+e+", must be one of "+n(N))});return l}var m=a.constants.blendFuncs;d.optional(function(){a.assert(c,f+"&&typeof "+f+'==="object"',"invalid blend func, must be an object")});var S=h("src","RGB"),e=h("dst","RGB");d.optional(function(){a.assert(c,a.constants.invalidBlendCombinations+".indexOf("+S+'+", "+'+e+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var l=c.def(m,"[",S,"]"),k=c.def(m,"[",h("src","Alpha"),"]"),
F=c.def(m,"[",e,"]"),Ia=c.def(m,"[",h("dst","Alpha"),"]");return[l,F,k,Ia]});case "blend.equation":return e(function(a){if("string"===typeof a)return d.commandParameter(a,ta,"invalid "+b,c.commandStr),[ta[a],ta[a]];if("object"===typeof a)return d.commandParameter(a.rgb,ta,b+".rgb",c.commandStr),d.commandParameter(a.alpha,ta,b+".alpha",c.commandStr),[ta[a.rgb],ta[a.alpha]];d.commandRaise("invalid blend.equation",c.commandStr)},function(a,c,f){var h=a.constants.blendEquations,m=c.def(),S=c.def(),e=
a.cond("typeof ",f,'==="string"');d.optional(function(){function d(c,b,f){a.assert(c,f+" in "+h,"invalid "+b+", must be one of "+n(ta))}d(e.then,b,f);a.assert(e["else"],f+"&&typeof "+f+'==="object"',"invalid "+b);d(e["else"],b+".rgb",f+".rgb");d(e["else"],b+".alpha",f+".alpha")});e.then(m,"=",S,"=",h,"[",f,"];");e["else"](m,"=",h,"[",f,".rgb];",S,"=",h,"[",f,".alpha];");c(e);return[m,S]});case "blend.color":return e(function(a){d.command(v(a)&&4===a.length,"blend.color must be a 4d array",c.commandStr);
return R(4,function(d){return+a[d]})},function(a,c,b){d.optional(function(){a.assert(c,a.shared.isArrayLike+"("+b+")&&"+b+".length===4","blend.color must be a 4d array")});return R(4,function(a){return c.def("+",b,"[",a,"]")})});case "stencil.mask":return e(function(a){d.commandType(a,"number",k,c.commandStr);return a|0},function(a,c,b){d.optional(function(){a.assert(c,"typeof "+b+'==="number"',"invalid stencil.mask")});return c.def(b,"|0")});case "stencil.func":return e(function(a){d.commandType(a,
"object",k,c.commandStr);var f=a.cmp||"keep",h=a.ref||0;a="mask"in a?a.mask:-1;d.commandParameter(f,q,b+".cmp",c.commandStr);d.commandType(h,"number",b+".ref",c.commandStr);d.commandType(a,"number",b+".mask",c.commandStr);return[q[f],h,a]},function(a,c,b){var f=a.constants.compareFuncs;d.optional(function(){function d(){a.assert(c,Array.prototype.join.call(arguments,""),"invalid stencil.func")}d(b+"&&typeof ",b,'==="object"');d('!("cmp" in ',b,")||(",b,".cmp in ",f,")")});var h=c.def('"cmp" in ',
b,"?",f,"[",b,".cmp]",":",7680),m=c.def(b,".ref|0"),S=c.def('"mask" in ',b,"?",b,".mask|0:-1");return[h,m,S]});case "stencil.opFront":case "stencil.opBack":return e(function(a){d.commandType(a,"object",k,c.commandStr);var f=a.fail||"keep",h=a.zfail||"keep";a=a.zpass||"keep";d.commandParameter(f,z,b+".fail",c.commandStr);d.commandParameter(h,z,b+".zfail",c.commandStr);d.commandParameter(a,z,b+".zpass",c.commandStr);return["stencil.opBack"===b?1029:1028,z[f],z[h],z[a]]},function(a,c,f){function h(S){d.optional(function(){a.assert(c,
'!("'+S+'" in '+f+")||("+f+"."+S+" in "+m+")","invalid "+b+"."+S+", must be one of "+n(z))});return c.def('"',S,'" in ',f,"?",m,"[",f,".",S,"]:",7680)}var m=a.constants.stencilOps;d.optional(function(){a.assert(c,f+"&&typeof "+f+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,h("fail"),h("zfail"),h("zpass")]});case "polygonOffset.offset":return e(function(a){d.commandType(a,"object",k,c.commandStr);var b=a.factor|0;a=a.units|0;d.commandType(b,"number",k+".factor",c.commandStr);
d.commandType(a,"number",k+".units",c.commandStr);return[b,a]},function(a,c,f){d.optional(function(){a.assert(c,f+"&&typeof "+f+'==="object"',"invalid "+b)});var h=c.def(f,".factor|0"),m=c.def(f,".units|0");return[h,m]});case "cull.face":return e(function(a){var b=0;"front"===a?b=1028:"back"===a&&(b=1029);d.command(!!b,k,c.commandStr);return b},function(a,c,b){d.optional(function(){a.assert(c,b+'==="front"||'+b+'==="back"',"invalid cull.face")});return c.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return e(function(a){d.command("number"===
typeof a&&a>=G.lineWidthDims[0]&&a<=G.lineWidthDims[1],"invalid line width, must be a positive number between "+G.lineWidthDims[0]+" and "+G.lineWidthDims[1],c.commandStr);return a},function(a,c,b){d.optional(function(){a.assert(c,"typeof "+b+'==="number"&&'+b+">="+G.lineWidthDims[0]+"&&"+b+"<="+G.lineWidthDims[1],"invalid line width")});return b});case "frontFace":return e(function(a){d.commandParameter(a,da,k,c.commandStr);return da[a]},function(a,c,b){d.optional(function(){a.assert(c,b+'==="cw"||'+
b+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return c.def(b+'==="cw"?2304:2305')});case "colorMask":return e(function(a){d.command(v(a)&&4===a.length,"color.mask must be length 4 array",c.commandStr);return a.map(function(a){return!!a})},function(a,c,b){d.optional(function(){a.assert(c,a.shared.isArrayLike+"("+b+")&&"+b+".length===4","invalid color.mask")});return R(4,function(a){return"!!"+b+"["+a+"]"})});case "sample.coverage":return e(function(a){d.command("object"===typeof a&&a,
k,c.commandStr);var b="value"in a?a.value:1;a=!!a.invert;d.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",c.commandStr);return[b,a]},function(a,b,c){d.optional(function(){a.assert(b,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var f=b.def('"value" in ',c,"?+",c,".value:1"),h=b.def("!!",c,".invert");return[f,h]})}});return l}function va(b,c){var h=b["static"],m=b.dynamic,e={};n(h).forEach(function(a){var b=h[a],m;if("number"===typeof b||
"boolean"===typeof b)m=f(function(){return b});else if("function"===typeof b){var l=b._reglType;"texture2d"===l||"textureCube"===l?m=f(function(a){return a.link(b)}):"framebuffer"===l||"framebufferCube"===l?(d.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',c.commandStr),m=f(function(a){return a.link(b.color[0])})):d.commandRaise('invalid data for uniform "'+a+'"',c.commandStr)}else v(b)?m=f(function(c){return c.global.def("[",R(b.length,function(f){d.command("number"===
typeof b[f]||"boolean"===typeof b[f],"invalid uniform "+a,c.commandStr);return b[f]}),"]")}):d.commandRaise('invalid or missing data for uniform "'+a+'"',c.commandStr);m.value=b;e[a]=m});n(m).forEach(function(b){var c=m[b];e[b]=a(c,function(a,b){return a.invoke(b,c)})});return e}function La(b,c){var h=b["static"],m=b.dynamic,l={};n(h).forEach(function(a){var b=h[a],m=w.id(a),k=new ha;if(e(b))k.state=1,k.buffer=u.getBuffer(u.create(b,34962,!1,!0)),k.type=0;else{var F=u.getBuffer(b);if(F)k.state=1,
k.buffer=F,k.type=0;else if(d.command("object"===typeof b&&b,"invalid data for attribute "+a,c.commandStr),"constant"in b){var Ia=b.constant;k.buffer="null";k.state=2;"number"===typeof Ia?k.x=Ia:(d.command(v(Ia)&&0<Ia.length&&4>=Ia.length,"invalid constant for attribute "+a,c.commandStr),I.forEach(function(a,b){b<Ia.length&&(k[a]=Ia[b])}))}else{F=e(b.buffer)?u.getBuffer(u.create(b.buffer,34962,!1,!0)):u.getBuffer(b.buffer);d.command(!!F,'missing buffer for attribute "'+a+'"',c.commandStr);var g=b.offset|
0;d.command(0<=g,'invalid offset for attribute "'+a+'"',c.commandStr);var p=b.stride|0;d.command(0<=p&&256>p,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',c.commandStr);var q=b.size|0;d.command(!("size"in b)||0<q&&4>=q,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var r=!!b.normalized,x=0;"type"in b&&(d.commandParameter(b.type,A,"invalid type for attribute "+a,c.commandStr),x=A[b.type]);var t=b.divisor|0;d.optional(function(){"divisor"in b&&(d.command(0===
t||W,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),d.command(0<=t,'invalid divisor for attribute "'+a+'"',c.commandStr));var f=c.commandStr,h="buffer offset divisor normalized type size stride".split(" ");n(b).forEach(function(b){d.command(0<=h.indexOf(b),'unknown parameter "'+b+'" for attribute pointer "'+a+'" (valid parameters are '+h+")",f)})});k.buffer=F;k.state=1;k.size=q;k.normalized=r;k.type=x||F.dtype;k.offset=g;k.stride=p;k.divisor=t}}l[a]=f(function(a,
b){var c=a.attribCache;if(m in c)return c[m];var d={isStream:!1};n(k).forEach(function(a){d[a]=k[a]});k.buffer&&(d.buffer=a.link(k.buffer),d.type=d.type||d.buffer+".dtype");return c[m]=d})});n(m).forEach(function(b){var c=m[b];l[b]=a(c,function(a,f){function h(a){f(F[a],"=",m,".",a,"|0;")}var m=a.invoke(f,c),S=a.shared,e=a.constants,l=S.isBufferArgs,k=S.buffer;d.optional(function(){a.assert(f,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+l+"("+m+")||"+k+".getBuffer("+m+")||"+k+".getBuffer("+
m+".buffer)||"+l+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+S.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+b+'"')});var F={isStream:f.def(!1)},Ia=new ha;Ia.state=1;n(Ia).forEach(function(a){F[a]=f.def(""+Ia[a])});var g=F.buffer,p=F.type;f("if(",l,"(",m,")){",F.isStream,"=true;",g,"=",k,".createStream(",34962,",",m,");",p,"=",g,".dtype;","}else{",g,"=",k,".getBuffer(",m,");","if(",g,"){",p,"=",g,".dtype;",'}else if("constant" in ',m,"){",F.state,
"=",2,";","if(typeof "+m+'.constant === "number"){',F[I[0]],"=",m,".constant;",I.slice(1).map(function(a){return F[a]}).join("="),"=0;","}else{",I.map(function(a,b){return F[a]+"="+m+".constant.length>"+b+"?"+m+".constant["+b+"]:0;"}).join(""),"}}else{","if(",l,"(",m,".buffer)){",g,"=",k,".createStream(",34962,",",m,".buffer);","}else{",g,"=",k,".getBuffer(",m,".buffer);","}",p,'="type" in ',m,"?",e.glTypes,"[",m,".type]:",g,".dtype;",F.normalized,"=!!",m,".normalized;");h("size");h("offset");h("stride");
h("divisor");f("}}");f.exit("if(",F.isStream,"){",k,".destroyStream(",g,");","}");return F})});return l}function $b(b){var c=b["static"],d=b.dynamic,h={};n(c).forEach(function(a){var b=c[a];h[a]=f(function(a,c){return"number"===typeof b||"boolean"===typeof b?""+b:a.link(b)})});n(d).forEach(function(b){var c=d[b];h[b]=a(c,function(a,b){return a.invoke(b,c)})});return h}function Ua(a,b,f,h,m){function k(a){var b=p[a];b&&(r[a]=b)}var e=a["static"],l=a.dynamic;d.optional(function(){function a(c){n(c).forEach(function(a){d.command(0<=
b.indexOf(a),'unknown parameter "'+a+'"',m.commandStr)})}var b="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(Z);a(e);a(l)});var F=T(a,b),g=B(a,m),p=$a(a,g,m),q=ia(a,m),r=ba(a,m),w=t(a,m,F);k("viewport");k(H("scissor.box"));var x=0<n(r).length,g={framebuffer:g,draw:q,shader:w,state:r,dirty:x,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};g.profile=M(a,m);g.uniforms=va(f,m);g.drawVAO=g.scopeVAO=q.vao;if(!g.drawVAO&&w.program&&!F&&wa.angle_instanced_arrays&&
q["static"].elements){var z=!0;a=w.program.attributes.map(function(a){a=b["static"][a];z=z&&!!a;return a});if(z&&0<a.length){var v=la.getVAO(la.createVAO({attributes:a,elements:q["static"].elements}));g.drawVAO=new c(null,null,null,function(a,b){return a.link(v)});g.useVAO=!0}}F?g.useVAO=!0:g.attributes=La(b,m);g.context=$b(h,m);return g}function V(a,b,c){var d=a.shared.context,f=a.scope();n(c).forEach(function(h){b.save(d,"."+h);var m=c[h].append(a,b);Array.isArray(m)?f(d,".",h,"=[",m.join(),"];"):
f(d,".",h,"=",m,";")});b(f)}function pb(a,b,c,d){var f=a.shared,h=f.gl,m=f.framebuffer,k;fa&&(k=b.def(f.extensions,".webgl_draw_buffers"));var e=a.constants,f=e.drawBuffer,e=e.backBuffer;a=c?c.append(a,b):b.def(m,".next");d||b("if(",a,"!==",m,".cur){");b("if(",a,"){",h,".bindFramebuffer(",36160,",",a,".framebuffer);");fa&&b(k,".drawBuffersWEBGL(",f,"[",a,".colorAttachments.length]);");b("}else{",h,".bindFramebuffer(",36160,",null);");fa&&b(k,".drawBuffersWEBGL(",e,");");b("}",m,".cur=",a,";");d||
b("}")}function ca(a,b,c){var d=a.shared,f=d.gl,h=a.current,m=a.next,k=d.current,e=d.next,l=a.cond(k,".dirty");Z.forEach(function(b){b=H(b);if(!(b in c.state)){var d,S;if(b in m){d=m[b];S=h[b];var g=R(D[b].length,function(a){return l.def(d,"[",a,"]")});l(a.cond(g.map(function(a,b){return a+"!=="+S+"["+b+"]"}).join("||")).then(f,".",xa[b],"(",g,");",g.map(function(a,b){return S+"["+b+"]="+a}).join(";"),";"))}else d=l.def(e,".",b),g=a.cond(d,"!==",k,".",b),l(g),b in F?g(a.cond(d).then(f,".enable(",
F[b],");")["else"](f,".disable(",F[b],");"),k,".",b,"=",d,";"):g(f,".",xa[b],"(",d,");",k,".",b,"=",d,";")}});0===n(c.state).length&&l(k,".dirty=false;");b(l)}function ma(a,c,d,f){var h=a.shared,m=a.current,k=h.current,e=h.gl;l(n(d)).forEach(function(h){var l=d[h];if(!f||f(l)){var g=l.append(a,c);if(F[h]){var n=F[h];b(l)?g?c(e,".enable(",n,");"):c(e,".disable(",n,");"):c(a.cond(g).then(e,".enable(",n,");")["else"](e,".disable(",n,");"));c(k,".",h,"=",g,";")}else if(v(g)){var p=m[h];c(e,".",xa[h],
"(",g,");",g.map(function(a,b){return p+"["+b+"]="+a}).join(";"),";")}else c(e,".",xa[h],"(",g,");",k,".",h,"=",g,";")}})}function Rb(a,b){W&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function oc(a,c,d,f,h){function m(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function k(a){q=c.def();a(q,"=",m(),";");"string"===typeof h?a(g,".count+=",h,";"):a(g,".count++;");Pa&&(f?(r=c.def(),a(r,"=",p,".getNumPendingQueries();")):a(p,".beginQuery(",g,");"))}
function e(a){a(g,".cpuTime+=",m(),"-",q,";");Pa&&(f?a(p,".pushScopeStats(",r,",",p,".getNumPendingQueries(),",g,");"):a(p,".endQuery();"))}function l(a){var b=c.def(n,".profile");c(n,".profile=",a,";");c.exit(n,".profile=",b,";")}var F=a.shared,g=a.stats,n=F.current,p=F.timer;d=d.profile;var q,r;if(d){if(b(d)){d.enable?(k(c),e(c.exit),l("true")):l("false");return}d=d.append(a,c);l(d)}else d=c.def(n,".profile");F=a.block();k(F);c("if(",d,"){",F,"}");a=a.block();e(a);c.exit("if(",d,"){",a,"}")}function tc(a,
b,c,f,h){function m(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function k(c,d,f){function h(){b("if(!",g,".buffer){",l,".enableVertexAttribArray(",F,");}");var c=f.type,m;m=f.size?b.def(f.size,"||",d):d;b("if(",g,".type!==",c,"||",g,".size!==",m,"||",q.map(function(a){return g+"."+a+"!=="+f[a]}).join("||"),"){",l,".bindBuffer(",34962,",",n,".buffer);",l,".vertexAttribPointer(",[F,m,c,
f.normalized,f.stride,f.offset],");",g,".type=",c,";",g,".size=",m,";",q.map(function(a){return g+"."+a+"="+f[a]+";"}).join(""),"}");W&&(c=f.divisor,b("if(",g,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[F,c],");",g,".divisor=",c,";}"))}function m(){b("if(",g,".buffer){",l,".disableVertexAttribArray(",F,");",g,".buffer=null;","}if(",I.map(function(a,b){return g+"."+a+"!=="+p[b]}).join("||"),"){",l,".vertexAttrib4f(",F,",",p,");",I.map(function(a,b){return g+"."+a+"="+p[b]+";"}).join(""),
"}")}var l=e.gl,F=b.def(c,".location"),g=b.def(e.attributes,"[",F,"]");c=f.state;var n=f.buffer,p=[f.x,f.y,f.z,f.w],q=["buffer","normalized","offset","stride"];1===c?h():2===c?m():(b("if(",c,"===",1,"){"),h(),b("}else{"),m(),b("}"))}var e=a.shared;f.forEach(function(f){var e=f.name,l=c.attributes[e],F;if(l){if(!h(l))return;F=l.append(a,b)}else{if(!h(P))return;var g=a.scopeAttrib(e);d.optional(function(){a.assert(b,g+".state","missing attribute "+e)});F={};n(new ha).forEach(function(a){F[a]=b.def(g,
".",a)})}k(a.link(f),m(f.info.type),F)})}function vd(a,c,f,h,m,e){for(var l=a.shared,k=l.gl,F,g=0;g<h.length;++g){var n=h[g],p=n.name,q=n.info.type,r=f.uniforms[p],n=a.link(n)+".location",x;if(r){if(!m(r))continue;if(b(r)){var t=r.value;d.command(null!==t&&"undefined"!==typeof t,'missing uniform "'+p+'"',a.commandStr);if(35678===q||35680===q)d.command("function"===typeof t&&(35678===q&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===q&&("textureCube"===t._reglType||"framebufferCube"===
t._reglType)),"invalid texture for uniform "+p,a.commandStr),r=a.link(t._texture||t.color[0]._texture),c(k,".uniform1i(",n,",",r+".bind());"),c.exit(r,".unbind();");else if(35674===q||35675===q||35676===q){d.optional(function(){d.command(v(t),"invalid matrix for uniform "+p,a.commandStr);d.command(35674===q&&4===t.length||35675===q&&9===t.length||35676===q&&16===t.length,"invalid length for matrix uniform "+p,a.commandStr)});var r=a.global.def("new Float32Array(["+Array.prototype.slice.call(t)+"])"),
z=2;35675===q?z=3:35676===q&&(z=4);c(k,".uniformMatrix",z,"fv(",n,",false,",r,");")}else{switch(q){case 5126:d.commandType(t,"number","uniform "+p,a.commandStr);F="1f";break;case 35664:d.command(v(t)&&2===t.length,"uniform "+p,a.commandStr);F="2f";break;case 35665:d.command(v(t)&&3===t.length,"uniform "+p,a.commandStr);F="3f";break;case 35666:d.command(v(t)&&4===t.length,"uniform "+p,a.commandStr);F="4f";break;case 35670:d.commandType(t,"boolean","uniform "+p,a.commandStr);F="1i";break;case 5124:d.commandType(t,
"number","uniform "+p,a.commandStr);F="1i";break;case 35671:d.command(v(t)&&2===t.length,"uniform "+p,a.commandStr);F="2i";break;case 35667:d.command(v(t)&&2===t.length,"uniform "+p,a.commandStr);F="2i";break;case 35672:d.command(v(t)&&3===t.length,"uniform "+p,a.commandStr);F="3i";break;case 35668:d.command(v(t)&&3===t.length,"uniform "+p,a.commandStr);F="3i";break;case 35673:d.command(v(t)&&4===t.length,"uniform "+p,a.commandStr);F="4i";break;case 35669:d.command(v(t)&&4===t.length,"uniform "+p,
a.commandStr),F="4i"}c(k,".uniform",F,"(",n,",",v(t)?Array.prototype.slice.call(t):t,");")}continue}else x=r.append(a,c)}else{if(!m(P))continue;x=c.def(l.uniforms,"[",w.id(p),"]")}35678===q?(d(!Array.isArray(x),"must specify a scalar prop for textures"),c("if(",x,"&&",x,'._reglType==="framebuffer"){',x,"=",x,".color[0];","}")):35680===q&&(d(!Array.isArray(x),"must specify a scalar prop for cube maps"),c("if(",x,"&&",x,'._reglType==="framebufferCube"){',x,"=",x,".color[0];","}"));d.optional(function(){function b(d,
f){a.assert(c,d,'bad data or missing for uniform "'+p+'".  '+f)}function f(a){d(!Array.isArray(x),"must not specify an array type for uniform");b("typeof "+x+'==="'+a+'"',"invalid type, expected "+a)}function h(c,f){Array.isArray(x)?d(x.length===c,"must have length "+c):b(l.isArrayLike+"("+x+")&&"+x+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function m(c){d(!Array.isArray(x),"must not specify a value type");b("typeof "+x+'==="function"&&'+x+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(q){case 5124:f("number");break;case 35667:h(2,"number");break;case 35668:h(3,"number");break;case 35669:h(4,"number");break;case 5126:f("number");break;case 35664:h(2,"number");break;case 35665:h(3,"number");break;case 35666:h(4,"number");break;case 35670:f("boolean");break;case 35671:h(2,"boolean");break;case 35672:h(3,"boolean");break;case 35673:h(4,"boolean");break;case 35674:h(4,"number");break;case 35675:h(9,"number");break;case 35676:h(16,
"number");break;case 35678:m(3553);break;case 35680:m(34067)}});r=1;switch(q){case 35678:case 35680:r=c.def(x,"._texture");c(k,".uniform1i(",n,",",r,".bind());");c.exit(r,".unbind();");continue;case 5124:case 35670:F="1i";break;case 35667:case 35671:F="2i";r=2;break;case 35668:case 35672:F="3i";r=3;break;case 35669:case 35673:F="4i";r=4;break;case 5126:F="1f";break;case 35664:F="2f";r=2;break;case 35665:F="3f";r=3;break;case 35666:F="4f";r=4;break;case 35674:F="Matrix2fv";break;case 35675:F="Matrix3fv";
break;case 35676:F="Matrix4fv"}if("M"===F.charAt(0)){c(k,".uniform",F,"(",n,",");var n=Math.pow(q-35674+2,2),Da=a.global.def("new Float32Array(",n,")");Array.isArray(x)?c("false,(",R(n,function(a){return Da+"["+a+"]="+x[a]}),",",Da,")"):c("false,(Array.isArray(",x,")||",x," instanceof Float32Array)?",x,":(",R(n,function(a){return Da+"["+a+"]="+x+"["+a+"]"}),",",Da,")");c(");")}else{if(1<r){for(var z=[],y=[],xa=0;xa<r;++xa)Array.isArray(x)?y.push(x[xa]):y.push(c.def(x+"["+xa+"]")),e&&z.push(c.def());
e&&c("if(!",a.batchId,"||",z.map(function(a,b){return a+"!=="+y[b]}).join("||"),"){",z.map(function(a,b){return a+"="+y[b]+";"}).join(""));c(k,".uniform",F,"(",n,",",y.join(","),");")}else d(!Array.isArray(x),"uniform value must not be an array"),e&&(r=c.def(),c("if(!",a.batchId,"||",r,"!==",x,"){",r,"=",x,";")),c(k,".uniform",F,"(",n,",",x,");");e&&c("}")}}}function yc(a,c,f,h){function m(b){var d=n[b];return d?d.contextDep&&h.contextDynamic||d.propDep?d.append(a,f):d.append(a,c):c.def(g,".",b)}
function e(){function a(){f(w,".drawElementsInstancedANGLE(",[q,x,z,r+"<<(("+z+"-5121)>>1)",t],");")}function b(){f(w,".drawArraysInstancedANGLE(",[q,r,x,t],");")}p&&"null"!==p?Da?a():(f("if(",p,"){"),a(),f("}else{"),b(),f("}")):b()}function k(){function a(){f(F+".drawElements("+[q,x,z,r+"<<(("+z+"-5121)>>1)"]+");")}function b(){f(F+".drawArrays("+[q,r,x]+");")}p&&"null"!==p?Da?a():(f("if(",p,"){"),a(),f("}else{"),b(),f("}")):b()}var l=a.shared,F=l.gl,g=l.draw,n=h.draw,p=function(){var b=n.elements,
d=c;if(b){if(b.contextDep&&h.contextDynamic||b.propDep)d=f;b=b.append(a,d);n.elementsActive&&d("if("+b+")"+F+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=d.def(),d(b,"=",g,".","elements",";","if(",b,"){",F,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",l.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+l.vao,".currentVAO.elements);",oa?"":"if("+b+")"+F+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),q=m("primitive"),r=m("offset"),x=function(){var b=n.count,m,
e=c;if(b){if(b.contextDep&&h.contextDynamic||b.propDep)e=f;m=b.append(a,e);d.optional(function(){b.MISSING&&a.assert(c,"false","missing vertex count");b.DYNAMIC&&a.assert(e,m+">=0","missing vertex count")})}else m=e.def(g,".","count"),d.optional(function(){a.assert(e,m+">=0","missing vertex count")});return m}();if("number"===typeof x){if(0===x)return}else f("if(",x,"){"),f.exit("}");var t,w;W&&(t=m("instances"),w=a.instancing);var z=p+".type",Da=n.elements&&b(n.elements)&&!n.vaoActive;W&&("number"!==
typeof t||0<=t)?"string"===typeof t?(f("if(",t,">0){"),e(),f("}else if(",t,"<0){"),k(),f("}")):e():k()}function Y(a,b,c,f,h){var m=qa();h=m.proc("body",h);d.optional(function(){m.commandStr=b.commandStr;m.command=m.link(b.commandStr)});W&&(m.instancing=h.def(m.shared.extensions,".angle_instanced_arrays"));a(m,h,c,f);return m.compile().body}function J(a,b,c,d){Rb(a,b);c.useVAO?c.drawVAO?b(a.shared.vao,".setVAO(",c.drawVAO.append(a,b),");"):b(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(b(a.shared.vao,
".setVAO(null);"),tc(a,b,c,d.attributes,function(){return!0}));vd(a,b,c,d.uniforms,function(){return!0},!1);yc(a,b,b,c)}function ja(a,b){var c=a.proc("draw",1);Rb(a,c);V(a,c,b.context);pb(a,c,b.framebuffer);ca(a,c,b);ma(a,c,b.state);oc(a,c,b,!1,!0);var d=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",d,".program);");if(b.shader.program)J(a,c,b,b.shader.program);else{c(a.shared.vao,".setVAO(null);");var f=a.global.def("{}"),h=c.def(d,".id"),m=c.def(f,"[",h,"]");c(a.cond(m).then(m,".call(this,a0);")["else"](m,
"=",f,"[",h,"]=",a.link(function(c){return Y(J,a,b,c,1)}),"(",d,");",m,".call(this,a0);"))}0<n(b.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Ca(a,b,c,d){function f(){return!0}a.batchId="a1";Rb(a,b);tc(a,b,c,d.attributes,f);vd(a,b,c,d.uniforms,f,!1);yc(a,b,b,c)}function Lb(a,b,c,d){function f(a){return a.contextDep&&m||a.propDep}function h(a){return!f(a)}Rb(a,b);var m=c.contextDep,e=b.def(),l=b.def();a.shared.props=l;a.batchId=e;var k=a.scope(),
F=a.scope();b(k.entry,"for(",e,"=0;",e,"<","a1",";++",e,"){",l,"=","a0","[",e,"];",F,"}",k.exit);c.needsContext&&V(a,F,c.context);c.needsFramebuffer&&pb(a,F,c.framebuffer);ma(a,F,c.state,f);c.profile&&f(c.profile)&&oc(a,F,c,!1,!0);d?(c.useVAO?c.drawVAO?f(c.drawVAO)?F(a.shared.vao,".setVAO(",c.drawVAO.append(a,F),");"):k(a.shared.vao,".setVAO(",c.drawVAO.append(a,k),");"):k(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(k(a.shared.vao,".setVAO(null);"),tc(a,k,c,d.attributes,h),tc(a,F,c,d.attributes,
f)),vd(a,k,c,d.uniforms,h,!1),vd(a,F,c,d.uniforms,f,!0),yc(a,k,F,c)):(b=a.global.def("{}"),d=c.shader.progVar.append(a,F),l=F.def(d,".id"),k=F.def(b,"[",l,"]"),F(a.shared.gl,".useProgram(",d,".program);","if(!",k,"){",k,"=",b,"[",l,"]=",a.link(function(b){return Y(Ca,a,c,b,2)}),"(",d,");}",k,".call(this,a0[",e,"],",e,");"))}function ab(a,b){function c(a){return a.contextDep&&f||a.propDep}var d=a.proc("batch",2);a.batchId="0";Rb(a,d);var f=!1,h=!0;n(b.context).forEach(function(a){f=f||b.context[a].propDep});
f||(V(a,d,b.context),h=!1);var m=b.framebuffer,e=!1;m?(m.propDep?f=e=!0:m.contextDep&&f&&(e=!0),e||pb(a,d,m)):pb(a,d,null);b.state.viewport&&b.state.viewport.propDep&&(f=!0);ca(a,d,b);ma(a,d,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||oc(a,d,b,!1,"a1");b.contextDep=f;b.needsContext=h;b.needsFramebuffer=e;h=b.shader.progVar;if(h.contextDep&&f||h.propDep)Lb(a,d,b,null);else if(h=h.append(a,d),d(a.shared.gl,".useProgram(",h,".program);"),b.shader.program)Lb(a,d,b,b.shader.program);else{d(a.shared.vao,
".setVAO(null);");var m=a.global.def("{}"),e=d.def(h,".id"),k=d.def(m,"[",e,"]");d(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",m,"[",e,"]=",a.link(function(c){return Y(Lb,a,b,c,2)}),"(",h,");",k,".call(this,a0,a1);"))}0<n(b.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function Vc(a,b){function c(h){var m=b.shader[h];m&&d.set(f.shader,"."+h,m.append(a,d))}var d=a.proc("scope",3);a.batchId="a2";var f=a.shared,h=f.current;V(a,d,b.context);
b.framebuffer&&b.framebuffer.append(a,d);l(n(b.state)).forEach(function(c){var h=b.state[c].append(a,d);v(h)?h.forEach(function(b,f){d.set(a.next[c],"["+f+"]",b)}):d.set(f.next,"."+c,h)});oc(a,d,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var h=b.draw[c];h&&d.set(f.draw,"."+c,""+h.append(a,d))});n(b.uniforms).forEach(function(c){var h=b.uniforms[c].append(a,d);Array.isArray(h)&&(h="["+h.join()+"]");d.set(f.uniforms,"["+w.id(c)+"]",h)});n(b.attributes).forEach(function(c){var f=
b.attributes[c].append(a,d),h=a.scopeAttrib(c);n(new ha).forEach(function(a){d.set(h,"."+a,f[a])})});b.scopeVAO&&d.set(f.vao,".targetVAO",b.scopeVAO.append(a,d));c("vert");c("frag");0<n(b.state).length&&(d(h,".dirty=true;"),d.exit(h,".dirty=true;"));d("a1(",a.shared.context,",a0,",a.batchId,");")}function E(a){if("object"===typeof a&&!v(a)){for(var b=n(a),c=0;c<b.length;++c)if(C.isDynamic(a[b[c]]))return!0;return!1}}function y(b,c,d){function f(a,b){e.forEach(function(c){var d=h[c];C.isDynamic(d)&&
(d=a.invoke(b,d),b(g,".",c,"=",d,";"))})}var h=c["static"][d];if(h&&E(h)){var m=b.global,e=n(h),k=!1,l=!1,F=!1,g=b.global.def("{}");e.forEach(function(c){var d=h[c];if(C.isDynamic(d))"function"===typeof d&&(d=h[c]=C.unbox(d)),c=a(d,null),k=k||c.thisDep,F=F||c.propDep,l=l||c.contextDep;else{m(g,".",c,"=");switch(typeof d){case "number":m(d);break;case "string":m('"',d,'"');break;case "object":Array.isArray(d)&&m("[",d.join(),"]");break;default:m(b.link(d))}m(";")}});c.dynamic[d]=new C.DynamicVariable(4,
{thisDep:k,contextDep:l,propDep:F,ref:g,append:f});delete c["static"][d]}}var ha=la.Record,ta={add:32774,subtract:32778,"reverse subtract":32779};wa.ext_blend_minmax&&(ta.min=32775,ta.max=32776);var W=wa.angle_instanced_arrays,fa=wa.webgl_draw_buffers,oa=wa.oes_vertex_array_object,D={dirty:!0,profile:X.profile},x={},Z=[],F={},xa={};L("dither",3024);L("blend.enable",3042);Q("blend.color","blendColor",[0,0,0,0]);Q("blend.equation","blendEquationSeparate",[32774,32774]);Q("blend.func","blendFuncSeparate",
[1,0,1,0]);L("depth.enable",2929,!0);Q("depth.func","depthFunc",513);Q("depth.range","depthRange",[0,1]);Q("depth.mask","depthMask",!0);Q("colorMask","colorMask",[!0,!0,!0,!0]);L("cull.enable",2884);Q("cull.face","cullFace",1029);Q("frontFace","frontFace",2305);Q("lineWidth","lineWidth",1);L("polygonOffset.enable",32823);Q("polygonOffset.offset","polygonOffset",[0,0]);L("sample.alpha",32926);L("sample.enable",32928);Q("sample.coverage","sampleCoverage",[1,!1]);L("stencil.enable",2960);Q("stencil.mask",
"stencilMask",-1);Q("stencil.func","stencilFunc",[519,0,-1]);Q("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);Q("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);L("scissor.enable",3089);Q("scissor.box","scissor",[0,0,r.drawingBufferWidth,r.drawingBufferHeight]);Q("viewport","viewport",[0,0,r.drawingBufferWidth,r.drawingBufferHeight]);var Da={gl:r,context:sa,strings:w,next:x,current:D,draw:hc,elements:h,buffer:u,shader:gb,attributes:la.state,vao:la,uniforms:ka,framebuffer:U,
extensions:wa,timer:Pa,isBufferArgs:e},m={primTypes:O,compareFuncs:q,blendFuncs:N,blendEquations:ta,stencilOps:z,glTypes:A,orientationType:da};d.optional(function(){Da.isArrayLike=v});fa&&(m.backBuffer=[1029],m.drawBuffer=R(G.maxDrawbuffers,function(a){return 0===a?[0]:R(a,function(a){return 36064+a})}));var rc=0;return{next:x,current:D,procs:function(){var a=qa(),b=a.proc("poll"),c=a.proc("refresh"),d=a.block();b(d);c(d);var f=a.shared,h=f.gl,m=f.next,e=f.current;d(e,".dirty=false;");pb(a,b);pb(a,
c,null,!0);var k;W&&(k=a.link(W));wa.oes_vertex_array_object&&c(a.link(wa.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<G.maxAttributes;++l){var g=c.def(f.attributes,"[",l,"]"),p=a.cond(g,".buffer");p.then(h,".enableVertexAttribArray(",l,");",h,".bindBuffer(",34962,",",g,".buffer.buffer);",h,".vertexAttribPointer(",l,",",g,".size,",g,".type,",g,".normalized,",g,".stride,",g,".offset);")["else"](h,".disableVertexAttribArray(",l,");",h,".vertexAttrib4f(",l,",",g,".x,",g,".y,",
g,".z,",g,".w);",g,".buffer=null;");c(p);W&&c(k,".vertexAttribDivisorANGLE(",l,",",g,".divisor);")}c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");n(F).forEach(function(f){var k=F[f],l=d.def(m,".",f),g=a.block();g("if(",l,"){",h,".enable(",k,")}else{",h,".disable(",k,")}",e,".",f,"=",l,";");c(g);b("if(",l,"!==",e,".",f,"){",g,"}")});n(xa).forEach(function(f){var k=xa[f],l=D[f],F,g,n=a.block();n(h,".",k,"(");v(l)?(k=l.length,F=a.global.def(m,".",f),g=a.global.def(e,
".",f),n(R(k,function(a){return F+"["+a+"]"}),");",R(k,function(a){return g+"["+a+"]="+F+"["+a+"];"}).join("")),b("if(",R(k,function(a){return F+"["+a+"]!=="+g+"["+a+"]"}).join("||"),"){",n,"}")):(F=d.def(m,".",f),g=d.def(e,".",f),n(F,");",e,".",f,"=",F,";"),b("if(",F,"!==",g,"){",n,"}"));c(n)});return a.compile()}(),compile:function(a,b,c,d,f){var h=qa();h.stats=h.link(f);n(b["static"]).forEach(function(a){y(h,b,a)});db.forEach(function(b){y(h,a,b)});var m=Ua(a,b,c,d,h);ja(h,m);Vc(h,m);ab(h,m);return p(h.compile(),
{destroy:function(){m.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(u,B,ea){function e(b,c){this.id=a++;this.type=b;this.data=c}function l(a){if(0===a.length)return[];var b=a.charAt(0),c=a.charAt(a.length-1);if(1<a.length&&b===c&&('"'===b||"'"===
b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return l(a.substr(0,b.index)).concat(l(b[1])).concat(l(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(c=0;c<b.length;++c)a=a.concat(l(b[c]));return a}function c(a){return"["+l(a).join("][")+"]"}function b(a,c){if("function"===typeof a)return new e(0,a);if("number"===typeof a||
"boolean"===typeof a)return new e(5,a);if(Array.isArray(a))return new e(6,a.map(function(a,f){return b(a,c+"["+f+"]")}));if(a instanceof e)return a;f(!1,"invalid option type in uniform "+c)}var f=u("./util/check"),a=0;B.exports={DynamicVariable:e,define:function(a,b){return new e(a,c(b+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof e},unbox:b,accessor:c}},{"./util/check":21}],10:[function(u,B,ea){var e=u("./util/check"),l=u("./util/is-typed-array"),c=u("./util/is-ndarray"),
b=u("./util/values"),f=u("./constants/primitives.json"),a=u("./constants/usage.json");B.exports=function(n,d,p,aa){function R(a){this.id=C++;v[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function r(a,b,f,r,q,z,k){a.buffer.bind();var v;b?((v=k)||l(b)&&(!c(b)||l(b.data))||(v=d.oes_element_index_uint?5125:5123),p._initBuffer(a.buffer,b,f,v,3)):(n.bufferData(34963,z,f),a.buffer.dtype=v||5121,a.buffer.usage=f,a.buffer.dimension=3,a.buffer.byteLength=z);v=k;if(!k){switch(a.buffer.dtype){case 5121:case 5120:v=
5121;break;case 5123:case 5122:v=5123;break;case 5125:case 5124:v=5125;break;default:e.raise("unsupported type for element array")}a.buffer.dtype=v}a.type=v;e(5125!==v||!!d.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");b=q;0>b&&(b=a.buffer.byteLength,5123===v?b>>=1:5125===v&&(b>>=2));a.vertCount=b;b=r;0>r&&(b=4,r=a.buffer.dimension,1===r&&(b=0),2===r&&(b=1),3===r&&(b=4));a.primType=b}function wa(a){aa.elementsCount--;e(null!==a.buffer,"must not double destroy elements");
delete v[a.id];a.buffer.destroy();a.buffer=null}var v={},C=0,O={uint8:5121,uint16:5123};d.oes_element_index_uint&&(O.uint32=5125);R.prototype.bind=function(){this.buffer.bind()};var A=[];return{create:function(b,d){function n(b){if(b)if("number"===typeof b)v(b),q.primType=4,q.vertCount=b|0,q.type=5121;else{var d=null,p=35044,R=-1,C=-1,w=0,aa=0;if(Array.isArray(b)||l(b)||c(b))d=b;else if(e.type(b,"object","invalid arguments for elements"),"data"in b&&(d=b.data,e(Array.isArray(d)||l(d)||c(d),"invalid data for element buffer")),
"usage"in b&&(e.parameter(b.usage,a,"invalid element buffer usage"),p=a[b.usage]),"primitive"in b&&(e.parameter(b.primitive,f,"invalid element buffer primitive"),R=f[b.primitive]),"count"in b&&(e("number"===typeof b.count&&0<=b.count,"invalid vertex count for elements"),C=b.count|0),"type"in b&&(e.parameter(b.type,O,"invalid buffer type"),aa=O[b.type]),"length"in b)w=b.length|0;else if(w=C,5123===aa||5122===aa)w*=2;else if(5125===aa||5124===aa)w*=4;r(q,d,p,R,C,w,aa)}else v(),q.primType=4,q.vertCount=
0,q.type=5121;return n}var v=p.create(null,34963,!0),q=new R(v._buffer);aa.elementsCount++;n(b);n._reglType="elements";n._elements=q;n.subdata=function(a,b){v.subdata(a,b);return n};n.destroy=function(){wa(q)};return n},createStream:function(a){var b=A.pop();b||(b=new R(p.create(null,34963,!0,!1)._buffer));r(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){A.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof R?a._elements:null},clear:function(){b(v).forEach(wa)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(u,B,ea){var e=u("./util/sorted-object-keys"),l=u("./util/check");B.exports=function(c,b){function f(b){l.type(b,"string","extension name must be string");b=b.toLowerCase();var d;try{d=a[b]=c.getExtension(b)}catch(f){}return!!d}for(var a={},n=0;n<b.extensions.length;++n){var d=b.extensions[n];if(!f(d))return b.onDestroy(),b.onDone('"'+d+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}b.optionalExtensions.forEach(f);return{extensions:a,restore:function(){e(a).forEach(function(b){if(a[b]&&!f(b))throw Error("(regl): error restoring extension "+b);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(u,B,ea){var e=u("./util/check"),l=u("./util/values"),c=u("./util/extend"),b=[6407,6408],f=[];f[6408]=4;f[6407]=3;var a=[];a[5121]=1;a[5126]=4;a[36193]=2;var n=[32854,32855,36194,35907,34842,34843,34836],d={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};B.exports=function(p,aa,R,r,wa,v){function C(a,b,c){this.target=a;this.texture=b;this.renderbuffer=c;var d=a=0;b?(a=b.width,d=b.height):c&&(a=c.width,d=c.height);this.width=a;this.height=d}function O(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function A(a,b,c){if(a){if(a.texture){a=a.texture._texture;var d=Math.max(1,a.height);e(Math.max(1,a.width)===b&&d===c,"inconsistent width/height for supplied texture")}else a=
a.renderbuffer._renderbuffer,e(a.width===b&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function I(a,b){b&&(b.texture?p.framebufferTexture2D(36160,a,b.target,b.texture._texture.texture,0):p.framebufferRenderbuffer(36160,a,36161,b.renderbuffer._renderbuffer.renderbuffer))}function db(a){var b=3553,c=null,d=null,f=a;"object"===typeof a&&(f=a.data,"target"in a&&(b=a.target|0));e.type(f,"function","invalid attachment data");a=f._reglType;"texture2d"===a?(c=f,e(3553===b)):
"textureCube"===a?(c=f,e(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===a?(d=f,b=36161):e.raise("invalid regl object for attachment");return new C(b,c,d)}function N(a,b,c,d,f){if(c)return a=r.create2D({width:a,height:b,format:d,type:f}),a._texture.refCount=0,new C(3553,a,null);a=wa.create({width:a,height:b,format:d});a._renderbuffer.refCount=0;return new C(36161,null,a)}function u(a){return a&&(a.texture||a.renderbuffer)}function q(a,b,c){a&&(a.texture?a.texture.resize(b,c):a.renderbuffer&&
a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function z(){this.id=h++;g[this.id]=this;this.framebuffer=p.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function k(a){a.colorAttachments.forEach(O);O(a.depthAttachment);O(a.stencilAttachment);O(a.depthStencilAttachment)}function da(a){var b=a.framebuffer;e(b,"must not double destroy framebuffer");p.deleteFramebuffer(b);a.framebuffer=null;v.framebufferCount--;
delete g[a.id]}function P(a){var b;p.bindFramebuffer(36160,a.framebuffer);var c=a.colorAttachments;for(b=0;b<c.length;++b)I(36064+b,c[b]);for(b=c.length;b<R.maxColorAttachments;++b)p.framebufferTexture2D(36160,36064+b,3553,null,0);p.framebufferTexture2D(36160,33306,3553,null,0);p.framebufferTexture2D(36160,36096,3553,null,0);p.framebufferTexture2D(36160,36128,3553,null,0);I(36096,a.depthAttachment);I(36128,a.stencilAttachment);I(33306,a.depthStencilAttachment);a=p.checkFramebufferStatus(36160);p.isContextLost()||
36053===a||e.raise("framebuffer configuration not supported, status = "+d[a]);p.bindFramebuffer(36160,w.next?w.next.framebuffer:null);w.cur=w.next;p.getError()}function K(d,h){function l(c,d){var h;e(w.next!==g,"can not update framebuffer which is currently in use");var p=0,q=0,r=!0,v=!0;h=null;var z=!0,C="rgba",wa="uint8",da=1,O=null,t=null,K=null,I=!1;if("number"===typeof c)p=c|0,q=d|0||p;else if(c){e.type(c,"object","invalid arguments for framebuffer");"shape"in c?(q=c.shape,e(Array.isArray(q)&&
2<=q.length,"invalid shape for framebuffer"),p=q[0],q=q[1]):("radius"in c&&(p=q=c.radius),"width"in c&&(p=c.width),"height"in c&&(q=c.height));if("color"in c||"colors"in c)h=c.color||c.colors,Array.isArray(h)&&e(1===h.length||aa.webgl_draw_buffers,"multiple render targets not supported");if(!h){"colorCount"in c&&(da=c.colorCount|0,e(0<da,"invalid color buffer count"));"colorTexture"in c&&(z=!!c.colorTexture,C="rgba4");if("colorType"in c){wa=c.colorType;if(z)e(aa.oes_texture_float||!("float"===wa||
"float32"===wa),"you must enable OES_texture_float in order to use floating point framebuffer objects"),e(aa.oes_texture_half_float||!("half float"===wa||"float16"===wa),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===wa||"float16"===wa)e(aa.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),C="rgba16f";else if("float"===wa||"float32"===wa)e(aa.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
C="rgba32f";e.oneOf(wa,ga,"invalid color type")}"colorFormat"in c&&(C=c.colorFormat,0<=na.indexOf(C)?z=!0:0<=G.indexOf(C)?z=!1:e.optional(function(){if(z)e.oneOf(c.colorFormat,na,"invalid color format for texture");else e.oneOf(c.colorFormat,G,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)I=!(!c.depthTexture&&!c.depthStencilTexture),e(!I||aa.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?r=
c.depth:(O=c.depth,v=!1));"stencil"in c&&("boolean"===typeof c.stencil?v=c.stencil:(t=c.stencil,r=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?r=v=c.depthStencil:(K=c.depthStencil,v=r=!1))}else p=q=1;var U=null,ka=null,B=null,Ua=null;if(Array.isArray(h))U=h.map(db);else if(h)U=[db(h)];else for(U=Array(da),h=0;h<da;++h)U[h]=N(p,q,z,C,wa);e(aa.webgl_draw_buffers||1>=U.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");e(U.length<=R.maxColorAttachments,
"too many color attachments, not supported");p=p||U[0].width;q=q||U[0].height;O?ka=db(O):r&&!v&&(ka=N(p,q,I,"depth","uint32"));t?B=db(t):v&&!r&&(B=N(p,q,!1,"stencil","uint8"));K?Ua=db(K):!O&&!t&&v&&r&&(Ua=N(p,q,I,"depth stencil","depth stencil"));e(1>=!!O+!!t+!!K,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");r=null;for(h=0;h<U.length;++h)A(U[h],p,q),e(!U[h]||U[h].texture&&0<=b.indexOf(U[h].texture._texture.format)||U[h].renderbuffer&&0<=n.indexOf(U[h].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+h+" is invalid"),U[h]&&U[h].texture&&(v=f[U[h].texture._texture.format]*a[U[h].texture._texture.type],null===r?r=v:e(r===v,"all color attachments much have the same number of bits per pixel."));A(ka,p,q);e(!ka||ka.texture&&6402===ka.texture._texture.format||ka.renderbuffer&&33189===ka.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");A(B,p,q);e(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
A(Ua,p,q);e(!Ua||Ua.texture&&34041===Ua.texture._texture.format||Ua.renderbuffer&&34041===Ua.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");k(g);g.width=p;g.height=q;g.colorAttachments=U;g.depthAttachment=ka;g.stencilAttachment=B;g.depthStencilAttachment=Ua;l.color=U.map(u);l.depth=u(ka);l.stencil=u(B);l.depthStencil=u(Ua);l.width=g.width;l.height=g.height;P(g);return l}var g=new z;v.framebufferCount++;l(d,h);return c(l,{resize:function(a,b){e(w.next!==
g,"can not resize a framebuffer which is currently in use");var c=Math.max(a|0,1),d=Math.max(b|0||c,1);if(c===g.width&&d===g.height)return l;for(var f=g.colorAttachments,h=0;h<f.length;++h)q(f[h],c,d);q(g.depthAttachment,c,d);q(g.stencilAttachment,c,d);q(g.depthStencilAttachment,c,d);g.width=l.width=c;g.height=l.height=d;P(g);return l},_reglType:"framebuffer",_framebuffer:g,destroy:function(){da(g);k(g)},use:function(a){w.setFBO({framebuffer:l},a)}})}var w={cur:null,next:null,dirty:!1,setFBO:null},
na=["rgba"],G=["rgba4","rgb565","rgb5 a1"];aa.ext_srgb&&G.push("srgba");aa.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f");aa.webgl_color_buffer_float&&G.push("rgba32f");var ga=["uint8"];aa.oes_texture_half_float&&ga.push("half float","float16");aa.oes_texture_float&&ga.push("float","float32");var h=0,g={};return c(w,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof z)?a:null},create:K,createCube:function(a){function b(a){var f;
e(0>d.indexOf(w.next),"can not update framebuffer which is currently in use");var h={color:null},l=0,k=null;f="rgba";var g="uint8",n=1;if("number"===typeof a)l=a|0;else if(a){e.type(a,"object","invalid arguments for framebuffer");"shape"in a?(l=a.shape,e(Array.isArray(l)&&2<=l.length,"invalid shape for framebuffer"),e(l[0]===l[1],"cube framebuffer must be square"),l=l[0]):("radius"in a&&(l=a.radius|0),"width"in a?(l=a.width|0,"height"in a&&e(a.height===l,"must be square")):"height"in a&&(l=a.height|
0));if("color"in a||"colors"in a)k=a.color||a.colors,Array.isArray(k)&&e(1===k.length||aa.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in a&&(n=a.colorCount|0,e(0<n,"invalid color buffer count")),"colorType"in a&&(e.oneOf(a.colorType,ga,"invalid color type"),g=a.colorType),"colorFormat"in a&&(f=a.colorFormat,e.oneOf(a.colorFormat,na,"invalid color format for texture")));"depth"in a&&(h.depth=a.depth);"stencil"in a&&(h.stencil=a.stencil);"depthStencil"in a&&(h.depthStencil=
a.depthStencil)}else l=1;if(k)if(Array.isArray(k))for(a=[],f=0;f<k.length;++f)a[f]=k[f];else a=[k];else for(a=Array(n),k={radius:l,format:f,type:g},f=0;f<n;++f)a[f]=r.createCube(k);h.color=Array(a.length);for(f=0;f<a.length;++f)n=a[f],e("function"===typeof n&&"textureCube"===n._reglType,"invalid cube map"),l=l||n.width,e(n.width===l&&n.height===l,"invalid cube map shape"),h.color[f]={target:34069,data:a[f]};for(f=0;6>f;++f){for(n=0;n<a.length;++n)h.color[n].target=34069+f;0<f&&(h.depth=d[0].depth,
h.stencil=d[0].stencil,h.depthStencil=d[0].depthStencil);if(d[f])d[f](h);else d[f]=K(h)}return c(b,{width:l,height:l,color:a})}var d=Array(6);b(a);return c(b,{faces:d,resize:function(a){var c=a|0;e(0<c&&c<=R.maxCubeMapSize,"invalid radius for cube fbo");if(c===b.width)return b;var f=b.color;for(a=0;a<f.length;++a)f[a].resize(c);for(a=0;6>a;++a)d[a].resize(c);b.width=b.height=c;return b},_reglType:"framebufferCube",destroy:function(){d.forEach(function(a){a.destroy()})}})},clear:function(){l(g).forEach(da)},
restore:function(){w.cur=null;w.next=null;w.dirty=!0;l(g).forEach(function(a){a.framebuffer=p.createFramebuffer();P(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(u,B,ea){var e=u("./util/sorted-object-keys"),l=u("./util/pool");B.exports=function(c,b){var f=1;b.ext_texture_filter_anisotropic&&(f=c.getParameter(34047));var a=1,n=1;b.webgl_draw_buffers&&(a=c.getParameter(34852),n=c.getParameter(36063));var d=!!b.oes_texture_float;if(d){d=c.createTexture();c.bindTexture(3553,
d);c.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var p=c.createFramebuffer();c.bindFramebuffer(36160,p);c.framebufferTexture2D(36160,36064,3553,d,0);c.bindTexture(3553,null);if(36053!==c.checkFramebufferStatus(36160))d=!1;else{c.viewport(0,0,1,1);c.clearColor(1,0,0,1);c.clear(16384);var aa=l.allocType(5126,4);c.readPixels(0,0,1,1,6408,5126,aa);c.getError()?d=!1:(c.deleteFramebuffer(p),c.deleteTexture(d),d=1===aa[0]);l.freeType(aa)}}aa=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(aa=c.createTexture(),p=l.allocType(5121,36),c.activeTexture(33984),c.bindTexture(34067,aa),c.texImage2D(34069,0,6408,3,3,0,6408,5121,p),l.freeType(p),c.bindTexture(34067,null),c.deleteTexture(aa),aa=!c.getError());return{colorBits:[c.getParameter(3410),c.getParameter(3411),c.getParameter(3412),c.getParameter(3413)],depthBits:c.getParameter(3414),stencilBits:c.getParameter(3415),subpixelBits:c.getParameter(3408),extensions:e(b).filter(function(a){return!!b[a]}),
maxAnisotropic:f,maxDrawbuffers:a,maxColorAttachments:n,pointSizeDims:c.getParameter(33901),lineWidthDims:c.getParameter(33902),maxViewportDims:c.getParameter(3386),maxCombinedTextureUnits:c.getParameter(35661),maxCubeMapSize:c.getParameter(34076),maxRenderbufferSize:c.getParameter(34024),maxTextureUnits:c.getParameter(34930),maxTextureSize:c.getParameter(3379),maxAttributes:c.getParameter(34921),maxVertexUniforms:c.getParameter(36347),maxVertexTextureUnits:c.getParameter(35660),maxVaryingVectors:c.getParameter(36348),
maxFragmentUniforms:c.getParameter(36349),glsl:c.getParameter(35724),renderer:c.getParameter(7937),vendor:c.getParameter(7936),version:c.getParameter(7938),readFloat:d,npotTextureCube:aa}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(u,B,ea){var e=u("./util/check"),l=u("./util/is-typed-array");B.exports=function(c,b,f,a,n,d,p){function aa(r){var aa;null===b.next?(e(n.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
aa=5121):(e(null!==b.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),aa=b.next.colorAttachments[0].texture._texture.type,e.optional(function(){d.oes_texture_float?(e(5121===aa||5126===aa,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===aa&&e(p.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):e(5121===aa,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var v=0,C=0,R=a.framebufferWidth,A=a.framebufferHeight,I=null;l(r)?I=r:r&&(e.type(r,"object","invalid arguments to regl.read()"),v=r.x|0,C=r.y|0,e(0<=v&&v<a.framebufferWidth,"invalid x offset for regl.read"),e(0<=C&&C<a.framebufferHeight,"invalid y offset for regl.read"),R=(r.width||a.framebufferWidth-v)|0,A=(r.height||a.framebufferHeight-C)|0,I=r.data||null);I&&(5121===aa?e(I instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===aa&&e(I instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));e(0<R&&R+v<=a.framebufferWidth,"invalid width for read pixels");e(0<A&&A+C<=a.framebufferHeight,"invalid height for read pixels");f();r=R*A*4;I||(5121===aa?I=new Uint8Array(r):5126===aa&&(I=I||new Float32Array(r)));e.isTypedArray(I,"data buffer for regl.read() must be a typedarray");e(I.byteLength>=r,"data buffer for regl.read() too small");c.pixelStorei(3333,4);c.readPixels(v,C,R,A,6408,aa,I);return I}
function R(a){var c;b.setFBO({framebuffer:a.framebuffer},function(){c=aa(a)});return c}return function(a){return a&&"framebuffer"in a?R(a):aa(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(u,B,ea){var e=u("./util/sorted-object-keys"),l=u("./util/check"),c=u("./util/values"),b=[];b[32854]=2;b[32855]=2;b[36194]=2;b[33189]=2;b[36168]=1;b[34041]=4;b[35907]=4;b[34836]=16;b[34842]=8;b[34843]=6;B.exports=function(f,a,n,d,p){function aa(a){this.id=v++;this.refCount=1;this.renderbuffer=
a;this.format=32854;this.height=this.width=0;p.profile&&(this.stats={size:0})}function R(a){var b=a.renderbuffer;l(b,"must not double destroy renderbuffer");f.bindRenderbuffer(36161,null);f.deleteRenderbuffer(b);a.renderbuffer=null;a.refCount=0;delete C[a.id];d.renderbufferCount--}var r={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(r.srgba=35907);a.ext_color_buffer_half_float&&(r.rgba16f=34842,r.rgb16f=34843);a.webgl_color_buffer_float&&(r.rgba32f=
34836);var wa=[];e(r).forEach(function(a){wa[r[a]]=a});var v=0,C={};aa.prototype.decRef=function(){0>=--this.refCount&&R(this)};p.profile&&(d.getTotalRenderbufferSize=function(){var a=0;e(C).forEach(function(b){a+=C[b].stats.size});return a});return{create:function(a,c){function e(a,c){var d=0,z=0,k=32854;"object"===typeof a&&a?("shape"in a?(z=a.shape,l(Array.isArray(z)&&2<=z.length,"invalid renderbuffer shape"),d=z[0]|0,z=z[1]|0):("radius"in a&&(d=z=a.radius|0),"width"in a&&(d=a.width|0),"height"in
a&&(z=a.height|0)),"format"in a&&(l.parameter(a.format,r,"invalid renderbuffer format"),k=r[a.format])):"number"===typeof a?(d=a|0,z="number"===typeof c?c|0:d):a?l.raise("invalid arguments to renderbuffer constructor"):d=z=1;l(0<d&&0<z&&d<=n.maxRenderbufferSize&&z<=n.maxRenderbufferSize,"invalid renderbuffer size");if(d!==v.width||z!==v.height||k!==v.format)return e.width=v.width=d,e.height=v.height=z,v.format=k,f.bindRenderbuffer(36161,v.renderbuffer),f.renderbufferStorage(36161,k,d,z),l(0===f.getError(),
"invalid render buffer format"),p.profile&&(v.stats.size=b[v.format]*v.width*v.height),e.format=wa[v.format],e}var v=new aa(f.createRenderbuffer());C[v.id]=v;d.renderbufferCount++;e(a,c);e.resize=function(a,c){var d=a|0,r=c|0||d;if(d===v.width&&r===v.height)return e;l(0<d&&0<r&&d<=n.maxRenderbufferSize&&r<=n.maxRenderbufferSize,"invalid renderbuffer size");e.width=v.width=d;e.height=v.height=r;f.bindRenderbuffer(36161,v.renderbuffer);f.renderbufferStorage(36161,v.format,d,r);l(0===f.getError(),"invalid render buffer format");
p.profile&&(v.stats.size=b[v.format]*v.width*v.height);return e};e._reglType="renderbuffer";e._renderbuffer=v;p.profile&&(e.stats=v.stats);e.destroy=function(){v.decRef()};return e},clear:function(){c(C).forEach(R)},restore:function(){c(C).forEach(function(a){a.renderbuffer=f.createRenderbuffer();f.bindRenderbuffer(36161,a.renderbuffer);f.renderbufferStorage(36161,a.format,a.width,a.height)});f.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],
16:[function(u,B,ea){var e=u("./util/sorted-object-keys"),l=u("./util/check"),c=u("./util/extend"),b=u("./util/values");B.exports=function(f,a,n,d){function p(a,b,c,d){this.name=a;this.id=b;this.location=c;this.info=d}function aa(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id){a[c].location=b.location;return}a.push(b)}function R(b,c,d){var e=35632===b?v:C,n=e[c];if(!n){var k=a.str(c),n=f.createShader(b);f.shaderSource(n,k);f.compileShader(n);l.shaderError(f,n,k,b,d);e[c]=n}return n}function r(a,
b){this.id=I++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function wa(b,c,e){var n;n=R(35632,b.fragId);var r=R(35633,b.vertId),k=b.program=f.createProgram();f.attachShader(k,n);f.attachShader(k,r);if(e)for(n=0;n<e.length;++n)r=e[n],f.bindAttribLocation(k,r[0],r[1]);f.linkProgram(k);l.linkError(f,k,a.str(b.fragId),a.str(b.vertId),c);e=f.getProgramParameter(k,35718);d.profile&&(b.stats.uniformsCount=
e);r=b.uniforms;for(n=0;n<e;++n)if(c=f.getActiveUniform(k,n))if(1<c.size)for(var v=0;v<c.size;++v){var C=c.name.replace("[0]","["+v+"]");aa(r,new p(C,a.id(C),f.getUniformLocation(k,C),c))}else aa(r,new p(c.name,a.id(c.name),f.getUniformLocation(k,c.name),c));e=f.getProgramParameter(k,35721);d.profile&&(b.stats.attributesCount=e);b=b.attributes;for(n=0;n<e;++n)(c=f.getActiveAttrib(k,n))&&aa(b,new p(c.name,a.id(c.name),f.getAttribLocation(k,c.name),c))}var v={},C={},O={},A=[],I=0;d.profile&&(n.getMaxUniformsCount=
function(){var a=0;A.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},n.getMaxAttributesCount=function(){var a=0;A.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var a=f.deleteShader.bind(f);b(v).forEach(a);v={};b(C).forEach(a);C={};A.forEach(function(a){f.deleteProgram(a.program)});A.length=0;O={};n.shaderCount=0},program:function(a,b,d,p){l.command(0<=a,"missing vertex shader",d);l.command(0<=b,"missing fragment shader",
d);var aa=O[b];aa||(aa=O[b]={});var k=aa[a];if(k&&(k.refCount++,!p))return k;var R=new r(b,a);n.shaderCount++;wa(R,d,p);k||(aa[a]=R);A.push(R);return c(R,{destroy:function(){R.refCount--;if(0>=R.refCount){f.deleteProgram(R.program);var a=A.indexOf(R);A.splice(a,1);n.shaderCount--}0>=aa[R.vertId].refCount&&(f.deleteShader(C[R.vertId]),delete C[R.vertId],delete O[R.fragId][R.vertId]);e(O[R.fragId]).length||(f.deleteShader(v[R.fragId]),delete v[R.fragId],delete O[R.fragId])}})},restore:function(){v=
{};C={};for(var a=0;a<A.length;++a)wa(A[a],null,A[a].attributes.map(function(a){return[a.location,a.name]}))},shader:R,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(u,B,ea){B.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(u,B,ea){B.exports=function(){var e={"":0},l=[""];return{id:function(c){var b=
e[c];if(b)return b;b=e[c]=l.length;l.push(c);return b},str:function(c){return l[c]}}}},{}],19:[function(u,B,ea){function e(a){return"[object "+a+"]"}function l(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function c(a){return Array.isArray(a)&&0!==a.length&&O(a[0])?!0:!1}function b(a){return Object.prototype.toString.call(a)}function f(a){if(!a)return!1;var d=b(a);return 0<=na.indexOf(d)?!0:l(a)||c(a)||wa(a)}function a(a,b){36193===a.type?(a.data=C(b),v.freeType(b)):a.data=b}
function n(a,b,c,d,f,l){a="undefined"!==typeof ga[a]?ga[a]:q[a]*G[b];l&&(a*=6);if(f){for(d=0;1<=c;)d+=a*c*c,c/=2;return d}return a*c*d}var d=u("./util/sorted-object-keys"),p=u("./util/check"),aa=u("./util/extend"),R=u("./util/values"),r=u("./util/is-typed-array"),wa=u("./util/is-ndarray"),v=u("./util/pool"),C=u("./util/to-half-float"),O=u("./util/is-array-like"),A=u("./util/flatten"),I=u("./util/is-pow2");ea=u("./constants/arraytypes.json");var db=u("./constants/arraytypes.json"),N=[9984,9986,9985,
9987],Jc=[0,6409,6410,6407,6408],q={};q[6409]=q[6406]=q[6402]=1;q[34041]=q[6410]=2;q[6407]=q[35904]=3;q[6408]=q[35906]=4;var z=e("HTMLCanvasElement"),k=e("OffscreenCanvas"),da=e("CanvasRenderingContext2D"),P=e("ImageBitmap"),K=e("HTMLImageElement"),w=e("HTMLVideoElement"),na=d(ea).concat([z,k,da,P,K,w]),G=[];G[5121]=1;G[5126]=4;G[36193]=2;G[5123]=2;G[5125]=4;var ga=[];ga[32854]=2;ga[32855]=2;ga[36194]=2;ga[34041]=4;ga[33776]=.5;ga[33777]=.5;ga[33778]=1;ga[33779]=1;ga[35986]=.5;ga[35987]=1;ga[34798]=
1;ga[35840]=.5;ga[35841]=.25;ga[35842]=.5;ga[35843]=.25;ga[36196]=.5;B.exports=function(h,e,G,u,ga,na,B){function sa(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Pa(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;
a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function X(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(p.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(p.type(b.flipY,"boolean","invalid texture flip"),a.flipY=b.flipY);"alignment"in b&&(p.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=b.alignment);"colorSpace"in b&&(p.parameter(b.colorSpace,yc,"invalid colorSpace"),
a.colorSpace=yc[b.colorSpace]);if("type"in b){var c=b.type;p(e.oes_texture_float||!("float"===c||"float32"===c),"you must enable the OES_texture_float extension in order to use floating point textures.");p(e.oes_texture_half_float||!("half float"===c||"float16"===c),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");p(e.webgl_depth_texture||!("uint16"===c||"uint32"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
p.parameter(c,Y,"invalid texture type");a.type=Y[c]}var d=a.width,f=a.height,h=a.channels,c=!1;"shape"in b?(p(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),d=b.shape[0],f=b.shape[1],3===b.shape.length&&(h=b.shape[2],p(0<h&&4>=h,"invalid number of channels"),c=!0),p(0<=d&&d<=G.maxTextureSize,"invalid width"),p(0<=f&&f<=G.maxTextureSize,"invalid height")):("radius"in b&&(d=f=b.radius,p(0<=d&&d<=G.maxTextureSize,"invalid radius")),"width"in b&&(d=b.width,p(0<=d&&d<=G.maxTextureSize,
"invalid width")),"height"in b&&(f=b.height,p(0<=f&&f<=G.maxTextureSize,"invalid height")),"channels"in b&&(h=b.channels,p(0<h&&4>=h,"invalid number of channels"),c=!0));a.width=d|0;a.height=f|0;a.channels=h|0;d=!1;"format"in b&&(d=b.format,p(e.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),p.parameter(d,J,"invalid texture format"),f=a.internalformat=J[d],a.format=ta[f],d in Y&&!("type"in b)&&(a.type=
Y[d]),d in ja&&(a.compressed=!0),d=!0);!c&&d?a.channels=q[a.format]:c&&!d?a.channels!==Jc[a.format]&&(a.format=a.internalformat=Jc[a.channels]):d&&c&&p(a.channels===q[a.format],"number of channels inconsistent with specified format")}}function H(a){h.pixelStorei(37440,a.flipY);h.pixelStorei(37441,a.premultiplyAlpha);h.pixelStorei(37443,a.colorSpace);h.pixelStorei(3317,a.unpackAlignment)}function L(){sa.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function Q(d,h){var e=null;f(h)?e=h:h&&(p.type(h,"object","invalid pixel data type"),X(d,h),"x"in h&&(d.xOffset=h.x|0),"y"in h&&(d.yOffset=h.y|0),f(h.data)&&(e=h.data));p(!d.compressed||e instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(h.copy){p(!e,"can not specify copy and data field for the same texture");var m=ga.viewportWidth,g=ga.viewportHeight;d.width=d.width||m-d.xOffset;d.height=d.height||g-d.yOffset;d.needsCopy=!0;p(0<=d.xOffset&&d.xOffset<m&&0<=d.yOffset&&
d.yOffset<g&&0<d.width&&d.width<=m&&0<d.height&&d.height<=g,"copy texture read out of bounds")}else if(!e)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(r(e))d.channels=d.channels||4,d.data=e,"type"in h||5121!==d.type||(d.type=db[Object.prototype.toString.call(e)]|0);else if(l(e)){d.channels=d.channels||4;m=e;g=m.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:g=v.allocType(d.type,g);g.set(m);d.data=g;break;case 36193:d.data=C(m);break;default:p.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(wa(e)){m=e.data;Array.isArray(m)||5121!==d.type||(d.type=db[Object.prototype.toString.call(m)]|0);var g=e.shape,n=e.stride,q,x,t,y;3===g.length?(t=g[2],y=n[2]):(p(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),y=t=1);q=g[0];x=g[1];g=n[0];n=n[1];d.alignment=1;d.width=q;d.height=x;d.channels=t;d.format=d.internalformat=Jc[t];d.needsFree=!0;q=y;e=e.offset;t=d.width;y=d.height;x=d.channels;for(var R=v.allocType(36193===d.type?5126:d.type,t*y*x),aa=0,J=0;J<y;++J)for(var D=
0;D<t;++D)for(var Z=0;Z<x;++Z)R[aa++]=m[g*D+n*J+q*Z+e];a(d,R)}else if(b(e)===z||b(e)===k||b(e)===da)b(e)===z||b(e)===k?d.element=e:d.element=e.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(b(e)===P)d.element=e,d.width=e.width,d.height=e.height,d.channels=4;else if(b(e)===K)d.element=e,d.width=e.naturalWidth,d.height=e.naturalHeight,d.channels=4;else if(b(e)===w)d.element=e,d.width=e.videoWidth,d.height=e.videoHeight,d.channels=4;else if(c(e)){m=d.width||e[0].length;
g=d.height||e.length;n=d.channels;n=O(e[0][0])?n||e[0][0].length:n||1;q=A.shape(e);t=1;for(y=0;y<q.length;++y)t*=q[y];t=v.allocType(36193===d.type?5126:d.type,t);A.flatten(e,q,"",t);a(d,t);d.alignment=1;d.width=m;d.height=g;d.channels=n;d.format=d.internalformat=Jc[n];d.needsFree=!0}5126===d.type?p(0<=G.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&p(0<=G.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function qa(a,b,c,d,f){var e=a.element,l=a.data,k=a.internalformat,g=a.format,n=a.type,p=a.width,r=a.height;H(a);e?h.texSubImage2D(b,f,c,d,g,n,e):a.compressed?h.compressedTexSubImage2D(b,f,c,d,k,p,r,l):a.needsCopy?(u(),h.copyTexSubImage2D(b,f,c,d,a.xOffset,a.yOffset,p,r)):h.texSubImage2D(b,f,c,d,p,r,g,n,l)}function M(){return W.pop()||new L}function Zb(a){a.needsFree&&v.freeType(a.data);L.call(a);W.push(a)}function $a(){sa.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function T(a,b,c){var d=a.images[0]=M();a.mipmask=1;d.width=a.width=b;d.height=a.height=c;d.channels=a.channels=4}function t(a,b){var c=null;if(f(b))c=a.images[0]=M(),Pa(c,a),Q(c,b),a.mipmask=1;else if(X(a,b),Array.isArray(b.mipmap))for(var d=b.mipmap,h=0;h<d.length;++h)c=a.images[h]=M(),Pa(c,a),c.width>>=h,c.height>>=h,Q(c,d[h]),a.mipmask|=1<<h;else c=a.images[0]=M(),Pa(c,a),Q(c,b),a.mipmask=1;Pa(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||p(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ia(a,b){for(var c=a.images,d=0;d<c.length&&c[d];++d){var f=c[d],e=b,l=d,k=f.element,g=f.data,n=f.internalformat,p=f.format,r=f.type,q=f.width,t=f.height;H(f);k?h.texImage2D(e,l,p,p,r,k):f.compressed?h.compressedTexImage2D(e,l,n,q,t,0,g):f.needsCopy?(u(),h.copyTexImage2D(e,l,p,f.xOffset,f.yOffset,q,t,0)):h.texImage2D(e,
l,p,q,t,0,p,r,g||null)}}function ba(){var a=fa.pop()||new $a;sa.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function va(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&Zb(b[c]),b[c]=null;fa.push(a)}function La(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function $b(a,b){if("min"in b){var c=b.min;p.parameter(c,vd);a.minFilter=vd[c];0<=N.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0)}"mag"in
b&&(c=b.mag,p.parameter(c,tc),a.magFilter=tc[c]);var c=a.wrapS,d=a.wrapT;if("wrap"in b){var f=b.wrap;"string"===typeof f?(p.parameter(f,oc),c=d=oc[f]):Array.isArray(f)&&(p.parameter(f[0],oc),p.parameter(f[1],oc),c=oc[f[0]],d=oc[f[1]])}else"wrapS"in b&&(c=b.wrapS,p.parameter(c,oc),c=oc[c]),"wrapT"in b&&(d=b.wrapT,p.parameter(d,oc),d=oc[d]);a.wrapS=c;a.wrapT=d;"anisotropic"in b&&(c=b.anisotropic,p("number"===typeof c&&1<=c&&c<=G.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=b.anisotropic);
if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":p.parameter(b.mipmap,Rb,"invalid mipmap hint");a.mipmapHint=Rb[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":p(Array.isArray(b.mipmap),"invalid mipmap type");a.genMipmaps=!1;c=!0;break;default:p.raise("invalid mipmap type")}!c||"min"in b||(a.minFilter=9984)}}function Ua(a,b){h.texParameteri(b,10241,a.minFilter);h.texParameteri(b,10240,a.magFilter);h.texParameteri(b,10242,a.wrapS);h.texParameteri(b,
10243,a.wrapT);e.ext_texture_filter_anisotropic&&h.texParameteri(b,34046,a.anisotropic);a.genMipmaps&&(h.hint(33170,a.mipmapHint),h.generateMipmap(b))}function V(a){sa.call(this);this.mipmask=0;this.internalformat=6408;this.id=oa++;this.refCount=1;this.target=a;this.texture=h.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new La;B.profile&&(this.stats={size:0})}function pb(a){h.activeTexture(33984);h.bindTexture(a.target,a.texture)}function ca(){var a=Z[0];a?h.bindTexture(a.target,a.texture):
h.bindTexture(3553,null)}function ma(a){var b=a.texture;p(b,"must not double destroy texture");var c=a.unit,d=a.target;0<=c&&(h.activeTexture(33984+c),h.bindTexture(d,null),Z[c]=null);h.deleteTexture(b);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete D[a.id];na.textureCount--}var Rb={"don't care":4352,"dont care":4352,nice:4354,fast:4353},oc={repeat:10497,clamp:33071,mirror:33648},tc={nearest:9728,linear:9729},vd=aa({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},tc),yc={none:0,browser:37444},Y={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},J={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ja={};e.ext_srgb&&(J.srgb=35904,J.srgba=35906);e.oes_texture_float&&(Y.float32=Y["float"]=5126);e.oes_texture_half_float&&(Y.float16=Y["half float"]=36193);e.webgl_depth_texture&&(aa(J,{depth:6402,"depth stencil":34041}),aa(Y,{uint16:5123,uint32:5125,
"depth stencil":34042}));e.webgl_compressed_texture_s3tc&&aa(ja,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});e.webgl_compressed_texture_atc&&aa(ja,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});e.webgl_compressed_texture_pvrtc&&aa(ja,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});e.webgl_compressed_texture_etc1&&(ja["rgb etc1"]=36196);var Ca=Array.prototype.slice.call(h.getParameter(34467));
d(ja).forEach(function(a){var b=ja[a];0<=Ca.indexOf(b)&&(J[a]=b)});var Lb=d(J);G.textureFormats=Lb;var ab=[];d(J).forEach(function(a){ab[J[a]]=a});var Vc=[];d(Y).forEach(function(a){Vc[Y[a]]=a});var E=[];d(tc).forEach(function(a){E[tc[a]]=a});var y=[];d(vd).forEach(function(a){y[vd[a]]=a});var ha=[];d(oc).forEach(function(a){ha[oc[a]]=a});var ta=Lb.reduce(function(a,b){var c=J[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||e.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=b.indexOf("rgba")?
a[c]=6408:a[c]=6407;return a},{}),W=[],fa=[],oa=0,D={},x=G.maxTextureUnits,Z=Array(x).map(function(){return null});aa(V.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var b=0;b<x;++b){var c=Z[b];if(c){if(0<c.bindCount)continue;c.unit=-1}Z[b]=this;a=b;break}a>=x&&p.raise("insufficient number of texture units");B.profile&&na.maxTextureUnits<a+1&&(na.maxTextureUnits=a+1);this.unit=a;h.activeTexture(33984+a);h.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&ma(this)}});B.profile&&(na.getTotalTextureSize=function(){var a=0;d(D).forEach(function(b){a+=D[b].stats.size});return a});return{create2D:function(a,b){function c(a,b){var f=d.texInfo;La.call(f);var h=ba();"number"===typeof a?"number"===typeof b?T(h,a|0,b|0):T(h,a|0,a|0):a?(p.type(a,"object","invalid arguments to regl.texture"),$b(f,a),t(h,a)):T(h,1,1);f.genMipmaps&&(h.mipmask=(h.width<<1)-1);d.mipmask=h.mipmask;Pa(d,h);p.texture2D(f,h,G);d.internalformat=h.internalformat;
c.width=h.width;c.height=h.height;pb(d);ia(h,3553);Ua(f,3553);ca();va(h);B.profile&&(d.stats.size=n(d.internalformat,d.type,h.width,h.height,f.genMipmaps,!1));c.format=ab[d.internalformat];c.type=Vc[d.type];c.mag=E[f.magFilter];c.min=y[f.minFilter];c.wrapS=ha[f.wrapS];c.wrapT=ha[f.wrapT];return c}var d=new V(3553);D[d.id]=d;na.textureCount++;c(a,b);c.subimage=function(a,b,f,h){p(!!a,"must specify image data");b|=0;f|=0;h|=0;var e=M();Pa(e,d);e.width=0;e.height=0;Q(e,a);e.width=e.width||(d.width>>
h)-b;e.height=e.height||(d.height>>h)-f;p(d.type===e.type&&d.format===e.format&&d.internalformat===e.internalformat,"incompatible format for texture.subimage");p(0<=b&&0<=f&&b+e.width<=d.width&&f+e.height<=d.height,"texture.subimage write out of bounds");p(d.mipmask&1<<h,"missing mipmap data");p(e.data||e.element||e.needsCopy,"missing image data");pb(d);qa(e,3553,b,f,h);ca();Zb(e);return c};c.resize=function(a,b){var f=a|0,e=b|0||f;if(f===d.width&&e===d.height)return c;c.width=d.width=f;c.height=
d.height=e;pb(d);for(var l=0;d.mipmask>>l;++l){var k=f>>l,g=e>>l;if(!k||!g)break;h.texImage2D(3553,l,d.format,k,g,0,d.format,d.type,null)}ca();B.profile&&(d.stats.size=n(d.internalformat,d.type,f,e,!1,!1));return c};c._reglType="texture2d";c._texture=d;B.profile&&(c.stats=d.stats);c.destroy=function(){d.decRef()};return c},createCube:function(a,b,c,d,f,e){function l(a,b,c,d,f,h){var e,m=k.texInfo;La.call(m);for(e=0;6>e;++e)g[e]=ba();if("number"!==typeof a&&a)if("object"===typeof a)if(b)t(g[0],a),
t(g[1],b),t(g[2],c),t(g[3],d),t(g[4],f),t(g[5],h);else if($b(m,a),X(k,a),"faces"in a)for(a=a.faces,p(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),e=0;6>e;++e)p("object"===typeof a[e]&&!!a[e],"invalid input for cube map face"),Pa(g[e],k),t(g[e],a[e]);else for(e=0;6>e;++e)t(g[e],a);else p.raise("invalid arguments to cube map");else for(a=a|0||1,e=0;6>e;++e)T(g[e],a,a);Pa(k,g[0]);p.optional(function(){G.npotTextureCube||p(I(k.width)&&I(k.height),"your browser does not support non power or two texture dimensions")});
k.mipmask=m.genMipmaps?(g[0].width<<1)-1:g[0].mipmask;p.textureCube(k,m,g,G);k.internalformat=g[0].internalformat;l.width=g[0].width;l.height=g[0].height;pb(k);for(e=0;6>e;++e)ia(g[e],34069+e);Ua(m,34067);ca();B.profile&&(k.stats.size=n(k.internalformat,k.type,l.width,l.height,m.genMipmaps,!0));l.format=ab[k.internalformat];l.type=Vc[k.type];l.mag=E[m.magFilter];l.min=y[m.minFilter];l.wrapS=ha[m.wrapS];l.wrapT=ha[m.wrapT];for(e=0;6>e;++e)va(g[e]);return l}var k=new V(34067);D[k.id]=k;na.cubeCount++;
var g=Array(6);l(a,b,c,d,f,e);l.subimage=function(a,b,c,d,f){p(!!b,"must specify image data");p("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;d|=0;f|=0;var h=M();Pa(h,k);h.width=0;h.height=0;Q(h,b);h.width=h.width||(k.width>>f)-c;h.height=h.height||(k.height>>f)-d;p(k.type===h.type&&k.format===h.format&&k.internalformat===h.internalformat,"incompatible format for texture.subimage");p(0<=c&&0<=d&&c+h.width<=k.width&&d+h.height<=k.height,"texture.subimage write out of bounds");p(k.mipmask&
1<<f,"missing mipmap data");p(h.data||h.element||h.needsCopy,"missing image data");pb(k);qa(h,34069+a,c,d,f);ca();Zb(h);return l};l.resize=function(a){a|=0;if(a!==k.width){l.width=k.width=a;l.height=k.height=a;pb(k);for(var b=0;6>b;++b)for(var c=0;k.mipmask>>c;++c)h.texImage2D(34069+b,c,k.format,a>>c,a>>c,0,k.format,k.type,null);ca();B.profile&&(k.stats.size=n(k.internalformat,k.type,l.width,l.height,!1,!0));return l}};l._reglType="textureCube";l._texture=k;B.profile&&(l.stats=k.stats);l.destroy=
function(){k.decRef()};return l},clear:function(){for(var a=0;a<x;++a)h.activeTexture(33984+a),h.bindTexture(3553,null),Z[a]=null;R(D).forEach(ma);na.cubeCount=0;na.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<x;++a){var b=Z[a];b&&(b.bindCount=0,b.unit=-1,Z[a]=null)}R(D).forEach(function(a){a.texture=h.createTexture();h.bindTexture(a.target,a.texture);for(var b=0;32>b;++b)if(0!==(a.mipmask&1<<b))if(3553===a.target)h.texImage2D(3553,b,a.internalformat,a.width>>
b,a.height>>b,0,a.internalformat,a.type,null);else for(var c=0;6>c;++c)h.texImage2D(34069+c,b,a.internalformat,a.width>>b,a.height>>b,0,a.internalformat,a.type,null);Ua(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<x;++a){var b=Z[a];b&&(b.bindCount=0,b.unit=-1,Z[a]=null);h.activeTexture(33984+a);h.bindTexture(3553,null);h.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(u,B,ea){B.exports=function(e,l){function c(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function b(a,b,f){var e=n.pop()||new c;e.startQueryIndex=a;e.endQueryIndex=b;e.sum=0;e.stats=f;d.push(e)}if(!l.ext_disjoint_timer_query)return null;var f=[],a=[],n=[],d=[],p=[],aa=[];return{beginQuery:function(c){var d=f.pop()||l.ext_disjoint_timer_query.createQueryEXT();
l.ext_disjoint_timer_query.beginQueryEXT(35007,d);a.push(d);b(a.length-1,a.length,c)},endQuery:function(){l.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:b,update:function(){var b,c;b=a.length;if(0!==b){aa.length=Math.max(aa.length,b+1);p.length=Math.max(p.length,b+1);p[0]=0;var e=aa[0]=0;for(c=b=0;c<a.length;++c){var v=a[c];l.ext_disjoint_timer_query.getQueryObjectEXT(v,34919)?(e+=l.ext_disjoint_timer_query.getQueryObjectEXT(v,34918),f.push(v)):a[b++]=v;p[c+1]=e;aa[c+1]=b}a.length=
b;for(c=b=0;c<d.length;++c){var e=d[c],C=e.startQueryIndex,v=e.endQueryIndex;e.sum+=p[v]-p[C];C=aa[C];v=aa[v];v===C?(e.stats.gpuTime+=e.sum/1E6,n.push(e)):(e.startQueryIndex=C,e.endQueryIndex=v,d[b++]=e)}d.length=b}},getNumPendingQueries:function(){return a.length},clear:function(){f.push.apply(f,a);for(var b=0;b<f.length;b++)l.ext_disjoint_timer_query.deleteQueryEXT(f[b]);a.length=0;f.length=0},restore:function(){a.length=0;f.length=0}}}},{}],21:[function(u,B,ea){function e(a){return"undefined"!==
typeof atob?atob(a):"base64:"+a}function l(a){a=Error("(regl) "+a);console.error(a);throw a;}function c(a,b){a||l(b)}function b(a){return a?": "+a:""}function f(a,b){switch(b){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function a(a,c,d){0>c.indexOf(a)&&
l("invalid value"+b(d)+". must be one of: "+c)}function n(a,b){for(a+="";a.length<b;)a=" "+a;return a}function d(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function p(a,b){this.number=a;this.line=b;this.errors=[]}function aa(a,b,c){this.file=a;this.line=b;this.message=c}function R(){var a=Error(),a=(a.stack||a).toString(),b=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return b?b[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function r(){var a=Error(),
a=(a.stack||a).toString(),b=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return b?b[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function wa(a,b){var c=a.split("\n"),f=1,l=0,n={unknown:new d,0:new d};n.unknown.name=n[0].name=b||R();n.unknown.lines.push(new p(0,""));for(var r=0;r<c.length;++r){var q=c[r],h=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(q);if(h)switch(h[1]){case "line":if(h=/(\d+)(\s+\d+)?/.exec(h[2]))f=h[1]|0,h[2]&&(l=h[2]|0,l in n||(n[l]=new d));break;case "define":if(h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(h[2]))n[l].name=
h[1]?e(h[2]):h[2]}n[l].lines.push(new p(f++,q))}N(n).forEach(function(a){var b=n[a];b.lines.forEach(function(a){b.index[a.number]=a})});return n}function v(a){var b=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var c=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);c?b.push(new aa(c[1]|0,c[2]|0,c[3].trim())):0<a.length&&b.push(new aa("unknown",0,a))}});return b}function C(a,b){b.forEach(function(b){var c=a[b.file];if(c){var d=c.index[b.line];if(d){d.errors.push(b);c.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(b)})}function O(a){a._commandRef=R()}function A(a,b){var c=r();l(a+" in command "+(b||R())+("unknown"===c?"":" called from "+c))}function I(a,c,d,e){f(a,c)||A("invalid parameter type"+b(d)+". expected "+c+", got "+typeof a,e||R())}function db(a,b){return 32820===a||32819===a||33635===a?2:34042===a?4:z[a]*b}var N=u("./sorted-object-keys"),Jc=u("./is-typed-array");u=u("./extend");var q="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
z={};z[5120]=z[5121]=1;z[5122]=z[5123]=z[36193]=z[33635]=z[32819]=z[32820]=2;z[5124]=z[5125]=z[5126]=z[34042]=4;B.exports=u(c,{optional:function(a){a()},raise:l,commandRaise:A,command:function(a,b,c){a||A(b,c||R())},parameter:function(a,c,d){a in c||l("unknown parameter ("+a+")"+b(d)+". possible values: "+N(c).join())},commandParameter:function(a,c,d,f){a in c||A("unknown parameter ("+a+")"+b(d)+". possible values: "+N(c).join(),f||R())},constructor:function(a){N(a).forEach(function(a){0>q.indexOf(a)&&
l('invalid regl constructor argument "'+a+'". must be one of '+q)})},type:function(a,c,d){f(a,c)||l("invalid parameter type"+b(d)+". expected "+c+", got "+typeof a)},commandType:I,isTypedArray:function(a,c){Jc(a)||l("invalid parameter type"+b(c)+". must be a typed array")},nni:function(a,c){0<=a&&(a|0)===a||l("invalid parameter type, ("+a+")"+b(c)+". must be a nonnegative integer")},oneOf:a,shaderError:function(a,b,d,f,e){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=f===
a.FRAGMENT_SHADER?"fragment":"vertex";I(d,"string",a+" shader source must be a string",e);var l=wa(d,e);d=v(b);C(l,d);N(l).forEach(function(a){function b(a,c){d.push(a);f.push(c||"")}var c=l[a];if(c.hasErrors){var d=[""],f=[""];b("file number "+a+": "+c.name+"\n","color:red;text-decoration:underline;font-weight:bold");c.lines.forEach(function(a){if(0<a.errors.length){b(n(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var c=0;a.errors.forEach(function(d){d=d.message;var f=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(f){var h=f[1];d=f[2];switch(h){case "assign":h="="}c=Math.max(a.line.indexOf(h,c),0)}else c=0;b(n("| ",6));b(n("^^^",c+3)+"\n","font-weight:bold");b(n("| ",6));b(d+"\n","font-weight:bold")});b(n("| ",6)+"\n")}else b(n(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(f[0]=d.join("%c"),console.log.apply(console,f))}});c.raise("Error compiling "+
a+" shader, "+l[0].name)}},linkError:function(a,b,d,f,e){a.getProgramParameter(b,a.LINK_STATUS)||(a=a.getProgramInfoLog(b),d=wa(d,e),f='Error linking program with vertex shader, "'+wa(f,e)[0].name+'", and fragment shader "'+d[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+a),c.raise(f))},callSite:r,saveCommandRef:O,saveDrawInfo:function(a,b,c,d){function f(a){return a?d.id(a):0}function e(a,
b){N(b).forEach(function(b){a[d.id(b)]=!0})}O(a);a._fragId=f(a["static"].frag);a._vertId=f(a["static"].vert);var l=a._uniformSet={};e(l,b["static"]);e(l,b.dynamic);b=a._attributeSet={};e(b,c["static"]);e(b,c.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(b,c,d){b.texture?a(b.texture._texture.internalformat,c,"unsupported texture format for attachment"):a(b.renderbuffer._renderbuffer.format,d,"unsupported renderbuffer format for attachment")},
guessCommand:R,texture2D:function(a,b,d){var f=b.width,e=b.height,l=b.channels;c(0<f&&f<=d.maxTextureSize&&0<e&&e<=d.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||c(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"incompatible wrap mode for texture, both width and height must be power of 2");1===b.mipmask?1!==f&&1!==e&&c(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(c(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"texture must be a square power of 2 to support mipmapping"),
c(b.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===b.type&&(0>d.extensions.indexOf("oes_texture_float_linear")&&c(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),c(!a.genMipmaps,"mipmap generation not supported with float textures"));var n=b.images;for(d=0;16>d;++d)if(n[d]){var p=f>>d,h=e>>d;c(b.mipmask&1<<d,"missing mipmap data");var g=n[d];c(g.width===p&&g.height===h,"invalid shape for mip images");c(g.format===b.format&&g.internalformat===
b.internalformat&&g.type===b.type,"incompatible type for mip image");!g.compressed&&g.data&&(p=Math.ceil(db(g.type,l)*p/g.unpackAlignment)*g.unpackAlignment,c(g.data.byteLength===p*h,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||c(0===(b.mipmask&1<<d),"extra mipmap data");b.compressed&&c(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,b,d,f){var e=a.width,l=a.height,n=a.channels;c(0<e&&e<=f.maxTextureSize&&
0<l&&l<=f.maxTextureSize,"invalid texture shape");c(e===l,"cube map must be square");c(33071===b.wrapS&&33071===b.wrapT,"wrap mode not supported by cube map");for(f=0;f<d.length;++f){var p=d[f];c(p.width===e&&p.height===l,"inconsistent cube map face shape");b.genMipmaps&&(c(!p.compressed,"can not generate mipmap for compressed textures"),c(1===p.mipmask,"can not specify mipmaps and generate mipmaps"));for(var h=p.images,g=0;16>g;++g){var r=h[g];if(r){var q=e>>g,v=l>>g;c(p.mipmask&1<<g,"missing mipmap data");
c(r.width===q&&r.height===v,"invalid shape for mip images");c(r.format===a.format&&r.internalformat===a.internalformat&&r.type===a.type,"incompatible type for mip image");r.compressed||r.data&&c(r.data.byteLength===q*v*Math.max(db(r.type,n),r.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(u,B,ea){B.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(u,B,ea){function e(b){return Array.prototype.slice.call(b)}var l=u("./extend"),c=u("./compiled-fns");B.exports=function(){function b(){var a=[],b=[];return l(function(){a.push.apply(a,e(arguments))},{def:function(){var c="v"+n;n++;b.push(c);0<arguments.length&&(a.push(c,"="),a.push.apply(a,e(arguments)),a.push(";"));return c},toString:function(){return e([0<b.length?"var "+b.join(",")+";":"",e(a).join("")]).join("")}})}function f(){function a(b,f){d(b,
f,"=",c.def(b,f),";")}var c=b(),d=b(),f=c.toString,n=d.toString;return l(function(){c.apply(c,e(arguments))},{def:c.def,entry:c,exit:d,save:a,set:function(b,d,f){a(b,d);c(b,d,"=",f,";")},toString:function(){return f()+n()}})}var a=0,n=0,d={},p={};return{global:b(),link:function(b){var c="$"+a,f=!1;"object"===typeof b&&b.name&&(c=b.name.replace(/ /g,"_"),f=!0);if(c in d)return c;d[c]=b;f||a++;return c},block:b,proc:function(a,b){function c(){var a="a"+d.length;d.push(a);return a}var d=[];b=b||0;for(var n=
0;n<b;++n)c();var n=f(),C=n.toString;return p[a]=l(n,{arg:c,toString:function(){return e(["function(",d.join(),"){",C(),"}"]).join("")}})},scope:f,cond:function(){var a=e(arguments).join(""),b=f(),c=f(),d=b.toString,n=c.toString;return l(b,{then:function(){b.apply(b,e(arguments));return this},"else":function(){c.apply(c,e(arguments));return this},toString:function(){var b=n();b&&(b="else{"+b+"}");return e(["if(",a,"){",d(),"}",b]).join("")}})},compile:function(){var a=[],b=[];Object.keys(d).sort(function(a,
b){var c="$"===a.charAt(0),d="$"===b.charAt(0);return c||d?c&&d?+a.slice(1)<+b.slice(1)?-1:1:c&&!d?-1:1:a.localeCompare(b)}).forEach(function(c){var f=d[c];a.push(c);b.push(f)});for(var f=0,e=a.length-1;-1<e;e--)if("$"===a[e].charAt(0)){f=e;break}f=a.slice(f).join();e=c[f];if(!e)throw Error("missing precompiled function with key: "+f);return e.apply(null,b)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(u,B,ea){B.exports={$0:function(e){var l,c,b,f,a,n,d,p,aa,R,r,wa,v,C,O,A,I,u,N,B,q,z,k,da,
P,K,w,na,G,ga;l=e.attributes;c=e.current;b=e.framebuffer;f=e.gl;a=e.next;n=e.vao;d=a.blend_color;p=c.blend_color;aa=a.blend_equation;R=c.blend_equation;r=a.blend_func;wa=c.blend_func;v=a.colorMask;C=c.colorMask;O=a.depth_range;A=c.depth_range;I=a.polygonOffset_offset;u=c.polygonOffset_offset;N=a.sample_coverage;B=c.sample_coverage;q=a.scissor_box;z=c.scissor_box;k=a.stencil_func;da=c.stencil_func;P=a.stencil_opBack;K=c.stencil_opBack;w=a.stencil_opFront;na=c.stencil_opFront;G=a.viewport;ga=c.viewport;
return{poll:function(){var h,e,l,n,la,gb,hc,sa,Pa,X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va;c.dirty=!1;e=a.blend_enable;l=a.cull_enable;n=a.depth_enable;la=a.dither;gb=a.polygonOffset_enable;hc=a.sample_alpha;sa=a.sample_enable;Pa=a.scissor_enable;X=a.stencil_enable;H=a.cull_face;L=c.cull_face;Q=a.depth_func;qa=c.depth_func;M=a.depth_mask;Zb=c.depth_mask;$a=a.frontFace;T=c.frontFace;t=a.lineWidth;ia=c.lineWidth;ba=a.stencil_mask;va=c.stencil_mask;h=b.next;h!==b.cur&&(h?f.bindFramebuffer(36160,h.framebuffer):
f.bindFramebuffer(36160,null),b.cur=h);e!==c.blend_enable&&(e?f.enable(3042):f.disable(3042),c.blend_enable=e);l!==c.cull_enable&&(l?f.enable(2884):f.disable(2884),c.cull_enable=l);n!==c.depth_enable&&(n?f.enable(2929):f.disable(2929),c.depth_enable=n);la!==c.dither&&(la?f.enable(3024):f.disable(3024),c.dither=la);gb!==c.polygonOffset_enable&&(gb?f.enable(32823):f.disable(32823),c.polygonOffset_enable=gb);hc!==c.sample_alpha&&(hc?f.enable(32926):f.disable(32926),c.sample_alpha=hc);sa!==c.sample_enable&&
(sa?f.enable(32928):f.disable(32928),c.sample_enable=sa);Pa!==c.scissor_enable&&(Pa?f.enable(3089):f.disable(3089),c.scissor_enable=Pa);X!==c.stencil_enable&&(X?f.enable(2960):f.disable(2960),c.stencil_enable=X);if(d[0]!==p[0]||d[1]!==p[1]||d[2]!==p[2]||d[3]!==p[3])f.blendColor(d[0],d[1],d[2],d[3]),p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3];if(aa[0]!==R[0]||aa[1]!==R[1])f.blendEquationSeparate(aa[0],aa[1]),R[0]=aa[0],R[1]=aa[1];if(r[0]!==wa[0]||r[1]!==wa[1]||r[2]!==wa[2]||r[3]!==wa[3])f.blendFuncSeparate(r[0],
r[1],r[2],r[3]),wa[0]=r[0],wa[1]=r[1],wa[2]=r[2],wa[3]=r[3];if(v[0]!==C[0]||v[1]!==C[1]||v[2]!==C[2]||v[3]!==C[3])f.colorMask(v[0],v[1],v[2],v[3]),C[0]=v[0],C[1]=v[1],C[2]=v[2],C[3]=v[3];H!==L&&(f.cullFace(H),c.cull_face=H);Q!==qa&&(f.depthFunc(Q),c.depth_func=Q);M!==Zb&&(f.depthMask(M),c.depth_mask=M);if(O[0]!==A[0]||O[1]!==A[1])f.depthRange(O[0],O[1]),A[0]=O[0],A[1]=O[1];$a!==T&&(f.frontFace($a),c.frontFace=$a);t!==ia&&(f.lineWidth(t),c.lineWidth=t);if(I[0]!==u[0]||I[1]!==u[1])f.polygonOffset(I[0],
I[1]),u[0]=I[0],u[1]=I[1];if(N[0]!==B[0]||N[1]!==B[1])f.sampleCoverage(N[0],N[1]),B[0]=N[0],B[1]=N[1];if(q[0]!==z[0]||q[1]!==z[1]||q[2]!==z[2]||q[3]!==z[3])f.scissor(q[0],q[1],q[2],q[3]),z[0]=q[0],z[1]=q[1],z[2]=q[2],z[3]=q[3];if(k[0]!==da[0]||k[1]!==da[1]||k[2]!==da[2])f.stencilFunc(k[0],k[1],k[2]),da[0]=k[0],da[1]=k[1],da[2]=k[2];ba!==va&&(f.stencilMask(ba),c.stencil_mask=ba);if(P[0]!==K[0]||P[1]!==K[1]||P[2]!==K[2]||P[3]!==K[3])f.stencilOpSeparate(P[0],P[1],P[2],P[3]),K[0]=P[0],K[1]=P[1],K[2]=
P[2],K[3]=P[3];if(w[0]!==na[0]||w[1]!==na[1]||w[2]!==na[2]||w[3]!==na[3])f.stencilOpSeparate(w[0],w[1],w[2],w[3]),na[0]=w[0],na[1]=w[1],na[2]=w[2],na[3]=w[3];if(G[0]!==ga[0]||G[1]!==ga[1]||G[2]!==ga[2]||G[3]!==ga[3])f.viewport(G[0],G[1],G[2],G[3]),ga[0]=G[0],ga[1]=G[1],ga[2]=G[2],ga[3]=G[3]},refresh:function(){var h,e,U,ka,la,gb,hc,sa,Pa,X,H,L,Q,qa,M,Zb;c.dirty=!1;e=a.blend_enable;U=a.cull_enable;ka=a.depth_enable;la=a.dither;gb=a.polygonOffset_enable;hc=a.sample_alpha;sa=a.sample_enable;Pa=a.scissor_enable;
X=a.stencil_enable;H=a.cull_face;L=a.depth_func;Q=a.depth_mask;qa=a.frontFace;M=a.lineWidth;Zb=a.stencil_mask;(h=b.next)?f.bindFramebuffer(36160,h.framebuffer):f.bindFramebuffer(36160,null);b.cur=h;h=l[0];h.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(0,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,h.x,h.y,h.z,h.w),h.buffer=null);h=l[1];h.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,h.buffer.buffer),
f.vertexAttribPointer(1,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,h.x,h.y,h.z,h.w),h.buffer=null);h=l[2];h.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(2,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,h.x,h.y,h.z,h.w),h.buffer=null);h=l[3];h.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(3,h.size,
h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,h.x,h.y,h.z,h.w),h.buffer=null);h=l[4];h.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(4,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,h.x,h.y,h.z,h.w),h.buffer=null);h=l[5];h.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(5,h.size,h.type,h.normalized,h.stride,h.offset)):
(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,h.x,h.y,h.z,h.w),h.buffer=null);h=l[6];h.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(6,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,h.x,h.y,h.z,h.w),h.buffer=null);h=l[7];h.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(7,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(7),
f.vertexAttrib4f(7,h.x,h.y,h.z,h.w),h.buffer=null);h=l[8];h.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(8,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,h.x,h.y,h.z,h.w),h.buffer=null);h=l[9];h.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(9,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,h.x,h.y,h.z,
h.w),h.buffer=null);h=l[10];h.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(10,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,h.x,h.y,h.z,h.w),h.buffer=null);h=l[11];h.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(11,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,h.x,h.y,h.z,h.w),h.buffer=null);h=
l[12];h.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(12,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,h.x,h.y,h.z,h.w),h.buffer=null);h=l[13];h.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(13,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,h.x,h.y,h.z,h.w),h.buffer=null);h=l[14];h.buffer?(f.enableVertexAttribArray(14),
f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(14,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,h.x,h.y,h.z,h.w),h.buffer=null);h=l[15];h.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,h.buffer.buffer),f.vertexAttribPointer(15,h.size,h.type,h.normalized,h.stride,h.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,h.x,h.y,h.z,h.w),h.buffer=null);n.currentVAO=null;n.setVAO(n.targetVAO);e?f.enable(3042):f.disable(3042);
c.blend_enable=e;U?f.enable(2884):f.disable(2884);c.cull_enable=U;ka?f.enable(2929):f.disable(2929);c.depth_enable=ka;la?f.enable(3024):f.disable(3024);c.dither=la;gb?f.enable(32823):f.disable(32823);c.polygonOffset_enable=gb;hc?f.enable(32926):f.disable(32926);c.sample_alpha=hc;sa?f.enable(32928):f.disable(32928);c.sample_enable=sa;Pa?f.enable(3089):f.disable(3089);c.scissor_enable=Pa;X?f.enable(2960):f.disable(2960);c.stencil_enable=X;f.blendColor(d[0],d[1],d[2],d[3]);p[0]=d[0];p[1]=d[1];p[2]=d[2];
p[3]=d[3];f.blendEquationSeparate(aa[0],aa[1]);R[0]=aa[0];R[1]=aa[1];f.blendFuncSeparate(r[0],r[1],r[2],r[3]);wa[0]=r[0];wa[1]=r[1];wa[2]=r[2];wa[3]=r[3];f.colorMask(v[0],v[1],v[2],v[3]);C[0]=v[0];C[1]=v[1];C[2]=v[2];C[3]=v[3];f.cullFace(H);c.cull_face=H;f.depthFunc(L);c.depth_func=L;f.depthMask(Q);c.depth_mask=Q;f.depthRange(O[0],O[1]);A[0]=O[0];A[1]=O[1];f.frontFace(qa);c.frontFace=qa;f.lineWidth(M);c.lineWidth=M;f.polygonOffset(I[0],I[1]);u[0]=I[0];u[1]=I[1];f.sampleCoverage(N[0],N[1]);B[0]=N[0];
B[1]=N[1];f.scissor(q[0],q[1],q[2],q[3]);z[0]=q[0];z[1]=q[1];z[2]=q[2];z[3]=q[3];f.stencilFunc(k[0],k[1],k[2]);da[0]=k[0];da[1]=k[1];da[2]=k[2];f.stencilMask(Zb);c.stencil_mask=Zb;f.stencilOpSeparate(P[0],P[1],P[2],P[3]);K[0]=P[0];K[1]=P[1];K[2]=P[2];K[3]=P[3];f.stencilOpSeparate(w[0],w[1],w[2],w[3]);na[0]=w[0];na[1]=w[1];na[2]=w[2];na[3]=w[3];f.viewport(G[0],G[1],G[2],G[3]);ga[0]=G[0];ga[1]=G[1];ga[2]=G[2];ga[3]=G[3]}}},$3:function(e,l,c,b){var f,a,n,d,p,aa,R,r,wa,v,C,O,A,I,u,N,B,q,z,k,da,P,K,w,
na,G,ga,h,g,U,ka,la,gb;f=e.context;a=e.current;n=e.framebuffer;d=e.gl;p=e.next;aa=e.shader;R=e.vao;r=p.blend_color;wa=a.blend_color;v=p.blend_equation;C=a.blend_equation;O=p.blend_func;A=a.blend_func;I=p.colorMask;u=a.colorMask;N=p.depth_range;B=a.depth_range;q=p.polygonOffset_offset;z=a.polygonOffset_offset;k=p.sample_coverage;da=a.sample_coverage;P=p.scissor_box;K=a.scissor_box;w=p.stencil_func;na=a.stencil_func;G=p.stencil_opBack;ga=a.stencil_opBack;h=p.stencil_opFront;g=a.stencil_opFront;U=p.viewport;
ka=a.viewport;la={};gb={};return{batch:function(c,f){var e,X,H,L,Q;e=n.next;e!==n.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),n.cur=e);if(a.dirty){e=p.dither;e!==a.dither&&(e?d.enable(3024):d.disable(3024),a.dither=e);e=p.blend_enable;e!==a.blend_enable&&(e?d.enable(3042):d.disable(3042),a.blend_enable=e);e=r[0];H=r[1];L=r[2];Q=r[3];if(e!==wa[0]||H!==wa[1]||L!==wa[2]||Q!==wa[3])d.blendColor(e,H,L,Q),wa[0]=e,wa[1]=H,wa[2]=L,wa[3]=Q;e=v[0];H=v[1];if(e!==C[0]||H!==C[1])d.blendEquationSeparate(e,
H),C[0]=e,C[1]=H;e=O[0];H=O[1];L=O[2];Q=O[3];if(e!==A[0]||H!==A[1]||L!==A[2]||Q!==A[3])d.blendFuncSeparate(e,H,L,Q),A[0]=e,A[1]=H,A[2]=L,A[3]=Q;e=p.depth_enable;e!==a.depth_enable&&(e?d.enable(2929):d.disable(2929),a.depth_enable=e);e=p.depth_func;e!==a.depth_func&&(d.depthFunc(e),a.depth_func=e);e=N[0];H=N[1];if(e!==B[0]||H!==B[1])d.depthRange(e,H),B[0]=e,B[1]=H;e=p.depth_mask;e!==a.depth_mask&&(d.depthMask(e),a.depth_mask=e);e=I[0];H=I[1];L=I[2];Q=I[3];if(e!==u[0]||H!==u[1]||L!==u[2]||Q!==u[3])d.colorMask(e,
H,L,Q),u[0]=e,u[1]=H,u[2]=L,u[3]=Q;e=p.cull_enable;e!==a.cull_enable&&(e?d.enable(2884):d.disable(2884),a.cull_enable=e);e=p.cull_face;e!==a.cull_face&&(d.cullFace(e),a.cull_face=e);e=p.frontFace;e!==a.frontFace&&(d.frontFace(e),a.frontFace=e);e=p.lineWidth;e!==a.lineWidth&&(d.lineWidth(e),a.lineWidth=e);e=p.polygonOffset_enable;e!==a.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),a.polygonOffset_enable=e);e=q[0];H=q[1];if(e!==z[0]||H!==z[1])d.polygonOffset(e,H),z[0]=e,z[1]=H;e=p.sample_alpha;
e!==a.sample_alpha&&(e?d.enable(32926):d.disable(32926),a.sample_alpha=e);e=p.sample_enable;e!==a.sample_enable&&(e?d.enable(32928):d.disable(32928),a.sample_enable=e);e=k[0];H=k[1];if(e!==da[0]||H!==da[1])d.sampleCoverage(e,H),da[0]=e,da[1]=H;e=p.stencil_enable;e!==a.stencil_enable&&(e?d.enable(2960):d.disable(2960),a.stencil_enable=e);e=p.stencil_mask;e!==a.stencil_mask&&(d.stencilMask(e),a.stencil_mask=e);e=w[0];H=w[1];L=w[2];if(e!==na[0]||H!==na[1]||L!==na[2])d.stencilFunc(e,H,L),na[0]=e,na[1]=
H,na[2]=L;e=h[0];H=h[1];L=h[2];Q=h[3];if(e!==g[0]||H!==g[1]||L!==g[2]||Q!==g[3])d.stencilOpSeparate(e,H,L,Q),g[0]=e,g[1]=H,g[2]=L,g[3]=Q;e=G[0];H=G[1];L=G[2];Q=G[3];if(e!==ga[0]||H!==ga[1]||L!==ga[2]||Q!==ga[3])d.stencilOpSeparate(e,H,L,Q),ga[0]=e,ga[1]=H,ga[2]=L,ga[3]=Q;e=p.scissor_enable;e!==a.scissor_enable&&(e?d.enable(3089):d.disable(3089),a.scissor_enable=e);e=P[0];H=P[1];L=P[2];Q=P[3];if(e!==K[0]||H!==K[1]||L!==K[2]||Q!==K[3])d.scissor(e,H,L,Q),K[0]=e,K[1]=H,K[2]=L,K[3]=Q;e=U[0];H=U[1];L=U[2];
Q=U[3];if(e!==ka[0]||H!==ka[1]||L!==ka[2]||Q!==ka[3])d.viewport(e,H,L,Q),ka[0]=e,ka[1]=H,ka[2]=L,ka[3]=Q;a.dirty=!1}if(e=a.profile)X=performance.now(),l.count+=f;H=aa.program(aa.vert,aa.frag);d.useProgram(H.program);R.setVAO(null);L=H.id;(Q=gb[L])||(Q=gb[L]=b(H));Q.call(this,c,f);R.setVAO(null);e&&(l.cpuTime+=performance.now()-X)},draw:function(b){var f,e,X,H,L;f=n.next;f!==n.cur&&(f?d.bindFramebuffer(36160,f.framebuffer):d.bindFramebuffer(36160,null),n.cur=f);if(a.dirty){f=p.dither;f!==a.dither&&
(f?d.enable(3024):d.disable(3024),a.dither=f);f=p.blend_enable;f!==a.blend_enable&&(f?d.enable(3042):d.disable(3042),a.blend_enable=f);f=r[0];X=r[1];H=r[2];L=r[3];if(f!==wa[0]||X!==wa[1]||H!==wa[2]||L!==wa[3])d.blendColor(f,X,H,L),wa[0]=f,wa[1]=X,wa[2]=H,wa[3]=L;f=v[0];X=v[1];if(f!==C[0]||X!==C[1])d.blendEquationSeparate(f,X),C[0]=f,C[1]=X;f=O[0];X=O[1];H=O[2];L=O[3];if(f!==A[0]||X!==A[1]||H!==A[2]||L!==A[3])d.blendFuncSeparate(f,X,H,L),A[0]=f,A[1]=X,A[2]=H,A[3]=L;f=p.depth_enable;f!==a.depth_enable&&
(f?d.enable(2929):d.disable(2929),a.depth_enable=f);f=p.depth_func;f!==a.depth_func&&(d.depthFunc(f),a.depth_func=f);f=N[0];X=N[1];if(f!==B[0]||X!==B[1])d.depthRange(f,X),B[0]=f,B[1]=X;f=p.depth_mask;f!==a.depth_mask&&(d.depthMask(f),a.depth_mask=f);f=I[0];X=I[1];H=I[2];L=I[3];if(f!==u[0]||X!==u[1]||H!==u[2]||L!==u[3])d.colorMask(f,X,H,L),u[0]=f,u[1]=X,u[2]=H,u[3]=L;f=p.cull_enable;f!==a.cull_enable&&(f?d.enable(2884):d.disable(2884),a.cull_enable=f);f=p.cull_face;f!==a.cull_face&&(d.cullFace(f),
a.cull_face=f);f=p.frontFace;f!==a.frontFace&&(d.frontFace(f),a.frontFace=f);f=p.lineWidth;f!==a.lineWidth&&(d.lineWidth(f),a.lineWidth=f);f=p.polygonOffset_enable;f!==a.polygonOffset_enable&&(f?d.enable(32823):d.disable(32823),a.polygonOffset_enable=f);f=q[0];X=q[1];if(f!==z[0]||X!==z[1])d.polygonOffset(f,X),z[0]=f,z[1]=X;f=p.sample_alpha;f!==a.sample_alpha&&(f?d.enable(32926):d.disable(32926),a.sample_alpha=f);f=p.sample_enable;f!==a.sample_enable&&(f?d.enable(32928):d.disable(32928),a.sample_enable=
f);f=k[0];X=k[1];if(f!==da[0]||X!==da[1])d.sampleCoverage(f,X),da[0]=f,da[1]=X;f=p.stencil_enable;f!==a.stencil_enable&&(f?d.enable(2960):d.disable(2960),a.stencil_enable=f);f=p.stencil_mask;f!==a.stencil_mask&&(d.stencilMask(f),a.stencil_mask=f);f=w[0];X=w[1];H=w[2];if(f!==na[0]||X!==na[1]||H!==na[2])d.stencilFunc(f,X,H),na[0]=f,na[1]=X,na[2]=H;f=h[0];X=h[1];H=h[2];L=h[3];if(f!==g[0]||X!==g[1]||H!==g[2]||L!==g[3])d.stencilOpSeparate(f,X,H,L),g[0]=f,g[1]=X,g[2]=H,g[3]=L;f=G[0];X=G[1];H=G[2];L=G[3];
if(f!==ga[0]||X!==ga[1]||H!==ga[2]||L!==ga[3])d.stencilOpSeparate(f,X,H,L),ga[0]=f,ga[1]=X,ga[2]=H,ga[3]=L;f=p.scissor_enable;f!==a.scissor_enable&&(f?d.enable(3089):d.disable(3089),a.scissor_enable=f);f=P[0];X=P[1];H=P[2];L=P[3];if(f!==K[0]||X!==K[1]||H!==K[2]||L!==K[3])d.scissor(f,X,H,L),K[0]=f,K[1]=X,K[2]=H,K[3]=L;f=U[0];X=U[1];H=U[2];L=U[3];if(f!==ka[0]||X!==ka[1]||H!==ka[2]||L!==ka[3])d.viewport(f,X,H,L),ka[0]=f,ka[1]=X,ka[2]=H,ka[3]=L;a.dirty=!1}if(f=a.profile)e=performance.now(),l.count++;
X=aa.program(aa.vert,aa.frag);d.useProgram(X.program);R.setVAO(null);H=X.id;(L=la[H])||(L=la[H]=c(X));L.call(this,b);R.setVAO(null);f&&(l.cpuTime+=performance.now()-e)},scope:function(b,c,d){var e,h;if(e=a.profile)h=performance.now(),l.count++;c(f,b,d);e&&(l.cpuTime+=performance.now()-h)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(e,
l,c,b,f,a,n,d,p,aa,R,r,wa,v,C,O,A,I,u,N,B,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,gb,ea,sa,Pa,X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma,Rb,oc,tc,vd,yc,Y,J,ja,Ca,Lb,ab,Vc,E,y,ha,ta,W,fa,oa){var D,x,Z,F,xa,Da,m,rc,Ia,S,Hb,zb,Ue,je,ge,ae,Hd,re,xd,de,te,Kd,Xd,Wd,Ld,Ve,af,bf,yd,Ce,Rd,Sd,ke,Je,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb;D=e.attributes;x=e.context;Z=e.current;F=e.draw;xa=e.elements;Da=e.framebuffer;m=e.gl;rc=e.next;Ia=e.shader;
S=e.uniforms;Hb=e.vao;zb=rc.blend_color;Ue=Z.blend_color;je=rc.blend_equation;ge=Z.blend_equation;ae=rc.blend_func;Hd=Z.blend_func;re=rc.colorMask;xd=Z.colorMask;de=rc.depth_range;te=Z.depth_range;Kd=rc.polygonOffset_offset;Xd=Z.polygonOffset_offset;Wd=rc.sample_coverage;Ld=Z.sample_coverage;Ve=rc.scissor_box;af=Z.scissor_box;bf=rc.stencil_func;yd=Z.stencil_func;Ce=rc.stencil_opBack;Rd=Z.stencil_opBack;Sd=rc.stencil_opFront;ke=Z.stencil_opFront;Je=rc.viewport;sd=Z.viewport;ld={};wd={};qd=new Float32Array(16);
Bc=new Float32Array(16);lc=new Float32Array(16);td=new Float32Array(16);gd=new Float32Array(16);Mc=new Float32Array(16);uc=new Float32Array(16);bb=new Float32Array(16);jc=new Float32Array(16);Db=new Float32Array(16);sc=new Float32Array(16);Sa=new Float32Array(16);Kc=new Float32Array(16);bc=new Float32Array(16);Zc=new Float32Array(16);Cd=new Float32Array(16);md=new Float32Array(16);Cc=new Float32Array(16);Xb=new Float32Array(16);Hc=new Float32Array(16);Sc=new Float32Array(16);Ka=new Float32Array(16);
Eb=new Float32Array(16);Wa=new Float32Array(16);pa=new Float32Array(16);ud=new Float32Array(16);Ib=new Float32Array(16);Ra=new Float32Array(16);Gb=new Float32Array(16);eb=new Float32Array(16);pc=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(c,e){var h,l,g,k;h=Da.next;h!==Da.cur&&(h?m.bindFramebuffer(36160,h.framebuffer):m.bindFramebuffer(36160,null),Da.cur=h);if(Z.dirty){var q,w,z,S,G,K,P,U,N,Ia,da,bb,Sa,ra,B,ua,zb,Db,Aa,ga,Ha,bc,Mc,Qa,na;q=re[0];w=re[1];z=re[2];S=re[3];if(q!==
xd[0]||w!==xd[1]||z!==xd[2]||S!==xd[3])m.colorMask(q,w,z,S),xd[0]=q,xd[1]=w,xd[2]=z,xd[3]=S;G=rc.frontFace;G!==Z.frontFace&&(m.frontFace(G),Z.frontFace=G);K=rc.polygonOffset_enable;K!==Z.polygonOffset_enable&&(K?m.enable(32823):m.disable(32823),Z.polygonOffset_enable=K);P=Kd[0];U=Kd[1];if(P!==Xd[0]||U!==Xd[1])m.polygonOffset(P,U),Xd[0]=P,Xd[1]=U;N=rc.sample_alpha;N!==Z.sample_alpha&&(N?m.enable(32926):m.disable(32926),Z.sample_alpha=N);Ia=rc.sample_enable;Ia!==Z.sample_enable&&(Ia?m.enable(32928):
m.disable(32928),Z.sample_enable=Ia);da=Wd[0];bb=Wd[1];if(da!==Ld[0]||bb!==Ld[1])m.sampleCoverage(da,bb),Ld[0]=da,Ld[1]=bb;Sa=rc.stencil_enable;Sa!==Z.stencil_enable&&(Sa?m.enable(2960):m.disable(2960),Z.stencil_enable=Sa);ra=rc.stencil_mask;ra!==Z.stencil_mask&&(m.stencilMask(ra),Z.stencil_mask=ra);B=bf[0];ua=bf[1];zb=bf[2];if(B!==yd[0]||ua!==yd[1]||zb!==yd[2])m.stencilFunc(B,ua,zb),yd[0]=B,yd[1]=ua,yd[2]=zb;Db=Sd[0];Aa=Sd[1];ga=Sd[2];Ha=Sd[3];if(Db!==ke[0]||Aa!==ke[1]||ga!==ke[2]||Ha!==ke[3])m.stencilOpSeparate(Db,
Aa,ga,Ha),ke[0]=Db,ke[1]=Aa,ke[2]=ga,ke[3]=Ha;bc=Ce[0];Mc=Ce[1];Qa=Ce[2];na=Ce[3];if(bc!==Rd[0]||Mc!==Rd[1]||Qa!==Rd[2]||na!==Rd[3])m.stencilOpSeparate(bc,Mc,Qa,na),Rd[0]=bc,Rd[1]=Mc,Rd[2]=Qa,Rd[3]=na}m.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;m.disable(3042);Z.blend_enable=!1;m.blendEquationSeparate(32774,32774);ge[0]=32774;ge[1]=32774;m.blendFuncSeparate(770,771,1,1);Hd[0]=770;Hd[1]=771;Hd[2]=1;Hd[3]=1;m.enable(2884);Z.cull_enable=!0;m.cullFace(1029);Z.cull_face=1029;m.enable(2929);Z.depth_enable=
!0;m.depthFunc(513);Z.depth_func=513;m.depthMask(!0);Z.depth_mask=!0;m.depthRange(0,1);te[0]=0;te[1]=1;m.disable(3024);Z.dither=!1;m.lineWidth(2);Z.lineWidth=2;m.enable(3089);Z.scissor_enable=!0;l=Z.profile;Z.profile=!1;m.useProgram(ea.program);var gd,Za,ka,ya,uc,Ja,Ve,ib,kb,za,lc,Ea,sb,tb,Xa,Ya,Kc,jc,Zc,Va,Mb,Bc,Fa,sc,Oa,Ba,nb,wb,Cb,ub,qd,xb,td;Hb.setVAO(null);gd=Rb.location;Za=D[gd];Za.buffer||m.enableVertexAttribArray(gd);if(Za.type!==b.dtype||4!==Za.size||Za.buffer!==b||!1!==Za.normalized||0!==
Za.offset||0!==Za.stride)m.bindBuffer(34962,b.buffer),m.vertexAttribPointer(gd,4,b.dtype,!1,0,0),Za.type=b.dtype,Za.size=4,Za.buffer=b,Za.normalized=!1,Za.offset=0,Za.stride=0;ka=oc.location;ya=D[ka];ya.buffer||m.enableVertexAttribArray(ka);if(ya.type!==f.dtype||4!==ya.size||ya.buffer!==f||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)m.bindBuffer(34962,f.buffer),m.vertexAttribPointer(ka,4,f.dtype,!1,0,0),ya.type=f.dtype,ya.size=4,ya.buffer=f,ya.normalized=!1,ya.offset=0,ya.stride=0;uc=tc.location;
Ja=D[uc];Ja.buffer||m.enableVertexAttribArray(uc);if(Ja.type!==a.dtype||4!==Ja.size||Ja.buffer!==a||!1!==Ja.normalized||0!==Ja.offset||0!==Ja.stride)m.bindBuffer(34962,a.buffer),m.vertexAttribPointer(uc,4,a.dtype,!1,0,0),Ja.type=a.dtype,Ja.size=4,Ja.buffer=a,Ja.normalized=!1,Ja.offset=0,Ja.stride=0;Ve=vd.location;ib=D[Ve];ib.buffer||m.enableVertexAttribArray(Ve);if(ib.type!==n.dtype||4!==ib.size||ib.buffer!==n||!1!==ib.normalized||0!==ib.offset||0!==ib.stride)m.bindBuffer(34962,n.buffer),m.vertexAttribPointer(Ve,
4,n.dtype,!1,0,0),ib.type=n.dtype,ib.size=4,ib.buffer=n,ib.normalized=!1,ib.offset=0,ib.stride=0;kb=yc.location;za=D[kb];za.buffer||m.enableVertexAttribArray(kb);if(za.type!==d.dtype||4!==za.size||za.buffer!==d||!1!==za.normalized||0!==za.offset||0!==za.stride)m.bindBuffer(34962,d.buffer),m.vertexAttribPointer(kb,4,d.dtype,!1,0,0),za.type=d.dtype,za.size=4,za.buffer=d,za.normalized=!1,za.offset=0,za.stride=0;lc=Y.location;Ea=D[lc];Ea.buffer||m.enableVertexAttribArray(lc);if(Ea.type!==p.dtype||4!==
Ea.size||Ea.buffer!==p||!1!==Ea.normalized||0!==Ea.offset||0!==Ea.stride)m.bindBuffer(34962,p.buffer),m.vertexAttribPointer(lc,4,p.dtype,!1,0,0),Ea.type=p.dtype,Ea.size=4,Ea.buffer=p,Ea.normalized=!1,Ea.offset=0,Ea.stride=0;sb=J.location;tb=D[sb];tb.buffer||m.enableVertexAttribArray(sb);if(tb.type!==aa.dtype||4!==tb.size||tb.buffer!==aa||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)m.bindBuffer(34962,aa.buffer),m.vertexAttribPointer(sb,4,aa.dtype,!1,0,0),tb.type=aa.dtype,tb.size=4,tb.buffer=aa,
tb.normalized=!1,tb.offset=0,tb.stride=0;Xa=ja.location;Ya=D[Xa];Ya.buffer||m.enableVertexAttribArray(Xa);if(Ya.type!==R.dtype||4!==Ya.size||Ya.buffer!==R||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)m.bindBuffer(34962,R.buffer),m.vertexAttribPointer(Xa,4,R.dtype,!1,0,0),Ya.type=R.dtype,Ya.size=4,Ya.buffer=R,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Kc=Ca.location;jc=D[Kc];jc.buffer||m.enableVertexAttribArray(Kc);if(jc.type!==r.dtype||4!==jc.size||jc.buffer!==r||!1!==jc.normalized||0!==jc.offset||
0!==jc.stride)m.bindBuffer(34962,r.buffer),m.vertexAttribPointer(Kc,4,r.dtype,!1,0,0),jc.type=r.dtype,jc.size=4,jc.buffer=r,jc.normalized=!1,jc.offset=0,jc.stride=0;Zc=Lb.location;Va=D[Zc];Va.buffer||m.enableVertexAttribArray(Zc);if(Va.type!==wa.dtype||4!==Va.size||Va.buffer!==wa||!1!==Va.normalized||0!==Va.offset||0!==Va.stride)m.bindBuffer(34962,wa.buffer),m.vertexAttribPointer(Zc,4,wa.dtype,!1,0,0),Va.type=wa.dtype,Va.size=4,Va.buffer=wa,Va.normalized=!1,Va.offset=0,Va.stride=0;Mb=ab.location;
Bc=D[Mb];Bc.buffer||m.enableVertexAttribArray(Mb);if(Bc.type!==v.dtype||4!==Bc.size||Bc.buffer!==v||!1!==Bc.normalized||0!==Bc.offset||0!==Bc.stride)m.bindBuffer(34962,v.buffer),m.vertexAttribPointer(Mb,4,v.dtype,!1,0,0),Bc.type=v.dtype,Bc.size=4,Bc.buffer=v,Bc.normalized=!1,Bc.offset=0,Bc.stride=0;Fa=Vc.location;sc=D[Fa];sc.buffer||m.enableVertexAttribArray(Fa);if(sc.type!==C.dtype||4!==sc.size||sc.buffer!==C||!1!==sc.normalized||0!==sc.offset||0!==sc.stride)m.bindBuffer(34962,C.buffer),m.vertexAttribPointer(Fa,
4,C.dtype,!1,0,0),sc.type=C.dtype,sc.size=4,sc.buffer=C,sc.normalized=!1,sc.offset=0,sc.stride=0;Oa=E.location;Ba=D[Oa];Ba.buffer||m.enableVertexAttribArray(Oa);if(Ba.type!==O.dtype||4!==Ba.size||Ba.buffer!==O||!1!==Ba.normalized||0!==Ba.offset||0!==Ba.stride)m.bindBuffer(34962,O.buffer),m.vertexAttribPointer(Oa,4,O.dtype,!1,0,0),Ba.type=O.dtype,Ba.size=4,Ba.buffer=O,Ba.normalized=!1,Ba.offset=0,Ba.stride=0;nb=y.location;wb=D[nb];wb.buffer||m.enableVertexAttribArray(nb);if(wb.type!==A.dtype||4!==
wb.size||wb.buffer!==A||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)m.bindBuffer(34962,A.buffer),m.vertexAttribPointer(nb,4,A.dtype,!1,0,0),wb.type=A.dtype,wb.size=4,wb.buffer=A,wb.normalized=!1,wb.offset=0,wb.stride=0;Cb=ha.location;ub=D[Cb];ub.buffer||m.enableVertexAttribArray(Cb);if(ub.type!==I.dtype||4!==ub.size||ub.buffer!==I||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)m.bindBuffer(34962,I.buffer),m.vertexAttribPointer(Cb,4,I.dtype,!1,0,0),ub.type=I.dtype,ub.size=4,ub.buffer=I,ub.normalized=
!1,ub.offset=0,ub.stride=0;qd=Pa.location;xb=D[qd];xb.buffer||m.enableVertexAttribArray(qd);if(xb.type!==u.dtype||4!==xb.size||xb.buffer!==u||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)m.bindBuffer(34962,u.buffer),m.vertexAttribPointer(qd,4,u.dtype,!1,0,0),xb.type=u.dtype,xb.size=4,xb.buffer=u,xb.normalized=!1,xb.offset=0,xb.stride=0;m.uniform1i(ta.location,sa.bind());(td=F.elements)?m.bindBuffer(34963,td.buffer.buffer):Hb.currentVAO&&(td=xa.getElements(Hb.currentVAO.elements))&&m.bindBuffer(34963,
td.buffer.buffer);for(g=0;g<e;++g){k=c[g];var ae,de,Je,Cd,je,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,la,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,gb,id,rd,Yc,Jc,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd;ld.height=k.viewportHeight;ld.width=k.viewportWidth;ld.x=k.viewportX;ld.y=k.viewportY;ae=ld.x|0;de=ld.y|0;Je="width"in ld?ld.width|0:x.framebufferWidth-ae;Cd="height"in ld?ld.height|0:x.framebufferHeight-de;je=x.viewportWidth;x.viewportWidth=Je;Wb=x.viewportHeight;x.viewportHeight=
Cd;m.viewport(ae,de,Je,Cd);sd[0]=ae;sd[1]=de;sd[2]=Je;sd[3]=Cd;wd.height=k.scissorHeight;wd.width=k.scissorWidth;wd.x=k.scissorX;wd.y=k.scissorY;cc=wd.x|0;Pb=wd.y|0;Ga="width"in wd?wd.width|0:x.framebufferWidth-cc;ac="height"in wd?wd.height|0:x.framebufferHeight-Pb;m.scissor(cc,Pb,Ga,ac);af[0]=cc;af[1]=Pb;af[2]=Ga;af[3]=ac;ob=k.dim0A;m.uniformMatrix4fv(H.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(md[0]=ob[0],md[1]=ob[1],md[2]=ob[2],md[3]=ob[3],md[4]=ob[4],md[5]=ob[5],md[6]=ob[6],
md[7]=ob[7],md[8]=ob[8],md[9]=ob[9],md[10]=ob[10],md[11]=ob[11],md[12]=ob[12],md[13]=ob[13],md[14]=ob[14],md[15]=ob[15],md));yb=k.dim1A;m.uniformMatrix4fv(M.location,!1,Array.isArray(yb)||yb instanceof Float32Array?yb:(Cc[0]=yb[0],Cc[1]=yb[1],Cc[2]=yb[2],Cc[3]=yb[3],Cc[4]=yb[4],Cc[5]=yb[5],Cc[6]=yb[6],Cc[7]=yb[7],Cc[8]=yb[8],Cc[9]=yb[9],Cc[10]=yb[10],Cc[11]=yb[11],Cc[12]=yb[12],Cc[13]=yb[13],Cc[14]=yb[14],Cc[15]=yb[15],Cc));Nb=k.dim0B;m.uniformMatrix4fv(L.location,!1,Array.isArray(Nb)||Nb instanceof
Float32Array?Nb:(Xb[0]=Nb[0],Xb[1]=Nb[1],Xb[2]=Nb[2],Xb[3]=Nb[3],Xb[4]=Nb[4],Xb[5]=Nb[5],Xb[6]=Nb[6],Xb[7]=Nb[7],Xb[8]=Nb[8],Xb[9]=Nb[9],Xb[10]=Nb[10],Xb[11]=Nb[11],Xb[12]=Nb[12],Xb[13]=Nb[13],Xb[14]=Nb[14],Xb[15]=Nb[15],Xb));Qb=k.dim1B;m.uniformMatrix4fv(Zb.location,!1,Array.isArray(Qb)||Qb instanceof Float32Array?Qb:(Hc[0]=Qb[0],Hc[1]=Qb[1],Hc[2]=Qb[2],Hc[3]=Qb[3],Hc[4]=Qb[4],Hc[5]=Qb[5],Hc[6]=Qb[6],Hc[7]=Qb[7],Hc[8]=Qb[8],Hc[9]=Qb[9],Hc[10]=Qb[10],Hc[11]=Qb[11],Hc[12]=Qb[12],Hc[13]=Qb[13],Hc[14]=
Qb[14],Hc[15]=Qb[15],Hc));fc=k.dim0C;m.uniformMatrix4fv(Q.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(Sc[0]=fc[0],Sc[1]=fc[1],Sc[2]=fc[2],Sc[3]=fc[3],Sc[4]=fc[4],Sc[5]=fc[5],Sc[6]=fc[6],Sc[7]=fc[7],Sc[8]=fc[8],Sc[9]=fc[9],Sc[10]=fc[10],Sc[11]=fc[11],Sc[12]=fc[12],Sc[13]=fc[13],Sc[14]=fc[14],Sc[15]=fc[15],Sc));ic=k.dim1C;m.uniformMatrix4fv($a.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Ka[0]=ic[0],Ka[1]=ic[1],Ka[2]=ic[2],Ka[3]=ic[3],Ka[4]=ic[4],Ka[5]=ic[5],Ka[6]=
ic[6],Ka[7]=ic[7],Ka[8]=ic[8],Ka[9]=ic[9],Ka[10]=ic[10],Ka[11]=ic[11],Ka[12]=ic[12],Ka[13]=ic[13],Ka[14]=ic[14],Ka[15]=ic[15],Ka));la=k.dim0D;m.uniformMatrix4fv(qa.location,!1,Array.isArray(la)||la instanceof Float32Array?la:(Eb[0]=la[0],Eb[1]=la[1],Eb[2]=la[2],Eb[3]=la[3],Eb[4]=la[4],Eb[5]=la[5],Eb[6]=la[6],Eb[7]=la[7],Eb[8]=la[8],Eb[9]=la[9],Eb[10]=la[10],Eb[11]=la[11],Eb[12]=la[12],Eb[13]=la[13],Eb[14]=la[14],Eb[15]=la[15],Eb));Dc=k.dim1D;m.uniformMatrix4fv(T.location,!1,Array.isArray(Dc)||Dc instanceof
Float32Array?Dc:(Wa[0]=Dc[0],Wa[1]=Dc[1],Wa[2]=Dc[2],Wa[3]=Dc[3],Wa[4]=Dc[4],Wa[5]=Dc[5],Wa[6]=Dc[6],Wa[7]=Dc[7],Wa[8]=Dc[8],Wa[9]=Dc[9],Wa[10]=Dc[10],Wa[11]=Dc[11],Wa[12]=Dc[12],Wa[13]=Dc[13],Wa[14]=Dc[14],Wa[15]=Dc[15],Wa));Ec=k.loA;m.uniformMatrix4fv($b.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(pa[0]=Ec[0],pa[1]=Ec[1],pa[2]=Ec[2],pa[3]=Ec[3],pa[4]=Ec[4],pa[5]=Ec[5],pa[6]=Ec[6],pa[7]=Ec[7],pa[8]=Ec[8],pa[9]=Ec[9],pa[10]=Ec[10],pa[11]=Ec[11],pa[12]=Ec[12],pa[13]=Ec[13],pa[14]=
Ec[14],pa[15]=Ec[15],pa));Fc=k.hiA;m.uniformMatrix4fv(ia.location,!1,Array.isArray(Fc)||Fc instanceof Float32Array?Fc:(ud[0]=Fc[0],ud[1]=Fc[1],ud[2]=Fc[2],ud[3]=Fc[3],ud[4]=Fc[4],ud[5]=Fc[5],ud[6]=Fc[6],ud[7]=Fc[7],ud[8]=Fc[8],ud[9]=Fc[9],ud[10]=Fc[10],ud[11]=Fc[11],ud[12]=Fc[12],ud[13]=Fc[13],ud[14]=Fc[14],ud[15]=Fc[15],ud));Oc=k.loB;m.uniformMatrix4fv(Ua.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(Ib[0]=Oc[0],Ib[1]=Oc[1],Ib[2]=Oc[2],Ib[3]=Oc[3],Ib[4]=Oc[4],Ib[5]=Oc[5],Ib[6]=Oc[6],
Ib[7]=Oc[7],Ib[8]=Oc[8],Ib[9]=Oc[9],Ib[10]=Oc[10],Ib[11]=Oc[11],Ib[12]=Oc[12],Ib[13]=Oc[13],Ib[14]=Oc[14],Ib[15]=Oc[15],Ib));$c=k.hiB;m.uniformMatrix4fv(ba.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(Ra[0]=$c[0],Ra[1]=$c[1],Ra[2]=$c[2],Ra[3]=$c[3],Ra[4]=$c[4],Ra[5]=$c[5],Ra[6]=$c[6],Ra[7]=$c[7],Ra[8]=$c[8],Ra[9]=$c[9],Ra[10]=$c[10],Ra[11]=$c[11],Ra[12]=$c[12],Ra[13]=$c[13],Ra[14]=$c[14],Ra[15]=$c[15],Ra));Tc=k.loC;m.uniformMatrix4fv(V.location,!1,Array.isArray(Tc)||Tc instanceof
Float32Array?Tc:(Gb[0]=Tc[0],Gb[1]=Tc[1],Gb[2]=Tc[2],Gb[3]=Tc[3],Gb[4]=Tc[4],Gb[5]=Tc[5],Gb[6]=Tc[6],Gb[7]=Tc[7],Gb[8]=Tc[8],Gb[9]=Tc[9],Gb[10]=Tc[10],Gb[11]=Tc[11],Gb[12]=Tc[12],Gb[13]=Tc[13],Gb[14]=Tc[14],Gb[15]=Tc[15],Gb));Pc=k.hiC;m.uniformMatrix4fv(va.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(eb[0]=Pc[0],eb[1]=Pc[1],eb[2]=Pc[2],eb[3]=Pc[3],eb[4]=Pc[4],eb[5]=Pc[5],eb[6]=Pc[6],eb[7]=Pc[7],eb[8]=Pc[8],eb[9]=Pc[9],eb[10]=Pc[10],eb[11]=Pc[11],eb[12]=Pc[12],eb[13]=Pc[13],eb[14]=
Pc[14],eb[15]=Pc[15],eb));Kb=k.loD;m.uniformMatrix4fv(pb.location,!1,Array.isArray(Kb)||Kb instanceof Float32Array?Kb:(pc[0]=Kb[0],pc[1]=Kb[1],pc[2]=Kb[2],pc[3]=Kb[3],pc[4]=Kb[4],pc[5]=Kb[5],pc[6]=Kb[6],pc[7]=Kb[7],pc[8]=Kb[8],pc[9]=Kb[9],pc[10]=Kb[10],pc[11]=Kb[11],pc[12]=Kb[12],pc[13]=Kb[13],pc[14]=Kb[14],pc[15]=Kb[15],pc));Fb=k.hiD;m.uniformMatrix4fv(La.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Sb[0]=Fb[0],Sb[1]=Fb[1],Sb[2]=Fb[2],Sb[3]=Fb[3],Sb[4]=Fb[4],Sb[5]=Fb[5],Sb[6]=Fb[6],
Sb[7]=Fb[7],Sb[8]=Fb[8],Sb[9]=Fb[9],Sb[10]=Fb[10],Sb[11]=Fb[11],Sb[12]=Fb[12],Sb[13]=Fb[13],Sb[14]=Fb[14],Sb[15]=Fb[15],Sb));Qc=k.resolution;Ic=Qc[0];gc=Qc[1];g&&Uc===Ic&&Xc===gc||(Uc=Ic,Xc=gc,m.uniform2f(W.location,Ic,gc));gb=k.viewBoxPos;id=gb[0];Yc=gb[1];g&&rd===id&&Jc===Yc||(rd=id,Jc=Yc,m.uniform2f(fa.location,id,Yc));Ud=k.viewBoxSize;he=Ud[0];le=Ud[1];g&&se===he&&Fd===le||(se=he,Fd=le,m.uniform2f(oa.location,he,le));Dd=k.maskHeight;g&&ed===Dd||(ed=Dd,m.uniform1f(ca.location,Dd));Gc=k.drwLayer;
g&&pd===Gc||(pd=Gc,m.uniform1f(t.location,Gc));jd=k.contextColor;bd=jd[0];Ad=jd[1];we=jd[2];ve=jd[3];g&&kd===bd&&Bd===Ad&&me===we&&ce===ve||(kd=bd,Bd=Ad,me=we,ce=ve,m.uniform4f(X.location,bd,Ad,we,ve));(be=k.maskTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);$d=be._texture;m.uniform1i(ma.location,$d.bind());oe=k.offset;if(Yd=k.count)td?m.drawElements(1,Yd,td.type,oe<<(td.type-5121>>1)):m.drawArrays(1,oe,Yd),x.viewportWidth=je,x.viewportHeight=Wb,$d.unbind()}sa.unbind();Z.dirty=!0;Hb.setVAO(null);
Z.profile=l},draw:function(e){var h,l,g,k,q,w;h=Da.next;h!==Da.cur&&(h?m.bindFramebuffer(36160,h.framebuffer):m.bindFramebuffer(36160,null),Da.cur=h);if(Z.dirty){h=re[0];w=re[1];l=re[2];g=re[3];if(h!==xd[0]||w!==xd[1]||l!==xd[2]||g!==xd[3])m.colorMask(h,w,l,g),xd[0]=h,xd[1]=w,xd[2]=l,xd[3]=g;h=rc.frontFace;h!==Z.frontFace&&(m.frontFace(h),Z.frontFace=h);h=rc.polygonOffset_enable;h!==Z.polygonOffset_enable&&(h?m.enable(32823):m.disable(32823),Z.polygonOffset_enable=h);h=Kd[0];w=Kd[1];if(h!==Xd[0]||
w!==Xd[1])m.polygonOffset(h,w),Xd[0]=h,Xd[1]=w;h=rc.sample_alpha;h!==Z.sample_alpha&&(h?m.enable(32926):m.disable(32926),Z.sample_alpha=h);h=rc.sample_enable;h!==Z.sample_enable&&(h?m.enable(32928):m.disable(32928),Z.sample_enable=h);h=Wd[0];w=Wd[1];if(h!==Ld[0]||w!==Ld[1])m.sampleCoverage(h,w),Ld[0]=h,Ld[1]=w;h=rc.stencil_enable;h!==Z.stencil_enable&&(h?m.enable(2960):m.disable(2960),Z.stencil_enable=h);h=rc.stencil_mask;h!==Z.stencil_mask&&(m.stencilMask(h),Z.stencil_mask=h);h=bf[0];w=bf[1];l=bf[2];
if(h!==yd[0]||w!==yd[1]||l!==yd[2])m.stencilFunc(h,w,l),yd[0]=h,yd[1]=w,yd[2]=l;h=Sd[0];w=Sd[1];l=Sd[2];g=Sd[3];if(h!==ke[0]||w!==ke[1]||l!==ke[2]||g!==ke[3])m.stencilOpSeparate(h,w,l,g),ke[0]=h,ke[1]=w,ke[2]=l,ke[3]=g;h=Ce[0];w=Ce[1];l=Ce[2];g=Ce[3];if(h!==Rd[0]||w!==Rd[1]||l!==Rd[2]||g!==Rd[3])m.stencilOpSeparate(h,w,l,g),Rd[0]=h,Rd[1]=w,Rd[2]=l,Rd[3]=g}ld.height=e.viewportHeight;ld.width=e.viewportWidth;ld.x=e.viewportX;ld.y=e.viewportY;l=ld.x|0;g=ld.y|0;k="width"in ld?ld.width|0:x.framebufferWidth-
l;q="height"in ld?ld.height|0:x.framebufferHeight-g;h=x.viewportWidth;x.viewportWidth=k;w=x.viewportHeight;x.viewportHeight=q;m.viewport(l,g,k,q);sd[0]=l;sd[1]=g;sd[2]=k;sd[3]=q;m.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;m.disable(3042);Z.blend_enable=!1;m.blendEquationSeparate(32774,32774);ge[0]=32774;ge[1]=32774;m.blendFuncSeparate(770,771,1,1);Hd[0]=770;Hd[1]=771;Hd[2]=1;Hd[3]=1;m.enable(2884);Z.cull_enable=!0;m.cullFace(1029);Z.cull_face=1029;m.enable(2929);Z.depth_enable=!0;m.depthFunc(513);
Z.depth_func=513;m.depthMask(!0);Z.depth_mask=!0;m.depthRange(0,1);te[0]=0;te[1]=1;m.disable(3024);Z.dither=!1;m.lineWidth(2);Z.lineWidth=2;wd.height=e.scissorHeight;wd.width=e.scissorWidth;wd.x=e.scissorX;wd.y=e.scissorY;l=wd.x|0;g=wd.y|0;k="width"in wd?wd.width|0:x.framebufferWidth-l;q="height"in wd?wd.height|0:x.framebufferHeight-g;m.scissor(l,g,k,q);af[0]=l;af[1]=g;af[2]=k;af[3]=q;m.enable(3089);Z.scissor_enable=!0;l=Z.profile;Z.profile=!1;m.useProgram(c.program);Hb.setVAO(null);g=Rb.location;
k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==b.dtype||4!==k.size||k.buffer!==b||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,b.buffer),m.vertexAttribPointer(g,4,b.dtype,!1,0,0),k.type=b.dtype,k.size=4,k.buffer=b,k.normalized=!1,k.offset=0,k.stride=0;g=oc.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==f.dtype||4!==k.size||k.buffer!==f||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,f.buffer),m.vertexAttribPointer(g,4,f.dtype,!1,
0,0),k.type=f.dtype,k.size=4,k.buffer=f,k.normalized=!1,k.offset=0,k.stride=0;g=tc.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==a.dtype||4!==k.size||k.buffer!==a||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,a.buffer),m.vertexAttribPointer(g,4,a.dtype,!1,0,0),k.type=a.dtype,k.size=4,k.buffer=a,k.normalized=!1,k.offset=0,k.stride=0;g=vd.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==n.dtype||4!==k.size||k.buffer!==n||!1!==k.normalized||
0!==k.offset||0!==k.stride)m.bindBuffer(34962,n.buffer),m.vertexAttribPointer(g,4,n.dtype,!1,0,0),k.type=n.dtype,k.size=4,k.buffer=n,k.normalized=!1,k.offset=0,k.stride=0;g=yc.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==d.dtype||4!==k.size||k.buffer!==d||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,d.buffer),m.vertexAttribPointer(g,4,d.dtype,!1,0,0),k.type=d.dtype,k.size=4,k.buffer=d,k.normalized=!1,k.offset=0,k.stride=0;g=Y.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);
if(k.type!==p.dtype||4!==k.size||k.buffer!==p||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,p.buffer),m.vertexAttribPointer(g,4,p.dtype,!1,0,0),k.type=p.dtype,k.size=4,k.buffer=p,k.normalized=!1,k.offset=0,k.stride=0;g=J.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==aa.dtype||4!==k.size||k.buffer!==aa||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,aa.buffer),m.vertexAttribPointer(g,4,aa.dtype,!1,0,0),k.type=aa.dtype,k.size=4,k.buffer=aa,
k.normalized=!1,k.offset=0,k.stride=0;g=ja.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==R.dtype||4!==k.size||k.buffer!==R||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,R.buffer),m.vertexAttribPointer(g,4,R.dtype,!1,0,0),k.type=R.dtype,k.size=4,k.buffer=R,k.normalized=!1,k.offset=0,k.stride=0;g=Ca.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==r.dtype||4!==k.size||k.buffer!==r||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,
r.buffer),m.vertexAttribPointer(g,4,r.dtype,!1,0,0),k.type=r.dtype,k.size=4,k.buffer=r,k.normalized=!1,k.offset=0,k.stride=0;g=Lb.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==wa.dtype||4!==k.size||k.buffer!==wa||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,wa.buffer),m.vertexAttribPointer(g,4,wa.dtype,!1,0,0),k.type=wa.dtype,k.size=4,k.buffer=wa,k.normalized=!1,k.offset=0,k.stride=0;g=ab.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==v.dtype||
4!==k.size||k.buffer!==v||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,v.buffer),m.vertexAttribPointer(g,4,v.dtype,!1,0,0),k.type=v.dtype,k.size=4,k.buffer=v,k.normalized=!1,k.offset=0,k.stride=0;g=Vc.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==C.dtype||4!==k.size||k.buffer!==C||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,C.buffer),m.vertexAttribPointer(g,4,C.dtype,!1,0,0),k.type=C.dtype,k.size=4,k.buffer=C,k.normalized=!1,k.offset=0,
k.stride=0;g=E.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==O.dtype||4!==k.size||k.buffer!==O||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,O.buffer),m.vertexAttribPointer(g,4,O.dtype,!1,0,0),k.type=O.dtype,k.size=4,k.buffer=O,k.normalized=!1,k.offset=0,k.stride=0;g=y.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==A.dtype||4!==k.size||k.buffer!==A||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,A.buffer),m.vertexAttribPointer(g,
4,A.dtype,!1,0,0),k.type=A.dtype,k.size=4,k.buffer=A,k.normalized=!1,k.offset=0,k.stride=0;g=ha.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==I.dtype||4!==k.size||k.buffer!==I||!1!==k.normalized||0!==k.offset||0!==k.stride)m.bindBuffer(34962,I.buffer),m.vertexAttribPointer(g,4,I.dtype,!1,0,0),k.type=I.dtype,k.size=4,k.buffer=I,k.normalized=!1,k.offset=0,k.stride=0;g=Pa.location;k=D[g];k.buffer||m.enableVertexAttribArray(g);if(k.type!==u.dtype||4!==k.size||k.buffer!==u||!1!==k.normalized||
0!==k.offset||0!==k.stride)m.bindBuffer(34962,u.buffer),m.vertexAttribPointer(g,4,u.dtype,!1,0,0),k.type=u.dtype,k.size=4,k.buffer=u,k.normalized=!1,k.offset=0,k.stride=0;g=e.dim0A;m.uniformMatrix4fv(H.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(qd[0]=g[0],qd[1]=g[1],qd[2]=g[2],qd[3]=g[3],qd[4]=g[4],qd[5]=g[5],qd[6]=g[6],qd[7]=g[7],qd[8]=g[8],qd[9]=g[9],qd[10]=g[10],qd[11]=g[11],qd[12]=g[12],qd[13]=g[13],qd[14]=g[14],qd[15]=g[15],qd));g=e.dim1A;m.uniformMatrix4fv(M.location,!1,Array.isArray(g)||
g instanceof Float32Array?g:(Bc[0]=g[0],Bc[1]=g[1],Bc[2]=g[2],Bc[3]=g[3],Bc[4]=g[4],Bc[5]=g[5],Bc[6]=g[6],Bc[7]=g[7],Bc[8]=g[8],Bc[9]=g[9],Bc[10]=g[10],Bc[11]=g[11],Bc[12]=g[12],Bc[13]=g[13],Bc[14]=g[14],Bc[15]=g[15],Bc));g=e.dim0B;m.uniformMatrix4fv(L.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(lc[0]=g[0],lc[1]=g[1],lc[2]=g[2],lc[3]=g[3],lc[4]=g[4],lc[5]=g[5],lc[6]=g[6],lc[7]=g[7],lc[8]=g[8],lc[9]=g[9],lc[10]=g[10],lc[11]=g[11],lc[12]=g[12],lc[13]=g[13],lc[14]=g[14],lc[15]=g[15],lc));
g=e.dim1B;m.uniformMatrix4fv(Zb.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(td[0]=g[0],td[1]=g[1],td[2]=g[2],td[3]=g[3],td[4]=g[4],td[5]=g[5],td[6]=g[6],td[7]=g[7],td[8]=g[8],td[9]=g[9],td[10]=g[10],td[11]=g[11],td[12]=g[12],td[13]=g[13],td[14]=g[14],td[15]=g[15],td));g=e.dim0C;m.uniformMatrix4fv(Q.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(gd[0]=g[0],gd[1]=g[1],gd[2]=g[2],gd[3]=g[3],gd[4]=g[4],gd[5]=g[5],gd[6]=g[6],gd[7]=g[7],gd[8]=g[8],gd[9]=g[9],gd[10]=g[10],gd[11]=
g[11],gd[12]=g[12],gd[13]=g[13],gd[14]=g[14],gd[15]=g[15],gd));g=e.dim1C;m.uniformMatrix4fv($a.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Mc[0]=g[0],Mc[1]=g[1],Mc[2]=g[2],Mc[3]=g[3],Mc[4]=g[4],Mc[5]=g[5],Mc[6]=g[6],Mc[7]=g[7],Mc[8]=g[8],Mc[9]=g[9],Mc[10]=g[10],Mc[11]=g[11],Mc[12]=g[12],Mc[13]=g[13],Mc[14]=g[14],Mc[15]=g[15],Mc));g=e.dim0D;m.uniformMatrix4fv(qa.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(uc[0]=g[0],uc[1]=g[1],uc[2]=g[2],uc[3]=g[3],uc[4]=g[4],uc[5]=g[5],
uc[6]=g[6],uc[7]=g[7],uc[8]=g[8],uc[9]=g[9],uc[10]=g[10],uc[11]=g[11],uc[12]=g[12],uc[13]=g[13],uc[14]=g[14],uc[15]=g[15],uc));g=e.dim1D;m.uniformMatrix4fv(T.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(bb[0]=g[0],bb[1]=g[1],bb[2]=g[2],bb[3]=g[3],bb[4]=g[4],bb[5]=g[5],bb[6]=g[6],bb[7]=g[7],bb[8]=g[8],bb[9]=g[9],bb[10]=g[10],bb[11]=g[11],bb[12]=g[12],bb[13]=g[13],bb[14]=g[14],bb[15]=g[15],bb));g=e.loA;m.uniformMatrix4fv($b.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(jc[0]=
g[0],jc[1]=g[1],jc[2]=g[2],jc[3]=g[3],jc[4]=g[4],jc[5]=g[5],jc[6]=g[6],jc[7]=g[7],jc[8]=g[8],jc[9]=g[9],jc[10]=g[10],jc[11]=g[11],jc[12]=g[12],jc[13]=g[13],jc[14]=g[14],jc[15]=g[15],jc));g=e.hiA;m.uniformMatrix4fv(ia.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Db[0]=g[0],Db[1]=g[1],Db[2]=g[2],Db[3]=g[3],Db[4]=g[4],Db[5]=g[5],Db[6]=g[6],Db[7]=g[7],Db[8]=g[8],Db[9]=g[9],Db[10]=g[10],Db[11]=g[11],Db[12]=g[12],Db[13]=g[13],Db[14]=g[14],Db[15]=g[15],Db));g=e.loB;m.uniformMatrix4fv(Ua.location,
!1,Array.isArray(g)||g instanceof Float32Array?g:(sc[0]=g[0],sc[1]=g[1],sc[2]=g[2],sc[3]=g[3],sc[4]=g[4],sc[5]=g[5],sc[6]=g[6],sc[7]=g[7],sc[8]=g[8],sc[9]=g[9],sc[10]=g[10],sc[11]=g[11],sc[12]=g[12],sc[13]=g[13],sc[14]=g[14],sc[15]=g[15],sc));g=e.hiB;m.uniformMatrix4fv(ba.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Sa[0]=g[0],Sa[1]=g[1],Sa[2]=g[2],Sa[3]=g[3],Sa[4]=g[4],Sa[5]=g[5],Sa[6]=g[6],Sa[7]=g[7],Sa[8]=g[8],Sa[9]=g[9],Sa[10]=g[10],Sa[11]=g[11],Sa[12]=g[12],Sa[13]=g[13],Sa[14]=
g[14],Sa[15]=g[15],Sa));g=e.loC;m.uniformMatrix4fv(V.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Kc[0]=g[0],Kc[1]=g[1],Kc[2]=g[2],Kc[3]=g[3],Kc[4]=g[4],Kc[5]=g[5],Kc[6]=g[6],Kc[7]=g[7],Kc[8]=g[8],Kc[9]=g[9],Kc[10]=g[10],Kc[11]=g[11],Kc[12]=g[12],Kc[13]=g[13],Kc[14]=g[14],Kc[15]=g[15],Kc));g=e.hiC;m.uniformMatrix4fv(va.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(bc[0]=g[0],bc[1]=g[1],bc[2]=g[2],bc[3]=g[3],bc[4]=g[4],bc[5]=g[5],bc[6]=g[6],bc[7]=g[7],bc[8]=g[8],bc[9]=g[9],
bc[10]=g[10],bc[11]=g[11],bc[12]=g[12],bc[13]=g[13],bc[14]=g[14],bc[15]=g[15],bc));g=e.loD;m.uniformMatrix4fv(pb.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Zc[0]=g[0],Zc[1]=g[1],Zc[2]=g[2],Zc[3]=g[3],Zc[4]=g[4],Zc[5]=g[5],Zc[6]=g[6],Zc[7]=g[7],Zc[8]=g[8],Zc[9]=g[9],Zc[10]=g[10],Zc[11]=g[11],Zc[12]=g[12],Zc[13]=g[13],Zc[14]=g[14],Zc[15]=g[15],Zc));g=e.hiD;m.uniformMatrix4fv(La.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Cd[0]=g[0],Cd[1]=g[1],Cd[2]=g[2],Cd[3]=g[3],Cd[4]=
g[4],Cd[5]=g[5],Cd[6]=g[6],Cd[7]=g[7],Cd[8]=g[8],Cd[9]=g[9],Cd[10]=g[10],Cd[11]=g[11],Cd[12]=g[12],Cd[13]=g[13],Cd[14]=g[14],Cd[15]=g[15],Cd));g=e.resolution;m.uniform2f(W.location,g[0],g[1]);g=e.viewBoxPos;m.uniform2f(fa.location,g[0],g[1]);g=e.viewBoxSize;m.uniform2f(oa.location,g[0],g[1]);m.uniform1f(ca.location,e.maskHeight);m.uniform1f(t.location,e.drwLayer);g=e.contextColor;m.uniform4f(X.location,g[0],g[1],g[2],g[3]);(g=e.maskTexture)&&"framebuffer"===g._reglType&&(g=g.color[0]);g=g._texture;
m.uniform1i(ma.location,g.bind());m.uniform1i(ta.location,N.bind());(k=F.elements)?m.bindBuffer(34963,k.buffer.buffer):Hb.currentVAO&&(k=xa.getElements(Hb.currentVAO.elements))&&m.bindBuffer(34963,k.buffer.buffer);q=e.offset;if(e=e.count)k?m.drawElements(1,e,k.type,q<<(k.type-5121>>1)):m.drawArrays(1,q,e),Z.dirty=!0,Hb.setVAO(null),x.viewportWidth=h,x.viewportHeight=w,Z.profile=l,g.unbind(),N.unbind()},scope:function(c,e,l){var m,t,y,J,D,E,Y,L,H,M,Q,T,V,W,fa,ja,X,N,ha,ba,xa,ca,ia,ta,Da,pa,oc,bb,oa,
Sa,Ca,ya,Ka,Ld,Db,Hb,Wa,za,Sd,Ea,bc,Hc,Mc,qa,gd,Xb,jc,Ra,Eb,uc,Fa,Sc,Oa,Ba,vd,ma,Bc,Ib,eb,sa,lc,sc,yd,Rd,Kc,Cc,xd,Zc,Gb,Ga,Lb,ob,yb,sd,td,ke,ab,Sb,qd,yc,ud,pc,va,md,Ue,Kb,Fb,ge,Kd,af,Ce,Cd,Rb,bf,$a,Pa,tc,Hd,Wd,re,La,pb,Xd,te,Gc,Zb,Ua,Vc,kd,$b,ea,hc,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,Pe,Le,We,Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf,rf,of,sf,Cf,Df,Me,ze,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,
Tf,qg,df,Ze,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,$e,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ld.height=c.viewportHeight;ld.width=c.viewportWidth;ld.x=c.viewportX;ld.y=c.viewportY;m=ld.x|0;t=ld.y|0;y="width"in ld?ld.width|0:x.framebufferWidth-m;J="height"in ld?ld.height|0:x.framebufferHeight-t;D=x.viewportWidth;x.viewportWidth=
y;E=x.viewportHeight;x.viewportHeight=J;Y=Je[0];Je[0]=m;L=Je[1];Je[1]=t;H=Je[2];Je[2]=y;M=Je[3];Je[3]=J;Q=zb[0];zb[0]=0;T=zb[1];zb[1]=0;V=zb[2];zb[2]=0;W=zb[3];zb[3]=0;fa=rc.blend_enable;rc.blend_enable=!1;ja=je[0];je[0]=32774;X=je[1];je[1]=32774;N=ae[0];ae[0]=770;ha=ae[1];ae[1]=771;ba=ae[2];ae[2]=1;xa=ae[3];ae[3]=1;ca=rc.cull_enable;rc.cull_enable=!0;ia=rc.cull_face;rc.cull_face=1029;ta=rc.depth_enable;rc.depth_enable=!0;Da=rc.depth_func;rc.depth_func=513;pa=rc.depth_mask;rc.depth_mask=!0;oc=de[0];
de[0]=0;bb=de[1];de[1]=1;oa=rc.dither;rc.dither=!1;Sa=rc.lineWidth;rc.lineWidth=2;wd.height=c.scissorHeight;wd.width=c.scissorWidth;wd.x=c.scissorX;wd.y=c.scissorY;Ca=wd.x|0;ya=wd.y|0;Ka="width"in wd?wd.width|0:x.framebufferWidth-Ca;Ld="height"in wd?wd.height|0:x.framebufferHeight-ya;Db=Ve[0];Ve[0]=Ca;Hb=Ve[1];Ve[1]=ya;Wa=Ve[2];Ve[2]=Ka;za=Ve[3];Ve[3]=Ld;Sd=rc.scissor_enable;rc.scissor_enable=!0;Ea=Z.profile;Z.profile=!1;bc=c.offset;Hc=F.offset;F.offset=bc;Mc=c.count;qa=F.count;F.count=Mc;gd=F.primitive;
F.primitive=1;Xb=c.contextColor;jc=S[24];S[24]=Xb;Ra=c.dim0A;Eb=S[3];S[3]=Ra;uc=c.dim0B;Fa=S[5];S[5]=uc;Sc=c.dim0C;Oa=S[7];S[7]=Sc;Ba=c.dim0D;vd=S[9];S[9]=Ba;ma=c.dim1A;Bc=S[4];S[4]=ma;Ib=c.dim1B;eb=S[6];S[6]=Ib;sa=c.dim1C;lc=S[8];S[8]=sa;sc=c.dim1D;yd=S[10];S[10]=sc;Rd=c.drwLayer;Kc=S[23];S[23]=Rd;Cc=c.hiA;xd=S[12];S[12]=Cc;Zc=c.hiB;Gb=S[14];S[14]=Zc;Ga=c.hiC;Lb=S[16];S[16]=Ga;ob=c.hiD;yb=S[18];S[18]=ob;sd=c.loA;td=S[11];S[11]=sd;ke=c.loB;ab=S[13];S[13]=ke;Sb=c.loC;qd=S[15];S[15]=Sb;yc=c.loD;ud=
S[17];S[17]=yc;pc=c.maskHeight;va=S[22];S[22]=pc;md=c.maskTexture;Ue=S[25];S[25]=md;Kb=S[26];S[26]=B;Fb=c.resolution;ge=S[19];S[19]=Fb;Kd=c.viewBoxPos;af=S[20];S[20]=Kd;Ce=c.viewBoxSize;Cd=S[21];S[21]=Ce;Rb=q.buffer;q.buffer=u;bf=q.divisor;q.divisor=0;$a=q.normalized;q.normalized=!1;Pa=q.offset;q.offset=0;tc=q.size;q.size=0;Hd=q.state;q.state=1;Wd=q.stride;q.stride=0;re=q.type;q.type=u.dtype;La=q.w;q.w=0;pb=q.x;q.x=0;Xd=q.y;q.y=0;te=q.z;q.z=0;Gc=z.buffer;z.buffer=b;Zb=z.divisor;z.divisor=0;Ua=z.normalized;
z.normalized=!1;Vc=z.offset;z.offset=0;kd=z.size;z.size=0;$b=z.state;z.state=1;ea=z.stride;z.stride=0;hc=z.type;z.type=b.dtype;me=z.w;z.w=0;ve=z.x;z.x=0;ce=z.y;z.y=0;be=z.z;z.z=0;$d=k.buffer;k.buffer=f;oe=k.divisor;k.divisor=0;Yd=k.normalized;k.normalized=!1;ee=k.offset;k.offset=0;Ac=k.size;k.size=0;Wc=k.state;k.state=1;pe=k.stride;k.stride=0;ie=k.type;k.type=f.dtype;Ed=k.w;k.w=0;Jd=k.x;k.x=0;Md=k.y;k.y=0;Nd=k.z;k.z=0;fe=da.buffer;da.buffer=a;De=da.divisor;da.divisor=0;xe=da.normalized;da.normalized=
!1;ne=da.offset;da.offset=0;Ye=da.size;da.size=0;Oe=da.state;da.state=1;Ke=da.stride;da.stride=0;qe=da.type;da.type=a.dtype;Ae=da.w;da.w=0;Ee=da.x;da.x=0;Fe=da.y;da.y=0;Ge=da.z;da.z=0;Be=P.buffer;P.buffer=n;Gd=P.divisor;P.divisor=0;Qd=P.normalized;P.normalized=!1;Vd=P.offset;P.offset=0;Zd=P.size;P.size=0;He=P.state;P.state=1;zd=P.stride;P.stride=0;Od=P.type;P.type=n.dtype;ye=P.w;P.w=0;Ie=P.x;P.x=0;gf=P.y;P.y=0;Xe=P.z;P.z=0;Pe=K.buffer;K.buffer=d;Le=K.divisor;K.divisor=0;We=K.normalized;K.normalized=
!1;Te=K.offset;K.offset=0;Qe=K.size;K.size=0;Re=K.state;K.state=1;Pd=K.stride;K.stride=0;Td=K.type;K.type=d.dtype;Se=K.w;K.w=0;hf=K.x;K.x=0;mf=K.y;K.y=0;cf=K.z;K.z=0;jf=w.buffer;w.buffer=p;kf=w.divisor;w.divisor=0;lf=w.normalized;w.normalized=!1;rf=w.offset;w.offset=0;of=w.size;w.size=0;sf=w.state;w.state=1;Cf=w.stride;w.stride=0;Df=w.type;w.type=p.dtype;Me=w.w;w.w=0;ze=w.x;w.x=0;pf=w.y;w.y=0;qf=w.z;w.z=0;Ef=na.buffer;na.buffer=aa;Hf=na.divisor;na.divisor=0;Bf=na.normalized;na.normalized=!1;Ff=na.offset;
na.offset=0;Gf=na.size;na.size=0;xf=na.state;na.state=1;yf=na.stride;na.stride=0;wf=na.type;na.type=aa.dtype;zf=na.w;na.w=0;Af=na.x;na.x=0;Jf=na.y;na.y=0;Kf=na.z;na.z=0;Lf=G.buffer;G.buffer=R;Mf=G.divisor;G.divisor=0;uf=G.normalized;G.normalized=!1;Rf=G.offset;G.offset=0;If=G.size;G.size=0;vf=G.state;G.state=1;dg=G.stride;G.stride=0;Sf=G.type;G.type=R.dtype;Tf=G.w;G.w=0;qg=G.x;G.x=0;df=G.y;G.y=0;Ze=G.z;G.z=0;Nf=ga.buffer;ga.buffer=r;Of=ga.divisor;ga.divisor=0;eg=ga.normalized;ga.normalized=!1;fg=
ga.offset;ga.offset=0;gg=ga.size;ga.size=0;hg=ga.state;ga.state=1;ig=ga.stride;ga.stride=0;Wf=ga.type;ga.type=r.dtype;Uf=ga.w;ga.w=0;Xf=ga.x;ga.x=0;Yf=ga.y;ga.y=0;Zf=ga.z;ga.z=0;jg=h.buffer;h.buffer=wa;rg=h.divisor;h.divisor=0;sg=h.normalized;h.normalized=!1;tg=h.offset;h.offset=0;ug=h.size;h.size=0;vg=h.state;h.state=1;wg=h.stride;h.stride=0;xg=h.type;h.type=wa.dtype;yg=h.w;h.w=0;zg=h.x;h.x=0;Ag=h.y;h.y=0;Bg=h.z;h.z=0;ef=g.buffer;g.buffer=v;$e=g.divisor;g.divisor=0;Pf=g.normalized;g.normalized=!1;
Qf=g.offset;g.offset=0;kg=g.size;g.size=0;lg=g.state;g.state=1;mg=g.stride;g.stride=0;ng=g.type;g.type=v.dtype;og=g.w;g.w=0;$f=g.x;g.x=0;Vf=g.y;g.y=0;ag=g.z;g.z=0;bg=U.buffer;U.buffer=C;cg=U.divisor;U.divisor=0;pg=U.normalized;U.normalized=!1;Cg=U.offset;U.offset=0;Dg=U.size;U.size=0;Eg=U.state;U.state=1;Fg=U.stride;U.stride=0;Gg=U.type;U.type=C.dtype;Hg=U.w;U.w=0;Ig=U.x;U.x=0;Jg=U.y;U.y=0;Kg=U.z;U.z=0;Lg=ka.buffer;ka.buffer=O;Mg=ka.divisor;ka.divisor=0;Ng=ka.normalized;ka.normalized=!1;Og=ka.offset;
ka.offset=0;Pg=ka.size;ka.size=0;Qg=ka.state;ka.state=1;Rg=ka.stride;ka.stride=0;Sg=ka.type;ka.type=O.dtype;Tg=ka.w;ka.w=0;Ug=ka.x;ka.x=0;Vg=ka.y;ka.y=0;Wg=ka.z;ka.z=0;Xg=la.buffer;la.buffer=A;Yg=la.divisor;la.divisor=0;Zg=la.normalized;la.normalized=!1;$g=la.offset;la.offset=0;ah=la.size;la.size=0;bh=la.state;la.state=1;ch=la.stride;la.stride=0;dh=la.type;la.type=A.dtype;eh=la.w;la.w=0;fh=la.x;la.x=0;gh=la.y;la.y=0;hh=la.z;la.z=0;ih=gb.buffer;gb.buffer=I;jh=gb.divisor;gb.divisor=0;kh=gb.normalized;
gb.normalized=!1;lh=gb.offset;gb.offset=0;mh=gb.size;gb.size=0;nh=gb.state;gb.state=1;oh=gb.stride;gb.stride=0;ph=gb.type;gb.type=I.dtype;qh=gb.w;gb.w=0;rh=gb.x;gb.x=0;sh=gb.y;gb.y=0;th=gb.z;gb.z=0;uh=Ia.vert;Ia.vert=2;vh=Ia.frag;Ia.frag=1;Z.dirty=!0;e(x,c,l);x.viewportWidth=D;x.viewportHeight=E;Je[0]=Y;Je[1]=L;Je[2]=H;Je[3]=M;zb[0]=Q;zb[1]=T;zb[2]=V;zb[3]=W;rc.blend_enable=fa;je[0]=ja;je[1]=X;ae[0]=N;ae[1]=ha;ae[2]=ba;ae[3]=xa;rc.cull_enable=ca;rc.cull_face=ia;rc.depth_enable=ta;rc.depth_func=Da;
rc.depth_mask=pa;de[0]=oc;de[1]=bb;rc.dither=oa;rc.lineWidth=Sa;Ve[0]=Db;Ve[1]=Hb;Ve[2]=Wa;Ve[3]=za;rc.scissor_enable=Sd;Z.profile=Ea;F.offset=Hc;F.count=qa;F.primitive=gd;S[24]=jc;S[3]=Eb;S[5]=Fa;S[7]=Oa;S[9]=vd;S[4]=Bc;S[6]=eb;S[8]=lc;S[10]=yd;S[23]=Kc;S[12]=xd;S[14]=Gb;S[16]=Lb;S[18]=yb;S[11]=td;S[13]=ab;S[15]=qd;S[17]=ud;S[22]=va;S[25]=Ue;S[26]=Kb;S[19]=ge;S[20]=af;S[21]=Cd;q.buffer=Rb;q.divisor=bf;q.normalized=$a;q.offset=Pa;q.size=tc;q.state=Hd;q.stride=Wd;q.type=re;q.w=La;q.x=pb;q.y=Xd;q.z=
te;z.buffer=Gc;z.divisor=Zb;z.normalized=Ua;z.offset=Vc;z.size=kd;z.state=$b;z.stride=ea;z.type=hc;z.w=me;z.x=ve;z.y=ce;z.z=be;k.buffer=$d;k.divisor=oe;k.normalized=Yd;k.offset=ee;k.size=Ac;k.state=Wc;k.stride=pe;k.type=ie;k.w=Ed;k.x=Jd;k.y=Md;k.z=Nd;da.buffer=fe;da.divisor=De;da.normalized=xe;da.offset=ne;da.size=Ye;da.state=Oe;da.stride=Ke;da.type=qe;da.w=Ae;da.x=Ee;da.y=Fe;da.z=Ge;P.buffer=Be;P.divisor=Gd;P.normalized=Qd;P.offset=Vd;P.size=Zd;P.state=He;P.stride=zd;P.type=Od;P.w=ye;P.x=Ie;P.y=
gf;P.z=Xe;K.buffer=Pe;K.divisor=Le;K.normalized=We;K.offset=Te;K.size=Qe;K.state=Re;K.stride=Pd;K.type=Td;K.w=Se;K.x=hf;K.y=mf;K.z=cf;w.buffer=jf;w.divisor=kf;w.normalized=lf;w.offset=rf;w.size=of;w.state=sf;w.stride=Cf;w.type=Df;w.w=Me;w.x=ze;w.y=pf;w.z=qf;na.buffer=Ef;na.divisor=Hf;na.normalized=Bf;na.offset=Ff;na.size=Gf;na.state=xf;na.stride=yf;na.type=wf;na.w=zf;na.x=Af;na.y=Jf;na.z=Kf;G.buffer=Lf;G.divisor=Mf;G.normalized=uf;G.offset=Rf;G.size=If;G.state=vf;G.stride=dg;G.type=Sf;G.w=Tf;G.x=
qg;G.y=df;G.z=Ze;ga.buffer=Nf;ga.divisor=Of;ga.normalized=eg;ga.offset=fg;ga.size=gg;ga.state=hg;ga.stride=ig;ga.type=Wf;ga.w=Uf;ga.x=Xf;ga.y=Yf;ga.z=Zf;h.buffer=jg;h.divisor=rg;h.normalized=sg;h.offset=tg;h.size=ug;h.state=vg;h.stride=wg;h.type=xg;h.w=yg;h.x=zg;h.y=Ag;h.z=Bg;g.buffer=ef;g.divisor=$e;g.normalized=Pf;g.offset=Qf;g.size=kg;g.state=lg;g.stride=mg;g.type=ng;g.w=og;g.x=$f;g.y=Vf;g.z=ag;U.buffer=bg;U.divisor=cg;U.normalized=pg;U.offset=Cg;U.size=Dg;U.state=Eg;U.stride=Fg;U.type=Gg;U.w=
Hg;U.x=Ig;U.y=Jg;U.z=Kg;ka.buffer=Lg;ka.divisor=Mg;ka.normalized=Ng;ka.offset=Og;ka.size=Pg;ka.state=Qg;ka.stride=Rg;ka.type=Sg;ka.w=Tg;ka.x=Ug;ka.y=Vg;ka.z=Wg;la.buffer=Xg;la.divisor=Yg;la.normalized=Zg;la.offset=$g;la.size=ah;la.state=bh;la.stride=ch;la.type=dh;la.w=eh;la.x=fh;la.y=gh;la.z=hh;gb.buffer=ih;gb.divisor=jh;gb.normalized=kh;gb.offset=lh;gb.size=mh;gb.state=nh;gb.stride=oh;gb.type=ph;gb.w=qh;gb.x=rh;gb.y=sh;gb.z=th;Ia.vert=uh;Ia.frag=vh;Z.dirty=!0}}},$1:function(e,l){var c,b,f,a,n,d,
p,aa,R,r,wa,v,C,u,A,I,B,N,Jc,q,z,k,da,P,K,w,na,G,ga,h;c=e.attributes;b=e.current;f=e.framebuffer;a=e.gl;n=e.next;d=e.vao;p=n.blend_color;aa=b.blend_color;R=n.blend_equation;r=b.blend_equation;wa=n.blend_func;v=b.blend_func;C=n.colorMask;u=b.colorMask;A=n.depth_range;I=b.depth_range;B=n.polygonOffset_offset;N=b.polygonOffset_offset;Jc=n.sample_coverage;q=b.sample_coverage;z=n.scissor_box;k=b.scissor_box;da=n.stencil_func;P=b.stencil_func;K=n.stencil_opBack;w=b.stencil_opBack;na=n.stencil_opFront;G=
b.stencil_opFront;ga=n.viewport;h=b.viewport;return{poll:function(){var c,d,e,l,gb,ea,sa,Pa,X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La;b.dirty=!1;d=n.blend_enable;e=n.cull_enable;l=n.depth_enable;gb=n.dither;ea=n.polygonOffset_enable;sa=n.sample_alpha;Pa=n.sample_enable;X=n.scissor_enable;H=n.stencil_enable;L=n.cull_face;Q=b.cull_face;qa=n.depth_func;M=b.depth_func;Zb=n.depth_mask;$a=b.depth_mask;T=n.frontFace;t=b.frontFace;ia=n.lineWidth;ba=b.lineWidth;va=n.stencil_mask;La=b.stencil_mask;c=f.next;c!==f.cur&&
(c?a.bindFramebuffer(36160,c.framebuffer):a.bindFramebuffer(36160,null),f.cur=c);d!==b.blend_enable&&(d?a.enable(3042):a.disable(3042),b.blend_enable=d);e!==b.cull_enable&&(e?a.enable(2884):a.disable(2884),b.cull_enable=e);l!==b.depth_enable&&(l?a.enable(2929):a.disable(2929),b.depth_enable=l);gb!==b.dither&&(gb?a.enable(3024):a.disable(3024),b.dither=gb);ea!==b.polygonOffset_enable&&(ea?a.enable(32823):a.disable(32823),b.polygonOffset_enable=ea);sa!==b.sample_alpha&&(sa?a.enable(32926):a.disable(32926),
b.sample_alpha=sa);Pa!==b.sample_enable&&(Pa?a.enable(32928):a.disable(32928),b.sample_enable=Pa);X!==b.scissor_enable&&(X?a.enable(3089):a.disable(3089),b.scissor_enable=X);H!==b.stencil_enable&&(H?a.enable(2960):a.disable(2960),b.stencil_enable=H);if(p[0]!==aa[0]||p[1]!==aa[1]||p[2]!==aa[2]||p[3]!==aa[3])a.blendColor(p[0],p[1],p[2],p[3]),aa[0]=p[0],aa[1]=p[1],aa[2]=p[2],aa[3]=p[3];if(R[0]!==r[0]||R[1]!==r[1])a.blendEquationSeparate(R[0],R[1]),r[0]=R[0],r[1]=R[1];if(wa[0]!==v[0]||wa[1]!==v[1]||wa[2]!==
v[2]||wa[3]!==v[3])a.blendFuncSeparate(wa[0],wa[1],wa[2],wa[3]),v[0]=wa[0],v[1]=wa[1],v[2]=wa[2],v[3]=wa[3];if(C[0]!==u[0]||C[1]!==u[1]||C[2]!==u[2]||C[3]!==u[3])a.colorMask(C[0],C[1],C[2],C[3]),u[0]=C[0],u[1]=C[1],u[2]=C[2],u[3]=C[3];L!==Q&&(a.cullFace(L),b.cull_face=L);qa!==M&&(a.depthFunc(qa),b.depth_func=qa);Zb!==$a&&(a.depthMask(Zb),b.depth_mask=Zb);if(A[0]!==I[0]||A[1]!==I[1])a.depthRange(A[0],A[1]),I[0]=A[0],I[1]=A[1];T!==t&&(a.frontFace(T),b.frontFace=T);ia!==ba&&(a.lineWidth(ia),b.lineWidth=
ia);if(B[0]!==N[0]||B[1]!==N[1])a.polygonOffset(B[0],B[1]),N[0]=B[0],N[1]=B[1];if(Jc[0]!==q[0]||Jc[1]!==q[1])a.sampleCoverage(Jc[0],Jc[1]),q[0]=Jc[0],q[1]=Jc[1];if(z[0]!==k[0]||z[1]!==k[1]||z[2]!==k[2]||z[3]!==k[3])a.scissor(z[0],z[1],z[2],z[3]),k[0]=z[0],k[1]=z[1],k[2]=z[2],k[3]=z[3];if(da[0]!==P[0]||da[1]!==P[1]||da[2]!==P[2])a.stencilFunc(da[0],da[1],da[2]),P[0]=da[0],P[1]=da[1],P[2]=da[2];va!==La&&(a.stencilMask(va),b.stencil_mask=va);if(K[0]!==w[0]||K[1]!==w[1]||K[2]!==w[2]||K[3]!==w[3])a.stencilOpSeparate(K[0],
K[1],K[2],K[3]),w[0]=K[0],w[1]=K[1],w[2]=K[2],w[3]=K[3];if(na[0]!==G[0]||na[1]!==G[1]||na[2]!==G[2]||na[3]!==G[3])a.stencilOpSeparate(na[0],na[1],na[2],na[3]),G[0]=na[0],G[1]=na[1],G[2]=na[2],G[3]=na[3];if(ga[0]!==h[0]||ga[1]!==h[1]||ga[2]!==h[2]||ga[3]!==h[3])a.viewport(ga[0],ga[1],ga[2],ga[3]),h[0]=ga[0],h[1]=ga[1],h[2]=ga[2],h[3]=ga[3]},refresh:function(){var g,e,ka,la,gb,ea,sa,Pa,X,H,L,Q,qa,M,Zb,$a;b.dirty=!1;e=n.blend_enable;ka=n.cull_enable;la=n.depth_enable;gb=n.dither;ea=n.polygonOffset_enable;
sa=n.sample_alpha;Pa=n.sample_enable;X=n.scissor_enable;H=n.stencil_enable;L=n.cull_face;Q=n.depth_func;qa=n.depth_mask;M=n.frontFace;Zb=n.lineWidth;$a=n.stencil_mask;(g=f.next)?a.bindFramebuffer(36160,g.framebuffer):a.bindFramebuffer(36160,null);f.cur=g;g=c[0];g.buffer?(a.enableVertexAttribArray(0),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(0,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(0),a.vertexAttrib4f(0,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(0,
g.divisor);g=c[1];g.buffer?(a.enableVertexAttribArray(1),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(1,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(1),a.vertexAttrib4f(1,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(1,g.divisor);g=c[2];g.buffer?(a.enableVertexAttribArray(2),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(2,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(2),a.vertexAttrib4f(2,g.x,g.y,g.z,
g.w),g.buffer=null);l.vertexAttribDivisorANGLE(2,g.divisor);g=c[3];g.buffer?(a.enableVertexAttribArray(3),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(3,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(3),a.vertexAttrib4f(3,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(3,g.divisor);g=c[4];g.buffer?(a.enableVertexAttribArray(4),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(4,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(4),
a.vertexAttrib4f(4,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(4,g.divisor);g=c[5];g.buffer?(a.enableVertexAttribArray(5),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(5,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(5),a.vertexAttrib4f(5,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(5,g.divisor);g=c[6];g.buffer?(a.enableVertexAttribArray(6),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(6,g.size,g.type,g.normalized,g.stride,
g.offset)):(a.disableVertexAttribArray(6),a.vertexAttrib4f(6,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(6,g.divisor);g=c[7];g.buffer?(a.enableVertexAttribArray(7),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(7,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(7),a.vertexAttrib4f(7,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(7,g.divisor);g=c[8];g.buffer?(a.enableVertexAttribArray(8),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(8,
g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(8),a.vertexAttrib4f(8,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(8,g.divisor);g=c[9];g.buffer?(a.enableVertexAttribArray(9),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(9,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(9),a.vertexAttrib4f(9,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(9,g.divisor);g=c[10];g.buffer?(a.enableVertexAttribArray(10),a.bindBuffer(34962,
g.buffer.buffer),a.vertexAttribPointer(10,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(10),a.vertexAttrib4f(10,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(10,g.divisor);g=c[11];g.buffer?(a.enableVertexAttribArray(11),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(11,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(11),a.vertexAttrib4f(11,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(11,g.divisor);g=c[12];
g.buffer?(a.enableVertexAttribArray(12),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(12,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(12),a.vertexAttrib4f(12,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(12,g.divisor);g=c[13];g.buffer?(a.enableVertexAttribArray(13),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(13,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(13),a.vertexAttrib4f(13,g.x,g.y,g.z,g.w),g.buffer=
null);l.vertexAttribDivisorANGLE(13,g.divisor);g=c[14];g.buffer?(a.enableVertexAttribArray(14),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(14,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(14),a.vertexAttrib4f(14,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(14,g.divisor);g=c[15];g.buffer?(a.enableVertexAttribArray(15),a.bindBuffer(34962,g.buffer.buffer),a.vertexAttribPointer(15,g.size,g.type,g.normalized,g.stride,g.offset)):(a.disableVertexAttribArray(15),
a.vertexAttrib4f(15,g.x,g.y,g.z,g.w),g.buffer=null);l.vertexAttribDivisorANGLE(15,g.divisor);d.currentVAO=null;d.setVAO(d.targetVAO);e?a.enable(3042):a.disable(3042);b.blend_enable=e;ka?a.enable(2884):a.disable(2884);b.cull_enable=ka;la?a.enable(2929):a.disable(2929);b.depth_enable=la;gb?a.enable(3024):a.disable(3024);b.dither=gb;ea?a.enable(32823):a.disable(32823);b.polygonOffset_enable=ea;sa?a.enable(32926):a.disable(32926);b.sample_alpha=sa;Pa?a.enable(32928):a.disable(32928);b.sample_enable=Pa;
X?a.enable(3089):a.disable(3089);b.scissor_enable=X;H?a.enable(2960):a.disable(2960);b.stencil_enable=H;a.blendColor(p[0],p[1],p[2],p[3]);aa[0]=p[0];aa[1]=p[1];aa[2]=p[2];aa[3]=p[3];a.blendEquationSeparate(R[0],R[1]);r[0]=R[0];r[1]=R[1];a.blendFuncSeparate(wa[0],wa[1],wa[2],wa[3]);v[0]=wa[0];v[1]=wa[1];v[2]=wa[2];v[3]=wa[3];a.colorMask(C[0],C[1],C[2],C[3]);u[0]=C[0];u[1]=C[1];u[2]=C[2];u[3]=C[3];a.cullFace(L);b.cull_face=L;a.depthFunc(Q);b.depth_func=Q;a.depthMask(qa);b.depth_mask=qa;a.depthRange(A[0],
A[1]);I[0]=A[0];I[1]=A[1];a.frontFace(M);b.frontFace=M;a.lineWidth(Zb);b.lineWidth=Zb;a.polygonOffset(B[0],B[1]);N[0]=B[0];N[1]=B[1];a.sampleCoverage(Jc[0],Jc[1]);q[0]=Jc[0];q[1]=Jc[1];a.scissor(z[0],z[1],z[2],z[3]);k[0]=z[0];k[1]=z[1];k[2]=z[2];k[3]=z[3];a.stencilFunc(da[0],da[1],da[2]);P[0]=da[0];P[1]=da[1];P[2]=da[2];a.stencilMask($a);b.stencil_mask=$a;a.stencilOpSeparate(K[0],K[1],K[2],K[3]);w[0]=K[0];w[1]=K[1];w[2]=K[2];w[3]=K[3];a.stencilOpSeparate(na[0],na[1],na[2],na[3]);G[0]=na[0];G[1]=na[1];
G[2]=na[2];G[3]=na[3];a.viewport(ga[0],ga[1],ga[2],ga[3]);h[0]=ga[0];h[1]=ga[1];h[2]=ga[2];h[3]=ga[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(e,l,c,b,f,a,n,d,p,aa,R,r,u,v,C,O,A,I,B,N,ea,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,gb,hc,sa,Pa,X,H,L,Q,qa,M,Zb,$a){var T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma,Rb,oc,tc,vd,yc,Y,J,ja,Ca,Lb,ab,Vc,E,y,ha,ta,W,fa,oa,D,x,Z,F,xa,Da,m,rc,Ia,S,Hb,zb;T=e.attributes;
t=e.buffer;ia=e.context;ba=e.current;va=e.draw;La=e.elements;$b=e.extensions;Ua=e.framebuffer;V=e.gl;pb=e.isBufferArgs;ca=e.next;ma=e.shader;Rb=e.uniforms;oc=e.vao;tc=ca.blend_color;vd=ba.blend_color;yc=ca.blend_equation;Y=ba.blend_equation;J=ca.blend_func;ja=ba.blend_func;Ca=ca.colorMask;Lb=ba.colorMask;ab=ca.depth_range;Vc=ba.depth_range;E=ca.polygonOffset_offset;y=ba.polygonOffset_offset;ha=ca.sample_coverage;ta=ba.sample_coverage;W=ca.scissor_box;fa=ba.scissor_box;oa=ca.stencil_func;D=ba.stencil_func;
x=ca.stencil_opBack;Z=ba.stencil_opBack;F=ca.stencil_opFront;xa=ba.stencil_opFront;Da=ca.viewport;m=ba.viewport;rc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Ia={};Ia.buffer=c;Ia.divisor=1;S={};S.buffer=b;S.divisor=1;Hb={};Hb.buffer=f;Hb.divisor=1;zb={};zb.buffer=a;zb.divisor=1;return{batch:function(a,b){var c,d,f,e,k,n;c=Ua.next;c!==Ua.cur&&(c?V.bindFramebuffer(36160,c.framebuffer):V.bindFramebuffer(36160,null),Ua.cur=c);if(ba.dirty){var p,q,J,
z,C,aa,A,R,I,O,K,W,P,N,B,Da,da,ma,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,yc;p=ca.dither;p!==ba.dither&&(p?V.enable(3024):V.disable(3024),ba.dither=p);q=ca.depth_func;q!==ba.depth_func&&(V.depthFunc(q),ba.depth_func=q);J=ab[0];z=ab[1];if(J!==Vc[0]||z!==Vc[1])V.depthRange(J,z),Vc[0]=J,Vc[1]=z;C=ca.depth_mask;C!==ba.depth_mask&&(V.depthMask(C),ba.depth_mask=C);aa=Ca[0];A=Ca[1];R=Ca[2];I=Ca[3];if(aa!==Lb[0]||A!==Lb[1]||R!==Lb[2]||I!==Lb[3])V.colorMask(aa,A,R,I),Lb[0]=aa,Lb[1]=A,Lb[2]=R,Lb[3]=I;O=ca.cull_enable;
O!==ba.cull_enable&&(O?V.enable(2884):V.disable(2884),ba.cull_enable=O);K=ca.cull_face;K!==ba.cull_face&&(V.cullFace(K),ba.cull_face=K);W=ca.frontFace;W!==ba.frontFace&&(V.frontFace(W),ba.frontFace=W);P=ca.lineWidth;P!==ba.lineWidth&&(V.lineWidth(P),ba.lineWidth=P);N=ca.polygonOffset_enable;N!==ba.polygonOffset_enable&&(N?V.enable(32823):V.disable(32823),ba.polygonOffset_enable=N);B=E[0];Da=E[1];if(B!==y[0]||Da!==y[1])V.polygonOffset(B,Da),y[0]=B,y[1]=Da;da=ca.sample_alpha;da!==ba.sample_alpha&&(da?
V.enable(32926):V.disable(32926),ba.sample_alpha=da);ma=ca.sample_enable;ma!==ba.sample_enable&&(ma?V.enable(32928):V.disable(32928),ba.sample_enable=ma);Bc=ha[0];lc=ha[1];if(Bc!==ta[0]||lc!==ta[1])V.sampleCoverage(Bc,lc),ta[0]=Bc,ta[1]=lc;td=ca.stencil_enable;td!==ba.stencil_enable&&(td?V.enable(2960):V.disable(2960),ba.stencil_enable=td);gd=ca.stencil_mask;gd!==ba.stencil_mask&&(V.stencilMask(gd),ba.stencil_mask=gd);Mc=oa[0];uc=oa[1];bb=oa[2];if(Mc!==D[0]||uc!==D[1]||bb!==D[2])V.stencilFunc(Mc,
uc,bb),D[0]=Mc,D[1]=uc,D[2]=bb;jc=F[0];Db=F[1];sc=F[2];Sa=F[3];if(jc!==xa[0]||Db!==xa[1]||sc!==xa[2]||Sa!==xa[3])V.stencilOpSeparate(jc,Db,sc,Sa),xa[0]=jc,xa[1]=Db,xa[2]=sc,xa[3]=Sa;Kc=x[0];bc=x[1];Zc=x[2];yc=x[3];if(Kc!==Z[0]||bc!==Z[1]||Zc!==Z[2]||yc!==Z[3])V.stencilOpSeparate(Kc,bc,Zc,yc),Z[0]=Kc,Z[1]=bc,Z[2]=Zc,Z[3]=yc}V.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;V.enable(3042);ba.blend_enable=!0;V.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;V.blendFuncSeparate(770,771,773,
1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;V.disable(2929);ba.depth_enable=!1;V.enable(3089);ba.scissor_enable=!0;if(d=ba.profile)f=performance.now(),l.count+=b;V.useProgram(w.program);e=$b.angle_instanced_arrays;var md,Cc,Xb,Hc,Sc,Ka,Eb,Wa;oc.setVAO(null);md=gb.location;Cc=T[md];Cc.buffer||V.enableVertexAttribArray(md);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==r||!1!==Cc.normalized||0!==Cc.offset||24!==Cc.stride)V.bindBuffer(34962,r.buffer),V.vertexAttribPointer(md,2,5126,!1,24,0),Cc.type=5126,Cc.size=
2,Cc.buffer=r,Cc.normalized=!1,Cc.offset=0,Cc.stride=24;0!==Cc.divisor&&(e.vertexAttribDivisorANGLE(md,0),Cc.divisor=0);Xb=sa.location;Hc=T[Xb];Hc.buffer||V.enableVertexAttribArray(Xb);if(5126!==Hc.type||2!==Hc.size||Hc.buffer!==u||!1!==Hc.normalized||8!==Hc.offset||24!==Hc.stride)V.bindBuffer(34962,u.buffer),V.vertexAttribPointer(Xb,2,5126,!1,24,8),Hc.type=5126,Hc.size=2,Hc.buffer=u,Hc.normalized=!1,Hc.offset=8,Hc.stride=24;0!==Hc.divisor&&(e.vertexAttribDivisorANGLE(Xb,0),Hc.divisor=0);Sc=U.location;
Ka=T[Sc];Ka.buffer||V.enableVertexAttribArray(Sc);if(5126!==Ka.type||2!==Ka.size||Ka.buffer!==v||!1!==Ka.normalized||16!==Ka.offset||24!==Ka.stride)V.bindBuffer(34962,v.buffer),V.vertexAttribPointer(Sc,2,5126,!1,24,16),Ka.type=5126,Ka.size=2,Ka.buffer=v,Ka.normalized=!1,Ka.offset=16,Ka.stride=24;0!==Ka.divisor&&(e.vertexAttribDivisorANGLE(Sc,0),Ka.divisor=0);(Eb=va.elements)?V.bindBuffer(34963,Eb.buffer.buffer):oc.currentVAO&&(Eb=La.getElements(oc.currentVAO.elements))&&V.bindBuffer(34963,Eb.buffer.buffer);
Wa=va.offset;for(k=0;k<b;++k){n=a[k];var pa,ud,Ib,Ra,Gb,eb,pc,Sb,Rb,kc,Tb,tc,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,db,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,ea,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Jc,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,tf,Ud,he,se,le,Fd,Dd,ed,Gc;pa=n.viewport;ud=pa.x|0;Ib=pa.y|0;Ra="width"in pa?pa.width|0:ia.framebufferWidth-ud;Gb="height"in pa?pa.height|0:
ia.framebufferHeight-Ib;eb=ia.viewportWidth;ia.viewportWidth=Ra;pc=ia.viewportHeight;ia.viewportHeight=Gb;V.viewport(ud,Ib,Ra,Gb);m[0]=ud;m[1]=Ib;m[2]=Ra;m[3]=Gb;Sb=n.viewport;Rb=Sb.x|0;kc=Sb.y|0;Tb="width"in Sb?Sb.width|0:ia.framebufferWidth-Rb;tc="height"in Sb?Sb.height|0:ia.framebufferHeight-kc;V.scissor(Rb,kc,Tb,tc);fa[0]=Rb;fa[1]=kc;fa[2]=Tb;fa[3]=tc;Ub=na.call(this,ia,n,k);Hb.offset=Ub;Ma=!1;qb=null;vb=0;jb=!1;qc=Na=0;Yb=1;fd=0;fb=5126;lb=dc=ad=mc=0;pb(Hb)?(Ma=!0,qb=t.createStream(34962,Hb),
fb=qb.dtype):(qb=t.getBuffer(Hb))?fb=qb.dtype:"constant"in Hb?(Yb=2,"number"===typeof Hb.constant?(ad=Hb.constant,dc=lb=mc=0):(ad=0<Hb.constant.length?Hb.constant[0]:0,dc=1<Hb.constant.length?Hb.constant[1]:0,lb=2<Hb.constant.length?Hb.constant[2]:0,mc=3<Hb.constant.length?Hb.constant[3]:0)):(qb=pb(Hb.buffer)?t.createStream(34962,Hb.buffer):t.getBuffer(Hb.buffer),fb="type"in Hb?rc[Hb.type]:qb.dtype,jb=!!Hb.normalized,qc=Hb.size|0,Na=Hb.offset|0,fd=Hb.stride|0,vb=Hb.divisor|0);mb=H.location;ra=T[mb];
if(1===Yb){ra.buffer||V.enableVertexAttribArray(mb);rb=qc||2;if(ra.type!==fb||ra.size!==rb||ra.buffer!==qb||ra.normalized!==jb||ra.offset!==Na||ra.stride!==fd)V.bindBuffer(34962,qb.buffer),V.vertexAttribPointer(mb,rb,fb,jb,fd,Na),ra.type=fb,ra.size=rb,ra.buffer=qb,ra.normalized=jb,ra.offset=Na,ra.stride=fd;ra.divisor!==vb&&(e.vertexAttribDivisorANGLE(mb,vb),ra.divisor=vb)}else if(ra.buffer&&(V.disableVertexAttribArray(mb),ra.buffer=null),ra.x!==ad||ra.y!==dc||ra.z!==lb||ra.w!==mc)V.vertexAttrib4f(mb,
ad,dc,lb,mc),ra.x=ad,ra.y=dc,ra.z=lb,ra.w=mc;ua=G.call(this,ia,n,k);zb.offset=ua;Ta=!1;cb=null;Aa=0;hb=!1;Bb=Ha=0;Ab=1;Qa=0;Lc=5126;ya=Vb=Za=Jb=0;pb(zb)?(Ta=!0,cb=t.createStream(34962,zb),Lc=cb.dtype):(cb=t.getBuffer(zb))?Lc=cb.dtype:"constant"in zb?(Ab=2,"number"===typeof zb.constant?(Za=zb.constant,Vb=ya=Jb=0):(Za=0<zb.constant.length?zb.constant[0]:0,Vb=1<zb.constant.length?zb.constant[1]:0,ya=2<zb.constant.length?zb.constant[2]:0,Jb=3<zb.constant.length?zb.constant[3]:0)):(cb=pb(zb.buffer)?t.createStream(34962,
zb.buffer):t.getBuffer(zb.buffer),Lc="type"in zb?rc[zb.type]:cb.dtype,hb=!!zb.normalized,Bb=zb.size|0,Ha=zb.offset|0,Qa=zb.stride|0,Aa=zb.divisor|0);db=L.location;Ja=T[db];if(1===Ab){Ja.buffer||V.enableVertexAttribArray(db);Ob=Bb||2;if(Ja.type!==Lc||Ja.size!==Ob||Ja.buffer!==cb||Ja.normalized!==hb||Ja.offset!==Ha||Ja.stride!==Qa)V.bindBuffer(34962,cb.buffer),V.vertexAttribPointer(db,Ob,Lc,hb,Qa,Ha),Ja.type=Lc,Ja.size=Ob,Ja.buffer=cb,Ja.normalized=hb,Ja.offset=Ha,Ja.stride=Qa;Ja.divisor!==Aa&&(e.vertexAttribDivisorANGLE(db,
Aa),Ja.divisor=Aa)}else if(Ja.buffer&&(V.disableVertexAttribArray(db),Ja.buffer=null),Ja.x!==Za||Ja.y!==Vb||Ja.z!==ya||Ja.w!==Jb)V.vertexAttrib4f(db,Za,Vb,ya,Jb),Ja.x=Za,Ja.y=Vb,Ja.z=ya,Ja.w=Jb;ib=ga.call(this,ia,n,k);S.offset=ib;kb=!1;za=null;ec=0;Ea=!1;tb=sb=0;Xa=1;Ya=0;nc=5126;Mb=Va=wc=cd=0;pb(S)?(kb=!0,za=t.createStream(34962,S),nc=za.dtype):(za=t.getBuffer(S))?nc=za.dtype:"constant"in S?(Xa=2,"number"===typeof S.constant?(wc=S.constant,Va=Mb=cd=0):(wc=0<S.constant.length?S.constant[0]:0,Va=1<
S.constant.length?S.constant[1]:0,Mb=2<S.constant.length?S.constant[2]:0,cd=3<S.constant.length?S.constant[3]:0)):(za=pb(S.buffer)?t.createStream(34962,S.buffer):t.getBuffer(S.buffer),nc="type"in S?rc[S.type]:za.dtype,Ea=!!S.normalized,tb=S.size|0,sb=S.offset|0,Ya=S.stride|0,ec=S.divisor|0);Rc=hc.location;Fa=T[Rc];if(1===Xa){Fa.buffer||V.enableVertexAttribArray(Rc);zc=tb||4;if(Fa.type!==nc||Fa.size!==zc||Fa.buffer!==za||Fa.normalized!==Ea||Fa.offset!==sb||Fa.stride!==Ya)V.bindBuffer(34962,za.buffer),
V.vertexAttribPointer(Rc,zc,nc,Ea,Ya,sb),Fa.type=nc,Fa.size=zc,Fa.buffer=za,Fa.normalized=Ea,Fa.offset=sb,Fa.stride=Ya;Fa.divisor!==ec&&(e.vertexAttribDivisorANGLE(Rc,ec),Fa.divisor=ec)}else if(Fa.buffer&&(V.disableVertexAttribArray(Rc),Fa.buffer=null),Fa.x!==wc||Fa.y!==Va||Fa.z!==Mb||Fa.w!==cd)V.vertexAttrib4f(Rc,wc,Va,Mb,cd),Fa.x=wc,Fa.y=Va,Fa.z=Mb,Fa.w=cd;Oa=h.call(this,ia,n,k);Ia.offset=Oa;Ba=!1;nb=null;wb=0;Cb=!1;xc=ub=0;xb=1;Id=0;vc=5126;dd=nd=Nc=ea=0;pb(Ia)?(Ba=!0,nb=t.createStream(34962,Ia),
vc=nb.dtype):(nb=t.getBuffer(Ia))?vc=nb.dtype:"constant"in Ia?(xb=2,"number"===typeof Ia.constant?(Nc=Ia.constant,nd=dd=ea=0):(Nc=0<Ia.constant.length?Ia.constant[0]:0,nd=1<Ia.constant.length?Ia.constant[1]:0,dd=2<Ia.constant.length?Ia.constant[2]:0,ea=3<Ia.constant.length?Ia.constant[3]:0)):(nb=pb(Ia.buffer)?t.createStream(34962,Ia.buffer):t.getBuffer(Ia.buffer),vc="type"in Ia?rc[Ia.type]:nb.dtype,Cb=!!Ia.normalized,xc=Ia.size|0,ub=Ia.offset|0,Id=Ia.stride|0,wb=Ia.divisor|0);Wb=la.location;cc=T[Wb];
if(1===xb){cc.buffer||V.enableVertexAttribArray(Wb);Pb=xc||4;if(cc.type!==vc||cc.size!==Pb||cc.buffer!==nb||cc.normalized!==Cb||cc.offset!==ub||cc.stride!==Id)V.bindBuffer(34962,nb.buffer),V.vertexAttribPointer(Wb,Pb,vc,Cb,Id,ub),cc.type=vc,cc.size=Pb,cc.buffer=nb,cc.normalized=Cb,cc.offset=ub,cc.stride=Id;cc.divisor!==wb&&(e.vertexAttribDivisorANGLE(Wb,wb),cc.divisor=wb)}else if(cc.buffer&&(V.disableVertexAttribArray(Wb),cc.buffer=null),cc.x!==Nc||cc.y!==nd||cc.z!==dd||cc.w!==ea)V.vertexAttrib4f(Wb,
Nc,nd,dd,ea),cc.x=Nc,cc.y=nd,cc.z=dd,cc.w=ea;Ga=g.call(this,ia,n,k);ac=Ga[0];yb=Ga[1];Qb=Ga[2];ic=Ga[3];k&&ob===ac&&Nb===yb&&fc===Qb&&Jc===ic||(ob=ac,Nb=yb,fc=Qb,Jc=ic,V.uniform4f($a.location,ac,yb,Qb,ic));Dc=n.lineWidth;k&&Ec===Dc||(Ec=Dc,V.uniform1f(Pa.location,Dc));Fc=n.capSize;k&&Oc===Fc||(Oc=Fc,V.uniform1f(ka.location,Fc));$c=n.scale;Tc=$c[0];Kb=$c[1];k&&Pc===Tc&&Fb===Kb||(Pc=Tc,Fb=Kb,V.uniform2f(Q.location,Tc,Kb));Qc=n.scaleFract;Ic=Qc[0];gc=Qc[1];k&&Uc===Ic&&Xc===gc||(Uc=Ic,Xc=gc,V.uniform2f(qa.location,
Ic,gc));od=n.translate;id=od[0];Yc=od[1];k&&rd===id&&tf===Yc||(rd=id,tf=Yc,V.uniform2f(M.location,id,Yc));Ud=n.translateFract;he=Ud[0];le=Ud[1];k&&se===he&&Fd===le||(se=he,Fd=le,V.uniform2f(Zb.location,he,le));Dd=n.opacity;k&&ed===Dd||(ed=Dd,V.uniform1f(X.location,Dd));Gc=n.count;0<Gc?Eb?e.drawElementsInstancedANGLE(4,36,Eb.type,Wa<<(Eb.type-5121>>1),Gc):e.drawArraysInstancedANGLE(4,Wa,36,Gc):0>Gc&&(Eb?V.drawElements(4,36,Eb.type,Wa<<(Eb.type-5121>>1)):V.drawArrays(4,Wa,36));ia.viewportWidth=eb;ia.viewportHeight=
pc;Ma&&t.destroyStream(qb);Ta&&t.destroyStream(cb);kb&&t.destroyStream(za);Ba&&t.destroyStream(nb)}ba.dirty=!0;oc.setVAO(null);d&&(l.cpuTime+=performance.now()-f)},draw:function(a){var b,c,f,g,e,h,k,q,w,J,z,A,G,I,O,K,W,P,N,B,Da,da,ga,na,ma,Bc,lc,yc,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Rb,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,tc,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,db,Ja,Ob,ib,kb,za,ec;b=Ua.next;b!==Ua.cur&&(b?V.bindFramebuffer(36160,
b.framebuffer):V.bindFramebuffer(36160,null),Ua.cur=b);if(ba.dirty){var Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,ea,vc,Jc,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob;Ea=ca.dither;Ea!==ba.dither&&(Ea?V.enable(3024):V.disable(3024),ba.dither=Ea);sb=ca.depth_func;sb!==ba.depth_func&&(V.depthFunc(sb),ba.depth_func=sb);tb=ab[0];Xa=ab[1];if(tb!==Vc[0]||Xa!==Vc[1])V.depthRange(tb,Xa),Vc[0]=tb,Vc[1]=Xa;Ya=ca.depth_mask;Ya!==ba.depth_mask&&(V.depthMask(Ya),ba.depth_mask=Ya);nc=Ca[0];cd=Ca[1];wc=Ca[2];
Va=Ca[3];if(nc!==Lb[0]||cd!==Lb[1]||wc!==Lb[2]||Va!==Lb[3])V.colorMask(nc,cd,wc,Va),Lb[0]=nc,Lb[1]=cd,Lb[2]=wc,Lb[3]=Va;Mb=ca.cull_enable;Mb!==ba.cull_enable&&(Mb?V.enable(2884):V.disable(2884),ba.cull_enable=Mb);Rc=ca.cull_face;Rc!==ba.cull_face&&(V.cullFace(Rc),ba.cull_face=Rc);Fa=ca.frontFace;Fa!==ba.frontFace&&(V.frontFace(Fa),ba.frontFace=Fa);zc=ca.lineWidth;zc!==ba.lineWidth&&(V.lineWidth(zc),ba.lineWidth=zc);Oa=ca.polygonOffset_enable;Oa!==ba.polygonOffset_enable&&(Oa?V.enable(32823):V.disable(32823),
ba.polygonOffset_enable=Oa);Ba=E[0];nb=E[1];if(Ba!==y[0]||nb!==y[1])V.polygonOffset(Ba,nb),y[0]=Ba,y[1]=nb;wb=ca.sample_alpha;wb!==ba.sample_alpha&&(wb?V.enable(32926):V.disable(32926),ba.sample_alpha=wb);Cb=ca.sample_enable;Cb!==ba.sample_enable&&(Cb?V.enable(32928):V.disable(32928),ba.sample_enable=Cb);ub=ha[0];xc=ha[1];if(ub!==ta[0]||xc!==ta[1])V.sampleCoverage(ub,xc),ta[0]=ub,ta[1]=xc;xb=ca.stencil_enable;xb!==ba.stencil_enable&&(xb?V.enable(2960):V.disable(2960),ba.stencil_enable=xb);ea=ca.stencil_mask;
ea!==ba.stencil_mask&&(V.stencilMask(ea),ba.stencil_mask=ea);vc=oa[0];Jc=oa[1];Nc=oa[2];if(vc!==D[0]||Jc!==D[1]||Nc!==D[2])V.stencilFunc(vc,Jc,Nc),D[0]=vc,D[1]=Jc,D[2]=Nc;nd=F[0];dd=F[1];Wb=F[2];cc=F[3];if(nd!==xa[0]||dd!==xa[1]||Wb!==xa[2]||cc!==xa[3])V.stencilOpSeparate(nd,dd,Wb,cc),xa[0]=nd,xa[1]=dd,xa[2]=Wb,xa[3]=cc;Pb=x[0];Ga=x[1];ac=x[2];ob=x[3];if(Pb!==Z[0]||Ga!==Z[1]||ac!==Z[2]||ob!==Z[3])V.stencilOpSeparate(Pb,Ga,ac,ob),Z[0]=Pb,Z[1]=Ga,Z[2]=ac,Z[3]=ob}c=a.viewport;f=c.x|0;g=c.y|0;e="width"in
c?c.width|0:ia.framebufferWidth-f;h="height"in c?c.height|0:ia.framebufferHeight-g;k=ia.viewportWidth;ia.viewportWidth=e;q=ia.viewportHeight;ia.viewportHeight=h;V.viewport(f,g,e,h);m[0]=f;m[1]=g;m[2]=e;m[3]=h;V.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;V.enable(3042);ba.blend_enable=!0;V.blendEquationSeparate(32774,32774);Y[0]=32774;Y[1]=32774;V.blendFuncSeparate(770,771,773,1);ja[0]=770;ja[1]=771;ja[2]=773;ja[3]=1;V.disable(2929);ba.depth_enable=!1;w=a.viewport;J=w.x|0;z=w.y|0;A="width"in
w?w.width|0:ia.framebufferWidth-J;G="height"in w?w.height|0:ia.framebufferHeight-z;V.scissor(J,z,A,G);fa[0]=J;fa[1]=z;fa[2]=A;fa[3]=G;V.enable(3089);ba.scissor_enable=!0;if(I=ba.profile)O=performance.now(),l.count++;V.useProgram(n.program);K=$b.angle_instanced_arrays;oc.setVAO(null);W=d.call(this,ia,a,0);Hb.offset=W;P=!1;N=null;B=0;Da=!1;ga=da=0;na=1;ma=0;Bc=5126;Mc=gd=yc=lc=0;pb(Hb)?(P=!0,N=t.createStream(34962,Hb),Bc=N.dtype):(N=t.getBuffer(Hb))?Bc=N.dtype:"constant"in Hb?(na=2,"number"===typeof Hb.constant?
(yc=Hb.constant,gd=Mc=lc=0):(yc=0<Hb.constant.length?Hb.constant[0]:0,gd=1<Hb.constant.length?Hb.constant[1]:0,Mc=2<Hb.constant.length?Hb.constant[2]:0,lc=3<Hb.constant.length?Hb.constant[3]:0)):(N=pb(Hb.buffer)?t.createStream(34962,Hb.buffer):t.getBuffer(Hb.buffer),Bc="type"in Hb?rc[Hb.type]:N.dtype,Da=!!Hb.normalized,ga=Hb.size|0,da=Hb.offset|0,ma=Hb.stride|0,B=Hb.divisor|0);uc=H.location;bb=T[uc];if(1===na){bb.buffer||V.enableVertexAttribArray(uc);jc=ga||2;if(bb.type!==Bc||bb.size!==jc||bb.buffer!==
N||bb.normalized!==Da||bb.offset!==da||bb.stride!==ma)V.bindBuffer(34962,N.buffer),V.vertexAttribPointer(uc,jc,Bc,Da,ma,da),bb.type=Bc,bb.size=jc,bb.buffer=N,bb.normalized=Da,bb.offset=da,bb.stride=ma;bb.divisor!==B&&(K.vertexAttribDivisorANGLE(uc,B),bb.divisor=B)}else if(bb.buffer&&(V.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==yc||bb.y!==gd||bb.z!==Mc||bb.w!==lc)V.vertexAttrib4f(uc,yc,gd,Mc,lc),bb.x=yc,bb.y=gd,bb.z=Mc,bb.w=lc;Db=p.call(this,ia,a,0);zb.offset=Db;sc=!1;Sa=null;Kc=0;bc=!1;
Rb=Zc=0;md=1;Cc=0;Xb=5126;Eb=Ka=Sc=Hc=0;pb(zb)?(sc=!0,Sa=t.createStream(34962,zb),Xb=Sa.dtype):(Sa=t.getBuffer(zb))?Xb=Sa.dtype:"constant"in zb?(md=2,"number"===typeof zb.constant?(Sc=zb.constant,Ka=Eb=Hc=0):(Sc=0<zb.constant.length?zb.constant[0]:0,Ka=1<zb.constant.length?zb.constant[1]:0,Eb=2<zb.constant.length?zb.constant[2]:0,Hc=3<zb.constant.length?zb.constant[3]:0)):(Sa=pb(zb.buffer)?t.createStream(34962,zb.buffer):t.getBuffer(zb.buffer),Xb="type"in zb?rc[zb.type]:Sa.dtype,bc=!!zb.normalized,
Rb=zb.size|0,Zc=zb.offset|0,Cc=zb.stride|0,Kc=zb.divisor|0);Wa=L.location;pa=T[Wa];if(1===md){pa.buffer||V.enableVertexAttribArray(Wa);ud=Rb||2;if(pa.type!==Xb||pa.size!==ud||pa.buffer!==Sa||pa.normalized!==bc||pa.offset!==Zc||pa.stride!==Cc)V.bindBuffer(34962,Sa.buffer),V.vertexAttribPointer(Wa,ud,Xb,bc,Cc,Zc),pa.type=Xb,pa.size=ud,pa.buffer=Sa,pa.normalized=bc,pa.offset=Zc,pa.stride=Cc;pa.divisor!==Kc&&(K.vertexAttribDivisorANGLE(Wa,Kc),pa.divisor=Kc)}else if(pa.buffer&&(V.disableVertexAttribArray(Wa),
pa.buffer=null),pa.x!==Sc||pa.y!==Ka||pa.z!==Eb||pa.w!==Hc)V.vertexAttrib4f(Wa,Sc,Ka,Eb,Hc),pa.x=Sc,pa.y=Ka,pa.z=Eb,pa.w=Hc;Ib=aa.call(this,ia,a,0);S.offset=Ib;Ra=!1;Gb=null;eb=0;pc=!1;tc=Sb=0;kc=1;Tb=0;hd=5126;vb=qb=Ma=Ub=0;pb(S)?(Ra=!0,Gb=t.createStream(34962,S),hd=Gb.dtype):(Gb=t.getBuffer(S))?hd=Gb.dtype:"constant"in S?(kc=2,"number"===typeof S.constant?(Ma=S.constant,qb=vb=Ub=0):(Ma=0<S.constant.length?S.constant[0]:0,qb=1<S.constant.length?S.constant[1]:0,vb=2<S.constant.length?S.constant[2]:
0,Ub=3<S.constant.length?S.constant[3]:0)):(Gb=pb(S.buffer)?t.createStream(34962,S.buffer):t.getBuffer(S.buffer),hd="type"in S?rc[S.type]:Gb.dtype,pc=!!S.normalized,tc=S.size|0,Sb=S.offset|0,Tb=S.stride|0,eb=S.divisor|0);jb=hc.location;Na=T[jb];if(1===kc){Na.buffer||V.enableVertexAttribArray(jb);qc=tc||4;if(Na.type!==hd||Na.size!==qc||Na.buffer!==Gb||Na.normalized!==pc||Na.offset!==Sb||Na.stride!==Tb)V.bindBuffer(34962,Gb.buffer),V.vertexAttribPointer(jb,qc,hd,pc,Tb,Sb),Na.type=hd,Na.size=qc,Na.buffer=
Gb,Na.normalized=pc,Na.offset=Sb,Na.stride=Tb;Na.divisor!==eb&&(K.vertexAttribDivisorANGLE(jb,eb),Na.divisor=eb)}else if(Na.buffer&&(V.disableVertexAttribArray(jb),Na.buffer=null),Na.x!==Ma||Na.y!==qb||Na.z!==vb||Na.w!==Ub)V.vertexAttrib4f(jb,Ma,qb,vb,Ub),Na.x=Ma,Na.y=qb,Na.z=vb,Na.w=Ub;Yb=R.call(this,ia,a,0);Ia.offset=Yb;fd=!1;fb=null;mc=0;ad=!1;lb=dc=0;mb=1;ra=0;rb=5126;Aa=cb=Ta=ua=0;pb(Ia)?(fd=!0,fb=t.createStream(34962,Ia),rb=fb.dtype):(fb=t.getBuffer(Ia))?rb=fb.dtype:"constant"in Ia?(mb=2,"number"===
typeof Ia.constant?(Ta=Ia.constant,cb=Aa=ua=0):(Ta=0<Ia.constant.length?Ia.constant[0]:0,cb=1<Ia.constant.length?Ia.constant[1]:0,Aa=2<Ia.constant.length?Ia.constant[2]:0,ua=3<Ia.constant.length?Ia.constant[3]:0)):(fb=pb(Ia.buffer)?t.createStream(34962,Ia.buffer):t.getBuffer(Ia.buffer),rb="type"in Ia?rc[Ia.type]:fb.dtype,ad=!!Ia.normalized,lb=Ia.size|0,dc=Ia.offset|0,ra=Ia.stride|0,mc=Ia.divisor|0);hb=la.location;Ha=T[hb];if(1===mb){Ha.buffer||V.enableVertexAttribArray(hb);Bb=lb||4;if(Ha.type!==rb||
Ha.size!==Bb||Ha.buffer!==fb||Ha.normalized!==ad||Ha.offset!==dc||Ha.stride!==ra)V.bindBuffer(34962,fb.buffer),V.vertexAttribPointer(hb,Bb,rb,ad,ra,dc),Ha.type=rb,Ha.size=Bb,Ha.buffer=fb,Ha.normalized=ad,Ha.offset=dc,Ha.stride=ra;Ha.divisor!==mc&&(K.vertexAttribDivisorANGLE(hb,mc),Ha.divisor=mc)}else if(Ha.buffer&&(V.disableVertexAttribArray(hb),Ha.buffer=null),Ha.x!==Ta||Ha.y!==cb||Ha.z!==Aa||Ha.w!==ua)V.vertexAttrib4f(hb,Ta,cb,Aa,ua),Ha.x=Ta,Ha.y=cb,Ha.z=Aa,Ha.w=ua;Ab=gb.location;Qa=T[Ab];Qa.buffer||
V.enableVertexAttribArray(Ab);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==r||!1!==Qa.normalized||0!==Qa.offset||24!==Qa.stride)V.bindBuffer(34962,r.buffer),V.vertexAttribPointer(Ab,2,5126,!1,24,0),Qa.type=5126,Qa.size=2,Qa.buffer=r,Qa.normalized=!1,Qa.offset=0,Qa.stride=24;0!==Qa.divisor&&(K.vertexAttribDivisorANGLE(Ab,0),Qa.divisor=0);Lc=sa.location;Jb=T[Lc];Jb.buffer||V.enableVertexAttribArray(Lc);if(5126!==Jb.type||2!==Jb.size||Jb.buffer!==u||!1!==Jb.normalized||8!==Jb.offset||24!==Jb.stride)V.bindBuffer(34962,
u.buffer),V.vertexAttribPointer(Lc,2,5126,!1,24,8),Jb.type=5126,Jb.size=2,Jb.buffer=u,Jb.normalized=!1,Jb.offset=8,Jb.stride=24;0!==Jb.divisor&&(K.vertexAttribDivisorANGLE(Lc,0),Jb.divisor=0);Za=U.location;Vb=T[Za];Vb.buffer||V.enableVertexAttribArray(Za);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==v||!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)V.bindBuffer(34962,v.buffer),V.vertexAttribPointer(Za,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=v,Vb.normalized=!1,Vb.offset=16,Vb.stride=24;
0!==Vb.divisor&&(K.vertexAttribDivisorANGLE(Za,0),Vb.divisor=0);ya=C.call(this,ia,a,0);V.uniform4f($a.location,ya[0],ya[1],ya[2],ya[3]);V.uniform1f(Pa.location,a.lineWidth);V.uniform1f(ka.location,a.capSize);db=a.scale;V.uniform2f(Q.location,db[0],db[1]);Ja=a.scaleFract;V.uniform2f(qa.location,Ja[0],Ja[1]);Ob=a.translate;V.uniform2f(M.location,Ob[0],Ob[1]);ib=a.translateFract;V.uniform2f(Zb.location,ib[0],ib[1]);V.uniform1f(X.location,a.opacity);(kb=va.elements)?V.bindBuffer(34963,kb.buffer.buffer):
oc.currentVAO&&(kb=La.getElements(oc.currentVAO.elements))&&V.bindBuffer(34963,kb.buffer.buffer);za=va.offset;ec=a.count;0<ec?kb?K.drawElementsInstancedANGLE(4,36,kb.type,za<<(kb.type-5121>>1),ec):K.drawArraysInstancedANGLE(4,za,36,ec):0>ec&&(kb?V.drawElements(4,36,kb.type,za<<(kb.type-5121>>1)):V.drawArrays(4,za,36));ba.dirty=!0;oc.setVAO(null);ia.viewportWidth=k;ia.viewportHeight=q;I&&(l.cpuTime+=performance.now()-O);P&&t.destroyStream(N);sc&&t.destroyStream(Sa);Ra&&t.destroyStream(Gb);fd&&t.destroyStream(fb)},
scope:function(a,b,c){var d,f,g,e,h,m,n,p,x,w,y,C,aa,D,F,R,Z,E,Y,G,L,H,M,Q,T,V,fa,ja,X,U,ha,xa,ta,oc,oa,Ca,ga,na,qa,vd,Xb,Hc,Sc,Ka,Eb,Wa,pa,sa,Ib,Ra,ka,eb,Lb,ab,la,kc,Tb,$a,Ub,Ma,qb,vb,jb,Na,Pa,Yb,La,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,Zb,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,gb,vc,Ua,Nc,Vc,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,$b,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,hc,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,
we,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd;d=a.viewport;f=d.x|0;g=d.y|0;e="width"in d?d.width|0:ia.framebufferWidth-f;h="height"in d?d.height|0:ia.framebufferHeight-g;m=ia.viewportWidth;ia.viewportWidth=e;n=ia.viewportHeight;ia.viewportHeight=h;p=Da[0];Da[0]=f;x=Da[1];Da[1]=g;w=Da[2];Da[2]=e;y=Da[3];Da[3]=h;C=tc[0];tc[0]=0;aa=tc[1];tc[1]=0;D=tc[2];tc[2]=0;F=tc[3];tc[3]=0;R=ca.blend_enable;ca.blend_enable=!0;Z=yc[0];yc[0]=32774;E=yc[1];yc[1]=32774;
Y=J[0];J[0]=770;G=J[1];J[1]=771;L=J[2];J[2]=773;H=J[3];J[3]=1;M=ca.depth_enable;ca.depth_enable=!1;Q=a.viewport;T=Q.x|0;V=Q.y|0;fa="width"in Q?Q.width|0:ia.framebufferWidth-T;ja="height"in Q?Q.height|0:ia.framebufferHeight-V;X=W[0];W[0]=T;U=W[1];W[1]=V;ha=W[2];W[2]=fa;xa=W[3];W[3]=ja;ta=ca.scissor_enable;ca.scissor_enable=!0;if(oc=ba.profile)oa=performance.now(),l.count++;Ca=va.count;va.count=36;ga=a.count;na=va.instances;va.instances=ga;qa=va.primitive;va.primitive=4;vd=a.capSize;Xb=Rb[5];Rb[5]=
vd;Hc=a.lineWidth;Sc=Rb[4];Rb[4]=Hc;Ka=a.opacity;Eb=Rb[10];Rb[10]=Ka;Wa=a.range;pa=Rb[18];Rb[18]=Wa;sa=a.scale;Ib=Rb[6];Rb[6]=sa;Ra=a.scaleFract;ka=Rb[7];Rb[7]=Ra;eb=a.translate;Lb=Rb[8];Rb[8]=eb;ab=a.translateFract;la=Rb[9];Rb[9]=ab;kc=O.call(this,ia,a,c);Tb=Rb[3];Rb[3]=kc;$a=A.buffer;A.buffer=v;Ub=A.divisor;A.divisor=0;Ma=A.normalized;A.normalized=!1;qb=A.offset;A.offset=16;vb=A.size;A.size=0;jb=A.state;A.state=1;Na=A.stride;A.stride=24;Pa=A.type;A.type=5126;Yb=A.w;A.w=0;La=A.x;A.x=0;fb=A.y;A.y=
0;mc=A.z;A.z=0;ad=I.call(this,ia,a,c);Ia.offset=ad;dc=!1;lb=null;mb=0;ra=!1;ua=rb=0;Ta=1;cb=0;Aa=5126;Ab=Bb=Ha=hb=0;pb(Ia)?(dc=!0,lb=t.createStream(34962,Ia),Aa=lb.dtype):(lb=t.getBuffer(Ia))?Aa=lb.dtype:"constant"in Ia?(Ta=2,"number"===typeof Ia.constant?(Ha=Ia.constant,Bb=Ab=hb=0):(Ha=0<Ia.constant.length?Ia.constant[0]:0,Bb=1<Ia.constant.length?Ia.constant[1]:0,Ab=2<Ia.constant.length?Ia.constant[2]:0,hb=3<Ia.constant.length?Ia.constant[3]:0)):(lb=pb(Ia.buffer)?t.createStream(34962,Ia.buffer):
t.getBuffer(Ia.buffer),Aa="type"in Ia?rc[Ia.type]:lb.dtype,ra=!!Ia.normalized,ua=Ia.size|0,rb=Ia.offset|0,cb=Ia.stride|0,mb=Ia.divisor|0);Qa=B.buffer;B.buffer=lb;Lc=B.divisor;B.divisor=mb;Jb=B.normalized;B.normalized=ra;Za=B.offset;B.offset=rb;Vb=B.size;B.size=ua;ya=B.state;B.state=Ta;Zb=B.stride;B.stride=cb;Ja=B.type;B.type=Aa;Ob=B.w;B.w=hb;ib=B.x;B.x=Ha;kb=B.y;B.y=Bb;za=B.z;B.z=Ab;ec=N.buffer;N.buffer=r;Ea=N.divisor;N.divisor=0;sb=N.normalized;N.normalized=!1;tb=N.offset;N.offset=0;Xa=N.size;N.size=
0;Ya=N.state;N.state=1;nc=N.stride;N.stride=24;cd=N.type;N.type=5126;wc=N.w;N.w=0;Va=N.x;N.x=0;Mb=N.y;N.y=0;Rc=N.z;N.z=0;Fa=ea.call(this,ia,a,c);S.offset=Fa;zc=!1;Oa=null;Ba=0;nb=!1;Cb=wb=0;ub=1;xc=0;xb=5126;Nc=Ua=vc=gb=0;pb(S)?(zc=!0,Oa=t.createStream(34962,S),xb=Oa.dtype):(Oa=t.getBuffer(S))?xb=Oa.dtype:"constant"in S?(ub=2,"number"===typeof S.constant?(vc=S.constant,Ua=Nc=gb=0):(vc=0<S.constant.length?S.constant[0]:0,Ua=1<S.constant.length?S.constant[1]:0,Nc=2<S.constant.length?S.constant[2]:0,
gb=3<S.constant.length?S.constant[3]:0)):(Oa=pb(S.buffer)?t.createStream(34962,S.buffer):t.getBuffer(S.buffer),xb="type"in S?rc[S.type]:Oa.dtype,nb=!!S.normalized,Cb=S.size|0,wb=S.offset|0,xc=S.stride|0,Ba=S.divisor|0);Vc=q.buffer;q.buffer=Oa;dd=q.divisor;q.divisor=Ba;Wb=q.normalized;q.normalized=nb;cc=q.offset;q.offset=wb;Pb=q.size;q.size=Cb;Ga=q.state;q.state=ub;ac=q.stride;q.stride=xc;ob=q.type;q.type=xb;yb=q.w;q.w=gb;Nb=q.x;q.x=vc;Qb=q.y;q.y=Ua;fc=q.z;q.z=Nc;ic=z.buffer;z.buffer=u;$b=z.divisor;
z.divisor=0;Dc=z.normalized;z.normalized=!1;Ec=z.offset;z.offset=8;Fc=z.size;z.size=0;Oc=z.state;z.state=1;$c=z.stride;z.stride=24;Tc=z.type;z.type=5126;Pc=z.w;z.w=0;Kb=z.x;z.x=0;Fb=z.y;z.y=0;Qc=z.z;z.z=0;Ic=k.call(this,ia,a,c);Hb.offset=Ic;Uc=!1;gc=null;Xc=0;od=!1;rd=id=0;Yc=1;hc=0;Ud=5126;Fd=le=se=he=0;pb(Hb)?(Uc=!0,gc=t.createStream(34962,Hb),Ud=gc.dtype):(gc=t.getBuffer(Hb))?Ud=gc.dtype:"constant"in Hb?(Yc=2,"number"===typeof Hb.constant?(se=Hb.constant,le=Fd=he=0):(se=0<Hb.constant.length?Hb.constant[0]:
0,le=1<Hb.constant.length?Hb.constant[1]:0,Fd=2<Hb.constant.length?Hb.constant[2]:0,he=3<Hb.constant.length?Hb.constant[3]:0)):(gc=pb(Hb.buffer)?t.createStream(34962,Hb.buffer):t.getBuffer(Hb.buffer),Ud="type"in Hb?rc[Hb.type]:gc.dtype,od=!!Hb.normalized,rd=Hb.size|0,id=Hb.offset|0,hc=Hb.stride|0,Xc=Hb.divisor|0);Dd=da.buffer;da.buffer=gc;ed=da.divisor;da.divisor=Xc;Gc=da.normalized;da.normalized=od;pd=da.offset;da.offset=id;jd=da.size;da.size=rd;bd=da.state;da.state=Yc;kd=da.stride;da.stride=hc;
Ad=da.type;da.type=Ud;Bd=da.w;da.w=he;we=da.x;da.x=se;me=da.y;da.y=le;ve=da.z;da.z=Fd;ce=P.call(this,ia,a,c);zb.offset=ce;be=!1;$d=null;oe=0;Yd=!1;Ac=ee=0;Wc=1;pe=0;ie=5126;Nd=Md=Jd=Ed=0;pb(zb)?(be=!0,$d=t.createStream(34962,zb),ie=$d.dtype):($d=t.getBuffer(zb))?ie=$d.dtype:"constant"in zb?(Wc=2,"number"===typeof zb.constant?(Jd=zb.constant,Md=Nd=Ed=0):(Jd=0<zb.constant.length?zb.constant[0]:0,Md=1<zb.constant.length?zb.constant[1]:0,Nd=2<zb.constant.length?zb.constant[2]:0,Ed=3<zb.constant.length?
zb.constant[3]:0)):($d=pb(zb.buffer)?t.createStream(34962,zb.buffer):t.getBuffer(zb.buffer),ie="type"in zb?rc[zb.type]:$d.dtype,Yd=!!zb.normalized,Ac=zb.size|0,ee=zb.offset|0,pe=zb.stride|0,oe=zb.divisor|0);fe=K.buffer;K.buffer=$d;De=K.divisor;K.divisor=oe;xe=K.normalized;K.normalized=Yd;ne=K.offset;K.offset=ee;Ye=K.size;K.size=Ac;Oe=K.state;K.state=Wc;Ke=K.stride;K.stride=pe;qe=K.type;K.type=ie;Ae=K.w;K.w=Ed;Ee=K.x;K.x=Jd;Fe=K.y;K.y=Md;Ge=K.z;K.z=Nd;Be=ma.vert;ma.vert=2;Gd=ma.frag;ma.frag=1;ba.dirty=
!0;b(ia,a,c);ia.viewportWidth=m;ia.viewportHeight=n;Da[0]=p;Da[1]=x;Da[2]=w;Da[3]=y;tc[0]=C;tc[1]=aa;tc[2]=D;tc[3]=F;ca.blend_enable=R;yc[0]=Z;yc[1]=E;J[0]=Y;J[1]=G;J[2]=L;J[3]=H;ca.depth_enable=M;W[0]=X;W[1]=U;W[2]=ha;W[3]=xa;ca.scissor_enable=ta;oc&&(l.cpuTime+=performance.now()-oa);va.count=Ca;va.instances=na;va.primitive=qa;Rb[5]=Xb;Rb[4]=Sc;Rb[10]=Eb;Rb[18]=pa;Rb[6]=Ib;Rb[7]=ka;Rb[8]=Lb;Rb[9]=la;Rb[3]=Tb;A.buffer=$a;A.divisor=Ub;A.normalized=Ma;A.offset=qb;A.size=vb;A.state=jb;A.stride=Na;A.type=
Pa;A.w=Yb;A.x=La;A.y=fb;A.z=mc;dc&&t.destroyStream(lb);B.buffer=Qa;B.divisor=Lc;B.normalized=Jb;B.offset=Za;B.size=Vb;B.state=ya;B.stride=Zb;B.type=Ja;B.w=Ob;B.x=ib;B.y=kb;B.z=za;N.buffer=ec;N.divisor=Ea;N.normalized=sb;N.offset=tb;N.size=Xa;N.state=Ya;N.stride=nc;N.type=cd;N.w=wc;N.x=Va;N.y=Mb;N.z=Rc;zc&&t.destroyStream(Oa);q.buffer=Vc;q.divisor=dd;q.normalized=Wb;q.offset=cc;q.size=Pb;q.state=Ga;q.stride=ac;q.type=ob;q.w=yb;q.x=Nb;q.y=Qb;q.z=fc;z.buffer=ic;z.divisor=$b;z.normalized=Dc;z.offset=
Ec;z.size=Fc;z.state=Oc;z.stride=$c;z.type=Tc;z.w=Pc;z.x=Kb;z.y=Fb;z.z=Qc;Uc&&t.destroyStream(gc);da.buffer=Dd;da.divisor=ed;da.normalized=Gc;da.offset=pd;da.size=jd;da.state=bd;da.stride=kd;da.type=Ad;da.w=Bd;da.x=we;da.y=me;da.z=ve;be&&t.destroyStream($d);K.buffer=fe;K.divisor=De;K.normalized=xe;K.offset=ne;K.size=Ye;K.state=Oe;K.stride=Ke;K.type=qe;K.w=Ae;K.x=Ee;K.y=Fe;K.z=Ge;ma.vert=Be;ma.frag=Gd;ba.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(e,
l,c,b,f,a,n,d,p,aa,R,r,u,v,C,O,A,I,B,N,ea,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,gb){var hc,sa,Pa,X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma,Rb,oc,tc,vd,yc,Y,J,ja,Ca,Lb,ab,Vc,E,y,ha,ta,W,fa,oa,D,x;hc=e.attributes;sa=e.buffer;Pa=e.context;X=e.current;H=e.draw;L=e.elements;Q=e.extensions;qa=e.framebuffer;M=e.gl;Zb=e.isBufferArgs;$a=e.next;T=e.shader;t=e.uniforms;ia=e.vao;ba=$a.blend_color;va=X.blend_color;La=$a.blend_equation;$b=X.blend_equation;Ua=$a.blend_func;V=X.blend_func;pb=$a.colorMask;
ca=X.colorMask;ma=$a.depth_range;Rb=X.depth_range;oc=$a.polygonOffset_offset;tc=X.polygonOffset_offset;vd=$a.sample_coverage;yc=X.sample_coverage;Y=$a.scissor_box;J=X.scissor_box;ja=$a.stencil_func;Ca=X.stencil_func;Lb=$a.stencil_opBack;ab=X.stencil_opBack;Vc=$a.stencil_opFront;E=X.stencil_opFront;y=$a.viewport;ha=X.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};W={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};oa={divisor:1,
offset:16,stride:8};D={divisor:1,offset:16,stride:8};x={divisor:1,offset:0,stride:4};return{batch:function(b,c){var d,e,m,n,p,r;d=qa.next;d!==qa.cur&&(d?M.bindFramebuffer(36160,d.framebuffer):M.bindFramebuffer(36160,null),qa.cur=d);if(X.dirty){var t,v,y,C,aa,u,A,R,Y,O,T,wa,ba,La,Ld,Ve,af,bf,yd,Ce,Rd,Sd,ke,Je,sd,ld,wd,qd,Bc,lc,td,gd;t=$a.dither;t!==X.dither&&(t?M.enable(3024):M.disable(3024),X.dither=t);v=$a.depth_func;v!==X.depth_func&&(M.depthFunc(v),X.depth_func=v);y=ma[0];C=ma[1];if(y!==Rb[0]||
C!==Rb[1])M.depthRange(y,C),Rb[0]=y,Rb[1]=C;aa=$a.depth_mask;aa!==X.depth_mask&&(M.depthMask(aa),X.depth_mask=aa);u=pb[0];A=pb[1];R=pb[2];Y=pb[3];if(u!==ca[0]||A!==ca[1]||R!==ca[2]||Y!==ca[3])M.colorMask(u,A,R,Y),ca[0]=u,ca[1]=A,ca[2]=R,ca[3]=Y;O=$a.cull_enable;O!==X.cull_enable&&(O?M.enable(2884):M.disable(2884),X.cull_enable=O);T=$a.cull_face;T!==X.cull_face&&(M.cullFace(T),X.cull_face=T);wa=$a.frontFace;wa!==X.frontFace&&(M.frontFace(wa),X.frontFace=wa);ba=$a.lineWidth;ba!==X.lineWidth&&(M.lineWidth(ba),
X.lineWidth=ba);La=$a.polygonOffset_enable;La!==X.polygonOffset_enable&&(La?M.enable(32823):M.disable(32823),X.polygonOffset_enable=La);Ld=oc[0];Ve=oc[1];if(Ld!==tc[0]||Ve!==tc[1])M.polygonOffset(Ld,Ve),tc[0]=Ld,tc[1]=Ve;af=$a.sample_alpha;af!==X.sample_alpha&&(af?M.enable(32926):M.disable(32926),X.sample_alpha=af);bf=$a.sample_enable;bf!==X.sample_enable&&(bf?M.enable(32928):M.disable(32928),X.sample_enable=bf);yd=vd[0];Ce=vd[1];if(yd!==yc[0]||Ce!==yc[1])M.sampleCoverage(yd,Ce),yc[0]=yd,yc[1]=Ce;
Rd=$a.stencil_mask;Rd!==X.stencil_mask&&(M.stencilMask(Rd),X.stencil_mask=Rd);Sd=ja[0];ke=ja[1];Je=ja[2];if(Sd!==Ca[0]||ke!==Ca[1]||Je!==Ca[2])M.stencilFunc(Sd,ke,Je),Ca[0]=Sd,Ca[1]=ke,Ca[2]=Je;sd=Vc[0];ld=Vc[1];wd=Vc[2];qd=Vc[3];if(sd!==E[0]||ld!==E[1]||wd!==E[2]||qd!==E[3])M.stencilOpSeparate(sd,ld,wd,qd),E[0]=sd,E[1]=ld,E[2]=wd,E[3]=qd;Bc=Lb[0];lc=Lb[1];td=Lb[2];gd=Lb[3];if(Bc!==ab[0]||lc!==ab[1]||td!==ab[2]||gd!==ab[3])M.stencilOpSeparate(Bc,lc,td,gd),ab[0]=Bc,ab[1]=lc,ab[2]=td,ab[3]=gd}M.blendColor(0,
0,0,0);va[0]=0;va[1]=0;va[2]=0;va[3]=0;M.enable(3042);X.blend_enable=!0;M.blendEquationSeparate(32774,32774);$b[0]=32774;$b[1]=32774;M.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;M.enable(3089);X.scissor_enable=!0;M.disable(2960);X.stencil_enable=!1;if(e=X.profile)m=performance.now(),l.count+=c;M.useProgram(I.program);n=Q.angle_instanced_arrays;var Mc,uc,bb,jc,Db;ia.setVAO(null);Mc=na.location;uc=hc[Mc];uc.buffer||M.enableVertexAttribArray(Mc);if(5126!==uc.type||1!==uc.size||
uc.buffer!==f||!1!==uc.normalized||0!==uc.offset||8!==uc.stride)M.bindBuffer(34962,f.buffer),M.vertexAttribPointer(Mc,1,5126,!1,8,0),uc.type=5126,uc.size=1,uc.buffer=f,uc.normalized=!1,uc.offset=0,uc.stride=8;0!==uc.divisor&&(n.vertexAttribDivisorANGLE(Mc,0),uc.divisor=0);bb=G.location;jc=hc[bb];jc.buffer||M.enableVertexAttribArray(bb);if(5126!==jc.type||1!==jc.size||jc.buffer!==a||!1!==jc.normalized||4!==jc.offset||8!==jc.stride)M.bindBuffer(34962,a.buffer),M.vertexAttribPointer(bb,1,5126,!1,8,4),
jc.type=5126,jc.size=1,jc.buffer=a,jc.normalized=!1,jc.offset=4,jc.stride=8;0!==jc.divisor&&(n.vertexAttribDivisorANGLE(bb,0),jc.divisor=0);(Db=H.elements)?M.bindBuffer(34963,Db.buffer.buffer):ia.currentVAO&&(Db=L.getElements(ia.currentVAO.elements))&&M.bindBuffer(34963,Db.buffer.buffer);for(p=0;p<c;++p){r=b[p];var sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,Ua,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,ff,Ja,Ob,ib,kb,
za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,nf,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Ne,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,tf,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd;sc=r.viewport;Sa=sc.x|0;Kc=sc.y|0;bc="width"in sc?sc.width|0:Pa.framebufferWidth-Sa;Zc="height"in sc?sc.height|0:Pa.framebufferHeight-Kc;Cd=Pa.viewportWidth;Pa.viewportWidth=bc;md=Pa.viewportHeight;Pa.viewportHeight=Zc;M.viewport(Sa,Kc,bc,Zc);ha[0]=Sa;ha[1]=Kc;ha[2]=bc;ha[3]=Zc;(Cc=B.call(this,
Pa,r,p))?M.enable(2929):M.disable(2929);X.depth_enable=Cc;Xb=r.viewport;Hc=Xb.x|0;Sc=Xb.y|0;Ka="width"in Xb?Xb.width|0:Pa.framebufferWidth-Hc;Eb="height"in Xb?Xb.height|0:Pa.framebufferHeight-Sc;M.scissor(Hc,Sc,Ka,Eb);J[0]=Hc;J[1]=Sc;J[2]=Ka;J[3]=Eb;W.buffer=r.positionBuffer;Wa=!1;pa=null;ud=0;Ib=!1;Gb=Ra=0;eb=1;pc=0;Sb=5126;hd=Tb=kc=Ua=0;Zb(W)?(Wa=!0,pa=sa.createStream(34962,W),Sb=pa.dtype):(pa=sa.getBuffer(W))?Sb=pa.dtype:"constant"in W?(eb=2,"number"===typeof W.constant?(kc=W.constant,Tb=hd=Ua=
0):(kc=0<W.constant.length?W.constant[0]:0,Tb=1<W.constant.length?W.constant[1]:0,hd=2<W.constant.length?W.constant[2]:0,Ua=3<W.constant.length?W.constant[3]:0)):(pa=Zb(W.buffer)?sa.createStream(34962,W.buffer):sa.getBuffer(W.buffer),Sb="type"in W?ta[W.type]:pa.dtype,Ib=!!W.normalized,Gb=W.size|0,Ra=W.offset|0,pc=W.stride|0,ud=W.divisor|0);Ub=ea.location;Ma=hc[Ub];if(1===eb){Ma.buffer||M.enableVertexAttribArray(Ub);qb=Gb||2;if(Ma.type!==Sb||Ma.size!==qb||Ma.buffer!==pa||Ma.normalized!==Ib||Ma.offset!==
Ra||Ma.stride!==pc)M.bindBuffer(34962,pa.buffer),M.vertexAttribPointer(Ub,qb,Sb,Ib,pc,Ra),Ma.type=Sb,Ma.size=qb,Ma.buffer=pa,Ma.normalized=Ib,Ma.offset=Ra,Ma.stride=pc;Ma.divisor!==ud&&(n.vertexAttribDivisorANGLE(Ub,ud),Ma.divisor=ud)}else if(Ma.buffer&&(M.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==kc||Ma.y!==Tb||Ma.z!==hd||Ma.w!==Ua)M.vertexAttrib4f(Ub,kc,Tb,hd,Ua),Ma.x=kc,Ma.y=Tb,Ma.z=hd,Ma.w=Ua;oa.buffer=r.positionBuffer;vb=!1;jb=null;Na=0;qc=!1;fd=Yb=0;fb=1;mc=0;ad=5126;ra=mb=lb=dc=0;
Zb(oa)?(vb=!0,jb=sa.createStream(34962,oa),ad=jb.dtype):(jb=sa.getBuffer(oa))?ad=jb.dtype:"constant"in oa?(fb=2,"number"===typeof oa.constant?(lb=oa.constant,mb=ra=dc=0):(lb=0<oa.constant.length?oa.constant[0]:0,mb=1<oa.constant.length?oa.constant[1]:0,ra=2<oa.constant.length?oa.constant[2]:0,dc=3<oa.constant.length?oa.constant[3]:0)):(jb=Zb(oa.buffer)?sa.createStream(34962,oa.buffer):sa.getBuffer(oa.buffer),ad="type"in oa?ta[oa.type]:jb.dtype,qc=!!oa.normalized,fd=oa.size|0,Yb=oa.offset|0,mc=oa.stride|
0,Na=oa.divisor|0);rb=z.location;ua=hc[rb];if(1===fb){ua.buffer||M.enableVertexAttribArray(rb);Ta=fd||2;if(ua.type!==ad||ua.size!==Ta||ua.buffer!==jb||ua.normalized!==qc||ua.offset!==Yb||ua.stride!==mc)M.bindBuffer(34962,jb.buffer),M.vertexAttribPointer(rb,Ta,ad,qc,mc,Yb),ua.type=ad,ua.size=Ta,ua.buffer=jb,ua.normalized=qc,ua.offset=Yb,ua.stride=mc;ua.divisor!==Na&&(n.vertexAttribDivisorANGLE(rb,Na),ua.divisor=Na)}else if(ua.buffer&&(M.disableVertexAttribArray(rb),ua.buffer=null),ua.x!==lb||ua.y!==
mb||ua.z!==ra||ua.w!==dc)M.vertexAttrib4f(rb,lb,mb,ra,dc),ua.x=lb,ua.y=mb,ua.z=ra,ua.w=dc;fa.buffer=r.positionFractBuffer;cb=!1;Aa=null;hb=0;Ha=!1;Ab=Bb=0;Qa=1;Lc=0;Jb=5126;ff=ya=Vb=Za=0;Zb(fa)?(cb=!0,Aa=sa.createStream(34962,fa),Jb=Aa.dtype):(Aa=sa.getBuffer(fa))?Jb=Aa.dtype:"constant"in fa?(Qa=2,"number"===typeof fa.constant?(Vb=fa.constant,ya=ff=Za=0):(Vb=0<fa.constant.length?fa.constant[0]:0,ya=1<fa.constant.length?fa.constant[1]:0,ff=2<fa.constant.length?fa.constant[2]:0,Za=3<fa.constant.length?
fa.constant[3]:0)):(Aa=Zb(fa.buffer)?sa.createStream(34962,fa.buffer):sa.getBuffer(fa.buffer),Jb="type"in fa?ta[fa.type]:Aa.dtype,Ha=!!fa.normalized,Ab=fa.size|0,Bb=fa.offset|0,Lc=fa.stride|0,hb=fa.divisor|0);Ja=q.location;Ob=hc[Ja];if(1===Qa){Ob.buffer||M.enableVertexAttribArray(Ja);ib=Ab||2;if(Ob.type!==Jb||Ob.size!==ib||Ob.buffer!==Aa||Ob.normalized!==Ha||Ob.offset!==Bb||Ob.stride!==Lc)M.bindBuffer(34962,Aa.buffer),M.vertexAttribPointer(Ja,ib,Jb,Ha,Lc,Bb),Ob.type=Jb,Ob.size=ib,Ob.buffer=Aa,Ob.normalized=
Ha,Ob.offset=Bb,Ob.stride=Lc;Ob.divisor!==hb&&(n.vertexAttribDivisorANGLE(Ja,hb),Ob.divisor=hb)}else if(Ob.buffer&&(M.disableVertexAttribArray(Ja),Ob.buffer=null),Ob.x!==Vb||Ob.y!==ya||Ob.z!==ff||Ob.w!==Za)M.vertexAttrib4f(Ja,Vb,ya,ff,Za),Ob.x=Vb,Ob.y=ya,Ob.z=ff,Ob.w=Za;D.buffer=r.positionFractBuffer;kb=!1;za=null;ec=0;Ea=!1;tb=sb=0;Xa=1;Ya=0;nc=5126;Mb=Va=wc=cd=0;Zb(D)?(kb=!0,za=sa.createStream(34962,D),nc=za.dtype):(za=sa.getBuffer(D))?nc=za.dtype:"constant"in D?(Xa=2,"number"===typeof D.constant?
(wc=D.constant,Va=Mb=cd=0):(wc=0<D.constant.length?D.constant[0]:0,Va=1<D.constant.length?D.constant[1]:0,Mb=2<D.constant.length?D.constant[2]:0,cd=3<D.constant.length?D.constant[3]:0)):(za=Zb(D.buffer)?sa.createStream(34962,D.buffer):sa.getBuffer(D.buffer),nc="type"in D?ta[D.type]:za.dtype,Ea=!!D.normalized,tb=D.size|0,sb=D.offset|0,Ya=D.stride|0,ec=D.divisor|0);Rc=k.location;Fa=hc[Rc];if(1===Xa){Fa.buffer||M.enableVertexAttribArray(Rc);zc=tb||2;if(Fa.type!==nc||Fa.size!==zc||Fa.buffer!==za||Fa.normalized!==
Ea||Fa.offset!==sb||Fa.stride!==Ya)M.bindBuffer(34962,za.buffer),M.vertexAttribPointer(Rc,zc,nc,Ea,Ya,sb),Fa.type=nc,Fa.size=zc,Fa.buffer=za,Fa.normalized=Ea,Fa.offset=sb,Fa.stride=Ya;Fa.divisor!==ec&&(n.vertexAttribDivisorANGLE(Rc,ec),Fa.divisor=ec)}else if(Fa.buffer&&(M.disableVertexAttribArray(Rc),Fa.buffer=null),Fa.x!==wc||Fa.y!==Va||Fa.z!==Mb||Fa.w!==cd)M.vertexAttrib4f(Rc,wc,Va,Mb,cd),Fa.x=wc,Fa.y=Va,Fa.z=Mb,Fa.w=cd;x.buffer=r.colorBuffer;Oa=!1;Ba=null;nb=0;wb=!1;ub=Cb=0;xc=1;xb=0;Id=5126;nd=
Nc=nf=vc=0;Zb(x)?(Oa=!0,Ba=sa.createStream(34962,x),Id=Ba.dtype):(Ba=sa.getBuffer(x))?Id=Ba.dtype:"constant"in x?(xc=2,"number"===typeof x.constant?(nf=x.constant,Nc=nd=vc=0):(nf=0<x.constant.length?x.constant[0]:0,Nc=1<x.constant.length?x.constant[1]:0,nd=2<x.constant.length?x.constant[2]:0,vc=3<x.constant.length?x.constant[3]:0)):(Ba=Zb(x.buffer)?sa.createStream(34962,x.buffer):sa.getBuffer(x.buffer),Id="type"in x?ta[x.type]:Ba.dtype,wb=!!x.normalized,ub=x.size|0,Cb=x.offset|0,xb=x.stride|0,nb=
x.divisor|0);dd=da.location;Wb=hc[dd];if(1===xc){Wb.buffer||M.enableVertexAttribArray(dd);cc=ub||4;if(Wb.type!==Id||Wb.size!==cc||Wb.buffer!==Ba||Wb.normalized!==wb||Wb.offset!==Cb||Wb.stride!==xb)M.bindBuffer(34962,Ba.buffer),M.vertexAttribPointer(dd,cc,Id,wb,xb,Cb),Wb.type=Id,Wb.size=cc,Wb.buffer=Ba,Wb.normalized=wb,Wb.offset=Cb,Wb.stride=xb;Wb.divisor!==nb&&(n.vertexAttribDivisorANGLE(dd,nb),Wb.divisor=nb)}else if(Wb.buffer&&(M.disableVertexAttribArray(dd),Wb.buffer=null),Wb.x!==nf||Wb.y!==Nc||
Wb.z!==nd||Wb.w!==vc)M.vertexAttrib4f(dd,nf,Nc,nd,vc),Wb.x=nf,Wb.y=Nc,Wb.z=nd,Wb.w=vc;Pb=r.scale;Ga=Pb[0];ob=Pb[1];p&&ac===Ga&&yb===ob||(ac=Ga,yb=ob,M.uniform2f(h.location,Ga,ob));Nb=r.scaleFract;Qb=Nb[0];ic=Nb[1];p&&fc===Qb&&Ne===ic||(fc=Qb,Ne=ic,M.uniform2f(g.location,Qb,ic));Dc=r.translate;Ec=Dc[0];Oc=Dc[1];p&&Fc===Ec&&$c===Oc||(Fc=Ec,$c=Oc,M.uniform2f(ka.location,Ec,Oc));Tc=r.translateFract;Pc=Tc[0];Fb=Tc[1];p&&Kb===Pc&&Qc===Fb||(Kb=Pc,Qc=Fb,M.uniform2f(la.location,Pc,Fb));Ic=r.thickness;p&&Uc===
Ic||(Uc=Ic,M.uniform1f(U.location,Ic));gc=r.depth;p&&Xc===gc||(Xc=gc,M.uniform1f(w.location,gc));od=N.call(this,Pa,r,p);id=od[0];Yc=od[1];Ud=od[2];se=od[3];p&&rd===id&&tf===Yc&&he===Ud&&le===se||(rd=id,tf=Yc,he=Ud,le=se,M.uniform4f(gb.location,id,Yc,Ud,se));Fd=r.dashLength;p&&Dd===Fd||(Dd=Fd,M.uniform1f(P.location,Fd));ed=r.opacity;p&&Gc===ed||(Gc=ed,M.uniform1f(ga.location,ed));(pd=r.dashTexture)&&"framebuffer"===pd._reglType&&(pd=pd.color[0]);jd=pd._texture;M.uniform1i(K.location,jd.bind());bd=
r.count;0<bd?Db?n.drawElementsInstancedANGLE(5,4,Db.type,0<<(Db.type-5121>>1),bd):n.drawArraysInstancedANGLE(5,0,4,bd):0>bd&&(Db?M.drawElements(5,4,Db.type,0<<(Db.type-5121>>1)):M.drawArrays(5,0,4));Pa.viewportWidth=Cd;Pa.viewportHeight=md;Wa&&sa.destroyStream(pa);vb&&sa.destroyStream(jb);cb&&sa.destroyStream(Aa);kb&&sa.destroyStream(za);Oa&&sa.destroyStream(Ba);jd.unbind()}X.dirty=!0;ia.setVAO(null);e&&(l.cpuTime+=performance.now()-m)},draw:function(d){var e,p,r,m,t,v,y,C,aa,u,A,R,Y,I,O,T,N,wa,B,
ba,La,Ld,Ve,af,Ua,yd,Ce,Rd,Sd,ke,db,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,ff,Ja,Ob,ib,kb,za,ec,Ea,sb;e=qa.next;e!==qa.cur&&(e?M.bindFramebuffer(36160,e.framebuffer):M.bindFramebuffer(36160,null),qa.cur=e);if(X.dirty){var tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,nf,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb;tb=$a.dither;
tb!==X.dither&&(tb?M.enable(3024):M.disable(3024),X.dither=tb);Xa=$a.depth_func;Xa!==X.depth_func&&(M.depthFunc(Xa),X.depth_func=Xa);Ya=ma[0];nc=ma[1];if(Ya!==Rb[0]||nc!==Rb[1])M.depthRange(Ya,nc),Rb[0]=Ya,Rb[1]=nc;cd=$a.depth_mask;cd!==X.depth_mask&&(M.depthMask(cd),X.depth_mask=cd);wc=pb[0];Va=pb[1];Mb=pb[2];Rc=pb[3];if(wc!==ca[0]||Va!==ca[1]||Mb!==ca[2]||Rc!==ca[3])M.colorMask(wc,Va,Mb,Rc),ca[0]=wc,ca[1]=Va,ca[2]=Mb,ca[3]=Rc;Fa=$a.cull_enable;Fa!==X.cull_enable&&(Fa?M.enable(2884):M.disable(2884),
X.cull_enable=Fa);zc=$a.cull_face;zc!==X.cull_face&&(M.cullFace(zc),X.cull_face=zc);Oa=$a.frontFace;Oa!==X.frontFace&&(M.frontFace(Oa),X.frontFace=Oa);Ba=$a.lineWidth;Ba!==X.lineWidth&&(M.lineWidth(Ba),X.lineWidth=Ba);nb=$a.polygonOffset_enable;nb!==X.polygonOffset_enable&&(nb?M.enable(32823):M.disable(32823),X.polygonOffset_enable=nb);wb=oc[0];Cb=oc[1];if(wb!==tc[0]||Cb!==tc[1])M.polygonOffset(wb,Cb),tc[0]=wb,tc[1]=Cb;ub=$a.sample_alpha;ub!==X.sample_alpha&&(ub?M.enable(32926):M.disable(32926),X.sample_alpha=
ub);xc=$a.sample_enable;xc!==X.sample_enable&&(xc?M.enable(32928):M.disable(32928),X.sample_enable=xc);xb=vd[0];Id=vd[1];if(xb!==yc[0]||Id!==yc[1])M.sampleCoverage(xb,Id),yc[0]=xb,yc[1]=Id;vc=$a.stencil_mask;vc!==X.stencil_mask&&(M.stencilMask(vc),X.stencil_mask=vc);nf=ja[0];Nc=ja[1];nd=ja[2];if(nf!==Ca[0]||Nc!==Ca[1]||nd!==Ca[2])M.stencilFunc(nf,Nc,nd),Ca[0]=nf,Ca[1]=Nc,Ca[2]=nd;dd=Vc[0];Wb=Vc[1];cc=Vc[2];Pb=Vc[3];if(dd!==E[0]||Wb!==E[1]||cc!==E[2]||Pb!==E[3])M.stencilOpSeparate(dd,Wb,cc,Pb),E[0]=
dd,E[1]=Wb,E[2]=cc,E[3]=Pb;Ga=Lb[0];ac=Lb[1];ob=Lb[2];yb=Lb[3];if(Ga!==ab[0]||ac!==ab[1]||ob!==ab[2]||yb!==ab[3])M.stencilOpSeparate(Ga,ac,ob,yb),ab[0]=Ga,ab[1]=ac,ab[2]=ob,ab[3]=yb}p=d.viewport;r=p.x|0;m=p.y|0;t="width"in p?p.width|0:Pa.framebufferWidth-r;v="height"in p?p.height|0:Pa.framebufferHeight-m;y=Pa.viewportWidth;Pa.viewportWidth=t;C=Pa.viewportHeight;Pa.viewportHeight=v;M.viewport(r,m,t,v);ha[0]=r;ha[1]=m;ha[2]=t;ha[3]=v;M.blendColor(0,0,0,0);va[0]=0;va[1]=0;va[2]=0;va[3]=0;M.enable(3042);
X.blend_enable=!0;M.blendEquationSeparate(32774,32774);$b[0]=32774;$b[1]=32774;M.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;(aa=c.call(this,Pa,d,0))?M.enable(2929):M.disable(2929);X.depth_enable=aa;u=d.viewport;A=u.x|0;R=u.y|0;Y="width"in u?u.width|0:Pa.framebufferWidth-A;I="height"in u?u.height|0:Pa.framebufferHeight-R;M.scissor(A,R,Y,I);J[0]=A;J[1]=R;J[2]=Y;J[3]=I;M.enable(3089);X.scissor_enable=!0;M.disable(2960);X.stencil_enable=!1;if(O=X.profile)T=performance.now(),l.count++;
M.useProgram(b.program);N=Q.angle_instanced_arrays;ia.setVAO(null);W.buffer=d.positionBuffer;wa=!1;B=null;ba=0;La=!1;Ve=Ld=0;af=1;Ua=0;yd=5126;ke=Sd=Rd=Ce=0;Zb(W)?(wa=!0,B=sa.createStream(34962,W),yd=B.dtype):(B=sa.getBuffer(W))?yd=B.dtype:"constant"in W?(af=2,"number"===typeof W.constant?(Rd=W.constant,Sd=ke=Ce=0):(Rd=0<W.constant.length?W.constant[0]:0,Sd=1<W.constant.length?W.constant[1]:0,ke=2<W.constant.length?W.constant[2]:0,Ce=3<W.constant.length?W.constant[3]:0)):(B=Zb(W.buffer)?sa.createStream(34962,
W.buffer):sa.getBuffer(W.buffer),yd="type"in W?ta[W.type]:B.dtype,La=!!W.normalized,Ve=W.size|0,Ld=W.offset|0,Ua=W.stride|0,ba=W.divisor|0);db=ea.location;sd=hc[db];if(1===af){sd.buffer||M.enableVertexAttribArray(db);ld=Ve||2;if(sd.type!==yd||sd.size!==ld||sd.buffer!==B||sd.normalized!==La||sd.offset!==Ld||sd.stride!==Ua)M.bindBuffer(34962,B.buffer),M.vertexAttribPointer(db,ld,yd,La,Ua,Ld),sd.type=yd,sd.size=ld,sd.buffer=B,sd.normalized=La,sd.offset=Ld,sd.stride=Ua;sd.divisor!==ba&&(N.vertexAttribDivisorANGLE(db,
ba),sd.divisor=ba)}else if(sd.buffer&&(M.disableVertexAttribArray(db),sd.buffer=null),sd.x!==Rd||sd.y!==Sd||sd.z!==ke||sd.w!==Ce)M.vertexAttrib4f(db,Rd,Sd,ke,Ce),sd.x=Rd,sd.y=Sd,sd.z=ke,sd.w=Ce;oa.buffer=d.positionBuffer;wd=!1;qd=null;Bc=0;lc=!1;gd=td=0;Mc=1;uc=0;bb=5126;Sa=sc=Db=jc=0;Zb(oa)?(wd=!0,qd=sa.createStream(34962,oa),bb=qd.dtype):(qd=sa.getBuffer(oa))?bb=qd.dtype:"constant"in oa?(Mc=2,"number"===typeof oa.constant?(Db=oa.constant,sc=Sa=jc=0):(Db=0<oa.constant.length?oa.constant[0]:0,sc=
1<oa.constant.length?oa.constant[1]:0,Sa=2<oa.constant.length?oa.constant[2]:0,jc=3<oa.constant.length?oa.constant[3]:0)):(qd=Zb(oa.buffer)?sa.createStream(34962,oa.buffer):sa.getBuffer(oa.buffer),bb="type"in oa?ta[oa.type]:qd.dtype,lc=!!oa.normalized,gd=oa.size|0,td=oa.offset|0,uc=oa.stride|0,Bc=oa.divisor|0);Kc=z.location;bc=hc[Kc];if(1===Mc){bc.buffer||M.enableVertexAttribArray(Kc);Zc=gd||2;if(bc.type!==bb||bc.size!==Zc||bc.buffer!==qd||bc.normalized!==lc||bc.offset!==td||bc.stride!==uc)M.bindBuffer(34962,
qd.buffer),M.vertexAttribPointer(Kc,Zc,bb,lc,uc,td),bc.type=bb,bc.size=Zc,bc.buffer=qd,bc.normalized=lc,bc.offset=td,bc.stride=uc;bc.divisor!==Bc&&(N.vertexAttribDivisorANGLE(Kc,Bc),bc.divisor=Bc)}else if(bc.buffer&&(M.disableVertexAttribArray(Kc),bc.buffer=null),bc.x!==Db||bc.y!==sc||bc.z!==Sa||bc.w!==jc)M.vertexAttrib4f(Kc,Db,sc,Sa,jc),bc.x=Db,bc.y=sc,bc.z=Sa,bc.w=jc;fa.buffer=d.positionFractBuffer;Cd=!1;md=null;Cc=0;Xb=!1;Sc=Hc=0;Ka=1;Eb=0;Wa=5126;Ra=Ib=ud=pa=0;Zb(fa)?(Cd=!0,md=sa.createStream(34962,
fa),Wa=md.dtype):(md=sa.getBuffer(fa))?Wa=md.dtype:"constant"in fa?(Ka=2,"number"===typeof fa.constant?(ud=fa.constant,Ib=Ra=pa=0):(ud=0<fa.constant.length?fa.constant[0]:0,Ib=1<fa.constant.length?fa.constant[1]:0,Ra=2<fa.constant.length?fa.constant[2]:0,pa=3<fa.constant.length?fa.constant[3]:0)):(md=Zb(fa.buffer)?sa.createStream(34962,fa.buffer):sa.getBuffer(fa.buffer),Wa="type"in fa?ta[fa.type]:md.dtype,Xb=!!fa.normalized,Sc=fa.size|0,Hc=fa.offset|0,Eb=fa.stride|0,Cc=fa.divisor|0);Gb=q.location;
eb=hc[Gb];if(1===Ka){eb.buffer||M.enableVertexAttribArray(Gb);pc=Sc||2;if(eb.type!==Wa||eb.size!==pc||eb.buffer!==md||eb.normalized!==Xb||eb.offset!==Hc||eb.stride!==Eb)M.bindBuffer(34962,md.buffer),M.vertexAttribPointer(Gb,pc,Wa,Xb,Eb,Hc),eb.type=Wa,eb.size=pc,eb.buffer=md,eb.normalized=Xb,eb.offset=Hc,eb.stride=Eb;eb.divisor!==Cc&&(N.vertexAttribDivisorANGLE(Gb,Cc),eb.divisor=Cc)}else if(eb.buffer&&(M.disableVertexAttribArray(Gb),eb.buffer=null),eb.x!==ud||eb.y!==Ib||eb.z!==Ra||eb.w!==pa)M.vertexAttrib4f(Gb,
ud,Ib,Ra,pa),eb.x=ud,eb.y=Ib,eb.z=Ra,eb.w=pa;D.buffer=d.positionFractBuffer;Sb=!1;ue=null;kc=0;Tb=!1;Ub=hd=0;Ma=1;qb=0;vb=5126;Yb=qc=Na=jb=0;Zb(D)?(Sb=!0,ue=sa.createStream(34962,D),vb=ue.dtype):(ue=sa.getBuffer(D))?vb=ue.dtype:"constant"in D?(Ma=2,"number"===typeof D.constant?(Na=D.constant,qc=Yb=jb=0):(Na=0<D.constant.length?D.constant[0]:0,qc=1<D.constant.length?D.constant[1]:0,Yb=2<D.constant.length?D.constant[2]:0,jb=3<D.constant.length?D.constant[3]:0)):(ue=Zb(D.buffer)?sa.createStream(34962,
D.buffer):sa.getBuffer(D.buffer),vb="type"in D?ta[D.type]:ue.dtype,Tb=!!D.normalized,Ub=D.size|0,hd=D.offset|0,qb=D.stride|0,kc=D.divisor|0);fd=k.location;fb=hc[fd];if(1===Ma){fb.buffer||M.enableVertexAttribArray(fd);mc=Ub||2;if(fb.type!==vb||fb.size!==mc||fb.buffer!==ue||fb.normalized!==Tb||fb.offset!==hd||fb.stride!==qb)M.bindBuffer(34962,ue.buffer),M.vertexAttribPointer(fd,mc,vb,Tb,qb,hd),fb.type=vb,fb.size=mc,fb.buffer=ue,fb.normalized=Tb,fb.offset=hd,fb.stride=qb;fb.divisor!==kc&&(N.vertexAttribDivisorANGLE(fd,
kc),fb.divisor=kc)}else if(fb.buffer&&(M.disableVertexAttribArray(fd),fb.buffer=null),fb.x!==Na||fb.y!==qc||fb.z!==Yb||fb.w!==jb)M.vertexAttrib4f(fd,Na,qc,Yb,jb),fb.x=Na,fb.y=qc,fb.z=Yb,fb.w=jb;x.buffer=d.colorBuffer;ad=!1;dc=null;lb=0;mb=!1;rb=ra=0;ua=1;Ta=0;cb=5126;Bb=Ha=hb=Aa=0;Zb(x)?(ad=!0,dc=sa.createStream(34962,x),cb=dc.dtype):(dc=sa.getBuffer(x))?cb=dc.dtype:"constant"in x?(ua=2,"number"===typeof x.constant?(hb=x.constant,Ha=Bb=Aa=0):(hb=0<x.constant.length?x.constant[0]:0,Ha=1<x.constant.length?
x.constant[1]:0,Bb=2<x.constant.length?x.constant[2]:0,Aa=3<x.constant.length?x.constant[3]:0)):(dc=Zb(x.buffer)?sa.createStream(34962,x.buffer):sa.getBuffer(x.buffer),cb="type"in x?ta[x.type]:dc.dtype,mb=!!x.normalized,rb=x.size|0,ra=x.offset|0,Ta=x.stride|0,lb=x.divisor|0);Ab=da.location;Qa=hc[Ab];if(1===ua){Qa.buffer||M.enableVertexAttribArray(Ab);Lc=rb||4;if(Qa.type!==cb||Qa.size!==Lc||Qa.buffer!==dc||Qa.normalized!==mb||Qa.offset!==ra||Qa.stride!==Ta)M.bindBuffer(34962,dc.buffer),M.vertexAttribPointer(Ab,
Lc,cb,mb,Ta,ra),Qa.type=cb,Qa.size=Lc,Qa.buffer=dc,Qa.normalized=mb,Qa.offset=ra,Qa.stride=Ta;Qa.divisor!==lb&&(N.vertexAttribDivisorANGLE(Ab,lb),Qa.divisor=lb)}else if(Qa.buffer&&(M.disableVertexAttribArray(Ab),Qa.buffer=null),Qa.x!==hb||Qa.y!==Ha||Qa.z!==Bb||Qa.w!==Aa)M.vertexAttrib4f(Ab,hb,Ha,Bb,Aa),Qa.x=hb,Qa.y=Ha,Qa.z=Bb,Qa.w=Aa;Jb=na.location;Za=hc[Jb];Za.buffer||M.enableVertexAttribArray(Jb);if(5126!==Za.type||1!==Za.size||Za.buffer!==f||!1!==Za.normalized||0!==Za.offset||8!==Za.stride)M.bindBuffer(34962,
f.buffer),M.vertexAttribPointer(Jb,1,5126,!1,8,0),Za.type=5126,Za.size=1,Za.buffer=f,Za.normalized=!1,Za.offset=0,Za.stride=8;0!==Za.divisor&&(N.vertexAttribDivisorANGLE(Jb,0),Za.divisor=0);Vb=G.location;ya=hc[Vb];ya.buffer||M.enableVertexAttribArray(Vb);if(5126!==ya.type||1!==ya.size||ya.buffer!==a||!1!==ya.normalized||4!==ya.offset||8!==ya.stride)M.bindBuffer(34962,a.buffer),M.vertexAttribPointer(Vb,1,5126,!1,8,4),ya.type=5126,ya.size=1,ya.buffer=a,ya.normalized=!1,ya.offset=4,ya.stride=8;0!==ya.divisor&&
(N.vertexAttribDivisorANGLE(Vb,0),ya.divisor=0);ff=d.scale;M.uniform2f(h.location,ff[0],ff[1]);Ja=d.scaleFract;M.uniform2f(g.location,Ja[0],Ja[1]);Ob=d.translate;M.uniform2f(ka.location,Ob[0],Ob[1]);ib=d.translateFract;M.uniform2f(la.location,ib[0],ib[1]);M.uniform1f(U.location,d.thickness);M.uniform1f(w.location,d.depth);kb=n.call(this,Pa,d,0);M.uniform4f(gb.location,kb[0],kb[1],kb[2],kb[3]);M.uniform1f(P.location,d.dashLength);M.uniform1f(ga.location,d.opacity);(za=d.dashTexture)&&"framebuffer"===
za._reglType&&(za=za.color[0]);ec=za._texture;M.uniform1i(K.location,ec.bind());(Ea=H.elements)?M.bindBuffer(34963,Ea.buffer.buffer):ia.currentVAO&&(Ea=L.getElements(ia.currentVAO.elements))&&M.bindBuffer(34963,Ea.buffer.buffer);sb=d.count;0<sb?Ea?N.drawElementsInstancedANGLE(5,4,Ea.type,0<<(Ea.type-5121>>1),sb):N.drawArraysInstancedANGLE(5,0,4,sb):0>sb&&(Ea?M.drawElements(5,4,Ea.type,0<<(Ea.type-5121>>1)):M.drawArrays(5,0,4));X.dirty=!0;ia.setVAO(null);Pa.viewportWidth=y;Pa.viewportHeight=C;O&&(l.cpuTime+=
performance.now()-T);wa&&sa.destroyStream(B);wd&&sa.destroyStream(qd);Cd&&sa.destroyStream(md);Sb&&sa.destroyStream(ue);ad&&sa.destroyStream(dc);ec.unbind()},scope:function(b,c,e){var g,h,k,n,q,w,J,z,E,G,L,I,M,N,K,Q,B,V,P,ja,U,ha,da,ca,ia,oc,Ca,ga,na,qa,ma,vd,ka,yc,lc,Lb,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,ab,Rb,va,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,la,tc,Tb,db,Ub,Ma,qb,vb,jb,Na,qc,Yb,pb,fb,mc,ea,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,gb,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,
wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Vc,vc,$b,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Jc,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,hc,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,Pe,Le;g=b.viewport;h=g.x|0;k=g.y|0;n="width"in g?g.width|0:Pa.framebufferWidth-h;q="height"in g?g.height|0:Pa.framebufferHeight-k;w=Pa.viewportWidth;Pa.viewportWidth=n;J=Pa.viewportHeight;
Pa.viewportHeight=q;z=y[0];y[0]=h;E=y[1];y[1]=k;G=y[2];y[2]=n;L=y[3];y[3]=q;I=ba[0];ba[0]=0;M=ba[1];ba[1]=0;N=ba[2];ba[2]=0;K=ba[3];ba[3]=0;Q=$a.blend_enable;$a.blend_enable=!0;B=La[0];La[0]=32774;V=La[1];La[1]=32774;P=Ua[0];Ua[0]=770;ja=Ua[1];Ua[1]=771;U=Ua[2];Ua[2]=773;ha=Ua[3];Ua[3]=1;da=d.call(this,Pa,b,e);ca=$a.depth_enable;$a.depth_enable=da;ia=b.viewport;oc=ia.x|0;Ca=ia.y|0;ga="width"in ia?ia.width|0:Pa.framebufferWidth-oc;na="height"in ia?ia.height|0:Pa.framebufferHeight-Ca;qa=Y[0];Y[0]=oc;
ma=Y[1];Y[1]=Ca;vd=Y[2];Y[2]=ga;ka=Y[3];Y[3]=na;yc=$a.scissor_enable;$a.scissor_enable=!0;lc=$a.stencil_enable;$a.stencil_enable=!1;if(Lb=X.profile)gd=performance.now(),l.count++;Mc=H.offset;H.offset=0;uc=H.count;H.count=4;bb=b.count;jc=H.instances;H.instances=bb;Db=H.primitive;H.primitive=5;sc=b.dashLength;Sa=t[23];t[23]=sc;Kc=b.dashTexture;bc=t[24];t[24]=Kc;ab=b.depth;Rb=t[22];t[22]=ab;va=b.id;Cc=t[31];t[31]=va;Xb=b.miterLimit;Hc=t[32];t[32]=Xb;Sc=p.call(this,Pa,b,e);Ka=t[33];t[33]=Sc;Eb=b.opacity;
Wa=t[10];t[10]=Eb;pa=Pa.pixelRatio;ud=t[34];t[34]=pa;Ib=b.scale;Ra=t[6];t[6]=Ib;Gb=b.scaleFract;eb=t[7];t[7]=Gb;pc=b.thickness;Sb=t[21];t[21]=pc;la=b.translate;tc=t[8];t[8]=la;Tb=b.translateFract;db=t[9];t[9]=Tb;Ub=aa.call(this,Pa,b,e);Ma=t[3];t[3]=Ub;W.buffer=b.positionBuffer;qb=!1;vb=null;jb=0;Na=!1;Yb=qc=0;pb=1;fb=0;mc=5126;mb=lb=dc=ea=0;Zb(W)?(qb=!0,vb=sa.createStream(34962,W),mc=vb.dtype):(vb=sa.getBuffer(W))?mc=vb.dtype:"constant"in W?(pb=2,"number"===typeof W.constant?(dc=W.constant,lb=mb=
ea=0):(dc=0<W.constant.length?W.constant[0]:0,lb=1<W.constant.length?W.constant[1]:0,mb=2<W.constant.length?W.constant[2]:0,ea=3<W.constant.length?W.constant[3]:0)):(vb=Zb(W.buffer)?sa.createStream(34962,W.buffer):sa.getBuffer(W.buffer),mc="type"in W?ta[W.type]:vb.dtype,Na=!!W.normalized,Yb=W.size|0,qc=W.offset|0,fb=W.stride|0,jb=W.divisor|0);ra=R.buffer;R.buffer=vb;rb=R.divisor;R.divisor=jb;ua=R.normalized;R.normalized=Na;Ta=R.offset;R.offset=qc;cb=R.size;R.size=Yb;Aa=R.state;R.state=pb;hb=R.stride;
R.stride=fb;Ha=R.type;R.type=mc;Bb=R.w;R.w=ea;Ab=R.x;R.x=dc;Qa=R.y;R.y=lb;Lc=R.z;R.z=mb;fa.buffer=b.positionFractBuffer;Jb=!1;Za=null;Vb=0;ya=!1;Ja=gb=0;Ob=1;ib=0;kb=5126;sb=Ea=ec=za=0;Zb(fa)?(Jb=!0,Za=sa.createStream(34962,fa),kb=Za.dtype):(Za=sa.getBuffer(fa))?kb=Za.dtype:"constant"in fa?(Ob=2,"number"===typeof fa.constant?(ec=fa.constant,Ea=sb=za=0):(ec=0<fa.constant.length?fa.constant[0]:0,Ea=1<fa.constant.length?fa.constant[1]:0,sb=2<fa.constant.length?fa.constant[2]:0,za=3<fa.constant.length?
fa.constant[3]:0)):(Za=Zb(fa.buffer)?sa.createStream(34962,fa.buffer):sa.getBuffer(fa.buffer),kb="type"in fa?ta[fa.type]:Za.dtype,ya=!!fa.normalized,Ja=fa.size|0,gb=fa.offset|0,ib=fa.stride|0,Vb=fa.divisor|0);tb=r.buffer;r.buffer=Za;Xa=r.divisor;r.divisor=Vb;Ya=r.normalized;r.normalized=ya;nc=r.offset;r.offset=gb;cd=r.size;r.size=Ja;wc=r.state;r.state=Ob;Va=r.stride;r.stride=ib;Mb=r.type;r.type=kb;Rc=r.w;r.w=za;Fa=r.x;r.x=ec;zc=r.y;r.y=Ea;Oa=r.z;r.z=sb;oa.buffer=b.positionBuffer;Ba=!1;nb=null;wb=
0;Cb=!1;xc=ub=0;xb=1;Vc=0;vc=5126;dd=nd=Nc=$b=0;Zb(oa)?(Ba=!0,nb=sa.createStream(34962,oa),vc=nb.dtype):(nb=sa.getBuffer(oa))?vc=nb.dtype:"constant"in oa?(xb=2,"number"===typeof oa.constant?(Nc=oa.constant,nd=dd=$b=0):(Nc=0<oa.constant.length?oa.constant[0]:0,nd=1<oa.constant.length?oa.constant[1]:0,dd=2<oa.constant.length?oa.constant[2]:0,$b=3<oa.constant.length?oa.constant[3]:0)):(nb=Zb(oa.buffer)?sa.createStream(34962,oa.buffer):sa.getBuffer(oa.buffer),vc="type"in oa?ta[oa.type]:nb.dtype,Cb=!!oa.normalized,
xc=oa.size|0,ub=oa.offset|0,Vc=oa.stride|0,wb=oa.divisor|0);Wb=u.buffer;u.buffer=nb;cc=u.divisor;u.divisor=wb;Pb=u.normalized;u.normalized=Cb;Ga=u.offset;u.offset=ub;ac=u.size;u.size=xc;ob=u.state;u.state=xb;yb=u.stride;u.stride=Vc;Nb=u.type;u.type=vc;Qb=u.w;u.w=$b;fc=u.x;u.x=Nc;ic=u.y;u.y=nd;Jc=u.z;u.z=dd;D.buffer=b.positionFractBuffer;Dc=!1;Ec=null;Fc=0;Oc=!1;Tc=$c=0;Pc=1;Kb=0;Fb=5126;gc=Uc=Ic=Qc=0;Zb(D)?(Dc=!0,Ec=sa.createStream(34962,D),Fb=Ec.dtype):(Ec=sa.getBuffer(D))?Fb=Ec.dtype:"constant"in
D?(Pc=2,"number"===typeof D.constant?(Ic=D.constant,Uc=gc=Qc=0):(Ic=0<D.constant.length?D.constant[0]:0,Uc=1<D.constant.length?D.constant[1]:0,gc=2<D.constant.length?D.constant[2]:0,Qc=3<D.constant.length?D.constant[3]:0)):(Ec=Zb(D.buffer)?sa.createStream(34962,D.buffer):sa.getBuffer(D.buffer),Fb="type"in D?ta[D.type]:Ec.dtype,Oc=!!D.normalized,Tc=D.size|0,$c=D.offset|0,Kb=D.stride|0,Fc=D.divisor|0);Xc=v.buffer;v.buffer=Ec;od=v.divisor;v.divisor=Fc;id=v.normalized;v.normalized=Oc;rd=v.offset;v.offset=
$c;Yc=v.size;v.size=Tc;hc=v.state;v.state=Pc;Ud=v.stride;v.stride=Kb;he=v.type;v.type=Fb;se=v.w;v.w=Qc;le=v.x;v.x=Ic;Fd=v.y;v.y=Uc;Dd=v.z;v.z=gc;x.buffer=b.colorBuffer;ed=!1;Gc=null;pd=0;jd=!1;kd=bd=0;Ad=1;Bd=0;we=5126;be=ce=ve=me=0;Zb(x)?(ed=!0,Gc=sa.createStream(34962,x),we=Gc.dtype):(Gc=sa.getBuffer(x))?we=Gc.dtype:"constant"in x?(Ad=2,"number"===typeof x.constant?(ve=x.constant,ce=be=me=0):(ve=0<x.constant.length?x.constant[0]:0,ce=1<x.constant.length?x.constant[1]:0,be=2<x.constant.length?x.constant[2]:
0,me=3<x.constant.length?x.constant[3]:0)):(Gc=Zb(x.buffer)?sa.createStream(34962,x.buffer):sa.getBuffer(x.buffer),we="type"in x?ta[x.type]:Gc.dtype,jd=!!x.normalized,kd=x.size|0,bd=x.offset|0,Bd=x.stride|0,pd=x.divisor|0);$d=C.buffer;C.buffer=Gc;oe=C.divisor;C.divisor=pd;Yd=C.normalized;C.normalized=jd;ee=C.offset;C.offset=bd;Ac=C.size;C.size=kd;Wc=C.state;C.state=Ad;pe=C.stride;C.stride=Bd;ie=C.type;C.type=we;Ed=C.w;C.w=me;Jd=C.x;C.x=ve;Md=C.y;C.y=ce;Nd=C.z;C.z=be;fe=O.buffer;O.buffer=f;De=O.divisor;
O.divisor=0;xe=O.normalized;O.normalized=!1;ne=O.offset;O.offset=0;Ye=O.size;O.size=0;Oe=O.state;O.state=1;Ke=O.stride;O.stride=8;qe=O.type;O.type=5126;Ae=O.w;O.w=0;Ee=O.x;O.x=0;Fe=O.y;O.y=0;Ge=O.z;O.z=0;Be=A.buffer;A.buffer=a;Gd=A.divisor;A.divisor=0;Qd=A.normalized;A.normalized=!1;Vd=A.offset;A.offset=4;Zd=A.size;A.size=0;He=A.state;A.state=1;zd=A.stride;A.stride=8;Od=A.type;A.type=5126;ye=A.w;A.w=0;Ie=A.x;A.x=0;gf=A.y;A.y=0;Xe=A.z;A.z=0;Pe=T.vert;T.vert=20;Le=T.frag;T.frag=19;X.dirty=!0;c(Pa,b,
e);Pa.viewportWidth=w;Pa.viewportHeight=J;y[0]=z;y[1]=E;y[2]=G;y[3]=L;ba[0]=I;ba[1]=M;ba[2]=N;ba[3]=K;$a.blend_enable=Q;La[0]=B;La[1]=V;Ua[0]=P;Ua[1]=ja;Ua[2]=U;Ua[3]=ha;$a.depth_enable=ca;Y[0]=qa;Y[1]=ma;Y[2]=vd;Y[3]=ka;$a.scissor_enable=yc;$a.stencil_enable=lc;Lb&&(l.cpuTime+=performance.now()-gd);H.offset=Mc;H.count=uc;H.instances=jc;H.primitive=Db;t[23]=Sa;t[24]=bc;t[22]=Rb;t[31]=Cc;t[32]=Hc;t[33]=Ka;t[10]=Wa;t[34]=ud;t[6]=Ra;t[7]=eb;t[21]=Sb;t[8]=tc;t[9]=db;t[3]=Ma;qb&&sa.destroyStream(vb);R.buffer=
ra;R.divisor=rb;R.normalized=ua;R.offset=Ta;R.size=cb;R.state=Aa;R.stride=hb;R.type=Ha;R.w=Bb;R.x=Ab;R.y=Qa;R.z=Lc;Jb&&sa.destroyStream(Za);r.buffer=tb;r.divisor=Xa;r.normalized=Ya;r.offset=nc;r.size=cd;r.state=wc;r.stride=Va;r.type=Mb;r.w=Rc;r.x=Fa;r.y=zc;r.z=Oa;Ba&&sa.destroyStream(nb);u.buffer=Wb;u.divisor=cc;u.normalized=Pb;u.offset=Ga;u.size=ac;u.state=ob;u.stride=yb;u.type=Nb;u.w=Qb;u.x=fc;u.y=ic;u.z=Jc;Dc&&sa.destroyStream(Ec);v.buffer=Xc;v.divisor=od;v.normalized=id;v.offset=rd;v.size=Yc;
v.state=hc;v.stride=Ud;v.type=he;v.w=se;v.x=le;v.y=Fd;v.z=Dd;ed&&sa.destroyStream(Gc);C.buffer=$d;C.divisor=oe;C.normalized=Yd;C.offset=ee;C.size=Ac;C.state=Wc;C.stride=pe;C.type=ie;C.w=Ed;C.x=Jd;C.y=Md;C.z=Nd;O.buffer=fe;O.divisor=De;O.normalized=xe;O.offset=ne;O.size=Ye;O.state=Oe;O.stride=Ke;O.type=qe;O.w=Ae;O.x=Ee;O.y=Fe;O.z=Ge;A.buffer=Be;A.divisor=Gd;A.normalized=Qd;A.offset=Vd;A.size=Zd;A.state=He;A.stride=zd;A.type=Od;A.w=ye;A.x=Ie;A.y=gf;A.z=Xe;T.vert=Pe;T.frag=Le;X.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(e,
l,c,b,f,a,n,d,p,aa,u,r,B,v,C,O,A,I,db,N,ea,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,gb,hc,sa,Pa,X){var H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma,Rb,oc,tc,vd,yc,Y,J,ja,Ca,Lb,ab,Vc,E,y,ha,ta,W,fa,oa,D,x,Z,F,xa,Da,m;H=e.attributes;L=e.buffer;Q=e.context;qa=e.current;M=e.draw;Zb=e.elements;$a=e.extensions;T=e.framebuffer;t=e.gl;ia=e.isBufferArgs;ba=e.next;va=e.shader;La=e.uniforms;$b=e.vao;Ua=ba.blend_color;V=qa.blend_color;pb=ba.blend_equation;ca=qa.blend_equation;ma=ba.blend_func;Rb=qa.blend_func;
oc=ba.colorMask;tc=qa.colorMask;vd=ba.depth_range;yc=qa.depth_range;Y=ba.polygonOffset_offset;J=qa.polygonOffset_offset;ja=ba.sample_coverage;Ca=qa.sample_coverage;Lb=ba.scissor_box;ab=qa.scissor_box;Vc=ba.stencil_func;E=qa.stencil_func;y=ba.stencil_opBack;ha=qa.stencil_opBack;ta=ba.stencil_opFront;W=qa.stencil_opFront;fa=ba.viewport;oa=qa.viewport;D={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};x={divisor:1,offset:0,stride:4};Z={divisor:1,offset:8,
stride:8};F={divisor:1,offset:4,stride:4};xa={divisor:1,offset:16,stride:8};Da={divisor:1,offset:24,stride:8};m={divisor:1,offset:0,stride:8};return{batch:function(b,c){var d,e,n,p,r,v;d=T.next;d!==T.cur&&(d?t.bindFramebuffer(36160,d.framebuffer):t.bindFramebuffer(36160,null),T.cur=d);if(qa.dirty){var C,aa,u,A,R,B,I,O,fa,wa,ma,Lb,va,La,db,Rd,Sd,Ua,pb,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb;C=ba.dither;C!==qa.dither&&(C?t.enable(3024):t.disable(3024),qa.dither=C);aa=ba.depth_func;aa!==qa.depth_func&&(t.depthFunc(aa),
qa.depth_func=aa);u=vd[0];A=vd[1];if(u!==yc[0]||A!==yc[1])t.depthRange(u,A),yc[0]=u,yc[1]=A;R=ba.depth_mask;R!==qa.depth_mask&&(t.depthMask(R),qa.depth_mask=R);B=oc[0];I=oc[1];O=oc[2];fa=oc[3];if(B!==tc[0]||I!==tc[1]||O!==tc[2]||fa!==tc[3])t.colorMask(B,I,O,fa),tc[0]=B,tc[1]=I,tc[2]=O,tc[3]=fa;wa=ba.frontFace;wa!==qa.frontFace&&(t.frontFace(wa),qa.frontFace=wa);ma=ba.lineWidth;ma!==qa.lineWidth&&(t.lineWidth(ma),qa.lineWidth=ma);Lb=ba.polygonOffset_enable;Lb!==qa.polygonOffset_enable&&(Lb?t.enable(32823):
t.disable(32823),qa.polygonOffset_enable=Lb);va=Y[0];La=Y[1];if(va!==J[0]||La!==J[1])t.polygonOffset(va,La),J[0]=va,J[1]=La;db=ba.sample_alpha;db!==qa.sample_alpha&&(db?t.enable(32926):t.disable(32926),qa.sample_alpha=db);Rd=ba.sample_enable;Rd!==qa.sample_enable&&(Rd?t.enable(32928):t.disable(32928),qa.sample_enable=Rd);Sd=ja[0];Ua=ja[1];if(Sd!==Ca[0]||Ua!==Ca[1])t.sampleCoverage(Sd,Ua),Ca[0]=Sd,Ca[1]=Ua;pb=ba.stencil_mask;pb!==qa.stencil_mask&&(t.stencilMask(pb),qa.stencil_mask=pb);sd=Vc[0];ld=
Vc[1];wd=Vc[2];if(sd!==E[0]||ld!==E[1]||wd!==E[2])t.stencilFunc(sd,ld,wd),E[0]=sd,E[1]=ld,E[2]=wd;qd=ta[0];Bc=ta[1];lc=ta[2];td=ta[3];if(qd!==W[0]||Bc!==W[1]||lc!==W[2]||td!==W[3])t.stencilOpSeparate(qd,Bc,lc,td),W[0]=qd,W[1]=Bc,W[2]=lc,W[3]=td;gd=y[0];Mc=y[1];uc=y[2];bb=y[3];if(gd!==ha[0]||Mc!==ha[1]||uc!==ha[2]||bb!==ha[3])t.stencilOpSeparate(gd,Mc,uc,bb),ha[0]=gd,ha[1]=Mc,ha[2]=uc,ha[3]=bb}t.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;t.enable(3042);qa.blend_enable=!0;t.blendEquationSeparate(32774,
32774);ca[0]=32774;ca[1]=32774;t.blendFuncSeparate(770,771,773,1);Rb[0]=770;Rb[1]=771;Rb[2]=773;Rb[3]=1;t.enable(2884);qa.cull_enable=!0;t.cullFace(1029);qa.cull_face=1029;t.enable(3089);qa.scissor_enable=!0;t.disable(2960);qa.stencil_enable=!1;if(e=qa.profile)n=performance.now(),l.count+=c;t.useProgram(N.program);p=$a.angle_instanced_arrays;var jc,Db,sc,Sa,Kc;$b.setVAO(null);jc=ga.location;Db=H[jc];Db.buffer||t.enableVertexAttribArray(jc);if(5126!==Db.type||1!==Db.size||Db.buffer!==f||!1!==Db.normalized||
0!==Db.offset||8!==Db.stride)t.bindBuffer(34962,f.buffer),t.vertexAttribPointer(jc,1,5126,!1,8,0),Db.type=5126,Db.size=1,Db.buffer=f,Db.normalized=!1,Db.offset=0,Db.stride=8;0!==Db.divisor&&(p.vertexAttribDivisorANGLE(jc,0),Db.divisor=0);sc=h.location;Sa=H[sc];Sa.buffer||t.enableVertexAttribArray(sc);if(5126!==Sa.type||1!==Sa.size||Sa.buffer!==a||!1!==Sa.normalized||4!==Sa.offset||8!==Sa.stride)t.bindBuffer(34962,a.buffer),t.vertexAttribPointer(sc,1,5126,!1,8,4),Sa.type=5126,Sa.size=1,Sa.buffer=a,
Sa.normalized=!1,Sa.offset=4,Sa.stride=8;0!==Sa.divisor&&(p.vertexAttribDivisorANGLE(sc,0),Sa.divisor=0);(Kc=M.elements)?t.bindBuffer(34963,Kc.buffer.buffer):$b.currentVAO&&(Kc=Zb.getElements($b.currentVAO.elements))&&t.bindBuffer(34963,Kc.buffer.buffer);for(r=0;r<c;++r){v=b[r];var bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,ff,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,
zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,nf,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Ne,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,tf,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd,ee,Ac;bc=v.viewport;Zc=bc.x|0;Cd=bc.y|0;md="width"in bc?bc.width|0:Q.framebufferWidth-Zc;Cc="height"in bc?bc.height|0:Q.framebufferHeight-Cd;Xb=Q.viewportWidth;Q.viewportWidth=md;Hc=Q.viewportHeight;Q.viewportHeight=Cc;t.viewport(Zc,Cd,md,Cc);oa[0]=Zc;oa[1]=Cd;oa[2]=md;oa[3]=Cc;(Sc=ea.call(this,Q,
v,r))?t.enable(2929):t.disable(2929);qa.depth_enable=Sc;Ka=v.viewport;Eb=Ka.x|0;Wa=Ka.y|0;pa="width"in Ka?Ka.width|0:Q.framebufferWidth-Eb;ud="height"in Ka?Ka.height|0:Q.framebufferHeight-Wa;t.scissor(Eb,Wa,pa,ud);ab[0]=Eb;ab[1]=Wa;ab[2]=pa;ab[3]=ud;Z.buffer=v.positionBuffer;Ib=!1;Ra=null;Gb=0;eb=!1;Sb=pc=0;ue=1;kc=0;Tb=5126;qb=Ma=Ub=hd=0;ia(Z)?(Ib=!0,Ra=L.createStream(34962,Z),Tb=Ra.dtype):(Ra=L.getBuffer(Z))?Tb=Ra.dtype:"constant"in Z?(ue=2,"number"===typeof Z.constant?(Ub=Z.constant,Ma=qb=hd=0):
(Ub=0<Z.constant.length?Z.constant[0]:0,Ma=1<Z.constant.length?Z.constant[1]:0,qb=2<Z.constant.length?Z.constant[2]:0,hd=3<Z.constant.length?Z.constant[3]:0)):(Ra=ia(Z.buffer)?L.createStream(34962,Z.buffer):L.getBuffer(Z.buffer),Tb="type"in Z?D[Z.type]:Ra.dtype,eb=!!Z.normalized,Sb=Z.size|0,pc=Z.offset|0,kc=Z.stride|0,Gb=Z.divisor|0);vb=da.location;jb=H[vb];if(1===ue){jb.buffer||t.enableVertexAttribArray(vb);Na=Sb||2;if(jb.type!==Tb||jb.size!==Na||jb.buffer!==Ra||jb.normalized!==eb||jb.offset!==pc||
jb.stride!==kc)t.bindBuffer(34962,Ra.buffer),t.vertexAttribPointer(vb,Na,Tb,eb,kc,pc),jb.type=Tb,jb.size=Na,jb.buffer=Ra,jb.normalized=eb,jb.offset=pc,jb.stride=kc;jb.divisor!==Gb&&(p.vertexAttribDivisorANGLE(vb,Gb),jb.divisor=Gb)}else if(jb.buffer&&(t.disableVertexAttribArray(vb),jb.buffer=null),jb.x!==Ub||jb.y!==Ma||jb.z!==qb||jb.w!==hd)t.vertexAttrib4f(vb,Ub,Ma,qb,hd),jb.x=Ub,jb.y=Ma,jb.z=qb,jb.w=hd;xa.buffer=v.positionBuffer;qc=!1;Yb=null;fd=0;fb=!1;ad=mc=0;dc=1;lb=0;mb=5126;Ta=ua=rb=ra=0;ia(xa)?
(qc=!0,Yb=L.createStream(34962,xa),mb=Yb.dtype):(Yb=L.getBuffer(xa))?mb=Yb.dtype:"constant"in xa?(dc=2,"number"===typeof xa.constant?(rb=xa.constant,ua=Ta=ra=0):(rb=0<xa.constant.length?xa.constant[0]:0,ua=1<xa.constant.length?xa.constant[1]:0,Ta=2<xa.constant.length?xa.constant[2]:0,ra=3<xa.constant.length?xa.constant[3]:0)):(Yb=ia(xa.buffer)?L.createStream(34962,xa.buffer):L.getBuffer(xa.buffer),mb="type"in xa?D[xa.type]:Yb.dtype,fb=!!xa.normalized,ad=xa.size|0,mc=xa.offset|0,lb=xa.stride|0,fd=
xa.divisor|0);cb=K.location;Aa=H[cb];if(1===dc){Aa.buffer||t.enableVertexAttribArray(cb);hb=ad||2;if(Aa.type!==mb||Aa.size!==hb||Aa.buffer!==Yb||Aa.normalized!==fb||Aa.offset!==mc||Aa.stride!==lb)t.bindBuffer(34962,Yb.buffer),t.vertexAttribPointer(cb,hb,mb,fb,lb,mc),Aa.type=mb,Aa.size=hb,Aa.buffer=Yb,Aa.normalized=fb,Aa.offset=mc,Aa.stride=lb;Aa.divisor!==fd&&(p.vertexAttribDivisorANGLE(cb,fd),Aa.divisor=fd)}else if(Aa.buffer&&(t.disableVertexAttribArray(cb),Aa.buffer=null),Aa.x!==rb||Aa.y!==ua||
Aa.z!==Ta||Aa.w!==ra)t.vertexAttrib4f(cb,rb,ua,Ta,ra),Aa.x=rb,Aa.y=ua,Aa.z=Ta,Aa.w=ra;Da.buffer=v.positionBuffer;Ha=!1;Bb=null;Ab=0;Qa=!1;Jb=Lc=0;Za=1;Vb=0;ya=5126;ib=Ob=Ja=ff=0;ia(Da)?(Ha=!0,Bb=L.createStream(34962,Da),ya=Bb.dtype):(Bb=L.getBuffer(Da))?ya=Bb.dtype:"constant"in Da?(Za=2,"number"===typeof Da.constant?(Ja=Da.constant,Ob=ib=ff=0):(Ja=0<Da.constant.length?Da.constant[0]:0,Ob=1<Da.constant.length?Da.constant[1]:0,ib=2<Da.constant.length?Da.constant[2]:0,ff=3<Da.constant.length?Da.constant[3]:
0)):(Bb=ia(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),ya="type"in Da?D[Da.type]:Bb.dtype,Qa=!!Da.normalized,Jb=Da.size|0,Lc=Da.offset|0,Vb=Da.stride|0,Ab=Da.divisor|0);kb=ka.location;za=H[kb];if(1===Za){za.buffer||t.enableVertexAttribArray(kb);ec=Jb||2;if(za.type!==ya||za.size!==ec||za.buffer!==Bb||za.normalized!==Qa||za.offset!==Lc||za.stride!==Vb)t.bindBuffer(34962,Bb.buffer),t.vertexAttribPointer(kb,ec,ya,Qa,Vb,Lc),za.type=ya,za.size=ec,za.buffer=Bb,za.normalized=Qa,za.offset=
Lc,za.stride=Vb;za.divisor!==Ab&&(p.vertexAttribDivisorANGLE(kb,Ab),za.divisor=Ab)}else if(za.buffer&&(t.disableVertexAttribArray(kb),za.buffer=null),za.x!==Ja||za.y!==Ob||za.z!==ib||za.w!==ff)t.vertexAttrib4f(kb,Ja,Ob,ib,ff),za.x=Ja,za.y=Ob,za.z=ib,za.w=ff;m.buffer=v.positionBuffer;Ea=!1;sb=null;tb=0;Xa=!1;nc=Ya=0;cd=1;wc=0;Va=5126;zc=Fa=Rc=Mb=0;ia(m)?(Ea=!0,sb=L.createStream(34962,m),Va=sb.dtype):(sb=L.getBuffer(m))?Va=sb.dtype:"constant"in m?(cd=2,"number"===typeof m.constant?(Rc=m.constant,Fa=
zc=Mb=0):(Rc=0<m.constant.length?m.constant[0]:0,Fa=1<m.constant.length?m.constant[1]:0,zc=2<m.constant.length?m.constant[2]:0,Mb=3<m.constant.length?m.constant[3]:0)):(sb=ia(m.buffer)?L.createStream(34962,m.buffer):L.getBuffer(m.buffer),Va="type"in m?D[m.type]:sb.dtype,Xa=!!m.normalized,nc=m.size|0,Ya=m.offset|0,wc=m.stride|0,tb=m.divisor|0);Oa=gb.location;Ba=H[Oa];if(1===cd){Ba.buffer||t.enableVertexAttribArray(Oa);nb=nc||2;if(Ba.type!==Va||Ba.size!==nb||Ba.buffer!==sb||Ba.normalized!==Xa||Ba.offset!==
Ya||Ba.stride!==wc)t.bindBuffer(34962,sb.buffer),t.vertexAttribPointer(Oa,nb,Va,Xa,wc,Ya),Ba.type=Va,Ba.size=nb,Ba.buffer=sb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=wc;Ba.divisor!==tb&&(p.vertexAttribDivisorANGLE(Oa,tb),Ba.divisor=tb)}else if(Ba.buffer&&(t.disableVertexAttribArray(Oa),Ba.buffer=null),Ba.x!==Rc||Ba.y!==Fa||Ba.z!==zc||Ba.w!==Mb)t.vertexAttrib4f(Oa,Rc,Fa,zc,Mb),Ba.x=Rc,Ba.y=Fa,Ba.z=zc,Ba.w=Mb;x.buffer=v.colorBuffer;wb=!1;Cb=null;ub=0;xc=!1;Id=xb=0;vc=1;nf=0;Nc=5126;cc=Wb=dd=nd=0;ia(x)?
(wb=!0,Cb=L.createStream(34962,x),Nc=Cb.dtype):(Cb=L.getBuffer(x))?Nc=Cb.dtype:"constant"in x?(vc=2,"number"===typeof x.constant?(dd=x.constant,Wb=cc=nd=0):(dd=0<x.constant.length?x.constant[0]:0,Wb=1<x.constant.length?x.constant[1]:0,cc=2<x.constant.length?x.constant[2]:0,nd=3<x.constant.length?x.constant[3]:0)):(Cb=ia(x.buffer)?L.createStream(34962,x.buffer):L.getBuffer(x.buffer),Nc="type"in x?D[x.type]:Cb.dtype,xc=!!x.normalized,Id=x.size|0,xb=x.offset|0,nf=x.stride|0,ub=x.divisor|0);Pb=k.location;
Ga=H[Pb];if(1===vc){Ga.buffer||t.enableVertexAttribArray(Pb);ac=Id||4;if(Ga.type!==Nc||Ga.size!==ac||Ga.buffer!==Cb||Ga.normalized!==xc||Ga.offset!==xb||Ga.stride!==nf)t.bindBuffer(34962,Cb.buffer),t.vertexAttribPointer(Pb,ac,Nc,xc,nf,xb),Ga.type=Nc,Ga.size=ac,Ga.buffer=Cb,Ga.normalized=xc,Ga.offset=xb,Ga.stride=nf;Ga.divisor!==ub&&(p.vertexAttribDivisorANGLE(Pb,ub),Ga.divisor=ub)}else if(Ga.buffer&&(t.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==dd||Ga.y!==Wb||Ga.z!==cc||Ga.w!==nd)t.vertexAttrib4f(Pb,
dd,Wb,cc,nd),Ga.x=dd,Ga.y=Wb,Ga.z=cc,Ga.w=nd;F.buffer=v.colorBuffer;ob=!1;yb=null;Nb=0;Qb=!1;ic=fc=0;Ne=1;Dc=0;Ec=5126;Tc=$c=Oc=Fc=0;ia(F)?(ob=!0,yb=L.createStream(34962,F),Ec=yb.dtype):(yb=L.getBuffer(F))?Ec=yb.dtype:"constant"in F?(Ne=2,"number"===typeof F.constant?(Oc=F.constant,$c=Tc=Fc=0):(Oc=0<F.constant.length?F.constant[0]:0,$c=1<F.constant.length?F.constant[1]:0,Tc=2<F.constant.length?F.constant[2]:0,Fc=3<F.constant.length?F.constant[3]:0)):(yb=ia(F.buffer)?L.createStream(34962,F.buffer):
L.getBuffer(F.buffer),Ec="type"in F?D[F.type]:yb.dtype,Qb=!!F.normalized,ic=F.size|0,fc=F.offset|0,Dc=F.stride|0,Nb=F.divisor|0);Pc=P.location;Kb=H[Pc];if(1===Ne){Kb.buffer||t.enableVertexAttribArray(Pc);Fb=ic||4;if(Kb.type!==Ec||Kb.size!==Fb||Kb.buffer!==yb||Kb.normalized!==Qb||Kb.offset!==fc||Kb.stride!==Dc)t.bindBuffer(34962,yb.buffer),t.vertexAttribPointer(Pc,Fb,Ec,Qb,Dc,fc),Kb.type=Ec,Kb.size=Fb,Kb.buffer=yb,Kb.normalized=Qb,Kb.offset=fc,Kb.stride=Dc;Kb.divisor!==Nb&&(p.vertexAttribDivisorANGLE(Pc,
Nb),Kb.divisor=Nb)}else if(Kb.buffer&&(t.disableVertexAttribArray(Pc),Kb.buffer=null),Kb.x!==Oc||Kb.y!==$c||Kb.z!==Tc||Kb.w!==Fc)t.vertexAttrib4f(Pc,Oc,$c,Tc,Fc),Kb.x=Oc,Kb.y=$c,Kb.z=Tc,Kb.w=Fc;Qc=v.scale;Ic=Qc[0];gc=Qc[1];r&&Uc===Ic&&Xc===gc||(Uc=Ic,Xc=gc,t.uniform2f(hc.location,Ic,gc));od=v.translate;id=od[0];Yc=od[1];r&&rd===id&&tf===Yc||(rd=id,tf=Yc,t.uniform2f(Pa.location,id,Yc));Ud=v.thickness;r&&he===Ud||(he=Ud,t.uniform1f(sa.location,Ud));se=v.depth;r&&le===se||(le=se,t.uniform1f(G.location,
se));Fd=q.call(this,Q,v,r);Dd=Fd[0];Gc=Fd[1];jd=Fd[2];kd=Fd[3];r&&ed===Dd&&pd===Gc&&bd===jd&&Ad===kd||(ed=Dd,pd=Gc,bd=jd,Ad=kd,t.uniform4f(X.location,Dd,Gc,jd,kd));Bd=v.miterLimit;r&&we===Bd||(we=Bd,t.uniform1f(g.location,Bd));me=z.call(this,Q,v,r);r&&ve===me||(ve=me,t.uniform1f(U.location,me));ce=v.dashLength;r&&be===ce||(be=ce,t.uniform1f(w.location,ce));$d=v.opacity;r&&oe===$d||(oe=$d,t.uniform1f(la.location,$d));(Yd=v.dashTexture)&&"framebuffer"===Yd._reglType&&(Yd=Yd.color[0]);ee=Yd._texture;
t.uniform1i(na.location,ee.bind());Ac=v.count;0<Ac?Kc?p.drawElementsInstancedANGLE(5,4,Kc.type,0<<(Kc.type-5121>>1),Ac):p.drawArraysInstancedANGLE(5,0,4,Ac):0>Ac&&(Kc?t.drawElements(5,4,Kc.type,0<<(Kc.type-5121>>1)):t.drawArrays(5,0,4));Q.viewportWidth=Xb;Q.viewportHeight=Hc;Ib&&L.destroyStream(Ra);qc&&L.destroyStream(Yb);Ha&&L.destroyStream(Bb);Ea&&L.destroyStream(sb);wb&&L.destroyStream(Cb);ob&&L.destroyStream(yb);ee.unbind()}qa.dirty=!0;$b.setVAO(null);e&&(l.cpuTime+=performance.now()-n)},draw:function(e){var p,
r,q,v,C,z,aa,u,A,R,B,I,O,N,fa,wa,ma,Lb,va,La,db,Ua,Rd,Sd,pb,ea,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,Jc,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id;p=T.next;p!==T.cur&&(p?t.bindFramebuffer(36160,p.framebuffer):t.bindFramebuffer(36160,null),T.cur=p);if(qa.dirty){var vc,nf,Nc,nd,dd,Wb,cc,Pb,
Ga,ac,ob,yb,Nb,Qb,fc,ic,Ne,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc;vc=ba.dither;vc!==qa.dither&&(vc?t.enable(3024):t.disable(3024),qa.dither=vc);nf=ba.depth_func;nf!==qa.depth_func&&(t.depthFunc(nf),qa.depth_func=nf);Nc=vd[0];nd=vd[1];if(Nc!==yc[0]||nd!==yc[1])t.depthRange(Nc,nd),yc[0]=Nc,yc[1]=nd;dd=ba.depth_mask;dd!==qa.depth_mask&&(t.depthMask(dd),qa.depth_mask=dd);Wb=oc[0];cc=oc[1];Pb=oc[2];Ga=oc[3];if(Wb!==tc[0]||cc!==tc[1]||Pb!==tc[2]||Ga!==tc[3])t.colorMask(Wb,cc,Pb,Ga),tc[0]=Wb,tc[1]=cc,tc[2]=
Pb,tc[3]=Ga;ac=ba.frontFace;ac!==qa.frontFace&&(t.frontFace(ac),qa.frontFace=ac);ob=ba.lineWidth;ob!==qa.lineWidth&&(t.lineWidth(ob),qa.lineWidth=ob);yb=ba.polygonOffset_enable;yb!==qa.polygonOffset_enable&&(yb?t.enable(32823):t.disable(32823),qa.polygonOffset_enable=yb);Nb=Y[0];Qb=Y[1];if(Nb!==J[0]||Qb!==J[1])t.polygonOffset(Nb,Qb),J[0]=Nb,J[1]=Qb;fc=ba.sample_alpha;fc!==qa.sample_alpha&&(fc?t.enable(32926):t.disable(32926),qa.sample_alpha=fc);ic=ba.sample_enable;ic!==qa.sample_enable&&(ic?t.enable(32928):
t.disable(32928),qa.sample_enable=ic);Ne=ja[0];Dc=ja[1];if(Ne!==Ca[0]||Dc!==Ca[1])t.sampleCoverage(Ne,Dc),Ca[0]=Ne,Ca[1]=Dc;Ec=ba.stencil_mask;Ec!==qa.stencil_mask&&(t.stencilMask(Ec),qa.stencil_mask=Ec);Fc=Vc[0];Oc=Vc[1];$c=Vc[2];if(Fc!==E[0]||Oc!==E[1]||$c!==E[2])t.stencilFunc(Fc,Oc,$c),E[0]=Fc,E[1]=Oc,E[2]=$c;Tc=ta[0];Pc=ta[1];Kb=ta[2];Fb=ta[3];if(Tc!==W[0]||Pc!==W[1]||Kb!==W[2]||Fb!==W[3])t.stencilOpSeparate(Tc,Pc,Kb,Fb),W[0]=Tc,W[1]=Pc,W[2]=Kb,W[3]=Fb;Qc=y[0];Ic=y[1];Uc=y[2];gc=y[3];if(Qc!==
ha[0]||Ic!==ha[1]||Uc!==ha[2]||gc!==ha[3])t.stencilOpSeparate(Qc,Ic,Uc,gc),ha[0]=Qc,ha[1]=Ic,ha[2]=Uc,ha[3]=gc}r=e.viewport;q=r.x|0;v=r.y|0;C="width"in r?r.width|0:Q.framebufferWidth-q;z="height"in r?r.height|0:Q.framebufferHeight-v;aa=Q.viewportWidth;Q.viewportWidth=C;u=Q.viewportHeight;Q.viewportHeight=z;t.viewport(q,v,C,z);oa[0]=q;oa[1]=v;oa[2]=C;oa[3]=z;t.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;t.enable(3042);qa.blend_enable=!0;t.blendEquationSeparate(32774,32774);ca[0]=32774;ca[1]=32774;
t.blendFuncSeparate(770,771,773,1);Rb[0]=770;Rb[1]=771;Rb[2]=773;Rb[3]=1;t.enable(2884);qa.cull_enable=!0;t.cullFace(1029);qa.cull_face=1029;(A=c.call(this,Q,e,0))?t.enable(2929):t.disable(2929);qa.depth_enable=A;R=e.viewport;B=R.x|0;I=R.y|0;O="width"in R?R.width|0:Q.framebufferWidth-B;N="height"in R?R.height|0:Q.framebufferHeight-I;t.scissor(B,I,O,N);ab[0]=B;ab[1]=I;ab[2]=O;ab[3]=N;t.enable(3089);qa.scissor_enable=!0;t.disable(2960);qa.stencil_enable=!1;if(fa=qa.profile)wa=performance.now(),l.count++;
t.useProgram(b.program);ma=$a.angle_instanced_arrays;$b.setVAO(null);Z.buffer=e.positionBuffer;Lb=!1;va=null;La=0;db=!1;Rd=Ua=0;Sd=1;pb=0;ea=5126;qd=wd=ld=sd=0;ia(Z)?(Lb=!0,va=L.createStream(34962,Z),ea=va.dtype):(va=L.getBuffer(Z))?ea=va.dtype:"constant"in Z?(Sd=2,"number"===typeof Z.constant?(ld=Z.constant,wd=qd=sd=0):(ld=0<Z.constant.length?Z.constant[0]:0,wd=1<Z.constant.length?Z.constant[1]:0,qd=2<Z.constant.length?Z.constant[2]:0,sd=3<Z.constant.length?Z.constant[3]:0)):(va=ia(Z.buffer)?L.createStream(34962,
Z.buffer):L.getBuffer(Z.buffer),ea="type"in Z?D[Z.type]:va.dtype,db=!!Z.normalized,Rd=Z.size|0,Ua=Z.offset|0,pb=Z.stride|0,La=Z.divisor|0);Bc=da.location;lc=H[Bc];if(1===Sd){lc.buffer||t.enableVertexAttribArray(Bc);td=Rd||2;if(lc.type!==ea||lc.size!==td||lc.buffer!==va||lc.normalized!==db||lc.offset!==Ua||lc.stride!==pb)t.bindBuffer(34962,va.buffer),t.vertexAttribPointer(Bc,td,ea,db,pb,Ua),lc.type=ea,lc.size=td,lc.buffer=va,lc.normalized=db,lc.offset=Ua,lc.stride=pb;lc.divisor!==La&&(ma.vertexAttribDivisorANGLE(Bc,
La),lc.divisor=La)}else if(lc.buffer&&(t.disableVertexAttribArray(Bc),lc.buffer=null),lc.x!==ld||lc.y!==wd||lc.z!==qd||lc.w!==sd)t.vertexAttrib4f(Bc,ld,wd,qd,sd),lc.x=ld,lc.y=wd,lc.z=qd,lc.w=sd;xa.buffer=e.positionBuffer;gd=!1;Mc=null;uc=0;bb=!1;Db=jc=0;sc=1;Sa=0;Kc=5126;md=Cd=Zc=bc=0;ia(xa)?(gd=!0,Mc=L.createStream(34962,xa),Kc=Mc.dtype):(Mc=L.getBuffer(xa))?Kc=Mc.dtype:"constant"in xa?(sc=2,"number"===typeof xa.constant?(Zc=xa.constant,Cd=md=bc=0):(Zc=0<xa.constant.length?xa.constant[0]:0,Cd=1<
xa.constant.length?xa.constant[1]:0,md=2<xa.constant.length?xa.constant[2]:0,bc=3<xa.constant.length?xa.constant[3]:0)):(Mc=ia(xa.buffer)?L.createStream(34962,xa.buffer):L.getBuffer(xa.buffer),Kc="type"in xa?D[xa.type]:Mc.dtype,bb=!!xa.normalized,Db=xa.size|0,jc=xa.offset|0,Sa=xa.stride|0,uc=xa.divisor|0);Cc=K.location;Xb=H[Cc];if(1===sc){Xb.buffer||t.enableVertexAttribArray(Cc);Hc=Db||2;if(Xb.type!==Kc||Xb.size!==Hc||Xb.buffer!==Mc||Xb.normalized!==bb||Xb.offset!==jc||Xb.stride!==Sa)t.bindBuffer(34962,
Mc.buffer),t.vertexAttribPointer(Cc,Hc,Kc,bb,Sa,jc),Xb.type=Kc,Xb.size=Hc,Xb.buffer=Mc,Xb.normalized=bb,Xb.offset=jc,Xb.stride=Sa;Xb.divisor!==uc&&(ma.vertexAttribDivisorANGLE(Cc,uc),Xb.divisor=uc)}else if(Xb.buffer&&(t.disableVertexAttribArray(Cc),Xb.buffer=null),Xb.x!==Zc||Xb.y!==Cd||Xb.z!==md||Xb.w!==bc)t.vertexAttrib4f(Cc,Zc,Cd,md,bc),Xb.x=Zc,Xb.y=Cd,Xb.z=md,Xb.w=bc;Da.buffer=e.positionBuffer;Sc=!1;Ka=null;Eb=0;Wa=!1;ud=pa=0;Ib=1;Ra=0;Gb=5126;ue=Sb=pc=eb=0;ia(Da)?(Sc=!0,Ka=L.createStream(34962,
Da),Gb=Ka.dtype):(Ka=L.getBuffer(Da))?Gb=Ka.dtype:"constant"in Da?(Ib=2,"number"===typeof Da.constant?(pc=Da.constant,Sb=ue=eb=0):(pc=0<Da.constant.length?Da.constant[0]:0,Sb=1<Da.constant.length?Da.constant[1]:0,ue=2<Da.constant.length?Da.constant[2]:0,eb=3<Da.constant.length?Da.constant[3]:0)):(Ka=ia(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),Gb="type"in Da?D[Da.type]:Ka.dtype,Wa=!!Da.normalized,ud=Da.size|0,pa=Da.offset|0,Ra=Da.stride|0,Eb=Da.divisor|0);kc=ka.location;Tb=
H[kc];if(1===Ib){Tb.buffer||t.enableVertexAttribArray(kc);hd=ud||2;if(Tb.type!==Gb||Tb.size!==hd||Tb.buffer!==Ka||Tb.normalized!==Wa||Tb.offset!==pa||Tb.stride!==Ra)t.bindBuffer(34962,Ka.buffer),t.vertexAttribPointer(kc,hd,Gb,Wa,Ra,pa),Tb.type=Gb,Tb.size=hd,Tb.buffer=Ka,Tb.normalized=Wa,Tb.offset=pa,Tb.stride=Ra;Tb.divisor!==Eb&&(ma.vertexAttribDivisorANGLE(kc,Eb),Tb.divisor=Eb)}else if(Tb.buffer&&(t.disableVertexAttribArray(kc),Tb.buffer=null),Tb.x!==pc||Tb.y!==Sb||Tb.z!==ue||Tb.w!==eb)t.vertexAttrib4f(kc,
pc,Sb,ue,eb),Tb.x=pc,Tb.y=Sb,Tb.z=ue,Tb.w=eb;m.buffer=e.positionBuffer;Ub=!1;Ma=null;qb=0;vb=!1;Na=jb=0;qc=1;Yb=0;fd=5126;dc=ad=mc=fb=0;ia(m)?(Ub=!0,Ma=L.createStream(34962,m),fd=Ma.dtype):(Ma=L.getBuffer(m))?fd=Ma.dtype:"constant"in m?(qc=2,"number"===typeof m.constant?(mc=m.constant,ad=dc=fb=0):(mc=0<m.constant.length?m.constant[0]:0,ad=1<m.constant.length?m.constant[1]:0,dc=2<m.constant.length?m.constant[2]:0,fb=3<m.constant.length?m.constant[3]:0)):(Ma=ia(m.buffer)?L.createStream(34962,m.buffer):
L.getBuffer(m.buffer),fd="type"in m?D[m.type]:Ma.dtype,vb=!!m.normalized,Na=m.size|0,jb=m.offset|0,Yb=m.stride|0,qb=m.divisor|0);lb=gb.location;mb=H[lb];if(1===qc){mb.buffer||t.enableVertexAttribArray(lb);ra=Na||2;if(mb.type!==fd||mb.size!==ra||mb.buffer!==Ma||mb.normalized!==vb||mb.offset!==jb||mb.stride!==Yb)t.bindBuffer(34962,Ma.buffer),t.vertexAttribPointer(lb,ra,fd,vb,Yb,jb),mb.type=fd,mb.size=ra,mb.buffer=Ma,mb.normalized=vb,mb.offset=jb,mb.stride=Yb;mb.divisor!==qb&&(ma.vertexAttribDivisorANGLE(lb,
qb),mb.divisor=qb)}else if(mb.buffer&&(t.disableVertexAttribArray(lb),mb.buffer=null),mb.x!==mc||mb.y!==ad||mb.z!==dc||mb.w!==fb)t.vertexAttrib4f(lb,mc,ad,dc,fb),mb.x=mc,mb.y=ad,mb.z=dc,mb.w=fb;x.buffer=e.colorBuffer;rb=!1;ua=null;Ta=0;cb=!1;hb=Aa=0;Ha=1;Bb=0;Ab=5126;Za=Jb=Lc=Qa=0;ia(x)?(rb=!0,ua=L.createStream(34962,x),Ab=ua.dtype):(ua=L.getBuffer(x))?Ab=ua.dtype:"constant"in x?(Ha=2,"number"===typeof x.constant?(Lc=x.constant,Jb=Za=Qa=0):(Lc=0<x.constant.length?x.constant[0]:0,Jb=1<x.constant.length?
x.constant[1]:0,Za=2<x.constant.length?x.constant[2]:0,Qa=3<x.constant.length?x.constant[3]:0)):(ua=ia(x.buffer)?L.createStream(34962,x.buffer):L.getBuffer(x.buffer),Ab="type"in x?D[x.type]:ua.dtype,cb=!!x.normalized,hb=x.size|0,Aa=x.offset|0,Bb=x.stride|0,Ta=x.divisor|0);Vb=k.location;ya=H[Vb];if(1===Ha){ya.buffer||t.enableVertexAttribArray(Vb);Jc=hb||4;if(ya.type!==Ab||ya.size!==Jc||ya.buffer!==ua||ya.normalized!==cb||ya.offset!==Aa||ya.stride!==Bb)t.bindBuffer(34962,ua.buffer),t.vertexAttribPointer(Vb,
Jc,Ab,cb,Bb,Aa),ya.type=Ab,ya.size=Jc,ya.buffer=ua,ya.normalized=cb,ya.offset=Aa,ya.stride=Bb;ya.divisor!==Ta&&(ma.vertexAttribDivisorANGLE(Vb,Ta),ya.divisor=Ta)}else if(ya.buffer&&(t.disableVertexAttribArray(Vb),ya.buffer=null),ya.x!==Lc||ya.y!==Jb||ya.z!==Za||ya.w!==Qa)t.vertexAttrib4f(Vb,Lc,Jb,Za,Qa),ya.x=Lc,ya.y=Jb,ya.z=Za,ya.w=Qa;F.buffer=e.colorBuffer;Ja=!1;Ob=null;ib=0;kb=!1;ec=za=0;Ea=1;sb=0;tb=5126;cd=nc=Ya=Xa=0;ia(F)?(Ja=!0,Ob=L.createStream(34962,F),tb=Ob.dtype):(Ob=L.getBuffer(F))?tb=
Ob.dtype:"constant"in F?(Ea=2,"number"===typeof F.constant?(Ya=F.constant,nc=cd=Xa=0):(Ya=0<F.constant.length?F.constant[0]:0,nc=1<F.constant.length?F.constant[1]:0,cd=2<F.constant.length?F.constant[2]:0,Xa=3<F.constant.length?F.constant[3]:0)):(Ob=ia(F.buffer)?L.createStream(34962,F.buffer):L.getBuffer(F.buffer),tb="type"in F?D[F.type]:Ob.dtype,kb=!!F.normalized,ec=F.size|0,za=F.offset|0,sb=F.stride|0,ib=F.divisor|0);wc=P.location;Va=H[wc];if(1===Ea){Va.buffer||t.enableVertexAttribArray(wc);Mb=ec||
4;if(Va.type!==tb||Va.size!==Mb||Va.buffer!==Ob||Va.normalized!==kb||Va.offset!==za||Va.stride!==sb)t.bindBuffer(34962,Ob.buffer),t.vertexAttribPointer(wc,Mb,tb,kb,sb,za),Va.type=tb,Va.size=Mb,Va.buffer=Ob,Va.normalized=kb,Va.offset=za,Va.stride=sb;Va.divisor!==ib&&(ma.vertexAttribDivisorANGLE(wc,ib),Va.divisor=ib)}else if(Va.buffer&&(t.disableVertexAttribArray(wc),Va.buffer=null),Va.x!==Ya||Va.y!==nc||Va.z!==cd||Va.w!==Xa)t.vertexAttrib4f(wc,Ya,nc,cd,Xa),Va.x=Ya,Va.y=nc,Va.z=cd,Va.w=Xa;Rc=ga.location;
Fa=H[Rc];Fa.buffer||t.enableVertexAttribArray(Rc);if(5126!==Fa.type||1!==Fa.size||Fa.buffer!==f||!1!==Fa.normalized||0!==Fa.offset||8!==Fa.stride)t.bindBuffer(34962,f.buffer),t.vertexAttribPointer(Rc,1,5126,!1,8,0),Fa.type=5126,Fa.size=1,Fa.buffer=f,Fa.normalized=!1,Fa.offset=0,Fa.stride=8;0!==Fa.divisor&&(ma.vertexAttribDivisorANGLE(Rc,0),Fa.divisor=0);zc=h.location;Oa=H[zc];Oa.buffer||t.enableVertexAttribArray(zc);if(5126!==Oa.type||1!==Oa.size||Oa.buffer!==a||!1!==Oa.normalized||4!==Oa.offset||
8!==Oa.stride)t.bindBuffer(34962,a.buffer),t.vertexAttribPointer(zc,1,5126,!1,8,4),Oa.type=5126,Oa.size=1,Oa.buffer=a,Oa.normalized=!1,Oa.offset=4,Oa.stride=8;0!==Oa.divisor&&(ma.vertexAttribDivisorANGLE(zc,0),Oa.divisor=0);Ba=e.scale;t.uniform2f(hc.location,Ba[0],Ba[1]);nb=e.translate;t.uniform2f(Pa.location,nb[0],nb[1]);t.uniform1f(sa.location,e.thickness);t.uniform1f(G.location,e.depth);wb=n.call(this,Q,e,0);t.uniform4f(X.location,wb[0],wb[1],wb[2],wb[3]);t.uniform1f(g.location,e.miterLimit);Cb=
d.call(this,Q,e,0);t.uniform1f(U.location,Cb);t.uniform1f(w.location,e.dashLength);t.uniform1f(la.location,e.opacity);(ub=e.dashTexture)&&"framebuffer"===ub._reglType&&(ub=ub.color[0]);xc=ub._texture;t.uniform1i(na.location,xc.bind());(xb=M.elements)?t.bindBuffer(34963,xb.buffer.buffer):$b.currentVAO&&(xb=Zb.getElements($b.currentVAO.elements))&&t.bindBuffer(34963,xb.buffer.buffer);Id=e.count;0<Id?xb?ma.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),Id):ma.drawArraysInstancedANGLE(5,
0,4,Id):0>Id&&(xb?t.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):t.drawArrays(5,0,4));qa.dirty=!0;$b.setVAO(null);Q.viewportWidth=aa;Q.viewportHeight=u;fa&&(l.cpuTime+=performance.now()-wa);Lb&&L.destroyStream(va);gd&&L.destroyStream(Mc);Sc&&L.destroyStream(Ka);Ub&&L.destroyStream(Ma);rb&&L.destroyStream(ua);Ja&&L.destroyStream(Ob);xc.unbind()},scope:function(b,c,d){var e,g,h,k,n,q,t,w,y,J,z,E,Y,G,H,N,K,T,V,P,W,ja,X,U,ha,da,ca,ta,oc,oa,Ca,ga,na,vd,bb,ka,Db,sa,Sa,yc,bc,ab,Rb,la,Cc,Xb,Hc,Sc,Ka,Eb,
Wa,pa,tc,Ib,Ra,Gb,eb,pc,Sb,ea,$a,Tb,Pa,Ub,Ma,qb,vb,jb,Na,qc,Yb,gb,fb,mc,Vc,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,Zb,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,$b,vc,Jc,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,hc,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,tf,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,Pe,Le,We,
Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf,rf,of,sf,Cf,Df,Me,ze,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;e=b.viewport;g=e.x|0;h=e.y|0;k="width"in e?e.width|0:Q.framebufferWidth-g;n="height"in e?e.height|0:Q.framebufferHeight-h;q=Q.viewportWidth;Q.viewportWidth=k;t=Q.viewportHeight;Q.viewportHeight=n;w=fa[0];fa[0]=g;y=fa[1];fa[1]=h;J=fa[2];fa[2]=k;z=fa[3];fa[3]=n;E=Ua[0];Ua[0]=0;Y=Ua[1];Ua[1]=0;G=Ua[2];Ua[2]=0;H=Ua[3];Ua[3]=0;N=ba.blend_enable;ba.blend_enable=!0;K=pb[0];pb[0]=32774;T=pb[1];pb[1]=32774;V=ma[0];
ma[0]=770;P=ma[1];ma[1]=771;W=ma[2];ma[2]=773;ja=ma[3];ma[3]=1;X=ba.cull_enable;ba.cull_enable=!0;U=ba.cull_face;ba.cull_face=1029;ha=p.call(this,Q,b,d);da=ba.depth_enable;ba.depth_enable=ha;ca=b.viewport;ta=ca.x|0;oc=ca.y|0;oa="width"in ca?ca.width|0:Q.framebufferWidth-ta;Ca="height"in ca?ca.height|0:Q.framebufferHeight-oc;ga=Lb[0];Lb[0]=ta;na=Lb[1];Lb[1]=oc;vd=Lb[2];Lb[2]=oa;bb=Lb[3];Lb[3]=Ca;ka=ba.scissor_enable;ba.scissor_enable=!0;Db=ba.stencil_enable;ba.stencil_enable=!1;if(sa=qa.profile)Sa=
performance.now(),l.count++;yc=M.offset;M.offset=0;bc=M.count;M.count=4;ab=b.count;Rb=M.instances;M.instances=ab;la=M.primitive;M.primitive=5;Cc=b.dashLength;Xb=La[23];La[23]=Cc;Hc=b.dashTexture;Sc=La[24];La[24]=Hc;Ka=b.depth;Eb=La[22];La[22]=Ka;Wa=b.id;pa=La[31];La[31]=Wa;tc=b.miterLimit;Ib=La[32];La[32]=tc;Ra=aa.call(this,Q,b,d);Gb=La[33];La[33]=Ra;eb=b.opacity;pc=La[10];La[10]=eb;Sb=Q.pixelRatio;ea=La[34];La[34]=Sb;$a=b.scale;Tb=La[6];La[6]=$a;Pa=b.scaleFract;Ub=La[7];La[7]=Pa;Ma=b.thickness;qb=
La[21];La[21]=Ma;vb=b.translate;jb=La[8];La[8]=vb;Na=b.translateFract;qc=La[9];La[9]=Na;Yb=u.call(this,Q,b,d);gb=La[3];La[3]=Yb;x.buffer=b.colorBuffer;fb=!1;mc=null;Vc=0;dc=!1;mb=lb=0;ra=1;rb=0;ua=5126;hb=Aa=cb=Ta=0;ia(x)?(fb=!0,mc=L.createStream(34962,x),ua=mc.dtype):(mc=L.getBuffer(x))?ua=mc.dtype:"constant"in x?(ra=2,"number"===typeof x.constant?(cb=x.constant,Aa=hb=Ta=0):(cb=0<x.constant.length?x.constant[0]:0,Aa=1<x.constant.length?x.constant[1]:0,hb=2<x.constant.length?x.constant[2]:0,Ta=3<
x.constant.length?x.constant[3]:0)):(mc=ia(x.buffer)?L.createStream(34962,x.buffer):L.getBuffer(x.buffer),ua="type"in x?D[x.type]:mc.dtype,dc=!!x.normalized,mb=x.size|0,lb=x.offset|0,rb=x.stride|0,Vc=x.divisor|0);Ha=r.buffer;r.buffer=mc;Bb=r.divisor;r.divisor=Vc;Ab=r.normalized;r.normalized=dc;Qa=r.offset;r.offset=lb;Lc=r.size;r.size=mb;Jb=r.state;r.state=ra;Za=r.stride;r.stride=rb;Vb=r.type;r.type=ua;ya=r.w;r.w=Ta;Zb=r.x;r.x=cb;Ja=r.y;r.y=Aa;Ob=r.z;r.z=hb;Z.buffer=b.positionBuffer;ib=!1;kb=null;
za=0;ec=!1;sb=Ea=0;tb=1;Xa=0;Ya=5126;Va=wc=cd=nc=0;ia(Z)?(ib=!0,kb=L.createStream(34962,Z),Ya=kb.dtype):(kb=L.getBuffer(Z))?Ya=kb.dtype:"constant"in Z?(tb=2,"number"===typeof Z.constant?(cd=Z.constant,wc=Va=nc=0):(cd=0<Z.constant.length?Z.constant[0]:0,wc=1<Z.constant.length?Z.constant[1]:0,Va=2<Z.constant.length?Z.constant[2]:0,nc=3<Z.constant.length?Z.constant[3]:0)):(kb=ia(Z.buffer)?L.createStream(34962,Z.buffer):L.getBuffer(Z.buffer),Ya="type"in Z?D[Z.type]:kb.dtype,ec=!!Z.normalized,sb=Z.size|
0,Ea=Z.offset|0,Xa=Z.stride|0,za=Z.divisor|0);Mb=B.buffer;B.buffer=kb;Rc=B.divisor;B.divisor=za;Fa=B.normalized;B.normalized=ec;zc=B.offset;B.offset=Ea;Oa=B.size;B.size=sb;Ba=B.state;B.state=tb;nb=B.stride;B.stride=Xa;wb=B.type;B.type=Ya;Cb=B.w;B.w=nc;ub=B.x;B.x=cd;xc=B.y;B.y=wc;xb=B.z;B.z=Va;F.buffer=b.colorBuffer;$b=!1;vc=null;Jc=0;Nc=!1;dd=nd=0;Wb=1;cc=0;Pb=5126;yb=ob=ac=Ga=0;ia(F)?($b=!0,vc=L.createStream(34962,F),Pb=vc.dtype):(vc=L.getBuffer(F))?Pb=vc.dtype:"constant"in F?(Wb=2,"number"===typeof F.constant?
(ac=F.constant,ob=yb=Ga=0):(ac=0<F.constant.length?F.constant[0]:0,ob=1<F.constant.length?F.constant[1]:0,yb=2<F.constant.length?F.constant[2]:0,Ga=3<F.constant.length?F.constant[3]:0)):(vc=ia(F.buffer)?L.createStream(34962,F.buffer):L.getBuffer(F.buffer),Pb="type"in F?D[F.type]:vc.dtype,Nc=!!F.normalized,dd=F.size|0,nd=F.offset|0,cc=F.stride|0,Jc=F.divisor|0);Nb=v.buffer;v.buffer=vc;Qb=v.divisor;v.divisor=Jc;fc=v.normalized;v.normalized=Nc;ic=v.offset;v.offset=nd;hc=v.size;v.size=dd;Dc=v.state;v.state=
Wb;Ec=v.stride;v.stride=cc;Fc=v.type;v.type=Pb;Oc=v.w;v.w=Ga;$c=v.x;v.x=ac;Tc=v.y;v.y=ob;Pc=v.z;v.z=yb;xa.buffer=b.positionBuffer;Kb=!1;Fb=null;Qc=0;Ic=!1;gc=Uc=0;Xc=1;od=0;id=5126;Ud=tf=Yc=rd=0;ia(xa)?(Kb=!0,Fb=L.createStream(34962,xa),id=Fb.dtype):(Fb=L.getBuffer(xa))?id=Fb.dtype:"constant"in xa?(Xc=2,"number"===typeof xa.constant?(Yc=xa.constant,tf=Ud=rd=0):(Yc=0<xa.constant.length?xa.constant[0]:0,tf=1<xa.constant.length?xa.constant[1]:0,Ud=2<xa.constant.length?xa.constant[2]:0,rd=3<xa.constant.length?
xa.constant[3]:0)):(Fb=ia(xa.buffer)?L.createStream(34962,xa.buffer):L.getBuffer(xa.buffer),id="type"in xa?D[xa.type]:Fb.dtype,Ic=!!xa.normalized,gc=xa.size|0,Uc=xa.offset|0,od=xa.stride|0,Qc=xa.divisor|0);he=C.buffer;C.buffer=Fb;se=C.divisor;C.divisor=Qc;le=C.normalized;C.normalized=Ic;Fd=C.offset;C.offset=Uc;Dd=C.size;C.size=gc;ed=C.state;C.state=Xc;Gc=C.stride;C.stride=od;pd=C.type;C.type=id;jd=C.w;C.w=rd;bd=C.x;C.x=Yc;kd=C.y;C.y=tf;Ad=C.z;C.z=Ud;Bd=O.buffer;O.buffer=f;we=O.divisor;O.divisor=0;
me=O.normalized;O.normalized=!1;ve=O.offset;O.offset=0;ce=O.size;O.size=0;be=O.state;O.state=1;$d=O.stride;O.stride=8;oe=O.type;O.type=5126;Yd=O.w;O.w=0;ee=O.x;O.x=0;Ac=O.y;O.y=0;Wc=O.z;O.z=0;pe=A.buffer;A.buffer=a;ie=A.divisor;A.divisor=0;Ed=A.normalized;A.normalized=!1;Jd=A.offset;A.offset=4;Md=A.size;A.size=0;Nd=A.state;A.state=1;fe=A.stride;A.stride=8;De=A.type;A.type=5126;xe=A.w;A.w=0;ne=A.x;A.x=0;Ye=A.y;A.y=0;Oe=A.z;A.z=0;Da.buffer=b.positionBuffer;Ke=!1;qe=null;Ae=0;Ee=!1;Ge=Fe=0;Be=1;Gd=0;
Qd=5126;zd=He=Zd=Vd=0;ia(Da)?(Ke=!0,qe=L.createStream(34962,Da),Qd=qe.dtype):(qe=L.getBuffer(Da))?Qd=qe.dtype:"constant"in Da?(Be=2,"number"===typeof Da.constant?(Zd=Da.constant,He=zd=Vd=0):(Zd=0<Da.constant.length?Da.constant[0]:0,He=1<Da.constant.length?Da.constant[1]:0,zd=2<Da.constant.length?Da.constant[2]:0,Vd=3<Da.constant.length?Da.constant[3]:0)):(qe=ia(Da.buffer)?L.createStream(34962,Da.buffer):L.getBuffer(Da.buffer),Qd="type"in Da?D[Da.type]:qe.dtype,Ee=!!Da.normalized,Ge=Da.size|0,Fe=Da.offset|
0,Gd=Da.stride|0,Ae=Da.divisor|0);Od=I.buffer;I.buffer=qe;ye=I.divisor;I.divisor=Ae;Ie=I.normalized;I.normalized=Ee;gf=I.offset;I.offset=Fe;Xe=I.size;I.size=Ge;Pe=I.state;I.state=Be;Le=I.stride;I.stride=Gd;We=I.type;I.type=Qd;Te=I.w;I.w=Vd;Qe=I.x;I.x=Zd;Re=I.y;I.y=He;Pd=I.z;I.z=zd;m.buffer=b.positionBuffer;Td=!1;Se=null;hf=0;mf=!1;jf=cf=0;kf=1;lf=0;rf=5126;Df=Cf=sf=of=0;ia(m)?(Td=!0,Se=L.createStream(34962,m),rf=Se.dtype):(Se=L.getBuffer(m))?rf=Se.dtype:"constant"in m?(kf=2,"number"===typeof m.constant?
(sf=m.constant,Cf=Df=of=0):(sf=0<m.constant.length?m.constant[0]:0,Cf=1<m.constant.length?m.constant[1]:0,Df=2<m.constant.length?m.constant[2]:0,of=3<m.constant.length?m.constant[3]:0)):(Se=ia(m.buffer)?L.createStream(34962,m.buffer):L.getBuffer(m.buffer),rf="type"in m?D[m.type]:Se.dtype,mf=!!m.normalized,jf=m.size|0,cf=m.offset|0,lf=m.stride|0,hf=m.divisor|0);Me=db.buffer;db.buffer=Se;ze=db.divisor;db.divisor=hf;pf=db.normalized;db.normalized=mf;qf=db.offset;db.offset=cf;Ef=db.size;db.size=jf;Hf=
db.state;db.state=kf;Bf=db.stride;db.stride=lf;Ff=db.type;db.type=rf;Gf=db.w;db.w=of;xf=db.x;db.x=sf;yf=db.y;db.y=Cf;wf=db.z;db.z=Df;zf=va.vert;va.vert=36;Af=va.frag;va.frag=35;qa.dirty=!0;c(Q,b,d);Q.viewportWidth=q;Q.viewportHeight=t;fa[0]=w;fa[1]=y;fa[2]=J;fa[3]=z;Ua[0]=E;Ua[1]=Y;Ua[2]=G;Ua[3]=H;ba.blend_enable=N;pb[0]=K;pb[1]=T;ma[0]=V;ma[1]=P;ma[2]=W;ma[3]=ja;ba.cull_enable=X;ba.cull_face=U;ba.depth_enable=da;Lb[0]=ga;Lb[1]=na;Lb[2]=vd;Lb[3]=bb;ba.scissor_enable=ka;ba.stencil_enable=Db;sa&&(l.cpuTime+=
performance.now()-Sa);M.offset=yc;M.count=bc;M.instances=Rb;M.primitive=la;La[23]=Xb;La[24]=Sc;La[22]=Eb;La[31]=pa;La[32]=Ib;La[33]=Gb;La[10]=pc;La[34]=ea;La[6]=Tb;La[7]=Ub;La[21]=qb;La[8]=jb;La[9]=qc;La[3]=gb;fb&&L.destroyStream(mc);r.buffer=Ha;r.divisor=Bb;r.normalized=Ab;r.offset=Qa;r.size=Lc;r.state=Jb;r.stride=Za;r.type=Vb;r.w=ya;r.x=Zb;r.y=Ja;r.z=Ob;ib&&L.destroyStream(kb);B.buffer=Mb;B.divisor=Rc;B.normalized=Fa;B.offset=zc;B.size=Oa;B.state=Ba;B.stride=nb;B.type=wb;B.w=Cb;B.x=ub;B.y=xc;B.z=
xb;$b&&L.destroyStream(vc);v.buffer=Nb;v.divisor=Qb;v.normalized=fc;v.offset=ic;v.size=hc;v.state=Dc;v.stride=Ec;v.type=Fc;v.w=Oc;v.x=$c;v.y=Tc;v.z=Pc;Kb&&L.destroyStream(Fb);C.buffer=he;C.divisor=se;C.normalized=le;C.offset=Fd;C.size=Dd;C.state=ed;C.stride=Gc;C.type=pd;C.w=jd;C.x=bd;C.y=kd;C.z=Ad;O.buffer=Bd;O.divisor=we;O.normalized=me;O.offset=ve;O.size=ce;O.state=be;O.stride=$d;O.type=oe;O.w=Yd;O.x=ee;O.y=Ac;O.z=Wc;A.buffer=pe;A.divisor=ie;A.normalized=Ed;A.offset=Jd;A.size=Md;A.state=Nd;A.stride=
fe;A.type=De;A.w=xe;A.x=ne;A.y=Ye;A.z=Oe;Ke&&L.destroyStream(qe);I.buffer=Od;I.divisor=ye;I.normalized=Ie;I.offset=gf;I.size=Xe;I.state=Pe;I.stride=Le;I.type=We;I.w=Te;I.x=Qe;I.y=Re;I.z=Pd;Td&&L.destroyStream(Se);db.buffer=Me;db.divisor=ze;db.normalized=pf;db.offset=qf;db.size=Ef;db.state=Hf;db.stride=Bf;db.type=Ff;db.w=Gf;db.x=xf;db.y=yf;db.z=wf;va.vert=zf;va.frag=Af;qa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(e,l,c,b,f,a,n,d,p,aa,
u,r,B,v,C,O,A,I,db){var N,ea,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,gb,hc,sa,Pa,X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma;N=e.attributes;ea=e.buffer;q=e.context;z=e.current;k=e.draw;da=e.elements;P=e.extensions;K=e.framebuffer;w=e.gl;na=e.isBufferArgs;G=e.next;ga=e.shader;h=e.uniforms;g=e.vao;U=G.blend_color;ka=z.blend_color;la=G.blend_equation;gb=z.blend_equation;hc=G.blend_func;sa=z.blend_func;Pa=G.colorMask;X=z.colorMask;H=G.depth_range;L=z.depth_range;Q=G.polygonOffset_offset;qa=z.polygonOffset_offset;
M=G.sample_coverage;Zb=z.sample_coverage;$a=G.scissor_box;T=z.scissor_box;t=G.stencil_func;ia=z.stencil_func;ba=G.stencil_opBack;va=z.stencil_opBack;La=G.stencil_opFront;$b=z.stencil_opFront;Ua=G.viewport;V=z.viewport;pb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ca={offset:8,stride:8};ma={offset:8,stride:8};return{batch:function(a,b){var c,d,f,e,h,n;c=K.next;c!==K.cur&&(c?w.bindFramebuffer(36160,c.framebuffer):w.bindFramebuffer(36160,null),K.cur=
c);if(z.dirty){var U,ga,ab,la,E,y,ha,ta,W,fa,oa,D,x,Z,F,xa,Da,m,Ua,Ia,S,Hb,zb,$a,hc,ge,ae,Hd,re,xd,de,te;U=G.dither;U!==z.dither&&(U?w.enable(3024):w.disable(3024),z.dither=U);ga=G.depth_func;ga!==z.depth_func&&(w.depthFunc(ga),z.depth_func=ga);ab=H[0];la=H[1];if(ab!==L[0]||la!==L[1])w.depthRange(ab,la),L[0]=ab,L[1]=la;E=G.depth_mask;E!==z.depth_mask&&(w.depthMask(E),z.depth_mask=E);y=Pa[0];ha=Pa[1];ta=Pa[2];W=Pa[3];if(y!==X[0]||ha!==X[1]||ta!==X[2]||W!==X[3])w.colorMask(y,ha,ta,W),X[0]=y,X[1]=ha,
X[2]=ta,X[3]=W;fa=G.cull_enable;fa!==z.cull_enable&&(fa?w.enable(2884):w.disable(2884),z.cull_enable=fa);oa=G.cull_face;oa!==z.cull_face&&(w.cullFace(oa),z.cull_face=oa);D=G.frontFace;D!==z.frontFace&&(w.frontFace(D),z.frontFace=D);x=G.lineWidth;x!==z.lineWidth&&(w.lineWidth(x),z.lineWidth=x);Z=G.polygonOffset_enable;Z!==z.polygonOffset_enable&&(Z?w.enable(32823):w.disable(32823),z.polygonOffset_enable=Z);F=Q[0];xa=Q[1];if(F!==qa[0]||xa!==qa[1])w.polygonOffset(F,xa),qa[0]=F,qa[1]=xa;Da=G.sample_alpha;
Da!==z.sample_alpha&&(Da?w.enable(32926):w.disable(32926),z.sample_alpha=Da);m=G.sample_enable;m!==z.sample_enable&&(m?w.enable(32928):w.disable(32928),z.sample_enable=m);Ua=M[0];Ia=M[1];if(Ua!==Zb[0]||Ia!==Zb[1])w.sampleCoverage(Ua,Ia),Zb[0]=Ua,Zb[1]=Ia;S=G.stencil_mask;S!==z.stencil_mask&&(w.stencilMask(S),z.stencil_mask=S);Hb=t[0];zb=t[1];$a=t[2];if(Hb!==ia[0]||zb!==ia[1]||$a!==ia[2])w.stencilFunc(Hb,zb,$a),ia[0]=Hb,ia[1]=zb,ia[2]=$a;hc=La[0];ge=La[1];ae=La[2];Hd=La[3];if(hc!==$b[0]||ge!==$b[1]||
ae!==$b[2]||Hd!==$b[3])w.stencilOpSeparate(hc,ge,ae,Hd),$b[0]=hc,$b[1]=ge,$b[2]=ae,$b[3]=Hd;re=ba[0];xd=ba[1];de=ba[2];te=ba[3];if(re!==va[0]||xd!==va[1]||de!==va[2]||te!==va[3])w.stencilOpSeparate(re,xd,de,te),va[0]=re,va[1]=xd,va[2]=de,va[3]=te}w.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;w.enable(3042);z.blend_enable=!0;w.blendEquationSeparate(32774,32774);gb[0]=32774;gb[1]=32774;w.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;w.disable(2929);z.depth_enable=!1;
w.enable(3089);z.scissor_enable=!0;w.disable(2960);z.stencil_enable=!1;if(d=z.profile)f=performance.now(),l.count+=b;w.useProgram(p.program);e=P.angle_instanced_arrays;var Kd;g.setVAO(null);Kd=k.instances;for(h=0;h<b;++h){n=a[h];var Xd,Wd,Ld,Ve,af,bf,yd,Ce,Rd,Sd,ke,Je,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb;Xd=n.viewport;Wd=Xd.x|0;Ld=
Xd.y|0;Ve="width"in Xd?Xd.width|0:q.framebufferWidth-Wd;af="height"in Xd?Xd.height|0:q.framebufferHeight-Ld;bf=q.viewportWidth;q.viewportWidth=Ve;yd=q.viewportHeight;q.viewportHeight=af;w.viewport(Wd,Ld,Ve,af);V[0]=Wd;V[1]=Ld;V[2]=Ve;V[3]=af;Ce=n.viewport;Rd=Ce.x|0;Sd=Ce.y|0;ke="width"in Ce?Ce.width|0:q.framebufferWidth-Rd;Je="height"in Ce?Ce.height|0:q.framebufferHeight-Sd;w.scissor(Rd,Sd,ke,Je);T[0]=Rd;T[1]=Sd;T[2]=ke;T[3]=Je;ca.buffer=n.positionBuffer;sd=!1;ld=null;wd=0;qd=!1;lc=Bc=0;td=1;gd=0;
Mc=5126;Db=jc=bb=uc=0;na(ca)?(sd=!0,ld=ea.createStream(34962,ca),Mc=ld.dtype):(ld=ea.getBuffer(ca))?Mc=ld.dtype:"constant"in ca?(td=2,"number"===typeof ca.constant?(bb=ca.constant,jc=Db=uc=0):(bb=0<ca.constant.length?ca.constant[0]:0,jc=1<ca.constant.length?ca.constant[1]:0,Db=2<ca.constant.length?ca.constant[2]:0,uc=3<ca.constant.length?ca.constant[3]:0)):(ld=na(ca.buffer)?ea.createStream(34962,ca.buffer):ea.getBuffer(ca.buffer),Mc="type"in ca?pb[ca.type]:ld.dtype,qd=!!ca.normalized,lc=ca.size|0,
Bc=ca.offset|0,gd=ca.stride|0,wd=ca.divisor|0);sc=v.location;Sa=N[sc];if(1===td){Sa.buffer||w.enableVertexAttribArray(sc);Kc=lc||2;if(Sa.type!==Mc||Sa.size!==Kc||Sa.buffer!==ld||Sa.normalized!==qd||Sa.offset!==Bc||Sa.stride!==gd)w.bindBuffer(34962,ld.buffer),w.vertexAttribPointer(sc,Kc,Mc,qd,gd,Bc),Sa.type=Mc,Sa.size=Kc,Sa.buffer=ld,Sa.normalized=qd,Sa.offset=Bc,Sa.stride=gd;Sa.divisor!==wd&&(e.vertexAttribDivisorANGLE(sc,wd),Sa.divisor=wd)}else if(Sa.buffer&&(w.disableVertexAttribArray(sc),Sa.buffer=
null),Sa.x!==bb||Sa.y!==jc||Sa.z!==Db||Sa.w!==uc)w.vertexAttrib4f(sc,bb,jc,Db,uc),Sa.x=bb,Sa.y=jc,Sa.z=Db,Sa.w=uc;ma.buffer=n.positionFractBuffer;bc=!1;Zc=null;Cd=0;md=!1;Xb=Cc=0;Hc=1;Sc=0;Ka=5126;ud=pa=Wa=Eb=0;na(ma)?(bc=!0,Zc=ea.createStream(34962,ma),Ka=Zc.dtype):(Zc=ea.getBuffer(ma))?Ka=Zc.dtype:"constant"in ma?(Hc=2,"number"===typeof ma.constant?(Wa=ma.constant,pa=ud=Eb=0):(Wa=0<ma.constant.length?ma.constant[0]:0,pa=1<ma.constant.length?ma.constant[1]:0,ud=2<ma.constant.length?ma.constant[2]:
0,Eb=3<ma.constant.length?ma.constant[3]:0)):(Zc=na(ma.buffer)?ea.createStream(34962,ma.buffer):ea.getBuffer(ma.buffer),Ka="type"in ma?pb[ma.type]:Zc.dtype,md=!!ma.normalized,Xb=ma.size|0,Cc=ma.offset|0,Sc=ma.stride|0,Cd=ma.divisor|0);Ib=C.location;Ra=N[Ib];if(1===Hc){Ra.buffer||w.enableVertexAttribArray(Ib);Gb=Xb||2;if(Ra.type!==Ka||Ra.size!==Gb||Ra.buffer!==Zc||Ra.normalized!==md||Ra.offset!==Cc||Ra.stride!==Sc)w.bindBuffer(34962,Zc.buffer),w.vertexAttribPointer(Ib,Gb,Ka,md,Sc,Cc),Ra.type=Ka,Ra.size=
Gb,Ra.buffer=Zc,Ra.normalized=md,Ra.offset=Cc,Ra.stride=Sc;Ra.divisor!==Cd&&(e.vertexAttribDivisorANGLE(Ib,Cd),Ra.divisor=Cd)}else if(Ra.buffer&&(w.disableVertexAttribArray(Ib),Ra.buffer=null),Ra.x!==Wa||Ra.y!==pa||Ra.z!==ud||Ra.w!==Eb)w.vertexAttrib4f(Ib,Wa,pa,ud,Eb),Ra.x=Wa,Ra.y=pa,Ra.z=ud,Ra.w=Eb;eb=n.fill;pc=eb[0];ue=eb[1];Tb=eb[2];Ub=eb[3];h&&Sb===pc&&kc===ue&&hd===Tb&&Ma===Ub||(Sb=pc,kc=ue,hd=Tb,Ma=Ub,w.uniform4f(u.location,pc,ue,Tb,Ub));qb=n.scale;vb=qb[0];Na=qb[1];h&&jb===vb&&qc===Na||(jb=
vb,qc=Na,w.uniform2f(O.location,vb,Na));Yb=n.scaleFract;fd=Yb[0];mc=Yb[1];h&&fb===fd&&ad===mc||(fb=fd,ad=mc,w.uniform2f(A.location,fd,mc));dc=n.translate;lb=dc[0];ra=dc[1];h&&mb===lb&&rb===ra||(mb=lb,rb=ra,w.uniform2f(I.location,lb,ra));ua=n.translateFract;Ta=ua[0];Aa=ua[1];h&&cb===Ta&&hb===Aa||(cb=Ta,hb=Aa,w.uniform2f(db.location,Ta,Aa));Ha=n.id;h&&Bb===Ha||(Bb=Ha,w.uniform1f(r.location,Ha));Ab=n.opacity;h&&Qa===Ab||(Qa=Ab,w.uniform1f(B.location,Ab));Lc=aa.call(this,q,n,h);Jb=null;(Jb=(Za=na(Lc))?
da.createStream(Lc):da.getElements(Lc))&&w.bindBuffer(34963,Jb.buffer.buffer);if(Vb=Jb?Jb.vertCount:-1)0<Kd?Jb?e.drawElementsInstancedANGLE(4,Vb,Jb.type,0<<(Jb.type-5121>>1),Kd):e.drawArraysInstancedANGLE(4,0,Vb,Kd):0>Kd&&(Jb?w.drawElements(4,Vb,Jb.type,0<<(Jb.type-5121>>1)):w.drawArrays(4,0,Vb)),q.viewportWidth=bf,q.viewportHeight=yd,sd&&ea.destroyStream(ld),bc&&ea.destroyStream(Zc),Za&&da.destroyStream(Jb)}z.dirty=!0;g.setVAO(null);d&&(l.cpuTime+=performance.now()-f)},draw:function(a){var d,f,e,
h,n,p,aa,U,ga,ab,la,E,y,ha,ta,W,fa,oa,D,x,Z,F;d=K.next;d!==K.cur&&(d?w.bindFramebuffer(36160,d.framebuffer):w.bindFramebuffer(36160,null),K.cur=d);if(z.dirty){d=G.dither;d!==z.dither&&(d?w.enable(3024):w.disable(3024),z.dither=d);d=G.depth_func;d!==z.depth_func&&(w.depthFunc(d),z.depth_func=d);d=H[0];p=H[1];if(d!==L[0]||p!==L[1])w.depthRange(d,p),L[0]=d,L[1]=p;d=G.depth_mask;d!==z.depth_mask&&(w.depthMask(d),z.depth_mask=d);d=Pa[0];p=Pa[1];f=Pa[2];e=Pa[3];if(d!==X[0]||p!==X[1]||f!==X[2]||e!==X[3])w.colorMask(d,
p,f,e),X[0]=d,X[1]=p,X[2]=f,X[3]=e;d=G.cull_enable;d!==z.cull_enable&&(d?w.enable(2884):w.disable(2884),z.cull_enable=d);d=G.cull_face;d!==z.cull_face&&(w.cullFace(d),z.cull_face=d);d=G.frontFace;d!==z.frontFace&&(w.frontFace(d),z.frontFace=d);d=G.lineWidth;d!==z.lineWidth&&(w.lineWidth(d),z.lineWidth=d);d=G.polygonOffset_enable;d!==z.polygonOffset_enable&&(d?w.enable(32823):w.disable(32823),z.polygonOffset_enable=d);d=Q[0];p=Q[1];if(d!==qa[0]||p!==qa[1])w.polygonOffset(d,p),qa[0]=d,qa[1]=p;d=G.sample_alpha;
d!==z.sample_alpha&&(d?w.enable(32926):w.disable(32926),z.sample_alpha=d);d=G.sample_enable;d!==z.sample_enable&&(d?w.enable(32928):w.disable(32928),z.sample_enable=d);d=M[0];p=M[1];if(d!==Zb[0]||p!==Zb[1])w.sampleCoverage(d,p),Zb[0]=d,Zb[1]=p;d=G.stencil_mask;d!==z.stencil_mask&&(w.stencilMask(d),z.stencil_mask=d);d=t[0];p=t[1];f=t[2];if(d!==ia[0]||p!==ia[1]||f!==ia[2])w.stencilFunc(d,p,f),ia[0]=d,ia[1]=p,ia[2]=f;d=La[0];p=La[1];f=La[2];e=La[3];if(d!==$b[0]||p!==$b[1]||f!==$b[2]||e!==$b[3])w.stencilOpSeparate(d,
p,f,e),$b[0]=d,$b[1]=p,$b[2]=f,$b[3]=e;d=ba[0];p=ba[1];f=ba[2];e=ba[3];if(d!==va[0]||p!==va[1]||f!==va[2]||e!==va[3])w.stencilOpSeparate(d,p,f,e),va[0]=d,va[1]=p,va[2]=f,va[3]=e}d=a.viewport;f=d.x|0;e=d.y|0;h="width"in d?d.width|0:q.framebufferWidth-f;n="height"in d?d.height|0:q.framebufferHeight-e;d=q.viewportWidth;q.viewportWidth=h;p=q.viewportHeight;q.viewportHeight=n;w.viewport(f,e,h,n);V[0]=f;V[1]=e;V[2]=h;V[3]=n;w.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;w.enable(3042);z.blend_enable=
!0;w.blendEquationSeparate(32774,32774);gb[0]=32774;gb[1]=32774;w.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;w.disable(2929);z.depth_enable=!1;n=a.viewport;f=n.x|0;e=n.y|0;h="width"in n?n.width|0:q.framebufferWidth-f;n="height"in n?n.height|0:q.framebufferHeight-e;w.scissor(f,e,h,n);T[0]=f;T[1]=e;T[2]=h;T[3]=n;w.enable(3089);z.scissor_enable=!0;w.disable(2960);z.stencil_enable=!1;if(f=z.profile)aa=performance.now(),l.count++;w.useProgram(c.program);e=P.angle_instanced_arrays;
g.setVAO(null);ca.buffer=a.positionBuffer;h=!1;U=0;ga=!1;la=ab=0;E=1;y=0;ha=5126;oa=fa=W=ta=0;na(ca)?(h=!0,n=ea.createStream(34962,ca),ha=n.dtype):(n=ea.getBuffer(ca))?ha=n.dtype:"constant"in ca?(E=2,"number"===typeof ca.constant?(W=ca.constant,fa=oa=ta=0):(W=0<ca.constant.length?ca.constant[0]:0,fa=1<ca.constant.length?ca.constant[1]:0,oa=2<ca.constant.length?ca.constant[2]:0,ta=3<ca.constant.length?ca.constant[3]:0)):(n=na(ca.buffer)?ea.createStream(34962,ca.buffer):ea.getBuffer(ca.buffer),ha="type"in
ca?pb[ca.type]:n.dtype,ga=!!ca.normalized,la=ca.size|0,ab=ca.offset|0,y=ca.stride|0,U=ca.divisor|0);D=v.location;x=N[D];if(1===E){x.buffer||w.enableVertexAttribArray(D);la=la||2;if(x.type!==ha||x.size!==la||x.buffer!==n||x.normalized!==ga||x.offset!==ab||x.stride!==y)w.bindBuffer(34962,n.buffer),w.vertexAttribPointer(D,la,ha,ga,y,ab),x.type=ha,x.size=la,x.buffer=n,x.normalized=ga,x.offset=ab,x.stride=y;x.divisor!==U&&(e.vertexAttribDivisorANGLE(D,U),x.divisor=U)}else if(x.buffer&&(w.disableVertexAttribArray(D),
x.buffer=null),x.x!==W||x.y!==fa||x.z!==oa||x.w!==ta)w.vertexAttrib4f(D,W,fa,oa,ta),x.x=W,x.y=fa,x.z=oa,x.w=ta;ma.buffer=a.positionFractBuffer;U=!1;ab=0;y=!1;ta=ha=0;W=1;D=0;x=5126;F=Z=oa=fa=0;na(ma)?(U=!0,ga=ea.createStream(34962,ma),x=ga.dtype):(ga=ea.getBuffer(ma))?x=ga.dtype:"constant"in ma?(W=2,"number"===typeof ma.constant?(oa=ma.constant,Z=F=fa=0):(oa=0<ma.constant.length?ma.constant[0]:0,Z=1<ma.constant.length?ma.constant[1]:0,F=2<ma.constant.length?ma.constant[2]:0,fa=3<ma.constant.length?
ma.constant[3]:0)):(ga=na(ma.buffer)?ea.createStream(34962,ma.buffer):ea.getBuffer(ma.buffer),x="type"in ma?pb[ma.type]:ga.dtype,y=!!ma.normalized,ta=ma.size|0,ha=ma.offset|0,D=ma.stride|0,ab=ma.divisor|0);la=C.location;E=N[la];if(1===W){E.buffer||w.enableVertexAttribArray(la);ta=ta||2;if(E.type!==x||E.size!==ta||E.buffer!==ga||E.normalized!==y||E.offset!==ha||E.stride!==D)w.bindBuffer(34962,ga.buffer),w.vertexAttribPointer(la,ta,x,y,D,ha),E.type=x,E.size=ta,E.buffer=ga,E.normalized=y,E.offset=ha,
E.stride=D;E.divisor!==ab&&(e.vertexAttribDivisorANGLE(la,ab),E.divisor=ab)}else if(E.buffer&&(w.disableVertexAttribArray(la),E.buffer=null),E.x!==oa||E.y!==Z||E.z!==F||E.w!==fa)w.vertexAttrib4f(la,oa,Z,F,fa),E.x=oa,E.y=Z,E.z=F,E.w=fa;ab=a.fill;w.uniform4f(u.location,ab[0],ab[1],ab[2],ab[3]);ab=a.scale;w.uniform2f(O.location,ab[0],ab[1]);ab=a.scaleFract;w.uniform2f(A.location,ab[0],ab[1]);ab=a.translate;w.uniform2f(I.location,ab[0],ab[1]);ab=a.translateFract;w.uniform2f(db.location,ab[0],ab[1]);w.uniform1f(r.location,
a.id);w.uniform1f(B.location,a.opacity);ab=b.call(this,q,a,0);(ab=(a=na(ab))?da.createStream(ab):da.getElements(ab))&&w.bindBuffer(34963,ab.buffer.buffer);if(y=ab?ab.vertCount:-1)ha=k.instances,0<ha?ab?e.drawElementsInstancedANGLE(4,y,ab.type,0<<(ab.type-5121>>1),ha):e.drawArraysInstancedANGLE(4,0,y,ha):0>ha&&(ab?w.drawElements(4,y,ab.type,0<<(ab.type-5121>>1)):w.drawArrays(4,0,y)),z.dirty=!0,g.setVAO(null),q.viewportWidth=d,q.viewportHeight=p,f&&(l.cpuTime+=performance.now()-aa),h&&ea.destroyStream(n),
U&&ea.destroyStream(ga),a&&da.destroyStream(ab)},scope:function(b,c,e){var g,p,r,t,v,w,C,aa,u,A,y,R,B,L,I,H,D,x,Z,F,M,O,m,N,K,S,T,Q,V,P,X,ba,wa,ia,qa,ka,sa,va,La,db,Ld,Pa,gb,Zb,yd,$b,Rd,Sd,ke,Je,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab;g=b.viewport;p=g.x|0;r=g.y|0;t="width"in g?g.width|0:q.framebufferWidth-p;v="height"in g?g.height|0:q.framebufferHeight-
r;w=q.viewportWidth;q.viewportWidth=t;C=q.viewportHeight;q.viewportHeight=v;aa=Ua[0];Ua[0]=p;u=Ua[1];Ua[1]=r;A=Ua[2];Ua[2]=t;y=Ua[3];Ua[3]=v;R=U[0];U[0]=0;B=U[1];U[1]=0;L=U[2];U[2]=0;I=U[3];U[3]=0;H=G.blend_enable;G.blend_enable=!0;D=la[0];la[0]=32774;x=la[1];la[1]=32774;Z=hc[0];hc[0]=770;F=hc[1];hc[1]=771;M=hc[2];hc[2]=773;O=hc[3];hc[3]=1;m=G.depth_enable;G.depth_enable=!1;N=b.viewport;K=N.x|0;S=N.y|0;T="width"in N?N.width|0:q.framebufferWidth-K;Q="height"in N?N.height|0:q.framebufferHeight-S;V=
$a[0];$a[0]=K;P=$a[1];$a[1]=S;X=$a[2];$a[2]=T;ba=$a[3];$a[3]=Q;wa=G.scissor_enable;G.scissor_enable=!0;ia=G.stencil_enable;G.stencil_enable=!1;if(qa=z.profile)ka=performance.now(),l.count++;sa=f.call(this,q,b,e);va=null;va=(La=na(sa))?da.createStream(sa):da.getElements(sa);db=k.elements;k.elements=va;Ld=k.offset;k.offset=0;Pa=va?va.vertCount:-1;gb=k.count;k.count=Pa;Zb=k.primitive;k.primitive=4;yd=b.fill;$b=h[14];h[14]=yd;Rd=b.id;Sd=h[31];h[31]=Rd;ke=b.opacity;Je=h[10];h[10]=ke;sd=q.pixelRatio;ld=
h[34];h[34]=sd;wd=b.scale;qd=h[6];h[6]=wd;Bc=b.scaleFract;lc=h[7];h[7]=Bc;td=b.translate;gd=h[8];h[8]=td;Mc=b.translateFract;uc=h[9];h[9]=Mc;bb=a.call(this,q,b,e);jc=h[3];h[3]=bb;ca.buffer=b.positionBuffer;Db=!1;sc=null;Sa=0;Kc=!1;Zc=bc=0;Cd=1;md=0;Cc=5126;Ka=Sc=Hc=Xb=0;na(ca)?(Db=!0,sc=ea.createStream(34962,ca),Cc=sc.dtype):(sc=ea.getBuffer(ca))?Cc=sc.dtype:"constant"in ca?(Cd=2,"number"===typeof ca.constant?(Hc=ca.constant,Sc=Ka=Xb=0):(Hc=0<ca.constant.length?ca.constant[0]:0,Sc=1<ca.constant.length?
ca.constant[1]:0,Ka=2<ca.constant.length?ca.constant[2]:0,Xb=3<ca.constant.length?ca.constant[3]:0)):(sc=na(ca.buffer)?ea.createStream(34962,ca.buffer):ea.getBuffer(ca.buffer),Cc="type"in ca?pb[ca.type]:sc.dtype,Kc=!!ca.normalized,Zc=ca.size|0,bc=ca.offset|0,md=ca.stride|0,Sa=ca.divisor|0);Eb=n.buffer;n.buffer=sc;Wa=n.divisor;n.divisor=Sa;pa=n.normalized;n.normalized=Kc;ud=n.offset;n.offset=bc;Ib=n.size;n.size=Zc;Ra=n.state;n.state=Cd;Gb=n.stride;n.stride=md;eb=n.type;n.type=Cc;pc=n.w;n.w=Xb;Sb=n.x;
n.x=Hc;ue=n.y;n.y=Sc;kc=n.z;n.z=Ka;ma.buffer=b.positionFractBuffer;Tb=!1;hd=null;Ub=0;Ma=!1;vb=qb=0;jb=1;Na=0;qc=5126;mc=fb=fd=Yb=0;na(ma)?(Tb=!0,hd=ea.createStream(34962,ma),qc=hd.dtype):(hd=ea.getBuffer(ma))?qc=hd.dtype:"constant"in ma?(jb=2,"number"===typeof ma.constant?(fd=ma.constant,fb=mc=Yb=0):(fd=0<ma.constant.length?ma.constant[0]:0,fb=1<ma.constant.length?ma.constant[1]:0,mc=2<ma.constant.length?ma.constant[2]:0,Yb=3<ma.constant.length?ma.constant[3]:0)):(hd=na(ma.buffer)?ea.createStream(34962,
ma.buffer):ea.getBuffer(ma.buffer),qc="type"in ma?pb[ma.type]:hd.dtype,Ma=!!ma.normalized,vb=ma.size|0,qb=ma.offset|0,Na=ma.stride|0,Ub=ma.divisor|0);ad=d.buffer;d.buffer=hd;dc=d.divisor;d.divisor=Ub;lb=d.normalized;d.normalized=Ma;mb=d.offset;d.offset=qb;ra=d.size;d.size=vb;rb=d.state;d.state=jb;ua=d.stride;d.stride=Na;Ta=d.type;d.type=qc;cb=d.w;d.w=Yb;Aa=d.x;d.x=fd;hb=d.y;d.y=fb;Ha=d.z;d.z=mc;Bb=ga.vert;ga.vert=42;Ab=ga.frag;ga.frag=41;z.dirty=!0;c(q,b,e);q.viewportWidth=w;q.viewportHeight=C;Ua[0]=
aa;Ua[1]=u;Ua[2]=A;Ua[3]=y;U[0]=R;U[1]=B;U[2]=L;U[3]=I;G.blend_enable=H;la[0]=D;la[1]=x;hc[0]=Z;hc[1]=F;hc[2]=M;hc[3]=O;G.depth_enable=m;$a[0]=V;$a[1]=P;$a[2]=X;$a[3]=ba;G.scissor_enable=wa;G.stencil_enable=ia;qa&&(l.cpuTime+=performance.now()-ka);La&&da.destroyStream(va);k.elements=db;k.offset=Ld;k.count=gb;k.primitive=Zb;h[14]=$b;h[31]=Sd;h[10]=Je;h[34]=ld;h[6]=qd;h[7]=lc;h[8]=gd;h[9]=uc;h[3]=jc;Db&&ea.destroyStream(sc);n.buffer=Eb;n.divisor=Wa;n.normalized=pa;n.offset=ud;n.size=Ib;n.state=Ra;n.stride=
Gb;n.type=eb;n.w=pc;n.x=Sb;n.y=ue;n.z=kc;Tb&&ea.destroyStream(hd);d.buffer=ad;d.divisor=dc;d.normalized=lb;d.offset=mb;d.size=ra;d.state=rb;d.stride=ua;d.type=Ta;d.w=cb;d.x=Aa;d.y=hb;d.z=Ha;ga.vert=Bb;ga.frag=Ab;z.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,l,c,b,f,a,n,d,p,aa,u,r,B,v,C,O,A,I,ea,N,Jc,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,
gb,hc,sa,Pa,X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma,Rb,oc,tc,vd,yc){var Y,J,ja,Ca,Lb,ab,Vc,E,y,ha,ta,W,fa,oa,D,x,Z,F,xa,Da,m,rc,Ia,S,Hb,zb,Ue,je,ge,ae,Hd,re,xd,de,te,Kd,Xd,Wd,Ld;Y=e.attributes;J=e.buffer;ja=e.context;Ca=e.current;Lb=e.draw;ab=e.elements;Vc=e.extensions;E=e.framebuffer;y=e.gl;ha=e.isBufferArgs;ta=e.next;W=e.shader;fa=e.uniforms;oa=e.vao;D=ta.blend_color;x=Ca.blend_color;Z=ta.blend_equation;F=Ca.blend_equation;xa=ta.blend_func;Da=Ca.blend_func;m=ta.colorMask;rc=Ca.colorMask;
Ia=ta.depth_range;S=Ca.depth_range;Hb=ta.polygonOffset_offset;zb=Ca.polygonOffset_offset;Ue=ta.sample_coverage;je=Ca.sample_coverage;ge=ta.scissor_box;ae=Ca.scissor_box;Hd=ta.stencil_func;re=Ca.stencil_func;xd=ta.stencil_opBack;de=Ca.stencil_opBack;te=ta.stencil_opFront;Kd=Ca.stencil_opFront;Xd=ta.viewport;Wd=Ca.viewport;Ld={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,f,e,g,h;c=E.next;c!==E.cur&&(c?y.bindFramebuffer(36160,
c.framebuffer):y.bindFramebuffer(36160,null),E.cur=c);if(Ca.dirty){var k,n,p,r,q,v,w,C,z,aa,u,A,R,D,B,G,I,N,O,K,P,U,W,fa,wa,da,ga,xa,pa,na,ea,Ra,Gb,eb;k=ta.dither;k!==Ca.dither&&(k?y.enable(3024):y.disable(3024),Ca.dither=k);n=Z[0];p=Z[1];if(n!==F[0]||p!==F[1])y.blendEquationSeparate(n,p),F[0]=n,F[1]=p;r=ta.depth_func;r!==Ca.depth_func&&(y.depthFunc(r),Ca.depth_func=r);q=Ia[0];v=Ia[1];if(q!==S[0]||v!==S[1])y.depthRange(q,v),S[0]=q,S[1]=v;w=ta.depth_mask;w!==Ca.depth_mask&&(y.depthMask(w),Ca.depth_mask=
w);C=m[0];z=m[1];aa=m[2];u=m[3];if(C!==rc[0]||z!==rc[1]||aa!==rc[2]||u!==rc[3])y.colorMask(C,z,aa,u),rc[0]=C,rc[1]=z,rc[2]=aa,rc[3]=u;A=ta.cull_enable;A!==Ca.cull_enable&&(A?y.enable(2884):y.disable(2884),Ca.cull_enable=A);R=ta.cull_face;R!==Ca.cull_face&&(y.cullFace(R),Ca.cull_face=R);D=ta.frontFace;D!==Ca.frontFace&&(y.frontFace(D),Ca.frontFace=D);B=ta.lineWidth;B!==Ca.lineWidth&&(y.lineWidth(B),Ca.lineWidth=B);G=ta.polygonOffset_enable;G!==Ca.polygonOffset_enable&&(G?y.enable(32823):y.disable(32823),
Ca.polygonOffset_enable=G);I=Hb[0];N=Hb[1];if(I!==zb[0]||N!==zb[1])y.polygonOffset(I,N),zb[0]=I,zb[1]=N;O=ta.sample_alpha;O!==Ca.sample_alpha&&(O?y.enable(32926):y.disable(32926),Ca.sample_alpha=O);K=ta.sample_enable;K!==Ca.sample_enable&&(K?y.enable(32928):y.disable(32928),Ca.sample_enable=K);P=Ue[0];U=Ue[1];if(P!==je[0]||U!==je[1])y.sampleCoverage(P,U),je[0]=P,je[1]=U;W=ta.stencil_mask;W!==Ca.stencil_mask&&(y.stencilMask(W),Ca.stencil_mask=W);fa=Hd[0];wa=Hd[1];da=Hd[2];if(fa!==re[0]||wa!==re[1]||
da!==re[2])y.stencilFunc(fa,wa,da),re[0]=fa,re[1]=wa,re[2]=da;ga=te[0];xa=te[1];pa=te[2];na=te[3];if(ga!==Kd[0]||xa!==Kd[1]||pa!==Kd[2]||na!==Kd[3])y.stencilOpSeparate(ga,xa,pa,na),Kd[0]=ga,Kd[1]=xa,Kd[2]=pa,Kd[3]=na;ea=xd[0];Ra=xd[1];Gb=xd[2];eb=xd[3];if(ea!==de[0]||Ra!==de[1]||Gb!==de[2]||eb!==de[3])y.stencilOpSeparate(ea,Ra,Gb,eb),de[0]=ea,de[1]=Ra,de[2]=Gb,de[3]=eb}y.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;y.enable(3042);Ca.blend_enable=!0;y.blendFuncSeparate(770,771,773,1);Da[0]=770;
Da[1]=771;Da[2]=773;Da[3]=1;y.disable(2929);Ca.depth_enable=!1;y.enable(3089);Ca.scissor_enable=!0;y.disable(2960);Ca.stencil_enable=!1;if(d=Ca.profile)f=performance.now(),l.count+=b;y.useProgram(ka.program);e=Vc.angle_instanced_arrays;var db;oa.setVAO(null);y.uniform1i(t.location,!1);y.uniform1i($b.location,qa.bind());db=Lb.instances;for(g=0;g<b;++g){h=a[g];var Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,Xd,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,
Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,Jc,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Ne,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,ge,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,Pe,Le,We,Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf,rf,of,sf,Cf,Df,Me,ze,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Sb=h.viewport;ue=Sb.x|0;kc=Sb.y|0;Tb=
"width"in Sb?Sb.width|0:ja.framebufferWidth-ue;hd="height"in Sb?Sb.height|0:ja.framebufferHeight-kc;Ub=ja.viewportWidth;ja.viewportWidth=Tb;Ma=ja.viewportHeight;ja.viewportHeight=hd;y.viewport(ue,kc,Tb,hd);Wd[0]=ue;Wd[1]=kc;Wd[2]=Tb;Wd[3]=hd;qb=h.viewport;vb=qb.x|0;jb=qb.y|0;Na="width"in qb?qb.width|0:ja.framebufferWidth-vb;qc="height"in qb?qb.height|0:ja.framebufferHeight-jb;y.scissor(vb,jb,Na,qc);ae[0]=vb;ae[1]=jb;ae[2]=Na;ae[3]=qc;Yb=la.call(this,ja,h,g);fd=!1;fb=null;mc=0;ad=!1;lb=dc=0;mb=1;ra=
0;rb=5126;Aa=cb=Ta=ua=0;ha(Yb)?(fd=!0,fb=J.createStream(34962,Yb),rb=fb.dtype):(fb=J.getBuffer(Yb))?rb=fb.dtype:"constant"in Yb?(mb=2,"number"===typeof Yb.constant?(Ta=Yb.constant,cb=Aa=ua=0):(Ta=0<Yb.constant.length?Yb.constant[0]:0,cb=1<Yb.constant.length?Yb.constant[1]:0,Aa=2<Yb.constant.length?Yb.constant[2]:0,ua=3<Yb.constant.length?Yb.constant[3]:0)):(fb=ha(Yb.buffer)?J.createStream(34962,Yb.buffer):J.getBuffer(Yb.buffer),rb="type"in Yb?Ld[Yb.type]:fb.dtype,ad=!!Yb.normalized,lb=Yb.size|0,dc=
Yb.offset|0,ra=Yb.stride|0,mc=Yb.divisor|0);hb=oc.location;Ha=Y[hb];if(1===mb){Ha.buffer||y.enableVertexAttribArray(hb);Bb=lb||1;if(Ha.type!==rb||Ha.size!==Bb||Ha.buffer!==fb||Ha.normalized!==ad||Ha.offset!==dc||Ha.stride!==ra)y.bindBuffer(34962,fb.buffer),y.vertexAttribPointer(hb,Bb,rb,ad,ra,dc),Ha.type=rb,Ha.size=Bb,Ha.buffer=fb,Ha.normalized=ad,Ha.offset=dc,Ha.stride=ra;Ha.divisor!==mc&&(e.vertexAttribDivisorANGLE(hb,mc),Ha.divisor=mc)}else if(Ha.buffer&&(y.disableVertexAttribArray(hb),Ha.buffer=
null),Ha.x!==Ta||Ha.y!==cb||Ha.z!==Aa||Ha.w!==ua)y.vertexAttrib4f(hb,Ta,cb,Aa,ua),Ha.x=Ta,Ha.y=cb,Ha.z=Aa,Ha.w=ua;Ab=gb.call(this,ja,h,g);Qa=!1;Lc=null;Jb=0;Za=!1;ya=Vb=0;Xd=1;Ja=0;Ob=5126;ec=za=kb=ib=0;ha(Ab)?(Qa=!0,Lc=J.createStream(34962,Ab),Ob=Lc.dtype):(Lc=J.getBuffer(Ab))?Ob=Lc.dtype:"constant"in Ab?(Xd=2,"number"===typeof Ab.constant?(kb=Ab.constant,za=ec=ib=0):(kb=0<Ab.constant.length?Ab.constant[0]:0,za=1<Ab.constant.length?Ab.constant[1]:0,ec=2<Ab.constant.length?Ab.constant[2]:0,ib=3<Ab.constant.length?
Ab.constant[3]:0)):(Lc=ha(Ab.buffer)?J.createStream(34962,Ab.buffer):J.getBuffer(Ab.buffer),Ob="type"in Ab?Ld[Ab.type]:Lc.dtype,Za=!!Ab.normalized,ya=Ab.size|0,Vb=Ab.offset|0,Ja=Ab.stride|0,Jb=Ab.divisor|0);Ea=vd.location;sb=Y[Ea];if(1===Xd){sb.buffer||y.enableVertexAttribArray(Ea);tb=ya||1;if(sb.type!==Ob||sb.size!==tb||sb.buffer!==Lc||sb.normalized!==Za||sb.offset!==Vb||sb.stride!==Ja)y.bindBuffer(34962,Lc.buffer),y.vertexAttribPointer(Ea,tb,Ob,Za,Ja,Vb),sb.type=Ob,sb.size=tb,sb.buffer=Lc,sb.normalized=
Za,sb.offset=Vb,sb.stride=Ja;sb.divisor!==Jb&&(e.vertexAttribDivisorANGLE(Ea,Jb),sb.divisor=Jb)}else if(sb.buffer&&(y.disableVertexAttribArray(Ea),sb.buffer=null),sb.x!==kb||sb.y!==za||sb.z!==ec||sb.w!==ib)y.vertexAttrib4f(Ea,kb,za,ec,ib),sb.x=kb,sb.y=za,sb.z=ec,sb.w=ib;Xa=hc.call(this,ja,h,g);Ya=!1;nc=null;cd=0;wc=!1;Mb=Va=0;Rc=1;Fa=0;zc=5126;wb=nb=Ba=Oa=0;ha(Xa)?(Ya=!0,nc=J.createStream(34962,Xa),zc=nc.dtype):(nc=J.getBuffer(Xa))?zc=nc.dtype:"constant"in Xa?(Rc=2,"number"===typeof Xa.constant?(Ba=
Xa.constant,nb=wb=Oa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,wb=2<Xa.constant.length?Xa.constant[2]:0,Oa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=ha(Xa.buffer)?J.createStream(34962,Xa.buffer):J.getBuffer(Xa.buffer),zc="type"in Xa?Ld[Xa.type]:nc.dtype,wc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|0,Fa=Xa.stride|0,cd=Xa.divisor|0);Cb=tc.location;ub=Y[Cb];if(1===Rc){ub.buffer||y.enableVertexAttribArray(Cb);xc=Mb||1;if(ub.type!==zc||ub.size!==xc||ub.buffer!==
nc||ub.normalized!==wc||ub.offset!==Va||ub.stride!==Fa)y.bindBuffer(34962,nc.buffer),y.vertexAttribPointer(Cb,xc,zc,wc,Fa,Va),ub.type=zc,ub.size=xc,ub.buffer=nc,ub.normalized=wc,ub.offset=Va,ub.stride=Fa;ub.divisor!==cd&&(e.vertexAttribDivisorANGLE(Cb,cd),ub.divisor=cd)}else if(ub.buffer&&(y.disableVertexAttribArray(Cb),ub.buffer=null),ub.x!==Ba||ub.y!==nb||ub.z!==wb||ub.w!==Oa)y.vertexAttrib4f(Cb,Ba,nb,wb,Oa),ub.x=Ba,ub.y=nb,ub.z=wb,ub.w=Oa;xb=sa.call(this,ja,h,g);Id=!1;vc=null;Jc=0;Nc=!1;dd=nd=
0;Wb=1;cc=0;Pb=5126;yb=ob=ac=Ga=0;ha(xb)?(Id=!0,vc=J.createStream(34962,xb),Pb=vc.dtype):(vc=J.getBuffer(xb))?Pb=vc.dtype:"constant"in xb?(Wb=2,"number"===typeof xb.constant?(ac=xb.constant,ob=yb=Ga=0):(ac=0<xb.constant.length?xb.constant[0]:0,ob=1<xb.constant.length?xb.constant[1]:0,yb=2<xb.constant.length?xb.constant[2]:0,Ga=3<xb.constant.length?xb.constant[3]:0)):(vc=ha(xb.buffer)?J.createStream(34962,xb.buffer):J.getBuffer(xb.buffer),Pb="type"in xb?Ld[xb.type]:vc.dtype,Nc=!!xb.normalized,dd=xb.size|
0,nd=xb.offset|0,cc=xb.stride|0,Jc=xb.divisor|0);Nb=yc.location;Qb=Y[Nb];if(1===Wb){Qb.buffer||y.enableVertexAttribArray(Nb);fc=dd||1;if(Qb.type!==Pb||Qb.size!==fc||Qb.buffer!==vc||Qb.normalized!==Nc||Qb.offset!==nd||Qb.stride!==cc)y.bindBuffer(34962,vc.buffer),y.vertexAttribPointer(Nb,fc,Pb,Nc,cc,nd),Qb.type=Pb,Qb.size=fc,Qb.buffer=vc,Qb.normalized=Nc,Qb.offset=nd,Qb.stride=cc;Qb.divisor!==Jc&&(e.vertexAttribDivisorANGLE(Nb,Jc),Qb.divisor=Jc)}else if(Qb.buffer&&(y.disableVertexAttribArray(Nb),Qb.buffer=
null),Qb.x!==ac||Qb.y!==ob||Qb.z!==yb||Qb.w!==Ga)y.vertexAttrib4f(Nb,ac,ob,yb,Ga),Qb.x=ac,Qb.y=ob,Qb.z=yb,Qb.w=Ga;ic=Pa.call(this,ja,h,g);Ne=!1;Dc=null;Ec=0;Fc=!1;$c=Oc=0;Tc=1;Pc=0;Kb=5126;Uc=Ic=Qc=Fb=0;ha(ic)?(Ne=!0,Dc=J.createStream(34962,ic),Kb=Dc.dtype):(Dc=J.getBuffer(ic))?Kb=Dc.dtype:"constant"in ic?(Tc=2,"number"===typeof ic.constant?(Qc=ic.constant,Ic=Uc=Fb=0):(Qc=0<ic.constant.length?ic.constant[0]:0,Ic=1<ic.constant.length?ic.constant[1]:0,Uc=2<ic.constant.length?ic.constant[2]:0,Fb=3<ic.constant.length?
ic.constant[3]:0)):(Dc=ha(ic.buffer)?J.createStream(34962,ic.buffer):J.getBuffer(ic.buffer),Kb="type"in ic?Ld[ic.type]:Dc.dtype,Fc=!!ic.normalized,$c=ic.size|0,Oc=ic.offset|0,Pc=ic.stride|0,Ec=ic.divisor|0);gc=ca.location;Xc=Y[gc];if(1===Tc){Xc.buffer||y.enableVertexAttribArray(gc);od=$c||1;if(Xc.type!==Kb||Xc.size!==od||Xc.buffer!==Dc||Xc.normalized!==Fc||Xc.offset!==Oc||Xc.stride!==Pc)y.bindBuffer(34962,Dc.buffer),y.vertexAttribPointer(gc,od,Kb,Fc,Pc,Oc),Xc.type=Kb,Xc.size=od,Xc.buffer=Dc,Xc.normalized=
Fc,Xc.offset=Oc,Xc.stride=Pc;Xc.divisor!==Ec&&(e.vertexAttribDivisorANGLE(gc,Ec),Xc.divisor=Ec)}else if(Xc.buffer&&(y.disableVertexAttribArray(gc),Xc.buffer=null),Xc.x!==Qc||Xc.y!==Ic||Xc.z!==Uc||Xc.w!==Fb)y.vertexAttrib4f(gc,Qc,Ic,Uc,Fb),Xc.x=Qc,Xc.y=Ic,Xc.z=Uc,Xc.w=Fb;id=X.call(this,ja,h,g);rd=!1;Yc=null;ge=0;Ud=!1;se=he=0;le=1;Fd=0;Dd=5126;jd=pd=Gc=ed=0;ha(id)?(rd=!0,Yc=J.createStream(34962,id),Dd=Yc.dtype):(Yc=J.getBuffer(id))?Dd=Yc.dtype:"constant"in id?(le=2,"number"===typeof id.constant?(Gc=
id.constant,pd=jd=ed=0):(Gc=0<id.constant.length?id.constant[0]:0,pd=1<id.constant.length?id.constant[1]:0,jd=2<id.constant.length?id.constant[2]:0,ed=3<id.constant.length?id.constant[3]:0)):(Yc=ha(id.buffer)?J.createStream(34962,id.buffer):J.getBuffer(id.buffer),Dd="type"in id?Ld[id.type]:Yc.dtype,Ud=!!id.normalized,se=id.size|0,he=id.offset|0,Fd=id.stride|0,ge=id.divisor|0);bd=$a.location;kd=Y[bd];if(1===le){kd.buffer||y.enableVertexAttribArray(bd);Ad=se||1;if(kd.type!==Dd||kd.size!==Ad||kd.buffer!==
Yc||kd.normalized!==Ud||kd.offset!==he||kd.stride!==Fd)y.bindBuffer(34962,Yc.buffer),y.vertexAttribPointer(bd,Ad,Dd,Ud,Fd,he),kd.type=Dd,kd.size=Ad,kd.buffer=Yc,kd.normalized=Ud,kd.offset=he,kd.stride=Fd;kd.divisor!==ge&&(e.vertexAttribDivisorANGLE(bd,ge),kd.divisor=ge)}else if(kd.buffer&&(y.disableVertexAttribArray(bd),kd.buffer=null),kd.x!==Gc||kd.y!==pd||kd.z!==jd||kd.w!==ed)y.vertexAttrib4f(bd,Gc,pd,jd,ed),kd.x=Gc,kd.y=pd,kd.z=jd,kd.w=ed;Bd=H.call(this,ja,h,g);we=!1;me=null;ve=0;ce=!1;$d=be=0;
oe=1;Yd=0;ee=5126;ie=pe=Wc=Ac=0;ha(Bd)?(we=!0,me=J.createStream(34962,Bd),ee=me.dtype):(me=J.getBuffer(Bd))?ee=me.dtype:"constant"in Bd?(oe=2,"number"===typeof Bd.constant?(Wc=Bd.constant,pe=ie=Ac=0):(Wc=0<Bd.constant.length?Bd.constant[0]:0,pe=1<Bd.constant.length?Bd.constant[1]:0,ie=2<Bd.constant.length?Bd.constant[2]:0,Ac=3<Bd.constant.length?Bd.constant[3]:0)):(me=ha(Bd.buffer)?J.createStream(34962,Bd.buffer):J.getBuffer(Bd.buffer),ee="type"in Bd?Ld[Bd.type]:me.dtype,ce=!!Bd.normalized,$d=Bd.size|
0,be=Bd.offset|0,Yd=Bd.stride|0,ve=Bd.divisor|0);Ed=T.location;Jd=Y[Ed];if(1===oe){Jd.buffer||y.enableVertexAttribArray(Ed);Md=$d||4;if(Jd.type!==ee||Jd.size!==Md||Jd.buffer!==me||Jd.normalized!==ce||Jd.offset!==be||Jd.stride!==Yd)y.bindBuffer(34962,me.buffer),y.vertexAttribPointer(Ed,Md,ee,ce,Yd,be),Jd.type=ee,Jd.size=Md,Jd.buffer=me,Jd.normalized=ce,Jd.offset=be,Jd.stride=Yd;Jd.divisor!==ve&&(e.vertexAttribDivisorANGLE(Ed,ve),Jd.divisor=ve)}else if(Jd.buffer&&(y.disableVertexAttribArray(Ed),Jd.buffer=
null),Jd.x!==Wc||Jd.y!==pe||Jd.z!==ie||Jd.w!==Ac)y.vertexAttrib4f(Ed,Wc,pe,ie,Ac),Jd.x=Wc,Jd.y=pe,Jd.z=ie,Jd.w=Ac;Nd=L.call(this,ja,h,g);fe=!1;De=null;xe=0;ne=!1;Oe=Ye=0;Ke=1;qe=0;Ae=5126;Be=Ge=Fe=Ee=0;ha(Nd)?(fe=!0,De=J.createStream(34962,Nd),Ae=De.dtype):(De=J.getBuffer(Nd))?Ae=De.dtype:"constant"in Nd?(Ke=2,"number"===typeof Nd.constant?(Fe=Nd.constant,Ge=Be=Ee=0):(Fe=0<Nd.constant.length?Nd.constant[0]:0,Ge=1<Nd.constant.length?Nd.constant[1]:0,Be=2<Nd.constant.length?Nd.constant[2]:0,Ee=3<Nd.constant.length?
Nd.constant[3]:0)):(De=ha(Nd.buffer)?J.createStream(34962,Nd.buffer):J.getBuffer(Nd.buffer),Ae="type"in Nd?Ld[Nd.type]:De.dtype,ne=!!Nd.normalized,Oe=Nd.size|0,Ye=Nd.offset|0,qe=Nd.stride|0,xe=Nd.divisor|0);Gd=Zb.location;Qd=Y[Gd];if(1===Ke){Qd.buffer||y.enableVertexAttribArray(Gd);Vd=Oe||4;if(Qd.type!==Ae||Qd.size!==Vd||Qd.buffer!==De||Qd.normalized!==ne||Qd.offset!==Ye||Qd.stride!==qe)y.bindBuffer(34962,De.buffer),y.vertexAttribPointer(Gd,Vd,Ae,ne,qe,Ye),Qd.type=Ae,Qd.size=Vd,Qd.buffer=De,Qd.normalized=
ne,Qd.offset=Ye,Qd.stride=qe;Qd.divisor!==xe&&(e.vertexAttribDivisorANGLE(Gd,xe),Qd.divisor=xe)}else if(Qd.buffer&&(y.disableVertexAttribArray(Gd),Qd.buffer=null),Qd.x!==Fe||Qd.y!==Ge||Qd.z!==Be||Qd.w!==Ee)y.vertexAttrib4f(Gd,Fe,Ge,Be,Ee),Qd.x=Fe,Qd.y=Ge,Qd.z=Be,Qd.w=Ee;Zd=Q.call(this,ja,h,g);He=!1;zd=null;Od=0;ye=!1;gf=Ie=0;Xe=1;Pe=0;Le=5126;Re=Qe=Te=We=0;ha(Zd)?(He=!0,zd=J.createStream(34962,Zd),Le=zd.dtype):(zd=J.getBuffer(Zd))?Le=zd.dtype:"constant"in Zd?(Xe=2,"number"===typeof Zd.constant?(Te=
Zd.constant,Qe=Re=We=0):(Te=0<Zd.constant.length?Zd.constant[0]:0,Qe=1<Zd.constant.length?Zd.constant[1]:0,Re=2<Zd.constant.length?Zd.constant[2]:0,We=3<Zd.constant.length?Zd.constant[3]:0)):(zd=ha(Zd.buffer)?J.createStream(34962,Zd.buffer):J.getBuffer(Zd.buffer),Le="type"in Zd?Ld[Zd.type]:zd.dtype,ye=!!Zd.normalized,gf=Zd.size|0,Ie=Zd.offset|0,Pe=Zd.stride|0,Od=Zd.divisor|0);Pd=ia.location;Td=Y[Pd];if(1===Xe){Td.buffer||y.enableVertexAttribArray(Pd);Se=gf||1;if(Td.type!==Le||Td.size!==Se||Td.buffer!==
zd||Td.normalized!==ye||Td.offset!==Ie||Td.stride!==Pe)y.bindBuffer(34962,zd.buffer),y.vertexAttribPointer(Pd,Se,Le,ye,Pe,Ie),Td.type=Le,Td.size=Se,Td.buffer=zd,Td.normalized=ye,Td.offset=Ie,Td.stride=Pe;Td.divisor!==Od&&(e.vertexAttribDivisorANGLE(Pd,Od),Td.divisor=Od)}else if(Td.buffer&&(y.disableVertexAttribArray(Pd),Td.buffer=null),Td.x!==Te||Td.y!==Qe||Td.z!==Re||Td.w!==We)y.vertexAttrib4f(Pd,Te,Qe,Re,We),Td.x=Te,Td.y=Qe,Td.z=Re,Td.w=We;hf=ja.pixelRatio;g&&mf===hf||(mf=hf,y.uniform1f(Ua.location,
hf));cf=h.scale;jf=cf[0];lf=cf[1];g&&kf===jf&&rf===lf||(kf=jf,rf=lf,y.uniform2f(V.location,jf,lf));of=h.scaleFract;sf=of[0];Df=of[1];g&&Cf===sf&&Me===Df||(Cf=sf,Me=Df,y.uniform2f(pb.location,sf,Df));ze=h.translate;pf=ze[0];Ef=ze[1];g&&qf===pf&&Hf===Ef||(qf=pf,Hf=Ef,y.uniform2f(ma.location,pf,Ef));Bf=h.translateFract;Ff=Bf[0];xf=Bf[1];g&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,y.uniform2f(Rb.location,Ff,xf));wf=M.call(this,ja,h,g);zf=wf[0];Jf=wf[1];g&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,y.uniform2f(La.location,
zf,Jf));Lf=h.opacity;g&&Mf===Lf||(Mf=Lf,y.uniform1f(va.location,Lf));(uf=h.markerTexture)&&"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;y.uniform1i(ba.location,Rf.bind());If=h.elements;vf=null;(vf=(dg=ha(If))?ab.createStream(If):ab.getElements(If))&&y.bindBuffer(34963,vf.buffer.buffer);Sf=h.offset;if(Tf=h.count)0<db?vf?e.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),db):e.drawArraysInstancedANGLE(0,Sf,Tf,db):0>db&&(vf?y.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>
1)):y.drawArrays(0,Sf,Tf)),ja.viewportWidth=Ub,ja.viewportHeight=Ma,fd&&J.destroyStream(fb),Qa&&J.destroyStream(Lc),Ya&&J.destroyStream(nc),Id&&J.destroyStream(vc),Ne&&J.destroyStream(Dc),rd&&J.destroyStream(Yc),we&&J.destroyStream(me),fe&&J.destroyStream(De),He&&J.destroyStream(zd),Rf.unbind(),dg&&ab.destroyStream(vf)}qa.unbind();Ca.dirty=!0;oa.setVAO(null);d&&(l.cpuTime+=performance.now()-f)},draw:function(e){var g,h,k,q,w,C,z,A,D,G,I,L,N,H,O,M,K,Q,P,U,W,fa,X,da,ga,xa,na,ea,qa,sa,ka,la,Ka,Eb,Wa,
pa,db,Ib,Ra,Gb,eb,Pa,Sb,gb,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,hc,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,Xd,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Jc,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,ge,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye,Oe,Ke,qe;g=E.next;g!==E.cur&&(g?y.bindFramebuffer(36160,g.framebuffer):
y.bindFramebuffer(36160,null),E.cur=g);if(Ca.dirty){var Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,Pe,Le,We,Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf,rf,of,sf;Ae=ta.dither;Ae!==Ca.dither&&(Ae?y.enable(3024):y.disable(3024),Ca.dither=Ae);Ee=Z[0];Fe=Z[1];if(Ee!==F[0]||Fe!==F[1])y.blendEquationSeparate(Ee,Fe),F[0]=Ee,F[1]=Fe;Ge=ta.depth_func;Ge!==Ca.depth_func&&(y.depthFunc(Ge),Ca.depth_func=Ge);Be=Ia[0];Gd=Ia[1];if(Be!==S[0]||Gd!==S[1])y.depthRange(Be,Gd),S[0]=Be,S[1]=Gd;Qd=ta.depth_mask;Qd!==Ca.depth_mask&&
(y.depthMask(Qd),Ca.depth_mask=Qd);Vd=m[0];Zd=m[1];He=m[2];zd=m[3];if(Vd!==rc[0]||Zd!==rc[1]||He!==rc[2]||zd!==rc[3])y.colorMask(Vd,Zd,He,zd),rc[0]=Vd,rc[1]=Zd,rc[2]=He,rc[3]=zd;Od=ta.cull_enable;Od!==Ca.cull_enable&&(Od?y.enable(2884):y.disable(2884),Ca.cull_enable=Od);ye=ta.cull_face;ye!==Ca.cull_face&&(y.cullFace(ye),Ca.cull_face=ye);Ie=ta.frontFace;Ie!==Ca.frontFace&&(y.frontFace(Ie),Ca.frontFace=Ie);gf=ta.lineWidth;gf!==Ca.lineWidth&&(y.lineWidth(gf),Ca.lineWidth=gf);Xe=ta.polygonOffset_enable;
Xe!==Ca.polygonOffset_enable&&(Xe?y.enable(32823):y.disable(32823),Ca.polygonOffset_enable=Xe);Pe=Hb[0];Le=Hb[1];if(Pe!==zb[0]||Le!==zb[1])y.polygonOffset(Pe,Le),zb[0]=Pe,zb[1]=Le;We=ta.sample_alpha;We!==Ca.sample_alpha&&(We?y.enable(32926):y.disable(32926),Ca.sample_alpha=We);Te=ta.sample_enable;Te!==Ca.sample_enable&&(Te?y.enable(32928):y.disable(32928),Ca.sample_enable=Te);Qe=Ue[0];Re=Ue[1];if(Qe!==je[0]||Re!==je[1])y.sampleCoverage(Qe,Re),je[0]=Qe,je[1]=Re;Pd=ta.stencil_mask;Pd!==Ca.stencil_mask&&
(y.stencilMask(Pd),Ca.stencil_mask=Pd);Td=Hd[0];Se=Hd[1];hf=Hd[2];if(Td!==re[0]||Se!==re[1]||hf!==re[2])y.stencilFunc(Td,Se,hf),re[0]=Td,re[1]=Se,re[2]=hf;mf=te[0];cf=te[1];jf=te[2];kf=te[3];if(mf!==Kd[0]||cf!==Kd[1]||jf!==Kd[2]||kf!==Kd[3])y.stencilOpSeparate(mf,cf,jf,kf),Kd[0]=mf,Kd[1]=cf,Kd[2]=jf,Kd[3]=kf;lf=xd[0];rf=xd[1];of=xd[2];sf=xd[3];if(lf!==de[0]||rf!==de[1]||of!==de[2]||sf!==de[3])y.stencilOpSeparate(lf,rf,of,sf),de[0]=lf,de[1]=rf,de[2]=of,de[3]=sf}h=e.viewport;k=h.x|0;q=h.y|0;w="width"in
h?h.width|0:ja.framebufferWidth-k;C="height"in h?h.height|0:ja.framebufferHeight-q;z=ja.viewportWidth;ja.viewportWidth=w;A=ja.viewportHeight;ja.viewportHeight=C;y.viewport(k,q,w,C);Wd[0]=k;Wd[1]=q;Wd[2]=w;Wd[3]=C;y.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;y.enable(3042);Ca.blend_enable=!0;y.blendFuncSeparate(770,771,773,1);Da[0]=770;Da[1]=771;Da[2]=773;Da[3]=1;y.disable(2929);Ca.depth_enable=!1;D=e.viewport;G=D.x|0;I=D.y|0;L="width"in D?D.width|0:ja.framebufferWidth-G;N="height"in D?D.height|
0:ja.framebufferHeight-I;y.scissor(G,I,L,N);ae[0]=G;ae[1]=I;ae[2]=L;ae[3]=N;y.enable(3089);Ca.scissor_enable=!0;y.disable(2960);Ca.stencil_enable=!1;if(H=Ca.profile)O=performance.now(),l.count++;y.useProgram(c.program);M=Vc.angle_instanced_arrays;oa.setVAO(null);K=b.call(this,ja,e,0);Q=!1;P=null;U=0;W=!1;X=fa=0;da=1;ga=0;xa=5126;sa=qa=ea=na=0;ha(K)?(Q=!0,P=J.createStream(34962,K),xa=P.dtype):(P=J.getBuffer(K))?xa=P.dtype:"constant"in K?(da=2,"number"===typeof K.constant?(ea=K.constant,qa=sa=na=0):
(ea=0<K.constant.length?K.constant[0]:0,qa=1<K.constant.length?K.constant[1]:0,sa=2<K.constant.length?K.constant[2]:0,na=3<K.constant.length?K.constant[3]:0)):(P=ha(K.buffer)?J.createStream(34962,K.buffer):J.getBuffer(K.buffer),xa="type"in K?Ld[K.type]:P.dtype,W=!!K.normalized,X=K.size|0,fa=K.offset|0,ga=K.stride|0,U=K.divisor|0);ka=oc.location;la=Y[ka];if(1===da){la.buffer||y.enableVertexAttribArray(ka);Ka=X||1;if(la.type!==xa||la.size!==Ka||la.buffer!==P||la.normalized!==W||la.offset!==fa||la.stride!==
ga)y.bindBuffer(34962,P.buffer),y.vertexAttribPointer(ka,Ka,xa,W,ga,fa),la.type=xa,la.size=Ka,la.buffer=P,la.normalized=W,la.offset=fa,la.stride=ga;la.divisor!==U&&(M.vertexAttribDivisorANGLE(ka,U),la.divisor=U)}else if(la.buffer&&(y.disableVertexAttribArray(ka),la.buffer=null),la.x!==ea||la.y!==qa||la.z!==sa||la.w!==na)y.vertexAttrib4f(ka,ea,qa,sa,na),la.x=ea,la.y=qa,la.z=sa,la.w=na;Eb=f.call(this,ja,e,0);Wa=!1;pa=null;db=0;Ib=!1;Gb=Ra=0;eb=1;Pa=0;Sb=5126;hd=Tb=kc=gb=0;ha(Eb)?(Wa=!0,pa=J.createStream(34962,
Eb),Sb=pa.dtype):(pa=J.getBuffer(Eb))?Sb=pa.dtype:"constant"in Eb?(eb=2,"number"===typeof Eb.constant?(kc=Eb.constant,Tb=hd=gb=0):(kc=0<Eb.constant.length?Eb.constant[0]:0,Tb=1<Eb.constant.length?Eb.constant[1]:0,hd=2<Eb.constant.length?Eb.constant[2]:0,gb=3<Eb.constant.length?Eb.constant[3]:0)):(pa=ha(Eb.buffer)?J.createStream(34962,Eb.buffer):J.getBuffer(Eb.buffer),Sb="type"in Eb?Ld[Eb.type]:pa.dtype,Ib=!!Eb.normalized,Gb=Eb.size|0,Ra=Eb.offset|0,Pa=Eb.stride|0,db=Eb.divisor|0);Ub=vd.location;Ma=
Y[Ub];if(1===eb){Ma.buffer||y.enableVertexAttribArray(Ub);qb=Gb||1;if(Ma.type!==Sb||Ma.size!==qb||Ma.buffer!==pa||Ma.normalized!==Ib||Ma.offset!==Ra||Ma.stride!==Pa)y.bindBuffer(34962,pa.buffer),y.vertexAttribPointer(Ub,qb,Sb,Ib,Pa,Ra),Ma.type=Sb,Ma.size=qb,Ma.buffer=pa,Ma.normalized=Ib,Ma.offset=Ra,Ma.stride=Pa;Ma.divisor!==db&&(M.vertexAttribDivisorANGLE(Ub,db),Ma.divisor=db)}else if(Ma.buffer&&(y.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==kc||Ma.y!==Tb||Ma.z!==hd||Ma.w!==gb)y.vertexAttrib4f(Ub,
kc,Tb,hd,gb),Ma.x=kc,Ma.y=Tb,Ma.z=hd,Ma.w=gb;vb=a.call(this,ja,e,0);jb=!1;Na=null;qc=0;Yb=!1;fb=fd=0;mc=1;ad=0;dc=5126;rb=ra=mb=lb=0;ha(vb)?(jb=!0,Na=J.createStream(34962,vb),dc=Na.dtype):(Na=J.getBuffer(vb))?dc=Na.dtype:"constant"in vb?(mc=2,"number"===typeof vb.constant?(mb=vb.constant,ra=rb=lb=0):(mb=0<vb.constant.length?vb.constant[0]:0,ra=1<vb.constant.length?vb.constant[1]:0,rb=2<vb.constant.length?vb.constant[2]:0,lb=3<vb.constant.length?vb.constant[3]:0)):(Na=ha(vb.buffer)?J.createStream(34962,
vb.buffer):J.getBuffer(vb.buffer),dc="type"in vb?Ld[vb.type]:Na.dtype,Yb=!!vb.normalized,fb=vb.size|0,fd=vb.offset|0,ad=vb.stride|0,qc=vb.divisor|0);ua=tc.location;Ta=Y[ua];if(1===mc){Ta.buffer||y.enableVertexAttribArray(ua);cb=fb||1;if(Ta.type!==dc||Ta.size!==cb||Ta.buffer!==Na||Ta.normalized!==Yb||Ta.offset!==fd||Ta.stride!==ad)y.bindBuffer(34962,Na.buffer),y.vertexAttribPointer(ua,cb,dc,Yb,ad,fd),Ta.type=dc,Ta.size=cb,Ta.buffer=Na,Ta.normalized=Yb,Ta.offset=fd,Ta.stride=ad;Ta.divisor!==qc&&(M.vertexAttribDivisorANGLE(ua,
qc),Ta.divisor=qc)}else if(Ta.buffer&&(y.disableVertexAttribArray(ua),Ta.buffer=null),Ta.x!==mb||Ta.y!==ra||Ta.z!==rb||Ta.w!==lb)y.vertexAttrib4f(ua,mb,ra,rb,lb),Ta.x=mb,Ta.y=ra,Ta.z=rb,Ta.w=lb;Aa=n.call(this,ja,e,0);hb=!1;Ha=null;Bb=0;Ab=!1;Lc=Qa=0;Jb=1;Za=0;Vb=5126;Ob=Ja=hc=ya=0;ha(Aa)?(hb=!0,Ha=J.createStream(34962,Aa),Vb=Ha.dtype):(Ha=J.getBuffer(Aa))?Vb=Ha.dtype:"constant"in Aa?(Jb=2,"number"===typeof Aa.constant?(hc=Aa.constant,Ja=Ob=ya=0):(hc=0<Aa.constant.length?Aa.constant[0]:0,Ja=1<Aa.constant.length?
Aa.constant[1]:0,Ob=2<Aa.constant.length?Aa.constant[2]:0,ya=3<Aa.constant.length?Aa.constant[3]:0)):(Ha=ha(Aa.buffer)?J.createStream(34962,Aa.buffer):J.getBuffer(Aa.buffer),Vb="type"in Aa?Ld[Aa.type]:Ha.dtype,Ab=!!Aa.normalized,Lc=Aa.size|0,Qa=Aa.offset|0,Za=Aa.stride|0,Bb=Aa.divisor|0);ib=yc.location;kb=Y[ib];if(1===Jb){kb.buffer||y.enableVertexAttribArray(ib);za=Lc||1;if(kb.type!==Vb||kb.size!==za||kb.buffer!==Ha||kb.normalized!==Ab||kb.offset!==Qa||kb.stride!==Za)y.bindBuffer(34962,Ha.buffer),
y.vertexAttribPointer(ib,za,Vb,Ab,Za,Qa),kb.type=Vb,kb.size=za,kb.buffer=Ha,kb.normalized=Ab,kb.offset=Qa,kb.stride=Za;kb.divisor!==Bb&&(M.vertexAttribDivisorANGLE(ib,Bb),kb.divisor=Bb)}else if(kb.buffer&&(y.disableVertexAttribArray(ib),kb.buffer=null),kb.x!==hc||kb.y!==Ja||kb.z!==Ob||kb.w!==ya)y.vertexAttrib4f(ib,hc,Ja,Ob,ya),kb.x=hc,kb.y=Ja,kb.z=Ob,kb.w=ya;ec=d.call(this,ja,e,0);Ea=!1;sb=null;tb=0;Xa=!1;nc=Ya=0;cd=1;wc=0;Va=5126;zc=Fa=Rc=Mb=0;ha(ec)?(Ea=!0,sb=J.createStream(34962,ec),Va=sb.dtype):
(sb=J.getBuffer(ec))?Va=sb.dtype:"constant"in ec?(cd=2,"number"===typeof ec.constant?(Rc=ec.constant,Fa=zc=Mb=0):(Rc=0<ec.constant.length?ec.constant[0]:0,Fa=1<ec.constant.length?ec.constant[1]:0,zc=2<ec.constant.length?ec.constant[2]:0,Mb=3<ec.constant.length?ec.constant[3]:0)):(sb=ha(ec.buffer)?J.createStream(34962,ec.buffer):J.getBuffer(ec.buffer),Va="type"in ec?Ld[ec.type]:sb.dtype,Xa=!!ec.normalized,nc=ec.size|0,Ya=ec.offset|0,wc=ec.stride|0,tb=ec.divisor|0);Oa=ca.location;Ba=Y[Oa];if(1===cd){Ba.buffer||
y.enableVertexAttribArray(Oa);nb=nc||1;if(Ba.type!==Va||Ba.size!==nb||Ba.buffer!==sb||Ba.normalized!==Xa||Ba.offset!==Ya||Ba.stride!==wc)y.bindBuffer(34962,sb.buffer),y.vertexAttribPointer(Oa,nb,Va,Xa,wc,Ya),Ba.type=Va,Ba.size=nb,Ba.buffer=sb,Ba.normalized=Xa,Ba.offset=Ya,Ba.stride=wc;Ba.divisor!==tb&&(M.vertexAttribDivisorANGLE(Oa,tb),Ba.divisor=tb)}else if(Ba.buffer&&(y.disableVertexAttribArray(Oa),Ba.buffer=null),Ba.x!==Rc||Ba.y!==Fa||Ba.z!==zc||Ba.w!==Mb)y.vertexAttrib4f(Oa,Rc,Fa,zc,Mb),Ba.x=
Rc,Ba.y=Fa,Ba.z=zc,Ba.w=Mb;wb=p.call(this,ja,e,0);Cb=!1;ub=null;xc=0;xb=!1;vc=Id=0;Xd=1;Nc=0;nd=5126;Pb=cc=Wb=dd=0;ha(wb)?(Cb=!0,ub=J.createStream(34962,wb),nd=ub.dtype):(ub=J.getBuffer(wb))?nd=ub.dtype:"constant"in wb?(Xd=2,"number"===typeof wb.constant?(Wb=wb.constant,cc=Pb=dd=0):(Wb=0<wb.constant.length?wb.constant[0]:0,cc=1<wb.constant.length?wb.constant[1]:0,Pb=2<wb.constant.length?wb.constant[2]:0,dd=3<wb.constant.length?wb.constant[3]:0)):(ub=ha(wb.buffer)?J.createStream(34962,wb.buffer):J.getBuffer(wb.buffer),
nd="type"in wb?Ld[wb.type]:ub.dtype,xb=!!wb.normalized,vc=wb.size|0,Id=wb.offset|0,Nc=wb.stride|0,xc=wb.divisor|0);Ga=$a.location;ac=Y[Ga];if(1===Xd){ac.buffer||y.enableVertexAttribArray(Ga);ob=vc||1;if(ac.type!==nd||ac.size!==ob||ac.buffer!==ub||ac.normalized!==xb||ac.offset!==Id||ac.stride!==Nc)y.bindBuffer(34962,ub.buffer),y.vertexAttribPointer(Ga,ob,nd,xb,Nc,Id),ac.type=nd,ac.size=ob,ac.buffer=ub,ac.normalized=xb,ac.offset=Id,ac.stride=Nc;ac.divisor!==xc&&(M.vertexAttribDivisorANGLE(Ga,xc),ac.divisor=
xc)}else if(ac.buffer&&(y.disableVertexAttribArray(Ga),ac.buffer=null),ac.x!==Wb||ac.y!==cc||ac.z!==Pb||ac.w!==dd)y.vertexAttrib4f(Ga,Wb,cc,Pb,dd),ac.x=Wb,ac.y=cc,ac.z=Pb,ac.w=dd;yb=aa.call(this,ja,e,0);Nb=!1;Qb=null;fc=0;ic=!1;Dc=Jc=0;Ec=1;Fc=0;Oc=5126;Kb=Pc=Tc=$c=0;ha(yb)?(Nb=!0,Qb=J.createStream(34962,yb),Oc=Qb.dtype):(Qb=J.getBuffer(yb))?Oc=Qb.dtype:"constant"in yb?(Ec=2,"number"===typeof yb.constant?(Tc=yb.constant,Pc=Kb=$c=0):(Tc=0<yb.constant.length?yb.constant[0]:0,Pc=1<yb.constant.length?
yb.constant[1]:0,Kb=2<yb.constant.length?yb.constant[2]:0,$c=3<yb.constant.length?yb.constant[3]:0)):(Qb=ha(yb.buffer)?J.createStream(34962,yb.buffer):J.getBuffer(yb.buffer),Oc="type"in yb?Ld[yb.type]:Qb.dtype,ic=!!yb.normalized,Dc=yb.size|0,Jc=yb.offset|0,Fc=yb.stride|0,fc=yb.divisor|0);Fb=T.location;Qc=Y[Fb];if(1===Ec){Qc.buffer||y.enableVertexAttribArray(Fb);Ic=Dc||4;if(Qc.type!==Oc||Qc.size!==Ic||Qc.buffer!==Qb||Qc.normalized!==ic||Qc.offset!==Jc||Qc.stride!==Fc)y.bindBuffer(34962,Qb.buffer),
y.vertexAttribPointer(Fb,Ic,Oc,ic,Fc,Jc),Qc.type=Oc,Qc.size=Ic,Qc.buffer=Qb,Qc.normalized=ic,Qc.offset=Jc,Qc.stride=Fc;Qc.divisor!==fc&&(M.vertexAttribDivisorANGLE(Fb,fc),Qc.divisor=fc)}else if(Qc.buffer&&(y.disableVertexAttribArray(Fb),Qc.buffer=null),Qc.x!==Tc||Qc.y!==Pc||Qc.z!==Kb||Qc.w!==$c)y.vertexAttrib4f(Fb,Tc,Pc,Kb,$c),Qc.x=Tc,Qc.y=Pc,Qc.z=Kb,Qc.w=$c;Uc=u.call(this,ja,e,0);gc=!1;Xc=null;od=0;id=!1;Yc=rd=0;ge=1;Ud=0;he=5126;Dd=Fd=le=se=0;ha(Uc)?(gc=!0,Xc=J.createStream(34962,Uc),he=Xc.dtype):
(Xc=J.getBuffer(Uc))?he=Xc.dtype:"constant"in Uc?(ge=2,"number"===typeof Uc.constant?(le=Uc.constant,Fd=Dd=se=0):(le=0<Uc.constant.length?Uc.constant[0]:0,Fd=1<Uc.constant.length?Uc.constant[1]:0,Dd=2<Uc.constant.length?Uc.constant[2]:0,se=3<Uc.constant.length?Uc.constant[3]:0)):(Xc=ha(Uc.buffer)?J.createStream(34962,Uc.buffer):J.getBuffer(Uc.buffer),he="type"in Uc?Ld[Uc.type]:Xc.dtype,id=!!Uc.normalized,Yc=Uc.size|0,rd=Uc.offset|0,Ud=Uc.stride|0,od=Uc.divisor|0);ed=Zb.location;Gc=Y[ed];if(1===ge){Gc.buffer||
y.enableVertexAttribArray(ed);pd=Yc||4;if(Gc.type!==he||Gc.size!==pd||Gc.buffer!==Xc||Gc.normalized!==id||Gc.offset!==rd||Gc.stride!==Ud)y.bindBuffer(34962,Xc.buffer),y.vertexAttribPointer(ed,pd,he,id,Ud,rd),Gc.type=he,Gc.size=pd,Gc.buffer=Xc,Gc.normalized=id,Gc.offset=rd,Gc.stride=Ud;Gc.divisor!==od&&(M.vertexAttribDivisorANGLE(ed,od),Gc.divisor=od)}else if(Gc.buffer&&(y.disableVertexAttribArray(ed),Gc.buffer=null),Gc.x!==le||Gc.y!==Fd||Gc.z!==Dd||Gc.w!==se)y.vertexAttrib4f(ed,le,Fd,Dd,se),Gc.x=
le,Gc.y=Fd,Gc.z=Dd,Gc.w=se;jd=r.call(this,ja,e,0);bd=!1;kd=null;Ad=0;Bd=!1;me=we=0;ve=1;ce=0;be=5126;ee=Yd=oe=$d=0;ha(jd)?(bd=!0,kd=J.createStream(34962,jd),be=kd.dtype):(kd=J.getBuffer(jd))?be=kd.dtype:"constant"in jd?(ve=2,"number"===typeof jd.constant?(oe=jd.constant,Yd=ee=$d=0):(oe=0<jd.constant.length?jd.constant[0]:0,Yd=1<jd.constant.length?jd.constant[1]:0,ee=2<jd.constant.length?jd.constant[2]:0,$d=3<jd.constant.length?jd.constant[3]:0)):(kd=ha(jd.buffer)?J.createStream(34962,jd.buffer):J.getBuffer(jd.buffer),
be="type"in jd?Ld[jd.type]:kd.dtype,Bd=!!jd.normalized,me=jd.size|0,we=jd.offset|0,ce=jd.stride|0,Ad=jd.divisor|0);Ac=ia.location;Wc=Y[Ac];if(1===ve){Wc.buffer||y.enableVertexAttribArray(Ac);pe=me||1;if(Wc.type!==be||Wc.size!==pe||Wc.buffer!==kd||Wc.normalized!==Bd||Wc.offset!==we||Wc.stride!==ce)y.bindBuffer(34962,kd.buffer),y.vertexAttribPointer(Ac,pe,be,Bd,ce,we),Wc.type=be,Wc.size=pe,Wc.buffer=kd,Wc.normalized=Bd,Wc.offset=we,Wc.stride=ce;Wc.divisor!==Ad&&(M.vertexAttribDivisorANGLE(Ac,Ad),Wc.divisor=
Ad)}else if(Wc.buffer&&(y.disableVertexAttribArray(Ac),Wc.buffer=null),Wc.x!==oe||Wc.y!==Yd||Wc.z!==ee||Wc.w!==$d)y.vertexAttrib4f(Ac,oe,Yd,ee,$d),Wc.x=oe,Wc.y=Yd,Wc.z=ee,Wc.w=$d;y.uniform1i(t.location,!1);y.uniform1f(Ua.location,ja.pixelRatio);ie=e.scale;y.uniform2f(V.location,ie[0],ie[1]);Ed=e.scaleFract;y.uniform2f(pb.location,Ed[0],Ed[1]);Jd=e.translate;y.uniform2f(ma.location,Jd[0],Jd[1]);Md=e.translateFract;y.uniform2f(Rb.location,Md[0],Md[1]);Nd=B.call(this,ja,e,0);y.uniform2f(La.location,
Nd[0],Nd[1]);y.uniform1f(va.location,e.opacity);y.uniform1i($b.location,v.bind());(fe=e.markerTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);De=fe._texture;y.uniform1i(ba.location,De.bind());xe=e.elements;ne=null;(ne=(Ye=ha(xe))?ab.createStream(xe):ab.getElements(xe))&&y.bindBuffer(34963,ne.buffer.buffer);Oe=e.offset;if(Ke=e.count)qe=Lb.instances,0<qe?ne?M.drawElementsInstancedANGLE(0,Ke,ne.type,Oe<<(ne.type-5121>>1),qe):M.drawArraysInstancedANGLE(0,Oe,Ke,qe):0>qe&&(ne?y.drawElements(0,
Ke,ne.type,Oe<<(ne.type-5121>>1)):y.drawArrays(0,Oe,Ke)),Ca.dirty=!0,oa.setVAO(null),ja.viewportWidth=z,ja.viewportHeight=A,H&&(l.cpuTime+=performance.now()-O),Q&&J.destroyStream(P),Wa&&J.destroyStream(pa),jb&&J.destroyStream(Na),hb&&J.destroyStream(Ha),Ea&&J.destroyStream(sb),Cb&&J.destroyStream(ub),Nb&&J.destroyStream(Qb),gc&&J.destroyStream(Xc),bd&&J.destroyStream(kd),v.unbind(),De.unbind(),Ye&&ab.destroyStream(ne)},scope:function(a,b,c){var d,f,e,n,m,p,r,t,v,x,y,aa,u,R,E,F,B,L,M,H,Y,Z,S,Q,T,V,
X,ba,wa,ca,ia,la,oa,pa,Da,ma,qa,Ia,sa,ka,va,La,zb,Pa,Ua,$a,Ma,qb,vb,jb,Na,yc,Hb,pb,fb,gb,vd,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,rc,Jb,Za,Vb,ya,Zb,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,Rb,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,$b,vc,oc,Nc,tc,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,hc,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,Vc,Yc,xd,ae,Hd,Wd,Kd,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,de,re,te,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,je,xe,ne,Ye,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,
Ue,Xe,Pe,Le,We,Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf,rf,of,sf,Cf,Df,Me,ze,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,df,Ze,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,$e,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;d=a.viewport;f=d.x|0;e=d.y|0;n="width"in d?d.width|0:ja.framebufferWidth-f;m="height"in d?d.height|0:ja.framebufferHeight-e;p=ja.viewportWidth;ja.viewportWidth=n;r=ja.viewportHeight;ja.viewportHeight=
m;t=Xd[0];Xd[0]=f;v=Xd[1];Xd[1]=e;x=Xd[2];Xd[2]=n;y=Xd[3];Xd[3]=m;aa=D[0];D[0]=0;u=D[1];D[1]=0;R=D[2];D[2]=0;E=D[3];D[3]=1;F=ta.blend_enable;ta.blend_enable=!0;B=xa[0];xa[0]=770;L=xa[1];xa[1]=771;M=xa[2];xa[2]=773;H=xa[3];xa[3]=1;Y=ta.depth_enable;ta.depth_enable=!1;Z=a.viewport;S=Z.x|0;Q=Z.y|0;T="width"in Z?Z.width|0:ja.framebufferWidth-S;V="height"in Z?Z.height|0:ja.framebufferHeight-Q;X=ge[0];ge[0]=S;ba=ge[1];ge[1]=Q;wa=ge[2];ge[2]=T;ca=ge[3];ge[3]=V;ia=ta.scissor_enable;ta.scissor_enable=!0;la=
ta.stencil_enable;ta.stencil_enable=!1;if(oa=Ca.profile)pa=performance.now(),l.count++;Da=a.elements;ma=null;ma=(qa=ha(Da))?ab.createStream(Da):ab.getElements(Da);Ia=Lb.elements;Lb.elements=ma;sa=a.offset;ka=Lb.offset;Lb.offset=sa;va=a.count;La=Lb.count;Lb.count=va;zb=Lb.primitive;Lb.primitive=0;Pa=fa[45];fa[45]=!1;Ua=a.markerTexture;$a=fa[48];fa[48]=Ua;Ma=a.opacity;qb=fa[10];fa[10]=Ma;vb=C.call(this,ja,a,c);jb=fa[46];fa[46]=vb;Na=fa[47];fa[47]=O;yc=ja.pixelRatio;Hb=fa[34];fa[34]=yc;pb=a.scale;fb=
fa[6];fa[6]=pb;gb=a.scaleFract;vd=fa[7];fa[7]=gb;dc=a.translate;lb=fa[8];fa[8]=dc;mb=a.translateFract;ra=fa[9];fa[9]=mb;rb=A.call(this,ja,a,c);ua=!1;Ta=null;cb=0;Aa=!1;Ha=hb=0;Bb=1;Ab=0;Qa=5126;Vb=Za=Jb=rc=0;ha(rb)?(ua=!0,Ta=J.createStream(34962,rb),Qa=Ta.dtype):(Ta=J.getBuffer(rb))?Qa=Ta.dtype:"constant"in rb?(Bb=2,"number"===typeof rb.constant?(Jb=rb.constant,Za=Vb=rc=0):(Jb=0<rb.constant.length?rb.constant[0]:0,Za=1<rb.constant.length?rb.constant[1]:0,Vb=2<rb.constant.length?rb.constant[2]:0,rc=
3<rb.constant.length?rb.constant[3]:0)):(Ta=ha(rb.buffer)?J.createStream(34962,rb.buffer):J.getBuffer(rb.buffer),Qa="type"in rb?Ld[rb.type]:Ta.dtype,Aa=!!rb.normalized,Ha=rb.size|0,hb=rb.offset|0,Ab=rb.stride|0,cb=rb.divisor|0);ya=I.buffer;I.buffer=Ta;Zb=I.divisor;I.divisor=cb;Ja=I.normalized;I.normalized=Aa;Ob=I.offset;I.offset=hb;ib=I.size;I.size=Ha;kb=I.state;I.state=Bb;za=I.stride;I.stride=Ab;ec=I.type;I.type=Qa;Ea=I.w;I.w=rc;sb=I.x;I.x=Jb;tb=I.y;I.y=Za;Xa=I.z;I.z=Vb;Ya=ea.call(this,ja,a,c);nc=
!1;Rb=null;wc=0;Va=!1;Rc=Mb=0;Fa=1;zc=0;Oa=5126;Cb=wb=nb=Ba=0;ha(Ya)?(nc=!0,Rb=J.createStream(34962,Ya),Oa=Rb.dtype):(Rb=J.getBuffer(Ya))?Oa=Rb.dtype:"constant"in Ya?(Fa=2,"number"===typeof Ya.constant?(nb=Ya.constant,wb=Cb=Ba=0):(nb=0<Ya.constant.length?Ya.constant[0]:0,wb=1<Ya.constant.length?Ya.constant[1]:0,Cb=2<Ya.constant.length?Ya.constant[2]:0,Ba=3<Ya.constant.length?Ya.constant[3]:0)):(Rb=ha(Ya.buffer)?J.createStream(34962,Ya.buffer):J.getBuffer(Ya.buffer),Oa="type"in Ya?Ld[Ya.type]:Rb.dtype,
Va=!!Ya.normalized,Rc=Ya.size|0,Mb=Ya.offset|0,zc=Ya.stride|0,wc=Ya.divisor|0);ub=N.buffer;N.buffer=Rb;xc=N.divisor;N.divisor=wc;xb=N.normalized;N.normalized=Va;$b=N.offset;N.offset=Mb;vc=N.size;N.size=Rc;oc=N.state;N.state=Fa;Nc=N.stride;N.stride=zc;tc=N.type;N.type=Oa;dd=N.w;N.w=Ba;Wb=N.x;N.x=nb;cc=N.y;N.y=wb;Pb=N.z;N.z=Cb;Ga=Jc.call(this,ja,a,c);ac=!1;ob=null;yb=0;Nb=!1;fc=Qb=0;ic=1;hc=0;Dc=5126;$c=Oc=Fc=Ec=0;ha(Ga)?(ac=!0,ob=J.createStream(34962,Ga),Dc=ob.dtype):(ob=J.getBuffer(Ga))?Dc=ob.dtype:
"constant"in Ga?(ic=2,"number"===typeof Ga.constant?(Fc=Ga.constant,Oc=$c=Ec=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,Oc=1<Ga.constant.length?Ga.constant[1]:0,$c=2<Ga.constant.length?Ga.constant[2]:0,Ec=3<Ga.constant.length?Ga.constant[3]:0)):(ob=ha(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Dc="type"in Ga?Ld[Ga.type]:ob.dtype,Nb=!!Ga.normalized,fc=Ga.size|0,Qb=Ga.offset|0,hc=Ga.stride|0,yb=Ga.divisor|0);Tc=q.buffer;q.buffer=ob;Pc=q.divisor;q.divisor=yb;Kb=q.normalized;
q.normalized=Nb;Fb=q.offset;q.offset=Qb;Qc=q.size;q.size=fc;Ic=q.state;q.state=ic;Uc=q.stride;q.stride=hc;gc=q.type;q.type=Dc;Xc=q.w;q.w=Ec;od=q.x;q.x=Fc;id=q.y;q.y=Oc;Vc=q.z;q.z=$c;Yc=z.call(this,ja,a,c);xd=!1;ae=null;Hd=0;Wd=!1;Fd=Kd=0;Dd=1;ed=0;Gc=5126;kd=bd=jd=pd=0;ha(Yc)?(xd=!0,ae=J.createStream(34962,Yc),Gc=ae.dtype):(ae=J.getBuffer(Yc))?Gc=ae.dtype:"constant"in Yc?(Dd=2,"number"===typeof Yc.constant?(jd=Yc.constant,bd=kd=pd=0):(jd=0<Yc.constant.length?Yc.constant[0]:0,bd=1<Yc.constant.length?
Yc.constant[1]:0,kd=2<Yc.constant.length?Yc.constant[2]:0,pd=3<Yc.constant.length?Yc.constant[3]:0)):(ae=ha(Yc.buffer)?J.createStream(34962,Yc.buffer):J.getBuffer(Yc.buffer),Gc="type"in Yc?Ld[Yc.type]:ae.dtype,Wd=!!Yc.normalized,Fd=Yc.size|0,Kd=Yc.offset|0,ed=Yc.stride|0,Hd=Yc.divisor|0);Ad=k.buffer;k.buffer=ae;Bd=k.divisor;k.divisor=Hd;de=k.normalized;k.normalized=Wd;re=k.offset;k.offset=Kd;te=k.size;k.size=Fd;ce=k.state;k.state=Dd;be=k.stride;k.stride=ed;$d=k.type;k.type=Gc;oe=k.w;k.w=pd;Yd=k.x;
k.x=jd;ee=k.y;k.y=bd;Ac=k.z;k.z=kd;Wc=da.call(this,ja,a,c);pe=!1;ie=null;Ed=0;Jd=!1;Nd=Md=0;fe=1;je=0;xe=5126;Ke=Oe=Ye=ne=0;ha(Wc)?(pe=!0,ie=J.createStream(34962,Wc),xe=ie.dtype):(ie=J.getBuffer(Wc))?xe=ie.dtype:"constant"in Wc?(fe=2,"number"===typeof Wc.constant?(Ye=Wc.constant,Oe=Ke=ne=0):(Ye=0<Wc.constant.length?Wc.constant[0]:0,Oe=1<Wc.constant.length?Wc.constant[1]:0,Ke=2<Wc.constant.length?Wc.constant[2]:0,ne=3<Wc.constant.length?Wc.constant[3]:0)):(ie=ha(Wc.buffer)?J.createStream(34962,Wc.buffer):
J.getBuffer(Wc.buffer),xe="type"in Wc?Ld[Wc.type]:ie.dtype,Jd=!!Wc.normalized,Nd=Wc.size|0,Md=Wc.offset|0,je=Wc.stride|0,Ed=Wc.divisor|0);qe=P.buffer;P.buffer=ie;Ae=P.divisor;P.divisor=Ed;Ee=P.normalized;P.normalized=Jd;Fe=P.offset;P.offset=Md;Ge=P.size;P.size=Nd;Be=P.state;P.state=fe;Gd=P.stride;P.stride=je;Qd=P.type;P.type=xe;Vd=P.w;P.w=ne;Zd=P.x;P.x=Ye;He=P.y;P.y=Oe;zd=P.z;P.z=Ke;Od=K.call(this,ja,a,c);ye=!1;Ie=null;Ue=0;Xe=!1;Le=Pe=0;We=1;Te=0;Qe=5126;Se=Td=Pd=Re=0;ha(Od)?(ye=!0,Ie=J.createStream(34962,
Od),Qe=Ie.dtype):(Ie=J.getBuffer(Od))?Qe=Ie.dtype:"constant"in Od?(We=2,"number"===typeof Od.constant?(Pd=Od.constant,Td=Se=Re=0):(Pd=0<Od.constant.length?Od.constant[0]:0,Td=1<Od.constant.length?Od.constant[1]:0,Se=2<Od.constant.length?Od.constant[2]:0,Re=3<Od.constant.length?Od.constant[3]:0)):(Ie=ha(Od.buffer)?J.createStream(34962,Od.buffer):J.getBuffer(Od.buffer),Qe="type"in Od?Ld[Od.type]:Ie.dtype,Xe=!!Od.normalized,Le=Od.size|0,Pe=Od.offset|0,Te=Od.stride|0,Ue=Od.divisor|0);hf=w.buffer;w.buffer=
Ie;mf=w.divisor;w.divisor=Ue;cf=w.normalized;w.normalized=Xe;jf=w.offset;w.offset=Pe;kf=w.size;w.size=Le;lf=w.state;w.state=We;rf=w.stride;w.stride=Te;of=w.type;w.type=Qe;sf=w.w;w.w=Re;Cf=w.x;w.x=Pd;Df=w.y;w.y=Td;Me=w.z;w.z=Se;ze=na.call(this,ja,a,c);pf=!1;qf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ha(ze)?(pf=!0,qf=J.createStream(34962,ze),yf=qf.dtype):(qf=J.getBuffer(ze))?yf=qf.dtype:"constant"in ze?(Gf=2,"number"===typeof ze.constant?(zf=ze.constant,Af=Jf=wf=0):(zf=0<ze.constant.length?
ze.constant[0]:0,Af=1<ze.constant.length?ze.constant[1]:0,Jf=2<ze.constant.length?ze.constant[2]:0,wf=3<ze.constant.length?ze.constant[3]:0)):(qf=ha(ze.buffer)?J.createStream(34962,ze.buffer):J.getBuffer(ze.buffer),yf="type"in ze?Ld[ze.type]:qf.dtype,Hf=!!ze.normalized,Ff=ze.size|0,Bf=ze.offset|0,xf=ze.stride|0,Ef=ze.divisor|0);Kf=G.buffer;G.buffer=qf;Lf=G.divisor;G.divisor=Ef;Mf=G.normalized;G.normalized=Hf;uf=G.offset;G.offset=Bf;Rf=G.size;G.size=Ff;If=G.state;G.state=Gf;vf=G.stride;G.stride=xf;
dg=G.type;G.type=yf;Sf=G.w;G.w=wf;Tf=G.x;G.x=zf;qg=G.y;G.y=Af;df=G.z;G.z=Jf;Ze=ga.call(this,ja,a,c);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ha(Ze)?(Nf=!0,Of=J.createStream(34962,Ze),Uf=Of.dtype):(Of=J.getBuffer(Ze))?Uf=Of.dtype:"constant"in Ze?(ig=2,"number"===typeof Ze.constant?(Yf=Ze.constant,Zf=jg=Xf=0):(Yf=0<Ze.constant.length?Ze.constant[0]:0,Zf=1<Ze.constant.length?Ze.constant[1]:0,jg=2<Ze.constant.length?Ze.constant[2]:0,Xf=3<Ze.constant.length?Ze.constant[3]:0)):(Of=
ha(Ze.buffer)?J.createStream(34962,Ze.buffer):J.getBuffer(Ze.buffer),Uf="type"in Ze?Ld[Ze.type]:Of.dtype,fg=!!Ze.normalized,hg=Ze.size|0,gg=Ze.offset|0,Wf=Ze.stride|0,eg=Ze.divisor|0);rg=h.buffer;h.buffer=Of;sg=h.divisor;h.divisor=eg;tg=h.normalized;h.normalized=fg;ug=h.offset;h.offset=gg;vg=h.size;h.size=hg;wg=h.state;h.state=ig;xg=h.stride;h.stride=Wf;yg=h.type;h.type=Uf;zg=h.w;h.w=Xf;Ag=h.x;h.x=Yf;Bg=h.y;h.y=Zf;ef=h.z;h.z=jg;$e=g.call(this,ja,a,c);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=
5126;pg=cg=bg=ag=0;ha($e)?(Pf=!0,Qf=J.createStream(34962,$e),Vf=Qf.dtype):(Qf=J.getBuffer($e))?Vf=Qf.dtype:"constant"in $e?(og=2,"number"===typeof $e.constant?(bg=$e.constant,cg=pg=ag=0):(bg=0<$e.constant.length?$e.constant[0]:0,cg=1<$e.constant.length?$e.constant[1]:0,pg=2<$e.constant.length?$e.constant[2]:0,ag=3<$e.constant.length?$e.constant[3]:0)):(Qf=ha($e.buffer)?J.createStream(34962,$e.buffer):J.getBuffer($e.buffer),Vf="type"in $e?Ld[$e.type]:Qf.dtype,lg=!!$e.normalized,ng=$e.size|0,mg=$e.offset|
0,$f=$e.stride|0,kg=$e.divisor|0);Cg=U.buffer;U.buffer=Qf;Dg=U.divisor;U.divisor=kg;Eg=U.normalized;U.normalized=lg;Fg=U.offset;U.offset=mg;Gg=U.size;U.size=ng;Hg=U.state;U.state=og;Ig=U.stride;U.stride=$f;Jg=U.type;U.type=Vf;Kg=U.w;U.w=ag;Lg=U.x;U.x=bg;Mg=U.y;U.y=cg;Ng=U.z;U.z=pg;Og=W.vert;W.vert=44;Pg=W.frag;W.frag=43;Ca.dirty=!0;b(ja,a,c);ja.viewportWidth=p;ja.viewportHeight=r;Xd[0]=t;Xd[1]=v;Xd[2]=x;Xd[3]=y;D[0]=aa;D[1]=u;D[2]=R;D[3]=E;ta.blend_enable=F;xa[0]=B;xa[1]=L;xa[2]=M;xa[3]=H;ta.depth_enable=
Y;ge[0]=X;ge[1]=ba;ge[2]=wa;ge[3]=ca;ta.scissor_enable=ia;ta.stencil_enable=la;oa&&(l.cpuTime+=performance.now()-pa);qa&&ab.destroyStream(ma);Lb.elements=Ia;Lb.offset=ka;Lb.count=La;Lb.primitive=zb;fa[45]=Pa;fa[48]=$a;fa[10]=qb;fa[46]=jb;fa[47]=Na;fa[34]=Hb;fa[6]=fb;fa[7]=vd;fa[8]=lb;fa[9]=ra;ua&&J.destroyStream(Ta);I.buffer=ya;I.divisor=Zb;I.normalized=Ja;I.offset=Ob;I.size=ib;I.state=kb;I.stride=za;I.type=ec;I.w=Ea;I.x=sb;I.y=tb;I.z=Xa;nc&&J.destroyStream(Rb);N.buffer=ub;N.divisor=xc;N.normalized=
xb;N.offset=$b;N.size=vc;N.state=oc;N.stride=Nc;N.type=tc;N.w=dd;N.x=Wb;N.y=cc;N.z=Pb;ac&&J.destroyStream(ob);q.buffer=Tc;q.divisor=Pc;q.normalized=Kb;q.offset=Fb;q.size=Qc;q.state=Ic;q.stride=Uc;q.type=gc;q.w=Xc;q.x=od;q.y=id;q.z=Vc;xd&&J.destroyStream(ae);k.buffer=Ad;k.divisor=Bd;k.normalized=de;k.offset=re;k.size=te;k.state=ce;k.stride=be;k.type=$d;k.w=oe;k.x=Yd;k.y=ee;k.z=Ac;pe&&J.destroyStream(ie);P.buffer=qe;P.divisor=Ae;P.normalized=Ee;P.offset=Fe;P.size=Ge;P.state=Be;P.stride=Gd;P.type=Qd;
P.w=Vd;P.x=Zd;P.y=He;P.z=zd;ye&&J.destroyStream(Ie);w.buffer=hf;w.divisor=mf;w.normalized=cf;w.offset=jf;w.size=kf;w.state=lf;w.stride=rf;w.type=of;w.w=sf;w.x=Cf;w.y=Df;w.z=Me;pf&&J.destroyStream(qf);G.buffer=Kf;G.divisor=Lf;G.normalized=Mf;G.offset=uf;G.size=Rf;G.state=If;G.stride=vf;G.type=dg;G.w=Sf;G.x=Tf;G.y=qg;G.z=df;Nf&&J.destroyStream(Of);h.buffer=rg;h.divisor=sg;h.normalized=tg;h.offset=ug;h.size=vg;h.state=wg;h.stride=xg;h.type=yg;h.w=zg;h.x=Ag;h.y=Bg;h.z=ef;Pf&&J.destroyStream(Qf);U.buffer=
Cg;U.divisor=Dg;U.normalized=Eg;U.offset=Fg;U.size=Gg;U.state=Hg;U.stride=Ig;U.type=Jg;U.w=Kg;U.x=Lg;U.y=Mg;U.z=Ng;W.vert=Og;W.frag=Pg;Ca.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(e,l,c,b,f,a,n,d,p,aa,u,r,B,v,C,O,A,I,ea,N,Jc,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,gb,hc,sa,Pa,X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma,Rb,oc,tc,vd){var yc,Y,J,
ja,Ca,Lb,ab,Vc,E,y,ha,ta,W,fa,oa,D,x,Z,F,xa,Da,m,rc,Ia,S,Hb,zb,Ue,je,ge,ae,Hd,re,xd,de,te,Kd,Xd,Wd;yc=e.attributes;Y=e.buffer;J=e.context;ja=e.current;Ca=e.draw;Lb=e.elements;ab=e.extensions;Vc=e.framebuffer;E=e.gl;y=e.isBufferArgs;ha=e.next;ta=e.shader;W=e.uniforms;fa=e.vao;oa=ha.blend_color;D=ja.blend_color;x=ha.blend_equation;Z=ja.blend_equation;F=ha.blend_func;xa=ja.blend_func;Da=ha.colorMask;m=ja.colorMask;rc=ha.depth_range;Ia=ja.depth_range;S=ha.polygonOffset_offset;Hb=ja.polygonOffset_offset;
zb=ha.sample_coverage;Ue=ja.sample_coverage;je=ha.scissor_box;ge=ja.scissor_box;ae=ha.stencil_func;Hd=ja.stencil_func;re=ha.stencil_opBack;xd=ja.stencil_opBack;de=ha.stencil_opFront;te=ja.stencil_opFront;Kd=ha.viewport;Xd=ja.viewport;Wd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,b){var c,d,f,e,g,h;c=Vc.next;c!==Vc.cur&&(c?E.bindFramebuffer(36160,c.framebuffer):E.bindFramebuffer(36160,null),Vc.cur=c);if(ja.dirty){var k,n,p,
r,q,v,w,C,z,aa,u,A,R,B,F,G,I,K,N,O,P,U,W,da,wa,ga,ta,oa,na,pa,ea,db,Ra,Gb;k=ha.dither;k!==ja.dither&&(k?E.enable(3024):E.disable(3024),ja.dither=k);n=x[0];p=x[1];if(n!==Z[0]||p!==Z[1])E.blendEquationSeparate(n,p),Z[0]=n,Z[1]=p;r=ha.depth_func;r!==ja.depth_func&&(E.depthFunc(r),ja.depth_func=r);q=rc[0];v=rc[1];if(q!==Ia[0]||v!==Ia[1])E.depthRange(q,v),Ia[0]=q,Ia[1]=v;w=ha.depth_mask;w!==ja.depth_mask&&(E.depthMask(w),ja.depth_mask=w);C=Da[0];z=Da[1];aa=Da[2];u=Da[3];if(C!==m[0]||z!==m[1]||aa!==m[2]||
u!==m[3])E.colorMask(C,z,aa,u),m[0]=C,m[1]=z,m[2]=aa,m[3]=u;A=ha.cull_enable;A!==ja.cull_enable&&(A?E.enable(2884):E.disable(2884),ja.cull_enable=A);R=ha.cull_face;R!==ja.cull_face&&(E.cullFace(R),ja.cull_face=R);B=ha.frontFace;B!==ja.frontFace&&(E.frontFace(B),ja.frontFace=B);F=ha.lineWidth;F!==ja.lineWidth&&(E.lineWidth(F),ja.lineWidth=F);G=ha.polygonOffset_enable;G!==ja.polygonOffset_enable&&(G?E.enable(32823):E.disable(32823),ja.polygonOffset_enable=G);I=S[0];K=S[1];if(I!==Hb[0]||K!==Hb[1])E.polygonOffset(I,
K),Hb[0]=I,Hb[1]=K;N=ha.sample_alpha;N!==ja.sample_alpha&&(N?E.enable(32926):E.disable(32926),ja.sample_alpha=N);O=ha.sample_enable;O!==ja.sample_enable&&(O?E.enable(32928):E.disable(32928),ja.sample_enable=O);P=zb[0];U=zb[1];if(P!==Ue[0]||U!==Ue[1])E.sampleCoverage(P,U),Ue[0]=P,Ue[1]=U;W=ha.stencil_mask;W!==ja.stencil_mask&&(E.stencilMask(W),ja.stencil_mask=W);da=ae[0];wa=ae[1];ga=ae[2];if(da!==Hd[0]||wa!==Hd[1]||ga!==Hd[2])E.stencilFunc(da,wa,ga),Hd[0]=da,Hd[1]=wa,Hd[2]=ga;ta=de[0];oa=de[1];na=
de[2];pa=de[3];if(ta!==te[0]||oa!==te[1]||na!==te[2]||pa!==te[3])E.stencilOpSeparate(ta,oa,na,pa),te[0]=ta,te[1]=oa,te[2]=na,te[3]=pa;ea=re[0];db=re[1];Ra=re[2];Gb=re[3];if(ea!==xd[0]||db!==xd[1]||Ra!==xd[2]||Gb!==xd[3])E.stencilOpSeparate(ea,db,Ra,Gb),xd[0]=ea,xd[1]=db,xd[2]=Ra,xd[3]=Gb}E.blendColor(0,0,0,1);D[0]=0;D[1]=0;D[2]=0;D[3]=1;E.enable(3042);ja.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;E.disable(2929);ja.depth_enable=!1;E.enable(3089);ja.scissor_enable=
!0;E.disable(2960);ja.stencil_enable=!1;if(d=ja.profile)f=performance.now(),l.count+=b;E.useProgram(ka.program);e=ab.angle_instanced_arrays;var eb;fa.setVAO(null);E.uniform1i(t.location,!1);E.uniform1i(La.location,qa.bind());eb=Ca.instances;for(g=0;g<b;++g){h=a[g];var pc,Sb,Jc,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,Kd,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,je,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,
Nb,Qb,fc,ic,Ne,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,tf,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,Pe,Le,We,Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf,rf,of,sf,Cf,Df,Me,ze,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;pc=h.viewport;Sb=pc.x|0;Jc=pc.y|0;kc="width"in pc?pc.width|0:J.framebufferWidth-Sb;Tb="height"in pc?pc.height|0:J.framebufferHeight-Jc;hd=
J.viewportWidth;J.viewportWidth=kc;Ub=J.viewportHeight;J.viewportHeight=Tb;E.viewport(Sb,Jc,kc,Tb);Xd[0]=Sb;Xd[1]=Jc;Xd[2]=kc;Xd[3]=Tb;Ma=h.viewport;qb=Ma.x|0;vb=Ma.y|0;jb="width"in Ma?Ma.width|0:J.framebufferWidth-qb;Na="height"in Ma?Ma.height|0:J.framebufferHeight-vb;E.scissor(qb,vb,jb,Na);ge[0]=qb;ge[1]=vb;ge[2]=jb;ge[3]=Na;qc=la.call(this,J,h,g);Yb=!1;fd=null;fb=0;mc=!1;dc=ad=0;lb=1;mb=0;ra=5126;cb=Ta=ua=rb=0;y(qc)?(Yb=!0,fd=Y.createStream(34962,qc),ra=fd.dtype):(fd=Y.getBuffer(qc))?ra=fd.dtype:
"constant"in qc?(lb=2,"number"===typeof qc.constant?(ua=qc.constant,Ta=cb=rb=0):(ua=0<qc.constant.length?qc.constant[0]:0,Ta=1<qc.constant.length?qc.constant[1]:0,cb=2<qc.constant.length?qc.constant[2]:0,rb=3<qc.constant.length?qc.constant[3]:0)):(fd=y(qc.buffer)?Y.createStream(34962,qc.buffer):Y.getBuffer(qc.buffer),ra="type"in qc?Wd[qc.type]:fd.dtype,mc=!!qc.normalized,dc=qc.size|0,ad=qc.offset|0,mb=qc.stride|0,fb=qc.divisor|0);Aa=Rb.location;hb=yc[Aa];if(1===lb){hb.buffer||E.enableVertexAttribArray(Aa);
Ha=dc||1;if(hb.type!==ra||hb.size!==Ha||hb.buffer!==fd||hb.normalized!==mc||hb.offset!==ad||hb.stride!==mb)E.bindBuffer(34962,fd.buffer),E.vertexAttribPointer(Aa,Ha,ra,mc,mb,ad),hb.type=ra,hb.size=Ha,hb.buffer=fd,hb.normalized=mc,hb.offset=ad,hb.stride=mb;hb.divisor!==fb&&(e.vertexAttribDivisorANGLE(Aa,fb),hb.divisor=fb)}else if(hb.buffer&&(E.disableVertexAttribArray(Aa),hb.buffer=null),hb.x!==ua||hb.y!==Ta||hb.z!==cb||hb.w!==rb)E.vertexAttrib4f(Aa,ua,Ta,cb,rb),hb.x=ua,hb.y=Ta,hb.z=cb,hb.w=rb;Bb=
gb.call(this,J,h,g);Ab=!1;Qa=null;Lc=0;Jb=!1;Vb=Za=0;ya=1;Kd=0;Ja=5126;za=kb=ib=Ob=0;y(Bb)?(Ab=!0,Qa=Y.createStream(34962,Bb),Ja=Qa.dtype):(Qa=Y.getBuffer(Bb))?Ja=Qa.dtype:"constant"in Bb?(ya=2,"number"===typeof Bb.constant?(ib=Bb.constant,kb=za=Ob=0):(ib=0<Bb.constant.length?Bb.constant[0]:0,kb=1<Bb.constant.length?Bb.constant[1]:0,za=2<Bb.constant.length?Bb.constant[2]:0,Ob=3<Bb.constant.length?Bb.constant[3]:0)):(Qa=y(Bb.buffer)?Y.createStream(34962,Bb.buffer):Y.getBuffer(Bb.buffer),Ja="type"in
Bb?Wd[Bb.type]:Qa.dtype,Jb=!!Bb.normalized,Vb=Bb.size|0,Za=Bb.offset|0,Kd=Bb.stride|0,Lc=Bb.divisor|0);ec=tc.location;Ea=yc[ec];if(1===ya){Ea.buffer||E.enableVertexAttribArray(ec);sb=Vb||1;if(Ea.type!==Ja||Ea.size!==sb||Ea.buffer!==Qa||Ea.normalized!==Jb||Ea.offset!==Za||Ea.stride!==Kd)E.bindBuffer(34962,Qa.buffer),E.vertexAttribPointer(ec,sb,Ja,Jb,Kd,Za),Ea.type=Ja,Ea.size=sb,Ea.buffer=Qa,Ea.normalized=Jb,Ea.offset=Za,Ea.stride=Kd;Ea.divisor!==Lc&&(e.vertexAttribDivisorANGLE(ec,Lc),Ea.divisor=Lc)}else if(Ea.buffer&&
(E.disableVertexAttribArray(ec),Ea.buffer=null),Ea.x!==ib||Ea.y!==kb||Ea.z!==za||Ea.w!==Ob)E.vertexAttrib4f(ec,ib,kb,za,Ob),Ea.x=ib,Ea.y=kb,Ea.z=za,Ea.w=Ob;tb=hc.call(this,J,h,g);Xa=!1;Ya=null;nc=0;cd=!1;Va=wc=0;Mb=1;Rc=0;Fa=5126;nb=Ba=Oa=zc=0;y(tb)?(Xa=!0,Ya=Y.createStream(34962,tb),Fa=Ya.dtype):(Ya=Y.getBuffer(tb))?Fa=Ya.dtype:"constant"in tb?(Mb=2,"number"===typeof tb.constant?(Oa=tb.constant,Ba=nb=zc=0):(Oa=0<tb.constant.length?tb.constant[0]:0,Ba=1<tb.constant.length?tb.constant[1]:0,nb=2<tb.constant.length?
tb.constant[2]:0,zc=3<tb.constant.length?tb.constant[3]:0)):(Ya=y(tb.buffer)?Y.createStream(34962,tb.buffer):Y.getBuffer(tb.buffer),Fa="type"in tb?Wd[tb.type]:Ya.dtype,cd=!!tb.normalized,Va=tb.size|0,wc=tb.offset|0,Rc=tb.stride|0,nc=tb.divisor|0);wb=oc.location;Cb=yc[wb];if(1===Mb){Cb.buffer||E.enableVertexAttribArray(wb);ub=Va||1;if(Cb.type!==Fa||Cb.size!==ub||Cb.buffer!==Ya||Cb.normalized!==cd||Cb.offset!==wc||Cb.stride!==Rc)E.bindBuffer(34962,Ya.buffer),E.vertexAttribPointer(wb,ub,Fa,cd,Rc,wc),
Cb.type=Fa,Cb.size=ub,Cb.buffer=Ya,Cb.normalized=cd,Cb.offset=wc,Cb.stride=Rc;Cb.divisor!==nc&&(e.vertexAttribDivisorANGLE(wb,nc),Cb.divisor=nc)}else if(Cb.buffer&&(E.disableVertexAttribArray(wb),Cb.buffer=null),Cb.x!==Oa||Cb.y!==Ba||Cb.z!==nb||Cb.w!==zc)E.vertexAttrib4f(wb,Oa,Ba,nb,zc),Cb.x=Oa,Cb.y=Ba,Cb.z=nb,Cb.w=zc;xc=sa.call(this,J,h,g);xb=!1;Id=null;vc=0;je=!1;nd=Nc=0;dd=1;Wb=0;cc=5126;ob=ac=Ga=Pb=0;y(xc)?(xb=!0,Id=Y.createStream(34962,xc),cc=Id.dtype):(Id=Y.getBuffer(xc))?cc=Id.dtype:"constant"in
xc?(dd=2,"number"===typeof xc.constant?(Ga=xc.constant,ac=ob=Pb=0):(Ga=0<xc.constant.length?xc.constant[0]:0,ac=1<xc.constant.length?xc.constant[1]:0,ob=2<xc.constant.length?xc.constant[2]:0,Pb=3<xc.constant.length?xc.constant[3]:0)):(Id=y(xc.buffer)?Y.createStream(34962,xc.buffer):Y.getBuffer(xc.buffer),cc="type"in xc?Wd[xc.type]:Id.dtype,je=!!xc.normalized,nd=xc.size|0,Nc=xc.offset|0,Wb=xc.stride|0,vc=xc.divisor|0);yb=vd.location;Nb=yc[yb];if(1===dd){Nb.buffer||E.enableVertexAttribArray(yb);Qb=
nd||1;if(Nb.type!==cc||Nb.size!==Qb||Nb.buffer!==Id||Nb.normalized!==je||Nb.offset!==Nc||Nb.stride!==Wb)E.bindBuffer(34962,Id.buffer),E.vertexAttribPointer(yb,Qb,cc,je,Wb,Nc),Nb.type=cc,Nb.size=Qb,Nb.buffer=Id,Nb.normalized=je,Nb.offset=Nc,Nb.stride=Wb;Nb.divisor!==vc&&(e.vertexAttribDivisorANGLE(yb,vc),Nb.divisor=vc)}else if(Nb.buffer&&(E.disableVertexAttribArray(yb),Nb.buffer=null),Nb.x!==Ga||Nb.y!==ac||Nb.z!==ob||Nb.w!==Pb)E.vertexAttrib4f(yb,Ga,ac,ob,Pb),Nb.x=Ga,Nb.y=ac,Nb.z=ob,Nb.w=Pb;fc=Pa.call(this,
J,h,g);ic=!1;Ne=null;Dc=0;Ec=!1;Oc=Fc=0;$c=1;Tc=0;Pc=5126;Ic=Qc=Fb=Kb=0;y(fc)?(ic=!0,Ne=Y.createStream(34962,fc),Pc=Ne.dtype):(Ne=Y.getBuffer(fc))?Pc=Ne.dtype:"constant"in fc?($c=2,"number"===typeof fc.constant?(Fb=fc.constant,Qc=Ic=Kb=0):(Fb=0<fc.constant.length?fc.constant[0]:0,Qc=1<fc.constant.length?fc.constant[1]:0,Ic=2<fc.constant.length?fc.constant[2]:0,Kb=3<fc.constant.length?fc.constant[3]:0)):(Ne=y(fc.buffer)?Y.createStream(34962,fc.buffer):Y.getBuffer(fc.buffer),Pc="type"in fc?Wd[fc.type]:
Ne.dtype,Ec=!!fc.normalized,Oc=fc.size|0,Fc=fc.offset|0,Tc=fc.stride|0,Dc=fc.divisor|0);Uc=pb.location;gc=yc[Uc];if(1===$c){gc.buffer||E.enableVertexAttribArray(Uc);Xc=Oc||1;if(gc.type!==Pc||gc.size!==Xc||gc.buffer!==Ne||gc.normalized!==Ec||gc.offset!==Fc||gc.stride!==Tc)E.bindBuffer(34962,Ne.buffer),E.vertexAttribPointer(Uc,Xc,Pc,Ec,Tc,Fc),gc.type=Pc,gc.size=Xc,gc.buffer=Ne,gc.normalized=Ec,gc.offset=Fc,gc.stride=Tc;gc.divisor!==Dc&&(e.vertexAttribDivisorANGLE(Uc,Dc),gc.divisor=Dc)}else if(gc.buffer&&
(E.disableVertexAttribArray(Uc),gc.buffer=null),gc.x!==Fb||gc.y!==Qc||gc.z!==Ic||gc.w!==Kb)E.vertexAttrib4f(Uc,Fb,Qc,Ic,Kb),gc.x=Fb,gc.y=Qc,gc.z=Ic,gc.w=Kb;od=X.call(this,J,h,g);id=!1;rd=null;Yc=0;tf=!1;he=Ud=0;se=1;le=0;Fd=5126;pd=Gc=ed=Dd=0;y(od)?(id=!0,rd=Y.createStream(34962,od),Fd=rd.dtype):(rd=Y.getBuffer(od))?Fd=rd.dtype:"constant"in od?(se=2,"number"===typeof od.constant?(ed=od.constant,Gc=pd=Dd=0):(ed=0<od.constant.length?od.constant[0]:0,Gc=1<od.constant.length?od.constant[1]:0,pd=2<od.constant.length?
od.constant[2]:0,Dd=3<od.constant.length?od.constant[3]:0)):(rd=y(od.buffer)?Y.createStream(34962,od.buffer):Y.getBuffer(od.buffer),Fd="type"in od?Wd[od.type]:rd.dtype,tf=!!od.normalized,he=od.size|0,Ud=od.offset|0,le=od.stride|0,Yc=od.divisor|0);jd=$a.location;bd=yc[jd];if(1===se){bd.buffer||E.enableVertexAttribArray(jd);kd=he||1;if(bd.type!==Fd||bd.size!==kd||bd.buffer!==rd||bd.normalized!==tf||bd.offset!==Ud||bd.stride!==le)E.bindBuffer(34962,rd.buffer),E.vertexAttribPointer(jd,kd,Fd,tf,le,Ud),
bd.type=Fd,bd.size=kd,bd.buffer=rd,bd.normalized=tf,bd.offset=Ud,bd.stride=le;bd.divisor!==Yc&&(e.vertexAttribDivisorANGLE(jd,Yc),bd.divisor=Yc)}else if(bd.buffer&&(E.disableVertexAttribArray(jd),bd.buffer=null),bd.x!==ed||bd.y!==Gc||bd.z!==pd||bd.w!==Dd)E.vertexAttrib4f(jd,ed,Gc,pd,Dd),bd.x=ed,bd.y=Gc,bd.z=pd,bd.w=Dd;Ad=H.call(this,J,h,g);Bd=!1;we=null;me=0;ve=!1;be=ce=0;$d=1;oe=0;Yd=5126;pe=Wc=Ac=ee=0;y(Ad)?(Bd=!0,we=Y.createStream(34962,Ad),Yd=we.dtype):(we=Y.getBuffer(Ad))?Yd=we.dtype:"constant"in
Ad?($d=2,"number"===typeof Ad.constant?(Ac=Ad.constant,Wc=pe=ee=0):(Ac=0<Ad.constant.length?Ad.constant[0]:0,Wc=1<Ad.constant.length?Ad.constant[1]:0,pe=2<Ad.constant.length?Ad.constant[2]:0,ee=3<Ad.constant.length?Ad.constant[3]:0)):(we=y(Ad.buffer)?Y.createStream(34962,Ad.buffer):Y.getBuffer(Ad.buffer),Yd="type"in Ad?Wd[Ad.type]:we.dtype,ve=!!Ad.normalized,be=Ad.size|0,ce=Ad.offset|0,oe=Ad.stride|0,me=Ad.divisor|0);ie=T.location;Ed=yc[ie];if(1===$d){Ed.buffer||E.enableVertexAttribArray(ie);Jd=be||
4;if(Ed.type!==Yd||Ed.size!==Jd||Ed.buffer!==we||Ed.normalized!==ve||Ed.offset!==ce||Ed.stride!==oe)E.bindBuffer(34962,we.buffer),E.vertexAttribPointer(ie,Jd,Yd,ve,oe,ce),Ed.type=Yd,Ed.size=Jd,Ed.buffer=we,Ed.normalized=ve,Ed.offset=ce,Ed.stride=oe;Ed.divisor!==me&&(e.vertexAttribDivisorANGLE(ie,me),Ed.divisor=me)}else if(Ed.buffer&&(E.disableVertexAttribArray(ie),Ed.buffer=null),Ed.x!==Ac||Ed.y!==Wc||Ed.z!==pe||Ed.w!==ee)E.vertexAttrib4f(ie,Ac,Wc,pe,ee),Ed.x=Ac,Ed.y=Wc,Ed.z=pe,Ed.w=ee;Md=L.call(this,
J,h,g);Nd=!1;fe=null;De=0;xe=!1;Ye=ne=0;Oe=1;Ke=0;qe=5126;Ge=Fe=Ee=Ae=0;y(Md)?(Nd=!0,fe=Y.createStream(34962,Md),qe=fe.dtype):(fe=Y.getBuffer(Md))?qe=fe.dtype:"constant"in Md?(Oe=2,"number"===typeof Md.constant?(Ee=Md.constant,Fe=Ge=Ae=0):(Ee=0<Md.constant.length?Md.constant[0]:0,Fe=1<Md.constant.length?Md.constant[1]:0,Ge=2<Md.constant.length?Md.constant[2]:0,Ae=3<Md.constant.length?Md.constant[3]:0)):(fe=y(Md.buffer)?Y.createStream(34962,Md.buffer):Y.getBuffer(Md.buffer),qe="type"in Md?Wd[Md.type]:
fe.dtype,xe=!!Md.normalized,Ye=Md.size|0,ne=Md.offset|0,Ke=Md.stride|0,De=Md.divisor|0);Be=Zb.location;Gd=yc[Be];if(1===Oe){Gd.buffer||E.enableVertexAttribArray(Be);Qd=Ye||4;if(Gd.type!==qe||Gd.size!==Qd||Gd.buffer!==fe||Gd.normalized!==xe||Gd.offset!==ne||Gd.stride!==Ke)E.bindBuffer(34962,fe.buffer),E.vertexAttribPointer(Be,Qd,qe,xe,Ke,ne),Gd.type=qe,Gd.size=Qd,Gd.buffer=fe,Gd.normalized=xe,Gd.offset=ne,Gd.stride=Ke;Gd.divisor!==De&&(e.vertexAttribDivisorANGLE(Be,De),Gd.divisor=De)}else if(Gd.buffer&&
(E.disableVertexAttribArray(Be),Gd.buffer=null),Gd.x!==Ee||Gd.y!==Fe||Gd.z!==Ge||Gd.w!==Ae)E.vertexAttrib4f(Be,Ee,Fe,Ge,Ae),Gd.x=Ee,Gd.y=Fe,Gd.z=Ge,Gd.w=Ae;Vd=Q.call(this,J,h,g);Zd=!1;He=null;zd=0;Od=!1;Ie=ye=0;gf=1;Xe=0;Pe=5126;Qe=Te=We=Le=0;y(Vd)?(Zd=!0,He=Y.createStream(34962,Vd),Pe=He.dtype):(He=Y.getBuffer(Vd))?Pe=He.dtype:"constant"in Vd?(gf=2,"number"===typeof Vd.constant?(We=Vd.constant,Te=Qe=Le=0):(We=0<Vd.constant.length?Vd.constant[0]:0,Te=1<Vd.constant.length?Vd.constant[1]:0,Qe=2<Vd.constant.length?
Vd.constant[2]:0,Le=3<Vd.constant.length?Vd.constant[3]:0)):(He=y(Vd.buffer)?Y.createStream(34962,Vd.buffer):Y.getBuffer(Vd.buffer),Pe="type"in Vd?Wd[Vd.type]:He.dtype,Od=!!Vd.normalized,Ie=Vd.size|0,ye=Vd.offset|0,Xe=Vd.stride|0,zd=Vd.divisor|0);Re=ia.location;Pd=yc[Re];if(1===gf){Pd.buffer||E.enableVertexAttribArray(Re);Td=Ie||1;if(Pd.type!==Pe||Pd.size!==Td||Pd.buffer!==He||Pd.normalized!==Od||Pd.offset!==ye||Pd.stride!==Xe)E.bindBuffer(34962,He.buffer),E.vertexAttribPointer(Re,Td,Pe,Od,Xe,ye),
Pd.type=Pe,Pd.size=Td,Pd.buffer=He,Pd.normalized=Od,Pd.offset=ye,Pd.stride=Xe;Pd.divisor!==zd&&(e.vertexAttribDivisorANGLE(Re,zd),Pd.divisor=zd)}else if(Pd.buffer&&(E.disableVertexAttribArray(Re),Pd.buffer=null),Pd.x!==We||Pd.y!==Te||Pd.z!==Qe||Pd.w!==Le)E.vertexAttrib4f(Re,We,Te,Qe,Le),Pd.x=We,Pd.y=Te,Pd.z=Qe,Pd.w=Le;Se=J.pixelRatio;g&&hf===Se||(hf=Se,E.uniform1f($b.location,Se));mf=M.call(this,J,h,g);cf=mf[0];kf=mf[1];g&&jf===cf&&lf===kf||(jf=cf,lf=kf,E.uniform2f(va.location,cf,kf));rf=h.scale;
of=rf[0];Cf=rf[1];g&&sf===of&&Df===Cf||(sf=of,Df=Cf,E.uniform2f(Ua.location,of,Cf));Me=h.scaleFract;ze=Me[0];qf=Me[1];g&&pf===ze&&Ef===qf||(pf=ze,Ef=qf,E.uniform2f(V.location,ze,qf));Hf=h.translate;Bf=Hf[0];Gf=Hf[1];g&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,E.uniform2f(ca.location,Bf,Gf));yf=h.translateFract;wf=yf[0];Af=yf[1];g&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,E.uniform2f(ma.location,wf,Af));Kf=h.opacity;g&&Lf===Kf||(Lf=Kf,E.uniform1f(ba.location,Kf));Mf=h.elements;uf=null;(uf=(Rf=y(Mf))?Lb.createStream(Mf):
Lb.getElements(Mf))&&E.bindBuffer(34963,uf.buffer.buffer);If=h.offset;if(vf=h.count)0<eb?uf?e.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),eb):e.drawArraysInstancedANGLE(0,If,vf,eb):0>eb&&(uf?E.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):E.drawArrays(0,If,vf)),J.viewportWidth=hd,J.viewportHeight=Ub,Yb&&Y.destroyStream(fd),Ab&&Y.destroyStream(Qa),Xa&&Y.destroyStream(Ya),xb&&Y.destroyStream(Id),ic&&Y.destroyStream(Ne),id&&Y.destroyStream(rd),Bd&&Y.destroyStream(we),Nd&&Y.destroyStream(fe),
Zd&&Y.destroyStream(He),Rf&&Lb.destroyStream(uf)}qa.unbind();ja.dirty=!0;fa.setVAO(null);d&&(l.cpuTime+=performance.now()-f)},draw:function(e){var g,h,k,q,w,C,z,A,F,G,I,K,L,M,N,O,H,P,Q,U,W,X,da,ga,ta,oa,la,na,ea,qa,sa,ka,db,Ka,Pa,Wa,pa,gb,Ib,Ra,Gb,eb,pc,Sb,hc,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,Jc,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Kd,vc,je,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Ne,Dc,
Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od,id,rd,Yc,tf,Ud,he,se,le,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,we,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ye;g=Vc.next;g!==Vc.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),Vc.cur=g);if(ja.dirty){var Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,Pe,Le,We,Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf;Oe=ha.dither;Oe!==ja.dither&&(Oe?E.enable(3024):E.disable(3024),ja.dither=Oe);Ke=x[0];qe=x[1];if(Ke!==Z[0]||qe!==Z[1])E.blendEquationSeparate(Ke,
qe),Z[0]=Ke,Z[1]=qe;Ae=ha.depth_func;Ae!==ja.depth_func&&(E.depthFunc(Ae),ja.depth_func=Ae);Ee=rc[0];Fe=rc[1];if(Ee!==Ia[0]||Fe!==Ia[1])E.depthRange(Ee,Fe),Ia[0]=Ee,Ia[1]=Fe;Ge=ha.depth_mask;Ge!==ja.depth_mask&&(E.depthMask(Ge),ja.depth_mask=Ge);Be=Da[0];Gd=Da[1];Qd=Da[2];Vd=Da[3];if(Be!==m[0]||Gd!==m[1]||Qd!==m[2]||Vd!==m[3])E.colorMask(Be,Gd,Qd,Vd),m[0]=Be,m[1]=Gd,m[2]=Qd,m[3]=Vd;Zd=ha.cull_enable;Zd!==ja.cull_enable&&(Zd?E.enable(2884):E.disable(2884),ja.cull_enable=Zd);He=ha.cull_face;He!==ja.cull_face&&
(E.cullFace(He),ja.cull_face=He);zd=ha.frontFace;zd!==ja.frontFace&&(E.frontFace(zd),ja.frontFace=zd);Od=ha.lineWidth;Od!==ja.lineWidth&&(E.lineWidth(Od),ja.lineWidth=Od);ye=ha.polygonOffset_enable;ye!==ja.polygonOffset_enable&&(ye?E.enable(32823):E.disable(32823),ja.polygonOffset_enable=ye);Ie=S[0];gf=S[1];if(Ie!==Hb[0]||gf!==Hb[1])E.polygonOffset(Ie,gf),Hb[0]=Ie,Hb[1]=gf;Xe=ha.sample_alpha;Xe!==ja.sample_alpha&&(Xe?E.enable(32926):E.disable(32926),ja.sample_alpha=Xe);Pe=ha.sample_enable;Pe!==ja.sample_enable&&
(Pe?E.enable(32928):E.disable(32928),ja.sample_enable=Pe);Le=zb[0];We=zb[1];if(Le!==Ue[0]||We!==Ue[1])E.sampleCoverage(Le,We),Ue[0]=Le,Ue[1]=We;Te=ha.stencil_mask;Te!==ja.stencil_mask&&(E.stencilMask(Te),ja.stencil_mask=Te);Qe=ae[0];Re=ae[1];Pd=ae[2];if(Qe!==Hd[0]||Re!==Hd[1]||Pd!==Hd[2])E.stencilFunc(Qe,Re,Pd),Hd[0]=Qe,Hd[1]=Re,Hd[2]=Pd;Td=de[0];Se=de[1];hf=de[2];mf=de[3];if(Td!==te[0]||Se!==te[1]||hf!==te[2]||mf!==te[3])E.stencilOpSeparate(Td,Se,hf,mf),te[0]=Td,te[1]=Se,te[2]=hf,te[3]=mf;cf=re[0];
jf=re[1];kf=re[2];lf=re[3];if(cf!==xd[0]||jf!==xd[1]||kf!==xd[2]||lf!==xd[3])E.stencilOpSeparate(cf,jf,kf,lf),xd[0]=cf,xd[1]=jf,xd[2]=kf,xd[3]=lf}h=e.viewport;k=h.x|0;q=h.y|0;w="width"in h?h.width|0:J.framebufferWidth-k;C="height"in h?h.height|0:J.framebufferHeight-q;z=J.viewportWidth;J.viewportWidth=w;A=J.viewportHeight;J.viewportHeight=C;E.viewport(k,q,w,C);Xd[0]=k;Xd[1]=q;Xd[2]=w;Xd[3]=C;E.blendColor(0,0,0,1);D[0]=0;D[1]=0;D[2]=0;D[3]=1;E.enable(3042);ja.blend_enable=!0;E.blendFuncSeparate(770,
771,773,1);xa[0]=770;xa[1]=771;xa[2]=773;xa[3]=1;E.disable(2929);ja.depth_enable=!1;F=e.viewport;G=F.x|0;I=F.y|0;K="width"in F?F.width|0:J.framebufferWidth-G;L="height"in F?F.height|0:J.framebufferHeight-I;E.scissor(G,I,K,L);ge[0]=G;ge[1]=I;ge[2]=K;ge[3]=L;E.enable(3089);ja.scissor_enable=!0;E.disable(2960);ja.stencil_enable=!1;if(M=ja.profile)N=performance.now(),l.count++;E.useProgram(c.program);O=ab.angle_instanced_arrays;fa.setVAO(null);H=b.call(this,J,e,0);P=!1;Q=null;U=0;W=!1;da=X=0;ga=1;ta=
0;oa=5126;qa=ea=na=la=0;y(H)?(P=!0,Q=Y.createStream(34962,H),oa=Q.dtype):(Q=Y.getBuffer(H))?oa=Q.dtype:"constant"in H?(ga=2,"number"===typeof H.constant?(na=H.constant,ea=qa=la=0):(na=0<H.constant.length?H.constant[0]:0,ea=1<H.constant.length?H.constant[1]:0,qa=2<H.constant.length?H.constant[2]:0,la=3<H.constant.length?H.constant[3]:0)):(Q=y(H.buffer)?Y.createStream(34962,H.buffer):Y.getBuffer(H.buffer),oa="type"in H?Wd[H.type]:Q.dtype,W=!!H.normalized,da=H.size|0,X=H.offset|0,ta=H.stride|0,U=H.divisor|
0);sa=Rb.location;ka=yc[sa];if(1===ga){ka.buffer||E.enableVertexAttribArray(sa);db=da||1;if(ka.type!==oa||ka.size!==db||ka.buffer!==Q||ka.normalized!==W||ka.offset!==X||ka.stride!==ta)E.bindBuffer(34962,Q.buffer),E.vertexAttribPointer(sa,db,oa,W,ta,X),ka.type=oa,ka.size=db,ka.buffer=Q,ka.normalized=W,ka.offset=X,ka.stride=ta;ka.divisor!==U&&(O.vertexAttribDivisorANGLE(sa,U),ka.divisor=U)}else if(ka.buffer&&(E.disableVertexAttribArray(sa),ka.buffer=null),ka.x!==na||ka.y!==ea||ka.z!==qa||ka.w!==la)E.vertexAttrib4f(sa,
na,ea,qa,la),ka.x=na,ka.y=ea,ka.z=qa,ka.w=la;Ka=f.call(this,J,e,0);Pa=!1;Wa=null;pa=0;gb=!1;Ra=Ib=0;Gb=1;eb=0;pc=5126;Tb=kc=hc=Sb=0;y(Ka)?(Pa=!0,Wa=Y.createStream(34962,Ka),pc=Wa.dtype):(Wa=Y.getBuffer(Ka))?pc=Wa.dtype:"constant"in Ka?(Gb=2,"number"===typeof Ka.constant?(hc=Ka.constant,kc=Tb=Sb=0):(hc=0<Ka.constant.length?Ka.constant[0]:0,kc=1<Ka.constant.length?Ka.constant[1]:0,Tb=2<Ka.constant.length?Ka.constant[2]:0,Sb=3<Ka.constant.length?Ka.constant[3]:0)):(Wa=y(Ka.buffer)?Y.createStream(34962,
Ka.buffer):Y.getBuffer(Ka.buffer),pc="type"in Ka?Wd[Ka.type]:Wa.dtype,gb=!!Ka.normalized,Ra=Ka.size|0,Ib=Ka.offset|0,eb=Ka.stride|0,pa=Ka.divisor|0);hd=tc.location;Ub=yc[hd];if(1===Gb){Ub.buffer||E.enableVertexAttribArray(hd);Ma=Ra||1;if(Ub.type!==pc||Ub.size!==Ma||Ub.buffer!==Wa||Ub.normalized!==gb||Ub.offset!==Ib||Ub.stride!==eb)E.bindBuffer(34962,Wa.buffer),E.vertexAttribPointer(hd,Ma,pc,gb,eb,Ib),Ub.type=pc,Ub.size=Ma,Ub.buffer=Wa,Ub.normalized=gb,Ub.offset=Ib,Ub.stride=eb;Ub.divisor!==pa&&(O.vertexAttribDivisorANGLE(hd,
pa),Ub.divisor=pa)}else if(Ub.buffer&&(E.disableVertexAttribArray(hd),Ub.buffer=null),Ub.x!==hc||Ub.y!==kc||Ub.z!==Tb||Ub.w!==Sb)E.vertexAttrib4f(hd,hc,kc,Tb,Sb),Ub.x=hc,Ub.y=kc,Ub.z=Tb,Ub.w=Sb;qb=a.call(this,J,e,0);vb=!1;jb=null;Na=0;qc=!1;fd=Yb=0;fb=1;mc=0;ad=5126;ra=mb=lb=dc=0;y(qb)?(vb=!0,jb=Y.createStream(34962,qb),ad=jb.dtype):(jb=Y.getBuffer(qb))?ad=jb.dtype:"constant"in qb?(fb=2,"number"===typeof qb.constant?(lb=qb.constant,mb=ra=dc=0):(lb=0<qb.constant.length?qb.constant[0]:0,mb=1<qb.constant.length?
qb.constant[1]:0,ra=2<qb.constant.length?qb.constant[2]:0,dc=3<qb.constant.length?qb.constant[3]:0)):(jb=y(qb.buffer)?Y.createStream(34962,qb.buffer):Y.getBuffer(qb.buffer),ad="type"in qb?Wd[qb.type]:jb.dtype,qc=!!qb.normalized,fd=qb.size|0,Yb=qb.offset|0,mc=qb.stride|0,Na=qb.divisor|0);rb=oc.location;ua=yc[rb];if(1===fb){ua.buffer||E.enableVertexAttribArray(rb);Ta=fd||1;if(ua.type!==ad||ua.size!==Ta||ua.buffer!==jb||ua.normalized!==qc||ua.offset!==Yb||ua.stride!==mc)E.bindBuffer(34962,jb.buffer),
E.vertexAttribPointer(rb,Ta,ad,qc,mc,Yb),ua.type=ad,ua.size=Ta,ua.buffer=jb,ua.normalized=qc,ua.offset=Yb,ua.stride=mc;ua.divisor!==Na&&(O.vertexAttribDivisorANGLE(rb,Na),ua.divisor=Na)}else if(ua.buffer&&(E.disableVertexAttribArray(rb),ua.buffer=null),ua.x!==lb||ua.y!==mb||ua.z!==ra||ua.w!==dc)E.vertexAttrib4f(rb,lb,mb,ra,dc),ua.x=lb,ua.y=mb,ua.z=ra,ua.w=dc;cb=n.call(this,J,e,0);Aa=!1;hb=null;Ha=0;Bb=!1;Qa=Ab=0;Lc=1;Jb=0;Za=5126;Ja=Jc=ya=Vb=0;y(cb)?(Aa=!0,hb=Y.createStream(34962,cb),Za=hb.dtype):
(hb=Y.getBuffer(cb))?Za=hb.dtype:"constant"in cb?(Lc=2,"number"===typeof cb.constant?(ya=cb.constant,Jc=Ja=Vb=0):(ya=0<cb.constant.length?cb.constant[0]:0,Jc=1<cb.constant.length?cb.constant[1]:0,Ja=2<cb.constant.length?cb.constant[2]:0,Vb=3<cb.constant.length?cb.constant[3]:0)):(hb=y(cb.buffer)?Y.createStream(34962,cb.buffer):Y.getBuffer(cb.buffer),Za="type"in cb?Wd[cb.type]:hb.dtype,Bb=!!cb.normalized,Qa=cb.size|0,Ab=cb.offset|0,Jb=cb.stride|0,Ha=cb.divisor|0);Ob=vd.location;ib=yc[Ob];if(1===Lc){ib.buffer||
E.enableVertexAttribArray(Ob);kb=Qa||1;if(ib.type!==Za||ib.size!==kb||ib.buffer!==hb||ib.normalized!==Bb||ib.offset!==Ab||ib.stride!==Jb)E.bindBuffer(34962,hb.buffer),E.vertexAttribPointer(Ob,kb,Za,Bb,Jb,Ab),ib.type=Za,ib.size=kb,ib.buffer=hb,ib.normalized=Bb,ib.offset=Ab,ib.stride=Jb;ib.divisor!==Ha&&(O.vertexAttribDivisorANGLE(Ob,Ha),ib.divisor=Ha)}else if(ib.buffer&&(E.disableVertexAttribArray(Ob),ib.buffer=null),ib.x!==ya||ib.y!==Jc||ib.z!==Ja||ib.w!==Vb)E.vertexAttrib4f(Ob,ya,Jc,Ja,Vb),ib.x=
ya,ib.y=Jc,ib.z=Ja,ib.w=Vb;za=d.call(this,J,e,0);ec=!1;Ea=null;sb=0;tb=!1;Ya=Xa=0;nc=1;cd=0;wc=5126;Fa=Rc=Mb=Va=0;y(za)?(ec=!0,Ea=Y.createStream(34962,za),wc=Ea.dtype):(Ea=Y.getBuffer(za))?wc=Ea.dtype:"constant"in za?(nc=2,"number"===typeof za.constant?(Mb=za.constant,Rc=Fa=Va=0):(Mb=0<za.constant.length?za.constant[0]:0,Rc=1<za.constant.length?za.constant[1]:0,Fa=2<za.constant.length?za.constant[2]:0,Va=3<za.constant.length?za.constant[3]:0)):(Ea=y(za.buffer)?Y.createStream(34962,za.buffer):Y.getBuffer(za.buffer),
wc="type"in za?Wd[za.type]:Ea.dtype,tb=!!za.normalized,Ya=za.size|0,Xa=za.offset|0,cd=za.stride|0,sb=za.divisor|0);zc=pb.location;Oa=yc[zc];if(1===nc){Oa.buffer||E.enableVertexAttribArray(zc);Ba=Ya||1;if(Oa.type!==wc||Oa.size!==Ba||Oa.buffer!==Ea||Oa.normalized!==tb||Oa.offset!==Xa||Oa.stride!==cd)E.bindBuffer(34962,Ea.buffer),E.vertexAttribPointer(zc,Ba,wc,tb,cd,Xa),Oa.type=wc,Oa.size=Ba,Oa.buffer=Ea,Oa.normalized=tb,Oa.offset=Xa,Oa.stride=cd;Oa.divisor!==sb&&(O.vertexAttribDivisorANGLE(zc,sb),Oa.divisor=
sb)}else if(Oa.buffer&&(E.disableVertexAttribArray(zc),Oa.buffer=null),Oa.x!==Mb||Oa.y!==Rc||Oa.z!==Fa||Oa.w!==Va)E.vertexAttrib4f(zc,Mb,Rc,Fa,Va),Oa.x=Mb,Oa.y=Rc,Oa.z=Fa,Oa.w=Va;nb=p.call(this,J,e,0);wb=!1;Cb=null;ub=0;xc=!1;Kd=xb=0;vc=1;je=0;Nc=5126;cc=Wb=dd=nd=0;y(nb)?(wb=!0,Cb=Y.createStream(34962,nb),Nc=Cb.dtype):(Cb=Y.getBuffer(nb))?Nc=Cb.dtype:"constant"in nb?(vc=2,"number"===typeof nb.constant?(dd=nb.constant,Wb=cc=nd=0):(dd=0<nb.constant.length?nb.constant[0]:0,Wb=1<nb.constant.length?nb.constant[1]:
0,cc=2<nb.constant.length?nb.constant[2]:0,nd=3<nb.constant.length?nb.constant[3]:0)):(Cb=y(nb.buffer)?Y.createStream(34962,nb.buffer):Y.getBuffer(nb.buffer),Nc="type"in nb?Wd[nb.type]:Cb.dtype,xc=!!nb.normalized,Kd=nb.size|0,xb=nb.offset|0,je=nb.stride|0,ub=nb.divisor|0);Pb=$a.location;Ga=yc[Pb];if(1===vc){Ga.buffer||E.enableVertexAttribArray(Pb);ac=Kd||1;if(Ga.type!==Nc||Ga.size!==ac||Ga.buffer!==Cb||Ga.normalized!==xc||Ga.offset!==xb||Ga.stride!==je)E.bindBuffer(34962,Cb.buffer),E.vertexAttribPointer(Pb,
ac,Nc,xc,je,xb),Ga.type=Nc,Ga.size=ac,Ga.buffer=Cb,Ga.normalized=xc,Ga.offset=xb,Ga.stride=je;Ga.divisor!==ub&&(O.vertexAttribDivisorANGLE(Pb,ub),Ga.divisor=ub)}else if(Ga.buffer&&(E.disableVertexAttribArray(Pb),Ga.buffer=null),Ga.x!==dd||Ga.y!==Wb||Ga.z!==cc||Ga.w!==nd)E.vertexAttrib4f(Pb,dd,Wb,cc,nd),Ga.x=dd,Ga.y=Wb,Ga.z=cc,Ga.w=nd;ob=aa.call(this,J,e,0);yb=!1;Nb=null;Qb=0;fc=!1;Ne=ic=0;Dc=1;Ec=0;Fc=5126;Pc=Tc=$c=Oc=0;y(ob)?(yb=!0,Nb=Y.createStream(34962,ob),Fc=Nb.dtype):(Nb=Y.getBuffer(ob))?Fc=
Nb.dtype:"constant"in ob?(Dc=2,"number"===typeof ob.constant?($c=ob.constant,Tc=Pc=Oc=0):($c=0<ob.constant.length?ob.constant[0]:0,Tc=1<ob.constant.length?ob.constant[1]:0,Pc=2<ob.constant.length?ob.constant[2]:0,Oc=3<ob.constant.length?ob.constant[3]:0)):(Nb=y(ob.buffer)?Y.createStream(34962,ob.buffer):Y.getBuffer(ob.buffer),Fc="type"in ob?Wd[ob.type]:Nb.dtype,fc=!!ob.normalized,Ne=ob.size|0,ic=ob.offset|0,Ec=ob.stride|0,Qb=ob.divisor|0);Kb=T.location;Fb=yc[Kb];if(1===Dc){Fb.buffer||E.enableVertexAttribArray(Kb);
Qc=Ne||4;if(Fb.type!==Fc||Fb.size!==Qc||Fb.buffer!==Nb||Fb.normalized!==fc||Fb.offset!==ic||Fb.stride!==Ec)E.bindBuffer(34962,Nb.buffer),E.vertexAttribPointer(Kb,Qc,Fc,fc,Ec,ic),Fb.type=Fc,Fb.size=Qc,Fb.buffer=Nb,Fb.normalized=fc,Fb.offset=ic,Fb.stride=Ec;Fb.divisor!==Qb&&(O.vertexAttribDivisorANGLE(Kb,Qb),Fb.divisor=Qb)}else if(Fb.buffer&&(E.disableVertexAttribArray(Kb),Fb.buffer=null),Fb.x!==$c||Fb.y!==Tc||Fb.z!==Pc||Fb.w!==Oc)E.vertexAttrib4f(Kb,$c,Tc,Pc,Oc),Fb.x=$c,Fb.y=Tc,Fb.z=Pc,Fb.w=Oc;Ic=
u.call(this,J,e,0);Uc=!1;gc=null;Xc=0;od=!1;rd=id=0;Yc=1;tf=0;Ud=5126;Fd=le=se=he=0;y(Ic)?(Uc=!0,gc=Y.createStream(34962,Ic),Ud=gc.dtype):(gc=Y.getBuffer(Ic))?Ud=gc.dtype:"constant"in Ic?(Yc=2,"number"===typeof Ic.constant?(se=Ic.constant,le=Fd=he=0):(se=0<Ic.constant.length?Ic.constant[0]:0,le=1<Ic.constant.length?Ic.constant[1]:0,Fd=2<Ic.constant.length?Ic.constant[2]:0,he=3<Ic.constant.length?Ic.constant[3]:0)):(gc=y(Ic.buffer)?Y.createStream(34962,Ic.buffer):Y.getBuffer(Ic.buffer),Ud="type"in
Ic?Wd[Ic.type]:gc.dtype,od=!!Ic.normalized,rd=Ic.size|0,id=Ic.offset|0,tf=Ic.stride|0,Xc=Ic.divisor|0);Dd=Zb.location;ed=yc[Dd];if(1===Yc){ed.buffer||E.enableVertexAttribArray(Dd);Gc=rd||4;if(ed.type!==Ud||ed.size!==Gc||ed.buffer!==gc||ed.normalized!==od||ed.offset!==id||ed.stride!==tf)E.bindBuffer(34962,gc.buffer),E.vertexAttribPointer(Dd,Gc,Ud,od,tf,id),ed.type=Ud,ed.size=Gc,ed.buffer=gc,ed.normalized=od,ed.offset=id,ed.stride=tf;ed.divisor!==Xc&&(O.vertexAttribDivisorANGLE(Dd,Xc),ed.divisor=Xc)}else if(ed.buffer&&
(E.disableVertexAttribArray(Dd),ed.buffer=null),ed.x!==se||ed.y!==le||ed.z!==Fd||ed.w!==he)E.vertexAttrib4f(Dd,se,le,Fd,he),ed.x=se,ed.y=le,ed.z=Fd,ed.w=he;pd=r.call(this,J,e,0);jd=!1;bd=null;kd=0;Ad=!1;we=Bd=0;me=1;ve=0;ce=5126;Yd=oe=$d=be=0;y(pd)?(jd=!0,bd=Y.createStream(34962,pd),ce=bd.dtype):(bd=Y.getBuffer(pd))?ce=bd.dtype:"constant"in pd?(me=2,"number"===typeof pd.constant?($d=pd.constant,oe=Yd=be=0):($d=0<pd.constant.length?pd.constant[0]:0,oe=1<pd.constant.length?pd.constant[1]:0,Yd=2<pd.constant.length?
pd.constant[2]:0,be=3<pd.constant.length?pd.constant[3]:0)):(bd=y(pd.buffer)?Y.createStream(34962,pd.buffer):Y.getBuffer(pd.buffer),ce="type"in pd?Wd[pd.type]:bd.dtype,Ad=!!pd.normalized,we=pd.size|0,Bd=pd.offset|0,ve=pd.stride|0,kd=pd.divisor|0);ee=ia.location;Ac=yc[ee];if(1===me){Ac.buffer||E.enableVertexAttribArray(ee);Wc=we||1;if(Ac.type!==ce||Ac.size!==Wc||Ac.buffer!==bd||Ac.normalized!==Ad||Ac.offset!==Bd||Ac.stride!==ve)E.bindBuffer(34962,bd.buffer),E.vertexAttribPointer(ee,Wc,ce,Ad,ve,Bd),
Ac.type=ce,Ac.size=Wc,Ac.buffer=bd,Ac.normalized=Ad,Ac.offset=Bd,Ac.stride=ve;Ac.divisor!==kd&&(O.vertexAttribDivisorANGLE(ee,kd),Ac.divisor=kd)}else if(Ac.buffer&&(E.disableVertexAttribArray(ee),Ac.buffer=null),Ac.x!==$d||Ac.y!==oe||Ac.z!==Yd||Ac.w!==be)E.vertexAttrib4f(ee,$d,oe,Yd,be),Ac.x=$d,Ac.y=oe,Ac.z=Yd,Ac.w=be;E.uniform1i(t.location,!1);E.uniform1f($b.location,J.pixelRatio);pe=B.call(this,J,e,0);E.uniform2f(va.location,pe[0],pe[1]);ie=e.scale;E.uniform2f(Ua.location,ie[0],ie[1]);Ed=e.scaleFract;
E.uniform2f(V.location,Ed[0],Ed[1]);Jd=e.translate;E.uniform2f(ca.location,Jd[0],Jd[1]);Md=e.translateFract;E.uniform2f(ma.location,Md[0],Md[1]);E.uniform1f(ba.location,e.opacity);E.uniform1i(La.location,v.bind());Nd=e.elements;fe=null;(fe=(De=y(Nd))?Lb.createStream(Nd):Lb.getElements(Nd))&&E.bindBuffer(34963,fe.buffer.buffer);xe=e.offset;if(ne=e.count)Ye=Ca.instances,0<Ye?fe?O.drawElementsInstancedANGLE(0,ne,fe.type,xe<<(fe.type-5121>>1),Ye):O.drawArraysInstancedANGLE(0,xe,ne,Ye):0>Ye&&(fe?E.drawElements(0,
ne,fe.type,xe<<(fe.type-5121>>1)):E.drawArrays(0,xe,ne)),ja.dirty=!0,fa.setVAO(null),J.viewportWidth=z,J.viewportHeight=A,M&&(l.cpuTime+=performance.now()-N),P&&Y.destroyStream(Q),Pa&&Y.destroyStream(Wa),vb&&Y.destroyStream(jb),Aa&&Y.destroyStream(hb),ec&&Y.destroyStream(Ea),wb&&Y.destroyStream(Cb),yb&&Y.destroyStream(Nb),Uc&&Y.destroyStream(gc),jd&&Y.destroyStream(bd),v.unbind(),De&&Lb.destroyStream(fe)},scope:function(a,b,c){var d,f,e,n,m,p,r,t,v,x,aa,u,R,D,E,B,H,L,M,Z,Q,S,T,V,fa,X,ba,wa,ca,ia,
ka,la,xa,Da,pa,ma,qa,sa,Ia,va,La,Pa,zb,ab,Ua,$a,yc,Ma,qb,vb,jb,Na,Hb,gb,pb,fb,vd,rc,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Rb,Jb,Za,Vb,ya,Zb,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,$b,wc,Va,Mb,oc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,hc,vc,tc,Nc,ae,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Vc,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,xd,id,rd,Yc,Hd,Xd,ge,de,re,Fd,Dd,ed,Gc,pd,jd,bd,kd,Ad,Bd,te,me,ve,ce,be,$d,oe,Yd,ee,Ac,Wc,pe,ie,Ed,Jd,Md,Nd,fe,De,xe,ne,Ue,Oe,Ke,qe,Ae,Ee,Fe,Ge,Be,Gd,Qd,Vd,Zd,He,zd,Od,ye,Ie,gf,Xe,
Pe,Le,We,Te,Qe,Re,Pd,Td,Se,hf,mf,cf,jf,kf,lf,rf,of,sf,Cf,Df,Me,ze,pf,qf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,df,Ze,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,ef,$e,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;d=a.viewport;f=d.x|0;e=d.y|0;n="width"in d?d.width|0:J.framebufferWidth-f;m="height"in d?d.height|0:J.framebufferHeight-e;p=J.viewportWidth;J.viewportWidth=n;r=J.viewportHeight;J.viewportHeight=m;t=Kd[0];
Kd[0]=f;v=Kd[1];Kd[1]=e;x=Kd[2];Kd[2]=n;aa=Kd[3];Kd[3]=m;u=oa[0];oa[0]=0;R=oa[1];oa[1]=0;D=oa[2];oa[2]=0;E=oa[3];oa[3]=1;B=ha.blend_enable;ha.blend_enable=!0;H=F[0];F[0]=770;L=F[1];F[1]=771;M=F[2];F[2]=773;Z=F[3];F[3]=1;Q=ha.depth_enable;ha.depth_enable=!1;S=a.viewport;T=S.x|0;V=S.y|0;fa="width"in S?S.width|0:J.framebufferWidth-T;X="height"in S?S.height|0:J.framebufferHeight-V;ba=je[0];je[0]=T;wa=je[1];je[1]=V;ca=je[2];je[2]=fa;ia=je[3];je[3]=X;ka=ha.scissor_enable;ha.scissor_enable=!0;la=ha.stencil_enable;
ha.stencil_enable=!1;if(xa=ja.profile)Da=performance.now(),l.count++;pa=a.elements;ma=null;ma=(qa=y(pa))?Lb.createStream(pa):Lb.getElements(pa);sa=Ca.elements;Ca.elements=ma;Ia=a.offset;va=Ca.offset;Ca.offset=Ia;La=a.count;Pa=Ca.count;Ca.count=La;zb=Ca.primitive;Ca.primitive=0;ab=W[45];W[45]=!1;Ua=a.markerTexture;$a=W[48];W[48]=Ua;yc=a.opacity;Ma=W[10];W[10]=yc;qb=C.call(this,J,a,c);vb=W[46];W[46]=qb;jb=W[47];W[47]=O;Na=J.pixelRatio;Hb=W[34];W[34]=Na;gb=a.scale;pb=W[6];W[6]=gb;fb=a.scaleFract;vd=
W[7];W[7]=fb;rc=a.translate;dc=W[8];W[8]=rc;lb=a.translateFract;mb=W[9];W[9]=lb;ra=A.call(this,J,a,c);rb=!1;ua=null;Ta=0;cb=!1;hb=Aa=0;Ha=1;Bb=0;Ab=5126;Za=Jb=Rb=Qa=0;y(ra)?(rb=!0,ua=Y.createStream(34962,ra),Ab=ua.dtype):(ua=Y.getBuffer(ra))?Ab=ua.dtype:"constant"in ra?(Ha=2,"number"===typeof ra.constant?(Rb=ra.constant,Jb=Za=Qa=0):(Rb=0<ra.constant.length?ra.constant[0]:0,Jb=1<ra.constant.length?ra.constant[1]:0,Za=2<ra.constant.length?ra.constant[2]:0,Qa=3<ra.constant.length?ra.constant[3]:0)):
(ua=y(ra.buffer)?Y.createStream(34962,ra.buffer):Y.getBuffer(ra.buffer),Ab="type"in ra?Wd[ra.type]:ua.dtype,cb=!!ra.normalized,hb=ra.size|0,Aa=ra.offset|0,Bb=ra.stride|0,Ta=ra.divisor|0);Vb=I.buffer;I.buffer=ua;ya=I.divisor;I.divisor=Ta;Zb=I.normalized;I.normalized=cb;Ja=I.offset;I.offset=Aa;Ob=I.size;I.size=hb;ib=I.state;I.state=Ha;kb=I.stride;I.stride=Bb;za=I.type;I.type=Ab;ec=I.w;I.w=Qa;Ea=I.x;I.x=Rb;sb=I.y;I.y=Jb;tb=I.z;I.z=Za;Xa=ea.call(this,J,a,c);Ya=!1;nc=null;$b=0;wc=!1;Mb=Va=0;oc=1;Fa=0;
zc=5126;wb=nb=Ba=Oa=0;y(Xa)?(Ya=!0,nc=Y.createStream(34962,Xa),zc=nc.dtype):(nc=Y.getBuffer(Xa))?zc=nc.dtype:"constant"in Xa?(oc=2,"number"===typeof Xa.constant?(Ba=Xa.constant,nb=wb=Oa=0):(Ba=0<Xa.constant.length?Xa.constant[0]:0,nb=1<Xa.constant.length?Xa.constant[1]:0,wb=2<Xa.constant.length?Xa.constant[2]:0,Oa=3<Xa.constant.length?Xa.constant[3]:0)):(nc=y(Xa.buffer)?Y.createStream(34962,Xa.buffer):Y.getBuffer(Xa.buffer),zc="type"in Xa?Wd[Xa.type]:nc.dtype,wc=!!Xa.normalized,Mb=Xa.size|0,Va=Xa.offset|
0,Fa=Xa.stride|0,$b=Xa.divisor|0);Cb=N.buffer;N.buffer=nc;ub=N.divisor;N.divisor=$b;xc=N.normalized;N.normalized=wc;xb=N.offset;N.offset=Va;hc=N.size;N.size=Mb;vc=N.state;N.state=oc;tc=N.stride;N.stride=Fa;Nc=N.type;N.type=zc;ae=N.w;N.w=Oa;dd=N.x;N.x=Ba;Wb=N.y;N.y=nb;cc=N.z;N.z=wb;Pb=Jc.call(this,J,a,c);Ga=!1;ac=null;ob=0;yb=!1;Qb=Nb=0;fc=1;ic=0;Vc=5126;Oc=Fc=Ec=Dc=0;y(Pb)?(Ga=!0,ac=Y.createStream(34962,Pb),Vc=ac.dtype):(ac=Y.getBuffer(Pb))?Vc=ac.dtype:"constant"in Pb?(fc=2,"number"===typeof Pb.constant?
(Ec=Pb.constant,Fc=Oc=Dc=0):(Ec=0<Pb.constant.length?Pb.constant[0]:0,Fc=1<Pb.constant.length?Pb.constant[1]:0,Oc=2<Pb.constant.length?Pb.constant[2]:0,Dc=3<Pb.constant.length?Pb.constant[3]:0)):(ac=y(Pb.buffer)?Y.createStream(34962,Pb.buffer):Y.getBuffer(Pb.buffer),Vc="type"in Pb?Wd[Pb.type]:ac.dtype,yb=!!Pb.normalized,Qb=Pb.size|0,Nb=Pb.offset|0,ic=Pb.stride|0,ob=Pb.divisor|0);$c=q.buffer;q.buffer=ac;Tc=q.divisor;q.divisor=ob;Pc=q.normalized;q.normalized=yb;Kb=q.offset;q.offset=Nb;Fb=q.size;q.size=
Qb;Qc=q.state;q.state=fc;Ic=q.stride;q.stride=ic;Uc=q.type;q.type=Vc;gc=q.w;q.w=Dc;Xc=q.x;q.x=Ec;xd=q.y;q.y=Fc;id=q.z;q.z=Oc;rd=z.call(this,J,a,c);Yc=!1;Hd=null;Xd=0;ge=!1;re=de=0;Fd=1;Dd=0;ed=5126;bd=jd=pd=Gc=0;y(rd)?(Yc=!0,Hd=Y.createStream(34962,rd),ed=Hd.dtype):(Hd=Y.getBuffer(rd))?ed=Hd.dtype:"constant"in rd?(Fd=2,"number"===typeof rd.constant?(pd=rd.constant,jd=bd=Gc=0):(pd=0<rd.constant.length?rd.constant[0]:0,jd=1<rd.constant.length?rd.constant[1]:0,bd=2<rd.constant.length?rd.constant[2]:
0,Gc=3<rd.constant.length?rd.constant[3]:0)):(Hd=y(rd.buffer)?Y.createStream(34962,rd.buffer):Y.getBuffer(rd.buffer),ed="type"in rd?Wd[rd.type]:Hd.dtype,ge=!!rd.normalized,re=rd.size|0,de=rd.offset|0,Dd=rd.stride|0,Xd=rd.divisor|0);kd=k.buffer;k.buffer=Hd;Ad=k.divisor;k.divisor=Xd;Bd=k.normalized;k.normalized=ge;te=k.offset;k.offset=de;me=k.size;k.size=re;ve=k.state;k.state=Fd;ce=k.stride;k.stride=Dd;be=k.type;k.type=ed;$d=k.w;k.w=Gc;oe=k.x;k.x=pd;Yd=k.y;k.y=jd;ee=k.z;k.z=bd;Ac=da.call(this,J,a,c);
Wc=!1;pe=null;ie=0;Ed=!1;Md=Jd=0;Nd=1;fe=0;De=5126;Oe=Ue=ne=xe=0;y(Ac)?(Wc=!0,pe=Y.createStream(34962,Ac),De=pe.dtype):(pe=Y.getBuffer(Ac))?De=pe.dtype:"constant"in Ac?(Nd=2,"number"===typeof Ac.constant?(ne=Ac.constant,Ue=Oe=xe=0):(ne=0<Ac.constant.length?Ac.constant[0]:0,Ue=1<Ac.constant.length?Ac.constant[1]:0,Oe=2<Ac.constant.length?Ac.constant[2]:0,xe=3<Ac.constant.length?Ac.constant[3]:0)):(pe=y(Ac.buffer)?Y.createStream(34962,Ac.buffer):Y.getBuffer(Ac.buffer),De="type"in Ac?Wd[Ac.type]:pe.dtype,
Ed=!!Ac.normalized,Md=Ac.size|0,Jd=Ac.offset|0,fe=Ac.stride|0,ie=Ac.divisor|0);Ke=P.buffer;P.buffer=pe;qe=P.divisor;P.divisor=ie;Ae=P.normalized;P.normalized=Ed;Ee=P.offset;P.offset=Jd;Fe=P.size;P.size=Md;Ge=P.state;P.state=Nd;Be=P.stride;P.stride=fe;Gd=P.type;P.type=De;Qd=P.w;P.w=xe;Vd=P.x;P.x=ne;Zd=P.y;P.y=Ue;He=P.z;P.z=Oe;zd=K.call(this,J,a,c);Od=!1;ye=null;Ie=0;gf=!1;Pe=Xe=0;Le=1;We=0;Te=5126;Td=Pd=Re=Qe=0;y(zd)?(Od=!0,ye=Y.createStream(34962,zd),Te=ye.dtype):(ye=Y.getBuffer(zd))?Te=ye.dtype:
"constant"in zd?(Le=2,"number"===typeof zd.constant?(Re=zd.constant,Pd=Td=Qe=0):(Re=0<zd.constant.length?zd.constant[0]:0,Pd=1<zd.constant.length?zd.constant[1]:0,Td=2<zd.constant.length?zd.constant[2]:0,Qe=3<zd.constant.length?zd.constant[3]:0)):(ye=y(zd.buffer)?Y.createStream(34962,zd.buffer):Y.getBuffer(zd.buffer),Te="type"in zd?Wd[zd.type]:ye.dtype,gf=!!zd.normalized,Pe=zd.size|0,Xe=zd.offset|0,We=zd.stride|0,Ie=zd.divisor|0);Se=w.buffer;w.buffer=ye;hf=w.divisor;w.divisor=Ie;mf=w.normalized;w.normalized=
gf;cf=w.offset;w.offset=Xe;jf=w.size;w.size=Pe;kf=w.state;w.state=Le;lf=w.stride;w.stride=We;rf=w.type;w.type=Te;of=w.w;w.w=Qe;sf=w.x;w.x=Re;Cf=w.y;w.y=Pd;Df=w.z;w.z=Td;Me=na.call(this,J,a,c);ze=!1;pf=null;qf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;y(Me)?(ze=!0,pf=Y.createStream(34962,Me),xf=pf.dtype):(pf=Y.getBuffer(Me))?xf=pf.dtype:"constant"in Me?(Ff=2,"number"===typeof Me.constant?(wf=Me.constant,zf=Af=yf=0):(wf=0<Me.constant.length?Me.constant[0]:0,zf=1<Me.constant.length?Me.constant[1]:
0,Af=2<Me.constant.length?Me.constant[2]:0,yf=3<Me.constant.length?Me.constant[3]:0)):(pf=y(Me.buffer)?Y.createStream(34962,Me.buffer):Y.getBuffer(Me.buffer),xf="type"in Me?Wd[Me.type]:pf.dtype,Ef=!!Me.normalized,Bf=Me.size|0,Hf=Me.offset|0,Gf=Me.stride|0,qf=Me.divisor|0);Jf=G.buffer;G.buffer=pf;Kf=G.divisor;G.divisor=qf;Lf=G.normalized;G.normalized=Ef;Mf=G.offset;G.offset=Hf;uf=G.size;G.size=Bf;Rf=G.state;G.state=Ff;If=G.stride;G.stride=Gf;vf=G.type;G.type=xf;dg=G.w;G.w=yf;Sf=G.x;G.x=wf;Tf=G.y;G.y=
zf;qg=G.z;G.z=Af;df=ga.call(this,J,a,c);Ze=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;y(df)?(Ze=!0,Nf=Y.createStream(34962,df),Wf=Nf.dtype):(Nf=Y.getBuffer(df))?Wf=Nf.dtype:"constant"in df?(hg=2,"number"===typeof df.constant?(Xf=df.constant,Yf=Zf=Uf=0):(Xf=0<df.constant.length?df.constant[0]:0,Yf=1<df.constant.length?df.constant[1]:0,Zf=2<df.constant.length?df.constant[2]:0,Uf=3<df.constant.length?df.constant[3]:0)):(Nf=y(df.buffer)?Y.createStream(34962,df.buffer):Y.getBuffer(df.buffer),
Wf="type"in df?Wd[df.type]:Nf.dtype,eg=!!df.normalized,gg=df.size|0,fg=df.offset|0,ig=df.stride|0,Of=df.divisor|0);jg=h.buffer;h.buffer=Nf;rg=h.divisor;h.divisor=Of;sg=h.normalized;h.normalized=eg;tg=h.offset;h.offset=fg;ug=h.size;h.size=gg;vg=h.state;h.state=hg;wg=h.stride;h.stride=ig;xg=h.type;h.type=Wf;yg=h.w;h.w=Uf;zg=h.x;h.x=Xf;Ag=h.y;h.y=Yf;Bg=h.z;h.z=Zf;ef=g.call(this,J,a,c);$e=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;y(ef)?($e=!0,Pf=Y.createStream(34962,ef),$f=Pf.dtype):
(Pf=Y.getBuffer(ef))?$f=Pf.dtype:"constant"in ef?(ng=2,"number"===typeof ef.constant?(ag=ef.constant,bg=cg=Vf=0):(ag=0<ef.constant.length?ef.constant[0]:0,bg=1<ef.constant.length?ef.constant[1]:0,cg=2<ef.constant.length?ef.constant[2]:0,Vf=3<ef.constant.length?ef.constant[3]:0)):(Pf=y(ef.buffer)?Y.createStream(34962,ef.buffer):Y.getBuffer(ef.buffer),$f="type"in ef?Wd[ef.type]:Pf.dtype,kg=!!ef.normalized,mg=ef.size|0,lg=ef.offset|0,og=ef.stride|0,Qf=ef.divisor|0);pg=U.buffer;U.buffer=Pf;Cg=U.divisor;
U.divisor=Qf;Dg=U.normalized;U.normalized=kg;Eg=U.offset;U.offset=lg;Fg=U.size;U.size=mg;Gg=U.state;U.state=ng;Hg=U.stride;U.stride=og;Ig=U.type;U.type=$f;Jg=U.w;U.w=Vf;Kg=U.x;U.x=ag;Lg=U.y;U.y=bg;Mg=U.z;U.z=cg;Ng=ta.vert;ta.vert=59;Og=ta.frag;ta.frag=58;ja.dirty=!0;b(J,a,c);J.viewportWidth=p;J.viewportHeight=r;Kd[0]=t;Kd[1]=v;Kd[2]=x;Kd[3]=aa;oa[0]=u;oa[1]=R;oa[2]=D;oa[3]=E;ha.blend_enable=B;F[0]=H;F[1]=L;F[2]=M;F[3]=Z;ha.depth_enable=Q;je[0]=ba;je[1]=wa;je[2]=ca;je[3]=ia;ha.scissor_enable=ka;ha.stencil_enable=
la;xa&&(l.cpuTime+=performance.now()-Da);qa&&Lb.destroyStream(ma);Ca.elements=sa;Ca.offset=va;Ca.count=Pa;Ca.primitive=zb;W[45]=ab;W[48]=$a;W[10]=Ma;W[46]=vb;W[47]=jb;W[34]=Hb;W[6]=pb;W[7]=vd;W[8]=dc;W[9]=mb;rb&&Y.destroyStream(ua);I.buffer=Vb;I.divisor=ya;I.normalized=Zb;I.offset=Ja;I.size=Ob;I.state=ib;I.stride=kb;I.type=za;I.w=ec;I.x=Ea;I.y=sb;I.z=tb;Ya&&Y.destroyStream(nc);N.buffer=Cb;N.divisor=ub;N.normalized=xc;N.offset=xb;N.size=hc;N.state=vc;N.stride=tc;N.type=Nc;N.w=ae;N.x=dd;N.y=Wb;N.z=
cc;Ga&&Y.destroyStream(ac);q.buffer=$c;q.divisor=Tc;q.normalized=Pc;q.offset=Kb;q.size=Fb;q.state=Qc;q.stride=Ic;q.type=Uc;q.w=gc;q.x=Xc;q.y=xd;q.z=id;Yc&&Y.destroyStream(Hd);k.buffer=kd;k.divisor=Ad;k.normalized=Bd;k.offset=te;k.size=me;k.state=ve;k.stride=ce;k.type=be;k.w=$d;k.x=oe;k.y=Yd;k.z=ee;Wc&&Y.destroyStream(pe);P.buffer=Ke;P.divisor=qe;P.normalized=Ae;P.offset=Ee;P.size=Fe;P.state=Ge;P.stride=Be;P.type=Gd;P.w=Qd;P.x=Vd;P.y=Zd;P.z=He;Od&&Y.destroyStream(ye);w.buffer=Se;w.divisor=hf;w.normalized=
mf;w.offset=cf;w.size=jf;w.state=kf;w.stride=lf;w.type=rf;w.w=of;w.x=sf;w.y=Cf;w.z=Df;ze&&Y.destroyStream(pf);G.buffer=Jf;G.divisor=Kf;G.normalized=Lf;G.offset=Mf;G.size=uf;G.state=Rf;G.stride=If;G.type=vf;G.w=dg;G.x=Sf;G.y=Tf;G.z=qg;Ze&&Y.destroyStream(Nf);h.buffer=jg;h.divisor=rg;h.normalized=sg;h.offset=tg;h.size=ug;h.state=vg;h.stride=wg;h.type=xg;h.w=yg;h.x=zg;h.y=Ag;h.z=Bg;$e&&Y.destroyStream(Pf);U.buffer=pg;U.divisor=Cg;U.normalized=Dg;U.offset=Eg;U.size=Fg;U.state=Gg;U.stride=Hg;U.type=Ig;
U.w=Jg;U.x=Kg;U.y=Lg;U.z=Mg;ta.vert=Ng;ta.frag=Og;ja.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(e,l,c,b,f,a,n,d,p,aa,u,r,B,v,C,O,A,I,ea,N,Jc,q,z,k,da,P,K,w,na,G,ga,h,g,U,ka,la,gb,hc,sa,Pa){var X,H,L,Q,qa,M,Zb,$a,T,t,ia,ba,va,La,$b,Ua,V,pb,ca,ma,Rb,oc,tc,vd,yc,Y,J,ja,Ca,Lb,ab,Vc,E,y,ha,ta,W,fa,oa,D,x;X=e.attributes;H=e.buffer;L=e.context;Q=e.current;qa=e.draw;M=e.elements;Zb=e.extensions;
$a=e.framebuffer;T=e.gl;t=e.isBufferArgs;ia=e.next;ba=e.shader;va=e.uniforms;La=e.vao;$b=ia.blend_color;Ua=Q.blend_color;V=ia.blend_equation;pb=Q.blend_equation;ca=ia.blend_func;ma=Q.blend_func;Rb=ia.colorMask;oc=Q.colorMask;tc=ia.depth_range;vd=Q.depth_range;yc=ia.polygonOffset_offset;Y=Q.polygonOffset_offset;J=ia.sample_coverage;ja=Q.sample_coverage;Ca=ia.scissor_box;Lb=Q.scissor_box;ab=ia.stencil_func;Vc=Q.stencil_func;E=ia.stencil_opBack;y=Q.stencil_opBack;ha=ia.stencil_opFront;ta=Q.stencil_opFront;
W=ia.viewport;fa=Q.viewport;oa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};D={offset:4,stride:8};x={offset:0,stride:8};return{batch:function(a,b){var c,d,f,e,n,p,r,v,C,aa,u,A,R;c=$a.next;c!==$a.cur&&(c?T.bindFramebuffer(36160,c.framebuffer):T.bindFramebuffer(36160,null),$a.cur=c);if(Q.dirty){var B,O,W,ba,wa,ca,va,$b,Ve,af,bf,yd,Ce,Rd,Sd,ke,Je,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb;B=ia.dither;B!==Q.dither&&(B?T.enable(3024):
T.disable(3024),Q.dither=B);O=V[0];W=V[1];if(O!==pb[0]||W!==pb[1])T.blendEquationSeparate(O,W),pb[0]=O,pb[1]=W;ba=ia.depth_func;ba!==Q.depth_func&&(T.depthFunc(ba),Q.depth_func=ba);wa=tc[0];ca=tc[1];if(wa!==vd[0]||ca!==vd[1])T.depthRange(wa,ca),vd[0]=wa,vd[1]=ca;va=ia.depth_mask;va!==Q.depth_mask&&(T.depthMask(va),Q.depth_mask=va);$b=Rb[0];Ve=Rb[1];af=Rb[2];bf=Rb[3];if($b!==oc[0]||Ve!==oc[1]||af!==oc[2]||bf!==oc[3])T.colorMask($b,Ve,af,bf),oc[0]=$b,oc[1]=Ve,oc[2]=af,oc[3]=bf;yd=ia.cull_enable;yd!==
Q.cull_enable&&(yd?T.enable(2884):T.disable(2884),Q.cull_enable=yd);Ce=ia.cull_face;Ce!==Q.cull_face&&(T.cullFace(Ce),Q.cull_face=Ce);Rd=ia.frontFace;Rd!==Q.frontFace&&(T.frontFace(Rd),Q.frontFace=Rd);Sd=ia.lineWidth;Sd!==Q.lineWidth&&(T.lineWidth(Sd),Q.lineWidth=Sd);ke=ia.polygonOffset_enable;ke!==Q.polygonOffset_enable&&(ke?T.enable(32823):T.disable(32823),Q.polygonOffset_enable=ke);Je=yc[0];sd=yc[1];if(Je!==Y[0]||sd!==Y[1])T.polygonOffset(Je,sd),Y[0]=Je,Y[1]=sd;ld=ia.sample_alpha;ld!==Q.sample_alpha&&
(ld?T.enable(32926):T.disable(32926),Q.sample_alpha=ld);wd=ia.sample_enable;wd!==Q.sample_enable&&(wd?T.enable(32928):T.disable(32928),Q.sample_enable=wd);qd=J[0];Bc=J[1];if(qd!==ja[0]||Bc!==ja[1])T.sampleCoverage(qd,Bc),ja[0]=qd,ja[1]=Bc;lc=ia.stencil_mask;lc!==Q.stencil_mask&&(T.stencilMask(lc),Q.stencil_mask=lc);td=ab[0];gd=ab[1];Mc=ab[2];if(td!==Vc[0]||gd!==Vc[1]||Mc!==Vc[2])T.stencilFunc(td,gd,Mc),Vc[0]=td,Vc[1]=gd,Vc[2]=Mc;uc=ha[0];bb=ha[1];jc=ha[2];Db=ha[3];if(uc!==ta[0]||bb!==ta[1]||jc!==
ta[2]||Db!==ta[3])T.stencilOpSeparate(uc,bb,jc,Db),ta[0]=uc,ta[1]=bb,ta[2]=jc,ta[3]=Db;sc=E[0];Sa=E[1];Kc=E[2];bc=E[3];if(sc!==y[0]||Sa!==y[1]||Kc!==y[2]||bc!==y[3])T.stencilOpSeparate(sc,Sa,Kc,bc),y[0]=sc,y[1]=Sa,y[2]=Kc,y[3]=bc;Zc=ia.scissor_enable;Zc!==Q.scissor_enable&&(Zc?T.enable(3089):T.disable(3089),Q.scissor_enable=Zc);Cd=Ca[0];md=Ca[1];Cc=Ca[2];Xb=Ca[3];if(Cd!==Lb[0]||md!==Lb[1]||Cc!==Lb[2]||Xb!==Lb[3])T.scissor(Cd,md,Cc,Xb),Lb[0]=Cd,Lb[1]=md,Lb[2]=Cc,Lb[3]=Xb}d=this.viewport;f=d.x|0;e=
d.y|0;n="width"in d?d.width|0:L.framebufferWidth-f;p="height"in d?d.height|0:L.framebufferHeight-e;r=L.viewportWidth;L.viewportWidth=n;v=L.viewportHeight;L.viewportHeight=p;T.viewport(f,e,n,p);fa[0]=f;fa[1]=e;fa[2]=n;fa[3]=p;T.blendColor(0,0,0,1);Ua[0]=0;Ua[1]=0;Ua[2]=0;Ua[3]=1;T.enable(3042);Q.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;T.disable(2929);Q.depth_enable=!1;T.disable(2960);Q.stencil_enable=!1;if(C=Q.profile)aa=performance.now(),l.count+=b;
T.useProgram(I.program);u=Zb.angle_instanced_arrays;var Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,ff,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb;La.setVAO(null);x.buffer=this.sizeBuffer;Hc=!1;Sc=null;Ka=0;Eb=!1;pa=Wa=0;ud=1;Ib=0;Ra=5126;Sb=pc=eb=Gb=0;t(x)?(Hc=!0,Sc=H.createStream(34962,x),Ra=Sc.dtype):(Sc=H.getBuffer(x))?Ra=Sc.dtype:"constant"in x?(ud=2,"number"===typeof x.constant?
(eb=x.constant,pc=Sb=Gb=0):(eb=0<x.constant.length?x.constant[0]:0,pc=1<x.constant.length?x.constant[1]:0,Sb=2<x.constant.length?x.constant[2]:0,Gb=3<x.constant.length?x.constant[3]:0)):(Sc=t(x.buffer)?H.createStream(34962,x.buffer):H.getBuffer(x.buffer),Ra="type"in x?oa[x.type]:Sc.dtype,Eb=!!x.normalized,pa=x.size|0,Wa=x.offset|0,Ib=x.stride|0,Ka=x.divisor|0);ue=Pa.location;kc=X[ue];if(1===ud){kc.buffer||T.enableVertexAttribArray(ue);Tb=pa||1;if(kc.type!==Ra||kc.size!==Tb||kc.buffer!==Sc||kc.normalized!==
Eb||kc.offset!==Wa||kc.stride!==Ib)T.bindBuffer(34962,Sc.buffer),T.vertexAttribPointer(ue,Tb,Ra,Eb,Ib,Wa),kc.type=Ra,kc.size=Tb,kc.buffer=Sc,kc.normalized=Eb,kc.offset=Wa,kc.stride=Ib;kc.divisor!==Ka&&(u.vertexAttribDivisorANGLE(ue,Ka),kc.divisor=Ka)}else if(kc.buffer&&(T.disableVertexAttribArray(ue),kc.buffer=null),kc.x!==eb||kc.y!==pc||kc.z!==Sb||kc.w!==Gb)T.vertexAttrib4f(ue,eb,pc,Sb,Gb),kc.x=eb,kc.y=pc,kc.z=Sb,kc.w=Gb;D.buffer=this.sizeBuffer;hd=!1;Ub=null;Ma=0;qb=!1;jb=vb=0;Na=1;qc=0;Yb=5126;
ad=mc=fb=fd=0;t(D)?(hd=!0,Ub=H.createStream(34962,D),Yb=Ub.dtype):(Ub=H.getBuffer(D))?Yb=Ub.dtype:"constant"in D?(Na=2,"number"===typeof D.constant?(fb=D.constant,mc=ad=fd=0):(fb=0<D.constant.length?D.constant[0]:0,mc=1<D.constant.length?D.constant[1]:0,ad=2<D.constant.length?D.constant[2]:0,fd=3<D.constant.length?D.constant[3]:0)):(Ub=t(D.buffer)?H.createStream(34962,D.buffer):H.getBuffer(D.buffer),Yb="type"in D?oa[D.type]:Ub.dtype,qb=!!D.normalized,jb=D.size|0,vb=D.offset|0,qc=D.stride|0,Ma=D.divisor|
0);dc=G.location;lb=X[dc];if(1===Na){lb.buffer||T.enableVertexAttribArray(dc);mb=jb||1;if(lb.type!==Yb||lb.size!==mb||lb.buffer!==Ub||lb.normalized!==qb||lb.offset!==vb||lb.stride!==qc)T.bindBuffer(34962,Ub.buffer),T.vertexAttribPointer(dc,mb,Yb,qb,qc,vb),lb.type=Yb,lb.size=mb,lb.buffer=Ub,lb.normalized=qb,lb.offset=vb,lb.stride=qc;lb.divisor!==Ma&&(u.vertexAttribDivisorANGLE(dc,Ma),lb.divisor=Ma)}else if(lb.buffer&&(T.disableVertexAttribArray(dc),lb.buffer=null),lb.x!==fb||lb.y!==mc||lb.z!==ad||
lb.w!==fd)T.vertexAttrib4f(dc,fb,mc,ad,fd),lb.x=fb,lb.y=mc,lb.z=ad,lb.w=fd;ra=this.charBuffer;rb=!1;ua=null;Ta=0;cb=!1;hb=Aa=0;Ha=1;Bb=0;Ab=5126;Za=Jb=Lc=Qa=0;t(ra)?(rb=!0,ua=H.createStream(34962,ra),Ab=ua.dtype):(ua=H.getBuffer(ra))?Ab=ua.dtype:"constant"in ra?(Ha=2,"number"===typeof ra.constant?(Lc=ra.constant,Jb=Za=Qa=0):(Lc=0<ra.constant.length?ra.constant[0]:0,Jb=1<ra.constant.length?ra.constant[1]:0,Za=2<ra.constant.length?ra.constant[2]:0,Qa=3<ra.constant.length?ra.constant[3]:0)):(ua=t(ra.buffer)?
H.createStream(34962,ra.buffer):H.getBuffer(ra.buffer),Ab="type"in ra?oa[ra.type]:ua.dtype,cb=!!ra.normalized,hb=ra.size|0,Aa=ra.offset|0,Bb=ra.stride|0,Ta=ra.divisor|0);Vb=na.location;ya=X[Vb];if(1===Ha){ya.buffer||T.enableVertexAttribArray(Vb);ff=hb||1;if(ya.type!==Ab||ya.size!==ff||ya.buffer!==ua||ya.normalized!==cb||ya.offset!==Aa||ya.stride!==Bb)T.bindBuffer(34962,ua.buffer),T.vertexAttribPointer(Vb,ff,Ab,cb,Bb,Aa),ya.type=Ab,ya.size=ff,ya.buffer=ua,ya.normalized=cb,ya.offset=Aa,ya.stride=Bb;
ya.divisor!==Ta&&(u.vertexAttribDivisorANGLE(Vb,Ta),ya.divisor=Ta)}else if(ya.buffer&&(T.disableVertexAttribArray(Vb),ya.buffer=null),ya.x!==Lc||ya.y!==Jb||ya.z!==Za||ya.w!==Qa)T.vertexAttrib4f(Vb,Lc,Jb,Za,Qa),ya.x=Lc,ya.y=Jb,ya.z=Za,ya.w=Qa;Ja=this.position;Ob=!1;ib=null;kb=0;za=!1;Ea=ec=0;sb=1;tb=0;Xa=5126;wc=cd=nc=Ya=0;t(Ja)?(Ob=!0,ib=H.createStream(34962,Ja),Xa=ib.dtype):(ib=H.getBuffer(Ja))?Xa=ib.dtype:"constant"in Ja?(sb=2,"number"===typeof Ja.constant?(nc=Ja.constant,cd=wc=Ya=0):(nc=0<Ja.constant.length?
Ja.constant[0]:0,cd=1<Ja.constant.length?Ja.constant[1]:0,wc=2<Ja.constant.length?Ja.constant[2]:0,Ya=3<Ja.constant.length?Ja.constant[3]:0)):(ib=t(Ja.buffer)?H.createStream(34962,Ja.buffer):H.getBuffer(Ja.buffer),Xa="type"in Ja?oa[Ja.type]:ib.dtype,za=!!Ja.normalized,Ea=Ja.size|0,ec=Ja.offset|0,tb=Ja.stride|0,kb=Ja.divisor|0);Va=ka.location;Mb=X[Va];if(1===sb){Mb.buffer||T.enableVertexAttribArray(Va);Rc=Ea||2;if(Mb.type!==Xa||Mb.size!==Rc||Mb.buffer!==ib||Mb.normalized!==za||Mb.offset!==ec||Mb.stride!==
tb)T.bindBuffer(34962,ib.buffer),T.vertexAttribPointer(Va,Rc,Xa,za,tb,ec),Mb.type=Xa,Mb.size=Rc,Mb.buffer=ib,Mb.normalized=za,Mb.offset=ec,Mb.stride=tb;Mb.divisor!==kb&&(u.vertexAttribDivisorANGLE(Va,kb),Mb.divisor=kb)}else if(Mb.buffer&&(T.disableVertexAttribArray(Va),Mb.buffer=null),Mb.x!==nc||Mb.y!==cd||Mb.z!==wc||Mb.w!==Ya)T.vertexAttrib4f(Va,nc,cd,wc,Ya),Mb.x=nc,Mb.y=cd,Mb.z=wc,Mb.w=Ya;Fa=this.viewportArray;T.uniform4f(sa.location,Fa[0],Fa[1],Fa[2],Fa[3]);zc=this.scale;T.uniform2f(gb.location,
zc[0],zc[1]);Oa=this.translate;T.uniform2f(hc.location,Oa[0],Oa[1]);(Ba=qa.elements)?T.bindBuffer(34963,Ba.buffer.buffer):La.currentVAO&&(Ba=M.getElements(La.currentVAO.elements))&&T.bindBuffer(34963,Ba.buffer.buffer);nb=qa.instances;for(A=0;A<b;++A){R=a[A];var wb,Cb,ub,xc,xb,Id,vc,nf,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Ne,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc,od;wb=ea.call(this,L,R,A);A&&Cb===wb||(Cb=wb,T.uniform1f(ga.location,wb));ub=N.call(this,L,R,A);A&&xc===ub||(xc=ub,T.uniform1f(g.location,
ub));xb=R.align;A&&Id===xb||(Id=xb,T.uniform1f(k.location,xb));vc=R.baseline;A&&nf===vc||(nf=vc,T.uniform1f(w.location,vc));Nc=R.color;nd=Nc[0];Wb=Nc[1];Pb=Nc[2];ac=Nc[3];A&&dd===nd&&cc===Wb&&Ga===Pb&&ob===ac||(dd=nd,cc=Wb,Ga=Pb,ob=ac,T.uniform4f(h.location,nd,Wb,Pb,ac));yb=Jc.call(this,L,R,A);Nb=yb[0];fc=yb[1];A&&Qb===Nb&&ic===fc||(Qb=Nb,ic=fc,T.uniform2f(K.location,Nb,fc));Ne=q.call(this,L,R,A);Dc=Ne[0];Fc=Ne[1];A&&Ec===Dc&&Oc===Fc||(Ec=Dc,Oc=Fc,T.uniform2f(P.location,Dc,Fc));$c=R.positionOffset;
Tc=$c[0];Kb=$c[1];A&&Pc===Tc&&Fb===Kb||(Pc=Tc,Fb=Kb,T.uniform2f(la.location,Tc,Kb));Qc=R.opacity;A&&Ic===Qc||(Ic=Qc,T.uniform1f(U.location,Qc));(Uc=z.call(this,L,R,A))&&"framebuffer"===Uc._reglType&&(Uc=Uc.color[0]);gc=Uc._texture;T.uniform1i(da.location,gc.bind());Xc=R.offset;if(od=R.count)0<nb?Ba?u.drawElementsInstancedANGLE(0,od,Ba.type,Xc<<(Ba.type-5121>>1),nb):u.drawArraysInstancedANGLE(0,Xc,od,nb):0>nb&&(Ba?T.drawElements(0,od,Ba.type,Xc<<(Ba.type-5121>>1)):T.drawArrays(0,Xc,od)),gc.unbind()}Hc&&
H.destroyStream(Sc);hd&&H.destroyStream(Ub);rb&&H.destroyStream(ua);Ob&&H.destroyStream(ib);Q.dirty=!0;La.setVAO(null);L.viewportWidth=r;L.viewportHeight=v;C&&(l.cpuTime+=performance.now()-aa)},draw:function(e){var p,r,q,m,v,C,u,aa,A,z,R,B,I,O,N,W,ba,wa,ca,ea,va,db,$b,Jc,bf,yd,Ce,Rd,Sd,ke,Je,sd,ld,wd,qd,Bc,lc,td,gd,Mc,uc,bb,jc,Db,sc,Sa,Kc,bc,Zc,Cd,md,Cc,Xb,Hc,Sc,Ka,Eb,Wa,pa,ud,Ib,Ra,Gb,eb,pc,Sb,ue,kc,Tb,hd,Ub,Ma,qb,vb,jb,Na,qc,Yb,fd,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb;p=$a.next;p!==$a.cur&&(p?
T.bindFramebuffer(36160,p.framebuffer):T.bindFramebuffer(36160,null),$a.cur=p);if(Q.dirty){var Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,ff,Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc;Ha=ia.dither;Ha!==Q.dither&&(Ha?T.enable(3024):T.disable(3024),Q.dither=Ha);Bb=V[0];Ab=V[1];if(Bb!==pb[0]||Ab!==pb[1])T.blendEquationSeparate(Bb,Ab),pb[0]=Bb,pb[1]=Ab;Qa=ia.depth_func;Qa!==Q.depth_func&&(T.depthFunc(Qa),Q.depth_func=Qa);Lc=tc[0];Jb=tc[1];if(Lc!==vd[0]||Jb!==vd[1])T.depthRange(Lc,
Jb),vd[0]=Lc,vd[1]=Jb;Za=ia.depth_mask;Za!==Q.depth_mask&&(T.depthMask(Za),Q.depth_mask=Za);Vb=Rb[0];ya=Rb[1];ff=Rb[2];Ja=Rb[3];if(Vb!==oc[0]||ya!==oc[1]||ff!==oc[2]||Ja!==oc[3])T.colorMask(Vb,ya,ff,Ja),oc[0]=Vb,oc[1]=ya,oc[2]=ff,oc[3]=Ja;Ob=ia.cull_enable;Ob!==Q.cull_enable&&(Ob?T.enable(2884):T.disable(2884),Q.cull_enable=Ob);ib=ia.cull_face;ib!==Q.cull_face&&(T.cullFace(ib),Q.cull_face=ib);kb=ia.frontFace;kb!==Q.frontFace&&(T.frontFace(kb),Q.frontFace=kb);za=ia.lineWidth;za!==Q.lineWidth&&(T.lineWidth(za),
Q.lineWidth=za);ec=ia.polygonOffset_enable;ec!==Q.polygonOffset_enable&&(ec?T.enable(32823):T.disable(32823),Q.polygonOffset_enable=ec);Ea=yc[0];sb=yc[1];if(Ea!==Y[0]||sb!==Y[1])T.polygonOffset(Ea,sb),Y[0]=Ea,Y[1]=sb;tb=ia.sample_alpha;tb!==Q.sample_alpha&&(tb?T.enable(32926):T.disable(32926),Q.sample_alpha=tb);Xa=ia.sample_enable;Xa!==Q.sample_enable&&(Xa?T.enable(32928):T.disable(32928),Q.sample_enable=Xa);Ya=J[0];nc=J[1];if(Ya!==ja[0]||nc!==ja[1])T.sampleCoverage(Ya,nc),ja[0]=Ya,ja[1]=nc;cd=ia.stencil_mask;
cd!==Q.stencil_mask&&(T.stencilMask(cd),Q.stencil_mask=cd);wc=ab[0];Va=ab[1];Mb=ab[2];if(wc!==Vc[0]||Va!==Vc[1]||Mb!==Vc[2])T.stencilFunc(wc,Va,Mb),Vc[0]=wc,Vc[1]=Va,Vc[2]=Mb;Rc=ha[0];Fa=ha[1];zc=ha[2];Oa=ha[3];if(Rc!==ta[0]||Fa!==ta[1]||zc!==ta[2]||Oa!==ta[3])T.stencilOpSeparate(Rc,Fa,zc,Oa),ta[0]=Rc,ta[1]=Fa,ta[2]=zc,ta[3]=Oa;Ba=E[0];nb=E[1];wb=E[2];Cb=E[3];if(Ba!==y[0]||nb!==y[1]||wb!==y[2]||Cb!==y[3])T.stencilOpSeparate(Ba,nb,wb,Cb),y[0]=Ba,y[1]=nb,y[2]=wb,y[3]=Cb;ub=ia.scissor_enable;ub!==Q.scissor_enable&&
(ub?T.enable(3089):T.disable(3089),Q.scissor_enable=ub);xc=Ca[0];xb=Ca[1];Id=Ca[2];vc=Ca[3];if(xc!==Lb[0]||xb!==Lb[1]||Id!==Lb[2]||vc!==Lb[3])T.scissor(xc,xb,Id,vc),Lb[0]=xc,Lb[1]=xb,Lb[2]=Id,Lb[3]=vc}r=this.viewport;q=r.x|0;m=r.y|0;v="width"in r?r.width|0:L.framebufferWidth-q;C="height"in r?r.height|0:L.framebufferHeight-m;u=L.viewportWidth;L.viewportWidth=v;aa=L.viewportHeight;L.viewportHeight=C;T.viewport(q,m,v,C);fa[0]=q;fa[1]=m;fa[2]=v;fa[3]=C;T.blendColor(0,0,0,1);Ua[0]=0;Ua[1]=0;Ua[2]=0;Ua[3]=
1;T.enable(3042);Q.blend_enable=!0;T.blendFuncSeparate(770,771,773,1);ma[0]=770;ma[1]=771;ma[2]=773;ma[3]=1;T.disable(2929);Q.depth_enable=!1;T.disable(2960);Q.stencil_enable=!1;if(A=Q.profile)z=performance.now(),l.count++;T.useProgram(c.program);R=Zb.angle_instanced_arrays;La.setVAO(null);x.buffer=this.sizeBuffer;B=!1;I=null;O=0;N=!1;ba=W=0;wa=1;ca=0;ea=5126;Jc=$b=db=va=0;t(x)?(B=!0,I=H.createStream(34962,x),ea=I.dtype):(I=H.getBuffer(x))?ea=I.dtype:"constant"in x?(wa=2,"number"===typeof x.constant?
(db=x.constant,$b=Jc=va=0):(db=0<x.constant.length?x.constant[0]:0,$b=1<x.constant.length?x.constant[1]:0,Jc=2<x.constant.length?x.constant[2]:0,va=3<x.constant.length?x.constant[3]:0)):(I=t(x.buffer)?H.createStream(34962,x.buffer):H.getBuffer(x.buffer),ea="type"in x?oa[x.type]:I.dtype,N=!!x.normalized,ba=x.size|0,W=x.offset|0,ca=x.stride|0,O=x.divisor|0);bf=Pa.location;yd=X[bf];if(1===wa){yd.buffer||T.enableVertexAttribArray(bf);Ce=ba||1;if(yd.type!==ea||yd.size!==Ce||yd.buffer!==I||yd.normalized!==
N||yd.offset!==W||yd.stride!==ca)T.bindBuffer(34962,I.buffer),T.vertexAttribPointer(bf,Ce,ea,N,ca,W),yd.type=ea,yd.size=Ce,yd.buffer=I,yd.normalized=N,yd.offset=W,yd.stride=ca;yd.divisor!==O&&(R.vertexAttribDivisorANGLE(bf,O),yd.divisor=O)}else if(yd.buffer&&(T.disableVertexAttribArray(bf),yd.buffer=null),yd.x!==db||yd.y!==$b||yd.z!==Jc||yd.w!==va)T.vertexAttrib4f(bf,db,$b,Jc,va),yd.x=db,yd.y=$b,yd.z=Jc,yd.w=va;D.buffer=this.sizeBuffer;Rd=!1;Sd=null;ke=0;Je=!1;ld=sd=0;wd=1;qd=0;Bc=5126;Mc=gd=td=lc=
0;t(D)?(Rd=!0,Sd=H.createStream(34962,D),Bc=Sd.dtype):(Sd=H.getBuffer(D))?Bc=Sd.dtype:"constant"in D?(wd=2,"number"===typeof D.constant?(td=D.constant,gd=Mc=lc=0):(td=0<D.constant.length?D.constant[0]:0,gd=1<D.constant.length?D.constant[1]:0,Mc=2<D.constant.length?D.constant[2]:0,lc=3<D.constant.length?D.constant[3]:0)):(Sd=t(D.buffer)?H.createStream(34962,D.buffer):H.getBuffer(D.buffer),Bc="type"in D?oa[D.type]:Sd.dtype,Je=!!D.normalized,ld=D.size|0,sd=D.offset|0,qd=D.stride|0,ke=D.divisor|0);uc=
G.location;bb=X[uc];if(1===wd){bb.buffer||T.enableVertexAttribArray(uc);jc=ld||1;if(bb.type!==Bc||bb.size!==jc||bb.buffer!==Sd||bb.normalized!==Je||bb.offset!==sd||bb.stride!==qd)T.bindBuffer(34962,Sd.buffer),T.vertexAttribPointer(uc,jc,Bc,Je,qd,sd),bb.type=Bc,bb.size=jc,bb.buffer=Sd,bb.normalized=Je,bb.offset=sd,bb.stride=qd;bb.divisor!==ke&&(R.vertexAttribDivisorANGLE(uc,ke),bb.divisor=ke)}else if(bb.buffer&&(T.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==td||bb.y!==gd||bb.z!==Mc||bb.w!==
lc)T.vertexAttrib4f(uc,td,gd,Mc,lc),bb.x=td,bb.y=gd,bb.z=Mc,bb.w=lc;Db=this.charBuffer;sc=!1;Sa=null;Kc=0;bc=!1;Cd=Zc=0;md=1;Cc=0;Xb=5126;Eb=Ka=Sc=Hc=0;t(Db)?(sc=!0,Sa=H.createStream(34962,Db),Xb=Sa.dtype):(Sa=H.getBuffer(Db))?Xb=Sa.dtype:"constant"in Db?(md=2,"number"===typeof Db.constant?(Sc=Db.constant,Ka=Eb=Hc=0):(Sc=0<Db.constant.length?Db.constant[0]:0,Ka=1<Db.constant.length?Db.constant[1]:0,Eb=2<Db.constant.length?Db.constant[2]:0,Hc=3<Db.constant.length?Db.constant[3]:0)):(Sa=t(Db.buffer)?
H.createStream(34962,Db.buffer):H.getBuffer(Db.buffer),Xb="type"in Db?oa[Db.type]:Sa.dtype,bc=!!Db.normalized,Cd=Db.size|0,Zc=Db.offset|0,Cc=Db.stride|0,Kc=Db.divisor|0);Wa=na.location;pa=X[Wa];if(1===md){pa.buffer||T.enableVertexAttribArray(Wa);ud=Cd||1;if(pa.type!==Xb||pa.size!==ud||pa.buffer!==Sa||pa.normalized!==bc||pa.offset!==Zc||pa.stride!==Cc)T.bindBuffer(34962,Sa.buffer),T.vertexAttribPointer(Wa,ud,Xb,bc,Cc,Zc),pa.type=Xb,pa.size=ud,pa.buffer=Sa,pa.normalized=bc,pa.offset=Zc,pa.stride=Cc;
pa.divisor!==Kc&&(R.vertexAttribDivisorANGLE(Wa,Kc),pa.divisor=Kc)}else if(pa.buffer&&(T.disableVertexAttribArray(Wa),pa.buffer=null),pa.x!==Sc||pa.y!==Ka||pa.z!==Eb||pa.w!==Hc)T.vertexAttrib4f(Wa,Sc,Ka,Eb,Hc),pa.x=Sc,pa.y=Ka,pa.z=Eb,pa.w=Hc;Ib=this.position;Ra=!1;Gb=null;eb=0;pc=!1;ue=Sb=0;kc=1;Tb=0;hd=5126;vb=qb=Ma=Ub=0;t(Ib)?(Ra=!0,Gb=H.createStream(34962,Ib),hd=Gb.dtype):(Gb=H.getBuffer(Ib))?hd=Gb.dtype:"constant"in Ib?(kc=2,"number"===typeof Ib.constant?(Ma=Ib.constant,qb=vb=Ub=0):(Ma=0<Ib.constant.length?
Ib.constant[0]:0,qb=1<Ib.constant.length?Ib.constant[1]:0,vb=2<Ib.constant.length?Ib.constant[2]:0,Ub=3<Ib.constant.length?Ib.constant[3]:0)):(Gb=t(Ib.buffer)?H.createStream(34962,Ib.buffer):H.getBuffer(Ib.buffer),hd="type"in Ib?oa[Ib.type]:Gb.dtype,pc=!!Ib.normalized,ue=Ib.size|0,Sb=Ib.offset|0,Tb=Ib.stride|0,eb=Ib.divisor|0);jb=ka.location;Na=X[jb];if(1===kc){Na.buffer||T.enableVertexAttribArray(jb);qc=ue||2;if(Na.type!==hd||Na.size!==qc||Na.buffer!==Gb||Na.normalized!==pc||Na.offset!==Sb||Na.stride!==
Tb)T.bindBuffer(34962,Gb.buffer),T.vertexAttribPointer(jb,qc,hd,pc,Tb,Sb),Na.type=hd,Na.size=qc,Na.buffer=Gb,Na.normalized=pc,Na.offset=Sb,Na.stride=Tb;Na.divisor!==eb&&(R.vertexAttribDivisorANGLE(jb,eb),Na.divisor=eb)}else if(Na.buffer&&(T.disableVertexAttribArray(jb),Na.buffer=null),Na.x!==Ma||Na.y!==qb||Na.z!==vb||Na.w!==Ub)T.vertexAttrib4f(jb,Ma,qb,vb,Ub),Na.x=Ma,Na.y=qb,Na.z=vb,Na.w=Ub;Yb=b.call(this,L,e,0);T.uniform1f(ga.location,Yb);fd=f.call(this,L,e,0);T.uniform1f(g.location,fd);T.uniform1f(k.location,
e.align);T.uniform1f(w.location,e.baseline);fb=this.viewportArray;T.uniform4f(sa.location,fb[0],fb[1],fb[2],fb[3]);mc=e.color;T.uniform4f(h.location,mc[0],mc[1],mc[2],mc[3]);ad=a.call(this,L,e,0);T.uniform2f(K.location,ad[0],ad[1]);dc=n.call(this,L,e,0);T.uniform2f(P.location,dc[0],dc[1]);lb=this.scale;T.uniform2f(gb.location,lb[0],lb[1]);mb=this.translate;T.uniform2f(hc.location,mb[0],mb[1]);ra=e.positionOffset;T.uniform2f(la.location,ra[0],ra[1]);T.uniform1f(U.location,e.opacity);(rb=d.call(this,
L,e,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);ua=rb._texture;T.uniform1i(da.location,ua.bind());(Ta=qa.elements)?T.bindBuffer(34963,Ta.buffer.buffer):La.currentVAO&&(Ta=M.getElements(La.currentVAO.elements))&&T.bindBuffer(34963,Ta.buffer.buffer);cb=e.offset;if(Aa=e.count)hb=qa.instances,0<hb?Ta?R.drawElementsInstancedANGLE(0,Aa,Ta.type,cb<<(Ta.type-5121>>1),hb):R.drawArraysInstancedANGLE(0,cb,Aa,hb):0>hb&&(Ta?T.drawElements(0,Aa,Ta.type,cb<<(Ta.type-5121>>1)):T.drawArrays(0,cb,Aa)),Q.dirty=
!0,La.setVAO(null),L.viewportWidth=u,L.viewportHeight=aa,A&&(l.cpuTime+=performance.now()-z),B&&H.destroyStream(I),Rd&&H.destroyStream(Sd),sc&&H.destroyStream(Sa),Ra&&H.destroyStream(Gb),ua.unbind()},scope:function(a,b,c){var d,f,e,g,h,k,n,q,w,y,z,E,J,I,G,K,N,M,Y,P,T,U,V,fa,X,da,ha,ga,ja,ta,ea,ka,la,na,ma,sa,Ca,db,La,Pa,ab,Ua,$a,Sa,yc,gb,pb,Lb,vd,Rb,Xb,Zb,oc,Ka,Eb,Wa,pa,hc,Ib,Ra,Gb,eb,pc,Sb,tc,kc,Tb,Jc,Ub,Ma,qb,vb,jb,Na,qc,Yb,Vc,fb,mc,ad,dc,lb,mb,ra,rb,ua,Ta,cb,Aa,hb,Ha,Bb,Ab,Qa,Lc,Jb,Za,Vb,ya,ff,
Ja,Ob,ib,kb,za,ec,Ea,sb,tb,Xa,Ya,nc,cd,wc,Va,Mb,Rc,Fa,zc,Oa,Ba,nb,wb,Cb,ub,xc,xb,Id,vc,nf,Nc,nd,dd,Wb,cc,Pb,Ga,ac,ob,yb,Nb,Qb,fc,ic,Ne,Dc,Ec,Fc,Oc,$c,Tc,Pc,Kb,Fb,Qc,Ic,Uc,gc,Xc;d=this.viewport;f=d.x|0;e=d.y|0;g="width"in d?d.width|0:L.framebufferWidth-f;h="height"in d?d.height|0:L.framebufferHeight-e;k=L.viewportWidth;L.viewportWidth=g;n=L.viewportHeight;L.viewportHeight=h;q=W[0];W[0]=f;w=W[1];W[1]=e;y=W[2];W[2]=g;z=W[3];W[3]=h;E=$b[0];$b[0]=0;J=$b[1];$b[1]=0;I=$b[2];$b[2]=0;G=$b[3];$b[3]=1;K=ia.blend_enable;
ia.blend_enable=!0;N=ca[0];ca[0]=770;M=ca[1];ca[1]=771;Y=ca[2];ca[2]=773;P=ca[3];ca[3]=1;T=ia.depth_enable;ia.depth_enable=!1;U=ia.stencil_enable;ia.stencil_enable=!1;if(V=Q.profile)fa=performance.now(),l.count++;X=a.offset;da=qa.offset;qa.offset=X;ha=a.count;ga=qa.count;qa.count=ha;ja=qa.primitive;qa.primitive=0;ta=a.align;ea=va[64];va[64]=ta;ka=p.call(this,L,a,c);la=va[69];va[69]=ka;na=aa.call(this,L,a,c);ma=va[67];va[67]=na;sa=u.call(this,L,a,c);Ca=va[66];va[66]=sa;db=a.baseline;La=va[65];va[65]=
db;Pa=r.call(this,L,a,c);ab=va[62];va[62]=Pa;Ua=a.color;$a=va[14];va[14]=Ua;Sa=B.call(this,L,a,c);yc=va[63];va[63]=Sa;gb=a.opacity;pb=va[10];va[10]=gb;Lb=a.positionOffset;vd=va[68];va[68]=Lb;Rb=this.scale;Xb=va[6];va[6]=Rb;Zb=this.translate;oc=va[8];va[8]=Zb;Ka=this.viewportArray;Eb=va[3];va[3]=Ka;Wa=this.charBuffer;pa=!1;hc=null;Ib=0;Ra=!1;eb=Gb=0;pc=1;Sb=0;tc=5126;Ub=Jc=Tb=kc=0;t(Wa)?(pa=!0,hc=H.createStream(34962,Wa),tc=hc.dtype):(hc=H.getBuffer(Wa))?tc=hc.dtype:"constant"in Wa?(pc=2,"number"===
typeof Wa.constant?(Tb=Wa.constant,Jc=Ub=kc=0):(Tb=0<Wa.constant.length?Wa.constant[0]:0,Jc=1<Wa.constant.length?Wa.constant[1]:0,Ub=2<Wa.constant.length?Wa.constant[2]:0,kc=3<Wa.constant.length?Wa.constant[3]:0)):(hc=t(Wa.buffer)?H.createStream(34962,Wa.buffer):H.getBuffer(Wa.buffer),tc="type"in Wa?oa[Wa.type]:hc.dtype,Ra=!!Wa.normalized,eb=Wa.size|0,Gb=Wa.offset|0,Sb=Wa.stride|0,Ib=Wa.divisor|0);Ma=v.buffer;v.buffer=hc;qb=v.divisor;v.divisor=Ib;vb=v.normalized;v.normalized=Ra;jb=v.offset;v.offset=
Gb;Na=v.size;v.size=eb;qc=v.state;v.state=pc;Yb=v.stride;v.stride=Sb;Vc=v.type;v.type=tc;fb=v.w;v.w=kc;mc=v.x;v.x=Tb;ad=v.y;v.y=Jc;dc=v.z;v.z=Ub;D.buffer=this.sizeBuffer;lb=!1;mb=null;ra=0;rb=!1;Ta=ua=0;cb=1;Aa=0;hb=5126;Qa=Ab=Bb=Ha=0;t(D)?(lb=!0,mb=H.createStream(34962,D),hb=mb.dtype):(mb=H.getBuffer(D))?hb=mb.dtype:"constant"in D?(cb=2,"number"===typeof D.constant?(Bb=D.constant,Ab=Qa=Ha=0):(Bb=0<D.constant.length?D.constant[0]:0,Ab=1<D.constant.length?D.constant[1]:0,Qa=2<D.constant.length?D.constant[2]:
0,Ha=3<D.constant.length?D.constant[3]:0)):(mb=t(D.buffer)?H.createStream(34962,D.buffer):H.getBuffer(D.buffer),hb="type"in D?oa[D.type]:mb.dtype,rb=!!D.normalized,Ta=D.size|0,ua=D.offset|0,Aa=D.stride|0,ra=D.divisor|0);Lc=C.buffer;C.buffer=mb;Jb=C.divisor;C.divisor=ra;Za=C.normalized;C.normalized=rb;Vb=C.offset;C.offset=ua;ya=C.size;C.size=Ta;ff=C.state;C.state=cb;Ja=C.stride;C.stride=Aa;Ob=C.type;C.type=hb;ib=C.w;C.w=Ha;kb=C.x;C.x=Bb;za=C.y;C.y=Ab;ec=C.z;C.z=Qa;Ea=this.position;sb=!1;tb=null;Xa=
0;Ya=!1;cd=nc=0;wc=1;Va=0;Mb=5126;Oa=zc=Fa=Rc=0;t(Ea)?(sb=!0,tb=H.createStream(34962,Ea),Mb=tb.dtype):(tb=H.getBuffer(Ea))?Mb=tb.dtype:"constant"in Ea?(wc=2,"number"===typeof Ea.constant?(Fa=Ea.constant,zc=Oa=Rc=0):(Fa=0<Ea.constant.length?Ea.constant[0]:0,zc=1<Ea.constant.length?Ea.constant[1]:0,Oa=2<Ea.constant.length?Ea.constant[2]:0,Rc=3<Ea.constant.length?Ea.constant[3]:0)):(tb=t(Ea.buffer)?H.createStream(34962,Ea.buffer):H.getBuffer(Ea.buffer),Mb="type"in Ea?oa[Ea.type]:tb.dtype,Ya=!!Ea.normalized,
cd=Ea.size|0,nc=Ea.offset|0,Va=Ea.stride|0,Xa=Ea.divisor|0);Ba=O.buffer;O.buffer=tb;nb=O.divisor;O.divisor=Xa;wb=O.normalized;O.normalized=Ya;Cb=O.offset;O.offset=nc;ub=O.size;O.size=cd;xc=O.state;O.state=wc;xb=O.stride;O.stride=Va;Id=O.type;O.type=Mb;vc=O.w;O.w=Rc;nf=O.x;O.x=Fa;Nc=O.y;O.y=zc;nd=O.z;O.z=Oa;x.buffer=this.sizeBuffer;dd=!1;Wb=null;cc=0;Pb=!1;ac=Ga=0;ob=1;yb=0;Nb=5126;Ne=ic=fc=Qb=0;t(x)?(dd=!0,Wb=H.createStream(34962,x),Nb=Wb.dtype):(Wb=H.getBuffer(x))?Nb=Wb.dtype:"constant"in x?(ob=
2,"number"===typeof x.constant?(fc=x.constant,ic=Ne=Qb=0):(fc=0<x.constant.length?x.constant[0]:0,ic=1<x.constant.length?x.constant[1]:0,Ne=2<x.constant.length?x.constant[2]:0,Qb=3<x.constant.length?x.constant[3]:0)):(Wb=t(x.buffer)?H.createStream(34962,x.buffer):H.getBuffer(x.buffer),Nb="type"in x?oa[x.type]:Wb.dtype,Pb=!!x.normalized,ac=x.size|0,Ga=x.offset|0,yb=x.stride|0,cc=x.divisor|0);Dc=A.buffer;A.buffer=Wb;Ec=A.divisor;A.divisor=cc;Fc=A.normalized;A.normalized=Pb;Oc=A.offset;A.offset=Ga;$c=
A.size;A.size=ac;Tc=A.state;A.state=ob;Pc=A.stride;A.stride=yb;Kb=A.type;A.type=Nb;Fb=A.w;A.w=Qb;Qc=A.x;A.x=fc;Ic=A.y;A.y=ic;Uc=A.z;A.z=Ne;gc=ba.vert;ba.vert=61;Xc=ba.frag;ba.frag=60;Q.dirty=!0;b(L,a,c);L.viewportWidth=k;L.viewportHeight=n;W[0]=q;W[1]=w;W[2]=y;W[3]=z;$b[0]=E;$b[1]=J;$b[2]=I;$b[3]=G;ia.blend_enable=K;ca[0]=N;ca[1]=M;ca[2]=Y;ca[3]=P;ia.depth_enable=T;ia.stencil_enable=U;V&&(l.cpuTime+=performance.now()-fa);qa.offset=da;qa.count=ga;qa.primitive=ja;va[64]=ea;va[69]=la;va[67]=ma;va[66]=
Ca;va[65]=La;va[62]=ab;va[14]=$a;va[63]=yc;va[10]=pb;va[68]=vd;va[6]=Xb;va[8]=oc;va[3]=Eb;pa&&H.destroyStream(hc);v.buffer=Ma;v.divisor=qb;v.normalized=vb;v.offset=jb;v.size=Na;v.state=qc;v.stride=Yb;v.type=Vc;v.w=fb;v.x=mc;v.y=ad;v.z=dc;lb&&H.destroyStream(mb);C.buffer=Lc;C.divisor=Jb;C.normalized=Za;C.offset=Vb;C.size=ya;C.state=ff;C.stride=Ja;C.type=Ob;C.w=ib;C.x=kb;C.y=za;C.z=ec;sb&&H.destroyStream(tb);O.buffer=Ba;O.divisor=nb;O.normalized=wb;O.offset=Cb;O.size=ub;O.state=xc;O.stride=xb;O.type=
Id;O.w=vc;O.x=nf;O.y=Nc;O.z=nd;dd&&H.destroyStream(Wb);A.buffer=Dc;A.divisor=Ec;A.normalized=Fc;A.offset=Oc;A.size=$c;A.state=Tc;A.stride=Pc;A.type=Kb;A.w=Fb;A.x=Qc;A.y=Ic;A.z=Uc;ba.vert=gc;ba.frag=Xc;Q.dirty=!0}}}}},{}],25:[function(u,B,ea){var e=u("./sorted-object-keys");B.exports=function(l,c){for(var b=e(c),f=0;f<b.length;++f)l[b[f]]=c[b[f]];return l}},{"./sorted-object-keys":34}],26:[function(u,B,ea){function e(b,c,a,e,d,l){for(var u=0;u<c;++u)for(var R=b[u],r=0;r<a;++r)for(var B=R[r],v=0;v<
e;++v)d[l++]=B[v]}function l(b,c,a,n,d){for(var p=1,u=a+1;u<c.length;++u)p*=c[u];var R=c[a];if(4===c.length-a){var r=c[a+1],B=c[a+2];c=c[a+3];for(u=0;u<R;++u)e(b[u],r,B,c,n,d),d+=p}else for(u=0;u<R;++u)l(b[u],c,a+1,n,d),d+=p}var c=u("./pool");B.exports={shape:function(b){for(var c=[];b.length;b=b[0])c.push(b.length);return c},flatten:function(b,f,a,n){var d=1;if(f.length)for(var p=0;p<f.length;++p)d*=f[p];else d=0;a=n||c.allocType(a,d);switch(f.length){case 0:break;case 1:n=f[0];for(f=0;f<n;++f)a[f]=
b[f];break;case 2:n=f[0];f=f[1];for(p=d=0;p<n;++p)for(var u=b[p],R=0;R<f;++R)a[d++]=u[R];break;case 3:e(b,f[0],f[1],f[2],a,0);break;default:l(b,f,0,a,0)}return a}}},{"./pool":32}],27:[function(u,B,ea){var e=u("./is-typed-array");B.exports=function(l){return Array.isArray(l)||e(l)}},{"./is-typed-array":30}],28:[function(u,B,ea){var e=u("./is-typed-array");B.exports=function(l){return!!l&&"object"===typeof l&&Array.isArray(l.shape)&&Array.isArray(l.stride)&&"number"===typeof l.offset&&l.shape.length===
l.stride.length&&(Array.isArray(l.data)||e(l.data))}},{"./is-typed-array":30}],29:[function(u,B,ea){B.exports=function(e){return!(e&e-1)&&!!e}},{}],30:[function(u,B,ea){B.exports=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray}},{}],31:[function(u,B,ea){B.exports=function(e,l){for(var c=Array(e),
b=0;b<e;++b)c[b]=l(b);return c}},{}],32:[function(u,B,ea){function e(b){var c,a;c=(65535<b)<<4;b>>>=c;a=(255<b)<<3;b>>>=a;c|=a;a=(15<b)<<2;b>>>=a;c|=a;a=(3<b)<<1;return c|a|b>>>a>>1}function l(){function b(b){a:{for(var c=16;268435456>=c;c*=16)if(b<=c){b=c;break a}b=0}c=a[e(b)>>2];return 0<c.length?c.pop():new ArrayBuffer(b)}function f(b){a[e(b.byteLength)>>2].push(b)}var a=c(8,function(){return[]});return{alloc:b,free:f,allocType:function(a,c){var f=null;switch(a){case 5120:f=new Int8Array(b(c),
0,c);break;case 5121:f=new Uint8Array(b(c),0,c);break;case 5122:f=new Int16Array(b(2*c),0,c);break;case 5123:f=new Uint16Array(b(2*c),0,c);break;case 5124:f=new Int32Array(b(4*c),0,c);break;case 5125:f=new Uint32Array(b(4*c),0,c);break;case 5126:f=new Float32Array(b(4*c),0,c);break;default:return null}return f.length!==c?f.subarray(0,c):f},freeType:function(a){f(a.buffer)}}}var c=u("./loop");u=l();u.zero=l();B.exports=u},{"./loop":31}],33:[function(u,B,ea){B.exports={next:"function"===typeof requestAnimationFrame?
function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout}},{}],34:[function(u,B,ea){B.exports=function(e){return Object.keys(e).sort()}},{}],35:[function(u,B,ea){var e=u("./pool"),l=new Float32Array(1),c=new Uint32Array(l.buffer);B.exports=function(b){for(var f=e.allocType(5123,b.length),a=0;a<b.length;++a)if(isNaN(b[a]))f[a]=65535;else if(Infinity===b[a])f[a]=31744;else if(-Infinity===
b[a])f[a]=64512;else{l[0]=b[a];var n=c[0],d=n>>>31<<15,p=(n<<1>>>24)-127,n=n>>13&1023;f[a]=-24>p?d:-14>p?d+(n+1024>>-14-p):15<p?d+31744:d+(p+15<<10)+n}return f}},{"./pool":32}],36:[function(u,B,ea){var e=u("./sorted-object-keys");B.exports=function(l){return e(l).map(function(c){return l[c]})}},{"./sorted-object-keys":34}],37:[function(u,B,ea){function e(b,c,f){function e(){var a=window.innerWidth,c=window.innerHeight;b!==document.body&&(c=l.getBoundingClientRect(),a=c.right-c.left,c=c.bottom-c.top);
l.width=f*a;l.height=f*c}var l=document.createElement("canvas");a(l.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(l);b===document.body&&(l.style.position="absolute",a(b.style,{margin:0,padding:0}));var r;b!==document.body&&"function"===typeof ResizeObserver?(r=new ResizeObserver(function(){setTimeout(e)}),r.observe(b)):window.addEventListener("resize",e,!1);e();return{canvas:l,onDestroy:function(){r?r.disconnect():window.removeEventListener("resize",e);
b.removeChild(l)}}}function l(a,b){function c(f){try{return a.getContext(f,b)}catch(e){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function c(a){if("string"===typeof a)return a.split();f(Array.isArray(a),"invalid extension array");return a}function b(a){return"string"===typeof a?(f("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var f=u("./util/check"),a=u("./util/extend");B.exports=function(a){var d=a||{},p,u,R,r;a={};
var B=[],v=[],C="undefined"===typeof window?1:window.devicePixelRatio,O=!1,A=function(a){a&&f.raise(a)},I=function(){};"string"===typeof d?(f("undefined"!==typeof document,"selector queries only supported in DOM environments"),p=document.querySelector(d),f(p,"invalid query string for element")):"object"===typeof d?"string"===typeof d.nodeName&&"function"===typeof d.appendChild&&"function"===typeof d.getBoundingClientRect?p=d:"function"===typeof d.drawArrays||"function"===typeof d.drawElements?(r=
d,R=r.canvas):(f.constructor(d),"gl"in d?r=d.gl:"canvas"in d?R=b(d.canvas):"container"in d&&(u=b(d.container)),"attributes"in d&&(a=d.attributes,f.type(a,"object","invalid context attributes")),"extensions"in d&&(B=c(d.extensions)),"optionalExtensions"in d&&(v=c(d.optionalExtensions)),"onDone"in d&&(f.type(d.onDone,"function","invalid or missing onDone callback"),A=d.onDone),"profile"in d&&(O=!!d.profile),"pixelRatio"in d&&(C=+d.pixelRatio,f(0<C,"invalid pixel ratio"))):f.raise("invalid arguments to regl");
p&&("canvas"===p.nodeName.toLowerCase()?R=p:u=p);if(!r){if(!R){f("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");p=e(u||document.body,A,C);if(!p)return null;R=p.canvas;I=p.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0);r=l(R,a)}return r?{gl:r,canvas:R,container:u,extensions:B,optionalExtensions:v,pixelRatio:C,profile:O,onDone:A,onDestroy:I}:(I(),A("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(u,B,ea){u("webrtc-adapter");B.exports=function(e,l){var c,b={video:!0,audio:!0};2!==arguments.length&&(l=e,e=b);if("undefined"===typeof navigator||!navigator.getUserMedia)return c=Error("MediaStreamError"),c.name="NotSupportedError",setTimeout(function(){l(c)},0);if(!e.audio&&!e.video)return c=Error("MediaStreamError"),c.name="NoMediaRequestedError",setTimeout(function(){l(c)},0);localStorage&&"true"===localStorage.useFirefoxFakeDevice&&
(e.fake=!0);navigator.mediaDevices.getUserMedia(e).then(function(b){l(null,b)})["catch"](function(b){var a;"string"===typeof b?(a=Error("MediaStreamError"),a.name="PermissionDeniedError"===b||"PERMISSION_DENIED"===b?"PermissionDeniedError":"ConstraintNotSatisfiedError"):(a=b,a.name||(b.name=a.PermissionDeniedError?"PermissionDeniedError":"ConstraintNotSatisfiedError"));l(a)})}},{"webrtc-adapter":40}],39:[function(u,B,ea){var e={generateIdentifier:function(){return Math.random().toString(36).substr(2,
10)}};e.localCName=e.generateIdentifier();e.splitLines=function(e){return e.trim().split("\n").map(function(c){return c.trim()})};e.splitSections=function(e){return e.split("\nm=").map(function(c,b){return(0<b?"m="+c:c).trim()+"\r\n"})};e.matchPrefix=function(l,c){return e.splitLines(l).filter(function(b){return 0===b.indexOf(c)})};e.parseCandidate=function(e){e=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var c={foundation:e[0],component:e[1],protocol:e[2].toLowerCase(),
priority:parseInt(e[3],10),ip:e[4],port:parseInt(e[5],10),type:e[7]},b=8;b<e.length;b+=2)switch(e[b]){case "raddr":c.relatedAddress=e[b+1];break;case "rport":c.relatedPort=parseInt(e[b+1],10);break;case "tcptype":c.tcpType=e[b+1];break;default:c[e[b]]=e[b+1]}return c};e.writeCandidate=function(e){var c=[];c.push(e.foundation);c.push(e.component);c.push(e.protocol.toUpperCase());c.push(e.priority);c.push(e.ip);c.push(e.port);var b=e.type;c.push("typ");c.push(b);"host"!==b&&e.relatedAddress&&e.relatedPort&&
(c.push("raddr"),c.push(e.relatedAddress),c.push("rport"),c.push(e.relatedPort));e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(c.push("tcptype"),c.push(e.tcpType));return"candidate:"+c.join(" ")};e.parseIceOptions=function(e){return e.substr(14).split(" ")};e.parseRtpMap=function(e){e=e.substr(9).split(" ");var c={payloadType:parseInt(e.shift(),10)};e=e[0].split("/");c.name=e[0];c.clockRate=parseInt(e[1],10);c.numChannels=3===e.length?parseInt(e[2],10):1;return c};e.writeRtpMap=function(e){var c=
e.payloadType;void 0!==e.preferredPayloadType&&(c=e.preferredPayloadType);return"a=rtpmap:"+c+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"};e.parseExtmap=function(e){e=e.substr(9).split(" ");return{id:parseInt(e[0],10),direction:0<e[0].indexOf("/")?e[0].split("/")[1]:"sendrecv",uri:e[1]}};e.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"};e.parseFmtp=function(e){for(var c={},b=
e.substr(e.indexOf(" ")+1).split(";"),f=0;f<b.length;f++)e=b[f].trim().split("="),c[e[0].trim()]=e[1];return c};e.writeFmtp=function(e){var c="",b=e.payloadType;void 0!==e.preferredPayloadType&&(b=e.preferredPayloadType);if(e.parameters&&Object.keys(e.parameters).length){var f=[];Object.keys(e.parameters).forEach(function(a){f.push(a+"="+e.parameters[a])});c+="a=fmtp:"+b+" "+f.join(";")+"\r\n"}return c};e.parseRtcpFb=function(e){e=e.substr(e.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}};
e.writeRtcpFb=function(e){var c="",b=e.payloadType;void 0!==e.preferredPayloadType&&(b=e.preferredPayloadType);e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){c+="a=rtcp-fb:"+b+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"});return c};e.parseSsrcMedia=function(e){var c=e.indexOf(" "),b={ssrc:parseInt(e.substr(7,c-7),10)},f=e.indexOf(":",c);-1<f?(b.attribute=e.substr(c+1,f-c-1),b.value=e.substr(f+1)):b.attribute=e.substr(c+1);return b};e.getMid=function(l){if(l=
e.matchPrefix(l,"a=mid:")[0])return l.substr(6)};e.parseFingerprint=function(e){e=e.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}};e.getDtlsParameters=function(l,c){return{role:"auto",fingerprints:e.matchPrefix(l+c,"a=fingerprint:").map(e.parseFingerprint)}};e.writeDtlsParameters=function(e,c){var b="a=setup:"+c+"\r\n";e.fingerprints.forEach(function(c){b+="a=fingerprint:"+c.algorithm+" "+c.value+"\r\n"});return b};e.getIceParameters=function(l,c){var b=e.splitLines(l),b=b.concat(e.splitLines(c));
return{usernameFragment:b.filter(function(b){return 0===b.indexOf("a=ice-ufrag:")})[0].substr(12),password:b.filter(function(b){return 0===b.indexOf("a=ice-pwd:")})[0].substr(10)}};e.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"};e.parseRtpParameters=function(l){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},b=e.splitLines(l)[0].split(" "),f=3;f<b.length;f++){var a=b[f],n=e.matchPrefix(l,"a=rtpmap:"+a+" ")[0];if(n){var n=
e.parseRtpMap(n),d=e.matchPrefix(l,"a=fmtp:"+a+" ");n.parameters=d.length?e.parseFmtp(d[0]):{};n.rtcpFeedback=e.matchPrefix(l,"a=rtcp-fb:"+a+" ").map(e.parseRtcpFb);c.codecs.push(n);switch(n.name.toUpperCase()){case "RED":case "ULPFEC":c.fecMechanisms.push(n.name.toUpperCase())}}}e.matchPrefix(l,"a=extmap:").forEach(function(a){c.headerExtensions.push(e.parseExtmap(a))});return c};e.writeRtpDescription=function(l,c){var b="",b=b+("m="+l+" "),b=b+(0<c.codecs.length?"9":"0"),b=b+" UDP/TLS/RTP/SAVPF ",
b=b+(c.codecs.map(function(a){return void 0!==a.preferredPayloadType?a.preferredPayloadType:a.payloadType}).join(" ")+"\r\n"),b=b+"c=IN IP4 0.0.0.0\r\n",b=b+"a=rtcp:9 IN IP4 0.0.0.0\r\n";c.codecs.forEach(function(a){b+=e.writeRtpMap(a);b+=e.writeFmtp(a);b+=e.writeRtcpFb(a)});var f=0;c.codecs.forEach(function(a){a.maxptime>f&&(f=a.maxptime)});0<f&&(b+="a=maxptime:"+f+"\r\n");b+="a=rtcp-mux\r\n";c.headerExtensions.forEach(function(a){b+=e.writeExtmap(a)});return b};e.parseRtpEncodingParameters=function(l){var c=
[],b=e.parseRtpParameters(l),f=-1!==b.fecMechanisms.indexOf("RED"),a=-1!==b.fecMechanisms.indexOf("ULPFEC"),n=e.matchPrefix(l,"a=ssrc:").map(function(a){return e.parseSsrcMedia(a)}).filter(function(a){return"cname"===a.attribute}),d=0<n.length&&n[0].ssrc,p,n=e.matchPrefix(l,"a=ssrc-group:FID").map(function(a){a=a.split(" ");a.shift();return a.map(function(a){return parseInt(a,10)})});0<n.length&&1<n[0].length&&n[0][0]===d&&(p=n[0][1]);b.codecs.forEach(function(b){"RTX"===b.name.toUpperCase()&&b.parameters.apt&&
(b={ssrc:d,codecPayloadType:parseInt(b.parameters.apt,10),rtx:{ssrc:p}},c.push(b),f&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:p,mechanism:a?"red+ulpfec":"red"},c.push(b)))});0===c.length&&d&&c.push({ssrc:d});var u=e.matchPrefix(l,"b=");u.length&&(0===u[0].indexOf("b=TIAS:")?u=parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")&&(u=parseInt(u[0].substr(5),10)),c.forEach(function(a){a.maxBitrate=u}));return c};e.parseRtcpParameters=function(l){var c={},b=e.matchPrefix(l,"a=ssrc:").map(function(b){return e.parseSsrcMedia(b)}).filter(function(b){return"cname"===
b.attribute})[0];b&&(c.cname=b.value,c.ssrc=b.ssrc);b=e.matchPrefix(l,"a=rtcp-rsize");c.reducedSize=0<b.length;c.compound=0===b.length;l=e.matchPrefix(l,"a=rtcp-mux");c.mux=0<l.length;return c};e.parseMsid=function(l){var c=e.matchPrefix(l,"a=msid:");if(1===c.length)return l=c[0].substr(7).split(" "),{stream:l[0],track:l[1]};l=e.matchPrefix(l,"a=ssrc:").map(function(b){return e.parseSsrcMedia(b)}).filter(function(b){return"msid"===b.attribute});if(0<l.length)return l=l[0].value.split(" "),{stream:l[0],
track:l[1]}};e.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"};e.writeMediaSection=function(l,c,b,f){c=e.writeRtpDescription(l.kind,c);c+=e.writeIceParameters(l.iceGatherer.getLocalParameters());c+=e.writeDtlsParameters(l.dtlsTransport.getLocalParameters(),"offer"===b?"actpass":"active");c+="a=mid:"+l.mid+"\r\n";c=l.direction?c+("a="+l.direction+"\r\n"):l.rtpSender&&l.rtpReceiver?c+"a=sendrecv\r\n":l.rtpSender?c+"a=sendonly\r\n":
l.rtpReceiver?c+"a=recvonly\r\n":c+"a=inactive\r\n";l.rtpSender&&(b="msid:"+f.id+" "+l.rtpSender.track.id+"\r\n",c=c+("a="+b)+("a=ssrc:"+l.sendEncodingParameters[0].ssrc+" "+b),l.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+l.sendEncodingParameters[0].rtx.ssrc+" "+b,c+="a=ssrc-group:FID "+l.sendEncodingParameters[0].ssrc+" "+l.sendEncodingParameters[0].rtx.ssrc+"\r\n"));c+="a=ssrc:"+l.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+"\r\n";l.rtpSender&&l.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+
l.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+"\r\n");return c};e.getDirection=function(l,c){for(var b=e.splitLines(l),f=0;f<b.length;f++)switch(b[f]){case "a=sendrecv":case "a=sendonly":case "a=recvonly":case "a=inactive":return b[f].substr(2)}return c?e.getDirection(c):"sendrecv"};e.getKind=function(l){return e.splitLines(l)[0].split(" ")[0].substr(2)};e.isRejected=function(e){return"0"===e.split(" ",2)[1]};B.exports=e},{}],40:[function(u,B,ea){ea=u("./utils").log;var e=u("./utils").browserDetails;
B.exports.browserDetails=e;B.exports.extractVersion=u("./utils").extractVersion;B.exports.disableLog=u("./utils").disableLog;var l=u("./chrome/chrome_shim")||null,c=u("./edge/edge_shim")||null,b=u("./firefox/firefox_shim")||null;u=u("./safari/safari_shim")||null;switch(e.browser){case "opera":case "chrome":if(!l||!l.shimPeerConnection){ea("Chrome shim is not included in this adapter release.");break}ea("adapter.js shimming chrome.");B.exports.browserShim=l;l.shimGetUserMedia();l.shimMediaStream();
l.shimSourceObject();l.shimPeerConnection();l.shimOnTrack();break;case "firefox":if(!b||!b.shimPeerConnection){ea("Firefox shim is not included in this adapter release.");break}ea("adapter.js shimming firefox.");B.exports.browserShim=b;b.shimGetUserMedia();b.shimSourceObject();b.shimPeerConnection();b.shimOnTrack();break;case "edge":if(!c||!c.shimPeerConnection){ea("MS edge shim is not included in this adapter release.");break}ea("adapter.js shimming edge.");B.exports.browserShim=c;c.shimGetUserMedia();
c.shimPeerConnection();break;case "safari":if(!u){ea("Safari shim is not included in this adapter release.");break}ea("adapter.js shimming safari.");B.exports.browserShim=u;u.shimGetUserMedia();break;default:ea("Unsupported browser!")}},{"./chrome/chrome_shim":41,"./edge/edge_shim":43,"./firefox/firefox_shim":45,"./safari/safari_shim":47,"./utils":48}],41:[function(u,B,ea){var e=u("../utils.js").log,l=u("../utils.js").browserDetails;B.exports={shimMediaStream:function(){window.MediaStream=window.MediaStream||
window.webkitMediaStream},shimOnTrack:function(){"object"!==typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(c){var b=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly));this.addEventListener("track",this._ontrack=c);this.addEventListener("addstream",this._ontrackpoly=
function(c){c.stream.addEventListener("addtrack",function(a){var e=new Event("track");e.track=a.track;e.receiver={track:a.track};e.streams=[c.stream];b.dispatchEvent(e)});c.stream.getTracks().forEach(function(a){var b=new Event("track");b.track=a;b.receiver={track:a};b.streams=[c.stream];this.dispatchEvent(b)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,
"srcObject",{get:function(){return this._srcObject},set:function(c){var b=this;this._srcObject=c;this.src&&URL.revokeObjectURL(this.src);c?(this.src=URL.createObjectURL(c),c.addEventListener("addtrack",function(){b.src&&URL.revokeObjectURL(b.src);b.src=URL.createObjectURL(c)}),c.addEventListener("removetrack",function(){b.src&&URL.revokeObjectURL(b.src);b.src=URL.createObjectURL(c)})):this.src=""}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(b,c){e("PeerConnection");b&&b.iceTransportPolicy&&
(b.iceTransports=b.iceTransportPolicy);var a=new webkitRTCPeerConnection(b,c),l=a.getStats.bind(a);a.getStats=function(a,b,c){var e=this,f=arguments;if(0<arguments.length&&"function"===typeof a)return l(a,b);var u=function(a){var b={};a.result().forEach(function(a){var c={id:a.id,timestamp:a.timestamp,type:a.type};a.names().forEach(function(b){c[b]=a.stat(b)});b[c.id]=c});return b},v=function(a,b){var c=new Map(Object.keys(a).map(function(b){return[b,a[b]]}));b=b||a;Object.keys(b).forEach(function(a){c[a]=
b[a]});return c};return 2<=arguments.length?l.apply(this,[function(a){f[1](v(u(a)))},arguments[0]]):(new Promise(function(b,c){1===f.length&&"object"===typeof a?l.apply(e,[function(a){b(v(u(a)))},c]):l.apply(e,[function(a){b(v(u(a),a.result()))},c])})).then(b,c)};return a};window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype;webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}});
["createOffer","createAnswer"].forEach(function(b){var c=webkitRTCPeerConnection.prototype[b];webkitRTCPeerConnection.prototype[b]=function(){var a=this;if(1>arguments.length||1===arguments.length&&"object"===typeof arguments[0]){var b=1===arguments.length?arguments[0]:void 0;return new Promise(function(d,e){c.apply(a,[d,e,b])})}return c.apply(this,arguments)}});51>l.version&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){var c=webkitRTCPeerConnection.prototype[b];
webkitRTCPeerConnection.prototype[b]=function(){var a=arguments,b=this,d=new Promise(function(d,e){c.apply(b,[a[0],d,e])});return 2>a.length?d:d.then(function(){a[1].apply(null,[])},function(b){3<=a.length&&a[2].apply(null,[b])})}});var c=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():c.apply(this,arguments)};["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){var c=webkitRTCPeerConnection.prototype[b];
webkitRTCPeerConnection.prototype[b]=function(){arguments[0]=new ("addIceCandidate"===b?RTCIceCandidate:RTCSessionDescription)(arguments[0]);return c.apply(this,arguments)}})},shimGetUserMedia:u("./getusermedia"),attachMediaStream:function(c,b){e("DEPRECATED, attachMediaStream will soon be removed.");43<=l.version?c.srcObject=b:"undefined"!==typeof c.src?c.src=URL.createObjectURL(b):e("Error attaching stream to element.")},reattachMediaStream:function(c,b){e("DEPRECATED, reattachMediaStream will soon be removed.");
43<=l.version?c.srcObject=b.srcObject:c.src=b.src}}},{"../utils.js":48,"./getusermedia":42}],42:[function(u,B,ea){var e=u("../utils.js").log;B.exports=function(){var l=function(a){if("object"!==typeof a||a.mandatory||a.optional)return a;var b={};Object.keys(a).forEach(function(c){if("require"!==c&&"advanced"!==c&&"mediaSource"!==c){var e="object"===typeof a[c]?a[c]:{ideal:a[c]};void 0!==e.exact&&"number"===typeof e.exact&&(e.min=e.max=e.exact);var f=function(a,b){return a?a+b.charAt(0).toUpperCase()+
b.slice(1):"deviceId"===b?"sourceId":b};if(void 0!==e.ideal){b.optional=b.optional||[];var l={};"number"===typeof e.ideal?(l[f("min",c)]=e.ideal,b.optional.push(l),l={},l[f("max",c)]=e.ideal):l[f("",c)]=e.ideal;b.optional.push(l)}void 0!==e.exact&&"number"!==typeof e.exact?(b.mandatory=b.mandatory||{},b.mandatory[f("",c)]=e.exact):["min","max"].forEach(function(a){void 0!==e[a]&&(b.mandatory=b.mandatory||{},b.mandatory[f(a,c)]=e[a])})}});a.advanced&&(b.optional=(b.optional||[]).concat(a.advanced));
return b},c=function(a,b){(a=JSON.parse(JSON.stringify(a)))&&a.audio&&(a.audio=l(a.audio));if(a&&"object"===typeof a.video){var c=a.video.facingMode,c=c&&("object"===typeof c?c:{ideal:c});if(!(!c||"user"!==c.exact&&"environment"!==c.exact&&"user"!==c.ideal&&"environment"!==c.ideal||navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete a.video.facingMode,"environment"===c.exact||"environment"===c.ideal))return navigator.mediaDevices.enumerateDevices().then(function(f){f=
f.filter(function(a){return"videoinput"===a.kind});if(f=f.find(function(a){return-1!==a.label.toLowerCase().indexOf("back")})||f.length&&f[f.length-1])a.video.deviceId=c.exact?{exact:f.deviceId}:{ideal:f.deviceId};a.video=l(a.video);e("chrome: "+JSON.stringify(a));return b(a)});a.video=l(a.video)}e("chrome: "+JSON.stringify(a));return b(a)},b=function(a){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[a.name]||a.name,message:a.message,constraint:a.constraintName,
toString:function(){return this.name+(this.message&&": ")+this.message}}};navigator.getUserMedia=function(a,d,e){c(a,function(a){navigator.webkitGetUserMedia(a,d,function(a){e(b(a))})})};var f=function(a){return new Promise(function(b,c){navigator.getUserMedia(a,b,c)})};navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:f,enumerateDevices:function(){return new Promise(function(a){var b={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(c){a(c.map(function(a){return{label:a.label,
kind:b[a.kind],deviceId:a.id,groupId:""}}))})})}});if(navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return c(e,function(c){return a(c)["catch"](function(a){return Promise.reject(b(a))})})}}else navigator.mediaDevices.getUserMedia=function(a){return f(a)};"undefined"===typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){e("Dummy mediaDevices.addEventListener called.")});
"undefined"===typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){e("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":48}],43:[function(u,B,ea){var e=u("sdp"),l=u("../utils").log;B.exports={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(c){return c}),window.RTCSessionDescription||(window.RTCSessionDescription=function(c){return c}));window.RTCPeerConnection=function(c){var b=
this,e=document.createDocumentFragment();["addEventListener","removeEventListener","dispatchEvent"].forEach(function(a){b[a]=e[a].bind(e)});this.ondatachannel=this.onnegotiationneeded=this.oniceconnectionstatechange=this.onsignalingstatechange=this.onremovestream=this.ontrack=this.onaddstream=this.onicecandidate=null;this.localStreams=[];this.remoteStreams=[];this.getLocalStreams=function(){return b.localStreams};this.getRemoteStreams=function(){return b.remoteStreams};this.localDescription=new RTCSessionDescription({type:"",
sdp:""});this.remoteDescription=new RTCSessionDescription({type:"",sdp:""});this.signalingState="stable";this.iceGatheringState=this.iceConnectionState="new";this.iceOptions={gatherPolicy:"all",iceServers:[]};if(c&&c.iceTransportPolicy)switch(c.iceTransportPolicy){case "all":case "relay":this.iceOptions.gatherPolicy=c.iceTransportPolicy;break;case "none":throw new TypeError('iceTransportPolicy "none" not supported');}this.usingBundle=c&&"max-bundle"===c.bundlePolicy;c&&c.iceServers&&(c=JSON.parse(JSON.stringify(c.iceServers)),
this.iceOptions.iceServers=c.filter(function(a){return a&&a.urls?(a=a.urls,"string"===typeof a&&(a=[a]),a=a.filter(function(a){return 0===a.indexOf("turn:")&&-1!==a.indexOf("transport=udp")})[0],!!a):!1}));this.transceivers=[];this._localIceCandidatesBuffer=[]};window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var c=this,b=e.splitSections(c.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(e){if(e.candidate&&0!==Object.keys(e.candidate).length)-1===e.candidate.candidate.indexOf("typ endOfCandidates")&&
(b[e.candidate.sdpMLineIndex+1]+="a="+e.candidate.candidate+"\r\n");else for(var a=1;a<b.length;a++)-1===b[a].indexOf("\r\na=end-of-candidates\r\n")&&(b[a]+="a=end-of-candidates\r\n");c.localDescription.sdp=b.join("");c.dispatchEvent(e);if(null!==c.onicecandidate)c.onicecandidate(e);!e.candidate&&"complete"!==c.iceGatheringState&&c.transceivers.every(function(a){return a.iceGatherer&&"completed"===a.iceGatherer.state})&&(c.iceGatheringState="complete")});this._localIceCandidatesBuffer=[]};window.RTCPeerConnection.prototype.addStream=
function(c){this.localStreams.push(c.clone());this._maybeFireNegotiationNeeded()};window.RTCPeerConnection.prototype.removeStream=function(c){c=this.localStreams.indexOf(c);-1<c&&(this.localStreams.splice(c,1),this._maybeFireNegotiationNeeded())};window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(c){return!!c.rtpSender}).map(function(c){return c.rtpSender})};window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(c){return!!c.rtpReceiver}).map(function(c){return c.rtpReceiver})};
window.RTCPeerConnection.prototype._getCommonCapabilities=function(c,b){var e={codecs:[],headerExtensions:[],fecMechanisms:[]};c.codecs.forEach(function(a){for(var c=0;c<b.codecs.length;c++){var d=b.codecs[c];if(a.name.toLowerCase()===d.name.toLowerCase()&&a.clockRate===d.clockRate&&a.numChannels===d.numChannels){e.codecs.push(d);break}}});c.headerExtensions.forEach(function(a){for(var c=0;c<b.headerExtensions.length;c++){var d=b.headerExtensions[c];if(a.uri===d.uri){e.headerExtensions.push(d);break}}});
return e};window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(c,b){var f=this,a=new RTCIceGatherer(f.iceOptions),l=new RTCIceTransport(a);a.onlocalcandidate=function(d){var u=new Event("icecandidate");u.candidate={sdpMid:c,sdpMLineIndex:b};var B=d.candidate;(d=!B||0===Object.keys(B).length)?(void 0===a.state&&(a.state="completed"),u.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(B.component="RTCP"===l.component?2:1,u.candidate.candidate=e.writeCandidate(B));
B=e.splitSections(f.localDescription.sdp);-1===u.candidate.candidate.indexOf("typ endOfCandidates")?B[u.candidate.sdpMLineIndex+1]+="a="+u.candidate.candidate+"\r\n":B[u.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n";f.localDescription.sdp=B.join("");B=f.transceivers.every(function(a){return a.iceGatherer&&"completed"===a.iceGatherer.state});switch(f.iceGatheringState){case "new":f._localIceCandidatesBuffer.push(u);d&&B&&f._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case "gathering":f._emitBufferedCandidates();
f.dispatchEvent(u);if(null!==f.onicecandidate)f.onicecandidate(u);if(B){f.dispatchEvent(new Event("icecandidate"));if(null!==f.onicecandidate)f.onicecandidate(new Event("icecandidate"));f.iceGatheringState="complete"}}};l.onicestatechange=function(){f._updateConnectionState()};var d=new RTCDtlsTransport(l);d.ondtlsstatechange=function(){f._updateConnectionState()};d.onerror=function(){d.state="failed";f._updateConnectionState()};return{iceGatherer:a,iceTransport:l,dtlsTransport:d}};window.RTCPeerConnection.prototype._transceive=
function(c,b,f){var a=this._getCommonCapabilities(c.localCapabilities,c.remoteCapabilities);b&&c.rtpSender&&(a.encodings=c.sendEncodingParameters,a.rtcp={cname:e.localCName},c.recvEncodingParameters.length&&(a.rtcp.ssrc=c.recvEncodingParameters[0].ssrc),c.rtpSender.send(a));f&&c.rtpReceiver&&(a.encodings=c.recvEncodingParameters,a.rtcp={cname:c.cname},c.sendEncodingParameters.length&&(a.rtcp.ssrc=c.sendEncodingParameters[0].ssrc),c.rtpReceiver.receive(a))};window.RTCPeerConnection.prototype.setLocalDescription=
function(c){var b=this,f,a;if("offer"===c.type)this._pendingOffer&&(f=e.splitSections(c.sdp),a=f.shift(),f.forEach(function(a,c){var d=e.parseRtpParameters(a);b._pendingOffer[c].localCapabilities=d}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===c.type){f=e.splitSections(b.remoteDescription.sdp);a=f.shift();var l=0<e.matchPrefix(a,"a=ice-lite").length;f.forEach(function(c,d){var f=b.transceivers[d],p=f.iceGatherer,v=f.iceTransport,u=f.dtlsTransport,B=f.localCapabilities,
A=f.remoteCapabilities;if("0"!==c.split("\n",1)[0].split(" ",2)[1]){var I=e.getIceParameters(c,a);if(l){var ea=e.matchPrefix(c,"a=candidate:").map(function(a){return e.parseCandidate(a)}).filter(function(a){return"1"===a.component});ea.length&&v.setRemoteCandidates(ea)}ea=e.getDtlsParameters(c,a);l&&(ea.role="server");b.usingBundle&&0!==d||(v.start(p,I,l?"controlling":"controlled"),u.start(ea));p=b._getCommonCapabilities(B,A);b._transceive(f,0<p.codecs.length,!1)}})}this.localDescription={type:c.type,
sdp:c.sdp};switch(c.type){case "offer":this._updateSignalingState("have-local-offer");break;case "answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+c.type+'"');}var d=1<arguments.length&&"function"===typeof arguments[1];if(d){var p=arguments[1];window.setTimeout(function(){p();"new"===b.iceGatheringState&&(b.iceGatheringState="gathering");b._emitBufferedCandidates()},0)}f=Promise.resolve();f.then(function(){d||("new"===b.iceGatheringState&&(b.iceGatheringState=
"gathering"),window.setTimeout(b._emitBufferedCandidates.bind(b),500))});return f};window.RTCPeerConnection.prototype.setRemoteDescription=function(c){var b=this,f=new MediaStream,a=[],l=e.splitSections(c.sdp),d=l.shift(),p=0<e.matchPrefix(d,"a=ice-lite").length;this.usingBundle=0<e.matchPrefix(d,"a=group:BUNDLE ").length;l.forEach(function(l,n){var r=e.splitLines(l)[0].substr(2).split(" "),u=r[0],v="0"===r[1],r=e.getDirection(l,d),C,B,A,I,ea,N,Jc,q,z=e.parseRtpParameters(l),k;v||(k=e.getIceParameters(l,
d),q=e.getDtlsParameters(l,d),q.role="client");N=e.parseRtpEncodingParameters(l);C=e.matchPrefix(l,"a=mid:");C=C.length?C[0].substr(6):e.generateIdentifier();var da;if(ea=e.matchPrefix(l,"a=ssrc:").map(function(a){return e.parseSsrcMedia(a)}).filter(function(a){return"cname"===a.attribute})[0])da=ea.value;var P=0<e.matchPrefix(l,"a=end-of-candidates").length,K=e.matchPrefix(l,"a=candidate:").map(function(a){return e.parseCandidate(a)}).filter(function(a){return"1"===a.component});"offer"!==c.type||
v?"answer"!==c.type||v||(u=b.transceivers[n],C=u.iceGatherer,B=u.iceTransport,A=u.dtlsTransport,I=u.rtpSender,v=u.rtpReceiver,ea=u.sendEncodingParameters,Jc=u.localCapabilities,b.transceivers[n].recvEncodingParameters=N,b.transceivers[n].remoteCapabilities=z,b.transceivers[n].cname=da,(p||P)&&K.length&&B.setRemoteCandidates(K),b.usingBundle&&0!==n||(B.start(C,k,"controlling"),A.start(q)),b._transceive(u,"sendrecv"===r||"recvonly"===r,"sendrecv"===r||"sendonly"===r),!v||"sendrecv"!==r&&"sendonly"!==
r?delete u.rtpReceiver:(q=v.track,a.push([q,v]),f.addTrack(q))):(k=b.usingBundle&&0<n?{iceGatherer:b.transceivers[0].iceGatherer,iceTransport:b.transceivers[0].iceTransport,dtlsTransport:b.transceivers[0].dtlsTransport}:b._createIceAndDtlsTransports(C,n),P&&k.iceTransport.setRemoteCandidates(K),Jc=RTCRtpReceiver.getCapabilities(u),ea=[{ssrc:1001*(2*n+2)}],v=new RTCRtpReceiver(k.dtlsTransport,u),q=v.track,a.push([q,v]),f.addTrack(q),0<b.localStreams.length&&b.localStreams[0].getTracks().length>=n&&
(I=b.localStreams[0].getTracks()[n],I=new RTCRtpSender(I,k.dtlsTransport)),b.transceivers[n]={iceGatherer:k.iceGatherer,iceTransport:k.iceTransport,dtlsTransport:k.dtlsTransport,localCapabilities:Jc,remoteCapabilities:z,rtpSender:I,rtpReceiver:v,kind:u,mid:C,cname:da,sendEncodingParameters:ea,recvEncodingParameters:N},b._transceive(b.transceivers[n],!1,"sendrecv"===r||"sendonly"===r))});this.remoteDescription={type:c.type,sdp:c.sdp};switch(c.type){case "offer":this._updateSignalingState("have-remote-offer");
break;case "answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+c.type+'"');}f.getTracks().length&&(b.remoteStreams.push(f),window.setTimeout(function(){var c=new Event("addstream");c.stream=f;b.dispatchEvent(c);null!==b.onaddstream&&window.setTimeout(function(){b.onaddstream(c)},0);a.forEach(function(a){var d=a[0];a=a[1];var e=new Event("track");e.track=d;e.receiver=a;e.streams=[f];b.dispatchEvent(c);null!==b.ontrack&&window.setTimeout(function(){b.ontrack(e)},
0)})},0));1<arguments.length&&"function"===typeof arguments[1]&&window.setTimeout(arguments[1],0);return Promise.resolve()};window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(c){c.iceTransport&&c.iceTransport.stop();c.dtlsTransport&&c.dtlsTransport.stop();c.rtpSender&&c.rtpSender.stop();c.rtpReceiver&&c.rtpReceiver.stop()});this._updateSignalingState("closed")};window.RTCPeerConnection.prototype._updateSignalingState=function(c){this.signalingState=c;c=new Event("signalingstatechange");
this.dispatchEvent(c);if(null!==this.onsignalingstatechange)this.onsignalingstatechange(c)};window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var c=new Event("negotiationneeded");this.dispatchEvent(c);if(null!==this.onnegotiationneeded)this.onnegotiationneeded(c)};window.RTCPeerConnection.prototype._updateConnectionState=function(){var c,b={"new":0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};this.transceivers.forEach(function(c){b[c.iceTransport.state]++;
b[c.dtlsTransport.state]++});b.connected+=b.completed;c="new";if(0<b.failed)c="failed";else if(0<b.connecting||0<b.checking)c="connecting";else if(0<b.disconnected)c="disconnected";else if(0<b["new"])c="new";else if(0<b.connected||0<b.completed)c="connected";if(c!==this.iceConnectionState&&(this.iceConnectionState=c,c=new Event("iceconnectionstatechange"),this.dispatchEvent(c),null!==this.oniceconnectionstatechange))this.oniceconnectionstatechange(c)};window.RTCPeerConnection.prototype.createOffer=
function(){var c=this;if(this._pendingOffer)throw Error("createOffer called while there is a pending offer.");var b;1===arguments.length&&"function"!==typeof arguments[0]?b=arguments[0]:3===arguments.length&&(b=arguments[2]);var f=[],a=0,l=0;this.localStreams.length&&(a=this.localStreams[0].getAudioTracks().length,l=this.localStreams[0].getVideoTracks().length);if(b){if(b.mandatory||b.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==b.offerToReceiveAudio&&
(a=b.offerToReceiveAudio);void 0!==b.offerToReceiveVideo&&(l=b.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(b){f.push({kind:b.kind,track:b,wantReceive:"audio"===b.kind?0<a:0<l});"audio"===b.kind?a--:"video"===b.kind&&l--});0<a||0<l;)0<a&&(f.push({kind:"audio",wantReceive:!0}),a--),0<l&&(f.push({kind:"video",wantReceive:!0}),l--);var d=e.writeSessionBoilerplate(),p=[];f.forEach(function(a,b){var d=a.track,f=a.kind,l=e.generateIdentifier(),n=c.usingBundle&&
0<b?{iceGatherer:p[0].iceGatherer,iceTransport:p[0].iceTransport,dtlsTransport:p[0].dtlsTransport}:c._createIceAndDtlsTransports(l,b),u=RTCRtpSender.getCapabilities(f),A,B,ea=[{ssrc:1001*(2*b+1)}];d&&(A=new RTCRtpSender(d,n.dtlsTransport));a.wantReceive&&(B=new RTCRtpReceiver(n.dtlsTransport,f));p[b]={iceGatherer:n.iceGatherer,iceTransport:n.iceTransport,dtlsTransport:n.dtlsTransport,localCapabilities:u,remoteCapabilities:null,rtpSender:A,rtpReceiver:B,kind:f,mid:l,sendEncodingParameters:ea,recvEncodingParameters:null}});
this.usingBundle&&(d+="a=group:BUNDLE "+p.map(function(a){return a.mid}).join(" ")+"\r\n");f.forEach(function(a,b){var f=p[b];d+=e.writeMediaSection(f,f.localCapabilities,"offer",c.localStreams[0])});this._pendingOffer=p;b=new RTCSessionDescription({type:"offer",sdp:d});arguments.length&&"function"===typeof arguments[0]&&window.setTimeout(arguments[0],0,b);return Promise.resolve(b)};window.RTCPeerConnection.prototype.createAnswer=function(){var c=this,b=e.writeSessionBoilerplate();this.usingBundle&&
(b+="a=group:BUNDLE "+this.transceivers.map(function(a){return a.mid}).join(" ")+"\r\n");this.transceivers.forEach(function(a){var f=c._getCommonCapabilities(a.localCapabilities,a.remoteCapabilities);b+=e.writeMediaSection(a,f,"answer",c.localStreams[0])});var f=new RTCSessionDescription({type:"answer",sdp:b});arguments.length&&"function"===typeof arguments[0]&&window.setTimeout(arguments[0],0,f);return Promise.resolve(f)};window.RTCPeerConnection.prototype.addIceCandidate=function(c){if(null===c)this.transceivers.forEach(function(a){a.iceTransport.addRemoteCandidate({})});
else{var b=c.sdpMLineIndex;if(c.sdpMid)for(var f=0;f<this.transceivers.length;f++)if(this.transceivers[f].mid===c.sdpMid){b=f;break}var a=this.transceivers[b];if(a){f=0<Object.keys(c.candidate).length?e.parseCandidate(c.candidate):{};if("tcp"===f.protocol&&0===f.port||"1"!==f.component)return;"endOfCandidates"===f.type&&(f={});a.iceTransport.addRemoteCandidate(f);a=e.splitSections(this.remoteDescription.sdp);a[b+1]+=(f.type?c.candidate.trim():"a=end-of-candidates")+"\r\n";this.remoteDescription.sdp=
a.join("")}}1<arguments.length&&"function"===typeof arguments[1]&&window.setTimeout(arguments[1],0);return Promise.resolve()};window.RTCPeerConnection.prototype.getStats=function(){var c=[];this.transceivers.forEach(function(b){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(a){b[a]&&c.push(b[a].getStats())})});var b=1<arguments.length&&"function"===typeof arguments[1]&&arguments[1];return new Promise(function(e){var a=new Map;Promise.all(c).then(function(c){c.forEach(function(b){Object.keys(b).forEach(function(c){a.set(c,
b[c]);a[c]=b[c]})});b&&window.setTimeout(b,0,a);e(a)})})}},shimGetUserMedia:u("./getusermedia"),attachMediaStream:function(c,b){l("DEPRECATED, attachMediaStream will soon be removed.");c.srcObject=b},reattachMediaStream:function(c,b){l("DEPRECATED, reattachMediaStream will soon be removed.");c.srcObject=b.srcObject}}},{"../utils":48,"./getusermedia":44,sdp:39}],44:[function(u,B,ea){B.exports=function(){var e=function(c){return{name:{PermissionDeniedError:"NotAllowedError"}[c.name]||c.name,message:c.message,
constraint:c.constraint,toString:function(){return this.name}}},l=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(c){return l(c)["catch"](function(b){return Promise.reject(e(b))})}}},{}],45:[function(u,B,ea){var e=u("../utils").log,l=u("../utils").browserDetails;B.exports={shimOnTrack:function(){"object"!==typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,
"ontrack",{get:function(){return this._ontrack},set:function(c){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly));this.addEventListener("track",this._ontrack=c);this.addEventListener("addstream",this._ontrackpoly=function(b){b.stream.getTracks().forEach(function(c){var a=new Event("track");a.track=c;a.receiver={track:c};a.streams=[b.stream];this.dispatchEvent(a)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===
typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(c){this.mozSrcObject=c}}))},shimPeerConnection:function(){if("object"===typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(a,b){if(38>l.version&&a&&a.iceServers){for(var c=[],e=0;e<a.iceServers.length;e++){var f=
a.iceServers[e];if(f.hasOwnProperty("urls"))for(var u=0;u<f.urls.length;u++){var r={url:f.urls[u]};0===f.urls[u].indexOf("turn")&&(r.username=f.username,r.credential=f.credential);c.push(r)}else c.push(a.iceServers[e])}a.iceServers=c}return new mozRTCPeerConnection(a,b)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),
window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate);["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=RTCPeerConnection.prototype[a];RTCPeerConnection.prototype[a]=function(){arguments[0]=new ("addIceCandidate"===a?RTCIceCandidate:RTCSessionDescription)(arguments[0]);return b.apply(this,arguments)}});var c=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===
arguments[0]?Promise.resolve():c.apply(this,arguments)};var b=function(a){var b=new Map;Object.keys(a).forEach(function(c){b.set(c,a[c]);b[c]=a[c]});return b},e=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(a,c,d){return e.apply(this,[a||null]).then(function(a){return b(a)}).then(c,d)}}},shimGetUserMedia:u("./getusermedia"),attachMediaStream:function(c,b){e("DEPRECATED, attachMediaStream will soon be removed.");c.srcObject=b},reattachMediaStream:function(c,b){e("DEPRECATED, reattachMediaStream will soon be removed.");
c.srcObject=b.srcObject}}},{"../utils":48,"./getusermedia":46}],46:[function(u,B,ea){var e=u("../utils").log,l=u("../utils").browserDetails;B.exports=function(){var c=function(a){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[a.name]||a.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[a.message]||a.message,constraint:a.constraint,toString:function(){return this.name+(this.message&&
": ")+this.message}}},b=function(a,b,f){var n=function(a){if("object"!==typeof a||a.require)return a;var b=[];Object.keys(a).forEach(function(c){if("require"!==c&&"advanced"!==c&&"mediaSource"!==c){var d=a[c]="object"===typeof a[c]?a[c]:{ideal:a[c]};void 0===d.min&&void 0===d.max&&void 0===d.exact||b.push(c);void 0!==d.exact&&("number"===typeof d.exact?d.min=d.max=d.exact:a[c]=d.exact,delete d.exact);if(void 0!==d.ideal){a.advanced=a.advanced||[];var e={};e[c]="number"===typeof d.ideal?{min:d.ideal,
max:d.ideal}:d.ideal;a.advanced.push(e);delete d.ideal;Object.keys(d).length||delete a[c]}}});b.length&&(a.require=b);return a};a=JSON.parse(JSON.stringify(a));38>l.version&&(e("spec: "+JSON.stringify(a)),a.audio&&(a.audio=n(a.audio)),a.video&&(a.video=n(a.video)),e("ff37: "+JSON.stringify(a)));return navigator.mozGetUserMedia(a,b,function(a){f(c(a))})},f=function(a){return new Promise(function(c,e){b(a,c,e)})};navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:f,addEventListener:function(){},
removeEventListener:function(){}});navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(a){a([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})};if(41>l.version){var a=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return a().then(void 0,function(a){if("NotFoundError"===a.name)return[];throw a;
})}}if(49>l.version){var n=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(a){return n(a)["catch"](function(a){return Promise.reject(c(a))})}}navigator.getUserMedia=function(a,c,e){if(44>l.version)return b(a,c,e);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia");navigator.mediaDevices.getUserMedia(a).then(c,e)}}},{"../utils":48}],47:[function(u,B,ea){B.exports={shimGetUserMedia:function(){navigator.getUserMedia=
navigator.webkitGetUserMedia}}},{}],48:[function(u,B,ea){var e=!0,l={disableLog:function(c){return"boolean"!==typeof c?Error("Argument type: "+typeof c+". Please use a boolean."):(e=c)?"adapter.js logging disabled":"adapter.js logging enabled"},log:function(){"object"!==typeof window||e||"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)},extractVersion:function(c,b,e){return(c=c.match(b))&&c.length>=e&&parseInt(c[e],10)},detectBrowser:function(){var c=
{browser:null,version:null,minVersion:null};if("undefined"===typeof window||!window.navigator)return c.browser="Not a browser.",c;if(navigator.mozGetUserMedia)c.browser="firefox",c.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),c.minVersion=31;else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)c.browser="chrome",c.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),c.minVersion=38;else if(navigator.userAgent.match(/Version\/(\d+).(\d+)/))c.browser=
"safari",c.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1),c.minVersion=602;else return c.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",c;else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))c.browser="edge",c.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),c.minVersion=10547;else return c.browser="Not a supported browser.",c;c.version<c.minVersion&&l.log("Browser: "+c.browser+" Version: "+
c.version+" < minimum supported version: "+c.minVersion+"\n some things might not work!");return c}};B.exports={log:l.log,disableLog:l.disableLog,browserDetails:l.detectBrowser(),extractVersion:l.extractVersion}},{}],49:[function(u,B,ea){function e(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var l=u("./lib/util/check"),c=u("./lib/util/extend"),b=u("./lib/dynamic"),f=u("./lib/util/raf"),a=u("./lib/util/clock"),n=u("./lib/strings"),d=u("./lib/webgl"),p=u("./lib/extension"),aa=u("./lib/limits"),
R=u("./lib/buffer"),r=u("./lib/elements"),wa=u("./lib/texture"),v=u("./lib/renderbuffer"),C=u("./lib/framebuffer"),O=u("./lib/attribute"),A=u("./lib/shader"),I=u("./lib/read"),db=u("./lib/core"),N=u("./lib/stats"),Jc=u("./lib/timer");B.exports=function(q){function u(){if(0===pb.length)H&&H.update(),oc=null;else{oc=f.next(u);h();for(var a=pb.length-1;0<=a;--a){var b=pb[a];b&&b(M,null,0)}ka.flush();H&&H.update()}}function k(){!oc&&0<pb.length&&(oc=f.next(u))}function B(){oc&&(f.cancel(u),oc=null)}function P(a){a.preventDefault();
gb=!0;B();ca.forEach(function(a){a()})}function K(a){ka.getError();gb=!1;hc.restore();ia.restore();$a.restore();ba.restore();va.restore();La.restore();t.restore();H&&H.restore();$b.procs.refresh();k();ma.forEach(function(a){a()})}function w(a){function d(a,c){var e={},f={};Object.keys(a).forEach(function(d){var g=a[d];if(b.isDynamic(g))f[d]=b.unbox(g,d);else{if(c&&Array.isArray(g))for(var h=0;h<g.length;++h)if(b.isDynamic(g[h])){f[d]=b.unbox(g,d);return}e[d]=g}});return{dynamic:f,"static":e}}function e(a){for(;t.length<
a;)t.push(null);return t}l(!!a,"invalid args to regl({...})");l.type(a,"object","invalid args to regl({...})");var f=d(a.context||{},!0),g=d(a.uniforms||{},!0),h=d(a.attributes||{},!1);a=d(function(a){function b(a){if(a in d){var c=d[a];delete d[a];Object.keys(c).forEach(function(b){d[a+"."+b]=c[b]})}}var d=c({},a);delete d.uniforms;delete d.attributes;delete d.context;delete d.vao;"stencil"in d&&d.stencil.op&&(d.stencil.opBack=d.stencil.opFront=d.stencil.op,delete d.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(d.vao=a.vao);return d}(a),!1);var k={gpuTime:0,cpuTime:0,count:0},n=$b.compile(a,h,g,f,k),p=n.draw,q=n.batch,r=n.scope,t=[];return c(function(a,b){var c;gb&&l.raise("context lost");if("function"===typeof a)return r.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)r.call(this,null,b,c);else if(Array.isArray(a))for(c=0;c<a.length;++c)r.call(this,a[c],b,c);else return r.call(this,a,b,0);
else if("number"===typeof a){if(0<a)return q.call(this,e(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return q.call(this,a,a.length)}else return p.call(this,a)},{stats:k,destroy:function(){n.destroy()}})}function ea(a,b){var c=0;$b.procs.poll();var d=b.color;d&&(ka.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ka.clearDepth(+b.depth),c|=256);"stencil"in b&&(ka.clearStencil(b.stencil|0),c|=1024);l(!!c,"called regl.clear with no buffer specified");ka.clear(c)}function G(a){l.type(a,
"function","regl.frame() callback must be a function");pb.push(a);k();return{cancel:function(){function b(){var a=e(pb,b);pb[a]=pb[pb.length-1];--pb.length;0>=pb.length&&B()}var c=e(pb,a);l(0<=c,"cannot cancel a frame twice");pb[c]=b}}}function ga(){var a=Ua.viewport,b=Ua.scissor_box;a[0]=a[1]=b[0]=b[1]=0;M.viewportWidth=M.framebufferWidth=M.drawingBufferWidth=a[2]=b[2]=ka.drawingBufferWidth;M.viewportHeight=M.framebufferHeight=M.drawingBufferHeight=a[3]=b[3]=ka.drawingBufferHeight}function h(){M.tick+=
1;M.time=U();ga();$b.procs.poll()}function g(){ba.refresh();ga();$b.procs.refresh();H&&H.update()}function U(){return(a()-L)/1E3}console.log("REGL args are:",q);q=d(q);if(!q)return null;var ka=q.gl,la=ka.getContextAttributes(),gb=ka.isContextLost(),hc=p(ka,q);if(!hc)return null;var sa=n(),Pa=N(),X=hc.extensions,H=Jc(ka,X),L=a(),Q=ka.drawingBufferWidth,qa=ka.drawingBufferHeight,M={tick:0,time:0,viewportWidth:Q,viewportHeight:qa,framebufferWidth:Q,framebufferHeight:qa,drawingBufferWidth:Q,drawingBufferHeight:qa,
pixelRatio:q.pixelRatio},Q={elements:null,primitive:4,count:-1,offset:0,instances:-1},Zb=aa(ka,X),$a=R(ka,Pa,q,function(a){return t.destroyBuffer(a)}),T=r(ka,X,$a,Pa),t=O(ka,X,Zb,Pa,$a,T,Q),ia=A(ka,sa,Pa,q),ba=wa(ka,X,Zb,function(){$b.procs.poll()},M,Pa,q),va=v(ka,X,Zb,Pa,q),La=C(ka,X,Zb,ba,va,Pa),$b=db(ka,sa,X,Zb,$a,T,ba,La,{},t,ia,Q,M,H,q),sa=I(ka,La,$b.procs.poll,M,la,X,Zb),Ua=$b.next,V=ka.canvas,pb=[],ca=[],ma=[],Rb=[q.onDestroy],oc=null;V&&(V.addEventListener("webglcontextlost",P,!1),V.addEventListener("webglcontextrestored",
K,!1));var tc=La.setFBO=w({framebuffer:b.define.call(null,1,"framebuffer")});g();la=c(w,{clear:function(a){l("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)tc(c({framebuffer:a.framebuffer.faces[b]},a),ea);else tc(a,ea);else ea(null,a)},prop:b.define.bind(null,1),context:b.define.bind(null,2),"this":b.define.bind(null,3),draw:w({}),buffer:function(a){return $a.create(a,34962,!1,!1)},
elements:function(a){return T.create(a,!1)},texture:ba.create2D,cube:ba.createCube,renderbuffer:va.create,framebuffer:La.create,framebufferCube:La.createCube,vao:t.createVAO,attributes:la,frame:G,on:function(a,b){l.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return G(b);case "lost":c=ca;break;case "restore":c=ma;break;case "destroy":c=Rb;break;default:l.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Zb,hasExtension:function(a){return 0<=Zb.extensions.indexOf(a.toLowerCase())},read:sa,destroy:function(){pb.length=0;B();V&&(V.removeEventListener("webglcontextlost",P),V.removeEventListener("webglcontextrestored",K));ia.clear();La.clear();va.clear();t.clear();ba.clear();T.clear();$a.clear();H&&H.clear();Rb.forEach(function(a){a()})},_gl:ka,_refresh:g,poll:function(){h();H&&H.update()},now:U,stats:Pa});q.onDone(null,la);return la}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
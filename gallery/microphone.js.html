<!DOCTYPE html>
      <html>
        <head>
          <title>example/microphone.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function P(fa,Ca,b){function B(c,a){if(!Ca[c]){if(!fa[c]){var f="function"==typeof require&&require;if(!a&&f)return f(c,!0);if(k)return k(c,!0);f=Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f;}f=Ca[c]={exports:{}};fa[c][0].call(f.exports,function(a){return B(fa[c][1][a]||a)},f,f.exports,P,fa,Ca,b)}return Ca[c].exports}for(var k="function"==typeof require&&require,c=0;c<b.length;c++)B(b[c]);return B}return P})()({1:[function(P,fa,Ca){var b=P("../regl")();P("getusermedia")({audio:!0},
function(B,k){if(!B){var c=new AudioContext,l=c.createAnalyser();c.createMediaStreamSource(k).connect(l);var c=l.frequencyBinCount,a=new Uint8Array(c),f=b.buffer({length:c,type:"uint8",usage:"dynamic"}),g=b({vert:"\n    precision mediump float;\n\n    #define FFT_SIZE "+c+"\n    #define PI "+Math.PI+"\n\n    attribute float index, frequency;\n\n    void main() {\n      float theta = 2.0 * PI * index / float(FFT_SIZE);\n      gl_Position = vec4(\n        0.5 * cos(theta) * (1.0 + frequency),\n        0.5 * sin(theta) * (1.0 + frequency),\n        0,\n        1);\n    }",
frag:"\n    void main() {\n      gl_FragColor = vec4(1, 1, 1, 1);\n    }",attributes:{index:Array(c).fill().map(function(a,g){return g}),frequency:{buffer:f,normalized:!0}},elements:null,instances:-1,lineWidth:1,depth:{enable:!1},count:c,primitive:"line loop"});b.frame(function(k){b.clear({color:[0,0,0,1],depth:1});l.getByteFrequencyData(a);f.subdata(a);g()})}})},{"../regl":49,getusermedia:38}],2:[function(P,fa,Ca){function b(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;
this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var B=P("./util/sorted-object-keys"),k=P("./util/check"),c=P("./util/values"),l=P("./constants/dtypes.json"),a=P("./util/is-typed-array"),f=P("./util/is-ndarray"),g=P("./constants/primitives.json"),n="attributes elements offset count primitive instances".split(" ");fa.exports=function(p,v,R,G,x,D,ha){function w(a){if(a!==X.currentVAO){var g=v.oes_vertex_array_object;a?g.bindVertexArrayOES(a.vao):g.bindVertexArrayOES(null);X.currentVAO=
a}}function Q(a){if(a!==X.currentVAO){if(a)a.bindAttrs();else{for(var g=v.angle_instanced_arrays,f=0;f<r.length;++f){var k=r[f];k.buffer?(p.enableVertexAttribArray(f),k.buffer.bind(),p.vertexAttribPointer(f,k.size,k.type,k.normalized,k.stride,k.offfset),g&&k.divisor&&g.vertexAttribDivisorANGLE(f,k.divisor)):(p.disableVertexAttribArray(f),p.vertexAttrib4f(f,k.x,k.y,k.z,k.w))}ha.elements?p.bindBuffer(34963,ha.elements.buffer.buffer):p.bindBuffer(34963,null)}X.currentVAO=a}}function q(){c(m).forEach(function(a){a.destroy()})}
function N(){this.id=++T;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=v.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;m[this.id]=this;this.buffers=[]}function ia(){v.oes_vertex_array_object&&c(m).forEach(function(a){a.refresh()})}var e=R.maxAttributes,r=Array(e);for(R=0;R<e;++R)r[R]=new b;var T=0,m={},X={Record:b,scope:{},state:r,currentVAO:null,targetVAO:null,restore:v.oes_vertex_array_object?ia:function(){},
createVAO:function(c){function y(c){var E;if(Array.isArray(c))E=c,m.elements&&m.ownsElements&&m.elements.destroy(),m.elements=null,m.ownsElements=!1,m.offset=0,m.count=0,m.instances=-1,m.primitive=4;else{k("object"===typeof c,"invalid arguments for create vao");k("attributes"in c,"must specify attributes for vao");if(c.elements){var h=c.elements;m.ownsElements?("function"===typeof h&&"elements"===h._reglType?m.elements.destroy():m.elements(h),m.ownsElements=!1):D.getElements(c.elements)?(m.elements=
c.elements,m.ownsElements=!1):(m.elements=D.create(c.elements),m.ownsElements=!0)}else m.elements=null,m.ownsElements=!1;E=c.attributes;m.offset=0;m.count=-1;m.instances=-1;m.primitive=4;m.elements&&(m.count=m.elements._elements.vertCount,m.primitive=m.elements._elements.primType);"offset"in c&&(m.offset=c.offset|0);"count"in c&&(m.count=c.count|0);"instances"in c&&(m.instances=c.instances|0);"primitive"in c&&(k(c.primitive in g,"bad primitive type: "+c.primitive),m.primitive=g[c.primitive]);k.optional(function(){for(var d=
B(c),a=0;a<d.length;++a)k(0<=n.indexOf(d[a]),'invalid option for vao: "'+d[a]+'" valid options are '+n)});k(Array.isArray(E),"attributes must be an array")}k(E.length<e,"too many attributes");k(0<E.length,"must specify at least one attribute");var h={},U=m.attributes;U.length=E.length;for(var d=0;d<E.length;++d){var r=E[d],F=U[d]=new b,T=r.data||r;if(Array.isArray(T)||a(T)||f(T)){var q;m.buffers[d]&&(q=m.buffers[d],a(T)&&q._buffer.byteLength>=T.byteLength?q.subdata(T):(q.destroy(),m.buffers[d]=null));
m.buffers[d]||(q=m.buffers[d]=x.create(r,34962,!1,!0));F.buffer=x.getBuffer(q);F.size=F.buffer.dimension|0;F.normalized=!1;F.type=F.buffer.dtype;F.offset=0;F.stride=0;F.divisor=0;F.state=1;h[d]=1}else x.getBuffer(r)?(F.buffer=x.getBuffer(r),F.size=F.buffer.dimension|0,F.normalized=!1,F.type=F.buffer.dtype,F.offset=0,F.stride=0,F.divisor=0,F.state=1):x.getBuffer(r.buffer)?(F.buffer=x.getBuffer(r.buffer),F.size=(+r.size||F.buffer.dimension)|0,F.normalized=!!r.normalized||!1,"type"in r?(k.parameter(r.type,
l,"invalid buffer type"),F.type=l[r.type]):F.type=F.buffer.dtype,F.offset=(r.offset||0)|0,F.stride=(r.stride||0)|0,F.divisor=(r.divisor||0)|0,F.state=1,k(1<=F.size&&4>=F.size,"size must be between 1 and 4"),k(0<=F.offset,"invalid offset"),k(0<=F.stride&&255>=F.stride,"stride must be between 0 and 255"),k(0<=F.divisor,"divisor must be positive"),k(!F.divisor||!!v.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in r?(k(0<d,"first attribute must not be a constant"),
F.x=+r.x||0,F.y=+r.y||0,F.z=+r.z||0,F.w=+r.w||0,F.state=2):k(!1,"invalid attribute spec for location "+d)}for(q=0;q<m.buffers.length;++q)!h[q]&&m.buffers[q]&&(m.buffers[q].destroy(),m.buffers[q]=null);m.refresh();return y}var m=new N;G.vaoCount+=1;y.destroy=function(){for(var a=0;a<m.buffers.length;++a)m.buffers[a]&&m.buffers[a].destroy();m.buffers.length=0;m.ownsElements&&(m.elements.destroy(),m.elements=null,m.ownsElements=!1);m.destroy()};y._vao=m;y._reglType="vao";return y(c)},getVAO:function(a){return"function"===
typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var g=0;g<r.length;++g){var f=r[g];f.buffer===a&&(p.disableVertexAttribArray(g),f.buffer=null)}},setVAO:v.oes_vertex_array_object?w:Q,clear:v.oes_vertex_array_object?q:function(){}};N.prototype.bindAttrs=function(){for(var a=v.angle_instanced_arrays,g=this.attributes,f=0;f<g.length;++f){var k=g[f];k.buffer?(p.enableVertexAttribArray(f),p.bindBuffer(34962,k.buffer.buffer),p.vertexAttribPointer(f,k.size,k.type,k.normalized,k.stride,k.offset),
a&&k.divisor&&a.vertexAttribDivisorANGLE(f,k.divisor)):(p.disableVertexAttribArray(f),p.vertexAttrib4f(f,k.x,k.y,k.z,k.w))}for(a=g.length;a<e;++a)p.disableVertexAttribArray(a);(a=D.getElements(this.elements))?p.bindBuffer(34963,a.buffer.buffer):p.bindBuffer(34963,null)};N.prototype.refresh=function(){var a=v.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),X.currentVAO=null,a.bindVertexArrayOES(null))};N.prototype.destroy=function(){if(this.vao){var a=v.oes_vertex_array_object;
this===X.currentVAO&&(X.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);m[this.id]&&(delete m[this.id],--G.vaoCount)};return X}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(P,fa,Ca){function b(a){return R[Object.prototype.toString.call(a)]|
0}function B(a,g){for(var f=0;f<g.length;++f)a[f]=g[f]}function k(a,g,f,k,c,l,e){for(var b=0,B=0;B<f;++B)for(var m=0;m<k;++m)a[b++]=g[c*B+l*m+e]}var c=P("./util/sorted-object-keys"),l=P("./util/check"),a=P("./util/is-typed-array"),f=P("./util/is-ndarray"),g=P("./util/values"),n=P("./util/pool");Ca=P("./util/flatten");var p=Ca.flatten,v=Ca.shape,R=P("./constants/arraytypes.json"),G=P("./constants/dtypes.json"),x=P("./constants/usage.json"),D=[];D[5120]=1;D[5122]=2;D[5124]=4;D[5121]=1;D[5123]=2;D[5125]=
4;D[5126]=4;fa.exports=function(R,w,Q,q){function N(a){this.id=T++;this.buffer=R.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;Q.profile&&(this.stats={size:0})}function ia(a,g,f){a.byteLength=g.byteLength;R.bufferData(a.type,g,f)}function e(g,c,e,m,r,h){g.usage=e;if(Array.isArray(c)){if(g.dtype=m||5126,0<c.length)if(Array.isArray(c[0])){r=v(c);for(var U=m=1;U<r.length;++U)m*=r[U];g.dimension=m;c=p(c,r,g.dtype);ia(g,c,e);h?g.persistentData=
c:n.freeType(c)}else"number"===typeof c[0]?(g.dimension=r,r=n.allocType(g.dtype,c.length),B(r,c),ia(g,r,e),h?g.persistentData=r:n.freeType(r)):a(c[0])?(g.dimension=c[0].length,g.dtype=m||b(c[0])||5126,c=p(c,[c.length,c[0].length],g.dtype),ia(g,c,e),h?g.persistentData=c:n.freeType(c)):l.raise("invalid buffer data")}else if(a(c))g.dtype=m||b(c),g.dimension=r,ia(g,c,e),h&&(g.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(f(c)){r=c.shape;var d=c.stride,U=c.offset,q=0,F=0,T=0,w=0;1===
r.length?(q=r[0],F=1,T=d[0],w=0):2===r.length?(q=r[0],F=r[1],T=d[0],w=d[1]):l.raise("invalid shape");g.dtype=m||b(c.data)||5126;g.dimension=F;r=n.allocType(g.dtype,q*F);k(r,c.data,q,F,T,w,U);ia(g,r,e);h?g.persistentData=r:n.freeType(r)}else c instanceof ArrayBuffer?(g.dtype=5121,g.dimension=r,ia(g,c,e),h&&(g.persistentData=new Uint8Array(new Uint8Array(c)))):l.raise("invalid buffer data")}function r(a){w.bufferCount--;q(a);var g=a.buffer;l(g,"buffer must not be deleted already");R.deleteBuffer(g);
a.buffer=null;delete m[a.id]}var T=0,m={};N.prototype.bind=function(){R.bindBuffer(this.type,this.buffer)};N.prototype.destroy=function(){r(this)};var X=[];Q.profile&&(w.getTotalBufferSize=function(){var a=0;c(m).forEach(function(g){a+=m[g].stats.size});return a});return{create:function(g,c,q,T){function C(d){var g=35044,h=null,c=0,k=0,b=1;Array.isArray(d)||a(d)||f(d)||d instanceof ArrayBuffer?h=d:"number"===typeof d?c=d|0:d&&(l.type(d,"object","buffer arguments must be an object, a number or an array"),
"data"in d&&(l(null===h||Array.isArray(h)||a(h)||f(h),"invalid data for buffer"),h=d.data),"usage"in d&&(l.parameter(d.usage,x,"invalid buffer usage"),g=x[d.usage]),"type"in d&&(l.parameter(d.type,G,"invalid buffer type"),k=G[d.type]),"dimension"in d&&(l.type(d.dimension,"number","invalid dimension"),b=d.dimension|0),"length"in d&&(l.nni(c,"buffer length must be a nonnegative integer"),c=d.length|0));U.bind();h?e(U,h,g,k,b,T):(c&&R.bufferData(U.type,c,g),U.dtype=k||5121,U.usage=g,U.dimension=b,U.byteLength=
c);Q.profile&&(U.stats.size=U.byteLength*D[U.dtype]);return C}function h(a,g){l(g+a.byteLength<=U.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+g+" to a buffer of size "+U.byteLength);R.bufferSubData(U.type,g,a)}w.bufferCount++;var U=new N(c);m[U.id]=U;q||C(g);C._reglType="buffer";C._buffer=U;C.subdata=function(d,g){var c=(g||0)|0,e;U.bind();if(a(d)||d instanceof ArrayBuffer)h(d,c);else if(Array.isArray(d)){if(0<d.length)if("number"===
typeof d[0]){var m=n.allocType(U.dtype,d.length);B(m,d);h(m,c);n.freeType(m)}else Array.isArray(d[0])||a(d[0])?(e=v(d),m=p(d,e,U.dtype),h(m,c),n.freeType(m)):l.raise("invalid buffer data")}else if(f(d)){e=d.shape;var y=d.stride,r=m=0,E=0,O=0;1===e.length?(m=e[0],r=1,E=y[0],O=0):2===e.length?(m=e[0],r=e[1],E=y[0],O=y[1]):l.raise("invalid shape");e=Array.isArray(d.data)?U.dtype:b(d.data);e=n.allocType(e,m*r);k(e,d.data,m,r,E,O,d.offset);h(e,c);n.freeType(e)}else l.raise("invalid data for buffer subdata");
return C};Q.profile&&(C.stats=U.stats);C.destroy=function(){r(U)};return C},createStream:function(a,g){var c=X.pop();c||(c=new N(a));c.bind();e(c,g,35040,0,1,!1);return c},destroyStream:function(a){X.push(a)},clear:function(){g(m).forEach(r);X.forEach(r)},getBuffer:function(a){return a&&a._buffer instanceof N?a._buffer:null},restore:function(){g(m).forEach(function(a){a.buffer=R.createBuffer();R.bindBuffer(a.type,a.buffer);R.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:e}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(P,fa,Ca){fa.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(P,fa,Ca){fa.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(P,fa,Ca){fa.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(P,fa,Ca){fa.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(P,fa,Ca){function b(a){return Array.isArray(a)||R(a)||
G(a)}function B(a){return a.sort(function(a,g){return"viewport"===a?-1:"viewport"===g?1:a<g?-1:1})}function k(a,g,c,f){this.thisDep=a;this.contextDep=g;this.propDep=c;this.append=f}function c(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function l(a){return new k(!1,!1,!1,a)}function a(a,g){var c=a.type;if(0===c)return c=a.data.length,new k(!0,1<=c,2<=c,g);if(4===c)return c=a.data,new k(c.thisDep,c.contextDep,c.propDep,g);if(5===c)return new k(!1,!1,!1,g);if(6===c){for(var f=c=!1,l=!1,h=0;h<
a.data.length;++h){var e=a.data[h];1===e.type?l=!0:2===e.type?f=!0:3===e.type?c=!0:0===e.type?(c=!0,e=e.data,1<=e&&(f=!0),2<=e&&(l=!0)):4===e.type&&(c=c||e.data.thisDep,f=f||e.data.contextDep,l=l||e.data.propDep)}return new k(c,f,l,g)}return new k(3===c,2===c,1===c,g)}var f=P("./util/sorted-object-keys"),g=P("./util/check"),n=P("./util/extend"),p=P("./util/codegen"),v=P("./util/loop"),R=P("./util/is-typed-array"),G=P("./util/is-ndarray"),x=P("./util/is-array-like"),D=P("./dynamic"),ha=P("./constants/primitives.json"),
w=P("./constants/dtypes.json"),Q=["x","y","z","w"],q="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),N={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
ia="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),e={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,
always:519},r={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},T={frag:35632,vert:35633},m={cw:2304,ccw:2305},X=new k(!1,!1,!1,function(){});fa.exports=function(E,y,G,I,C,h,U,d,R,F,ma,Ba,V,ca,S){function O(a){return a.replace(".","_")}function J(a,d,g){var c=O(a);ua.push(a);Z[c]=ga[c]=!!g;Ka[c]=d}function u(a,d,g){var c=O(a);ua.push(a);Array.isArray(g)?(ga[c]=g.slice(),Z[c]=g.slice()):ga[c]=Z[c]=g;Ga[c]=d}function K(){var a=
p(),d=a.link,c=a.global;a.id=xd++;a.batchId="0";var h=d(hb),k=a.shared={props:"a0"};f(hb).forEach(function(a){k[a]=c.def(h,".",a)});g.optional(function(){a.CHECK=d(g);a.commandStr=g.guessCommand();a.command=d(a.commandStr);a.assert=function(a,g,c){a("if(!(",g,"))",this.CHECK,".commandRaise(",d(c),",",this.command,");")};ba.invalidBlendCombinations=ia});var u=a.next={},z=a.current={};f(Ga).forEach(function(a){Array.isArray(ga[a])&&(u[a]=c.def(k.next,".",a),z[a]=c.def(k.current,".",a))});var A=a.constants=
{};f(ba).forEach(function(a){A[a]=c.def(JSON.stringify(ba[a]))});a.invoke=function(g,c){switch(c.type){case 0:var h=["this",k.context,k.props,a.batchId];return g.def(d(c.data),".call(",h.slice(0,Math.max(c.data.length+1,4)),")");case 1:return g.def(k.props,c.data);case 2:return g.def(k.context,c.data);case 3:return g.def("this",c.data);case 4:return c.data.append(a,g),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(d){return a.invoke(g,d)})}};a.attribCache={};var l={};
a.scopeAttrib=function(a){a=y.id(a);if(a in l)return l[a];var g=F.scope[a];g||(g=F.scope[a]=new wa);return l[a]=d(g)};return a}function M(g){var d=g["static"];g=g.dynamic;var c;if("profile"in d){var h=!!d.profile;c=l(function(a,g){return h});c.enable=h}else if("profile"in g){var f=g.profile;c=a(f,function(a,g){return a.invoke(g,f)})}return c}function qa(c,h){var f=c["static"],k=c.dynamic;if("framebuffer"in f){var u=f.framebuffer;return u?(u=d.getFramebuffer(u),g.command(u,"invalid framebuffer object"),
l(function(a,g){var d=a.link(u),c=a.shared;g.set(c.framebuffer,".next",d);c=c.context;g.set(c,".framebufferWidth",d+".width");g.set(c,".framebufferHeight",d+".height");return d})):l(function(a,g){var d=a.shared;g.set(d.framebuffer,".next","null");d=d.context;g.set(d,".framebufferWidth",d+".drawingBufferWidth");g.set(d,".framebufferHeight",d+".drawingBufferHeight");return"null"})}if("framebuffer"in k){var z=k.framebuffer;return a(z,function(a,d){var c=a.invoke(d,z),h=a.shared,f=h.framebuffer,k=d.def(f,
".getFramebuffer(",c,")");g.optional(function(){a.assert(d,"!"+c+"||"+k,"invalid framebuffer object")});d.set(f,".next",k);h=h.context;d.set(h,".framebufferWidth",k+"?"+k+".width:"+h+".drawingBufferWidth");d.set(h,".framebufferHeight",k+"?"+k+".height:"+h+".drawingBufferHeight");return k})}return null}function oa(d,c,h){function f(d){if(d in u){var A=u[d];g.commandType(A,"object","invalid "+d,h.commandStr);var l=!0,e=A.x|0,t=A.y|0,L,b;"width"in A?(L=A.width|0,g.command(0<=L,"invalid "+d,h.commandStr)):
l=!1;"height"in A?(b=A.height|0,g.command(0<=b,"invalid "+d,h.commandStr)):l=!1;return new k(!l&&c&&c.thisDep,!l&&c&&c.contextDep,!l&&c&&c.propDep,function(a,d){var c=a.shared.context,g=L;"width"in A||(g=d.def(c,".","framebufferWidth","-",e));var h=b;"height"in A||(h=d.def(c,".","framebufferHeight","-",t));return[e,t,g,h]})}if(d in z){var m=z[d],l=a(m,function(a,c){var h=a.invoke(c,m);g.optional(function(){a.assert(c,h+"&&typeof "+h+'==="object"',"invalid "+d)});var f=a.shared.context,k=c.def(h,".x|0"),
u=c.def(h,".y|0"),l=c.def('"width" in ',h,"?",h,".width|0:","(",f,".","framebufferWidth","-",k,")"),A=c.def('"height" in ',h,"?",h,".height|0:","(",f,".","framebufferHeight","-",u,")");g.optional(function(){a.assert(c,l+">=0&&"+A+">=0","invalid "+d)});return[k,u,l,A]});c&&(l.thisDep=l.thisDep||c.thisDep,l.contextDep=l.contextDep||c.contextDep,l.propDep=l.propDep||c.propDep);return l}return c?new k(c.thisDep,c.contextDep,c.propDep,function(a,d){var c=a.shared.context;return[0,0,d.def(c,".","framebufferWidth"),
d.def(c,".","framebufferHeight")]}):null}var u=d["static"],z=d.dynamic;if(d=f("viewport")){var A=d;d=new k(d.thisDep,d.contextDep,d.propDep,function(a,d){var c=A.append(a,d),g=a.shared.context;d.set(g,".viewportWidth",c[2]);d.set(g,".viewportHeight",c[3]);return c})}return{viewport:d,scissor_box:f("scissor.box")}}function z(a,d){var c=a["static"];if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<f(d.dynamic).length)return null;var c=d["static"],h=f(c);if(0<h.length&&"number"===typeof c[h[0]]){for(var k=
[],u=0;u<h.length;++u)g("number"===typeof c[h[u]],"must specify all vertex attribute locations when using vaos"),k.push([c[h[u]]|0,h[u]]);return k}}return null}function H(d,h,f){function u(d){if(d in A){var c=y.id(A[d]);g.optional(function(){ma.shader(T[d],c,g.guessCommand())});var h=l(function(){return c});h.id=c;return h}if(d in z){var f=z[d];return a(f,function(a,c){var h=a.invoke(c,f),k=c.def(a.shared.strings,".id(",h,")");g.optional(function(){c(a.shared.shader,".shader(",T[d],",",k,",",a.command,
");")});return k})}return null}var A=d["static"],z=d.dynamic,e=u("frag"),t=u("vert"),L=null;c(e)&&c(t)?(L=ma.program(t.id,e.id,null,f),d=l(function(a,d){return a.link(L)})):d=new k(e&&e.thisDep||t&&t.thisDep,e&&e.contextDep||t&&t.contextDep,e&&e.propDep||t&&t.propDep,function(a,d){var c=a.shared.shader,h;h=e?e.append(a,d):d.def(c,".","frag");var f;f=t?t.append(a,d):d.def(c,".","vert");var k=c+".program("+f+","+h;g.optional(function(){k+=","+a.command});return d.def(k+")")});return{frag:e,vert:t,progVar:d,
program:L}}function da(d,u){function A(d,c){if(d in z){var h=z[d]|0;c?t.offset=h:t.instances=h;g.command(!c||0<=h,"invalid "+d,u.commandStr);return l(function(a,d){c&&(a.OFFSET=h);return h})}if(d in e){var f=e[d];return a(f,function(a,h){var k=a.invoke(h,f);c&&(a.OFFSET=k,g.optional(function(){a.assert(h,k+">=0","invalid "+d)}));return k})}if(c){if(aa)return l(function(a,d){return a.OFFSET=0});if(L)return new k(m.thisDep,m.contextDep,m.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+
a.shared.vao+".currentVAO.offset:0")})}else if(L)return new k(m.thisDep,m.contextDep,m.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var z=d["static"],e=d.dynamic,t={},L=!1,m=function(){if("vao"in z){var d=z.vao;null!==d&&null===F.getVAO(d)&&(d=F.createVAO(d));L=!0;t.vao=d;return l(function(a){var c=F.getVAO(d);return c?a.link(c):"null"})}if("vao"in e){L=!0;var c=e.vao;return a(c,function(a,d){var g=a.invoke(d,c);return d.def(a.shared.vao+
".getVAO("+g+")")})}return null}(),aa=!1,na=function(){if("elements"in z){var d=z.elements;t.elements=d;if(b(d)){var c=t.elements=h.create(d,!0),d=h.getElements(c);aa=!0}else d&&(d=h.getElements(d),aa=!0,g.command(d,"invalid elements",u.commandStr));c=l(function(a,c){if(d){var g=a.link(d);return a.ELEMENTS=g}return a.ELEMENTS=null});c.value=d;return c}if("elements"in e){aa=!0;var f=e.elements;return a(f,function(a,d){var c=a.shared,h=c.isBufferArgs,c=c.elements,k=a.invoke(d,f),u=d.def("null"),h=d.def(h,
"(",k,")"),z=a.cond(h).then(u,"=",c,".createStream(",k,");")["else"](u,"=",c,".getElements(",k,");");g.optional(function(){a.assert(z["else"],"!"+k+"||"+u,"invalid elements")});d.entry(z);d.exit(a.cond(h).then(c,".destroyStream(",u,");"));return a.ELEMENTS=u})}return L?new k(m.thisDep,m.contextDep,m.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),r=A("offset",!0),y=function(){if("primitive"in z){var d=
z.primitive;t.primitive=d;g.commandParameter(d,ha,"invalid primitve",u.commandStr);return l(function(a,c){return ha[d]})}if("primitive"in e){var h=e.primitive;return a(h,function(a,d){var c=a.constants.primTypes,k=a.invoke(d,h);g.optional(function(){a.assert(d,k+" in "+c,"invalid primitive, must be one of "+f(ha))});return d.def(c,"[",k,"]")})}return aa?c(na)?na.value?l(function(a,d){return d.def(a.ELEMENTS,".primType")}):l(function(){return 4}):new k(na.thisDep,na.contextDep,na.propDep,function(a,
d){var c=a.ELEMENTS;return d.def(c,"?",c,".primType:",4)}):L?new k(m.thisDep,m.contextDep,m.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),U=function(){if("count"in z){var d=z.count|0;t.count=d;g.command("number"===typeof d&&0<=d,"invalid vertex count",u.commandStr);return l(function(){return d})}if("count"in e){var h=e.count;return a(h,function(a,d){var c=a.invoke(d,h);g.optional(function(){a.assert(d,"typeof "+c+'==="number"&&'+c+
">=0&&"+c+"===("+c+"|0)","invalid vertex count")});return c})}if(aa){if(c(na)){if(na)return r?new k(r.thisDep,r.contextDep,r.propDep,function(a,d){var c=d.def(a.ELEMENTS,".vertCount-",a.OFFSET);g.optional(function(){a.assert(d,c+">=0","invalid vertex offset/element buffer too small")});return c}):l(function(a,d){return d.def(a.ELEMENTS,".vertCount")});var f=l(function(){return-1});g.optional(function(){f.MISSING=!0});return f}var A=new k(na.thisDep||r.thisDep,na.contextDep||r.contextDep,na.propDep||
r.propDep,function(a,d){var c=a.ELEMENTS;return a.OFFSET?d.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):d.def(c,"?",c,".vertCount:-1")});g.optional(function(){A.DYNAMIC=!0});return A}return L?new k(m.thisDep,m.contextDep,m.propDep,function(a,d){return d.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),O=A("instances",!1);return{elements:na,primitive:y,count:U,instances:O,offset:r,vao:m,vaoActive:L,elementsActive:aa,"static":t}}function W(d,c){var h=d["static"],k=d.dynamic,
u={};ua.forEach(function(d){function z(c,g){if(d in h){var f=c(h[d]);u[A]=l(function(){return f})}else if(d in k){var e=k[d];u[A]=a(e,function(a,d){return g(a,d,a.invoke(d,e))})}}var A=O(d);switch(d){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return z(function(a){g.commandType(a,"boolean",d,c.commandStr);return a},function(a,c,h){g.optional(function(){a.assert(c,
"typeof "+h+'==="boolean"',"invalid flag "+d,a.commandStr)});return h});case "depth.func":return z(function(a){g.commandParameter(a,e,"invalid "+d,c.commandStr);return e[a]},function(a,c,h){var k=a.constants.compareFuncs;g.optional(function(){a.assert(c,h+" in "+k,"invalid "+d+", must be one of "+f(e))});return c.def(k,"[",h,"]")});case "depth.range":return z(function(a){g.command(x(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",c.commandStr);
return a},function(a,d,c){g.optional(function(){a.assert(d,a.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var h=d.def("+",c,"[0]"),k=d.def("+",c,"[1]");return[h,k]});case "blend.func":return z(function(a){g.commandType(a,"object","blend.func",c.commandStr);var d="srcRGB"in a?a.srcRGB:a.src,h="srcAlpha"in a?a.srcAlpha:a.src,k="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;
g.commandParameter(d,N,A+".srcRGB",c.commandStr);g.commandParameter(h,N,A+".srcAlpha",c.commandStr);g.commandParameter(k,N,A+".dstRGB",c.commandStr);g.commandParameter(a,N,A+".dstAlpha",c.commandStr);g.command(-1===ia.indexOf(d+", "+k),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+k+")",c.commandStr);return[N[d],N[k],N[h],N[a]]},function(a,c,h){function k(z,A){var e=c.def('"',z,A,'" in ',h,"?",h,".",z,A,":",h,".",z);g.optional(function(){a.assert(c,e+" in "+u,"invalid "+d+"."+z+A+", must be one of "+
f(N))});return e}var u=a.constants.blendFuncs;g.optional(function(){a.assert(c,h+"&&typeof "+h+'==="object"',"invalid blend func, must be an object")});var z=k("src","RGB"),A=k("dst","RGB");g.optional(function(){a.assert(c,a.constants.invalidBlendCombinations+".indexOf("+z+'+", "+'+A+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var e=c.def(u,"[",z,"]"),t=c.def(u,"[",k("src","Alpha"),"]"),l=c.def(u,"[",A,"]"),L=c.def(u,"[",k("dst","Alpha"),"]");return[e,l,t,L]});case "blend.equation":return z(function(a){if("string"===
typeof a)return g.commandParameter(a,Ha,"invalid "+d,c.commandStr),[Ha[a],Ha[a]];if("object"===typeof a)return g.commandParameter(a.rgb,Ha,d+".rgb",c.commandStr),g.commandParameter(a.alpha,Ha,d+".alpha",c.commandStr),[Ha[a.rgb],Ha[a.alpha]];g.commandRaise("invalid blend.equation",c.commandStr)},function(a,c,h){var k=a.constants.blendEquations,z=c.def(),u=c.def(),A=a.cond("typeof ",h,'==="string"');g.optional(function(){function c(d,h,g){a.assert(d,g+" in "+k,"invalid "+h+", must be one of "+f(Ha))}
c(A.then,d,h);a.assert(A["else"],h+"&&typeof "+h+'==="object"',"invalid "+d);c(A["else"],d+".rgb",h+".rgb");c(A["else"],d+".alpha",h+".alpha")});A.then(z,"=",u,"=",k,"[",h,"];");A["else"](z,"=",k,"[",h,".rgb];",u,"=",k,"[",h,".alpha];");c(A);return[z,u]});case "blend.color":return z(function(a){g.command(x(a)&&4===a.length,"blend.color must be a 4d array",c.commandStr);return v(4,function(d){return+a[d]})},function(a,d,c){g.optional(function(){a.assert(d,a.shared.isArrayLike+"("+c+")&&"+c+".length===4",
"blend.color must be a 4d array")});return v(4,function(a){return d.def("+",c,"[",a,"]")})});case "stencil.mask":return z(function(a){g.commandType(a,"number",A,c.commandStr);return a|0},function(a,d,c){g.optional(function(){a.assert(d,"typeof "+c+'==="number"',"invalid stencil.mask")});return d.def(c,"|0")});case "stencil.func":return z(function(a){g.commandType(a,"object",A,c.commandStr);var h=a.cmp||"keep",k=a.ref||0;a="mask"in a?a.mask:-1;g.commandParameter(h,e,d+".cmp",c.commandStr);g.commandType(k,
"number",d+".ref",c.commandStr);g.commandType(a,"number",d+".mask",c.commandStr);return[e[h],k,a]},function(a,d,c){var h=a.constants.compareFuncs;g.optional(function(){function g(){a.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}g(c+"&&typeof ",c,'==="object"');g('!("cmp" in ',c,")||(",c,".cmp in ",h,")")});var k=d.def('"cmp" in ',c,"?",h,"[",c,".cmp]",":",7680),f=d.def(c,".ref|0"),A=d.def('"mask" in ',c,"?",c,".mask|0:-1");return[k,f,A]});case "stencil.opFront":case "stencil.opBack":return z(function(a){g.commandType(a,
"object",A,c.commandStr);var h=a.fail||"keep",k=a.zfail||"keep";a=a.zpass||"keep";g.commandParameter(h,r,d+".fail",c.commandStr);g.commandParameter(k,r,d+".zfail",c.commandStr);g.commandParameter(a,r,d+".zpass",c.commandStr);return["stencil.opBack"===d?1029:1028,r[h],r[k],r[a]]},function(a,c,h){function k(z){g.optional(function(){a.assert(c,'!("'+z+'" in '+h+")||("+h+"."+z+" in "+A+")","invalid "+d+"."+z+", must be one of "+f(r))});return c.def('"',z,'" in ',h,"?",A,"[",h,".",z,"]:",7680)}var A=a.constants.stencilOps;
g.optional(function(){a.assert(c,h+"&&typeof "+h+'==="object"',"invalid "+d)});return["stencil.opBack"===d?1029:1028,k("fail"),k("zfail"),k("zpass")]});case "polygonOffset.offset":return z(function(a){g.commandType(a,"object",A,c.commandStr);var d=a.factor|0;a=a.units|0;g.commandType(d,"number",A+".factor",c.commandStr);g.commandType(a,"number",A+".units",c.commandStr);return[d,a]},function(a,c,h){g.optional(function(){a.assert(c,h+"&&typeof "+h+'==="object"',"invalid "+d)});var k=c.def(h,".factor|0"),
f=c.def(h,".units|0");return[k,f]});case "cull.face":return z(function(a){var d=0;"front"===a?d=1028:"back"===a&&(d=1029);g.command(!!d,A,c.commandStr);return d},function(a,d,c){g.optional(function(){a.assert(d,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return d.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return z(function(a){g.command("number"===typeof a&&a>=I.lineWidthDims[0]&&a<=I.lineWidthDims[1],"invalid line width, must be a positive number between "+I.lineWidthDims[0]+
" and "+I.lineWidthDims[1],c.commandStr);return a},function(a,d,c){g.optional(function(){a.assert(d,"typeof "+c+'==="number"&&'+c+">="+I.lineWidthDims[0]+"&&"+c+"<="+I.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return z(function(a){g.commandParameter(a,m,A,c.commandStr);return m[a]},function(a,d,c){g.optional(function(){a.assert(d,c+'==="cw"||'+c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(c+'==="cw"?2304:2305')});case "colorMask":return z(function(a){g.command(x(a)&&
4===a.length,"color.mask must be length 4 array",c.commandStr);return a.map(function(a){return!!a})},function(a,d,c){g.optional(function(){a.assert(d,a.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return v(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return z(function(a){g.command("object"===typeof a&&a,A,c.commandStr);var d="value"in a?a.value:1;a=!!a.invert;g.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",
c.commandStr);return[d,a]},function(a,d,c){g.optional(function(){a.assert(d,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var h=d.def('"value" in ',c,"?+",c,".value:1"),k=d.def("!!",c,".invert");return[h,k]})}});return u}function la(d,c){var h=d["static"],k=d.dynamic,A={};f(h).forEach(function(a){var d=h[a],k;if("number"===typeof d||"boolean"===typeof d)k=l(function(){return d});else if("function"===typeof d){var f=d._reglType;"texture2d"===f||"textureCube"===f?k=l(function(a){return a.link(d)}):
"framebuffer"===f||"framebufferCube"===f?(g.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',c.commandStr),k=l(function(a){return a.link(d.color[0])})):g.commandRaise('invalid data for uniform "'+a+'"',c.commandStr)}else x(d)?k=l(function(c){return c.global.def("[",v(d.length,function(h){g.command("number"===typeof d[h]||"boolean"===typeof d[h],"invalid uniform "+a,c.commandStr);return d[h]}),"]")}):g.commandRaise('invalid or missing data for uniform "'+
a+'"',c.commandStr);k.value=d;A[a]=k});f(k).forEach(function(d){var c=k[d];A[d]=a(c,function(a,d){return a.invoke(d,c)})});return A}function ta(d,c){var h=d["static"],k=d.dynamic,A={};f(h).forEach(function(a){var d=h[a],k=y.id(a),z=new wa;if(b(d))z.state=1,z.buffer=C.getBuffer(C.create(d,34962,!1,!0)),z.type=0;else{var u=C.getBuffer(d);if(u)z.state=1,z.buffer=u,z.type=0;else if(g.command("object"===typeof d&&d,"invalid data for attribute "+a,c.commandStr),"constant"in d){var e=d.constant;z.buffer=
"null";z.state=2;"number"===typeof e?z.x=e:(g.command(x(e)&&0<e.length&&4>=e.length,"invalid constant for attribute "+a,c.commandStr),Q.forEach(function(a,d){d<e.length&&(z[a]=e[d])}))}else{u=b(d.buffer)?C.getBuffer(C.create(d.buffer,34962,!1,!0)):C.getBuffer(d.buffer);g.command(!!u,'missing buffer for attribute "'+a+'"',c.commandStr);var t=d.offset|0;g.command(0<=t,'invalid offset for attribute "'+a+'"',c.commandStr);var L=d.stride|0;g.command(0<=L&&256>L,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',
c.commandStr);var m=d.size|0;g.command(!("size"in d)||0<m&&4>=m,'invalid size for attribute "'+a+'", must be 1,2,3,4',c.commandStr);var aa=!!d.normalized,na=0;"type"in d&&(g.commandParameter(d.type,w,"invalid type for attribute "+a,c.commandStr),na=w[d.type]);var r=d.divisor|0;g.optional(function(){"divisor"in d&&(g.command(0===r||sa,'cannot specify divisor for attribute "'+a+'", instancing not supported',c.commandStr),g.command(0<=r,'invalid divisor for attribute "'+a+'"',c.commandStr));var h=c.commandStr,
k="buffer offset divisor normalized type size stride".split(" ");f(d).forEach(function(d){g.command(0<=k.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+a+'" (valid parameters are '+k+")",h)})});z.buffer=u;z.state=1;z.size=m;z.normalized=aa;z.type=na||u.dtype;z.offset=t;z.stride=L;z.divisor=r}}A[a]=l(function(a,d){var c=a.attribCache;if(k in c)return c[k];var h={isStream:!1};f(z).forEach(function(a){h[a]=z[a]});z.buffer&&(h.buffer=a.link(z.buffer),h.type=h.type||h.buffer+".dtype");
return c[k]=h})});f(k).forEach(function(d){var c=k[d];A[d]=a(c,function(a,h){function k(a){h(l[a],"=",z,".",a,"|0;")}var z=a.invoke(h,c),A=a.shared,u=a.constants,e=A.isBufferArgs,t=A.buffer;g.optional(function(){a.assert(h,z+"&&(typeof "+z+'==="object"||typeof '+z+'==="function")&&('+e+"("+z+")||"+t+".getBuffer("+z+")||"+t+".getBuffer("+z+".buffer)||"+e+"("+z+'.buffer)||("constant" in '+z+"&&(typeof "+z+'.constant==="number"||'+A.isArrayLike+"("+z+".constant))))",'invalid dynamic attribute "'+d+'"')});
var l={isStream:h.def(!1)},L=new wa;L.state=1;f(L).forEach(function(a){l[a]=h.def(""+L[a])});var m=l.buffer,b=l.type;h("if(",e,"(",z,")){",l.isStream,"=true;",m,"=",t,".createStream(",34962,",",z,");",b,"=",m,".dtype;","}else{",m,"=",t,".getBuffer(",z,");","if(",m,"){",b,"=",m,".dtype;",'}else if("constant" in ',z,"){",l.state,"=",2,";","if(typeof "+z+'.constant === "number"){',l[Q[0]],"=",z,".constant;",Q.slice(1).map(function(a){return l[a]}).join("="),"=0;","}else{",Q.map(function(a,d){return l[a]+
"="+z+".constant.length>"+d+"?"+z+".constant["+d+"]:0;"}).join(""),"}}else{","if(",e,"(",z,".buffer)){",m,"=",t,".createStream(",34962,",",z,".buffer);","}else{",m,"=",t,".getBuffer(",z,".buffer);","}",b,'="type" in ',z,"?",u.glTypes,"[",z,".type]:",m,".dtype;",l.normalized,"=!!",z,".normalized;");k("size");k("offset");k("stride");k("divisor");h("}}");h.exit("if(",l.isStream,"){",t,".destroyStream(",m,");","}");return l})});return A}function Da(d){var c=d["static"],h=d.dynamic,g={};f(c).forEach(function(a){var d=
c[a];g[a]=l(function(a,c){return"number"===typeof d||"boolean"===typeof d?""+d:a.link(d)})});f(h).forEach(function(d){var c=h[d];g[d]=a(c,function(a,d){return a.invoke(d,c)})});return g}function za(a,d,c,h,A){function u(a){var d=L[a];d&&(na[a]=d)}var e=a["static"],l=a.dynamic;g.optional(function(){function a(c){f(c).forEach(function(a){g.command(0<=d.indexOf(a),'unknown parameter "'+a+'"',A.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);
a(e);a(l)});var t=z(a,d),m=qa(a,A),L=oa(a,m,A),b=da(a,A),na=W(a,A),aa=H(a,A,t);u("viewport");u(O("scissor.box"));var r=0<f(na).length,m={framebuffer:m,draw:b,shader:aa,state:na,dirty:r,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=M(a,A);m.uniforms=la(c,A);m.drawVAO=m.scopeVAO=b.vao;if(!m.drawVAO&&aa.program&&!t&&G.angle_instanced_arrays&&b["static"].elements){var y=!0;a=aa.program.attributes.map(function(a){a=d["static"][a];y=y&&!!a;return a});if(y&&0<a.length){var U=F.getVAO(F.createVAO({attributes:a,
elements:b["static"].elements}));m.drawVAO=new k(null,null,null,function(a,d){return a.link(U)});m.useVAO=!0}}t?m.useVAO=!0:m.attributes=ta(d,A);m.context=Da(h,A);return m}function ea(a,d,c){var h=a.shared.context,g=a.scope();f(c).forEach(function(k){d.save(h,"."+k);var f=c[k].append(a,d);Array.isArray(f)?g(h,".",k,"=[",f.join(),"];"):g(h,".",k,"=",f,";")});d(g)}function Ea(a,d,c,h){var g=a.shared,k=g.gl,f=g.framebuffer,z;ya&&(z=d.def(g.extensions,".webgl_draw_buffers"));var A=a.constants,g=A.drawBuffer,
A=A.backBuffer;a=c?c.append(a,d):d.def(f,".next");h||d("if(",a,"!==",f,".cur){");d("if(",a,"){",k,".bindFramebuffer(",36160,",",a,".framebuffer);");ya&&d(z,".drawBuffersWEBGL(",g,"[",a,".colorAttachments.length]);");d("}else{",k,".bindFramebuffer(",36160,",null);");ya&&d(z,".drawBuffersWEBGL(",A,");");d("}",f,".cur=",a,";");h||d("}")}function ja(a,d,c){var h=a.shared,g=h.gl,k=a.current,z=a.next,A=h.current,u=h.next,e=a.cond(A,".dirty");ua.forEach(function(d){d=O(d);if(!(d in c.state)){var h,f;if(d in
z){h=z[d];f=k[d];var t=v(ga[d].length,function(a){return e.def(h,"[",a,"]")});e(a.cond(t.map(function(a,d){return a+"!=="+f+"["+d+"]"}).join("||")).then(g,".",Ga[d],"(",t,");",t.map(function(a,d){return f+"["+d+"]="+a}).join(";"),";"))}else h=e.def(u,".",d),t=a.cond(h,"!==",A,".",d),e(t),d in Ka?t(a.cond(h).then(g,".enable(",Ka[d],");")["else"](g,".disable(",Ka[d],");"),A,".",d,"=",h,";"):t(g,".",Ga[d],"(",h,");",A,".",d,"=",h,";")}});0===f(c.state).length&&e(A,".dirty=false;");d(e)}function pa(a,
d,h,g){var k=a.shared,z=a.current,A=k.current,u=k.gl;B(f(h)).forEach(function(k){var f=h[k];if(!g||g(f)){var e=f.append(a,d);if(Ka[k]){var t=Ka[k];c(f)?e?d(u,".enable(",t,");"):d(u,".disable(",t,");"):d(a.cond(e).then(u,".enable(",t,");")["else"](u,".disable(",t,");"));d(A,".",k,"=",e,";")}else if(x(e)){var l=z[k];d(u,".",Ga[k],"(",e,");",e.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";")}else d(u,".",Ga[k],"(",e,");",A,".",k,"=",e,";")}})}function Aa(a,d){sa&&(a.instancing=d.def(a.shared.extensions,
".angle_instanced_arrays"))}function Ra(a,d,h,g,k){function f(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function z(a){L=d.def();a(L,"=",f(),";");"string"===typeof k?a(t,".count+=",k,";"):a(t,".count++;");ca&&(g?(b=d.def(),a(b,"=",m,".getNumPendingQueries();")):a(m,".beginQuery(",t,");"))}function A(a){a(t,".cpuTime+=",f(),"-",L,";");ca&&(g?a(m,".pushScopeStats(",b,",",m,".getNumPendingQueries(),",t,");"):a(m,".endQuery();"))}function u(a){var c=d.def(l,".profile");
d(l,".profile=",a,";");d.exit(l,".profile=",c,";")}var e=a.shared,t=a.stats,l=e.current,m=e.timer;h=h.profile;var L,b;if(h){if(c(h)){h.enable?(z(d),A(d.exit),u("true")):u("false");return}h=h.append(a,d);u(h)}else h=d.def(l,".profile");e=a.block();z(e);d("if(",h,"){",e,"}");a=a.block();A(a);d.exit("if(",h,"){",a,"}")}function na(a,d,c,h,k){function z(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function A(c,h,g){function k(){d("if(!",t,".buffer){",z,".enableVertexAttribArray(",e,");}");var c=g.type,f;f=g.size?d.def(g.size,"||",h):h;d("if(",t,".type!==",c,"||",t,".size!==",f,"||",L.map(function(a){return t+"."+a+"!=="+g[a]}).join("||"),"){",z,".bindBuffer(",34962,",",l,".buffer);",z,".vertexAttribPointer(",[e,f,c,g.normalized,g.stride,g.offset],");",t,".type=",c,";",t,".size=",f,";",L.map(function(a){return t+"."+a+"="+g[a]+";"}).join(""),"}");sa&&(c=g.divisor,d("if(",t,".divisor!==",c,"){",
a.instancing,".vertexAttribDivisorANGLE(",[e,c],");",t,".divisor=",c,";}"))}function f(){d("if(",t,".buffer){",z,".disableVertexAttribArray(",e,");",t,".buffer=null;","}if(",Q.map(function(a,d){return t+"."+a+"!=="+m[d]}).join("||"),"){",z,".vertexAttrib4f(",e,",",m,");",Q.map(function(a,d){return t+"."+a+"="+m[d]+";"}).join(""),"}")}var z=u.gl,e=d.def(c,".location"),t=d.def(u.attributes,"[",e,"]");c=g.state;var l=g.buffer,m=[g.x,g.y,g.z,g.w],L=["buffer","normalized","offset","stride"];1===c?k():
2===c?f():(d("if(",c,"===",1,"){"),k(),d("}else{"),f(),d("}"))}var u=a.shared;h.forEach(function(h){var u=h.name,e=c.attributes[u],t;if(e){if(!k(e))return;t=e.append(a,d)}else{if(!k(X))return;var l=a.scopeAttrib(u);g.optional(function(){a.assert(d,l+".state","missing attribute "+u)});t={};f(new wa).forEach(function(a){t[a]=d.def(l,".",a)})}A(a.link(h),z(h.info.type),t)})}function Tb(a,d,h,k,f,z){for(var A=a.shared,u=A.gl,e,t=0;t<k.length;++t){var l=k[t],m=l.name,L=l.info.type,b=h.uniforms[m],l=a.link(l)+
".location",na;if(b){if(!f(b))continue;if(c(b)){var aa=b.value;g.command(null!==aa&&"undefined"!==typeof aa,'missing uniform "'+m+'"',a.commandStr);if(35678===L||35680===L)g.command("function"===typeof aa&&(35678===L&&("texture2d"===aa._reglType||"framebuffer"===aa._reglType)||35680===L&&("textureCube"===aa._reglType||"framebufferCube"===aa._reglType)),"invalid texture for uniform "+m,a.commandStr),b=a.link(aa._texture||aa.color[0]._texture),d(u,".uniform1i(",l,",",b+".bind());"),d.exit(b,".unbind();");
else if(35674===L||35675===L||35676===L){g.optional(function(){g.command(x(aa),"invalid matrix for uniform "+m,a.commandStr);g.command(35674===L&&4===aa.length||35675===L&&9===aa.length||35676===L&&16===aa.length,"invalid length for matrix uniform "+m,a.commandStr)});var b=a.global.def("new Float32Array(["+Array.prototype.slice.call(aa)+"])"),r=2;35675===L?r=3:35676===L&&(r=4);d(u,".uniformMatrix",r,"fv(",l,",false,",b,");")}else{switch(L){case 5126:g.commandType(aa,"number","uniform "+m,a.commandStr);
e="1f";break;case 35664:g.command(x(aa)&&2===aa.length,"uniform "+m,a.commandStr);e="2f";break;case 35665:g.command(x(aa)&&3===aa.length,"uniform "+m,a.commandStr);e="3f";break;case 35666:g.command(x(aa)&&4===aa.length,"uniform "+m,a.commandStr);e="4f";break;case 35670:g.commandType(aa,"boolean","uniform "+m,a.commandStr);e="1i";break;case 5124:g.commandType(aa,"number","uniform "+m,a.commandStr);e="1i";break;case 35671:g.command(x(aa)&&2===aa.length,"uniform "+m,a.commandStr);e="2i";break;case 35667:g.command(x(aa)&&
2===aa.length,"uniform "+m,a.commandStr);e="2i";break;case 35672:g.command(x(aa)&&3===aa.length,"uniform "+m,a.commandStr);e="3i";break;case 35668:g.command(x(aa)&&3===aa.length,"uniform "+m,a.commandStr);e="3i";break;case 35673:g.command(x(aa)&&4===aa.length,"uniform "+m,a.commandStr);e="4i";break;case 35669:g.command(x(aa)&&4===aa.length,"uniform "+m,a.commandStr),e="4i"}d(u,".uniform",e,"(",l,",",x(aa)?Array.prototype.slice.call(aa):aa,");")}continue}else na=b.append(a,d)}else{if(!f(X))continue;
na=d.def(A.uniforms,"[",y.id(m),"]")}35678===L?(g(!Array.isArray(na),"must specify a scalar prop for textures"),d("if(",na,"&&",na,'._reglType==="framebuffer"){',na,"=",na,".color[0];","}")):35680===L&&(g(!Array.isArray(na),"must specify a scalar prop for cube maps"),d("if(",na,"&&",na,'._reglType==="framebufferCube"){',na,"=",na,".color[0];","}"));g.optional(function(){function c(h,g){a.assert(d,h,'bad data or missing for uniform "'+m+'".  '+g)}function h(a){g(!Array.isArray(na),"must not specify an array type for uniform");
c("typeof "+na+'==="'+a+'"',"invalid type, expected "+a)}function k(d,h){Array.isArray(na)?g(na.length===d,"must have length "+d):c(A.isArrayLike+"("+na+")&&"+na+".length==="+d,"invalid vector, should have length "+d,a.commandStr)}function f(d){g(!Array.isArray(na),"must not specify a value type");c("typeof "+na+'==="function"&&'+na+'._reglType==="texture'+(3553===d?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(L){case 5124:h("number");break;case 35667:k(2,"number");break;case 35668:k(3,
"number");break;case 35669:k(4,"number");break;case 5126:h("number");break;case 35664:k(2,"number");break;case 35665:k(3,"number");break;case 35666:k(4,"number");break;case 35670:h("boolean");break;case 35671:k(2,"boolean");break;case 35672:k(3,"boolean");break;case 35673:k(4,"boolean");break;case 35674:k(4,"number");break;case 35675:k(9,"number");break;case 35676:k(16,"number");break;case 35678:f(3553);break;case 35680:f(34067)}});b=1;switch(L){case 35678:case 35680:b=d.def(na,"._texture");d(u,".uniform1i(",
l,",",b,".bind());");d.exit(b,".unbind();");continue;case 5124:case 35670:e="1i";break;case 35667:case 35671:e="2i";b=2;break;case 35668:case 35672:e="3i";b=3;break;case 35669:case 35673:e="4i";b=4;break;case 5126:e="1f";break;case 35664:e="2f";b=2;break;case 35665:e="3f";b=3;break;case 35666:e="4f";b=4;break;case 35674:e="Matrix2fv";break;case 35675:e="Matrix3fv";break;case 35676:e="Matrix4fv"}if("M"===e.charAt(0)){d(u,".uniform",e,"(",l,",");var l=Math.pow(L-35674+2,2),U=a.global.def("new Float32Array(",
l,")");Array.isArray(na)?d("false,(",v(l,function(a){return U+"["+a+"]="+na[a]}),",",U,")"):d("false,(Array.isArray(",na,")||",na," instanceof Float32Array)?",na,":(",v(l,function(a){return U+"["+a+"]="+na+"["+a+"]"}),",",U,")");d(");")}else{if(1<b){for(var r=[],O=[],B=0;B<b;++B)Array.isArray(na)?O.push(na[B]):O.push(d.def(na+"["+B+"]")),z&&r.push(d.def());z&&d("if(!",a.batchId,"||",r.map(function(a,d){return a+"!=="+O[d]}).join("||"),"){",r.map(function(a,d){return a+"="+O[d]+";"}).join(""));d(u,
".uniform",e,"(",l,",",O.join(","),");")}else g(!Array.isArray(na),"uniform value must not be an array"),z&&(b=d.def(),d("if(!",a.batchId,"||",b,"!==",na,"){",b,"=",na,";")),d(u,".uniform",e,"(",l,",",na,");");z&&d("}")}}}function Ya(a,d,h,k){function f(c){var g=l[c];return g?g.contextDep&&k.contextDynamic||g.propDep?g.append(a,h):g.append(a,d):d.def(t,".",c)}function z(){function a(){h(r,".drawElementsInstancedANGLE(",[L,aa,y,b+"<<(("+y+"-5121)>>1)",na],");")}function d(){h(r,".drawArraysInstancedANGLE(",
[L,b,aa,na],");")}m&&"null"!==m?U?a():(h("if(",m,"){"),a(),h("}else{"),d(),h("}")):d()}function A(){function a(){h(u+".drawElements("+[L,aa,y,b+"<<(("+y+"-5121)>>1)"]+");")}function d(){h(u+".drawArrays("+[L,b,aa]+");")}m&&"null"!==m?U?a():(h("if(",m,"){"),a(),h("}else{"),d(),h("}")):d()}var e=a.shared,u=e.gl,t=e.draw,l=k.draw,m=function(){var c=l.elements,g=d;if(c){if(c.contextDep&&k.contextDynamic||c.propDep)g=h;c=c.append(a,g);l.elementsActive&&g("if("+c+")"+u+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=
g.def(),g(c,"=",t,".","elements",";","if(",c,"){",u,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",e.vao,".currentVAO){",c,"=",a.shared.elements+".getElements("+e.vao,".currentVAO.elements);",Fa?"":"if("+c+")"+u+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),L=f("primitive"),b=f("offset"),aa=function(){var c=l.count,f,z=d;if(c){if(c.contextDep&&k.contextDynamic||c.propDep)z=h;f=c.append(a,z);g.optional(function(){c.MISSING&&a.assert(d,"false","missing vertex count");c.DYNAMIC&&
a.assert(z,f+">=0","missing vertex count")})}else f=z.def(t,".","count"),g.optional(function(){a.assert(z,f+">=0","missing vertex count")});return f}();if("number"===typeof aa){if(0===aa)return}else h("if(",aa,"){"),h.exit("}");var na,r;sa&&(na=f("instances"),r=a.instancing);var y=m+".type",U=l.elements&&c(l.elements)&&!l.vaoActive;sa&&("number"!==typeof na||0<=na)?"string"===typeof na?(h("if(",na,">0){"),z(),h("}else if(",na,"<0){"),A(),h("}")):z():A()}function A(a,d,c,h,k){var f=K();k=f.proc("body",
k);g.optional(function(){f.commandStr=d.commandStr;f.command=f.link(d.commandStr)});sa&&(f.instancing=k.def(f.shared.extensions,".angle_instanced_arrays"));a(f,k,c,h);return f.compile().body}function t(a,d,c,h){Aa(a,d);c.useVAO?c.drawVAO?d(a.shared.vao,".setVAO(",c.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(d(a.shared.vao,".setVAO(null);"),na(a,d,c,h.attributes,function(){return!0}));Tb(a,d,c,h.uniforms,function(){return!0},!1);Ya(a,d,d,c)}function aa(a,d){var c=
a.proc("draw",1);Aa(a,c);ea(a,c,d.context);Ea(a,c,d.framebuffer);ja(a,c,d);pa(a,c,d.state);Ra(a,c,d,!1,!0);var h=d.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",h,".program);");if(d.shader.program)t(a,c,d,d.shader.program);else{c(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),k=c.def(h,".id"),z=c.def(g,"[",k,"]");c(a.cond(z).then(z,".call(this,a0);")["else"](z,"=",g,"[",k,"]=",a.link(function(c){return A(t,a,d,c,1)}),"(",h,");",z,".call(this,a0);"))}0<f(d.state).length&&c(a.shared.current,
".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function va(a,d,c,h){function g(){return!0}a.batchId="a1";Aa(a,d);na(a,d,c,h.attributes,g);Tb(a,d,c,h.uniforms,g,!1);Ya(a,d,d,c)}function xa(a,d,c,h){function g(a){return a.contextDep&&f||a.propDep}function k(a){return!g(a)}Aa(a,d);var f=c.contextDep,z=d.def(),e=d.def();a.shared.props=e;a.batchId=z;var u=a.scope(),t=a.scope();d(u.entry,"for(",z,"=0;",z,"<","a1",";++",z,"){",e,"=","a0","[",z,"];",t,"}",u.exit);c.needsContext&&ea(a,t,c.context);
c.needsFramebuffer&&Ea(a,t,c.framebuffer);pa(a,t,c.state,g);c.profile&&g(c.profile)&&Ra(a,t,c,!1,!0);h?(c.useVAO?c.drawVAO?g(c.drawVAO)?t(a.shared.vao,".setVAO(",c.drawVAO.append(a,t),");"):u(a.shared.vao,".setVAO(",c.drawVAO.append(a,u),");"):u(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(u(a.shared.vao,".setVAO(null);"),na(a,u,c,h.attributes,k),na(a,t,c,h.attributes,g)),Tb(a,u,c,h.uniforms,k,!1),Tb(a,t,c,h.uniforms,g,!0),Ya(a,u,t,c)):(d=a.global.def("{}"),h=c.shader.progVar.append(a,t),
e=t.def(h,".id"),u=t.def(d,"[",e,"]"),t(a.shared.gl,".useProgram(",h,".program);","if(!",u,"){",u,"=",d,"[",e,"]=",a.link(function(d){return A(va,a,c,d,2)}),"(",h,");}",u,".call(this,a0[",z,"],",z,");"))}function zc(a,d){function c(a){return a.contextDep&&g||a.propDep}var h=a.proc("batch",2);a.batchId="0";Aa(a,h);var g=!1,k=!0;f(d.context).forEach(function(a){g=g||d.context[a].propDep});g||(ea(a,h,d.context),k=!1);var z=d.framebuffer,e=!1;z?(z.propDep?g=e=!0:z.contextDep&&g&&(e=!0),e||Ea(a,h,z)):
Ea(a,h,null);d.state.viewport&&d.state.viewport.propDep&&(g=!0);ja(a,h,d);pa(a,h,d.state,function(a){return!c(a)});d.profile&&c(d.profile)||Ra(a,h,d,!1,"a1");d.contextDep=g;d.needsContext=k;d.needsFramebuffer=e;k=d.shader.progVar;if(k.contextDep&&g||k.propDep)xa(a,h,d,null);else if(k=k.append(a,h),h(a.shared.gl,".useProgram(",k,".program);"),d.shader.program)xa(a,h,d,d.shader.program);else{h(a.shared.vao,".setVAO(null);");var z=a.global.def("{}"),e=h.def(k,".id"),u=h.def(z,"[",e,"]");h(a.cond(u).then(u,
".call(this,a0,a1);")["else"](u,"=",z,"[",e,"]=",a.link(function(c){return A(xa,a,d,c,2)}),"(",k,");",u,".call(this,a0,a1);"))}0<f(d.state).length&&h(a.shared.current,".dirty=true;");a.shared.vao&&h(a.shared.vao,".setVAO(null);")}function Hb(a,d){function c(k){var f=d.shader[k];f&&h.set(g.shader,"."+k,f.append(a,h))}var h=a.proc("scope",3);a.batchId="a2";var g=a.shared,k=g.current;ea(a,h,d.context);d.framebuffer&&d.framebuffer.append(a,h);B(f(d.state)).forEach(function(c){var k=d.state[c].append(a,
h);x(k)?k.forEach(function(d,g){h.set(a.next[c],"["+g+"]",d)}):h.set(g.next,"."+c,k)});Ra(a,h,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var k=d.draw[c];k&&h.set(g.draw,"."+c,""+k.append(a,h))});f(d.uniforms).forEach(function(c){var k=d.uniforms[c].append(a,h);Array.isArray(k)&&(k="["+k.join()+"]");h.set(g.uniforms,"["+y.id(c)+"]",k)});f(d.attributes).forEach(function(c){var g=d.attributes[c].append(a,h),k=a.scopeAttrib(c);f(new wa).forEach(function(a){h.set(k,
"."+a,g[a])})});d.scopeVAO&&h.set(g.vao,".targetVAO",d.scopeVAO.append(a,h));c("vert");c("frag");0<f(d.state).length&&(h(k,".dirty=true;"),h.exit(k,".dirty=true;"));h("a1(",a.shared.context,",a0,",a.batchId,");")}function Y(a){if("object"===typeof a&&!x(a)){for(var d=f(a),c=0;c<d.length;++c)if(D.isDynamic(a[d[c]]))return!0;return!1}}function L(d,c,h){function g(a,d){e.forEach(function(c){var h=k[c];D.isDynamic(h)&&(h=a.invoke(d,h),d(l,".",c,"=",h,";"))})}var k=c["static"][h];if(k&&Y(k)){var z=d.global,
e=f(k),u=!1,A=!1,t=!1,l=d.global.def("{}");e.forEach(function(c){var h=k[c];if(D.isDynamic(h))"function"===typeof h&&(h=k[c]=D.unbox(h)),c=a(h,null),u=u||c.thisDep,t=t||c.propDep,A=A||c.contextDep;else{z(l,".",c,"=");switch(typeof h){case "number":z(h);break;case "string":z('"',h,'"');break;case "object":Array.isArray(h)&&z("[",h.join(),"]");break;default:z(d.link(h))}z(";")}});c.dynamic[h]=new D.DynamicVariable(4,{thisDep:u,contextDep:A,propDep:t,ref:l,append:g});delete c["static"][h]}}var wa=F.Record,
Ha={add:32774,subtract:32778,"reverse subtract":32779};G.ext_blend_minmax&&(Ha.min=32775,Ha.max=32776);var sa=G.angle_instanced_arrays,ya=G.webgl_draw_buffers,Fa=G.oes_vertex_array_object,ga={dirty:!0,profile:S.profile},Z={},ua=[],Ka={},Ga={};J("dither",3024);J("blend.enable",3042);u("blend.color","blendColor",[0,0,0,0]);u("blend.equation","blendEquationSeparate",[32774,32774]);u("blend.func","blendFuncSeparate",[1,0,1,0]);J("depth.enable",2929,!0);u("depth.func","depthFunc",513);u("depth.range",
"depthRange",[0,1]);u("depth.mask","depthMask",!0);u("colorMask","colorMask",[!0,!0,!0,!0]);J("cull.enable",2884);u("cull.face","cullFace",1029);u("frontFace","frontFace",2305);u("lineWidth","lineWidth",1);J("polygonOffset.enable",32823);u("polygonOffset.offset","polygonOffset",[0,0]);J("sample.alpha",32926);J("sample.enable",32928);u("sample.coverage","sampleCoverage",[1,!1]);J("stencil.enable",2960);u("stencil.mask","stencilMask",-1);u("stencil.func","stencilFunc",[519,0,-1]);u("stencil.opFront",
"stencilOpSeparate",[1028,7680,7680,7680]);u("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);J("scissor.enable",3089);u("scissor.box","scissor",[0,0,E.drawingBufferWidth,E.drawingBufferHeight]);u("viewport","viewport",[0,0,E.drawingBufferWidth,E.drawingBufferHeight]);var hb={gl:E,context:V,strings:y,next:Z,current:ga,draw:Ba,elements:h,buffer:C,shader:ma,attributes:F.state,vao:F,uniforms:R,framebuffer:d,extensions:G,timer:ca,isBufferArgs:b},ba={primTypes:ha,compareFuncs:e,blendFuncs:N,
blendEquations:Ha,stencilOps:r,glTypes:w,orientationType:m};g.optional(function(){hb.isArrayLike=x});ya&&(ba.backBuffer=[1029],ba.drawBuffer=v(I.maxDrawbuffers,function(a){return 0===a?[0]:v(a,function(a){return 36064+a})}));var xd=0;return{next:Z,current:ga,procs:function(){var a=K(),d=a.proc("poll"),c=a.proc("refresh"),h=a.block();d(h);c(h);var g=a.shared,k=g.gl,z=g.next,e=g.current;h(e,".dirty=false;");Ea(a,d);Ea(a,c,null,!0);var u;sa&&(u=a.link(sa));G.oes_vertex_array_object&&c(a.link(G.oes_vertex_array_object),
".bindVertexArrayOES(null);");for(var A=0;A<I.maxAttributes;++A){var t=c.def(g.attributes,"[",A,"]"),l=a.cond(t,".buffer");l.then(k,".enableVertexAttribArray(",A,");",k,".bindBuffer(",34962,",",t,".buffer.buffer);",k,".vertexAttribPointer(",A,",",t,".size,",t,".type,",t,".normalized,",t,".stride,",t,".offset);")["else"](k,".disableVertexAttribArray(",A,");",k,".vertexAttrib4f(",A,",",t,".x,",t,".y,",t,".z,",t,".w);",t,".buffer=null;");c(l);sa&&c(u,".vertexAttribDivisorANGLE(",A,",",t,".divisor);")}c(a.shared.vao,
".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");f(Ka).forEach(function(g){var f=Ka[g],u=h.def(z,".",g),A=a.block();A("if(",u,"){",k,".enable(",f,")}else{",k,".disable(",f,")}",e,".",g,"=",u,";");c(A);d("if(",u,"!==",e,".",g,"){",A,"}")});f(Ga).forEach(function(g){var f=Ga[g],u=ga[g],A,t,l=a.block();l(k,".",f,"(");x(u)?(f=u.length,A=a.global.def(z,".",g),t=a.global.def(e,".",g),l(v(f,function(a){return A+"["+a+"]"}),");",v(f,function(a){return t+"["+a+"]="+A+"["+a+"];"}).join("")),
d("if(",v(f,function(a){return A+"["+a+"]!=="+t+"["+a+"]"}).join("||"),"){",l,"}")):(A=h.def(z,".",g),t=h.def(e,".",g),l(A,");",e,".",g,"=",A,";"),d("if(",A,"!==",t,"){",l,"}"));c(l)});return a.compile()}(),compile:function(a,d,c,h,g){var k=K();k.stats=k.link(g);f(d["static"]).forEach(function(a){L(k,d,a)});q.forEach(function(d){L(k,a,d)});var z=za(a,d,c,h,k);aa(k,z);Hb(k,z);zc(k,z);return n(k.compile(),{destroy:function(){z.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(P,fa,Ca){function b(c,g){this.id=a++;this.type=c;this.data=g}function B(a){if(0===a.length)return[];var c=a.charAt(0),k=a.charAt(a.length-1);if(1<a.length&&c===k&&('"'===c||"'"===c))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return B(a.substr(0,
c.index)).concat(B(c[1])).concat(B(a.substr(c.index+c[0].length)));c=a.split(".");if(1===c.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(k=0;k<c.length;++k)a=a.concat(B(c[k]));return a}function k(a){return"["+B(a).join("][")+"]"}function c(a,k){if("function"===typeof a)return new b(0,a);if("number"===typeof a||"boolean"===typeof a)return new b(5,a);if(Array.isArray(a))return new b(6,a.map(function(a,f){return c(a,k+"["+f+"]")}));if(a instanceof b)return a;l(!1,"invalid option type in uniform "+
k)}var l=P("./util/check"),a=0;fa.exports={DynamicVariable:b,define:function(a,c){return new b(a,k(c+""))},isDynamic:function(a){return"function"===typeof a&&!a._reglType||a instanceof b},unbox:c,accessor:k}},{"./util/check":21}],10:[function(P,fa,Ca){var b=P("./util/check"),B=P("./util/is-typed-array"),k=P("./util/is-ndarray"),c=P("./util/values"),l=P("./constants/primitives.json"),a=P("./constants/usage.json");fa.exports=function(f,g,n,p){function v(a){this.id=D++;x[this.id]=this;this.buffer=a;
this.primType=4;this.type=this.vertCount=0}function R(a,c,l,w,e,r,T){a.buffer.bind();var m;c?((m=T)||B(c)&&(!k(c)||B(c.data))||(m=g.oes_element_index_uint?5125:5123),n._initBuffer(a.buffer,c,l,m,3)):(f.bufferData(34963,r,l),a.buffer.dtype=m||5121,a.buffer.usage=l,a.buffer.dimension=3,a.buffer.byteLength=r);m=T;if(!T){switch(a.buffer.dtype){case 5121:case 5120:m=5121;break;case 5123:case 5122:m=5123;break;case 5125:case 5124:m=5125;break;default:b.raise("unsupported type for element array")}a.buffer.dtype=
m}a.type=m;b(5125!==m||!!g.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");c=e;0>c&&(c=a.buffer.byteLength,5123===m?c>>=1:5125===m&&(c>>=2));a.vertCount=c;c=w;0>w&&(c=4,w=a.buffer.dimension,1===w&&(c=0),2===w&&(c=1),3===w&&(c=4));a.primType=c}function G(a){p.elementsCount--;b(null!==a.buffer,"must not double destroy elements");delete x[a.id];a.buffer.destroy();a.buffer=null}var x={},D=0,ha={uint8:5121,uint16:5123};g.oes_element_index_uint&&(ha.uint32=
5125);v.prototype.bind=function(){this.buffer.bind()};var w=[];return{create:function(c,g){function f(c){if(c)if("number"===typeof c)w(c),e.primType=4,e.vertCount=c|0,e.type=5121;else{var g=null,m=35044,q=-1,E=-1,y=0,p=0;if(Array.isArray(c)||B(c)||k(c))g=c;else if(b.type(c,"object","invalid arguments for elements"),"data"in c&&(g=c.data,b(Array.isArray(g)||B(g)||k(g),"invalid data for element buffer")),"usage"in c&&(b.parameter(c.usage,a,"invalid element buffer usage"),m=a[c.usage]),"primitive"in
c&&(b.parameter(c.primitive,l,"invalid element buffer primitive"),q=l[c.primitive]),"count"in c&&(b("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),E=c.count|0),"type"in c&&(b.parameter(c.type,ha,"invalid buffer type"),p=ha[c.type]),"length"in c)y=c.length|0;else if(y=E,5123===p||5122===p)y*=2;else if(5125===p||5124===p)y*=4;R(e,g,m,q,E,y,p)}else w(),e.primType=4,e.vertCount=0,e.type=5121;return f}var w=n.create(null,34963,!0),e=new v(w._buffer);p.elementsCount++;f(c);f._reglType=
"elements";f._elements=e;f.subdata=function(a,c){w.subdata(a,c);return f};f.destroy=function(){G(e)};return f},createStream:function(a){var c=w.pop();c||(c=new v(n.create(null,34963,!0,!1)._buffer));R(c,a,35040,-1,-1,0,0);return c},destroyStream:function(a){w.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof v?a._elements:null},clear:function(){c(x).forEach(G)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,
"./util/is-typed-array":30,"./util/values":36}],11:[function(P,fa,Ca){var b=P("./util/sorted-object-keys"),B=P("./util/check");fa.exports=function(k,c){function l(c){B.type(c,"string","extension name must be string");c=c.toLowerCase();var g;try{g=a[c]=k.getExtension(c)}catch(f){}return!!g}for(var a={},f=0;f<c.extensions.length;++f){var g=c.extensions[f];if(!l(g))return c.onDestroy(),c.onDone('"'+g+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}c.optionalExtensions.forEach(l);return{extensions:a,restore:function(){b(a).forEach(function(c){if(a[c]&&!l(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(P,fa,Ca){var b=P("./util/check"),B=P("./util/values"),k=P("./util/extend"),c=[6407,6408],l=[];l[6408]=4;l[6407]=3;var a=[];a[5121]=1;a[5126]=4;a[36193]=2;var f=[32854,32855,36194,35907,34842,34843,34836],g={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};fa.exports=function(n,p,v,R,G,x){function D(a,c,h){this.target=a;this.texture=c;this.renderbuffer=h;var k=a=0;c?(a=c.width,k=c.height):h&&(a=h.width,k=h.height);this.width=a;this.height=k}function ha(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function w(a,c,h){if(a){if(a.texture){a=a.texture._texture;var k=Math.max(1,a.height);b(Math.max(1,a.width)===c&&k===h,"inconsistent width/height for supplied texture")}else a=
a.renderbuffer._renderbuffer,b(a.width===c&&a.height===h,"inconsistent width/height for renderbuffer");a.refCount+=1}}function Q(a,c){c&&(c.texture?n.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):n.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function q(a){var c=3553,h=null,k=null,g=a;"object"===typeof a&&(g=a.data,"target"in a&&(c=a.target|0));b.type(g,"function","invalid attachment data");a=g._reglType;"texture2d"===a?(h=g,b(3553===c)):
"textureCube"===a?(h=g,b(34069<=c&&34075>c,"invalid cube map target")):"renderbuffer"===a?(k=g,c=36161):b.raise("invalid regl object for attachment");return new D(c,h,k)}function N(a,c,h,k,g){if(h)return a=R.create2D({width:a,height:c,format:k,type:g}),a._texture.refCount=0,new D(3553,a,null);a=G.create({width:a,height:c,format:k});a._renderbuffer.refCount=0;return new D(36161,null,a)}function ia(a){return a&&(a.texture||a.renderbuffer)}function e(a,c,h){a&&(a.texture?a.texture.resize(c,h):a.renderbuffer&&
a.renderbuffer.resize(c,h),a.width=c,a.height=h)}function r(){this.id=h++;U[this.id]=this;this.framebuffer=n.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function T(a){a.colorAttachments.forEach(ha);ha(a.depthAttachment);ha(a.stencilAttachment);ha(a.depthStencilAttachment)}function m(a){var c=a.framebuffer;b(c,"must not double destroy framebuffer");n.deleteFramebuffer(c);a.framebuffer=null;x.framebufferCount--;
delete U[a.id]}function X(a){var c;n.bindFramebuffer(36160,a.framebuffer);var h=a.colorAttachments;for(c=0;c<h.length;++c)Q(36064+c,h[c]);for(c=h.length;c<v.maxColorAttachments;++c)n.framebufferTexture2D(36160,36064+c,3553,null,0);n.framebufferTexture2D(36160,33306,3553,null,0);n.framebufferTexture2D(36160,36096,3553,null,0);n.framebufferTexture2D(36160,36128,3553,null,0);Q(36096,a.depthAttachment);Q(36128,a.stencilAttachment);Q(33306,a.depthStencilAttachment);a=n.checkFramebufferStatus(36160);n.isContextLost()||
36053===a||b.raise("framebuffer configuration not supported, status = "+g[a]);n.bindFramebuffer(36160,y.next?y.next.framebuffer:null);y.cur=y.next;n.getError()}function E(d,h){function g(d,h){var k;b(y.next!==U,"can not update framebuffer which is currently in use");var e=0,m=0,r=!0,u=!0;k=null;var B=!0,E="rgba",x="uint8",G=1,z=null,H=null,R=null,W=!1;if("number"===typeof d)e=d|0,m=h|0||e;else if(d){b.type(d,"object","invalid arguments for framebuffer");"shape"in d?(m=d.shape,b(Array.isArray(m)&&
2<=m.length,"invalid shape for framebuffer"),e=m[0],m=m[1]):("radius"in d&&(e=m=d.radius),"width"in d&&(e=d.width),"height"in d&&(m=d.height));if("color"in d||"colors"in d)k=d.color||d.colors,Array.isArray(k)&&b(1===k.length||p.webgl_draw_buffers,"multiple render targets not supported");if(!k){"colorCount"in d&&(G=d.colorCount|0,b(0<G,"invalid color buffer count"));"colorTexture"in d&&(B=!!d.colorTexture,E="rgba4");if("colorType"in d){x=d.colorType;if(B)b(p.oes_texture_float||!("float"===x||"float32"===
x),"you must enable OES_texture_float in order to use floating point framebuffer objects"),b(p.oes_texture_half_float||!("half float"===x||"float16"===x),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===x||"float16"===x)b(p.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),E="rgba16f";else if("float"===x||"float32"===x)b(p.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
E="rgba32f";b.oneOf(x,C,"invalid color type")}"colorFormat"in d&&(E=d.colorFormat,0<=ra.indexOf(E)?B=!0:0<=I.indexOf(E)?B=!1:b.optional(function(){if(B)b.oneOf(d.colorFormat,ra,"invalid color format for texture");else b.oneOf(d.colorFormat,I,"invalid color format for renderbuffer")}))}if("depthTexture"in d||"depthStencilTexture"in d)W=!(!d.depthTexture&&!d.depthStencilTexture),b(!W||p.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in d&&("boolean"===typeof d.depth?r=d.depth:
(z=d.depth,u=!1));"stencil"in d&&("boolean"===typeof d.stencil?u=d.stencil:(H=d.stencil,r=!1));"depthStencil"in d&&("boolean"===typeof d.depthStencil?r=u=d.depthStencil:(R=d.depthStencil,u=r=!1))}else e=m=1;var n=null,D=null,Q=null,za=null;if(Array.isArray(k))n=k.map(q);else if(k)n=[q(k)];else for(n=Array(G),k=0;k<G;++k)n[k]=N(e,m,B,E,x);b(p.webgl_draw_buffers||1>=n.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");b(n.length<=v.maxColorAttachments,
"too many color attachments, not supported");e=e||n[0].width;m=m||n[0].height;z?D=q(z):r&&!u&&(D=N(e,m,W,"depth","uint32"));H?Q=q(H):u&&!r&&(Q=N(e,m,!1,"stencil","uint8"));R?za=q(R):!z&&!H&&u&&r&&(za=N(e,m,W,"depth stencil","depth stencil"));b(1>=!!z+!!H+!!R,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");r=null;for(k=0;k<n.length;++k)w(n[k],e,m),b(!n[k]||n[k].texture&&0<=c.indexOf(n[k].texture._texture.format)||n[k].renderbuffer&&0<=f.indexOf(n[k].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+k+" is invalid"),n[k]&&n[k].texture&&(u=l[n[k].texture._texture.format]*a[n[k].texture._texture.type],null===r?r=u:b(r===u,"all color attachments much have the same number of bits per pixel."));w(D,e,m);b(!D||D.texture&&6402===D.texture._texture.format||D.renderbuffer&&33189===D.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");w(Q,e,m);b(!Q||Q.renderbuffer&&36168===Q.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
w(za,e,m);b(!za||za.texture&&34041===za.texture._texture.format||za.renderbuffer&&34041===za.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");T(U);U.width=e;U.height=m;U.colorAttachments=n;U.depthAttachment=D;U.stencilAttachment=Q;U.depthStencilAttachment=za;g.color=n.map(ia);g.depth=ia(D);g.stencil=ia(Q);g.depthStencil=ia(za);g.width=U.width;g.height=U.height;X(U);return g}var U=new r;x.framebufferCount++;g(d,h);return k(g,{resize:function(a,c){b(y.next!==
U,"can not resize a framebuffer which is currently in use");var d=Math.max(a|0,1),h=Math.max(c|0||d,1);if(d===U.width&&h===U.height)return g;for(var k=U.colorAttachments,f=0;f<k.length;++f)e(k[f],d,h);e(U.depthAttachment,d,h);e(U.stencilAttachment,d,h);e(U.depthStencilAttachment,d,h);U.width=g.width=d;U.height=g.height=h;X(U);return g},_reglType:"framebuffer",_framebuffer:U,destroy:function(){m(U);T(U)},use:function(a){y.setFBO({framebuffer:g},a)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},
ra=["rgba"],I=["rgba4","rgb565","rgb5 a1"];p.ext_srgb&&I.push("srgba");p.ext_color_buffer_half_float&&I.push("rgba16f","rgb16f");p.webgl_color_buffer_float&&I.push("rgba32f");var C=["uint8"];p.oes_texture_half_float&&C.push("half float","float16");p.oes_texture_float&&C.push("float","float32");var h=0,U={};return k(y,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof r)?a:null},create:E,createCube:function(a){function c(a){var d;b(0>
h.indexOf(y.next),"can not update framebuffer which is currently in use");var g={color:null},f=0,e=null;d="rgba";var l="uint8",m=1;if("number"===typeof a)f=a|0;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(f=a.shape,b(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),b(f[0]===f[1],"cube framebuffer must be square"),f=f[0]):("radius"in a&&(f=a.radius|0),"width"in a?(f=a.width|0,"height"in a&&b(a.height===f,"must be square")):"height"in a&&(f=a.height|0));
if("color"in a||"colors"in a)e=a.color||a.colors,Array.isArray(e)&&b(1===e.length||p.webgl_draw_buffers,"multiple render targets not supported");e||("colorCount"in a&&(m=a.colorCount|0,b(0<m,"invalid color buffer count")),"colorType"in a&&(b.oneOf(a.colorType,C,"invalid color type"),l=a.colorType),"colorFormat"in a&&(d=a.colorFormat,b.oneOf(a.colorFormat,ra,"invalid color format for texture")));"depth"in a&&(g.depth=a.depth);"stencil"in a&&(g.stencil=a.stencil);"depthStencil"in a&&(g.depthStencil=
a.depthStencil)}else f=1;if(e)if(Array.isArray(e))for(a=[],d=0;d<e.length;++d)a[d]=e[d];else a=[e];else for(a=Array(m),e={radius:f,format:d,type:l},d=0;d<m;++d)a[d]=R.createCube(e);g.color=Array(a.length);for(d=0;d<a.length;++d)m=a[d],b("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),f=f||m.width,b(m.width===f&&m.height===f,"invalid cube map shape"),g.color[d]={target:34069,data:a[d]};for(d=0;6>d;++d){for(m=0;m<a.length;++m)g.color[m].target=34069+d;0<d&&(g.depth=h[0].depth,
g.stencil=h[0].stencil,g.depthStencil=h[0].depthStencil);if(h[d])h[d](g);else h[d]=E(g)}return k(c,{width:f,height:f,color:a})}var h=Array(6);c(a);return k(c,{faces:h,resize:function(a){var d=a|0;b(0<d&&d<=v.maxCubeMapSize,"invalid radius for cube fbo");if(d===c.width)return c;var k=c.color;for(a=0;a<k.length;++a)k[a].resize(d);for(a=0;6>a;++a)h[a].resize(d);c.width=c.height=d;return c},_reglType:"framebufferCube",destroy:function(){h.forEach(function(a){a.destroy()})}})},clear:function(){B(U).forEach(m)},
restore:function(){y.cur=null;y.next=null;y.dirty=!0;B(U).forEach(function(a){a.framebuffer=n.createFramebuffer();X(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(P,fa,Ca){var b=P("./util/sorted-object-keys"),B=P("./util/pool");fa.exports=function(k,c){var l=1;c.ext_texture_filter_anisotropic&&(l=k.getParameter(34047));var a=1,f=1;c.webgl_draw_buffers&&(a=k.getParameter(34852),f=k.getParameter(36063));var g=!!c.oes_texture_float;if(g){g=k.createTexture();k.bindTexture(3553,
g);k.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var n=k.createFramebuffer();k.bindFramebuffer(36160,n);k.framebufferTexture2D(36160,36064,3553,g,0);k.bindTexture(3553,null);if(36053!==k.checkFramebufferStatus(36160))g=!1;else{k.viewport(0,0,1,1);k.clearColor(1,0,0,1);k.clear(16384);var p=B.allocType(5126,4);k.readPixels(0,0,1,1,6408,5126,p);k.getError()?g=!1:(k.deleteFramebuffer(n),k.deleteTexture(g),g=1===p[0]);B.freeType(p)}}p=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(p=k.createTexture(),n=B.allocType(5121,36),k.activeTexture(33984),k.bindTexture(34067,p),k.texImage2D(34069,0,6408,3,3,0,6408,5121,n),B.freeType(n),k.bindTexture(34067,null),k.deleteTexture(p),p=!k.getError());return{colorBits:[k.getParameter(3410),k.getParameter(3411),k.getParameter(3412),k.getParameter(3413)],depthBits:k.getParameter(3414),stencilBits:k.getParameter(3415),subpixelBits:k.getParameter(3408),extensions:b(c).filter(function(a){return!!c[a]}),
maxAnisotropic:l,maxDrawbuffers:a,maxColorAttachments:f,pointSizeDims:k.getParameter(33901),lineWidthDims:k.getParameter(33902),maxViewportDims:k.getParameter(3386),maxCombinedTextureUnits:k.getParameter(35661),maxCubeMapSize:k.getParameter(34076),maxRenderbufferSize:k.getParameter(34024),maxTextureUnits:k.getParameter(34930),maxTextureSize:k.getParameter(3379),maxAttributes:k.getParameter(34921),maxVertexUniforms:k.getParameter(36347),maxVertexTextureUnits:k.getParameter(35660),maxVaryingVectors:k.getParameter(36348),
maxFragmentUniforms:k.getParameter(36349),glsl:k.getParameter(35724),renderer:k.getParameter(7937),vendor:k.getParameter(7936),version:k.getParameter(7938),readFloat:g,npotTextureCube:p}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(P,fa,Ca){var b=P("./util/check"),B=P("./util/is-typed-array");fa.exports=function(k,c,l,a,f,g,n){function p(p){var G;null===c.next?(b(f.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
G=5121):(b(null!==c.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),G=c.next.colorAttachments[0].texture._texture.type,b.optional(function(){g.oes_texture_float?(b(5121===G||5126===G,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===G&&b(n.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):b(5121===G,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var x=0,v=0,ha=a.framebufferWidth,w=a.framebufferHeight,Q=null;B(p)?Q=p:p&&(b.type(p,"object","invalid arguments to regl.read()"),x=p.x|0,v=p.y|0,b(0<=x&&x<a.framebufferWidth,"invalid x offset for regl.read"),b(0<=v&&v<a.framebufferHeight,"invalid y offset for regl.read"),ha=(p.width||a.framebufferWidth-x)|0,w=(p.height||a.framebufferHeight-v)|0,Q=p.data||null);Q&&(5121===G?b(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===G&&b(Q instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));b(0<ha&&ha+x<=a.framebufferWidth,"invalid width for read pixels");b(0<w&&w+v<=a.framebufferHeight,"invalid height for read pixels");l();p=ha*w*4;Q||(5121===G?Q=new Uint8Array(p):5126===G&&(Q=Q||new Float32Array(p)));b.isTypedArray(Q,"data buffer for regl.read() must be a typedarray");b(Q.byteLength>=p,"data buffer for regl.read() too small");k.pixelStorei(3333,4);k.readPixels(x,v,ha,w,6408,G,Q);return Q}
function v(a){var k;c.setFBO({framebuffer:a.framebuffer},function(){k=p(a)});return k}return function(a){return a&&"framebuffer"in a?v(a):p(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(P,fa,Ca){var b=P("./util/sorted-object-keys"),B=P("./util/check"),k=P("./util/values"),c=[];c[32854]=2;c[32855]=2;c[36194]=2;c[33189]=2;c[36168]=1;c[34041]=4;c[35907]=4;c[34836]=16;c[34842]=8;c[34843]=6;fa.exports=function(l,a,f,g,n){function p(a){this.id=x++;this.refCount=1;this.renderbuffer=
a;this.format=32854;this.height=this.width=0;n.profile&&(this.stats={size:0})}function v(a){var c=a.renderbuffer;B(c,"must not double destroy renderbuffer");l.bindRenderbuffer(36161,null);l.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete D[a.id];g.renderbufferCount--}var R={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(R.srgba=35907);a.ext_color_buffer_half_float&&(R.rgba16f=34842,R.rgb16f=34843);a.webgl_color_buffer_float&&(R.rgba32f=
34836);var G=[];b(R).forEach(function(a){G[R[a]]=a});var x=0,D={};p.prototype.decRef=function(){0>=--this.refCount&&v(this)};n.profile&&(g.getTotalRenderbufferSize=function(){var a=0;b(D).forEach(function(c){a+=D[c].stats.size});return a});return{create:function(a,k){function b(a,k){var g=0,r=0,p=32854;"object"===typeof a&&a?("shape"in a?(r=a.shape,B(Array.isArray(r)&&2<=r.length,"invalid renderbuffer shape"),g=r[0]|0,r=r[1]|0):("radius"in a&&(g=r=a.radius|0),"width"in a&&(g=a.width|0),"height"in
a&&(r=a.height|0)),"format"in a&&(B.parameter(a.format,R,"invalid renderbuffer format"),p=R[a.format])):"number"===typeof a?(g=a|0,r="number"===typeof k?k|0:g):a?B.raise("invalid arguments to renderbuffer constructor"):g=r=1;B(0<g&&0<r&&g<=f.maxRenderbufferSize&&r<=f.maxRenderbufferSize,"invalid renderbuffer size");if(g!==q.width||r!==q.height||p!==q.format)return b.width=q.width=g,b.height=q.height=r,q.format=p,l.bindRenderbuffer(36161,q.renderbuffer),l.renderbufferStorage(36161,p,g,r),B(0===l.getError(),
"invalid render buffer format"),n.profile&&(q.stats.size=c[q.format]*q.width*q.height),b.format=G[q.format],b}var q=new p(l.createRenderbuffer());D[q.id]=q;g.renderbufferCount++;b(a,k);b.resize=function(a,k){var g=a|0,r=k|0||g;if(g===q.width&&r===q.height)return b;B(0<g&&0<r&&g<=f.maxRenderbufferSize&&r<=f.maxRenderbufferSize,"invalid renderbuffer size");b.width=q.width=g;b.height=q.height=r;l.bindRenderbuffer(36161,q.renderbuffer);l.renderbufferStorage(36161,q.format,g,r);B(0===l.getError(),"invalid render buffer format");
n.profile&&(q.stats.size=c[q.format]*q.width*q.height);return b};b._reglType="renderbuffer";b._renderbuffer=q;n.profile&&(b.stats=q.stats);b.destroy=function(){q.decRef()};return b},clear:function(){k(D).forEach(v)},restore:function(){k(D).forEach(function(a){a.renderbuffer=l.createRenderbuffer();l.bindRenderbuffer(36161,a.renderbuffer);l.renderbufferStorage(36161,a.format,a.width,a.height)});l.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],
16:[function(P,fa,Ca){var b=P("./util/sorted-object-keys"),B=P("./util/check"),k=P("./util/extend"),c=P("./util/values");fa.exports=function(l,a,f,g){function n(a,c,k,g){this.name=a;this.id=c;this.location=k;this.info=g}function p(a,c){for(var k=0;k<a.length;++k)if(a[k].id===c.id){a[k].location=c.location;return}a.push(c)}function v(c,k,g){var f=35632===c?x:D,b=f[k];if(!b){var p=a.str(k),b=l.createShader(c);l.shaderSource(b,p);l.compileShader(b);B.shaderError(l,b,p,c,g);f[k]=b}return b}function R(a,
c){this.id=Q++;this.fragId=a;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;g.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function G(c,k,f){var e;e=v(35632,c.fragId);var b=v(35633,c.vertId),w=c.program=l.createProgram();l.attachShader(w,e);l.attachShader(w,b);if(f)for(e=0;e<f.length;++e)b=f[e],l.bindAttribLocation(w,b[0],b[1]);l.linkProgram(w);B.linkError(l,w,a.str(c.fragId),a.str(c.vertId),k);f=l.getProgramParameter(w,35718);g.profile&&(c.stats.uniformsCount=
f);b=c.uniforms;for(e=0;e<f;++e)if(k=l.getActiveUniform(w,e))if(1<k.size)for(var m=0;m<k.size;++m){var x=k.name.replace("[0]","["+m+"]");p(b,new n(x,a.id(x),l.getUniformLocation(w,x),k))}else p(b,new n(k.name,a.id(k.name),l.getUniformLocation(w,k.name),k));f=l.getProgramParameter(w,35721);g.profile&&(c.stats.attributesCount=f);c=c.attributes;for(e=0;e<f;++e)(k=l.getActiveAttrib(w,e))&&p(c,new n(k.name,a.id(k.name),l.getAttribLocation(w,k.name),k))}var x={},D={},ha={},w=[],Q=0;g.profile&&(f.getMaxUniformsCount=
function(){var a=0;w.forEach(function(c){c.stats.uniformsCount>a&&(a=c.stats.uniformsCount)});return a},f.getMaxAttributesCount=function(){var a=0;w.forEach(function(c){c.stats.attributesCount>a&&(a=c.stats.attributesCount)});return a});return{clear:function(){var a=l.deleteShader.bind(l);c(x).forEach(a);x={};c(D).forEach(a);D={};w.forEach(function(a){l.deleteProgram(a.program)});w.length=0;ha={};f.shaderCount=0},program:function(a,c,g,e){B.command(0<=a,"missing vertex shader",g);B.command(0<=c,"missing fragment shader",
g);var r=ha[c];r||(r=ha[c]={});var p=r[a];if(p&&(p.refCount++,!e))return p;var m=new R(c,a);f.shaderCount++;G(m,g,e);p||(r[a]=m);w.push(m);return k(m,{destroy:function(){m.refCount--;if(0>=m.refCount){l.deleteProgram(m.program);var a=w.indexOf(m);w.splice(a,1);f.shaderCount--}0>=r[m.vertId].refCount&&(l.deleteShader(D[m.vertId]),delete D[m.vertId],delete ha[m.fragId][m.vertId]);b(ha[m.fragId]).length||(l.deleteShader(x[m.fragId]),delete x[m.fragId],delete ha[m.fragId])}})},restore:function(){x={};
D={};for(var a=0;a<w.length;++a)G(w[a],null,w[a].attributes.map(function(a){return[a.location,a.name]}))},shader:v,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(P,fa,Ca){fa.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(P,fa,Ca){fa.exports=function(){var b={"":0},B=[""];return{id:function(k){var c=
b[k];if(c)return c;c=b[k]=B.length;B.push(k);return c},str:function(k){return B[k]}}}},{}],19:[function(P,fa,Ca){function b(a){return"[object "+a+"]"}function B(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function k(a){return Array.isArray(a)&&0!==a.length&&ha(a[0])?!0:!1}function c(a){return Object.prototype.toString.call(a)}function l(a){if(!a)return!1;var g=c(a);return 0<=ra.indexOf(g)?!0:B(a)||k(a)||G(a)}function a(a,c){36193===a.type?(a.data=D(c),x.freeType(c)):a.data=
c}function f(a,c,d,k,g,f){a="undefined"!==typeof C[a]?C[a]:e[a]*I[c];f&&(a*=6);if(g){for(k=0;1<=d;)k+=a*d*d,d/=2;return k}return a*d*k}var g=P("./util/sorted-object-keys"),n=P("./util/check"),p=P("./util/extend"),v=P("./util/values"),R=P("./util/is-typed-array"),G=P("./util/is-ndarray"),x=P("./util/pool"),D=P("./util/to-half-float"),ha=P("./util/is-array-like"),w=P("./util/flatten"),Q=P("./util/is-pow2");Ca=P("./constants/arraytypes.json");var q=P("./constants/arraytypes.json"),N=[9984,9986,9985,
9987],ia=[0,6409,6410,6407,6408],e={};e[6409]=e[6406]=e[6402]=1;e[34041]=e[6410]=2;e[6407]=e[35904]=3;e[6408]=e[35906]=4;var r=b("HTMLCanvasElement"),T=b("OffscreenCanvas"),m=b("CanvasRenderingContext2D"),X=b("ImageBitmap"),E=b("HTMLImageElement"),y=b("HTMLVideoElement"),ra=g(Ca).concat([r,T,m,X,E,y]),I=[];I[5121]=1;I[5126]=4;I[36193]=2;I[5123]=2;I[5125]=4;var C=[];C[32854]=2;C[32855]=2;C[36194]=2;C[34041]=4;C[33776]=.5;C[33777]=.5;C[33778]=1;C[33779]=1;C[35986]=.5;C[35987]=1;C[34798]=1;C[35840]=
.5;C[35841]=.25;C[35842]=.5;C[35843]=.25;C[36196]=.5;fa.exports=function(h,b,d,C,F,I,ra){function V(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ca(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=
c.colorSpace;a.width=c.width;a.height=c.height;a.channels=c.channels}function S(a,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(n.type(c.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(n.type(c.flipY,"boolean","invalid texture flip"),a.flipY=c.flipY);"alignment"in c&&(n.oneOf(c.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=c.alignment);"colorSpace"in c&&(n.parameter(c.colorSpace,Ya,"invalid colorSpace"),
a.colorSpace=Ya[c.colorSpace]);if("type"in c){var h=c.type;n(b.oes_texture_float||!("float"===h||"float32"===h),"you must enable the OES_texture_float extension in order to use floating point textures.");n(b.oes_texture_half_float||!("half float"===h||"float16"===h),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");n(b.webgl_depth_texture||!("uint16"===h||"uint32"===h||"depth stencil"===h),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
n.parameter(h,A,"invalid texture type");a.type=A[h]}var k=a.width,g=a.height,f=a.channels,h=!1;"shape"in c?(n(Array.isArray(c.shape)&&2<=c.shape.length,"shape must be an array"),k=c.shape[0],g=c.shape[1],3===c.shape.length&&(f=c.shape[2],n(0<f&&4>=f,"invalid number of channels"),h=!0),n(0<=k&&k<=d.maxTextureSize,"invalid width"),n(0<=g&&g<=d.maxTextureSize,"invalid height")):("radius"in c&&(k=g=c.radius,n(0<=k&&k<=d.maxTextureSize,"invalid radius")),"width"in c&&(k=c.width,n(0<=k&&k<=d.maxTextureSize,
"invalid width")),"height"in c&&(g=c.height,n(0<=g&&g<=d.maxTextureSize,"invalid height")),"channels"in c&&(f=c.channels,n(0<f&&4>=f,"invalid number of channels"),h=!0));a.width=k|0;a.height=g|0;a.channels=f|0;k=!1;"format"in c&&(k=c.format,n(b.webgl_depth_texture||!("depth"===k||"depth stencil"===k),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),n.parameter(k,t,"invalid texture format"),g=a.internalformat=t[k],a.format=Ha[g],k in A&&!("type"in c)&&(a.type=
A[k]),k in aa&&(a.compressed=!0),k=!0);!h&&k?a.channels=e[a.format]:h&&!k?a.channels!==ia[a.format]&&(a.format=a.internalformat=ia[a.channels]):k&&h&&n(a.channels===e[a.format],"number of channels inconsistent with specified format")}}function O(a){h.pixelStorei(37440,a.flipY);h.pixelStorei(37441,a.premultiplyAlpha);h.pixelStorei(37443,a.colorSpace);h.pixelStorei(3317,a.unpackAlignment)}function J(){V.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function u(h,g){var f=null;l(g)?f=g:g&&(n.type(g,"object","invalid pixel data type"),S(h,g),"x"in g&&(h.xOffset=g.x|0),"y"in g&&(h.yOffset=g.y|0),l(g.data)&&(f=g.data));n(!h.compressed||f instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(g.copy){n(!f,"can not specify copy and data field for the same texture");var z=F.viewportWidth,e=F.viewportHeight;h.width=h.width||z-h.xOffset;h.height=h.height||e-h.yOffset;h.needsCopy=!0;n(0<=h.xOffset&&h.xOffset<z&&0<=h.yOffset&&
h.yOffset<e&&0<h.width&&h.width<=z&&0<h.height&&h.height<=e,"copy texture read out of bounds")}else if(!f)h.width=h.width||1,h.height=h.height||1,h.channels=h.channels||4;else if(R(f))h.channels=h.channels||4,h.data=f,"type"in g||5121!==h.type||(h.type=q[Object.prototype.toString.call(f)]|0);else if(B(f)){h.channels=h.channels||4;z=f;e=z.length;switch(h.type){case 5121:case 5123:case 5125:case 5126:e=x.allocType(h.type,e);e.set(z);h.data=e;break;case 36193:h.data=D(z);break;default:n.raise("unsupported texture type, must specify a typed array")}h.alignment=
1;h.needsFree=!0}else if(G(f)){z=f.data;Array.isArray(z)||5121!==h.type||(h.type=q[Object.prototype.toString.call(z)]|0);var e=f.shape,A=f.stride,u,t,b,L;3===e.length?(b=e[2],L=A[2]):(n(2===e.length,"invalid ndarray pixel data, must be 2 or 3D"),L=b=1);u=e[0];t=e[1];e=A[0];A=A[1];h.alignment=1;h.width=u;h.height=t;h.channels=b;h.format=h.internalformat=ia[b];h.needsFree=!0;u=L;f=f.offset;b=h.width;L=h.height;t=h.channels;for(var aa=x.allocType(36193===h.type?5126:h.type,b*L*t),na=0,U=0;U<L;++U)for(var wa=
0;wa<b;++wa)for(var Ra=0;Ra<t;++Ra)aa[na++]=z[e*wa+A*U+u*Ra+f];a(h,aa)}else if(c(f)===r||c(f)===T||c(f)===m)c(f)===r||c(f)===T?h.element=f:h.element=f.canvas,h.width=h.element.width,h.height=h.element.height,h.channels=4;else if(c(f)===X)h.element=f,h.width=f.width,h.height=f.height,h.channels=4;else if(c(f)===E)h.element=f,h.width=f.naturalWidth,h.height=f.naturalHeight,h.channels=4;else if(c(f)===y)h.element=f,h.width=f.videoWidth,h.height=f.videoHeight,h.channels=4;else if(k(f)){z=h.width||f[0].length;
e=h.height||f.length;A=h.channels;A=ha(f[0][0])?A||f[0][0].length:A||1;u=w.shape(f);b=1;for(L=0;L<u.length;++L)b*=u[L];b=x.allocType(36193===h.type?5126:h.type,b);w.flatten(f,u,"",b);a(h,b);h.alignment=1;h.width=z;h.height=e;h.channels=A;h.format=h.internalformat=ia[A];h.needsFree=!0}5126===h.type?n(0<=d.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===h.type&&n(0<=d.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function K(a,c,d,k,g){var f=a.element,z=a.data,e=a.internalformat,A=a.format,u=a.type,t=a.width,l=a.height;O(a);f?h.texSubImage2D(c,g,d,k,A,u,f):a.compressed?h.compressedTexSubImage2D(c,g,d,k,e,t,l,z):a.needsCopy?(C(),h.copyTexSubImage2D(c,g,d,k,a.xOffset,a.yOffset,t,l)):h.texSubImage2D(c,g,d,k,t,l,A,u,z)}function M(){return sa.pop()||new J}function qa(a){a.needsFree&&x.freeType(a.data);J.call(a);sa.push(a)}function oa(){V.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function z(a,c,d){var h=a.images[0]=M();a.mipmask=1;h.width=a.width=c;h.height=a.height=d;h.channels=a.channels=4}function H(a,c){var d=null;if(l(c))d=a.images[0]=M(),ca(d,a),u(d,c),a.mipmask=1;else if(S(a,c),Array.isArray(c.mipmap))for(var h=c.mipmap,k=0;k<h.length;++k)d=a.images[k]=M(),ca(d,a),d.width>>=k,d.height>>=k,u(d,h[k]),a.mipmask|=1<<k;else d=a.images[0]=M(),ca(d,a),u(d,c),a.mipmask=1;ca(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||n(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function da(a,c){for(var d=a.images,k=0;k<d.length&&d[k];++k){var g=d[k],f=c,z=k,e=g.element,A=g.data,u=g.internalformat,t=g.format,l=g.type,m=g.width,b=g.height;O(g);e?h.texImage2D(f,z,t,t,l,e):g.compressed?h.compressedTexImage2D(f,z,u,m,b,0,A):g.needsCopy?(C(),h.copyTexImage2D(f,z,t,g.xOffset,g.yOffset,m,b,0)):h.texImage2D(f,
z,t,m,b,0,t,l,A||null)}}function W(){var a=ya.pop()||new oa;V.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function la(a){for(var c=a.images,d=0;d<c.length;++d)c[d]&&qa(c[d]),c[d]=null;ya.push(a)}function ta(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Da(a,c){if("min"in c){var h=c.min;n.parameter(h,Tb);a.minFilter=Tb[h];0<=N.indexOf(a.minFilter)&&!("faces"in c)&&(a.genMipmaps=!0)}"mag"in c&&
(h=c.mag,n.parameter(h,na),a.magFilter=na[h]);var h=a.wrapS,k=a.wrapT;if("wrap"in c){var g=c.wrap;"string"===typeof g?(n.parameter(g,Ra),h=k=Ra[g]):Array.isArray(g)&&(n.parameter(g[0],Ra),n.parameter(g[1],Ra),h=Ra[g[0]],k=Ra[g[1]])}else"wrapS"in c&&(h=c.wrapS,n.parameter(h,Ra),h=Ra[h]),"wrapT"in c&&(k=c.wrapT,n.parameter(k,Ra),k=Ra[k]);a.wrapS=h;a.wrapT=k;"anisotropic"in c&&(h=c.anisotropic,n("number"===typeof h&&1<=h&&h<=d.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=c.anisotropic);
if("mipmap"in c){h=!1;switch(typeof c.mipmap){case "string":n.parameter(c.mipmap,Aa,"invalid mipmap hint");a.mipmapHint=Aa[c.mipmap];h=a.genMipmaps=!0;break;case "boolean":h=a.genMipmaps=c.mipmap;break;case "object":n(Array.isArray(c.mipmap),"invalid mipmap type");a.genMipmaps=!1;h=!0;break;default:n.raise("invalid mipmap type")}!h||"min"in c||(a.minFilter=9984)}}function za(a,c){h.texParameteri(c,10241,a.minFilter);h.texParameteri(c,10240,a.magFilter);h.texParameteri(c,10242,a.wrapS);h.texParameteri(c,
10243,a.wrapT);b.ext_texture_filter_anisotropic&&h.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(h.hint(33170,a.mipmapHint),h.generateMipmap(c))}function ea(a){V.call(this);this.mipmask=0;this.internalformat=6408;this.id=Fa++;this.refCount=1;this.target=a;this.texture=h.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ta;ra.profile&&(this.stats={size:0})}function Ea(a){h.activeTexture(33984);h.bindTexture(a.target,a.texture)}function ja(){var a=ua[0];a?h.bindTexture(a.target,a.texture):
h.bindTexture(3553,null)}function pa(a){var c=a.texture;n(c,"must not double destroy texture");var d=a.unit,k=a.target;0<=d&&(h.activeTexture(33984+d),h.bindTexture(k,null),ua[d]=null);h.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete ga[a.id];I.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ra={repeat:10497,clamp:33071,mirror:33648},na={nearest:9728,linear:9729},Tb=p({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},na),Ya={none:0,browser:37444},A={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},t={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},aa={};b.ext_srgb&&(t.srgb=35904,t.srgba=35906);b.oes_texture_float&&(A.float32=A["float"]=5126);b.oes_texture_half_float&&(A.float16=A["half float"]=36193);b.webgl_depth_texture&&(p(t,{depth:6402,"depth stencil":34041}),p(A,{uint16:5123,uint32:5125,
"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&p(aa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});b.webgl_compressed_texture_atc&&p(aa,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&p(aa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(aa["rgb etc1"]=36196);var va=Array.prototype.slice.call(h.getParameter(34467));
g(aa).forEach(function(a){var c=aa[a];0<=va.indexOf(c)&&(t[a]=c)});var xa=g(t);d.textureFormats=xa;var zc=[];g(t).forEach(function(a){zc[t[a]]=a});var Hb=[];g(A).forEach(function(a){Hb[A[a]]=a});var Y=[];g(na).forEach(function(a){Y[na[a]]=a});var L=[];g(Tb).forEach(function(a){L[Tb[a]]=a});var wa=[];g(Ra).forEach(function(a){wa[Ra[a]]=a});var Ha=xa.reduce(function(a,c){var d=t[c];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||b.ext_srgb&&(35904===d||35906===d)?a[d]=d:32855===d||0<=c.indexOf("rgba")?
a[d]=6408:a[d]=6407;return a},{}),sa=[],ya=[],Fa=0,ga={},Z=d.maxTextureUnits,ua=Array(Z).map(function(){return null});p(ea.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<Z;++c){var d=ua[c];if(d){if(0<d.bindCount)continue;d.unit=-1}ua[c]=this;a=c;break}a>=Z&&n.raise("insufficient number of texture units");ra.profile&&I.maxTextureUnits<a+1&&(I.maxTextureUnits=a+1);this.unit=a;h.activeTexture(33984+a);h.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&pa(this)}});ra.profile&&(I.getTotalTextureSize=function(){var a=0;g(ga).forEach(function(c){a+=ga[c].stats.size});return a});return{create2D:function(a,c){function k(a,c){var h=g.texInfo;ta.call(h);var e=W();"number"===typeof a?"number"===typeof c?z(e,a|0,c|0):z(e,a|0,a|0):a?(n.type(a,"object","invalid arguments to regl.texture"),Da(h,a),H(e,a)):z(e,1,1);h.genMipmaps&&(e.mipmask=(e.width<<1)-1);g.mipmask=e.mipmask;ca(g,e);n.texture2D(h,e,d);g.internalformat=e.internalformat;
k.width=e.width;k.height=e.height;Ea(g);da(e,3553);za(h,3553);ja();la(e);ra.profile&&(g.stats.size=f(g.internalformat,g.type,e.width,e.height,h.genMipmaps,!1));k.format=zc[g.internalformat];k.type=Hb[g.type];k.mag=Y[h.magFilter];k.min=L[h.minFilter];k.wrapS=wa[h.wrapS];k.wrapT=wa[h.wrapT];return k}var g=new ea(3553);ga[g.id]=g;I.textureCount++;k(a,c);k.subimage=function(a,c,d,h){n(!!a,"must specify image data");c|=0;d|=0;h|=0;var f=M();ca(f,g);f.width=0;f.height=0;u(f,a);f.width=f.width||(g.width>>
h)-c;f.height=f.height||(g.height>>h)-d;n(g.type===f.type&&g.format===f.format&&g.internalformat===f.internalformat,"incompatible format for texture.subimage");n(0<=c&&0<=d&&c+f.width<=g.width&&d+f.height<=g.height,"texture.subimage write out of bounds");n(g.mipmask&1<<h,"missing mipmap data");n(f.data||f.element||f.needsCopy,"missing image data");Ea(g);K(f,3553,c,d,h);ja();qa(f);return k};k.resize=function(a,c){var d=a|0,z=c|0||d;if(d===g.width&&z===g.height)return k;k.width=g.width=d;k.height=g.height=
z;Ea(g);for(var e=0;g.mipmask>>e;++e){var A=d>>e,u=z>>e;if(!A||!u)break;h.texImage2D(3553,e,g.format,A,u,0,g.format,g.type,null)}ja();ra.profile&&(g.stats.size=f(g.internalformat,g.type,d,z,!1,!1));return k};k._reglType="texture2d";k._texture=g;ra.profile&&(k.stats=g.stats);k.destroy=function(){g.decRef()};return k},createCube:function(a,c,k,g,e,A){function t(a,c,h,k,g,e){var A,u=l.texInfo;ta.call(u);for(A=0;6>A;++A)m[A]=W();if("number"!==typeof a&&a)if("object"===typeof a)if(c)H(m[0],a),H(m[1],c),
H(m[2],h),H(m[3],k),H(m[4],g),H(m[5],e);else if(Da(u,a),S(l,a),"faces"in a)for(a=a.faces,n(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),A=0;6>A;++A)n("object"===typeof a[A]&&!!a[A],"invalid input for cube map face"),ca(m[A],l),H(m[A],a[A]);else for(A=0;6>A;++A)H(m[A],a);else n.raise("invalid arguments to cube map");else for(a=a|0||1,A=0;6>A;++A)z(m[A],a,a);ca(l,m[0]);n.optional(function(){d.npotTextureCube||n(Q(l.width)&&Q(l.height),"your browser does not support non power or two texture dimensions")});
l.mipmask=u.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;n.textureCube(l,u,m,d);l.internalformat=m[0].internalformat;t.width=m[0].width;t.height=m[0].height;Ea(l);for(A=0;6>A;++A)da(m[A],34069+A);za(u,34067);ja();ra.profile&&(l.stats.size=f(l.internalformat,l.type,t.width,t.height,u.genMipmaps,!0));t.format=zc[l.internalformat];t.type=Hb[l.type];t.mag=Y[u.magFilter];t.min=L[u.minFilter];t.wrapS=wa[u.wrapS];t.wrapT=wa[u.wrapT];for(A=0;6>A;++A)la(m[A]);return t}var l=new ea(34067);ga[l.id]=l;I.cubeCount++;
var m=Array(6);t(a,c,k,g,e,A);t.subimage=function(a,c,d,h,k){n(!!c,"must specify image data");n("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");d|=0;h|=0;k|=0;var g=M();ca(g,l);g.width=0;g.height=0;u(g,c);g.width=g.width||(l.width>>k)-d;g.height=g.height||(l.height>>k)-h;n(l.type===g.type&&l.format===g.format&&l.internalformat===g.internalformat,"incompatible format for texture.subimage");n(0<=d&&0<=h&&d+g.width<=l.width&&h+g.height<=l.height,"texture.subimage write out of bounds");n(l.mipmask&
1<<k,"missing mipmap data");n(g.data||g.element||g.needsCopy,"missing image data");Ea(l);K(g,34069+a,d,h,k);ja();qa(g);return t};t.resize=function(a){a|=0;if(a!==l.width){t.width=l.width=a;t.height=l.height=a;Ea(l);for(var c=0;6>c;++c)for(var d=0;l.mipmask>>d;++d)h.texImage2D(34069+c,d,l.format,a>>d,a>>d,0,l.format,l.type,null);ja();ra.profile&&(l.stats.size=f(l.internalformat,l.type,t.width,t.height,!1,!0));return t}};t._reglType="textureCube";t._texture=l;ra.profile&&(t.stats=l.stats);t.destroy=
function(){l.decRef()};return t},clear:function(){for(var a=0;a<Z;++a)h.activeTexture(33984+a),h.bindTexture(3553,null),ua[a]=null;v(ga).forEach(pa);I.cubeCount=0;I.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<Z;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null)}v(ga).forEach(function(a){a.texture=h.createTexture();h.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)h.texImage2D(3553,c,a.internalformat,a.width>>
c,a.height>>c,0,a.internalformat,a.type,null);else for(var d=0;6>d;++d)h.texImage2D(34069+d,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);za(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<Z;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null);h.activeTexture(33984+a);h.bindTexture(3553,null);h.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(P,fa,Ca){fa.exports=function(b,B){function k(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function c(a,c,l){var b=f.pop()||new k;b.startQueryIndex=a;b.endQueryIndex=c;b.sum=0;b.stats=l;g.push(b)}if(!B.ext_disjoint_timer_query)return null;var l=[],a=[],f=[],g=[],n=[],p=[];return{beginQuery:function(g){var k=l.pop()||B.ext_disjoint_timer_query.createQueryEXT();
B.ext_disjoint_timer_query.beginQueryEXT(35007,k);a.push(k);c(a.length-1,a.length,g)},endQuery:function(){B.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var c,k;c=a.length;if(0!==c){p.length=Math.max(p.length,c+1);n.length=Math.max(n.length,c+1);n[0]=0;var b=p[0]=0;for(k=c=0;k<a.length;++k){var x=a[k];B.ext_disjoint_timer_query.getQueryObjectEXT(x,34919)?(b+=B.ext_disjoint_timer_query.getQueryObjectEXT(x,34918),l.push(x)):a[c++]=x;n[k+1]=b;p[k+1]=c}a.length=c;for(k=
c=0;k<g.length;++k){var b=g[k],D=b.startQueryIndex,x=b.endQueryIndex;b.sum+=n[x]-n[D];D=p[D];x=p[x];x===D?(b.stats.gpuTime+=b.sum/1E6,f.push(b)):(b.startQueryIndex=D,b.endQueryIndex=x,g[c++]=b)}g.length=c}},getNumPendingQueries:function(){return a.length},clear:function(){l.push.apply(l,a);for(var c=0;c<l.length;c++)B.ext_disjoint_timer_query.deleteQueryEXT(l[c]);a.length=0;l.length=0},restore:function(){a.length=0;l.length=0}}}},{}],21:[function(P,fa,Ca){function b(a){return"undefined"!==typeof atob?
atob(a):"base64:"+a}function B(a){a=Error("(regl) "+a);console.error(a);throw a;}function k(a,c){a||B(c)}function c(a){return a?": "+a:""}function l(a,c){switch(c){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function a(a,k,g){0>k.indexOf(a)&&B("invalid value"+
c(g)+". must be one of: "+k)}function f(a,c){for(a+="";a.length<c;)a=" "+a;return a}function g(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function n(a,c){this.number=a;this.line=c;this.errors=[]}function p(a,c,k){this.file=a;this.line=c;this.message=k}function v(){var a=Error(),a=(a.stack||a).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return c?c[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function R(){var a=Error(),a=(a.stack||a).toString(),
c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return c?c[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function G(a,c){var k=a.split("\n"),f=1,e=0,l={unknown:new g,0:new g};l.unknown.name=l[0].name=c||v();l.unknown.lines.push(new n(0,""));for(var r=0;r<k.length;++r){var B=k[r],h=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(B);if(h)switch(h[1]){case "line":if(h=/(\d+)(\s+\d+)?/.exec(h[2]))f=h[1]|0,h[2]&&(e=h[2]|0,e in l||(l[e]=new g));break;case "define":if(h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(h[2]))l[e].name=
h[1]?b(h[2]):h[2]}l[e].lines.push(new n(f++,B))}N(l).forEach(function(a){var c=l[a];c.lines.forEach(function(a){c.index[a.number]=a})});return l}function x(a){var c=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var k=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);k?c.push(new p(k[1]|0,k[2]|0,k[3].trim())):0<a.length&&c.push(new p("unknown",0,a))}});return c}function D(a,c){c.forEach(function(c){var k=a[c.file];if(k){var g=k.index[c.line];if(g){g.errors.push(c);k.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(c)})}function ha(a){a._commandRef=v()}function w(a,c){var k=R();B(a+" in command "+(c||v())+("unknown"===k?"":" called from "+k))}function Q(a,k,g,f){l(a,k)||w("invalid parameter type"+c(g)+". expected "+k+", got "+typeof a,f||v())}function q(a,c){return 32820===a||32819===a||33635===a?2:34042===a?4:r[a]*c}var N=P("./sorted-object-keys"),ia=P("./is-typed-array");P=P("./extend");var e="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
r={};r[5120]=r[5121]=1;r[5122]=r[5123]=r[36193]=r[33635]=r[32819]=r[32820]=2;r[5124]=r[5125]=r[5126]=r[34042]=4;fa.exports=P(k,{optional:function(a){a()},raise:B,commandRaise:w,command:function(a,c,k){a||w(c,k||v())},parameter:function(a,k,g){a in k||B("unknown parameter ("+a+")"+c(g)+". possible values: "+N(k).join())},commandParameter:function(a,k,g,f){a in k||w("unknown parameter ("+a+")"+c(g)+". possible values: "+N(k).join(),f||v())},constructor:function(a){N(a).forEach(function(a){0>e.indexOf(a)&&
B('invalid regl constructor argument "'+a+'". must be one of '+e)})},type:function(a,k,g){l(a,k)||B("invalid parameter type"+c(g)+". expected "+k+", got "+typeof a)},commandType:Q,isTypedArray:function(a,k){ia(a)||B("invalid parameter type"+c(k)+". must be a typed array")},nni:function(a,k){0<=a&&(a|0)===a||B("invalid parameter type, ("+a+")"+c(k)+". must be a nonnegative integer")},oneOf:a,shaderError:function(a,c,g,e,l){if(!a.getShaderParameter(c,a.COMPILE_STATUS)){c=a.getShaderInfoLog(c);a=e===
a.FRAGMENT_SHADER?"fragment":"vertex";Q(g,"string",a+" shader source must be a string",l);var b=G(g,l);g=x(c);D(b,g);N(b).forEach(function(a){function c(a,h){k.push(a);d.push(h||"")}var h=b[a];if(h.hasErrors){var k=[""],d=[""];c("file number "+a+": "+h.name+"\n","color:red;text-decoration:underline;font-weight:bold");h.lines.forEach(function(a){if(0<a.errors.length){c(f(a.number,4)+"|  ","background-color:yellow; font-weight:bold");c(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var d=0;a.errors.forEach(function(h){h=h.message;var k=/^\s*'(.*)'\s*:\s*(.*)$/.exec(h);if(k){var g=k[1];h=k[2];switch(g){case "assign":g="="}d=Math.max(a.line.indexOf(g,d),0)}else d=0;c(f("| ",6));c(f("^^^",d+3)+"\n","font-weight:bold");c(f("| ",6));c(h+"\n","font-weight:bold")});c(f("| ",6)+"\n")}else c(f(a.number,4)+"|  "),c(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(k.join("")):(d[0]=k.join("%c"),console.log.apply(console,d))}});k.raise("Error compiling "+
a+" shader, "+b[0].name)}},linkError:function(a,c,g,f,e){a.getProgramParameter(c,a.LINK_STATUS)||(a=a.getProgramInfoLog(c),g=G(g,e),f='Error linking program with vertex shader, "'+G(f,e)[0].name+'", and fragment shader "'+g[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+a),k.raise(f))},callSite:R,saveCommandRef:ha,saveDrawInfo:function(a,c,k,g){function f(a){return a?g.id(a):0}function e(a,
c){N(c).forEach(function(c){a[g.id(c)]=!0})}ha(a);a._fragId=f(a["static"].frag);a._vertId=f(a["static"].vert);var l=a._uniformSet={};e(l,c["static"]);e(l,c.dynamic);c=a._attributeSet={};e(c,k["static"]);e(c,k.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(c,k,g){c.texture?a(c.texture._texture.internalformat,k,"unsupported texture format for attachment"):a(c.renderbuffer._renderbuffer.format,g,"unsupported renderbuffer format for attachment")},
guessCommand:v,texture2D:function(a,c,g){var f=c.width,e=c.height,l=c.channels;k(0<f&&f<=g.maxTextureSize&&0<e&&e<=g.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||k(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"incompatible wrap mode for texture, both width and height must be power of 2");1===c.mipmask?1!==f&&1!==e&&k(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(k(!(f&f-1)&&!!f&&!(e&e-1)&&!!e,"texture must be a square power of 2 to support mipmapping"),
k(c.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===c.type&&(0>g.extensions.indexOf("oes_texture_float_linear")&&k(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),k(!a.genMipmaps,"mipmap generation not supported with float textures"));var b=c.images;for(g=0;16>g;++g)if(b[g]){var r=f>>g,h=e>>g;k(c.mipmask&1<<g,"missing mipmap data");var B=b[g];k(B.width===r&&B.height===h,"invalid shape for mip images");k(B.format===c.format&&B.internalformat===
c.internalformat&&B.type===c.type,"incompatible type for mip image");!B.compressed&&B.data&&(r=Math.ceil(q(B.type,l)*r/B.unpackAlignment)*B.unpackAlignment,k(B.data.byteLength===r*h,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||k(0===(c.mipmask&1<<g),"extra mipmap data");c.compressed&&k(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,c,g,f){var e=a.width,l=a.height,b=a.channels;k(0<e&&e<=f.maxTextureSize&&
0<l&&l<=f.maxTextureSize,"invalid texture shape");k(e===l,"cube map must be square");k(33071===c.wrapS&&33071===c.wrapT,"wrap mode not supported by cube map");for(f=0;f<g.length;++f){var r=g[f];k(r.width===e&&r.height===l,"inconsistent cube map face shape");c.genMipmaps&&(k(!r.compressed,"can not generate mipmap for compressed textures"),k(1===r.mipmask,"can not specify mipmaps and generate mipmaps"));for(var h=r.images,B=0;16>B;++B){var d=h[B];if(d){var p=e>>B,w=l>>B;k(r.mipmask&1<<B,"missing mipmap data");
k(d.width===p&&d.height===w,"invalid shape for mip images");k(d.format===a.format&&d.internalformat===a.internalformat&&d.type===a.type,"incompatible type for mip image");d.compressed||d.data&&k(d.data.byteLength===p*w*Math.max(q(d.type,b),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(P,fa,Ca){fa.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(P,fa,Ca){function b(c){return Array.prototype.slice.call(c)}function B(c){return b(c).join("")}var k=P("./extend"),c=P("./compiled-fns");fa.exports=function(){function l(){var a=[],c=[];return k(function(){a.push.apply(a,b(arguments))},{def:function(){var k="v"+g;g++;c.push(k);0<arguments.length&&(a.push(k,"="),a.push.apply(a,b(arguments)),a.push(";"));return k},toString:function(){return B([0<c.length?"var "+c.join(",")+";":"",B(a)])}})}function a(){function a(k,
f){g(k,f,"=",c.def(k,f),";")}var c=l(),g=l(),f=c.toString,B=g.toString;return k(function(){c.apply(c,b(arguments))},{def:c.def,entry:c,exit:g,save:a,set:function(k,g,f){a(k,g);c(k,g,"=",f,";")},toString:function(){return f()+B()}})}var f=0,g=0,n={},p=l(),v={};return{global:p,link:function(a){var c="$"+f,k=!1;"object"===typeof a&&a.name&&(c=a.name.replace(/ /g,"_"),k=!0);if(c in n)return c;n[c]=a;k||f++;return c},block:l,proc:function(c,g){function f(){var a="a"+l.length;l.push(a);return a}var l=[];
g=g||0;for(var b=0;b<g;++b)f();var b=a(),p=b.toString;return v[c]=k(b,{arg:f,toString:function(){return B(["function(",l.join(),"){",p(),"}"])}})},scope:a,cond:function(){var c=B(arguments),g=a(),f=a(),l=g.toString,p=f.toString;return k(g,{then:function(){g.apply(g,b(arguments));return this},"else":function(){f.apply(f,b(arguments));return this},toString:function(){var a=p();a&&(a="else{"+a+"}");return B(["if(",c,"){",l(),"}",a])}})},compile:function(){var a=[],k=[];Object.keys(n).sort(function(a,
c){var k="$"===a.charAt(0),g="$"===c.charAt(0);return k||g?k&&g?+a.slice(1)<+c.slice(1)?-1:1:k&&!g?-1:1:a.localeCompare(c)}).forEach(function(c){var g=n[c];a.push(c);k.push(g)});for(var g=0,f=a.length-1;-1<f;f--)if("$"===a[f].charAt(0)){g=f;break}var l=['"use strict";',p,"return {"];Object.keys(v).forEach(function(a){l.push('"',a,'":',v[a].toString(),",")});l.push("}");var f=B(l).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),g=a.slice(g).join(),b=c[g];if(!b)throw console.log("src code is:"),
console.log(f),console.log("compiled values:",k),console.log("linked names:",a),console.log("Keys available:",Object.keys(c)),console.log("Key:",g),console.log('"'+g+'": function('+a.join(", ")+") \n{\n"+f+"\n},"),Error("missing precompiled function with key: "+g);return b.apply(null,k)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(P,fa,Ca){fa.exports={$0:function(b){var B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C;B=b.attributes;k=b.current;c=b.framebuffer;l=b.gl;a=b.next;
f=b.vao;g=a.blend_color;n=k.blend_color;p=a.blend_equation;v=k.blend_equation;R=a.blend_func;G=k.blend_func;x=a.colorMask;D=k.colorMask;ha=a.depth_range;w=k.depth_range;Q=a.polygonOffset_offset;q=k.polygonOffset_offset;N=a.sample_coverage;ia=k.sample_coverage;e=a.scissor_box;r=k.scissor_box;T=a.stencil_func;m=k.stencil_func;X=a.stencil_opBack;E=k.stencil_opBack;y=a.stencil_opFront;ra=k.stencil_opFront;I=a.viewport;C=k.viewport;return{poll:function(){var h,f,d,b,B,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,
da,W,la;k.dirty=!1;f=a.blend_enable;d=a.cull_enable;b=a.depth_enable;B=a.dither;ma=a.polygonOffset_enable;Ba=a.sample_alpha;V=a.sample_enable;ca=a.scissor_enable;S=a.stencil_enable;O=a.cull_face;J=k.cull_face;u=a.depth_func;K=k.depth_func;M=a.depth_mask;qa=k.depth_mask;oa=a.frontFace;z=k.frontFace;H=a.lineWidth;da=k.lineWidth;W=a.stencil_mask;la=k.stencil_mask;h=c.next;h!==c.cur&&(h?l.bindFramebuffer(36160,h.framebuffer):l.bindFramebuffer(36160,null),c.cur=h);f!==k.blend_enable&&(f?l.enable(3042):
l.disable(3042),k.blend_enable=f);d!==k.cull_enable&&(d?l.enable(2884):l.disable(2884),k.cull_enable=d);b!==k.depth_enable&&(b?l.enable(2929):l.disable(2929),k.depth_enable=b);B!==k.dither&&(B?l.enable(3024):l.disable(3024),k.dither=B);ma!==k.polygonOffset_enable&&(ma?l.enable(32823):l.disable(32823),k.polygonOffset_enable=ma);Ba!==k.sample_alpha&&(Ba?l.enable(32926):l.disable(32926),k.sample_alpha=Ba);V!==k.sample_enable&&(V?l.enable(32928):l.disable(32928),k.sample_enable=V);ca!==k.scissor_enable&&
(ca?l.enable(3089):l.disable(3089),k.scissor_enable=ca);S!==k.stencil_enable&&(S?l.enable(2960):l.disable(2960),k.stencil_enable=S);if(g[0]!==n[0]||g[1]!==n[1]||g[2]!==n[2]||g[3]!==n[3])l.blendColor(g[0],g[1],g[2],g[3]),n[0]=g[0],n[1]=g[1],n[2]=g[2],n[3]=g[3];if(p[0]!==v[0]||p[1]!==v[1])l.blendEquationSeparate(p[0],p[1]),v[0]=p[0],v[1]=p[1];if(R[0]!==G[0]||R[1]!==G[1]||R[2]!==G[2]||R[3]!==G[3])l.blendFuncSeparate(R[0],R[1],R[2],R[3]),G[0]=R[0],G[1]=R[1],G[2]=R[2],G[3]=R[3];if(x[0]!==D[0]||x[1]!==
D[1]||x[2]!==D[2]||x[3]!==D[3])l.colorMask(x[0],x[1],x[2],x[3]),D[0]=x[0],D[1]=x[1],D[2]=x[2],D[3]=x[3];O!==J&&(l.cullFace(O),k.cull_face=O);u!==K&&(l.depthFunc(u),k.depth_func=u);M!==qa&&(l.depthMask(M),k.depth_mask=M);if(ha[0]!==w[0]||ha[1]!==w[1])l.depthRange(ha[0],ha[1]),w[0]=ha[0],w[1]=ha[1];oa!==z&&(l.frontFace(oa),k.frontFace=oa);H!==da&&(l.lineWidth(H),k.lineWidth=H);if(Q[0]!==q[0]||Q[1]!==q[1])l.polygonOffset(Q[0],Q[1]),q[0]=Q[0],q[1]=Q[1];if(N[0]!==ia[0]||N[1]!==ia[1])l.sampleCoverage(N[0],
N[1]),ia[0]=N[0],ia[1]=N[1];if(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||e[3]!==r[3])l.scissor(e[0],e[1],e[2],e[3]),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3];if(T[0]!==m[0]||T[1]!==m[1]||T[2]!==m[2])l.stencilFunc(T[0],T[1],T[2]),m[0]=T[0],m[1]=T[1],m[2]=T[2];W!==la&&(l.stencilMask(W),k.stencil_mask=W);if(X[0]!==E[0]||X[1]!==E[1]||X[2]!==E[2]||X[3]!==E[3])l.stencilOpSeparate(X[0],X[1],X[2],X[3]),E[0]=X[0],E[1]=X[1],E[2]=X[2],E[3]=X[3];if(y[0]!==ra[0]||y[1]!==ra[1]||y[2]!==ra[2]||y[3]!==ra[3])l.stencilOpSeparate(y[0],
y[1],y[2],y[3]),ra[0]=y[0],ra[1]=y[1],ra[2]=y[2],ra[3]=y[3];if(I[0]!==C[0]||I[1]!==C[1]||I[2]!==C[2]||I[3]!==C[3])l.viewport(I[0],I[1],I[2],I[3]),C[0]=I[0],C[1]=I[1],C[2]=I[2],C[3]=I[3]},refresh:function(){var h,b,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa;k.dirty=!1;b=a.blend_enable;d=a.cull_enable;ka=a.depth_enable;F=a.dither;ma=a.polygonOffset_enable;Ba=a.sample_alpha;V=a.sample_enable;ca=a.scissor_enable;S=a.stencil_enable;O=a.cull_face;J=a.depth_func;u=a.depth_mask;K=a.frontFace;M=a.lineWidth;qa=a.stencil_mask;
(h=c.next)?l.bindFramebuffer(36160,h.framebuffer):l.bindFramebuffer(36160,null);c.cur=h;h=B[0];h.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(0,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,h.x,h.y,h.z,h.w),h.buffer=null);h=B[1];h.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(1,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(1),
l.vertexAttrib4f(1,h.x,h.y,h.z,h.w),h.buffer=null);h=B[2];h.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(2,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(2),l.vertexAttrib4f(2,h.x,h.y,h.z,h.w),h.buffer=null);h=B[3];h.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(3,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,h.x,h.y,h.z,
h.w),h.buffer=null);h=B[4];h.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(4,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,h.x,h.y,h.z,h.w),h.buffer=null);h=B[5];h.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(5,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,h.x,h.y,h.z,h.w),h.buffer=null);h=B[6];h.buffer?
(l.enableVertexAttribArray(6),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(6,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,h.x,h.y,h.z,h.w),h.buffer=null);h=B[7];h.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(7,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,h.x,h.y,h.z,h.w),h.buffer=null);h=B[8];h.buffer?(l.enableVertexAttribArray(8),l.bindBuffer(34962,
h.buffer.buffer),l.vertexAttribPointer(8,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,h.x,h.y,h.z,h.w),h.buffer=null);h=B[9];h.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(9,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,h.x,h.y,h.z,h.w),h.buffer=null);h=B[10];h.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(10,
h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,h.x,h.y,h.z,h.w),h.buffer=null);h=B[11];h.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(11,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,h.x,h.y,h.z,h.w),h.buffer=null);h=B[12];h.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(12,h.size,h.type,h.normalized,
h.stride,h.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,h.x,h.y,h.z,h.w),h.buffer=null);h=B[13];h.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(13,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(13),l.vertexAttrib4f(13,h.x,h.y,h.z,h.w),h.buffer=null);h=B[14];h.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(14,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(14),
l.vertexAttrib4f(14,h.x,h.y,h.z,h.w),h.buffer=null);h=B[15];h.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,h.buffer.buffer),l.vertexAttribPointer(15,h.size,h.type,h.normalized,h.stride,h.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,h.x,h.y,h.z,h.w),h.buffer=null);f.currentVAO=null;f.setVAO(f.targetVAO);b?l.enable(3042):l.disable(3042);k.blend_enable=b;d?l.enable(2884):l.disable(2884);k.cull_enable=d;ka?l.enable(2929):l.disable(2929);k.depth_enable=ka;F?l.enable(3024):l.disable(3024);
k.dither=F;ma?l.enable(32823):l.disable(32823);k.polygonOffset_enable=ma;Ba?l.enable(32926):l.disable(32926);k.sample_alpha=Ba;V?l.enable(32928):l.disable(32928);k.sample_enable=V;ca?l.enable(3089):l.disable(3089);k.scissor_enable=ca;S?l.enable(2960):l.disable(2960);k.stencil_enable=S;l.blendColor(g[0],g[1],g[2],g[3]);n[0]=g[0];n[1]=g[1];n[2]=g[2];n[3]=g[3];l.blendEquationSeparate(p[0],p[1]);v[0]=p[0];v[1]=p[1];l.blendFuncSeparate(R[0],R[1],R[2],R[3]);G[0]=R[0];G[1]=R[1];G[2]=R[2];G[3]=R[3];l.colorMask(x[0],
x[1],x[2],x[3]);D[0]=x[0];D[1]=x[1];D[2]=x[2];D[3]=x[3];l.cullFace(O);k.cull_face=O;l.depthFunc(J);k.depth_func=J;l.depthMask(u);k.depth_mask=u;l.depthRange(ha[0],ha[1]);w[0]=ha[0];w[1]=ha[1];l.frontFace(K);k.frontFace=K;l.lineWidth(M);k.lineWidth=M;l.polygonOffset(Q[0],Q[1]);q[0]=Q[0];q[1]=Q[1];l.sampleCoverage(N[0],N[1]);ia[0]=N[0];ia[1]=N[1];l.scissor(e[0],e[1],e[2],e[3]);r[0]=e[0];r[1]=e[1];r[2]=e[2];r[3]=e[3];l.stencilFunc(T[0],T[1],T[2]);m[0]=T[0];m[1]=T[1];m[2]=T[2];l.stencilMask(qa);k.stencil_mask=
qa;l.stencilOpSeparate(X[0],X[1],X[2],X[3]);E[0]=X[0];E[1]=X[1];E[2]=X[2];E[3]=X[3];l.stencilOpSeparate(y[0],y[1],y[2],y[3]);ra[0]=y[0];ra[1]=y[1];ra[2]=y[2];ra[3]=y[3];l.viewport(I[0],I[1],I[2],I[3]);C[0]=I[0];C[1]=I[1];C[2]=I[2];C[3]=I[3]}}},$3:function(b,B,k,c){var l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma;l=b.context;a=b.current;f=b.framebuffer;g=b.gl;n=b.next;p=b.shader;v=b.vao;R=n.blend_color;G=a.blend_color;x=n.blend_equation;D=a.blend_equation;ha=n.blend_func;
w=a.blend_func;Q=n.colorMask;q=a.colorMask;N=n.depth_range;ia=a.depth_range;e=n.polygonOffset_offset;r=a.polygonOffset_offset;T=n.sample_coverage;m=a.sample_coverage;X=n.scissor_box;E=a.scissor_box;y=n.stencil_func;ra=a.stencil_func;I=n.stencil_opBack;C=a.stencil_opBack;h=n.stencil_opFront;U=a.stencil_opFront;d=n.viewport;ka=a.viewport;F={};ma={};return{batch:function(k,l){var b,S,O,J,u;b=f.next;b!==f.cur&&(b?g.bindFramebuffer(36160,b.framebuffer):g.bindFramebuffer(36160,null),f.cur=b);if(a.dirty){b=
n.dither;b!==a.dither&&(b?g.enable(3024):g.disable(3024),a.dither=b);b=n.blend_enable;b!==a.blend_enable&&(b?g.enable(3042):g.disable(3042),a.blend_enable=b);b=R[0];O=R[1];J=R[2];u=R[3];if(b!==G[0]||O!==G[1]||J!==G[2]||u!==G[3])g.blendColor(b,O,J,u),G[0]=b,G[1]=O,G[2]=J,G[3]=u;b=x[0];O=x[1];if(b!==D[0]||O!==D[1])g.blendEquationSeparate(b,O),D[0]=b,D[1]=O;b=ha[0];O=ha[1];J=ha[2];u=ha[3];if(b!==w[0]||O!==w[1]||J!==w[2]||u!==w[3])g.blendFuncSeparate(b,O,J,u),w[0]=b,w[1]=O,w[2]=J,w[3]=u;b=n.depth_enable;
b!==a.depth_enable&&(b?g.enable(2929):g.disable(2929),a.depth_enable=b);b=n.depth_func;b!==a.depth_func&&(g.depthFunc(b),a.depth_func=b);b=N[0];O=N[1];if(b!==ia[0]||O!==ia[1])g.depthRange(b,O),ia[0]=b,ia[1]=O;b=n.depth_mask;b!==a.depth_mask&&(g.depthMask(b),a.depth_mask=b);b=Q[0];O=Q[1];J=Q[2];u=Q[3];if(b!==q[0]||O!==q[1]||J!==q[2]||u!==q[3])g.colorMask(b,O,J,u),q[0]=b,q[1]=O,q[2]=J,q[3]=u;b=n.cull_enable;b!==a.cull_enable&&(b?g.enable(2884):g.disable(2884),a.cull_enable=b);b=n.cull_face;b!==a.cull_face&&
(g.cullFace(b),a.cull_face=b);b=n.frontFace;b!==a.frontFace&&(g.frontFace(b),a.frontFace=b);b=n.lineWidth;b!==a.lineWidth&&(g.lineWidth(b),a.lineWidth=b);b=n.polygonOffset_enable;b!==a.polygonOffset_enable&&(b?g.enable(32823):g.disable(32823),a.polygonOffset_enable=b);b=e[0];O=e[1];if(b!==r[0]||O!==r[1])g.polygonOffset(b,O),r[0]=b,r[1]=O;b=n.sample_alpha;b!==a.sample_alpha&&(b?g.enable(32926):g.disable(32926),a.sample_alpha=b);b=n.sample_enable;b!==a.sample_enable&&(b?g.enable(32928):g.disable(32928),
a.sample_enable=b);b=T[0];O=T[1];if(b!==m[0]||O!==m[1])g.sampleCoverage(b,O),m[0]=b,m[1]=O;b=n.stencil_enable;b!==a.stencil_enable&&(b?g.enable(2960):g.disable(2960),a.stencil_enable=b);b=n.stencil_mask;b!==a.stencil_mask&&(g.stencilMask(b),a.stencil_mask=b);b=y[0];O=y[1];J=y[2];if(b!==ra[0]||O!==ra[1]||J!==ra[2])g.stencilFunc(b,O,J),ra[0]=b,ra[1]=O,ra[2]=J;b=h[0];O=h[1];J=h[2];u=h[3];if(b!==U[0]||O!==U[1]||J!==U[2]||u!==U[3])g.stencilOpSeparate(b,O,J,u),U[0]=b,U[1]=O,U[2]=J,U[3]=u;b=I[0];O=I[1];
J=I[2];u=I[3];if(b!==C[0]||O!==C[1]||J!==C[2]||u!==C[3])g.stencilOpSeparate(b,O,J,u),C[0]=b,C[1]=O,C[2]=J,C[3]=u;b=n.scissor_enable;b!==a.scissor_enable&&(b?g.enable(3089):g.disable(3089),a.scissor_enable=b);b=X[0];O=X[1];J=X[2];u=X[3];if(b!==E[0]||O!==E[1]||J!==E[2]||u!==E[3])g.scissor(b,O,J,u),E[0]=b,E[1]=O,E[2]=J,E[3]=u;b=d[0];O=d[1];J=d[2];u=d[3];if(b!==ka[0]||O!==ka[1]||J!==ka[2]||u!==ka[3])g.viewport(b,O,J,u),ka[0]=b,ka[1]=O,ka[2]=J,ka[3]=u;a.dirty=!1}if(b=a.profile)S=performance.now(),B.count+=
l;O=p.program(p.vert,p.frag);g.useProgram(O.program);v.setVAO(null);J=O.id;(u=ma[J])||(u=ma[J]=c(O));u.call(this,k,l);v.setVAO(null);b&&(B.cpuTime+=performance.now()-S)},draw:function(c){var b,l,S,O,J;b=f.next;b!==f.cur&&(b?g.bindFramebuffer(36160,b.framebuffer):g.bindFramebuffer(36160,null),f.cur=b);if(a.dirty){b=n.dither;b!==a.dither&&(b?g.enable(3024):g.disable(3024),a.dither=b);b=n.blend_enable;b!==a.blend_enable&&(b?g.enable(3042):g.disable(3042),a.blend_enable=b);b=R[0];S=R[1];O=R[2];J=R[3];
if(b!==G[0]||S!==G[1]||O!==G[2]||J!==G[3])g.blendColor(b,S,O,J),G[0]=b,G[1]=S,G[2]=O,G[3]=J;b=x[0];S=x[1];if(b!==D[0]||S!==D[1])g.blendEquationSeparate(b,S),D[0]=b,D[1]=S;b=ha[0];S=ha[1];O=ha[2];J=ha[3];if(b!==w[0]||S!==w[1]||O!==w[2]||J!==w[3])g.blendFuncSeparate(b,S,O,J),w[0]=b,w[1]=S,w[2]=O,w[3]=J;b=n.depth_enable;b!==a.depth_enable&&(b?g.enable(2929):g.disable(2929),a.depth_enable=b);b=n.depth_func;b!==a.depth_func&&(g.depthFunc(b),a.depth_func=b);b=N[0];S=N[1];if(b!==ia[0]||S!==ia[1])g.depthRange(b,
S),ia[0]=b,ia[1]=S;b=n.depth_mask;b!==a.depth_mask&&(g.depthMask(b),a.depth_mask=b);b=Q[0];S=Q[1];O=Q[2];J=Q[3];if(b!==q[0]||S!==q[1]||O!==q[2]||J!==q[3])g.colorMask(b,S,O,J),q[0]=b,q[1]=S,q[2]=O,q[3]=J;b=n.cull_enable;b!==a.cull_enable&&(b?g.enable(2884):g.disable(2884),a.cull_enable=b);b=n.cull_face;b!==a.cull_face&&(g.cullFace(b),a.cull_face=b);b=n.frontFace;b!==a.frontFace&&(g.frontFace(b),a.frontFace=b);b=n.lineWidth;b!==a.lineWidth&&(g.lineWidth(b),a.lineWidth=b);b=n.polygonOffset_enable;b!==
a.polygonOffset_enable&&(b?g.enable(32823):g.disable(32823),a.polygonOffset_enable=b);b=e[0];S=e[1];if(b!==r[0]||S!==r[1])g.polygonOffset(b,S),r[0]=b,r[1]=S;b=n.sample_alpha;b!==a.sample_alpha&&(b?g.enable(32926):g.disable(32926),a.sample_alpha=b);b=n.sample_enable;b!==a.sample_enable&&(b?g.enable(32928):g.disable(32928),a.sample_enable=b);b=T[0];S=T[1];if(b!==m[0]||S!==m[1])g.sampleCoverage(b,S),m[0]=b,m[1]=S;b=n.stencil_enable;b!==a.stencil_enable&&(b?g.enable(2960):g.disable(2960),a.stencil_enable=
b);b=n.stencil_mask;b!==a.stencil_mask&&(g.stencilMask(b),a.stencil_mask=b);b=y[0];S=y[1];O=y[2];if(b!==ra[0]||S!==ra[1]||O!==ra[2])g.stencilFunc(b,S,O),ra[0]=b,ra[1]=S,ra[2]=O;b=h[0];S=h[1];O=h[2];J=h[3];if(b!==U[0]||S!==U[1]||O!==U[2]||J!==U[3])g.stencilOpSeparate(b,S,O,J),U[0]=b,U[1]=S,U[2]=O,U[3]=J;b=I[0];S=I[1];O=I[2];J=I[3];if(b!==C[0]||S!==C[1]||O!==C[2]||J!==C[3])g.stencilOpSeparate(b,S,O,J),C[0]=b,C[1]=S,C[2]=O,C[3]=J;b=n.scissor_enable;b!==a.scissor_enable&&(b?g.enable(3089):g.disable(3089),
a.scissor_enable=b);b=X[0];S=X[1];O=X[2];J=X[3];if(b!==E[0]||S!==E[1]||O!==E[2]||J!==E[3])g.scissor(b,S,O,J),E[0]=b,E[1]=S,E[2]=O,E[3]=J;b=d[0];S=d[1];O=d[2];J=d[3];if(b!==ka[0]||S!==ka[1]||O!==ka[2]||J!==ka[3])g.viewport(b,S,O,J),ka[0]=b,ka[1]=S,ka[2]=O,ka[3]=J;a.dirty=!1}if(b=a.profile)l=performance.now(),B.count++;S=p.program(p.vert,p.frag);g.useProgram(S.program);v.setVAO(null);O=S.id;(J=F[O])||(J=F[O]=k(S));J.call(this,c);v.setVAO(null);b&&(B.cpuTime+=performance.now()-l)},scope:function(c,d,
h){var k,g;if(k=a.profile)g=performance.now(),B.count++;d(l,c,h);k&&(B.cpuTime+=performance.now()-g)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,
z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa){var ga,Z,ua,Ka,Ga,hb,ba,xd,Gf,Ia,P,Sb,ze,Ed,qe,Md,Be,yd,Qd,oe,ge,Cd,Wd,de,$d,Ze,Ye,Qe,Fd,Ce,se,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va;ga=b.attributes;Z=b.context;ua=b.current;Ka=b.draw;Ga=b.elements;hb=b.framebuffer;ba=b.gl;xd=b.next;Gf=b.shader;Ia=b.uniforms;P=b.vao;Sb=xd.blend_color;ze=ua.blend_color;Ed=xd.blend_equation;qe=ua.blend_equation;
Md=xd.blend_func;Be=ua.blend_func;yd=xd.colorMask;Qd=ua.colorMask;oe=xd.depth_range;ge=ua.depth_range;Cd=xd.polygonOffset_offset;Wd=ua.polygonOffset_offset;de=xd.sample_coverage;$d=ua.sample_coverage;Ze=xd.scissor_box;Ye=ua.scissor_box;Qe=xd.stencil_func;Fd=ua.stencil_func;Ce=xd.stencil_opBack;se=ua.stencil_opBack;Xd=xd.stencil_opFront;Nd=ua.stencil_opFront;zd=xd.viewport;md=ua.viewport;bd={};pd={};Lc=new Float32Array(16);od=new Float32Array(16);Ec=new Float32Array(16);fd=new Float32Array(16);Pc=
new Float32Array(16);Ic=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);sc=new Float32Array(16);yb=new Float32Array(16);wc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);kc=new Float32Array(16);Fc=new Float32Array(16);gd=new Float32Array(16);Xc=new Float32Array(16);Dc=new Float32Array(16);cc=new Float32Array(16);Gc=new Float32Array(16);nc=new Float32Array(16);oc=new Float32Array(16);lc=new Float32Array(16);dc=new Float32Array(16);fb=new Float32Array(16);
Tc=new Float32Array(16);zb=new Float32Array(16);cb=new Float32Array(16);Nb=new Float32Array(16);ab=new Float32Array(16);pb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(d,h){var k,b,e,m;k=hb.next;k!==hb.cur&&(k?ba.bindFramebuffer(36160,k.framebuffer):ba.bindFramebuffer(36160,null),hb.cur=k);if(ua.dirty){var B,r,y,U,E,F,I,C,N,T,X,ia,ka,ma,Ia,ra,Sb,Gf,Ma,Fb,Pc,Bb,Cb,Pa,Ze;B=yd[0];r=yd[1];y=yd[2];U=yd[3];if(B!==Qd[0]||r!==Qd[1]||y!==Qd[2]||U!==Qd[3])ba.colorMask(B,r,y,U),Qd[0]=B,
Qd[1]=r,Qd[2]=y,Qd[3]=U;E=xd.frontFace;E!==ua.frontFace&&(ba.frontFace(E),ua.frontFace=E);F=xd.polygonOffset_enable;F!==ua.polygonOffset_enable&&(F?ba.enable(32823):ba.disable(32823),ua.polygonOffset_enable=F);I=Cd[0];C=Cd[1];if(I!==Wd[0]||C!==Wd[1])ba.polygonOffset(I,C),Wd[0]=I,Wd[1]=C;N=xd.sample_alpha;N!==ua.sample_alpha&&(N?ba.enable(32926):ba.disable(32926),ua.sample_alpha=N);T=xd.sample_enable;T!==ua.sample_enable&&(T?ba.enable(32928):ba.disable(32928),ua.sample_enable=T);X=de[0];ia=de[1];if(X!==
$d[0]||ia!==$d[1])ba.sampleCoverage(X,ia),$d[0]=X,$d[1]=ia;ka=xd.stencil_enable;ka!==ua.stencil_enable&&(ka?ba.enable(2960):ba.disable(2960),ua.stencil_enable=ka);ma=xd.stencil_mask;ma!==ua.stencil_mask&&(ba.stencilMask(ma),ua.stencil_mask=ma);Ia=Qe[0];ra=Qe[1];Sb=Qe[2];if(Ia!==Fd[0]||ra!==Fd[1]||Sb!==Fd[2])ba.stencilFunc(Ia,ra,Sb),Fd[0]=Ia,Fd[1]=ra,Fd[2]=Sb;Gf=Xd[0];Ma=Xd[1];Fb=Xd[2];Pc=Xd[3];if(Gf!==Nd[0]||Ma!==Nd[1]||Fb!==Nd[2]||Pc!==Nd[3])ba.stencilOpSeparate(Gf,Ma,Fb,Pc),Nd[0]=Gf,Nd[1]=Ma,Nd[2]=
Fb,Nd[3]=Pc;Bb=Ce[0];Cb=Ce[1];Pa=Ce[2];Ze=Ce[3];if(Bb!==se[0]||Cb!==se[1]||Pa!==se[2]||Ze!==se[3])ba.stencilOpSeparate(Bb,Cb,Pa,Ze),se[0]=Bb,se[1]=Cb,se[2]=Pa,se[3]=Ze}ba.blendColor(0,0,0,0);ze[0]=0;ze[1]=0;ze[2]=0;ze[3]=0;ba.disable(3042);ua.blend_enable=!1;ba.blendEquationSeparate(32774,32774);qe[0]=32774;qe[1]=32774;ba.blendFuncSeparate(770,771,1,1);Be[0]=770;Be[1]=771;Be[2]=1;Be[3]=1;ba.enable(2884);ua.cull_enable=!0;ba.cullFace(1029);ua.cull_face=1029;ba.enable(2929);ua.depth_enable=!0;ba.depthFunc(513);
ua.depth_func=513;ba.depthMask(!0);ua.depth_mask=!0;ba.depthRange(0,1);ge[0]=0;ge[1]=1;ba.disable(3024);ua.dither=!1;ba.lineWidth(2);ua.lineWidth=2;ba.enable(3089);ua.scissor_enable=!0;b=ua.profile;ua.profile=!1;ba.useProgram(Ba.program);var Sa,yb,Ic,Na,kc,Za,Ec,Md,nb,Oa,sc,Qa,vb,wb,Ua,ob,od,Ed,Fc,bb,Jc,fd,Xa,Lc,Ab,$a,oe,wc,Xb,Qb,zd,Rb,gd;P.setVAO(null);Sa=Aa.location;yb=ga[Sa];yb.buffer||ba.enableVertexAttribArray(Sa);if(yb.type!==c.dtype||4!==yb.size||yb.buffer!==c||!1!==yb.normalized||0!==yb.offset||
0!==yb.stride)ba.bindBuffer(34962,c.buffer),ba.vertexAttribPointer(Sa,4,c.dtype,!1,0,0),yb.type=c.dtype,yb.size=4,yb.buffer=c,yb.normalized=!1,yb.offset=0,yb.stride=0;Ic=Ra.location;Na=ga[Ic];Na.buffer||ba.enableVertexAttribArray(Ic);if(Na.type!==l.dtype||4!==Na.size||Na.buffer!==l||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(Ic,4,l.dtype,!1,0,0),Na.type=l.dtype,Na.size=4,Na.buffer=l,Na.normalized=!1,Na.offset=0,Na.stride=0;kc=na.location;
Za=ga[kc];Za.buffer||ba.enableVertexAttribArray(kc);if(Za.type!==a.dtype||4!==Za.size||Za.buffer!==a||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ba.bindBuffer(34962,a.buffer),ba.vertexAttribPointer(kc,4,a.dtype,!1,0,0),Za.type=a.dtype,Za.size=4,Za.buffer=a,Za.normalized=!1,Za.offset=0,Za.stride=0;Ec=Tb.location;Md=ga[Ec];Md.buffer||ba.enableVertexAttribArray(Ec);if(Md.type!==f.dtype||4!==Md.size||Md.buffer!==f||!1!==Md.normalized||0!==Md.offset||0!==Md.stride)ba.bindBuffer(34962,f.buffer),ba.vertexAttribPointer(Ec,
4,f.dtype,!1,0,0),Md.type=f.dtype,Md.size=4,Md.buffer=f,Md.normalized=!1,Md.offset=0,Md.stride=0;nb=Ya.location;Oa=ga[nb];Oa.buffer||ba.enableVertexAttribArray(nb);if(Oa.type!==g.dtype||4!==Oa.size||Oa.buffer!==g||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ba.bindBuffer(34962,g.buffer),ba.vertexAttribPointer(nb,4,g.dtype,!1,0,0),Oa.type=g.dtype,Oa.size=4,Oa.buffer=g,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;sc=A.location;Qa=ga[sc];Qa.buffer||ba.enableVertexAttribArray(sc);if(Qa.type!==n.dtype||
4!==Qa.size||Qa.buffer!==n||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)ba.bindBuffer(34962,n.buffer),ba.vertexAttribPointer(sc,4,n.dtype,!1,0,0),Qa.type=n.dtype,Qa.size=4,Qa.buffer=n,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;vb=t.location;wb=ga[vb];wb.buffer||ba.enableVertexAttribArray(vb);if(wb.type!==p.dtype||4!==wb.size||wb.buffer!==p||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)ba.bindBuffer(34962,p.buffer),ba.vertexAttribPointer(vb,4,p.dtype,!1,0,0),wb.type=p.dtype,wb.size=4,wb.buffer=
p,wb.normalized=!1,wb.offset=0,wb.stride=0;Ua=aa.location;ob=ga[Ua];ob.buffer||ba.enableVertexAttribArray(Ua);if(ob.type!==v.dtype||4!==ob.size||ob.buffer!==v||!1!==ob.normalized||0!==ob.offset||0!==ob.stride)ba.bindBuffer(34962,v.buffer),ba.vertexAttribPointer(Ua,4,v.dtype,!1,0,0),ob.type=v.dtype,ob.size=4,ob.buffer=v,ob.normalized=!1,ob.offset=0,ob.stride=0;od=va.location;Ed=ga[od];Ed.buffer||ba.enableVertexAttribArray(od);if(Ed.type!==R.dtype||4!==Ed.size||Ed.buffer!==R||!1!==Ed.normalized||0!==
Ed.offset||0!==Ed.stride)ba.bindBuffer(34962,R.buffer),ba.vertexAttribPointer(od,4,R.dtype,!1,0,0),Ed.type=R.dtype,Ed.size=4,Ed.buffer=R,Ed.normalized=!1,Ed.offset=0,Ed.stride=0;Fc=xa.location;bb=ga[Fc];bb.buffer||ba.enableVertexAttribArray(Fc);if(bb.type!==G.dtype||4!==bb.size||bb.buffer!==G||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ba.bindBuffer(34962,G.buffer),ba.vertexAttribPointer(Fc,4,G.dtype,!1,0,0),bb.type=G.dtype,bb.size=4,bb.buffer=G,bb.normalized=!1,bb.offset=0,bb.stride=0;Jc=zc.location;
fd=ga[Jc];fd.buffer||ba.enableVertexAttribArray(Jc);if(fd.type!==x.dtype||4!==fd.size||fd.buffer!==x||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)ba.bindBuffer(34962,x.buffer),ba.vertexAttribPointer(Jc,4,x.dtype,!1,0,0),fd.type=x.dtype,fd.size=4,fd.buffer=x,fd.normalized=!1,fd.offset=0,fd.stride=0;Xa=Hb.location;Lc=ga[Xa];Lc.buffer||ba.enableVertexAttribArray(Xa);if(Lc.type!==D.dtype||4!==Lc.size||Lc.buffer!==D||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ba.bindBuffer(34962,D.buffer),ba.vertexAttribPointer(Xa,
4,D.dtype,!1,0,0),Lc.type=D.dtype,Lc.size=4,Lc.buffer=D,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=Y.location;$a=ga[Ab];$a.buffer||ba.enableVertexAttribArray(Ab);if($a.type!==ha.dtype||4!==$a.size||$a.buffer!==ha||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)ba.bindBuffer(34962,ha.buffer),ba.vertexAttribPointer(Ab,4,ha.dtype,!1,0,0),$a.type=ha.dtype,$a.size=4,$a.buffer=ha,$a.normalized=!1,$a.offset=0,$a.stride=0;oe=L.location;wc=ga[oe];wc.buffer||ba.enableVertexAttribArray(oe);if(wc.type!==w.dtype||
4!==wc.size||wc.buffer!==w||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)ba.bindBuffer(34962,w.buffer),ba.vertexAttribPointer(oe,4,w.dtype,!1,0,0),wc.type=w.dtype,wc.size=4,wc.buffer=w,wc.normalized=!1,wc.offset=0,wc.stride=0;Xb=wa.location;Qb=ga[Xb];Qb.buffer||ba.enableVertexAttribArray(Xb);if(Qb.type!==Q.dtype||4!==Qb.size||Qb.buffer!==Q||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ba.bindBuffer(34962,Q.buffer),ba.vertexAttribPointer(Xb,4,Q.dtype,!1,0,0),Qb.type=Q.dtype,Qb.size=4,Qb.buffer=
Q,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;zd=ca.location;Rb=ga[zd];Rb.buffer||ba.enableVertexAttribArray(zd);if(Rb.type!==q.dtype||4!==Rb.size||Rb.buffer!==q||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)ba.bindBuffer(34962,q.buffer),ba.vertexAttribPointer(zd,4,q.dtype,!1,0,0),Rb.type=q.dtype,Rb.size=4,Rb.buffer=q,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;ba.uniform1i(Ha.location,V.bind());(gd=Ka.elements)?ba.bindBuffer(34963,gd.buffer.buffer):P.currentVAO&&(gd=Ga.getElements(P.currentVAO.elements))&&
ba.bindBuffer(34963,gd.buffer.buffer);for(e=0;e<h;++e){m=d[e];var fa,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,Ca,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be;bd.height=m.viewportHeight;bd.width=m.viewportWidth;bd.x=m.viewportX;bd.y=m.viewportY;fa=bd.x|0;sd=bd.y|0;Nc="width"in bd?bd.width|0:Z.framebufferWidth-fa;Yc="height"in bd?bd.height|0:Z.framebufferHeight-sd;Jd=Z.viewportWidth;Z.viewportWidth=Nc;mc=Z.viewportHeight;
Z.viewportHeight=Yc;ba.viewport(fa,sd,Nc,Yc);md[0]=fa;md[1]=sd;md[2]=Nc;md[3]=Yc;pd.height=m.scissorHeight;pd.width=m.scissorWidth;pd.x=m.scissorX;pd.y=m.scissorY;uc=pd.x|0;fc=pd.y|0;db="width"in pd?pd.width|0:Z.framebufferWidth-uc;qc="height"in pd?pd.height|0:Z.framebufferHeight-fc;ba.scissor(uc,fc,db,qc);Ye[0]=uc;Ye[1]=fc;Ye[2]=db;Ye[3]=qc;Ub=m.dim0A;ba.uniformMatrix4fv(O.location,!1,Array.isArray(Ub)||Ub instanceof Float32Array?Ub:(Xc[0]=Ub[0],Xc[1]=Ub[1],Xc[2]=Ub[2],Xc[3]=Ub[3],Xc[4]=Ub[4],Xc[5]=
Ub[5],Xc[6]=Ub[6],Xc[7]=Ub[7],Xc[8]=Ub[8],Xc[9]=Ub[9],Xc[10]=Ub[10],Xc[11]=Ub[11],Xc[12]=Ub[12],Xc[13]=Ub[13],Xc[14]=Ub[14],Xc[15]=Ub[15],Xc));Yb=m.dim1A;ba.uniformMatrix4fv(M.location,!1,Array.isArray(Yb)||Yb instanceof Float32Array?Yb:(Dc[0]=Yb[0],Dc[1]=Yb[1],Dc[2]=Yb[2],Dc[3]=Yb[3],Dc[4]=Yb[4],Dc[5]=Yb[5],Dc[6]=Yb[6],Dc[7]=Yb[7],Dc[8]=Yb[8],Dc[9]=Yb[9],Dc[10]=Yb[10],Dc[11]=Yb[11],Dc[12]=Yb[12],Dc[13]=Yb[13],Dc[14]=Yb[14],Dc[15]=Yb[15],Dc));bc=m.dim0B;ba.uniformMatrix4fv(J.location,!1,Array.isArray(bc)||
bc instanceof Float32Array?bc:(cc[0]=bc[0],cc[1]=bc[1],cc[2]=bc[2],cc[3]=bc[3],cc[4]=bc[4],cc[5]=bc[5],cc[6]=bc[6],cc[7]=bc[7],cc[8]=bc[8],cc[9]=bc[9],cc[10]=bc[10],cc[11]=bc[11],cc[12]=bc[12],cc[13]=bc[13],cc[14]=bc[14],cc[15]=bc[15],cc));gc=m.dim1B;ba.uniformMatrix4fv(qa.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(Gc[0]=gc[0],Gc[1]=gc[1],Gc[2]=gc[2],Gc[3]=gc[3],Gc[4]=gc[4],Gc[5]=gc[5],Gc[6]=gc[6],Gc[7]=gc[7],Gc[8]=gc[8],Gc[9]=gc[9],Gc[10]=gc[10],Gc[11]=gc[11],Gc[12]=gc[12],Gc[13]=
gc[13],Gc[14]=gc[14],Gc[15]=gc[15],Gc));xc=m.dim0C;ba.uniformMatrix4fv(u.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(nc[0]=xc[0],nc[1]=xc[1],nc[2]=xc[2],nc[3]=xc[3],nc[4]=xc[4],nc[5]=xc[5],nc[6]=xc[6],nc[7]=xc[7],nc[8]=xc[8],nc[9]=xc[9],nc[10]=xc[10],nc[11]=xc[11],nc[12]=xc[12],nc[13]=xc[13],nc[14]=xc[14],nc[15]=xc[15],nc));Bc=m.dim1C;ba.uniformMatrix4fv(oa.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(oc[0]=Bc[0],oc[1]=Bc[1],oc[2]=Bc[2],oc[3]=Bc[3],oc[4]=Bc[4],oc[5]=
Bc[5],oc[6]=Bc[6],oc[7]=Bc[7],oc[8]=Bc[8],oc[9]=Bc[9],oc[10]=Bc[10],oc[11]=Bc[11],oc[12]=Bc[12],oc[13]=Bc[13],oc[14]=Bc[14],oc[15]=Bc[15],oc));cd=m.dim0D;ba.uniformMatrix4fv(K.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(lc[0]=cd[0],lc[1]=cd[1],lc[2]=cd[2],lc[3]=cd[3],lc[4]=cd[4],lc[5]=cd[5],lc[6]=cd[6],lc[7]=cd[7],lc[8]=cd[8],lc[9]=cd[9],lc[10]=cd[10],lc[11]=cd[11],lc[12]=cd[12],lc[13]=cd[13],lc[14]=cd[14],lc[15]=cd[15],lc));Rc=m.dim1D;ba.uniformMatrix4fv(z.location,!1,Array.isArray(Rc)||
Rc instanceof Float32Array?Rc:(dc[0]=Rc[0],dc[1]=Rc[1],dc[2]=Rc[2],dc[3]=Rc[3],dc[4]=Rc[4],dc[5]=Rc[5],dc[6]=Rc[6],dc[7]=Rc[7],dc[8]=Rc[8],dc[9]=Rc[9],dc[10]=Rc[10],dc[11]=Rc[11],dc[12]=Rc[12],dc[13]=Rc[13],dc[14]=Rc[14],dc[15]=Rc[15],dc));Sc=m.loA;ba.uniformMatrix4fv(Da.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(fb[0]=Sc[0],fb[1]=Sc[1],fb[2]=Sc[2],fb[3]=Sc[3],fb[4]=Sc[4],fb[5]=Sc[5],fb[6]=Sc[6],fb[7]=Sc[7],fb[8]=Sc[8],fb[9]=Sc[9],fb[10]=Sc[10],fb[11]=Sc[11],fb[12]=Sc[12],fb[13]=
Sc[13],fb[14]=Sc[14],fb[15]=Sc[15],fb));Uc=m.hiA;ba.uniformMatrix4fv(da.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(Tc[0]=Uc[0],Tc[1]=Uc[1],Tc[2]=Uc[2],Tc[3]=Uc[3],Tc[4]=Uc[4],Tc[5]=Uc[5],Tc[6]=Uc[6],Tc[7]=Uc[7],Tc[8]=Uc[8],Tc[9]=Uc[9],Tc[10]=Uc[10],Tc[11]=Uc[11],Tc[12]=Uc[12],Tc[13]=Uc[13],Tc[14]=Uc[14],Tc[15]=Uc[15],Tc));Zc=m.loB;ba.uniformMatrix4fv(za.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(zb[0]=Zc[0],zb[1]=Zc[1],zb[2]=Zc[2],zb[3]=Zc[3],zb[4]=Zc[4],zb[5]=
Zc[5],zb[6]=Zc[6],zb[7]=Zc[7],zb[8]=Zc[8],zb[9]=Zc[9],zb[10]=Zc[10],zb[11]=Zc[11],zb[12]=Zc[12],zb[13]=Zc[13],zb[14]=Zc[14],zb[15]=Zc[15],zb));ld=m.hiB;ba.uniformMatrix4fv(W.location,!1,Array.isArray(ld)||ld instanceof Float32Array?ld:(cb[0]=ld[0],cb[1]=ld[1],cb[2]=ld[2],cb[3]=ld[3],cb[4]=ld[4],cb[5]=ld[5],cb[6]=ld[6],cb[7]=ld[7],cb[8]=ld[8],cb[9]=ld[9],cb[10]=ld[10],cb[11]=ld[11],cb[12]=ld[12],cb[13]=ld[13],cb[14]=ld[14],cb[15]=ld[15],cb));dd=m.loC;ba.uniformMatrix4fv(ea.location,!1,Array.isArray(dd)||
dd instanceof Float32Array?dd:(Nb[0]=dd[0],Nb[1]=dd[1],Nb[2]=dd[2],Nb[3]=dd[3],Nb[4]=dd[4],Nb[5]=dd[5],Nb[6]=dd[6],Nb[7]=dd[7],Nb[8]=dd[8],Nb[9]=dd[9],Nb[10]=dd[10],Nb[11]=dd[11],Nb[12]=dd[12],Nb[13]=dd[13],Nb[14]=dd[14],Nb[15]=dd[15],Nb));$c=m.hiC;ba.uniformMatrix4fv(la.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(ab[0]=$c[0],ab[1]=$c[1],ab[2]=$c[2],ab[3]=$c[3],ab[4]=$c[4],ab[5]=$c[5],ab[6]=$c[6],ab[7]=$c[7],ab[8]=$c[8],ab[9]=$c[9],ab[10]=$c[10],ab[11]=$c[11],ab[12]=$c[12],ab[13]=
$c[13],ab[14]=$c[14],ab[15]=$c[15],ab));jc=m.loD;ba.uniformMatrix4fv(Ea.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(pb[0]=jc[0],pb[1]=jc[1],pb[2]=jc[2],pb[3]=jc[3],pb[4]=jc[4],pb[5]=jc[5],pb[6]=jc[6],pb[7]=jc[7],pb[8]=jc[8],pb[9]=jc[9],pb[10]=jc[10],pb[11]=jc[11],pb[12]=jc[12],pb[13]=jc[13],pb[14]=jc[14],pb[15]=jc[15],pb));ac=m.hiD;ba.uniformMatrix4fv(ta.location,!1,Array.isArray(ac)||ac instanceof Float32Array?ac:(Va[0]=ac[0],Va[1]=ac[1],Va[2]=ac[2],Va[3]=ac[3],Va[4]=ac[4],Va[5]=
ac[5],Va[6]=ac[6],Va[7]=ac[7],Va[8]=ac[8],Va[9]=ac[9],Va[10]=ac[10],Va[11]=ac[11],Va[12]=ac[12],Va[13]=ac[13],Va[14]=ac[14],Va[15]=ac[15],Va));ad=m.resolution;Wc=ad[0];yc=ad[1];e&&ed===Wc&&id===yc||(ed=Wc,id=yc,ba.uniform2f(sa.location,Wc,yc));td=m.viewBoxPos;Ad=td[0];jd=td[1];e&&te===Ad&&Ca===jd||(te=Ad,Ca=jd,ba.uniform2f(ya.location,Ad,jd));Od=m.viewBoxSize;ee=Od[0];Yd=Od[1];e&&ye===ee&&Id===Yd||(ye=ee,Id=Yd,ba.uniform2f(Fa.location,ee,Yd));Gd=m.maskHeight;e&&nd===Gd||(nd=Gd,ba.uniform1f(ja.location,
Gd));Vc=m.drwLayer;e&&ud===Vc||(ud=Vc,ba.uniform1f(H.location,Vc));rd=m.contextColor;kd=rd[0];Bd=rd[1];he=rd[2];ue=rd[3];e&&vd===kd&&Dd===Bd&&ke===he&&le===ue||(vd=kd,Dd=Bd,ke=he,le=ue,ba.uniform4f(S.location,kd,Bd,he,ue));(ie=m.maskTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);fe=ie._texture;ba.uniform1i(pa.location,fe.bind());ve=m.offset;if(be=m.count)gd?ba.drawElements(1,be,gd.type,ve<<(gd.type-5121>>1)):ba.drawArrays(1,ve,be),Z.viewportWidth=Jd,Z.viewportHeight=mc,fe.unbind()}V.unbind();
ua.dirty=!0;P.setVAO(null);ua.profile=b},draw:function(d){var h,b,e,m,B,r;h=hb.next;h!==hb.cur&&(h?ba.bindFramebuffer(36160,h.framebuffer):ba.bindFramebuffer(36160,null),hb.cur=h);if(ua.dirty){h=yd[0];r=yd[1];b=yd[2];e=yd[3];if(h!==Qd[0]||r!==Qd[1]||b!==Qd[2]||e!==Qd[3])ba.colorMask(h,r,b,e),Qd[0]=h,Qd[1]=r,Qd[2]=b,Qd[3]=e;h=xd.frontFace;h!==ua.frontFace&&(ba.frontFace(h),ua.frontFace=h);h=xd.polygonOffset_enable;h!==ua.polygonOffset_enable&&(h?ba.enable(32823):ba.disable(32823),ua.polygonOffset_enable=
h);h=Cd[0];r=Cd[1];if(h!==Wd[0]||r!==Wd[1])ba.polygonOffset(h,r),Wd[0]=h,Wd[1]=r;h=xd.sample_alpha;h!==ua.sample_alpha&&(h?ba.enable(32926):ba.disable(32926),ua.sample_alpha=h);h=xd.sample_enable;h!==ua.sample_enable&&(h?ba.enable(32928):ba.disable(32928),ua.sample_enable=h);h=de[0];r=de[1];if(h!==$d[0]||r!==$d[1])ba.sampleCoverage(h,r),$d[0]=h,$d[1]=r;h=xd.stencil_enable;h!==ua.stencil_enable&&(h?ba.enable(2960):ba.disable(2960),ua.stencil_enable=h);h=xd.stencil_mask;h!==ua.stencil_mask&&(ba.stencilMask(h),
ua.stencil_mask=h);h=Qe[0];r=Qe[1];b=Qe[2];if(h!==Fd[0]||r!==Fd[1]||b!==Fd[2])ba.stencilFunc(h,r,b),Fd[0]=h,Fd[1]=r,Fd[2]=b;h=Xd[0];r=Xd[1];b=Xd[2];e=Xd[3];if(h!==Nd[0]||r!==Nd[1]||b!==Nd[2]||e!==Nd[3])ba.stencilOpSeparate(h,r,b,e),Nd[0]=h,Nd[1]=r,Nd[2]=b,Nd[3]=e;h=Ce[0];r=Ce[1];b=Ce[2];e=Ce[3];if(h!==se[0]||r!==se[1]||b!==se[2]||e!==se[3])ba.stencilOpSeparate(h,r,b,e),se[0]=h,se[1]=r,se[2]=b,se[3]=e}bd.height=d.viewportHeight;bd.width=d.viewportWidth;bd.x=d.viewportX;bd.y=d.viewportY;b=bd.x|0;e=
bd.y|0;m="width"in bd?bd.width|0:Z.framebufferWidth-b;B="height"in bd?bd.height|0:Z.framebufferHeight-e;h=Z.viewportWidth;Z.viewportWidth=m;r=Z.viewportHeight;Z.viewportHeight=B;ba.viewport(b,e,m,B);md[0]=b;md[1]=e;md[2]=m;md[3]=B;ba.blendColor(0,0,0,0);ze[0]=0;ze[1]=0;ze[2]=0;ze[3]=0;ba.disable(3042);ua.blend_enable=!1;ba.blendEquationSeparate(32774,32774);qe[0]=32774;qe[1]=32774;ba.blendFuncSeparate(770,771,1,1);Be[0]=770;Be[1]=771;Be[2]=1;Be[3]=1;ba.enable(2884);ua.cull_enable=!0;ba.cullFace(1029);
ua.cull_face=1029;ba.enable(2929);ua.depth_enable=!0;ba.depthFunc(513);ua.depth_func=513;ba.depthMask(!0);ua.depth_mask=!0;ba.depthRange(0,1);ge[0]=0;ge[1]=1;ba.disable(3024);ua.dither=!1;ba.lineWidth(2);ua.lineWidth=2;pd.height=d.scissorHeight;pd.width=d.scissorWidth;pd.x=d.scissorX;pd.y=d.scissorY;b=pd.x|0;e=pd.y|0;m="width"in pd?pd.width|0:Z.framebufferWidth-b;B="height"in pd?pd.height|0:Z.framebufferHeight-e;ba.scissor(b,e,m,B);Ye[0]=b;Ye[1]=e;Ye[2]=m;Ye[3]=B;ba.enable(3089);ua.scissor_enable=
!0;b=ua.profile;ua.profile=!1;ba.useProgram(k.program);P.setVAO(null);e=Aa.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==c.dtype||4!==m.size||m.buffer!==c||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,c.buffer),ba.vertexAttribPointer(e,4,c.dtype,!1,0,0),m.type=c.dtype,m.size=4,m.buffer=c,m.normalized=!1,m.offset=0,m.stride=0;e=Ra.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==l.dtype||4!==m.size||m.buffer!==l||!1!==m.normalized||0!==
m.offset||0!==m.stride)ba.bindBuffer(34962,l.buffer),ba.vertexAttribPointer(e,4,l.dtype,!1,0,0),m.type=l.dtype,m.size=4,m.buffer=l,m.normalized=!1,m.offset=0,m.stride=0;e=na.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==a.dtype||4!==m.size||m.buffer!==a||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,a.buffer),ba.vertexAttribPointer(e,4,a.dtype,!1,0,0),m.type=a.dtype,m.size=4,m.buffer=a,m.normalized=!1,m.offset=0,m.stride=0;e=Tb.location;m=ga[e];m.buffer||
ba.enableVertexAttribArray(e);if(m.type!==f.dtype||4!==m.size||m.buffer!==f||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,f.buffer),ba.vertexAttribPointer(e,4,f.dtype,!1,0,0),m.type=f.dtype,m.size=4,m.buffer=f,m.normalized=!1,m.offset=0,m.stride=0;e=Ya.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==g.dtype||4!==m.size||m.buffer!==g||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,g.buffer),ba.vertexAttribPointer(e,4,g.dtype,!1,0,0),m.type=
g.dtype,m.size=4,m.buffer=g,m.normalized=!1,m.offset=0,m.stride=0;e=A.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==n.dtype||4!==m.size||m.buffer!==n||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,n.buffer),ba.vertexAttribPointer(e,4,n.dtype,!1,0,0),m.type=n.dtype,m.size=4,m.buffer=n,m.normalized=!1,m.offset=0,m.stride=0;e=t.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==p.dtype||4!==m.size||m.buffer!==p||!1!==m.normalized||0!==m.offset||
0!==m.stride)ba.bindBuffer(34962,p.buffer),ba.vertexAttribPointer(e,4,p.dtype,!1,0,0),m.type=p.dtype,m.size=4,m.buffer=p,m.normalized=!1,m.offset=0,m.stride=0;e=aa.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==v.dtype||4!==m.size||m.buffer!==v||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,v.buffer),ba.vertexAttribPointer(e,4,v.dtype,!1,0,0),m.type=v.dtype,m.size=4,m.buffer=v,m.normalized=!1,m.offset=0,m.stride=0;e=va.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);
if(m.type!==R.dtype||4!==m.size||m.buffer!==R||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,R.buffer),ba.vertexAttribPointer(e,4,R.dtype,!1,0,0),m.type=R.dtype,m.size=4,m.buffer=R,m.normalized=!1,m.offset=0,m.stride=0;e=xa.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==G.dtype||4!==m.size||m.buffer!==G||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,G.buffer),ba.vertexAttribPointer(e,4,G.dtype,!1,0,0),m.type=G.dtype,m.size=4,m.buffer=G,
m.normalized=!1,m.offset=0,m.stride=0;e=zc.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==x.dtype||4!==m.size||m.buffer!==x||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,x.buffer),ba.vertexAttribPointer(e,4,x.dtype,!1,0,0),m.type=x.dtype,m.size=4,m.buffer=x,m.normalized=!1,m.offset=0,m.stride=0;e=Hb.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==D.dtype||4!==m.size||m.buffer!==D||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,
D.buffer),ba.vertexAttribPointer(e,4,D.dtype,!1,0,0),m.type=D.dtype,m.size=4,m.buffer=D,m.normalized=!1,m.offset=0,m.stride=0;e=Y.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==ha.dtype||4!==m.size||m.buffer!==ha||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,ha.buffer),ba.vertexAttribPointer(e,4,ha.dtype,!1,0,0),m.type=ha.dtype,m.size=4,m.buffer=ha,m.normalized=!1,m.offset=0,m.stride=0;e=L.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==
w.dtype||4!==m.size||m.buffer!==w||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,w.buffer),ba.vertexAttribPointer(e,4,w.dtype,!1,0,0),m.type=w.dtype,m.size=4,m.buffer=w,m.normalized=!1,m.offset=0,m.stride=0;e=wa.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==Q.dtype||4!==m.size||m.buffer!==Q||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,Q.buffer),ba.vertexAttribPointer(e,4,Q.dtype,!1,0,0),m.type=Q.dtype,m.size=4,m.buffer=Q,m.normalized=
!1,m.offset=0,m.stride=0;e=ca.location;m=ga[e];m.buffer||ba.enableVertexAttribArray(e);if(m.type!==q.dtype||4!==m.size||m.buffer!==q||!1!==m.normalized||0!==m.offset||0!==m.stride)ba.bindBuffer(34962,q.buffer),ba.vertexAttribPointer(e,4,q.dtype,!1,0,0),m.type=q.dtype,m.size=4,m.buffer=q,m.normalized=!1,m.offset=0,m.stride=0;e=d.dim0A;ba.uniformMatrix4fv(O.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Lc[0]=e[0],Lc[1]=e[1],Lc[2]=e[2],Lc[3]=e[3],Lc[4]=e[4],Lc[5]=e[5],Lc[6]=e[6],Lc[7]=e[7],
Lc[8]=e[8],Lc[9]=e[9],Lc[10]=e[10],Lc[11]=e[11],Lc[12]=e[12],Lc[13]=e[13],Lc[14]=e[14],Lc[15]=e[15],Lc));e=d.dim1A;ba.uniformMatrix4fv(M.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(od[0]=e[0],od[1]=e[1],od[2]=e[2],od[3]=e[3],od[4]=e[4],od[5]=e[5],od[6]=e[6],od[7]=e[7],od[8]=e[8],od[9]=e[9],od[10]=e[10],od[11]=e[11],od[12]=e[12],od[13]=e[13],od[14]=e[14],od[15]=e[15],od));e=d.dim0B;ba.uniformMatrix4fv(J.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ec[0]=e[0],Ec[1]=e[1],
Ec[2]=e[2],Ec[3]=e[3],Ec[4]=e[4],Ec[5]=e[5],Ec[6]=e[6],Ec[7]=e[7],Ec[8]=e[8],Ec[9]=e[9],Ec[10]=e[10],Ec[11]=e[11],Ec[12]=e[12],Ec[13]=e[13],Ec[14]=e[14],Ec[15]=e[15],Ec));e=d.dim1B;ba.uniformMatrix4fv(qa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(fd[0]=e[0],fd[1]=e[1],fd[2]=e[2],fd[3]=e[3],fd[4]=e[4],fd[5]=e[5],fd[6]=e[6],fd[7]=e[7],fd[8]=e[8],fd[9]=e[9],fd[10]=e[10],fd[11]=e[11],fd[12]=e[12],fd[13]=e[13],fd[14]=e[14],fd[15]=e[15],fd));e=d.dim0C;ba.uniformMatrix4fv(u.location,!1,Array.isArray(e)||
e instanceof Float32Array?e:(Pc[0]=e[0],Pc[1]=e[1],Pc[2]=e[2],Pc[3]=e[3],Pc[4]=e[4],Pc[5]=e[5],Pc[6]=e[6],Pc[7]=e[7],Pc[8]=e[8],Pc[9]=e[9],Pc[10]=e[10],Pc[11]=e[11],Pc[12]=e[12],Pc[13]=e[13],Pc[14]=e[14],Pc[15]=e[15],Pc));e=d.dim1C;ba.uniformMatrix4fv(oa.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Ic[0]=e[0],Ic[1]=e[1],Ic[2]=e[2],Ic[3]=e[3],Ic[4]=e[4],Ic[5]=e[5],Ic[6]=e[6],Ic[7]=e[7],Ic[8]=e[8],Ic[9]=e[9],Ic[10]=e[10],Ic[11]=e[11],Ic[12]=e[12],Ic[13]=e[13],Ic[14]=e[14],Ic[15]=e[15],
Ic));e=d.dim0D;ba.uniformMatrix4fv(K.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Bb[0]=e[0],Bb[1]=e[1],Bb[2]=e[2],Bb[3]=e[3],Bb[4]=e[4],Bb[5]=e[5],Bb[6]=e[6],Bb[7]=e[7],Bb[8]=e[8],Bb[9]=e[9],Bb[10]=e[10],Bb[11]=e[11],Bb[12]=e[12],Bb[13]=e[13],Bb[14]=e[14],Bb[15]=e[15],Bb));e=d.dim1D;ba.uniformMatrix4fv(z.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fb[0]=e[0],Fb[1]=e[1],Fb[2]=e[2],Fb[3]=e[3],Fb[4]=e[4],Fb[5]=e[5],Fb[6]=e[6],Fb[7]=e[7],Fb[8]=e[8],Fb[9]=e[9],Fb[10]=e[10],
Fb[11]=e[11],Fb[12]=e[12],Fb[13]=e[13],Fb[14]=e[14],Fb[15]=e[15],Fb));e=d.loA;ba.uniformMatrix4fv(Da.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(sc[0]=e[0],sc[1]=e[1],sc[2]=e[2],sc[3]=e[3],sc[4]=e[4],sc[5]=e[5],sc[6]=e[6],sc[7]=e[7],sc[8]=e[8],sc[9]=e[9],sc[10]=e[10],sc[11]=e[11],sc[12]=e[12],sc[13]=e[13],sc[14]=e[14],sc[15]=e[15],sc));e=d.hiA;ba.uniformMatrix4fv(da.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(yb[0]=e[0],yb[1]=e[1],yb[2]=e[2],yb[3]=e[3],yb[4]=e[4],yb[5]=
e[5],yb[6]=e[6],yb[7]=e[7],yb[8]=e[8],yb[9]=e[9],yb[10]=e[10],yb[11]=e[11],yb[12]=e[12],yb[13]=e[13],yb[14]=e[14],yb[15]=e[15],yb));e=d.loB;ba.uniformMatrix4fv(za.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(wc[0]=e[0],wc[1]=e[1],wc[2]=e[2],wc[3]=e[3],wc[4]=e[4],wc[5]=e[5],wc[6]=e[6],wc[7]=e[7],wc[8]=e[8],wc[9]=e[9],wc[10]=e[10],wc[11]=e[11],wc[12]=e[12],wc[13]=e[13],wc[14]=e[14],wc[15]=e[15],wc));e=d.hiB;ba.uniformMatrix4fv(W.location,!1,Array.isArray(e)||e instanceof Float32Array?
e:(Cb[0]=e[0],Cb[1]=e[1],Cb[2]=e[2],Cb[3]=e[3],Cb[4]=e[4],Cb[5]=e[5],Cb[6]=e[6],Cb[7]=e[7],Cb[8]=e[8],Cb[9]=e[9],Cb[10]=e[10],Cb[11]=e[11],Cb[12]=e[12],Cb[13]=e[13],Cb[14]=e[14],Cb[15]=e[15],Cb));e=d.loC;ba.uniformMatrix4fv(ea.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Jc[0]=e[0],Jc[1]=e[1],Jc[2]=e[2],Jc[3]=e[3],Jc[4]=e[4],Jc[5]=e[5],Jc[6]=e[6],Jc[7]=e[7],Jc[8]=e[8],Jc[9]=e[9],Jc[10]=e[10],Jc[11]=e[11],Jc[12]=e[12],Jc[13]=e[13],Jc[14]=e[14],Jc[15]=e[15],Jc));e=d.hiC;ba.uniformMatrix4fv(la.location,
!1,Array.isArray(e)||e instanceof Float32Array?e:(kc[0]=e[0],kc[1]=e[1],kc[2]=e[2],kc[3]=e[3],kc[4]=e[4],kc[5]=e[5],kc[6]=e[6],kc[7]=e[7],kc[8]=e[8],kc[9]=e[9],kc[10]=e[10],kc[11]=e[11],kc[12]=e[12],kc[13]=e[13],kc[14]=e[14],kc[15]=e[15],kc));e=d.loD;ba.uniformMatrix4fv(Ea.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(Fc[0]=e[0],Fc[1]=e[1],Fc[2]=e[2],Fc[3]=e[3],Fc[4]=e[4],Fc[5]=e[5],Fc[6]=e[6],Fc[7]=e[7],Fc[8]=e[8],Fc[9]=e[9],Fc[10]=e[10],Fc[11]=e[11],Fc[12]=e[12],Fc[13]=e[13],Fc[14]=
e[14],Fc[15]=e[15],Fc));e=d.hiD;ba.uniformMatrix4fv(ta.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(gd[0]=e[0],gd[1]=e[1],gd[2]=e[2],gd[3]=e[3],gd[4]=e[4],gd[5]=e[5],gd[6]=e[6],gd[7]=e[7],gd[8]=e[8],gd[9]=e[9],gd[10]=e[10],gd[11]=e[11],gd[12]=e[12],gd[13]=e[13],gd[14]=e[14],gd[15]=e[15],gd));e=d.resolution;ba.uniform2f(sa.location,e[0],e[1]);e=d.viewBoxPos;ba.uniform2f(ya.location,e[0],e[1]);e=d.viewBoxSize;ba.uniform2f(Fa.location,e[0],e[1]);ba.uniform1f(ja.location,d.maskHeight);ba.uniform1f(H.location,
d.drwLayer);e=d.contextColor;ba.uniform4f(S.location,e[0],e[1],e[2],e[3]);(e=d.maskTexture)&&"framebuffer"===e._reglType&&(e=e.color[0]);e=e._texture;ba.uniform1i(pa.location,e.bind());ba.uniform1i(Ha.location,N.bind());(m=Ka.elements)?ba.bindBuffer(34963,m.buffer.buffer):P.currentVAO&&(m=Ga.getElements(P.currentVAO.elements))&&ba.bindBuffer(34963,m.buffer.buffer);B=d.offset;if(d=d.count)m?ba.drawElements(1,d,m.type,B<<(m.type-5121>>1)):ba.drawArrays(1,B,d),ua.dirty=!0,P.setVAO(null),Z.viewportWidth=
h,Z.viewportHeight=r,ua.profile=b,e.unbind(),N.unbind()},scope:function(k,b,z){var A,t,u,L,aa,na,B,wa,Ra,Ha,H,O,W,Tb,J,ea,sa,Y,S,ga,M,va,K,da,ya,Fa,ba,qa,za,N,ta,ja,V,Ya,ca,Aa,xa,pa,Ea,oa,la,Hb,Da,zc,Ga,hb,Ba,P,fb,cc,Fb,Pc,Bb,dc,nc,yb,Cb,$d,Ce,lc,Xd,oc,cb,ab,Va,Gc,vc,Qe,Ic,kc,pb,Ec,se,fd,Fd,Lc,sc,zb,wc,qe,od,Fc,Dc,Jc,Qd,md,ze,Nd,Nb,Cd,Tc,Ye,Xc,gd,de,yd,Be,Wd,fa,ge,Ca,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,
Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Pe,Fe,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=k.viewportHeight;bd.width=k.viewportWidth;bd.x=k.viewportX;bd.y=k.viewportY;
A=bd.x|0;t=bd.y|0;u="width"in bd?bd.width|0:Z.framebufferWidth-A;L="height"in bd?bd.height|0:Z.framebufferHeight-t;aa=Z.viewportWidth;Z.viewportWidth=u;na=Z.viewportHeight;Z.viewportHeight=L;B=zd[0];zd[0]=A;wa=zd[1];zd[1]=t;Ra=zd[2];zd[2]=u;Ha=zd[3];zd[3]=L;H=Sb[0];Sb[0]=0;O=Sb[1];Sb[1]=0;W=Sb[2];Sb[2]=0;Tb=Sb[3];Sb[3]=0;J=xd.blend_enable;xd.blend_enable=!1;ea=Ed[0];Ed[0]=32774;sa=Ed[1];Ed[1]=32774;Y=Md[0];Md[0]=770;S=Md[1];Md[1]=771;ga=Md[2];Md[2]=1;M=Md[3];Md[3]=1;va=xd.cull_enable;xd.cull_enable=
!0;K=xd.cull_face;xd.cull_face=1029;da=xd.depth_enable;xd.depth_enable=!0;ya=xd.depth_func;xd.depth_func=513;Fa=xd.depth_mask;xd.depth_mask=!0;ba=oe[0];oe[0]=0;qa=oe[1];oe[1]=1;za=xd.dither;xd.dither=!1;N=xd.lineWidth;xd.lineWidth=2;pd.height=k.scissorHeight;pd.width=k.scissorWidth;pd.x=k.scissorX;pd.y=k.scissorY;ta=pd.x|0;ja=pd.y|0;V="width"in pd?pd.width|0:Z.framebufferWidth-ta;Ya="height"in pd?pd.height|0:Z.framebufferHeight-ja;ca=Ze[0];Ze[0]=ta;Aa=Ze[1];Ze[1]=ja;xa=Ze[2];Ze[2]=V;pa=Ze[3];Ze[3]=
Ya;Ea=xd.scissor_enable;xd.scissor_enable=!0;oa=ua.profile;ua.profile=!1;la=k.offset;Hb=Ka.offset;Ka.offset=la;Da=k.count;zc=Ka.count;Ka.count=Da;Ga=Ka.primitive;Ka.primitive=1;hb=k.contextColor;Ba=Ia[24];Ia[24]=hb;P=k.dim0A;fb=Ia[3];Ia[3]=P;cc=k.dim0B;Fb=Ia[5];Ia[5]=cc;Pc=k.dim0C;Bb=Ia[7];Ia[7]=Pc;dc=k.dim0D;nc=Ia[9];Ia[9]=dc;yb=k.dim1A;Cb=Ia[4];Ia[4]=yb;$d=k.dim1B;Ce=Ia[6];Ia[6]=$d;lc=k.dim1C;Xd=Ia[8];Ia[8]=lc;oc=k.dim1D;cb=Ia[10];Ia[10]=oc;ab=k.drwLayer;Va=Ia[23];Ia[23]=ab;Gc=k.hiA;vc=Ia[12];Ia[12]=
Gc;Qe=k.hiB;Ic=Ia[14];Ia[14]=Qe;kc=k.hiC;pb=Ia[16];Ia[16]=kc;Ec=k.hiD;se=Ia[18];Ia[18]=Ec;fd=k.loA;Fd=Ia[11];Ia[11]=fd;Lc=k.loB;sc=Ia[13];Ia[13]=Lc;zb=k.loC;wc=Ia[15];Ia[15]=zb;qe=k.loD;od=Ia[17];Ia[17]=qe;Fc=k.maskHeight;Dc=Ia[22];Ia[22]=Fc;Jc=k.maskTexture;Qd=Ia[25];Ia[25]=Jc;md=Ia[26];Ia[26]=ia;ze=k.resolution;Nd=Ia[19];Ia[19]=ze;Nb=k.viewBoxPos;Cd=Ia[20];Ia[20]=Nb;Tc=k.viewBoxSize;Ye=Ia[21];Ia[21]=Tc;Xc=e.buffer;e.buffer=q;gd=e.divisor;e.divisor=0;de=e.normalized;e.normalized=!1;yd=e.offset;e.offset=
0;Be=e.size;e.size=0;Wd=e.state;e.state=1;fa=e.stride;e.stride=0;ge=e.type;e.type=q.dtype;Ca=e.w;e.w=0;Id=e.x;e.x=0;Gd=e.y;e.y=0;nd=e.z;e.z=0;Vc=r.buffer;r.buffer=c;ud=r.divisor;r.divisor=0;rd=r.normalized;r.normalized=!1;kd=r.offset;r.offset=0;vd=r.size;r.size=0;Bd=r.state;r.state=1;Dd=r.stride;r.stride=0;he=r.type;r.type=c.dtype;ke=r.w;r.w=0;ue=r.x;r.x=0;le=r.y;r.y=0;ie=r.z;r.z=0;fe=T.buffer;T.buffer=l;ve=T.divisor;T.divisor=0;be=T.normalized;T.normalized=!1;me=T.offset;T.offset=0;Oc=T.size;T.size=
0;hd=T.state;T.state=1;we=T.stride;T.stride=0;pe=T.type;T.type=l.dtype;Kd=T.w;T.w=0;Pd=T.x;T.x=0;Rd=T.y;T.y=0;Sd=T.z;T.z=0;ne=m.buffer;m.buffer=a;Ae=m.divisor;m.divisor=0;De=m.normalized;m.normalized=!1;re=m.offset;m.offset=0;Re=m.size;m.size=0;Se=m.state;m.state=1;Ne=m.stride;m.stride=0;xe=m.type;m.type=a.dtype;Ge=m.w;m.w=0;Ie=m.x;m.x=0;Je=m.y;m.y=0;Ke=m.z;m.z=0;He=X.buffer;X.buffer=f;Ld=X.divisor;X.divisor=0;Vd=X.normalized;X.normalized=!1;ae=X.offset;X.offset=0;ce=X.size;X.size=0;Le=X.state;X.state=
1;Hd=X.stride;X.stride=0;Td=X.type;X.type=f.dtype;Ee=X.w;X.w=0;Me=X.x;X.x=0;cf=X.y;X.y=0;af=X.z;X.z=0;Te=E.buffer;E.buffer=g;Oe=E.divisor;E.divisor=0;$e=E.normalized;E.normalized=!1;Xe=E.offset;E.offset=0;Ue=E.size;E.size=0;Ve=E.state;E.state=1;Ud=E.stride;E.stride=0;Zd=E.type;E.type=g.dtype;We=E.w;E.w=0;jf=E.x;E.x=0;nf=E.y;E.y=0;ff=E.z;E.z=0;kf=y.buffer;y.buffer=n;lf=y.divisor;y.divisor=0;mf=y.normalized;y.normalized=!1;rf=y.offset;y.offset=0;of=y.size;y.size=0;sf=y.state;y.state=1;Bf=y.stride;y.stride=
0;Cf=y.type;y.type=n.dtype;Pe=y.w;y.w=0;Fe=y.x;y.x=0;pf=y.y;y.y=0;qf=y.z;y.z=0;Df=ra.buffer;ra.buffer=p;Hf=ra.divisor;ra.divisor=0;Af=ra.normalized;ra.normalized=!1;Ef=ra.offset;ra.offset=0;Ff=ra.size;ra.size=0;wf=ra.state;ra.state=1;xf=ra.stride;ra.stride=0;vf=ra.type;ra.type=p.dtype;yf=ra.w;ra.w=0;zf=ra.x;ra.x=0;Jf=ra.y;ra.y=0;Kf=ra.z;ra.z=0;Lf=I.buffer;I.buffer=v;Mf=I.divisor;I.divisor=0;tf=I.normalized;I.normalized=!1;Rf=I.offset;I.offset=0;If=I.size;I.size=0;uf=I.state;I.state=1;dg=I.stride;
I.stride=0;Sf=I.type;I.type=v.dtype;Tf=I.w;I.w=0;qg=I.x;I.x=0;gf=I.y;I.y=0;df=I.z;I.z=0;Nf=C.buffer;C.buffer=R;Of=C.divisor;C.divisor=0;eg=C.normalized;C.normalized=!1;fg=C.offset;C.offset=0;gg=C.size;C.size=0;hg=C.state;C.state=1;ig=C.stride;C.stride=0;Wf=C.type;C.type=R.dtype;Uf=C.w;C.w=0;Xf=C.x;C.x=0;Yf=C.y;C.y=0;Zf=C.z;C.z=0;jg=h.buffer;h.buffer=G;rg=h.divisor;h.divisor=0;sg=h.normalized;h.normalized=!1;tg=h.offset;h.offset=0;ug=h.size;h.size=0;vg=h.state;h.state=1;wg=h.stride;h.stride=0;xg=h.type;
h.type=G.dtype;yg=h.w;h.w=0;zg=h.x;h.x=0;Ag=h.y;h.y=0;Bg=h.z;h.z=0;hf=U.buffer;U.buffer=x;ef=U.divisor;U.divisor=0;Pf=U.normalized;U.normalized=!1;Qf=U.offset;U.offset=0;kg=U.size;U.size=0;lg=U.state;U.state=1;mg=U.stride;U.stride=0;ng=U.type;U.type=x.dtype;og=U.w;U.w=0;$f=U.x;U.x=0;Vf=U.y;U.y=0;ag=U.z;U.z=0;bg=d.buffer;d.buffer=D;cg=d.divisor;d.divisor=0;pg=d.normalized;d.normalized=!1;Cg=d.offset;d.offset=0;Dg=d.size;d.size=0;Eg=d.state;d.state=1;Fg=d.stride;d.stride=0;Gg=d.type;d.type=D.dtype;
Hg=d.w;d.w=0;Ig=d.x;d.x=0;Jg=d.y;d.y=0;Kg=d.z;d.z=0;Lg=ka.buffer;ka.buffer=ha;Mg=ka.divisor;ka.divisor=0;Ng=ka.normalized;ka.normalized=!1;Og=ka.offset;ka.offset=0;Pg=ka.size;ka.size=0;Qg=ka.state;ka.state=1;Rg=ka.stride;ka.stride=0;Sg=ka.type;ka.type=ha.dtype;Tg=ka.w;ka.w=0;Ug=ka.x;ka.x=0;Vg=ka.y;ka.y=0;Wg=ka.z;ka.z=0;Xg=F.buffer;F.buffer=w;Yg=F.divisor;F.divisor=0;Zg=F.normalized;F.normalized=!1;$g=F.offset;F.offset=0;ah=F.size;F.size=0;bh=F.state;F.state=1;ch=F.stride;F.stride=0;dh=F.type;F.type=
w.dtype;eh=F.w;F.w=0;fh=F.x;F.x=0;gh=F.y;F.y=0;hh=F.z;F.z=0;ih=ma.buffer;ma.buffer=Q;jh=ma.divisor;ma.divisor=0;kh=ma.normalized;ma.normalized=!1;lh=ma.offset;ma.offset=0;mh=ma.size;ma.size=0;nh=ma.state;ma.state=1;oh=ma.stride;ma.stride=0;ph=ma.type;ma.type=Q.dtype;qh=ma.w;ma.w=0;rh=ma.x;ma.x=0;sh=ma.y;ma.y=0;th=ma.z;ma.z=0;uh=Gf.vert;Gf.vert=2;vh=Gf.frag;Gf.frag=1;ua.dirty=!0;b(Z,k,z);Z.viewportWidth=aa;Z.viewportHeight=na;zd[0]=B;zd[1]=wa;zd[2]=Ra;zd[3]=Ha;Sb[0]=H;Sb[1]=O;Sb[2]=W;Sb[3]=Tb;xd.blend_enable=
J;Ed[0]=ea;Ed[1]=sa;Md[0]=Y;Md[1]=S;Md[2]=ga;Md[3]=M;xd.cull_enable=va;xd.cull_face=K;xd.depth_enable=da;xd.depth_func=ya;xd.depth_mask=Fa;oe[0]=ba;oe[1]=qa;xd.dither=za;xd.lineWidth=N;Ze[0]=ca;Ze[1]=Aa;Ze[2]=xa;Ze[3]=pa;xd.scissor_enable=Ea;ua.profile=oa;Ka.offset=Hb;Ka.count=zc;Ka.primitive=Ga;Ia[24]=Ba;Ia[3]=fb;Ia[5]=Fb;Ia[7]=Bb;Ia[9]=nc;Ia[4]=Cb;Ia[6]=Ce;Ia[8]=Xd;Ia[10]=cb;Ia[23]=Va;Ia[12]=vc;Ia[14]=Ic;Ia[16]=pb;Ia[18]=se;Ia[11]=Fd;Ia[13]=sc;Ia[15]=wc;Ia[17]=od;Ia[22]=Dc;Ia[25]=Qd;Ia[26]=md;Ia[19]=
Nd;Ia[20]=Cd;Ia[21]=Ye;e.buffer=Xc;e.divisor=gd;e.normalized=de;e.offset=yd;e.size=Be;e.state=Wd;e.stride=fa;e.type=ge;e.w=Ca;e.x=Id;e.y=Gd;e.z=nd;r.buffer=Vc;r.divisor=ud;r.normalized=rd;r.offset=kd;r.size=vd;r.state=Bd;r.stride=Dd;r.type=he;r.w=ke;r.x=ue;r.y=le;r.z=ie;T.buffer=fe;T.divisor=ve;T.normalized=be;T.offset=me;T.size=Oc;T.state=hd;T.stride=we;T.type=pe;T.w=Kd;T.x=Pd;T.y=Rd;T.z=Sd;m.buffer=ne;m.divisor=Ae;m.normalized=De;m.offset=re;m.size=Re;m.state=Se;m.stride=Ne;m.type=xe;m.w=Ge;m.x=
Ie;m.y=Je;m.z=Ke;X.buffer=He;X.divisor=Ld;X.normalized=Vd;X.offset=ae;X.size=ce;X.state=Le;X.stride=Hd;X.type=Td;X.w=Ee;X.x=Me;X.y=cf;X.z=af;E.buffer=Te;E.divisor=Oe;E.normalized=$e;E.offset=Xe;E.size=Ue;E.state=Ve;E.stride=Ud;E.type=Zd;E.w=We;E.x=jf;E.y=nf;E.z=ff;y.buffer=kf;y.divisor=lf;y.normalized=mf;y.offset=rf;y.size=of;y.state=sf;y.stride=Bf;y.type=Cf;y.w=Pe;y.x=Fe;y.y=pf;y.z=qf;ra.buffer=Df;ra.divisor=Hf;ra.normalized=Af;ra.offset=Ef;ra.size=Ff;ra.state=wf;ra.stride=xf;ra.type=vf;ra.w=yf;
ra.x=zf;ra.y=Jf;ra.z=Kf;I.buffer=Lf;I.divisor=Mf;I.normalized=tf;I.offset=Rf;I.size=If;I.state=uf;I.stride=dg;I.type=Sf;I.w=Tf;I.x=qg;I.y=gf;I.z=df;C.buffer=Nf;C.divisor=Of;C.normalized=eg;C.offset=fg;C.size=gg;C.state=hg;C.stride=ig;C.type=Wf;C.w=Uf;C.x=Xf;C.y=Yf;C.z=Zf;h.buffer=jg;h.divisor=rg;h.normalized=sg;h.offset=tg;h.size=ug;h.state=vg;h.stride=wg;h.type=xg;h.w=yg;h.x=zg;h.y=Ag;h.z=Bg;U.buffer=hf;U.divisor=ef;U.normalized=Pf;U.offset=Qf;U.size=kg;U.state=lg;U.stride=mg;U.type=ng;U.w=og;U.x=
$f;U.y=Vf;U.z=ag;d.buffer=bg;d.divisor=cg;d.normalized=pg;d.offset=Cg;d.size=Dg;d.state=Eg;d.stride=Fg;d.type=Gg;d.w=Hg;d.x=Ig;d.y=Jg;d.z=Kg;ka.buffer=Lg;ka.divisor=Mg;ka.normalized=Ng;ka.offset=Og;ka.size=Pg;ka.state=Qg;ka.stride=Rg;ka.type=Sg;ka.w=Tg;ka.x=Ug;ka.y=Vg;ka.z=Wg;F.buffer=Xg;F.divisor=Yg;F.normalized=Zg;F.offset=$g;F.size=ah;F.state=bh;F.stride=ch;F.type=dh;F.w=eh;F.x=fh;F.y=gh;F.z=hh;ma.buffer=ih;ma.divisor=jh;ma.normalized=kh;ma.offset=lh;ma.size=mh;ma.state=nh;ma.stride=oh;ma.type=
ph;ma.w=qh;ma.x=rh;ma.y=sh;ma.z=th;Gf.vert=uh;Gf.frag=vh;ua.dirty=!0}}},$1:function(b,B){var k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h;k=b.attributes;c=b.current;l=b.framebuffer;a=b.gl;f=b.next;g=b.vao;n=f.blend_color;p=c.blend_color;v=f.blend_equation;R=c.blend_equation;G=f.blend_func;x=c.blend_func;D=f.colorMask;ha=c.colorMask;w=f.depth_range;Q=c.depth_range;q=f.polygonOffset_offset;N=c.polygonOffset_offset;ia=f.sample_coverage;e=c.sample_coverage;r=f.scissor_box;T=c.scissor_box;
m=f.stencil_func;X=c.stencil_func;E=f.stencil_opBack;y=c.stencil_opBack;ra=f.stencil_opFront;I=c.stencil_opFront;C=f.viewport;h=c.viewport;return{poll:function(){var k,d,g,b,B,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta;c.dirty=!1;d=f.blend_enable;g=f.cull_enable;b=f.depth_enable;B=f.dither;Ba=f.polygonOffset_enable;V=f.sample_alpha;ca=f.sample_enable;S=f.scissor_enable;O=f.stencil_enable;J=f.cull_face;u=c.cull_face;K=f.depth_func;M=c.depth_func;qa=f.depth_mask;oa=c.depth_mask;z=f.frontFace;H=c.frontFace;
da=f.lineWidth;W=c.lineWidth;la=f.stencil_mask;ta=c.stencil_mask;k=l.next;k!==l.cur&&(k?a.bindFramebuffer(36160,k.framebuffer):a.bindFramebuffer(36160,null),l.cur=k);d!==c.blend_enable&&(d?a.enable(3042):a.disable(3042),c.blend_enable=d);g!==c.cull_enable&&(g?a.enable(2884):a.disable(2884),c.cull_enable=g);b!==c.depth_enable&&(b?a.enable(2929):a.disable(2929),c.depth_enable=b);B!==c.dither&&(B?a.enable(3024):a.disable(3024),c.dither=B);Ba!==c.polygonOffset_enable&&(Ba?a.enable(32823):a.disable(32823),
c.polygonOffset_enable=Ba);V!==c.sample_alpha&&(V?a.enable(32926):a.disable(32926),c.sample_alpha=V);ca!==c.sample_enable&&(ca?a.enable(32928):a.disable(32928),c.sample_enable=ca);S!==c.scissor_enable&&(S?a.enable(3089):a.disable(3089),c.scissor_enable=S);O!==c.stencil_enable&&(O?a.enable(2960):a.disable(2960),c.stencil_enable=O);if(n[0]!==p[0]||n[1]!==p[1]||n[2]!==p[2]||n[3]!==p[3])a.blendColor(n[0],n[1],n[2],n[3]),p[0]=n[0],p[1]=n[1],p[2]=n[2],p[3]=n[3];if(v[0]!==R[0]||v[1]!==R[1])a.blendEquationSeparate(v[0],
v[1]),R[0]=v[0],R[1]=v[1];if(G[0]!==x[0]||G[1]!==x[1]||G[2]!==x[2]||G[3]!==x[3])a.blendFuncSeparate(G[0],G[1],G[2],G[3]),x[0]=G[0],x[1]=G[1],x[2]=G[2],x[3]=G[3];if(D[0]!==ha[0]||D[1]!==ha[1]||D[2]!==ha[2]||D[3]!==ha[3])a.colorMask(D[0],D[1],D[2],D[3]),ha[0]=D[0],ha[1]=D[1],ha[2]=D[2],ha[3]=D[3];J!==u&&(a.cullFace(J),c.cull_face=J);K!==M&&(a.depthFunc(K),c.depth_func=K);qa!==oa&&(a.depthMask(qa),c.depth_mask=qa);if(w[0]!==Q[0]||w[1]!==Q[1])a.depthRange(w[0],w[1]),Q[0]=w[0],Q[1]=w[1];z!==H&&(a.frontFace(z),
c.frontFace=z);da!==W&&(a.lineWidth(da),c.lineWidth=da);if(q[0]!==N[0]||q[1]!==N[1])a.polygonOffset(q[0],q[1]),N[0]=q[0],N[1]=q[1];if(ia[0]!==e[0]||ia[1]!==e[1])a.sampleCoverage(ia[0],ia[1]),e[0]=ia[0],e[1]=ia[1];if(r[0]!==T[0]||r[1]!==T[1]||r[2]!==T[2]||r[3]!==T[3])a.scissor(r[0],r[1],r[2],r[3]),T[0]=r[0],T[1]=r[1],T[2]=r[2],T[3]=r[3];if(m[0]!==X[0]||m[1]!==X[1]||m[2]!==X[2])a.stencilFunc(m[0],m[1],m[2]),X[0]=m[0],X[1]=m[1],X[2]=m[2];la!==ta&&(a.stencilMask(la),c.stencil_mask=la);if(E[0]!==y[0]||
E[1]!==y[1]||E[2]!==y[2]||E[3]!==y[3])a.stencilOpSeparate(E[0],E[1],E[2],E[3]),y[0]=E[0],y[1]=E[1],y[2]=E[2],y[3]=E[3];if(ra[0]!==I[0]||ra[1]!==I[1]||ra[2]!==I[2]||ra[3]!==I[3])a.stencilOpSeparate(ra[0],ra[1],ra[2],ra[3]),I[0]=ra[0],I[1]=ra[1],I[2]=ra[2],I[3]=ra[3];if(C[0]!==h[0]||C[1]!==h[1]||C[2]!==h[2]||C[3]!==h[3])a.viewport(C[0],C[1],C[2],C[3]),h[0]=C[0],h[1]=C[1],h[2]=C[2],h[3]=C[3]},refresh:function(){var b,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa;c.dirty=!1;d=f.blend_enable;ka=f.cull_enable;F=
f.depth_enable;ma=f.dither;Ba=f.polygonOffset_enable;V=f.sample_alpha;ca=f.sample_enable;S=f.scissor_enable;O=f.stencil_enable;J=f.cull_face;u=f.depth_func;K=f.depth_mask;M=f.frontFace;qa=f.lineWidth;oa=f.stencil_mask;(b=l.next)?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null);l.cur=b;b=k[0];b.buffer?(a.enableVertexAttribArray(0),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(0),a.vertexAttrib4f(0,
b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(0,b.divisor);b=k[1];b.buffer?(a.enableVertexAttribArray(1),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(1),a.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(1,b.divisor);b=k[2];b.buffer?(a.enableVertexAttribArray(2),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(2),
a.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(2,b.divisor);b=k[3];b.buffer?(a.enableVertexAttribArray(3),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(3),a.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(3,b.divisor);b=k[4];b.buffer?(a.enableVertexAttribArray(4),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(4,b.size,b.type,b.normalized,b.stride,
b.offset)):(a.disableVertexAttribArray(4),a.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(4,b.divisor);b=k[5];b.buffer?(a.enableVertexAttribArray(5),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(5),a.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(5,b.divisor);b=k[6];b.buffer?(a.enableVertexAttribArray(6),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(6,
b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(6),a.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(6,b.divisor);b=k[7];b.buffer?(a.enableVertexAttribArray(7),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(7),a.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(7,b.divisor);b=k[8];b.buffer?(a.enableVertexAttribArray(8),a.bindBuffer(34962,
b.buffer.buffer),a.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(8),a.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(8,b.divisor);b=k[9];b.buffer?(a.enableVertexAttribArray(9),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(9),a.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(9,b.divisor);b=k[10];b.buffer?
(a.enableVertexAttribArray(10),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(10),a.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(10,b.divisor);b=k[11];b.buffer?(a.enableVertexAttribArray(11),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(11),a.vertexAttrib4f(11,b.x,b.y,b.z,b.w),b.buffer=null);
B.vertexAttribDivisorANGLE(11,b.divisor);b=k[12];b.buffer?(a.enableVertexAttribArray(12),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(12),a.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(12,b.divisor);b=k[13];b.buffer?(a.enableVertexAttribArray(13),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(13),
a.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(13,b.divisor);b=k[14];b.buffer?(a.enableVertexAttribArray(14),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(a.disableVertexAttribArray(14),a.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(14,b.divisor);b=k[15];b.buffer?(a.enableVertexAttribArray(15),a.bindBuffer(34962,b.buffer.buffer),a.vertexAttribPointer(15,b.size,b.type,b.normalized,
b.stride,b.offset)):(a.disableVertexAttribArray(15),a.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);B.vertexAttribDivisorANGLE(15,b.divisor);g.currentVAO=null;g.setVAO(g.targetVAO);d?a.enable(3042):a.disable(3042);c.blend_enable=d;ka?a.enable(2884):a.disable(2884);c.cull_enable=ka;F?a.enable(2929):a.disable(2929);c.depth_enable=F;ma?a.enable(3024):a.disable(3024);c.dither=ma;Ba?a.enable(32823):a.disable(32823);c.polygonOffset_enable=Ba;V?a.enable(32926):a.disable(32926);c.sample_alpha=V;ca?a.enable(32928):
a.disable(32928);c.sample_enable=ca;S?a.enable(3089):a.disable(3089);c.scissor_enable=S;O?a.enable(2960):a.disable(2960);c.stencil_enable=O;a.blendColor(n[0],n[1],n[2],n[3]);p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];a.blendEquationSeparate(v[0],v[1]);R[0]=v[0];R[1]=v[1];a.blendFuncSeparate(G[0],G[1],G[2],G[3]);x[0]=G[0];x[1]=G[1];x[2]=G[2];x[3]=G[3];a.colorMask(D[0],D[1],D[2],D[3]);ha[0]=D[0];ha[1]=D[1];ha[2]=D[2];ha[3]=D[3];a.cullFace(J);c.cull_face=J;a.depthFunc(u);c.depth_func=u;a.depthMask(K);c.depth_mask=
K;a.depthRange(w[0],w[1]);Q[0]=w[0];Q[1]=w[1];a.frontFace(M);c.frontFace=M;a.lineWidth(qa);c.lineWidth=qa;a.polygonOffset(q[0],q[1]);N[0]=q[0];N[1]=q[1];a.sampleCoverage(ia[0],ia[1]);e[0]=ia[0];e[1]=ia[1];a.scissor(r[0],r[1],r[2],r[3]);T[0]=r[0];T[1]=r[1];T[2]=r[2];T[3]=r[3];a.stencilFunc(m[0],m[1],m[2]);X[0]=m[0];X[1]=m[1];X[2]=m[2];a.stencilMask(oa);c.stencil_mask=oa;a.stencilOpSeparate(E[0],E[1],E[2],E[3]);y[0]=E[0];y[1]=E[1];y[2]=E[2];y[3]=E[3];a.stencilOpSeparate(ra[0],ra[1],ra[2],ra[3]);I[0]=
ra[0];I[1]=ra[1];I[2]=ra[2];I[3]=ra[3];a.viewport(C[0],C[1],C[2],C[3]);h[0]=C[0];h[1]=C[1];h[2]=C[2];h[3]=C[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa){var z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa,ga,Z,ua,Ka,Ga,hb,ba,xd,P,Ia,vc,Sb;
z=b.attributes;H=b.buffer;da=b.context;W=b.current;la=b.draw;ta=b.elements;Da=b.extensions;za=b.framebuffer;ea=b.gl;Ea=b.isBufferArgs;ja=b.next;pa=b.shader;Aa=b.uniforms;Ra=b.vao;na=ja.blend_color;Tb=W.blend_color;Ya=ja.blend_equation;A=W.blend_equation;t=ja.blend_func;aa=W.blend_func;va=ja.colorMask;xa=W.colorMask;zc=ja.depth_range;Hb=W.depth_range;Y=ja.polygonOffset_offset;L=W.polygonOffset_offset;wa=ja.sample_coverage;Ha=W.sample_coverage;sa=ja.scissor_box;ya=W.scissor_box;Fa=ja.stencil_func;ga=
W.stencil_func;Z=ja.stencil_opBack;ua=W.stencil_opBack;Ka=ja.stencil_opFront;Ga=W.stencil_opFront;hb=ja.viewport;ba=W.viewport;xd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};P={};P.buffer=k;P.divisor=1;Ia={};Ia.buffer=c;Ia.divisor=1;vc={};vc.buffer=l;vc.divisor=1;Sb={};Sb.buffer=a;Sb.divisor=1;return{batch:function(a,c){var e,k,b,g,f,m;e=za.next;e!==za.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),za.cur=e);if(W.dirty){var l,
t,na,r,p,w,sa,E,n,q,v,D,N,Q,T,Ya,X,Aa,ha,pa,ia,hb,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd;l=ja.dither;l!==W.dither&&(l?ea.enable(3024):ea.disable(3024),W.dither=l);t=ja.depth_func;t!==W.depth_func&&(ea.depthFunc(t),W.depth_func=t);na=zc[0];r=zc[1];if(na!==Hb[0]||r!==Hb[1])ea.depthRange(na,r),Hb[0]=na,Hb[1]=r;p=ja.depth_mask;p!==W.depth_mask&&(ea.depthMask(p),W.depth_mask=p);w=va[0];sa=va[1];E=va[2];n=va[3];if(w!==xa[0]||sa!==xa[1]||E!==xa[2]||n!==xa[3])ea.colorMask(w,sa,E,n),xa[0]=w,xa[1]=sa,xa[2]=E,xa[3]=
n;q=ja.cull_enable;q!==W.cull_enable&&(q?ea.enable(2884):ea.disable(2884),W.cull_enable=q);v=ja.cull_face;v!==W.cull_face&&(ea.cullFace(v),W.cull_face=v);D=ja.frontFace;D!==W.frontFace&&(ea.frontFace(D),W.frontFace=D);N=ja.lineWidth;N!==W.lineWidth&&(ea.lineWidth(N),W.lineWidth=N);Q=ja.polygonOffset_enable;Q!==W.polygonOffset_enable&&(Q?ea.enable(32823):ea.disable(32823),W.polygonOffset_enable=Q);T=Y[0];Ya=Y[1];if(T!==L[0]||Ya!==L[1])ea.polygonOffset(T,Ya),L[0]=T,L[1]=Ya;X=ja.sample_alpha;X!==W.sample_alpha&&
(X?ea.enable(32926):ea.disable(32926),W.sample_alpha=X);Aa=ja.sample_enable;Aa!==W.sample_enable&&(Aa?ea.enable(32928):ea.disable(32928),W.sample_enable=Aa);ha=wa[0];pa=wa[1];if(ha!==Ha[0]||pa!==Ha[1])ea.sampleCoverage(ha,pa),Ha[0]=ha,Ha[1]=pa;ia=ja.stencil_enable;ia!==W.stencil_enable&&(ia?ea.enable(2960):ea.disable(2960),W.stencil_enable=ia);hb=ja.stencil_mask;hb!==W.stencil_mask&&(ea.stencilMask(hb),W.stencil_mask=hb);Ic=Fa[0];Bb=Fa[1];Fb=Fa[2];if(Ic!==ga[0]||Bb!==ga[1]||Fb!==ga[2])ea.stencilFunc(Ic,
Bb,Fb),ga[0]=Ic,ga[1]=Bb,ga[2]=Fb;sc=Ka[0];yb=Ka[1];wc=Ka[2];Cb=Ka[3];if(sc!==Ga[0]||yb!==Ga[1]||wc!==Ga[2]||Cb!==Ga[3])ea.stencilOpSeparate(sc,yb,wc,Cb),Ga[0]=sc,Ga[1]=yb,Ga[2]=wc,Ga[3]=Cb;Jc=Z[0];kc=Z[1];Fc=Z[2];gd=Z[3];if(Jc!==ua[0]||kc!==ua[1]||Fc!==ua[2]||gd!==ua[3])ea.stencilOpSeparate(Jc,kc,Fc,gd),ua[0]=Jc,ua[1]=kc,ua[2]=Fc,ua[3]=gd}ea.blendColor(0,0,0,0);Tb[0]=0;Tb[1]=0;Tb[2]=0;Tb[3]=0;ea.enable(3042);W.blend_enable=!0;ea.blendEquationSeparate(32774,32774);A[0]=32774;A[1]=32774;ea.blendFuncSeparate(770,
771,773,1);aa[0]=770;aa[1]=771;aa[2]=773;aa[3]=1;ea.disable(2929);W.depth_enable=!1;ea.enable(3089);W.scissor_enable=!0;if(k=W.profile)b=performance.now(),B.count+=c;ea.useProgram(y.program);g=Da.angle_instanced_arrays;var Xc,Dc,cc,Gc,nc,oc,lc,dc;Ra.setVAO(null);Xc=ma.location;Dc=z[Xc];Dc.buffer||ea.enableVertexAttribArray(Xc);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==R||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)ea.bindBuffer(34962,R.buffer),ea.vertexAttribPointer(Xc,2,5126,!1,24,0),Dc.type=
5126,Dc.size=2,Dc.buffer=R,Dc.normalized=!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(g.vertexAttribDivisorANGLE(Xc,0),Dc.divisor=0);cc=V.location;Gc=z[cc];Gc.buffer||ea.enableVertexAttribArray(cc);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==G||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)ea.bindBuffer(34962,G.buffer),ea.vertexAttribPointer(cc,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=G,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(g.vertexAttribDivisorANGLE(cc,0),Gc.divisor=
0);nc=d.location;oc=z[nc];oc.buffer||ea.enableVertexAttribArray(nc);if(5126!==oc.type||2!==oc.size||oc.buffer!==x||!1!==oc.normalized||16!==oc.offset||24!==oc.stride)ea.bindBuffer(34962,x.buffer),ea.vertexAttribPointer(nc,2,5126,!1,24,16),oc.type=5126,oc.size=2,oc.buffer=x,oc.normalized=!1,oc.offset=16,oc.stride=24;0!==oc.divisor&&(g.vertexAttribDivisorANGLE(nc,0),oc.divisor=0);(lc=la.elements)?ea.bindBuffer(34963,lc.buffer.buffer):Ra.currentVAO&&(lc=ta.getElements(Ra.currentVAO.elements))&&ea.bindBuffer(34963,
lc.buffer.buffer);dc=la.offset;for(f=0;f<c;++f){m=a[f];var fb,Tc,zb,cb,Nb,ab,pb,Va,fa,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,Ca,Od,ee,ye,Yd,Id,Gd,nd,Vc;fb=m.viewport;Tc=fb.x|0;zb=fb.y|0;cb="width"in fb?fb.width|0:da.framebufferWidth-Tc;Nb="height"in
fb?fb.height|0:da.framebufferHeight-zb;ab=da.viewportWidth;da.viewportWidth=cb;pb=da.viewportHeight;da.viewportHeight=Nb;ea.viewport(Tc,zb,cb,Nb);ba[0]=Tc;ba[1]=zb;ba[2]=cb;ba[3]=Nb;Va=m.viewport;fa=Va.x|0;Ib=Va.y|0;Jb="width"in Va?Va.width|0:da.framebufferWidth-fa;pc="height"in Va?Va.height|0:da.framebufferHeight-Ib;ea.scissor(fa,Ib,Jb,pc);ya[0]=fa;ya[1]=Ib;ya[2]=Jb;ya[3]=pc;Ob=ra.call(this,da,m,f);vc.offset=Ob;kb=!1;Gb=null;Db=0;xb=!1;Zb=ib=0;Pb=1;mb=0;Ta=5126;jb=hc=qb=Vb=0;Ea(vc)?(kb=!0,Gb=H.createStream(34962,
vc),Ta=Gb.dtype):(Gb=H.getBuffer(vc))?Ta=Gb.dtype:"constant"in vc?(Pb=2,"number"===typeof vc.constant?(qb=vc.constant,hc=jb=Vb=0):(qb=0<vc.constant.length?vc.constant[0]:0,hc=1<vc.constant.length?vc.constant[1]:0,jb=2<vc.constant.length?vc.constant[2]:0,Vb=3<vc.constant.length?vc.constant[3]:0)):(Gb=Ea(vc.buffer)?H.createStream(34962,vc.buffer):H.getBuffer(vc.buffer),Ta="type"in vc?xd[vc.type]:Gb.dtype,xb=!!vc.normalized,Zb=vc.size|0,ib=vc.offset|0,mb=vc.stride|0,Db=vc.divisor|0);rb=O.location;Ja=
z[rb];if(1===Pb){Ja.buffer||ea.enableVertexAttribArray(rb);sb=Zb||2;if(Ja.type!==Ta||Ja.size!==sb||Ja.buffer!==Gb||Ja.normalized!==xb||Ja.offset!==ib||Ja.stride!==mb)ea.bindBuffer(34962,Gb.buffer),ea.vertexAttribPointer(rb,sb,Ta,xb,mb,ib),Ja.type=Ta,Ja.size=sb,Ja.buffer=Gb,Ja.normalized=xb,Ja.offset=ib,Ja.stride=mb;Ja.divisor!==Db&&(g.vertexAttribDivisorANGLE(rb,Db),Ja.divisor=Db)}else if(Ja.buffer&&(ea.disableVertexAttribArray(rb),Ja.buffer=null),Ja.x!==qb||Ja.y!==hc||Ja.z!==jb||Ja.w!==Vb)ea.vertexAttrib4f(rb,
qb,hc,jb,Vb),Ja.x=qb,Ja.y=hc,Ja.z=jb,Ja.w=Vb;La=I.call(this,da,m,f);Sb.offset=La;eb=!1;gb=null;Ma=0;lb=!1;ub=Wa=0;tb=1;Pa=0;Cc=5126;Na=Eb=Kb=Sa=0;Ea(Sb)?(eb=!0,gb=H.createStream(34962,Sb),Cc=gb.dtype):(gb=H.getBuffer(Sb))?Cc=gb.dtype:"constant"in Sb?(tb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Na=Sa=0):(Kb=0<Sb.constant.length?Sb.constant[0]:0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Na=2<Sb.constant.length?Sb.constant[2]:0,Sa=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Ea(Sb.buffer)?H.createStream(34962,
Sb.buffer):H.getBuffer(Sb.buffer),Cc="type"in Sb?xd[Sb.type]:gb.dtype,lb=!!Sb.normalized,ub=Sb.size|0,Wa=Sb.offset|0,Pa=Sb.stride|0,Ma=Sb.divisor|0);Qc=J.location;Za=z[Qc];if(1===tb){Za.buffer||ea.enableVertexAttribArray(Qc);Lb=ub||2;if(Za.type!==Cc||Za.size!==Lb||Za.buffer!==gb||Za.normalized!==lb||Za.offset!==Wa||Za.stride!==Pa)ea.bindBuffer(34962,gb.buffer),ea.vertexAttribPointer(Qc,Lb,Cc,lb,Pa,Wa),Za.type=Cc,Za.size=Lb,Za.buffer=gb,Za.normalized=lb,Za.offset=Wa,Za.stride=Pa;Za.divisor!==Ma&&(g.vertexAttribDivisorANGLE(Qc,
Ma),Za.divisor=Ma)}else if(Za.buffer&&(ea.disableVertexAttribArray(Qc),Za.buffer=null),Za.x!==Kb||Za.y!==Eb||Za.z!==Na||Za.w!==Sa)ea.vertexAttrib4f(Qc,Kb,Eb,Na,Sa),Za.x=Kb,Za.y=Eb,Za.z=Na,Za.w=Sa;Mb=C.call(this,da,m,f);Ia.offset=Mb;nb=!1;Oa=null;$b=0;Qa=!1;wb=vb=0;Ua=1;ob=0;ec=5126;ic=bb=tc=Ac=0;Ea(Ia)?(nb=!0,Oa=H.createStream(34962,Ia),ec=Oa.dtype):(Oa=H.getBuffer(Ia))?ec=Oa.dtype:"constant"in Ia?(Ua=2,"number"===typeof Ia.constant?(tc=Ia.constant,bb=ic=Ac=0):(tc=0<Ia.constant.length?Ia.constant[0]:
0,bb=1<Ia.constant.length?Ia.constant[1]:0,ic=2<Ia.constant.length?Ia.constant[2]:0,Ac=3<Ia.constant.length?Ia.constant[3]:0)):(Oa=Ea(Ia.buffer)?H.createStream(34962,Ia.buffer):H.getBuffer(Ia.buffer),ec="type"in Ia?xd[Ia.type]:Oa.dtype,Qa=!!Ia.normalized,wb=Ia.size|0,vb=Ia.offset|0,ob=Ia.stride|0,$b=Ia.divisor|0);wd=Ba.location;Xa=z[wd];if(1===Ua){Xa.buffer||ea.enableVertexAttribArray(wd);Mc=wb||4;if(Xa.type!==ec||Xa.size!==Mc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==vb||Xa.stride!==ob)ea.bindBuffer(34962,
Oa.buffer),ea.vertexAttribPointer(wd,Mc,ec,Qa,ob,vb),Xa.type=ec,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=vb,Xa.stride=ob;Xa.divisor!==$b&&(g.vertexAttribDivisorANGLE(wd,$b),Xa.divisor=$b)}else if(Xa.buffer&&(ea.disableVertexAttribArray(wd),Xa.buffer=null),Xa.x!==tc||Xa.y!==bb||Xa.z!==ic||Xa.w!==Ac)ea.vertexAttrib4f(wd,tc,bb,ic,Ac),Xa.x=tc,Xa.y=bb,Xa.z=ic,Xa.w=Ac;Ab=h.call(this,da,m,f);P.offset=Ab;$a=!1;Wb=null;rc=0;Xb=!1;Kc=Qb=0;Rb=1;je=0;Hc=5126;Jd=Yc=Nc=sd=0;Ea(P)?($a=!0,Wb=H.createStream(34962,
P),Hc=Wb.dtype):(Wb=H.getBuffer(P))?Hc=Wb.dtype:"constant"in P?(Rb=2,"number"===typeof P.constant?(Nc=P.constant,Yc=Jd=sd=0):(Nc=0<P.constant.length?P.constant[0]:0,Yc=1<P.constant.length?P.constant[1]:0,Jd=2<P.constant.length?P.constant[2]:0,sd=3<P.constant.length?P.constant[3]:0)):(Wb=Ea(P.buffer)?H.createStream(34962,P.buffer):H.getBuffer(P.buffer),Hc="type"in P?xd[P.type]:Wb.dtype,Xb=!!P.normalized,Kc=P.size|0,Qb=P.offset|0,je=P.stride|0,rc=P.divisor|0);mc=F.location;uc=z[mc];if(1===Rb){uc.buffer||
ea.enableVertexAttribArray(mc);fc=Kc||4;if(uc.type!==Hc||uc.size!==fc||uc.buffer!==Wb||uc.normalized!==Xb||uc.offset!==Qb||uc.stride!==je)ea.bindBuffer(34962,Wb.buffer),ea.vertexAttribPointer(mc,fc,Hc,Xb,je,Qb),uc.type=Hc,uc.size=fc,uc.buffer=Wb,uc.normalized=Xb,uc.offset=Qb,uc.stride=je;uc.divisor!==rc&&(g.vertexAttribDivisorANGLE(mc,rc),uc.divisor=rc)}else if(uc.buffer&&(ea.disableVertexAttribArray(mc),uc.buffer=null),uc.x!==Nc||uc.y!==Yc||uc.z!==Jd||uc.w!==sd)ea.vertexAttrib4f(mc,Nc,Yc,Jd,sd),
uc.x=Nc,uc.y=Yc,uc.z=Jd,uc.w=sd;db=U.call(this,da,m,f);qc=db[0];Yb=db[1];gc=db[2];Bc=db[3];f&&Ub===qc&&bc===Yb&&xc===gc&&cd===Bc||(Ub=qc,bc=Yb,xc=gc,cd=Bc,ea.uniform4f(oa.location,qc,Yb,gc,Bc));Rc=m.lineWidth;f&&Sc===Rc||(Sc=Rc,ea.uniform1f(ca.location,Rc));Uc=m.capSize;f&&Zc===Uc||(Zc=Uc,ea.uniform1f(ka.location,Uc));ld=m.scale;dd=ld[0];jc=ld[1];f&&$c===dd&&ac===jc||($c=dd,ac=jc,ea.uniform2f(u.location,dd,jc));ad=m.scaleFract;Wc=ad[0];yc=ad[1];f&&ed===Wc&&id===yc||(ed=Wc,id=yc,ea.uniform2f(K.location,
Wc,yc));td=m.translate;Ad=td[0];jd=td[1];f&&te===Ad&&Ca===jd||(te=Ad,Ca=jd,ea.uniform2f(M.location,Ad,jd));Od=m.translateFract;ee=Od[0];Yd=Od[1];f&&ye===ee&&Id===Yd||(ye=ee,Id=Yd,ea.uniform2f(qa.location,ee,Yd));Gd=m.opacity;f&&nd===Gd||(nd=Gd,ea.uniform1f(S.location,Gd));Vc=m.count;0<Vc?lc?g.drawElementsInstancedANGLE(4,36,lc.type,dc<<(lc.type-5121>>1),Vc):g.drawArraysInstancedANGLE(4,dc,36,Vc):0>Vc&&(lc?ea.drawElements(4,36,lc.type,dc<<(lc.type-5121>>1)):ea.drawArrays(4,dc,36));da.viewportWidth=
ab;da.viewportHeight=pb;kb&&H.destroyStream(Gb);eb&&H.destroyStream(gb);nb&&H.destroyStream(Oa);$a&&H.destroyStream(Wb)}W.dirty=!0;Ra.setVAO(null);k&&(B.cpuTime+=performance.now()-b)},draw:function(a){var c,h,e,k,b,m,l,t,na,r,y,w,sa,E,I,q,C,N,Q,T,Ya,X,Aa,U,ha,pa,ia,ra,hb,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,fa,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b;c=za.next;c!==za.cur&&
(c?ea.bindFramebuffer(36160,c.framebuffer):ea.bindFramebuffer(36160,null),za.cur=c);if(W.dirty){var Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub;Qa=ja.dither;Qa!==W.dither&&(Qa?ea.enable(3024):ea.disable(3024),W.dither=Qa);vb=ja.depth_func;vb!==W.depth_func&&(ea.depthFunc(vb),W.depth_func=vb);wb=zc[0];Ua=zc[1];if(wb!==Hb[0]||Ua!==Hb[1])ea.depthRange(wb,Ua),Hb[0]=wb,Hb[1]=Ua;ob=ja.depth_mask;ob!==W.depth_mask&&(ea.depthMask(ob),W.depth_mask=ob);
ec=va[0];Ac=va[1];tc=va[2];bb=va[3];if(ec!==xa[0]||Ac!==xa[1]||tc!==xa[2]||bb!==xa[3])ea.colorMask(ec,Ac,tc,bb),xa[0]=ec,xa[1]=Ac,xa[2]=tc,xa[3]=bb;ic=ja.cull_enable;ic!==W.cull_enable&&(ic?ea.enable(2884):ea.disable(2884),W.cull_enable=ic);wd=ja.cull_face;wd!==W.cull_face&&(ea.cullFace(wd),W.cull_face=wd);Xa=ja.frontFace;Xa!==W.frontFace&&(ea.frontFace(Xa),W.frontFace=Xa);Mc=ja.lineWidth;Mc!==W.lineWidth&&(ea.lineWidth(Mc),W.lineWidth=Mc);Ab=ja.polygonOffset_enable;Ab!==W.polygonOffset_enable&&(Ab?
ea.enable(32823):ea.disable(32823),W.polygonOffset_enable=Ab);$a=Y[0];Wb=Y[1];if($a!==L[0]||Wb!==L[1])ea.polygonOffset($a,Wb),L[0]=$a,L[1]=Wb;rc=ja.sample_alpha;rc!==W.sample_alpha&&(rc?ea.enable(32926):ea.disable(32926),W.sample_alpha=rc);Xb=ja.sample_enable;Xb!==W.sample_enable&&(Xb?ea.enable(32928):ea.disable(32928),W.sample_enable=Xb);Qb=wa[0];Kc=wa[1];if(Qb!==Ha[0]||Kc!==Ha[1])ea.sampleCoverage(Qb,Kc),Ha[0]=Qb,Ha[1]=Kc;Rb=ja.stencil_enable;Rb!==W.stencil_enable&&(Rb?ea.enable(2960):ea.disable(2960),
W.stencil_enable=Rb);je=ja.stencil_mask;je!==W.stencil_mask&&(ea.stencilMask(je),W.stencil_mask=je);Hc=Fa[0];sd=Fa[1];Nc=Fa[2];if(Hc!==ga[0]||sd!==ga[1]||Nc!==ga[2])ea.stencilFunc(Hc,sd,Nc),ga[0]=Hc,ga[1]=sd,ga[2]=Nc;Yc=Ka[0];Jd=Ka[1];mc=Ka[2];uc=Ka[3];if(Yc!==Ga[0]||Jd!==Ga[1]||mc!==Ga[2]||uc!==Ga[3])ea.stencilOpSeparate(Yc,Jd,mc,uc),Ga[0]=Yc,Ga[1]=Jd,Ga[2]=mc,Ga[3]=uc;fc=Z[0];db=Z[1];qc=Z[2];Ub=Z[3];if(fc!==ua[0]||db!==ua[1]||qc!==ua[2]||Ub!==ua[3])ea.stencilOpSeparate(fc,db,qc,Ub),ua[0]=fc,ua[1]=
db,ua[2]=qc,ua[3]=Ub}h=a.viewport;e=h.x|0;k=h.y|0;b="width"in h?h.width|0:da.framebufferWidth-e;m="height"in h?h.height|0:da.framebufferHeight-k;l=da.viewportWidth;da.viewportWidth=b;t=da.viewportHeight;da.viewportHeight=m;ea.viewport(e,k,b,m);ba[0]=e;ba[1]=k;ba[2]=b;ba[3]=m;ea.blendColor(0,0,0,0);Tb[0]=0;Tb[1]=0;Tb[2]=0;Tb[3]=0;ea.enable(3042);W.blend_enable=!0;ea.blendEquationSeparate(32774,32774);A[0]=32774;A[1]=32774;ea.blendFuncSeparate(770,771,773,1);aa[0]=770;aa[1]=771;aa[2]=773;aa[3]=1;ea.disable(2929);
W.depth_enable=!1;na=a.viewport;r=na.x|0;y=na.y|0;w="width"in na?na.width|0:da.framebufferWidth-r;sa="height"in na?na.height|0:da.framebufferHeight-y;ea.scissor(r,y,w,sa);ya[0]=r;ya[1]=y;ya[2]=w;ya[3]=sa;ea.enable(3089);W.scissor_enable=!0;if(E=W.profile)I=performance.now(),B.count++;ea.useProgram(f.program);q=Da.angle_instanced_arrays;Ra.setVAO(null);C=g.call(this,da,a,0);vc.offset=C;N=!1;Q=null;T=0;Ya=!1;Aa=X=0;U=1;ha=0;pa=5126;Ic=hb=ra=ia=0;Ea(vc)?(N=!0,Q=H.createStream(34962,vc),pa=Q.dtype):(Q=
H.getBuffer(vc))?pa=Q.dtype:"constant"in vc?(U=2,"number"===typeof vc.constant?(ra=vc.constant,hb=Ic=ia=0):(ra=0<vc.constant.length?vc.constant[0]:0,hb=1<vc.constant.length?vc.constant[1]:0,Ic=2<vc.constant.length?vc.constant[2]:0,ia=3<vc.constant.length?vc.constant[3]:0)):(Q=Ea(vc.buffer)?H.createStream(34962,vc.buffer):H.getBuffer(vc.buffer),pa="type"in vc?xd[vc.type]:Q.dtype,Ya=!!vc.normalized,Aa=vc.size|0,X=vc.offset|0,ha=vc.stride|0,T=vc.divisor|0);Bb=O.location;Fb=z[Bb];if(1===U){Fb.buffer||
ea.enableVertexAttribArray(Bb);sc=Aa||2;if(Fb.type!==pa||Fb.size!==sc||Fb.buffer!==Q||Fb.normalized!==Ya||Fb.offset!==X||Fb.stride!==ha)ea.bindBuffer(34962,Q.buffer),ea.vertexAttribPointer(Bb,sc,pa,Ya,ha,X),Fb.type=pa,Fb.size=sc,Fb.buffer=Q,Fb.normalized=Ya,Fb.offset=X,Fb.stride=ha;Fb.divisor!==T&&(q.vertexAttribDivisorANGLE(Bb,T),Fb.divisor=T)}else if(Fb.buffer&&(ea.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==ra||Fb.y!==hb||Fb.z!==Ic||Fb.w!==ia)ea.vertexAttrib4f(Bb,ra,hb,Ic,ia),Fb.x=ra,Fb.y=
hb,Fb.z=Ic,Fb.w=ia;yb=n.call(this,da,a,0);Sb.offset=yb;wc=!1;Cb=null;Jc=0;kc=!1;gd=Fc=0;Xc=1;Dc=0;cc=5126;lc=oc=nc=Gc=0;Ea(Sb)?(wc=!0,Cb=H.createStream(34962,Sb),cc=Cb.dtype):(Cb=H.getBuffer(Sb))?cc=Cb.dtype:"constant"in Sb?(Xc=2,"number"===typeof Sb.constant?(nc=Sb.constant,oc=lc=Gc=0):(nc=0<Sb.constant.length?Sb.constant[0]:0,oc=1<Sb.constant.length?Sb.constant[1]:0,lc=2<Sb.constant.length?Sb.constant[2]:0,Gc=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Ea(Sb.buffer)?H.createStream(34962,Sb.buffer):
H.getBuffer(Sb.buffer),cc="type"in Sb?xd[Sb.type]:Cb.dtype,kc=!!Sb.normalized,gd=Sb.size|0,Fc=Sb.offset|0,Dc=Sb.stride|0,Jc=Sb.divisor|0);dc=J.location;fb=z[dc];if(1===Xc){fb.buffer||ea.enableVertexAttribArray(dc);Tc=gd||2;if(fb.type!==cc||fb.size!==Tc||fb.buffer!==Cb||fb.normalized!==kc||fb.offset!==Fc||fb.stride!==Dc)ea.bindBuffer(34962,Cb.buffer),ea.vertexAttribPointer(dc,Tc,cc,kc,Dc,Fc),fb.type=cc,fb.size=Tc,fb.buffer=Cb,fb.normalized=kc,fb.offset=Fc,fb.stride=Dc;fb.divisor!==Jc&&(q.vertexAttribDivisorANGLE(dc,
Jc),fb.divisor=Jc)}else if(fb.buffer&&(ea.disableVertexAttribArray(dc),fb.buffer=null),fb.x!==nc||fb.y!==oc||fb.z!==lc||fb.w!==Gc)ea.vertexAttrib4f(dc,nc,oc,lc,Gc),fb.x=nc,fb.y=oc,fb.z=lc,fb.w=Gc;zb=p.call(this,da,a,0);Ia.offset=zb;cb=!1;Nb=null;ab=0;pb=!1;fa=Va=0;Ib=1;Jb=0;pc=5126;Db=Gb=kb=Ob=0;Ea(Ia)?(cb=!0,Nb=H.createStream(34962,Ia),pc=Nb.dtype):(Nb=H.getBuffer(Ia))?pc=Nb.dtype:"constant"in Ia?(Ib=2,"number"===typeof Ia.constant?(kb=Ia.constant,Gb=Db=Ob=0):(kb=0<Ia.constant.length?Ia.constant[0]:
0,Gb=1<Ia.constant.length?Ia.constant[1]:0,Db=2<Ia.constant.length?Ia.constant[2]:0,Ob=3<Ia.constant.length?Ia.constant[3]:0)):(Nb=Ea(Ia.buffer)?H.createStream(34962,Ia.buffer):H.getBuffer(Ia.buffer),pc="type"in Ia?xd[Ia.type]:Nb.dtype,pb=!!Ia.normalized,fa=Ia.size|0,Va=Ia.offset|0,Jb=Ia.stride|0,ab=Ia.divisor|0);xb=Ba.location;ib=z[xb];if(1===Ib){ib.buffer||ea.enableVertexAttribArray(xb);Zb=fa||4;if(ib.type!==pc||ib.size!==Zb||ib.buffer!==Nb||ib.normalized!==pb||ib.offset!==Va||ib.stride!==Jb)ea.bindBuffer(34962,
Nb.buffer),ea.vertexAttribPointer(xb,Zb,pc,pb,Jb,Va),ib.type=pc,ib.size=Zb,ib.buffer=Nb,ib.normalized=pb,ib.offset=Va,ib.stride=Jb;ib.divisor!==ab&&(q.vertexAttribDivisorANGLE(xb,ab),ib.divisor=ab)}else if(ib.buffer&&(ea.disableVertexAttribArray(xb),ib.buffer=null),ib.x!==kb||ib.y!==Gb||ib.z!==Db||ib.w!==Ob)ea.vertexAttrib4f(xb,kb,Gb,Db,Ob),ib.x=kb,ib.y=Gb,ib.z=Db,ib.w=Ob;Pb=v.call(this,da,a,0);P.offset=Pb;mb=!1;Ta=null;Vb=0;qb=!1;jb=hc=0;rb=1;Ja=0;sb=5126;Ma=gb=eb=La=0;Ea(P)?(mb=!0,Ta=H.createStream(34962,
P),sb=Ta.dtype):(Ta=H.getBuffer(P))?sb=Ta.dtype:"constant"in P?(rb=2,"number"===typeof P.constant?(eb=P.constant,gb=Ma=La=0):(eb=0<P.constant.length?P.constant[0]:0,gb=1<P.constant.length?P.constant[1]:0,Ma=2<P.constant.length?P.constant[2]:0,La=3<P.constant.length?P.constant[3]:0)):(Ta=Ea(P.buffer)?H.createStream(34962,P.buffer):H.getBuffer(P.buffer),sb="type"in P?xd[P.type]:Ta.dtype,qb=!!P.normalized,jb=P.size|0,hc=P.offset|0,Ja=P.stride|0,Vb=P.divisor|0);lb=F.location;Wa=z[lb];if(1===rb){Wa.buffer||
ea.enableVertexAttribArray(lb);ub=jb||4;if(Wa.type!==sb||Wa.size!==ub||Wa.buffer!==Ta||Wa.normalized!==qb||Wa.offset!==hc||Wa.stride!==Ja)ea.bindBuffer(34962,Ta.buffer),ea.vertexAttribPointer(lb,ub,sb,qb,Ja,hc),Wa.type=sb,Wa.size=ub,Wa.buffer=Ta,Wa.normalized=qb,Wa.offset=hc,Wa.stride=Ja;Wa.divisor!==Vb&&(q.vertexAttribDivisorANGLE(lb,Vb),Wa.divisor=Vb)}else if(Wa.buffer&&(ea.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==eb||Wa.y!==gb||Wa.z!==Ma||Wa.w!==La)ea.vertexAttrib4f(lb,eb,gb,Ma,La),
Wa.x=eb,Wa.y=gb,Wa.z=Ma,Wa.w=La;tb=ma.location;Pa=z[tb];Pa.buffer||ea.enableVertexAttribArray(tb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==R||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)ea.bindBuffer(34962,R.buffer),ea.vertexAttribPointer(tb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=R,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(q.vertexAttribDivisorANGLE(tb,0),Pa.divisor=0);Cc=V.location;Sa=z[Cc];Sa.buffer||ea.enableVertexAttribArray(Cc);if(5126!==Sa.type||2!==Sa.size||
Sa.buffer!==G||!1!==Sa.normalized||8!==Sa.offset||24!==Sa.stride)ea.bindBuffer(34962,G.buffer),ea.vertexAttribPointer(Cc,2,5126,!1,24,8),Sa.type=5126,Sa.size=2,Sa.buffer=G,Sa.normalized=!1,Sa.offset=8,Sa.stride=24;0!==Sa.divisor&&(q.vertexAttribDivisorANGLE(Cc,0),Sa.divisor=0);Kb=d.location;Eb=z[Kb];Eb.buffer||ea.enableVertexAttribArray(Kb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==x||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)ea.bindBuffer(34962,x.buffer),ea.vertexAttribPointer(Kb,2,5126,
!1,24,16),Eb.type=5126,Eb.size=2,Eb.buffer=x,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(q.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Na=D.call(this,da,a,0);ea.uniform4f(oa.location,Na[0],Na[1],Na[2],Na[3]);ea.uniform1f(ca.location,a.lineWidth);ea.uniform1f(ka.location,a.capSize);Qc=a.scale;ea.uniform2f(u.location,Qc[0],Qc[1]);Za=a.scaleFract;ea.uniform2f(K.location,Za[0],Za[1]);Lb=a.translate;ea.uniform2f(M.location,Lb[0],Lb[1]);Mb=a.translateFract;ea.uniform2f(qa.location,Mb[0],
Mb[1]);ea.uniform1f(S.location,a.opacity);(nb=la.elements)?ea.bindBuffer(34963,nb.buffer.buffer):Ra.currentVAO&&(nb=ta.getElements(Ra.currentVAO.elements))&&ea.bindBuffer(34963,nb.buffer.buffer);Oa=la.offset;$b=a.count;0<$b?nb?q.drawElementsInstancedANGLE(4,36,nb.type,Oa<<(nb.type-5121>>1),$b):q.drawArraysInstancedANGLE(4,Oa,36,$b):0>$b&&(nb?ea.drawElements(4,36,nb.type,Oa<<(nb.type-5121>>1)):ea.drawArrays(4,Oa,36));W.dirty=!0;Ra.setVAO(null);da.viewportWidth=l;da.viewportHeight=t;E&&(B.cpuTime+=
performance.now()-I);N&&H.destroyStream(Q);wc&&H.destroyStream(Cb);cb&&H.destroyStream(Nb);mb&&H.destroyStream(Ta)},scope:function(a,c,d){var h,k,b,g,f,z,A,l,u,L,aa,y,wa,Ra,Ha,O,p,Tb,J,ea,Y,S,n,ga,I,F,M,Z,C,v,va,K,D,ya,Fa,ba,qa,za,ta,V,ua,ca,U,xa,oa,Hb,ra,ka,ma,Da,zc,Ga,Ka,Ba,fa,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,
Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,Ca,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld;h=a.viewport;k=h.x|0;b=h.y|0;g="width"in h?h.width|0:da.framebufferWidth-k;f="height"in h?h.height|0:da.framebufferHeight-b;z=da.viewportWidth;da.viewportWidth=g;A=da.viewportHeight;da.viewportHeight=f;l=hb[0];hb[0]=k;u=hb[1];hb[1]=b;L=hb[2];hb[2]=g;aa=hb[3];hb[3]=f;y=na[0];na[0]=0;wa=na[1];
na[1]=0;Ra=na[2];na[2]=0;Ha=na[3];na[3]=0;O=ja.blend_enable;ja.blend_enable=!0;p=Ya[0];Ya[0]=32774;Tb=Ya[1];Ya[1]=32774;J=t[0];t[0]=770;ea=t[1];t[1]=771;Y=t[2];t[2]=773;S=t[3];t[3]=1;n=ja.depth_enable;ja.depth_enable=!1;ga=a.viewport;I=ga.x|0;F=ga.y|0;M="width"in ga?ga.width|0:da.framebufferWidth-I;Z="height"in ga?ga.height|0:da.framebufferHeight-F;C=sa[0];sa[0]=I;v=sa[1];sa[1]=F;va=sa[2];sa[2]=M;K=sa[3];sa[3]=Z;D=ja.scissor_enable;ja.scissor_enable=!0;if(ya=W.profile)Fa=performance.now(),B.count++;
ba=la.count;la.count=36;qa=a.count;za=la.instances;la.instances=qa;ta=la.primitive;la.primitive=4;V=a.capSize;ua=Aa[5];Aa[5]=V;ca=a.lineWidth;U=Aa[4];Aa[4]=ca;xa=a.opacity;oa=Aa[10];Aa[10]=xa;Hb=a.range;ra=Aa[18];Aa[18]=Hb;ka=a.scale;ma=Aa[6];Aa[6]=ka;Da=a.scaleFract;zc=Aa[7];Aa[7]=Da;Ga=a.translate;Ka=Aa[8];Aa[8]=Ga;Ba=a.translateFract;fa=Aa[9];Aa[9]=Ba;Ib=ha.call(this,da,a,d);Jb=Aa[3];Aa[3]=Ib;pc=w.buffer;w.buffer=x;Ob=w.divisor;w.divisor=0;kb=w.normalized;w.normalized=!1;Gb=w.offset;w.offset=16;
Db=w.size;w.size=0;xb=w.state;w.state=1;ib=w.stride;w.stride=24;Zb=w.type;w.type=5126;Pb=w.w;w.w=0;mb=w.x;w.x=0;Ta=w.y;w.y=0;Vb=w.z;w.z=0;qb=Q.call(this,da,a,d);P.offset=qb;hc=!1;jb=null;rb=0;Ja=!1;La=sb=0;eb=1;gb=0;Ma=5126;tb=ub=Wa=lb=0;Ea(P)?(hc=!0,jb=H.createStream(34962,P),Ma=jb.dtype):(jb=H.getBuffer(P))?Ma=jb.dtype:"constant"in P?(eb=2,"number"===typeof P.constant?(Wa=P.constant,ub=tb=lb=0):(Wa=0<P.constant.length?P.constant[0]:0,ub=1<P.constant.length?P.constant[1]:0,tb=2<P.constant.length?
P.constant[2]:0,lb=3<P.constant.length?P.constant[3]:0)):(jb=Ea(P.buffer)?H.createStream(34962,P.buffer):H.getBuffer(P.buffer),Ma="type"in P?xd[P.type]:jb.dtype,Ja=!!P.normalized,La=P.size|0,sb=P.offset|0,gb=P.stride|0,rb=P.divisor|0);Pa=q.buffer;q.buffer=jb;Cc=q.divisor;q.divisor=rb;Sa=q.normalized;q.normalized=Ja;Kb=q.offset;q.offset=sb;Eb=q.size;q.size=La;Na=q.state;q.state=eb;Qc=q.stride;q.stride=gb;Za=q.type;q.type=Ma;Lb=q.w;q.w=lb;Mb=q.x;q.x=Wa;nb=q.y;q.y=ub;Oa=q.z;q.z=tb;$b=N.buffer;N.buffer=
R;Qa=N.divisor;N.divisor=0;vb=N.normalized;N.normalized=!1;wb=N.offset;N.offset=0;Ua=N.size;N.size=0;ob=N.state;N.state=1;ec=N.stride;N.stride=24;Ac=N.type;N.type=5126;tc=N.w;N.w=0;bb=N.x;N.x=0;ic=N.y;N.y=0;wd=N.z;N.z=0;Xa=ia.call(this,da,a,d);Ia.offset=Xa;Mc=!1;Ab=null;$a=0;Wb=!1;Xb=rc=0;Qb=1;Kc=0;Rb=5126;Nc=sd=Hc=je=0;Ea(Ia)?(Mc=!0,Ab=H.createStream(34962,Ia),Rb=Ab.dtype):(Ab=H.getBuffer(Ia))?Rb=Ab.dtype:"constant"in Ia?(Qb=2,"number"===typeof Ia.constant?(Hc=Ia.constant,sd=Nc=je=0):(Hc=0<Ia.constant.length?
Ia.constant[0]:0,sd=1<Ia.constant.length?Ia.constant[1]:0,Nc=2<Ia.constant.length?Ia.constant[2]:0,je=3<Ia.constant.length?Ia.constant[3]:0)):(Ab=Ea(Ia.buffer)?H.createStream(34962,Ia.buffer):H.getBuffer(Ia.buffer),Rb="type"in Ia?xd[Ia.type]:Ab.dtype,Wb=!!Ia.normalized,Xb=Ia.size|0,rc=Ia.offset|0,Kc=Ia.stride|0,$a=Ia.divisor|0);Yc=e.buffer;e.buffer=Ab;Jd=e.divisor;e.divisor=$a;mc=e.normalized;e.normalized=Wb;uc=e.offset;e.offset=rc;fc=e.size;e.size=Xb;db=e.state;e.state=Qb;qc=e.stride;e.stride=Kc;
Ub=e.type;e.type=Rb;Yb=e.w;e.w=je;bc=e.x;e.x=Hc;gc=e.y;e.y=sd;xc=e.z;e.z=Nc;Bc=r.buffer;r.buffer=G;cd=r.divisor;r.divisor=0;Rc=r.normalized;r.normalized=!1;Sc=r.offset;r.offset=8;Uc=r.size;r.size=0;Zc=r.state;r.state=1;ld=r.stride;r.stride=24;dd=r.type;r.type=5126;$c=r.w;r.w=0;jc=r.x;r.x=0;ac=r.y;r.y=0;ad=r.z;r.z=0;Wc=T.call(this,da,a,d);vc.offset=Wc;ed=!1;yc=null;id=0;td=!1;te=Ad=0;jd=1;Ca=0;Od=5126;Id=Yd=ye=ee=0;Ea(vc)?(ed=!0,yc=H.createStream(34962,vc),Od=yc.dtype):(yc=H.getBuffer(vc))?Od=yc.dtype:
"constant"in vc?(jd=2,"number"===typeof vc.constant?(ye=vc.constant,Yd=Id=ee=0):(ye=0<vc.constant.length?vc.constant[0]:0,Yd=1<vc.constant.length?vc.constant[1]:0,Id=2<vc.constant.length?vc.constant[2]:0,ee=3<vc.constant.length?vc.constant[3]:0)):(yc=Ea(vc.buffer)?H.createStream(34962,vc.buffer):H.getBuffer(vc.buffer),Od="type"in vc?xd[vc.type]:yc.dtype,td=!!vc.normalized,te=vc.size|0,Ad=vc.offset|0,Ca=vc.stride|0,id=vc.divisor|0);Gd=m.buffer;m.buffer=yc;nd=m.divisor;m.divisor=id;Vc=m.normalized;
m.normalized=td;ud=m.offset;m.offset=Ad;rd=m.size;m.size=te;kd=m.state;m.state=jd;vd=m.stride;m.stride=Ca;Bd=m.type;m.type=Od;Dd=m.w;m.w=ee;he=m.x;m.x=ye;ke=m.y;m.y=Yd;ue=m.z;m.z=Id;le=X.call(this,da,a,d);Sb.offset=le;ie=!1;fe=null;ve=0;be=!1;Oc=me=0;hd=1;we=0;pe=5126;Sd=Rd=Pd=Kd=0;Ea(Sb)?(ie=!0,fe=H.createStream(34962,Sb),pe=fe.dtype):(fe=H.getBuffer(Sb))?pe=fe.dtype:"constant"in Sb?(hd=2,"number"===typeof Sb.constant?(Pd=Sb.constant,Rd=Sd=Kd=0):(Pd=0<Sb.constant.length?Sb.constant[0]:0,Rd=1<Sb.constant.length?
Sb.constant[1]:0,Sd=2<Sb.constant.length?Sb.constant[2]:0,Kd=3<Sb.constant.length?Sb.constant[3]:0)):(fe=Ea(Sb.buffer)?H.createStream(34962,Sb.buffer):H.getBuffer(Sb.buffer),pe="type"in Sb?xd[Sb.type]:fe.dtype,be=!!Sb.normalized,Oc=Sb.size|0,me=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);ne=E.buffer;E.buffer=fe;Ae=E.divisor;E.divisor=ve;De=E.normalized;E.normalized=be;re=E.offset;E.offset=me;Re=E.size;E.size=Oc;Se=E.state;E.state=hd;Ne=E.stride;E.stride=we;xe=E.type;E.type=pe;Ge=E.w;E.w=Kd;Ie=E.x;
E.x=Pd;Je=E.y;E.y=Rd;Ke=E.z;E.z=Sd;He=pa.vert;pa.vert=2;Ld=pa.frag;pa.frag=1;W.dirty=!0;c(da,a,d);da.viewportWidth=z;da.viewportHeight=A;hb[0]=l;hb[1]=u;hb[2]=L;hb[3]=aa;na[0]=y;na[1]=wa;na[2]=Ra;na[3]=Ha;ja.blend_enable=O;Ya[0]=p;Ya[1]=Tb;t[0]=J;t[1]=ea;t[2]=Y;t[3]=S;ja.depth_enable=n;sa[0]=C;sa[1]=v;sa[2]=va;sa[3]=K;ja.scissor_enable=D;ya&&(B.cpuTime+=performance.now()-Fa);la.count=ba;la.instances=za;la.primitive=ta;Aa[5]=ua;Aa[4]=U;Aa[10]=oa;Aa[18]=ra;Aa[6]=ma;Aa[7]=zc;Aa[8]=Ka;Aa[9]=fa;Aa[3]=
Jb;w.buffer=pc;w.divisor=Ob;w.normalized=kb;w.offset=Gb;w.size=Db;w.state=xb;w.stride=ib;w.type=Zb;w.w=Pb;w.x=mb;w.y=Ta;w.z=Vb;hc&&H.destroyStream(jb);q.buffer=Pa;q.divisor=Cc;q.normalized=Sa;q.offset=Kb;q.size=Eb;q.state=Na;q.stride=Qc;q.type=Za;q.w=Lb;q.x=Mb;q.y=nb;q.z=Oa;N.buffer=$b;N.divisor=Qa;N.normalized=vb;N.offset=wb;N.size=Ua;N.state=ob;N.stride=ec;N.type=Ac;N.w=tc;N.x=bb;N.y=ic;N.z=wd;Mc&&H.destroyStream(Ab);e.buffer=Yc;e.divisor=Jd;e.normalized=mc;e.offset=uc;e.size=fc;e.state=db;e.stride=
qc;e.type=Ub;e.w=Yb;e.x=bc;e.y=gc;e.z=xc;r.buffer=Bc;r.divisor=cd;r.normalized=Rc;r.offset=Sc;r.size=Uc;r.state=Zc;r.stride=ld;r.type=dd;r.w=$c;r.x=jc;r.y=ac;r.z=ad;ed&&H.destroyStream(yc);m.buffer=Gd;m.divisor=nd;m.normalized=Vc;m.offset=ud;m.size=rd;m.state=kd;m.stride=vd;m.type=Bd;m.w=Dd;m.x=he;m.y=ke;m.z=ue;ie&&H.destroyStream(fe);E.buffer=ne;E.divisor=Ae;E.normalized=De;E.offset=re;E.size=Re;E.state=Se;E.stride=Ne;E.type=xe;E.w=Ge;E.x=Ie;E.y=Je;E.z=Ke;pa.vert=He;pa.frag=Ld;W.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(b,
B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,P,I,C,h,U,d,ka,F,ma){var Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa,ga,Z;Ba=b.attributes;V=b.buffer;ca=b.context;S=b.current;O=b.draw;J=b.elements;u=b.extensions;K=b.framebuffer;M=b.gl;qa=b.isBufferArgs;oa=b.next;z=b.shader;H=b.uniforms;da=b.vao;W=oa.blend_color;la=S.blend_color;ta=oa.blend_equation;Da=S.blend_equation;za=oa.blend_func;ea=S.blend_func;Ea=oa.colorMask;ja=S.colorMask;
pa=oa.depth_range;Aa=S.depth_range;Ra=oa.polygonOffset_offset;na=S.polygonOffset_offset;Tb=oa.sample_coverage;Ya=S.sample_coverage;A=oa.scissor_box;t=S.scissor_box;aa=oa.stencil_func;va=S.stencil_func;xa=oa.stencil_opBack;zc=S.stencil_opBack;Hb=oa.stencil_opFront;Y=S.stencil_opFront;L=oa.viewport;wa=S.viewport;Ha={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};sa={divisor:1,offset:8,stride:8};ya={divisor:1,offset:8,stride:8};Fa={divisor:1,offset:16,stride:8};
ga={divisor:1,offset:16,stride:8};Z={divisor:1,offset:0,stride:4};return{batch:function(c,k){var b,g,f,z,A,L;b=K.next;b!==K.cur&&(b?M.bindFramebuffer(36160,b.framebuffer):M.bindFramebuffer(36160,null),K.cur=b);if(S.dirty){var H,p,W,w,n,x,v,G,D,R,za,ta,ha,fa,$d,Ze,Ye,Qe,Fd,Ce,se,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc;H=oa.dither;H!==S.dither&&(H?M.enable(3024):M.disable(3024),S.dither=H);p=oa.depth_func;p!==S.depth_func&&(M.depthFunc(p),S.depth_func=p);W=pa[0];w=pa[1];if(W!==Aa[0]||w!==Aa[1])M.depthRange(W,
w),Aa[0]=W,Aa[1]=w;n=oa.depth_mask;n!==S.depth_mask&&(M.depthMask(n),S.depth_mask=n);x=Ea[0];v=Ea[1];G=Ea[2];D=Ea[3];if(x!==ja[0]||v!==ja[1]||G!==ja[2]||D!==ja[3])M.colorMask(x,v,G,D),ja[0]=x,ja[1]=v,ja[2]=G,ja[3]=D;R=oa.cull_enable;R!==S.cull_enable&&(R?M.enable(2884):M.disable(2884),S.cull_enable=R);za=oa.cull_face;za!==S.cull_face&&(M.cullFace(za),S.cull_face=za);ta=oa.frontFace;ta!==S.frontFace&&(M.frontFace(ta),S.frontFace=ta);ha=oa.lineWidth;ha!==S.lineWidth&&(M.lineWidth(ha),S.lineWidth=ha);
fa=oa.polygonOffset_enable;fa!==S.polygonOffset_enable&&(fa?M.enable(32823):M.disable(32823),S.polygonOffset_enable=fa);$d=Ra[0];Ze=Ra[1];if($d!==na[0]||Ze!==na[1])M.polygonOffset($d,Ze),na[0]=$d,na[1]=Ze;Ye=oa.sample_alpha;Ye!==S.sample_alpha&&(Ye?M.enable(32926):M.disable(32926),S.sample_alpha=Ye);Qe=oa.sample_enable;Qe!==S.sample_enable&&(Qe?M.enable(32928):M.disable(32928),S.sample_enable=Qe);Fd=Tb[0];Ce=Tb[1];if(Fd!==Ya[0]||Ce!==Ya[1])M.sampleCoverage(Fd,Ce),Ya[0]=Fd,Ya[1]=Ce;se=oa.stencil_mask;
se!==S.stencil_mask&&(M.stencilMask(se),S.stencil_mask=se);Xd=aa[0];Nd=aa[1];zd=aa[2];if(Xd!==va[0]||Nd!==va[1]||zd!==va[2])M.stencilFunc(Xd,Nd,zd),va[0]=Xd,va[1]=Nd,va[2]=zd;md=Hb[0];bd=Hb[1];pd=Hb[2];Lc=Hb[3];if(md!==Y[0]||bd!==Y[1]||pd!==Y[2]||Lc!==Y[3])M.stencilOpSeparate(md,bd,pd,Lc),Y[0]=md,Y[1]=bd,Y[2]=pd,Y[3]=Lc;od=xa[0];Ec=xa[1];fd=xa[2];Pc=xa[3];if(od!==zc[0]||Ec!==zc[1]||fd!==zc[2]||Pc!==zc[3])M.stencilOpSeparate(od,Ec,fd,Pc),zc[0]=od,zc[1]=Ec,zc[2]=fd,zc[3]=Pc}M.blendColor(0,0,0,0);la[0]=
0;la[1]=0;la[2]=0;la[3]=0;M.enable(3042);S.blend_enable=!0;M.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;M.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;M.enable(3089);S.scissor_enable=!0;M.disable(2960);S.stencil_enable=!1;if(g=S.profile)f=performance.now(),B.count+=k;M.useProgram(Q.program);z=u.angle_instanced_arrays;var Ic,Bb,Fb,sc,yb;da.setVAO(null);Ic=P.location;Bb=Ba[Ic];Bb.buffer||M.enableVertexAttribArray(Ic);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==
l||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(Ic,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=l,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(z.vertexAttribDivisorANGLE(Ic,0),Bb.divisor=0);Fb=I.location;sc=Ba[Fb];sc.buffer||M.enableVertexAttribArray(Fb);if(5126!==sc.type||1!==sc.size||sc.buffer!==a||!1!==sc.normalized||4!==sc.offset||8!==sc.stride)M.bindBuffer(34962,a.buffer),M.vertexAttribPointer(Fb,1,5126,!1,8,4),sc.type=5126,
sc.size=1,sc.buffer=a,sc.normalized=!1,sc.offset=4,sc.stride=8;0!==sc.divisor&&(z.vertexAttribDivisorANGLE(Fb,0),sc.divisor=0);(yb=O.elements)?M.bindBuffer(34963,yb.buffer.buffer):da.currentVAO&&(yb=J.getElements(da.currentVAO.elements))&&M.bindBuffer(34963,yb.buffer.buffer);for(A=0;A<k;++A){L=c[A];var wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,
wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ca,te,jd,bf,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd;wc=L.viewport;Cb=wc.x|0;Jc=wc.y|0;kc="width"in wc?wc.width|0:ca.framebufferWidth-Cb;Fc="height"in wc?wc.height|0:ca.framebufferHeight-Jc;gd=ca.viewportWidth;ca.viewportWidth=kc;Xc=ca.viewportHeight;ca.viewportHeight=Fc;M.viewport(Cb,Jc,kc,Fc);wa[0]=Cb;wa[1]=Jc;wa[2]=kc;wa[3]=Fc;(Dc=q.call(this,ca,L,
A))?M.enable(2929):M.disable(2929);S.depth_enable=Dc;cc=L.viewport;Gc=cc.x|0;nc=cc.y|0;oc="width"in cc?cc.width|0:ca.framebufferWidth-Gc;lc="height"in cc?cc.height|0:ca.framebufferHeight-nc;M.scissor(Gc,nc,oc,lc);t[0]=Gc;t[1]=nc;t[2]=oc;t[3]=lc;sa.buffer=L.positionBuffer;dc=!1;fb=null;Tc=0;zb=!1;Nb=cb=0;ab=1;pb=0;Va=5126;pc=Jb=Ib=qd=0;qa(sa)?(dc=!0,fb=V.createStream(34962,sa),Va=fb.dtype):(fb=V.getBuffer(sa))?Va=fb.dtype:"constant"in sa?(ab=2,"number"===typeof sa.constant?(Ib=sa.constant,Jb=pc=qd=
0):(Ib=0<sa.constant.length?sa.constant[0]:0,Jb=1<sa.constant.length?sa.constant[1]:0,pc=2<sa.constant.length?sa.constant[2]:0,qd=3<sa.constant.length?sa.constant[3]:0)):(fb=qa(sa.buffer)?V.createStream(34962,sa.buffer):V.getBuffer(sa.buffer),Va="type"in sa?Ha[sa.type]:fb.dtype,zb=!!sa.normalized,Nb=sa.size|0,cb=sa.offset|0,pb=sa.stride|0,Tc=sa.divisor|0);Ob=ia.location;kb=Ba[Ob];if(1===ab){kb.buffer||M.enableVertexAttribArray(Ob);Gb=Nb||2;if(kb.type!==Va||kb.size!==Gb||kb.buffer!==fb||kb.normalized!==
zb||kb.offset!==cb||kb.stride!==pb)M.bindBuffer(34962,fb.buffer),M.vertexAttribPointer(Ob,Gb,Va,zb,pb,cb),kb.type=Va,kb.size=Gb,kb.buffer=fb,kb.normalized=zb,kb.offset=cb,kb.stride=pb;kb.divisor!==Tc&&(z.vertexAttribDivisorANGLE(Ob,Tc),kb.divisor=Tc)}else if(kb.buffer&&(M.disableVertexAttribArray(Ob),kb.buffer=null),kb.x!==Ib||kb.y!==Jb||kb.z!==pc||kb.w!==qd)M.vertexAttrib4f(Ob,Ib,Jb,pc,qd),kb.x=Ib,kb.y=Jb,kb.z=pc,kb.w=qd;Fa.buffer=L.positionBuffer;Db=!1;xb=null;ib=0;Zb=!1;mb=Pb=0;Ta=1;Vb=0;qb=5126;
Ja=rb=jb=hc=0;qa(Fa)?(Db=!0,xb=V.createStream(34962,Fa),qb=xb.dtype):(xb=V.getBuffer(Fa))?qb=xb.dtype:"constant"in Fa?(Ta=2,"number"===typeof Fa.constant?(jb=Fa.constant,rb=Ja=hc=0):(jb=0<Fa.constant.length?Fa.constant[0]:0,rb=1<Fa.constant.length?Fa.constant[1]:0,Ja=2<Fa.constant.length?Fa.constant[2]:0,hc=3<Fa.constant.length?Fa.constant[3]:0)):(xb=qa(Fa.buffer)?V.createStream(34962,Fa.buffer):V.getBuffer(Fa.buffer),qb="type"in Fa?Ha[Fa.type]:xb.dtype,Zb=!!Fa.normalized,mb=Fa.size|0,Pb=Fa.offset|
0,Vb=Fa.stride|0,ib=Fa.divisor|0);sb=r.location;La=Ba[sb];if(1===Ta){La.buffer||M.enableVertexAttribArray(sb);eb=mb||2;if(La.type!==qb||La.size!==eb||La.buffer!==xb||La.normalized!==Zb||La.offset!==Pb||La.stride!==Vb)M.bindBuffer(34962,xb.buffer),M.vertexAttribPointer(sb,eb,qb,Zb,Vb,Pb),La.type=qb,La.size=eb,La.buffer=xb,La.normalized=Zb,La.offset=Pb,La.stride=Vb;La.divisor!==ib&&(z.vertexAttribDivisorANGLE(sb,ib),La.divisor=ib)}else if(La.buffer&&(M.disableVertexAttribArray(sb),La.buffer=null),La.x!==
jb||La.y!==rb||La.z!==Ja||La.w!==hc)M.vertexAttrib4f(sb,jb,rb,Ja,hc),La.x=jb,La.y=rb,La.z=Ja,La.w=hc;ya.buffer=L.positionFractBuffer;gb=!1;Ma=null;lb=0;Wa=!1;tb=ub=0;Pa=1;Cc=0;Sa=5126;Qc=Na=Eb=Kb=0;qa(ya)?(gb=!0,Ma=V.createStream(34962,ya),Sa=Ma.dtype):(Ma=V.getBuffer(ya))?Sa=Ma.dtype:"constant"in ya?(Pa=2,"number"===typeof ya.constant?(Eb=ya.constant,Na=Qc=Kb=0):(Eb=0<ya.constant.length?ya.constant[0]:0,Na=1<ya.constant.length?ya.constant[1]:0,Qc=2<ya.constant.length?ya.constant[2]:0,Kb=3<ya.constant.length?
ya.constant[3]:0)):(Ma=qa(ya.buffer)?V.createStream(34962,ya.buffer):V.getBuffer(ya.buffer),Sa="type"in ya?Ha[ya.type]:Ma.dtype,Wa=!!ya.normalized,tb=ya.size|0,ub=ya.offset|0,Cc=ya.stride|0,lb=ya.divisor|0);Za=e.location;Lb=Ba[Za];if(1===Pa){Lb.buffer||M.enableVertexAttribArray(Za);Mb=tb||2;if(Lb.type!==Sa||Lb.size!==Mb||Lb.buffer!==Ma||Lb.normalized!==Wa||Lb.offset!==ub||Lb.stride!==Cc)M.bindBuffer(34962,Ma.buffer),M.vertexAttribPointer(Za,Mb,Sa,Wa,Cc,ub),Lb.type=Sa,Lb.size=Mb,Lb.buffer=Ma,Lb.normalized=
Wa,Lb.offset=ub,Lb.stride=Cc;Lb.divisor!==lb&&(z.vertexAttribDivisorANGLE(Za,lb),Lb.divisor=lb)}else if(Lb.buffer&&(M.disableVertexAttribArray(Za),Lb.buffer=null),Lb.x!==Eb||Lb.y!==Na||Lb.z!==Qc||Lb.w!==Kb)M.vertexAttrib4f(Za,Eb,Na,Qc,Kb),Lb.x=Eb,Lb.y=Na,Lb.z=Qc,Lb.w=Kb;ga.buffer=L.positionFractBuffer;nb=!1;Oa=null;$b=0;Qa=!1;wb=vb=0;Ua=1;ob=0;ec=5126;ic=bb=tc=Ac=0;qa(ga)?(nb=!0,Oa=V.createStream(34962,ga),ec=Oa.dtype):(Oa=V.getBuffer(ga))?ec=Oa.dtype:"constant"in ga?(Ua=2,"number"===typeof ga.constant?
(tc=ga.constant,bb=ic=Ac=0):(tc=0<ga.constant.length?ga.constant[0]:0,bb=1<ga.constant.length?ga.constant[1]:0,ic=2<ga.constant.length?ga.constant[2]:0,Ac=3<ga.constant.length?ga.constant[3]:0)):(Oa=qa(ga.buffer)?V.createStream(34962,ga.buffer):V.getBuffer(ga.buffer),ec="type"in ga?Ha[ga.type]:Oa.dtype,Qa=!!ga.normalized,wb=ga.size|0,vb=ga.offset|0,ob=ga.stride|0,$b=ga.divisor|0);wd=T.location;Xa=Ba[wd];if(1===Ua){Xa.buffer||M.enableVertexAttribArray(wd);Mc=wb||2;if(Xa.type!==ec||Xa.size!==Mc||Xa.buffer!==
Oa||Xa.normalized!==Qa||Xa.offset!==vb||Xa.stride!==ob)M.bindBuffer(34962,Oa.buffer),M.vertexAttribPointer(wd,Mc,ec,Qa,ob,vb),Xa.type=ec,Xa.size=Mc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=vb,Xa.stride=ob;Xa.divisor!==$b&&(z.vertexAttribDivisorANGLE(wd,$b),Xa.divisor=$b)}else if(Xa.buffer&&(M.disableVertexAttribArray(wd),Xa.buffer=null),Xa.x!==tc||Xa.y!==bb||Xa.z!==ic||Xa.w!==Ac)M.vertexAttrib4f(wd,tc,bb,ic,Ac),Xa.x=tc,Xa.y=bb,Xa.z=ic,Xa.w=Ac;Z.buffer=L.colorBuffer;Ab=!1;$a=null;Wb=0;rc=!1;Qb=Xb=0;
Kc=1;Rb=0;je=5126;Yc=Nc=sd=Hc=0;qa(Z)?(Ab=!0,$a=V.createStream(34962,Z),je=$a.dtype):($a=V.getBuffer(Z))?je=$a.dtype:"constant"in Z?(Kc=2,"number"===typeof Z.constant?(sd=Z.constant,Nc=Yc=Hc=0):(sd=0<Z.constant.length?Z.constant[0]:0,Nc=1<Z.constant.length?Z.constant[1]:0,Yc=2<Z.constant.length?Z.constant[2]:0,Hc=3<Z.constant.length?Z.constant[3]:0)):($a=qa(Z.buffer)?V.createStream(34962,Z.buffer):V.getBuffer(Z.buffer),je="type"in Z?Ha[Z.type]:$a.dtype,rc=!!Z.normalized,Qb=Z.size|0,Xb=Z.offset|0,
Rb=Z.stride|0,Wb=Z.divisor|0);Jd=m.location;mc=Ba[Jd];if(1===Kc){mc.buffer||M.enableVertexAttribArray(Jd);uc=Qb||4;if(mc.type!==je||mc.size!==uc||mc.buffer!==$a||mc.normalized!==rc||mc.offset!==Xb||mc.stride!==Rb)M.bindBuffer(34962,$a.buffer),M.vertexAttribPointer(Jd,uc,je,rc,Rb,Xb),mc.type=je,mc.size=uc,mc.buffer=$a,mc.normalized=rc,mc.offset=Xb,mc.stride=Rb;mc.divisor!==Wb&&(z.vertexAttribDivisorANGLE(Jd,Wb),mc.divisor=Wb)}else if(mc.buffer&&(M.disableVertexAttribArray(Jd),mc.buffer=null),mc.x!==
sd||mc.y!==Nc||mc.z!==Yc||mc.w!==Hc)M.vertexAttrib4f(Jd,sd,Nc,Yc,Hc),mc.x=sd,mc.y=Nc,mc.z=Yc,mc.w=Hc;fc=L.scale;db=fc[0];Ub=fc[1];A&&qc===db&&Yb===Ub||(qc=db,Yb=Ub,M.uniform2f(h.location,db,Ub));bc=L.scaleFract;gc=bc[0];Bc=bc[1];A&&xc===gc&&cd===Bc||(xc=gc,cd=Bc,M.uniform2f(U.location,gc,Bc));Rc=L.translate;Sc=Rc[0];Zc=Rc[1];A&&Uc===Sc&&ld===Zc||(Uc=Sc,ld=Zc,M.uniform2f(ka.location,Sc,Zc));dd=L.translateFract;$c=dd[0];ac=dd[1];A&&jc===$c&&ad===ac||(jc=$c,ad=ac,M.uniform2f(F.location,$c,ac));Wc=L.thickness;
A&&ed===Wc||(ed=Wc,M.uniform1f(d.location,Wc));yc=L.depth;A&&id===yc||(id=yc,M.uniform1f(y.location,yc));td=N.call(this,ca,L,A);Ca=td[0];jd=td[1];Od=td[2];ye=td[3];A&&te===Ca&&bf===jd&&ee===Od&&Yd===ye||(te=Ca,bf=jd,ee=Od,Yd=ye,M.uniform4f(ma.location,Ca,jd,Od,ye));Id=L.dashLength;A&&Gd===Id||(Gd=Id,M.uniform1f(X.location,Id));nd=L.opacity;A&&Vc===nd||(Vc=nd,M.uniform1f(C.location,nd));(ud=L.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);rd=ud._texture;M.uniform1i(E.location,rd.bind());
kd=L.count;0<kd?yb?z.drawElementsInstancedANGLE(5,4,yb.type,0<<(yb.type-5121>>1),kd):z.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(yb?M.drawElements(5,4,yb.type,0<<(yb.type-5121>>1)):M.drawArrays(5,0,4));ca.viewportWidth=gd;ca.viewportHeight=Xc;dc&&V.destroyStream(fb);Db&&V.destroyStream(xb);gb&&V.destroyStream(Ma);nb&&V.destroyStream(Oa);Ab&&V.destroyStream($a);rd.unbind()}S.dirty=!0;da.setVAO(null);g&&(B.cpuTime+=performance.now()-f)},draw:function(b){var g,z,A,L,H,p,W,w,n,x,q,v,G,D,R,za,N,ta,Q,ha,
fa,$d,Ze,Ye,Qe,Fd,Ce,se,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb;g=K.next;g!==K.cur&&(g?M.bindFramebuffer(36160,g.framebuffer):M.bindFramebuffer(36160,null),K.cur=g);if(S.dirty){var wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Ca,mc,uc,fc,db,qc,Ub,Yb;wb=oa.dither;wb!==
S.dither&&(wb?M.enable(3024):M.disable(3024),S.dither=wb);Ua=oa.depth_func;Ua!==S.depth_func&&(M.depthFunc(Ua),S.depth_func=Ua);ob=pa[0];ec=pa[1];if(ob!==Aa[0]||ec!==Aa[1])M.depthRange(ob,ec),Aa[0]=ob,Aa[1]=ec;Ac=oa.depth_mask;Ac!==S.depth_mask&&(M.depthMask(Ac),S.depth_mask=Ac);tc=Ea[0];bb=Ea[1];ic=Ea[2];wd=Ea[3];if(tc!==ja[0]||bb!==ja[1]||ic!==ja[2]||wd!==ja[3])M.colorMask(tc,bb,ic,wd),ja[0]=tc,ja[1]=bb,ja[2]=ic,ja[3]=wd;Xa=oa.cull_enable;Xa!==S.cull_enable&&(Xa?M.enable(2884):M.disable(2884),S.cull_enable=
Xa);Mc=oa.cull_face;Mc!==S.cull_face&&(M.cullFace(Mc),S.cull_face=Mc);Ab=oa.frontFace;Ab!==S.frontFace&&(M.frontFace(Ab),S.frontFace=Ab);$a=oa.lineWidth;$a!==S.lineWidth&&(M.lineWidth($a),S.lineWidth=$a);Wb=oa.polygonOffset_enable;Wb!==S.polygonOffset_enable&&(Wb?M.enable(32823):M.disable(32823),S.polygonOffset_enable=Wb);rc=Ra[0];Xb=Ra[1];if(rc!==na[0]||Xb!==na[1])M.polygonOffset(rc,Xb),na[0]=rc,na[1]=Xb;Qb=oa.sample_alpha;Qb!==S.sample_alpha&&(Qb?M.enable(32926):M.disable(32926),S.sample_alpha=
Qb);Kc=oa.sample_enable;Kc!==S.sample_enable&&(Kc?M.enable(32928):M.disable(32928),S.sample_enable=Kc);Rb=Tb[0];je=Tb[1];if(Rb!==Ya[0]||je!==Ya[1])M.sampleCoverage(Rb,je),Ya[0]=Rb,Ya[1]=je;Hc=oa.stencil_mask;Hc!==S.stencil_mask&&(M.stencilMask(Hc),S.stencil_mask=Hc);sd=aa[0];Nc=aa[1];Yc=aa[2];if(sd!==va[0]||Nc!==va[1]||Yc!==va[2])M.stencilFunc(sd,Nc,Yc),va[0]=sd,va[1]=Nc,va[2]=Yc;Ca=Hb[0];mc=Hb[1];uc=Hb[2];fc=Hb[3];if(Ca!==Y[0]||mc!==Y[1]||uc!==Y[2]||fc!==Y[3])M.stencilOpSeparate(Ca,mc,uc,fc),Y[0]=
Ca,Y[1]=mc,Y[2]=uc,Y[3]=fc;db=xa[0];qc=xa[1];Ub=xa[2];Yb=xa[3];if(db!==zc[0]||qc!==zc[1]||Ub!==zc[2]||Yb!==zc[3])M.stencilOpSeparate(db,qc,Ub,Yb),zc[0]=db,zc[1]=qc,zc[2]=Ub,zc[3]=Yb}z=b.viewport;A=z.x|0;L=z.y|0;H="width"in z?z.width|0:ca.framebufferWidth-A;p="height"in z?z.height|0:ca.framebufferHeight-L;W=ca.viewportWidth;ca.viewportWidth=H;w=ca.viewportHeight;ca.viewportHeight=p;M.viewport(A,L,H,p);wa[0]=A;wa[1]=L;wa[2]=H;wa[3]=p;M.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;M.enable(3042);
S.blend_enable=!0;M.blendEquationSeparate(32774,32774);Da[0]=32774;Da[1]=32774;M.blendFuncSeparate(770,771,773,1);ea[0]=770;ea[1]=771;ea[2]=773;ea[3]=1;(n=k.call(this,ca,b,0))?M.enable(2929):M.disable(2929);S.depth_enable=n;x=b.viewport;q=x.x|0;v=x.y|0;G="width"in x?x.width|0:ca.framebufferWidth-q;D="height"in x?x.height|0:ca.framebufferHeight-v;M.scissor(q,v,G,D);t[0]=q;t[1]=v;t[2]=G;t[3]=D;M.enable(3089);S.scissor_enable=!0;M.disable(2960);S.stencil_enable=!1;if(R=S.profile)za=performance.now(),
B.count++;M.useProgram(c.program);N=u.angle_instanced_arrays;da.setVAO(null);sa.buffer=b.positionBuffer;ta=!1;Q=null;ha=0;fa=!1;Ze=$d=0;Ye=1;Qe=0;Fd=5126;Nd=Xd=se=Ce=0;qa(sa)?(ta=!0,Q=V.createStream(34962,sa),Fd=Q.dtype):(Q=V.getBuffer(sa))?Fd=Q.dtype:"constant"in sa?(Ye=2,"number"===typeof sa.constant?(se=sa.constant,Xd=Nd=Ce=0):(se=0<sa.constant.length?sa.constant[0]:0,Xd=1<sa.constant.length?sa.constant[1]:0,Nd=2<sa.constant.length?sa.constant[2]:0,Ce=3<sa.constant.length?sa.constant[3]:0)):(Q=
qa(sa.buffer)?V.createStream(34962,sa.buffer):V.getBuffer(sa.buffer),Fd="type"in sa?Ha[sa.type]:Q.dtype,fa=!!sa.normalized,Ze=sa.size|0,$d=sa.offset|0,Qe=sa.stride|0,ha=sa.divisor|0);zd=ia.location;md=Ba[zd];if(1===Ye){md.buffer||M.enableVertexAttribArray(zd);bd=Ze||2;if(md.type!==Fd||md.size!==bd||md.buffer!==Q||md.normalized!==fa||md.offset!==$d||md.stride!==Qe)M.bindBuffer(34962,Q.buffer),M.vertexAttribPointer(zd,bd,Fd,fa,Qe,$d),md.type=Fd,md.size=bd,md.buffer=Q,md.normalized=fa,md.offset=$d,md.stride=
Qe;md.divisor!==ha&&(N.vertexAttribDivisorANGLE(zd,ha),md.divisor=ha)}else if(md.buffer&&(M.disableVertexAttribArray(zd),md.buffer=null),md.x!==se||md.y!==Xd||md.z!==Nd||md.w!==Ce)M.vertexAttrib4f(zd,se,Xd,Nd,Ce),md.x=se,md.y=Xd,md.z=Nd,md.w=Ce;Fa.buffer=b.positionBuffer;pd=!1;Lc=null;od=0;Ec=!1;Pc=fd=0;Ic=1;Bb=0;Fb=5126;Cb=wc=yb=sc=0;qa(Fa)?(pd=!0,Lc=V.createStream(34962,Fa),Fb=Lc.dtype):(Lc=V.getBuffer(Fa))?Fb=Lc.dtype:"constant"in Fa?(Ic=2,"number"===typeof Fa.constant?(yb=Fa.constant,wc=Cb=sc=
0):(yb=0<Fa.constant.length?Fa.constant[0]:0,wc=1<Fa.constant.length?Fa.constant[1]:0,Cb=2<Fa.constant.length?Fa.constant[2]:0,sc=3<Fa.constant.length?Fa.constant[3]:0)):(Lc=qa(Fa.buffer)?V.createStream(34962,Fa.buffer):V.getBuffer(Fa.buffer),Fb="type"in Fa?Ha[Fa.type]:Lc.dtype,Ec=!!Fa.normalized,Pc=Fa.size|0,fd=Fa.offset|0,Bb=Fa.stride|0,od=Fa.divisor|0);Jc=r.location;kc=Ba[Jc];if(1===Ic){kc.buffer||M.enableVertexAttribArray(Jc);Fc=Pc||2;if(kc.type!==Fb||kc.size!==Fc||kc.buffer!==Lc||kc.normalized!==
Ec||kc.offset!==fd||kc.stride!==Bb)M.bindBuffer(34962,Lc.buffer),M.vertexAttribPointer(Jc,Fc,Fb,Ec,Bb,fd),kc.type=Fb,kc.size=Fc,kc.buffer=Lc,kc.normalized=Ec,kc.offset=fd,kc.stride=Bb;kc.divisor!==od&&(N.vertexAttribDivisorANGLE(Jc,od),kc.divisor=od)}else if(kc.buffer&&(M.disableVertexAttribArray(Jc),kc.buffer=null),kc.x!==yb||kc.y!==wc||kc.z!==Cb||kc.w!==sc)M.vertexAttrib4f(Jc,yb,wc,Cb,sc),kc.x=yb,kc.y=wc,kc.z=Cb,kc.w=sc;ya.buffer=b.positionFractBuffer;gd=!1;Xc=null;Dc=0;cc=!1;nc=Gc=0;oc=1;lc=0;
dc=5126;cb=zb=Tc=fb=0;qa(ya)?(gd=!0,Xc=V.createStream(34962,ya),dc=Xc.dtype):(Xc=V.getBuffer(ya))?dc=Xc.dtype:"constant"in ya?(oc=2,"number"===typeof ya.constant?(Tc=ya.constant,zb=cb=fb=0):(Tc=0<ya.constant.length?ya.constant[0]:0,zb=1<ya.constant.length?ya.constant[1]:0,cb=2<ya.constant.length?ya.constant[2]:0,fb=3<ya.constant.length?ya.constant[3]:0)):(Xc=qa(ya.buffer)?V.createStream(34962,ya.buffer):V.getBuffer(ya.buffer),dc="type"in ya?Ha[ya.type]:Xc.dtype,cc=!!ya.normalized,nc=ya.size|0,Gc=
ya.offset|0,lc=ya.stride|0,Dc=ya.divisor|0);Nb=e.location;ab=Ba[Nb];if(1===oc){ab.buffer||M.enableVertexAttribArray(Nb);pb=nc||2;if(ab.type!==dc||ab.size!==pb||ab.buffer!==Xc||ab.normalized!==cc||ab.offset!==Gc||ab.stride!==lc)M.bindBuffer(34962,Xc.buffer),M.vertexAttribPointer(Nb,pb,dc,cc,lc,Gc),ab.type=dc,ab.size=pb,ab.buffer=Xc,ab.normalized=cc,ab.offset=Gc,ab.stride=lc;ab.divisor!==Dc&&(N.vertexAttribDivisorANGLE(Nb,Dc),ab.divisor=Dc)}else if(ab.buffer&&(M.disableVertexAttribArray(Nb),ab.buffer=
null),ab.x!==Tc||ab.y!==zb||ab.z!==cb||ab.w!==fb)M.vertexAttrib4f(Nb,Tc,zb,cb,fb),ab.x=Tc,ab.y=zb,ab.z=cb,ab.w=fb;ga.buffer=b.positionFractBuffer;Va=!1;qd=null;Ib=0;Jb=!1;Ob=pc=0;kb=1;Gb=0;Db=5126;Pb=Zb=ib=xb=0;qa(ga)?(Va=!0,qd=V.createStream(34962,ga),Db=qd.dtype):(qd=V.getBuffer(ga))?Db=qd.dtype:"constant"in ga?(kb=2,"number"===typeof ga.constant?(ib=ga.constant,Zb=Pb=xb=0):(ib=0<ga.constant.length?ga.constant[0]:0,Zb=1<ga.constant.length?ga.constant[1]:0,Pb=2<ga.constant.length?ga.constant[2]:
0,xb=3<ga.constant.length?ga.constant[3]:0)):(qd=qa(ga.buffer)?V.createStream(34962,ga.buffer):V.getBuffer(ga.buffer),Db="type"in ga?Ha[ga.type]:qd.dtype,Jb=!!ga.normalized,Ob=ga.size|0,pc=ga.offset|0,Gb=ga.stride|0,Ib=ga.divisor|0);mb=T.location;Ta=Ba[mb];if(1===kb){Ta.buffer||M.enableVertexAttribArray(mb);Vb=Ob||2;if(Ta.type!==Db||Ta.size!==Vb||Ta.buffer!==qd||Ta.normalized!==Jb||Ta.offset!==pc||Ta.stride!==Gb)M.bindBuffer(34962,qd.buffer),M.vertexAttribPointer(mb,Vb,Db,Jb,Gb,pc),Ta.type=Db,Ta.size=
Vb,Ta.buffer=qd,Ta.normalized=Jb,Ta.offset=pc,Ta.stride=Gb;Ta.divisor!==Ib&&(N.vertexAttribDivisorANGLE(mb,Ib),Ta.divisor=Ib)}else if(Ta.buffer&&(M.disableVertexAttribArray(mb),Ta.buffer=null),Ta.x!==ib||Ta.y!==Zb||Ta.z!==Pb||Ta.w!==xb)M.vertexAttrib4f(mb,ib,Zb,Pb,xb),Ta.x=ib,Ta.y=Zb,Ta.z=Pb,Ta.w=xb;Z.buffer=b.colorBuffer;qb=!1;hc=null;jb=0;rb=!1;sb=Ja=0;La=1;eb=0;gb=5126;ub=Wa=lb=Ma=0;qa(Z)?(qb=!0,hc=V.createStream(34962,Z),gb=hc.dtype):(hc=V.getBuffer(Z))?gb=hc.dtype:"constant"in Z?(La=2,"number"===
typeof Z.constant?(lb=Z.constant,Wa=ub=Ma=0):(lb=0<Z.constant.length?Z.constant[0]:0,Wa=1<Z.constant.length?Z.constant[1]:0,ub=2<Z.constant.length?Z.constant[2]:0,Ma=3<Z.constant.length?Z.constant[3]:0)):(hc=qa(Z.buffer)?V.createStream(34962,Z.buffer):V.getBuffer(Z.buffer),gb="type"in Z?Ha[Z.type]:hc.dtype,rb=!!Z.normalized,sb=Z.size|0,Ja=Z.offset|0,eb=Z.stride|0,jb=Z.divisor|0);tb=m.location;Pa=Ba[tb];if(1===La){Pa.buffer||M.enableVertexAttribArray(tb);Cc=sb||4;if(Pa.type!==gb||Pa.size!==Cc||Pa.buffer!==
hc||Pa.normalized!==rb||Pa.offset!==Ja||Pa.stride!==eb)M.bindBuffer(34962,hc.buffer),M.vertexAttribPointer(tb,Cc,gb,rb,eb,Ja),Pa.type=gb,Pa.size=Cc,Pa.buffer=hc,Pa.normalized=rb,Pa.offset=Ja,Pa.stride=eb;Pa.divisor!==jb&&(N.vertexAttribDivisorANGLE(tb,jb),Pa.divisor=jb)}else if(Pa.buffer&&(M.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==ub||Pa.w!==Ma)M.vertexAttrib4f(tb,lb,Wa,ub,Ma),Pa.x=lb,Pa.y=Wa,Pa.z=ub,Pa.w=Ma;Sa=P.location;Kb=Ba[Sa];Kb.buffer||M.enableVertexAttribArray(Sa);
if(5126!==Kb.type||1!==Kb.size||Kb.buffer!==l||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(Sa,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=l,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(N.vertexAttribDivisorANGLE(Sa,0),Kb.divisor=0);Eb=I.location;Na=Ba[Eb];Na.buffer||M.enableVertexAttribArray(Eb);if(5126!==Na.type||1!==Na.size||Na.buffer!==a||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)M.bindBuffer(34962,a.buffer),M.vertexAttribPointer(Eb,
1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=a,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(N.vertexAttribDivisorANGLE(Eb,0),Na.divisor=0);Qc=b.scale;M.uniform2f(h.location,Qc[0],Qc[1]);Za=b.scaleFract;M.uniform2f(U.location,Za[0],Za[1]);Lb=b.translate;M.uniform2f(ka.location,Lb[0],Lb[1]);Mb=b.translateFract;M.uniform2f(F.location,Mb[0],Mb[1]);M.uniform1f(d.location,b.thickness);M.uniform1f(y.location,b.depth);nb=f.call(this,ca,b,0);M.uniform4f(ma.location,nb[0],nb[1],nb[2],nb[3]);
M.uniform1f(X.location,b.dashLength);M.uniform1f(C.location,b.opacity);(Oa=b.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);$b=Oa._texture;M.uniform1i(E.location,$b.bind());(Qa=O.elements)?M.bindBuffer(34963,Qa.buffer.buffer):da.currentVAO&&(Qa=J.getElements(da.currentVAO.elements))&&M.bindBuffer(34963,Qa.buffer.buffer);vb=b.count;0<vb?Qa?N.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),vb):N.drawArraysInstancedANGLE(5,0,4,vb):0>vb&&(Qa?M.drawElements(5,4,Qa.type,0<<(Qa.type-
5121>>1)):M.drawArrays(5,0,4));S.dirty=!0;da.setVAO(null);ca.viewportWidth=W;ca.viewportHeight=w;R&&(B.cpuTime+=performance.now()-za);ta&&V.destroyStream(Q);pd&&V.destroyStream(Lc);gd&&V.destroyStream(Xc);Va&&V.destroyStream(qd);qb&&V.destroyStream(hc);$b.unbind()},scope:function(c,d,h){var e,b,k,f,m,t,u,na,aa,r,y,wa,Ra,Tb,J,E,ea,Y,I,q,F,M,C,va,K,da,N,Q,ja,T,Ya,X,Aa,U,pa,xa,Ea,ia,Hb,la,P,ka,ra,ma,Da,zc,Ba,fa,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,
Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,Ca,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,bf,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe;e=c.viewport;b=e.x|0;k=e.y|0;f="width"in e?e.width|0:ca.framebufferWidth-
b;m="height"in e?e.height|0:ca.framebufferHeight-k;t=ca.viewportWidth;ca.viewportWidth=f;u=ca.viewportHeight;ca.viewportHeight=m;na=L[0];L[0]=b;aa=L[1];L[1]=k;r=L[2];L[2]=f;y=L[3];L[3]=m;wa=W[0];W[0]=0;Ra=W[1];W[1]=0;Tb=W[2];W[2]=0;J=W[3];W[3]=0;E=oa.blend_enable;oa.blend_enable=!0;ea=ta[0];ta[0]=32774;Y=ta[1];ta[1]=32774;I=za[0];za[0]=770;q=za[1];za[1]=771;F=za[2];za[2]=773;M=za[3];za[3]=1;C=g.call(this,ca,c,h);va=oa.depth_enable;oa.depth_enable=C;K=c.viewport;da=K.x|0;N=K.y|0;Q="width"in K?K.width|
0:ca.framebufferWidth-da;ja="height"in K?K.height|0:ca.framebufferHeight-N;T=A[0];A[0]=da;Ya=A[1];A[1]=N;X=A[2];A[2]=Q;Aa=A[3];A[3]=ja;U=oa.scissor_enable;oa.scissor_enable=!0;pa=oa.stencil_enable;oa.stencil_enable=!1;if(xa=S.profile)Ea=performance.now(),B.count++;ia=O.offset;O.offset=0;Hb=O.count;O.count=4;la=c.count;P=O.instances;O.instances=la;ka=O.primitive;O.primitive=5;ra=c.dashLength;ma=H[23];H[23]=ra;Da=c.dashTexture;zc=H[24];H[24]=Da;Ba=c.depth;fa=H[22];H[22]=Ba;Xc=c.id;Dc=H[31];H[31]=Xc;
cc=c.miterLimit;Gc=H[32];H[32]=cc;nc=n.call(this,ca,c,h);oc=H[33];H[33]=nc;lc=c.opacity;dc=H[10];H[10]=lc;fb=ca.pixelRatio;Tc=H[34];H[34]=fb;zb=c.scale;cb=H[6];H[6]=zb;Nb=c.scaleFract;ab=H[7];H[7]=Nb;pb=c.thickness;Va=H[21];H[21]=pb;qd=c.translate;Ib=H[8];H[8]=qd;Jb=c.translateFract;pc=H[9];H[9]=Jb;Ob=p.call(this,ca,c,h);kb=H[3];H[3]=Ob;sa.buffer=c.positionBuffer;Gb=!1;Db=null;xb=0;ib=!1;Pb=Zb=0;mb=1;Ta=0;Vb=5126;rb=jb=hc=qb=0;qa(sa)?(Gb=!0,Db=V.createStream(34962,sa),Vb=Db.dtype):(Db=V.getBuffer(sa))?
Vb=Db.dtype:"constant"in sa?(mb=2,"number"===typeof sa.constant?(hc=sa.constant,jb=rb=qb=0):(hc=0<sa.constant.length?sa.constant[0]:0,jb=1<sa.constant.length?sa.constant[1]:0,rb=2<sa.constant.length?sa.constant[2]:0,qb=3<sa.constant.length?sa.constant[3]:0)):(Db=qa(sa.buffer)?V.createStream(34962,sa.buffer):V.getBuffer(sa.buffer),Vb="type"in sa?Ha[sa.type]:Db.dtype,ib=!!sa.normalized,Pb=sa.size|0,Zb=sa.offset|0,Ta=sa.stride|0,xb=sa.divisor|0);Ja=v.buffer;v.buffer=Db;sb=v.divisor;v.divisor=xb;La=v.normalized;
v.normalized=ib;eb=v.offset;v.offset=Zb;gb=v.size;v.size=Pb;Ma=v.state;v.state=mb;lb=v.stride;v.stride=Ta;Wa=v.type;v.type=Vb;ub=v.w;v.w=qb;tb=v.x;v.x=hc;Pa=v.y;v.y=jb;Cc=v.z;v.z=rb;ya.buffer=c.positionFractBuffer;Sa=!1;Kb=null;Eb=0;Na=!1;Za=Qc=0;Lb=1;Mb=0;nb=5126;vb=Qa=$b=Oa=0;qa(ya)?(Sa=!0,Kb=V.createStream(34962,ya),nb=Kb.dtype):(Kb=V.getBuffer(ya))?nb=Kb.dtype:"constant"in ya?(Lb=2,"number"===typeof ya.constant?($b=ya.constant,Qa=vb=Oa=0):($b=0<ya.constant.length?ya.constant[0]:0,Qa=1<ya.constant.length?
ya.constant[1]:0,vb=2<ya.constant.length?ya.constant[2]:0,Oa=3<ya.constant.length?ya.constant[3]:0)):(Kb=qa(ya.buffer)?V.createStream(34962,ya.buffer):V.getBuffer(ya.buffer),nb="type"in ya?Ha[ya.type]:Kb.dtype,Na=!!ya.normalized,Za=ya.size|0,Qc=ya.offset|0,Mb=ya.stride|0,Eb=ya.divisor|0);wb=R.buffer;R.buffer=Kb;Ua=R.divisor;R.divisor=Eb;ob=R.normalized;R.normalized=Na;ec=R.offset;R.offset=Qc;Ac=R.size;R.size=Za;tc=R.state;R.state=Lb;bb=R.stride;R.stride=Mb;ic=R.type;R.type=nb;wd=R.w;R.w=Oa;Xa=R.x;
R.x=$b;Mc=R.y;R.y=Qa;Ab=R.z;R.z=vb;Fa.buffer=c.positionBuffer;$a=!1;Wb=null;rc=0;Xb=!1;Kc=Qb=0;Rb=1;Ca=0;Hc=5126;Jd=Yc=Nc=sd=0;qa(Fa)?($a=!0,Wb=V.createStream(34962,Fa),Hc=Wb.dtype):(Wb=V.getBuffer(Fa))?Hc=Wb.dtype:"constant"in Fa?(Rb=2,"number"===typeof Fa.constant?(Nc=Fa.constant,Yc=Jd=sd=0):(Nc=0<Fa.constant.length?Fa.constant[0]:0,Yc=1<Fa.constant.length?Fa.constant[1]:0,Jd=2<Fa.constant.length?Fa.constant[2]:0,sd=3<Fa.constant.length?Fa.constant[3]:0)):(Wb=qa(Fa.buffer)?V.createStream(34962,
Fa.buffer):V.getBuffer(Fa.buffer),Hc="type"in Fa?Ha[Fa.type]:Wb.dtype,Xb=!!Fa.normalized,Kc=Fa.size|0,Qb=Fa.offset|0,Ca=Fa.stride|0,rc=Fa.divisor|0);mc=G.buffer;G.buffer=Wb;uc=G.divisor;G.divisor=rc;fc=G.normalized;G.normalized=Xb;db=G.offset;G.offset=Qb;qc=G.size;G.size=Kc;Ub=G.state;G.state=Rb;Yb=G.stride;G.stride=Ca;bc=G.type;G.type=Hc;gc=G.w;G.w=sd;xc=G.x;G.x=Nc;Bc=G.y;G.y=Yc;cd=G.z;G.z=Jd;ga.buffer=c.positionFractBuffer;Rc=!1;Sc=null;Uc=0;Zc=!1;dd=ld=0;$c=1;jc=0;ac=5126;yc=ed=Wc=ad=0;qa(ga)?
(Rc=!0,Sc=V.createStream(34962,ga),ac=Sc.dtype):(Sc=V.getBuffer(ga))?ac=Sc.dtype:"constant"in ga?($c=2,"number"===typeof ga.constant?(Wc=ga.constant,ed=yc=ad=0):(Wc=0<ga.constant.length?ga.constant[0]:0,ed=1<ga.constant.length?ga.constant[1]:0,yc=2<ga.constant.length?ga.constant[2]:0,ad=3<ga.constant.length?ga.constant[3]:0)):(Sc=qa(ga.buffer)?V.createStream(34962,ga.buffer):V.getBuffer(ga.buffer),ac="type"in ga?Ha[ga.type]:Sc.dtype,Zc=!!ga.normalized,dd=ga.size|0,ld=ga.offset|0,jc=ga.stride|0,Uc=
ga.divisor|0);id=x.buffer;x.buffer=Sc;td=x.divisor;x.divisor=Uc;Ad=x.normalized;x.normalized=Zc;te=x.offset;x.offset=ld;jd=x.size;x.size=dd;bf=x.state;x.state=$c;Od=x.stride;x.stride=jc;ee=x.type;x.type=ac;ye=x.w;x.w=ad;Yd=x.x;x.x=Wc;Id=x.y;x.y=ed;Gd=x.z;x.z=yc;Z.buffer=c.colorBuffer;nd=!1;Vc=null;ud=0;rd=!1;vd=kd=0;Bd=1;Dd=0;he=5126;ie=le=ue=ke=0;qa(Z)?(nd=!0,Vc=V.createStream(34962,Z),he=Vc.dtype):(Vc=V.getBuffer(Z))?he=Vc.dtype:"constant"in Z?(Bd=2,"number"===typeof Z.constant?(ue=Z.constant,le=
ie=ke=0):(ue=0<Z.constant.length?Z.constant[0]:0,le=1<Z.constant.length?Z.constant[1]:0,ie=2<Z.constant.length?Z.constant[2]:0,ke=3<Z.constant.length?Z.constant[3]:0)):(Vc=qa(Z.buffer)?V.createStream(34962,Z.buffer):V.getBuffer(Z.buffer),he="type"in Z?Ha[Z.type]:Vc.dtype,rd=!!Z.normalized,vd=Z.size|0,kd=Z.offset|0,Dd=Z.stride|0,ud=Z.divisor|0);fe=D.buffer;D.buffer=Vc;ve=D.divisor;D.divisor=ud;be=D.normalized;D.normalized=rd;me=D.offset;D.offset=kd;Oc=D.size;D.size=vd;hd=D.state;D.state=Bd;we=D.stride;
D.stride=Dd;pe=D.type;D.type=he;Kd=D.w;D.w=ke;Pd=D.x;D.x=ue;Rd=D.y;D.y=le;Sd=D.z;D.z=ie;ne=ha.buffer;ha.buffer=l;Ae=ha.divisor;ha.divisor=0;De=ha.normalized;ha.normalized=!1;re=ha.offset;ha.offset=0;Re=ha.size;ha.size=0;Se=ha.state;ha.state=1;Ne=ha.stride;ha.stride=8;xe=ha.type;ha.type=5126;Ge=ha.w;ha.w=0;Ie=ha.x;ha.x=0;Je=ha.y;ha.y=0;Ke=ha.z;ha.z=0;He=w.buffer;w.buffer=a;Ld=w.divisor;w.divisor=0;Vd=w.normalized;w.normalized=!1;ae=w.offset;w.offset=4;ce=w.size;w.size=0;Le=w.state;w.state=1;Hd=w.stride;
w.stride=8;Td=w.type;w.type=5126;Ee=w.w;w.w=0;Me=w.x;w.x=0;cf=w.y;w.y=0;af=w.z;w.z=0;Te=z.vert;z.vert=20;Oe=z.frag;z.frag=19;S.dirty=!0;d(ca,c,h);ca.viewportWidth=t;ca.viewportHeight=u;L[0]=na;L[1]=aa;L[2]=r;L[3]=y;W[0]=wa;W[1]=Ra;W[2]=Tb;W[3]=J;oa.blend_enable=E;ta[0]=ea;ta[1]=Y;za[0]=I;za[1]=q;za[2]=F;za[3]=M;oa.depth_enable=va;A[0]=T;A[1]=Ya;A[2]=X;A[3]=Aa;oa.scissor_enable=U;oa.stencil_enable=pa;xa&&(B.cpuTime+=performance.now()-Ea);O.offset=ia;O.count=Hb;O.instances=P;O.primitive=ka;H[23]=ma;
H[24]=zc;H[22]=fa;H[31]=Dc;H[32]=Gc;H[33]=oc;H[10]=dc;H[34]=Tc;H[6]=cb;H[7]=ab;H[21]=Va;H[8]=Ib;H[9]=pc;H[3]=kb;Gb&&V.destroyStream(Db);v.buffer=Ja;v.divisor=sb;v.normalized=La;v.offset=eb;v.size=gb;v.state=Ma;v.stride=lb;v.type=Wa;v.w=ub;v.x=tb;v.y=Pa;v.z=Cc;Sa&&V.destroyStream(Kb);R.buffer=wb;R.divisor=Ua;R.normalized=ob;R.offset=ec;R.size=Ac;R.state=tc;R.stride=bb;R.type=ic;R.w=wd;R.x=Xa;R.y=Mc;R.z=Ab;$a&&V.destroyStream(Wb);G.buffer=mc;G.divisor=uc;G.normalized=fc;G.offset=db;G.size=qc;G.state=
Ub;G.stride=Yb;G.type=bc;G.w=gc;G.x=xc;G.y=Bc;G.z=cd;Rc&&V.destroyStream(Sc);x.buffer=id;x.divisor=td;x.normalized=Ad;x.offset=te;x.size=jd;x.state=bf;x.stride=Od;x.type=ee;x.w=ye;x.x=Yd;x.y=Id;x.z=Gd;nd&&V.destroyStream(Vc);D.buffer=fe;D.divisor=ve;D.normalized=be;D.offset=me;D.size=Oc;D.state=hd;D.stride=we;D.type=pe;D.w=Kd;D.x=Pd;D.y=Rd;D.z=Sd;ha.buffer=ne;ha.divisor=Ae;ha.normalized=De;ha.offset=re;ha.size=Re;ha.state=Se;ha.stride=Ne;ha.type=xe;ha.w=Ge;ha.x=Ie;ha.y=Je;ha.z=Ke;w.buffer=He;w.divisor=
Ld;w.normalized=Vd;w.offset=ae;w.size=ce;w.state=Le;w.stride=Hd;w.type=Td;w.w=Ee;w.x=Me;w.y=cf;w.z=af;z.vert=Te;z.frag=Oe;S.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,P,I,C,h,U,d,ka,F,ma,Ba,V,ca,S){var O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa,
ga,Z,ua,Ka,Ga,hb,ba;O=b.attributes;J=b.buffer;u=b.context;K=b.current;M=b.draw;qa=b.elements;oa=b.extensions;z=b.framebuffer;H=b.gl;da=b.isBufferArgs;W=b.next;la=b.shader;ta=b.uniforms;Da=b.vao;za=W.blend_color;ea=K.blend_color;Ea=W.blend_equation;ja=K.blend_equation;pa=W.blend_func;Aa=K.blend_func;Ra=W.colorMask;na=K.colorMask;Tb=W.depth_range;Ya=K.depth_range;A=W.polygonOffset_offset;t=K.polygonOffset_offset;aa=W.sample_coverage;va=K.sample_coverage;xa=W.scissor_box;zc=K.scissor_box;Hb=W.stencil_func;
Y=K.stencil_func;L=W.stencil_opBack;wa=K.stencil_opBack;Ha=W.stencil_opFront;sa=K.stencil_opFront;ya=W.viewport;Fa=K.viewport;ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Z={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ka={divisor:1,offset:4,stride:4};Ga={divisor:1,offset:16,stride:8};hb={divisor:1,offset:24,stride:8};ba={divisor:1,offset:0,stride:8};return{batch:function(c,b){var k,g,f,p,w,n;k=z.next;k!==z.cur&&(k?H.bindFramebuffer(36160,
k.framebuffer):H.bindFramebuffer(36160,null),z.cur=k);if(K.dirty){var x,q,v,G,D,ya,R,Q,za,ta,ha,pa,xa,Ea,la,fa,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb;x=W.dither;x!==K.dither&&(x?H.enable(3024):H.disable(3024),K.dither=x);q=W.depth_func;q!==K.depth_func&&(H.depthFunc(q),K.depth_func=q);v=Tb[0];G=Tb[1];if(v!==Ya[0]||G!==Ya[1])H.depthRange(v,G),Ya[0]=v,Ya[1]=G;D=W.depth_mask;D!==K.depth_mask&&(H.depthMask(D),K.depth_mask=D);ya=Ra[0];R=Ra[1];Q=Ra[2];za=Ra[3];if(ya!==na[0]||R!==na[1]||Q!==na[2]||za!==
na[3])H.colorMask(ya,R,Q,za),na[0]=ya,na[1]=R,na[2]=Q,na[3]=za;ta=W.frontFace;ta!==K.frontFace&&(H.frontFace(ta),K.frontFace=ta);ha=W.lineWidth;ha!==K.lineWidth&&(H.lineWidth(ha),K.lineWidth=ha);pa=W.polygonOffset_enable;pa!==K.polygonOffset_enable&&(pa?H.enable(32823):H.disable(32823),K.polygonOffset_enable=pa);xa=A[0];Ea=A[1];if(xa!==t[0]||Ea!==t[1])H.polygonOffset(xa,Ea),t[0]=xa,t[1]=Ea;la=W.sample_alpha;la!==K.sample_alpha&&(la?H.enable(32926):H.disable(32926),K.sample_alpha=la);fa=W.sample_enable;
fa!==K.sample_enable&&(fa?H.enable(32928):H.disable(32928),K.sample_enable=fa);Xd=aa[0];Nd=aa[1];if(Xd!==va[0]||Nd!==va[1])H.sampleCoverage(Xd,Nd),va[0]=Xd,va[1]=Nd;zd=W.stencil_mask;zd!==K.stencil_mask&&(H.stencilMask(zd),K.stencil_mask=zd);md=Hb[0];bd=Hb[1];pd=Hb[2];if(md!==Y[0]||bd!==Y[1]||pd!==Y[2])H.stencilFunc(md,bd,pd),Y[0]=md,Y[1]=bd,Y[2]=pd;Lc=Ha[0];od=Ha[1];Ec=Ha[2];fd=Ha[3];if(Lc!==sa[0]||od!==sa[1]||Ec!==sa[2]||fd!==sa[3])H.stencilOpSeparate(Lc,od,Ec,fd),sa[0]=Lc,sa[1]=od,sa[2]=Ec,sa[3]=
fd;Pc=L[0];Ic=L[1];Bb=L[2];Fb=L[3];if(Pc!==wa[0]||Ic!==wa[1]||Bb!==wa[2]||Fb!==wa[3])H.stencilOpSeparate(Pc,Ic,Bb,Fb),wa[0]=Pc,wa[1]=Ic,wa[2]=Bb,wa[3]=Fb}H.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;H.enable(3042);K.blend_enable=!0;H.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;H.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;H.enable(2884);K.cull_enable=!0;H.cullFace(1029);K.cull_face=1029;H.enable(3089);K.scissor_enable=!0;H.disable(2960);K.stencil_enable=
!1;if(g=K.profile)f=performance.now(),B.count+=b;H.useProgram(N.program);p=oa.angle_instanced_arrays;var sc,yb,wc,Cb,Jc;Da.setVAO(null);sc=C.location;yb=O[sc];yb.buffer||H.enableVertexAttribArray(sc);if(5126!==yb.type||1!==yb.size||yb.buffer!==l||!1!==yb.normalized||0!==yb.offset||8!==yb.stride)H.bindBuffer(34962,l.buffer),H.vertexAttribPointer(sc,1,5126,!1,8,0),yb.type=5126,yb.size=1,yb.buffer=l,yb.normalized=!1,yb.offset=0,yb.stride=8;0!==yb.divisor&&(p.vertexAttribDivisorANGLE(sc,0),yb.divisor=
0);wc=h.location;Cb=O[wc];Cb.buffer||H.enableVertexAttribArray(wc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==a||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)H.bindBuffer(34962,a.buffer),H.vertexAttribPointer(wc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=a,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(p.vertexAttribDivisorANGLE(wc,0),Cb.divisor=0);(Jc=M.elements)?H.bindBuffer(34963,Jc.buffer.buffer):Da.currentVAO&&(Jc=qa.getElements(Da.currentVAO.elements))&&H.bindBuffer(34963,
Jc.buffer.buffer);for(w=0;w<b;++w){n=c[w];var kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,Ca,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,bf,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc;kc=n.viewport;Fc=kc.x|0;gd=
kc.y|0;Xc="width"in kc?kc.width|0:u.framebufferWidth-Fc;Dc="height"in kc?kc.height|0:u.framebufferHeight-gd;cc=u.viewportWidth;u.viewportWidth=Xc;Gc=u.viewportHeight;u.viewportHeight=Dc;H.viewport(Fc,gd,Xc,Dc);Fa[0]=Fc;Fa[1]=gd;Fa[2]=Xc;Fa[3]=Dc;(nc=ia.call(this,u,n,w))?H.enable(2929):H.disable(2929);K.depth_enable=nc;oc=n.viewport;lc=oc.x|0;dc=oc.y|0;fb="width"in oc?oc.width|0:u.framebufferWidth-lc;Tc="height"in oc?oc.height|0:u.framebufferHeight-dc;H.scissor(lc,dc,fb,Tc);zc[0]=lc;zc[1]=dc;zc[2]=
fb;zc[3]=Tc;ua.buffer=n.positionBuffer;zb=!1;cb=null;Nb=0;ab=!1;Va=pb=0;qd=1;Ib=0;Jb=5126;Gb=kb=Ob=pc=0;da(ua)?(zb=!0,cb=J.createStream(34962,ua),Jb=cb.dtype):(cb=J.getBuffer(ua))?Jb=cb.dtype:"constant"in ua?(qd=2,"number"===typeof ua.constant?(Ob=ua.constant,kb=Gb=pc=0):(Ob=0<ua.constant.length?ua.constant[0]:0,kb=1<ua.constant.length?ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,pc=3<ua.constant.length?ua.constant[3]:0)):(cb=da(ua.buffer)?J.createStream(34962,ua.buffer):J.getBuffer(ua.buffer),
Jb="type"in ua?ga[ua.type]:cb.dtype,ab=!!ua.normalized,Va=ua.size|0,pb=ua.offset|0,Ib=ua.stride|0,Nb=ua.divisor|0);Db=m.location;xb=O[Db];if(1===qd){xb.buffer||H.enableVertexAttribArray(Db);ib=Va||2;if(xb.type!==Jb||xb.size!==ib||xb.buffer!==cb||xb.normalized!==ab||xb.offset!==pb||xb.stride!==Ib)H.bindBuffer(34962,cb.buffer),H.vertexAttribPointer(Db,ib,Jb,ab,Ib,pb),xb.type=Jb,xb.size=ib,xb.buffer=cb,xb.normalized=ab,xb.offset=pb,xb.stride=Ib;xb.divisor!==Nb&&(p.vertexAttribDivisorANGLE(Db,Nb),xb.divisor=
Nb)}else if(xb.buffer&&(H.disableVertexAttribArray(Db),xb.buffer=null),xb.x!==Ob||xb.y!==kb||xb.z!==Gb||xb.w!==pc)H.vertexAttrib4f(Db,Ob,kb,Gb,pc),xb.x=Ob,xb.y=kb,xb.z=Gb,xb.w=pc;Ga.buffer=n.positionBuffer;Zb=!1;Pb=null;mb=0;Ta=!1;qb=Vb=0;hc=1;jb=0;rb=5126;eb=La=sb=Ja=0;da(Ga)?(Zb=!0,Pb=J.createStream(34962,Ga),rb=Pb.dtype):(Pb=J.getBuffer(Ga))?rb=Pb.dtype:"constant"in Ga?(hc=2,"number"===typeof Ga.constant?(sb=Ga.constant,La=eb=Ja=0):(sb=0<Ga.constant.length?Ga.constant[0]:0,La=1<Ga.constant.length?
Ga.constant[1]:0,eb=2<Ga.constant.length?Ga.constant[2]:0,Ja=3<Ga.constant.length?Ga.constant[3]:0)):(Pb=da(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),rb="type"in Ga?ga[Ga.type]:Pb.dtype,Ta=!!Ga.normalized,qb=Ga.size|0,Vb=Ga.offset|0,jb=Ga.stride|0,mb=Ga.divisor|0);gb=E.location;Ma=O[gb];if(1===hc){Ma.buffer||H.enableVertexAttribArray(gb);lb=qb||2;if(Ma.type!==rb||Ma.size!==lb||Ma.buffer!==Pb||Ma.normalized!==Ta||Ma.offset!==Vb||Ma.stride!==jb)H.bindBuffer(34962,Pb.buffer),
H.vertexAttribPointer(gb,lb,rb,Ta,jb,Vb),Ma.type=rb,Ma.size=lb,Ma.buffer=Pb,Ma.normalized=Ta,Ma.offset=Vb,Ma.stride=jb;Ma.divisor!==mb&&(p.vertexAttribDivisorANGLE(gb,mb),Ma.divisor=mb)}else if(Ma.buffer&&(H.disableVertexAttribArray(gb),Ma.buffer=null),Ma.x!==sb||Ma.y!==La||Ma.z!==eb||Ma.w!==Ja)H.vertexAttrib4f(gb,sb,La,eb,Ja),Ma.x=sb,Ma.y=La,Ma.z=eb,Ma.w=Ja;hb.buffer=n.positionBuffer;Wa=!1;ub=null;tb=0;Pa=!1;Sa=Cc=0;Kb=1;Eb=0;Na=5126;Mb=Lb=Za=Qc=0;da(hb)?(Wa=!0,ub=J.createStream(34962,hb),Na=ub.dtype):
(ub=J.getBuffer(hb))?Na=ub.dtype:"constant"in hb?(Kb=2,"number"===typeof hb.constant?(Za=hb.constant,Lb=Mb=Qc=0):(Za=0<hb.constant.length?hb.constant[0]:0,Lb=1<hb.constant.length?hb.constant[1]:0,Mb=2<hb.constant.length?hb.constant[2]:0,Qc=3<hb.constant.length?hb.constant[3]:0)):(ub=da(hb.buffer)?J.createStream(34962,hb.buffer):J.getBuffer(hb.buffer),Na="type"in hb?ga[hb.type]:ub.dtype,Pa=!!hb.normalized,Sa=hb.size|0,Cc=hb.offset|0,Eb=hb.stride|0,tb=hb.divisor|0);nb=ka.location;Oa=O[nb];if(1===Kb){Oa.buffer||
H.enableVertexAttribArray(nb);$b=Sa||2;if(Oa.type!==Na||Oa.size!==$b||Oa.buffer!==ub||Oa.normalized!==Pa||Oa.offset!==Cc||Oa.stride!==Eb)H.bindBuffer(34962,ub.buffer),H.vertexAttribPointer(nb,$b,Na,Pa,Eb,Cc),Oa.type=Na,Oa.size=$b,Oa.buffer=ub,Oa.normalized=Pa,Oa.offset=Cc,Oa.stride=Eb;Oa.divisor!==tb&&(p.vertexAttribDivisorANGLE(nb,tb),Oa.divisor=tb)}else if(Oa.buffer&&(H.disableVertexAttribArray(nb),Oa.buffer=null),Oa.x!==Za||Oa.y!==Lb||Oa.z!==Mb||Oa.w!==Qc)H.vertexAttrib4f(nb,Za,Lb,Mb,Qc),Oa.x=
Za,Oa.y=Lb,Oa.z=Mb,Oa.w=Qc;ba.buffer=n.positionBuffer;Qa=!1;vb=null;wb=0;Ua=!1;ec=ob=0;Ac=1;tc=0;bb=5126;Mc=Xa=wd=ic=0;da(ba)?(Qa=!0,vb=J.createStream(34962,ba),bb=vb.dtype):(vb=J.getBuffer(ba))?bb=vb.dtype:"constant"in ba?(Ac=2,"number"===typeof ba.constant?(wd=ba.constant,Xa=Mc=ic=0):(wd=0<ba.constant.length?ba.constant[0]:0,Xa=1<ba.constant.length?ba.constant[1]:0,Mc=2<ba.constant.length?ba.constant[2]:0,ic=3<ba.constant.length?ba.constant[3]:0)):(vb=da(ba.buffer)?J.createStream(34962,ba.buffer):
J.getBuffer(ba.buffer),bb="type"in ba?ga[ba.type]:vb.dtype,Ua=!!ba.normalized,ec=ba.size|0,ob=ba.offset|0,tc=ba.stride|0,wb=ba.divisor|0);Ab=ma.location;$a=O[Ab];if(1===Ac){$a.buffer||H.enableVertexAttribArray(Ab);Wb=ec||2;if($a.type!==bb||$a.size!==Wb||$a.buffer!==vb||$a.normalized!==Ua||$a.offset!==ob||$a.stride!==tc)H.bindBuffer(34962,vb.buffer),H.vertexAttribPointer(Ab,Wb,bb,Ua,tc,ob),$a.type=bb,$a.size=Wb,$a.buffer=vb,$a.normalized=Ua,$a.offset=ob,$a.stride=tc;$a.divisor!==wb&&(p.vertexAttribDivisorANGLE(Ab,
wb),$a.divisor=wb)}else if($a.buffer&&(H.disableVertexAttribArray(Ab),$a.buffer=null),$a.x!==wd||$a.y!==Xa||$a.z!==Mc||$a.w!==ic)H.vertexAttrib4f(Ab,wd,Xa,Mc,ic),$a.x=wd,$a.y=Xa,$a.z=Mc,$a.w=ic;Z.buffer=n.colorBuffer;rc=!1;Xb=null;Qb=0;Kc=!1;Ca=Rb=0;Hc=1;sd=0;Nc=5126;uc=mc=Jd=Yc=0;da(Z)?(rc=!0,Xb=J.createStream(34962,Z),Nc=Xb.dtype):(Xb=J.getBuffer(Z))?Nc=Xb.dtype:"constant"in Z?(Hc=2,"number"===typeof Z.constant?(Jd=Z.constant,mc=uc=Yc=0):(Jd=0<Z.constant.length?Z.constant[0]:0,mc=1<Z.constant.length?
Z.constant[1]:0,uc=2<Z.constant.length?Z.constant[2]:0,Yc=3<Z.constant.length?Z.constant[3]:0)):(Xb=da(Z.buffer)?J.createStream(34962,Z.buffer):J.getBuffer(Z.buffer),Nc="type"in Z?ga[Z.type]:Xb.dtype,Kc=!!Z.normalized,Ca=Z.size|0,Rb=Z.offset|0,sd=Z.stride|0,Qb=Z.divisor|0);fc=T.location;db=O[fc];if(1===Hc){db.buffer||H.enableVertexAttribArray(fc);qc=Ca||4;if(db.type!==Nc||db.size!==qc||db.buffer!==Xb||db.normalized!==Kc||db.offset!==Rb||db.stride!==sd)H.bindBuffer(34962,Xb.buffer),H.vertexAttribPointer(fc,
qc,Nc,Kc,sd,Rb),db.type=Nc,db.size=qc,db.buffer=Xb,db.normalized=Kc,db.offset=Rb,db.stride=sd;db.divisor!==Qb&&(p.vertexAttribDivisorANGLE(fc,Qb),db.divisor=Qb)}else if(db.buffer&&(H.disableVertexAttribArray(fc),db.buffer=null),db.x!==Jd||db.y!==mc||db.z!==uc||db.w!==Yc)H.vertexAttrib4f(fc,Jd,mc,uc,Yc),db.x=Jd,db.y=mc,db.z=uc,db.w=Yc;Ka.buffer=n.colorBuffer;Ub=!1;Yb=null;bc=0;gc=!1;Bc=xc=0;cd=1;Rc=0;Sc=5126;dd=ld=Zc=Uc=0;da(Ka)?(Ub=!0,Yb=J.createStream(34962,Ka),Sc=Yb.dtype):(Yb=J.getBuffer(Ka))?
Sc=Yb.dtype:"constant"in Ka?(cd=2,"number"===typeof Ka.constant?(Zc=Ka.constant,ld=dd=Uc=0):(Zc=0<Ka.constant.length?Ka.constant[0]:0,ld=1<Ka.constant.length?Ka.constant[1]:0,dd=2<Ka.constant.length?Ka.constant[2]:0,Uc=3<Ka.constant.length?Ka.constant[3]:0)):(Yb=da(Ka.buffer)?J.createStream(34962,Ka.buffer):J.getBuffer(Ka.buffer),Sc="type"in Ka?ga[Ka.type]:Yb.dtype,gc=!!Ka.normalized,Bc=Ka.size|0,xc=Ka.offset|0,Rc=Ka.stride|0,bc=Ka.divisor|0);$c=X.location;jc=O[$c];if(1===cd){jc.buffer||H.enableVertexAttribArray($c);
ac=Bc||4;if(jc.type!==Sc||jc.size!==ac||jc.buffer!==Yb||jc.normalized!==gc||jc.offset!==xc||jc.stride!==Rc)H.bindBuffer(34962,Yb.buffer),H.vertexAttribPointer($c,ac,Sc,gc,Rc,xc),jc.type=Sc,jc.size=ac,jc.buffer=Yb,jc.normalized=gc,jc.offset=xc,jc.stride=Rc;jc.divisor!==bc&&(p.vertexAttribDivisorANGLE($c,bc),jc.divisor=bc)}else if(jc.buffer&&(H.disableVertexAttribArray($c),jc.buffer=null),jc.x!==Zc||jc.y!==ld||jc.z!==dd||jc.w!==Uc)H.vertexAttrib4f($c,Zc,ld,dd,Uc),jc.x=Zc,jc.y=ld,jc.z=dd,jc.w=Uc;ad=
n.scale;Wc=ad[0];yc=ad[1];w&&ed===Wc&&id===yc||(ed=Wc,id=yc,H.uniform2f(Ba.location,Wc,yc));td=n.translate;Ad=td[0];jd=td[1];w&&te===Ad&&bf===jd||(te=Ad,bf=jd,H.uniform2f(ca.location,Ad,jd));Od=n.thickness;w&&ee===Od||(ee=Od,H.uniform1f(V.location,Od));ye=n.depth;w&&Yd===ye||(Yd=ye,H.uniform1f(I.location,ye));Id=e.call(this,u,n,w);Gd=Id[0];Vc=Id[1];rd=Id[2];vd=Id[3];w&&nd===Gd&&ud===Vc&&kd===rd&&Bd===vd||(nd=Gd,ud=Vc,kd=rd,Bd=vd,H.uniform4f(S.location,Gd,Vc,rd,vd));Dd=n.miterLimit;w&&he===Dd||(he=
Dd,H.uniform1f(U.location,Dd));ke=r.call(this,u,n,w);w&&ue===ke||(ue=ke,H.uniform1f(d.location,ke));le=n.dashLength;w&&ie===le||(ie=le,H.uniform1f(y.location,le));fe=n.opacity;w&&ve===fe||(ve=fe,H.uniform1f(F.location,fe));(be=n.dashTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);me=be._texture;H.uniform1i(P.location,me.bind());Oc=n.count;0<Oc?Jc?p.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):p.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?H.drawElements(5,4,Jc.type,0<<
(Jc.type-5121>>1)):H.drawArrays(5,0,4));u.viewportWidth=cc;u.viewportHeight=Gc;zb&&J.destroyStream(cb);Zb&&J.destroyStream(Pb);Wa&&J.destroyStream(ub);Qa&&J.destroyStream(vb);rc&&J.destroyStream(Xb);Ub&&J.destroyStream(Yb);me.unbind()}K.dirty=!0;Da.setVAO(null);g&&(B.cpuTime+=performance.now()-f)},draw:function(e){var b,r,p,w,n,x,q,v,G,D,ya,R,Q,N,za,ta,ha,pa,xa,Ea,ia,la,fa,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,
Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,Ca,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je;b=z.next;b!==z.cur&&(b?H.bindFramebuffer(36160,b.framebuffer):H.bindFramebuffer(36160,null),z.cur=b);if(K.dirty){var Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc;Hc=W.dither;Hc!==K.dither&&(Hc?H.enable(3024):H.disable(3024),K.dither=Hc);sd=W.depth_func;sd!==K.depth_func&&(H.depthFunc(sd),
K.depth_func=sd);Nc=Tb[0];Yc=Tb[1];if(Nc!==Ya[0]||Yc!==Ya[1])H.depthRange(Nc,Yc),Ya[0]=Nc,Ya[1]=Yc;Jd=W.depth_mask;Jd!==K.depth_mask&&(H.depthMask(Jd),K.depth_mask=Jd);mc=Ra[0];uc=Ra[1];fc=Ra[2];db=Ra[3];if(mc!==na[0]||uc!==na[1]||fc!==na[2]||db!==na[3])H.colorMask(mc,uc,fc,db),na[0]=mc,na[1]=uc,na[2]=fc,na[3]=db;qc=W.frontFace;qc!==K.frontFace&&(H.frontFace(qc),K.frontFace=qc);Ub=W.lineWidth;Ub!==K.lineWidth&&(H.lineWidth(Ub),K.lineWidth=Ub);Yb=W.polygonOffset_enable;Yb!==K.polygonOffset_enable&&
(Yb?H.enable(32823):H.disable(32823),K.polygonOffset_enable=Yb);bc=A[0];gc=A[1];if(bc!==t[0]||gc!==t[1])H.polygonOffset(bc,gc),t[0]=bc,t[1]=gc;xc=W.sample_alpha;xc!==K.sample_alpha&&(xc?H.enable(32926):H.disable(32926),K.sample_alpha=xc);Bc=W.sample_enable;Bc!==K.sample_enable&&(Bc?H.enable(32928):H.disable(32928),K.sample_enable=Bc);cd=aa[0];Rc=aa[1];if(cd!==va[0]||Rc!==va[1])H.sampleCoverage(cd,Rc),va[0]=cd,va[1]=Rc;Sc=W.stencil_mask;Sc!==K.stencil_mask&&(H.stencilMask(Sc),K.stencil_mask=Sc);Uc=
Hb[0];Zc=Hb[1];ld=Hb[2];if(Uc!==Y[0]||Zc!==Y[1]||ld!==Y[2])H.stencilFunc(Uc,Zc,ld),Y[0]=Uc,Y[1]=Zc,Y[2]=ld;dd=Ha[0];$c=Ha[1];jc=Ha[2];ac=Ha[3];if(dd!==sa[0]||$c!==sa[1]||jc!==sa[2]||ac!==sa[3])H.stencilOpSeparate(dd,$c,jc,ac),sa[0]=dd,sa[1]=$c,sa[2]=jc,sa[3]=ac;ad=L[0];Wc=L[1];ed=L[2];yc=L[3];if(ad!==wa[0]||Wc!==wa[1]||ed!==wa[2]||yc!==wa[3])H.stencilOpSeparate(ad,Wc,ed,yc),wa[0]=ad,wa[1]=Wc,wa[2]=ed,wa[3]=yc}r=e.viewport;p=r.x|0;w=r.y|0;n="width"in r?r.width|0:u.framebufferWidth-p;x="height"in r?
r.height|0:u.framebufferHeight-w;q=u.viewportWidth;u.viewportWidth=n;v=u.viewportHeight;u.viewportHeight=x;H.viewport(p,w,n,x);Fa[0]=p;Fa[1]=w;Fa[2]=n;Fa[3]=x;H.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;H.enable(3042);K.blend_enable=!0;H.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;H.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;H.enable(2884);K.cull_enable=!0;H.cullFace(1029);K.cull_face=1029;(G=k.call(this,u,e,0))?H.enable(2929):H.disable(2929);K.depth_enable=
G;D=e.viewport;ya=D.x|0;R=D.y|0;Q="width"in D?D.width|0:u.framebufferWidth-ya;N="height"in D?D.height|0:u.framebufferHeight-R;H.scissor(ya,R,Q,N);zc[0]=ya;zc[1]=R;zc[2]=Q;zc[3]=N;H.enable(3089);K.scissor_enable=!0;H.disable(2960);K.stencil_enable=!1;if(za=K.profile)ta=performance.now(),B.count++;H.useProgram(c.program);ha=oa.angle_instanced_arrays;Da.setVAO(null);ua.buffer=e.positionBuffer;pa=!1;xa=null;Ea=0;ia=!1;fa=la=0;Xd=1;Nd=0;zd=5126;Lc=pd=bd=md=0;da(ua)?(pa=!0,xa=J.createStream(34962,ua),zd=
xa.dtype):(xa=J.getBuffer(ua))?zd=xa.dtype:"constant"in ua?(Xd=2,"number"===typeof ua.constant?(bd=ua.constant,pd=Lc=md=0):(bd=0<ua.constant.length?ua.constant[0]:0,pd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,md=3<ua.constant.length?ua.constant[3]:0)):(xa=da(ua.buffer)?J.createStream(34962,ua.buffer):J.getBuffer(ua.buffer),zd="type"in ua?ga[ua.type]:xa.dtype,ia=!!ua.normalized,fa=ua.size|0,la=ua.offset|0,Nd=ua.stride|0,Ea=ua.divisor|0);od=m.location;Ec=O[od];
if(1===Xd){Ec.buffer||H.enableVertexAttribArray(od);fd=fa||2;if(Ec.type!==zd||Ec.size!==fd||Ec.buffer!==xa||Ec.normalized!==ia||Ec.offset!==la||Ec.stride!==Nd)H.bindBuffer(34962,xa.buffer),H.vertexAttribPointer(od,fd,zd,ia,Nd,la),Ec.type=zd,Ec.size=fd,Ec.buffer=xa,Ec.normalized=ia,Ec.offset=la,Ec.stride=Nd;Ec.divisor!==Ea&&(ha.vertexAttribDivisorANGLE(od,Ea),Ec.divisor=Ea)}else if(Ec.buffer&&(H.disableVertexAttribArray(od),Ec.buffer=null),Ec.x!==bd||Ec.y!==pd||Ec.z!==Lc||Ec.w!==md)H.vertexAttrib4f(od,
bd,pd,Lc,md),Ec.x=bd,Ec.y=pd,Ec.z=Lc,Ec.w=md;Ga.buffer=e.positionBuffer;Pc=!1;Ic=null;Bb=0;Fb=!1;yb=sc=0;wc=1;Cb=0;Jc=5126;Xc=gd=Fc=kc=0;da(Ga)?(Pc=!0,Ic=J.createStream(34962,Ga),Jc=Ic.dtype):(Ic=J.getBuffer(Ga))?Jc=Ic.dtype:"constant"in Ga?(wc=2,"number"===typeof Ga.constant?(Fc=Ga.constant,gd=Xc=kc=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,gd=1<Ga.constant.length?Ga.constant[1]:0,Xc=2<Ga.constant.length?Ga.constant[2]:0,kc=3<Ga.constant.length?Ga.constant[3]:0)):(Ic=da(Ga.buffer)?J.createStream(34962,
Ga.buffer):J.getBuffer(Ga.buffer),Jc="type"in Ga?ga[Ga.type]:Ic.dtype,Fb=!!Ga.normalized,yb=Ga.size|0,sc=Ga.offset|0,Cb=Ga.stride|0,Bb=Ga.divisor|0);Dc=E.location;cc=O[Dc];if(1===wc){cc.buffer||H.enableVertexAttribArray(Dc);Gc=yb||2;if(cc.type!==Jc||cc.size!==Gc||cc.buffer!==Ic||cc.normalized!==Fb||cc.offset!==sc||cc.stride!==Cb)H.bindBuffer(34962,Ic.buffer),H.vertexAttribPointer(Dc,Gc,Jc,Fb,Cb,sc),cc.type=Jc,cc.size=Gc,cc.buffer=Ic,cc.normalized=Fb,cc.offset=sc,cc.stride=Cb;cc.divisor!==Bb&&(ha.vertexAttribDivisorANGLE(Dc,
Bb),cc.divisor=Bb)}else if(cc.buffer&&(H.disableVertexAttribArray(Dc),cc.buffer=null),cc.x!==Fc||cc.y!==gd||cc.z!==Xc||cc.w!==kc)H.vertexAttrib4f(Dc,Fc,gd,Xc,kc),cc.x=Fc,cc.y=gd,cc.z=Xc,cc.w=kc;hb.buffer=e.positionBuffer;nc=!1;oc=null;lc=0;dc=!1;Tc=fb=0;zb=1;cb=0;Nb=5126;qd=Va=pb=ab=0;da(hb)?(nc=!0,oc=J.createStream(34962,hb),Nb=oc.dtype):(oc=J.getBuffer(hb))?Nb=oc.dtype:"constant"in hb?(zb=2,"number"===typeof hb.constant?(pb=hb.constant,Va=qd=ab=0):(pb=0<hb.constant.length?hb.constant[0]:0,Va=1<
hb.constant.length?hb.constant[1]:0,qd=2<hb.constant.length?hb.constant[2]:0,ab=3<hb.constant.length?hb.constant[3]:0)):(oc=da(hb.buffer)?J.createStream(34962,hb.buffer):J.getBuffer(hb.buffer),Nb="type"in hb?ga[hb.type]:oc.dtype,dc=!!hb.normalized,Tc=hb.size|0,fb=hb.offset|0,cb=hb.stride|0,lc=hb.divisor|0);Ib=ka.location;Jb=O[Ib];if(1===zb){Jb.buffer||H.enableVertexAttribArray(Ib);pc=Tc||2;if(Jb.type!==Nb||Jb.size!==pc||Jb.buffer!==oc||Jb.normalized!==dc||Jb.offset!==fb||Jb.stride!==cb)H.bindBuffer(34962,
oc.buffer),H.vertexAttribPointer(Ib,pc,Nb,dc,cb,fb),Jb.type=Nb,Jb.size=pc,Jb.buffer=oc,Jb.normalized=dc,Jb.offset=fb,Jb.stride=cb;Jb.divisor!==lc&&(ha.vertexAttribDivisorANGLE(Ib,lc),Jb.divisor=lc)}else if(Jb.buffer&&(H.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==pb||Jb.y!==Va||Jb.z!==qd||Jb.w!==ab)H.vertexAttrib4f(Ib,pb,Va,qd,ab),Jb.x=pb,Jb.y=Va,Jb.z=qd,Jb.w=ab;ba.buffer=e.positionBuffer;Ob=!1;kb=null;Gb=0;Db=!1;ib=xb=0;Zb=1;Pb=0;mb=5126;hc=qb=Vb=Ta=0;da(ba)?(Ob=!0,kb=J.createStream(34962,
ba),mb=kb.dtype):(kb=J.getBuffer(ba))?mb=kb.dtype:"constant"in ba?(Zb=2,"number"===typeof ba.constant?(Vb=ba.constant,qb=hc=Ta=0):(Vb=0<ba.constant.length?ba.constant[0]:0,qb=1<ba.constant.length?ba.constant[1]:0,hc=2<ba.constant.length?ba.constant[2]:0,Ta=3<ba.constant.length?ba.constant[3]:0)):(kb=da(ba.buffer)?J.createStream(34962,ba.buffer):J.getBuffer(ba.buffer),mb="type"in ba?ga[ba.type]:kb.dtype,Db=!!ba.normalized,ib=ba.size|0,xb=ba.offset|0,Pb=ba.stride|0,Gb=ba.divisor|0);jb=ma.location;rb=
O[jb];if(1===Zb){rb.buffer||H.enableVertexAttribArray(jb);Ja=ib||2;if(rb.type!==mb||rb.size!==Ja||rb.buffer!==kb||rb.normalized!==Db||rb.offset!==xb||rb.stride!==Pb)H.bindBuffer(34962,kb.buffer),H.vertexAttribPointer(jb,Ja,mb,Db,Pb,xb),rb.type=mb,rb.size=Ja,rb.buffer=kb,rb.normalized=Db,rb.offset=xb,rb.stride=Pb;rb.divisor!==Gb&&(ha.vertexAttribDivisorANGLE(jb,Gb),rb.divisor=Gb)}else if(rb.buffer&&(H.disableVertexAttribArray(jb),rb.buffer=null),rb.x!==Vb||rb.y!==qb||rb.z!==hc||rb.w!==Ta)H.vertexAttrib4f(jb,
Vb,qb,hc,Ta),rb.x=Vb,rb.y=qb,rb.z=hc,rb.w=Ta;Z.buffer=e.colorBuffer;sb=!1;La=null;eb=0;gb=!1;lb=Ma=0;Wa=1;ub=0;tb=5126;Kb=Sa=Cc=Pa=0;da(Z)?(sb=!0,La=J.createStream(34962,Z),tb=La.dtype):(La=J.getBuffer(Z))?tb=La.dtype:"constant"in Z?(Wa=2,"number"===typeof Z.constant?(Cc=Z.constant,Sa=Kb=Pa=0):(Cc=0<Z.constant.length?Z.constant[0]:0,Sa=1<Z.constant.length?Z.constant[1]:0,Kb=2<Z.constant.length?Z.constant[2]:0,Pa=3<Z.constant.length?Z.constant[3]:0)):(La=da(Z.buffer)?J.createStream(34962,Z.buffer):
J.getBuffer(Z.buffer),tb="type"in Z?ga[Z.type]:La.dtype,gb=!!Z.normalized,lb=Z.size|0,Ma=Z.offset|0,ub=Z.stride|0,eb=Z.divisor|0);Eb=T.location;Na=O[Eb];if(1===Wa){Na.buffer||H.enableVertexAttribArray(Eb);Qc=lb||4;if(Na.type!==tb||Na.size!==Qc||Na.buffer!==La||Na.normalized!==gb||Na.offset!==Ma||Na.stride!==ub)H.bindBuffer(34962,La.buffer),H.vertexAttribPointer(Eb,Qc,tb,gb,ub,Ma),Na.type=tb,Na.size=Qc,Na.buffer=La,Na.normalized=gb,Na.offset=Ma,Na.stride=ub;Na.divisor!==eb&&(ha.vertexAttribDivisorANGLE(Eb,
eb),Na.divisor=eb)}else if(Na.buffer&&(H.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Cc||Na.y!==Sa||Na.z!==Kb||Na.w!==Pa)H.vertexAttrib4f(Eb,Cc,Sa,Kb,Pa),Na.x=Cc,Na.y=Sa,Na.z=Kb,Na.w=Pa;Ka.buffer=e.colorBuffer;Za=!1;Lb=null;Mb=0;nb=!1;$b=Oa=0;Qa=1;vb=0;wb=5126;Ac=ec=ob=Ua=0;da(Ka)?(Za=!0,Lb=J.createStream(34962,Ka),wb=Lb.dtype):(Lb=J.getBuffer(Ka))?wb=Lb.dtype:"constant"in Ka?(Qa=2,"number"===typeof Ka.constant?(ob=Ka.constant,ec=Ac=Ua=0):(ob=0<Ka.constant.length?Ka.constant[0]:0,ec=1<Ka.constant.length?
Ka.constant[1]:0,Ac=2<Ka.constant.length?Ka.constant[2]:0,Ua=3<Ka.constant.length?Ka.constant[3]:0)):(Lb=da(Ka.buffer)?J.createStream(34962,Ka.buffer):J.getBuffer(Ka.buffer),wb="type"in Ka?ga[Ka.type]:Lb.dtype,nb=!!Ka.normalized,$b=Ka.size|0,Oa=Ka.offset|0,vb=Ka.stride|0,Mb=Ka.divisor|0);tc=X.location;bb=O[tc];if(1===Qa){bb.buffer||H.enableVertexAttribArray(tc);ic=$b||4;if(bb.type!==wb||bb.size!==ic||bb.buffer!==Lb||bb.normalized!==nb||bb.offset!==Oa||bb.stride!==vb)H.bindBuffer(34962,Lb.buffer),
H.vertexAttribPointer(tc,ic,wb,nb,vb,Oa),bb.type=wb,bb.size=ic,bb.buffer=Lb,bb.normalized=nb,bb.offset=Oa,bb.stride=vb;bb.divisor!==Mb&&(ha.vertexAttribDivisorANGLE(tc,Mb),bb.divisor=Mb)}else if(bb.buffer&&(H.disableVertexAttribArray(tc),bb.buffer=null),bb.x!==ob||bb.y!==ec||bb.z!==Ac||bb.w!==Ua)H.vertexAttrib4f(tc,ob,ec,Ac,Ua),bb.x=ob,bb.y=ec,bb.z=Ac,bb.w=Ua;Ca=C.location;Xa=O[Ca];Xa.buffer||H.enableVertexAttribArray(Ca);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==l||!1!==Xa.normalized||0!==Xa.offset||
8!==Xa.stride)H.bindBuffer(34962,l.buffer),H.vertexAttribPointer(Ca,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=l,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(ha.vertexAttribDivisorANGLE(Ca,0),Xa.divisor=0);Mc=h.location;Ab=O[Mc];Ab.buffer||H.enableVertexAttribArray(Mc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==a||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)H.bindBuffer(34962,a.buffer),H.vertexAttribPointer(Mc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=a,Ab.normalized=
!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ha.vertexAttribDivisorANGLE(Mc,0),Ab.divisor=0);$a=e.scale;H.uniform2f(Ba.location,$a[0],$a[1]);Wb=e.translate;H.uniform2f(ca.location,Wb[0],Wb[1]);H.uniform1f(V.location,e.thickness);H.uniform1f(I.location,e.depth);rc=f.call(this,u,e,0);H.uniform4f(S.location,rc[0],rc[1],rc[2],rc[3]);H.uniform1f(U.location,e.miterLimit);Xb=g.call(this,u,e,0);H.uniform1f(d.location,Xb);H.uniform1f(y.location,e.dashLength);H.uniform1f(F.location,e.opacity);(Qb=e.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;H.uniform1i(P.location,Kc.bind());(Rb=M.elements)?H.bindBuffer(34963,Rb.buffer.buffer):Da.currentVAO&&(Rb=qa.getElements(Da.currentVAO.elements))&&H.bindBuffer(34963,Rb.buffer.buffer);je=e.count;0<je?Rb?ha.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),je):ha.drawArraysInstancedANGLE(5,0,4,je):0>je&&(Rb?H.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):H.drawArrays(5,0,4));K.dirty=!0;Da.setVAO(null);u.viewportWidth=q;u.viewportHeight=
v;za&&(B.cpuTime+=performance.now()-ta);pa&&J.destroyStream(xa);Pc&&J.destroyStream(Ic);nc&&J.destroyStream(oc);Ob&&J.destroyStream(kb);sb&&J.destroyStream(La);Za&&J.destroyStream(Lb);Kc.unbind()},scope:function(c,d,e){var h,b,k,g,f,m,z,A,t,L,na,aa,r,y,wa,Ra,Ha,H,O,Tb,E,sa,ea,Y,S,I,F,C,va,N,Fa,qa,ja,T,Ya,V,X,Aa,U,ca,ia,Hb,oa,P,ka,ma,ra,Da,zc,Ba,dc,fb,fa,zb,cb,Nb,ab,pb,Va,Ca,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,
vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,bf,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Pe,Fe,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf;h=c.viewport;b=h.x|0;k=h.y|0;g="width"in h?h.width|0:u.framebufferWidth-
b;f="height"in h?h.height|0:u.framebufferHeight-k;m=u.viewportWidth;u.viewportWidth=g;z=u.viewportHeight;u.viewportHeight=f;A=ya[0];ya[0]=b;t=ya[1];ya[1]=k;L=ya[2];ya[2]=g;na=ya[3];ya[3]=f;aa=za[0];za[0]=0;r=za[1];za[1]=0;y=za[2];za[2]=0;wa=za[3];za[3]=0;Ra=W.blend_enable;W.blend_enable=!0;Ha=Ea[0];Ea[0]=32774;H=Ea[1];Ea[1]=32774;O=pa[0];pa[0]=770;Tb=pa[1];pa[1]=771;E=pa[2];pa[2]=773;sa=pa[3];pa[3]=1;ea=W.cull_enable;W.cull_enable=!0;Y=W.cull_face;W.cull_face=1029;S=n.call(this,u,c,e);I=W.depth_enable;
W.depth_enable=S;F=c.viewport;C=F.x|0;va=F.y|0;N="width"in F?F.width|0:u.framebufferWidth-C;Fa="height"in F?F.height|0:u.framebufferHeight-va;qa=xa[0];xa[0]=C;ja=xa[1];xa[1]=va;T=xa[2];xa[2]=N;Ya=xa[3];xa[3]=Fa;V=W.scissor_enable;W.scissor_enable=!0;X=W.stencil_enable;W.stencil_enable=!1;if(Aa=K.profile)U=performance.now(),B.count++;ca=M.offset;M.offset=0;ia=M.count;M.count=4;Hb=c.count;oa=M.instances;M.instances=Hb;P=M.primitive;M.primitive=5;ka=c.dashLength;ma=ta[23];ta[23]=ka;ra=c.dashTexture;
Da=ta[24];ta[24]=ra;zc=c.depth;Ba=ta[22];ta[22]=zc;dc=c.id;fb=ta[31];ta[31]=dc;fa=c.miterLimit;zb=ta[32];ta[32]=fa;cb=p.call(this,u,c,e);Nb=ta[33];ta[33]=cb;ab=c.opacity;pb=ta[10];ta[10]=ab;Va=u.pixelRatio;Ca=ta[34];ta[34]=Va;Ib=c.scale;Jb=ta[6];ta[6]=Ib;pc=c.scaleFract;Ob=ta[7];ta[7]=pc;kb=c.thickness;Gb=ta[21];ta[21]=kb;Db=c.translate;xb=ta[8];ta[8]=Db;ib=c.translateFract;Zb=ta[9];ta[9]=ib;Pb=v.call(this,u,c,e);mb=ta[3];ta[3]=Pb;Z.buffer=c.colorBuffer;Ta=!1;Vb=null;qb=0;hc=!1;rb=jb=0;Ja=1;sb=0;
La=5126;lb=Ma=gb=eb=0;da(Z)?(Ta=!0,Vb=J.createStream(34962,Z),La=Vb.dtype):(Vb=J.getBuffer(Z))?La=Vb.dtype:"constant"in Z?(Ja=2,"number"===typeof Z.constant?(gb=Z.constant,Ma=lb=eb=0):(gb=0<Z.constant.length?Z.constant[0]:0,Ma=1<Z.constant.length?Z.constant[1]:0,lb=2<Z.constant.length?Z.constant[2]:0,eb=3<Z.constant.length?Z.constant[3]:0)):(Vb=da(Z.buffer)?J.createStream(34962,Z.buffer):J.getBuffer(Z.buffer),La="type"in Z?ga[Z.type]:Vb.dtype,hc=!!Z.normalized,rb=Z.size|0,jb=Z.offset|0,sb=Z.stride|
0,qb=Z.divisor|0);Wa=R.buffer;R.buffer=Vb;ub=R.divisor;R.divisor=qb;tb=R.normalized;R.normalized=hc;Pa=R.offset;R.offset=jb;Cc=R.size;R.size=rb;Sa=R.state;R.state=Ja;Kb=R.stride;R.stride=sb;Eb=R.type;R.type=La;Na=R.w;R.w=eb;Qc=R.x;R.x=gb;Za=R.y;R.y=Ma;Lb=R.z;R.z=lb;ua.buffer=c.positionBuffer;Mb=!1;nb=null;Oa=0;$b=!1;vb=Qa=0;wb=1;Ua=0;ob=5126;bb=tc=Ac=ec=0;da(ua)?(Mb=!0,nb=J.createStream(34962,ua),ob=nb.dtype):(nb=J.getBuffer(ua))?ob=nb.dtype:"constant"in ua?(wb=2,"number"===typeof ua.constant?(Ac=
ua.constant,tc=bb=ec=0):(Ac=0<ua.constant.length?ua.constant[0]:0,tc=1<ua.constant.length?ua.constant[1]:0,bb=2<ua.constant.length?ua.constant[2]:0,ec=3<ua.constant.length?ua.constant[3]:0)):(nb=da(ua.buffer)?J.createStream(34962,ua.buffer):J.getBuffer(ua.buffer),ob="type"in ua?ga[ua.type]:nb.dtype,$b=!!ua.normalized,vb=ua.size|0,Qa=ua.offset|0,Ua=ua.stride|0,Oa=ua.divisor|0);ic=G.buffer;G.buffer=nb;wd=G.divisor;G.divisor=Oa;Xa=G.normalized;G.normalized=$b;Mc=G.offset;G.offset=Qa;Ab=G.size;G.size=
vb;$a=G.state;G.state=wb;Wb=G.stride;G.stride=Ua;rc=G.type;G.type=ob;Xb=G.w;G.w=ec;Qb=G.x;G.x=Ac;Kc=G.y;G.y=tc;Rb=G.z;G.z=bb;Ka.buffer=c.colorBuffer;je=!1;Hc=null;sd=0;Nc=!1;Jd=Yc=0;mc=1;uc=0;fc=5126;Yb=Ub=qc=db=0;da(Ka)?(je=!0,Hc=J.createStream(34962,Ka),fc=Hc.dtype):(Hc=J.getBuffer(Ka))?fc=Hc.dtype:"constant"in Ka?(mc=2,"number"===typeof Ka.constant?(qc=Ka.constant,Ub=Yb=db=0):(qc=0<Ka.constant.length?Ka.constant[0]:0,Ub=1<Ka.constant.length?Ka.constant[1]:0,Yb=2<Ka.constant.length?Ka.constant[2]:
0,db=3<Ka.constant.length?Ka.constant[3]:0)):(Hc=da(Ka.buffer)?J.createStream(34962,Ka.buffer):J.getBuffer(Ka.buffer),fc="type"in Ka?ga[Ka.type]:Hc.dtype,Nc=!!Ka.normalized,Jd=Ka.size|0,Yc=Ka.offset|0,uc=Ka.stride|0,sd=Ka.divisor|0);bc=x.buffer;x.buffer=Hc;gc=x.divisor;x.divisor=sd;xc=x.normalized;x.normalized=Nc;Bc=x.offset;x.offset=Yc;cd=x.size;x.size=Jd;Rc=x.state;x.state=mc;Sc=x.stride;x.stride=uc;Uc=x.type;x.type=fc;Zc=x.w;x.w=db;ld=x.x;x.x=qc;dd=x.y;x.y=Ub;$c=x.z;x.z=Yb;Ga.buffer=c.positionBuffer;
jc=!1;ac=null;ad=0;Wc=!1;yc=ed=0;id=1;td=0;Ad=5126;Od=bf=jd=te=0;da(Ga)?(jc=!0,ac=J.createStream(34962,Ga),Ad=ac.dtype):(ac=J.getBuffer(Ga))?Ad=ac.dtype:"constant"in Ga?(id=2,"number"===typeof Ga.constant?(jd=Ga.constant,bf=Od=te=0):(jd=0<Ga.constant.length?Ga.constant[0]:0,bf=1<Ga.constant.length?Ga.constant[1]:0,Od=2<Ga.constant.length?Ga.constant[2]:0,te=3<Ga.constant.length?Ga.constant[3]:0)):(ac=da(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Ad="type"in Ga?ga[Ga.type]:ac.dtype,
Wc=!!Ga.normalized,yc=Ga.size|0,ed=Ga.offset|0,td=Ga.stride|0,ad=Ga.divisor|0);ee=D.buffer;D.buffer=ac;ye=D.divisor;D.divisor=ad;Yd=D.normalized;D.normalized=Wc;Id=D.offset;D.offset=ed;Gd=D.size;D.size=yc;nd=D.state;D.state=id;Vc=D.stride;D.stride=td;ud=D.type;D.type=Ad;rd=D.w;D.w=te;kd=D.x;D.x=jd;vd=D.y;D.y=bf;Bd=D.z;D.z=Od;Dd=ha.buffer;ha.buffer=l;he=ha.divisor;ha.divisor=0;ke=ha.normalized;ha.normalized=!1;ue=ha.offset;ha.offset=0;le=ha.size;ha.size=0;ie=ha.state;ha.state=1;fe=ha.stride;ha.stride=
8;ve=ha.type;ha.type=5126;be=ha.w;ha.w=0;me=ha.x;ha.x=0;Oc=ha.y;ha.y=0;hd=ha.z;ha.z=0;we=w.buffer;w.buffer=a;pe=w.divisor;w.divisor=0;Kd=w.normalized;w.normalized=!1;Pd=w.offset;w.offset=4;Rd=w.size;w.size=0;Sd=w.state;w.state=1;ne=w.stride;w.stride=8;Ae=w.type;w.type=5126;De=w.w;w.w=0;re=w.x;w.x=0;Re=w.y;w.y=0;Se=w.z;w.z=0;hb.buffer=c.positionBuffer;Ne=!1;xe=null;Ge=0;Ie=!1;Ke=Je=0;He=1;Ld=0;Vd=5126;Hd=Le=ce=ae=0;da(hb)?(Ne=!0,xe=J.createStream(34962,hb),Vd=xe.dtype):(xe=J.getBuffer(hb))?Vd=xe.dtype:
"constant"in hb?(He=2,"number"===typeof hb.constant?(ce=hb.constant,Le=Hd=ae=0):(ce=0<hb.constant.length?hb.constant[0]:0,Le=1<hb.constant.length?hb.constant[1]:0,Hd=2<hb.constant.length?hb.constant[2]:0,ae=3<hb.constant.length?hb.constant[3]:0)):(xe=da(hb.buffer)?J.createStream(34962,hb.buffer):J.getBuffer(hb.buffer),Vd="type"in hb?ga[hb.type]:xe.dtype,Ie=!!hb.normalized,Ke=hb.size|0,Je=hb.offset|0,Ld=hb.stride|0,Ge=hb.divisor|0);Td=Q.buffer;Q.buffer=xe;Ee=Q.divisor;Q.divisor=Ge;Me=Q.normalized;
Q.normalized=Ie;cf=Q.offset;Q.offset=Je;af=Q.size;Q.size=Ke;Te=Q.state;Q.state=He;Oe=Q.stride;Q.stride=Ld;$e=Q.type;Q.type=Vd;Xe=Q.w;Q.w=ae;Ue=Q.x;Q.x=ce;Ve=Q.y;Q.y=Le;Ud=Q.z;Q.z=Hd;ba.buffer=c.positionBuffer;Zd=!1;We=null;jf=0;nf=!1;kf=ff=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;da(ba)?(Zd=!0,We=J.createStream(34962,ba),rf=We.dtype):(We=J.getBuffer(ba))?rf=We.dtype:"constant"in ba?(lf=2,"number"===typeof ba.constant?(sf=ba.constant,Bf=Cf=of=0):(sf=0<ba.constant.length?ba.constant[0]:0,Bf=1<ba.constant.length?
ba.constant[1]:0,Cf=2<ba.constant.length?ba.constant[2]:0,of=3<ba.constant.length?ba.constant[3]:0)):(We=da(ba.buffer)?J.createStream(34962,ba.buffer):J.getBuffer(ba.buffer),rf="type"in ba?ga[ba.type]:We.dtype,nf=!!ba.normalized,kf=ba.size|0,ff=ba.offset|0,mf=ba.stride|0,jf=ba.divisor|0);Pe=q.buffer;q.buffer=We;Fe=q.divisor;q.divisor=jf;pf=q.normalized;q.normalized=nf;qf=q.offset;q.offset=ff;Df=q.size;q.size=kf;Hf=q.state;q.state=lf;Af=q.stride;q.stride=mf;Ef=q.type;q.type=rf;Ff=q.w;q.w=of;wf=q.x;
q.x=sf;xf=q.y;q.y=Bf;vf=q.z;q.z=Cf;yf=la.vert;la.vert=36;zf=la.frag;la.frag=35;K.dirty=!0;d(u,c,e);u.viewportWidth=m;u.viewportHeight=z;ya[0]=A;ya[1]=t;ya[2]=L;ya[3]=na;za[0]=aa;za[1]=r;za[2]=y;za[3]=wa;W.blend_enable=Ra;Ea[0]=Ha;Ea[1]=H;pa[0]=O;pa[1]=Tb;pa[2]=E;pa[3]=sa;W.cull_enable=ea;W.cull_face=Y;W.depth_enable=I;xa[0]=qa;xa[1]=ja;xa[2]=T;xa[3]=Ya;W.scissor_enable=V;W.stencil_enable=X;Aa&&(B.cpuTime+=performance.now()-U);M.offset=ca;M.count=ia;M.instances=oa;M.primitive=P;ta[23]=ma;ta[24]=Da;
ta[22]=Ba;ta[31]=fb;ta[32]=zb;ta[33]=Nb;ta[10]=pb;ta[34]=Ca;ta[6]=Jb;ta[7]=Ob;ta[21]=Gb;ta[8]=xb;ta[9]=Zb;ta[3]=mb;Ta&&J.destroyStream(Vb);R.buffer=Wa;R.divisor=ub;R.normalized=tb;R.offset=Pa;R.size=Cc;R.state=Sa;R.stride=Kb;R.type=Eb;R.w=Na;R.x=Qc;R.y=Za;R.z=Lb;Mb&&J.destroyStream(nb);G.buffer=ic;G.divisor=wd;G.normalized=Xa;G.offset=Mc;G.size=Ab;G.state=$a;G.stride=Wb;G.type=rc;G.w=Xb;G.x=Qb;G.y=Kc;G.z=Rb;je&&J.destroyStream(Hc);x.buffer=bc;x.divisor=gc;x.normalized=xc;x.offset=Bc;x.size=cd;x.state=
Rc;x.stride=Sc;x.type=Uc;x.w=Zc;x.x=ld;x.y=dd;x.z=$c;jc&&J.destroyStream(ac);D.buffer=ee;D.divisor=ye;D.normalized=Yd;D.offset=Id;D.size=Gd;D.state=nd;D.stride=Vc;D.type=ud;D.w=rd;D.x=kd;D.y=vd;D.z=Bd;ha.buffer=Dd;ha.divisor=he;ha.normalized=ke;ha.offset=ue;ha.size=le;ha.state=ie;ha.stride=fe;ha.type=ve;ha.w=be;ha.x=me;ha.y=Oc;ha.z=hd;w.buffer=we;w.divisor=pe;w.normalized=Kd;w.offset=Pd;w.size=Rd;w.state=Sd;w.stride=ne;w.type=Ae;w.w=De;w.x=re;w.y=Re;w.z=Se;Ne&&J.destroyStream(xe);Q.buffer=Td;Q.divisor=
Ee;Q.normalized=Me;Q.offset=cf;Q.size=af;Q.state=Te;Q.stride=Oe;Q.type=$e;Q.w=Xe;Q.x=Ue;Q.y=Ve;Q.z=Ud;Zd&&J.destroyStream(We);q.buffer=Pe;q.divisor=Fe;q.normalized=pf;q.offset=qf;q.size=Df;q.state=Hf;q.stride=Af;q.type=Ef;q.w=Ff;q.x=wf;q.y=xf;q.z=vf;la.vert=yf;la.frag=zf;K.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q){var N,ia,e,r,T,m,X,E,y,P,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,
ta,Da,za,ea,Ea,ja,pa;N=b.attributes;ia=b.buffer;e=b.context;r=b.current;T=b.draw;m=b.elements;X=b.extensions;E=b.framebuffer;y=b.gl;P=b.isBufferArgs;I=b.next;C=b.shader;h=b.uniforms;U=b.vao;d=I.blend_color;ka=r.blend_color;F=I.blend_equation;ma=r.blend_equation;Ba=I.blend_func;V=r.blend_func;ca=I.colorMask;S=r.colorMask;O=I.depth_range;J=r.depth_range;u=I.polygonOffset_offset;K=r.polygonOffset_offset;M=I.sample_coverage;qa=r.sample_coverage;oa=I.scissor_box;z=r.scissor_box;H=I.stencil_func;da=r.stencil_func;
W=I.stencil_opBack;la=r.stencil_opBack;ta=I.stencil_opFront;Da=r.stencil_opFront;za=I.viewport;ea=r.viewport;Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};pa={offset:8,stride:8};return{batch:function(a,c){var d,h,b,k,g,f;d=E.next;d!==E.cur&&(d?y.bindFramebuffer(36160,d.framebuffer):y.bindFramebuffer(36160,null),E.cur=d);if(r.dirty){var l,F,C,za,Y,L,wa,Ha,sa,ya,Fa,ga,Z,oa,Ba,Ga,hb,ba,fa,Ca,Ia,vc,Sb,ze,Ed,qe,Md,Be,yd,Qd,oe,ge;
l=I.dither;l!==r.dither&&(l?y.enable(3024):y.disable(3024),r.dither=l);F=I.depth_func;F!==r.depth_func&&(y.depthFunc(F),r.depth_func=F);C=O[0];za=O[1];if(C!==J[0]||za!==J[1])y.depthRange(C,za),J[0]=C,J[1]=za;Y=I.depth_mask;Y!==r.depth_mask&&(y.depthMask(Y),r.depth_mask=Y);L=ca[0];wa=ca[1];Ha=ca[2];sa=ca[3];if(L!==S[0]||wa!==S[1]||Ha!==S[2]||sa!==S[3])y.colorMask(L,wa,Ha,sa),S[0]=L,S[1]=wa,S[2]=Ha,S[3]=sa;ya=I.cull_enable;ya!==r.cull_enable&&(ya?y.enable(2884):y.disable(2884),r.cull_enable=ya);Fa=
I.cull_face;Fa!==r.cull_face&&(y.cullFace(Fa),r.cull_face=Fa);ga=I.frontFace;ga!==r.frontFace&&(y.frontFace(ga),r.frontFace=ga);Z=I.lineWidth;Z!==r.lineWidth&&(y.lineWidth(Z),r.lineWidth=Z);oa=I.polygonOffset_enable;oa!==r.polygonOffset_enable&&(oa?y.enable(32823):y.disable(32823),r.polygonOffset_enable=oa);Ba=u[0];Ga=u[1];if(Ba!==K[0]||Ga!==K[1])y.polygonOffset(Ba,Ga),K[0]=Ba,K[1]=Ga;hb=I.sample_alpha;hb!==r.sample_alpha&&(hb?y.enable(32926):y.disable(32926),r.sample_alpha=hb);ba=I.sample_enable;
ba!==r.sample_enable&&(ba?y.enable(32928):y.disable(32928),r.sample_enable=ba);fa=M[0];Ca=M[1];if(fa!==qa[0]||Ca!==qa[1])y.sampleCoverage(fa,Ca),qa[0]=fa,qa[1]=Ca;Ia=I.stencil_mask;Ia!==r.stencil_mask&&(y.stencilMask(Ia),r.stencil_mask=Ia);vc=H[0];Sb=H[1];ze=H[2];if(vc!==da[0]||Sb!==da[1]||ze!==da[2])y.stencilFunc(vc,Sb,ze),da[0]=vc,da[1]=Sb,da[2]=ze;Ed=ta[0];qe=ta[1];Md=ta[2];Be=ta[3];if(Ed!==Da[0]||qe!==Da[1]||Md!==Da[2]||Be!==Da[3])y.stencilOpSeparate(Ed,qe,Md,Be),Da[0]=Ed,Da[1]=qe,Da[2]=Md,Da[3]=
Be;yd=W[0];Qd=W[1];oe=W[2];ge=W[3];if(yd!==la[0]||Qd!==la[1]||oe!==la[2]||ge!==la[3])y.stencilOpSeparate(yd,Qd,oe,ge),la[0]=yd,la[1]=Qd,la[2]=oe,la[3]=ge}y.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;y.enable(3042);r.blend_enable=!0;y.blendEquationSeparate(32774,32774);ma[0]=32774;ma[1]=32774;y.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;y.disable(2929);r.depth_enable=!1;y.enable(3089);r.scissor_enable=!0;y.disable(2960);r.stencil_enable=!1;if(h=r.profile)b=performance.now(),
B.count+=c;y.useProgram(n.program);k=X.angle_instanced_arrays;var Cd;U.setVAO(null);Cd=T.instances;for(g=0;g<c;++g){f=a[g];var Wd,de,$d,Ze,Ye,Qe,Fd,Ce,se,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb;Wd=f.viewport;de=Wd.x|0;$d=Wd.y|0;Ze="width"in Wd?Wd.width|0:e.framebufferWidth-de;Ye="height"in Wd?Wd.height|0:e.framebufferHeight-
$d;Qe=e.viewportWidth;e.viewportWidth=Ze;Fd=e.viewportHeight;e.viewportHeight=Ye;y.viewport(de,$d,Ze,Ye);ea[0]=de;ea[1]=$d;ea[2]=Ze;ea[3]=Ye;Ce=f.viewport;se=Ce.x|0;Xd=Ce.y|0;Nd="width"in Ce?Ce.width|0:e.framebufferWidth-se;zd="height"in Ce?Ce.height|0:e.framebufferHeight-Xd;y.scissor(se,Xd,Nd,zd);z[0]=se;z[1]=Xd;z[2]=Nd;z[3]=zd;ja.buffer=f.positionBuffer;md=!1;bd=null;pd=0;Lc=!1;Ec=od=0;fd=1;Pc=0;Ic=5126;yb=sc=Fb=Bb=0;P(ja)?(md=!0,bd=ia.createStream(34962,ja),Ic=bd.dtype):(bd=ia.getBuffer(ja))?Ic=
bd.dtype:"constant"in ja?(fd=2,"number"===typeof ja.constant?(Fb=ja.constant,sc=yb=Bb=0):(Fb=0<ja.constant.length?ja.constant[0]:0,sc=1<ja.constant.length?ja.constant[1]:0,yb=2<ja.constant.length?ja.constant[2]:0,Bb=3<ja.constant.length?ja.constant[3]:0)):(bd=P(ja.buffer)?ia.createStream(34962,ja.buffer):ia.getBuffer(ja.buffer),Ic="type"in ja?Ea[ja.type]:bd.dtype,Lc=!!ja.normalized,Ec=ja.size|0,od=ja.offset|0,Pc=ja.stride|0,pd=ja.divisor|0);wc=x.location;Cb=N[wc];if(1===fd){Cb.buffer||y.enableVertexAttribArray(wc);
Jc=Ec||2;if(Cb.type!==Ic||Cb.size!==Jc||Cb.buffer!==bd||Cb.normalized!==Lc||Cb.offset!==od||Cb.stride!==Pc)y.bindBuffer(34962,bd.buffer),y.vertexAttribPointer(wc,Jc,Ic,Lc,Pc,od),Cb.type=Ic,Cb.size=Jc,Cb.buffer=bd,Cb.normalized=Lc,Cb.offset=od,Cb.stride=Pc;Cb.divisor!==pd&&(k.vertexAttribDivisorANGLE(wc,pd),Cb.divisor=pd)}else if(Cb.buffer&&(y.disableVertexAttribArray(wc),Cb.buffer=null),Cb.x!==Fb||Cb.y!==sc||Cb.z!==yb||Cb.w!==Bb)y.vertexAttrib4f(wc,Fb,sc,yb,Bb),Cb.x=Fb,Cb.y=sc,Cb.z=yb,Cb.w=Bb;pa.buffer=
f.positionFractBuffer;kc=!1;Fc=null;gd=0;Xc=!1;cc=Dc=0;Gc=1;nc=0;oc=5126;Tc=fb=dc=lc=0;P(pa)?(kc=!0,Fc=ia.createStream(34962,pa),oc=Fc.dtype):(Fc=ia.getBuffer(pa))?oc=Fc.dtype:"constant"in pa?(Gc=2,"number"===typeof pa.constant?(dc=pa.constant,fb=Tc=lc=0):(dc=0<pa.constant.length?pa.constant[0]:0,fb=1<pa.constant.length?pa.constant[1]:0,Tc=2<pa.constant.length?pa.constant[2]:0,lc=3<pa.constant.length?pa.constant[3]:0)):(Fc=P(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),oc="type"in
pa?Ea[pa.type]:Fc.dtype,Xc=!!pa.normalized,cc=pa.size|0,Dc=pa.offset|0,nc=pa.stride|0,gd=pa.divisor|0);zb=D.location;cb=N[zb];if(1===Gc){cb.buffer||y.enableVertexAttribArray(zb);Nb=cc||2;if(cb.type!==oc||cb.size!==Nb||cb.buffer!==Fc||cb.normalized!==Xc||cb.offset!==Dc||cb.stride!==nc)y.bindBuffer(34962,Fc.buffer),y.vertexAttribPointer(zb,Nb,oc,Xc,nc,Dc),cb.type=oc,cb.size=Nb,cb.buffer=Fc,cb.normalized=Xc,cb.offset=Dc,cb.stride=nc;cb.divisor!==gd&&(k.vertexAttribDivisorANGLE(zb,gd),cb.divisor=gd)}else if(cb.buffer&&
(y.disableVertexAttribArray(zb),cb.buffer=null),cb.x!==dc||cb.y!==fb||cb.z!==Tc||cb.w!==lc)y.vertexAttrib4f(zb,dc,fb,Tc,lc),cb.x=dc,cb.y=fb,cb.z=Tc,cb.w=lc;ab=f.fill;pb=ab[0];qd=ab[1];Jb=ab[2];Ob=ab[3];g&&Va===pb&&Ib===qd&&pc===Jb&&kb===Ob||(Va=pb,Ib=qd,pc=Jb,kb=Ob,y.uniform4f(v.location,pb,qd,Jb,Ob));Gb=f.scale;Db=Gb[0];ib=Gb[1];g&&xb===Db&&Zb===ib||(xb=Db,Zb=ib,y.uniform2f(ha.location,Db,ib));Pb=f.scaleFract;mb=Pb[0];Vb=Pb[1];g&&Ta===mb&&qb===Vb||(Ta=mb,qb=Vb,y.uniform2f(w.location,mb,Vb));hc=f.translate;
jb=hc[0];Ja=hc[1];g&&rb===jb&&sb===Ja||(rb=jb,sb=Ja,y.uniform2f(Q.location,jb,Ja));La=f.translateFract;eb=La[0];Ma=La[1];g&&gb===eb&&lb===Ma||(gb=eb,lb=Ma,y.uniform2f(q.location,eb,Ma));Wa=f.id;g&&ub===Wa||(ub=Wa,y.uniform1f(R.location,Wa));tb=f.opacity;g&&Pa===tb||(Pa=tb,y.uniform1f(G.location,tb));Cc=p.call(this,e,f,g);Sa=null;(Sa=(Kb=P(Cc))?m.createStream(Cc):m.getElements(Cc))&&y.bindBuffer(34963,Sa.buffer.buffer);if(Eb=Sa?Sa.vertCount:-1)0<Cd?Sa?k.drawElementsInstancedANGLE(4,Eb,Sa.type,0<<(Sa.type-
5121>>1),Cd):k.drawArraysInstancedANGLE(4,0,Eb,Cd):0>Cd&&(Sa?y.drawElements(4,Eb,Sa.type,0<<(Sa.type-5121>>1)):y.drawArrays(4,0,Eb)),e.viewportWidth=Qe,e.viewportHeight=Fd,md&&ia.destroyStream(bd),kc&&ia.destroyStream(Fc),Kb&&m.destroyStream(Sa)}r.dirty=!0;U.setVAO(null);h&&(B.cpuTime+=performance.now()-b)},draw:function(a){var d,h,b,g,f,l,aa,p,n,F,C,Y,L,wa,Ha,sa,ya,Fa,ga,Z,za,oa;d=E.next;d!==E.cur&&(d?y.bindFramebuffer(36160,d.framebuffer):y.bindFramebuffer(36160,null),E.cur=d);if(r.dirty){d=I.dither;
d!==r.dither&&(d?y.enable(3024):y.disable(3024),r.dither=d);d=I.depth_func;d!==r.depth_func&&(y.depthFunc(d),r.depth_func=d);d=O[0];l=O[1];if(d!==J[0]||l!==J[1])y.depthRange(d,l),J[0]=d,J[1]=l;d=I.depth_mask;d!==r.depth_mask&&(y.depthMask(d),r.depth_mask=d);d=ca[0];l=ca[1];h=ca[2];b=ca[3];if(d!==S[0]||l!==S[1]||h!==S[2]||b!==S[3])y.colorMask(d,l,h,b),S[0]=d,S[1]=l,S[2]=h,S[3]=b;d=I.cull_enable;d!==r.cull_enable&&(d?y.enable(2884):y.disable(2884),r.cull_enable=d);d=I.cull_face;d!==r.cull_face&&(y.cullFace(d),
r.cull_face=d);d=I.frontFace;d!==r.frontFace&&(y.frontFace(d),r.frontFace=d);d=I.lineWidth;d!==r.lineWidth&&(y.lineWidth(d),r.lineWidth=d);d=I.polygonOffset_enable;d!==r.polygonOffset_enable&&(d?y.enable(32823):y.disable(32823),r.polygonOffset_enable=d);d=u[0];l=u[1];if(d!==K[0]||l!==K[1])y.polygonOffset(d,l),K[0]=d,K[1]=l;d=I.sample_alpha;d!==r.sample_alpha&&(d?y.enable(32926):y.disable(32926),r.sample_alpha=d);d=I.sample_enable;d!==r.sample_enable&&(d?y.enable(32928):y.disable(32928),r.sample_enable=
d);d=M[0];l=M[1];if(d!==qa[0]||l!==qa[1])y.sampleCoverage(d,l),qa[0]=d,qa[1]=l;d=I.stencil_mask;d!==r.stencil_mask&&(y.stencilMask(d),r.stencil_mask=d);d=H[0];l=H[1];h=H[2];if(d!==da[0]||l!==da[1]||h!==da[2])y.stencilFunc(d,l,h),da[0]=d,da[1]=l,da[2]=h;d=ta[0];l=ta[1];h=ta[2];b=ta[3];if(d!==Da[0]||l!==Da[1]||h!==Da[2]||b!==Da[3])y.stencilOpSeparate(d,l,h,b),Da[0]=d,Da[1]=l,Da[2]=h,Da[3]=b;d=W[0];l=W[1];h=W[2];b=W[3];if(d!==la[0]||l!==la[1]||h!==la[2]||b!==la[3])y.stencilOpSeparate(d,l,h,b),la[0]=
d,la[1]=l,la[2]=h,la[3]=b}d=a.viewport;h=d.x|0;b=d.y|0;g="width"in d?d.width|0:e.framebufferWidth-h;f="height"in d?d.height|0:e.framebufferHeight-b;d=e.viewportWidth;e.viewportWidth=g;l=e.viewportHeight;e.viewportHeight=f;y.viewport(h,b,g,f);ea[0]=h;ea[1]=b;ea[2]=g;ea[3]=f;y.blendColor(0,0,0,0);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=0;y.enable(3042);r.blend_enable=!0;y.blendEquationSeparate(32774,32774);ma[0]=32774;ma[1]=32774;y.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;y.disable(2929);
r.depth_enable=!1;f=a.viewport;h=f.x|0;b=f.y|0;g="width"in f?f.width|0:e.framebufferWidth-h;f="height"in f?f.height|0:e.framebufferHeight-b;y.scissor(h,b,g,f);z[0]=h;z[1]=b;z[2]=g;z[3]=f;y.enable(3089);r.scissor_enable=!0;y.disable(2960);r.stencil_enable=!1;if(h=r.profile)aa=performance.now(),B.count++;y.useProgram(k.program);b=X.angle_instanced_arrays;U.setVAO(null);ja.buffer=a.positionBuffer;g=!1;p=0;n=!1;C=F=0;Y=1;L=0;wa=5126;Fa=ya=sa=Ha=0;P(ja)?(g=!0,f=ia.createStream(34962,ja),wa=f.dtype):(f=
ia.getBuffer(ja))?wa=f.dtype:"constant"in ja?(Y=2,"number"===typeof ja.constant?(sa=ja.constant,ya=Fa=Ha=0):(sa=0<ja.constant.length?ja.constant[0]:0,ya=1<ja.constant.length?ja.constant[1]:0,Fa=2<ja.constant.length?ja.constant[2]:0,Ha=3<ja.constant.length?ja.constant[3]:0)):(f=P(ja.buffer)?ia.createStream(34962,ja.buffer):ia.getBuffer(ja.buffer),wa="type"in ja?Ea[ja.type]:f.dtype,n=!!ja.normalized,C=ja.size|0,F=ja.offset|0,L=ja.stride|0,p=ja.divisor|0);ga=x.location;Z=N[ga];if(1===Y){Z.buffer||y.enableVertexAttribArray(ga);
C=C||2;if(Z.type!==wa||Z.size!==C||Z.buffer!==f||Z.normalized!==n||Z.offset!==F||Z.stride!==L)y.bindBuffer(34962,f.buffer),y.vertexAttribPointer(ga,C,wa,n,L,F),Z.type=wa,Z.size=C,Z.buffer=f,Z.normalized=n,Z.offset=F,Z.stride=L;Z.divisor!==p&&(b.vertexAttribDivisorANGLE(ga,p),Z.divisor=p)}else if(Z.buffer&&(y.disableVertexAttribArray(ga),Z.buffer=null),Z.x!==sa||Z.y!==ya||Z.z!==Fa||Z.w!==Ha)y.vertexAttrib4f(ga,sa,ya,Fa,Ha),Z.x=sa,Z.y=ya,Z.z=Fa,Z.w=Ha;pa.buffer=a.positionFractBuffer;p=!1;F=0;L=!1;Ha=
wa=0;sa=1;ga=0;Z=5126;oa=za=Fa=ya=0;P(pa)?(p=!0,n=ia.createStream(34962,pa),Z=n.dtype):(n=ia.getBuffer(pa))?Z=n.dtype:"constant"in pa?(sa=2,"number"===typeof pa.constant?(Fa=pa.constant,za=oa=ya=0):(Fa=0<pa.constant.length?pa.constant[0]:0,za=1<pa.constant.length?pa.constant[1]:0,oa=2<pa.constant.length?pa.constant[2]:0,ya=3<pa.constant.length?pa.constant[3]:0)):(n=P(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),Z="type"in pa?Ea[pa.type]:n.dtype,L=!!pa.normalized,Ha=pa.size|
0,wa=pa.offset|0,ga=pa.stride|0,F=pa.divisor|0);C=D.location;Y=N[C];if(1===sa){Y.buffer||y.enableVertexAttribArray(C);Ha=Ha||2;if(Y.type!==Z||Y.size!==Ha||Y.buffer!==n||Y.normalized!==L||Y.offset!==wa||Y.stride!==ga)y.bindBuffer(34962,n.buffer),y.vertexAttribPointer(C,Ha,Z,L,ga,wa),Y.type=Z,Y.size=Ha,Y.buffer=n,Y.normalized=L,Y.offset=wa,Y.stride=ga;Y.divisor!==F&&(b.vertexAttribDivisorANGLE(C,F),Y.divisor=F)}else if(Y.buffer&&(y.disableVertexAttribArray(C),Y.buffer=null),Y.x!==Fa||Y.y!==za||Y.z!==
oa||Y.w!==ya)y.vertexAttrib4f(C,Fa,za,oa,ya),Y.x=Fa,Y.y=za,Y.z=oa,Y.w=ya;F=a.fill;y.uniform4f(v.location,F[0],F[1],F[2],F[3]);F=a.scale;y.uniform2f(ha.location,F[0],F[1]);F=a.scaleFract;y.uniform2f(w.location,F[0],F[1]);F=a.translate;y.uniform2f(Q.location,F[0],F[1]);F=a.translateFract;y.uniform2f(q.location,F[0],F[1]);y.uniform1f(R.location,a.id);y.uniform1f(G.location,a.opacity);F=c.call(this,e,a,0);(F=(a=P(F))?m.createStream(F):m.getElements(F))&&y.bindBuffer(34963,F.buffer.buffer);if(L=F?F.vertCount:
-1)wa=T.instances,0<wa?F?b.drawElementsInstancedANGLE(4,L,F.type,0<<(F.type-5121>>1),wa):b.drawArraysInstancedANGLE(4,0,L,wa):0>wa&&(F?y.drawElements(4,L,F.type,0<<(F.type-5121>>1)):y.drawArrays(4,0,L)),r.dirty=!0,U.setVAO(null),e.viewportWidth=d,e.viewportHeight=l,h&&(B.cpuTime+=performance.now()-aa),g&&ia.destroyStream(f),p&&ia.destroyStream(n),a&&m.destroyStream(F)},scope:function(c,b,k){var z,u,A,t,aa,p,y,H,O,w,L,wa,Ha,n,W,J,E,ea,S,x,q,v,M,D,G,K,da,R,N,Q,qa,ta,V,ha,X,U,ca,la,ka,ma,Da,fa,Ca,Qe,
Fd,Ce,se,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb;z=c.viewport;u=z.x|0;A=z.y|0;t="width"in z?z.width|0:e.framebufferWidth-u;aa="height"in z?z.height|0:e.framebufferHeight-A;p=e.viewportWidth;e.viewportWidth=t;y=e.viewportHeight;e.viewportHeight=aa;H=za[0];za[0]=u;O=za[1];za[1]=A;w=za[2];za[2]=t;L=za[3];za[3]=aa;wa=d[0];d[0]=0;Ha=d[1];d[1]=
0;n=d[2];d[2]=0;W=d[3];d[3]=0;J=I.blend_enable;I.blend_enable=!0;E=F[0];F[0]=32774;ea=F[1];F[1]=32774;S=Ba[0];Ba[0]=770;x=Ba[1];Ba[1]=771;q=Ba[2];Ba[2]=773;v=Ba[3];Ba[3]=1;M=I.depth_enable;I.depth_enable=!1;D=c.viewport;G=D.x|0;K=D.y|0;da="width"in D?D.width|0:e.framebufferWidth-G;R="height"in D?D.height|0:e.framebufferHeight-K;N=oa[0];oa[0]=G;Q=oa[1];oa[1]=K;qa=oa[2];oa[2]=da;ta=oa[3];oa[3]=R;V=I.scissor_enable;I.scissor_enable=!0;ha=I.stencil_enable;I.stencil_enable=!1;if(X=r.profile)U=performance.now(),
B.count++;ca=l.call(this,e,c,k);la=null;la=(ka=P(ca))?m.createStream(ca):m.getElements(ca);ma=T.elements;T.elements=la;Da=T.offset;T.offset=0;fa=la?la.vertCount:-1;Ca=T.count;T.count=fa;Qe=T.primitive;T.primitive=4;Fd=c.fill;Ce=h[14];h[14]=Fd;se=c.id;Xd=h[31];h[31]=se;Nd=c.opacity;zd=h[10];h[10]=Nd;md=e.pixelRatio;bd=h[34];h[34]=md;pd=c.scale;Lc=h[6];h[6]=pd;od=c.scaleFract;Ec=h[7];h[7]=od;fd=c.translate;Pc=h[8];h[8]=fd;Ic=c.translateFract;Bb=h[9];h[9]=Ic;Fb=a.call(this,e,c,k);sc=h[3];h[3]=Fb;ja.buffer=
c.positionBuffer;yb=!1;wc=null;Cb=0;Jc=!1;Fc=kc=0;gd=1;Xc=0;Dc=5126;oc=nc=Gc=cc=0;P(ja)?(yb=!0,wc=ia.createStream(34962,ja),Dc=wc.dtype):(wc=ia.getBuffer(ja))?Dc=wc.dtype:"constant"in ja?(gd=2,"number"===typeof ja.constant?(Gc=ja.constant,nc=oc=cc=0):(Gc=0<ja.constant.length?ja.constant[0]:0,nc=1<ja.constant.length?ja.constant[1]:0,oc=2<ja.constant.length?ja.constant[2]:0,cc=3<ja.constant.length?ja.constant[3]:0)):(wc=P(ja.buffer)?ia.createStream(34962,ja.buffer):ia.getBuffer(ja.buffer),Dc="type"in
ja?Ea[ja.type]:wc.dtype,Jc=!!ja.normalized,Fc=ja.size|0,kc=ja.offset|0,Xc=ja.stride|0,Cb=ja.divisor|0);lc=f.buffer;f.buffer=wc;dc=f.divisor;f.divisor=Cb;fb=f.normalized;f.normalized=Jc;Tc=f.offset;f.offset=kc;zb=f.size;f.size=Fc;cb=f.state;f.state=gd;Nb=f.stride;f.stride=Xc;ab=f.type;f.type=Dc;pb=f.w;f.w=cc;Va=f.x;f.x=Gc;qd=f.y;f.y=nc;Ib=f.z;f.z=oc;pa.buffer=c.positionFractBuffer;Jb=!1;pc=null;Ob=0;kb=!1;Db=Gb=0;xb=1;ib=0;Zb=5126;Vb=Ta=mb=Pb=0;P(pa)?(Jb=!0,pc=ia.createStream(34962,pa),Zb=pc.dtype):
(pc=ia.getBuffer(pa))?Zb=pc.dtype:"constant"in pa?(xb=2,"number"===typeof pa.constant?(mb=pa.constant,Ta=Vb=Pb=0):(mb=0<pa.constant.length?pa.constant[0]:0,Ta=1<pa.constant.length?pa.constant[1]:0,Vb=2<pa.constant.length?pa.constant[2]:0,Pb=3<pa.constant.length?pa.constant[3]:0)):(pc=P(pa.buffer)?ia.createStream(34962,pa.buffer):ia.getBuffer(pa.buffer),Zb="type"in pa?Ea[pa.type]:pc.dtype,kb=!!pa.normalized,Db=pa.size|0,Gb=pa.offset|0,ib=pa.stride|0,Ob=pa.divisor|0);qb=g.buffer;g.buffer=pc;hc=g.divisor;
g.divisor=Ob;jb=g.normalized;g.normalized=kb;rb=g.offset;g.offset=Gb;Ja=g.size;g.size=Db;sb=g.state;g.state=xb;La=g.stride;g.stride=ib;eb=g.type;g.type=Zb;gb=g.w;g.w=Pb;Ma=g.x;g.x=mb;lb=g.y;g.y=Ta;Wa=g.z;g.z=Vb;ub=C.vert;C.vert=42;tb=C.frag;C.frag=41;r.dirty=!0;b(e,c,k);e.viewportWidth=p;e.viewportHeight=y;za[0]=H;za[1]=O;za[2]=w;za[3]=L;d[0]=wa;d[1]=Ha;d[2]=n;d[3]=W;I.blend_enable=J;F[0]=E;F[1]=ea;Ba[0]=S;Ba[1]=x;Ba[2]=q;Ba[3]=v;I.depth_enable=M;oa[0]=N;oa[1]=Q;oa[2]=qa;oa[3]=ta;I.scissor_enable=
V;I.stencil_enable=ha;X&&(B.cpuTime+=performance.now()-U);ka&&m.destroyStream(la);T.elements=ma;T.offset=Da;T.count=Ca;T.primitive=Qe;h[14]=Ce;h[31]=Xd;h[10]=zd;h[34]=bd;h[6]=Lc;h[7]=Ec;h[8]=Pc;h[9]=Bb;h[3]=sc;yb&&ia.destroyStream(wc);f.buffer=lc;f.divisor=dc;f.normalized=fb;f.offset=Tc;f.size=zb;f.state=cb;f.stride=Nb;f.type=ab;f.w=pb;f.x=Va;f.y=qd;f.z=Ib;Jb&&ia.destroyStream(pc);g.buffer=qb;g.divisor=hc;g.normalized=jb;g.offset=rb;g.size=Ja;g.state=sb;g.stride=La;g.type=eb;g.w=gb;g.x=Ma;g.y=lb;
g.z=Wa;C.vert=ub;C.frag=tb;r.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,P,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya){var A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa,ga,Z,ua,Ka,Ga,hb,ba,fa,Ca,Ia,vc,Sb,ze,Ed,qe,Md,Be,yd,Qd,oe,ge,Cd,Wd,
de,$d;A=b.attributes;t=b.buffer;aa=b.context;va=b.current;xa=b.draw;zc=b.elements;Hb=b.extensions;Y=b.framebuffer;L=b.gl;wa=b.isBufferArgs;Ha=b.next;sa=b.shader;ya=b.uniforms;Fa=b.vao;ga=Ha.blend_color;Z=va.blend_color;ua=Ha.blend_equation;Ka=va.blend_equation;Ga=Ha.blend_func;hb=va.blend_func;ba=Ha.colorMask;fa=va.colorMask;Ca=Ha.depth_range;Ia=va.depth_range;vc=Ha.polygonOffset_offset;Sb=va.polygonOffset_offset;ze=Ha.sample_coverage;Ed=va.sample_coverage;qe=Ha.scissor_box;Md=va.scissor_box;Be=Ha.stencil_func;
yd=va.stencil_func;Qd=Ha.stencil_opBack;oe=va.stencil_opBack;ge=Ha.stencil_opFront;Cd=va.stencil_opFront;Wd=Ha.viewport;de=va.viewport;$d={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var d,h,e,b,k,g;d=Y.next;d!==Y.cur&&(d?L.bindFramebuffer(36160,d.framebuffer):L.bindFramebuffer(36160,null),Y.cur=d);if(va.dirty){var f,m,l,r,p,y,w,n,E,sa,x,q,C,ga,I,v,D,G,ya,R,N,Q,T,ha,X,U,P,ia,ra,Ga,zb,cb,Nb,ab;f=Ha.dither;f!==va.dither&&(f?
L.enable(3024):L.disable(3024),va.dither=f);m=ua[0];l=ua[1];if(m!==Ka[0]||l!==Ka[1])L.blendEquationSeparate(m,l),Ka[0]=m,Ka[1]=l;r=Ha.depth_func;r!==va.depth_func&&(L.depthFunc(r),va.depth_func=r);p=Ca[0];y=Ca[1];if(p!==Ia[0]||y!==Ia[1])L.depthRange(p,y),Ia[0]=p,Ia[1]=y;w=Ha.depth_mask;w!==va.depth_mask&&(L.depthMask(w),va.depth_mask=w);n=ba[0];E=ba[1];sa=ba[2];x=ba[3];if(n!==fa[0]||E!==fa[1]||sa!==fa[2]||x!==fa[3])L.colorMask(n,E,sa,x),fa[0]=n,fa[1]=E,fa[2]=sa,fa[3]=x;q=Ha.cull_enable;q!==va.cull_enable&&
(q?L.enable(2884):L.disable(2884),va.cull_enable=q);C=Ha.cull_face;C!==va.cull_face&&(L.cullFace(C),va.cull_face=C);ga=Ha.frontFace;ga!==va.frontFace&&(L.frontFace(ga),va.frontFace=ga);I=Ha.lineWidth;I!==va.lineWidth&&(L.lineWidth(I),va.lineWidth=I);v=Ha.polygonOffset_enable;v!==va.polygonOffset_enable&&(v?L.enable(32823):L.disable(32823),va.polygonOffset_enable=v);D=vc[0];G=vc[1];if(D!==Sb[0]||G!==Sb[1])L.polygonOffset(D,G),Sb[0]=D,Sb[1]=G;ya=Ha.sample_alpha;ya!==va.sample_alpha&&(ya?L.enable(32926):
L.disable(32926),va.sample_alpha=ya);R=Ha.sample_enable;R!==va.sample_enable&&(R?L.enable(32928):L.disable(32928),va.sample_enable=R);N=ze[0];Q=ze[1];if(N!==Ed[0]||Q!==Ed[1])L.sampleCoverage(N,Q),Ed[0]=N,Ed[1]=Q;T=Ha.stencil_mask;T!==va.stencil_mask&&(L.stencilMask(T),va.stencil_mask=T);ha=Be[0];X=Be[1];U=Be[2];if(ha!==yd[0]||X!==yd[1]||U!==yd[2])L.stencilFunc(ha,X,U),yd[0]=ha,yd[1]=X,yd[2]=U;P=ge[0];ia=ge[1];ra=ge[2];Ga=ge[3];if(P!==Cd[0]||ia!==Cd[1]||ra!==Cd[2]||Ga!==Cd[3])L.stencilOpSeparate(P,
ia,ra,Ga),Cd[0]=P,Cd[1]=ia,Cd[2]=ra,Cd[3]=Ga;zb=Qd[0];cb=Qd[1];Nb=Qd[2];ab=Qd[3];if(zb!==oe[0]||cb!==oe[1]||Nb!==oe[2]||ab!==oe[3])L.stencilOpSeparate(zb,cb,Nb,ab),oe[0]=zb,oe[1]=cb,oe[2]=Nb,oe[3]=ab}L.blendColor(0,0,0,1);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=1;L.enable(3042);va.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);hb[0]=770;hb[1]=771;hb[2]=773;hb[3]=1;L.disable(2929);va.depth_enable=!1;L.enable(3089);va.scissor_enable=!0;L.disable(2960);va.stencil_enable=!1;if(h=va.profile)e=performance.now(),
B.count+=c;L.useProgram(ka.program);b=Hb.angle_instanced_arrays;var pb;Fa.setVAO(null);L.uniform1i(H.location,!1);L.uniform1i(Da.location,K.bind());pb=xa.instances;for(k=0;k<c;++k){g=a[k];var Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,qe,Hc,sd,Nc,Yc,Wd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,bf,Od,ee,
ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Pe,Fe,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf;Va=g.viewport;qd=Va.x|0;Ib=Va.y|0;Jb="width"in Va?Va.width|0:aa.framebufferWidth-qd;pc="height"in Va?Va.height|0:aa.framebufferHeight-Ib;Ob=aa.viewportWidth;aa.viewportWidth=Jb;kb=aa.viewportHeight;aa.viewportHeight=
pc;L.viewport(qd,Ib,Jb,pc);de[0]=qd;de[1]=Ib;de[2]=Jb;de[3]=pc;Gb=g.viewport;Db=Gb.x|0;xb=Gb.y|0;ib="width"in Gb?Gb.width|0:aa.framebufferWidth-Db;Zb="height"in Gb?Gb.height|0:aa.framebufferHeight-xb;L.scissor(Db,xb,ib,Zb);Md[0]=Db;Md[1]=xb;Md[2]=ib;Md[3]=Zb;Pb=F.call(this,aa,g,k);mb=!1;Ta=null;Vb=0;qb=!1;jb=hc=0;rb=1;Ja=0;sb=5126;Ma=gb=eb=La=0;wa(Pb)?(mb=!0,Ta=t.createStream(34962,Pb),sb=Ta.dtype):(Ta=t.getBuffer(Pb))?sb=Ta.dtype:"constant"in Pb?(rb=2,"number"===typeof Pb.constant?(eb=Pb.constant,
gb=Ma=La=0):(eb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,Ma=2<Pb.constant.length?Pb.constant[2]:0,La=3<Pb.constant.length?Pb.constant[3]:0)):(Ta=wa(Pb.buffer)?t.createStream(34962,Pb.buffer):t.getBuffer(Pb.buffer),sb="type"in Pb?$d[Pb.type]:Ta.dtype,qb=!!Pb.normalized,jb=Pb.size|0,hc=Pb.offset|0,Ja=Pb.stride|0,Vb=Pb.divisor|0);lb=Ra.location;Wa=A[lb];if(1===rb){Wa.buffer||L.enableVertexAttribArray(lb);ub=jb||1;if(Wa.type!==sb||Wa.size!==ub||Wa.buffer!==Ta||Wa.normalized!==
qb||Wa.offset!==hc||Wa.stride!==Ja)L.bindBuffer(34962,Ta.buffer),L.vertexAttribPointer(lb,ub,sb,qb,Ja,hc),Wa.type=sb,Wa.size=ub,Wa.buffer=Ta,Wa.normalized=qb,Wa.offset=hc,Wa.stride=Ja;Wa.divisor!==Vb&&(b.vertexAttribDivisorANGLE(lb,Vb),Wa.divisor=Vb)}else if(Wa.buffer&&(L.disableVertexAttribArray(lb),Wa.buffer=null),Wa.x!==eb||Wa.y!==gb||Wa.z!==Ma||Wa.w!==La)L.vertexAttrib4f(lb,eb,gb,Ma,La),Wa.x=eb,Wa.y=gb,Wa.z=Ma,Wa.w=La;tb=ma.call(this,aa,g,k);Pa=!1;Cc=null;Sa=0;Kb=!1;Na=Eb=0;Qc=1;Za=0;Lb=5126;
$b=Oa=nb=Mb=0;wa(tb)?(Pa=!0,Cc=t.createStream(34962,tb),Lb=Cc.dtype):(Cc=t.getBuffer(tb))?Lb=Cc.dtype:"constant"in tb?(Qc=2,"number"===typeof tb.constant?(nb=tb.constant,Oa=$b=Mb=0):(nb=0<tb.constant.length?tb.constant[0]:0,Oa=1<tb.constant.length?tb.constant[1]:0,$b=2<tb.constant.length?tb.constant[2]:0,Mb=3<tb.constant.length?tb.constant[3]:0)):(Cc=wa(tb.buffer)?t.createStream(34962,tb.buffer):t.getBuffer(tb.buffer),Lb="type"in tb?$d[tb.type]:Cc.dtype,Kb=!!tb.normalized,Na=tb.size|0,Eb=tb.offset|
0,Za=tb.stride|0,Sa=tb.divisor|0);Qa=Tb.location;vb=A[Qa];if(1===Qc){vb.buffer||L.enableVertexAttribArray(Qa);wb=Na||1;if(vb.type!==Lb||vb.size!==wb||vb.buffer!==Cc||vb.normalized!==Kb||vb.offset!==Eb||vb.stride!==Za)L.bindBuffer(34962,Cc.buffer),L.vertexAttribPointer(Qa,wb,Lb,Kb,Za,Eb),vb.type=Lb,vb.size=wb,vb.buffer=Cc,vb.normalized=Kb,vb.offset=Eb,vb.stride=Za;vb.divisor!==Sa&&(b.vertexAttribDivisorANGLE(Qa,Sa),vb.divisor=Sa)}else if(vb.buffer&&(L.disableVertexAttribArray(Qa),vb.buffer=null),vb.x!==
nb||vb.y!==Oa||vb.z!==$b||vb.w!==Mb)L.vertexAttrib4f(Qa,nb,Oa,$b,Mb),vb.x=nb,vb.y=Oa,vb.z=$b,vb.w=Mb;Ua=Ba.call(this,aa,g,k);ob=!1;ec=null;Ac=0;tc=!1;ic=bb=0;wd=1;Xa=0;Mc=5126;rc=Wb=$a=Ab=0;wa(Ua)?(ob=!0,ec=t.createStream(34962,Ua),Mc=ec.dtype):(ec=t.getBuffer(Ua))?Mc=ec.dtype:"constant"in Ua?(wd=2,"number"===typeof Ua.constant?($a=Ua.constant,Wb=rc=Ab=0):($a=0<Ua.constant.length?Ua.constant[0]:0,Wb=1<Ua.constant.length?Ua.constant[1]:0,rc=2<Ua.constant.length?Ua.constant[2]:0,Ab=3<Ua.constant.length?
Ua.constant[3]:0)):(ec=wa(Ua.buffer)?t.createStream(34962,Ua.buffer):t.getBuffer(Ua.buffer),Mc="type"in Ua?$d[Ua.type]:ec.dtype,tc=!!Ua.normalized,ic=Ua.size|0,bb=Ua.offset|0,Xa=Ua.stride|0,Ac=Ua.divisor|0);Xb=na.location;Qb=A[Xb];if(1===wd){Qb.buffer||L.enableVertexAttribArray(Xb);Kc=ic||1;if(Qb.type!==Mc||Qb.size!==Kc||Qb.buffer!==ec||Qb.normalized!==tc||Qb.offset!==bb||Qb.stride!==Xa)L.bindBuffer(34962,ec.buffer),L.vertexAttribPointer(Xb,Kc,Mc,tc,Xa,bb),Qb.type=Mc,Qb.size=Kc,Qb.buffer=ec,Qb.normalized=
tc,Qb.offset=bb,Qb.stride=Xa;Qb.divisor!==Ac&&(b.vertexAttribDivisorANGLE(Xb,Ac),Qb.divisor=Ac)}else if(Qb.buffer&&(L.disableVertexAttribArray(Xb),Qb.buffer=null),Qb.x!==$a||Qb.y!==Wb||Qb.z!==rc||Qb.w!==Ab)L.vertexAttrib4f(Xb,$a,Wb,rc,Ab),Qb.x=$a,Qb.y=Wb,Qb.z=rc,Qb.w=Ab;Rb=V.call(this,aa,g,k);qe=!1;Hc=null;sd=0;Nc=!1;Wd=Yc=0;mc=1;uc=0;fc=5126;Yb=Ub=qc=db=0;wa(Rb)?(qe=!0,Hc=t.createStream(34962,Rb),fc=Hc.dtype):(Hc=t.getBuffer(Rb))?fc=Hc.dtype:"constant"in Rb?(mc=2,"number"===typeof Rb.constant?(qc=
Rb.constant,Ub=Yb=db=0):(qc=0<Rb.constant.length?Rb.constant[0]:0,Ub=1<Rb.constant.length?Rb.constant[1]:0,Yb=2<Rb.constant.length?Rb.constant[2]:0,db=3<Rb.constant.length?Rb.constant[3]:0)):(Hc=wa(Rb.buffer)?t.createStream(34962,Rb.buffer):t.getBuffer(Rb.buffer),fc="type"in Rb?$d[Rb.type]:Hc.dtype,Nc=!!Rb.normalized,Wd=Rb.size|0,Yc=Rb.offset|0,uc=Rb.stride|0,sd=Rb.divisor|0);bc=Ya.location;gc=A[bc];if(1===mc){gc.buffer||L.enableVertexAttribArray(bc);xc=Wd||1;if(gc.type!==fc||gc.size!==xc||gc.buffer!==
Hc||gc.normalized!==Nc||gc.offset!==Yc||gc.stride!==uc)L.bindBuffer(34962,Hc.buffer),L.vertexAttribPointer(bc,xc,fc,Nc,uc,Yc),gc.type=fc,gc.size=xc,gc.buffer=Hc,gc.normalized=Nc,gc.offset=Yc,gc.stride=uc;gc.divisor!==sd&&(b.vertexAttribDivisorANGLE(bc,sd),gc.divisor=sd)}else if(gc.buffer&&(L.disableVertexAttribArray(bc),gc.buffer=null),gc.x!==qc||gc.y!==Ub||gc.z!==Yb||gc.w!==db)L.vertexAttrib4f(bc,qc,Ub,Yb,db),gc.x=qc,gc.y=Ub,gc.z=Yb,gc.w=db;Bc=ca.call(this,aa,g,k);cd=!1;Rc=null;Sc=0;Uc=!1;ld=Zc=
0;dd=1;$c=0;jc=5126;ed=Wc=ad=ac=0;wa(Bc)?(cd=!0,Rc=t.createStream(34962,Bc),jc=Rc.dtype):(Rc=t.getBuffer(Bc))?jc=Rc.dtype:"constant"in Bc?(dd=2,"number"===typeof Bc.constant?(ad=Bc.constant,Wc=ed=ac=0):(ad=0<Bc.constant.length?Bc.constant[0]:0,Wc=1<Bc.constant.length?Bc.constant[1]:0,ed=2<Bc.constant.length?Bc.constant[2]:0,ac=3<Bc.constant.length?Bc.constant[3]:0)):(Rc=wa(Bc.buffer)?t.createStream(34962,Bc.buffer):t.getBuffer(Bc.buffer),jc="type"in Bc?$d[Bc.type]:Rc.dtype,Uc=!!Bc.normalized,ld=Bc.size|
0,Zc=Bc.offset|0,$c=Bc.stride|0,Sc=Bc.divisor|0);yc=ja.location;id=A[yc];if(1===dd){id.buffer||L.enableVertexAttribArray(yc);td=ld||1;if(id.type!==jc||id.size!==td||id.buffer!==Rc||id.normalized!==Uc||id.offset!==Zc||id.stride!==$c)L.bindBuffer(34962,Rc.buffer),L.vertexAttribPointer(yc,td,jc,Uc,$c,Zc),id.type=jc,id.size=td,id.buffer=Rc,id.normalized=Uc,id.offset=Zc,id.stride=$c;id.divisor!==Sc&&(b.vertexAttribDivisorANGLE(yc,Sc),id.divisor=Sc)}else if(id.buffer&&(L.disableVertexAttribArray(yc),id.buffer=
null),id.x!==ad||id.y!==Wc||id.z!==ed||id.w!==ac)L.vertexAttrib4f(yc,ad,Wc,ed,ac),id.x=ad,id.y=Wc,id.z=ed,id.w=ac;Ad=S.call(this,aa,g,k);te=!1;jd=null;bf=0;Od=!1;ye=ee=0;Yd=1;Id=0;Gd=5126;rd=ud=Vc=nd=0;wa(Ad)?(te=!0,jd=t.createStream(34962,Ad),Gd=jd.dtype):(jd=t.getBuffer(Ad))?Gd=jd.dtype:"constant"in Ad?(Yd=2,"number"===typeof Ad.constant?(Vc=Ad.constant,ud=rd=nd=0):(Vc=0<Ad.constant.length?Ad.constant[0]:0,ud=1<Ad.constant.length?Ad.constant[1]:0,rd=2<Ad.constant.length?Ad.constant[2]:0,nd=3<Ad.constant.length?
Ad.constant[3]:0)):(jd=wa(Ad.buffer)?t.createStream(34962,Ad.buffer):t.getBuffer(Ad.buffer),Gd="type"in Ad?$d[Ad.type]:jd.dtype,Od=!!Ad.normalized,ye=Ad.size|0,ee=Ad.offset|0,Id=Ad.stride|0,bf=Ad.divisor|0);kd=oa.location;vd=A[kd];if(1===Yd){vd.buffer||L.enableVertexAttribArray(kd);Bd=ye||1;if(vd.type!==Gd||vd.size!==Bd||vd.buffer!==jd||vd.normalized!==Od||vd.offset!==ee||vd.stride!==Id)L.bindBuffer(34962,jd.buffer),L.vertexAttribPointer(kd,Bd,Gd,Od,Id,ee),vd.type=Gd,vd.size=Bd,vd.buffer=jd,vd.normalized=
Od,vd.offset=ee,vd.stride=Id;vd.divisor!==bf&&(b.vertexAttribDivisorANGLE(kd,bf),vd.divisor=bf)}else if(vd.buffer&&(L.disableVertexAttribArray(kd),vd.buffer=null),vd.x!==Vc||vd.y!==ud||vd.z!==rd||vd.w!==nd)L.vertexAttrib4f(kd,Vc,ud,rd,nd),vd.x=Vc,vd.y=ud,vd.z=rd,vd.w=nd;Dd=O.call(this,aa,g,k);he=!1;ke=null;ue=0;le=!1;fe=ie=0;ve=1;be=0;me=5126;pe=we=hd=Oc=0;wa(Dd)?(he=!0,ke=t.createStream(34962,Dd),me=ke.dtype):(ke=t.getBuffer(Dd))?me=ke.dtype:"constant"in Dd?(ve=2,"number"===typeof Dd.constant?(hd=
Dd.constant,we=pe=Oc=0):(hd=0<Dd.constant.length?Dd.constant[0]:0,we=1<Dd.constant.length?Dd.constant[1]:0,pe=2<Dd.constant.length?Dd.constant[2]:0,Oc=3<Dd.constant.length?Dd.constant[3]:0)):(ke=wa(Dd.buffer)?t.createStream(34962,Dd.buffer):t.getBuffer(Dd.buffer),me="type"in Dd?$d[Dd.type]:ke.dtype,le=!!Dd.normalized,fe=Dd.size|0,ie=Dd.offset|0,be=Dd.stride|0,ue=Dd.divisor|0);Kd=z.location;Pd=A[Kd];if(1===ve){Pd.buffer||L.enableVertexAttribArray(Kd);Rd=fe||4;if(Pd.type!==me||Pd.size!==Rd||Pd.buffer!==
ke||Pd.normalized!==le||Pd.offset!==ie||Pd.stride!==be)L.bindBuffer(34962,ke.buffer),L.vertexAttribPointer(Kd,Rd,me,le,be,ie),Pd.type=me,Pd.size=Rd,Pd.buffer=ke,Pd.normalized=le,Pd.offset=ie,Pd.stride=be;Pd.divisor!==ue&&(b.vertexAttribDivisorANGLE(Kd,ue),Pd.divisor=ue)}else if(Pd.buffer&&(L.disableVertexAttribArray(Kd),Pd.buffer=null),Pd.x!==hd||Pd.y!==we||Pd.z!==pe||Pd.w!==Oc)L.vertexAttrib4f(Kd,hd,we,pe,Oc),Pd.x=hd,Pd.y=we,Pd.z=pe,Pd.w=Oc;Sd=J.call(this,aa,g,k);ne=!1;Ae=null;De=0;re=!1;Se=Re=0;
Ne=1;xe=0;Ge=5126;He=Ke=Je=Ie=0;wa(Sd)?(ne=!0,Ae=t.createStream(34962,Sd),Ge=Ae.dtype):(Ae=t.getBuffer(Sd))?Ge=Ae.dtype:"constant"in Sd?(Ne=2,"number"===typeof Sd.constant?(Je=Sd.constant,Ke=He=Ie=0):(Je=0<Sd.constant.length?Sd.constant[0]:0,Ke=1<Sd.constant.length?Sd.constant[1]:0,He=2<Sd.constant.length?Sd.constant[2]:0,Ie=3<Sd.constant.length?Sd.constant[3]:0)):(Ae=wa(Sd.buffer)?t.createStream(34962,Sd.buffer):t.getBuffer(Sd.buffer),Ge="type"in Sd?$d[Sd.type]:Ae.dtype,re=!!Sd.normalized,Se=Sd.size|
0,Re=Sd.offset|0,xe=Sd.stride|0,De=Sd.divisor|0);Ld=qa.location;Vd=A[Ld];if(1===Ne){Vd.buffer||L.enableVertexAttribArray(Ld);ae=Se||4;if(Vd.type!==Ge||Vd.size!==ae||Vd.buffer!==Ae||Vd.normalized!==re||Vd.offset!==Re||Vd.stride!==xe)L.bindBuffer(34962,Ae.buffer),L.vertexAttribPointer(Ld,ae,Ge,re,xe,Re),Vd.type=Ge,Vd.size=ae,Vd.buffer=Ae,Vd.normalized=re,Vd.offset=Re,Vd.stride=xe;Vd.divisor!==De&&(b.vertexAttribDivisorANGLE(Ld,De),Vd.divisor=De)}else if(Vd.buffer&&(L.disableVertexAttribArray(Ld),Vd.buffer=
null),Vd.x!==Je||Vd.y!==Ke||Vd.z!==He||Vd.w!==Ie)L.vertexAttrib4f(Ld,Je,Ke,He,Ie),Vd.x=Je,Vd.y=Ke,Vd.z=He,Vd.w=Ie;ce=u.call(this,aa,g,k);Le=!1;Hd=null;Td=0;Ee=!1;cf=Me=0;af=1;Te=0;Oe=5126;Ve=Ue=Xe=$e=0;wa(ce)?(Le=!0,Hd=t.createStream(34962,ce),Oe=Hd.dtype):(Hd=t.getBuffer(ce))?Oe=Hd.dtype:"constant"in ce?(af=2,"number"===typeof ce.constant?(Xe=ce.constant,Ue=Ve=$e=0):(Xe=0<ce.constant.length?ce.constant[0]:0,Ue=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,$e=3<ce.constant.length?
ce.constant[3]:0)):(Hd=wa(ce.buffer)?t.createStream(34962,ce.buffer):t.getBuffer(ce.buffer),Oe="type"in ce?$d[ce.type]:Hd.dtype,Ee=!!ce.normalized,cf=ce.size|0,Me=ce.offset|0,Te=ce.stride|0,Td=ce.divisor|0);Ud=da.location;Zd=A[Ud];if(1===af){Zd.buffer||L.enableVertexAttribArray(Ud);We=cf||1;if(Zd.type!==Oe||Zd.size!==We||Zd.buffer!==Hd||Zd.normalized!==Ee||Zd.offset!==Me||Zd.stride!==Te)L.bindBuffer(34962,Hd.buffer),L.vertexAttribPointer(Ud,We,Oe,Ee,Te,Me),Zd.type=Oe,Zd.size=We,Zd.buffer=Hd,Zd.normalized=
Ee,Zd.offset=Me,Zd.stride=Te;Zd.divisor!==Td&&(b.vertexAttribDivisorANGLE(Ud,Td),Zd.divisor=Td)}else if(Zd.buffer&&(L.disableVertexAttribArray(Ud),Zd.buffer=null),Zd.x!==Xe||Zd.y!==Ue||Zd.z!==Ve||Zd.w!==$e)L.vertexAttrib4f(Ud,Xe,Ue,Ve,$e),Zd.x=Xe,Zd.y=Ue,Zd.z=Ve,Zd.w=$e;jf=aa.pixelRatio;k&&nf===jf||(nf=jf,L.uniform1f(za.location,jf));ff=g.scale;kf=ff[0];mf=ff[1];k&&lf===kf&&rf===mf||(lf=kf,rf=mf,L.uniform2f(ea.location,kf,mf));of=g.scaleFract;sf=of[0];Cf=of[1];k&&Bf===sf&&Pe===Cf||(Bf=sf,Pe=Cf,L.uniform2f(Ea.location,
sf,Cf));Fe=g.translate;pf=Fe[0];Df=Fe[1];k&&qf===pf&&Hf===Df||(qf=pf,Hf=Df,L.uniform2f(pa.location,pf,Df));Af=g.translateFract;Ef=Af[0];wf=Af[1];k&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,L.uniform2f(Aa.location,Ef,wf));vf=M.call(this,aa,g,k);yf=vf[0];Jf=vf[1];k&&zf===yf&&Kf===Jf||(zf=yf,Kf=Jf,L.uniform2f(ta.location,yf,Jf));Lf=g.opacity;k&&Mf===Lf||(Mf=Lf,L.uniform1f(la.location,Lf));(tf=g.markerTexture)&&"framebuffer"===tf._reglType&&(tf=tf.color[0]);Rf=tf._texture;L.uniform1i(W.location,Rf.bind());If=g.elements;
uf=null;(uf=(dg=wa(If))?zc.createStream(If):zc.getElements(If))&&L.bindBuffer(34963,uf.buffer.buffer);Sf=g.offset;if(Tf=g.count)0<pb?uf?b.drawElementsInstancedANGLE(0,Tf,uf.type,Sf<<(uf.type-5121>>1),pb):b.drawArraysInstancedANGLE(0,Sf,Tf,pb):0>pb&&(uf?L.drawElements(0,Tf,uf.type,Sf<<(uf.type-5121>>1)):L.drawArrays(0,Sf,Tf)),aa.viewportWidth=Ob,aa.viewportHeight=kb,mb&&t.destroyStream(Ta),Pa&&t.destroyStream(Cc),ob&&t.destroyStream(ec),qe&&t.destroyStream(Hc),cd&&t.destroyStream(Rc),te&&t.destroyStream(jd),
he&&t.destroyStream(ke),ne&&t.destroyStream(Ae),Le&&t.destroyStream(Hd),Rf.unbind(),dg&&zc.destroyStream(uf)}K.unbind();va.dirty=!0;Fa.setVAO(null);h&&(B.cpuTime+=performance.now()-e)},draw:function(d){var h,e,b,m,u,r,y,w,O,J,F,E,sa,S,q,C,ga,I,D,M,K,ya,N,Q,T,V,ha,X,U,ca,P,ia,ka,ma,ra,Ba,Ga,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,qe,
Hc,sd,Nc,Yc,Wd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,bf,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe;h=Y.next;h!==Y.cur&&(h?L.bindFramebuffer(36160,h.framebuffer):L.bindFramebuffer(36160,null),Y.cur=h);if(va.dirty){var Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf;Ge=Ha.dither;Ge!==va.dither&&(Ge?L.enable(3024):L.disable(3024),
va.dither=Ge);Ie=ua[0];Je=ua[1];if(Ie!==Ka[0]||Je!==Ka[1])L.blendEquationSeparate(Ie,Je),Ka[0]=Ie,Ka[1]=Je;Ke=Ha.depth_func;Ke!==va.depth_func&&(L.depthFunc(Ke),va.depth_func=Ke);He=Ca[0];Ld=Ca[1];if(He!==Ia[0]||Ld!==Ia[1])L.depthRange(He,Ld),Ia[0]=He,Ia[1]=Ld;Vd=Ha.depth_mask;Vd!==va.depth_mask&&(L.depthMask(Vd),va.depth_mask=Vd);ae=ba[0];ce=ba[1];Le=ba[2];Hd=ba[3];if(ae!==fa[0]||ce!==fa[1]||Le!==fa[2]||Hd!==fa[3])L.colorMask(ae,ce,Le,Hd),fa[0]=ae,fa[1]=ce,fa[2]=Le,fa[3]=Hd;Td=Ha.cull_enable;Td!==
va.cull_enable&&(Td?L.enable(2884):L.disable(2884),va.cull_enable=Td);Ee=Ha.cull_face;Ee!==va.cull_face&&(L.cullFace(Ee),va.cull_face=Ee);Me=Ha.frontFace;Me!==va.frontFace&&(L.frontFace(Me),va.frontFace=Me);cf=Ha.lineWidth;cf!==va.lineWidth&&(L.lineWidth(cf),va.lineWidth=cf);af=Ha.polygonOffset_enable;af!==va.polygonOffset_enable&&(af?L.enable(32823):L.disable(32823),va.polygonOffset_enable=af);Te=vc[0];Oe=vc[1];if(Te!==Sb[0]||Oe!==Sb[1])L.polygonOffset(Te,Oe),Sb[0]=Te,Sb[1]=Oe;$e=Ha.sample_alpha;
$e!==va.sample_alpha&&($e?L.enable(32926):L.disable(32926),va.sample_alpha=$e);Xe=Ha.sample_enable;Xe!==va.sample_enable&&(Xe?L.enable(32928):L.disable(32928),va.sample_enable=Xe);Ue=ze[0];Ve=ze[1];if(Ue!==Ed[0]||Ve!==Ed[1])L.sampleCoverage(Ue,Ve),Ed[0]=Ue,Ed[1]=Ve;Ud=Ha.stencil_mask;Ud!==va.stencil_mask&&(L.stencilMask(Ud),va.stencil_mask=Ud);Zd=Be[0];We=Be[1];jf=Be[2];if(Zd!==yd[0]||We!==yd[1]||jf!==yd[2])L.stencilFunc(Zd,We,jf),yd[0]=Zd,yd[1]=We,yd[2]=jf;nf=ge[0];ff=ge[1];kf=ge[2];lf=ge[3];if(nf!==
Cd[0]||ff!==Cd[1]||kf!==Cd[2]||lf!==Cd[3])L.stencilOpSeparate(nf,ff,kf,lf),Cd[0]=nf,Cd[1]=ff,Cd[2]=kf,Cd[3]=lf;mf=Qd[0];rf=Qd[1];of=Qd[2];sf=Qd[3];if(mf!==oe[0]||rf!==oe[1]||of!==oe[2]||sf!==oe[3])L.stencilOpSeparate(mf,rf,of,sf),oe[0]=mf,oe[1]=rf,oe[2]=of,oe[3]=sf}e=d.viewport;b=e.x|0;m=e.y|0;u="width"in e?e.width|0:aa.framebufferWidth-b;r="height"in e?e.height|0:aa.framebufferHeight-m;y=aa.viewportWidth;aa.viewportWidth=u;w=aa.viewportHeight;aa.viewportHeight=r;L.viewport(b,m,u,r);de[0]=b;de[1]=
m;de[2]=u;de[3]=r;L.blendColor(0,0,0,1);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=1;L.enable(3042);va.blend_enable=!0;L.blendFuncSeparate(770,771,773,1);hb[0]=770;hb[1]=771;hb[2]=773;hb[3]=1;L.disable(2929);va.depth_enable=!1;O=d.viewport;J=O.x|0;F=O.y|0;E="width"in O?O.width|0:aa.framebufferWidth-J;sa="height"in O?O.height|0:aa.framebufferHeight-F;L.scissor(J,F,E,sa);Md[0]=J;Md[1]=F;Md[2]=E;Md[3]=sa;L.enable(3089);va.scissor_enable=!0;L.disable(2960);va.stencil_enable=!1;if(S=va.profile)q=performance.now(),B.count++;
L.useProgram(k.program);C=Hb.angle_instanced_arrays;Fa.setVAO(null);ga=c.call(this,aa,d,0);I=!1;D=null;M=0;K=!1;N=ya=0;Q=1;T=0;V=5126;ca=U=X=ha=0;wa(ga)?(I=!0,D=t.createStream(34962,ga),V=D.dtype):(D=t.getBuffer(ga))?V=D.dtype:"constant"in ga?(Q=2,"number"===typeof ga.constant?(X=ga.constant,U=ca=ha=0):(X=0<ga.constant.length?ga.constant[0]:0,U=1<ga.constant.length?ga.constant[1]:0,ca=2<ga.constant.length?ga.constant[2]:0,ha=3<ga.constant.length?ga.constant[3]:0)):(D=wa(ga.buffer)?t.createStream(34962,
ga.buffer):t.getBuffer(ga.buffer),V="type"in ga?$d[ga.type]:D.dtype,K=!!ga.normalized,N=ga.size|0,ya=ga.offset|0,T=ga.stride|0,M=ga.divisor|0);P=Ra.location;ia=A[P];if(1===Q){ia.buffer||L.enableVertexAttribArray(P);ka=N||1;if(ia.type!==V||ia.size!==ka||ia.buffer!==D||ia.normalized!==K||ia.offset!==ya||ia.stride!==T)L.bindBuffer(34962,D.buffer),L.vertexAttribPointer(P,ka,V,K,T,ya),ia.type=V,ia.size=ka,ia.buffer=D,ia.normalized=K,ia.offset=ya,ia.stride=T;ia.divisor!==M&&(C.vertexAttribDivisorANGLE(P,
M),ia.divisor=M)}else if(ia.buffer&&(L.disableVertexAttribArray(P),ia.buffer=null),ia.x!==X||ia.y!==U||ia.z!==ca||ia.w!==ha)L.vertexAttrib4f(P,X,U,ca,ha),ia.x=X,ia.y=U,ia.z=ca,ia.w=ha;ma=l.call(this,aa,d,0);ra=!1;Ba=null;Ga=0;zb=!1;Nb=cb=0;ab=1;pb=0;Va=5126;pc=Jb=Ib=qd=0;wa(ma)?(ra=!0,Ba=t.createStream(34962,ma),Va=Ba.dtype):(Ba=t.getBuffer(ma))?Va=Ba.dtype:"constant"in ma?(ab=2,"number"===typeof ma.constant?(Ib=ma.constant,Jb=pc=qd=0):(Ib=0<ma.constant.length?ma.constant[0]:0,Jb=1<ma.constant.length?
ma.constant[1]:0,pc=2<ma.constant.length?ma.constant[2]:0,qd=3<ma.constant.length?ma.constant[3]:0)):(Ba=wa(ma.buffer)?t.createStream(34962,ma.buffer):t.getBuffer(ma.buffer),Va="type"in ma?$d[ma.type]:Ba.dtype,zb=!!ma.normalized,Nb=ma.size|0,cb=ma.offset|0,pb=ma.stride|0,Ga=ma.divisor|0);Ob=Tb.location;kb=A[Ob];if(1===ab){kb.buffer||L.enableVertexAttribArray(Ob);Gb=Nb||1;if(kb.type!==Va||kb.size!==Gb||kb.buffer!==Ba||kb.normalized!==zb||kb.offset!==cb||kb.stride!==pb)L.bindBuffer(34962,Ba.buffer),
L.vertexAttribPointer(Ob,Gb,Va,zb,pb,cb),kb.type=Va,kb.size=Gb,kb.buffer=Ba,kb.normalized=zb,kb.offset=cb,kb.stride=pb;kb.divisor!==Ga&&(C.vertexAttribDivisorANGLE(Ob,Ga),kb.divisor=Ga)}else if(kb.buffer&&(L.disableVertexAttribArray(Ob),kb.buffer=null),kb.x!==Ib||kb.y!==Jb||kb.z!==pc||kb.w!==qd)L.vertexAttrib4f(Ob,Ib,Jb,pc,qd),kb.x=Ib,kb.y=Jb,kb.z=pc,kb.w=qd;Db=a.call(this,aa,d,0);xb=!1;ib=null;Zb=0;Pb=!1;Ta=mb=0;Vb=1;qb=0;hc=5126;sb=Ja=rb=jb=0;wa(Db)?(xb=!0,ib=t.createStream(34962,Db),hc=ib.dtype):
(ib=t.getBuffer(Db))?hc=ib.dtype:"constant"in Db?(Vb=2,"number"===typeof Db.constant?(rb=Db.constant,Ja=sb=jb=0):(rb=0<Db.constant.length?Db.constant[0]:0,Ja=1<Db.constant.length?Db.constant[1]:0,sb=2<Db.constant.length?Db.constant[2]:0,jb=3<Db.constant.length?Db.constant[3]:0)):(ib=wa(Db.buffer)?t.createStream(34962,Db.buffer):t.getBuffer(Db.buffer),hc="type"in Db?$d[Db.type]:ib.dtype,Pb=!!Db.normalized,Ta=Db.size|0,mb=Db.offset|0,qb=Db.stride|0,Zb=Db.divisor|0);La=na.location;eb=A[La];if(1===Vb){eb.buffer||
L.enableVertexAttribArray(La);gb=Ta||1;if(eb.type!==hc||eb.size!==gb||eb.buffer!==ib||eb.normalized!==Pb||eb.offset!==mb||eb.stride!==qb)L.bindBuffer(34962,ib.buffer),L.vertexAttribPointer(La,gb,hc,Pb,qb,mb),eb.type=hc,eb.size=gb,eb.buffer=ib,eb.normalized=Pb,eb.offset=mb,eb.stride=qb;eb.divisor!==Zb&&(C.vertexAttribDivisorANGLE(La,Zb),eb.divisor=Zb)}else if(eb.buffer&&(L.disableVertexAttribArray(La),eb.buffer=null),eb.x!==rb||eb.y!==Ja||eb.z!==sb||eb.w!==jb)L.vertexAttrib4f(La,rb,Ja,sb,jb),eb.x=
rb,eb.y=Ja,eb.z=sb,eb.w=jb;Ma=f.call(this,aa,d,0);lb=!1;Wa=null;ub=0;tb=!1;Cc=Pa=0;Sa=1;Kb=0;Eb=5126;Lb=Za=Qc=Na=0;wa(Ma)?(lb=!0,Wa=t.createStream(34962,Ma),Eb=Wa.dtype):(Wa=t.getBuffer(Ma))?Eb=Wa.dtype:"constant"in Ma?(Sa=2,"number"===typeof Ma.constant?(Qc=Ma.constant,Za=Lb=Na=0):(Qc=0<Ma.constant.length?Ma.constant[0]:0,Za=1<Ma.constant.length?Ma.constant[1]:0,Lb=2<Ma.constant.length?Ma.constant[2]:0,Na=3<Ma.constant.length?Ma.constant[3]:0)):(Wa=wa(Ma.buffer)?t.createStream(34962,Ma.buffer):t.getBuffer(Ma.buffer),
Eb="type"in Ma?$d[Ma.type]:Wa.dtype,tb=!!Ma.normalized,Cc=Ma.size|0,Pa=Ma.offset|0,Kb=Ma.stride|0,ub=Ma.divisor|0);Mb=Ya.location;nb=A[Mb];if(1===Sa){nb.buffer||L.enableVertexAttribArray(Mb);Oa=Cc||1;if(nb.type!==Eb||nb.size!==Oa||nb.buffer!==Wa||nb.normalized!==tb||nb.offset!==Pa||nb.stride!==Kb)L.bindBuffer(34962,Wa.buffer),L.vertexAttribPointer(Mb,Oa,Eb,tb,Kb,Pa),nb.type=Eb,nb.size=Oa,nb.buffer=Wa,nb.normalized=tb,nb.offset=Pa,nb.stride=Kb;nb.divisor!==ub&&(C.vertexAttribDivisorANGLE(Mb,ub),nb.divisor=
ub)}else if(nb.buffer&&(L.disableVertexAttribArray(Mb),nb.buffer=null),nb.x!==Qc||nb.y!==Za||nb.z!==Lb||nb.w!==Na)L.vertexAttrib4f(Mb,Qc,Za,Lb,Na),nb.x=Qc,nb.y=Za,nb.z=Lb,nb.w=Na;$b=g.call(this,aa,d,0);Qa=!1;vb=null;wb=0;Ua=!1;ec=ob=0;Ac=1;tc=0;bb=5126;Mc=Xa=wd=ic=0;wa($b)?(Qa=!0,vb=t.createStream(34962,$b),bb=vb.dtype):(vb=t.getBuffer($b))?bb=vb.dtype:"constant"in $b?(Ac=2,"number"===typeof $b.constant?(wd=$b.constant,Xa=Mc=ic=0):(wd=0<$b.constant.length?$b.constant[0]:0,Xa=1<$b.constant.length?
$b.constant[1]:0,Mc=2<$b.constant.length?$b.constant[2]:0,ic=3<$b.constant.length?$b.constant[3]:0)):(vb=wa($b.buffer)?t.createStream(34962,$b.buffer):t.getBuffer($b.buffer),bb="type"in $b?$d[$b.type]:vb.dtype,Ua=!!$b.normalized,ec=$b.size|0,ob=$b.offset|0,tc=$b.stride|0,wb=$b.divisor|0);Ab=ja.location;$a=A[Ab];if(1===Ac){$a.buffer||L.enableVertexAttribArray(Ab);Wb=ec||1;if($a.type!==bb||$a.size!==Wb||$a.buffer!==vb||$a.normalized!==Ua||$a.offset!==ob||$a.stride!==tc)L.bindBuffer(34962,vb.buffer),
L.vertexAttribPointer(Ab,Wb,bb,Ua,tc,ob),$a.type=bb,$a.size=Wb,$a.buffer=vb,$a.normalized=Ua,$a.offset=ob,$a.stride=tc;$a.divisor!==wb&&(C.vertexAttribDivisorANGLE(Ab,wb),$a.divisor=wb)}else if($a.buffer&&(L.disableVertexAttribArray(Ab),$a.buffer=null),$a.x!==wd||$a.y!==Xa||$a.z!==Mc||$a.w!==ic)L.vertexAttrib4f(Ab,wd,Xa,Mc,ic),$a.x=wd,$a.y=Xa,$a.z=Mc,$a.w=ic;rc=n.call(this,aa,d,0);Xb=!1;Qb=null;Kc=0;Rb=!1;Hc=qe=0;sd=1;Nc=0;Yc=5126;fc=uc=mc=Wd=0;wa(rc)?(Xb=!0,Qb=t.createStream(34962,rc),Yc=Qb.dtype):
(Qb=t.getBuffer(rc))?Yc=Qb.dtype:"constant"in rc?(sd=2,"number"===typeof rc.constant?(mc=rc.constant,uc=fc=Wd=0):(mc=0<rc.constant.length?rc.constant[0]:0,uc=1<rc.constant.length?rc.constant[1]:0,fc=2<rc.constant.length?rc.constant[2]:0,Wd=3<rc.constant.length?rc.constant[3]:0)):(Qb=wa(rc.buffer)?t.createStream(34962,rc.buffer):t.getBuffer(rc.buffer),Yc="type"in rc?$d[rc.type]:Qb.dtype,Rb=!!rc.normalized,Hc=rc.size|0,qe=rc.offset|0,Nc=rc.stride|0,Kc=rc.divisor|0);db=oa.location;qc=A[db];if(1===sd){qc.buffer||
L.enableVertexAttribArray(db);Ub=Hc||1;if(qc.type!==Yc||qc.size!==Ub||qc.buffer!==Qb||qc.normalized!==Rb||qc.offset!==qe||qc.stride!==Nc)L.bindBuffer(34962,Qb.buffer),L.vertexAttribPointer(db,Ub,Yc,Rb,Nc,qe),qc.type=Yc,qc.size=Ub,qc.buffer=Qb,qc.normalized=Rb,qc.offset=qe,qc.stride=Nc;qc.divisor!==Kc&&(C.vertexAttribDivisorANGLE(db,Kc),qc.divisor=Kc)}else if(qc.buffer&&(L.disableVertexAttribArray(db),qc.buffer=null),qc.x!==mc||qc.y!==uc||qc.z!==fc||qc.w!==Wd)L.vertexAttrib4f(db,mc,uc,fc,Wd),qc.x=
mc,qc.y=uc,qc.z=fc,qc.w=Wd;Yb=p.call(this,aa,d,0);bc=!1;gc=null;xc=0;Bc=!1;Rc=cd=0;Sc=1;Uc=0;Zc=5126;jc=$c=dd=ld=0;wa(Yb)?(bc=!0,gc=t.createStream(34962,Yb),Zc=gc.dtype):(gc=t.getBuffer(Yb))?Zc=gc.dtype:"constant"in Yb?(Sc=2,"number"===typeof Yb.constant?(dd=Yb.constant,$c=jc=ld=0):(dd=0<Yb.constant.length?Yb.constant[0]:0,$c=1<Yb.constant.length?Yb.constant[1]:0,jc=2<Yb.constant.length?Yb.constant[2]:0,ld=3<Yb.constant.length?Yb.constant[3]:0)):(gc=wa(Yb.buffer)?t.createStream(34962,Yb.buffer):t.getBuffer(Yb.buffer),
Zc="type"in Yb?$d[Yb.type]:gc.dtype,Bc=!!Yb.normalized,Rc=Yb.size|0,cd=Yb.offset|0,Uc=Yb.stride|0,xc=Yb.divisor|0);ac=z.location;ad=A[ac];if(1===Sc){ad.buffer||L.enableVertexAttribArray(ac);Wc=Rc||4;if(ad.type!==Zc||ad.size!==Wc||ad.buffer!==gc||ad.normalized!==Bc||ad.offset!==cd||ad.stride!==Uc)L.bindBuffer(34962,gc.buffer),L.vertexAttribPointer(ac,Wc,Zc,Bc,Uc,cd),ad.type=Zc,ad.size=Wc,ad.buffer=gc,ad.normalized=Bc,ad.offset=cd,ad.stride=Uc;ad.divisor!==xc&&(C.vertexAttribDivisorANGLE(ac,xc),ad.divisor=
xc)}else if(ad.buffer&&(L.disableVertexAttribArray(ac),ad.buffer=null),ad.x!==dd||ad.y!==$c||ad.z!==jc||ad.w!==ld)L.vertexAttrib4f(ac,dd,$c,jc,ld),ad.x=dd,ad.y=$c,ad.z=jc,ad.w=ld;ed=v.call(this,aa,d,0);yc=!1;id=null;td=0;Ad=!1;jd=te=0;bf=1;Od=0;ee=5126;Gd=Id=Yd=ye=0;wa(ed)?(yc=!0,id=t.createStream(34962,ed),ee=id.dtype):(id=t.getBuffer(ed))?ee=id.dtype:"constant"in ed?(bf=2,"number"===typeof ed.constant?(Yd=ed.constant,Id=Gd=ye=0):(Yd=0<ed.constant.length?ed.constant[0]:0,Id=1<ed.constant.length?
ed.constant[1]:0,Gd=2<ed.constant.length?ed.constant[2]:0,ye=3<ed.constant.length?ed.constant[3]:0)):(id=wa(ed.buffer)?t.createStream(34962,ed.buffer):t.getBuffer(ed.buffer),ee="type"in ed?$d[ed.type]:id.dtype,Ad=!!ed.normalized,jd=ed.size|0,te=ed.offset|0,Od=ed.stride|0,td=ed.divisor|0);nd=qa.location;Vc=A[nd];if(1===bf){Vc.buffer||L.enableVertexAttribArray(nd);ud=jd||4;if(Vc.type!==ee||Vc.size!==ud||Vc.buffer!==id||Vc.normalized!==Ad||Vc.offset!==te||Vc.stride!==Od)L.bindBuffer(34962,id.buffer),
L.vertexAttribPointer(nd,ud,ee,Ad,Od,te),Vc.type=ee,Vc.size=ud,Vc.buffer=id,Vc.normalized=Ad,Vc.offset=te,Vc.stride=Od;Vc.divisor!==td&&(C.vertexAttribDivisorANGLE(nd,td),Vc.divisor=td)}else if(Vc.buffer&&(L.disableVertexAttribArray(nd),Vc.buffer=null),Vc.x!==Yd||Vc.y!==Id||Vc.z!==Gd||Vc.w!==ye)L.vertexAttrib4f(nd,Yd,Id,Gd,ye),Vc.x=Yd,Vc.y=Id,Vc.z=Gd,Vc.w=ye;rd=R.call(this,aa,d,0);kd=!1;vd=null;Bd=0;Dd=!1;ke=he=0;ue=1;le=0;ie=5126;me=be=ve=fe=0;wa(rd)?(kd=!0,vd=t.createStream(34962,rd),ie=vd.dtype):
(vd=t.getBuffer(rd))?ie=vd.dtype:"constant"in rd?(ue=2,"number"===typeof rd.constant?(ve=rd.constant,be=me=fe=0):(ve=0<rd.constant.length?rd.constant[0]:0,be=1<rd.constant.length?rd.constant[1]:0,me=2<rd.constant.length?rd.constant[2]:0,fe=3<rd.constant.length?rd.constant[3]:0)):(vd=wa(rd.buffer)?t.createStream(34962,rd.buffer):t.getBuffer(rd.buffer),ie="type"in rd?$d[rd.type]:vd.dtype,Dd=!!rd.normalized,ke=rd.size|0,he=rd.offset|0,le=rd.stride|0,Bd=rd.divisor|0);Oc=da.location;hd=A[Oc];if(1===ue){hd.buffer||
L.enableVertexAttribArray(Oc);we=ke||1;if(hd.type!==ie||hd.size!==we||hd.buffer!==vd||hd.normalized!==Dd||hd.offset!==he||hd.stride!==le)L.bindBuffer(34962,vd.buffer),L.vertexAttribPointer(Oc,we,ie,Dd,le,he),hd.type=ie,hd.size=we,hd.buffer=vd,hd.normalized=Dd,hd.offset=he,hd.stride=le;hd.divisor!==Bd&&(C.vertexAttribDivisorANGLE(Oc,Bd),hd.divisor=Bd)}else if(hd.buffer&&(L.disableVertexAttribArray(Oc),hd.buffer=null),hd.x!==ve||hd.y!==be||hd.z!==me||hd.w!==fe)L.vertexAttrib4f(Oc,ve,be,me,fe),hd.x=
ve,hd.y=be,hd.z=me,hd.w=fe;L.uniform1i(H.location,!1);L.uniform1f(za.location,aa.pixelRatio);pe=d.scale;L.uniform2f(ea.location,pe[0],pe[1]);Kd=d.scaleFract;L.uniform2f(Ea.location,Kd[0],Kd[1]);Pd=d.translate;L.uniform2f(pa.location,Pd[0],Pd[1]);Rd=d.translateFract;L.uniform2f(Aa.location,Rd[0],Rd[1]);Sd=G.call(this,aa,d,0);L.uniform2f(ta.location,Sd[0],Sd[1]);L.uniform1f(la.location,d.opacity);L.uniform1i(Da.location,x.bind());(ne=d.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);
Ae=ne._texture;L.uniform1i(W.location,Ae.bind());De=d.elements;re=null;(re=(Re=wa(De))?zc.createStream(De):zc.getElements(De))&&L.bindBuffer(34963,re.buffer.buffer);Se=d.offset;if(Ne=d.count)xe=xa.instances,0<xe?re?C.drawElementsInstancedANGLE(0,Ne,re.type,Se<<(re.type-5121>>1),xe):C.drawArraysInstancedANGLE(0,Se,Ne,xe):0>xe&&(re?L.drawElements(0,Ne,re.type,Se<<(re.type-5121>>1)):L.drawArrays(0,Se,Ne)),va.dirty=!0,Fa.setVAO(null),aa.viewportWidth=y,aa.viewportHeight=w,S&&(B.cpuTime+=performance.now()-
q),I&&t.destroyStream(D),ra&&t.destroyStream(Ba),xb&&t.destroyStream(ib),lb&&t.destroyStream(Wa),Qa&&t.destroyStream(vb),Xb&&t.destroyStream(Qb),bc&&t.destroyStream(gc),yc&&t.destroyStream(id),kd&&t.destroyStream(vd),x.unbind(),Ae.unbind(),Re&&zc.destroyStream(re)},scope:function(a,c,b){var k,g,f,z,l,A,u,L,na,p,H,O,n,W,J,F,ea,S,x,Y,Tb,v,M,Ra,G,K,Z,da,R,za,Fa,qa,ta,ba,ja,V,ca,Ya,pa,Ea,la,oa,Aa,ma,ka,ua,Da,Hb,Ba,Ia,hb,Ka,fa,Sb,Ta,vc,qb,Ca,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Md,Sa,Kb,Eb,Na,xd,Za,
Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,Ed,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,Qd,Hc,de,Nc,Yc,Be,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Cd,oe,jd,yd,ge,ze,Gf,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Pe,Fe,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,
Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;k=a.viewport;g=k.x|0;f=k.y|0;z="width"in k?k.width|0:aa.framebufferWidth-g;l="height"in k?k.height|0:aa.framebufferHeight-f;A=aa.viewportWidth;aa.viewportWidth=z;u=aa.viewportHeight;aa.viewportHeight=l;L=Wd[0];Wd[0]=g;na=Wd[1];Wd[1]=f;p=Wd[2];Wd[2]=z;H=Wd[3];Wd[3]=l;O=ga[0];ga[0]=0;n=ga[1];ga[1]=0;W=ga[2];ga[2]=0;J=ga[3];ga[3]=1;F=Ha.blend_enable;
Ha.blend_enable=!0;ea=Ga[0];Ga[0]=770;S=Ga[1];Ga[1]=771;x=Ga[2];Ga[2]=773;Y=Ga[3];Ga[3]=1;Tb=Ha.depth_enable;Ha.depth_enable=!1;v=a.viewport;M=v.x|0;Ra=v.y|0;G="width"in v?v.width|0:aa.framebufferWidth-M;K="height"in v?v.height|0:aa.framebufferHeight-Ra;Z=qe[0];qe[0]=M;da=qe[1];qe[1]=Ra;R=qe[2];qe[2]=G;za=qe[3];qe[3]=K;Fa=Ha.scissor_enable;Ha.scissor_enable=!0;qa=Ha.stencil_enable;Ha.stencil_enable=!1;if(ta=va.profile)ba=performance.now(),B.count++;ja=a.elements;V=null;V=(ca=wa(ja))?zc.createStream(ja):
zc.getElements(ja);Ya=xa.elements;xa.elements=V;pa=a.offset;Ea=xa.offset;xa.offset=pa;la=a.count;oa=xa.count;xa.count=la;Aa=xa.primitive;xa.primitive=0;ma=ya[45];ya[45]=!1;ka=a.markerTexture;ua=ya[48];ya[48]=ka;Da=a.opacity;Hb=ya[10];ya[10]=Da;Ba=D.call(this,aa,a,b);Ia=ya[46];ya[46]=Ba;hb=ya[47];ya[47]=ha;Ka=aa.pixelRatio;fa=ya[34];ya[34]=Ka;Sb=a.scale;Ta=ya[6];ya[6]=Sb;vc=a.scaleFract;qb=ya[7];ya[7]=vc;Ca=a.translate;jb=ya[8];ya[8]=Ca;rb=a.translateFract;Ja=ya[9];ya[9]=rb;sb=w.call(this,aa,a,b);
La=!1;eb=null;gb=0;Ma=!1;Wa=lb=0;ub=1;tb=0;Pa=5126;Eb=Kb=Sa=Md=0;wa(sb)?(La=!0,eb=t.createStream(34962,sb),Pa=eb.dtype):(eb=t.getBuffer(sb))?Pa=eb.dtype:"constant"in sb?(ub=2,"number"===typeof sb.constant?(Sa=sb.constant,Kb=Eb=Md=0):(Sa=0<sb.constant.length?sb.constant[0]:0,Kb=1<sb.constant.length?sb.constant[1]:0,Eb=2<sb.constant.length?sb.constant[2]:0,Md=3<sb.constant.length?sb.constant[3]:0)):(eb=wa(sb.buffer)?t.createStream(34962,sb.buffer):t.getBuffer(sb.buffer),Pa="type"in sb?$d[sb.type]:eb.dtype,
Ma=!!sb.normalized,Wa=sb.size|0,lb=sb.offset|0,tb=sb.stride|0,gb=sb.divisor|0);Na=Q.buffer;Q.buffer=eb;xd=Q.divisor;Q.divisor=gb;Za=Q.normalized;Q.normalized=Ma;Lb=Q.offset;Q.offset=lb;Mb=Q.size;Q.size=Wa;nb=Q.state;Q.state=ub;Oa=Q.stride;Q.stride=tb;$b=Q.type;Q.type=Pa;Qa=Q.w;Q.w=Md;vb=Q.x;Q.x=Sa;wb=Q.y;Q.y=Kb;Ua=Q.z;Q.z=Eb;ob=q.call(this,aa,a,b);ec=!1;Ac=null;tc=0;bb=!1;Ed=ic=0;Xa=1;Mc=0;Ab=5126;Xb=rc=Wb=$a=0;wa(ob)?(ec=!0,Ac=t.createStream(34962,ob),Ab=Ac.dtype):(Ac=t.getBuffer(ob))?Ab=Ac.dtype:
"constant"in ob?(Xa=2,"number"===typeof ob.constant?(Wb=ob.constant,rc=Xb=$a=0):(Wb=0<ob.constant.length?ob.constant[0]:0,rc=1<ob.constant.length?ob.constant[1]:0,Xb=2<ob.constant.length?ob.constant[2]:0,$a=3<ob.constant.length?ob.constant[3]:0)):(Ac=wa(ob.buffer)?t.createStream(34962,ob.buffer):t.getBuffer(ob.buffer),Ab="type"in ob?$d[ob.type]:Ac.dtype,bb=!!ob.normalized,Ed=ob.size|0,ic=ob.offset|0,Mc=ob.stride|0,tc=ob.divisor|0);Qb=N.buffer;N.buffer=Ac;Kc=N.divisor;N.divisor=tc;Rb=N.normalized;
N.normalized=bb;Qd=N.offset;N.offset=ic;Hc=N.size;N.size=Ed;de=N.state;N.state=Xa;Nc=N.stride;N.stride=Mc;Yc=N.type;N.type=Ab;Be=N.w;N.w=$a;mc=N.x;N.x=Wb;uc=N.y;N.y=rc;fc=N.z;N.z=Xb;db=P.call(this,aa,a,b);qc=!1;Ub=null;Yb=0;bc=!1;xc=gc=0;Bc=1;cd=0;Rc=5126;ld=Zc=Uc=Sc=0;wa(db)?(qc=!0,Ub=t.createStream(34962,db),Rc=Ub.dtype):(Ub=t.getBuffer(db))?Rc=Ub.dtype:"constant"in db?(Bc=2,"number"===typeof db.constant?(Uc=db.constant,Zc=ld=Sc=0):(Uc=0<db.constant.length?db.constant[0]:0,Zc=1<db.constant.length?
db.constant[1]:0,ld=2<db.constant.length?db.constant[2]:0,Sc=3<db.constant.length?db.constant[3]:0)):(Ub=wa(db.buffer)?t.createStream(34962,db.buffer):t.getBuffer(db.buffer),Rc="type"in db?$d[db.type]:Ub.dtype,bc=!!db.normalized,xc=db.size|0,gc=db.offset|0,cd=db.stride|0,Yb=db.divisor|0);dd=e.buffer;e.buffer=Ub;$c=e.divisor;e.divisor=Yb;jc=e.normalized;e.normalized=bc;ac=e.offset;e.offset=gc;ad=e.size;e.size=xc;Wc=e.state;e.state=Bc;ed=e.stride;e.stride=cd;yc=e.type;e.type=Rc;id=e.w;e.w=Sc;td=e.x;
e.x=Uc;Cd=e.y;e.y=Zc;oe=e.z;e.z=ld;jd=r.call(this,aa,a,b);yd=!1;ge=null;ze=0;Gf=!1;Id=Yd=0;Gd=1;nd=0;Vc=5126;vd=kd=rd=ud=0;wa(jd)?(yd=!0,ge=t.createStream(34962,jd),Vc=ge.dtype):(ge=t.getBuffer(jd))?Vc=ge.dtype:"constant"in jd?(Gd=2,"number"===typeof jd.constant?(rd=jd.constant,kd=vd=ud=0):(rd=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,vd=2<jd.constant.length?jd.constant[2]:0,ud=3<jd.constant.length?jd.constant[3]:0)):(ge=wa(jd.buffer)?t.createStream(34962,jd.buffer):
t.getBuffer(jd.buffer),Vc="type"in jd?$d[jd.type]:ge.dtype,Gf=!!jd.normalized,Id=jd.size|0,Yd=jd.offset|0,nd=jd.stride|0,ze=jd.divisor|0);Bd=T.buffer;T.buffer=ge;Dd=T.divisor;T.divisor=ze;he=T.normalized;T.normalized=Gf;ke=T.offset;T.offset=Yd;ue=T.size;T.size=Id;le=T.state;T.state=Gd;ie=T.stride;T.stride=nd;fe=T.type;T.type=Vc;ve=T.w;T.w=ud;be=T.x;T.x=rd;me=T.y;T.y=kd;Oc=T.z;T.z=vd;hd=m.call(this,aa,a,b);we=!1;pe=null;Kd=0;Pd=!1;Sd=Rd=0;ne=1;Ae=0;De=5126;Ne=Se=Re=re=0;wa(hd)?(we=!0,pe=t.createStream(34962,
hd),De=pe.dtype):(pe=t.getBuffer(hd))?De=pe.dtype:"constant"in hd?(ne=2,"number"===typeof hd.constant?(Re=hd.constant,Se=Ne=re=0):(Re=0<hd.constant.length?hd.constant[0]:0,Se=1<hd.constant.length?hd.constant[1]:0,Ne=2<hd.constant.length?hd.constant[2]:0,re=3<hd.constant.length?hd.constant[3]:0)):(pe=wa(hd.buffer)?t.createStream(34962,hd.buffer):t.getBuffer(hd.buffer),De="type"in hd?$d[hd.type]:pe.dtype,Pd=!!hd.normalized,Sd=hd.size|0,Rd=hd.offset|0,Ae=hd.stride|0,Kd=hd.divisor|0);xe=X.buffer;X.buffer=
pe;Ge=X.divisor;X.divisor=Kd;Ie=X.normalized;X.normalized=Pd;Je=X.offset;X.offset=Rd;Ke=X.size;X.size=Sd;He=X.state;X.state=ne;Ld=X.stride;X.stride=Ae;Vd=X.type;X.type=De;ae=X.w;X.w=re;ce=X.x;X.x=Re;Le=X.y;X.y=Se;Hd=X.z;X.z=Ne;Td=E.call(this,aa,a,b);Ee=!1;Me=null;cf=0;af=!1;Oe=Te=0;$e=1;Xe=0;Ue=5126;We=Zd=Ud=Ve=0;wa(Td)?(Ee=!0,Me=t.createStream(34962,Td),Ue=Me.dtype):(Me=t.getBuffer(Td))?Ue=Me.dtype:"constant"in Td?($e=2,"number"===typeof Td.constant?(Ud=Td.constant,Zd=We=Ve=0):(Ud=0<Td.constant.length?
Td.constant[0]:0,Zd=1<Td.constant.length?Td.constant[1]:0,We=2<Td.constant.length?Td.constant[2]:0,Ve=3<Td.constant.length?Td.constant[3]:0)):(Me=wa(Td.buffer)?t.createStream(34962,Td.buffer):t.getBuffer(Td.buffer),Ue="type"in Td?$d[Td.type]:Me.dtype,af=!!Td.normalized,Oe=Td.size|0,Te=Td.offset|0,Xe=Td.stride|0,cf=Td.divisor|0);jf=y.buffer;y.buffer=Me;nf=y.divisor;y.divisor=cf;ff=y.normalized;y.normalized=af;kf=y.offset;y.offset=Te;lf=y.size;y.size=Oe;mf=y.state;y.state=$e;rf=y.stride;y.stride=Xe;
of=y.type;y.type=Ue;sf=y.w;y.w=Ve;Bf=y.x;y.x=Ud;Cf=y.y;y.y=Zd;Pe=y.z;y.z=We;Fe=ra.call(this,aa,a,b);pf=!1;qf=null;Df=0;Hf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;Jf=zf=yf=vf=0;wa(Fe)?(pf=!0,qf=t.createStream(34962,Fe),xf=qf.dtype):(qf=t.getBuffer(Fe))?xf=qf.dtype:"constant"in Fe?(Ff=2,"number"===typeof Fe.constant?(yf=Fe.constant,zf=Jf=vf=0):(yf=0<Fe.constant.length?Fe.constant[0]:0,zf=1<Fe.constant.length?Fe.constant[1]:0,Jf=2<Fe.constant.length?Fe.constant[2]:0,vf=3<Fe.constant.length?Fe.constant[3]:0)):(qf=
wa(Fe.buffer)?t.createStream(34962,Fe.buffer):t.getBuffer(Fe.buffer),xf="type"in Fe?$d[Fe.type]:qf.dtype,Hf=!!Fe.normalized,Ef=Fe.size|0,Af=Fe.offset|0,wf=Fe.stride|0,Df=Fe.divisor|0);Kf=I.buffer;I.buffer=qf;Lf=I.divisor;I.divisor=Df;Mf=I.normalized;I.normalized=Hf;tf=I.offset;I.offset=Af;Rf=I.size;I.size=Ef;If=I.state;I.state=Ff;uf=I.stride;I.stride=wf;dg=I.type;I.type=xf;Sf=I.w;I.w=vf;Tf=I.x;I.x=yf;qg=I.y;I.y=zf;gf=I.z;I.z=Jf;df=C.call(this,aa,a,b);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=
5126;jg=Zf=Yf=Xf=0;wa(df)?(Nf=!0,Of=t.createStream(34962,df),Uf=Of.dtype):(Of=t.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=wa(df.buffer)?t.createStream(34962,df.buffer):t.getBuffer(df.buffer),Uf="type"in df?$d[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|
0,Wf=df.stride|0,eg=df.divisor|0);rg=h.buffer;h.buffer=Of;sg=h.divisor;h.divisor=eg;tg=h.normalized;h.normalized=fg;ug=h.offset;h.offset=gg;vg=h.size;h.size=hg;wg=h.state;h.state=ig;xg=h.stride;h.stride=Wf;yg=h.type;h.type=Uf;zg=h.w;h.w=Xf;Ag=h.x;h.x=Yf;Bg=h.y;h.y=Zf;hf=h.z;h.z=jg;ef=U.call(this,aa,a,b);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;wa(ef)?(Pf=!0,Qf=t.createStream(34962,ef),Vf=Qf.dtype):(Qf=t.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?
(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=wa(ef.buffer)?t.createStream(34962,ef.buffer):t.getBuffer(ef.buffer),Vf="type"in ef?$d[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|0,$f=ef.stride|0,kg=ef.divisor|0);Cg=d.buffer;d.buffer=Qf;Dg=d.divisor;d.divisor=kg;Eg=d.normalized;d.normalized=lg;Fg=d.offset;d.offset=mg;Gg=d.size;d.size=
ng;Hg=d.state;d.state=og;Ig=d.stride;d.stride=$f;Jg=d.type;d.type=Vf;Kg=d.w;d.w=ag;Lg=d.x;d.x=bg;Mg=d.y;d.y=cg;Ng=d.z;d.z=pg;Og=sa.vert;sa.vert=44;Pg=sa.frag;sa.frag=43;va.dirty=!0;c(aa,a,b);aa.viewportWidth=A;aa.viewportHeight=u;Wd[0]=L;Wd[1]=na;Wd[2]=p;Wd[3]=H;ga[0]=O;ga[1]=n;ga[2]=W;ga[3]=J;Ha.blend_enable=F;Ga[0]=ea;Ga[1]=S;Ga[2]=x;Ga[3]=Y;Ha.depth_enable=Tb;qe[0]=Z;qe[1]=da;qe[2]=R;qe[3]=za;Ha.scissor_enable=Fa;Ha.stencil_enable=qa;ta&&(B.cpuTime+=performance.now()-ba);ca&&zc.destroyStream(V);
xa.elements=Ya;xa.offset=Ea;xa.count=oa;xa.primitive=Aa;ya[45]=ma;ya[48]=ua;ya[10]=Hb;ya[46]=Ia;ya[47]=hb;ya[34]=fa;ya[6]=Ta;ya[7]=qb;ya[8]=jb;ya[9]=Ja;La&&t.destroyStream(eb);Q.buffer=Na;Q.divisor=xd;Q.normalized=Za;Q.offset=Lb;Q.size=Mb;Q.state=nb;Q.stride=Oa;Q.type=$b;Q.w=Qa;Q.x=vb;Q.y=wb;Q.z=Ua;ec&&t.destroyStream(Ac);N.buffer=Qb;N.divisor=Kc;N.normalized=Rb;N.offset=Qd;N.size=Hc;N.state=de;N.stride=Nc;N.type=Yc;N.w=Be;N.x=mc;N.y=uc;N.z=fc;qc&&t.destroyStream(Ub);e.buffer=dd;e.divisor=$c;e.normalized=
jc;e.offset=ac;e.size=ad;e.state=Wc;e.stride=ed;e.type=yc;e.w=id;e.x=td;e.y=Cd;e.z=oe;yd&&t.destroyStream(ge);T.buffer=Bd;T.divisor=Dd;T.normalized=he;T.offset=ke;T.size=ue;T.state=le;T.stride=ie;T.type=fe;T.w=ve;T.x=be;T.y=me;T.z=Oc;we&&t.destroyStream(pe);X.buffer=xe;X.divisor=Ge;X.normalized=Ie;X.offset=Je;X.size=Ke;X.state=He;X.stride=Ld;X.type=Vd;X.w=ae;X.x=ce;X.y=Le;X.z=Hd;Ee&&t.destroyStream(Me);y.buffer=jf;y.divisor=nf;y.normalized=ff;y.offset=kf;y.size=lf;y.state=mf;y.stride=rf;y.type=of;
y.w=sf;y.x=Bf;y.y=Cf;y.z=Pe;pf&&t.destroyStream(qf);I.buffer=Kf;I.divisor=Lf;I.normalized=Mf;I.offset=tf;I.size=Rf;I.state=If;I.stride=uf;I.type=dg;I.w=Sf;I.x=Tf;I.y=qg;I.z=gf;Nf&&t.destroyStream(Of);h.buffer=rg;h.divisor=sg;h.normalized=tg;h.offset=ug;h.size=vg;h.state=wg;h.stride=xg;h.type=yg;h.w=zg;h.x=Ag;h.y=Bg;h.z=hf;Pf&&t.destroyStream(Qf);d.buffer=Cg;d.divisor=Dg;d.normalized=Eg;d.offset=Fg;d.size=Gg;d.state=Hg;d.stride=Ig;d.type=Jg;d.w=Kg;d.x=Lg;d.y=Mg;d.z=Ng;sa.vert=Og;sa.frag=Pg;va.dirty=
!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,ia,e,r,T,m,X,E,y,P,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb){var Ya,A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa,ga,Z,ua,Ka,Ga,hb,ba,fa,Ca,Ia,vc,Sb,ze,Ed,qe,Md,Be,yd,Qd,oe,ge,Cd,Wd,de;Ya=b.attributes;A=b.buffer;t=b.context;aa=b.current;
va=b.draw;xa=b.elements;zc=b.extensions;Hb=b.framebuffer;Y=b.gl;L=b.isBufferArgs;wa=b.next;Ha=b.shader;sa=b.uniforms;ya=b.vao;Fa=wa.blend_color;ga=aa.blend_color;Z=wa.blend_equation;ua=aa.blend_equation;Ka=wa.blend_func;Ga=aa.blend_func;hb=wa.colorMask;ba=aa.colorMask;fa=wa.depth_range;Ca=aa.depth_range;Ia=wa.polygonOffset_offset;vc=aa.polygonOffset_offset;Sb=wa.sample_coverage;ze=aa.sample_coverage;Ed=wa.scissor_box;qe=aa.scissor_box;Md=wa.stencil_func;Be=aa.stencil_func;yd=wa.stencil_opBack;Qd=
aa.stencil_opBack;oe=wa.stencil_opFront;ge=aa.stencil_opFront;Cd=wa.viewport;Wd=aa.viewport;de={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var d,h,b,e,k,g;d=Hb.next;d!==Hb.cur&&(d?Y.bindFramebuffer(36160,d.framebuffer):Y.bindFramebuffer(36160,null),Hb.cur=d);if(aa.dirty){var f,m,l,r,p,y,Ha,w,n,E,sa,x,C,q,v,I,D,G,R,N,Q,Fa,T,ha,X,U,ia,P,ra,Ka,Tc,zb,cb,Nb;f=wa.dither;f!==aa.dither&&(f?Y.enable(3024):Y.disable(3024),aa.dither=
f);m=Z[0];l=Z[1];if(m!==ua[0]||l!==ua[1])Y.blendEquationSeparate(m,l),ua[0]=m,ua[1]=l;r=wa.depth_func;r!==aa.depth_func&&(Y.depthFunc(r),aa.depth_func=r);p=fa[0];y=fa[1];if(p!==Ca[0]||y!==Ca[1])Y.depthRange(p,y),Ca[0]=p,Ca[1]=y;Ha=wa.depth_mask;Ha!==aa.depth_mask&&(Y.depthMask(Ha),aa.depth_mask=Ha);w=hb[0];n=hb[1];E=hb[2];sa=hb[3];if(w!==ba[0]||n!==ba[1]||E!==ba[2]||sa!==ba[3])Y.colorMask(w,n,E,sa),ba[0]=w,ba[1]=n,ba[2]=E,ba[3]=sa;x=wa.cull_enable;x!==aa.cull_enable&&(x?Y.enable(2884):Y.disable(2884),
aa.cull_enable=x);C=wa.cull_face;C!==aa.cull_face&&(Y.cullFace(C),aa.cull_face=C);q=wa.frontFace;q!==aa.frontFace&&(Y.frontFace(q),aa.frontFace=q);v=wa.lineWidth;v!==aa.lineWidth&&(Y.lineWidth(v),aa.lineWidth=v);I=wa.polygonOffset_enable;I!==aa.polygonOffset_enable&&(I?Y.enable(32823):Y.disable(32823),aa.polygonOffset_enable=I);D=Ia[0];G=Ia[1];if(D!==vc[0]||G!==vc[1])Y.polygonOffset(D,G),vc[0]=D,vc[1]=G;R=wa.sample_alpha;R!==aa.sample_alpha&&(R?Y.enable(32926):Y.disable(32926),aa.sample_alpha=R);
N=wa.sample_enable;N!==aa.sample_enable&&(N?Y.enable(32928):Y.disable(32928),aa.sample_enable=N);Q=Sb[0];Fa=Sb[1];if(Q!==ze[0]||Fa!==ze[1])Y.sampleCoverage(Q,Fa),ze[0]=Q,ze[1]=Fa;T=wa.stencil_mask;T!==aa.stencil_mask&&(Y.stencilMask(T),aa.stencil_mask=T);ha=Md[0];X=Md[1];U=Md[2];if(ha!==Be[0]||X!==Be[1]||U!==Be[2])Y.stencilFunc(ha,X,U),Be[0]=ha,Be[1]=X,Be[2]=U;ia=oe[0];P=oe[1];ra=oe[2];Ka=oe[3];if(ia!==ge[0]||P!==ge[1]||ra!==ge[2]||Ka!==ge[3])Y.stencilOpSeparate(ia,P,ra,Ka),ge[0]=ia,ge[1]=P,ge[2]=
ra,ge[3]=Ka;Tc=yd[0];zb=yd[1];cb=yd[2];Nb=yd[3];if(Tc!==Qd[0]||zb!==Qd[1]||cb!==Qd[2]||Nb!==Qd[3])Y.stencilOpSeparate(Tc,zb,cb,Nb),Qd[0]=Tc,Qd[1]=zb,Qd[2]=cb,Qd[3]=Nb}Y.blendColor(0,0,0,1);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=1;Y.enable(3042);aa.blend_enable=!0;Y.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;Y.disable(2929);aa.depth_enable=!1;Y.enable(3089);aa.scissor_enable=!0;Y.disable(2960);aa.stencil_enable=!1;if(h=aa.profile)b=performance.now(),B.count+=c;Y.useProgram(ka.program);
e=zc.angle_instanced_arrays;var ab;ya.setVAO(null);Y.uniform1i(H.location,!1);Y.uniform1i(ta.location,K.bind());ab=va.instances;for(k=0;k<c;++k){g=a[k];var pb,Va,Ed,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,Cd,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,bf,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,
Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf,rf,of,sf,Bf,Cf,Pe,Fe,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf;pb=g.viewport;Va=pb.x|0;Ed=pb.y|0;Ib="width"in pb?pb.width|0:t.framebufferWidth-Va;Jb="height"in pb?pb.height|0:t.framebufferHeight-Ed;pc=t.viewportWidth;t.viewportWidth=Ib;Ob=t.viewportHeight;t.viewportHeight=Jb;Y.viewport(Va,Ed,Ib,Jb);Wd[0]=Va;Wd[1]=
Ed;Wd[2]=Ib;Wd[3]=Jb;kb=g.viewport;Gb=kb.x|0;Db=kb.y|0;xb="width"in kb?kb.width|0:t.framebufferWidth-Gb;ib="height"in kb?kb.height|0:t.framebufferHeight-Db;Y.scissor(Gb,Db,xb,ib);qe[0]=Gb;qe[1]=Db;qe[2]=xb;qe[3]=ib;Zb=F.call(this,t,g,k);Pb=!1;mb=null;Ta=0;Vb=!1;hc=qb=0;jb=1;rb=0;Ja=5126;gb=eb=La=sb=0;L(Zb)?(Pb=!0,mb=A.createStream(34962,Zb),Ja=mb.dtype):(mb=A.getBuffer(Zb))?Ja=mb.dtype:"constant"in Zb?(jb=2,"number"===typeof Zb.constant?(La=Zb.constant,eb=gb=sb=0):(La=0<Zb.constant.length?Zb.constant[0]:
0,eb=1<Zb.constant.length?Zb.constant[1]:0,gb=2<Zb.constant.length?Zb.constant[2]:0,sb=3<Zb.constant.length?Zb.constant[3]:0)):(mb=L(Zb.buffer)?A.createStream(34962,Zb.buffer):A.getBuffer(Zb.buffer),Ja="type"in Zb?de[Zb.type]:mb.dtype,Vb=!!Zb.normalized,hc=Zb.size|0,qb=Zb.offset|0,rb=Zb.stride|0,Ta=Zb.divisor|0);Ma=Aa.location;lb=Ya[Ma];if(1===jb){lb.buffer||Y.enableVertexAttribArray(Ma);Wa=hc||1;if(lb.type!==Ja||lb.size!==Wa||lb.buffer!==mb||lb.normalized!==Vb||lb.offset!==qb||lb.stride!==rb)Y.bindBuffer(34962,
mb.buffer),Y.vertexAttribPointer(Ma,Wa,Ja,Vb,rb,qb),lb.type=Ja,lb.size=Wa,lb.buffer=mb,lb.normalized=Vb,lb.offset=qb,lb.stride=rb;lb.divisor!==Ta&&(e.vertexAttribDivisorANGLE(Ma,Ta),lb.divisor=Ta)}else if(lb.buffer&&(Y.disableVertexAttribArray(Ma),lb.buffer=null),lb.x!==La||lb.y!==eb||lb.z!==gb||lb.w!==sb)Y.vertexAttrib4f(Ma,La,eb,gb,sb),lb.x=La,lb.y=eb,lb.z=gb,lb.w=sb;ub=ma.call(this,t,g,k);tb=!1;Pa=null;Cc=0;Sa=!1;Eb=Kb=0;Na=1;Qc=0;Za=5126;Oa=nb=Mb=Lb=0;L(ub)?(tb=!0,Pa=A.createStream(34962,ub),
Za=Pa.dtype):(Pa=A.getBuffer(ub))?Za=Pa.dtype:"constant"in ub?(Na=2,"number"===typeof ub.constant?(Mb=ub.constant,nb=Oa=Lb=0):(Mb=0<ub.constant.length?ub.constant[0]:0,nb=1<ub.constant.length?ub.constant[1]:0,Oa=2<ub.constant.length?ub.constant[2]:0,Lb=3<ub.constant.length?ub.constant[3]:0)):(Pa=L(ub.buffer)?A.createStream(34962,ub.buffer):A.getBuffer(ub.buffer),Za="type"in ub?de[ub.type]:Pa.dtype,Sa=!!ub.normalized,Eb=ub.size|0,Kb=ub.offset|0,Qc=ub.stride|0,Cc=ub.divisor|0);$b=na.location;Qa=Ya[$b];
if(1===Na){Qa.buffer||Y.enableVertexAttribArray($b);vb=Eb||1;if(Qa.type!==Za||Qa.size!==vb||Qa.buffer!==Pa||Qa.normalized!==Sa||Qa.offset!==Kb||Qa.stride!==Qc)Y.bindBuffer(34962,Pa.buffer),Y.vertexAttribPointer($b,vb,Za,Sa,Qc,Kb),Qa.type=Za,Qa.size=vb,Qa.buffer=Pa,Qa.normalized=Sa,Qa.offset=Kb,Qa.stride=Qc;Qa.divisor!==Cc&&(e.vertexAttribDivisorANGLE($b,Cc),Qa.divisor=Cc)}else if(Qa.buffer&&(Y.disableVertexAttribArray($b),Qa.buffer=null),Qa.x!==Mb||Qa.y!==nb||Qa.z!==Oa||Qa.w!==Lb)Y.vertexAttrib4f($b,
Mb,nb,Oa,Lb),Qa.x=Mb,Qa.y=nb,Qa.z=Oa,Qa.w=Lb;wb=Ba.call(this,t,g,k);Ua=!1;ob=null;ec=0;Ac=!1;bb=tc=0;ic=1;wd=0;Xa=5126;Wb=$a=Ab=Mc=0;L(wb)?(Ua=!0,ob=A.createStream(34962,wb),Xa=ob.dtype):(ob=A.getBuffer(wb))?Xa=ob.dtype:"constant"in wb?(ic=2,"number"===typeof wb.constant?(Ab=wb.constant,$a=Wb=Mc=0):(Ab=0<wb.constant.length?wb.constant[0]:0,$a=1<wb.constant.length?wb.constant[1]:0,Wb=2<wb.constant.length?wb.constant[2]:0,Mc=3<wb.constant.length?wb.constant[3]:0)):(ob=L(wb.buffer)?A.createStream(34962,
wb.buffer):A.getBuffer(wb.buffer),Xa="type"in wb?de[wb.type]:ob.dtype,Ac=!!wb.normalized,bb=wb.size|0,tc=wb.offset|0,wd=wb.stride|0,ec=wb.divisor|0);rc=Ra.location;Xb=Ya[rc];if(1===ic){Xb.buffer||Y.enableVertexAttribArray(rc);Qb=bb||1;if(Xb.type!==Xa||Xb.size!==Qb||Xb.buffer!==ob||Xb.normalized!==Ac||Xb.offset!==tc||Xb.stride!==wd)Y.bindBuffer(34962,ob.buffer),Y.vertexAttribPointer(rc,Qb,Xa,Ac,wd,tc),Xb.type=Xa,Xb.size=Qb,Xb.buffer=ob,Xb.normalized=Ac,Xb.offset=tc,Xb.stride=wd;Xb.divisor!==ec&&(e.vertexAttribDivisorANGLE(rc,
ec),Xb.divisor=ec)}else if(Xb.buffer&&(Y.disableVertexAttribArray(rc),Xb.buffer=null),Xb.x!==Ab||Xb.y!==$a||Xb.z!==Wb||Xb.w!==Mc)Y.vertexAttrib4f(rc,Ab,$a,Wb,Mc),Xb.x=Ab,Xb.y=$a,Xb.z=Wb,Xb.w=Mc;Kc=V.call(this,t,g,k);Rb=!1;Cd=null;Hc=0;sd=!1;Yc=Nc=0;Jd=1;mc=0;uc=5126;Ub=qc=db=fc=0;L(Kc)?(Rb=!0,Cd=A.createStream(34962,Kc),uc=Cd.dtype):(Cd=A.getBuffer(Kc))?uc=Cd.dtype:"constant"in Kc?(Jd=2,"number"===typeof Kc.constant?(db=Kc.constant,qc=Ub=fc=0):(db=0<Kc.constant.length?Kc.constant[0]:0,qc=1<Kc.constant.length?
Kc.constant[1]:0,Ub=2<Kc.constant.length?Kc.constant[2]:0,fc=3<Kc.constant.length?Kc.constant[3]:0)):(Cd=L(Kc.buffer)?A.createStream(34962,Kc.buffer):A.getBuffer(Kc.buffer),uc="type"in Kc?de[Kc.type]:Cd.dtype,sd=!!Kc.normalized,Yc=Kc.size|0,Nc=Kc.offset|0,mc=Kc.stride|0,Hc=Kc.divisor|0);Yb=Tb.location;bc=Ya[Yb];if(1===Jd){bc.buffer||Y.enableVertexAttribArray(Yb);gc=Yc||1;if(bc.type!==uc||bc.size!==gc||bc.buffer!==Cd||bc.normalized!==sd||bc.offset!==Nc||bc.stride!==mc)Y.bindBuffer(34962,Cd.buffer),
Y.vertexAttribPointer(Yb,gc,uc,sd,mc,Nc),bc.type=uc,bc.size=gc,bc.buffer=Cd,bc.normalized=sd,bc.offset=Nc,bc.stride=mc;bc.divisor!==Hc&&(e.vertexAttribDivisorANGLE(Yb,Hc),bc.divisor=Hc)}else if(bc.buffer&&(Y.disableVertexAttribArray(Yb),bc.buffer=null),bc.x!==db||bc.y!==qc||bc.z!==Ub||bc.w!==fc)Y.vertexAttrib4f(Yb,db,qc,Ub,fc),bc.x=db,bc.y=qc,bc.z=Ub,bc.w=fc;xc=ca.call(this,t,g,k);Bc=!1;cd=null;Rc=0;Sc=!1;Zc=Uc=0;ld=1;dd=0;$c=5126;Wc=ad=ac=jc=0;L(xc)?(Bc=!0,cd=A.createStream(34962,xc),$c=cd.dtype):
(cd=A.getBuffer(xc))?$c=cd.dtype:"constant"in xc?(ld=2,"number"===typeof xc.constant?(ac=xc.constant,ad=Wc=jc=0):(ac=0<xc.constant.length?xc.constant[0]:0,ad=1<xc.constant.length?xc.constant[1]:0,Wc=2<xc.constant.length?xc.constant[2]:0,jc=3<xc.constant.length?xc.constant[3]:0)):(cd=L(xc.buffer)?A.createStream(34962,xc.buffer):A.getBuffer(xc.buffer),$c="type"in xc?de[xc.type]:cd.dtype,Sc=!!xc.normalized,Zc=xc.size|0,Uc=xc.offset|0,dd=xc.stride|0,Rc=xc.divisor|0);ed=Ea.location;yc=Ya[ed];if(1===ld){yc.buffer||
Y.enableVertexAttribArray(ed);id=Zc||1;if(yc.type!==$c||yc.size!==id||yc.buffer!==cd||yc.normalized!==Sc||yc.offset!==Uc||yc.stride!==dd)Y.bindBuffer(34962,cd.buffer),Y.vertexAttribPointer(ed,id,$c,Sc,dd,Uc),yc.type=$c,yc.size=id,yc.buffer=cd,yc.normalized=Sc,yc.offset=Uc,yc.stride=dd;yc.divisor!==Rc&&(e.vertexAttribDivisorANGLE(ed,Rc),yc.divisor=Rc)}else if(yc.buffer&&(Y.disableVertexAttribArray(ed),yc.buffer=null),yc.x!==ac||yc.y!==ad||yc.z!==Wc||yc.w!==jc)Y.vertexAttrib4f(ed,ac,ad,Wc,jc),yc.x=
ac,yc.y=ad,yc.z=Wc,yc.w=jc;td=S.call(this,t,g,k);Ad=!1;te=null;jd=0;bf=!1;ee=Od=0;ye=1;Yd=0;Id=5126;ud=Vc=nd=Gd=0;L(td)?(Ad=!0,te=A.createStream(34962,td),Id=te.dtype):(te=A.getBuffer(td))?Id=te.dtype:"constant"in td?(ye=2,"number"===typeof td.constant?(nd=td.constant,Vc=ud=Gd=0):(nd=0<td.constant.length?td.constant[0]:0,Vc=1<td.constant.length?td.constant[1]:0,ud=2<td.constant.length?td.constant[2]:0,Gd=3<td.constant.length?td.constant[3]:0)):(te=L(td.buffer)?A.createStream(34962,td.buffer):A.getBuffer(td.buffer),
Id="type"in td?de[td.type]:te.dtype,bf=!!td.normalized,ee=td.size|0,Od=td.offset|0,Yd=td.stride|0,jd=td.divisor|0);rd=oa.location;kd=Ya[rd];if(1===ye){kd.buffer||Y.enableVertexAttribArray(rd);vd=ee||1;if(kd.type!==Id||kd.size!==vd||kd.buffer!==te||kd.normalized!==bf||kd.offset!==Od||kd.stride!==Yd)Y.bindBuffer(34962,te.buffer),Y.vertexAttribPointer(rd,vd,Id,bf,Yd,Od),kd.type=Id,kd.size=vd,kd.buffer=te,kd.normalized=bf,kd.offset=Od,kd.stride=Yd;kd.divisor!==jd&&(e.vertexAttribDivisorANGLE(rd,jd),kd.divisor=
jd)}else if(kd.buffer&&(Y.disableVertexAttribArray(rd),kd.buffer=null),kd.x!==nd||kd.y!==Vc||kd.z!==ud||kd.w!==Gd)Y.vertexAttrib4f(rd,nd,Vc,ud,Gd),kd.x=nd,kd.y=Vc,kd.z=ud,kd.w=Gd;Bd=O.call(this,t,g,k);Dd=!1;he=null;ke=0;ue=!1;ie=le=0;fe=1;ve=0;be=5126;we=hd=Oc=me=0;L(Bd)?(Dd=!0,he=A.createStream(34962,Bd),be=he.dtype):(he=A.getBuffer(Bd))?be=he.dtype:"constant"in Bd?(fe=2,"number"===typeof Bd.constant?(Oc=Bd.constant,hd=we=me=0):(Oc=0<Bd.constant.length?Bd.constant[0]:0,hd=1<Bd.constant.length?Bd.constant[1]:
0,we=2<Bd.constant.length?Bd.constant[2]:0,me=3<Bd.constant.length?Bd.constant[3]:0)):(he=L(Bd.buffer)?A.createStream(34962,Bd.buffer):A.getBuffer(Bd.buffer),be="type"in Bd?de[Bd.type]:he.dtype,ue=!!Bd.normalized,ie=Bd.size|0,le=Bd.offset|0,ve=Bd.stride|0,ke=Bd.divisor|0);pe=z.location;Kd=Ya[pe];if(1===fe){Kd.buffer||Y.enableVertexAttribArray(pe);Pd=ie||4;if(Kd.type!==be||Kd.size!==Pd||Kd.buffer!==he||Kd.normalized!==ue||Kd.offset!==le||Kd.stride!==ve)Y.bindBuffer(34962,he.buffer),Y.vertexAttribPointer(pe,
Pd,be,ue,ve,le),Kd.type=be,Kd.size=Pd,Kd.buffer=he,Kd.normalized=ue,Kd.offset=le,Kd.stride=ve;Kd.divisor!==ke&&(e.vertexAttribDivisorANGLE(pe,ke),Kd.divisor=ke)}else if(Kd.buffer&&(Y.disableVertexAttribArray(pe),Kd.buffer=null),Kd.x!==Oc||Kd.y!==hd||Kd.z!==we||Kd.w!==me)Y.vertexAttrib4f(pe,Oc,hd,we,me),Kd.x=Oc,Kd.y=hd,Kd.z=we,Kd.w=me;Rd=J.call(this,t,g,k);Sd=!1;ne=null;Ae=0;De=!1;Re=re=0;Se=1;Ne=0;xe=5126;Ke=Je=Ie=Ge=0;L(Rd)?(Sd=!0,ne=A.createStream(34962,Rd),xe=ne.dtype):(ne=A.getBuffer(Rd))?xe=
ne.dtype:"constant"in Rd?(Se=2,"number"===typeof Rd.constant?(Ie=Rd.constant,Je=Ke=Ge=0):(Ie=0<Rd.constant.length?Rd.constant[0]:0,Je=1<Rd.constant.length?Rd.constant[1]:0,Ke=2<Rd.constant.length?Rd.constant[2]:0,Ge=3<Rd.constant.length?Rd.constant[3]:0)):(ne=L(Rd.buffer)?A.createStream(34962,Rd.buffer):A.getBuffer(Rd.buffer),xe="type"in Rd?de[Rd.type]:ne.dtype,De=!!Rd.normalized,Re=Rd.size|0,re=Rd.offset|0,Ne=Rd.stride|0,Ae=Rd.divisor|0);He=qa.location;Ld=Ya[He];if(1===Se){Ld.buffer||Y.enableVertexAttribArray(He);
Vd=Re||4;if(Ld.type!==xe||Ld.size!==Vd||Ld.buffer!==ne||Ld.normalized!==De||Ld.offset!==re||Ld.stride!==Ne)Y.bindBuffer(34962,ne.buffer),Y.vertexAttribPointer(He,Vd,xe,De,Ne,re),Ld.type=xe,Ld.size=Vd,Ld.buffer=ne,Ld.normalized=De,Ld.offset=re,Ld.stride=Ne;Ld.divisor!==Ae&&(e.vertexAttribDivisorANGLE(He,Ae),Ld.divisor=Ae)}else if(Ld.buffer&&(Y.disableVertexAttribArray(He),Ld.buffer=null),Ld.x!==Ie||Ld.y!==Je||Ld.z!==Ke||Ld.w!==Ge)Y.vertexAttrib4f(He,Ie,Je,Ke,Ge),Ld.x=Ie,Ld.y=Je,Ld.z=Ke,Ld.w=Ge;ae=
u.call(this,t,g,k);ce=!1;Le=null;Hd=0;Td=!1;Me=Ee=0;cf=1;af=0;Te=5126;Ue=Xe=$e=Oe=0;L(ae)?(ce=!0,Le=A.createStream(34962,ae),Te=Le.dtype):(Le=A.getBuffer(ae))?Te=Le.dtype:"constant"in ae?(cf=2,"number"===typeof ae.constant?($e=ae.constant,Xe=Ue=Oe=0):($e=0<ae.constant.length?ae.constant[0]:0,Xe=1<ae.constant.length?ae.constant[1]:0,Ue=2<ae.constant.length?ae.constant[2]:0,Oe=3<ae.constant.length?ae.constant[3]:0)):(Le=L(ae.buffer)?A.createStream(34962,ae.buffer):A.getBuffer(ae.buffer),Te="type"in
ae?de[ae.type]:Le.dtype,Td=!!ae.normalized,Me=ae.size|0,Ee=ae.offset|0,af=ae.stride|0,Hd=ae.divisor|0);Ve=da.location;Ud=Ya[Ve];if(1===cf){Ud.buffer||Y.enableVertexAttribArray(Ve);Zd=Me||1;if(Ud.type!==Te||Ud.size!==Zd||Ud.buffer!==Le||Ud.normalized!==Td||Ud.offset!==Ee||Ud.stride!==af)Y.bindBuffer(34962,Le.buffer),Y.vertexAttribPointer(Ve,Zd,Te,Td,af,Ee),Ud.type=Te,Ud.size=Zd,Ud.buffer=Le,Ud.normalized=Td,Ud.offset=Ee,Ud.stride=af;Ud.divisor!==Hd&&(e.vertexAttribDivisorANGLE(Ve,Hd),Ud.divisor=Hd)}else if(Ud.buffer&&
(Y.disableVertexAttribArray(Ve),Ud.buffer=null),Ud.x!==$e||Ud.y!==Xe||Ud.z!==Ue||Ud.w!==Oe)Y.vertexAttrib4f(Ve,$e,Xe,Ue,Oe),Ud.x=$e,Ud.y=Xe,Ud.z=Ue,Ud.w=Oe;We=t.pixelRatio;k&&jf===We||(jf=We,Y.uniform1f(Da.location,We));nf=M.call(this,t,g,k);ff=nf[0];lf=nf[1];k&&kf===ff&&mf===lf||(kf=ff,mf=lf,Y.uniform2f(la.location,ff,lf));rf=g.scale;of=rf[0];Bf=rf[1];k&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,Y.uniform2f(za.location,of,Bf));Pe=g.scaleFract;Fe=Pe[0];qf=Pe[1];k&&pf===Fe&&Df===qf||(pf=Fe,Df=qf,Y.uniform2f(ea.location,
Fe,qf));Hf=g.translate;Af=Hf[0];Ff=Hf[1];k&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,Y.uniform2f(ja.location,Af,Ff));xf=g.translateFract;vf=xf[0];zf=xf[1];k&&yf===vf&&Jf===zf||(yf=vf,Jf=zf,Y.uniform2f(pa.location,vf,zf));Kf=g.opacity;k&&Lf===Kf||(Lf=Kf,Y.uniform1f(W.location,Kf));Mf=g.elements;tf=null;(tf=(Rf=L(Mf))?xa.createStream(Mf):xa.getElements(Mf))&&Y.bindBuffer(34963,tf.buffer.buffer);If=g.offset;if(uf=g.count)0<ab?tf?e.drawElementsInstancedANGLE(0,uf,tf.type,If<<(tf.type-5121>>1),ab):e.drawArraysInstancedANGLE(0,
If,uf,ab):0>ab&&(tf?Y.drawElements(0,uf,tf.type,If<<(tf.type-5121>>1)):Y.drawArrays(0,If,uf)),t.viewportWidth=pc,t.viewportHeight=Ob,Pb&&A.destroyStream(mb),tb&&A.destroyStream(Pa),Ua&&A.destroyStream(ob),Rb&&A.destroyStream(Cd),Bc&&A.destroyStream(cd),Ad&&A.destroyStream(te),Dd&&A.destroyStream(he),Sd&&A.destroyStream(ne),ce&&A.destroyStream(Le),Rf&&xa.destroyStream(tf)}K.unbind();aa.dirty=!0;ya.setVAO(null);h&&(B.cpuTime+=performance.now()-b)},draw:function(d){var h,e,b,m,u,r,y,Ha,w,O,J,F,E,sa,
S,C,q,I,D,M,K,N,Q,Fa,T,V,ha,X,U,ca,ia,P,ma,ka,ra,Ba,Ka,Tc,zb,cb,Nb,ab,pb,Va,Ed,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,Cd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td,Ad,te,jd,bf,Od,ee,ye,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re;h=Hb.next;h!==Hb.cur&&
(h?Y.bindFramebuffer(36160,h.framebuffer):Y.bindFramebuffer(36160,null),Hb.cur=h);if(aa.dirty){var Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf;Se=wa.dither;Se!==aa.dither&&(Se?Y.enable(3024):Y.disable(3024),aa.dither=Se);Ne=Z[0];xe=Z[1];if(Ne!==ua[0]||xe!==ua[1])Y.blendEquationSeparate(Ne,xe),ua[0]=Ne,ua[1]=xe;Ge=wa.depth_func;Ge!==aa.depth_func&&(Y.depthFunc(Ge),aa.depth_func=Ge);Ie=fa[0];Je=fa[1];if(Ie!==Ca[0]||Je!==Ca[1])Y.depthRange(Ie,
Je),Ca[0]=Ie,Ca[1]=Je;Ke=wa.depth_mask;Ke!==aa.depth_mask&&(Y.depthMask(Ke),aa.depth_mask=Ke);He=hb[0];Ld=hb[1];Vd=hb[2];ae=hb[3];if(He!==ba[0]||Ld!==ba[1]||Vd!==ba[2]||ae!==ba[3])Y.colorMask(He,Ld,Vd,ae),ba[0]=He,ba[1]=Ld,ba[2]=Vd,ba[3]=ae;ce=wa.cull_enable;ce!==aa.cull_enable&&(ce?Y.enable(2884):Y.disable(2884),aa.cull_enable=ce);Le=wa.cull_face;Le!==aa.cull_face&&(Y.cullFace(Le),aa.cull_face=Le);Hd=wa.frontFace;Hd!==aa.frontFace&&(Y.frontFace(Hd),aa.frontFace=Hd);Td=wa.lineWidth;Td!==aa.lineWidth&&
(Y.lineWidth(Td),aa.lineWidth=Td);Ee=wa.polygonOffset_enable;Ee!==aa.polygonOffset_enable&&(Ee?Y.enable(32823):Y.disable(32823),aa.polygonOffset_enable=Ee);Me=Ia[0];cf=Ia[1];if(Me!==vc[0]||cf!==vc[1])Y.polygonOffset(Me,cf),vc[0]=Me,vc[1]=cf;af=wa.sample_alpha;af!==aa.sample_alpha&&(af?Y.enable(32926):Y.disable(32926),aa.sample_alpha=af);Te=wa.sample_enable;Te!==aa.sample_enable&&(Te?Y.enable(32928):Y.disable(32928),aa.sample_enable=Te);Oe=Sb[0];$e=Sb[1];if(Oe!==ze[0]||$e!==ze[1])Y.sampleCoverage(Oe,
$e),ze[0]=Oe,ze[1]=$e;Xe=wa.stencil_mask;Xe!==aa.stencil_mask&&(Y.stencilMask(Xe),aa.stencil_mask=Xe);Ue=Md[0];Ve=Md[1];Ud=Md[2];if(Ue!==Be[0]||Ve!==Be[1]||Ud!==Be[2])Y.stencilFunc(Ue,Ve,Ud),Be[0]=Ue,Be[1]=Ve,Be[2]=Ud;Zd=oe[0];We=oe[1];jf=oe[2];nf=oe[3];if(Zd!==ge[0]||We!==ge[1]||jf!==ge[2]||nf!==ge[3])Y.stencilOpSeparate(Zd,We,jf,nf),ge[0]=Zd,ge[1]=We,ge[2]=jf,ge[3]=nf;ff=yd[0];kf=yd[1];lf=yd[2];mf=yd[3];if(ff!==Qd[0]||kf!==Qd[1]||lf!==Qd[2]||mf!==Qd[3])Y.stencilOpSeparate(ff,kf,lf,mf),Qd[0]=ff,
Qd[1]=kf,Qd[2]=lf,Qd[3]=mf}e=d.viewport;b=e.x|0;m=e.y|0;u="width"in e?e.width|0:t.framebufferWidth-b;r="height"in e?e.height|0:t.framebufferHeight-m;y=t.viewportWidth;t.viewportWidth=u;Ha=t.viewportHeight;t.viewportHeight=r;Y.viewport(b,m,u,r);Wd[0]=b;Wd[1]=m;Wd[2]=u;Wd[3]=r;Y.blendColor(0,0,0,1);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=1;Y.enable(3042);aa.blend_enable=!0;Y.blendFuncSeparate(770,771,773,1);Ga[0]=770;Ga[1]=771;Ga[2]=773;Ga[3]=1;Y.disable(2929);aa.depth_enable=!1;w=d.viewport;O=w.x|0;J=w.y|0;
F="width"in w?w.width|0:t.framebufferWidth-O;E="height"in w?w.height|0:t.framebufferHeight-J;Y.scissor(O,J,F,E);qe[0]=O;qe[1]=J;qe[2]=F;qe[3]=E;Y.enable(3089);aa.scissor_enable=!0;Y.disable(2960);aa.stencil_enable=!1;if(sa=aa.profile)S=performance.now(),B.count++;Y.useProgram(k.program);C=zc.angle_instanced_arrays;ya.setVAO(null);q=c.call(this,t,d,0);I=!1;D=null;M=0;K=!1;Q=N=0;Fa=1;T=0;V=5126;ca=U=X=ha=0;L(q)?(I=!0,D=A.createStream(34962,q),V=D.dtype):(D=A.getBuffer(q))?V=D.dtype:"constant"in q?(Fa=
2,"number"===typeof q.constant?(X=q.constant,U=ca=ha=0):(X=0<q.constant.length?q.constant[0]:0,U=1<q.constant.length?q.constant[1]:0,ca=2<q.constant.length?q.constant[2]:0,ha=3<q.constant.length?q.constant[3]:0)):(D=L(q.buffer)?A.createStream(34962,q.buffer):A.getBuffer(q.buffer),V="type"in q?de[q.type]:D.dtype,K=!!q.normalized,Q=q.size|0,N=q.offset|0,T=q.stride|0,M=q.divisor|0);ia=Aa.location;P=Ya[ia];if(1===Fa){P.buffer||Y.enableVertexAttribArray(ia);ma=Q||1;if(P.type!==V||P.size!==ma||P.buffer!==
D||P.normalized!==K||P.offset!==N||P.stride!==T)Y.bindBuffer(34962,D.buffer),Y.vertexAttribPointer(ia,ma,V,K,T,N),P.type=V,P.size=ma,P.buffer=D,P.normalized=K,P.offset=N,P.stride=T;P.divisor!==M&&(C.vertexAttribDivisorANGLE(ia,M),P.divisor=M)}else if(P.buffer&&(Y.disableVertexAttribArray(ia),P.buffer=null),P.x!==X||P.y!==U||P.z!==ca||P.w!==ha)Y.vertexAttrib4f(ia,X,U,ca,ha),P.x=X,P.y=U,P.z=ca,P.w=ha;ka=l.call(this,t,d,0);ra=!1;Ba=null;Ka=0;Tc=!1;cb=zb=0;Nb=1;ab=0;pb=5126;Jb=Ib=Ed=Va=0;L(ka)?(ra=!0,
Ba=A.createStream(34962,ka),pb=Ba.dtype):(Ba=A.getBuffer(ka))?pb=Ba.dtype:"constant"in ka?(Nb=2,"number"===typeof ka.constant?(Ed=ka.constant,Ib=Jb=Va=0):(Ed=0<ka.constant.length?ka.constant[0]:0,Ib=1<ka.constant.length?ka.constant[1]:0,Jb=2<ka.constant.length?ka.constant[2]:0,Va=3<ka.constant.length?ka.constant[3]:0)):(Ba=L(ka.buffer)?A.createStream(34962,ka.buffer):A.getBuffer(ka.buffer),pb="type"in ka?de[ka.type]:Ba.dtype,Tc=!!ka.normalized,cb=ka.size|0,zb=ka.offset|0,ab=ka.stride|0,Ka=ka.divisor|
0);pc=na.location;Ob=Ya[pc];if(1===Nb){Ob.buffer||Y.enableVertexAttribArray(pc);kb=cb||1;if(Ob.type!==pb||Ob.size!==kb||Ob.buffer!==Ba||Ob.normalized!==Tc||Ob.offset!==zb||Ob.stride!==ab)Y.bindBuffer(34962,Ba.buffer),Y.vertexAttribPointer(pc,kb,pb,Tc,ab,zb),Ob.type=pb,Ob.size=kb,Ob.buffer=Ba,Ob.normalized=Tc,Ob.offset=zb,Ob.stride=ab;Ob.divisor!==Ka&&(C.vertexAttribDivisorANGLE(pc,Ka),Ob.divisor=Ka)}else if(Ob.buffer&&(Y.disableVertexAttribArray(pc),Ob.buffer=null),Ob.x!==Ed||Ob.y!==Ib||Ob.z!==Jb||
Ob.w!==Va)Y.vertexAttrib4f(pc,Ed,Ib,Jb,Va),Ob.x=Ed,Ob.y=Ib,Ob.z=Jb,Ob.w=Va;Gb=a.call(this,t,d,0);Db=!1;xb=null;ib=0;Zb=!1;mb=Pb=0;Ta=1;Vb=0;qb=5126;Ja=rb=jb=hc=0;L(Gb)?(Db=!0,xb=A.createStream(34962,Gb),qb=xb.dtype):(xb=A.getBuffer(Gb))?qb=xb.dtype:"constant"in Gb?(Ta=2,"number"===typeof Gb.constant?(jb=Gb.constant,rb=Ja=hc=0):(jb=0<Gb.constant.length?Gb.constant[0]:0,rb=1<Gb.constant.length?Gb.constant[1]:0,Ja=2<Gb.constant.length?Gb.constant[2]:0,hc=3<Gb.constant.length?Gb.constant[3]:0)):(xb=L(Gb.buffer)?
A.createStream(34962,Gb.buffer):A.getBuffer(Gb.buffer),qb="type"in Gb?de[Gb.type]:xb.dtype,Zb=!!Gb.normalized,mb=Gb.size|0,Pb=Gb.offset|0,Vb=Gb.stride|0,ib=Gb.divisor|0);sb=Ra.location;La=Ya[sb];if(1===Ta){La.buffer||Y.enableVertexAttribArray(sb);eb=mb||1;if(La.type!==qb||La.size!==eb||La.buffer!==xb||La.normalized!==Zb||La.offset!==Pb||La.stride!==Vb)Y.bindBuffer(34962,xb.buffer),Y.vertexAttribPointer(sb,eb,qb,Zb,Vb,Pb),La.type=qb,La.size=eb,La.buffer=xb,La.normalized=Zb,La.offset=Pb,La.stride=Vb;
La.divisor!==ib&&(C.vertexAttribDivisorANGLE(sb,ib),La.divisor=ib)}else if(La.buffer&&(Y.disableVertexAttribArray(sb),La.buffer=null),La.x!==jb||La.y!==rb||La.z!==Ja||La.w!==hc)Y.vertexAttrib4f(sb,jb,rb,Ja,hc),La.x=jb,La.y=rb,La.z=Ja,La.w=hc;gb=f.call(this,t,d,0);Ma=!1;lb=null;Wa=0;ub=!1;Pa=tb=0;Cc=1;Sa=0;Kb=5126;Za=Qc=Na=Eb=0;L(gb)?(Ma=!0,lb=A.createStream(34962,gb),Kb=lb.dtype):(lb=A.getBuffer(gb))?Kb=lb.dtype:"constant"in gb?(Cc=2,"number"===typeof gb.constant?(Na=gb.constant,Qc=Za=Eb=0):(Na=0<
gb.constant.length?gb.constant[0]:0,Qc=1<gb.constant.length?gb.constant[1]:0,Za=2<gb.constant.length?gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(lb=L(gb.buffer)?A.createStream(34962,gb.buffer):A.getBuffer(gb.buffer),Kb="type"in gb?de[gb.type]:lb.dtype,ub=!!gb.normalized,Pa=gb.size|0,tb=gb.offset|0,Sa=gb.stride|0,Wa=gb.divisor|0);Lb=Tb.location;Mb=Ya[Lb];if(1===Cc){Mb.buffer||Y.enableVertexAttribArray(Lb);nb=Pa||1;if(Mb.type!==Kb||Mb.size!==nb||Mb.buffer!==lb||Mb.normalized!==ub||
Mb.offset!==tb||Mb.stride!==Sa)Y.bindBuffer(34962,lb.buffer),Y.vertexAttribPointer(Lb,nb,Kb,ub,Sa,tb),Mb.type=Kb,Mb.size=nb,Mb.buffer=lb,Mb.normalized=ub,Mb.offset=tb,Mb.stride=Sa;Mb.divisor!==Wa&&(C.vertexAttribDivisorANGLE(Lb,Wa),Mb.divisor=Wa)}else if(Mb.buffer&&(Y.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Na||Mb.y!==Qc||Mb.z!==Za||Mb.w!==Eb)Y.vertexAttrib4f(Lb,Na,Qc,Za,Eb),Mb.x=Na,Mb.y=Qc,Mb.z=Za,Mb.w=Eb;Oa=g.call(this,t,d,0);$b=!1;Qa=null;vb=0;wb=!1;ob=Ua=0;ec=1;Ac=0;tc=5126;Xa=Cd=
ic=bb=0;L(Oa)?($b=!0,Qa=A.createStream(34962,Oa),tc=Qa.dtype):(Qa=A.getBuffer(Oa))?tc=Qa.dtype:"constant"in Oa?(ec=2,"number"===typeof Oa.constant?(ic=Oa.constant,Cd=Xa=bb=0):(ic=0<Oa.constant.length?Oa.constant[0]:0,Cd=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=L(Oa.buffer)?A.createStream(34962,Oa.buffer):A.getBuffer(Oa.buffer),tc="type"in Oa?de[Oa.type]:Qa.dtype,wb=!!Oa.normalized,ob=Oa.size|0,Ua=Oa.offset|0,Ac=Oa.stride|
0,vb=Oa.divisor|0);Mc=Ea.location;Ab=Ya[Mc];if(1===ec){Ab.buffer||Y.enableVertexAttribArray(Mc);$a=ob||1;if(Ab.type!==tc||Ab.size!==$a||Ab.buffer!==Qa||Ab.normalized!==wb||Ab.offset!==Ua||Ab.stride!==Ac)Y.bindBuffer(34962,Qa.buffer),Y.vertexAttribPointer(Mc,$a,tc,wb,Ac,Ua),Ab.type=tc,Ab.size=$a,Ab.buffer=Qa,Ab.normalized=wb,Ab.offset=Ua,Ab.stride=Ac;Ab.divisor!==vb&&(C.vertexAttribDivisorANGLE(Mc,vb),Ab.divisor=vb)}else if(Ab.buffer&&(Y.disableVertexAttribArray(Mc),Ab.buffer=null),Ab.x!==ic||Ab.y!==
Cd||Ab.z!==Xa||Ab.w!==bb)Y.vertexAttrib4f(Mc,ic,Cd,Xa,bb),Ab.x=ic,Ab.y=Cd,Ab.z=Xa,Ab.w=bb;Wb=n.call(this,t,d,0);rc=!1;Xb=null;Qb=0;Kc=!1;je=Rb=0;Hc=1;sd=0;Nc=5126;uc=mc=Jd=Yc=0;L(Wb)?(rc=!0,Xb=A.createStream(34962,Wb),Nc=Xb.dtype):(Xb=A.getBuffer(Wb))?Nc=Xb.dtype:"constant"in Wb?(Hc=2,"number"===typeof Wb.constant?(Jd=Wb.constant,mc=uc=Yc=0):(Jd=0<Wb.constant.length?Wb.constant[0]:0,mc=1<Wb.constant.length?Wb.constant[1]:0,uc=2<Wb.constant.length?Wb.constant[2]:0,Yc=3<Wb.constant.length?Wb.constant[3]:
0)):(Xb=L(Wb.buffer)?A.createStream(34962,Wb.buffer):A.getBuffer(Wb.buffer),Nc="type"in Wb?de[Wb.type]:Xb.dtype,Kc=!!Wb.normalized,je=Wb.size|0,Rb=Wb.offset|0,sd=Wb.stride|0,Qb=Wb.divisor|0);fc=oa.location;db=Ya[fc];if(1===Hc){db.buffer||Y.enableVertexAttribArray(fc);qc=je||1;if(db.type!==Nc||db.size!==qc||db.buffer!==Xb||db.normalized!==Kc||db.offset!==Rb||db.stride!==sd)Y.bindBuffer(34962,Xb.buffer),Y.vertexAttribPointer(fc,qc,Nc,Kc,sd,Rb),db.type=Nc,db.size=qc,db.buffer=Xb,db.normalized=Kc,db.offset=
Rb,db.stride=sd;db.divisor!==Qb&&(C.vertexAttribDivisorANGLE(fc,Qb),db.divisor=Qb)}else if(db.buffer&&(Y.disableVertexAttribArray(fc),db.buffer=null),db.x!==Jd||db.y!==mc||db.z!==uc||db.w!==Yc)Y.vertexAttrib4f(fc,Jd,mc,uc,Yc),db.x=Jd,db.y=mc,db.z=uc,db.w=Yc;Ub=p.call(this,t,d,0);Yb=!1;bc=null;gc=0;xc=!1;cd=Bc=0;Rc=1;Sc=0;Uc=5126;$c=dd=ld=Zc=0;L(Ub)?(Yb=!0,bc=A.createStream(34962,Ub),Uc=bc.dtype):(bc=A.getBuffer(Ub))?Uc=bc.dtype:"constant"in Ub?(Rc=2,"number"===typeof Ub.constant?(ld=Ub.constant,dd=
$c=Zc=0):(ld=0<Ub.constant.length?Ub.constant[0]:0,dd=1<Ub.constant.length?Ub.constant[1]:0,$c=2<Ub.constant.length?Ub.constant[2]:0,Zc=3<Ub.constant.length?Ub.constant[3]:0)):(bc=L(Ub.buffer)?A.createStream(34962,Ub.buffer):A.getBuffer(Ub.buffer),Uc="type"in Ub?de[Ub.type]:bc.dtype,xc=!!Ub.normalized,cd=Ub.size|0,Bc=Ub.offset|0,Sc=Ub.stride|0,gc=Ub.divisor|0);jc=z.location;ac=Ya[jc];if(1===Rc){ac.buffer||Y.enableVertexAttribArray(jc);ad=cd||4;if(ac.type!==Uc||ac.size!==ad||ac.buffer!==bc||ac.normalized!==
xc||ac.offset!==Bc||ac.stride!==Sc)Y.bindBuffer(34962,bc.buffer),Y.vertexAttribPointer(jc,ad,Uc,xc,Sc,Bc),ac.type=Uc,ac.size=ad,ac.buffer=bc,ac.normalized=xc,ac.offset=Bc,ac.stride=Sc;ac.divisor!==gc&&(C.vertexAttribDivisorANGLE(jc,gc),ac.divisor=gc)}else if(ac.buffer&&(Y.disableVertexAttribArray(jc),ac.buffer=null),ac.x!==ld||ac.y!==dd||ac.z!==$c||ac.w!==Zc)Y.vertexAttrib4f(jc,ld,dd,$c,Zc),ac.x=ld,ac.y=dd,ac.z=$c,ac.w=Zc;Wc=v.call(this,t,d,0);ed=!1;yc=null;id=0;td=!1;te=Ad=0;jd=1;bf=0;Od=5126;Id=
Yd=ye=ee=0;L(Wc)?(ed=!0,yc=A.createStream(34962,Wc),Od=yc.dtype):(yc=A.getBuffer(Wc))?Od=yc.dtype:"constant"in Wc?(jd=2,"number"===typeof Wc.constant?(ye=Wc.constant,Yd=Id=ee=0):(ye=0<Wc.constant.length?Wc.constant[0]:0,Yd=1<Wc.constant.length?Wc.constant[1]:0,Id=2<Wc.constant.length?Wc.constant[2]:0,ee=3<Wc.constant.length?Wc.constant[3]:0)):(yc=L(Wc.buffer)?A.createStream(34962,Wc.buffer):A.getBuffer(Wc.buffer),Od="type"in Wc?de[Wc.type]:yc.dtype,td=!!Wc.normalized,te=Wc.size|0,Ad=Wc.offset|0,bf=
Wc.stride|0,id=Wc.divisor|0);Gd=qa.location;nd=Ya[Gd];if(1===jd){nd.buffer||Y.enableVertexAttribArray(Gd);Vc=te||4;if(nd.type!==Od||nd.size!==Vc||nd.buffer!==yc||nd.normalized!==td||nd.offset!==Ad||nd.stride!==bf)Y.bindBuffer(34962,yc.buffer),Y.vertexAttribPointer(Gd,Vc,Od,td,bf,Ad),nd.type=Od,nd.size=Vc,nd.buffer=yc,nd.normalized=td,nd.offset=Ad,nd.stride=bf;nd.divisor!==id&&(C.vertexAttribDivisorANGLE(Gd,id),nd.divisor=id)}else if(nd.buffer&&(Y.disableVertexAttribArray(Gd),nd.buffer=null),nd.x!==
ye||nd.y!==Yd||nd.z!==Id||nd.w!==ee)Y.vertexAttrib4f(Gd,ye,Yd,Id,ee),nd.x=ye,nd.y=Yd,nd.z=Id,nd.w=ee;ud=R.call(this,t,d,0);rd=!1;kd=null;vd=0;Bd=!1;he=Dd=0;ke=1;ue=0;le=5126;be=ve=fe=ie=0;L(ud)?(rd=!0,kd=A.createStream(34962,ud),le=kd.dtype):(kd=A.getBuffer(ud))?le=kd.dtype:"constant"in ud?(ke=2,"number"===typeof ud.constant?(fe=ud.constant,ve=be=ie=0):(fe=0<ud.constant.length?ud.constant[0]:0,ve=1<ud.constant.length?ud.constant[1]:0,be=2<ud.constant.length?ud.constant[2]:0,ie=3<ud.constant.length?
ud.constant[3]:0)):(kd=L(ud.buffer)?A.createStream(34962,ud.buffer):A.getBuffer(ud.buffer),le="type"in ud?de[ud.type]:kd.dtype,Bd=!!ud.normalized,he=ud.size|0,Dd=ud.offset|0,ue=ud.stride|0,vd=ud.divisor|0);me=da.location;Oc=Ya[me];if(1===ke){Oc.buffer||Y.enableVertexAttribArray(me);hd=he||1;if(Oc.type!==le||Oc.size!==hd||Oc.buffer!==kd||Oc.normalized!==Bd||Oc.offset!==Dd||Oc.stride!==ue)Y.bindBuffer(34962,kd.buffer),Y.vertexAttribPointer(me,hd,le,Bd,ue,Dd),Oc.type=le,Oc.size=hd,Oc.buffer=kd,Oc.normalized=
Bd,Oc.offset=Dd,Oc.stride=ue;Oc.divisor!==vd&&(C.vertexAttribDivisorANGLE(me,vd),Oc.divisor=vd)}else if(Oc.buffer&&(Y.disableVertexAttribArray(me),Oc.buffer=null),Oc.x!==fe||Oc.y!==ve||Oc.z!==be||Oc.w!==ie)Y.vertexAttrib4f(me,fe,ve,be,ie),Oc.x=fe,Oc.y=ve,Oc.z=be,Oc.w=ie;Y.uniform1i(H.location,!1);Y.uniform1f(Da.location,t.pixelRatio);we=G.call(this,t,d,0);Y.uniform2f(la.location,we[0],we[1]);pe=d.scale;Y.uniform2f(za.location,pe[0],pe[1]);Kd=d.scaleFract;Y.uniform2f(ea.location,Kd[0],Kd[1]);Pd=d.translate;
Y.uniform2f(ja.location,Pd[0],Pd[1]);Rd=d.translateFract;Y.uniform2f(pa.location,Rd[0],Rd[1]);Y.uniform1f(W.location,d.opacity);Y.uniform1i(ta.location,x.bind());Sd=d.elements;ne=null;(ne=(Ae=L(Sd))?xa.createStream(Sd):xa.getElements(Sd))&&Y.bindBuffer(34963,ne.buffer.buffer);De=d.offset;if(re=d.count)Re=va.instances,0<Re?ne?C.drawElementsInstancedANGLE(0,re,ne.type,De<<(ne.type-5121>>1),Re):C.drawArraysInstancedANGLE(0,De,re,Re):0>Re&&(ne?Y.drawElements(0,re,ne.type,De<<(ne.type-5121>>1)):Y.drawArrays(0,
De,re)),aa.dirty=!0,ya.setVAO(null),t.viewportWidth=y,t.viewportHeight=Ha,sa&&(B.cpuTime+=performance.now()-S),I&&A.destroyStream(D),ra&&A.destroyStream(Ba),Db&&A.destroyStream(xb),Ma&&A.destroyStream(lb),$b&&A.destroyStream(Qa),rc&&A.destroyStream(Xb),Yb&&A.destroyStream(bc),ed&&A.destroyStream(yc),rd&&A.destroyStream(kd),x.unbind(),Ae&&xa.destroyStream(ne)},scope:function(a,c,b){var k,g,f,z,l,u,na,p,O,H,n,J,F,W,S,ea,x,ga,Y,Tb,v,M,Ra,G,K,Z,ya,da,R,za,qa,ta,ba,V,ja,ca,Ya,pa,ka,ma,Ea,la,oa,Aa,ua,Da,
Hb,Ba,Ia,Ga,zc,hb,fa,Sb,mb,Ta,Ca,qb,vc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Md,Sa,Kb,Eb,Na,xd,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,Qd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,Wd,Hc,qe,Nc,Yc,Be,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,ge,oe,yd,jd,ze,Od,ee,Gf,Yd,Id,Gd,nd,Vc,ud,rd,kd,vd,Bd,Dd,he,ke,ue,le,ie,fe,ve,be,me,Oc,hd,we,pe,Kd,Pd,Rd,Sd,ne,Ae,De,re,Re,Se,Ne,xe,Ge,Ie,Je,Ke,He,Ld,Vd,ae,ce,Le,Hd,Td,Ee,Me,cf,af,Te,Oe,$e,Xe,Ue,Ve,Ud,Zd,We,jf,nf,ff,kf,lf,mf,rf,
of,sf,Bf,Cf,Pe,Fe,pf,qf,Df,Hf,Af,Ef,Ff,wf,xf,vf,yf,zf,Jf,Kf,Lf,Mf,tf,Rf,If,uf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;k=a.viewport;g=k.x|0;f=k.y|0;z="width"in k?k.width|0:t.framebufferWidth-g;l="height"in k?k.height|0:t.framebufferHeight-f;u=t.viewportWidth;t.viewportWidth=z;na=t.viewportHeight;t.viewportHeight=l;p=Cd[0];Cd[0]=g;O=Cd[1];Cd[1]=f;H=Cd[2];Cd[2]=z;n=Cd[3];
Cd[3]=l;J=Fa[0];Fa[0]=0;F=Fa[1];Fa[1]=0;W=Fa[2];Fa[2]=0;S=Fa[3];Fa[3]=1;ea=wa.blend_enable;wa.blend_enable=!0;x=Ka[0];Ka[0]=770;ga=Ka[1];Ka[1]=771;Y=Ka[2];Ka[2]=773;Tb=Ka[3];Ka[3]=1;v=wa.depth_enable;wa.depth_enable=!1;M=a.viewport;Ra=M.x|0;G=M.y|0;K="width"in M?M.width|0:t.framebufferWidth-Ra;Z="height"in M?M.height|0:t.framebufferHeight-G;ya=Ed[0];Ed[0]=Ra;da=Ed[1];Ed[1]=G;R=Ed[2];Ed[2]=K;za=Ed[3];Ed[3]=Z;qa=wa.scissor_enable;wa.scissor_enable=!0;ta=wa.stencil_enable;wa.stencil_enable=!1;if(ba=
aa.profile)V=performance.now(),B.count++;ja=a.elements;ca=null;ca=(Ya=L(ja))?xa.createStream(ja):xa.getElements(ja);pa=va.elements;va.elements=ca;ka=a.offset;ma=va.offset;va.offset=ka;Ea=a.count;la=va.count;va.count=Ea;oa=va.primitive;va.primitive=0;Aa=sa[45];sa[45]=!1;ua=a.markerTexture;Da=sa[48];sa[48]=ua;Hb=a.opacity;Ba=sa[10];sa[10]=Hb;Ia=D.call(this,t,a,b);Ga=sa[46];sa[46]=Ia;zc=sa[47];sa[47]=ha;hb=t.pixelRatio;fa=sa[34];sa[34]=hb;Sb=a.scale;mb=sa[6];sa[6]=Sb;Ta=a.scaleFract;Ca=sa[7];sa[7]=Ta;
qb=a.translate;vc=sa[8];sa[8]=qb;jb=a.translateFract;rb=sa[9];sa[9]=jb;Ja=w.call(this,t,a,b);sb=!1;La=null;eb=0;gb=!1;lb=Ma=0;Wa=1;ub=0;tb=5126;Kb=Sa=Md=Pa=0;L(Ja)?(sb=!0,La=A.createStream(34962,Ja),tb=La.dtype):(La=A.getBuffer(Ja))?tb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Md=Ja.constant,Sa=Kb=Pa=0):(Md=0<Ja.constant.length?Ja.constant[0]:0,Sa=1<Ja.constant.length?Ja.constant[1]:0,Kb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:0)):(La=L(Ja.buffer)?
A.createStream(34962,Ja.buffer):A.getBuffer(Ja.buffer),tb="type"in Ja?de[Ja.type]:La.dtype,gb=!!Ja.normalized,lb=Ja.size|0,Ma=Ja.offset|0,ub=Ja.stride|0,eb=Ja.divisor|0);Eb=Q.buffer;Q.buffer=La;Na=Q.divisor;Q.divisor=eb;xd=Q.normalized;Q.normalized=gb;Za=Q.offset;Q.offset=Ma;Lb=Q.size;Q.size=lb;Mb=Q.state;Q.state=Wa;nb=Q.stride;Q.stride=ub;Oa=Q.type;Q.type=tb;$b=Q.w;Q.w=Pa;Qa=Q.x;Q.x=Md;vb=Q.y;Q.y=Sa;wb=Q.z;Q.z=Kb;Ua=q.call(this,t,a,b);ob=!1;ec=null;Ac=0;tc=!1;ic=bb=0;Qd=1;Xa=0;Mc=5126;rc=Wb=$a=Ab=
0;L(Ua)?(ob=!0,ec=A.createStream(34962,Ua),Mc=ec.dtype):(ec=A.getBuffer(Ua))?Mc=ec.dtype:"constant"in Ua?(Qd=2,"number"===typeof Ua.constant?($a=Ua.constant,Wb=rc=Ab=0):($a=0<Ua.constant.length?Ua.constant[0]:0,Wb=1<Ua.constant.length?Ua.constant[1]:0,rc=2<Ua.constant.length?Ua.constant[2]:0,Ab=3<Ua.constant.length?Ua.constant[3]:0)):(ec=L(Ua.buffer)?A.createStream(34962,Ua.buffer):A.getBuffer(Ua.buffer),Mc="type"in Ua?de[Ua.type]:ec.dtype,tc=!!Ua.normalized,ic=Ua.size|0,bb=Ua.offset|0,Xa=Ua.stride|
0,Ac=Ua.divisor|0);Xb=N.buffer;N.buffer=ec;Qb=N.divisor;N.divisor=Ac;Kc=N.normalized;N.normalized=tc;Rb=N.offset;N.offset=bb;Wd=N.size;N.size=ic;Hc=N.state;N.state=Qd;qe=N.stride;N.stride=Xa;Nc=N.type;N.type=Mc;Yc=N.w;N.w=Ab;Be=N.x;N.x=$a;mc=N.y;N.y=Wb;uc=N.z;N.z=rc;fc=ia.call(this,t,a,b);db=!1;qc=null;Ub=0;Yb=!1;gc=bc=0;xc=1;Bc=0;cd=5126;Zc=Uc=Sc=Rc=0;L(fc)?(db=!0,qc=A.createStream(34962,fc),cd=qc.dtype):(qc=A.getBuffer(fc))?cd=qc.dtype:"constant"in fc?(xc=2,"number"===typeof fc.constant?(Sc=fc.constant,
Uc=Zc=Rc=0):(Sc=0<fc.constant.length?fc.constant[0]:0,Uc=1<fc.constant.length?fc.constant[1]:0,Zc=2<fc.constant.length?fc.constant[2]:0,Rc=3<fc.constant.length?fc.constant[3]:0)):(qc=L(fc.buffer)?A.createStream(34962,fc.buffer):A.getBuffer(fc.buffer),cd="type"in fc?de[fc.type]:qc.dtype,Yb=!!fc.normalized,gc=fc.size|0,bc=fc.offset|0,Bc=fc.stride|0,Ub=fc.divisor|0);ld=e.buffer;e.buffer=qc;dd=e.divisor;e.divisor=Ub;$c=e.normalized;e.normalized=Yb;jc=e.offset;e.offset=bc;ac=e.size;e.size=gc;ad=e.state;
e.state=xc;Wc=e.stride;e.stride=Bc;ed=e.type;e.type=cd;yc=e.w;e.w=Rc;id=e.x;e.x=Sc;ge=e.y;e.y=Uc;oe=e.z;e.z=Zc;yd=r.call(this,t,a,b);jd=!1;ze=null;Od=0;ee=!1;Yd=Gf=0;Id=1;Gd=0;nd=5126;kd=rd=ud=Vc=0;L(yd)?(jd=!0,ze=A.createStream(34962,yd),nd=ze.dtype):(ze=A.getBuffer(yd))?nd=ze.dtype:"constant"in yd?(Id=2,"number"===typeof yd.constant?(ud=yd.constant,rd=kd=Vc=0):(ud=0<yd.constant.length?yd.constant[0]:0,rd=1<yd.constant.length?yd.constant[1]:0,kd=2<yd.constant.length?yd.constant[2]:0,Vc=3<yd.constant.length?
yd.constant[3]:0)):(ze=L(yd.buffer)?A.createStream(34962,yd.buffer):A.getBuffer(yd.buffer),nd="type"in yd?de[yd.type]:ze.dtype,ee=!!yd.normalized,Yd=yd.size|0,Gf=yd.offset|0,Gd=yd.stride|0,Od=yd.divisor|0);vd=T.buffer;T.buffer=ze;Bd=T.divisor;T.divisor=Od;Dd=T.normalized;T.normalized=ee;he=T.offset;T.offset=Gf;ke=T.size;T.size=Yd;ue=T.state;T.state=Id;le=T.stride;T.stride=Gd;ie=T.type;T.type=nd;fe=T.w;T.w=Vc;ve=T.x;T.x=ud;be=T.y;T.y=rd;me=T.z;T.z=kd;Oc=m.call(this,t,a,b);hd=!1;we=null;pe=0;Kd=!1;
Rd=Pd=0;Sd=1;ne=0;Ae=5126;Se=Re=re=De=0;L(Oc)?(hd=!0,we=A.createStream(34962,Oc),Ae=we.dtype):(we=A.getBuffer(Oc))?Ae=we.dtype:"constant"in Oc?(Sd=2,"number"===typeof Oc.constant?(re=Oc.constant,Re=Se=De=0):(re=0<Oc.constant.length?Oc.constant[0]:0,Re=1<Oc.constant.length?Oc.constant[1]:0,Se=2<Oc.constant.length?Oc.constant[2]:0,De=3<Oc.constant.length?Oc.constant[3]:0)):(we=L(Oc.buffer)?A.createStream(34962,Oc.buffer):A.getBuffer(Oc.buffer),Ae="type"in Oc?de[Oc.type]:we.dtype,Kd=!!Oc.normalized,
Rd=Oc.size|0,Pd=Oc.offset|0,ne=Oc.stride|0,pe=Oc.divisor|0);Ne=X.buffer;X.buffer=we;xe=X.divisor;X.divisor=pe;Ge=X.normalized;X.normalized=Kd;Ie=X.offset;X.offset=Pd;Je=X.size;X.size=Rd;Ke=X.state;X.state=Sd;He=X.stride;X.stride=ne;Ld=X.type;X.type=Ae;Vd=X.w;X.w=De;ae=X.x;X.x=re;ce=X.y;X.y=Re;Le=X.z;X.z=Se;Hd=E.call(this,t,a,b);Td=!1;Ee=null;Me=0;cf=!1;Te=af=0;Oe=1;$e=0;Xe=5126;Zd=Ud=Ve=Ue=0;L(Hd)?(Td=!0,Ee=A.createStream(34962,Hd),Xe=Ee.dtype):(Ee=A.getBuffer(Hd))?Xe=Ee.dtype:"constant"in Hd?(Oe=
2,"number"===typeof Hd.constant?(Ve=Hd.constant,Ud=Zd=Ue=0):(Ve=0<Hd.constant.length?Hd.constant[0]:0,Ud=1<Hd.constant.length?Hd.constant[1]:0,Zd=2<Hd.constant.length?Hd.constant[2]:0,Ue=3<Hd.constant.length?Hd.constant[3]:0)):(Ee=L(Hd.buffer)?A.createStream(34962,Hd.buffer):A.getBuffer(Hd.buffer),Xe="type"in Hd?de[Hd.type]:Ee.dtype,cf=!!Hd.normalized,Te=Hd.size|0,af=Hd.offset|0,$e=Hd.stride|0,Me=Hd.divisor|0);We=y.buffer;y.buffer=Ee;jf=y.divisor;y.divisor=Me;nf=y.normalized;y.normalized=cf;ff=y.offset;
y.offset=af;kf=y.size;y.size=Te;lf=y.state;y.state=Oe;mf=y.stride;y.stride=$e;rf=y.type;y.type=Xe;of=y.w;y.w=Ue;sf=y.x;y.x=Ve;Bf=y.y;y.y=Ud;Cf=y.z;y.z=Zd;Pe=P.call(this,t,a,b);Fe=!1;pf=null;qf=0;Df=!1;Af=Hf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;L(Pe)?(Fe=!0,pf=A.createStream(34962,Pe),wf=pf.dtype):(pf=A.getBuffer(Pe))?wf=pf.dtype:"constant"in Pe?(Ef=2,"number"===typeof Pe.constant?(vf=Pe.constant,yf=zf=xf=0):(vf=0<Pe.constant.length?Pe.constant[0]:0,yf=1<Pe.constant.length?Pe.constant[1]:0,zf=2<Pe.constant.length?
Pe.constant[2]:0,xf=3<Pe.constant.length?Pe.constant[3]:0)):(pf=L(Pe.buffer)?A.createStream(34962,Pe.buffer):A.getBuffer(Pe.buffer),wf="type"in Pe?de[Pe.type]:pf.dtype,Df=!!Pe.normalized,Af=Pe.size|0,Hf=Pe.offset|0,Ff=Pe.stride|0,qf=Pe.divisor|0);Jf=I.buffer;I.buffer=pf;Kf=I.divisor;I.divisor=qf;Lf=I.normalized;I.normalized=Df;Mf=I.offset;I.offset=Hf;tf=I.size;I.size=Af;Rf=I.state;I.state=Ef;If=I.stride;I.stride=Ff;uf=I.type;I.type=wf;dg=I.w;I.w=xf;Sf=I.x;I.x=vf;Tf=I.y;I.y=yf;qg=I.z;I.z=zf;gf=C.call(this,
t,a,b);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;L(gf)?(df=!0,Nf=A.createStream(34962,gf),Wf=Nf.dtype):(Nf=A.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=L(gf.buffer)?A.createStream(34962,gf.buffer):A.getBuffer(gf.buffer),Wf="type"in gf?de[gf.type]:
Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|0,ig=gf.stride|0,Of=gf.divisor|0);jg=h.buffer;h.buffer=Nf;rg=h.divisor;h.divisor=Of;sg=h.normalized;h.normalized=eg;tg=h.offset;h.offset=fg;ug=h.size;h.size=gg;vg=h.state;h.state=hg;wg=h.stride;h.stride=ig;xg=h.type;h.type=Wf;yg=h.w;h.w=Uf;zg=h.x;h.x=Xf;Ag=h.y;h.y=Yf;Bg=h.z;h.z=Zf;hf=U.call(this,t,a,b);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;L(hf)?(ef=!0,Pf=A.createStream(34962,hf),$f=Pf.dtype):(Pf=A.getBuffer(hf))?$f=
Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=L(hf.buffer)?A.createStream(34962,hf.buffer):A.getBuffer(hf.buffer),$f="type"in hf?de[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=d.buffer;d.buffer=Pf;Cg=d.divisor;d.divisor=Qf;Dg=d.normalized;
d.normalized=kg;Eg=d.offset;d.offset=lg;Fg=d.size;d.size=mg;Gg=d.state;d.state=ng;Hg=d.stride;d.stride=og;Ig=d.type;d.type=$f;Jg=d.w;d.w=Vf;Kg=d.x;d.x=ag;Lg=d.y;d.y=bg;Mg=d.z;d.z=cg;Ng=Ha.vert;Ha.vert=59;Og=Ha.frag;Ha.frag=58;aa.dirty=!0;c(t,a,b);t.viewportWidth=u;t.viewportHeight=na;Cd[0]=p;Cd[1]=O;Cd[2]=H;Cd[3]=n;Fa[0]=J;Fa[1]=F;Fa[2]=W;Fa[3]=S;wa.blend_enable=ea;Ka[0]=x;Ka[1]=ga;Ka[2]=Y;Ka[3]=Tb;wa.depth_enable=v;Ed[0]=ya;Ed[1]=da;Ed[2]=R;Ed[3]=za;wa.scissor_enable=qa;wa.stencil_enable=ta;ba&&
(B.cpuTime+=performance.now()-V);Ya&&xa.destroyStream(ca);va.elements=pa;va.offset=ma;va.count=la;va.primitive=oa;sa[45]=Aa;sa[48]=Da;sa[10]=Ba;sa[46]=Ga;sa[47]=zc;sa[34]=fa;sa[6]=mb;sa[7]=Ca;sa[8]=vc;sa[9]=rb;sb&&A.destroyStream(La);Q.buffer=Eb;Q.divisor=Na;Q.normalized=xd;Q.offset=Za;Q.size=Lb;Q.state=Mb;Q.stride=nb;Q.type=Oa;Q.w=$b;Q.x=Qa;Q.y=vb;Q.z=wb;ob&&A.destroyStream(ec);N.buffer=Xb;N.divisor=Qb;N.normalized=Kc;N.offset=Rb;N.size=Wd;N.state=Hc;N.stride=qe;N.type=Nc;N.w=Yc;N.x=Be;N.y=mc;N.z=
uc;db&&A.destroyStream(qc);e.buffer=ld;e.divisor=dd;e.normalized=$c;e.offset=jc;e.size=ac;e.state=ad;e.stride=Wc;e.type=ed;e.w=yc;e.x=id;e.y=ge;e.z=oe;jd&&A.destroyStream(ze);T.buffer=vd;T.divisor=Bd;T.normalized=Dd;T.offset=he;T.size=ke;T.state=ue;T.stride=le;T.type=ie;T.w=fe;T.x=ve;T.y=be;T.z=me;hd&&A.destroyStream(we);X.buffer=Ne;X.divisor=xe;X.normalized=Ge;X.offset=Ie;X.size=Je;X.state=Ke;X.stride=He;X.type=Ld;X.w=Vd;X.x=ae;X.y=ce;X.z=Le;Td&&A.destroyStream(Ee);y.buffer=We;y.divisor=jf;y.normalized=
nf;y.offset=ff;y.size=kf;y.state=lf;y.stride=mf;y.type=rf;y.w=of;y.x=sf;y.y=Bf;y.z=Cf;Fe&&A.destroyStream(pf);I.buffer=Jf;I.divisor=Kf;I.normalized=Lf;I.offset=Mf;I.size=tf;I.state=Rf;I.stride=If;I.type=uf;I.w=dg;I.x=Sf;I.y=Tf;I.z=qg;df&&A.destroyStream(Nf);h.buffer=jg;h.divisor=rg;h.normalized=sg;h.offset=tg;h.size=ug;h.state=vg;h.stride=wg;h.type=xg;h.w=yg;h.x=zg;h.y=Ag;h.z=Bg;ef&&A.destroyStream(Pf);d.buffer=pg;d.divisor=Cg;d.normalized=Dg;d.offset=Eg;d.size=Fg;d.state=Gg;d.stride=Hg;d.type=Ig;
d.w=Jg;d.x=Kg;d.y=Lg;d.z=Mg;Ha.vert=Ng;Ha.frag=Og;aa.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,P,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,Ba,V,ca){var S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa,ga,Z;S=b.attributes;O=b.buffer;J=b.context;u=b.current;K=b.draw;M=b.elements;qa=b.extensions;
oa=b.framebuffer;z=b.gl;H=b.isBufferArgs;da=b.next;W=b.shader;la=b.uniforms;ta=b.vao;Da=da.blend_color;za=u.blend_color;ea=da.blend_equation;Ea=u.blend_equation;ja=da.blend_func;pa=u.blend_func;Aa=da.colorMask;Ra=u.colorMask;na=da.depth_range;Tb=u.depth_range;Ya=da.polygonOffset_offset;A=u.polygonOffset_offset;t=da.sample_coverage;aa=u.sample_coverage;va=da.scissor_box;xa=u.scissor_box;zc=da.stencil_func;Hb=u.stencil_func;Y=da.stencil_opBack;L=u.stencil_opBack;wa=da.stencil_opFront;Ha=u.stencil_opFront;
sa=da.viewport;ya=u.viewport;Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ga={offset:4,stride:8};Z={offset:0,stride:8};return{batch:function(a,c){var b,k,g,f,l,p,w,n,W,sa,x,D,v;b=oa.next;b!==oa.cur&&(b?z.bindFramebuffer(36160,b.framebuffer):z.bindFramebuffer(36160,null),oa.cur=b);if(u.dirty){var G,R,ja,ha,la,Da,fa,Ca,Ze,Ye,Qe,Fd,Ce,se,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc;G=da.dither;G!==u.dither&&(G?z.enable(3024):
z.disable(3024),u.dither=G);R=ea[0];ja=ea[1];if(R!==Ea[0]||ja!==Ea[1])z.blendEquationSeparate(R,ja),Ea[0]=R,Ea[1]=ja;ha=da.depth_func;ha!==u.depth_func&&(z.depthFunc(ha),u.depth_func=ha);la=na[0];Da=na[1];if(la!==Tb[0]||Da!==Tb[1])z.depthRange(la,Da),Tb[0]=la,Tb[1]=Da;fa=da.depth_mask;fa!==u.depth_mask&&(z.depthMask(fa),u.depth_mask=fa);Ca=Aa[0];Ze=Aa[1];Ye=Aa[2];Qe=Aa[3];if(Ca!==Ra[0]||Ze!==Ra[1]||Ye!==Ra[2]||Qe!==Ra[3])z.colorMask(Ca,Ze,Ye,Qe),Ra[0]=Ca,Ra[1]=Ze,Ra[2]=Ye,Ra[3]=Qe;Fd=da.cull_enable;
Fd!==u.cull_enable&&(Fd?z.enable(2884):z.disable(2884),u.cull_enable=Fd);Ce=da.cull_face;Ce!==u.cull_face&&(z.cullFace(Ce),u.cull_face=Ce);se=da.frontFace;se!==u.frontFace&&(z.frontFace(se),u.frontFace=se);Xd=da.lineWidth;Xd!==u.lineWidth&&(z.lineWidth(Xd),u.lineWidth=Xd);Nd=da.polygonOffset_enable;Nd!==u.polygonOffset_enable&&(Nd?z.enable(32823):z.disable(32823),u.polygonOffset_enable=Nd);zd=Ya[0];md=Ya[1];if(zd!==A[0]||md!==A[1])z.polygonOffset(zd,md),A[0]=zd,A[1]=md;bd=da.sample_alpha;bd!==u.sample_alpha&&
(bd?z.enable(32926):z.disable(32926),u.sample_alpha=bd);pd=da.sample_enable;pd!==u.sample_enable&&(pd?z.enable(32928):z.disable(32928),u.sample_enable=pd);Lc=t[0];od=t[1];if(Lc!==aa[0]||od!==aa[1])z.sampleCoverage(Lc,od),aa[0]=Lc,aa[1]=od;Ec=da.stencil_mask;Ec!==u.stencil_mask&&(z.stencilMask(Ec),u.stencil_mask=Ec);fd=zc[0];Pc=zc[1];Ic=zc[2];if(fd!==Hb[0]||Pc!==Hb[1]||Ic!==Hb[2])z.stencilFunc(fd,Pc,Ic),Hb[0]=fd,Hb[1]=Pc,Hb[2]=Ic;Bb=wa[0];Fb=wa[1];sc=wa[2];yb=wa[3];if(Bb!==Ha[0]||Fb!==Ha[1]||sc!==
Ha[2]||yb!==Ha[3])z.stencilOpSeparate(Bb,Fb,sc,yb),Ha[0]=Bb,Ha[1]=Fb,Ha[2]=sc,Ha[3]=yb;wc=Y[0];Cb=Y[1];Jc=Y[2];kc=Y[3];if(wc!==L[0]||Cb!==L[1]||Jc!==L[2]||kc!==L[3])z.stencilOpSeparate(wc,Cb,Jc,kc),L[0]=wc,L[1]=Cb,L[2]=Jc,L[3]=kc;Fc=da.scissor_enable;Fc!==u.scissor_enable&&(Fc?z.enable(3089):z.disable(3089),u.scissor_enable=Fc);gd=va[0];Xc=va[1];Dc=va[2];cc=va[3];if(gd!==xa[0]||Xc!==xa[1]||Dc!==xa[2]||cc!==xa[3])z.scissor(gd,Xc,Dc,cc),xa[0]=gd,xa[1]=Xc,xa[2]=Dc,xa[3]=cc}k=this.viewport;g=k.x|0;f=
k.y|0;l="width"in k?k.width|0:J.framebufferWidth-g;p="height"in k?k.height|0:J.framebufferHeight-f;w=J.viewportWidth;J.viewportWidth=l;n=J.viewportHeight;J.viewportHeight=p;z.viewport(g,f,l,p);ya[0]=g;ya[1]=f;ya[2]=l;ya[3]=p;z.blendColor(0,0,0,1);za[0]=0;za[1]=0;za[2]=0;za[3]=1;z.enable(3042);u.blend_enable=!0;z.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;z.disable(2929);u.depth_enable=!1;z.disable(2960);u.stencil_enable=!1;if(W=u.profile)sa=performance.now(),B.count+=c;
z.useProgram(Q.program);x=qa.angle_instanced_arrays;var Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb;ta.setVAO(null);Z.buffer=this.sizeBuffer;Gc=!1;nc=null;oc=0;lc=!1;fb=dc=0;Tc=1;zb=0;cb=5126;Va=pb=ab=Nb=0;H(Z)?(Gc=!0,nc=O.createStream(34962,Z),cb=nc.dtype):(nc=O.getBuffer(Z))?cb=nc.dtype:"constant"in Z?(Tc=2,"number"===typeof Z.constant?
(ab=Z.constant,pb=Va=Nb=0):(ab=0<Z.constant.length?Z.constant[0]:0,pb=1<Z.constant.length?Z.constant[1]:0,Va=2<Z.constant.length?Z.constant[2]:0,Nb=3<Z.constant.length?Z.constant[3]:0)):(nc=H(Z.buffer)?O.createStream(34962,Z.buffer):O.getBuffer(Z.buffer),cb="type"in Z?Fa[Z.type]:nc.dtype,lc=!!Z.normalized,fb=Z.size|0,dc=Z.offset|0,zb=Z.stride|0,oc=Z.divisor|0);qd=ca.location;Ib=S[qd];if(1===Tc){Ib.buffer||z.enableVertexAttribArray(qd);Jb=fb||1;if(Ib.type!==cb||Ib.size!==Jb||Ib.buffer!==nc||Ib.normalized!==
lc||Ib.offset!==dc||Ib.stride!==zb)z.bindBuffer(34962,nc.buffer),z.vertexAttribPointer(qd,Jb,cb,lc,zb,dc),Ib.type=cb,Ib.size=Jb,Ib.buffer=nc,Ib.normalized=lc,Ib.offset=dc,Ib.stride=zb;Ib.divisor!==oc&&(x.vertexAttribDivisorANGLE(qd,oc),Ib.divisor=oc)}else if(Ib.buffer&&(z.disableVertexAttribArray(qd),Ib.buffer=null),Ib.x!==ab||Ib.y!==pb||Ib.z!==Va||Ib.w!==Nb)z.vertexAttrib4f(qd,ab,pb,Va,Nb),Ib.x=ab,Ib.y=pb,Ib.z=Va,Ib.w=Nb;ga.buffer=this.sizeBuffer;pc=!1;Ob=null;kb=0;Gb=!1;xb=Db=0;ib=1;Zb=0;Pb=5126;
qb=Vb=Ta=mb=0;H(ga)?(pc=!0,Ob=O.createStream(34962,ga),Pb=Ob.dtype):(Ob=O.getBuffer(ga))?Pb=Ob.dtype:"constant"in ga?(ib=2,"number"===typeof ga.constant?(Ta=ga.constant,Vb=qb=mb=0):(Ta=0<ga.constant.length?ga.constant[0]:0,Vb=1<ga.constant.length?ga.constant[1]:0,qb=2<ga.constant.length?ga.constant[2]:0,mb=3<ga.constant.length?ga.constant[3]:0)):(Ob=H(ga.buffer)?O.createStream(34962,ga.buffer):O.getBuffer(ga.buffer),Pb="type"in ga?Fa[ga.type]:Ob.dtype,Gb=!!ga.normalized,xb=ga.size|0,Db=ga.offset|
0,Zb=ga.stride|0,kb=ga.divisor|0);hc=I.location;jb=S[hc];if(1===ib){jb.buffer||z.enableVertexAttribArray(hc);rb=xb||1;if(jb.type!==Pb||jb.size!==rb||jb.buffer!==Ob||jb.normalized!==Gb||jb.offset!==Db||jb.stride!==Zb)z.bindBuffer(34962,Ob.buffer),z.vertexAttribPointer(hc,rb,Pb,Gb,Zb,Db),jb.type=Pb,jb.size=rb,jb.buffer=Ob,jb.normalized=Gb,jb.offset=Db,jb.stride=Zb;jb.divisor!==kb&&(x.vertexAttribDivisorANGLE(hc,kb),jb.divisor=kb)}else if(jb.buffer&&(z.disableVertexAttribArray(hc),jb.buffer=null),jb.x!==
Ta||jb.y!==Vb||jb.z!==qb||jb.w!==mb)z.vertexAttrib4f(hc,Ta,Vb,qb,mb),jb.x=Ta,jb.y=Vb,jb.z=qb,jb.w=mb;Ja=this.charBuffer;sb=!1;La=null;eb=0;gb=!1;lb=Ma=0;Wa=1;ub=0;tb=5126;Kb=Sa=Cc=Pa=0;H(Ja)?(sb=!0,La=O.createStream(34962,Ja),tb=La.dtype):(La=O.getBuffer(Ja))?tb=La.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Cc=Ja.constant,Sa=Kb=Pa=0):(Cc=0<Ja.constant.length?Ja.constant[0]:0,Sa=1<Ja.constant.length?Ja.constant[1]:0,Kb=2<Ja.constant.length?Ja.constant[2]:0,Pa=3<Ja.constant.length?Ja.constant[3]:
0)):(La=H(Ja.buffer)?O.createStream(34962,Ja.buffer):O.getBuffer(Ja.buffer),tb="type"in Ja?Fa[Ja.type]:La.dtype,gb=!!Ja.normalized,lb=Ja.size|0,Ma=Ja.offset|0,ub=Ja.stride|0,eb=Ja.divisor|0);Eb=ra.location;Na=S[Eb];if(1===Wa){Na.buffer||z.enableVertexAttribArray(Eb);Qc=lb||1;if(Na.type!==tb||Na.size!==Qc||Na.buffer!==La||Na.normalized!==gb||Na.offset!==Ma||Na.stride!==ub)z.bindBuffer(34962,La.buffer),z.vertexAttribPointer(Eb,Qc,tb,gb,ub,Ma),Na.type=tb,Na.size=Qc,Na.buffer=La,Na.normalized=gb,Na.offset=
Ma,Na.stride=ub;Na.divisor!==eb&&(x.vertexAttribDivisorANGLE(Eb,eb),Na.divisor=eb)}else if(Na.buffer&&(z.disableVertexAttribArray(Eb),Na.buffer=null),Na.x!==Cc||Na.y!==Sa||Na.z!==Kb||Na.w!==Pa)z.vertexAttrib4f(Eb,Cc,Sa,Kb,Pa),Na.x=Cc,Na.y=Sa,Na.z=Kb,Na.w=Pa;Za=this.position;Lb=!1;Mb=null;nb=0;Oa=!1;Qa=$b=0;vb=1;wb=0;Ua=5126;tc=Ac=ec=ob=0;H(Za)?(Lb=!0,Mb=O.createStream(34962,Za),Ua=Mb.dtype):(Mb=O.getBuffer(Za))?Ua=Mb.dtype:"constant"in Za?(vb=2,"number"===typeof Za.constant?(ec=Za.constant,Ac=tc=
ob=0):(ec=0<Za.constant.length?Za.constant[0]:0,Ac=1<Za.constant.length?Za.constant[1]:0,tc=2<Za.constant.length?Za.constant[2]:0,ob=3<Za.constant.length?Za.constant[3]:0)):(Mb=H(Za.buffer)?O.createStream(34962,Za.buffer):O.getBuffer(Za.buffer),Ua="type"in Za?Fa[Za.type]:Mb.dtype,Oa=!!Za.normalized,Qa=Za.size|0,$b=Za.offset|0,wb=Za.stride|0,nb=Za.divisor|0);bb=ka.location;ic=S[bb];if(1===vb){ic.buffer||z.enableVertexAttribArray(bb);wd=Qa||2;if(ic.type!==Ua||ic.size!==wd||ic.buffer!==Mb||ic.normalized!==
Oa||ic.offset!==$b||ic.stride!==wb)z.bindBuffer(34962,Mb.buffer),z.vertexAttribPointer(bb,wd,Ua,Oa,wb,$b),ic.type=Ua,ic.size=wd,ic.buffer=Mb,ic.normalized=Oa,ic.offset=$b,ic.stride=wb;ic.divisor!==nb&&(x.vertexAttribDivisorANGLE(bb,nb),ic.divisor=nb)}else if(ic.buffer&&(z.disableVertexAttribArray(bb),ic.buffer=null),ic.x!==ec||ic.y!==Ac||ic.z!==tc||ic.w!==ob)z.vertexAttrib4f(bb,ec,Ac,tc,ob),ic.x=ec,ic.y=Ac,ic.z=tc,ic.w=ob;Xa=this.viewportArray;z.uniform4f(V.location,Xa[0],Xa[1],Xa[2],Xa[3]);Mc=this.scale;
z.uniform2f(ma.location,Mc[0],Mc[1]);Ab=this.translate;z.uniform2f(Ba.location,Ab[0],Ab[1]);($a=K.elements)?z.bindBuffer(34963,$a.buffer.buffer):ta.currentVAO&&($a=M.getElements(ta.currentVAO.elements))&&z.bindBuffer(34963,$a.buffer.buffer);Wb=K.instances;for(D=0;D<c;++D){v=a[D];var rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id,td;rc=q.call(this,J,v,D);D&&Xb===rc||(Xb=rc,z.uniform1f(C.location,rc));Qb=N.call(this,J,v,D);D&&Kc===Qb||
(Kc=Qb,z.uniform1f(U.location,Qb));Rb=v.align;D&&je===Rb||(je=Rb,z.uniform1f(T.location,Rb));Hc=v.baseline;D&&sd===Hc||(sd=Hc,z.uniform1f(y.location,Hc));Nc=v.color;Yc=Nc[0];mc=Nc[1];fc=Nc[2];qc=Nc[3];D&&Jd===Yc&&uc===mc&&db===fc&&Ub===qc||(Jd=Yc,uc=mc,db=fc,Ub=qc,z.uniform4f(h.location,Yc,mc,fc,qc));Yb=P.call(this,J,v,D);bc=Yb[0];xc=Yb[1];D&&gc===bc&&Bc===xc||(gc=bc,Bc=xc,z.uniform2f(E.location,bc,xc));cd=e.call(this,J,v,D);Rc=cd[0];Uc=cd[1];D&&Sc===Rc&&Zc===Uc||(Sc=Rc,Zc=Uc,z.uniform2f(X.location,
Rc,Uc));ld=v.positionOffset;dd=ld[0];jc=ld[1];D&&$c===dd&&ac===jc||($c=dd,ac=jc,z.uniform2f(F.location,dd,jc));ad=v.opacity;D&&Wc===ad||(Wc=ad,z.uniform1f(d.location,ad));(ed=r.call(this,J,v,D))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);yc=ed._texture;z.uniform1i(m.location,yc.bind());id=v.offset;if(td=v.count)0<Wb?$a?x.drawElementsInstancedANGLE(0,td,$a.type,id<<($a.type-5121>>1),Wb):x.drawArraysInstancedANGLE(0,id,td,Wb):0>Wb&&($a?z.drawElements(0,td,$a.type,id<<($a.type-5121>>1)):z.drawArrays(0,
id,td)),yc.unbind()}Gc&&O.destroyStream(nc);pc&&O.destroyStream(Ob);sb&&O.destroyStream(La);Lb&&O.destroyStream(Mb);u.dirty=!0;ta.setVAO(null);J.viewportWidth=w;J.viewportHeight=n;W&&(B.cpuTime+=performance.now()-sa)},draw:function(b){var e,r,p,w,n,W,sa,q,x,D,v,G,R,N,Q,ja,ha,P,ia,la,Da,fa,Ca,Ye,Qe,Fd,Ce,se,Xd,Nd,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb;e=
oa.next;e!==oa.cur&&(e?z.bindFramebuffer(36160,e.framebuffer):z.bindFramebuffer(36160,null),oa.cur=e);if(u.dirty){var Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc;Wa=da.dither;Wa!==u.dither&&(Wa?z.enable(3024):z.disable(3024),u.dither=Wa);ub=ea[0];tb=ea[1];if(ub!==Ea[0]||tb!==Ea[1])z.blendEquationSeparate(ub,tb),Ea[0]=ub,Ea[1]=tb;Pa=da.depth_func;Pa!==u.depth_func&&(z.depthFunc(Pa),u.depth_func=Pa);Cc=na[0];Sa=na[1];if(Cc!==Tb[0]||
Sa!==Tb[1])z.depthRange(Cc,Sa),Tb[0]=Cc,Tb[1]=Sa;Kb=da.depth_mask;Kb!==u.depth_mask&&(z.depthMask(Kb),u.depth_mask=Kb);Eb=Aa[0];Na=Aa[1];Qc=Aa[2];Za=Aa[3];if(Eb!==Ra[0]||Na!==Ra[1]||Qc!==Ra[2]||Za!==Ra[3])z.colorMask(Eb,Na,Qc,Za),Ra[0]=Eb,Ra[1]=Na,Ra[2]=Qc,Ra[3]=Za;Lb=da.cull_enable;Lb!==u.cull_enable&&(Lb?z.enable(2884):z.disable(2884),u.cull_enable=Lb);Mb=da.cull_face;Mb!==u.cull_face&&(z.cullFace(Mb),u.cull_face=Mb);nb=da.frontFace;nb!==u.frontFace&&(z.frontFace(nb),u.frontFace=nb);Oa=da.lineWidth;
Oa!==u.lineWidth&&(z.lineWidth(Oa),u.lineWidth=Oa);$b=da.polygonOffset_enable;$b!==u.polygonOffset_enable&&($b?z.enable(32823):z.disable(32823),u.polygonOffset_enable=$b);Qa=Ya[0];vb=Ya[1];if(Qa!==A[0]||vb!==A[1])z.polygonOffset(Qa,vb),A[0]=Qa,A[1]=vb;wb=da.sample_alpha;wb!==u.sample_alpha&&(wb?z.enable(32926):z.disable(32926),u.sample_alpha=wb);Ua=da.sample_enable;Ua!==u.sample_enable&&(Ua?z.enable(32928):z.disable(32928),u.sample_enable=Ua);ob=t[0];ec=t[1];if(ob!==aa[0]||ec!==aa[1])z.sampleCoverage(ob,
ec),aa[0]=ob,aa[1]=ec;Ac=da.stencil_mask;Ac!==u.stencil_mask&&(z.stencilMask(Ac),u.stencil_mask=Ac);tc=zc[0];bb=zc[1];ic=zc[2];if(tc!==Hb[0]||bb!==Hb[1]||ic!==Hb[2])z.stencilFunc(tc,bb,ic),Hb[0]=tc,Hb[1]=bb,Hb[2]=ic;wd=wa[0];Xa=wa[1];Mc=wa[2];Ab=wa[3];if(wd!==Ha[0]||Xa!==Ha[1]||Mc!==Ha[2]||Ab!==Ha[3])z.stencilOpSeparate(wd,Xa,Mc,Ab),Ha[0]=wd,Ha[1]=Xa,Ha[2]=Mc,Ha[3]=Ab;$a=Y[0];Wb=Y[1];rc=Y[2];Xb=Y[3];if($a!==L[0]||Wb!==L[1]||rc!==L[2]||Xb!==L[3])z.stencilOpSeparate($a,Wb,rc,Xb),L[0]=$a,L[1]=Wb,L[2]=
rc,L[3]=Xb;Qb=da.scissor_enable;Qb!==u.scissor_enable&&(Qb?z.enable(3089):z.disable(3089),u.scissor_enable=Qb);Kc=va[0];Rb=va[1];je=va[2];Hc=va[3];if(Kc!==xa[0]||Rb!==xa[1]||je!==xa[2]||Hc!==xa[3])z.scissor(Kc,Rb,je,Hc),xa[0]=Kc,xa[1]=Rb,xa[2]=je,xa[3]=Hc}r=this.viewport;p=r.x|0;w=r.y|0;n="width"in r?r.width|0:J.framebufferWidth-p;W="height"in r?r.height|0:J.framebufferHeight-w;sa=J.viewportWidth;J.viewportWidth=n;q=J.viewportHeight;J.viewportHeight=W;z.viewport(p,w,n,W);ya[0]=p;ya[1]=w;ya[2]=n;ya[3]=
W;z.blendColor(0,0,0,1);za[0]=0;za[1]=0;za[2]=0;za[3]=1;z.enable(3042);u.blend_enable=!0;z.blendFuncSeparate(770,771,773,1);pa[0]=770;pa[1]=771;pa[2]=773;pa[3]=1;z.disable(2929);u.depth_enable=!1;z.disable(2960);u.stencil_enable=!1;if(x=u.profile)D=performance.now(),B.count++;z.useProgram(k.program);v=qa.angle_instanced_arrays;ta.setVAO(null);Z.buffer=this.sizeBuffer;G=!1;R=null;N=0;Q=!1;ha=ja=0;P=1;ia=0;la=5126;Ye=Ca=fa=Da=0;H(Z)?(G=!0,R=O.createStream(34962,Z),la=R.dtype):(R=O.getBuffer(Z))?la=
R.dtype:"constant"in Z?(P=2,"number"===typeof Z.constant?(fa=Z.constant,Ca=Ye=Da=0):(fa=0<Z.constant.length?Z.constant[0]:0,Ca=1<Z.constant.length?Z.constant[1]:0,Ye=2<Z.constant.length?Z.constant[2]:0,Da=3<Z.constant.length?Z.constant[3]:0)):(R=H(Z.buffer)?O.createStream(34962,Z.buffer):O.getBuffer(Z.buffer),la="type"in Z?Fa[Z.type]:R.dtype,Q=!!Z.normalized,ha=Z.size|0,ja=Z.offset|0,ia=Z.stride|0,N=Z.divisor|0);Qe=ca.location;Fd=S[Qe];if(1===P){Fd.buffer||z.enableVertexAttribArray(Qe);Ce=ha||1;if(Fd.type!==
la||Fd.size!==Ce||Fd.buffer!==R||Fd.normalized!==Q||Fd.offset!==ja||Fd.stride!==ia)z.bindBuffer(34962,R.buffer),z.vertexAttribPointer(Qe,Ce,la,Q,ia,ja),Fd.type=la,Fd.size=Ce,Fd.buffer=R,Fd.normalized=Q,Fd.offset=ja,Fd.stride=ia;Fd.divisor!==N&&(v.vertexAttribDivisorANGLE(Qe,N),Fd.divisor=N)}else if(Fd.buffer&&(z.disableVertexAttribArray(Qe),Fd.buffer=null),Fd.x!==fa||Fd.y!==Ca||Fd.z!==Ye||Fd.w!==Da)z.vertexAttrib4f(Qe,fa,Ca,Ye,Da),Fd.x=fa,Fd.y=Ca,Fd.z=Ye,Fd.w=Da;ga.buffer=this.sizeBuffer;se=!1;Xd=
null;Nd=0;zd=!1;bd=md=0;pd=1;Lc=0;od=5126;Ic=Pc=fd=Ec=0;H(ga)?(se=!0,Xd=O.createStream(34962,ga),od=Xd.dtype):(Xd=O.getBuffer(ga))?od=Xd.dtype:"constant"in ga?(pd=2,"number"===typeof ga.constant?(fd=ga.constant,Pc=Ic=Ec=0):(fd=0<ga.constant.length?ga.constant[0]:0,Pc=1<ga.constant.length?ga.constant[1]:0,Ic=2<ga.constant.length?ga.constant[2]:0,Ec=3<ga.constant.length?ga.constant[3]:0)):(Xd=H(ga.buffer)?O.createStream(34962,ga.buffer):O.getBuffer(ga.buffer),od="type"in ga?Fa[ga.type]:Xd.dtype,zd=
!!ga.normalized,bd=ga.size|0,md=ga.offset|0,Lc=ga.stride|0,Nd=ga.divisor|0);Bb=I.location;Fb=S[Bb];if(1===pd){Fb.buffer||z.enableVertexAttribArray(Bb);sc=bd||1;if(Fb.type!==od||Fb.size!==sc||Fb.buffer!==Xd||Fb.normalized!==zd||Fb.offset!==md||Fb.stride!==Lc)z.bindBuffer(34962,Xd.buffer),z.vertexAttribPointer(Bb,sc,od,zd,Lc,md),Fb.type=od,Fb.size=sc,Fb.buffer=Xd,Fb.normalized=zd,Fb.offset=md,Fb.stride=Lc;Fb.divisor!==Nd&&(v.vertexAttribDivisorANGLE(Bb,Nd),Fb.divisor=Nd)}else if(Fb.buffer&&(z.disableVertexAttribArray(Bb),
Fb.buffer=null),Fb.x!==fd||Fb.y!==Pc||Fb.z!==Ic||Fb.w!==Ec)z.vertexAttrib4f(Bb,fd,Pc,Ic,Ec),Fb.x=fd,Fb.y=Pc,Fb.z=Ic,Fb.w=Ec;yb=this.charBuffer;wc=!1;Cb=null;Jc=0;kc=!1;gd=Fc=0;Xc=1;Dc=0;cc=5126;lc=oc=nc=Gc=0;H(yb)?(wc=!0,Cb=O.createStream(34962,yb),cc=Cb.dtype):(Cb=O.getBuffer(yb))?cc=Cb.dtype:"constant"in yb?(Xc=2,"number"===typeof yb.constant?(nc=yb.constant,oc=lc=Gc=0):(nc=0<yb.constant.length?yb.constant[0]:0,oc=1<yb.constant.length?yb.constant[1]:0,lc=2<yb.constant.length?yb.constant[2]:0,Gc=
3<yb.constant.length?yb.constant[3]:0)):(Cb=H(yb.buffer)?O.createStream(34962,yb.buffer):O.getBuffer(yb.buffer),cc="type"in yb?Fa[yb.type]:Cb.dtype,kc=!!yb.normalized,gd=yb.size|0,Fc=yb.offset|0,Dc=yb.stride|0,Jc=yb.divisor|0);dc=ra.location;fb=S[dc];if(1===Xc){fb.buffer||z.enableVertexAttribArray(dc);Tc=gd||1;if(fb.type!==cc||fb.size!==Tc||fb.buffer!==Cb||fb.normalized!==kc||fb.offset!==Fc||fb.stride!==Dc)z.bindBuffer(34962,Cb.buffer),z.vertexAttribPointer(dc,Tc,cc,kc,Dc,Fc),fb.type=cc,fb.size=Tc,
fb.buffer=Cb,fb.normalized=kc,fb.offset=Fc,fb.stride=Dc;fb.divisor!==Jc&&(v.vertexAttribDivisorANGLE(dc,Jc),fb.divisor=Jc)}else if(fb.buffer&&(z.disableVertexAttribArray(dc),fb.buffer=null),fb.x!==nc||fb.y!==oc||fb.z!==lc||fb.w!==Gc)z.vertexAttrib4f(dc,nc,oc,lc,Gc),fb.x=nc,fb.y=oc,fb.z=lc,fb.w=Gc;zb=this.position;cb=!1;Nb=null;ab=0;pb=!1;qd=Va=0;Ib=1;Jb=0;pc=5126;Db=Gb=kb=Ob=0;H(zb)?(cb=!0,Nb=O.createStream(34962,zb),pc=Nb.dtype):(Nb=O.getBuffer(zb))?pc=Nb.dtype:"constant"in zb?(Ib=2,"number"===typeof zb.constant?
(kb=zb.constant,Gb=Db=Ob=0):(kb=0<zb.constant.length?zb.constant[0]:0,Gb=1<zb.constant.length?zb.constant[1]:0,Db=2<zb.constant.length?zb.constant[2]:0,Ob=3<zb.constant.length?zb.constant[3]:0)):(Nb=H(zb.buffer)?O.createStream(34962,zb.buffer):O.getBuffer(zb.buffer),pc="type"in zb?Fa[zb.type]:Nb.dtype,pb=!!zb.normalized,qd=zb.size|0,Va=zb.offset|0,Jb=zb.stride|0,ab=zb.divisor|0);xb=ka.location;ib=S[xb];if(1===Ib){ib.buffer||z.enableVertexAttribArray(xb);Zb=qd||2;if(ib.type!==pc||ib.size!==Zb||ib.buffer!==
Nb||ib.normalized!==pb||ib.offset!==Va||ib.stride!==Jb)z.bindBuffer(34962,Nb.buffer),z.vertexAttribPointer(xb,Zb,pc,pb,Jb,Va),ib.type=pc,ib.size=Zb,ib.buffer=Nb,ib.normalized=pb,ib.offset=Va,ib.stride=Jb;ib.divisor!==ab&&(v.vertexAttribDivisorANGLE(xb,ab),ib.divisor=ab)}else if(ib.buffer&&(z.disableVertexAttribArray(xb),ib.buffer=null),ib.x!==kb||ib.y!==Gb||ib.z!==Db||ib.w!==Ob)z.vertexAttrib4f(xb,kb,Gb,Db,Ob),ib.x=kb,ib.y=Gb,ib.z=Db,ib.w=Ob;Pb=c.call(this,J,b,0);z.uniform1f(C.location,Pb);mb=l.call(this,
J,b,0);z.uniform1f(U.location,mb);z.uniform1f(T.location,b.align);z.uniform1f(y.location,b.baseline);Ta=this.viewportArray;z.uniform4f(V.location,Ta[0],Ta[1],Ta[2],Ta[3]);Vb=b.color;z.uniform4f(h.location,Vb[0],Vb[1],Vb[2],Vb[3]);qb=a.call(this,J,b,0);z.uniform2f(E.location,qb[0],qb[1]);hc=f.call(this,J,b,0);z.uniform2f(X.location,hc[0],hc[1]);jb=this.scale;z.uniform2f(ma.location,jb[0],jb[1]);rb=this.translate;z.uniform2f(Ba.location,rb[0],rb[1]);Ja=b.positionOffset;z.uniform2f(F.location,Ja[0],
Ja[1]);z.uniform1f(d.location,b.opacity);(sb=g.call(this,J,b,0))&&"framebuffer"===sb._reglType&&(sb=sb.color[0]);La=sb._texture;z.uniform1i(m.location,La.bind());(eb=K.elements)?z.bindBuffer(34963,eb.buffer.buffer):ta.currentVAO&&(eb=M.getElements(ta.currentVAO.elements))&&z.bindBuffer(34963,eb.buffer.buffer);gb=b.offset;if(Ma=b.count)lb=K.instances,0<lb?eb?v.drawElementsInstancedANGLE(0,Ma,eb.type,gb<<(eb.type-5121>>1),lb):v.drawArraysInstancedANGLE(0,gb,Ma,lb):0>lb&&(eb?z.drawElements(0,Ma,eb.type,
gb<<(eb.type-5121>>1)):z.drawArrays(0,gb,Ma)),u.dirty=!0,ta.setVAO(null),J.viewportWidth=sa,J.viewportHeight=q,x&&(B.cpuTime+=performance.now()-D),G&&O.destroyStream(R),se&&O.destroyStream(Xd),wc&&O.destroyStream(Cb),cb&&O.destroyStream(Nb),La.unbind()},scope:function(a,c,d){var b,h,e,k,g,f,m,z,l,A,t,L,r,aa,na,y,wa,Ha,F,E,q,C,S,ea,Y,Tb,I,M,Ra,ya,N,va,Q,za,qa,ta,T,V,X,P,U,ca,Ya,ia,pa,ka,ma,Ea,oa,Aa,xa,Hb,ra,Ba,zc,fa,fb,Ca,zb,cb,Nb,ab,pb,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,
sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa,Mc,Ab,$a,Wb,rc,Xb,Qb,Kc,Rb,je,Hc,sd,Nc,Yc,Jd,mc,uc,fc,db,qc,Ub,Yb,bc,gc,xc,Bc,cd,Rc,Sc,Uc,Zc,ld,dd,$c,jc,ac,ad,Wc,ed,yc,id;b=this.viewport;h=b.x|0;e=b.y|0;k="width"in b?b.width|0:J.framebufferWidth-h;g="height"in b?b.height|0:J.framebufferHeight-e;f=J.viewportWidth;J.viewportWidth=k;m=J.viewportHeight;J.viewportHeight=g;z=sa[0];sa[0]=h;l=sa[1];sa[1]=e;A=sa[2];sa[2]=k;t=sa[3];sa[3]=g;L=Da[0];Da[0]=
0;r=Da[1];Da[1]=0;aa=Da[2];Da[2]=0;na=Da[3];Da[3]=1;y=da.blend_enable;da.blend_enable=!0;wa=ja[0];ja[0]=770;Ha=ja[1];ja[1]=771;F=ja[2];ja[2]=773;E=ja[3];ja[3]=1;q=da.depth_enable;da.depth_enable=!1;C=da.stencil_enable;da.stencil_enable=!1;if(S=u.profile)ea=performance.now(),B.count++;Y=a.offset;Tb=K.offset;K.offset=Y;I=a.count;M=K.count;K.count=I;Ra=K.primitive;K.primitive=0;ya=a.align;N=la[64];la[64]=ya;va=n.call(this,J,a,d);Q=la[69];la[69]=va;za=p.call(this,J,a,d);qa=la[67];la[67]=za;ta=v.call(this,
J,a,d);T=la[66];la[66]=ta;V=a.baseline;X=la[65];la[65]=V;P=R.call(this,J,a,d);U=la[62];la[62]=P;ca=a.color;Ya=la[14];la[14]=ca;ia=G.call(this,J,a,d);pa=la[63];la[63]=ia;ka=a.opacity;ma=la[10];la[10]=ka;Ea=a.positionOffset;oa=la[68];la[68]=Ea;Aa=this.scale;xa=la[6];la[6]=Aa;Hb=this.translate;ra=la[8];la[8]=Hb;Ba=this.viewportArray;zc=la[3];la[3]=Ba;fa=this.charBuffer;fb=!1;Ca=null;zb=0;cb=!1;ab=Nb=0;pb=1;Va=0;qd=5126;Ob=pc=Jb=Ib=0;H(fa)?(fb=!0,Ca=O.createStream(34962,fa),qd=Ca.dtype):(Ca=O.getBuffer(fa))?
qd=Ca.dtype:"constant"in fa?(pb=2,"number"===typeof fa.constant?(Jb=fa.constant,pc=Ob=Ib=0):(Jb=0<fa.constant.length?fa.constant[0]:0,pc=1<fa.constant.length?fa.constant[1]:0,Ob=2<fa.constant.length?fa.constant[2]:0,Ib=3<fa.constant.length?fa.constant[3]:0)):(Ca=H(fa.buffer)?O.createStream(34962,fa.buffer):O.getBuffer(fa.buffer),qd="type"in fa?Fa[fa.type]:Ca.dtype,cb=!!fa.normalized,ab=fa.size|0,Nb=fa.offset|0,Va=fa.stride|0,zb=fa.divisor|0);kb=x.buffer;x.buffer=Ca;Gb=x.divisor;x.divisor=zb;Db=x.normalized;
x.normalized=cb;xb=x.offset;x.offset=Nb;ib=x.size;x.size=ab;Zb=x.state;x.state=pb;Pb=x.stride;x.stride=Va;mb=x.type;x.type=qd;Ta=x.w;x.w=Ib;Vb=x.x;x.x=Jb;qb=x.y;x.y=pc;hc=x.z;x.z=Ob;ga.buffer=this.sizeBuffer;jb=!1;rb=null;Ja=0;sb=!1;eb=La=0;gb=1;Ma=0;lb=5126;Pa=tb=ub=Wa=0;H(ga)?(jb=!0,rb=O.createStream(34962,ga),lb=rb.dtype):(rb=O.getBuffer(ga))?lb=rb.dtype:"constant"in ga?(gb=2,"number"===typeof ga.constant?(ub=ga.constant,tb=Pa=Wa=0):(ub=0<ga.constant.length?ga.constant[0]:0,tb=1<ga.constant.length?
ga.constant[1]:0,Pa=2<ga.constant.length?ga.constant[2]:0,Wa=3<ga.constant.length?ga.constant[3]:0)):(rb=H(ga.buffer)?O.createStream(34962,ga.buffer):O.getBuffer(ga.buffer),lb="type"in ga?Fa[ga.type]:rb.dtype,sb=!!ga.normalized,eb=ga.size|0,La=ga.offset|0,Ma=ga.stride|0,Ja=ga.divisor|0);Cc=D.buffer;D.buffer=rb;Sa=D.divisor;D.divisor=Ja;Kb=D.normalized;D.normalized=sb;Eb=D.offset;D.offset=La;Na=D.size;D.size=eb;Qc=D.state;D.state=gb;Za=D.stride;D.stride=Ma;Lb=D.type;D.type=lb;Mb=D.w;D.w=Wa;nb=D.x;
D.x=ub;Oa=D.y;D.y=tb;$b=D.z;D.z=Pa;Qa=this.position;vb=!1;wb=null;Ua=0;ob=!1;Ac=ec=0;tc=1;bb=0;ic=5126;Ab=Mc=Xa=wd=0;H(Qa)?(vb=!0,wb=O.createStream(34962,Qa),ic=wb.dtype):(wb=O.getBuffer(Qa))?ic=wb.dtype:"constant"in Qa?(tc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,Mc=Ab=wd=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,Mc=1<Qa.constant.length?Qa.constant[1]:0,Ab=2<Qa.constant.length?Qa.constant[2]:0,wd=3<Qa.constant.length?Qa.constant[3]:0)):(wb=H(Qa.buffer)?O.createStream(34962,Qa.buffer):O.getBuffer(Qa.buffer),
ic="type"in Qa?Fa[Qa.type]:wb.dtype,ob=!!Qa.normalized,Ac=Qa.size|0,ec=Qa.offset|0,bb=Qa.stride|0,Ua=Qa.divisor|0);$a=ha.buffer;ha.buffer=wb;Wb=ha.divisor;ha.divisor=Ua;rc=ha.normalized;ha.normalized=ob;Xb=ha.offset;ha.offset=ec;Qb=ha.size;ha.size=Ac;Kc=ha.state;ha.state=tc;Rb=ha.stride;ha.stride=bb;je=ha.type;ha.type=ic;Hc=ha.w;ha.w=wd;sd=ha.x;ha.x=Xa;Nc=ha.y;ha.y=Mc;Yc=ha.z;ha.z=Ab;Z.buffer=this.sizeBuffer;Jd=!1;mc=null;uc=0;fc=!1;qc=db=0;Ub=1;Yb=0;bc=5126;cd=Bc=xc=gc=0;H(Z)?(Jd=!0,mc=O.createStream(34962,
Z),bc=mc.dtype):(mc=O.getBuffer(Z))?bc=mc.dtype:"constant"in Z?(Ub=2,"number"===typeof Z.constant?(xc=Z.constant,Bc=cd=gc=0):(xc=0<Z.constant.length?Z.constant[0]:0,Bc=1<Z.constant.length?Z.constant[1]:0,cd=2<Z.constant.length?Z.constant[2]:0,gc=3<Z.constant.length?Z.constant[3]:0)):(mc=H(Z.buffer)?O.createStream(34962,Z.buffer):O.getBuffer(Z.buffer),bc="type"in Z?Fa[Z.type]:mc.dtype,fc=!!Z.normalized,qc=Z.size|0,db=Z.offset|0,Yb=Z.stride|0,uc=Z.divisor|0);Rc=w.buffer;w.buffer=mc;Sc=w.divisor;w.divisor=
uc;Uc=w.normalized;w.normalized=fc;Zc=w.offset;w.offset=db;ld=w.size;w.size=qc;dd=w.state;w.state=Ub;$c=w.stride;w.stride=Yb;jc=w.type;w.type=bc;ac=w.w;w.w=gc;ad=w.x;w.x=xc;Wc=w.y;w.y=Bc;ed=w.z;w.z=cd;yc=W.vert;W.vert=61;id=W.frag;W.frag=60;u.dirty=!0;c(J,a,d);J.viewportWidth=f;J.viewportHeight=m;sa[0]=z;sa[1]=l;sa[2]=A;sa[3]=t;Da[0]=L;Da[1]=r;Da[2]=aa;Da[3]=na;da.blend_enable=y;ja[0]=wa;ja[1]=Ha;ja[2]=F;ja[3]=E;da.depth_enable=q;da.stencil_enable=C;S&&(B.cpuTime+=performance.now()-ea);K.offset=Tb;
K.count=M;K.primitive=Ra;la[64]=N;la[69]=Q;la[67]=qa;la[66]=T;la[65]=X;la[62]=U;la[14]=Ya;la[63]=pa;la[10]=ma;la[68]=oa;la[6]=xa;la[8]=ra;la[3]=zc;fb&&O.destroyStream(Ca);x.buffer=kb;x.divisor=Gb;x.normalized=Db;x.offset=xb;x.size=ib;x.state=Zb;x.stride=Pb;x.type=mb;x.w=Ta;x.x=Vb;x.y=qb;x.z=hc;jb&&O.destroyStream(rb);D.buffer=Cc;D.divisor=Sa;D.normalized=Kb;D.offset=Eb;D.size=Na;D.state=Qc;D.stride=Za;D.type=Lb;D.w=Mb;D.x=nb;D.y=Oa;D.z=$b;vb&&O.destroyStream(wb);ha.buffer=$a;ha.divisor=Wb;ha.normalized=
rc;ha.offset=Xb;ha.size=Qb;ha.state=Kc;ha.stride=Rb;ha.type=je;ha.w=Hc;ha.x=sd;ha.y=Nc;ha.z=Yc;Jd&&O.destroyStream(mc);w.buffer=Rc;w.divisor=Sc;w.normalized=Uc;w.offset=Zc;w.size=ld;w.state=dd;w.stride=$c;w.type=jc;w.w=ac;w.x=ad;w.y=Wc;w.z=ed;W.vert=yc;W.frag=id;u.dirty=!0}}},$2:function(b,B,k){var c,l,a,f,g,n,p,v,R,G,x,D,ha,w,Q,q,N,P,e,r,T,m,X,E,y,ra,I,C,h,U;c=b.attributes;l=b.current;a=b.framebuffer;f=b.gl;g=b.next;n=b.vao;p=g.blend_color;v=l.blend_color;R=g.blend_equation;G=l.blend_equation;x=
g.blend_func;D=l.blend_func;ha=g.colorMask;w=l.colorMask;Q=g.depth_range;q=l.depth_range;N=g.polygonOffset_offset;P=l.polygonOffset_offset;e=g.sample_coverage;r=l.sample_coverage;T=g.scissor_box;m=l.scissor_box;X=g.stencil_func;E=l.stencil_func;y=g.stencil_opBack;ra=l.stencil_opBack;I=g.stencil_opFront;C=l.stencil_opFront;h=g.viewport;U=l.viewport;return{poll:function(){var c,b,k,B,n,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da;l.dirty=!1;b=g.blend_enable;k=g.cull_enable;B=g.depth_enable;n=g.dither;V=
g.polygonOffset_enable;ca=g.sample_alpha;S=g.sample_enable;O=g.scissor_enable;J=g.stencil_enable;u=g.cull_face;K=l.cull_face;M=g.depth_func;qa=l.depth_func;oa=g.depth_mask;z=l.depth_mask;H=g.frontFace;da=l.frontFace;W=g.lineWidth;la=l.lineWidth;ta=g.stencil_mask;Da=l.stencil_mask;c=a.next;c!==a.cur&&(c?f.bindFramebuffer(36160,c.framebuffer):f.bindFramebuffer(36160,null),a.cur=c);b!==l.blend_enable&&(b?f.enable(3042):f.disable(3042),l.blend_enable=b);k!==l.cull_enable&&(k?f.enable(2884):f.disable(2884),
l.cull_enable=k);B!==l.depth_enable&&(B?f.enable(2929):f.disable(2929),l.depth_enable=B);n!==l.dither&&(n?f.enable(3024):f.disable(3024),l.dither=n);V!==l.polygonOffset_enable&&(V?f.enable(32823):f.disable(32823),l.polygonOffset_enable=V);ca!==l.sample_alpha&&(ca?f.enable(32926):f.disable(32926),l.sample_alpha=ca);S!==l.sample_enable&&(S?f.enable(32928):f.disable(32928),l.sample_enable=S);O!==l.scissor_enable&&(O?f.enable(3089):f.disable(3089),l.scissor_enable=O);J!==l.stencil_enable&&(J?f.enable(2960):
f.disable(2960),l.stencil_enable=J);if(p[0]!==v[0]||p[1]!==v[1]||p[2]!==v[2]||p[3]!==v[3])f.blendColor(p[0],p[1],p[2],p[3]),v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3];if(R[0]!==G[0]||R[1]!==G[1])f.blendEquationSeparate(R[0],R[1]),G[0]=R[0],G[1]=R[1];if(x[0]!==D[0]||x[1]!==D[1]||x[2]!==D[2]||x[3]!==D[3])f.blendFuncSeparate(x[0],x[1],x[2],x[3]),D[0]=x[0],D[1]=x[1],D[2]=x[2],D[3]=x[3];if(ha[0]!==w[0]||ha[1]!==w[1]||ha[2]!==w[2]||ha[3]!==w[3])f.colorMask(ha[0],ha[1],ha[2],ha[3]),w[0]=ha[0],w[1]=ha[1],w[2]=
ha[2],w[3]=ha[3];u!==K&&(f.cullFace(u),l.cull_face=u);M!==qa&&(f.depthFunc(M),l.depth_func=M);oa!==z&&(f.depthMask(oa),l.depth_mask=oa);if(Q[0]!==q[0]||Q[1]!==q[1])f.depthRange(Q[0],Q[1]),q[0]=Q[0],q[1]=Q[1];H!==da&&(f.frontFace(H),l.frontFace=H);W!==la&&(f.lineWidth(W),l.lineWidth=W);if(N[0]!==P[0]||N[1]!==P[1])f.polygonOffset(N[0],N[1]),P[0]=N[0],P[1]=N[1];if(e[0]!==r[0]||e[1]!==r[1])f.sampleCoverage(e[0],e[1]),r[0]=e[0],r[1]=e[1];if(T[0]!==m[0]||T[1]!==m[1]||T[2]!==m[2]||T[3]!==m[3])f.scissor(T[0],
T[1],T[2],T[3]),m[0]=T[0],m[1]=T[1],m[2]=T[2],m[3]=T[3];if(X[0]!==E[0]||X[1]!==E[1]||X[2]!==E[2])f.stencilFunc(X[0],X[1],X[2]),E[0]=X[0],E[1]=X[1],E[2]=X[2];ta!==Da&&(f.stencilMask(ta),l.stencil_mask=ta);if(y[0]!==ra[0]||y[1]!==ra[1]||y[2]!==ra[2]||y[3]!==ra[3])f.stencilOpSeparate(y[0],y[1],y[2],y[3]),ra[0]=y[0],ra[1]=y[1],ra[2]=y[2],ra[3]=y[3];if(I[0]!==C[0]||I[1]!==C[1]||I[2]!==C[2]||I[3]!==C[3])f.stencilOpSeparate(I[0],I[1],I[2],I[3]),C[0]=I[0],C[1]=I[1],C[2]=I[2],C[3]=I[3];if(h[0]!==U[0]||h[1]!==
U[1]||h[2]!==U[2]||h[3]!==U[3])f.viewport(h[0],h[1],h[2],h[3]),U[0]=h[0],U[1]=h[1],U[2]=h[2],U[3]=h[3]},refresh:function(){var d,b,k,B,Ba,V,ca,S,O,J,u,K,M,qa,oa,z;l.dirty=!1;b=g.blend_enable;k=g.cull_enable;B=g.depth_enable;Ba=g.dither;V=g.polygonOffset_enable;ca=g.sample_alpha;S=g.sample_enable;O=g.scissor_enable;J=g.stencil_enable;u=g.cull_face;K=g.depth_func;M=g.depth_mask;qa=g.frontFace;oa=g.lineWidth;z=g.stencil_mask;(d=a.next)?f.bindFramebuffer(36160,d.framebuffer):f.bindFramebuffer(36160,null);
a.cur=d;d=c[0];d.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=c[1];d.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);d=c[2];d.buffer?(f.enableVertexAttribArray(2),
f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(2),f.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=c[3];d.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);d=c[4];d.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,d.buffer.buffer),
f.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=c[5];d.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=c[6];d.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(6,d.size,
d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=c[7];d.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=c[8];d.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):
(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=c[9];d.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=c[10];d.buffer?(f.enableVertexAttribArray(10),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(10,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(10),
f.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=c[11];d.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=c[12];d.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(12,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,d.x,
d.y,d.z,d.w),d.buffer=null);d=c[13];d.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(13),f.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=c[14];d.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=
null);d=c[15];d.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,d.buffer.buffer),f.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);n.currentVAO=null;n.setVAO(n.targetVAO);b?f.enable(3042):f.disable(3042);l.blend_enable=b;k?f.enable(2884):f.disable(2884);l.cull_enable=k;B?f.enable(2929):f.disable(2929);l.depth_enable=B;Ba?f.enable(3024):f.disable(3024);l.dither=Ba;V?f.enable(32823):f.disable(32823);
l.polygonOffset_enable=V;ca?f.enable(32926):f.disable(32926);l.sample_alpha=ca;S?f.enable(32928):f.disable(32928);l.sample_enable=S;O?f.enable(3089):f.disable(3089);l.scissor_enable=O;J?f.enable(2960):f.disable(2960);l.stencil_enable=J;f.blendColor(p[0],p[1],p[2],p[3]);v[0]=p[0];v[1]=p[1];v[2]=p[2];v[3]=p[3];f.blendEquationSeparate(R[0],R[1]);G[0]=R[0];G[1]=R[1];f.blendFuncSeparate(x[0],x[1],x[2],x[3]);D[0]=x[0];D[1]=x[1];D[2]=x[2];D[3]=x[3];f.colorMask(ha[0],ha[1],ha[2],ha[3]);w[0]=ha[0];w[1]=ha[1];
w[2]=ha[2];w[3]=ha[3];f.cullFace(u);l.cull_face=u;f.depthFunc(K);l.depth_func=K;f.depthMask(M);l.depth_mask=M;f.depthRange(Q[0],Q[1]);q[0]=Q[0];q[1]=Q[1];f.frontFace(qa);l.frontFace=qa;f.lineWidth(oa);l.lineWidth=oa;f.polygonOffset(N[0],N[1]);P[0]=N[0];P[1]=N[1];f.sampleCoverage(e[0],e[1]);r[0]=e[0];r[1]=e[1];f.scissor(T[0],T[1],T[2],T[3]);m[0]=T[0];m[1]=T[1];m[2]=T[2];m[3]=T[3];f.stencilFunc(X[0],X[1],X[2]);E[0]=X[0];E[1]=X[1];E[2]=X[2];f.stencilMask(z);l.stencil_mask=z;f.stencilOpSeparate(y[0],
y[1],y[2],y[3]);ra[0]=y[0];ra[1]=y[1];ra[2]=y[2];ra[3]=y[3];f.stencilOpSeparate(I[0],I[1],I[2],I[3]);C[0]=I[0];C[1]=I[1];C[2]=I[2];C[3]=I[3];f.viewport(h[0],h[1],h[2],h[3]);U[0]=h[0];U[1]=h[1];U[2]=h[2];U[3]=h[3]}}},$7:function(b,B,k,c,l,a,f,g){var n,p,v,R,G,x,D,ha,w,Q,q,N,P,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,Ba,V,ca,S;n=b.context;p=b.current;v=b.framebuffer;R=b.gl;G=b.next;x=b.shader;D=b.vao;ha=G.blend_color;w=p.blend_color;Q=G.blend_equation;q=p.blend_equation;N=G.blend_func;P=p.blend_func;e=G.colorMask;
r=p.colorMask;T=G.depth_range;m=p.depth_range;X=G.polygonOffset_offset;E=p.polygonOffset_offset;y=G.sample_coverage;ra=p.sample_coverage;I=G.scissor_box;C=p.scissor_box;h=G.stencil_func;U=p.stencil_func;d=G.stencil_opBack;ka=p.stencil_opBack;F=G.stencil_opFront;ma=p.stencil_opFront;Ba=G.viewport;V=p.viewport;ca={};S={};return{draw:function(b){var g,f,S,I,qa,oa,z,H,da,W;g=b.framebuffer;f=v.getFramebuffer(g);g&&!f&&B.commandRaise(l,k);g=v.next;v.next=f;S=n.framebufferWidth;n.framebufferWidth=f?f.width:
n.drawingBufferWidth;I=n.framebufferHeight;n.framebufferHeight=f?f.height:n.drawingBufferHeight;f!==v.cur&&(f?R.bindFramebuffer(36160,f.framebuffer):R.bindFramebuffer(36160,null),v.cur=f);if(p.dirty){f=G.dither;f!==p.dither&&(f?R.enable(3024):R.disable(3024),p.dither=f);f=G.blend_enable;f!==p.blend_enable&&(f?R.enable(3042):R.disable(3042),p.blend_enable=f);f=ha[0];z=ha[1];qa=ha[2];oa=ha[3];if(f!==w[0]||z!==w[1]||qa!==w[2]||oa!==w[3])R.blendColor(f,z,qa,oa),w[0]=f,w[1]=z,w[2]=qa,w[3]=oa;f=Q[0];z=
Q[1];if(f!==q[0]||z!==q[1])R.blendEquationSeparate(f,z),q[0]=f,q[1]=z;f=N[0];z=N[1];qa=N[2];oa=N[3];if(f!==P[0]||z!==P[1]||qa!==P[2]||oa!==P[3])R.blendFuncSeparate(f,z,qa,oa),P[0]=f,P[1]=z,P[2]=qa,P[3]=oa;f=G.depth_enable;f!==p.depth_enable&&(f?R.enable(2929):R.disable(2929),p.depth_enable=f);f=G.depth_func;f!==p.depth_func&&(R.depthFunc(f),p.depth_func=f);f=T[0];z=T[1];if(f!==m[0]||z!==m[1])R.depthRange(f,z),m[0]=f,m[1]=z;f=G.depth_mask;f!==p.depth_mask&&(R.depthMask(f),p.depth_mask=f);f=e[0];z=
e[1];qa=e[2];oa=e[3];if(f!==r[0]||z!==r[1]||qa!==r[2]||oa!==r[3])R.colorMask(f,z,qa,oa),r[0]=f,r[1]=z,r[2]=qa,r[3]=oa;f=G.cull_enable;f!==p.cull_enable&&(f?R.enable(2884):R.disable(2884),p.cull_enable=f);f=G.cull_face;f!==p.cull_face&&(R.cullFace(f),p.cull_face=f);f=G.frontFace;f!==p.frontFace&&(R.frontFace(f),p.frontFace=f);f=G.lineWidth;f!==p.lineWidth&&(R.lineWidth(f),p.lineWidth=f);f=G.polygonOffset_enable;f!==p.polygonOffset_enable&&(f?R.enable(32823):R.disable(32823),p.polygonOffset_enable=
f);f=X[0];z=X[1];if(f!==E[0]||z!==E[1])R.polygonOffset(f,z),E[0]=f,E[1]=z;f=G.sample_alpha;f!==p.sample_alpha&&(f?R.enable(32926):R.disable(32926),p.sample_alpha=f);f=G.sample_enable;f!==p.sample_enable&&(f?R.enable(32928):R.disable(32928),p.sample_enable=f);f=y[0];z=y[1];if(f!==ra[0]||z!==ra[1])R.sampleCoverage(f,z),ra[0]=f,ra[1]=z;f=G.stencil_enable;f!==p.stencil_enable&&(f?R.enable(2960):R.disable(2960),p.stencil_enable=f);f=G.stencil_mask;f!==p.stencil_mask&&(R.stencilMask(f),p.stencil_mask=f);
f=h[0];z=h[1];qa=h[2];if(f!==U[0]||z!==U[1]||qa!==U[2])R.stencilFunc(f,z,qa),U[0]=f,U[1]=z,U[2]=qa;f=F[0];z=F[1];qa=F[2];oa=F[3];if(f!==ma[0]||z!==ma[1]||qa!==ma[2]||oa!==ma[3])R.stencilOpSeparate(f,z,qa,oa),ma[0]=f,ma[1]=z,ma[2]=qa,ma[3]=oa;f=d[0];z=d[1];qa=d[2];oa=d[3];if(f!==ka[0]||z!==ka[1]||qa!==ka[2]||oa!==ka[3])R.stencilOpSeparate(f,z,qa,oa),ka[0]=f,ka[1]=z,ka[2]=qa,ka[3]=oa;f=G.scissor_enable;f!==p.scissor_enable&&(f?R.enable(3089):R.disable(3089),p.scissor_enable=f)}qa=n.framebufferWidth;
oa=n.framebufferHeight;f=n.viewportWidth;n.viewportWidth=qa;z=n.viewportHeight;n.viewportHeight=oa;R.viewport(0,0,qa,oa);V[0]=0;V[1]=0;V[2]=qa;V[3]=oa;qa=n.framebufferWidth;oa=n.framebufferHeight;R.scissor(0,0,qa,oa);C[0]=0;C[1]=0;C[2]=qa;C[3]=oa;if(qa=p.profile)H=performance.now(),c.count++;oa=x.program(x.vert,x.frag,k);R.useProgram(oa.program);D.setVAO(null);da=oa.id;(W=ca[da])||(W=ca[da]=a(oa));W.call(this,b);p.dirty=!0;D.setVAO(null);v.next=g;n.framebufferWidth=S;n.framebufferHeight=I;n.viewportWidth=
f;n.viewportHeight=z;qa&&(c.cpuTime+=performance.now()-H)},scope:function(a,d,b){var h,e,g,m,z,l,r,y,w,F,E,q,x,D,S;h=a.framebuffer;e=v.getFramebuffer(h);h&&!e&&B.commandRaise(f,k);h=v.next;v.next=e;g=n.framebufferWidth;n.framebufferWidth=e?e.width:n.drawingBufferWidth;m=n.framebufferHeight;n.framebufferHeight=e?e.height:n.drawingBufferHeight;z=n.framebufferWidth;l=n.framebufferHeight;e=n.viewportWidth;n.viewportWidth=z;r=n.viewportHeight;n.viewportHeight=l;y=Ba[0];Ba[0]=0;w=Ba[1];Ba[1]=0;F=Ba[2];
Ba[2]=z;z=Ba[3];Ba[3]=l;E=n.framebufferWidth;q=n.framebufferHeight;l=I[0];I[0]=0;x=I[1];I[1]=0;D=I[2];I[2]=E;E=I[3];I[3]=q;if(q=p.profile)S=performance.now(),c.count++;p.dirty=!0;d(n,a,b);v.next=h;n.framebufferWidth=g;n.framebufferHeight=m;n.viewportWidth=e;n.viewportHeight=r;Ba[0]=y;Ba[1]=w;Ba[2]=F;Ba[3]=z;I[0]=l;I[1]=x;I[2]=D;I[3]=E;q&&(c.cpuTime+=performance.now()-S);p.dirty=!0},batch:function(a,b){var f,l,B,n,C;if(p.dirty){f=G.dither;f!==p.dither&&(f?R.enable(3024):R.disable(3024),p.dither=f);
f=G.blend_enable;f!==p.blend_enable&&(f?R.enable(3042):R.disable(3042),p.blend_enable=f);f=ha[0];B=ha[1];n=ha[2];C=ha[3];if(f!==w[0]||B!==w[1]||n!==w[2]||C!==w[3])R.blendColor(f,B,n,C),w[0]=f,w[1]=B,w[2]=n,w[3]=C;f=Q[0];B=Q[1];if(f!==q[0]||B!==q[1])R.blendEquationSeparate(f,B),q[0]=f,q[1]=B;f=N[0];B=N[1];n=N[2];C=N[3];if(f!==P[0]||B!==P[1]||n!==P[2]||C!==P[3])R.blendFuncSeparate(f,B,n,C),P[0]=f,P[1]=B,P[2]=n,P[3]=C;f=G.depth_enable;f!==p.depth_enable&&(f?R.enable(2929):R.disable(2929),p.depth_enable=
f);f=G.depth_func;f!==p.depth_func&&(R.depthFunc(f),p.depth_func=f);f=T[0];B=T[1];if(f!==m[0]||B!==m[1])R.depthRange(f,B),m[0]=f,m[1]=B;f=G.depth_mask;f!==p.depth_mask&&(R.depthMask(f),p.depth_mask=f);f=e[0];B=e[1];n=e[2];C=e[3];if(f!==r[0]||B!==r[1]||n!==r[2]||C!==r[3])R.colorMask(f,B,n,C),r[0]=f,r[1]=B,r[2]=n,r[3]=C;f=G.cull_enable;f!==p.cull_enable&&(f?R.enable(2884):R.disable(2884),p.cull_enable=f);f=G.cull_face;f!==p.cull_face&&(R.cullFace(f),p.cull_face=f);f=G.frontFace;f!==p.frontFace&&(R.frontFace(f),
p.frontFace=f);f=G.lineWidth;f!==p.lineWidth&&(R.lineWidth(f),p.lineWidth=f);f=G.polygonOffset_enable;f!==p.polygonOffset_enable&&(f?R.enable(32823):R.disable(32823),p.polygonOffset_enable=f);f=X[0];B=X[1];if(f!==E[0]||B!==E[1])R.polygonOffset(f,B),E[0]=f,E[1]=B;f=G.sample_alpha;f!==p.sample_alpha&&(f?R.enable(32926):R.disable(32926),p.sample_alpha=f);f=G.sample_enable;f!==p.sample_enable&&(f?R.enable(32928):R.disable(32928),p.sample_enable=f);f=y[0];B=y[1];if(f!==ra[0]||B!==ra[1])R.sampleCoverage(f,
B),ra[0]=f,ra[1]=B;f=G.stencil_enable;f!==p.stencil_enable&&(f?R.enable(2960):R.disable(2960),p.stencil_enable=f);f=G.stencil_mask;f!==p.stencil_mask&&(R.stencilMask(f),p.stencil_mask=f);f=h[0];B=h[1];n=h[2];if(f!==U[0]||B!==U[1]||n!==U[2])R.stencilFunc(f,B,n),U[0]=f,U[1]=B,U[2]=n;f=F[0];B=F[1];n=F[2];C=F[3];if(f!==ma[0]||B!==ma[1]||n!==ma[2]||C!==ma[3])R.stencilOpSeparate(f,B,n,C),ma[0]=f,ma[1]=B,ma[2]=n,ma[3]=C;f=d[0];B=d[1];n=d[2];C=d[3];if(f!==ka[0]||B!==ka[1]||n!==ka[2]||C!==ka[3])R.stencilOpSeparate(f,
B,n,C),ka[0]=f,ka[1]=B,ka[2]=n,ka[3]=C;f=G.scissor_enable;f!==p.scissor_enable&&(f?R.enable(3089):R.disable(3089),p.scissor_enable=f)}if(f=p.profile)l=performance.now(),c.count+=b;B=x.program(x.vert,x.frag,k);R.useProgram(B.program);D.setVAO(null);n=B.id;(C=S[n])||(C=S[n]=g(B));C.call(this,a,b);p.dirty=!0;D.setVAO(null);f&&(c.cpuTime+=performance.now()-l)}}},$5:function(b,B,k,c,l,a){var f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,Ba,V;f=b.context;g=b.current;n=b.framebuffer;
p=b.gl;v=b.next;R=b.shader;G=b.vao;x=v.blend_color;D=g.blend_color;P=v.blend_equation;w=g.blend_equation;Q=v.blend_func;q=g.blend_func;N=v.colorMask;ia=g.colorMask;e=v.depth_range;r=g.depth_range;T=v.polygonOffset_offset;m=g.polygonOffset_offset;X=v.sample_coverage;E=g.sample_coverage;y=v.scissor_box;ra=g.scissor_box;I=v.stencil_func;C=g.stencil_func;h=v.stencil_opBack;U=g.stencil_opBack;d=v.stencil_opFront;ka=g.stencil_opFront;F=v.viewport;ma=g.viewport;Ba={};V={};return{draw:function(a){var b,f,
B,u,K;b=n.next;b!==n.cur&&(b?p.bindFramebuffer(36160,b.framebuffer):p.bindFramebuffer(36160,null),n.cur=b);if(g.dirty){b=v.dither;b!==g.dither&&(b?p.enable(3024):p.disable(3024),g.dither=b);b=v.blend_enable;b!==g.blend_enable&&(b?p.enable(3042):p.disable(3042),g.blend_enable=b);b=x[0];B=x[1];u=x[2];K=x[3];if(b!==D[0]||B!==D[1]||u!==D[2]||K!==D[3])p.blendColor(b,B,u,K),D[0]=b,D[1]=B,D[2]=u,D[3]=K;b=P[0];B=P[1];if(b!==w[0]||B!==w[1])p.blendEquationSeparate(b,B),w[0]=b,w[1]=B;b=Q[0];B=Q[1];u=Q[2];K=
Q[3];if(b!==q[0]||B!==q[1]||u!==q[2]||K!==q[3])p.blendFuncSeparate(b,B,u,K),q[0]=b,q[1]=B,q[2]=u,q[3]=K;b=v.depth_enable;b!==g.depth_enable&&(b?p.enable(2929):p.disable(2929),g.depth_enable=b);b=v.depth_func;b!==g.depth_func&&(p.depthFunc(b),g.depth_func=b);b=e[0];B=e[1];if(b!==r[0]||B!==r[1])p.depthRange(b,B),r[0]=b,r[1]=B;b=v.depth_mask;b!==g.depth_mask&&(p.depthMask(b),g.depth_mask=b);b=N[0];B=N[1];u=N[2];K=N[3];if(b!==ia[0]||B!==ia[1]||u!==ia[2]||K!==ia[3])p.colorMask(b,B,u,K),ia[0]=b,ia[1]=B,
ia[2]=u,ia[3]=K;b=v.cull_enable;b!==g.cull_enable&&(b?p.enable(2884):p.disable(2884),g.cull_enable=b);b=v.cull_face;b!==g.cull_face&&(p.cullFace(b),g.cull_face=b);b=v.frontFace;b!==g.frontFace&&(p.frontFace(b),g.frontFace=b);b=v.lineWidth;b!==g.lineWidth&&(p.lineWidth(b),g.lineWidth=b);b=v.polygonOffset_enable;b!==g.polygonOffset_enable&&(b?p.enable(32823):p.disable(32823),g.polygonOffset_enable=b);b=T[0];B=T[1];if(b!==m[0]||B!==m[1])p.polygonOffset(b,B),m[0]=b,m[1]=B;b=v.sample_alpha;b!==g.sample_alpha&&
(b?p.enable(32926):p.disable(32926),g.sample_alpha=b);b=v.sample_enable;b!==g.sample_enable&&(b?p.enable(32928):p.disable(32928),g.sample_enable=b);b=X[0];B=X[1];if(b!==E[0]||B!==E[1])p.sampleCoverage(b,B),E[0]=b,E[1]=B;b=v.stencil_enable;b!==g.stencil_enable&&(b?p.enable(2960):p.disable(2960),g.stencil_enable=b);b=v.stencil_mask;b!==g.stencil_mask&&(p.stencilMask(b),g.stencil_mask=b);b=I[0];B=I[1];u=I[2];if(b!==C[0]||B!==C[1]||u!==C[2])p.stencilFunc(b,B,u),C[0]=b,C[1]=B,C[2]=u;b=d[0];B=d[1];u=d[2];
K=d[3];if(b!==ka[0]||B!==ka[1]||u!==ka[2]||K!==ka[3])p.stencilOpSeparate(b,B,u,K),ka[0]=b,ka[1]=B,ka[2]=u,ka[3]=K;b=h[0];B=h[1];u=h[2];K=h[3];if(b!==U[0]||B!==U[1]||u!==U[2]||K!==U[3])p.stencilOpSeparate(b,B,u,K),U[0]=b,U[1]=B,U[2]=u,U[3]=K;b=v.scissor_enable;b!==g.scissor_enable&&(b?p.enable(3089):p.disable(3089),g.scissor_enable=b);b=y[0];B=y[1];u=y[2];K=y[3];if(b!==ra[0]||B!==ra[1]||u!==ra[2]||K!==ra[3])p.scissor(b,B,u,K),ra[0]=b,ra[1]=B,ra[2]=u,ra[3]=K;b=F[0];B=F[1];u=F[2];K=F[3];if(b!==ma[0]||
B!==ma[1]||u!==ma[2]||K!==ma[3])p.viewport(b,B,u,K),ma[0]=b,ma[1]=B,ma[2]=u,ma[3]=K;g.dirty=!1}if(b=g.profile)f=performance.now(),c.count++;B=R.program(R.vert,R.frag,k);p.useProgram(B.program);G.setVAO(null);u=B.id;(K=Ba[u])||(K=Ba[u]=l(B));K.call(this,a);G.setVAO(null);b&&(c.cpuTime+=performance.now()-f)},scope:function(a,d,b){var h,e;if(h=g.profile)e=performance.now(),c.count++;d(f,a,b);h&&(c.cpuTime+=performance.now()-e)},batch:function(b,f){var l,B,u,K,M;l=n.next;l!==n.cur&&(l?p.bindFramebuffer(36160,
l.framebuffer):p.bindFramebuffer(36160,null),n.cur=l);if(g.dirty){l=v.dither;l!==g.dither&&(l?p.enable(3024):p.disable(3024),g.dither=l);l=v.blend_enable;l!==g.blend_enable&&(l?p.enable(3042):p.disable(3042),g.blend_enable=l);l=x[0];u=x[1];K=x[2];M=x[3];if(l!==D[0]||u!==D[1]||K!==D[2]||M!==D[3])p.blendColor(l,u,K,M),D[0]=l,D[1]=u,D[2]=K,D[3]=M;l=P[0];u=P[1];if(l!==w[0]||u!==w[1])p.blendEquationSeparate(l,u),w[0]=l,w[1]=u;l=Q[0];u=Q[1];K=Q[2];M=Q[3];if(l!==q[0]||u!==q[1]||K!==q[2]||M!==q[3])p.blendFuncSeparate(l,
u,K,M),q[0]=l,q[1]=u,q[2]=K,q[3]=M;l=v.depth_enable;l!==g.depth_enable&&(l?p.enable(2929):p.disable(2929),g.depth_enable=l);l=v.depth_func;l!==g.depth_func&&(p.depthFunc(l),g.depth_func=l);l=e[0];u=e[1];if(l!==r[0]||u!==r[1])p.depthRange(l,u),r[0]=l,r[1]=u;l=v.depth_mask;l!==g.depth_mask&&(p.depthMask(l),g.depth_mask=l);l=N[0];u=N[1];K=N[2];M=N[3];if(l!==ia[0]||u!==ia[1]||K!==ia[2]||M!==ia[3])p.colorMask(l,u,K,M),ia[0]=l,ia[1]=u,ia[2]=K,ia[3]=M;l=v.cull_enable;l!==g.cull_enable&&(l?p.enable(2884):
p.disable(2884),g.cull_enable=l);l=v.cull_face;l!==g.cull_face&&(p.cullFace(l),g.cull_face=l);l=v.frontFace;l!==g.frontFace&&(p.frontFace(l),g.frontFace=l);l=v.lineWidth;l!==g.lineWidth&&(p.lineWidth(l),g.lineWidth=l);l=v.polygonOffset_enable;l!==g.polygonOffset_enable&&(l?p.enable(32823):p.disable(32823),g.polygonOffset_enable=l);l=T[0];u=T[1];if(l!==m[0]||u!==m[1])p.polygonOffset(l,u),m[0]=l,m[1]=u;l=v.sample_alpha;l!==g.sample_alpha&&(l?p.enable(32926):p.disable(32926),g.sample_alpha=l);l=v.sample_enable;
l!==g.sample_enable&&(l?p.enable(32928):p.disable(32928),g.sample_enable=l);l=X[0];u=X[1];if(l!==E[0]||u!==E[1])p.sampleCoverage(l,u),E[0]=l,E[1]=u;l=v.stencil_enable;l!==g.stencil_enable&&(l?p.enable(2960):p.disable(2960),g.stencil_enable=l);l=v.stencil_mask;l!==g.stencil_mask&&(p.stencilMask(l),g.stencil_mask=l);l=I[0];u=I[1];K=I[2];if(l!==C[0]||u!==C[1]||K!==C[2])p.stencilFunc(l,u,K),C[0]=l,C[1]=u,C[2]=K;l=d[0];u=d[1];K=d[2];M=d[3];if(l!==ka[0]||u!==ka[1]||K!==ka[2]||M!==ka[3])p.stencilOpSeparate(l,
u,K,M),ka[0]=l,ka[1]=u,ka[2]=K,ka[3]=M;l=h[0];u=h[1];K=h[2];M=h[3];if(l!==U[0]||u!==U[1]||K!==U[2]||M!==U[3])p.stencilOpSeparate(l,u,K,M),U[0]=l,U[1]=u,U[2]=K,U[3]=M;l=v.scissor_enable;l!==g.scissor_enable&&(l?p.enable(3089):p.disable(3089),g.scissor_enable=l);l=y[0];u=y[1];K=y[2];M=y[3];if(l!==ra[0]||u!==ra[1]||K!==ra[2]||M!==ra[3])p.scissor(l,u,K,M),ra[0]=l,ra[1]=u,ra[2]=K,ra[3]=M;l=F[0];u=F[1];K=F[2];M=F[3];if(l!==ma[0]||u!==ma[1]||K!==ma[2]||M!==ma[3])p.viewport(l,u,K,M),ma[0]=l,ma[1]=u,ma[2]=
K,ma[3]=M;g.dirty=!1}if(l=g.profile)B=performance.now(),c.count+=f;u=R.program(R.vert,R.frag,k);p.useProgram(u.program);G.setVAO(null);K=u.id;(M=V[K])||(M=V[K]=a(u));M.call(this,b,f);G.setVAO(null);l&&(c.cpuTime+=performance.now()-B)}}},"$26,color,freq,phase,projection,time,view":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h,U){var d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,fa,Hb,Y;d=b.attributes;ka=b.context;F=b.current;
ma=b.draw;Ba=b.elements;V=b.framebuffer;ca=b.gl;S=b.isArrayLike;O=b.next;J=b.shader;u=b.uniforms;K=b.vao;M=O.blend_color;qa=F.blend_color;oa=O.blend_equation;z=F.blend_equation;H=O.blend_func;da=F.blend_func;W=O.colorMask;la=F.colorMask;ta=O.depth_range;Da=F.depth_range;za=O.polygonOffset_offset;ea=F.polygonOffset_offset;Ea=O.sample_coverage;ja=F.sample_coverage;pa=O.scissor_box;Aa=F.scissor_box;Ra=O.stencil_func;na=F.stencil_func;Tb=O.stencil_opBack;Ya=F.stencil_opBack;A=O.stencil_opFront;t=F.stencil_opFront;
aa=O.viewport;va=F.viewport;xa=new Float32Array(16);fa=new Float32Array(16);Hb=new Float32Array(16);Y=new Float32Array(16);return{draw:function(b){var e,m,r,u;e=V.next;e!==V.cur&&(e?ca.bindFramebuffer(36160,e.framebuffer):ca.bindFramebuffer(36160,null),V.cur=e);if(F.dirty){var w;e=O.dither;e!==F.dither&&(e?ca.enable(3024):ca.disable(3024),F.dither=e);e=O.blend_enable;e!==F.blend_enable&&(e?ca.enable(3042):ca.disable(3042),F.blend_enable=e);e=M[0];r=M[1];u=M[2];w=M[3];if(e!==qa[0]||r!==qa[1]||u!==
qa[2]||w!==qa[3])ca.blendColor(e,r,u,w),qa[0]=e,qa[1]=r,qa[2]=u,qa[3]=w;e=oa[0];r=oa[1];if(e!==z[0]||r!==z[1])ca.blendEquationSeparate(e,r),z[0]=e,z[1]=r;e=H[0];r=H[1];u=H[2];w=H[3];if(e!==da[0]||r!==da[1]||u!==da[2]||w!==da[3])ca.blendFuncSeparate(e,r,u,w),da[0]=e,da[1]=r,da[2]=u,da[3]=w;e=O.depth_enable;e!==F.depth_enable&&(e?ca.enable(2929):ca.disable(2929),F.depth_enable=e);e=O.depth_func;e!==F.depth_func&&(ca.depthFunc(e),F.depth_func=e);e=ta[0];r=ta[1];if(e!==Da[0]||r!==Da[1])ca.depthRange(e,
r),Da[0]=e,Da[1]=r;e=O.depth_mask;e!==F.depth_mask&&(ca.depthMask(e),F.depth_mask=e);e=W[0];r=W[1];u=W[2];w=W[3];if(e!==la[0]||r!==la[1]||u!==la[2]||w!==la[3])ca.colorMask(e,r,u,w),la[0]=e,la[1]=r,la[2]=u,la[3]=w;e=O.cull_enable;e!==F.cull_enable&&(e?ca.enable(2884):ca.disable(2884),F.cull_enable=e);e=O.cull_face;e!==F.cull_face&&(ca.cullFace(e),F.cull_face=e);e=O.frontFace;e!==F.frontFace&&(ca.frontFace(e),F.frontFace=e);e=O.lineWidth;e!==F.lineWidth&&(ca.lineWidth(e),F.lineWidth=e);e=O.polygonOffset_enable;
e!==F.polygonOffset_enable&&(e?ca.enable(32823):ca.disable(32823),F.polygonOffset_enable=e);e=za[0];r=za[1];if(e!==ea[0]||r!==ea[1])ca.polygonOffset(e,r),ea[0]=e,ea[1]=r;e=O.sample_alpha;e!==F.sample_alpha&&(e?ca.enable(32926):ca.disable(32926),F.sample_alpha=e);e=O.sample_enable;e!==F.sample_enable&&(e?ca.enable(32928):ca.disable(32928),F.sample_enable=e);e=Ea[0];r=Ea[1];if(e!==ja[0]||r!==ja[1])ca.sampleCoverage(e,r),ja[0]=e,ja[1]=r;e=O.stencil_enable;e!==F.stencil_enable&&(e?ca.enable(2960):ca.disable(2960),
F.stencil_enable=e);e=O.stencil_mask;e!==F.stencil_mask&&(ca.stencilMask(e),F.stencil_mask=e);e=Ra[0];r=Ra[1];u=Ra[2];if(e!==na[0]||r!==na[1]||u!==na[2])ca.stencilFunc(e,r,u),na[0]=e,na[1]=r,na[2]=u;e=A[0];r=A[1];u=A[2];w=A[3];if(e!==t[0]||r!==t[1]||u!==t[2]||w!==t[3])ca.stencilOpSeparate(e,r,u,w),t[0]=e,t[1]=r,t[2]=u,t[3]=w;e=Tb[0];r=Tb[1];u=Tb[2];w=Tb[3];if(e!==Ya[0]||r!==Ya[1]||u!==Ya[2]||w!==Ya[3])ca.stencilOpSeparate(e,r,u,w),Ya[0]=e,Ya[1]=r,Ya[2]=u,Ya[3]=w;e=O.scissor_enable;e!==F.scissor_enable&&
(e?ca.enable(3089):ca.disable(3089),F.scissor_enable=e);e=pa[0];r=pa[1];u=pa[2];w=pa[3];if(e!==Aa[0]||r!==Aa[1]||u!==Aa[2]||w!==Aa[3])ca.scissor(e,r,u,w),Aa[0]=e,Aa[1]=r,Aa[2]=u,Aa[3]=w;e=aa[0];r=aa[1];u=aa[2];w=aa[3];if(e!==va[0]||r!==va[1]||u!==va[2]||w!==va[3])ca.viewport(e,r,u,w),va[0]=e,va[1]=r,va[2]=u,va[3]=w;F.dirty=!1}if(e=F.profile)m=performance.now(),c.count++;ca.useProgram(l.program);K.setVAO(null);r=ra.location;u=d[r];u.buffer||ca.enableVertexAttribArray(r);if(5126!==u.type||4!==u.size||
u.buffer!==a||!1!==u.normalized||0!==u.offset||44!==u.stride)ca.bindBuffer(34962,a.buffer),ca.vertexAttribPointer(r,4,5126,!1,44,0),u.type=5126,u.size=4,u.buffer=a,u.normalized=!1,u.offset=0,u.stride=44;r=I.location;u=d[r];u.buffer||ca.enableVertexAttribArray(r);if(5126!==u.type||4!==u.size||u.buffer!==f||!1!==u.normalized||16!==u.offset||44!==u.stride)ca.bindBuffer(34962,f.buffer),ca.vertexAttribPointer(r,4,5126,!1,44,16),u.type=5126,u.size=4,u.buffer=f,u.normalized=!1,u.offset=16,u.stride=44;r=
y.location;u=d[r];u.buffer||ca.enableVertexAttribArray(r);if(5126!==u.type||3!==u.size||u.buffer!==g||!1!==u.normalized||32!==u.offset||44!==u.stride)ca.bindBuffer(34962,g.buffer),ca.vertexAttribPointer(r,3,5126,!1,44,32),u.type=5126,u.size=3,u.buffer=g,u.normalized=!1,u.offset=32,u.stride=44;r=n.call(this,ka,b,0);"number"!==typeof r&&B.commandRaise(p,k);ca.uniform1f(h.location,r);r=v.call(this,ka,b,0);S(r)&&16===r.length||B.commandRaise(R,k);ca.uniformMatrix4fv(U.location,!1,Array.isArray(r)||r instanceof
Float32Array?r:(xa[0]=r[0],xa[1]=r[1],xa[2]=r[2],xa[3]=r[3],xa[4]=r[4],xa[5]=r[5],xa[6]=r[6],xa[7]=r[7],xa[8]=r[8],xa[9]=r[9],xa[10]=r[10],xa[11]=r[11],xa[12]=r[12],xa[13]=r[13],xa[14]=r[14],xa[15]=r[15],xa));b=G.call(this,ka,b,0);S(b)&&16===b.length||B.commandRaise(x,k);ca.uniformMatrix4fv(C.location,!1,Array.isArray(b)||b instanceof Float32Array?b:(fa[0]=b[0],fa[1]=b[1],fa[2]=b[2],fa[3]=b[3],fa[4]=b[4],fa[5]=b[5],fa[6]=b[6],fa[7]=b[7],fa[8]=b[8],fa[9]=b[9],fa[10]=b[10],fa[11]=b[11],fa[12]=b[12],
fa[13]=b[13],fa[14]=b[14],fa[15]=b[15],fa));(b=ma.elements)?ca.bindBuffer(34963,b.buffer.buffer):K.currentVAO&&(b=Ba.getElements(K.currentVAO.elements))&&ca.bindBuffer(34963,b.buffer.buffer);r=ma.offset;b?ca.drawElements(0,1E4,b.type,r<<(b.type-5121>>1)):ca.drawArrays(0,r,1E4);K.setVAO(null);e&&(c.cpuTime+=performance.now()-m)},scope:function(d,b,e){var h,k,l,m,z,A,t,r,B,aa,na,p,y,n,H,W,C,E,x,v,ea,Y,Tb,I,Ra,G,K,R,da,va,O,M,za,ta,S,T,ja,qa,V,X,U,ca,Ya,pa,ia;if(h=F.profile)k=performance.now(),c.count++;
l=ma.count;ma.count=1E4;m=ma.primitive;ma.primitive=0;z=D.call(this,ka,d,e);A=u[5];u[5]=z;t=P.call(this,ka,d,e);z=u[3];u[3]=t;r=w.call(this,ka,d,e);t=u[4];u[4]=r;r=Q.buffer;Q.buffer=g;B=Q.divisor;Q.divisor=0;aa=Q.normalized;Q.normalized=!1;na=Q.offset;Q.offset=32;p=Q.size;Q.size=0;y=Q.state;Q.state=1;n=Q.stride;Q.stride=44;H=Q.type;Q.type=5126;W=Q.w;Q.w=0;C=Q.x;Q.x=0;E=Q.y;Q.y=0;x=Q.z;Q.z=0;v=q.buffer;q.buffer=a;ea=q.divisor;q.divisor=0;Y=q.normalized;q.normalized=!1;Tb=q.offset;q.offset=0;I=q.size;
q.size=0;Ra=q.state;q.state=1;G=q.stride;q.stride=44;K=q.type;q.type=5126;R=q.w;q.w=0;da=q.x;q.x=0;va=q.y;q.y=0;O=q.z;q.z=0;M=N.buffer;N.buffer=f;za=N.divisor;N.divisor=0;ta=N.normalized;N.normalized=!1;S=N.offset;N.offset=16;T=N.size;N.size=0;ja=N.state;N.state=1;qa=N.stride;N.stride=44;V=N.type;N.type=5126;X=N.w;N.w=0;U=N.x;N.x=0;ca=N.y;N.y=0;Ya=N.z;N.z=0;pa=J.vert;J.vert=2;ia=J.frag;J.frag=1;b(ka,d,e);h&&(c.cpuTime+=performance.now()-k);ma.count=l;ma.primitive=m;u[5]=A;u[3]=z;u[4]=t;Q.buffer=r;
Q.divisor=B;Q.normalized=aa;Q.offset=na;Q.size=p;Q.state=y;Q.stride=n;Q.type=H;Q.w=W;Q.x=C;Q.y=E;Q.z=x;q.buffer=v;q.divisor=ea;q.normalized=Y;q.offset=Tb;q.size=I;q.state=Ra;q.stride=G;q.type=K;q.w=R;q.x=da;q.y=va;q.z=O;N.buffer=M;N.divisor=za;N.normalized=ta;N.offset=S;N.size=T;N.state=ja;N.stride=qa;N.type=V;N.w=X;N.x=U;N.y=ca;N.z=Ya;J.vert=pa;J.frag=ia},batch:function(b,l){var u,p,w;u=V.next;u!==V.cur&&(u?ca.bindFramebuffer(36160,u.framebuffer):ca.bindFramebuffer(36160,null),V.cur=u);if(F.dirty){var n,
q,x;u=O.dither;u!==F.dither&&(u?ca.enable(3024):ca.disable(3024),F.dither=u);u=O.blend_enable;u!==F.blend_enable&&(u?ca.enable(3042):ca.disable(3042),F.blend_enable=u);u=M[0];n=M[1];q=M[2];x=M[3];if(u!==qa[0]||n!==qa[1]||q!==qa[2]||x!==qa[3])ca.blendColor(u,n,q,x),qa[0]=u,qa[1]=n,qa[2]=q,qa[3]=x;u=oa[0];n=oa[1];if(u!==z[0]||n!==z[1])ca.blendEquationSeparate(u,n),z[0]=u,z[1]=n;u=H[0];n=H[1];q=H[2];x=H[3];if(u!==da[0]||n!==da[1]||q!==da[2]||x!==da[3])ca.blendFuncSeparate(u,n,q,x),da[0]=u,da[1]=n,da[2]=
q,da[3]=x;u=O.depth_enable;u!==F.depth_enable&&(u?ca.enable(2929):ca.disable(2929),F.depth_enable=u);u=O.depth_func;u!==F.depth_func&&(ca.depthFunc(u),F.depth_func=u);u=ta[0];n=ta[1];if(u!==Da[0]||n!==Da[1])ca.depthRange(u,n),Da[0]=u,Da[1]=n;u=O.depth_mask;u!==F.depth_mask&&(ca.depthMask(u),F.depth_mask=u);u=W[0];n=W[1];q=W[2];x=W[3];if(u!==la[0]||n!==la[1]||q!==la[2]||x!==la[3])ca.colorMask(u,n,q,x),la[0]=u,la[1]=n,la[2]=q,la[3]=x;u=O.cull_enable;u!==F.cull_enable&&(u?ca.enable(2884):ca.disable(2884),
F.cull_enable=u);u=O.cull_face;u!==F.cull_face&&(ca.cullFace(u),F.cull_face=u);u=O.frontFace;u!==F.frontFace&&(ca.frontFace(u),F.frontFace=u);u=O.lineWidth;u!==F.lineWidth&&(ca.lineWidth(u),F.lineWidth=u);u=O.polygonOffset_enable;u!==F.polygonOffset_enable&&(u?ca.enable(32823):ca.disable(32823),F.polygonOffset_enable=u);u=za[0];n=za[1];if(u!==ea[0]||n!==ea[1])ca.polygonOffset(u,n),ea[0]=u,ea[1]=n;u=O.sample_alpha;u!==F.sample_alpha&&(u?ca.enable(32926):ca.disable(32926),F.sample_alpha=u);u=O.sample_enable;
u!==F.sample_enable&&(u?ca.enable(32928):ca.disable(32928),F.sample_enable=u);u=Ea[0];n=Ea[1];if(u!==ja[0]||n!==ja[1])ca.sampleCoverage(u,n),ja[0]=u,ja[1]=n;u=O.stencil_enable;u!==F.stencil_enable&&(u?ca.enable(2960):ca.disable(2960),F.stencil_enable=u);u=O.stencil_mask;u!==F.stencil_mask&&(ca.stencilMask(u),F.stencil_mask=u);u=Ra[0];n=Ra[1];q=Ra[2];if(u!==na[0]||n!==na[1]||q!==na[2])ca.stencilFunc(u,n,q),na[0]=u,na[1]=n,na[2]=q;u=A[0];n=A[1];q=A[2];x=A[3];if(u!==t[0]||n!==t[1]||q!==t[2]||x!==t[3])ca.stencilOpSeparate(u,
n,q,x),t[0]=u,t[1]=n,t[2]=q,t[3]=x;u=Tb[0];n=Tb[1];q=Tb[2];x=Tb[3];if(u!==Ya[0]||n!==Ya[1]||q!==Ya[2]||x!==Ya[3])ca.stencilOpSeparate(u,n,q,x),Ya[0]=u,Ya[1]=n,Ya[2]=q,Ya[3]=x;u=O.scissor_enable;u!==F.scissor_enable&&(u?ca.enable(3089):ca.disable(3089),F.scissor_enable=u);u=pa[0];n=pa[1];q=pa[2];x=pa[3];if(u!==Aa[0]||n!==Aa[1]||q!==Aa[2]||x!==Aa[3])ca.scissor(u,n,q,x),Aa[0]=u,Aa[1]=n,Aa[2]=q,Aa[3]=x;u=aa[0];n=aa[1];q=aa[2];x=aa[3];if(u!==va[0]||n!==va[1]||q!==va[2]||x!==va[3])ca.viewport(u,n,q,x),
va[0]=u,va[1]=n,va[2]=q,va[3]=x;F.dirty=!1}if(u=F.profile)p=performance.now(),c.count+=l;ca.useProgram(ia.program);K.setVAO(null);n=ra.location;q=d[n];q.buffer||ca.enableVertexAttribArray(n);if(5126!==q.type||4!==q.size||q.buffer!==a||!1!==q.normalized||0!==q.offset||44!==q.stride)ca.bindBuffer(34962,a.buffer),ca.vertexAttribPointer(n,4,5126,!1,44,0),q.type=5126,q.size=4,q.buffer=a,q.normalized=!1,q.offset=0,q.stride=44;n=I.location;q=d[n];q.buffer||ca.enableVertexAttribArray(n);if(5126!==q.type||
4!==q.size||q.buffer!==f||!1!==q.normalized||16!==q.offset||44!==q.stride)ca.bindBuffer(34962,f.buffer),ca.vertexAttribPointer(n,4,5126,!1,44,16),q.type=5126,q.size=4,q.buffer=f,q.normalized=!1,q.offset=16,q.stride=44;n=y.location;q=d[n];q.buffer||ca.enableVertexAttribArray(n);if(5126!==q.type||3!==q.size||q.buffer!==g||!1!==q.normalized||32!==q.offset||44!==q.stride)ca.bindBuffer(34962,g.buffer),ca.vertexAttribPointer(n,3,5126,!1,44,32),q.type=5126,q.size=3,q.buffer=g,q.normalized=!1,q.offset=32,
q.stride=44;n=e.call(this,ka,void 0,w);"number"!==typeof n&&B.commandRaise(r,k);ca.uniform1f(h.location,n);n=T.call(this,ka,void 0,w);S(n)&&16===n.length||B.commandRaise(m,k);ca.uniformMatrix4fv(U.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Hb[0]=n[0],Hb[1]=n[1],Hb[2]=n[2],Hb[3]=n[3],Hb[4]=n[4],Hb[5]=n[5],Hb[6]=n[6],Hb[7]=n[7],Hb[8]=n[8],Hb[9]=n[9],Hb[10]=n[10],Hb[11]=n[11],Hb[12]=n[12],Hb[13]=n[13],Hb[14]=n[14],Hb[15]=n[15],Hb));w=X.call(this,ka,void 0,w);S(w)&&16===w.length||B.commandRaise(E,
k);ca.uniformMatrix4fv(C.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Y[0]=w[0],Y[1]=w[1],Y[2]=w[2],Y[3]=w[3],Y[4]=w[4],Y[5]=w[5],Y[6]=w[6],Y[7]=w[7],Y[8]=w[8],Y[9]=w[9],Y[10]=w[10],Y[11]=w[11],Y[12]=w[12],Y[13]=w[13],Y[14]=w[14],Y[15]=w[15],Y));(n=ma.elements)?ca.bindBuffer(34963,n.buffer.buffer):K.currentVAO&&(n=Ba.getElements(K.currentVAO.elements))&&ca.bindBuffer(34963,n.buffer.buffer);q=ma.offset;for(w=0;w<l;++w)n?ca.drawElements(0,1E4,n.type,q<<(n.type-5121>>1)):ca.drawArrays(0,
q,1E4);K.setVAO(null);u&&(c.cpuTime+=performance.now()-p)}}},"$34,atlas,normal,position,projection,uv,view":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,fa,V,ca,S){var O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,zc,Hb,Y,L,wa,Ha,sa,ya,Fa,ga,Z,ua,Ka,Ga;O=b.attributes;J=b.buffer;u=b.context;K=b.current;M=b.draw;qa=b.elements;oa=b.framebuffer;z=b.gl;H=b.isArrayLike;da=b.isBufferArgs;W=b.next;la=b.shader;ta=b.uniforms;Da=b.vao;
za=W.blend_color;ea=K.blend_color;Ea=W.blend_equation;ja=K.blend_equation;pa=W.blend_func;Aa=K.blend_func;Ra=W.colorMask;na=K.colorMask;Tb=W.depth_range;Ya=K.depth_range;A=W.polygonOffset_offset;t=K.polygonOffset_offset;aa=W.sample_coverage;va=K.sample_coverage;xa=W.scissor_box;zc=K.scissor_box;Hb=W.stencil_func;Y=K.stencil_func;L=W.stencil_opBack;wa=K.stencil_opBack;Ha=W.stencil_opFront;sa=K.stencil_opFront;ya=W.viewport;Fa=K.viewport;ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,
"float":5126,float32:5126};Z=new Float32Array(16);ua=new Float32Array(16);Ka=new Float32Array(16);Ga=new Float32Array(16);return{draw:function(d){var b,e,h,m,r,w,q,y,C,E,I,N,M,Q,ta,P,T,X,ha,U,ia,la,ka,ra,Ga,Ka,Ca,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb,ab,pb;b=u.view;e=l.call(this,u,d,0);u.view=e;h=oa.next;h!==oa.cur&&(h?z.bindFramebuffer(36160,h.framebuffer):z.bindFramebuffer(36160,null),oa.cur=h);if(K.dirty){var Va,qd,Ib,Jb,pc,Ob,kb,Gb,
Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb;Va=W.dither;Va!==K.dither&&(Va?z.enable(3024):z.disable(3024),K.dither=Va);qd=W.blend_enable;qd!==K.blend_enable&&(qd?z.enable(3042):z.disable(3042),K.blend_enable=qd);Ib=za[0];Jb=za[1];pc=za[2];Ob=za[3];if(Ib!==ea[0]||Jb!==ea[1]||pc!==ea[2]||Ob!==ea[3])z.blendColor(Ib,Jb,pc,Ob),ea[0]=Ib,ea[1]=Jb,ea[2]=pc,ea[3]=Ob;kb=Ea[0];Gb=Ea[1];if(kb!==ja[0]||Gb!==ja[1])z.blendEquationSeparate(kb,
Gb),ja[0]=kb,ja[1]=Gb;Db=pa[0];xb=pa[1];ib=pa[2];Zb=pa[3];if(Db!==Aa[0]||xb!==Aa[1]||ib!==Aa[2]||Zb!==Aa[3])z.blendFuncSeparate(Db,xb,ib,Zb),Aa[0]=Db,Aa[1]=xb,Aa[2]=ib,Aa[3]=Zb;Pb=W.depth_enable;Pb!==K.depth_enable&&(Pb?z.enable(2929):z.disable(2929),K.depth_enable=Pb);mb=W.depth_func;mb!==K.depth_func&&(z.depthFunc(mb),K.depth_func=mb);Ta=Tb[0];Vb=Tb[1];if(Ta!==Ya[0]||Vb!==Ya[1])z.depthRange(Ta,Vb),Ya[0]=Ta,Ya[1]=Vb;qb=W.depth_mask;qb!==K.depth_mask&&(z.depthMask(qb),K.depth_mask=qb);hc=Ra[0];jb=
Ra[1];rb=Ra[2];Ja=Ra[3];if(hc!==na[0]||jb!==na[1]||rb!==na[2]||Ja!==na[3])z.colorMask(hc,jb,rb,Ja),na[0]=hc,na[1]=jb,na[2]=rb,na[3]=Ja;sb=W.frontFace;sb!==K.frontFace&&(z.frontFace(sb),K.frontFace=sb);La=W.lineWidth;La!==K.lineWidth&&(z.lineWidth(La),K.lineWidth=La);eb=W.polygonOffset_enable;eb!==K.polygonOffset_enable&&(eb?z.enable(32823):z.disable(32823),K.polygonOffset_enable=eb);gb=A[0];Ma=A[1];if(gb!==t[0]||Ma!==t[1])z.polygonOffset(gb,Ma),t[0]=gb,t[1]=Ma;lb=W.sample_alpha;lb!==K.sample_alpha&&
(lb?z.enable(32926):z.disable(32926),K.sample_alpha=lb);Wa=W.sample_enable;Wa!==K.sample_enable&&(Wa?z.enable(32928):z.disable(32928),K.sample_enable=Wa);ub=aa[0];tb=aa[1];if(ub!==va[0]||tb!==va[1])z.sampleCoverage(ub,tb),va[0]=ub,va[1]=tb;Pa=W.stencil_enable;Pa!==K.stencil_enable&&(Pa?z.enable(2960):z.disable(2960),K.stencil_enable=Pa);Cc=W.stencil_mask;Cc!==K.stencil_mask&&(z.stencilMask(Cc),K.stencil_mask=Cc);Sa=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Sa!==Y[0]||Kb!==Y[1]||Eb!==Y[2])z.stencilFunc(Sa,Kb,Eb),
Y[0]=Sa,Y[1]=Kb,Y[2]=Eb;Na=Ha[0];Qc=Ha[1];Za=Ha[2];Lb=Ha[3];if(Na!==sa[0]||Qc!==sa[1]||Za!==sa[2]||Lb!==sa[3])z.stencilOpSeparate(Na,Qc,Za,Lb),sa[0]=Na,sa[1]=Qc,sa[2]=Za,sa[3]=Lb;Mb=L[0];nb=L[1];Oa=L[2];$b=L[3];if(Mb!==wa[0]||nb!==wa[1]||Oa!==wa[2]||$b!==wa[3])z.stencilOpSeparate(Mb,nb,Oa,$b),wa[0]=Mb,wa[1]=nb,wa[2]=Oa,wa[3]=$b;Qa=W.scissor_enable;Qa!==K.scissor_enable&&(Qa?z.enable(3089):z.disable(3089),K.scissor_enable=Qa);vb=xa[0];wb=xa[1];Ua=xa[2];ob=xa[3];if(vb!==zc[0]||wb!==zc[1]||Ua!==zc[2]||
ob!==zc[3])z.scissor(vb,wb,Ua,ob),zc[0]=vb,zc[1]=wb,zc[2]=Ua,zc[3]=ob;ec=ya[0];Ac=ya[1];tc=ya[2];bb=ya[3];if(ec!==Fa[0]||Ac!==Fa[1]||tc!==Fa[2]||bb!==Fa[3])z.viewport(ec,Ac,tc,bb),Fa[0]=ec,Fa[1]=Ac,Fa[2]=tc,Fa[3]=bb}z.enable(2884);K.cull_enable=!0;z.cullFace(1029);K.cull_face=1029;if(m=K.profile)r=performance.now(),c.count++;z.useProgram(a.program);Da.setVAO(null);(w=d.position)&&("object"===typeof w||"function"===typeof w)&&(da(w)||J.getBuffer(w)||J.getBuffer(w.buffer)||da(w.buffer)||"constant"in
w&&("number"===typeof w.constant||H(w.constant)))||B.commandRaise(f,k);q=!1;y=null;C=!1;I=E=0;N=1;M=0;Q=5126;X=T=P=ta=0;da(w)?(q=!0,y=J.createStream(34962,w),Q=y.dtype):(y=J.getBuffer(w))?Q=y.dtype:"constant"in w?(N=2,"number"===typeof w.constant?(P=w.constant,T=X=ta=0):(P=0<w.constant.length?w.constant[0]:0,T=1<w.constant.length?w.constant[1]:0,X=2<w.constant.length?w.constant[2]:0,ta=3<w.constant.length?w.constant[3]:0)):(y=da(w.buffer)?J.createStream(34962,w.buffer):J.getBuffer(w.buffer),Q="type"in
w?ga[w.type]:y.dtype,C=!!w.normalized,I=w.size|0,E=w.offset|0,M=w.stride|0);ha=fa.location;U=O[ha];if(1===N){if(U.buffer||z.enableVertexAttribArray(ha),ia=I||3,U.type!==Q||U.size!==ia||U.buffer!==y||U.normalized!==C||U.offset!==E||U.stride!==M)z.bindBuffer(34962,y.buffer),z.vertexAttribPointer(ha,ia,Q,C,M,E),U.type=Q,U.size=ia,U.buffer=y,U.normalized=C,U.offset=E,U.stride=M}else if(U.buffer&&(z.disableVertexAttribArray(ha),U.buffer=null),U.x!==P||U.y!==T||U.z!==X||U.w!==ta)z.vertexAttrib4f(ha,P,T,
X,ta),U.x=P,U.y=T,U.z=X,U.w=ta;(la=d.normal)&&("object"===typeof la||"function"===typeof la)&&(da(la)||J.getBuffer(la)||J.getBuffer(la.buffer)||da(la.buffer)||"constant"in la&&("number"===typeof la.constant||H(la.constant)))||B.commandRaise(g,k);ka=!1;ra=null;Ga=!1;Ca=Ka=0;zd=1;md=0;bd=5126;Ec=od=Lc=pd=0;da(la)?(ka=!0,ra=J.createStream(34962,la),bd=ra.dtype):(ra=J.getBuffer(la))?bd=ra.dtype:"constant"in la?(zd=2,"number"===typeof la.constant?(Lc=la.constant,od=Ec=pd=0):(Lc=0<la.constant.length?la.constant[0]:
0,od=1<la.constant.length?la.constant[1]:0,Ec=2<la.constant.length?la.constant[2]:0,pd=3<la.constant.length?la.constant[3]:0)):(ra=da(la.buffer)?J.createStream(34962,la.buffer):J.getBuffer(la.buffer),bd="type"in la?ga[la.type]:ra.dtype,Ga=!!la.normalized,Ca=la.size|0,Ka=la.offset|0,md=la.stride|0);fd=ma.location;Pc=O[fd];if(1===zd){if(Pc.buffer||z.enableVertexAttribArray(fd),Ic=Ca||3,Pc.type!==bd||Pc.size!==Ic||Pc.buffer!==ra||Pc.normalized!==Ga||Pc.offset!==Ka||Pc.stride!==md)z.bindBuffer(34962,
ra.buffer),z.vertexAttribPointer(fd,Ic,bd,Ga,md,Ka),Pc.type=bd,Pc.size=Ic,Pc.buffer=ra,Pc.normalized=Ga,Pc.offset=Ka,Pc.stride=md}else if(Pc.buffer&&(z.disableVertexAttribArray(fd),Pc.buffer=null),Pc.x!==Lc||Pc.y!==od||Pc.z!==Ec||Pc.w!==pd)z.vertexAttrib4f(fd,Lc,od,Ec,pd),Pc.x=Lc,Pc.y=od,Pc.z=Ec,Pc.w=pd;(Bb=d.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(da(Bb)||J.getBuffer(Bb)||J.getBuffer(Bb.buffer)||da(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||H(Bb.constant)))||B.commandRaise(n,
k);Fb=!1;sc=null;yb=!1;Cb=wc=0;Jc=1;kc=0;Fc=5126;cc=Dc=Xc=gd=0;da(Bb)?(Fb=!0,sc=J.createStream(34962,Bb),Fc=sc.dtype):(sc=J.getBuffer(Bb))?Fc=sc.dtype:"constant"in Bb?(Jc=2,"number"===typeof Bb.constant?(Xc=Bb.constant,Dc=cc=gd=0):(Xc=0<Bb.constant.length?Bb.constant[0]:0,Dc=1<Bb.constant.length?Bb.constant[1]:0,cc=2<Bb.constant.length?Bb.constant[2]:0,gd=3<Bb.constant.length?Bb.constant[3]:0)):(sc=da(Bb.buffer)?J.createStream(34962,Bb.buffer):J.getBuffer(Bb.buffer),Fc="type"in Bb?ga[Bb.type]:sc.dtype,
yb=!!Bb.normalized,Cb=Bb.size|0,wc=Bb.offset|0,kc=Bb.stride|0);Gc=ca.location;nc=O[Gc];if(1===Jc){if(nc.buffer||z.enableVertexAttribArray(Gc),oc=Cb||2,nc.type!==Fc||nc.size!==oc||nc.buffer!==sc||nc.normalized!==yb||nc.offset!==wc||nc.stride!==kc)z.bindBuffer(34962,sc.buffer),z.vertexAttribPointer(Gc,oc,Fc,yb,kc,wc),nc.type=Fc,nc.size=oc,nc.buffer=sc,nc.normalized=yb,nc.offset=wc,nc.stride=kc}else if(nc.buffer&&(z.disableVertexAttribArray(Gc),nc.buffer=null),nc.x!==Xc||nc.y!==Dc||nc.z!==cc||nc.w!==
gd)z.vertexAttrib4f(Gc,Xc,Dc,cc,gd),nc.x=Xc,nc.y=Dc,nc.z=cc,nc.w=gd;lc=p.call(this,u,d,0);H(lc)&&16===lc.length||B.commandRaise(v,k);z.uniformMatrix4fv(V.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(Z[0]=lc[0],Z[1]=lc[1],Z[2]=lc[2],Z[3]=lc[3],Z[4]=lc[4],Z[5]=lc[5],Z[6]=lc[6],Z[7]=lc[7],Z[8]=lc[8],Z[9]=lc[9],Z[10]=lc[10],Z[11]=lc[11],Z[12]=lc[12],Z[13]=lc[13],Z[14]=lc[14],Z[15]=lc[15],Z));dc=u.view;H(dc)&&16===dc.length||B.commandRaise(R,k);z.uniformMatrix4fv(S.location,!1,Array.isArray(dc)||
dc instanceof Float32Array?dc:(ua[0]=dc[0],ua[1]=dc[1],ua[2]=dc[2],ua[3]=dc[3],ua[4]=dc[4],ua[5]=dc[5],ua[6]=dc[6],ua[7]=dc[7],ua[8]=dc[8],ua[9]=dc[9],ua[10]=dc[10],ua[11]=dc[11],ua[12]=dc[12],ua[13]=dc[13],ua[14]=dc[14],ua[15]=dc[15],ua));(fb=d.atlas)&&"framebuffer"===fb._reglType&&(fb=fb.color[0]);"function"===typeof fb&&"texture2d"===fb._reglType||B.commandRaise(G,k);Tc=fb._texture;z.uniform1i(F.location,Tc.bind());zb=d.elements;cb=null;(Nb=da(zb))?cb=qa.createStream(zb):(cb=qa.getElements(zb),
zb&&!cb&&B.commandRaise(x,k));cb&&z.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;pb=cb?cb.vertCount:-1;0<=pb||B.commandRaise(D,k);pb&&(cb?z.drawElements(ab,pb,cb.type,0<<(cb.type-5121>>1)):z.drawArrays(ab,0,pb),K.dirty=!0,Da.setVAO(null),u.view=b,m&&(c.cpuTime+=performance.now()-r),q&&J.destroyStream(y),ka&&J.destroyStream(ra),Fb&&J.destroyStream(sc),Tc.unbind(),Nb&&qa.destroyStream(cb))},scope:function(a,d,b){var h,g,f,l,m,z,A,t,L,n,aa,na,y,p,x,C,E,F,D,v,ea,Y,I,Tb,Ra,G,R,wa,Ha,va,O,sa,
Z,za,S,ja,U,V,X,ca,Ya,ya,pa,ka,Ea,Aa,ma,xa,Fa,ra,oa,Da,Hb,fa,ua,Ba,Ga,Ka,zc,Ca,Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb;h=u.view;g=P.call(this,u,a,b);u.view=g;f=W.cull_enable;W.cull_enable=!0;l=W.cull_face;W.cull_face=1029;if(m=K.profile)z=performance.now(),c.count++;A=a.elements;t=null;(L=da(A))?t=qa.createStream(A):(t=qa.getElements(A),A&&!t&&B.commandRaise(w,k));n=M.elements;M.elements=t;aa=M.offset;M.offset=0;na=
t?t.vertCount:-1;y=M.count;M.count=na;p=t?t.primType:4;x=M.primitive;M.primitive=p;C=a.atlas;E=ta[5];ta[5]=C;F=Q.call(this,u,a,b);D=ta[3];ta[3]=F;v=u.view;ea=ta[4];ta[4]=v;(Y=a.normal)&&("object"===typeof Y||"function"===typeof Y)&&(da(Y)||J.getBuffer(Y)||J.getBuffer(Y.buffer)||da(Y.buffer)||"constant"in Y&&("number"===typeof Y.constant||H(Y.constant)))||B.commandRaise(q,k);I=!1;Tb=null;Ra=0;G=!1;wa=R=0;Ha=1;va=0;O=5126;S=za=Z=sa=0;da(Y)?(I=!0,Tb=J.createStream(34962,Y),O=Tb.dtype):(Tb=J.getBuffer(Y))?
O=Tb.dtype:"constant"in Y?(Ha=2,"number"===typeof Y.constant?(Z=Y.constant,za=S=sa=0):(Z=0<Y.constant.length?Y.constant[0]:0,za=1<Y.constant.length?Y.constant[1]:0,S=2<Y.constant.length?Y.constant[2]:0,sa=3<Y.constant.length?Y.constant[3]:0)):(Tb=da(Y.buffer)?J.createStream(34962,Y.buffer):J.getBuffer(Y.buffer),O="type"in Y?ga[Y.type]:Tb.dtype,G=!!Y.normalized,wa=Y.size|0,R=Y.offset|0,va=Y.stride|0,Ra=Y.divisor|0);ja=N.buffer;N.buffer=Tb;U=N.divisor;N.divisor=Ra;V=N.normalized;N.normalized=G;X=N.offset;
N.offset=R;ca=N.size;N.size=wa;Ya=N.state;N.state=Ha;ya=N.stride;N.stride=va;pa=N.type;N.type=O;ka=N.w;N.w=sa;Ea=N.x;N.x=Z;Aa=N.y;N.y=za;ma=N.z;N.z=S;(xa=a.position)&&("object"===typeof xa||"function"===typeof xa)&&(da(xa)||J.getBuffer(xa)||J.getBuffer(xa.buffer)||da(xa.buffer)||"constant"in xa&&("number"===typeof xa.constant||H(xa.constant)))||B.commandRaise(ia,k);Fa=!1;ra=null;oa=0;Da=!1;fa=Hb=0;ua=1;Ba=0;Ga=5126;Va=Ca=zc=Ka=0;da(xa)?(Fa=!0,ra=J.createStream(34962,xa),Ga=ra.dtype):(ra=J.getBuffer(xa))?
Ga=ra.dtype:"constant"in xa?(ua=2,"number"===typeof xa.constant?(zc=xa.constant,Ca=Va=Ka=0):(zc=0<xa.constant.length?xa.constant[0]:0,Ca=1<xa.constant.length?xa.constant[1]:0,Va=2<xa.constant.length?xa.constant[2]:0,Ka=3<xa.constant.length?xa.constant[3]:0)):(ra=da(xa.buffer)?J.createStream(34962,xa.buffer):J.getBuffer(xa.buffer),Ga="type"in xa?ga[xa.type]:ra.dtype,Da=!!xa.normalized,fa=xa.size|0,Hb=xa.offset|0,Ba=xa.stride|0,oa=xa.divisor|0);qd=e.buffer;e.buffer=ra;Ib=e.divisor;e.divisor=oa;Jb=e.normalized;
e.normalized=Da;pc=e.offset;e.offset=Hb;Ob=e.size;e.size=fa;kb=e.state;e.state=ua;Gb=e.stride;e.stride=Ba;Db=e.type;e.type=Ga;xb=e.w;e.w=Ka;ib=e.x;e.x=zc;Zb=e.y;e.y=Ca;Pb=e.z;e.z=Va;(mb=a.uv)&&("object"===typeof mb||"function"===typeof mb)&&(da(mb)||J.getBuffer(mb)||J.getBuffer(mb.buffer)||da(mb.buffer)||"constant"in mb&&("number"===typeof mb.constant||H(mb.constant)))||B.commandRaise(r,k);Ta=!1;Vb=null;qb=0;hc=!1;rb=jb=0;Ja=1;sb=0;La=5126;lb=Ma=gb=eb=0;da(mb)?(Ta=!0,Vb=J.createStream(34962,mb),La=
Vb.dtype):(Vb=J.getBuffer(mb))?La=Vb.dtype:"constant"in mb?(Ja=2,"number"===typeof mb.constant?(gb=mb.constant,Ma=lb=eb=0):(gb=0<mb.constant.length?mb.constant[0]:0,Ma=1<mb.constant.length?mb.constant[1]:0,lb=2<mb.constant.length?mb.constant[2]:0,eb=3<mb.constant.length?mb.constant[3]:0)):(Vb=da(mb.buffer)?J.createStream(34962,mb.buffer):J.getBuffer(mb.buffer),La="type"in mb?ga[mb.type]:Vb.dtype,hc=!!mb.normalized,rb=mb.size|0,jb=mb.offset|0,sb=mb.stride|0,qb=mb.divisor|0);Wa=T.buffer;T.buffer=Vb;
ub=T.divisor;T.divisor=qb;tb=T.normalized;T.normalized=hc;Pa=T.offset;T.offset=jb;Cc=T.size;T.size=rb;Sa=T.state;T.state=Ja;Kb=T.stride;T.stride=sb;Eb=T.type;T.type=La;Na=T.w;T.w=eb;Qc=T.x;T.x=gb;Za=T.y;T.y=Ma;Lb=T.z;T.z=lb;Mb=la.vert;la.vert=2;nb=la.frag;la.frag=1;K.dirty=!0;d(u,a,b);u.view=h;W.cull_enable=f;W.cull_face=l;m&&(c.cpuTime+=performance.now()-z);L&&qa.destroyStream(t);M.elements=n;M.offset=aa;M.count=y;M.primitive=x;ta[5]=E;ta[3]=D;ta[4]=ea;I&&J.destroyStream(Tb);N.buffer=ja;N.divisor=
U;N.normalized=V;N.offset=X;N.size=ca;N.state=Ya;N.stride=ya;N.type=pa;N.w=ka;N.x=Ea;N.y=Aa;N.z=ma;Fa&&J.destroyStream(ra);e.buffer=qd;e.divisor=Ib;e.normalized=Jb;e.offset=pc;e.size=Ob;e.state=kb;e.stride=Gb;e.type=Db;e.w=xb;e.x=ib;e.y=Zb;e.z=Pb;Ta&&J.destroyStream(Vb);T.buffer=Wa;T.divisor=ub;T.normalized=tb;T.offset=Pa;T.size=Cc;T.state=Sa;T.stride=Kb;T.type=Eb;T.w=Na;T.x=Qc;T.y=Za;T.z=Lb;la.vert=Mb;la.frag=nb;K.dirty=!0},batch:function(a,b){var e,g,f,l,r,n,w;e=u.view;g=m.call(this,u,a,0);u.view=
g;f=oa.next;f!==oa.cur&&(f?z.bindFramebuffer(36160,f.framebuffer):z.bindFramebuffer(36160,null),oa.cur=f);if(K.dirty){var p,q,x,D,v,G,R,N,Q,M,Z,ta,P,T,ha,la,ia,ua,Ca,zd,md,bd,pd,Lc,od,Ec,fd,Pc,Ic,Bb,Fb,sc,yb,wc,Cb,Jc,kc,Fc,gd,Xc,Dc,cc,Gc,nc,oc,lc,dc,fb,Tc,zb,cb,Nb;p=W.dither;p!==K.dither&&(p?z.enable(3024):z.disable(3024),K.dither=p);q=W.blend_enable;q!==K.blend_enable&&(q?z.enable(3042):z.disable(3042),K.blend_enable=q);x=za[0];D=za[1];v=za[2];G=za[3];if(x!==ea[0]||D!==ea[1]||v!==ea[2]||G!==ea[3])z.blendColor(x,
D,v,G),ea[0]=x,ea[1]=D,ea[2]=v,ea[3]=G;R=Ea[0];N=Ea[1];if(R!==ja[0]||N!==ja[1])z.blendEquationSeparate(R,N),ja[0]=R,ja[1]=N;Q=pa[0];M=pa[1];Z=pa[2];ta=pa[3];if(Q!==Aa[0]||M!==Aa[1]||Z!==Aa[2]||ta!==Aa[3])z.blendFuncSeparate(Q,M,Z,ta),Aa[0]=Q,Aa[1]=M,Aa[2]=Z,Aa[3]=ta;P=W.depth_enable;P!==K.depth_enable&&(P?z.enable(2929):z.disable(2929),K.depth_enable=P);T=W.depth_func;T!==K.depth_func&&(z.depthFunc(T),K.depth_func=T);ha=Tb[0];la=Tb[1];if(ha!==Ya[0]||la!==Ya[1])z.depthRange(ha,la),Ya[0]=ha,Ya[1]=la;
ia=W.depth_mask;ia!==K.depth_mask&&(z.depthMask(ia),K.depth_mask=ia);ua=Ra[0];Ca=Ra[1];zd=Ra[2];md=Ra[3];if(ua!==na[0]||Ca!==na[1]||zd!==na[2]||md!==na[3])z.colorMask(ua,Ca,zd,md),na[0]=ua,na[1]=Ca,na[2]=zd,na[3]=md;bd=W.frontFace;bd!==K.frontFace&&(z.frontFace(bd),K.frontFace=bd);pd=W.lineWidth;pd!==K.lineWidth&&(z.lineWidth(pd),K.lineWidth=pd);Lc=W.polygonOffset_enable;Lc!==K.polygonOffset_enable&&(Lc?z.enable(32823):z.disable(32823),K.polygonOffset_enable=Lc);od=A[0];Ec=A[1];if(od!==t[0]||Ec!==
t[1])z.polygonOffset(od,Ec),t[0]=od,t[1]=Ec;fd=W.sample_alpha;fd!==K.sample_alpha&&(fd?z.enable(32926):z.disable(32926),K.sample_alpha=fd);Pc=W.sample_enable;Pc!==K.sample_enable&&(Pc?z.enable(32928):z.disable(32928),K.sample_enable=Pc);Ic=aa[0];Bb=aa[1];if(Ic!==va[0]||Bb!==va[1])z.sampleCoverage(Ic,Bb),va[0]=Ic,va[1]=Bb;Fb=W.stencil_enable;Fb!==K.stencil_enable&&(Fb?z.enable(2960):z.disable(2960),K.stencil_enable=Fb);sc=W.stencil_mask;sc!==K.stencil_mask&&(z.stencilMask(sc),K.stencil_mask=sc);yb=
Hb[0];wc=Hb[1];Cb=Hb[2];if(yb!==Y[0]||wc!==Y[1]||Cb!==Y[2])z.stencilFunc(yb,wc,Cb),Y[0]=yb,Y[1]=wc,Y[2]=Cb;Jc=Ha[0];kc=Ha[1];Fc=Ha[2];gd=Ha[3];if(Jc!==sa[0]||kc!==sa[1]||Fc!==sa[2]||gd!==sa[3])z.stencilOpSeparate(Jc,kc,Fc,gd),sa[0]=Jc,sa[1]=kc,sa[2]=Fc,sa[3]=gd;Xc=L[0];Dc=L[1];cc=L[2];Gc=L[3];if(Xc!==wa[0]||Dc!==wa[1]||cc!==wa[2]||Gc!==wa[3])z.stencilOpSeparate(Xc,Dc,cc,Gc),wa[0]=Xc,wa[1]=Dc,wa[2]=cc,wa[3]=Gc;nc=W.scissor_enable;nc!==K.scissor_enable&&(nc?z.enable(3089):z.disable(3089),K.scissor_enable=
nc);oc=xa[0];lc=xa[1];dc=xa[2];fb=xa[3];if(oc!==zc[0]||lc!==zc[1]||dc!==zc[2]||fb!==zc[3])z.scissor(oc,lc,dc,fb),zc[0]=oc,zc[1]=lc,zc[2]=dc,zc[3]=fb;Tc=ya[0];zb=ya[1];cb=ya[2];Nb=ya[3];if(Tc!==Fa[0]||zb!==Fa[1]||cb!==Fa[2]||Nb!==Fa[3])z.viewport(Tc,zb,cb,Nb),Fa[0]=Tc,Fa[1]=zb,Fa[2]=cb,Fa[3]=Nb}z.enable(2884);K.cull_enable=!0;z.cullFace(1029);K.cull_face=1029;if(l=K.profile)r=performance.now(),c.count+=b;z.useProgram(X.program);var ab,pb;Da.setVAO(null);ab=I.call(this,u,w,n);H(ab)&&16===ab.length||
B.commandRaise(C,k);z.uniformMatrix4fv(V.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ka[0]=ab[0],Ka[1]=ab[1],Ka[2]=ab[2],Ka[3]=ab[3],Ka[4]=ab[4],Ka[5]=ab[5],Ka[6]=ab[6],Ka[7]=ab[7],Ka[8]=ab[8],Ka[9]=ab[9],Ka[10]=ab[10],Ka[11]=ab[11],Ka[12]=ab[12],Ka[13]=ab[13],Ka[14]=ab[14],Ka[15]=ab[15],Ka));pb=u.view;H(pb)&&16===pb.length||B.commandRaise(h,k);z.uniformMatrix4fv(S.location,!1,Array.isArray(pb)||pb instanceof Float32Array?pb:(Ga[0]=pb[0],Ga[1]=pb[1],Ga[2]=pb[2],Ga[3]=pb[3],Ga[4]=
pb[4],Ga[5]=pb[5],Ga[6]=pb[6],Ga[7]=pb[7],Ga[8]=pb[8],Ga[9]=pb[9],Ga[10]=pb[10],Ga[11]=pb[11],Ga[12]=pb[12],Ga[13]=pb[13],Ga[14]=pb[14],Ga[15]=pb[15],Ga));for(n=0;n<b;++n){w=a[n];var Va,qd,Ib,Jb,pc,Ob,kb,Gb,Db,xb,ib,Zb,Pb,mb,Ta,Vb,qb,hc,jb,rb,Ja,sb,La,eb,gb,Ma,lb,Wa,ub,tb,Pa,Cc,Sa,Kb,Eb,Na,Qc,Za,Lb,Mb,nb,Oa,$b,Qa,vb,wb,Ua,ob,ec,Ac,tc,bb,ic,wd,Xa;(Va=w.position)&&("object"===typeof Va||"function"===typeof Va)&&(da(Va)||J.getBuffer(Va)||J.getBuffer(Va.buffer)||da(Va.buffer)||"constant"in Va&&("number"===
typeof Va.constant||H(Va.constant)))||B.commandRaise(E,k);qd=!1;Ib=null;Jb=!1;Ob=pc=0;kb=1;Gb=0;Db=5126;Pb=Zb=ib=xb=0;da(Va)?(qd=!0,Ib=J.createStream(34962,Va),Db=Ib.dtype):(Ib=J.getBuffer(Va))?Db=Ib.dtype:"constant"in Va?(kb=2,"number"===typeof Va.constant?(ib=Va.constant,Zb=Pb=xb=0):(ib=0<Va.constant.length?Va.constant[0]:0,Zb=1<Va.constant.length?Va.constant[1]:0,Pb=2<Va.constant.length?Va.constant[2]:0,xb=3<Va.constant.length?Va.constant[3]:0)):(Ib=da(Va.buffer)?J.createStream(34962,Va.buffer):
J.getBuffer(Va.buffer),Db="type"in Va?ga[Va.type]:Ib.dtype,Jb=!!Va.normalized,Ob=Va.size|0,pc=Va.offset|0,Gb=Va.stride|0);mb=fa.location;Ta=O[mb];if(1===kb){if(Ta.buffer||z.enableVertexAttribArray(mb),Vb=Ob||3,Ta.type!==Db||Ta.size!==Vb||Ta.buffer!==Ib||Ta.normalized!==Jb||Ta.offset!==pc||Ta.stride!==Gb)z.bindBuffer(34962,Ib.buffer),z.vertexAttribPointer(mb,Vb,Db,Jb,Gb,pc),Ta.type=Db,Ta.size=Vb,Ta.buffer=Ib,Ta.normalized=Jb,Ta.offset=pc,Ta.stride=Gb}else if(Ta.buffer&&(z.disableVertexAttribArray(mb),
Ta.buffer=null),Ta.x!==ib||Ta.y!==Zb||Ta.z!==Pb||Ta.w!==xb)z.vertexAttrib4f(mb,ib,Zb,Pb,xb),Ta.x=ib,Ta.y=Zb,Ta.z=Pb,Ta.w=xb;(qb=w.normal)&&("object"===typeof qb||"function"===typeof qb)&&(da(qb)||J.getBuffer(qb)||J.getBuffer(qb.buffer)||da(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||H(qb.constant)))||B.commandRaise(y,k);hc=!1;jb=null;rb=!1;sb=Ja=0;La=1;eb=0;gb=5126;ub=Wa=lb=Ma=0;da(qb)?(hc=!0,jb=J.createStream(34962,qb),gb=jb.dtype):(jb=J.getBuffer(qb))?gb=jb.dtype:"constant"in qb?
(La=2,"number"===typeof qb.constant?(lb=qb.constant,Wa=ub=Ma=0):(lb=0<qb.constant.length?qb.constant[0]:0,Wa=1<qb.constant.length?qb.constant[1]:0,ub=2<qb.constant.length?qb.constant[2]:0,Ma=3<qb.constant.length?qb.constant[3]:0)):(jb=da(qb.buffer)?J.createStream(34962,qb.buffer):J.getBuffer(qb.buffer),gb="type"in qb?ga[qb.type]:jb.dtype,rb=!!qb.normalized,sb=qb.size|0,Ja=qb.offset|0,eb=qb.stride|0);tb=ma.location;Pa=O[tb];if(1===La){if(Pa.buffer||z.enableVertexAttribArray(tb),Cc=sb||3,Pa.type!==
gb||Pa.size!==Cc||Pa.buffer!==jb||Pa.normalized!==rb||Pa.offset!==Ja||Pa.stride!==eb)z.bindBuffer(34962,jb.buffer),z.vertexAttribPointer(tb,Cc,gb,rb,eb,Ja),Pa.type=gb,Pa.size=Cc,Pa.buffer=jb,Pa.normalized=rb,Pa.offset=Ja,Pa.stride=eb}else if(Pa.buffer&&(z.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Wa||Pa.z!==ub||Pa.w!==Ma)z.vertexAttrib4f(tb,lb,Wa,ub,Ma),Pa.x=lb,Pa.y=Wa,Pa.z=ub,Pa.w=Ma;(Sa=w.uv)&&("object"===typeof Sa||"function"===typeof Sa)&&(da(Sa)||J.getBuffer(Sa)||J.getBuffer(Sa.buffer)||
da(Sa.buffer)||"constant"in Sa&&("number"===typeof Sa.constant||H(Sa.constant)))||B.commandRaise(ra,k);Kb=!1;Eb=null;Na=!1;Za=Qc=0;Lb=1;Mb=0;nb=5126;vb=Qa=$b=Oa=0;da(Sa)?(Kb=!0,Eb=J.createStream(34962,Sa),nb=Eb.dtype):(Eb=J.getBuffer(Sa))?nb=Eb.dtype:"constant"in Sa?(Lb=2,"number"===typeof Sa.constant?($b=Sa.constant,Qa=vb=Oa=0):($b=0<Sa.constant.length?Sa.constant[0]:0,Qa=1<Sa.constant.length?Sa.constant[1]:0,vb=2<Sa.constant.length?Sa.constant[2]:0,Oa=3<Sa.constant.length?Sa.constant[3]:0)):(Eb=
da(Sa.buffer)?J.createStream(34962,Sa.buffer):J.getBuffer(Sa.buffer),nb="type"in Sa?ga[Sa.type]:Eb.dtype,Na=!!Sa.normalized,Za=Sa.size|0,Qc=Sa.offset|0,Mb=Sa.stride|0);wb=ca.location;Ua=O[wb];if(1===Lb){if(Ua.buffer||z.enableVertexAttribArray(wb),ob=Za||2,Ua.type!==nb||Ua.size!==ob||Ua.buffer!==Eb||Ua.normalized!==Na||Ua.offset!==Qc||Ua.stride!==Mb)z.bindBuffer(34962,Eb.buffer),z.vertexAttribPointer(wb,ob,nb,Na,Mb,Qc),Ua.type=nb,Ua.size=ob,Ua.buffer=Eb,Ua.normalized=Na,Ua.offset=Qc,Ua.stride=Mb}else if(Ua.buffer&&
(z.disableVertexAttribArray(wb),Ua.buffer=null),Ua.x!==$b||Ua.y!==Qa||Ua.z!==vb||Ua.w!==Oa)z.vertexAttrib4f(wb,$b,Qa,vb,Oa),Ua.x=$b,Ua.y=Qa,Ua.z=vb,Ua.w=Oa;(ec=w.atlas)&&"framebuffer"===ec._reglType&&(ec=ec.color[0]);"function"===typeof ec&&"texture2d"===ec._reglType||B.commandRaise(U,k);Ac=ec._texture;z.uniform1i(F.location,Ac.bind());tc=w.elements;bb=null;(ic=da(tc))?bb=qa.createStream(tc):(bb=qa.getElements(tc),tc&&!bb&&B.commandRaise(d,k));bb&&z.bindBuffer(34963,bb.buffer.buffer);wd=bb?bb.primType:
4;Xa=bb?bb.vertCount:-1;0<=Xa||B.commandRaise(ka,k);Xa&&(bb?z.drawElements(wd,Xa,bb.type,0<<(bb.type-5121>>1)):z.drawArrays(wd,0,Xa),qd&&J.destroyStream(Ib),hc&&J.destroyStream(jb),Kb&&J.destroyStream(Eb),Ac.unbind(),ic&&qa.destroyStream(bb))}K.dirty=!0;Da.setVAO(null);u.view=e;l&&(c.cpuTime+=performance.now()-r)}}},"$7,color,position":function(b,B,k,c,l,a,f,g,n,p){var v,R,G,x,D,P,w,Q,q,N,ia,e,r,T,m,X,E,y,ra,I,C,h,U,d,ka,F,ma,fa,V,ca,S,O,J,u,K,M;v=b.attributes;R=b.context;G=b.current;x=b.draw;D=b.elements;
P=b.framebuffer;w=b.gl;Q=b.next;q=b.shader;N=b.uniforms;ia=b.vao;e=Q.blend_color;r=G.blend_color;T=Q.blend_equation;m=G.blend_equation;X=Q.blend_func;E=G.blend_func;y=Q.colorMask;ra=G.colorMask;I=Q.depth_range;C=G.depth_range;h=Q.polygonOffset_offset;U=G.polygonOffset_offset;d=Q.sample_coverage;ka=G.sample_coverage;F=Q.scissor_box;ma=G.scissor_box;fa=Q.stencil_func;V=G.stencil_func;ca=Q.stencil_opBack;S=G.stencil_opBack;O=Q.stencil_opFront;J=G.stencil_opFront;u=Q.viewport;K=G.viewport;M=[1,0,0,1];
return{draw:function(b){var k,g,f,B;b=P.next;b!==P.cur&&(b?w.bindFramebuffer(36160,b.framebuffer):w.bindFramebuffer(36160,null),P.cur=b);if(G.dirty){b=Q.dither;b!==G.dither&&(b?w.enable(3024):w.disable(3024),G.dither=b);b=Q.blend_enable;b!==G.blend_enable&&(b?w.enable(3042):w.disable(3042),G.blend_enable=b);b=e[0];g=e[1];f=e[2];B=e[3];if(b!==r[0]||g!==r[1]||f!==r[2]||B!==r[3])w.blendColor(b,g,f,B),r[0]=b,r[1]=g,r[2]=f,r[3]=B;b=T[0];g=T[1];if(b!==m[0]||g!==m[1])w.blendEquationSeparate(b,g),m[0]=b,
m[1]=g;b=X[0];g=X[1];f=X[2];B=X[3];if(b!==E[0]||g!==E[1]||f!==E[2]||B!==E[3])w.blendFuncSeparate(b,g,f,B),E[0]=b,E[1]=g,E[2]=f,E[3]=B;b=Q.depth_enable;b!==G.depth_enable&&(b?w.enable(2929):w.disable(2929),G.depth_enable=b);b=Q.depth_func;b!==G.depth_func&&(w.depthFunc(b),G.depth_func=b);b=I[0];g=I[1];if(b!==C[0]||g!==C[1])w.depthRange(b,g),C[0]=b,C[1]=g;b=Q.depth_mask;b!==G.depth_mask&&(w.depthMask(b),G.depth_mask=b);b=y[0];g=y[1];f=y[2];B=y[3];if(b!==ra[0]||g!==ra[1]||f!==ra[2]||B!==ra[3])w.colorMask(b,
g,f,B),ra[0]=b,ra[1]=g,ra[2]=f,ra[3]=B;b=Q.cull_enable;b!==G.cull_enable&&(b?w.enable(2884):w.disable(2884),G.cull_enable=b);b=Q.cull_face;b!==G.cull_face&&(w.cullFace(b),G.cull_face=b);b=Q.frontFace;b!==G.frontFace&&(w.frontFace(b),G.frontFace=b);b=Q.lineWidth;b!==G.lineWidth&&(w.lineWidth(b),G.lineWidth=b);b=Q.polygonOffset_enable;b!==G.polygonOffset_enable&&(b?w.enable(32823):w.disable(32823),G.polygonOffset_enable=b);b=h[0];g=h[1];if(b!==U[0]||g!==U[1])w.polygonOffset(b,g),U[0]=b,U[1]=g;b=Q.sample_alpha;
b!==G.sample_alpha&&(b?w.enable(32926):w.disable(32926),G.sample_alpha=b);b=Q.sample_enable;b!==G.sample_enable&&(b?w.enable(32928):w.disable(32928),G.sample_enable=b);b=d[0];g=d[1];if(b!==ka[0]||g!==ka[1])w.sampleCoverage(b,g),ka[0]=b,ka[1]=g;b=Q.stencil_enable;b!==G.stencil_enable&&(b?w.enable(2960):w.disable(2960),G.stencil_enable=b);b=Q.stencil_mask;b!==G.stencil_mask&&(w.stencilMask(b),G.stencil_mask=b);b=fa[0];g=fa[1];f=fa[2];if(b!==V[0]||g!==V[1]||f!==V[2])w.stencilFunc(b,g,f),V[0]=b,V[1]=
g,V[2]=f;b=O[0];g=O[1];f=O[2];B=O[3];if(b!==J[0]||g!==J[1]||f!==J[2]||B!==J[3])w.stencilOpSeparate(b,g,f,B),J[0]=b,J[1]=g,J[2]=f,J[3]=B;b=ca[0];g=ca[1];f=ca[2];B=ca[3];if(b!==S[0]||g!==S[1]||f!==S[2]||B!==S[3])w.stencilOpSeparate(b,g,f,B),S[0]=b,S[1]=g,S[2]=f,S[3]=B;b=Q.scissor_enable;b!==G.scissor_enable&&(b?w.enable(3089):w.disable(3089),G.scissor_enable=b);b=F[0];g=F[1];f=F[2];B=F[3];if(b!==ma[0]||g!==ma[1]||f!==ma[2]||B!==ma[3])w.scissor(b,g,f,B),ma[0]=b,ma[1]=g,ma[2]=f,ma[3]=B;b=u[0];g=u[1];
f=u[2];B=u[3];if(b!==K[0]||g!==K[1]||f!==K[2]||B!==K[3])w.viewport(b,g,f,B),K[0]=b,K[1]=g,K[2]=f,K[3]=B;G.dirty=!1}if(b=G.profile)k=performance.now(),c.count++;w.useProgram(l.program);ia.setVAO(null);g=p.location;f=v[g];f.buffer||w.enableVertexAttribArray(g);if(f.type!==a.dtype||2!==f.size||f.buffer!==a||!1!==f.normalized||0!==f.offset||0!==f.stride)w.bindBuffer(34962,a.buffer),w.vertexAttribPointer(g,2,a.dtype,!1,0,0),f.type=a.dtype,f.size=2,f.buffer=a,f.normalized=!1,f.offset=0,f.stride=0;w.uniform4f(n.location,
1,0,0,1);(g=x.elements)?w.bindBuffer(34963,g.buffer.buffer):ia.currentVAO&&(g=D.getElements(ia.currentVAO.elements))&&w.bindBuffer(34963,g.buffer.buffer);f=x.primitive;B=x.offset;g?w.drawElements(f,3,g.type,B<<(g.type-5121>>1)):w.drawArrays(f,B,3);ia.setVAO(null);b&&(c.cpuTime+=performance.now()-k)},scope:function(b,d,e){var h,g,k,l,m,u,r,B,n,w,p,y,C,na,E,F,A,t;if(h=G.profile)g=performance.now(),c.count++;k=x.count;x.count=3;l=N[3];N[3]=M;m=f.buffer;f.buffer=a;u=f.divisor;f.divisor=0;r=f.normalized;
f.normalized=!1;B=f.offset;f.offset=0;n=f.size;f.size=0;w=f.state;f.state=1;p=f.stride;f.stride=0;y=f.type;f.type=a.dtype;C=f.w;f.w=0;na=f.x;f.x=0;E=f.y;f.y=0;F=f.z;f.z=0;A=q.vert;q.vert=2;t=q.frag;q.frag=1;d(R,b,e);h&&(c.cpuTime+=performance.now()-g);x.count=k;N[3]=l;f.buffer=m;f.divisor=u;f.normalized=r;f.offset=B;f.size=n;f.state=w;f.stride=p;f.type=y;f.w=C;f.x=na;f.y=E;f.z=F;q.vert=A;q.frag=t},batch:function(b,k){var f,l,B;f=P.next;f!==P.cur&&(f?w.bindFramebuffer(36160,f.framebuffer):w.bindFramebuffer(36160,
null),P.cur=f);if(G.dirty){var q,R;f=Q.dither;f!==G.dither&&(f?w.enable(3024):w.disable(3024),G.dither=f);f=Q.blend_enable;f!==G.blend_enable&&(f?w.enable(3042):w.disable(3042),G.blend_enable=f);f=e[0];B=e[1];q=e[2];R=e[3];if(f!==r[0]||B!==r[1]||q!==r[2]||R!==r[3])w.blendColor(f,B,q,R),r[0]=f,r[1]=B,r[2]=q,r[3]=R;f=T[0];B=T[1];if(f!==m[0]||B!==m[1])w.blendEquationSeparate(f,B),m[0]=f,m[1]=B;f=X[0];B=X[1];q=X[2];R=X[3];if(f!==E[0]||B!==E[1]||q!==E[2]||R!==E[3])w.blendFuncSeparate(f,B,q,R),E[0]=f,E[1]=
B,E[2]=q,E[3]=R;f=Q.depth_enable;f!==G.depth_enable&&(f?w.enable(2929):w.disable(2929),G.depth_enable=f);f=Q.depth_func;f!==G.depth_func&&(w.depthFunc(f),G.depth_func=f);f=I[0];B=I[1];if(f!==C[0]||B!==C[1])w.depthRange(f,B),C[0]=f,C[1]=B;f=Q.depth_mask;f!==G.depth_mask&&(w.depthMask(f),G.depth_mask=f);f=y[0];B=y[1];q=y[2];R=y[3];if(f!==ra[0]||B!==ra[1]||q!==ra[2]||R!==ra[3])w.colorMask(f,B,q,R),ra[0]=f,ra[1]=B,ra[2]=q,ra[3]=R;f=Q.cull_enable;f!==G.cull_enable&&(f?w.enable(2884):w.disable(2884),G.cull_enable=
f);f=Q.cull_face;f!==G.cull_face&&(w.cullFace(f),G.cull_face=f);f=Q.frontFace;f!==G.frontFace&&(w.frontFace(f),G.frontFace=f);f=Q.lineWidth;f!==G.lineWidth&&(w.lineWidth(f),G.lineWidth=f);f=Q.polygonOffset_enable;f!==G.polygonOffset_enable&&(f?w.enable(32823):w.disable(32823),G.polygonOffset_enable=f);f=h[0];B=h[1];if(f!==U[0]||B!==U[1])w.polygonOffset(f,B),U[0]=f,U[1]=B;f=Q.sample_alpha;f!==G.sample_alpha&&(f?w.enable(32926):w.disable(32926),G.sample_alpha=f);f=Q.sample_enable;f!==G.sample_enable&&
(f?w.enable(32928):w.disable(32928),G.sample_enable=f);f=d[0];B=d[1];if(f!==ka[0]||B!==ka[1])w.sampleCoverage(f,B),ka[0]=f,ka[1]=B;f=Q.stencil_enable;f!==G.stencil_enable&&(f?w.enable(2960):w.disable(2960),G.stencil_enable=f);f=Q.stencil_mask;f!==G.stencil_mask&&(w.stencilMask(f),G.stencil_mask=f);f=fa[0];B=fa[1];q=fa[2];if(f!==V[0]||B!==V[1]||q!==V[2])w.stencilFunc(f,B,q),V[0]=f,V[1]=B,V[2]=q;f=O[0];B=O[1];q=O[2];R=O[3];if(f!==J[0]||B!==J[1]||q!==J[2]||R!==J[3])w.stencilOpSeparate(f,B,q,R),J[0]=
f,J[1]=B,J[2]=q,J[3]=R;f=ca[0];B=ca[1];q=ca[2];R=ca[3];if(f!==S[0]||B!==S[1]||q!==S[2]||R!==S[3])w.stencilOpSeparate(f,B,q,R),S[0]=f,S[1]=B,S[2]=q,S[3]=R;f=Q.scissor_enable;f!==G.scissor_enable&&(f?w.enable(3089):w.disable(3089),G.scissor_enable=f);f=F[0];B=F[1];q=F[2];R=F[3];if(f!==ma[0]||B!==ma[1]||q!==ma[2]||R!==ma[3])w.scissor(f,B,q,R),ma[0]=f,ma[1]=B,ma[2]=q,ma[3]=R;f=u[0];B=u[1];q=u[2];R=u[3];if(f!==K[0]||B!==K[1]||q!==K[2]||R!==K[3])w.viewport(f,B,q,R),K[0]=f,K[1]=B,K[2]=q,K[3]=R;G.dirty=!1}if(f=
G.profile)l=performance.now(),c.count+=k;w.useProgram(g.program);var N;ia.setVAO(null);B=p.location;q=v[B];q.buffer||w.enableVertexAttribArray(B);if(q.type!==a.dtype||2!==q.size||q.buffer!==a||!1!==q.normalized||0!==q.offset||0!==q.stride)w.bindBuffer(34962,a.buffer),w.vertexAttribPointer(B,2,a.dtype,!1,0,0),q.type=a.dtype,q.size=2,q.buffer=a,q.normalized=!1,q.offset=0,q.stride=0;w.uniform4f(n.location,1,0,0,1);(q=x.elements)?w.bindBuffer(34963,q.buffer.buffer):ia.currentVAO&&(q=D.getElements(ia.currentVAO.elements))&&
w.bindBuffer(34963,q.buffer.buffer);R=x.primitive;N=x.offset;for(B=0;B<k;++B)q?w.drawElements(R,3,q.type,N<<(q.type-5121>>1)):w.drawArrays(R,N,3);ia.setVAO(null);f&&(c.cpuTime+=performance.now()-l)}}},"$19,angle,color,offset,position":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia,e,r,T){var m,X,E,y,ra,I,C,h,U,d,ka,F,ma,fa,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa;m=b.attributes;X=b.context;E=b.current;y=b.draw;ra=b.elements;I=b.framebuffer;C=b.gl;h=b.isArrayLike;U=b.next;d=b.shader;
ka=b.uniforms;F=b.vao;ma=U.blend_color;fa=E.blend_color;V=U.blend_equation;ca=E.blend_equation;S=U.blend_func;O=E.blend_func;J=U.colorMask;u=E.colorMask;K=U.depth_range;M=E.depth_range;qa=U.polygonOffset_offset;oa=E.polygonOffset_offset;z=U.sample_coverage;H=E.sample_coverage;da=U.scissor_box;W=E.scissor_box;la=U.stencil_func;ta=E.stencil_func;Da=U.stencil_opBack;za=E.stencil_opBack;ea=U.stencil_opFront;Ea=E.stencil_opFront;ja=U.viewport;pa=E.viewport;return{draw:function(b){var d,w,q,x;d=I.next;
d!==I.cur&&(d?C.bindFramebuffer(36160,d.framebuffer):C.bindFramebuffer(36160,null),I.cur=d);if(E.dirty){var A;d=U.dither;d!==E.dither&&(d?C.enable(3024):C.disable(3024),E.dither=d);d=U.blend_enable;d!==E.blend_enable&&(d?C.enable(3042):C.disable(3042),E.blend_enable=d);d=ma[0];q=ma[1];x=ma[2];A=ma[3];if(d!==fa[0]||q!==fa[1]||x!==fa[2]||A!==fa[3])C.blendColor(d,q,x,A),fa[0]=d,fa[1]=q,fa[2]=x,fa[3]=A;d=V[0];q=V[1];if(d!==ca[0]||q!==ca[1])C.blendEquationSeparate(d,q),ca[0]=d,ca[1]=q;d=S[0];q=S[1];x=
S[2];A=S[3];if(d!==O[0]||q!==O[1]||x!==O[2]||A!==O[3])C.blendFuncSeparate(d,q,x,A),O[0]=d,O[1]=q,O[2]=x,O[3]=A;d=U.depth_func;d!==E.depth_func&&(C.depthFunc(d),E.depth_func=d);d=K[0];q=K[1];if(d!==M[0]||q!==M[1])C.depthRange(d,q),M[0]=d,M[1]=q;d=U.depth_mask;d!==E.depth_mask&&(C.depthMask(d),E.depth_mask=d);d=J[0];q=J[1];x=J[2];A=J[3];if(d!==u[0]||q!==u[1]||x!==u[2]||A!==u[3])C.colorMask(d,q,x,A),u[0]=d,u[1]=q,u[2]=x,u[3]=A;d=U.cull_enable;d!==E.cull_enable&&(d?C.enable(2884):C.disable(2884),E.cull_enable=
d);d=U.cull_face;d!==E.cull_face&&(C.cullFace(d),E.cull_face=d);d=U.frontFace;d!==E.frontFace&&(C.frontFace(d),E.frontFace=d);d=U.lineWidth;d!==E.lineWidth&&(C.lineWidth(d),E.lineWidth=d);d=U.polygonOffset_enable;d!==E.polygonOffset_enable&&(d?C.enable(32823):C.disable(32823),E.polygonOffset_enable=d);d=qa[0];q=qa[1];if(d!==oa[0]||q!==oa[1])C.polygonOffset(d,q),oa[0]=d,oa[1]=q;d=U.sample_alpha;d!==E.sample_alpha&&(d?C.enable(32926):C.disable(32926),E.sample_alpha=d);d=U.sample_enable;d!==E.sample_enable&&
(d?C.enable(32928):C.disable(32928),E.sample_enable=d);d=z[0];q=z[1];if(d!==H[0]||q!==H[1])C.sampleCoverage(d,q),H[0]=d,H[1]=q;d=U.stencil_enable;d!==E.stencil_enable&&(d?C.enable(2960):C.disable(2960),E.stencil_enable=d);d=U.stencil_mask;d!==E.stencil_mask&&(C.stencilMask(d),E.stencil_mask=d);d=la[0];q=la[1];x=la[2];if(d!==ta[0]||q!==ta[1]||x!==ta[2])C.stencilFunc(d,q,x),ta[0]=d,ta[1]=q,ta[2]=x;d=ea[0];q=ea[1];x=ea[2];A=ea[3];if(d!==Ea[0]||q!==Ea[1]||x!==Ea[2]||A!==Ea[3])C.stencilOpSeparate(d,q,
x,A),Ea[0]=d,Ea[1]=q,Ea[2]=x,Ea[3]=A;d=Da[0];q=Da[1];x=Da[2];A=Da[3];if(d!==za[0]||q!==za[1]||x!==za[2]||A!==za[3])C.stencilOpSeparate(d,q,x,A),za[0]=d,za[1]=q,za[2]=x,za[3]=A;d=U.scissor_enable;d!==E.scissor_enable&&(d?C.enable(3089):C.disable(3089),E.scissor_enable=d);d=da[0];q=da[1];x=da[2];A=da[3];if(d!==W[0]||q!==W[1]||x!==W[2]||A!==W[3])C.scissor(d,q,x,A),W[0]=d,W[1]=q,W[2]=x,W[3]=A;d=ja[0];q=ja[1];x=ja[2];A=ja[3];if(d!==pa[0]||q!==pa[1]||x!==pa[2]||A!==pa[3])C.viewport(d,q,x,A),pa[0]=d,pa[1]=
q,pa[2]=x,pa[3]=A}C.disable(2929);E.depth_enable=!1;if(d=E.profile)w=performance.now(),c.count++;C.useProgram(l.program);F.setVAO(null);q=T.location;x=m[q];x.buffer||C.enableVertexAttribArray(q);if(x.type!==a.dtype||2!==x.size||x.buffer!==a||!1!==x.normalized||0!==x.offset||0!==x.stride)C.bindBuffer(34962,a.buffer),C.vertexAttribPointer(q,2,a.dtype,!1,0,0),x.type=a.dtype,x.size=2,x.buffer=a,x.normalized=!1,x.offset=0,x.stride=0;q=f.call(this,X,b,0);"number"!==typeof q&&B.commandRaise(g,k);C.uniform1f(ia.location,
q);q=b.offset;h(q)&&2===q.length||B.commandRaise(n,k);C.uniform2f(r.location,q[0],q[1]);b=p.call(this,X,b,0);h(b)&&4===b.length||B.commandRaise(v,k);C.uniform4f(e.location,b[0],b[1],b[2],b[3]);(b=y.elements)?C.bindBuffer(34963,b.buffer.buffer):F.currentVAO&&(b=ra.getElements(F.currentVAO.elements))&&C.bindBuffer(34963,b.buffer.buffer);q=y.primitive;x=y.offset;b?C.drawElements(q,3,b.type,x<<(b.type-5121>>1)):C.drawArrays(q,x,3);E.dirty=!0;F.setVAO(null);d&&(c.cpuTime+=performance.now()-w)},scope:function(b,
e,f){var h,g,k,l,m,u,B,r,z,q,n,w,p,C,F,D,v,ea,I,H,W;h=U.depth_enable;U.depth_enable=!1;if(g=E.profile)k=performance.now(),c.count++;l=y.count;y.count=3;m=R.call(this,X,b,f);u=ka[3];ka[3]=m;B=G.call(this,X,b,f);m=ka[5];ka[5]=B;r=b.offset;B=ka[4];ka[4]=r;r=x.buffer;x.buffer=a;z=x.divisor;x.divisor=0;q=x.normalized;x.normalized=!1;n=x.offset;x.offset=0;w=x.size;x.size=0;p=x.state;x.state=1;C=x.stride;x.stride=0;F=x.type;x.type=a.dtype;D=x.w;x.w=0;v=x.x;x.x=0;ea=x.y;x.y=0;I=x.z;x.z=0;H=d.vert;d.vert=
2;W=d.frag;d.frag=1;E.dirty=!0;e(X,b,f);U.depth_enable=h;g&&(c.cpuTime+=performance.now()-k);y.count=l;ka[3]=u;ka[5]=m;ka[4]=B;x.buffer=r;x.divisor=z;x.normalized=q;x.offset=n;x.size=w;x.state=p;x.stride=C;x.type=F;x.w=D;x.x=v;x.y=ea;x.z=I;d.vert=H;d.frag=W;E.dirty=!0},batch:function(d,b){var f,g,l,A;f=I.next;f!==I.cur&&(f?C.bindFramebuffer(36160,f.framebuffer):C.bindFramebuffer(36160,null),I.cur=f);if(E.dirty){var t,n,p;f=U.dither;f!==E.dither&&(f?C.enable(3024):C.disable(3024),E.dither=f);f=U.blend_enable;
f!==E.blend_enable&&(f?C.enable(3042):C.disable(3042),E.blend_enable=f);f=ma[0];t=ma[1];n=ma[2];p=ma[3];if(f!==fa[0]||t!==fa[1]||n!==fa[2]||p!==fa[3])C.blendColor(f,t,n,p),fa[0]=f,fa[1]=t,fa[2]=n,fa[3]=p;f=V[0];t=V[1];if(f!==ca[0]||t!==ca[1])C.blendEquationSeparate(f,t),ca[0]=f,ca[1]=t;f=S[0];t=S[1];n=S[2];p=S[3];if(f!==O[0]||t!==O[1]||n!==O[2]||p!==O[3])C.blendFuncSeparate(f,t,n,p),O[0]=f,O[1]=t,O[2]=n,O[3]=p;f=U.depth_func;f!==E.depth_func&&(C.depthFunc(f),E.depth_func=f);f=K[0];t=K[1];if(f!==M[0]||
t!==M[1])C.depthRange(f,t),M[0]=f,M[1]=t;f=U.depth_mask;f!==E.depth_mask&&(C.depthMask(f),E.depth_mask=f);f=J[0];t=J[1];n=J[2];p=J[3];if(f!==u[0]||t!==u[1]||n!==u[2]||p!==u[3])C.colorMask(f,t,n,p),u[0]=f,u[1]=t,u[2]=n,u[3]=p;f=U.cull_enable;f!==E.cull_enable&&(f?C.enable(2884):C.disable(2884),E.cull_enable=f);f=U.cull_face;f!==E.cull_face&&(C.cullFace(f),E.cull_face=f);f=U.frontFace;f!==E.frontFace&&(C.frontFace(f),E.frontFace=f);f=U.lineWidth;f!==E.lineWidth&&(C.lineWidth(f),E.lineWidth=f);f=U.polygonOffset_enable;
f!==E.polygonOffset_enable&&(f?C.enable(32823):C.disable(32823),E.polygonOffset_enable=f);f=qa[0];t=qa[1];if(f!==oa[0]||t!==oa[1])C.polygonOffset(f,t),oa[0]=f,oa[1]=t;f=U.sample_alpha;f!==E.sample_alpha&&(f?C.enable(32926):C.disable(32926),E.sample_alpha=f);f=U.sample_enable;f!==E.sample_enable&&(f?C.enable(32928):C.disable(32928),E.sample_enable=f);f=z[0];t=z[1];if(f!==H[0]||t!==H[1])C.sampleCoverage(f,t),H[0]=f,H[1]=t;f=U.stencil_enable;f!==E.stencil_enable&&(f?C.enable(2960):C.disable(2960),E.stencil_enable=
f);f=U.stencil_mask;f!==E.stencil_mask&&(C.stencilMask(f),E.stencil_mask=f);f=la[0];t=la[1];n=la[2];if(f!==ta[0]||t!==ta[1]||n!==ta[2])C.stencilFunc(f,t,n),ta[0]=f,ta[1]=t,ta[2]=n;f=ea[0];t=ea[1];n=ea[2];p=ea[3];if(f!==Ea[0]||t!==Ea[1]||n!==Ea[2]||p!==Ea[3])C.stencilOpSeparate(f,t,n,p),Ea[0]=f,Ea[1]=t,Ea[2]=n,Ea[3]=p;f=Da[0];t=Da[1];n=Da[2];p=Da[3];if(f!==za[0]||t!==za[1]||n!==za[2]||p!==za[3])C.stencilOpSeparate(f,t,n,p),za[0]=f,za[1]=t,za[2]=n,za[3]=p;f=U.scissor_enable;f!==E.scissor_enable&&(f?
C.enable(3089):C.disable(3089),E.scissor_enable=f);f=da[0];t=da[1];n=da[2];p=da[3];if(f!==W[0]||t!==W[1]||n!==W[2]||p!==W[3])C.scissor(f,t,n,p),W[0]=f,W[1]=t,W[2]=n,W[3]=p;f=ja[0];t=ja[1];n=ja[2];p=ja[3];if(f!==pa[0]||t!==pa[1]||n!==pa[2]||p!==pa[3])C.viewport(f,t,n,p),pa[0]=f,pa[1]=t,pa[2]=n,pa[3]=p}C.disable(2929);E.depth_enable=!1;if(f=E.profile)g=performance.now(),c.count+=b;C.useProgram(D.program);F.setVAO(null);t=T.location;n=m[t];n.buffer||C.enableVertexAttribArray(t);if(n.type!==a.dtype||
2!==n.size||n.buffer!==a||!1!==n.normalized||0!==n.offset||0!==n.stride)C.bindBuffer(34962,a.buffer),C.vertexAttribPointer(t,2,a.dtype,!1,0,0),n.type=a.dtype,n.size=2,n.buffer=a,n.normalized=!1,n.offset=0,n.stride=0;l=P.call(this,X,A,l);"number"!==typeof l&&B.commandRaise(w,k);C.uniform1f(ia.location,l);(t=y.elements)?C.bindBuffer(34963,t.buffer.buffer):F.currentVAO&&(t=ra.getElements(F.currentVAO.elements))&&C.bindBuffer(34963,t.buffer.buffer);n=y.primitive;p=y.offset;for(l=0;l<b;++l){A=d[l];var x,
v,R,Y,L,G,Ha,sa,ya;x=A.offset;h(x)&&2===x.length||B.commandRaise(Q,k);v=x[0];x=x[1];l&&R===v&&Y===x||(R=v,Y=x,C.uniform2f(r.location,v,x));L=q.call(this,X,A,l);h(L)&&4===L.length||B.commandRaise(N,k);A=L[0];v=L[1];x=L[2];L=L[3];l&&G===A&&Ha===v&&sa===x&&ya===L||(G=A,Ha=v,sa=x,ya=L,C.uniform4f(e.location,A,v,x,L));t?C.drawElements(n,3,t.type,p<<(t.type-5121>>1)):C.drawArrays(n,p,3)}E.dirty=!0;F.setVAO(null);f&&(c.cpuTime+=performance.now()-g)}}},"$23,model,position,projection,view":function(b,B,k,
c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia,e,r,T,m,X,E,y){var ra,I,C,h,U,d,ka,F,ma,fa,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa;ra=b.attributes;I=b.context;C=b.current;h=b.draw;U=b.framebuffer;d=b.gl;ka=b.isArrayLike;F=b.next;ma=b.shader;fa=b.uniforms;V=b.vao;ca=F.blend_color;S=C.blend_color;O=F.blend_equation;J=C.blend_equation;u=F.blend_func;K=C.blend_func;M=F.colorMask;qa=C.colorMask;oa=F.depth_range;z=C.depth_range;H=F.polygonOffset_offset;da=C.polygonOffset_offset;
W=F.sample_coverage;la=C.sample_coverage;ta=F.scissor_box;Da=C.scissor_box;za=F.stencil_func;ea=C.stencil_func;Ea=F.stencil_opBack;ja=C.stencil_opBack;pa=F.stencil_opFront;Aa=C.stencil_opFront;Ra=F.viewport;na=C.viewport;Tb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ya=new Float32Array(16);A=new Float32Array(16);t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];aa=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);xa=new Float32Array(16);return{draw:function(b){var e,h,t,r;e=U.next;
e!==U.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),U.cur=e);if(C.dirty){var q;e=F.dither;e!==C.dither&&(e?d.enable(3024):d.disable(3024),C.dither=e);e=F.blend_enable;e!==C.blend_enable&&(e?d.enable(3042):d.disable(3042),C.blend_enable=e);e=ca[0];t=ca[1];r=ca[2];q=ca[3];if(e!==S[0]||t!==S[1]||r!==S[2]||q!==S[3])d.blendColor(e,t,r,q),S[0]=e,S[1]=t,S[2]=r,S[3]=q;e=O[0];t=O[1];if(e!==J[0]||t!==J[1])d.blendEquationSeparate(e,t),J[0]=e,J[1]=t;e=u[0];t=u[1];r=u[2];q=u[3];
if(e!==K[0]||t!==K[1]||r!==K[2]||q!==K[3])d.blendFuncSeparate(e,t,r,q),K[0]=e,K[1]=t,K[2]=r,K[3]=q;e=F.depth_enable;e!==C.depth_enable&&(e?d.enable(2929):d.disable(2929),C.depth_enable=e);e=F.depth_func;e!==C.depth_func&&(d.depthFunc(e),C.depth_func=e);e=oa[0];t=oa[1];if(e!==z[0]||t!==z[1])d.depthRange(e,t),z[0]=e,z[1]=t;e=F.depth_mask;e!==C.depth_mask&&(d.depthMask(e),C.depth_mask=e);e=M[0];t=M[1];r=M[2];q=M[3];if(e!==qa[0]||t!==qa[1]||r!==qa[2]||q!==qa[3])d.colorMask(e,t,r,q),qa[0]=e,qa[1]=t,qa[2]=
r,qa[3]=q;e=F.cull_enable;e!==C.cull_enable&&(e?d.enable(2884):d.disable(2884),C.cull_enable=e);e=F.cull_face;e!==C.cull_face&&(d.cullFace(e),C.cull_face=e);e=F.frontFace;e!==C.frontFace&&(d.frontFace(e),C.frontFace=e);e=F.lineWidth;e!==C.lineWidth&&(d.lineWidth(e),C.lineWidth=e);e=F.polygonOffset_enable;e!==C.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),C.polygonOffset_enable=e);e=H[0];t=H[1];if(e!==da[0]||t!==da[1])d.polygonOffset(e,t),da[0]=e,da[1]=t;e=F.sample_alpha;e!==C.sample_alpha&&
(e?d.enable(32926):d.disable(32926),C.sample_alpha=e);e=F.sample_enable;e!==C.sample_enable&&(e?d.enable(32928):d.disable(32928),C.sample_enable=e);e=W[0];t=W[1];if(e!==la[0]||t!==la[1])d.sampleCoverage(e,t),la[0]=e,la[1]=t;e=F.stencil_enable;e!==C.stencil_enable&&(e?d.enable(2960):d.disable(2960),C.stencil_enable=e);e=F.stencil_mask;e!==C.stencil_mask&&(d.stencilMask(e),C.stencil_mask=e);e=za[0];t=za[1];r=za[2];if(e!==ea[0]||t!==ea[1]||r!==ea[2])d.stencilFunc(e,t,r),ea[0]=e,ea[1]=t,ea[2]=r;e=pa[0];
t=pa[1];r=pa[2];q=pa[3];if(e!==Aa[0]||t!==Aa[1]||r!==Aa[2]||q!==Aa[3])d.stencilOpSeparate(e,t,r,q),Aa[0]=e,Aa[1]=t,Aa[2]=r,Aa[3]=q;e=Ea[0];t=Ea[1];r=Ea[2];q=Ea[3];if(e!==ja[0]||t!==ja[1]||r!==ja[2]||q!==ja[3])d.stencilOpSeparate(e,t,r,q),ja[0]=e,ja[1]=t,ja[2]=r,ja[3]=q;e=F.scissor_enable;e!==C.scissor_enable&&(e?d.enable(3089):d.disable(3089),C.scissor_enable=e);e=ta[0];t=ta[1];r=ta[2];q=ta[3];if(e!==Da[0]||t!==Da[1]||r!==Da[2]||q!==Da[3])d.scissor(e,t,r,q),Da[0]=e,Da[1]=t,Da[2]=r,Da[3]=q;e=Ra[0];
t=Ra[1];r=Ra[2];q=Ra[3];if(e!==na[0]||t!==na[1]||r!==na[2]||q!==na[3])d.viewport(e,t,r,q),na[0]=e,na[1]=t,na[2]=r,na[3]=q;C.dirty=!1}if(e=C.profile)h=performance.now(),c.count++;d.useProgram(l.program);V.setVAO(null);t=X.location;r=ra[t];r.buffer||d.enableVertexAttribArray(t);if(r.type!==a.dtype||3!==r.size||r.buffer!==a||!1!==r.normalized||0!==r.offset||0!==r.stride)d.bindBuffer(34962,a.buffer),d.vertexAttribPointer(t,3,a.dtype,!1,0,0),r.type=a.dtype,r.size=3,r.buffer=a,r.normalized=!1,r.offset=
0,r.stride=0;d.uniformMatrix4fv(m.location,!1,Tb);t=f.call(this,I,b,0);ka(t)&&16===t.length||B.commandRaise(g,k);d.uniformMatrix4fv(y.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Ya[0]=t[0],Ya[1]=t[1],Ya[2]=t[2],Ya[3]=t[3],Ya[4]=t[4],Ya[5]=t[5],Ya[6]=t[6],Ya[7]=t[7],Ya[8]=t[8],Ya[9]=t[9],Ya[10]=t[10],Ya[11]=t[11],Ya[12]=t[12],Ya[13]=t[13],Ya[14]=t[14],Ya[15]=t[15],Ya));b=n.call(this,I,b,0);ka(b)&&16===b.length||B.commandRaise(p,k);d.uniformMatrix4fv(E.location,!1,Array.isArray(b)||b instanceof
Float32Array?b:(A[0]=b[0],A[1]=b[1],A[2]=b[2],A[3]=b[3],A[4]=b[4],A[5]=b[5],A[6]=b[6],A[7]=b[7],A[8]=b[8],A[9]=b[9],A[10]=b[10],A[11]=b[11],A[12]=b[12],A[13]=b[13],A[14]=b[14],A[15]=b[15],A));v&&d.bindBuffer(34963,v.buffer.buffer);b=v.primType;t=v.vertCount-0;0<=t||B.commandRaise(R,k);t&&(d.drawElements(b,t,v.type,0<<(v.type-5121>>1)),V.setVAO(null),e&&(c.cpuTime+=performance.now()-h))},scope:function(d,b,e){var f,g,l,m,A,r,u,q,z,n,p,y,aa,E,F,v,na,ea,H,R,W,J,K;if(f=C.profile)g=performance.now(),c.count++;
l=h.elements;h.elements=G;m=h.offset;h.offset=0;A=G.vertCount-0;0<=A||B.commandRaise(x,k);r=h.count;h.count=A;u=G.primType;A=h.primitive;h.primitive=u;u=fa[3];fa[3]=t;q=D.call(this,I,d,e);z=fa[5];fa[5]=q;n=P.call(this,I,d,e);q=fa[4];fa[4]=n;n=w.buffer;w.buffer=a;p=w.divisor;w.divisor=0;y=w.normalized;w.normalized=!1;aa=w.offset;w.offset=0;E=w.size;w.size=0;F=w.state;w.state=1;v=w.stride;w.stride=0;na=w.type;w.type=a.dtype;ea=w.w;w.w=0;H=w.x;w.x=0;R=w.y;w.y=0;W=w.z;w.z=0;J=ma.vert;ma.vert=2;K=ma.frag;
ma.frag=1;b(I,d,e);f&&(c.cpuTime+=performance.now()-g);h.elements=l;h.offset=m;h.count=r;h.primitive=A;fa[3]=u;fa[5]=z;fa[4]=q;w.buffer=n;w.divisor=p;w.normalized=y;w.offset=aa;w.size=E;w.state=F;w.stride=v;w.type=na;w.w=ea;w.x=H;w.y=R;w.z=W;ma.vert=J;ma.frag=K},batch:function(b,f){var h,g,l;h=U.next;h!==U.cur&&(h?d.bindFramebuffer(36160,h.framebuffer):d.bindFramebuffer(36160,null),U.cur=h);if(C.dirty){var t,A,n;h=F.dither;h!==C.dither&&(h?d.enable(3024):d.disable(3024),C.dither=h);h=F.blend_enable;
h!==C.blend_enable&&(h?d.enable(3042):d.disable(3042),C.blend_enable=h);h=ca[0];t=ca[1];A=ca[2];n=ca[3];if(h!==S[0]||t!==S[1]||A!==S[2]||n!==S[3])d.blendColor(h,t,A,n),S[0]=h,S[1]=t,S[2]=A,S[3]=n;h=O[0];t=O[1];if(h!==J[0]||t!==J[1])d.blendEquationSeparate(h,t),J[0]=h,J[1]=t;h=u[0];t=u[1];A=u[2];n=u[3];if(h!==K[0]||t!==K[1]||A!==K[2]||n!==K[3])d.blendFuncSeparate(h,t,A,n),K[0]=h,K[1]=t,K[2]=A,K[3]=n;h=F.depth_enable;h!==C.depth_enable&&(h?d.enable(2929):d.disable(2929),C.depth_enable=h);h=F.depth_func;
h!==C.depth_func&&(d.depthFunc(h),C.depth_func=h);h=oa[0];t=oa[1];if(h!==z[0]||t!==z[1])d.depthRange(h,t),z[0]=h,z[1]=t;h=F.depth_mask;h!==C.depth_mask&&(d.depthMask(h),C.depth_mask=h);h=M[0];t=M[1];A=M[2];n=M[3];if(h!==qa[0]||t!==qa[1]||A!==qa[2]||n!==qa[3])d.colorMask(h,t,A,n),qa[0]=h,qa[1]=t,qa[2]=A,qa[3]=n;h=F.cull_enable;h!==C.cull_enable&&(h?d.enable(2884):d.disable(2884),C.cull_enable=h);h=F.cull_face;h!==C.cull_face&&(d.cullFace(h),C.cull_face=h);h=F.frontFace;h!==C.frontFace&&(d.frontFace(h),
C.frontFace=h);h=F.lineWidth;h!==C.lineWidth&&(d.lineWidth(h),C.lineWidth=h);h=F.polygonOffset_enable;h!==C.polygonOffset_enable&&(h?d.enable(32823):d.disable(32823),C.polygonOffset_enable=h);h=H[0];t=H[1];if(h!==da[0]||t!==da[1])d.polygonOffset(h,t),da[0]=h,da[1]=t;h=F.sample_alpha;h!==C.sample_alpha&&(h?d.enable(32926):d.disable(32926),C.sample_alpha=h);h=F.sample_enable;h!==C.sample_enable&&(h?d.enable(32928):d.disable(32928),C.sample_enable=h);h=W[0];t=W[1];if(h!==la[0]||t!==la[1])d.sampleCoverage(h,
t),la[0]=h,la[1]=t;h=F.stencil_enable;h!==C.stencil_enable&&(h?d.enable(2960):d.disable(2960),C.stencil_enable=h);h=F.stencil_mask;h!==C.stencil_mask&&(d.stencilMask(h),C.stencil_mask=h);h=za[0];t=za[1];A=za[2];if(h!==ea[0]||t!==ea[1]||A!==ea[2])d.stencilFunc(h,t,A),ea[0]=h,ea[1]=t,ea[2]=A;h=pa[0];t=pa[1];A=pa[2];n=pa[3];if(h!==Aa[0]||t!==Aa[1]||A!==Aa[2]||n!==Aa[3])d.stencilOpSeparate(h,t,A,n),Aa[0]=h,Aa[1]=t,Aa[2]=A,Aa[3]=n;h=Ea[0];t=Ea[1];A=Ea[2];n=Ea[3];if(h!==ja[0]||t!==ja[1]||A!==ja[2]||n!==
ja[3])d.stencilOpSeparate(h,t,A,n),ja[0]=h,ja[1]=t,ja[2]=A,ja[3]=n;h=F.scissor_enable;h!==C.scissor_enable&&(h?d.enable(3089):d.disable(3089),C.scissor_enable=h);h=ta[0];t=ta[1];A=ta[2];n=ta[3];if(h!==Da[0]||t!==Da[1]||A!==Da[2]||n!==Da[3])d.scissor(h,t,A,n),Da[0]=h,Da[1]=t,Da[2]=A,Da[3]=n;h=Ra[0];t=Ra[1];A=Ra[2];n=Ra[3];if(h!==na[0]||t!==na[1]||A!==na[2]||n!==na[3])d.viewport(h,t,A,n),na[0]=h,na[1]=t,na[2]=A,na[3]=n;C.dirty=!1}if(h=C.profile)g=performance.now(),c.count+=f;d.useProgram(Q.program);
V.setVAO(null);t=X.location;A=ra[t];A.buffer||d.enableVertexAttribArray(t);if(A.type!==a.dtype||3!==A.size||A.buffer!==a||!1!==A.normalized||0!==A.offset||0!==A.stride)d.bindBuffer(34962,a.buffer),d.vertexAttribPointer(t,3,a.dtype,!1,0,0),A.type=a.dtype,A.size=3,A.buffer=a,A.normalized=!1,A.offset=0,A.stride=0;d.uniformMatrix4fv(m.location,!1,aa);t=q.call(this,I,void 0,l);ka(t)&&16===t.length||B.commandRaise(N,k);d.uniformMatrix4fv(y.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(va[0]=
t[0],va[1]=t[1],va[2]=t[2],va[3]=t[3],va[4]=t[4],va[5]=t[5],va[6]=t[6],va[7]=t[7],va[8]=t[8],va[9]=t[9],va[10]=t[10],va[11]=t[11],va[12]=t[12],va[13]=t[13],va[14]=t[14],va[15]=t[15],va));l=ia.call(this,I,void 0,l);ka(l)&&16===l.length||B.commandRaise(e,k);d.uniformMatrix4fv(E.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(xa[0]=l[0],xa[1]=l[1],xa[2]=l[2],xa[3]=l[3],xa[4]=l[4],xa[5]=l[5],xa[6]=l[6],xa[7]=l[7],xa[8]=l[8],xa[9]=l[9],xa[10]=l[10],xa[11]=l[11],xa[12]=l[12],xa[13]=l[13],xa[14]=
l[14],xa[15]=l[15],xa));r&&d.bindBuffer(34963,r.buffer.buffer);t=r.primType;A=r.vertCount-0;0<=A||B.commandRaise(T,k);for(l=0;l<f;++l)A&&d.drawElements(t,A,r.type,0<<(r.type-5121>>1));V.setVAO(null);h&&(c.cpuTime+=performance.now()-g)}}},$20:function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia){var e,r,T,m,X,E,y,fa,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da;e=b.context;r=b.current;T=b.framebuffer;m=b.gl;X=b.next;E=b.shader;y=b.uniforms;fa=b.vao;I=X.blend_color;C=r.blend_color;h=
X.blend_equation;U=r.blend_equation;d=X.blend_func;ka=r.blend_func;F=X.colorMask;ma=r.colorMask;Ba=X.depth_range;V=r.depth_range;ca=X.polygonOffset_offset;S=r.polygonOffset_offset;O=X.sample_coverage;J=r.sample_coverage;u=X.scissor_box;K=r.scissor_box;M=X.stencil_func;qa=r.stencil_func;oa=X.stencil_opBack;z=r.stencil_opBack;H=X.stencil_opFront;da=r.stencil_opFront;W=X.viewport;la=r.viewport;ta={};Da={};return{draw:function(b){var B,q,w,x,y,v,na,D,R,A,t,aa,G;B=e.center;q=e.distance;w=e.eye;x=e.phi;
y=e.projection;v=f.call(this,e,b,0);na=e.theta;D=e.up;R=e.view;e.center=l;e.distance=2.302585092994046;e.eye=a;e.phi=0;e.projection=v;e.theta=0;e.up=g;e.view=n;v=T.next;v!==T.cur&&(v?m.bindFramebuffer(36160,v.framebuffer):m.bindFramebuffer(36160,null),T.cur=v);if(r.dirty){v=X.dither;v!==r.dither&&(v?m.enable(3024):m.disable(3024),r.dither=v);v=X.blend_enable;v!==r.blend_enable&&(v?m.enable(3042):m.disable(3042),r.blend_enable=v);v=I[0];t=I[1];aa=I[2];G=I[3];if(v!==C[0]||t!==C[1]||aa!==C[2]||G!==C[3])m.blendColor(v,
t,aa,G),C[0]=v,C[1]=t,C[2]=aa,C[3]=G;v=h[0];t=h[1];if(v!==U[0]||t!==U[1])m.blendEquationSeparate(v,t),U[0]=v,U[1]=t;v=d[0];t=d[1];aa=d[2];G=d[3];if(v!==ka[0]||t!==ka[1]||aa!==ka[2]||G!==ka[3])m.blendFuncSeparate(v,t,aa,G),ka[0]=v,ka[1]=t,ka[2]=aa,ka[3]=G;v=X.depth_enable;v!==r.depth_enable&&(v?m.enable(2929):m.disable(2929),r.depth_enable=v);v=X.depth_func;v!==r.depth_func&&(m.depthFunc(v),r.depth_func=v);v=Ba[0];t=Ba[1];if(v!==V[0]||t!==V[1])m.depthRange(v,t),V[0]=v,V[1]=t;v=X.depth_mask;v!==r.depth_mask&&
(m.depthMask(v),r.depth_mask=v);v=F[0];t=F[1];aa=F[2];G=F[3];if(v!==ma[0]||t!==ma[1]||aa!==ma[2]||G!==ma[3])m.colorMask(v,t,aa,G),ma[0]=v,ma[1]=t,ma[2]=aa,ma[3]=G;v=X.cull_enable;v!==r.cull_enable&&(v?m.enable(2884):m.disable(2884),r.cull_enable=v);v=X.cull_face;v!==r.cull_face&&(m.cullFace(v),r.cull_face=v);v=X.frontFace;v!==r.frontFace&&(m.frontFace(v),r.frontFace=v);v=X.lineWidth;v!==r.lineWidth&&(m.lineWidth(v),r.lineWidth=v);v=X.polygonOffset_enable;v!==r.polygonOffset_enable&&(v?m.enable(32823):
m.disable(32823),r.polygonOffset_enable=v);v=ca[0];t=ca[1];if(v!==S[0]||t!==S[1])m.polygonOffset(v,t),S[0]=v,S[1]=t;v=X.sample_alpha;v!==r.sample_alpha&&(v?m.enable(32926):m.disable(32926),r.sample_alpha=v);v=X.sample_enable;v!==r.sample_enable&&(v?m.enable(32928):m.disable(32928),r.sample_enable=v);v=O[0];t=O[1];if(v!==J[0]||t!==J[1])m.sampleCoverage(v,t),J[0]=v,J[1]=t;v=X.stencil_enable;v!==r.stencil_enable&&(v?m.enable(2960):m.disable(2960),r.stencil_enable=v);v=X.stencil_mask;v!==r.stencil_mask&&
(m.stencilMask(v),r.stencil_mask=v);v=M[0];t=M[1];aa=M[2];if(v!==qa[0]||t!==qa[1]||aa!==qa[2])m.stencilFunc(v,t,aa),qa[0]=v,qa[1]=t,qa[2]=aa;v=H[0];t=H[1];aa=H[2];G=H[3];if(v!==da[0]||t!==da[1]||aa!==da[2]||G!==da[3])m.stencilOpSeparate(v,t,aa,G),da[0]=v,da[1]=t,da[2]=aa,da[3]=G;v=oa[0];t=oa[1];aa=oa[2];G=oa[3];if(v!==z[0]||t!==z[1]||aa!==z[2]||G!==z[3])m.stencilOpSeparate(v,t,aa,G),z[0]=v,z[1]=t,z[2]=aa,z[3]=G;v=X.scissor_enable;v!==r.scissor_enable&&(v?m.enable(3089):m.disable(3089),r.scissor_enable=
v);v=u[0];t=u[1];aa=u[2];G=u[3];if(v!==K[0]||t!==K[1]||aa!==K[2]||G!==K[3])m.scissor(v,t,aa,G),K[0]=v,K[1]=t,K[2]=aa,K[3]=G;v=W[0];t=W[1];aa=W[2];G=W[3];if(v!==la[0]||t!==la[1]||aa!==la[2]||G!==la[3])m.viewport(v,t,aa,G),la[0]=v,la[1]=t,la[2]=aa,la[3]=G;r.dirty=!1}if(v=r.profile)A=performance.now(),c.count++;t=E.program(E.vert,E.frag,k);m.useProgram(t.program);fa.setVAO(null);aa=t.id;(G=ta[aa])||(G=ta[aa]=p(t));G.call(this,b);fa.setVAO(null);e.center=B;e.distance=q;e.eye=w;e.phi=x;e.projection=y;
e.theta=na;e.up=D;e.view=R;v&&(c.cpuTime+=performance.now()-A)},scope:function(a,d,b){var f,h,g,k,l,m,u,A,t,B,n,q,z,w,p,L,C,E,F;f=e.center;h=e.distance;g=e.eye;k=e.phi;l=e.projection;m=G.call(this,e,a,b);u=e.theta;A=e.up;t=e.view;e.center=v;e.distance=2.302585092994046;e.eye=R;e.phi=0;e.projection=m;e.theta=0;e.up=x;e.view=D;if(m=r.profile)B=performance.now(),c.count++;n=e.center;q=y[1];y[1]=n;z=e.distance;n=y[2];y[2]=z;w=e.eye;z=y[3];y[3]=w;p=e.phi;w=y[4];y[4]=p;L=e.projection;p=y[5];y[5]=L;C=e.theta;
L=y[6];y[6]=C;E=e.up;C=y[7];y[7]=E;E=e.view;F=y[8];y[8]=E;d(e,a,b);e.center=f;e.distance=h;e.eye=g;e.phi=k;e.projection=l;e.theta=u;e.up=A;e.view=t;m&&(c.cpuTime+=performance.now()-B);y[1]=q;y[2]=n;y[3]=z;y[4]=w;y[5]=p;y[6]=L;y[7]=C;y[8]=F},batch:function(a,b){var f,g,l,B,n,p,v,x,A,t,y,D,G;f=e.center;g=e.distance;l=e.eye;B=e.phi;n=e.projection;p=Q.call(this,e,a,0);v=e.theta;x=e.up;A=e.view;e.center=P;e.distance=2.302585092994046;e.eye=w;e.phi=0;e.projection=p;e.theta=0;e.up=q;e.view=N;p=T.next;p!==
T.cur&&(p?m.bindFramebuffer(36160,p.framebuffer):m.bindFramebuffer(36160,null),T.cur=p);if(r.dirty){p=X.dither;p!==r.dither&&(p?m.enable(3024):m.disable(3024),r.dither=p);p=X.blend_enable;p!==r.blend_enable&&(p?m.enable(3042):m.disable(3042),r.blend_enable=p);p=I[0];y=I[1];D=I[2];G=I[3];if(p!==C[0]||y!==C[1]||D!==C[2]||G!==C[3])m.blendColor(p,y,D,G),C[0]=p,C[1]=y,C[2]=D,C[3]=G;p=h[0];y=h[1];if(p!==U[0]||y!==U[1])m.blendEquationSeparate(p,y),U[0]=p,U[1]=y;p=d[0];y=d[1];D=d[2];G=d[3];if(p!==ka[0]||
y!==ka[1]||D!==ka[2]||G!==ka[3])m.blendFuncSeparate(p,y,D,G),ka[0]=p,ka[1]=y,ka[2]=D,ka[3]=G;p=X.depth_enable;p!==r.depth_enable&&(p?m.enable(2929):m.disable(2929),r.depth_enable=p);p=X.depth_func;p!==r.depth_func&&(m.depthFunc(p),r.depth_func=p);p=Ba[0];y=Ba[1];if(p!==V[0]||y!==V[1])m.depthRange(p,y),V[0]=p,V[1]=y;p=X.depth_mask;p!==r.depth_mask&&(m.depthMask(p),r.depth_mask=p);p=F[0];y=F[1];D=F[2];G=F[3];if(p!==ma[0]||y!==ma[1]||D!==ma[2]||G!==ma[3])m.colorMask(p,y,D,G),ma[0]=p,ma[1]=y,ma[2]=D,
ma[3]=G;p=X.cull_enable;p!==r.cull_enable&&(p?m.enable(2884):m.disable(2884),r.cull_enable=p);p=X.cull_face;p!==r.cull_face&&(m.cullFace(p),r.cull_face=p);p=X.frontFace;p!==r.frontFace&&(m.frontFace(p),r.frontFace=p);p=X.lineWidth;p!==r.lineWidth&&(m.lineWidth(p),r.lineWidth=p);p=X.polygonOffset_enable;p!==r.polygonOffset_enable&&(p?m.enable(32823):m.disable(32823),r.polygonOffset_enable=p);p=ca[0];y=ca[1];if(p!==S[0]||y!==S[1])m.polygonOffset(p,y),S[0]=p,S[1]=y;p=X.sample_alpha;p!==r.sample_alpha&&
(p?m.enable(32926):m.disable(32926),r.sample_alpha=p);p=X.sample_enable;p!==r.sample_enable&&(p?m.enable(32928):m.disable(32928),r.sample_enable=p);p=O[0];y=O[1];if(p!==J[0]||y!==J[1])m.sampleCoverage(p,y),J[0]=p,J[1]=y;p=X.stencil_enable;p!==r.stencil_enable&&(p?m.enable(2960):m.disable(2960),r.stencil_enable=p);p=X.stencil_mask;p!==r.stencil_mask&&(m.stencilMask(p),r.stencil_mask=p);p=M[0];y=M[1];D=M[2];if(p!==qa[0]||y!==qa[1]||D!==qa[2])m.stencilFunc(p,y,D),qa[0]=p,qa[1]=y,qa[2]=D;p=H[0];y=H[1];
D=H[2];G=H[3];if(p!==da[0]||y!==da[1]||D!==da[2]||G!==da[3])m.stencilOpSeparate(p,y,D,G),da[0]=p,da[1]=y,da[2]=D,da[3]=G;p=oa[0];y=oa[1];D=oa[2];G=oa[3];if(p!==z[0]||y!==z[1]||D!==z[2]||G!==z[3])m.stencilOpSeparate(p,y,D,G),z[0]=p,z[1]=y,z[2]=D,z[3]=G;p=X.scissor_enable;p!==r.scissor_enable&&(p?m.enable(3089):m.disable(3089),r.scissor_enable=p);p=u[0];y=u[1];D=u[2];G=u[3];if(p!==K[0]||y!==K[1]||D!==K[2]||G!==K[3])m.scissor(p,y,D,G),K[0]=p,K[1]=y,K[2]=D,K[3]=G;p=W[0];y=W[1];D=W[2];G=W[3];if(p!==la[0]||
y!==la[1]||D!==la[2]||G!==la[3])m.viewport(p,y,D,G),la[0]=p,la[1]=y,la[2]=D,la[3]=G;r.dirty=!1}if(p=r.profile)t=performance.now(),c.count+=b;y=E.program(E.vert,E.frag,k);m.useProgram(y.program);fa.setVAO(null);D=y.id;(G=Da[D])||(G=Da[D]=ia(y));G.call(this,a,b);fa.setVAO(null);e.center=f;e.distance=g;e.eye=l;e.phi=B;e.projection=n;e.theta=v;e.up=x;e.view=A;p&&(c.cpuTime+=performance.now()-t)}}},"$27,position,projection,tex,uv,view":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia,e,r,T,m,X,E,y,
fa,I,C,h,U){var d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na,Tb,Ya,A,t,aa,va,xa,Ca,Hb;d=b.attributes;ka=b.context;F=b.current;ma=b.draw;Ba=b.framebuffer;V=b.gl;ca=b.isArrayLike;S=b.next;O=b.shader;J=b.uniforms;u=b.vao;K=S.blend_color;M=F.blend_color;qa=S.blend_equation;oa=F.blend_equation;z=S.blend_func;H=F.blend_func;da=S.colorMask;W=F.colorMask;la=S.depth_range;ta=F.depth_range;Da=S.polygonOffset_offset;za=F.polygonOffset_offset;ea=S.sample_coverage;Ea=F.sample_coverage;
ja=S.scissor_box;pa=F.scissor_box;Aa=S.stencil_func;Ra=F.stencil_func;na=S.stencil_opBack;Tb=F.stencil_opBack;Ya=S.stencil_opFront;A=F.stencil_opFront;t=S.viewport;aa=F.viewport;va=new Float32Array(16);xa=new Float32Array(16);Ca=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(b){var e,m,r,q;e=Ba.next;e!==Ba.cur&&(e?V.bindFramebuffer(36160,e.framebuffer):V.bindFramebuffer(36160,null),Ba.cur=e);if(F.dirty){var w;e=S.dither;e!==F.dither&&(e?V.enable(3024):V.disable(3024),F.dither=e);
e=S.blend_enable;e!==F.blend_enable&&(e?V.enable(3042):V.disable(3042),F.blend_enable=e);e=K[0];r=K[1];q=K[2];w=K[3];if(e!==M[0]||r!==M[1]||q!==M[2]||w!==M[3])V.blendColor(e,r,q,w),M[0]=e,M[1]=r,M[2]=q,M[3]=w;e=qa[0];r=qa[1];if(e!==oa[0]||r!==oa[1])V.blendEquationSeparate(e,r),oa[0]=e,oa[1]=r;e=z[0];r=z[1];q=z[2];w=z[3];if(e!==H[0]||r!==H[1]||q!==H[2]||w!==H[3])V.blendFuncSeparate(e,r,q,w),H[0]=e,H[1]=r,H[2]=q,H[3]=w;e=S.depth_enable;e!==F.depth_enable&&(e?V.enable(2929):V.disable(2929),F.depth_enable=
e);e=S.depth_func;e!==F.depth_func&&(V.depthFunc(e),F.depth_func=e);e=la[0];r=la[1];if(e!==ta[0]||r!==ta[1])V.depthRange(e,r),ta[0]=e,ta[1]=r;e=S.depth_mask;e!==F.depth_mask&&(V.depthMask(e),F.depth_mask=e);e=da[0];r=da[1];q=da[2];w=da[3];if(e!==W[0]||r!==W[1]||q!==W[2]||w!==W[3])V.colorMask(e,r,q,w),W[0]=e,W[1]=r,W[2]=q,W[3]=w;e=S.cull_enable;e!==F.cull_enable&&(e?V.enable(2884):V.disable(2884),F.cull_enable=e);e=S.cull_face;e!==F.cull_face&&(V.cullFace(e),F.cull_face=e);e=S.frontFace;e!==F.frontFace&&
(V.frontFace(e),F.frontFace=e);e=S.lineWidth;e!==F.lineWidth&&(V.lineWidth(e),F.lineWidth=e);e=S.polygonOffset_enable;e!==F.polygonOffset_enable&&(e?V.enable(32823):V.disable(32823),F.polygonOffset_enable=e);e=Da[0];r=Da[1];if(e!==za[0]||r!==za[1])V.polygonOffset(e,r),za[0]=e,za[1]=r;e=S.sample_alpha;e!==F.sample_alpha&&(e?V.enable(32926):V.disable(32926),F.sample_alpha=e);e=S.sample_enable;e!==F.sample_enable&&(e?V.enable(32928):V.disable(32928),F.sample_enable=e);e=ea[0];r=ea[1];if(e!==Ea[0]||r!==
Ea[1])V.sampleCoverage(e,r),Ea[0]=e,Ea[1]=r;e=S.stencil_enable;e!==F.stencil_enable&&(e?V.enable(2960):V.disable(2960),F.stencil_enable=e);e=S.stencil_mask;e!==F.stencil_mask&&(V.stencilMask(e),F.stencil_mask=e);e=Aa[0];r=Aa[1];q=Aa[2];if(e!==Ra[0]||r!==Ra[1]||q!==Ra[2])V.stencilFunc(e,r,q),Ra[0]=e,Ra[1]=r,Ra[2]=q;e=Ya[0];r=Ya[1];q=Ya[2];w=Ya[3];if(e!==A[0]||r!==A[1]||q!==A[2]||w!==A[3])V.stencilOpSeparate(e,r,q,w),A[0]=e,A[1]=r,A[2]=q,A[3]=w;e=na[0];r=na[1];q=na[2];w=na[3];if(e!==Tb[0]||r!==Tb[1]||
q!==Tb[2]||w!==Tb[3])V.stencilOpSeparate(e,r,q,w),Tb[0]=e,Tb[1]=r,Tb[2]=q,Tb[3]=w;e=S.scissor_enable;e!==F.scissor_enable&&(e?V.enable(3089):V.disable(3089),F.scissor_enable=e);e=ja[0];r=ja[1];q=ja[2];w=ja[3];if(e!==pa[0]||r!==pa[1]||q!==pa[2]||w!==pa[3])V.scissor(e,r,q,w),pa[0]=e,pa[1]=r,pa[2]=q,pa[3]=w;e=t[0];r=t[1];q=t[2];w=t[3];if(e!==aa[0]||r!==aa[1]||q!==aa[2]||w!==aa[3])V.viewport(e,r,q,w),aa[0]=e,aa[1]=r,aa[2]=q,aa[3]=w;F.dirty=!1}if(e=F.profile)m=performance.now(),c.count++;V.useProgram(l.program);
u.setVAO(null);r=fa.location;q=d[r];q.buffer||V.enableVertexAttribArray(r);if(q.type!==a.dtype||3!==q.size||q.buffer!==a||!1!==q.normalized||0!==q.offset||0!==q.stride)V.bindBuffer(34962,a.buffer),V.vertexAttribPointer(r,3,a.dtype,!1,0,0),q.type=a.dtype,q.size=3,q.buffer=a,q.normalized=!1,q.offset=0,q.stride=0;r=h.location;q=d[r];q.buffer||V.enableVertexAttribArray(r);if(q.type!==f.dtype||2!==q.size||q.buffer!==f||!1!==q.normalized||0!==q.offset||0!==q.stride)V.bindBuffer(34962,f.buffer),V.vertexAttribPointer(r,
2,f.dtype,!1,0,0),q.type=f.dtype,q.size=2,q.buffer=f,q.normalized=!1,q.offset=0,q.stride=0;r=g.call(this,ka,b,0);ca(r)&&16===r.length||B.commandRaise(n,k);V.uniformMatrix4fv(I.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(va[0]=r[0],va[1]=r[1],va[2]=r[2],va[3]=r[3],va[4]=r[4],va[5]=r[5],va[6]=r[6],va[7]=r[7],va[8]=r[8],va[9]=r[9],va[10]=r[10],va[11]=r[11],va[12]=r[12],va[13]=r[13],va[14]=r[14],va[15]=r[15],va));r=p.call(this,ka,b,0);ca(r)&&16===r.length||B.commandRaise(v,k);V.uniformMatrix4fv(U.location,
!1,Array.isArray(r)||r instanceof Float32Array?r:(xa[0]=r[0],xa[1]=r[1],xa[2]=r[2],xa[3]=r[3],xa[4]=r[4],xa[5]=r[5],xa[6]=r[6],xa[7]=r[7],xa[8]=r[8],xa[9]=r[9],xa[10]=r[10],xa[11]=r[11],xa[12]=r[12],xa[13]=r[13],xa[14]=r[14],xa[15]=r[15],xa));(b=b.texture)&&"framebuffer"===b._reglType&&(b=b.color[0]);"function"===typeof b&&"texture2d"===b._reglType||B.commandRaise(R,k);b=b._texture;V.uniform1i(C.location,b.bind());G&&V.bindBuffer(34963,G.buffer.buffer);r=G.primType;q=G.vertCount-0;0<=q||B.commandRaise(x,
k);q&&(V.drawElements(r,q,G.type,0<<(G.type-5121>>1)),u.setVAO(null),e&&(c.cpuTime+=performance.now()-m),b.unbind())},scope:function(b,d,e){var h,g,l,m,t,r,A,u,n,p,z,y,v,x,C,G,E,aa,ea,H,I,R,W,K,M,Tb,na,ta,za,S,T,U,V,X,ja;if(h=F.profile)g=performance.now(),c.count++;l=ma.elements;ma.elements=D;m=ma.offset;ma.offset=0;t=D.vertCount-0;0<=t||B.commandRaise(P,k);r=ma.count;ma.count=t;A=D.primType;t=ma.primitive;ma.primitive=A;u=w.call(this,ka,b,e);A=J[3];J[3]=u;n=b.texture;u=J[5];J[5]=n;p=Q.call(this,
ka,b,e);n=J[4];J[4]=p;p=q.buffer;q.buffer=a;z=q.divisor;q.divisor=0;y=q.normalized;q.normalized=!1;v=q.offset;q.offset=0;x=q.size;q.size=0;C=q.state;q.state=1;G=q.stride;q.stride=0;E=q.type;q.type=a.dtype;aa=q.w;q.w=0;ea=q.x;q.x=0;H=q.y;q.y=0;I=q.z;q.z=0;R=N.buffer;N.buffer=f;W=N.divisor;N.divisor=0;K=N.normalized;N.normalized=!1;M=N.offset;N.offset=0;Tb=N.size;N.size=0;na=N.state;N.state=1;ta=N.stride;N.stride=0;za=N.type;N.type=f.dtype;S=N.w;N.w=0;T=N.x;N.x=0;U=N.y;N.y=0;V=N.z;N.z=0;X=O.vert;O.vert=
2;ja=O.frag;O.frag=1;d(ka,b,e);h&&(c.cpuTime+=performance.now()-g);ma.elements=l;ma.offset=m;ma.count=r;ma.primitive=t;J[3]=A;J[5]=u;J[4]=n;q.buffer=p;q.divisor=z;q.normalized=y;q.offset=v;q.size=x;q.state=C;q.stride=G;q.type=E;q.w=aa;q.x=ea;q.y=H;q.z=I;N.buffer=R;N.divisor=W;N.normalized=K;N.offset=M;N.size=Tb;N.state=na;N.stride=ta;N.type=za;N.w=S;N.x=T;N.y=U;N.z=V;O.vert=X;O.frag=ja},batch:function(b,g){var l,q,n,p;l=Ba.next;l!==Ba.cur&&(l?V.bindFramebuffer(36160,l.framebuffer):V.bindFramebuffer(36160,
null),Ba.cur=l);if(F.dirty){var w,v,x;l=S.dither;l!==F.dither&&(l?V.enable(3024):V.disable(3024),F.dither=l);l=S.blend_enable;l!==F.blend_enable&&(l?V.enable(3042):V.disable(3042),F.blend_enable=l);l=K[0];w=K[1];v=K[2];x=K[3];if(l!==M[0]||w!==M[1]||v!==M[2]||x!==M[3])V.blendColor(l,w,v,x),M[0]=l,M[1]=w,M[2]=v,M[3]=x;l=qa[0];w=qa[1];if(l!==oa[0]||w!==oa[1])V.blendEquationSeparate(l,w),oa[0]=l,oa[1]=w;l=z[0];w=z[1];v=z[2];x=z[3];if(l!==H[0]||w!==H[1]||v!==H[2]||x!==H[3])V.blendFuncSeparate(l,w,v,x),
H[0]=l,H[1]=w,H[2]=v,H[3]=x;l=S.depth_enable;l!==F.depth_enable&&(l?V.enable(2929):V.disable(2929),F.depth_enable=l);l=S.depth_func;l!==F.depth_func&&(V.depthFunc(l),F.depth_func=l);l=la[0];w=la[1];if(l!==ta[0]||w!==ta[1])V.depthRange(l,w),ta[0]=l,ta[1]=w;l=S.depth_mask;l!==F.depth_mask&&(V.depthMask(l),F.depth_mask=l);l=da[0];w=da[1];v=da[2];x=da[3];if(l!==W[0]||w!==W[1]||v!==W[2]||x!==W[3])V.colorMask(l,w,v,x),W[0]=l,W[1]=w,W[2]=v,W[3]=x;l=S.cull_enable;l!==F.cull_enable&&(l?V.enable(2884):V.disable(2884),
F.cull_enable=l);l=S.cull_face;l!==F.cull_face&&(V.cullFace(l),F.cull_face=l);l=S.frontFace;l!==F.frontFace&&(V.frontFace(l),F.frontFace=l);l=S.lineWidth;l!==F.lineWidth&&(V.lineWidth(l),F.lineWidth=l);l=S.polygonOffset_enable;l!==F.polygonOffset_enable&&(l?V.enable(32823):V.disable(32823),F.polygonOffset_enable=l);l=Da[0];w=Da[1];if(l!==za[0]||w!==za[1])V.polygonOffset(l,w),za[0]=l,za[1]=w;l=S.sample_alpha;l!==F.sample_alpha&&(l?V.enable(32926):V.disable(32926),F.sample_alpha=l);l=S.sample_enable;
l!==F.sample_enable&&(l?V.enable(32928):V.disable(32928),F.sample_enable=l);l=ea[0];w=ea[1];if(l!==Ea[0]||w!==Ea[1])V.sampleCoverage(l,w),Ea[0]=l,Ea[1]=w;l=S.stencil_enable;l!==F.stencil_enable&&(l?V.enable(2960):V.disable(2960),F.stencil_enable=l);l=S.stencil_mask;l!==F.stencil_mask&&(V.stencilMask(l),F.stencil_mask=l);l=Aa[0];w=Aa[1];v=Aa[2];if(l!==Ra[0]||w!==Ra[1]||v!==Ra[2])V.stencilFunc(l,w,v),Ra[0]=l,Ra[1]=w,Ra[2]=v;l=Ya[0];w=Ya[1];v=Ya[2];x=Ya[3];if(l!==A[0]||w!==A[1]||v!==A[2]||x!==A[3])V.stencilOpSeparate(l,
w,v,x),A[0]=l,A[1]=w,A[2]=v,A[3]=x;l=na[0];w=na[1];v=na[2];x=na[3];if(l!==Tb[0]||w!==Tb[1]||v!==Tb[2]||x!==Tb[3])V.stencilOpSeparate(l,w,v,x),Tb[0]=l,Tb[1]=w,Tb[2]=v,Tb[3]=x;l=S.scissor_enable;l!==F.scissor_enable&&(l?V.enable(3089):V.disable(3089),F.scissor_enable=l);l=ja[0];w=ja[1];v=ja[2];x=ja[3];if(l!==pa[0]||w!==pa[1]||v!==pa[2]||x!==pa[3])V.scissor(l,w,v,x),pa[0]=l,pa[1]=w,pa[2]=v,pa[3]=x;l=t[0];w=t[1];v=t[2];x=t[3];if(l!==aa[0]||w!==aa[1]||v!==aa[2]||x!==aa[3])V.viewport(l,w,v,x),aa[0]=l,aa[1]=
w,aa[2]=v,aa[3]=x;F.dirty=!1}if(l=F.profile)q=performance.now(),c.count+=g;V.useProgram(ia.program);u.setVAO(null);w=fa.location;v=d[w];v.buffer||V.enableVertexAttribArray(w);if(v.type!==a.dtype||3!==v.size||v.buffer!==a||!1!==v.normalized||0!==v.offset||0!==v.stride)V.bindBuffer(34962,a.buffer),V.vertexAttribPointer(w,3,a.dtype,!1,0,0),v.type=a.dtype,v.size=3,v.buffer=a,v.normalized=!1,v.offset=0,v.stride=0;w=h.location;v=d[w];v.buffer||V.enableVertexAttribArray(w);if(v.type!==f.dtype||2!==v.size||
v.buffer!==f||!1!==v.normalized||0!==v.offset||0!==v.stride)V.bindBuffer(34962,f.buffer),V.vertexAttribPointer(w,2,f.dtype,!1,0,0),v.type=f.dtype,v.size=2,v.buffer=f,v.normalized=!1,v.offset=0,v.stride=0;w=e.call(this,ka,p,n);ca(w)&&16===w.length||B.commandRaise(r,k);V.uniformMatrix4fv(I.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Ca[0]=w[0],Ca[1]=w[1],Ca[2]=w[2],Ca[3]=w[3],Ca[4]=w[4],Ca[5]=w[5],Ca[6]=w[6],Ca[7]=w[7],Ca[8]=w[8],Ca[9]=w[9],Ca[10]=w[10],Ca[11]=w[11],Ca[12]=w[12],Ca[13]=
w[13],Ca[14]=w[14],Ca[15]=w[15],Ca));n=T.call(this,ka,p,n);ca(n)&&16===n.length||B.commandRaise(m,k);V.uniformMatrix4fv(U.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Hb[0]=n[0],Hb[1]=n[1],Hb[2]=n[2],Hb[3]=n[3],Hb[4]=n[4],Hb[5]=n[5],Hb[6]=n[6],Hb[7]=n[7],Hb[8]=n[8],Hb[9]=n[9],Hb[10]=n[10],Hb[11]=n[11],Hb[12]=n[12],Hb[13]=n[13],Hb[14]=n[14],Hb[15]=n[15],Hb));E&&V.bindBuffer(34963,E.buffer.buffer);w=E.primType;v=E.vertCount-0;0<=v||B.commandRaise(y,k);for(n=0;n<g;++n)p=b[n],(p=p.texture)&&
"framebuffer"===p._reglType&&(p=p.color[0]),"function"===typeof p&&"texture2d"===p._reglType||B.commandRaise(X,k),p=p._texture,V.uniform1i(C.location,p.bind()),v&&(V.drawElements(w,v,E.type,0<<(E.type-5121>>1)),p.unbind());u.setVAO(null);l&&(c.cpuTime+=performance.now()-q)}}},"$19,normal,position,projection,view":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,ia,e,r,T){var m,X,E,y,fa,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa,Ra,na;m=b.attributes;X=b.context;
E=b.current;y=b.draw;fa=b.framebuffer;I=b.gl;C=b.isArrayLike;h=b.next;U=b.shader;d=b.uniforms;ka=b.vao;F=h.blend_color;ma=E.blend_color;Ba=h.blend_equation;V=E.blend_equation;ca=h.blend_func;S=E.blend_func;O=h.colorMask;J=E.colorMask;u=h.depth_range;K=E.depth_range;M=h.polygonOffset_offset;qa=E.polygonOffset_offset;oa=h.sample_coverage;z=E.sample_coverage;H=h.scissor_box;da=E.scissor_box;W=h.stencil_func;la=E.stencil_func;ta=h.stencil_opBack;Da=E.stencil_opBack;za=h.stencil_opFront;ea=E.stencil_opFront;
Ea=h.viewport;ja=E.viewport;pa=new Float32Array(16);Aa=new Float32Array(16);Ra=new Float32Array(16);na=new Float32Array(16);return{draw:function(b){var q,A,t;b=fa.next;b!==fa.cur&&(b?I.bindFramebuffer(36160,b.framebuffer):I.bindFramebuffer(36160,null),fa.cur=b);if(E.dirty){var w;b=h.dither;b!==E.dither&&(b?I.enable(3024):I.disable(3024),E.dither=b);b=h.blend_enable;b!==E.blend_enable&&(b?I.enable(3042):I.disable(3042),E.blend_enable=b);b=F[0];A=F[1];t=F[2];w=F[3];if(b!==ma[0]||A!==ma[1]||t!==ma[2]||
w!==ma[3])I.blendColor(b,A,t,w),ma[0]=b,ma[1]=A,ma[2]=t,ma[3]=w;b=Ba[0];A=Ba[1];if(b!==V[0]||A!==V[1])I.blendEquationSeparate(b,A),V[0]=b,V[1]=A;b=ca[0];A=ca[1];t=ca[2];w=ca[3];if(b!==S[0]||A!==S[1]||t!==S[2]||w!==S[3])I.blendFuncSeparate(b,A,t,w),S[0]=b,S[1]=A,S[2]=t,S[3]=w;b=h.depth_enable;b!==E.depth_enable&&(b?I.enable(2929):I.disable(2929),E.depth_enable=b);b=h.depth_func;b!==E.depth_func&&(I.depthFunc(b),E.depth_func=b);b=u[0];A=u[1];if(b!==K[0]||A!==K[1])I.depthRange(b,A),K[0]=b,K[1]=A;b=h.depth_mask;
b!==E.depth_mask&&(I.depthMask(b),E.depth_mask=b);b=O[0];A=O[1];t=O[2];w=O[3];if(b!==J[0]||A!==J[1]||t!==J[2]||w!==J[3])I.colorMask(b,A,t,w),J[0]=b,J[1]=A,J[2]=t,J[3]=w;b=h.cull_enable;b!==E.cull_enable&&(b?I.enable(2884):I.disable(2884),E.cull_enable=b);b=h.cull_face;b!==E.cull_face&&(I.cullFace(b),E.cull_face=b);b=h.frontFace;b!==E.frontFace&&(I.frontFace(b),E.frontFace=b);b=h.lineWidth;b!==E.lineWidth&&(I.lineWidth(b),E.lineWidth=b);b=h.polygonOffset_enable;b!==E.polygonOffset_enable&&(b?I.enable(32823):
I.disable(32823),E.polygonOffset_enable=b);b=M[0];A=M[1];if(b!==qa[0]||A!==qa[1])I.polygonOffset(b,A),qa[0]=b,qa[1]=A;b=h.sample_alpha;b!==E.sample_alpha&&(b?I.enable(32926):I.disable(32926),E.sample_alpha=b);b=h.sample_enable;b!==E.sample_enable&&(b?I.enable(32928):I.disable(32928),E.sample_enable=b);b=oa[0];A=oa[1];if(b!==z[0]||A!==z[1])I.sampleCoverage(b,A),z[0]=b,z[1]=A;b=h.stencil_enable;b!==E.stencil_enable&&(b?I.enable(2960):I.disable(2960),E.stencil_enable=b);b=h.stencil_mask;b!==E.stencil_mask&&
(I.stencilMask(b),E.stencil_mask=b);b=W[0];A=W[1];t=W[2];if(b!==la[0]||A!==la[1]||t!==la[2])I.stencilFunc(b,A,t),la[0]=b,la[1]=A,la[2]=t;b=za[0];A=za[1];t=za[2];w=za[3];if(b!==ea[0]||A!==ea[1]||t!==ea[2]||w!==ea[3])I.stencilOpSeparate(b,A,t,w),ea[0]=b,ea[1]=A,ea[2]=t,ea[3]=w;b=ta[0];A=ta[1];t=ta[2];w=ta[3];if(b!==Da[0]||A!==Da[1]||t!==Da[2]||w!==Da[3])I.stencilOpSeparate(b,A,t,w),Da[0]=b,Da[1]=A,Da[2]=t,Da[3]=w;b=h.scissor_enable;b!==E.scissor_enable&&(b?I.enable(3089):I.disable(3089),E.scissor_enable=
b);b=H[0];A=H[1];t=H[2];w=H[3];if(b!==da[0]||A!==da[1]||t!==da[2]||w!==da[3])I.scissor(b,A,t,w),da[0]=b,da[1]=A,da[2]=t,da[3]=w;b=Ea[0];A=Ea[1];t=Ea[2];w=Ea[3];if(b!==ja[0]||A!==ja[1]||t!==ja[2]||w!==ja[3])I.viewport(b,A,t,w),ja[0]=b,ja[1]=A,ja[2]=t,ja[3]=w;E.dirty=!1}if(b=E.profile)q=performance.now(),c.count++;I.useProgram(l.program);ka.setVAO(null);A=e.location;t=m[A];t.buffer||I.enableVertexAttribArray(A);if(t.type!==a.dtype||3!==t.size||t.buffer!==a||!1!==t.normalized||0!==t.offset||0!==t.stride)I.bindBuffer(34962,
a.buffer),I.vertexAttribPointer(A,3,a.dtype,!1,0,0),t.type=a.dtype,t.size=3,t.buffer=a,t.normalized=!1,t.offset=0,t.stride=0;A=ia.location;t=m[A];t.buffer||I.enableVertexAttribArray(A);if(t.type!==f.dtype||3!==t.size||t.buffer!==f||!1!==t.normalized||0!==t.offset||0!==t.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(A,3,f.dtype,!1,0,0),t.type=f.dtype,t.size=3,t.buffer=f,t.normalized=!1,t.offset=0,t.stride=0;A=d[5];C(A)&&16===A.length||B.commandRaise(g,k);I.uniformMatrix4fv(r.location,!1,
Array.isArray(A)||A instanceof Float32Array?A:(pa[0]=A[0],pa[1]=A[1],pa[2]=A[2],pa[3]=A[3],pa[4]=A[4],pa[5]=A[5],pa[6]=A[6],pa[7]=A[7],pa[8]=A[8],pa[9]=A[9],pa[10]=A[10],pa[11]=A[11],pa[12]=A[12],pa[13]=A[13],pa[14]=A[14],pa[15]=A[15],pa));A=d[8];C(A)&&16===A.length||B.commandRaise(n,k);I.uniformMatrix4fv(T.location,!1,Array.isArray(A)||A instanceof Float32Array?A:(Aa[0]=A[0],Aa[1]=A[1],Aa[2]=A[2],Aa[3]=A[3],Aa[4]=A[4],Aa[5]=A[5],Aa[6]=A[6],Aa[7]=A[7],Aa[8]=A[8],Aa[9]=A[9],Aa[10]=A[10],Aa[11]=A[11],
Aa[12]=A[12],Aa[13]=A[13],Aa[14]=A[14],Aa[15]=A[15],Aa));p&&I.bindBuffer(34963,p.buffer.buffer);A=p.primType;t=p.vertCount-0;0<=t||B.commandRaise(v,k);t&&(I.drawElements(A,t,p.type,0<<(p.type-5121>>1)),ka.setVAO(null),b&&(c.cpuTime+=performance.now()-q))},scope:function(b,d,e){var h,g,l,m,r,q,u,w,n,p,z,v,C,F,ea,H,I,W,J,K,N,M,Q,O,P,na,ta,za,S,T,V,ja;if(h=E.profile)g=performance.now(),c.count++;l=y.elements;y.elements=R;m=y.offset;y.offset=0;r=R.vertCount-0;0<=r||B.commandRaise(G,k);q=y.count;y.count=
r;u=R.primType;r=y.primitive;y.primitive=u;u=x.buffer;x.buffer=f;w=x.divisor;x.divisor=0;n=x.normalized;x.normalized=!1;p=x.offset;x.offset=0;z=x.size;x.size=0;v=x.state;x.state=1;C=x.stride;x.stride=0;F=x.type;x.type=f.dtype;ea=x.w;x.w=0;H=x.x;x.x=0;I=x.y;x.y=0;W=x.z;x.z=0;J=D.buffer;D.buffer=a;K=D.divisor;D.divisor=0;N=D.normalized;D.normalized=!1;M=D.offset;D.offset=0;Q=D.size;D.size=0;O=D.state;D.state=1;P=D.stride;D.stride=0;na=D.type;D.type=a.dtype;ta=D.w;D.w=0;za=D.x;D.x=0;S=D.y;D.y=0;T=D.z;
D.z=0;V=U.vert;U.vert=10;ja=U.frag;U.frag=9;d(X,b,e);h&&(c.cpuTime+=performance.now()-g);y.elements=l;y.offset=m;y.count=q;y.primitive=r;x.buffer=u;x.divisor=w;x.normalized=n;x.offset=p;x.size=z;x.state=v;x.stride=C;x.type=F;x.w=ea;x.x=H;x.y=I;x.z=W;D.buffer=J;D.divisor=K;D.normalized=N;D.offset=M;D.size=Q;D.state=O;D.stride=P;D.type=na;D.w=ta;D.x=za;D.y=S;D.z=T;U.vert=V;U.frag=ja},batch:function(b,g){var l,t,n;l=fa.next;l!==fa.cur&&(l?I.bindFramebuffer(36160,l.framebuffer):I.bindFramebuffer(36160,
null),fa.cur=l);if(E.dirty){var p,v;l=h.dither;l!==E.dither&&(l?I.enable(3024):I.disable(3024),E.dither=l);l=h.blend_enable;l!==E.blend_enable&&(l?I.enable(3042):I.disable(3042),E.blend_enable=l);l=F[0];n=F[1];p=F[2];v=F[3];if(l!==ma[0]||n!==ma[1]||p!==ma[2]||v!==ma[3])I.blendColor(l,n,p,v),ma[0]=l,ma[1]=n,ma[2]=p,ma[3]=v;l=Ba[0];n=Ba[1];if(l!==V[0]||n!==V[1])I.blendEquationSeparate(l,n),V[0]=l,V[1]=n;l=ca[0];n=ca[1];p=ca[2];v=ca[3];if(l!==S[0]||n!==S[1]||p!==S[2]||v!==S[3])I.blendFuncSeparate(l,
n,p,v),S[0]=l,S[1]=n,S[2]=p,S[3]=v;l=h.depth_enable;l!==E.depth_enable&&(l?I.enable(2929):I.disable(2929),E.depth_enable=l);l=h.depth_func;l!==E.depth_func&&(I.depthFunc(l),E.depth_func=l);l=u[0];n=u[1];if(l!==K[0]||n!==K[1])I.depthRange(l,n),K[0]=l,K[1]=n;l=h.depth_mask;l!==E.depth_mask&&(I.depthMask(l),E.depth_mask=l);l=O[0];n=O[1];p=O[2];v=O[3];if(l!==J[0]||n!==J[1]||p!==J[2]||v!==J[3])I.colorMask(l,n,p,v),J[0]=l,J[1]=n,J[2]=p,J[3]=v;l=h.cull_enable;l!==E.cull_enable&&(l?I.enable(2884):I.disable(2884),
E.cull_enable=l);l=h.cull_face;l!==E.cull_face&&(I.cullFace(l),E.cull_face=l);l=h.frontFace;l!==E.frontFace&&(I.frontFace(l),E.frontFace=l);l=h.lineWidth;l!==E.lineWidth&&(I.lineWidth(l),E.lineWidth=l);l=h.polygonOffset_enable;l!==E.polygonOffset_enable&&(l?I.enable(32823):I.disable(32823),E.polygonOffset_enable=l);l=M[0];n=M[1];if(l!==qa[0]||n!==qa[1])I.polygonOffset(l,n),qa[0]=l,qa[1]=n;l=h.sample_alpha;l!==E.sample_alpha&&(l?I.enable(32926):I.disable(32926),E.sample_alpha=l);l=h.sample_enable;
l!==E.sample_enable&&(l?I.enable(32928):I.disable(32928),E.sample_enable=l);l=oa[0];n=oa[1];if(l!==z[0]||n!==z[1])I.sampleCoverage(l,n),z[0]=l,z[1]=n;l=h.stencil_enable;l!==E.stencil_enable&&(l?I.enable(2960):I.disable(2960),E.stencil_enable=l);l=h.stencil_mask;l!==E.stencil_mask&&(I.stencilMask(l),E.stencil_mask=l);l=W[0];n=W[1];p=W[2];if(l!==la[0]||n!==la[1]||p!==la[2])I.stencilFunc(l,n,p),la[0]=l,la[1]=n,la[2]=p;l=za[0];n=za[1];p=za[2];v=za[3];if(l!==ea[0]||n!==ea[1]||p!==ea[2]||v!==ea[3])I.stencilOpSeparate(l,
n,p,v),ea[0]=l,ea[1]=n,ea[2]=p,ea[3]=v;l=ta[0];n=ta[1];p=ta[2];v=ta[3];if(l!==Da[0]||n!==Da[1]||p!==Da[2]||v!==Da[3])I.stencilOpSeparate(l,n,p,v),Da[0]=l,Da[1]=n,Da[2]=p,Da[3]=v;l=h.scissor_enable;l!==E.scissor_enable&&(l?I.enable(3089):I.disable(3089),E.scissor_enable=l);l=H[0];n=H[1];p=H[2];v=H[3];if(l!==da[0]||n!==da[1]||p!==da[2]||v!==da[3])I.scissor(l,n,p,v),da[0]=l,da[1]=n,da[2]=p,da[3]=v;l=Ea[0];n=Ea[1];p=Ea[2];v=Ea[3];if(l!==ja[0]||n!==ja[1]||p!==ja[2]||v!==ja[3])I.viewport(l,n,p,v),ja[0]=
l,ja[1]=n,ja[2]=p,ja[3]=v;E.dirty=!1}if(l=E.profile)t=performance.now(),c.count+=g;I.useProgram(P.program);ka.setVAO(null);n=e.location;p=m[n];p.buffer||I.enableVertexAttribArray(n);if(p.type!==a.dtype||3!==p.size||p.buffer!==a||!1!==p.normalized||0!==p.offset||0!==p.stride)I.bindBuffer(34962,a.buffer),I.vertexAttribPointer(n,3,a.dtype,!1,0,0),p.type=a.dtype,p.size=3,p.buffer=a,p.normalized=!1,p.offset=0,p.stride=0;n=ia.location;p=m[n];p.buffer||I.enableVertexAttribArray(n);if(p.type!==f.dtype||3!==
p.size||p.buffer!==f||!1!==p.normalized||0!==p.offset||0!==p.stride)I.bindBuffer(34962,f.buffer),I.vertexAttribPointer(n,3,f.dtype,!1,0,0),p.type=f.dtype,p.size=3,p.buffer=f,p.normalized=!1,p.offset=0,p.stride=0;n=d[5];C(n)&&16===n.length||B.commandRaise(w,k);I.uniformMatrix4fv(r.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ra[0]=n[0],Ra[1]=n[1],Ra[2]=n[2],Ra[3]=n[3],Ra[4]=n[4],Ra[5]=n[5],Ra[6]=n[6],Ra[7]=n[7],Ra[8]=n[8],Ra[9]=n[9],Ra[10]=n[10],Ra[11]=n[11],Ra[12]=n[12],Ra[13]=n[13],
Ra[14]=n[14],Ra[15]=n[15],Ra));n=d[8];C(n)&&16===n.length||B.commandRaise(Q,k);I.uniformMatrix4fv(T.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(na[0]=n[0],na[1]=n[1],na[2]=n[2],na[3]=n[3],na[4]=n[4],na[5]=n[5],na[6]=n[6],na[7]=n[7],na[8]=n[8],na[9]=n[9],na[10]=n[10],na[11]=n[11],na[12]=n[12],na[13]=n[13],na[14]=n[14],na[15]=n[15],na));q&&I.bindBuffer(34963,q.buffer.buffer);p=q.primType;v=q.vertCount-0;0<=v||B.commandRaise(N,k);for(n=0;n<g;++n)v&&I.drawElements(p,v,q.type,0<<(q.type-
5121>>1));ka.setVAO(null);l&&(c.cpuTime+=performance.now()-t)}}},"$14,angle,color,position":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q){var q,N,ia,e,r,T,m,X,E,y,fa,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta;q=b.attributes;N=b.context;ia=b.current;e=b.draw;r=b.elements;T=b.framebuffer;m=b.gl;X=b.isArrayLike;E=b.next;y=b.shader;fa=b.uniforms;I=b.vao;C=E.blend_color;h=ia.blend_color;U=E.blend_equation;d=ia.blend_equation;ka=E.blend_func;F=ia.blend_func;ma=E.colorMask;Ba=ia.colorMask;
V=E.depth_range;ca=ia.depth_range;S=E.polygonOffset_offset;O=ia.polygonOffset_offset;J=E.sample_coverage;u=ia.sample_coverage;K=E.scissor_box;M=ia.scissor_box;qa=E.stencil_func;oa=ia.stencil_func;z=E.stencil_opBack;H=ia.stencil_opBack;da=E.stencil_opFront;W=ia.stencil_opFront;la=E.viewport;ta=ia.viewport;return{draw:function(b){var p,v,y,x;p=T.next;p!==T.cur&&(p?m.bindFramebuffer(36160,p.framebuffer):m.bindFramebuffer(36160,null),T.cur=p);if(ia.dirty){var D;p=E.dither;p!==ia.dither&&(p?m.enable(3024):
m.disable(3024),ia.dither=p);p=E.blend_enable;p!==ia.blend_enable&&(p?m.enable(3042):m.disable(3042),ia.blend_enable=p);p=C[0];y=C[1];x=C[2];D=C[3];if(p!==h[0]||y!==h[1]||x!==h[2]||D!==h[3])m.blendColor(p,y,x,D),h[0]=p,h[1]=y,h[2]=x,h[3]=D;p=U[0];y=U[1];if(p!==d[0]||y!==d[1])m.blendEquationSeparate(p,y),d[0]=p,d[1]=y;p=ka[0];y=ka[1];x=ka[2];D=ka[3];if(p!==F[0]||y!==F[1]||x!==F[2]||D!==F[3])m.blendFuncSeparate(p,y,x,D),F[0]=p,F[1]=y,F[2]=x,F[3]=D;p=E.depth_func;p!==ia.depth_func&&(m.depthFunc(p),ia.depth_func=
p);p=V[0];y=V[1];if(p!==ca[0]||y!==ca[1])m.depthRange(p,y),ca[0]=p,ca[1]=y;p=E.depth_mask;p!==ia.depth_mask&&(m.depthMask(p),ia.depth_mask=p);p=ma[0];y=ma[1];x=ma[2];D=ma[3];if(p!==Ba[0]||y!==Ba[1]||x!==Ba[2]||D!==Ba[3])m.colorMask(p,y,x,D),Ba[0]=p,Ba[1]=y,Ba[2]=x,Ba[3]=D;p=E.cull_enable;p!==ia.cull_enable&&(p?m.enable(2884):m.disable(2884),ia.cull_enable=p);p=E.cull_face;p!==ia.cull_face&&(m.cullFace(p),ia.cull_face=p);p=E.frontFace;p!==ia.frontFace&&(m.frontFace(p),ia.frontFace=p);p=E.lineWidth;
p!==ia.lineWidth&&(m.lineWidth(p),ia.lineWidth=p);p=E.polygonOffset_enable;p!==ia.polygonOffset_enable&&(p?m.enable(32823):m.disable(32823),ia.polygonOffset_enable=p);p=S[0];y=S[1];if(p!==O[0]||y!==O[1])m.polygonOffset(p,y),O[0]=p,O[1]=y;p=E.sample_alpha;p!==ia.sample_alpha&&(p?m.enable(32926):m.disable(32926),ia.sample_alpha=p);p=E.sample_enable;p!==ia.sample_enable&&(p?m.enable(32928):m.disable(32928),ia.sample_enable=p);p=J[0];y=J[1];if(p!==u[0]||y!==u[1])m.sampleCoverage(p,y),u[0]=p,u[1]=y;p=
E.stencil_enable;p!==ia.stencil_enable&&(p?m.enable(2960):m.disable(2960),ia.stencil_enable=p);p=E.stencil_mask;p!==ia.stencil_mask&&(m.stencilMask(p),ia.stencil_mask=p);p=qa[0];y=qa[1];x=qa[2];if(p!==oa[0]||y!==oa[1]||x!==oa[2])m.stencilFunc(p,y,x),oa[0]=p,oa[1]=y,oa[2]=x;p=da[0];y=da[1];x=da[2];D=da[3];if(p!==W[0]||y!==W[1]||x!==W[2]||D!==W[3])m.stencilOpSeparate(p,y,x,D),W[0]=p,W[1]=y,W[2]=x,W[3]=D;p=z[0];y=z[1];x=z[2];D=z[3];if(p!==H[0]||y!==H[1]||x!==H[2]||D!==H[3])m.stencilOpSeparate(p,y,x,
D),H[0]=p,H[1]=y,H[2]=x,H[3]=D;p=E.scissor_enable;p!==ia.scissor_enable&&(p?m.enable(3089):m.disable(3089),ia.scissor_enable=p);p=K[0];y=K[1];x=K[2];D=K[3];if(p!==M[0]||y!==M[1]||x!==M[2]||D!==M[3])m.scissor(p,y,x,D),M[0]=p,M[1]=y,M[2]=x,M[3]=D;p=la[0];y=la[1];x=la[2];D=la[3];if(p!==ta[0]||y!==ta[1]||x!==ta[2]||D!==ta[3])m.viewport(p,y,x,D),ta[0]=p,ta[1]=y,ta[2]=x,ta[3]=D}m.disable(2929);ia.depth_enable=!1;if(p=ia.profile)v=performance.now(),c.count++;m.useProgram(l.program);I.setVAO(null);y=Q.location;
x=q[y];x.buffer||m.enableVertexAttribArray(y);if(x.type!==a.dtype||2!==x.size||x.buffer!==a||!1!==x.normalized||0!==x.offset||0!==x.stride)m.bindBuffer(34962,a.buffer),m.vertexAttribPointer(y,2,a.dtype,!1,0,0),x.type=a.dtype,x.size=2,x.buffer=a,x.normalized=!1,x.offset=0,x.stride=0;y=f.call(this,N,b,0);"number"!==typeof y&&B.commandRaise(g,k);m.uniform1f(P.location,y);b=b.color;X(b)&&4===b.length||B.commandRaise(n,k);m.uniform4f(w.location,b[0],b[1],b[2],b[3]);(b=e.elements)?m.bindBuffer(34963,b.buffer.buffer):
I.currentVAO&&(b=r.getElements(I.currentVAO.elements))&&m.bindBuffer(34963,b.buffer.buffer);y=e.primitive;x=e.offset;b?m.drawElements(y,3,b.type,x<<(b.type-5121>>1)):m.drawArrays(y,x,3);ia.dirty=!0;I.setVAO(null);p&&(c.cpuTime+=performance.now()-v)},scope:function(b,d,f){var h,g,k,l,m,r,n,q,u,t,B,w,z,x,D,C,G,F,H,I;h=E.depth_enable;E.depth_enable=!1;if(g=ia.profile)k=performance.now(),c.count++;l=e.count;e.count=3;m=p.call(this,N,b,f);r=fa[3];fa[3]=m;n=b.color;m=fa[4];fa[4]=n;n=v.buffer;v.buffer=a;
q=v.divisor;v.divisor=0;u=v.normalized;v.normalized=!1;t=v.offset;v.offset=0;B=v.size;v.size=0;w=v.state;v.state=1;z=v.stride;v.stride=0;x=v.type;v.type=a.dtype;D=v.w;v.w=0;C=v.x;v.x=0;G=v.y;v.y=0;F=v.z;v.z=0;H=y.vert;y.vert=2;I=y.frag;y.frag=1;ia.dirty=!0;d(N,b,f);E.depth_enable=h;g&&(c.cpuTime+=performance.now()-k);e.count=l;fa[3]=r;fa[4]=m;v.buffer=n;v.divisor=q;v.normalized=u;v.offset=t;v.size=B;v.state=w;v.stride=z;v.type=x;v.w=D;v.x=C;v.y=G;v.z=F;y.vert=H;y.frag=I;ia.dirty=!0},batch:function(b,
f){var g,l,p,n;g=T.next;g!==T.cur&&(g?m.bindFramebuffer(36160,g.framebuffer):m.bindFramebuffer(36160,null),T.cur=g);if(ia.dirty){var v,y,na;g=E.dither;g!==ia.dither&&(g?m.enable(3024):m.disable(3024),ia.dither=g);g=E.blend_enable;g!==ia.blend_enable&&(g?m.enable(3042):m.disable(3042),ia.blend_enable=g);g=C[0];v=C[1];y=C[2];na=C[3];if(g!==h[0]||v!==h[1]||y!==h[2]||na!==h[3])m.blendColor(g,v,y,na),h[0]=g,h[1]=v,h[2]=y,h[3]=na;g=U[0];v=U[1];if(g!==d[0]||v!==d[1])m.blendEquationSeparate(g,v),d[0]=g,d[1]=
v;g=ka[0];v=ka[1];y=ka[2];na=ka[3];if(g!==F[0]||v!==F[1]||y!==F[2]||na!==F[3])m.blendFuncSeparate(g,v,y,na),F[0]=g,F[1]=v,F[2]=y,F[3]=na;g=E.depth_func;g!==ia.depth_func&&(m.depthFunc(g),ia.depth_func=g);g=V[0];v=V[1];if(g!==ca[0]||v!==ca[1])m.depthRange(g,v),ca[0]=g,ca[1]=v;g=E.depth_mask;g!==ia.depth_mask&&(m.depthMask(g),ia.depth_mask=g);g=ma[0];v=ma[1];y=ma[2];na=ma[3];if(g!==Ba[0]||v!==Ba[1]||y!==Ba[2]||na!==Ba[3])m.colorMask(g,v,y,na),Ba[0]=g,Ba[1]=v,Ba[2]=y,Ba[3]=na;g=E.cull_enable;g!==ia.cull_enable&&
(g?m.enable(2884):m.disable(2884),ia.cull_enable=g);g=E.cull_face;g!==ia.cull_face&&(m.cullFace(g),ia.cull_face=g);g=E.frontFace;g!==ia.frontFace&&(m.frontFace(g),ia.frontFace=g);g=E.lineWidth;g!==ia.lineWidth&&(m.lineWidth(g),ia.lineWidth=g);g=E.polygonOffset_enable;g!==ia.polygonOffset_enable&&(g?m.enable(32823):m.disable(32823),ia.polygonOffset_enable=g);g=S[0];v=S[1];if(g!==O[0]||v!==O[1])m.polygonOffset(g,v),O[0]=g,O[1]=v;g=E.sample_alpha;g!==ia.sample_alpha&&(g?m.enable(32926):m.disable(32926),
ia.sample_alpha=g);g=E.sample_enable;g!==ia.sample_enable&&(g?m.enable(32928):m.disable(32928),ia.sample_enable=g);g=J[0];v=J[1];if(g!==u[0]||v!==u[1])m.sampleCoverage(g,v),u[0]=g,u[1]=v;g=E.stencil_enable;g!==ia.stencil_enable&&(g?m.enable(2960):m.disable(2960),ia.stencil_enable=g);g=E.stencil_mask;g!==ia.stencil_mask&&(m.stencilMask(g),ia.stencil_mask=g);g=qa[0];v=qa[1];y=qa[2];if(g!==oa[0]||v!==oa[1]||y!==oa[2])m.stencilFunc(g,v,y),oa[0]=g,oa[1]=v,oa[2]=y;g=da[0];v=da[1];y=da[2];na=da[3];if(g!==
W[0]||v!==W[1]||y!==W[2]||na!==W[3])m.stencilOpSeparate(g,v,y,na),W[0]=g,W[1]=v,W[2]=y,W[3]=na;g=z[0];v=z[1];y=z[2];na=z[3];if(g!==H[0]||v!==H[1]||y!==H[2]||na!==H[3])m.stencilOpSeparate(g,v,y,na),H[0]=g,H[1]=v,H[2]=y,H[3]=na;g=E.scissor_enable;g!==ia.scissor_enable&&(g?m.enable(3089):m.disable(3089),ia.scissor_enable=g);g=K[0];v=K[1];y=K[2];na=K[3];if(g!==M[0]||v!==M[1]||y!==M[2]||na!==M[3])m.scissor(g,v,y,na),M[0]=g,M[1]=v,M[2]=y,M[3]=na;g=la[0];v=la[1];y=la[2];na=la[3];if(g!==ta[0]||v!==ta[1]||
y!==ta[2]||na!==ta[3])m.viewport(g,v,y,na),ta[0]=g,ta[1]=v,ta[2]=y,ta[3]=na}m.disable(2929);ia.depth_enable=!1;if(g=ia.profile)l=performance.now(),c.count+=f;m.useProgram(R.program);I.setVAO(null);v=Q.location;y=q[v];y.buffer||m.enableVertexAttribArray(v);if(y.type!==a.dtype||2!==y.size||y.buffer!==a||!1!==y.normalized||0!==y.offset||0!==y.stride)m.bindBuffer(34962,a.buffer),m.vertexAttribPointer(v,2,a.dtype,!1,0,0),y.type=a.dtype,y.size=2,y.buffer=a,y.normalized=!1,y.offset=0,y.stride=0;p=G.call(this,
N,n,p);"number"!==typeof p&&B.commandRaise(x,k);m.uniform1f(P.location,p);(v=e.elements)?m.bindBuffer(34963,v.buffer.buffer):I.currentVAO&&(v=r.getElements(I.currentVAO.elements))&&m.bindBuffer(34963,v.buffer.buffer);y=e.primitive;na=e.offset;for(p=0;p<f;++p){n=b[p];var fa,ra,A,t,aa,va,xa;fa=n.color;X(fa)&&4===fa.length||B.commandRaise(D,k);n=fa[0];A=fa[1];aa=fa[2];fa=fa[3];p&&ra===n&&t===A&&va===aa&&xa===fa||(ra=n,t=A,va=aa,xa=fa,m.uniform4f(w.location,n,A,aa,fa));v?m.drawElements(y,3,v.type,na<<
(v.type-5121>>1)):m.drawArrays(y,na,3)}ia.dirty=!0;I.setVAO(null);g&&(c.cpuTime+=performance.now()-l)}}},"$13,color,position":function(b,B,k,c,l,a,f,g,n,p,v,R,G,x,D,P){var w,Q,q,N,ia,e,r,T,m,X,E,y,fa,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da;w=b.attributes;Q=b.context;q=b.current;N=b.draw;ia=b.framebuffer;e=b.gl;r=b.next;T=b.shader;m=b.uniforms;X=b.vao;E=r.blend_color;y=q.blend_color;fa=r.blend_equation;I=q.blend_equation;C=r.blend_func;h=q.blend_func;U=r.colorMask;d=q.colorMask;ka=r.depth_range;
F=q.depth_range;ma=r.polygonOffset_offset;Ba=q.polygonOffset_offset;V=r.sample_coverage;ca=q.sample_coverage;S=r.scissor_box;O=q.scissor_box;J=r.stencil_func;u=q.stencil_func;K=r.stencil_opBack;M=q.stencil_opBack;qa=r.stencil_opFront;oa=q.stencil_opFront;z=r.viewport;H=q.viewport;da=[1,0,0,1];return{draw:function(b){var m,p,n;b=ia.next;b!==ia.cur&&(b?e.bindFramebuffer(36160,b.framebuffer):e.bindFramebuffer(36160,null),ia.cur=b);if(q.dirty){var v;b=r.dither;b!==q.dither&&(b?e.enable(3024):e.disable(3024),
q.dither=b);b=r.blend_enable;b!==q.blend_enable&&(b?e.enable(3042):e.disable(3042),q.blend_enable=b);b=E[0];p=E[1];n=E[2];v=E[3];if(b!==y[0]||p!==y[1]||n!==y[2]||v!==y[3])e.blendColor(b,p,n,v),y[0]=b,y[1]=p,y[2]=n,y[3]=v;b=fa[0];p=fa[1];if(b!==I[0]||p!==I[1])e.blendEquationSeparate(b,p),I[0]=b,I[1]=p;b=C[0];p=C[1];n=C[2];v=C[3];if(b!==h[0]||p!==h[1]||n!==h[2]||v!==h[3])e.blendFuncSeparate(b,p,n,v),h[0]=b,h[1]=p,h[2]=n,h[3]=v;b=r.depth_enable;b!==q.depth_enable&&(b?e.enable(2929):e.disable(2929),q.depth_enable=
b);b=r.depth_func;b!==q.depth_func&&(e.depthFunc(b),q.depth_func=b);b=ka[0];p=ka[1];if(b!==F[0]||p!==F[1])e.depthRange(b,p),F[0]=b,F[1]=p;b=r.depth_mask;b!==q.depth_mask&&(e.depthMask(b),q.depth_mask=b);b=U[0];p=U[1];n=U[2];v=U[3];if(b!==d[0]||p!==d[1]||n!==d[2]||v!==d[3])e.colorMask(b,p,n,v),d[0]=b,d[1]=p,d[2]=n,d[3]=v;b=r.cull_enable;b!==q.cull_enable&&(b?e.enable(2884):e.disable(2884),q.cull_enable=b);b=r.cull_face;b!==q.cull_face&&(e.cullFace(b),q.cull_face=b);b=r.frontFace;b!==q.frontFace&&(e.frontFace(b),
q.frontFace=b);b=r.polygonOffset_enable;b!==q.polygonOffset_enable&&(b?e.enable(32823):e.disable(32823),q.polygonOffset_enable=b);b=ma[0];p=ma[1];if(b!==Ba[0]||p!==Ba[1])e.polygonOffset(b,p),Ba[0]=b,Ba[1]=p;b=r.sample_alpha;b!==q.sample_alpha&&(b?e.enable(32926):e.disable(32926),q.sample_alpha=b);b=r.sample_enable;b!==q.sample_enable&&(b?e.enable(32928):e.disable(32928),q.sample_enable=b);b=V[0];p=V[1];if(b!==ca[0]||p!==ca[1])e.sampleCoverage(b,p),ca[0]=b,ca[1]=p;b=r.stencil_enable;b!==q.stencil_enable&&
(b?e.enable(2960):e.disable(2960),q.stencil_enable=b);b=r.stencil_mask;b!==q.stencil_mask&&(e.stencilMask(b),q.stencil_mask=b);b=J[0];p=J[1];n=J[2];if(b!==u[0]||p!==u[1]||n!==u[2])e.stencilFunc(b,p,n),u[0]=b,u[1]=p,u[2]=n;b=qa[0];p=qa[1];n=qa[2];v=qa[3];if(b!==oa[0]||p!==oa[1]||n!==oa[2]||v!==oa[3])e.stencilOpSeparate(b,p,n,v),oa[0]=b,oa[1]=p,oa[2]=n,oa[3]=v;b=K[0];p=K[1];n=K[2];v=K[3];if(b!==M[0]||p!==M[1]||n!==M[2]||v!==M[3])e.stencilOpSeparate(b,p,n,v),M[0]=b,M[1]=p,M[2]=n,M[3]=v;b=r.scissor_enable;
b!==q.scissor_enable&&(b?e.enable(3089):e.disable(3089),q.scissor_enable=b);b=S[0];p=S[1];n=S[2];v=S[3];if(b!==O[0]||p!==O[1]||n!==O[2]||v!==O[3])e.scissor(b,p,n,v),O[0]=b,O[1]=p,O[2]=n,O[3]=v;b=z[0];p=z[1];n=z[2];v=z[3];if(b!==H[0]||p!==H[1]||n!==H[2]||v!==H[3])e.viewport(b,p,n,v),H[0]=b,H[1]=p,H[2]=n,H[3]=v}e.lineWidth(1);q.lineWidth=1;if(b=q.profile)m=performance.now(),c.count++;e.useProgram(l.program);X.setVAO(null);p=P.location;n=w[p];n.buffer||e.enableVertexAttribArray(p);if(n.type!==a.dtype||
2!==n.size||n.buffer!==a||!1!==n.normalized||0!==n.offset||0!==n.stride)e.bindBuffer(34962,a.buffer),e.vertexAttribPointer(p,2,a.dtype,!1,0,0),n.type=a.dtype,n.size=2,n.buffer=a,n.normalized=!1,n.offset=0,n.stride=0;e.uniform4f(D.location,1,0,0,1);f&&e.bindBuffer(34963,f.buffer.buffer);p=f.primType;n=f.vertCount-0;0<=n||B.commandRaise(g,k);n&&(e.drawElements(p,n,f.type,0<<(f.type-5121>>1)),q.dirty=!0,X.setVAO(null),b&&(c.cpuTime+=performance.now()-m))},scope:function(b,d,e){var f,h,g,l,u,w,y,z,x,
D,C,A,t,G,E,F,H,I,R,L,J,K;f=r.lineWidth;r.lineWidth=1;if(h=q.profile)g=performance.now(),c.count++;l=N.elements;N.elements=n;u=N.offset;N.offset=0;w=n.vertCount-0;0<=w||B.commandRaise(p,k);y=N.count;N.count=w;z=n.primType;w=N.primitive;N.primitive=z;z=m[3];m[3]=da;x=v.buffer;v.buffer=a;D=v.divisor;v.divisor=0;C=v.normalized;v.normalized=!1;A=v.offset;v.offset=0;t=v.size;v.size=0;G=v.state;v.state=1;E=v.stride;v.stride=0;F=v.type;v.type=a.dtype;H=v.w;v.w=0;I=v.x;v.x=0;R=v.y;v.y=0;L=v.z;v.z=0;J=T.vert;
T.vert=2;K=T.frag;T.frag=1;q.dirty=!0;d(Q,b,e);r.lineWidth=f;h&&(c.cpuTime+=performance.now()-g);N.elements=l;N.offset=u;N.count=y;N.primitive=w;m[3]=z;v.buffer=x;v.divisor=D;v.normalized=C;v.offset=A;v.size=t;v.state=G;v.stride=E;v.type=F;v.w=H;v.x=I;v.y=R;v.z=L;T.vert=J;T.frag=K;q.dirty=!0},batch:function(b,f){var g,l,m;g=ia.next;g!==ia.cur&&(g?e.bindFramebuffer(36160,g.framebuffer):e.bindFramebuffer(36160,null),ia.cur=g);if(q.dirty){var p,n;g=r.dither;g!==q.dither&&(g?e.enable(3024):e.disable(3024),
q.dither=g);g=r.blend_enable;g!==q.blend_enable&&(g?e.enable(3042):e.disable(3042),q.blend_enable=g);g=E[0];m=E[1];p=E[2];n=E[3];if(g!==y[0]||m!==y[1]||p!==y[2]||n!==y[3])e.blendColor(g,m,p,n),y[0]=g,y[1]=m,y[2]=p,y[3]=n;g=fa[0];m=fa[1];if(g!==I[0]||m!==I[1])e.blendEquationSeparate(g,m),I[0]=g,I[1]=m;g=C[0];m=C[1];p=C[2];n=C[3];if(g!==h[0]||m!==h[1]||p!==h[2]||n!==h[3])e.blendFuncSeparate(g,m,p,n),h[0]=g,h[1]=m,h[2]=p,h[3]=n;g=r.depth_enable;g!==q.depth_enable&&(g?e.enable(2929):e.disable(2929),q.depth_enable=
g);g=r.depth_func;g!==q.depth_func&&(e.depthFunc(g),q.depth_func=g);g=ka[0];m=ka[1];if(g!==F[0]||m!==F[1])e.depthRange(g,m),F[0]=g,F[1]=m;g=r.depth_mask;g!==q.depth_mask&&(e.depthMask(g),q.depth_mask=g);g=U[0];m=U[1];p=U[2];n=U[3];if(g!==d[0]||m!==d[1]||p!==d[2]||n!==d[3])e.colorMask(g,m,p,n),d[0]=g,d[1]=m,d[2]=p,d[3]=n;g=r.cull_enable;g!==q.cull_enable&&(g?e.enable(2884):e.disable(2884),q.cull_enable=g);g=r.cull_face;g!==q.cull_face&&(e.cullFace(g),q.cull_face=g);g=r.frontFace;g!==q.frontFace&&(e.frontFace(g),
q.frontFace=g);g=r.polygonOffset_enable;g!==q.polygonOffset_enable&&(g?e.enable(32823):e.disable(32823),q.polygonOffset_enable=g);g=ma[0];m=ma[1];if(g!==Ba[0]||m!==Ba[1])e.polygonOffset(g,m),Ba[0]=g,Ba[1]=m;g=r.sample_alpha;g!==q.sample_alpha&&(g?e.enable(32926):e.disable(32926),q.sample_alpha=g);g=r.sample_enable;g!==q.sample_enable&&(g?e.enable(32928):e.disable(32928),q.sample_enable=g);g=V[0];m=V[1];if(g!==ca[0]||m!==ca[1])e.sampleCoverage(g,m),ca[0]=g,ca[1]=m;g=r.stencil_enable;g!==q.stencil_enable&&
(g?e.enable(2960):e.disable(2960),q.stencil_enable=g);g=r.stencil_mask;g!==q.stencil_mask&&(e.stencilMask(g),q.stencil_mask=g);g=J[0];m=J[1];p=J[2];if(g!==u[0]||m!==u[1]||p!==u[2])e.stencilFunc(g,m,p),u[0]=g,u[1]=m,u[2]=p;g=qa[0];m=qa[1];p=qa[2];n=qa[3];if(g!==oa[0]||m!==oa[1]||p!==oa[2]||n!==oa[3])e.stencilOpSeparate(g,m,p,n),oa[0]=g,oa[1]=m,oa[2]=p,oa[3]=n;g=K[0];m=K[1];p=K[2];n=K[3];if(g!==M[0]||m!==M[1]||p!==M[2]||n!==M[3])e.stencilOpSeparate(g,m,p,n),M[0]=g,M[1]=m,M[2]=p,M[3]=n;g=r.scissor_enable;
g!==q.scissor_enable&&(g?e.enable(3089):e.disable(3089),q.scissor_enable=g);g=S[0];m=S[1];p=S[2];n=S[3];if(g!==O[0]||m!==O[1]||p!==O[2]||n!==O[3])e.scissor(g,m,p,n),O[0]=g,O[1]=m,O[2]=p,O[3]=n;g=z[0];m=z[1];p=z[2];n=z[3];if(g!==H[0]||m!==H[1]||p!==H[2]||n!==H[3])e.viewport(g,m,p,n),H[0]=g,H[1]=m,H[2]=p,H[3]=n}e.lineWidth(1);q.lineWidth=1;if(g=q.profile)l=performance.now(),c.count+=f;e.useProgram(R.program);X.setVAO(null);m=P.location;p=w[m];p.buffer||e.enableVertexAttribArray(m);if(p.type!==a.dtype||
2!==p.size||p.buffer!==a||!1!==p.normalized||0!==p.offset||0!==p.stride)e.bindBuffer(34962,a.buffer),e.vertexAttribPointer(m,2,a.dtype,!1,0,0),p.type=a.dtype,p.size=2,p.buffer=a,p.normalized=!1,p.offset=0,p.stride=0;e.uniform4f(D.location,1,0,0,1);G&&e.bindBuffer(34963,G.buffer.buffer);p=G.primType;n=G.vertCount-0;0<=n||B.commandRaise(x,k);for(m=0;m<f;++m)n&&e.drawElements(p,n,G.type,0<<(G.type-5121>>1));q.dirty=!0;X.setVAO(null);g&&(c.cpuTime+=performance.now()-l)}}},"$20,mouse,position,t,texture":function(b,
B,k,c,l,a,f,g,n,p,v,R,G,x,D,P,w,Q,q,N,fa,e,r,T,m){var X,E,y,ra,I,C,h,U,d,ka,F,ma,Ba,V,ca,S,O,J,u,K,M,qa,oa,z,H,da,W,la,ta,Da,za,ea,Ea,ja,pa,Aa;X=b.attributes;E=b.context;y=b.current;ra=b.draw;I=b.elements;C=b.framebuffer;h=b.gl;U=b.isArrayLike;d=b.next;ka=b.shader;F=b.uniforms;ma=b.vao;Ba=d.blend_color;V=y.blend_color;ca=d.blend_equation;S=y.blend_equation;O=d.blend_func;J=y.blend_func;u=d.colorMask;K=y.colorMask;M=d.depth_range;qa=y.depth_range;oa=d.polygonOffset_offset;z=y.polygonOffset_offset;
H=d.sample_coverage;da=y.sample_coverage;W=d.scissor_box;la=y.scissor_box;ta=d.stencil_func;Da=y.stencil_func;za=d.stencil_opBack;ea=y.stencil_opBack;Ea=d.stencil_opFront;ja=y.stencil_opFront;pa=d.viewport;Aa=y.viewport;return{draw:function(b){var q,w,x,A;q=C.next;q!==C.cur&&(q?h.bindFramebuffer(36160,q.framebuffer):h.bindFramebuffer(36160,null),C.cur=q);if(y.dirty){var t;q=d.dither;q!==y.dither&&(q?h.enable(3024):h.disable(3024),y.dither=q);q=d.blend_enable;q!==y.blend_enable&&(q?h.enable(3042):
h.disable(3042),y.blend_enable=q);q=Ba[0];x=Ba[1];A=Ba[2];t=Ba[3];if(q!==V[0]||x!==V[1]||A!==V[2]||t!==V[3])h.blendColor(q,x,A,t),V[0]=q,V[1]=x,V[2]=A,V[3]=t;q=ca[0];x=ca[1];if(q!==S[0]||x!==S[1])h.blendEquationSeparate(q,x),S[0]=q,S[1]=x;q=O[0];x=O[1];A=O[2];t=O[3];if(q!==J[0]||x!==J[1]||A!==J[2]||t!==J[3])h.blendFuncSeparate(q,x,A,t),J[0]=q,J[1]=x,J[2]=A,J[3]=t;q=d.depth_enable;q!==y.depth_enable&&(q?h.enable(2929):h.disable(2929),y.depth_enable=q);q=d.depth_func;q!==y.depth_func&&(h.depthFunc(q),
y.depth_func=q);q=M[0];x=M[1];if(q!==qa[0]||x!==qa[1])h.depthRange(q,x),qa[0]=q,qa[1]=x;q=d.depth_mask;q!==y.depth_mask&&(h.depthMask(q),y.depth_mask=q);q=u[0];x=u[1];A=u[2];t=u[3];if(q!==K[0]||x!==K[1]||A!==K[2]||t!==K[3])h.colorMask(q,x,A,t),K[0]=q,K[1]=x,K[2]=A,K[3]=t;q=d.cull_enable;q!==y.cull_enable&&(q?h.enable(2884):h.disable(2884),y.cull_enable=q);q=d.cull_face;q!==y.cull_face&&(h.cullFace(q),y.cull_face=q);q=d.frontFace;q!==y.frontFace&&(h.frontFace(q),y.frontFace=q);q=d.lineWidth;q!==y.lineWidth&&
(h.lineWidth(q),y.lineWidth=q);q=d.polygonOffset_enable;q!==y.polygonOffset_enable&&(q?h.enable(32823):h.disable(32823),y.polygonOffset_enable=q);q=oa[0];x=oa[1];if(q!==z[0]||x!==z[1])h.polygonOffset(q,x),z[0]=q,z[1]=x;q=d.sample_alpha;q!==y.sample_alpha&&(q?h.enable(32926):h.disable(32926),y.sample_alpha=q);q=d.sample_enable;q!==y.sample_enable&&(q?h.enable(32928):h.disable(32928),y.sample_enable=q);q=H[0];x=H[1];if(q!==da[0]||x!==da[1])h.sampleCoverage(q,x),da[0]=q,da[1]=x;q=d.stencil_enable;q!==
y.stencil_enable&&(q?h.enable(2960):h.disable(2960),y.stencil_enable=q);q=d.stencil_mask;q!==y.stencil_mask&&(h.stencilMask(q),y.stencil_mask=q);q=ta[0];x=ta[1];A=ta[2];if(q!==Da[0]||x!==Da[1]||A!==Da[2])h.stencilFunc(q,x,A),Da[0]=q,Da[1]=x,Da[2]=A;q=Ea[0];x=Ea[1];A=Ea[2];t=Ea[3];if(q!==ja[0]||x!==ja[1]||A!==ja[2]||t!==ja[3])h.stencilOpSeparate(q,x,A,t),ja[0]=q,ja[1]=x,ja[2]=A,ja[3]=t;q=za[0];x=za[1];A=za[2];t=za[3];if(q!==ea[0]||x!==ea[1]||A!==ea[2]||t!==ea[3])h.stencilOpSeparate(q,x,A,t),ea[0]=
q,ea[1]=x,ea[2]=A,ea[3]=t;q=d.scissor_enable;q!==y.scissor_enable&&(q?h.enable(3089):h.disable(3089),y.scissor_enable=q);q=W[0];x=W[1];A=W[2];t=W[3];if(q!==la[0]||x!==la[1]||A!==la[2]||t!==la[3])h.scissor(q,x,A,t),la[0]=q,la[1]=x,la[2]=A,la[3]=t;q=pa[0];x=pa[1];A=pa[2];t=pa[3];if(q!==Aa[0]||x!==Aa[1]||A!==Aa[2]||t!==Aa[3])h.viewport(q,x,A,t),Aa[0]=q,Aa[1]=x,Aa[2]=A,Aa[3]=t;y.dirty=!1}if(q=y.profile)w=performance.now(),c.count++;h.useProgram(l.program);ma.setVAO(null);x=r.location;A=X[x];A.buffer||
h.enableVertexAttribArray(x);if(A.type!==a.dtype||2!==A.size||A.buffer!==a||!1!==A.normalized||0!==A.offset||0!==A.stride)h.bindBuffer(34962,a.buffer),h.vertexAttribPointer(x,2,a.dtype,!1,0,0),A.type=a.dtype,A.size=2,A.buffer=a,A.normalized=!1,A.offset=0,A.stride=0;x=f.call(this,E,b,0);U(x)&&2===x.length||B.commandRaise(g,k);h.uniform2f(e.location,x[0],x[1]);b=n.call(this,E,b,0);"number"!==typeof b&&B.commandRaise(p,k);h.uniform1f(T.location,b);h.uniform1i(m.location,v.bind());(b=ra.elements)?h.bindBuffer(34963,
b.buffer.buffer):ma.currentVAO&&(b=I.getElements(ma.currentVAO.elements))&&h.bindBuffer(34963,b.buffer.buffer);x=ra.primitive;A=ra.offset;b?h.drawElements(x,3,b.type,A<<(b.type-5121>>1)):h.drawArrays(x,A,3);ma.setVAO(null);q&&(c.cpuTime+=performance.now()-w);v.unbind()},scope:function(b,d,e){var g,f,h,k,l,m,p,n,q,r,v,u,w,B,z,C,H,I,J,K;if(g=y.profile)f=performance.now(),c.count++;h=ra.count;ra.count=3;k=R.call(this,E,b,e);l=F[3];F[3]=k;m=G.call(this,E,b,e);k=F[4];F[4]=m;m=F[5];F[5]=x;p=D.buffer;D.buffer=
a;n=D.divisor;D.divisor=0;q=D.normalized;D.normalized=!1;r=D.offset;D.offset=0;v=D.size;D.size=0;u=D.state;D.state=1;w=D.stride;D.stride=0;B=D.type;D.type=a.dtype;z=D.w;D.w=0;C=D.x;D.x=0;H=D.y;D.y=0;I=D.z;D.z=0;J=ka.vert;ka.vert=2;K=ka.frag;ka.frag=1;d(E,b,e);g&&(c.cpuTime+=performance.now()-f);ra.count=h;F[3]=l;F[4]=k;F[5]=m;D.buffer=p;D.divisor=n;D.normalized=q;D.offset=r;D.size=v;D.state=u;D.stride=w;D.type=B;D.w=z;D.x=C;D.y=H;D.z=I;ka.vert=J;ka.frag=K},batch:function(b,g){var f,l,p;f=C.next;f!==
C.cur&&(f?h.bindFramebuffer(36160,f.framebuffer):h.bindFramebuffer(36160,null),C.cur=f);if(y.dirty){var n,v,x;f=d.dither;f!==y.dither&&(f?h.enable(3024):h.disable(3024),y.dither=f);f=d.blend_enable;f!==y.blend_enable&&(f?h.enable(3042):h.disable(3042),y.blend_enable=f);f=Ba[0];n=Ba[1];v=Ba[2];x=Ba[3];if(f!==V[0]||n!==V[1]||v!==V[2]||x!==V[3])h.blendColor(f,n,v,x),V[0]=f,V[1]=n,V[2]=v,V[3]=x;f=ca[0];n=ca[1];if(f!==S[0]||n!==S[1])h.blendEquationSeparate(f,n),S[0]=f,S[1]=n;f=O[0];n=O[1];v=O[2];x=O[3];
if(f!==J[0]||n!==J[1]||v!==J[2]||x!==J[3])h.blendFuncSeparate(f,n,v,x),J[0]=f,J[1]=n,J[2]=v,J[3]=x;f=d.depth_enable;f!==y.depth_enable&&(f?h.enable(2929):h.disable(2929),y.depth_enable=f);f=d.depth_func;f!==y.depth_func&&(h.depthFunc(f),y.depth_func=f);f=M[0];n=M[1];if(f!==qa[0]||n!==qa[1])h.depthRange(f,n),qa[0]=f,qa[1]=n;f=d.depth_mask;f!==y.depth_mask&&(h.depthMask(f),y.depth_mask=f);f=u[0];n=u[1];v=u[2];x=u[3];if(f!==K[0]||n!==K[1]||v!==K[2]||x!==K[3])h.colorMask(f,n,v,x),K[0]=f,K[1]=n,K[2]=v,
K[3]=x;f=d.cull_enable;f!==y.cull_enable&&(f?h.enable(2884):h.disable(2884),y.cull_enable=f);f=d.cull_face;f!==y.cull_face&&(h.cullFace(f),y.cull_face=f);f=d.frontFace;f!==y.frontFace&&(h.frontFace(f),y.frontFace=f);f=d.lineWidth;f!==y.lineWidth&&(h.lineWidth(f),y.lineWidth=f);f=d.polygonOffset_enable;f!==y.polygonOffset_enable&&(f?h.enable(32823):h.disable(32823),y.polygonOffset_enable=f);f=oa[0];n=oa[1];if(f!==z[0]||n!==z[1])h.polygonOffset(f,n),z[0]=f,z[1]=n;f=d.sample_alpha;f!==y.sample_alpha&&
(f?h.enable(32926):h.disable(32926),y.sample_alpha=f);f=d.sample_enable;f!==y.sample_enable&&(f?h.enable(32928):h.disable(32928),y.sample_enable=f);f=H[0];n=H[1];if(f!==da[0]||n!==da[1])h.sampleCoverage(f,n),da[0]=f,da[1]=n;f=d.stencil_enable;f!==y.stencil_enable&&(f?h.enable(2960):h.disable(2960),y.stencil_enable=f);f=d.stencil_mask;f!==y.stencil_mask&&(h.stencilMask(f),y.stencil_mask=f);f=ta[0];n=ta[1];v=ta[2];if(f!==Da[0]||n!==Da[1]||v!==Da[2])h.stencilFunc(f,n,v),Da[0]=f,Da[1]=n,Da[2]=v;f=Ea[0];
n=Ea[1];v=Ea[2];x=Ea[3];if(f!==ja[0]||n!==ja[1]||v!==ja[2]||x!==ja[3])h.stencilOpSeparate(f,n,v,x),ja[0]=f,ja[1]=n,ja[2]=v,ja[3]=x;f=za[0];n=za[1];v=za[2];x=za[3];if(f!==ea[0]||n!==ea[1]||v!==ea[2]||x!==ea[3])h.stencilOpSeparate(f,n,v,x),ea[0]=f,ea[1]=n,ea[2]=v,ea[3]=x;f=d.scissor_enable;f!==y.scissor_enable&&(f?h.enable(3089):h.disable(3089),y.scissor_enable=f);f=W[0];n=W[1];v=W[2];x=W[3];if(f!==la[0]||n!==la[1]||v!==la[2]||x!==la[3])h.scissor(f,n,v,x),la[0]=f,la[1]=n,la[2]=v,la[3]=x;f=pa[0];n=pa[1];
v=pa[2];x=pa[3];if(f!==Aa[0]||n!==Aa[1]||v!==Aa[2]||x!==Aa[3])h.viewport(f,n,v,x),Aa[0]=f,Aa[1]=n,Aa[2]=v,Aa[3]=x;y.dirty=!1}if(f=y.profile)l=performance.now(),c.count+=g;h.useProgram(P.program);ma.setVAO(null);n=r.location;v=X[n];v.buffer||h.enableVertexAttribArray(n);if(v.type!==a.dtype||2!==v.size||v.buffer!==a||!1!==v.normalized||0!==v.offset||0!==v.stride)h.bindBuffer(34962,a.buffer),h.vertexAttribPointer(n,2,a.dtype,!1,0,0),v.type=a.dtype,v.size=2,v.buffer=a,v.normalized=!1,v.offset=0,v.stride=
0;n=w.call(this,E,void 0,p);U(n)&&2===n.length||B.commandRaise(Q,k);h.uniform2f(e.location,n[0],n[1]);p=q.call(this,E,void 0,p);"number"!==typeof p&&B.commandRaise(N,k);h.uniform1f(T.location,p);h.uniform1i(m.location,fa.bind());(n=ra.elements)?h.bindBuffer(34963,n.buffer.buffer):ma.currentVAO&&(n=I.getElements(ma.currentVAO.elements))&&h.bindBuffer(34963,n.buffer.buffer);v=ra.primitive;x=ra.offset;for(p=0;p<g;++p)n?h.drawElements(v,3,n.type,x<<(n.type-5121>>1)):h.drawArrays(v,x,3);fa.unbind();ma.setVAO(null);
f&&(c.cpuTime+=performance.now()-l)}}}}},{}],25:[function(P,fa,Ca){var b=P("./sorted-object-keys");fa.exports=function(B,k){for(var c=b(k),l=0;l<c.length;++l)B[c[l]]=k[c[l]];return B}},{"./sorted-object-keys":34}],26:[function(P,fa,Ca){function b(b,k,a,f,g,n){for(var p=0;p<k;++p)for(var v=b[p],B=0;B<a;++B)for(var G=v[B],x=0;x<f;++x)g[n++]=G[x]}function B(c,k,a,f,g){for(var n=1,p=a+1;p<k.length;++p)n*=k[p];var v=k[a];if(4===k.length-a){var R=k[a+1],G=k[a+2];k=k[a+3];for(p=0;p<v;++p)b(c[p],R,G,k,f,
g),g+=n}else for(p=0;p<v;++p)B(c[p],k,a+1,f,g),g+=n}var k=P("./pool");fa.exports={shape:function(b){for(var k=[];b.length;b=b[0])k.push(b.length);return k},flatten:function(c,l,a,f){var g=1;if(l.length)for(var n=0;n<l.length;++n)g*=l[n];else g=0;a=f||k.allocType(a,g);switch(l.length){case 0:break;case 1:f=l[0];for(l=0;l<f;++l)a[l]=c[l];break;case 2:f=l[0];l=l[1];for(n=g=0;n<f;++n)for(var p=c[n],v=0;v<l;++v)a[g++]=p[v];break;case 3:b(c,l[0],l[1],l[2],a,0);break;default:B(c,l,0,a,0)}return a}}},{"./pool":32}],
27:[function(P,fa,Ca){var b=P("./is-typed-array");fa.exports=function(B){return Array.isArray(B)||b(B)}},{"./is-typed-array":30}],28:[function(P,fa,Ca){var b=P("./is-typed-array");fa.exports=function(B){return!!B&&"object"===typeof B&&Array.isArray(B.shape)&&Array.isArray(B.stride)&&"number"===typeof B.offset&&B.shape.length===B.stride.length&&(Array.isArray(B.data)||b(B.data))}},{"./is-typed-array":30}],29:[function(P,fa,Ca){fa.exports=function(b){return!(b&b-1)&&!!b}},{}],30:[function(P,fa,Ca){fa.exports=
function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Uint8ClampedArray}},{}],31:[function(P,fa,Ca){fa.exports=function(b,B){for(var k=Array(b),c=0;c<b;++c)k[c]=B(c);return k}},{}],32:[function(P,fa,Ca){function b(b){var k,a;k=(65535<b)<<4;b>>>=k;a=(255<b)<<3;b>>>=a;k|=a;a=(15<b)<<2;b>>>=a;k|=a;a=(3<b)<<1;return k|a|
b>>>a>>1}function B(){function c(c){a:{for(var g=16;268435456>=g;g*=16)if(c<=g){c=g;break a}c=0}g=a[b(c)>>2];return 0<g.length?g.pop():new ArrayBuffer(c)}function l(c){a[b(c.byteLength)>>2].push(c)}var a=k(8,function(){return[]});return{alloc:c,free:l,allocType:function(a,b){var k=null;switch(a){case 5120:k=new Int8Array(c(b),0,b);break;case 5121:k=new Uint8Array(c(b),0,b);break;case 5122:k=new Int16Array(c(2*b),0,b);break;case 5123:k=new Uint16Array(c(2*b),0,b);break;case 5124:k=new Int32Array(c(4*
b),0,b);break;case 5125:k=new Uint32Array(c(4*b),0,b);break;case 5126:k=new Float32Array(c(4*b),0,b);break;default:return null}return k.length!==b?k.subarray(0,b):k},freeType:function(a){l(a.buffer)}}}var k=P("./loop");P=B();P.zero=B();fa.exports=P},{"./loop":31}],33:[function(P,fa,Ca){fa.exports={next:"function"===typeof requestAnimationFrame?function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:
clearTimeout}},{}],34:[function(P,fa,Ca){fa.exports=function(b){return Object.keys(b).sort()}},{}],35:[function(P,fa,Ca){var b=P("./pool"),B=new Float32Array(1),k=new Uint32Array(B.buffer);fa.exports=function(c){for(var l=b.allocType(5123,c.length),a=0;a<c.length;++a)if(isNaN(c[a]))l[a]=65535;else if(Infinity===c[a])l[a]=31744;else if(-Infinity===c[a])l[a]=64512;else{B[0]=c[a];var f=k[0],g=f>>>31<<15,n=(f<<1>>>24)-127,f=f>>13&1023;l[a]=-24>n?g:-14>n?g+(f+1024>>-14-n):15<n?g+31744:g+(n+15<<10)+f}return l}},
{"./pool":32}],36:[function(P,fa,Ca){var b=P("./sorted-object-keys");fa.exports=function(B){return b(B).map(function(b){return B[b]})}},{"./sorted-object-keys":34}],37:[function(P,fa,Ca){function b(b,c,k){function l(){var a=window.innerWidth,c=window.innerHeight;b!==document.body&&(c=v.getBoundingClientRect(),a=c.right-c.left,c=c.bottom-c.top);v.width=k*a;v.height=k*c}var v=document.createElement("canvas");a(v.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(v);
b===document.body&&(v.style.position="absolute",a(b.style,{margin:0,padding:0}));var B;b!==document.body&&"function"===typeof ResizeObserver?(B=new ResizeObserver(function(){setTimeout(l)}),B.observe(b)):window.addEventListener("resize",l,!1);l();return{canvas:v,onDestroy:function(){B?B.disconnect():window.removeEventListener("resize",l);b.removeChild(v)}}}function B(a,b){function c(k){try{return a.getContext(k,b)}catch(l){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}
function k(a){if("string"===typeof a)return a.split();l(Array.isArray(a),"invalid extension array");return a}function c(a){return"string"===typeof a?(l("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var l=P("./util/check"),a=P("./util/extend");fa.exports=function(a){var g=a||{},n,p,v,R;a={};var G=[],x=[],D="undefined"===typeof window?1:window.devicePixelRatio,P=!1,w=function(a){a&&l.raise(a)},Q=function(){};"string"===typeof g?(l("undefined"!==typeof document,
"selector queries only supported in DOM environments"),n=document.querySelector(g),l(n,"invalid query string for element")):"object"===typeof g?"string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?n=g:"function"===typeof g.drawArrays||"function"===typeof g.drawElements?(R=g,v=R.canvas):(l.constructor(g),"gl"in g?R=g.gl:"canvas"in g?v=c(g.canvas):"container"in g&&(p=c(g.container)),"attributes"in g&&(a=g.attributes,l.type(a,"object","invalid context attributes")),
"extensions"in g&&(G=k(g.extensions)),"optionalExtensions"in g&&(x=k(g.optionalExtensions)),"onDone"in g&&(l.type(g.onDone,"function","invalid or missing onDone callback"),w=g.onDone),"profile"in g&&(P=!!g.profile),"pixelRatio"in g&&(D=+g.pixelRatio,l(0<D,"invalid pixel ratio"))):l.raise("invalid arguments to regl");n&&("canvas"===n.nodeName.toLowerCase()?v=n:p=n);if(!R){if(!v){l("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");n=b(p||document.body,
w,D);if(!n)return null;v=n.canvas;Q=n.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0);R=B(v,a)}return R?{gl:R,canvas:v,container:p,extensions:G,optionalExtensions:x,pixelRatio:D,profile:P,onDone:w,onDestroy:Q}:(Q(),w("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(P,fa,Ca){P("webrtc-adapter");fa.exports=function(b,B){var k,c={video:!0,audio:!0};2!==arguments.length&&(B=b,b=c);
if("undefined"===typeof navigator||!navigator.getUserMedia)return k=Error("MediaStreamError"),k.name="NotSupportedError",setTimeout(function(){B(k)},0);if(!b.audio&&!b.video)return k=Error("MediaStreamError"),k.name="NoMediaRequestedError",setTimeout(function(){B(k)},0);localStorage&&"true"===localStorage.useFirefoxFakeDevice&&(b.fake=!0);navigator.mediaDevices.getUserMedia(b).then(function(b){B(null,b)})["catch"](function(b){var a;"string"===typeof b?(a=Error("MediaStreamError"),a.name="PermissionDeniedError"===
b||"PERMISSION_DENIED"===b?"PermissionDeniedError":"ConstraintNotSatisfiedError"):(a=b,a.name||(b.name=a.PermissionDeniedError?"PermissionDeniedError":"ConstraintNotSatisfiedError"));B(a)})}},{"webrtc-adapter":40}],39:[function(P,fa,Ca){var b={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};b.localCName=b.generateIdentifier();b.splitLines=function(b){return b.trim().split("\n").map(function(b){return b.trim()})};b.splitSections=function(b){return b.split("\nm=").map(function(b,
c){return(0<c?"m="+b:b).trim()+"\r\n"})};b.matchPrefix=function(B,k){return b.splitLines(B).filter(function(b){return 0===b.indexOf(k)})};b.parseCandidate=function(b){b=0===b.indexOf("a=candidate:")?b.substring(12).split(" "):b.substring(10).split(" ");for(var k={foundation:b[0],component:b[1],protocol:b[2].toLowerCase(),priority:parseInt(b[3],10),ip:b[4],port:parseInt(b[5],10),type:b[7]},c=8;c<b.length;c+=2)switch(b[c]){case "raddr":k.relatedAddress=b[c+1];break;case "rport":k.relatedPort=parseInt(b[c+
1],10);break;case "tcptype":k.tcpType=b[c+1];break;default:k[b[c]]=b[c+1]}return k};b.writeCandidate=function(b){var k=[];k.push(b.foundation);k.push(b.component);k.push(b.protocol.toUpperCase());k.push(b.priority);k.push(b.ip);k.push(b.port);var c=b.type;k.push("typ");k.push(c);"host"!==c&&b.relatedAddress&&b.relatedPort&&(k.push("raddr"),k.push(b.relatedAddress),k.push("rport"),k.push(b.relatedPort));b.tcpType&&"tcp"===b.protocol.toLowerCase()&&(k.push("tcptype"),k.push(b.tcpType));return"candidate:"+
k.join(" ")};b.parseIceOptions=function(b){return b.substr(14).split(" ")};b.parseRtpMap=function(b){b=b.substr(9).split(" ");var k={payloadType:parseInt(b.shift(),10)};b=b[0].split("/");k.name=b[0];k.clockRate=parseInt(b[1],10);k.numChannels=3===b.length?parseInt(b[2],10):1;return k};b.writeRtpMap=function(b){var k=b.payloadType;void 0!==b.preferredPayloadType&&(k=b.preferredPayloadType);return"a=rtpmap:"+k+" "+b.name+"/"+b.clockRate+(1!==b.numChannels?"/"+b.numChannels:"")+"\r\n"};b.parseExtmap=
function(b){b=b.substr(9).split(" ");return{id:parseInt(b[0],10),direction:0<b[0].indexOf("/")?b[0].split("/")[1]:"sendrecv",uri:b[1]}};b.writeExtmap=function(b){return"a=extmap:"+(b.id||b.preferredId)+(b.direction&&"sendrecv"!==b.direction?"/"+b.direction:"")+" "+b.uri+"\r\n"};b.parseFmtp=function(b){for(var k={},c=b.substr(b.indexOf(" ")+1).split(";"),l=0;l<c.length;l++)b=c[l].trim().split("="),k[b[0].trim()]=b[1];return k};b.writeFmtp=function(b){var k="",c=b.payloadType;void 0!==b.preferredPayloadType&&
(c=b.preferredPayloadType);if(b.parameters&&Object.keys(b.parameters).length){var l=[];Object.keys(b.parameters).forEach(function(a){l.push(a+"="+b.parameters[a])});k+="a=fmtp:"+c+" "+l.join(";")+"\r\n"}return k};b.parseRtcpFb=function(b){b=b.substr(b.indexOf(" ")+1).split(" ");return{type:b.shift(),parameter:b.join(" ")}};b.writeRtcpFb=function(b){var k="",c=b.payloadType;void 0!==b.preferredPayloadType&&(c=b.preferredPayloadType);b.rtcpFeedback&&b.rtcpFeedback.length&&b.rtcpFeedback.forEach(function(b){k+=
"a=rtcp-fb:"+c+" "+b.type+(b.parameter&&b.parameter.length?" "+b.parameter:"")+"\r\n"});return k};b.parseSsrcMedia=function(b){var k=b.indexOf(" "),c={ssrc:parseInt(b.substr(7,k-7),10)},l=b.indexOf(":",k);-1<l?(c.attribute=b.substr(k+1,l-k-1),c.value=b.substr(l+1)):c.attribute=b.substr(k+1);return c};b.getMid=function(B){if(B=b.matchPrefix(B,"a=mid:")[0])return B.substr(6)};b.parseFingerprint=function(b){b=b.substr(14).split(" ");return{algorithm:b[0].toLowerCase(),value:b[1]}};b.getDtlsParameters=
function(B,k){return{role:"auto",fingerprints:b.matchPrefix(B+k,"a=fingerprint:").map(b.parseFingerprint)}};b.writeDtlsParameters=function(b,k){var c="a=setup:"+k+"\r\n";b.fingerprints.forEach(function(b){c+="a=fingerprint:"+b.algorithm+" "+b.value+"\r\n"});return c};b.getIceParameters=function(B,k){var c=b.splitLines(B),c=c.concat(b.splitLines(k));return{usernameFragment:c.filter(function(b){return 0===b.indexOf("a=ice-ufrag:")})[0].substr(12),password:c.filter(function(b){return 0===b.indexOf("a=ice-pwd:")})[0].substr(10)}};
b.writeIceParameters=function(b){return"a=ice-ufrag:"+b.usernameFragment+"\r\na=ice-pwd:"+b.password+"\r\n"};b.parseRtpParameters=function(B){for(var k={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=b.splitLines(B)[0].split(" "),l=3;l<c.length;l++){var a=c[l],f=b.matchPrefix(B,"a=rtpmap:"+a+" ")[0];if(f){var f=b.parseRtpMap(f),g=b.matchPrefix(B,"a=fmtp:"+a+" ");f.parameters=g.length?b.parseFmtp(g[0]):{};f.rtcpFeedback=b.matchPrefix(B,"a=rtcp-fb:"+a+" ").map(b.parseRtcpFb);k.codecs.push(f);
switch(f.name.toUpperCase()){case "RED":case "ULPFEC":k.fecMechanisms.push(f.name.toUpperCase())}}}b.matchPrefix(B,"a=extmap:").forEach(function(a){k.headerExtensions.push(b.parseExtmap(a))});return k};b.writeRtpDescription=function(B,k){var c="",c=c+("m="+B+" "),c=c+(0<k.codecs.length?"9":"0"),c=c+" UDP/TLS/RTP/SAVPF ",c=c+(k.codecs.map(function(a){return void 0!==a.preferredPayloadType?a.preferredPayloadType:a.payloadType}).join(" ")+"\r\n"),c=c+"c=IN IP4 0.0.0.0\r\n",c=c+"a=rtcp:9 IN IP4 0.0.0.0\r\n";
k.codecs.forEach(function(a){c+=b.writeRtpMap(a);c+=b.writeFmtp(a);c+=b.writeRtcpFb(a)});var l=0;k.codecs.forEach(function(a){a.maxptime>l&&(l=a.maxptime)});0<l&&(c+="a=maxptime:"+l+"\r\n");c+="a=rtcp-mux\r\n";k.headerExtensions.forEach(function(a){c+=b.writeExtmap(a)});return c};b.parseRtpEncodingParameters=function(B){var k=[],c=b.parseRtpParameters(B),l=-1!==c.fecMechanisms.indexOf("RED"),a=-1!==c.fecMechanisms.indexOf("ULPFEC"),f=b.matchPrefix(B,"a=ssrc:").map(function(a){return b.parseSsrcMedia(a)}).filter(function(a){return"cname"===
a.attribute}),g=0<f.length&&f[0].ssrc,n,f=b.matchPrefix(B,"a=ssrc-group:FID").map(function(a){a=a.split(" ");a.shift();return a.map(function(a){return parseInt(a,10)})});0<f.length&&1<f[0].length&&f[0][0]===g&&(n=f[0][1]);c.codecs.forEach(function(b){"RTX"===b.name.toUpperCase()&&b.parameters.apt&&(b={ssrc:g,codecPayloadType:parseInt(b.parameters.apt,10),rtx:{ssrc:n}},k.push(b),l&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:n,mechanism:a?"red+ulpfec":"red"},k.push(b)))});0===k.length&&g&&k.push({ssrc:g});
var p=b.matchPrefix(B,"b=");p.length&&(0===p[0].indexOf("b=TIAS:")?p=parseInt(p[0].substr(7),10):0===p[0].indexOf("b=AS:")&&(p=parseInt(p[0].substr(5),10)),k.forEach(function(a){a.maxBitrate=p}));return k};b.parseRtcpParameters=function(B){var k={},c=b.matchPrefix(B,"a=ssrc:").map(function(c){return b.parseSsrcMedia(c)}).filter(function(b){return"cname"===b.attribute})[0];c&&(k.cname=c.value,k.ssrc=c.ssrc);c=b.matchPrefix(B,"a=rtcp-rsize");k.reducedSize=0<c.length;k.compound=0===c.length;B=b.matchPrefix(B,
"a=rtcp-mux");k.mux=0<B.length;return k};b.parseMsid=function(B){var k=b.matchPrefix(B,"a=msid:");if(1===k.length)return B=k[0].substr(7).split(" "),{stream:B[0],track:B[1]};B=b.matchPrefix(B,"a=ssrc:").map(function(c){return b.parseSsrcMedia(c)}).filter(function(b){return"msid"===b.attribute});if(0<B.length)return B=B[0].value.split(" "),{stream:B[0],track:B[1]}};b.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"};b.writeMediaSection=
function(B,k,c,l){k=b.writeRtpDescription(B.kind,k);k+=b.writeIceParameters(B.iceGatherer.getLocalParameters());k+=b.writeDtlsParameters(B.dtlsTransport.getLocalParameters(),"offer"===c?"actpass":"active");k+="a=mid:"+B.mid+"\r\n";k=B.direction?k+("a="+B.direction+"\r\n"):B.rtpSender&&B.rtpReceiver?k+"a=sendrecv\r\n":B.rtpSender?k+"a=sendonly\r\n":B.rtpReceiver?k+"a=recvonly\r\n":k+"a=inactive\r\n";B.rtpSender&&(c="msid:"+l.id+" "+B.rtpSender.track.id+"\r\n",k=k+("a="+c)+("a=ssrc:"+B.sendEncodingParameters[0].ssrc+
" "+c),B.sendEncodingParameters[0].rtx&&(k+="a=ssrc:"+B.sendEncodingParameters[0].rtx.ssrc+" "+c,k+="a=ssrc-group:FID "+B.sendEncodingParameters[0].ssrc+" "+B.sendEncodingParameters[0].rtx.ssrc+"\r\n"));k+="a=ssrc:"+B.sendEncodingParameters[0].ssrc+" cname:"+b.localCName+"\r\n";B.rtpSender&&B.sendEncodingParameters[0].rtx&&(k+="a=ssrc:"+B.sendEncodingParameters[0].rtx.ssrc+" cname:"+b.localCName+"\r\n");return k};b.getDirection=function(B,k){for(var c=b.splitLines(B),l=0;l<c.length;l++)switch(c[l]){case "a=sendrecv":case "a=sendonly":case "a=recvonly":case "a=inactive":return c[l].substr(2)}return k?
b.getDirection(k):"sendrecv"};b.getKind=function(B){return b.splitLines(B)[0].split(" ")[0].substr(2)};b.isRejected=function(b){return"0"===b.split(" ",2)[1]};fa.exports=b},{}],40:[function(P,fa,Ca){Ca=P("./utils").log;var b=P("./utils").browserDetails;fa.exports.browserDetails=b;fa.exports.extractVersion=P("./utils").extractVersion;fa.exports.disableLog=P("./utils").disableLog;var B=P("./chrome/chrome_shim")||null,k=P("./edge/edge_shim")||null,c=P("./firefox/firefox_shim")||null;P=P("./safari/safari_shim")||
null;switch(b.browser){case "opera":case "chrome":if(!B||!B.shimPeerConnection){Ca("Chrome shim is not included in this adapter release.");break}Ca("adapter.js shimming chrome.");fa.exports.browserShim=B;B.shimGetUserMedia();B.shimMediaStream();B.shimSourceObject();B.shimPeerConnection();B.shimOnTrack();break;case "firefox":if(!c||!c.shimPeerConnection){Ca("Firefox shim is not included in this adapter release.");break}Ca("adapter.js shimming firefox.");fa.exports.browserShim=c;c.shimGetUserMedia();
c.shimSourceObject();c.shimPeerConnection();c.shimOnTrack();break;case "edge":if(!k||!k.shimPeerConnection){Ca("MS edge shim is not included in this adapter release.");break}Ca("adapter.js shimming edge.");fa.exports.browserShim=k;k.shimGetUserMedia();k.shimPeerConnection();break;case "safari":if(!P){Ca("Safari shim is not included in this adapter release.");break}Ca("adapter.js shimming safari.");fa.exports.browserShim=P;P.shimGetUserMedia();break;default:Ca("Unsupported browser!")}},{"./chrome/chrome_shim":41,
"./edge/edge_shim":43,"./firefox/firefox_shim":45,"./safari/safari_shim":47,"./utils":48}],41:[function(P,fa,Ca){var b=P("../utils.js").log,B=P("../utils.js").browserDetails;fa.exports={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!==typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},
set:function(b){var c=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly));this.addEventListener("track",this._ontrack=b);this.addEventListener("addstream",this._ontrackpoly=function(b){b.stream.addEventListener("addtrack",function(a){var f=new Event("track");f.track=a.track;f.receiver={track:a.track};f.streams=[b.stream];c.dispatchEvent(f)});b.stream.getTracks().forEach(function(a){var c=new Event("track");c.track=a;c.receiver=
{track:a};c.streams=[b.stream];this.dispatchEvent(c)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(b){var c=this;this._srcObject=b;this.src&&URL.revokeObjectURL(this.src);b?(this.src=URL.createObjectURL(b),b.addEventListener("addtrack",function(){c.src&&URL.revokeObjectURL(c.src);
c.src=URL.createObjectURL(b)}),b.addEventListener("removetrack",function(){c.src&&URL.revokeObjectURL(c.src);c.src=URL.createObjectURL(b)})):this.src=""}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(c,k){b("PeerConnection");c&&c.iceTransportPolicy&&(c.iceTransports=c.iceTransportPolicy);var a=new webkitRTCPeerConnection(c,k),f=a.getStats.bind(a);a.getStats=function(a,b,c){var k=this,l=arguments;if(0<arguments.length&&"function"===typeof a)return f(a,b);var B=function(a){var b=
{};a.result().forEach(function(a){var c={id:a.id,timestamp:a.timestamp,type:a.type};a.names().forEach(function(b){c[b]=a.stat(b)});b[c.id]=c});return b},x=function(a,b){var c=new Map(Object.keys(a).map(function(b){return[b,a[b]]}));b=b||a;Object.keys(b).forEach(function(a){c[a]=b[a]});return c};return 2<=arguments.length?f.apply(this,[function(a){l[1](x(B(a)))},arguments[0]]):(new Promise(function(b,c){1===l.length&&"object"===typeof a?f.apply(k,[function(a){b(x(B(a)))},c]):f.apply(k,[function(a){b(x(B(a),
a.result()))},c])})).then(b,c)};return a};window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype;webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}});["createOffer","createAnswer"].forEach(function(b){var k=webkitRTCPeerConnection.prototype[b];webkitRTCPeerConnection.prototype[b]=function(){var a=this;if(1>arguments.length||1===arguments.length&&"object"===
typeof arguments[0]){var b=1===arguments.length?arguments[0]:void 0;return new Promise(function(c,n){k.apply(a,[c,n,b])})}return k.apply(this,arguments)}});51>B.version&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){var k=webkitRTCPeerConnection.prototype[b];webkitRTCPeerConnection.prototype[b]=function(){var a=arguments,b=this,c=new Promise(function(c,g){k.apply(b,[a[0],c,g])});return 2>a.length?c:c.then(function(){a[1].apply(null,[])},function(b){3<=a.length&&
a[2].apply(null,[b])})}});var k=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():k.apply(this,arguments)};["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){var k=webkitRTCPeerConnection.prototype[b];webkitRTCPeerConnection.prototype[b]=function(){arguments[0]=new ("addIceCandidate"===b?RTCIceCandidate:RTCSessionDescription)(arguments[0]);return k.apply(this,arguments)}})},
shimGetUserMedia:P("./getusermedia"),attachMediaStream:function(k,c){b("DEPRECATED, attachMediaStream will soon be removed.");43<=B.version?k.srcObject=c:"undefined"!==typeof k.src?k.src=URL.createObjectURL(c):b("Error attaching stream to element.")},reattachMediaStream:function(k,c){b("DEPRECATED, reattachMediaStream will soon be removed.");43<=B.version?k.srcObject=c.srcObject:k.src=c.src}}},{"../utils.js":48,"./getusermedia":42}],42:[function(P,fa,Ca){var b=P("../utils.js").log;fa.exports=function(){var B=
function(a){if("object"!==typeof a||a.mandatory||a.optional)return a;var b={};Object.keys(a).forEach(function(c){if("require"!==c&&"advanced"!==c&&"mediaSource"!==c){var k="object"===typeof a[c]?a[c]:{ideal:a[c]};void 0!==k.exact&&"number"===typeof k.exact&&(k.min=k.max=k.exact);var l=function(a,b){return a?a+b.charAt(0).toUpperCase()+b.slice(1):"deviceId"===b?"sourceId":b};if(void 0!==k.ideal){b.optional=b.optional||[];var B={};"number"===typeof k.ideal?(B[l("min",c)]=k.ideal,b.optional.push(B),
B={},B[l("max",c)]=k.ideal):B[l("",c)]=k.ideal;b.optional.push(B)}void 0!==k.exact&&"number"!==typeof k.exact?(b.mandatory=b.mandatory||{},b.mandatory[l("",c)]=k.exact):["min","max"].forEach(function(a){void 0!==k[a]&&(b.mandatory=b.mandatory||{},b.mandatory[l(a,c)]=k[a])})}});a.advanced&&(b.optional=(b.optional||[]).concat(a.advanced));return b},k=function(a,c){(a=JSON.parse(JSON.stringify(a)))&&a.audio&&(a.audio=B(a.audio));if(a&&"object"===typeof a.video){var k=a.video.facingMode,k=k&&("object"===
typeof k?k:{ideal:k});if(!(!k||"user"!==k.exact&&"environment"!==k.exact&&"user"!==k.ideal&&"environment"!==k.ideal||navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete a.video.facingMode,"environment"===k.exact||"environment"===k.ideal))return navigator.mediaDevices.enumerateDevices().then(function(l){l=l.filter(function(a){return"videoinput"===a.kind});if(l=l.find(function(a){return-1!==a.label.toLowerCase().indexOf("back")})||l.length&&
l[l.length-1])a.video.deviceId=k.exact?{exact:l.deviceId}:{ideal:l.deviceId};a.video=B(a.video);b("chrome: "+JSON.stringify(a));return c(a)});a.video=B(a.video)}b("chrome: "+JSON.stringify(a));return c(a)},c=function(a){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[a.name]||a.name,message:a.message,constraint:a.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};navigator.getUserMedia=function(a,b,l){k(a,
function(a){navigator.webkitGetUserMedia(a,b,function(a){l(c(a))})})};var l=function(a){return new Promise(function(b,c){navigator.getUserMedia(a,b,c)})};navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:l,enumerateDevices:function(){return new Promise(function(a){var b={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(c){a(c.map(function(a){return{label:a.label,kind:b[a.kind],deviceId:a.id,groupId:""}}))})})}});if(navigator.mediaDevices.getUserMedia){var a=
navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(b){return k(b,function(b){return a(b)["catch"](function(a){return Promise.reject(c(a))})})}}else navigator.mediaDevices.getUserMedia=function(a){return l(a)};"undefined"===typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){b("Dummy mediaDevices.addEventListener called.")});"undefined"===typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=
function(){b("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":48}],43:[function(P,fa,Ca){var b=P("sdp"),B=P("../utils").log;fa.exports={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(b){return b}),window.RTCSessionDescription||(window.RTCSessionDescription=function(b){return b}));window.RTCPeerConnection=function(b){var c=this,l=document.createDocumentFragment();["addEventListener","removeEventListener","dispatchEvent"].forEach(function(a){c[a]=
l[a].bind(l)});this.ondatachannel=this.onnegotiationneeded=this.oniceconnectionstatechange=this.onsignalingstatechange=this.onremovestream=this.ontrack=this.onaddstream=this.onicecandidate=null;this.localStreams=[];this.remoteStreams=[];this.getLocalStreams=function(){return c.localStreams};this.getRemoteStreams=function(){return c.remoteStreams};this.localDescription=new RTCSessionDescription({type:"",sdp:""});this.remoteDescription=new RTCSessionDescription({type:"",sdp:""});this.signalingState=
"stable";this.iceGatheringState=this.iceConnectionState="new";this.iceOptions={gatherPolicy:"all",iceServers:[]};if(b&&b.iceTransportPolicy)switch(b.iceTransportPolicy){case "all":case "relay":this.iceOptions.gatherPolicy=b.iceTransportPolicy;break;case "none":throw new TypeError('iceTransportPolicy "none" not supported');}this.usingBundle=b&&"max-bundle"===b.bundlePolicy;b&&b.iceServers&&(b=JSON.parse(JSON.stringify(b.iceServers)),this.iceOptions.iceServers=b.filter(function(a){return a&&a.urls?
(a=a.urls,"string"===typeof a&&(a=[a]),a=a.filter(function(a){return 0===a.indexOf("turn:")&&-1!==a.indexOf("transport=udp")})[0],!!a):!1}));this.transceivers=[];this._localIceCandidatesBuffer=[]};window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var k=this,c=b.splitSections(k.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(b){if(b.candidate&&0!==Object.keys(b.candidate).length)-1===b.candidate.candidate.indexOf("typ endOfCandidates")&&(c[b.candidate.sdpMLineIndex+
1]+="a="+b.candidate.candidate+"\r\n");else for(var a=1;a<c.length;a++)-1===c[a].indexOf("\r\na=end-of-candidates\r\n")&&(c[a]+="a=end-of-candidates\r\n");k.localDescription.sdp=c.join("");k.dispatchEvent(b);if(null!==k.onicecandidate)k.onicecandidate(b);!b.candidate&&"complete"!==k.iceGatheringState&&k.transceivers.every(function(a){return a.iceGatherer&&"completed"===a.iceGatherer.state})&&(k.iceGatheringState="complete")});this._localIceCandidatesBuffer=[]};window.RTCPeerConnection.prototype.addStream=
function(b){this.localStreams.push(b.clone());this._maybeFireNegotiationNeeded()};window.RTCPeerConnection.prototype.removeStream=function(b){b=this.localStreams.indexOf(b);-1<b&&(this.localStreams.splice(b,1),this._maybeFireNegotiationNeeded())};window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(b){return!!b.rtpSender}).map(function(b){return b.rtpSender})};window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(b){return!!b.rtpReceiver}).map(function(b){return b.rtpReceiver})};
window.RTCPeerConnection.prototype._getCommonCapabilities=function(b,c){var l={codecs:[],headerExtensions:[],fecMechanisms:[]};b.codecs.forEach(function(a){for(var b=0;b<c.codecs.length;b++){var g=c.codecs[b];if(a.name.toLowerCase()===g.name.toLowerCase()&&a.clockRate===g.clockRate&&a.numChannels===g.numChannels){l.codecs.push(g);break}}});b.headerExtensions.forEach(function(a){for(var b=0;b<c.headerExtensions.length;b++){var g=c.headerExtensions[b];if(a.uri===g.uri){l.headerExtensions.push(g);break}}});
return l};window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(k,c){var l=this,a=new RTCIceGatherer(l.iceOptions),f=new RTCIceTransport(a);a.onlocalcandidate=function(g){var p=new Event("icecandidate");p.candidate={sdpMid:k,sdpMLineIndex:c};var v=g.candidate;(g=!v||0===Object.keys(v).length)?(void 0===a.state&&(a.state="completed"),p.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(v.component="RTCP"===f.component?2:1,p.candidate.candidate=b.writeCandidate(v));
v=b.splitSections(l.localDescription.sdp);-1===p.candidate.candidate.indexOf("typ endOfCandidates")?v[p.candidate.sdpMLineIndex+1]+="a="+p.candidate.candidate+"\r\n":v[p.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n";l.localDescription.sdp=v.join("");v=l.transceivers.every(function(a){return a.iceGatherer&&"completed"===a.iceGatherer.state});switch(l.iceGatheringState){case "new":l._localIceCandidatesBuffer.push(p);g&&v&&l._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case "gathering":l._emitBufferedCandidates();
l.dispatchEvent(p);if(null!==l.onicecandidate)l.onicecandidate(p);if(v){l.dispatchEvent(new Event("icecandidate"));if(null!==l.onicecandidate)l.onicecandidate(new Event("icecandidate"));l.iceGatheringState="complete"}}};f.onicestatechange=function(){l._updateConnectionState()};var g=new RTCDtlsTransport(f);g.ondtlsstatechange=function(){l._updateConnectionState()};g.onerror=function(){g.state="failed";l._updateConnectionState()};return{iceGatherer:a,iceTransport:f,dtlsTransport:g}};window.RTCPeerConnection.prototype._transceive=
function(k,c,l){var a=this._getCommonCapabilities(k.localCapabilities,k.remoteCapabilities);c&&k.rtpSender&&(a.encodings=k.sendEncodingParameters,a.rtcp={cname:b.localCName},k.recvEncodingParameters.length&&(a.rtcp.ssrc=k.recvEncodingParameters[0].ssrc),k.rtpSender.send(a));l&&k.rtpReceiver&&(a.encodings=k.recvEncodingParameters,a.rtcp={cname:k.cname},k.sendEncodingParameters.length&&(a.rtcp.ssrc=k.sendEncodingParameters[0].ssrc),k.rtpReceiver.receive(a))};window.RTCPeerConnection.prototype.setLocalDescription=
function(k){var c=this,l,a;if("offer"===k.type)this._pendingOffer&&(l=b.splitSections(k.sdp),a=l.shift(),l.forEach(function(a,f){var g=b.parseRtpParameters(a);c._pendingOffer[f].localCapabilities=g}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===k.type){l=b.splitSections(c.remoteDescription.sdp);a=l.shift();var f=0<b.matchPrefix(a,"a=ice-lite").length;l.forEach(function(g,k){var l=c.transceivers[k],n=l.iceGatherer,x=l.iceTransport,B=l.dtlsTransport,P=l.localCapabilities,
w=l.remoteCapabilities;if("0"!==g.split("\n",1)[0].split(" ",2)[1]){var Q=b.getIceParameters(g,a);if(f){var q=b.matchPrefix(g,"a=candidate:").map(function(a){return b.parseCandidate(a)}).filter(function(a){return"1"===a.component});q.length&&x.setRemoteCandidates(q)}q=b.getDtlsParameters(g,a);f&&(q.role="server");c.usingBundle&&0!==k||(x.start(n,Q,f?"controlling":"controlled"),B.start(q));n=c._getCommonCapabilities(P,w);c._transceive(l,0<n.codecs.length,!1)}})}this.localDescription={type:k.type,sdp:k.sdp};
switch(k.type){case "offer":this._updateSignalingState("have-local-offer");break;case "answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+k.type+'"');}var g=1<arguments.length&&"function"===typeof arguments[1];if(g){var n=arguments[1];window.setTimeout(function(){n();"new"===c.iceGatheringState&&(c.iceGatheringState="gathering");c._emitBufferedCandidates()},0)}l=Promise.resolve();l.then(function(){g||("new"===c.iceGatheringState&&(c.iceGatheringState=
"gathering"),window.setTimeout(c._emitBufferedCandidates.bind(c),500))});return l};window.RTCPeerConnection.prototype.setRemoteDescription=function(k){var c=this,l=new MediaStream,a=[],f=b.splitSections(k.sdp),g=f.shift(),n=0<b.matchPrefix(g,"a=ice-lite").length;this.usingBundle=0<b.matchPrefix(g,"a=group:BUNDLE ").length;f.forEach(function(f,v){var B=b.splitLines(f)[0].substr(2).split(" "),G=B[0],x="0"===B[1],B=b.getDirection(f,g),D,P,w,Q,q,N,fa,e,r=b.parseRtpParameters(f),T;x||(T=b.getIceParameters(f,
g),e=b.getDtlsParameters(f,g),e.role="client");N=b.parseRtpEncodingParameters(f);D=b.matchPrefix(f,"a=mid:");D=D.length?D[0].substr(6):b.generateIdentifier();var m;if(q=b.matchPrefix(f,"a=ssrc:").map(function(a){return b.parseSsrcMedia(a)}).filter(function(a){return"cname"===a.attribute})[0])m=q.value;var X=0<b.matchPrefix(f,"a=end-of-candidates").length,E=b.matchPrefix(f,"a=candidate:").map(function(a){return b.parseCandidate(a)}).filter(function(a){return"1"===a.component});"offer"!==k.type||x?
"answer"!==k.type||x||(G=c.transceivers[v],D=G.iceGatherer,P=G.iceTransport,w=G.dtlsTransport,Q=G.rtpSender,x=G.rtpReceiver,q=G.sendEncodingParameters,fa=G.localCapabilities,c.transceivers[v].recvEncodingParameters=N,c.transceivers[v].remoteCapabilities=r,c.transceivers[v].cname=m,(n||X)&&E.length&&P.setRemoteCandidates(E),c.usingBundle&&0!==v||(P.start(D,T,"controlling"),w.start(e)),c._transceive(G,"sendrecv"===B||"recvonly"===B,"sendrecv"===B||"sendonly"===B),!x||"sendrecv"!==B&&"sendonly"!==B?
delete G.rtpReceiver:(e=x.track,a.push([e,x]),l.addTrack(e))):(T=c.usingBundle&&0<v?{iceGatherer:c.transceivers[0].iceGatherer,iceTransport:c.transceivers[0].iceTransport,dtlsTransport:c.transceivers[0].dtlsTransport}:c._createIceAndDtlsTransports(D,v),X&&T.iceTransport.setRemoteCandidates(E),fa=RTCRtpReceiver.getCapabilities(G),q=[{ssrc:1001*(2*v+2)}],x=new RTCRtpReceiver(T.dtlsTransport,G),e=x.track,a.push([e,x]),l.addTrack(e),0<c.localStreams.length&&c.localStreams[0].getTracks().length>=v&&(Q=
c.localStreams[0].getTracks()[v],Q=new RTCRtpSender(Q,T.dtlsTransport)),c.transceivers[v]={iceGatherer:T.iceGatherer,iceTransport:T.iceTransport,dtlsTransport:T.dtlsTransport,localCapabilities:fa,remoteCapabilities:r,rtpSender:Q,rtpReceiver:x,kind:G,mid:D,cname:m,sendEncodingParameters:q,recvEncodingParameters:N},c._transceive(c.transceivers[v],!1,"sendrecv"===B||"sendonly"===B))});this.remoteDescription={type:k.type,sdp:k.sdp};switch(k.type){case "offer":this._updateSignalingState("have-remote-offer");
break;case "answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+k.type+'"');}l.getTracks().length&&(c.remoteStreams.push(l),window.setTimeout(function(){var b=new Event("addstream");b.stream=l;c.dispatchEvent(b);null!==c.onaddstream&&window.setTimeout(function(){c.onaddstream(b)},0);a.forEach(function(a){var f=a[0];a=a[1];var g=new Event("track");g.track=f;g.receiver=a;g.streams=[l];c.dispatchEvent(b);null!==c.ontrack&&window.setTimeout(function(){c.ontrack(g)},
0)})},0));1<arguments.length&&"function"===typeof arguments[1]&&window.setTimeout(arguments[1],0);return Promise.resolve()};window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(b){b.iceTransport&&b.iceTransport.stop();b.dtlsTransport&&b.dtlsTransport.stop();b.rtpSender&&b.rtpSender.stop();b.rtpReceiver&&b.rtpReceiver.stop()});this._updateSignalingState("closed")};window.RTCPeerConnection.prototype._updateSignalingState=function(b){this.signalingState=b;b=new Event("signalingstatechange");
this.dispatchEvent(b);if(null!==this.onsignalingstatechange)this.onsignalingstatechange(b)};window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var b=new Event("negotiationneeded");this.dispatchEvent(b);if(null!==this.onnegotiationneeded)this.onnegotiationneeded(b)};window.RTCPeerConnection.prototype._updateConnectionState=function(){var b,c={"new":0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};this.transceivers.forEach(function(b){c[b.iceTransport.state]++;
c[b.dtlsTransport.state]++});c.connected+=c.completed;b="new";if(0<c.failed)b="failed";else if(0<c.connecting||0<c.checking)b="connecting";else if(0<c.disconnected)b="disconnected";else if(0<c["new"])b="new";else if(0<c.connected||0<c.completed)b="connected";if(b!==this.iceConnectionState&&(this.iceConnectionState=b,b=new Event("iceconnectionstatechange"),this.dispatchEvent(b),null!==this.oniceconnectionstatechange))this.oniceconnectionstatechange(b)};window.RTCPeerConnection.prototype.createOffer=
function(){var k=this;if(this._pendingOffer)throw Error("createOffer called while there is a pending offer.");var c;1===arguments.length&&"function"!==typeof arguments[0]?c=arguments[0]:3===arguments.length&&(c=arguments[2]);var l=[],a=0,f=0;this.localStreams.length&&(a=this.localStreams[0].getAudioTracks().length,f=this.localStreams[0].getVideoTracks().length);if(c){if(c.mandatory||c.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==c.offerToReceiveAudio&&
(a=c.offerToReceiveAudio);void 0!==c.offerToReceiveVideo&&(f=c.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(b){l.push({kind:b.kind,track:b,wantReceive:"audio"===b.kind?0<a:0<f});"audio"===b.kind?a--:"video"===b.kind&&f--});0<a||0<f;)0<a&&(l.push({kind:"audio",wantReceive:!0}),a--),0<f&&(l.push({kind:"video",wantReceive:!0}),f--);var g=b.writeSessionBoilerplate(),n=[];l.forEach(function(a,c){var f=a.track,g=a.kind,l=b.generateIdentifier(),B=k.usingBundle&&
0<c?{iceGatherer:n[0].iceGatherer,iceTransport:n[0].iceTransport,dtlsTransport:n[0].dtlsTransport}:k._createIceAndDtlsTransports(l,c),P=RTCRtpSender.getCapabilities(g),w,Q,q=[{ssrc:1001*(2*c+1)}];f&&(w=new RTCRtpSender(f,B.dtlsTransport));a.wantReceive&&(Q=new RTCRtpReceiver(B.dtlsTransport,g));n[c]={iceGatherer:B.iceGatherer,iceTransport:B.iceTransport,dtlsTransport:B.dtlsTransport,localCapabilities:P,remoteCapabilities:null,rtpSender:w,rtpReceiver:Q,kind:g,mid:l,sendEncodingParameters:q,recvEncodingParameters:null}});
this.usingBundle&&(g+="a=group:BUNDLE "+n.map(function(a){return a.mid}).join(" ")+"\r\n");l.forEach(function(a,c){var f=n[c];g+=b.writeMediaSection(f,f.localCapabilities,"offer",k.localStreams[0])});this._pendingOffer=n;c=new RTCSessionDescription({type:"offer",sdp:g});arguments.length&&"function"===typeof arguments[0]&&window.setTimeout(arguments[0],0,c);return Promise.resolve(c)};window.RTCPeerConnection.prototype.createAnswer=function(){var k=this,c=b.writeSessionBoilerplate();this.usingBundle&&
(c+="a=group:BUNDLE "+this.transceivers.map(function(a){return a.mid}).join(" ")+"\r\n");this.transceivers.forEach(function(a){var f=k._getCommonCapabilities(a.localCapabilities,a.remoteCapabilities);c+=b.writeMediaSection(a,f,"answer",k.localStreams[0])});var l=new RTCSessionDescription({type:"answer",sdp:c});arguments.length&&"function"===typeof arguments[0]&&window.setTimeout(arguments[0],0,l);return Promise.resolve(l)};window.RTCPeerConnection.prototype.addIceCandidate=function(k){if(null===k)this.transceivers.forEach(function(a){a.iceTransport.addRemoteCandidate({})});
else{var c=k.sdpMLineIndex;if(k.sdpMid)for(var l=0;l<this.transceivers.length;l++)if(this.transceivers[l].mid===k.sdpMid){c=l;break}var a=this.transceivers[c];if(a){l=0<Object.keys(k.candidate).length?b.parseCandidate(k.candidate):{};if("tcp"===l.protocol&&0===l.port||"1"!==l.component)return;"endOfCandidates"===l.type&&(l={});a.iceTransport.addRemoteCandidate(l);a=b.splitSections(this.remoteDescription.sdp);a[c+1]+=(l.type?k.candidate.trim():"a=end-of-candidates")+"\r\n";this.remoteDescription.sdp=
a.join("")}}1<arguments.length&&"function"===typeof arguments[1]&&window.setTimeout(arguments[1],0);return Promise.resolve()};window.RTCPeerConnection.prototype.getStats=function(){var b=[];this.transceivers.forEach(function(c){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(a){c[a]&&b.push(c[a].getStats())})});var c=1<arguments.length&&"function"===typeof arguments[1]&&arguments[1];return new Promise(function(l){var a=new Map;Promise.all(b).then(function(b){b.forEach(function(b){Object.keys(b).forEach(function(c){a.set(c,
b[c]);a[c]=b[c]})});c&&window.setTimeout(c,0,a);l(a)})})}},shimGetUserMedia:P("./getusermedia"),attachMediaStream:function(b,c){B("DEPRECATED, attachMediaStream will soon be removed.");b.srcObject=c},reattachMediaStream:function(b,c){B("DEPRECATED, reattachMediaStream will soon be removed.");b.srcObject=c.srcObject}}},{"../utils":48,"./getusermedia":44,sdp:39}],44:[function(P,fa,Ca){fa.exports=function(){var b=function(b){return{name:{PermissionDeniedError:"NotAllowedError"}[b.name]||b.name,message:b.message,
constraint:b.constraint,toString:function(){return this.name}}},B=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(k){return B(k)["catch"](function(c){return Promise.reject(b(c))})}}},{}],45:[function(P,fa,Ca){var b=P("../utils").log,B=P("../utils").browserDetails;fa.exports={shimOnTrack:function(){"object"!==typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,
"ontrack",{get:function(){return this._ontrack},set:function(b){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly));this.addEventListener("track",this._ontrack=b);this.addEventListener("addstream",this._ontrackpoly=function(b){b.stream.getTracks().forEach(function(k){var a=new Event("track");a.track=k;a.receiver={track:k};a.streams=[b.stream];this.dispatchEvent(a)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===
typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(b){this.mozSrcObject=b}}))},shimPeerConnection:function(){if("object"===typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(a,b){if(38>B.version&&a&&a.iceServers){for(var c=[],k=0;k<a.iceServers.length;k++){var l=
a.iceServers[k];if(l.hasOwnProperty("urls"))for(var v=0;v<l.urls.length;v++){var R={url:l.urls[v]};0===l.urls[v].indexOf("turn")&&(R.username=l.username,R.credential=l.credential);c.push(R)}else c.push(a.iceServers[k])}a.iceServers=c}return new mozRTCPeerConnection(a,b)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),
window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate);["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=RTCPeerConnection.prototype[a];RTCPeerConnection.prototype[a]=function(){arguments[0]=new ("addIceCandidate"===a?RTCIceCandidate:RTCSessionDescription)(arguments[0]);return b.apply(this,arguments)}});var b=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===
arguments[0]?Promise.resolve():b.apply(this,arguments)};var c=function(a){var b=new Map;Object.keys(a).forEach(function(c){b.set(c,a[c]);b[c]=a[c]});return b},l=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(a,b,g){return l.apply(this,[a||null]).then(function(a){return c(a)}).then(b,g)}}},shimGetUserMedia:P("./getusermedia"),attachMediaStream:function(k,c){b("DEPRECATED, attachMediaStream will soon be removed.");k.srcObject=c},reattachMediaStream:function(k,c){b("DEPRECATED, reattachMediaStream will soon be removed.");
k.srcObject=c.srcObject}}},{"../utils":48,"./getusermedia":46}],46:[function(P,fa,Ca){var b=P("../utils").log,B=P("../utils").browserDetails;fa.exports=function(){var k=function(a){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[a.name]||a.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[a.message]||a.message,constraint:a.constraint,toString:function(){return this.name+(this.message&&
": ")+this.message}}},c=function(a,c,f){var l=function(a){if("object"!==typeof a||a.require)return a;var b=[];Object.keys(a).forEach(function(c){if("require"!==c&&"advanced"!==c&&"mediaSource"!==c){var f=a[c]="object"===typeof a[c]?a[c]:{ideal:a[c]};void 0===f.min&&void 0===f.max&&void 0===f.exact||b.push(c);void 0!==f.exact&&("number"===typeof f.exact?f.min=f.max=f.exact:a[c]=f.exact,delete f.exact);if(void 0!==f.ideal){a.advanced=a.advanced||[];var g={};g[c]="number"===typeof f.ideal?{min:f.ideal,
max:f.ideal}:f.ideal;a.advanced.push(g);delete f.ideal;Object.keys(f).length||delete a[c]}}});b.length&&(a.require=b);return a};a=JSON.parse(JSON.stringify(a));38>B.version&&(b("spec: "+JSON.stringify(a)),a.audio&&(a.audio=l(a.audio)),a.video&&(a.video=l(a.video)),b("ff37: "+JSON.stringify(a)));return navigator.mozGetUserMedia(a,c,function(a){f(k(a))})},l=function(a){return new Promise(function(b,f){c(a,b,f)})};navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:l,addEventListener:function(){},
removeEventListener:function(){}});navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(a){a([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})};if(41>B.version){var a=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return a().then(void 0,function(a){if("NotFoundError"===a.name)return[];throw a;
})}}if(49>B.version){var f=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(a){return f(a)["catch"](function(a){return Promise.reject(k(a))})}}navigator.getUserMedia=function(a,b,f){if(44>B.version)return c(a,b,f);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia");navigator.mediaDevices.getUserMedia(a).then(b,f)}}},{"../utils":48}],47:[function(P,fa,Ca){fa.exports={shimGetUserMedia:function(){navigator.getUserMedia=
navigator.webkitGetUserMedia}}},{}],48:[function(P,fa,Ca){var b=!0,B={disableLog:function(k){return"boolean"!==typeof k?Error("Argument type: "+typeof k+". Please use a boolean."):(b=k)?"adapter.js logging disabled":"adapter.js logging enabled"},log:function(){"object"!==typeof window||b||"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)},extractVersion:function(b,c,l){return(b=b.match(c))&&b.length>=l&&parseInt(b[l],10)},detectBrowser:function(){var b=
{browser:null,version:null,minVersion:null};if("undefined"===typeof window||!window.navigator)return b.browser="Not a browser.",b;if(navigator.mozGetUserMedia)b.browser="firefox",b.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),b.minVersion=31;else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)b.browser="chrome",b.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),b.minVersion=38;else if(navigator.userAgent.match(/Version\/(\d+).(\d+)/))b.browser=
"safari",b.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1),b.minVersion=602;else return b.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",b;else if(navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))b.browser="edge",b.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),b.minVersion=10547;else return b.browser="Not a supported browser.",b;b.version<b.minVersion&&B.log("Browser: "+b.browser+" Version: "+
b.version+" < minimum supported version: "+b.minVersion+"\n some things might not work!");return b}};fa.exports={log:B.log,disableLog:B.disableLog,browserDetails:B.detectBrowser(),extractVersion:B.extractVersion}},{}],49:[function(P,fa,Ca){function b(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var B=P("./lib/util/check"),k=P("./lib/util/extend"),c=P("./lib/dynamic"),l=P("./lib/util/raf"),a=P("./lib/util/clock"),f=P("./lib/strings"),g=P("./lib/webgl"),n=P("./lib/extension"),p=P("./lib/limits"),
v=P("./lib/buffer"),R=P("./lib/elements"),G=P("./lib/texture"),x=P("./lib/renderbuffer"),D=P("./lib/framebuffer"),ha=P("./lib/attribute"),w=P("./lib/shader"),Q=P("./lib/read"),q=P("./lib/core"),N=P("./lib/stats"),ia=P("./lib/timer");fa.exports=function(e){function r(){if(0===Ea.length)O&&O.update(),Ca=null;else{Ca=l.next(r);h();for(var a=Ea.length-1;0<=a;--a){var b=Ea[a];b&&b(M,null,0)}ka.flush();O&&O.update()}}function P(){!Ca&&0<Ea.length&&(Ca=l.next(r))}function m(){Ca&&(l.cancel(r),Ca=null)}function X(a){a.preventDefault();
ma=!0;m();ja.forEach(function(a){a()})}function E(a){ka.getError();ma=!1;Ba.restore();da.restore();oa.restore();W.restore();la.restore();ta.restore();H.restore();O&&O.restore();Da.procs.refresh();P();pa.forEach(function(a){a()})}function y(a){function b(a,d){var e={},f={};Object.keys(a).forEach(function(b){var g=a[b];if(c.isDynamic(g))f[b]=c.unbox(g,b);else{if(d&&Array.isArray(g))for(var h=0;h<g.length;++h)if(c.isDynamic(g[h])){f[b]=c.unbox(g,b);return}e[b]=g}});return{dynamic:f,"static":e}}function d(a){for(;q.length<
a;)q.push(null);return q}B(!!a,"invalid args to regl({...})");B.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=k({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},l=Da.compile(a,g,f,e,h),m=l.draw,n=l.batch,p=l.scope,q=[];return k(function(a,b){var c;ma&&B.raise("context lost");if("function"===typeof a)return p.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(c=0;c<a;++c)p.call(this,null,b,c);else if(Array.isArray(a))for(c=0;c<a.length;++c)p.call(this,a[c],b,c);else return p.call(this,a,b,0);
else if("number"===typeof a){if(0<a)return n.call(this,d(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return n.call(this,a,a.length)}else return m.call(this,a)},{stats:h,destroy:function(){l.destroy()}})}function fa(a,b){var c=0;Da.procs.poll();var d=b.color;d&&(ka.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(ka.clearDepth(+b.depth),c|=256);"stencil"in b&&(ka.clearStencil(b.stencil|0),c|=1024);B(!!c,"called regl.clear with no buffer specified");ka.clear(c)}function I(a){B.type(a,
"function","regl.frame() callback must be a function");Ea.push(a);P();return{cancel:function(){function c(){var a=b(Ea,c);Ea[a]=Ea[Ea.length-1];--Ea.length;0>=Ea.length&&m()}var d=b(Ea,a);B(0<=d,"cannot cancel a frame twice");Ea[d]=c}}}function C(){var a=za.viewport,b=za.scissor_box;a[0]=a[1]=b[0]=b[1]=0;M.viewportWidth=M.framebufferWidth=M.drawingBufferWidth=a[2]=b[2]=ka.drawingBufferWidth;M.viewportHeight=M.framebufferHeight=M.drawingBufferHeight=a[3]=b[3]=ka.drawingBufferHeight}function h(){M.tick+=
1;M.time=d();C();Da.procs.poll()}function U(){W.refresh();C();Da.procs.refresh();O&&O.update()}function d(){return(a()-J)/1E3}console.log("REGL args are:",e);e=g(e);console.log("REGL configs are:",e);if(!e)return null;var ka=e.gl,F=ka.getContextAttributes(),ma=ka.isContextLost(),Ba=n(ka,e);if(!Ba)return null;var V=f(),ca=N(),S=Ba.extensions,O=ia(ka,S),J=a(),u=ka.drawingBufferWidth,K=ka.drawingBufferHeight,M={tick:0,time:0,viewportWidth:u,viewportHeight:K,framebufferWidth:u,framebufferHeight:K,drawingBufferWidth:u,
drawingBufferHeight:K,pixelRatio:e.pixelRatio},u={elements:null,primitive:4,count:-1,offset:0,instances:-1},qa=p(ka,S),oa=v(ka,ca,e,function(a){return H.destroyBuffer(a)}),z=R(ka,S,oa,ca),H=ha(ka,S,qa,ca,oa,z,u),da=w(ka,V,ca,e),W=G(ka,S,qa,function(){Da.procs.poll()},M,ca,e),la=x(ka,S,qa,ca,e),ta=D(ka,S,qa,W,la,ca),Da=q(ka,V,S,qa,oa,z,W,ta,{},H,da,u,M,O,e),V=Q(ka,ta,Da.procs.poll,M,F,S,qa),za=Da.next,ea=ka.canvas,Ea=[],ja=[],pa=[],Aa=[e.onDestroy],Ca=null;ea&&(ea.addEventListener("webglcontextlost",
X,!1),ea.addEventListener("webglcontextrestored",E,!1));var na=ta.setFBO=y({framebuffer:c.define.call(null,1,"framebuffer")});U();F=k(y,{clear:function(a){B("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)na(k({framebuffer:a.framebuffer.faces[b]},a),fa);else na(a,fa);else fa(null,a)},prop:c.define.bind(null,1),context:c.define.bind(null,2),"this":c.define.bind(null,3),draw:y({}),buffer:function(a){return oa.create(a,
34962,!1,!1)},elements:function(a){return z.create(a,!1)},texture:W.create2D,cube:W.createCube,renderbuffer:la.create,framebuffer:ta.create,framebufferCube:ta.createCube,vao:H.createVAO,attributes:F,frame:I,on:function(a,b){B.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return I(b);case "lost":c=ja;break;case "restore":c=pa;break;case "destroy":c=Aa;break;default:B.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:qa,hasExtension:function(a){return 0<=qa.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){Ea.length=0;m();ea&&(ea.removeEventListener("webglcontextlost",X),ea.removeEventListener("webglcontextrestored",E));da.clear();ta.clear();la.clear();H.clear();W.clear();z.clear();oa.clear();O&&O.clear();Aa.forEach(function(a){a()})},_gl:ka,_refresh:U,poll:function(){h();O&&O.update()},now:d,stats:ca});e.onDone(null,F);return F}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
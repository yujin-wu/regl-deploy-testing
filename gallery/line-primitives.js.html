<!DOCTYPE html>
      <html>
        <head>
          <title>example/line-primitives.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function L(H,ia,a){function e(h,d){if(!ia[h]){if(!H[h]){var c="function"==typeof require&&require;if(!d&&c)return c(h,!0);if(t)return t(h,!0);c=Error("Cannot find module '"+h+"'");throw c.code="MODULE_NOT_FOUND",c;}c=ia[h]={exports:{}};H[h][0].call(c.exports,function(a){return e(H[h][1][a]||a)},c,c.exports,L,H,ia,a)}return ia[h].exports}for(var t="function"==typeof require&&require,p=0;p<a.length;p++)e(a[p]);return e}return L})()({1:[function(L,H,ia){function a(a){return t({attributes:{position:a.position},
uniforms:{color:a.color,scale:a.scale,offset:a.offset,phase:a.phase,freq:a.freq},lineWidth:c,count:a.position.length,primitive:a.primitive})}function e(a){return Array(a).fill().map(function(b,d){var c=d/a*Math.PI*2;return[Math.cos(c),Math.sin(c)]})}var t=L("../regl")(),p=L("gl-mat4"),h=L("seedrandom")("my_seed"),d=t({uniforms:{tick:function(a){return a.tick},projection:function(a){return p.perspective([],Math.PI/4,a.viewportWidth/a.viewportHeight,.01,1E3)},view:p.lookAt([],[2.1,0,1.3],[0,0,0],[0,
0,1])},frag:"\n  precision mediump float;\n  uniform vec3 color;\n  void main() {\n    gl_FragColor = vec4(color, 1.0);\n  }",vert:"\n\n  precision mediump float;\n  attribute vec2 position;\n\n  uniform mat4 projection, view;\n\n  uniform float scale;\n  uniform vec2 offset;\n  uniform float tick;\n  uniform float phase;\n  uniform float freq;\n\n  void main() {\n    vec2 p  = position;\n\n    // scale\n    p *= scale;\n\n    // rotate\n    float phi = tick * freq + phase;\n    p = vec2(\n      dot(vec2(+cos(phi), -sin(phi)), p),\n      dot(vec2(+sin(phi), +cos(phi)), p)\n    );\n\n    // translate\n    p += offset;\n\n    gl_Position = projection * view * vec4(p, 0, 1);\n  }"}),
c=3;c>t.limits.lineWidthDims[1]&&(c=t.limits.lineWidthDims[1]);var b=[],l;b.push(a({color:[1,.1,.3],primitive:"line loop",scale:.25,offset:[-.7,0],phase:0,freq:.01,position:[[-1,-1],[1,-1],[1,1],[-1,1]]}));b.push(a({color:[.2,.8,.3],primitive:"line loop",scale:.25,offset:[-.7,.7],phase:.8,freq:-.014,position:e(3)}));b.push(a({color:[.7,.3,.9],primitive:"line loop",scale:.25,offset:[0,.7],phase:.6,freq:.009,position:e(6)}));var r=30;b.push(a({color:[.3,.6,.8],primitive:"line loop",scale:.25,offset:[.7,
.7],phase:.6,freq:-.011,position:Array(r).fill().map(function(a,b){var c=b/r*Math.PI*2,d=1+.15*Math.sin(70*c);return[d*Math.cos(c),d*Math.sin(c)]})}));r=70;b.push(a({color:[.7,.8,.4],primitive:"line loop",scale:.25,offset:[.7,0],phase:.6,freq:.012,position:Array(r).fill().map(function(a,b){var c=b/r*Math.PI*2,d=1+.15*h();return[d*Math.cos(c),d*Math.sin(c)]})}));r=120;b.push(a({color:[.3,.8,.76],primitive:"line strip",scale:.25,offset:[0,0],phase:.6,freq:.015,position:Array(r).fill().map(function(a,
b){var c=b/r*Math.PI*2,c=5*c;return[.03*(Math.cos(c)+c*Math.sin(c)),.03*(Math.sin(c)-c*Math.cos(c))]})}));r=300;b.push(a({color:[1,1,1],primitive:"line strip",scale:.25,offset:[.7,-.6],phase:.6,freq:-.011,position:Array(r).fill().map(function(a,b){var c=b/r*Math.PI*2,c=5*c;return[1*Math.cos(1.25*c)*Math.cos(c),1*Math.cos(1.25*c)*Math.sin(c)]})}));var r=70,v=5;b.push(a({color:[1,.7,.2],primitive:"line strip",scale:.25,offset:[0,-.6],phase:.6,freq:.015,position:Array(r).fill().map(function(a,b){return[.5*
Math.sin(-Math.PI*v+b/r*Math.PI*v*2),-.9+b/r*1.8]})}));r=20;v=5;b.push(a({color:[.9,.2,.6],primitive:"line strip",scale:.25,offset:[-.7,-.6],phase:.3,freq:-.01,position:Array(r).fill().map(function(a,b){return[b/r*.5*Math.sin(-Math.PI*v+b/r*Math.PI*v*2),-1+b/r*2]})}));t.frame(function(a){t.clear({color:[0,0,0,1],depth:1});d(function(){for(l=0;l<b.length;l++)b[l]()})})},{"../regl":77,"gl-mat4":54,seedrandom:69}],2:[function(L,H,ia){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=
null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var e=L("./util/sorted-object-keys"),t=L("./util/check"),p=L("./util/values"),h=L("./constants/dtypes.json"),d=L("./util/is-typed-array"),c=L("./util/is-ndarray"),b=L("./constants/primitives.json"),l="attributes elements offset count primitive instances".split(" ");H.exports=function(r,v,k,F,I,n,aa){function q(a){if(a!==W.currentVAO){var b=v.oes_vertex_array_object;a?b.bindVertexArrayOES(a.vao):b.bindVertexArrayOES(null);
W.currentVAO=a}}function J(a){if(a!==W.currentVAO){if(a)a.bindAttrs();else{for(var b=v.angle_instanced_arrays,c=0;c<w.length;++c){var d=w[c];d.buffer?(r.enableVertexAttribArray(c),d.buffer.bind(),r.vertexAttribPointer(c,d.size,d.type,d.normalized,d.stride,d.offfset),b&&d.divisor&&b.vertexAttribDivisorANGLE(c,d.divisor)):(r.disableVertexAttribArray(c),r.vertexAttrib4f(c,d.x,d.y,d.z,d.w))}aa.elements?r.bindBuffer(34963,aa.elements.buffer.buffer):r.bindBuffer(34963,null)}W.currentVAO=a}}function C(){p(E).forEach(function(a){a.destroy()})}
function M(){this.id=++ba;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=v.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;E[this.id]=this;this.buffers=[]}function Aa(){v.oes_vertex_array_object&&p(E).forEach(function(a){a.refresh()})}var f=k.maxAttributes,w=Array(f);for(k=0;k<f;++k)w[k]=new a;var ba=0,E={},W={Record:a,scope:{},state:w,currentVAO:null,targetVAO:null,restore:v.oes_vertex_array_object?Aa:
function(){},createVAO:function(D){function y(D){var r;if(Array.isArray(D))r=D,p.elements&&p.ownsElements&&p.elements.destroy(),p.elements=null,p.ownsElements=!1,p.offset=0,p.count=0,p.instances=-1,p.primitive=4;else{t("object"===typeof D,"invalid arguments for create vao");t("attributes"in D,"must specify attributes for vao");if(D.elements){var m=D.elements;p.ownsElements?("function"===typeof m&&"elements"===m._reglType?p.elements.destroy():p.elements(m),p.ownsElements=!1):n.getElements(D.elements)?
(p.elements=D.elements,p.ownsElements=!1):(p.elements=n.create(D.elements),p.ownsElements=!0)}else p.elements=null,p.ownsElements=!1;r=D.attributes;p.offset=0;p.count=-1;p.instances=-1;p.primitive=4;p.elements&&(p.count=p.elements._elements.vertCount,p.primitive=p.elements._elements.primType);"offset"in D&&(p.offset=D.offset|0);"count"in D&&(p.count=D.count|0);"instances"in D&&(p.instances=D.instances|0);"primitive"in D&&(t(D.primitive in b,"bad primitive type: "+D.primitive),p.primitive=b[D.primitive]);
t.optional(function(){for(var a=e(D),b=0;b<a.length;++b)t(0<=l.indexOf(a[b]),'invalid option for vao: "'+a[b]+'" valid options are '+l)});t(Array.isArray(r),"attributes must be an array")}t(r.length<f,"too many attributes");t(0<r.length,"must specify at least one attribute");var m={},Z=p.attributes;Z.length=r.length;for(var g=0;g<r.length;++g){var w=r[g],k=Z[g]=new a,E=w.data||w;if(Array.isArray(E)||d(E)||c(E)){var C;p.buffers[g]&&(C=p.buffers[g],d(E)&&C._buffer.byteLength>=E.byteLength?C.subdata(E):
(C.destroy(),p.buffers[g]=null));p.buffers[g]||(C=p.buffers[g]=I.create(w,34962,!1,!0));k.buffer=I.getBuffer(C);k.size=k.buffer.dimension|0;k.normalized=!1;k.type=k.buffer.dtype;k.offset=0;k.stride=0;k.divisor=0;k.state=1;m[g]=1}else I.getBuffer(w)?(k.buffer=I.getBuffer(w),k.size=k.buffer.dimension|0,k.normalized=!1,k.type=k.buffer.dtype,k.offset=0,k.stride=0,k.divisor=0,k.state=1):I.getBuffer(w.buffer)?(k.buffer=I.getBuffer(w.buffer),k.size=(+w.size||k.buffer.dimension)|0,k.normalized=!!w.normalized||
!1,"type"in w?(t.parameter(w.type,h,"invalid buffer type"),k.type=h[w.type]):k.type=k.buffer.dtype,k.offset=(w.offset||0)|0,k.stride=(w.stride||0)|0,k.divisor=(w.divisor||0)|0,k.state=1,t(1<=k.size&&4>=k.size,"size must be between 1 and 4"),t(0<=k.offset,"invalid offset"),t(0<=k.stride&&255>=k.stride,"stride must be between 0 and 255"),t(0<=k.divisor,"divisor must be positive"),t(!k.divisor||!!v.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in w?(t(0<g,"first attribute must not be a constant"),
k.x=+w.x||0,k.y=+w.y||0,k.z=+w.z||0,k.w=+w.w||0,k.state=2):t(!1,"invalid attribute spec for location "+g)}for(C=0;C<p.buffers.length;++C)!m[C]&&p.buffers[C]&&(p.buffers[C].destroy(),p.buffers[C]=null);p.refresh();return y}var p=new M;F.vaoCount+=1;y.destroy=function(){for(var a=0;a<p.buffers.length;++a)p.buffers[a]&&p.buffers[a].destroy();p.buffers.length=0;p.ownsElements&&(p.elements.destroy(),p.elements=null,p.ownsElements=!1);p.destroy()};y._vao=p;y._reglType="vao";return y(D)},getVAO:function(a){return"function"===
typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var b=0;b<w.length;++b){var c=w[b];c.buffer===a&&(r.disableVertexAttribArray(b),c.buffer=null)}},setVAO:v.oes_vertex_array_object?q:J,clear:v.oes_vertex_array_object?C:function(){}};M.prototype.bindAttrs=function(){for(var a=v.angle_instanced_arrays,b=this.attributes,c=0;c<b.length;++c){var d=b[c];d.buffer?(r.enableVertexAttribArray(c),r.bindBuffer(34962,d.buffer.buffer),r.vertexAttribPointer(c,d.size,d.type,d.normalized,d.stride,d.offset),
a&&d.divisor&&a.vertexAttribDivisorANGLE(c,d.divisor)):(r.disableVertexAttribArray(c),r.vertexAttrib4f(c,d.x,d.y,d.z,d.w))}for(a=b.length;a<f;++a)r.disableVertexAttribArray(a);(a=n.getElements(this.elements))?r.bindBuffer(34963,a.buffer.buffer):r.bindBuffer(34963,null)};M.prototype.refresh=function(){var a=v.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),W.currentVAO=null,a.bindVertexArrayOES(null))};M.prototype.destroy=function(){if(this.vao){var a=v.oes_vertex_array_object;
this===W.currentVAO&&(W.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);E[this.id]&&(delete E[this.id],--F.vaoCount)};return W}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(L,H,ia){function a(a){return k[Object.prototype.toString.call(a)]|
0}function e(a,b){for(var c=0;c<b.length;++c)a[c]=b[c]}function t(a,b,c,d,e,h,f){for(var p=0,k=0;k<c;++k)for(var l=0;l<d;++l)a[p++]=b[e*k+h*l+f]}var p=L("./util/sorted-object-keys"),h=L("./util/check"),d=L("./util/is-typed-array"),c=L("./util/is-ndarray"),b=L("./util/values"),l=L("./util/pool");ia=L("./util/flatten");var r=ia.flatten,v=ia.shape,k=L("./constants/arraytypes.json"),F=L("./constants/dtypes.json"),I=L("./constants/usage.json"),n=[];n[5120]=1;n[5122]=2;n[5124]=4;n[5121]=1;n[5123]=2;n[5125]=
4;n[5126]=4;H.exports=function(k,q,J,C){function M(a){this.id=ba++;this.buffer=k.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;J.profile&&(this.stats={size:0})}function Aa(a,b,c){a.byteLength=b.byteLength;k.bufferData(a.type,b,c)}function f(b,f,p,k,w,m){b.usage=p;if(Array.isArray(f)){if(b.dtype=k||5126,0<f.length)if(Array.isArray(f[0])){w=v(f);for(var Z=k=1;Z<w.length;++Z)k*=w[Z];b.dimension=k;f=r(f,w,b.dtype);Aa(b,f,p);m?b.persistentData=
f:l.freeType(f)}else"number"===typeof f[0]?(b.dimension=w,w=l.allocType(b.dtype,f.length),e(w,f),Aa(b,w,p),m?b.persistentData=w:l.freeType(w)):d(f[0])?(b.dimension=f[0].length,b.dtype=k||a(f[0])||5126,f=r(f,[f.length,f[0].length],b.dtype),Aa(b,f,p),m?b.persistentData=f:l.freeType(f)):h.raise("invalid buffer data")}else if(d(f))b.dtype=k||a(f),b.dimension=w,Aa(b,f,p),m&&(b.persistentData=new Uint8Array(new Uint8Array(f.buffer)));else if(c(f)){w=f.shape;var g=f.stride,Z=f.offset,C=0,E=0,q=0,F=0;1===
w.length?(C=w[0],E=1,q=g[0],F=0):2===w.length?(C=w[0],E=w[1],q=g[0],F=g[1]):h.raise("invalid shape");b.dtype=k||a(f.data)||5126;b.dimension=E;w=l.allocType(b.dtype,C*E);t(w,f.data,C,E,q,F,Z);Aa(b,w,p);m?b.persistentData=w:l.freeType(w)}else f instanceof ArrayBuffer?(b.dtype=5121,b.dimension=w,Aa(b,f,p),m&&(b.persistentData=new Uint8Array(new Uint8Array(f)))):h.raise("invalid buffer data")}function w(a){q.bufferCount--;C(a);var b=a.buffer;h(b,"buffer must not be deleted already");k.deleteBuffer(b);
a.buffer=null;delete E[a.id]}var ba=0,E={};M.prototype.bind=function(){k.bindBuffer(this.type,this.buffer)};M.prototype.destroy=function(){w(this)};var W=[];J.profile&&(q.getTotalBufferSize=function(){var a=0;p(E).forEach(function(b){a+=E[b].stats.size});return a});return{create:function(b,p,C,ba){function B(a){var b=35044,m=null,e=0,p=0,l=1;Array.isArray(a)||d(a)||c(a)||a instanceof ArrayBuffer?m=a:"number"===typeof a?e=a|0:a&&(h.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(h(null===m||Array.isArray(m)||d(m)||c(m),"invalid data for buffer"),m=a.data),"usage"in a&&(h.parameter(a.usage,I,"invalid buffer usage"),b=I[a.usage]),"type"in a&&(h.parameter(a.type,F,"invalid buffer type"),p=F[a.type]),"dimension"in a&&(h.type(a.dimension,"number","invalid dimension"),l=a.dimension|0),"length"in a&&(h.nni(e,"buffer length must be a nonnegative integer"),e=a.length|0));Z.bind();m?f(Z,m,b,p,l,ba):(e&&k.bufferData(Z.type,e,b),Z.dtype=p||5121,Z.usage=b,Z.dimension=l,Z.byteLength=
e);J.profile&&(Z.stats.size=Z.byteLength*n[Z.dtype]);return B}function m(a,b){h(b+a.byteLength<=Z.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+b+" to a buffer of size "+Z.byteLength);k.bufferSubData(Z.type,b,a)}q.bufferCount++;var Z=new M(p);E[Z.id]=Z;C||B(b);B._reglType="buffer";B._buffer=Z;B.subdata=function(b,f){var p=(f||0)|0,k;Z.bind();if(d(b)||b instanceof ArrayBuffer)m(b,p);else if(Array.isArray(b)){if(0<b.length)if("number"===
typeof b[0]){var w=l.allocType(Z.dtype,b.length);e(w,b);m(w,p);l.freeType(w)}else Array.isArray(b[0])||d(b[0])?(k=v(b),w=r(b,k,Z.dtype),m(w,p),l.freeType(w)):h.raise("invalid buffer data")}else if(c(b)){k=b.shape;var D=b.stride,y=w=0,C=0,E=0;1===k.length?(w=k[0],y=1,C=D[0],E=0):2===k.length?(w=k[0],y=k[1],C=D[0],E=D[1]):h.raise("invalid shape");k=Array.isArray(b.data)?Z.dtype:a(b.data);k=l.allocType(k,w*y);t(k,b.data,w,y,C,E,b.offset);m(k,p);l.freeType(k)}else h.raise("invalid data for buffer subdata");
return B};J.profile&&(B.stats=Z.stats);B.destroy=function(){w(Z)};return B},createStream:function(a,b){var c=W.pop();c||(c=new M(a));c.bind();f(c,b,35040,0,1,!1);return c},destroyStream:function(a){W.push(a)},clear:function(){b(E).forEach(w);W.forEach(w)},getBuffer:function(a){return a&&a._buffer instanceof M?a._buffer:null},restore:function(){b(E).forEach(function(a){a.buffer=k.createBuffer();k.bindBuffer(a.type,a.buffer);k.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:f}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(L,H,ia){H.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(L,H,ia){H.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(L,H,ia){H.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(L,H,ia){H.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(L,H,ia){function a(a){return Array.isArray(a)||k(a)||F(a)}function e(a){return a.sort(function(a,
b){return"viewport"===a?-1:"viewport"===b?1:a<b?-1:1})}function t(a,b,c,d){this.thisDep=a;this.contextDep=b;this.propDep=c;this.append=d}function p(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function h(a){return new t(!1,!1,!1,a)}function d(a,b){var c=a.type;if(0===c)return c=a.data.length,new t(!0,1<=c,2<=c,b);if(4===c)return c=a.data,new t(c.thisDep,c.contextDep,c.propDep,b);if(5===c)return new t(!1,!1,!1,b);if(6===c){for(var d=c=!1,f=!1,m=0;m<a.data.length;++m){var e=a.data[m];1===e.type?
f=!0:2===e.type?d=!0:3===e.type?c=!0:0===e.type?(c=!0,e=e.data,1<=e&&(d=!0),2<=e&&(f=!0)):4===e.type&&(c=c||e.data.thisDep,d=d||e.data.contextDep,f=f||e.data.propDep)}return new t(c,d,f,b)}return new t(3===c,2===c,1===c,b)}var c=L("./util/sorted-object-keys"),b=L("./util/check"),l=L("./util/extend"),r=L("./util/codegen"),v=L("./util/loop"),k=L("./util/is-typed-array"),F=L("./util/is-ndarray"),I=L("./util/is-array-like"),n=L("./dynamic"),aa=L("./constants/primitives.json"),q=L("./constants/dtypes.json"),
J=["x","y","z","w"],C="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),M={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Aa="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
f={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},w={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ba={frag:35632,vert:35633},E={cw:2304,ccw:2305},W=new t(!1,!1,!1,function(){});H.exports=function(k,y,F,G,B,m,Z,g,la,Q,ga,Ea,V,X,S){function T(a){return a.replace(".","_")}function N(a,b,c){var d=T(a);ta.push(a);
Y[d]=ka[d]=!!c;Sa[d]=b}function x(a,b,c){var d=T(a);ta.push(a);Array.isArray(c)?(ka[d]=c.slice(),Y[d]=c.slice()):ka[d]=Y[d]=c;Ia[d]=b}function P(){var a=r(),d=a.link,m=a.global;a.id=yd++;a.batchId="0";var g=d(gb),e=a.shared={props:"a0"};c(gb).forEach(function(a){e[a]=m.def(g,".",a)});b.optional(function(){a.CHECK=d(b);a.commandStr=b.guessCommand();a.command=d(a.commandStr);a.assert=function(a,b,c){a("if(!(",b,"))",this.CHECK,".commandRaise(",d(c),",",this.command,");")};ca.invalidBlendCombinations=
Aa});var f=a.next={},x=a.current={};c(Ia).forEach(function(a){Array.isArray(ka[a])&&(f[a]=m.def(e.next,".",a),x[a]=m.def(e.current,".",a))});var z=a.constants={};c(ca).forEach(function(a){z[a]=m.def(JSON.stringify(ca[a]))});a.invoke=function(b,c){switch(c.type){case 0:var m=["this",e.context,e.props,a.batchId];return b.def(d(c.data),".call(",m.slice(0,Math.max(c.data.length+1,4)),")");case 1:return b.def(e.props,c.data);case 2:return b.def(e.context,c.data);case 3:return b.def("this",c.data);case 4:return c.data.append(a,
b),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(c){return a.invoke(b,c)})}};a.attribCache={};var A={};a.scopeAttrib=function(a){a=y.id(a);if(a in A)return A[a];var b=Q.scope[a];b||(b=Q.scope[a]=new va);return A[a]=d(b)};return a}function O(a){var b=a["static"];a=a.dynamic;var c;if("profile"in b){var m=!!b.profile;c=h(function(a,b){return m});c.enable=m}else if("profile"in a){var g=a.profile;c=d(g,function(a,b){return a.invoke(b,g)})}return c}function pa(a,c){var m=
a["static"],e=a.dynamic;if("framebuffer"in m){var f=m.framebuffer;return f?(f=g.getFramebuffer(f),b.command(f,"invalid framebuffer object"),h(function(a,b){var c=a.link(f),d=a.shared;b.set(d.framebuffer,".next",c);d=d.context;b.set(d,".framebufferWidth",c+".width");b.set(d,".framebufferHeight",c+".height");return c})):h(function(a,b){var c=a.shared;b.set(c.framebuffer,".next","null");c=c.context;b.set(c,".framebufferWidth",c+".drawingBufferWidth");b.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in e){var x=e.framebuffer;return d(x,function(a,c){var d=a.invoke(c,x),m=a.shared,g=m.framebuffer,e=c.def(g,".getFramebuffer(",d,")");b.optional(function(){a.assert(c,"!"+d+"||"+e,"invalid framebuffer object")});c.set(g,".next",e);m=m.context;c.set(m,".framebufferWidth",e+"?"+e+".width:"+m+".drawingBufferWidth");c.set(m,".framebufferHeight",e+"?"+e+".height:"+m+".drawingBufferHeight");return e})}return null}function oa(a,c,m){function g(a){if(a in e){var x=e[a];b.commandType(x,
"object","invalid "+a,m.commandStr);var A=!0,z=x.x|0,p=x.y|0,u,h;"width"in x?(u=x.width|0,b.command(0<=u,"invalid "+a,m.commandStr)):A=!1;"height"in x?(h=x.height|0,b.command(0<=h,"invalid "+a,m.commandStr)):A=!1;return new t(!A&&c&&c.thisDep,!A&&c&&c.contextDep,!A&&c&&c.propDep,function(a,b){var c=a.shared.context,d=u;"width"in x||(d=b.def(c,".","framebufferWidth","-",z));var m=h;"height"in x||(m=b.def(c,".","framebufferHeight","-",p));return[z,p,d,m]})}if(a in f){var k=f[a],A=d(k,function(c,d){var m=
c.invoke(d,k);b.optional(function(){c.assert(d,m+"&&typeof "+m+'==="object"',"invalid "+a)});var g=c.shared.context,e=d.def(m,".x|0"),f=d.def(m,".y|0"),x=d.def('"width" in ',m,"?",m,".width|0:","(",g,".","framebufferWidth","-",e,")"),A=d.def('"height" in ',m,"?",m,".height|0:","(",g,".","framebufferHeight","-",f,")");b.optional(function(){c.assert(d,x+">=0&&"+A+">=0","invalid "+a)});return[e,f,x,A]});c&&(A.thisDep=A.thisDep||c.thisDep,A.contextDep=A.contextDep||c.contextDep,A.propDep=A.propDep||c.propDep);
return A}return c?new t(c.thisDep,c.contextDep,c.propDep,function(a,b){var c=a.shared.context;return[0,0,b.def(c,".","framebufferWidth"),b.def(c,".","framebufferHeight")]}):null}var e=a["static"],f=a.dynamic;if(a=g("viewport")){var x=a;a=new t(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=x.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",c[2]);b.set(d,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:g("scissor.box")}}function z(a,d){var m=a["static"];if("string"===typeof m.frag&&
"string"===typeof m.vert){if(0<c(d.dynamic).length)return null;var m=d["static"],g=c(m);if(0<g.length&&"number"===typeof m[g[0]]){for(var e=[],f=0;f<g.length;++f)b("number"===typeof m[g[f]],"must specify all vertex attribute locations when using vaos"),e.push([m[g[f]]|0,g[f]]);return e}}return null}function K(a,c,m){function g(a){if(a in e){var c=y.id(e[a]);b.optional(function(){ga.shader(ba[a],c,b.guessCommand())});var m=h(function(){return c});m.id=c;return m}if(a in f){var x=f[a];return d(x,function(c,
d){var m=c.invoke(d,x),g=d.def(c.shared.strings,".id(",m,")");b.optional(function(){d(c.shared.shader,".shader(",ba[a],",",g,",",c.command,");")});return g})}return null}var e=a["static"],f=a.dynamic,x=g("frag"),A=g("vert"),z=null;p(x)&&p(A)?(z=ga.program(A.id,x.id,null,m),a=h(function(a,b){return a.link(z)})):a=new t(x&&x.thisDep||A&&A.thisDep,x&&x.contextDep||A&&A.contextDep,x&&x.propDep||A&&A.propDep,function(a,c){var d=a.shared.shader,m;m=x?x.append(a,c):c.def(d,".","frag");var g;g=A?A.append(a,
c):c.def(d,".","vert");var e=d+".program("+g+","+m;b.optional(function(){e+=","+a.command});return c.def(e+")")});return{frag:x,vert:A,progVar:a,program:z}}function ea(g,e){function f(a,c){if(a in x){var m=x[a]|0;c?z.offset=m:z.instances=m;b.command(!c||0<=m,"invalid "+a,e.commandStr);return h(function(a,b){c&&(a.OFFSET=m);return m})}if(a in A){var g=A[a];return d(g,function(d,m){var e=d.invoke(m,g);c&&(d.OFFSET=e,b.optional(function(){d.assert(m,e+">=0","invalid "+a)}));return e})}if(c){if(R)return h(function(a,
b){return a.OFFSET=0});if(u)return new t(k.thisDep,k.contextDep,k.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(u)return new t(k.thisDep,k.contextDep,k.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var x=g["static"],A=g.dynamic,z={},u=!1,k=function(){if("vao"in x){var a=x.vao;null!==a&&null===Q.getVAO(a)&&(a=Q.createVAO(a));u=!0;z.vao=a;return h(function(b){var c=
Q.getVAO(a);return c?b.link(c):"null"})}if("vao"in A){u=!0;var b=A.vao;return d(b,function(a,c){var d=a.invoke(c,b);return c.def(a.shared.vao+".getVAO("+d+")")})}return null}(),R=!1,w=function(){if("elements"in x){var c=x.elements;z.elements=c;if(a(c)){var g=z.elements=m.create(c,!0),c=m.getElements(g);R=!0}else c&&(c=m.getElements(c),R=!0,b.command(c,"invalid elements",e.commandStr));g=h(function(a,b){if(c){var d=a.link(c);return a.ELEMENTS=d}return a.ELEMENTS=null});g.value=c;return g}if("elements"in
A){R=!0;var f=A.elements;return d(f,function(a,c){var d=a.shared,m=d.isBufferArgs,d=d.elements,g=a.invoke(c,f),e=c.def("null"),m=c.def(m,"(",g,")"),x=a.cond(m).then(e,"=",d,".createStream(",g,");")["else"](e,"=",d,".getElements(",g,");");b.optional(function(){a.assert(x["else"],"!"+g+"||"+e,"invalid elements")});c.entry(x);c.exit(a.cond(m).then(d,".destroyStream(",e,");"));return a.ELEMENTS=e})}return u?new t(k.thisDep,k.contextDep,k.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),l=f("offset",!0),ha=function(){if("primitive"in x){var a=x.primitive;z.primitive=a;b.commandParameter(a,aa,"invalid primitve",e.commandStr);return h(function(b,c){return aa[a]})}if("primitive"in A){var m=A.primitive;return d(m,function(a,d){var g=a.constants.primTypes,e=a.invoke(d,m);b.optional(function(){a.assert(d,e+" in "+g,"invalid primitive, must be one of "+c(aa))});return d.def(g,"[",e,"]")})}return R?p(w)?
w.value?h(function(a,b){return b.def(a.ELEMENTS,".primType")}):h(function(){return 4}):new t(w.thisDep,w.contextDep,w.propDep,function(a,b){var c=a.ELEMENTS;return b.def(c,"?",c,".primType:",4)}):u?new t(k.thisDep,k.contextDep,k.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),r=function(){if("count"in x){var a=x.count|0;z.count=a;b.command("number"===typeof a&&0<=a,"invalid vertex count",e.commandStr);return h(function(){return a})}if("count"in
A){var c=A.count;return d(c,function(a,d){var m=a.invoke(d,c);b.optional(function(){a.assert(d,"typeof "+m+'==="number"&&'+m+">=0&&"+m+"===("+m+"|0)","invalid vertex count")});return m})}if(R){if(p(w)){if(w)return l?new t(l.thisDep,l.contextDep,l.propDep,function(a,c){var d=c.def(a.ELEMENTS,".vertCount-",a.OFFSET);b.optional(function(){a.assert(c,d+">=0","invalid vertex offset/element buffer too small")});return d}):h(function(a,b){return b.def(a.ELEMENTS,".vertCount")});var m=h(function(){return-1});
b.optional(function(){m.MISSING=!0});return m}var g=new t(w.thisDep||l.thisDep,w.contextDep||l.contextDep,w.propDep||l.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")});b.optional(function(){g.DYNAMIC=!0});return g}return u?new t(k.thisDep,k.contextDep,k.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),sa=f("instances",!1);return{elements:w,primitive:ha,count:r,
instances:sa,offset:l,vao:k,vaoActive:u,elementsActive:R,"static":z}}function U(a,m){var g=a["static"],e=a.dynamic,x={};ta.forEach(function(a){function A(b,c){if(a in g){var m=b(g[a]);x[z]=h(function(){return m})}else if(a in e){var f=e[a];x[z]=d(f,function(a,b){return c(a,b,a.invoke(b,f))})}}var z=T(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return A(function(c){b.commandType(c,
"boolean",a,m.commandStr);return c},function(c,m,d){b.optional(function(){c.assert(m,"typeof "+d+'==="boolean"',"invalid flag "+a,c.commandStr)});return d});case "depth.func":return A(function(c){b.commandParameter(c,f,"invalid "+a,m.commandStr);return f[c]},function(m,d,g){var e=m.constants.compareFuncs;b.optional(function(){m.assert(d,g+" in "+e,"invalid "+a+", must be one of "+c(f))});return d.def(e,"[",g,"]")});case "depth.range":return A(function(a){b.command(I(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",m.commandStr);return a},function(a,c,m){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+m+")&&"+m+".length===2&&typeof "+m+'[0]==="number"&&typeof '+m+'[1]==="number"&&'+m+"[0]<="+m+"[1]","depth range must be a 2d array")});var d=c.def("+",m,"[0]"),g=c.def("+",m,"[1]");return[d,g]});case "blend.func":return A(function(a){b.commandType(a,"object","blend.func",m.commandStr);var c="srcRGB"in a?a.srcRGB:a.src,d="srcAlpha"in a?a.srcAlpha:
a.src,g="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;b.commandParameter(c,M,z+".srcRGB",m.commandStr);b.commandParameter(d,M,z+".srcAlpha",m.commandStr);b.commandParameter(g,M,z+".dstRGB",m.commandStr);b.commandParameter(a,M,z+".dstAlpha",m.commandStr);b.command(-1===Aa.indexOf(c+", "+g),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+g+")",m.commandStr);return[M[c],M[g],M[d],M[a]]},function(m,d,g){function e(A,x){var z=d.def('"',A,x,'" in ',g,"?",g,".",A,x,":",g,".",
A);b.optional(function(){m.assert(d,z+" in "+f,"invalid "+a+"."+A+x+", must be one of "+c(M))});return z}var f=m.constants.blendFuncs;b.optional(function(){m.assert(d,g+"&&typeof "+g+'==="object"',"invalid blend func, must be an object")});var A=e("src","RGB"),x=e("dst","RGB");b.optional(function(){m.assert(d,m.constants.invalidBlendCombinations+".indexOf("+A+'+", "+'+x+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var z=d.def(f,"[",A,"]"),u=d.def(f,"[",e("src","Alpha"),"]"),
p=d.def(f,"[",x,"]"),h=d.def(f,"[",e("dst","Alpha"),"]");return[z,p,u,h]});case "blend.equation":return A(function(c){if("string"===typeof c)return b.commandParameter(c,Ga,"invalid "+a,m.commandStr),[Ga[c],Ga[c]];if("object"===typeof c)return b.commandParameter(c.rgb,Ga,a+".rgb",m.commandStr),b.commandParameter(c.alpha,Ga,a+".alpha",m.commandStr),[Ga[c.rgb],Ga[c.alpha]];b.commandRaise("invalid blend.equation",m.commandStr)},function(m,d,g){var e=m.constants.blendEquations,f=d.def(),A=d.def(),x=m.cond("typeof ",
g,'==="string"');b.optional(function(){function b(a,d,g){m.assert(a,g+" in "+e,"invalid "+d+", must be one of "+c(Ga))}b(x.then,a,g);m.assert(x["else"],g+"&&typeof "+g+'==="object"',"invalid "+a);b(x["else"],a+".rgb",g+".rgb");b(x["else"],a+".alpha",g+".alpha")});x.then(f,"=",A,"=",e,"[",g,"];");x["else"](f,"=",e,"[",g,".rgb];",A,"=",e,"[",g,".alpha];");d(x);return[f,A]});case "blend.color":return A(function(a){b.command(I(a)&&4===a.length,"blend.color must be a 4d array",m.commandStr);return v(4,
function(b){return+a[b]})},function(a,c,m){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+m+")&&"+m+".length===4","blend.color must be a 4d array")});return v(4,function(a){return c.def("+",m,"[",a,"]")})});case "stencil.mask":return A(function(a){b.commandType(a,"number",z,m.commandStr);return a|0},function(a,c,m){b.optional(function(){a.assert(c,"typeof "+m+'==="number"',"invalid stencil.mask")});return c.def(m,"|0")});case "stencil.func":return A(function(c){b.commandType(c,"object",
z,m.commandStr);var d=c.cmp||"keep",g=c.ref||0;c="mask"in c?c.mask:-1;b.commandParameter(d,f,a+".cmp",m.commandStr);b.commandType(g,"number",a+".ref",m.commandStr);b.commandType(c,"number",a+".mask",m.commandStr);return[f[d],g,c]},function(a,c,m){var d=a.constants.compareFuncs;b.optional(function(){function b(){a.assert(c,Array.prototype.join.call(arguments,""),"invalid stencil.func")}b(m+"&&typeof ",m,'==="object"');b('!("cmp" in ',m,")||(",m,".cmp in ",d,")")});var g=c.def('"cmp" in ',m,"?",d,"[",
m,".cmp]",":",7680),e=c.def(m,".ref|0"),f=c.def('"mask" in ',m,"?",m,".mask|0:-1");return[g,e,f]});case "stencil.opFront":case "stencil.opBack":return A(function(c){b.commandType(c,"object",z,m.commandStr);var d=c.fail||"keep",g=c.zfail||"keep";c=c.zpass||"keep";b.commandParameter(d,w,a+".fail",m.commandStr);b.commandParameter(g,w,a+".zfail",m.commandStr);b.commandParameter(c,w,a+".zpass",m.commandStr);return["stencil.opBack"===a?1029:1028,w[d],w[g],w[c]]},function(m,d,g){function e(x){b.optional(function(){m.assert(d,
'!("'+x+'" in '+g+")||("+g+"."+x+" in "+f+")","invalid "+a+"."+x+", must be one of "+c(w))});return d.def('"',x,'" in ',g,"?",f,"[",g,".",x,"]:",7680)}var f=m.constants.stencilOps;b.optional(function(){m.assert(d,g+"&&typeof "+g+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("zpass")]});case "polygonOffset.offset":return A(function(a){b.commandType(a,"object",z,m.commandStr);var c=a.factor|0;a=a.units|0;b.commandType(c,"number",z+".factor",m.commandStr);
b.commandType(a,"number",z+".units",m.commandStr);return[c,a]},function(c,m,d){b.optional(function(){c.assert(m,d+"&&typeof "+d+'==="object"',"invalid "+a)});var g=m.def(d,".factor|0"),e=m.def(d,".units|0");return[g,e]});case "cull.face":return A(function(a){var c=0;"front"===a?c=1028:"back"===a&&(c=1029);b.command(!!c,z,m.commandStr);return c},function(a,c,m){b.optional(function(){a.assert(c,m+'==="front"||'+m+'==="back"',"invalid cull.face")});return c.def(m,'==="front"?',1028,":",1029)});case "lineWidth":return A(function(a){b.command("number"===
typeof a&&a>=G.lineWidthDims[0]&&a<=G.lineWidthDims[1],"invalid line width, must be a positive number between "+G.lineWidthDims[0]+" and "+G.lineWidthDims[1],m.commandStr);return a},function(a,c,m){b.optional(function(){a.assert(c,"typeof "+m+'==="number"&&'+m+">="+G.lineWidthDims[0]+"&&"+m+"<="+G.lineWidthDims[1],"invalid line width")});return m});case "frontFace":return A(function(a){b.commandParameter(a,E,z,m.commandStr);return E[a]},function(a,c,m){b.optional(function(){a.assert(c,m+'==="cw"||'+
m+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return c.def(m+'==="cw"?2304:2305')});case "colorMask":return A(function(a){b.command(I(a)&&4===a.length,"color.mask must be length 4 array",m.commandStr);return a.map(function(a){return!!a})},function(a,c,m){b.optional(function(){a.assert(c,a.shared.isArrayLike+"("+m+")&&"+m+".length===4","invalid color.mask")});return v(4,function(a){return"!!"+m+"["+a+"]"})});case "sample.coverage":return A(function(a){b.command("object"===typeof a&&a,
z,m.commandStr);var c="value"in a?a.value:1;a=!!a.invert;b.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",m.commandStr);return[c,a]},function(a,c,m){b.optional(function(){a.assert(c,m+"&&typeof "+m+'==="object"',"invalid sample.coverage")});var d=c.def('"value" in ',m,"?+",m,".value:1"),g=c.def("!!",m,".invert");return[d,g]})}});return x}function ma(a,m){var g=a["static"],e=a.dynamic,f={};c(g).forEach(function(a){var c=g[a],d;if("number"===typeof c||
"boolean"===typeof c)d=h(function(){return c});else if("function"===typeof c){var e=c._reglType;"texture2d"===e||"textureCube"===e?d=h(function(a){return a.link(c)}):"framebuffer"===e||"framebufferCube"===e?(b.command(0<c.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',m.commandStr),d=h(function(a){return a.link(c.color[0])})):b.commandRaise('invalid data for uniform "'+a+'"',m.commandStr)}else I(c)?d=h(function(m){return m.global.def("[",v(c.length,function(d){b.command("number"===
typeof c[d]||"boolean"===typeof c[d],"invalid uniform "+a,m.commandStr);return c[d]}),"]")}):b.commandRaise('invalid or missing data for uniform "'+a+'"',m.commandStr);d.value=c;f[a]=d});c(e).forEach(function(a){var c=e[a];f[a]=d(c,function(a,b){return a.invoke(b,c)})});return f}function qa(m,g){var e=m["static"],f=m.dynamic,x={};c(e).forEach(function(m){var d=e[m],f=y.id(m),A=new va;if(a(d))A.state=1,A.buffer=B.getBuffer(B.create(d,34962,!1,!0)),A.type=0;else{var z=B.getBuffer(d);if(z)A.state=1,
A.buffer=z,A.type=0;else if(b.command("object"===typeof d&&d,"invalid data for attribute "+m,g.commandStr),"constant"in d){var u=d.constant;A.buffer="null";A.state=2;"number"===typeof u?A.x=u:(b.command(I(u)&&0<u.length&&4>=u.length,"invalid constant for attribute "+m,g.commandStr),J.forEach(function(a,c){c<u.length&&(A[a]=u[c])}))}else{z=a(d.buffer)?B.getBuffer(B.create(d.buffer,34962,!1,!0)):B.getBuffer(d.buffer);b.command(!!z,'missing buffer for attribute "'+m+'"',g.commandStr);var p=d.offset|
0;b.command(0<=p,'invalid offset for attribute "'+m+'"',g.commandStr);var k=d.stride|0;b.command(0<=k&&256>k,'invalid stride for attribute "'+m+'", must be integer betweeen [0, 255]',g.commandStr);var R=d.size|0;b.command(!("size"in d)||0<R&&4>=R,'invalid size for attribute "'+m+'", must be 1,2,3,4',g.commandStr);var w=!!d.normalized,l=0;"type"in d&&(b.commandParameter(d.type,q,"invalid type for attribute "+m,g.commandStr),l=q[d.type]);var ha=d.divisor|0;b.optional(function(){"divisor"in d&&(b.command(0===
ha||ra,'cannot specify divisor for attribute "'+m+'", instancing not supported',g.commandStr),b.command(0<=ha,'invalid divisor for attribute "'+m+'"',g.commandStr));var a=g.commandStr,e="buffer offset divisor normalized type size stride".split(" ");c(d).forEach(function(c){b.command(0<=e.indexOf(c),'unknown parameter "'+c+'" for attribute pointer "'+m+'" (valid parameters are '+e+")",a)})});A.buffer=z;A.state=1;A.size=R;A.normalized=w;A.type=l||z.dtype;A.offset=p;A.stride=k;A.divisor=ha}}x[m]=h(function(a,
b){var m=a.attribCache;if(f in m)return m[f];var d={isStream:!1};c(A).forEach(function(a){d[a]=A[a]});A.buffer&&(d.buffer=a.link(A.buffer),d.type=d.type||d.buffer+".dtype");return m[f]=d})});c(f).forEach(function(a){var m=f[a];x[a]=d(m,function(d,g){function e(a){g(p[a],"=",A,".",a,"|0;")}var A=d.invoke(g,m),f=d.shared,x=d.constants,z=f.isBufferArgs,u=f.buffer;b.optional(function(){d.assert(g,A+"&&(typeof "+A+'==="object"||typeof '+A+'==="function")&&('+z+"("+A+")||"+u+".getBuffer("+A+")||"+u+".getBuffer("+
A+".buffer)||"+z+"("+A+'.buffer)||("constant" in '+A+"&&(typeof "+A+'.constant==="number"||'+f.isArrayLike+"("+A+".constant))))",'invalid dynamic attribute "'+a+'"')});var p={isStream:g.def(!1)},h=new va;h.state=1;c(h).forEach(function(a){p[a]=g.def(""+h[a])});var k=p.buffer,R=p.type;g("if(",z,"(",A,")){",p.isStream,"=true;",k,"=",u,".createStream(",34962,",",A,");",R,"=",k,".dtype;","}else{",k,"=",u,".getBuffer(",A,");","if(",k,"){",R,"=",k,".dtype;",'}else if("constant" in ',A,"){",p.state,"=",
2,";","if(typeof "+A+'.constant === "number"){',p[J[0]],"=",A,".constant;",J.slice(1).map(function(a){return p[a]}).join("="),"=0;","}else{",J.map(function(a,c){return p[a]+"="+A+".constant.length>"+c+"?"+A+".constant["+c+"]:0;"}).join(""),"}}else{","if(",z,"(",A,".buffer)){",k,"=",u,".createStream(",34962,",",A,".buffer);","}else{",k,"=",u,".getBuffer(",A,".buffer);","}",R,'="type" in ',A,"?",x.glTypes,"[",A,".type]:",k,".dtype;",p.normalized,"=!!",A,".normalized;");e("size");e("offset");e("stride");
e("divisor");g("}}");g.exit("if(",p.isStream,"){",u,".destroyStream(",k,");","}");return p})});return x}function Ba(a){var b=a["static"],m=a.dynamic,g={};c(b).forEach(function(a){var c=b[a];g[a]=h(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});c(m).forEach(function(a){var c=m[a];g[a]=d(c,function(a,b){return a.invoke(b,c)})});return g}function ya(a,m,d,g,e){function A(a){var c=k[a];c&&(R[a]=c)}var f=a["static"],x=a.dynamic;b.optional(function(){function a(d){c(d).forEach(function(a){b.command(0<=
m.indexOf(a),'unknown parameter "'+a+'"',e.commandStr)})}var m="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);a(f);a(x)});var u=z(a,m),p=pa(a,e),k=oa(a,p,e),h=ea(a,e),R=U(a,e),w=K(a,e,u);A("viewport");A(T("scissor.box"));var l=0<c(R).length,p={framebuffer:p,draw:h,shader:w,state:R,dirty:l,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};p.profile=O(a,e);p.uniforms=ma(d,e);p.drawVAO=p.scopeVAO=h.vao;if(!p.drawVAO&&w.program&&!u&&F.angle_instanced_arrays&&
h["static"].elements){var ha=!0;a=w.program.attributes.map(function(a){a=m["static"][a];ha=ha&&!!a;return a});if(ha&&0<a.length){var r=Q.getVAO(Q.createVAO({attributes:a,elements:h["static"].elements}));p.drawVAO=new t(null,null,null,function(a,c){return a.link(r)});p.useVAO=!0}}u?p.useVAO=!0:p.attributes=qa(m,e);p.context=Ba(g,e);return p}function da(a,b,m){var d=a.shared.context,g=a.scope();c(m).forEach(function(c){b.save(d,"."+c);var e=m[c].append(a,b);Array.isArray(e)?g(d,".",c,"=[",e.join(),
"];"):g(d,".",c,"=",e,";")});b(g)}function Ca(a,c,b,m){var d=a.shared,g=d.gl,e=d.framebuffer,A;xa&&(A=c.def(d.extensions,".webgl_draw_buffers"));var f=a.constants,d=f.drawBuffer,f=f.backBuffer;a=b?b.append(a,c):c.def(e,".next");m||c("if(",a,"!==",e,".cur){");c("if(",a,"){",g,".bindFramebuffer(",36160,",",a,".framebuffer);");xa&&c(A,".drawBuffersWEBGL(",d,"[",a,".colorAttachments.length]);");c("}else{",g,".bindFramebuffer(",36160,",null);");xa&&c(A,".drawBuffersWEBGL(",f,");");c("}",e,".cur=",a,";");
m||c("}")}function ja(a,b,m){var d=a.shared,g=d.gl,e=a.current,A=a.next,f=d.current,x=d.next,z=a.cond(f,".dirty");ta.forEach(function(c){c=T(c);if(!(c in m.state)){var b,d;if(c in A){b=A[c];d=e[c];var p=v(ka[c].length,function(a){return z.def(b,"[",a,"]")});z(a.cond(p.map(function(a,c){return a+"!=="+d+"["+c+"]"}).join("||")).then(g,".",Ia[c],"(",p,");",p.map(function(a,c){return d+"["+c+"]="+a}).join(";"),";"))}else b=z.def(x,".",c),p=a.cond(b,"!==",f,".",c),z(p),c in Sa?p(a.cond(b).then(g,".enable(",
Sa[c],");")["else"](g,".disable(",Sa[c],");"),f,".",c,"=",b,";"):p(g,".",Ia[c],"(",b,");",f,".",c,"=",b,";")}});0===c(m.state).length&&z(f,".dirty=false;");b(z)}function na(a,b,m,d){var g=a.shared,A=a.current,f=g.current,x=g.gl;e(c(m)).forEach(function(c){var g=m[c];if(!d||d(g)){var e=g.append(a,b);if(Sa[c]){var z=Sa[c];p(g)?e?b(x,".enable(",z,");"):b(x,".disable(",z,");"):b(a.cond(e).then(x,".enable(",z,");")["else"](x,".disable(",z,");"));b(f,".",c,"=",e,";")}else if(I(e)){var u=A[c];b(x,".",Ia[c],
"(",e,");",e.map(function(a,c){return u+"["+c+"]="+a}).join(";"),";")}else b(x,".",Ia[c],"(",e,");",f,".",c,"=",e,";")}})}function za(a,c){ra&&(a.instancing=c.def(a.shared.extensions,".angle_instanced_arrays"))}function Pa(a,c,b,m,d){function g(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function e(a){k=c.def();a(k,"=",g(),";");"string"===typeof d?a(z,".count+=",d,";"):a(z,".count++;");X&&(m?(R=c.def(),a(R,"=",h,".getNumPendingQueries();")):a(h,".beginQuery(",z,");"))}
function A(a){a(z,".cpuTime+=",g(),"-",k,";");X&&(m?a(h,".pushScopeStats(",R,",",h,".getNumPendingQueries(),",z,");"):a(h,".endQuery();"))}function f(a){var b=c.def(u,".profile");c(u,".profile=",a,";");c.exit(u,".profile=",b,";")}var x=a.shared,z=a.stats,u=x.current,h=x.timer;b=b.profile;var k,R;if(b){if(p(b)){b.enable?(e(c),A(c.exit),f("true")):f("false");return}b=b.append(a,c);f(b)}else b=c.def(u,".profile");x=a.block();e(x);c("if(",b,"){",x,"}");a=a.block();A(a);c.exit("if(",b,"){",a,"}")}function sa(a,
m,d,g,e){function A(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function f(c,b,d){function g(){m("if(!",p,".buffer){",A,".enableVertexAttribArray(",z,");}");var c=d.type,e;e=d.size?m.def(d.size,"||",b):b;m("if(",p,".type!==",c,"||",p,".size!==",e,"||",k.map(function(a){return p+"."+a+"!=="+d[a]}).join("||"),"){",A,".bindBuffer(",34962,",",u,".buffer);",A,".vertexAttribPointer(",[z,e,c,
d.normalized,d.stride,d.offset],");",p,".type=",c,";",p,".size=",e,";",k.map(function(a){return p+"."+a+"="+d[a]+";"}).join(""),"}");ra&&(c=d.divisor,m("if(",p,".divisor!==",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[z,c],");",p,".divisor=",c,";}"))}function e(){m("if(",p,".buffer){",A,".disableVertexAttribArray(",z,");",p,".buffer=null;","}if(",J.map(function(a,c){return p+"."+a+"!=="+h[c]}).join("||"),"){",A,".vertexAttrib4f(",z,",",h,");",J.map(function(a,c){return p+"."+a+"="+h[c]+";"}).join(""),
"}")}var A=x.gl,z=m.def(c,".location"),p=m.def(x.attributes,"[",z,"]");c=d.state;var u=d.buffer,h=[d.x,d.y,d.z,d.w],k=["buffer","normalized","offset","stride"];1===c?g():2===c?e():(m("if(",c,"===",1,"){"),g(),m("}else{"),e(),m("}"))}var x=a.shared;g.forEach(function(g){var x=g.name,z=d.attributes[x],p;if(z){if(!e(z))return;p=z.append(a,m)}else{if(!e(W))return;var u=a.scopeAttrib(x);b.optional(function(){a.assert(m,u+".state","missing attribute "+x)});p={};c(new va).forEach(function(a){p[a]=m.def(u,
".",a)})}f(a.link(g),A(g.info.type),p)})}function zb(a,c,m,d,g,e){for(var A=a.shared,f=A.gl,x,z=0;z<d.length;++z){var u=d[z],h=u.name,k=u.info.type,R=m.uniforms[h],u=a.link(u)+".location",w;if(R){if(!g(R))continue;if(p(R)){var l=R.value;b.command(null!==l&&"undefined"!==typeof l,'missing uniform "'+h+'"',a.commandStr);if(35678===k||35680===k)b.command("function"===typeof l&&(35678===k&&("texture2d"===l._reglType||"framebuffer"===l._reglType)||35680===k&&("textureCube"===l._reglType||"framebufferCube"===
l._reglType)),"invalid texture for uniform "+h,a.commandStr),R=a.link(l._texture||l.color[0]._texture),c(f,".uniform1i(",u,",",R+".bind());"),c.exit(R,".unbind();");else if(35674===k||35675===k||35676===k){b.optional(function(){b.command(I(l),"invalid matrix for uniform "+h,a.commandStr);b.command(35674===k&&4===l.length||35675===k&&9===l.length||35676===k&&16===l.length,"invalid length for matrix uniform "+h,a.commandStr)});var R=a.global.def("new Float32Array(["+Array.prototype.slice.call(l)+"])"),
ha=2;35675===k?ha=3:35676===k&&(ha=4);c(f,".uniformMatrix",ha,"fv(",u,",false,",R,");")}else{switch(k){case 5126:b.commandType(l,"number","uniform "+h,a.commandStr);x="1f";break;case 35664:b.command(I(l)&&2===l.length,"uniform "+h,a.commandStr);x="2f";break;case 35665:b.command(I(l)&&3===l.length,"uniform "+h,a.commandStr);x="3f";break;case 35666:b.command(I(l)&&4===l.length,"uniform "+h,a.commandStr);x="4f";break;case 35670:b.commandType(l,"boolean","uniform "+h,a.commandStr);x="1i";break;case 5124:b.commandType(l,
"number","uniform "+h,a.commandStr);x="1i";break;case 35671:b.command(I(l)&&2===l.length,"uniform "+h,a.commandStr);x="2i";break;case 35667:b.command(I(l)&&2===l.length,"uniform "+h,a.commandStr);x="2i";break;case 35672:b.command(I(l)&&3===l.length,"uniform "+h,a.commandStr);x="3i";break;case 35668:b.command(I(l)&&3===l.length,"uniform "+h,a.commandStr);x="3i";break;case 35673:b.command(I(l)&&4===l.length,"uniform "+h,a.commandStr);x="4i";break;case 35669:b.command(I(l)&&4===l.length,"uniform "+h,
a.commandStr),x="4i"}c(f,".uniform",x,"(",u,",",I(l)?Array.prototype.slice.call(l):l,");")}continue}else w=R.append(a,c)}else{if(!g(W))continue;w=c.def(A.uniforms,"[",y.id(h),"]")}35678===k?(b(!Array.isArray(w),"must specify a scalar prop for textures"),c("if(",w,"&&",w,'._reglType==="framebuffer"){',w,"=",w,".color[0];","}")):35680===k&&(b(!Array.isArray(w),"must specify a scalar prop for cube maps"),c("if(",w,"&&",w,'._reglType==="framebufferCube"){',w,"=",w,".color[0];","}"));b.optional(function(){function m(b,
d){a.assert(c,b,'bad data or missing for uniform "'+h+'".  '+d)}function d(a){b(!Array.isArray(w),"must not specify an array type for uniform");m("typeof "+w+'==="'+a+'"',"invalid type, expected "+a)}function g(c,d){Array.isArray(w)?b(w.length===c,"must have length "+c):m(A.isArrayLike+"("+w+")&&"+w+".length==="+c,"invalid vector, should have length "+c,a.commandStr)}function e(c){b(!Array.isArray(w),"must not specify a value type");m("typeof "+w+'==="function"&&'+w+'._reglType==="texture'+(3553===
c?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(k){case 5124:d("number");break;case 35667:g(2,"number");break;case 35668:g(3,"number");break;case 35669:g(4,"number");break;case 5126:d("number");break;case 35664:g(2,"number");break;case 35665:g(3,"number");break;case 35666:g(4,"number");break;case 35670:d("boolean");break;case 35671:g(2,"boolean");break;case 35672:g(3,"boolean");break;case 35673:g(4,"boolean");break;case 35674:g(4,"number");break;case 35675:g(9,"number");break;case 35676:g(16,
"number");break;case 35678:e(3553);break;case 35680:e(34067)}});R=1;switch(k){case 35678:case 35680:R=c.def(w,"._texture");c(f,".uniform1i(",u,",",R,".bind());");c.exit(R,".unbind();");continue;case 5124:case 35670:x="1i";break;case 35667:case 35671:x="2i";R=2;break;case 35668:case 35672:x="3i";R=3;break;case 35669:case 35673:x="4i";R=4;break;case 5126:x="1f";break;case 35664:x="2f";R=2;break;case 35665:x="3f";R=3;break;case 35666:x="4f";R=4;break;case 35674:x="Matrix2fv";break;case 35675:x="Matrix3fv";
break;case 35676:x="Matrix4fv"}if("M"===x.charAt(0)){c(f,".uniform",x,"(",u,",");var u=Math.pow(k-35674+2,2),r=a.global.def("new Float32Array(",u,")");Array.isArray(w)?c("false,(",v(u,function(a){return r+"["+a+"]="+w[a]}),",",r,")"):c("false,(Array.isArray(",w,")||",w," instanceof Float32Array)?",w,":(",v(u,function(a){return r+"["+a+"]="+w+"["+a+"]"}),",",r,")");c(");")}else{if(1<R){for(var ha=[],sa=[],C=0;C<R;++C)Array.isArray(w)?sa.push(w[C]):sa.push(c.def(w+"["+C+"]")),e&&ha.push(c.def());e&&
c("if(!",a.batchId,"||",ha.map(function(a,c){return a+"!=="+sa[c]}).join("||"),"){",ha.map(function(a,c){return a+"="+sa[c]+";"}).join(""));c(f,".uniform",x,"(",u,",",sa.join(","),");")}else b(!Array.isArray(w),"uniform value must not be an array"),e&&(R=c.def(),c("if(!",a.batchId,"||",R,"!==",w,"){",R,"=",w,";")),c(f,".uniform",x,"(",u,",",w,");");e&&c("}")}}}function Ya(a,c,m,d){function g(b){var e=u[b];return e?e.contextDep&&d.contextDynamic||e.propDep?e.append(a,m):e.append(a,c):c.def(z,".",b)}
function e(){function a(){m(ha,".drawElementsInstancedANGLE(",[k,w,r,R+"<<(("+r+"-5121)>>1)",l],");")}function c(){m(ha,".drawArraysInstancedANGLE(",[k,R,w,l],");")}h&&"null"!==h?sa?a():(m("if(",h,"){"),a(),m("}else{"),c(),m("}")):c()}function A(){function a(){m(f+".drawElements("+[k,w,r,R+"<<(("+r+"-5121)>>1)"]+");")}function c(){m(f+".drawArrays("+[k,R,w]+");")}h&&"null"!==h?sa?a():(m("if(",h,"){"),a(),m("}else{"),c(),m("}")):c()}var x=a.shared,f=x.gl,z=x.draw,u=d.draw,h=function(){var b=u.elements,
g=c;if(b){if(b.contextDep&&d.contextDynamic||b.propDep)g=m;b=b.append(a,g);u.elementsActive&&g("if("+b+")"+f+".bindBuffer(34963,"+b+".buffer.buffer);")}else b=g.def(),g(b,"=",z,".","elements",";","if(",b,"){",f,".bindBuffer(",34963,",",b,".buffer.buffer);}","else if(",x.vao,".currentVAO){",b,"=",a.shared.elements+".getElements("+x.vao,".currentVAO.elements);",wa?"":"if("+b+")"+f+".bindBuffer(34963,"+b+".buffer.buffer);","}");return b}(),k=g("primitive"),R=g("offset"),w=function(){var g=u.count,e,
A=c;if(g){if(g.contextDep&&d.contextDynamic||g.propDep)A=m;e=g.append(a,A);b.optional(function(){g.MISSING&&a.assert(c,"false","missing vertex count");g.DYNAMIC&&a.assert(A,e+">=0","missing vertex count")})}else e=A.def(z,".","count"),b.optional(function(){a.assert(A,e+">=0","missing vertex count")});return e}();if("number"===typeof w){if(0===w)return}else m("if(",w,"){"),m.exit("}");var l,ha;ra&&(l=g("instances"),ha=a.instancing);var r=h+".type",sa=u.elements&&p(u.elements)&&!u.vaoActive;ra&&("number"!==
typeof l||0<=l)?"string"===typeof l?(m("if(",l,">0){"),e(),m("}else if(",l,"<0){"),A(),m("}")):e():A()}function A(a,c,m,d,g){var e=P();g=e.proc("body",g);b.optional(function(){e.commandStr=c.commandStr;e.command=e.link(c.commandStr)});ra&&(e.instancing=g.def(e.shared.extensions,".angle_instanced_arrays"));a(e,g,m,d);return e.compile().body}function u(a,c,b,m){za(a,c);b.useVAO?b.drawVAO?c(a.shared.vao,".setVAO(",b.drawVAO.append(a,c),");"):c(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(c(a.shared.vao,
".setVAO(null);"),sa(a,c,b,m.attributes,function(){return!0}));zb(a,c,b,m.uniforms,function(){return!0},!1);Ya(a,c,c,b)}function ha(a,b){var m=a.proc("draw",1);za(a,m);da(a,m,b.context);Ca(a,m,b.framebuffer);ja(a,m,b);na(a,m,b.state);Pa(a,m,b,!1,!0);var d=b.shader.progVar.append(a,m);m(a.shared.gl,".useProgram(",d,".program);");if(b.shader.program)u(a,m,b,b.shader.program);else{m(a.shared.vao,".setVAO(null);");var g=a.global.def("{}"),e=m.def(d,".id"),x=m.def(g,"[",e,"]");m(a.cond(x).then(x,".call(this,a0);")["else"](x,
"=",g,"[",e,"]=",a.link(function(c){return A(u,a,b,c,1)}),"(",d,");",x,".call(this,a0);"))}0<c(b.state).length&&m(a.shared.current,".dirty=true;");a.shared.vao&&m(a.shared.vao,".setVAO(null);")}function ua(a,c,b,m){function d(){return!0}a.batchId="a1";za(a,c);sa(a,c,b,m.attributes,d);zb(a,c,b,m.uniforms,d,!1);Ya(a,c,c,b)}function Fa(a,c,b,m){function d(a){return a.contextDep&&e||a.propDep}function g(a){return!d(a)}za(a,c);var e=b.contextDep,x=c.def(),f=c.def();a.shared.props=f;a.batchId=x;var z=a.scope(),
u=a.scope();c(z.entry,"for(",x,"=0;",x,"<","a1",";++",x,"){",f,"=","a0","[",x,"];",u,"}",z.exit);b.needsContext&&da(a,u,b.context);b.needsFramebuffer&&Ca(a,u,b.framebuffer);na(a,u,b.state,d);b.profile&&d(b.profile)&&Pa(a,u,b,!1,!0);m?(b.useVAO?b.drawVAO?d(b.drawVAO)?u(a.shared.vao,".setVAO(",b.drawVAO.append(a,u),");"):z(a.shared.vao,".setVAO(",b.drawVAO.append(a,z),");"):z(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(z(a.shared.vao,".setVAO(null);"),sa(a,z,b,m.attributes,g),sa(a,u,b,m.attributes,
d)),zb(a,z,b,m.uniforms,g,!1),zb(a,u,b,m.uniforms,d,!0),Ya(a,z,u,b)):(c=a.global.def("{}"),m=b.shader.progVar.append(a,u),f=u.def(m,".id"),z=u.def(c,"[",f,"]"),u(a.shared.gl,".useProgram(",m,".program);","if(!",z,"){",z,"=",c,"[",f,"]=",a.link(function(c){return A(ua,a,b,c,2)}),"(",m,");}",z,".call(this,a0[",x,"],",x,");"))}function mb(a,b){function m(a){return a.contextDep&&g||a.propDep}var d=a.proc("batch",2);a.batchId="0";za(a,d);var g=!1,e=!0;c(b.context).forEach(function(a){g=g||b.context[a].propDep});
g||(da(a,d,b.context),e=!1);var x=b.framebuffer,f=!1;x?(x.propDep?g=f=!0:x.contextDep&&g&&(f=!0),f||Ca(a,d,x)):Ca(a,d,null);b.state.viewport&&b.state.viewport.propDep&&(g=!0);ja(a,d,b);na(a,d,b.state,function(a){return!m(a)});b.profile&&m(b.profile)||Pa(a,d,b,!1,"a1");b.contextDep=g;b.needsContext=e;b.needsFramebuffer=f;e=b.shader.progVar;if(e.contextDep&&g||e.propDep)Fa(a,d,b,null);else if(e=e.append(a,d),d(a.shared.gl,".useProgram(",e,".program);"),b.shader.program)Fa(a,d,b,b.shader.program);else{d(a.shared.vao,
".setVAO(null);");var x=a.global.def("{}"),f=d.def(e,".id"),z=d.def(x,"[",f,"]");d(a.cond(z).then(z,".call(this,a0,a1);")["else"](z,"=",x,"[",f,"]=",a.link(function(c){return A(Fa,a,b,c,2)}),"(",e,");",z,".call(this,a0,a1);"))}0<c(b.state).length&&d(a.shared.current,".dirty=true;");a.shared.vao&&d(a.shared.vao,".setVAO(null);")}function Ib(a,b){function m(c){var e=b.shader[c];e&&d.set(g.shader,"."+c,e.append(a,d))}var d=a.proc("scope",3);a.batchId="a2";var g=a.shared,x=g.current;da(a,d,b.context);
b.framebuffer&&b.framebuffer.append(a,d);e(c(b.state)).forEach(function(c){var m=b.state[c].append(a,d);I(m)?m.forEach(function(b,m){d.set(a.next[c],"["+m+"]",b)}):d.set(g.next,"."+c,m)});Pa(a,d,b,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var m=b.draw[c];m&&d.set(g.draw,"."+c,""+m.append(a,d))});c(b.uniforms).forEach(function(c){var m=b.uniforms[c].append(a,d);Array.isArray(m)&&(m="["+m.join()+"]");d.set(g.uniforms,"["+y.id(c)+"]",m)});c(b.attributes).forEach(function(m){var g=
b.attributes[m].append(a,d),e=a.scopeAttrib(m);c(new va).forEach(function(a){d.set(e,"."+a,g[a])})});b.scopeVAO&&d.set(g.vao,".targetVAO",b.scopeVAO.append(a,d));m("vert");m("frag");0<c(b.state).length&&(d(x,".dirty=true;"),d.exit(x,".dirty=true;"));d("a1(",a.shared.context,",a0,",a.batchId,");")}function fa(a){if("object"===typeof a&&!I(a)){for(var b=c(a),m=0;m<b.length;++m)if(n.isDynamic(a[b[m]]))return!0;return!1}}function R(a,b,m){function g(a,c){A.forEach(function(b){var m=e[b];n.isDynamic(m)&&
(m=a.invoke(c,m),c(p,".",b,"=",m,";"))})}var e=b["static"][m];if(e&&fa(e)){var x=a.global,A=c(e),f=!1,z=!1,u=!1,p=a.global.def("{}");A.forEach(function(c){var b=e[c];if(n.isDynamic(b))"function"===typeof b&&(b=e[c]=n.unbox(b)),c=d(b,null),f=f||c.thisDep,u=u||c.propDep,z=z||c.contextDep;else{x(p,".",c,"=");switch(typeof b){case "number":x(b);break;case "string":x('"',b,'"');break;case "object":Array.isArray(b)&&x("[",b.join(),"]");break;default:x(a.link(b))}x(";")}});b.dynamic[m]=new n.DynamicVariable(4,
{thisDep:f,contextDep:z,propDep:u,ref:p,append:g});delete b["static"][m]}}var va=Q.Record,Ga={add:32774,subtract:32778,"reverse subtract":32779};F.ext_blend_minmax&&(Ga.min=32775,Ga.max=32776);var ra=F.angle_instanced_arrays,xa=F.webgl_draw_buffers,wa=F.oes_vertex_array_object,ka={dirty:!0,profile:S.profile},Y={},ta=[],Sa={},Ia={};N("dither",3024);N("blend.enable",3042);x("blend.color","blendColor",[0,0,0,0]);x("blend.equation","blendEquationSeparate",[32774,32774]);x("blend.func","blendFuncSeparate",
[1,0,1,0]);N("depth.enable",2929,!0);x("depth.func","depthFunc",513);x("depth.range","depthRange",[0,1]);x("depth.mask","depthMask",!0);x("colorMask","colorMask",[!0,!0,!0,!0]);N("cull.enable",2884);x("cull.face","cullFace",1029);x("frontFace","frontFace",2305);x("lineWidth","lineWidth",1);N("polygonOffset.enable",32823);x("polygonOffset.offset","polygonOffset",[0,0]);N("sample.alpha",32926);N("sample.enable",32928);x("sample.coverage","sampleCoverage",[1,!1]);N("stencil.enable",2960);x("stencil.mask",
"stencilMask",-1);x("stencil.func","stencilFunc",[519,0,-1]);x("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);x("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);N("scissor.enable",3089);x("scissor.box","scissor",[0,0,k.drawingBufferWidth,k.drawingBufferHeight]);x("viewport","viewport",[0,0,k.drawingBufferWidth,k.drawingBufferHeight]);var gb={gl:k,context:V,strings:y,next:Y,current:ka,draw:Ea,elements:m,buffer:B,shader:ga,attributes:Q.state,vao:Q,uniforms:la,framebuffer:g,
extensions:F,timer:X,isBufferArgs:a},ca={primTypes:aa,compareFuncs:f,blendFuncs:M,blendEquations:Ga,stencilOps:w,glTypes:q,orientationType:E};b.optional(function(){gb.isArrayLike=I});xa&&(ca.backBuffer=[1029],ca.drawBuffer=v(G.maxDrawbuffers,function(a){return 0===a?[0]:v(a,function(a){return 36064+a})}));var yd=0;return{next:Y,current:ka,procs:function(){var a=P(),b=a.proc("poll"),m=a.proc("refresh"),d=a.block();b(d);m(d);var g=a.shared,e=g.gl,x=g.next,A=g.current;d(A,".dirty=false;");Ca(a,b);Ca(a,
m,null,!0);var f;ra&&(f=a.link(ra));F.oes_vertex_array_object&&m(a.link(F.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var z=0;z<G.maxAttributes;++z){var u=m.def(g.attributes,"[",z,"]"),p=a.cond(u,".buffer");p.then(e,".enableVertexAttribArray(",z,");",e,".bindBuffer(",34962,",",u,".buffer.buffer);",e,".vertexAttribPointer(",z,",",u,".size,",u,".type,",u,".normalized,",u,".stride,",u,".offset);")["else"](e,".disableVertexAttribArray(",z,");",e,".vertexAttrib4f(",z,",",u,".x,",u,".y,",
u,".z,",u,".w);",u,".buffer=null;");m(p);ra&&m(f,".vertexAttribDivisorANGLE(",z,",",u,".divisor);")}m(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");c(Sa).forEach(function(c){var g=Sa[c],f=d.def(x,".",c),z=a.block();z("if(",f,"){",e,".enable(",g,")}else{",e,".disable(",g,")}",A,".",c,"=",f,";");m(z);b("if(",f,"!==",A,".",c,"){",z,"}")});c(Ia).forEach(function(c){var g=Ia[c],f=ka[c],z,u,p=a.block();p(e,".",g,"(");I(f)?(g=f.length,z=a.global.def(x,".",c),u=a.global.def(A,
".",c),p(v(g,function(a){return z+"["+a+"]"}),");",v(g,function(a){return u+"["+a+"]="+z+"["+a+"];"}).join("")),b("if(",v(g,function(a){return z+"["+a+"]!=="+u+"["+a+"]"}).join("||"),"){",p,"}")):(z=d.def(x,".",c),u=d.def(A,".",c),p(z,");",A,".",c,"=",z,";"),b("if(",z,"!==",u,"){",p,"}"));m(p)});return a.compile()}(),compile:function(a,b,m,d,g){var e=P();e.stats=e.link(g);c(b["static"]).forEach(function(a){R(e,b,a)});C.forEach(function(c){R(e,a,c)});var x=ya(a,b,m,d,e);ha(e,x);Ib(e,x);mb(e,x);return l(e.compile(),
{destroy:function(){x.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(L,H,ia){function a(a,b){this.id=d++;this.type=a;this.data=b}function e(a){if(0===a.length)return[];var b=a.charAt(0),d=a.charAt(a.length-1);if(1<a.length&&b===d&&('"'===b||"'"===
b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return e(a.substr(0,b.index)).concat(e(b[1])).concat(e(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];a=[];for(d=0;d<b.length;++d)a=a.concat(e(b[d]));return a}function t(a){return"["+e(a).join("][")+"]"}function p(c,b){if("function"===typeof c)return new a(0,c);if("number"===typeof c||
"boolean"===typeof c)return new a(5,c);if(Array.isArray(c))return new a(6,c.map(function(a,c){return p(a,b+"["+c+"]")}));if(c instanceof a)return c;h(!1,"invalid option type in uniform "+b)}var h=L("./util/check"),d=0;H.exports={DynamicVariable:a,define:function(c,b){return new a(c,t(b+""))},isDynamic:function(c){return"function"===typeof c&&!c._reglType||c instanceof a},unbox:p,accessor:t}},{"./util/check":21}],10:[function(L,H,ia){var a=L("./util/check"),e=L("./util/is-typed-array"),t=L("./util/is-ndarray"),
p=L("./util/values"),h=L("./constants/primitives.json"),d=L("./constants/usage.json");H.exports=function(c,b,l,r){function v(a){this.id=n++;I[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function k(d,p,h,k,f,w,r){d.buffer.bind();var E;p?((E=r)||e(p)&&(!t(p)||e(p.data))||(E=b.oes_element_index_uint?5125:5123),l._initBuffer(d.buffer,p,h,E,3)):(c.bufferData(34963,w,h),d.buffer.dtype=E||5121,d.buffer.usage=h,d.buffer.dimension=3,d.buffer.byteLength=w);E=r;if(!r){switch(d.buffer.dtype){case 5121:case 5120:E=
5121;break;case 5123:case 5122:E=5123;break;case 5125:case 5124:E=5125;break;default:a.raise("unsupported type for element array")}d.buffer.dtype=E}d.type=E;a(5125!==E||!!b.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");p=f;0>p&&(p=d.buffer.byteLength,5123===E?p>>=1:5125===E&&(p>>=2));d.vertCount=p;p=k;0>k&&(p=4,k=d.buffer.dimension,1===k&&(p=0),2===k&&(p=1),3===k&&(p=4));d.primType=p}function F(c){r.elementsCount--;a(null!==c.buffer,"must not double destroy elements");
delete I[c.id];c.buffer.destroy();c.buffer=null}var I={},n=0,aa={uint8:5121,uint16:5123};b.oes_element_index_uint&&(aa.uint32=5125);v.prototype.bind=function(){this.buffer.bind()};var q=[];return{create:function(c,b){function p(c){if(c)if("number"===typeof c)q(c),f.primType=4,f.vertCount=c|0,f.type=5121;else{var b=null,l=35044,r=-1,v=-1,y=0,C=0;if(Array.isArray(c)||e(c)||t(c))b=c;else if(a.type(c,"object","invalid arguments for elements"),"data"in c&&(b=c.data,a(Array.isArray(b)||e(b)||t(b),"invalid data for element buffer")),
"usage"in c&&(a.parameter(c.usage,d,"invalid element buffer usage"),l=d[c.usage]),"primitive"in c&&(a.parameter(c.primitive,h,"invalid element buffer primitive"),r=h[c.primitive]),"count"in c&&(a("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),v=c.count|0),"type"in c&&(a.parameter(c.type,aa,"invalid buffer type"),C=aa[c.type]),"length"in c)y=c.length|0;else if(y=v,5123===C||5122===C)y*=2;else if(5125===C||5124===C)y*=4;k(f,b,l,r,v,y,C)}else q(),f.primType=4,f.vertCount=
0,f.type=5121;return p}var q=l.create(null,34963,!0),f=new v(q._buffer);r.elementsCount++;p(c);p._reglType="elements";p._elements=f;p.subdata=function(a,c){q.subdata(a,c);return p};p.destroy=function(){F(f)};return p},createStream:function(a){var c=q.pop();c||(c=new v(l.create(null,34963,!0,!1)._buffer));k(c,a,35040,-1,-1,0,0);return c},destroyStream:function(a){q.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof v?a._elements:null},clear:function(){p(I).forEach(F)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(L,H,ia){var a=L("./util/sorted-object-keys"),e=L("./util/check");H.exports=function(t,p){function h(a){e.type(a,"string","extension name must be string");a=a.toLowerCase();var c;try{c=d[a]=t.getExtension(a)}catch(b){}return!!c}for(var d={},c=0;c<p.extensions.length;++c){var b=p.extensions[c];if(!h(b))return p.onDestroy(),p.onDone('"'+b+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}p.optionalExtensions.forEach(h);return{extensions:d,restore:function(){a(d).forEach(function(a){if(d[a]&&!h(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(L,H,ia){var a=L("./util/check"),e=L("./util/values"),t=L("./util/extend"),p=[6407,6408],h=[];h[6408]=4;h[6407]=3;var d=[];d[5121]=1;d[5126]=4;d[36193]=2;var c=[32854,32855,36194,35907,34842,34843,34836],b={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};H.exports=function(l,r,v,k,F,I){function n(a,c,b){this.target=a;this.texture=c;this.renderbuffer=b;var m=a=0;c?(a=c.width,m=c.height):b&&(a=b.width,m=b.height);this.width=a;this.height=m}function aa(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function q(c,b,m){if(c){if(c.texture){c=c.texture._texture;var d=Math.max(1,c.height);a(Math.max(1,c.width)===b&&d===m,"inconsistent width/height for supplied texture")}else c=
c.renderbuffer._renderbuffer,a(c.width===b&&c.height===m,"inconsistent width/height for renderbuffer");c.refCount+=1}}function J(a,c){c&&(c.texture?l.framebufferTexture2D(36160,a,c.target,c.texture._texture.texture,0):l.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function C(c){var b=3553,m=null,d=null,e=c;"object"===typeof c&&(e=c.data,"target"in c&&(b=c.target|0));a.type(e,"function","invalid attachment data");c=e._reglType;"texture2d"===c?(m=e,a(3553===b)):
"textureCube"===c?(m=e,a(34069<=b&&34075>b,"invalid cube map target")):"renderbuffer"===c?(d=e,b=36161):a.raise("invalid regl object for attachment");return new n(b,m,d)}function M(a,c,b,m,d){if(b)return a=k.create2D({width:a,height:c,format:m,type:d}),a._texture.refCount=0,new n(3553,a,null);a=F.create({width:a,height:c,format:m});a._renderbuffer.refCount=0;return new n(36161,null,a)}function Aa(a){return a&&(a.texture||a.renderbuffer)}function f(a,c,b){a&&(a.texture?a.texture.resize(c,b):a.renderbuffer&&
a.renderbuffer.resize(c,b),a.width=c,a.height=b)}function w(){this.id=m++;Z[this.id]=this;this.framebuffer=l.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function ba(a){a.colorAttachments.forEach(aa);aa(a.depthAttachment);aa(a.stencilAttachment);aa(a.depthStencilAttachment)}function E(c){var b=c.framebuffer;a(b,"must not double destroy framebuffer");l.deleteFramebuffer(b);c.framebuffer=null;I.framebufferCount--;
delete Z[c.id]}function W(c){var m;l.bindFramebuffer(36160,c.framebuffer);var d=c.colorAttachments;for(m=0;m<d.length;++m)J(36064+m,d[m]);for(m=d.length;m<v.maxColorAttachments;++m)l.framebufferTexture2D(36160,36064+m,3553,null,0);l.framebufferTexture2D(36160,33306,3553,null,0);l.framebufferTexture2D(36160,36096,3553,null,0);l.framebufferTexture2D(36160,36128,3553,null,0);J(36096,c.depthAttachment);J(36128,c.stencilAttachment);J(33306,c.depthStencilAttachment);c=l.checkFramebufferStatus(36160);l.isContextLost()||
36053===c||a.raise("framebuffer configuration not supported, status = "+b[c]);l.bindFramebuffer(36160,y.next?y.next.framebuffer:null);y.cur=y.next;l.getError()}function D(b,m){function e(b,m){var g;a(y.next!==k,"can not update framebuffer which is currently in use");var f=0,l=0,w=!0,x=!0;g=null;var t=!0,E="rgba",Z="uint8",D=1,z=null,F=null,I=null,U=!1;if("number"===typeof b)f=b|0,l=m|0||f;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(l=b.shape,a(Array.isArray(l)&&
2<=l.length,"invalid shape for framebuffer"),f=l[0],l=l[1]):("radius"in b&&(f=l=b.radius),"width"in b&&(f=b.width),"height"in b&&(l=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&a(1===g.length||r.webgl_draw_buffers,"multiple render targets not supported");if(!g){"colorCount"in b&&(D=b.colorCount|0,a(0<D,"invalid color buffer count"));"colorTexture"in b&&(t=!!b.colorTexture,E="rgba4");if("colorType"in b){Z=b.colorType;if(t)a(r.oes_texture_float||!("float"===Z||"float32"===
Z),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(r.oes_texture_half_float||!("half float"===Z||"float16"===Z),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===Z||"float16"===Z)a(r.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),E="rgba16f";else if("float"===Z||"float32"===Z)a(r.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
E="rgba32f";a.oneOf(Z,B,"invalid color type")}"colorFormat"in b&&(E=b.colorFormat,0<=Da.indexOf(E)?t=!0:0<=G.indexOf(E)?t=!1:a.optional(function(){if(t)a.oneOf(b.colorFormat,Da,"invalid color format for texture");else a.oneOf(b.colorFormat,G,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)U=!(!b.depthTexture&&!b.depthStencilTexture),a(!U||r.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?w=b.depth:
(z=b.depth,x=!1));"stencil"in b&&("boolean"===typeof b.stencil?x=b.stencil:(F=b.stencil,w=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?w=x=b.depthStencil:(I=b.depthStencil,x=w=!1))}else f=l=1;var n=null,J=null,aa=null,ya=null;if(Array.isArray(g))n=g.map(C);else if(g)n=[C(g)];else for(n=Array(D),g=0;g<D;++g)n[g]=M(f,l,t,E,Z);a(r.webgl_draw_buffers||1>=n.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(n.length<=v.maxColorAttachments,
"too many color attachments, not supported");f=f||n[0].width;l=l||n[0].height;z?J=C(z):w&&!x&&(J=M(f,l,U,"depth","uint32"));F?aa=C(F):x&&!w&&(aa=M(f,l,!1,"stencil","uint8"));I?ya=C(I):!z&&!F&&x&&w&&(ya=M(f,l,U,"depth stencil","depth stencil"));a(1>=!!z+!!F+!!I,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");w=null;for(g=0;g<n.length;++g)q(n[g],f,l),a(!n[g]||n[g].texture&&0<=p.indexOf(n[g].texture._texture.format)||n[g].renderbuffer&&0<=c.indexOf(n[g].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+g+" is invalid"),n[g]&&n[g].texture&&(x=h[n[g].texture._texture.format]*d[n[g].texture._texture.type],null===w?w=x:a(w===x,"all color attachments much have the same number of bits per pixel."));q(J,f,l);a(!J||J.texture&&6402===J.texture._texture.format||J.renderbuffer&&33189===J.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");q(aa,f,l);a(!aa||aa.renderbuffer&&36168===aa.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
q(ya,f,l);a(!ya||ya.texture&&34041===ya.texture._texture.format||ya.renderbuffer&&34041===ya.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");ba(k);k.width=f;k.height=l;k.colorAttachments=n;k.depthAttachment=J;k.stencilAttachment=aa;k.depthStencilAttachment=ya;e.color=n.map(Aa);e.depth=Aa(J);e.stencil=Aa(aa);e.depthStencil=Aa(ya);e.width=k.width;e.height=k.height;W(k);return e}var k=new w;I.framebufferCount++;e(b,m);return t(e,{resize:function(c,b){a(y.next!==
k,"can not resize a framebuffer which is currently in use");var m=Math.max(c|0,1),d=Math.max(b|0||m,1);if(m===k.width&&d===k.height)return e;for(var g=k.colorAttachments,p=0;p<g.length;++p)f(g[p],m,d);f(k.depthAttachment,m,d);f(k.stencilAttachment,m,d);f(k.depthStencilAttachment,m,d);k.width=e.width=m;k.height=e.height=d;W(k);return e},_reglType:"framebuffer",_framebuffer:k,destroy:function(){E(k);ba(k)},use:function(a){y.setFBO({framebuffer:e},a)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},
Da=["rgba"],G=["rgba4","rgb565","rgb5 a1"];r.ext_srgb&&G.push("srgba");r.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f");r.webgl_color_buffer_float&&G.push("rgba32f");var B=["uint8"];r.oes_texture_half_float&&B.push("half float","float16");r.oes_texture_float&&B.push("float","float32");var m=0,Z={};return t(y,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof w)?a:null},create:D,createCube:function(c){function b(c){var d;a(0>
m.indexOf(y.next),"can not update framebuffer which is currently in use");var g={color:null},e=0,f=null;d="rgba";var p="uint8",h=1;if("number"===typeof c)e=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(e=c.shape,a(Array.isArray(e)&&2<=e.length,"invalid shape for framebuffer"),a(e[0]===e[1],"cube framebuffer must be square"),e=e[0]):("radius"in c&&(e=c.radius|0),"width"in c?(e=c.width|0,"height"in c&&a(c.height===e,"must be square")):"height"in c&&(e=c.height|0));
if("color"in c||"colors"in c)f=c.color||c.colors,Array.isArray(f)&&a(1===f.length||r.webgl_draw_buffers,"multiple render targets not supported");f||("colorCount"in c&&(h=c.colorCount|0,a(0<h,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,B,"invalid color type"),p=c.colorType),"colorFormat"in c&&(d=c.colorFormat,a.oneOf(c.colorFormat,Da,"invalid color format for texture")));"depth"in c&&(g.depth=c.depth);"stencil"in c&&(g.stencil=c.stencil);"depthStencil"in c&&(g.depthStencil=
c.depthStencil)}else e=1;if(f)if(Array.isArray(f))for(c=[],d=0;d<f.length;++d)c[d]=f[d];else c=[f];else for(c=Array(h),f={radius:e,format:d,type:p},d=0;d<h;++d)c[d]=k.createCube(f);g.color=Array(c.length);for(d=0;d<c.length;++d)h=c[d],a("function"===typeof h&&"textureCube"===h._reglType,"invalid cube map"),e=e||h.width,a(h.width===e&&h.height===e,"invalid cube map shape"),g.color[d]={target:34069,data:c[d]};for(d=0;6>d;++d){for(h=0;h<c.length;++h)g.color[h].target=34069+d;0<d&&(g.depth=m[0].depth,
g.stencil=m[0].stencil,g.depthStencil=m[0].depthStencil);if(m[d])m[d](g);else m[d]=D(g)}return t(b,{width:e,height:e,color:c})}var m=Array(6);b(c);return t(b,{faces:m,resize:function(c){var d=c|0;a(0<d&&d<=v.maxCubeMapSize,"invalid radius for cube fbo");if(d===b.width)return b;var e=b.color;for(c=0;c<e.length;++c)e[c].resize(d);for(c=0;6>c;++c)m[c].resize(d);b.width=b.height=d;return b},_reglType:"framebufferCube",destroy:function(){m.forEach(function(a){a.destroy()})}})},clear:function(){e(Z).forEach(E)},
restore:function(){y.cur=null;y.next=null;y.dirty=!0;e(Z).forEach(function(a){a.framebuffer=l.createFramebuffer();W(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(L,H,ia){var a=L("./util/sorted-object-keys"),e=L("./util/pool");H.exports=function(t,p){var h=1;p.ext_texture_filter_anisotropic&&(h=t.getParameter(34047));var d=1,c=1;p.webgl_draw_buffers&&(d=t.getParameter(34852),c=t.getParameter(36063));var b=!!p.oes_texture_float;if(b){b=t.createTexture();t.bindTexture(3553,
b);t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var l=t.createFramebuffer();t.bindFramebuffer(36160,l);t.framebufferTexture2D(36160,36064,3553,b,0);t.bindTexture(3553,null);if(36053!==t.checkFramebufferStatus(36160))b=!1;else{t.viewport(0,0,1,1);t.clearColor(1,0,0,1);t.clear(16384);var r=e.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,r);t.getError()?b=!1:(t.deleteFramebuffer(l),t.deleteTexture(b),b=1===r[0]);e.freeType(r)}}r=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(r=t.createTexture(),l=e.allocType(5121,36),t.activeTexture(33984),t.bindTexture(34067,r),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),e.freeType(l),t.bindTexture(34067,null),t.deleteTexture(r),r=!t.getError());return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:a(p).filter(function(a){return!!p[a]}),
maxAnisotropic:h,maxDrawbuffers:d,maxColorAttachments:c,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),
maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:b,npotTextureCube:r}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(L,H,ia){var a=L("./util/check"),e=L("./util/is-typed-array");H.exports=function(t,p,h,d,c,b,l){function r(k){var r;null===p.next?(a(c.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
r=5121):(a(null!==p.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),r=p.next.colorAttachments[0].texture._texture.type,a.optional(function(){b.oes_texture_float?(a(5121===r||5126===r,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===r&&a(l.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===r,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var v=0,n=0,aa=d.framebufferWidth,q=d.framebufferHeight,J=null;e(k)?J=k:k&&(a.type(k,"object","invalid arguments to regl.read()"),v=k.x|0,n=k.y|0,a(0<=v&&v<d.framebufferWidth,"invalid x offset for regl.read"),a(0<=n&&n<d.framebufferHeight,"invalid y offset for regl.read"),aa=(k.width||d.framebufferWidth-v)|0,q=(k.height||d.framebufferHeight-n)|0,J=k.data||null);J&&(5121===r?a(J instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===r&&a(J instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<aa&&aa+v<=d.framebufferWidth,"invalid width for read pixels");a(0<q&&q+n<=d.framebufferHeight,"invalid height for read pixels");h();k=aa*q*4;J||(5121===r?J=new Uint8Array(k):5126===r&&(J=J||new Float32Array(k)));a.isTypedArray(J,"data buffer for regl.read() must be a typedarray");a(J.byteLength>=k,"data buffer for regl.read() too small");t.pixelStorei(3333,4);t.readPixels(v,n,aa,q,6408,r,J);return J}
function v(a){var c;p.setFBO({framebuffer:a.framebuffer},function(){c=r(a)});return c}return function(a){return a&&"framebuffer"in a?v(a):r(a)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(L,H,ia){var a=L("./util/sorted-object-keys"),e=L("./util/check"),t=L("./util/values"),p=[];p[32854]=2;p[32855]=2;p[36194]=2;p[33189]=2;p[36168]=1;p[34041]=4;p[35907]=4;p[34836]=16;p[34842]=8;p[34843]=6;H.exports=function(h,d,c,b,l){function r(a){this.id=I++;this.refCount=1;this.renderbuffer=a;
this.format=32854;this.height=this.width=0;l.profile&&(this.stats={size:0})}function v(a){var c=a.renderbuffer;e(c,"must not double destroy renderbuffer");h.bindRenderbuffer(36161,null);h.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=0;delete n[a.id];b.renderbufferCount--}var k={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(k.srgba=35907);d.ext_color_buffer_half_float&&(k.rgba16f=34842,k.rgb16f=34843);d.webgl_color_buffer_float&&(k.rgba32f=
34836);var F=[];a(k).forEach(function(a){F[k[a]]=a});var I=0,n={};r.prototype.decRef=function(){0>=--this.refCount&&v(this)};l.profile&&(b.getTotalRenderbufferSize=function(){var c=0;a(n).forEach(function(a){c+=n[a].stats.size});return c});return{create:function(a,d){function t(a,b){var d=0,w=0,r=32854;"object"===typeof a&&a?("shape"in a?(w=a.shape,e(Array.isArray(w)&&2<=w.length,"invalid renderbuffer shape"),d=w[0]|0,w=w[1]|0):("radius"in a&&(d=w=a.radius|0),"width"in a&&(d=a.width|0),"height"in
a&&(w=a.height|0)),"format"in a&&(e.parameter(a.format,k,"invalid renderbuffer format"),r=k[a.format])):"number"===typeof a?(d=a|0,w="number"===typeof b?b|0:d):a?e.raise("invalid arguments to renderbuffer constructor"):d=w=1;e(0<d&&0<w&&d<=c.maxRenderbufferSize&&w<=c.maxRenderbufferSize,"invalid renderbuffer size");if(d!==v.width||w!==v.height||r!==v.format)return t.width=v.width=d,t.height=v.height=w,v.format=r,h.bindRenderbuffer(36161,v.renderbuffer),h.renderbufferStorage(36161,r,d,w),e(0===h.getError(),
"invalid render buffer format"),l.profile&&(v.stats.size=p[v.format]*v.width*v.height),t.format=F[v.format],t}var v=new r(h.createRenderbuffer());n[v.id]=v;b.renderbufferCount++;t(a,d);t.resize=function(a,b){var d=a|0,k=b|0||d;if(d===v.width&&k===v.height)return t;e(0<d&&0<k&&d<=c.maxRenderbufferSize&&k<=c.maxRenderbufferSize,"invalid renderbuffer size");t.width=v.width=d;t.height=v.height=k;h.bindRenderbuffer(36161,v.renderbuffer);h.renderbufferStorage(36161,v.format,d,k);e(0===h.getError(),"invalid render buffer format");
l.profile&&(v.stats.size=p[v.format]*v.width*v.height);return t};t._reglType="renderbuffer";t._renderbuffer=v;l.profile&&(t.stats=v.stats);t.destroy=function(){v.decRef()};return t},clear:function(){t(n).forEach(v)},restore:function(){t(n).forEach(function(a){a.renderbuffer=h.createRenderbuffer();h.bindRenderbuffer(36161,a.renderbuffer);h.renderbufferStorage(36161,a.format,a.width,a.height)});h.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],
16:[function(L,H,ia){var a=L("./util/sorted-object-keys"),e=L("./util/check"),t=L("./util/extend"),p=L("./util/values");H.exports=function(h,d,c,b){function l(a,c,b,d){this.name=a;this.id=c;this.location=b;this.info=d}function r(a,c){for(var b=0;b<a.length;++b)if(a[b].id===c.id){a[b].location=c.location;return}a.push(c)}function v(a,c,b){var f=35632===a?I:n,p=f[c];if(!p){var k=d.str(c),p=h.createShader(a);h.shaderSource(p,k);h.compileShader(p);e.shaderError(h,p,k,a,b);f[c]=p}return p}function k(a,
c){this.id=J++;this.fragId=a;this.vertId=c;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;b.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function F(a,c,p){var f;f=v(35632,a.fragId);var k=v(35633,a.vertId),t=a.program=h.createProgram();h.attachShader(t,f);h.attachShader(t,k);if(p)for(f=0;f<p.length;++f)k=p[f],h.bindAttribLocation(t,k[0],k[1]);h.linkProgram(t);e.linkError(h,t,d.str(a.fragId),d.str(a.vertId),c);p=h.getProgramParameter(t,35718);b.profile&&(a.stats.uniformsCount=
p);k=a.uniforms;for(f=0;f<p;++f)if(c=h.getActiveUniform(t,f))if(1<c.size)for(var E=0;E<c.size;++E){var F=c.name.replace("[0]","["+E+"]");r(k,new l(F,d.id(F),h.getUniformLocation(t,F),c))}else r(k,new l(c.name,d.id(c.name),h.getUniformLocation(t,c.name),c));p=h.getProgramParameter(t,35721);b.profile&&(a.stats.attributesCount=p);a=a.attributes;for(f=0;f<p;++f)(c=h.getActiveAttrib(t,f))&&r(a,new l(c.name,d.id(c.name),h.getAttribLocation(t,c.name),c))}var I={},n={},aa={},q=[],J=0;b.profile&&(c.getMaxUniformsCount=
function(){var a=0;q.forEach(function(c){c.stats.uniformsCount>a&&(a=c.stats.uniformsCount)});return a},c.getMaxAttributesCount=function(){var a=0;q.forEach(function(c){c.stats.attributesCount>a&&(a=c.stats.attributesCount)});return a});return{clear:function(){var a=h.deleteShader.bind(h);p(I).forEach(a);I={};p(n).forEach(a);n={};q.forEach(function(a){h.deleteProgram(a.program)});q.length=0;aa={};c.shaderCount=0},program:function(b,d,p,f){e.command(0<=b,"missing vertex shader",p);e.command(0<=d,"missing fragment shader",
p);var l=aa[d];l||(l=aa[d]={});var r=l[b];if(r&&(r.refCount++,!f))return r;var v=new k(d,b);c.shaderCount++;F(v,p,f);r||(l[b]=v);q.push(v);return t(v,{destroy:function(){v.refCount--;if(0>=v.refCount){h.deleteProgram(v.program);var b=q.indexOf(v);q.splice(b,1);c.shaderCount--}0>=l[v.vertId].refCount&&(h.deleteShader(n[v.vertId]),delete n[v.vertId],delete aa[v.fragId][v.vertId]);a(aa[v.fragId]).length||(h.deleteShader(I[v.fragId]),delete I[v.fragId],delete aa[v.fragId])}})},restore:function(){I={};
n={};for(var a=0;a<q.length;++a)F(q[a],null,q[a].attributes.map(function(a){return[a.location,a.name]}))},shader:v,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(L,H,ia){H.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(L,H,ia){H.exports=function(){var a={"":0},e=[""];return{id:function(t){var p=
a[t];if(p)return p;p=a[t]=e.length;e.push(t);return p},str:function(a){return e[a]}}}},{}],19:[function(L,H,ia){function a(a){return"[object "+a+"]"}function e(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function t(a){return Array.isArray(a)&&0!==a.length&&aa(a[0])?!0:!1}function p(a){return Object.prototype.toString.call(a)}function h(a){if(!a)return!1;var c=p(a);return 0<=Da.indexOf(c)?!0:e(a)||t(a)||F(a)}function d(a,c){36193===a.type?(a.data=n(c),I.freeType(c)):a.data=c}
function c(a,c,b,d,e,p){a="undefined"!==typeof B[a]?B[a]:f[a]*G[c];p&&(a*=6);if(e){for(d=0;1<=b;)d+=a*b*b,b/=2;return d}return a*b*d}var b=L("./util/sorted-object-keys"),l=L("./util/check"),r=L("./util/extend"),v=L("./util/values"),k=L("./util/is-typed-array"),F=L("./util/is-ndarray"),I=L("./util/pool"),n=L("./util/to-half-float"),aa=L("./util/is-array-like"),q=L("./util/flatten"),J=L("./util/is-pow2");ia=L("./constants/arraytypes.json");var C=L("./constants/arraytypes.json"),M=[9984,9986,9985,9987],
Aa=[0,6409,6410,6407,6408],f={};f[6409]=f[6406]=f[6402]=1;f[34041]=f[6410]=2;f[6407]=f[35904]=3;f[6408]=f[35906]=4;var w=a("HTMLCanvasElement"),ba=a("OffscreenCanvas"),E=a("CanvasRenderingContext2D"),W=a("ImageBitmap"),D=a("HTMLImageElement"),y=a("HTMLVideoElement"),Da=b(ia).concat([w,ba,E,W,D,y]),G=[];G[5121]=1;G[5126]=4;G[36193]=2;G[5123]=2;G[5125]=4;var B=[];B[32854]=2;B[32855]=2;B[36194]=2;B[34041]=4;B[33776]=.5;B[33777]=.5;B[33778]=1;B[33779]=1;B[35986]=.5;B[35987]=1;B[34798]=1;B[35840]=.5;B[35841]=
.25;B[35842]=.5;B[35843]=.25;B[36196]=.5;H.exports=function(a,Z,g,B,G,Da,L){function V(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function X(a,c){a.internalformat=c.internalformat;a.format=c.format;a.type=c.type;a.compressed=c.compressed;a.premultiplyAlpha=c.premultiplyAlpha;a.flipY=c.flipY;a.unpackAlignment=c.unpackAlignment;a.colorSpace=c.colorSpace;
a.width=c.width;a.height=c.height;a.channels=c.channels}function S(a,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(l.type(c.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),a.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(l.type(c.flipY,"boolean","invalid texture flip"),a.flipY=c.flipY);"alignment"in c&&(l.oneOf(c.alignment,[1,2,4,8],"invalid texture unpack alignment"),a.unpackAlignment=c.alignment);"colorSpace"in c&&(l.parameter(c.colorSpace,Ya,"invalid colorSpace"),a.colorSpace=
Ya[c.colorSpace]);if("type"in c){var b=c.type;l(Z.oes_texture_float||!("float"===b||"float32"===b),"you must enable the OES_texture_float extension in order to use floating point textures.");l(Z.oes_texture_half_float||!("half float"===b||"float16"===b),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");l(Z.webgl_depth_texture||!("uint16"===b||"uint32"===b||"depth stencil"===b),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
l.parameter(b,A,"invalid texture type");a.type=A[b]}var d=a.width,m=a.height,e=a.channels,b=!1;"shape"in c?(l(Array.isArray(c.shape)&&2<=c.shape.length,"shape must be an array"),d=c.shape[0],m=c.shape[1],3===c.shape.length&&(e=c.shape[2],l(0<e&&4>=e,"invalid number of channels"),b=!0),l(0<=d&&d<=g.maxTextureSize,"invalid width"),l(0<=m&&m<=g.maxTextureSize,"invalid height")):("radius"in c&&(d=m=c.radius,l(0<=d&&d<=g.maxTextureSize,"invalid radius")),"width"in c&&(d=c.width,l(0<=d&&d<=g.maxTextureSize,
"invalid width")),"height"in c&&(m=c.height,l(0<=m&&m<=g.maxTextureSize,"invalid height")),"channels"in c&&(e=c.channels,l(0<e&&4>=e,"invalid number of channels"),b=!0));a.width=d|0;a.height=m|0;a.channels=e|0;d=!1;"format"in c&&(d=c.format,l(Z.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),l.parameter(d,u,"invalid texture format"),m=a.internalformat=u[d],a.format=Ga[m],d in A&&!("type"in c)&&(a.type=
A[d]),d in ha&&(a.compressed=!0),d=!0);!b&&d?a.channels=f[a.format]:b&&!d?a.channels!==Aa[a.format]&&(a.format=a.internalformat=Aa[a.channels]):d&&b&&l(a.channels===f[a.format],"number of channels inconsistent with specified format")}}function T(c){a.pixelStorei(37440,c.flipY);a.pixelStorei(37441,c.premultiplyAlpha);a.pixelStorei(37443,c.colorSpace);a.pixelStorei(3317,c.unpackAlignment)}function N(){V.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function x(a,c){var b=null;h(c)?b=c:c&&(l.type(c,"object","invalid pixel data type"),S(a,c),"x"in c&&(a.xOffset=c.x|0),"y"in c&&(a.yOffset=c.y|0),h(c.data)&&(b=c.data));l(!a.compressed||b instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){l(!b,"can not specify copy and data field for the same texture");var m=G.viewportWidth,x=G.viewportHeight;a.width=a.width||m-a.xOffset;a.height=a.height||x-a.yOffset;a.needsCopy=!0;l(0<=a.xOffset&&a.xOffset<m&&0<=a.yOffset&&
a.yOffset<x&&0<a.width&&a.width<=m&&0<a.height&&a.height<=x,"copy texture read out of bounds")}else if(!b)a.width=a.width||1,a.height=a.height||1,a.channels=a.channels||4;else if(k(b))a.channels=a.channels||4,a.data=b,"type"in c||5121!==a.type||(a.type=C[Object.prototype.toString.call(b)]|0);else if(e(b)){a.channels=a.channels||4;m=b;x=m.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:x=I.allocType(a.type,x);x.set(m);a.data=x;break;case 36193:a.data=n(m);break;default:l.raise("unsupported texture type, must specify a typed array")}a.alignment=
1;a.needsFree=!0}else if(F(b)){m=b.data;Array.isArray(m)||5121!==a.type||(a.type=C[Object.prototype.toString.call(m)]|0);var x=b.shape,f=b.stride,A,z,u,R;3===x.length?(u=x[2],R=f[2]):(l(2===x.length,"invalid ndarray pixel data, must be 2 or 3D"),R=u=1);A=x[0];z=x[1];x=f[0];f=f[1];a.alignment=1;a.width=A;a.height=z;a.channels=u;a.format=a.internalformat=Aa[u];a.needsFree=!0;A=R;b=b.offset;u=a.width;R=a.height;z=a.channels;for(var r=I.allocType(36193===a.type?5126:a.type,u*R*z),ha=0,v=0;v<R;++v)for(var sa=
0;sa<u;++sa)for(var Z=0;Z<z;++Z)r[ha++]=m[x*sa+f*v+A*Z+b];d(a,r)}else if(p(b)===w||p(b)===ba||p(b)===E)p(b)===w||p(b)===ba?a.element=b:a.element=b.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(p(b)===W)a.element=b,a.width=b.width,a.height=b.height,a.channels=4;else if(p(b)===D)a.element=b,a.width=b.naturalWidth,a.height=b.naturalHeight,a.channels=4;else if(p(b)===y)a.element=b,a.width=b.videoWidth,a.height=b.videoHeight,a.channels=4;else if(t(b)){m=a.width||b[0].length;
x=a.height||b.length;f=a.channels;f=aa(b[0][0])?f||b[0][0].length:f||1;A=q.shape(b);u=1;for(R=0;R<A.length;++R)u*=A[R];u=I.allocType(36193===a.type?5126:a.type,u);q.flatten(b,A,"",u);d(a,u);a.alignment=1;a.width=m;a.height=x;a.channels=f;a.format=a.internalformat=Aa[f];a.needsFree=!0}5126===a.type?l(0<=g.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===a.type&&l(0<=g.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function P(c,b,d,e,g){var x=c.element,f=c.data,A=c.internalformat,z=c.format,p=c.type,u=c.width,k=c.height;T(c);x?a.texSubImage2D(b,g,d,e,z,p,x):c.compressed?a.compressedTexSubImage2D(b,g,d,e,A,u,k,f):c.needsCopy?(B(),a.copyTexSubImage2D(b,g,d,e,c.xOffset,c.yOffset,u,k)):a.texSubImage2D(b,g,d,e,u,k,z,p,f)}function O(){return ra.pop()||new N}function pa(a){a.needsFree&&I.freeType(a.data);N.call(a);ra.push(a)}function oa(){V.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function z(a,c,b){var d=a.images[0]=O();a.mipmask=1;d.width=a.width=c;d.height=a.height=b;d.channels=a.channels=4}function K(a,c){var b=null;if(h(c))b=a.images[0]=O(),X(b,a),x(b,c),a.mipmask=1;else if(S(a,c),Array.isArray(c.mipmap))for(var d=c.mipmap,m=0;m<d.length;++m)b=a.images[m]=O(),X(b,a),b.width>>=m,b.height>>=m,x(b,d[m]),a.mipmask|=1<<m;else b=a.images[0]=O(),X(b,a),x(b,c),a.mipmask=1;X(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==a.internalformat&&
33779!==a.internalformat||l(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ea(c,b){for(var d=c.images,e=0;e<d.length&&d[e];++e){var g=d[e],x=b,f=e,A=g.element,z=g.data,p=g.internalformat,u=g.format,k=g.type,h=g.width,R=g.height;T(g);A?a.texImage2D(x,f,u,u,k,A):g.compressed?a.compressedTexImage2D(x,f,p,h,R,0,z):g.needsCopy?(B(),a.copyTexImage2D(x,f,u,g.xOffset,g.yOffset,h,R,0)):a.texImage2D(x,f,u,h,R,0,u,
k,z||null)}}function U(){var a=xa.pop()||new oa;V.call(a);for(var c=a.mipmask=0;16>c;++c)a.images[c]=null;return a}function ma(a){for(var c=a.images,b=0;b<c.length;++b)c[b]&&pa(c[b]),c[b]=null;xa.push(a)}function qa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ba(a,c){if("min"in c){var b=c.min;l.parameter(b,zb);a.minFilter=zb[b];0<=M.indexOf(a.minFilter)&&!("faces"in c)&&(a.genMipmaps=!0)}"mag"in c&&(b=c.mag,l.parameter(b,
sa),a.magFilter=sa[b]);var b=a.wrapS,d=a.wrapT;if("wrap"in c){var m=c.wrap;"string"===typeof m?(l.parameter(m,Pa),b=d=Pa[m]):Array.isArray(m)&&(l.parameter(m[0],Pa),l.parameter(m[1],Pa),b=Pa[m[0]],d=Pa[m[1]])}else"wrapS"in c&&(b=c.wrapS,l.parameter(b,Pa),b=Pa[b]),"wrapT"in c&&(d=c.wrapT,l.parameter(d,Pa),d=Pa[d]);a.wrapS=b;a.wrapT=d;"anisotropic"in c&&(b=c.anisotropic,l("number"===typeof b&&1<=b&&b<=g.maxAnisotropic,"aniso samples must be between 1 and "),a.anisotropic=c.anisotropic);if("mipmap"in
c){b=!1;switch(typeof c.mipmap){case "string":l.parameter(c.mipmap,za,"invalid mipmap hint");a.mipmapHint=za[c.mipmap];b=a.genMipmaps=!0;break;case "boolean":b=a.genMipmaps=c.mipmap;break;case "object":l(Array.isArray(c.mipmap),"invalid mipmap type");a.genMipmaps=!1;b=!0;break;default:l.raise("invalid mipmap type")}!b||"min"in c||(a.minFilter=9984)}}function ya(c,b){a.texParameteri(b,10241,c.minFilter);a.texParameteri(b,10240,c.magFilter);a.texParameteri(b,10242,c.wrapS);a.texParameteri(b,10243,c.wrapT);
Z.ext_texture_filter_anisotropic&&a.texParameteri(b,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(b))}function da(c){V.call(this);this.mipmask=0;this.internalformat=6408;this.id=wa++;this.refCount=1;this.target=c;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new qa;L.profile&&(this.stats={size:0})}function Ca(c){a.activeTexture(33984);a.bindTexture(c.target,c.texture)}function ja(){var c=ta[0];c?a.bindTexture(c.target,c.texture):a.bindTexture(3553,
null)}function na(c){var b=c.texture;l(b,"must not double destroy texture");var d=c.unit,e=c.target;0<=d&&(a.activeTexture(33984+d),a.bindTexture(e,null),ta[d]=null);a.deleteTexture(b);c.texture=null;c.params=null;c.pixels=null;c.refCount=0;delete ka[c.id];Da.textureCount--}var za={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Pa={repeat:10497,clamp:33071,mirror:33648},sa={nearest:9728,linear:9729},zb=r({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,
"linear mipmap linear":9987},sa),Ya={none:0,browser:37444},A={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},u={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ha={};Z.ext_srgb&&(u.srgb=35904,u.srgba=35906);Z.oes_texture_float&&(A.float32=A["float"]=5126);Z.oes_texture_half_float&&(A.float16=A["half float"]=36193);Z.webgl_depth_texture&&(r(u,{depth:6402,"depth stencil":34041}),r(A,{uint16:5123,uint32:5125,"depth stencil":34042}));
Z.webgl_compressed_texture_s3tc&&r(ha,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Z.webgl_compressed_texture_atc&&r(ha,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Z.webgl_compressed_texture_pvrtc&&r(ha,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Z.webgl_compressed_texture_etc1&&(ha["rgb etc1"]=36196);var ua=Array.prototype.slice.call(a.getParameter(34467));
b(ha).forEach(function(a){var c=ha[a];0<=ua.indexOf(c)&&(u[a]=c)});var Fa=b(u);g.textureFormats=Fa;var mb=[];b(u).forEach(function(a){mb[u[a]]=a});var Ib=[];b(A).forEach(function(a){Ib[A[a]]=a});var fa=[];b(sa).forEach(function(a){fa[sa[a]]=a});var R=[];b(zb).forEach(function(a){R[zb[a]]=a});var va=[];b(Pa).forEach(function(a){va[Pa[a]]=a});var Ga=Fa.reduce(function(a,c){var b=u[c];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||Z.ext_srgb&&(35904===b||35906===b)?a[b]=b:32855===b||0<=
c.indexOf("rgba")?a[b]=6408:a[b]=6407;return a},{}),ra=[],xa=[],wa=0,ka={},Y=g.maxTextureUnits,ta=Array(Y).map(function(){return null});r(da.prototype,{bind:function(){this.bindCount+=1;var c=this.unit;if(0>c){for(var b=0;b<Y;++b){var d=ta[b];if(d){if(0<d.bindCount)continue;d.unit=-1}ta[b]=this;c=b;break}c>=Y&&l.raise("insufficient number of texture units");L.profile&&Da.maxTextureUnits<c+1&&(Da.maxTextureUnits=c+1);this.unit=c;a.activeTexture(33984+c);a.bindTexture(this.target,this.texture)}return c},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&na(this)}});L.profile&&(Da.getTotalTextureSize=function(){var a=0;b(ka).forEach(function(c){a+=ka[c].stats.size});return a});return{create2D:function(b,d){function e(a,b){var d=f.texInfo;qa.call(d);var m=U();"number"===typeof a?"number"===typeof b?z(m,a|0,b|0):z(m,a|0,a|0):a?(l.type(a,"object","invalid arguments to regl.texture"),Ba(d,a),K(m,a)):z(m,1,1);d.genMipmaps&&(m.mipmask=(m.width<<1)-1);f.mipmask=m.mipmask;X(f,m);l.texture2D(d,
m,g);f.internalformat=m.internalformat;e.width=m.width;e.height=m.height;Ca(f);ea(m,3553);ya(d,3553);ja();ma(m);L.profile&&(f.stats.size=c(f.internalformat,f.type,m.width,m.height,d.genMipmaps,!1));e.format=mb[f.internalformat];e.type=Ib[f.type];e.mag=fa[d.magFilter];e.min=R[d.minFilter];e.wrapS=va[d.wrapS];e.wrapT=va[d.wrapT];return e}var f=new da(3553);ka[f.id]=f;Da.textureCount++;e(b,d);e.subimage=function(a,c,b,d){l(!!a,"must specify image data");c|=0;b|=0;d|=0;var m=O();X(m,f);m.width=0;m.height=
0;x(m,a);m.width=m.width||(f.width>>d)-c;m.height=m.height||(f.height>>d)-b;l(f.type===m.type&&f.format===m.format&&f.internalformat===m.internalformat,"incompatible format for texture.subimage");l(0<=c&&0<=b&&c+m.width<=f.width&&b+m.height<=f.height,"texture.subimage write out of bounds");l(f.mipmask&1<<d,"missing mipmap data");l(m.data||m.element||m.needsCopy,"missing image data");Ca(f);P(m,3553,c,b,d);ja();pa(m);return e};e.resize=function(b,d){var g=b|0,x=d|0||g;if(g===f.width&&x===f.height)return e;
e.width=f.width=g;e.height=f.height=x;Ca(f);for(var A=0;f.mipmask>>A;++A){var z=g>>A,p=x>>A;if(!z||!p)break;a.texImage2D(3553,A,f.format,z,p,0,f.format,f.type,null)}ja();L.profile&&(f.stats.size=c(f.internalformat,f.type,g,x,!1,!1));return e};e._reglType="texture2d";e._texture=f;L.profile&&(e.stats=f.stats);e.destroy=function(){f.decRef()};return e},createCube:function(b,d,e,f,A,p){function u(a,b,d,m,e,f){var x,A=k.texInfo;qa.call(A);for(x=0;6>x;++x)h[x]=U();if("number"!==typeof a&&a)if("object"===
typeof a)if(b)K(h[0],a),K(h[1],b),K(h[2],d),K(h[3],m),K(h[4],e),K(h[5],f);else if(Ba(A,a),S(k,a),"faces"in a)for(a=a.faces,l(Array.isArray(a)&&6===a.length,"cube faces must be a length 6 array"),x=0;6>x;++x)l("object"===typeof a[x]&&!!a[x],"invalid input for cube map face"),X(h[x],k),K(h[x],a[x]);else for(x=0;6>x;++x)K(h[x],a);else l.raise("invalid arguments to cube map");else for(a=a|0||1,x=0;6>x;++x)z(h[x],a,a);X(k,h[0]);l.optional(function(){g.npotTextureCube||l(J(k.width)&&J(k.height),"your browser does not support non power or two texture dimensions")});
k.mipmask=A.genMipmaps?(h[0].width<<1)-1:h[0].mipmask;l.textureCube(k,A,h,g);k.internalformat=h[0].internalformat;u.width=h[0].width;u.height=h[0].height;Ca(k);for(x=0;6>x;++x)ea(h[x],34069+x);ya(A,34067);ja();L.profile&&(k.stats.size=c(k.internalformat,k.type,u.width,u.height,A.genMipmaps,!0));u.format=mb[k.internalformat];u.type=Ib[k.type];u.mag=fa[A.magFilter];u.min=R[A.minFilter];u.wrapS=va[A.wrapS];u.wrapT=va[A.wrapT];for(x=0;6>x;++x)ma(h[x]);return u}var k=new da(34067);ka[k.id]=k;Da.cubeCount++;
var h=Array(6);u(b,d,e,f,A,p);u.subimage=function(a,c,b,d,m){l(!!c,"must specify image data");l("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");b|=0;d|=0;m|=0;var e=O();X(e,k);e.width=0;e.height=0;x(e,c);e.width=e.width||(k.width>>m)-b;e.height=e.height||(k.height>>m)-d;l(k.type===e.type&&k.format===e.format&&k.internalformat===e.internalformat,"incompatible format for texture.subimage");l(0<=b&&0<=d&&b+e.width<=k.width&&d+e.height<=k.height,"texture.subimage write out of bounds");l(k.mipmask&
1<<m,"missing mipmap data");l(e.data||e.element||e.needsCopy,"missing image data");Ca(k);P(e,34069+a,b,d,m);ja();pa(e);return u};u.resize=function(b){b|=0;if(b!==k.width){u.width=k.width=b;u.height=k.height=b;Ca(k);for(var d=0;6>d;++d)for(var e=0;k.mipmask>>e;++e)a.texImage2D(34069+d,e,k.format,b>>e,b>>e,0,k.format,k.type,null);ja();L.profile&&(k.stats.size=c(k.internalformat,k.type,u.width,u.height,!1,!0));return u}};u._reglType="textureCube";u._texture=k;L.profile&&(u.stats=k.stats);u.destroy=function(){k.decRef()};
return u},clear:function(){for(var c=0;c<Y;++c)a.activeTexture(33984+c),a.bindTexture(3553,null),ta[c]=null;v(ka).forEach(na);Da.cubeCount=0;Da.textureCount=0},getTexture:function(a){return null},restore:function(){for(var c=0;c<Y;++c){var b=ta[c];b&&(b.bindCount=0,b.unit=-1,ta[c]=null)}v(ka).forEach(function(c){c.texture=a.createTexture();a.bindTexture(c.target,c.texture);for(var b=0;32>b;++b)if(0!==(c.mipmask&1<<b))if(3553===c.target)a.texImage2D(3553,b,c.internalformat,c.width>>b,c.height>>b,0,
c.internalformat,c.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,b,c.internalformat,c.width>>b,c.height>>b,0,c.internalformat,c.type,null);ya(c.texInfo,c.target)})},refresh:function(){for(var c=0;c<Y;++c){var b=ta[c];b&&(b.bindCount=0,b.unit=-1,ta[c]=null);a.activeTexture(33984+c);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,
"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(L,H,ia){H.exports=function(a,e){function t(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function p(a,d,e){var p=c.pop()||new t;p.startQueryIndex=a;p.endQueryIndex=d;p.sum=0;p.stats=e;b.push(p)}if(!e.ext_disjoint_timer_query)return null;var h=[],d=[],c=[],b=[],l=[],r=[];return{beginQuery:function(a){var c=h.pop()||e.ext_disjoint_timer_query.createQueryEXT();
e.ext_disjoint_timer_query.beginQueryEXT(35007,c);d.push(c);p(d.length-1,d.length,a)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:p,update:function(){var a,p;a=d.length;if(0!==a){r.length=Math.max(r.length,a+1);l.length=Math.max(l.length,a+1);l[0]=0;var t=r[0]=0;for(p=a=0;p<d.length;++p){var I=d[p];e.ext_disjoint_timer_query.getQueryObjectEXT(I,34919)?(t+=e.ext_disjoint_timer_query.getQueryObjectEXT(I,34918),h.push(I)):d[a++]=I;l[p+1]=t;r[p+1]=a}d.length=a;for(p=
a=0;p<b.length;++p){var t=b[p],n=t.startQueryIndex,I=t.endQueryIndex;t.sum+=l[I]-l[n];n=r[n];I=r[I];I===n?(t.stats.gpuTime+=t.sum/1E6,c.push(t)):(t.startQueryIndex=n,t.endQueryIndex=I,b[a++]=t)}b.length=a}},getNumPendingQueries:function(){return d.length},clear:function(){h.push.apply(h,d);for(var a=0;a<h.length;a++)e.ext_disjoint_timer_query.deleteQueryEXT(h[a]);d.length=0;h.length=0},restore:function(){d.length=0;h.length=0}}}},{}],21:[function(L,H,ia){function a(a){return"undefined"!==typeof atob?
atob(a):"base64:"+a}function e(a){a=Error("(regl) "+a);console.error(a);throw a;}function t(a,c){a||e(c)}function p(a){return a?": "+a:""}function h(a,c){switch(c){case "number":return"number"===typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function d(a,c,b){0>c.indexOf(a)&&e("invalid value"+
p(b)+". must be one of: "+c)}function c(a,c){for(a+="";a.length<c;)a=" "+a;return a}function b(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function l(a,c){this.number=a;this.line=c;this.errors=[]}function r(a,c,b){this.file=a;this.line=c;this.message=b}function v(){var a=Error(),a=(a.stack||a).toString(),c=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return c?c[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function k(){var a=Error(),a=(a.stack||a).toString(),
c=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return c?c[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function F(c,d){var e=c.split("\n"),f=1,p=0,k={unknown:new b,0:new b};k.unknown.name=k[0].name=d||v();k.unknown.lines.push(new l(0,""));for(var h=0;h<e.length;++h){var r=e[h],m=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(r);if(m)switch(m[1]){case "line":if(m=/(\d+)(\s+\d+)?/.exec(m[2]))f=m[1]|0,m[2]&&(p=m[2]|0,p in k||(k[p]=new b));break;case "define":if(m=/SHADER_NAME(_B64)?\s+(.*)$/.exec(m[2]))k[p].name=
m[1]?a(m[2]):m[2]}k[p].lines.push(new l(f++,r))}M(k).forEach(function(a){var c=k[a];c.lines.forEach(function(a){c.index[a.number]=a})});return k}function I(a){var c=[];a.split("\n").forEach(function(a){if(!(5>a.length)){var b=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);b?c.push(new r(b[1]|0,b[2]|0,b[3].trim())):0<a.length&&c.push(new r("unknown",0,a))}});return c}function n(a,c){c.forEach(function(c){var b=a[c.file];if(b){var d=b.index[c.line];if(d){d.errors.push(c);b.hasErrors=!0;return}}a.unknown.hasErrors=
!0;a.unknown.lines[0].errors.push(c)})}function aa(a){a._commandRef=v()}function q(a,c){var b=k();e(a+" in command "+(c||v())+("unknown"===b?"":" called from "+b))}function J(a,c,b,d){h(a,c)||q("invalid parameter type"+p(b)+". expected "+c+", got "+typeof a,d||v())}function C(a,c){return 32820===a||32819===a||33635===a?2:34042===a?4:w[a]*c}var M=L("./sorted-object-keys"),Aa=L("./is-typed-array");L=L("./extend");var f="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
w={};w[5120]=w[5121]=1;w[5122]=w[5123]=w[36193]=w[33635]=w[32819]=w[32820]=2;w[5124]=w[5125]=w[5126]=w[34042]=4;H.exports=L(t,{optional:function(a){a()},raise:e,commandRaise:q,command:function(a,c,b){a||q(c,b||v())},parameter:function(a,c,b){a in c||e("unknown parameter ("+a+")"+p(b)+". possible values: "+M(c).join())},commandParameter:function(a,c,b,d){a in c||q("unknown parameter ("+a+")"+p(b)+". possible values: "+M(c).join(),d||v())},constructor:function(a){M(a).forEach(function(a){0>f.indexOf(a)&&
e('invalid regl constructor argument "'+a+'". must be one of '+f)})},type:function(a,c,b){h(a,c)||e("invalid parameter type"+p(b)+". expected "+c+", got "+typeof a)},commandType:J,isTypedArray:function(a,c){Aa(a)||e("invalid parameter type"+p(c)+". must be a typed array")},nni:function(a,c){0<=a&&(a|0)===a||e("invalid parameter type, ("+a+")"+p(c)+". must be a nonnegative integer")},oneOf:d,shaderError:function(a,b,d,e,f){if(!a.getShaderParameter(b,a.COMPILE_STATUS)){b=a.getShaderInfoLog(b);a=e===
a.FRAGMENT_SHADER?"fragment":"vertex";J(d,"string",a+" shader source must be a string",f);var p=F(d,f);d=I(b);n(p,d);M(p).forEach(function(a){function b(a,c){e.push(a);g.push(c||"")}var d=p[a];if(d.hasErrors){var e=[""],g=[""];b("file number "+a+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(a){if(0<a.errors.length){b(c(a.number,4)+"|  ","background-color:yellow; font-weight:bold");b(a.line+"\n","color:red; background-color:yellow; font-weight:bold");
var d=0;a.errors.forEach(function(m){m=m.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(m);if(e){var g=e[1];m=e[2];switch(g){case "assign":g="="}d=Math.max(a.line.indexOf(g,d),0)}else d=0;b(c("| ",6));b(c("^^^",d+3)+"\n","font-weight:bold");b(c("| ",6));b(m+"\n","font-weight:bold")});b(c("| ",6)+"\n")}else b(c(a.number,4)+"|  "),b(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(e.join("")):(g[0]=e.join("%c"),console.log.apply(console,g))}});t.raise("Error compiling "+
a+" shader, "+p[0].name)}},linkError:function(a,c,b,d,e){a.getProgramParameter(c,a.LINK_STATUS)||(a=a.getProgramInfoLog(c),b=F(b,e),d='Error linking program with vertex shader, "'+F(d,e)[0].name+'", and fragment shader "'+b[0].name+'"',"undefined"!==typeof document?console.log("%c"+d+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(d+"\n"+a),t.raise(d))},callSite:k,saveCommandRef:aa,saveDrawInfo:function(a,c,b,d){function e(a){return a?d.id(a):0}function f(a,
c){M(c).forEach(function(c){a[d.id(c)]=!0})}aa(a);a._fragId=e(a["static"].frag);a._vertId=e(a["static"].vert);var p=a._uniformSet={};f(p,c["static"]);f(p,c.dynamic);c=a._attributeSet={};f(c,b["static"]);f(c,b.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,c,b){a.texture?d(a.texture._texture.internalformat,c,"unsupported texture format for attachment"):d(a.renderbuffer._renderbuffer.format,b,"unsupported renderbuffer format for attachment")},
guessCommand:v,texture2D:function(a,c,b){var d=c.width,e=c.height,f=c.channels;t(0<d&&d<=b.maxTextureSize&&0<e&&e<=b.maxTextureSize,"invalid texture shape");33071===a.wrapS&&33071===a.wrapT||t(!(d&d-1)&&!!d&&!(e&e-1)&&!!e,"incompatible wrap mode for texture, both width and height must be power of 2");1===c.mipmask?1!==d&&1!==e&&t(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(t(!(d&d-1)&&!!d&&!(e&e-1)&&!!e,"texture must be a square power of 2 to support mipmapping"),
t(c.mipmask===(d<<1)-1,"missing or incomplete mipmap data"));5126===c.type&&(0>b.extensions.indexOf("oes_texture_float_linear")&&t(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),t(!a.genMipmaps,"mipmap generation not supported with float textures"));var p=c.images;for(b=0;16>b;++b)if(p[b]){var k=d>>b,m=e>>b;t(c.mipmask&1<<b,"missing mipmap data");var h=p[b];t(h.width===k&&h.height===m,"invalid shape for mip images");t(h.format===c.format&&h.internalformat===
c.internalformat&&h.type===c.type,"incompatible type for mip image");!h.compressed&&h.data&&(k=Math.ceil(C(h.type,f)*k/h.unpackAlignment)*h.unpackAlignment,t(h.data.byteLength===k*m,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||t(0===(c.mipmask&1<<b),"extra mipmap data");c.compressed&&t(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,c,b,d){var e=a.width,f=a.height,p=a.channels;t(0<e&&e<=d.maxTextureSize&&
0<f&&f<=d.maxTextureSize,"invalid texture shape");t(e===f,"cube map must be square");t(33071===c.wrapS&&33071===c.wrapT,"wrap mode not supported by cube map");for(d=0;d<b.length;++d){var k=b[d];t(k.width===e&&k.height===f,"inconsistent cube map face shape");c.genMipmaps&&(t(!k.compressed,"can not generate mipmap for compressed textures"),t(1===k.mipmask,"can not specify mipmaps and generate mipmaps"));for(var m=k.images,h=0;16>h;++h){var g=m[h];if(g){var l=e>>h,r=f>>h;t(k.mipmask&1<<h,"missing mipmap data");
t(g.width===l&&g.height===r,"invalid shape for mip images");t(g.format===a.format&&g.internalformat===a.internalformat&&g.type===a.type,"incompatible type for mip image");g.compressed||g.data&&t(g.data.byteLength===l*r*Math.max(C(g.type,p),g.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(L,H,ia){H.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(L,H,ia){function a(a){return Array.prototype.slice.call(a)}function e(e){return a(e).join("")}var t=L("./extend"),p=L("./compiled-fns");H.exports=function(){function h(){var c=[],d=[];return t(function(){c.push.apply(c,a(arguments))},{def:function(){var e="v"+b;b++;d.push(e);0<arguments.length&&(c.push(e,"="),c.push.apply(c,a(arguments)),c.push(";"));return e},toString:function(){return e([0<d.length?"var "+d.join(",")+";":"",e(c)])}})}function d(){function c(a,
e){d(a,e,"=",b.def(a,e),";")}var b=h(),d=h(),e=b.toString,p=d.toString;return t(function(){b.apply(b,a(arguments))},{def:b.def,entry:b,exit:d,save:c,set:function(a,d,e){c(a,d);b(a,d,"=",e,";")},toString:function(){return e()+p()}})}var c=0,b=0,l={},r=h(),v={};return{global:r,link:function(a){var b="$"+c,d=!1;"object"===typeof a&&a.name&&(b=a.name.replace(/ /g,"_"),d=!0);if(b in l)return b;l[b]=a;d||c++;return b},block:h,proc:function(a,c){function b(){var a="a"+p.length;p.push(a);return a}var p=[];
c=c||0;for(var h=0;h<c;++h)b();var h=d(),l=h.toString;return v[a]=t(h,{arg:b,toString:function(){return e(["function(",p.join(),"){",l(),"}"])}})},scope:d,cond:function(){var c=e(arguments),b=d(),p=d(),h=b.toString,l=p.toString;return t(b,{then:function(){b.apply(b,a(arguments));return this},"else":function(){p.apply(p,a(arguments));return this},toString:function(){var a=l();a&&(a="else{"+a+"}");return e(["if(",c,"){",h(),"}",a])}})},compile:function(){var a=[],c=[];Object.keys(l).sort(function(a,
c){var b="$"===a.charAt(0),d="$"===c.charAt(0);return b||d?b&&d?+a.slice(1)<+c.slice(1)?-1:1:b&&!d?-1:1:a.localeCompare(c)}).forEach(function(b){var d=l[b];a.push(b);c.push(d)});for(var b=0,d=a.length-1;-1<d;d--)if("$"===a[d].charAt(0)){b=d;break}var h=['"use strict";',r,"return {"];Object.keys(v).forEach(function(a){h.push('"',a,'":',v[a].toString(),",")});h.push("}");var d=e(h).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),b=a.slice(b).join(),t=p[b];if(!t)throw console.log("src code is:"),
console.log(d),console.log("compiled values:",c),console.log("linked names:",a),console.log("Keys available:",Object.keys(p)),console.log("Key:",b),console.log('"'+b+'": function('+a.join(", ")+") \n{\n"+d+"\n},"),Error("missing precompiled function with key: "+b);return t.apply(null,c)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(L,H,ia){H.exports={$0:function(a){var e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,Da,G,B;e=a.attributes;t=a.current;p=a.framebuffer;h=a.gl;d=a.next;
c=a.vao;b=d.blend_color;l=t.blend_color;r=d.blend_equation;v=t.blend_equation;k=d.blend_func;F=t.blend_func;I=d.colorMask;n=t.colorMask;aa=d.depth_range;q=t.depth_range;J=d.polygonOffset_offset;C=t.polygonOffset_offset;M=d.sample_coverage;Aa=t.sample_coverage;f=d.scissor_box;w=t.scissor_box;ba=d.stencil_func;E=t.stencil_func;W=d.stencil_opBack;D=t.stencil_opBack;y=d.stencil_opFront;Da=t.stencil_opFront;G=d.viewport;B=t.viewport;return{poll:function(){var a,c,e,la,Q,ga,L,V,X,S,T,N,x,P,O,pa,oa,z,K,
ea,U,ma;t.dirty=!1;c=d.blend_enable;e=d.cull_enable;la=d.depth_enable;Q=d.dither;ga=d.polygonOffset_enable;L=d.sample_alpha;V=d.sample_enable;X=d.scissor_enable;S=d.stencil_enable;T=d.cull_face;N=t.cull_face;x=d.depth_func;P=t.depth_func;O=d.depth_mask;pa=t.depth_mask;oa=d.frontFace;z=t.frontFace;K=d.lineWidth;ea=t.lineWidth;U=d.stencil_mask;ma=t.stencil_mask;a=p.next;a!==p.cur&&(a?h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null),p.cur=a);c!==t.blend_enable&&(c?h.enable(3042):
h.disable(3042),t.blend_enable=c);e!==t.cull_enable&&(e?h.enable(2884):h.disable(2884),t.cull_enable=e);la!==t.depth_enable&&(la?h.enable(2929):h.disable(2929),t.depth_enable=la);Q!==t.dither&&(Q?h.enable(3024):h.disable(3024),t.dither=Q);ga!==t.polygonOffset_enable&&(ga?h.enable(32823):h.disable(32823),t.polygonOffset_enable=ga);L!==t.sample_alpha&&(L?h.enable(32926):h.disable(32926),t.sample_alpha=L);V!==t.sample_enable&&(V?h.enable(32928):h.disable(32928),t.sample_enable=V);X!==t.scissor_enable&&
(X?h.enable(3089):h.disable(3089),t.scissor_enable=X);S!==t.stencil_enable&&(S?h.enable(2960):h.disable(2960),t.stencil_enable=S);if(b[0]!==l[0]||b[1]!==l[1]||b[2]!==l[2]||b[3]!==l[3])h.blendColor(b[0],b[1],b[2],b[3]),l[0]=b[0],l[1]=b[1],l[2]=b[2],l[3]=b[3];if(r[0]!==v[0]||r[1]!==v[1])h.blendEquationSeparate(r[0],r[1]),v[0]=r[0],v[1]=r[1];if(k[0]!==F[0]||k[1]!==F[1]||k[2]!==F[2]||k[3]!==F[3])h.blendFuncSeparate(k[0],k[1],k[2],k[3]),F[0]=k[0],F[1]=k[1],F[2]=k[2],F[3]=k[3];if(I[0]!==n[0]||I[1]!==n[1]||
I[2]!==n[2]||I[3]!==n[3])h.colorMask(I[0],I[1],I[2],I[3]),n[0]=I[0],n[1]=I[1],n[2]=I[2],n[3]=I[3];T!==N&&(h.cullFace(T),t.cull_face=T);x!==P&&(h.depthFunc(x),t.depth_func=x);O!==pa&&(h.depthMask(O),t.depth_mask=O);if(aa[0]!==q[0]||aa[1]!==q[1])h.depthRange(aa[0],aa[1]),q[0]=aa[0],q[1]=aa[1];oa!==z&&(h.frontFace(oa),t.frontFace=oa);K!==ea&&(h.lineWidth(K),t.lineWidth=K);if(J[0]!==C[0]||J[1]!==C[1])h.polygonOffset(J[0],J[1]),C[0]=J[0],C[1]=J[1];if(M[0]!==Aa[0]||M[1]!==Aa[1])h.sampleCoverage(M[0],M[1]),
Aa[0]=M[0],Aa[1]=M[1];if(f[0]!==w[0]||f[1]!==w[1]||f[2]!==w[2]||f[3]!==w[3])h.scissor(f[0],f[1],f[2],f[3]),w[0]=f[0],w[1]=f[1],w[2]=f[2],w[3]=f[3];if(ba[0]!==E[0]||ba[1]!==E[1]||ba[2]!==E[2])h.stencilFunc(ba[0],ba[1],ba[2]),E[0]=ba[0],E[1]=ba[1],E[2]=ba[2];U!==ma&&(h.stencilMask(U),t.stencil_mask=U);if(W[0]!==D[0]||W[1]!==D[1]||W[2]!==D[2]||W[3]!==D[3])h.stencilOpSeparate(W[0],W[1],W[2],W[3]),D[0]=W[0],D[1]=W[1],D[2]=W[2],D[3]=W[3];if(y[0]!==Da[0]||y[1]!==Da[1]||y[2]!==Da[2]||y[3]!==Da[3])h.stencilOpSeparate(y[0],
y[1],y[2],y[3]),Da[0]=y[0],Da[1]=y[1],Da[2]=y[2],Da[3]=y[3];if(G[0]!==B[0]||G[1]!==B[1]||G[2]!==B[2]||G[3]!==B[3])h.viewport(G[0],G[1],G[2],G[3]),B[0]=G[0],B[1]=G[1],B[2]=G[2],B[3]=G[3]},refresh:function(){var a,Z,g,la,Q,ga,L,V,X,S,T,N,x,P,O,pa;t.dirty=!1;Z=d.blend_enable;g=d.cull_enable;la=d.depth_enable;Q=d.dither;ga=d.polygonOffset_enable;L=d.sample_alpha;V=d.sample_enable;X=d.scissor_enable;S=d.stencil_enable;T=d.cull_face;N=d.depth_func;x=d.depth_mask;P=d.frontFace;O=d.lineWidth;pa=d.stencil_mask;
(a=p.next)?h.bindFramebuffer(36160,a.framebuffer):h.bindFramebuffer(36160,null);p.cur=a;a=e[0];a.buffer?(h.enableVertexAttribArray(0),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(0),h.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=e[1];a.buffer?(h.enableVertexAttribArray(1),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(1),
h.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=e[2];a.buffer?(h.enableVertexAttribArray(2),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(2),h.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=e[3];a.buffer?(h.enableVertexAttribArray(3),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(3),h.vertexAttrib4f(3,a.x,a.y,a.z,
a.w),a.buffer=null);a=e[4];a.buffer?(h.enableVertexAttribArray(4),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(4),h.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=e[5];a.buffer?(h.enableVertexAttribArray(5),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(5),h.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=e[6];a.buffer?
(h.enableVertexAttribArray(6),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(6),h.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=e[7];a.buffer?(h.enableVertexAttribArray(7),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(7),h.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=e[8];a.buffer?(h.enableVertexAttribArray(8),h.bindBuffer(34962,
a.buffer.buffer),h.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(8),h.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=e[9];a.buffer?(h.enableVertexAttribArray(9),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(9),h.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=e[10];a.buffer?(h.enableVertexAttribArray(10),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(10),h.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=e[11];a.buffer?(h.enableVertexAttribArray(11),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(11),h.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=e[12];a.buffer?(h.enableVertexAttribArray(12),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(12,a.size,a.type,a.normalized,
a.stride,a.offset)):(h.disableVertexAttribArray(12),h.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=e[13];a.buffer?(h.enableVertexAttribArray(13),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(13),h.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=e[14];a.buffer?(h.enableVertexAttribArray(14),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(14),
h.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=e[15];a.buffer?(h.enableVertexAttribArray(15),h.bindBuffer(34962,a.buffer.buffer),h.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(h.disableVertexAttribArray(15),h.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.currentVAO=null;c.setVAO(c.targetVAO);Z?h.enable(3042):h.disable(3042);t.blend_enable=Z;g?h.enable(2884):h.disable(2884);t.cull_enable=g;la?h.enable(2929):h.disable(2929);t.depth_enable=la;Q?h.enable(3024):h.disable(3024);
t.dither=Q;ga?h.enable(32823):h.disable(32823);t.polygonOffset_enable=ga;L?h.enable(32926):h.disable(32926);t.sample_alpha=L;V?h.enable(32928):h.disable(32928);t.sample_enable=V;X?h.enable(3089):h.disable(3089);t.scissor_enable=X;S?h.enable(2960):h.disable(2960);t.stencil_enable=S;h.blendColor(b[0],b[1],b[2],b[3]);l[0]=b[0];l[1]=b[1];l[2]=b[2];l[3]=b[3];h.blendEquationSeparate(r[0],r[1]);v[0]=r[0];v[1]=r[1];h.blendFuncSeparate(k[0],k[1],k[2],k[3]);F[0]=k[0];F[1]=k[1];F[2]=k[2];F[3]=k[3];h.colorMask(I[0],
I[1],I[2],I[3]);n[0]=I[0];n[1]=I[1];n[2]=I[2];n[3]=I[3];h.cullFace(T);t.cull_face=T;h.depthFunc(N);t.depth_func=N;h.depthMask(x);t.depth_mask=x;h.depthRange(aa[0],aa[1]);q[0]=aa[0];q[1]=aa[1];h.frontFace(P);t.frontFace=P;h.lineWidth(O);t.lineWidth=O;h.polygonOffset(J[0],J[1]);C[0]=J[0];C[1]=J[1];h.sampleCoverage(M[0],M[1]);Aa[0]=M[0];Aa[1]=M[1];h.scissor(f[0],f[1],f[2],f[3]);w[0]=f[0];w[1]=f[1];w[2]=f[2];w[3]=f[3];h.stencilFunc(ba[0],ba[1],ba[2]);E[0]=ba[0];E[1]=ba[1];E[2]=ba[2];h.stencilMask(pa);
t.stencil_mask=pa;h.stencilOpSeparate(W[0],W[1],W[2],W[3]);D[0]=W[0];D[1]=W[1];D[2]=W[2];D[3]=W[3];h.stencilOpSeparate(y[0],y[1],y[2],y[3]);Da[0]=y[0];Da[1]=y[1];Da[2]=y[2];Da[3]=y[3];h.viewport(G[0],G[1],G[2],G[3]);B[0]=G[0];B[1]=G[1];B[2]=G[2];B[3]=G[3]}}},$3:function(a,e,t,p){var h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,Da,G,B,m,Z,g,la,Q,ga;h=a.context;d=a.current;c=a.framebuffer;b=a.gl;l=a.next;r=a.shader;v=a.vao;k=l.blend_color;F=d.blend_color;I=l.blend_equation;n=d.blend_equation;
aa=l.blend_func;q=d.blend_func;J=l.colorMask;C=d.colorMask;M=l.depth_range;Aa=d.depth_range;f=l.polygonOffset_offset;w=d.polygonOffset_offset;ba=l.sample_coverage;E=d.sample_coverage;W=l.scissor_box;D=d.scissor_box;y=l.stencil_func;Da=d.stencil_func;G=l.stencil_opBack;B=d.stencil_opBack;m=l.stencil_opFront;Z=d.stencil_opFront;g=l.viewport;la=d.viewport;Q={};ga={};return{batch:function(a,h){var t,S,T,N,x;t=c.next;t!==c.cur&&(t?b.bindFramebuffer(36160,t.framebuffer):b.bindFramebuffer(36160,null),c.cur=
t);if(d.dirty){t=l.dither;t!==d.dither&&(t?b.enable(3024):b.disable(3024),d.dither=t);t=l.blend_enable;t!==d.blend_enable&&(t?b.enable(3042):b.disable(3042),d.blend_enable=t);t=k[0];T=k[1];N=k[2];x=k[3];if(t!==F[0]||T!==F[1]||N!==F[2]||x!==F[3])b.blendColor(t,T,N,x),F[0]=t,F[1]=T,F[2]=N,F[3]=x;t=I[0];T=I[1];if(t!==n[0]||T!==n[1])b.blendEquationSeparate(t,T),n[0]=t,n[1]=T;t=aa[0];T=aa[1];N=aa[2];x=aa[3];if(t!==q[0]||T!==q[1]||N!==q[2]||x!==q[3])b.blendFuncSeparate(t,T,N,x),q[0]=t,q[1]=T,q[2]=N,q[3]=
x;t=l.depth_enable;t!==d.depth_enable&&(t?b.enable(2929):b.disable(2929),d.depth_enable=t);t=l.depth_func;t!==d.depth_func&&(b.depthFunc(t),d.depth_func=t);t=M[0];T=M[1];if(t!==Aa[0]||T!==Aa[1])b.depthRange(t,T),Aa[0]=t,Aa[1]=T;t=l.depth_mask;t!==d.depth_mask&&(b.depthMask(t),d.depth_mask=t);t=J[0];T=J[1];N=J[2];x=J[3];if(t!==C[0]||T!==C[1]||N!==C[2]||x!==C[3])b.colorMask(t,T,N,x),C[0]=t,C[1]=T,C[2]=N,C[3]=x;t=l.cull_enable;t!==d.cull_enable&&(t?b.enable(2884):b.disable(2884),d.cull_enable=t);t=l.cull_face;
t!==d.cull_face&&(b.cullFace(t),d.cull_face=t);t=l.frontFace;t!==d.frontFace&&(b.frontFace(t),d.frontFace=t);t=l.lineWidth;t!==d.lineWidth&&(b.lineWidth(t),d.lineWidth=t);t=l.polygonOffset_enable;t!==d.polygonOffset_enable&&(t?b.enable(32823):b.disable(32823),d.polygonOffset_enable=t);t=f[0];T=f[1];if(t!==w[0]||T!==w[1])b.polygonOffset(t,T),w[0]=t,w[1]=T;t=l.sample_alpha;t!==d.sample_alpha&&(t?b.enable(32926):b.disable(32926),d.sample_alpha=t);t=l.sample_enable;t!==d.sample_enable&&(t?b.enable(32928):
b.disable(32928),d.sample_enable=t);t=ba[0];T=ba[1];if(t!==E[0]||T!==E[1])b.sampleCoverage(t,T),E[0]=t,E[1]=T;t=l.stencil_enable;t!==d.stencil_enable&&(t?b.enable(2960):b.disable(2960),d.stencil_enable=t);t=l.stencil_mask;t!==d.stencil_mask&&(b.stencilMask(t),d.stencil_mask=t);t=y[0];T=y[1];N=y[2];if(t!==Da[0]||T!==Da[1]||N!==Da[2])b.stencilFunc(t,T,N),Da[0]=t,Da[1]=T,Da[2]=N;t=m[0];T=m[1];N=m[2];x=m[3];if(t!==Z[0]||T!==Z[1]||N!==Z[2]||x!==Z[3])b.stencilOpSeparate(t,T,N,x),Z[0]=t,Z[1]=T,Z[2]=N,Z[3]=
x;t=G[0];T=G[1];N=G[2];x=G[3];if(t!==B[0]||T!==B[1]||N!==B[2]||x!==B[3])b.stencilOpSeparate(t,T,N,x),B[0]=t,B[1]=T,B[2]=N,B[3]=x;t=l.scissor_enable;t!==d.scissor_enable&&(t?b.enable(3089):b.disable(3089),d.scissor_enable=t);t=W[0];T=W[1];N=W[2];x=W[3];if(t!==D[0]||T!==D[1]||N!==D[2]||x!==D[3])b.scissor(t,T,N,x),D[0]=t,D[1]=T,D[2]=N,D[3]=x;t=g[0];T=g[1];N=g[2];x=g[3];if(t!==la[0]||T!==la[1]||N!==la[2]||x!==la[3])b.viewport(t,T,N,x),la[0]=t,la[1]=T,la[2]=N,la[3]=x;d.dirty=!1}if(t=d.profile)S=performance.now(),
e.count+=h;T=r.program(r.vert,r.frag);b.useProgram(T.program);v.setVAO(null);N=T.id;(x=ga[N])||(x=ga[N]=p(T));x.call(this,a,h);v.setVAO(null);t&&(e.cpuTime+=performance.now()-S)},draw:function(a){var p,h,S,T,N;p=c.next;p!==c.cur&&(p?b.bindFramebuffer(36160,p.framebuffer):b.bindFramebuffer(36160,null),c.cur=p);if(d.dirty){p=l.dither;p!==d.dither&&(p?b.enable(3024):b.disable(3024),d.dither=p);p=l.blend_enable;p!==d.blend_enable&&(p?b.enable(3042):b.disable(3042),d.blend_enable=p);p=k[0];S=k[1];T=k[2];
N=k[3];if(p!==F[0]||S!==F[1]||T!==F[2]||N!==F[3])b.blendColor(p,S,T,N),F[0]=p,F[1]=S,F[2]=T,F[3]=N;p=I[0];S=I[1];if(p!==n[0]||S!==n[1])b.blendEquationSeparate(p,S),n[0]=p,n[1]=S;p=aa[0];S=aa[1];T=aa[2];N=aa[3];if(p!==q[0]||S!==q[1]||T!==q[2]||N!==q[3])b.blendFuncSeparate(p,S,T,N),q[0]=p,q[1]=S,q[2]=T,q[3]=N;p=l.depth_enable;p!==d.depth_enable&&(p?b.enable(2929):b.disable(2929),d.depth_enable=p);p=l.depth_func;p!==d.depth_func&&(b.depthFunc(p),d.depth_func=p);p=M[0];S=M[1];if(p!==Aa[0]||S!==Aa[1])b.depthRange(p,
S),Aa[0]=p,Aa[1]=S;p=l.depth_mask;p!==d.depth_mask&&(b.depthMask(p),d.depth_mask=p);p=J[0];S=J[1];T=J[2];N=J[3];if(p!==C[0]||S!==C[1]||T!==C[2]||N!==C[3])b.colorMask(p,S,T,N),C[0]=p,C[1]=S,C[2]=T,C[3]=N;p=l.cull_enable;p!==d.cull_enable&&(p?b.enable(2884):b.disable(2884),d.cull_enable=p);p=l.cull_face;p!==d.cull_face&&(b.cullFace(p),d.cull_face=p);p=l.frontFace;p!==d.frontFace&&(b.frontFace(p),d.frontFace=p);p=l.lineWidth;p!==d.lineWidth&&(b.lineWidth(p),d.lineWidth=p);p=l.polygonOffset_enable;p!==
d.polygonOffset_enable&&(p?b.enable(32823):b.disable(32823),d.polygonOffset_enable=p);p=f[0];S=f[1];if(p!==w[0]||S!==w[1])b.polygonOffset(p,S),w[0]=p,w[1]=S;p=l.sample_alpha;p!==d.sample_alpha&&(p?b.enable(32926):b.disable(32926),d.sample_alpha=p);p=l.sample_enable;p!==d.sample_enable&&(p?b.enable(32928):b.disable(32928),d.sample_enable=p);p=ba[0];S=ba[1];if(p!==E[0]||S!==E[1])b.sampleCoverage(p,S),E[0]=p,E[1]=S;p=l.stencil_enable;p!==d.stencil_enable&&(p?b.enable(2960):b.disable(2960),d.stencil_enable=
p);p=l.stencil_mask;p!==d.stencil_mask&&(b.stencilMask(p),d.stencil_mask=p);p=y[0];S=y[1];T=y[2];if(p!==Da[0]||S!==Da[1]||T!==Da[2])b.stencilFunc(p,S,T),Da[0]=p,Da[1]=S,Da[2]=T;p=m[0];S=m[1];T=m[2];N=m[3];if(p!==Z[0]||S!==Z[1]||T!==Z[2]||N!==Z[3])b.stencilOpSeparate(p,S,T,N),Z[0]=p,Z[1]=S,Z[2]=T,Z[3]=N;p=G[0];S=G[1];T=G[2];N=G[3];if(p!==B[0]||S!==B[1]||T!==B[2]||N!==B[3])b.stencilOpSeparate(p,S,T,N),B[0]=p,B[1]=S,B[2]=T,B[3]=N;p=l.scissor_enable;p!==d.scissor_enable&&(p?b.enable(3089):b.disable(3089),
d.scissor_enable=p);p=W[0];S=W[1];T=W[2];N=W[3];if(p!==D[0]||S!==D[1]||T!==D[2]||N!==D[3])b.scissor(p,S,T,N),D[0]=p,D[1]=S,D[2]=T,D[3]=N;p=g[0];S=g[1];T=g[2];N=g[3];if(p!==la[0]||S!==la[1]||T!==la[2]||N!==la[3])b.viewport(p,S,T,N),la[0]=p,la[1]=S,la[2]=T,la[3]=N;d.dirty=!1}if(p=d.profile)h=performance.now(),e.count++;S=r.program(r.vert,r.frag);b.useProgram(S.program);v.setVAO(null);T=S.id;(N=Q[T])||(N=Q[T]=t(S));N.call(this,a);v.setVAO(null);p&&(e.cpuTime+=performance.now()-h)},scope:function(a,c,
b){var m,g;if(m=d.profile)g=performance.now(),e.count++;c(h,a,b);m&&(e.cpuTime+=performance.now()-g)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,Da,G,B,m,Z,g,la,Q,ga,L,V,X,S,T,N,x,P,O,pa,oa,
z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa){var ka,Y,ta,Sa,Ia,gb,ca,yd,bc,Ha,Je,Ub,H,Fd,pe,Vd,Be,xe,Nd,oe,he,Od,qd,Gd,Ad,ze,$e,Se,Hd,Ce,Yd,Zd,ee,Wd,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va;ka=a.attributes;Y=a.context;ta=a.current;Sa=a.draw;Ia=a.elements;gb=a.framebuffer;ca=a.gl;yd=a.next;bc=a.shader;Ha=a.uniforms;Je=a.vao;Ub=yd.blend_color;H=ta.blend_color;Fd=yd.blend_equation;pe=ta.blend_equation;
Vd=yd.blend_func;Be=ta.blend_func;xe=yd.colorMask;Nd=ta.colorMask;oe=yd.depth_range;he=ta.depth_range;Od=yd.polygonOffset_offset;qd=ta.polygonOffset_offset;Gd=yd.sample_coverage;Ad=ta.sample_coverage;ze=yd.scissor_box;$e=ta.scissor_box;Se=yd.stencil_func;Hd=ta.stencil_func;Ce=yd.stencil_opBack;Yd=ta.stencil_opBack;Zd=yd.stencil_opFront;ee=ta.stencil_opFront;Wd=yd.viewport;md=ta.viewport;ad={};rd={};Lc=new Float32Array(16);od=new Float32Array(16);Fc=new Float32Array(16);ed=new Float32Array(16);Oc=
new Float32Array(16);Wc=new Float32Array(16);Cb=new Float32Array(16);Gb=new Float32Array(16);uc=new Float32Array(16);Ab=new Float32Array(16);xc=new Float32Array(16);Db=new Float32Array(16);Ic=new Float32Array(16);mc=new Float32Array(16);Gc=new Float32Array(16);fd=new Float32Array(16);Vc=new Float32Array(16);Dc=new Float32Array(16);fc=new Float32Array(16);Hc=new Float32Array(16);pc=new Float32Array(16);qc=new Float32Array(16);nc=new Float32Array(16);gc=new Float32Array(16);lb=new Float32Array(16);
Jc=new Float32Array(16);Jb=new Float32Array(16);cb=new Float32Array(16);Pb=new Float32Array(16);ab=new Float32Array(16);pb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(a,e){var m,g,f,t;m=gb.next;m!==gb.cur&&(m?ca.bindFramebuffer(36160,m.framebuffer):ca.bindFramebuffer(36160,null),gb.cur=m);if(ta.dirty){var w,y,Z,D,E,B,G,Q,M,ba,W,Aa,la,ga,Ha,Da,Ub,bc,La,Gb,Oc,Cb,Db,Oa,ze;w=xe[0];y=xe[1];Z=xe[2];D=xe[3];if(w!==Nd[0]||y!==Nd[1]||Z!==Nd[2]||D!==Nd[3])ca.colorMask(w,y,Z,D),Nd[0]=
w,Nd[1]=y,Nd[2]=Z,Nd[3]=D;E=yd.frontFace;E!==ta.frontFace&&(ca.frontFace(E),ta.frontFace=E);B=yd.polygonOffset_enable;B!==ta.polygonOffset_enable&&(B?ca.enable(32823):ca.disable(32823),ta.polygonOffset_enable=B);G=Od[0];Q=Od[1];if(G!==qd[0]||Q!==qd[1])ca.polygonOffset(G,Q),qd[0]=G,qd[1]=Q;M=yd.sample_alpha;M!==ta.sample_alpha&&(M?ca.enable(32926):ca.disable(32926),ta.sample_alpha=M);ba=yd.sample_enable;ba!==ta.sample_enable&&(ba?ca.enable(32928):ca.disable(32928),ta.sample_enable=ba);W=Gd[0];Aa=Gd[1];
if(W!==Ad[0]||Aa!==Ad[1])ca.sampleCoverage(W,Aa),Ad[0]=W,Ad[1]=Aa;la=yd.stencil_enable;la!==ta.stencil_enable&&(la?ca.enable(2960):ca.disable(2960),ta.stencil_enable=la);ga=yd.stencil_mask;ga!==ta.stencil_mask&&(ca.stencilMask(ga),ta.stencil_mask=ga);Ha=Se[0];Da=Se[1];Ub=Se[2];if(Ha!==Hd[0]||Da!==Hd[1]||Ub!==Hd[2])ca.stencilFunc(Ha,Da,Ub),Hd[0]=Ha,Hd[1]=Da,Hd[2]=Ub;bc=Zd[0];La=Zd[1];Gb=Zd[2];Oc=Zd[3];if(bc!==ee[0]||La!==ee[1]||Gb!==ee[2]||Oc!==ee[3])ca.stencilOpSeparate(bc,La,Gb,Oc),ee[0]=bc,ee[1]=
La,ee[2]=Gb,ee[3]=Oc;Cb=Ce[0];Db=Ce[1];Oa=Ce[2];ze=Ce[3];if(Cb!==Yd[0]||Db!==Yd[1]||Oa!==Yd[2]||ze!==Yd[3])ca.stencilOpSeparate(Cb,Db,Oa,ze),Yd[0]=Cb,Yd[1]=Db,Yd[2]=Oa,Yd[3]=ze}ca.blendColor(0,0,0,0);H[0]=0;H[1]=0;H[2]=0;H[3]=0;ca.disable(3042);ta.blend_enable=!1;ca.blendEquationSeparate(32774,32774);pe[0]=32774;pe[1]=32774;ca.blendFuncSeparate(770,771,1,1);Be[0]=770;Be[1]=771;Be[2]=1;Be[3]=1;ca.enable(2884);ta.cull_enable=!0;ca.cullFace(1029);ta.cull_face=1029;ca.enable(2929);ta.depth_enable=!0;
ca.depthFunc(513);ta.depth_func=513;ca.depthMask(!0);ta.depth_mask=!0;ca.depthRange(0,1);he[0]=0;he[1]=1;ca.disable(3024);ta.dither=!1;ca.lineWidth(2);ta.lineWidth=2;ca.enable(3089);ta.scissor_enable=!0;g=ta.profile;ta.profile=!1;ca.useProgram(L.program);var Ra,Ab,Wc,Ma,mc,Za,Fc,Vd,nb,Na,uc,Qa,wb,xb,Ta,ob,od,Fd,Gc,bb,Ic,ed,Xa,Lc,Bb,$a,oe,xc,Yb,Sb,Wd,Tb,fd;Je.setVAO(null);Ra=za.location;Ab=ka[Ra];Ab.buffer||ca.enableVertexAttribArray(Ra);if(Ab.type!==p.dtype||4!==Ab.size||Ab.buffer!==p||!1!==Ab.normalized||
0!==Ab.offset||0!==Ab.stride)ca.bindBuffer(34962,p.buffer),ca.vertexAttribPointer(Ra,4,p.dtype,!1,0,0),Ab.type=p.dtype,Ab.size=4,Ab.buffer=p,Ab.normalized=!1,Ab.offset=0,Ab.stride=0;Wc=Pa.location;Ma=ka[Wc];Ma.buffer||ca.enableVertexAttribArray(Wc);if(Ma.type!==h.dtype||4!==Ma.size||Ma.buffer!==h||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)ca.bindBuffer(34962,h.buffer),ca.vertexAttribPointer(Wc,4,h.dtype,!1,0,0),Ma.type=h.dtype,Ma.size=4,Ma.buffer=h,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;
mc=sa.location;Za=ka[mc];Za.buffer||ca.enableVertexAttribArray(mc);if(Za.type!==d.dtype||4!==Za.size||Za.buffer!==d||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ca.bindBuffer(34962,d.buffer),ca.vertexAttribPointer(mc,4,d.dtype,!1,0,0),Za.type=d.dtype,Za.size=4,Za.buffer=d,Za.normalized=!1,Za.offset=0,Za.stride=0;Fc=zb.location;Vd=ka[Fc];Vd.buffer||ca.enableVertexAttribArray(Fc);if(Vd.type!==c.dtype||4!==Vd.size||Vd.buffer!==c||!1!==Vd.normalized||0!==Vd.offset||0!==Vd.stride)ca.bindBuffer(34962,
c.buffer),ca.vertexAttribPointer(Fc,4,c.dtype,!1,0,0),Vd.type=c.dtype,Vd.size=4,Vd.buffer=c,Vd.normalized=!1,Vd.offset=0,Vd.stride=0;nb=Ya.location;Na=ka[nb];Na.buffer||ca.enableVertexAttribArray(nb);if(Na.type!==b.dtype||4!==Na.size||Na.buffer!==b||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ca.bindBuffer(34962,b.buffer),ca.vertexAttribPointer(nb,4,b.dtype,!1,0,0),Na.type=b.dtype,Na.size=4,Na.buffer=b,Na.normalized=!1,Na.offset=0,Na.stride=0;uc=A.location;Qa=ka[uc];Qa.buffer||ca.enableVertexAttribArray(uc);
if(Qa.type!==l.dtype||4!==Qa.size||Qa.buffer!==l||!1!==Qa.normalized||0!==Qa.offset||0!==Qa.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(uc,4,l.dtype,!1,0,0),Qa.type=l.dtype,Qa.size=4,Qa.buffer=l,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;wb=u.location;xb=ka[wb];xb.buffer||ca.enableVertexAttribArray(wb);if(xb.type!==r.dtype||4!==xb.size||xb.buffer!==r||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)ca.bindBuffer(34962,r.buffer),ca.vertexAttribPointer(wb,4,r.dtype,!1,0,0),xb.type=r.dtype,
xb.size=4,xb.buffer=r,xb.normalized=!1,xb.offset=0,xb.stride=0;Ta=ha.location;ob=ka[Ta];ob.buffer||ca.enableVertexAttribArray(Ta);if(ob.type!==v.dtype||4!==ob.size||ob.buffer!==v||!1!==ob.normalized||0!==ob.offset||0!==ob.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(Ta,4,v.dtype,!1,0,0),ob.type=v.dtype,ob.size=4,ob.buffer=v,ob.normalized=!1,ob.offset=0,ob.stride=0;od=ua.location;Fd=ka[od];Fd.buffer||ca.enableVertexAttribArray(od);if(Fd.type!==k.dtype||4!==Fd.size||Fd.buffer!==k||!1!==
Fd.normalized||0!==Fd.offset||0!==Fd.stride)ca.bindBuffer(34962,k.buffer),ca.vertexAttribPointer(od,4,k.dtype,!1,0,0),Fd.type=k.dtype,Fd.size=4,Fd.buffer=k,Fd.normalized=!1,Fd.offset=0,Fd.stride=0;Gc=Fa.location;bb=ka[Gc];bb.buffer||ca.enableVertexAttribArray(Gc);if(bb.type!==F.dtype||4!==bb.size||bb.buffer!==F||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(Gc,4,F.dtype,!1,0,0),bb.type=F.dtype,bb.size=4,bb.buffer=F,bb.normalized=!1,bb.offset=
0,bb.stride=0;Ic=mb.location;ed=ka[Ic];ed.buffer||ca.enableVertexAttribArray(Ic);if(ed.type!==I.dtype||4!==ed.size||ed.buffer!==I||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)ca.bindBuffer(34962,I.buffer),ca.vertexAttribPointer(Ic,4,I.dtype,!1,0,0),ed.type=I.dtype,ed.size=4,ed.buffer=I,ed.normalized=!1,ed.offset=0,ed.stride=0;Xa=Ib.location;Lc=ka[Xa];Lc.buffer||ca.enableVertexAttribArray(Xa);if(Lc.type!==n.dtype||4!==Lc.size||Lc.buffer!==n||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ca.bindBuffer(34962,
n.buffer),ca.vertexAttribPointer(Xa,4,n.dtype,!1,0,0),Lc.type=n.dtype,Lc.size=4,Lc.buffer=n,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Bb=fa.location;$a=ka[Bb];$a.buffer||ca.enableVertexAttribArray(Bb);if($a.type!==aa.dtype||4!==$a.size||$a.buffer!==aa||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)ca.bindBuffer(34962,aa.buffer),ca.vertexAttribPointer(Bb,4,aa.dtype,!1,0,0),$a.type=aa.dtype,$a.size=4,$a.buffer=aa,$a.normalized=!1,$a.offset=0,$a.stride=0;oe=R.location;xc=ka[oe];xc.buffer||ca.enableVertexAttribArray(oe);
if(xc.type!==q.dtype||4!==xc.size||xc.buffer!==q||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(oe,4,q.dtype,!1,0,0),xc.type=q.dtype,xc.size=4,xc.buffer=q,xc.normalized=!1,xc.offset=0,xc.stride=0;Yb=va.location;Sb=ka[Yb];Sb.buffer||ca.enableVertexAttribArray(Yb);if(Sb.type!==J.dtype||4!==Sb.size||Sb.buffer!==J||!1!==Sb.normalized||0!==Sb.offset||0!==Sb.stride)ca.bindBuffer(34962,J.buffer),ca.vertexAttribPointer(Yb,4,J.dtype,!1,0,0),Sb.type=J.dtype,
Sb.size=4,Sb.buffer=J,Sb.normalized=!1,Sb.offset=0,Sb.stride=0;Wd=X.location;Tb=ka[Wd];Tb.buffer||ca.enableVertexAttribArray(Wd);if(Tb.type!==C.dtype||4!==Tb.size||Tb.buffer!==C||!1!==Tb.normalized||0!==Tb.offset||0!==Tb.stride)ca.bindBuffer(34962,C.buffer),ca.vertexAttribPointer(Wd,4,C.dtype,!1,0,0),Tb.type=C.dtype,Tb.size=4,Tb.buffer=C,Tb.normalized=!1,Tb.offset=0,Tb.stride=0;ca.uniform1i(Ga.location,V.bind());(fd=Sa.elements)?ca.bindBuffer(34963,fd.buffer.buffer):Je.currentVAO&&(fd=Ia.getElements(Je.currentVAO.elements))&&
ca.bindBuffer(34963,fd.buffer.buffer);for(f=0;f<e;++f){t=a[f];var Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,ia,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce;ad.height=t.viewportHeight;ad.width=t.viewportWidth;ad.x=t.viewportX;ad.y=t.viewportY;Ec=ad.x|0;pd=ad.y|0;Mc="width"in ad?ad.width|0:Y.framebufferWidth-Ec;Xc="height"in ad?ad.height|0:Y.framebufferHeight-pd;ud=Y.viewportWidth;Y.viewportWidth=Mc;oc=Y.viewportHeight;
Y.viewportHeight=Xc;ca.viewport(Ec,pd,Mc,Xc);md[0]=Ec;md[1]=pd;md[2]=Mc;md[3]=Xc;rd.height=t.scissorHeight;rd.width=t.scissorWidth;rd.x=t.scissorX;rd.y=t.scissorY;wc=rd.x|0;ic=rd.y|0;db="width"in rd?rd.width|0:Y.framebufferWidth-wc;sc="height"in rd?rd.height|0:Y.framebufferHeight-ic;ca.scissor(wc,ic,db,sc);$e[0]=wc;$e[1]=ic;$e[2]=db;$e[3]=sc;Vb=t.dim0A;ca.uniformMatrix4fv(T.location,!1,Array.isArray(Vb)||Vb instanceof Float32Array?Vb:(Vc[0]=Vb[0],Vc[1]=Vb[1],Vc[2]=Vb[2],Vc[3]=Vb[3],Vc[4]=Vb[4],Vc[5]=
Vb[5],Vc[6]=Vb[6],Vc[7]=Vb[7],Vc[8]=Vb[8],Vc[9]=Vb[9],Vc[10]=Vb[10],Vc[11]=Vb[11],Vc[12]=Vb[12],Vc[13]=Vb[13],Vc[14]=Vb[14],Vc[15]=Vb[15],Vc));Zb=t.dim1A;ca.uniformMatrix4fv(O.location,!1,Array.isArray(Zb)||Zb instanceof Float32Array?Zb:(Dc[0]=Zb[0],Dc[1]=Zb[1],Dc[2]=Zb[2],Dc[3]=Zb[3],Dc[4]=Zb[4],Dc[5]=Zb[5],Dc[6]=Zb[6],Dc[7]=Zb[7],Dc[8]=Zb[8],Dc[9]=Zb[9],Dc[10]=Zb[10],Dc[11]=Zb[11],Dc[12]=Zb[12],Dc[13]=Zb[13],Dc[14]=Zb[14],Dc[15]=Zb[15],Dc));ec=t.dim0B;ca.uniformMatrix4fv(N.location,!1,Array.isArray(ec)||
ec instanceof Float32Array?ec:(fc[0]=ec[0],fc[1]=ec[1],fc[2]=ec[2],fc[3]=ec[3],fc[4]=ec[4],fc[5]=ec[5],fc[6]=ec[6],fc[7]=ec[7],fc[8]=ec[8],fc[9]=ec[9],fc[10]=ec[10],fc[11]=ec[11],fc[12]=ec[12],fc[13]=ec[13],fc[14]=ec[14],fc[15]=ec[15],fc));jc=t.dim1B;ca.uniformMatrix4fv(pa.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(Hc[0]=jc[0],Hc[1]=jc[1],Hc[2]=jc[2],Hc[3]=jc[3],Hc[4]=jc[4],Hc[5]=jc[5],Hc[6]=jc[6],Hc[7]=jc[7],Hc[8]=jc[8],Hc[9]=jc[9],Hc[10]=jc[10],Hc[11]=jc[11],Hc[12]=jc[12],Hc[13]=
jc[13],Hc[14]=jc[14],Hc[15]=jc[15],Hc));yc=t.dim0C;ca.uniformMatrix4fv(x.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(pc[0]=yc[0],pc[1]=yc[1],pc[2]=yc[2],pc[3]=yc[3],pc[4]=yc[4],pc[5]=yc[5],pc[6]=yc[6],pc[7]=yc[7],pc[8]=yc[8],pc[9]=yc[9],pc[10]=yc[10],pc[11]=yc[11],pc[12]=yc[12],pc[13]=yc[13],pc[14]=yc[14],pc[15]=yc[15],pc));Bc=t.dim1C;ca.uniformMatrix4fv(oa.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(qc[0]=Bc[0],qc[1]=Bc[1],qc[2]=Bc[2],qc[3]=Bc[3],qc[4]=Bc[4],qc[5]=
Bc[5],qc[6]=Bc[6],qc[7]=Bc[7],qc[8]=Bc[8],qc[9]=Bc[9],qc[10]=Bc[10],qc[11]=Bc[11],qc[12]=Bc[12],qc[13]=Bc[13],qc[14]=Bc[14],qc[15]=Bc[15],qc));bd=t.dim0D;ca.uniformMatrix4fv(P.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:(nc[0]=bd[0],nc[1]=bd[1],nc[2]=bd[2],nc[3]=bd[3],nc[4]=bd[4],nc[5]=bd[5],nc[6]=bd[6],nc[7]=bd[7],nc[8]=bd[8],nc[9]=bd[9],nc[10]=bd[10],nc[11]=bd[11],nc[12]=bd[12],nc[13]=bd[13],nc[14]=bd[14],nc[15]=bd[15],nc));Pc=t.dim1D;ca.uniformMatrix4fv(z.location,!1,Array.isArray(Pc)||
Pc instanceof Float32Array?Pc:(gc[0]=Pc[0],gc[1]=Pc[1],gc[2]=Pc[2],gc[3]=Pc[3],gc[4]=Pc[4],gc[5]=Pc[5],gc[6]=Pc[6],gc[7]=Pc[7],gc[8]=Pc[8],gc[9]=Pc[9],gc[10]=Pc[10],gc[11]=Pc[11],gc[12]=Pc[12],gc[13]=Pc[13],gc[14]=Pc[14],gc[15]=Pc[15],gc));Qc=t.loA;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:(lb[0]=Qc[0],lb[1]=Qc[1],lb[2]=Qc[2],lb[3]=Qc[3],lb[4]=Qc[4],lb[5]=Qc[5],lb[6]=Qc[6],lb[7]=Qc[7],lb[8]=Qc[8],lb[9]=Qc[9],lb[10]=Qc[10],lb[11]=Qc[11],lb[12]=Qc[12],lb[13]=
Qc[13],lb[14]=Qc[14],lb[15]=Qc[15],lb));Sc=t.hiA;ca.uniformMatrix4fv(ea.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(Jc[0]=Sc[0],Jc[1]=Sc[1],Jc[2]=Sc[2],Jc[3]=Sc[3],Jc[4]=Sc[4],Jc[5]=Sc[5],Jc[6]=Sc[6],Jc[7]=Sc[7],Jc[8]=Sc[8],Jc[9]=Sc[9],Jc[10]=Sc[10],Jc[11]=Sc[11],Jc[12]=Sc[12],Jc[13]=Sc[13],Jc[14]=Sc[14],Jc[15]=Sc[15],Jc));Yc=t.loB;ca.uniformMatrix4fv(ya.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(Jb[0]=Yc[0],Jb[1]=Yc[1],Jb[2]=Yc[2],Jb[3]=Yc[3],Jb[4]=Yc[4],Jb[5]=
Yc[5],Jb[6]=Yc[6],Jb[7]=Yc[7],Jb[8]=Yc[8],Jb[9]=Yc[9],Jb[10]=Yc[10],Jb[11]=Yc[11],Jb[12]=Yc[12],Jb[13]=Yc[13],Jb[14]=Yc[14],Jb[15]=Yc[15],Jb));ld=t.hiB;ca.uniformMatrix4fv(U.location,!1,Array.isArray(ld)||ld instanceof Float32Array?ld:(cb[0]=ld[0],cb[1]=ld[1],cb[2]=ld[2],cb[3]=ld[3],cb[4]=ld[4],cb[5]=ld[5],cb[6]=ld[6],cb[7]=ld[7],cb[8]=ld[8],cb[9]=ld[9],cb[10]=ld[10],cb[11]=ld[11],cb[12]=ld[12],cb[13]=ld[13],cb[14]=ld[14],cb[15]=ld[15],cb));cd=t.loC;ca.uniformMatrix4fv(da.location,!1,Array.isArray(cd)||
cd instanceof Float32Array?cd:(Pb[0]=cd[0],Pb[1]=cd[1],Pb[2]=cd[2],Pb[3]=cd[3],Pb[4]=cd[4],Pb[5]=cd[5],Pb[6]=cd[6],Pb[7]=cd[7],Pb[8]=cd[8],Pb[9]=cd[9],Pb[10]=cd[10],Pb[11]=cd[11],Pb[12]=cd[12],Pb[13]=cd[13],Pb[14]=cd[14],Pb[15]=cd[15],Pb));Zc=t.hiC;ca.uniformMatrix4fv(ma.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(ab[0]=Zc[0],ab[1]=Zc[1],ab[2]=Zc[2],ab[3]=Zc[3],ab[4]=Zc[4],ab[5]=Zc[5],ab[6]=Zc[6],ab[7]=Zc[7],ab[8]=Zc[8],ab[9]=Zc[9],ab[10]=Zc[10],ab[11]=Zc[11],ab[12]=Zc[12],ab[13]=
Zc[13],ab[14]=Zc[14],ab[15]=Zc[15],ab));lc=t.loD;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(pb[0]=lc[0],pb[1]=lc[1],pb[2]=lc[2],pb[3]=lc[3],pb[4]=lc[4],pb[5]=lc[5],pb[6]=lc[6],pb[7]=lc[7],pb[8]=lc[8],pb[9]=lc[9],pb[10]=lc[10],pb[11]=lc[11],pb[12]=lc[12],pb[13]=lc[13],pb[14]=lc[14],pb[15]=lc[15],pb));dc=t.hiD;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Va[0]=dc[0],Va[1]=dc[1],Va[2]=dc[2],Va[3]=dc[3],Va[4]=dc[4],Va[5]=
dc[5],Va[6]=dc[6],Va[7]=dc[7],Va[8]=dc[8],Va[9]=dc[9],Va[10]=dc[10],Va[11]=dc[11],Va[12]=dc[12],Va[13]=dc[13],Va[14]=dc[14],Va[15]=dc[15],Va));$c=t.resolution;Uc=$c[0];zc=$c[1];f&&dd===Uc&&hd===zc||(dd=Uc,hd=zc,ca.uniform2f(ra.location,Uc,zc));ia=t.viewBoxPos;ye=ia[0];id=ia[1];f&&wd===ye&&De===id||(wd=ye,De=id,ca.uniform2f(xa.location,ye,id));Pd=t.viewBoxSize;fe=Pd[0];$d=Pd[1];f&&le===fe&&Kd===$d||(le=fe,Kd=$d,ca.uniform2f(wa.location,fe,$d));Id=t.maskHeight;f&&nd===Id||(nd=Id,ca.uniform1f(ja.location,
Id));Tc=t.drwLayer;f&&vd===Tc||(vd=Tc,ca.uniform1f(K.location,Tc));sd=t.contextColor;jd=sd[0];Bd=sd[1];qe=sd[2];te=sd[3];f&&xd===jd&&Ed===Bd&&je===qe&&ke===te||(xd=jd,Ed=Bd,je=qe,ke=te,ca.uniform4f(S.location,jd,Bd,qe,te));(ie=t.maskTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);ge=ie._texture;ca.uniform1i(na.location,ge.bind());ue=t.offset;if(ce=t.count)fd?ca.drawElements(1,ce,fd.type,ue<<(fd.type-5121>>1)):ca.drawArrays(1,ue,ce),Y.viewportWidth=ud,Y.viewportHeight=oc,ge.unbind()}V.unbind();
ta.dirty=!0;Je.setVAO(null);ta.profile=g},draw:function(a){var e,m,g,f,w,y;e=gb.next;e!==gb.cur&&(e?ca.bindFramebuffer(36160,e.framebuffer):ca.bindFramebuffer(36160,null),gb.cur=e);if(ta.dirty){e=xe[0];y=xe[1];m=xe[2];g=xe[3];if(e!==Nd[0]||y!==Nd[1]||m!==Nd[2]||g!==Nd[3])ca.colorMask(e,y,m,g),Nd[0]=e,Nd[1]=y,Nd[2]=m,Nd[3]=g;e=yd.frontFace;e!==ta.frontFace&&(ca.frontFace(e),ta.frontFace=e);e=yd.polygonOffset_enable;e!==ta.polygonOffset_enable&&(e?ca.enable(32823):ca.disable(32823),ta.polygonOffset_enable=
e);e=Od[0];y=Od[1];if(e!==qd[0]||y!==qd[1])ca.polygonOffset(e,y),qd[0]=e,qd[1]=y;e=yd.sample_alpha;e!==ta.sample_alpha&&(e?ca.enable(32926):ca.disable(32926),ta.sample_alpha=e);e=yd.sample_enable;e!==ta.sample_enable&&(e?ca.enable(32928):ca.disable(32928),ta.sample_enable=e);e=Gd[0];y=Gd[1];if(e!==Ad[0]||y!==Ad[1])ca.sampleCoverage(e,y),Ad[0]=e,Ad[1]=y;e=yd.stencil_enable;e!==ta.stencil_enable&&(e?ca.enable(2960):ca.disable(2960),ta.stencil_enable=e);e=yd.stencil_mask;e!==ta.stencil_mask&&(ca.stencilMask(e),
ta.stencil_mask=e);e=Se[0];y=Se[1];m=Se[2];if(e!==Hd[0]||y!==Hd[1]||m!==Hd[2])ca.stencilFunc(e,y,m),Hd[0]=e,Hd[1]=y,Hd[2]=m;e=Zd[0];y=Zd[1];m=Zd[2];g=Zd[3];if(e!==ee[0]||y!==ee[1]||m!==ee[2]||g!==ee[3])ca.stencilOpSeparate(e,y,m,g),ee[0]=e,ee[1]=y,ee[2]=m,ee[3]=g;e=Ce[0];y=Ce[1];m=Ce[2];g=Ce[3];if(e!==Yd[0]||y!==Yd[1]||m!==Yd[2]||g!==Yd[3])ca.stencilOpSeparate(e,y,m,g),Yd[0]=e,Yd[1]=y,Yd[2]=m,Yd[3]=g}ad.height=a.viewportHeight;ad.width=a.viewportWidth;ad.x=a.viewportX;ad.y=a.viewportY;m=ad.x|0;g=
ad.y|0;f="width"in ad?ad.width|0:Y.framebufferWidth-m;w="height"in ad?ad.height|0:Y.framebufferHeight-g;e=Y.viewportWidth;Y.viewportWidth=f;y=Y.viewportHeight;Y.viewportHeight=w;ca.viewport(m,g,f,w);md[0]=m;md[1]=g;md[2]=f;md[3]=w;ca.blendColor(0,0,0,0);H[0]=0;H[1]=0;H[2]=0;H[3]=0;ca.disable(3042);ta.blend_enable=!1;ca.blendEquationSeparate(32774,32774);pe[0]=32774;pe[1]=32774;ca.blendFuncSeparate(770,771,1,1);Be[0]=770;Be[1]=771;Be[2]=1;Be[3]=1;ca.enable(2884);ta.cull_enable=!0;ca.cullFace(1029);
ta.cull_face=1029;ca.enable(2929);ta.depth_enable=!0;ca.depthFunc(513);ta.depth_func=513;ca.depthMask(!0);ta.depth_mask=!0;ca.depthRange(0,1);he[0]=0;he[1]=1;ca.disable(3024);ta.dither=!1;ca.lineWidth(2);ta.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;m=rd.x|0;g=rd.y|0;f="width"in rd?rd.width|0:Y.framebufferWidth-m;w="height"in rd?rd.height|0:Y.framebufferHeight-g;ca.scissor(m,g,f,w);$e[0]=m;$e[1]=g;$e[2]=f;$e[3]=w;ca.enable(3089);ta.scissor_enable=
!0;m=ta.profile;ta.profile=!1;ca.useProgram(t.program);Je.setVAO(null);g=za.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==p.dtype||4!==f.size||f.buffer!==p||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,p.buffer),ca.vertexAttribPointer(g,4,p.dtype,!1,0,0),f.type=p.dtype,f.size=4,f.buffer=p,f.normalized=!1,f.offset=0,f.stride=0;g=Pa.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==h.dtype||4!==f.size||f.buffer!==h||!1!==f.normalized||0!==
f.offset||0!==f.stride)ca.bindBuffer(34962,h.buffer),ca.vertexAttribPointer(g,4,h.dtype,!1,0,0),f.type=h.dtype,f.size=4,f.buffer=h,f.normalized=!1,f.offset=0,f.stride=0;g=sa.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==d.dtype||4!==f.size||f.buffer!==d||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,d.buffer),ca.vertexAttribPointer(g,4,d.dtype,!1,0,0),f.type=d.dtype,f.size=4,f.buffer=d,f.normalized=!1,f.offset=0,f.stride=0;g=zb.location;f=ka[g];f.buffer||
ca.enableVertexAttribArray(g);if(f.type!==c.dtype||4!==f.size||f.buffer!==c||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,c.buffer),ca.vertexAttribPointer(g,4,c.dtype,!1,0,0),f.type=c.dtype,f.size=4,f.buffer=c,f.normalized=!1,f.offset=0,f.stride=0;g=Ya.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==b.dtype||4!==f.size||f.buffer!==b||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,b.buffer),ca.vertexAttribPointer(g,4,b.dtype,!1,0,0),f.type=
b.dtype,f.size=4,f.buffer=b,f.normalized=!1,f.offset=0,f.stride=0;g=A.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==l.dtype||4!==f.size||f.buffer!==l||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(g,4,l.dtype,!1,0,0),f.type=l.dtype,f.size=4,f.buffer=l,f.normalized=!1,f.offset=0,f.stride=0;g=u.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==r.dtype||4!==f.size||f.buffer!==r||!1!==f.normalized||0!==f.offset||
0!==f.stride)ca.bindBuffer(34962,r.buffer),ca.vertexAttribPointer(g,4,r.dtype,!1,0,0),f.type=r.dtype,f.size=4,f.buffer=r,f.normalized=!1,f.offset=0,f.stride=0;g=ha.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==v.dtype||4!==f.size||f.buffer!==v||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(g,4,v.dtype,!1,0,0),f.type=v.dtype,f.size=4,f.buffer=v,f.normalized=!1,f.offset=0,f.stride=0;g=ua.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);
if(f.type!==k.dtype||4!==f.size||f.buffer!==k||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,k.buffer),ca.vertexAttribPointer(g,4,k.dtype,!1,0,0),f.type=k.dtype,f.size=4,f.buffer=k,f.normalized=!1,f.offset=0,f.stride=0;g=Fa.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==F.dtype||4!==f.size||f.buffer!==F||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(g,4,F.dtype,!1,0,0),f.type=F.dtype,f.size=4,f.buffer=F,
f.normalized=!1,f.offset=0,f.stride=0;g=mb.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==I.dtype||4!==f.size||f.buffer!==I||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,I.buffer),ca.vertexAttribPointer(g,4,I.dtype,!1,0,0),f.type=I.dtype,f.size=4,f.buffer=I,f.normalized=!1,f.offset=0,f.stride=0;g=Ib.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==n.dtype||4!==f.size||f.buffer!==n||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,
n.buffer),ca.vertexAttribPointer(g,4,n.dtype,!1,0,0),f.type=n.dtype,f.size=4,f.buffer=n,f.normalized=!1,f.offset=0,f.stride=0;g=fa.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==aa.dtype||4!==f.size||f.buffer!==aa||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,aa.buffer),ca.vertexAttribPointer(g,4,aa.dtype,!1,0,0),f.type=aa.dtype,f.size=4,f.buffer=aa,f.normalized=!1,f.offset=0,f.stride=0;g=R.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==
q.dtype||4!==f.size||f.buffer!==q||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(g,4,q.dtype,!1,0,0),f.type=q.dtype,f.size=4,f.buffer=q,f.normalized=!1,f.offset=0,f.stride=0;g=va.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==J.dtype||4!==f.size||f.buffer!==J||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,J.buffer),ca.vertexAttribPointer(g,4,J.dtype,!1,0,0),f.type=J.dtype,f.size=4,f.buffer=J,f.normalized=
!1,f.offset=0,f.stride=0;g=X.location;f=ka[g];f.buffer||ca.enableVertexAttribArray(g);if(f.type!==C.dtype||4!==f.size||f.buffer!==C||!1!==f.normalized||0!==f.offset||0!==f.stride)ca.bindBuffer(34962,C.buffer),ca.vertexAttribPointer(g,4,C.dtype,!1,0,0),f.type=C.dtype,f.size=4,f.buffer=C,f.normalized=!1,f.offset=0,f.stride=0;g=a.dim0A;ca.uniformMatrix4fv(T.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Lc[0]=g[0],Lc[1]=g[1],Lc[2]=g[2],Lc[3]=g[3],Lc[4]=g[4],Lc[5]=g[5],Lc[6]=g[6],Lc[7]=g[7],
Lc[8]=g[8],Lc[9]=g[9],Lc[10]=g[10],Lc[11]=g[11],Lc[12]=g[12],Lc[13]=g[13],Lc[14]=g[14],Lc[15]=g[15],Lc));g=a.dim1A;ca.uniformMatrix4fv(O.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(od[0]=g[0],od[1]=g[1],od[2]=g[2],od[3]=g[3],od[4]=g[4],od[5]=g[5],od[6]=g[6],od[7]=g[7],od[8]=g[8],od[9]=g[9],od[10]=g[10],od[11]=g[11],od[12]=g[12],od[13]=g[13],od[14]=g[14],od[15]=g[15],od));g=a.dim0B;ca.uniformMatrix4fv(N.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Fc[0]=g[0],Fc[1]=g[1],
Fc[2]=g[2],Fc[3]=g[3],Fc[4]=g[4],Fc[5]=g[5],Fc[6]=g[6],Fc[7]=g[7],Fc[8]=g[8],Fc[9]=g[9],Fc[10]=g[10],Fc[11]=g[11],Fc[12]=g[12],Fc[13]=g[13],Fc[14]=g[14],Fc[15]=g[15],Fc));g=a.dim1B;ca.uniformMatrix4fv(pa.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(ed[0]=g[0],ed[1]=g[1],ed[2]=g[2],ed[3]=g[3],ed[4]=g[4],ed[5]=g[5],ed[6]=g[6],ed[7]=g[7],ed[8]=g[8],ed[9]=g[9],ed[10]=g[10],ed[11]=g[11],ed[12]=g[12],ed[13]=g[13],ed[14]=g[14],ed[15]=g[15],ed));g=a.dim0C;ca.uniformMatrix4fv(x.location,!1,Array.isArray(g)||
g instanceof Float32Array?g:(Oc[0]=g[0],Oc[1]=g[1],Oc[2]=g[2],Oc[3]=g[3],Oc[4]=g[4],Oc[5]=g[5],Oc[6]=g[6],Oc[7]=g[7],Oc[8]=g[8],Oc[9]=g[9],Oc[10]=g[10],Oc[11]=g[11],Oc[12]=g[12],Oc[13]=g[13],Oc[14]=g[14],Oc[15]=g[15],Oc));g=a.dim1C;ca.uniformMatrix4fv(oa.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Wc[0]=g[0],Wc[1]=g[1],Wc[2]=g[2],Wc[3]=g[3],Wc[4]=g[4],Wc[5]=g[5],Wc[6]=g[6],Wc[7]=g[7],Wc[8]=g[8],Wc[9]=g[9],Wc[10]=g[10],Wc[11]=g[11],Wc[12]=g[12],Wc[13]=g[13],Wc[14]=g[14],Wc[15]=g[15],
Wc));g=a.dim0D;ca.uniformMatrix4fv(P.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Cb[0]=g[0],Cb[1]=g[1],Cb[2]=g[2],Cb[3]=g[3],Cb[4]=g[4],Cb[5]=g[5],Cb[6]=g[6],Cb[7]=g[7],Cb[8]=g[8],Cb[9]=g[9],Cb[10]=g[10],Cb[11]=g[11],Cb[12]=g[12],Cb[13]=g[13],Cb[14]=g[14],Cb[15]=g[15],Cb));g=a.dim1D;ca.uniformMatrix4fv(z.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Gb[0]=g[0],Gb[1]=g[1],Gb[2]=g[2],Gb[3]=g[3],Gb[4]=g[4],Gb[5]=g[5],Gb[6]=g[6],Gb[7]=g[7],Gb[8]=g[8],Gb[9]=g[9],Gb[10]=g[10],
Gb[11]=g[11],Gb[12]=g[12],Gb[13]=g[13],Gb[14]=g[14],Gb[15]=g[15],Gb));g=a.loA;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(uc[0]=g[0],uc[1]=g[1],uc[2]=g[2],uc[3]=g[3],uc[4]=g[4],uc[5]=g[5],uc[6]=g[6],uc[7]=g[7],uc[8]=g[8],uc[9]=g[9],uc[10]=g[10],uc[11]=g[11],uc[12]=g[12],uc[13]=g[13],uc[14]=g[14],uc[15]=g[15],uc));g=a.hiA;ca.uniformMatrix4fv(ea.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Ab[0]=g[0],Ab[1]=g[1],Ab[2]=g[2],Ab[3]=g[3],Ab[4]=g[4],Ab[5]=
g[5],Ab[6]=g[6],Ab[7]=g[7],Ab[8]=g[8],Ab[9]=g[9],Ab[10]=g[10],Ab[11]=g[11],Ab[12]=g[12],Ab[13]=g[13],Ab[14]=g[14],Ab[15]=g[15],Ab));g=a.loB;ca.uniformMatrix4fv(ya.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(xc[0]=g[0],xc[1]=g[1],xc[2]=g[2],xc[3]=g[3],xc[4]=g[4],xc[5]=g[5],xc[6]=g[6],xc[7]=g[7],xc[8]=g[8],xc[9]=g[9],xc[10]=g[10],xc[11]=g[11],xc[12]=g[12],xc[13]=g[13],xc[14]=g[14],xc[15]=g[15],xc));g=a.hiB;ca.uniformMatrix4fv(U.location,!1,Array.isArray(g)||g instanceof Float32Array?
g:(Db[0]=g[0],Db[1]=g[1],Db[2]=g[2],Db[3]=g[3],Db[4]=g[4],Db[5]=g[5],Db[6]=g[6],Db[7]=g[7],Db[8]=g[8],Db[9]=g[9],Db[10]=g[10],Db[11]=g[11],Db[12]=g[12],Db[13]=g[13],Db[14]=g[14],Db[15]=g[15],Db));g=a.loC;ca.uniformMatrix4fv(da.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Ic[0]=g[0],Ic[1]=g[1],Ic[2]=g[2],Ic[3]=g[3],Ic[4]=g[4],Ic[5]=g[5],Ic[6]=g[6],Ic[7]=g[7],Ic[8]=g[8],Ic[9]=g[9],Ic[10]=g[10],Ic[11]=g[11],Ic[12]=g[12],Ic[13]=g[13],Ic[14]=g[14],Ic[15]=g[15],Ic));g=a.hiC;ca.uniformMatrix4fv(ma.location,
!1,Array.isArray(g)||g instanceof Float32Array?g:(mc[0]=g[0],mc[1]=g[1],mc[2]=g[2],mc[3]=g[3],mc[4]=g[4],mc[5]=g[5],mc[6]=g[6],mc[7]=g[7],mc[8]=g[8],mc[9]=g[9],mc[10]=g[10],mc[11]=g[11],mc[12]=g[12],mc[13]=g[13],mc[14]=g[14],mc[15]=g[15],mc));g=a.loD;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Gc[0]=g[0],Gc[1]=g[1],Gc[2]=g[2],Gc[3]=g[3],Gc[4]=g[4],Gc[5]=g[5],Gc[6]=g[6],Gc[7]=g[7],Gc[8]=g[8],Gc[9]=g[9],Gc[10]=g[10],Gc[11]=g[11],Gc[12]=g[12],Gc[13]=g[13],Gc[14]=
g[14],Gc[15]=g[15],Gc));g=a.hiD;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(fd[0]=g[0],fd[1]=g[1],fd[2]=g[2],fd[3]=g[3],fd[4]=g[4],fd[5]=g[5],fd[6]=g[6],fd[7]=g[7],fd[8]=g[8],fd[9]=g[9],fd[10]=g[10],fd[11]=g[11],fd[12]=g[12],fd[13]=g[13],fd[14]=g[14],fd[15]=g[15],fd));g=a.resolution;ca.uniform2f(ra.location,g[0],g[1]);g=a.viewBoxPos;ca.uniform2f(xa.location,g[0],g[1]);g=a.viewBoxSize;ca.uniform2f(wa.location,g[0],g[1]);ca.uniform1f(ja.location,a.maskHeight);ca.uniform1f(K.location,
a.drwLayer);g=a.contextColor;ca.uniform4f(S.location,g[0],g[1],g[2],g[3]);(g=a.maskTexture)&&"framebuffer"===g._reglType&&(g=g.color[0]);g=g._texture;ca.uniform1i(na.location,g.bind());ca.uniform1i(Ga.location,M.bind());(f=Sa.elements)?ca.bindBuffer(34963,f.buffer.buffer):Je.currentVAO&&(f=Ia.getElements(Je.currentVAO.elements))&&ca.bindBuffer(34963,f.buffer.buffer);w=a.offset;if(a=a.count)f?ca.drawElements(1,a,f.type,w<<(f.type-5121>>1)):ca.drawArrays(1,w,a),ta.dirty=!0,Je.setVAO(null),Y.viewportWidth=
e,Y.viewportHeight=y,ta.profile=m,g.unbind(),M.unbind()},scope:function(a,e,x){var A,u,z,t,R,ha,sa,va,Pa,Ga,K,T,U,zb,N,da,ra,fa,S,ka,O,ua,P,ea,xa,M,wa,ca,pa,ya,qa,ja,V,Ya,X,za,Fa,na,Ca,oa,ma,Ib,L,Ba,mb,Ia,gb,lb,fc,Ea,Gb,Oc,Cb,gc,pc,Ab,Db,H,Ad,Ce,nc,Je,Zd,qc,cb,ab,Va,Hc,Se,Wc,mc,pb,Fc,Yd,ed,Hd,Lc,uc,Jb,xc,pe,od,Gc,Dc,Ic,Nd,md,ee,Pb,Od,Jc,$e,Vc,jf,fd,Gd,xe,Be,qd,he,ia,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,
Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ad.height=a.viewportHeight;ad.width=a.viewportWidth;ad.x=a.viewportX;ad.y=a.viewportY;
A=ad.x|0;u=ad.y|0;z="width"in ad?ad.width|0:Y.framebufferWidth-A;t="height"in ad?ad.height|0:Y.framebufferHeight-u;R=Y.viewportWidth;Y.viewportWidth=z;ha=Y.viewportHeight;Y.viewportHeight=t;sa=Wd[0];Wd[0]=A;va=Wd[1];Wd[1]=u;Pa=Wd[2];Wd[2]=z;Ga=Wd[3];Wd[3]=t;K=Ub[0];Ub[0]=0;T=Ub[1];Ub[1]=0;U=Ub[2];Ub[2]=0;zb=Ub[3];Ub[3]=0;N=yd.blend_enable;yd.blend_enable=!1;da=Fd[0];Fd[0]=32774;ra=Fd[1];Fd[1]=32774;fa=Vd[0];Vd[0]=770;S=Vd[1];Vd[1]=771;ka=Vd[2];Vd[2]=1;O=Vd[3];Vd[3]=1;ua=yd.cull_enable;yd.cull_enable=
!0;P=yd.cull_face;yd.cull_face=1029;ea=yd.depth_enable;yd.depth_enable=!0;xa=yd.depth_func;yd.depth_func=513;M=yd.depth_mask;yd.depth_mask=!0;wa=oe[0];oe[0]=0;ca=oe[1];oe[1]=1;pa=yd.dither;yd.dither=!1;ya=yd.lineWidth;yd.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;qa=rd.x|0;ja=rd.y|0;V="width"in rd?rd.width|0:Y.framebufferWidth-qa;Ya="height"in rd?rd.height|0:Y.framebufferHeight-ja;X=ze[0];ze[0]=qa;za=ze[1];ze[1]=ja;Fa=ze[2];ze[2]=V;na=ze[3];ze[3]=
Ya;Ca=yd.scissor_enable;yd.scissor_enable=!0;oa=ta.profile;ta.profile=!1;ma=a.offset;Ib=Sa.offset;Sa.offset=ma;L=a.count;Ba=Sa.count;Sa.count=L;mb=Sa.primitive;Sa.primitive=1;Ia=a.contextColor;gb=Ha[24];Ha[24]=Ia;lb=a.dim0A;fc=Ha[3];Ha[3]=lb;Ea=a.dim0B;Gb=Ha[5];Ha[5]=Ea;Oc=a.dim0C;Cb=Ha[7];Ha[7]=Oc;gc=a.dim0D;pc=Ha[9];Ha[9]=gc;Ab=a.dim1A;Db=Ha[4];Ha[4]=Ab;H=a.dim1B;Ad=Ha[6];Ha[6]=H;Ce=a.dim1C;nc=Ha[8];Ha[8]=Ce;Je=a.dim1D;Zd=Ha[10];Ha[10]=Je;qc=a.drwLayer;cb=Ha[23];Ha[23]=qc;ab=a.hiA;Va=Ha[12];Ha[12]=
ab;Hc=a.hiB;Se=Ha[14];Ha[14]=Hc;Wc=a.hiC;mc=Ha[16];Ha[16]=Wc;pb=a.hiD;Fc=Ha[18];Ha[18]=pb;Yd=a.loA;ed=Ha[11];Ha[11]=Yd;Hd=a.loB;Lc=Ha[13];Ha[13]=Hd;uc=a.loC;Jb=Ha[15];Ha[15]=uc;xc=a.loD;pe=Ha[17];Ha[17]=xc;od=a.maskHeight;Gc=Ha[22];Ha[22]=od;Dc=a.maskTexture;Ic=Ha[25];Ha[25]=Dc;Nd=Ha[26];Ha[26]=Aa;md=a.resolution;ee=Ha[19];Ha[19]=md;Pb=a.viewBoxPos;Od=Ha[20];Ha[20]=Pb;Jc=a.viewBoxSize;$e=Ha[21];Ha[21]=Jc;Vc=f.buffer;f.buffer=C;jf=f.divisor;f.divisor=0;fd=f.normalized;f.normalized=!1;Gd=f.offset;f.offset=
0;xe=f.size;f.size=0;Be=f.state;f.state=1;qd=f.stride;f.stride=0;he=f.type;f.type=C.dtype;ia=f.w;f.w=0;Kd=f.x;f.x=0;Id=f.y;f.y=0;nd=f.z;f.z=0;Tc=w.buffer;w.buffer=p;vd=w.divisor;w.divisor=0;sd=w.normalized;w.normalized=!1;jd=w.offset;w.offset=0;xd=w.size;w.size=0;Bd=w.state;w.state=1;Ed=w.stride;w.stride=0;qe=w.type;w.type=p.dtype;je=w.w;w.w=0;te=w.x;w.x=0;ke=w.y;w.y=0;ie=w.z;w.z=0;ge=ba.buffer;ba.buffer=h;ue=ba.divisor;ba.divisor=0;ce=ba.normalized;ba.normalized=!1;me=ba.offset;ba.offset=0;Nc=ba.size;
ba.size=0;gd=ba.state;ba.state=1;ve=ba.stride;ba.stride=0;re=ba.type;ba.type=h.dtype;Ld=ba.w;ba.w=0;Qd=ba.x;ba.x=0;Rd=ba.y;ba.y=0;Sd=ba.z;ba.z=0;ne=E.buffer;E.buffer=d;Ae=E.divisor;E.divisor=0;Ee=E.normalized;E.normalized=!1;se=E.offset;E.offset=0;Te=E.size;E.size=0;Ue=E.state;E.state=1;Pe=E.stride;E.stride=0;we=E.type;E.type=d.dtype;He=E.w;E.w=0;Ke=E.x;E.x=0;Le=E.y;E.y=0;Me=E.z;E.z=0;Ie=W.buffer;W.buffer=c;Md=W.divisor;W.divisor=0;Xd=W.normalized;W.normalized=!1;be=W.offset;W.offset=0;de=W.size;
W.size=0;Ne=W.state;W.state=1;Jd=W.stride;W.stride=0;Td=W.type;W.type=c.dtype;Fe=W.w;W.w=0;Oe=W.x;W.x=0;cf=W.y;W.y=0;bf=W.z;W.z=0;Ve=D.buffer;D.buffer=b;Qe=D.divisor;D.divisor=0;af=D.normalized;D.normalized=!1;Ze=D.offset;D.offset=0;We=D.size;D.size=0;Xe=D.state;D.state=1;Ud=D.stride;D.stride=0;ae=D.type;D.type=b.dtype;Ye=D.w;D.w=0;kf=D.x;D.x=0;of=D.y;D.y=0;ff=D.z;D.z=0;lf=y.buffer;y.buffer=l;mf=y.divisor;y.divisor=0;nf=y.normalized;y.normalized=!1;sf=y.offset;y.offset=0;pf=y.size;y.size=0;tf=y.state;
y.state=1;Cf=y.stride;y.stride=0;Df=y.type;y.type=l.dtype;Re=y.w;y.w=0;Ge=y.x;y.x=0;qf=y.y;y.y=0;rf=y.z;y.z=0;Ef=Da.buffer;Da.buffer=r;Hf=Da.divisor;Da.divisor=0;Bf=Da.normalized;Da.normalized=!1;Ff=Da.offset;Da.offset=0;Gf=Da.size;Da.size=0;xf=Da.state;Da.state=1;yf=Da.stride;Da.stride=0;wf=Da.type;Da.type=r.dtype;zf=Da.w;Da.w=0;Af=Da.x;Da.x=0;Jf=Da.y;Da.y=0;Kf=Da.z;Da.z=0;Lf=G.buffer;G.buffer=v;Mf=G.divisor;G.divisor=0;uf=G.normalized;G.normalized=!1;Rf=G.offset;G.offset=0;If=G.size;G.size=0;vf=
G.state;G.state=1;dg=G.stride;G.stride=0;Sf=G.type;G.type=v.dtype;Tf=G.w;G.w=0;qg=G.x;G.x=0;gf=G.y;G.y=0;df=G.z;G.z=0;Nf=B.buffer;B.buffer=k;Of=B.divisor;B.divisor=0;eg=B.normalized;B.normalized=!1;fg=B.offset;B.offset=0;gg=B.size;B.size=0;hg=B.state;B.state=1;ig=B.stride;B.stride=0;Wf=B.type;B.type=k.dtype;Uf=B.w;B.w=0;Xf=B.x;B.x=0;Yf=B.y;B.y=0;Zf=B.z;B.z=0;jg=m.buffer;m.buffer=F;rg=m.divisor;m.divisor=0;sg=m.normalized;m.normalized=!1;tg=m.offset;m.offset=0;ug=m.size;m.size=0;vg=m.state;m.state=
1;wg=m.stride;m.stride=0;xg=m.type;m.type=F.dtype;yg=m.w;m.w=0;zg=m.x;m.x=0;Ag=m.y;m.y=0;Bg=m.z;m.z=0;hf=Z.buffer;Z.buffer=I;ef=Z.divisor;Z.divisor=0;Pf=Z.normalized;Z.normalized=!1;Qf=Z.offset;Z.offset=0;kg=Z.size;Z.size=0;lg=Z.state;Z.state=1;mg=Z.stride;Z.stride=0;ng=Z.type;Z.type=I.dtype;og=Z.w;Z.w=0;$f=Z.x;Z.x=0;Vf=Z.y;Z.y=0;ag=Z.z;Z.z=0;bg=g.buffer;g.buffer=n;cg=g.divisor;g.divisor=0;pg=g.normalized;g.normalized=!1;Cg=g.offset;g.offset=0;Dg=g.size;g.size=0;Eg=g.state;g.state=1;Fg=g.stride;g.stride=
0;Gg=g.type;g.type=n.dtype;Hg=g.w;g.w=0;Ig=g.x;g.x=0;Jg=g.y;g.y=0;Kg=g.z;g.z=0;Lg=la.buffer;la.buffer=aa;Mg=la.divisor;la.divisor=0;Ng=la.normalized;la.normalized=!1;Og=la.offset;la.offset=0;Pg=la.size;la.size=0;Qg=la.state;la.state=1;Rg=la.stride;la.stride=0;Sg=la.type;la.type=aa.dtype;Tg=la.w;la.w=0;Ug=la.x;la.x=0;Vg=la.y;la.y=0;Wg=la.z;la.z=0;Xg=Q.buffer;Q.buffer=q;Yg=Q.divisor;Q.divisor=0;Zg=Q.normalized;Q.normalized=!1;$g=Q.offset;Q.offset=0;ah=Q.size;Q.size=0;bh=Q.state;Q.state=1;ch=Q.stride;
Q.stride=0;dh=Q.type;Q.type=q.dtype;eh=Q.w;Q.w=0;fh=Q.x;Q.x=0;gh=Q.y;Q.y=0;hh=Q.z;Q.z=0;ih=ga.buffer;ga.buffer=J;jh=ga.divisor;ga.divisor=0;kh=ga.normalized;ga.normalized=!1;lh=ga.offset;ga.offset=0;mh=ga.size;ga.size=0;nh=ga.state;ga.state=1;oh=ga.stride;ga.stride=0;ph=ga.type;ga.type=J.dtype;qh=ga.w;ga.w=0;rh=ga.x;ga.x=0;sh=ga.y;ga.y=0;th=ga.z;ga.z=0;uh=bc.vert;bc.vert=2;vh=bc.frag;bc.frag=1;ta.dirty=!0;e(Y,a,x);Y.viewportWidth=R;Y.viewportHeight=ha;Wd[0]=sa;Wd[1]=va;Wd[2]=Pa;Wd[3]=Ga;Ub[0]=K;Ub[1]=
T;Ub[2]=U;Ub[3]=zb;yd.blend_enable=N;Fd[0]=da;Fd[1]=ra;Vd[0]=fa;Vd[1]=S;Vd[2]=ka;Vd[3]=O;yd.cull_enable=ua;yd.cull_face=P;yd.depth_enable=ea;yd.depth_func=xa;yd.depth_mask=M;oe[0]=wa;oe[1]=ca;yd.dither=pa;yd.lineWidth=ya;ze[0]=X;ze[1]=za;ze[2]=Fa;ze[3]=na;yd.scissor_enable=Ca;ta.profile=oa;Sa.offset=Ib;Sa.count=Ba;Sa.primitive=mb;Ha[24]=gb;Ha[3]=fc;Ha[5]=Gb;Ha[7]=Cb;Ha[9]=pc;Ha[4]=Db;Ha[6]=Ad;Ha[8]=nc;Ha[10]=Zd;Ha[23]=cb;Ha[12]=Va;Ha[14]=Se;Ha[16]=mc;Ha[18]=Fc;Ha[11]=ed;Ha[13]=Lc;Ha[15]=Jb;Ha[17]=
pe;Ha[22]=Gc;Ha[25]=Ic;Ha[26]=Nd;Ha[19]=ee;Ha[20]=Od;Ha[21]=$e;f.buffer=Vc;f.divisor=jf;f.normalized=fd;f.offset=Gd;f.size=xe;f.state=Be;f.stride=qd;f.type=he;f.w=ia;f.x=Kd;f.y=Id;f.z=nd;w.buffer=Tc;w.divisor=vd;w.normalized=sd;w.offset=jd;w.size=xd;w.state=Bd;w.stride=Ed;w.type=qe;w.w=je;w.x=te;w.y=ke;w.z=ie;ba.buffer=ge;ba.divisor=ue;ba.normalized=ce;ba.offset=me;ba.size=Nc;ba.state=gd;ba.stride=ve;ba.type=re;ba.w=Ld;ba.x=Qd;ba.y=Rd;ba.z=Sd;E.buffer=ne;E.divisor=Ae;E.normalized=Ee;E.offset=se;E.size=
Te;E.state=Ue;E.stride=Pe;E.type=we;E.w=He;E.x=Ke;E.y=Le;E.z=Me;W.buffer=Ie;W.divisor=Md;W.normalized=Xd;W.offset=be;W.size=de;W.state=Ne;W.stride=Jd;W.type=Td;W.w=Fe;W.x=Oe;W.y=cf;W.z=bf;D.buffer=Ve;D.divisor=Qe;D.normalized=af;D.offset=Ze;D.size=We;D.state=Xe;D.stride=Ud;D.type=ae;D.w=Ye;D.x=kf;D.y=of;D.z=ff;y.buffer=lf;y.divisor=mf;y.normalized=nf;y.offset=sf;y.size=pf;y.state=tf;y.stride=Cf;y.type=Df;y.w=Re;y.x=Ge;y.y=qf;y.z=rf;Da.buffer=Ef;Da.divisor=Hf;Da.normalized=Bf;Da.offset=Ff;Da.size=
Gf;Da.state=xf;Da.stride=yf;Da.type=wf;Da.w=zf;Da.x=Af;Da.y=Jf;Da.z=Kf;G.buffer=Lf;G.divisor=Mf;G.normalized=uf;G.offset=Rf;G.size=If;G.state=vf;G.stride=dg;G.type=Sf;G.w=Tf;G.x=qg;G.y=gf;G.z=df;B.buffer=Nf;B.divisor=Of;B.normalized=eg;B.offset=fg;B.size=gg;B.state=hg;B.stride=ig;B.type=Wf;B.w=Uf;B.x=Xf;B.y=Yf;B.z=Zf;m.buffer=jg;m.divisor=rg;m.normalized=sg;m.offset=tg;m.size=ug;m.state=vg;m.stride=wg;m.type=xg;m.w=yg;m.x=zg;m.y=Ag;m.z=Bg;Z.buffer=hf;Z.divisor=ef;Z.normalized=Pf;Z.offset=Qf;Z.size=
kg;Z.state=lg;Z.stride=mg;Z.type=ng;Z.w=og;Z.x=$f;Z.y=Vf;Z.z=ag;g.buffer=bg;g.divisor=cg;g.normalized=pg;g.offset=Cg;g.size=Dg;g.state=Eg;g.stride=Fg;g.type=Gg;g.w=Hg;g.x=Ig;g.y=Jg;g.z=Kg;la.buffer=Lg;la.divisor=Mg;la.normalized=Ng;la.offset=Og;la.size=Pg;la.state=Qg;la.stride=Rg;la.type=Sg;la.w=Tg;la.x=Ug;la.y=Vg;la.z=Wg;Q.buffer=Xg;Q.divisor=Yg;Q.normalized=Zg;Q.offset=$g;Q.size=ah;Q.state=bh;Q.stride=ch;Q.type=dh;Q.w=eh;Q.x=fh;Q.y=gh;Q.z=hh;ga.buffer=ih;ga.divisor=jh;ga.normalized=kh;ga.offset=
lh;ga.size=mh;ga.state=nh;ga.stride=oh;ga.type=ph;ga.w=qh;ga.x=rh;ga.y=sh;ga.z=th;bc.vert=uh;bc.frag=vh;ta.dirty=!0}}},$1:function(a,e){var t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,Da,G,B,m;t=a.attributes;p=a.current;h=a.framebuffer;d=a.gl;c=a.next;b=a.vao;l=c.blend_color;r=p.blend_color;v=c.blend_equation;k=p.blend_equation;F=c.blend_func;I=p.blend_func;n=c.colorMask;aa=p.colorMask;q=c.depth_range;J=p.depth_range;C=c.polygonOffset_offset;M=p.polygonOffset_offset;Aa=c.sample_coverage;
f=p.sample_coverage;w=c.scissor_box;ba=p.scissor_box;E=c.stencil_func;W=p.stencil_func;D=c.stencil_opBack;y=p.stencil_opBack;Da=c.stencil_opFront;G=p.stencil_opFront;B=c.viewport;m=p.viewport;return{poll:function(){var a,b,e,t,ga,L,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa;p.dirty=!1;b=c.blend_enable;e=c.cull_enable;t=c.depth_enable;ga=c.dither;L=c.polygonOffset_enable;V=c.sample_alpha;X=c.sample_enable;S=c.scissor_enable;T=c.stencil_enable;N=c.cull_face;x=p.cull_face;P=c.depth_func;O=p.depth_func;pa=
c.depth_mask;oa=p.depth_mask;z=c.frontFace;K=p.frontFace;ea=c.lineWidth;U=p.lineWidth;ma=c.stencil_mask;qa=p.stencil_mask;a=h.next;a!==h.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null),h.cur=a);b!==p.blend_enable&&(b?d.enable(3042):d.disable(3042),p.blend_enable=b);e!==p.cull_enable&&(e?d.enable(2884):d.disable(2884),p.cull_enable=e);t!==p.depth_enable&&(t?d.enable(2929):d.disable(2929),p.depth_enable=t);ga!==p.dither&&(ga?d.enable(3024):d.disable(3024),p.dither=ga);L!==
p.polygonOffset_enable&&(L?d.enable(32823):d.disable(32823),p.polygonOffset_enable=L);V!==p.sample_alpha&&(V?d.enable(32926):d.disable(32926),p.sample_alpha=V);X!==p.sample_enable&&(X?d.enable(32928):d.disable(32928),p.sample_enable=X);S!==p.scissor_enable&&(S?d.enable(3089):d.disable(3089),p.scissor_enable=S);T!==p.stencil_enable&&(T?d.enable(2960):d.disable(2960),p.stencil_enable=T);if(l[0]!==r[0]||l[1]!==r[1]||l[2]!==r[2]||l[3]!==r[3])d.blendColor(l[0],l[1],l[2],l[3]),r[0]=l[0],r[1]=l[1],r[2]=
l[2],r[3]=l[3];if(v[0]!==k[0]||v[1]!==k[1])d.blendEquationSeparate(v[0],v[1]),k[0]=v[0],k[1]=v[1];if(F[0]!==I[0]||F[1]!==I[1]||F[2]!==I[2]||F[3]!==I[3])d.blendFuncSeparate(F[0],F[1],F[2],F[3]),I[0]=F[0],I[1]=F[1],I[2]=F[2],I[3]=F[3];if(n[0]!==aa[0]||n[1]!==aa[1]||n[2]!==aa[2]||n[3]!==aa[3])d.colorMask(n[0],n[1],n[2],n[3]),aa[0]=n[0],aa[1]=n[1],aa[2]=n[2],aa[3]=n[3];N!==x&&(d.cullFace(N),p.cull_face=N);P!==O&&(d.depthFunc(P),p.depth_func=P);pa!==oa&&(d.depthMask(pa),p.depth_mask=pa);if(q[0]!==J[0]||
q[1]!==J[1])d.depthRange(q[0],q[1]),J[0]=q[0],J[1]=q[1];z!==K&&(d.frontFace(z),p.frontFace=z);ea!==U&&(d.lineWidth(ea),p.lineWidth=ea);if(C[0]!==M[0]||C[1]!==M[1])d.polygonOffset(C[0],C[1]),M[0]=C[0],M[1]=C[1];if(Aa[0]!==f[0]||Aa[1]!==f[1])d.sampleCoverage(Aa[0],Aa[1]),f[0]=Aa[0],f[1]=Aa[1];if(w[0]!==ba[0]||w[1]!==ba[1]||w[2]!==ba[2]||w[3]!==ba[3])d.scissor(w[0],w[1],w[2],w[3]),ba[0]=w[0],ba[1]=w[1],ba[2]=w[2],ba[3]=w[3];if(E[0]!==W[0]||E[1]!==W[1]||E[2]!==W[2])d.stencilFunc(E[0],E[1],E[2]),W[0]=
E[0],W[1]=E[1],W[2]=E[2];ma!==qa&&(d.stencilMask(ma),p.stencil_mask=ma);if(D[0]!==y[0]||D[1]!==y[1]||D[2]!==y[2]||D[3]!==y[3])d.stencilOpSeparate(D[0],D[1],D[2],D[3]),y[0]=D[0],y[1]=D[1],y[2]=D[2],y[3]=D[3];if(Da[0]!==G[0]||Da[1]!==G[1]||Da[2]!==G[2]||Da[3]!==G[3])d.stencilOpSeparate(Da[0],Da[1],Da[2],Da[3]),G[0]=Da[0],G[1]=Da[1],G[2]=Da[2],G[3]=Da[3];if(B[0]!==m[0]||B[1]!==m[1]||B[2]!==m[2]||B[3]!==m[3])d.viewport(B[0],B[1],B[2],B[3]),m[0]=B[0],m[1]=B[1],m[2]=B[2],m[3]=B[3]},refresh:function(){var a,
g,la,Q,ga,L,V,X,S,T,N,x,P,O,pa,oa;p.dirty=!1;g=c.blend_enable;la=c.cull_enable;Q=c.depth_enable;ga=c.dither;L=c.polygonOffset_enable;V=c.sample_alpha;X=c.sample_enable;S=c.scissor_enable;T=c.stencil_enable;N=c.cull_face;x=c.depth_func;P=c.depth_mask;O=c.frontFace;pa=c.lineWidth;oa=c.stencil_mask;(a=h.next)?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null);h.cur=a;a=t[0];a.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(0,a.size,a.type,
a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(0,a.divisor);a=t[1];a.buffer?(d.enableVertexAttribArray(1),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(1,a.divisor);a=t[2];a.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,a.buffer.buffer),
d.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(2,a.divisor);a=t[3];a.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(3,a.divisor);a=t[4];a.buffer?(d.enableVertexAttribArray(4),
d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(4,a.divisor);a=t[5];a.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(5,a.divisor);
a=t[6];a.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(6),d.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(6,a.divisor);a=t[7];a.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=
null);e.vertexAttribDivisorANGLE(7,a.divisor);a=t[8];a.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(8,a.divisor);a=t[9];a.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(9),
d.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(9,a.divisor);a=t[10];a.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(10,a.divisor);a=t[11];a.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(11,a.size,a.type,a.normalized,
a.stride,a.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(11,a.divisor);a=t[12];a.buffer?(d.enableVertexAttribArray(12),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(12,a.divisor);a=t[13];a.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,a.buffer.buffer),
d.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(13,a.divisor);a=t[14];a.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(14,a.divisor);a=t[15];a.buffer?(d.enableVertexAttribArray(15),
d.bindBuffer(34962,a.buffer.buffer),d.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);e.vertexAttribDivisorANGLE(15,a.divisor);b.currentVAO=null;b.setVAO(b.targetVAO);g?d.enable(3042):d.disable(3042);p.blend_enable=g;la?d.enable(2884):d.disable(2884);p.cull_enable=la;Q?d.enable(2929):d.disable(2929);p.depth_enable=Q;ga?d.enable(3024):d.disable(3024);p.dither=ga;L?d.enable(32823):d.disable(32823);
p.polygonOffset_enable=L;V?d.enable(32926):d.disable(32926);p.sample_alpha=V;X?d.enable(32928):d.disable(32928);p.sample_enable=X;S?d.enable(3089):d.disable(3089);p.scissor_enable=S;T?d.enable(2960):d.disable(2960);p.stencil_enable=T;d.blendColor(l[0],l[1],l[2],l[3]);r[0]=l[0];r[1]=l[1];r[2]=l[2];r[3]=l[3];d.blendEquationSeparate(v[0],v[1]);k[0]=v[0];k[1]=v[1];d.blendFuncSeparate(F[0],F[1],F[2],F[3]);I[0]=F[0];I[1]=F[1];I[2]=F[2];I[3]=F[3];d.colorMask(n[0],n[1],n[2],n[3]);aa[0]=n[0];aa[1]=n[1];aa[2]=
n[2];aa[3]=n[3];d.cullFace(N);p.cull_face=N;d.depthFunc(x);p.depth_func=x;d.depthMask(P);p.depth_mask=P;d.depthRange(q[0],q[1]);J[0]=q[0];J[1]=q[1];d.frontFace(O);p.frontFace=O;d.lineWidth(pa);p.lineWidth=pa;d.polygonOffset(C[0],C[1]);M[0]=C[0];M[1]=C[1];d.sampleCoverage(Aa[0],Aa[1]);f[0]=Aa[0];f[1]=Aa[1];d.scissor(w[0],w[1],w[2],w[3]);ba[0]=w[0];ba[1]=w[1];ba[2]=w[2];ba[3]=w[3];d.stencilFunc(E[0],E[1],E[2]);W[0]=E[0];W[1]=E[1];W[2]=E[2];d.stencilMask(oa);p.stencil_mask=oa;d.stencilOpSeparate(D[0],
D[1],D[2],D[3]);y[0]=D[0];y[1]=D[1];y[2]=D[2];y[3]=D[3];d.stencilOpSeparate(Da[0],Da[1],Da[2],Da[3]);G[0]=Da[0];G[1]=Da[1];G[2]=Da[2];G[3]=Da[3];d.viewport(B[0],B[1],B[2],B[3]);m[0]=B[0];m[1]=B[1];m[2]=B[2];m[3]=B[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,L,G,B,m,Z,g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa){var z,K,ea,U,ma,qa,
Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa,ka,Y,ta,Sa,Ia,gb,ca,yd,bc,Ha,H,Ub;z=a.attributes;K=a.buffer;ea=a.context;U=a.current;ma=a.draw;qa=a.elements;Ba=a.extensions;ya=a.framebuffer;da=a.gl;Ca=a.isBufferArgs;ja=a.next;na=a.shader;za=a.uniforms;Pa=a.vao;sa=ja.blend_color;zb=U.blend_color;Ya=ja.blend_equation;A=U.blend_equation;u=ja.blend_func;ha=U.blend_func;ua=ja.colorMask;Fa=U.colorMask;mb=ja.depth_range;Ib=U.depth_range;fa=ja.polygonOffset_offset;R=U.polygonOffset_offset;
va=ja.sample_coverage;Ga=U.sample_coverage;ra=ja.scissor_box;xa=U.scissor_box;wa=ja.stencil_func;ka=U.stencil_func;Y=ja.stencil_opBack;ta=U.stencil_opBack;Sa=ja.stencil_opFront;Ia=U.stencil_opFront;gb=ja.viewport;ca=U.viewport;yd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};bc={};bc.buffer=t;bc.divisor=1;Ha={};Ha.buffer=p;Ha.divisor=1;H={};H.buffer=h;H.divisor=1;Ub={};Ub.buffer=d;Ub.divisor=1;return{batch:function(a,c){var b,d,f,p,u,h;b=ya.next;b!==
ya.cur&&(b?da.bindFramebuffer(36160,b.framebuffer):da.bindFramebuffer(36160,null),ya.cur=b);if(U.dirty){var t,l,w,r,sa,v,q,D,ra,n,C,E,M,J,aa,Ya,ba,W,za,Aa,na,gb,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd;t=ja.dither;t!==U.dither&&(t?da.enable(3024):da.disable(3024),U.dither=t);l=ja.depth_func;l!==U.depth_func&&(da.depthFunc(l),U.depth_func=l);w=mb[0];r=mb[1];if(w!==Ib[0]||r!==Ib[1])da.depthRange(w,r),Ib[0]=w,Ib[1]=r;sa=ja.depth_mask;sa!==U.depth_mask&&(da.depthMask(sa),U.depth_mask=sa);v=ua[0];q=ua[1];D=ua[2];
ra=ua[3];if(v!==Fa[0]||q!==Fa[1]||D!==Fa[2]||ra!==Fa[3])da.colorMask(v,q,D,ra),Fa[0]=v,Fa[1]=q,Fa[2]=D,Fa[3]=ra;n=ja.cull_enable;n!==U.cull_enable&&(n?da.enable(2884):da.disable(2884),U.cull_enable=n);C=ja.cull_face;C!==U.cull_face&&(da.cullFace(C),U.cull_face=C);E=ja.frontFace;E!==U.frontFace&&(da.frontFace(E),U.frontFace=E);M=ja.lineWidth;M!==U.lineWidth&&(da.lineWidth(M),U.lineWidth=M);J=ja.polygonOffset_enable;J!==U.polygonOffset_enable&&(J?da.enable(32823):da.disable(32823),U.polygonOffset_enable=
J);aa=fa[0];Ya=fa[1];if(aa!==R[0]||Ya!==R[1])da.polygonOffset(aa,Ya),R[0]=aa,R[1]=Ya;ba=ja.sample_alpha;ba!==U.sample_alpha&&(ba?da.enable(32926):da.disable(32926),U.sample_alpha=ba);W=ja.sample_enable;W!==U.sample_enable&&(W?da.enable(32928):da.disable(32928),U.sample_enable=W);za=va[0];Aa=va[1];if(za!==Ga[0]||Aa!==Ga[1])da.sampleCoverage(za,Aa),Ga[0]=za,Ga[1]=Aa;na=ja.stencil_enable;na!==U.stencil_enable&&(na?da.enable(2960):da.disable(2960),U.stencil_enable=na);gb=ja.stencil_mask;gb!==U.stencil_mask&&
(da.stencilMask(gb),U.stencil_mask=gb);Wc=wa[0];Cb=wa[1];Gb=wa[2];if(Wc!==ka[0]||Cb!==ka[1]||Gb!==ka[2])da.stencilFunc(Wc,Cb,Gb),ka[0]=Wc,ka[1]=Cb,ka[2]=Gb;uc=Sa[0];Ab=Sa[1];xc=Sa[2];Db=Sa[3];if(uc!==Ia[0]||Ab!==Ia[1]||xc!==Ia[2]||Db!==Ia[3])da.stencilOpSeparate(uc,Ab,xc,Db),Ia[0]=uc,Ia[1]=Ab,Ia[2]=xc,Ia[3]=Db;Ic=Y[0];mc=Y[1];Gc=Y[2];fd=Y[3];if(Ic!==ta[0]||mc!==ta[1]||Gc!==ta[2]||fd!==ta[3])da.stencilOpSeparate(Ic,mc,Gc,fd),ta[0]=Ic,ta[1]=mc,ta[2]=Gc,ta[3]=fd}da.blendColor(0,0,0,0);zb[0]=0;zb[1]=
0;zb[2]=0;zb[3]=0;da.enable(3042);U.blend_enable=!0;da.blendEquationSeparate(32774,32774);A[0]=32774;A[1]=32774;da.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;da.disable(2929);U.depth_enable=!1;da.enable(3089);U.scissor_enable=!0;if(d=U.profile)f=performance.now(),e.count+=c;da.useProgram(y.program);p=Ba.angle_instanced_arrays;var Vc,Dc,fc,Hc,pc,qc,nc,gc;Pa.setVAO(null);Vc=ga.location;Dc=z[Vc];Dc.buffer||da.enableVertexAttribArray(Vc);if(5126!==Dc.type||2!==Dc.size||Dc.buffer!==
k||!1!==Dc.normalized||0!==Dc.offset||24!==Dc.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(Vc,2,5126,!1,24,0),Dc.type=5126,Dc.size=2,Dc.buffer=k,Dc.normalized=!1,Dc.offset=0,Dc.stride=24;0!==Dc.divisor&&(p.vertexAttribDivisorANGLE(Vc,0),Dc.divisor=0);fc=V.location;Hc=z[fc];Hc.buffer||da.enableVertexAttribArray(fc);if(5126!==Hc.type||2!==Hc.size||Hc.buffer!==F||!1!==Hc.normalized||8!==Hc.offset||24!==Hc.stride)da.bindBuffer(34962,F.buffer),da.vertexAttribPointer(fc,2,5126,!1,24,8),Hc.type=
5126,Hc.size=2,Hc.buffer=F,Hc.normalized=!1,Hc.offset=8,Hc.stride=24;0!==Hc.divisor&&(p.vertexAttribDivisorANGLE(fc,0),Hc.divisor=0);pc=g.location;qc=z[pc];qc.buffer||da.enableVertexAttribArray(pc);if(5126!==qc.type||2!==qc.size||qc.buffer!==I||!1!==qc.normalized||16!==qc.offset||24!==qc.stride)da.bindBuffer(34962,I.buffer),da.vertexAttribPointer(pc,2,5126,!1,24,16),qc.type=5126,qc.size=2,qc.buffer=I,qc.normalized=!1,qc.offset=16,qc.stride=24;0!==qc.divisor&&(p.vertexAttribDivisorANGLE(pc,0),qc.divisor=
0);(nc=ma.elements)?da.bindBuffer(34963,nc.buffer.buffer):Pa.currentVAO&&(nc=qa.getElements(Pa.currentVAO.elements))&&da.bindBuffer(34963,nc.buffer.buffer);gc=ma.offset;for(u=0;u<c;++u){h=a[u];var lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,ia,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,
hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc;lb=h.viewport;Jc=lb.x|0;Jb=lb.y|0;cb="width"in lb?lb.width|0:ea.framebufferWidth-Jc;Pb="height"in lb?lb.height|0:ea.framebufferHeight-Jb;ab=ea.viewportWidth;ea.viewportWidth=cb;pb=ea.viewportHeight;ea.viewportHeight=Pb;da.viewport(Jc,Jb,cb,Pb);ca[0]=Jc;ca[1]=Jb;ca[2]=cb;ca[3]=Pb;Va=h.viewport;td=Va.x|0;Kb=Va.y|0;Lb="width"in Va?Va.width|0:ea.framebufferWidth-td;rc="height"in Va?Va.height|0:ea.framebufferHeight-Kb;da.scissor(td,Kb,Lb,rc);xa[0]=td;xa[1]=Kb;
xa[2]=Lb;xa[3]=rc;Qb=L.call(this,ea,h,u);H.offset=Qb;jb=!1;Hb=null;Eb=0;yb=!1;$b=hb=0;Rb=1;sb=0;Ua=5126;ib=cc=qb=Wb=0;Ca(H)?(jb=!0,Hb=K.createStream(34962,H),Ua=Hb.dtype):(Hb=K.getBuffer(H))?Ua=Hb.dtype:"constant"in H?(Rb=2,"number"===typeof H.constant?(qb=H.constant,cc=ib=Wb=0):(qb=0<H.constant.length?H.constant[0]:0,cc=1<H.constant.length?H.constant[1]:0,ib=2<H.constant.length?H.constant[2]:0,Wb=3<H.constant.length?H.constant[3]:0)):(Hb=Ca(H.buffer)?K.createStream(34962,H.buffer):K.getBuffer(H.buffer),
Ua="type"in H?yd[H.type]:Hb.dtype,yb=!!H.normalized,$b=H.size|0,hb=H.offset|0,sb=H.stride|0,Eb=H.divisor|0);rb=T.location;Ja=z[rb];if(1===Rb){Ja.buffer||da.enableVertexAttribArray(rb);tb=$b||2;if(Ja.type!==Ua||Ja.size!==tb||Ja.buffer!==Hb||Ja.normalized!==yb||Ja.offset!==hb||Ja.stride!==sb)da.bindBuffer(34962,Hb.buffer),da.vertexAttribPointer(rb,tb,Ua,yb,sb,hb),Ja.type=Ua,Ja.size=tb,Ja.buffer=Hb,Ja.normalized=yb,Ja.offset=hb,Ja.stride=sb;Ja.divisor!==Eb&&(p.vertexAttribDivisorANGLE(rb,Eb),Ja.divisor=
Eb)}else if(Ja.buffer&&(da.disableVertexAttribArray(rb),Ja.buffer=null),Ja.x!==qb||Ja.y!==cc||Ja.z!==ib||Ja.w!==Wb)da.vertexAttrib4f(rb,qb,cc,ib,Wb),Ja.x=qb,Ja.y=cc,Ja.z=ib,Ja.w=Wb;Ka=G.call(this,ea,h,u);Ub.offset=Ka;eb=!1;fb=null;La=0;kb=!1;vb=Wa=0;ub=1;Oa=0;Cc=5126;Ma=Fb=Mb=Ra=0;Ca(Ub)?(eb=!0,fb=K.createStream(34962,Ub),Cc=fb.dtype):(fb=K.getBuffer(Ub))?Cc=fb.dtype:"constant"in Ub?(ub=2,"number"===typeof Ub.constant?(Mb=Ub.constant,Fb=Ma=Ra=0):(Mb=0<Ub.constant.length?Ub.constant[0]:0,Fb=1<Ub.constant.length?
Ub.constant[1]:0,Ma=2<Ub.constant.length?Ub.constant[2]:0,Ra=3<Ub.constant.length?Ub.constant[3]:0)):(fb=Ca(Ub.buffer)?K.createStream(34962,Ub.buffer):K.getBuffer(Ub.buffer),Cc="type"in Ub?yd[Ub.type]:fb.dtype,kb=!!Ub.normalized,vb=Ub.size|0,Wa=Ub.offset|0,Oa=Ub.stride|0,La=Ub.divisor|0);Cd=N.location;Za=z[Cd];if(1===ub){Za.buffer||da.enableVertexAttribArray(Cd);Nb=vb||2;if(Za.type!==Cc||Za.size!==Nb||Za.buffer!==fb||Za.normalized!==kb||Za.offset!==Wa||Za.stride!==Oa)da.bindBuffer(34962,fb.buffer),
da.vertexAttribPointer(Cd,Nb,Cc,kb,Oa,Wa),Za.type=Cc,Za.size=Nb,Za.buffer=fb,Za.normalized=kb,Za.offset=Wa,Za.stride=Oa;Za.divisor!==La&&(p.vertexAttribDivisorANGLE(Cd,La),Za.divisor=La)}else if(Za.buffer&&(da.disableVertexAttribArray(Cd),Za.buffer=null),Za.x!==Mb||Za.y!==Fb||Za.z!==Ma||Za.w!==Ra)da.vertexAttrib4f(Cd,Mb,Fb,Ma,Ra),Za.x=Mb,Za.y=Fb,Za.z=Ma,Za.w=Ra;Ob=B.call(this,ea,h,u);Ha.offset=Ob;nb=!1;Na=null;ac=0;Qa=!1;xb=wb=0;Ta=1;ob=0;hc=5126;kc=bb=vc=Ac=0;Ca(Ha)?(nb=!0,Na=K.createStream(34962,
Ha),hc=Na.dtype):(Na=K.getBuffer(Ha))?hc=Na.dtype:"constant"in Ha?(Ta=2,"number"===typeof Ha.constant?(vc=Ha.constant,bb=kc=Ac=0):(vc=0<Ha.constant.length?Ha.constant[0]:0,bb=1<Ha.constant.length?Ha.constant[1]:0,kc=2<Ha.constant.length?Ha.constant[2]:0,Ac=3<Ha.constant.length?Ha.constant[3]:0)):(Na=Ca(Ha.buffer)?K.createStream(34962,Ha.buffer):K.getBuffer(Ha.buffer),hc="type"in Ha?yd[Ha.type]:Na.dtype,Qa=!!Ha.normalized,xb=Ha.size|0,wb=Ha.offset|0,ob=Ha.stride|0,ac=Ha.divisor|0);Rc=Ea.location;Xa=
z[Rc];if(1===Ta){Xa.buffer||da.enableVertexAttribArray(Rc);kd=xb||4;if(Xa.type!==hc||Xa.size!==kd||Xa.buffer!==Na||Xa.normalized!==Qa||Xa.offset!==wb||Xa.stride!==ob)da.bindBuffer(34962,Na.buffer),da.vertexAttribPointer(Rc,kd,hc,Qa,ob,wb),Xa.type=hc,Xa.size=kd,Xa.buffer=Na,Xa.normalized=Qa,Xa.offset=wb,Xa.stride=ob;Xa.divisor!==ac&&(p.vertexAttribDivisorANGLE(Rc,ac),Xa.divisor=ac)}else if(Xa.buffer&&(da.disableVertexAttribArray(Rc),Xa.buffer=null),Xa.x!==vc||Xa.y!==bb||Xa.z!==kc||Xa.w!==Ac)da.vertexAttrib4f(Rc,
vc,bb,kc,Ac),Xa.x=vc,Xa.y=bb,Xa.z=kc,Xa.w=Ac;Bb=m.call(this,ea,h,u);bc.offset=Bb;$a=!1;Xb=null;tc=0;Yb=!1;Kc=Sb=0;Tb=1;ia=0;Ec=5126;ud=Xc=Mc=pd=0;Ca(bc)?($a=!0,Xb=K.createStream(34962,bc),Ec=Xb.dtype):(Xb=K.getBuffer(bc))?Ec=Xb.dtype:"constant"in bc?(Tb=2,"number"===typeof bc.constant?(Mc=bc.constant,Xc=ud=pd=0):(Mc=0<bc.constant.length?bc.constant[0]:0,Xc=1<bc.constant.length?bc.constant[1]:0,ud=2<bc.constant.length?bc.constant[2]:0,pd=3<bc.constant.length?bc.constant[3]:0)):(Xb=Ca(bc.buffer)?K.createStream(34962,
bc.buffer):K.getBuffer(bc.buffer),Ec="type"in bc?yd[bc.type]:Xb.dtype,Yb=!!bc.normalized,Kc=bc.size|0,Sb=bc.offset|0,ia=bc.stride|0,tc=bc.divisor|0);oc=Q.location;wc=z[oc];if(1===Tb){wc.buffer||da.enableVertexAttribArray(oc);ic=Kc||4;if(wc.type!==Ec||wc.size!==ic||wc.buffer!==Xb||wc.normalized!==Yb||wc.offset!==Sb||wc.stride!==ia)da.bindBuffer(34962,Xb.buffer),da.vertexAttribPointer(oc,ic,Ec,Yb,ia,Sb),wc.type=Ec,wc.size=ic,wc.buffer=Xb,wc.normalized=Yb,wc.offset=Sb,wc.stride=ia;wc.divisor!==tc&&(p.vertexAttribDivisorANGLE(oc,
tc),wc.divisor=tc)}else if(wc.buffer&&(da.disableVertexAttribArray(oc),wc.buffer=null),wc.x!==Mc||wc.y!==Xc||wc.z!==ud||wc.w!==pd)da.vertexAttrib4f(oc,Mc,Xc,ud,pd),wc.x=Mc,wc.y=Xc,wc.z=ud,wc.w=pd;db=Z.call(this,ea,h,u);sc=db[0];Zb=db[1];jc=db[2];Bc=db[3];u&&Vb===sc&&ec===Zb&&yc===jc&&bd===Bc||(Vb=sc,ec=Zb,yc=jc,bd=Bc,da.uniform4f(oa.location,sc,Zb,jc,Bc));Pc=h.lineWidth;u&&Qc===Pc||(Qc=Pc,da.uniform1f(X.location,Pc));Sc=h.capSize;u&&Yc===Sc||(Yc=Sc,da.uniform1f(la.location,Sc));ld=h.scale;cd=ld[0];
lc=ld[1];u&&Zc===cd&&dc===lc||(Zc=cd,dc=lc,da.uniform2f(x.location,cd,lc));$c=h.scaleFract;Uc=$c[0];zc=$c[1];u&&dd===Uc&&hd===zc||(dd=Uc,hd=zc,da.uniform2f(P.location,Uc,zc));Dd=h.translate;ye=Dd[0];id=Dd[1];u&&wd===ye&&De===id||(wd=ye,De=id,da.uniform2f(O.location,ye,id));Pd=h.translateFract;fe=Pd[0];$d=Pd[1];u&&le===fe&&Kd===$d||(le=fe,Kd=$d,da.uniform2f(pa.location,fe,$d));Id=h.opacity;u&&nd===Id||(nd=Id,da.uniform1f(S.location,Id));Tc=h.count;0<Tc?nc?p.drawElementsInstancedANGLE(4,36,nc.type,
gc<<(nc.type-5121>>1),Tc):p.drawArraysInstancedANGLE(4,gc,36,Tc):0>Tc&&(nc?da.drawElements(4,36,nc.type,gc<<(nc.type-5121>>1)):da.drawArrays(4,gc,36));ea.viewportWidth=ab;ea.viewportHeight=pb;jb&&K.destroyStream(Hb);eb&&K.destroyStream(fb);nb&&K.destroyStream(Na);$a&&K.destroyStream(Xb)}U.dirty=!0;Pa.setVAO(null);d&&(e.cpuTime+=performance.now()-f)},draw:function(a){var d,f,m,p,u,h,t,w,sa,y,q,D,ra,C,E,B,G,M,J,aa,Ya,ba,W,za,Aa,Z,na,L,Da,gb,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,
Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,ia,Za,Nb,Ob,nb,Na,ac;d=ya.next;d!==ya.cur&&(d?da.bindFramebuffer(36160,d.framebuffer):da.bindFramebuffer(36160,null),ya.cur=d);if(U.dirty){var Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb;Qa=ja.dither;Qa!==U.dither&&(Qa?da.enable(3024):da.disable(3024),U.dither=Qa);wb=ja.depth_func;wb!==U.depth_func&&(da.depthFunc(wb),U.depth_func=
wb);xb=mb[0];Ta=mb[1];if(xb!==Ib[0]||Ta!==Ib[1])da.depthRange(xb,Ta),Ib[0]=xb,Ib[1]=Ta;ob=ja.depth_mask;ob!==U.depth_mask&&(da.depthMask(ob),U.depth_mask=ob);hc=ua[0];Ac=ua[1];vc=ua[2];bb=ua[3];if(hc!==Fa[0]||Ac!==Fa[1]||vc!==Fa[2]||bb!==Fa[3])da.colorMask(hc,Ac,vc,bb),Fa[0]=hc,Fa[1]=Ac,Fa[2]=vc,Fa[3]=bb;kc=ja.cull_enable;kc!==U.cull_enable&&(kc?da.enable(2884):da.disable(2884),U.cull_enable=kc);Rc=ja.cull_face;Rc!==U.cull_face&&(da.cullFace(Rc),U.cull_face=Rc);Xa=ja.frontFace;Xa!==U.frontFace&&(da.frontFace(Xa),
U.frontFace=Xa);kd=ja.lineWidth;kd!==U.lineWidth&&(da.lineWidth(kd),U.lineWidth=kd);Bb=ja.polygonOffset_enable;Bb!==U.polygonOffset_enable&&(Bb?da.enable(32823):da.disable(32823),U.polygonOffset_enable=Bb);$a=fa[0];Xb=fa[1];if($a!==R[0]||Xb!==R[1])da.polygonOffset($a,Xb),R[0]=$a,R[1]=Xb;tc=ja.sample_alpha;tc!==U.sample_alpha&&(tc?da.enable(32926):da.disable(32926),U.sample_alpha=tc);Yb=ja.sample_enable;Yb!==U.sample_enable&&(Yb?da.enable(32928):da.disable(32928),U.sample_enable=Yb);Sb=va[0];Kc=va[1];
if(Sb!==Ga[0]||Kc!==Ga[1])da.sampleCoverage(Sb,Kc),Ga[0]=Sb,Ga[1]=Kc;Tb=ja.stencil_enable;Tb!==U.stencil_enable&&(Tb?da.enable(2960):da.disable(2960),U.stencil_enable=Tb);zd=ja.stencil_mask;zd!==U.stencil_mask&&(da.stencilMask(zd),U.stencil_mask=zd);Ec=wa[0];pd=wa[1];Mc=wa[2];if(Ec!==ka[0]||pd!==ka[1]||Mc!==ka[2])da.stencilFunc(Ec,pd,Mc),ka[0]=Ec,ka[1]=pd,ka[2]=Mc;Xc=Sa[0];ud=Sa[1];oc=Sa[2];wc=Sa[3];if(Xc!==Ia[0]||ud!==Ia[1]||oc!==Ia[2]||wc!==Ia[3])da.stencilOpSeparate(Xc,ud,oc,wc),Ia[0]=Xc,Ia[1]=
ud,Ia[2]=oc,Ia[3]=wc;ic=Y[0];db=Y[1];sc=Y[2];Vb=Y[3];if(ic!==ta[0]||db!==ta[1]||sc!==ta[2]||Vb!==ta[3])da.stencilOpSeparate(ic,db,sc,Vb),ta[0]=ic,ta[1]=db,ta[2]=sc,ta[3]=Vb}f=a.viewport;m=f.x|0;p=f.y|0;u="width"in f?f.width|0:ea.framebufferWidth-m;h="height"in f?f.height|0:ea.framebufferHeight-p;t=ea.viewportWidth;ea.viewportWidth=u;w=ea.viewportHeight;ea.viewportHeight=h;da.viewport(m,p,u,h);ca[0]=m;ca[1]=p;ca[2]=u;ca[3]=h;da.blendColor(0,0,0,0);zb[0]=0;zb[1]=0;zb[2]=0;zb[3]=0;da.enable(3042);U.blend_enable=
!0;da.blendEquationSeparate(32774,32774);A[0]=32774;A[1]=32774;da.blendFuncSeparate(770,771,773,1);ha[0]=770;ha[1]=771;ha[2]=773;ha[3]=1;da.disable(2929);U.depth_enable=!1;sa=a.viewport;y=sa.x|0;q=sa.y|0;D="width"in sa?sa.width|0:ea.framebufferWidth-y;ra="height"in sa?sa.height|0:ea.framebufferHeight-q;da.scissor(y,q,D,ra);xa[0]=y;xa[1]=q;xa[2]=D;xa[3]=ra;da.enable(3089);U.scissor_enable=!0;if(C=U.profile)E=performance.now(),e.count++;da.useProgram(c.program);B=Ba.angle_instanced_arrays;Pa.setVAO(null);
G=b.call(this,ea,a,0);H.offset=G;M=!1;J=null;aa=0;Ya=!1;W=ba=0;za=1;Aa=0;Z=5126;gb=Da=L=na=0;Ca(H)?(M=!0,J=K.createStream(34962,H),Z=J.dtype):(J=K.getBuffer(H))?Z=J.dtype:"constant"in H?(za=2,"number"===typeof H.constant?(L=H.constant,Da=gb=na=0):(L=0<H.constant.length?H.constant[0]:0,Da=1<H.constant.length?H.constant[1]:0,gb=2<H.constant.length?H.constant[2]:0,na=3<H.constant.length?H.constant[3]:0)):(J=Ca(H.buffer)?K.createStream(34962,H.buffer):K.getBuffer(H.buffer),Z="type"in H?yd[H.type]:J.dtype,
Ya=!!H.normalized,W=H.size|0,ba=H.offset|0,Aa=H.stride|0,aa=H.divisor|0);Cb=T.location;Gb=z[Cb];if(1===za){Gb.buffer||da.enableVertexAttribArray(Cb);uc=W||2;if(Gb.type!==Z||Gb.size!==uc||Gb.buffer!==J||Gb.normalized!==Ya||Gb.offset!==ba||Gb.stride!==Aa)da.bindBuffer(34962,J.buffer),da.vertexAttribPointer(Cb,uc,Z,Ya,Aa,ba),Gb.type=Z,Gb.size=uc,Gb.buffer=J,Gb.normalized=Ya,Gb.offset=ba,Gb.stride=Aa;Gb.divisor!==aa&&(B.vertexAttribDivisorANGLE(Cb,aa),Gb.divisor=aa)}else if(Gb.buffer&&(da.disableVertexAttribArray(Cb),
Gb.buffer=null),Gb.x!==L||Gb.y!==Da||Gb.z!==gb||Gb.w!==na)da.vertexAttrib4f(Cb,L,Da,gb,na),Gb.x=L,Gb.y=Da,Gb.z=gb,Gb.w=na;Ab=l.call(this,ea,a,0);Ub.offset=Ab;xc=!1;Db=null;Ic=0;mc=!1;fd=Gc=0;Vc=1;Dc=0;fc=5126;nc=qc=pc=Hc=0;Ca(Ub)?(xc=!0,Db=K.createStream(34962,Ub),fc=Db.dtype):(Db=K.getBuffer(Ub))?fc=Db.dtype:"constant"in Ub?(Vc=2,"number"===typeof Ub.constant?(pc=Ub.constant,qc=nc=Hc=0):(pc=0<Ub.constant.length?Ub.constant[0]:0,qc=1<Ub.constant.length?Ub.constant[1]:0,nc=2<Ub.constant.length?Ub.constant[2]:
0,Hc=3<Ub.constant.length?Ub.constant[3]:0)):(Db=Ca(Ub.buffer)?K.createStream(34962,Ub.buffer):K.getBuffer(Ub.buffer),fc="type"in Ub?yd[Ub.type]:Db.dtype,mc=!!Ub.normalized,fd=Ub.size|0,Gc=Ub.offset|0,Dc=Ub.stride|0,Ic=Ub.divisor|0);gc=N.location;lb=z[gc];if(1===Vc){lb.buffer||da.enableVertexAttribArray(gc);Jc=fd||2;if(lb.type!==fc||lb.size!==Jc||lb.buffer!==Db||lb.normalized!==mc||lb.offset!==Gc||lb.stride!==Dc)da.bindBuffer(34962,Db.buffer),da.vertexAttribPointer(gc,Jc,fc,mc,Dc,Gc),lb.type=fc,lb.size=
Jc,lb.buffer=Db,lb.normalized=mc,lb.offset=Gc,lb.stride=Dc;lb.divisor!==Ic&&(B.vertexAttribDivisorANGLE(gc,Ic),lb.divisor=Ic)}else if(lb.buffer&&(da.disableVertexAttribArray(gc),lb.buffer=null),lb.x!==pc||lb.y!==qc||lb.z!==nc||lb.w!==Hc)da.vertexAttrib4f(gc,pc,qc,nc,Hc),lb.x=pc,lb.y=qc,lb.z=nc,lb.w=Hc;Jb=r.call(this,ea,a,0);Ha.offset=Jb;cb=!1;Pb=null;ab=0;pb=!1;td=Va=0;Kb=1;Lb=0;rc=5126;Eb=Hb=jb=Qb=0;Ca(Ha)?(cb=!0,Pb=K.createStream(34962,Ha),rc=Pb.dtype):(Pb=K.getBuffer(Ha))?rc=Pb.dtype:"constant"in
Ha?(Kb=2,"number"===typeof Ha.constant?(jb=Ha.constant,Hb=Eb=Qb=0):(jb=0<Ha.constant.length?Ha.constant[0]:0,Hb=1<Ha.constant.length?Ha.constant[1]:0,Eb=2<Ha.constant.length?Ha.constant[2]:0,Qb=3<Ha.constant.length?Ha.constant[3]:0)):(Pb=Ca(Ha.buffer)?K.createStream(34962,Ha.buffer):K.getBuffer(Ha.buffer),rc="type"in Ha?yd[Ha.type]:Pb.dtype,pb=!!Ha.normalized,td=Ha.size|0,Va=Ha.offset|0,Lb=Ha.stride|0,ab=Ha.divisor|0);yb=Ea.location;hb=z[yb];if(1===Kb){hb.buffer||da.enableVertexAttribArray(yb);$b=
td||4;if(hb.type!==rc||hb.size!==$b||hb.buffer!==Pb||hb.normalized!==pb||hb.offset!==Va||hb.stride!==Lb)da.bindBuffer(34962,Pb.buffer),da.vertexAttribPointer(yb,$b,rc,pb,Lb,Va),hb.type=rc,hb.size=$b,hb.buffer=Pb,hb.normalized=pb,hb.offset=Va,hb.stride=Lb;hb.divisor!==ab&&(B.vertexAttribDivisorANGLE(yb,ab),hb.divisor=ab)}else if(hb.buffer&&(da.disableVertexAttribArray(yb),hb.buffer=null),hb.x!==jb||hb.y!==Hb||hb.z!==Eb||hb.w!==Qb)da.vertexAttrib4f(yb,jb,Hb,Eb,Qb),hb.x=jb,hb.y=Hb,hb.z=Eb,hb.w=Qb;Rb=
v.call(this,ea,a,0);bc.offset=Rb;sb=!1;Ua=null;Wb=0;qb=!1;ib=cc=0;rb=1;Ja=0;tb=5126;La=fb=eb=Ka=0;Ca(bc)?(sb=!0,Ua=K.createStream(34962,bc),tb=Ua.dtype):(Ua=K.getBuffer(bc))?tb=Ua.dtype:"constant"in bc?(rb=2,"number"===typeof bc.constant?(eb=bc.constant,fb=La=Ka=0):(eb=0<bc.constant.length?bc.constant[0]:0,fb=1<bc.constant.length?bc.constant[1]:0,La=2<bc.constant.length?bc.constant[2]:0,Ka=3<bc.constant.length?bc.constant[3]:0)):(Ua=Ca(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),
tb="type"in bc?yd[bc.type]:Ua.dtype,qb=!!bc.normalized,ib=bc.size|0,cc=bc.offset|0,Ja=bc.stride|0,Wb=bc.divisor|0);kb=Q.location;Wa=z[kb];if(1===rb){Wa.buffer||da.enableVertexAttribArray(kb);vb=ib||4;if(Wa.type!==tb||Wa.size!==vb||Wa.buffer!==Ua||Wa.normalized!==qb||Wa.offset!==cc||Wa.stride!==Ja)da.bindBuffer(34962,Ua.buffer),da.vertexAttribPointer(kb,vb,tb,qb,Ja,cc),Wa.type=tb,Wa.size=vb,Wa.buffer=Ua,Wa.normalized=qb,Wa.offset=cc,Wa.stride=Ja;Wa.divisor!==Wb&&(B.vertexAttribDivisorANGLE(kb,Wb),
Wa.divisor=Wb)}else if(Wa.buffer&&(da.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)da.vertexAttrib4f(kb,eb,fb,La,Ka),Wa.x=eb,Wa.y=fb,Wa.z=La,Wa.w=Ka;ub=ga.location;Oa=z[ub];Oa.buffer||da.enableVertexAttribArray(ub);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==k||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)da.bindBuffer(34962,k.buffer),da.vertexAttribPointer(ub,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=k,Oa.normalized=!1,Oa.offset=0,Oa.stride=
24;0!==Oa.divisor&&(B.vertexAttribDivisorANGLE(ub,0),Oa.divisor=0);Cc=V.location;Ra=z[Cc];Ra.buffer||da.enableVertexAttribArray(Cc);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==F||!1!==Ra.normalized||8!==Ra.offset||24!==Ra.stride)da.bindBuffer(34962,F.buffer),da.vertexAttribPointer(Cc,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=F,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(B.vertexAttribDivisorANGLE(Cc,0),Ra.divisor=0);Mb=g.location;Fb=z[Mb];Fb.buffer||da.enableVertexAttribArray(Mb);
if(5126!==Fb.type||2!==Fb.size||Fb.buffer!==I||!1!==Fb.normalized||16!==Fb.offset||24!==Fb.stride)da.bindBuffer(34962,I.buffer),da.vertexAttribPointer(Mb,2,5126,!1,24,16),Fb.type=5126,Fb.size=2,Fb.buffer=I,Fb.normalized=!1,Fb.offset=16,Fb.stride=24;0!==Fb.divisor&&(B.vertexAttribDivisorANGLE(Mb,0),Fb.divisor=0);Ma=n.call(this,ea,a,0);da.uniform4f(oa.location,Ma[0],Ma[1],Ma[2],Ma[3]);da.uniform1f(X.location,a.lineWidth);da.uniform1f(la.location,a.capSize);ia=a.scale;da.uniform2f(x.location,ia[0],ia[1]);
Za=a.scaleFract;da.uniform2f(P.location,Za[0],Za[1]);Nb=a.translate;da.uniform2f(O.location,Nb[0],Nb[1]);Ob=a.translateFract;da.uniform2f(pa.location,Ob[0],Ob[1]);da.uniform1f(S.location,a.opacity);(nb=ma.elements)?da.bindBuffer(34963,nb.buffer.buffer):Pa.currentVAO&&(nb=qa.getElements(Pa.currentVAO.elements))&&da.bindBuffer(34963,nb.buffer.buffer);Na=ma.offset;ac=a.count;0<ac?nb?B.drawElementsInstancedANGLE(4,36,nb.type,Na<<(nb.type-5121>>1),ac):B.drawArraysInstancedANGLE(4,Na,36,ac):0>ac&&(nb?da.drawElements(4,
36,nb.type,Na<<(nb.type-5121>>1)):da.drawArrays(4,Na,36));U.dirty=!0;Pa.setVAO(null);ea.viewportWidth=t;ea.viewportHeight=w;C&&(e.cpuTime+=performance.now()-E);M&&K.destroyStream(J);xc&&K.destroyStream(Db);cb&&K.destroyStream(Pb);sb&&K.destroyStream(Ua)},scope:function(a,c,b){var g,d,m,p,x,A,z,h,t,R,l,r,ha,v,y,va,Pa,Ga,T,zb,N,da,fa,S,n,B,ka,G,O,Y,ua,P,xa,Q,wa,ca,pa,ya,qa,V,ta,X,Z,Fa,oa,Ib,L,la,Da,ga,Ba,mb,Ia,Sa,Ea,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,
Oa,Cc,Ra,Mb,Fb,Ma,ia,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md;g=a.viewport;d=g.x|0;m=g.y|0;p="width"in g?g.width|0:ea.framebufferWidth-d;x="height"in g?g.height|0:ea.framebufferHeight-m;A=ea.viewportWidth;ea.viewportWidth=
p;z=ea.viewportHeight;ea.viewportHeight=x;h=gb[0];gb[0]=d;t=gb[1];gb[1]=m;R=gb[2];gb[2]=p;l=gb[3];gb[3]=x;r=sa[0];sa[0]=0;ha=sa[1];sa[1]=0;v=sa[2];sa[2]=0;y=sa[3];sa[3]=0;va=ja.blend_enable;ja.blend_enable=!0;Pa=Ya[0];Ya[0]=32774;Ga=Ya[1];Ya[1]=32774;T=u[0];u[0]=770;zb=u[1];u[1]=771;N=u[2];u[2]=773;da=u[3];u[3]=1;fa=ja.depth_enable;ja.depth_enable=!1;S=a.viewport;n=S.x|0;B=S.y|0;ka="width"in S?S.width|0:ea.framebufferWidth-n;G="height"in S?S.height|0:ea.framebufferHeight-B;O=ra[0];ra[0]=n;Y=ra[1];
ra[1]=B;ua=ra[2];ra[2]=ka;P=ra[3];ra[3]=G;xa=ja.scissor_enable;ja.scissor_enable=!0;if(Q=U.profile)wa=performance.now(),e.count++;ca=ma.count;ma.count=36;pa=a.count;ya=ma.instances;ma.instances=pa;qa=ma.primitive;ma.primitive=4;V=a.capSize;ta=za[5];za[5]=V;X=a.lineWidth;Z=za[4];za[4]=X;Fa=a.opacity;oa=za[10];za[10]=Fa;Ib=a.range;L=za[18];za[18]=Ib;la=a.scale;Da=za[6];za[6]=la;ga=a.scaleFract;Ba=za[7];za[7]=ga;mb=a.translate;Ia=za[8];za[8]=mb;Sa=a.translateFract;Ea=za[9];za[9]=Sa;Kb=aa.call(this,ea,
a,b);Lb=za[3];za[3]=Kb;rc=q.buffer;q.buffer=I;Qb=q.divisor;q.divisor=0;jb=q.normalized;q.normalized=!1;Hb=q.offset;q.offset=16;Eb=q.size;q.size=0;yb=q.state;q.state=1;hb=q.stride;q.stride=24;$b=q.type;q.type=5126;Rb=q.w;q.w=0;sb=q.x;q.x=0;Ua=q.y;q.y=0;Wb=q.z;q.z=0;qb=J.call(this,ea,a,b);bc.offset=qb;cc=!1;ib=null;rb=0;Ja=!1;Ka=tb=0;eb=1;fb=0;La=5126;ub=vb=Wa=kb=0;Ca(bc)?(cc=!0,ib=K.createStream(34962,bc),La=ib.dtype):(ib=K.getBuffer(bc))?La=ib.dtype:"constant"in bc?(eb=2,"number"===typeof bc.constant?
(Wa=bc.constant,vb=ub=kb=0):(Wa=0<bc.constant.length?bc.constant[0]:0,vb=1<bc.constant.length?bc.constant[1]:0,ub=2<bc.constant.length?bc.constant[2]:0,kb=3<bc.constant.length?bc.constant[3]:0)):(ib=Ca(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),La="type"in bc?yd[bc.type]:ib.dtype,Ja=!!bc.normalized,Ka=bc.size|0,tb=bc.offset|0,fb=bc.stride|0,rb=bc.divisor|0);Oa=C.buffer;C.buffer=ib;Cc=C.divisor;C.divisor=rb;Ra=C.normalized;C.normalized=Ja;Mb=C.offset;C.offset=tb;Fb=C.size;C.size=
Ka;Ma=C.state;C.state=eb;ia=C.stride;C.stride=fb;Za=C.type;C.type=La;Nb=C.w;C.w=kb;Ob=C.x;C.x=Wa;nb=C.y;C.y=vb;Na=C.z;C.z=ub;ac=M.buffer;M.buffer=k;Qa=M.divisor;M.divisor=0;wb=M.normalized;M.normalized=!1;xb=M.offset;M.offset=0;Ta=M.size;M.size=0;ob=M.state;M.state=1;hc=M.stride;M.stride=24;Ac=M.type;M.type=5126;vc=M.w;M.w=0;bb=M.x;M.x=0;kc=M.y;M.y=0;Rc=M.z;M.z=0;Xa=Aa.call(this,ea,a,b);Ha.offset=Xa;kd=!1;Bb=null;$a=0;Xb=!1;Yb=tc=0;Sb=1;Kc=0;Tb=5126;Mc=pd=Ec=zd=0;Ca(Ha)?(kd=!0,Bb=K.createStream(34962,
Ha),Tb=Bb.dtype):(Bb=K.getBuffer(Ha))?Tb=Bb.dtype:"constant"in Ha?(Sb=2,"number"===typeof Ha.constant?(Ec=Ha.constant,pd=Mc=zd=0):(Ec=0<Ha.constant.length?Ha.constant[0]:0,pd=1<Ha.constant.length?Ha.constant[1]:0,Mc=2<Ha.constant.length?Ha.constant[2]:0,zd=3<Ha.constant.length?Ha.constant[3]:0)):(Bb=Ca(Ha.buffer)?K.createStream(34962,Ha.buffer):K.getBuffer(Ha.buffer),Tb="type"in Ha?yd[Ha.type]:Bb.dtype,Xb=!!Ha.normalized,Yb=Ha.size|0,tc=Ha.offset|0,Kc=Ha.stride|0,$a=Ha.divisor|0);Xc=f.buffer;f.buffer=
Bb;ud=f.divisor;f.divisor=$a;oc=f.normalized;f.normalized=Xb;wc=f.offset;f.offset=tc;ic=f.size;f.size=Yb;db=f.state;f.state=Sb;sc=f.stride;f.stride=Kc;Vb=f.type;f.type=Tb;Zb=f.w;f.w=zd;ec=f.x;f.x=Ec;jc=f.y;f.y=pd;yc=f.z;f.z=Mc;Bc=w.buffer;w.buffer=F;bd=w.divisor;w.divisor=0;Pc=w.normalized;w.normalized=!1;Qc=w.offset;w.offset=8;Sc=w.size;w.size=0;Yc=w.state;w.state=1;ld=w.stride;w.stride=24;cd=w.type;w.type=5126;Zc=w.w;w.w=0;lc=w.x;w.x=0;dc=w.y;w.y=0;$c=w.z;w.z=0;Uc=ba.call(this,ea,a,b);H.offset=
Uc;dd=!1;zc=null;hd=0;Dd=!1;wd=ye=0;id=1;De=0;Pd=5126;Kd=$d=le=fe=0;Ca(H)?(dd=!0,zc=K.createStream(34962,H),Pd=zc.dtype):(zc=K.getBuffer(H))?Pd=zc.dtype:"constant"in H?(id=2,"number"===typeof H.constant?(le=H.constant,$d=Kd=fe=0):(le=0<H.constant.length?H.constant[0]:0,$d=1<H.constant.length?H.constant[1]:0,Kd=2<H.constant.length?H.constant[2]:0,fe=3<H.constant.length?H.constant[3]:0)):(zc=Ca(H.buffer)?K.createStream(34962,H.buffer):K.getBuffer(H.buffer),Pd="type"in H?yd[H.type]:zc.dtype,Dd=!!H.normalized,
wd=H.size|0,ye=H.offset|0,De=H.stride|0,hd=H.divisor|0);Id=E.buffer;E.buffer=zc;nd=E.divisor;E.divisor=hd;Tc=E.normalized;E.normalized=Dd;vd=E.offset;E.offset=ye;sd=E.size;E.size=wd;jd=E.state;E.state=id;xd=E.stride;E.stride=De;Bd=E.type;E.type=Pd;Ed=E.w;E.w=fe;qe=E.x;E.x=le;je=E.y;E.y=$d;te=E.z;E.z=Kd;ke=W.call(this,ea,a,b);Ub.offset=ke;ie=!1;ge=null;ue=0;ce=!1;Nc=me=0;gd=1;ve=0;re=5126;Sd=Rd=Qd=Ld=0;Ca(Ub)?(ie=!0,ge=K.createStream(34962,Ub),re=ge.dtype):(ge=K.getBuffer(Ub))?re=ge.dtype:"constant"in
Ub?(gd=2,"number"===typeof Ub.constant?(Qd=Ub.constant,Rd=Sd=Ld=0):(Qd=0<Ub.constant.length?Ub.constant[0]:0,Rd=1<Ub.constant.length?Ub.constant[1]:0,Sd=2<Ub.constant.length?Ub.constant[2]:0,Ld=3<Ub.constant.length?Ub.constant[3]:0)):(ge=Ca(Ub.buffer)?K.createStream(34962,Ub.buffer):K.getBuffer(Ub.buffer),re="type"in Ub?yd[Ub.type]:ge.dtype,ce=!!Ub.normalized,Nc=Ub.size|0,me=Ub.offset|0,ve=Ub.stride|0,ue=Ub.divisor|0);ne=D.buffer;D.buffer=ge;Ae=D.divisor;D.divisor=ue;Ee=D.normalized;D.normalized=
ce;se=D.offset;D.offset=me;Te=D.size;D.size=Nc;Ue=D.state;D.state=gd;Pe=D.stride;D.stride=ve;we=D.type;D.type=re;He=D.w;D.w=Ld;Ke=D.x;D.x=Qd;Le=D.y;D.y=Rd;Me=D.z;D.z=Sd;Ie=na.vert;na.vert=2;Md=na.frag;na.frag=1;U.dirty=!0;c(ea,a,b);ea.viewportWidth=A;ea.viewportHeight=z;gb[0]=h;gb[1]=t;gb[2]=R;gb[3]=l;sa[0]=r;sa[1]=ha;sa[2]=v;sa[3]=y;ja.blend_enable=va;Ya[0]=Pa;Ya[1]=Ga;u[0]=T;u[1]=zb;u[2]=N;u[3]=da;ja.depth_enable=fa;ra[0]=O;ra[1]=Y;ra[2]=ua;ra[3]=P;ja.scissor_enable=xa;Q&&(e.cpuTime+=performance.now()-
wa);ma.count=ca;ma.instances=ya;ma.primitive=qa;za[5]=ta;za[4]=Z;za[10]=oa;za[18]=L;za[6]=Da;za[7]=Ba;za[8]=Ia;za[9]=Ea;za[3]=Lb;q.buffer=rc;q.divisor=Qb;q.normalized=jb;q.offset=Hb;q.size=Eb;q.state=yb;q.stride=hb;q.type=$b;q.w=Rb;q.x=sb;q.y=Ua;q.z=Wb;cc&&K.destroyStream(ib);C.buffer=Oa;C.divisor=Cc;C.normalized=Ra;C.offset=Mb;C.size=Fb;C.state=Ma;C.stride=ia;C.type=Za;C.w=Nb;C.x=Ob;C.y=nb;C.z=Na;M.buffer=ac;M.divisor=Qa;M.normalized=wb;M.offset=xb;M.size=Ta;M.state=ob;M.stride=hc;M.type=Ac;M.w=
vc;M.x=bb;M.y=kc;M.z=Rc;kd&&K.destroyStream(Bb);f.buffer=Xc;f.divisor=ud;f.normalized=oc;f.offset=wc;f.size=ic;f.state=db;f.stride=sc;f.type=Vb;f.w=Zb;f.x=ec;f.y=jc;f.z=yc;w.buffer=Bc;w.divisor=bd;w.normalized=Pc;w.offset=Qc;w.size=Sc;w.state=Yc;w.stride=ld;w.type=cd;w.w=Zc;w.x=lc;w.y=dc;w.z=$c;dd&&K.destroyStream(zc);E.buffer=Id;E.divisor=nd;E.normalized=Tc;E.offset=vd;E.size=sd;E.state=jd;E.stride=xd;E.type=Bd;E.w=Ed;E.x=qe;E.y=je;E.z=te;ie&&K.destroyStream(ge);D.buffer=ne;D.divisor=Ae;D.normalized=
Ee;D.offset=se;D.size=Te;D.state=Ue;D.stride=Pe;D.type=we;D.w=He;D.x=Ke;D.y=Le;D.z=Me;na.vert=Ie;na.frag=Md;U.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,L,G,B,m,Z,g,la,Q,ga){var H,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa,ka,Y;H=a.attributes;
V=a.buffer;X=a.context;S=a.current;T=a.draw;N=a.elements;x=a.extensions;P=a.framebuffer;O=a.gl;pa=a.isBufferArgs;oa=a.next;z=a.shader;K=a.uniforms;ea=a.vao;U=oa.blend_color;ma=S.blend_color;qa=oa.blend_equation;Ba=S.blend_equation;ya=oa.blend_func;da=S.blend_func;Ca=oa.colorMask;ja=S.colorMask;na=oa.depth_range;za=S.depth_range;Pa=oa.polygonOffset_offset;sa=S.polygonOffset_offset;zb=oa.sample_coverage;Ya=S.sample_coverage;A=oa.scissor_box;u=S.scissor_box;ha=oa.stencil_func;ua=S.stencil_func;Fa=oa.stencil_opBack;
mb=S.stencil_opBack;Ib=oa.stencil_opFront;fa=S.stencil_opFront;R=oa.viewport;va=S.viewport;Ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ra={divisor:1,offset:8,stride:8};xa={divisor:1,offset:8,stride:8};wa={divisor:1,offset:16,stride:8};ka={divisor:1,offset:16,stride:8};Y={divisor:1,offset:0,stride:4};return{batch:function(a,c){var b,p,A,z,t,k;b=P.next;b!==P.cur&&(b?O.bindFramebuffer(36160,b.framebuffer):O.bindFramebuffer(36160,null),P.cur=b);if(S.dirty){var R,
l,r,v,K,q,U,n,F,I,ya,qa,aa,Gd,Ad,ze,$e,Se,Hd,Ce,Yd,Zd,ee,Wd,md,ad,rd,Lc,od,Fc,ed,Oc;R=oa.dither;R!==S.dither&&(R?O.enable(3024):O.disable(3024),S.dither=R);l=oa.depth_func;l!==S.depth_func&&(O.depthFunc(l),S.depth_func=l);r=na[0];v=na[1];if(r!==za[0]||v!==za[1])O.depthRange(r,v),za[0]=r,za[1]=v;K=oa.depth_mask;K!==S.depth_mask&&(O.depthMask(K),S.depth_mask=K);q=Ca[0];U=Ca[1];n=Ca[2];F=Ca[3];if(q!==ja[0]||U!==ja[1]||n!==ja[2]||F!==ja[3])O.colorMask(q,U,n,F),ja[0]=q,ja[1]=U,ja[2]=n,ja[3]=F;I=oa.cull_enable;
I!==S.cull_enable&&(I?O.enable(2884):O.disable(2884),S.cull_enable=I);ya=oa.cull_face;ya!==S.cull_face&&(O.cullFace(ya),S.cull_face=ya);qa=oa.frontFace;qa!==S.frontFace&&(O.frontFace(qa),S.frontFace=qa);aa=oa.lineWidth;aa!==S.lineWidth&&(O.lineWidth(aa),S.lineWidth=aa);Gd=oa.polygonOffset_enable;Gd!==S.polygonOffset_enable&&(Gd?O.enable(32823):O.disable(32823),S.polygonOffset_enable=Gd);Ad=Pa[0];ze=Pa[1];if(Ad!==sa[0]||ze!==sa[1])O.polygonOffset(Ad,ze),sa[0]=Ad,sa[1]=ze;$e=oa.sample_alpha;$e!==S.sample_alpha&&
($e?O.enable(32926):O.disable(32926),S.sample_alpha=$e);Se=oa.sample_enable;Se!==S.sample_enable&&(Se?O.enable(32928):O.disable(32928),S.sample_enable=Se);Hd=zb[0];Ce=zb[1];if(Hd!==Ya[0]||Ce!==Ya[1])O.sampleCoverage(Hd,Ce),Ya[0]=Hd,Ya[1]=Ce;Yd=oa.stencil_mask;Yd!==S.stencil_mask&&(O.stencilMask(Yd),S.stencil_mask=Yd);Zd=ha[0];ee=ha[1];Wd=ha[2];if(Zd!==ua[0]||ee!==ua[1]||Wd!==ua[2])O.stencilFunc(Zd,ee,Wd),ua[0]=Zd,ua[1]=ee,ua[2]=Wd;md=Ib[0];ad=Ib[1];rd=Ib[2];Lc=Ib[3];if(md!==fa[0]||ad!==fa[1]||rd!==
fa[2]||Lc!==fa[3])O.stencilOpSeparate(md,ad,rd,Lc),fa[0]=md,fa[1]=ad,fa[2]=rd,fa[3]=Lc;od=Fa[0];Fc=Fa[1];ed=Fa[2];Oc=Fa[3];if(od!==mb[0]||Fc!==mb[1]||ed!==mb[2]||Oc!==mb[3])O.stencilOpSeparate(od,Fc,ed,Oc),mb[0]=od,mb[1]=Fc,mb[2]=ed,mb[3]=Oc}O.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;O.enable(3042);S.blend_enable=!0;O.blendEquationSeparate(32774,32774);Ba[0]=32774;Ba[1]=32774;O.blendFuncSeparate(770,771,773,1);da[0]=770;da[1]=771;da[2]=773;da[3]=1;O.enable(3089);S.scissor_enable=!0;O.disable(2960);
S.stencil_enable=!1;if(p=S.profile)A=performance.now(),e.count+=c;O.useProgram(J.program);z=x.angle_instanced_arrays;var Wc,Cb,Gb,uc,Ab;ea.setVAO(null);Wc=L.location;Cb=H[Wc];Cb.buffer||O.enableVertexAttribArray(Wc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==h||!1!==Cb.normalized||0!==Cb.offset||8!==Cb.stride)O.bindBuffer(34962,h.buffer),O.vertexAttribPointer(Wc,1,5126,!1,8,0),Cb.type=5126,Cb.size=1,Cb.buffer=h,Cb.normalized=!1,Cb.offset=0,Cb.stride=8;0!==Cb.divisor&&(z.vertexAttribDivisorANGLE(Wc,
0),Cb.divisor=0);Gb=G.location;uc=H[Gb];uc.buffer||O.enableVertexAttribArray(Gb);if(5126!==uc.type||1!==uc.size||uc.buffer!==d||!1!==uc.normalized||4!==uc.offset||8!==uc.stride)O.bindBuffer(34962,d.buffer),O.vertexAttribPointer(Gb,1,5126,!1,8,4),uc.type=5126,uc.size=1,uc.buffer=d,uc.normalized=!1,uc.offset=4,uc.stride=8;0!==uc.divisor&&(z.vertexAttribDivisorANGLE(Gb,0),uc.divisor=0);(Ab=T.elements)?O.bindBuffer(34963,Ab.buffer.buffer):ea.currentVAO&&(Ab=N.getElements(ea.currentVAO.elements))&&O.bindBuffer(34963,
Ab.buffer.buffer);for(t=0;t<c;++t){k=a[t];var xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,ia,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd;xc=k.viewport;Db=xc.x|0;Ic=xc.y|0;mc="width"in xc?xc.width|
0:X.framebufferWidth-Db;Gc="height"in xc?xc.height|0:X.framebufferHeight-Ic;fd=X.viewportWidth;X.viewportWidth=mc;Vc=X.viewportHeight;X.viewportHeight=Gc;O.viewport(Db,Ic,mc,Gc);va[0]=Db;va[1]=Ic;va[2]=mc;va[3]=Gc;(Dc=C.call(this,X,k,t))?O.enable(2929):O.disable(2929);S.depth_enable=Dc;fc=k.viewport;Hc=fc.x|0;pc=fc.y|0;qc="width"in fc?fc.width|0:X.framebufferWidth-Hc;nc="height"in fc?fc.height|0:X.framebufferHeight-pc;O.scissor(Hc,pc,qc,nc);u[0]=Hc;u[1]=pc;u[2]=qc;u[3]=nc;ra.buffer=k.positionBuffer;
gc=!1;lb=null;Jc=0;Jb=!1;Pb=cb=0;ab=1;pb=0;Va=5126;rc=Lb=Kb=td=0;pa(ra)?(gc=!0,lb=V.createStream(34962,ra),Va=lb.dtype):(lb=V.getBuffer(ra))?Va=lb.dtype:"constant"in ra?(ab=2,"number"===typeof ra.constant?(Kb=ra.constant,Lb=rc=td=0):(Kb=0<ra.constant.length?ra.constant[0]:0,Lb=1<ra.constant.length?ra.constant[1]:0,rc=2<ra.constant.length?ra.constant[2]:0,td=3<ra.constant.length?ra.constant[3]:0)):(lb=pa(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Va="type"in ra?Ga[ra.type]:lb.dtype,
Jb=!!ra.normalized,Pb=ra.size|0,cb=ra.offset|0,pb=ra.stride|0,Jc=ra.divisor|0);Qb=Aa.location;jb=H[Qb];if(1===ab){jb.buffer||O.enableVertexAttribArray(Qb);Hb=Pb||2;if(jb.type!==Va||jb.size!==Hb||jb.buffer!==lb||jb.normalized!==Jb||jb.offset!==cb||jb.stride!==pb)O.bindBuffer(34962,lb.buffer),O.vertexAttribPointer(Qb,Hb,Va,Jb,pb,cb),jb.type=Va,jb.size=Hb,jb.buffer=lb,jb.normalized=Jb,jb.offset=cb,jb.stride=pb;jb.divisor!==Jc&&(z.vertexAttribDivisorANGLE(Qb,Jc),jb.divisor=Jc)}else if(jb.buffer&&(O.disableVertexAttribArray(Qb),
jb.buffer=null),jb.x!==Kb||jb.y!==Lb||jb.z!==rc||jb.w!==td)O.vertexAttrib4f(Qb,Kb,Lb,rc,td),jb.x=Kb,jb.y=Lb,jb.z=rc,jb.w=td;wa.buffer=k.positionBuffer;Eb=!1;yb=null;hb=0;$b=!1;sb=Rb=0;Ua=1;Wb=0;qb=5126;Ja=rb=ib=cc=0;pa(wa)?(Eb=!0,yb=V.createStream(34962,wa),qb=yb.dtype):(yb=V.getBuffer(wa))?qb=yb.dtype:"constant"in wa?(Ua=2,"number"===typeof wa.constant?(ib=wa.constant,rb=Ja=cc=0):(ib=0<wa.constant.length?wa.constant[0]:0,rb=1<wa.constant.length?wa.constant[1]:0,Ja=2<wa.constant.length?wa.constant[2]:
0,cc=3<wa.constant.length?wa.constant[3]:0)):(yb=pa(wa.buffer)?V.createStream(34962,wa.buffer):V.getBuffer(wa.buffer),qb="type"in wa?Ga[wa.type]:yb.dtype,$b=!!wa.normalized,sb=wa.size|0,Rb=wa.offset|0,Wb=wa.stride|0,hb=wa.divisor|0);tb=w.location;Ka=H[tb];if(1===Ua){Ka.buffer||O.enableVertexAttribArray(tb);eb=sb||2;if(Ka.type!==qb||Ka.size!==eb||Ka.buffer!==yb||Ka.normalized!==$b||Ka.offset!==Rb||Ka.stride!==Wb)O.bindBuffer(34962,yb.buffer),O.vertexAttribPointer(tb,eb,qb,$b,Wb,Rb),Ka.type=qb,Ka.size=
eb,Ka.buffer=yb,Ka.normalized=$b,Ka.offset=Rb,Ka.stride=Wb;Ka.divisor!==hb&&(z.vertexAttribDivisorANGLE(tb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(O.disableVertexAttribArray(tb),Ka.buffer=null),Ka.x!==ib||Ka.y!==rb||Ka.z!==Ja||Ka.w!==cc)O.vertexAttrib4f(tb,ib,rb,Ja,cc),Ka.x=ib,Ka.y=rb,Ka.z=Ja,Ka.w=cc;xa.buffer=k.positionFractBuffer;fb=!1;La=null;kb=0;Wa=!1;ub=vb=0;Oa=1;Cc=0;Ra=5126;ia=Ma=Fb=Mb=0;pa(xa)?(fb=!0,La=V.createStream(34962,xa),Ra=La.dtype):(La=V.getBuffer(xa))?Ra=La.dtype:"constant"in xa?
(Oa=2,"number"===typeof xa.constant?(Fb=xa.constant,Ma=ia=Mb=0):(Fb=0<xa.constant.length?xa.constant[0]:0,Ma=1<xa.constant.length?xa.constant[1]:0,ia=2<xa.constant.length?xa.constant[2]:0,Mb=3<xa.constant.length?xa.constant[3]:0)):(La=pa(xa.buffer)?V.createStream(34962,xa.buffer):V.getBuffer(xa.buffer),Ra="type"in xa?Ga[xa.type]:La.dtype,Wa=!!xa.normalized,ub=xa.size|0,vb=xa.offset|0,Cc=xa.stride|0,kb=xa.divisor|0);Za=f.location;Nb=H[Za];if(1===Oa){Nb.buffer||O.enableVertexAttribArray(Za);Ob=ub||
2;if(Nb.type!==Ra||Nb.size!==Ob||Nb.buffer!==La||Nb.normalized!==Wa||Nb.offset!==vb||Nb.stride!==Cc)O.bindBuffer(34962,La.buffer),O.vertexAttribPointer(Za,Ob,Ra,Wa,Cc,vb),Nb.type=Ra,Nb.size=Ob,Nb.buffer=La,Nb.normalized=Wa,Nb.offset=vb,Nb.stride=Cc;Nb.divisor!==kb&&(z.vertexAttribDivisorANGLE(Za,kb),Nb.divisor=kb)}else if(Nb.buffer&&(O.disableVertexAttribArray(Za),Nb.buffer=null),Nb.x!==Fb||Nb.y!==Ma||Nb.z!==ia||Nb.w!==Mb)O.vertexAttrib4f(Za,Fb,Ma,ia,Mb),Nb.x=Fb,Nb.y=Ma,Nb.z=ia,Nb.w=Mb;ka.buffer=
k.positionFractBuffer;nb=!1;Na=null;ac=0;Qa=!1;xb=wb=0;Ta=1;ob=0;hc=5126;kc=bb=vc=Ac=0;pa(ka)?(nb=!0,Na=V.createStream(34962,ka),hc=Na.dtype):(Na=V.getBuffer(ka))?hc=Na.dtype:"constant"in ka?(Ta=2,"number"===typeof ka.constant?(vc=ka.constant,bb=kc=Ac=0):(vc=0<ka.constant.length?ka.constant[0]:0,bb=1<ka.constant.length?ka.constant[1]:0,kc=2<ka.constant.length?ka.constant[2]:0,Ac=3<ka.constant.length?ka.constant[3]:0)):(Na=pa(ka.buffer)?V.createStream(34962,ka.buffer):V.getBuffer(ka.buffer),hc="type"in
ka?Ga[ka.type]:Na.dtype,Qa=!!ka.normalized,xb=ka.size|0,wb=ka.offset|0,ob=ka.stride|0,ac=ka.divisor|0);Rc=ba.location;Xa=H[Rc];if(1===Ta){Xa.buffer||O.enableVertexAttribArray(Rc);kd=xb||2;if(Xa.type!==hc||Xa.size!==kd||Xa.buffer!==Na||Xa.normalized!==Qa||Xa.offset!==wb||Xa.stride!==ob)O.bindBuffer(34962,Na.buffer),O.vertexAttribPointer(Rc,kd,hc,Qa,ob,wb),Xa.type=hc,Xa.size=kd,Xa.buffer=Na,Xa.normalized=Qa,Xa.offset=wb,Xa.stride=ob;Xa.divisor!==ac&&(z.vertexAttribDivisorANGLE(Rc,ac),Xa.divisor=ac)}else if(Xa.buffer&&
(O.disableVertexAttribArray(Rc),Xa.buffer=null),Xa.x!==vc||Xa.y!==bb||Xa.z!==kc||Xa.w!==Ac)O.vertexAttrib4f(Rc,vc,bb,kc,Ac),Xa.x=vc,Xa.y=bb,Xa.z=kc,Xa.w=Ac;Y.buffer=k.colorBuffer;Bb=!1;$a=null;Xb=0;tc=!1;Sb=Yb=0;Kc=1;Tb=0;zd=5126;Xc=Mc=pd=Ec=0;pa(Y)?(Bb=!0,$a=V.createStream(34962,Y),zd=$a.dtype):($a=V.getBuffer(Y))?zd=$a.dtype:"constant"in Y?(Kc=2,"number"===typeof Y.constant?(pd=Y.constant,Mc=Xc=Ec=0):(pd=0<Y.constant.length?Y.constant[0]:0,Mc=1<Y.constant.length?Y.constant[1]:0,Xc=2<Y.constant.length?
Y.constant[2]:0,Ec=3<Y.constant.length?Y.constant[3]:0)):($a=pa(Y.buffer)?V.createStream(34962,Y.buffer):V.getBuffer(Y.buffer),zd="type"in Y?Ga[Y.type]:$a.dtype,tc=!!Y.normalized,Sb=Y.size|0,Yb=Y.offset|0,Tb=Y.stride|0,Xb=Y.divisor|0);ud=E.location;oc=H[ud];if(1===Kc){oc.buffer||O.enableVertexAttribArray(ud);wc=Sb||4;if(oc.type!==zd||oc.size!==wc||oc.buffer!==$a||oc.normalized!==tc||oc.offset!==Yb||oc.stride!==Tb)O.bindBuffer(34962,$a.buffer),O.vertexAttribPointer(ud,wc,zd,tc,Tb,Yb),oc.type=zd,oc.size=
wc,oc.buffer=$a,oc.normalized=tc,oc.offset=Yb,oc.stride=Tb;oc.divisor!==Xb&&(z.vertexAttribDivisorANGLE(ud,Xb),oc.divisor=Xb)}else if(oc.buffer&&(O.disableVertexAttribArray(ud),oc.buffer=null),oc.x!==pd||oc.y!==Mc||oc.z!==Xc||oc.w!==Ec)O.vertexAttrib4f(ud,pd,Mc,Xc,Ec),oc.x=pd,oc.y=Mc,oc.z=Xc,oc.w=Ec;ic=k.scale;db=ic[0];Vb=ic[1];t&&sc===db&&Zb===Vb||(sc=db,Zb=Vb,O.uniform2f(m.location,db,Vb));ec=k.scaleFract;jc=ec[0];Bc=ec[1];t&&yc===jc&&bd===Bc||(yc=jc,bd=Bc,O.uniform2f(Z.location,jc,Bc));Pc=k.translate;
Qc=Pc[0];Yc=Pc[1];t&&Sc===Qc&&ld===Yc||(Sc=Qc,ld=Yc,O.uniform2f(la.location,Qc,Yc));cd=k.translateFract;Zc=cd[0];dc=cd[1];t&&lc===Zc&&$c===dc||(lc=Zc,$c=dc,O.uniform2f(Q.location,Zc,dc));Uc=k.thickness;t&&dd===Uc||(dd=Uc,O.uniform1f(g.location,Uc));zc=k.depth;t&&hd===zc||(hd=zc,O.uniform1f(y.location,zc));Dd=M.call(this,X,k,t);ye=Dd[0];id=Dd[1];Pd=Dd[2];le=Dd[3];t&&wd===ye&&De===id&&fe===Pd&&$d===le||(wd=ye,De=id,fe=Pd,$d=le,O.uniform4f(ga.location,ye,id,Pd,le));Kd=k.dashLength;t&&Id===Kd||(Id=Kd,
O.uniform1f(W.location,Kd));nd=k.opacity;t&&Tc===nd||(Tc=nd,O.uniform1f(B.location,nd));(vd=k.dashTexture)&&"framebuffer"===vd._reglType&&(vd=vd.color[0]);sd=vd._texture;O.uniform1i(D.location,sd.bind());jd=k.count;0<jd?Ab?z.drawElementsInstancedANGLE(5,4,Ab.type,0<<(Ab.type-5121>>1),jd):z.drawArraysInstancedANGLE(5,0,4,jd):0>jd&&(Ab?O.drawElements(5,4,Ab.type,0<<(Ab.type-5121>>1)):O.drawArrays(5,0,4));X.viewportWidth=fd;X.viewportHeight=Vc;gc&&V.destroyStream(lb);Eb&&V.destroyStream(yb);fb&&V.destroyStream(La);
nb&&V.destroyStream(Na);Bb&&V.destroyStream($a);sd.unbind()}S.dirty=!0;ea.setVAO(null);p&&(e.cpuTime+=performance.now()-A)},draw:function(a){var b,A,z,k,R,l,r,v,K,q,U,n,F,I,C,M,J,ya,qa,aa,Gd,Ad,ze,$e,Se,Hd,Ce,Yd,Zd,ee,ia,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb;b=P.next;b!==P.cur&&(b?O.bindFramebuffer(36160,
b.framebuffer):O.bindFramebuffer(36160,null),P.cur=b);if(S.dirty){var xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb;xb=oa.dither;xb!==S.dither&&(xb?O.enable(3024):O.disable(3024),S.dither=xb);Ta=oa.depth_func;Ta!==S.depth_func&&(O.depthFunc(Ta),S.depth_func=Ta);ob=na[0];hc=na[1];if(ob!==za[0]||hc!==za[1])O.depthRange(ob,hc),za[0]=ob,za[1]=hc;Ac=oa.depth_mask;Ac!==S.depth_mask&&(O.depthMask(Ac),S.depth_mask=Ac);vc=Ca[0];bb=Ca[1];kc=Ca[2];Rc=Ca[3];if(vc!==
ja[0]||bb!==ja[1]||kc!==ja[2]||Rc!==ja[3])O.colorMask(vc,bb,kc,Rc),ja[0]=vc,ja[1]=bb,ja[2]=kc,ja[3]=Rc;Xa=oa.cull_enable;Xa!==S.cull_enable&&(Xa?O.enable(2884):O.disable(2884),S.cull_enable=Xa);kd=oa.cull_face;kd!==S.cull_face&&(O.cullFace(kd),S.cull_face=kd);Bb=oa.frontFace;Bb!==S.frontFace&&(O.frontFace(Bb),S.frontFace=Bb);$a=oa.lineWidth;$a!==S.lineWidth&&(O.lineWidth($a),S.lineWidth=$a);Xb=oa.polygonOffset_enable;Xb!==S.polygonOffset_enable&&(Xb?O.enable(32823):O.disable(32823),S.polygonOffset_enable=
Xb);tc=Pa[0];Yb=Pa[1];if(tc!==sa[0]||Yb!==sa[1])O.polygonOffset(tc,Yb),sa[0]=tc,sa[1]=Yb;Sb=oa.sample_alpha;Sb!==S.sample_alpha&&(Sb?O.enable(32926):O.disable(32926),S.sample_alpha=Sb);Kc=oa.sample_enable;Kc!==S.sample_enable&&(Kc?O.enable(32928):O.disable(32928),S.sample_enable=Kc);Tb=zb[0];zd=zb[1];if(Tb!==Ya[0]||zd!==Ya[1])O.sampleCoverage(Tb,zd),Ya[0]=Tb,Ya[1]=zd;Ec=oa.stencil_mask;Ec!==S.stencil_mask&&(O.stencilMask(Ec),S.stencil_mask=Ec);pd=ha[0];Mc=ha[1];Xc=ha[2];if(pd!==ua[0]||Mc!==ua[1]||
Xc!==ua[2])O.stencilFunc(pd,Mc,Xc),ua[0]=pd,ua[1]=Mc,ua[2]=Xc;ud=Ib[0];oc=Ib[1];wc=Ib[2];ic=Ib[3];if(ud!==fa[0]||oc!==fa[1]||wc!==fa[2]||ic!==fa[3])O.stencilOpSeparate(ud,oc,wc,ic),fa[0]=ud,fa[1]=oc,fa[2]=wc,fa[3]=ic;db=Fa[0];sc=Fa[1];Vb=Fa[2];Zb=Fa[3];if(db!==mb[0]||sc!==mb[1]||Vb!==mb[2]||Zb!==mb[3])O.stencilOpSeparate(db,sc,Vb,Zb),mb[0]=db,mb[1]=sc,mb[2]=Vb,mb[3]=Zb}A=a.viewport;z=A.x|0;k=A.y|0;R="width"in A?A.width|0:X.framebufferWidth-z;l="height"in A?A.height|0:X.framebufferHeight-k;r=X.viewportWidth;
X.viewportWidth=R;v=X.viewportHeight;X.viewportHeight=l;O.viewport(z,k,R,l);va[0]=z;va[1]=k;va[2]=R;va[3]=l;O.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;O.enable(3042);S.blend_enable=!0;O.blendEquationSeparate(32774,32774);Ba[0]=32774;Ba[1]=32774;O.blendFuncSeparate(770,771,773,1);da[0]=770;da[1]=771;da[2]=773;da[3]=1;(K=t.call(this,X,a,0))?O.enable(2929):O.disable(2929);S.depth_enable=K;q=a.viewport;U=q.x|0;n=q.y|0;F="width"in q?q.width|0:X.framebufferWidth-U;I="height"in q?q.height|0:X.framebufferHeight-
n;O.scissor(U,n,F,I);u[0]=U;u[1]=n;u[2]=F;u[3]=I;O.enable(3089);S.scissor_enable=!0;O.disable(2960);S.stencil_enable=!1;if(C=S.profile)M=performance.now(),e.count++;O.useProgram(p.program);J=x.angle_instanced_arrays;ea.setVAO(null);ra.buffer=a.positionBuffer;ya=!1;qa=null;aa=0;Gd=!1;ze=Ad=0;$e=1;Se=0;Hd=5126;ee=Zd=Yd=Ce=0;pa(ra)?(ya=!0,qa=V.createStream(34962,ra),Hd=qa.dtype):(qa=V.getBuffer(ra))?Hd=qa.dtype:"constant"in ra?($e=2,"number"===typeof ra.constant?(Yd=ra.constant,Zd=ee=Ce=0):(Yd=0<ra.constant.length?
ra.constant[0]:0,Zd=1<ra.constant.length?ra.constant[1]:0,ee=2<ra.constant.length?ra.constant[2]:0,Ce=3<ra.constant.length?ra.constant[3]:0)):(qa=pa(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Hd="type"in ra?Ga[ra.type]:qa.dtype,Gd=!!ra.normalized,ze=ra.size|0,Ad=ra.offset|0,Se=ra.stride|0,aa=ra.divisor|0);ia=Aa.location;md=H[ia];if(1===$e){md.buffer||O.enableVertexAttribArray(ia);ad=ze||2;if(md.type!==Hd||md.size!==ad||md.buffer!==qa||md.normalized!==Gd||md.offset!==Ad||md.stride!==
Se)O.bindBuffer(34962,qa.buffer),O.vertexAttribPointer(ia,ad,Hd,Gd,Se,Ad),md.type=Hd,md.size=ad,md.buffer=qa,md.normalized=Gd,md.offset=Ad,md.stride=Se;md.divisor!==aa&&(J.vertexAttribDivisorANGLE(ia,aa),md.divisor=aa)}else if(md.buffer&&(O.disableVertexAttribArray(ia),md.buffer=null),md.x!==Yd||md.y!==Zd||md.z!==ee||md.w!==Ce)O.vertexAttrib4f(ia,Yd,Zd,ee,Ce),md.x=Yd,md.y=Zd,md.z=ee,md.w=Ce;wa.buffer=a.positionBuffer;rd=!1;Lc=null;od=0;Fc=!1;Oc=ed=0;Wc=1;Cb=0;Gb=5126;Db=xc=Ab=uc=0;pa(wa)?(rd=!0,Lc=
V.createStream(34962,wa),Gb=Lc.dtype):(Lc=V.getBuffer(wa))?Gb=Lc.dtype:"constant"in wa?(Wc=2,"number"===typeof wa.constant?(Ab=wa.constant,xc=Db=uc=0):(Ab=0<wa.constant.length?wa.constant[0]:0,xc=1<wa.constant.length?wa.constant[1]:0,Db=2<wa.constant.length?wa.constant[2]:0,uc=3<wa.constant.length?wa.constant[3]:0)):(Lc=pa(wa.buffer)?V.createStream(34962,wa.buffer):V.getBuffer(wa.buffer),Gb="type"in wa?Ga[wa.type]:Lc.dtype,Fc=!!wa.normalized,Oc=wa.size|0,ed=wa.offset|0,Cb=wa.stride|0,od=wa.divisor|
0);Ic=w.location;mc=H[Ic];if(1===Wc){mc.buffer||O.enableVertexAttribArray(Ic);Gc=Oc||2;if(mc.type!==Gb||mc.size!==Gc||mc.buffer!==Lc||mc.normalized!==Fc||mc.offset!==ed||mc.stride!==Cb)O.bindBuffer(34962,Lc.buffer),O.vertexAttribPointer(Ic,Gc,Gb,Fc,Cb,ed),mc.type=Gb,mc.size=Gc,mc.buffer=Lc,mc.normalized=Fc,mc.offset=ed,mc.stride=Cb;mc.divisor!==od&&(J.vertexAttribDivisorANGLE(Ic,od),mc.divisor=od)}else if(mc.buffer&&(O.disableVertexAttribArray(Ic),mc.buffer=null),mc.x!==Ab||mc.y!==xc||mc.z!==Db||
mc.w!==uc)O.vertexAttrib4f(Ic,Ab,xc,Db,uc),mc.x=Ab,mc.y=xc,mc.z=Db,mc.w=uc;xa.buffer=a.positionFractBuffer;fd=!1;Vc=null;Dc=0;fc=!1;pc=Hc=0;qc=1;nc=0;gc=5126;cb=Jb=Jc=lb=0;pa(xa)?(fd=!0,Vc=V.createStream(34962,xa),gc=Vc.dtype):(Vc=V.getBuffer(xa))?gc=Vc.dtype:"constant"in xa?(qc=2,"number"===typeof xa.constant?(Jc=xa.constant,Jb=cb=lb=0):(Jc=0<xa.constant.length?xa.constant[0]:0,Jb=1<xa.constant.length?xa.constant[1]:0,cb=2<xa.constant.length?xa.constant[2]:0,lb=3<xa.constant.length?xa.constant[3]:
0)):(Vc=pa(xa.buffer)?V.createStream(34962,xa.buffer):V.getBuffer(xa.buffer),gc="type"in xa?Ga[xa.type]:Vc.dtype,fc=!!xa.normalized,pc=xa.size|0,Hc=xa.offset|0,nc=xa.stride|0,Dc=xa.divisor|0);Pb=f.location;ab=H[Pb];if(1===qc){ab.buffer||O.enableVertexAttribArray(Pb);pb=pc||2;if(ab.type!==gc||ab.size!==pb||ab.buffer!==Vc||ab.normalized!==fc||ab.offset!==Hc||ab.stride!==nc)O.bindBuffer(34962,Vc.buffer),O.vertexAttribPointer(Pb,pb,gc,fc,nc,Hc),ab.type=gc,ab.size=pb,ab.buffer=Vc,ab.normalized=fc,ab.offset=
Hc,ab.stride=nc;ab.divisor!==Dc&&(J.vertexAttribDivisorANGLE(Pb,Dc),ab.divisor=Dc)}else if(ab.buffer&&(O.disableVertexAttribArray(Pb),ab.buffer=null),ab.x!==Jc||ab.y!==Jb||ab.z!==cb||ab.w!==lb)O.vertexAttrib4f(Pb,Jc,Jb,cb,lb),ab.x=Jc,ab.y=Jb,ab.z=cb,ab.w=lb;ka.buffer=a.positionFractBuffer;Va=!1;td=null;Kb=0;Lb=!1;Qb=rc=0;jb=1;Hb=0;Eb=5126;Rb=$b=hb=yb=0;pa(ka)?(Va=!0,td=V.createStream(34962,ka),Eb=td.dtype):(td=V.getBuffer(ka))?Eb=td.dtype:"constant"in ka?(jb=2,"number"===typeof ka.constant?(hb=ka.constant,
$b=Rb=yb=0):(hb=0<ka.constant.length?ka.constant[0]:0,$b=1<ka.constant.length?ka.constant[1]:0,Rb=2<ka.constant.length?ka.constant[2]:0,yb=3<ka.constant.length?ka.constant[3]:0)):(td=pa(ka.buffer)?V.createStream(34962,ka.buffer):V.getBuffer(ka.buffer),Eb="type"in ka?Ga[ka.type]:td.dtype,Lb=!!ka.normalized,Qb=ka.size|0,rc=ka.offset|0,Hb=ka.stride|0,Kb=ka.divisor|0);sb=ba.location;Ua=H[sb];if(1===jb){Ua.buffer||O.enableVertexAttribArray(sb);Wb=Qb||2;if(Ua.type!==Eb||Ua.size!==Wb||Ua.buffer!==td||Ua.normalized!==
Lb||Ua.offset!==rc||Ua.stride!==Hb)O.bindBuffer(34962,td.buffer),O.vertexAttribPointer(sb,Wb,Eb,Lb,Hb,rc),Ua.type=Eb,Ua.size=Wb,Ua.buffer=td,Ua.normalized=Lb,Ua.offset=rc,Ua.stride=Hb;Ua.divisor!==Kb&&(J.vertexAttribDivisorANGLE(sb,Kb),Ua.divisor=Kb)}else if(Ua.buffer&&(O.disableVertexAttribArray(sb),Ua.buffer=null),Ua.x!==hb||Ua.y!==$b||Ua.z!==Rb||Ua.w!==yb)O.vertexAttrib4f(sb,hb,$b,Rb,yb),Ua.x=hb,Ua.y=$b,Ua.z=Rb,Ua.w=yb;Y.buffer=a.colorBuffer;qb=!1;cc=null;ib=0;rb=!1;tb=Ja=0;Ka=1;eb=0;fb=5126;vb=
Wa=kb=La=0;pa(Y)?(qb=!0,cc=V.createStream(34962,Y),fb=cc.dtype):(cc=V.getBuffer(Y))?fb=cc.dtype:"constant"in Y?(Ka=2,"number"===typeof Y.constant?(kb=Y.constant,Wa=vb=La=0):(kb=0<Y.constant.length?Y.constant[0]:0,Wa=1<Y.constant.length?Y.constant[1]:0,vb=2<Y.constant.length?Y.constant[2]:0,La=3<Y.constant.length?Y.constant[3]:0)):(cc=pa(Y.buffer)?V.createStream(34962,Y.buffer):V.getBuffer(Y.buffer),fb="type"in Y?Ga[Y.type]:cc.dtype,rb=!!Y.normalized,tb=Y.size|0,Ja=Y.offset|0,eb=Y.stride|0,ib=Y.divisor|
0);ub=E.location;Oa=H[ub];if(1===Ka){Oa.buffer||O.enableVertexAttribArray(ub);Cc=tb||4;if(Oa.type!==fb||Oa.size!==Cc||Oa.buffer!==cc||Oa.normalized!==rb||Oa.offset!==Ja||Oa.stride!==eb)O.bindBuffer(34962,cc.buffer),O.vertexAttribPointer(ub,Cc,fb,rb,eb,Ja),Oa.type=fb,Oa.size=Cc,Oa.buffer=cc,Oa.normalized=rb,Oa.offset=Ja,Oa.stride=eb;Oa.divisor!==ib&&(J.vertexAttribDivisorANGLE(ub,ib),Oa.divisor=ib)}else if(Oa.buffer&&(O.disableVertexAttribArray(ub),Oa.buffer=null),Oa.x!==kb||Oa.y!==Wa||Oa.z!==vb||
Oa.w!==La)O.vertexAttrib4f(ub,kb,Wa,vb,La),Oa.x=kb,Oa.y=Wa,Oa.z=vb,Oa.w=La;Ra=L.location;Mb=H[Ra];Mb.buffer||O.enableVertexAttribArray(Ra);if(5126!==Mb.type||1!==Mb.size||Mb.buffer!==h||!1!==Mb.normalized||0!==Mb.offset||8!==Mb.stride)O.bindBuffer(34962,h.buffer),O.vertexAttribPointer(Ra,1,5126,!1,8,0),Mb.type=5126,Mb.size=1,Mb.buffer=h,Mb.normalized=!1,Mb.offset=0,Mb.stride=8;0!==Mb.divisor&&(J.vertexAttribDivisorANGLE(Ra,0),Mb.divisor=0);Fb=G.location;Ma=H[Fb];Ma.buffer||O.enableVertexAttribArray(Fb);
if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==d||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)O.bindBuffer(34962,d.buffer),O.vertexAttribPointer(Fb,1,5126,!1,8,4),Ma.type=5126,Ma.size=1,Ma.buffer=d,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(J.vertexAttribDivisorANGLE(Fb,0),Ma.divisor=0);Cd=a.scale;O.uniform2f(m.location,Cd[0],Cd[1]);Za=a.scaleFract;O.uniform2f(Z.location,Za[0],Za[1]);Nb=a.translate;O.uniform2f(la.location,Nb[0],Nb[1]);Ob=a.translateFract;O.uniform2f(Q.location,Ob[0],
Ob[1]);O.uniform1f(g.location,a.thickness);O.uniform1f(y.location,a.depth);nb=c.call(this,X,a,0);O.uniform4f(ga.location,nb[0],nb[1],nb[2],nb[3]);O.uniform1f(W.location,a.dashLength);O.uniform1f(B.location,a.opacity);(Na=a.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);ac=Na._texture;O.uniform1i(D.location,ac.bind());(Qa=T.elements)?O.bindBuffer(34963,Qa.buffer.buffer):ea.currentVAO&&(Qa=N.getElements(ea.currentVAO.elements))&&O.bindBuffer(34963,Qa.buffer.buffer);wb=a.count;0<wb?Qa?
J.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),wb):J.drawArraysInstancedANGLE(5,0,4,wb):0>wb&&(Qa?O.drawElements(5,4,Qa.type,0<<(Qa.type-5121>>1)):O.drawArrays(5,0,4));S.dirty=!0;ea.setVAO(null);X.viewportWidth=r;X.viewportHeight=v;C&&(e.cpuTime+=performance.now()-M);ya&&V.destroyStream(qa);rd&&V.destroyStream(Lc);fd&&V.destroyStream(Vc);Va&&V.destroyStream(td);qb&&V.destroyStream(cc);ac.unbind()},scope:function(a,c,g){var f,m,p,x,u,t,w,ha,sa,y,va,Pa,zb,N,D,da,fa,C,B,E,G,O,ua,P,J,M,
ea,Q,ja,Ya,ba,W,Aa,za,Z,na,Fa,Ca,Ib,ma,L,la,H,Da,ga,Ba,mb,Ea,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,ia,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,
ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe;f=a.viewport;m=f.x|0;p=f.y|0;x="width"in f?f.width|0:X.framebufferWidth-m;u="height"in f?f.height|0:X.framebufferHeight-p;t=X.viewportWidth;X.viewportWidth=x;w=X.viewportHeight;X.viewportHeight=u;ha=R[0];R[0]=m;sa=R[1];R[1]=p;y=R[2];R[2]=x;va=R[3];R[3]=u;Pa=U[0];U[0]=0;zb=U[1];U[1]=0;N=U[2];U[2]=0;D=U[3];U[3]=0;da=oa.blend_enable;oa.blend_enable=!0;fa=qa[0];qa[0]=32774;C=qa[1];qa[1]=32774;B=ya[0];ya[0]=770;E=ya[1];ya[1]=
771;G=ya[2];ya[2]=773;O=ya[3];ya[3]=1;ua=b.call(this,X,a,g);P=oa.depth_enable;oa.depth_enable=ua;J=a.viewport;M=J.x|0;ea=J.y|0;Q="width"in J?J.width|0:X.framebufferWidth-M;ja="height"in J?J.height|0:X.framebufferHeight-ea;Ya=A[0];A[0]=M;ba=A[1];A[1]=ea;W=A[2];A[2]=Q;Aa=A[3];A[3]=ja;za=oa.scissor_enable;oa.scissor_enable=!0;Z=oa.stencil_enable;oa.stencil_enable=!1;if(na=S.profile)Fa=performance.now(),e.count++;Ca=T.offset;T.offset=0;Ib=T.count;T.count=4;ma=a.count;L=T.instances;T.instances=ma;la=T.primitive;
T.primitive=5;H=a.dashLength;Da=K[23];K[23]=H;ga=a.dashTexture;Ba=K[24];K[24]=ga;mb=a.depth;Ea=K[22];K[22]=mb;Vc=a.id;Dc=K[31];K[31]=Vc;fc=a.miterLimit;Hc=K[32];K[32]=fc;pc=l.call(this,X,a,g);qc=K[33];K[33]=pc;nc=a.opacity;gc=K[10];K[10]=nc;lb=X.pixelRatio;Jc=K[34];K[34]=lb;Jb=a.scale;cb=K[6];K[6]=Jb;Pb=a.scaleFract;ab=K[7];K[7]=Pb;pb=a.thickness;Va=K[21];K[21]=pb;ia=a.translate;Kb=K[8];K[8]=ia;Lb=a.translateFract;rc=K[9];K[9]=Lb;Qb=r.call(this,X,a,g);jb=K[3];K[3]=Qb;ra.buffer=a.positionBuffer;Hb=
!1;Eb=null;yb=0;hb=!1;Rb=$b=0;sb=1;Ua=0;Wb=5126;rb=ib=cc=qb=0;pa(ra)?(Hb=!0,Eb=V.createStream(34962,ra),Wb=Eb.dtype):(Eb=V.getBuffer(ra))?Wb=Eb.dtype:"constant"in ra?(sb=2,"number"===typeof ra.constant?(cc=ra.constant,ib=rb=qb=0):(cc=0<ra.constant.length?ra.constant[0]:0,ib=1<ra.constant.length?ra.constant[1]:0,rb=2<ra.constant.length?ra.constant[2]:0,qb=3<ra.constant.length?ra.constant[3]:0)):(Eb=pa(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Wb="type"in ra?Ga[ra.type]:Eb.dtype,
hb=!!ra.normalized,Rb=ra.size|0,$b=ra.offset|0,Ua=ra.stride|0,yb=ra.divisor|0);Ja=v.buffer;v.buffer=Eb;tb=v.divisor;v.divisor=yb;Ka=v.normalized;v.normalized=hb;eb=v.offset;v.offset=$b;fb=v.size;v.size=Rb;La=v.state;v.state=sb;kb=v.stride;v.stride=Ua;Wa=v.type;v.type=Wb;vb=v.w;v.w=qb;ub=v.x;v.x=cc;Oa=v.y;v.y=ib;Cc=v.z;v.z=rb;xa.buffer=a.positionFractBuffer;Ra=!1;Mb=null;Fb=0;Ma=!1;Za=Cd=0;Nb=1;Ob=0;nb=5126;wb=Qa=ac=Na=0;pa(xa)?(Ra=!0,Mb=V.createStream(34962,xa),nb=Mb.dtype):(Mb=V.getBuffer(xa))?nb=
Mb.dtype:"constant"in xa?(Nb=2,"number"===typeof xa.constant?(ac=xa.constant,Qa=wb=Na=0):(ac=0<xa.constant.length?xa.constant[0]:0,Qa=1<xa.constant.length?xa.constant[1]:0,wb=2<xa.constant.length?xa.constant[2]:0,Na=3<xa.constant.length?xa.constant[3]:0)):(Mb=pa(xa.buffer)?V.createStream(34962,xa.buffer):V.getBuffer(xa.buffer),nb="type"in xa?Ga[xa.type]:Mb.dtype,Ma=!!xa.normalized,Za=xa.size|0,Cd=xa.offset|0,Ob=xa.stride|0,Fb=xa.divisor|0);xb=k.buffer;k.buffer=Mb;Ta=k.divisor;k.divisor=Fb;ob=k.normalized;
k.normalized=Ma;hc=k.offset;k.offset=Cd;Ac=k.size;k.size=Za;vc=k.state;k.state=Nb;bb=k.stride;k.stride=Ob;kc=k.type;k.type=nb;Rc=k.w;k.w=Na;Xa=k.x;k.x=ac;kd=k.y;k.y=Qa;Bb=k.z;k.z=wb;wa.buffer=a.positionBuffer;$a=!1;Xb=null;tc=0;Yb=!1;Kc=Sb=0;Tb=1;zd=0;Ec=5126;ud=Xc=Mc=pd=0;pa(wa)?($a=!0,Xb=V.createStream(34962,wa),Ec=Xb.dtype):(Xb=V.getBuffer(wa))?Ec=Xb.dtype:"constant"in wa?(Tb=2,"number"===typeof wa.constant?(Mc=wa.constant,Xc=ud=pd=0):(Mc=0<wa.constant.length?wa.constant[0]:0,Xc=1<wa.constant.length?
wa.constant[1]:0,ud=2<wa.constant.length?wa.constant[2]:0,pd=3<wa.constant.length?wa.constant[3]:0)):(Xb=pa(wa.buffer)?V.createStream(34962,wa.buffer):V.getBuffer(wa.buffer),Ec="type"in wa?Ga[wa.type]:Xb.dtype,Yb=!!wa.normalized,Kc=wa.size|0,Sb=wa.offset|0,zd=wa.stride|0,tc=wa.divisor|0);oc=F.buffer;F.buffer=Xb;wc=F.divisor;F.divisor=tc;ic=F.normalized;F.normalized=Yb;db=F.offset;F.offset=Sb;sc=F.size;F.size=Kc;Vb=F.state;F.state=Tb;Zb=F.stride;F.stride=zd;ec=F.type;F.type=Ec;jc=F.w;F.w=pd;yc=F.x;
F.x=Mc;Bc=F.y;F.y=Xc;bd=F.z;F.z=ud;ka.buffer=a.positionFractBuffer;Pc=!1;Qc=null;Sc=0;Yc=!1;cd=ld=0;Zc=1;lc=0;dc=5126;zc=dd=Uc=$c=0;pa(ka)?(Pc=!0,Qc=V.createStream(34962,ka),dc=Qc.dtype):(Qc=V.getBuffer(ka))?dc=Qc.dtype:"constant"in ka?(Zc=2,"number"===typeof ka.constant?(Uc=ka.constant,dd=zc=$c=0):(Uc=0<ka.constant.length?ka.constant[0]:0,dd=1<ka.constant.length?ka.constant[1]:0,zc=2<ka.constant.length?ka.constant[2]:0,$c=3<ka.constant.length?ka.constant[3]:0)):(Qc=pa(ka.buffer)?V.createStream(34962,
ka.buffer):V.getBuffer(ka.buffer),dc="type"in ka?Ga[ka.type]:Qc.dtype,Yc=!!ka.normalized,cd=ka.size|0,ld=ka.offset|0,lc=ka.stride|0,Sc=ka.divisor|0);hd=I.buffer;I.buffer=Qc;Dd=I.divisor;I.divisor=Sc;ye=I.normalized;I.normalized=Yc;wd=I.offset;I.offset=ld;id=I.size;I.size=cd;De=I.state;I.state=Zc;Pd=I.stride;I.stride=lc;fe=I.type;I.type=dc;le=I.w;I.w=$c;$d=I.x;I.x=Uc;Kd=I.y;I.y=dd;Id=I.z;I.z=zc;Y.buffer=a.colorBuffer;nd=!1;Tc=null;vd=0;sd=!1;xd=jd=0;Bd=1;Ed=0;qe=5126;ie=ke=te=je=0;pa(Y)?(nd=!0,Tc=
V.createStream(34962,Y),qe=Tc.dtype):(Tc=V.getBuffer(Y))?qe=Tc.dtype:"constant"in Y?(Bd=2,"number"===typeof Y.constant?(te=Y.constant,ke=ie=je=0):(te=0<Y.constant.length?Y.constant[0]:0,ke=1<Y.constant.length?Y.constant[1]:0,ie=2<Y.constant.length?Y.constant[2]:0,je=3<Y.constant.length?Y.constant[3]:0)):(Tc=pa(Y.buffer)?V.createStream(34962,Y.buffer):V.getBuffer(Y.buffer),qe="type"in Y?Ga[Y.type]:Tc.dtype,sd=!!Y.normalized,xd=Y.size|0,jd=Y.offset|0,Ed=Y.stride|0,vd=Y.divisor|0);ge=n.buffer;n.buffer=
Tc;ue=n.divisor;n.divisor=vd;ce=n.normalized;n.normalized=sd;me=n.offset;n.offset=jd;Nc=n.size;n.size=xd;gd=n.state;n.state=Bd;ve=n.stride;n.stride=Ed;re=n.type;n.type=qe;Ld=n.w;n.w=je;Qd=n.x;n.x=te;Rd=n.y;n.y=ke;Sd=n.z;n.z=ie;ne=aa.buffer;aa.buffer=h;Ae=aa.divisor;aa.divisor=0;Ee=aa.normalized;aa.normalized=!1;se=aa.offset;aa.offset=0;Te=aa.size;aa.size=0;Ue=aa.state;aa.state=1;Pe=aa.stride;aa.stride=8;we=aa.type;aa.type=5126;He=aa.w;aa.w=0;Ke=aa.x;aa.x=0;Le=aa.y;aa.y=0;Me=aa.z;aa.z=0;Ie=q.buffer;
q.buffer=d;Md=q.divisor;q.divisor=0;Xd=q.normalized;q.normalized=!1;be=q.offset;q.offset=4;de=q.size;q.size=0;Ne=q.state;q.state=1;Jd=q.stride;q.stride=8;Td=q.type;q.type=5126;Fe=q.w;q.w=0;Oe=q.x;q.x=0;cf=q.y;q.y=0;bf=q.z;q.z=0;Ve=z.vert;z.vert=20;Qe=z.frag;z.frag=19;S.dirty=!0;c(X,a,g);X.viewportWidth=t;X.viewportHeight=w;R[0]=ha;R[1]=sa;R[2]=y;R[3]=va;U[0]=Pa;U[1]=zb;U[2]=N;U[3]=D;oa.blend_enable=da;qa[0]=fa;qa[1]=C;ya[0]=B;ya[1]=E;ya[2]=G;ya[3]=O;oa.depth_enable=P;A[0]=Ya;A[1]=ba;A[2]=W;A[3]=Aa;
oa.scissor_enable=za;oa.stencil_enable=Z;na&&(e.cpuTime+=performance.now()-Fa);T.offset=Ca;T.count=Ib;T.instances=L;T.primitive=la;K[23]=Da;K[24]=Ba;K[22]=Ea;K[31]=Dc;K[32]=Hc;K[33]=qc;K[10]=gc;K[34]=Jc;K[6]=cb;K[7]=ab;K[21]=Va;K[8]=Kb;K[9]=rc;K[3]=jb;Hb&&V.destroyStream(Eb);v.buffer=Ja;v.divisor=tb;v.normalized=Ka;v.offset=eb;v.size=fb;v.state=La;v.stride=kb;v.type=Wa;v.w=vb;v.x=ub;v.y=Oa;v.z=Cc;Ra&&V.destroyStream(Mb);k.buffer=xb;k.divisor=Ta;k.normalized=ob;k.offset=hc;k.size=Ac;k.state=vc;k.stride=
bb;k.type=kc;k.w=Rc;k.x=Xa;k.y=kd;k.z=Bb;$a&&V.destroyStream(Xb);F.buffer=oc;F.divisor=wc;F.normalized=ic;F.offset=db;F.size=sc;F.state=Vb;F.stride=Zb;F.type=ec;F.w=jc;F.x=yc;F.y=Bc;F.z=bd;Pc&&V.destroyStream(Qc);I.buffer=hd;I.divisor=Dd;I.normalized=ye;I.offset=wd;I.size=id;I.state=De;I.stride=Pd;I.type=fe;I.w=le;I.x=$d;I.y=Kd;I.z=Id;nd&&V.destroyStream(Tc);n.buffer=ge;n.divisor=ue;n.normalized=ce;n.offset=me;n.size=Nc;n.state=gd;n.stride=ve;n.type=re;n.w=Ld;n.x=Qd;n.y=Rd;n.z=Sd;aa.buffer=ne;aa.divisor=
Ae;aa.normalized=Ee;aa.offset=se;aa.size=Te;aa.state=Ue;aa.stride=Pe;aa.type=we;aa.w=He;aa.x=Ke;aa.y=Le;aa.z=Me;q.buffer=Ie;q.divisor=Md;q.normalized=Xd;q.offset=be;q.size=de;q.state=Ne;q.stride=Jd;q.type=Td;q.w=Fe;q.x=Oe;q.y=cf;q.z=bf;z.vert=Ve;z.frag=Qe;S.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,
L,G,B,m,Z,g,la,Q,H,Ea,V,X,S){var T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa,ka,Y,ta,Sa,Ia,gb,ca;T=a.attributes;N=a.buffer;x=a.context;P=a.current;O=a.draw;pa=a.elements;oa=a.extensions;z=a.framebuffer;K=a.gl;ea=a.isBufferArgs;U=a.next;ma=a.shader;qa=a.uniforms;Ba=a.vao;ya=U.blend_color;da=P.blend_color;Ca=U.blend_equation;ja=P.blend_equation;na=U.blend_func;za=P.blend_func;Pa=U.colorMask;sa=P.colorMask;zb=U.depth_range;Ya=P.depth_range;A=
U.polygonOffset_offset;u=P.polygonOffset_offset;ha=U.sample_coverage;ua=P.sample_coverage;Fa=U.scissor_box;mb=P.scissor_box;Ib=U.stencil_func;fa=P.stencil_func;R=U.stencil_opBack;va=P.stencil_opBack;Ga=U.stencil_opFront;ra=P.stencil_opFront;xa=U.viewport;wa=P.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};Sa={divisor:1,offset:4,stride:4};Ia={divisor:1,offset:16,stride:8};gb=
{divisor:1,offset:24,stride:8};ca={divisor:1,offset:0,stride:8};return{batch:function(a,c){var b,p,t,k,l,r;b=z.next;b!==z.cur&&(b?K.bindFramebuffer(36160,b.framebuffer):K.bindFramebuffer(36160,null),z.cur=b);if(P.dirty){var v,q,n,F,I,C,J,xa,qa,ya,aa,na,Fa,Ca,ma,Yd,Zd,ia,Wd,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb;v=U.dither;v!==P.dither&&(v?K.enable(3024):K.disable(3024),P.dither=v);q=U.depth_func;q!==P.depth_func&&(K.depthFunc(q),P.depth_func=q);n=zb[0];F=zb[1];if(n!==Ya[0]||F!==Ya[1])K.depthRange(n,F),
Ya[0]=n,Ya[1]=F;I=U.depth_mask;I!==P.depth_mask&&(K.depthMask(I),P.depth_mask=I);C=Pa[0];J=Pa[1];xa=Pa[2];qa=Pa[3];if(C!==sa[0]||J!==sa[1]||xa!==sa[2]||qa!==sa[3])K.colorMask(C,J,xa,qa),sa[0]=C,sa[1]=J,sa[2]=xa,sa[3]=qa;ya=U.frontFace;ya!==P.frontFace&&(K.frontFace(ya),P.frontFace=ya);aa=U.lineWidth;aa!==P.lineWidth&&(K.lineWidth(aa),P.lineWidth=aa);na=U.polygonOffset_enable;na!==P.polygonOffset_enable&&(na?K.enable(32823):K.disable(32823),P.polygonOffset_enable=na);Fa=A[0];Ca=A[1];if(Fa!==u[0]||
Ca!==u[1])K.polygonOffset(Fa,Ca),u[0]=Fa,u[1]=Ca;ma=U.sample_alpha;ma!==P.sample_alpha&&(ma?K.enable(32926):K.disable(32926),P.sample_alpha=ma);Yd=U.sample_enable;Yd!==P.sample_enable&&(Yd?K.enable(32928):K.disable(32928),P.sample_enable=Yd);Zd=ha[0];ia=ha[1];if(Zd!==ua[0]||ia!==ua[1])K.sampleCoverage(Zd,ia),ua[0]=Zd,ua[1]=ia;Wd=U.stencil_mask;Wd!==P.stencil_mask&&(K.stencilMask(Wd),P.stencil_mask=Wd);md=Ib[0];ad=Ib[1];rd=Ib[2];if(md!==fa[0]||ad!==fa[1]||rd!==fa[2])K.stencilFunc(md,ad,rd),fa[0]=md,
fa[1]=ad,fa[2]=rd;Lc=Ga[0];od=Ga[1];Fc=Ga[2];ed=Ga[3];if(Lc!==ra[0]||od!==ra[1]||Fc!==ra[2]||ed!==ra[3])K.stencilOpSeparate(Lc,od,Fc,ed),ra[0]=Lc,ra[1]=od,ra[2]=Fc,ra[3]=ed;Oc=R[0];Wc=R[1];Cb=R[2];Gb=R[3];if(Oc!==va[0]||Wc!==va[1]||Cb!==va[2]||Gb!==va[3])K.stencilOpSeparate(Oc,Wc,Cb,Gb),va[0]=Oc,va[1]=Wc,va[2]=Cb,va[3]=Gb}K.blendColor(0,0,0,0);da[0]=0;da[1]=0;da[2]=0;da[3]=0;K.enable(3042);P.blend_enable=!0;K.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;K.blendFuncSeparate(770,771,773,
1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;K.enable(2884);P.cull_enable=!0;K.cullFace(1029);P.cull_face=1029;K.enable(3089);P.scissor_enable=!0;K.disable(2960);P.stencil_enable=!1;if(p=P.profile)t=performance.now(),e.count+=c;K.useProgram(M.program);k=oa.angle_instanced_arrays;var uc,Ab,xc,Db,Ic;Ba.setVAO(null);uc=B.location;Ab=T[uc];Ab.buffer||K.enableVertexAttribArray(uc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==h||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)K.bindBuffer(34962,h.buffer),K.vertexAttribPointer(uc,
1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=h,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(k.vertexAttribDivisorANGLE(uc,0),Ab.divisor=0);xc=m.location;Db=T[xc];Db.buffer||K.enableVertexAttribArray(xc);if(5126!==Db.type||1!==Db.size||Db.buffer!==d||!1!==Db.normalized||4!==Db.offset||8!==Db.stride)K.bindBuffer(34962,d.buffer),K.vertexAttribPointer(xc,1,5126,!1,8,4),Db.type=5126,Db.size=1,Db.buffer=d,Db.normalized=!1,Db.offset=4,Db.stride=8;0!==Db.divisor&&(k.vertexAttribDivisorANGLE(xc,
0),Db.divisor=0);(Ic=O.elements)?K.bindBuffer(34963,Ic.buffer.buffer):Ba.currentVAO&&(Ic=pa.getElements(Ba.currentVAO.elements))&&K.bindBuffer(34963,Ic.buffer.buffer);for(l=0;l<c;++l){r=a[l];var mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,
Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc;mc=r.viewport;Gc=mc.x|0;fd=mc.y|0;Vc="width"in mc?mc.width|0:x.framebufferWidth-Gc;Dc="height"in mc?mc.height|0:x.framebufferHeight-fd;fc=x.viewportWidth;x.viewportWidth=Vc;Hc=x.viewportHeight;x.viewportHeight=Dc;K.viewport(Gc,fd,Vc,Dc);wa[0]=Gc;wa[1]=fd;wa[2]=Vc;wa[3]=Dc;(pc=Aa.call(this,x,r,l))?K.enable(2929):K.disable(2929);P.depth_enable=pc;qc=r.viewport;nc=qc.x|0;gc=qc.y|
0;lb="width"in qc?qc.width|0:x.framebufferWidth-nc;Jc="height"in qc?qc.height|0:x.framebufferHeight-gc;K.scissor(nc,gc,lb,Jc);mb[0]=nc;mb[1]=gc;mb[2]=lb;mb[3]=Jc;ta.buffer=r.positionBuffer;Jb=!1;cb=null;Pb=0;ab=!1;Va=pb=0;td=1;Kb=0;Lb=5126;Hb=jb=Qb=rc=0;ea(ta)?(Jb=!0,cb=N.createStream(34962,ta),Lb=cb.dtype):(cb=N.getBuffer(ta))?Lb=cb.dtype:"constant"in ta?(td=2,"number"===typeof ta.constant?(Qb=ta.constant,jb=Hb=rc=0):(Qb=0<ta.constant.length?ta.constant[0]:0,jb=1<ta.constant.length?ta.constant[1]:
0,Hb=2<ta.constant.length?ta.constant[2]:0,rc=3<ta.constant.length?ta.constant[3]:0)):(cb=ea(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),Lb="type"in ta?ka[ta.type]:cb.dtype,ab=!!ta.normalized,Va=ta.size|0,pb=ta.offset|0,Kb=ta.stride|0,Pb=ta.divisor|0);Eb=E.location;yb=T[Eb];if(1===td){yb.buffer||K.enableVertexAttribArray(Eb);hb=Va||2;if(yb.type!==Lb||yb.size!==hb||yb.buffer!==cb||yb.normalized!==ab||yb.offset!==pb||yb.stride!==Kb)K.bindBuffer(34962,cb.buffer),K.vertexAttribPointer(Eb,
hb,Lb,ab,Kb,pb),yb.type=Lb,yb.size=hb,yb.buffer=cb,yb.normalized=ab,yb.offset=pb,yb.stride=Kb;yb.divisor!==Pb&&(k.vertexAttribDivisorANGLE(Eb,Pb),yb.divisor=Pb)}else if(yb.buffer&&(K.disableVertexAttribArray(Eb),yb.buffer=null),yb.x!==Qb||yb.y!==jb||yb.z!==Hb||yb.w!==rc)K.vertexAttrib4f(Eb,Qb,jb,Hb,rc),yb.x=Qb,yb.y=jb,yb.z=Hb,yb.w=rc;Ia.buffer=r.positionBuffer;$b=!1;Rb=null;sb=0;Ua=!1;qb=Wb=0;cc=1;ib=0;rb=5126;eb=Ka=tb=Ja=0;ea(Ia)?($b=!0,Rb=N.createStream(34962,Ia),rb=Rb.dtype):(Rb=N.getBuffer(Ia))?
rb=Rb.dtype:"constant"in Ia?(cc=2,"number"===typeof Ia.constant?(tb=Ia.constant,Ka=eb=Ja=0):(tb=0<Ia.constant.length?Ia.constant[0]:0,Ka=1<Ia.constant.length?Ia.constant[1]:0,eb=2<Ia.constant.length?Ia.constant[2]:0,Ja=3<Ia.constant.length?Ia.constant[3]:0)):(Rb=ea(Ia.buffer)?N.createStream(34962,Ia.buffer):N.getBuffer(Ia.buffer),rb="type"in Ia?ka[Ia.type]:Rb.dtype,Ua=!!Ia.normalized,qb=Ia.size|0,Wb=Ia.offset|0,ib=Ia.stride|0,sb=Ia.divisor|0);fb=D.location;La=T[fb];if(1===cc){La.buffer||K.enableVertexAttribArray(fb);
kb=qb||2;if(La.type!==rb||La.size!==kb||La.buffer!==Rb||La.normalized!==Ua||La.offset!==Wb||La.stride!==ib)K.bindBuffer(34962,Rb.buffer),K.vertexAttribPointer(fb,kb,rb,Ua,ib,Wb),La.type=rb,La.size=kb,La.buffer=Rb,La.normalized=Ua,La.offset=Wb,La.stride=ib;La.divisor!==sb&&(k.vertexAttribDivisorANGLE(fb,sb),La.divisor=sb)}else if(La.buffer&&(K.disableVertexAttribArray(fb),La.buffer=null),La.x!==tb||La.y!==Ka||La.z!==eb||La.w!==Ja)K.vertexAttrib4f(fb,tb,Ka,eb,Ja),La.x=tb,La.y=Ka,La.z=eb,La.w=Ja;gb.buffer=
r.positionBuffer;Wa=!1;vb=null;ub=0;Oa=!1;Ra=Cc=0;Mb=1;Fb=0;Ma=5126;Ob=Nb=Za=Cd=0;ea(gb)?(Wa=!0,vb=N.createStream(34962,gb),Ma=vb.dtype):(vb=N.getBuffer(gb))?Ma=vb.dtype:"constant"in gb?(Mb=2,"number"===typeof gb.constant?(Za=gb.constant,Nb=Ob=Cd=0):(Za=0<gb.constant.length?gb.constant[0]:0,Nb=1<gb.constant.length?gb.constant[1]:0,Ob=2<gb.constant.length?gb.constant[2]:0,Cd=3<gb.constant.length?gb.constant[3]:0)):(vb=ea(gb.buffer)?N.createStream(34962,gb.buffer):N.getBuffer(gb.buffer),Ma="type"in
gb?ka[gb.type]:vb.dtype,Oa=!!gb.normalized,Ra=gb.size|0,Cc=gb.offset|0,Fb=gb.stride|0,ub=gb.divisor|0);nb=la.location;Na=T[nb];if(1===Mb){Na.buffer||K.enableVertexAttribArray(nb);ac=Ra||2;if(Na.type!==Ma||Na.size!==ac||Na.buffer!==vb||Na.normalized!==Oa||Na.offset!==Cc||Na.stride!==Fb)K.bindBuffer(34962,vb.buffer),K.vertexAttribPointer(nb,ac,Ma,Oa,Fb,Cc),Na.type=Ma,Na.size=ac,Na.buffer=vb,Na.normalized=Oa,Na.offset=Cc,Na.stride=Fb;Na.divisor!==ub&&(k.vertexAttribDivisorANGLE(nb,ub),Na.divisor=ub)}else if(Na.buffer&&
(K.disableVertexAttribArray(nb),Na.buffer=null),Na.x!==Za||Na.y!==Nb||Na.z!==Ob||Na.w!==Cd)K.vertexAttrib4f(nb,Za,Nb,Ob,Cd),Na.x=Za,Na.y=Nb,Na.z=Ob,Na.w=Cd;ca.buffer=r.positionBuffer;Qa=!1;wb=null;xb=0;Ta=!1;hc=ob=0;Ac=1;vc=0;bb=5126;kd=Xa=Rc=kc=0;ea(ca)?(Qa=!0,wb=N.createStream(34962,ca),bb=wb.dtype):(wb=N.getBuffer(ca))?bb=wb.dtype:"constant"in ca?(Ac=2,"number"===typeof ca.constant?(Rc=ca.constant,Xa=kd=kc=0):(Rc=0<ca.constant.length?ca.constant[0]:0,Xa=1<ca.constant.length?ca.constant[1]:0,kd=
2<ca.constant.length?ca.constant[2]:0,kc=3<ca.constant.length?ca.constant[3]:0)):(wb=ea(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),bb="type"in ca?ka[ca.type]:wb.dtype,Ta=!!ca.normalized,hc=ca.size|0,ob=ca.offset|0,vc=ca.stride|0,xb=ca.divisor|0);Bb=H.location;$a=T[Bb];if(1===Ac){$a.buffer||K.enableVertexAttribArray(Bb);Xb=hc||2;if($a.type!==bb||$a.size!==Xb||$a.buffer!==wb||$a.normalized!==Ta||$a.offset!==ob||$a.stride!==vc)K.bindBuffer(34962,wb.buffer),K.vertexAttribPointer(Bb,
Xb,bb,Ta,vc,ob),$a.type=bb,$a.size=Xb,$a.buffer=wb,$a.normalized=Ta,$a.offset=ob,$a.stride=vc;$a.divisor!==xb&&(k.vertexAttribDivisorANGLE(Bb,xb),$a.divisor=xb)}else if($a.buffer&&(K.disableVertexAttribArray(Bb),$a.buffer=null),$a.x!==Rc||$a.y!==Xa||$a.z!==kd||$a.w!==kc)K.vertexAttrib4f(Bb,Rc,Xa,kd,kc),$a.x=Rc,$a.y=Xa,$a.z=kd,$a.w=kc;Y.buffer=r.colorBuffer;tc=!1;Yb=null;Sb=0;Kc=!1;zd=Tb=0;Ec=1;pd=0;Mc=5126;wc=oc=ud=Xc=0;ea(Y)?(tc=!0,Yb=N.createStream(34962,Y),Mc=Yb.dtype):(Yb=N.getBuffer(Y))?Mc=Yb.dtype:
"constant"in Y?(Ec=2,"number"===typeof Y.constant?(ud=Y.constant,oc=wc=Xc=0):(ud=0<Y.constant.length?Y.constant[0]:0,oc=1<Y.constant.length?Y.constant[1]:0,wc=2<Y.constant.length?Y.constant[2]:0,Xc=3<Y.constant.length?Y.constant[3]:0)):(Yb=ea(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),Mc="type"in Y?ka[Y.type]:Yb.dtype,Kc=!!Y.normalized,zd=Y.size|0,Tb=Y.offset|0,pd=Y.stride|0,Sb=Y.divisor|0);ic=ba.location;db=T[ic];if(1===Ec){db.buffer||K.enableVertexAttribArray(ic);sc=zd||4;if(db.type!==
Mc||db.size!==sc||db.buffer!==Yb||db.normalized!==Kc||db.offset!==Tb||db.stride!==pd)K.bindBuffer(34962,Yb.buffer),K.vertexAttribPointer(ic,sc,Mc,Kc,pd,Tb),db.type=Mc,db.size=sc,db.buffer=Yb,db.normalized=Kc,db.offset=Tb,db.stride=pd;db.divisor!==Sb&&(k.vertexAttribDivisorANGLE(ic,Sb),db.divisor=Sb)}else if(db.buffer&&(K.disableVertexAttribArray(ic),db.buffer=null),db.x!==ud||db.y!==oc||db.z!==wc||db.w!==Xc)K.vertexAttrib4f(ic,ud,oc,wc,Xc),db.x=ud,db.y=oc,db.z=wc,db.w=Xc;Sa.buffer=r.colorBuffer;Vb=
!1;Zb=null;ec=0;jc=!1;Bc=yc=0;bd=1;Pc=0;Qc=5126;cd=ld=Yc=Sc=0;ea(Sa)?(Vb=!0,Zb=N.createStream(34962,Sa),Qc=Zb.dtype):(Zb=N.getBuffer(Sa))?Qc=Zb.dtype:"constant"in Sa?(bd=2,"number"===typeof Sa.constant?(Yc=Sa.constant,ld=cd=Sc=0):(Yc=0<Sa.constant.length?Sa.constant[0]:0,ld=1<Sa.constant.length?Sa.constant[1]:0,cd=2<Sa.constant.length?Sa.constant[2]:0,Sc=3<Sa.constant.length?Sa.constant[3]:0)):(Zb=ea(Sa.buffer)?N.createStream(34962,Sa.buffer):N.getBuffer(Sa.buffer),Qc="type"in Sa?ka[Sa.type]:Zb.dtype,
jc=!!Sa.normalized,Bc=Sa.size|0,yc=Sa.offset|0,Pc=Sa.stride|0,ec=Sa.divisor|0);Zc=W.location;lc=T[Zc];if(1===bd){lc.buffer||K.enableVertexAttribArray(Zc);dc=Bc||4;if(lc.type!==Qc||lc.size!==dc||lc.buffer!==Zb||lc.normalized!==jc||lc.offset!==yc||lc.stride!==Pc)K.bindBuffer(34962,Zb.buffer),K.vertexAttribPointer(Zc,dc,Qc,jc,Pc,yc),lc.type=Qc,lc.size=dc,lc.buffer=Zb,lc.normalized=jc,lc.offset=yc,lc.stride=Pc;lc.divisor!==ec&&(k.vertexAttribDivisorANGLE(Zc,ec),lc.divisor=ec)}else if(lc.buffer&&(K.disableVertexAttribArray(Zc),
lc.buffer=null),lc.x!==Yc||lc.y!==ld||lc.z!==cd||lc.w!==Sc)K.vertexAttrib4f(Zc,Yc,ld,cd,Sc),lc.x=Yc,lc.y=ld,lc.z=cd,lc.w=Sc;$c=r.scale;Uc=$c[0];zc=$c[1];l&&dd===Uc&&hd===zc||(dd=Uc,hd=zc,K.uniform2f(Ea.location,Uc,zc));Dd=r.translate;ye=Dd[0];id=Dd[1];l&&wd===ye&&De===id||(wd=ye,De=id,K.uniform2f(X.location,ye,id));Pd=r.thickness;l&&fe===Pd||(fe=Pd,K.uniform1f(V.location,Pd));le=r.depth;l&&$d===le||($d=le,K.uniform1f(G.location,le));Kd=f.call(this,x,r,l);Id=Kd[0];Tc=Kd[1];sd=Kd[2];xd=Kd[3];l&&nd===
Id&&vd===Tc&&jd===sd&&Bd===xd||(nd=Id,vd=Tc,jd=sd,Bd=xd,K.uniform4f(S.location,Id,Tc,sd,xd));Ed=r.miterLimit;l&&qe===Ed||(qe=Ed,K.uniform1f(Z.location,Ed));je=w.call(this,x,r,l);l&&te===je||(te=je,K.uniform1f(g.location,je));ke=r.dashLength;l&&ie===ke||(ie=ke,K.uniform1f(y.location,ke));ge=r.opacity;l&&ue===ge||(ue=ge,K.uniform1f(Q.location,ge));(ce=r.dashTexture)&&"framebuffer"===ce._reglType&&(ce=ce.color[0]);me=ce._texture;K.uniform1i(L.location,me.bind());Nc=r.count;0<Nc?Ic?k.drawElementsInstancedANGLE(5,
4,Ic.type,0<<(Ic.type-5121>>1),Nc):k.drawArraysInstancedANGLE(5,0,4,Nc):0>Nc&&(Ic?K.drawElements(5,4,Ic.type,0<<(Ic.type-5121>>1)):K.drawArrays(5,0,4));x.viewportWidth=fc;x.viewportHeight=Hc;Jb&&N.destroyStream(cb);$b&&N.destroyStream(Rb);Wa&&N.destroyStream(vb);Qa&&N.destroyStream(wb);tc&&N.destroyStream(Yb);Vb&&N.destroyStream(Zb);me.unbind()}P.dirty=!0;Ba.setVAO(null);p&&(e.cpuTime+=performance.now()-t)},draw:function(a){var f,k,l,r,w,v,q,n,F,I,C,J,M,xa,qa,ya,aa,Aa,na,Fa,Ca,ma,Yd,Zd,ia,Wd,md,ad,
rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd;f=z.next;f!==z.cur&&(f?K.bindFramebuffer(36160,f.framebuffer):K.bindFramebuffer(36160,null),z.cur=f);if(P.dirty){var Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc;Ec=
U.dither;Ec!==P.dither&&(Ec?K.enable(3024):K.disable(3024),P.dither=Ec);pd=U.depth_func;pd!==P.depth_func&&(K.depthFunc(pd),P.depth_func=pd);Mc=zb[0];Xc=zb[1];if(Mc!==Ya[0]||Xc!==Ya[1])K.depthRange(Mc,Xc),Ya[0]=Mc,Ya[1]=Xc;ud=U.depth_mask;ud!==P.depth_mask&&(K.depthMask(ud),P.depth_mask=ud);oc=Pa[0];wc=Pa[1];ic=Pa[2];db=Pa[3];if(oc!==sa[0]||wc!==sa[1]||ic!==sa[2]||db!==sa[3])K.colorMask(oc,wc,ic,db),sa[0]=oc,sa[1]=wc,sa[2]=ic,sa[3]=db;sc=U.frontFace;sc!==P.frontFace&&(K.frontFace(sc),P.frontFace=
sc);Vb=U.lineWidth;Vb!==P.lineWidth&&(K.lineWidth(Vb),P.lineWidth=Vb);Zb=U.polygonOffset_enable;Zb!==P.polygonOffset_enable&&(Zb?K.enable(32823):K.disable(32823),P.polygonOffset_enable=Zb);ec=A[0];jc=A[1];if(ec!==u[0]||jc!==u[1])K.polygonOffset(ec,jc),u[0]=ec,u[1]=jc;yc=U.sample_alpha;yc!==P.sample_alpha&&(yc?K.enable(32926):K.disable(32926),P.sample_alpha=yc);Bc=U.sample_enable;Bc!==P.sample_enable&&(Bc?K.enable(32928):K.disable(32928),P.sample_enable=Bc);bd=ha[0];Pc=ha[1];if(bd!==ua[0]||Pc!==ua[1])K.sampleCoverage(bd,
Pc),ua[0]=bd,ua[1]=Pc;Qc=U.stencil_mask;Qc!==P.stencil_mask&&(K.stencilMask(Qc),P.stencil_mask=Qc);Sc=Ib[0];Yc=Ib[1];ld=Ib[2];if(Sc!==fa[0]||Yc!==fa[1]||ld!==fa[2])K.stencilFunc(Sc,Yc,ld),fa[0]=Sc,fa[1]=Yc,fa[2]=ld;cd=Ga[0];Zc=Ga[1];lc=Ga[2];dc=Ga[3];if(cd!==ra[0]||Zc!==ra[1]||lc!==ra[2]||dc!==ra[3])K.stencilOpSeparate(cd,Zc,lc,dc),ra[0]=cd,ra[1]=Zc,ra[2]=lc,ra[3]=dc;$c=R[0];Uc=R[1];dd=R[2];zc=R[3];if($c!==va[0]||Uc!==va[1]||dd!==va[2]||zc!==va[3])K.stencilOpSeparate($c,Uc,dd,zc),va[0]=$c,va[1]=Uc,
va[2]=dd,va[3]=zc}k=a.viewport;l=k.x|0;r=k.y|0;w="width"in k?k.width|0:x.framebufferWidth-l;v="height"in k?k.height|0:x.framebufferHeight-r;q=x.viewportWidth;x.viewportWidth=w;n=x.viewportHeight;x.viewportHeight=v;K.viewport(l,r,w,v);wa[0]=l;wa[1]=r;wa[2]=w;wa[3]=v;K.blendColor(0,0,0,0);da[0]=0;da[1]=0;da[2]=0;da[3]=0;K.enable(3042);P.blend_enable=!0;K.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;K.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;K.enable(2884);
P.cull_enable=!0;K.cullFace(1029);P.cull_face=1029;(F=t.call(this,x,a,0))?K.enable(2929):K.disable(2929);P.depth_enable=F;I=a.viewport;C=I.x|0;J=I.y|0;M="width"in I?I.width|0:x.framebufferWidth-C;xa="height"in I?I.height|0:x.framebufferHeight-J;K.scissor(C,J,M,xa);mb[0]=C;mb[1]=J;mb[2]=M;mb[3]=xa;K.enable(3089);P.scissor_enable=!0;K.disable(2960);P.stencil_enable=!1;if(qa=P.profile)ya=performance.now(),e.count++;K.useProgram(p.program);aa=oa.angle_instanced_arrays;Ba.setVAO(null);ta.buffer=a.positionBuffer;
Aa=!1;na=null;Fa=0;Ca=!1;Yd=ma=0;Zd=1;ia=0;Wd=5126;Lc=rd=ad=md=0;ea(ta)?(Aa=!0,na=N.createStream(34962,ta),Wd=na.dtype):(na=N.getBuffer(ta))?Wd=na.dtype:"constant"in ta?(Zd=2,"number"===typeof ta.constant?(ad=ta.constant,rd=Lc=md=0):(ad=0<ta.constant.length?ta.constant[0]:0,rd=1<ta.constant.length?ta.constant[1]:0,Lc=2<ta.constant.length?ta.constant[2]:0,md=3<ta.constant.length?ta.constant[3]:0)):(na=ea(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),Wd="type"in ta?ka[ta.type]:na.dtype,
Ca=!!ta.normalized,Yd=ta.size|0,ma=ta.offset|0,ia=ta.stride|0,Fa=ta.divisor|0);od=E.location;Fc=T[od];if(1===Zd){Fc.buffer||K.enableVertexAttribArray(od);ed=Yd||2;if(Fc.type!==Wd||Fc.size!==ed||Fc.buffer!==na||Fc.normalized!==Ca||Fc.offset!==ma||Fc.stride!==ia)K.bindBuffer(34962,na.buffer),K.vertexAttribPointer(od,ed,Wd,Ca,ia,ma),Fc.type=Wd,Fc.size=ed,Fc.buffer=na,Fc.normalized=Ca,Fc.offset=ma,Fc.stride=ia;Fc.divisor!==Fa&&(aa.vertexAttribDivisorANGLE(od,Fa),Fc.divisor=Fa)}else if(Fc.buffer&&(K.disableVertexAttribArray(od),
Fc.buffer=null),Fc.x!==ad||Fc.y!==rd||Fc.z!==Lc||Fc.w!==md)K.vertexAttrib4f(od,ad,rd,Lc,md),Fc.x=ad,Fc.y=rd,Fc.z=Lc,Fc.w=md;Ia.buffer=a.positionBuffer;Oc=!1;Wc=null;Cb=0;Gb=!1;Ab=uc=0;xc=1;Db=0;Ic=5126;Vc=fd=Gc=mc=0;ea(Ia)?(Oc=!0,Wc=N.createStream(34962,Ia),Ic=Wc.dtype):(Wc=N.getBuffer(Ia))?Ic=Wc.dtype:"constant"in Ia?(xc=2,"number"===typeof Ia.constant?(Gc=Ia.constant,fd=Vc=mc=0):(Gc=0<Ia.constant.length?Ia.constant[0]:0,fd=1<Ia.constant.length?Ia.constant[1]:0,Vc=2<Ia.constant.length?Ia.constant[2]:
0,mc=3<Ia.constant.length?Ia.constant[3]:0)):(Wc=ea(Ia.buffer)?N.createStream(34962,Ia.buffer):N.getBuffer(Ia.buffer),Ic="type"in Ia?ka[Ia.type]:Wc.dtype,Gb=!!Ia.normalized,Ab=Ia.size|0,uc=Ia.offset|0,Db=Ia.stride|0,Cb=Ia.divisor|0);Dc=D.location;fc=T[Dc];if(1===xc){fc.buffer||K.enableVertexAttribArray(Dc);Hc=Ab||2;if(fc.type!==Ic||fc.size!==Hc||fc.buffer!==Wc||fc.normalized!==Gb||fc.offset!==uc||fc.stride!==Db)K.bindBuffer(34962,Wc.buffer),K.vertexAttribPointer(Dc,Hc,Ic,Gb,Db,uc),fc.type=Ic,fc.size=
Hc,fc.buffer=Wc,fc.normalized=Gb,fc.offset=uc,fc.stride=Db;fc.divisor!==Cb&&(aa.vertexAttribDivisorANGLE(Dc,Cb),fc.divisor=Cb)}else if(fc.buffer&&(K.disableVertexAttribArray(Dc),fc.buffer=null),fc.x!==Gc||fc.y!==fd||fc.z!==Vc||fc.w!==mc)K.vertexAttrib4f(Dc,Gc,fd,Vc,mc),fc.x=Gc,fc.y=fd,fc.z=Vc,fc.w=mc;gb.buffer=a.positionBuffer;pc=!1;qc=null;nc=0;gc=!1;Jc=lb=0;Jb=1;cb=0;Pb=5126;td=Va=pb=ab=0;ea(gb)?(pc=!0,qc=N.createStream(34962,gb),Pb=qc.dtype):(qc=N.getBuffer(gb))?Pb=qc.dtype:"constant"in gb?(Jb=
2,"number"===typeof gb.constant?(pb=gb.constant,Va=td=ab=0):(pb=0<gb.constant.length?gb.constant[0]:0,Va=1<gb.constant.length?gb.constant[1]:0,td=2<gb.constant.length?gb.constant[2]:0,ab=3<gb.constant.length?gb.constant[3]:0)):(qc=ea(gb.buffer)?N.createStream(34962,gb.buffer):N.getBuffer(gb.buffer),Pb="type"in gb?ka[gb.type]:qc.dtype,gc=!!gb.normalized,Jc=gb.size|0,lb=gb.offset|0,cb=gb.stride|0,nc=gb.divisor|0);Kb=la.location;Lb=T[Kb];if(1===Jb){Lb.buffer||K.enableVertexAttribArray(Kb);rc=Jc||2;if(Lb.type!==
Pb||Lb.size!==rc||Lb.buffer!==qc||Lb.normalized!==gc||Lb.offset!==lb||Lb.stride!==cb)K.bindBuffer(34962,qc.buffer),K.vertexAttribPointer(Kb,rc,Pb,gc,cb,lb),Lb.type=Pb,Lb.size=rc,Lb.buffer=qc,Lb.normalized=gc,Lb.offset=lb,Lb.stride=cb;Lb.divisor!==nc&&(aa.vertexAttribDivisorANGLE(Kb,nc),Lb.divisor=nc)}else if(Lb.buffer&&(K.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==pb||Lb.y!==Va||Lb.z!==td||Lb.w!==ab)K.vertexAttrib4f(Kb,pb,Va,td,ab),Lb.x=pb,Lb.y=Va,Lb.z=td,Lb.w=ab;ca.buffer=a.positionBuffer;
Qb=!1;jb=null;Hb=0;Eb=!1;hb=yb=0;$b=1;Rb=0;sb=5126;cc=qb=Wb=Ua=0;ea(ca)?(Qb=!0,jb=N.createStream(34962,ca),sb=jb.dtype):(jb=N.getBuffer(ca))?sb=jb.dtype:"constant"in ca?($b=2,"number"===typeof ca.constant?(Wb=ca.constant,qb=cc=Ua=0):(Wb=0<ca.constant.length?ca.constant[0]:0,qb=1<ca.constant.length?ca.constant[1]:0,cc=2<ca.constant.length?ca.constant[2]:0,Ua=3<ca.constant.length?ca.constant[3]:0)):(jb=ea(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),sb="type"in ca?ka[ca.type]:jb.dtype,
Eb=!!ca.normalized,hb=ca.size|0,yb=ca.offset|0,Rb=ca.stride|0,Hb=ca.divisor|0);ib=H.location;rb=T[ib];if(1===$b){rb.buffer||K.enableVertexAttribArray(ib);Ja=hb||2;if(rb.type!==sb||rb.size!==Ja||rb.buffer!==jb||rb.normalized!==Eb||rb.offset!==yb||rb.stride!==Rb)K.bindBuffer(34962,jb.buffer),K.vertexAttribPointer(ib,Ja,sb,Eb,Rb,yb),rb.type=sb,rb.size=Ja,rb.buffer=jb,rb.normalized=Eb,rb.offset=yb,rb.stride=Rb;rb.divisor!==Hb&&(aa.vertexAttribDivisorANGLE(ib,Hb),rb.divisor=Hb)}else if(rb.buffer&&(K.disableVertexAttribArray(ib),
rb.buffer=null),rb.x!==Wb||rb.y!==qb||rb.z!==cc||rb.w!==Ua)K.vertexAttrib4f(ib,Wb,qb,cc,Ua),rb.x=Wb,rb.y=qb,rb.z=cc,rb.w=Ua;Y.buffer=a.colorBuffer;tb=!1;Ka=null;eb=0;fb=!1;kb=La=0;Wa=1;vb=0;ub=5126;Mb=Ra=Cc=Oa=0;ea(Y)?(tb=!0,Ka=N.createStream(34962,Y),ub=Ka.dtype):(Ka=N.getBuffer(Y))?ub=Ka.dtype:"constant"in Y?(Wa=2,"number"===typeof Y.constant?(Cc=Y.constant,Ra=Mb=Oa=0):(Cc=0<Y.constant.length?Y.constant[0]:0,Ra=1<Y.constant.length?Y.constant[1]:0,Mb=2<Y.constant.length?Y.constant[2]:0,Oa=3<Y.constant.length?
Y.constant[3]:0)):(Ka=ea(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),ub="type"in Y?ka[Y.type]:Ka.dtype,fb=!!Y.normalized,kb=Y.size|0,La=Y.offset|0,vb=Y.stride|0,eb=Y.divisor|0);Fb=ba.location;Ma=T[Fb];if(1===Wa){Ma.buffer||K.enableVertexAttribArray(Fb);Cd=kb||4;if(Ma.type!==ub||Ma.size!==Cd||Ma.buffer!==Ka||Ma.normalized!==fb||Ma.offset!==La||Ma.stride!==vb)K.bindBuffer(34962,Ka.buffer),K.vertexAttribPointer(Fb,Cd,ub,fb,vb,La),Ma.type=ub,Ma.size=Cd,Ma.buffer=Ka,Ma.normalized=fb,
Ma.offset=La,Ma.stride=vb;Ma.divisor!==eb&&(aa.vertexAttribDivisorANGLE(Fb,eb),Ma.divisor=eb)}else if(Ma.buffer&&(K.disableVertexAttribArray(Fb),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Ra||Ma.z!==Mb||Ma.w!==Oa)K.vertexAttrib4f(Fb,Cc,Ra,Mb,Oa),Ma.x=Cc,Ma.y=Ra,Ma.z=Mb,Ma.w=Oa;Sa.buffer=a.colorBuffer;Za=!1;Nb=null;Ob=0;nb=!1;ac=Na=0;Qa=1;wb=0;xb=5126;Ac=hc=ob=Ta=0;ea(Sa)?(Za=!0,Nb=N.createStream(34962,Sa),xb=Nb.dtype):(Nb=N.getBuffer(Sa))?xb=Nb.dtype:"constant"in Sa?(Qa=2,"number"===typeof Sa.constant?(ob=
Sa.constant,hc=Ac=Ta=0):(ob=0<Sa.constant.length?Sa.constant[0]:0,hc=1<Sa.constant.length?Sa.constant[1]:0,Ac=2<Sa.constant.length?Sa.constant[2]:0,Ta=3<Sa.constant.length?Sa.constant[3]:0)):(Nb=ea(Sa.buffer)?N.createStream(34962,Sa.buffer):N.getBuffer(Sa.buffer),xb="type"in Sa?ka[Sa.type]:Nb.dtype,nb=!!Sa.normalized,ac=Sa.size|0,Na=Sa.offset|0,wb=Sa.stride|0,Ob=Sa.divisor|0);vc=W.location;bb=T[vc];if(1===Qa){bb.buffer||K.enableVertexAttribArray(vc);kc=ac||4;if(bb.type!==xb||bb.size!==kc||bb.buffer!==
Nb||bb.normalized!==nb||bb.offset!==Na||bb.stride!==wb)K.bindBuffer(34962,Nb.buffer),K.vertexAttribPointer(vc,kc,xb,nb,wb,Na),bb.type=xb,bb.size=kc,bb.buffer=Nb,bb.normalized=nb,bb.offset=Na,bb.stride=wb;bb.divisor!==Ob&&(aa.vertexAttribDivisorANGLE(vc,Ob),bb.divisor=Ob)}else if(bb.buffer&&(K.disableVertexAttribArray(vc),bb.buffer=null),bb.x!==ob||bb.y!==hc||bb.z!==Ac||bb.w!==Ta)K.vertexAttrib4f(vc,ob,hc,Ac,Ta),bb.x=ob,bb.y=hc,bb.z=Ac,bb.w=Ta;Rc=B.location;Xa=T[Rc];Xa.buffer||K.enableVertexAttribArray(Rc);
if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==h||!1!==Xa.normalized||0!==Xa.offset||8!==Xa.stride)K.bindBuffer(34962,h.buffer),K.vertexAttribPointer(Rc,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=h,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(aa.vertexAttribDivisorANGLE(Rc,0),Xa.divisor=0);kd=m.location;Bb=T[kd];Bb.buffer||K.enableVertexAttribArray(kd);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==d||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)K.bindBuffer(34962,d.buffer),K.vertexAttribPointer(kd,
1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=d,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&(aa.vertexAttribDivisorANGLE(kd,0),Bb.divisor=0);$a=a.scale;K.uniform2f(Ea.location,$a[0],$a[1]);Xb=a.translate;K.uniform2f(X.location,Xb[0],Xb[1]);K.uniform1f(V.location,a.thickness);K.uniform1f(G.location,a.depth);tc=c.call(this,x,a,0);K.uniform4f(S.location,tc[0],tc[1],tc[2],tc[3]);K.uniform1f(Z.location,a.miterLimit);Yb=b.call(this,x,a,0);K.uniform1f(g.location,Yb);K.uniform1f(y.location,
a.dashLength);K.uniform1f(Q.location,a.opacity);(Sb=a.dashTexture)&&"framebuffer"===Sb._reglType&&(Sb=Sb.color[0]);Kc=Sb._texture;K.uniform1i(L.location,Kc.bind());(Tb=O.elements)?K.bindBuffer(34963,Tb.buffer.buffer):Ba.currentVAO&&(Tb=pa.getElements(Ba.currentVAO.elements))&&K.bindBuffer(34963,Tb.buffer.buffer);zd=a.count;0<zd?Tb?aa.drawElementsInstancedANGLE(5,4,Tb.type,0<<(Tb.type-5121>>1),zd):aa.drawArraysInstancedANGLE(5,0,4,zd):0>zd&&(Tb?K.drawElements(5,4,Tb.type,0<<(Tb.type-5121>>1)):K.drawArrays(5,
0,4));P.dirty=!0;Ba.setVAO(null);x.viewportWidth=q;x.viewportHeight=n;qa&&(e.cpuTime+=performance.now()-ya);Aa&&N.destroyStream(na);Oc&&N.destroyStream(Wc);pc&&N.destroyStream(qc);Qb&&N.destroyStream(jb);tb&&N.destroyStream(Ka);Za&&N.destroyStream(Nb);Kc.unbind()},scope:function(a,c,b){var g,f,m,p,A,u,z,t,R,w,ha,sa,y,va,Pa,Ga,K,T,zb,D,ra,S,da,fa,B,E,G,ua,M,Q,wa,pa,ja,Ya,ba,W,V,Aa,za,X,Z,Ib,L,oa,H,la,Da,ga,Ba,mb,gc,lb,Ea,Jb,cb,Pb,ab,pb,Va,ia,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,
tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,
zf,Af;g=a.viewport;f=g.x|0;m=g.y|0;p="width"in g?g.width|0:x.framebufferWidth-f;A="height"in g?g.height|0:x.framebufferHeight-m;u=x.viewportWidth;x.viewportWidth=p;z=x.viewportHeight;x.viewportHeight=A;t=xa[0];xa[0]=f;R=xa[1];xa[1]=m;w=xa[2];xa[2]=p;ha=xa[3];xa[3]=A;sa=ya[0];ya[0]=0;y=ya[1];ya[1]=0;va=ya[2];ya[2]=0;Pa=ya[3];ya[3]=0;Ga=U.blend_enable;U.blend_enable=!0;K=Ca[0];Ca[0]=32774;T=Ca[1];Ca[1]=32774;zb=na[0];na[0]=770;D=na[1];na[1]=771;ra=na[2];na[2]=773;S=na[3];na[3]=1;da=U.cull_enable;U.cull_enable=
!0;fa=U.cull_face;U.cull_face=1029;B=l.call(this,x,a,b);E=U.depth_enable;U.depth_enable=B;G=a.viewport;ua=G.x|0;M=G.y|0;Q="width"in G?G.width|0:x.framebufferWidth-ua;wa="height"in G?G.height|0:x.framebufferHeight-M;pa=Fa[0];Fa[0]=ua;ja=Fa[1];Fa[1]=M;Ya=Fa[2];Fa[2]=Q;ba=Fa[3];Fa[3]=wa;W=U.scissor_enable;U.scissor_enable=!0;V=U.stencil_enable;U.stencil_enable=!1;if(Aa=P.profile)za=performance.now(),e.count++;X=O.offset;O.offset=0;Z=O.count;O.count=4;Ib=a.count;L=O.instances;O.instances=Ib;oa=O.primitive;
O.primitive=5;H=a.dashLength;la=qa[23];qa[23]=H;Da=a.dashTexture;ga=qa[24];qa[24]=Da;Ba=a.depth;mb=qa[22];qa[22]=Ba;gc=a.id;lb=qa[31];qa[31]=gc;Ea=a.miterLimit;Jb=qa[32];qa[32]=Ea;cb=r.call(this,x,a,b);Pb=qa[33];qa[33]=cb;ab=a.opacity;pb=qa[10];qa[10]=ab;Va=x.pixelRatio;ia=qa[34];qa[34]=Va;Kb=a.scale;Lb=qa[6];qa[6]=Kb;rc=a.scaleFract;Qb=qa[7];qa[7]=rc;jb=a.thickness;Hb=qa[21];qa[21]=jb;Eb=a.translate;yb=qa[8];qa[8]=Eb;hb=a.translateFract;$b=qa[9];qa[9]=hb;Rb=v.call(this,x,a,b);sb=qa[3];qa[3]=Rb;Y.buffer=
a.colorBuffer;Ua=!1;Wb=null;qb=0;cc=!1;rb=ib=0;Ja=1;tb=0;Ka=5126;kb=La=fb=eb=0;ea(Y)?(Ua=!0,Wb=N.createStream(34962,Y),Ka=Wb.dtype):(Wb=N.getBuffer(Y))?Ka=Wb.dtype:"constant"in Y?(Ja=2,"number"===typeof Y.constant?(fb=Y.constant,La=kb=eb=0):(fb=0<Y.constant.length?Y.constant[0]:0,La=1<Y.constant.length?Y.constant[1]:0,kb=2<Y.constant.length?Y.constant[2]:0,eb=3<Y.constant.length?Y.constant[3]:0)):(Wb=ea(Y.buffer)?N.createStream(34962,Y.buffer):N.getBuffer(Y.buffer),Ka="type"in Y?ka[Y.type]:Wb.dtype,
cc=!!Y.normalized,rb=Y.size|0,ib=Y.offset|0,tb=Y.stride|0,qb=Y.divisor|0);Wa=k.buffer;k.buffer=Wb;vb=k.divisor;k.divisor=qb;ub=k.normalized;k.normalized=cc;Oa=k.offset;k.offset=ib;Cc=k.size;k.size=rb;Ra=k.state;k.state=Ja;Mb=k.stride;k.stride=tb;Fb=k.type;k.type=Ka;Ma=k.w;k.w=eb;Cd=k.x;k.x=fb;Za=k.y;k.y=La;Nb=k.z;k.z=kb;ta.buffer=a.positionBuffer;Ob=!1;nb=null;Na=0;ac=!1;wb=Qa=0;xb=1;Ta=0;ob=5126;bb=vc=Ac=hc=0;ea(ta)?(Ob=!0,nb=N.createStream(34962,ta),ob=nb.dtype):(nb=N.getBuffer(ta))?ob=nb.dtype:
"constant"in ta?(xb=2,"number"===typeof ta.constant?(Ac=ta.constant,vc=bb=hc=0):(Ac=0<ta.constant.length?ta.constant[0]:0,vc=1<ta.constant.length?ta.constant[1]:0,bb=2<ta.constant.length?ta.constant[2]:0,hc=3<ta.constant.length?ta.constant[3]:0)):(nb=ea(ta.buffer)?N.createStream(34962,ta.buffer):N.getBuffer(ta.buffer),ob="type"in ta?ka[ta.type]:nb.dtype,ac=!!ta.normalized,wb=ta.size|0,Qa=ta.offset|0,Ta=ta.stride|0,Na=ta.divisor|0);kc=F.buffer;F.buffer=nb;Rc=F.divisor;F.divisor=Na;Xa=F.normalized;
F.normalized=ac;kd=F.offset;F.offset=Qa;Bb=F.size;F.size=wb;$a=F.state;F.state=xb;Xb=F.stride;F.stride=Ta;tc=F.type;F.type=ob;Yb=F.w;F.w=hc;Sb=F.x;F.x=Ac;Kc=F.y;F.y=vc;Tb=F.z;F.z=bb;Sa.buffer=a.colorBuffer;zd=!1;Ec=null;pd=0;Mc=!1;ud=Xc=0;oc=1;wc=0;ic=5126;Zb=Vb=sc=db=0;ea(Sa)?(zd=!0,Ec=N.createStream(34962,Sa),ic=Ec.dtype):(Ec=N.getBuffer(Sa))?ic=Ec.dtype:"constant"in Sa?(oc=2,"number"===typeof Sa.constant?(sc=Sa.constant,Vb=Zb=db=0):(sc=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?
Sa.constant[1]:0,Zb=2<Sa.constant.length?Sa.constant[2]:0,db=3<Sa.constant.length?Sa.constant[3]:0)):(Ec=ea(Sa.buffer)?N.createStream(34962,Sa.buffer):N.getBuffer(Sa.buffer),ic="type"in Sa?ka[Sa.type]:Ec.dtype,Mc=!!Sa.normalized,ud=Sa.size|0,Xc=Sa.offset|0,wc=Sa.stride|0,pd=Sa.divisor|0);ec=I.buffer;I.buffer=Ec;jc=I.divisor;I.divisor=pd;yc=I.normalized;I.normalized=Mc;Bc=I.offset;I.offset=Xc;bd=I.size;I.size=ud;Pc=I.state;I.state=oc;Qc=I.stride;I.stride=wc;Sc=I.type;I.type=ic;Yc=I.w;I.w=db;ld=I.x;
I.x=sc;cd=I.y;I.y=Vb;Zc=I.z;I.z=Zb;Ia.buffer=a.positionBuffer;lc=!1;dc=null;$c=0;Uc=!1;zc=dd=0;hd=1;Dd=0;ye=5126;Pd=De=id=wd=0;ea(Ia)?(lc=!0,dc=N.createStream(34962,Ia),ye=dc.dtype):(dc=N.getBuffer(Ia))?ye=dc.dtype:"constant"in Ia?(hd=2,"number"===typeof Ia.constant?(id=Ia.constant,De=Pd=wd=0):(id=0<Ia.constant.length?Ia.constant[0]:0,De=1<Ia.constant.length?Ia.constant[1]:0,Pd=2<Ia.constant.length?Ia.constant[2]:0,wd=3<Ia.constant.length?Ia.constant[3]:0)):(dc=ea(Ia.buffer)?N.createStream(34962,
Ia.buffer):N.getBuffer(Ia.buffer),ye="type"in Ia?ka[Ia.type]:dc.dtype,Uc=!!Ia.normalized,zc=Ia.size|0,dd=Ia.offset|0,Dd=Ia.stride|0,$c=Ia.divisor|0);fe=n.buffer;n.buffer=dc;le=n.divisor;n.divisor=$c;$d=n.normalized;n.normalized=Uc;Kd=n.offset;n.offset=dd;Id=n.size;n.size=zc;nd=n.state;n.state=hd;Tc=n.stride;n.stride=Dd;vd=n.type;n.type=ye;sd=n.w;n.w=wd;jd=n.x;n.x=id;xd=n.y;n.y=De;Bd=n.z;n.z=Pd;Ed=aa.buffer;aa.buffer=h;qe=aa.divisor;aa.divisor=0;je=aa.normalized;aa.normalized=!1;te=aa.offset;aa.offset=
0;ke=aa.size;aa.size=0;ie=aa.state;aa.state=1;ge=aa.stride;aa.stride=8;ue=aa.type;aa.type=5126;ce=aa.w;aa.w=0;me=aa.x;aa.x=0;Nc=aa.y;aa.y=0;gd=aa.z;aa.z=0;ve=q.buffer;q.buffer=d;re=q.divisor;q.divisor=0;Ld=q.normalized;q.normalized=!1;Qd=q.offset;q.offset=4;Rd=q.size;q.size=0;Sd=q.state;q.state=1;ne=q.stride;q.stride=8;Ae=q.type;q.type=5126;Ee=q.w;q.w=0;se=q.x;q.x=0;Te=q.y;q.y=0;Ue=q.z;q.z=0;gb.buffer=a.positionBuffer;Pe=!1;we=null;He=0;Ke=!1;Me=Le=0;Ie=1;Md=0;Xd=5126;Jd=Ne=de=be=0;ea(gb)?(Pe=!0,
we=N.createStream(34962,gb),Xd=we.dtype):(we=N.getBuffer(gb))?Xd=we.dtype:"constant"in gb?(Ie=2,"number"===typeof gb.constant?(de=gb.constant,Ne=Jd=be=0):(de=0<gb.constant.length?gb.constant[0]:0,Ne=1<gb.constant.length?gb.constant[1]:0,Jd=2<gb.constant.length?gb.constant[2]:0,be=3<gb.constant.length?gb.constant[3]:0)):(we=ea(gb.buffer)?N.createStream(34962,gb.buffer):N.getBuffer(gb.buffer),Xd="type"in gb?ka[gb.type]:we.dtype,Ke=!!gb.normalized,Me=gb.size|0,Le=gb.offset|0,Md=gb.stride|0,He=gb.divisor|
0);Td=J.buffer;J.buffer=we;Fe=J.divisor;J.divisor=He;Oe=J.normalized;J.normalized=Ke;cf=J.offset;J.offset=Le;bf=J.size;J.size=Me;Ve=J.state;J.state=Ie;Qe=J.stride;J.stride=Md;af=J.type;J.type=Xd;Ze=J.w;J.w=be;We=J.x;J.x=de;Xe=J.y;J.y=Ne;Ud=J.z;J.z=Jd;ca.buffer=a.positionBuffer;ae=!1;Ye=null;kf=0;of=!1;lf=ff=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;ea(ca)?(ae=!0,Ye=N.createStream(34962,ca),sf=Ye.dtype):(Ye=N.getBuffer(ca))?sf=Ye.dtype:"constant"in ca?(mf=2,"number"===typeof ca.constant?(tf=ca.constant,Cf=
Df=pf=0):(tf=0<ca.constant.length?ca.constant[0]:0,Cf=1<ca.constant.length?ca.constant[1]:0,Df=2<ca.constant.length?ca.constant[2]:0,pf=3<ca.constant.length?ca.constant[3]:0)):(Ye=ea(ca.buffer)?N.createStream(34962,ca.buffer):N.getBuffer(ca.buffer),sf="type"in ca?ka[ca.type]:Ye.dtype,of=!!ca.normalized,lf=ca.size|0,ff=ca.offset|0,nf=ca.stride|0,kf=ca.divisor|0);Re=C.buffer;C.buffer=Ye;Ge=C.divisor;C.divisor=kf;qf=C.normalized;C.normalized=of;rf=C.offset;C.offset=ff;Ef=C.size;C.size=lf;Hf=C.state;
C.state=mf;Bf=C.stride;C.stride=nf;Ff=C.type;C.type=sf;Gf=C.w;C.w=pf;xf=C.x;C.x=tf;yf=C.y;C.y=Cf;wf=C.z;C.z=Df;zf=ma.vert;ma.vert=36;Af=ma.frag;ma.frag=35;P.dirty=!0;c(x,a,b);x.viewportWidth=u;x.viewportHeight=z;xa[0]=t;xa[1]=R;xa[2]=w;xa[3]=ha;ya[0]=sa;ya[1]=y;ya[2]=va;ya[3]=Pa;U.blend_enable=Ga;Ca[0]=K;Ca[1]=T;na[0]=zb;na[1]=D;na[2]=ra;na[3]=S;U.cull_enable=da;U.cull_face=fa;U.depth_enable=E;Fa[0]=pa;Fa[1]=ja;Fa[2]=Ya;Fa[3]=ba;U.scissor_enable=W;U.stencil_enable=V;Aa&&(e.cpuTime+=performance.now()-
za);O.offset=X;O.count=Z;O.instances=L;O.primitive=oa;qa[23]=la;qa[24]=ga;qa[22]=mb;qa[31]=lb;qa[32]=Jb;qa[33]=Pb;qa[10]=pb;qa[34]=ia;qa[6]=Lb;qa[7]=Qb;qa[21]=Hb;qa[8]=yb;qa[9]=$b;qa[3]=sb;Ua&&N.destroyStream(Wb);k.buffer=Wa;k.divisor=vb;k.normalized=ub;k.offset=Oa;k.size=Cc;k.state=Ra;k.stride=Mb;k.type=Fb;k.w=Ma;k.x=Cd;k.y=Za;k.z=Nb;Ob&&N.destroyStream(nb);F.buffer=kc;F.divisor=Rc;F.normalized=Xa;F.offset=kd;F.size=Bb;F.state=$a;F.stride=Xb;F.type=tc;F.w=Yb;F.x=Sb;F.y=Kc;F.z=Tb;zd&&N.destroyStream(Ec);
I.buffer=ec;I.divisor=jc;I.normalized=yc;I.offset=Bc;I.size=bd;I.state=Pc;I.stride=Qc;I.type=Sc;I.w=Yc;I.x=ld;I.y=cd;I.z=Zc;lc&&N.destroyStream(dc);n.buffer=fe;n.divisor=le;n.normalized=$d;n.offset=Kd;n.size=Id;n.state=nd;n.stride=Tc;n.type=vd;n.w=sd;n.x=jd;n.y=xd;n.z=Bd;aa.buffer=Ed;aa.divisor=qe;aa.normalized=je;aa.offset=te;aa.size=ke;aa.state=ie;aa.stride=ge;aa.type=ue;aa.w=ce;aa.x=me;aa.y=Nc;aa.z=gd;q.buffer=ve;q.divisor=re;q.normalized=Ld;q.offset=Qd;q.size=Rd;q.state=Sd;q.stride=ne;q.type=
Ae;q.w=Ee;q.x=se;q.y=Te;q.z=Ue;Pe&&N.destroyStream(we);J.buffer=Td;J.divisor=Fe;J.normalized=Oe;J.offset=cf;J.size=bf;J.state=Ve;J.stride=Qe;J.type=af;J.w=Ze;J.x=We;J.y=Xe;J.z=Ud;ae&&N.destroyStream(Ye);C.buffer=Re;C.divisor=Ge;C.normalized=qf;C.offset=rf;C.size=Ef;C.state=Hf;C.stride=Bf;C.type=Ff;C.w=Gf;C.x=xf;C.y=yf;C.z=wf;ma.vert=zf;ma.frag=Af;P.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C){var M,
Aa,f,w,ba,E,W,D,y,L,G,B,m,Z,g,H,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na;M=a.attributes;Aa=a.buffer;f=a.context;w=a.current;ba=a.draw;E=a.elements;W=a.extensions;D=a.framebuffer;y=a.gl;L=a.isBufferArgs;G=a.next;B=a.shader;m=a.uniforms;Z=a.vao;g=G.blend_color;H=w.blend_color;Q=G.blend_equation;ga=w.blend_equation;Ea=G.blend_func;V=w.blend_func;X=G.colorMask;S=w.colorMask;T=G.depth_range;N=w.depth_range;x=G.polygonOffset_offset;P=w.polygonOffset_offset;O=G.sample_coverage;pa=w.sample_coverage;
oa=G.scissor_box;z=w.scissor_box;K=G.stencil_func;ea=w.stencil_func;U=G.stencil_opBack;ma=w.stencil_opBack;qa=G.stencil_opFront;Ba=w.stencil_opFront;ya=G.viewport;da=w.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};na={offset:8,stride:8};return{batch:function(a,c){var b,g,d,m,p,h;b=D.next;b!==D.cur&&(b?y.bindFramebuffer(36160,b.framebuffer):y.bindFramebuffer(36160,null),D.cur=b);if(w.dirty){var t,B,Q,ya,fa,R,va,Ga,
ra,xa,wa,ka,Y,oa,Sa,Ia,gb,ca,Ea,bc,Ha,ia,Ub,jf,Fd,pe,Vd,Be,xe,Nd,oe,he;t=G.dither;t!==w.dither&&(t?y.enable(3024):y.disable(3024),w.dither=t);B=G.depth_func;B!==w.depth_func&&(y.depthFunc(B),w.depth_func=B);Q=T[0];ya=T[1];if(Q!==N[0]||ya!==N[1])y.depthRange(Q,ya),N[0]=Q,N[1]=ya;fa=G.depth_mask;fa!==w.depth_mask&&(y.depthMask(fa),w.depth_mask=fa);R=X[0];va=X[1];Ga=X[2];ra=X[3];if(R!==S[0]||va!==S[1]||Ga!==S[2]||ra!==S[3])y.colorMask(R,va,Ga,ra),S[0]=R,S[1]=va,S[2]=Ga,S[3]=ra;xa=G.cull_enable;xa!==
w.cull_enable&&(xa?y.enable(2884):y.disable(2884),w.cull_enable=xa);wa=G.cull_face;wa!==w.cull_face&&(y.cullFace(wa),w.cull_face=wa);ka=G.frontFace;ka!==w.frontFace&&(y.frontFace(ka),w.frontFace=ka);Y=G.lineWidth;Y!==w.lineWidth&&(y.lineWidth(Y),w.lineWidth=Y);oa=G.polygonOffset_enable;oa!==w.polygonOffset_enable&&(oa?y.enable(32823):y.disable(32823),w.polygonOffset_enable=oa);Sa=x[0];Ia=x[1];if(Sa!==P[0]||Ia!==P[1])y.polygonOffset(Sa,Ia),P[0]=Sa,P[1]=Ia;gb=G.sample_alpha;gb!==w.sample_alpha&&(gb?
y.enable(32926):y.disable(32926),w.sample_alpha=gb);ca=G.sample_enable;ca!==w.sample_enable&&(ca?y.enable(32928):y.disable(32928),w.sample_enable=ca);Ea=O[0];bc=O[1];if(Ea!==pa[0]||bc!==pa[1])y.sampleCoverage(Ea,bc),pa[0]=Ea,pa[1]=bc;Ha=G.stencil_mask;Ha!==w.stencil_mask&&(y.stencilMask(Ha),w.stencil_mask=Ha);ia=K[0];Ub=K[1];jf=K[2];if(ia!==ea[0]||Ub!==ea[1]||jf!==ea[2])y.stencilFunc(ia,Ub,jf),ea[0]=ia,ea[1]=Ub,ea[2]=jf;Fd=qa[0];pe=qa[1];Vd=qa[2];Be=qa[3];if(Fd!==Ba[0]||pe!==Ba[1]||Vd!==Ba[2]||Be!==
Ba[3])y.stencilOpSeparate(Fd,pe,Vd,Be),Ba[0]=Fd,Ba[1]=pe,Ba[2]=Vd,Ba[3]=Be;xe=U[0];Nd=U[1];oe=U[2];he=U[3];if(xe!==ma[0]||Nd!==ma[1]||oe!==ma[2]||he!==ma[3])y.stencilOpSeparate(xe,Nd,oe,he),ma[0]=xe,ma[1]=Nd,ma[2]=oe,ma[3]=he}y.blendColor(0,0,0,0);H[0]=0;H[1]=0;H[2]=0;H[3]=0;y.enable(3042);w.blend_enable=!0;y.blendEquationSeparate(32774,32774);ga[0]=32774;ga[1]=32774;y.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;y.disable(2929);w.depth_enable=!1;y.enable(3089);w.scissor_enable=
!0;y.disable(2960);w.stencil_enable=!1;if(g=w.profile)d=performance.now(),e.count+=c;y.useProgram(l.program);m=W.angle_instanced_arrays;var Od;Z.setVAO(null);Od=ba.instances;for(p=0;p<c;++p){h=a[p];var qd,Gd,Ad,ze,$e,Se,Hd,Ce,Yd,Zd,ee,Wd,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb;qd=h.viewport;Gd=qd.x|0;Ad=qd.y|0;ze="width"in qd?qd.width|
0:f.framebufferWidth-Gd;$e="height"in qd?qd.height|0:f.framebufferHeight-Ad;Se=f.viewportWidth;f.viewportWidth=ze;Hd=f.viewportHeight;f.viewportHeight=$e;y.viewport(Gd,Ad,ze,$e);da[0]=Gd;da[1]=Ad;da[2]=ze;da[3]=$e;Ce=h.viewport;Yd=Ce.x|0;Zd=Ce.y|0;ee="width"in Ce?Ce.width|0:f.framebufferWidth-Yd;Wd="height"in Ce?Ce.height|0:f.framebufferHeight-Zd;y.scissor(Yd,Zd,ee,Wd);z[0]=Yd;z[1]=Zd;z[2]=ee;z[3]=Wd;ja.buffer=h.positionBuffer;md=!1;ad=null;rd=0;Lc=!1;Fc=od=0;ed=1;Oc=0;Wc=5126;Ab=uc=Gb=Cb=0;L(ja)?
(md=!0,ad=Aa.createStream(34962,ja),Wc=ad.dtype):(ad=Aa.getBuffer(ja))?Wc=ad.dtype:"constant"in ja?(ed=2,"number"===typeof ja.constant?(Gb=ja.constant,uc=Ab=Cb=0):(Gb=0<ja.constant.length?ja.constant[0]:0,uc=1<ja.constant.length?ja.constant[1]:0,Ab=2<ja.constant.length?ja.constant[2]:0,Cb=3<ja.constant.length?ja.constant[3]:0)):(ad=L(ja.buffer)?Aa.createStream(34962,ja.buffer):Aa.getBuffer(ja.buffer),Wc="type"in ja?Ca[ja.type]:ad.dtype,Lc=!!ja.normalized,Fc=ja.size|0,od=ja.offset|0,Oc=ja.stride|0,
rd=ja.divisor|0);xc=I.location;Db=M[xc];if(1===ed){Db.buffer||y.enableVertexAttribArray(xc);Ic=Fc||2;if(Db.type!==Wc||Db.size!==Ic||Db.buffer!==ad||Db.normalized!==Lc||Db.offset!==od||Db.stride!==Oc)y.bindBuffer(34962,ad.buffer),y.vertexAttribPointer(xc,Ic,Wc,Lc,Oc,od),Db.type=Wc,Db.size=Ic,Db.buffer=ad,Db.normalized=Lc,Db.offset=od,Db.stride=Oc;Db.divisor!==rd&&(m.vertexAttribDivisorANGLE(xc,rd),Db.divisor=rd)}else if(Db.buffer&&(y.disableVertexAttribArray(xc),Db.buffer=null),Db.x!==Gb||Db.y!==uc||
Db.z!==Ab||Db.w!==Cb)y.vertexAttrib4f(xc,Gb,uc,Ab,Cb),Db.x=Gb,Db.y=uc,Db.z=Ab,Db.w=Cb;na.buffer=h.positionFractBuffer;mc=!1;Gc=null;fd=0;Vc=!1;fc=Dc=0;Hc=1;pc=0;qc=5126;Jc=lb=gc=nc=0;L(na)?(mc=!0,Gc=Aa.createStream(34962,na),qc=Gc.dtype):(Gc=Aa.getBuffer(na))?qc=Gc.dtype:"constant"in na?(Hc=2,"number"===typeof na.constant?(gc=na.constant,lb=Jc=nc=0):(gc=0<na.constant.length?na.constant[0]:0,lb=1<na.constant.length?na.constant[1]:0,Jc=2<na.constant.length?na.constant[2]:0,nc=3<na.constant.length?na.constant[3]:
0)):(Gc=L(na.buffer)?Aa.createStream(34962,na.buffer):Aa.getBuffer(na.buffer),qc="type"in na?Ca[na.type]:Gc.dtype,Vc=!!na.normalized,fc=na.size|0,Dc=na.offset|0,pc=na.stride|0,fd=na.divisor|0);Jb=n.location;cb=M[Jb];if(1===Hc){cb.buffer||y.enableVertexAttribArray(Jb);Pb=fc||2;if(cb.type!==qc||cb.size!==Pb||cb.buffer!==Gc||cb.normalized!==Vc||cb.offset!==Dc||cb.stride!==pc)y.bindBuffer(34962,Gc.buffer),y.vertexAttribPointer(Jb,Pb,qc,Vc,pc,Dc),cb.type=qc,cb.size=Pb,cb.buffer=Gc,cb.normalized=Vc,cb.offset=
Dc,cb.stride=pc;cb.divisor!==fd&&(m.vertexAttribDivisorANGLE(Jb,fd),cb.divisor=fd)}else if(cb.buffer&&(y.disableVertexAttribArray(Jb),cb.buffer=null),cb.x!==gc||cb.y!==lb||cb.z!==Jc||cb.w!==nc)y.vertexAttrib4f(Jb,gc,lb,Jc,nc),cb.x=gc,cb.y=lb,cb.z=Jc,cb.w=nc;ab=h.fill;pb=ab[0];td=ab[1];Lb=ab[2];Qb=ab[3];p&&Va===pb&&Kb===td&&rc===Lb&&jb===Qb||(Va=pb,Kb=td,rc=Lb,jb=Qb,y.uniform4f(v.location,pb,td,Lb,Qb));Hb=h.scale;Eb=Hb[0];hb=Hb[1];p&&yb===Eb&&$b===hb||(yb=Eb,$b=hb,y.uniform2f(aa.location,Eb,hb));Rb=
h.scaleFract;sb=Rb[0];Wb=Rb[1];p&&Ua===sb&&qb===Wb||(Ua=sb,qb=Wb,y.uniform2f(q.location,sb,Wb));cc=h.translate;ib=cc[0];Ja=cc[1];p&&rb===ib&&tb===Ja||(rb=ib,tb=Ja,y.uniform2f(J.location,ib,Ja));Ka=h.translateFract;eb=Ka[0];La=Ka[1];p&&fb===eb&&kb===La||(fb=eb,kb=La,y.uniform2f(C.location,eb,La));Wa=h.id;p&&vb===Wa||(vb=Wa,y.uniform1f(k.location,Wa));ub=h.opacity;p&&Oa===ub||(Oa=ub,y.uniform1f(F.location,ub));Cc=r.call(this,f,h,p);Ra=null;(Ra=(Mb=L(Cc))?E.createStream(Cc):E.getElements(Cc))&&y.bindBuffer(34963,
Ra.buffer.buffer);if(Fb=Ra?Ra.vertCount:-1)0<Od?Ra?m.drawElementsInstancedANGLE(4,Fb,Ra.type,0<<(Ra.type-5121>>1),Od):m.drawArraysInstancedANGLE(4,0,Fb,Od):0>Od&&(Ra?y.drawElements(4,Fb,Ra.type,0<<(Ra.type-5121>>1)):y.drawArrays(4,0,Fb)),f.viewportWidth=Se,f.viewportHeight=Hd,md&&Aa.destroyStream(ad),mc&&Aa.destroyStream(Gc),Mb&&E.destroyStream(Ra)}w.dirty=!0;Z.setVAO(null);g&&(e.cpuTime+=performance.now()-d)},draw:function(a){var c,b,g,d,m,u,h,l,r,B,Q,fa,R,va,Ga,ra,xa,wa,ka,Y,ya,oa;c=D.next;c!==
D.cur&&(c?y.bindFramebuffer(36160,c.framebuffer):y.bindFramebuffer(36160,null),D.cur=c);if(w.dirty){c=G.dither;c!==w.dither&&(c?y.enable(3024):y.disable(3024),w.dither=c);c=G.depth_func;c!==w.depth_func&&(y.depthFunc(c),w.depth_func=c);c=T[0];u=T[1];if(c!==N[0]||u!==N[1])y.depthRange(c,u),N[0]=c,N[1]=u;c=G.depth_mask;c!==w.depth_mask&&(y.depthMask(c),w.depth_mask=c);c=X[0];u=X[1];b=X[2];g=X[3];if(c!==S[0]||u!==S[1]||b!==S[2]||g!==S[3])y.colorMask(c,u,b,g),S[0]=c,S[1]=u,S[2]=b,S[3]=g;c=G.cull_enable;
c!==w.cull_enable&&(c?y.enable(2884):y.disable(2884),w.cull_enable=c);c=G.cull_face;c!==w.cull_face&&(y.cullFace(c),w.cull_face=c);c=G.frontFace;c!==w.frontFace&&(y.frontFace(c),w.frontFace=c);c=G.lineWidth;c!==w.lineWidth&&(y.lineWidth(c),w.lineWidth=c);c=G.polygonOffset_enable;c!==w.polygonOffset_enable&&(c?y.enable(32823):y.disable(32823),w.polygonOffset_enable=c);c=x[0];u=x[1];if(c!==P[0]||u!==P[1])y.polygonOffset(c,u),P[0]=c,P[1]=u;c=G.sample_alpha;c!==w.sample_alpha&&(c?y.enable(32926):y.disable(32926),
w.sample_alpha=c);c=G.sample_enable;c!==w.sample_enable&&(c?y.enable(32928):y.disable(32928),w.sample_enable=c);c=O[0];u=O[1];if(c!==pa[0]||u!==pa[1])y.sampleCoverage(c,u),pa[0]=c,pa[1]=u;c=G.stencil_mask;c!==w.stencil_mask&&(y.stencilMask(c),w.stencil_mask=c);c=K[0];u=K[1];b=K[2];if(c!==ea[0]||u!==ea[1]||b!==ea[2])y.stencilFunc(c,u,b),ea[0]=c,ea[1]=u,ea[2]=b;c=qa[0];u=qa[1];b=qa[2];g=qa[3];if(c!==Ba[0]||u!==Ba[1]||b!==Ba[2]||g!==Ba[3])y.stencilOpSeparate(c,u,b,g),Ba[0]=c,Ba[1]=u,Ba[2]=b,Ba[3]=g;
c=U[0];u=U[1];b=U[2];g=U[3];if(c!==ma[0]||u!==ma[1]||b!==ma[2]||g!==ma[3])y.stencilOpSeparate(c,u,b,g),ma[0]=c,ma[1]=u,ma[2]=b,ma[3]=g}c=a.viewport;b=c.x|0;g=c.y|0;d="width"in c?c.width|0:f.framebufferWidth-b;m="height"in c?c.height|0:f.framebufferHeight-g;c=f.viewportWidth;f.viewportWidth=d;u=f.viewportHeight;f.viewportHeight=m;y.viewport(b,g,d,m);da[0]=b;da[1]=g;da[2]=d;da[3]=m;y.blendColor(0,0,0,0);H[0]=0;H[1]=0;H[2]=0;H[3]=0;y.enable(3042);w.blend_enable=!0;y.blendEquationSeparate(32774,32774);
ga[0]=32774;ga[1]=32774;y.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;y.disable(2929);w.depth_enable=!1;m=a.viewport;b=m.x|0;g=m.y|0;d="width"in m?m.width|0:f.framebufferWidth-b;m="height"in m?m.height|0:f.framebufferHeight-g;y.scissor(b,g,d,m);z[0]=b;z[1]=g;z[2]=d;z[3]=m;y.enable(3089);w.scissor_enable=!0;y.disable(2960);w.stencil_enable=!1;if(b=w.profile)h=performance.now(),e.count++;y.useProgram(t.program);g=W.angle_instanced_arrays;Z.setVAO(null);ja.buffer=a.positionBuffer;
d=!1;l=0;r=!1;Q=B=0;fa=1;R=0;va=5126;wa=xa=ra=Ga=0;L(ja)?(d=!0,m=Aa.createStream(34962,ja),va=m.dtype):(m=Aa.getBuffer(ja))?va=m.dtype:"constant"in ja?(fa=2,"number"===typeof ja.constant?(ra=ja.constant,xa=wa=Ga=0):(ra=0<ja.constant.length?ja.constant[0]:0,xa=1<ja.constant.length?ja.constant[1]:0,wa=2<ja.constant.length?ja.constant[2]:0,Ga=3<ja.constant.length?ja.constant[3]:0)):(m=L(ja.buffer)?Aa.createStream(34962,ja.buffer):Aa.getBuffer(ja.buffer),va="type"in ja?Ca[ja.type]:m.dtype,r=!!ja.normalized,
Q=ja.size|0,B=ja.offset|0,R=ja.stride|0,l=ja.divisor|0);ka=I.location;Y=M[ka];if(1===fa){Y.buffer||y.enableVertexAttribArray(ka);Q=Q||2;if(Y.type!==va||Y.size!==Q||Y.buffer!==m||Y.normalized!==r||Y.offset!==B||Y.stride!==R)y.bindBuffer(34962,m.buffer),y.vertexAttribPointer(ka,Q,va,r,R,B),Y.type=va,Y.size=Q,Y.buffer=m,Y.normalized=r,Y.offset=B,Y.stride=R;Y.divisor!==l&&(g.vertexAttribDivisorANGLE(ka,l),Y.divisor=l)}else if(Y.buffer&&(y.disableVertexAttribArray(ka),Y.buffer=null),Y.x!==ra||Y.y!==xa||
Y.z!==wa||Y.w!==Ga)y.vertexAttrib4f(ka,ra,xa,wa,Ga),Y.x=ra,Y.y=xa,Y.z=wa,Y.w=Ga;na.buffer=a.positionFractBuffer;l=!1;B=0;R=!1;Ga=va=0;ra=1;ka=0;Y=5126;oa=ya=wa=xa=0;L(na)?(l=!0,r=Aa.createStream(34962,na),Y=r.dtype):(r=Aa.getBuffer(na))?Y=r.dtype:"constant"in na?(ra=2,"number"===typeof na.constant?(wa=na.constant,ya=oa=xa=0):(wa=0<na.constant.length?na.constant[0]:0,ya=1<na.constant.length?na.constant[1]:0,oa=2<na.constant.length?na.constant[2]:0,xa=3<na.constant.length?na.constant[3]:0)):(r=L(na.buffer)?
Aa.createStream(34962,na.buffer):Aa.getBuffer(na.buffer),Y="type"in na?Ca[na.type]:r.dtype,R=!!na.normalized,Ga=na.size|0,va=na.offset|0,ka=na.stride|0,B=na.divisor|0);Q=n.location;fa=M[Q];if(1===ra){fa.buffer||y.enableVertexAttribArray(Q);Ga=Ga||2;if(fa.type!==Y||fa.size!==Ga||fa.buffer!==r||fa.normalized!==R||fa.offset!==va||fa.stride!==ka)y.bindBuffer(34962,r.buffer),y.vertexAttribPointer(Q,Ga,Y,R,ka,va),fa.type=Y,fa.size=Ga,fa.buffer=r,fa.normalized=R,fa.offset=va,fa.stride=ka;fa.divisor!==B&&
(g.vertexAttribDivisorANGLE(Q,B),fa.divisor=B)}else if(fa.buffer&&(y.disableVertexAttribArray(Q),fa.buffer=null),fa.x!==wa||fa.y!==ya||fa.z!==oa||fa.w!==xa)y.vertexAttrib4f(Q,wa,ya,oa,xa),fa.x=wa,fa.y=ya,fa.z=oa,fa.w=xa;B=a.fill;y.uniform4f(v.location,B[0],B[1],B[2],B[3]);B=a.scale;y.uniform2f(aa.location,B[0],B[1]);B=a.scaleFract;y.uniform2f(q.location,B[0],B[1]);B=a.translate;y.uniform2f(J.location,B[0],B[1]);B=a.translateFract;y.uniform2f(C.location,B[0],B[1]);y.uniform1f(k.location,a.id);y.uniform1f(F.location,
a.opacity);B=p.call(this,f,a,0);(B=(a=L(B))?E.createStream(B):E.getElements(B))&&y.bindBuffer(34963,B.buffer.buffer);if(R=B?B.vertCount:-1)va=ba.instances,0<va?B?g.drawElementsInstancedANGLE(4,R,B.type,0<<(B.type-5121>>1),va):g.drawArraysInstancedANGLE(4,0,R,va):0>va&&(B?y.drawElements(4,R,B.type,0<<(B.type-5121>>1)):y.drawArrays(4,0,R)),w.dirty=!0,Z.setVAO(null),f.viewportWidth=c,f.viewportHeight=u,b&&(e.cpuTime+=performance.now()-h),d&&Aa.destroyStream(m),l&&Aa.destroyStream(r),a&&E.destroyStream(B)},
scope:function(a,p,x){var z,k,A,u,t,l,r,v,y,K,R,va,Ga,q,T,U,N,D,n,F,S,da,I,C,O,J,M,P,ea,qa,pa,aa,W,V,X,Z,ma,H,ga,la,Ba,ze,ia,Se,Hd,Ce,Yd,Zd,ee,Wd,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub;z=a.viewport;k=z.x|0;A=z.y|0;u="width"in z?z.width|0:f.framebufferWidth-k;t="height"in z?z.height|0:f.framebufferHeight-A;l=f.viewportWidth;f.viewportWidth=u;r=f.viewportHeight;
f.viewportHeight=t;v=ya[0];ya[0]=k;y=ya[1];ya[1]=A;K=ya[2];ya[2]=u;R=ya[3];ya[3]=t;va=g[0];g[0]=0;Ga=g[1];g[1]=0;q=g[2];g[2]=0;T=g[3];g[3]=0;U=G.blend_enable;G.blend_enable=!0;N=Q[0];Q[0]=32774;D=Q[1];Q[1]=32774;n=Ea[0];Ea[0]=770;F=Ea[1];Ea[1]=771;S=Ea[2];Ea[2]=773;da=Ea[3];Ea[3]=1;I=G.depth_enable;G.depth_enable=!1;C=a.viewport;O=C.x|0;J=C.y|0;M="width"in C?C.width|0:f.framebufferWidth-O;P="height"in C?C.height|0:f.framebufferHeight-J;ea=oa[0];oa[0]=O;qa=oa[1];oa[1]=J;pa=oa[2];oa[2]=M;aa=oa[3];oa[3]=
P;W=G.scissor_enable;G.scissor_enable=!0;V=G.stencil_enable;G.stencil_enable=!1;if(X=w.profile)Z=performance.now(),e.count++;ma=h.call(this,f,a,x);H=null;H=(ga=L(ma))?E.createStream(ma):E.getElements(ma);la=ba.elements;ba.elements=H;Ba=ba.offset;ba.offset=0;ze=H?H.vertCount:-1;ia=ba.count;ba.count=ze;Se=ba.primitive;ba.primitive=4;Hd=a.fill;Ce=m[14];m[14]=Hd;Yd=a.id;Zd=m[31];m[31]=Yd;ee=a.opacity;Wd=m[10];m[10]=ee;md=f.pixelRatio;ad=m[34];m[34]=md;rd=a.scale;Lc=m[6];m[6]=rd;od=a.scaleFract;Fc=m[7];
m[7]=od;ed=a.translate;Oc=m[8];m[8]=ed;Wc=a.translateFract;Cb=m[9];m[9]=Wc;Gb=d.call(this,f,a,x);uc=m[3];m[3]=Gb;ja.buffer=a.positionBuffer;Ab=!1;xc=null;Db=0;Ic=!1;Gc=mc=0;fd=1;Vc=0;Dc=5126;qc=pc=Hc=fc=0;L(ja)?(Ab=!0,xc=Aa.createStream(34962,ja),Dc=xc.dtype):(xc=Aa.getBuffer(ja))?Dc=xc.dtype:"constant"in ja?(fd=2,"number"===typeof ja.constant?(Hc=ja.constant,pc=qc=fc=0):(Hc=0<ja.constant.length?ja.constant[0]:0,pc=1<ja.constant.length?ja.constant[1]:0,qc=2<ja.constant.length?ja.constant[2]:0,fc=
3<ja.constant.length?ja.constant[3]:0)):(xc=L(ja.buffer)?Aa.createStream(34962,ja.buffer):Aa.getBuffer(ja.buffer),Dc="type"in ja?Ca[ja.type]:xc.dtype,Ic=!!ja.normalized,Gc=ja.size|0,mc=ja.offset|0,Vc=ja.stride|0,Db=ja.divisor|0);nc=c.buffer;c.buffer=xc;gc=c.divisor;c.divisor=Db;lb=c.normalized;c.normalized=Ic;Jc=c.offset;c.offset=mc;Jb=c.size;c.size=Gc;cb=c.state;c.state=fd;Pb=c.stride;c.stride=Vc;ab=c.type;c.type=Dc;pb=c.w;c.w=fc;Va=c.x;c.x=Hc;td=c.y;c.y=pc;Kb=c.z;c.z=qc;na.buffer=a.positionFractBuffer;
Lb=!1;rc=null;Qb=0;jb=!1;Eb=Hb=0;yb=1;hb=0;$b=5126;Wb=Ua=sb=Rb=0;L(na)?(Lb=!0,rc=Aa.createStream(34962,na),$b=rc.dtype):(rc=Aa.getBuffer(na))?$b=rc.dtype:"constant"in na?(yb=2,"number"===typeof na.constant?(sb=na.constant,Ua=Wb=Rb=0):(sb=0<na.constant.length?na.constant[0]:0,Ua=1<na.constant.length?na.constant[1]:0,Wb=2<na.constant.length?na.constant[2]:0,Rb=3<na.constant.length?na.constant[3]:0)):(rc=L(na.buffer)?Aa.createStream(34962,na.buffer):Aa.getBuffer(na.buffer),$b="type"in na?Ca[na.type]:
rc.dtype,jb=!!na.normalized,Eb=na.size|0,Hb=na.offset|0,hb=na.stride|0,Qb=na.divisor|0);qb=b.buffer;b.buffer=rc;cc=b.divisor;b.divisor=Qb;ib=b.normalized;b.normalized=jb;rb=b.offset;b.offset=Hb;Ja=b.size;b.size=Eb;tb=b.state;b.state=yb;Ka=b.stride;b.stride=hb;eb=b.type;b.type=$b;fb=b.w;b.w=Rb;La=b.x;b.x=sb;kb=b.y;b.y=Ua;Wa=b.z;b.z=Wb;vb=B.vert;B.vert=42;ub=B.frag;B.frag=41;w.dirty=!0;p(f,a,x);f.viewportWidth=l;f.viewportHeight=r;ya[0]=v;ya[1]=y;ya[2]=K;ya[3]=R;g[0]=va;g[1]=Ga;g[2]=q;g[3]=T;G.blend_enable=
U;Q[0]=N;Q[1]=D;Ea[0]=n;Ea[1]=F;Ea[2]=S;Ea[3]=da;G.depth_enable=I;oa[0]=ea;oa[1]=qa;oa[2]=pa;oa[3]=aa;G.scissor_enable=W;G.stencil_enable=V;X&&(e.cpuTime+=performance.now()-Z);ga&&E.destroyStream(H);ba.elements=la;ba.offset=Ba;ba.count=ia;ba.primitive=Se;m[14]=Ce;m[31]=Zd;m[10]=Wd;m[34]=ad;m[6]=Lc;m[7]=Fc;m[8]=Oc;m[9]=Cb;m[3]=uc;Ab&&Aa.destroyStream(xc);c.buffer=nc;c.divisor=gc;c.normalized=lb;c.offset=Jc;c.size=Jb;c.state=cb;c.stride=Pb;c.type=ab;c.w=pb;c.x=Va;c.y=td;c.z=Kb;Lb&&Aa.destroyStream(rc);
b.buffer=qb;b.divisor=cc;b.normalized=ib;b.offset=rb;b.size=Ja;b.state=tb;b.stride=Ka;b.type=eb;b.w=fb;b.x=La;b.y=kb;b.z=Wa;B.vert=vb;B.frag=ub;w.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,L,G,B,m,Z,g,H,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,
Ya){var A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa,ka,Y,ta,Sa,Ia,gb,ca,ia,bc,Ha,Je,Ub,jf,Fd,pe,Vd,Be,xe,Nd,oe,he,Od,qd,Gd,Ad;A=a.attributes;u=a.buffer;ha=a.context;ua=a.current;Fa=a.draw;mb=a.elements;Ib=a.extensions;fa=a.framebuffer;R=a.gl;va=a.isBufferArgs;Ga=a.next;ra=a.shader;xa=a.uniforms;wa=a.vao;ka=Ga.blend_color;Y=ua.blend_color;ta=Ga.blend_equation;Sa=ua.blend_equation;Ia=Ga.blend_func;gb=ua.blend_func;ca=Ga.colorMask;ia=ua.colorMask;bc=Ga.depth_range;Ha=ua.depth_range;Je=Ga.polygonOffset_offset;
Ub=ua.polygonOffset_offset;jf=Ga.sample_coverage;Fd=ua.sample_coverage;pe=Ga.scissor_box;Vd=ua.scissor_box;Be=Ga.stencil_func;xe=ua.stencil_func;Nd=Ga.stencil_opBack;oe=ua.stencil_opBack;he=Ga.stencil_opFront;Od=ua.stencil_opFront;qd=Ga.viewport;Gd=ua.viewport;Ad={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,g,d,f,m,p;b=fa.next;b!==fa.cur&&(b?R.bindFramebuffer(36160,b.framebuffer):R.bindFramebuffer(36160,null),fa.cur=
b);if(ua.dirty){var h,k,t,l,r,w,v,y,q,B,D,n,F,C,I,ra,E,G,ka,J,M,xa,aa,W,ba,Aa,Z,L,Da,Ia,Jb,cb,Pb,ab;h=Ga.dither;h!==ua.dither&&(h?R.enable(3024):R.disable(3024),ua.dither=h);k=ta[0];t=ta[1];if(k!==Sa[0]||t!==Sa[1])R.blendEquationSeparate(k,t),Sa[0]=k,Sa[1]=t;l=Ga.depth_func;l!==ua.depth_func&&(R.depthFunc(l),ua.depth_func=l);r=bc[0];w=bc[1];if(r!==Ha[0]||w!==Ha[1])R.depthRange(r,w),Ha[0]=r,Ha[1]=w;v=Ga.depth_mask;v!==ua.depth_mask&&(R.depthMask(v),ua.depth_mask=v);y=ca[0];q=ca[1];B=ca[2];D=ca[3];
if(y!==ia[0]||q!==ia[1]||B!==ia[2]||D!==ia[3])R.colorMask(y,q,B,D),ia[0]=y,ia[1]=q,ia[2]=B,ia[3]=D;n=Ga.cull_enable;n!==ua.cull_enable&&(n?R.enable(2884):R.disable(2884),ua.cull_enable=n);F=Ga.cull_face;F!==ua.cull_face&&(R.cullFace(F),ua.cull_face=F);C=Ga.frontFace;C!==ua.frontFace&&(R.frontFace(C),ua.frontFace=C);I=Ga.lineWidth;I!==ua.lineWidth&&(R.lineWidth(I),ua.lineWidth=I);ra=Ga.polygonOffset_enable;ra!==ua.polygonOffset_enable&&(ra?R.enable(32823):R.disable(32823),ua.polygonOffset_enable=ra);
E=Je[0];G=Je[1];if(E!==Ub[0]||G!==Ub[1])R.polygonOffset(E,G),Ub[0]=E,Ub[1]=G;ka=Ga.sample_alpha;ka!==ua.sample_alpha&&(ka?R.enable(32926):R.disable(32926),ua.sample_alpha=ka);J=Ga.sample_enable;J!==ua.sample_enable&&(J?R.enable(32928):R.disable(32928),ua.sample_enable=J);M=jf[0];xa=jf[1];if(M!==Fd[0]||xa!==Fd[1])R.sampleCoverage(M,xa),Fd[0]=M,Fd[1]=xa;aa=Ga.stencil_mask;aa!==ua.stencil_mask&&(R.stencilMask(aa),ua.stencil_mask=aa);W=Be[0];ba=Be[1];Aa=Be[2];if(W!==xe[0]||ba!==xe[1]||Aa!==xe[2])R.stencilFunc(W,
ba,Aa),xe[0]=W,xe[1]=ba,xe[2]=Aa;Z=he[0];L=he[1];Da=he[2];Ia=he[3];if(Z!==Od[0]||L!==Od[1]||Da!==Od[2]||Ia!==Od[3])R.stencilOpSeparate(Z,L,Da,Ia),Od[0]=Z,Od[1]=L,Od[2]=Da,Od[3]=Ia;Jb=Nd[0];cb=Nd[1];Pb=Nd[2];ab=Nd[3];if(Jb!==oe[0]||cb!==oe[1]||Pb!==oe[2]||ab!==oe[3])R.stencilOpSeparate(Jb,cb,Pb,ab),oe[0]=Jb,oe[1]=cb,oe[2]=Pb,oe[3]=ab}R.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;R.enable(3042);ua.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;R.disable(2929);
ua.depth_enable=!1;R.enable(3089);ua.scissor_enable=!0;R.disable(2960);ua.stencil_enable=!1;if(g=ua.profile)d=performance.now(),e.count+=c;R.useProgram(H.program);f=Ib.angle_instanced_arrays;var pb;wa.setVAO(null);R.uniform1i(K.location,!1);R.uniform1i(Ba.location,P.bind());pb=Fa.instances;for(m=0;m<c;++m){p=a[m];var Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,
Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,pe,qd,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Va=p.viewport;td=Va.x|0;Kb=Va.y|0;Lb="width"in Va?Va.width|0:ha.framebufferWidth-
td;rc="height"in Va?Va.height|0:ha.framebufferHeight-Kb;Qb=ha.viewportWidth;ha.viewportWidth=Lb;jb=ha.viewportHeight;ha.viewportHeight=rc;R.viewport(td,Kb,Lb,rc);Gd[0]=td;Gd[1]=Kb;Gd[2]=Lb;Gd[3]=rc;Hb=p.viewport;Eb=Hb.x|0;yb=Hb.y|0;hb="width"in Hb?Hb.width|0:ha.framebufferWidth-Eb;$b="height"in Hb?Hb.height|0:ha.framebufferHeight-yb;R.scissor(Eb,yb,hb,$b);Vd[0]=Eb;Vd[1]=yb;Vd[2]=hb;Vd[3]=$b;Rb=Q.call(this,ha,p,m);sb=!1;Ua=null;Wb=0;qb=!1;ib=cc=0;rb=1;Ja=0;tb=5126;La=fb=eb=Ka=0;va(Rb)?(sb=!0,Ua=u.createStream(34962,
Rb),tb=Ua.dtype):(Ua=u.getBuffer(Rb))?tb=Ua.dtype:"constant"in Rb?(rb=2,"number"===typeof Rb.constant?(eb=Rb.constant,fb=La=Ka=0):(eb=0<Rb.constant.length?Rb.constant[0]:0,fb=1<Rb.constant.length?Rb.constant[1]:0,La=2<Rb.constant.length?Rb.constant[2]:0,Ka=3<Rb.constant.length?Rb.constant[3]:0)):(Ua=va(Rb.buffer)?u.createStream(34962,Rb.buffer):u.getBuffer(Rb.buffer),tb="type"in Rb?Ad[Rb.type]:Ua.dtype,qb=!!Rb.normalized,ib=Rb.size|0,cc=Rb.offset|0,Ja=Rb.stride|0,Wb=Rb.divisor|0);kb=Pa.location;Wa=
A[kb];if(1===rb){Wa.buffer||R.enableVertexAttribArray(kb);vb=ib||1;if(Wa.type!==tb||Wa.size!==vb||Wa.buffer!==Ua||Wa.normalized!==qb||Wa.offset!==cc||Wa.stride!==Ja)R.bindBuffer(34962,Ua.buffer),R.vertexAttribPointer(kb,vb,tb,qb,Ja,cc),Wa.type=tb,Wa.size=vb,Wa.buffer=Ua,Wa.normalized=qb,Wa.offset=cc,Wa.stride=Ja;Wa.divisor!==Wb&&(f.vertexAttribDivisorANGLE(kb,Wb),Wa.divisor=Wb)}else if(Wa.buffer&&(R.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)R.vertexAttrib4f(kb,
eb,fb,La,Ka),Wa.x=eb,Wa.y=fb,Wa.z=La,Wa.w=Ka;ub=ga.call(this,ha,p,m);Oa=!1;Cc=null;Ra=0;Mb=!1;Ma=Fb=0;Cd=1;Za=0;Nb=5126;ac=Na=nb=Ob=0;va(ub)?(Oa=!0,Cc=u.createStream(34962,ub),Nb=Cc.dtype):(Cc=u.getBuffer(ub))?Nb=Cc.dtype:"constant"in ub?(Cd=2,"number"===typeof ub.constant?(nb=ub.constant,Na=ac=Ob=0):(nb=0<ub.constant.length?ub.constant[0]:0,Na=1<ub.constant.length?ub.constant[1]:0,ac=2<ub.constant.length?ub.constant[2]:0,Ob=3<ub.constant.length?ub.constant[3]:0)):(Cc=va(ub.buffer)?u.createStream(34962,
ub.buffer):u.getBuffer(ub.buffer),Nb="type"in ub?Ad[ub.type]:Cc.dtype,Mb=!!ub.normalized,Ma=ub.size|0,Fb=ub.offset|0,Za=ub.stride|0,Ra=ub.divisor|0);Qa=zb.location;wb=A[Qa];if(1===Cd){wb.buffer||R.enableVertexAttribArray(Qa);xb=Ma||1;if(wb.type!==Nb||wb.size!==xb||wb.buffer!==Cc||wb.normalized!==Mb||wb.offset!==Fb||wb.stride!==Za)R.bindBuffer(34962,Cc.buffer),R.vertexAttribPointer(Qa,xb,Nb,Mb,Za,Fb),wb.type=Nb,wb.size=xb,wb.buffer=Cc,wb.normalized=Mb,wb.offset=Fb,wb.stride=Za;wb.divisor!==Ra&&(f.vertexAttribDivisorANGLE(Qa,
Ra),wb.divisor=Ra)}else if(wb.buffer&&(R.disableVertexAttribArray(Qa),wb.buffer=null),wb.x!==nb||wb.y!==Na||wb.z!==ac||wb.w!==Ob)R.vertexAttrib4f(Qa,nb,Na,ac,Ob),wb.x=nb,wb.y=Na,wb.z=ac,wb.w=Ob;Ta=Ea.call(this,ha,p,m);ob=!1;hc=null;Ac=0;vc=!1;kc=bb=0;Rc=1;Xa=0;kd=5126;tc=Xb=$a=Bb=0;va(Ta)?(ob=!0,hc=u.createStream(34962,Ta),kd=hc.dtype):(hc=u.getBuffer(Ta))?kd=hc.dtype:"constant"in Ta?(Rc=2,"number"===typeof Ta.constant?($a=Ta.constant,Xb=tc=Bb=0):($a=0<Ta.constant.length?Ta.constant[0]:0,Xb=1<Ta.constant.length?
Ta.constant[1]:0,tc=2<Ta.constant.length?Ta.constant[2]:0,Bb=3<Ta.constant.length?Ta.constant[3]:0)):(hc=va(Ta.buffer)?u.createStream(34962,Ta.buffer):u.getBuffer(Ta.buffer),kd="type"in Ta?Ad[Ta.type]:hc.dtype,vc=!!Ta.normalized,kc=Ta.size|0,bb=Ta.offset|0,Xa=Ta.stride|0,Ac=Ta.divisor|0);Yb=sa.location;Sb=A[Yb];if(1===Rc){Sb.buffer||R.enableVertexAttribArray(Yb);Kc=kc||1;if(Sb.type!==kd||Sb.size!==Kc||Sb.buffer!==hc||Sb.normalized!==vc||Sb.offset!==bb||Sb.stride!==Xa)R.bindBuffer(34962,hc.buffer),
R.vertexAttribPointer(Yb,Kc,kd,vc,Xa,bb),Sb.type=kd,Sb.size=Kc,Sb.buffer=hc,Sb.normalized=vc,Sb.offset=bb,Sb.stride=Xa;Sb.divisor!==Ac&&(f.vertexAttribDivisorANGLE(Yb,Ac),Sb.divisor=Ac)}else if(Sb.buffer&&(R.disableVertexAttribArray(Yb),Sb.buffer=null),Sb.x!==$a||Sb.y!==Xb||Sb.z!==tc||Sb.w!==Bb)R.vertexAttrib4f(Yb,$a,Xb,tc,Bb),Sb.x=$a,Sb.y=Xb,Sb.z=tc,Sb.w=Bb;Tb=V.call(this,ha,p,m);zd=!1;Ec=null;pd=0;Mc=!1;ud=Xc=0;oc=1;wc=0;ic=5126;Zb=Vb=sc=db=0;va(Tb)?(zd=!0,Ec=u.createStream(34962,Tb),ic=Ec.dtype):
(Ec=u.getBuffer(Tb))?ic=Ec.dtype:"constant"in Tb?(oc=2,"number"===typeof Tb.constant?(sc=Tb.constant,Vb=Zb=db=0):(sc=0<Tb.constant.length?Tb.constant[0]:0,Vb=1<Tb.constant.length?Tb.constant[1]:0,Zb=2<Tb.constant.length?Tb.constant[2]:0,db=3<Tb.constant.length?Tb.constant[3]:0)):(Ec=va(Tb.buffer)?u.createStream(34962,Tb.buffer):u.getBuffer(Tb.buffer),ic="type"in Tb?Ad[Tb.type]:Ec.dtype,Mc=!!Tb.normalized,ud=Tb.size|0,Xc=Tb.offset|0,wc=Tb.stride|0,pd=Tb.divisor|0);ec=Ya.location;jc=A[ec];if(1===oc){jc.buffer||
R.enableVertexAttribArray(ec);yc=ud||1;if(jc.type!==ic||jc.size!==yc||jc.buffer!==Ec||jc.normalized!==Mc||jc.offset!==Xc||jc.stride!==wc)R.bindBuffer(34962,Ec.buffer),R.vertexAttribPointer(ec,yc,ic,Mc,wc,Xc),jc.type=ic,jc.size=yc,jc.buffer=Ec,jc.normalized=Mc,jc.offset=Xc,jc.stride=wc;jc.divisor!==pd&&(f.vertexAttribDivisorANGLE(ec,pd),jc.divisor=pd)}else if(jc.buffer&&(R.disableVertexAttribArray(ec),jc.buffer=null),jc.x!==sc||jc.y!==Vb||jc.z!==Zb||jc.w!==db)R.vertexAttrib4f(ec,sc,Vb,Zb,db),jc.x=
sc,jc.y=Vb,jc.z=Zb,jc.w=db;Bc=X.call(this,ha,p,m);bd=!1;Pc=null;Qc=0;Sc=!1;ld=Yc=0;cd=1;Zc=0;lc=5126;dd=Uc=$c=dc=0;va(Bc)?(bd=!0,Pc=u.createStream(34962,Bc),lc=Pc.dtype):(Pc=u.getBuffer(Bc))?lc=Pc.dtype:"constant"in Bc?(cd=2,"number"===typeof Bc.constant?($c=Bc.constant,Uc=dd=dc=0):($c=0<Bc.constant.length?Bc.constant[0]:0,Uc=1<Bc.constant.length?Bc.constant[1]:0,dd=2<Bc.constant.length?Bc.constant[2]:0,dc=3<Bc.constant.length?Bc.constant[3]:0)):(Pc=va(Bc.buffer)?u.createStream(34962,Bc.buffer):u.getBuffer(Bc.buffer),
lc="type"in Bc?Ad[Bc.type]:Pc.dtype,Sc=!!Bc.normalized,ld=Bc.size|0,Yc=Bc.offset|0,Zc=Bc.stride|0,Qc=Bc.divisor|0);zc=ja.location;hd=A[zc];if(1===cd){hd.buffer||R.enableVertexAttribArray(zc);pe=ld||1;if(hd.type!==lc||hd.size!==pe||hd.buffer!==Pc||hd.normalized!==Sc||hd.offset!==Yc||hd.stride!==Zc)R.bindBuffer(34962,Pc.buffer),R.vertexAttribPointer(zc,pe,lc,Sc,Zc,Yc),hd.type=lc,hd.size=pe,hd.buffer=Pc,hd.normalized=Sc,hd.offset=Yc,hd.stride=Zc;hd.divisor!==Qc&&(f.vertexAttribDivisorANGLE(zc,Qc),hd.divisor=
Qc)}else if(hd.buffer&&(R.disableVertexAttribArray(zc),hd.buffer=null),hd.x!==$c||hd.y!==Uc||hd.z!==dd||hd.w!==dc)R.vertexAttrib4f(zc,$c,Uc,dd,dc),hd.x=$c,hd.y=Uc,hd.z=dd,hd.w=dc;qd=S.call(this,ha,p,m);wd=!1;id=null;De=0;Pd=!1;le=fe=0;$d=1;Kd=0;Id=5126;sd=vd=Tc=nd=0;va(qd)?(wd=!0,id=u.createStream(34962,qd),Id=id.dtype):(id=u.getBuffer(qd))?Id=id.dtype:"constant"in qd?($d=2,"number"===typeof qd.constant?(Tc=qd.constant,vd=sd=nd=0):(Tc=0<qd.constant.length?qd.constant[0]:0,vd=1<qd.constant.length?
qd.constant[1]:0,sd=2<qd.constant.length?qd.constant[2]:0,nd=3<qd.constant.length?qd.constant[3]:0)):(id=va(qd.buffer)?u.createStream(34962,qd.buffer):u.getBuffer(qd.buffer),Id="type"in qd?Ad[qd.type]:id.dtype,Pd=!!qd.normalized,le=qd.size|0,fe=qd.offset|0,Kd=qd.stride|0,De=qd.divisor|0);jd=oa.location;xd=A[jd];if(1===$d){xd.buffer||R.enableVertexAttribArray(jd);Bd=le||1;if(xd.type!==Id||xd.size!==Bd||xd.buffer!==id||xd.normalized!==Pd||xd.offset!==fe||xd.stride!==Kd)R.bindBuffer(34962,id.buffer),
R.vertexAttribPointer(jd,Bd,Id,Pd,Kd,fe),xd.type=Id,xd.size=Bd,xd.buffer=id,xd.normalized=Pd,xd.offset=fe,xd.stride=Kd;xd.divisor!==De&&(f.vertexAttribDivisorANGLE(jd,De),xd.divisor=De)}else if(xd.buffer&&(R.disableVertexAttribArray(jd),xd.buffer=null),xd.x!==Tc||xd.y!==vd||xd.z!==sd||xd.w!==nd)R.vertexAttrib4f(jd,Tc,vd,sd,nd),xd.x=Tc,xd.y=vd,xd.z=sd,xd.w=nd;Ed=T.call(this,ha,p,m);qe=!1;je=null;te=0;ke=!1;ge=ie=0;ue=1;ce=0;me=5126;re=ve=gd=Nc=0;va(Ed)?(qe=!0,je=u.createStream(34962,Ed),me=je.dtype):
(je=u.getBuffer(Ed))?me=je.dtype:"constant"in Ed?(ue=2,"number"===typeof Ed.constant?(gd=Ed.constant,ve=re=Nc=0):(gd=0<Ed.constant.length?Ed.constant[0]:0,ve=1<Ed.constant.length?Ed.constant[1]:0,re=2<Ed.constant.length?Ed.constant[2]:0,Nc=3<Ed.constant.length?Ed.constant[3]:0)):(je=va(Ed.buffer)?u.createStream(34962,Ed.buffer):u.getBuffer(Ed.buffer),me="type"in Ed?Ad[Ed.type]:je.dtype,ke=!!Ed.normalized,ge=Ed.size|0,ie=Ed.offset|0,ce=Ed.stride|0,te=Ed.divisor|0);Ld=z.location;Qd=A[Ld];if(1===ue){Qd.buffer||
R.enableVertexAttribArray(Ld);Rd=ge||4;if(Qd.type!==me||Qd.size!==Rd||Qd.buffer!==je||Qd.normalized!==ke||Qd.offset!==ie||Qd.stride!==ce)R.bindBuffer(34962,je.buffer),R.vertexAttribPointer(Ld,Rd,me,ke,ce,ie),Qd.type=me,Qd.size=Rd,Qd.buffer=je,Qd.normalized=ke,Qd.offset=ie,Qd.stride=ce;Qd.divisor!==te&&(f.vertexAttribDivisorANGLE(Ld,te),Qd.divisor=te)}else if(Qd.buffer&&(R.disableVertexAttribArray(Ld),Qd.buffer=null),Qd.x!==gd||Qd.y!==ve||Qd.z!==re||Qd.w!==Nc)R.vertexAttrib4f(Ld,gd,ve,re,Nc),Qd.x=
gd,Qd.y=ve,Qd.z=re,Qd.w=Nc;Sd=N.call(this,ha,p,m);ne=!1;Ae=null;Ee=0;se=!1;Ue=Te=0;Pe=1;we=0;He=5126;Ie=Me=Le=Ke=0;va(Sd)?(ne=!0,Ae=u.createStream(34962,Sd),He=Ae.dtype):(Ae=u.getBuffer(Sd))?He=Ae.dtype:"constant"in Sd?(Pe=2,"number"===typeof Sd.constant?(Le=Sd.constant,Me=Ie=Ke=0):(Le=0<Sd.constant.length?Sd.constant[0]:0,Me=1<Sd.constant.length?Sd.constant[1]:0,Ie=2<Sd.constant.length?Sd.constant[2]:0,Ke=3<Sd.constant.length?Sd.constant[3]:0)):(Ae=va(Sd.buffer)?u.createStream(34962,Sd.buffer):u.getBuffer(Sd.buffer),
He="type"in Sd?Ad[Sd.type]:Ae.dtype,se=!!Sd.normalized,Ue=Sd.size|0,Te=Sd.offset|0,we=Sd.stride|0,Ee=Sd.divisor|0);Md=pa.location;Xd=A[Md];if(1===Pe){Xd.buffer||R.enableVertexAttribArray(Md);be=Ue||4;if(Xd.type!==He||Xd.size!==be||Xd.buffer!==Ae||Xd.normalized!==se||Xd.offset!==Te||Xd.stride!==we)R.bindBuffer(34962,Ae.buffer),R.vertexAttribPointer(Md,be,He,se,we,Te),Xd.type=He,Xd.size=be,Xd.buffer=Ae,Xd.normalized=se,Xd.offset=Te,Xd.stride=we;Xd.divisor!==Ee&&(f.vertexAttribDivisorANGLE(Md,Ee),Xd.divisor=
Ee)}else if(Xd.buffer&&(R.disableVertexAttribArray(Md),Xd.buffer=null),Xd.x!==Le||Xd.y!==Me||Xd.z!==Ie||Xd.w!==Ke)R.vertexAttrib4f(Md,Le,Me,Ie,Ke),Xd.x=Le,Xd.y=Me,Xd.z=Ie,Xd.w=Ke;de=x.call(this,ha,p,m);Ne=!1;Jd=null;Td=0;Fe=!1;cf=Oe=0;bf=1;Ve=0;Qe=5126;Xe=We=Ze=af=0;va(de)?(Ne=!0,Jd=u.createStream(34962,de),Qe=Jd.dtype):(Jd=u.getBuffer(de))?Qe=Jd.dtype:"constant"in de?(bf=2,"number"===typeof de.constant?(Ze=de.constant,We=Xe=af=0):(Ze=0<de.constant.length?de.constant[0]:0,We=1<de.constant.length?
de.constant[1]:0,Xe=2<de.constant.length?de.constant[2]:0,af=3<de.constant.length?de.constant[3]:0)):(Jd=va(de.buffer)?u.createStream(34962,de.buffer):u.getBuffer(de.buffer),Qe="type"in de?Ad[de.type]:Jd.dtype,Fe=!!de.normalized,cf=de.size|0,Oe=de.offset|0,Ve=de.stride|0,Td=de.divisor|0);Ud=ea.location;ae=A[Ud];if(1===bf){ae.buffer||R.enableVertexAttribArray(Ud);Ye=cf||1;if(ae.type!==Qe||ae.size!==Ye||ae.buffer!==Jd||ae.normalized!==Fe||ae.offset!==Oe||ae.stride!==Ve)R.bindBuffer(34962,Jd.buffer),
R.vertexAttribPointer(Ud,Ye,Qe,Fe,Ve,Oe),ae.type=Qe,ae.size=Ye,ae.buffer=Jd,ae.normalized=Fe,ae.offset=Oe,ae.stride=Ve;ae.divisor!==Td&&(f.vertexAttribDivisorANGLE(Ud,Td),ae.divisor=Td)}else if(ae.buffer&&(R.disableVertexAttribArray(Ud),ae.buffer=null),ae.x!==Ze||ae.y!==We||ae.z!==Xe||ae.w!==af)R.vertexAttrib4f(Ud,Ze,We,Xe,af),ae.x=Ze,ae.y=We,ae.z=Xe,ae.w=af;kf=ha.pixelRatio;m&&of===kf||(of=kf,R.uniform1f(ya.location,kf));ff=p.scale;lf=ff[0];nf=ff[1];m&&mf===lf&&sf===nf||(mf=lf,sf=nf,R.uniform2f(da.location,
lf,nf));pf=p.scaleFract;tf=pf[0];Df=pf[1];m&&Cf===tf&&Re===Df||(Cf=tf,Re=Df,R.uniform2f(Ca.location,tf,Df));Ge=p.translate;qf=Ge[0];Ef=Ge[1];m&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,R.uniform2f(na.location,qf,Ef));Bf=p.translateFract;Ff=Bf[0];xf=Bf[1];m&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,R.uniform2f(za.location,Ff,xf));wf=O.call(this,ha,p,m);zf=wf[0];Jf=wf[1];m&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,R.uniform2f(qa.location,zf,Jf));Lf=p.opacity;m&&Mf===Lf||(Mf=Lf,R.uniform1f(ma.location,Lf));(uf=p.markerTexture)&&
"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;R.uniform1i(U.location,Rf.bind());If=p.elements;vf=null;(vf=(dg=va(If))?mb.createStream(If):mb.getElements(If))&&R.bindBuffer(34963,vf.buffer.buffer);Sf=p.offset;if(Tf=p.count)0<pb?vf?f.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),pb):f.drawArraysInstancedANGLE(0,Sf,Tf,pb):0>pb&&(vf?R.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):R.drawArrays(0,Sf,Tf)),ha.viewportWidth=Qb,ha.viewportHeight=jb,sb&&u.destroyStream(Ua),
Oa&&u.destroyStream(Cc),ob&&u.destroyStream(hc),zd&&u.destroyStream(Ec),bd&&u.destroyStream(Pc),wd&&u.destroyStream(id),qe&&u.destroyStream(je),ne&&u.destroyStream(Ae),Ne&&u.destroyStream(Jd),Rf.unbind(),dg&&mb.destroyStream(vf)}P.unbind();ua.dirty=!0;wa.setVAO(null);g&&(e.cpuTime+=performance.now()-d)},draw:function(a){var g,f,m,x,w,y,q,B,T,D,N,n,C,ra,S,E,G,ka,O,J,M,P,Q,xa,aa,W,ba,V,Aa,Z,X,L,H,ga,la,Da,Ia,Ea,cb,Pb,ab,pb,Va,qd,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,
kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,pe,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we;g=fa.next;g!==fa.cur&&(g?R.bindFramebuffer(36160,g.framebuffer):R.bindFramebuffer(36160,null),fa.cur=g);if(ua.dirty){var He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,
Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf;He=Ga.dither;He!==ua.dither&&(He?R.enable(3024):R.disable(3024),ua.dither=He);Ke=ta[0];Le=ta[1];if(Ke!==Sa[0]||Le!==Sa[1])R.blendEquationSeparate(Ke,Le),Sa[0]=Ke,Sa[1]=Le;Me=Ga.depth_func;Me!==ua.depth_func&&(R.depthFunc(Me),ua.depth_func=Me);Ie=bc[0];Md=bc[1];if(Ie!==Ha[0]||Md!==Ha[1])R.depthRange(Ie,Md),Ha[0]=Ie,Ha[1]=Md;Xd=Ga.depth_mask;Xd!==ua.depth_mask&&(R.depthMask(Xd),ua.depth_mask=Xd);be=ca[0];de=ca[1];Ne=ca[2];Jd=ca[3];if(be!==
ia[0]||de!==ia[1]||Ne!==ia[2]||Jd!==ia[3])R.colorMask(be,de,Ne,Jd),ia[0]=be,ia[1]=de,ia[2]=Ne,ia[3]=Jd;Td=Ga.cull_enable;Td!==ua.cull_enable&&(Td?R.enable(2884):R.disable(2884),ua.cull_enable=Td);Fe=Ga.cull_face;Fe!==ua.cull_face&&(R.cullFace(Fe),ua.cull_face=Fe);Oe=Ga.frontFace;Oe!==ua.frontFace&&(R.frontFace(Oe),ua.frontFace=Oe);cf=Ga.lineWidth;cf!==ua.lineWidth&&(R.lineWidth(cf),ua.lineWidth=cf);bf=Ga.polygonOffset_enable;bf!==ua.polygonOffset_enable&&(bf?R.enable(32823):R.disable(32823),ua.polygonOffset_enable=
bf);Ve=Je[0];Qe=Je[1];if(Ve!==Ub[0]||Qe!==Ub[1])R.polygonOffset(Ve,Qe),Ub[0]=Ve,Ub[1]=Qe;af=Ga.sample_alpha;af!==ua.sample_alpha&&(af?R.enable(32926):R.disable(32926),ua.sample_alpha=af);Ze=Ga.sample_enable;Ze!==ua.sample_enable&&(Ze?R.enable(32928):R.disable(32928),ua.sample_enable=Ze);We=jf[0];Xe=jf[1];if(We!==Fd[0]||Xe!==Fd[1])R.sampleCoverage(We,Xe),Fd[0]=We,Fd[1]=Xe;Ud=Ga.stencil_mask;Ud!==ua.stencil_mask&&(R.stencilMask(Ud),ua.stencil_mask=Ud);ae=Be[0];Ye=Be[1];kf=Be[2];if(ae!==xe[0]||Ye!==
xe[1]||kf!==xe[2])R.stencilFunc(ae,Ye,kf),xe[0]=ae,xe[1]=Ye,xe[2]=kf;of=he[0];ff=he[1];lf=he[2];mf=he[3];if(of!==Od[0]||ff!==Od[1]||lf!==Od[2]||mf!==Od[3])R.stencilOpSeparate(of,ff,lf,mf),Od[0]=of,Od[1]=ff,Od[2]=lf,Od[3]=mf;nf=Nd[0];sf=Nd[1];pf=Nd[2];tf=Nd[3];if(nf!==oe[0]||sf!==oe[1]||pf!==oe[2]||tf!==oe[3])R.stencilOpSeparate(nf,sf,pf,tf),oe[0]=nf,oe[1]=sf,oe[2]=pf,oe[3]=tf}f=a.viewport;m=f.x|0;x=f.y|0;w="width"in f?f.width|0:ha.framebufferWidth-m;y="height"in f?f.height|0:ha.framebufferHeight-
x;q=ha.viewportWidth;ha.viewportWidth=w;B=ha.viewportHeight;ha.viewportHeight=y;R.viewport(m,x,w,y);Gd[0]=m;Gd[1]=x;Gd[2]=w;Gd[3]=y;R.blendColor(0,0,0,1);Y[0]=0;Y[1]=0;Y[2]=0;Y[3]=1;R.enable(3042);ua.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;R.disable(2929);ua.depth_enable=!1;T=a.viewport;D=T.x|0;N=T.y|0;n="width"in T?T.width|0:ha.framebufferWidth-D;C="height"in T?T.height|0:ha.framebufferHeight-N;R.scissor(D,N,n,C);Vd[0]=D;Vd[1]=N;Vd[2]=n;Vd[3]=C;R.enable(3089);
ua.scissor_enable=!0;R.disable(2960);ua.stencil_enable=!1;if(ra=ua.profile)S=performance.now(),e.count++;R.useProgram(t.program);E=Ib.angle_instanced_arrays;wa.setVAO(null);G=p.call(this,ha,a,0);ka=!1;O=null;J=0;M=!1;Q=P=0;xa=1;aa=0;W=5126;Z=Aa=V=ba=0;va(G)?(ka=!0,O=u.createStream(34962,G),W=O.dtype):(O=u.getBuffer(G))?W=O.dtype:"constant"in G?(xa=2,"number"===typeof G.constant?(V=G.constant,Aa=Z=ba=0):(V=0<G.constant.length?G.constant[0]:0,Aa=1<G.constant.length?G.constant[1]:0,Z=2<G.constant.length?
G.constant[2]:0,ba=3<G.constant.length?G.constant[3]:0)):(O=va(G.buffer)?u.createStream(34962,G.buffer):u.getBuffer(G.buffer),W="type"in G?Ad[G.type]:O.dtype,M=!!G.normalized,Q=G.size|0,P=G.offset|0,aa=G.stride|0,J=G.divisor|0);X=Pa.location;L=A[X];if(1===xa){L.buffer||R.enableVertexAttribArray(X);H=Q||1;if(L.type!==W||L.size!==H||L.buffer!==O||L.normalized!==M||L.offset!==P||L.stride!==aa)R.bindBuffer(34962,O.buffer),R.vertexAttribPointer(X,H,W,M,aa,P),L.type=W,L.size=H,L.buffer=O,L.normalized=M,
L.offset=P,L.stride=aa;L.divisor!==J&&(E.vertexAttribDivisorANGLE(X,J),L.divisor=J)}else if(L.buffer&&(R.disableVertexAttribArray(X),L.buffer=null),L.x!==V||L.y!==Aa||L.z!==Z||L.w!==ba)R.vertexAttrib4f(X,V,Aa,Z,ba),L.x=V,L.y=Aa,L.z=Z,L.w=ba;ga=h.call(this,ha,a,0);la=!1;Da=null;Ia=0;Ea=!1;Pb=cb=0;ab=1;pb=0;Va=5126;rc=Lb=Kb=qd=0;va(ga)?(la=!0,Da=u.createStream(34962,ga),Va=Da.dtype):(Da=u.getBuffer(ga))?Va=Da.dtype:"constant"in ga?(ab=2,"number"===typeof ga.constant?(Kb=ga.constant,Lb=rc=qd=0):(Kb=
0<ga.constant.length?ga.constant[0]:0,Lb=1<ga.constant.length?ga.constant[1]:0,rc=2<ga.constant.length?ga.constant[2]:0,qd=3<ga.constant.length?ga.constant[3]:0)):(Da=va(ga.buffer)?u.createStream(34962,ga.buffer):u.getBuffer(ga.buffer),Va="type"in ga?Ad[ga.type]:Da.dtype,Ea=!!ga.normalized,Pb=ga.size|0,cb=ga.offset|0,pb=ga.stride|0,Ia=ga.divisor|0);Qb=zb.location;jb=A[Qb];if(1===ab){jb.buffer||R.enableVertexAttribArray(Qb);Hb=Pb||1;if(jb.type!==Va||jb.size!==Hb||jb.buffer!==Da||jb.normalized!==Ea||
jb.offset!==cb||jb.stride!==pb)R.bindBuffer(34962,Da.buffer),R.vertexAttribPointer(Qb,Hb,Va,Ea,pb,cb),jb.type=Va,jb.size=Hb,jb.buffer=Da,jb.normalized=Ea,jb.offset=cb,jb.stride=pb;jb.divisor!==Ia&&(E.vertexAttribDivisorANGLE(Qb,Ia),jb.divisor=Ia)}else if(jb.buffer&&(R.disableVertexAttribArray(Qb),jb.buffer=null),jb.x!==Kb||jb.y!==Lb||jb.z!==rc||jb.w!==qd)R.vertexAttrib4f(Qb,Kb,Lb,rc,qd),jb.x=Kb,jb.y=Lb,jb.z=rc,jb.w=qd;Eb=d.call(this,ha,a,0);yb=!1;hb=null;$b=0;Rb=!1;Ua=sb=0;Wb=1;qb=0;cc=5126;tb=Ja=
rb=ib=0;va(Eb)?(yb=!0,hb=u.createStream(34962,Eb),cc=hb.dtype):(hb=u.getBuffer(Eb))?cc=hb.dtype:"constant"in Eb?(Wb=2,"number"===typeof Eb.constant?(rb=Eb.constant,Ja=tb=ib=0):(rb=0<Eb.constant.length?Eb.constant[0]:0,Ja=1<Eb.constant.length?Eb.constant[1]:0,tb=2<Eb.constant.length?Eb.constant[2]:0,ib=3<Eb.constant.length?Eb.constant[3]:0)):(hb=va(Eb.buffer)?u.createStream(34962,Eb.buffer):u.getBuffer(Eb.buffer),cc="type"in Eb?Ad[Eb.type]:hb.dtype,Rb=!!Eb.normalized,Ua=Eb.size|0,sb=Eb.offset|0,qb=
Eb.stride|0,$b=Eb.divisor|0);Ka=sa.location;eb=A[Ka];if(1===Wb){eb.buffer||R.enableVertexAttribArray(Ka);fb=Ua||1;if(eb.type!==cc||eb.size!==fb||eb.buffer!==hb||eb.normalized!==Rb||eb.offset!==sb||eb.stride!==qb)R.bindBuffer(34962,hb.buffer),R.vertexAttribPointer(Ka,fb,cc,Rb,qb,sb),eb.type=cc,eb.size=fb,eb.buffer=hb,eb.normalized=Rb,eb.offset=sb,eb.stride=qb;eb.divisor!==$b&&(E.vertexAttribDivisorANGLE(Ka,$b),eb.divisor=$b)}else if(eb.buffer&&(R.disableVertexAttribArray(Ka),eb.buffer=null),eb.x!==
rb||eb.y!==Ja||eb.z!==tb||eb.w!==ib)R.vertexAttrib4f(Ka,rb,Ja,tb,ib),eb.x=rb,eb.y=Ja,eb.z=tb,eb.w=ib;La=c.call(this,ha,a,0);kb=!1;Wa=null;vb=0;ub=!1;Cc=Oa=0;Ra=1;Mb=0;Fb=5126;Nb=Za=Cd=Ma=0;va(La)?(kb=!0,Wa=u.createStream(34962,La),Fb=Wa.dtype):(Wa=u.getBuffer(La))?Fb=Wa.dtype:"constant"in La?(Ra=2,"number"===typeof La.constant?(Cd=La.constant,Za=Nb=Ma=0):(Cd=0<La.constant.length?La.constant[0]:0,Za=1<La.constant.length?La.constant[1]:0,Nb=2<La.constant.length?La.constant[2]:0,Ma=3<La.constant.length?
La.constant[3]:0)):(Wa=va(La.buffer)?u.createStream(34962,La.buffer):u.getBuffer(La.buffer),Fb="type"in La?Ad[La.type]:Wa.dtype,ub=!!La.normalized,Cc=La.size|0,Oa=La.offset|0,Mb=La.stride|0,vb=La.divisor|0);Ob=Ya.location;nb=A[Ob];if(1===Ra){nb.buffer||R.enableVertexAttribArray(Ob);Na=Cc||1;if(nb.type!==Fb||nb.size!==Na||nb.buffer!==Wa||nb.normalized!==ub||nb.offset!==Oa||nb.stride!==Mb)R.bindBuffer(34962,Wa.buffer),R.vertexAttribPointer(Ob,Na,Fb,ub,Mb,Oa),nb.type=Fb,nb.size=Na,nb.buffer=Wa,nb.normalized=
ub,nb.offset=Oa,nb.stride=Mb;nb.divisor!==vb&&(E.vertexAttribDivisorANGLE(Ob,vb),nb.divisor=vb)}else if(nb.buffer&&(R.disableVertexAttribArray(Ob),nb.buffer=null),nb.x!==Cd||nb.y!==Za||nb.z!==Nb||nb.w!==Ma)R.vertexAttrib4f(Ob,Cd,Za,Nb,Ma),nb.x=Cd,nb.y=Za,nb.z=Nb,nb.w=Ma;ac=b.call(this,ha,a,0);Qa=!1;wb=null;xb=0;Ta=!1;hc=ob=0;Ac=1;vc=0;bb=5126;kd=Xa=Rc=kc=0;va(ac)?(Qa=!0,wb=u.createStream(34962,ac),bb=wb.dtype):(wb=u.getBuffer(ac))?bb=wb.dtype:"constant"in ac?(Ac=2,"number"===typeof ac.constant?(Rc=
ac.constant,Xa=kd=kc=0):(Rc=0<ac.constant.length?ac.constant[0]:0,Xa=1<ac.constant.length?ac.constant[1]:0,kd=2<ac.constant.length?ac.constant[2]:0,kc=3<ac.constant.length?ac.constant[3]:0)):(wb=va(ac.buffer)?u.createStream(34962,ac.buffer):u.getBuffer(ac.buffer),bb="type"in ac?Ad[ac.type]:wb.dtype,Ta=!!ac.normalized,hc=ac.size|0,ob=ac.offset|0,vc=ac.stride|0,xb=ac.divisor|0);Bb=ja.location;$a=A[Bb];if(1===Ac){$a.buffer||R.enableVertexAttribArray(Bb);Xb=hc||1;if($a.type!==bb||$a.size!==Xb||$a.buffer!==
wb||$a.normalized!==Ta||$a.offset!==ob||$a.stride!==vc)R.bindBuffer(34962,wb.buffer),R.vertexAttribPointer(Bb,Xb,bb,Ta,vc,ob),$a.type=bb,$a.size=Xb,$a.buffer=wb,$a.normalized=Ta,$a.offset=ob,$a.stride=vc;$a.divisor!==xb&&(E.vertexAttribDivisorANGLE(Bb,xb),$a.divisor=xb)}else if($a.buffer&&(R.disableVertexAttribArray(Bb),$a.buffer=null),$a.x!==Rc||$a.y!==Xa||$a.z!==kd||$a.w!==kc)R.vertexAttrib4f(Bb,Rc,Xa,kd,kc),$a.x=Rc,$a.y=Xa,$a.z=kd,$a.w=kc;tc=l.call(this,ha,a,0);Yb=!1;Sb=null;Kc=0;Tb=!1;Ec=pe=0;
pd=1;Mc=0;Xc=5126;ic=wc=oc=ud=0;va(tc)?(Yb=!0,Sb=u.createStream(34962,tc),Xc=Sb.dtype):(Sb=u.getBuffer(tc))?Xc=Sb.dtype:"constant"in tc?(pd=2,"number"===typeof tc.constant?(oc=tc.constant,wc=ic=ud=0):(oc=0<tc.constant.length?tc.constant[0]:0,wc=1<tc.constant.length?tc.constant[1]:0,ic=2<tc.constant.length?tc.constant[2]:0,ud=3<tc.constant.length?tc.constant[3]:0)):(Sb=va(tc.buffer)?u.createStream(34962,tc.buffer):u.getBuffer(tc.buffer),Xc="type"in tc?Ad[tc.type]:Sb.dtype,Tb=!!tc.normalized,Ec=tc.size|
0,pe=tc.offset|0,Mc=tc.stride|0,Kc=tc.divisor|0);db=oa.location;sc=A[db];if(1===pd){sc.buffer||R.enableVertexAttribArray(db);Vb=Ec||1;if(sc.type!==Xc||sc.size!==Vb||sc.buffer!==Sb||sc.normalized!==Tb||sc.offset!==pe||sc.stride!==Mc)R.bindBuffer(34962,Sb.buffer),R.vertexAttribPointer(db,Vb,Xc,Tb,Mc,pe),sc.type=Xc,sc.size=Vb,sc.buffer=Sb,sc.normalized=Tb,sc.offset=pe,sc.stride=Mc;sc.divisor!==Kc&&(E.vertexAttribDivisorANGLE(db,Kc),sc.divisor=Kc)}else if(sc.buffer&&(R.disableVertexAttribArray(db),sc.buffer=
null),sc.x!==oc||sc.y!==wc||sc.z!==ic||sc.w!==ud)R.vertexAttrib4f(db,oc,wc,ic,ud),sc.x=oc,sc.y=wc,sc.z=ic,sc.w=ud;Zb=r.call(this,ha,a,0);ec=!1;jc=null;yc=0;Bc=!1;Pc=bd=0;Qc=1;Sc=0;Yc=5126;lc=Zc=cd=ld=0;va(Zb)?(ec=!0,jc=u.createStream(34962,Zb),Yc=jc.dtype):(jc=u.getBuffer(Zb))?Yc=jc.dtype:"constant"in Zb?(Qc=2,"number"===typeof Zb.constant?(cd=Zb.constant,Zc=lc=ld=0):(cd=0<Zb.constant.length?Zb.constant[0]:0,Zc=1<Zb.constant.length?Zb.constant[1]:0,lc=2<Zb.constant.length?Zb.constant[2]:0,ld=3<Zb.constant.length?
Zb.constant[3]:0)):(jc=va(Zb.buffer)?u.createStream(34962,Zb.buffer):u.getBuffer(Zb.buffer),Yc="type"in Zb?Ad[Zb.type]:jc.dtype,Bc=!!Zb.normalized,Pc=Zb.size|0,bd=Zb.offset|0,Sc=Zb.stride|0,yc=Zb.divisor|0);dc=z.location;$c=A[dc];if(1===Qc){$c.buffer||R.enableVertexAttribArray(dc);Uc=Pc||4;if($c.type!==Yc||$c.size!==Uc||$c.buffer!==jc||$c.normalized!==Bc||$c.offset!==bd||$c.stride!==Sc)R.bindBuffer(34962,jc.buffer),R.vertexAttribPointer(dc,Uc,Yc,Bc,Sc,bd),$c.type=Yc,$c.size=Uc,$c.buffer=jc,$c.normalized=
Bc,$c.offset=bd,$c.stride=Sc;$c.divisor!==yc&&(E.vertexAttribDivisorANGLE(dc,yc),$c.divisor=yc)}else if($c.buffer&&(R.disableVertexAttribArray(dc),$c.buffer=null),$c.x!==cd||$c.y!==Zc||$c.z!==lc||$c.w!==ld)R.vertexAttrib4f(dc,cd,Zc,lc,ld),$c.x=cd,$c.y=Zc,$c.z=lc,$c.w=ld;dd=v.call(this,ha,a,0);zc=!1;hd=null;Dd=0;ye=!1;id=wd=0;De=1;Pd=0;fe=5126;Id=Kd=$d=le=0;va(dd)?(zc=!0,hd=u.createStream(34962,dd),fe=hd.dtype):(hd=u.getBuffer(dd))?fe=hd.dtype:"constant"in dd?(De=2,"number"===typeof dd.constant?($d=
dd.constant,Kd=Id=le=0):($d=0<dd.constant.length?dd.constant[0]:0,Kd=1<dd.constant.length?dd.constant[1]:0,Id=2<dd.constant.length?dd.constant[2]:0,le=3<dd.constant.length?dd.constant[3]:0)):(hd=va(dd.buffer)?u.createStream(34962,dd.buffer):u.getBuffer(dd.buffer),fe="type"in dd?Ad[dd.type]:hd.dtype,ye=!!dd.normalized,id=dd.size|0,wd=dd.offset|0,Pd=dd.stride|0,Dd=dd.divisor|0);nd=pa.location;Tc=A[nd];if(1===De){Tc.buffer||R.enableVertexAttribArray(nd);vd=id||4;if(Tc.type!==fe||Tc.size!==vd||Tc.buffer!==
hd||Tc.normalized!==ye||Tc.offset!==wd||Tc.stride!==Pd)R.bindBuffer(34962,hd.buffer),R.vertexAttribPointer(nd,vd,fe,ye,Pd,wd),Tc.type=fe,Tc.size=vd,Tc.buffer=hd,Tc.normalized=ye,Tc.offset=wd,Tc.stride=Pd;Tc.divisor!==Dd&&(E.vertexAttribDivisorANGLE(nd,Dd),Tc.divisor=Dd)}else if(Tc.buffer&&(R.disableVertexAttribArray(nd),Tc.buffer=null),Tc.x!==$d||Tc.y!==Kd||Tc.z!==Id||Tc.w!==le)R.vertexAttrib4f(nd,$d,Kd,Id,le),Tc.x=$d,Tc.y=Kd,Tc.z=Id,Tc.w=le;sd=k.call(this,ha,a,0);jd=!1;xd=null;Bd=0;Ed=!1;je=qe=0;
te=1;ke=0;ie=5126;me=ce=ue=ge=0;va(sd)?(jd=!0,xd=u.createStream(34962,sd),ie=xd.dtype):(xd=u.getBuffer(sd))?ie=xd.dtype:"constant"in sd?(te=2,"number"===typeof sd.constant?(ue=sd.constant,ce=me=ge=0):(ue=0<sd.constant.length?sd.constant[0]:0,ce=1<sd.constant.length?sd.constant[1]:0,me=2<sd.constant.length?sd.constant[2]:0,ge=3<sd.constant.length?sd.constant[3]:0)):(xd=va(sd.buffer)?u.createStream(34962,sd.buffer):u.getBuffer(sd.buffer),ie="type"in sd?Ad[sd.type]:xd.dtype,Ed=!!sd.normalized,je=sd.size|
0,qe=sd.offset|0,ke=sd.stride|0,Bd=sd.divisor|0);Nc=ea.location;gd=A[Nc];if(1===te){gd.buffer||R.enableVertexAttribArray(Nc);ve=je||1;if(gd.type!==ie||gd.size!==ve||gd.buffer!==xd||gd.normalized!==Ed||gd.offset!==qe||gd.stride!==ke)R.bindBuffer(34962,xd.buffer),R.vertexAttribPointer(Nc,ve,ie,Ed,ke,qe),gd.type=ie,gd.size=ve,gd.buffer=xd,gd.normalized=Ed,gd.offset=qe,gd.stride=ke;gd.divisor!==Bd&&(E.vertexAttribDivisorANGLE(Nc,Bd),gd.divisor=Bd)}else if(gd.buffer&&(R.disableVertexAttribArray(Nc),gd.buffer=
null),gd.x!==ue||gd.y!==ce||gd.z!==me||gd.w!==ge)R.vertexAttrib4f(Nc,ue,ce,me,ge),gd.x=ue,gd.y=ce,gd.z=me,gd.w=ge;R.uniform1i(K.location,!1);R.uniform1f(ya.location,ha.pixelRatio);re=a.scale;R.uniform2f(da.location,re[0],re[1]);Ld=a.scaleFract;R.uniform2f(Ca.location,Ld[0],Ld[1]);Qd=a.translate;R.uniform2f(na.location,Qd[0],Qd[1]);Rd=a.translateFract;R.uniform2f(za.location,Rd[0],Rd[1]);Sd=F.call(this,ha,a,0);R.uniform2f(qa.location,Sd[0],Sd[1]);R.uniform1f(ma.location,a.opacity);R.uniform1i(Ba.location,
I.bind());(ne=a.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);Ae=ne._texture;R.uniform1i(U.location,Ae.bind());Ee=a.elements;se=null;(se=(Te=va(Ee))?mb.createStream(Ee):mb.getElements(Ee))&&R.bindBuffer(34963,se.buffer.buffer);Ue=a.offset;if(Pe=a.count)we=Fa.instances,0<we?se?E.drawElementsInstancedANGLE(0,Pe,se.type,Ue<<(se.type-5121>>1),we):E.drawArraysInstancedANGLE(0,Ue,Pe,we):0>we&&(se?R.drawElements(0,Pe,se.type,Ue<<(se.type-5121>>1)):R.drawArrays(0,Ue,Pe)),ua.dirty=!0,wa.setVAO(null),
ha.viewportWidth=q,ha.viewportHeight=B,ra&&(e.cpuTime+=performance.now()-S),ka&&u.destroyStream(O),la&&u.destroyStream(Da),yb&&u.destroyStream(hb),kb&&u.destroyStream(Wa),Qa&&u.destroyStream(wb),Yb&&u.destroyStream(Sb),ec&&u.destroyStream(jc),zc&&u.destroyStream(hd),jd&&u.destroyStream(xd),I.unbind(),Ae.unbind(),Te&&mb.destroyStream(se)},scope:function(a,c,b){var d,p,x,A,z,h,k,t,l,R,r,v,sa,K,T,U,N,F,S,I,da,fa,zb,O,Pa,Y,P,Q,ea,ya,qa,wa,pa,ca,ja,V,X,Ya,na,H,Ca,ga,oa,ma,za,la,ta,Ba,Ib,Ha,gb,Sa,Ea,Ub,
ia,bc,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Vd,Ra,Mb,Fb,Ma,yd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Fd,Xa,Gd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,Nd,Ec,pd,Mc,Xc,Be,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Od,oe,wd,id,xe,he,fe,Je,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,jf,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,
Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;d=a.viewport;p=d.x|0;x=d.y|0;A="width"in d?d.width|0:ha.framebufferWidth-p;z="height"in d?d.height|0:ha.framebufferHeight-x;h=ha.viewportWidth;ha.viewportWidth=A;k=ha.viewportHeight;ha.viewportHeight=z;t=qd[0];qd[0]=p;l=qd[1];qd[1]=x;R=qd[2];qd[2]=A;r=qd[3];qd[3]=z;v=ka[0];
ka[0]=0;sa=ka[1];ka[1]=0;K=ka[2];ka[2]=0;T=ka[3];ka[3]=1;U=Ga.blend_enable;Ga.blend_enable=!0;N=Ia[0];Ia[0]=770;F=Ia[1];Ia[1]=771;S=Ia[2];Ia[2]=773;I=Ia[3];Ia[3]=1;da=Ga.depth_enable;Ga.depth_enable=!1;fa=a.viewport;zb=fa.x|0;O=fa.y|0;Pa="width"in fa?fa.width|0:ha.framebufferWidth-zb;Y="height"in fa?fa.height|0:ha.framebufferHeight-O;P=pe[0];pe[0]=zb;Q=pe[1];pe[1]=O;ea=pe[2];pe[2]=Pa;ya=pe[3];pe[3]=Y;qa=Ga.scissor_enable;Ga.scissor_enable=!0;wa=Ga.stencil_enable;Ga.stencil_enable=!1;if(pa=ua.profile)ca=
performance.now(),e.count++;ja=a.elements;V=null;V=(X=va(ja))?mb.createStream(ja):mb.getElements(ja);Ya=Fa.elements;Fa.elements=V;na=a.offset;H=Fa.offset;Fa.offset=na;Ca=a.count;ga=Fa.count;Fa.count=Ca;oa=Fa.primitive;Fa.primitive=0;ma=xa[45];xa[45]=!1;za=a.markerTexture;la=xa[48];xa[48]=za;ta=a.opacity;Ba=xa[10];xa[10]=ta;Ib=n.call(this,ha,a,b);Ha=xa[46];xa[46]=Ib;gb=xa[47];xa[47]=aa;Sa=ha.pixelRatio;Ea=xa[34];xa[34]=Sa;Ub=a.scale;ia=xa[6];xa[6]=Ub;bc=a.scaleFract;qb=xa[7];xa[7]=bc;cc=a.translate;
ib=xa[8];xa[8]=cc;rb=a.translateFract;Ja=xa[9];xa[9]=rb;tb=q.call(this,ha,a,b);Ka=!1;eb=null;fb=0;La=!1;Wa=kb=0;vb=1;ub=0;Oa=5126;Fb=Mb=Ra=Vd=0;va(tb)?(Ka=!0,eb=u.createStream(34962,tb),Oa=eb.dtype):(eb=u.getBuffer(tb))?Oa=eb.dtype:"constant"in tb?(vb=2,"number"===typeof tb.constant?(Ra=tb.constant,Mb=Fb=Vd=0):(Ra=0<tb.constant.length?tb.constant[0]:0,Mb=1<tb.constant.length?tb.constant[1]:0,Fb=2<tb.constant.length?tb.constant[2]:0,Vd=3<tb.constant.length?tb.constant[3]:0)):(eb=va(tb.buffer)?u.createStream(34962,
tb.buffer):u.getBuffer(tb.buffer),Oa="type"in tb?Ad[tb.type]:eb.dtype,La=!!tb.normalized,Wa=tb.size|0,kb=tb.offset|0,ub=tb.stride|0,fb=tb.divisor|0);Ma=J.buffer;J.buffer=eb;yd=J.divisor;J.divisor=fb;Za=J.normalized;J.normalized=La;Nb=J.offset;J.offset=kb;Ob=J.size;J.size=Wa;nb=J.state;J.state=vb;Na=J.stride;J.stride=ub;ac=J.type;J.type=Oa;Qa=J.w;J.w=Vd;wb=J.x;J.x=Ra;xb=J.y;J.y=Mb;Ta=J.z;J.z=Fb;ob=C.call(this,ha,a,b);hc=!1;Ac=null;vc=0;bb=!1;Fd=kc=0;Xa=1;Gd=0;Bb=5126;Yb=tc=Xb=$a=0;va(ob)?(hc=!0,Ac=
u.createStream(34962,ob),Bb=Ac.dtype):(Ac=u.getBuffer(ob))?Bb=Ac.dtype:"constant"in ob?(Xa=2,"number"===typeof ob.constant?(Xb=ob.constant,tc=Yb=$a=0):(Xb=0<ob.constant.length?ob.constant[0]:0,tc=1<ob.constant.length?ob.constant[1]:0,Yb=2<ob.constant.length?ob.constant[2]:0,$a=3<ob.constant.length?ob.constant[3]:0)):(Ac=va(ob.buffer)?u.createStream(34962,ob.buffer):u.getBuffer(ob.buffer),Bb="type"in ob?Ad[ob.type]:Ac.dtype,bb=!!ob.normalized,Fd=ob.size|0,kc=ob.offset|0,Gd=ob.stride|0,vc=ob.divisor|
0);Sb=M.buffer;M.buffer=Ac;Kc=M.divisor;M.divisor=vc;Tb=M.normalized;M.normalized=bb;Nd=M.offset;M.offset=kc;Ec=M.size;M.size=Fd;pd=M.state;M.state=Xa;Mc=M.stride;M.stride=Gd;Xc=M.type;M.type=Bb;Be=M.w;M.w=$a;oc=M.x;M.x=Xb;wc=M.y;M.y=tc;ic=M.z;M.z=Yb;db=Aa.call(this,ha,a,b);sc=!1;Vb=null;Zb=0;ec=!1;yc=jc=0;Bc=1;bd=0;Pc=5126;ld=Yc=Sc=Qc=0;va(db)?(sc=!0,Vb=u.createStream(34962,db),Pc=Vb.dtype):(Vb=u.getBuffer(db))?Pc=Vb.dtype:"constant"in db?(Bc=2,"number"===typeof db.constant?(Sc=db.constant,Yc=ld=
Qc=0):(Sc=0<db.constant.length?db.constant[0]:0,Yc=1<db.constant.length?db.constant[1]:0,ld=2<db.constant.length?db.constant[2]:0,Qc=3<db.constant.length?db.constant[3]:0)):(Vb=va(db.buffer)?u.createStream(34962,db.buffer):u.getBuffer(db.buffer),Pc="type"in db?Ad[db.type]:Vb.dtype,ec=!!db.normalized,yc=db.size|0,jc=db.offset|0,bd=db.stride|0,Zb=db.divisor|0);cd=f.buffer;f.buffer=Vb;Zc=f.divisor;f.divisor=Zb;lc=f.normalized;f.normalized=ec;dc=f.offset;f.offset=jc;$c=f.size;f.size=yc;Uc=f.state;f.state=
Bc;dd=f.stride;f.stride=bd;zc=f.type;f.type=Pc;hd=f.w;f.w=Qc;Od=f.x;f.x=Sc;oe=f.y;f.y=Yc;wd=f.z;f.z=ld;id=w.call(this,ha,a,b);xe=!1;he=null;fe=0;Je=!1;Kd=$d=0;Id=1;nd=0;Tc=5126;xd=jd=sd=vd=0;va(id)?(xe=!0,he=u.createStream(34962,id),Tc=he.dtype):(he=u.getBuffer(id))?Tc=he.dtype:"constant"in id?(Id=2,"number"===typeof id.constant?(sd=id.constant,jd=xd=vd=0):(sd=0<id.constant.length?id.constant[0]:0,jd=1<id.constant.length?id.constant[1]:0,xd=2<id.constant.length?id.constant[2]:0,vd=3<id.constant.length?
id.constant[3]:0)):(he=va(id.buffer)?u.createStream(34962,id.buffer):u.getBuffer(id.buffer),Tc="type"in id?Ad[id.type]:he.dtype,Je=!!id.normalized,Kd=id.size|0,$d=id.offset|0,nd=id.stride|0,fe=id.divisor|0);Bd=ba.buffer;ba.buffer=he;Ed=ba.divisor;ba.divisor=fe;jf=ba.normalized;ba.normalized=Je;je=ba.offset;ba.offset=$d;te=ba.size;ba.size=Kd;ke=ba.state;ba.state=Id;ie=ba.stride;ba.stride=nd;ge=ba.type;ba.type=Tc;ue=ba.w;ba.w=vd;ce=ba.x;ba.x=sd;me=ba.y;ba.y=jd;Nc=ba.z;ba.z=xd;gd=E.call(this,ha,a,b);
ve=!1;re=null;Ld=0;Qd=!1;Sd=Rd=0;ne=1;Ae=0;Ee=5126;Pe=Ue=Te=se=0;va(gd)?(ve=!0,re=u.createStream(34962,gd),Ee=re.dtype):(re=u.getBuffer(gd))?Ee=re.dtype:"constant"in gd?(ne=2,"number"===typeof gd.constant?(Te=gd.constant,Ue=Pe=se=0):(Te=0<gd.constant.length?gd.constant[0]:0,Ue=1<gd.constant.length?gd.constant[1]:0,Pe=2<gd.constant.length?gd.constant[2]:0,se=3<gd.constant.length?gd.constant[3]:0)):(re=va(gd.buffer)?u.createStream(34962,gd.buffer):u.getBuffer(gd.buffer),Ee="type"in gd?Ad[gd.type]:re.dtype,
Qd=!!gd.normalized,Sd=gd.size|0,Rd=gd.offset|0,Ae=gd.stride|0,Ld=gd.divisor|0);we=W.buffer;W.buffer=re;He=W.divisor;W.divisor=Ld;Ke=W.normalized;W.normalized=Qd;Le=W.offset;W.offset=Rd;Me=W.size;W.size=Sd;Ie=W.state;W.state=ne;Md=W.stride;W.stride=Ae;Xd=W.type;W.type=Ee;be=W.w;W.w=se;de=W.x;W.x=Te;Ne=W.y;W.y=Ue;Jd=W.z;W.z=Pe;Td=D.call(this,ha,a,b);Fe=!1;Oe=null;cf=0;bf=!1;Qe=Ve=0;af=1;Ze=0;We=5126;Ye=ae=Ud=Xe=0;va(Td)?(Fe=!0,Oe=u.createStream(34962,Td),We=Oe.dtype):(Oe=u.getBuffer(Td))?We=Oe.dtype:
"constant"in Td?(af=2,"number"===typeof Td.constant?(Ud=Td.constant,ae=Ye=Xe=0):(Ud=0<Td.constant.length?Td.constant[0]:0,ae=1<Td.constant.length?Td.constant[1]:0,Ye=2<Td.constant.length?Td.constant[2]:0,Xe=3<Td.constant.length?Td.constant[3]:0)):(Oe=va(Td.buffer)?u.createStream(34962,Td.buffer):u.getBuffer(Td.buffer),We="type"in Td?Ad[Td.type]:Oe.dtype,bf=!!Td.normalized,Qe=Td.size|0,Ve=Td.offset|0,Ze=Td.stride|0,cf=Td.divisor|0);kf=y.buffer;y.buffer=Oe;of=y.divisor;y.divisor=cf;ff=y.normalized;
y.normalized=bf;lf=y.offset;y.offset=Ve;mf=y.size;y.size=Qe;nf=y.state;y.state=af;sf=y.stride;y.stride=Ze;pf=y.type;y.type=We;tf=y.w;y.w=Xe;Cf=y.x;y.x=Ud;Df=y.y;y.y=ae;Re=y.z;y.z=Ye;Ge=L.call(this,ha,a,b);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;va(Ge)?(qf=!0,rf=u.createStream(34962,Ge),yf=rf.dtype):(rf=u.getBuffer(Ge))?yf=rf.dtype:"constant"in Ge?(Gf=2,"number"===typeof Ge.constant?(zf=Ge.constant,Af=Jf=wf=0):(zf=0<Ge.constant.length?Ge.constant[0]:0,Af=1<Ge.constant.length?
Ge.constant[1]:0,Jf=2<Ge.constant.length?Ge.constant[2]:0,wf=3<Ge.constant.length?Ge.constant[3]:0)):(rf=va(Ge.buffer)?u.createStream(34962,Ge.buffer):u.getBuffer(Ge.buffer),yf="type"in Ge?Ad[Ge.type]:rf.dtype,Hf=!!Ge.normalized,Ff=Ge.size|0,Bf=Ge.offset|0,xf=Ge.stride|0,Ef=Ge.divisor|0);Kf=G.buffer;G.buffer=rf;Lf=G.divisor;G.divisor=Ef;Mf=G.normalized;G.normalized=Hf;uf=G.offset;G.offset=Bf;Rf=G.size;G.size=Ff;If=G.state;G.state=Gf;vf=G.stride;G.stride=xf;dg=G.type;G.type=yf;Sf=G.w;G.w=wf;Tf=G.x;
G.x=zf;qg=G.y;G.y=Af;gf=G.z;G.z=Jf;df=B.call(this,ha,a,b);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;va(df)?(Nf=!0,Of=u.createStream(34962,df),Uf=Of.dtype):(Of=u.getBuffer(df))?Uf=Of.dtype:"constant"in df?(ig=2,"number"===typeof df.constant?(Yf=df.constant,Zf=jg=Xf=0):(Yf=0<df.constant.length?df.constant[0]:0,Zf=1<df.constant.length?df.constant[1]:0,jg=2<df.constant.length?df.constant[2]:0,Xf=3<df.constant.length?df.constant[3]:0)):(Of=va(df.buffer)?u.createStream(34962,df.buffer):
u.getBuffer(df.buffer),Uf="type"in df?Ad[df.type]:Of.dtype,fg=!!df.normalized,hg=df.size|0,gg=df.offset|0,Wf=df.stride|0,eg=df.divisor|0);rg=m.buffer;m.buffer=Of;sg=m.divisor;m.divisor=eg;tg=m.normalized;m.normalized=fg;ug=m.offset;m.offset=gg;vg=m.size;m.size=hg;wg=m.state;m.state=ig;xg=m.stride;m.stride=Wf;yg=m.type;m.type=Uf;zg=m.w;m.w=Xf;Ag=m.x;m.x=Yf;Bg=m.y;m.y=Zf;hf=m.z;m.z=jg;ef=Z.call(this,ha,a,b);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;va(ef)?(Pf=!0,Qf=u.createStream(34962,
ef),Vf=Qf.dtype):(Qf=u.getBuffer(ef))?Vf=Qf.dtype:"constant"in ef?(og=2,"number"===typeof ef.constant?(bg=ef.constant,cg=pg=ag=0):(bg=0<ef.constant.length?ef.constant[0]:0,cg=1<ef.constant.length?ef.constant[1]:0,pg=2<ef.constant.length?ef.constant[2]:0,ag=3<ef.constant.length?ef.constant[3]:0)):(Qf=va(ef.buffer)?u.createStream(34962,ef.buffer):u.getBuffer(ef.buffer),Vf="type"in ef?Ad[ef.type]:Qf.dtype,lg=!!ef.normalized,ng=ef.size|0,mg=ef.offset|0,$f=ef.stride|0,kg=ef.divisor|0);Cg=g.buffer;g.buffer=
Qf;Dg=g.divisor;g.divisor=kg;Eg=g.normalized;g.normalized=lg;Fg=g.offset;g.offset=mg;Gg=g.size;g.size=ng;Hg=g.state;g.state=og;Ig=g.stride;g.stride=$f;Jg=g.type;g.type=Vf;Kg=g.w;g.w=ag;Lg=g.x;g.x=bg;Mg=g.y;g.y=cg;Ng=g.z;g.z=pg;Og=ra.vert;ra.vert=44;Pg=ra.frag;ra.frag=43;ua.dirty=!0;c(ha,a,b);ha.viewportWidth=h;ha.viewportHeight=k;qd[0]=t;qd[1]=l;qd[2]=R;qd[3]=r;ka[0]=v;ka[1]=sa;ka[2]=K;ka[3]=T;Ga.blend_enable=U;Ia[0]=N;Ia[1]=F;Ia[2]=S;Ia[3]=I;Ga.depth_enable=da;pe[0]=P;pe[1]=Q;pe[2]=ea;pe[3]=ya;Ga.scissor_enable=
qa;Ga.stencil_enable=wa;pa&&(e.cpuTime+=performance.now()-ca);X&&mb.destroyStream(V);Fa.elements=Ya;Fa.offset=H;Fa.count=ga;Fa.primitive=oa;xa[45]=ma;xa[48]=la;xa[10]=Ba;xa[46]=Ha;xa[47]=gb;xa[34]=Ea;xa[6]=ia;xa[7]=qb;xa[8]=ib;xa[9]=Ja;Ka&&u.destroyStream(eb);J.buffer=Ma;J.divisor=yd;J.normalized=Za;J.offset=Nb;J.size=Ob;J.state=nb;J.stride=Na;J.type=ac;J.w=Qa;J.x=wb;J.y=xb;J.z=Ta;hc&&u.destroyStream(Ac);M.buffer=Sb;M.divisor=Kc;M.normalized=Tb;M.offset=Nd;M.size=Ec;M.state=pd;M.stride=Mc;M.type=
Xc;M.w=Be;M.x=oc;M.y=wc;M.z=ic;sc&&u.destroyStream(Vb);f.buffer=cd;f.divisor=Zc;f.normalized=lc;f.offset=dc;f.size=$c;f.state=Uc;f.stride=dd;f.type=zc;f.w=hd;f.x=Od;f.y=oe;f.z=wd;xe&&u.destroyStream(he);ba.buffer=Bd;ba.divisor=Ed;ba.normalized=jf;ba.offset=je;ba.size=te;ba.state=ke;ba.stride=ie;ba.type=ge;ba.w=ue;ba.x=ce;ba.y=me;ba.z=Nc;ve&&u.destroyStream(re);W.buffer=we;W.divisor=He;W.normalized=Ke;W.offset=Le;W.size=Me;W.state=Ie;W.stride=Md;W.type=Xd;W.w=be;W.x=de;W.y=Ne;W.z=Jd;Fe&&u.destroyStream(Oe);
y.buffer=kf;y.divisor=of;y.normalized=ff;y.offset=lf;y.size=mf;y.state=nf;y.stride=sf;y.type=pf;y.w=tf;y.x=Cf;y.y=Df;y.z=Re;qf&&u.destroyStream(rf);G.buffer=Kf;G.divisor=Lf;G.normalized=Mf;G.offset=uf;G.size=Rf;G.state=If;G.stride=vf;G.type=dg;G.w=Sf;G.x=Tf;G.y=qg;G.z=gf;Nf&&u.destroyStream(Of);m.buffer=rg;m.divisor=sg;m.normalized=tg;m.offset=ug;m.size=vg;m.state=wg;m.stride=xg;m.type=yg;m.w=zg;m.x=Ag;m.y=Bg;m.z=hf;Pf&&u.destroyStream(Qf);g.buffer=Cg;g.divisor=Dg;g.normalized=Eg;g.offset=Fg;g.size=
Gg;g.state=Hg;g.stride=Ig;g.type=Jg;g.w=Kg;g.x=Lg;g.y=Mg;g.z=Ng;ra.vert=Og;ra.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,L,G,B,m,Z,g,H,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb){var Ya,A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa,ka,Y,ta,Sa,Ia,gb,ca,ia,
bc,Ha,Je,Ub,jf,Fd,pe,Vd,Be,xe,Nd,oe,he,Od,qd,Gd;Ya=a.attributes;A=a.buffer;u=a.context;ha=a.current;ua=a.draw;Fa=a.elements;mb=a.extensions;Ib=a.framebuffer;fa=a.gl;R=a.isBufferArgs;va=a.next;Ga=a.shader;ra=a.uniforms;xa=a.vao;wa=va.blend_color;ka=ha.blend_color;Y=va.blend_equation;ta=ha.blend_equation;Sa=va.blend_func;Ia=ha.blend_func;gb=va.colorMask;ca=ha.colorMask;ia=va.depth_range;bc=ha.depth_range;Ha=va.polygonOffset_offset;Je=ha.polygonOffset_offset;Ub=va.sample_coverage;jf=ha.sample_coverage;
Fd=va.scissor_box;pe=ha.scissor_box;Vd=va.stencil_func;Be=ha.stencil_func;xe=va.stencil_opBack;Nd=ha.stencil_opBack;oe=va.stencil_opFront;he=ha.stencil_opFront;Od=va.viewport;qd=ha.viewport;Gd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,c){var b,g,d,f,m,p;b=Ib.next;b!==Ib.cur&&(b?fa.bindFramebuffer(36160,b.framebuffer):fa.bindFramebuffer(36160,null),Ib.cur=b);if(ha.dirty){var h,k,t,l,r,w,v,y,q,Ga,B,D,n,F,C,I,ra,G,E,J,M,aa,
wa,W,ba,Aa,Z,L,Da,Sa,Jc,Jb,cb,Pb;h=va.dither;h!==ha.dither&&(h?fa.enable(3024):fa.disable(3024),ha.dither=h);k=Y[0];t=Y[1];if(k!==ta[0]||t!==ta[1])fa.blendEquationSeparate(k,t),ta[0]=k,ta[1]=t;l=va.depth_func;l!==ha.depth_func&&(fa.depthFunc(l),ha.depth_func=l);r=ia[0];w=ia[1];if(r!==bc[0]||w!==bc[1])fa.depthRange(r,w),bc[0]=r,bc[1]=w;v=va.depth_mask;v!==ha.depth_mask&&(fa.depthMask(v),ha.depth_mask=v);y=gb[0];q=gb[1];Ga=gb[2];B=gb[3];if(y!==ca[0]||q!==ca[1]||Ga!==ca[2]||B!==ca[3])fa.colorMask(y,
q,Ga,B),ca[0]=y,ca[1]=q,ca[2]=Ga,ca[3]=B;D=va.cull_enable;D!==ha.cull_enable&&(D?fa.enable(2884):fa.disable(2884),ha.cull_enable=D);n=va.cull_face;n!==ha.cull_face&&(fa.cullFace(n),ha.cull_face=n);F=va.frontFace;F!==ha.frontFace&&(fa.frontFace(F),ha.frontFace=F);C=va.lineWidth;C!==ha.lineWidth&&(fa.lineWidth(C),ha.lineWidth=C);I=va.polygonOffset_enable;I!==ha.polygonOffset_enable&&(I?fa.enable(32823):fa.disable(32823),ha.polygonOffset_enable=I);ra=Ha[0];G=Ha[1];if(ra!==Je[0]||G!==Je[1])fa.polygonOffset(ra,
G),Je[0]=ra,Je[1]=G;E=va.sample_alpha;E!==ha.sample_alpha&&(E?fa.enable(32926):fa.disable(32926),ha.sample_alpha=E);J=va.sample_enable;J!==ha.sample_enable&&(J?fa.enable(32928):fa.disable(32928),ha.sample_enable=J);M=Ub[0];aa=Ub[1];if(M!==jf[0]||aa!==jf[1])fa.sampleCoverage(M,aa),jf[0]=M,jf[1]=aa;wa=va.stencil_mask;wa!==ha.stencil_mask&&(fa.stencilMask(wa),ha.stencil_mask=wa);W=Vd[0];ba=Vd[1];Aa=Vd[2];if(W!==Be[0]||ba!==Be[1]||Aa!==Be[2])fa.stencilFunc(W,ba,Aa),Be[0]=W,Be[1]=ba,Be[2]=Aa;Z=oe[0];L=
oe[1];Da=oe[2];Sa=oe[3];if(Z!==he[0]||L!==he[1]||Da!==he[2]||Sa!==he[3])fa.stencilOpSeparate(Z,L,Da,Sa),he[0]=Z,he[1]=L,he[2]=Da,he[3]=Sa;Jc=xe[0];Jb=xe[1];cb=xe[2];Pb=xe[3];if(Jc!==Nd[0]||Jb!==Nd[1]||cb!==Nd[2]||Pb!==Nd[3])fa.stencilOpSeparate(Jc,Jb,cb,Pb),Nd[0]=Jc,Nd[1]=Jb,Nd[2]=cb,Nd[3]=Pb}fa.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;fa.enable(3042);ha.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;fa.disable(2929);ha.depth_enable=!1;fa.enable(3089);
ha.scissor_enable=!0;fa.disable(2960);ha.stencil_enable=!1;if(g=ha.profile)d=performance.now(),e.count+=c;fa.useProgram(H.program);f=mb.angle_instanced_arrays;var ab;xa.setVAO(null);fa.uniform1i(K.location,!1);fa.uniform1i(qa.location,P.bind());ab=ua.instances;for(m=0;m<c;++m){p=a[m];var pb,Va,Fd,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Od,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,
oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;pb=p.viewport;Va=pb.x|0;Fd=pb.y|0;Kb="width"in pb?pb.width|0:u.framebufferWidth-Va;Lb="height"in pb?pb.height|0:u.framebufferHeight-
Fd;rc=u.viewportWidth;u.viewportWidth=Kb;Qb=u.viewportHeight;u.viewportHeight=Lb;fa.viewport(Va,Fd,Kb,Lb);qd[0]=Va;qd[1]=Fd;qd[2]=Kb;qd[3]=Lb;jb=p.viewport;Hb=jb.x|0;Eb=jb.y|0;yb="width"in jb?jb.width|0:u.framebufferWidth-Hb;hb="height"in jb?jb.height|0:u.framebufferHeight-Eb;fa.scissor(Hb,Eb,yb,hb);pe[0]=Hb;pe[1]=Eb;pe[2]=yb;pe[3]=hb;$b=Q.call(this,u,p,m);Rb=!1;sb=null;Ua=0;Wb=!1;cc=qb=0;ib=1;rb=0;Ja=5126;fb=eb=Ka=tb=0;R($b)?(Rb=!0,sb=A.createStream(34962,$b),Ja=sb.dtype):(sb=A.getBuffer($b))?Ja=
sb.dtype:"constant"in $b?(ib=2,"number"===typeof $b.constant?(Ka=$b.constant,eb=fb=tb=0):(Ka=0<$b.constant.length?$b.constant[0]:0,eb=1<$b.constant.length?$b.constant[1]:0,fb=2<$b.constant.length?$b.constant[2]:0,tb=3<$b.constant.length?$b.constant[3]:0)):(sb=R($b.buffer)?A.createStream(34962,$b.buffer):A.getBuffer($b.buffer),Ja="type"in $b?Gd[$b.type]:sb.dtype,Wb=!!$b.normalized,cc=$b.size|0,qb=$b.offset|0,rb=$b.stride|0,Ua=$b.divisor|0);La=za.location;kb=Ya[La];if(1===ib){kb.buffer||fa.enableVertexAttribArray(La);
Wa=cc||1;if(kb.type!==Ja||kb.size!==Wa||kb.buffer!==sb||kb.normalized!==Wb||kb.offset!==qb||kb.stride!==rb)fa.bindBuffer(34962,sb.buffer),fa.vertexAttribPointer(La,Wa,Ja,Wb,rb,qb),kb.type=Ja,kb.size=Wa,kb.buffer=sb,kb.normalized=Wb,kb.offset=qb,kb.stride=rb;kb.divisor!==Ua&&(f.vertexAttribDivisorANGLE(La,Ua),kb.divisor=Ua)}else if(kb.buffer&&(fa.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==eb||kb.z!==fb||kb.w!==tb)fa.vertexAttrib4f(La,Ka,eb,fb,tb),kb.x=Ka,kb.y=eb,kb.z=fb,kb.w=tb;
vb=ga.call(this,u,p,m);ub=!1;Oa=null;Cc=0;Ra=!1;Fb=Mb=0;Ma=1;Od=0;Za=5126;Na=nb=Ob=Nb=0;R(vb)?(ub=!0,Oa=A.createStream(34962,vb),Za=Oa.dtype):(Oa=A.getBuffer(vb))?Za=Oa.dtype:"constant"in vb?(Ma=2,"number"===typeof vb.constant?(Ob=vb.constant,nb=Na=Nb=0):(Ob=0<vb.constant.length?vb.constant[0]:0,nb=1<vb.constant.length?vb.constant[1]:0,Na=2<vb.constant.length?vb.constant[2]:0,Nb=3<vb.constant.length?vb.constant[3]:0)):(Oa=R(vb.buffer)?A.createStream(34962,vb.buffer):A.getBuffer(vb.buffer),Za="type"in
vb?Gd[vb.type]:Oa.dtype,Ra=!!vb.normalized,Fb=vb.size|0,Mb=vb.offset|0,Od=vb.stride|0,Cc=vb.divisor|0);ac=sa.location;Qa=Ya[ac];if(1===Ma){Qa.buffer||fa.enableVertexAttribArray(ac);wb=Fb||1;if(Qa.type!==Za||Qa.size!==wb||Qa.buffer!==Oa||Qa.normalized!==Ra||Qa.offset!==Mb||Qa.stride!==Od)fa.bindBuffer(34962,Oa.buffer),fa.vertexAttribPointer(ac,wb,Za,Ra,Od,Mb),Qa.type=Za,Qa.size=wb,Qa.buffer=Oa,Qa.normalized=Ra,Qa.offset=Mb,Qa.stride=Od;Qa.divisor!==Cc&&(f.vertexAttribDivisorANGLE(ac,Cc),Qa.divisor=
Cc)}else if(Qa.buffer&&(fa.disableVertexAttribArray(ac),Qa.buffer=null),Qa.x!==Ob||Qa.y!==nb||Qa.z!==Na||Qa.w!==Nb)fa.vertexAttrib4f(ac,Ob,nb,Na,Nb),Qa.x=Ob,Qa.y=nb,Qa.z=Na,Qa.w=Nb;xb=Ea.call(this,u,p,m);Ta=!1;ob=null;hc=0;Ac=!1;bb=vc=0;kc=1;Rc=0;Xa=5126;Xb=$a=Bb=kd=0;R(xb)?(Ta=!0,ob=A.createStream(34962,xb),Xa=ob.dtype):(ob=A.getBuffer(xb))?Xa=ob.dtype:"constant"in xb?(kc=2,"number"===typeof xb.constant?(Bb=xb.constant,$a=Xb=kd=0):(Bb=0<xb.constant.length?xb.constant[0]:0,$a=1<xb.constant.length?
xb.constant[1]:0,Xb=2<xb.constant.length?xb.constant[2]:0,kd=3<xb.constant.length?xb.constant[3]:0)):(ob=R(xb.buffer)?A.createStream(34962,xb.buffer):A.getBuffer(xb.buffer),Xa="type"in xb?Gd[xb.type]:ob.dtype,Ac=!!xb.normalized,bb=xb.size|0,vc=xb.offset|0,Rc=xb.stride|0,hc=xb.divisor|0);tc=Pa.location;Yb=Ya[tc];if(1===kc){Yb.buffer||fa.enableVertexAttribArray(tc);Sb=bb||1;if(Yb.type!==Xa||Yb.size!==Sb||Yb.buffer!==ob||Yb.normalized!==Ac||Yb.offset!==vc||Yb.stride!==Rc)fa.bindBuffer(34962,ob.buffer),
fa.vertexAttribPointer(tc,Sb,Xa,Ac,Rc,vc),Yb.type=Xa,Yb.size=Sb,Yb.buffer=ob,Yb.normalized=Ac,Yb.offset=vc,Yb.stride=Rc;Yb.divisor!==hc&&(f.vertexAttribDivisorANGLE(tc,hc),Yb.divisor=hc)}else if(Yb.buffer&&(fa.disableVertexAttribArray(tc),Yb.buffer=null),Yb.x!==Bb||Yb.y!==$a||Yb.z!==Xb||Yb.w!==kd)fa.vertexAttrib4f(tc,Bb,$a,Xb,kd),Yb.x=Bb,Yb.y=$a,Yb.z=Xb,Yb.w=kd;Kc=V.call(this,u,p,m);Tb=!1;zd=null;Ec=0;pd=!1;Xc=Mc=0;ud=1;oc=0;wc=5126;Vb=sc=db=ic=0;R(Kc)?(Tb=!0,zd=A.createStream(34962,Kc),wc=zd.dtype):
(zd=A.getBuffer(Kc))?wc=zd.dtype:"constant"in Kc?(ud=2,"number"===typeof Kc.constant?(db=Kc.constant,sc=Vb=ic=0):(db=0<Kc.constant.length?Kc.constant[0]:0,sc=1<Kc.constant.length?Kc.constant[1]:0,Vb=2<Kc.constant.length?Kc.constant[2]:0,ic=3<Kc.constant.length?Kc.constant[3]:0)):(zd=R(Kc.buffer)?A.createStream(34962,Kc.buffer):A.getBuffer(Kc.buffer),wc="type"in Kc?Gd[Kc.type]:zd.dtype,pd=!!Kc.normalized,Xc=Kc.size|0,Mc=Kc.offset|0,oc=Kc.stride|0,Ec=Kc.divisor|0);Zb=zb.location;ec=Ya[Zb];if(1===ud){ec.buffer||
fa.enableVertexAttribArray(Zb);jc=Xc||1;if(ec.type!==wc||ec.size!==jc||ec.buffer!==zd||ec.normalized!==pd||ec.offset!==Mc||ec.stride!==oc)fa.bindBuffer(34962,zd.buffer),fa.vertexAttribPointer(Zb,jc,wc,pd,oc,Mc),ec.type=wc,ec.size=jc,ec.buffer=zd,ec.normalized=pd,ec.offset=Mc,ec.stride=oc;ec.divisor!==Ec&&(f.vertexAttribDivisorANGLE(Zb,Ec),ec.divisor=Ec)}else if(ec.buffer&&(fa.disableVertexAttribArray(Zb),ec.buffer=null),ec.x!==db||ec.y!==sc||ec.z!==Vb||ec.w!==ic)fa.vertexAttrib4f(Zb,db,sc,Vb,ic),
ec.x=db,ec.y=sc,ec.z=Vb,ec.w=ic;yc=X.call(this,u,p,m);Bc=!1;bd=null;Pc=0;Qc=!1;Yc=Sc=0;ld=1;cd=0;Zc=5126;Uc=$c=dc=lc=0;R(yc)?(Bc=!0,bd=A.createStream(34962,yc),Zc=bd.dtype):(bd=A.getBuffer(yc))?Zc=bd.dtype:"constant"in yc?(ld=2,"number"===typeof yc.constant?(dc=yc.constant,$c=Uc=lc=0):(dc=0<yc.constant.length?yc.constant[0]:0,$c=1<yc.constant.length?yc.constant[1]:0,Uc=2<yc.constant.length?yc.constant[2]:0,lc=3<yc.constant.length?yc.constant[3]:0)):(bd=R(yc.buffer)?A.createStream(34962,yc.buffer):
A.getBuffer(yc.buffer),Zc="type"in yc?Gd[yc.type]:bd.dtype,Qc=!!yc.normalized,Yc=yc.size|0,Sc=yc.offset|0,cd=yc.stride|0,Pc=yc.divisor|0);dd=Ca.location;zc=Ya[dd];if(1===ld){zc.buffer||fa.enableVertexAttribArray(dd);hd=Yc||1;if(zc.type!==Zc||zc.size!==hd||zc.buffer!==bd||zc.normalized!==Qc||zc.offset!==Sc||zc.stride!==cd)fa.bindBuffer(34962,bd.buffer),fa.vertexAttribPointer(dd,hd,Zc,Qc,cd,Sc),zc.type=Zc,zc.size=hd,zc.buffer=bd,zc.normalized=Qc,zc.offset=Sc,zc.stride=cd;zc.divisor!==Pc&&(f.vertexAttribDivisorANGLE(dd,
Pc),zc.divisor=Pc)}else if(zc.buffer&&(fa.disableVertexAttribArray(dd),zc.buffer=null),zc.x!==dc||zc.y!==$c||zc.z!==Uc||zc.w!==lc)fa.vertexAttrib4f(dd,dc,$c,Uc,lc),zc.x=dc,zc.y=$c,zc.z=Uc,zc.w=lc;Dd=S.call(this,u,p,m);ye=!1;wd=null;id=0;De=!1;fe=Pd=0;le=1;$d=0;Kd=5126;vd=Tc=nd=Id=0;R(Dd)?(ye=!0,wd=A.createStream(34962,Dd),Kd=wd.dtype):(wd=A.getBuffer(Dd))?Kd=wd.dtype:"constant"in Dd?(le=2,"number"===typeof Dd.constant?(nd=Dd.constant,Tc=vd=Id=0):(nd=0<Dd.constant.length?Dd.constant[0]:0,Tc=1<Dd.constant.length?
Dd.constant[1]:0,vd=2<Dd.constant.length?Dd.constant[2]:0,Id=3<Dd.constant.length?Dd.constant[3]:0)):(wd=R(Dd.buffer)?A.createStream(34962,Dd.buffer):A.getBuffer(Dd.buffer),Kd="type"in Dd?Gd[Dd.type]:wd.dtype,De=!!Dd.normalized,fe=Dd.size|0,Pd=Dd.offset|0,$d=Dd.stride|0,id=Dd.divisor|0);sd=oa.location;jd=Ya[sd];if(1===le){jd.buffer||fa.enableVertexAttribArray(sd);xd=fe||1;if(jd.type!==Kd||jd.size!==xd||jd.buffer!==wd||jd.normalized!==De||jd.offset!==Pd||jd.stride!==$d)fa.bindBuffer(34962,wd.buffer),
fa.vertexAttribPointer(sd,xd,Kd,De,$d,Pd),jd.type=Kd,jd.size=xd,jd.buffer=wd,jd.normalized=De,jd.offset=Pd,jd.stride=$d;jd.divisor!==id&&(f.vertexAttribDivisorANGLE(sd,id),jd.divisor=id)}else if(jd.buffer&&(fa.disableVertexAttribArray(sd),jd.buffer=null),jd.x!==nd||jd.y!==Tc||jd.z!==vd||jd.w!==Id)fa.vertexAttrib4f(sd,nd,Tc,vd,Id),jd.x=nd,jd.y=Tc,jd.z=vd,jd.w=Id;Bd=T.call(this,u,p,m);Ed=!1;qe=null;je=0;te=!1;ie=ke=0;ge=1;ue=0;ce=5126;ve=gd=Nc=me=0;R(Bd)?(Ed=!0,qe=A.createStream(34962,Bd),ce=qe.dtype):
(qe=A.getBuffer(Bd))?ce=qe.dtype:"constant"in Bd?(ge=2,"number"===typeof Bd.constant?(Nc=Bd.constant,gd=ve=me=0):(Nc=0<Bd.constant.length?Bd.constant[0]:0,gd=1<Bd.constant.length?Bd.constant[1]:0,ve=2<Bd.constant.length?Bd.constant[2]:0,me=3<Bd.constant.length?Bd.constant[3]:0)):(qe=R(Bd.buffer)?A.createStream(34962,Bd.buffer):A.getBuffer(Bd.buffer),ce="type"in Bd?Gd[Bd.type]:qe.dtype,te=!!Bd.normalized,ie=Bd.size|0,ke=Bd.offset|0,ue=Bd.stride|0,je=Bd.divisor|0);re=z.location;Ld=Ya[re];if(1===ge){Ld.buffer||
fa.enableVertexAttribArray(re);Qd=ie||4;if(Ld.type!==ce||Ld.size!==Qd||Ld.buffer!==qe||Ld.normalized!==te||Ld.offset!==ke||Ld.stride!==ue)fa.bindBuffer(34962,qe.buffer),fa.vertexAttribPointer(re,Qd,ce,te,ue,ke),Ld.type=ce,Ld.size=Qd,Ld.buffer=qe,Ld.normalized=te,Ld.offset=ke,Ld.stride=ue;Ld.divisor!==je&&(f.vertexAttribDivisorANGLE(re,je),Ld.divisor=je)}else if(Ld.buffer&&(fa.disableVertexAttribArray(re),Ld.buffer=null),Ld.x!==Nc||Ld.y!==gd||Ld.z!==ve||Ld.w!==me)fa.vertexAttrib4f(re,Nc,gd,ve,me),
Ld.x=Nc,Ld.y=gd,Ld.z=ve,Ld.w=me;Rd=N.call(this,u,p,m);Sd=!1;ne=null;Ae=0;Ee=!1;Te=se=0;Ue=1;Pe=0;we=5126;Me=Le=Ke=He=0;R(Rd)?(Sd=!0,ne=A.createStream(34962,Rd),we=ne.dtype):(ne=A.getBuffer(Rd))?we=ne.dtype:"constant"in Rd?(Ue=2,"number"===typeof Rd.constant?(Ke=Rd.constant,Le=Me=He=0):(Ke=0<Rd.constant.length?Rd.constant[0]:0,Le=1<Rd.constant.length?Rd.constant[1]:0,Me=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(ne=R(Rd.buffer)?A.createStream(34962,Rd.buffer):
A.getBuffer(Rd.buffer),we="type"in Rd?Gd[Rd.type]:ne.dtype,Ee=!!Rd.normalized,Te=Rd.size|0,se=Rd.offset|0,Pe=Rd.stride|0,Ae=Rd.divisor|0);Ie=pa.location;Md=Ya[Ie];if(1===Ue){Md.buffer||fa.enableVertexAttribArray(Ie);Xd=Te||4;if(Md.type!==we||Md.size!==Xd||Md.buffer!==ne||Md.normalized!==Ee||Md.offset!==se||Md.stride!==Pe)fa.bindBuffer(34962,ne.buffer),fa.vertexAttribPointer(Ie,Xd,we,Ee,Pe,se),Md.type=we,Md.size=Xd,Md.buffer=ne,Md.normalized=Ee,Md.offset=se,Md.stride=Pe;Md.divisor!==Ae&&(f.vertexAttribDivisorANGLE(Ie,
Ae),Md.divisor=Ae)}else if(Md.buffer&&(fa.disableVertexAttribArray(Ie),Md.buffer=null),Md.x!==Ke||Md.y!==Le||Md.z!==Me||Md.w!==He)fa.vertexAttrib4f(Ie,Ke,Le,Me,He),Md.x=Ke,Md.y=Le,Md.z=Me,Md.w=He;be=x.call(this,u,p,m);de=!1;Ne=null;Jd=0;Td=!1;Oe=Fe=0;cf=1;bf=0;Ve=5126;We=Ze=af=Qe=0;R(be)?(de=!0,Ne=A.createStream(34962,be),Ve=Ne.dtype):(Ne=A.getBuffer(be))?Ve=Ne.dtype:"constant"in be?(cf=2,"number"===typeof be.constant?(af=be.constant,Ze=We=Qe=0):(af=0<be.constant.length?be.constant[0]:0,Ze=1<be.constant.length?
be.constant[1]:0,We=2<be.constant.length?be.constant[2]:0,Qe=3<be.constant.length?be.constant[3]:0)):(Ne=R(be.buffer)?A.createStream(34962,be.buffer):A.getBuffer(be.buffer),Ve="type"in be?Gd[be.type]:Ne.dtype,Td=!!be.normalized,Oe=be.size|0,Fe=be.offset|0,bf=be.stride|0,Jd=be.divisor|0);Xe=ea.location;Ud=Ya[Xe];if(1===cf){Ud.buffer||fa.enableVertexAttribArray(Xe);ae=Oe||1;if(Ud.type!==Ve||Ud.size!==ae||Ud.buffer!==Ne||Ud.normalized!==Td||Ud.offset!==Fe||Ud.stride!==bf)fa.bindBuffer(34962,Ne.buffer),
fa.vertexAttribPointer(Xe,ae,Ve,Td,bf,Fe),Ud.type=Ve,Ud.size=ae,Ud.buffer=Ne,Ud.normalized=Td,Ud.offset=Fe,Ud.stride=bf;Ud.divisor!==Jd&&(f.vertexAttribDivisorANGLE(Xe,Jd),Ud.divisor=Jd)}else if(Ud.buffer&&(fa.disableVertexAttribArray(Xe),Ud.buffer=null),Ud.x!==af||Ud.y!==Ze||Ud.z!==We||Ud.w!==Qe)fa.vertexAttrib4f(Xe,af,Ze,We,Qe),Ud.x=af,Ud.y=Ze,Ud.z=We,Ud.w=Qe;Ye=u.pixelRatio;m&&kf===Ye||(kf=Ye,fa.uniform1f(Ba.location,Ye));of=O.call(this,u,p,m);ff=of[0];mf=of[1];m&&lf===ff&&nf===mf||(lf=ff,nf=mf,
fa.uniform2f(ma.location,ff,mf));sf=p.scale;pf=sf[0];Cf=sf[1];m&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,fa.uniform2f(ya.location,pf,Cf));Re=p.scaleFract;Ge=Re[0];rf=Re[1];m&&qf===Ge&&Ef===rf||(qf=Ge,Ef=rf,fa.uniform2f(da.location,Ge,rf));Hf=p.translate;Bf=Hf[0];Gf=Hf[1];m&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,fa.uniform2f(ja.location,Bf,Gf));yf=p.translateFract;wf=yf[0];Af=yf[1];m&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,fa.uniform2f(na.location,wf,Af));Kf=p.opacity;m&&Lf===Kf||(Lf=Kf,fa.uniform1f(U.location,Kf));Mf=p.elements;
uf=null;(uf=(Rf=R(Mf))?Fa.createStream(Mf):Fa.getElements(Mf))&&fa.bindBuffer(34963,uf.buffer.buffer);If=p.offset;if(vf=p.count)0<ab?uf?f.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),ab):f.drawArraysInstancedANGLE(0,If,vf,ab):0>ab&&(uf?fa.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):fa.drawArrays(0,If,vf)),u.viewportWidth=rc,u.viewportHeight=Qb,Rb&&A.destroyStream(sb),ub&&A.destroyStream(Oa),Ta&&A.destroyStream(ob),Tb&&A.destroyStream(zd),Bc&&A.destroyStream(bd),ye&&A.destroyStream(wd),
Ed&&A.destroyStream(qe),Sd&&A.destroyStream(ne),de&&A.destroyStream(Ne),Rf&&Fa.destroyStream(uf)}P.unbind();ha.dirty=!0;xa.setVAO(null);g&&(e.cpuTime+=performance.now()-d)},draw:function(a){var g,f,m,x,w,y,q,Ga,B,T,D,N,n,C,ra,G,S,E,O,J,M,P,Q,aa,wa,W,ba,V,Aa,Z,L,X,H,ga,la,Da,Sa,Ea,Jb,cb,Pb,ab,pb,Va,Fd,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Od,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,
ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd,ye,wd,id,De,Pd,fe,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te;g=Ib.next;g!==Ib.cur&&(g?fa.bindFramebuffer(36160,g.framebuffer):fa.bindFramebuffer(36160,null),Ib.cur=g);if(ha.dirty){var Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf;Ue=va.dither;Ue!==ha.dither&&(Ue?fa.enable(3024):fa.disable(3024),ha.dither=
Ue);Pe=Y[0];we=Y[1];if(Pe!==ta[0]||we!==ta[1])fa.blendEquationSeparate(Pe,we),ta[0]=Pe,ta[1]=we;He=va.depth_func;He!==ha.depth_func&&(fa.depthFunc(He),ha.depth_func=He);Ke=ia[0];Le=ia[1];if(Ke!==bc[0]||Le!==bc[1])fa.depthRange(Ke,Le),bc[0]=Ke,bc[1]=Le;Me=va.depth_mask;Me!==ha.depth_mask&&(fa.depthMask(Me),ha.depth_mask=Me);Ie=gb[0];Md=gb[1];Xd=gb[2];be=gb[3];if(Ie!==ca[0]||Md!==ca[1]||Xd!==ca[2]||be!==ca[3])fa.colorMask(Ie,Md,Xd,be),ca[0]=Ie,ca[1]=Md,ca[2]=Xd,ca[3]=be;de=va.cull_enable;de!==ha.cull_enable&&
(de?fa.enable(2884):fa.disable(2884),ha.cull_enable=de);Ne=va.cull_face;Ne!==ha.cull_face&&(fa.cullFace(Ne),ha.cull_face=Ne);Jd=va.frontFace;Jd!==ha.frontFace&&(fa.frontFace(Jd),ha.frontFace=Jd);Td=va.lineWidth;Td!==ha.lineWidth&&(fa.lineWidth(Td),ha.lineWidth=Td);Fe=va.polygonOffset_enable;Fe!==ha.polygonOffset_enable&&(Fe?fa.enable(32823):fa.disable(32823),ha.polygonOffset_enable=Fe);Oe=Ha[0];cf=Ha[1];if(Oe!==Je[0]||cf!==Je[1])fa.polygonOffset(Oe,cf),Je[0]=Oe,Je[1]=cf;bf=va.sample_alpha;bf!==ha.sample_alpha&&
(bf?fa.enable(32926):fa.disable(32926),ha.sample_alpha=bf);Ve=va.sample_enable;Ve!==ha.sample_enable&&(Ve?fa.enable(32928):fa.disable(32928),ha.sample_enable=Ve);Qe=Ub[0];af=Ub[1];if(Qe!==jf[0]||af!==jf[1])fa.sampleCoverage(Qe,af),jf[0]=Qe,jf[1]=af;Ze=va.stencil_mask;Ze!==ha.stencil_mask&&(fa.stencilMask(Ze),ha.stencil_mask=Ze);We=Vd[0];Xe=Vd[1];Ud=Vd[2];if(We!==Be[0]||Xe!==Be[1]||Ud!==Be[2])fa.stencilFunc(We,Xe,Ud),Be[0]=We,Be[1]=Xe,Be[2]=Ud;ae=oe[0];Ye=oe[1];kf=oe[2];of=oe[3];if(ae!==he[0]||Ye!==
he[1]||kf!==he[2]||of!==he[3])fa.stencilOpSeparate(ae,Ye,kf,of),he[0]=ae,he[1]=Ye,he[2]=kf,he[3]=of;ff=xe[0];lf=xe[1];mf=xe[2];nf=xe[3];if(ff!==Nd[0]||lf!==Nd[1]||mf!==Nd[2]||nf!==Nd[3])fa.stencilOpSeparate(ff,lf,mf,nf),Nd[0]=ff,Nd[1]=lf,Nd[2]=mf,Nd[3]=nf}f=a.viewport;m=f.x|0;x=f.y|0;w="width"in f?f.width|0:u.framebufferWidth-m;y="height"in f?f.height|0:u.framebufferHeight-x;q=u.viewportWidth;u.viewportWidth=w;Ga=u.viewportHeight;u.viewportHeight=y;fa.viewport(m,x,w,y);qd[0]=m;qd[1]=x;qd[2]=w;qd[3]=
y;fa.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;fa.enable(3042);ha.blend_enable=!0;fa.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;fa.disable(2929);ha.depth_enable=!1;B=a.viewport;T=B.x|0;D=B.y|0;N="width"in B?B.width|0:u.framebufferWidth-T;n="height"in B?B.height|0:u.framebufferHeight-D;fa.scissor(T,D,N,n);pe[0]=T;pe[1]=D;pe[2]=N;pe[3]=n;fa.enable(3089);ha.scissor_enable=!0;fa.disable(2960);ha.stencil_enable=!1;if(C=ha.profile)ra=performance.now(),e.count++;fa.useProgram(t.program);
G=mb.angle_instanced_arrays;xa.setVAO(null);S=p.call(this,u,a,0);E=!1;O=null;J=0;M=!1;Q=P=0;aa=1;wa=0;W=5126;Z=Aa=V=ba=0;R(S)?(E=!0,O=A.createStream(34962,S),W=O.dtype):(O=A.getBuffer(S))?W=O.dtype:"constant"in S?(aa=2,"number"===typeof S.constant?(V=S.constant,Aa=Z=ba=0):(V=0<S.constant.length?S.constant[0]:0,Aa=1<S.constant.length?S.constant[1]:0,Z=2<S.constant.length?S.constant[2]:0,ba=3<S.constant.length?S.constant[3]:0)):(O=R(S.buffer)?A.createStream(34962,S.buffer):A.getBuffer(S.buffer),W="type"in
S?Gd[S.type]:O.dtype,M=!!S.normalized,Q=S.size|0,P=S.offset|0,wa=S.stride|0,J=S.divisor|0);L=za.location;X=Ya[L];if(1===aa){X.buffer||fa.enableVertexAttribArray(L);H=Q||1;if(X.type!==W||X.size!==H||X.buffer!==O||X.normalized!==M||X.offset!==P||X.stride!==wa)fa.bindBuffer(34962,O.buffer),fa.vertexAttribPointer(L,H,W,M,wa,P),X.type=W,X.size=H,X.buffer=O,X.normalized=M,X.offset=P,X.stride=wa;X.divisor!==J&&(G.vertexAttribDivisorANGLE(L,J),X.divisor=J)}else if(X.buffer&&(fa.disableVertexAttribArray(L),
X.buffer=null),X.x!==V||X.y!==Aa||X.z!==Z||X.w!==ba)fa.vertexAttrib4f(L,V,Aa,Z,ba),X.x=V,X.y=Aa,X.z=Z,X.w=ba;ga=h.call(this,u,a,0);la=!1;Da=null;Sa=0;Ea=!1;cb=Jb=0;Pb=1;ab=0;pb=5126;Lb=Kb=Fd=Va=0;R(ga)?(la=!0,Da=A.createStream(34962,ga),pb=Da.dtype):(Da=A.getBuffer(ga))?pb=Da.dtype:"constant"in ga?(Pb=2,"number"===typeof ga.constant?(Fd=ga.constant,Kb=Lb=Va=0):(Fd=0<ga.constant.length?ga.constant[0]:0,Kb=1<ga.constant.length?ga.constant[1]:0,Lb=2<ga.constant.length?ga.constant[2]:0,Va=3<ga.constant.length?
ga.constant[3]:0)):(Da=R(ga.buffer)?A.createStream(34962,ga.buffer):A.getBuffer(ga.buffer),pb="type"in ga?Gd[ga.type]:Da.dtype,Ea=!!ga.normalized,cb=ga.size|0,Jb=ga.offset|0,ab=ga.stride|0,Sa=ga.divisor|0);rc=sa.location;Qb=Ya[rc];if(1===Pb){Qb.buffer||fa.enableVertexAttribArray(rc);jb=cb||1;if(Qb.type!==pb||Qb.size!==jb||Qb.buffer!==Da||Qb.normalized!==Ea||Qb.offset!==Jb||Qb.stride!==ab)fa.bindBuffer(34962,Da.buffer),fa.vertexAttribPointer(rc,jb,pb,Ea,ab,Jb),Qb.type=pb,Qb.size=jb,Qb.buffer=Da,Qb.normalized=
Ea,Qb.offset=Jb,Qb.stride=ab;Qb.divisor!==Sa&&(G.vertexAttribDivisorANGLE(rc,Sa),Qb.divisor=Sa)}else if(Qb.buffer&&(fa.disableVertexAttribArray(rc),Qb.buffer=null),Qb.x!==Fd||Qb.y!==Kb||Qb.z!==Lb||Qb.w!==Va)fa.vertexAttrib4f(rc,Fd,Kb,Lb,Va),Qb.x=Fd,Qb.y=Kb,Qb.z=Lb,Qb.w=Va;Hb=d.call(this,u,a,0);Eb=!1;yb=null;hb=0;$b=!1;sb=Rb=0;Ua=1;Wb=0;qb=5126;Ja=rb=ib=cc=0;R(Hb)?(Eb=!0,yb=A.createStream(34962,Hb),qb=yb.dtype):(yb=A.getBuffer(Hb))?qb=yb.dtype:"constant"in Hb?(Ua=2,"number"===typeof Hb.constant?(ib=
Hb.constant,rb=Ja=cc=0):(ib=0<Hb.constant.length?Hb.constant[0]:0,rb=1<Hb.constant.length?Hb.constant[1]:0,Ja=2<Hb.constant.length?Hb.constant[2]:0,cc=3<Hb.constant.length?Hb.constant[3]:0)):(yb=R(Hb.buffer)?A.createStream(34962,Hb.buffer):A.getBuffer(Hb.buffer),qb="type"in Hb?Gd[Hb.type]:yb.dtype,$b=!!Hb.normalized,sb=Hb.size|0,Rb=Hb.offset|0,Wb=Hb.stride|0,hb=Hb.divisor|0);tb=Pa.location;Ka=Ya[tb];if(1===Ua){Ka.buffer||fa.enableVertexAttribArray(tb);eb=sb||1;if(Ka.type!==qb||Ka.size!==eb||Ka.buffer!==
yb||Ka.normalized!==$b||Ka.offset!==Rb||Ka.stride!==Wb)fa.bindBuffer(34962,yb.buffer),fa.vertexAttribPointer(tb,eb,qb,$b,Wb,Rb),Ka.type=qb,Ka.size=eb,Ka.buffer=yb,Ka.normalized=$b,Ka.offset=Rb,Ka.stride=Wb;Ka.divisor!==hb&&(G.vertexAttribDivisorANGLE(tb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(fa.disableVertexAttribArray(tb),Ka.buffer=null),Ka.x!==ib||Ka.y!==rb||Ka.z!==Ja||Ka.w!==cc)fa.vertexAttrib4f(tb,ib,rb,Ja,cc),Ka.x=ib,Ka.y=rb,Ka.z=Ja,Ka.w=cc;fb=c.call(this,u,a,0);La=!1;kb=null;Wa=0;vb=!1;Oa=ub=
0;Cc=1;Ra=0;Mb=5126;Za=Od=Ma=Fb=0;R(fb)?(La=!0,kb=A.createStream(34962,fb),Mb=kb.dtype):(kb=A.getBuffer(fb))?Mb=kb.dtype:"constant"in fb?(Cc=2,"number"===typeof fb.constant?(Ma=fb.constant,Od=Za=Fb=0):(Ma=0<fb.constant.length?fb.constant[0]:0,Od=1<fb.constant.length?fb.constant[1]:0,Za=2<fb.constant.length?fb.constant[2]:0,Fb=3<fb.constant.length?fb.constant[3]:0)):(kb=R(fb.buffer)?A.createStream(34962,fb.buffer):A.getBuffer(fb.buffer),Mb="type"in fb?Gd[fb.type]:kb.dtype,vb=!!fb.normalized,Oa=fb.size|
0,ub=fb.offset|0,Ra=fb.stride|0,Wa=fb.divisor|0);Nb=zb.location;Ob=Ya[Nb];if(1===Cc){Ob.buffer||fa.enableVertexAttribArray(Nb);nb=Oa||1;if(Ob.type!==Mb||Ob.size!==nb||Ob.buffer!==kb||Ob.normalized!==vb||Ob.offset!==ub||Ob.stride!==Ra)fa.bindBuffer(34962,kb.buffer),fa.vertexAttribPointer(Nb,nb,Mb,vb,Ra,ub),Ob.type=Mb,Ob.size=nb,Ob.buffer=kb,Ob.normalized=vb,Ob.offset=ub,Ob.stride=Ra;Ob.divisor!==Wa&&(G.vertexAttribDivisorANGLE(Nb,Wa),Ob.divisor=Wa)}else if(Ob.buffer&&(fa.disableVertexAttribArray(Nb),
Ob.buffer=null),Ob.x!==Ma||Ob.y!==Od||Ob.z!==Za||Ob.w!==Fb)fa.vertexAttrib4f(Nb,Ma,Od,Za,Fb),Ob.x=Ma,Ob.y=Od,Ob.z=Za,Ob.w=Fb;Na=b.call(this,u,a,0);ac=!1;Qa=null;wb=0;xb=!1;ob=Ta=0;hc=1;Ac=0;vc=5126;Xa=Rc=kc=bb=0;R(Na)?(ac=!0,Qa=A.createStream(34962,Na),vc=Qa.dtype):(Qa=A.getBuffer(Na))?vc=Qa.dtype:"constant"in Na?(hc=2,"number"===typeof Na.constant?(kc=Na.constant,Rc=Xa=bb=0):(kc=0<Na.constant.length?Na.constant[0]:0,Rc=1<Na.constant.length?Na.constant[1]:0,Xa=2<Na.constant.length?Na.constant[2]:
0,bb=3<Na.constant.length?Na.constant[3]:0)):(Qa=R(Na.buffer)?A.createStream(34962,Na.buffer):A.getBuffer(Na.buffer),vc="type"in Na?Gd[Na.type]:Qa.dtype,xb=!!Na.normalized,ob=Na.size|0,Ta=Na.offset|0,Ac=Na.stride|0,wb=Na.divisor|0);kd=Ca.location;Bb=Ya[kd];if(1===hc){Bb.buffer||fa.enableVertexAttribArray(kd);$a=ob||1;if(Bb.type!==vc||Bb.size!==$a||Bb.buffer!==Qa||Bb.normalized!==xb||Bb.offset!==Ta||Bb.stride!==Ac)fa.bindBuffer(34962,Qa.buffer),fa.vertexAttribPointer(kd,$a,vc,xb,Ac,Ta),Bb.type=vc,
Bb.size=$a,Bb.buffer=Qa,Bb.normalized=xb,Bb.offset=Ta,Bb.stride=Ac;Bb.divisor!==wb&&(G.vertexAttribDivisorANGLE(kd,wb),Bb.divisor=wb)}else if(Bb.buffer&&(fa.disableVertexAttribArray(kd),Bb.buffer=null),Bb.x!==kc||Bb.y!==Rc||Bb.z!==Xa||Bb.w!==bb)fa.vertexAttrib4f(kd,kc,Rc,Xa,bb),Bb.x=kc,Bb.y=Rc,Bb.z=Xa,Bb.w=bb;Xb=l.call(this,u,a,0);tc=!1;Yb=null;Sb=0;Kc=!1;zd=Tb=0;Ec=1;pd=0;Mc=5126;wc=oc=ud=Xc=0;R(Xb)?(tc=!0,Yb=A.createStream(34962,Xb),Mc=Yb.dtype):(Yb=A.getBuffer(Xb))?Mc=Yb.dtype:"constant"in Xb?
(Ec=2,"number"===typeof Xb.constant?(ud=Xb.constant,oc=wc=Xc=0):(ud=0<Xb.constant.length?Xb.constant[0]:0,oc=1<Xb.constant.length?Xb.constant[1]:0,wc=2<Xb.constant.length?Xb.constant[2]:0,Xc=3<Xb.constant.length?Xb.constant[3]:0)):(Yb=R(Xb.buffer)?A.createStream(34962,Xb.buffer):A.getBuffer(Xb.buffer),Mc="type"in Xb?Gd[Xb.type]:Yb.dtype,Kc=!!Xb.normalized,zd=Xb.size|0,Tb=Xb.offset|0,pd=Xb.stride|0,Sb=Xb.divisor|0);ic=oa.location;db=Ya[ic];if(1===Ec){db.buffer||fa.enableVertexAttribArray(ic);sc=zd||
1;if(db.type!==Mc||db.size!==sc||db.buffer!==Yb||db.normalized!==Kc||db.offset!==Tb||db.stride!==pd)fa.bindBuffer(34962,Yb.buffer),fa.vertexAttribPointer(ic,sc,Mc,Kc,pd,Tb),db.type=Mc,db.size=sc,db.buffer=Yb,db.normalized=Kc,db.offset=Tb,db.stride=pd;db.divisor!==Sb&&(G.vertexAttribDivisorANGLE(ic,Sb),db.divisor=Sb)}else if(db.buffer&&(fa.disableVertexAttribArray(ic),db.buffer=null),db.x!==ud||db.y!==oc||db.z!==wc||db.w!==Xc)fa.vertexAttrib4f(ic,ud,oc,wc,Xc),db.x=ud,db.y=oc,db.z=wc,db.w=Xc;Vb=r.call(this,
u,a,0);Zb=!1;ec=null;jc=0;yc=!1;bd=Bc=0;Pc=1;Qc=0;Sc=5126;Zc=cd=ld=Yc=0;R(Vb)?(Zb=!0,ec=A.createStream(34962,Vb),Sc=ec.dtype):(ec=A.getBuffer(Vb))?Sc=ec.dtype:"constant"in Vb?(Pc=2,"number"===typeof Vb.constant?(ld=Vb.constant,cd=Zc=Yc=0):(ld=0<Vb.constant.length?Vb.constant[0]:0,cd=1<Vb.constant.length?Vb.constant[1]:0,Zc=2<Vb.constant.length?Vb.constant[2]:0,Yc=3<Vb.constant.length?Vb.constant[3]:0)):(ec=R(Vb.buffer)?A.createStream(34962,Vb.buffer):A.getBuffer(Vb.buffer),Sc="type"in Vb?Gd[Vb.type]:
ec.dtype,yc=!!Vb.normalized,bd=Vb.size|0,Bc=Vb.offset|0,Qc=Vb.stride|0,jc=Vb.divisor|0);lc=z.location;dc=Ya[lc];if(1===Pc){dc.buffer||fa.enableVertexAttribArray(lc);$c=bd||4;if(dc.type!==Sc||dc.size!==$c||dc.buffer!==ec||dc.normalized!==yc||dc.offset!==Bc||dc.stride!==Qc)fa.bindBuffer(34962,ec.buffer),fa.vertexAttribPointer(lc,$c,Sc,yc,Qc,Bc),dc.type=Sc,dc.size=$c,dc.buffer=ec,dc.normalized=yc,dc.offset=Bc,dc.stride=Qc;dc.divisor!==jc&&(G.vertexAttribDivisorANGLE(lc,jc),dc.divisor=jc)}else if(dc.buffer&&
(fa.disableVertexAttribArray(lc),dc.buffer=null),dc.x!==ld||dc.y!==cd||dc.z!==Zc||dc.w!==Yc)fa.vertexAttrib4f(lc,ld,cd,Zc,Yc),dc.x=ld,dc.y=cd,dc.z=Zc,dc.w=Yc;Uc=v.call(this,u,a,0);dd=!1;zc=null;hd=0;Dd=!1;wd=ye=0;id=1;De=0;Pd=5126;Kd=$d=le=fe=0;R(Uc)?(dd=!0,zc=A.createStream(34962,Uc),Pd=zc.dtype):(zc=A.getBuffer(Uc))?Pd=zc.dtype:"constant"in Uc?(id=2,"number"===typeof Uc.constant?(le=Uc.constant,$d=Kd=fe=0):(le=0<Uc.constant.length?Uc.constant[0]:0,$d=1<Uc.constant.length?Uc.constant[1]:0,Kd=2<Uc.constant.length?
Uc.constant[2]:0,fe=3<Uc.constant.length?Uc.constant[3]:0)):(zc=R(Uc.buffer)?A.createStream(34962,Uc.buffer):A.getBuffer(Uc.buffer),Pd="type"in Uc?Gd[Uc.type]:zc.dtype,Dd=!!Uc.normalized,wd=Uc.size|0,ye=Uc.offset|0,De=Uc.stride|0,hd=Uc.divisor|0);Id=pa.location;nd=Ya[Id];if(1===id){nd.buffer||fa.enableVertexAttribArray(Id);Tc=wd||4;if(nd.type!==Pd||nd.size!==Tc||nd.buffer!==zc||nd.normalized!==Dd||nd.offset!==ye||nd.stride!==De)fa.bindBuffer(34962,zc.buffer),fa.vertexAttribPointer(Id,Tc,Pd,Dd,De,
ye),nd.type=Pd,nd.size=Tc,nd.buffer=zc,nd.normalized=Dd,nd.offset=ye,nd.stride=De;nd.divisor!==hd&&(G.vertexAttribDivisorANGLE(Id,hd),nd.divisor=hd)}else if(nd.buffer&&(fa.disableVertexAttribArray(Id),nd.buffer=null),nd.x!==le||nd.y!==$d||nd.z!==Kd||nd.w!==fe)fa.vertexAttrib4f(Id,le,$d,Kd,fe),nd.x=le,nd.y=$d,nd.z=Kd,nd.w=fe;vd=k.call(this,u,a,0);sd=!1;jd=null;xd=0;Bd=!1;qe=Ed=0;je=1;te=0;ke=5126;ce=ue=ge=ie=0;R(vd)?(sd=!0,jd=A.createStream(34962,vd),ke=jd.dtype):(jd=A.getBuffer(vd))?ke=jd.dtype:"constant"in
vd?(je=2,"number"===typeof vd.constant?(ge=vd.constant,ue=ce=ie=0):(ge=0<vd.constant.length?vd.constant[0]:0,ue=1<vd.constant.length?vd.constant[1]:0,ce=2<vd.constant.length?vd.constant[2]:0,ie=3<vd.constant.length?vd.constant[3]:0)):(jd=R(vd.buffer)?A.createStream(34962,vd.buffer):A.getBuffer(vd.buffer),ke="type"in vd?Gd[vd.type]:jd.dtype,Bd=!!vd.normalized,qe=vd.size|0,Ed=vd.offset|0,te=vd.stride|0,xd=vd.divisor|0);me=ea.location;Nc=Ya[me];if(1===je){Nc.buffer||fa.enableVertexAttribArray(me);gd=
qe||1;if(Nc.type!==ke||Nc.size!==gd||Nc.buffer!==jd||Nc.normalized!==Bd||Nc.offset!==Ed||Nc.stride!==te)fa.bindBuffer(34962,jd.buffer),fa.vertexAttribPointer(me,gd,ke,Bd,te,Ed),Nc.type=ke,Nc.size=gd,Nc.buffer=jd,Nc.normalized=Bd,Nc.offset=Ed,Nc.stride=te;Nc.divisor!==xd&&(G.vertexAttribDivisorANGLE(me,xd),Nc.divisor=xd)}else if(Nc.buffer&&(fa.disableVertexAttribArray(me),Nc.buffer=null),Nc.x!==ge||Nc.y!==ue||Nc.z!==ce||Nc.w!==ie)fa.vertexAttrib4f(me,ge,ue,ce,ie),Nc.x=ge,Nc.y=ue,Nc.z=ce,Nc.w=ie;fa.uniform1i(K.location,
!1);fa.uniform1f(Ba.location,u.pixelRatio);ve=F.call(this,u,a,0);fa.uniform2f(ma.location,ve[0],ve[1]);re=a.scale;fa.uniform2f(ya.location,re[0],re[1]);Ld=a.scaleFract;fa.uniform2f(da.location,Ld[0],Ld[1]);Qd=a.translate;fa.uniform2f(ja.location,Qd[0],Qd[1]);Rd=a.translateFract;fa.uniform2f(na.location,Rd[0],Rd[1]);fa.uniform1f(U.location,a.opacity);fa.uniform1i(qa.location,I.bind());Sd=a.elements;ne=null;(ne=(Ae=R(Sd))?Fa.createStream(Sd):Fa.getElements(Sd))&&fa.bindBuffer(34963,ne.buffer.buffer);
Ee=a.offset;if(se=a.count)Te=ua.instances,0<Te?ne?G.drawElementsInstancedANGLE(0,se,ne.type,Ee<<(ne.type-5121>>1),Te):G.drawArraysInstancedANGLE(0,Ee,se,Te):0>Te&&(ne?fa.drawElements(0,se,ne.type,Ee<<(ne.type-5121>>1)):fa.drawArrays(0,Ee,se)),ha.dirty=!0,xa.setVAO(null),u.viewportWidth=q,u.viewportHeight=Ga,C&&(e.cpuTime+=performance.now()-ra),E&&A.destroyStream(O),la&&A.destroyStream(Da),Eb&&A.destroyStream(yb),La&&A.destroyStream(kb),ac&&A.destroyStream(Qa),tc&&A.destroyStream(Yb),Zb&&A.destroyStream(ec),
dd&&A.destroyStream(zc),sd&&A.destroyStream(jd),I.unbind(),Ae&&Fa.destroyStream(ne)},scope:function(a,c,b){var d,p,x,z,h,k,t,l,r,v,sa,K,T,S,N,U,F,I,da,fa,O,zb,ka,Pa,P,Y,Q,ea,xa,ya,qa,pa,ca,ja,V,X,Ya,ga,na,H,Ca,oa,ma,za,la,ta,Ba,Ib,Ha,Ia,mb,gb,Ea,Ub,ia,Ua,bc,qb,Vd,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,qd,Ra,Mb,Fb,Ma,yd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,Nd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,pe,Ec,Be,Mc,Xc,he,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,oe,
xe,wd,id,Je,Pd,jf,le,$d,Kd,Id,nd,Tc,vd,sd,jd,xd,Bd,Ed,qe,je,te,ke,ie,ge,ue,ce,me,Nc,gd,ve,re,Ld,Qd,Rd,Sd,ne,Ae,Ee,se,Te,Ue,Pe,we,He,Ke,Le,Me,Ie,Md,Xd,be,de,Ne,Jd,Td,Fe,Oe,cf,bf,Ve,Qe,af,Ze,We,Xe,Ud,ae,Ye,kf,of,ff,lf,mf,nf,sf,pf,tf,Cf,Df,Re,Ge,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,gf,df,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,hf,ef,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;d=a.viewport;p=d.x|0;x=d.y|
0;z="width"in d?d.width|0:u.framebufferWidth-p;h="height"in d?d.height|0:u.framebufferHeight-x;k=u.viewportWidth;u.viewportWidth=z;t=u.viewportHeight;u.viewportHeight=h;l=Od[0];Od[0]=p;r=Od[1];Od[1]=x;v=Od[2];Od[2]=z;sa=Od[3];Od[3]=h;K=wa[0];wa[0]=0;T=wa[1];wa[1]=0;S=wa[2];wa[2]=0;N=wa[3];wa[3]=1;U=va.blend_enable;va.blend_enable=!0;F=Sa[0];Sa[0]=770;I=Sa[1];Sa[1]=771;da=Sa[2];Sa[2]=773;fa=Sa[3];Sa[3]=1;O=va.depth_enable;va.depth_enable=!1;zb=a.viewport;ka=zb.x|0;Pa=zb.y|0;P="width"in zb?zb.width|
0:u.framebufferWidth-ka;Y="height"in zb?zb.height|0:u.framebufferHeight-Pa;Q=Fd[0];Fd[0]=ka;ea=Fd[1];Fd[1]=Pa;xa=Fd[2];Fd[2]=P;ya=Fd[3];Fd[3]=Y;qa=va.scissor_enable;va.scissor_enable=!0;pa=va.stencil_enable;va.stencil_enable=!1;if(ca=ha.profile)ja=performance.now(),e.count++;V=a.elements;X=null;X=(Ya=R(V))?Fa.createStream(V):Fa.getElements(V);ga=ua.elements;ua.elements=X;na=a.offset;H=ua.offset;ua.offset=na;Ca=a.count;oa=ua.count;ua.count=Ca;ma=ua.primitive;ua.primitive=0;za=ra[45];ra[45]=!1;la=a.markerTexture;
ta=ra[48];ra[48]=la;Ba=a.opacity;Ib=ra[10];ra[10]=Ba;Ha=n.call(this,u,a,b);Ia=ra[46];ra[46]=Ha;mb=ra[47];ra[47]=aa;gb=u.pixelRatio;Ea=ra[34];ra[34]=gb;Ub=a.scale;ia=ra[6];ra[6]=Ub;Ua=a.scaleFract;bc=ra[7];ra[7]=Ua;qb=a.translate;Vd=ra[8];ra[8]=qb;ib=a.translateFract;rb=ra[9];ra[9]=ib;Ja=q.call(this,u,a,b);tb=!1;Ka=null;eb=0;fb=!1;kb=La=0;Wa=1;vb=0;ub=5126;Mb=Ra=qd=Oa=0;R(Ja)?(tb=!0,Ka=A.createStream(34962,Ja),ub=Ka.dtype):(Ka=A.getBuffer(Ja))?ub=Ka.dtype:"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?
(qd=Ja.constant,Ra=Mb=Oa=0):(qd=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Mb=2<Ja.constant.length?Ja.constant[2]:0,Oa=3<Ja.constant.length?Ja.constant[3]:0)):(Ka=R(Ja.buffer)?A.createStream(34962,Ja.buffer):A.getBuffer(Ja.buffer),ub="type"in Ja?Gd[Ja.type]:Ka.dtype,fb=!!Ja.normalized,kb=Ja.size|0,La=Ja.offset|0,vb=Ja.stride|0,eb=Ja.divisor|0);Fb=J.buffer;J.buffer=Ka;Ma=J.divisor;J.divisor=eb;yd=J.normalized;J.normalized=fb;Za=J.offset;J.offset=La;Nb=J.size;J.size=
kb;Ob=J.state;J.state=Wa;nb=J.stride;J.stride=vb;Na=J.type;J.type=ub;ac=J.w;J.w=Oa;Qa=J.x;J.x=qd;wb=J.y;J.y=Ra;xb=J.z;J.z=Mb;Ta=C.call(this,u,a,b);ob=!1;hc=null;Ac=0;vc=!1;kc=bb=0;Rc=1;Xa=0;Nd=5126;tc=Xb=$a=Bb=0;R(Ta)?(ob=!0,hc=A.createStream(34962,Ta),Nd=hc.dtype):(hc=A.getBuffer(Ta))?Nd=hc.dtype:"constant"in Ta?(Rc=2,"number"===typeof Ta.constant?($a=Ta.constant,Xb=tc=Bb=0):($a=0<Ta.constant.length?Ta.constant[0]:0,Xb=1<Ta.constant.length?Ta.constant[1]:0,tc=2<Ta.constant.length?Ta.constant[2]:
0,Bb=3<Ta.constant.length?Ta.constant[3]:0)):(hc=R(Ta.buffer)?A.createStream(34962,Ta.buffer):A.getBuffer(Ta.buffer),Nd="type"in Ta?Gd[Ta.type]:hc.dtype,vc=!!Ta.normalized,kc=Ta.size|0,bb=Ta.offset|0,Xa=Ta.stride|0,Ac=Ta.divisor|0);Yb=M.buffer;M.buffer=hc;Sb=M.divisor;M.divisor=Ac;Kc=M.normalized;M.normalized=vc;Tb=M.offset;M.offset=bb;pe=M.size;M.size=kc;Ec=M.state;M.state=Rc;Be=M.stride;M.stride=Xa;Mc=M.type;M.type=Nd;Xc=M.w;M.w=Bb;he=M.x;M.x=$a;oc=M.y;M.y=Xb;wc=M.z;M.z=tc;ic=Aa.call(this,u,a,b);
db=!1;sc=null;Vb=0;Zb=!1;jc=ec=0;yc=1;Bc=0;bd=5126;Yc=Sc=Qc=Pc=0;R(ic)?(db=!0,sc=A.createStream(34962,ic),bd=sc.dtype):(sc=A.getBuffer(ic))?bd=sc.dtype:"constant"in ic?(yc=2,"number"===typeof ic.constant?(Qc=ic.constant,Sc=Yc=Pc=0):(Qc=0<ic.constant.length?ic.constant[0]:0,Sc=1<ic.constant.length?ic.constant[1]:0,Yc=2<ic.constant.length?ic.constant[2]:0,Pc=3<ic.constant.length?ic.constant[3]:0)):(sc=R(ic.buffer)?A.createStream(34962,ic.buffer):A.getBuffer(ic.buffer),bd="type"in ic?Gd[ic.type]:sc.dtype,
Zb=!!ic.normalized,jc=ic.size|0,ec=ic.offset|0,Bc=ic.stride|0,Vb=ic.divisor|0);ld=f.buffer;f.buffer=sc;cd=f.divisor;f.divisor=Vb;Zc=f.normalized;f.normalized=Zb;lc=f.offset;f.offset=ec;dc=f.size;f.size=jc;$c=f.state;f.state=yc;Uc=f.stride;f.stride=Bc;dd=f.type;f.type=bd;zc=f.w;f.w=Pc;hd=f.x;f.x=Qc;oe=f.y;f.y=Sc;xe=f.z;f.z=Yc;wd=w.call(this,u,a,b);id=!1;Je=null;Pd=0;jf=!1;$d=le=0;Kd=1;Id=0;nd=5126;jd=sd=vd=Tc=0;R(wd)?(id=!0,Je=A.createStream(34962,wd),nd=Je.dtype):(Je=A.getBuffer(wd))?nd=Je.dtype:
"constant"in wd?(Kd=2,"number"===typeof wd.constant?(vd=wd.constant,sd=jd=Tc=0):(vd=0<wd.constant.length?wd.constant[0]:0,sd=1<wd.constant.length?wd.constant[1]:0,jd=2<wd.constant.length?wd.constant[2]:0,Tc=3<wd.constant.length?wd.constant[3]:0)):(Je=R(wd.buffer)?A.createStream(34962,wd.buffer):A.getBuffer(wd.buffer),nd="type"in wd?Gd[wd.type]:Je.dtype,jf=!!wd.normalized,$d=wd.size|0,le=wd.offset|0,Id=wd.stride|0,Pd=wd.divisor|0);xd=ba.buffer;ba.buffer=Je;Bd=ba.divisor;ba.divisor=Pd;Ed=ba.normalized;
ba.normalized=jf;qe=ba.offset;ba.offset=le;je=ba.size;ba.size=$d;te=ba.state;ba.state=Kd;ke=ba.stride;ba.stride=Id;ie=ba.type;ba.type=nd;ge=ba.w;ba.w=Tc;ue=ba.x;ba.x=vd;ce=ba.y;ba.y=sd;me=ba.z;ba.z=jd;Nc=E.call(this,u,a,b);gd=!1;ve=null;re=0;Ld=!1;Rd=Qd=0;Sd=1;ne=0;Ae=5126;Ue=Te=se=Ee=0;R(Nc)?(gd=!0,ve=A.createStream(34962,Nc),Ae=ve.dtype):(ve=A.getBuffer(Nc))?Ae=ve.dtype:"constant"in Nc?(Sd=2,"number"===typeof Nc.constant?(se=Nc.constant,Te=Ue=Ee=0):(se=0<Nc.constant.length?Nc.constant[0]:0,Te=1<
Nc.constant.length?Nc.constant[1]:0,Ue=2<Nc.constant.length?Nc.constant[2]:0,Ee=3<Nc.constant.length?Nc.constant[3]:0)):(ve=R(Nc.buffer)?A.createStream(34962,Nc.buffer):A.getBuffer(Nc.buffer),Ae="type"in Nc?Gd[Nc.type]:ve.dtype,Ld=!!Nc.normalized,Rd=Nc.size|0,Qd=Nc.offset|0,ne=Nc.stride|0,re=Nc.divisor|0);Pe=W.buffer;W.buffer=ve;we=W.divisor;W.divisor=re;He=W.normalized;W.normalized=Ld;Ke=W.offset;W.offset=Qd;Le=W.size;W.size=Rd;Me=W.state;W.state=Sd;Ie=W.stride;W.stride=ne;Md=W.type;W.type=Ae;Xd=
W.w;W.w=Ee;be=W.x;W.x=se;de=W.y;W.y=Te;Ne=W.z;W.z=Ue;Jd=D.call(this,u,a,b);Td=!1;Fe=null;Oe=0;cf=!1;Ve=bf=0;Qe=1;af=0;Ze=5126;ae=Ud=Xe=We=0;R(Jd)?(Td=!0,Fe=A.createStream(34962,Jd),Ze=Fe.dtype):(Fe=A.getBuffer(Jd))?Ze=Fe.dtype:"constant"in Jd?(Qe=2,"number"===typeof Jd.constant?(Xe=Jd.constant,Ud=ae=We=0):(Xe=0<Jd.constant.length?Jd.constant[0]:0,Ud=1<Jd.constant.length?Jd.constant[1]:0,ae=2<Jd.constant.length?Jd.constant[2]:0,We=3<Jd.constant.length?Jd.constant[3]:0)):(Fe=R(Jd.buffer)?A.createStream(34962,
Jd.buffer):A.getBuffer(Jd.buffer),Ze="type"in Jd?Gd[Jd.type]:Fe.dtype,cf=!!Jd.normalized,Ve=Jd.size|0,bf=Jd.offset|0,af=Jd.stride|0,Oe=Jd.divisor|0);Ye=y.buffer;y.buffer=Fe;kf=y.divisor;y.divisor=Oe;of=y.normalized;y.normalized=cf;ff=y.offset;y.offset=bf;lf=y.size;y.size=Ve;mf=y.state;y.state=Qe;nf=y.stride;y.stride=af;sf=y.type;y.type=Ze;pf=y.w;y.w=We;tf=y.x;y.x=Xe;Cf=y.y;y.y=Ud;Df=y.z;y.z=ae;Re=L.call(this,u,a,b);Ge=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;R(Re)?(Ge=!0,qf=A.createStream(34962,
Re),xf=qf.dtype):(qf=A.getBuffer(Re))?xf=qf.dtype:"constant"in Re?(Ff=2,"number"===typeof Re.constant?(wf=Re.constant,zf=Af=yf=0):(wf=0<Re.constant.length?Re.constant[0]:0,zf=1<Re.constant.length?Re.constant[1]:0,Af=2<Re.constant.length?Re.constant[2]:0,yf=3<Re.constant.length?Re.constant[3]:0)):(qf=R(Re.buffer)?A.createStream(34962,Re.buffer):A.getBuffer(Re.buffer),xf="type"in Re?Gd[Re.type]:qf.dtype,Ef=!!Re.normalized,Bf=Re.size|0,Hf=Re.offset|0,Gf=Re.stride|0,rf=Re.divisor|0);Jf=G.buffer;G.buffer=
qf;Kf=G.divisor;G.divisor=rf;Lf=G.normalized;G.normalized=Ef;Mf=G.offset;G.offset=Hf;uf=G.size;G.size=Bf;Rf=G.state;G.state=Ff;If=G.stride;G.stride=Gf;vf=G.type;G.type=xf;dg=G.w;G.w=yf;Sf=G.x;G.x=wf;Tf=G.y;G.y=zf;qg=G.z;G.z=Af;gf=B.call(this,u,a,b);df=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;R(gf)?(df=!0,Nf=A.createStream(34962,gf),Wf=Nf.dtype):(Nf=A.getBuffer(gf))?Wf=Nf.dtype:"constant"in gf?(hg=2,"number"===typeof gf.constant?(Xf=gf.constant,Yf=Zf=Uf=0):(Xf=0<gf.constant.length?
gf.constant[0]:0,Yf=1<gf.constant.length?gf.constant[1]:0,Zf=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Nf=R(gf.buffer)?A.createStream(34962,gf.buffer):A.getBuffer(gf.buffer),Wf="type"in gf?Gd[gf.type]:Nf.dtype,eg=!!gf.normalized,gg=gf.size|0,fg=gf.offset|0,ig=gf.stride|0,Of=gf.divisor|0);jg=m.buffer;m.buffer=Nf;rg=m.divisor;m.divisor=Of;sg=m.normalized;m.normalized=eg;tg=m.offset;m.offset=fg;ug=m.size;m.size=gg;vg=m.state;m.state=hg;wg=m.stride;m.stride=ig;
xg=m.type;m.type=Wf;yg=m.w;m.w=Uf;zg=m.x;m.x=Xf;Ag=m.y;m.y=Yf;Bg=m.z;m.z=Zf;hf=Z.call(this,u,a,b);ef=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;R(hf)?(ef=!0,Pf=A.createStream(34962,hf),$f=Pf.dtype):(Pf=A.getBuffer(hf))?$f=Pf.dtype:"constant"in hf?(ng=2,"number"===typeof hf.constant?(ag=hf.constant,bg=cg=Vf=0):(ag=0<hf.constant.length?hf.constant[0]:0,bg=1<hf.constant.length?hf.constant[1]:0,cg=2<hf.constant.length?hf.constant[2]:0,Vf=3<hf.constant.length?hf.constant[3]:0)):(Pf=
R(hf.buffer)?A.createStream(34962,hf.buffer):A.getBuffer(hf.buffer),$f="type"in hf?Gd[hf.type]:Pf.dtype,kg=!!hf.normalized,mg=hf.size|0,lg=hf.offset|0,og=hf.stride|0,Qf=hf.divisor|0);pg=g.buffer;g.buffer=Pf;Cg=g.divisor;g.divisor=Qf;Dg=g.normalized;g.normalized=kg;Eg=g.offset;g.offset=lg;Fg=g.size;g.size=mg;Gg=g.state;g.state=ng;Hg=g.stride;g.stride=og;Ig=g.type;g.type=$f;Jg=g.w;g.w=Vf;Kg=g.x;g.x=ag;Lg=g.y;g.y=bg;Mg=g.z;g.z=cg;Ng=Ga.vert;Ga.vert=59;Og=Ga.frag;Ga.frag=58;ha.dirty=!0;c(u,a,b);u.viewportWidth=
k;u.viewportHeight=t;Od[0]=l;Od[1]=r;Od[2]=v;Od[3]=sa;wa[0]=K;wa[1]=T;wa[2]=S;wa[3]=N;va.blend_enable=U;Sa[0]=F;Sa[1]=I;Sa[2]=da;Sa[3]=fa;va.depth_enable=O;Fd[0]=Q;Fd[1]=ea;Fd[2]=xa;Fd[3]=ya;va.scissor_enable=qa;va.stencil_enable=pa;ca&&(e.cpuTime+=performance.now()-ja);Ya&&Fa.destroyStream(X);ua.elements=ga;ua.offset=H;ua.count=oa;ua.primitive=ma;ra[45]=za;ra[48]=ta;ra[10]=Ib;ra[46]=Ia;ra[47]=mb;ra[34]=Ea;ra[6]=ia;ra[7]=bc;ra[8]=Vd;ra[9]=rb;tb&&A.destroyStream(Ka);J.buffer=Fb;J.divisor=Ma;J.normalized=
yd;J.offset=Za;J.size=Nb;J.state=Ob;J.stride=nb;J.type=Na;J.w=ac;J.x=Qa;J.y=wb;J.z=xb;ob&&A.destroyStream(hc);M.buffer=Yb;M.divisor=Sb;M.normalized=Kc;M.offset=Tb;M.size=pe;M.state=Ec;M.stride=Be;M.type=Mc;M.w=Xc;M.x=he;M.y=oc;M.z=wc;db&&A.destroyStream(sc);f.buffer=ld;f.divisor=cd;f.normalized=Zc;f.offset=lc;f.size=dc;f.state=$c;f.stride=Uc;f.type=dd;f.w=zc;f.x=hd;f.y=oe;f.z=xe;id&&A.destroyStream(Je);ba.buffer=xd;ba.divisor=Bd;ba.normalized=Ed;ba.offset=qe;ba.size=je;ba.state=te;ba.stride=ke;ba.type=
ie;ba.w=ge;ba.x=ue;ba.y=ce;ba.z=me;gd&&A.destroyStream(ve);W.buffer=Pe;W.divisor=we;W.normalized=He;W.offset=Ke;W.size=Le;W.state=Me;W.stride=Ie;W.type=Md;W.w=Xd;W.x=be;W.y=de;W.z=Ne;Td&&A.destroyStream(Fe);y.buffer=Ye;y.divisor=kf;y.normalized=of;y.offset=ff;y.size=lf;y.state=mf;y.stride=nf;y.type=sf;y.w=pf;y.x=tf;y.y=Cf;y.z=Df;Ge&&A.destroyStream(qf);G.buffer=Jf;G.divisor=Kf;G.normalized=Lf;G.offset=Mf;G.size=uf;G.state=Rf;G.stride=If;G.type=vf;G.w=dg;G.x=Sf;G.y=Tf;G.z=qg;df&&A.destroyStream(Nf);
m.buffer=jg;m.divisor=rg;m.normalized=sg;m.offset=tg;m.size=ug;m.state=vg;m.stride=wg;m.type=xg;m.w=yg;m.x=zg;m.y=Ag;m.z=Bg;ef&&A.destroyStream(Pf);g.buffer=pg;g.divisor=Cg;g.normalized=Dg;g.offset=Eg;g.size=Fg;g.state=Gg;g.stride=Hg;g.type=Ig;g.w=Jg;g.x=Kg;g.y=Lg;g.z=Mg;Ga.vert=Ng;Ga.frag=Og;ha.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,
Aa,f,w,ba,E,W,D,y,L,G,B,m,Z,g,H,Q,ga,Ea,V,X){var S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa,ka,Y;S=a.attributes;T=a.buffer;N=a.context;x=a.current;P=a.draw;O=a.elements;pa=a.extensions;oa=a.framebuffer;z=a.gl;K=a.isBufferArgs;ea=a.next;U=a.shader;ma=a.uniforms;qa=a.vao;Ba=ea.blend_color;ya=x.blend_color;da=ea.blend_equation;Ca=x.blend_equation;ja=ea.blend_func;na=x.blend_func;za=ea.colorMask;Pa=x.colorMask;sa=ea.depth_range;zb=x.depth_range;
Ya=ea.polygonOffset_offset;A=x.polygonOffset_offset;u=ea.sample_coverage;ha=x.sample_coverage;ua=ea.scissor_box;Fa=x.scissor_box;mb=ea.stencil_func;Ib=x.stencil_func;fa=ea.stencil_opBack;R=x.stencil_opBack;va=ea.stencil_opFront;Ga=x.stencil_opFront;ra=ea.viewport;xa=x.viewport;wa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:4,stride:8};Y={offset:0,stride:8};return{batch:function(a,c){var b,d,p,h,k,t,l,r,v,q,U,n,F;b=oa.next;b!==oa.cur&&(b?
z.bindFramebuffer(36160,b.framebuffer):z.bindFramebuffer(36160,null),oa.cur=b);if(x.dirty){var I,ra,aa,ja,ma,Ba,ia,Ad,ze,$e,Se,Hd,Ce,Yd,Zd,ee,Wd,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc;I=ea.dither;I!==x.dither&&(I?z.enable(3024):z.disable(3024),x.dither=I);ra=da[0];aa=da[1];if(ra!==Ca[0]||aa!==Ca[1])z.blendEquationSeparate(ra,aa),Ca[0]=ra,Ca[1]=aa;ja=ea.depth_func;ja!==x.depth_func&&(z.depthFunc(ja),x.depth_func=ja);ma=sa[0];Ba=sa[1];if(ma!==zb[0]||Ba!==zb[1])z.depthRange(ma,
Ba),zb[0]=ma,zb[1]=Ba;ia=ea.depth_mask;ia!==x.depth_mask&&(z.depthMask(ia),x.depth_mask=ia);Ad=za[0];ze=za[1];$e=za[2];Se=za[3];if(Ad!==Pa[0]||ze!==Pa[1]||$e!==Pa[2]||Se!==Pa[3])z.colorMask(Ad,ze,$e,Se),Pa[0]=Ad,Pa[1]=ze,Pa[2]=$e,Pa[3]=Se;Hd=ea.cull_enable;Hd!==x.cull_enable&&(Hd?z.enable(2884):z.disable(2884),x.cull_enable=Hd);Ce=ea.cull_face;Ce!==x.cull_face&&(z.cullFace(Ce),x.cull_face=Ce);Yd=ea.frontFace;Yd!==x.frontFace&&(z.frontFace(Yd),x.frontFace=Yd);Zd=ea.lineWidth;Zd!==x.lineWidth&&(z.lineWidth(Zd),
x.lineWidth=Zd);ee=ea.polygonOffset_enable;ee!==x.polygonOffset_enable&&(ee?z.enable(32823):z.disable(32823),x.polygonOffset_enable=ee);Wd=Ya[0];md=Ya[1];if(Wd!==A[0]||md!==A[1])z.polygonOffset(Wd,md),A[0]=Wd,A[1]=md;ad=ea.sample_alpha;ad!==x.sample_alpha&&(ad?z.enable(32926):z.disable(32926),x.sample_alpha=ad);rd=ea.sample_enable;rd!==x.sample_enable&&(rd?z.enable(32928):z.disable(32928),x.sample_enable=rd);Lc=u[0];od=u[1];if(Lc!==ha[0]||od!==ha[1])z.sampleCoverage(Lc,od),ha[0]=Lc,ha[1]=od;Fc=ea.stencil_mask;
Fc!==x.stencil_mask&&(z.stencilMask(Fc),x.stencil_mask=Fc);ed=mb[0];Oc=mb[1];Wc=mb[2];if(ed!==Ib[0]||Oc!==Ib[1]||Wc!==Ib[2])z.stencilFunc(ed,Oc,Wc),Ib[0]=ed,Ib[1]=Oc,Ib[2]=Wc;Cb=va[0];Gb=va[1];uc=va[2];Ab=va[3];if(Cb!==Ga[0]||Gb!==Ga[1]||uc!==Ga[2]||Ab!==Ga[3])z.stencilOpSeparate(Cb,Gb,uc,Ab),Ga[0]=Cb,Ga[1]=Gb,Ga[2]=uc,Ga[3]=Ab;xc=fa[0];Db=fa[1];Ic=fa[2];mc=fa[3];if(xc!==R[0]||Db!==R[1]||Ic!==R[2]||mc!==R[3])z.stencilOpSeparate(xc,Db,Ic,mc),R[0]=xc,R[1]=Db,R[2]=Ic,R[3]=mc;Gc=ea.scissor_enable;Gc!==
x.scissor_enable&&(Gc?z.enable(3089):z.disable(3089),x.scissor_enable=Gc);fd=ua[0];Vc=ua[1];Dc=ua[2];fc=ua[3];if(fd!==Fa[0]||Vc!==Fa[1]||Dc!==Fa[2]||fc!==Fa[3])z.scissor(fd,Vc,Dc,fc),Fa[0]=fd,Fa[1]=Vc,Fa[2]=Dc,Fa[3]=fc}d=this.viewport;p=d.x|0;h=d.y|0;k="width"in d?d.width|0:N.framebufferWidth-p;t="height"in d?d.height|0:N.framebufferHeight-h;l=N.viewportWidth;N.viewportWidth=k;r=N.viewportHeight;N.viewportHeight=t;z.viewport(p,h,k,t);xa[0]=p;xa[1]=h;xa[2]=k;xa[3]=t;z.blendColor(0,0,0,1);ya[0]=0;ya[1]=
0;ya[2]=0;ya[3]=1;z.enable(3042);x.blend_enable=!0;z.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;z.disable(2929);x.depth_enable=!1;z.disable(2960);x.stencil_enable=!1;if(v=x.profile)q=performance.now(),e.count+=c;z.useProgram(J.program);U=pa.angle_instanced_arrays;var Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,
$a,Xb;qa.setVAO(null);Y.buffer=this.sizeBuffer;Hc=!1;pc=null;qc=0;nc=!1;lb=gc=0;Jc=1;Jb=0;cb=5126;Va=pb=ab=Pb=0;K(Y)?(Hc=!0,pc=T.createStream(34962,Y),cb=pc.dtype):(pc=T.getBuffer(Y))?cb=pc.dtype:"constant"in Y?(Jc=2,"number"===typeof Y.constant?(ab=Y.constant,pb=Va=Pb=0):(ab=0<Y.constant.length?Y.constant[0]:0,pb=1<Y.constant.length?Y.constant[1]:0,Va=2<Y.constant.length?Y.constant[2]:0,Pb=3<Y.constant.length?Y.constant[3]:0)):(pc=K(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),
cb="type"in Y?wa[Y.type]:pc.dtype,nc=!!Y.normalized,lb=Y.size|0,gc=Y.offset|0,Jb=Y.stride|0,qc=Y.divisor|0);td=X.location;Kb=S[td];if(1===Jc){Kb.buffer||z.enableVertexAttribArray(td);Lb=lb||1;if(Kb.type!==cb||Kb.size!==Lb||Kb.buffer!==pc||Kb.normalized!==nc||Kb.offset!==gc||Kb.stride!==Jb)z.bindBuffer(34962,pc.buffer),z.vertexAttribPointer(td,Lb,cb,nc,Jb,gc),Kb.type=cb,Kb.size=Lb,Kb.buffer=pc,Kb.normalized=nc,Kb.offset=gc,Kb.stride=Jb;Kb.divisor!==qc&&(U.vertexAttribDivisorANGLE(td,qc),Kb.divisor=
qc)}else if(Kb.buffer&&(z.disableVertexAttribArray(td),Kb.buffer=null),Kb.x!==ab||Kb.y!==pb||Kb.z!==Va||Kb.w!==Pb)z.vertexAttrib4f(td,ab,pb,Va,Pb),Kb.x=ab,Kb.y=pb,Kb.z=Va,Kb.w=Pb;ka.buffer=this.sizeBuffer;rc=!1;Qb=null;jb=0;Hb=!1;yb=Eb=0;hb=1;$b=0;Rb=5126;qb=Wb=Ua=sb=0;K(ka)?(rc=!0,Qb=T.createStream(34962,ka),Rb=Qb.dtype):(Qb=T.getBuffer(ka))?Rb=Qb.dtype:"constant"in ka?(hb=2,"number"===typeof ka.constant?(Ua=ka.constant,Wb=qb=sb=0):(Ua=0<ka.constant.length?ka.constant[0]:0,Wb=1<ka.constant.length?
ka.constant[1]:0,qb=2<ka.constant.length?ka.constant[2]:0,sb=3<ka.constant.length?ka.constant[3]:0)):(Qb=K(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),Rb="type"in ka?wa[ka.type]:Qb.dtype,Hb=!!ka.normalized,yb=ka.size|0,Eb=ka.offset|0,$b=ka.stride|0,jb=ka.divisor|0);cc=G.location;ib=S[cc];if(1===hb){ib.buffer||z.enableVertexAttribArray(cc);rb=yb||1;if(ib.type!==Rb||ib.size!==rb||ib.buffer!==Qb||ib.normalized!==Hb||ib.offset!==Eb||ib.stride!==$b)z.bindBuffer(34962,Qb.buffer),z.vertexAttribPointer(cc,
rb,Rb,Hb,$b,Eb),ib.type=Rb,ib.size=rb,ib.buffer=Qb,ib.normalized=Hb,ib.offset=Eb,ib.stride=$b;ib.divisor!==jb&&(U.vertexAttribDivisorANGLE(cc,jb),ib.divisor=jb)}else if(ib.buffer&&(z.disableVertexAttribArray(cc),ib.buffer=null),ib.x!==Ua||ib.y!==Wb||ib.z!==qb||ib.w!==sb)z.vertexAttrib4f(cc,Ua,Wb,qb,sb),ib.x=Ua,ib.y=Wb,ib.z=qb,ib.w=sb;Ja=this.charBuffer;tb=!1;Ka=null;eb=0;fb=!1;kb=La=0;Wa=1;vb=0;ub=5126;Mb=Ra=Cc=Oa=0;K(Ja)?(tb=!0,Ka=T.createStream(34962,Ja),ub=Ka.dtype):(Ka=T.getBuffer(Ja))?ub=Ka.dtype:
"constant"in Ja?(Wa=2,"number"===typeof Ja.constant?(Cc=Ja.constant,Ra=Mb=Oa=0):(Cc=0<Ja.constant.length?Ja.constant[0]:0,Ra=1<Ja.constant.length?Ja.constant[1]:0,Mb=2<Ja.constant.length?Ja.constant[2]:0,Oa=3<Ja.constant.length?Ja.constant[3]:0)):(Ka=K(Ja.buffer)?T.createStream(34962,Ja.buffer):T.getBuffer(Ja.buffer),ub="type"in Ja?wa[Ja.type]:Ka.dtype,fb=!!Ja.normalized,kb=Ja.size|0,La=Ja.offset|0,vb=Ja.stride|0,eb=Ja.divisor|0);Fb=L.location;Ma=S[Fb];if(1===Wa){Ma.buffer||z.enableVertexAttribArray(Fb);
Cd=kb||1;if(Ma.type!==ub||Ma.size!==Cd||Ma.buffer!==Ka||Ma.normalized!==fb||Ma.offset!==La||Ma.stride!==vb)z.bindBuffer(34962,Ka.buffer),z.vertexAttribPointer(Fb,Cd,ub,fb,vb,La),Ma.type=ub,Ma.size=Cd,Ma.buffer=Ka,Ma.normalized=fb,Ma.offset=La,Ma.stride=vb;Ma.divisor!==eb&&(U.vertexAttribDivisorANGLE(Fb,eb),Ma.divisor=eb)}else if(Ma.buffer&&(z.disableVertexAttribArray(Fb),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Ra||Ma.z!==Mb||Ma.w!==Oa)z.vertexAttrib4f(Fb,Cc,Ra,Mb,Oa),Ma.x=Cc,Ma.y=Ra,Ma.z=Mb,Ma.w=Oa;Za=
this.position;Nb=!1;Ob=null;nb=0;Na=!1;Qa=ac=0;wb=1;xb=0;Ta=5126;vc=Ac=hc=ob=0;K(Za)?(Nb=!0,Ob=T.createStream(34962,Za),Ta=Ob.dtype):(Ob=T.getBuffer(Za))?Ta=Ob.dtype:"constant"in Za?(wb=2,"number"===typeof Za.constant?(hc=Za.constant,Ac=vc=ob=0):(hc=0<Za.constant.length?Za.constant[0]:0,Ac=1<Za.constant.length?Za.constant[1]:0,vc=2<Za.constant.length?Za.constant[2]:0,ob=3<Za.constant.length?Za.constant[3]:0)):(Ob=K(Za.buffer)?T.createStream(34962,Za.buffer):T.getBuffer(Za.buffer),Ta="type"in Za?wa[Za.type]:
Ob.dtype,Na=!!Za.normalized,Qa=Za.size|0,ac=Za.offset|0,xb=Za.stride|0,nb=Za.divisor|0);bb=H.location;kc=S[bb];if(1===wb){kc.buffer||z.enableVertexAttribArray(bb);Rc=Qa||2;if(kc.type!==Ta||kc.size!==Rc||kc.buffer!==Ob||kc.normalized!==Na||kc.offset!==ac||kc.stride!==xb)z.bindBuffer(34962,Ob.buffer),z.vertexAttribPointer(bb,Rc,Ta,Na,xb,ac),kc.type=Ta,kc.size=Rc,kc.buffer=Ob,kc.normalized=Na,kc.offset=ac,kc.stride=xb;kc.divisor!==nb&&(U.vertexAttribDivisorANGLE(bb,nb),kc.divisor=nb)}else if(kc.buffer&&
(z.disableVertexAttribArray(bb),kc.buffer=null),kc.x!==hc||kc.y!==Ac||kc.z!==vc||kc.w!==ob)z.vertexAttrib4f(bb,hc,Ac,vc,ob),kc.x=hc,kc.y=Ac,kc.z=vc,kc.w=ob;Xa=this.viewportArray;z.uniform4f(V.location,Xa[0],Xa[1],Xa[2],Xa[3]);kd=this.scale;z.uniform2f(ga.location,kd[0],kd[1]);Bb=this.translate;z.uniform2f(Ea.location,Bb[0],Bb[1]);($a=P.elements)?z.bindBuffer(34963,$a.buffer.buffer):qa.currentVAO&&($a=O.getElements(qa.currentVAO.elements))&&z.bindBuffer(34963,$a.buffer.buffer);Xb=P.instances;for(n=
0;n<c;++n){F=a[n];var tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd,Dd;tc=C.call(this,N,F,n);n&&Yb===tc||(Yb=tc,z.uniform1f(B.location,tc));Sb=M.call(this,N,F,n);n&&Kc===Sb||(Kc=Sb,z.uniform1f(Z.location,Sb));Tb=F.align;n&&zd===Tb||(zd=Tb,z.uniform1f(ba.location,Tb));Ec=F.baseline;n&&pd===Ec||(pd=Ec,z.uniform1f(y.location,Ec));Mc=F.color;Xc=Mc[0];oc=Mc[1];ic=Mc[2];sc=Mc[3];n&&ud===Xc&&wc===oc&&db===ic&&Vb===sc||(ud=Xc,wc=oc,db=ic,Vb=
sc,z.uniform4f(m.location,Xc,oc,ic,sc));Zb=Aa.call(this,N,F,n);ec=Zb[0];yc=Zb[1];n&&jc===ec&&Bc===yc||(jc=ec,Bc=yc,z.uniform2f(D.location,ec,yc));bd=f.call(this,N,F,n);Pc=bd[0];Sc=bd[1];n&&Qc===Pc&&Yc===Sc||(Qc=Pc,Yc=Sc,z.uniform2f(W.location,Pc,Sc));ld=F.positionOffset;cd=ld[0];lc=ld[1];n&&Zc===cd&&dc===lc||(Zc=cd,dc=lc,z.uniform2f(Q.location,cd,lc));$c=F.opacity;n&&Uc===$c||(Uc=$c,z.uniform1f(g.location,$c));(dd=w.call(this,N,F,n))&&"framebuffer"===dd._reglType&&(dd=dd.color[0]);zc=dd._texture;
z.uniform1i(E.location,zc.bind());hd=F.offset;if(Dd=F.count)0<Xb?$a?U.drawElementsInstancedANGLE(0,Dd,$a.type,hd<<($a.type-5121>>1),Xb):U.drawArraysInstancedANGLE(0,hd,Dd,Xb):0>Xb&&($a?z.drawElements(0,Dd,$a.type,hd<<($a.type-5121>>1)):z.drawArrays(0,hd,Dd)),zc.unbind()}Hc&&T.destroyStream(pc);rc&&T.destroyStream(Qb);tb&&T.destroyStream(Ka);Nb&&T.destroyStream(Ob);x.dirty=!0;qa.setVAO(null);N.viewportWidth=l;N.viewportHeight=r;v&&(e.cpuTime+=performance.now()-q)},draw:function(a){var f,k,l,r,w,v,
q,U,n,F,I,ra,C,J,M,aa,ja,Aa,ma,Ba,ia,Ad,ze,$e,Se,Hd,Ce,Yd,Zd,ee,Wd,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb;f=oa.next;f!==oa.cur&&(f?z.bindFramebuffer(36160,f.framebuffer):z.bindFramebuffer(36160,null),oa.cur=f);if(x.dirty){var Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec;Wa=ea.dither;Wa!==
x.dither&&(Wa?z.enable(3024):z.disable(3024),x.dither=Wa);vb=da[0];ub=da[1];if(vb!==Ca[0]||ub!==Ca[1])z.blendEquationSeparate(vb,ub),Ca[0]=vb,Ca[1]=ub;Oa=ea.depth_func;Oa!==x.depth_func&&(z.depthFunc(Oa),x.depth_func=Oa);Cc=sa[0];Ra=sa[1];if(Cc!==zb[0]||Ra!==zb[1])z.depthRange(Cc,Ra),zb[0]=Cc,zb[1]=Ra;Mb=ea.depth_mask;Mb!==x.depth_mask&&(z.depthMask(Mb),x.depth_mask=Mb);Fb=za[0];Ma=za[1];Cd=za[2];Za=za[3];if(Fb!==Pa[0]||Ma!==Pa[1]||Cd!==Pa[2]||Za!==Pa[3])z.colorMask(Fb,Ma,Cd,Za),Pa[0]=Fb,Pa[1]=Ma,
Pa[2]=Cd,Pa[3]=Za;Nb=ea.cull_enable;Nb!==x.cull_enable&&(Nb?z.enable(2884):z.disable(2884),x.cull_enable=Nb);Ob=ea.cull_face;Ob!==x.cull_face&&(z.cullFace(Ob),x.cull_face=Ob);nb=ea.frontFace;nb!==x.frontFace&&(z.frontFace(nb),x.frontFace=nb);Na=ea.lineWidth;Na!==x.lineWidth&&(z.lineWidth(Na),x.lineWidth=Na);ac=ea.polygonOffset_enable;ac!==x.polygonOffset_enable&&(ac?z.enable(32823):z.disable(32823),x.polygonOffset_enable=ac);Qa=Ya[0];wb=Ya[1];if(Qa!==A[0]||wb!==A[1])z.polygonOffset(Qa,wb),A[0]=Qa,
A[1]=wb;xb=ea.sample_alpha;xb!==x.sample_alpha&&(xb?z.enable(32926):z.disable(32926),x.sample_alpha=xb);Ta=ea.sample_enable;Ta!==x.sample_enable&&(Ta?z.enable(32928):z.disable(32928),x.sample_enable=Ta);ob=u[0];hc=u[1];if(ob!==ha[0]||hc!==ha[1])z.sampleCoverage(ob,hc),ha[0]=ob,ha[1]=hc;Ac=ea.stencil_mask;Ac!==x.stencil_mask&&(z.stencilMask(Ac),x.stencil_mask=Ac);vc=mb[0];bb=mb[1];kc=mb[2];if(vc!==Ib[0]||bb!==Ib[1]||kc!==Ib[2])z.stencilFunc(vc,bb,kc),Ib[0]=vc,Ib[1]=bb,Ib[2]=kc;Rc=va[0];Xa=va[1];kd=
va[2];Bb=va[3];if(Rc!==Ga[0]||Xa!==Ga[1]||kd!==Ga[2]||Bb!==Ga[3])z.stencilOpSeparate(Rc,Xa,kd,Bb),Ga[0]=Rc,Ga[1]=Xa,Ga[2]=kd,Ga[3]=Bb;$a=fa[0];Xb=fa[1];tc=fa[2];Yb=fa[3];if($a!==R[0]||Xb!==R[1]||tc!==R[2]||Yb!==R[3])z.stencilOpSeparate($a,Xb,tc,Yb),R[0]=$a,R[1]=Xb,R[2]=tc,R[3]=Yb;Sb=ea.scissor_enable;Sb!==x.scissor_enable&&(Sb?z.enable(3089):z.disable(3089),x.scissor_enable=Sb);Kc=ua[0];Tb=ua[1];zd=ua[2];Ec=ua[3];if(Kc!==Fa[0]||Tb!==Fa[1]||zd!==Fa[2]||Ec!==Fa[3])z.scissor(Kc,Tb,zd,Ec),Fa[0]=Kc,Fa[1]=
Tb,Fa[2]=zd,Fa[3]=Ec}k=this.viewport;l=k.x|0;r=k.y|0;w="width"in k?k.width|0:N.framebufferWidth-l;v="height"in k?k.height|0:N.framebufferHeight-r;q=N.viewportWidth;N.viewportWidth=w;U=N.viewportHeight;N.viewportHeight=v;z.viewport(l,r,w,v);xa[0]=l;xa[1]=r;xa[2]=w;xa[3]=v;z.blendColor(0,0,0,1);ya[0]=0;ya[1]=0;ya[2]=0;ya[3]=1;z.enable(3042);x.blend_enable=!0;z.blendFuncSeparate(770,771,773,1);na[0]=770;na[1]=771;na[2]=773;na[3]=1;z.disable(2929);x.depth_enable=!1;z.disable(2960);x.stencil_enable=!1;
if(n=x.profile)F=performance.now(),e.count++;z.useProgram(t.program);I=pa.angle_instanced_arrays;qa.setVAO(null);Y.buffer=this.sizeBuffer;ra=!1;C=null;J=0;M=!1;ja=aa=0;Aa=1;ma=0;Ba=5126;$e=ze=Ad=ia=0;K(Y)?(ra=!0,C=T.createStream(34962,Y),Ba=C.dtype):(C=T.getBuffer(Y))?Ba=C.dtype:"constant"in Y?(Aa=2,"number"===typeof Y.constant?(Ad=Y.constant,ze=$e=ia=0):(Ad=0<Y.constant.length?Y.constant[0]:0,ze=1<Y.constant.length?Y.constant[1]:0,$e=2<Y.constant.length?Y.constant[2]:0,ia=3<Y.constant.length?Y.constant[3]:
0)):(C=K(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),Ba="type"in Y?wa[Y.type]:C.dtype,M=!!Y.normalized,ja=Y.size|0,aa=Y.offset|0,ma=Y.stride|0,J=Y.divisor|0);Se=X.location;Hd=S[Se];if(1===Aa){Hd.buffer||z.enableVertexAttribArray(Se);Ce=ja||1;if(Hd.type!==Ba||Hd.size!==Ce||Hd.buffer!==C||Hd.normalized!==M||Hd.offset!==aa||Hd.stride!==ma)z.bindBuffer(34962,C.buffer),z.vertexAttribPointer(Se,Ce,Ba,M,ma,aa),Hd.type=Ba,Hd.size=Ce,Hd.buffer=C,Hd.normalized=M,Hd.offset=aa,Hd.stride=ma;
Hd.divisor!==J&&(I.vertexAttribDivisorANGLE(Se,J),Hd.divisor=J)}else if(Hd.buffer&&(z.disableVertexAttribArray(Se),Hd.buffer=null),Hd.x!==Ad||Hd.y!==ze||Hd.z!==$e||Hd.w!==ia)z.vertexAttrib4f(Se,Ad,ze,$e,ia),Hd.x=Ad,Hd.y=ze,Hd.z=$e,Hd.w=ia;ka.buffer=this.sizeBuffer;Yd=!1;Zd=null;ee=0;Wd=!1;ad=md=0;rd=1;Lc=0;od=5126;Wc=Oc=ed=Fc=0;K(ka)?(Yd=!0,Zd=T.createStream(34962,ka),od=Zd.dtype):(Zd=T.getBuffer(ka))?od=Zd.dtype:"constant"in ka?(rd=2,"number"===typeof ka.constant?(ed=ka.constant,Oc=Wc=Fc=0):(ed=
0<ka.constant.length?ka.constant[0]:0,Oc=1<ka.constant.length?ka.constant[1]:0,Wc=2<ka.constant.length?ka.constant[2]:0,Fc=3<ka.constant.length?ka.constant[3]:0)):(Zd=K(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),od="type"in ka?wa[ka.type]:Zd.dtype,Wd=!!ka.normalized,ad=ka.size|0,md=ka.offset|0,Lc=ka.stride|0,ee=ka.divisor|0);Cb=G.location;Gb=S[Cb];if(1===rd){Gb.buffer||z.enableVertexAttribArray(Cb);uc=ad||1;if(Gb.type!==od||Gb.size!==uc||Gb.buffer!==Zd||Gb.normalized!==Wd||
Gb.offset!==md||Gb.stride!==Lc)z.bindBuffer(34962,Zd.buffer),z.vertexAttribPointer(Cb,uc,od,Wd,Lc,md),Gb.type=od,Gb.size=uc,Gb.buffer=Zd,Gb.normalized=Wd,Gb.offset=md,Gb.stride=Lc;Gb.divisor!==ee&&(I.vertexAttribDivisorANGLE(Cb,ee),Gb.divisor=ee)}else if(Gb.buffer&&(z.disableVertexAttribArray(Cb),Gb.buffer=null),Gb.x!==ed||Gb.y!==Oc||Gb.z!==Wc||Gb.w!==Fc)z.vertexAttrib4f(Cb,ed,Oc,Wc,Fc),Gb.x=ed,Gb.y=Oc,Gb.z=Wc,Gb.w=Fc;Ab=this.charBuffer;xc=!1;Db=null;Ic=0;mc=!1;fd=Gc=0;Vc=1;Dc=0;fc=5126;nc=qc=pc=
Hc=0;K(Ab)?(xc=!0,Db=T.createStream(34962,Ab),fc=Db.dtype):(Db=T.getBuffer(Ab))?fc=Db.dtype:"constant"in Ab?(Vc=2,"number"===typeof Ab.constant?(pc=Ab.constant,qc=nc=Hc=0):(pc=0<Ab.constant.length?Ab.constant[0]:0,qc=1<Ab.constant.length?Ab.constant[1]:0,nc=2<Ab.constant.length?Ab.constant[2]:0,Hc=3<Ab.constant.length?Ab.constant[3]:0)):(Db=K(Ab.buffer)?T.createStream(34962,Ab.buffer):T.getBuffer(Ab.buffer),fc="type"in Ab?wa[Ab.type]:Db.dtype,mc=!!Ab.normalized,fd=Ab.size|0,Gc=Ab.offset|0,Dc=Ab.stride|
0,Ic=Ab.divisor|0);gc=L.location;lb=S[gc];if(1===Vc){lb.buffer||z.enableVertexAttribArray(gc);Jc=fd||1;if(lb.type!==fc||lb.size!==Jc||lb.buffer!==Db||lb.normalized!==mc||lb.offset!==Gc||lb.stride!==Dc)z.bindBuffer(34962,Db.buffer),z.vertexAttribPointer(gc,Jc,fc,mc,Dc,Gc),lb.type=fc,lb.size=Jc,lb.buffer=Db,lb.normalized=mc,lb.offset=Gc,lb.stride=Dc;lb.divisor!==Ic&&(I.vertexAttribDivisorANGLE(gc,Ic),lb.divisor=Ic)}else if(lb.buffer&&(z.disableVertexAttribArray(gc),lb.buffer=null),lb.x!==pc||lb.y!==
qc||lb.z!==nc||lb.w!==Hc)z.vertexAttrib4f(gc,pc,qc,nc,Hc),lb.x=pc,lb.y=qc,lb.z=nc,lb.w=Hc;Jb=this.position;cb=!1;Pb=null;ab=0;pb=!1;td=Va=0;Kb=1;Lb=0;rc=5126;Eb=Hb=jb=Qb=0;K(Jb)?(cb=!0,Pb=T.createStream(34962,Jb),rc=Pb.dtype):(Pb=T.getBuffer(Jb))?rc=Pb.dtype:"constant"in Jb?(Kb=2,"number"===typeof Jb.constant?(jb=Jb.constant,Hb=Eb=Qb=0):(jb=0<Jb.constant.length?Jb.constant[0]:0,Hb=1<Jb.constant.length?Jb.constant[1]:0,Eb=2<Jb.constant.length?Jb.constant[2]:0,Qb=3<Jb.constant.length?Jb.constant[3]:
0)):(Pb=K(Jb.buffer)?T.createStream(34962,Jb.buffer):T.getBuffer(Jb.buffer),rc="type"in Jb?wa[Jb.type]:Pb.dtype,pb=!!Jb.normalized,td=Jb.size|0,Va=Jb.offset|0,Lb=Jb.stride|0,ab=Jb.divisor|0);yb=H.location;hb=S[yb];if(1===Kb){hb.buffer||z.enableVertexAttribArray(yb);$b=td||2;if(hb.type!==rc||hb.size!==$b||hb.buffer!==Pb||hb.normalized!==pb||hb.offset!==Va||hb.stride!==Lb)z.bindBuffer(34962,Pb.buffer),z.vertexAttribPointer(yb,$b,rc,pb,Lb,Va),hb.type=rc,hb.size=$b,hb.buffer=Pb,hb.normalized=pb,hb.offset=
Va,hb.stride=Lb;hb.divisor!==ab&&(I.vertexAttribDivisorANGLE(yb,ab),hb.divisor=ab)}else if(hb.buffer&&(z.disableVertexAttribArray(yb),hb.buffer=null),hb.x!==jb||hb.y!==Hb||hb.z!==Eb||hb.w!==Qb)z.vertexAttrib4f(yb,jb,Hb,Eb,Qb),hb.x=jb,hb.y=Hb,hb.z=Eb,hb.w=Qb;Rb=p.call(this,N,a,0);z.uniform1f(B.location,Rb);sb=h.call(this,N,a,0);z.uniform1f(Z.location,sb);z.uniform1f(ba.location,a.align);z.uniform1f(y.location,a.baseline);Ua=this.viewportArray;z.uniform4f(V.location,Ua[0],Ua[1],Ua[2],Ua[3]);Wb=a.color;
z.uniform4f(m.location,Wb[0],Wb[1],Wb[2],Wb[3]);qb=d.call(this,N,a,0);z.uniform2f(D.location,qb[0],qb[1]);cc=c.call(this,N,a,0);z.uniform2f(W.location,cc[0],cc[1]);ib=this.scale;z.uniform2f(ga.location,ib[0],ib[1]);rb=this.translate;z.uniform2f(Ea.location,rb[0],rb[1]);Ja=a.positionOffset;z.uniform2f(Q.location,Ja[0],Ja[1]);z.uniform1f(g.location,a.opacity);(tb=b.call(this,N,a,0))&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);Ka=tb._texture;z.uniform1i(E.location,Ka.bind());(eb=P.elements)?z.bindBuffer(34963,
eb.buffer.buffer):qa.currentVAO&&(eb=O.getElements(qa.currentVAO.elements))&&z.bindBuffer(34963,eb.buffer.buffer);fb=a.offset;if(La=a.count)kb=P.instances,0<kb?eb?I.drawElementsInstancedANGLE(0,La,eb.type,fb<<(eb.type-5121>>1),kb):I.drawArraysInstancedANGLE(0,fb,La,kb):0>kb&&(eb?z.drawElements(0,La,eb.type,fb<<(eb.type-5121>>1)):z.drawArrays(0,fb,La)),x.dirty=!0,qa.setVAO(null),N.viewportWidth=q,N.viewportHeight=U,n&&(e.cpuTime+=performance.now()-F),ra&&T.destroyStream(C),Yd&&T.destroyStream(Zd),
xc&&T.destroyStream(Db),cb&&T.destroyStream(Pb),Ka.unbind()},scope:function(a,c,b){var g,d,f,m,p,A,h,z,u,t,R,w,y,ha,sa,va,Ga,B,D,S,C,G,E,da,fa,zb,O,J,Pa,M,Q,xa,ua,ya,qa,pa,W,ba,V,X,Aa,L,Z,Ya,ga,na,H,Ca,oa,za,Fa,Da,la,Ib,mb,Ea,ia,Jc,Jb,cb,Pb,ab,pb,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa,kd,Bb,$a,Xb,tc,Yb,Sb,Kc,Tb,zd,Ec,pd,Mc,Xc,ud,oc,wc,ic,db,sc,Vb,Zb,ec,jc,yc,Bc,bd,Pc,Qc,Sc,
Yc,ld,cd,Zc,lc,dc,$c,Uc,dd,zc,hd;g=this.viewport;d=g.x|0;f=g.y|0;m="width"in g?g.width|0:N.framebufferWidth-d;p="height"in g?g.height|0:N.framebufferHeight-f;A=N.viewportWidth;N.viewportWidth=m;h=N.viewportHeight;N.viewportHeight=p;z=ra[0];ra[0]=d;u=ra[1];ra[1]=f;t=ra[2];ra[2]=m;R=ra[3];ra[3]=p;w=Ba[0];Ba[0]=0;y=Ba[1];Ba[1]=0;ha=Ba[2];Ba[2]=0;sa=Ba[3];Ba[3]=1;va=ea.blend_enable;ea.blend_enable=!0;Ga=ja[0];ja[0]=770;B=ja[1];ja[1]=771;D=ja[2];ja[2]=773;S=ja[3];ja[3]=1;C=ea.depth_enable;ea.depth_enable=
!1;G=ea.stencil_enable;ea.stencil_enable=!1;if(E=x.profile)da=performance.now(),e.count++;fa=a.offset;zb=P.offset;P.offset=fa;O=a.count;J=P.count;P.count=O;Pa=P.primitive;P.primitive=0;M=a.align;Q=ma[64];ma[64]=M;xa=l.call(this,N,a,b);ua=ma[69];ma[69]=xa;ya=r.call(this,N,a,b);qa=ma[67];ma[67]=ya;pa=v.call(this,N,a,b);W=ma[66];ma[66]=pa;ba=a.baseline;V=ma[65];ma[65]=ba;X=k.call(this,N,a,b);Aa=ma[62];ma[62]=X;L=a.color;Z=ma[14];ma[14]=L;Ya=F.call(this,N,a,b);ga=ma[63];ma[63]=Ya;na=a.opacity;H=ma[10];
ma[10]=na;Ca=a.positionOffset;oa=ma[68];ma[68]=Ca;za=this.scale;Fa=ma[6];ma[6]=za;Da=this.translate;la=ma[8];ma[8]=Da;Ib=this.viewportArray;mb=ma[3];ma[3]=Ib;Ea=this.charBuffer;ia=!1;Jc=null;Jb=0;cb=!1;ab=Pb=0;pb=1;Va=0;td=5126;Qb=rc=Lb=Kb=0;K(Ea)?(ia=!0,Jc=T.createStream(34962,Ea),td=Jc.dtype):(Jc=T.getBuffer(Ea))?td=Jc.dtype:"constant"in Ea?(pb=2,"number"===typeof Ea.constant?(Lb=Ea.constant,rc=Qb=Kb=0):(Lb=0<Ea.constant.length?Ea.constant[0]:0,rc=1<Ea.constant.length?Ea.constant[1]:0,Qb=2<Ea.constant.length?
Ea.constant[2]:0,Kb=3<Ea.constant.length?Ea.constant[3]:0)):(Jc=K(Ea.buffer)?T.createStream(34962,Ea.buffer):T.getBuffer(Ea.buffer),td="type"in Ea?wa[Ea.type]:Jc.dtype,cb=!!Ea.normalized,ab=Ea.size|0,Pb=Ea.offset|0,Va=Ea.stride|0,Jb=Ea.divisor|0);jb=I.buffer;I.buffer=Jc;Hb=I.divisor;I.divisor=Jb;Eb=I.normalized;I.normalized=cb;yb=I.offset;I.offset=Pb;hb=I.size;I.size=ab;$b=I.state;I.state=pb;Rb=I.stride;I.stride=Va;sb=I.type;I.type=td;Ua=I.w;I.w=Kb;Wb=I.x;I.x=Lb;qb=I.y;I.y=rc;cc=I.z;I.z=Qb;ka.buffer=
this.sizeBuffer;ib=!1;rb=null;Ja=0;tb=!1;eb=Ka=0;fb=1;La=0;kb=5126;Oa=ub=vb=Wa=0;K(ka)?(ib=!0,rb=T.createStream(34962,ka),kb=rb.dtype):(rb=T.getBuffer(ka))?kb=rb.dtype:"constant"in ka?(fb=2,"number"===typeof ka.constant?(vb=ka.constant,ub=Oa=Wa=0):(vb=0<ka.constant.length?ka.constant[0]:0,ub=1<ka.constant.length?ka.constant[1]:0,Oa=2<ka.constant.length?ka.constant[2]:0,Wa=3<ka.constant.length?ka.constant[3]:0)):(rb=K(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),kb="type"in ka?
wa[ka.type]:rb.dtype,tb=!!ka.normalized,eb=ka.size|0,Ka=ka.offset|0,La=ka.stride|0,Ja=ka.divisor|0);Cc=n.buffer;n.buffer=rb;Ra=n.divisor;n.divisor=Ja;Mb=n.normalized;n.normalized=tb;Fb=n.offset;n.offset=Ka;Ma=n.size;n.size=eb;Cd=n.state;n.state=fb;Za=n.stride;n.stride=La;Nb=n.type;n.type=kb;Ob=n.w;n.w=Wa;nb=n.x;n.x=vb;Na=n.y;n.y=ub;ac=n.z;n.z=Oa;Qa=this.position;wb=!1;xb=null;Ta=0;ob=!1;Ac=hc=0;vc=1;bb=0;kc=5126;Bb=kd=Xa=Rc=0;K(Qa)?(wb=!0,xb=T.createStream(34962,Qa),kc=xb.dtype):(xb=T.getBuffer(Qa))?
kc=xb.dtype:"constant"in Qa?(vc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,kd=Bb=Rc=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,kd=1<Qa.constant.length?Qa.constant[1]:0,Bb=2<Qa.constant.length?Qa.constant[2]:0,Rc=3<Qa.constant.length?Qa.constant[3]:0)):(xb=K(Qa.buffer)?T.createStream(34962,Qa.buffer):T.getBuffer(Qa.buffer),kc="type"in Qa?wa[Qa.type]:xb.dtype,ob=!!Qa.normalized,Ac=Qa.size|0,hc=Qa.offset|0,bb=Qa.stride|0,Ta=Qa.divisor|0);$a=aa.buffer;aa.buffer=xb;Xb=aa.divisor;aa.divisor=Ta;tc=
aa.normalized;aa.normalized=ob;Yb=aa.offset;aa.offset=hc;Sb=aa.size;aa.size=Ac;Kc=aa.state;aa.state=vc;Tb=aa.stride;aa.stride=bb;zd=aa.type;aa.type=kc;Ec=aa.w;aa.w=Rc;pd=aa.x;aa.x=Xa;Mc=aa.y;aa.y=kd;Xc=aa.z;aa.z=Bb;Y.buffer=this.sizeBuffer;ud=!1;oc=null;wc=0;ic=!1;sc=db=0;Vb=1;Zb=0;ec=5126;bd=Bc=yc=jc=0;K(Y)?(ud=!0,oc=T.createStream(34962,Y),ec=oc.dtype):(oc=T.getBuffer(Y))?ec=oc.dtype:"constant"in Y?(Vb=2,"number"===typeof Y.constant?(yc=Y.constant,Bc=bd=jc=0):(yc=0<Y.constant.length?Y.constant[0]:
0,Bc=1<Y.constant.length?Y.constant[1]:0,bd=2<Y.constant.length?Y.constant[2]:0,jc=3<Y.constant.length?Y.constant[3]:0)):(oc=K(Y.buffer)?T.createStream(34962,Y.buffer):T.getBuffer(Y.buffer),ec="type"in Y?wa[Y.type]:oc.dtype,ic=!!Y.normalized,sc=Y.size|0,db=Y.offset|0,Zb=Y.stride|0,wc=Y.divisor|0);Pc=q.buffer;q.buffer=oc;Qc=q.divisor;q.divisor=wc;Sc=q.normalized;q.normalized=ic;Yc=q.offset;q.offset=db;ld=q.size;q.size=sc;cd=q.state;q.state=Vb;Zc=q.stride;q.stride=Zb;lc=q.type;q.type=ec;dc=q.w;q.w=
jc;$c=q.x;q.x=yc;Uc=q.y;q.y=Bc;dd=q.z;q.z=bd;zc=U.vert;U.vert=61;hd=U.frag;U.frag=60;x.dirty=!0;c(N,a,b);N.viewportWidth=A;N.viewportHeight=h;ra[0]=z;ra[1]=u;ra[2]=t;ra[3]=R;Ba[0]=w;Ba[1]=y;Ba[2]=ha;Ba[3]=sa;ea.blend_enable=va;ja[0]=Ga;ja[1]=B;ja[2]=D;ja[3]=S;ea.depth_enable=C;ea.stencil_enable=G;E&&(e.cpuTime+=performance.now()-da);P.offset=zb;P.count=J;P.primitive=Pa;ma[64]=Q;ma[69]=ua;ma[67]=qa;ma[66]=W;ma[65]=V;ma[62]=Aa;ma[14]=Z;ma[63]=ga;ma[10]=H;ma[68]=oa;ma[6]=Fa;ma[8]=la;ma[3]=mb;ia&&T.destroyStream(Jc);
I.buffer=jb;I.divisor=Hb;I.normalized=Eb;I.offset=yb;I.size=hb;I.state=$b;I.stride=Rb;I.type=sb;I.w=Ua;I.x=Wb;I.y=qb;I.z=cc;ib&&T.destroyStream(rb);n.buffer=Cc;n.divisor=Ra;n.normalized=Mb;n.offset=Fb;n.size=Ma;n.state=Cd;n.stride=Za;n.type=Nb;n.w=Ob;n.x=nb;n.y=Na;n.z=ac;wb&&T.destroyStream(xb);aa.buffer=$a;aa.divisor=Xb;aa.normalized=tc;aa.offset=Yb;aa.size=Sb;aa.state=Kc;aa.stride=Tb;aa.type=zd;aa.w=Ec;aa.x=pd;aa.y=Mc;aa.z=Xc;ud&&T.destroyStream(oc);q.buffer=Pc;q.divisor=Qc;q.normalized=Sc;q.offset=
Yc;q.size=ld;q.state=cd;q.stride=Zc;q.type=lc;q.w=dc;q.x=$c;q.y=Uc;q.z=dd;U.vert=zc;U.frag=hd;x.dirty=!0}}},$2:function(a,e,t){var p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,Aa,f,w,ba,E,W,D,y,L,G,B,m,Z;p=a.attributes;h=a.current;d=a.framebuffer;c=a.gl;b=a.next;l=a.vao;r=b.blend_color;v=h.blend_color;k=b.blend_equation;F=h.blend_equation;I=b.blend_func;n=h.blend_func;aa=b.colorMask;q=h.colorMask;J=b.depth_range;C=h.depth_range;M=b.polygonOffset_offset;Aa=h.polygonOffset_offset;f=b.sample_coverage;w=h.sample_coverage;
ba=b.scissor_box;E=h.scissor_box;W=b.stencil_func;D=h.stencil_func;y=b.stencil_opBack;L=h.stencil_opBack;G=b.stencil_opFront;B=h.stencil_opFront;m=b.viewport;Z=h.viewport;return{poll:function(){var a,e,p,t,l,V,X,S,T,N,x,P,O,pa,H,z,K,ea,U,ma,qa,Ba;h.dirty=!1;e=b.blend_enable;p=b.cull_enable;t=b.depth_enable;l=b.dither;V=b.polygonOffset_enable;X=b.sample_alpha;S=b.sample_enable;T=b.scissor_enable;N=b.stencil_enable;x=b.cull_face;P=h.cull_face;O=b.depth_func;pa=h.depth_func;H=b.depth_mask;z=h.depth_mask;
K=b.frontFace;ea=h.frontFace;U=b.lineWidth;ma=h.lineWidth;qa=b.stencil_mask;Ba=h.stencil_mask;a=d.next;a!==d.cur&&(a?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null),d.cur=a);e!==h.blend_enable&&(e?c.enable(3042):c.disable(3042),h.blend_enable=e);p!==h.cull_enable&&(p?c.enable(2884):c.disable(2884),h.cull_enable=p);t!==h.depth_enable&&(t?c.enable(2929):c.disable(2929),h.depth_enable=t);l!==h.dither&&(l?c.enable(3024):c.disable(3024),h.dither=l);V!==h.polygonOffset_enable&&(V?c.enable(32823):
c.disable(32823),h.polygonOffset_enable=V);X!==h.sample_alpha&&(X?c.enable(32926):c.disable(32926),h.sample_alpha=X);S!==h.sample_enable&&(S?c.enable(32928):c.disable(32928),h.sample_enable=S);T!==h.scissor_enable&&(T?c.enable(3089):c.disable(3089),h.scissor_enable=T);N!==h.stencil_enable&&(N?c.enable(2960):c.disable(2960),h.stencil_enable=N);if(r[0]!==v[0]||r[1]!==v[1]||r[2]!==v[2]||r[3]!==v[3])c.blendColor(r[0],r[1],r[2],r[3]),v[0]=r[0],v[1]=r[1],v[2]=r[2],v[3]=r[3];if(k[0]!==F[0]||k[1]!==F[1])c.blendEquationSeparate(k[0],
k[1]),F[0]=k[0],F[1]=k[1];if(I[0]!==n[0]||I[1]!==n[1]||I[2]!==n[2]||I[3]!==n[3])c.blendFuncSeparate(I[0],I[1],I[2],I[3]),n[0]=I[0],n[1]=I[1],n[2]=I[2],n[3]=I[3];if(aa[0]!==q[0]||aa[1]!==q[1]||aa[2]!==q[2]||aa[3]!==q[3])c.colorMask(aa[0],aa[1],aa[2],aa[3]),q[0]=aa[0],q[1]=aa[1],q[2]=aa[2],q[3]=aa[3];x!==P&&(c.cullFace(x),h.cull_face=x);O!==pa&&(c.depthFunc(O),h.depth_func=O);H!==z&&(c.depthMask(H),h.depth_mask=H);if(J[0]!==C[0]||J[1]!==C[1])c.depthRange(J[0],J[1]),C[0]=J[0],C[1]=J[1];K!==ea&&(c.frontFace(K),
h.frontFace=K);U!==ma&&(c.lineWidth(U),h.lineWidth=U);if(M[0]!==Aa[0]||M[1]!==Aa[1])c.polygonOffset(M[0],M[1]),Aa[0]=M[0],Aa[1]=M[1];if(f[0]!==w[0]||f[1]!==w[1])c.sampleCoverage(f[0],f[1]),w[0]=f[0],w[1]=f[1];if(ba[0]!==E[0]||ba[1]!==E[1]||ba[2]!==E[2]||ba[3]!==E[3])c.scissor(ba[0],ba[1],ba[2],ba[3]),E[0]=ba[0],E[1]=ba[1],E[2]=ba[2],E[3]=ba[3];if(W[0]!==D[0]||W[1]!==D[1]||W[2]!==D[2])c.stencilFunc(W[0],W[1],W[2]),D[0]=W[0],D[1]=W[1],D[2]=W[2];qa!==Ba&&(c.stencilMask(qa),h.stencil_mask=qa);if(y[0]!==
L[0]||y[1]!==L[1]||y[2]!==L[2]||y[3]!==L[3])c.stencilOpSeparate(y[0],y[1],y[2],y[3]),L[0]=y[0],L[1]=y[1],L[2]=y[2],L[3]=y[3];if(G[0]!==B[0]||G[1]!==B[1]||G[2]!==B[2]||G[3]!==B[3])c.stencilOpSeparate(G[0],G[1],G[2],G[3]),B[0]=G[0],B[1]=G[1],B[2]=G[2],B[3]=G[3];if(m[0]!==Z[0]||m[1]!==Z[1]||m[2]!==Z[2]||m[3]!==Z[3])c.viewport(m[0],m[1],m[2],m[3]),Z[0]=m[0],Z[1]=m[1],Z[2]=m[2],Z[3]=m[3]},refresh:function(){var a,e,t,ga,H,V,X,S,T,N,x,P,O,pa,oa,z;h.dirty=!1;e=b.blend_enable;t=b.cull_enable;ga=b.depth_enable;
H=b.dither;V=b.polygonOffset_enable;X=b.sample_alpha;S=b.sample_enable;T=b.scissor_enable;N=b.stencil_enable;x=b.cull_face;P=b.depth_func;O=b.depth_mask;pa=b.frontFace;oa=b.lineWidth;z=b.stencil_mask;(a=d.next)?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null);d.cur=a;a=p[0];a.buffer?(c.enableVertexAttribArray(0),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(0),c.vertexAttrib4f(0,a.x,a.y,a.z,
a.w),a.buffer=null);a=p[1];a.buffer?(c.enableVertexAttribArray(1),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(1),c.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=p[2];a.buffer?(c.enableVertexAttribArray(2),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(2),c.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=p[3];a.buffer?
(c.enableVertexAttribArray(3),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(3),c.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=p[4];a.buffer?(c.enableVertexAttribArray(4),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(4),c.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=p[5];a.buffer?(c.enableVertexAttribArray(5),c.bindBuffer(34962,
a.buffer.buffer),c.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(5),c.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=p[6];a.buffer?(c.enableVertexAttribArray(6),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(6),c.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=p[7];a.buffer?(c.enableVertexAttribArray(7),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(7,
a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(7),c.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=p[8];a.buffer?(c.enableVertexAttribArray(8),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(8),c.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=p[9];a.buffer?(c.enableVertexAttribArray(9),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,
a.offset)):(c.disableVertexAttribArray(9),c.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=p[10];a.buffer?(c.enableVertexAttribArray(10),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(10),c.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=p[11];a.buffer?(c.enableVertexAttribArray(11),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(11),
c.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=p[12];a.buffer?(c.enableVertexAttribArray(12),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(12),c.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=p[13];a.buffer?(c.enableVertexAttribArray(13),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(13),c.vertexAttrib4f(13,a.x,
a.y,a.z,a.w),a.buffer=null);a=p[14];a.buffer?(c.enableVertexAttribArray(14),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(14),c.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=p[15];a.buffer?(c.enableVertexAttribArray(15),c.bindBuffer(34962,a.buffer.buffer),c.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(c.disableVertexAttribArray(15),c.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=
null);l.currentVAO=null;l.setVAO(l.targetVAO);e?c.enable(3042):c.disable(3042);h.blend_enable=e;t?c.enable(2884):c.disable(2884);h.cull_enable=t;ga?c.enable(2929):c.disable(2929);h.depth_enable=ga;H?c.enable(3024):c.disable(3024);h.dither=H;V?c.enable(32823):c.disable(32823);h.polygonOffset_enable=V;X?c.enable(32926):c.disable(32926);h.sample_alpha=X;S?c.enable(32928):c.disable(32928);h.sample_enable=S;T?c.enable(3089):c.disable(3089);h.scissor_enable=T;N?c.enable(2960):c.disable(2960);h.stencil_enable=
N;c.blendColor(r[0],r[1],r[2],r[3]);v[0]=r[0];v[1]=r[1];v[2]=r[2];v[3]=r[3];c.blendEquationSeparate(k[0],k[1]);F[0]=k[0];F[1]=k[1];c.blendFuncSeparate(I[0],I[1],I[2],I[3]);n[0]=I[0];n[1]=I[1];n[2]=I[2];n[3]=I[3];c.colorMask(aa[0],aa[1],aa[2],aa[3]);q[0]=aa[0];q[1]=aa[1];q[2]=aa[2];q[3]=aa[3];c.cullFace(x);h.cull_face=x;c.depthFunc(P);h.depth_func=P;c.depthMask(O);h.depth_mask=O;c.depthRange(J[0],J[1]);C[0]=J[0];C[1]=J[1];c.frontFace(pa);h.frontFace=pa;c.lineWidth(oa);h.lineWidth=oa;c.polygonOffset(M[0],
M[1]);Aa[0]=M[0];Aa[1]=M[1];c.sampleCoverage(f[0],f[1]);w[0]=f[0];w[1]=f[1];c.scissor(ba[0],ba[1],ba[2],ba[3]);E[0]=ba[0];E[1]=ba[1];E[2]=ba[2];E[3]=ba[3];c.stencilFunc(W[0],W[1],W[2]);D[0]=W[0];D[1]=W[1];D[2]=W[2];c.stencilMask(z);h.stencil_mask=z;c.stencilOpSeparate(y[0],y[1],y[2],y[3]);L[0]=y[0];L[1]=y[1];L[2]=y[2];L[3]=y[3];c.stencilOpSeparate(G[0],G[1],G[2],G[3]);B[0]=G[0];B[1]=G[1];B[2]=G[2];B[3]=G[3];c.viewport(m[0],m[1],m[2],m[3]);Z[0]=m[0];Z[1]=m[1];Z[2]=m[2];Z[3]=m[3]}}},$7:function(a,e,
t,p,h,d,c,b){var l,r,v,k,F,I,n,aa,q,J,C,M,L,f,w,ba,E,W,D,y,H,G,B,m,Z,g,la,Q,ga,Ea,V,X,S;l=a.context;r=a.current;v=a.framebuffer;k=a.gl;F=a.next;I=a.shader;n=a.vao;aa=F.blend_color;q=r.blend_color;J=F.blend_equation;C=r.blend_equation;M=F.blend_func;L=r.blend_func;f=F.colorMask;w=r.colorMask;ba=F.depth_range;E=r.depth_range;W=F.polygonOffset_offset;D=r.polygonOffset_offset;y=F.sample_coverage;H=r.sample_coverage;G=F.scissor_box;B=r.scissor_box;m=F.stencil_func;Z=r.stencil_func;g=F.stencil_opBack;la=
r.stencil_opBack;Q=F.stencil_opFront;ga=r.stencil_opFront;Ea=F.viewport;V=r.viewport;X={};S={};return{draw:function(a){var c,b,S,G,pa,oa,z,K,ea,U;c=a.framebuffer;b=v.getFramebuffer(c);c&&!b&&e.commandRaise(h,t);c=v.next;v.next=b;S=l.framebufferWidth;l.framebufferWidth=b?b.width:l.drawingBufferWidth;G=l.framebufferHeight;l.framebufferHeight=b?b.height:l.drawingBufferHeight;b!==v.cur&&(b?k.bindFramebuffer(36160,b.framebuffer):k.bindFramebuffer(36160,null),v.cur=b);if(r.dirty){b=F.dither;b!==r.dither&&
(b?k.enable(3024):k.disable(3024),r.dither=b);b=F.blend_enable;b!==r.blend_enable&&(b?k.enable(3042):k.disable(3042),r.blend_enable=b);b=aa[0];z=aa[1];pa=aa[2];oa=aa[3];if(b!==q[0]||z!==q[1]||pa!==q[2]||oa!==q[3])k.blendColor(b,z,pa,oa),q[0]=b,q[1]=z,q[2]=pa,q[3]=oa;b=J[0];z=J[1];if(b!==C[0]||z!==C[1])k.blendEquationSeparate(b,z),C[0]=b,C[1]=z;b=M[0];z=M[1];pa=M[2];oa=M[3];if(b!==L[0]||z!==L[1]||pa!==L[2]||oa!==L[3])k.blendFuncSeparate(b,z,pa,oa),L[0]=b,L[1]=z,L[2]=pa,L[3]=oa;b=F.depth_enable;b!==
r.depth_enable&&(b?k.enable(2929):k.disable(2929),r.depth_enable=b);b=F.depth_func;b!==r.depth_func&&(k.depthFunc(b),r.depth_func=b);b=ba[0];z=ba[1];if(b!==E[0]||z!==E[1])k.depthRange(b,z),E[0]=b,E[1]=z;b=F.depth_mask;b!==r.depth_mask&&(k.depthMask(b),r.depth_mask=b);b=f[0];z=f[1];pa=f[2];oa=f[3];if(b!==w[0]||z!==w[1]||pa!==w[2]||oa!==w[3])k.colorMask(b,z,pa,oa),w[0]=b,w[1]=z,w[2]=pa,w[3]=oa;b=F.cull_enable;b!==r.cull_enable&&(b?k.enable(2884):k.disable(2884),r.cull_enable=b);b=F.cull_face;b!==r.cull_face&&
(k.cullFace(b),r.cull_face=b);b=F.frontFace;b!==r.frontFace&&(k.frontFace(b),r.frontFace=b);b=F.lineWidth;b!==r.lineWidth&&(k.lineWidth(b),r.lineWidth=b);b=F.polygonOffset_enable;b!==r.polygonOffset_enable&&(b?k.enable(32823):k.disable(32823),r.polygonOffset_enable=b);b=W[0];z=W[1];if(b!==D[0]||z!==D[1])k.polygonOffset(b,z),D[0]=b,D[1]=z;b=F.sample_alpha;b!==r.sample_alpha&&(b?k.enable(32926):k.disable(32926),r.sample_alpha=b);b=F.sample_enable;b!==r.sample_enable&&(b?k.enable(32928):k.disable(32928),
r.sample_enable=b);b=y[0];z=y[1];if(b!==H[0]||z!==H[1])k.sampleCoverage(b,z),H[0]=b,H[1]=z;b=F.stencil_enable;b!==r.stencil_enable&&(b?k.enable(2960):k.disable(2960),r.stencil_enable=b);b=F.stencil_mask;b!==r.stencil_mask&&(k.stencilMask(b),r.stencil_mask=b);b=m[0];z=m[1];pa=m[2];if(b!==Z[0]||z!==Z[1]||pa!==Z[2])k.stencilFunc(b,z,pa),Z[0]=b,Z[1]=z,Z[2]=pa;b=Q[0];z=Q[1];pa=Q[2];oa=Q[3];if(b!==ga[0]||z!==ga[1]||pa!==ga[2]||oa!==ga[3])k.stencilOpSeparate(b,z,pa,oa),ga[0]=b,ga[1]=z,ga[2]=pa,ga[3]=oa;
b=g[0];z=g[1];pa=g[2];oa=g[3];if(b!==la[0]||z!==la[1]||pa!==la[2]||oa!==la[3])k.stencilOpSeparate(b,z,pa,oa),la[0]=b,la[1]=z,la[2]=pa,la[3]=oa;b=F.scissor_enable;b!==r.scissor_enable&&(b?k.enable(3089):k.disable(3089),r.scissor_enable=b)}pa=l.framebufferWidth;oa=l.framebufferHeight;b=l.viewportWidth;l.viewportWidth=pa;z=l.viewportHeight;l.viewportHeight=oa;k.viewport(0,0,pa,oa);V[0]=0;V[1]=0;V[2]=pa;V[3]=oa;pa=l.framebufferWidth;oa=l.framebufferHeight;k.scissor(0,0,pa,oa);B[0]=0;B[1]=0;B[2]=pa;B[3]=
oa;if(pa=r.profile)K=performance.now(),p.count++;oa=I.program(I.vert,I.frag,t);k.useProgram(oa.program);n.setVAO(null);ea=oa.id;(U=X[ea])||(U=X[ea]=d(oa));U.call(this,a);r.dirty=!0;n.setVAO(null);v.next=c;l.framebufferWidth=S;l.framebufferHeight=G;l.viewportWidth=b;l.viewportHeight=z;pa&&(p.cpuTime+=performance.now()-K)},scope:function(a,b,d){var g,f,m,h,z,k,w,y,q,B,n,D,S,F,C;g=a.framebuffer;f=v.getFramebuffer(g);g&&!f&&e.commandRaise(c,t);g=v.next;v.next=f;m=l.framebufferWidth;l.framebufferWidth=
f?f.width:l.drawingBufferWidth;h=l.framebufferHeight;l.framebufferHeight=f?f.height:l.drawingBufferHeight;z=l.framebufferWidth;k=l.framebufferHeight;f=l.viewportWidth;l.viewportWidth=z;w=l.viewportHeight;l.viewportHeight=k;y=Ea[0];Ea[0]=0;q=Ea[1];Ea[1]=0;B=Ea[2];Ea[2]=z;z=Ea[3];Ea[3]=k;n=l.framebufferWidth;D=l.framebufferHeight;k=G[0];G[0]=0;S=G[1];G[1]=0;F=G[2];G[2]=n;n=G[3];G[3]=D;if(D=r.profile)C=performance.now(),p.count++;r.dirty=!0;b(l,a,d);v.next=g;l.framebufferWidth=m;l.framebufferHeight=
h;l.viewportWidth=f;l.viewportHeight=w;Ea[0]=y;Ea[1]=q;Ea[2]=B;Ea[3]=z;G[0]=k;G[1]=S;G[2]=F;G[3]=n;D&&(p.cpuTime+=performance.now()-C);r.dirty=!0},batch:function(a,c){var d,e,h,l,v;if(r.dirty){d=F.dither;d!==r.dither&&(d?k.enable(3024):k.disable(3024),r.dither=d);d=F.blend_enable;d!==r.blend_enable&&(d?k.enable(3042):k.disable(3042),r.blend_enable=d);d=aa[0];h=aa[1];l=aa[2];v=aa[3];if(d!==q[0]||h!==q[1]||l!==q[2]||v!==q[3])k.blendColor(d,h,l,v),q[0]=d,q[1]=h,q[2]=l,q[3]=v;d=J[0];h=J[1];if(d!==C[0]||
h!==C[1])k.blendEquationSeparate(d,h),C[0]=d,C[1]=h;d=M[0];h=M[1];l=M[2];v=M[3];if(d!==L[0]||h!==L[1]||l!==L[2]||v!==L[3])k.blendFuncSeparate(d,h,l,v),L[0]=d,L[1]=h,L[2]=l,L[3]=v;d=F.depth_enable;d!==r.depth_enable&&(d?k.enable(2929):k.disable(2929),r.depth_enable=d);d=F.depth_func;d!==r.depth_func&&(k.depthFunc(d),r.depth_func=d);d=ba[0];h=ba[1];if(d!==E[0]||h!==E[1])k.depthRange(d,h),E[0]=d,E[1]=h;d=F.depth_mask;d!==r.depth_mask&&(k.depthMask(d),r.depth_mask=d);d=f[0];h=f[1];l=f[2];v=f[3];if(d!==
w[0]||h!==w[1]||l!==w[2]||v!==w[3])k.colorMask(d,h,l,v),w[0]=d,w[1]=h,w[2]=l,w[3]=v;d=F.cull_enable;d!==r.cull_enable&&(d?k.enable(2884):k.disable(2884),r.cull_enable=d);d=F.cull_face;d!==r.cull_face&&(k.cullFace(d),r.cull_face=d);d=F.frontFace;d!==r.frontFace&&(k.frontFace(d),r.frontFace=d);d=F.lineWidth;d!==r.lineWidth&&(k.lineWidth(d),r.lineWidth=d);d=F.polygonOffset_enable;d!==r.polygonOffset_enable&&(d?k.enable(32823):k.disable(32823),r.polygonOffset_enable=d);d=W[0];h=W[1];if(d!==D[0]||h!==
D[1])k.polygonOffset(d,h),D[0]=d,D[1]=h;d=F.sample_alpha;d!==r.sample_alpha&&(d?k.enable(32926):k.disable(32926),r.sample_alpha=d);d=F.sample_enable;d!==r.sample_enable&&(d?k.enable(32928):k.disable(32928),r.sample_enable=d);d=y[0];h=y[1];if(d!==H[0]||h!==H[1])k.sampleCoverage(d,h),H[0]=d,H[1]=h;d=F.stencil_enable;d!==r.stencil_enable&&(d?k.enable(2960):k.disable(2960),r.stencil_enable=d);d=F.stencil_mask;d!==r.stencil_mask&&(k.stencilMask(d),r.stencil_mask=d);d=m[0];h=m[1];l=m[2];if(d!==Z[0]||h!==
Z[1]||l!==Z[2])k.stencilFunc(d,h,l),Z[0]=d,Z[1]=h,Z[2]=l;d=Q[0];h=Q[1];l=Q[2];v=Q[3];if(d!==ga[0]||h!==ga[1]||l!==ga[2]||v!==ga[3])k.stencilOpSeparate(d,h,l,v),ga[0]=d,ga[1]=h,ga[2]=l,ga[3]=v;d=g[0];h=g[1];l=g[2];v=g[3];if(d!==la[0]||h!==la[1]||l!==la[2]||v!==la[3])k.stencilOpSeparate(d,h,l,v),la[0]=d,la[1]=h,la[2]=l,la[3]=v;d=F.scissor_enable;d!==r.scissor_enable&&(d?k.enable(3089):k.disable(3089),r.scissor_enable=d)}if(d=r.profile)e=performance.now(),p.count+=c;h=I.program(I.vert,I.frag,t);k.useProgram(h.program);
n.setVAO(null);l=h.id;(v=S[l])||(v=S[l]=b(h));v.call(this,a,c);r.dirty=!0;n.setVAO(null);d&&(p.cpuTime+=performance.now()-e)}}},$5:function(a,e,t,p,h,d){var c,b,l,r,v,k,F,I,n,aa,q,J,C,M,L,f,w,ba,E,W,D,y,H,G,B,m,Z,g,la,Q,ga,Ea,V;c=a.context;b=a.current;l=a.framebuffer;r=a.gl;v=a.next;k=a.shader;F=a.vao;I=v.blend_color;n=b.blend_color;aa=v.blend_equation;q=b.blend_equation;J=v.blend_func;C=b.blend_func;M=v.colorMask;L=b.colorMask;f=v.depth_range;w=b.depth_range;ba=v.polygonOffset_offset;E=b.polygonOffset_offset;
W=v.sample_coverage;D=b.sample_coverage;y=v.scissor_box;H=b.scissor_box;G=v.stencil_func;B=b.stencil_func;m=v.stencil_opBack;Z=b.stencil_opBack;g=v.stencil_opFront;la=b.stencil_opFront;Q=v.viewport;ga=b.viewport;Ea={};V={};return{draw:function(a){var c,d,e,x,P;c=l.next;c!==l.cur&&(c?r.bindFramebuffer(36160,c.framebuffer):r.bindFramebuffer(36160,null),l.cur=c);if(b.dirty){c=v.dither;c!==b.dither&&(c?r.enable(3024):r.disable(3024),b.dither=c);c=v.blend_enable;c!==b.blend_enable&&(c?r.enable(3042):r.disable(3042),
b.blend_enable=c);c=I[0];e=I[1];x=I[2];P=I[3];if(c!==n[0]||e!==n[1]||x!==n[2]||P!==n[3])r.blendColor(c,e,x,P),n[0]=c,n[1]=e,n[2]=x,n[3]=P;c=aa[0];e=aa[1];if(c!==q[0]||e!==q[1])r.blendEquationSeparate(c,e),q[0]=c,q[1]=e;c=J[0];e=J[1];x=J[2];P=J[3];if(c!==C[0]||e!==C[1]||x!==C[2]||P!==C[3])r.blendFuncSeparate(c,e,x,P),C[0]=c,C[1]=e,C[2]=x,C[3]=P;c=v.depth_enable;c!==b.depth_enable&&(c?r.enable(2929):r.disable(2929),b.depth_enable=c);c=v.depth_func;c!==b.depth_func&&(r.depthFunc(c),b.depth_func=c);c=
f[0];e=f[1];if(c!==w[0]||e!==w[1])r.depthRange(c,e),w[0]=c,w[1]=e;c=v.depth_mask;c!==b.depth_mask&&(r.depthMask(c),b.depth_mask=c);c=M[0];e=M[1];x=M[2];P=M[3];if(c!==L[0]||e!==L[1]||x!==L[2]||P!==L[3])r.colorMask(c,e,x,P),L[0]=c,L[1]=e,L[2]=x,L[3]=P;c=v.cull_enable;c!==b.cull_enable&&(c?r.enable(2884):r.disable(2884),b.cull_enable=c);c=v.cull_face;c!==b.cull_face&&(r.cullFace(c),b.cull_face=c);c=v.frontFace;c!==b.frontFace&&(r.frontFace(c),b.frontFace=c);c=v.lineWidth;c!==b.lineWidth&&(r.lineWidth(c),
b.lineWidth=c);c=v.polygonOffset_enable;c!==b.polygonOffset_enable&&(c?r.enable(32823):r.disable(32823),b.polygonOffset_enable=c);c=ba[0];e=ba[1];if(c!==E[0]||e!==E[1])r.polygonOffset(c,e),E[0]=c,E[1]=e;c=v.sample_alpha;c!==b.sample_alpha&&(c?r.enable(32926):r.disable(32926),b.sample_alpha=c);c=v.sample_enable;c!==b.sample_enable&&(c?r.enable(32928):r.disable(32928),b.sample_enable=c);c=W[0];e=W[1];if(c!==D[0]||e!==D[1])r.sampleCoverage(c,e),D[0]=c,D[1]=e;c=v.stencil_enable;c!==b.stencil_enable&&
(c?r.enable(2960):r.disable(2960),b.stencil_enable=c);c=v.stencil_mask;c!==b.stencil_mask&&(r.stencilMask(c),b.stencil_mask=c);c=G[0];e=G[1];x=G[2];if(c!==B[0]||e!==B[1]||x!==B[2])r.stencilFunc(c,e,x),B[0]=c,B[1]=e,B[2]=x;c=g[0];e=g[1];x=g[2];P=g[3];if(c!==la[0]||e!==la[1]||x!==la[2]||P!==la[3])r.stencilOpSeparate(c,e,x,P),la[0]=c,la[1]=e,la[2]=x,la[3]=P;c=m[0];e=m[1];x=m[2];P=m[3];if(c!==Z[0]||e!==Z[1]||x!==Z[2]||P!==Z[3])r.stencilOpSeparate(c,e,x,P),Z[0]=c,Z[1]=e,Z[2]=x,Z[3]=P;c=v.scissor_enable;
c!==b.scissor_enable&&(c?r.enable(3089):r.disable(3089),b.scissor_enable=c);c=y[0];e=y[1];x=y[2];P=y[3];if(c!==H[0]||e!==H[1]||x!==H[2]||P!==H[3])r.scissor(c,e,x,P),H[0]=c,H[1]=e,H[2]=x,H[3]=P;c=Q[0];e=Q[1];x=Q[2];P=Q[3];if(c!==ga[0]||e!==ga[1]||x!==ga[2]||P!==ga[3])r.viewport(c,e,x,P),ga[0]=c,ga[1]=e,ga[2]=x,ga[3]=P;b.dirty=!1}if(c=b.profile)d=performance.now(),p.count++;e=k.program(k.vert,k.frag,t);r.useProgram(e.program);F.setVAO(null);x=e.id;(P=Ea[x])||(P=Ea[x]=h(e));P.call(this,a);F.setVAO(null);
c&&(p.cpuTime+=performance.now()-d)},scope:function(a,d,g){var f,e;if(f=b.profile)e=performance.now(),p.count++;d(c,a,g);f&&(p.cpuTime+=performance.now()-e)},batch:function(a,c){var e,h,x,P,O;e=l.next;e!==l.cur&&(e?r.bindFramebuffer(36160,e.framebuffer):r.bindFramebuffer(36160,null),l.cur=e);if(b.dirty){e=v.dither;e!==b.dither&&(e?r.enable(3024):r.disable(3024),b.dither=e);e=v.blend_enable;e!==b.blend_enable&&(e?r.enable(3042):r.disable(3042),b.blend_enable=e);e=I[0];x=I[1];P=I[2];O=I[3];if(e!==n[0]||
x!==n[1]||P!==n[2]||O!==n[3])r.blendColor(e,x,P,O),n[0]=e,n[1]=x,n[2]=P,n[3]=O;e=aa[0];x=aa[1];if(e!==q[0]||x!==q[1])r.blendEquationSeparate(e,x),q[0]=e,q[1]=x;e=J[0];x=J[1];P=J[2];O=J[3];if(e!==C[0]||x!==C[1]||P!==C[2]||O!==C[3])r.blendFuncSeparate(e,x,P,O),C[0]=e,C[1]=x,C[2]=P,C[3]=O;e=v.depth_enable;e!==b.depth_enable&&(e?r.enable(2929):r.disable(2929),b.depth_enable=e);e=v.depth_func;e!==b.depth_func&&(r.depthFunc(e),b.depth_func=e);e=f[0];x=f[1];if(e!==w[0]||x!==w[1])r.depthRange(e,x),w[0]=e,
w[1]=x;e=v.depth_mask;e!==b.depth_mask&&(r.depthMask(e),b.depth_mask=e);e=M[0];x=M[1];P=M[2];O=M[3];if(e!==L[0]||x!==L[1]||P!==L[2]||O!==L[3])r.colorMask(e,x,P,O),L[0]=e,L[1]=x,L[2]=P,L[3]=O;e=v.cull_enable;e!==b.cull_enable&&(e?r.enable(2884):r.disable(2884),b.cull_enable=e);e=v.cull_face;e!==b.cull_face&&(r.cullFace(e),b.cull_face=e);e=v.frontFace;e!==b.frontFace&&(r.frontFace(e),b.frontFace=e);e=v.lineWidth;e!==b.lineWidth&&(r.lineWidth(e),b.lineWidth=e);e=v.polygonOffset_enable;e!==b.polygonOffset_enable&&
(e?r.enable(32823):r.disable(32823),b.polygonOffset_enable=e);e=ba[0];x=ba[1];if(e!==E[0]||x!==E[1])r.polygonOffset(e,x),E[0]=e,E[1]=x;e=v.sample_alpha;e!==b.sample_alpha&&(e?r.enable(32926):r.disable(32926),b.sample_alpha=e);e=v.sample_enable;e!==b.sample_enable&&(e?r.enable(32928):r.disable(32928),b.sample_enable=e);e=W[0];x=W[1];if(e!==D[0]||x!==D[1])r.sampleCoverage(e,x),D[0]=e,D[1]=x;e=v.stencil_enable;e!==b.stencil_enable&&(e?r.enable(2960):r.disable(2960),b.stencil_enable=e);e=v.stencil_mask;
e!==b.stencil_mask&&(r.stencilMask(e),b.stencil_mask=e);e=G[0];x=G[1];P=G[2];if(e!==B[0]||x!==B[1]||P!==B[2])r.stencilFunc(e,x,P),B[0]=e,B[1]=x,B[2]=P;e=g[0];x=g[1];P=g[2];O=g[3];if(e!==la[0]||x!==la[1]||P!==la[2]||O!==la[3])r.stencilOpSeparate(e,x,P,O),la[0]=e,la[1]=x,la[2]=P,la[3]=O;e=m[0];x=m[1];P=m[2];O=m[3];if(e!==Z[0]||x!==Z[1]||P!==Z[2]||O!==Z[3])r.stencilOpSeparate(e,x,P,O),Z[0]=e,Z[1]=x,Z[2]=P,Z[3]=O;e=v.scissor_enable;e!==b.scissor_enable&&(e?r.enable(3089):r.disable(3089),b.scissor_enable=
e);e=y[0];x=y[1];P=y[2];O=y[3];if(e!==H[0]||x!==H[1]||P!==H[2]||O!==H[3])r.scissor(e,x,P,O),H[0]=e,H[1]=x,H[2]=P,H[3]=O;e=Q[0];x=Q[1];P=Q[2];O=Q[3];if(e!==ga[0]||x!==ga[1]||P!==ga[2]||O!==ga[3])r.viewport(e,x,P,O),ga[0]=e,ga[1]=x,ga[2]=P,ga[3]=O;b.dirty=!1}if(e=b.profile)h=performance.now(),p.count+=c;x=k.program(k.vert,k.frag,t);r.useProgram(x.program);F.setVAO(null);P=x.id;(O=V[P])||(O=V[P]=d(x));O.call(this,a,c);F.setVAO(null);e&&(p.cpuTime+=performance.now()-h)}}},"$26,color,freq,phase,projection,time,view":function(a,
e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,L,f,w,ba,E,W,D,y,H,G,B,m,Z){var g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib,fa;g=a.attributes;la=a.context;Q=a.current;ga=a.draw;Ea=a.elements;V=a.framebuffer;X=a.gl;S=a.isArrayLike;T=a.next;N=a.shader;x=a.uniforms;P=a.vao;O=T.blend_color;pa=Q.blend_color;oa=T.blend_equation;z=Q.blend_equation;K=T.blend_func;ea=Q.blend_func;U=T.colorMask;ma=Q.colorMask;qa=T.depth_range;Ba=Q.depth_range;ya=T.polygonOffset_offset;
da=Q.polygonOffset_offset;Ca=T.sample_coverage;ja=Q.sample_coverage;na=T.scissor_box;za=Q.scissor_box;Pa=T.stencil_func;sa=Q.stencil_func;zb=T.stencil_opBack;Ya=Q.stencil_opBack;A=T.stencil_opFront;u=Q.stencil_opFront;ha=T.viewport;ua=Q.viewport;Fa=new Float32Array(16);mb=new Float32Array(16);Ib=new Float32Array(16);fa=new Float32Array(16);return{draw:function(a){var f,x,w,q;f=V.next;f!==V.cur&&(f?X.bindFramebuffer(36160,f.framebuffer):X.bindFramebuffer(36160,null),V.cur=f);if(Q.dirty){var n;f=T.dither;
f!==Q.dither&&(f?X.enable(3024):X.disable(3024),Q.dither=f);f=T.blend_enable;f!==Q.blend_enable&&(f?X.enable(3042):X.disable(3042),Q.blend_enable=f);f=O[0];w=O[1];q=O[2];n=O[3];if(f!==pa[0]||w!==pa[1]||q!==pa[2]||n!==pa[3])X.blendColor(f,w,q,n),pa[0]=f,pa[1]=w,pa[2]=q,pa[3]=n;f=oa[0];w=oa[1];if(f!==z[0]||w!==z[1])X.blendEquationSeparate(f,w),z[0]=f,z[1]=w;f=K[0];w=K[1];q=K[2];n=K[3];if(f!==ea[0]||w!==ea[1]||q!==ea[2]||n!==ea[3])X.blendFuncSeparate(f,w,q,n),ea[0]=f,ea[1]=w,ea[2]=q,ea[3]=n;f=T.depth_enable;
f!==Q.depth_enable&&(f?X.enable(2929):X.disable(2929),Q.depth_enable=f);f=T.depth_func;f!==Q.depth_func&&(X.depthFunc(f),Q.depth_func=f);f=qa[0];w=qa[1];if(f!==Ba[0]||w!==Ba[1])X.depthRange(f,w),Ba[0]=f,Ba[1]=w;f=T.depth_mask;f!==Q.depth_mask&&(X.depthMask(f),Q.depth_mask=f);f=U[0];w=U[1];q=U[2];n=U[3];if(f!==ma[0]||w!==ma[1]||q!==ma[2]||n!==ma[3])X.colorMask(f,w,q,n),ma[0]=f,ma[1]=w,ma[2]=q,ma[3]=n;f=T.cull_enable;f!==Q.cull_enable&&(f?X.enable(2884):X.disable(2884),Q.cull_enable=f);f=T.cull_face;
f!==Q.cull_face&&(X.cullFace(f),Q.cull_face=f);f=T.frontFace;f!==Q.frontFace&&(X.frontFace(f),Q.frontFace=f);f=T.lineWidth;f!==Q.lineWidth&&(X.lineWidth(f),Q.lineWidth=f);f=T.polygonOffset_enable;f!==Q.polygonOffset_enable&&(f?X.enable(32823):X.disable(32823),Q.polygonOffset_enable=f);f=ya[0];w=ya[1];if(f!==da[0]||w!==da[1])X.polygonOffset(f,w),da[0]=f,da[1]=w;f=T.sample_alpha;f!==Q.sample_alpha&&(f?X.enable(32926):X.disable(32926),Q.sample_alpha=f);f=T.sample_enable;f!==Q.sample_enable&&(f?X.enable(32928):
X.disable(32928),Q.sample_enable=f);f=Ca[0];w=Ca[1];if(f!==ja[0]||w!==ja[1])X.sampleCoverage(f,w),ja[0]=f,ja[1]=w;f=T.stencil_enable;f!==Q.stencil_enable&&(f?X.enable(2960):X.disable(2960),Q.stencil_enable=f);f=T.stencil_mask;f!==Q.stencil_mask&&(X.stencilMask(f),Q.stencil_mask=f);f=Pa[0];w=Pa[1];q=Pa[2];if(f!==sa[0]||w!==sa[1]||q!==sa[2])X.stencilFunc(f,w,q),sa[0]=f,sa[1]=w,sa[2]=q;f=A[0];w=A[1];q=A[2];n=A[3];if(f!==u[0]||w!==u[1]||q!==u[2]||n!==u[3])X.stencilOpSeparate(f,w,q,n),u[0]=f,u[1]=w,u[2]=
q,u[3]=n;f=zb[0];w=zb[1];q=zb[2];n=zb[3];if(f!==Ya[0]||w!==Ya[1]||q!==Ya[2]||n!==Ya[3])X.stencilOpSeparate(f,w,q,n),Ya[0]=f,Ya[1]=w,Ya[2]=q,Ya[3]=n;f=T.scissor_enable;f!==Q.scissor_enable&&(f?X.enable(3089):X.disable(3089),Q.scissor_enable=f);f=na[0];w=na[1];q=na[2];n=na[3];if(f!==za[0]||w!==za[1]||q!==za[2]||n!==za[3])X.scissor(f,w,q,n),za[0]=f,za[1]=w,za[2]=q,za[3]=n;f=ha[0];w=ha[1];q=ha[2];n=ha[3];if(f!==ua[0]||w!==ua[1]||q!==ua[2]||n!==ua[3])X.viewport(f,w,q,n),ua[0]=f,ua[1]=w,ua[2]=q,ua[3]=n;
Q.dirty=!1}if(f=Q.profile)x=performance.now(),p.count++;X.useProgram(h.program);P.setVAO(null);w=H.location;q=g[w];q.buffer||X.enableVertexAttribArray(w);if(5126!==q.type||4!==q.size||q.buffer!==d||!1!==q.normalized||0!==q.offset||44!==q.stride)X.bindBuffer(34962,d.buffer),X.vertexAttribPointer(w,4,5126,!1,44,0),q.type=5126,q.size=4,q.buffer=d,q.normalized=!1,q.offset=0,q.stride=44;w=G.location;q=g[w];q.buffer||X.enableVertexAttribArray(w);if(5126!==q.type||4!==q.size||q.buffer!==c||!1!==q.normalized||
16!==q.offset||44!==q.stride)X.bindBuffer(34962,c.buffer),X.vertexAttribPointer(w,4,5126,!1,44,16),q.type=5126,q.size=4,q.buffer=c,q.normalized=!1,q.offset=16,q.stride=44;w=y.location;q=g[w];q.buffer||X.enableVertexAttribArray(w);if(5126!==q.type||3!==q.size||q.buffer!==b||!1!==q.normalized||32!==q.offset||44!==q.stride)X.bindBuffer(34962,b.buffer),X.vertexAttribPointer(w,3,5126,!1,44,32),q.type=5126,q.size=3,q.buffer=b,q.normalized=!1,q.offset=32,q.stride=44;w=l.call(this,la,a,0);"number"!==typeof w&&
e.commandRaise(r,t);X.uniform1f(m.location,w);w=v.call(this,la,a,0);S(w)&&16===w.length||e.commandRaise(k,t);X.uniformMatrix4fv(Z.location,!1,Array.isArray(w)||w instanceof Float32Array?w:(Fa[0]=w[0],Fa[1]=w[1],Fa[2]=w[2],Fa[3]=w[3],Fa[4]=w[4],Fa[5]=w[5],Fa[6]=w[6],Fa[7]=w[7],Fa[8]=w[8],Fa[9]=w[9],Fa[10]=w[10],Fa[11]=w[11],Fa[12]=w[12],Fa[13]=w[13],Fa[14]=w[14],Fa[15]=w[15],Fa));a=F.call(this,la,a,0);S(a)&&16===a.length||e.commandRaise(I,t);X.uniformMatrix4fv(B.location,!1,Array.isArray(a)||a instanceof
Float32Array?a:(mb[0]=a[0],mb[1]=a[1],mb[2]=a[2],mb[3]=a[3],mb[4]=a[4],mb[5]=a[5],mb[6]=a[6],mb[7]=a[7],mb[8]=a[8],mb[9]=a[9],mb[10]=a[10],mb[11]=a[11],mb[12]=a[12],mb[13]=a[13],mb[14]=a[14],mb[15]=a[15],mb));(a=ga.elements)?X.bindBuffer(34963,a.buffer.buffer):P.currentVAO&&(a=Ea.getElements(P.currentVAO.elements))&&X.bindBuffer(34963,a.buffer.buffer);w=ga.offset;a?X.drawElements(0,1E4,a.type,w<<(a.type-5121>>1)):X.drawArrays(0,w,1E4);P.setVAO(null);f&&(p.cpuTime+=performance.now()-x)},scope:function(a,
f,e){var g,m,h,A,k,z,t,u,l,w,r,v,y,ha,sa,B,D,K,U,F,G,I,E,fa,da,zb,Pa,P,O,ea,ua,S,T,ya,qa,L,pa,ja,W,ba,V,X,H,Z,Ya;if(g=Q.profile)m=performance.now(),p.count++;h=ga.count;ga.count=1E4;A=ga.primitive;ga.primitive=0;k=n.call(this,la,a,e);z=x[5];x[5]=k;t=aa.call(this,la,a,e);k=x[3];x[3]=t;u=q.call(this,la,a,e);t=x[4];x[4]=u;u=J.buffer;J.buffer=b;l=J.divisor;J.divisor=0;w=J.normalized;J.normalized=!1;r=J.offset;J.offset=32;v=J.size;J.size=0;y=J.state;J.state=1;ha=J.stride;J.stride=44;sa=J.type;J.type=5126;
B=J.w;J.w=0;D=J.x;J.x=0;K=J.y;J.y=0;U=J.z;J.z=0;F=C.buffer;C.buffer=d;G=C.divisor;C.divisor=0;I=C.normalized;C.normalized=!1;E=C.offset;C.offset=0;fa=C.size;C.size=0;da=C.state;C.state=1;zb=C.stride;C.stride=44;Pa=C.type;C.type=5126;P=C.w;C.w=0;O=C.x;C.x=0;ea=C.y;C.y=0;ua=C.z;C.z=0;S=M.buffer;M.buffer=c;T=M.divisor;M.divisor=0;ya=M.normalized;M.normalized=!1;qa=M.offset;M.offset=16;L=M.size;M.size=0;pa=M.state;M.state=1;ja=M.stride;M.stride=44;W=M.type;M.type=5126;ba=M.w;M.w=0;V=M.x;M.x=0;X=M.y;M.y=
0;H=M.z;M.z=0;Z=N.vert;N.vert=2;Ya=N.frag;N.frag=1;f(la,a,e);g&&(p.cpuTime+=performance.now()-m);ga.count=h;ga.primitive=A;x[5]=z;x[3]=k;x[4]=t;J.buffer=u;J.divisor=l;J.normalized=w;J.offset=r;J.size=v;J.state=y;J.stride=ha;J.type=sa;J.w=B;J.x=D;J.y=K;J.z=U;C.buffer=F;C.divisor=G;C.normalized=I;C.offset=E;C.size=fa;C.state=da;C.stride=zb;C.type=Pa;C.w=P;C.x=O;C.y=ea;C.z=ua;M.buffer=S;M.divisor=T;M.normalized=ya;M.offset=qa;M.size=L;M.state=pa;M.stride=ja;M.type=W;M.w=ba;M.x=V;M.y=X;M.z=H;N.vert=Z;
N.frag=Ya},batch:function(a,h){var k,l,r;k=V.next;k!==V.cur&&(k?X.bindFramebuffer(36160,k.framebuffer):X.bindFramebuffer(36160,null),V.cur=k);if(Q.dirty){var x,v,q;k=T.dither;k!==Q.dither&&(k?X.enable(3024):X.disable(3024),Q.dither=k);k=T.blend_enable;k!==Q.blend_enable&&(k?X.enable(3042):X.disable(3042),Q.blend_enable=k);k=O[0];x=O[1];v=O[2];q=O[3];if(k!==pa[0]||x!==pa[1]||v!==pa[2]||q!==pa[3])X.blendColor(k,x,v,q),pa[0]=k,pa[1]=x,pa[2]=v,pa[3]=q;k=oa[0];x=oa[1];if(k!==z[0]||x!==z[1])X.blendEquationSeparate(k,
x),z[0]=k,z[1]=x;k=K[0];x=K[1];v=K[2];q=K[3];if(k!==ea[0]||x!==ea[1]||v!==ea[2]||q!==ea[3])X.blendFuncSeparate(k,x,v,q),ea[0]=k,ea[1]=x,ea[2]=v,ea[3]=q;k=T.depth_enable;k!==Q.depth_enable&&(k?X.enable(2929):X.disable(2929),Q.depth_enable=k);k=T.depth_func;k!==Q.depth_func&&(X.depthFunc(k),Q.depth_func=k);k=qa[0];x=qa[1];if(k!==Ba[0]||x!==Ba[1])X.depthRange(k,x),Ba[0]=k,Ba[1]=x;k=T.depth_mask;k!==Q.depth_mask&&(X.depthMask(k),Q.depth_mask=k);k=U[0];x=U[1];v=U[2];q=U[3];if(k!==ma[0]||x!==ma[1]||v!==
ma[2]||q!==ma[3])X.colorMask(k,x,v,q),ma[0]=k,ma[1]=x,ma[2]=v,ma[3]=q;k=T.cull_enable;k!==Q.cull_enable&&(k?X.enable(2884):X.disable(2884),Q.cull_enable=k);k=T.cull_face;k!==Q.cull_face&&(X.cullFace(k),Q.cull_face=k);k=T.frontFace;k!==Q.frontFace&&(X.frontFace(k),Q.frontFace=k);k=T.lineWidth;k!==Q.lineWidth&&(X.lineWidth(k),Q.lineWidth=k);k=T.polygonOffset_enable;k!==Q.polygonOffset_enable&&(k?X.enable(32823):X.disable(32823),Q.polygonOffset_enable=k);k=ya[0];x=ya[1];if(k!==da[0]||x!==da[1])X.polygonOffset(k,
x),da[0]=k,da[1]=x;k=T.sample_alpha;k!==Q.sample_alpha&&(k?X.enable(32926):X.disable(32926),Q.sample_alpha=k);k=T.sample_enable;k!==Q.sample_enable&&(k?X.enable(32928):X.disable(32928),Q.sample_enable=k);k=Ca[0];x=Ca[1];if(k!==ja[0]||x!==ja[1])X.sampleCoverage(k,x),ja[0]=k,ja[1]=x;k=T.stencil_enable;k!==Q.stencil_enable&&(k?X.enable(2960):X.disable(2960),Q.stencil_enable=k);k=T.stencil_mask;k!==Q.stencil_mask&&(X.stencilMask(k),Q.stencil_mask=k);k=Pa[0];x=Pa[1];v=Pa[2];if(k!==sa[0]||x!==sa[1]||v!==
sa[2])X.stencilFunc(k,x,v),sa[0]=k,sa[1]=x,sa[2]=v;k=A[0];x=A[1];v=A[2];q=A[3];if(k!==u[0]||x!==u[1]||v!==u[2]||q!==u[3])X.stencilOpSeparate(k,x,v,q),u[0]=k,u[1]=x,u[2]=v,u[3]=q;k=zb[0];x=zb[1];v=zb[2];q=zb[3];if(k!==Ya[0]||x!==Ya[1]||v!==Ya[2]||q!==Ya[3])X.stencilOpSeparate(k,x,v,q),Ya[0]=k,Ya[1]=x,Ya[2]=v,Ya[3]=q;k=T.scissor_enable;k!==Q.scissor_enable&&(k?X.enable(3089):X.disable(3089),Q.scissor_enable=k);k=na[0];x=na[1];v=na[2];q=na[3];if(k!==za[0]||x!==za[1]||v!==za[2]||q!==za[3])X.scissor(k,
x,v,q),za[0]=k,za[1]=x,za[2]=v,za[3]=q;k=ha[0];x=ha[1];v=ha[2];q=ha[3];if(k!==ua[0]||x!==ua[1]||v!==ua[2]||q!==ua[3])X.viewport(k,x,v,q),ua[0]=k,ua[1]=x,ua[2]=v,ua[3]=q;Q.dirty=!1}if(k=Q.profile)l=performance.now(),p.count+=h;X.useProgram(L.program);P.setVAO(null);x=H.location;v=g[x];v.buffer||X.enableVertexAttribArray(x);if(5126!==v.type||4!==v.size||v.buffer!==d||!1!==v.normalized||0!==v.offset||44!==v.stride)X.bindBuffer(34962,d.buffer),X.vertexAttribPointer(x,4,5126,!1,44,0),v.type=5126,v.size=
4,v.buffer=d,v.normalized=!1,v.offset=0,v.stride=44;x=G.location;v=g[x];v.buffer||X.enableVertexAttribArray(x);if(5126!==v.type||4!==v.size||v.buffer!==c||!1!==v.normalized||16!==v.offset||44!==v.stride)X.bindBuffer(34962,c.buffer),X.vertexAttribPointer(x,4,5126,!1,44,16),v.type=5126,v.size=4,v.buffer=c,v.normalized=!1,v.offset=16,v.stride=44;x=y.location;v=g[x];v.buffer||X.enableVertexAttribArray(x);if(5126!==v.type||3!==v.size||v.buffer!==b||!1!==v.normalized||32!==v.offset||44!==v.stride)X.bindBuffer(34962,
b.buffer),X.vertexAttribPointer(x,3,5126,!1,44,32),v.type=5126,v.size=3,v.buffer=b,v.normalized=!1,v.offset=32,v.stride=44;x=f.call(this,la,void 0,r);"number"!==typeof x&&e.commandRaise(w,t);X.uniform1f(m.location,x);x=ba.call(this,la,void 0,r);S(x)&&16===x.length||e.commandRaise(E,t);X.uniformMatrix4fv(Z.location,!1,Array.isArray(x)||x instanceof Float32Array?x:(Ib[0]=x[0],Ib[1]=x[1],Ib[2]=x[2],Ib[3]=x[3],Ib[4]=x[4],Ib[5]=x[5],Ib[6]=x[6],Ib[7]=x[7],Ib[8]=x[8],Ib[9]=x[9],Ib[10]=x[10],Ib[11]=x[11],
Ib[12]=x[12],Ib[13]=x[13],Ib[14]=x[14],Ib[15]=x[15],Ib));r=W.call(this,la,void 0,r);S(r)&&16===r.length||e.commandRaise(D,t);X.uniformMatrix4fv(B.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(fa[0]=r[0],fa[1]=r[1],fa[2]=r[2],fa[3]=r[3],fa[4]=r[4],fa[5]=r[5],fa[6]=r[6],fa[7]=r[7],fa[8]=r[8],fa[9]=r[9],fa[10]=r[10],fa[11]=r[11],fa[12]=r[12],fa[13]=r[13],fa[14]=r[14],fa[15]=r[15],fa));(x=ga.elements)?X.bindBuffer(34963,x.buffer.buffer):P.currentVAO&&(x=Ea.getElements(P.currentVAO.elements))&&
X.bindBuffer(34963,x.buffer.buffer);v=ga.offset;for(r=0;r<h;++r)x?X.drawElements(0,1E4,x.type,v<<(x.type-5121>>1)):X.drawArrays(0,v,1E4);P.setVAO(null);k&&(p.cpuTime+=performance.now()-l)}}},"$34,atlas,normal,position,projection,uv,view":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,L,f,w,ba,E,W,D,y,H,G,B,m,Z,g,la,Q,ga,Ea,V,X,S){var T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib,fa,R,va,Ga,ra,xa,wa,ka,Y,ta,ia,Ia;T=a.attributes;N=a.buffer;x=a.context;P=a.current;
O=a.draw;pa=a.elements;oa=a.framebuffer;z=a.gl;K=a.isArrayLike;ea=a.isBufferArgs;U=a.next;ma=a.shader;qa=a.uniforms;Ba=a.vao;ya=U.blend_color;da=P.blend_color;Ca=U.blend_equation;ja=P.blend_equation;na=U.blend_func;za=P.blend_func;Pa=U.colorMask;sa=P.colorMask;zb=U.depth_range;Ya=P.depth_range;A=U.polygonOffset_offset;u=P.polygonOffset_offset;ha=U.sample_coverage;ua=P.sample_coverage;Fa=U.scissor_box;mb=P.scissor_box;Ib=U.stencil_func;fa=P.stencil_func;R=U.stencil_opBack;va=P.stencil_opBack;Ga=U.stencil_opFront;
ra=P.stencil_opFront;xa=U.viewport;wa=P.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Y=new Float32Array(16);ta=new Float32Array(16);ia=new Float32Array(16);Ia=new Float32Array(16);return{draw:function(a){var f,g,m,w,q,y,B,D,C,G,E,J,M,O,aa,qa,L,W,ba,H,Z,Aa,ma,la,Da,ia,Ia,Sa,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb,ab,pb;f=x.view;g=h.call(this,x,a,0);x.view=g;m=oa.next;m!==oa.cur&&(m?
z.bindFramebuffer(36160,m.framebuffer):z.bindFramebuffer(36160,null),oa.cur=m);if(P.dirty){var Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb;Va=U.dither;Va!==P.dither&&(Va?z.enable(3024):z.disable(3024),P.dither=Va);td=U.blend_enable;td!==P.blend_enable&&(td?z.enable(3042):z.disable(3042),P.blend_enable=td);Kb=ya[0];Lb=ya[1];rc=ya[2];Qb=ya[3];if(Kb!==da[0]||Lb!==da[1]||rc!==da[2]||Qb!==da[3])z.blendColor(Kb,
Lb,rc,Qb),da[0]=Kb,da[1]=Lb,da[2]=rc,da[3]=Qb;jb=Ca[0];Hb=Ca[1];if(jb!==ja[0]||Hb!==ja[1])z.blendEquationSeparate(jb,Hb),ja[0]=jb,ja[1]=Hb;Eb=na[0];yb=na[1];hb=na[2];$b=na[3];if(Eb!==za[0]||yb!==za[1]||hb!==za[2]||$b!==za[3])z.blendFuncSeparate(Eb,yb,hb,$b),za[0]=Eb,za[1]=yb,za[2]=hb,za[3]=$b;Rb=U.depth_enable;Rb!==P.depth_enable&&(Rb?z.enable(2929):z.disable(2929),P.depth_enable=Rb);sb=U.depth_func;sb!==P.depth_func&&(z.depthFunc(sb),P.depth_func=sb);Ua=zb[0];Wb=zb[1];if(Ua!==Ya[0]||Wb!==Ya[1])z.depthRange(Ua,
Wb),Ya[0]=Ua,Ya[1]=Wb;qb=U.depth_mask;qb!==P.depth_mask&&(z.depthMask(qb),P.depth_mask=qb);cc=Pa[0];ib=Pa[1];rb=Pa[2];Ja=Pa[3];if(cc!==sa[0]||ib!==sa[1]||rb!==sa[2]||Ja!==sa[3])z.colorMask(cc,ib,rb,Ja),sa[0]=cc,sa[1]=ib,sa[2]=rb,sa[3]=Ja;tb=U.frontFace;tb!==P.frontFace&&(z.frontFace(tb),P.frontFace=tb);Ka=U.lineWidth;Ka!==P.lineWidth&&(z.lineWidth(Ka),P.lineWidth=Ka);eb=U.polygonOffset_enable;eb!==P.polygonOffset_enable&&(eb?z.enable(32823):z.disable(32823),P.polygonOffset_enable=eb);fb=A[0];La=A[1];
if(fb!==u[0]||La!==u[1])z.polygonOffset(fb,La),u[0]=fb,u[1]=La;kb=U.sample_alpha;kb!==P.sample_alpha&&(kb?z.enable(32926):z.disable(32926),P.sample_alpha=kb);Wa=U.sample_enable;Wa!==P.sample_enable&&(Wa?z.enable(32928):z.disable(32928),P.sample_enable=Wa);vb=ha[0];ub=ha[1];if(vb!==ua[0]||ub!==ua[1])z.sampleCoverage(vb,ub),ua[0]=vb,ua[1]=ub;Oa=U.stencil_enable;Oa!==P.stencil_enable&&(Oa?z.enable(2960):z.disable(2960),P.stencil_enable=Oa);Cc=U.stencil_mask;Cc!==P.stencil_mask&&(z.stencilMask(Cc),P.stencil_mask=
Cc);Ra=Ib[0];Mb=Ib[1];Fb=Ib[2];if(Ra!==fa[0]||Mb!==fa[1]||Fb!==fa[2])z.stencilFunc(Ra,Mb,Fb),fa[0]=Ra,fa[1]=Mb,fa[2]=Fb;Ma=Ga[0];Cd=Ga[1];Za=Ga[2];Nb=Ga[3];if(Ma!==ra[0]||Cd!==ra[1]||Za!==ra[2]||Nb!==ra[3])z.stencilOpSeparate(Ma,Cd,Za,Nb),ra[0]=Ma,ra[1]=Cd,ra[2]=Za,ra[3]=Nb;Ob=R[0];nb=R[1];Na=R[2];ac=R[3];if(Ob!==va[0]||nb!==va[1]||Na!==va[2]||ac!==va[3])z.stencilOpSeparate(Ob,nb,Na,ac),va[0]=Ob,va[1]=nb,va[2]=Na,va[3]=ac;Qa=U.scissor_enable;Qa!==P.scissor_enable&&(Qa?z.enable(3089):z.disable(3089),
P.scissor_enable=Qa);wb=Fa[0];xb=Fa[1];Ta=Fa[2];ob=Fa[3];if(wb!==mb[0]||xb!==mb[1]||Ta!==mb[2]||ob!==mb[3])z.scissor(wb,xb,Ta,ob),mb[0]=wb,mb[1]=xb,mb[2]=Ta,mb[3]=ob;hc=xa[0];Ac=xa[1];vc=xa[2];bb=xa[3];if(hc!==wa[0]||Ac!==wa[1]||vc!==wa[2]||bb!==wa[3])z.viewport(hc,Ac,vc,bb),wa[0]=hc,wa[1]=Ac,wa[2]=vc,wa[3]=bb}z.enable(2884);P.cull_enable=!0;z.cullFace(1029);P.cull_face=1029;if(w=P.profile)q=performance.now(),p.count++;z.useProgram(d.program);Ba.setVAO(null);(y=a.position)&&("object"===typeof y||
"function"===typeof y)&&(ea(y)||N.getBuffer(y)||N.getBuffer(y.buffer)||ea(y.buffer)||"constant"in y&&("number"===typeof y.constant||K(y.constant)))||e.commandRaise(c,t);B=!1;D=null;C=!1;E=G=0;J=1;M=0;O=5126;W=L=qa=aa=0;ea(y)?(B=!0,D=N.createStream(34962,y),O=D.dtype):(D=N.getBuffer(y))?O=D.dtype:"constant"in y?(J=2,"number"===typeof y.constant?(qa=y.constant,L=W=aa=0):(qa=0<y.constant.length?y.constant[0]:0,L=1<y.constant.length?y.constant[1]:0,W=2<y.constant.length?y.constant[2]:0,aa=3<y.constant.length?
y.constant[3]:0)):(D=ea(y.buffer)?N.createStream(34962,y.buffer):N.getBuffer(y.buffer),O="type"in y?ka[y.type]:D.dtype,C=!!y.normalized,E=y.size|0,G=y.offset|0,M=y.stride|0);ba=Ea.location;H=T[ba];if(1===J){if(H.buffer||z.enableVertexAttribArray(ba),Z=E||3,H.type!==O||H.size!==Z||H.buffer!==D||H.normalized!==C||H.offset!==G||H.stride!==M)z.bindBuffer(34962,D.buffer),z.vertexAttribPointer(ba,Z,O,C,M,G),H.type=O,H.size=Z,H.buffer=D,H.normalized=C,H.offset=G,H.stride=M}else if(H.buffer&&(z.disableVertexAttribArray(ba),
H.buffer=null),H.x!==qa||H.y!==L||H.z!==W||H.w!==aa)z.vertexAttrib4f(ba,qa,L,W,aa),H.x=qa,H.y=L,H.z=W,H.w=aa;(Aa=a.normal)&&("object"===typeof Aa||"function"===typeof Aa)&&(ea(Aa)||N.getBuffer(Aa)||N.getBuffer(Aa.buffer)||ea(Aa.buffer)||"constant"in Aa&&("number"===typeof Aa.constant||K(Aa.constant)))||e.commandRaise(b,t);ma=!1;la=null;Da=!1;Ia=ia=0;Sa=1;md=0;ad=5126;Fc=od=Lc=rd=0;ea(Aa)?(ma=!0,la=N.createStream(34962,Aa),ad=la.dtype):(la=N.getBuffer(Aa))?ad=la.dtype:"constant"in Aa?(Sa=2,"number"===
typeof Aa.constant?(Lc=Aa.constant,od=Fc=rd=0):(Lc=0<Aa.constant.length?Aa.constant[0]:0,od=1<Aa.constant.length?Aa.constant[1]:0,Fc=2<Aa.constant.length?Aa.constant[2]:0,rd=3<Aa.constant.length?Aa.constant[3]:0)):(la=ea(Aa.buffer)?N.createStream(34962,Aa.buffer):N.getBuffer(Aa.buffer),ad="type"in Aa?ka[Aa.type]:la.dtype,Da=!!Aa.normalized,Ia=Aa.size|0,ia=Aa.offset|0,md=Aa.stride|0);ed=ga.location;Oc=T[ed];if(1===Sa){if(Oc.buffer||z.enableVertexAttribArray(ed),Wc=Ia||3,Oc.type!==ad||Oc.size!==Wc||
Oc.buffer!==la||Oc.normalized!==Da||Oc.offset!==ia||Oc.stride!==md)z.bindBuffer(34962,la.buffer),z.vertexAttribPointer(ed,Wc,ad,Da,md,ia),Oc.type=ad,Oc.size=Wc,Oc.buffer=la,Oc.normalized=Da,Oc.offset=ia,Oc.stride=md}else if(Oc.buffer&&(z.disableVertexAttribArray(ed),Oc.buffer=null),Oc.x!==Lc||Oc.y!==od||Oc.z!==Fc||Oc.w!==rd)z.vertexAttrib4f(ed,Lc,od,Fc,rd),Oc.x=Lc,Oc.y=od,Oc.z=Fc,Oc.w=rd;(Cb=a.uv)&&("object"===typeof Cb||"function"===typeof Cb)&&(ea(Cb)||N.getBuffer(Cb)||N.getBuffer(Cb.buffer)||ea(Cb.buffer)||
"constant"in Cb&&("number"===typeof Cb.constant||K(Cb.constant)))||e.commandRaise(l,t);Gb=!1;uc=null;Ab=!1;Db=xc=0;Ic=1;mc=0;Gc=5126;fc=Dc=Vc=fd=0;ea(Cb)?(Gb=!0,uc=N.createStream(34962,Cb),Gc=uc.dtype):(uc=N.getBuffer(Cb))?Gc=uc.dtype:"constant"in Cb?(Ic=2,"number"===typeof Cb.constant?(Vc=Cb.constant,Dc=fc=fd=0):(Vc=0<Cb.constant.length?Cb.constant[0]:0,Dc=1<Cb.constant.length?Cb.constant[1]:0,fc=2<Cb.constant.length?Cb.constant[2]:0,fd=3<Cb.constant.length?Cb.constant[3]:0)):(uc=ea(Cb.buffer)?N.createStream(34962,
Cb.buffer):N.getBuffer(Cb.buffer),Gc="type"in Cb?ka[Cb.type]:uc.dtype,Ab=!!Cb.normalized,Db=Cb.size|0,xc=Cb.offset|0,mc=Cb.stride|0);Hc=X.location;pc=T[Hc];if(1===Ic){if(pc.buffer||z.enableVertexAttribArray(Hc),qc=Db||2,pc.type!==Gc||pc.size!==qc||pc.buffer!==uc||pc.normalized!==Ab||pc.offset!==xc||pc.stride!==mc)z.bindBuffer(34962,uc.buffer),z.vertexAttribPointer(Hc,qc,Gc,Ab,mc,xc),pc.type=Gc,pc.size=qc,pc.buffer=uc,pc.normalized=Ab,pc.offset=xc,pc.stride=mc}else if(pc.buffer&&(z.disableVertexAttribArray(Hc),
pc.buffer=null),pc.x!==Vc||pc.y!==Dc||pc.z!==fc||pc.w!==fd)z.vertexAttrib4f(Hc,Vc,Dc,fc,fd),pc.x=Vc,pc.y=Dc,pc.z=fc,pc.w=fd;nc=r.call(this,x,a,0);K(nc)&&16===nc.length||e.commandRaise(v,t);z.uniformMatrix4fv(V.location,!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(Y[0]=nc[0],Y[1]=nc[1],Y[2]=nc[2],Y[3]=nc[3],Y[4]=nc[4],Y[5]=nc[5],Y[6]=nc[6],Y[7]=nc[7],Y[8]=nc[8],Y[9]=nc[9],Y[10]=nc[10],Y[11]=nc[11],Y[12]=nc[12],Y[13]=nc[13],Y[14]=nc[14],Y[15]=nc[15],Y));gc=x.view;K(gc)&&16===gc.length||e.commandRaise(k,
t);z.uniformMatrix4fv(S.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(ta[0]=gc[0],ta[1]=gc[1],ta[2]=gc[2],ta[3]=gc[3],ta[4]=gc[4],ta[5]=gc[5],ta[6]=gc[6],ta[7]=gc[7],ta[8]=gc[8],ta[9]=gc[9],ta[10]=gc[10],ta[11]=gc[11],ta[12]=gc[12],ta[13]=gc[13],ta[14]=gc[14],ta[15]=gc[15],ta));(lb=a.atlas)&&"framebuffer"===lb._reglType&&(lb=lb.color[0]);"function"===typeof lb&&"texture2d"===lb._reglType||e.commandRaise(F,t);Jc=lb._texture;z.uniform1i(Q.location,Jc.bind());Jb=a.elements;cb=null;(Pb=
ea(Jb))?cb=pa.createStream(Jb):(cb=pa.getElements(Jb),Jb&&!cb&&e.commandRaise(I,t));cb&&z.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;pb=cb?cb.vertCount:-1;0<=pb||e.commandRaise(n,t);pb&&(cb?z.drawElements(ab,pb,cb.type,0<<(cb.type-5121>>1)):z.drawArrays(ab,0,pb),P.dirty=!0,Ba.setVAO(null),x.view=f,w&&(p.cpuTime+=performance.now()-q),B&&N.destroyStream(D),ma&&N.destroyStream(la),Gb&&N.destroyStream(uc),Jc.unbind(),Pb&&pa.destroyStream(cb))},scope:function(a,c,b){var d,g,m,k,h,A,z,u,l,r,
v,R,y,ha,sa,n,B,D,F,G,I,E,fa,da,zb,Pa,Q,va,Ga,ua,S,ra,T,Y,ya,H,W,ja,V,X,Z,Ya,xa,ga,na,Ca,za,wa,Fa,la,Ba,oa,Ib,ta,Da,ia,Ea,mb,Ia,Sa,Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb;d=x.view;g=aa.call(this,x,a,b);x.view=g;m=U.cull_enable;U.cull_enable=!0;k=U.cull_face;U.cull_face=1029;if(h=P.profile)A=performance.now(),p.count++;z=a.elements;u=null;(l=ea(z))?u=pa.createStream(z):(u=pa.getElements(z),z&&!u&&e.commandRaise(q,t));
r=O.elements;O.elements=u;v=O.offset;O.offset=0;R=u?u.vertCount:-1;y=O.count;O.count=R;ha=u?u.primType:4;sa=O.primitive;O.primitive=ha;n=a.atlas;B=qa[5];qa[5]=n;D=J.call(this,x,a,b);F=qa[3];qa[3]=D;G=x.view;I=qa[4];qa[4]=G;(E=a.normal)&&("object"===typeof E||"function"===typeof E)&&(ea(E)||N.getBuffer(E)||N.getBuffer(E.buffer)||ea(E.buffer)||"constant"in E&&("number"===typeof E.constant||K(E.constant)))||e.commandRaise(C,t);fa=!1;da=null;zb=0;Pa=!1;va=Q=0;Ga=1;ua=0;S=5126;ya=Y=T=ra=0;ea(E)?(fa=!0,
da=N.createStream(34962,E),S=da.dtype):(da=N.getBuffer(E))?S=da.dtype:"constant"in E?(Ga=2,"number"===typeof E.constant?(T=E.constant,Y=ya=ra=0):(T=0<E.constant.length?E.constant[0]:0,Y=1<E.constant.length?E.constant[1]:0,ya=2<E.constant.length?E.constant[2]:0,ra=3<E.constant.length?E.constant[3]:0)):(da=ea(E.buffer)?N.createStream(34962,E.buffer):N.getBuffer(E.buffer),S="type"in E?ka[E.type]:da.dtype,Pa=!!E.normalized,va=E.size|0,Q=E.offset|0,ua=E.stride|0,zb=E.divisor|0);H=M.buffer;M.buffer=da;
W=M.divisor;M.divisor=zb;ja=M.normalized;M.normalized=Pa;V=M.offset;M.offset=Q;X=M.size;M.size=va;Z=M.state;M.state=Ga;Ya=M.stride;M.stride=ua;xa=M.type;M.type=S;ga=M.w;M.w=ra;na=M.x;M.x=T;Ca=M.y;M.y=Y;za=M.z;M.z=ya;(wa=a.position)&&("object"===typeof wa||"function"===typeof wa)&&(ea(wa)||N.getBuffer(wa)||N.getBuffer(wa.buffer)||ea(wa.buffer)||"constant"in wa&&("number"===typeof wa.constant||K(wa.constant)))||e.commandRaise(L,t);Fa=!1;la=null;Ba=0;oa=!1;ta=Ib=0;Da=1;ia=0;Ea=5126;Va=Sa=Ia=mb=0;ea(wa)?
(Fa=!0,la=N.createStream(34962,wa),Ea=la.dtype):(la=N.getBuffer(wa))?Ea=la.dtype:"constant"in wa?(Da=2,"number"===typeof wa.constant?(Ia=wa.constant,Sa=Va=mb=0):(Ia=0<wa.constant.length?wa.constant[0]:0,Sa=1<wa.constant.length?wa.constant[1]:0,Va=2<wa.constant.length?wa.constant[2]:0,mb=3<wa.constant.length?wa.constant[3]:0)):(la=ea(wa.buffer)?N.createStream(34962,wa.buffer):N.getBuffer(wa.buffer),Ea="type"in wa?ka[wa.type]:la.dtype,oa=!!wa.normalized,ta=wa.size|0,Ib=wa.offset|0,ia=wa.stride|0,Ba=
wa.divisor|0);td=f.buffer;f.buffer=la;Kb=f.divisor;f.divisor=Ba;Lb=f.normalized;f.normalized=oa;rc=f.offset;f.offset=Ib;Qb=f.size;f.size=ta;jb=f.state;f.state=Da;Hb=f.stride;f.stride=ia;Eb=f.type;f.type=Ea;yb=f.w;f.w=mb;hb=f.x;f.x=Ia;$b=f.y;f.y=Sa;Rb=f.z;f.z=Va;(sb=a.uv)&&("object"===typeof sb||"function"===typeof sb)&&(ea(sb)||N.getBuffer(sb)||N.getBuffer(sb.buffer)||ea(sb.buffer)||"constant"in sb&&("number"===typeof sb.constant||K(sb.constant)))||e.commandRaise(w,t);Ua=!1;Wb=null;qb=0;cc=!1;rb=
ib=0;Ja=1;tb=0;Ka=5126;kb=La=fb=eb=0;ea(sb)?(Ua=!0,Wb=N.createStream(34962,sb),Ka=Wb.dtype):(Wb=N.getBuffer(sb))?Ka=Wb.dtype:"constant"in sb?(Ja=2,"number"===typeof sb.constant?(fb=sb.constant,La=kb=eb=0):(fb=0<sb.constant.length?sb.constant[0]:0,La=1<sb.constant.length?sb.constant[1]:0,kb=2<sb.constant.length?sb.constant[2]:0,eb=3<sb.constant.length?sb.constant[3]:0)):(Wb=ea(sb.buffer)?N.createStream(34962,sb.buffer):N.getBuffer(sb.buffer),Ka="type"in sb?ka[sb.type]:Wb.dtype,cc=!!sb.normalized,rb=
sb.size|0,ib=sb.offset|0,tb=sb.stride|0,qb=sb.divisor|0);Wa=ba.buffer;ba.buffer=Wb;vb=ba.divisor;ba.divisor=qb;ub=ba.normalized;ba.normalized=cc;Oa=ba.offset;ba.offset=ib;Cc=ba.size;ba.size=rb;Ra=ba.state;ba.state=Ja;Mb=ba.stride;ba.stride=tb;Fb=ba.type;ba.type=Ka;Ma=ba.w;ba.w=eb;Cd=ba.x;ba.x=fb;Za=ba.y;ba.y=La;Nb=ba.z;ba.z=kb;Ob=ma.vert;ma.vert=2;nb=ma.frag;ma.frag=1;P.dirty=!0;c(x,a,b);x.view=d;U.cull_enable=m;U.cull_face=k;h&&(p.cpuTime+=performance.now()-A);l&&pa.destroyStream(u);O.elements=r;
O.offset=v;O.count=y;O.primitive=sa;qa[5]=B;qa[3]=F;qa[4]=I;fa&&N.destroyStream(da);M.buffer=H;M.divisor=W;M.normalized=ja;M.offset=V;M.size=X;M.state=Z;M.stride=Ya;M.type=xa;M.w=ga;M.x=na;M.y=Ca;M.z=za;Fa&&N.destroyStream(la);f.buffer=td;f.divisor=Kb;f.normalized=Lb;f.offset=rc;f.size=Qb;f.state=jb;f.stride=Hb;f.type=Eb;f.w=yb;f.x=hb;f.y=$b;f.z=Rb;Ua&&N.destroyStream(Wb);ba.buffer=Wa;ba.divisor=vb;ba.normalized=ub;ba.offset=Oa;ba.size=Cc;ba.state=Ra;ba.stride=Mb;ba.type=Fb;ba.w=Ma;ba.x=Cd;ba.y=Za;
ba.z=Nb;ma.vert=Ob;ma.frag=nb;P.dirty=!0},batch:function(a,c){var b,d,f,k,h,l,w;b=x.view;d=E.call(this,x,a,0);x.view=d;f=oa.next;f!==oa.cur&&(f?z.bindFramebuffer(36160,f.framebuffer):z.bindFramebuffer(36160,null),oa.cur=f);if(P.dirty){var r,v,q,n,F,C,I,J,M,O,aa,Y,qa,L,ba,Aa,ma,ta,ee,Wd,md,ad,rd,Lc,od,Fc,ed,Oc,Wc,Cb,Gb,uc,Ab,xc,Db,Ic,mc,Gc,fd,Vc,Dc,fc,Hc,pc,qc,nc,gc,lb,Jc,Jb,cb,Pb;r=U.dither;r!==P.dither&&(r?z.enable(3024):z.disable(3024),P.dither=r);v=U.blend_enable;v!==P.blend_enable&&(v?z.enable(3042):
z.disable(3042),P.blend_enable=v);q=ya[0];n=ya[1];F=ya[2];C=ya[3];if(q!==da[0]||n!==da[1]||F!==da[2]||C!==da[3])z.blendColor(q,n,F,C),da[0]=q,da[1]=n,da[2]=F,da[3]=C;I=Ca[0];J=Ca[1];if(I!==ja[0]||J!==ja[1])z.blendEquationSeparate(I,J),ja[0]=I,ja[1]=J;M=na[0];O=na[1];aa=na[2];Y=na[3];if(M!==za[0]||O!==za[1]||aa!==za[2]||Y!==za[3])z.blendFuncSeparate(M,O,aa,Y),za[0]=M,za[1]=O,za[2]=aa,za[3]=Y;qa=U.depth_enable;qa!==P.depth_enable&&(qa?z.enable(2929):z.disable(2929),P.depth_enable=qa);L=U.depth_func;
L!==P.depth_func&&(z.depthFunc(L),P.depth_func=L);ba=zb[0];Aa=zb[1];if(ba!==Ya[0]||Aa!==Ya[1])z.depthRange(ba,Aa),Ya[0]=ba,Ya[1]=Aa;ma=U.depth_mask;ma!==P.depth_mask&&(z.depthMask(ma),P.depth_mask=ma);ta=Pa[0];ee=Pa[1];Wd=Pa[2];md=Pa[3];if(ta!==sa[0]||ee!==sa[1]||Wd!==sa[2]||md!==sa[3])z.colorMask(ta,ee,Wd,md),sa[0]=ta,sa[1]=ee,sa[2]=Wd,sa[3]=md;ad=U.frontFace;ad!==P.frontFace&&(z.frontFace(ad),P.frontFace=ad);rd=U.lineWidth;rd!==P.lineWidth&&(z.lineWidth(rd),P.lineWidth=rd);Lc=U.polygonOffset_enable;
Lc!==P.polygonOffset_enable&&(Lc?z.enable(32823):z.disable(32823),P.polygonOffset_enable=Lc);od=A[0];Fc=A[1];if(od!==u[0]||Fc!==u[1])z.polygonOffset(od,Fc),u[0]=od,u[1]=Fc;ed=U.sample_alpha;ed!==P.sample_alpha&&(ed?z.enable(32926):z.disable(32926),P.sample_alpha=ed);Oc=U.sample_enable;Oc!==P.sample_enable&&(Oc?z.enable(32928):z.disable(32928),P.sample_enable=Oc);Wc=ha[0];Cb=ha[1];if(Wc!==ua[0]||Cb!==ua[1])z.sampleCoverage(Wc,Cb),ua[0]=Wc,ua[1]=Cb;Gb=U.stencil_enable;Gb!==P.stencil_enable&&(Gb?z.enable(2960):
z.disable(2960),P.stencil_enable=Gb);uc=U.stencil_mask;uc!==P.stencil_mask&&(z.stencilMask(uc),P.stencil_mask=uc);Ab=Ib[0];xc=Ib[1];Db=Ib[2];if(Ab!==fa[0]||xc!==fa[1]||Db!==fa[2])z.stencilFunc(Ab,xc,Db),fa[0]=Ab,fa[1]=xc,fa[2]=Db;Ic=Ga[0];mc=Ga[1];Gc=Ga[2];fd=Ga[3];if(Ic!==ra[0]||mc!==ra[1]||Gc!==ra[2]||fd!==ra[3])z.stencilOpSeparate(Ic,mc,Gc,fd),ra[0]=Ic,ra[1]=mc,ra[2]=Gc,ra[3]=fd;Vc=R[0];Dc=R[1];fc=R[2];Hc=R[3];if(Vc!==va[0]||Dc!==va[1]||fc!==va[2]||Hc!==va[3])z.stencilOpSeparate(Vc,Dc,fc,Hc),va[0]=
Vc,va[1]=Dc,va[2]=fc,va[3]=Hc;pc=U.scissor_enable;pc!==P.scissor_enable&&(pc?z.enable(3089):z.disable(3089),P.scissor_enable=pc);qc=Fa[0];nc=Fa[1];gc=Fa[2];lb=Fa[3];if(qc!==mb[0]||nc!==mb[1]||gc!==mb[2]||lb!==mb[3])z.scissor(qc,nc,gc,lb),mb[0]=qc,mb[1]=nc,mb[2]=gc,mb[3]=lb;Jc=xa[0];Jb=xa[1];cb=xa[2];Pb=xa[3];if(Jc!==wa[0]||Jb!==wa[1]||cb!==wa[2]||Pb!==wa[3])z.viewport(Jc,Jb,cb,Pb),wa[0]=Jc,wa[1]=Jb,wa[2]=cb,wa[3]=Pb}z.enable(2884);P.cull_enable=!0;z.cullFace(1029);P.cull_face=1029;if(k=P.profile)h=
performance.now(),p.count+=c;z.useProgram(W.program);var ab,pb;Ba.setVAO(null);ab=G.call(this,x,w,l);K(ab)&&16===ab.length||e.commandRaise(B,t);z.uniformMatrix4fv(V.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(ia[0]=ab[0],ia[1]=ab[1],ia[2]=ab[2],ia[3]=ab[3],ia[4]=ab[4],ia[5]=ab[5],ia[6]=ab[6],ia[7]=ab[7],ia[8]=ab[8],ia[9]=ab[9],ia[10]=ab[10],ia[11]=ab[11],ia[12]=ab[12],ia[13]=ab[13],ia[14]=ab[14],ia[15]=ab[15],ia));pb=x.view;K(pb)&&16===pb.length||e.commandRaise(m,t);z.uniformMatrix4fv(S.location,
!1,Array.isArray(pb)||pb instanceof Float32Array?pb:(Ia[0]=pb[0],Ia[1]=pb[1],Ia[2]=pb[2],Ia[3]=pb[3],Ia[4]=pb[4],Ia[5]=pb[5],Ia[6]=pb[6],Ia[7]=pb[7],Ia[8]=pb[8],Ia[9]=pb[9],Ia[10]=pb[10],Ia[11]=pb[11],Ia[12]=pb[12],Ia[13]=pb[13],Ia[14]=pb[14],Ia[15]=pb[15],Ia));for(l=0;l<c;++l){w=a[l];var Va,td,Kb,Lb,rc,Qb,jb,Hb,Eb,yb,hb,$b,Rb,sb,Ua,Wb,qb,cc,ib,rb,Ja,tb,Ka,eb,fb,La,kb,Wa,vb,ub,Oa,Cc,Ra,Mb,Fb,Ma,Cd,Za,Nb,Ob,nb,Na,ac,Qa,wb,xb,Ta,ob,hc,Ac,vc,bb,kc,Rc,Xa;(Va=w.position)&&("object"===typeof Va||"function"===
typeof Va)&&(ea(Va)||N.getBuffer(Va)||N.getBuffer(Va.buffer)||ea(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||K(Va.constant)))||e.commandRaise(D,t);td=!1;Kb=null;Lb=!1;Qb=rc=0;jb=1;Hb=0;Eb=5126;Rb=$b=hb=yb=0;ea(Va)?(td=!0,Kb=N.createStream(34962,Va),Eb=Kb.dtype):(Kb=N.getBuffer(Va))?Eb=Kb.dtype:"constant"in Va?(jb=2,"number"===typeof Va.constant?(hb=Va.constant,$b=Rb=yb=0):(hb=0<Va.constant.length?Va.constant[0]:0,$b=1<Va.constant.length?Va.constant[1]:0,Rb=2<Va.constant.length?Va.constant[2]:
0,yb=3<Va.constant.length?Va.constant[3]:0)):(Kb=ea(Va.buffer)?N.createStream(34962,Va.buffer):N.getBuffer(Va.buffer),Eb="type"in Va?ka[Va.type]:Kb.dtype,Lb=!!Va.normalized,Qb=Va.size|0,rc=Va.offset|0,Hb=Va.stride|0);sb=Ea.location;Ua=T[sb];if(1===jb){if(Ua.buffer||z.enableVertexAttribArray(sb),Wb=Qb||3,Ua.type!==Eb||Ua.size!==Wb||Ua.buffer!==Kb||Ua.normalized!==Lb||Ua.offset!==rc||Ua.stride!==Hb)z.bindBuffer(34962,Kb.buffer),z.vertexAttribPointer(sb,Wb,Eb,Lb,Hb,rc),Ua.type=Eb,Ua.size=Wb,Ua.buffer=
Kb,Ua.normalized=Lb,Ua.offset=rc,Ua.stride=Hb}else if(Ua.buffer&&(z.disableVertexAttribArray(sb),Ua.buffer=null),Ua.x!==hb||Ua.y!==$b||Ua.z!==Rb||Ua.w!==yb)z.vertexAttrib4f(sb,hb,$b,Rb,yb),Ua.x=hb,Ua.y=$b,Ua.z=Rb,Ua.w=yb;(qb=w.normal)&&("object"===typeof qb||"function"===typeof qb)&&(ea(qb)||N.getBuffer(qb)||N.getBuffer(qb.buffer)||ea(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||K(qb.constant)))||e.commandRaise(y,t);cc=!1;ib=null;rb=!1;tb=Ja=0;Ka=1;eb=0;fb=5126;vb=Wa=kb=La=0;ea(qb)?
(cc=!0,ib=N.createStream(34962,qb),fb=ib.dtype):(ib=N.getBuffer(qb))?fb=ib.dtype:"constant"in qb?(Ka=2,"number"===typeof qb.constant?(kb=qb.constant,Wa=vb=La=0):(kb=0<qb.constant.length?qb.constant[0]:0,Wa=1<qb.constant.length?qb.constant[1]:0,vb=2<qb.constant.length?qb.constant[2]:0,La=3<qb.constant.length?qb.constant[3]:0)):(ib=ea(qb.buffer)?N.createStream(34962,qb.buffer):N.getBuffer(qb.buffer),fb="type"in qb?ka[qb.type]:ib.dtype,rb=!!qb.normalized,tb=qb.size|0,Ja=qb.offset|0,eb=qb.stride|0);ub=
ga.location;Oa=T[ub];if(1===Ka){if(Oa.buffer||z.enableVertexAttribArray(ub),Cc=tb||3,Oa.type!==fb||Oa.size!==Cc||Oa.buffer!==ib||Oa.normalized!==rb||Oa.offset!==Ja||Oa.stride!==eb)z.bindBuffer(34962,ib.buffer),z.vertexAttribPointer(ub,Cc,fb,rb,eb,Ja),Oa.type=fb,Oa.size=Cc,Oa.buffer=ib,Oa.normalized=rb,Oa.offset=Ja,Oa.stride=eb}else if(Oa.buffer&&(z.disableVertexAttribArray(ub),Oa.buffer=null),Oa.x!==kb||Oa.y!==Wa||Oa.z!==vb||Oa.w!==La)z.vertexAttrib4f(ub,kb,Wa,vb,La),Oa.x=kb,Oa.y=Wa,Oa.z=vb,Oa.w=
La;(Ra=w.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(ea(Ra)||N.getBuffer(Ra)||N.getBuffer(Ra.buffer)||ea(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||K(Ra.constant)))||e.commandRaise(H,t);Mb=!1;Fb=null;Ma=!1;Za=Cd=0;Nb=1;Ob=0;nb=5126;wb=Qa=ac=Na=0;ea(Ra)?(Mb=!0,Fb=N.createStream(34962,Ra),nb=Fb.dtype):(Fb=N.getBuffer(Ra))?nb=Fb.dtype:"constant"in Ra?(Nb=2,"number"===typeof Ra.constant?(ac=Ra.constant,Qa=wb=Na=0):(ac=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?
Ra.constant[1]:0,wb=2<Ra.constant.length?Ra.constant[2]:0,Na=3<Ra.constant.length?Ra.constant[3]:0)):(Fb=ea(Ra.buffer)?N.createStream(34962,Ra.buffer):N.getBuffer(Ra.buffer),nb="type"in Ra?ka[Ra.type]:Fb.dtype,Ma=!!Ra.normalized,Za=Ra.size|0,Cd=Ra.offset|0,Ob=Ra.stride|0);xb=X.location;Ta=T[xb];if(1===Nb){if(Ta.buffer||z.enableVertexAttribArray(xb),ob=Za||2,Ta.type!==nb||Ta.size!==ob||Ta.buffer!==Fb||Ta.normalized!==Ma||Ta.offset!==Cd||Ta.stride!==Ob)z.bindBuffer(34962,Fb.buffer),z.vertexAttribPointer(xb,
ob,nb,Ma,Ob,Cd),Ta.type=nb,Ta.size=ob,Ta.buffer=Fb,Ta.normalized=Ma,Ta.offset=Cd,Ta.stride=Ob}else if(Ta.buffer&&(z.disableVertexAttribArray(xb),Ta.buffer=null),Ta.x!==ac||Ta.y!==Qa||Ta.z!==wb||Ta.w!==Na)z.vertexAttrib4f(xb,ac,Qa,wb,Na),Ta.x=ac,Ta.y=Qa,Ta.z=wb,Ta.w=Na;(hc=w.atlas)&&"framebuffer"===hc._reglType&&(hc=hc.color[0]);"function"===typeof hc&&"texture2d"===hc._reglType||e.commandRaise(Z,t);Ac=hc._texture;z.uniform1i(Q.location,Ac.bind());vc=w.elements;bb=null;(kc=ea(vc))?bb=pa.createStream(vc):
(bb=pa.getElements(vc),vc&&!bb&&e.commandRaise(g,t));bb&&z.bindBuffer(34963,bb.buffer.buffer);Rc=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||e.commandRaise(la,t);Xa&&(bb?z.drawElements(Rc,Xa,bb.type,0<<(bb.type-5121>>1)):z.drawArrays(Rc,0,Xa),td&&N.destroyStream(Kb),cc&&N.destroyStream(ib),Mb&&N.destroyStream(Fb),Ac.unbind(),kc&&pa.destroyStream(bb))}P.dirty=!0;Ba.setVAO(null);x.view=b;k&&(p.cpuTime+=performance.now()-h)}}},"$7,color,position":function(a,e,t,p,h,d,c,b,l,r){var v,k,F,I,n,aa,q,J,
C,M,L,f,w,H,E,W,D,y,Da,G,B,m,Z,g,la,Q,ga,ia,V,X,S,T,N,x,P,O;v=a.attributes;k=a.context;F=a.current;I=a.draw;n=a.elements;aa=a.framebuffer;q=a.gl;J=a.next;C=a.shader;M=a.uniforms;L=a.vao;f=J.blend_color;w=F.blend_color;H=J.blend_equation;E=F.blend_equation;W=J.blend_func;D=F.blend_func;y=J.colorMask;Da=F.colorMask;G=J.depth_range;B=F.depth_range;m=J.polygonOffset_offset;Z=F.polygonOffset_offset;g=J.sample_coverage;la=F.sample_coverage;Q=J.scissor_box;ga=F.scissor_box;ia=J.stencil_func;V=F.stencil_func;
X=J.stencil_opBack;S=F.stencil_opBack;T=J.stencil_opFront;N=F.stencil_opFront;x=J.viewport;P=F.viewport;O=[1,0,0,1];return{draw:function(a){var c,b,e,k;a=aa.next;a!==aa.cur&&(a?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null),aa.cur=a);if(F.dirty){a=J.dither;a!==F.dither&&(a?q.enable(3024):q.disable(3024),F.dither=a);a=J.blend_enable;a!==F.blend_enable&&(a?q.enable(3042):q.disable(3042),F.blend_enable=a);a=f[0];b=f[1];e=f[2];k=f[3];if(a!==w[0]||b!==w[1]||e!==w[2]||k!==w[3])q.blendColor(a,
b,e,k),w[0]=a,w[1]=b,w[2]=e,w[3]=k;a=H[0];b=H[1];if(a!==E[0]||b!==E[1])q.blendEquationSeparate(a,b),E[0]=a,E[1]=b;a=W[0];b=W[1];e=W[2];k=W[3];if(a!==D[0]||b!==D[1]||e!==D[2]||k!==D[3])q.blendFuncSeparate(a,b,e,k),D[0]=a,D[1]=b,D[2]=e,D[3]=k;a=J.depth_enable;a!==F.depth_enable&&(a?q.enable(2929):q.disable(2929),F.depth_enable=a);a=J.depth_func;a!==F.depth_func&&(q.depthFunc(a),F.depth_func=a);a=G[0];b=G[1];if(a!==B[0]||b!==B[1])q.depthRange(a,b),B[0]=a,B[1]=b;a=J.depth_mask;a!==F.depth_mask&&(q.depthMask(a),
F.depth_mask=a);a=y[0];b=y[1];e=y[2];k=y[3];if(a!==Da[0]||b!==Da[1]||e!==Da[2]||k!==Da[3])q.colorMask(a,b,e,k),Da[0]=a,Da[1]=b,Da[2]=e,Da[3]=k;a=J.cull_enable;a!==F.cull_enable&&(a?q.enable(2884):q.disable(2884),F.cull_enable=a);a=J.cull_face;a!==F.cull_face&&(q.cullFace(a),F.cull_face=a);a=J.frontFace;a!==F.frontFace&&(q.frontFace(a),F.frontFace=a);a=J.lineWidth;a!==F.lineWidth&&(q.lineWidth(a),F.lineWidth=a);a=J.polygonOffset_enable;a!==F.polygonOffset_enable&&(a?q.enable(32823):q.disable(32823),
F.polygonOffset_enable=a);a=m[0];b=m[1];if(a!==Z[0]||b!==Z[1])q.polygonOffset(a,b),Z[0]=a,Z[1]=b;a=J.sample_alpha;a!==F.sample_alpha&&(a?q.enable(32926):q.disable(32926),F.sample_alpha=a);a=J.sample_enable;a!==F.sample_enable&&(a?q.enable(32928):q.disable(32928),F.sample_enable=a);a=g[0];b=g[1];if(a!==la[0]||b!==la[1])q.sampleCoverage(a,b),la[0]=a,la[1]=b;a=J.stencil_enable;a!==F.stencil_enable&&(a?q.enable(2960):q.disable(2960),F.stencil_enable=a);a=J.stencil_mask;a!==F.stencil_mask&&(q.stencilMask(a),
F.stencil_mask=a);a=ia[0];b=ia[1];e=ia[2];if(a!==V[0]||b!==V[1]||e!==V[2])q.stencilFunc(a,b,e),V[0]=a,V[1]=b,V[2]=e;a=T[0];b=T[1];e=T[2];k=T[3];if(a!==N[0]||b!==N[1]||e!==N[2]||k!==N[3])q.stencilOpSeparate(a,b,e,k),N[0]=a,N[1]=b,N[2]=e,N[3]=k;a=X[0];b=X[1];e=X[2];k=X[3];if(a!==S[0]||b!==S[1]||e!==S[2]||k!==S[3])q.stencilOpSeparate(a,b,e,k),S[0]=a,S[1]=b,S[2]=e,S[3]=k;a=J.scissor_enable;a!==F.scissor_enable&&(a?q.enable(3089):q.disable(3089),F.scissor_enable=a);a=Q[0];b=Q[1];e=Q[2];k=Q[3];if(a!==ga[0]||
b!==ga[1]||e!==ga[2]||k!==ga[3])q.scissor(a,b,e,k),ga[0]=a,ga[1]=b,ga[2]=e,ga[3]=k;a=x[0];b=x[1];e=x[2];k=x[3];if(a!==P[0]||b!==P[1]||e!==P[2]||k!==P[3])q.viewport(a,b,e,k),P[0]=a,P[1]=b,P[2]=e,P[3]=k;F.dirty=!1}if(a=F.profile)c=performance.now(),p.count++;q.useProgram(h.program);L.setVAO(null);b=r.location;e=v[b];e.buffer||q.enableVertexAttribArray(b);if(e.type!==d.dtype||2!==e.size||e.buffer!==d||!1!==e.normalized||0!==e.offset||0!==e.stride)q.bindBuffer(34962,d.buffer),q.vertexAttribPointer(b,
2,d.dtype,!1,0,0),e.type=d.dtype,e.size=2,e.buffer=d,e.normalized=!1,e.offset=0,e.stride=0;q.uniform4f(l.location,1,0,0,1);(b=I.elements)?q.bindBuffer(34963,b.buffer.buffer):L.currentVAO&&(b=n.getElements(L.currentVAO.elements))&&q.bindBuffer(34963,b.buffer.buffer);e=I.primitive;k=I.offset;b?q.drawElements(e,3,b.type,k<<(b.type-5121>>1)):q.drawArrays(e,k,3);L.setVAO(null);a&&(p.cpuTime+=performance.now()-c)},scope:function(a,b,e){var f,g,m,h,t,x,l,w,r,v,q,y,n,sa,B,D,A,u;if(f=F.profile)g=performance.now(),
p.count++;m=I.count;I.count=3;h=M[3];M[3]=O;t=c.buffer;c.buffer=d;x=c.divisor;c.divisor=0;l=c.normalized;c.normalized=!1;w=c.offset;c.offset=0;r=c.size;c.size=0;v=c.state;c.state=1;q=c.stride;c.stride=0;y=c.type;c.type=d.dtype;n=c.w;c.w=0;sa=c.x;c.x=0;B=c.y;c.y=0;D=c.z;c.z=0;A=C.vert;C.vert=2;u=C.frag;C.frag=1;b(k,a,e);f&&(p.cpuTime+=performance.now()-g);I.count=m;M[3]=h;c.buffer=t;c.divisor=x;c.normalized=l;c.offset=w;c.size=r;c.state=v;c.stride=q;c.type=y;c.w=n;c.x=sa;c.y=B;c.z=D;C.vert=A;C.frag=
u},batch:function(a,c){var e,k,h;e=aa.next;e!==aa.cur&&(e?q.bindFramebuffer(36160,e.framebuffer):q.bindFramebuffer(36160,null),aa.cur=e);if(F.dirty){var t,C;e=J.dither;e!==F.dither&&(e?q.enable(3024):q.disable(3024),F.dither=e);e=J.blend_enable;e!==F.blend_enable&&(e?q.enable(3042):q.disable(3042),F.blend_enable=e);e=f[0];h=f[1];t=f[2];C=f[3];if(e!==w[0]||h!==w[1]||t!==w[2]||C!==w[3])q.blendColor(e,h,t,C),w[0]=e,w[1]=h,w[2]=t,w[3]=C;e=H[0];h=H[1];if(e!==E[0]||h!==E[1])q.blendEquationSeparate(e,h),
E[0]=e,E[1]=h;e=W[0];h=W[1];t=W[2];C=W[3];if(e!==D[0]||h!==D[1]||t!==D[2]||C!==D[3])q.blendFuncSeparate(e,h,t,C),D[0]=e,D[1]=h,D[2]=t,D[3]=C;e=J.depth_enable;e!==F.depth_enable&&(e?q.enable(2929):q.disable(2929),F.depth_enable=e);e=J.depth_func;e!==F.depth_func&&(q.depthFunc(e),F.depth_func=e);e=G[0];h=G[1];if(e!==B[0]||h!==B[1])q.depthRange(e,h),B[0]=e,B[1]=h;e=J.depth_mask;e!==F.depth_mask&&(q.depthMask(e),F.depth_mask=e);e=y[0];h=y[1];t=y[2];C=y[3];if(e!==Da[0]||h!==Da[1]||t!==Da[2]||C!==Da[3])q.colorMask(e,
h,t,C),Da[0]=e,Da[1]=h,Da[2]=t,Da[3]=C;e=J.cull_enable;e!==F.cull_enable&&(e?q.enable(2884):q.disable(2884),F.cull_enable=e);e=J.cull_face;e!==F.cull_face&&(q.cullFace(e),F.cull_face=e);e=J.frontFace;e!==F.frontFace&&(q.frontFace(e),F.frontFace=e);e=J.lineWidth;e!==F.lineWidth&&(q.lineWidth(e),F.lineWidth=e);e=J.polygonOffset_enable;e!==F.polygonOffset_enable&&(e?q.enable(32823):q.disable(32823),F.polygonOffset_enable=e);e=m[0];h=m[1];if(e!==Z[0]||h!==Z[1])q.polygonOffset(e,h),Z[0]=e,Z[1]=h;e=J.sample_alpha;
e!==F.sample_alpha&&(e?q.enable(32926):q.disable(32926),F.sample_alpha=e);e=J.sample_enable;e!==F.sample_enable&&(e?q.enable(32928):q.disable(32928),F.sample_enable=e);e=g[0];h=g[1];if(e!==la[0]||h!==la[1])q.sampleCoverage(e,h),la[0]=e,la[1]=h;e=J.stencil_enable;e!==F.stencil_enable&&(e?q.enable(2960):q.disable(2960),F.stencil_enable=e);e=J.stencil_mask;e!==F.stencil_mask&&(q.stencilMask(e),F.stencil_mask=e);e=ia[0];h=ia[1];t=ia[2];if(e!==V[0]||h!==V[1]||t!==V[2])q.stencilFunc(e,h,t),V[0]=e,V[1]=
h,V[2]=t;e=T[0];h=T[1];t=T[2];C=T[3];if(e!==N[0]||h!==N[1]||t!==N[2]||C!==N[3])q.stencilOpSeparate(e,h,t,C),N[0]=e,N[1]=h,N[2]=t,N[3]=C;e=X[0];h=X[1];t=X[2];C=X[3];if(e!==S[0]||h!==S[1]||t!==S[2]||C!==S[3])q.stencilOpSeparate(e,h,t,C),S[0]=e,S[1]=h,S[2]=t,S[3]=C;e=J.scissor_enable;e!==F.scissor_enable&&(e?q.enable(3089):q.disable(3089),F.scissor_enable=e);e=Q[0];h=Q[1];t=Q[2];C=Q[3];if(e!==ga[0]||h!==ga[1]||t!==ga[2]||C!==ga[3])q.scissor(e,h,t,C),ga[0]=e,ga[1]=h,ga[2]=t,ga[3]=C;e=x[0];h=x[1];t=x[2];
C=x[3];if(e!==P[0]||h!==P[1]||t!==P[2]||C!==P[3])q.viewport(e,h,t,C),P[0]=e,P[1]=h,P[2]=t,P[3]=C;F.dirty=!1}if(e=F.profile)k=performance.now(),p.count+=c;q.useProgram(b.program);var M;L.setVAO(null);h=r.location;t=v[h];t.buffer||q.enableVertexAttribArray(h);if(t.type!==d.dtype||2!==t.size||t.buffer!==d||!1!==t.normalized||0!==t.offset||0!==t.stride)q.bindBuffer(34962,d.buffer),q.vertexAttribPointer(h,2,d.dtype,!1,0,0),t.type=d.dtype,t.size=2,t.buffer=d,t.normalized=!1,t.offset=0,t.stride=0;q.uniform4f(l.location,
1,0,0,1);(t=I.elements)?q.bindBuffer(34963,t.buffer.buffer):L.currentVAO&&(t=n.getElements(L.currentVAO.elements))&&q.bindBuffer(34963,t.buffer.buffer);C=I.primitive;M=I.offset;for(h=0;h<c;++h)t?q.drawElements(C,3,t.type,M<<(t.type-5121>>1)):q.drawArrays(C,M,3);L.setVAO(null);e&&(p.cpuTime+=performance.now()-k)}}},"$19,angle,color,offset,position":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,L,f,w,H){var E,W,D,y,Da,G,B,m,Z,g,la,Q,ga,ia,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na;E=
a.attributes;W=a.context;D=a.current;y=a.draw;Da=a.elements;G=a.framebuffer;B=a.gl;m=a.isArrayLike;Z=a.next;g=a.shader;la=a.uniforms;Q=a.vao;ga=Z.blend_color;ia=D.blend_color;V=Z.blend_equation;X=D.blend_equation;S=Z.blend_func;T=D.blend_func;N=Z.colorMask;x=D.colorMask;P=Z.depth_range;O=D.depth_range;pa=Z.polygonOffset_offset;oa=D.polygonOffset_offset;z=Z.sample_coverage;K=D.sample_coverage;ea=Z.scissor_box;U=D.scissor_box;ma=Z.stencil_func;qa=D.stencil_func;Ba=Z.stencil_opBack;ya=D.stencil_opBack;
da=Z.stencil_opFront;Ca=D.stencil_opFront;ja=Z.viewport;na=D.viewport;return{draw:function(a){var g,k,q,n;g=G.next;g!==G.cur&&(g?B.bindFramebuffer(36160,g.framebuffer):B.bindFramebuffer(36160,null),G.cur=g);if(D.dirty){var A;g=Z.dither;g!==D.dither&&(g?B.enable(3024):B.disable(3024),D.dither=g);g=Z.blend_enable;g!==D.blend_enable&&(g?B.enable(3042):B.disable(3042),D.blend_enable=g);g=ga[0];q=ga[1];n=ga[2];A=ga[3];if(g!==ia[0]||q!==ia[1]||n!==ia[2]||A!==ia[3])B.blendColor(g,q,n,A),ia[0]=g,ia[1]=q,
ia[2]=n,ia[3]=A;g=V[0];q=V[1];if(g!==X[0]||q!==X[1])B.blendEquationSeparate(g,q),X[0]=g,X[1]=q;g=S[0];q=S[1];n=S[2];A=S[3];if(g!==T[0]||q!==T[1]||n!==T[2]||A!==T[3])B.blendFuncSeparate(g,q,n,A),T[0]=g,T[1]=q,T[2]=n,T[3]=A;g=Z.depth_func;g!==D.depth_func&&(B.depthFunc(g),D.depth_func=g);g=P[0];q=P[1];if(g!==O[0]||q!==O[1])B.depthRange(g,q),O[0]=g,O[1]=q;g=Z.depth_mask;g!==D.depth_mask&&(B.depthMask(g),D.depth_mask=g);g=N[0];q=N[1];n=N[2];A=N[3];if(g!==x[0]||q!==x[1]||n!==x[2]||A!==x[3])B.colorMask(g,
q,n,A),x[0]=g,x[1]=q,x[2]=n,x[3]=A;g=Z.cull_enable;g!==D.cull_enable&&(g?B.enable(2884):B.disable(2884),D.cull_enable=g);g=Z.cull_face;g!==D.cull_face&&(B.cullFace(g),D.cull_face=g);g=Z.frontFace;g!==D.frontFace&&(B.frontFace(g),D.frontFace=g);g=Z.lineWidth;g!==D.lineWidth&&(B.lineWidth(g),D.lineWidth=g);g=Z.polygonOffset_enable;g!==D.polygonOffset_enable&&(g?B.enable(32823):B.disable(32823),D.polygonOffset_enable=g);g=pa[0];q=pa[1];if(g!==oa[0]||q!==oa[1])B.polygonOffset(g,q),oa[0]=g,oa[1]=q;g=Z.sample_alpha;
g!==D.sample_alpha&&(g?B.enable(32926):B.disable(32926),D.sample_alpha=g);g=Z.sample_enable;g!==D.sample_enable&&(g?B.enable(32928):B.disable(32928),D.sample_enable=g);g=z[0];q=z[1];if(g!==K[0]||q!==K[1])B.sampleCoverage(g,q),K[0]=g,K[1]=q;g=Z.stencil_enable;g!==D.stencil_enable&&(g?B.enable(2960):B.disable(2960),D.stencil_enable=g);g=Z.stencil_mask;g!==D.stencil_mask&&(B.stencilMask(g),D.stencil_mask=g);g=ma[0];q=ma[1];n=ma[2];if(g!==qa[0]||q!==qa[1]||n!==qa[2])B.stencilFunc(g,q,n),qa[0]=g,qa[1]=
q,qa[2]=n;g=da[0];q=da[1];n=da[2];A=da[3];if(g!==Ca[0]||q!==Ca[1]||n!==Ca[2]||A!==Ca[3])B.stencilOpSeparate(g,q,n,A),Ca[0]=g,Ca[1]=q,Ca[2]=n,Ca[3]=A;g=Ba[0];q=Ba[1];n=Ba[2];A=Ba[3];if(g!==ya[0]||q!==ya[1]||n!==ya[2]||A!==ya[3])B.stencilOpSeparate(g,q,n,A),ya[0]=g,ya[1]=q,ya[2]=n,ya[3]=A;g=Z.scissor_enable;g!==D.scissor_enable&&(g?B.enable(3089):B.disable(3089),D.scissor_enable=g);g=ea[0];q=ea[1];n=ea[2];A=ea[3];if(g!==U[0]||q!==U[1]||n!==U[2]||A!==U[3])B.scissor(g,q,n,A),U[0]=g,U[1]=q,U[2]=n,U[3]=
A;g=ja[0];q=ja[1];n=ja[2];A=ja[3];if(g!==na[0]||q!==na[1]||n!==na[2]||A!==na[3])B.viewport(g,q,n,A),na[0]=g,na[1]=q,na[2]=n,na[3]=A}B.disable(2929);D.depth_enable=!1;if(g=D.profile)k=performance.now(),p.count++;B.useProgram(h.program);Q.setVAO(null);q=H.location;n=E[q];n.buffer||B.enableVertexAttribArray(q);if(n.type!==d.dtype||2!==n.size||n.buffer!==d||!1!==n.normalized||0!==n.offset||0!==n.stride)B.bindBuffer(34962,d.buffer),B.vertexAttribPointer(q,2,d.dtype,!1,0,0),n.type=d.dtype,n.size=2,n.buffer=
d,n.normalized=!1,n.offset=0,n.stride=0;q=c.call(this,W,a,0);"number"!==typeof q&&e.commandRaise(b,t);B.uniform1f(L.location,q);q=a.offset;m(q)&&2===q.length||e.commandRaise(l,t);B.uniform2f(w.location,q[0],q[1]);a=r.call(this,W,a,0);m(a)&&4===a.length||e.commandRaise(v,t);B.uniform4f(f.location,a[0],a[1],a[2],a[3]);(a=y.elements)?B.bindBuffer(34963,a.buffer.buffer):Q.currentVAO&&(a=Da.getElements(Q.currentVAO.elements))&&B.bindBuffer(34963,a.buffer.buffer);q=y.primitive;n=y.offset;a?B.drawElements(q,
3,a.type,n<<(a.type-5121>>1)):B.drawArrays(q,n,3);D.dirty=!0;Q.setVAO(null);g&&(p.cpuTime+=performance.now()-k)},scope:function(a,c,b){var e,f,m,h,t,x,l,w,r,v,q,z,n,C,B,E,G,da,J,K,U;e=Z.depth_enable;Z.depth_enable=!1;if(f=D.profile)m=performance.now(),p.count++;h=y.count;y.count=3;t=k.call(this,W,a,b);x=la[3];la[3]=t;l=F.call(this,W,a,b);t=la[5];la[5]=l;w=a.offset;l=la[4];la[4]=w;w=I.buffer;I.buffer=d;r=I.divisor;I.divisor=0;v=I.normalized;I.normalized=!1;q=I.offset;I.offset=0;z=I.size;I.size=0;n=
I.state;I.state=1;C=I.stride;I.stride=0;B=I.type;I.type=d.dtype;E=I.w;I.w=0;G=I.x;I.x=0;da=I.y;I.y=0;J=I.z;I.z=0;K=g.vert;g.vert=2;U=g.frag;g.frag=1;D.dirty=!0;c(W,a,b);Z.depth_enable=e;f&&(p.cpuTime+=performance.now()-m);y.count=h;la[3]=x;la[5]=t;la[4]=l;I.buffer=w;I.divisor=r;I.normalized=v;I.offset=q;I.size=z;I.state=n;I.stride=C;I.type=B;I.w=E;I.x=G;I.y=da;I.z=J;g.vert=K;g.frag=U;D.dirty=!0},batch:function(a,c){var b,g,k,h;b=G.next;b!==G.cur&&(b?B.bindFramebuffer(36160,b.framebuffer):B.bindFramebuffer(36160,
null),G.cur=b);if(D.dirty){var u,l,r;b=Z.dither;b!==D.dither&&(b?B.enable(3024):B.disable(3024),D.dither=b);b=Z.blend_enable;b!==D.blend_enable&&(b?B.enable(3042):B.disable(3042),D.blend_enable=b);b=ga[0];u=ga[1];l=ga[2];r=ga[3];if(b!==ia[0]||u!==ia[1]||l!==ia[2]||r!==ia[3])B.blendColor(b,u,l,r),ia[0]=b,ia[1]=u,ia[2]=l,ia[3]=r;b=V[0];u=V[1];if(b!==X[0]||u!==X[1])B.blendEquationSeparate(b,u),X[0]=b,X[1]=u;b=S[0];u=S[1];l=S[2];r=S[3];if(b!==T[0]||u!==T[1]||l!==T[2]||r!==T[3])B.blendFuncSeparate(b,u,
l,r),T[0]=b,T[1]=u,T[2]=l,T[3]=r;b=Z.depth_func;b!==D.depth_func&&(B.depthFunc(b),D.depth_func=b);b=P[0];u=P[1];if(b!==O[0]||u!==O[1])B.depthRange(b,u),O[0]=b,O[1]=u;b=Z.depth_mask;b!==D.depth_mask&&(B.depthMask(b),D.depth_mask=b);b=N[0];u=N[1];l=N[2];r=N[3];if(b!==x[0]||u!==x[1]||l!==x[2]||r!==x[3])B.colorMask(b,u,l,r),x[0]=b,x[1]=u,x[2]=l,x[3]=r;b=Z.cull_enable;b!==D.cull_enable&&(b?B.enable(2884):B.disable(2884),D.cull_enable=b);b=Z.cull_face;b!==D.cull_face&&(B.cullFace(b),D.cull_face=b);b=Z.frontFace;
b!==D.frontFace&&(B.frontFace(b),D.frontFace=b);b=Z.lineWidth;b!==D.lineWidth&&(B.lineWidth(b),D.lineWidth=b);b=Z.polygonOffset_enable;b!==D.polygonOffset_enable&&(b?B.enable(32823):B.disable(32823),D.polygonOffset_enable=b);b=pa[0];u=pa[1];if(b!==oa[0]||u!==oa[1])B.polygonOffset(b,u),oa[0]=b,oa[1]=u;b=Z.sample_alpha;b!==D.sample_alpha&&(b?B.enable(32926):B.disable(32926),D.sample_alpha=b);b=Z.sample_enable;b!==D.sample_enable&&(b?B.enable(32928):B.disable(32928),D.sample_enable=b);b=z[0];u=z[1];
if(b!==K[0]||u!==K[1])B.sampleCoverage(b,u),K[0]=b,K[1]=u;b=Z.stencil_enable;b!==D.stencil_enable&&(b?B.enable(2960):B.disable(2960),D.stencil_enable=b);b=Z.stencil_mask;b!==D.stencil_mask&&(B.stencilMask(b),D.stencil_mask=b);b=ma[0];u=ma[1];l=ma[2];if(b!==qa[0]||u!==qa[1]||l!==qa[2])B.stencilFunc(b,u,l),qa[0]=b,qa[1]=u,qa[2]=l;b=da[0];u=da[1];l=da[2];r=da[3];if(b!==Ca[0]||u!==Ca[1]||l!==Ca[2]||r!==Ca[3])B.stencilOpSeparate(b,u,l,r),Ca[0]=b,Ca[1]=u,Ca[2]=l,Ca[3]=r;b=Ba[0];u=Ba[1];l=Ba[2];r=Ba[3];
if(b!==ya[0]||u!==ya[1]||l!==ya[2]||r!==ya[3])B.stencilOpSeparate(b,u,l,r),ya[0]=b,ya[1]=u,ya[2]=l,ya[3]=r;b=Z.scissor_enable;b!==D.scissor_enable&&(b?B.enable(3089):B.disable(3089),D.scissor_enable=b);b=ea[0];u=ea[1];l=ea[2];r=ea[3];if(b!==U[0]||u!==U[1]||l!==U[2]||r!==U[3])B.scissor(b,u,l,r),U[0]=b,U[1]=u,U[2]=l,U[3]=r;b=ja[0];u=ja[1];l=ja[2];r=ja[3];if(b!==na[0]||u!==na[1]||l!==na[2]||r!==na[3])B.viewport(b,u,l,r),na[0]=b,na[1]=u,na[2]=l,na[3]=r}B.disable(2929);D.depth_enable=!1;if(b=D.profile)g=
performance.now(),p.count+=c;B.useProgram(n.program);Q.setVAO(null);u=H.location;l=E[u];l.buffer||B.enableVertexAttribArray(u);if(l.type!==d.dtype||2!==l.size||l.buffer!==d||!1!==l.normalized||0!==l.offset||0!==l.stride)B.bindBuffer(34962,d.buffer),B.vertexAttribPointer(u,2,d.dtype,!1,0,0),l.type=d.dtype,l.size=2,l.buffer=d,l.normalized=!1,l.offset=0,l.stride=0;k=aa.call(this,W,h,k);"number"!==typeof k&&e.commandRaise(q,t);B.uniform1f(L.location,k);(u=y.elements)?B.bindBuffer(34963,u.buffer.buffer):
Q.currentVAO&&(u=Da.getElements(Q.currentVAO.elements))&&B.bindBuffer(34963,u.buffer.buffer);l=y.primitive;r=y.offset;for(k=0;k<c;++k){h=a[k];var v,F,I,fa,R,va,Ga,ra,xa;v=h.offset;m(v)&&2===v.length||e.commandRaise(J,t);F=v[0];v=v[1];k&&I===F&&fa===v||(I=F,fa=v,B.uniform2f(w.location,F,v));R=C.call(this,W,h,k);m(R)&&4===R.length||e.commandRaise(M,t);h=R[0];F=R[1];v=R[2];R=R[3];k&&va===h&&Ga===F&&ra===v&&xa===R||(va=h,Ga=F,ra=v,xa=R,B.uniform4f(f.location,h,F,v,R));u?B.drawElements(l,3,u.type,r<<(u.type-
5121>>1)):B.drawArrays(l,r,3)}D.dirty=!0;Q.setVAO(null);b&&(p.cpuTime+=performance.now()-g)}}},"$23,model,position,projection,view":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,L,f,w,H,E,W,D,y){var ia,G,B,m,Z,g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa;ia=a.attributes;G=a.context;B=a.current;m=a.draw;Z=a.framebuffer;g=a.gl;la=a.isArrayLike;Q=a.next;ga=a.shader;Ea=a.uniforms;V=a.vao;X=Q.blend_color;S=B.blend_color;T=Q.blend_equation;N=B.blend_equation;
x=Q.blend_func;P=B.blend_func;O=Q.colorMask;pa=B.colorMask;oa=Q.depth_range;z=B.depth_range;K=Q.polygonOffset_offset;ea=B.polygonOffset_offset;U=Q.sample_coverage;ma=B.sample_coverage;qa=Q.scissor_box;Ba=B.scissor_box;ya=Q.stencil_func;da=B.stencil_func;Ca=Q.stencil_opBack;ja=B.stencil_opBack;na=Q.stencil_opFront;za=B.stencil_opFront;Pa=Q.viewport;sa=B.viewport;zb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ya=new Float32Array(16);A=new Float32Array(16);u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];
ha=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(a){var f,m,u,w;f=Z.next;f!==Z.cur&&(f?g.bindFramebuffer(36160,f.framebuffer):g.bindFramebuffer(36160,null),Z.cur=f);if(B.dirty){var q;f=Q.dither;f!==B.dither&&(f?g.enable(3024):g.disable(3024),B.dither=f);f=Q.blend_enable;f!==B.blend_enable&&(f?g.enable(3042):g.disable(3042),B.blend_enable=f);f=X[0];u=X[1];w=X[2];q=X[3];if(f!==S[0]||u!==S[1]||w!==S[2]||q!==S[3])g.blendColor(f,
u,w,q),S[0]=f,S[1]=u,S[2]=w,S[3]=q;f=T[0];u=T[1];if(f!==N[0]||u!==N[1])g.blendEquationSeparate(f,u),N[0]=f,N[1]=u;f=x[0];u=x[1];w=x[2];q=x[3];if(f!==P[0]||u!==P[1]||w!==P[2]||q!==P[3])g.blendFuncSeparate(f,u,w,q),P[0]=f,P[1]=u,P[2]=w,P[3]=q;f=Q.depth_enable;f!==B.depth_enable&&(f?g.enable(2929):g.disable(2929),B.depth_enable=f);f=Q.depth_func;f!==B.depth_func&&(g.depthFunc(f),B.depth_func=f);f=oa[0];u=oa[1];if(f!==z[0]||u!==z[1])g.depthRange(f,u),z[0]=f,z[1]=u;f=Q.depth_mask;f!==B.depth_mask&&(g.depthMask(f),
B.depth_mask=f);f=O[0];u=O[1];w=O[2];q=O[3];if(f!==pa[0]||u!==pa[1]||w!==pa[2]||q!==pa[3])g.colorMask(f,u,w,q),pa[0]=f,pa[1]=u,pa[2]=w,pa[3]=q;f=Q.cull_enable;f!==B.cull_enable&&(f?g.enable(2884):g.disable(2884),B.cull_enable=f);f=Q.cull_face;f!==B.cull_face&&(g.cullFace(f),B.cull_face=f);f=Q.frontFace;f!==B.frontFace&&(g.frontFace(f),B.frontFace=f);f=Q.lineWidth;f!==B.lineWidth&&(g.lineWidth(f),B.lineWidth=f);f=Q.polygonOffset_enable;f!==B.polygonOffset_enable&&(f?g.enable(32823):g.disable(32823),
B.polygonOffset_enable=f);f=K[0];u=K[1];if(f!==ea[0]||u!==ea[1])g.polygonOffset(f,u),ea[0]=f,ea[1]=u;f=Q.sample_alpha;f!==B.sample_alpha&&(f?g.enable(32926):g.disable(32926),B.sample_alpha=f);f=Q.sample_enable;f!==B.sample_enable&&(f?g.enable(32928):g.disable(32928),B.sample_enable=f);f=U[0];u=U[1];if(f!==ma[0]||u!==ma[1])g.sampleCoverage(f,u),ma[0]=f,ma[1]=u;f=Q.stencil_enable;f!==B.stencil_enable&&(f?g.enable(2960):g.disable(2960),B.stencil_enable=f);f=Q.stencil_mask;f!==B.stencil_mask&&(g.stencilMask(f),
B.stencil_mask=f);f=ya[0];u=ya[1];w=ya[2];if(f!==da[0]||u!==da[1]||w!==da[2])g.stencilFunc(f,u,w),da[0]=f,da[1]=u,da[2]=w;f=na[0];u=na[1];w=na[2];q=na[3];if(f!==za[0]||u!==za[1]||w!==za[2]||q!==za[3])g.stencilOpSeparate(f,u,w,q),za[0]=f,za[1]=u,za[2]=w,za[3]=q;f=Ca[0];u=Ca[1];w=Ca[2];q=Ca[3];if(f!==ja[0]||u!==ja[1]||w!==ja[2]||q!==ja[3])g.stencilOpSeparate(f,u,w,q),ja[0]=f,ja[1]=u,ja[2]=w,ja[3]=q;f=Q.scissor_enable;f!==B.scissor_enable&&(f?g.enable(3089):g.disable(3089),B.scissor_enable=f);f=qa[0];
u=qa[1];w=qa[2];q=qa[3];if(f!==Ba[0]||u!==Ba[1]||w!==Ba[2]||q!==Ba[3])g.scissor(f,u,w,q),Ba[0]=f,Ba[1]=u,Ba[2]=w,Ba[3]=q;f=Pa[0];u=Pa[1];w=Pa[2];q=Pa[3];if(f!==sa[0]||u!==sa[1]||w!==sa[2]||q!==sa[3])g.viewport(f,u,w,q),sa[0]=f,sa[1]=u,sa[2]=w,sa[3]=q;B.dirty=!1}if(f=B.profile)m=performance.now(),p.count++;g.useProgram(h.program);V.setVAO(null);u=W.location;w=ia[u];w.buffer||g.enableVertexAttribArray(u);if(w.type!==d.dtype||3!==w.size||w.buffer!==d||!1!==w.normalized||0!==w.offset||0!==w.stride)g.bindBuffer(34962,
d.buffer),g.vertexAttribPointer(u,3,d.dtype,!1,0,0),w.type=d.dtype,w.size=3,w.buffer=d,w.normalized=!1,w.offset=0,w.stride=0;g.uniformMatrix4fv(E.location,!1,zb);u=c.call(this,G,a,0);la(u)&&16===u.length||e.commandRaise(b,t);g.uniformMatrix4fv(y.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(Ya[0]=u[0],Ya[1]=u[1],Ya[2]=u[2],Ya[3]=u[3],Ya[4]=u[4],Ya[5]=u[5],Ya[6]=u[6],Ya[7]=u[7],Ya[8]=u[8],Ya[9]=u[9],Ya[10]=u[10],Ya[11]=u[11],Ya[12]=u[12],Ya[13]=u[13],Ya[14]=u[14],Ya[15]=u[15],Ya));a=l.call(this,
G,a,0);la(a)&&16===a.length||e.commandRaise(r,t);g.uniformMatrix4fv(D.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(A[0]=a[0],A[1]=a[1],A[2]=a[2],A[3]=a[3],A[4]=a[4],A[5]=a[5],A[6]=a[6],A[7]=a[7],A[8]=a[8],A[9]=a[9],A[10]=a[10],A[11]=a[11],A[12]=a[12],A[13]=a[13],A[14]=a[14],A[15]=a[15],A));v&&g.bindBuffer(34963,v.buffer.buffer);a=v.primType;u=v.vertCount-0;0<=u||e.commandRaise(k,t);u&&(g.drawElements(a,u,v.type,0<<(v.type-5121>>1)),V.setVAO(null),f&&(p.cpuTime+=performance.now()-m))},
scope:function(a,b,c){var f,g,k,h,l,A,w,x,r,v,z,y,C,D,ha,E,da,J,K,U,M,sa,N;if(f=B.profile)g=performance.now(),p.count++;k=m.elements;m.elements=F;h=m.offset;m.offset=0;l=F.vertCount-0;0<=l||e.commandRaise(I,t);A=m.count;m.count=l;w=F.primType;l=m.primitive;m.primitive=w;w=Ea[3];Ea[3]=u;x=n.call(this,G,a,c);r=Ea[5];Ea[5]=x;v=aa.call(this,G,a,c);x=Ea[4];Ea[4]=v;v=q.buffer;q.buffer=d;z=q.divisor;q.divisor=0;y=q.normalized;q.normalized=!1;C=q.offset;q.offset=0;D=q.size;q.size=0;ha=q.state;q.state=1;E=
q.stride;q.stride=0;da=q.type;q.type=d.dtype;J=q.w;q.w=0;K=q.x;q.x=0;U=q.y;q.y=0;M=q.z;q.z=0;sa=ga.vert;ga.vert=2;N=ga.frag;ga.frag=1;b(G,a,c);f&&(p.cpuTime+=performance.now()-g);m.elements=k;m.offset=h;m.count=A;m.primitive=l;Ea[3]=w;Ea[5]=r;Ea[4]=x;q.buffer=v;q.divisor=z;q.normalized=y;q.offset=C;q.size=D;q.state=ha;q.stride=E;q.type=da;q.w=J;q.x=K;q.y=U;q.z=M;ga.vert=sa;ga.frag=N},batch:function(a,b){var c,m,k;c=Z.next;c!==Z.cur&&(c?g.bindFramebuffer(36160,c.framebuffer):g.bindFramebuffer(36160,
null),Z.cur=c);if(B.dirty){var h,u,l;c=Q.dither;c!==B.dither&&(c?g.enable(3024):g.disable(3024),B.dither=c);c=Q.blend_enable;c!==B.blend_enable&&(c?g.enable(3042):g.disable(3042),B.blend_enable=c);c=X[0];h=X[1];u=X[2];l=X[3];if(c!==S[0]||h!==S[1]||u!==S[2]||l!==S[3])g.blendColor(c,h,u,l),S[0]=c,S[1]=h,S[2]=u,S[3]=l;c=T[0];h=T[1];if(c!==N[0]||h!==N[1])g.blendEquationSeparate(c,h),N[0]=c,N[1]=h;c=x[0];h=x[1];u=x[2];l=x[3];if(c!==P[0]||h!==P[1]||u!==P[2]||l!==P[3])g.blendFuncSeparate(c,h,u,l),P[0]=c,
P[1]=h,P[2]=u,P[3]=l;c=Q.depth_enable;c!==B.depth_enable&&(c?g.enable(2929):g.disable(2929),B.depth_enable=c);c=Q.depth_func;c!==B.depth_func&&(g.depthFunc(c),B.depth_func=c);c=oa[0];h=oa[1];if(c!==z[0]||h!==z[1])g.depthRange(c,h),z[0]=c,z[1]=h;c=Q.depth_mask;c!==B.depth_mask&&(g.depthMask(c),B.depth_mask=c);c=O[0];h=O[1];u=O[2];l=O[3];if(c!==pa[0]||h!==pa[1]||u!==pa[2]||l!==pa[3])g.colorMask(c,h,u,l),pa[0]=c,pa[1]=h,pa[2]=u,pa[3]=l;c=Q.cull_enable;c!==B.cull_enable&&(c?g.enable(2884):g.disable(2884),
B.cull_enable=c);c=Q.cull_face;c!==B.cull_face&&(g.cullFace(c),B.cull_face=c);c=Q.frontFace;c!==B.frontFace&&(g.frontFace(c),B.frontFace=c);c=Q.lineWidth;c!==B.lineWidth&&(g.lineWidth(c),B.lineWidth=c);c=Q.polygonOffset_enable;c!==B.polygonOffset_enable&&(c?g.enable(32823):g.disable(32823),B.polygonOffset_enable=c);c=K[0];h=K[1];if(c!==ea[0]||h!==ea[1])g.polygonOffset(c,h),ea[0]=c,ea[1]=h;c=Q.sample_alpha;c!==B.sample_alpha&&(c?g.enable(32926):g.disable(32926),B.sample_alpha=c);c=Q.sample_enable;
c!==B.sample_enable&&(c?g.enable(32928):g.disable(32928),B.sample_enable=c);c=U[0];h=U[1];if(c!==ma[0]||h!==ma[1])g.sampleCoverage(c,h),ma[0]=c,ma[1]=h;c=Q.stencil_enable;c!==B.stencil_enable&&(c?g.enable(2960):g.disable(2960),B.stencil_enable=c);c=Q.stencil_mask;c!==B.stencil_mask&&(g.stencilMask(c),B.stencil_mask=c);c=ya[0];h=ya[1];u=ya[2];if(c!==da[0]||h!==da[1]||u!==da[2])g.stencilFunc(c,h,u),da[0]=c,da[1]=h,da[2]=u;c=na[0];h=na[1];u=na[2];l=na[3];if(c!==za[0]||h!==za[1]||u!==za[2]||l!==za[3])g.stencilOpSeparate(c,
h,u,l),za[0]=c,za[1]=h,za[2]=u,za[3]=l;c=Ca[0];h=Ca[1];u=Ca[2];l=Ca[3];if(c!==ja[0]||h!==ja[1]||u!==ja[2]||l!==ja[3])g.stencilOpSeparate(c,h,u,l),ja[0]=c,ja[1]=h,ja[2]=u,ja[3]=l;c=Q.scissor_enable;c!==B.scissor_enable&&(c?g.enable(3089):g.disable(3089),B.scissor_enable=c);c=qa[0];h=qa[1];u=qa[2];l=qa[3];if(c!==Ba[0]||h!==Ba[1]||u!==Ba[2]||l!==Ba[3])g.scissor(c,h,u,l),Ba[0]=c,Ba[1]=h,Ba[2]=u,Ba[3]=l;c=Pa[0];h=Pa[1];u=Pa[2];l=Pa[3];if(c!==sa[0]||h!==sa[1]||u!==sa[2]||l!==sa[3])g.viewport(c,h,u,l),sa[0]=
c,sa[1]=h,sa[2]=u,sa[3]=l;B.dirty=!1}if(c=B.profile)m=performance.now(),p.count+=b;g.useProgram(J.program);V.setVAO(null);h=W.location;u=ia[h];u.buffer||g.enableVertexAttribArray(h);if(u.type!==d.dtype||3!==u.size||u.buffer!==d||!1!==u.normalized||0!==u.offset||0!==u.stride)g.bindBuffer(34962,d.buffer),g.vertexAttribPointer(h,3,d.dtype,!1,0,0),u.type=d.dtype,u.size=3,u.buffer=d,u.normalized=!1,u.offset=0,u.stride=0;g.uniformMatrix4fv(E.location,!1,ha);h=C.call(this,G,void 0,k);la(h)&&16===h.length||
e.commandRaise(M,t);g.uniformMatrix4fv(y.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(ua[0]=h[0],ua[1]=h[1],ua[2]=h[2],ua[3]=h[3],ua[4]=h[4],ua[5]=h[5],ua[6]=h[6],ua[7]=h[7],ua[8]=h[8],ua[9]=h[9],ua[10]=h[10],ua[11]=h[11],ua[12]=h[12],ua[13]=h[13],ua[14]=h[14],ua[15]=h[15],ua));k=L.call(this,G,void 0,k);la(k)&&16===k.length||e.commandRaise(f,t);g.uniformMatrix4fv(D.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Fa[0]=k[0],Fa[1]=k[1],Fa[2]=k[2],Fa[3]=k[3],Fa[4]=k[4],Fa[5]=
k[5],Fa[6]=k[6],Fa[7]=k[7],Fa[8]=k[8],Fa[9]=k[9],Fa[10]=k[10],Fa[11]=k[11],Fa[12]=k[12],Fa[13]=k[13],Fa[14]=k[14],Fa[15]=k[15],Fa));w&&g.bindBuffer(34963,w.buffer.buffer);h=w.primType;u=w.vertCount-0;0<=u||e.commandRaise(H,t);for(k=0;k<b;++k)u&&g.drawElements(h,u,w.type,0<<(w.type-5121>>1));V.setVAO(null);c&&(p.cpuTime+=performance.now()-m)}}},$20:function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,L){var f,w,H,E,W,D,y,ia,G,B,m,Z,g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba;f=a.context;w=a.current;
H=a.framebuffer;E=a.gl;W=a.next;D=a.shader;y=a.uniforms;ia=a.vao;G=W.blend_color;B=w.blend_color;m=W.blend_equation;Z=w.blend_equation;g=W.blend_func;la=w.blend_func;Q=W.colorMask;ga=w.colorMask;Ea=W.depth_range;V=w.depth_range;X=W.polygonOffset_offset;S=w.polygonOffset_offset;T=W.sample_coverage;N=w.sample_coverage;x=W.scissor_box;P=w.scissor_box;O=W.stencil_func;pa=w.stencil_func;oa=W.stencil_opBack;z=w.stencil_opBack;K=W.stencil_opFront;ea=w.stencil_opFront;U=W.viewport;ma=w.viewport;qa={};Ba=
{};return{draw:function(a){var e,k,q,v,y,n,C,F,I,A,u,ha,J;e=f.center;k=f.distance;q=f.eye;v=f.phi;y=f.projection;n=c.call(this,f,a,0);C=f.theta;F=f.up;I=f.view;f.center=h;f.distance=2.302585092994046;f.eye=d;f.phi=0;f.projection=n;f.theta=0;f.up=b;f.view=l;n=H.next;n!==H.cur&&(n?E.bindFramebuffer(36160,n.framebuffer):E.bindFramebuffer(36160,null),H.cur=n);if(w.dirty){n=W.dither;n!==w.dither&&(n?E.enable(3024):E.disable(3024),w.dither=n);n=W.blend_enable;n!==w.blend_enable&&(n?E.enable(3042):E.disable(3042),
w.blend_enable=n);n=G[0];u=G[1];ha=G[2];J=G[3];if(n!==B[0]||u!==B[1]||ha!==B[2]||J!==B[3])E.blendColor(n,u,ha,J),B[0]=n,B[1]=u,B[2]=ha,B[3]=J;n=m[0];u=m[1];if(n!==Z[0]||u!==Z[1])E.blendEquationSeparate(n,u),Z[0]=n,Z[1]=u;n=g[0];u=g[1];ha=g[2];J=g[3];if(n!==la[0]||u!==la[1]||ha!==la[2]||J!==la[3])E.blendFuncSeparate(n,u,ha,J),la[0]=n,la[1]=u,la[2]=ha,la[3]=J;n=W.depth_enable;n!==w.depth_enable&&(n?E.enable(2929):E.disable(2929),w.depth_enable=n);n=W.depth_func;n!==w.depth_func&&(E.depthFunc(n),w.depth_func=
n);n=Ea[0];u=Ea[1];if(n!==V[0]||u!==V[1])E.depthRange(n,u),V[0]=n,V[1]=u;n=W.depth_mask;n!==w.depth_mask&&(E.depthMask(n),w.depth_mask=n);n=Q[0];u=Q[1];ha=Q[2];J=Q[3];if(n!==ga[0]||u!==ga[1]||ha!==ga[2]||J!==ga[3])E.colorMask(n,u,ha,J),ga[0]=n,ga[1]=u,ga[2]=ha,ga[3]=J;n=W.cull_enable;n!==w.cull_enable&&(n?E.enable(2884):E.disable(2884),w.cull_enable=n);n=W.cull_face;n!==w.cull_face&&(E.cullFace(n),w.cull_face=n);n=W.frontFace;n!==w.frontFace&&(E.frontFace(n),w.frontFace=n);n=W.lineWidth;n!==w.lineWidth&&
(E.lineWidth(n),w.lineWidth=n);n=W.polygonOffset_enable;n!==w.polygonOffset_enable&&(n?E.enable(32823):E.disable(32823),w.polygonOffset_enable=n);n=X[0];u=X[1];if(n!==S[0]||u!==S[1])E.polygonOffset(n,u),S[0]=n,S[1]=u;n=W.sample_alpha;n!==w.sample_alpha&&(n?E.enable(32926):E.disable(32926),w.sample_alpha=n);n=W.sample_enable;n!==w.sample_enable&&(n?E.enable(32928):E.disable(32928),w.sample_enable=n);n=T[0];u=T[1];if(n!==N[0]||u!==N[1])E.sampleCoverage(n,u),N[0]=n,N[1]=u;n=W.stencil_enable;n!==w.stencil_enable&&
(n?E.enable(2960):E.disable(2960),w.stencil_enable=n);n=W.stencil_mask;n!==w.stencil_mask&&(E.stencilMask(n),w.stencil_mask=n);n=O[0];u=O[1];ha=O[2];if(n!==pa[0]||u!==pa[1]||ha!==pa[2])E.stencilFunc(n,u,ha),pa[0]=n,pa[1]=u,pa[2]=ha;n=K[0];u=K[1];ha=K[2];J=K[3];if(n!==ea[0]||u!==ea[1]||ha!==ea[2]||J!==ea[3])E.stencilOpSeparate(n,u,ha,J),ea[0]=n,ea[1]=u,ea[2]=ha,ea[3]=J;n=oa[0];u=oa[1];ha=oa[2];J=oa[3];if(n!==z[0]||u!==z[1]||ha!==z[2]||J!==z[3])E.stencilOpSeparate(n,u,ha,J),z[0]=n,z[1]=u,z[2]=ha,z[3]=
J;n=W.scissor_enable;n!==w.scissor_enable&&(n?E.enable(3089):E.disable(3089),w.scissor_enable=n);n=x[0];u=x[1];ha=x[2];J=x[3];if(n!==P[0]||u!==P[1]||ha!==P[2]||J!==P[3])E.scissor(n,u,ha,J),P[0]=n,P[1]=u,P[2]=ha,P[3]=J;n=U[0];u=U[1];ha=U[2];J=U[3];if(n!==ma[0]||u!==ma[1]||ha!==ma[2]||J!==ma[3])E.viewport(n,u,ha,J),ma[0]=n,ma[1]=u,ma[2]=ha,ma[3]=J;w.dirty=!1}if(n=w.profile)A=performance.now(),p.count++;u=D.program(D.vert,D.frag,t);E.useProgram(u.program);ia.setVAO(null);ha=u.id;(J=qa[ha])||(J=qa[ha]=
r(u));J.call(this,a);ia.setVAO(null);f.center=e;f.distance=k;f.eye=q;f.phi=v;f.projection=y;f.theta=C;f.up=F;f.view=I;n&&(p.cpuTime+=performance.now()-A)},scope:function(a,c,b){var d,e,g,m,h,t,l,A,u,x,r,q,z,C,B,R,D,E,G;d=f.center;e=f.distance;g=f.eye;m=f.phi;h=f.projection;t=F.call(this,f,a,b);l=f.theta;A=f.up;u=f.view;f.center=v;f.distance=2.302585092994046;f.eye=k;f.phi=0;f.projection=t;f.theta=0;f.up=I;f.view=n;if(t=w.profile)x=performance.now(),p.count++;r=f.center;q=y[1];y[1]=r;z=f.distance;
r=y[2];y[2]=z;C=f.eye;z=y[3];y[3]=C;B=f.phi;C=y[4];y[4]=B;R=f.projection;B=y[5];y[5]=R;D=f.theta;R=y[6];y[6]=D;E=f.up;D=y[7];y[7]=E;E=f.view;G=y[8];y[8]=E;c(f,a,b);f.center=d;f.distance=e;f.eye=g;f.phi=m;f.projection=h;f.theta=l;f.up=A;f.view=u;t&&(p.cpuTime+=performance.now()-x);y[1]=q;y[2]=r;y[3]=z;y[4]=C;y[5]=B;y[6]=R;y[7]=D;y[8]=G},batch:function(a,c){var b,d,e,h,k,l,r,v,A,u,n,y,F;b=f.center;d=f.distance;e=f.eye;h=f.phi;k=f.projection;l=J.call(this,f,a,0);r=f.theta;v=f.up;A=f.view;f.center=aa;
f.distance=2.302585092994046;f.eye=q;f.phi=0;f.projection=l;f.theta=0;f.up=C;f.view=M;l=H.next;l!==H.cur&&(l?E.bindFramebuffer(36160,l.framebuffer):E.bindFramebuffer(36160,null),H.cur=l);if(w.dirty){l=W.dither;l!==w.dither&&(l?E.enable(3024):E.disable(3024),w.dither=l);l=W.blend_enable;l!==w.blend_enable&&(l?E.enable(3042):E.disable(3042),w.blend_enable=l);l=G[0];n=G[1];y=G[2];F=G[3];if(l!==B[0]||n!==B[1]||y!==B[2]||F!==B[3])E.blendColor(l,n,y,F),B[0]=l,B[1]=n,B[2]=y,B[3]=F;l=m[0];n=m[1];if(l!==Z[0]||
n!==Z[1])E.blendEquationSeparate(l,n),Z[0]=l,Z[1]=n;l=g[0];n=g[1];y=g[2];F=g[3];if(l!==la[0]||n!==la[1]||y!==la[2]||F!==la[3])E.blendFuncSeparate(l,n,y,F),la[0]=l,la[1]=n,la[2]=y,la[3]=F;l=W.depth_enable;l!==w.depth_enable&&(l?E.enable(2929):E.disable(2929),w.depth_enable=l);l=W.depth_func;l!==w.depth_func&&(E.depthFunc(l),w.depth_func=l);l=Ea[0];n=Ea[1];if(l!==V[0]||n!==V[1])E.depthRange(l,n),V[0]=l,V[1]=n;l=W.depth_mask;l!==w.depth_mask&&(E.depthMask(l),w.depth_mask=l);l=Q[0];n=Q[1];y=Q[2];F=Q[3];
if(l!==ga[0]||n!==ga[1]||y!==ga[2]||F!==ga[3])E.colorMask(l,n,y,F),ga[0]=l,ga[1]=n,ga[2]=y,ga[3]=F;l=W.cull_enable;l!==w.cull_enable&&(l?E.enable(2884):E.disable(2884),w.cull_enable=l);l=W.cull_face;l!==w.cull_face&&(E.cullFace(l),w.cull_face=l);l=W.frontFace;l!==w.frontFace&&(E.frontFace(l),w.frontFace=l);l=W.lineWidth;l!==w.lineWidth&&(E.lineWidth(l),w.lineWidth=l);l=W.polygonOffset_enable;l!==w.polygonOffset_enable&&(l?E.enable(32823):E.disable(32823),w.polygonOffset_enable=l);l=X[0];n=X[1];if(l!==
S[0]||n!==S[1])E.polygonOffset(l,n),S[0]=l,S[1]=n;l=W.sample_alpha;l!==w.sample_alpha&&(l?E.enable(32926):E.disable(32926),w.sample_alpha=l);l=W.sample_enable;l!==w.sample_enable&&(l?E.enable(32928):E.disable(32928),w.sample_enable=l);l=T[0];n=T[1];if(l!==N[0]||n!==N[1])E.sampleCoverage(l,n),N[0]=l,N[1]=n;l=W.stencil_enable;l!==w.stencil_enable&&(l?E.enable(2960):E.disable(2960),w.stencil_enable=l);l=W.stencil_mask;l!==w.stencil_mask&&(E.stencilMask(l),w.stencil_mask=l);l=O[0];n=O[1];y=O[2];if(l!==
pa[0]||n!==pa[1]||y!==pa[2])E.stencilFunc(l,n,y),pa[0]=l,pa[1]=n,pa[2]=y;l=K[0];n=K[1];y=K[2];F=K[3];if(l!==ea[0]||n!==ea[1]||y!==ea[2]||F!==ea[3])E.stencilOpSeparate(l,n,y,F),ea[0]=l,ea[1]=n,ea[2]=y,ea[3]=F;l=oa[0];n=oa[1];y=oa[2];F=oa[3];if(l!==z[0]||n!==z[1]||y!==z[2]||F!==z[3])E.stencilOpSeparate(l,n,y,F),z[0]=l,z[1]=n,z[2]=y,z[3]=F;l=W.scissor_enable;l!==w.scissor_enable&&(l?E.enable(3089):E.disable(3089),w.scissor_enable=l);l=x[0];n=x[1];y=x[2];F=x[3];if(l!==P[0]||n!==P[1]||y!==P[2]||F!==P[3])E.scissor(l,
n,y,F),P[0]=l,P[1]=n,P[2]=y,P[3]=F;l=U[0];n=U[1];y=U[2];F=U[3];if(l!==ma[0]||n!==ma[1]||y!==ma[2]||F!==ma[3])E.viewport(l,n,y,F),ma[0]=l,ma[1]=n,ma[2]=y,ma[3]=F;w.dirty=!1}if(l=w.profile)u=performance.now(),p.count+=c;n=D.program(D.vert,D.frag,t);E.useProgram(n.program);ia.setVAO(null);y=n.id;(F=Ba[y])||(F=Ba[y]=L(n));F.call(this,a,c);ia.setVAO(null);f.center=b;f.distance=d;f.eye=e;f.phi=h;f.projection=k;f.theta=r;f.up=v;f.view=A;l&&(p.cpuTime+=performance.now()-u)}}},"$27,position,projection,tex,uv,view":function(a,
e,t,p,h,d,c,b,l,r,v,k,F,I,n,aa,q,J,C,M,L,f,w,H,E,W,D,y,ia,G,B,m,Z){var g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa,zb,Ya,A,u,ha,ua,Fa,mb,Ib;g=a.attributes;la=a.context;Q=a.current;ga=a.draw;Ea=a.framebuffer;V=a.gl;X=a.isArrayLike;S=a.next;T=a.shader;N=a.uniforms;x=a.vao;P=S.blend_color;O=Q.blend_color;pa=S.blend_equation;oa=Q.blend_equation;z=S.blend_func;K=Q.blend_func;ea=S.colorMask;U=Q.colorMask;ma=S.depth_range;qa=Q.depth_range;Ba=S.polygonOffset_offset;ya=Q.polygonOffset_offset;
da=S.sample_coverage;Ca=Q.sample_coverage;ja=S.scissor_box;na=Q.scissor_box;za=S.stencil_func;Pa=Q.stencil_func;sa=S.stencil_opBack;zb=Q.stencil_opBack;Ya=S.stencil_opFront;A=Q.stencil_opFront;u=S.viewport;ha=Q.viewport;ua=new Float32Array(16);Fa=new Float32Array(16);mb=new Float32Array(16);Ib=new Float32Array(16);return{draw:function(a){var f,w,n,q;f=Ea.next;f!==Ea.cur&&(f?V.bindFramebuffer(36160,f.framebuffer):V.bindFramebuffer(36160,null),Ea.cur=f);if(Q.dirty){var y;f=S.dither;f!==Q.dither&&(f?
V.enable(3024):V.disable(3024),Q.dither=f);f=S.blend_enable;f!==Q.blend_enable&&(f?V.enable(3042):V.disable(3042),Q.blend_enable=f);f=P[0];n=P[1];q=P[2];y=P[3];if(f!==O[0]||n!==O[1]||q!==O[2]||y!==O[3])V.blendColor(f,n,q,y),O[0]=f,O[1]=n,O[2]=q,O[3]=y;f=pa[0];n=pa[1];if(f!==oa[0]||n!==oa[1])V.blendEquationSeparate(f,n),oa[0]=f,oa[1]=n;f=z[0];n=z[1];q=z[2];y=z[3];if(f!==K[0]||n!==K[1]||q!==K[2]||y!==K[3])V.blendFuncSeparate(f,n,q,y),K[0]=f,K[1]=n,K[2]=q,K[3]=y;f=S.depth_enable;f!==Q.depth_enable&&
(f?V.enable(2929):V.disable(2929),Q.depth_enable=f);f=S.depth_func;f!==Q.depth_func&&(V.depthFunc(f),Q.depth_func=f);f=ma[0];n=ma[1];if(f!==qa[0]||n!==qa[1])V.depthRange(f,n),qa[0]=f,qa[1]=n;f=S.depth_mask;f!==Q.depth_mask&&(V.depthMask(f),Q.depth_mask=f);f=ea[0];n=ea[1];q=ea[2];y=ea[3];if(f!==U[0]||n!==U[1]||q!==U[2]||y!==U[3])V.colorMask(f,n,q,y),U[0]=f,U[1]=n,U[2]=q,U[3]=y;f=S.cull_enable;f!==Q.cull_enable&&(f?V.enable(2884):V.disable(2884),Q.cull_enable=f);f=S.cull_face;f!==Q.cull_face&&(V.cullFace(f),
Q.cull_face=f);f=S.frontFace;f!==Q.frontFace&&(V.frontFace(f),Q.frontFace=f);f=S.lineWidth;f!==Q.lineWidth&&(V.lineWidth(f),Q.lineWidth=f);f=S.polygonOffset_enable;f!==Q.polygonOffset_enable&&(f?V.enable(32823):V.disable(32823),Q.polygonOffset_enable=f);f=Ba[0];n=Ba[1];if(f!==ya[0]||n!==ya[1])V.polygonOffset(f,n),ya[0]=f,ya[1]=n;f=S.sample_alpha;f!==Q.sample_alpha&&(f?V.enable(32926):V.disable(32926),Q.sample_alpha=f);f=S.sample_enable;f!==Q.sample_enable&&(f?V.enable(32928):V.disable(32928),Q.sample_enable=
f);f=da[0];n=da[1];if(f!==Ca[0]||n!==Ca[1])V.sampleCoverage(f,n),Ca[0]=f,Ca[1]=n;f=S.stencil_enable;f!==Q.stencil_enable&&(f?V.enable(2960):V.disable(2960),Q.stencil_enable=f);f=S.stencil_mask;f!==Q.stencil_mask&&(V.stencilMask(f),Q.stencil_mask=f);f=za[0];n=za[1];q=za[2];if(f!==Pa[0]||n!==Pa[1]||q!==Pa[2])V.stencilFunc(f,n,q),Pa[0]=f,Pa[1]=n,Pa[2]=q;f=Ya[0];n=Ya[1];q=Ya[2];y=Ya[3];if(f!==A[0]||n!==A[1]||q!==A[2]||y!==A[3])V.stencilOpSeparate(f,n,q,y),A[0]=f,A[1]=n,A[2]=q,A[3]=y;f=sa[0];n=sa[1];q=
sa[2];y=sa[3];if(f!==zb[0]||n!==zb[1]||q!==zb[2]||y!==zb[3])V.stencilOpSeparate(f,n,q,y),zb[0]=f,zb[1]=n,zb[2]=q,zb[3]=y;f=S.scissor_enable;f!==Q.scissor_enable&&(f?V.enable(3089):V.disable(3089),Q.scissor_enable=f);f=ja[0];n=ja[1];q=ja[2];y=ja[3];if(f!==na[0]||n!==na[1]||q!==na[2]||y!==na[3])V.scissor(f,n,q,y),na[0]=f,na[1]=n,na[2]=q,na[3]=y;f=u[0];n=u[1];q=u[2];y=u[3];if(f!==ha[0]||n!==ha[1]||q!==ha[2]||y!==ha[3])V.viewport(f,n,q,y),ha[0]=f,ha[1]=n,ha[2]=q,ha[3]=y;Q.dirty=!1}if(f=Q.profile)w=performance.now(),
p.count++;V.useProgram(h.program);x.setVAO(null);n=ia.location;q=g[n];q.buffer||V.enableVertexAttribArray(n);if(q.type!==d.dtype||3!==q.size||q.buffer!==d||!1!==q.normalized||0!==q.offset||0!==q.stride)V.bindBuffer(34962,d.buffer),V.vertexAttribPointer(n,3,d.dtype,!1,0,0),q.type=d.dtype,q.size=3,q.buffer=d,q.normalized=!1,q.offset=0,q.stride=0;n=m.location;q=g[n];q.buffer||V.enableVertexAttribArray(n);if(q.type!==c.dtype||2!==q.size||q.buffer!==c||!1!==q.normalized||0!==q.offset||0!==q.stride)V.bindBuffer(34962,
c.buffer),V.vertexAttribPointer(n,2,c.dtype,!1,0,0),q.type=c.dtype,q.size=2,q.buffer=c,q.normalized=!1,q.offset=0,q.stride=0;n=b.call(this,la,a,0);X(n)&&16===n.length||e.commandRaise(l,t);V.uniformMatrix4fv(G.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(ua[0]=n[0],ua[1]=n[1],ua[2]=n[2],ua[3]=n[3],ua[4]=n[4],ua[5]=n[5],ua[6]=n[6],ua[7]=n[7],ua[8]=n[8],ua[9]=n[9],ua[10]=n[10],ua[11]=n[11],ua[12]=n[12],ua[13]=n[13],ua[14]=n[14],ua[15]=n[15],ua));n=r.call(this,la,a,0);X(n)&&16===n.length||
e.commandRaise(v,t);V.uniformMatrix4fv(Z.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Fa[0]=n[0],Fa[1]=n[1],Fa[2]=n[2],Fa[3]=n[3],Fa[4]=n[4],Fa[5]=n[5],Fa[6]=n[6],Fa[7]=n[7],Fa[8]=n[8],Fa[9]=n[9],Fa[10]=n[10],Fa[11]=n[11],Fa[12]=n[12],Fa[13]=n[13],Fa[14]=n[14],Fa[15]=n[15],Fa));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||e.commandRaise(k,t);a=a._texture;V.uniform1i(B.location,a.bind());F&&V.bindBuffer(34963,F.buffer.buffer);
n=F.primType;q=F.vertCount-0;0<=q||e.commandRaise(I,t);q&&(V.drawElements(n,q,F.type,0<<(F.type-5121>>1)),x.setVAO(null),f&&(p.cpuTime+=performance.now()-w),a.unbind())},scope:function(a,b,f){var g,m,h,k,l,u,A,w,x,r,v,y,z,F,B,D,E,G,I,da,ha,K,U,O,P,L,S,zb,qa,H,ya,W,V,X,ja;if(g=Q.profile)m=performance.now(),p.count++;h=ga.elements;ga.elements=n;k=ga.offset;ga.offset=0;l=n.vertCount-0;0<=l||e.commandRaise(aa,t);u=ga.count;ga.count=l;A=n.primType;l=ga.primitive;ga.primitive=A;w=q.call(this,la,a,f);A=
N[3];N[3]=w;x=a.texture;w=N[5];N[5]=x;r=J.call(this,la,a,f);x=N[4];N[4]=r;r=C.buffer;C.buffer=d;v=C.divisor;C.divisor=0;y=C.normalized;C.normalized=!1;z=C.offset;C.offset=0;F=C.size;C.size=0;B=C.state;C.state=1;D=C.stride;C.stride=0;E=C.type;C.type=d.dtype;G=C.w;C.w=0;I=C.x;C.x=0;da=C.y;C.y=0;ha=C.z;C.z=0;K=M.buffer;M.buffer=c;U=M.divisor;M.divisor=0;O=M.normalized;M.normalized=!1;P=M.offset;M.offset=0;L=M.size;M.size=0;S=M.state;M.state=1;zb=M.stride;M.stride=0;qa=M.type;M.type=c.dtype;H=M.w;M.w=
0;ya=M.x;M.x=0;W=M.y;M.y=0;V=M.z;M.z=0;X=T.vert;T.vert=2;ja=T.frag;T.frag=1;b(la,a,f);g&&(p.cpuTime+=performance.now()-m);ga.elements=h;ga.offset=k;ga.count=u;ga.primitive=l;N[3]=A;N[5]=w;N[4]=x;C.buffer=r;C.divisor=v;C.normalized=y;C.offset=z;C.size=F;C.state=B;C.stride=D;C.type=E;C.w=G;C.x=I;C.y=da;C.z=ha;M.buffer=K;M.divisor=U;M.normalized=O;M.offset=P;M.size=L;M.state=S;M.stride=zb;M.type=qa;M.w=H;M.x=ya;M.y=W;M.z=V;T.vert=X;T.frag=ja},batch:function(a,b){var h,k,l,n;h=Ea.next;h!==Ea.cur&&(h?
V.bindFramebuffer(36160,h.framebuffer):V.bindFramebuffer(36160,null),Ea.cur=h);if(Q.dirty){var q,r,v;h=S.dither;h!==Q.dither&&(h?V.enable(3024):V.disable(3024),Q.dither=h);h=S.blend_enable;h!==Q.blend_enable&&(h?V.enable(3042):V.disable(3042),Q.blend_enable=h);h=P[0];q=P[1];r=P[2];v=P[3];if(h!==O[0]||q!==O[1]||r!==O[2]||v!==O[3])V.blendColor(h,q,r,v),O[0]=h,O[1]=q,O[2]=r,O[3]=v;h=pa[0];q=pa[1];if(h!==oa[0]||q!==oa[1])V.blendEquationSeparate(h,q),oa[0]=h,oa[1]=q;h=z[0];q=z[1];r=z[2];v=z[3];if(h!==
K[0]||q!==K[1]||r!==K[2]||v!==K[3])V.blendFuncSeparate(h,q,r,v),K[0]=h,K[1]=q,K[2]=r,K[3]=v;h=S.depth_enable;h!==Q.depth_enable&&(h?V.enable(2929):V.disable(2929),Q.depth_enable=h);h=S.depth_func;h!==Q.depth_func&&(V.depthFunc(h),Q.depth_func=h);h=ma[0];q=ma[1];if(h!==qa[0]||q!==qa[1])V.depthRange(h,q),qa[0]=h,qa[1]=q;h=S.depth_mask;h!==Q.depth_mask&&(V.depthMask(h),Q.depth_mask=h);h=ea[0];q=ea[1];r=ea[2];v=ea[3];if(h!==U[0]||q!==U[1]||r!==U[2]||v!==U[3])V.colorMask(h,q,r,v),U[0]=h,U[1]=q,U[2]=r,
U[3]=v;h=S.cull_enable;h!==Q.cull_enable&&(h?V.enable(2884):V.disable(2884),Q.cull_enable=h);h=S.cull_face;h!==Q.cull_face&&(V.cullFace(h),Q.cull_face=h);h=S.frontFace;h!==Q.frontFace&&(V.frontFace(h),Q.frontFace=h);h=S.lineWidth;h!==Q.lineWidth&&(V.lineWidth(h),Q.lineWidth=h);h=S.polygonOffset_enable;h!==Q.polygonOffset_enable&&(h?V.enable(32823):V.disable(32823),Q.polygonOffset_enable=h);h=Ba[0];q=Ba[1];if(h!==ya[0]||q!==ya[1])V.polygonOffset(h,q),ya[0]=h,ya[1]=q;h=S.sample_alpha;h!==Q.sample_alpha&&
(h?V.enable(32926):V.disable(32926),Q.sample_alpha=h);h=S.sample_enable;h!==Q.sample_enable&&(h?V.enable(32928):V.disable(32928),Q.sample_enable=h);h=da[0];q=da[1];if(h!==Ca[0]||q!==Ca[1])V.sampleCoverage(h,q),Ca[0]=h,Ca[1]=q;h=S.stencil_enable;h!==Q.stencil_enable&&(h?V.enable(2960):V.disable(2960),Q.stencil_enable=h);h=S.stencil_mask;h!==Q.stencil_mask&&(V.stencilMask(h),Q.stencil_mask=h);h=za[0];q=za[1];r=za[2];if(h!==Pa[0]||q!==Pa[1]||r!==Pa[2])V.stencilFunc(h,q,r),Pa[0]=h,Pa[1]=q,Pa[2]=r;h=Ya[0];
q=Ya[1];r=Ya[2];v=Ya[3];if(h!==A[0]||q!==A[1]||r!==A[2]||v!==A[3])V.stencilOpSeparate(h,q,r,v),A[0]=h,A[1]=q,A[2]=r,A[3]=v;h=sa[0];q=sa[1];r=sa[2];v=sa[3];if(h!==zb[0]||q!==zb[1]||r!==zb[2]||v!==zb[3])V.stencilOpSeparate(h,q,r,v),zb[0]=h,zb[1]=q,zb[2]=r,zb[3]=v;h=S.scissor_enable;h!==Q.scissor_enable&&(h?V.enable(3089):V.disable(3089),Q.scissor_enable=h);h=ja[0];q=ja[1];r=ja[2];v=ja[3];if(h!==na[0]||q!==na[1]||r!==na[2]||v!==na[3])V.scissor(h,q,r,v),na[0]=h,na[1]=q,na[2]=r,na[3]=v;h=u[0];q=u[1];r=
u[2];v=u[3];if(h!==ha[0]||q!==ha[1]||r!==ha[2]||v!==ha[3])V.viewport(h,q,r,v),ha[0]=h,ha[1]=q,ha[2]=r,ha[3]=v;Q.dirty=!1}if(h=Q.profile)k=performance.now(),p.count+=b;V.useProgram(L.program);x.setVAO(null);q=ia.location;r=g[q];r.buffer||V.enableVertexAttribArray(q);if(r.type!==d.dtype||3!==r.size||r.buffer!==d||!1!==r.normalized||0!==r.offset||0!==r.stride)V.bindBuffer(34962,d.buffer),V.vertexAttribPointer(q,3,d.dtype,!1,0,0),r.type=d.dtype,r.size=3,r.buffer=d,r.normalized=!1,r.offset=0,r.stride=
0;q=m.location;r=g[q];r.buffer||V.enableVertexAttribArray(q);if(r.type!==c.dtype||2!==r.size||r.buffer!==c||!1!==r.normalized||0!==r.offset||0!==r.stride)V.bindBuffer(34962,c.buffer),V.vertexAttribPointer(q,2,c.dtype,!1,0,0),r.type=c.dtype,r.size=2,r.buffer=c,r.normalized=!1,r.offset=0,r.stride=0;q=f.call(this,la,n,l);X(q)&&16===q.length||e.commandRaise(w,t);V.uniformMatrix4fv(G.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(mb[0]=q[0],mb[1]=q[1],mb[2]=q[2],mb[3]=q[3],mb[4]=q[4],mb[5]=
q[5],mb[6]=q[6],mb[7]=q[7],mb[8]=q[8],mb[9]=q[9],mb[10]=q[10],mb[11]=q[11],mb[12]=q[12],mb[13]=q[13],mb[14]=q[14],mb[15]=q[15],mb));l=H.call(this,la,n,l);X(l)&&16===l.length||e.commandRaise(E,t);V.uniformMatrix4fv(Z.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ib[0]=l[0],Ib[1]=l[1],Ib[2]=l[2],Ib[3]=l[3],Ib[4]=l[4],Ib[5]=l[5],Ib[6]=l[6],Ib[7]=l[7],Ib[8]=l[8],Ib[9]=l[9],Ib[10]=l[10],Ib[11]=l[11],Ib[12]=l[12],Ib[13]=l[13],Ib[14]=l[14],Ib[15]=l[15],Ib));D&&V.bindBuffer(34963,D.buffer.buffer);
q=D.primType;r=D.vertCount-0;0<=r||e.commandRaise(y,t);for(l=0;l<b;++l)n=a[l],(n=n.texture)&&"framebuffer"===n._reglType&&(n=n.color[0]),"function"===typeof n&&"texture2d"===n._reglType||e.commandRaise(W,t),n=n._texture,V.uniform1i(B.location,n.bind()),r&&(V.drawElements(q,r,D.type,0<<(D.type-5121>>1)),n.unbind());x.setVAO(null);h&&(p.cpuTime+=performance.now()-k)}}},"$19,normal,position,projection,view":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,L,q,J,C,M,H,f,w,ba){var E,W,D,y,ia,G,B,m,Z,g,la,Q,ga,Ea,
V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za,Pa,sa;E=a.attributes;W=a.context;D=a.current;y=a.draw;ia=a.framebuffer;G=a.gl;B=a.isArrayLike;m=a.next;Z=a.shader;g=a.uniforms;la=a.vao;Q=m.blend_color;ga=D.blend_color;Ea=m.blend_equation;V=D.blend_equation;X=m.blend_func;S=D.blend_func;T=m.colorMask;N=D.colorMask;x=m.depth_range;P=D.depth_range;O=m.polygonOffset_offset;pa=D.polygonOffset_offset;oa=m.sample_coverage;z=D.sample_coverage;K=m.scissor_box;ea=D.scissor_box;U=m.stencil_func;ma=
D.stencil_func;qa=m.stencil_opBack;Ba=D.stencil_opBack;ya=m.stencil_opFront;da=D.stencil_opFront;Ca=m.viewport;ja=D.viewport;na=new Float32Array(16);za=new Float32Array(16);Pa=new Float32Array(16);sa=new Float32Array(16);return{draw:function(a){var k,q,u;a=ia.next;a!==ia.cur&&(a?G.bindFramebuffer(36160,a.framebuffer):G.bindFramebuffer(36160,null),ia.cur=a);if(D.dirty){var n;a=m.dither;a!==D.dither&&(a?G.enable(3024):G.disable(3024),D.dither=a);a=m.blend_enable;a!==D.blend_enable&&(a?G.enable(3042):
G.disable(3042),D.blend_enable=a);a=Q[0];q=Q[1];u=Q[2];n=Q[3];if(a!==ga[0]||q!==ga[1]||u!==ga[2]||n!==ga[3])G.blendColor(a,q,u,n),ga[0]=a,ga[1]=q,ga[2]=u,ga[3]=n;a=Ea[0];q=Ea[1];if(a!==V[0]||q!==V[1])G.blendEquationSeparate(a,q),V[0]=a,V[1]=q;a=X[0];q=X[1];u=X[2];n=X[3];if(a!==S[0]||q!==S[1]||u!==S[2]||n!==S[3])G.blendFuncSeparate(a,q,u,n),S[0]=a,S[1]=q,S[2]=u,S[3]=n;a=m.depth_enable;a!==D.depth_enable&&(a?G.enable(2929):G.disable(2929),D.depth_enable=a);a=m.depth_func;a!==D.depth_func&&(G.depthFunc(a),
D.depth_func=a);a=x[0];q=x[1];if(a!==P[0]||q!==P[1])G.depthRange(a,q),P[0]=a,P[1]=q;a=m.depth_mask;a!==D.depth_mask&&(G.depthMask(a),D.depth_mask=a);a=T[0];q=T[1];u=T[2];n=T[3];if(a!==N[0]||q!==N[1]||u!==N[2]||n!==N[3])G.colorMask(a,q,u,n),N[0]=a,N[1]=q,N[2]=u,N[3]=n;a=m.cull_enable;a!==D.cull_enable&&(a?G.enable(2884):G.disable(2884),D.cull_enable=a);a=m.cull_face;a!==D.cull_face&&(G.cullFace(a),D.cull_face=a);a=m.frontFace;a!==D.frontFace&&(G.frontFace(a),D.frontFace=a);a=m.lineWidth;a!==D.lineWidth&&
(G.lineWidth(a),D.lineWidth=a);a=m.polygonOffset_enable;a!==D.polygonOffset_enable&&(a?G.enable(32823):G.disable(32823),D.polygonOffset_enable=a);a=O[0];q=O[1];if(a!==pa[0]||q!==pa[1])G.polygonOffset(a,q),pa[0]=a,pa[1]=q;a=m.sample_alpha;a!==D.sample_alpha&&(a?G.enable(32926):G.disable(32926),D.sample_alpha=a);a=m.sample_enable;a!==D.sample_enable&&(a?G.enable(32928):G.disable(32928),D.sample_enable=a);a=oa[0];q=oa[1];if(a!==z[0]||q!==z[1])G.sampleCoverage(a,q),z[0]=a,z[1]=q;a=m.stencil_enable;a!==
D.stencil_enable&&(a?G.enable(2960):G.disable(2960),D.stencil_enable=a);a=m.stencil_mask;a!==D.stencil_mask&&(G.stencilMask(a),D.stencil_mask=a);a=U[0];q=U[1];u=U[2];if(a!==ma[0]||q!==ma[1]||u!==ma[2])G.stencilFunc(a,q,u),ma[0]=a,ma[1]=q,ma[2]=u;a=ya[0];q=ya[1];u=ya[2];n=ya[3];if(a!==da[0]||q!==da[1]||u!==da[2]||n!==da[3])G.stencilOpSeparate(a,q,u,n),da[0]=a,da[1]=q,da[2]=u,da[3]=n;a=qa[0];q=qa[1];u=qa[2];n=qa[3];if(a!==Ba[0]||q!==Ba[1]||u!==Ba[2]||n!==Ba[3])G.stencilOpSeparate(a,q,u,n),Ba[0]=a,Ba[1]=
q,Ba[2]=u,Ba[3]=n;a=m.scissor_enable;a!==D.scissor_enable&&(a?G.enable(3089):G.disable(3089),D.scissor_enable=a);a=K[0];q=K[1];u=K[2];n=K[3];if(a!==ea[0]||q!==ea[1]||u!==ea[2]||n!==ea[3])G.scissor(a,q,u,n),ea[0]=a,ea[1]=q,ea[2]=u,ea[3]=n;a=Ca[0];q=Ca[1];u=Ca[2];n=Ca[3];if(a!==ja[0]||q!==ja[1]||u!==ja[2]||n!==ja[3])G.viewport(a,q,u,n),ja[0]=a,ja[1]=q,ja[2]=u,ja[3]=n;D.dirty=!1}if(a=D.profile)k=performance.now(),p.count++;G.useProgram(h.program);la.setVAO(null);q=f.location;u=E[q];u.buffer||G.enableVertexAttribArray(q);
if(u.type!==d.dtype||3!==u.size||u.buffer!==d||!1!==u.normalized||0!==u.offset||0!==u.stride)G.bindBuffer(34962,d.buffer),G.vertexAttribPointer(q,3,d.dtype,!1,0,0),u.type=d.dtype,u.size=3,u.buffer=d,u.normalized=!1,u.offset=0,u.stride=0;q=H.location;u=E[q];u.buffer||G.enableVertexAttribArray(q);if(u.type!==c.dtype||3!==u.size||u.buffer!==c||!1!==u.normalized||0!==u.offset||0!==u.stride)G.bindBuffer(34962,c.buffer),G.vertexAttribPointer(q,3,c.dtype,!1,0,0),u.type=c.dtype,u.size=3,u.buffer=c,u.normalized=
!1,u.offset=0,u.stride=0;q=g[5];B(q)&&16===q.length||e.commandRaise(b,t);G.uniformMatrix4fv(w.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(na[0]=q[0],na[1]=q[1],na[2]=q[2],na[3]=q[3],na[4]=q[4],na[5]=q[5],na[6]=q[6],na[7]=q[7],na[8]=q[8],na[9]=q[9],na[10]=q[10],na[11]=q[11],na[12]=q[12],na[13]=q[13],na[14]=q[14],na[15]=q[15],na));q=g[8];B(q)&&16===q.length||e.commandRaise(l,t);G.uniformMatrix4fv(ba.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(za[0]=q[0],za[1]=q[1],za[2]=
q[2],za[3]=q[3],za[4]=q[4],za[5]=q[5],za[6]=q[6],za[7]=q[7],za[8]=q[8],za[9]=q[9],za[10]=q[10],za[11]=q[11],za[12]=q[12],za[13]=q[13],za[14]=q[14],za[15]=q[15],za));r&&G.bindBuffer(34963,r.buffer.buffer);q=r.primType;u=r.vertCount-0;0<=u||e.commandRaise(v,t);u&&(G.drawElements(q,u,r.type,0<<(r.type-5121>>1)),la.setVAO(null),a&&(p.cpuTime+=performance.now()-k))},scope:function(a,b,f){var g,h,m,l,q,r,w,x,v,z,C,B,E,G,J,da,K,U,M,N,O,P,Q,L,aa,S,T,qa,H,ya,V,X;if(g=D.profile)h=performance.now(),p.count++;
m=y.elements;y.elements=k;l=y.offset;y.offset=0;q=k.vertCount-0;0<=q||e.commandRaise(F,t);r=y.count;y.count=q;w=k.primType;q=y.primitive;y.primitive=w;w=I.buffer;I.buffer=c;x=I.divisor;I.divisor=0;v=I.normalized;I.normalized=!1;z=I.offset;I.offset=0;C=I.size;I.size=0;B=I.state;I.state=1;E=I.stride;I.stride=0;G=I.type;I.type=c.dtype;J=I.w;I.w=0;da=I.x;I.x=0;K=I.y;I.y=0;U=I.z;I.z=0;M=n.buffer;n.buffer=d;N=n.divisor;n.divisor=0;O=n.normalized;n.normalized=!1;P=n.offset;n.offset=0;Q=n.size;n.size=0;L=
n.state;n.state=1;aa=n.stride;n.stride=0;S=n.type;n.type=d.dtype;T=n.w;n.w=0;qa=n.x;n.x=0;H=n.y;n.y=0;ya=n.z;n.z=0;V=Z.vert;Z.vert=10;X=Z.frag;Z.frag=9;b(W,a,f);g&&(p.cpuTime+=performance.now()-h);y.elements=m;y.offset=l;y.count=r;y.primitive=q;I.buffer=w;I.divisor=x;I.normalized=v;I.offset=z;I.size=C;I.state=B;I.stride=E;I.type=G;I.w=J;I.x=da;I.y=K;I.z=U;n.buffer=M;n.divisor=N;n.normalized=O;n.offset=P;n.size=Q;n.state=L;n.stride=aa;n.type=S;n.w=T;n.x=qa;n.y=H;n.z=ya;Z.vert=V;Z.frag=X},batch:function(a,
b){var h,k,l;h=ia.next;h!==ia.cur&&(h?G.bindFramebuffer(36160,h.framebuffer):G.bindFramebuffer(36160,null),ia.cur=h);if(D.dirty){var n,r;h=m.dither;h!==D.dither&&(h?G.enable(3024):G.disable(3024),D.dither=h);h=m.blend_enable;h!==D.blend_enable&&(h?G.enable(3042):G.disable(3042),D.blend_enable=h);h=Q[0];l=Q[1];n=Q[2];r=Q[3];if(h!==ga[0]||l!==ga[1]||n!==ga[2]||r!==ga[3])G.blendColor(h,l,n,r),ga[0]=h,ga[1]=l,ga[2]=n,ga[3]=r;h=Ea[0];l=Ea[1];if(h!==V[0]||l!==V[1])G.blendEquationSeparate(h,l),V[0]=h,V[1]=
l;h=X[0];l=X[1];n=X[2];r=X[3];if(h!==S[0]||l!==S[1]||n!==S[2]||r!==S[3])G.blendFuncSeparate(h,l,n,r),S[0]=h,S[1]=l,S[2]=n,S[3]=r;h=m.depth_enable;h!==D.depth_enable&&(h?G.enable(2929):G.disable(2929),D.depth_enable=h);h=m.depth_func;h!==D.depth_func&&(G.depthFunc(h),D.depth_func=h);h=x[0];l=x[1];if(h!==P[0]||l!==P[1])G.depthRange(h,l),P[0]=h,P[1]=l;h=m.depth_mask;h!==D.depth_mask&&(G.depthMask(h),D.depth_mask=h);h=T[0];l=T[1];n=T[2];r=T[3];if(h!==N[0]||l!==N[1]||n!==N[2]||r!==N[3])G.colorMask(h,l,
n,r),N[0]=h,N[1]=l,N[2]=n,N[3]=r;h=m.cull_enable;h!==D.cull_enable&&(h?G.enable(2884):G.disable(2884),D.cull_enable=h);h=m.cull_face;h!==D.cull_face&&(G.cullFace(h),D.cull_face=h);h=m.frontFace;h!==D.frontFace&&(G.frontFace(h),D.frontFace=h);h=m.lineWidth;h!==D.lineWidth&&(G.lineWidth(h),D.lineWidth=h);h=m.polygonOffset_enable;h!==D.polygonOffset_enable&&(h?G.enable(32823):G.disable(32823),D.polygonOffset_enable=h);h=O[0];l=O[1];if(h!==pa[0]||l!==pa[1])G.polygonOffset(h,l),pa[0]=h,pa[1]=l;h=m.sample_alpha;
h!==D.sample_alpha&&(h?G.enable(32926):G.disable(32926),D.sample_alpha=h);h=m.sample_enable;h!==D.sample_enable&&(h?G.enable(32928):G.disable(32928),D.sample_enable=h);h=oa[0];l=oa[1];if(h!==z[0]||l!==z[1])G.sampleCoverage(h,l),z[0]=h,z[1]=l;h=m.stencil_enable;h!==D.stencil_enable&&(h?G.enable(2960):G.disable(2960),D.stencil_enable=h);h=m.stencil_mask;h!==D.stencil_mask&&(G.stencilMask(h),D.stencil_mask=h);h=U[0];l=U[1];n=U[2];if(h!==ma[0]||l!==ma[1]||n!==ma[2])G.stencilFunc(h,l,n),ma[0]=h,ma[1]=
l,ma[2]=n;h=ya[0];l=ya[1];n=ya[2];r=ya[3];if(h!==da[0]||l!==da[1]||n!==da[2]||r!==da[3])G.stencilOpSeparate(h,l,n,r),da[0]=h,da[1]=l,da[2]=n,da[3]=r;h=qa[0];l=qa[1];n=qa[2];r=qa[3];if(h!==Ba[0]||l!==Ba[1]||n!==Ba[2]||r!==Ba[3])G.stencilOpSeparate(h,l,n,r),Ba[0]=h,Ba[1]=l,Ba[2]=n,Ba[3]=r;h=m.scissor_enable;h!==D.scissor_enable&&(h?G.enable(3089):G.disable(3089),D.scissor_enable=h);h=K[0];l=K[1];n=K[2];r=K[3];if(h!==ea[0]||l!==ea[1]||n!==ea[2]||r!==ea[3])G.scissor(h,l,n,r),ea[0]=h,ea[1]=l,ea[2]=n,ea[3]=
r;h=Ca[0];l=Ca[1];n=Ca[2];r=Ca[3];if(h!==ja[0]||l!==ja[1]||n!==ja[2]||r!==ja[3])G.viewport(h,l,n,r),ja[0]=h,ja[1]=l,ja[2]=n,ja[3]=r;D.dirty=!1}if(h=D.profile)k=performance.now(),p.count+=b;G.useProgram(L.program);la.setVAO(null);l=f.location;n=E[l];n.buffer||G.enableVertexAttribArray(l);if(n.type!==d.dtype||3!==n.size||n.buffer!==d||!1!==n.normalized||0!==n.offset||0!==n.stride)G.bindBuffer(34962,d.buffer),G.vertexAttribPointer(l,3,d.dtype,!1,0,0),n.type=d.dtype,n.size=3,n.buffer=d,n.normalized=!1,
n.offset=0,n.stride=0;l=H.location;n=E[l];n.buffer||G.enableVertexAttribArray(l);if(n.type!==c.dtype||3!==n.size||n.buffer!==c||!1!==n.normalized||0!==n.offset||0!==n.stride)G.bindBuffer(34962,c.buffer),G.vertexAttribPointer(l,3,c.dtype,!1,0,0),n.type=c.dtype,n.size=3,n.buffer=c,n.normalized=!1,n.offset=0,n.stride=0;l=g[5];B(l)&&16===l.length||e.commandRaise(q,t);G.uniformMatrix4fv(w.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Pa[0]=l[0],Pa[1]=l[1],Pa[2]=l[2],Pa[3]=l[3],Pa[4]=l[4],
Pa[5]=l[5],Pa[6]=l[6],Pa[7]=l[7],Pa[8]=l[8],Pa[9]=l[9],Pa[10]=l[10],Pa[11]=l[11],Pa[12]=l[12],Pa[13]=l[13],Pa[14]=l[14],Pa[15]=l[15],Pa));l=g[8];B(l)&&16===l.length||e.commandRaise(J,t);G.uniformMatrix4fv(ba.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(sa[0]=l[0],sa[1]=l[1],sa[2]=l[2],sa[3]=l[3],sa[4]=l[4],sa[5]=l[5],sa[6]=l[6],sa[7]=l[7],sa[8]=l[8],sa[9]=l[9],sa[10]=l[10],sa[11]=l[11],sa[12]=l[12],sa[13]=l[13],sa[14]=l[14],sa[15]=l[15],sa));C&&G.bindBuffer(34963,C.buffer.buffer);n=
C.primType;r=C.vertCount-0;0<=r||e.commandRaise(M,t);for(l=0;l<b;++l)r&&G.drawElements(n,r,C.type,0<<(C.type-5121>>1));la.setVAO(null);h&&(p.cpuTime+=performance.now()-k)}}},"$14,angle,color,position":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,L,q,J){var C,M,H,f,w,ba,E,W,D,y,ia,G,B,m,Z,g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa;C=a.attributes;M=a.context;H=a.current;f=a.draw;w=a.elements;ba=a.framebuffer;E=a.gl;W=a.isArrayLike;D=a.next;y=a.shader;ia=a.uniforms;G=a.vao;B=D.blend_color;m=H.blend_color;
Z=D.blend_equation;g=H.blend_equation;la=D.blend_func;Q=H.blend_func;ga=D.colorMask;Ea=H.colorMask;V=D.depth_range;X=H.depth_range;S=D.polygonOffset_offset;T=H.polygonOffset_offset;N=D.sample_coverage;x=H.sample_coverage;P=D.scissor_box;O=H.scissor_box;pa=D.stencil_func;oa=H.stencil_func;z=D.stencil_opBack;K=H.stencil_opBack;ea=D.stencil_opFront;U=H.stencil_opFront;ma=D.viewport;qa=H.viewport;return{draw:function(a){var k,n,r,v;k=ba.next;k!==ba.cur&&(k?E.bindFramebuffer(36160,k.framebuffer):E.bindFramebuffer(36160,
null),ba.cur=k);if(H.dirty){var y;k=D.dither;k!==H.dither&&(k?E.enable(3024):E.disable(3024),H.dither=k);k=D.blend_enable;k!==H.blend_enable&&(k?E.enable(3042):E.disable(3042),H.blend_enable=k);k=B[0];r=B[1];v=B[2];y=B[3];if(k!==m[0]||r!==m[1]||v!==m[2]||y!==m[3])E.blendColor(k,r,v,y),m[0]=k,m[1]=r,m[2]=v,m[3]=y;k=Z[0];r=Z[1];if(k!==g[0]||r!==g[1])E.blendEquationSeparate(k,r),g[0]=k,g[1]=r;k=la[0];r=la[1];v=la[2];y=la[3];if(k!==Q[0]||r!==Q[1]||v!==Q[2]||y!==Q[3])E.blendFuncSeparate(k,r,v,y),Q[0]=
k,Q[1]=r,Q[2]=v,Q[3]=y;k=D.depth_func;k!==H.depth_func&&(E.depthFunc(k),H.depth_func=k);k=V[0];r=V[1];if(k!==X[0]||r!==X[1])E.depthRange(k,r),X[0]=k,X[1]=r;k=D.depth_mask;k!==H.depth_mask&&(E.depthMask(k),H.depth_mask=k);k=ga[0];r=ga[1];v=ga[2];y=ga[3];if(k!==Ea[0]||r!==Ea[1]||v!==Ea[2]||y!==Ea[3])E.colorMask(k,r,v,y),Ea[0]=k,Ea[1]=r,Ea[2]=v,Ea[3]=y;k=D.cull_enable;k!==H.cull_enable&&(k?E.enable(2884):E.disable(2884),H.cull_enable=k);k=D.cull_face;k!==H.cull_face&&(E.cullFace(k),H.cull_face=k);k=
D.frontFace;k!==H.frontFace&&(E.frontFace(k),H.frontFace=k);k=D.lineWidth;k!==H.lineWidth&&(E.lineWidth(k),H.lineWidth=k);k=D.polygonOffset_enable;k!==H.polygonOffset_enable&&(k?E.enable(32823):E.disable(32823),H.polygonOffset_enable=k);k=S[0];r=S[1];if(k!==T[0]||r!==T[1])E.polygonOffset(k,r),T[0]=k,T[1]=r;k=D.sample_alpha;k!==H.sample_alpha&&(k?E.enable(32926):E.disable(32926),H.sample_alpha=k);k=D.sample_enable;k!==H.sample_enable&&(k?E.enable(32928):E.disable(32928),H.sample_enable=k);k=N[0];r=
N[1];if(k!==x[0]||r!==x[1])E.sampleCoverage(k,r),x[0]=k,x[1]=r;k=D.stencil_enable;k!==H.stencil_enable&&(k?E.enable(2960):E.disable(2960),H.stencil_enable=k);k=D.stencil_mask;k!==H.stencil_mask&&(E.stencilMask(k),H.stencil_mask=k);k=pa[0];r=pa[1];v=pa[2];if(k!==oa[0]||r!==oa[1]||v!==oa[2])E.stencilFunc(k,r,v),oa[0]=k,oa[1]=r,oa[2]=v;k=ea[0];r=ea[1];v=ea[2];y=ea[3];if(k!==U[0]||r!==U[1]||v!==U[2]||y!==U[3])E.stencilOpSeparate(k,r,v,y),U[0]=k,U[1]=r,U[2]=v,U[3]=y;k=z[0];r=z[1];v=z[2];y=z[3];if(k!==
K[0]||r!==K[1]||v!==K[2]||y!==K[3])E.stencilOpSeparate(k,r,v,y),K[0]=k,K[1]=r,K[2]=v,K[3]=y;k=D.scissor_enable;k!==H.scissor_enable&&(k?E.enable(3089):E.disable(3089),H.scissor_enable=k);k=P[0];r=P[1];v=P[2];y=P[3];if(k!==O[0]||r!==O[1]||v!==O[2]||y!==O[3])E.scissor(k,r,v,y),O[0]=k,O[1]=r,O[2]=v,O[3]=y;k=ma[0];r=ma[1];v=ma[2];y=ma[3];if(k!==qa[0]||r!==qa[1]||v!==qa[2]||y!==qa[3])E.viewport(k,r,v,y),qa[0]=k,qa[1]=r,qa[2]=v,qa[3]=y}E.disable(2929);H.depth_enable=!1;if(k=H.profile)n=performance.now(),
p.count++;E.useProgram(h.program);G.setVAO(null);r=J.location;v=C[r];v.buffer||E.enableVertexAttribArray(r);if(v.type!==d.dtype||2!==v.size||v.buffer!==d||!1!==v.normalized||0!==v.offset||0!==v.stride)E.bindBuffer(34962,d.buffer),E.vertexAttribPointer(r,2,d.dtype,!1,0,0),v.type=d.dtype,v.size=2,v.buffer=d,v.normalized=!1,v.offset=0,v.stride=0;r=c.call(this,M,a,0);"number"!==typeof r&&e.commandRaise(b,t);E.uniform1f(L.location,r);a=a.color;W(a)&&4===a.length||e.commandRaise(l,t);E.uniform4f(q.location,
a[0],a[1],a[2],a[3]);(a=f.elements)?E.bindBuffer(34963,a.buffer.buffer):G.currentVAO&&(a=w.getElements(G.currentVAO.elements))&&E.bindBuffer(34963,a.buffer.buffer);r=f.primitive;v=f.offset;a?E.drawElements(r,3,a.type,v<<(a.type-5121>>1)):E.drawArrays(r,v,3);H.dirty=!0;G.setVAO(null);k&&(p.cpuTime+=performance.now()-n)},scope:function(a,c,b){var e,g,h,k,m,l,q,n,t,u,w,x,z,F,C,B,E,G,I,J;e=D.depth_enable;D.depth_enable=!1;if(g=H.profile)h=performance.now(),p.count++;k=f.count;f.count=3;m=r.call(this,
M,a,b);l=ia[3];ia[3]=m;q=a.color;m=ia[4];ia[4]=q;q=v.buffer;v.buffer=d;n=v.divisor;v.divisor=0;t=v.normalized;v.normalized=!1;u=v.offset;v.offset=0;w=v.size;v.size=0;x=v.state;v.state=1;z=v.stride;v.stride=0;F=v.type;v.type=d.dtype;C=v.w;v.w=0;B=v.x;v.x=0;E=v.y;v.y=0;G=v.z;v.z=0;I=y.vert;y.vert=2;J=y.frag;y.frag=1;H.dirty=!0;c(M,a,b);D.depth_enable=e;g&&(p.cpuTime+=performance.now()-h);f.count=k;ia[3]=l;ia[4]=m;v.buffer=q;v.divisor=n;v.normalized=t;v.offset=u;v.size=w;v.state=x;v.stride=z;v.type=
F;v.w=C;v.x=B;v.y=E;v.z=G;y.vert=I;y.frag=J;H.dirty=!0},batch:function(a,c){var b,h,l,r;b=ba.next;b!==ba.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),ba.cur=b);if(H.dirty){var v,y,sa;b=D.dither;b!==H.dither&&(b?E.enable(3024):E.disable(3024),H.dither=b);b=D.blend_enable;b!==H.blend_enable&&(b?E.enable(3042):E.disable(3042),H.blend_enable=b);b=B[0];v=B[1];y=B[2];sa=B[3];if(b!==m[0]||v!==m[1]||y!==m[2]||sa!==m[3])E.blendColor(b,v,y,sa),m[0]=b,m[1]=v,m[2]=y,m[3]=sa;b=
Z[0];v=Z[1];if(b!==g[0]||v!==g[1])E.blendEquationSeparate(b,v),g[0]=b,g[1]=v;b=la[0];v=la[1];y=la[2];sa=la[3];if(b!==Q[0]||v!==Q[1]||y!==Q[2]||sa!==Q[3])E.blendFuncSeparate(b,v,y,sa),Q[0]=b,Q[1]=v,Q[2]=y,Q[3]=sa;b=D.depth_func;b!==H.depth_func&&(E.depthFunc(b),H.depth_func=b);b=V[0];v=V[1];if(b!==X[0]||v!==X[1])E.depthRange(b,v),X[0]=b,X[1]=v;b=D.depth_mask;b!==H.depth_mask&&(E.depthMask(b),H.depth_mask=b);b=ga[0];v=ga[1];y=ga[2];sa=ga[3];if(b!==Ea[0]||v!==Ea[1]||y!==Ea[2]||sa!==Ea[3])E.colorMask(b,
v,y,sa),Ea[0]=b,Ea[1]=v,Ea[2]=y,Ea[3]=sa;b=D.cull_enable;b!==H.cull_enable&&(b?E.enable(2884):E.disable(2884),H.cull_enable=b);b=D.cull_face;b!==H.cull_face&&(E.cullFace(b),H.cull_face=b);b=D.frontFace;b!==H.frontFace&&(E.frontFace(b),H.frontFace=b);b=D.lineWidth;b!==H.lineWidth&&(E.lineWidth(b),H.lineWidth=b);b=D.polygonOffset_enable;b!==H.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),H.polygonOffset_enable=b);b=S[0];v=S[1];if(b!==T[0]||v!==T[1])E.polygonOffset(b,v),T[0]=b,T[1]=v;b=D.sample_alpha;
b!==H.sample_alpha&&(b?E.enable(32926):E.disable(32926),H.sample_alpha=b);b=D.sample_enable;b!==H.sample_enable&&(b?E.enable(32928):E.disable(32928),H.sample_enable=b);b=N[0];v=N[1];if(b!==x[0]||v!==x[1])E.sampleCoverage(b,v),x[0]=b,x[1]=v;b=D.stencil_enable;b!==H.stencil_enable&&(b?E.enable(2960):E.disable(2960),H.stencil_enable=b);b=D.stencil_mask;b!==H.stencil_mask&&(E.stencilMask(b),H.stencil_mask=b);b=pa[0];v=pa[1];y=pa[2];if(b!==oa[0]||v!==oa[1]||y!==oa[2])E.stencilFunc(b,v,y),oa[0]=b,oa[1]=
v,oa[2]=y;b=ea[0];v=ea[1];y=ea[2];sa=ea[3];if(b!==U[0]||v!==U[1]||y!==U[2]||sa!==U[3])E.stencilOpSeparate(b,v,y,sa),U[0]=b,U[1]=v,U[2]=y,U[3]=sa;b=z[0];v=z[1];y=z[2];sa=z[3];if(b!==K[0]||v!==K[1]||y!==K[2]||sa!==K[3])E.stencilOpSeparate(b,v,y,sa),K[0]=b,K[1]=v,K[2]=y,K[3]=sa;b=D.scissor_enable;b!==H.scissor_enable&&(b?E.enable(3089):E.disable(3089),H.scissor_enable=b);b=P[0];v=P[1];y=P[2];sa=P[3];if(b!==O[0]||v!==O[1]||y!==O[2]||sa!==O[3])E.scissor(b,v,y,sa),O[0]=b,O[1]=v,O[2]=y,O[3]=sa;b=ma[0];v=
ma[1];y=ma[2];sa=ma[3];if(b!==qa[0]||v!==qa[1]||y!==qa[2]||sa!==qa[3])E.viewport(b,v,y,sa),qa[0]=b,qa[1]=v,qa[2]=y,qa[3]=sa}E.disable(2929);H.depth_enable=!1;if(b=H.profile)h=performance.now(),p.count+=c;E.useProgram(k.program);G.setVAO(null);v=J.location;y=C[v];y.buffer||E.enableVertexAttribArray(v);if(y.type!==d.dtype||2!==y.size||y.buffer!==d||!1!==y.normalized||0!==y.offset||0!==y.stride)E.bindBuffer(34962,d.buffer),E.vertexAttribPointer(v,2,d.dtype,!1,0,0),y.type=d.dtype,y.size=2,y.buffer=d,
y.normalized=!1,y.offset=0,y.stride=0;l=F.call(this,M,r,l);"number"!==typeof l&&e.commandRaise(I,t);E.uniform1f(L.location,l);(v=f.elements)?E.bindBuffer(34963,v.buffer.buffer):G.currentVAO&&(v=w.getElements(G.currentVAO.elements))&&E.bindBuffer(34963,v.buffer.buffer);y=f.primitive;sa=f.offset;for(l=0;l<c;++l){r=a[l];var zb,ia,A,u,ha,ua,Da;zb=r.color;W(zb)&&4===zb.length||e.commandRaise(n,t);r=zb[0];A=zb[1];ha=zb[2];zb=zb[3];l&&ia===r&&u===A&&ua===ha&&Da===zb||(ia=r,u=A,ua=ha,Da=zb,E.uniform4f(q.location,
r,A,ha,zb));v?E.drawElements(y,3,v.type,sa<<(v.type-5121>>1)):E.drawArrays(y,sa,3)}H.dirty=!0;G.setVAO(null);b&&(p.cpuTime+=performance.now()-h)}}},"$13,color,position":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,H){var q,J,C,M,L,f,w,ba,E,W,D,y,ia,G,B,m,Z,g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea;q=a.attributes;J=a.context;C=a.current;M=a.draw;L=a.framebuffer;f=a.gl;w=a.next;ba=a.shader;E=a.uniforms;W=a.vao;D=w.blend_color;y=C.blend_color;ia=w.blend_equation;G=C.blend_equation;B=w.blend_func;m=C.blend_func;
Z=w.colorMask;g=C.colorMask;la=w.depth_range;Q=C.depth_range;ga=w.polygonOffset_offset;Ea=C.polygonOffset_offset;V=w.sample_coverage;X=C.sample_coverage;S=w.scissor_box;T=C.scissor_box;N=w.stencil_func;x=C.stencil_func;P=w.stencil_opBack;O=C.stencil_opBack;pa=w.stencil_opFront;oa=C.stencil_opFront;z=w.viewport;K=C.viewport;ea=[1,0,0,1];return{draw:function(a){var k,l,r;a=L.next;a!==L.cur&&(a?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null),L.cur=a);if(C.dirty){var v;a=w.dither;
a!==C.dither&&(a?f.enable(3024):f.disable(3024),C.dither=a);a=w.blend_enable;a!==C.blend_enable&&(a?f.enable(3042):f.disable(3042),C.blend_enable=a);a=D[0];l=D[1];r=D[2];v=D[3];if(a!==y[0]||l!==y[1]||r!==y[2]||v!==y[3])f.blendColor(a,l,r,v),y[0]=a,y[1]=l,y[2]=r,y[3]=v;a=ia[0];l=ia[1];if(a!==G[0]||l!==G[1])f.blendEquationSeparate(a,l),G[0]=a,G[1]=l;a=B[0];l=B[1];r=B[2];v=B[3];if(a!==m[0]||l!==m[1]||r!==m[2]||v!==m[3])f.blendFuncSeparate(a,l,r,v),m[0]=a,m[1]=l,m[2]=r,m[3]=v;a=w.depth_enable;a!==C.depth_enable&&
(a?f.enable(2929):f.disable(2929),C.depth_enable=a);a=w.depth_func;a!==C.depth_func&&(f.depthFunc(a),C.depth_func=a);a=la[0];l=la[1];if(a!==Q[0]||l!==Q[1])f.depthRange(a,l),Q[0]=a,Q[1]=l;a=w.depth_mask;a!==C.depth_mask&&(f.depthMask(a),C.depth_mask=a);a=Z[0];l=Z[1];r=Z[2];v=Z[3];if(a!==g[0]||l!==g[1]||r!==g[2]||v!==g[3])f.colorMask(a,l,r,v),g[0]=a,g[1]=l,g[2]=r,g[3]=v;a=w.cull_enable;a!==C.cull_enable&&(a?f.enable(2884):f.disable(2884),C.cull_enable=a);a=w.cull_face;a!==C.cull_face&&(f.cullFace(a),
C.cull_face=a);a=w.frontFace;a!==C.frontFace&&(f.frontFace(a),C.frontFace=a);a=w.polygonOffset_enable;a!==C.polygonOffset_enable&&(a?f.enable(32823):f.disable(32823),C.polygonOffset_enable=a);a=ga[0];l=ga[1];if(a!==Ea[0]||l!==Ea[1])f.polygonOffset(a,l),Ea[0]=a,Ea[1]=l;a=w.sample_alpha;a!==C.sample_alpha&&(a?f.enable(32926):f.disable(32926),C.sample_alpha=a);a=w.sample_enable;a!==C.sample_enable&&(a?f.enable(32928):f.disable(32928),C.sample_enable=a);a=V[0];l=V[1];if(a!==X[0]||l!==X[1])f.sampleCoverage(a,
l),X[0]=a,X[1]=l;a=w.stencil_enable;a!==C.stencil_enable&&(a?f.enable(2960):f.disable(2960),C.stencil_enable=a);a=w.stencil_mask;a!==C.stencil_mask&&(f.stencilMask(a),C.stencil_mask=a);a=N[0];l=N[1];r=N[2];if(a!==x[0]||l!==x[1]||r!==x[2])f.stencilFunc(a,l,r),x[0]=a,x[1]=l,x[2]=r;a=pa[0];l=pa[1];r=pa[2];v=pa[3];if(a!==oa[0]||l!==oa[1]||r!==oa[2]||v!==oa[3])f.stencilOpSeparate(a,l,r,v),oa[0]=a,oa[1]=l,oa[2]=r,oa[3]=v;a=P[0];l=P[1];r=P[2];v=P[3];if(a!==O[0]||l!==O[1]||r!==O[2]||v!==O[3])f.stencilOpSeparate(a,
l,r,v),O[0]=a,O[1]=l,O[2]=r,O[3]=v;a=w.scissor_enable;a!==C.scissor_enable&&(a?f.enable(3089):f.disable(3089),C.scissor_enable=a);a=S[0];l=S[1];r=S[2];v=S[3];if(a!==T[0]||l!==T[1]||r!==T[2]||v!==T[3])f.scissor(a,l,r,v),T[0]=a,T[1]=l,T[2]=r,T[3]=v;a=z[0];l=z[1];r=z[2];v=z[3];if(a!==K[0]||l!==K[1]||r!==K[2]||v!==K[3])f.viewport(a,l,r,v),K[0]=a,K[1]=l,K[2]=r,K[3]=v}f.lineWidth(1);C.lineWidth=1;if(a=C.profile)k=performance.now(),p.count++;f.useProgram(h.program);W.setVAO(null);l=H.location;r=q[l];r.buffer||
f.enableVertexAttribArray(l);if(r.type!==d.dtype||2!==r.size||r.buffer!==d||!1!==r.normalized||0!==r.offset||0!==r.stride)f.bindBuffer(34962,d.buffer),f.vertexAttribPointer(l,2,d.dtype,!1,0,0),r.type=d.dtype,r.size=2,r.buffer=d,r.normalized=!1,r.offset=0,r.stride=0;f.uniform4f(n.location,1,0,0,1);c&&f.bindBuffer(34963,c.buffer.buffer);l=c.primType;r=c.vertCount-0;0<=r||e.commandRaise(b,t);r&&(f.drawElements(l,r,c.type,0<<(c.type-5121>>1)),C.dirty=!0,W.setVAO(null),a&&(p.cpuTime+=performance.now()-
k))},scope:function(a,b,c){var f,g,h,k,m,q,n,x,y,z,F,A,u,B,D,G,I,K,H,N,O,L;f=w.lineWidth;w.lineWidth=1;if(g=C.profile)h=performance.now(),p.count++;k=M.elements;M.elements=l;m=M.offset;M.offset=0;q=l.vertCount-0;0<=q||e.commandRaise(r,t);n=M.count;M.count=q;x=l.primType;q=M.primitive;M.primitive=x;x=E[3];E[3]=ea;y=v.buffer;v.buffer=d;z=v.divisor;v.divisor=0;F=v.normalized;v.normalized=!1;A=v.offset;v.offset=0;u=v.size;v.size=0;B=v.state;v.state=1;D=v.stride;v.stride=0;G=v.type;v.type=d.dtype;I=v.w;
v.w=0;K=v.x;v.x=0;H=v.y;v.y=0;N=v.z;v.z=0;O=ba.vert;ba.vert=2;L=ba.frag;ba.frag=1;C.dirty=!0;b(J,a,c);w.lineWidth=f;g&&(p.cpuTime+=performance.now()-h);M.elements=k;M.offset=m;M.count=n;M.primitive=q;E[3]=x;v.buffer=y;v.divisor=z;v.normalized=F;v.offset=A;v.size=u;v.state=B;v.stride=D;v.type=G;v.w=I;v.x=K;v.y=H;v.z=N;ba.vert=O;ba.frag=L;C.dirty=!0},batch:function(a,b){var c,h,l;c=L.next;c!==L.cur&&(c?f.bindFramebuffer(36160,c.framebuffer):f.bindFramebuffer(36160,null),L.cur=c);if(C.dirty){var r,v;
c=w.dither;c!==C.dither&&(c?f.enable(3024):f.disable(3024),C.dither=c);c=w.blend_enable;c!==C.blend_enable&&(c?f.enable(3042):f.disable(3042),C.blend_enable=c);c=D[0];l=D[1];r=D[2];v=D[3];if(c!==y[0]||l!==y[1]||r!==y[2]||v!==y[3])f.blendColor(c,l,r,v),y[0]=c,y[1]=l,y[2]=r,y[3]=v;c=ia[0];l=ia[1];if(c!==G[0]||l!==G[1])f.blendEquationSeparate(c,l),G[0]=c,G[1]=l;c=B[0];l=B[1];r=B[2];v=B[3];if(c!==m[0]||l!==m[1]||r!==m[2]||v!==m[3])f.blendFuncSeparate(c,l,r,v),m[0]=c,m[1]=l,m[2]=r,m[3]=v;c=w.depth_enable;
c!==C.depth_enable&&(c?f.enable(2929):f.disable(2929),C.depth_enable=c);c=w.depth_func;c!==C.depth_func&&(f.depthFunc(c),C.depth_func=c);c=la[0];l=la[1];if(c!==Q[0]||l!==Q[1])f.depthRange(c,l),Q[0]=c,Q[1]=l;c=w.depth_mask;c!==C.depth_mask&&(f.depthMask(c),C.depth_mask=c);c=Z[0];l=Z[1];r=Z[2];v=Z[3];if(c!==g[0]||l!==g[1]||r!==g[2]||v!==g[3])f.colorMask(c,l,r,v),g[0]=c,g[1]=l,g[2]=r,g[3]=v;c=w.cull_enable;c!==C.cull_enable&&(c?f.enable(2884):f.disable(2884),C.cull_enable=c);c=w.cull_face;c!==C.cull_face&&
(f.cullFace(c),C.cull_face=c);c=w.frontFace;c!==C.frontFace&&(f.frontFace(c),C.frontFace=c);c=w.polygonOffset_enable;c!==C.polygonOffset_enable&&(c?f.enable(32823):f.disable(32823),C.polygonOffset_enable=c);c=ga[0];l=ga[1];if(c!==Ea[0]||l!==Ea[1])f.polygonOffset(c,l),Ea[0]=c,Ea[1]=l;c=w.sample_alpha;c!==C.sample_alpha&&(c?f.enable(32926):f.disable(32926),C.sample_alpha=c);c=w.sample_enable;c!==C.sample_enable&&(c?f.enable(32928):f.disable(32928),C.sample_enable=c);c=V[0];l=V[1];if(c!==X[0]||l!==X[1])f.sampleCoverage(c,
l),X[0]=c,X[1]=l;c=w.stencil_enable;c!==C.stencil_enable&&(c?f.enable(2960):f.disable(2960),C.stencil_enable=c);c=w.stencil_mask;c!==C.stencil_mask&&(f.stencilMask(c),C.stencil_mask=c);c=N[0];l=N[1];r=N[2];if(c!==x[0]||l!==x[1]||r!==x[2])f.stencilFunc(c,l,r),x[0]=c,x[1]=l,x[2]=r;c=pa[0];l=pa[1];r=pa[2];v=pa[3];if(c!==oa[0]||l!==oa[1]||r!==oa[2]||v!==oa[3])f.stencilOpSeparate(c,l,r,v),oa[0]=c,oa[1]=l,oa[2]=r,oa[3]=v;c=P[0];l=P[1];r=P[2];v=P[3];if(c!==O[0]||l!==O[1]||r!==O[2]||v!==O[3])f.stencilOpSeparate(c,
l,r,v),O[0]=c,O[1]=l,O[2]=r,O[3]=v;c=w.scissor_enable;c!==C.scissor_enable&&(c?f.enable(3089):f.disable(3089),C.scissor_enable=c);c=S[0];l=S[1];r=S[2];v=S[3];if(c!==T[0]||l!==T[1]||r!==T[2]||v!==T[3])f.scissor(c,l,r,v),T[0]=c,T[1]=l,T[2]=r,T[3]=v;c=z[0];l=z[1];r=z[2];v=z[3];if(c!==K[0]||l!==K[1]||r!==K[2]||v!==K[3])f.viewport(c,l,r,v),K[0]=c,K[1]=l,K[2]=r,K[3]=v}f.lineWidth(1);C.lineWidth=1;if(c=C.profile)h=performance.now(),p.count+=b;f.useProgram(k.program);W.setVAO(null);l=H.location;r=q[l];r.buffer||
f.enableVertexAttribArray(l);if(r.type!==d.dtype||2!==r.size||r.buffer!==d||!1!==r.normalized||0!==r.offset||0!==r.stride)f.bindBuffer(34962,d.buffer),f.vertexAttribPointer(l,2,d.dtype,!1,0,0),r.type=d.dtype,r.size=2,r.buffer=d,r.normalized=!1,r.offset=0,r.stride=0;f.uniform4f(n.location,1,0,0,1);F&&f.bindBuffer(34963,F.buffer.buffer);r=F.primType;v=F.vertCount-0;0<=v||e.commandRaise(I,t);for(l=0;l<b;++l)v&&f.drawElements(r,v,F.type,0<<(F.type-5121>>1));C.dirty=!0;W.setVAO(null);c&&(p.cpuTime+=performance.now()-
h)}}},"$20,mouse,position,t,texture":function(a,e,t,p,h,d,c,b,l,r,v,k,F,I,n,H,q,J,C,M,L,f,w,ba,E){var W,D,y,ia,G,B,m,Z,g,la,Q,ga,Ea,V,X,S,T,N,x,P,O,pa,oa,z,K,ea,U,ma,qa,Ba,ya,da,Ca,ja,na,za;W=a.attributes;D=a.context;y=a.current;ia=a.draw;G=a.elements;B=a.framebuffer;m=a.gl;Z=a.isArrayLike;g=a.next;la=a.shader;Q=a.uniforms;ga=a.vao;Ea=g.blend_color;V=y.blend_color;X=g.blend_equation;S=y.blend_equation;T=g.blend_func;N=y.blend_func;x=g.colorMask;P=y.colorMask;O=g.depth_range;pa=y.depth_range;oa=g.polygonOffset_offset;
z=y.polygonOffset_offset;K=g.sample_coverage;ea=y.sample_coverage;U=g.scissor_box;ma=y.scissor_box;qa=g.stencil_func;Ba=y.stencil_func;ya=g.stencil_opBack;da=y.stencil_opBack;Ca=g.stencil_opFront;ja=y.stencil_opFront;na=g.viewport;za=y.viewport;return{draw:function(a){var k,q,n,A;k=B.next;k!==B.cur&&(k?m.bindFramebuffer(36160,k.framebuffer):m.bindFramebuffer(36160,null),B.cur=k);if(y.dirty){var u;k=g.dither;k!==y.dither&&(k?m.enable(3024):m.disable(3024),y.dither=k);k=g.blend_enable;k!==y.blend_enable&&
(k?m.enable(3042):m.disable(3042),y.blend_enable=k);k=Ea[0];n=Ea[1];A=Ea[2];u=Ea[3];if(k!==V[0]||n!==V[1]||A!==V[2]||u!==V[3])m.blendColor(k,n,A,u),V[0]=k,V[1]=n,V[2]=A,V[3]=u;k=X[0];n=X[1];if(k!==S[0]||n!==S[1])m.blendEquationSeparate(k,n),S[0]=k,S[1]=n;k=T[0];n=T[1];A=T[2];u=T[3];if(k!==N[0]||n!==N[1]||A!==N[2]||u!==N[3])m.blendFuncSeparate(k,n,A,u),N[0]=k,N[1]=n,N[2]=A,N[3]=u;k=g.depth_enable;k!==y.depth_enable&&(k?m.enable(2929):m.disable(2929),y.depth_enable=k);k=g.depth_func;k!==y.depth_func&&
(m.depthFunc(k),y.depth_func=k);k=O[0];n=O[1];if(k!==pa[0]||n!==pa[1])m.depthRange(k,n),pa[0]=k,pa[1]=n;k=g.depth_mask;k!==y.depth_mask&&(m.depthMask(k),y.depth_mask=k);k=x[0];n=x[1];A=x[2];u=x[3];if(k!==P[0]||n!==P[1]||A!==P[2]||u!==P[3])m.colorMask(k,n,A,u),P[0]=k,P[1]=n,P[2]=A,P[3]=u;k=g.cull_enable;k!==y.cull_enable&&(k?m.enable(2884):m.disable(2884),y.cull_enable=k);k=g.cull_face;k!==y.cull_face&&(m.cullFace(k),y.cull_face=k);k=g.frontFace;k!==y.frontFace&&(m.frontFace(k),y.frontFace=k);k=g.lineWidth;
k!==y.lineWidth&&(m.lineWidth(k),y.lineWidth=k);k=g.polygonOffset_enable;k!==y.polygonOffset_enable&&(k?m.enable(32823):m.disable(32823),y.polygonOffset_enable=k);k=oa[0];n=oa[1];if(k!==z[0]||n!==z[1])m.polygonOffset(k,n),z[0]=k,z[1]=n;k=g.sample_alpha;k!==y.sample_alpha&&(k?m.enable(32926):m.disable(32926),y.sample_alpha=k);k=g.sample_enable;k!==y.sample_enable&&(k?m.enable(32928):m.disable(32928),y.sample_enable=k);k=K[0];n=K[1];if(k!==ea[0]||n!==ea[1])m.sampleCoverage(k,n),ea[0]=k,ea[1]=n;k=g.stencil_enable;
k!==y.stencil_enable&&(k?m.enable(2960):m.disable(2960),y.stencil_enable=k);k=g.stencil_mask;k!==y.stencil_mask&&(m.stencilMask(k),y.stencil_mask=k);k=qa[0];n=qa[1];A=qa[2];if(k!==Ba[0]||n!==Ba[1]||A!==Ba[2])m.stencilFunc(k,n,A),Ba[0]=k,Ba[1]=n,Ba[2]=A;k=Ca[0];n=Ca[1];A=Ca[2];u=Ca[3];if(k!==ja[0]||n!==ja[1]||A!==ja[2]||u!==ja[3])m.stencilOpSeparate(k,n,A,u),ja[0]=k,ja[1]=n,ja[2]=A,ja[3]=u;k=ya[0];n=ya[1];A=ya[2];u=ya[3];if(k!==da[0]||n!==da[1]||A!==da[2]||u!==da[3])m.stencilOpSeparate(k,n,A,u),da[0]=
k,da[1]=n,da[2]=A,da[3]=u;k=g.scissor_enable;k!==y.scissor_enable&&(k?m.enable(3089):m.disable(3089),y.scissor_enable=k);k=U[0];n=U[1];A=U[2];u=U[3];if(k!==ma[0]||n!==ma[1]||A!==ma[2]||u!==ma[3])m.scissor(k,n,A,u),ma[0]=k,ma[1]=n,ma[2]=A,ma[3]=u;k=na[0];n=na[1];A=na[2];u=na[3];if(k!==za[0]||n!==za[1]||A!==za[2]||u!==za[3])m.viewport(k,n,A,u),za[0]=k,za[1]=n,za[2]=A,za[3]=u;y.dirty=!1}if(k=y.profile)q=performance.now(),p.count++;m.useProgram(h.program);ga.setVAO(null);n=w.location;A=W[n];A.buffer||
m.enableVertexAttribArray(n);if(A.type!==d.dtype||2!==A.size||A.buffer!==d||!1!==A.normalized||0!==A.offset||0!==A.stride)m.bindBuffer(34962,d.buffer),m.vertexAttribPointer(n,2,d.dtype,!1,0,0),A.type=d.dtype,A.size=2,A.buffer=d,A.normalized=!1,A.offset=0,A.stride=0;n=c.call(this,D,a,0);Z(n)&&2===n.length||e.commandRaise(b,t);m.uniform2f(f.location,n[0],n[1]);a=l.call(this,D,a,0);"number"!==typeof a&&e.commandRaise(r,t);m.uniform1f(ba.location,a);m.uniform1i(E.location,v.bind());(a=ia.elements)?m.bindBuffer(34963,
a.buffer.buffer):ga.currentVAO&&(a=G.getElements(ga.currentVAO.elements))&&m.bindBuffer(34963,a.buffer.buffer);n=ia.primitive;A=ia.offset;a?m.drawElements(n,3,a.type,A<<(a.type-5121>>1)):m.drawArrays(n,A,3);ga.setVAO(null);k&&(p.cpuTime+=performance.now()-q);v.unbind()},scope:function(a,c,b){var f,e,g,h,l,m,r,q,v,t,w,x,z,C,B,E,G,J,H,K;if(f=y.profile)e=performance.now(),p.count++;g=ia.count;ia.count=3;h=k.call(this,D,a,b);l=Q[3];Q[3]=h;m=F.call(this,D,a,b);h=Q[4];Q[4]=m;m=Q[5];Q[5]=I;r=n.buffer;n.buffer=
d;q=n.divisor;n.divisor=0;v=n.normalized;n.normalized=!1;t=n.offset;n.offset=0;w=n.size;n.size=0;x=n.state;n.state=1;z=n.stride;n.stride=0;C=n.type;n.type=d.dtype;B=n.w;n.w=0;E=n.x;n.x=0;G=n.y;n.y=0;J=n.z;n.z=0;H=la.vert;la.vert=2;K=la.frag;la.frag=1;c(D,a,b);f&&(p.cpuTime+=performance.now()-e);ia.count=g;Q[3]=l;Q[4]=h;Q[5]=m;n.buffer=r;n.divisor=q;n.normalized=v;n.offset=t;n.size=w;n.state=x;n.stride=z;n.type=C;n.w=B;n.x=E;n.y=G;n.z=J;la.vert=H;la.frag=K},batch:function(a,c){var b,h,k;b=B.next;b!==
B.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),B.cur=b);if(y.dirty){var l,n,r;b=g.dither;b!==y.dither&&(b?m.enable(3024):m.disable(3024),y.dither=b);b=g.blend_enable;b!==y.blend_enable&&(b?m.enable(3042):m.disable(3042),y.blend_enable=b);b=Ea[0];l=Ea[1];n=Ea[2];r=Ea[3];if(b!==V[0]||l!==V[1]||n!==V[2]||r!==V[3])m.blendColor(b,l,n,r),V[0]=b,V[1]=l,V[2]=n,V[3]=r;b=X[0];l=X[1];if(b!==S[0]||l!==S[1])m.blendEquationSeparate(b,l),S[0]=b,S[1]=l;b=T[0];l=T[1];n=T[2];r=T[3];
if(b!==N[0]||l!==N[1]||n!==N[2]||r!==N[3])m.blendFuncSeparate(b,l,n,r),N[0]=b,N[1]=l,N[2]=n,N[3]=r;b=g.depth_enable;b!==y.depth_enable&&(b?m.enable(2929):m.disable(2929),y.depth_enable=b);b=g.depth_func;b!==y.depth_func&&(m.depthFunc(b),y.depth_func=b);b=O[0];l=O[1];if(b!==pa[0]||l!==pa[1])m.depthRange(b,l),pa[0]=b,pa[1]=l;b=g.depth_mask;b!==y.depth_mask&&(m.depthMask(b),y.depth_mask=b);b=x[0];l=x[1];n=x[2];r=x[3];if(b!==P[0]||l!==P[1]||n!==P[2]||r!==P[3])m.colorMask(b,l,n,r),P[0]=b,P[1]=l,P[2]=n,
P[3]=r;b=g.cull_enable;b!==y.cull_enable&&(b?m.enable(2884):m.disable(2884),y.cull_enable=b);b=g.cull_face;b!==y.cull_face&&(m.cullFace(b),y.cull_face=b);b=g.frontFace;b!==y.frontFace&&(m.frontFace(b),y.frontFace=b);b=g.lineWidth;b!==y.lineWidth&&(m.lineWidth(b),y.lineWidth=b);b=g.polygonOffset_enable;b!==y.polygonOffset_enable&&(b?m.enable(32823):m.disable(32823),y.polygonOffset_enable=b);b=oa[0];l=oa[1];if(b!==z[0]||l!==z[1])m.polygonOffset(b,l),z[0]=b,z[1]=l;b=g.sample_alpha;b!==y.sample_alpha&&
(b?m.enable(32926):m.disable(32926),y.sample_alpha=b);b=g.sample_enable;b!==y.sample_enable&&(b?m.enable(32928):m.disable(32928),y.sample_enable=b);b=K[0];l=K[1];if(b!==ea[0]||l!==ea[1])m.sampleCoverage(b,l),ea[0]=b,ea[1]=l;b=g.stencil_enable;b!==y.stencil_enable&&(b?m.enable(2960):m.disable(2960),y.stencil_enable=b);b=g.stencil_mask;b!==y.stencil_mask&&(m.stencilMask(b),y.stencil_mask=b);b=qa[0];l=qa[1];n=qa[2];if(b!==Ba[0]||l!==Ba[1]||n!==Ba[2])m.stencilFunc(b,l,n),Ba[0]=b,Ba[1]=l,Ba[2]=n;b=Ca[0];
l=Ca[1];n=Ca[2];r=Ca[3];if(b!==ja[0]||l!==ja[1]||n!==ja[2]||r!==ja[3])m.stencilOpSeparate(b,l,n,r),ja[0]=b,ja[1]=l,ja[2]=n,ja[3]=r;b=ya[0];l=ya[1];n=ya[2];r=ya[3];if(b!==da[0]||l!==da[1]||n!==da[2]||r!==da[3])m.stencilOpSeparate(b,l,n,r),da[0]=b,da[1]=l,da[2]=n,da[3]=r;b=g.scissor_enable;b!==y.scissor_enable&&(b?m.enable(3089):m.disable(3089),y.scissor_enable=b);b=U[0];l=U[1];n=U[2];r=U[3];if(b!==ma[0]||l!==ma[1]||n!==ma[2]||r!==ma[3])m.scissor(b,l,n,r),ma[0]=b,ma[1]=l,ma[2]=n,ma[3]=r;b=na[0];l=na[1];
n=na[2];r=na[3];if(b!==za[0]||l!==za[1]||n!==za[2]||r!==za[3])m.viewport(b,l,n,r),za[0]=b,za[1]=l,za[2]=n,za[3]=r;y.dirty=!1}if(b=y.profile)h=performance.now(),p.count+=c;m.useProgram(H.program);ga.setVAO(null);l=w.location;n=W[l];n.buffer||m.enableVertexAttribArray(l);if(n.type!==d.dtype||2!==n.size||n.buffer!==d||!1!==n.normalized||0!==n.offset||0!==n.stride)m.bindBuffer(34962,d.buffer),m.vertexAttribPointer(l,2,d.dtype,!1,0,0),n.type=d.dtype,n.size=2,n.buffer=d,n.normalized=!1,n.offset=0,n.stride=
0;l=q.call(this,D,void 0,k);Z(l)&&2===l.length||e.commandRaise(J,t);m.uniform2f(f.location,l[0],l[1]);k=C.call(this,D,void 0,k);"number"!==typeof k&&e.commandRaise(M,t);m.uniform1f(ba.location,k);m.uniform1i(E.location,L.bind());(l=ia.elements)?m.bindBuffer(34963,l.buffer.buffer):ga.currentVAO&&(l=G.getElements(ga.currentVAO.elements))&&m.bindBuffer(34963,l.buffer.buffer);n=ia.primitive;r=ia.offset;for(k=0;k<c;++k)l?m.drawElements(n,3,l.type,r<<(l.type-5121>>1)):m.drawArrays(n,r,3);L.unbind();ga.setVAO(null);
b&&(p.cpuTime+=performance.now()-h)}}}}},{}],25:[function(L,H,ia){var a=L("./sorted-object-keys");H.exports=function(e,t){for(var p=a(t),h=0;h<p.length;++h)e[p[h]]=t[p[h]];return e}},{"./sorted-object-keys":34}],26:[function(L,H,ia){function a(a,e,d,c,b,l){for(var r=0;r<e;++r)for(var v=a[r],k=0;k<d;++k)for(var t=v[k],I=0;I<c;++I)b[l++]=t[I]}function e(p,h,d,c,b){for(var l=1,r=d+1;r<h.length;++r)l*=h[r];var v=h[d];if(4===h.length-d){var k=h[d+1],t=h[d+2];h=h[d+3];for(r=0;r<v;++r)a(p[r],k,t,h,c,b),
b+=l}else for(r=0;r<v;++r)e(p[r],h,d+1,c,b),b+=l}var t=L("./pool");H.exports={shape:function(a){for(var e=[];a.length;a=a[0])e.push(a.length);return e},flatten:function(p,h,d,c){var b=1;if(h.length)for(var l=0;l<h.length;++l)b*=h[l];else b=0;d=c||t.allocType(d,b);switch(h.length){case 0:break;case 1:c=h[0];for(h=0;h<c;++h)d[h]=p[h];break;case 2:c=h[0];h=h[1];for(l=b=0;l<c;++l)for(var r=p[l],v=0;v<h;++v)d[b++]=r[v];break;case 3:a(p,h[0],h[1],h[2],d,0);break;default:e(p,h,0,d,0)}return d}}},{"./pool":32}],
27:[function(L,H,ia){var a=L("./is-typed-array");H.exports=function(e){return Array.isArray(e)||a(e)}},{"./is-typed-array":30}],28:[function(L,H,ia){var a=L("./is-typed-array");H.exports=function(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||a(e.data))}},{"./is-typed-array":30}],29:[function(L,H,ia){H.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(L,H,ia){H.exports=
function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(L,H,ia){H.exports=function(a,e){for(var t=Array(a),p=0;p<a;++p)t[p]=e(p);return t}},{}],32:[function(L,H,ia){function a(a){var e,d;e=(65535<a)<<4;a>>>=e;d=(255<a)<<3;a>>>=d;e|=d;d=(15<a)<<2;a>>>=d;e|=d;d=(3<a)<<1;return e|d|a>>>
d>>1}function e(){function e(c){a:{for(var b=16;268435456>=b;b*=16)if(c<=b){c=b;break a}c=0}b=d[a(c)>>2];return 0<b.length?b.pop():new ArrayBuffer(c)}function h(c){d[a(c.byteLength)>>2].push(c)}var d=t(8,function(){return[]});return{alloc:e,free:h,allocType:function(a,b){var d=null;switch(a){case 5120:d=new Int8Array(e(b),0,b);break;case 5121:d=new Uint8Array(e(b),0,b);break;case 5122:d=new Int16Array(e(2*b),0,b);break;case 5123:d=new Uint16Array(e(2*b),0,b);break;case 5124:d=new Int32Array(e(4*b),
0,b);break;case 5125:d=new Uint32Array(e(4*b),0,b);break;case 5126:d=new Float32Array(e(4*b),0,b);break;default:return null}return d.length!==b?d.subarray(0,b):d},freeType:function(a){h(a.buffer)}}}var t=L("./loop");L=e();L.zero=e();H.exports=L},{"./loop":31}],33:[function(L,H,ia){H.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:
clearTimeout}},{}],34:[function(L,H,ia){H.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(L,H,ia){var a=L("./pool"),e=new Float32Array(1),t=new Uint32Array(e.buffer);H.exports=function(p){for(var h=a.allocType(5123,p.length),d=0;d<p.length;++d)if(isNaN(p[d]))h[d]=65535;else if(Infinity===p[d])h[d]=31744;else if(-Infinity===p[d])h[d]=64512;else{e[0]=p[d];var c=t[0],b=c>>>31<<15,l=(c<<1>>>24)-127,c=c>>13&1023;h[d]=-24>l?b:-14>l?b+(c+1024>>-14-l):15<l?b+31744:b+(l+15<<10)+c}return h}},
{"./pool":32}],36:[function(L,H,ia){var a=L("./sorted-object-keys");H.exports=function(e){return a(e).map(function(a){return e[a]})}},{"./sorted-object-keys":34}],37:[function(L,H,ia){function a(a,b,e){function h(){var b=window.innerWidth,d=window.innerHeight;a!==document.body&&(d=p.getBoundingClientRect(),b=d.right-d.left,d=d.bottom-d.top);p.width=e*b;p.height=e*d}var p=document.createElement("canvas");d(p.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(p);
a===document.body&&(p.style.position="absolute",d(a.style,{margin:0,padding:0}));var k;a!==document.body&&"function"===typeof ResizeObserver?(k=new ResizeObserver(function(){setTimeout(h)}),k.observe(a)):window.addEventListener("resize",h,!1);h();return{canvas:p,onDestroy:function(){k?k.disconnect():window.removeEventListener("resize",h);a.removeChild(p)}}}function e(a,b){function d(e){try{return a.getContext(e,b)}catch(l){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}
function t(a){if("string"===typeof a)return a.split();h(Array.isArray(a),"invalid extension array");return a}function p(a){return"string"===typeof a?(h("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var h=L("./util/check"),d=L("./util/extend");H.exports=function(c){var b=c||{},d,r,v,k;c={};var F=[],I=[],n="undefined"===typeof window?1:window.devicePixelRatio,H=!1,q=function(a){a&&h.raise(a)},J=function(){};"string"===typeof b?(h("undefined"!==typeof document,
"selector queries only supported in DOM environments"),d=document.querySelector(b),h(d,"invalid query string for element")):"object"===typeof b?"string"===typeof b.nodeName&&"function"===typeof b.appendChild&&"function"===typeof b.getBoundingClientRect?d=b:"function"===typeof b.drawArrays||"function"===typeof b.drawElements?(k=b,v=k.canvas):(h.constructor(b),"gl"in b?k=b.gl:"canvas"in b?v=p(b.canvas):"container"in b&&(r=p(b.container)),"attributes"in b&&(c=b.attributes,h.type(c,"object","invalid context attributes")),
"extensions"in b&&(F=t(b.extensions)),"optionalExtensions"in b&&(I=t(b.optionalExtensions)),"onDone"in b&&(h.type(b.onDone,"function","invalid or missing onDone callback"),q=b.onDone),"profile"in b&&(H=!!b.profile),"pixelRatio"in b&&(n=+b.pixelRatio,h(0<n,"invalid pixel ratio"))):h.raise("invalid arguments to regl");d&&("canvas"===d.nodeName.toLowerCase()?v=d:r=d);if(!k){if(!v){h("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");d=a(r||document.body,
q,n);if(!d)return null;v=d.canvas;J=d.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0);k=e(v,c)}return k?{gl:k,canvas:v,container:r,extensions:F,optionalExtensions:I,pixelRatio:n,profile:H,onDone:q,onDestroy:J}:(J(),q("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(L,H,ia){},{}],39:[function(L,H,ia){H.exports=function(a,e){var t=e[0],p=e[1],h=e[2],d=e[3],c=e[4],b=e[5],l=e[6],
r=e[7],v=e[8],k=e[9],F=e[10],I=e[11],n=e[12],H=e[13],q=e[14],J=e[15];a[0]=b*(F*J-I*q)-k*(l*J-r*q)+H*(l*I-r*F);a[1]=-(p*(F*J-I*q)-k*(h*J-d*q)+H*(h*I-d*F));a[2]=p*(l*J-r*q)-b*(h*J-d*q)+H*(h*r-d*l);a[3]=-(p*(l*I-r*F)-b*(h*I-d*F)+k*(h*r-d*l));a[4]=-(c*(F*J-I*q)-v*(l*J-r*q)+n*(l*I-r*F));a[5]=t*(F*J-I*q)-v*(h*J-d*q)+n*(h*I-d*F);a[6]=-(t*(l*J-r*q)-c*(h*J-d*q)+n*(h*r-d*l));a[7]=t*(l*I-r*F)-c*(h*I-d*F)+v*(h*r-d*l);a[8]=c*(k*J-I*H)-v*(b*J-r*H)+n*(b*I-r*k);a[9]=-(t*(k*J-I*H)-v*(p*J-d*H)+n*(p*I-d*k));a[10]=t*
(b*J-r*H)-c*(p*J-d*H)+n*(p*r-d*b);a[11]=-(t*(b*I-r*k)-c*(p*I-d*k)+v*(p*r-d*b));a[12]=-(c*(k*q-F*H)-v*(b*q-l*H)+n*(b*F-l*k));a[13]=t*(k*q-F*H)-v*(p*q-h*H)+n*(p*F-h*k);a[14]=-(t*(b*q-l*H)-c*(p*q-h*H)+n*(p*l-h*b));a[15]=t*(b*F-l*k)-c*(p*F-h*k)+v*(p*l-h*b);return a}},{}],40:[function(L,H,ia){H.exports=function(a){var e=new Float32Array(16);e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];e[6]=a[6];e[7]=a[7];e[8]=a[8];e[9]=a[9];e[10]=a[10];e[11]=a[11];e[12]=a[12];e[13]=a[13];e[14]=a[14];e[15]=
a[15];return e}},{}],41:[function(L,H,ia){H.exports=function(a,e){a[0]=e[0];a[1]=e[1];a[2]=e[2];a[3]=e[3];a[4]=e[4];a[5]=e[5];a[6]=e[6];a[7]=e[7];a[8]=e[8];a[9]=e[9];a[10]=e[10];a[11]=e[11];a[12]=e[12];a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}},{}],42:[function(L,H,ia){H.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],43:[function(L,H,ia){H.exports=function(a){var e=
a[0],t=a[1],p=a[2],h=a[3],d=a[4],c=a[5],b=a[6],l=a[7],r=a[8],v=a[9],k=a[10],F=a[11],I=a[12],n=a[13],H=a[14];a=a[15];return(e*c-t*d)*(k*a-F*H)-(e*b-p*d)*(v*a-F*n)+(e*l-h*d)*(v*H-k*n)+(t*b-p*c)*(r*a-F*I)-(t*l-h*c)*(r*H-k*I)+(p*l-h*b)*(r*n-v*I)}},{}],44:[function(L,H,ia){H.exports=function(a,e){var t=e[0],p=e[1],h=e[2],d=e[3],c=t+t,b=p+p,l=h+h,t=t*c,r=p*c,p=p*b,v=h*c,k=h*b,h=h*l,c=d*c,b=d*b,d=d*l;a[0]=1-p-h;a[1]=r+d;a[2]=v-b;a[3]=0;a[4]=r-d;a[5]=1-t-h;a[6]=k+c;a[7]=0;a[8]=v+b;a[9]=k-c;a[10]=1-t-p;a[11]=
0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],45:[function(L,H,ia){H.exports=function(a,e,t){var p,h,d=t[0],c=t[1];t=t[2];p=Math.sqrt(d*d+c*c+t*t);if(1E-6>Math.abs(p))return null;p=1/p;d*=p;c*=p;t*=p;p=Math.sin(e);e=Math.cos(e);h=1-e;a[0]=d*d*h+e;a[1]=c*d*h+t*p;a[2]=t*d*h-c*p;a[3]=0;a[4]=d*c*h-t*p;a[5]=c*c*h+e;a[6]=t*c*h+d*p;a[7]=0;a[8]=d*t*h+c*p;a[9]=c*t*h-d*p;a[10]=t*t*h+e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],46:[function(L,H,ia){H.exports=function(a,e,t){var p=e[0],h=e[1],
d=e[2],c=e[3],b=p+p,l=h+h,r=d+d;e=p*b;var v=p*l,p=p*r,k=h*l,h=h*r,d=d*r,b=c*b,l=c*l,c=c*r;a[0]=1-(k+d);a[1]=v+c;a[2]=p-l;a[3]=0;a[4]=v-c;a[5]=1-(e+d);a[6]=h+b;a[7]=0;a[8]=p+l;a[9]=h-b;a[10]=1-(e+k);a[11]=0;a[12]=t[0];a[13]=t[1];a[14]=t[2];a[15]=1;return a}},{}],47:[function(L,H,ia){H.exports=function(a,e){a[0]=e[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=e[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(L,H,ia){H.exports=function(a,e){a[0]=1;
a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a}},{}],49:[function(L,H,ia){H.exports=function(a,e){var t=Math.sin(e),p=Math.cos(e);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=p;a[6]=t;a[7]=0;a[8]=0;a[9]=-t;a[10]=p;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(L,H,ia){H.exports=function(a,e){var t=Math.sin(e),p=Math.cos(e);a[0]=p;a[1]=0;a[2]=-t;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=t;a[9]=0;a[10]=p;
a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(L,H,ia){H.exports=function(a,e){var t=Math.sin(e),p=Math.cos(e);a[0]=p;a[1]=t;a[2]=0;a[3]=0;a[4]=-t;a[5]=p;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],52:[function(L,H,ia){H.exports=function(a,e,t,p,h,d,c){var b=1/(t-e),l=1/(h-p),r=1/(d-c);a[0]=2*d*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*d*l;a[6]=0;a[7]=0;a[8]=(t+e)*b;a[9]=(h+p)*l;a[10]=(c+d)*r;a[11]=-1;a[12]=0;a[13]=0;a[14]=c*d*2*r;a[15]=
0;return a}},{}],53:[function(L,H,ia){H.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],54:[function(L,H,ia){H.exports={create:L("./create"),clone:L("./clone"),copy:L("./copy"),identity:L("./identity"),transpose:L("./transpose"),invert:L("./invert"),adjoint:L("./adjoint"),determinant:L("./determinant"),multiply:L("./multiply"),translate:L("./translate"),scale:L("./scale"),rotate:L("./rotate"),
rotateX:L("./rotateX"),rotateY:L("./rotateY"),rotateZ:L("./rotateZ"),fromRotation:L("./fromRotation"),fromRotationTranslation:L("./fromRotationTranslation"),fromScaling:L("./fromScaling"),fromTranslation:L("./fromTranslation"),fromXRotation:L("./fromXRotation"),fromYRotation:L("./fromYRotation"),fromZRotation:L("./fromZRotation"),fromQuat:L("./fromQuat"),frustum:L("./frustum"),perspective:L("./perspective"),perspectiveFromFieldOfView:L("./perspectiveFromFieldOfView"),ortho:L("./ortho"),lookAt:L("./lookAt"),
str:L("./str")}},{"./adjoint":39,"./clone":40,"./copy":41,"./create":42,"./determinant":43,"./fromQuat":44,"./fromRotation":45,"./fromRotationTranslation":46,"./fromScaling":47,"./fromTranslation":48,"./fromXRotation":49,"./fromYRotation":50,"./fromZRotation":51,"./frustum":52,"./identity":53,"./invert":55,"./lookAt":56,"./multiply":57,"./ortho":58,"./perspective":59,"./perspectiveFromFieldOfView":60,"./rotate":61,"./rotateX":62,"./rotateY":63,"./rotateZ":64,"./scale":65,"./str":66,"./translate":67,
"./transpose":68}],55:[function(L,H,ia){H.exports=function(a,e){var t=e[0],p=e[1],h=e[2],d=e[3],c=e[4],b=e[5],l=e[6],r=e[7],v=e[8],k=e[9],F=e[10],I=e[11],n=e[12],H=e[13],q=e[14],J=e[15],C=t*b-p*c,M=t*l-h*c,L=t*r-d*c,f=p*l-h*b,w=p*r-d*b,ba=h*r-d*l,E=v*H-k*n,W=v*q-F*n,D=v*J-I*n,y=k*q-F*H,ia=k*J-I*H,G=F*J-I*q,B=C*G-M*ia+L*y+f*D-w*W+ba*E;if(!B)return null;B=1/B;a[0]=(b*G-l*ia+r*y)*B;a[1]=(h*ia-p*G-d*y)*B;a[2]=(H*ba-q*w+J*f)*B;a[3]=(F*w-k*ba-I*f)*B;a[4]=(l*D-c*G-r*W)*B;a[5]=(t*G-h*D+d*W)*B;a[6]=(q*L-n*
ba-J*M)*B;a[7]=(v*ba-F*L+I*M)*B;a[8]=(c*ia-b*D+r*E)*B;a[9]=(p*D-t*ia-d*E)*B;a[10]=(n*w-H*L+J*C)*B;a[11]=(k*L-v*w-I*C)*B;a[12]=(b*W-c*y-l*E)*B;a[13]=(t*y-p*W+h*E)*B;a[14]=(H*M-n*f-q*C)*B;a[15]=(v*f-k*M+F*C)*B;return a}},{}],56:[function(L,H,ia){var a=L("./identity");H.exports=function(e,t,p,h){var d,c,b,l,r,v,k,F,I=t[0],n=t[1];t=t[2];b=h[0];l=h[1];c=h[2];k=p[0];h=p[1];d=p[2];if(1E-6>Math.abs(I-k)&&1E-6>Math.abs(n-h)&&1E-6>Math.abs(t-d))return a(e);p=I-k;h=n-h;k=t-d;F=1/Math.sqrt(p*p+h*h+k*k);p*=F;
h*=F;k*=F;d=l*k-c*h;c=c*p-b*k;b=b*h-l*p;(F=Math.sqrt(d*d+c*c+b*b))?(F=1/F,d*=F,c*=F,b*=F):b=c=d=0;l=h*b-k*c;r=k*d-p*b;v=p*c-h*d;(F=Math.sqrt(l*l+r*r+v*v))?(F=1/F,l*=F,r*=F,v*=F):v=r=l=0;e[0]=d;e[1]=l;e[2]=p;e[3]=0;e[4]=c;e[5]=r;e[6]=h;e[7]=0;e[8]=b;e[9]=v;e[10]=k;e[11]=0;e[12]=-(d*I+c*n+b*t);e[13]=-(l*I+r*n+v*t);e[14]=-(p*I+h*n+k*t);e[15]=1;return e}},{"./identity":53}],57:[function(L,H,ia){H.exports=function(a,e,t){var p=e[0],h=e[1],d=e[2],c=e[3],b=e[4],l=e[5],r=e[6],v=e[7],k=e[8],F=e[9],I=e[10],
n=e[11],H=e[12],q=e[13],J=e[14];e=e[15];var C=t[0],M=t[1],L=t[2],f=t[3];a[0]=C*p+M*b+L*k+f*H;a[1]=C*h+M*l+L*F+f*q;a[2]=C*d+M*r+L*I+f*J;a[3]=C*c+M*v+L*n+f*e;C=t[4];M=t[5];L=t[6];f=t[7];a[4]=C*p+M*b+L*k+f*H;a[5]=C*h+M*l+L*F+f*q;a[6]=C*d+M*r+L*I+f*J;a[7]=C*c+M*v+L*n+f*e;C=t[8];M=t[9];L=t[10];f=t[11];a[8]=C*p+M*b+L*k+f*H;a[9]=C*h+M*l+L*F+f*q;a[10]=C*d+M*r+L*I+f*J;a[11]=C*c+M*v+L*n+f*e;C=t[12];M=t[13];L=t[14];f=t[15];a[12]=C*p+M*b+L*k+f*H;a[13]=C*h+M*l+L*F+f*q;a[14]=C*d+M*r+L*I+f*J;a[15]=C*c+M*v+L*n+f*
e;return a}},{}],58:[function(L,H,ia){H.exports=function(a,e,t,p,h,d,c){var b=1/(e-t),l=1/(p-h),r=1/(d-c);a[0]=-2*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*r;a[11]=0;a[12]=(e+t)*b;a[13]=(h+p)*l;a[14]=(c+d)*r;a[15]=1;return a}},{}],59:[function(L,H,ia){H.exports=function(a,e,t,p,h){e=1/Math.tan(e/2);var d=1/(p-h);a[0]=e/t;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+p)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*h*p*d;a[15]=0;return a}},{}],60:[function(L,
H,ia){H.exports=function(a,e,t,p){var h=Math.tan(e.upDegrees*Math.PI/180),d=Math.tan(e.downDegrees*Math.PI/180),c=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);var b=2/(c+e),l=2/(h+d);a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=0;a[7]=0;a[8]=-((c-e)*b*.5);a[9]=(h-d)*l*.5;a[10]=p/(t-p);a[11]=-1;a[12]=0;a[13]=0;a[14]=p*t/(t-p);a[15]=0;return a}},{}],61:[function(L,H,ia){H.exports=function(a,e,t,p){var h=p[0],d=p[1];p=p[2];var c=Math.sqrt(h*h+d*d+p*p),b,l,r,v,k,F,H,n,
L,q,J,C,M,ia,f,w,ba,E,W,D;if(1E-6>Math.abs(c))return null;c=1/c;h*=c;d*=c;p*=c;b=Math.sin(t);l=Math.cos(t);r=1-l;t=e[0];c=e[1];v=e[2];k=e[3];F=e[4];H=e[5];n=e[6];L=e[7];q=e[8];J=e[9];C=e[10];M=e[11];ia=h*h*r+l;f=d*h*r+p*b;w=p*h*r-d*b;ba=h*d*r-p*b;E=d*d*r+l;W=p*d*r+h*b;D=h*p*r+d*b;h=d*p*r-h*b;d=p*p*r+l;a[0]=t*ia+F*f+q*w;a[1]=c*ia+H*f+J*w;a[2]=v*ia+n*f+C*w;a[3]=k*ia+L*f+M*w;a[4]=t*ba+F*E+q*W;a[5]=c*ba+H*E+J*W;a[6]=v*ba+n*E+C*W;a[7]=k*ba+L*E+M*W;a[8]=t*D+F*h+q*d;a[9]=c*D+H*h+J*d;a[10]=v*D+n*h+C*d;a[11]=
k*D+L*h+M*d;e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);return a}},{}],62:[function(L,H,ia){H.exports=function(a,e,t){var p=Math.sin(t);t=Math.cos(t);var h=e[4],d=e[5],c=e[6],b=e[7],l=e[8],r=e[9],v=e[10],k=e[11];e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[4]=h*t+l*p;a[5]=d*t+r*p;a[6]=c*t+v*p;a[7]=b*t+k*p;a[8]=l*t-h*p;a[9]=r*t-d*p;a[10]=v*t-c*p;a[11]=k*t-b*p;return a}},{}],63:[function(L,H,ia){H.exports=function(a,e,t){var p=Math.sin(t);
t=Math.cos(t);var h=e[0],d=e[1],c=e[2],b=e[3],l=e[8],r=e[9],v=e[10],k=e[11];e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=h*t-l*p;a[1]=d*t-r*p;a[2]=c*t-v*p;a[3]=b*t-k*p;a[8]=h*p+l*t;a[9]=d*p+r*t;a[10]=c*p+v*t;a[11]=b*p+k*t;return a}},{}],64:[function(L,H,ia){H.exports=function(a,e,t){var p=Math.sin(t);t=Math.cos(t);var h=e[0],d=e[1],c=e[2],b=e[3],l=e[4],r=e[5],v=e[6],k=e[7];e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=
e[13],a[14]=e[14],a[15]=e[15]);a[0]=h*t+l*p;a[1]=d*t+r*p;a[2]=c*t+v*p;a[3]=b*t+k*p;a[4]=l*t-h*p;a[5]=r*t-d*p;a[6]=v*t-c*p;a[7]=k*t-b*p;return a}},{}],65:[function(L,H,ia){H.exports=function(a,e,t){var p=t[0],h=t[1];t=t[2];a[0]=e[0]*p;a[1]=e[1]*p;a[2]=e[2]*p;a[3]=e[3]*p;a[4]=e[4]*h;a[5]=e[5]*h;a[6]=e[6]*h;a[7]=e[7]*h;a[8]=e[8]*t;a[9]=e[9]*t;a[10]=e[10]*t;a[11]=e[11]*t;a[12]=e[12];a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}},{}],66:[function(L,H,ia){H.exports=function(a){return"mat4("+a[0]+", "+a[1]+
", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],67:[function(L,H,ia){H.exports=function(a,e,t){var p=t[0],h=t[1];t=t[2];var d,c,b,l,r,v,k,F,H,n,L,q;e===a?(a[12]=e[0]*p+e[4]*h+e[8]*t+e[12],a[13]=e[1]*p+e[5]*h+e[9]*t+e[13],a[14]=e[2]*p+e[6]*h+e[10]*t+e[14],a[15]=e[3]*p+e[7]*h+e[11]*t+e[15]):(d=e[0],c=e[1],b=e[2],l=e[3],r=e[4],v=e[5],k=e[6],F=e[7],H=e[8],n=e[9],L=e[10],q=e[11],a[0]=d,a[1]=c,a[2]=
b,a[3]=l,a[4]=r,a[5]=v,a[6]=k,a[7]=F,a[8]=H,a[9]=n,a[10]=L,a[11]=q,a[12]=d*p+r*h+H*t+e[12],a[13]=c*p+v*h+n*t+e[13],a[14]=b*p+k*h+L*t+e[14],a[15]=l*p+F*h+q*t+e[15]);return a}},{}],68:[function(L,H,ia){H.exports=function(a,e){if(a===e){var t=e[1],p=e[2],h=e[3],d=e[6],c=e[7],b=e[11];a[1]=e[4];a[2]=e[8];a[3]=e[12];a[4]=t;a[6]=e[9];a[7]=e[13];a[8]=p;a[9]=d;a[11]=e[14];a[12]=h;a[13]=c;a[14]=b}else a[0]=e[0],a[1]=e[4],a[2]=e[8],a[3]=e[12],a[4]=e[1],a[5]=e[5],a[6]=e[9],a[7]=e[13],a[8]=e[2],a[9]=e[6],a[10]=
e[10],a[11]=e[14],a[12]=e[3],a[13]=e[7],a[14]=e[11],a[15]=e[15];return a}},{}],69:[function(L,H,ia){ia=L("./lib/alea");var a=L("./lib/xor128"),e=L("./lib/xorwow"),t=L("./lib/xorshift7"),p=L("./lib/xor4096"),h=L("./lib/tychei");L=L("./seedrandom");L.alea=ia;L.xor128=a;L.xorwow=e;L.xorshift7=t;L.xor4096=p;L.tychei=h;H.exports=L},{"./lib/alea":70,"./lib/tychei":71,"./lib/xor128":72,"./lib/xor4096":73,"./lib/xorshift7":74,"./lib/xorwow":75,"./seedrandom":76}],70:[function(L,H,ia){(function(a,e,t){function p(a){var d=
this,e=c();d.next=function(){var a=2091639*d.s0+2.3283064365386963E-10*d.c;d.s0=d.s1;d.s1=d.s2;return d.s2=a-(d.c=a|0)};d.c=1;d.s0=e(" ");d.s1=e(" ");d.s2=e(" ");d.s0-=e(a);0>d.s0&&(d.s0+=1);d.s1-=e(a);0>d.s1&&(d.s1+=1);d.s2-=e(a);0>d.s2&&(d.s2+=1);e=null}function h(a,c){c.c=a.c;c.s0=a.s0;c.s1=a.s1;c.s2=a.s2;return c}function d(a,c){var d=new p(a),e=c&&c.state,k=d.next;k.int32=function(){return 4294967296*d.next()|0};k["double"]=function(){return k()+1.1102230246251565E-16*(2097152*k()|0)};k.quick=
k;e&&("object"==typeof e&&h(e,d),k.state=function(){return h(d,{})});return k}function c(){var a=4022871197;return function(c){c=c.toString();for(var d=0;d<c.length;d++){a+=c.charCodeAt(d);var e=.02519603282416938*a;a=e>>>0;e-=a;e*=a;a=e>>>0;e-=a;a+=4294967296*e}return 2.3283064365386963E-10*(a>>>0)}}e&&e.exports?e.exports=d:t&&t.amd?t(function(){return d}):this.alea=d})(this,"object"==typeof H&&H,"function"==typeof define&&define)},{}],71:[function(L,H,ia){(function(a,e,t){function p(a){var b=this,
d="";b.next=function(){var a=b.b,c=b.c,d=b.d,e=b.a,a=a<<25^a>>>7^c,c=c-d|0,d=d<<24^d>>>8^e,e=e-a|0;b.b=a=a<<20^a>>>12^c;b.c=c=c-d|0;b.d=d<<16^c>>>16^e;return b.a=e-a|0};b.a=0;b.b=0;b.c=-1640531527;b.d=1367130551;a===Math.floor(a)?(b.a=a/4294967296|0,b.b=a|0):d+=a;for(a=0;a<d.length+20;a++)b.b^=d.charCodeAt(a)|0,b.next()}function h(a,b){b.a=a.a;b.b=a.b;b.c=a.c;b.d=a.d;return b}function d(a,b){var d=new p(a),e=b&&b.state,v=function(){return(d.next()>>>0)/4294967296};v["double"]=function(){do var a=
d.next()>>>11,b=(d.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};v.int32=d.next;v.quick=v;e&&("object"==typeof e&&h(e,d),v.state=function(){return h(d,{})});return v}e&&e.exports?e.exports=d:t&&t.amd?t(function(){return d}):this.tychei=d})(this,"object"==typeof H&&H,"function"==typeof define&&define)},{}],72:[function(L,H,ia){(function(a,e,t){function p(a){var b=this,d="";b.x=0;b.y=0;b.z=0;b.w=0;b.next=function(){var a=b.x^b.x<<11;b.x=b.y;b.y=b.z;b.z=b.w;return b.w=b.w^b.w>>>19^a^
a>>>8};a===(a|0)?b.x=a:d+=a;for(a=0;a<d.length+64;a++)b.x^=d.charCodeAt(a)|0,b.next()}function h(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.w=a.w;return b}function d(a,b){var d=new p(a),e=b&&b.state,v=function(){return(d.next()>>>0)/4294967296};v["double"]=function(){do var a=d.next()>>>11,b=(d.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};v.int32=d.next;v.quick=v;e&&("object"==typeof e&&h(e,d),v.state=function(){return h(d,{})});return v}e&&e.exports?e.exports=d:t&&t.amd?t(function(){return d}):
this.xor128=d})(this,"object"==typeof H&&H,"function"==typeof define&&define)},{}],73:[function(L,H,ia){(function(a,e,t){function p(a){var b=this;b.next=function(){var a=b.w,c=b.X,d=b.i,e,h;b.w=a=a+1640531527|0;h=c[d+34&127];e=c[d=d+1&127];h^=h<<13;e^=e<<17;h=c[d]=h^h>>>15^e^e>>>12;b.i=d;return h+(a^a>>>16)|0};(function(a,b){var c,d,e,h,n,p=[],q=128;b===(b|0)?(d=b,b=null):(b+="\x00",d=0,q=Math.max(q,b.length));e=0;for(h=-32;h<q;++h)b&&(d^=b.charCodeAt((h+32)%b.length)),0===h&&(n=d),d^=d<<10,d^=d>>>
15,d^=d<<4,d^=d>>>13,0<=h&&(n=n+1640531527|0,c=p[h&127]^=d+n,e=0==c?e+1:0);128<=e&&(p[(b&&b.length||0)&127]=-1);e=127;for(h=512;0<h;--h)d=p[e+34&127],c=p[e=e+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,p[e]=d^c;a.w=n;a.X=p;a.i=e})(b,a)}function h(a,b){b.i=a.i;b.w=a.w;b.X=a.X.slice();return b}function d(a,b){null==a&&(a=+new Date);var d=new p(a),e=b&&b.state,v=function(){return(d.next()>>>0)/4294967296};v["double"]=function(){do var a=d.next()>>>11,b=(d.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===
a);return a};v.int32=d.next;v.quick=v;e&&(e.X&&h(e,d),v.state=function(){return h(d,{})});return v}e&&e.exports?e.exports=d:t&&t.amd?t(function(){return d}):this.xor4096=d})(this,"object"==typeof H&&H,"function"==typeof define&&define)},{}],74:[function(L,H,ia){(function(a,e,t){function p(a){var b=this;b.next=function(){var a=b.x,c=b.i,d,e;d=a[c];d^=d>>>7;e=d^d<<24;d=a[c+1&7];e=e^d^d>>>10;d=a[c+3&7];e=e^d^d>>>3;d=a[c+4&7];e=e^d^d<<7;d=a[c+7&7];d^=d<<13;e=e^d^d<<9;a[c]=e;b.i=c+1&7;return e};(function(a,
b){var c,d=[];if(b===(b|0))d[0]=b;else for(b=""+b,c=0;c<b.length;++c)d[c&7]=d[c&7]<<15^b.charCodeAt(c)+d[c+1&7]<<13;for(;8>d.length;)d.push(0);for(c=0;8>c&&0===d[c];++c);8==c&&(d[7]=-1);a.x=d;a.i=0;for(c=256;0<c;--c)a.next()})(b,a)}function h(a,b){b.x=a.x.slice();b.i=a.i;return b}function d(a,b){null==a&&(a=+new Date);var d=new p(a),e=b&&b.state,t=function(){return(d.next()>>>0)/4294967296};t["double"]=function(){do var a=d.next()>>>11,b=(d.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};
t.int32=d.next;t.quick=t;e&&(e.x&&h(e,d),t.state=function(){return h(d,{})});return t}e&&e.exports?e.exports=d:t&&t.amd?t(function(){return d}):this.xorshift7=d})(this,"object"==typeof H&&H,"function"==typeof define&&define)},{}],75:[function(L,H,ia){(function(a,e,t){function p(a){var b=this,d="";b.next=function(){var a=b.x^b.x>>>2;b.x=b.y;b.y=b.z;b.z=b.w;b.w=b.v;return(b.d=b.d+362437|0)+(b.v=b.v^b.v<<4^a^a<<1)|0};b.x=0;b.y=0;b.z=0;b.w=0;b.v=0;a===(a|0)?b.x=a:d+=a;for(a=0;a<d.length+64;a++)b.x^=d.charCodeAt(a)|
0,a==d.length&&(b.d=b.x<<10^b.x>>>4),b.next()}function h(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.w=a.w;b.v=a.v;b.d=a.d;return b}function d(a,b){var d=new p(a),e=b&&b.state,t=function(){return(d.next()>>>0)/4294967296};t["double"]=function(){do var a=d.next()>>>11,b=(d.next()>>>0)/4294967296,a=(a+b)/2097152;while(0===a);return a};t.int32=d.next;t.quick=t;e&&("object"==typeof e&&h(e,d),t.state=function(){return h(d,{})});return t}e&&e.exports?e.exports=d:t&&t.amd?t(function(){return d}):this.xorwow=d})(this,
"object"==typeof H&&H,"function"==typeof define&&define)},{}],76:[function(L,H,ia){(function(a,e){function t(n,r,q){var t=[];r=1==r?{entropy:!0}:r||{};n=c(d(r.entropy?[n,l(a)]:null==n?b():n,3),t);var C=new p(t),t=function(){for(var a=C.g(6),b=v,c=0;a<k;)a=256*(a+c),b*=256,c=C.g(1);for(;a>=F;)a/=2,b/=2,c>>>=1;return(a+c)/b};t.int32=function(){return C.g(4)|0};t.quick=function(){return C.g(4)/4294967296};t["double"]=t;c(l(C.S),a);return(r.pass||q||function(a,b,c,d){d&&(d.S&&h(d,C),a.state=function(){return h(C,
{})});return c?(e.random=a,b):a})(t,n,"global"in r?r.global:this==e,r.state)}function p(a){var b,c=a.length,d=this,e=0,h=d.i=d.j=0,k=d.S=[];for(c||(a=[c++]);256>e;)k[e]=e++;for(e=0;256>e;e++)k[e]=k[h=255&h+a[e%c]+(b=k[e])],k[h]=b;(d.g=function(a){for(var b,c=0,e=d.i,h=d.j,k=d.S;a--;)b=k[e=255&e+1],c=256*c+k[255&(k[e]=k[h=255&h+b])+(k[h]=b)];d.i=e;d.j=h;return c})(256)}function h(a,b){b.i=a.i;b.j=a.j;b.S=a.S.slice();return b}function d(a,b){var c=[],e=typeof a,h;if(b&&"object"==e)for(h in a)try{c.push(d(a[h],
b-1))}catch(k){}return c.length?c:"string"==e?a:a+"\x00"}function c(a,b){for(var c=a+"",d,e=0;e<c.length;)b[255&e]=255&(d^=19*b[255&e])+c.charCodeAt(e++);return l(b)}function b(){try{var b;I&&(b=I.randomBytes)?b=b(256):(b=new Uint8Array(256),(r.crypto||r.msCrypto).getRandomValues(b));return l(b)}catch(c){return b=r.navigator,[+new Date,r,b&&b.plugins,r.screen,l(a)]}}function l(a){return String.fromCharCode.apply(0,a)}var r=(0,eval)("this"),v=e.pow(256,6),k=e.pow(2,52),F=2*k,I;e.seedrandom=t;c(e.random(),
a);if("object"==typeof H&&H.exports){H.exports=t;try{I=L("crypto")}catch(n){}}else"function"==typeof define&&define.amd&&define(function(){return t})})([],Math)},{crypto:38}],77:[function(L,H,ia){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var e=L("./lib/util/check"),t=L("./lib/util/extend"),p=L("./lib/dynamic"),h=L("./lib/util/raf"),d=L("./lib/util/clock"),c=L("./lib/strings"),b=L("./lib/webgl"),l=L("./lib/extension"),r=L("./lib/limits"),v=L("./lib/buffer"),k=L("./lib/elements"),
F=L("./lib/texture"),I=L("./lib/renderbuffer"),n=L("./lib/framebuffer"),aa=L("./lib/attribute"),q=L("./lib/shader"),J=L("./lib/read"),C=L("./lib/core"),M=L("./lib/stats"),Aa=L("./lib/timer");H.exports=function(f){function w(){if(0===Ca.length)T&&T.update(),Pa=null;else{Pa=h.next(w);m();for(var a=Ca.length-1;0<=a;--a){var b=Ca[a];b&&b(O,null,0)}la.flush();T&&T.update()}}function H(){!Pa&&0<Ca.length&&(Pa=h.next(w))}function E(){Pa&&(h.cancel(w),Pa=null)}function L(a){a.preventDefault();ga=!0;E();ja.forEach(function(a){a()})}
function D(a){la.getError();ga=!1;Ea.restore();ea.restore();oa.restore();U.restore();ma.restore();qa.restore();K.restore();T&&T.restore();Ba.procs.refresh();H();na.forEach(function(a){a()})}function y(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(p.isDynamic(f))e[b]=p.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(p.isDynamic(f[g])){e[b]=p.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;q.length<a;)q.push(null);
return q}e(!!a,"invalid args to regl({...})");e.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),f=b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=t({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");
b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var h={gpuTime:0,cpuTime:0,count:0},k=Ba.compile(a,g,f,d,h),l=k.draw,m=k.batch,n=k.scope,q=[];return t(function(a,b){var d;ga&&e.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,a)},{stats:h,destroy:function(){k.destroy()}})}function ia(a,b){var c=0;Ba.procs.poll();var d=b.color;d&&(la.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(la.clearDepth(+b.depth),c|=256);"stencil"in b&&(la.clearStencil(b.stencil|0),c|=1024);e(!!c,"called regl.clear with no buffer specified");la.clear(c)}function G(b){e.type(b,"function","regl.frame() callback must be a function");
Ca.push(b);H();return{cancel:function(){function c(){var b=a(Ca,c);Ca[b]=Ca[Ca.length-1];--Ca.length;0>=Ca.length&&E()}var d=a(Ca,b);e(0<=d,"cannot cancel a frame twice");Ca[d]=c}}}function B(){var a=ya.viewport,b=ya.scissor_box;a[0]=a[1]=b[0]=b[1]=0;O.viewportWidth=O.framebufferWidth=O.drawingBufferWidth=a[2]=b[2]=la.drawingBufferWidth;O.viewportHeight=O.framebufferHeight=O.drawingBufferHeight=a[3]=b[3]=la.drawingBufferHeight}function m(){O.tick+=1;O.time=g();B();Ba.procs.poll()}function Z(){U.refresh();
B();Ba.procs.refresh();T&&T.update()}function g(){return(d()-N)/1E3}console.log("REGL args are:",f);f=b(f);console.log("REGL configs are:",f);if(!f)return null;var la=f.gl,Q=la.getContextAttributes(),ga=la.isContextLost(),Ea=l(la,f);if(!Ea)return null;var V=c(),X=M(),S=Ea.extensions,T=Aa(la,S),N=d(),x=la.drawingBufferWidth,P=la.drawingBufferHeight,O={tick:0,time:0,viewportWidth:x,viewportHeight:P,framebufferWidth:x,framebufferHeight:P,drawingBufferWidth:x,drawingBufferHeight:P,pixelRatio:f.pixelRatio},
x={elements:null,primitive:4,count:-1,offset:0,instances:-1},pa=r(la,S),oa=v(la,X,f,function(a){return K.destroyBuffer(a)}),z=k(la,S,oa,X),K=aa(la,S,pa,X,oa,z,x),ea=q(la,V,X,f),U=F(la,S,pa,function(){Ba.procs.poll()},O,X,f),ma=I(la,S,pa,X,f),qa=n(la,S,pa,U,ma,X),Ba=C(la,V,S,pa,oa,z,U,qa,{},K,ea,x,O,T,f),V=J(la,qa,Ba.procs.poll,O,Q,S,pa),ya=Ba.next,da=la.canvas,Ca=[],ja=[],na=[],za=[f.onDestroy],Pa=null;da&&(da.addEventListener("webglcontextlost",L,!1),da.addEventListener("webglcontextrestored",D,
!1));var sa=qa.setFBO=y({framebuffer:p.define.call(null,1,"framebuffer")});Z();Q=t(y,{clear:function(a){e("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)sa(t({framebuffer:a.framebuffer.faces[b]},a),ia);else sa(a,ia);else ia(null,a)},prop:p.define.bind(null,1),context:p.define.bind(null,2),"this":p.define.bind(null,3),draw:y({}),buffer:function(a){return oa.create(a,34962,!1,!1)},
elements:function(a){return z.create(a,!1)},texture:U.create2D,cube:U.createCube,renderbuffer:ma.create,framebuffer:qa.create,framebufferCube:qa.createCube,vao:K.createVAO,attributes:Q,frame:G,on:function(a,b){e.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return G(b);case "lost":c=ja;break;case "restore":c=na;break;case "destroy":c=za;break;default:e.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:pa,hasExtension:function(a){return 0<=pa.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){Ca.length=0;E();da&&(da.removeEventListener("webglcontextlost",L),da.removeEventListener("webglcontextrestored",D));ea.clear();qa.clear();ma.clear();K.clear();U.clear();z.clear();oa.clear();T&&T.clear();za.forEach(function(a){a()})},_gl:la,_refresh:Z,poll:function(){m();T&&T.update()},now:g,stats:X});f.onDone(null,Q);return Q}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
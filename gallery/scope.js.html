<!DOCTYPE html>
      <html>
        <head>
          <title>example/scope.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function Z(ha,ab,b){function da(e,l){if(!ab[e]){if(!ha[e]){var q="function"==typeof require&&require;if(!l&&q)return q(e,!0);if(K)return K(e,!0);q=Error("Cannot find module '"+e+"'");throw q.code="MODULE_NOT_FOUND",q;}q=ab[e]={exports:{}};ha[e][0].call(q.exports,function(c){return da(ha[e][1][c]||c)},q,q.exports,Z,ha,ab,b)}return ab[e].exports}for(var K="function"==typeof require&&require,L=0;L<b.length;L++)da(b[L]);return da}return Z})()({1:[function(Z,ha,ab){var b=Z("../regl")();b.clear({color:[0,
0,0,1],depth:1});b({frag:"\n    precision mediump float;\n    uniform vec4 color;\n    void main() {\n      gl_FragColor = color;\n    }",vert:"\n    precision mediump float;\n    attribute vec2 position;\n    uniform vec2 offset;\n    void main() {\n      gl_Position = vec4(position + offset, 0, 1);\n    }",attributes:{position:[.5,0,0,.5,1,1]},count:3})(function(){b({uniforms:{color:[1,0,0,1],offset:[0,0]}})();b({uniforms:{color:[0,0,1,1],offset:[-1,0]}})();b({uniforms:{color:[0,1,0,1],offset:[0,
-1]}})();b({uniforms:{color:[1,1,1,1],offset:[-1,-1]}})()})},{"../regl":38}],2:[function(Z,ha,ab){function b(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var da=Z("./util/sorted-object-keys"),K=Z("./util/check"),L=Z("./util/values"),e=Z("./constants/dtypes.json"),l=Z("./util/is-typed-array"),q=Z("./util/is-ndarray"),c=Z("./constants/primitives.json"),F="attributes elements offset count primitive instances".split(" ");
ha.exports=function(B,G,U,n,u,x,ba){function v(f){if(f!==X.currentVAO){var w=G.oes_vertex_array_object;f?w.bindVertexArrayOES(f.vao):w.bindVertexArrayOES(null);X.currentVAO=f}}function T(f){if(f!==X.currentVAO){if(f)f.bindAttrs();else{for(var w=G.angle_instanced_arrays,h=0;h<t.length;++h){var c=t[h];c.buffer?(B.enableVertexAttribArray(h),c.buffer.bind(),B.vertexAttribPointer(h,c.size,c.type,c.normalized,c.stride,c.offfset),w&&c.divisor&&w.vertexAttribDivisorANGLE(h,c.divisor)):(B.disableVertexAttribArray(h),
B.vertexAttrib4f(h,c.x,c.y,c.z,c.w))}ba.elements?B.bindBuffer(34963,ba.elements.buffer.buffer):B.bindBuffer(34963,null)}X.currentVAO=f}}function z(){L(k).forEach(function(f){f.destroy()})}function R(){this.id=++S;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var f=G.oes_vertex_array_object;this.vao=f?f.createVertexArrayOES():null;k[this.id]=this;this.buffers=[]}function ia(){G.oes_vertex_array_object&&L(k).forEach(function(f){f.refresh()})}
var h=U.maxAttributes,t=Array(h);for(U=0;U<h;++U)t[U]=new b;var S=0,k={},X={Record:b,scope:{},state:t,currentVAO:null,targetVAO:null,restore:G.oes_vertex_array_object?ia:function(){},createVAO:function(f){function w(f){var t;if(Array.isArray(f))t=f,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{K("object"===typeof f,"invalid arguments for create vao");K("attributes"in f,"must specify attributes for vao");if(f.elements){var d=
f.elements;k.ownsElements?("function"===typeof d&&"elements"===d._reglType?k.elements.destroy():k.elements(d),k.ownsElements=!1):x.getElements(f.elements)?(k.elements=f.elements,k.ownsElements=!1):(k.elements=x.create(f.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;t=f.attributes;k.offset=0;k.count=-1;k.instances=-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in f&&(k.offset=f.offset|0);"count"in f&&(k.count=
f.count|0);"instances"in f&&(k.instances=f.instances|0);"primitive"in f&&(K(f.primitive in c,"bad primitive type: "+f.primitive),k.primitive=c[f.primitive]);K.optional(function(){for(var a=da(f),d=0;d<a.length;++d)K(0<=F.indexOf(a[d]),'invalid option for vao: "'+a[d]+'" valid options are '+F)});K(Array.isArray(t),"attributes must be an array")}K(t.length<h,"too many attributes");K(0<t.length,"must specify at least one attribute");var d={},I=k.attributes;I.length=t.length;for(var a=0;a<t.length;++a){var S=
t[a],A=I[a]=new b,z=S.data||S;if(Array.isArray(z)||l(z)||q(z)){var v;k.buffers[a]&&(v=k.buffers[a],l(z)&&v._buffer.byteLength>=z.byteLength?v.subdata(z):(v.destroy(),k.buffers[a]=null));k.buffers[a]||(v=k.buffers[a]=u.create(S,34962,!1,!0));A.buffer=u.getBuffer(v);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;d[a]=1}else u.getBuffer(S)?(A.buffer=u.getBuffer(S),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=
0,A.stride=0,A.divisor=0,A.state=1):u.getBuffer(S.buffer)?(A.buffer=u.getBuffer(S.buffer),A.size=(+S.size||A.buffer.dimension)|0,A.normalized=!!S.normalized||!1,"type"in S?(K.parameter(S.type,e,"invalid buffer type"),A.type=e[S.type]):A.type=A.buffer.dtype,A.offset=(S.offset||0)|0,A.stride=(S.stride||0)|0,A.divisor=(S.divisor||0)|0,A.state=1,K(1<=A.size&&4>=A.size,"size must be between 1 and 4"),K(0<=A.offset,"invalid offset"),K(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),K(0<=
A.divisor,"divisor must be positive"),K(!A.divisor||!!G.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in S?(K(0<a,"first attribute must not be a constant"),A.x=+S.x||0,A.y=+S.y||0,A.z=+S.z||0,A.w=+S.w||0,A.state=2):K(!1,"invalid attribute spec for location "+a)}for(v=0;v<k.buffers.length;++v)!d[v]&&k.buffers[v]&&(k.buffers[v].destroy(),k.buffers[v]=null);k.refresh();return w}var k=new R;n.vaoCount+=1;w.destroy=function(){for(var f=0;f<k.buffers.length;++f)k.buffers[f]&&
k.buffers[f].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1);k.destroy()};w._vao=k;w._reglType="vao";return w(f)},getVAO:function(f){return"function"===typeof f&&f._vao?f._vao:null},destroyBuffer:function(f){for(var w=0;w<t.length;++w){var c=t[w];c.buffer===f&&(B.disableVertexAttribArray(w),c.buffer=null)}},setVAO:G.oes_vertex_array_object?v:T,clear:G.oes_vertex_array_object?z:function(){}};R.prototype.bindAttrs=function(){for(var f=G.angle_instanced_arrays,
w=this.attributes,c=0;c<w.length;++c){var l=w[c];l.buffer?(B.enableVertexAttribArray(c),B.bindBuffer(34962,l.buffer.buffer),B.vertexAttribPointer(c,l.size,l.type,l.normalized,l.stride,l.offset),f&&l.divisor&&f.vertexAttribDivisorANGLE(c,l.divisor)):(B.disableVertexAttribArray(c),B.vertexAttrib4f(c,l.x,l.y,l.z,l.w))}for(f=w.length;f<h;++f)B.disableVertexAttribArray(f);(f=x.getElements(this.elements))?B.bindBuffer(34963,f.buffer.buffer):B.bindBuffer(34963,null)};R.prototype.refresh=function(){var f=
G.oes_vertex_array_object;f&&(f.bindVertexArrayOES(this.vao),this.bindAttrs(),X.currentVAO=null,f.bindVertexArrayOES(null))};R.prototype.destroy=function(){if(this.vao){var f=G.oes_vertex_array_object;this===X.currentVAO&&(X.currentVAO=null,f.bindVertexArrayOES(null));f.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);k[this.id]&&(delete k[this.id],--n.vaoCount)};return X}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(Z,ha,ab){function b(c){return U[Object.prototype.toString.call(c)]|0}function da(c,l){for(var q=0;q<l.length;++q)c[q]=l[q]}function K(c,l,q,e,b,u,h){for(var t=0,S=0;S<q;++S)for(var k=0;k<e;++k)c[t++]=l[b*S+u*k+h]}var L=Z("./util/sorted-object-keys"),e=Z("./util/check"),l=Z("./util/is-typed-array"),q=Z("./util/is-ndarray"),c=Z("./util/values"),F=Z("./util/pool");ab=Z("./util/flatten");
var B=ab.flatten,G=ab.shape,U=Z("./constants/arraytypes.json"),n=Z("./constants/dtypes.json"),u=Z("./constants/usage.json"),x=[];x[5120]=1;x[5122]=2;x[5124]=4;x[5121]=1;x[5123]=2;x[5125]=4;x[5126]=4;ha.exports=function(U,v,T,z){function R(f){this.id=S++;this.buffer=U.createBuffer();this.type=f;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;T.profile&&(this.stats={size:0})}function ia(f,c,h){f.byteLength=c.byteLength;U.bufferData(f.type,c,h)}function h(f,
c,h,k,t,d){f.usage=h;if(Array.isArray(c)){if(f.dtype=k||5126,0<c.length)if(Array.isArray(c[0])){t=G(c);for(var I=k=1;I<t.length;++I)k*=t[I];f.dimension=k;c=B(c,t,f.dtype);ia(f,c,h);d?f.persistentData=c:F.freeType(c)}else"number"===typeof c[0]?(f.dimension=t,t=F.allocType(f.dtype,c.length),da(t,c),ia(f,t,h),d?f.persistentData=t:F.freeType(t)):l(c[0])?(f.dimension=c[0].length,f.dtype=k||b(c[0])||5126,c=B(c,[c.length,c[0].length],f.dtype),ia(f,c,h),d?f.persistentData=c:F.freeType(c)):e.raise("invalid buffer data")}else if(l(c))f.dtype=
k||b(c),f.dimension=t,ia(f,c,h),d&&(f.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(q(c)){t=c.shape;var a=c.stride,I=c.offset,S=0,A=0,z=0,v=0;1===t.length?(S=t[0],A=1,z=a[0],v=0):2===t.length?(S=t[0],A=t[1],z=a[0],v=a[1]):e.raise("invalid shape");f.dtype=k||b(c.data)||5126;f.dimension=A;t=F.allocType(f.dtype,S*A);K(t,c.data,S,A,z,v,I);ia(f,t,h);d?f.persistentData=t:F.freeType(t)}else c instanceof ArrayBuffer?(f.dtype=5121,f.dimension=t,ia(f,c,h),d&&(f.persistentData=new Uint8Array(new Uint8Array(c)))):
e.raise("invalid buffer data")}function t(c){v.bufferCount--;z(c);var h=c.buffer;e(h,"buffer must not be deleted already");U.deleteBuffer(h);c.buffer=null;delete k[c.id]}var S=0,k={};R.prototype.bind=function(){U.bindBuffer(this.type,this.buffer)};R.prototype.destroy=function(){t(this)};var X=[];T.profile&&(v.getTotalBufferSize=function(){var c=0;L(k).forEach(function(h){c+=k[h].stats.size});return c});return{create:function(c,w,S,z){function E(a){var d=35044,c=null,f=0,k=0,w=1;Array.isArray(a)||
l(a)||q(a)||a instanceof ArrayBuffer?c=a:"number"===typeof a?f=a|0:a&&(e.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(e(null===c||Array.isArray(c)||l(c)||q(c),"invalid data for buffer"),c=a.data),"usage"in a&&(e.parameter(a.usage,u,"invalid buffer usage"),d=u[a.usage]),"type"in a&&(e.parameter(a.type,n,"invalid buffer type"),k=n[a.type]),"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),w=a.dimension|0),"length"in a&&(e.nni(f,"buffer length must be a nonnegative integer"),
f=a.length|0));I.bind();c?h(I,c,d,k,w,z):(f&&U.bufferData(I.type,f,d),I.dtype=k||5121,I.usage=d,I.dimension=w,I.byteLength=f);T.profile&&(I.stats.size=I.byteLength*x[I.dtype]);return E}function d(a,d){e(d+a.byteLength<=I.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+d+" to a buffer of size "+I.byteLength);U.bufferSubData(I.type,d,a)}v.bufferCount++;var I=new R(w);k[I.id]=I;S||E(c);E._reglType="buffer";E._buffer=I;E.subdata=
function(a,c){var f=(c||0)|0,h;I.bind();if(l(a)||a instanceof ArrayBuffer)d(a,f);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var k=F.allocType(I.dtype,a.length);da(k,a);d(k,f);F.freeType(k)}else Array.isArray(a[0])||l(a[0])?(h=G(a),k=B(a,h,I.dtype),d(k,f),F.freeType(k)):e.raise("invalid buffer data")}else if(q(a)){h=a.shape;var w=a.stride,t=k=0,O=0,P=0;1===h.length?(k=h[0],t=1,O=w[0],P=0):2===h.length?(k=h[0],t=h[1],O=w[0],P=w[1]):e.raise("invalid shape");h=Array.isArray(a.data)?
I.dtype:b(a.data);h=F.allocType(h,k*t);K(h,a.data,k,t,O,P,a.offset);d(h,f);F.freeType(h)}else e.raise("invalid data for buffer subdata");return E};T.profile&&(E.stats=I.stats);E.destroy=function(){t(I)};return E},createStream:function(c,l){var k=X.pop();k||(k=new R(c));k.bind();h(k,l,35040,0,1,!1);return k},destroyStream:function(c){X.push(c)},clear:function(){c(k).forEach(t);X.forEach(t)},getBuffer:function(c){return c&&c._buffer instanceof R?c._buffer:null},restore:function(){c(k).forEach(function(c){c.buffer=
U.createBuffer();U.bindBuffer(c.type,c.buffer);U.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:h}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(Z,ha,ab){ha.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,
"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(Z,ha,ab){ha.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(Z,ha,ab){ha.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(Z,ha,ab){ha.exports=
{"static":35044,dynamic:35048,stream:35040}},{}],8:[function(Z,ha,ab){function b(c){return Array.isArray(c)||U(c)||n(c)}function da(c){return c.sort(function(c,h){return"viewport"===c?-1:"viewport"===h?1:c<h?-1:1})}function K(c,h,l,k){this.thisDep=c;this.contextDep=h;this.propDep=l;this.append=k}function L(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function e(c){return new K(!1,!1,!1,c)}function l(c,h){var l=c.type;if(0===l)return l=c.data.length,new K(!0,1<=l,2<=l,h);if(4===l)return l=c.data,
new K(l.thisDep,l.contextDep,l.propDep,h);if(5===l)return new K(!1,!1,!1,h);if(6===l){for(var k=l=!1,q=!1,d=0;d<c.data.length;++d){var I=c.data[d];1===I.type?q=!0:2===I.type?k=!0:3===I.type?l=!0:0===I.type?(l=!0,I=I.data,1<=I&&(k=!0),2<=I&&(q=!0)):4===I.type&&(l=l||I.data.thisDep,k=k||I.data.contextDep,q=q||I.data.propDep)}return new K(l,k,q,h)}return new K(3===l,2===l,1===l,h)}var q=Z("./util/sorted-object-keys"),c=Z("./util/check"),F=Z("./util/extend"),B=Z("./util/codegen"),G=Z("./util/loop"),U=
Z("./util/is-typed-array"),n=Z("./util/is-ndarray"),u=Z("./util/is-array-like"),x=Z("./dynamic"),ba=Z("./constants/primitives.json"),v=Z("./constants/dtypes.json"),T=["x","y","z","w"],z="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),R={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,
"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ia="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),h={never:512,less:513,
"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},t={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},S={frag:35632,vert:35633},k={cw:2304,ccw:2305},X=new K(!1,!1,!1,function(){});ha.exports=function(f,w,n,D,E,d,I,a,U,A,ja,Cc,V,ea,O){function P(a){return a.replace(".","_")}function C(a,d,c){var g=P(a);ua.push(a);W[g]=la[g]=!!c;
Ia[g]=d}function g(a,d,c){var g=P(a);ua.push(a);Array.isArray(c)?(la[g]=c.slice(),W[g]=c.slice()):la[g]=W[g]=c;za[g]=d}function N(){var a=B(),d=a.link,g=a.global;a.id=xd++;a.batchId="0";var m=d(mb),r=a.shared={props:"a0"};q(mb).forEach(function(a){r[a]=g.def(m,".",a)});c.optional(function(){a.CHECK=d(c);a.commandStr=c.guessCommand();a.command=d(a.commandStr);a.assert=function(a,c,g){a("if(!(",c,"))",this.CHECK,".commandRaise(",d(g),",",this.command,");")};ca.invalidBlendCombinations=ia});var h=a.next=
{},p=a.current={};q(za).forEach(function(a){Array.isArray(la[a])&&(h[a]=g.def(r.next,".",a),p[a]=g.def(r.current,".",a))});var l=a.constants={};q(ca).forEach(function(a){l[a]=g.def(JSON.stringify(ca[a]))});a.invoke=function(c,g){switch(g.type){case 0:var m=["this",r.context,r.props,a.batchId];return c.def(d(g.data),".call(",m.slice(0,Math.max(g.data.length+1,4)),")");case 1:return c.def(r.props,g.data);case 2:return c.def(r.context,g.data);case 3:return c.def("this",g.data);case 4:return g.data.append(a,
c),g.data.ref;case 5:return g.data.toString();case 6:return g.data.map(function(d){return a.invoke(c,d)})}};a.attribCache={};var k={};a.scopeAttrib=function(a){a=w.id(a);if(a in k)return k[a];var c=A.scope[a];c||(c=A.scope[a]=new sa);return k[a]=d(c)};return a}function M(a){var d=a["static"];a=a.dynamic;var c;if("profile"in d){var g=!!d.profile;c=e(function(a,d){return g});c.enable=g}else if("profile"in a){var r=a.profile;c=l(r,function(a,d){return a.invoke(d,r)})}return c}function Da(d,g){var r=
d["static"],m=d.dynamic;if("framebuffer"in r){var h=r.framebuffer;return h?(h=a.getFramebuffer(h),c.command(h,"invalid framebuffer object"),e(function(a,d){var c=a.link(h),g=a.shared;d.set(g.framebuffer,".next",c);g=g.context;d.set(g,".framebufferWidth",c+".width");d.set(g,".framebufferHeight",c+".height");return c})):e(function(a,d){var c=a.shared;d.set(c.framebuffer,".next","null");c=c.context;d.set(c,".framebufferWidth",c+".drawingBufferWidth");d.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in m){var p=m.framebuffer;return l(p,function(a,d){var g=a.invoke(d,p),r=a.shared,m=r.framebuffer,h=d.def(m,".getFramebuffer(",g,")");c.optional(function(){a.assert(d,"!"+g+"||"+h,"invalid framebuffer object")});d.set(m,".next",h);r=r.context;d.set(r,".framebufferWidth",h+"?"+h+".width:"+r+".drawingBufferWidth");d.set(r,".framebufferHeight",h+"?"+h+".height:"+r+".drawingBufferHeight");return h})}return null}function pa(a,d,g){function r(a){if(a in h){var p=h[a];c.commandType(p,
"object","invalid "+a,g.commandStr);var k=!0,f=p.x|0,H=p.y|0,y,w;"width"in p?(y=p.width|0,c.command(0<=y,"invalid "+a,g.commandStr)):k=!1;"height"in p?(w=p.height|0,c.command(0<=w,"invalid "+a,g.commandStr)):k=!1;return new K(!k&&d&&d.thisDep,!k&&d&&d.contextDep,!k&&d&&d.propDep,function(a,d){var c=a.shared.context,g=y;"width"in p||(g=d.def(c,".","framebufferWidth","-",f));var r=w;"height"in p||(r=d.def(c,".","framebufferHeight","-",H));return[f,H,g,r]})}if(a in m){var na=m[a],k=l(na,function(d,g){var r=
d.invoke(g,na);c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});var h=d.shared.context,m=g.def(r,".x|0"),p=g.def(r,".y|0"),l=g.def('"width" in ',r,"?",r,".width|0:","(",h,".","framebufferWidth","-",m,")"),k=g.def('"height" in ',r,"?",r,".height|0:","(",h,".","framebufferHeight","-",p,")");c.optional(function(){d.assert(g,l+">=0&&"+k+">=0","invalid "+a)});return[m,p,l,k]});d&&(k.thisDep=k.thisDep||d.thisDep,k.contextDep=k.contextDep||d.contextDep,k.propDep=k.propDep||
d.propDep);return k}return d?new K(d.thisDep,d.contextDep,d.propDep,function(a,d){var c=a.shared.context;return[0,0,d.def(c,".","framebufferWidth"),d.def(c,".","framebufferHeight")]}):null}var h=a["static"],m=a.dynamic;if(a=r("viewport")){var p=a;a=new K(a.thisDep,a.contextDep,a.propDep,function(a,d){var c=p.append(a,d),g=a.shared.context;d.set(g,".viewportWidth",c[2]);d.set(g,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:r("scissor.box")}}function m(a,d){var g=a["static"];if("string"===
typeof g.frag&&"string"===typeof g.vert){if(0<q(d.dynamic).length)return null;var g=d["static"],r=q(g);if(0<r.length&&"number"===typeof g[r[0]]){for(var h=[],m=0;m<r.length;++m)c("number"===typeof g[r[m]],"must specify all vertex attribute locations when using vaos"),h.push([g[r[m]]|0,r[m]]);return h}}return null}function J(a,d,g){function r(a){if(a in h){var d=w.id(h[a]);c.optional(function(){ja.shader(S[a],d,c.guessCommand())});var g=e(function(){return d});g.id=d;return g}if(a in m){var p=m[a];
return l(p,function(d,g){var r=d.invoke(g,p),h=g.def(d.shared.strings,".id(",r,")");c.optional(function(){g(d.shared.shader,".shader(",S[a],",",h,",",d.command,");")});return h})}return null}var h=a["static"],m=a.dynamic,p=r("frag"),k=r("vert"),f=null;L(p)&&L(k)?(f=ja.program(k.id,p.id,null,g),a=e(function(a,d){return a.link(f)})):a=new K(p&&p.thisDep||k&&k.thisDep,p&&p.contextDep||k&&k.contextDep,p&&p.propDep||k&&k.propDep,function(a,d){var g=a.shared.shader,r;r=p?p.append(a,d):d.def(g,".","frag");
var h;h=k?k.append(a,d):d.def(g,".","vert");var m=g+".program("+h+","+r;c.optional(function(){m+=","+a.command});return d.def(m+")")});return{frag:p,vert:k,progVar:a,program:f}}function aa(a,g){function r(a,d){if(a in h){var y=h[a]|0;d?p.offset=y:p.instances=y;c.command(!d||0<=y,"invalid "+a,g.commandStr);return e(function(a,c){d&&(a.OFFSET=y);return y})}if(a in m){var w=m[a];return l(w,function(g,r){var h=g.invoke(r,w);d&&(g.OFFSET=h,c.optional(function(){g.assert(r,h+">=0","invalid "+a)}));return h})}if(d){if(H)return e(function(a,
d){return a.OFFSET=0});if(k)return new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(k)return new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var h=a["static"],m=a.dynamic,p={},k=!1,f=function(){if("vao"in h){var a=h.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));k=!0;p.vao=a;return e(function(d){var c=
A.getVAO(a);return c?d.link(c):"null"})}if("vao"in m){k=!0;var d=m.vao;return l(d,function(a,c){var g=a.invoke(c,d);return c.def(a.shared.vao+".getVAO("+g+")")})}return null}(),H=!1,y=function(){if("elements"in h){var a=h.elements;p.elements=a;if(b(a)){var r=p.elements=d.create(a,!0),a=d.getElements(r);H=!0}else a&&(a=d.getElements(a),H=!0,c.command(a,"invalid elements",g.commandStr));r=e(function(d,c){if(a){var g=d.link(a);return d.ELEMENTS=g}return d.ELEMENTS=null});r.value=a;return r}if("elements"in
m){H=!0;var y=m.elements;return l(y,function(a,d){var g=a.shared,r=g.isBufferArgs,g=g.elements,h=a.invoke(d,y),m=d.def("null"),r=d.def(r,"(",h,")"),p=a.cond(r).then(m,"=",g,".createStream(",h,");")["else"](m,"=",g,".getElements(",h,");");c.optional(function(){a.assert(p["else"],"!"+h+"||"+m,"invalid elements")});d.entry(p);d.exit(a.cond(r).then(g,".destroyStream(",m,");"));return a.ELEMENTS=m})}return k?new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),w=r("offset",!0),na=function(){if("primitive"in h){var a=h.primitive;p.primitive=a;c.commandParameter(a,ba,"invalid primitve",g.commandStr);return e(function(d,c){return ba[a]})}if("primitive"in m){var d=m.primitive;return l(d,function(a,g){var r=a.constants.primTypes,h=a.invoke(g,d);c.optional(function(){a.assert(g,h+" in "+r,"invalid primitive, must be one of "+q(ba))});return g.def(r,"[",h,"]")})}return H?L(y)?
y.value?e(function(a,d){return d.def(a.ELEMENTS,".primType")}):e(function(){return 4}):new K(y.thisDep,y.contextDep,y.propDep,function(a,d){var c=a.ELEMENTS;return d.def(c,"?",c,".primType:",4)}):k?new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),I=function(){if("count"in h){var a=h.count|0;p.count=a;c.command("number"===typeof a&&0<=a,"invalid vertex count",g.commandStr);return e(function(){return a})}if("count"in
m){var d=m.count;return l(d,function(a,g){var r=a.invoke(g,d);c.optional(function(){a.assert(g,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")});return r})}if(H){if(L(y)){if(y)return w?new K(w.thisDep,w.contextDep,w.propDep,function(a,d){var g=d.def(a.ELEMENTS,".vertCount-",a.OFFSET);c.optional(function(){a.assert(d,g+">=0","invalid vertex offset/element buffer too small")});return g}):e(function(a,d){return d.def(a.ELEMENTS,".vertCount")});var r=e(function(){return-1});
c.optional(function(){r.MISSING=!0});return r}var na=new K(y.thisDep||w.thisDep,y.contextDep||w.contextDep,y.propDep||w.propDep,function(a,d){var c=a.ELEMENTS;return a.OFFSET?d.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):d.def(c,"?",c,".vertCount:-1")});c.optional(function(){na.DYNAMIC=!0});return na}return k?new K(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),t=r("instances",!1);return{elements:y,primitive:na,
count:I,instances:t,offset:w,vao:f,vaoActive:k,elementsActive:H,"static":p}}function Q(a,d){var g=a["static"],r=a.dynamic,m={};ua.forEach(function(a){function p(d,c){if(a in g){var h=d(g[a]);m[f]=e(function(){return h})}else if(a in r){var k=r[a];m[f]=l(k,function(a,d){return c(a,d,a.invoke(d,k))})}}var f=P(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return p(function(g){c.commandType(g,
"boolean",a,d.commandStr);return g},function(d,g,r){c.optional(function(){d.assert(g,"typeof "+r+'==="boolean"',"invalid flag "+a,d.commandStr)});return r});case "depth.func":return p(function(g){c.commandParameter(g,h,"invalid "+a,d.commandStr);return h[g]},function(d,g,r){var p=d.constants.compareFuncs;c.optional(function(){d.assert(g,r+" in "+p,"invalid "+a+", must be one of "+q(h))});return g.def(p,"[",r,"]")});case "depth.range":return p(function(a){c.command(u(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",d.commandStr);return a},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===2&&typeof "+g+'[0]==="number"&&typeof '+g+'[1]==="number"&&'+g+"[0]<="+g+"[1]","depth range must be a 2d array")});var r=d.def("+",g,"[0]"),p=d.def("+",g,"[1]");return[r,p]});case "blend.func":return p(function(a){c.commandType(a,"object","blend.func",d.commandStr);var g="srcRGB"in a?a.srcRGB:a.src,r="srcAlpha"in a?a.srcAlpha:
a.src,p="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;c.commandParameter(g,R,f+".srcRGB",d.commandStr);c.commandParameter(r,R,f+".srcAlpha",d.commandStr);c.commandParameter(p,R,f+".dstRGB",d.commandStr);c.commandParameter(a,R,f+".dstAlpha",d.commandStr);c.command(-1===ia.indexOf(g+", "+p),"unallowed blending combination (srcRGB, dstRGB) = ("+g+", "+p+")",d.commandStr);return[R[g],R[p],R[r],R[a]]},function(d,g,r){function p(m,k){var f=g.def('"',m,k,'" in ',r,"?",r,".",m,k,":",r,".",
m);c.optional(function(){d.assert(g,f+" in "+h,"invalid "+a+"."+m+k+", must be one of "+q(R))});return f}var h=d.constants.blendFuncs;c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var m=p("src","RGB"),k=p("dst","RGB");c.optional(function(){d.assert(g,d.constants.invalidBlendCombinations+".indexOf("+m+'+", "+'+k+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=g.def(h,"[",m,"]"),l=g.def(h,"[",p("src","Alpha"),"]"),
H=g.def(h,"[",k,"]"),y=g.def(h,"[",p("dst","Alpha"),"]");return[f,H,l,y]});case "blend.equation":return p(function(g){if("string"===typeof g)return c.commandParameter(g,Ca,"invalid "+a,d.commandStr),[Ca[g],Ca[g]];if("object"===typeof g)return c.commandParameter(g.rgb,Ca,a+".rgb",d.commandStr),c.commandParameter(g.alpha,Ca,a+".alpha",d.commandStr),[Ca[g.rgb],Ca[g.alpha]];c.commandRaise("invalid blend.equation",d.commandStr)},function(d,g,r){var p=d.constants.blendEquations,h=g.def(),m=g.def(),k=d.cond("typeof ",
r,'==="string"');c.optional(function(){function g(a,c,r){d.assert(a,r+" in "+p,"invalid "+c+", must be one of "+q(Ca))}g(k.then,a,r);d.assert(k["else"],r+"&&typeof "+r+'==="object"',"invalid "+a);g(k["else"],a+".rgb",r+".rgb");g(k["else"],a+".alpha",r+".alpha")});k.then(h,"=",m,"=",p,"[",r,"];");k["else"](h,"=",p,"[",r,".rgb];",m,"=",p,"[",r,".alpha];");g(k);return[h,m]});case "blend.color":return p(function(a){c.command(u(a)&&4===a.length,"blend.color must be a 4d array",d.commandStr);return G(4,
function(d){return+a[d]})},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===4","blend.color must be a 4d array")});return G(4,function(a){return d.def("+",g,"[",a,"]")})});case "stencil.mask":return p(function(a){c.commandType(a,"number",f,d.commandStr);return a|0},function(a,d,g){c.optional(function(){a.assert(d,"typeof "+g+'==="number"',"invalid stencil.mask")});return d.def(g,"|0")});case "stencil.func":return p(function(g){c.commandType(g,"object",
f,d.commandStr);var r=g.cmp||"keep",p=g.ref||0;g="mask"in g?g.mask:-1;c.commandParameter(r,h,a+".cmp",d.commandStr);c.commandType(p,"number",a+".ref",d.commandStr);c.commandType(g,"number",a+".mask",d.commandStr);return[h[r],p,g]},function(a,d,g){var r=a.constants.compareFuncs;c.optional(function(){function c(){a.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(g+"&&typeof ",g,'==="object"');c('!("cmp" in ',g,")||(",g,".cmp in ",r,")")});var p=d.def('"cmp" in ',g,"?",r,"[",
g,".cmp]",":",7680),h=d.def(g,".ref|0"),m=d.def('"mask" in ',g,"?",g,".mask|0:-1");return[p,h,m]});case "stencil.opFront":case "stencil.opBack":return p(function(g){c.commandType(g,"object",f,d.commandStr);var r=g.fail||"keep",p=g.zfail||"keep";g=g.zpass||"keep";c.commandParameter(r,t,a+".fail",d.commandStr);c.commandParameter(p,t,a+".zfail",d.commandStr);c.commandParameter(g,t,a+".zpass",d.commandStr);return["stencil.opBack"===a?1029:1028,t[r],t[p],t[g]]},function(d,g,r){function p(m){c.optional(function(){d.assert(g,
'!("'+m+'" in '+r+")||("+r+"."+m+" in "+h+")","invalid "+a+"."+m+", must be one of "+q(t))});return g.def('"',m,'" in ',r,"?",h,"[",r,".",m,"]:",7680)}var h=d.constants.stencilOps;c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,p("fail"),p("zfail"),p("zpass")]});case "polygonOffset.offset":return p(function(a){c.commandType(a,"object",f,d.commandStr);var g=a.factor|0;a=a.units|0;c.commandType(g,"number",f+".factor",d.commandStr);
c.commandType(a,"number",f+".units",d.commandStr);return[g,a]},function(d,g,r){c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});var p=g.def(r,".factor|0"),h=g.def(r,".units|0");return[p,h]});case "cull.face":return p(function(a){var g=0;"front"===a?g=1028:"back"===a&&(g=1029);c.command(!!g,f,d.commandStr);return g},function(a,d,g){c.optional(function(){a.assert(d,g+'==="front"||'+g+'==="back"',"invalid cull.face")});return d.def(g,'==="front"?',1028,":",1029)});case "lineWidth":return p(function(a){c.command("number"===
typeof a&&a>=D.lineWidthDims[0]&&a<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+" and "+D.lineWidthDims[1],d.commandStr);return a},function(a,d,g){c.optional(function(){a.assert(d,"typeof "+g+'==="number"&&'+g+">="+D.lineWidthDims[0]+"&&"+g+"<="+D.lineWidthDims[1],"invalid line width")});return g});case "frontFace":return p(function(a){c.commandParameter(a,k,f,d.commandStr);return k[a]},function(a,d,g){c.optional(function(){a.assert(d,g+'==="cw"||'+
g+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(g+'==="cw"?2304:2305')});case "colorMask":return p(function(a){c.command(u(a)&&4===a.length,"color.mask must be length 4 array",d.commandStr);return a.map(function(a){return!!a})},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===4","invalid color.mask")});return G(4,function(a){return"!!"+g+"["+a+"]"})});case "sample.coverage":return p(function(a){c.command("object"===typeof a&&a,
f,d.commandStr);var g="value"in a?a.value:1;a=!!a.invert;c.command("number"===typeof g&&0<=g&&1>=g,"sample.coverage.value must be a number between 0 and 1",d.commandStr);return[g,a]},function(a,d,g){c.optional(function(){a.assert(d,g+"&&typeof "+g+'==="object"',"invalid sample.coverage")});var r=d.def('"value" in ',g,"?+",g,".value:1"),p=d.def("!!",g,".invert");return[r,p]})}});return m}function ma(a,d){var g=a["static"],r=a.dynamic,p={};q(g).forEach(function(a){var r=g[a],h;if("number"===typeof r||
"boolean"===typeof r)h=e(function(){return r});else if("function"===typeof r){var m=r._reglType;"texture2d"===m||"textureCube"===m?h=e(function(a){return a.link(r)}):"framebuffer"===m||"framebufferCube"===m?(c.command(0<r.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',d.commandStr),h=e(function(a){return a.link(r.color[0])})):c.commandRaise('invalid data for uniform "'+a+'"',d.commandStr)}else u(r)?h=e(function(d){return d.global.def("[",G(r.length,function(g){c.command("number"===
typeof r[g]||"boolean"===typeof r[g],"invalid uniform "+a,d.commandStr);return r[g]}),"]")}):c.commandRaise('invalid or missing data for uniform "'+a+'"',d.commandStr);h.value=r;p[a]=h});q(r).forEach(function(a){var d=r[a];p[a]=l(d,function(a,g){return a.invoke(g,d)})});return p}function qa(a,d){var g=a["static"],r=a.dynamic,p={};q(g).forEach(function(a){var r=g[a],h=w.id(a),m=new sa;if(b(r))m.state=1,m.buffer=E.getBuffer(E.create(r,34962,!1,!0)),m.type=0;else{var k=E.getBuffer(r);if(k)m.state=1,
m.buffer=k,m.type=0;else if(c.command("object"===typeof r&&r,"invalid data for attribute "+a,d.commandStr),"constant"in r){var f=r.constant;m.buffer="null";m.state=2;"number"===typeof f?m.x=f:(c.command(u(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,d.commandStr),T.forEach(function(a,d){d<f.length&&(m[a]=f[d])}))}else{k=b(r.buffer)?E.getBuffer(E.create(r.buffer,34962,!1,!0)):E.getBuffer(r.buffer);c.command(!!k,'missing buffer for attribute "'+a+'"',d.commandStr);var l=r.offset|
0;c.command(0<=l,'invalid offset for attribute "'+a+'"',d.commandStr);var H=r.stride|0;c.command(0<=H&&256>H,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',d.commandStr);var y=r.size|0;c.command(!("size"in r)||0<y&&4>=y,'invalid size for attribute "'+a+'", must be 1,2,3,4',d.commandStr);var na=!!r.normalized,I=0;"type"in r&&(c.commandParameter(r.type,v,"invalid type for attribute "+a,d.commandStr),I=v[r.type]);var t=r.divisor|0;c.optional(function(){"divisor"in r&&(c.command(0===
t||ra,'cannot specify divisor for attribute "'+a+'", instancing not supported',d.commandStr),c.command(0<=t,'invalid divisor for attribute "'+a+'"',d.commandStr));var g=d.commandStr,p="buffer offset divisor normalized type size stride".split(" ");q(r).forEach(function(d){c.command(0<=p.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+a+'" (valid parameters are '+p+")",g)})});m.buffer=k;m.state=1;m.size=y;m.normalized=na;m.type=I||k.dtype;m.offset=l;m.stride=H;m.divisor=t}}p[a]=e(function(a,
d){var g=a.attribCache;if(h in g)return g[h];var r={isStream:!1};q(m).forEach(function(a){r[a]=m[a]});m.buffer&&(r.buffer=a.link(m.buffer),r.type=r.type||r.buffer+".dtype");return g[h]=r})});q(r).forEach(function(a){var d=r[a];p[a]=l(d,function(g,r){function p(a){r(H[a],"=",m,".",a,"|0;")}var m=g.invoke(r,d),h=g.shared,k=g.constants,f=h.isBufferArgs,l=h.buffer;c.optional(function(){g.assert(r,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+f+"("+m+")||"+l+".getBuffer("+m+")||"+l+".getBuffer("+
m+".buffer)||"+f+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+h.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+a+'"')});var H={isStream:r.def(!1)},y=new sa;y.state=1;q(y).forEach(function(a){H[a]=r.def(""+y[a])});var w=H.buffer,na=H.type;r("if(",f,"(",m,")){",H.isStream,"=true;",w,"=",l,".createStream(",34962,",",m,");",na,"=",w,".dtype;","}else{",w,"=",l,".getBuffer(",m,");","if(",w,"){",na,"=",w,".dtype;",'}else if("constant" in ',m,"){",H.state,"=",
2,";","if(typeof "+m+'.constant === "number"){',H[T[0]],"=",m,".constant;",T.slice(1).map(function(a){return H[a]}).join("="),"=0;","}else{",T.map(function(a,d){return H[a]+"="+m+".constant.length>"+d+"?"+m+".constant["+d+"]:0;"}).join(""),"}}else{","if(",f,"(",m,".buffer)){",w,"=",l,".createStream(",34962,",",m,".buffer);","}else{",w,"=",l,".getBuffer(",m,".buffer);","}",na,'="type" in ',m,"?",k.glTypes,"[",m,".type]:",w,".dtype;",H.normalized,"=!!",m,".normalized;");p("size");p("offset");p("stride");
p("divisor");r("}}");r.exit("if(",H.isStream,"){",l,".destroyStream(",w,");","}");return H})});return p}function Aa(a){var d=a["static"],g=a.dynamic,r={};q(d).forEach(function(a){var g=d[a];r[a]=e(function(a,d){return"number"===typeof g||"boolean"===typeof g?""+g:a.link(g)})});q(g).forEach(function(a){var d=g[a];r[a]=l(d,function(a,g){return a.invoke(g,d)})});return r}function wa(a,d,g,r,p){function h(a){var d=y[a];d&&(na[a]=d)}var k=a["static"],f=a.dynamic;c.optional(function(){function a(g){q(g).forEach(function(a){c.command(0<=
d.indexOf(a),'unknown parameter "'+a+'"',p.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);a(k);a(f)});var l=m(a,d),H=Da(a,p),y=pa(a,H,p),w=aa(a,p),na=Q(a,p),I=J(a,p,l);h("viewport");h(P("scissor.box"));var t=0<q(na).length,H={framebuffer:H,draw:w,shader:I,state:na,dirty:t,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};H.profile=M(a,p);H.uniforms=ma(g,p);H.drawVAO=H.scopeVAO=w.vao;if(!H.drawVAO&&I.program&&!l&&n.angle_instanced_arrays&&
w["static"].elements){var sa=!0;a=I.program.attributes.map(function(a){a=d["static"][a];sa=sa&&!!a;return a});if(sa&&0<a.length){var Ja=A.getVAO(A.createVAO({attributes:a,elements:w["static"].elements}));H.drawVAO=new K(null,null,null,function(a,d){return a.link(Ja)});H.useVAO=!0}}l?H.useVAO=!0:H.attributes=qa(d,p);H.context=Aa(r,p);return H}function fa(a,d,g){var r=a.shared.context,c=a.scope();q(g).forEach(function(m){d.save(r,"."+m);var p=g[m].append(a,d);Array.isArray(p)?c(r,".",m,"=[",p.join(),
"];"):c(r,".",m,"=",p,";")});d(c)}function Ba(a,d,g,r){var c=a.shared,m=c.gl,p=c.framebuffer,h;xa&&(h=d.def(c.extensions,".webgl_draw_buffers"));var k=a.constants,c=k.drawBuffer,k=k.backBuffer;a=g?g.append(a,d):d.def(p,".next");r||d("if(",a,"!==",p,".cur){");d("if(",a,"){",m,".bindFramebuffer(",36160,",",a,".framebuffer);");xa&&d(h,".drawBuffersWEBGL(",c,"[",a,".colorAttachments.length]);");d("}else{",m,".bindFramebuffer(",36160,",null);");xa&&d(h,".drawBuffersWEBGL(",k,");");d("}",p,".cur=",a,";");
r||d("}")}function ka(a,d,g){var r=a.shared,c=r.gl,m=a.current,p=a.next,h=r.current,k=r.next,f=a.cond(h,".dirty");ua.forEach(function(d){d=P(d);if(!(d in g.state)){var r,l;if(d in p){r=p[d];l=m[d];var H=G(la[d].length,function(a){return f.def(r,"[",a,"]")});f(a.cond(H.map(function(a,d){return a+"!=="+l+"["+d+"]"}).join("||")).then(c,".",za[d],"(",H,");",H.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";"))}else r=f.def(k,".",d),H=a.cond(r,"!==",h,".",d),f(H),d in Ia?H(a.cond(r).then(c,".enable(",
Ia[d],");")["else"](c,".disable(",Ia[d],");"),h,".",d,"=",r,";"):H(c,".",za[d],"(",r,");",h,".",d,"=",r,";")}});0===q(g.state).length&&f(h,".dirty=false;");d(f)}function oa(a,d,g,r){var c=a.shared,m=a.current,p=c.current,h=c.gl;da(q(g)).forEach(function(c){var k=g[c];if(!r||r(k)){var f=k.append(a,d);if(Ia[c]){var H=Ia[c];L(k)?f?d(h,".enable(",H,");"):d(h,".disable(",H,");"):d(a.cond(f).then(h,".enable(",H,");")["else"](h,".disable(",H,");"));d(p,".",c,"=",f,";")}else if(u(f)){var l=m[c];d(h,".",za[c],
"(",f,");",f.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";")}else d(h,".",za[c],"(",f,");",p,".",c,"=",f,";")}})}function ya(a,d){ra&&(a.instancing=d.def(a.shared.extensions,".angle_instanced_arrays"))}function Ja(a,d,g,r,c){function m(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function p(a){w=d.def();a(w,"=",m(),";");"string"===typeof c?a(H,".count+=",c,";"):a(H,".count++;");ea&&(r?(na=d.def(),a(na,"=",y,".getNumPendingQueries();")):a(y,".beginQuery(",H,");"))}
function h(a){a(H,".cpuTime+=",m(),"-",w,";");ea&&(r?a(y,".pushScopeStats(",na,",",y,".getNumPendingQueries(),",H,");"):a(y,".endQuery();"))}function k(a){var g=d.def(l,".profile");d(l,".profile=",a,";");d.exit(l,".profile=",g,";")}var f=a.shared,H=a.stats,l=f.current,y=f.timer;g=g.profile;var w,na;if(g){if(L(g)){g.enable?(p(d),h(d.exit),k("true")):k("false");return}g=g.append(a,d);k(g)}else g=d.def(l,".profile");f=a.block();p(f);d("if(",g,"){",f,"}");a=a.block();h(a);d.exit("if(",g,"){",a,"}")}function na(a,
d,g,r,m){function p(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function h(g,r,c){function m(){d("if(!",l,".buffer){",f,".enableVertexAttribArray(",H,");}");var g=c.type,p;p=c.size?d.def(c.size,"||",r):r;d("if(",l,".type!==",g,"||",l,".size!==",p,"||",na.map(function(a){return l+"."+a+"!=="+c[a]}).join("||"),"){",f,".bindBuffer(",34962,",",y,".buffer);",f,".vertexAttribPointer(",[H,p,g,
c.normalized,c.stride,c.offset],");",l,".type=",g,";",l,".size=",p,";",na.map(function(a){return l+"."+a+"="+c[a]+";"}).join(""),"}");ra&&(g=c.divisor,d("if(",l,".divisor!==",g,"){",a.instancing,".vertexAttribDivisorANGLE(",[H,g],");",l,".divisor=",g,";}"))}function p(){d("if(",l,".buffer){",f,".disableVertexAttribArray(",H,");",l,".buffer=null;","}if(",T.map(function(a,d){return l+"."+a+"!=="+w[d]}).join("||"),"){",f,".vertexAttrib4f(",H,",",w,");",T.map(function(a,d){return l+"."+a+"="+w[d]+";"}).join(""),
"}")}var f=k.gl,H=d.def(g,".location"),l=d.def(k.attributes,"[",H,"]");g=c.state;var y=c.buffer,w=[c.x,c.y,c.z,c.w],na=["buffer","normalized","offset","stride"];1===g?m():2===g?p():(d("if(",g,"===",1,"){"),m(),d("}else{"),p(),d("}"))}var k=a.shared;r.forEach(function(r){var k=r.name,f=g.attributes[k],l;if(f){if(!m(f))return;l=f.append(a,d)}else{if(!m(X))return;var H=a.scopeAttrib(k);c.optional(function(){a.assert(d,H+".state","missing attribute "+k)});l={};q(new sa).forEach(function(a){l[a]=d.def(H,
".",a)})}h(a.link(r),p(r.info.type),l)})}function Xa(a,d,g,r,p,m){for(var h=a.shared,k=h.gl,f,l=0;l<r.length;++l){var H=r[l],y=H.name,na=H.info.type,I=g.uniforms[y],H=a.link(H)+".location",q;if(I){if(!p(I))continue;if(L(I)){var t=I.value;c.command(null!==t&&"undefined"!==typeof t,'missing uniform "'+y+'"',a.commandStr);if(35678===na||35680===na)c.command("function"===typeof t&&(35678===na&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===na&&("textureCube"===t._reglType||"framebufferCube"===
t._reglType)),"invalid texture for uniform "+y,a.commandStr),I=a.link(t._texture||t.color[0]._texture),d(k,".uniform1i(",H,",",I+".bind());"),d.exit(I,".unbind();");else if(35674===na||35675===na||35676===na){c.optional(function(){c.command(u(t),"invalid matrix for uniform "+y,a.commandStr);c.command(35674===na&&4===t.length||35675===na&&9===t.length||35676===na&&16===t.length,"invalid length for matrix uniform "+y,a.commandStr)});var I=a.global.def("new Float32Array(["+Array.prototype.slice.call(t)+
"])"),P=2;35675===na?P=3:35676===na&&(P=4);d(k,".uniformMatrix",P,"fv(",H,",false,",I,");")}else{switch(na){case 5126:c.commandType(t,"number","uniform "+y,a.commandStr);f="1f";break;case 35664:c.command(u(t)&&2===t.length,"uniform "+y,a.commandStr);f="2f";break;case 35665:c.command(u(t)&&3===t.length,"uniform "+y,a.commandStr);f="3f";break;case 35666:c.command(u(t)&&4===t.length,"uniform "+y,a.commandStr);f="4f";break;case 35670:c.commandType(t,"boolean","uniform "+y,a.commandStr);f="1i";break;case 5124:c.commandType(t,
"number","uniform "+y,a.commandStr);f="1i";break;case 35671:c.command(u(t)&&2===t.length,"uniform "+y,a.commandStr);f="2i";break;case 35667:c.command(u(t)&&2===t.length,"uniform "+y,a.commandStr);f="2i";break;case 35672:c.command(u(t)&&3===t.length,"uniform "+y,a.commandStr);f="3i";break;case 35668:c.command(u(t)&&3===t.length,"uniform "+y,a.commandStr);f="3i";break;case 35673:c.command(u(t)&&4===t.length,"uniform "+y,a.commandStr);f="4i";break;case 35669:c.command(u(t)&&4===t.length,"uniform "+y,
a.commandStr),f="4i"}d(k,".uniform",f,"(",H,",",u(t)?Array.prototype.slice.call(t):t,");")}continue}else q=I.append(a,d)}else{if(!p(X))continue;q=d.def(h.uniforms,"[",w.id(y),"]")}35678===na?(c(!Array.isArray(q),"must specify a scalar prop for textures"),d("if(",q,"&&",q,'._reglType==="framebuffer"){',q,"=",q,".color[0];","}")):35680===na&&(c(!Array.isArray(q),"must specify a scalar prop for cube maps"),d("if(",q,"&&",q,'._reglType==="framebufferCube"){',q,"=",q,".color[0];","}"));c.optional(function(){function g(r,
c){a.assert(d,r,'bad data or missing for uniform "'+y+'".  '+c)}function r(a){c(!Array.isArray(q),"must not specify an array type for uniform");g("typeof "+q+'==="'+a+'"',"invalid type, expected "+a)}function m(d,r){Array.isArray(q)?c(q.length===d,"must have length "+d):g(h.isArrayLike+"("+q+")&&"+q+".length==="+d,"invalid vector, should have length "+d,a.commandStr)}function p(d){c(!Array.isArray(q),"must not specify a value type");g("typeof "+q+'==="function"&&'+q+'._reglType==="texture'+(3553===
d?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(na){case 5124:r("number");break;case 35667:m(2,"number");break;case 35668:m(3,"number");break;case 35669:m(4,"number");break;case 5126:r("number");break;case 35664:m(2,"number");break;case 35665:m(3,"number");break;case 35666:m(4,"number");break;case 35670:r("boolean");break;case 35671:m(2,"boolean");break;case 35672:m(3,"boolean");break;case 35673:m(4,"boolean");break;case 35674:m(4,"number");break;case 35675:m(9,"number");break;case 35676:m(16,
"number");break;case 35678:p(3553);break;case 35680:p(34067)}});I=1;switch(na){case 35678:case 35680:I=d.def(q,"._texture");d(k,".uniform1i(",H,",",I,".bind());");d.exit(I,".unbind();");continue;case 5124:case 35670:f="1i";break;case 35667:case 35671:f="2i";I=2;break;case 35668:case 35672:f="3i";I=3;break;case 35669:case 35673:f="4i";I=4;break;case 5126:f="1f";break;case 35664:f="2f";I=2;break;case 35665:f="3f";I=3;break;case 35666:f="4f";I=4;break;case 35674:f="Matrix2fv";break;case 35675:f="Matrix3fv";
break;case 35676:f="Matrix4fv"}if("M"===f.charAt(0)){d(k,".uniform",f,"(",H,",");var H=Math.pow(na-35674+2,2),sa=a.global.def("new Float32Array(",H,")");Array.isArray(q)?d("false,(",G(H,function(a){return sa+"["+a+"]="+q[a]}),",",sa,")"):d("false,(Array.isArray(",q,")||",q," instanceof Float32Array)?",q,":(",G(H,function(a){return sa+"["+a+"]="+q+"["+a+"]"}),",",sa,")");d(");")}else{if(1<I){for(var P=[],Ja=[],Ca=0;Ca<I;++Ca)Array.isArray(q)?Ja.push(q[Ca]):Ja.push(d.def(q+"["+Ca+"]")),m&&P.push(d.def());
m&&d("if(!",a.batchId,"||",P.map(function(a,d){return a+"!=="+Ja[d]}).join("||"),"){",P.map(function(a,d){return a+"="+Ja[d]+";"}).join(""));d(k,".uniform",f,"(",H,",",Ja.join(","),");")}else c(!Array.isArray(q),"uniform value must not be an array"),m&&(I=d.def(),d("if(!",a.batchId,"||",I,"!==",q,"){",I,"=",q,";")),d(k,".uniform",f,"(",H,",",q,");");m&&d("}")}}}function Ta(a,d,g,r){function m(c){var p=l[c];return p?p.contextDep&&r.contextDynamic||p.propDep?p.append(a,g):p.append(a,d):d.def(H,".",
c)}function p(){function a(){g(I,".drawElementsInstancedANGLE(",[na,t,P,w+"<<(("+P+"-5121)>>1)",q],");")}function d(){g(I,".drawArraysInstancedANGLE(",[na,w,t,q],");")}y&&"null"!==y?sa?a():(g("if(",y,"){"),a(),g("}else{"),d(),g("}")):d()}function h(){function a(){g(k+".drawElements("+[na,t,P,w+"<<(("+P+"-5121)>>1)"]+");")}function d(){g(k+".drawArrays("+[na,w,t]+");")}y&&"null"!==y?sa?a():(g("if(",y,"){"),a(),g("}else{"),d(),g("}")):d()}var f=a.shared,k=f.gl,H=f.draw,l=r.draw,y=function(){var c=l.elements,
m=d;if(c){if(c.contextDep&&r.contextDynamic||c.propDep)m=g;c=c.append(a,m);l.elementsActive&&m("if("+c+")"+k+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=m.def(),m(c,"=",H,".","elements",";","if(",c,"){",k,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",f.vao,".currentVAO){",c,"=",a.shared.elements+".getElements("+f.vao,".currentVAO.elements);",Fa?"":"if("+c+")"+k+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),na=m("primitive"),w=m("offset"),t=function(){var m=l.count,p,
h=d;if(m){if(m.contextDep&&r.contextDynamic||m.propDep)h=g;p=m.append(a,h);c.optional(function(){m.MISSING&&a.assert(d,"false","missing vertex count");m.DYNAMIC&&a.assert(h,p+">=0","missing vertex count")})}else p=h.def(H,".","count"),c.optional(function(){a.assert(h,p+">=0","missing vertex count")});return p}();if("number"===typeof t){if(0===t)return}else g("if(",t,"){"),g.exit("}");var q,I;ra&&(q=m("instances"),I=a.instancing);var P=y+".type",sa=l.elements&&L(l.elements)&&!l.vaoActive;ra&&("number"!==
typeof q||0<=q)?"string"===typeof q?(g("if(",q,">0){"),p(),g("}else if(",q,"<0){"),h(),g("}")):p():h()}function r(a,d,g,r,m){var p=N();m=p.proc("body",m);c.optional(function(){p.commandStr=d.commandStr;p.command=p.link(d.commandStr)});ra&&(p.instancing=m.def(p.shared.extensions,".angle_instanced_arrays"));a(p,m,g,r);return p.compile().body}function p(a,d,g,r){ya(a,d);g.useVAO?g.drawVAO?d(a.shared.vao,".setVAO(",g.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(d(a.shared.vao,
".setVAO(null);"),na(a,d,g,r.attributes,function(){return!0}));Xa(a,d,g,r.uniforms,function(){return!0},!1);Ta(a,d,d,g)}function y(a,d){var g=a.proc("draw",1);ya(a,g);fa(a,g,d.context);Ba(a,g,d.framebuffer);ka(a,g,d);oa(a,g,d.state);Ja(a,g,d,!1,!0);var c=d.shader.progVar.append(a,g);g(a.shared.gl,".useProgram(",c,".program);");if(d.shader.program)p(a,g,d,d.shader.program);else{g(a.shared.vao,".setVAO(null);");var m=a.global.def("{}"),h=g.def(c,".id"),f=g.def(m,"[",h,"]");g(a.cond(f).then(f,".call(this,a0);")["else"](f,
"=",m,"[",h,"]=",a.link(function(g){return r(p,a,d,g,1)}),"(",c,");",f,".call(this,a0);"))}0<q(d.state).length&&g(a.shared.current,".dirty=true;");a.shared.vao&&g(a.shared.vao,".setVAO(null);")}function va(a,d,g,r){function c(){return!0}a.batchId="a1";ya(a,d);na(a,d,g,r.attributes,c);Xa(a,d,g,r.uniforms,c,!1);Ta(a,d,d,g)}function Ea(a,d,g,c){function m(a){return a.contextDep&&h||a.propDep}function p(a){return!m(a)}ya(a,d);var h=g.contextDep,f=d.def(),k=d.def();a.shared.props=k;a.batchId=f;var H=a.scope(),
l=a.scope();d(H.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",k,"=","a0","[",f,"];",l,"}",H.exit);g.needsContext&&fa(a,l,g.context);g.needsFramebuffer&&Ba(a,l,g.framebuffer);oa(a,l,g.state,m);g.profile&&m(g.profile)&&Ja(a,l,g,!1,!0);c?(g.useVAO?g.drawVAO?m(g.drawVAO)?l(a.shared.vao,".setVAO(",g.drawVAO.append(a,l),");"):H(a.shared.vao,".setVAO(",g.drawVAO.append(a,H),");"):H(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(H(a.shared.vao,".setVAO(null);"),na(a,H,g,c.attributes,p),na(a,l,g,c.attributes,
m)),Xa(a,H,g,c.uniforms,p,!1),Xa(a,l,g,c.uniforms,m,!0),Ta(a,H,l,g)):(d=a.global.def("{}"),c=g.shader.progVar.append(a,l),k=l.def(c,".id"),H=l.def(d,"[",k,"]"),l(a.shared.gl,".useProgram(",c,".program);","if(!",H,"){",H,"=",d,"[",k,"]=",a.link(function(d){return r(va,a,g,d,2)}),"(",c,");}",H,".call(this,a0[",f,"],",f,");"))}function Bd(a,d){function g(a){return a.contextDep&&m||a.propDep}var c=a.proc("batch",2);a.batchId="0";ya(a,c);var m=!1,p=!0;q(d.context).forEach(function(a){m=m||d.context[a].propDep});
m||(fa(a,c,d.context),p=!1);var h=d.framebuffer,f=!1;h?(h.propDep?m=f=!0:h.contextDep&&m&&(f=!0),f||Ba(a,c,h)):Ba(a,c,null);d.state.viewport&&d.state.viewport.propDep&&(m=!0);ka(a,c,d);oa(a,c,d.state,function(a){return!g(a)});d.profile&&g(d.profile)||Ja(a,c,d,!1,"a1");d.contextDep=m;d.needsContext=p;d.needsFramebuffer=f;p=d.shader.progVar;if(p.contextDep&&m||p.propDep)Ea(a,c,d,null);else if(p=p.append(a,c),c(a.shared.gl,".useProgram(",p,".program);"),d.shader.program)Ea(a,c,d,d.shader.program);else{c(a.shared.vao,
".setVAO(null);");var h=a.global.def("{}"),f=c.def(p,".id"),k=c.def(h,"[",f,"]");c(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",h,"[",f,"]=",a.link(function(g){return r(Ea,a,d,g,2)}),"(",p,");",k,".call(this,a0,a1);"))}0<q(d.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Hb(a,d){function g(m){var p=d.shader[m];p&&r.set(c.shader,"."+m,p.append(a,r))}var r=a.proc("scope",3);a.batchId="a2";var c=a.shared,m=c.current;fa(a,r,d.context);
d.framebuffer&&d.framebuffer.append(a,r);da(q(d.state)).forEach(function(g){var m=d.state[g].append(a,r);u(m)?m.forEach(function(d,c){r.set(a.next[g],"["+c+"]",d)}):r.set(c.next,"."+g,m)});Ja(a,r,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(g){var m=d.draw[g];m&&r.set(c.draw,"."+g,""+m.append(a,r))});q(d.uniforms).forEach(function(g){var m=d.uniforms[g].append(a,r);Array.isArray(m)&&(m="["+m.join()+"]");r.set(c.uniforms,"["+w.id(g)+"]",m)});q(d.attributes).forEach(function(g){var c=
d.attributes[g].append(a,r),m=a.scopeAttrib(g);q(new sa).forEach(function(a){r.set(m,"."+a,c[a])})});d.scopeVAO&&r.set(c.vao,".targetVAO",d.scopeVAO.append(a,r));g("vert");g("frag");0<q(d.state).length&&(r(m,".dirty=true;"),r.exit(m,".dirty=true;"));r("a1(",a.shared.context,",a0,",a.batchId,");")}function ga(a){if("object"===typeof a&&!u(a)){for(var d=q(a),g=0;g<d.length;++g)if(x.isDynamic(a[d[g]]))return!0;return!1}}function H(a,d,g){function r(a,d){p.forEach(function(g){var r=c[g];x.isDynamic(r)&&
(r=a.invoke(d,r),d(H,".",g,"=",r,";"))})}var c=d["static"][g];if(c&&ga(c)){var m=a.global,p=q(c),h=!1,f=!1,k=!1,H=a.global.def("{}");p.forEach(function(d){var g=c[d];if(x.isDynamic(g))"function"===typeof g&&(g=c[d]=x.unbox(g)),d=l(g,null),h=h||d.thisDep,k=k||d.propDep,f=f||d.contextDep;else{m(H,".",d,"=");switch(typeof g){case "number":m(g);break;case "string":m('"',g,'"');break;case "object":Array.isArray(g)&&m("[",g.join(),"]");break;default:m(a.link(g))}m(";")}});d.dynamic[g]=new x.DynamicVariable(4,
{thisDep:h,contextDep:f,propDep:k,ref:H,append:r});delete d["static"][g]}}var sa=A.Record,Ca={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(Ca.min=32775,Ca.max=32776);var ra=n.angle_instanced_arrays,xa=n.webgl_draw_buffers,Fa=n.oes_vertex_array_object,la={dirty:!0,profile:O.profile},W={},ua=[],Ia={},za={};C("dither",3024);C("blend.enable",3042);g("blend.color","blendColor",[0,0,0,0]);g("blend.equation","blendEquationSeparate",[32774,32774]);g("blend.func","blendFuncSeparate",
[1,0,1,0]);C("depth.enable",2929,!0);g("depth.func","depthFunc",513);g("depth.range","depthRange",[0,1]);g("depth.mask","depthMask",!0);g("colorMask","colorMask",[!0,!0,!0,!0]);C("cull.enable",2884);g("cull.face","cullFace",1029);g("frontFace","frontFace",2305);g("lineWidth","lineWidth",1);C("polygonOffset.enable",32823);g("polygonOffset.offset","polygonOffset",[0,0]);C("sample.alpha",32926);C("sample.enable",32928);g("sample.coverage","sampleCoverage",[1,!1]);C("stencil.enable",2960);g("stencil.mask",
"stencilMask",-1);g("stencil.func","stencilFunc",[519,0,-1]);g("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);g("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);C("scissor.enable",3089);g("scissor.box","scissor",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);g("viewport","viewport",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);var mb={gl:f,context:V,strings:w,next:W,current:la,draw:Cc,elements:d,buffer:E,shader:ja,attributes:A.state,vao:A,uniforms:U,framebuffer:a,extensions:n,
timer:ea,isBufferArgs:b},ca={primTypes:ba,compareFuncs:h,blendFuncs:R,blendEquations:Ca,stencilOps:t,glTypes:v,orientationType:k};c.optional(function(){mb.isArrayLike=u});xa&&(ca.backBuffer=[1029],ca.drawBuffer=G(D.maxDrawbuffers,function(a){return 0===a?[0]:G(a,function(a){return 36064+a})}));var xd=0;return{next:W,current:la,procs:function(){var a=N(),d=a.proc("poll"),g=a.proc("refresh"),r=a.block();d(r);g(r);var c=a.shared,m=c.gl,p=c.next,h=c.current;r(h,".dirty=false;");Ba(a,d);Ba(a,g,null,!0);
var f;ra&&(f=a.link(ra));n.oes_vertex_array_object&&g(a.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var k=0;k<D.maxAttributes;++k){var H=g.def(c.attributes,"[",k,"]"),l=a.cond(H,".buffer");l.then(m,".enableVertexAttribArray(",k,");",m,".bindBuffer(",34962,",",H,".buffer.buffer);",m,".vertexAttribPointer(",k,",",H,".size,",H,".type,",H,".normalized,",H,".stride,",H,".offset);")["else"](m,".disableVertexAttribArray(",k,");",m,".vertexAttrib4f(",k,",",H,".x,",H,".y,",H,".z,",H,
".w);",H,".buffer=null;");g(l);ra&&g(f,".vertexAttribDivisorANGLE(",k,",",H,".divisor);")}g(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");q(Ia).forEach(function(c){var f=Ia[c],k=r.def(p,".",c),H=a.block();H("if(",k,"){",m,".enable(",f,")}else{",m,".disable(",f,")}",h,".",c,"=",k,";");g(H);d("if(",k,"!==",h,".",c,"){",H,"}")});q(za).forEach(function(c){var f=za[c],k=la[c],H,l,y=a.block();y(m,".",f,"(");u(k)?(f=k.length,H=a.global.def(p,".",c),l=a.global.def(h,
".",c),y(G(f,function(a){return H+"["+a+"]"}),");",G(f,function(a){return l+"["+a+"]="+H+"["+a+"];"}).join("")),d("if(",G(f,function(a){return H+"["+a+"]!=="+l+"["+a+"]"}).join("||"),"){",y,"}")):(H=r.def(p,".",c),l=r.def(h,".",c),y(H,");",h,".",c,"=",H,";"),d("if(",H,"!==",l,"){",y,"}"));g(y)});return a.compile()}(),compile:function(a,d,g,r,c){var m=N();m.stats=m.link(c);q(d["static"]).forEach(function(a){H(m,d,a)});z.forEach(function(d){H(m,a,d)});var p=wa(a,d,g,r,m);y(m,p);Hb(m,p);Bd(m,p);return F(m.compile(),
{destroy:function(){p.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(Z,ha,ab){function b(q,c){this.id=l++;this.type=q;this.data=c}function da(l){if(0===l.length)return[];var c=l.charAt(0),e=l.charAt(l.length-1);if(1<l.length&&c===e&&('"'===c||"'"===
c))return['"'+l.substr(1,l.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(l))return da(l.substr(0,c.index)).concat(da(c[1])).concat(da(l.substr(c.index+c[0].length)));c=l.split(".");if(1===c.length)return['"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];l=[];for(e=0;e<c.length;++e)l=l.concat(da(c[e]));return l}function K(l){return"["+da(l).join("][")+"]"}function L(l,c){if("function"===typeof l)return new b(0,l);if("number"===typeof l||
"boolean"===typeof l)return new b(5,l);if(Array.isArray(l))return new b(6,l.map(function(l,q){return L(l,c+"["+q+"]")}));if(l instanceof b)return l;e(!1,"invalid option type in uniform "+c)}var e=Z("./util/check"),l=0;ha.exports={DynamicVariable:b,define:function(l,c){return new b(l,K(c+""))},isDynamic:function(l){return"function"===typeof l&&!l._reglType||l instanceof b},unbox:L,accessor:K}},{"./util/check":21}],10:[function(Z,ha,ab){var b=Z("./util/check"),da=Z("./util/is-typed-array"),K=Z("./util/is-ndarray"),
L=Z("./util/values"),e=Z("./constants/primitives.json"),l=Z("./constants/usage.json");ha.exports=function(q,c,F,B){function G(c){this.id=x++;u[this.id]=this;this.buffer=c;this.primType=4;this.type=this.vertCount=0}function U(l,e,v,u,h,t,S){l.buffer.bind();var k;e?((k=S)||da(e)&&(!K(e)||da(e.data))||(k=c.oes_element_index_uint?5125:5123),F._initBuffer(l.buffer,e,v,k,3)):(q.bufferData(34963,t,v),l.buffer.dtype=k||5121,l.buffer.usage=v,l.buffer.dimension=3,l.buffer.byteLength=t);k=S;if(!S){switch(l.buffer.dtype){case 5121:case 5120:k=
5121;break;case 5123:case 5122:k=5123;break;case 5125:case 5124:k=5125;break;default:b.raise("unsupported type for element array")}l.buffer.dtype=k}l.type=k;b(5125!==k||!!c.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=h;0>e&&(e=l.buffer.byteLength,5123===k?e>>=1:5125===k&&(e>>=2));l.vertCount=e;e=u;0>u&&(e=4,u=l.buffer.dimension,1===u&&(e=0),2===u&&(e=1),3===u&&(e=4));l.primType=e}function n(c){B.elementsCount--;b(null!==c.buffer,"must not double destroy elements");
delete u[c.id];c.buffer.destroy();c.buffer=null}var u={},x=0,ba={uint8:5121,uint16:5123};c.oes_element_index_uint&&(ba.uint32=5125);G.prototype.bind=function(){this.buffer.bind()};var v=[];return{create:function(c,q){function v(c){if(c)if("number"===typeof c)u(c),h.primType=4,h.vertCount=c|0,h.type=5121;else{var q=null,k=35044,z=-1,f=-1,w=0,n=0;if(Array.isArray(c)||da(c)||K(c))q=c;else if(b.type(c,"object","invalid arguments for elements"),"data"in c&&(q=c.data,b(Array.isArray(q)||da(q)||K(q),"invalid data for element buffer")),
"usage"in c&&(b.parameter(c.usage,l,"invalid element buffer usage"),k=l[c.usage]),"primitive"in c&&(b.parameter(c.primitive,e,"invalid element buffer primitive"),z=e[c.primitive]),"count"in c&&(b("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),f=c.count|0),"type"in c&&(b.parameter(c.type,ba,"invalid buffer type"),n=ba[c.type]),"length"in c)w=c.length|0;else if(w=f,5123===n||5122===n)w*=2;else if(5125===n||5124===n)w*=4;U(h,q,k,z,f,w,n)}else u(),h.primType=4,h.vertCount=
0,h.type=5121;return v}var u=F.create(null,34963,!0),h=new G(u._buffer);B.elementsCount++;v(c);v._reglType="elements";v._elements=h;v.subdata=function(c,h){u.subdata(c,h);return v};v.destroy=function(){n(h)};return v},createStream:function(c){var l=v.pop();l||(l=new G(F.create(null,34963,!0,!1)._buffer));U(l,c,35040,-1,-1,0,0);return l},destroyStream:function(c){v.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof G?c._elements:null},clear:function(){L(u).forEach(n)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(Z,ha,ab){var b=Z("./util/sorted-object-keys"),da=Z("./util/check");ha.exports=function(K,L){function e(c){da.type(c,"string","extension name must be string");c=c.toLowerCase();var q;try{q=l[c]=K.getExtension(c)}catch(e){}return!!q}for(var l={},q=0;q<L.extensions.length;++q){var c=L.extensions[q];if(!e(c))return L.onDestroy(),L.onDone('"'+
c+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}L.optionalExtensions.forEach(e);return{extensions:l,restore:function(){b(l).forEach(function(c){if(l[c]&&!e(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(Z,ha,ab){var b=Z("./util/check"),da=Z("./util/values"),K=Z("./util/extend"),L=[6407,6408],e=[];e[6408]=4;e[6407]=3;var l=[];l[5121]=1;l[5126]=4;l[36193]=
2;var q=[32854,32855,36194,35907,34842,34843,34836],c={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};ha.exports=function(F,B,G,U,n,u){function x(a,d,c){this.target=a;this.texture=d;this.renderbuffer=c;var h=a=0;d?(a=d.width,h=d.height):c&&(a=c.width,h=c.height);this.width=a;this.height=h}function ba(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function v(a,
d,c){if(a){if(a.texture){a=a.texture._texture;var h=Math.max(1,a.height);b(Math.max(1,a.width)===d&&h===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,b(a.width===d&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function T(a,d){d&&(d.texture?F.framebufferTexture2D(36160,a,d.target,d.texture._texture.texture,0):F.framebufferRenderbuffer(36160,a,36161,d.renderbuffer._renderbuffer.renderbuffer))}function z(a){var d=3553,c=null,h=null,
l=a;"object"===typeof a&&(l=a.data,"target"in a&&(d=a.target|0));b.type(l,"function","invalid attachment data");a=l._reglType;"texture2d"===a?(c=l,b(3553===d)):"textureCube"===a?(c=l,b(34069<=d&&34075>d,"invalid cube map target")):"renderbuffer"===a?(h=l,d=36161):b.raise("invalid regl object for attachment");return new x(d,c,h)}function R(a,d,c,h,l){if(c)return a=U.create2D({width:a,height:d,format:h,type:l}),a._texture.refCount=0,new x(3553,a,null);a=n.create({width:a,height:d,format:h});a._renderbuffer.refCount=
0;return new x(36161,null,a)}function ia(a){return a&&(a.texture||a.renderbuffer)}function h(a,d,c){a&&(a.texture?a.texture.resize(d,c):a.renderbuffer&&a.renderbuffer.resize(d,c),a.width=d,a.height=c)}function t(){this.id=d++;I[this.id]=this;this.framebuffer=F.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function S(a){a.colorAttachments.forEach(ba);ba(a.depthAttachment);ba(a.stencilAttachment);ba(a.depthStencilAttachment)}
function k(a){var d=a.framebuffer;b(d,"must not double destroy framebuffer");F.deleteFramebuffer(d);a.framebuffer=null;u.framebufferCount--;delete I[a.id]}function X(a){var d;F.bindFramebuffer(36160,a.framebuffer);var h=a.colorAttachments;for(d=0;d<h.length;++d)T(36064+d,h[d]);for(d=h.length;d<G.maxColorAttachments;++d)F.framebufferTexture2D(36160,36064+d,3553,null,0);F.framebufferTexture2D(36160,33306,3553,null,0);F.framebufferTexture2D(36160,36096,3553,null,0);F.framebufferTexture2D(36160,36128,
3553,null,0);T(36096,a.depthAttachment);T(36128,a.stencilAttachment);T(33306,a.depthStencilAttachment);a=F.checkFramebufferStatus(36160);F.isContextLost()||36053===a||b.raise("framebuffer configuration not supported, status = "+c[a]);F.bindFramebuffer(36160,w.next?w.next.framebuffer:null);w.cur=w.next;F.getError()}function f(a,d){function c(a,d){var h;b(w.next!==f,"can not update framebuffer which is currently in use");var k=0,I=0,t=!0,g=!0;h=null;var u=!0,M="rgba",n="uint8",U=1,m=null,J=null,aa=
null,Q=!1;if("number"===typeof a)k=a|0,I=d|0||k;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(I=a.shape,b(Array.isArray(I)&&2<=I.length,"invalid shape for framebuffer"),k=I[0],I=I[1]):("radius"in a&&(k=I=a.radius),"width"in a&&(k=a.width),"height"in a&&(I=a.height));if("color"in a||"colors"in a)h=a.color||a.colors,Array.isArray(h)&&b(1===h.length||B.webgl_draw_buffers,"multiple render targets not supported");if(!h){"colorCount"in a&&(U=a.colorCount|0,b(0<U,"invalid color buffer count"));
"colorTexture"in a&&(u=!!a.colorTexture,M="rgba4");if("colorType"in a){n=a.colorType;if(u)b(B.oes_texture_float||!("float"===n||"float32"===n),"you must enable OES_texture_float in order to use floating point framebuffer objects"),b(B.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===n||"float16"===n)b(B.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
M="rgba16f";else if("float"===n||"float32"===n)b(B.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),M="rgba32f";b.oneOf(n,E,"invalid color type")}"colorFormat"in a&&(M=a.colorFormat,0<=Y.indexOf(M)?u=!0:0<=D.indexOf(M)?u=!1:b.optional(function(){if(u)b.oneOf(a.colorFormat,Y,"invalid color format for texture");else b.oneOf(a.colorFormat,D,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in
a)Q=!(!a.depthTexture&&!a.depthStencilTexture),b(!Q||B.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?t=a.depth:(m=a.depth,g=!1));"stencil"in a&&("boolean"===typeof a.stencil?g=a.stencil:(J=a.stencil,t=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?t=g=a.depthStencil:(aa=a.depthStencil,g=t=!1))}else k=I=1;var x=null,qa=null,T=null,wa=null;if(Array.isArray(h))x=h.map(z);else if(h)x=[z(h)];else for(x=Array(U),h=0;h<U;++h)x[h]=
R(k,I,u,M,n);b(B.webgl_draw_buffers||1>=x.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");b(x.length<=G.maxColorAttachments,"too many color attachments, not supported");k=k||x[0].width;I=I||x[0].height;m?qa=z(m):t&&!g&&(qa=R(k,I,Q,"depth","uint32"));J?T=z(J):g&&!t&&(T=R(k,I,!1,"stencil","uint8"));aa?wa=z(aa):!m&&!J&&g&&t&&(wa=R(k,I,Q,"depth stencil","depth stencil"));b(1>=!!m+!!J+!!aa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
t=null;for(h=0;h<x.length;++h)v(x[h],k,I),b(!x[h]||x[h].texture&&0<=L.indexOf(x[h].texture._texture.format)||x[h].renderbuffer&&0<=q.indexOf(x[h].renderbuffer._renderbuffer.format),"framebuffer color attachment "+h+" is invalid"),x[h]&&x[h].texture&&(g=e[x[h].texture._texture.format]*l[x[h].texture._texture.type],null===t?t=g:b(t===g,"all color attachments much have the same number of bits per pixel."));v(qa,k,I);b(!qa||qa.texture&&6402===qa.texture._texture.format||qa.renderbuffer&&33189===qa.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");v(T,k,I);b(!T||T.renderbuffer&&36168===T.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");v(wa,k,I);b(!wa||wa.texture&&34041===wa.texture._texture.format||wa.renderbuffer&&34041===wa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");S(f);f.width=k;f.height=I;f.colorAttachments=x;f.depthAttachment=qa;f.stencilAttachment=T;f.depthStencilAttachment=wa;c.color=x.map(ia);
c.depth=ia(qa);c.stencil=ia(T);c.depthStencil=ia(wa);c.width=f.width;c.height=f.height;X(f);return c}var f=new t;u.framebufferCount++;c(a,d);return K(c,{resize:function(a,d){b(w.next!==f,"can not resize a framebuffer which is currently in use");var l=Math.max(a|0,1),k=Math.max(d|0||l,1);if(l===f.width&&k===f.height)return c;for(var I=f.colorAttachments,t=0;t<I.length;++t)h(I[t],l,k);h(f.depthAttachment,l,k);h(f.stencilAttachment,l,k);h(f.depthStencilAttachment,l,k);f.width=c.width=l;f.height=c.height=
k;X(f);return c},_reglType:"framebuffer",_framebuffer:f,destroy:function(){k(f);S(f)},use:function(a){w.setFBO({framebuffer:c},a)}})}var w={cur:null,next:null,dirty:!1,setFBO:null},Y=["rgba"],D=["rgba4","rgb565","rgb5 a1"];B.ext_srgb&&D.push("srgba");B.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");B.webgl_color_buffer_float&&D.push("rgba32f");var E=["uint8"];B.oes_texture_half_float&&E.push("half float","float16");B.oes_texture_float&&E.push("float","float32");var d=0,I={};return K(w,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof t)?a:null},create:f,createCube:function(a){function d(a){var h;b(0>c.indexOf(w.next),"can not update framebuffer which is currently in use");var l={color:null},k=0,I=null;h="rgba";var t="uint8",q=1;if("number"===typeof a)k=a|0;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(k=a.shape,b(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),b(k[0]===k[1],"cube framebuffer must be square"),k=
k[0]):("radius"in a&&(k=a.radius|0),"width"in a?(k=a.width|0,"height"in a&&b(a.height===k,"must be square")):"height"in a&&(k=a.height|0));if("color"in a||"colors"in a)I=a.color||a.colors,Array.isArray(I)&&b(1===I.length||B.webgl_draw_buffers,"multiple render targets not supported");I||("colorCount"in a&&(q=a.colorCount|0,b(0<q,"invalid color buffer count")),"colorType"in a&&(b.oneOf(a.colorType,E,"invalid color type"),t=a.colorType),"colorFormat"in a&&(h=a.colorFormat,b.oneOf(a.colorFormat,Y,"invalid color format for texture")));
"depth"in a&&(l.depth=a.depth);"stencil"in a&&(l.stencil=a.stencil);"depthStencil"in a&&(l.depthStencil=a.depthStencil)}else k=1;if(I)if(Array.isArray(I))for(a=[],h=0;h<I.length;++h)a[h]=I[h];else a=[I];else for(a=Array(q),I={radius:k,format:h,type:t},h=0;h<q;++h)a[h]=U.createCube(I);l.color=Array(a.length);for(h=0;h<a.length;++h)q=a[h],b("function"===typeof q&&"textureCube"===q._reglType,"invalid cube map"),k=k||q.width,b(q.width===k&&q.height===k,"invalid cube map shape"),l.color[h]={target:34069,
data:a[h]};for(h=0;6>h;++h){for(q=0;q<a.length;++q)l.color[q].target=34069+h;0<h&&(l.depth=c[0].depth,l.stencil=c[0].stencil,l.depthStencil=c[0].depthStencil);if(c[h])c[h](l);else c[h]=f(l)}return K(d,{width:k,height:k,color:a})}var c=Array(6);d(a);return K(d,{faces:c,resize:function(a){var h=a|0;b(0<h&&h<=G.maxCubeMapSize,"invalid radius for cube fbo");if(h===d.width)return d;var l=d.color;for(a=0;a<l.length;++a)l[a].resize(h);for(a=0;6>a;++a)c[a].resize(h);d.width=d.height=h;return d},_reglType:"framebufferCube",
destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){da(I).forEach(k)},restore:function(){w.cur=null;w.next=null;w.dirty=!0;da(I).forEach(function(a){a.framebuffer=F.createFramebuffer();X(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(Z,ha,ab){var b=Z("./util/sorted-object-keys"),da=Z("./util/pool");ha.exports=function(K,L){var e=1;L.ext_texture_filter_anisotropic&&(e=K.getParameter(34047));var l=1,q=1;L.webgl_draw_buffers&&(l=K.getParameter(34852),
q=K.getParameter(36063));var c=!!L.oes_texture_float;if(c){c=K.createTexture();K.bindTexture(3553,c);K.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var F=K.createFramebuffer();K.bindFramebuffer(36160,F);K.framebufferTexture2D(36160,36064,3553,c,0);K.bindTexture(3553,null);if(36053!==K.checkFramebufferStatus(36160))c=!1;else{K.viewport(0,0,1,1);K.clearColor(1,0,0,1);K.clear(16384);var B=da.allocType(5126,4);K.readPixels(0,0,1,1,6408,5126,B);K.getError()?c=!1:(K.deleteFramebuffer(F),K.deleteTexture(c),
c=1===B[0]);da.freeType(B)}}B=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(B=K.createTexture(),F=da.allocType(5121,36),K.activeTexture(33984),K.bindTexture(34067,B),K.texImage2D(34069,0,6408,3,3,0,6408,5121,F),da.freeType(F),K.bindTexture(34067,null),K.deleteTexture(B),B=!K.getError());return{colorBits:[K.getParameter(3410),K.getParameter(3411),K.getParameter(3412),K.getParameter(3413)],depthBits:K.getParameter(3414),
stencilBits:K.getParameter(3415),subpixelBits:K.getParameter(3408),extensions:b(L).filter(function(c){return!!L[c]}),maxAnisotropic:e,maxDrawbuffers:l,maxColorAttachments:q,pointSizeDims:K.getParameter(33901),lineWidthDims:K.getParameter(33902),maxViewportDims:K.getParameter(3386),maxCombinedTextureUnits:K.getParameter(35661),maxCubeMapSize:K.getParameter(34076),maxRenderbufferSize:K.getParameter(34024),maxTextureUnits:K.getParameter(34930),maxTextureSize:K.getParameter(3379),maxAttributes:K.getParameter(34921),
maxVertexUniforms:K.getParameter(36347),maxVertexTextureUnits:K.getParameter(35660),maxVaryingVectors:K.getParameter(36348),maxFragmentUniforms:K.getParameter(36349),glsl:K.getParameter(35724),renderer:K.getParameter(7937),vendor:K.getParameter(7936),version:K.getParameter(7938),readFloat:c,npotTextureCube:B}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(Z,ha,ab){var b=Z("./util/check"),da=Z("./util/is-typed-array");ha.exports=function(K,L,e,l,q,c,F){function B(U){var n;null===
L.next?(b(q.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),n=5121):(b(null!==L.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),n=L.next.colorAttachments[0].texture._texture.type,b.optional(function(){c.oes_texture_float?(b(5121===n||5126===n,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===n&&b(F.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
b(5121===n,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var u=0,x=0,B=l.framebufferWidth,v=l.framebufferHeight,T=null;da(U)?T=U:U&&(b.type(U,"object","invalid arguments to regl.read()"),u=U.x|0,x=U.y|0,b(0<=u&&u<l.framebufferWidth,"invalid x offset for regl.read"),b(0<=x&&x<l.framebufferHeight,"invalid y offset for regl.read"),B=(U.width||l.framebufferWidth-u)|0,v=(U.height||l.framebufferHeight-x)|0,T=U.data||null);T&&(5121===n?b(T instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===n&&b(T instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));b(0<B&&B+u<=l.framebufferWidth,"invalid width for read pixels");b(0<v&&v+x<=l.framebufferHeight,"invalid height for read pixels");e();U=B*v*4;T||(5121===n?T=new Uint8Array(U):5126===n&&(T=T||new Float32Array(U)));b.isTypedArray(T,"data buffer for regl.read() must be a typedarray");b(T.byteLength>=U,"data buffer for regl.read() too small");K.pixelStorei(3333,4);K.readPixels(u,x,B,
v,6408,n,T);return T}function G(c){var l;L.setFBO({framebuffer:c.framebuffer},function(){l=B(c)});return l}return function(c){return c&&"framebuffer"in c?G(c):B(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(Z,ha,ab){var b=Z("./util/sorted-object-keys"),da=Z("./util/check"),K=Z("./util/values"),L=[];L[32854]=2;L[32855]=2;L[36194]=2;L[33189]=2;L[36168]=1;L[34041]=4;L[35907]=4;L[34836]=16;L[34842]=8;L[34843]=6;ha.exports=function(e,l,q,c,F){function B(c){this.id=u++;this.refCount=
1;this.renderbuffer=c;this.format=32854;this.height=this.width=0;F.profile&&(this.stats={size:0})}function G(l){var q=l.renderbuffer;da(q,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(q);l.renderbuffer=null;l.refCount=0;delete x[l.id];c.renderbufferCount--}var U={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};l.ext_srgb&&(U.srgba=35907);l.ext_color_buffer_half_float&&(U.rgba16f=34842,U.rgb16f=34843);l.webgl_color_buffer_float&&
(U.rgba32f=34836);var n=[];b(U).forEach(function(c){n[U[c]]=c});var u=0,x={};B.prototype.decRef=function(){0>=--this.refCount&&G(this)};F.profile&&(c.getTotalRenderbufferSize=function(){var c=0;b(x).forEach(function(l){c+=x[l].stats.size});return c});return{create:function(l,v){function b(c,l){var h=0,t=0,S=32854;"object"===typeof c&&c?("shape"in c?(t=c.shape,da(Array.isArray(t)&&2<=t.length,"invalid renderbuffer shape"),h=t[0]|0,t=t[1]|0):("radius"in c&&(h=t=c.radius|0),"width"in c&&(h=c.width|0),
"height"in c&&(t=c.height|0)),"format"in c&&(da.parameter(c.format,U,"invalid renderbuffer format"),S=U[c.format])):"number"===typeof c?(h=c|0,t="number"===typeof l?l|0:h):c?da.raise("invalid arguments to renderbuffer constructor"):h=t=1;da(0<h&&0<t&&h<=q.maxRenderbufferSize&&t<=q.maxRenderbufferSize,"invalid renderbuffer size");if(h!==z.width||t!==z.height||S!==z.format)return b.width=z.width=h,b.height=z.height=t,z.format=S,e.bindRenderbuffer(36161,z.renderbuffer),e.renderbufferStorage(36161,S,
h,t),da(0===e.getError(),"invalid render buffer format"),F.profile&&(z.stats.size=L[z.format]*z.width*z.height),b.format=n[z.format],b}var z=new B(e.createRenderbuffer());x[z.id]=z;c.renderbufferCount++;b(l,v);b.resize=function(c,l){var h=c|0,t=l|0||h;if(h===z.width&&t===z.height)return b;da(0<h&&0<t&&h<=q.maxRenderbufferSize&&t<=q.maxRenderbufferSize,"invalid renderbuffer size");b.width=z.width=h;b.height=z.height=t;e.bindRenderbuffer(36161,z.renderbuffer);e.renderbufferStorage(36161,z.format,h,
t);da(0===e.getError(),"invalid render buffer format");F.profile&&(z.stats.size=L[z.format]*z.width*z.height);return b};b._reglType="renderbuffer";b._renderbuffer=z;F.profile&&(b.stats=z.stats);b.destroy=function(){z.decRef()};return b},clear:function(){K(x).forEach(G)},restore:function(){K(x).forEach(function(c){c.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,c.renderbuffer);e.renderbufferStorage(36161,c.format,c.width,c.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,
"./util/sorted-object-keys":34,"./util/values":36}],16:[function(Z,ha,ab){var b=Z("./util/sorted-object-keys"),da=Z("./util/check"),K=Z("./util/extend"),L=Z("./util/values");ha.exports=function(e,l,q,c){function F(c,l,q,h){this.name=c;this.id=l;this.location=q;this.info=h}function B(c,l){for(var q=0;q<c.length;++q)if(c[q].id===l.id){c[q].location=l.location;return}c.push(l)}function G(c,q,v){var h=35632===c?u:x,t=h[q];if(!t){var S=l.str(q),t=e.createShader(c);e.shaderSource(t,S);e.compileShader(t);
da.shaderError(e,t,S,c,v);h[q]=t}return t}function U(l,q){this.id=T++;this.fragId=l;this.vertId=q;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;c.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function n(q,v,b){var h;h=G(35632,q.fragId);var t=G(35633,q.vertId),S=q.program=e.createProgram();e.attachShader(S,h);e.attachShader(S,t);if(b)for(h=0;h<b.length;++h)t=b[h],e.bindAttribLocation(S,t[0],t[1]);e.linkProgram(S);da.linkError(e,S,l.str(q.fragId),l.str(q.vertId),
v);b=e.getProgramParameter(S,35718);c.profile&&(q.stats.uniformsCount=b);t=q.uniforms;for(h=0;h<b;++h)if(v=e.getActiveUniform(S,h))if(1<v.size)for(var k=0;k<v.size;++k){var u=v.name.replace("[0]","["+k+"]");B(t,new F(u,l.id(u),e.getUniformLocation(S,u),v))}else B(t,new F(v.name,l.id(v.name),e.getUniformLocation(S,v.name),v));b=e.getProgramParameter(S,35721);c.profile&&(q.stats.attributesCount=b);q=q.attributes;for(h=0;h<b;++h)(v=e.getActiveAttrib(S,h))&&B(q,new F(v.name,l.id(v.name),e.getAttribLocation(S,
v.name),v))}var u={},x={},ba={},v=[],T=0;c.profile&&(q.getMaxUniformsCount=function(){var c=0;v.forEach(function(l){l.stats.uniformsCount>c&&(c=l.stats.uniformsCount)});return c},q.getMaxAttributesCount=function(){var c=0;v.forEach(function(l){l.stats.attributesCount>c&&(c=l.stats.attributesCount)});return c});return{clear:function(){var c=e.deleteShader.bind(e);L(u).forEach(c);u={};L(x).forEach(c);x={};v.forEach(function(c){e.deleteProgram(c.program)});v.length=0;ba={};q.shaderCount=0},program:function(c,
l,L,h){da.command(0<=c,"missing vertex shader",L);da.command(0<=l,"missing fragment shader",L);var t=ba[l];t||(t=ba[l]={});var S=t[c];if(S&&(S.refCount++,!h))return S;var k=new U(l,c);q.shaderCount++;n(k,L,h);S||(t[c]=k);v.push(k);return K(k,{destroy:function(){k.refCount--;if(0>=k.refCount){e.deleteProgram(k.program);var c=v.indexOf(k);v.splice(c,1);q.shaderCount--}0>=t[k.vertId].refCount&&(e.deleteShader(x[k.vertId]),delete x[k.vertId],delete ba[k.fragId][k.vertId]);b(ba[k.fragId]).length||(e.deleteShader(u[k.fragId]),
delete u[k.fragId],delete ba[k.fragId])}})},restore:function(){u={};x={};for(var c=0;c<v.length;++c)n(v[c],null,v[c].attributes.map(function(c){return[c.location,c.name]}))},shader:G,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(Z,ha,ab){ha.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(Z,
ha,ab){ha.exports=function(){var b={"":0},da=[""];return{id:function(K){var L=b[K];if(L)return L;L=b[K]=da.length;da.push(K);return L},str:function(b){return da[b]}}}},{}],19:[function(Z,ha,ab){function b(d){return"[object "+d+"]"}function da(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function K(d){return Array.isArray(d)&&0!==d.length&&ba(d[0])?!0:!1}function L(d){return Object.prototype.toString.call(d)}function e(d){if(!d)return!1;var c=L(d);return 0<=Y.indexOf(c)?!0:da(d)||
K(d)||n(d)}function l(d,c){36193===d.type?(d.data=x(c),u.freeType(c)):d.data=c}function q(d,c,a,l,k,f){d="undefined"!==typeof E[d]?E[d]:h[d]*D[c];f&&(d*=6);if(k){for(l=0;1<=a;)l+=d*a*a,a/=2;return l}return d*a*l}var c=Z("./util/sorted-object-keys"),F=Z("./util/check"),B=Z("./util/extend"),G=Z("./util/values"),U=Z("./util/is-typed-array"),n=Z("./util/is-ndarray"),u=Z("./util/pool"),x=Z("./util/to-half-float"),ba=Z("./util/is-array-like"),v=Z("./util/flatten"),T=Z("./util/is-pow2");ab=Z("./constants/arraytypes.json");
var z=Z("./constants/arraytypes.json"),R=[9984,9986,9985,9987],ia=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;h[6408]=h[35906]=4;var t=b("HTMLCanvasElement"),S=b("OffscreenCanvas"),k=b("CanvasRenderingContext2D"),X=b("ImageBitmap"),f=b("HTMLImageElement"),w=b("HTMLVideoElement"),Y=c(ab).concat([t,S,k,X,f,w]),D=[];D[5121]=1;D[5126]=4;D[36193]=2;D[5123]=2;D[5125]=4;var E=[];E[32854]=2;E[32855]=2;E[36194]=2;E[34041]=4;E[33776]=.5;E[33777]=.5;E[33778]=
1;E[33779]=1;E[35986]=.5;E[35987]=1;E[34798]=1;E[35840]=.5;E[35841]=.25;E[35842]=.5;E[35843]=.25;E[36196]=.5;ha.exports=function(d,I,a,b,A,E,D){function V(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(a,d){a.internalformat=d.internalformat;a.format=d.format;a.type=d.type;a.compressed=d.compressed;a.premultiplyAlpha=d.premultiplyAlpha;a.flipY=d.flipY;
a.unpackAlignment=d.unpackAlignment;a.colorSpace=d.colorSpace;a.width=d.width;a.height=d.height;a.channels=d.channels}function O(d,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(F.type(c.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),d.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(F.type(c.flipY,"boolean","invalid texture flip"),d.flipY=c.flipY);"alignment"in c&&(F.oneOf(c.alignment,[1,2,4,8],"invalid texture unpack alignment"),d.unpackAlignment=c.alignment);"colorSpace"in c&&
(F.parameter(c.colorSpace,Ta,"invalid colorSpace"),d.colorSpace=Ta[c.colorSpace]);if("type"in c){var g=c.type;F(I.oes_texture_float||!("float"===g||"float32"===g),"you must enable the OES_texture_float extension in order to use floating point textures.");F(I.oes_texture_half_float||!("half float"===g||"float16"===g),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");F(I.webgl_depth_texture||!("uint16"===g||"uint32"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
F.parameter(g,r,"invalid texture type");d.type=r[g]}var m=d.width,l=d.height,k=d.channels,g=!1;"shape"in c?(F(Array.isArray(c.shape)&&2<=c.shape.length,"shape must be an array"),m=c.shape[0],l=c.shape[1],3===c.shape.length&&(k=c.shape[2],F(0<k&&4>=k,"invalid number of channels"),g=!0),F(0<=m&&m<=a.maxTextureSize,"invalid width"),F(0<=l&&l<=a.maxTextureSize,"invalid height")):("radius"in c&&(m=l=c.radius,F(0<=m&&m<=a.maxTextureSize,"invalid radius")),"width"in c&&(m=c.width,F(0<=m&&m<=a.maxTextureSize,
"invalid width")),"height"in c&&(l=c.height,F(0<=l&&l<=a.maxTextureSize,"invalid height")),"channels"in c&&(k=c.channels,F(0<k&&4>=k,"invalid number of channels"),g=!0));d.width=m|0;d.height=l|0;d.channels=k|0;m=!1;"format"in c&&(m=c.format,F(I.webgl_depth_texture||!("depth"===m||"depth stencil"===m),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(m,p,"invalid texture format"),l=d.internalformat=p[m],d.format=Ca[l],m in r&&!("type"in c)&&(d.type=
r[m]),m in y&&(d.compressed=!0),m=!0);!g&&m?d.channels=h[d.format]:g&&!m?d.channels!==ia[d.format]&&(d.format=d.internalformat=ia[d.channels]):m&&g&&F(d.channels===h[d.format],"number of channels inconsistent with specified format")}}function P(a){d.pixelStorei(37440,a.flipY);d.pixelStorei(37441,a.premultiplyAlpha);d.pixelStorei(37443,a.colorSpace);d.pixelStorei(3317,a.unpackAlignment)}function C(){V.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function g(d,c){var g=null;e(c)?g=c:c&&(F.type(c,"object","invalid pixel data type"),O(d,c),"x"in c&&(d.xOffset=c.x|0),"y"in c&&(d.yOffset=c.y|0),e(c.data)&&(g=c.data));F(!d.compressed||g instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){F(!g,"can not specify copy and data field for the same texture");var r=A.viewportWidth,m=A.viewportHeight;d.width=d.width||r-d.xOffset;d.height=d.height||m-d.yOffset;d.needsCopy=!0;F(0<=d.xOffset&&d.xOffset<r&&0<=d.yOffset&&
d.yOffset<m&&0<d.width&&d.width<=r&&0<d.height&&d.height<=m,"copy texture read out of bounds")}else if(!g)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(U(g))d.channels=d.channels||4,d.data=g,"type"in c||5121!==d.type||(d.type=z[Object.prototype.toString.call(g)]|0);else if(da(g)){d.channels=d.channels||4;r=g;m=r.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:m=u.allocType(d.type,m);m.set(r);d.data=m;break;case 36193:d.data=x(r);break;default:F.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(n(g)){r=g.data;Array.isArray(r)||5121!==d.type||(d.type=z[Object.prototype.toString.call(r)]|0);var m=g.shape,h=g.stride,p,H,y,q;3===m.length?(y=m[2],q=h[2]):(F(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),q=y=1);p=m[0];H=m[1];m=h[0];h=h[1];d.alignment=1;d.width=p;d.height=H;d.channels=y;d.format=d.internalformat=ia[y];d.needsFree=!0;p=q;g=g.offset;y=d.width;q=d.height;H=d.channels;for(var I=u.allocType(36193===d.type?5126:d.type,y*q*H),na=0,sa=0;sa<q;++sa)for(var Ja=
0;Ja<y;++Ja)for(var Ca=0;Ca<H;++Ca)I[na++]=r[m*Ja+h*sa+p*Ca+g];l(d,I)}else if(L(g)===t||L(g)===S||L(g)===k)L(g)===t||L(g)===S?d.element=g:d.element=g.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(L(g)===X)d.element=g,d.width=g.width,d.height=g.height,d.channels=4;else if(L(g)===f)d.element=g,d.width=g.naturalWidth,d.height=g.naturalHeight,d.channels=4;else if(L(g)===w)d.element=g,d.width=g.videoWidth,d.height=g.videoHeight,d.channels=4;else if(K(g)){r=d.width||g[0].length;
m=d.height||g.length;h=d.channels;h=ba(g[0][0])?h||g[0][0].length:h||1;p=v.shape(g);y=1;for(q=0;q<p.length;++q)y*=p[q];y=u.allocType(36193===d.type?5126:d.type,y);v.flatten(g,p,"",y);l(d,y);d.alignment=1;d.width=r;d.height=m;d.channels=h;d.format=d.internalformat=ia[h];d.needsFree=!0}5126===d.type?F(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&F(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function N(a,c,g,r,m){var h=a.element,p=a.data,l=a.internalformat,k=a.format,f=a.type,H=a.width,y=a.height;P(a);h?d.texSubImage2D(c,m,g,r,k,f,h):a.compressed?d.compressedTexSubImage2D(c,m,g,r,l,H,y,p):a.needsCopy?(b(),d.copyTexSubImage2D(c,m,g,r,a.xOffset,a.yOffset,H,y)):d.texSubImage2D(c,m,g,r,H,y,k,f,p)}function M(){return ra.pop()||new C}function Da(a){a.needsFree&&u.freeType(a.data);C.call(a);ra.push(a)}function pa(){V.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function m(a,d,c){var g=a.images[0]=M();a.mipmask=1;g.width=a.width=d;g.height=a.height=c;g.channels=a.channels=4}function J(a,d){var c=null;if(e(d))c=a.images[0]=M(),ea(c,a),g(c,d),a.mipmask=1;else if(O(a,d),Array.isArray(d.mipmap))for(var r=d.mipmap,m=0;m<r.length;++m)c=a.images[m]=M(),ea(c,a),c.width>>=m,c.height>>=m,g(c,r[m]),a.mipmask|=1<<m;else c=a.images[0]=M(),ea(c,a),g(c,d),a.mipmask=1;ea(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||F(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function aa(a,c){for(var g=a.images,r=0;r<g.length&&g[r];++r){var m=g[r],h=c,p=r,l=m.element,k=m.data,f=m.internalformat,H=m.format,y=m.type,q=m.width,I=m.height;P(m);l?d.texImage2D(h,p,H,H,y,l):m.compressed?d.compressedTexImage2D(h,p,f,q,I,0,k):m.needsCopy?(b(),d.copyTexImage2D(h,p,H,m.xOffset,m.yOffset,q,I,0)):d.texImage2D(h,
p,H,q,I,0,H,y,k||null)}}function Q(){var a=xa.pop()||new pa;V.call(a);for(var d=a.mipmask=0;16>d;++d)a.images[d]=null;return a}function ma(a){for(var d=a.images,c=0;c<d.length;++c)d[c]&&Da(d[c]),d[c]=null;xa.push(a)}function qa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Y(d,c){if("min"in c){var g=c.min;F.parameter(g,Xa);d.minFilter=Xa[g];0<=R.indexOf(d.minFilter)&&!("faces"in c)&&(d.genMipmaps=!0)}"mag"in c&&
(g=c.mag,F.parameter(g,na),d.magFilter=na[g]);var g=d.wrapS,r=d.wrapT;if("wrap"in c){var m=c.wrap;"string"===typeof m?(F.parameter(m,Ja),g=r=Ja[m]):Array.isArray(m)&&(F.parameter(m[0],Ja),F.parameter(m[1],Ja),g=Ja[m[0]],r=Ja[m[1]])}else"wrapS"in c&&(g=c.wrapS,F.parameter(g,Ja),g=Ja[g]),"wrapT"in c&&(r=c.wrapT,F.parameter(r,Ja),r=Ja[r]);d.wrapS=g;d.wrapT=r;"anisotropic"in c&&(g=c.anisotropic,F("number"===typeof g&&1<=g&&g<=a.maxAnisotropic,"aniso samples must be between 1 and "),d.anisotropic=c.anisotropic);
if("mipmap"in c){g=!1;switch(typeof c.mipmap){case "string":F.parameter(c.mipmap,ya,"invalid mipmap hint");d.mipmapHint=ya[c.mipmap];g=d.genMipmaps=!0;break;case "boolean":g=d.genMipmaps=c.mipmap;break;case "object":F(Array.isArray(c.mipmap),"invalid mipmap type");d.genMipmaps=!1;g=!0;break;default:F.raise("invalid mipmap type")}!g||"min"in c||(d.minFilter=9984)}}function wa(a,c){d.texParameteri(c,10241,a.minFilter);d.texParameteri(c,10240,a.magFilter);d.texParameteri(c,10242,a.wrapS);d.texParameteri(c,
10243,a.wrapT);I.ext_texture_filter_anisotropic&&d.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(d.hint(33170,a.mipmapHint),d.generateMipmap(c))}function fa(a){V.call(this);this.mipmask=0;this.internalformat=6408;this.id=Fa++;this.refCount=1;this.target=a;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new qa;D.profile&&(this.stats={size:0})}function Ba(a){d.activeTexture(33984);d.bindTexture(a.target,a.texture)}function ka(){var a=ua[0];a?d.bindTexture(a.target,a.texture):
d.bindTexture(3553,null)}function oa(a){var c=a.texture;F(c,"must not double destroy texture");var g=a.unit,m=a.target;0<=g&&(d.activeTexture(33984+g),d.bindTexture(m,null),ua[g]=null);d.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete la[a.id];E.textureCount--}var ya={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ja={repeat:10497,clamp:33071,mirror:33648},na={nearest:9728,linear:9729},Xa=B({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},na),Ta={none:0,browser:37444},r={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},p={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};I.ext_srgb&&(p.srgb=35904,p.srgba=35906);I.oes_texture_float&&(r.float32=r["float"]=5126);I.oes_texture_half_float&&(r.float16=r["half float"]=36193);I.webgl_depth_texture&&(B(p,{depth:6402,"depth stencil":34041}),B(r,{uint16:5123,uint32:5125,
"depth stencil":34042}));I.webgl_compressed_texture_s3tc&&B(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});I.webgl_compressed_texture_atc&&B(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});I.webgl_compressed_texture_pvrtc&&B(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});I.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var va=Array.prototype.slice.call(d.getParameter(34467));
c(y).forEach(function(a){var d=y[a];0<=va.indexOf(d)&&(p[a]=d)});var Ea=c(p);a.textureFormats=Ea;var Bd=[];c(p).forEach(function(a){Bd[p[a]]=a});var Hb=[];c(r).forEach(function(a){Hb[r[a]]=a});var ga=[];c(na).forEach(function(a){ga[na[a]]=a});var H=[];c(Xa).forEach(function(a){H[Xa[a]]=a});var sa=[];c(Ja).forEach(function(a){sa[Ja[a]]=a});var Ca=Ea.reduce(function(a,d){var c=p[d];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||I.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=d.indexOf("rgba")?
a[c]=6408:a[c]=6407;return a},{}),ra=[],xa=[],Fa=0,la={},W=a.maxTextureUnits,ua=Array(W).map(function(){return null});B(fa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<W;++c){var g=ua[c];if(g){if(0<g.bindCount)continue;g.unit=-1}ua[c]=this;a=c;break}a>=W&&F.raise("insufficient number of texture units");D.profile&&E.maxTextureUnits<a+1&&(E.maxTextureUnits=a+1);this.unit=a;d.activeTexture(33984+a);d.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&oa(this)}});D.profile&&(E.getTotalTextureSize=function(){var a=0;c(la).forEach(function(d){a+=la[d].stats.size});return a});return{create2D:function(c,r){function h(d,c){var g=p.texInfo;qa.call(g);var r=Q();"number"===typeof d?"number"===typeof c?m(r,d|0,c|0):m(r,d|0,d|0):d?(F.type(d,"object","invalid arguments to regl.texture"),Y(g,d),J(r,d)):m(r,1,1);g.genMipmaps&&(r.mipmask=(r.width<<1)-1);p.mipmask=r.mipmask;ea(p,r);F.texture2D(g,r,a);p.internalformat=r.internalformat;
h.width=r.width;h.height=r.height;Ba(p);aa(r,3553);wa(g,3553);ka();ma(r);D.profile&&(p.stats.size=q(p.internalformat,p.type,r.width,r.height,g.genMipmaps,!1));h.format=Bd[p.internalformat];h.type=Hb[p.type];h.mag=ga[g.magFilter];h.min=H[g.minFilter];h.wrapS=sa[g.wrapS];h.wrapT=sa[g.wrapT];return h}var p=new fa(3553);la[p.id]=p;E.textureCount++;h(c,r);h.subimage=function(a,d,c,r){F(!!a,"must specify image data");d|=0;c|=0;r|=0;var m=M();ea(m,p);m.width=0;m.height=0;g(m,a);m.width=m.width||(p.width>>
r)-d;m.height=m.height||(p.height>>r)-c;F(p.type===m.type&&p.format===m.format&&p.internalformat===m.internalformat,"incompatible format for texture.subimage");F(0<=d&&0<=c&&d+m.width<=p.width&&c+m.height<=p.height,"texture.subimage write out of bounds");F(p.mipmask&1<<r,"missing mipmap data");F(m.data||m.element||m.needsCopy,"missing image data");Ba(p);N(m,3553,d,c,r);ka();Da(m);return h};h.resize=function(a,c){var g=a|0,r=c|0||g;if(g===p.width&&r===p.height)return h;h.width=p.width=g;h.height=p.height=
r;Ba(p);for(var m=0;p.mipmask>>m;++m){var l=g>>m,k=r>>m;if(!l||!k)break;d.texImage2D(3553,m,p.format,l,k,0,p.format,p.type,null)}ka();D.profile&&(p.stats.size=q(p.internalformat,p.type,g,r,!1,!1));return h};h._reglType="texture2d";h._texture=p;D.profile&&(h.stats=p.stats);h.destroy=function(){p.decRef()};return h},createCube:function(c,r,h,p,l,k){function f(d,c,g,r,h,p){var l,k=y.texInfo;qa.call(k);for(l=0;6>l;++l)I[l]=Q();if("number"!==typeof d&&d)if("object"===typeof d)if(c)J(I[0],d),J(I[1],c),
J(I[2],g),J(I[3],r),J(I[4],h),J(I[5],p);else if(Y(k,d),O(y,d),"faces"in d)for(d=d.faces,F(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),l=0;6>l;++l)F("object"===typeof d[l]&&!!d[l],"invalid input for cube map face"),ea(I[l],y),J(I[l],d[l]);else for(l=0;6>l;++l)J(I[l],d);else F.raise("invalid arguments to cube map");else for(d=d|0||1,l=0;6>l;++l)m(I[l],d,d);ea(y,I[0]);F.optional(function(){a.npotTextureCube||F(T(y.width)&&T(y.height),"your browser does not support non power or two texture dimensions")});
y.mipmask=k.genMipmaps?(I[0].width<<1)-1:I[0].mipmask;F.textureCube(y,k,I,a);y.internalformat=I[0].internalformat;f.width=I[0].width;f.height=I[0].height;Ba(y);for(l=0;6>l;++l)aa(I[l],34069+l);wa(k,34067);ka();D.profile&&(y.stats.size=q(y.internalformat,y.type,f.width,f.height,k.genMipmaps,!0));f.format=Bd[y.internalformat];f.type=Hb[y.type];f.mag=ga[k.magFilter];f.min=H[k.minFilter];f.wrapS=sa[k.wrapS];f.wrapT=sa[k.wrapT];for(l=0;6>l;++l)ma(I[l]);return f}var y=new fa(34067);la[y.id]=y;E.cubeCount++;
var I=Array(6);f(c,r,h,p,l,k);f.subimage=function(a,d,c,r,m){F(!!d,"must specify image data");F("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;r|=0;m|=0;var h=M();ea(h,y);h.width=0;h.height=0;g(h,d);h.width=h.width||(y.width>>m)-c;h.height=h.height||(y.height>>m)-r;F(y.type===h.type&&y.format===h.format&&y.internalformat===h.internalformat,"incompatible format for texture.subimage");F(0<=c&&0<=r&&c+h.width<=y.width&&r+h.height<=y.height,"texture.subimage write out of bounds");F(y.mipmask&
1<<m,"missing mipmap data");F(h.data||h.element||h.needsCopy,"missing image data");Ba(y);N(h,34069+a,c,r,m);ka();Da(h);return f};f.resize=function(a){a|=0;if(a!==y.width){f.width=y.width=a;f.height=y.height=a;Ba(y);for(var c=0;6>c;++c)for(var g=0;y.mipmask>>g;++g)d.texImage2D(34069+c,g,y.format,a>>g,a>>g,0,y.format,y.type,null);ka();D.profile&&(y.stats.size=q(y.internalformat,y.type,f.width,f.height,!1,!0));return f}};f._reglType="textureCube";f._texture=y;D.profile&&(f.stats=y.stats);f.destroy=function(){y.decRef()};
return f},clear:function(){for(var a=0;a<W;++a)d.activeTexture(33984+a),d.bindTexture(3553,null),ua[a]=null;G(la).forEach(oa);E.cubeCount=0;E.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<W;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null)}G(la).forEach(function(a){a.texture=d.createTexture();d.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)d.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,
a.type,null);else for(var g=0;6>g;++g)d.texImage2D(34069+g,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);wa(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<W;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null);d.activeTexture(33984+a);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(Z,ha,ab){ha.exports=function(b,da){function K(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function L(l,e,b){var u=q.pop()||new K;u.startQueryIndex=l;u.endQueryIndex=e;u.sum=0;u.stats=b;c.push(u)}if(!da.ext_disjoint_timer_query)return null;var e=[],l=[],q=[],c=[],F=[],B=[];return{beginQuery:function(c){var q=e.pop()||da.ext_disjoint_timer_query.createQueryEXT();da.ext_disjoint_timer_query.beginQueryEXT(35007,
q);l.push(q);L(l.length-1,l.length,c)},endQuery:function(){da.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:L,update:function(){var b,L;b=l.length;if(0!==b){B.length=Math.max(B.length,b+1);F.length=Math.max(F.length,b+1);F[0]=0;var n=B[0]=0;for(L=b=0;L<l.length;++L){var u=l[L];da.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(n+=da.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),e.push(u)):l[b++]=u;F[L+1]=n;B[L+1]=b}l.length=b;for(L=b=0;L<c.length;++L){var n=c[L],x=n.startQueryIndex,
u=n.endQueryIndex;n.sum+=F[u]-F[x];x=B[x];u=B[u];u===x?(n.stats.gpuTime+=n.sum/1E6,q.push(n)):(n.startQueryIndex=x,n.endQueryIndex=u,c[b++]=n)}c.length=b}},getNumPendingQueries:function(){return l.length},clear:function(){e.push.apply(e,l);for(var c=0;c<e.length;c++)da.ext_disjoint_timer_query.deleteQueryEXT(e[c]);l.length=0;e.length=0},restore:function(){l.length=0;e.length=0}}}},{}],21:[function(Z,ha,ab){function b(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function da(c){c=Error("(regl) "+
c);console.error(c);throw c;}function K(c,h){c||da(h)}function L(c){return c?": "+c:""}function e(c,h){switch(h){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function l(c,h,l){0>h.indexOf(c)&&da("invalid value"+L(l)+". must be one of: "+h)}function q(c,
h){for(c+="";c.length<h;)c=" "+c;return c}function c(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function F(c,h){this.number=c;this.line=h;this.errors=[]}function B(c,h,l){this.file=c;this.line=h;this.message=l}function G(){var c=Error(),c=(c.stack||c).toString(),h=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return h?h[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function U(){var c=Error(),c=(c.stack||c).toString(),h=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return h?h[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function n(h,l){var q=h.split("\n"),f=1,w=0,t={unknown:new c,0:new c};t.unknown.name=t[0].name=l||G();t.unknown.lines.push(new F(0,""));for(var e=0;e<q.length;++e){var v=q[e],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(v);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))f=d[1]|0,d[2]&&(w=d[2]|0,w in t||(t[w]=new c));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))t[w].name=d[1]?b(d[2]):d[2]}t[w].lines.push(new F(f++,
v))}R(t).forEach(function(d){var a=t[d];a.lines.forEach(function(d){a.index[d.number]=d})});return t}function u(c){var h=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var l=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);l?h.push(new B(l[1]|0,l[2]|0,l[3].trim())):0<c.length&&h.push(new B("unknown",0,c))}});return h}function x(c,h){h.forEach(function(h){var l=c[h.file];if(l){var k=l.index[h.line];if(k){k.errors.push(h);l.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(h)})}
function ba(c){c._commandRef=G()}function v(c,h){var l=U();da(c+" in command "+(h||G())+("unknown"===l?"":" called from "+l))}function T(c,h,l,f){e(c,h)||v("invalid parameter type"+L(l)+". expected "+h+", got "+typeof c,f||G())}function z(c,h){return 32820===c||32819===c||33635===c?2:34042===c?4:t[c]*h}var R=Z("./sorted-object-keys"),ia=Z("./is-typed-array");Z=Z("./extend");var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),t={};t[5120]=t[5121]=
1;t[5122]=t[5123]=t[36193]=t[33635]=t[32819]=t[32820]=2;t[5124]=t[5125]=t[5126]=t[34042]=4;ha.exports=Z(K,{optional:function(c){c()},raise:da,commandRaise:v,command:function(c,h,l){c||v(h,l||G())},parameter:function(c,h,l){c in h||da("unknown parameter ("+c+")"+L(l)+". possible values: "+R(h).join())},commandParameter:function(c,h,l,f){c in h||v("unknown parameter ("+c+")"+L(l)+". possible values: "+R(h).join(),f||G())},constructor:function(c){R(c).forEach(function(c){0>h.indexOf(c)&&da('invalid regl constructor argument "'+
c+'". must be one of '+h)})},type:function(c,h,l){e(c,h)||da("invalid parameter type"+L(l)+". expected "+h+", got "+typeof c)},commandType:T,isTypedArray:function(c,h){ia(c)||da("invalid parameter type"+L(h)+". must be a typed array")},nni:function(c,h){0<=c&&(c|0)===c||da("invalid parameter type, ("+c+")"+L(h)+". must be a nonnegative integer")},oneOf:l,shaderError:function(c,h,l,f,w){if(!c.getShaderParameter(h,c.COMPILE_STATUS)){h=c.getShaderInfoLog(h);c=f===c.FRAGMENT_SHADER?"fragment":"vertex";
T(l,"string",c+" shader source must be a string",w);var t=n(l,w);l=u(h);x(t,l);R(t).forEach(function(c){function h(d,c){l.push(d);a.push(c||"")}var d=t[c];if(d.hasErrors){var l=[""],a=[""];h("file number "+c+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(a){if(0<a.errors.length){h(q(a.number,4)+"|  ","background-color:yellow; font-weight:bold");h(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var d=0;a.errors.forEach(function(c){c=
c.message;var l=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(l){var f=l[1];c=l[2];switch(f){case "assign":f="="}d=Math.max(a.line.indexOf(f,d),0)}else d=0;h(q("| ",6));h(q("^^^",d+3)+"\n","font-weight:bold");h(q("| ",6));h(c+"\n","font-weight:bold")});h(q("| ",6)+"\n")}else h(q(a.number,4)+"|  "),h(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(l.join("")):(a[0]=l.join("%c"),console.log.apply(console,a))}});K.raise("Error compiling "+c+" shader, "+t[0].name)}},linkError:function(c,
h,l,f,q){c.getProgramParameter(h,c.LINK_STATUS)||(c=c.getProgramInfoLog(h),l=n(l,q),f='Error linking program with vertex shader, "'+n(f,q)[0].name+'", and fragment shader "'+l[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+c),K.raise(f))},callSite:U,saveCommandRef:ba,saveDrawInfo:function(c,h,l,f){function q(c){return c?f.id(c):0}function t(c,d){R(d).forEach(function(d){c[f.id(d)]=!0})}ba(c);
c._fragId=q(c["static"].frag);c._vertId=q(c["static"].vert);var e=c._uniformSet={};t(e,h["static"]);t(e,h.dynamic);h=c._attributeSet={};t(h,l["static"]);t(h,l.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,h,q){c.texture?l(c.texture._texture.internalformat,h,"unsupported texture format for attachment"):l(c.renderbuffer._renderbuffer.format,q,"unsupported renderbuffer format for attachment")},guessCommand:G,
texture2D:function(c,h,l){var f=h.width,q=h.height,t=h.channels;K(0<f&&f<=l.maxTextureSize&&0<q&&q<=l.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||K(!(f&f-1)&&!!f&&!(q&q-1)&&!!q,"incompatible wrap mode for texture, both width and height must be power of 2");1===h.mipmask?1!==f&&1!==q&&K(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(K(!(f&f-1)&&!!f&&!(q&q-1)&&!!q,"texture must be a square power of 2 to support mipmapping"),
K(h.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===h.type&&(0>l.extensions.indexOf("oes_texture_float_linear")&&K(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),K(!c.genMipmaps,"mipmap generation not supported with float textures"));var e=h.images;for(l=0;16>l;++l)if(e[l]){var v=f>>l,d=q>>l;K(h.mipmask&1<<l,"missing mipmap data");var I=e[l];K(I.width===v&&I.height===d,"invalid shape for mip images");K(I.format===h.format&&I.internalformat===
h.internalformat&&I.type===h.type,"incompatible type for mip image");!I.compressed&&I.data&&(v=Math.ceil(z(I.type,t)*v/I.unpackAlignment)*I.unpackAlignment,K(I.data.byteLength===v*d,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||K(0===(h.mipmask&1<<l),"extra mipmap data");h.compressed&&K(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,h,l,f){var q=c.width,t=c.height,e=c.channels;K(0<q&&q<=f.maxTextureSize&&
0<t&&t<=f.maxTextureSize,"invalid texture shape");K(q===t,"cube map must be square");K(33071===h.wrapS&&33071===h.wrapT,"wrap mode not supported by cube map");for(f=0;f<l.length;++f){var v=l[f];K(v.width===q&&v.height===t,"inconsistent cube map face shape");h.genMipmaps&&(K(!v.compressed,"can not generate mipmap for compressed textures"),K(1===v.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=v.images,I=0;16>I;++I){var a=d[I];if(a){var b=q>>I,u=t>>I;K(v.mipmask&1<<I,"missing mipmap data");
K(a.width===b&&a.height===u,"invalid shape for mip images");K(a.format===c.format&&a.internalformat===c.internalformat&&a.type===c.type,"incompatible type for mip image");a.compressed||a.data&&K(a.data.byteLength===b*u*Math.max(z(a.type,e),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(Z,ha,ab){ha.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(Z,ha,ab){function b(e){return Array.prototype.slice.call(e)}function da(e){return b(e).join("")}var K=Z("./extend"),L=Z("./compiled-fns");ha.exports=function(){function e(){var l=[],q=[];return K(function(){l.push.apply(l,b(arguments))},{def:function(){var e="v"+c;c++;q.push(e);0<arguments.length&&(l.push(e,"="),l.push.apply(l,b(arguments)),l.push(";"));return e},toString:function(){return da([0<q.length?"var "+q.join(",")+";":"",da(l)])}})}function l(){function c(e,
b){q(e,b,"=",l.def(e,b),";")}var l=e(),q=e(),L=l.toString,B=q.toString;return K(function(){l.apply(l,b(arguments))},{def:l.def,entry:l,exit:q,save:c,set:function(q,e,b){c(q,e);l(q,e,"=",b,";")},toString:function(){return L()+B()}})}var q=0,c=0,F={},B=e(),G={};return{global:B,link:function(c){var l="$"+q,e=!1;"object"===typeof c&&c.name&&(l=c.name.replace(/ /g,"_"),e=!0);if(l in F)return l;F[l]=c;e||q++;return l},block:e,proc:function(c,q){function e(){var c="a"+b.length;b.push(c);return c}var b=[];
q=q||0;for(var L=0;L<q;++L)e();var L=l(),v=L.toString;return G[c]=K(L,{arg:e,toString:function(){return da(["function(",b.join(),"){",v(),"}"])}})},scope:l,cond:function(){var c=da(arguments),q=l(),e=l(),L=q.toString,B=e.toString;return K(q,{then:function(){q.apply(q,b(arguments));return this},"else":function(){e.apply(e,b(arguments));return this},toString:function(){var l=B();l&&(l="else{"+l+"}");return da(["if(",c,"){",L(),"}",l])}})},compile:function(){var c=[],l=[];Object.keys(F).sort(function(c,
l){var q="$"===c.charAt(0),e="$"===l.charAt(0);return q||e?q&&e?+c.slice(1)<+l.slice(1)?-1:1:q&&!e?-1:1:c.localeCompare(l)}).forEach(function(q){var e=F[q];c.push(q);l.push(e)});for(var q=0,e=c.length-1;-1<e;e--)if("$"===c[e].charAt(0)){q=e;break}var b=['"use strict";',B,"return {"];Object.keys(G).forEach(function(c){b.push('"',c,'":',G[c].toString(),",")});b.push("}");var e=da(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),q=c.slice(q).join(),v=L[q];if(!v)throw console.log("src code is:"),
console.log(e),console.log("compiled values:",l),console.log("linked names:",c),console.log("Keys available:",Object.keys(L)),console.log("Key:",q),console.log('"'+q+'": function('+c.join(", ")+") \n{\n"+e+"\n},"),Error("missing precompiled function with key: "+q);return v.apply(null,l)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(Z,ha,ab){ha.exports={$0:function(b){var da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E;da=b.attributes;K=b.current;L=b.framebuffer;e=b.gl;l=b.next;
q=b.vao;c=l.blend_color;F=K.blend_color;B=l.blend_equation;G=K.blend_equation;U=l.blend_func;n=K.blend_func;u=l.colorMask;x=K.colorMask;ba=l.depth_range;v=K.depth_range;T=l.polygonOffset_offset;z=K.polygonOffset_offset;R=l.sample_coverage;ia=K.sample_coverage;h=l.scissor_box;t=K.scissor_box;S=l.stencil_func;k=K.stencil_func;X=l.stencil_opBack;f=K.stencil_opBack;w=l.stencil_opFront;Y=K.stencil_opFront;D=l.viewport;E=K.viewport;return{poll:function(){var d,q,a,b,A,da,Cc,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,
Q,ma;K.dirty=!1;q=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;da=l.polygonOffset_enable;Cc=l.sample_alpha;V=l.sample_enable;ea=l.scissor_enable;O=l.stencil_enable;P=l.cull_face;C=K.cull_face;g=l.depth_func;N=K.depth_func;M=l.depth_mask;Da=K.depth_mask;pa=l.frontFace;m=K.frontFace;J=l.lineWidth;aa=K.lineWidth;Q=l.stencil_mask;ma=K.stencil_mask;d=L.next;d!==L.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null),L.cur=d);q!==K.blend_enable&&(q?e.enable(3042):e.disable(3042),
K.blend_enable=q);a!==K.cull_enable&&(a?e.enable(2884):e.disable(2884),K.cull_enable=a);b!==K.depth_enable&&(b?e.enable(2929):e.disable(2929),K.depth_enable=b);A!==K.dither&&(A?e.enable(3024):e.disable(3024),K.dither=A);da!==K.polygonOffset_enable&&(da?e.enable(32823):e.disable(32823),K.polygonOffset_enable=da);Cc!==K.sample_alpha&&(Cc?e.enable(32926):e.disable(32926),K.sample_alpha=Cc);V!==K.sample_enable&&(V?e.enable(32928):e.disable(32928),K.sample_enable=V);ea!==K.scissor_enable&&(ea?e.enable(3089):
e.disable(3089),K.scissor_enable=ea);O!==K.stencil_enable&&(O?e.enable(2960):e.disable(2960),K.stencil_enable=O);if(c[0]!==F[0]||c[1]!==F[1]||c[2]!==F[2]||c[3]!==F[3])e.blendColor(c[0],c[1],c[2],c[3]),F[0]=c[0],F[1]=c[1],F[2]=c[2],F[3]=c[3];if(B[0]!==G[0]||B[1]!==G[1])e.blendEquationSeparate(B[0],B[1]),G[0]=B[0],G[1]=B[1];if(U[0]!==n[0]||U[1]!==n[1]||U[2]!==n[2]||U[3]!==n[3])e.blendFuncSeparate(U[0],U[1],U[2],U[3]),n[0]=U[0],n[1]=U[1],n[2]=U[2],n[3]=U[3];if(u[0]!==x[0]||u[1]!==x[1]||u[2]!==x[2]||
u[3]!==x[3])e.colorMask(u[0],u[1],u[2],u[3]),x[0]=u[0],x[1]=u[1],x[2]=u[2],x[3]=u[3];P!==C&&(e.cullFace(P),K.cull_face=P);g!==N&&(e.depthFunc(g),K.depth_func=g);M!==Da&&(e.depthMask(M),K.depth_mask=M);if(ba[0]!==v[0]||ba[1]!==v[1])e.depthRange(ba[0],ba[1]),v[0]=ba[0],v[1]=ba[1];pa!==m&&(e.frontFace(pa),K.frontFace=pa);J!==aa&&(e.lineWidth(J),K.lineWidth=J);if(T[0]!==z[0]||T[1]!==z[1])e.polygonOffset(T[0],T[1]),z[0]=T[0],z[1]=T[1];if(R[0]!==ia[0]||R[1]!==ia[1])e.sampleCoverage(R[0],R[1]),ia[0]=R[0],
ia[1]=R[1];if(h[0]!==t[0]||h[1]!==t[1]||h[2]!==t[2]||h[3]!==t[3])e.scissor(h[0],h[1],h[2],h[3]),t[0]=h[0],t[1]=h[1],t[2]=h[2],t[3]=h[3];if(S[0]!==k[0]||S[1]!==k[1]||S[2]!==k[2])e.stencilFunc(S[0],S[1],S[2]),k[0]=S[0],k[1]=S[1],k[2]=S[2];Q!==ma&&(e.stencilMask(Q),K.stencil_mask=Q);if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2]||X[3]!==f[3])e.stencilOpSeparate(X[0],X[1],X[2],X[3]),f[0]=X[0],f[1]=X[1],f[2]=X[2],f[3]=X[3];if(w[0]!==Y[0]||w[1]!==Y[1]||w[2]!==Y[2]||w[3]!==Y[3])e.stencilOpSeparate(w[0],w[1],w[2],
w[3]),Y[0]=w[0],Y[1]=w[1],Y[2]=w[2],Y[3]=w[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])e.viewport(D[0],D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3]},refresh:function(){var d,I,a,b,A,ja,Cc,V,ea,O,P,C,g,N,M,Da;K.dirty=!1;I=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;ja=l.polygonOffset_enable;Cc=l.sample_alpha;V=l.sample_enable;ea=l.scissor_enable;O=l.stencil_enable;P=l.cull_face;C=l.depth_func;g=l.depth_mask;N=l.frontFace;M=l.lineWidth;Da=l.stencil_mask;(d=L.next)?
e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null);L.cur=d;d=da[0];d.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=da[1];d.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,
d.x,d.y,d.z,d.w),d.buffer=null);d=da[2];d.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=da[3];d.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);
d=da[4];d.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=da[5];d.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=da[6];d.buffer?(e.enableVertexAttribArray(6),
e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=da[7];d.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=da[8];d.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,d.buffer.buffer),
e.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=da[9];d.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=da[10];d.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(10,d.size,
d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=da[11];d.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=da[12];d.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=da[13];d.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=da[14];d.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):
(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=da[15];d.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);q.currentVAO=null;q.setVAO(q.targetVAO);I?e.enable(3042):e.disable(3042);K.blend_enable=I;a?e.enable(2884):e.disable(2884);K.cull_enable=a;b?e.enable(2929):e.disable(2929);K.depth_enable=
b;A?e.enable(3024):e.disable(3024);K.dither=A;ja?e.enable(32823):e.disable(32823);K.polygonOffset_enable=ja;Cc?e.enable(32926):e.disable(32926);K.sample_alpha=Cc;V?e.enable(32928):e.disable(32928);K.sample_enable=V;ea?e.enable(3089):e.disable(3089);K.scissor_enable=ea;O?e.enable(2960):e.disable(2960);K.stencil_enable=O;e.blendColor(c[0],c[1],c[2],c[3]);F[0]=c[0];F[1]=c[1];F[2]=c[2];F[3]=c[3];e.blendEquationSeparate(B[0],B[1]);G[0]=B[0];G[1]=B[1];e.blendFuncSeparate(U[0],U[1],U[2],U[3]);n[0]=U[0];
n[1]=U[1];n[2]=U[2];n[3]=U[3];e.colorMask(u[0],u[1],u[2],u[3]);x[0]=u[0];x[1]=u[1];x[2]=u[2];x[3]=u[3];e.cullFace(P);K.cull_face=P;e.depthFunc(C);K.depth_func=C;e.depthMask(g);K.depth_mask=g;e.depthRange(ba[0],ba[1]);v[0]=ba[0];v[1]=ba[1];e.frontFace(N);K.frontFace=N;e.lineWidth(M);K.lineWidth=M;e.polygonOffset(T[0],T[1]);z[0]=T[0];z[1]=T[1];e.sampleCoverage(R[0],R[1]);ia[0]=R[0];ia[1]=R[1];e.scissor(h[0],h[1],h[2],h[3]);t[0]=h[0];t[1]=h[1];t[2]=h[2];t[3]=h[3];e.stencilFunc(S[0],S[1],S[2]);k[0]=S[0];
k[1]=S[1];k[2]=S[2];e.stencilMask(Da);K.stencil_mask=Da;e.stencilOpSeparate(X[0],X[1],X[2],X[3]);f[0]=X[0];f[1]=X[1];f[2]=X[2];f[3]=X[3];e.stencilOpSeparate(w[0],w[1],w[2],w[3]);Y[0]=w[0];Y[1]=w[1];Y[2]=w[2];Y[3]=w[3];e.viewport(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=D[1];E[2]=D[2];E[3]=D[3]}}},$3:function(b,da,K,L){var e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja;e=b.context;l=b.current;q=b.framebuffer;c=b.gl;F=b.next;B=b.shader;G=b.vao;U=F.blend_color;n=l.blend_color;u=F.blend_equation;
x=l.blend_equation;ba=F.blend_func;v=l.blend_func;T=F.colorMask;z=l.colorMask;R=F.depth_range;ia=l.depth_range;h=F.polygonOffset_offset;t=l.polygonOffset_offset;S=F.sample_coverage;k=l.sample_coverage;X=F.scissor_box;f=l.scissor_box;w=F.stencil_func;Y=l.stencil_func;D=F.stencil_opBack;E=l.stencil_opBack;d=F.stencil_opFront;I=l.stencil_opFront;a=F.viewport;ta=l.viewport;A={};ja={};return{batch:function(e,b){var A,O,P,C,g;A=q.next;A!==q.cur&&(A?c.bindFramebuffer(36160,A.framebuffer):c.bindFramebuffer(36160,
null),q.cur=A);if(l.dirty){A=F.dither;A!==l.dither&&(A?c.enable(3024):c.disable(3024),l.dither=A);A=F.blend_enable;A!==l.blend_enable&&(A?c.enable(3042):c.disable(3042),l.blend_enable=A);A=U[0];P=U[1];C=U[2];g=U[3];if(A!==n[0]||P!==n[1]||C!==n[2]||g!==n[3])c.blendColor(A,P,C,g),n[0]=A,n[1]=P,n[2]=C,n[3]=g;A=u[0];P=u[1];if(A!==x[0]||P!==x[1])c.blendEquationSeparate(A,P),x[0]=A,x[1]=P;A=ba[0];P=ba[1];C=ba[2];g=ba[3];if(A!==v[0]||P!==v[1]||C!==v[2]||g!==v[3])c.blendFuncSeparate(A,P,C,g),v[0]=A,v[1]=
P,v[2]=C,v[3]=g;A=F.depth_enable;A!==l.depth_enable&&(A?c.enable(2929):c.disable(2929),l.depth_enable=A);A=F.depth_func;A!==l.depth_func&&(c.depthFunc(A),l.depth_func=A);A=R[0];P=R[1];if(A!==ia[0]||P!==ia[1])c.depthRange(A,P),ia[0]=A,ia[1]=P;A=F.depth_mask;A!==l.depth_mask&&(c.depthMask(A),l.depth_mask=A);A=T[0];P=T[1];C=T[2];g=T[3];if(A!==z[0]||P!==z[1]||C!==z[2]||g!==z[3])c.colorMask(A,P,C,g),z[0]=A,z[1]=P,z[2]=C,z[3]=g;A=F.cull_enable;A!==l.cull_enable&&(A?c.enable(2884):c.disable(2884),l.cull_enable=
A);A=F.cull_face;A!==l.cull_face&&(c.cullFace(A),l.cull_face=A);A=F.frontFace;A!==l.frontFace&&(c.frontFace(A),l.frontFace=A);A=F.lineWidth;A!==l.lineWidth&&(c.lineWidth(A),l.lineWidth=A);A=F.polygonOffset_enable;A!==l.polygonOffset_enable&&(A?c.enable(32823):c.disable(32823),l.polygonOffset_enable=A);A=h[0];P=h[1];if(A!==t[0]||P!==t[1])c.polygonOffset(A,P),t[0]=A,t[1]=P;A=F.sample_alpha;A!==l.sample_alpha&&(A?c.enable(32926):c.disable(32926),l.sample_alpha=A);A=F.sample_enable;A!==l.sample_enable&&
(A?c.enable(32928):c.disable(32928),l.sample_enable=A);A=S[0];P=S[1];if(A!==k[0]||P!==k[1])c.sampleCoverage(A,P),k[0]=A,k[1]=P;A=F.stencil_enable;A!==l.stencil_enable&&(A?c.enable(2960):c.disable(2960),l.stencil_enable=A);A=F.stencil_mask;A!==l.stencil_mask&&(c.stencilMask(A),l.stencil_mask=A);A=w[0];P=w[1];C=w[2];if(A!==Y[0]||P!==Y[1]||C!==Y[2])c.stencilFunc(A,P,C),Y[0]=A,Y[1]=P,Y[2]=C;A=d[0];P=d[1];C=d[2];g=d[3];if(A!==I[0]||P!==I[1]||C!==I[2]||g!==I[3])c.stencilOpSeparate(A,P,C,g),I[0]=A,I[1]=
P,I[2]=C,I[3]=g;A=D[0];P=D[1];C=D[2];g=D[3];if(A!==E[0]||P!==E[1]||C!==E[2]||g!==E[3])c.stencilOpSeparate(A,P,C,g),E[0]=A,E[1]=P,E[2]=C,E[3]=g;A=F.scissor_enable;A!==l.scissor_enable&&(A?c.enable(3089):c.disable(3089),l.scissor_enable=A);A=X[0];P=X[1];C=X[2];g=X[3];if(A!==f[0]||P!==f[1]||C!==f[2]||g!==f[3])c.scissor(A,P,C,g),f[0]=A,f[1]=P,f[2]=C,f[3]=g;A=a[0];P=a[1];C=a[2];g=a[3];if(A!==ta[0]||P!==ta[1]||C!==ta[2]||g!==ta[3])c.viewport(A,P,C,g),ta[0]=A,ta[1]=P,ta[2]=C,ta[3]=g;l.dirty=!1}if(A=l.profile)O=
performance.now(),da.count+=b;P=B.program(B.vert,B.frag);c.useProgram(P.program);G.setVAO(null);C=P.id;(g=ja[C])||(g=ja[C]=L(P));g.call(this,e,b);G.setVAO(null);A&&(da.cpuTime+=performance.now()-O)},draw:function(e){var b,L,O,P,C;b=q.next;b!==q.cur&&(b?c.bindFramebuffer(36160,b.framebuffer):c.bindFramebuffer(36160,null),q.cur=b);if(l.dirty){b=F.dither;b!==l.dither&&(b?c.enable(3024):c.disable(3024),l.dither=b);b=F.blend_enable;b!==l.blend_enable&&(b?c.enable(3042):c.disable(3042),l.blend_enable=b);
b=U[0];O=U[1];P=U[2];C=U[3];if(b!==n[0]||O!==n[1]||P!==n[2]||C!==n[3])c.blendColor(b,O,P,C),n[0]=b,n[1]=O,n[2]=P,n[3]=C;b=u[0];O=u[1];if(b!==x[0]||O!==x[1])c.blendEquationSeparate(b,O),x[0]=b,x[1]=O;b=ba[0];O=ba[1];P=ba[2];C=ba[3];if(b!==v[0]||O!==v[1]||P!==v[2]||C!==v[3])c.blendFuncSeparate(b,O,P,C),v[0]=b,v[1]=O,v[2]=P,v[3]=C;b=F.depth_enable;b!==l.depth_enable&&(b?c.enable(2929):c.disable(2929),l.depth_enable=b);b=F.depth_func;b!==l.depth_func&&(c.depthFunc(b),l.depth_func=b);b=R[0];O=R[1];if(b!==
ia[0]||O!==ia[1])c.depthRange(b,O),ia[0]=b,ia[1]=O;b=F.depth_mask;b!==l.depth_mask&&(c.depthMask(b),l.depth_mask=b);b=T[0];O=T[1];P=T[2];C=T[3];if(b!==z[0]||O!==z[1]||P!==z[2]||C!==z[3])c.colorMask(b,O,P,C),z[0]=b,z[1]=O,z[2]=P,z[3]=C;b=F.cull_enable;b!==l.cull_enable&&(b?c.enable(2884):c.disable(2884),l.cull_enable=b);b=F.cull_face;b!==l.cull_face&&(c.cullFace(b),l.cull_face=b);b=F.frontFace;b!==l.frontFace&&(c.frontFace(b),l.frontFace=b);b=F.lineWidth;b!==l.lineWidth&&(c.lineWidth(b),l.lineWidth=
b);b=F.polygonOffset_enable;b!==l.polygonOffset_enable&&(b?c.enable(32823):c.disable(32823),l.polygonOffset_enable=b);b=h[0];O=h[1];if(b!==t[0]||O!==t[1])c.polygonOffset(b,O),t[0]=b,t[1]=O;b=F.sample_alpha;b!==l.sample_alpha&&(b?c.enable(32926):c.disable(32926),l.sample_alpha=b);b=F.sample_enable;b!==l.sample_enable&&(b?c.enable(32928):c.disable(32928),l.sample_enable=b);b=S[0];O=S[1];if(b!==k[0]||O!==k[1])c.sampleCoverage(b,O),k[0]=b,k[1]=O;b=F.stencil_enable;b!==l.stencil_enable&&(b?c.enable(2960):
c.disable(2960),l.stencil_enable=b);b=F.stencil_mask;b!==l.stencil_mask&&(c.stencilMask(b),l.stencil_mask=b);b=w[0];O=w[1];P=w[2];if(b!==Y[0]||O!==Y[1]||P!==Y[2])c.stencilFunc(b,O,P),Y[0]=b,Y[1]=O,Y[2]=P;b=d[0];O=d[1];P=d[2];C=d[3];if(b!==I[0]||O!==I[1]||P!==I[2]||C!==I[3])c.stencilOpSeparate(b,O,P,C),I[0]=b,I[1]=O,I[2]=P,I[3]=C;b=D[0];O=D[1];P=D[2];C=D[3];if(b!==E[0]||O!==E[1]||P!==E[2]||C!==E[3])c.stencilOpSeparate(b,O,P,C),E[0]=b,E[1]=O,E[2]=P,E[3]=C;b=F.scissor_enable;b!==l.scissor_enable&&(b?
c.enable(3089):c.disable(3089),l.scissor_enable=b);b=X[0];O=X[1];P=X[2];C=X[3];if(b!==f[0]||O!==f[1]||P!==f[2]||C!==f[3])c.scissor(b,O,P,C),f[0]=b,f[1]=O,f[2]=P,f[3]=C;b=a[0];O=a[1];P=a[2];C=a[3];if(b!==ta[0]||O!==ta[1]||P!==ta[2]||C!==ta[3])c.viewport(b,O,P,C),ta[0]=b,ta[1]=O,ta[2]=P,ta[3]=C;l.dirty=!1}if(b=l.profile)L=performance.now(),da.count++;O=B.program(B.vert,B.frag);c.useProgram(O.program);G.setVAO(null);P=O.id;(C=A[P])||(C=A[P]=K(O));C.call(this,e);G.setVAO(null);b&&(da.cpuTime+=performance.now()-
L)},scope:function(a,d,c){var h,f;if(h=l.profile)f=performance.now(),da.count++;d(e,a,c);h&&(da.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,
Cc,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,Bd,Hb,ga,H,sa,Ca,ra,xa,Fa){var la,W,ua,Ia,za,mb,ca,xd,$b,Ga,ac,Sb,Z,Dd,re,Vd,ze,zd,Qd,oe,ie,Ed,Xd,fe,Md,Xe,Ze,$e,Gd,Ae,te,Yd,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua;la=b.attributes;W=b.context;ua=b.current;Ia=b.draw;za=b.elements;mb=b.framebuffer;ca=b.gl;xd=b.next;$b=b.shader;Ga=b.uniforms;ac=b.vao;Sb=xd.blend_color;Z=ua.blend_color;Dd=xd.blend_equation;
re=ua.blend_equation;Vd=xd.blend_func;ze=ua.blend_func;zd=xd.colorMask;Qd=ua.colorMask;oe=xd.depth_range;ie=ua.depth_range;Ed=xd.polygonOffset_offset;Xd=ua.polygonOffset_offset;fe=xd.sample_coverage;Md=ua.sample_coverage;Xe=xd.scissor_box;Ze=ua.scissor_box;$e=xd.stencil_func;Gd=ua.stencil_func;Ae=xd.stencil_opBack;te=ua.stencil_opBack;Yd=xd.stencil_opFront;Ad=ua.stencil_opFront;Zd=xd.viewport;ld=ua.viewport;bd={};pd={};Lc=new Float32Array(16);nd=new Float32Array(16);Gc=new Float32Array(16);fd=new Float32Array(16);
Pc=new Float32Array(16);Wc=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);Dc=new Float32Array(16);xb=new Float32Array(16);xc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);mc=new Float32Array(16);Hc=new Float32Array(16);Xc=new Float32Array(16);Vc=new Float32Array(16);Ec=new Float32Array(16);fc=new Float32Array(16);Ic=new Float32Array(16);pc=new Float32Array(16);qc=new Float32Array(16);nc=new Float32Array(16);gc=new Float32Array(16);bb=new Float32Array(16);
bc=new Float32Array(16);yb=new Float32Array(16);eb=new Float32Array(16);Nb=new Float32Array(16);cb=new Float32Array(16);ob=new Float32Array(16);Ua=new Float32Array(16);return{batch:function(a,d){var h,f,k,b;h=mb.next;h!==mb.cur&&(h?ca.bindFramebuffer(36160,h.framebuffer):ca.bindFramebuffer(36160,null),mb.cur=h);if(ua.dirty){var I,t,w,A,D,E,S,R,K,da,X,ia,Ga,ta,ja,Y,Sb,$b,La,Fb,Pc,Bb,Cb,Oa,Xe;I=zd[0];t=zd[1];w=zd[2];A=zd[3];if(I!==Qd[0]||t!==Qd[1]||w!==Qd[2]||A!==Qd[3])ca.colorMask(I,t,w,A),Qd[0]=I,
Qd[1]=t,Qd[2]=w,Qd[3]=A;D=xd.frontFace;D!==ua.frontFace&&(ca.frontFace(D),ua.frontFace=D);E=xd.polygonOffset_enable;E!==ua.polygonOffset_enable&&(E?ca.enable(32823):ca.disable(32823),ua.polygonOffset_enable=E);S=Ed[0];R=Ed[1];if(S!==Xd[0]||R!==Xd[1])ca.polygonOffset(S,R),Xd[0]=S,Xd[1]=R;K=xd.sample_alpha;K!==ua.sample_alpha&&(K?ca.enable(32926):ca.disable(32926),ua.sample_alpha=K);da=xd.sample_enable;da!==ua.sample_enable&&(da?ca.enable(32928):ca.disable(32928),ua.sample_enable=da);X=fe[0];ia=fe[1];
if(X!==Md[0]||ia!==Md[1])ca.sampleCoverage(X,ia),Md[0]=X,Md[1]=ia;Ga=xd.stencil_enable;Ga!==ua.stencil_enable&&(Ga?ca.enable(2960):ca.disable(2960),ua.stencil_enable=Ga);ta=xd.stencil_mask;ta!==ua.stencil_mask&&(ca.stencilMask(ta),ua.stencil_mask=ta);ja=$e[0];Y=$e[1];Sb=$e[2];if(ja!==Gd[0]||Y!==Gd[1]||Sb!==Gd[2])ca.stencilFunc(ja,Y,Sb),Gd[0]=ja,Gd[1]=Y,Gd[2]=Sb;$b=Yd[0];La=Yd[1];Fb=Yd[2];Pc=Yd[3];if($b!==Ad[0]||La!==Ad[1]||Fb!==Ad[2]||Pc!==Ad[3])ca.stencilOpSeparate($b,La,Fb,Pc),Ad[0]=$b,Ad[1]=La,
Ad[2]=Fb,Ad[3]=Pc;Bb=Ae[0];Cb=Ae[1];Oa=Ae[2];Xe=Ae[3];if(Bb!==te[0]||Cb!==te[1]||Oa!==te[2]||Xe!==te[3])ca.stencilOpSeparate(Bb,Cb,Oa,Xe),te[0]=Bb,te[1]=Cb,te[2]=Oa,te[3]=Xe}ca.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;ca.disable(3042);ua.blend_enable=!1;ca.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;ca.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ca.enable(2884);ua.cull_enable=!0;ca.cullFace(1029);ua.cull_face=1029;ca.enable(2929);ua.depth_enable=!0;ca.depthFunc(513);
ua.depth_func=513;ca.depthMask(!0);ua.depth_mask=!0;ca.depthRange(0,1);ie[0]=0;ie[1]=1;ca.disable(3024);ua.dither=!1;ca.lineWidth(2);ua.lineWidth=2;ca.enable(3089);ua.scissor_enable=!0;f=ua.profile;ua.profile=!1;ca.useProgram(Cc.program);var Qa,xb,Wc,Ma,mc,Ya,Gc,Vd,lb,Na,Dc,Pa,ub,vb,Sa,nb,nd,Dd,Hc,db,Jc,fd,Wa,Lc,Ab,Za,oe,xc,Wb,Qb,Zd,Rb,Xc;ac.setVAO(null);Qa=ya.location;xb=la[Qa];xb.buffer||ca.enableVertexAttribArray(Qa);if(xb.type!==L.dtype||4!==xb.size||xb.buffer!==L||!1!==xb.normalized||0!==xb.offset||
0!==xb.stride)ca.bindBuffer(34962,L.buffer),ca.vertexAttribPointer(Qa,4,L.dtype,!1,0,0),xb.type=L.dtype,xb.size=4,xb.buffer=L,xb.normalized=!1,xb.offset=0,xb.stride=0;Wc=Ja.location;Ma=la[Wc];Ma.buffer||ca.enableVertexAttribArray(Wc);if(Ma.type!==e.dtype||4!==Ma.size||Ma.buffer!==e||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(Wc,4,e.dtype,!1,0,0),Ma.type=e.dtype,Ma.size=4,Ma.buffer=e,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;mc=na.location;
Ya=la[mc];Ya.buffer||ca.enableVertexAttribArray(mc);if(Ya.type!==l.dtype||4!==Ya.size||Ya.buffer!==l||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(mc,4,l.dtype,!1,0,0),Ya.type=l.dtype,Ya.size=4,Ya.buffer=l,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Gc=Xa.location;Vd=la[Gc];Vd.buffer||ca.enableVertexAttribArray(Gc);if(Vd.type!==q.dtype||4!==Vd.size||Vd.buffer!==q||!1!==Vd.normalized||0!==Vd.offset||0!==Vd.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(Gc,
4,q.dtype,!1,0,0),Vd.type=q.dtype,Vd.size=4,Vd.buffer=q,Vd.normalized=!1,Vd.offset=0,Vd.stride=0;lb=Ta.location;Na=la[lb];Na.buffer||ca.enableVertexAttribArray(lb);if(Na.type!==c.dtype||4!==Na.size||Na.buffer!==c||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ca.bindBuffer(34962,c.buffer),ca.vertexAttribPointer(lb,4,c.dtype,!1,0,0),Na.type=c.dtype,Na.size=4,Na.buffer=c,Na.normalized=!1,Na.offset=0,Na.stride=0;Dc=r.location;Pa=la[Dc];Pa.buffer||ca.enableVertexAttribArray(Dc);if(Pa.type!==F.dtype||
4!==Pa.size||Pa.buffer!==F||!1!==Pa.normalized||0!==Pa.offset||0!==Pa.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(Dc,4,F.dtype,!1,0,0),Pa.type=F.dtype,Pa.size=4,Pa.buffer=F,Pa.normalized=!1,Pa.offset=0,Pa.stride=0;ub=p.location;vb=la[ub];vb.buffer||ca.enableVertexAttribArray(ub);if(vb.type!==B.dtype||4!==vb.size||vb.buffer!==B||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)ca.bindBuffer(34962,B.buffer),ca.vertexAttribPointer(ub,4,B.dtype,!1,0,0),vb.type=B.dtype,vb.size=4,vb.buffer=
B,vb.normalized=!1,vb.offset=0,vb.stride=0;Sa=y.location;nb=la[Sa];nb.buffer||ca.enableVertexAttribArray(Sa);if(nb.type!==G.dtype||4!==nb.size||nb.buffer!==G||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)ca.bindBuffer(34962,G.buffer),ca.vertexAttribPointer(Sa,4,G.dtype,!1,0,0),nb.type=G.dtype,nb.size=4,nb.buffer=G,nb.normalized=!1,nb.offset=0,nb.stride=0;nd=va.location;Dd=la[nd];Dd.buffer||ca.enableVertexAttribArray(nd);if(Dd.type!==U.dtype||4!==Dd.size||Dd.buffer!==U||!1!==Dd.normalized||0!==
Dd.offset||0!==Dd.stride)ca.bindBuffer(34962,U.buffer),ca.vertexAttribPointer(nd,4,U.dtype,!1,0,0),Dd.type=U.dtype,Dd.size=4,Dd.buffer=U,Dd.normalized=!1,Dd.offset=0,Dd.stride=0;Hc=Ea.location;db=la[Hc];db.buffer||ca.enableVertexAttribArray(Hc);if(db.type!==n.dtype||4!==db.size||db.buffer!==n||!1!==db.normalized||0!==db.offset||0!==db.stride)ca.bindBuffer(34962,n.buffer),ca.vertexAttribPointer(Hc,4,n.dtype,!1,0,0),db.type=n.dtype,db.size=4,db.buffer=n,db.normalized=!1,db.offset=0,db.stride=0;Jc=Bd.location;
fd=la[Jc];fd.buffer||ca.enableVertexAttribArray(Jc);if(fd.type!==u.dtype||4!==fd.size||fd.buffer!==u||!1!==fd.normalized||0!==fd.offset||0!==fd.stride)ca.bindBuffer(34962,u.buffer),ca.vertexAttribPointer(Jc,4,u.dtype,!1,0,0),fd.type=u.dtype,fd.size=4,fd.buffer=u,fd.normalized=!1,fd.offset=0,fd.stride=0;Wa=Hb.location;Lc=la[Wa];Lc.buffer||ca.enableVertexAttribArray(Wa);if(Lc.type!==x.dtype||4!==Lc.size||Lc.buffer!==x||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)ca.bindBuffer(34962,x.buffer),ca.vertexAttribPointer(Wa,
4,x.dtype,!1,0,0),Lc.type=x.dtype,Lc.size=4,Lc.buffer=x,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=ga.location;Za=la[Ab];Za.buffer||ca.enableVertexAttribArray(Ab);if(Za.type!==ba.dtype||4!==Za.size||Za.buffer!==ba||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ca.bindBuffer(34962,ba.buffer),ca.vertexAttribPointer(Ab,4,ba.dtype,!1,0,0),Za.type=ba.dtype,Za.size=4,Za.buffer=ba,Za.normalized=!1,Za.offset=0,Za.stride=0;oe=H.location;xc=la[oe];xc.buffer||ca.enableVertexAttribArray(oe);if(xc.type!==
v.dtype||4!==xc.size||xc.buffer!==v||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(oe,4,v.dtype,!1,0,0),xc.type=v.dtype,xc.size=4,xc.buffer=v,xc.normalized=!1,xc.offset=0,xc.stride=0;Wb=sa.location;Qb=la[Wb];Qb.buffer||ca.enableVertexAttribArray(Wb);if(Qb.type!==T.dtype||4!==Qb.size||Qb.buffer!==T||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ca.bindBuffer(34962,T.buffer),ca.vertexAttribPointer(Wb,4,T.dtype,!1,0,0),Qb.type=T.dtype,Qb.size=
4,Qb.buffer=T,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Zd=ea.location;Rb=la[Zd];Rb.buffer||ca.enableVertexAttribArray(Zd);if(Rb.type!==z.dtype||4!==Rb.size||Rb.buffer!==z||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)ca.bindBuffer(34962,z.buffer),ca.vertexAttribPointer(Zd,4,z.dtype,!1,0,0),Rb.type=z.dtype,Rb.size=4,Rb.buffer=z,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;ca.uniform1i(Ca.location,V.bind());(Xc=Ia.elements)?ca.bindBuffer(34963,Xc.buffer.buffer):ac.currentVAO&&(Xc=za.getElements(ac.currentVAO.elements))&&
ca.bindBuffer(34963,Xc.buffer.buffer);for(k=0;k<d;++k){b=a[k];var Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd,wd,ue,jd,ha,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de;bd.height=b.viewportHeight;bd.width=b.viewportWidth;bd.x=b.viewportX;bd.y=b.viewportY;Fc=bd.x|0;sd=bd.y|0;Nc="width"in bd?bd.width|0:W.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:W.framebufferHeight-sd;td=W.viewportWidth;W.viewportWidth=Nc;oc=W.viewportHeight;
W.viewportHeight=Yc;ca.viewport(Fc,sd,Nc,Yc);ld[0]=Fc;ld[1]=sd;ld[2]=Nc;ld[3]=Yc;pd.height=b.scissorHeight;pd.width=b.scissorWidth;pd.x=b.scissorX;pd.y=b.scissorY;wc=pd.x|0;ic=pd.y|0;$a="width"in pd?pd.width|0:W.framebufferWidth-wc;sc="height"in pd?pd.height|0:W.framebufferHeight-ic;ca.scissor(wc,ic,$a,sc);Ze[0]=wc;Ze[1]=ic;Ze[2]=$a;Ze[3]=sc;Tb=b.dim0A;ca.uniformMatrix4fv(P.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(Vc[0]=Tb[0],Vc[1]=Tb[1],Vc[2]=Tb[2],Vc[3]=Tb[3],Vc[4]=Tb[4],Vc[5]=
Tb[5],Vc[6]=Tb[6],Vc[7]=Tb[7],Vc[8]=Tb[8],Vc[9]=Tb[9],Vc[10]=Tb[10],Vc[11]=Tb[11],Vc[12]=Tb[12],Vc[13]=Tb[13],Vc[14]=Tb[14],Vc[15]=Tb[15],Vc));Xb=b.dim1A;ca.uniformMatrix4fv(M.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Ec[0]=Xb[0],Ec[1]=Xb[1],Ec[2]=Xb[2],Ec[3]=Xb[3],Ec[4]=Xb[4],Ec[5]=Xb[5],Ec[6]=Xb[6],Ec[7]=Xb[7],Ec[8]=Xb[8],Ec[9]=Xb[9],Ec[10]=Xb[10],Ec[11]=Xb[11],Ec[12]=Xb[12],Ec[13]=Xb[13],Ec[14]=Xb[14],Ec[15]=Xb[15],Ec));ec=b.dim0B;ca.uniformMatrix4fv(C.location,!1,Array.isArray(ec)||
ec instanceof Float32Array?ec:(fc[0]=ec[0],fc[1]=ec[1],fc[2]=ec[2],fc[3]=ec[3],fc[4]=ec[4],fc[5]=ec[5],fc[6]=ec[6],fc[7]=ec[7],fc[8]=ec[8],fc[9]=ec[9],fc[10]=ec[10],fc[11]=ec[11],fc[12]=ec[12],fc[13]=ec[13],fc[14]=ec[14],fc[15]=ec[15],fc));jc=b.dim1B;ca.uniformMatrix4fv(Da.location,!1,Array.isArray(jc)||jc instanceof Float32Array?jc:(Ic[0]=jc[0],Ic[1]=jc[1],Ic[2]=jc[2],Ic[3]=jc[3],Ic[4]=jc[4],Ic[5]=jc[5],Ic[6]=jc[6],Ic[7]=jc[7],Ic[8]=jc[8],Ic[9]=jc[9],Ic[10]=jc[10],Ic[11]=jc[11],Ic[12]=jc[12],Ic[13]=
jc[13],Ic[14]=jc[14],Ic[15]=jc[15],Ic));yc=b.dim0C;ca.uniformMatrix4fv(g.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(pc[0]=yc[0],pc[1]=yc[1],pc[2]=yc[2],pc[3]=yc[3],pc[4]=yc[4],pc[5]=yc[5],pc[6]=yc[6],pc[7]=yc[7],pc[8]=yc[8],pc[9]=yc[9],pc[10]=yc[10],pc[11]=yc[11],pc[12]=yc[12],pc[13]=yc[13],pc[14]=yc[14],pc[15]=yc[15],pc));Bc=b.dim1C;ca.uniformMatrix4fv(pa.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(qc[0]=Bc[0],qc[1]=Bc[1],qc[2]=Bc[2],qc[3]=Bc[3],qc[4]=Bc[4],qc[5]=
Bc[5],qc[6]=Bc[6],qc[7]=Bc[7],qc[8]=Bc[8],qc[9]=Bc[9],qc[10]=Bc[10],qc[11]=Bc[11],qc[12]=Bc[12],qc[13]=Bc[13],qc[14]=Bc[14],qc[15]=Bc[15],qc));cd=b.dim0D;ca.uniformMatrix4fv(N.location,!1,Array.isArray(cd)||cd instanceof Float32Array?cd:(nc[0]=cd[0],nc[1]=cd[1],nc[2]=cd[2],nc[3]=cd[3],nc[4]=cd[4],nc[5]=cd[5],nc[6]=cd[6],nc[7]=cd[7],nc[8]=cd[8],nc[9]=cd[9],nc[10]=cd[10],nc[11]=cd[11],nc[12]=cd[12],nc[13]=cd[13],nc[14]=cd[14],nc[15]=cd[15],nc));Qc=b.dim1D;ca.uniformMatrix4fv(m.location,!1,Array.isArray(Qc)||
Qc instanceof Float32Array?Qc:(gc[0]=Qc[0],gc[1]=Qc[1],gc[2]=Qc[2],gc[3]=Qc[3],gc[4]=Qc[4],gc[5]=Qc[5],gc[6]=Qc[6],gc[7]=Qc[7],gc[8]=Qc[8],gc[9]=Qc[9],gc[10]=Qc[10],gc[11]=Qc[11],gc[12]=Qc[12],gc[13]=Qc[13],gc[14]=Qc[14],gc[15]=Qc[15],gc));Rc=b.loA;ca.uniformMatrix4fv(Aa.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(bb[0]=Rc[0],bb[1]=Rc[1],bb[2]=Rc[2],bb[3]=Rc[3],bb[4]=Rc[4],bb[5]=Rc[5],bb[6]=Rc[6],bb[7]=Rc[7],bb[8]=Rc[8],bb[9]=Rc[9],bb[10]=Rc[10],bb[11]=Rc[11],bb[12]=Rc[12],bb[13]=
Rc[13],bb[14]=Rc[14],bb[15]=Rc[15],bb));Sc=b.hiA;ca.uniformMatrix4fv(aa.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(bc[0]=Sc[0],bc[1]=Sc[1],bc[2]=Sc[2],bc[3]=Sc[3],bc[4]=Sc[4],bc[5]=Sc[5],bc[6]=Sc[6],bc[7]=Sc[7],bc[8]=Sc[8],bc[9]=Sc[9],bc[10]=Sc[10],bc[11]=Sc[11],bc[12]=Sc[12],bc[13]=Sc[13],bc[14]=Sc[14],bc[15]=Sc[15],bc));Zc=b.loB;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(yb[0]=Zc[0],yb[1]=Zc[1],yb[2]=Zc[2],yb[3]=Zc[3],yb[4]=Zc[4],yb[5]=
Zc[5],yb[6]=Zc[6],yb[7]=Zc[7],yb[8]=Zc[8],yb[9]=Zc[9],yb[10]=Zc[10],yb[11]=Zc[11],yb[12]=Zc[12],yb[13]=Zc[13],yb[14]=Zc[14],yb[15]=Zc[15],yb));od=b.hiB;ca.uniformMatrix4fv(Q.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(eb[0]=od[0],eb[1]=od[1],eb[2]=od[2],eb[3]=od[3],eb[4]=od[4],eb[5]=od[5],eb[6]=od[6],eb[7]=od[7],eb[8]=od[8],eb[9]=od[9],eb[10]=od[10],eb[11]=od[11],eb[12]=od[12],eb[13]=od[13],eb[14]=od[14],eb[15]=od[15],eb));dd=b.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(dd)||
dd instanceof Float32Array?dd:(Nb[0]=dd[0],Nb[1]=dd[1],Nb[2]=dd[2],Nb[3]=dd[3],Nb[4]=dd[4],Nb[5]=dd[5],Nb[6]=dd[6],Nb[7]=dd[7],Nb[8]=dd[8],Nb[9]=dd[9],Nb[10]=dd[10],Nb[11]=dd[11],Nb[12]=dd[12],Nb[13]=dd[13],Nb[14]=dd[14],Nb[15]=dd[15],Nb));$c=b.hiC;ca.uniformMatrix4fv(ma.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(cb[0]=$c[0],cb[1]=$c[1],cb[2]=$c[2],cb[3]=$c[3],cb[4]=$c[4],cb[5]=$c[5],cb[6]=$c[6],cb[7]=$c[7],cb[8]=$c[8],cb[9]=$c[9],cb[10]=$c[10],cb[11]=$c[11],cb[12]=$c[12],cb[13]=
$c[13],cb[14]=$c[14],cb[15]=$c[15],cb));lc=b.loD;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(ob[0]=lc[0],ob[1]=lc[1],ob[2]=lc[2],ob[3]=lc[3],ob[4]=lc[4],ob[5]=lc[5],ob[6]=lc[6],ob[7]=lc[7],ob[8]=lc[8],ob[9]=lc[9],ob[10]=lc[10],ob[11]=lc[11],ob[12]=lc[12],ob[13]=lc[13],ob[14]=lc[14],ob[15]=lc[15],ob));dc=b.hiD;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Ua[0]=dc[0],Ua[1]=dc[1],Ua[2]=dc[2],Ua[3]=dc[3],Ua[4]=dc[4],Ua[5]=
dc[5],Ua[6]=dc[6],Ua[7]=dc[7],Ua[8]=dc[8],Ua[9]=dc[9],Ua[10]=dc[10],Ua[11]=dc[11],Ua[12]=dc[12],Ua[13]=dc[13],Ua[14]=dc[14],Ua[15]=dc[15],Ua));ad=b.resolution;Uc=ad[0];zc=ad[1];k&&ed===Uc&&id===zc||(ed=Uc,id=zc,ca.uniform2f(ra.location,Uc,zc));Nd=b.viewBoxPos;wd=Nd[0];jd=Nd[1];k&&ue===wd&&ha===jd||(ue=wd,ha=jd,ca.uniform2f(xa.location,wd,jd));Od=b.viewBoxSize;ge=Od[0];$d=Od[1];k&&ce===ge&&Jd===$d||(ce=ge,Jd=$d,ca.uniform2f(Fa.location,ge,$d));Hd=b.maskHeight;k&&md===Hd||(md=Hd,ca.uniform1f(ka.location,
Hd));Tc=b.drwLayer;k&&ud===Tc||(ud=Tc,ca.uniform1f(J.location,Tc));rd=b.contextColor;kd=rd[0];Cd=rd[1];je=rd[2];Fe=rd[3];k&&vd===kd&&Fd===Cd&&ye===je&&le===Fe||(vd=kd,Fd=Cd,ye=je,le=Fe,ca.uniform4f(O.location,kd,Cd,je,Fe));(ke=b.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);he=ke._texture;ca.uniform1i(oa.location,he.bind());ve=b.offset;if(de=b.count)Xc?ca.drawElements(1,de,Xc.type,ve<<(Xc.type-5121>>1)):ca.drawArrays(1,ve,de),W.viewportWidth=td,W.viewportHeight=oc,he.unbind()}V.unbind();
ua.dirty=!0;ac.setVAO(null);ua.profile=f},draw:function(a){var d,h,f,k,b,I;d=mb.next;d!==mb.cur&&(d?ca.bindFramebuffer(36160,d.framebuffer):ca.bindFramebuffer(36160,null),mb.cur=d);if(ua.dirty){d=zd[0];I=zd[1];h=zd[2];f=zd[3];if(d!==Qd[0]||I!==Qd[1]||h!==Qd[2]||f!==Qd[3])ca.colorMask(d,I,h,f),Qd[0]=d,Qd[1]=I,Qd[2]=h,Qd[3]=f;d=xd.frontFace;d!==ua.frontFace&&(ca.frontFace(d),ua.frontFace=d);d=xd.polygonOffset_enable;d!==ua.polygonOffset_enable&&(d?ca.enable(32823):ca.disable(32823),ua.polygonOffset_enable=
d);d=Ed[0];I=Ed[1];if(d!==Xd[0]||I!==Xd[1])ca.polygonOffset(d,I),Xd[0]=d,Xd[1]=I;d=xd.sample_alpha;d!==ua.sample_alpha&&(d?ca.enable(32926):ca.disable(32926),ua.sample_alpha=d);d=xd.sample_enable;d!==ua.sample_enable&&(d?ca.enable(32928):ca.disable(32928),ua.sample_enable=d);d=fe[0];I=fe[1];if(d!==Md[0]||I!==Md[1])ca.sampleCoverage(d,I),Md[0]=d,Md[1]=I;d=xd.stencil_enable;d!==ua.stencil_enable&&(d?ca.enable(2960):ca.disable(2960),ua.stencil_enable=d);d=xd.stencil_mask;d!==ua.stencil_mask&&(ca.stencilMask(d),
ua.stencil_mask=d);d=$e[0];I=$e[1];h=$e[2];if(d!==Gd[0]||I!==Gd[1]||h!==Gd[2])ca.stencilFunc(d,I,h),Gd[0]=d,Gd[1]=I,Gd[2]=h;d=Yd[0];I=Yd[1];h=Yd[2];f=Yd[3];if(d!==Ad[0]||I!==Ad[1]||h!==Ad[2]||f!==Ad[3])ca.stencilOpSeparate(d,I,h,f),Ad[0]=d,Ad[1]=I,Ad[2]=h,Ad[3]=f;d=Ae[0];I=Ae[1];h=Ae[2];f=Ae[3];if(d!==te[0]||I!==te[1]||h!==te[2]||f!==te[3])ca.stencilOpSeparate(d,I,h,f),te[0]=d,te[1]=I,te[2]=h,te[3]=f}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;h=bd.x|0;f=
bd.y|0;k="width"in bd?bd.width|0:W.framebufferWidth-h;b="height"in bd?bd.height|0:W.framebufferHeight-f;d=W.viewportWidth;W.viewportWidth=k;I=W.viewportHeight;W.viewportHeight=b;ca.viewport(h,f,k,b);ld[0]=h;ld[1]=f;ld[2]=k;ld[3]=b;ca.blendColor(0,0,0,0);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=0;ca.disable(3042);ua.blend_enable=!1;ca.blendEquationSeparate(32774,32774);re[0]=32774;re[1]=32774;ca.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ca.enable(2884);ua.cull_enable=!0;ca.cullFace(1029);
ua.cull_face=1029;ca.enable(2929);ua.depth_enable=!0;ca.depthFunc(513);ua.depth_func=513;ca.depthMask(!0);ua.depth_mask=!0;ca.depthRange(0,1);ie[0]=0;ie[1]=1;ca.disable(3024);ua.dither=!1;ca.lineWidth(2);ua.lineWidth=2;pd.height=a.scissorHeight;pd.width=a.scissorWidth;pd.x=a.scissorX;pd.y=a.scissorY;h=pd.x|0;f=pd.y|0;k="width"in pd?pd.width|0:W.framebufferWidth-h;b="height"in pd?pd.height|0:W.framebufferHeight-f;ca.scissor(h,f,k,b);Ze[0]=h;Ze[1]=f;Ze[2]=k;Ze[3]=b;ca.enable(3089);ua.scissor_enable=
!0;h=ua.profile;ua.profile=!1;ca.useProgram(K.program);ac.setVAO(null);f=ya.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==L.dtype||4!==k.size||k.buffer!==L||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,L.buffer),ca.vertexAttribPointer(f,4,L.dtype,!1,0,0),k.type=L.dtype,k.size=4,k.buffer=L,k.normalized=!1,k.offset=0,k.stride=0;f=Ja.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==
k.offset||0!==k.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(f,4,e.dtype,!1,0,0),k.type=e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;f=na.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==l.dtype||4!==k.size||k.buffer!==l||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,l.buffer),ca.vertexAttribPointer(f,4,l.dtype,!1,0,0),k.type=l.dtype,k.size=4,k.buffer=l,k.normalized=!1,k.offset=0,k.stride=0;f=Xa.location;k=la[f];k.buffer||
ca.enableVertexAttribArray(f);if(k.type!==q.dtype||4!==k.size||k.buffer!==q||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(f,4,q.dtype,!1,0,0),k.type=q.dtype,k.size=4,k.buffer=q,k.normalized=!1,k.offset=0,k.stride=0;f=Ta.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==c.dtype||4!==k.size||k.buffer!==c||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,c.buffer),ca.vertexAttribPointer(f,4,c.dtype,!1,0,0),k.type=
c.dtype,k.size=4,k.buffer=c,k.normalized=!1,k.offset=0,k.stride=0;f=r.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==F.dtype||4!==k.size||k.buffer!==F||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,F.buffer),ca.vertexAttribPointer(f,4,F.dtype,!1,0,0),k.type=F.dtype,k.size=4,k.buffer=F,k.normalized=!1,k.offset=0,k.stride=0;f=p.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==B.dtype||4!==k.size||k.buffer!==B||!1!==k.normalized||0!==k.offset||
0!==k.stride)ca.bindBuffer(34962,B.buffer),ca.vertexAttribPointer(f,4,B.dtype,!1,0,0),k.type=B.dtype,k.size=4,k.buffer=B,k.normalized=!1,k.offset=0,k.stride=0;f=y.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==G.dtype||4!==k.size||k.buffer!==G||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,G.buffer),ca.vertexAttribPointer(f,4,G.dtype,!1,0,0),k.type=G.dtype,k.size=4,k.buffer=G,k.normalized=!1,k.offset=0,k.stride=0;f=va.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);
if(k.type!==U.dtype||4!==k.size||k.buffer!==U||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,U.buffer),ca.vertexAttribPointer(f,4,U.dtype,!1,0,0),k.type=U.dtype,k.size=4,k.buffer=U,k.normalized=!1,k.offset=0,k.stride=0;f=Ea.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==n.dtype||4!==k.size||k.buffer!==n||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,n.buffer),ca.vertexAttribPointer(f,4,n.dtype,!1,0,0),k.type=n.dtype,k.size=4,k.buffer=n,
k.normalized=!1,k.offset=0,k.stride=0;f=Bd.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==u.dtype||4!==k.size||k.buffer!==u||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,u.buffer),ca.vertexAttribPointer(f,4,u.dtype,!1,0,0),k.type=u.dtype,k.size=4,k.buffer=u,k.normalized=!1,k.offset=0,k.stride=0;f=Hb.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==x.dtype||4!==k.size||k.buffer!==x||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,
x.buffer),ca.vertexAttribPointer(f,4,x.dtype,!1,0,0),k.type=x.dtype,k.size=4,k.buffer=x,k.normalized=!1,k.offset=0,k.stride=0;f=ga.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==ba.dtype||4!==k.size||k.buffer!==ba||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,ba.buffer),ca.vertexAttribPointer(f,4,ba.dtype,!1,0,0),k.type=ba.dtype,k.size=4,k.buffer=ba,k.normalized=!1,k.offset=0,k.stride=0;f=H.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==
v.dtype||4!==k.size||k.buffer!==v||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,v.buffer),ca.vertexAttribPointer(f,4,v.dtype,!1,0,0),k.type=v.dtype,k.size=4,k.buffer=v,k.normalized=!1,k.offset=0,k.stride=0;f=sa.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==T.dtype||4!==k.size||k.buffer!==T||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,T.buffer),ca.vertexAttribPointer(f,4,T.dtype,!1,0,0),k.type=T.dtype,k.size=4,k.buffer=T,k.normalized=
!1,k.offset=0,k.stride=0;f=ea.location;k=la[f];k.buffer||ca.enableVertexAttribArray(f);if(k.type!==z.dtype||4!==k.size||k.buffer!==z||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,z.buffer),ca.vertexAttribPointer(f,4,z.dtype,!1,0,0),k.type=z.dtype,k.size=4,k.buffer=z,k.normalized=!1,k.offset=0,k.stride=0;f=a.dim0A;ca.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],
Lc[8]=f[8],Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.dim1A;ca.uniformMatrix4fv(M.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(nd[0]=f[0],nd[1]=f[1],nd[2]=f[2],nd[3]=f[3],nd[4]=f[4],nd[5]=f[5],nd[6]=f[6],nd[7]=f[7],nd[8]=f[8],nd[9]=f[9],nd[10]=f[10],nd[11]=f[11],nd[12]=f[12],nd[13]=f[13],nd[14]=f[14],nd[15]=f[15],nd));f=a.dim0B;ca.uniformMatrix4fv(C.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],
Gc[2]=f[2],Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=f[14],Gc[15]=f[15],Gc));f=a.dim1B;ca.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(fd[0]=f[0],fd[1]=f[1],fd[2]=f[2],fd[3]=f[3],fd[4]=f[4],fd[5]=f[5],fd[6]=f[6],fd[7]=f[7],fd[8]=f[8],fd[9]=f[9],fd[10]=f[10],fd[11]=f[11],fd[12]=f[12],fd[13]=f[13],fd[14]=f[14],fd[15]=f[15],fd));f=a.dim0C;ca.uniformMatrix4fv(g.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Pc[0]=f[0],Pc[1]=f[1],Pc[2]=f[2],Pc[3]=f[3],Pc[4]=f[4],Pc[5]=f[5],Pc[6]=f[6],Pc[7]=f[7],Pc[8]=f[8],Pc[9]=f[9],Pc[10]=f[10],Pc[11]=f[11],Pc[12]=f[12],Pc[13]=f[13],Pc[14]=f[14],Pc[15]=f[15],Pc));f=a.dim1C;ca.uniformMatrix4fv(pa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Wc[0]=f[0],Wc[1]=f[1],Wc[2]=f[2],Wc[3]=f[3],Wc[4]=f[4],Wc[5]=f[5],Wc[6]=f[6],Wc[7]=f[7],Wc[8]=f[8],Wc[9]=f[9],Wc[10]=f[10],Wc[11]=f[11],Wc[12]=f[12],Wc[13]=f[13],Wc[14]=f[14],Wc[15]=f[15],
Wc));f=a.dim0D;ca.uniformMatrix4fv(N.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.dim1D;ca.uniformMatrix4fv(m.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fb[0]=f[0],Fb[1]=f[1],Fb[2]=f[2],Fb[3]=f[3],Fb[4]=f[4],Fb[5]=f[5],Fb[6]=f[6],Fb[7]=f[7],Fb[8]=f[8],Fb[9]=f[9],Fb[10]=f[10],
Fb[11]=f[11],Fb[12]=f[12],Fb[13]=f[13],Fb[14]=f[14],Fb[15]=f[15],Fb));f=a.loA;ca.uniformMatrix4fv(Aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Dc[0]=f[0],Dc[1]=f[1],Dc[2]=f[2],Dc[3]=f[3],Dc[4]=f[4],Dc[5]=f[5],Dc[6]=f[6],Dc[7]=f[7],Dc[8]=f[8],Dc[9]=f[9],Dc[10]=f[10],Dc[11]=f[11],Dc[12]=f[12],Dc[13]=f[13],Dc[14]=f[14],Dc[15]=f[15],Dc));f=a.hiA;ca.uniformMatrix4fv(aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xb[0]=f[0],xb[1]=f[1],xb[2]=f[2],xb[3]=f[3],xb[4]=f[4],xb[5]=
f[5],xb[6]=f[6],xb[7]=f[7],xb[8]=f[8],xb[9]=f[9],xb[10]=f[10],xb[11]=f[11],xb[12]=f[12],xb[13]=f[13],xb[14]=f[14],xb[15]=f[15],xb));f=a.loB;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xc[0]=f[0],xc[1]=f[1],xc[2]=f[2],xc[3]=f[3],xc[4]=f[4],xc[5]=f[5],xc[6]=f[6],xc[7]=f[7],xc[8]=f[8],xc[9]=f[9],xc[10]=f[10],xc[11]=f[11],xc[12]=f[12],xc[13]=f[13],xc[14]=f[14],xc[15]=f[15],xc));f=a.hiB;ca.uniformMatrix4fv(Q.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Cb[0]=f[0],Cb[1]=f[1],Cb[2]=f[2],Cb[3]=f[3],Cb[4]=f[4],Cb[5]=f[5],Cb[6]=f[6],Cb[7]=f[7],Cb[8]=f[8],Cb[9]=f[9],Cb[10]=f[10],Cb[11]=f[11],Cb[12]=f[12],Cb[13]=f[13],Cb[14]=f[14],Cb[15]=f[15],Cb));f=a.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;ca.uniformMatrix4fv(ma.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(mc[0]=f[0],mc[1]=f[1],mc[2]=f[2],mc[3]=f[3],mc[4]=f[4],mc[5]=f[5],mc[6]=f[6],mc[7]=f[7],mc[8]=f[8],mc[9]=f[9],mc[10]=f[10],mc[11]=f[11],mc[12]=f[12],mc[13]=f[13],mc[14]=f[14],mc[15]=f[15],mc));f=a.loD;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=
f[14],Hc[15]=f[15],Hc));f=a.hiD;ca.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Xc[0]=f[0],Xc[1]=f[1],Xc[2]=f[2],Xc[3]=f[3],Xc[4]=f[4],Xc[5]=f[5],Xc[6]=f[6],Xc[7]=f[7],Xc[8]=f[8],Xc[9]=f[9],Xc[10]=f[10],Xc[11]=f[11],Xc[12]=f[12],Xc[13]=f[13],Xc[14]=f[14],Xc[15]=f[15],Xc));f=a.resolution;ca.uniform2f(ra.location,f[0],f[1]);f=a.viewBoxPos;ca.uniform2f(xa.location,f[0],f[1]);f=a.viewBoxSize;ca.uniform2f(Fa.location,f[0],f[1]);ca.uniform1f(ka.location,a.maskHeight);ca.uniform1f(J.location,
a.drwLayer);f=a.contextColor;ca.uniform4f(O.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;ca.uniform1i(oa.location,f.bind());ca.uniform1i(Ca.location,R.bind());(k=Ia.elements)?ca.bindBuffer(34963,k.buffer.buffer):ac.currentVAO&&(k=za.getElements(ac.currentVAO.elements))&&ca.bindBuffer(34963,k.buffer.buffer);b=a.offset;if(a=a.count)k?ca.drawElements(1,a,k.type,b<<(k.type-5121>>1)):ca.drawArrays(1,b,a),ua.dirty=!0,ac.setVAO(null),W.viewportWidth=
d,W.viewportHeight=I,ua.profile=h,f.unbind(),R.unbind()},scope:function(g,r,m){var p,H,y,b,na,sa,Ja,Ca,P,J,Q,Xa,C,O,fa,ra,ga,la,M,va,N,aa,xa,Fa,ca,Da,qa,wa,R,K,ka,V,da,Ta,ea,ya,Ea,oa,Ba,pa,ma,Hb,Aa,Bd,za,mb,Cc,bb,fc,Fb,Pc,Bb,gc,pc,xb,Cb,Md,Ae,nc,ac,Yd,qc,eb,cb,Ua,Ic,$e,Wc,mc,$a,Z,ob,Gc,te,fd,Gd,Lc,Dc,yb,xc,re,nd,Hc,Ec,Jc,Qd,ld,Ad,Nb,Ed,bc,Ze,Vc,pg,Xc,fe,zd,ze,Xd,ie,ha,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,ab,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,
Me,Id,Td,De,Ne,hf,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=g.viewportHeight;bd.width=g.viewportWidth;bd.x=g.viewportX;bd.y=g.viewportY;
p=bd.x|0;H=bd.y|0;y="width"in bd?bd.width|0:W.framebufferWidth-p;b="height"in bd?bd.height|0:W.framebufferHeight-H;na=W.viewportWidth;W.viewportWidth=y;sa=W.viewportHeight;W.viewportHeight=b;Ja=Zd[0];Zd[0]=p;Ca=Zd[1];Zd[1]=H;P=Zd[2];Zd[2]=y;J=Zd[3];Zd[3]=b;Q=Sb[0];Sb[0]=0;Xa=Sb[1];Sb[1]=0;C=Sb[2];Sb[2]=0;O=Sb[3];Sb[3]=0;fa=xd.blend_enable;xd.blend_enable=!1;ra=Dd[0];Dd[0]=32774;ga=Dd[1];Dd[1]=32774;la=Vd[0];Vd[0]=770;M=Vd[1];Vd[1]=771;va=Vd[2];Vd[2]=1;N=Vd[3];Vd[3]=1;aa=xd.cull_enable;xd.cull_enable=
!0;xa=xd.cull_face;xd.cull_face=1029;Fa=xd.depth_enable;xd.depth_enable=!0;ca=xd.depth_func;xd.depth_func=513;Da=xd.depth_mask;xd.depth_mask=!0;qa=oe[0];oe[0]=0;wa=oe[1];oe[1]=1;R=xd.dither;xd.dither=!1;K=xd.lineWidth;xd.lineWidth=2;pd.height=g.scissorHeight;pd.width=g.scissorWidth;pd.x=g.scissorX;pd.y=g.scissorY;ka=pd.x|0;V=pd.y|0;da="width"in pd?pd.width|0:W.framebufferWidth-ka;Ta="height"in pd?pd.height|0:W.framebufferHeight-V;ea=Xe[0];Xe[0]=ka;ya=Xe[1];Xe[1]=V;Ea=Xe[2];Xe[2]=da;oa=Xe[3];Xe[3]=
Ta;Ba=xd.scissor_enable;xd.scissor_enable=!0;pa=ua.profile;ua.profile=!1;ma=g.offset;Hb=Ia.offset;Ia.offset=ma;Aa=g.count;Bd=Ia.count;Ia.count=Aa;za=Ia.primitive;Ia.primitive=1;mb=g.contextColor;Cc=Ga[24];Ga[24]=mb;bb=g.dim0A;fc=Ga[3];Ga[3]=bb;Fb=g.dim0B;Pc=Ga[5];Ga[5]=Fb;Bb=g.dim0C;gc=Ga[7];Ga[7]=Bb;pc=g.dim0D;xb=Ga[9];Ga[9]=pc;Cb=g.dim1A;Md=Ga[4];Ga[4]=Cb;Ae=g.dim1B;nc=Ga[6];Ga[6]=Ae;ac=g.dim1C;Yd=Ga[8];Ga[8]=ac;qc=g.dim1D;eb=Ga[10];Ga[10]=qc;cb=g.drwLayer;Ua=Ga[23];Ga[23]=cb;Ic=g.hiA;$e=Ga[12];
Ga[12]=Ic;Wc=g.hiB;mc=Ga[14];Ga[14]=Wc;$a=g.hiC;Z=Ga[16];Ga[16]=$a;ob=g.hiD;Gc=Ga[18];Ga[18]=ob;te=g.loA;fd=Ga[11];Ga[11]=te;Gd=g.loB;Lc=Ga[13];Ga[13]=Gd;Dc=g.loC;yb=Ga[15];Ga[15]=Dc;xc=g.loD;re=Ga[17];Ga[17]=xc;nd=g.maskHeight;Hc=Ga[22];Ga[22]=nd;Ec=g.maskTexture;Jc=Ga[25];Ga[25]=Ec;Qd=Ga[26];Ga[26]=ia;ld=g.resolution;Ad=Ga[19];Ga[19]=ld;Nb=g.viewBoxPos;Ed=Ga[20];Ga[20]=Nb;bc=g.viewBoxSize;Ze=Ga[21];Ga[21]=bc;Vc=h.buffer;h.buffer=z;pg=h.divisor;h.divisor=0;Xc=h.normalized;h.normalized=!1;fe=h.offset;
h.offset=0;zd=h.size;h.size=0;ze=h.state;h.state=1;Xd=h.stride;h.stride=0;ie=h.type;h.type=z.dtype;ha=h.w;h.w=0;Jd=h.x;h.x=0;Hd=h.y;h.y=0;md=h.z;h.z=0;Tc=t.buffer;t.buffer=L;ud=t.divisor;t.divisor=0;rd=t.normalized;t.normalized=!1;kd=t.offset;t.offset=0;vd=t.size;t.size=0;Cd=t.state;t.state=1;Fd=t.stride;t.stride=0;je=t.type;t.type=L.dtype;ye=t.w;t.w=0;Fe=t.x;t.x=0;le=t.y;t.y=0;ke=t.z;t.z=0;he=S.buffer;S.buffer=e;ve=S.divisor;S.divisor=0;de=S.normalized;S.normalized=!1;me=S.offset;S.offset=0;Oc=S.size;
S.size=0;gd=S.state;S.state=1;we=S.stride;S.stride=0;qe=S.type;S.type=e.dtype;Kd=S.w;S.w=0;Pd=S.x;S.x=0;Rd=S.y;S.y=0;Sd=S.z;S.z=0;ne=k.buffer;k.buffer=l;ab=k.divisor;k.divisor=0;Be=k.normalized;k.normalized=!1;se=k.offset;k.offset=0;Re=k.size;k.size=0;Se=k.state;k.state=1;Oe=k.stride;k.stride=0;xe=k.type;k.type=l.dtype;He=k.w;k.w=0;Je=k.x;k.x=0;Ke=k.y;k.y=0;Le=k.z;k.z=0;Ie=X.buffer;X.buffer=q;Ld=X.divisor;X.divisor=0;Wd=X.normalized;X.normalized=!1;be=X.offset;X.offset=0;ee=X.size;X.size=0;Me=X.state;
X.state=1;Id=X.stride;X.stride=0;Td=X.type;X.type=q.dtype;De=X.w;X.w=0;Ne=X.x;X.x=0;hf=X.y;X.y=0;bf=X.z;X.z=0;Te=f.buffer;f.buffer=c;Pe=f.divisor;f.divisor=0;af=f.normalized;f.normalized=!1;Ye=f.offset;f.offset=0;Ue=f.size;f.size=0;Ve=f.state;f.state=1;Ud=f.stride;f.stride=0;ae=f.type;f.type=c.dtype;We=f.w;f.w=0;jf=f.x;f.x=0;nf=f.y;f.y=0;ef=f.z;f.z=0;kf=w.buffer;w.buffer=F;lf=w.divisor;w.divisor=0;mf=w.normalized;w.normalized=!1;rf=w.offset;w.offset=0;of=w.size;w.size=0;sf=w.state;w.state=1;Bf=w.stride;
w.stride=0;Cf=w.type;w.type=F.dtype;Qe=w.w;w.w=0;Ee=w.x;w.x=0;pf=w.y;w.y=0;qf=w.z;w.z=0;Df=Y.buffer;Y.buffer=B;Gf=Y.divisor;Y.divisor=0;Af=Y.normalized;Y.normalized=!1;Ef=Y.offset;Y.offset=0;Ff=Y.size;Y.size=0;wf=Y.state;Y.state=1;xf=Y.stride;Y.stride=0;vf=Y.type;Y.type=B.dtype;yf=Y.w;Y.w=0;zf=Y.x;Y.x=0;If=Y.y;Y.y=0;Jf=Y.z;Y.z=0;Kf=D.buffer;D.buffer=G;Lf=D.divisor;D.divisor=0;tf=D.normalized;D.normalized=!1;Qf=D.offset;D.offset=0;Hf=D.size;D.size=0;uf=D.state;D.state=1;cg=D.stride;D.stride=0;Rf=D.type;
D.type=G.dtype;Sf=D.w;D.w=0;qg=D.x;D.x=0;ff=D.y;D.y=0;cf=D.z;D.z=0;Mf=E.buffer;E.buffer=U;Nf=E.divisor;E.divisor=0;dg=E.normalized;E.normalized=!1;eg=E.offset;E.offset=0;fg=E.size;E.size=0;gg=E.state;E.state=1;hg=E.stride;E.stride=0;Vf=E.type;E.type=U.dtype;Tf=E.w;E.w=0;Wf=E.x;E.x=0;Xf=E.y;E.y=0;Yf=E.z;E.z=0;ig=d.buffer;d.buffer=n;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=0;xg=d.type;d.type=n.dtype;
yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;gf=I.buffer;I.buffer=u;df=I.divisor;I.divisor=0;Of=I.normalized;I.normalized=!1;Pf=I.offset;I.offset=0;jg=I.size;I.size=0;kg=I.state;I.state=1;lg=I.stride;I.stride=0;mg=I.type;I.type=u.dtype;ng=I.w;I.w=0;Zf=I.x;I.x=0;Uf=I.y;I.y=0;$f=I.z;I.z=0;ag=a.buffer;a.buffer=x;bg=a.divisor;a.divisor=0;og=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=x.dtype;Hg=a.w;a.w=0;Ig=
a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=ta.buffer;ta.buffer=ba;Mg=ta.divisor;ta.divisor=0;Ng=ta.normalized;ta.normalized=!1;Og=ta.offset;ta.offset=0;Pg=ta.size;ta.size=0;Qg=ta.state;ta.state=1;Rg=ta.stride;ta.stride=0;Sg=ta.type;ta.type=ba.dtype;Tg=ta.w;ta.w=0;Ug=ta.x;ta.x=0;Vg=ta.y;ta.y=0;Wg=ta.z;ta.z=0;Xg=A.buffer;A.buffer=v;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=v.dtype;eh=A.w;
A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ja.buffer;ja.buffer=T;jh=ja.divisor;ja.divisor=0;kh=ja.normalized;ja.normalized=!1;lh=ja.offset;ja.offset=0;mh=ja.size;ja.size=0;nh=ja.state;ja.state=1;oh=ja.stride;ja.stride=0;ph=ja.type;ja.type=T.dtype;qh=ja.w;ja.w=0;rh=ja.x;ja.x=0;sh=ja.y;ja.y=0;th=ja.z;ja.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ua.dirty=!0;r(W,g,m);W.viewportWidth=na;W.viewportHeight=sa;Zd[0]=Ja;Zd[1]=Ca;Zd[2]=P;Zd[3]=J;Sb[0]=Q;Sb[1]=Xa;Sb[2]=C;Sb[3]=O;xd.blend_enable=fa;Dd[0]=
ra;Dd[1]=ga;Vd[0]=la;Vd[1]=M;Vd[2]=va;Vd[3]=N;xd.cull_enable=aa;xd.cull_face=xa;xd.depth_enable=Fa;xd.depth_func=ca;xd.depth_mask=Da;oe[0]=qa;oe[1]=wa;xd.dither=R;xd.lineWidth=K;Xe[0]=ea;Xe[1]=ya;Xe[2]=Ea;Xe[3]=oa;xd.scissor_enable=Ba;ua.profile=pa;Ia.offset=Hb;Ia.count=Bd;Ia.primitive=za;Ga[24]=Cc;Ga[3]=fc;Ga[5]=Pc;Ga[7]=gc;Ga[9]=xb;Ga[4]=Md;Ga[6]=nc;Ga[8]=Yd;Ga[10]=eb;Ga[23]=Ua;Ga[12]=$e;Ga[14]=mc;Ga[16]=Z;Ga[18]=Gc;Ga[11]=fd;Ga[13]=Lc;Ga[15]=yb;Ga[17]=re;Ga[22]=Hc;Ga[25]=Jc;Ga[26]=Qd;Ga[19]=Ad;
Ga[20]=Ed;Ga[21]=Ze;h.buffer=Vc;h.divisor=pg;h.normalized=Xc;h.offset=fe;h.size=zd;h.state=ze;h.stride=Xd;h.type=ie;h.w=ha;h.x=Jd;h.y=Hd;h.z=md;t.buffer=Tc;t.divisor=ud;t.normalized=rd;t.offset=kd;t.size=vd;t.state=Cd;t.stride=Fd;t.type=je;t.w=ye;t.x=Fe;t.y=le;t.z=ke;S.buffer=he;S.divisor=ve;S.normalized=de;S.offset=me;S.size=Oc;S.state=gd;S.stride=we;S.type=qe;S.w=Kd;S.x=Pd;S.y=Rd;S.z=Sd;k.buffer=ne;k.divisor=ab;k.normalized=Be;k.offset=se;k.size=Re;k.state=Se;k.stride=Oe;k.type=xe;k.w=He;k.x=Je;
k.y=Ke;k.z=Le;X.buffer=Ie;X.divisor=Ld;X.normalized=Wd;X.offset=be;X.size=ee;X.state=Me;X.stride=Id;X.type=Td;X.w=De;X.x=Ne;X.y=hf;X.z=bf;f.buffer=Te;f.divisor=Pe;f.normalized=af;f.offset=Ye;f.size=Ue;f.state=Ve;f.stride=Ud;f.type=ae;f.w=We;f.x=jf;f.y=nf;f.z=ef;w.buffer=kf;w.divisor=lf;w.normalized=mf;w.offset=rf;w.size=of;w.state=sf;w.stride=Bf;w.type=Cf;w.w=Qe;w.x=Ee;w.y=pf;w.z=qf;Y.buffer=Df;Y.divisor=Gf;Y.normalized=Af;Y.offset=Ef;Y.size=Ff;Y.state=wf;Y.stride=xf;Y.type=vf;Y.w=yf;Y.x=zf;Y.y=If;
Y.z=Jf;D.buffer=Kf;D.divisor=Lf;D.normalized=tf;D.offset=Qf;D.size=Hf;D.state=uf;D.stride=cg;D.type=Rf;D.w=Sf;D.x=qg;D.y=ff;D.z=cf;E.buffer=Mf;E.divisor=Nf;E.normalized=dg;E.offset=eg;E.size=fg;E.state=gg;E.stride=hg;E.type=Vf;E.w=Tf;E.x=Wf;E.y=Xf;E.z=Yf;d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;I.buffer=gf;I.divisor=df;I.normalized=Of;I.offset=Pf;I.size=jg;I.state=kg;I.stride=lg;I.type=mg;I.w=ng;I.x=Zf;I.y=Uf;I.z=$f;
a.buffer=ag;a.divisor=bg;a.normalized=og;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;ta.buffer=Lg;ta.divisor=Mg;ta.normalized=Ng;ta.offset=Og;ta.size=Pg;ta.state=Qg;ta.stride=Rg;ta.type=Sg;ta.w=Tg;ta.x=Ug;ta.y=Vg;ta.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ja.buffer=ih;ja.divisor=jh;ja.normalized=kh;ja.offset=lh;ja.size=mh;ja.state=nh;ja.stride=oh;ja.type=ph;ja.w=qh;ja.x=
rh;ja.y=sh;ja.z=th;$b.vert=uh;$b.frag=vh;ua.dirty=!0}}},$1:function(b,da){var K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d;K=b.attributes;L=b.current;e=b.framebuffer;l=b.gl;q=b.next;c=b.vao;F=q.blend_color;B=L.blend_color;G=q.blend_equation;U=L.blend_equation;n=q.blend_func;u=L.blend_func;x=q.colorMask;ba=L.colorMask;v=q.depth_range;T=L.depth_range;z=q.polygonOffset_offset;R=L.polygonOffset_offset;ia=q.sample_coverage;h=L.sample_coverage;t=q.scissor_box;S=L.scissor_box;k=q.stencil_func;
X=L.stencil_func;f=q.stencil_opBack;w=L.stencil_opBack;Y=q.stencil_opFront;D=L.stencil_opFront;E=q.viewport;d=L.viewport;return{poll:function(){var c,a,b,A,K,da,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa;L.dirty=!1;a=q.blend_enable;b=q.cull_enable;A=q.depth_enable;K=q.dither;da=q.polygonOffset_enable;V=q.sample_alpha;ea=q.sample_enable;O=q.scissor_enable;P=q.stencil_enable;C=q.cull_face;g=L.cull_face;N=q.depth_func;M=L.depth_func;Da=q.depth_mask;pa=L.depth_mask;m=q.frontFace;J=L.frontFace;aa=q.lineWidth;
Q=L.lineWidth;ma=q.stencil_mask;qa=L.stencil_mask;c=e.next;c!==e.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),e.cur=c);a!==L.blend_enable&&(a?l.enable(3042):l.disable(3042),L.blend_enable=a);b!==L.cull_enable&&(b?l.enable(2884):l.disable(2884),L.cull_enable=b);A!==L.depth_enable&&(A?l.enable(2929):l.disable(2929),L.depth_enable=A);K!==L.dither&&(K?l.enable(3024):l.disable(3024),L.dither=K);da!==L.polygonOffset_enable&&(da?l.enable(32823):l.disable(32823),L.polygonOffset_enable=
da);V!==L.sample_alpha&&(V?l.enable(32926):l.disable(32926),L.sample_alpha=V);ea!==L.sample_enable&&(ea?l.enable(32928):l.disable(32928),L.sample_enable=ea);O!==L.scissor_enable&&(O?l.enable(3089):l.disable(3089),L.scissor_enable=O);P!==L.stencil_enable&&(P?l.enable(2960):l.disable(2960),L.stencil_enable=P);if(F[0]!==B[0]||F[1]!==B[1]||F[2]!==B[2]||F[3]!==B[3])l.blendColor(F[0],F[1],F[2],F[3]),B[0]=F[0],B[1]=F[1],B[2]=F[2],B[3]=F[3];if(G[0]!==U[0]||G[1]!==U[1])l.blendEquationSeparate(G[0],G[1]),U[0]=
G[0],U[1]=G[1];if(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3])l.blendFuncSeparate(n[0],n[1],n[2],n[3]),u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=n[3];if(x[0]!==ba[0]||x[1]!==ba[1]||x[2]!==ba[2]||x[3]!==ba[3])l.colorMask(x[0],x[1],x[2],x[3]),ba[0]=x[0],ba[1]=x[1],ba[2]=x[2],ba[3]=x[3];C!==g&&(l.cullFace(C),L.cull_face=C);N!==M&&(l.depthFunc(N),L.depth_func=N);Da!==pa&&(l.depthMask(Da),L.depth_mask=Da);if(v[0]!==T[0]||v[1]!==T[1])l.depthRange(v[0],v[1]),T[0]=v[0],T[1]=v[1];m!==J&&(l.frontFace(m),L.frontFace=
m);aa!==Q&&(l.lineWidth(aa),L.lineWidth=aa);if(z[0]!==R[0]||z[1]!==R[1])l.polygonOffset(z[0],z[1]),R[0]=z[0],R[1]=z[1];if(ia[0]!==h[0]||ia[1]!==h[1])l.sampleCoverage(ia[0],ia[1]),h[0]=ia[0],h[1]=ia[1];if(t[0]!==S[0]||t[1]!==S[1]||t[2]!==S[2]||t[3]!==S[3])l.scissor(t[0],t[1],t[2],t[3]),S[0]=t[0],S[1]=t[1],S[2]=t[2],S[3]=t[3];if(k[0]!==X[0]||k[1]!==X[1]||k[2]!==X[2])l.stencilFunc(k[0],k[1],k[2]),X[0]=k[0],X[1]=k[1],X[2]=k[2];ma!==qa&&(l.stencilMask(ma),L.stencil_mask=ma);if(f[0]!==w[0]||f[1]!==w[1]||
f[2]!==w[2]||f[3]!==w[3])l.stencilOpSeparate(f[0],f[1],f[2],f[3]),w[0]=f[0],w[1]=f[1],w[2]=f[2],w[3]=f[3];if(Y[0]!==D[0]||Y[1]!==D[1]||Y[2]!==D[2]||Y[3]!==D[3])l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]),D[0]=Y[0],D[1]=Y[1],D[2]=Y[2],D[3]=Y[3];if(E[0]!==d[0]||E[1]!==d[1]||E[2]!==d[2]||E[3]!==d[3])l.viewport(E[0],E[1],E[2],E[3]),d[0]=E[0],d[1]=E[1],d[2]=E[2],d[3]=E[3]},refresh:function(){var b,a,ta,A,ja,Cc,V,ea,O,P,C,g,N,M,Da,pa;L.dirty=!1;a=q.blend_enable;ta=q.cull_enable;A=q.depth_enable;ja=q.dither;
Cc=q.polygonOffset_enable;V=q.sample_alpha;ea=q.sample_enable;O=q.scissor_enable;P=q.stencil_enable;C=q.cull_face;g=q.depth_func;N=q.depth_mask;M=q.frontFace;Da=q.lineWidth;pa=q.stencil_mask;(b=e.next)?l.bindFramebuffer(36160,b.framebuffer):l.bindFramebuffer(36160,null);e.cur=b;b=K[0];b.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=
null);da.vertexAttribDivisorANGLE(0,b.divisor);b=K[1];b.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(1,b.divisor);b=K[2];b.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(2),
l.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(2,b.divisor);b=K[3];b.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(3,b.divisor);b=K[4];b.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(4,b.size,b.type,b.normalized,
b.stride,b.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(4,b.divisor);b=K[5];b.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(5,b.divisor);b=K[6];b.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,b.buffer.buffer),
l.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(6,b.divisor);b=K[7];b.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(7,b.divisor);b=K[8];b.buffer?(l.enableVertexAttribArray(8),
l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(8,b.divisor);b=K[9];b.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(9,b.divisor);
b=K[10];b.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(10,b.divisor);b=K[11];b.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,b.x,b.y,b.z,
b.w),b.buffer=null);da.vertexAttribDivisorANGLE(11,b.divisor);b=K[12];b.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(12,b.divisor);b=K[13];b.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(13),
l.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(13,b.divisor);b=K[14];b.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(14,b.divisor);b=K[15];b.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(15,b.size,b.type,b.normalized,
b.stride,b.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);da.vertexAttribDivisorANGLE(15,b.divisor);c.currentVAO=null;c.setVAO(c.targetVAO);a?l.enable(3042):l.disable(3042);L.blend_enable=a;ta?l.enable(2884):l.disable(2884);L.cull_enable=ta;A?l.enable(2929):l.disable(2929);L.depth_enable=A;ja?l.enable(3024):l.disable(3024);L.dither=ja;Cc?l.enable(32823):l.disable(32823);L.polygonOffset_enable=Cc;V?l.enable(32926):l.disable(32926);L.sample_alpha=V;ea?l.enable(32928):
l.disable(32928);L.sample_enable=ea;O?l.enable(3089):l.disable(3089);L.scissor_enable=O;P?l.enable(2960):l.disable(2960);L.stencil_enable=P;l.blendColor(F[0],F[1],F[2],F[3]);B[0]=F[0];B[1]=F[1];B[2]=F[2];B[3]=F[3];l.blendEquationSeparate(G[0],G[1]);U[0]=G[0];U[1]=G[1];l.blendFuncSeparate(n[0],n[1],n[2],n[3]);u[0]=n[0];u[1]=n[1];u[2]=n[2];u[3]=n[3];l.colorMask(x[0],x[1],x[2],x[3]);ba[0]=x[0];ba[1]=x[1];ba[2]=x[2];ba[3]=x[3];l.cullFace(C);L.cull_face=C;l.depthFunc(g);L.depth_func=g;l.depthMask(N);L.depth_mask=
N;l.depthRange(v[0],v[1]);T[0]=v[0];T[1]=v[1];l.frontFace(M);L.frontFace=M;l.lineWidth(Da);L.lineWidth=Da;l.polygonOffset(z[0],z[1]);R[0]=z[0];R[1]=z[1];l.sampleCoverage(ia[0],ia[1]);h[0]=ia[0];h[1]=ia[1];l.scissor(t[0],t[1],t[2],t[3]);S[0]=t[0];S[1]=t[1];S[2]=t[2];S[3]=t[3];l.stencilFunc(k[0],k[1],k[2]);X[0]=k[0];X[1]=k[1];X[2]=k[2];l.stencilMask(pa);L.stencil_mask=pa;l.stencilOpSeparate(f[0],f[1],f[2],f[3]);w[0]=f[0];w[1]=f[1];w[2]=f[2];w[3]=f[3];l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]);D[0]=Y[0];
D[1]=Y[1];D[2]=Y[2];D[3]=Y[3];l.viewport(E[0],E[1],E[2],E[3]);d[0]=E[0];d[1]=E[1];d[2]=E[2];d[3]=E[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Cc,V,ea,O,P,C,g,N,M,Da,pa){var m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,Bd,Hb,ga,H,sa,Ca,ra,xa,Fa,la,W,ua,Ia,za,mb,ca,xd,$b,Ga,ac,Sb;m=b.attributes;
J=b.buffer;aa=b.context;Q=b.current;ma=b.draw;qa=b.elements;Aa=b.extensions;wa=b.framebuffer;fa=b.gl;Ba=b.isBufferArgs;ka=b.next;oa=b.shader;ya=b.uniforms;Ja=b.vao;na=ka.blend_color;Xa=Q.blend_color;Ta=ka.blend_equation;r=Q.blend_equation;p=ka.blend_func;y=Q.blend_func;va=ka.colorMask;Ea=Q.colorMask;Bd=ka.depth_range;Hb=Q.depth_range;ga=ka.polygonOffset_offset;H=Q.polygonOffset_offset;sa=ka.sample_coverage;Ca=Q.sample_coverage;ra=ka.scissor_box;xa=Q.scissor_box;Fa=ka.stencil_func;la=Q.stencil_func;
W=ka.stencil_opBack;ua=Q.stencil_opBack;Ia=ka.stencil_opFront;za=Q.stencil_opFront;mb=ka.viewport;ca=Q.viewport;xd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=K;$b.divisor=1;Ga={};Ga.buffer=L;Ga.divisor=1;ac={};ac.buffer=e;ac.divisor=1;Sb={};Sb.buffer=l;Sb.divisor=1;return{batch:function(c,f){var h,l,k,b,p,q;h=wa.next;h!==wa.cur&&(h?fa.bindFramebuffer(36160,h.framebuffer):fa.bindFramebuffer(36160,null),wa.cur=h);if(Q.dirty){var t,
na,e,v,ra,L,z,x,B,S,K,R,F,G,T,Ta,X,ya,oa,ba,ia,mb,Wc,Bb,Fb,Z,xb,xc,Cb,Jc,mc,Hc,Xc;t=ka.dither;t!==Q.dither&&(t?fa.enable(3024):fa.disable(3024),Q.dither=t);na=ka.depth_func;na!==Q.depth_func&&(fa.depthFunc(na),Q.depth_func=na);e=Bd[0];v=Bd[1];if(e!==Hb[0]||v!==Hb[1])fa.depthRange(e,v),Hb[0]=e,Hb[1]=v;ra=ka.depth_mask;ra!==Q.depth_mask&&(fa.depthMask(ra),Q.depth_mask=ra);L=va[0];z=va[1];x=va[2];B=va[3];if(L!==Ea[0]||z!==Ea[1]||x!==Ea[2]||B!==Ea[3])fa.colorMask(L,z,x,B),Ea[0]=L,Ea[1]=z,Ea[2]=x,Ea[3]=
B;S=ka.cull_enable;S!==Q.cull_enable&&(S?fa.enable(2884):fa.disable(2884),Q.cull_enable=S);K=ka.cull_face;K!==Q.cull_face&&(fa.cullFace(K),Q.cull_face=K);R=ka.frontFace;R!==Q.frontFace&&(fa.frontFace(R),Q.frontFace=R);F=ka.lineWidth;F!==Q.lineWidth&&(fa.lineWidth(F),Q.lineWidth=F);G=ka.polygonOffset_enable;G!==Q.polygonOffset_enable&&(G?fa.enable(32823):fa.disable(32823),Q.polygonOffset_enable=G);T=ga[0];Ta=ga[1];if(T!==H[0]||Ta!==H[1])fa.polygonOffset(T,Ta),H[0]=T,H[1]=Ta;X=ka.sample_alpha;X!==Q.sample_alpha&&
(X?fa.enable(32926):fa.disable(32926),Q.sample_alpha=X);ya=ka.sample_enable;ya!==Q.sample_enable&&(ya?fa.enable(32928):fa.disable(32928),Q.sample_enable=ya);oa=sa[0];ba=sa[1];if(oa!==Ca[0]||ba!==Ca[1])fa.sampleCoverage(oa,ba),Ca[0]=oa,Ca[1]=ba;ia=ka.stencil_enable;ia!==Q.stencil_enable&&(ia?fa.enable(2960):fa.disable(2960),Q.stencil_enable=ia);mb=ka.stencil_mask;mb!==Q.stencil_mask&&(fa.stencilMask(mb),Q.stencil_mask=mb);Wc=Fa[0];Bb=Fa[1];Fb=Fa[2];if(Wc!==la[0]||Bb!==la[1]||Fb!==la[2])fa.stencilFunc(Wc,
Bb,Fb),la[0]=Wc,la[1]=Bb,la[2]=Fb;Z=Ia[0];xb=Ia[1];xc=Ia[2];Cb=Ia[3];if(Z!==za[0]||xb!==za[1]||xc!==za[2]||Cb!==za[3])fa.stencilOpSeparate(Z,xb,xc,Cb),za[0]=Z,za[1]=xb,za[2]=xc,za[3]=Cb;Jc=W[0];mc=W[1];Hc=W[2];Xc=W[3];if(Jc!==ua[0]||mc!==ua[1]||Hc!==ua[2]||Xc!==ua[3])fa.stencilOpSeparate(Jc,mc,Hc,Xc),ua[0]=Jc,ua[1]=mc,ua[2]=Hc,ua[3]=Xc}fa.blendColor(0,0,0,0);Xa[0]=0;Xa[1]=0;Xa[2]=0;Xa[3]=0;fa.enable(3042);Q.blend_enable=!0;fa.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;fa.blendFuncSeparate(770,
771,773,1);y[0]=770;y[1]=771;y[2]=773;y[3]=1;fa.disable(2929);Q.depth_enable=!1;fa.enable(3089);Q.scissor_enable=!0;if(l=Q.profile)k=performance.now(),da.count+=f;fa.useProgram(w.program);b=Aa.angle_instanced_arrays;var Vc,Ec,fc,Ic,pc,qc,nc,gc;Ja.setVAO(null);Vc=ja.location;Ec=m[Vc];Ec.buffer||fa.enableVertexAttribArray(Vc);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==U||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(Vc,2,5126,!1,24,0),Ec.type=
5126,Ec.size=2,Ec.buffer=U,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(b.vertexAttribDivisorANGLE(Vc,0),Ec.divisor=0);fc=V.location;Ic=m[fc];Ic.buffer||fa.enableVertexAttribArray(fc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==n||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)fa.bindBuffer(34962,n.buffer),fa.vertexAttribPointer(fc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=n,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(b.vertexAttribDivisorANGLE(fc,0),Ic.divisor=
0);pc=a.location;qc=m[pc];qc.buffer||fa.enableVertexAttribArray(pc);if(5126!==qc.type||2!==qc.size||qc.buffer!==u||!1!==qc.normalized||16!==qc.offset||24!==qc.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(pc,2,5126,!1,24,16),qc.type=5126,qc.size=2,qc.buffer=u,qc.normalized=!1,qc.offset=16,qc.stride=24;0!==qc.divisor&&(b.vertexAttribDivisorANGLE(pc,0),qc.divisor=0);(nc=ma.elements)?fa.bindBuffer(34963,nc.buffer.buffer):Ja.currentVAO&&(nc=qa.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,
nc.buffer.buffer);gc=ma.offset;for(p=0;p<f;++p){q=c[p];var bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,ha,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc;bb=q.viewport;bc=bb.x|0;yb=bb.y|0;eb="width"in bb?bb.width|0:aa.framebufferWidth-bc;Nb="height"in
bb?bb.height|0:aa.framebufferHeight-yb;cb=aa.viewportWidth;aa.viewportWidth=eb;ob=aa.viewportHeight;aa.viewportHeight=Nb;fa.viewport(bc,yb,eb,Nb);ca[0]=bc;ca[1]=yb;ca[2]=eb;ca[3]=Nb;Ua=q.viewport;hd=Ua.x|0;Ib=Ua.y|0;Jb="width"in Ua?Ua.width|0:aa.framebufferWidth-hd;rc="height"in Ua?Ua.height|0:aa.framebufferHeight-Ib;fa.scissor(hd,Ib,Jb,rc);xa[0]=hd;xa[1]=Ib;xa[2]=Jb;xa[3]=rc;Ob=Y.call(this,aa,q,p);ac.offset=Ob;jb=!1;Gb=null;Db=0;wb=!1;Yb=hb=0;Pb=1;qb=0;Ra=5126;ib=cc=zb=Ub=0;Ba(ac)?(jb=!0,Gb=J.createStream(34962,
ac),Ra=Gb.dtype):(Gb=J.getBuffer(ac))?Ra=Gb.dtype:"constant"in ac?(Pb=2,"number"===typeof ac.constant?(zb=ac.constant,cc=ib=Ub=0):(zb=0<ac.constant.length?ac.constant[0]:0,cc=1<ac.constant.length?ac.constant[1]:0,ib=2<ac.constant.length?ac.constant[2]:0,Ub=3<ac.constant.length?ac.constant[3]:0)):(Gb=Ba(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Ra="type"in ac?xd[ac.type]:Gb.dtype,wb=!!ac.normalized,Yb=ac.size|0,hb=ac.offset|0,qb=ac.stride|0,Db=ac.divisor|0);pb=P.location;Ha=
m[pb];if(1===Pb){Ha.buffer||fa.enableVertexAttribArray(pb);rb=Yb||2;if(Ha.type!==Ra||Ha.size!==rb||Ha.buffer!==Gb||Ha.normalized!==wb||Ha.offset!==hb||Ha.stride!==qb)fa.bindBuffer(34962,Gb.buffer),fa.vertexAttribPointer(pb,rb,Ra,wb,qb,hb),Ha.type=Ra,Ha.size=rb,Ha.buffer=Gb,Ha.normalized=wb,Ha.offset=hb,Ha.stride=qb;Ha.divisor!==Db&&(b.vertexAttribDivisorANGLE(pb,Db),Ha.divisor=Db)}else if(Ha.buffer&&(fa.disableVertexAttribArray(pb),Ha.buffer=null),Ha.x!==zb||Ha.y!==cc||Ha.z!==ib||Ha.w!==Ub)fa.vertexAttrib4f(pb,
zb,cc,ib,Ub),Ha.x=zb,Ha.y=cc,Ha.z=ib,Ha.w=Ub;Ka=D.call(this,aa,q,p);Sb.offset=Ka;fb=!1;gb=null;La=0;kb=!1;tb=Va=0;sb=1;Oa=0;tc=5126;Ma=Eb=Kb=Qa=0;Ba(Sb)?(fb=!0,gb=J.createStream(34962,Sb),tc=gb.dtype):(gb=J.getBuffer(Sb))?tc=gb.dtype:"constant"in Sb?(sb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Ma=Qa=0):(Kb=0<Sb.constant.length?Sb.constant[0]:0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?Sb.constant[2]:0,Qa=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Ba(Sb.buffer)?J.createStream(34962,
Sb.buffer):J.getBuffer(Sb.buffer),tc="type"in Sb?xd[Sb.type]:gb.dtype,kb=!!Sb.normalized,tb=Sb.size|0,Va=Sb.offset|0,Oa=Sb.stride|0,La=Sb.divisor|0);yd=C.location;Ya=m[yd];if(1===sb){Ya.buffer||fa.enableVertexAttribArray(yd);Lb=tb||2;if(Ya.type!==tc||Ya.size!==Lb||Ya.buffer!==gb||Ya.normalized!==kb||Ya.offset!==Va||Ya.stride!==Oa)fa.bindBuffer(34962,gb.buffer),fa.vertexAttribPointer(yd,Lb,tc,kb,Oa,Va),Ya.type=tc,Ya.size=Lb,Ya.buffer=gb,Ya.normalized=kb,Ya.offset=Va,Ya.stride=Oa;Ya.divisor!==La&&(b.vertexAttribDivisorANGLE(yd,
La),Ya.divisor=La)}else if(Ya.buffer&&(fa.disableVertexAttribArray(yd),Ya.buffer=null),Ya.x!==Kb||Ya.y!==Eb||Ya.z!==Ma||Ya.w!==Qa)fa.vertexAttrib4f(yd,Kb,Eb,Ma,Qa),Ya.x=Kb,Ya.y=Eb,Ya.z=Ma,Ya.w=Qa;Mb=E.call(this,aa,q,p);Ga.offset=Mb;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;hc=5126;kc=db=vc=Ac=0;Ba(Ga)?(lb=!0,Na=J.createStream(34962,Ga),hc=Na.dtype):(Na=J.getBuffer(Ga))?hc=Na.dtype:"constant"in Ga?(Sa=2,"number"===typeof Ga.constant?(vc=Ga.constant,db=kc=Ac=0):(vc=0<Ga.constant.length?Ga.constant[0]:
0,db=1<Ga.constant.length?Ga.constant[1]:0,kc=2<Ga.constant.length?Ga.constant[2]:0,Ac=3<Ga.constant.length?Ga.constant[3]:0)):(Na=Ba(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),hc="type"in Ga?xd[Ga.type]:Na.dtype,Pa=!!Ga.normalized,vb=Ga.size|0,ub=Ga.offset|0,nb=Ga.stride|0,Zb=Ga.divisor|0);qd=Cc.location;Wa=m[qd];if(1===Sa){Wa.buffer||fa.enableVertexAttribArray(qd);Mc=vb||4;if(Wa.type!==hc||Wa.size!==Mc||Wa.buffer!==Na||Wa.normalized!==Pa||Wa.offset!==ub||Wa.stride!==nb)fa.bindBuffer(34962,
Na.buffer),fa.vertexAttribPointer(qd,Mc,hc,Pa,nb,ub),Wa.type=hc,Wa.size=Mc,Wa.buffer=Na,Wa.normalized=Pa,Wa.offset=ub,Wa.stride=nb;Wa.divisor!==Zb&&(b.vertexAttribDivisorANGLE(qd,Zb),Wa.divisor=Zb)}else if(Wa.buffer&&(fa.disableVertexAttribArray(qd),Wa.buffer=null),Wa.x!==vc||Wa.y!==db||Wa.z!==kc||Wa.w!==Ac)fa.vertexAttrib4f(qd,vc,db,kc,Ac),Wa.x=vc,Wa.y=db,Wa.z=kc,Wa.w=Ac;Ab=d.call(this,aa,q,p);$b.offset=Ab;Za=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;pe=0;Fc=5126;td=Yc=Nc=sd=0;Ba($b)?(Za=!0,Vb=J.createStream(34962,
$b),Fc=Vb.dtype):(Vb=J.getBuffer($b))?Fc=Vb.dtype:"constant"in $b?(Rb=2,"number"===typeof $b.constant?(Nc=$b.constant,Yc=td=sd=0):(Nc=0<$b.constant.length?$b.constant[0]:0,Yc=1<$b.constant.length?$b.constant[1]:0,td=2<$b.constant.length?$b.constant[2]:0,sd=3<$b.constant.length?$b.constant[3]:0)):(Vb=Ba($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),Fc="type"in $b?xd[$b.type]:Vb.dtype,Wb=!!$b.normalized,Kc=$b.size|0,Qb=$b.offset|0,pe=$b.stride|0,uc=$b.divisor|0);oc=A.location;wc=
m[oc];if(1===Rb){wc.buffer||fa.enableVertexAttribArray(oc);ic=Kc||4;if(wc.type!==Fc||wc.size!==ic||wc.buffer!==Vb||wc.normalized!==Wb||wc.offset!==Qb||wc.stride!==pe)fa.bindBuffer(34962,Vb.buffer),fa.vertexAttribPointer(oc,ic,Fc,Wb,pe,Qb),wc.type=Fc,wc.size=ic,wc.buffer=Vb,wc.normalized=Wb,wc.offset=Qb,wc.stride=pe;wc.divisor!==uc&&(b.vertexAttribDivisorANGLE(oc,uc),wc.divisor=uc)}else if(wc.buffer&&(fa.disableVertexAttribArray(oc),wc.buffer=null),wc.x!==Nc||wc.y!==Yc||wc.z!==td||wc.w!==sd)fa.vertexAttrib4f(oc,
Nc,Yc,td,sd),wc.x=Nc,wc.y=Yc,wc.z=td,wc.w=sd;$a=I.call(this,aa,q,p);sc=$a[0];Xb=$a[1];jc=$a[2];Bc=$a[3];p&&Tb===sc&&ec===Xb&&yc===jc&&cd===Bc||(Tb=sc,ec=Xb,yc=jc,cd=Bc,fa.uniform4f(pa.location,sc,Xb,jc,Bc));Qc=q.lineWidth;p&&Rc===Qc||(Rc=Qc,fa.uniform1f(ea.location,Qc));Sc=q.capSize;p&&Zc===Sc||(Zc=Sc,fa.uniform1f(ta.location,Sc));od=q.scale;dd=od[0];lc=od[1];p&&$c===dd&&dc===lc||($c=dd,dc=lc,fa.uniform2f(g.location,dd,lc));ad=q.scaleFract;Uc=ad[0];zc=ad[1];p&&ed===Uc&&id===zc||(ed=Uc,id=zc,fa.uniform2f(N.location,
Uc,zc));ha=q.translate;wd=ha[0];jd=ha[1];p&&ue===wd&&Ce===jd||(ue=wd,Ce=jd,fa.uniform2f(M.location,wd,jd));Od=q.translateFract;ge=Od[0];$d=Od[1];p&&ce===ge&&Jd===$d||(ce=ge,Jd=$d,fa.uniform2f(Da.location,ge,$d));Hd=q.opacity;p&&md===Hd||(md=Hd,fa.uniform1f(O.location,Hd));Tc=q.count;0<Tc?nc?b.drawElementsInstancedANGLE(4,36,nc.type,gc<<(nc.type-5121>>1),Tc):b.drawArraysInstancedANGLE(4,gc,36,Tc):0>Tc&&(nc?fa.drawElements(4,36,nc.type,gc<<(nc.type-5121>>1)):fa.drawArrays(4,gc,36));aa.viewportWidth=
cb;aa.viewportHeight=ob;jb&&J.destroyStream(Gb);fb&&J.destroyStream(gb);lb&&J.destroyStream(Na);Za&&J.destroyStream(Vb)}Q.dirty=!0;Ja.setVAO(null);l&&(da.cpuTime+=performance.now()-k)},draw:function(d){var f,h,l,k,b,p,t,na,w,e,v,ra,D,I,E,L,z,S,K,R,T,Ta,X,ya,oa,ba,ia,Y,mb,Z,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb;f=wa.next;f!==wa.cur&&(f?
fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),wa.cur=f);if(Q.dirty){var Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,ha,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb;Pa=ka.dither;Pa!==Q.dither&&(Pa?fa.enable(3024):fa.disable(3024),Q.dither=Pa);ub=ka.depth_func;ub!==Q.depth_func&&(fa.depthFunc(ub),Q.depth_func=ub);vb=Bd[0];Sa=Bd[1];if(vb!==Hb[0]||Sa!==Hb[1])fa.depthRange(vb,Sa),Hb[0]=vb,Hb[1]=Sa;nb=ka.depth_mask;nb!==Q.depth_mask&&(fa.depthMask(nb),Q.depth_mask=nb);hc=
va[0];Ac=va[1];vc=va[2];db=va[3];if(hc!==Ea[0]||Ac!==Ea[1]||vc!==Ea[2]||db!==Ea[3])fa.colorMask(hc,Ac,vc,db),Ea[0]=hc,Ea[1]=Ac,Ea[2]=vc,Ea[3]=db;kc=ka.cull_enable;kc!==Q.cull_enable&&(kc?fa.enable(2884):fa.disable(2884),Q.cull_enable=kc);qd=ka.cull_face;qd!==Q.cull_face&&(fa.cullFace(qd),Q.cull_face=qd);Wa=ka.frontFace;Wa!==Q.frontFace&&(fa.frontFace(Wa),Q.frontFace=Wa);Mc=ka.lineWidth;Mc!==Q.lineWidth&&(fa.lineWidth(Mc),Q.lineWidth=Mc);Ab=ka.polygonOffset_enable;Ab!==Q.polygonOffset_enable&&(Ab?
fa.enable(32823):fa.disable(32823),Q.polygonOffset_enable=Ab);Za=ga[0];Vb=ga[1];if(Za!==H[0]||Vb!==H[1])fa.polygonOffset(Za,Vb),H[0]=Za,H[1]=Vb;uc=ka.sample_alpha;uc!==Q.sample_alpha&&(uc?fa.enable(32926):fa.disable(32926),Q.sample_alpha=uc);Wb=ka.sample_enable;Wb!==Q.sample_enable&&(Wb?fa.enable(32928):fa.disable(32928),Q.sample_enable=Wb);Qb=sa[0];Kc=sa[1];if(Qb!==Ca[0]||Kc!==Ca[1])fa.sampleCoverage(Qb,Kc),Ca[0]=Qb,Ca[1]=Kc;Rb=ka.stencil_enable;Rb!==Q.stencil_enable&&(Rb?fa.enable(2960):fa.disable(2960),
Q.stencil_enable=Rb);ha=ka.stencil_mask;ha!==Q.stencil_mask&&(fa.stencilMask(ha),Q.stencil_mask=ha);Fc=Fa[0];sd=Fa[1];Nc=Fa[2];if(Fc!==la[0]||sd!==la[1]||Nc!==la[2])fa.stencilFunc(Fc,sd,Nc),la[0]=Fc,la[1]=sd,la[2]=Nc;Yc=Ia[0];td=Ia[1];oc=Ia[2];wc=Ia[3];if(Yc!==za[0]||td!==za[1]||oc!==za[2]||wc!==za[3])fa.stencilOpSeparate(Yc,td,oc,wc),za[0]=Yc,za[1]=td,za[2]=oc,za[3]=wc;ic=W[0];$a=W[1];sc=W[2];Tb=W[3];if(ic!==ua[0]||$a!==ua[1]||sc!==ua[2]||Tb!==ua[3])fa.stencilOpSeparate(ic,$a,sc,Tb),ua[0]=ic,ua[1]=
$a,ua[2]=sc,ua[3]=Tb}h=d.viewport;l=h.x|0;k=h.y|0;b="width"in h?h.width|0:aa.framebufferWidth-l;p="height"in h?h.height|0:aa.framebufferHeight-k;t=aa.viewportWidth;aa.viewportWidth=b;na=aa.viewportHeight;aa.viewportHeight=p;fa.viewport(l,k,b,p);ca[0]=l;ca[1]=k;ca[2]=b;ca[3]=p;fa.blendColor(0,0,0,0);Xa[0]=0;Xa[1]=0;Xa[2]=0;Xa[3]=0;fa.enable(3042);Q.blend_enable=!0;fa.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;fa.blendFuncSeparate(770,771,773,1);y[0]=770;y[1]=771;y[2]=773;y[3]=1;fa.disable(2929);
Q.depth_enable=!1;w=d.viewport;e=w.x|0;v=w.y|0;ra="width"in w?w.width|0:aa.framebufferWidth-e;D="height"in w?w.height|0:aa.framebufferHeight-v;fa.scissor(e,v,ra,D);xa[0]=e;xa[1]=v;xa[2]=ra;xa[3]=D;fa.enable(3089);Q.scissor_enable=!0;if(I=Q.profile)E=performance.now(),da.count++;fa.useProgram(q.program);L=Aa.angle_instanced_arrays;Ja.setVAO(null);z=c.call(this,aa,d,0);ac.offset=z;S=!1;K=null;R=0;T=!1;X=Ta=0;ya=1;oa=0;ba=5126;Z=mb=Y=ia=0;Ba(ac)?(S=!0,K=J.createStream(34962,ac),ba=K.dtype):(K=J.getBuffer(ac))?
ba=K.dtype:"constant"in ac?(ya=2,"number"===typeof ac.constant?(Y=ac.constant,mb=Z=ia=0):(Y=0<ac.constant.length?ac.constant[0]:0,mb=1<ac.constant.length?ac.constant[1]:0,Z=2<ac.constant.length?ac.constant[2]:0,ia=3<ac.constant.length?ac.constant[3]:0)):(K=Ba(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),ba="type"in ac?xd[ac.type]:K.dtype,T=!!ac.normalized,X=ac.size|0,Ta=ac.offset|0,oa=ac.stride|0,R=ac.divisor|0);Bb=P.location;Fb=m[Bb];if(1===ya){Fb.buffer||fa.enableVertexAttribArray(Bb);
Dc=X||2;if(Fb.type!==ba||Fb.size!==Dc||Fb.buffer!==K||Fb.normalized!==T||Fb.offset!==Ta||Fb.stride!==oa)fa.bindBuffer(34962,K.buffer),fa.vertexAttribPointer(Bb,Dc,ba,T,oa,Ta),Fb.type=ba,Fb.size=Dc,Fb.buffer=K,Fb.normalized=T,Fb.offset=Ta,Fb.stride=oa;Fb.divisor!==R&&(L.vertexAttribDivisorANGLE(Bb,R),Fb.divisor=R)}else if(Fb.buffer&&(fa.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==Y||Fb.y!==mb||Fb.z!==Z||Fb.w!==ia)fa.vertexAttrib4f(Bb,Y,mb,Z,ia),Fb.x=Y,Fb.y=mb,Fb.z=Z,Fb.w=ia;xb=F.call(this,
aa,d,0);Sb.offset=xb;xc=!1;Cb=null;Jc=0;mc=!1;Xc=Hc=0;Vc=1;Ec=0;fc=5126;nc=qc=pc=Ic=0;Ba(Sb)?(xc=!0,Cb=J.createStream(34962,Sb),fc=Cb.dtype):(Cb=J.getBuffer(Sb))?fc=Cb.dtype:"constant"in Sb?(Vc=2,"number"===typeof Sb.constant?(pc=Sb.constant,qc=nc=Ic=0):(pc=0<Sb.constant.length?Sb.constant[0]:0,qc=1<Sb.constant.length?Sb.constant[1]:0,nc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Ba(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),fc="type"in
Sb?xd[Sb.type]:Cb.dtype,mc=!!Sb.normalized,Xc=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Jc=Sb.divisor|0);gc=C.location;bb=m[gc];if(1===Vc){bb.buffer||fa.enableVertexAttribArray(gc);bc=Xc||2;if(bb.type!==fc||bb.size!==bc||bb.buffer!==Cb||bb.normalized!==mc||bb.offset!==Hc||bb.stride!==Ec)fa.bindBuffer(34962,Cb.buffer),fa.vertexAttribPointer(gc,bc,fc,mc,Ec,Hc),bb.type=fc,bb.size=bc,bb.buffer=Cb,bb.normalized=mc,bb.offset=Hc,bb.stride=Ec;bb.divisor!==Jc&&(L.vertexAttribDivisorANGLE(gc,Jc),bb.divisor=Jc)}else if(bb.buffer&&
(fa.disableVertexAttribArray(gc),bb.buffer=null),bb.x!==pc||bb.y!==qc||bb.z!==nc||bb.w!==Ic)fa.vertexAttrib4f(gc,pc,qc,nc,Ic),bb.x=pc,bb.y=qc,bb.z=nc,bb.w=Ic;yb=B.call(this,aa,d,0);Ga.offset=yb;eb=!1;Nb=null;cb=0;ob=!1;hd=Ua=0;Ib=1;Jb=0;rc=5126;Db=Gb=jb=Ob=0;Ba(Ga)?(eb=!0,Nb=J.createStream(34962,Ga),rc=Nb.dtype):(Nb=J.getBuffer(Ga))?rc=Nb.dtype:"constant"in Ga?(Ib=2,"number"===typeof Ga.constant?(jb=Ga.constant,Gb=Db=Ob=0):(jb=0<Ga.constant.length?Ga.constant[0]:0,Gb=1<Ga.constant.length?Ga.constant[1]:
0,Db=2<Ga.constant.length?Ga.constant[2]:0,Ob=3<Ga.constant.length?Ga.constant[3]:0)):(Nb=Ba(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),rc="type"in Ga?xd[Ga.type]:Nb.dtype,ob=!!Ga.normalized,hd=Ga.size|0,Ua=Ga.offset|0,Jb=Ga.stride|0,cb=Ga.divisor|0);wb=Cc.location;hb=m[wb];if(1===Ib){hb.buffer||fa.enableVertexAttribArray(wb);Yb=hd||4;if(hb.type!==rc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Ua||hb.stride!==Jb)fa.bindBuffer(34962,Nb.buffer),fa.vertexAttribPointer(wb,
Yb,rc,ob,Jb,Ua),hb.type=rc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Ua,hb.stride=Jb;hb.divisor!==cb&&(L.vertexAttribDivisorANGLE(wb,cb),hb.divisor=cb)}else if(hb.buffer&&(fa.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)fa.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=G.call(this,aa,d,0);$b.offset=Pb;qb=!1;Ra=null;Ub=0;zb=!1;ib=cc=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;Ba($b)?(qb=!0,Ra=J.createStream(34962,$b),rb=Ra.dtype):(Ra=J.getBuffer($b))?
rb=Ra.dtype:"constant"in $b?(pb=2,"number"===typeof $b.constant?(fb=$b.constant,gb=La=Ka=0):(fb=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,La=2<$b.constant.length?$b.constant[2]:0,Ka=3<$b.constant.length?$b.constant[3]:0)):(Ra=Ba($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),rb="type"in $b?xd[$b.type]:Ra.dtype,zb=!!$b.normalized,ib=$b.size|0,cc=$b.offset|0,Ha=$b.stride|0,Ub=$b.divisor|0);kb=A.location;Va=m[kb];if(1===pb){Va.buffer||fa.enableVertexAttribArray(kb);
tb=ib||4;if(Va.type!==rb||Va.size!==tb||Va.buffer!==Ra||Va.normalized!==zb||Va.offset!==cc||Va.stride!==Ha)fa.bindBuffer(34962,Ra.buffer),fa.vertexAttribPointer(kb,tb,rb,zb,Ha,cc),Va.type=rb,Va.size=tb,Va.buffer=Ra,Va.normalized=zb,Va.offset=cc,Va.stride=Ha;Va.divisor!==Ub&&(L.vertexAttribDivisorANGLE(kb,Ub),Va.divisor=Ub)}else if(Va.buffer&&(fa.disableVertexAttribArray(kb),Va.buffer=null),Va.x!==fb||Va.y!==gb||Va.z!==La||Va.w!==Ka)fa.vertexAttrib4f(kb,fb,gb,La,Ka),Va.x=fb,Va.y=gb,Va.z=La,Va.w=Ka;
sb=ja.location;Oa=m[sb];Oa.buffer||fa.enableVertexAttribArray(sb);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==U||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(sb,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=U,Oa.normalized=!1,Oa.offset=0,Oa.stride=24;0!==Oa.divisor&&(L.vertexAttribDivisorANGLE(sb,0),Oa.divisor=0);tc=V.location;Qa=m[tc];Qa.buffer||fa.enableVertexAttribArray(tc);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==n||!1!==Qa.normalized||
8!==Qa.offset||24!==Qa.stride)fa.bindBuffer(34962,n.buffer),fa.vertexAttribPointer(tc,2,5126,!1,24,8),Qa.type=5126,Qa.size=2,Qa.buffer=n,Qa.normalized=!1,Qa.offset=8,Qa.stride=24;0!==Qa.divisor&&(L.vertexAttribDivisorANGLE(tc,0),Qa.divisor=0);Kb=a.location;Eb=m[Kb];Eb.buffer||fa.enableVertexAttribArray(Kb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==u||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(Kb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,
Eb.buffer=u,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(L.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Ma=x.call(this,aa,d,0);fa.uniform4f(pa.location,Ma[0],Ma[1],Ma[2],Ma[3]);fa.uniform1f(ea.location,d.lineWidth);fa.uniform1f(ta.location,d.capSize);yd=d.scale;fa.uniform2f(g.location,yd[0],yd[1]);Ya=d.scaleFract;fa.uniform2f(N.location,Ya[0],Ya[1]);Lb=d.translate;fa.uniform2f(M.location,Lb[0],Lb[1]);Mb=d.translateFract;fa.uniform2f(Da.location,Mb[0],Mb[1]);fa.uniform1f(O.location,
d.opacity);(lb=ma.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ja.currentVAO&&(lb=qa.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Na=ma.offset;Zb=d.count;0<Zb?lb?L.drawElementsInstancedANGLE(4,36,lb.type,Na<<(lb.type-5121>>1),Zb):L.drawArraysInstancedANGLE(4,Na,36,Zb):0>Zb&&(lb?fa.drawElements(4,36,lb.type,Na<<(lb.type-5121>>1)):fa.drawArrays(4,Na,36));Q.dirty=!0;Ja.setVAO(null);aa.viewportWidth=t;aa.viewportHeight=na;I&&(da.cpuTime+=performance.now()-E);S&&J.destroyStream(K);
xc&&J.destroyStream(Cb);eb&&J.destroyStream(Nb);qb&&J.destroyStream(Ra)},scope:function(a,d,c){var g,r,m,l,b,H,q,y,w,e,A,sa,Ja,Ca,P,Xa,C,O,fa,ga,la,M,D,I,E,L,W,va,N,xa,Fa,x,B,ca,Da,K,qa,wa,F,G,V,ua,ea,Ea,pa,Hb,ta,Y,ja,Aa,Bd,za,Ia,Cc,Z,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,ha,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,
ad,Uc,ed,zc,id,Nd,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,ab,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld;g=a.viewport;r=g.x|0;m=g.y|0;l="width"in g?g.width|0:aa.framebufferWidth-r;b="height"in g?g.height|0:aa.framebufferHeight-m;H=aa.viewportWidth;aa.viewportWidth=l;q=aa.viewportHeight;aa.viewportHeight=b;y=mb[0];mb[0]=r;w=mb[1];mb[1]=m;e=mb[2];mb[2]=l;A=mb[3];mb[3]=b;sa=na[0];na[0]=0;Ja=na[1];na[1]=0;Ca=na[2];na[2]=0;P=na[3];na[3]=0;Xa=
ka.blend_enable;ka.blend_enable=!0;C=Ta[0];Ta[0]=32774;O=Ta[1];Ta[1]=32774;fa=p[0];p[0]=770;ga=p[1];p[1]=771;la=p[2];p[2]=773;M=p[3];p[3]=1;D=ka.depth_enable;ka.depth_enable=!1;I=a.viewport;E=I.x|0;L=I.y|0;W="width"in I?I.width|0:aa.framebufferWidth-E;va="height"in I?I.height|0:aa.framebufferHeight-L;N=ra[0];ra[0]=E;xa=ra[1];ra[1]=L;Fa=ra[2];ra[2]=W;x=ra[3];ra[3]=va;B=ka.scissor_enable;ka.scissor_enable=!0;if(ca=Q.profile)Da=performance.now(),da.count++;K=ma.count;ma.count=36;qa=a.count;wa=ma.instances;
ma.instances=qa;F=ma.primitive;ma.primitive=4;G=a.capSize;V=ya[5];ya[5]=G;ua=a.lineWidth;ea=ya[4];ya[4]=ua;Ea=a.opacity;pa=ya[10];ya[10]=Ea;Hb=a.range;ta=ya[18];ya[18]=Hb;Y=a.scale;ja=ya[6];ya[6]=Y;Aa=a.scaleFract;Bd=ya[7];ya[7]=Aa;za=a.translate;Ia=ya[8];ya[8]=za;Cc=a.translateFract;Z=ya[9];ya[9]=Cc;Ib=ba.call(this,aa,a,c);Jb=ya[3];ya[3]=Ib;rc=v.buffer;v.buffer=u;Ob=v.divisor;v.divisor=0;jb=v.normalized;v.normalized=!1;Gb=v.offset;v.offset=16;Db=v.size;v.size=0;wb=v.state;v.state=1;hb=v.stride;v.stride=
24;Yb=v.type;v.type=5126;Pb=v.w;v.w=0;qb=v.x;v.x=0;Ra=v.y;v.y=0;Ub=v.z;v.z=0;zb=T.call(this,aa,a,c);$b.offset=zb;cc=!1;ib=null;pb=0;Ha=!1;Ka=rb=0;fb=1;gb=0;La=5126;sb=tb=Va=kb=0;Ba($b)?(cc=!0,ib=J.createStream(34962,$b),La=ib.dtype):(ib=J.getBuffer($b))?La=ib.dtype:"constant"in $b?(fb=2,"number"===typeof $b.constant?(Va=$b.constant,tb=sb=kb=0):(Va=0<$b.constant.length?$b.constant[0]:0,tb=1<$b.constant.length?$b.constant[1]:0,sb=2<$b.constant.length?$b.constant[2]:0,kb=3<$b.constant.length?$b.constant[3]:
0)):(ib=Ba($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),La="type"in $b?xd[$b.type]:ib.dtype,Ha=!!$b.normalized,Ka=$b.size|0,rb=$b.offset|0,gb=$b.stride|0,pb=$b.divisor|0);Oa=z.buffer;z.buffer=ib;tc=z.divisor;z.divisor=pb;Qa=z.normalized;z.normalized=Ha;Kb=z.offset;z.offset=rb;Eb=z.size;z.size=Ka;Ma=z.state;z.state=fb;yd=z.stride;z.stride=gb;Ya=z.type;z.type=La;Lb=z.w;z.w=kb;Mb=z.x;z.x=Va;lb=z.y;z.y=tb;Na=z.z;z.z=sb;Zb=R.buffer;R.buffer=U;Pa=R.divisor;R.divisor=0;ub=R.normalized;
R.normalized=!1;vb=R.offset;R.offset=0;Sa=R.size;R.size=0;nb=R.state;R.state=1;hc=R.stride;R.stride=24;Ac=R.type;R.type=5126;vc=R.w;R.w=0;db=R.x;R.x=0;kc=R.y;R.y=0;qd=R.z;R.z=0;Wa=ia.call(this,aa,a,c);Ga.offset=Wa;Mc=!1;Ab=null;Za=0;Vb=!1;Wb=uc=0;Qb=1;Kc=0;Rb=5126;Nc=sd=Fc=ha=0;Ba(Ga)?(Mc=!0,Ab=J.createStream(34962,Ga),Rb=Ab.dtype):(Ab=J.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Fc=Ga.constant,sd=Nc=ha=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,sd=1<Ga.constant.length?
Ga.constant[1]:0,Nc=2<Ga.constant.length?Ga.constant[2]:0,ha=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Ba(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Rb="type"in Ga?xd[Ga.type]:Ab.dtype,Vb=!!Ga.normalized,Wb=Ga.size|0,uc=Ga.offset|0,Kc=Ga.stride|0,Za=Ga.divisor|0);Yc=h.buffer;h.buffer=Ab;td=h.divisor;h.divisor=Za;oc=h.normalized;h.normalized=Vb;wc=h.offset;h.offset=uc;ic=h.size;h.size=Wb;$a=h.state;h.state=Qb;sc=h.stride;h.stride=Kc;Tb=h.type;h.type=Rb;Xb=h.w;h.w=ha;ec=h.x;
h.x=Fc;jc=h.y;h.y=sd;yc=h.z;h.z=Nc;Bc=t.buffer;t.buffer=n;cd=t.divisor;t.divisor=0;Qc=t.normalized;t.normalized=!1;Rc=t.offset;t.offset=8;Sc=t.size;t.size=0;Zc=t.state;t.state=1;od=t.stride;t.stride=24;dd=t.type;t.type=5126;$c=t.w;t.w=0;lc=t.x;t.x=0;dc=t.y;t.y=0;ad=t.z;t.z=0;Uc=S.call(this,aa,a,c);ac.offset=Uc;ed=!1;zc=null;id=0;Nd=!1;ue=wd=0;jd=1;Ce=0;Od=5126;Jd=$d=ce=ge=0;Ba(ac)?(ed=!0,zc=J.createStream(34962,ac),Od=zc.dtype):(zc=J.getBuffer(ac))?Od=zc.dtype:"constant"in ac?(jd=2,"number"===typeof ac.constant?
(ce=ac.constant,$d=Jd=ge=0):(ce=0<ac.constant.length?ac.constant[0]:0,$d=1<ac.constant.length?ac.constant[1]:0,Jd=2<ac.constant.length?ac.constant[2]:0,ge=3<ac.constant.length?ac.constant[3]:0)):(zc=Ba(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Od="type"in ac?xd[ac.type]:zc.dtype,Nd=!!ac.normalized,ue=ac.size|0,wd=ac.offset|0,Ce=ac.stride|0,id=ac.divisor|0);Hd=k.buffer;k.buffer=zc;md=k.divisor;k.divisor=id;Tc=k.normalized;k.normalized=Nd;ud=k.offset;k.offset=wd;rd=k.size;k.size=
ue;kd=k.state;k.state=jd;vd=k.stride;k.stride=Ce;Cd=k.type;k.type=Od;Fd=k.w;k.w=ge;je=k.x;k.x=ce;ye=k.y;k.y=$d;ab=k.z;k.z=Jd;le=X.call(this,aa,a,c);Sb.offset=le;ke=!1;he=null;ve=0;de=!1;Oc=me=0;gd=1;we=0;qe=5126;Sd=Rd=Pd=Kd=0;Ba(Sb)?(ke=!0,he=J.createStream(34962,Sb),qe=he.dtype):(he=J.getBuffer(Sb))?qe=he.dtype:"constant"in Sb?(gd=2,"number"===typeof Sb.constant?(Pd=Sb.constant,Rd=Sd=Kd=0):(Pd=0<Sb.constant.length?Sb.constant[0]:0,Rd=1<Sb.constant.length?Sb.constant[1]:0,Sd=2<Sb.constant.length?
Sb.constant[2]:0,Kd=3<Sb.constant.length?Sb.constant[3]:0)):(he=Ba(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),qe="type"in Sb?xd[Sb.type]:he.dtype,de=!!Sb.normalized,Oc=Sb.size|0,me=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);ne=f.buffer;f.buffer=he;Ge=f.divisor;f.divisor=ve;Be=f.normalized;f.normalized=de;se=f.offset;f.offset=me;Re=f.size;f.size=Oc;Se=f.state;f.state=gd;Oe=f.stride;f.stride=we;xe=f.type;f.type=qe;He=f.w;f.w=Kd;Je=f.x;f.x=Pd;Ke=f.y;f.y=Rd;Le=f.z;f.z=Sd;Ie=oa.vert;
oa.vert=2;Ld=oa.frag;oa.frag=1;Q.dirty=!0;d(aa,a,c);aa.viewportWidth=H;aa.viewportHeight=q;mb[0]=y;mb[1]=w;mb[2]=e;mb[3]=A;na[0]=sa;na[1]=Ja;na[2]=Ca;na[3]=P;ka.blend_enable=Xa;Ta[0]=C;Ta[1]=O;p[0]=fa;p[1]=ga;p[2]=la;p[3]=M;ka.depth_enable=D;ra[0]=N;ra[1]=xa;ra[2]=Fa;ra[3]=x;ka.scissor_enable=B;ca&&(da.cpuTime+=performance.now()-Da);ma.count=K;ma.instances=wa;ma.primitive=F;ya[5]=V;ya[4]=ea;ya[10]=pa;ya[18]=ta;ya[6]=ja;ya[7]=Bd;ya[8]=Ia;ya[9]=Z;ya[3]=Jb;v.buffer=rc;v.divisor=Ob;v.normalized=jb;v.offset=
Gb;v.size=Db;v.state=wb;v.stride=hb;v.type=Yb;v.w=Pb;v.x=qb;v.y=Ra;v.z=Ub;cc&&J.destroyStream(ib);z.buffer=Oa;z.divisor=tc;z.normalized=Qa;z.offset=Kb;z.size=Eb;z.state=Ma;z.stride=yd;z.type=Ya;z.w=Lb;z.x=Mb;z.y=lb;z.z=Na;R.buffer=Zb;R.divisor=Pa;R.normalized=ub;R.offset=vb;R.size=Sa;R.state=nb;R.stride=hc;R.type=Ac;R.w=vc;R.x=db;R.y=kc;R.z=qd;Mc&&J.destroyStream(Ab);h.buffer=Yc;h.divisor=td;h.normalized=oc;h.offset=wc;h.size=ic;h.state=$a;h.stride=sc;h.type=Tb;h.w=Xb;h.x=ec;h.y=jc;h.z=yc;t.buffer=
Bc;t.divisor=cd;t.normalized=Qc;t.offset=Rc;t.size=Sc;t.state=Zc;t.stride=od;t.type=dd;t.w=$c;t.x=lc;t.y=dc;t.z=ad;ed&&J.destroyStream(zc);k.buffer=Hd;k.divisor=md;k.normalized=Tc;k.offset=ud;k.size=rd;k.state=kd;k.stride=vd;k.type=Cd;k.w=Fd;k.x=je;k.y=ye;k.z=ab;ke&&J.destroyStream(he);f.buffer=ne;f.divisor=Ge;f.normalized=Be;f.offset=se;f.size=Re;f.state=Se;f.stride=Oe;f.type=xe;f.w=He;f.x=Je;f.y=Ke;f.z=Le;oa.vert=Ie;oa.frag=Ld;Q.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(b,
da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja){var Cc,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,Bd,Hb,ga,H,sa,Ca,ra,xa,Fa,la,W;Cc=b.attributes;V=b.buffer;ea=b.context;O=b.current;P=b.draw;C=b.elements;g=b.extensions;N=b.framebuffer;M=b.gl;Da=b.isBufferArgs;pa=b.next;m=b.shader;J=b.uniforms;aa=b.vao;Q=pa.blend_color;ma=O.blend_color;qa=pa.blend_equation;Aa=O.blend_equation;wa=pa.blend_func;fa=O.blend_func;Ba=pa.colorMask;ka=O.colorMask;
oa=pa.depth_range;ya=O.depth_range;Ja=pa.polygonOffset_offset;na=O.polygonOffset_offset;Xa=pa.sample_coverage;Ta=O.sample_coverage;r=pa.scissor_box;p=O.scissor_box;y=pa.stencil_func;va=O.stencil_func;Ea=pa.stencil_opBack;Bd=O.stencil_opBack;Hb=pa.stencil_opFront;ga=O.stencil_opFront;H=pa.viewport;sa=O.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ra={divisor:1,offset:8,stride:8};xa={divisor:1,offset:8,stride:8};Fa={divisor:1,offset:16,stride:8};
la={divisor:1,offset:16,stride:8};W={divisor:1,offset:0,stride:4};return{batch:function(c,r){var m,b,H,q,J,v;m=N.next;m!==N.cur&&(m?M.bindFramebuffer(36160,m.framebuffer):M.bindFramebuffer(36160,null),N.cur=m);if(O.dirty){var Q,L,u,n,x,B,K,qa,wa,F,G,U,ba,Z,Md,Xe,Ze,$e,Gd,Ae,te,Yd,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc;Q=pa.dither;Q!==O.dither&&(Q?M.enable(3024):M.disable(3024),O.dither=Q);L=pa.depth_func;L!==O.depth_func&&(M.depthFunc(L),O.depth_func=L);u=oa[0];n=oa[1];if(u!==ya[0]||n!==ya[1])M.depthRange(u,
n),ya[0]=u,ya[1]=n;x=pa.depth_mask;x!==O.depth_mask&&(M.depthMask(x),O.depth_mask=x);B=Ba[0];K=Ba[1];qa=Ba[2];wa=Ba[3];if(B!==ka[0]||K!==ka[1]||qa!==ka[2]||wa!==ka[3])M.colorMask(B,K,qa,wa),ka[0]=B,ka[1]=K,ka[2]=qa,ka[3]=wa;F=pa.cull_enable;F!==O.cull_enable&&(F?M.enable(2884):M.disable(2884),O.cull_enable=F);G=pa.cull_face;G!==O.cull_face&&(M.cullFace(G),O.cull_face=G);U=pa.frontFace;U!==O.frontFace&&(M.frontFace(U),O.frontFace=U);ba=pa.lineWidth;ba!==O.lineWidth&&(M.lineWidth(ba),O.lineWidth=ba);
Z=pa.polygonOffset_enable;Z!==O.polygonOffset_enable&&(Z?M.enable(32823):M.disable(32823),O.polygonOffset_enable=Z);Md=Ja[0];Xe=Ja[1];if(Md!==na[0]||Xe!==na[1])M.polygonOffset(Md,Xe),na[0]=Md,na[1]=Xe;Ze=pa.sample_alpha;Ze!==O.sample_alpha&&(Ze?M.enable(32926):M.disable(32926),O.sample_alpha=Ze);$e=pa.sample_enable;$e!==O.sample_enable&&($e?M.enable(32928):M.disable(32928),O.sample_enable=$e);Gd=Xa[0];Ae=Xa[1];if(Gd!==Ta[0]||Ae!==Ta[1])M.sampleCoverage(Gd,Ae),Ta[0]=Gd,Ta[1]=Ae;te=pa.stencil_mask;
te!==O.stencil_mask&&(M.stencilMask(te),O.stencil_mask=te);Yd=y[0];Ad=y[1];Zd=y[2];if(Yd!==va[0]||Ad!==va[1]||Zd!==va[2])M.stencilFunc(Yd,Ad,Zd),va[0]=Yd,va[1]=Ad,va[2]=Zd;ld=Hb[0];bd=Hb[1];pd=Hb[2];Lc=Hb[3];if(ld!==ga[0]||bd!==ga[1]||pd!==ga[2]||Lc!==ga[3])M.stencilOpSeparate(ld,bd,pd,Lc),ga[0]=ld,ga[1]=bd,ga[2]=pd,ga[3]=Lc;nd=Ea[0];Gc=Ea[1];fd=Ea[2];Pc=Ea[3];if(nd!==Bd[0]||Gc!==Bd[1]||fd!==Bd[2]||Pc!==Bd[3])M.stencilOpSeparate(nd,Gc,fd,Pc),Bd[0]=nd,Bd[1]=Gc,Bd[2]=fd,Bd[3]=Pc}M.blendColor(0,0,0,
0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;M.enable(3042);O.blend_enable=!0;M.blendEquationSeparate(32774,32774);Aa[0]=32774;Aa[1]=32774;M.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;M.enable(3089);O.scissor_enable=!0;M.disable(2960);O.stencil_enable=!1;if(b=O.profile)H=performance.now(),da.count+=r;M.useProgram(T.program);q=g.angle_instanced_arrays;var Wc,Bb,Fb,Dc,xb;aa.setVAO(null);Wc=Y.location;Bb=Cc[Wc];Bb.buffer||M.enableVertexAttribArray(Wc);if(5126!==Bb.type||1!==Bb.size||
Bb.buffer!==e||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)M.bindBuffer(34962,e.buffer),M.vertexAttribPointer(Wc,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=e,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(q.vertexAttribDivisorANGLE(Wc,0),Bb.divisor=0);Fb=D.location;Dc=Cc[Fb];Dc.buffer||M.enableVertexAttribArray(Fb);if(5126!==Dc.type||1!==Dc.size||Dc.buffer!==l||!1!==Dc.normalized||4!==Dc.offset||8!==Dc.stride)M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(Fb,1,5126,!1,8,4),
Dc.type=5126,Dc.size=1,Dc.buffer=l,Dc.normalized=!1,Dc.offset=4,Dc.stride=8;0!==Dc.divisor&&(q.vertexAttribDivisorANGLE(Fb,0),Dc.divisor=0);(xb=P.elements)?M.bindBuffer(34963,xb.buffer.buffer):aa.currentVAO&&(xb=C.getElements(aa.currentVAO.elements))&&M.bindBuffer(34963,xb.buffer.buffer);for(J=0;J<r;++J){v=c[J];var xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,ha,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd;xc=v.viewport;Cb=xc.x|0;Jc=xc.y|0;mc="width"in xc?xc.width|0:ea.framebufferWidth-Cb;Hc="height"in xc?xc.height|0:ea.framebufferHeight-Jc;Xc=ea.viewportWidth;ea.viewportWidth=mc;Vc=ea.viewportHeight;ea.viewportHeight=Hc;M.viewport(Cb,Jc,mc,Hc);sa[0]=Cb;sa[1]=Jc;sa[2]=mc;sa[3]=Hc;(Ec=z.call(this,
ea,v,J))?M.enable(2929):M.disable(2929);O.depth_enable=Ec;fc=v.viewport;Ic=fc.x|0;pc=fc.y|0;qc="width"in fc?fc.width|0:ea.framebufferWidth-Ic;nc="height"in fc?fc.height|0:ea.framebufferHeight-pc;M.scissor(Ic,pc,qc,nc);p[0]=Ic;p[1]=pc;p[2]=qc;p[3]=nc;ra.buffer=v.positionBuffer;gc=!1;bb=null;bc=0;yb=!1;Nb=eb=0;cb=1;ob=0;Ua=5126;rc=Jb=Ib=hd=0;Da(ra)?(gc=!0,bb=V.createStream(34962,ra),Ua=bb.dtype):(bb=V.getBuffer(ra))?Ua=bb.dtype:"constant"in ra?(cb=2,"number"===typeof ra.constant?(Ib=ra.constant,Jb=
rc=hd=0):(Ib=0<ra.constant.length?ra.constant[0]:0,Jb=1<ra.constant.length?ra.constant[1]:0,rc=2<ra.constant.length?ra.constant[2]:0,hd=3<ra.constant.length?ra.constant[3]:0)):(bb=Da(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Ua="type"in ra?Ca[ra.type]:bb.dtype,yb=!!ra.normalized,Nb=ra.size|0,eb=ra.offset|0,ob=ra.stride|0,bc=ra.divisor|0);Ob=ia.location;jb=Cc[Ob];if(1===cb){jb.buffer||M.enableVertexAttribArray(Ob);Gb=Nb||2;if(jb.type!==Ua||jb.size!==Gb||jb.buffer!==bb||jb.normalized!==
yb||jb.offset!==eb||jb.stride!==ob)M.bindBuffer(34962,bb.buffer),M.vertexAttribPointer(Ob,Gb,Ua,yb,ob,eb),jb.type=Ua,jb.size=Gb,jb.buffer=bb,jb.normalized=yb,jb.offset=eb,jb.stride=ob;jb.divisor!==bc&&(q.vertexAttribDivisorANGLE(Ob,bc),jb.divisor=bc)}else if(jb.buffer&&(M.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==rc||jb.w!==hd)M.vertexAttrib4f(Ob,Ib,Jb,rc,hd),jb.x=Ib,jb.y=Jb,jb.z=rc,jb.w=hd;Fa.buffer=v.positionBuffer;Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;
Ha=pb=ib=cc=0;Da(Fa)?(Db=!0,wb=V.createStream(34962,Fa),zb=wb.dtype):(wb=V.getBuffer(Fa))?zb=wb.dtype:"constant"in Fa?(Ra=2,"number"===typeof Fa.constant?(ib=Fa.constant,pb=Ha=cc=0):(ib=0<Fa.constant.length?Fa.constant[0]:0,pb=1<Fa.constant.length?Fa.constant[1]:0,Ha=2<Fa.constant.length?Fa.constant[2]:0,cc=3<Fa.constant.length?Fa.constant[3]:0)):(wb=Da(Fa.buffer)?V.createStream(34962,Fa.buffer):V.getBuffer(Fa.buffer),zb="type"in Fa?Ca[Fa.type]:wb.dtype,Yb=!!Fa.normalized,qb=Fa.size|0,Pb=Fa.offset|
0,Ub=Fa.stride|0,hb=Fa.divisor|0);rb=t.location;Ka=Cc[rb];if(1===Ra){Ka.buffer||M.enableVertexAttribArray(rb);fb=qb||2;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)M.bindBuffer(34962,wb.buffer),M.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(q.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(M.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==
ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==cc)M.vertexAttrib4f(rb,ib,pb,Ha,cc),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=cc;xa.buffer=v.positionFractBuffer;gb=!1;La=null;kb=0;Va=!1;sb=tb=0;Oa=1;tc=0;Qa=5126;yd=Ma=Eb=Kb=0;Da(xa)?(gb=!0,La=V.createStream(34962,xa),Qa=La.dtype):(La=V.getBuffer(xa))?Qa=La.dtype:"constant"in xa?(Oa=2,"number"===typeof xa.constant?(Eb=xa.constant,Ma=yd=Kb=0):(Eb=0<xa.constant.length?xa.constant[0]:0,Ma=1<xa.constant.length?xa.constant[1]:0,yd=2<xa.constant.length?xa.constant[2]:0,Kb=3<xa.constant.length?
xa.constant[3]:0)):(La=Da(xa.buffer)?V.createStream(34962,xa.buffer):V.getBuffer(xa.buffer),Qa="type"in xa?Ca[xa.type]:La.dtype,Va=!!xa.normalized,sb=xa.size|0,tb=xa.offset|0,tc=xa.stride|0,kb=xa.divisor|0);Ya=h.location;Lb=Cc[Ya];if(1===Oa){Lb.buffer||M.enableVertexAttribArray(Ya);Mb=sb||2;if(Lb.type!==Qa||Lb.size!==Mb||Lb.buffer!==La||Lb.normalized!==Va||Lb.offset!==tb||Lb.stride!==tc)M.bindBuffer(34962,La.buffer),M.vertexAttribPointer(Ya,Mb,Qa,Va,tc,tb),Lb.type=Qa,Lb.size=Mb,Lb.buffer=La,Lb.normalized=
Va,Lb.offset=tb,Lb.stride=tc;Lb.divisor!==kb&&(q.vertexAttribDivisorANGLE(Ya,kb),Lb.divisor=kb)}else if(Lb.buffer&&(M.disableVertexAttribArray(Ya),Lb.buffer=null),Lb.x!==Eb||Lb.y!==Ma||Lb.z!==yd||Lb.w!==Kb)M.vertexAttrib4f(Ya,Eb,Ma,yd,Kb),Lb.x=Eb,Lb.y=Ma,Lb.z=yd,Lb.w=Kb;la.buffer=v.positionFractBuffer;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;hc=5126;kc=db=vc=Ac=0;Da(la)?(lb=!0,Na=V.createStream(34962,la),hc=Na.dtype):(Na=V.getBuffer(la))?hc=Na.dtype:"constant"in la?(Sa=2,"number"===typeof la.constant?
(vc=la.constant,db=kc=Ac=0):(vc=0<la.constant.length?la.constant[0]:0,db=1<la.constant.length?la.constant[1]:0,kc=2<la.constant.length?la.constant[2]:0,Ac=3<la.constant.length?la.constant[3]:0)):(Na=Da(la.buffer)?V.createStream(34962,la.buffer):V.getBuffer(la.buffer),hc="type"in la?Ca[la.type]:Na.dtype,Pa=!!la.normalized,vb=la.size|0,ub=la.offset|0,nb=la.stride|0,Zb=la.divisor|0);ha=S.location;Wa=Cc[ha];if(1===Sa){Wa.buffer||M.enableVertexAttribArray(ha);Mc=vb||2;if(Wa.type!==hc||Wa.size!==Mc||Wa.buffer!==
Na||Wa.normalized!==Pa||Wa.offset!==ub||Wa.stride!==nb)M.bindBuffer(34962,Na.buffer),M.vertexAttribPointer(ha,Mc,hc,Pa,nb,ub),Wa.type=hc,Wa.size=Mc,Wa.buffer=Na,Wa.normalized=Pa,Wa.offset=ub,Wa.stride=nb;Wa.divisor!==Zb&&(q.vertexAttribDivisorANGLE(ha,Zb),Wa.divisor=Zb)}else if(Wa.buffer&&(M.disableVertexAttribArray(ha),Wa.buffer=null),Wa.x!==vc||Wa.y!==db||Wa.z!==kc||Wa.w!==Ac)M.vertexAttrib4f(ha,vc,db,kc,Ac),Wa.x=vc,Wa.y=db,Wa.z=kc,Wa.w=Ac;W.buffer=v.colorBuffer;Ab=!1;Za=null;Vb=0;uc=!1;Qb=Wb=0;
Kc=1;Rb=0;pe=5126;Yc=Nc=sd=Fc=0;Da(W)?(Ab=!0,Za=V.createStream(34962,W),pe=Za.dtype):(Za=V.getBuffer(W))?pe=Za.dtype:"constant"in W?(Kc=2,"number"===typeof W.constant?(sd=W.constant,Nc=Yc=Fc=0):(sd=0<W.constant.length?W.constant[0]:0,Nc=1<W.constant.length?W.constant[1]:0,Yc=2<W.constant.length?W.constant[2]:0,Fc=3<W.constant.length?W.constant[3]:0)):(Za=Da(W.buffer)?V.createStream(34962,W.buffer):V.getBuffer(W.buffer),pe="type"in W?Ca[W.type]:Za.dtype,uc=!!W.normalized,Qb=W.size|0,Wb=W.offset|0,
Rb=W.stride|0,Vb=W.divisor|0);td=k.location;oc=Cc[td];if(1===Kc){oc.buffer||M.enableVertexAttribArray(td);wc=Qb||4;if(oc.type!==pe||oc.size!==wc||oc.buffer!==Za||oc.normalized!==uc||oc.offset!==Wb||oc.stride!==Rb)M.bindBuffer(34962,Za.buffer),M.vertexAttribPointer(td,wc,pe,uc,Rb,Wb),oc.type=pe,oc.size=wc,oc.buffer=Za,oc.normalized=uc,oc.offset=Wb,oc.stride=Rb;oc.divisor!==Vb&&(q.vertexAttribDivisorANGLE(td,Vb),oc.divisor=Vb)}else if(oc.buffer&&(M.disableVertexAttribArray(td),oc.buffer=null),oc.x!==
sd||oc.y!==Nc||oc.z!==Yc||oc.w!==Fc)M.vertexAttrib4f(td,sd,Nc,Yc,Fc),oc.x=sd,oc.y=Nc,oc.z=Yc,oc.w=Fc;ic=v.scale;$a=ic[0];Tb=ic[1];J&&sc===$a&&Xb===Tb||(sc=$a,Xb=Tb,M.uniform2f(d.location,$a,Tb));ec=v.scaleFract;jc=ec[0];Bc=ec[1];J&&yc===jc&&cd===Bc||(yc=jc,cd=Bc,M.uniform2f(I.location,jc,Bc));Qc=v.translate;Rc=Qc[0];Zc=Qc[1];J&&Sc===Rc&&od===Zc||(Sc=Rc,od=Zc,M.uniform2f(ta.location,Rc,Zc));dd=v.translateFract;$c=dd[0];dc=dd[1];J&&lc===$c&&ad===dc||(lc=$c,ad=dc,M.uniform2f(A.location,$c,dc));Uc=v.thickness;
J&&ed===Uc||(ed=Uc,M.uniform1f(a.location,Uc));zc=v.depth;J&&id===zc||(id=zc,M.uniform1f(w.location,zc));Nd=R.call(this,ea,v,J);wd=Nd[0];jd=Nd[1];Od=Nd[2];ce=Nd[3];J&&ue===wd&&Ce===jd&&ge===Od&&$d===ce||(ue=wd,Ce=jd,ge=Od,$d=ce,M.uniform4f(ja.location,wd,jd,Od,ce));Jd=v.dashLength;J&&Hd===Jd||(Hd=Jd,M.uniform1f(X.location,Jd));md=v.opacity;J&&Tc===md||(Tc=md,M.uniform1f(E.location,md));(ud=v.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);rd=ud._texture;M.uniform1i(f.location,rd.bind());
kd=v.count;0<kd?xb?q.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),kd):q.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(xb?M.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):M.drawArrays(5,0,4));ea.viewportWidth=Xc;ea.viewportHeight=Vc;gc&&V.destroyStream(bb);Db&&V.destroyStream(wb);gb&&V.destroyStream(La);lb&&V.destroyStream(Na);Ab&&V.destroyStream(Za);rd.unbind()}O.dirty=!0;aa.setVAO(null);b&&(da.cpuTime+=performance.now()-H)},draw:function(c){var r,m,b,H,J,v,Q,u,z,n,x,B,qa,wa,R,F,G,T,U,
ba,Z,Md,Xe,Ze,$e,Gd,Ae,te,Yd,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,ha,Ya,Lb,Mb,lb,Na,Zb,Pa,ub;r=N.next;r!==N.cur&&(r?M.bindFramebuffer(36160,r.framebuffer):M.bindFramebuffer(36160,null),N.cur=r);if(O.dirty){var vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb;vb=pa.dither;vb!==
O.dither&&(vb?M.enable(3024):M.disable(3024),O.dither=vb);Sa=pa.depth_func;Sa!==O.depth_func&&(M.depthFunc(Sa),O.depth_func=Sa);nb=oa[0];hc=oa[1];if(nb!==ya[0]||hc!==ya[1])M.depthRange(nb,hc),ya[0]=nb,ya[1]=hc;Ac=pa.depth_mask;Ac!==O.depth_mask&&(M.depthMask(Ac),O.depth_mask=Ac);vc=Ba[0];db=Ba[1];kc=Ba[2];qd=Ba[3];if(vc!==ka[0]||db!==ka[1]||kc!==ka[2]||qd!==ka[3])M.colorMask(vc,db,kc,qd),ka[0]=vc,ka[1]=db,ka[2]=kc,ka[3]=qd;Wa=pa.cull_enable;Wa!==O.cull_enable&&(Wa?M.enable(2884):M.disable(2884),O.cull_enable=
Wa);Mc=pa.cull_face;Mc!==O.cull_face&&(M.cullFace(Mc),O.cull_face=Mc);Ab=pa.frontFace;Ab!==O.frontFace&&(M.frontFace(Ab),O.frontFace=Ab);Za=pa.lineWidth;Za!==O.lineWidth&&(M.lineWidth(Za),O.lineWidth=Za);Vb=pa.polygonOffset_enable;Vb!==O.polygonOffset_enable&&(Vb?M.enable(32823):M.disable(32823),O.polygonOffset_enable=Vb);uc=Ja[0];Wb=Ja[1];if(uc!==na[0]||Wb!==na[1])M.polygonOffset(uc,Wb),na[0]=uc,na[1]=Wb;Qb=pa.sample_alpha;Qb!==O.sample_alpha&&(Qb?M.enable(32926):M.disable(32926),O.sample_alpha=
Qb);Kc=pa.sample_enable;Kc!==O.sample_enable&&(Kc?M.enable(32928):M.disable(32928),O.sample_enable=Kc);Rb=Xa[0];pe=Xa[1];if(Rb!==Ta[0]||pe!==Ta[1])M.sampleCoverage(Rb,pe),Ta[0]=Rb,Ta[1]=pe;Fc=pa.stencil_mask;Fc!==O.stencil_mask&&(M.stencilMask(Fc),O.stencil_mask=Fc);sd=y[0];Nc=y[1];Yc=y[2];if(sd!==va[0]||Nc!==va[1]||Yc!==va[2])M.stencilFunc(sd,Nc,Yc),va[0]=sd,va[1]=Nc,va[2]=Yc;td=Hb[0];oc=Hb[1];wc=Hb[2];ic=Hb[3];if(td!==ga[0]||oc!==ga[1]||wc!==ga[2]||ic!==ga[3])M.stencilOpSeparate(td,oc,wc,ic),ga[0]=
td,ga[1]=oc,ga[2]=wc,ga[3]=ic;$a=Ea[0];sc=Ea[1];Tb=Ea[2];Xb=Ea[3];if($a!==Bd[0]||sc!==Bd[1]||Tb!==Bd[2]||Xb!==Bd[3])M.stencilOpSeparate($a,sc,Tb,Xb),Bd[0]=$a,Bd[1]=sc,Bd[2]=Tb,Bd[3]=Xb}m=c.viewport;b=m.x|0;H=m.y|0;J="width"in m?m.width|0:ea.framebufferWidth-b;v="height"in m?m.height|0:ea.framebufferHeight-H;Q=ea.viewportWidth;ea.viewportWidth=J;u=ea.viewportHeight;ea.viewportHeight=v;M.viewport(b,H,J,v);sa[0]=b;sa[1]=H;sa[2]=J;sa[3]=v;M.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;M.enable(3042);
O.blend_enable=!0;M.blendEquationSeparate(32774,32774);Aa[0]=32774;Aa[1]=32774;M.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(z=K.call(this,ea,c,0))?M.enable(2929):M.disable(2929);O.depth_enable=z;n=c.viewport;x=n.x|0;B=n.y|0;qa="width"in n?n.width|0:ea.framebufferWidth-x;wa="height"in n?n.height|0:ea.framebufferHeight-B;M.scissor(x,B,qa,wa);p[0]=x;p[1]=B;p[2]=qa;p[3]=wa;M.enable(3089);O.scissor_enable=!0;M.disable(2960);O.stencil_enable=!1;if(R=O.profile)F=performance.now(),
da.count++;M.useProgram(L.program);G=g.angle_instanced_arrays;aa.setVAO(null);ra.buffer=c.positionBuffer;T=!1;U=null;ba=0;Z=!1;Xe=Md=0;Ze=1;$e=0;Gd=5126;Ad=Yd=te=Ae=0;Da(ra)?(T=!0,U=V.createStream(34962,ra),Gd=U.dtype):(U=V.getBuffer(ra))?Gd=U.dtype:"constant"in ra?(Ze=2,"number"===typeof ra.constant?(te=ra.constant,Yd=Ad=Ae=0):(te=0<ra.constant.length?ra.constant[0]:0,Yd=1<ra.constant.length?ra.constant[1]:0,Ad=2<ra.constant.length?ra.constant[2]:0,Ae=3<ra.constant.length?ra.constant[3]:0)):(U=Da(ra.buffer)?
V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Gd="type"in ra?Ca[ra.type]:U.dtype,Z=!!ra.normalized,Xe=ra.size|0,Md=ra.offset|0,$e=ra.stride|0,ba=ra.divisor|0);Zd=ia.location;ld=Cc[Zd];if(1===Ze){ld.buffer||M.enableVertexAttribArray(Zd);bd=Xe||2;if(ld.type!==Gd||ld.size!==bd||ld.buffer!==U||ld.normalized!==Z||ld.offset!==Md||ld.stride!==$e)M.bindBuffer(34962,U.buffer),M.vertexAttribPointer(Zd,bd,Gd,Z,$e,Md),ld.type=Gd,ld.size=bd,ld.buffer=U,ld.normalized=Z,ld.offset=Md,ld.stride=$e;ld.divisor!==
ba&&(G.vertexAttribDivisorANGLE(Zd,ba),ld.divisor=ba)}else if(ld.buffer&&(M.disableVertexAttribArray(Zd),ld.buffer=null),ld.x!==te||ld.y!==Yd||ld.z!==Ad||ld.w!==Ae)M.vertexAttrib4f(Zd,te,Yd,Ad,Ae),ld.x=te,ld.y=Yd,ld.z=Ad,ld.w=Ae;Fa.buffer=c.positionBuffer;pd=!1;Lc=null;nd=0;Gc=!1;Pc=fd=0;Wc=1;Bb=0;Fb=5126;Cb=xc=xb=Dc=0;Da(Fa)?(pd=!0,Lc=V.createStream(34962,Fa),Fb=Lc.dtype):(Lc=V.getBuffer(Fa))?Fb=Lc.dtype:"constant"in Fa?(Wc=2,"number"===typeof Fa.constant?(xb=Fa.constant,xc=Cb=Dc=0):(xb=0<Fa.constant.length?
Fa.constant[0]:0,xc=1<Fa.constant.length?Fa.constant[1]:0,Cb=2<Fa.constant.length?Fa.constant[2]:0,Dc=3<Fa.constant.length?Fa.constant[3]:0)):(Lc=Da(Fa.buffer)?V.createStream(34962,Fa.buffer):V.getBuffer(Fa.buffer),Fb="type"in Fa?Ca[Fa.type]:Lc.dtype,Gc=!!Fa.normalized,Pc=Fa.size|0,fd=Fa.offset|0,Bb=Fa.stride|0,nd=Fa.divisor|0);Jc=t.location;mc=Cc[Jc];if(1===Wc){mc.buffer||M.enableVertexAttribArray(Jc);Hc=Pc||2;if(mc.type!==Fb||mc.size!==Hc||mc.buffer!==Lc||mc.normalized!==Gc||mc.offset!==fd||mc.stride!==
Bb)M.bindBuffer(34962,Lc.buffer),M.vertexAttribPointer(Jc,Hc,Fb,Gc,Bb,fd),mc.type=Fb,mc.size=Hc,mc.buffer=Lc,mc.normalized=Gc,mc.offset=fd,mc.stride=Bb;mc.divisor!==nd&&(G.vertexAttribDivisorANGLE(Jc,nd),mc.divisor=nd)}else if(mc.buffer&&(M.disableVertexAttribArray(Jc),mc.buffer=null),mc.x!==xb||mc.y!==xc||mc.z!==Cb||mc.w!==Dc)M.vertexAttrib4f(Jc,xb,xc,Cb,Dc),mc.x=xb,mc.y=xc,mc.z=Cb,mc.w=Dc;xa.buffer=c.positionFractBuffer;Xc=!1;Vc=null;Ec=0;fc=!1;pc=Ic=0;qc=1;nc=0;gc=5126;eb=yb=bc=bb=0;Da(xa)?(Xc=
!0,Vc=V.createStream(34962,xa),gc=Vc.dtype):(Vc=V.getBuffer(xa))?gc=Vc.dtype:"constant"in xa?(qc=2,"number"===typeof xa.constant?(bc=xa.constant,yb=eb=bb=0):(bc=0<xa.constant.length?xa.constant[0]:0,yb=1<xa.constant.length?xa.constant[1]:0,eb=2<xa.constant.length?xa.constant[2]:0,bb=3<xa.constant.length?xa.constant[3]:0)):(Vc=Da(xa.buffer)?V.createStream(34962,xa.buffer):V.getBuffer(xa.buffer),gc="type"in xa?Ca[xa.type]:Vc.dtype,fc=!!xa.normalized,pc=xa.size|0,Ic=xa.offset|0,nc=xa.stride|0,Ec=xa.divisor|
0);Nb=h.location;cb=Cc[Nb];if(1===qc){cb.buffer||M.enableVertexAttribArray(Nb);ob=pc||2;if(cb.type!==gc||cb.size!==ob||cb.buffer!==Vc||cb.normalized!==fc||cb.offset!==Ic||cb.stride!==nc)M.bindBuffer(34962,Vc.buffer),M.vertexAttribPointer(Nb,ob,gc,fc,nc,Ic),cb.type=gc,cb.size=ob,cb.buffer=Vc,cb.normalized=fc,cb.offset=Ic,cb.stride=nc;cb.divisor!==Ec&&(G.vertexAttribDivisorANGLE(Nb,Ec),cb.divisor=Ec)}else if(cb.buffer&&(M.disableVertexAttribArray(Nb),cb.buffer=null),cb.x!==bc||cb.y!==yb||cb.z!==eb||
cb.w!==bb)M.vertexAttrib4f(Nb,bc,yb,eb,bb),cb.x=bc,cb.y=yb,cb.z=eb,cb.w=bb;la.buffer=c.positionFractBuffer;Ua=!1;hd=null;Ib=0;Jb=!1;Ob=rc=0;jb=1;Gb=0;Db=5126;Pb=Yb=hb=wb=0;Da(la)?(Ua=!0,hd=V.createStream(34962,la),Db=hd.dtype):(hd=V.getBuffer(la))?Db=hd.dtype:"constant"in la?(jb=2,"number"===typeof la.constant?(hb=la.constant,Yb=Pb=wb=0):(hb=0<la.constant.length?la.constant[0]:0,Yb=1<la.constant.length?la.constant[1]:0,Pb=2<la.constant.length?la.constant[2]:0,wb=3<la.constant.length?la.constant[3]:
0)):(hd=Da(la.buffer)?V.createStream(34962,la.buffer):V.getBuffer(la.buffer),Db="type"in la?Ca[la.type]:hd.dtype,Jb=!!la.normalized,Ob=la.size|0,rc=la.offset|0,Gb=la.stride|0,Ib=la.divisor|0);qb=S.location;Ra=Cc[qb];if(1===jb){Ra.buffer||M.enableVertexAttribArray(qb);Ub=Ob||2;if(Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==hd||Ra.normalized!==Jb||Ra.offset!==rc||Ra.stride!==Gb)M.bindBuffer(34962,hd.buffer),M.vertexAttribPointer(qb,Ub,Db,Jb,Gb,rc),Ra.type=Db,Ra.size=Ub,Ra.buffer=hd,Ra.normalized=Jb,Ra.offset=
rc,Ra.stride=Gb;Ra.divisor!==Ib&&(G.vertexAttribDivisorANGLE(qb,Ib),Ra.divisor=Ib)}else if(Ra.buffer&&(M.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Yb||Ra.z!==Pb||Ra.w!==wb)M.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ra.x=hb,Ra.y=Yb,Ra.z=Pb,Ra.w=wb;W.buffer=c.colorBuffer;zb=!1;cc=null;ib=0;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Va=kb=La=0;Da(W)?(zb=!0,cc=V.createStream(34962,W),gb=cc.dtype):(cc=V.getBuffer(W))?gb=cc.dtype:"constant"in W?(Ka=2,"number"===typeof W.constant?(kb=W.constant,Va=tb=
La=0):(kb=0<W.constant.length?W.constant[0]:0,Va=1<W.constant.length?W.constant[1]:0,tb=2<W.constant.length?W.constant[2]:0,La=3<W.constant.length?W.constant[3]:0)):(cc=Da(W.buffer)?V.createStream(34962,W.buffer):V.getBuffer(W.buffer),gb="type"in W?Ca[W.type]:cc.dtype,pb=!!W.normalized,rb=W.size|0,Ha=W.offset|0,fb=W.stride|0,ib=W.divisor|0);sb=k.location;Oa=Cc[sb];if(1===Ka){Oa.buffer||M.enableVertexAttribArray(sb);tc=rb||4;if(Oa.type!==gb||Oa.size!==tc||Oa.buffer!==cc||Oa.normalized!==pb||Oa.offset!==
Ha||Oa.stride!==fb)M.bindBuffer(34962,cc.buffer),M.vertexAttribPointer(sb,tc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=tc,Oa.buffer=cc,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb;Oa.divisor!==ib&&(G.vertexAttribDivisorANGLE(sb,ib),Oa.divisor=ib)}else if(Oa.buffer&&(M.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Va||Oa.z!==tb||Oa.w!==La)M.vertexAttrib4f(sb,kb,Va,tb,La),Oa.x=kb,Oa.y=Va,Oa.z=tb,Oa.w=La;Qa=Y.location;Kb=Cc[Qa];Kb.buffer||M.enableVertexAttribArray(Qa);if(5126!==Kb.type||1!==Kb.size||
Kb.buffer!==e||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)M.bindBuffer(34962,e.buffer),M.vertexAttribPointer(Qa,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=e,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(G.vertexAttribDivisorANGLE(Qa,0),Kb.divisor=0);Eb=D.location;Ma=Cc[Eb];Ma.buffer||M.enableVertexAttribArray(Eb);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==l||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)M.bindBuffer(34962,l.buffer),M.vertexAttribPointer(Eb,1,5126,!1,8,4),
Ma.type=5126,Ma.size=1,Ma.buffer=l,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(G.vertexAttribDivisorANGLE(Eb,0),Ma.divisor=0);ha=c.scale;M.uniform2f(d.location,ha[0],ha[1]);Ya=c.scaleFract;M.uniform2f(I.location,Ya[0],Ya[1]);Lb=c.translate;M.uniform2f(ta.location,Lb[0],Lb[1]);Mb=c.translateFract;M.uniform2f(A.location,Mb[0],Mb[1]);M.uniform1f(a.location,c.thickness);M.uniform1f(w.location,c.depth);lb=q.call(this,ea,c,0);M.uniform4f(ja.location,lb[0],lb[1],lb[2],lb[3]);M.uniform1f(X.location,
c.dashLength);M.uniform1f(E.location,c.opacity);(Na=c.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);Zb=Na._texture;M.uniform1i(f.location,Zb.bind());(Pa=P.elements)?M.bindBuffer(34963,Pa.buffer.buffer):aa.currentVAO&&(Pa=C.getElements(aa.currentVAO.elements))&&M.bindBuffer(34963,Pa.buffer.buffer);ub=c.count;0<ub?Pa?G.drawElementsInstancedANGLE(5,4,Pa.type,0<<(Pa.type-5121>>1),ub):G.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Pa?M.drawElements(5,4,Pa.type,0<<(Pa.type-5121>>1)):M.drawArrays(5,
0,4));O.dirty=!0;aa.setVAO(null);ea.viewportWidth=Q;ea.viewportHeight=u;R&&(da.cpuTime+=performance.now()-F);T&&V.destroyStream(U);pd&&V.destroyStream(Lc);Xc&&V.destroyStream(Vc);Ua&&V.destroyStream(hd);zb&&V.destroyStream(cc);Zb.unbind()},scope:function(a,d,g){var f,h,k,b,p,q,y,t,na,w,A,sa,Ja,Xa,C,fa,ga,M,D,I,L,E,va,N,aa,z,K,R,S,T,ka,Ta,X,ya,oa,Ea,Ba,Hb,ia,ma,ta,Y,ja,Aa,Bd,Cc,Z,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,
gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,ha,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ab,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,hf,bf,Te,Pe;f=a.viewport;h=f.x|0;k=f.y|0;b="width"in f?f.width|0:ea.framebufferWidth-h;p="height"in f?f.height|
0:ea.framebufferHeight-k;q=ea.viewportWidth;ea.viewportWidth=b;y=ea.viewportHeight;ea.viewportHeight=p;t=H[0];H[0]=h;na=H[1];H[1]=k;w=H[2];H[2]=b;A=H[3];H[3]=p;sa=Q[0];Q[0]=0;Ja=Q[1];Q[1]=0;Xa=Q[2];Q[2]=0;C=Q[3];Q[3]=0;fa=pa.blend_enable;pa.blend_enable=!0;ga=qa[0];qa[0]=32774;M=qa[1];qa[1]=32774;D=wa[0];wa[0]=770;I=wa[1];wa[1]=771;L=wa[2];wa[2]=773;E=wa[3];wa[3]=1;va=c.call(this,ea,a,g);N=pa.depth_enable;pa.depth_enable=va;aa=a.viewport;z=aa.x|0;K=aa.y|0;R="width"in aa?aa.width|0:ea.framebufferWidth-
z;S="height"in aa?aa.height|0:ea.framebufferHeight-K;T=r[0];r[0]=z;ka=r[1];r[1]=K;Ta=r[2];r[2]=R;X=r[3];r[3]=S;ya=pa.scissor_enable;pa.scissor_enable=!0;oa=pa.stencil_enable;pa.stencil_enable=!1;if(Ea=O.profile)Ba=performance.now(),da.count++;Hb=P.offset;P.offset=0;ia=P.count;P.count=4;ma=a.count;ta=P.instances;P.instances=ma;Y=P.primitive;P.primitive=5;ja=a.dashLength;Aa=J[23];J[23]=ja;Bd=a.dashTexture;Cc=J[24];J[24]=Bd;Z=a.depth;Xc=J[22];J[22]=Z;Vc=a.id;Ec=J[31];J[31]=Vc;fc=a.miterLimit;Ic=J[32];
J[32]=fc;pc=F.call(this,ea,a,g);qc=J[33];J[33]=pc;nc=a.opacity;gc=J[10];J[10]=nc;bb=ea.pixelRatio;bc=J[34];J[34]=bb;yb=a.scale;eb=J[6];J[6]=yb;Nb=a.scaleFract;cb=J[7];J[7]=Nb;ob=a.thickness;Ua=J[21];J[21]=ob;hd=a.translate;Ib=J[8];J[8]=hd;Jb=a.translateFract;rc=J[9];J[9]=Jb;Ob=B.call(this,ea,a,g);jb=J[3];J[3]=Ob;ra.buffer=a.positionBuffer;Gb=!1;Db=null;wb=0;hb=!1;Pb=Yb=0;qb=1;Ra=0;Ub=5126;pb=ib=cc=zb=0;Da(ra)?(Gb=!0,Db=V.createStream(34962,ra),Ub=Db.dtype):(Db=V.getBuffer(ra))?Ub=Db.dtype:"constant"in
ra?(qb=2,"number"===typeof ra.constant?(cc=ra.constant,ib=pb=zb=0):(cc=0<ra.constant.length?ra.constant[0]:0,ib=1<ra.constant.length?ra.constant[1]:0,pb=2<ra.constant.length?ra.constant[2]:0,zb=3<ra.constant.length?ra.constant[3]:0)):(Db=Da(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Ub="type"in ra?Ca[ra.type]:Db.dtype,hb=!!ra.normalized,Pb=ra.size|0,Yb=ra.offset|0,Ra=ra.stride|0,wb=ra.divisor|0);Ha=G.buffer;G.buffer=Db;rb=G.divisor;G.divisor=wb;Ka=G.normalized;G.normalized=
hb;fb=G.offset;G.offset=Yb;gb=G.size;G.size=Pb;La=G.state;G.state=qb;kb=G.stride;G.stride=Ra;Va=G.type;G.type=Ub;tb=G.w;G.w=zb;sb=G.x;G.x=cc;Oa=G.y;G.y=ib;tc=G.z;G.z=pb;xa.buffer=a.positionFractBuffer;Qa=!1;Kb=null;Eb=0;Ma=!1;Ya=ha=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;Da(xa)?(Qa=!0,Kb=V.createStream(34962,xa),lb=Kb.dtype):(Kb=V.getBuffer(xa))?lb=Kb.dtype:"constant"in xa?(Lb=2,"number"===typeof xa.constant?(Zb=xa.constant,Pa=ub=Na=0):(Zb=0<xa.constant.length?xa.constant[0]:0,Pa=1<xa.constant.length?xa.constant[1]:
0,ub=2<xa.constant.length?xa.constant[2]:0,Na=3<xa.constant.length?xa.constant[3]:0)):(Kb=Da(xa.buffer)?V.createStream(34962,xa.buffer):V.getBuffer(xa.buffer),lb="type"in xa?Ca[xa.type]:Kb.dtype,Ma=!!xa.normalized,Ya=xa.size|0,ha=xa.offset|0,Mb=xa.stride|0,Eb=xa.divisor|0);vb=U.buffer;U.buffer=Kb;Sa=U.divisor;U.divisor=Eb;nb=U.normalized;U.normalized=Ma;hc=U.offset;U.offset=ha;Ac=U.size;U.size=Ya;vc=U.state;U.state=Lb;db=U.stride;U.stride=Mb;kc=U.type;U.type=lb;qd=U.w;U.w=Na;Wa=U.x;U.x=Zb;Mc=U.y;
U.y=Pa;Ab=U.z;U.z=ub;Fa.buffer=a.positionBuffer;Za=!1;Vb=null;uc=0;Wb=!1;Kc=Qb=0;Rb=1;pe=0;Fc=5126;td=Yc=Nc=sd=0;Da(Fa)?(Za=!0,Vb=V.createStream(34962,Fa),Fc=Vb.dtype):(Vb=V.getBuffer(Fa))?Fc=Vb.dtype:"constant"in Fa?(Rb=2,"number"===typeof Fa.constant?(Nc=Fa.constant,Yc=td=sd=0):(Nc=0<Fa.constant.length?Fa.constant[0]:0,Yc=1<Fa.constant.length?Fa.constant[1]:0,td=2<Fa.constant.length?Fa.constant[2]:0,sd=3<Fa.constant.length?Fa.constant[3]:0)):(Vb=Da(Fa.buffer)?V.createStream(34962,Fa.buffer):V.getBuffer(Fa.buffer),
Fc="type"in Fa?Ca[Fa.type]:Vb.dtype,Wb=!!Fa.normalized,Kc=Fa.size|0,Qb=Fa.offset|0,pe=Fa.stride|0,uc=Fa.divisor|0);oc=n.buffer;n.buffer=Vb;wc=n.divisor;n.divisor=uc;ic=n.normalized;n.normalized=Wb;$a=n.offset;n.offset=Qb;sc=n.size;n.size=Kc;Tb=n.state;n.state=Rb;Xb=n.stride;n.stride=pe;ec=n.type;n.type=Fc;jc=n.w;n.w=sd;yc=n.x;n.x=Nc;Bc=n.y;n.y=Yc;cd=n.z;n.z=td;la.buffer=a.positionFractBuffer;Qc=!1;Rc=null;Sc=0;Zc=!1;dd=od=0;$c=1;lc=0;dc=5126;zc=ed=Uc=ad=0;Da(la)?(Qc=!0,Rc=V.createStream(34962,la),
dc=Rc.dtype):(Rc=V.getBuffer(la))?dc=Rc.dtype:"constant"in la?($c=2,"number"===typeof la.constant?(Uc=la.constant,ed=zc=ad=0):(Uc=0<la.constant.length?la.constant[0]:0,ed=1<la.constant.length?la.constant[1]:0,zc=2<la.constant.length?la.constant[2]:0,ad=3<la.constant.length?la.constant[3]:0)):(Rc=Da(la.buffer)?V.createStream(34962,la.buffer):V.getBuffer(la.buffer),dc="type"in la?Ca[la.type]:Rc.dtype,Zc=!!la.normalized,dd=la.size|0,od=la.offset|0,lc=la.stride|0,Sc=la.divisor|0);id=u.buffer;u.buffer=
Rc;Nd=u.divisor;u.divisor=Sc;wd=u.normalized;u.normalized=Zc;ue=u.offset;u.offset=od;jd=u.size;u.size=dd;Ce=u.state;u.state=$c;Od=u.stride;u.stride=lc;ge=u.type;u.type=dc;ce=u.w;u.w=ad;$d=u.x;u.x=Uc;Jd=u.y;u.y=ed;Hd=u.z;u.z=zc;W.buffer=a.colorBuffer;md=!1;Tc=null;ud=0;rd=!1;vd=kd=0;Cd=1;Fd=0;je=5126;ke=le=Fe=ab=0;Da(W)?(md=!0,Tc=V.createStream(34962,W),je=Tc.dtype):(Tc=V.getBuffer(W))?je=Tc.dtype:"constant"in W?(Cd=2,"number"===typeof W.constant?(Fe=W.constant,le=ke=ab=0):(Fe=0<W.constant.length?
W.constant[0]:0,le=1<W.constant.length?W.constant[1]:0,ke=2<W.constant.length?W.constant[2]:0,ab=3<W.constant.length?W.constant[3]:0)):(Tc=Da(W.buffer)?V.createStream(34962,W.buffer):V.getBuffer(W.buffer),je="type"in W?Ca[W.type]:Tc.dtype,rd=!!W.normalized,vd=W.size|0,kd=W.offset|0,Fd=W.stride|0,ud=W.divisor|0);he=x.buffer;x.buffer=Tc;ve=x.divisor;x.divisor=ud;de=x.normalized;x.normalized=rd;me=x.offset;x.offset=kd;Oc=x.size;x.size=vd;gd=x.state;x.state=Cd;we=x.stride;x.stride=Fd;qe=x.type;x.type=
je;Kd=x.w;x.w=ab;Pd=x.x;x.x=Fe;Rd=x.y;x.y=le;Sd=x.z;x.z=ke;ne=ba.buffer;ba.buffer=e;Ge=ba.divisor;ba.divisor=0;Be=ba.normalized;ba.normalized=!1;se=ba.offset;ba.offset=0;Re=ba.size;ba.size=0;Se=ba.state;ba.state=1;Oe=ba.stride;ba.stride=8;xe=ba.type;ba.type=5126;He=ba.w;ba.w=0;Je=ba.x;ba.x=0;Ke=ba.y;ba.y=0;Le=ba.z;ba.z=0;Ie=v.buffer;v.buffer=l;Ld=v.divisor;v.divisor=0;Wd=v.normalized;v.normalized=!1;be=v.offset;v.offset=4;ee=v.size;v.size=0;Me=v.state;v.state=1;Id=v.stride;v.stride=8;Td=v.type;v.type=
5126;De=v.w;v.w=0;Ne=v.x;v.x=0;hf=v.y;v.y=0;bf=v.z;v.z=0;Te=m.vert;m.vert=20;Pe=m.frag;m.frag=19;O.dirty=!0;d(ea,a,g);ea.viewportWidth=q;ea.viewportHeight=y;H[0]=t;H[1]=na;H[2]=w;H[3]=A;Q[0]=sa;Q[1]=Ja;Q[2]=Xa;Q[3]=C;pa.blend_enable=fa;qa[0]=ga;qa[1]=M;wa[0]=D;wa[1]=I;wa[2]=L;wa[3]=E;pa.depth_enable=N;r[0]=T;r[1]=ka;r[2]=Ta;r[3]=X;pa.scissor_enable=ya;pa.stencil_enable=oa;Ea&&(da.cpuTime+=performance.now()-Ba);P.offset=Hb;P.count=ia;P.instances=ta;P.primitive=Y;J[23]=Aa;J[24]=Cc;J[22]=Xc;J[31]=Ec;
J[32]=Ic;J[33]=qc;J[10]=gc;J[34]=bc;J[6]=eb;J[7]=cb;J[21]=Ua;J[8]=Ib;J[9]=rc;J[3]=jb;Gb&&V.destroyStream(Db);G.buffer=Ha;G.divisor=rb;G.normalized=Ka;G.offset=fb;G.size=gb;G.state=La;G.stride=kb;G.type=Va;G.w=tb;G.x=sb;G.y=Oa;G.z=tc;Qa&&V.destroyStream(Kb);U.buffer=vb;U.divisor=Sa;U.normalized=nb;U.offset=hc;U.size=Ac;U.state=vc;U.stride=db;U.type=kc;U.w=qd;U.x=Wa;U.y=Mc;U.z=Ab;Za&&V.destroyStream(Vb);n.buffer=oc;n.divisor=wc;n.normalized=ic;n.offset=$a;n.size=sc;n.state=Tb;n.stride=Xb;n.type=ec;
n.w=jc;n.x=yc;n.y=Bc;n.z=cd;Qc&&V.destroyStream(Rc);u.buffer=id;u.divisor=Nd;u.normalized=wd;u.offset=ue;u.size=jd;u.state=Ce;u.stride=Od;u.type=ge;u.w=ce;u.x=$d;u.y=Jd;u.z=Hd;md&&V.destroyStream(Tc);x.buffer=he;x.divisor=ve;x.normalized=de;x.offset=me;x.size=Oc;x.state=gd;x.stride=we;x.type=qe;x.w=Kd;x.x=Pd;x.y=Rd;x.z=Sd;ba.buffer=ne;ba.divisor=Ge;ba.normalized=Be;ba.offset=se;ba.size=Re;ba.state=Se;ba.stride=Oe;ba.type=xe;ba.w=He;ba.x=Je;ba.y=Ke;ba.z=Le;v.buffer=Ie;v.divisor=Ld;v.normalized=Wd;
v.offset=be;v.size=ee;v.state=Me;v.stride=Id;v.type=Td;v.w=De;v.x=Ne;v.y=hf;v.z=bf;m.vert=Te;m.frag=Pe;O.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Cc,V,ea,O){var P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,Bd,Hb,ga,H,sa,Ca,ra,xa,Fa,la,W,ua,Ia,za,mb,
ca;P=b.attributes;C=b.buffer;g=b.context;N=b.current;M=b.draw;Da=b.elements;pa=b.extensions;m=b.framebuffer;J=b.gl;aa=b.isBufferArgs;Q=b.next;ma=b.shader;qa=b.uniforms;Aa=b.vao;wa=Q.blend_color;fa=N.blend_color;Ba=Q.blend_equation;ka=N.blend_equation;oa=Q.blend_func;ya=N.blend_func;Ja=Q.colorMask;na=N.colorMask;Xa=Q.depth_range;Ta=N.depth_range;r=Q.polygonOffset_offset;p=N.polygonOffset_offset;y=Q.sample_coverage;va=N.sample_coverage;Ea=Q.scissor_box;Bd=N.scissor_box;Hb=Q.stencil_func;ga=N.stencil_func;
H=Q.stencil_opBack;sa=N.stencil_opBack;Ca=Q.stencil_opFront;ra=N.stencil_opFront;xa=Q.viewport;Fa=N.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};W={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ia={divisor:1,offset:4,stride:4};za={divisor:1,offset:16,stride:8};mb={divisor:1,offset:24,stride:8};ca={divisor:1,offset:0,stride:8};return{batch:function(c,b){var q,v,L,u,z,n;q=m.next;q!==m.cur&&(q?J.bindFramebuffer(36160,q.framebuffer):
J.bindFramebuffer(36160,null),m.cur=q);if(N.dirty){var xa,x,B,K,qa,wa,F,G,U,T,oa,Ea,ba,Ba,ma,Z,Yd,Ad,ha,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb;xa=Q.dither;xa!==N.dither&&(xa?J.enable(3024):J.disable(3024),N.dither=xa);x=Q.depth_func;x!==N.depth_func&&(J.depthFunc(x),N.depth_func=x);B=Xa[0];K=Xa[1];if(B!==Ta[0]||K!==Ta[1])J.depthRange(B,K),Ta[0]=B,Ta[1]=K;qa=Q.depth_mask;qa!==N.depth_mask&&(J.depthMask(qa),N.depth_mask=qa);wa=Ja[0];F=Ja[1];G=Ja[2];U=Ja[3];if(wa!==na[0]||F!==na[1]||G!==na[2]||U!==na[3])J.colorMask(wa,
F,G,U),na[0]=wa,na[1]=F,na[2]=G,na[3]=U;T=Q.frontFace;T!==N.frontFace&&(J.frontFace(T),N.frontFace=T);oa=Q.lineWidth;oa!==N.lineWidth&&(J.lineWidth(oa),N.lineWidth=oa);Ea=Q.polygonOffset_enable;Ea!==N.polygonOffset_enable&&(Ea?J.enable(32823):J.disable(32823),N.polygonOffset_enable=Ea);ba=r[0];Ba=r[1];if(ba!==p[0]||Ba!==p[1])J.polygonOffset(ba,Ba),p[0]=ba,p[1]=Ba;ma=Q.sample_alpha;ma!==N.sample_alpha&&(ma?J.enable(32926):J.disable(32926),N.sample_alpha=ma);Z=Q.sample_enable;Z!==N.sample_enable&&(Z?
J.enable(32928):J.disable(32928),N.sample_enable=Z);Yd=y[0];Ad=y[1];if(Yd!==va[0]||Ad!==va[1])J.sampleCoverage(Yd,Ad),va[0]=Yd,va[1]=Ad;ha=Q.stencil_mask;ha!==N.stencil_mask&&(J.stencilMask(ha),N.stencil_mask=ha);ld=Hb[0];bd=Hb[1];pd=Hb[2];if(ld!==ga[0]||bd!==ga[1]||pd!==ga[2])J.stencilFunc(ld,bd,pd),ga[0]=ld,ga[1]=bd,ga[2]=pd;Lc=Ca[0];nd=Ca[1];Gc=Ca[2];fd=Ca[3];if(Lc!==ra[0]||nd!==ra[1]||Gc!==ra[2]||fd!==ra[3])J.stencilOpSeparate(Lc,nd,Gc,fd),ra[0]=Lc,ra[1]=nd,ra[2]=Gc,ra[3]=fd;Pc=H[0];Wc=H[1];Bb=
H[2];Fb=H[3];if(Pc!==sa[0]||Wc!==sa[1]||Bb!==sa[2]||Fb!==sa[3])J.stencilOpSeparate(Pc,Wc,Bb,Fb),sa[0]=Pc,sa[1]=Wc,sa[2]=Bb,sa[3]=Fb}J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(v=N.profile)L=
performance.now(),da.count+=b;J.useProgram(R.program);u=pa.angle_instanced_arrays;var Dc,xb,xc,Cb,Jc;Aa.setVAO(null);Dc=E.location;xb=P[Dc];xb.buffer||J.enableVertexAttribArray(Dc);if(5126!==xb.type||1!==xb.size||xb.buffer!==e||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(Dc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=e,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(u.vertexAttribDivisorANGLE(Dc,0),xb.divisor=0);xc=d.location;Cb=
P[xc];Cb.buffer||J.enableVertexAttribArray(xc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==l||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(xc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=l,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(u.vertexAttribDivisorANGLE(xc,0),Cb.divisor=0);(Jc=M.elements)?J.bindBuffer(34963,Jc.buffer.buffer):Aa.currentVAO&&(Jc=Da.getElements(Aa.currentVAO.elements))&&J.bindBuffer(34963,Jc.buffer.buffer);
for(z=0;z<b;++z){n=c[z];var mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd,wd,ue,jd,ab,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc;mc=n.viewport;Hc=mc.x|0;Xc=mc.y|0;Vc="width"in
mc?mc.width|0:g.framebufferWidth-Hc;Ec="height"in mc?mc.height|0:g.framebufferHeight-Xc;fc=g.viewportWidth;g.viewportWidth=Vc;Ic=g.viewportHeight;g.viewportHeight=Ec;J.viewport(Hc,Xc,Vc,Ec);Fa[0]=Hc;Fa[1]=Xc;Fa[2]=Vc;Fa[3]=Ec;(pc=ia.call(this,g,n,z))?J.enable(2929):J.disable(2929);N.depth_enable=pc;qc=n.viewport;nc=qc.x|0;gc=qc.y|0;bb="width"in qc?qc.width|0:g.framebufferWidth-nc;bc="height"in qc?qc.height|0:g.framebufferHeight-gc;J.scissor(nc,gc,bb,bc);Bd[0]=nc;Bd[1]=gc;Bd[2]=bb;Bd[3]=bc;ua.buffer=
n.positionBuffer;yb=!1;eb=null;Nb=0;cb=!1;Ua=ob=0;hd=1;Ib=0;Jb=5126;Gb=jb=Ob=rc=0;aa(ua)?(yb=!0,eb=C.createStream(34962,ua),Jb=eb.dtype):(eb=C.getBuffer(ua))?Jb=eb.dtype:"constant"in ua?(hd=2,"number"===typeof ua.constant?(Ob=ua.constant,jb=Gb=rc=0):(Ob=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,rc=3<ua.constant.length?ua.constant[3]:0)):(eb=aa(ua.buffer)?C.createStream(34962,ua.buffer):C.getBuffer(ua.buffer),Jb="type"in
ua?la[ua.type]:eb.dtype,cb=!!ua.normalized,Ua=ua.size|0,ob=ua.offset|0,Ib=ua.stride|0,Nb=ua.divisor|0);Db=k.location;wb=P[Db];if(1===hd){wb.buffer||J.enableVertexAttribArray(Db);hb=Ua||2;if(wb.type!==Jb||wb.size!==hb||wb.buffer!==eb||wb.normalized!==cb||wb.offset!==ob||wb.stride!==Ib)J.bindBuffer(34962,eb.buffer),J.vertexAttribPointer(Db,hb,Jb,cb,Ib,ob),wb.type=Jb,wb.size=hb,wb.buffer=eb,wb.normalized=cb,wb.offset=ob,wb.stride=Ib;wb.divisor!==Nb&&(u.vertexAttribDivisorANGLE(Db,Nb),wb.divisor=Nb)}else if(wb.buffer&&
(J.disableVertexAttribArray(Db),wb.buffer=null),wb.x!==Ob||wb.y!==jb||wb.z!==Gb||wb.w!==rc)J.vertexAttrib4f(Db,Ob,jb,Gb,rc),wb.x=Ob,wb.y=jb,wb.z=Gb,wb.w=rc;za.buffer=n.positionBuffer;Yb=!1;Pb=null;qb=0;Ra=!1;zb=Ub=0;cc=1;ib=0;pb=5126;fb=Ka=rb=Ha=0;aa(za)?(Yb=!0,Pb=C.createStream(34962,za),pb=Pb.dtype):(Pb=C.getBuffer(za))?pb=Pb.dtype:"constant"in za?(cc=2,"number"===typeof za.constant?(rb=za.constant,Ka=fb=Ha=0):(rb=0<za.constant.length?za.constant[0]:0,Ka=1<za.constant.length?za.constant[1]:0,fb=
2<za.constant.length?za.constant[2]:0,Ha=3<za.constant.length?za.constant[3]:0)):(Pb=aa(za.buffer)?C.createStream(34962,za.buffer):C.getBuffer(za.buffer),pb="type"in za?la[za.type]:Pb.dtype,Ra=!!za.normalized,zb=za.size|0,Ub=za.offset|0,ib=za.stride|0,qb=za.divisor|0);gb=f.location;La=P[gb];if(1===cc){La.buffer||J.enableVertexAttribArray(gb);kb=zb||2;if(La.type!==pb||La.size!==kb||La.buffer!==Pb||La.normalized!==Ra||La.offset!==Ub||La.stride!==ib)J.bindBuffer(34962,Pb.buffer),J.vertexAttribPointer(gb,
kb,pb,Ra,ib,Ub),La.type=pb,La.size=kb,La.buffer=Pb,La.normalized=Ra,La.offset=Ub,La.stride=ib;La.divisor!==qb&&(u.vertexAttribDivisorANGLE(gb,qb),La.divisor=qb)}else if(La.buffer&&(J.disableVertexAttribArray(gb),La.buffer=null),La.x!==rb||La.y!==Ka||La.z!==fb||La.w!==Ha)J.vertexAttrib4f(gb,rb,Ka,fb,Ha),La.x=rb,La.y=Ka,La.z=fb,La.w=Ha;mb.buffer=n.positionBuffer;Va=!1;tb=null;sb=0;Oa=!1;Qa=tc=0;Kb=1;Eb=0;Ma=5126;Mb=Lb=Ya=yd=0;aa(mb)?(Va=!0,tb=C.createStream(34962,mb),Ma=tb.dtype):(tb=C.getBuffer(mb))?
Ma=tb.dtype:"constant"in mb?(Kb=2,"number"===typeof mb.constant?(Ya=mb.constant,Lb=Mb=yd=0):(Ya=0<mb.constant.length?mb.constant[0]:0,Lb=1<mb.constant.length?mb.constant[1]:0,Mb=2<mb.constant.length?mb.constant[2]:0,yd=3<mb.constant.length?mb.constant[3]:0)):(tb=aa(mb.buffer)?C.createStream(34962,mb.buffer):C.getBuffer(mb.buffer),Ma="type"in mb?la[mb.type]:tb.dtype,Oa=!!mb.normalized,Qa=mb.size|0,tc=mb.offset|0,Eb=mb.stride|0,sb=mb.divisor|0);lb=ta.location;Na=P[lb];if(1===Kb){Na.buffer||J.enableVertexAttribArray(lb);
Zb=Qa||2;if(Na.type!==Ma||Na.size!==Zb||Na.buffer!==tb||Na.normalized!==Oa||Na.offset!==tc||Na.stride!==Eb)J.bindBuffer(34962,tb.buffer),J.vertexAttribPointer(lb,Zb,Ma,Oa,Eb,tc),Na.type=Ma,Na.size=Zb,Na.buffer=tb,Na.normalized=Oa,Na.offset=tc,Na.stride=Eb;Na.divisor!==sb&&(u.vertexAttribDivisorANGLE(lb,sb),Na.divisor=sb)}else if(Na.buffer&&(J.disableVertexAttribArray(lb),Na.buffer=null),Na.x!==Ya||Na.y!==Lb||Na.z!==Mb||Na.w!==yd)J.vertexAttrib4f(lb,Ya,Lb,Mb,yd),Na.x=Ya,Na.y=Lb,Na.z=Mb,Na.w=yd;ca.buffer=
n.positionBuffer;Pa=!1;ub=null;vb=0;Sa=!1;hc=nb=0;Ac=1;vc=0;db=5126;Mc=Wa=qd=kc=0;aa(ca)?(Pa=!0,ub=C.createStream(34962,ca),db=ub.dtype):(ub=C.getBuffer(ca))?db=ub.dtype:"constant"in ca?(Ac=2,"number"===typeof ca.constant?(qd=ca.constant,Wa=Mc=kc=0):(qd=0<ca.constant.length?ca.constant[0]:0,Wa=1<ca.constant.length?ca.constant[1]:0,Mc=2<ca.constant.length?ca.constant[2]:0,kc=3<ca.constant.length?ca.constant[3]:0)):(ub=aa(ca.buffer)?C.createStream(34962,ca.buffer):C.getBuffer(ca.buffer),db="type"in
ca?la[ca.type]:ub.dtype,Sa=!!ca.normalized,hc=ca.size|0,nb=ca.offset|0,vc=ca.stride|0,vb=ca.divisor|0);Ab=ja.location;Za=P[Ab];if(1===Ac){Za.buffer||J.enableVertexAttribArray(Ab);Vb=hc||2;if(Za.type!==db||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==nb||Za.stride!==vc)J.bindBuffer(34962,ub.buffer),J.vertexAttribPointer(Ab,Vb,db,Sa,vc,nb),Za.type=db,Za.size=Vb,Za.buffer=ub,Za.normalized=Sa,Za.offset=nb,Za.stride=vc;Za.divisor!==vb&&(u.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&
(J.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==qd||Za.y!==Wa||Za.z!==Mc||Za.w!==kc)J.vertexAttrib4f(Ab,qd,Wa,Mc,kc),Za.x=qd,Za.y=Wa,Za.z=Mc,Za.w=kc;W.buffer=n.colorBuffer;uc=!1;Wb=null;Qb=0;Kc=!1;pe=Rb=0;Fc=1;sd=0;Nc=5126;wc=oc=td=Yc=0;aa(W)?(uc=!0,Wb=C.createStream(34962,W),Nc=Wb.dtype):(Wb=C.getBuffer(W))?Nc=Wb.dtype:"constant"in W?(Fc=2,"number"===typeof W.constant?(td=W.constant,oc=wc=Yc=0):(td=0<W.constant.length?W.constant[0]:0,oc=1<W.constant.length?W.constant[1]:0,wc=2<W.constant.length?
W.constant[2]:0,Yc=3<W.constant.length?W.constant[3]:0)):(Wb=aa(W.buffer)?C.createStream(34962,W.buffer):C.getBuffer(W.buffer),Nc="type"in W?la[W.type]:Wb.dtype,Kc=!!W.normalized,pe=W.size|0,Rb=W.offset|0,sd=W.stride|0,Qb=W.divisor|0);ic=S.location;$a=P[ic];if(1===Fc){$a.buffer||J.enableVertexAttribArray(ic);sc=pe||4;if($a.type!==Nc||$a.size!==sc||$a.buffer!==Wb||$a.normalized!==Kc||$a.offset!==Rb||$a.stride!==sd)J.bindBuffer(34962,Wb.buffer),J.vertexAttribPointer(ic,sc,Nc,Kc,sd,Rb),$a.type=Nc,$a.size=
sc,$a.buffer=Wb,$a.normalized=Kc,$a.offset=Rb,$a.stride=sd;$a.divisor!==Qb&&(u.vertexAttribDivisorANGLE(ic,Qb),$a.divisor=Qb)}else if($a.buffer&&(J.disableVertexAttribArray(ic),$a.buffer=null),$a.x!==td||$a.y!==oc||$a.z!==wc||$a.w!==Yc)J.vertexAttrib4f(ic,td,oc,wc,Yc),$a.x=td,$a.y=oc,$a.z=wc,$a.w=Yc;Ia.buffer=n.colorBuffer;Tb=!1;Xb=null;ec=0;jc=!1;Bc=yc=0;cd=1;Qc=0;Rc=5126;dd=od=Zc=Sc=0;aa(Ia)?(Tb=!0,Xb=C.createStream(34962,Ia),Rc=Xb.dtype):(Xb=C.getBuffer(Ia))?Rc=Xb.dtype:"constant"in Ia?(cd=2,"number"===
typeof Ia.constant?(Zc=Ia.constant,od=dd=Sc=0):(Zc=0<Ia.constant.length?Ia.constant[0]:0,od=1<Ia.constant.length?Ia.constant[1]:0,dd=2<Ia.constant.length?Ia.constant[2]:0,Sc=3<Ia.constant.length?Ia.constant[3]:0)):(Xb=aa(Ia.buffer)?C.createStream(34962,Ia.buffer):C.getBuffer(Ia.buffer),Rc="type"in Ia?la[Ia.type]:Xb.dtype,jc=!!Ia.normalized,Bc=Ia.size|0,yc=Ia.offset|0,Qc=Ia.stride|0,ec=Ia.divisor|0);$c=X.location;lc=P[$c];if(1===cd){lc.buffer||J.enableVertexAttribArray($c);dc=Bc||4;if(lc.type!==Rc||
lc.size!==dc||lc.buffer!==Xb||lc.normalized!==jc||lc.offset!==yc||lc.stride!==Qc)J.bindBuffer(34962,Xb.buffer),J.vertexAttribPointer($c,dc,Rc,jc,Qc,yc),lc.type=Rc,lc.size=dc,lc.buffer=Xb,lc.normalized=jc,lc.offset=yc,lc.stride=Qc;lc.divisor!==ec&&(u.vertexAttribDivisorANGLE($c,ec),lc.divisor=ec)}else if(lc.buffer&&(J.disableVertexAttribArray($c),lc.buffer=null),lc.x!==Zc||lc.y!==od||lc.z!==dd||lc.w!==Sc)J.vertexAttrib4f($c,Zc,od,dd,Sc),lc.x=Zc,lc.y=od,lc.z=dd,lc.w=Sc;ad=n.scale;Uc=ad[0];zc=ad[1];
z&&ed===Uc&&id===zc||(ed=Uc,id=zc,J.uniform2f(Cc.location,Uc,zc));Nd=n.translate;wd=Nd[0];jd=Nd[1];z&&ue===wd&&ab===jd||(ue=wd,ab=jd,J.uniform2f(ea.location,wd,jd));Od=n.thickness;z&&ge===Od||(ge=Od,J.uniform1f(V.location,Od));ce=n.depth;z&&$d===ce||($d=ce,J.uniform1f(D.location,ce));Jd=h.call(this,g,n,z);Hd=Jd[0];Tc=Jd[1];rd=Jd[2];vd=Jd[3];z&&md===Hd&&ud===Tc&&kd===rd&&Cd===vd||(md=Hd,ud=Tc,kd=rd,Cd=vd,J.uniform4f(O.location,Hd,Tc,rd,vd));Fd=n.miterLimit;z&&je===Fd||(je=Fd,J.uniform1f(I.location,
Fd));ye=t.call(this,g,n,z);z&&Fe===ye||(Fe=ye,J.uniform1f(a.location,ye));le=n.dashLength;z&&ke===le||(ke=le,J.uniform1f(w.location,le));he=n.opacity;z&&ve===he||(ve=he,J.uniform1f(A.location,he));(de=n.dashTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);me=de._texture;J.uniform1i(Y.location,me.bind());Oc=n.count;0<Oc?Jc?u.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Oc):u.drawArraysInstancedANGLE(5,0,4,Oc):0>Oc&&(Jc?J.drawElements(5,4,Jc.type,0<<(Jc.type-5121>>1)):J.drawArrays(5,
0,4));g.viewportWidth=fc;g.viewportHeight=Ic;yb&&C.destroyStream(eb);Yb&&C.destroyStream(Pb);Va&&C.destroyStream(tb);Pa&&C.destroyStream(ub);uc&&C.destroyStream(Wb);Tb&&C.destroyStream(Xb);me.unbind()}N.dirty=!0;Aa.setVAO(null);v&&(da.cpuTime+=performance.now()-L)},draw:function(h){var b,t,v,u,n,z,xa,x,B,qa,wa,R,F,G,U,T,oa,Ea,ba,Ba,ma,ia,Z,Yd,Ad,ha,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,
zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe;b=m.next;b!==m.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):J.bindFramebuffer(36160,null),m.cur=b);if(N.dirty){var Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc;Fc=Q.dither;Fc!==N.dither&&(Fc?J.enable(3024):J.disable(3024),N.dither=Fc);sd=Q.depth_func;sd!==N.depth_func&&(J.depthFunc(sd),N.depth_func=sd);Nc=
Xa[0];Yc=Xa[1];if(Nc!==Ta[0]||Yc!==Ta[1])J.depthRange(Nc,Yc),Ta[0]=Nc,Ta[1]=Yc;td=Q.depth_mask;td!==N.depth_mask&&(J.depthMask(td),N.depth_mask=td);oc=Ja[0];wc=Ja[1];ic=Ja[2];$a=Ja[3];if(oc!==na[0]||wc!==na[1]||ic!==na[2]||$a!==na[3])J.colorMask(oc,wc,ic,$a),na[0]=oc,na[1]=wc,na[2]=ic,na[3]=$a;sc=Q.frontFace;sc!==N.frontFace&&(J.frontFace(sc),N.frontFace=sc);Tb=Q.lineWidth;Tb!==N.lineWidth&&(J.lineWidth(Tb),N.lineWidth=Tb);Xb=Q.polygonOffset_enable;Xb!==N.polygonOffset_enable&&(Xb?J.enable(32823):
J.disable(32823),N.polygonOffset_enable=Xb);ec=r[0];jc=r[1];if(ec!==p[0]||jc!==p[1])J.polygonOffset(ec,jc),p[0]=ec,p[1]=jc;yc=Q.sample_alpha;yc!==N.sample_alpha&&(yc?J.enable(32926):J.disable(32926),N.sample_alpha=yc);Bc=Q.sample_enable;Bc!==N.sample_enable&&(Bc?J.enable(32928):J.disable(32928),N.sample_enable=Bc);cd=y[0];Qc=y[1];if(cd!==va[0]||Qc!==va[1])J.sampleCoverage(cd,Qc),va[0]=cd,va[1]=Qc;Rc=Q.stencil_mask;Rc!==N.stencil_mask&&(J.stencilMask(Rc),N.stencil_mask=Rc);Sc=Hb[0];Zc=Hb[1];od=Hb[2];
if(Sc!==ga[0]||Zc!==ga[1]||od!==ga[2])J.stencilFunc(Sc,Zc,od),ga[0]=Sc,ga[1]=Zc,ga[2]=od;dd=Ca[0];$c=Ca[1];lc=Ca[2];dc=Ca[3];if(dd!==ra[0]||$c!==ra[1]||lc!==ra[2]||dc!==ra[3])J.stencilOpSeparate(dd,$c,lc,dc),ra[0]=dd,ra[1]=$c,ra[2]=lc,ra[3]=dc;ad=H[0];Uc=H[1];ed=H[2];zc=H[3];if(ad!==sa[0]||Uc!==sa[1]||ed!==sa[2]||zc!==sa[3])J.stencilOpSeparate(ad,Uc,ed,zc),sa[0]=ad,sa[1]=Uc,sa[2]=ed,sa[3]=zc}t=h.viewport;v=t.x|0;u=t.y|0;n="width"in t?t.width|0:g.framebufferWidth-v;z="height"in t?t.height|0:g.framebufferHeight-
u;xa=g.viewportWidth;g.viewportWidth=n;x=g.viewportHeight;g.viewportHeight=z;J.viewport(v,u,n,z);Fa[0]=v;Fa[1]=u;Fa[2]=n;Fa[3]=z;J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);N.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);N.cull_enable=!0;J.cullFace(1029);N.cull_face=1029;(B=K.call(this,g,h,0))?J.enable(2929):J.disable(2929);N.depth_enable=B;qa=h.viewport;
wa=qa.x|0;R=qa.y|0;F="width"in qa?qa.width|0:g.framebufferWidth-wa;G="height"in qa?qa.height|0:g.framebufferHeight-R;J.scissor(wa,R,F,G);Bd[0]=wa;Bd[1]=R;Bd[2]=F;Bd[3]=G;J.enable(3089);N.scissor_enable=!0;J.disable(2960);N.stencil_enable=!1;if(U=N.profile)T=performance.now(),da.count++;J.useProgram(L.program);oa=pa.angle_instanced_arrays;Aa.setVAO(null);ua.buffer=h.positionBuffer;Ea=!1;ba=null;Ba=0;ma=!1;Z=ia=0;Yd=1;Ad=0;ha=5126;Lc=pd=bd=ld=0;aa(ua)?(Ea=!0,ba=C.createStream(34962,ua),ha=ba.dtype):
(ba=C.getBuffer(ua))?ha=ba.dtype:"constant"in ua?(Yd=2,"number"===typeof ua.constant?(bd=ua.constant,pd=Lc=ld=0):(bd=0<ua.constant.length?ua.constant[0]:0,pd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,ld=3<ua.constant.length?ua.constant[3]:0)):(ba=aa(ua.buffer)?C.createStream(34962,ua.buffer):C.getBuffer(ua.buffer),ha="type"in ua?la[ua.type]:ba.dtype,ma=!!ua.normalized,Z=ua.size|0,ia=ua.offset|0,Ad=ua.stride|0,Ba=ua.divisor|0);nd=k.location;Gc=P[nd];if(1===Yd){Gc.buffer||
J.enableVertexAttribArray(nd);fd=Z||2;if(Gc.type!==ha||Gc.size!==fd||Gc.buffer!==ba||Gc.normalized!==ma||Gc.offset!==ia||Gc.stride!==Ad)J.bindBuffer(34962,ba.buffer),J.vertexAttribPointer(nd,fd,ha,ma,Ad,ia),Gc.type=ha,Gc.size=fd,Gc.buffer=ba,Gc.normalized=ma,Gc.offset=ia,Gc.stride=Ad;Gc.divisor!==Ba&&(oa.vertexAttribDivisorANGLE(nd,Ba),Gc.divisor=Ba)}else if(Gc.buffer&&(J.disableVertexAttribArray(nd),Gc.buffer=null),Gc.x!==bd||Gc.y!==pd||Gc.z!==Lc||Gc.w!==ld)J.vertexAttrib4f(nd,bd,pd,Lc,ld),Gc.x=
bd,Gc.y=pd,Gc.z=Lc,Gc.w=ld;za.buffer=h.positionBuffer;Pc=!1;Wc=null;Bb=0;Fb=!1;xb=Dc=0;xc=1;Cb=0;Jc=5126;Vc=Xc=Hc=mc=0;aa(za)?(Pc=!0,Wc=C.createStream(34962,za),Jc=Wc.dtype):(Wc=C.getBuffer(za))?Jc=Wc.dtype:"constant"in za?(xc=2,"number"===typeof za.constant?(Hc=za.constant,Xc=Vc=mc=0):(Hc=0<za.constant.length?za.constant[0]:0,Xc=1<za.constant.length?za.constant[1]:0,Vc=2<za.constant.length?za.constant[2]:0,mc=3<za.constant.length?za.constant[3]:0)):(Wc=aa(za.buffer)?C.createStream(34962,za.buffer):
C.getBuffer(za.buffer),Jc="type"in za?la[za.type]:Wc.dtype,Fb=!!za.normalized,xb=za.size|0,Dc=za.offset|0,Cb=za.stride|0,Bb=za.divisor|0);Ec=f.location;fc=P[Ec];if(1===xc){fc.buffer||J.enableVertexAttribArray(Ec);Ic=xb||2;if(fc.type!==Jc||fc.size!==Ic||fc.buffer!==Wc||fc.normalized!==Fb||fc.offset!==Dc||fc.stride!==Cb)J.bindBuffer(34962,Wc.buffer),J.vertexAttribPointer(Ec,Ic,Jc,Fb,Cb,Dc),fc.type=Jc,fc.size=Ic,fc.buffer=Wc,fc.normalized=Fb,fc.offset=Dc,fc.stride=Cb;fc.divisor!==Bb&&(oa.vertexAttribDivisorANGLE(Ec,
Bb),fc.divisor=Bb)}else if(fc.buffer&&(J.disableVertexAttribArray(Ec),fc.buffer=null),fc.x!==Hc||fc.y!==Xc||fc.z!==Vc||fc.w!==mc)J.vertexAttrib4f(Ec,Hc,Xc,Vc,mc),fc.x=Hc,fc.y=Xc,fc.z=Vc,fc.w=mc;mb.buffer=h.positionBuffer;pc=!1;qc=null;nc=0;gc=!1;bc=bb=0;yb=1;eb=0;Nb=5126;hd=Ua=ob=cb=0;aa(mb)?(pc=!0,qc=C.createStream(34962,mb),Nb=qc.dtype):(qc=C.getBuffer(mb))?Nb=qc.dtype:"constant"in mb?(yb=2,"number"===typeof mb.constant?(ob=mb.constant,Ua=hd=cb=0):(ob=0<mb.constant.length?mb.constant[0]:0,Ua=1<
mb.constant.length?mb.constant[1]:0,hd=2<mb.constant.length?mb.constant[2]:0,cb=3<mb.constant.length?mb.constant[3]:0)):(qc=aa(mb.buffer)?C.createStream(34962,mb.buffer):C.getBuffer(mb.buffer),Nb="type"in mb?la[mb.type]:qc.dtype,gc=!!mb.normalized,bc=mb.size|0,bb=mb.offset|0,eb=mb.stride|0,nc=mb.divisor|0);Ib=ta.location;Jb=P[Ib];if(1===yb){Jb.buffer||J.enableVertexAttribArray(Ib);rc=bc||2;if(Jb.type!==Nb||Jb.size!==rc||Jb.buffer!==qc||Jb.normalized!==gc||Jb.offset!==bb||Jb.stride!==eb)J.bindBuffer(34962,
qc.buffer),J.vertexAttribPointer(Ib,rc,Nb,gc,eb,bb),Jb.type=Nb,Jb.size=rc,Jb.buffer=qc,Jb.normalized=gc,Jb.offset=bb,Jb.stride=eb;Jb.divisor!==nc&&(oa.vertexAttribDivisorANGLE(Ib,nc),Jb.divisor=nc)}else if(Jb.buffer&&(J.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==ob||Jb.y!==Ua||Jb.z!==hd||Jb.w!==cb)J.vertexAttrib4f(Ib,ob,Ua,hd,cb),Jb.x=ob,Jb.y=Ua,Jb.z=hd,Jb.w=cb;ca.buffer=h.positionBuffer;Ob=!1;jb=null;Gb=0;Db=!1;hb=wb=0;Yb=1;Pb=0;qb=5126;cc=zb=Ub=Ra=0;aa(ca)?(Ob=!0,jb=C.createStream(34962,
ca),qb=jb.dtype):(jb=C.getBuffer(ca))?qb=jb.dtype:"constant"in ca?(Yb=2,"number"===typeof ca.constant?(Ub=ca.constant,zb=cc=Ra=0):(Ub=0<ca.constant.length?ca.constant[0]:0,zb=1<ca.constant.length?ca.constant[1]:0,cc=2<ca.constant.length?ca.constant[2]:0,Ra=3<ca.constant.length?ca.constant[3]:0)):(jb=aa(ca.buffer)?C.createStream(34962,ca.buffer):C.getBuffer(ca.buffer),qb="type"in ca?la[ca.type]:jb.dtype,Db=!!ca.normalized,hb=ca.size|0,wb=ca.offset|0,Pb=ca.stride|0,Gb=ca.divisor|0);ib=ja.location;pb=
P[ib];if(1===Yb){pb.buffer||J.enableVertexAttribArray(ib);Ha=hb||2;if(pb.type!==qb||pb.size!==Ha||pb.buffer!==jb||pb.normalized!==Db||pb.offset!==wb||pb.stride!==Pb)J.bindBuffer(34962,jb.buffer),J.vertexAttribPointer(ib,Ha,qb,Db,Pb,wb),pb.type=qb,pb.size=Ha,pb.buffer=jb,pb.normalized=Db,pb.offset=wb,pb.stride=Pb;pb.divisor!==Gb&&(oa.vertexAttribDivisorANGLE(ib,Gb),pb.divisor=Gb)}else if(pb.buffer&&(J.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==cc||pb.w!==Ra)J.vertexAttrib4f(ib,
Ub,zb,cc,Ra),pb.x=Ub,pb.y=zb,pb.z=cc,pb.w=Ra;W.buffer=h.colorBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;aa(W)?(rb=!0,Ka=C.createStream(34962,W),sb=Ka.dtype):(Ka=C.getBuffer(W))?sb=Ka.dtype:"constant"in W?(Va=2,"number"===typeof W.constant?(tc=W.constant,Qa=Kb=Oa=0):(tc=0<W.constant.length?W.constant[0]:0,Qa=1<W.constant.length?W.constant[1]:0,Kb=2<W.constant.length?W.constant[2]:0,Oa=3<W.constant.length?W.constant[3]:0)):(Ka=aa(W.buffer)?C.createStream(34962,W.buffer):
C.getBuffer(W.buffer),sb="type"in W?la[W.type]:Ka.dtype,gb=!!W.normalized,kb=W.size|0,La=W.offset|0,tb=W.stride|0,fb=W.divisor|0);Eb=S.location;Ma=P[Eb];if(1===Va){Ma.buffer||J.enableVertexAttribArray(Eb);yd=kb||4;if(Ma.type!==sb||Ma.size!==yd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)J.bindBuffer(34962,Ka.buffer),J.vertexAttribPointer(Eb,yd,sb,gb,tb,La),Ma.type=sb,Ma.size=yd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(oa.vertexAttribDivisorANGLE(Eb,
fb),Ma.divisor=fb)}else if(Ma.buffer&&(J.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==tc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)J.vertexAttrib4f(Eb,tc,Qa,Kb,Oa),Ma.x=tc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Ia.buffer=h.colorBuffer;Ya=!1;Lb=null;Mb=0;lb=!1;Zb=Na=0;Pa=1;ub=0;vb=5126;Ac=hc=nb=Sa=0;aa(Ia)?(Ya=!0,Lb=C.createStream(34962,Ia),vb=Lb.dtype):(Lb=C.getBuffer(Ia))?vb=Lb.dtype:"constant"in Ia?(Pa=2,"number"===typeof Ia.constant?(nb=Ia.constant,hc=Ac=Sa=0):(nb=0<Ia.constant.length?Ia.constant[0]:0,hc=1<Ia.constant.length?
Ia.constant[1]:0,Ac=2<Ia.constant.length?Ia.constant[2]:0,Sa=3<Ia.constant.length?Ia.constant[3]:0)):(Lb=aa(Ia.buffer)?C.createStream(34962,Ia.buffer):C.getBuffer(Ia.buffer),vb="type"in Ia?la[Ia.type]:Lb.dtype,lb=!!Ia.normalized,Zb=Ia.size|0,Na=Ia.offset|0,ub=Ia.stride|0,Mb=Ia.divisor|0);vc=X.location;db=P[vc];if(1===Pa){db.buffer||J.enableVertexAttribArray(vc);kc=Zb||4;if(db.type!==vb||db.size!==kc||db.buffer!==Lb||db.normalized!==lb||db.offset!==Na||db.stride!==ub)J.bindBuffer(34962,Lb.buffer),
J.vertexAttribPointer(vc,kc,vb,lb,ub,Na),db.type=vb,db.size=kc,db.buffer=Lb,db.normalized=lb,db.offset=Na,db.stride=ub;db.divisor!==Mb&&(oa.vertexAttribDivisorANGLE(vc,Mb),db.divisor=Mb)}else if(db.buffer&&(J.disableVertexAttribArray(vc),db.buffer=null),db.x!==nb||db.y!==hc||db.z!==Ac||db.w!==Sa)J.vertexAttrib4f(vc,nb,hc,Ac,Sa),db.x=nb,db.y=hc,db.z=Ac,db.w=Sa;qd=E.location;Wa=P[qd];Wa.buffer||J.enableVertexAttribArray(qd);if(5126!==Wa.type||1!==Wa.size||Wa.buffer!==e||!1!==Wa.normalized||0!==Wa.offset||
8!==Wa.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(qd,1,5126,!1,8,0),Wa.type=5126,Wa.size=1,Wa.buffer=e,Wa.normalized=!1,Wa.offset=0,Wa.stride=8;0!==Wa.divisor&&(oa.vertexAttribDivisorANGLE(qd,0),Wa.divisor=0);Mc=d.location;Ab=P[Mc];Ab.buffer||J.enableVertexAttribArray(Mc);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==l||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(Mc,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=l,Ab.normalized=
!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(oa.vertexAttribDivisorANGLE(Mc,0),Ab.divisor=0);Za=h.scale;J.uniform2f(Cc.location,Za[0],Za[1]);Vb=h.translate;J.uniform2f(ea.location,Vb[0],Vb[1]);J.uniform1f(V.location,h.thickness);J.uniform1f(D.location,h.depth);uc=q.call(this,g,h,0);J.uniform4f(O.location,uc[0],uc[1],uc[2],uc[3]);J.uniform1f(I.location,h.miterLimit);Wb=c.call(this,g,h,0);J.uniform1f(a.location,Wb);J.uniform1f(w.location,h.dashLength);J.uniform1f(A.location,h.opacity);(Qb=h.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;J.uniform1i(Y.location,Kc.bind());(Rb=M.elements)?J.bindBuffer(34963,Rb.buffer.buffer):Aa.currentVAO&&(Rb=Da.getElements(Aa.currentVAO.elements))&&J.bindBuffer(34963,Rb.buffer.buffer);pe=h.count;0<pe?Rb?oa.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),pe):oa.drawArraysInstancedANGLE(5,0,4,pe):0>pe&&(Rb?J.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):J.drawArrays(5,0,4));N.dirty=!0;Aa.setVAO(null);g.viewportWidth=xa;g.viewportHeight=
x;U&&(da.cpuTime+=performance.now()-T);Ea&&C.destroyStream(ba);Pc&&C.destroyStream(Wc);pc&&C.destroyStream(qc);Ob&&C.destroyStream(jb);rb&&C.destroyStream(Ka);Ya&&C.destroyStream(Lb);Kc.unbind()},scope:function(a,d,c){var f,h,r,m,k,b,p,H,q,y,t,na,w,A,sa,Ja,J,Ca,P,Xa,ra,fa,O,ga,D,I,L,E,va,K,Fa,Da,R,S,ka,Ta,V,X,ya,ea,ia,Hb,pa,ta,Y,ja,Aa,Bd,Cc,Z,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,ha,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,
ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd,wd,ue,jd,ab,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,hf,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;f=a.viewport;h=f.x|0;r=f.y|0;m="width"in f?f.width|0:g.framebufferWidth-
h;k="height"in f?f.height|0:g.framebufferHeight-r;b=g.viewportWidth;g.viewportWidth=m;p=g.viewportHeight;g.viewportHeight=k;H=xa[0];xa[0]=h;q=xa[1];xa[1]=r;y=xa[2];xa[2]=m;t=xa[3];xa[3]=k;na=wa[0];wa[0]=0;w=wa[1];wa[1]=0;A=wa[2];wa[2]=0;sa=wa[3];wa[3]=0;Ja=Q.blend_enable;Q.blend_enable=!0;J=Ba[0];Ba[0]=32774;Ca=Ba[1];Ba[1]=32774;P=oa[0];oa[0]=770;Xa=oa[1];oa[1]=771;ra=oa[2];oa[2]=773;fa=oa[3];oa[3]=1;O=Q.cull_enable;Q.cull_enable=!0;ga=Q.cull_face;Q.cull_face=1029;D=F.call(this,g,a,c);I=Q.depth_enable;
Q.depth_enable=D;L=a.viewport;E=L.x|0;va=L.y|0;K="width"in L?L.width|0:g.framebufferWidth-E;Fa="height"in L?L.height|0:g.framebufferHeight-va;Da=Ea[0];Ea[0]=E;R=Ea[1];Ea[1]=va;S=Ea[2];Ea[2]=K;ka=Ea[3];Ea[3]=Fa;Ta=Q.scissor_enable;Q.scissor_enable=!0;V=Q.stencil_enable;Q.stencil_enable=!1;if(X=N.profile)ya=performance.now(),da.count++;ea=M.offset;M.offset=0;ia=M.count;M.count=4;Hb=a.count;pa=M.instances;M.instances=Hb;ta=M.primitive;M.primitive=5;Y=a.dashLength;ja=qa[23];qa[23]=Y;Aa=a.dashTexture;
Bd=qa[24];qa[24]=Aa;Cc=a.depth;Z=qa[22];qa[22]=Cc;gc=a.id;bb=qa[31];qa[31]=gc;bc=a.miterLimit;yb=qa[32];qa[32]=bc;eb=B.call(this,g,a,c);Nb=qa[33];qa[33]=eb;cb=a.opacity;ob=qa[10];qa[10]=cb;Ua=g.pixelRatio;ha=qa[34];qa[34]=Ua;Ib=a.scale;Jb=qa[6];qa[6]=Ib;rc=a.scaleFract;Ob=qa[7];qa[7]=rc;jb=a.thickness;Gb=qa[21];qa[21]=jb;Db=a.translate;wb=qa[8];qa[8]=Db;hb=a.translateFract;Yb=qa[9];qa[9]=hb;Pb=G.call(this,g,a,c);qb=qa[3];qa[3]=Pb;W.buffer=a.colorBuffer;Ra=!1;Ub=null;zb=0;cc=!1;pb=ib=0;Ha=1;rb=0;Ka=
5126;kb=La=gb=fb=0;aa(W)?(Ra=!0,Ub=C.createStream(34962,W),Ka=Ub.dtype):(Ub=C.getBuffer(W))?Ka=Ub.dtype:"constant"in W?(Ha=2,"number"===typeof W.constant?(gb=W.constant,La=kb=fb=0):(gb=0<W.constant.length?W.constant[0]:0,La=1<W.constant.length?W.constant[1]:0,kb=2<W.constant.length?W.constant[2]:0,fb=3<W.constant.length?W.constant[3]:0)):(Ub=aa(W.buffer)?C.createStream(34962,W.buffer):C.getBuffer(W.buffer),Ka="type"in W?la[W.type]:Ub.dtype,cc=!!W.normalized,pb=W.size|0,ib=W.offset|0,rb=W.stride|0,
zb=W.divisor|0);Va=U.buffer;U.buffer=Ub;tb=U.divisor;U.divisor=zb;sb=U.normalized;U.normalized=cc;Oa=U.offset;U.offset=ib;tc=U.size;U.size=pb;Qa=U.state;U.state=Ha;Kb=U.stride;U.stride=rb;Eb=U.type;U.type=Ka;Ma=U.w;U.w=fb;yd=U.x;U.x=gb;Ya=U.y;U.y=La;Lb=U.z;U.z=kb;ua.buffer=a.positionBuffer;Mb=!1;lb=null;Na=0;Zb=!1;ub=Pa=0;vb=1;Sa=0;nb=5126;db=vc=Ac=hc=0;aa(ua)?(Mb=!0,lb=C.createStream(34962,ua),nb=lb.dtype):(lb=C.getBuffer(ua))?nb=lb.dtype:"constant"in ua?(vb=2,"number"===typeof ua.constant?(Ac=ua.constant,
vc=db=hc=0):(Ac=0<ua.constant.length?ua.constant[0]:0,vc=1<ua.constant.length?ua.constant[1]:0,db=2<ua.constant.length?ua.constant[2]:0,hc=3<ua.constant.length?ua.constant[3]:0)):(lb=aa(ua.buffer)?C.createStream(34962,ua.buffer):C.getBuffer(ua.buffer),nb="type"in ua?la[ua.type]:lb.dtype,Zb=!!ua.normalized,ub=ua.size|0,Pa=ua.offset|0,Sa=ua.stride|0,Na=ua.divisor|0);kc=n.buffer;n.buffer=lb;qd=n.divisor;n.divisor=Na;Wa=n.normalized;n.normalized=Zb;Mc=n.offset;n.offset=Pa;Ab=n.size;n.size=ub;Za=n.state;
n.state=vb;Vb=n.stride;n.stride=Sa;uc=n.type;n.type=nb;Wb=n.w;n.w=hc;Qb=n.x;n.x=Ac;Kc=n.y;n.y=vc;Rb=n.z;n.z=db;Ia.buffer=a.colorBuffer;pe=!1;Fc=null;sd=0;Nc=!1;td=Yc=0;oc=1;wc=0;ic=5126;Xb=Tb=sc=$a=0;aa(Ia)?(pe=!0,Fc=C.createStream(34962,Ia),ic=Fc.dtype):(Fc=C.getBuffer(Ia))?ic=Fc.dtype:"constant"in Ia?(oc=2,"number"===typeof Ia.constant?(sc=Ia.constant,Tb=Xb=$a=0):(sc=0<Ia.constant.length?Ia.constant[0]:0,Tb=1<Ia.constant.length?Ia.constant[1]:0,Xb=2<Ia.constant.length?Ia.constant[2]:0,$a=3<Ia.constant.length?
Ia.constant[3]:0)):(Fc=aa(Ia.buffer)?C.createStream(34962,Ia.buffer):C.getBuffer(Ia.buffer),ic="type"in Ia?la[Ia.type]:Fc.dtype,Nc=!!Ia.normalized,td=Ia.size|0,Yc=Ia.offset|0,wc=Ia.stride|0,sd=Ia.divisor|0);ec=u.buffer;u.buffer=Fc;jc=u.divisor;u.divisor=sd;yc=u.normalized;u.normalized=Nc;Bc=u.offset;u.offset=Yc;cd=u.size;u.size=td;Qc=u.state;u.state=oc;Rc=u.stride;u.stride=wc;Sc=u.type;u.type=ic;Zc=u.w;u.w=$a;od=u.x;u.x=sc;dd=u.y;u.y=Tb;$c=u.z;u.z=Xb;za.buffer=a.positionBuffer;lc=!1;dc=null;ad=0;
Uc=!1;zc=ed=0;id=1;Nd=0;wd=5126;Od=ab=jd=ue=0;aa(za)?(lc=!0,dc=C.createStream(34962,za),wd=dc.dtype):(dc=C.getBuffer(za))?wd=dc.dtype:"constant"in za?(id=2,"number"===typeof za.constant?(jd=za.constant,ab=Od=ue=0):(jd=0<za.constant.length?za.constant[0]:0,ab=1<za.constant.length?za.constant[1]:0,Od=2<za.constant.length?za.constant[2]:0,ue=3<za.constant.length?za.constant[3]:0)):(dc=aa(za.buffer)?C.createStream(34962,za.buffer):C.getBuffer(za.buffer),wd="type"in za?la[za.type]:dc.dtype,Uc=!!za.normalized,
zc=za.size|0,ed=za.offset|0,Nd=za.stride|0,ad=za.divisor|0);ge=x.buffer;x.buffer=dc;ce=x.divisor;x.divisor=ad;$d=x.normalized;x.normalized=Uc;Jd=x.offset;x.offset=ed;Hd=x.size;x.size=zc;md=x.state;x.state=id;Tc=x.stride;x.stride=Nd;ud=x.type;x.type=wd;rd=x.w;x.w=ue;kd=x.x;x.x=jd;vd=x.y;x.y=ab;Cd=x.z;x.z=Od;Fd=ba.buffer;ba.buffer=e;je=ba.divisor;ba.divisor=0;ye=ba.normalized;ba.normalized=!1;Fe=ba.offset;ba.offset=0;le=ba.size;ba.size=0;ke=ba.state;ba.state=1;he=ba.stride;ba.stride=8;ve=ba.type;ba.type=
5126;de=ba.w;ba.w=0;me=ba.x;ba.x=0;Oc=ba.y;ba.y=0;gd=ba.z;ba.z=0;we=v.buffer;v.buffer=l;qe=v.divisor;v.divisor=0;Kd=v.normalized;v.normalized=!1;Pd=v.offset;v.offset=4;Rd=v.size;v.size=0;Sd=v.state;v.state=1;ne=v.stride;v.stride=8;Ge=v.type;v.type=5126;Be=v.w;v.w=0;se=v.x;v.x=0;Re=v.y;v.y=0;Se=v.z;v.z=0;mb.buffer=a.positionBuffer;Oe=!1;xe=null;He=0;Je=!1;Le=Ke=0;Ie=1;Ld=0;Wd=5126;Id=Me=ee=be=0;aa(mb)?(Oe=!0,xe=C.createStream(34962,mb),Wd=xe.dtype):(xe=C.getBuffer(mb))?Wd=xe.dtype:"constant"in mb?
(Ie=2,"number"===typeof mb.constant?(ee=mb.constant,Me=Id=be=0):(ee=0<mb.constant.length?mb.constant[0]:0,Me=1<mb.constant.length?mb.constant[1]:0,Id=2<mb.constant.length?mb.constant[2]:0,be=3<mb.constant.length?mb.constant[3]:0)):(xe=aa(mb.buffer)?C.createStream(34962,mb.buffer):C.getBuffer(mb.buffer),Wd="type"in mb?la[mb.type]:xe.dtype,Je=!!mb.normalized,Le=mb.size|0,Ke=mb.offset|0,Ld=mb.stride|0,He=mb.divisor|0);Td=T.buffer;T.buffer=xe;De=T.divisor;T.divisor=He;Ne=T.normalized;T.normalized=Je;
hf=T.offset;T.offset=Ke;bf=T.size;T.size=Le;Te=T.state;T.state=Ie;Pe=T.stride;T.stride=Ld;af=T.type;T.type=Wd;Ye=T.w;T.w=be;Ue=T.x;T.x=ee;Ve=T.y;T.y=Me;Ud=T.z;T.z=Id;ca.buffer=a.positionBuffer;ae=!1;We=null;jf=0;nf=!1;kf=ef=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;aa(ca)?(ae=!0,We=C.createStream(34962,ca),rf=We.dtype):(We=C.getBuffer(ca))?rf=We.dtype:"constant"in ca?(lf=2,"number"===typeof ca.constant?(sf=ca.constant,Bf=Cf=of=0):(sf=0<ca.constant.length?ca.constant[0]:0,Bf=1<ca.constant.length?ca.constant[1]:
0,Cf=2<ca.constant.length?ca.constant[2]:0,of=3<ca.constant.length?ca.constant[3]:0)):(We=aa(ca.buffer)?C.createStream(34962,ca.buffer):C.getBuffer(ca.buffer),rf="type"in ca?la[ca.type]:We.dtype,nf=!!ca.normalized,kf=ca.size|0,ef=ca.offset|0,mf=ca.stride|0,jf=ca.divisor|0);Qe=z.buffer;z.buffer=We;Ee=z.divisor;z.divisor=jf;pf=z.normalized;z.normalized=nf;qf=z.offset;z.offset=ef;Df=z.size;z.size=kf;Gf=z.state;z.state=lf;Af=z.stride;z.stride=mf;Ef=z.type;z.type=rf;Ff=z.w;z.w=of;wf=z.x;z.x=sf;xf=z.y;
z.y=Bf;vf=z.z;z.z=Cf;yf=ma.vert;ma.vert=36;zf=ma.frag;ma.frag=35;N.dirty=!0;d(g,a,c);g.viewportWidth=b;g.viewportHeight=p;xa[0]=H;xa[1]=q;xa[2]=y;xa[3]=t;wa[0]=na;wa[1]=w;wa[2]=A;wa[3]=sa;Q.blend_enable=Ja;Ba[0]=J;Ba[1]=Ca;oa[0]=P;oa[1]=Xa;oa[2]=ra;oa[3]=fa;Q.cull_enable=O;Q.cull_face=ga;Q.depth_enable=I;Ea[0]=Da;Ea[1]=R;Ea[2]=S;Ea[3]=ka;Q.scissor_enable=Ta;Q.stencil_enable=V;X&&(da.cpuTime+=performance.now()-ya);M.offset=ea;M.count=ia;M.instances=pa;M.primitive=ta;qa[23]=ja;qa[24]=Bd;qa[22]=Z;qa[31]=
bb;qa[32]=yb;qa[33]=Nb;qa[10]=ob;qa[34]=ha;qa[6]=Jb;qa[7]=Ob;qa[21]=Gb;qa[8]=wb;qa[9]=Yb;qa[3]=qb;Ra&&C.destroyStream(Ub);U.buffer=Va;U.divisor=tb;U.normalized=sb;U.offset=Oa;U.size=tc;U.state=Qa;U.stride=Kb;U.type=Eb;U.w=Ma;U.x=yd;U.y=Ya;U.z=Lb;Mb&&C.destroyStream(lb);n.buffer=kc;n.divisor=qd;n.normalized=Wa;n.offset=Mc;n.size=Ab;n.state=Za;n.stride=Vb;n.type=uc;n.w=Wb;n.x=Qb;n.y=Kc;n.z=Rb;pe&&C.destroyStream(Fc);u.buffer=ec;u.divisor=jc;u.normalized=yc;u.offset=Bc;u.size=cd;u.state=Qc;u.stride=
Rc;u.type=Sc;u.w=Zc;u.x=od;u.y=dd;u.z=$c;lc&&C.destroyStream(dc);x.buffer=ge;x.divisor=ce;x.normalized=$d;x.offset=Jd;x.size=Hd;x.state=md;x.stride=Tc;x.type=ud;x.w=rd;x.x=kd;x.y=vd;x.z=Cd;ba.buffer=Fd;ba.divisor=je;ba.normalized=ye;ba.offset=Fe;ba.size=le;ba.state=ke;ba.stride=he;ba.type=ve;ba.w=de;ba.x=me;ba.y=Oc;ba.z=gd;v.buffer=we;v.divisor=qe;v.normalized=Kd;v.offset=Pd;v.size=Rd;v.state=Sd;v.stride=ne;v.type=Ge;v.w=Be;v.x=se;v.y=Re;v.z=Se;Oe&&C.destroyStream(xe);T.buffer=Td;T.divisor=De;T.normalized=
Ne;T.offset=hf;T.size=bf;T.state=Te;T.stride=Pe;T.type=af;T.w=Ye;T.x=Ue;T.y=Ve;T.z=Ud;ae&&C.destroyStream(We);z.buffer=Qe;z.divisor=Ee;z.normalized=pf;z.offset=qf;z.size=Df;z.state=Gf;z.stride=Af;z.type=Ef;z.w=Ff;z.x=wf;z.y=xf;z.z=vf;ma.vert=yf;ma.frag=zf;N.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z){var R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Cc,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,
ka,oa;R=b.attributes;ia=b.buffer;h=b.context;t=b.current;S=b.draw;k=b.elements;X=b.extensions;f=b.framebuffer;w=b.gl;Y=b.isBufferArgs;D=b.next;E=b.shader;d=b.uniforms;I=b.vao;a=D.blend_color;ta=t.blend_color;A=D.blend_equation;ja=t.blend_equation;Cc=D.blend_func;V=t.blend_func;ea=D.colorMask;O=t.colorMask;P=D.depth_range;C=t.depth_range;g=D.polygonOffset_offset;N=t.polygonOffset_offset;M=D.sample_coverage;Da=t.sample_coverage;pa=D.scissor_box;m=t.scissor_box;J=D.stencil_func;aa=t.stencil_func;Q=D.stencil_opBack;
ma=t.stencil_opBack;qa=D.stencil_opFront;Aa=t.stencil_opFront;wa=D.viewport;fa=t.viewport;Ba={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(a,d){var c,l,b,r,p,q;c=f.next;c!==f.cur&&(c?w.bindFramebuffer(36160,c.framebuffer):w.bindFramebuffer(36160,null),f.cur=c);if(t.dirty){var A,e,L,E,ga,H,sa,Ca,ra,xa,K,la,W,wa,pa,za,Cc,ca,Z,$b,Ga,ac,Sb,ha,Dd,re,Vd,ze,zd,Qd,oe,ie;A=D.dither;A!==t.dither&&
(A?w.enable(3024):w.disable(3024),t.dither=A);e=D.depth_func;e!==t.depth_func&&(w.depthFunc(e),t.depth_func=e);L=P[0];E=P[1];if(L!==C[0]||E!==C[1])w.depthRange(L,E),C[0]=L,C[1]=E;ga=D.depth_mask;ga!==t.depth_mask&&(w.depthMask(ga),t.depth_mask=ga);H=ea[0];sa=ea[1];Ca=ea[2];ra=ea[3];if(H!==O[0]||sa!==O[1]||Ca!==O[2]||ra!==O[3])w.colorMask(H,sa,Ca,ra),O[0]=H,O[1]=sa,O[2]=Ca,O[3]=ra;xa=D.cull_enable;xa!==t.cull_enable&&(xa?w.enable(2884):w.disable(2884),t.cull_enable=xa);K=D.cull_face;K!==t.cull_face&&
(w.cullFace(K),t.cull_face=K);la=D.frontFace;la!==t.frontFace&&(w.frontFace(la),t.frontFace=la);W=D.lineWidth;W!==t.lineWidth&&(w.lineWidth(W),t.lineWidth=W);wa=D.polygonOffset_enable;wa!==t.polygonOffset_enable&&(wa?w.enable(32823):w.disable(32823),t.polygonOffset_enable=wa);pa=g[0];za=g[1];if(pa!==N[0]||za!==N[1])w.polygonOffset(pa,za),N[0]=pa,N[1]=za;Cc=D.sample_alpha;Cc!==t.sample_alpha&&(Cc?w.enable(32926):w.disable(32926),t.sample_alpha=Cc);ca=D.sample_enable;ca!==t.sample_enable&&(ca?w.enable(32928):
w.disable(32928),t.sample_enable=ca);Z=M[0];$b=M[1];if(Z!==Da[0]||$b!==Da[1])w.sampleCoverage(Z,$b),Da[0]=Z,Da[1]=$b;Ga=D.stencil_mask;Ga!==t.stencil_mask&&(w.stencilMask(Ga),t.stencil_mask=Ga);ac=J[0];Sb=J[1];ha=J[2];if(ac!==aa[0]||Sb!==aa[1]||ha!==aa[2])w.stencilFunc(ac,Sb,ha),aa[0]=ac,aa[1]=Sb,aa[2]=ha;Dd=qa[0];re=qa[1];Vd=qa[2];ze=qa[3];if(Dd!==Aa[0]||re!==Aa[1]||Vd!==Aa[2]||ze!==Aa[3])w.stencilOpSeparate(Dd,re,Vd,ze),Aa[0]=Dd,Aa[1]=re,Aa[2]=Vd,Aa[3]=ze;zd=Q[0];Qd=Q[1];oe=Q[2];ie=Q[3];if(zd!==
ma[0]||Qd!==ma[1]||oe!==ma[2]||ie!==ma[3])w.stencilOpSeparate(zd,Qd,oe,ie),ma[0]=zd,ma[1]=Qd,ma[2]=oe,ma[3]=ie}w.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;w.enable(3042);t.blend_enable=!0;w.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;w.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;w.disable(2929);t.depth_enable=!1;w.enable(3089);t.scissor_enable=!0;w.disable(2960);t.stencil_enable=!1;if(l=t.profile)b=performance.now(),da.count+=d;w.useProgram(F.program);
r=X.angle_instanced_arrays;var Ed;I.setVAO(null);Ed=S.instances;for(p=0;p<d;++p){q=a[p];var Xd,fe,Md,Xe,Ze,$e,Gd,Ae,te,Yd,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb;Xd=q.viewport;fe=Xd.x|0;Md=Xd.y|0;Xe="width"in Xd?Xd.width|0:h.framebufferWidth-fe;Ze="height"in Xd?Xd.height|0:h.framebufferHeight-Md;$e=h.viewportWidth;h.viewportWidth=
Xe;Gd=h.viewportHeight;h.viewportHeight=Ze;w.viewport(fe,Md,Xe,Ze);fa[0]=fe;fa[1]=Md;fa[2]=Xe;fa[3]=Ze;Ae=q.viewport;te=Ae.x|0;Yd=Ae.y|0;Ad="width"in Ae?Ae.width|0:h.framebufferWidth-te;Zd="height"in Ae?Ae.height|0:h.framebufferHeight-Yd;w.scissor(te,Yd,Ad,Zd);m[0]=te;m[1]=Yd;m[2]=Ad;m[3]=Zd;ka.buffer=q.positionBuffer;ld=!1;bd=null;pd=0;Lc=!1;Gc=nd=0;fd=1;Pc=0;Wc=5126;xb=Dc=Fb=Bb=0;Y(ka)?(ld=!0,bd=ia.createStream(34962,ka),Wc=bd.dtype):(bd=ia.getBuffer(ka))?Wc=bd.dtype:"constant"in ka?(fd=2,"number"===
typeof ka.constant?(Fb=ka.constant,Dc=xb=Bb=0):(Fb=0<ka.constant.length?ka.constant[0]:0,Dc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Bb=3<ka.constant.length?ka.constant[3]:0)):(bd=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),Wc="type"in ka?Ba[ka.type]:bd.dtype,Lc=!!ka.normalized,Gc=ka.size|0,nd=ka.offset|0,Pc=ka.stride|0,pd=ka.divisor|0);xc=u.location;Cb=R[xc];if(1===fd){Cb.buffer||w.enableVertexAttribArray(xc);Jc=Gc||2;if(Cb.type!==Wc||
Cb.size!==Jc||Cb.buffer!==bd||Cb.normalized!==Lc||Cb.offset!==nd||Cb.stride!==Pc)w.bindBuffer(34962,bd.buffer),w.vertexAttribPointer(xc,Jc,Wc,Lc,Pc,nd),Cb.type=Wc,Cb.size=Jc,Cb.buffer=bd,Cb.normalized=Lc,Cb.offset=nd,Cb.stride=Pc;Cb.divisor!==pd&&(r.vertexAttribDivisorANGLE(xc,pd),Cb.divisor=pd)}else if(Cb.buffer&&(w.disableVertexAttribArray(xc),Cb.buffer=null),Cb.x!==Fb||Cb.y!==Dc||Cb.z!==xb||Cb.w!==Bb)w.vertexAttrib4f(xc,Fb,Dc,xb,Bb),Cb.x=Fb,Cb.y=Dc,Cb.z=xb,Cb.w=Bb;oa.buffer=q.positionFractBuffer;
mc=!1;Hc=null;Xc=0;Vc=!1;fc=Ec=0;Ic=1;pc=0;qc=5126;bc=bb=gc=nc=0;Y(oa)?(mc=!0,Hc=ia.createStream(34962,oa),qc=Hc.dtype):(Hc=ia.getBuffer(oa))?qc=Hc.dtype:"constant"in oa?(Ic=2,"number"===typeof oa.constant?(gc=oa.constant,bb=bc=nc=0):(gc=0<oa.constant.length?oa.constant[0]:0,bb=1<oa.constant.length?oa.constant[1]:0,bc=2<oa.constant.length?oa.constant[2]:0,nc=3<oa.constant.length?oa.constant[3]:0)):(Hc=Y(oa.buffer)?ia.createStream(34962,oa.buffer):ia.getBuffer(oa.buffer),qc="type"in oa?Ba[oa.type]:
Hc.dtype,Vc=!!oa.normalized,fc=oa.size|0,Ec=oa.offset|0,pc=oa.stride|0,Xc=oa.divisor|0);yb=x.location;eb=R[yb];if(1===Ic){eb.buffer||w.enableVertexAttribArray(yb);Nb=fc||2;if(eb.type!==qc||eb.size!==Nb||eb.buffer!==Hc||eb.normalized!==Vc||eb.offset!==Ec||eb.stride!==pc)w.bindBuffer(34962,Hc.buffer),w.vertexAttribPointer(yb,Nb,qc,Vc,pc,Ec),eb.type=qc,eb.size=Nb,eb.buffer=Hc,eb.normalized=Vc,eb.offset=Ec,eb.stride=pc;eb.divisor!==Xc&&(r.vertexAttribDivisorANGLE(yb,Xc),eb.divisor=Xc)}else if(eb.buffer&&
(w.disableVertexAttribArray(yb),eb.buffer=null),eb.x!==gc||eb.y!==bb||eb.z!==bc||eb.w!==nc)w.vertexAttrib4f(yb,gc,bb,bc,nc),eb.x=gc,eb.y=bb,eb.z=bc,eb.w=nc;cb=q.fill;ob=cb[0];hd=cb[1];Jb=cb[2];Ob=cb[3];p&&Ua===ob&&Ib===hd&&rc===Jb&&jb===Ob||(Ua=ob,Ib=hd,rc=Jb,jb=Ob,w.uniform4f(G.location,ob,hd,Jb,Ob));Gb=q.scale;Db=Gb[0];hb=Gb[1];p&&wb===Db&&Yb===hb||(wb=Db,Yb=hb,w.uniform2f(ba.location,Db,hb));Pb=q.scaleFract;qb=Pb[0];Ub=Pb[1];p&&Ra===qb&&zb===Ub||(Ra=qb,zb=Ub,w.uniform2f(v.location,qb,Ub));cc=q.translate;
ib=cc[0];Ha=cc[1];p&&pb===ib&&rb===Ha||(pb=ib,rb=Ha,w.uniform2f(T.location,ib,Ha));Ka=q.translateFract;fb=Ka[0];La=Ka[1];p&&gb===fb&&kb===La||(gb=fb,kb=La,w.uniform2f(z.location,fb,La));Va=q.id;p&&tb===Va||(tb=Va,w.uniform1f(U.location,Va));sb=q.opacity;p&&Oa===sb||(Oa=sb,w.uniform1f(n.location,sb));tc=B.call(this,h,q,p);Qa=null;(Qa=(Kb=Y(tc))?k.createStream(tc):k.getElements(tc))&&w.bindBuffer(34963,Qa.buffer.buffer);if(Eb=Qa?Qa.vertCount:-1)0<Ed?Qa?r.drawElementsInstancedANGLE(4,Eb,Qa.type,0<<(Qa.type-
5121>>1),Ed):r.drawArraysInstancedANGLE(4,0,Eb,Ed):0>Ed&&(Qa?w.drawElements(4,Eb,Qa.type,0<<(Qa.type-5121>>1)):w.drawArrays(4,0,Eb)),h.viewportWidth=$e,h.viewportHeight=Gd,ld&&ia.destroyStream(bd),mc&&ia.destroyStream(Hc),Kb&&k.destroyStream(Qa)}t.dirty=!0;I.setVAO(null);l&&(da.cpuTime+=performance.now()-b)},draw:function(a){var d,c,l,b,r,p,q,A,e,E,B,ga,H,sa,Ca,ra,xa,wa,la,W,F,pa;d=f.next;d!==f.cur&&(d?w.bindFramebuffer(36160,d.framebuffer):w.bindFramebuffer(36160,null),f.cur=d);if(t.dirty){d=D.dither;
d!==t.dither&&(d?w.enable(3024):w.disable(3024),t.dither=d);d=D.depth_func;d!==t.depth_func&&(w.depthFunc(d),t.depth_func=d);d=P[0];p=P[1];if(d!==C[0]||p!==C[1])w.depthRange(d,p),C[0]=d,C[1]=p;d=D.depth_mask;d!==t.depth_mask&&(w.depthMask(d),t.depth_mask=d);d=ea[0];p=ea[1];c=ea[2];l=ea[3];if(d!==O[0]||p!==O[1]||c!==O[2]||l!==O[3])w.colorMask(d,p,c,l),O[0]=d,O[1]=p,O[2]=c,O[3]=l;d=D.cull_enable;d!==t.cull_enable&&(d?w.enable(2884):w.disable(2884),t.cull_enable=d);d=D.cull_face;d!==t.cull_face&&(w.cullFace(d),
t.cull_face=d);d=D.frontFace;d!==t.frontFace&&(w.frontFace(d),t.frontFace=d);d=D.lineWidth;d!==t.lineWidth&&(w.lineWidth(d),t.lineWidth=d);d=D.polygonOffset_enable;d!==t.polygonOffset_enable&&(d?w.enable(32823):w.disable(32823),t.polygonOffset_enable=d);d=g[0];p=g[1];if(d!==N[0]||p!==N[1])w.polygonOffset(d,p),N[0]=d,N[1]=p;d=D.sample_alpha;d!==t.sample_alpha&&(d?w.enable(32926):w.disable(32926),t.sample_alpha=d);d=D.sample_enable;d!==t.sample_enable&&(d?w.enable(32928):w.disable(32928),t.sample_enable=
d);d=M[0];p=M[1];if(d!==Da[0]||p!==Da[1])w.sampleCoverage(d,p),Da[0]=d,Da[1]=p;d=D.stencil_mask;d!==t.stencil_mask&&(w.stencilMask(d),t.stencil_mask=d);d=J[0];p=J[1];c=J[2];if(d!==aa[0]||p!==aa[1]||c!==aa[2])w.stencilFunc(d,p,c),aa[0]=d,aa[1]=p,aa[2]=c;d=qa[0];p=qa[1];c=qa[2];l=qa[3];if(d!==Aa[0]||p!==Aa[1]||c!==Aa[2]||l!==Aa[3])w.stencilOpSeparate(d,p,c,l),Aa[0]=d,Aa[1]=p,Aa[2]=c,Aa[3]=l;d=Q[0];p=Q[1];c=Q[2];l=Q[3];if(d!==ma[0]||p!==ma[1]||c!==ma[2]||l!==ma[3])w.stencilOpSeparate(d,p,c,l),ma[0]=
d,ma[1]=p,ma[2]=c,ma[3]=l}d=a.viewport;c=d.x|0;l=d.y|0;b="width"in d?d.width|0:h.framebufferWidth-c;r="height"in d?d.height|0:h.framebufferHeight-l;d=h.viewportWidth;h.viewportWidth=b;p=h.viewportHeight;h.viewportHeight=r;w.viewport(c,l,b,r);fa[0]=c;fa[1]=l;fa[2]=b;fa[3]=r;w.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;w.enable(3042);t.blend_enable=!0;w.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;w.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;w.disable(2929);
t.depth_enable=!1;r=a.viewport;c=r.x|0;l=r.y|0;b="width"in r?r.width|0:h.framebufferWidth-c;r="height"in r?r.height|0:h.framebufferHeight-l;w.scissor(c,l,b,r);m[0]=c;m[1]=l;m[2]=b;m[3]=r;w.enable(3089);t.scissor_enable=!0;w.disable(2960);t.stencil_enable=!1;if(c=t.profile)q=performance.now(),da.count++;w.useProgram(K.program);l=X.angle_instanced_arrays;I.setVAO(null);ka.buffer=a.positionBuffer;b=!1;A=0;e=!1;B=E=0;ga=1;H=0;sa=5126;wa=xa=ra=Ca=0;Y(ka)?(b=!0,r=ia.createStream(34962,ka),sa=r.dtype):(r=
ia.getBuffer(ka))?sa=r.dtype:"constant"in ka?(ga=2,"number"===typeof ka.constant?(ra=ka.constant,xa=wa=Ca=0):(ra=0<ka.constant.length?ka.constant[0]:0,xa=1<ka.constant.length?ka.constant[1]:0,wa=2<ka.constant.length?ka.constant[2]:0,Ca=3<ka.constant.length?ka.constant[3]:0)):(r=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),sa="type"in ka?Ba[ka.type]:r.dtype,e=!!ka.normalized,B=ka.size|0,E=ka.offset|0,H=ka.stride|0,A=ka.divisor|0);la=u.location;W=R[la];if(1===ga){W.buffer||
w.enableVertexAttribArray(la);B=B||2;if(W.type!==sa||W.size!==B||W.buffer!==r||W.normalized!==e||W.offset!==E||W.stride!==H)w.bindBuffer(34962,r.buffer),w.vertexAttribPointer(la,B,sa,e,H,E),W.type=sa,W.size=B,W.buffer=r,W.normalized=e,W.offset=E,W.stride=H;W.divisor!==A&&(l.vertexAttribDivisorANGLE(la,A),W.divisor=A)}else if(W.buffer&&(w.disableVertexAttribArray(la),W.buffer=null),W.x!==ra||W.y!==xa||W.z!==wa||W.w!==Ca)w.vertexAttrib4f(la,ra,xa,wa,Ca),W.x=ra,W.y=xa,W.z=wa,W.w=Ca;oa.buffer=a.positionFractBuffer;
A=!1;E=0;H=!1;Ca=sa=0;ra=1;la=0;W=5126;pa=F=wa=xa=0;Y(oa)?(A=!0,e=ia.createStream(34962,oa),W=e.dtype):(e=ia.getBuffer(oa))?W=e.dtype:"constant"in oa?(ra=2,"number"===typeof oa.constant?(wa=oa.constant,F=pa=xa=0):(wa=0<oa.constant.length?oa.constant[0]:0,F=1<oa.constant.length?oa.constant[1]:0,pa=2<oa.constant.length?oa.constant[2]:0,xa=3<oa.constant.length?oa.constant[3]:0)):(e=Y(oa.buffer)?ia.createStream(34962,oa.buffer):ia.getBuffer(oa.buffer),W="type"in oa?Ba[oa.type]:e.dtype,H=!!oa.normalized,
Ca=oa.size|0,sa=oa.offset|0,la=oa.stride|0,E=oa.divisor|0);B=x.location;ga=R[B];if(1===ra){ga.buffer||w.enableVertexAttribArray(B);Ca=Ca||2;if(ga.type!==W||ga.size!==Ca||ga.buffer!==e||ga.normalized!==H||ga.offset!==sa||ga.stride!==la)w.bindBuffer(34962,e.buffer),w.vertexAttribPointer(B,Ca,W,H,la,sa),ga.type=W,ga.size=Ca,ga.buffer=e,ga.normalized=H,ga.offset=sa,ga.stride=la;ga.divisor!==E&&(l.vertexAttribDivisorANGLE(B,E),ga.divisor=E)}else if(ga.buffer&&(w.disableVertexAttribArray(B),ga.buffer=null),
ga.x!==wa||ga.y!==F||ga.z!==pa||ga.w!==xa)w.vertexAttrib4f(B,wa,F,pa,xa),ga.x=wa,ga.y=F,ga.z=pa,ga.w=xa;E=a.fill;w.uniform4f(G.location,E[0],E[1],E[2],E[3]);E=a.scale;w.uniform2f(ba.location,E[0],E[1]);E=a.scaleFract;w.uniform2f(v.location,E[0],E[1]);E=a.translate;w.uniform2f(T.location,E[0],E[1]);E=a.translateFract;w.uniform2f(z.location,E[0],E[1]);w.uniform1f(U.location,a.id);w.uniform1f(n.location,a.opacity);E=L.call(this,h,a,0);(E=(a=Y(E))?k.createStream(E):k.getElements(E))&&w.bindBuffer(34963,
E.buffer.buffer);if(H=E?E.vertCount:-1)sa=S.instances,0<sa?E?l.drawElementsInstancedANGLE(4,H,E.type,0<<(E.type-5121>>1),sa):l.drawArraysInstancedANGLE(4,0,H,sa):0>sa&&(E?w.drawElements(4,H,E.type,0<<(E.type-5121>>1)):w.drawArrays(4,0,H)),t.dirty=!0,I.setVAO(null),h.viewportWidth=d,h.viewportHeight=p,c&&(da.cpuTime+=performance.now()-q),b&&ia.destroyStream(r),A&&ia.destroyStream(e),a&&k.destroyStream(E)},scope:function(g,f,m){var b,w,r,p,y,J,v,P,Q,C,H,sa,Ca,ra,fa,O,L,u,I,M,n,z,aa,N,B,x,K,qa,Da,F,
R,G,U,T,V,X,ea,ba,ma,ta,ja,Aa,Z,ha,Gd,Ae,te,Yd,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb;b=g.viewport;w=b.x|0;r=b.y|0;p="width"in b?b.width|0:h.framebufferWidth-w;y="height"in b?b.height|0:h.framebufferHeight-r;J=h.viewportWidth;h.viewportWidth=p;v=h.viewportHeight;h.viewportHeight=y;P=wa[0];wa[0]=w;Q=wa[1];wa[1]=r;C=wa[2];wa[2]=p;H=wa[3];wa[3]=
y;sa=a[0];a[0]=0;Ca=a[1];a[1]=0;ra=a[2];a[2]=0;fa=a[3];a[3]=0;O=D.blend_enable;D.blend_enable=!0;L=A[0];A[0]=32774;u=A[1];A[1]=32774;I=Cc[0];Cc[0]=770;M=Cc[1];Cc[1]=771;n=Cc[2];Cc[2]=773;z=Cc[3];Cc[3]=1;aa=D.depth_enable;D.depth_enable=!1;N=g.viewport;B=N.x|0;x=N.y|0;K="width"in N?N.width|0:h.framebufferWidth-B;qa="height"in N?N.height|0:h.framebufferHeight-x;Da=pa[0];pa[0]=B;F=pa[1];pa[1]=x;R=pa[2];pa[2]=K;G=pa[3];pa[3]=qa;U=D.scissor_enable;D.scissor_enable=!0;T=D.stencil_enable;D.stencil_enable=
!1;if(V=t.profile)X=performance.now(),da.count++;ea=e.call(this,h,g,m);ba=null;ba=(ma=Y(ea))?k.createStream(ea):k.getElements(ea);ta=S.elements;S.elements=ba;ja=S.offset;S.offset=0;Aa=ba?ba.vertCount:-1;Z=S.count;S.count=Aa;ha=S.primitive;S.primitive=4;Gd=g.fill;Ae=d[14];d[14]=Gd;te=g.id;Yd=d[31];d[31]=te;Ad=g.opacity;Zd=d[10];d[10]=Ad;ld=h.pixelRatio;bd=d[34];d[34]=ld;pd=g.scale;Lc=d[6];d[6]=pd;nd=g.scaleFract;Gc=d[7];d[7]=nd;fd=g.translate;Pc=d[8];d[8]=fd;Wc=g.translateFract;Bb=d[9];d[9]=Wc;Fb=
l.call(this,h,g,m);Dc=d[3];d[3]=Fb;ka.buffer=g.positionBuffer;xb=!1;xc=null;Cb=0;Jc=!1;Hc=mc=0;Xc=1;Vc=0;Ec=5126;qc=pc=Ic=fc=0;Y(ka)?(xb=!0,xc=ia.createStream(34962,ka),Ec=xc.dtype):(xc=ia.getBuffer(ka))?Ec=xc.dtype:"constant"in ka?(Xc=2,"number"===typeof ka.constant?(Ic=ka.constant,pc=qc=fc=0):(Ic=0<ka.constant.length?ka.constant[0]:0,pc=1<ka.constant.length?ka.constant[1]:0,qc=2<ka.constant.length?ka.constant[2]:0,fc=3<ka.constant.length?ka.constant[3]:0)):(xc=Y(ka.buffer)?ia.createStream(34962,
ka.buffer):ia.getBuffer(ka.buffer),Ec="type"in ka?Ba[ka.type]:xc.dtype,Jc=!!ka.normalized,Hc=ka.size|0,mc=ka.offset|0,Vc=ka.stride|0,Cb=ka.divisor|0);nc=q.buffer;q.buffer=xc;gc=q.divisor;q.divisor=Cb;bb=q.normalized;q.normalized=Jc;bc=q.offset;q.offset=mc;yb=q.size;q.size=Hc;eb=q.state;q.state=Xc;Nb=q.stride;q.stride=Vc;cb=q.type;q.type=Ec;ob=q.w;q.w=fc;Ua=q.x;q.x=Ic;hd=q.y;q.y=pc;Ib=q.z;q.z=qc;oa.buffer=g.positionFractBuffer;Jb=!1;rc=null;Ob=0;jb=!1;Db=Gb=0;wb=1;hb=0;Yb=5126;Ub=Ra=qb=Pb=0;Y(oa)?
(Jb=!0,rc=ia.createStream(34962,oa),Yb=rc.dtype):(rc=ia.getBuffer(oa))?Yb=rc.dtype:"constant"in oa?(wb=2,"number"===typeof oa.constant?(qb=oa.constant,Ra=Ub=Pb=0):(qb=0<oa.constant.length?oa.constant[0]:0,Ra=1<oa.constant.length?oa.constant[1]:0,Ub=2<oa.constant.length?oa.constant[2]:0,Pb=3<oa.constant.length?oa.constant[3]:0)):(rc=Y(oa.buffer)?ia.createStream(34962,oa.buffer):ia.getBuffer(oa.buffer),Yb="type"in oa?Ba[oa.type]:rc.dtype,jb=!!oa.normalized,Db=oa.size|0,Gb=oa.offset|0,hb=oa.stride|0,
Ob=oa.divisor|0);zb=c.buffer;c.buffer=rc;cc=c.divisor;c.divisor=Ob;ib=c.normalized;c.normalized=jb;pb=c.offset;c.offset=Gb;Ha=c.size;c.size=Db;rb=c.state;c.state=wb;Ka=c.stride;c.stride=hb;fb=c.type;c.type=Yb;gb=c.w;c.w=Pb;La=c.x;c.x=qb;kb=c.y;c.y=Ra;Va=c.z;c.z=Ub;tb=E.vert;E.vert=42;sb=E.frag;E.frag=41;t.dirty=!0;f(h,g,m);h.viewportWidth=J;h.viewportHeight=v;wa[0]=P;wa[1]=Q;wa[2]=C;wa[3]=H;a[0]=sa;a[1]=Ca;a[2]=ra;a[3]=fa;D.blend_enable=O;A[0]=L;A[1]=u;Cc[0]=I;Cc[1]=M;Cc[2]=n;Cc[3]=z;D.depth_enable=
aa;pa[0]=Da;pa[1]=F;pa[2]=R;pa[3]=G;D.scissor_enable=U;D.stencil_enable=T;V&&(da.cpuTime+=performance.now()-X);ma&&k.destroyStream(ba);S.elements=ta;S.offset=ja;S.count=Z;S.primitive=ha;d[14]=Ae;d[31]=Yd;d[10]=Zd;d[34]=bd;d[6]=Lc;d[7]=Gc;d[8]=Pc;d[9]=Bb;d[3]=Dc;xb&&ia.destroyStream(xc);q.buffer=nc;q.divisor=gc;q.normalized=bb;q.offset=bc;q.size=yb;q.state=eb;q.stride=Nb;q.type=cb;q.w=ob;q.x=Ua;q.y=hd;q.z=Ib;Jb&&ia.destroyStream(rc);c.buffer=zb;c.divisor=cc;c.normalized=ib;c.offset=pb;c.size=Ha;c.state=
rb;c.stride=Ka;c.type=fb;c.w=gb;c.x=La;c.y=kb;c.z=Va;E.vert=tb;E.frag=sb;t.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Cc,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta){var r,p,y,va,Ea,Z,Hb,ga,H,sa,Ca,ra,xa,Fa,la,W,ua,Ia,za,mb,ca,ha,
$b,Ga,ac,Sb,ab,Dd,re,Vd,ze,zd,Qd,oe,ie,Ed,Xd,fe,Md;r=b.attributes;p=b.buffer;y=b.context;va=b.current;Ea=b.draw;Z=b.elements;Hb=b.extensions;ga=b.framebuffer;H=b.gl;sa=b.isBufferArgs;Ca=b.next;ra=b.shader;xa=b.uniforms;Fa=b.vao;la=Ca.blend_color;W=va.blend_color;ua=Ca.blend_equation;Ia=va.blend_equation;za=Ca.blend_func;mb=va.blend_func;ca=Ca.colorMask;ha=va.colorMask;$b=Ca.depth_range;Ga=va.depth_range;ac=Ca.polygonOffset_offset;Sb=va.polygonOffset_offset;ab=Ca.sample_coverage;Dd=va.sample_coverage;
re=Ca.scissor_box;Vd=va.scissor_box;ze=Ca.stencil_func;zd=va.stencil_func;Qd=Ca.stencil_opBack;oe=va.stencil_opBack;ie=Ca.stencil_opFront;Ed=va.stencil_opFront;Xd=Ca.viewport;fe=va.viewport;Md={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,d){var c,f,h,l,k,b;c=ga.next;c!==ga.cur&&(c?H.bindFramebuffer(36160,c.framebuffer):H.bindFramebuffer(36160,null),ga.cur=c);if(va.dirty){var q,t,w,e,v,E,ra,L,u,I,D,la,n,z,B,xa,x,K,F,R,S,G,U,
T,X,ba,ia,Y,za,bc,yb,eb,Nb,cb;q=Ca.dither;q!==va.dither&&(q?H.enable(3024):H.disable(3024),va.dither=q);t=ua[0];w=ua[1];if(t!==Ia[0]||w!==Ia[1])H.blendEquationSeparate(t,w),Ia[0]=t,Ia[1]=w;e=Ca.depth_func;e!==va.depth_func&&(H.depthFunc(e),va.depth_func=e);v=$b[0];E=$b[1];if(v!==Ga[0]||E!==Ga[1])H.depthRange(v,E),Ga[0]=v,Ga[1]=E;ra=Ca.depth_mask;ra!==va.depth_mask&&(H.depthMask(ra),va.depth_mask=ra);L=ca[0];u=ca[1];I=ca[2];D=ca[3];if(L!==ha[0]||u!==ha[1]||I!==ha[2]||D!==ha[3])H.colorMask(L,u,I,D),
ha[0]=L,ha[1]=u,ha[2]=I,ha[3]=D;la=Ca.cull_enable;la!==va.cull_enable&&(la?H.enable(2884):H.disable(2884),va.cull_enable=la);n=Ca.cull_face;n!==va.cull_face&&(H.cullFace(n),va.cull_face=n);z=Ca.frontFace;z!==va.frontFace&&(H.frontFace(z),va.frontFace=z);B=Ca.lineWidth;B!==va.lineWidth&&(H.lineWidth(B),va.lineWidth=B);xa=Ca.polygonOffset_enable;xa!==va.polygonOffset_enable&&(xa?H.enable(32823):H.disable(32823),va.polygonOffset_enable=xa);x=ac[0];K=ac[1];if(x!==Sb[0]||K!==Sb[1])H.polygonOffset(x,K),
Sb[0]=x,Sb[1]=K;F=Ca.sample_alpha;F!==va.sample_alpha&&(F?H.enable(32926):H.disable(32926),va.sample_alpha=F);R=Ca.sample_enable;R!==va.sample_enable&&(R?H.enable(32928):H.disable(32928),va.sample_enable=R);S=ab[0];G=ab[1];if(S!==Dd[0]||G!==Dd[1])H.sampleCoverage(S,G),Dd[0]=S,Dd[1]=G;U=Ca.stencil_mask;U!==va.stencil_mask&&(H.stencilMask(U),va.stencil_mask=U);T=ze[0];X=ze[1];ba=ze[2];if(T!==zd[0]||X!==zd[1]||ba!==zd[2])H.stencilFunc(T,X,ba),zd[0]=T,zd[1]=X,zd[2]=ba;ia=ie[0];Y=ie[1];za=ie[2];bc=ie[3];
if(ia!==Ed[0]||Y!==Ed[1]||za!==Ed[2]||bc!==Ed[3])H.stencilOpSeparate(ia,Y,za,bc),Ed[0]=ia,Ed[1]=Y,Ed[2]=za,Ed[3]=bc;yb=Qd[0];eb=Qd[1];Nb=Qd[2];cb=Qd[3];if(yb!==oe[0]||eb!==oe[1]||Nb!==oe[2]||cb!==oe[3])H.stencilOpSeparate(yb,eb,Nb,cb),oe[0]=yb,oe[1]=eb,oe[2]=Nb,oe[3]=cb}H.blendColor(0,0,0,1);W[0]=0;W[1]=0;W[2]=0;W[3]=1;H.enable(3042);va.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;H.disable(2929);va.depth_enable=!1;H.enable(3089);va.scissor_enable=!0;H.disable(2960);
va.stencil_enable=!1;if(f=va.profile)h=performance.now(),da.count+=d;H.useProgram(ta.program);l=Hb.angle_instanced_arrays;var ob;Fa.setVAO(null);H.uniform1i(J.location,!1);H.uniform1i(Aa.location,N.bind());ob=Ea.instances;for(k=0;k<d;++k){b=a[k];var Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,re,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,
Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Xd,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,hf,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf;Ua=b.viewport;hd=Ua.x|0;Ib=Ua.y|0;Jb="width"in Ua?Ua.width|0:y.framebufferWidth-hd;rc="height"in Ua?Ua.height|0:y.framebufferHeight-Ib;Ob=y.viewportWidth;
y.viewportWidth=Jb;jb=y.viewportHeight;y.viewportHeight=rc;H.viewport(hd,Ib,Jb,rc);fe[0]=hd;fe[1]=Ib;fe[2]=Jb;fe[3]=rc;Gb=b.viewport;Db=Gb.x|0;wb=Gb.y|0;hb="width"in Gb?Gb.width|0:y.framebufferWidth-Db;Yb="height"in Gb?Gb.height|0:y.framebufferHeight-wb;H.scissor(Db,wb,hb,Yb);Vd[0]=Db;Vd[1]=wb;Vd[2]=hb;Vd[3]=Yb;Pb=A.call(this,y,b,k);qb=!1;Ra=null;Ub=0;zb=!1;ib=cc=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;sa(Pb)?(qb=!0,Ra=p.createStream(34962,Pb),rb=Ra.dtype):(Ra=p.getBuffer(Pb))?rb=Ra.dtype:"constant"in Pb?
(pb=2,"number"===typeof Pb.constant?(fb=Pb.constant,gb=La=Ka=0):(fb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,La=2<Pb.constant.length?Pb.constant[2]:0,Ka=3<Pb.constant.length?Pb.constant[3]:0)):(Ra=sa(Pb.buffer)?p.createStream(34962,Pb.buffer):p.getBuffer(Pb.buffer),rb="type"in Pb?Md[Pb.type]:Ra.dtype,zb=!!Pb.normalized,ib=Pb.size|0,cc=Pb.offset|0,Ha=Pb.stride|0,Ub=Pb.divisor|0);kb=Ja.location;Va=r[kb];if(1===pb){Va.buffer||H.enableVertexAttribArray(kb);tb=ib||
1;if(Va.type!==rb||Va.size!==tb||Va.buffer!==Ra||Va.normalized!==zb||Va.offset!==cc||Va.stride!==Ha)H.bindBuffer(34962,Ra.buffer),H.vertexAttribPointer(kb,tb,rb,zb,Ha,cc),Va.type=rb,Va.size=tb,Va.buffer=Ra,Va.normalized=zb,Va.offset=cc,Va.stride=Ha;Va.divisor!==Ub&&(l.vertexAttribDivisorANGLE(kb,Ub),Va.divisor=Ub)}else if(Va.buffer&&(H.disableVertexAttribArray(kb),Va.buffer=null),Va.x!==fb||Va.y!==gb||Va.z!==La||Va.w!==Ka)H.vertexAttrib4f(kb,fb,gb,La,Ka),Va.x=fb,Va.y=gb,Va.z=La,Va.w=Ka;sb=ja.call(this,
y,b,k);Oa=!1;tc=null;Qa=0;Kb=!1;Ma=Eb=0;yd=1;Ya=0;Lb=5126;Zb=Na=lb=Mb=0;sa(sb)?(Oa=!0,tc=p.createStream(34962,sb),Lb=tc.dtype):(tc=p.getBuffer(sb))?Lb=tc.dtype:"constant"in sb?(yd=2,"number"===typeof sb.constant?(lb=sb.constant,Na=Zb=Mb=0):(lb=0<sb.constant.length?sb.constant[0]:0,Na=1<sb.constant.length?sb.constant[1]:0,Zb=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?sb.constant[3]:0)):(tc=sa(sb.buffer)?p.createStream(34962,sb.buffer):p.getBuffer(sb.buffer),Lb="type"in sb?Md[sb.type]:
tc.dtype,Kb=!!sb.normalized,Ma=sb.size|0,Eb=sb.offset|0,Ya=sb.stride|0,Qa=sb.divisor|0);Pa=Xa.location;ub=r[Pa];if(1===yd){ub.buffer||H.enableVertexAttribArray(Pa);vb=Ma||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==tc||ub.normalized!==Kb||ub.offset!==Eb||ub.stride!==Ya)H.bindBuffer(34962,tc.buffer),H.vertexAttribPointer(Pa,vb,Lb,Kb,Ya,Eb),ub.type=Lb,ub.size=vb,ub.buffer=tc,ub.normalized=Kb,ub.offset=Eb,ub.stride=Ya;ub.divisor!==Qa&&(l.vertexAttribDivisorANGLE(Pa,Qa),ub.divisor=Qa)}else if(ub.buffer&&
(H.disableVertexAttribArray(Pa),ub.buffer=null),ub.x!==lb||ub.y!==Na||ub.z!==Zb||ub.w!==Mb)H.vertexAttrib4f(Pa,lb,Na,Zb,Mb),ub.x=lb,ub.y=Na,ub.z=Zb,ub.w=Mb;Sa=Cc.call(this,y,b,k);nb=!1;hc=null;Ac=0;vc=!1;kc=db=0;qd=1;Wa=0;Mc=5126;uc=Vb=Za=Ab=0;sa(Sa)?(nb=!0,hc=p.createStream(34962,Sa),Mc=hc.dtype):(hc=p.getBuffer(Sa))?Mc=hc.dtype:"constant"in Sa?(qd=2,"number"===typeof Sa.constant?(Za=Sa.constant,Vb=uc=Ab=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?
Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(hc=sa(Sa.buffer)?p.createStream(34962,Sa.buffer):p.getBuffer(Sa.buffer),Mc="type"in Sa?Md[Sa.type]:hc.dtype,vc=!!Sa.normalized,kc=Sa.size|0,db=Sa.offset|0,Wa=Sa.stride|0,Ac=Sa.divisor|0);Wb=na.location;Qb=r[Wb];if(1===qd){Qb.buffer||H.enableVertexAttribArray(Wb);Kc=kc||1;if(Qb.type!==Mc||Qb.size!==Kc||Qb.buffer!==hc||Qb.normalized!==vc||Qb.offset!==db||Qb.stride!==Wa)H.bindBuffer(34962,hc.buffer),H.vertexAttribPointer(Wb,Kc,Mc,vc,Wa,db),
Qb.type=Mc,Qb.size=Kc,Qb.buffer=hc,Qb.normalized=vc,Qb.offset=db,Qb.stride=Wa;Qb.divisor!==Ac&&(l.vertexAttribDivisorANGLE(Wb,Ac),Qb.divisor=Ac)}else if(Qb.buffer&&(H.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==Za||Qb.y!==Vb||Qb.z!==uc||Qb.w!==Ab)H.vertexAttrib4f(Wb,Za,Vb,uc,Ab),Qb.x=Za,Qb.y=Vb,Qb.z=uc,Qb.w=Ab;Rb=V.call(this,y,b,k);re=!1;Fc=null;sd=0;Nc=!1;td=Yc=0;oc=1;wc=0;ic=5126;Xb=Tb=sc=$a=0;sa(Rb)?(re=!0,Fc=p.createStream(34962,Rb),ic=Fc.dtype):(Fc=p.getBuffer(Rb))?ic=Fc.dtype:"constant"in
Rb?(oc=2,"number"===typeof Rb.constant?(sc=Rb.constant,Tb=Xb=$a=0):(sc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Xb=2<Rb.constant.length?Rb.constant[2]:0,$a=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=sa(Rb.buffer)?p.createStream(34962,Rb.buffer):p.getBuffer(Rb.buffer),ic="type"in Rb?Md[Rb.type]:Fc.dtype,Nc=!!Rb.normalized,td=Rb.size|0,Yc=Rb.offset|0,wc=Rb.stride|0,sd=Rb.divisor|0);ec=Ta.location;jc=r[ec];if(1===oc){jc.buffer||H.enableVertexAttribArray(ec);yc=
td||1;if(jc.type!==ic||jc.size!==yc||jc.buffer!==Fc||jc.normalized!==Nc||jc.offset!==Yc||jc.stride!==wc)H.bindBuffer(34962,Fc.buffer),H.vertexAttribPointer(ec,yc,ic,Nc,wc,Yc),jc.type=ic,jc.size=yc,jc.buffer=Fc,jc.normalized=Nc,jc.offset=Yc,jc.stride=wc;jc.divisor!==sd&&(l.vertexAttribDivisorANGLE(ec,sd),jc.divisor=sd)}else if(jc.buffer&&(H.disableVertexAttribArray(ec),jc.buffer=null),jc.x!==sc||jc.y!==Tb||jc.z!==Xb||jc.w!==$a)H.vertexAttrib4f(ec,sc,Tb,Xb,$a),jc.x=sc,jc.y=Tb,jc.z=Xb,jc.w=$a;Bc=ea.call(this,
y,b,k);cd=!1;Qc=null;Rc=0;Sc=!1;od=Zc=0;dd=1;$c=0;lc=5126;ed=Uc=ad=dc=0;sa(Bc)?(cd=!0,Qc=p.createStream(34962,Bc),lc=Qc.dtype):(Qc=p.getBuffer(Bc))?lc=Qc.dtype:"constant"in Bc?(dd=2,"number"===typeof Bc.constant?(ad=Bc.constant,Uc=ed=dc=0):(ad=0<Bc.constant.length?Bc.constant[0]:0,Uc=1<Bc.constant.length?Bc.constant[1]:0,ed=2<Bc.constant.length?Bc.constant[2]:0,dc=3<Bc.constant.length?Bc.constant[3]:0)):(Qc=sa(Bc.buffer)?p.createStream(34962,Bc.buffer):p.getBuffer(Bc.buffer),lc="type"in Bc?Md[Bc.type]:
Qc.dtype,Sc=!!Bc.normalized,od=Bc.size|0,Zc=Bc.offset|0,$c=Bc.stride|0,Rc=Bc.divisor|0);zc=ka.location;id=r[zc];if(1===dd){id.buffer||H.enableVertexAttribArray(zc);Xd=od||1;if(id.type!==lc||id.size!==Xd||id.buffer!==Qc||id.normalized!==Sc||id.offset!==Zc||id.stride!==$c)H.bindBuffer(34962,Qc.buffer),H.vertexAttribPointer(zc,Xd,lc,Sc,$c,Zc),id.type=lc,id.size=Xd,id.buffer=Qc,id.normalized=Sc,id.offset=Zc,id.stride=$c;id.divisor!==Rc&&(l.vertexAttribDivisorANGLE(zc,Rc),id.divisor=Rc)}else if(id.buffer&&
(H.disableVertexAttribArray(zc),id.buffer=null),id.x!==ad||id.y!==Uc||id.z!==ed||id.w!==dc)H.vertexAttrib4f(zc,ad,Uc,ed,dc),id.x=ad,id.y=Uc,id.z=ed,id.w=dc;wd=O.call(this,y,b,k);ue=!1;jd=null;Ce=0;Od=!1;ce=ge=0;$d=1;Jd=0;Hd=5126;rd=ud=Tc=md=0;sa(wd)?(ue=!0,jd=p.createStream(34962,wd),Hd=jd.dtype):(jd=p.getBuffer(wd))?Hd=jd.dtype:"constant"in wd?($d=2,"number"===typeof wd.constant?(Tc=wd.constant,ud=rd=md=0):(Tc=0<wd.constant.length?wd.constant[0]:0,ud=1<wd.constant.length?wd.constant[1]:0,rd=2<wd.constant.length?
wd.constant[2]:0,md=3<wd.constant.length?wd.constant[3]:0)):(jd=sa(wd.buffer)?p.createStream(34962,wd.buffer):p.getBuffer(wd.buffer),Hd="type"in wd?Md[wd.type]:jd.dtype,Od=!!wd.normalized,ce=wd.size|0,ge=wd.offset|0,Jd=wd.stride|0,Ce=wd.divisor|0);kd=pa.location;vd=r[kd];if(1===$d){vd.buffer||H.enableVertexAttribArray(kd);Cd=ce||1;if(vd.type!==Hd||vd.size!==Cd||vd.buffer!==jd||vd.normalized!==Od||vd.offset!==ge||vd.stride!==Jd)H.bindBuffer(34962,jd.buffer),H.vertexAttribPointer(kd,Cd,Hd,Od,Jd,ge),
vd.type=Hd,vd.size=Cd,vd.buffer=jd,vd.normalized=Od,vd.offset=ge,vd.stride=Jd;vd.divisor!==Ce&&(l.vertexAttribDivisorANGLE(kd,Ce),vd.divisor=Ce)}else if(vd.buffer&&(H.disableVertexAttribArray(kd),vd.buffer=null),vd.x!==Tc||vd.y!==ud||vd.z!==rd||vd.w!==md)H.vertexAttrib4f(kd,Tc,ud,rd,md),vd.x=Tc,vd.y=ud,vd.z=rd,vd.w=md;Fd=P.call(this,y,b,k);je=!1;ye=null;Fe=0;le=!1;he=ke=0;ve=1;de=0;me=5126;qe=we=gd=Oc=0;sa(Fd)?(je=!0,ye=p.createStream(34962,Fd),me=ye.dtype):(ye=p.getBuffer(Fd))?me=ye.dtype:"constant"in
Fd?(ve=2,"number"===typeof Fd.constant?(gd=Fd.constant,we=qe=Oc=0):(gd=0<Fd.constant.length?Fd.constant[0]:0,we=1<Fd.constant.length?Fd.constant[1]:0,qe=2<Fd.constant.length?Fd.constant[2]:0,Oc=3<Fd.constant.length?Fd.constant[3]:0)):(ye=sa(Fd.buffer)?p.createStream(34962,Fd.buffer):p.getBuffer(Fd.buffer),me="type"in Fd?Md[Fd.type]:ye.dtype,le=!!Fd.normalized,he=Fd.size|0,ke=Fd.offset|0,de=Fd.stride|0,Fe=Fd.divisor|0);Kd=m.location;Pd=r[Kd];if(1===ve){Pd.buffer||H.enableVertexAttribArray(Kd);Rd=he||
4;if(Pd.type!==me||Pd.size!==Rd||Pd.buffer!==ye||Pd.normalized!==le||Pd.offset!==ke||Pd.stride!==de)H.bindBuffer(34962,ye.buffer),H.vertexAttribPointer(Kd,Rd,me,le,de,ke),Pd.type=me,Pd.size=Rd,Pd.buffer=ye,Pd.normalized=le,Pd.offset=ke,Pd.stride=de;Pd.divisor!==Fe&&(l.vertexAttribDivisorANGLE(Kd,Fe),Pd.divisor=Fe)}else if(Pd.buffer&&(H.disableVertexAttribArray(Kd),Pd.buffer=null),Pd.x!==gd||Pd.y!==we||Pd.z!==qe||Pd.w!==Oc)H.vertexAttrib4f(Kd,gd,we,qe,Oc),Pd.x=gd,Pd.y=we,Pd.z=qe,Pd.w=Oc;Sd=C.call(this,
y,b,k);ne=!1;Ge=null;Be=0;se=!1;Se=Re=0;Oe=1;xe=0;He=5126;Ie=Le=Ke=Je=0;sa(Sd)?(ne=!0,Ge=p.createStream(34962,Sd),He=Ge.dtype):(Ge=p.getBuffer(Sd))?He=Ge.dtype:"constant"in Sd?(Oe=2,"number"===typeof Sd.constant?(Ke=Sd.constant,Le=Ie=Je=0):(Ke=0<Sd.constant.length?Sd.constant[0]:0,Le=1<Sd.constant.length?Sd.constant[1]:0,Ie=2<Sd.constant.length?Sd.constant[2]:0,Je=3<Sd.constant.length?Sd.constant[3]:0)):(Ge=sa(Sd.buffer)?p.createStream(34962,Sd.buffer):p.getBuffer(Sd.buffer),He="type"in Sd?Md[Sd.type]:
Ge.dtype,se=!!Sd.normalized,Se=Sd.size|0,Re=Sd.offset|0,xe=Sd.stride|0,Be=Sd.divisor|0);Ld=Da.location;Wd=r[Ld];if(1===Oe){Wd.buffer||H.enableVertexAttribArray(Ld);be=Se||4;if(Wd.type!==He||Wd.size!==be||Wd.buffer!==Ge||Wd.normalized!==se||Wd.offset!==Re||Wd.stride!==xe)H.bindBuffer(34962,Ge.buffer),H.vertexAttribPointer(Ld,be,He,se,xe,Re),Wd.type=He,Wd.size=be,Wd.buffer=Ge,Wd.normalized=se,Wd.offset=Re,Wd.stride=xe;Wd.divisor!==Be&&(l.vertexAttribDivisorANGLE(Ld,Be),Wd.divisor=Be)}else if(Wd.buffer&&
(H.disableVertexAttribArray(Ld),Wd.buffer=null),Wd.x!==Ke||Wd.y!==Le||Wd.z!==Ie||Wd.w!==Je)H.vertexAttrib4f(Ld,Ke,Le,Ie,Je),Wd.x=Ke,Wd.y=Le,Wd.z=Ie,Wd.w=Je;ee=g.call(this,y,b,k);Me=!1;Id=null;Td=0;De=!1;hf=Ne=0;bf=1;Te=0;Pe=5126;Ve=Ue=Ye=af=0;sa(ee)?(Me=!0,Id=p.createStream(34962,ee),Pe=Id.dtype):(Id=p.getBuffer(ee))?Pe=Id.dtype:"constant"in ee?(bf=2,"number"===typeof ee.constant?(Ye=ee.constant,Ue=Ve=af=0):(Ye=0<ee.constant.length?ee.constant[0]:0,Ue=1<ee.constant.length?ee.constant[1]:0,Ve=2<ee.constant.length?
ee.constant[2]:0,af=3<ee.constant.length?ee.constant[3]:0)):(Id=sa(ee.buffer)?p.createStream(34962,ee.buffer):p.getBuffer(ee.buffer),Pe="type"in ee?Md[ee.type]:Id.dtype,De=!!ee.normalized,hf=ee.size|0,Ne=ee.offset|0,Te=ee.stride|0,Td=ee.divisor|0);Ud=aa.location;ae=r[Ud];if(1===bf){ae.buffer||H.enableVertexAttribArray(Ud);We=hf||1;if(ae.type!==Pe||ae.size!==We||ae.buffer!==Id||ae.normalized!==De||ae.offset!==Ne||ae.stride!==Te)H.bindBuffer(34962,Id.buffer),H.vertexAttribPointer(Ud,We,Pe,De,Te,Ne),
ae.type=Pe,ae.size=We,ae.buffer=Id,ae.normalized=De,ae.offset=Ne,ae.stride=Te;ae.divisor!==Td&&(l.vertexAttribDivisorANGLE(Ud,Td),ae.divisor=Td)}else if(ae.buffer&&(H.disableVertexAttribArray(Ud),ae.buffer=null),ae.x!==Ye||ae.y!==Ue||ae.z!==Ve||ae.w!==af)H.vertexAttrib4f(Ud,Ye,Ue,Ve,af),ae.x=Ye,ae.y=Ue,ae.z=Ve,ae.w=af;jf=y.pixelRatio;k&&nf===jf||(nf=jf,H.uniform1f(wa.location,jf));ef=b.scale;kf=ef[0];mf=ef[1];k&&lf===kf&&rf===mf||(lf=kf,rf=mf,H.uniform2f(fa.location,kf,mf));of=b.scaleFract;sf=of[0];
Cf=of[1];k&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,H.uniform2f(Ba.location,sf,Cf));Ee=b.translate;pf=Ee[0];Df=Ee[1];k&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,H.uniform2f(oa.location,pf,Df));Af=b.translateFract;Ef=Af[0];wf=Af[1];k&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,H.uniform2f(ya.location,Ef,wf));vf=M.call(this,y,b,k);yf=vf[0];If=vf[1];k&&zf===yf&&Jf===If||(zf=yf,Jf=If,H.uniform2f(qa.location,yf,If));Kf=b.opacity;k&&Lf===Kf||(Lf=Kf,H.uniform1f(ma.location,Kf));(tf=b.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Qf=tf._texture;H.uniform1i(Q.location,Qf.bind());Hf=b.elements;uf=null;(uf=(cg=sa(Hf))?Z.createStream(Hf):Z.getElements(Hf))&&H.bindBuffer(34963,uf.buffer.buffer);Rf=b.offset;if(Sf=b.count)0<ob?uf?l.drawElementsInstancedANGLE(0,Sf,uf.type,Rf<<(uf.type-5121>>1),ob):l.drawArraysInstancedANGLE(0,Rf,Sf,ob):0>ob&&(uf?H.drawElements(0,Sf,uf.type,Rf<<(uf.type-5121>>1)):H.drawArrays(0,Rf,Sf)),y.viewportWidth=Ob,y.viewportHeight=jb,qb&&p.destroyStream(Ra),Oa&&p.destroyStream(tc),nb&&p.destroyStream(hc),
re&&p.destroyStream(Fc),cd&&p.destroyStream(Qc),ue&&p.destroyStream(jd),je&&p.destroyStream(ye),ne&&p.destroyStream(Ge),Me&&p.destroyStream(Id),Qf.unbind(),cg&&Z.destroyStream(uf)}N.unbind();va.dirty=!0;Fa.setVAO(null);f&&(da.cpuTime+=performance.now()-h)},draw:function(a){var d,g,f,h,k,b,t,w,A,v,P,C,E,ra,O,I,D,la,M,z,N,xa,x,R,S,T,V,X,ea,ba,ia,Y,ta,ja,Cc,za,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Xd,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,re,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe;d=ga.next;d!==ga.cur&&(d?H.bindFramebuffer(36160,d.framebuffer):H.bindFramebuffer(36160,null),ga.cur=d);if(va.dirty){var He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,hf,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,
kf,lf,mf,rf,of,sf;He=Ca.dither;He!==va.dither&&(He?H.enable(3024):H.disable(3024),va.dither=He);Je=ua[0];Ke=ua[1];if(Je!==Ia[0]||Ke!==Ia[1])H.blendEquationSeparate(Je,Ke),Ia[0]=Je,Ia[1]=Ke;Le=Ca.depth_func;Le!==va.depth_func&&(H.depthFunc(Le),va.depth_func=Le);Ie=$b[0];Ld=$b[1];if(Ie!==Ga[0]||Ld!==Ga[1])H.depthRange(Ie,Ld),Ga[0]=Ie,Ga[1]=Ld;Wd=Ca.depth_mask;Wd!==va.depth_mask&&(H.depthMask(Wd),va.depth_mask=Wd);be=ca[0];ee=ca[1];Me=ca[2];Id=ca[3];if(be!==ha[0]||ee!==ha[1]||Me!==ha[2]||Id!==ha[3])H.colorMask(be,
ee,Me,Id),ha[0]=be,ha[1]=ee,ha[2]=Me,ha[3]=Id;Td=Ca.cull_enable;Td!==va.cull_enable&&(Td?H.enable(2884):H.disable(2884),va.cull_enable=Td);De=Ca.cull_face;De!==va.cull_face&&(H.cullFace(De),va.cull_face=De);Ne=Ca.frontFace;Ne!==va.frontFace&&(H.frontFace(Ne),va.frontFace=Ne);hf=Ca.lineWidth;hf!==va.lineWidth&&(H.lineWidth(hf),va.lineWidth=hf);bf=Ca.polygonOffset_enable;bf!==va.polygonOffset_enable&&(bf?H.enable(32823):H.disable(32823),va.polygonOffset_enable=bf);Te=ac[0];Pe=ac[1];if(Te!==Sb[0]||Pe!==
Sb[1])H.polygonOffset(Te,Pe),Sb[0]=Te,Sb[1]=Pe;af=Ca.sample_alpha;af!==va.sample_alpha&&(af?H.enable(32926):H.disable(32926),va.sample_alpha=af);Ye=Ca.sample_enable;Ye!==va.sample_enable&&(Ye?H.enable(32928):H.disable(32928),va.sample_enable=Ye);Ue=ab[0];Ve=ab[1];if(Ue!==Dd[0]||Ve!==Dd[1])H.sampleCoverage(Ue,Ve),Dd[0]=Ue,Dd[1]=Ve;Ud=Ca.stencil_mask;Ud!==va.stencil_mask&&(H.stencilMask(Ud),va.stencil_mask=Ud);ae=ze[0];We=ze[1];jf=ze[2];if(ae!==zd[0]||We!==zd[1]||jf!==zd[2])H.stencilFunc(ae,We,jf),
zd[0]=ae,zd[1]=We,zd[2]=jf;nf=ie[0];ef=ie[1];kf=ie[2];lf=ie[3];if(nf!==Ed[0]||ef!==Ed[1]||kf!==Ed[2]||lf!==Ed[3])H.stencilOpSeparate(nf,ef,kf,lf),Ed[0]=nf,Ed[1]=ef,Ed[2]=kf,Ed[3]=lf;mf=Qd[0];rf=Qd[1];of=Qd[2];sf=Qd[3];if(mf!==oe[0]||rf!==oe[1]||of!==oe[2]||sf!==oe[3])H.stencilOpSeparate(mf,rf,of,sf),oe[0]=mf,oe[1]=rf,oe[2]=of,oe[3]=sf}g=a.viewport;f=g.x|0;h=g.y|0;k="width"in g?g.width|0:y.framebufferWidth-f;b="height"in g?g.height|0:y.framebufferHeight-h;t=y.viewportWidth;y.viewportWidth=k;w=y.viewportHeight;
y.viewportHeight=b;H.viewport(f,h,k,b);fe[0]=f;fe[1]=h;fe[2]=k;fe[3]=b;H.blendColor(0,0,0,1);W[0]=0;W[1]=0;W[2]=0;W[3]=1;H.enable(3042);va.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;H.disable(2929);va.depth_enable=!1;A=a.viewport;v=A.x|0;P=A.y|0;C="width"in A?A.width|0:y.framebufferWidth-v;E="height"in A?A.height|0:y.framebufferHeight-P;H.scissor(v,P,C,E);Vd[0]=v;Vd[1]=P;Vd[2]=C;Vd[3]=E;H.enable(3089);va.scissor_enable=!0;H.disable(2960);va.stencil_enable=
!1;if(ra=va.profile)O=performance.now(),da.count++;H.useProgram(K.program);I=Hb.angle_instanced_arrays;Fa.setVAO(null);D=L.call(this,y,a,0);la=!1;M=null;z=0;N=!1;x=xa=0;R=1;S=0;T=5126;ba=ea=X=V=0;sa(D)?(la=!0,M=p.createStream(34962,D),T=M.dtype):(M=p.getBuffer(D))?T=M.dtype:"constant"in D?(R=2,"number"===typeof D.constant?(X=D.constant,ea=ba=V=0):(X=0<D.constant.length?D.constant[0]:0,ea=1<D.constant.length?D.constant[1]:0,ba=2<D.constant.length?D.constant[2]:0,V=3<D.constant.length?D.constant[3]:
0)):(M=sa(D.buffer)?p.createStream(34962,D.buffer):p.getBuffer(D.buffer),T="type"in D?Md[D.type]:M.dtype,N=!!D.normalized,x=D.size|0,xa=D.offset|0,S=D.stride|0,z=D.divisor|0);ia=Ja.location;Y=r[ia];if(1===R){Y.buffer||H.enableVertexAttribArray(ia);ta=x||1;if(Y.type!==T||Y.size!==ta||Y.buffer!==M||Y.normalized!==N||Y.offset!==xa||Y.stride!==S)H.bindBuffer(34962,M.buffer),H.vertexAttribPointer(ia,ta,T,N,S,xa),Y.type=T,Y.size=ta,Y.buffer=M,Y.normalized=N,Y.offset=xa,Y.stride=S;Y.divisor!==z&&(I.vertexAttribDivisorANGLE(ia,
z),Y.divisor=z)}else if(Y.buffer&&(H.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ba||Y.w!==V)H.vertexAttrib4f(ia,X,ea,ba,V),Y.x=X,Y.y=ea,Y.z=ba,Y.w=V;ja=e.call(this,y,a,0);Cc=!1;za=null;bc=0;yb=!1;Nb=eb=0;cb=1;ob=0;Ua=5126;rc=Jb=Ib=hd=0;sa(ja)?(Cc=!0,za=p.createStream(34962,ja),Ua=za.dtype):(za=p.getBuffer(ja))?Ua=za.dtype:"constant"in ja?(cb=2,"number"===typeof ja.constant?(Ib=ja.constant,Jb=rc=hd=0):(Ib=0<ja.constant.length?ja.constant[0]:0,Jb=1<ja.constant.length?ja.constant[1]:
0,rc=2<ja.constant.length?ja.constant[2]:0,hd=3<ja.constant.length?ja.constant[3]:0)):(za=sa(ja.buffer)?p.createStream(34962,ja.buffer):p.getBuffer(ja.buffer),Ua="type"in ja?Md[ja.type]:za.dtype,yb=!!ja.normalized,Nb=ja.size|0,eb=ja.offset|0,ob=ja.stride|0,bc=ja.divisor|0);Ob=Xa.location;jb=r[Ob];if(1===cb){jb.buffer||H.enableVertexAttribArray(Ob);Gb=Nb||1;if(jb.type!==Ua||jb.size!==Gb||jb.buffer!==za||jb.normalized!==yb||jb.offset!==eb||jb.stride!==ob)H.bindBuffer(34962,za.buffer),H.vertexAttribPointer(Ob,
Gb,Ua,yb,ob,eb),jb.type=Ua,jb.size=Gb,jb.buffer=za,jb.normalized=yb,jb.offset=eb,jb.stride=ob;jb.divisor!==bc&&(I.vertexAttribDivisorANGLE(Ob,bc),jb.divisor=bc)}else if(jb.buffer&&(H.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==rc||jb.w!==hd)H.vertexAttrib4f(Ob,Ib,Jb,rc,hd),jb.x=Ib,jb.y=Jb,jb.z=rc,jb.w=hd;Db=l.call(this,y,a,0);wb=!1;hb=null;Yb=0;Pb=!1;Ra=qb=0;Ub=1;zb=0;cc=5126;rb=Ha=pb=ib=0;sa(Db)?(wb=!0,hb=p.createStream(34962,Db),cc=hb.dtype):(hb=p.getBuffer(Db))?cc=
hb.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(pb=Db.constant,Ha=rb=ib=0):(pb=0<Db.constant.length?Db.constant[0]:0,Ha=1<Db.constant.length?Db.constant[1]:0,rb=2<Db.constant.length?Db.constant[2]:0,ib=3<Db.constant.length?Db.constant[3]:0)):(hb=sa(Db.buffer)?p.createStream(34962,Db.buffer):p.getBuffer(Db.buffer),cc="type"in Db?Md[Db.type]:hb.dtype,Pb=!!Db.normalized,Ra=Db.size|0,qb=Db.offset|0,zb=Db.stride|0,Yb=Db.divisor|0);Ka=na.location;fb=r[Ka];if(1===Ub){fb.buffer||H.enableVertexAttribArray(Ka);
gb=Ra||1;if(fb.type!==cc||fb.size!==gb||fb.buffer!==hb||fb.normalized!==Pb||fb.offset!==qb||fb.stride!==zb)H.bindBuffer(34962,hb.buffer),H.vertexAttribPointer(Ka,gb,cc,Pb,zb,qb),fb.type=cc,fb.size=gb,fb.buffer=hb,fb.normalized=Pb,fb.offset=qb,fb.stride=zb;fb.divisor!==Yb&&(I.vertexAttribDivisorANGLE(Ka,Yb),fb.divisor=Yb)}else if(fb.buffer&&(H.disableVertexAttribArray(Ka),fb.buffer=null),fb.x!==pb||fb.y!==Ha||fb.z!==rb||fb.w!==ib)H.vertexAttrib4f(Ka,pb,Ha,rb,ib),fb.x=pb,fb.y=Ha,fb.z=rb,fb.w=ib;La=
q.call(this,y,a,0);kb=!1;Va=null;tb=0;sb=!1;tc=Oa=0;Qa=1;Kb=0;Eb=5126;Lb=Ya=yd=Ma=0;sa(La)?(kb=!0,Va=p.createStream(34962,La),Eb=Va.dtype):(Va=p.getBuffer(La))?Eb=Va.dtype:"constant"in La?(Qa=2,"number"===typeof La.constant?(yd=La.constant,Ya=Lb=Ma=0):(yd=0<La.constant.length?La.constant[0]:0,Ya=1<La.constant.length?La.constant[1]:0,Lb=2<La.constant.length?La.constant[2]:0,Ma=3<La.constant.length?La.constant[3]:0)):(Va=sa(La.buffer)?p.createStream(34962,La.buffer):p.getBuffer(La.buffer),Eb="type"in
La?Md[La.type]:Va.dtype,sb=!!La.normalized,tc=La.size|0,Oa=La.offset|0,Kb=La.stride|0,tb=La.divisor|0);Mb=Ta.location;lb=r[Mb];if(1===Qa){lb.buffer||H.enableVertexAttribArray(Mb);Na=tc||1;if(lb.type!==Eb||lb.size!==Na||lb.buffer!==Va||lb.normalized!==sb||lb.offset!==Oa||lb.stride!==Kb)H.bindBuffer(34962,Va.buffer),H.vertexAttribPointer(Mb,Na,Eb,sb,Kb,Oa),lb.type=Eb,lb.size=Na,lb.buffer=Va,lb.normalized=sb,lb.offset=Oa,lb.stride=Kb;lb.divisor!==tb&&(I.vertexAttribDivisorANGLE(Mb,tb),lb.divisor=tb)}else if(lb.buffer&&
(H.disableVertexAttribArray(Mb),lb.buffer=null),lb.x!==yd||lb.y!==Ya||lb.z!==Lb||lb.w!==Ma)H.vertexAttrib4f(Mb,yd,Ya,Lb,Ma),lb.x=yd,lb.y=Ya,lb.z=Lb,lb.w=Ma;Zb=c.call(this,y,a,0);Pa=!1;ub=null;vb=0;Sa=!1;hc=nb=0;Ac=1;vc=0;db=5126;Mc=Wa=qd=kc=0;sa(Zb)?(Pa=!0,ub=p.createStream(34962,Zb),db=ub.dtype):(ub=p.getBuffer(Zb))?db=ub.dtype:"constant"in Zb?(Ac=2,"number"===typeof Zb.constant?(qd=Zb.constant,Wa=Mc=kc=0):(qd=0<Zb.constant.length?Zb.constant[0]:0,Wa=1<Zb.constant.length?Zb.constant[1]:0,Mc=2<Zb.constant.length?
Zb.constant[2]:0,kc=3<Zb.constant.length?Zb.constant[3]:0)):(ub=sa(Zb.buffer)?p.createStream(34962,Zb.buffer):p.getBuffer(Zb.buffer),db="type"in Zb?Md[Zb.type]:ub.dtype,Sa=!!Zb.normalized,hc=Zb.size|0,nb=Zb.offset|0,vc=Zb.stride|0,vb=Zb.divisor|0);Ab=ka.location;Za=r[Ab];if(1===Ac){Za.buffer||H.enableVertexAttribArray(Ab);Vb=hc||1;if(Za.type!==db||Za.size!==Vb||Za.buffer!==ub||Za.normalized!==Sa||Za.offset!==nb||Za.stride!==vc)H.bindBuffer(34962,ub.buffer),H.vertexAttribPointer(Ab,Vb,db,Sa,vc,nb),
Za.type=db,Za.size=Vb,Za.buffer=ub,Za.normalized=Sa,Za.offset=nb,Za.stride=vc;Za.divisor!==vb&&(I.vertexAttribDivisorANGLE(Ab,vb),Za.divisor=vb)}else if(Za.buffer&&(H.disableVertexAttribArray(Ab),Za.buffer=null),Za.x!==qd||Za.y!==Wa||Za.z!==Mc||Za.w!==kc)H.vertexAttrib4f(Ab,qd,Wa,Mc,kc),Za.x=qd,Za.y=Wa,Za.z=Mc,Za.w=kc;uc=F.call(this,y,a,0);Wb=!1;Qb=null;Kc=0;Rb=!1;Fc=Xd=0;sd=1;Nc=0;Yc=5126;ic=wc=oc=td=0;sa(uc)?(Wb=!0,Qb=p.createStream(34962,uc),Yc=Qb.dtype):(Qb=p.getBuffer(uc))?Yc=Qb.dtype:"constant"in
uc?(sd=2,"number"===typeof uc.constant?(oc=uc.constant,wc=ic=td=0):(oc=0<uc.constant.length?uc.constant[0]:0,wc=1<uc.constant.length?uc.constant[1]:0,ic=2<uc.constant.length?uc.constant[2]:0,td=3<uc.constant.length?uc.constant[3]:0)):(Qb=sa(uc.buffer)?p.createStream(34962,uc.buffer):p.getBuffer(uc.buffer),Yc="type"in uc?Md[uc.type]:Qb.dtype,Rb=!!uc.normalized,Fc=uc.size|0,Xd=uc.offset|0,Nc=uc.stride|0,Kc=uc.divisor|0);$a=pa.location;sc=r[$a];if(1===sd){sc.buffer||H.enableVertexAttribArray($a);Tb=
Fc||1;if(sc.type!==Yc||sc.size!==Tb||sc.buffer!==Qb||sc.normalized!==Rb||sc.offset!==Xd||sc.stride!==Nc)H.bindBuffer(34962,Qb.buffer),H.vertexAttribPointer($a,Tb,Yc,Rb,Nc,Xd),sc.type=Yc,sc.size=Tb,sc.buffer=Qb,sc.normalized=Rb,sc.offset=Xd,sc.stride=Nc;sc.divisor!==Kc&&(I.vertexAttribDivisorANGLE($a,Kc),sc.divisor=Kc)}else if(sc.buffer&&(H.disableVertexAttribArray($a),sc.buffer=null),sc.x!==oc||sc.y!==wc||sc.z!==ic||sc.w!==td)H.vertexAttrib4f($a,oc,wc,ic,td),sc.x=oc,sc.y=wc,sc.z=ic,sc.w=td;Xb=B.call(this,
y,a,0);ec=!1;jc=null;yc=0;Bc=!1;Qc=cd=0;Rc=1;Sc=0;Zc=5126;lc=$c=dd=od=0;sa(Xb)?(ec=!0,jc=p.createStream(34962,Xb),Zc=jc.dtype):(jc=p.getBuffer(Xb))?Zc=jc.dtype:"constant"in Xb?(Rc=2,"number"===typeof Xb.constant?(dd=Xb.constant,$c=lc=od=0):(dd=0<Xb.constant.length?Xb.constant[0]:0,$c=1<Xb.constant.length?Xb.constant[1]:0,lc=2<Xb.constant.length?Xb.constant[2]:0,od=3<Xb.constant.length?Xb.constant[3]:0)):(jc=sa(Xb.buffer)?p.createStream(34962,Xb.buffer):p.getBuffer(Xb.buffer),Zc="type"in Xb?Md[Xb.type]:
jc.dtype,Bc=!!Xb.normalized,Qc=Xb.size|0,cd=Xb.offset|0,Sc=Xb.stride|0,yc=Xb.divisor|0);dc=m.location;ad=r[dc];if(1===Rc){ad.buffer||H.enableVertexAttribArray(dc);Uc=Qc||4;if(ad.type!==Zc||ad.size!==Uc||ad.buffer!==jc||ad.normalized!==Bc||ad.offset!==cd||ad.stride!==Sc)H.bindBuffer(34962,jc.buffer),H.vertexAttribPointer(dc,Uc,Zc,Bc,Sc,cd),ad.type=Zc,ad.size=Uc,ad.buffer=jc,ad.normalized=Bc,ad.offset=cd,ad.stride=Sc;ad.divisor!==yc&&(I.vertexAttribDivisorANGLE(dc,yc),ad.divisor=yc)}else if(ad.buffer&&
(H.disableVertexAttribArray(dc),ad.buffer=null),ad.x!==dd||ad.y!==$c||ad.z!==lc||ad.w!==od)H.vertexAttrib4f(dc,dd,$c,lc,od),ad.x=dd,ad.y=$c,ad.z=lc,ad.w=od;ed=G.call(this,y,a,0);zc=!1;id=null;re=0;wd=!1;jd=ue=0;Ce=1;Od=0;ge=5126;Hd=Jd=$d=ce=0;sa(ed)?(zc=!0,id=p.createStream(34962,ed),ge=id.dtype):(id=p.getBuffer(ed))?ge=id.dtype:"constant"in ed?(Ce=2,"number"===typeof ed.constant?($d=ed.constant,Jd=Hd=ce=0):($d=0<ed.constant.length?ed.constant[0]:0,Jd=1<ed.constant.length?ed.constant[1]:0,Hd=2<ed.constant.length?
ed.constant[2]:0,ce=3<ed.constant.length?ed.constant[3]:0)):(id=sa(ed.buffer)?p.createStream(34962,ed.buffer):p.getBuffer(ed.buffer),ge="type"in ed?Md[ed.type]:id.dtype,wd=!!ed.normalized,jd=ed.size|0,ue=ed.offset|0,Od=ed.stride|0,re=ed.divisor|0);md=Da.location;Tc=r[md];if(1===Ce){Tc.buffer||H.enableVertexAttribArray(md);ud=jd||4;if(Tc.type!==ge||Tc.size!==ud||Tc.buffer!==id||Tc.normalized!==wd||Tc.offset!==ue||Tc.stride!==Od)H.bindBuffer(34962,id.buffer),H.vertexAttribPointer(md,ud,ge,wd,Od,ue),
Tc.type=ge,Tc.size=ud,Tc.buffer=id,Tc.normalized=wd,Tc.offset=ue,Tc.stride=Od;Tc.divisor!==re&&(I.vertexAttribDivisorANGLE(md,re),Tc.divisor=re)}else if(Tc.buffer&&(H.disableVertexAttribArray(md),Tc.buffer=null),Tc.x!==$d||Tc.y!==Jd||Tc.z!==Hd||Tc.w!==ce)H.vertexAttrib4f(md,$d,Jd,Hd,ce),Tc.x=$d,Tc.y=Jd,Tc.z=Hd,Tc.w=ce;rd=U.call(this,y,a,0);kd=!1;vd=null;Cd=0;Fd=!1;ye=je=0;Fe=1;le=0;ke=5126;me=de=ve=he=0;sa(rd)?(kd=!0,vd=p.createStream(34962,rd),ke=vd.dtype):(vd=p.getBuffer(rd))?ke=vd.dtype:"constant"in
rd?(Fe=2,"number"===typeof rd.constant?(ve=rd.constant,de=me=he=0):(ve=0<rd.constant.length?rd.constant[0]:0,de=1<rd.constant.length?rd.constant[1]:0,me=2<rd.constant.length?rd.constant[2]:0,he=3<rd.constant.length?rd.constant[3]:0)):(vd=sa(rd.buffer)?p.createStream(34962,rd.buffer):p.getBuffer(rd.buffer),ke="type"in rd?Md[rd.type]:vd.dtype,Fd=!!rd.normalized,ye=rd.size|0,je=rd.offset|0,le=rd.stride|0,Cd=rd.divisor|0);Oc=aa.location;gd=r[Oc];if(1===Fe){gd.buffer||H.enableVertexAttribArray(Oc);we=
ye||1;if(gd.type!==ke||gd.size!==we||gd.buffer!==vd||gd.normalized!==Fd||gd.offset!==je||gd.stride!==le)H.bindBuffer(34962,vd.buffer),H.vertexAttribPointer(Oc,we,ke,Fd,le,je),gd.type=ke,gd.size=we,gd.buffer=vd,gd.normalized=Fd,gd.offset=je,gd.stride=le;gd.divisor!==Cd&&(I.vertexAttribDivisorANGLE(Oc,Cd),gd.divisor=Cd)}else if(gd.buffer&&(H.disableVertexAttribArray(Oc),gd.buffer=null),gd.x!==ve||gd.y!==de||gd.z!==me||gd.w!==he)H.vertexAttrib4f(Oc,ve,de,me,he),gd.x=ve,gd.y=de,gd.z=me,gd.w=he;H.uniform1i(J.location,
!1);H.uniform1f(wa.location,y.pixelRatio);qe=a.scale;H.uniform2f(fa.location,qe[0],qe[1]);Kd=a.scaleFract;H.uniform2f(Ba.location,Kd[0],Kd[1]);Pd=a.translate;H.uniform2f(oa.location,Pd[0],Pd[1]);Rd=a.translateFract;H.uniform2f(ya.location,Rd[0],Rd[1]);Sd=n.call(this,y,a,0);H.uniform2f(qa.location,Sd[0],Sd[1]);H.uniform1f(ma.location,a.opacity);H.uniform1i(Aa.location,u.bind());(ne=a.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);Ge=ne._texture;H.uniform1i(Q.location,Ge.bind());Be=
a.elements;se=null;(se=(Re=sa(Be))?Z.createStream(Be):Z.getElements(Be))&&H.bindBuffer(34963,se.buffer.buffer);Se=a.offset;if(Oe=a.count)xe=Ea.instances,0<xe?se?I.drawElementsInstancedANGLE(0,Oe,se.type,Se<<(se.type-5121>>1),xe):I.drawArraysInstancedANGLE(0,Se,Oe,xe):0>xe&&(se?H.drawElements(0,Oe,se.type,Se<<(se.type-5121>>1)):H.drawArrays(0,Se,Oe)),va.dirty=!0,Fa.setVAO(null),y.viewportWidth=t,y.viewportHeight=w,ra&&(da.cpuTime+=performance.now()-O),la&&p.destroyStream(M),Cc&&p.destroyStream(za),
wb&&p.destroyStream(hb),kb&&p.destroyStream(Va),Pa&&p.destroyStream(ub),Wb&&p.destroyStream(Qb),ec&&p.destroyStream(jc),zc&&p.destroyStream(id),kd&&p.destroyStream(vd),u.unbind(),Ge.unbind(),Re&&Z.destroyStream(se)},scope:function(c,g,l){var m,r,b,q,H,na,A,e,J,P,Q,C,O,fa,ga,Xa,L,M,Ja,u,n,N,W,aa,B,K,wa,qa,F,Da,Fa,G,ca,U,ka,V,ea,Ta,oa,Ba,pa,ya,ma,ja,ta,ua,Hb,Aa,Ga,Cc,mb,Ia,Sb,ha,Ra,$b,ac,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,Vd,Qa,Kb,Eb,Ma,xd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,Dd,Wa,
Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Qd,Fc,fe,Nc,Yc,ze,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Ed,wd,oe,jd,zd,ie,ab,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,pg,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,hf,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;m=c.viewport;r=m.x|0;b=m.y|0;q="width"in m?m.width|0:y.framebufferWidth-r;H="height"in m?m.height|0:y.framebufferHeight-b;na=y.viewportWidth;y.viewportWidth=q;A=y.viewportHeight;y.viewportHeight=H;e=Xd[0];Xd[0]=r;J=Xd[1];Xd[1]=b;P=Xd[2];Xd[2]=q;Q=Xd[3];Xd[3]=H;C=la[0];la[0]=0;O=la[1];la[1]=0;fa=la[2];la[2]=0;ga=la[3];la[3]=1;Xa=Ca.blend_enable;Ca.blend_enable=!0;L=za[0];za[0]=770;M=za[1];za[1]=
771;Ja=za[2];za[2]=773;u=za[3];za[3]=1;n=Ca.depth_enable;Ca.depth_enable=!1;N=c.viewport;W=N.x|0;aa=N.y|0;B="width"in N?N.width|0:y.framebufferWidth-W;K="height"in N?N.height|0:y.framebufferHeight-aa;wa=re[0];re[0]=W;qa=re[1];re[1]=aa;F=re[2];re[2]=B;Da=re[3];re[3]=K;Fa=Ca.scissor_enable;Ca.scissor_enable=!0;G=Ca.stencil_enable;Ca.stencil_enable=!1;if(ca=va.profile)U=performance.now(),da.count++;ka=c.elements;V=null;V=(ea=sa(ka))?Z.createStream(ka):Z.getElements(ka);Ta=Ea.elements;Ea.elements=V;oa=
c.offset;Ba=Ea.offset;Ea.offset=oa;pa=c.count;ya=Ea.count;Ea.count=pa;ma=Ea.primitive;Ea.primitive=0;ja=xa[45];xa[45]=!1;ta=c.markerTexture;ua=xa[48];xa[48]=ta;Hb=c.opacity;Aa=xa[10];xa[10]=Hb;Ga=x.call(this,y,c,l);Cc=xa[46];xa[46]=Ga;mb=xa[47];xa[47]=ba;Ia=y.pixelRatio;Sb=xa[34];xa[34]=Ia;ha=c.scale;Ra=xa[6];xa[6]=ha;$b=c.scaleFract;ac=xa[7];xa[7]=$b;cc=c.translate;ib=xa[8];xa[8]=cc;pb=c.translateFract;Ha=xa[9];xa[9]=pb;rb=v.call(this,y,c,l);Ka=!1;fb=null;gb=0;La=!1;Va=kb=0;tb=1;sb=0;Oa=5126;Eb=
Kb=Qa=Vd=0;sa(rb)?(Ka=!0,fb=p.createStream(34962,rb),Oa=fb.dtype):(fb=p.getBuffer(rb))?Oa=fb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Qa=rb.constant,Kb=Eb=Vd=0):(Qa=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Eb=2<rb.constant.length?rb.constant[2]:0,Vd=3<rb.constant.length?rb.constant[3]:0)):(fb=sa(rb.buffer)?p.createStream(34962,rb.buffer):p.getBuffer(rb.buffer),Oa="type"in rb?Md[rb.type]:fb.dtype,La=!!rb.normalized,Va=rb.size|0,kb=rb.offset|0,
sb=rb.stride|0,gb=rb.divisor|0);Ma=T.buffer;T.buffer=fb;xd=T.divisor;T.divisor=gb;Ya=T.normalized;T.normalized=La;Lb=T.offset;T.offset=kb;Mb=T.size;T.size=Va;lb=T.state;T.state=tb;Na=T.stride;T.stride=sb;Zb=T.type;T.type=Oa;Pa=T.w;T.w=Vd;ub=T.x;T.x=Qa;vb=T.y;T.y=Kb;Sa=T.z;T.z=Eb;nb=z.call(this,y,c,l);hc=!1;Ac=null;vc=0;db=!1;Dd=kc=0;Wa=1;Mc=0;Ab=5126;Wb=uc=Vb=Za=0;sa(nb)?(hc=!0,Ac=p.createStream(34962,nb),Ab=Ac.dtype):(Ac=p.getBuffer(nb))?Ab=Ac.dtype:"constant"in nb?(Wa=2,"number"===typeof nb.constant?
(Vb=nb.constant,uc=Wb=Za=0):(Vb=0<nb.constant.length?nb.constant[0]:0,uc=1<nb.constant.length?nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,Za=3<nb.constant.length?nb.constant[3]:0)):(Ac=sa(nb.buffer)?p.createStream(34962,nb.buffer):p.getBuffer(nb.buffer),Ab="type"in nb?Md[nb.type]:Ac.dtype,db=!!nb.normalized,Dd=nb.size|0,kc=nb.offset|0,Mc=nb.stride|0,vc=nb.divisor|0);Qb=R.buffer;R.buffer=Ac;Kc=R.divisor;R.divisor=vc;Rb=R.normalized;R.normalized=db;Qd=R.offset;R.offset=kc;Fc=R.size;R.size=
Dd;fe=R.state;R.state=Wa;Nc=R.stride;R.stride=Mc;Yc=R.type;R.type=Ab;ze=R.w;R.w=Za;oc=R.x;R.x=Vb;wc=R.y;R.y=uc;ic=R.z;R.z=Wb;$a=ia.call(this,y,c,l);sc=!1;Tb=null;Xb=0;ec=!1;yc=jc=0;Bc=1;cd=0;Qc=5126;od=Zc=Sc=Rc=0;sa($a)?(sc=!0,Tb=p.createStream(34962,$a),Qc=Tb.dtype):(Tb=p.getBuffer($a))?Qc=Tb.dtype:"constant"in $a?(Bc=2,"number"===typeof $a.constant?(Sc=$a.constant,Zc=od=Rc=0):(Sc=0<$a.constant.length?$a.constant[0]:0,Zc=1<$a.constant.length?$a.constant[1]:0,od=2<$a.constant.length?$a.constant[2]:
0,Rc=3<$a.constant.length?$a.constant[3]:0)):(Tb=sa($a.buffer)?p.createStream(34962,$a.buffer):p.getBuffer($a.buffer),Qc="type"in $a?Md[$a.type]:Tb.dtype,ec=!!$a.normalized,yc=$a.size|0,jc=$a.offset|0,cd=$a.stride|0,Xb=$a.divisor|0);dd=h.buffer;h.buffer=Tb;$c=h.divisor;h.divisor=Xb;lc=h.normalized;h.normalized=ec;dc=h.offset;h.offset=jc;ad=h.size;h.size=yc;Uc=h.state;h.state=Bc;ed=h.stride;h.stride=cd;zc=h.type;h.type=Qc;id=h.w;h.w=Rc;Ed=h.x;h.x=Sc;wd=h.y;h.y=Zc;oe=h.z;h.z=od;jd=t.call(this,y,c,l);
zd=!1;ie=null;ab=0;ce=!1;Jd=$d=0;Hd=1;md=0;Tc=5126;vd=kd=rd=ud=0;sa(jd)?(zd=!0,ie=p.createStream(34962,jd),Tc=ie.dtype):(ie=p.getBuffer(jd))?Tc=ie.dtype:"constant"in jd?(Hd=2,"number"===typeof jd.constant?(rd=jd.constant,kd=vd=ud=0):(rd=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,vd=2<jd.constant.length?jd.constant[2]:0,ud=3<jd.constant.length?jd.constant[3]:0)):(ie=sa(jd.buffer)?p.createStream(34962,jd.buffer):p.getBuffer(jd.buffer),Tc="type"in jd?Md[jd.type]:ie.dtype,
ce=!!jd.normalized,Jd=jd.size|0,$d=jd.offset|0,md=jd.stride|0,ab=jd.divisor|0);Cd=S.buffer;S.buffer=ie;Fd=S.divisor;S.divisor=ab;je=S.normalized;S.normalized=ce;ye=S.offset;S.offset=$d;pg=S.size;S.size=Jd;le=S.state;S.state=Hd;ke=S.stride;S.stride=md;he=S.type;S.type=Tc;ve=S.w;S.w=ud;de=S.x;S.x=rd;me=S.y;S.y=kd;Oc=S.z;S.z=vd;gd=k.call(this,y,c,l);we=!1;qe=null;Kd=0;Pd=!1;Sd=Rd=0;ne=1;Ge=0;Be=5126;Oe=Se=Re=se=0;sa(gd)?(we=!0,qe=p.createStream(34962,gd),Be=qe.dtype):(qe=p.getBuffer(gd))?Be=qe.dtype:
"constant"in gd?(ne=2,"number"===typeof gd.constant?(Re=gd.constant,Se=Oe=se=0):(Re=0<gd.constant.length?gd.constant[0]:0,Se=1<gd.constant.length?gd.constant[1]:0,Oe=2<gd.constant.length?gd.constant[2]:0,se=3<gd.constant.length?gd.constant[3]:0)):(qe=sa(gd.buffer)?p.createStream(34962,gd.buffer):p.getBuffer(gd.buffer),Be="type"in gd?Md[gd.type]:qe.dtype,Pd=!!gd.normalized,Sd=gd.size|0,Rd=gd.offset|0,Ge=gd.stride|0,Kd=gd.divisor|0);xe=X.buffer;X.buffer=qe;He=X.divisor;X.divisor=Kd;Je=X.normalized;
X.normalized=Pd;Ke=X.offset;X.offset=Rd;Le=X.size;X.size=Sd;Ie=X.state;X.state=ne;Ld=X.stride;X.stride=Ge;Wd=X.type;X.type=Be;be=X.w;X.w=se;ee=X.x;X.x=Re;Me=X.y;X.y=Se;Id=X.z;X.z=Oe;Td=f.call(this,y,c,l);De=!1;Ne=null;hf=0;bf=!1;Pe=Te=0;af=1;Ye=0;Ue=5126;We=ae=Ud=Ve=0;sa(Td)?(De=!0,Ne=p.createStream(34962,Td),Ue=Ne.dtype):(Ne=p.getBuffer(Td))?Ue=Ne.dtype:"constant"in Td?(af=2,"number"===typeof Td.constant?(Ud=Td.constant,ae=We=Ve=0):(Ud=0<Td.constant.length?Td.constant[0]:0,ae=1<Td.constant.length?
Td.constant[1]:0,We=2<Td.constant.length?Td.constant[2]:0,Ve=3<Td.constant.length?Td.constant[3]:0)):(Ne=sa(Td.buffer)?p.createStream(34962,Td.buffer):p.getBuffer(Td.buffer),Ue="type"in Td?Md[Td.type]:Ne.dtype,bf=!!Td.normalized,Pe=Td.size|0,Te=Td.offset|0,Ye=Td.stride|0,hf=Td.divisor|0);jf=w.buffer;w.buffer=Ne;nf=w.divisor;w.divisor=hf;ef=w.normalized;w.normalized=bf;kf=w.offset;w.offset=Te;lf=w.size;w.size=Pe;mf=w.state;w.state=af;rf=w.stride;w.stride=Ye;of=w.type;w.type=Ue;sf=w.w;w.w=Ve;Bf=w.x;
w.x=Ud;Cf=w.y;w.y=ae;Qe=w.z;w.z=We;Ee=Y.call(this,y,c,l);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Ee)?(pf=!0,qf=p.createStream(34962,Ee),xf=qf.dtype):(qf=p.getBuffer(Ee))?xf=qf.dtype:"constant"in Ee?(Ff=2,"number"===typeof Ee.constant?(yf=Ee.constant,zf=If=vf=0):(yf=0<Ee.constant.length?Ee.constant[0]:0,zf=1<Ee.constant.length?Ee.constant[1]:0,If=2<Ee.constant.length?Ee.constant[2]:0,vf=3<Ee.constant.length?Ee.constant[3]:0)):(qf=sa(Ee.buffer)?p.createStream(34962,Ee.buffer):
p.getBuffer(Ee.buffer),xf="type"in Ee?Md[Ee.type]:qf.dtype,Gf=!!Ee.normalized,Ef=Ee.size|0,Af=Ee.offset|0,wf=Ee.stride|0,Df=Ee.divisor|0);Jf=D.buffer;D.buffer=qf;Kf=D.divisor;D.divisor=Df;Lf=D.normalized;D.normalized=Gf;tf=D.offset;D.offset=Af;Qf=D.size;D.size=Ef;Hf=D.state;D.state=Ff;uf=D.stride;D.stride=wf;cg=D.type;D.type=xf;Rf=D.w;D.w=vf;Sf=D.x;D.x=yf;qg=D.y;D.y=zf;ff=D.z;D.z=If;cf=E.call(this,y,c,l);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;sa(cf)?(Mf=!0,Nf=p.createStream(34962,
cf),Tf=Nf.dtype):(Nf=p.getBuffer(cf))?Tf=Nf.dtype:"constant"in cf?(hg=2,"number"===typeof cf.constant?(Xf=cf.constant,Yf=ig=Wf=0):(Xf=0<cf.constant.length?cf.constant[0]:0,Yf=1<cf.constant.length?cf.constant[1]:0,ig=2<cf.constant.length?cf.constant[2]:0,Wf=3<cf.constant.length?cf.constant[3]:0)):(Nf=sa(cf.buffer)?p.createStream(34962,cf.buffer):p.getBuffer(cf.buffer),Tf="type"in cf?Md[cf.type]:Nf.dtype,eg=!!cf.normalized,gg=cf.size|0,fg=cf.offset|0,Vf=cf.stride|0,dg=cf.divisor|0);rg=d.buffer;d.buffer=
Nf;sg=d.divisor;d.divisor=dg;tg=d.normalized;d.normalized=eg;ug=d.offset;d.offset=fg;vg=d.size;d.size=gg;wg=d.state;d.state=hg;xg=d.stride;d.stride=Vf;yg=d.type;d.type=Tf;zg=d.w;d.w=Wf;Ag=d.x;d.x=Xf;Bg=d.y;d.y=Yf;gf=d.z;d.z=ig;df=I.call(this,y,c,l);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;sa(df)?(Of=!0,Pf=p.createStream(34962,df),Uf=Pf.dtype):(Pf=p.getBuffer(df))?Uf=Pf.dtype:"constant"in df?(ng=2,"number"===typeof df.constant?(ag=df.constant,bg=og=$f=0):(ag=0<df.constant.length?
df.constant[0]:0,bg=1<df.constant.length?df.constant[1]:0,og=2<df.constant.length?df.constant[2]:0,$f=3<df.constant.length?df.constant[3]:0)):(Pf=sa(df.buffer)?p.createStream(34962,df.buffer):p.getBuffer(df.buffer),Uf="type"in df?Md[df.type]:Pf.dtype,kg=!!df.normalized,mg=df.size|0,lg=df.offset|0,Zf=df.stride|0,jg=df.divisor|0);Cg=a.buffer;a.buffer=Pf;Dg=a.divisor;a.divisor=jg;Eg=a.normalized;a.normalized=kg;Fg=a.offset;a.offset=lg;Gg=a.size;a.size=mg;Hg=a.state;a.state=ng;Ig=a.stride;a.stride=Zf;
Jg=a.type;a.type=Uf;Kg=a.w;a.w=$f;Lg=a.x;a.x=ag;Mg=a.y;a.y=bg;Ng=a.z;a.z=og;Og=ra.vert;ra.vert=44;Pg=ra.frag;ra.frag=43;va.dirty=!0;g(y,c,l);y.viewportWidth=na;y.viewportHeight=A;Xd[0]=e;Xd[1]=J;Xd[2]=P;Xd[3]=Q;la[0]=C;la[1]=O;la[2]=fa;la[3]=ga;Ca.blend_enable=Xa;za[0]=L;za[1]=M;za[2]=Ja;za[3]=u;Ca.depth_enable=n;re[0]=wa;re[1]=qa;re[2]=F;re[3]=Da;Ca.scissor_enable=Fa;Ca.stencil_enable=G;ca&&(da.cpuTime+=performance.now()-U);ea&&Z.destroyStream(V);Ea.elements=Ta;Ea.offset=Ba;Ea.count=ya;Ea.primitive=
ma;xa[45]=ja;xa[48]=ua;xa[10]=Aa;xa[46]=Cc;xa[47]=mb;xa[34]=Sb;xa[6]=Ra;xa[7]=ac;xa[8]=ib;xa[9]=Ha;Ka&&p.destroyStream(fb);T.buffer=Ma;T.divisor=xd;T.normalized=Ya;T.offset=Lb;T.size=Mb;T.state=lb;T.stride=Na;T.type=Zb;T.w=Pa;T.x=ub;T.y=vb;T.z=Sa;hc&&p.destroyStream(Ac);R.buffer=Qb;R.divisor=Kc;R.normalized=Rb;R.offset=Qd;R.size=Fc;R.state=fe;R.stride=Nc;R.type=Yc;R.w=ze;R.x=oc;R.y=wc;R.z=ic;sc&&p.destroyStream(Tb);h.buffer=dd;h.divisor=$c;h.normalized=lc;h.offset=dc;h.size=ad;h.state=Uc;h.stride=
ed;h.type=zc;h.w=id;h.x=Ed;h.y=wd;h.z=oe;zd&&p.destroyStream(ie);S.buffer=Cd;S.divisor=Fd;S.normalized=je;S.offset=ye;S.size=pg;S.state=le;S.stride=ke;S.type=he;S.w=ve;S.x=de;S.y=me;S.z=Oc;we&&p.destroyStream(qe);X.buffer=xe;X.divisor=He;X.normalized=Je;X.offset=Ke;X.size=Le;X.state=Ie;X.stride=Ld;X.type=Wd;X.w=be;X.x=ee;X.y=Me;X.z=Id;De&&p.destroyStream(Ne);w.buffer=jf;w.divisor=nf;w.normalized=ef;w.offset=kf;w.size=lf;w.state=mf;w.stride=rf;w.type=of;w.w=sf;w.x=Bf;w.y=Cf;w.z=Qe;pf&&p.destroyStream(qf);
D.buffer=Jf;D.divisor=Kf;D.normalized=Lf;D.offset=tf;D.size=Qf;D.state=Hf;D.stride=uf;D.type=cg;D.w=Rf;D.x=Sf;D.y=qg;D.z=ff;Mf&&p.destroyStream(Nf);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;d.x=Ag;d.y=Bg;d.z=gf;Of&&p.destroyStream(Pf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;ra.vert=Og;ra.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,
da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Z,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa){var Ta,r,p,y,va,Ea,Bd,Hb,ga,H,sa,Ca,ra,xa,Fa,la,W,ua,Ia,za,mb,ca,ha,$b,Ga,ac,Sb,ab,Dd,re,Vd,ze,zd,Qd,oe,ie,Ed,Xd,fe;Ta=b.attributes;r=b.buffer;p=b.context;y=b.current;va=b.draw;Ea=b.elements;Bd=b.extensions;Hb=b.framebuffer;ga=b.gl;H=b.isBufferArgs;sa=b.next;Ca=b.shader;ra=b.uniforms;xa=b.vao;Fa=sa.blend_color;la=y.blend_color;W=sa.blend_equation;ua=y.blend_equation;
Ia=sa.blend_func;za=y.blend_func;mb=sa.colorMask;ca=y.colorMask;ha=sa.depth_range;$b=y.depth_range;Ga=sa.polygonOffset_offset;ac=y.polygonOffset_offset;Sb=sa.sample_coverage;ab=y.sample_coverage;Dd=sa.scissor_box;re=y.scissor_box;Vd=sa.stencil_func;ze=y.stencil_func;zd=sa.stencil_opBack;Qd=y.stencil_opBack;oe=sa.stencil_opFront;ie=y.stencil_opFront;Ed=sa.viewport;Xd=y.viewport;fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
d){var c,f,h,l,k,b;c=Hb.next;c!==Hb.cur&&(c?ga.bindFramebuffer(36160,c.framebuffer):ga.bindFramebuffer(36160,null),Hb.cur=c);if(y.dirty){var q,t,w,e,v,Ca,E,ra,D,I,L,u,n,z,B,x,K,R,F,S,Fa,G,T,U,X,ba,ia,Y,Ia,bb,bc,yb,eb,Nb;q=sa.dither;q!==y.dither&&(q?ga.enable(3024):ga.disable(3024),y.dither=q);t=W[0];w=W[1];if(t!==ua[0]||w!==ua[1])ga.blendEquationSeparate(t,w),ua[0]=t,ua[1]=w;e=sa.depth_func;e!==y.depth_func&&(ga.depthFunc(e),y.depth_func=e);v=ha[0];Ca=ha[1];if(v!==$b[0]||Ca!==$b[1])ga.depthRange(v,
Ca),$b[0]=v,$b[1]=Ca;E=sa.depth_mask;E!==y.depth_mask&&(ga.depthMask(E),y.depth_mask=E);ra=mb[0];D=mb[1];I=mb[2];L=mb[3];if(ra!==ca[0]||D!==ca[1]||I!==ca[2]||L!==ca[3])ga.colorMask(ra,D,I,L),ca[0]=ra,ca[1]=D,ca[2]=I,ca[3]=L;u=sa.cull_enable;u!==y.cull_enable&&(u?ga.enable(2884):ga.disable(2884),y.cull_enable=u);n=sa.cull_face;n!==y.cull_face&&(ga.cullFace(n),y.cull_face=n);z=sa.frontFace;z!==y.frontFace&&(ga.frontFace(z),y.frontFace=z);B=sa.lineWidth;B!==y.lineWidth&&(ga.lineWidth(B),y.lineWidth=
B);x=sa.polygonOffset_enable;x!==y.polygonOffset_enable&&(x?ga.enable(32823):ga.disable(32823),y.polygonOffset_enable=x);K=Ga[0];R=Ga[1];if(K!==ac[0]||R!==ac[1])ga.polygonOffset(K,R),ac[0]=K,ac[1]=R;F=sa.sample_alpha;F!==y.sample_alpha&&(F?ga.enable(32926):ga.disable(32926),y.sample_alpha=F);S=sa.sample_enable;S!==y.sample_enable&&(S?ga.enable(32928):ga.disable(32928),y.sample_enable=S);Fa=Sb[0];G=Sb[1];if(Fa!==ab[0]||G!==ab[1])ga.sampleCoverage(Fa,G),ab[0]=Fa,ab[1]=G;T=sa.stencil_mask;T!==y.stencil_mask&&
(ga.stencilMask(T),y.stencil_mask=T);U=Vd[0];X=Vd[1];ba=Vd[2];if(U!==ze[0]||X!==ze[1]||ba!==ze[2])ga.stencilFunc(U,X,ba),ze[0]=U,ze[1]=X,ze[2]=ba;ia=oe[0];Y=oe[1];Ia=oe[2];bb=oe[3];if(ia!==ie[0]||Y!==ie[1]||Ia!==ie[2]||bb!==ie[3])ga.stencilOpSeparate(ia,Y,Ia,bb),ie[0]=ia,ie[1]=Y,ie[2]=Ia,ie[3]=bb;bc=zd[0];yb=zd[1];eb=zd[2];Nb=zd[3];if(bc!==Qd[0]||yb!==Qd[1]||eb!==Qd[2]||Nb!==Qd[3])ga.stencilOpSeparate(bc,yb,eb,Nb),Qd[0]=bc,Qd[1]=yb,Qd[2]=eb,Qd[3]=Nb}ga.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;
la[3]=1;ga.enable(3042);y.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;ga.disable(2929);y.depth_enable=!1;ga.enable(3089);y.scissor_enable=!0;ga.disable(2960);y.stencil_enable=!1;if(f=y.profile)h=performance.now(),da.count+=d;ga.useProgram(ta.program);l=Bd.angle_instanced_arrays;var cb;xa.setVAO(null);ga.uniform1i(J.location,!1);ga.uniform1i(qa.location,N.bind());cb=va.instances;for(k=0;k<d;++k){b=a[k];var ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,
Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,Dd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Ed,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,hf,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,
Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf;ob=b.viewport;Ua=ob.x|0;hd=ob.y|0;Ib="width"in ob?ob.width|0:p.framebufferWidth-Ua;Jb="height"in ob?ob.height|0:p.framebufferHeight-hd;rc=p.viewportWidth;p.viewportWidth=Ib;Ob=p.viewportHeight;p.viewportHeight=Jb;ga.viewport(Ua,hd,Ib,Jb);Xd[0]=Ua;Xd[1]=hd;Xd[2]=Ib;Xd[3]=Jb;jb=b.viewport;Gb=jb.x|0;Db=jb.y|0;wb="width"in jb?jb.width|0:p.framebufferWidth-Gb;hb="height"in jb?jb.height|0:p.framebufferHeight-Db;ga.scissor(Gb,Db,wb,hb);re[0]=Gb;re[1]=Db;re[2]=
wb;re[3]=hb;Yb=A.call(this,p,b,k);Pb=!1;qb=null;Ra=0;Ub=!1;cc=zb=0;ib=1;pb=0;Ha=5126;gb=fb=Ka=rb=0;H(Yb)?(Pb=!0,qb=r.createStream(34962,Yb),Ha=qb.dtype):(qb=r.getBuffer(Yb))?Ha=qb.dtype:"constant"in Yb?(ib=2,"number"===typeof Yb.constant?(Ka=Yb.constant,fb=gb=rb=0):(Ka=0<Yb.constant.length?Yb.constant[0]:0,fb=1<Yb.constant.length?Yb.constant[1]:0,gb=2<Yb.constant.length?Yb.constant[2]:0,rb=3<Yb.constant.length?Yb.constant[3]:0)):(qb=H(Yb.buffer)?r.createStream(34962,Yb.buffer):r.getBuffer(Yb.buffer),
Ha="type"in Yb?fe[Yb.type]:qb.dtype,Ub=!!Yb.normalized,cc=Yb.size|0,zb=Yb.offset|0,pb=Yb.stride|0,Ra=Yb.divisor|0);La=ya.location;kb=Ta[La];if(1===ib){kb.buffer||ga.enableVertexAttribArray(La);Va=cc||1;if(kb.type!==Ha||kb.size!==Va||kb.buffer!==qb||kb.normalized!==Ub||kb.offset!==zb||kb.stride!==pb)ga.bindBuffer(34962,qb.buffer),ga.vertexAttribPointer(La,Va,Ha,Ub,pb,zb),kb.type=Ha,kb.size=Va,kb.buffer=qb,kb.normalized=Ub,kb.offset=zb,kb.stride=pb;kb.divisor!==Ra&&(l.vertexAttribDivisorANGLE(La,Ra),
kb.divisor=Ra)}else if(kb.buffer&&(ga.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==fb||kb.z!==gb||kb.w!==rb)ga.vertexAttrib4f(La,Ka,fb,gb,rb),kb.x=Ka,kb.y=fb,kb.z=gb,kb.w=rb;tb=ja.call(this,p,b,k);sb=!1;Oa=null;tc=0;Qa=!1;Eb=Kb=0;Ma=1;Dd=0;Ya=5126;Na=lb=Mb=Lb=0;H(tb)?(sb=!0,Oa=r.createStream(34962,tb),Ya=Oa.dtype):(Oa=r.getBuffer(tb))?Ya=Oa.dtype:"constant"in tb?(Ma=2,"number"===typeof tb.constant?(Mb=tb.constant,lb=Na=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,lb=1<tb.constant.length?
tb.constant[1]:0,Na=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Oa=H(tb.buffer)?r.createStream(34962,tb.buffer):r.getBuffer(tb.buffer),Ya="type"in tb?fe[tb.type]:Oa.dtype,Qa=!!tb.normalized,Eb=tb.size|0,Kb=tb.offset|0,Dd=tb.stride|0,tc=tb.divisor|0);Zb=na.location;Pa=Ta[Zb];if(1===Ma){Pa.buffer||ga.enableVertexAttribArray(Zb);ub=Eb||1;if(Pa.type!==Ya||Pa.size!==ub||Pa.buffer!==Oa||Pa.normalized!==Qa||Pa.offset!==Kb||Pa.stride!==Dd)ga.bindBuffer(34962,Oa.buffer),
ga.vertexAttribPointer(Zb,ub,Ya,Qa,Dd,Kb),Pa.type=Ya,Pa.size=ub,Pa.buffer=Oa,Pa.normalized=Qa,Pa.offset=Kb,Pa.stride=Dd;Pa.divisor!==tc&&(l.vertexAttribDivisorANGLE(Zb,tc),Pa.divisor=tc)}else if(Pa.buffer&&(ga.disableVertexAttribArray(Zb),Pa.buffer=null),Pa.x!==Mb||Pa.y!==lb||Pa.z!==Na||Pa.w!==Lb)ga.vertexAttrib4f(Zb,Mb,lb,Na,Lb),Pa.x=Mb,Pa.y=lb,Pa.z=Na,Pa.w=Lb;vb=Z.call(this,p,b,k);Sa=!1;nb=null;hc=0;Ac=!1;db=vc=0;kc=1;qd=0;Wa=5126;Vb=Za=Ab=Mc=0;H(vb)?(Sa=!0,nb=r.createStream(34962,vb),Wa=nb.dtype):
(nb=r.getBuffer(vb))?Wa=nb.dtype:"constant"in vb?(kc=2,"number"===typeof vb.constant?(Ab=vb.constant,Za=Vb=Mc=0):(Ab=0<vb.constant.length?vb.constant[0]:0,Za=1<vb.constant.length?vb.constant[1]:0,Vb=2<vb.constant.length?vb.constant[2]:0,Mc=3<vb.constant.length?vb.constant[3]:0)):(nb=H(vb.buffer)?r.createStream(34962,vb.buffer):r.getBuffer(vb.buffer),Wa="type"in vb?fe[vb.type]:nb.dtype,Ac=!!vb.normalized,db=vb.size|0,vc=vb.offset|0,qd=vb.stride|0,hc=vb.divisor|0);uc=Ja.location;Wb=Ta[uc];if(1===kc){Wb.buffer||
ga.enableVertexAttribArray(uc);Qb=db||1;if(Wb.type!==Wa||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==Ac||Wb.offset!==vc||Wb.stride!==qd)ga.bindBuffer(34962,nb.buffer),ga.vertexAttribPointer(uc,Qb,Wa,Ac,qd,vc),Wb.type=Wa,Wb.size=Qb,Wb.buffer=nb,Wb.normalized=Ac,Wb.offset=vc,Wb.stride=qd;Wb.divisor!==hc&&(l.vertexAttribDivisorANGLE(uc,hc),Wb.divisor=hc)}else if(Wb.buffer&&(ga.disableVertexAttribArray(uc),Wb.buffer=null),Wb.x!==Ab||Wb.y!==Za||Wb.z!==Vb||Wb.w!==Mc)ga.vertexAttrib4f(uc,Ab,Za,Vb,Mc),
Wb.x=Ab,Wb.y=Za,Wb.z=Vb,Wb.w=Mc;Kc=V.call(this,p,b,k);Rb=!1;Ed=null;Fc=0;sd=!1;Yc=Nc=0;td=1;oc=0;wc=5126;Tb=sc=$a=ic=0;H(Kc)?(Rb=!0,Ed=r.createStream(34962,Kc),wc=Ed.dtype):(Ed=r.getBuffer(Kc))?wc=Ed.dtype:"constant"in Kc?(td=2,"number"===typeof Kc.constant?($a=Kc.constant,sc=Tb=ic=0):($a=0<Kc.constant.length?Kc.constant[0]:0,sc=1<Kc.constant.length?Kc.constant[1]:0,Tb=2<Kc.constant.length?Kc.constant[2]:0,ic=3<Kc.constant.length?Kc.constant[3]:0)):(Ed=H(Kc.buffer)?r.createStream(34962,Kc.buffer):
r.getBuffer(Kc.buffer),wc="type"in Kc?fe[Kc.type]:Ed.dtype,sd=!!Kc.normalized,Yc=Kc.size|0,Nc=Kc.offset|0,oc=Kc.stride|0,Fc=Kc.divisor|0);Xb=Xa.location;ec=Ta[Xb];if(1===td){ec.buffer||ga.enableVertexAttribArray(Xb);jc=Yc||1;if(ec.type!==wc||ec.size!==jc||ec.buffer!==Ed||ec.normalized!==sd||ec.offset!==Nc||ec.stride!==oc)ga.bindBuffer(34962,Ed.buffer),ga.vertexAttribPointer(Xb,jc,wc,sd,oc,Nc),ec.type=wc,ec.size=jc,ec.buffer=Ed,ec.normalized=sd,ec.offset=Nc,ec.stride=oc;ec.divisor!==Fc&&(l.vertexAttribDivisorANGLE(Xb,
Fc),ec.divisor=Fc)}else if(ec.buffer&&(ga.disableVertexAttribArray(Xb),ec.buffer=null),ec.x!==$a||ec.y!==sc||ec.z!==Tb||ec.w!==ic)ga.vertexAttrib4f(Xb,$a,sc,Tb,ic),ec.x=$a,ec.y=sc,ec.z=Tb,ec.w=ic;yc=ea.call(this,p,b,k);Bc=!1;cd=null;Qc=0;Rc=!1;Zc=Sc=0;od=1;dd=0;$c=5126;Uc=ad=dc=lc=0;H(yc)?(Bc=!0,cd=r.createStream(34962,yc),$c=cd.dtype):(cd=r.getBuffer(yc))?$c=cd.dtype:"constant"in yc?(od=2,"number"===typeof yc.constant?(dc=yc.constant,ad=Uc=lc=0):(dc=0<yc.constant.length?yc.constant[0]:0,ad=1<yc.constant.length?
yc.constant[1]:0,Uc=2<yc.constant.length?yc.constant[2]:0,lc=3<yc.constant.length?yc.constant[3]:0)):(cd=H(yc.buffer)?r.createStream(34962,yc.buffer):r.getBuffer(yc.buffer),$c="type"in yc?fe[yc.type]:cd.dtype,Rc=!!yc.normalized,Zc=yc.size|0,Sc=yc.offset|0,dd=yc.stride|0,Qc=yc.divisor|0);ed=Ba.location;zc=Ta[ed];if(1===od){zc.buffer||ga.enableVertexAttribArray(ed);id=Zc||1;if(zc.type!==$c||zc.size!==id||zc.buffer!==cd||zc.normalized!==Rc||zc.offset!==Sc||zc.stride!==dd)ga.bindBuffer(34962,cd.buffer),
ga.vertexAttribPointer(ed,id,$c,Rc,dd,Sc),zc.type=$c,zc.size=id,zc.buffer=cd,zc.normalized=Rc,zc.offset=Sc,zc.stride=dd;zc.divisor!==Qc&&(l.vertexAttribDivisorANGLE(ed,Qc),zc.divisor=Qc)}else if(zc.buffer&&(ga.disableVertexAttribArray(ed),zc.buffer=null),zc.x!==dc||zc.y!==ad||zc.z!==Uc||zc.w!==lc)ga.vertexAttrib4f(ed,dc,ad,Uc,lc),zc.x=dc,zc.y=ad,zc.z=Uc,zc.w=lc;Nd=O.call(this,p,b,k);wd=!1;ue=null;jd=0;Ce=!1;ge=Od=0;ce=1;$d=0;Jd=5126;ud=Tc=md=Hd=0;H(Nd)?(wd=!0,ue=r.createStream(34962,Nd),Jd=ue.dtype):
(ue=r.getBuffer(Nd))?Jd=ue.dtype:"constant"in Nd?(ce=2,"number"===typeof Nd.constant?(md=Nd.constant,Tc=ud=Hd=0):(md=0<Nd.constant.length?Nd.constant[0]:0,Tc=1<Nd.constant.length?Nd.constant[1]:0,ud=2<Nd.constant.length?Nd.constant[2]:0,Hd=3<Nd.constant.length?Nd.constant[3]:0)):(ue=H(Nd.buffer)?r.createStream(34962,Nd.buffer):r.getBuffer(Nd.buffer),Jd="type"in Nd?fe[Nd.type]:ue.dtype,Ce=!!Nd.normalized,ge=Nd.size|0,Od=Nd.offset|0,$d=Nd.stride|0,jd=Nd.divisor|0);rd=pa.location;kd=Ta[rd];if(1===ce){kd.buffer||
ga.enableVertexAttribArray(rd);vd=ge||1;if(kd.type!==Jd||kd.size!==vd||kd.buffer!==ue||kd.normalized!==Ce||kd.offset!==Od||kd.stride!==$d)ga.bindBuffer(34962,ue.buffer),ga.vertexAttribPointer(rd,vd,Jd,Ce,$d,Od),kd.type=Jd,kd.size=vd,kd.buffer=ue,kd.normalized=Ce,kd.offset=Od,kd.stride=$d;kd.divisor!==jd&&(l.vertexAttribDivisorANGLE(rd,jd),kd.divisor=jd)}else if(kd.buffer&&(ga.disableVertexAttribArray(rd),kd.buffer=null),kd.x!==md||kd.y!==Tc||kd.z!==ud||kd.w!==Hd)ga.vertexAttrib4f(rd,md,Tc,ud,Hd),
kd.x=md,kd.y=Tc,kd.z=ud,kd.w=Hd;Cd=P.call(this,p,b,k);Fd=!1;je=null;ye=0;Fe=!1;ke=le=0;he=1;ve=0;de=5126;we=gd=Oc=me=0;H(Cd)?(Fd=!0,je=r.createStream(34962,Cd),de=je.dtype):(je=r.getBuffer(Cd))?de=je.dtype:"constant"in Cd?(he=2,"number"===typeof Cd.constant?(Oc=Cd.constant,gd=we=me=0):(Oc=0<Cd.constant.length?Cd.constant[0]:0,gd=1<Cd.constant.length?Cd.constant[1]:0,we=2<Cd.constant.length?Cd.constant[2]:0,me=3<Cd.constant.length?Cd.constant[3]:0)):(je=H(Cd.buffer)?r.createStream(34962,Cd.buffer):
r.getBuffer(Cd.buffer),de="type"in Cd?fe[Cd.type]:je.dtype,Fe=!!Cd.normalized,ke=Cd.size|0,le=Cd.offset|0,ve=Cd.stride|0,ye=Cd.divisor|0);qe=m.location;Kd=Ta[qe];if(1===he){Kd.buffer||ga.enableVertexAttribArray(qe);Pd=ke||4;if(Kd.type!==de||Kd.size!==Pd||Kd.buffer!==je||Kd.normalized!==Fe||Kd.offset!==le||Kd.stride!==ve)ga.bindBuffer(34962,je.buffer),ga.vertexAttribPointer(qe,Pd,de,Fe,ve,le),Kd.type=de,Kd.size=Pd,Kd.buffer=je,Kd.normalized=Fe,Kd.offset=le,Kd.stride=ve;Kd.divisor!==ye&&(l.vertexAttribDivisorANGLE(qe,
ye),Kd.divisor=ye)}else if(Kd.buffer&&(ga.disableVertexAttribArray(qe),Kd.buffer=null),Kd.x!==Oc||Kd.y!==gd||Kd.z!==we||Kd.w!==me)ga.vertexAttrib4f(qe,Oc,gd,we,me),Kd.x=Oc,Kd.y=gd,Kd.z=we,Kd.w=me;Rd=C.call(this,p,b,k);Sd=!1;ne=null;Ge=0;Be=!1;Re=se=0;Se=1;Oe=0;xe=5126;Le=Ke=Je=He=0;H(Rd)?(Sd=!0,ne=r.createStream(34962,Rd),xe=ne.dtype):(ne=r.getBuffer(Rd))?xe=ne.dtype:"constant"in Rd?(Se=2,"number"===typeof Rd.constant?(Je=Rd.constant,Ke=Le=He=0):(Je=0<Rd.constant.length?Rd.constant[0]:0,Ke=1<Rd.constant.length?
Rd.constant[1]:0,Le=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(ne=H(Rd.buffer)?r.createStream(34962,Rd.buffer):r.getBuffer(Rd.buffer),xe="type"in Rd?fe[Rd.type]:ne.dtype,Be=!!Rd.normalized,Re=Rd.size|0,se=Rd.offset|0,Oe=Rd.stride|0,Ge=Rd.divisor|0);Ie=Da.location;Ld=Ta[Ie];if(1===Se){Ld.buffer||ga.enableVertexAttribArray(Ie);Wd=Re||4;if(Ld.type!==xe||Ld.size!==Wd||Ld.buffer!==ne||Ld.normalized!==Be||Ld.offset!==se||Ld.stride!==Oe)ga.bindBuffer(34962,ne.buffer),
ga.vertexAttribPointer(Ie,Wd,xe,Be,Oe,se),Ld.type=xe,Ld.size=Wd,Ld.buffer=ne,Ld.normalized=Be,Ld.offset=se,Ld.stride=Oe;Ld.divisor!==Ge&&(l.vertexAttribDivisorANGLE(Ie,Ge),Ld.divisor=Ge)}else if(Ld.buffer&&(ga.disableVertexAttribArray(Ie),Ld.buffer=null),Ld.x!==Je||Ld.y!==Ke||Ld.z!==Le||Ld.w!==He)ga.vertexAttrib4f(Ie,Je,Ke,Le,He),Ld.x=Je,Ld.y=Ke,Ld.z=Le,Ld.w=He;be=g.call(this,p,b,k);ee=!1;Me=null;Id=0;Td=!1;Ne=De=0;hf=1;bf=0;Te=5126;Ue=Ye=af=Pe=0;H(be)?(ee=!0,Me=r.createStream(34962,be),Te=Me.dtype):
(Me=r.getBuffer(be))?Te=Me.dtype:"constant"in be?(hf=2,"number"===typeof be.constant?(af=be.constant,Ye=Ue=Pe=0):(af=0<be.constant.length?be.constant[0]:0,Ye=1<be.constant.length?be.constant[1]:0,Ue=2<be.constant.length?be.constant[2]:0,Pe=3<be.constant.length?be.constant[3]:0)):(Me=H(be.buffer)?r.createStream(34962,be.buffer):r.getBuffer(be.buffer),Te="type"in be?fe[be.type]:Me.dtype,Td=!!be.normalized,Ne=be.size|0,De=be.offset|0,bf=be.stride|0,Id=be.divisor|0);Ve=aa.location;Ud=Ta[Ve];if(1===hf){Ud.buffer||
ga.enableVertexAttribArray(Ve);ae=Ne||1;if(Ud.type!==Te||Ud.size!==ae||Ud.buffer!==Me||Ud.normalized!==Td||Ud.offset!==De||Ud.stride!==bf)ga.bindBuffer(34962,Me.buffer),ga.vertexAttribPointer(Ve,ae,Te,Td,bf,De),Ud.type=Te,Ud.size=ae,Ud.buffer=Me,Ud.normalized=Td,Ud.offset=De,Ud.stride=bf;Ud.divisor!==Id&&(l.vertexAttribDivisorANGLE(Ve,Id),Ud.divisor=Id)}else if(Ud.buffer&&(ga.disableVertexAttribArray(Ve),Ud.buffer=null),Ud.x!==af||Ud.y!==Ye||Ud.z!==Ue||Ud.w!==Pe)ga.vertexAttrib4f(Ve,af,Ye,Ue,Pe),
Ud.x=af,Ud.y=Ye,Ud.z=Ue,Ud.w=Pe;We=p.pixelRatio;k&&jf===We||(jf=We,ga.uniform1f(Aa.location,We));nf=M.call(this,p,b,k);ef=nf[0];lf=nf[1];k&&kf===ef&&mf===lf||(kf=ef,mf=lf,ga.uniform2f(ma.location,ef,lf));rf=b.scale;of=rf[0];Bf=rf[1];k&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ga.uniform2f(wa.location,of,Bf));Qe=b.scaleFract;Ee=Qe[0];qf=Qe[1];k&&pf===Ee&&Df===qf||(pf=Ee,Df=qf,ga.uniform2f(fa.location,Ee,qf));Gf=b.translate;Af=Gf[0];Ff=Gf[1];k&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ga.uniform2f(ka.location,Af,Ff));
xf=b.translateFract;vf=xf[0];zf=xf[1];k&&yf===vf&&If===zf||(yf=vf,If=zf,ga.uniform2f(oa.location,vf,zf));Jf=b.opacity;k&&Kf===Jf||(Kf=Jf,ga.uniform1f(Q.location,Jf));Lf=b.elements;tf=null;(tf=(Qf=H(Lf))?Ea.createStream(Lf):Ea.getElements(Lf))&&ga.bindBuffer(34963,tf.buffer.buffer);Hf=b.offset;if(uf=b.count)0<cb?tf?l.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),cb):l.drawArraysInstancedANGLE(0,Hf,uf,cb):0>cb&&(tf?ga.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ga.drawArrays(0,
Hf,uf)),p.viewportWidth=rc,p.viewportHeight=Ob,Pb&&r.destroyStream(qb),sb&&r.destroyStream(Oa),Sa&&r.destroyStream(nb),Rb&&r.destroyStream(Ed),Bc&&r.destroyStream(cd),wd&&r.destroyStream(ue),Fd&&r.destroyStream(je),Sd&&r.destroyStream(ne),ee&&r.destroyStream(Me),Qf&&Ea.destroyStream(tf)}N.unbind();y.dirty=!0;xa.setVAO(null);f&&(da.cpuTime+=performance.now()-h)},draw:function(a){var d,g,f,h,k,b,t,w,A,v,Ca,P,C,E,ra,O,D,I,M,z,N,x,R,S,Fa,T,V,X,ea,ba,ia,Y,ja,ta,Z,Cc,Ia,bc,yb,eb,Nb,cb,ob,Ua,Dd,Ib,Jb,rc,
Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,Ed,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd,wd,ue,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re;d=Hb.next;d!==Hb.cur&&(d?ga.bindFramebuffer(36160,d.framebuffer):ga.bindFramebuffer(36160,null),Hb.cur=d);
if(y.dirty){var Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,hf,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,kf,lf,mf;Se=sa.dither;Se!==y.dither&&(Se?ga.enable(3024):ga.disable(3024),y.dither=Se);Oe=W[0];xe=W[1];if(Oe!==ua[0]||xe!==ua[1])ga.blendEquationSeparate(Oe,xe),ua[0]=Oe,ua[1]=xe;He=sa.depth_func;He!==y.depth_func&&(ga.depthFunc(He),y.depth_func=He);Je=ha[0];Ke=ha[1];if(Je!==$b[0]||Ke!==$b[1])ga.depthRange(Je,Ke),$b[0]=Je,$b[1]=Ke;Le=sa.depth_mask;Le!==y.depth_mask&&(ga.depthMask(Le),y.depth_mask=
Le);Ie=mb[0];Ld=mb[1];Wd=mb[2];be=mb[3];if(Ie!==ca[0]||Ld!==ca[1]||Wd!==ca[2]||be!==ca[3])ga.colorMask(Ie,Ld,Wd,be),ca[0]=Ie,ca[1]=Ld,ca[2]=Wd,ca[3]=be;ee=sa.cull_enable;ee!==y.cull_enable&&(ee?ga.enable(2884):ga.disable(2884),y.cull_enable=ee);Me=sa.cull_face;Me!==y.cull_face&&(ga.cullFace(Me),y.cull_face=Me);Id=sa.frontFace;Id!==y.frontFace&&(ga.frontFace(Id),y.frontFace=Id);Td=sa.lineWidth;Td!==y.lineWidth&&(ga.lineWidth(Td),y.lineWidth=Td);De=sa.polygonOffset_enable;De!==y.polygonOffset_enable&&
(De?ga.enable(32823):ga.disable(32823),y.polygonOffset_enable=De);Ne=Ga[0];hf=Ga[1];if(Ne!==ac[0]||hf!==ac[1])ga.polygonOffset(Ne,hf),ac[0]=Ne,ac[1]=hf;bf=sa.sample_alpha;bf!==y.sample_alpha&&(bf?ga.enable(32926):ga.disable(32926),y.sample_alpha=bf);Te=sa.sample_enable;Te!==y.sample_enable&&(Te?ga.enable(32928):ga.disable(32928),y.sample_enable=Te);Pe=Sb[0];af=Sb[1];if(Pe!==ab[0]||af!==ab[1])ga.sampleCoverage(Pe,af),ab[0]=Pe,ab[1]=af;Ye=sa.stencil_mask;Ye!==y.stencil_mask&&(ga.stencilMask(Ye),y.stencil_mask=
Ye);Ue=Vd[0];Ve=Vd[1];Ud=Vd[2];if(Ue!==ze[0]||Ve!==ze[1]||Ud!==ze[2])ga.stencilFunc(Ue,Ve,Ud),ze[0]=Ue,ze[1]=Ve,ze[2]=Ud;ae=oe[0];We=oe[1];jf=oe[2];nf=oe[3];if(ae!==ie[0]||We!==ie[1]||jf!==ie[2]||nf!==ie[3])ga.stencilOpSeparate(ae,We,jf,nf),ie[0]=ae,ie[1]=We,ie[2]=jf,ie[3]=nf;ef=zd[0];kf=zd[1];lf=zd[2];mf=zd[3];if(ef!==Qd[0]||kf!==Qd[1]||lf!==Qd[2]||mf!==Qd[3])ga.stencilOpSeparate(ef,kf,lf,mf),Qd[0]=ef,Qd[1]=kf,Qd[2]=lf,Qd[3]=mf}g=a.viewport;f=g.x|0;h=g.y|0;k="width"in g?g.width|0:p.framebufferWidth-
f;b="height"in g?g.height|0:p.framebufferHeight-h;t=p.viewportWidth;p.viewportWidth=k;w=p.viewportHeight;p.viewportHeight=b;ga.viewport(f,h,k,b);Xd[0]=f;Xd[1]=h;Xd[2]=k;Xd[3]=b;ga.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ga.enable(3042);y.blend_enable=!0;ga.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;ga.disable(2929);y.depth_enable=!1;A=a.viewport;v=A.x|0;Ca=A.y|0;P="width"in A?A.width|0:p.framebufferWidth-v;C="height"in A?A.height|0:p.framebufferHeight-Ca;ga.scissor(v,
Ca,P,C);re[0]=v;re[1]=Ca;re[2]=P;re[3]=C;ga.enable(3089);y.scissor_enable=!0;ga.disable(2960);y.stencil_enable=!1;if(E=y.profile)ra=performance.now(),da.count++;ga.useProgram(K.program);O=Bd.angle_instanced_arrays;xa.setVAO(null);D=L.call(this,p,a,0);I=!1;M=null;z=0;N=!1;R=x=0;S=1;Fa=0;T=5126;ba=ea=X=V=0;H(D)?(I=!0,M=r.createStream(34962,D),T=M.dtype):(M=r.getBuffer(D))?T=M.dtype:"constant"in D?(S=2,"number"===typeof D.constant?(X=D.constant,ea=ba=V=0):(X=0<D.constant.length?D.constant[0]:0,ea=1<
D.constant.length?D.constant[1]:0,ba=2<D.constant.length?D.constant[2]:0,V=3<D.constant.length?D.constant[3]:0)):(M=H(D.buffer)?r.createStream(34962,D.buffer):r.getBuffer(D.buffer),T="type"in D?fe[D.type]:M.dtype,N=!!D.normalized,R=D.size|0,x=D.offset|0,Fa=D.stride|0,z=D.divisor|0);ia=ya.location;Y=Ta[ia];if(1===S){Y.buffer||ga.enableVertexAttribArray(ia);ja=R||1;if(Y.type!==T||Y.size!==ja||Y.buffer!==M||Y.normalized!==N||Y.offset!==x||Y.stride!==Fa)ga.bindBuffer(34962,M.buffer),ga.vertexAttribPointer(ia,
ja,T,N,Fa,x),Y.type=T,Y.size=ja,Y.buffer=M,Y.normalized=N,Y.offset=x,Y.stride=Fa;Y.divisor!==z&&(O.vertexAttribDivisorANGLE(ia,z),Y.divisor=z)}else if(Y.buffer&&(ga.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ba||Y.w!==V)ga.vertexAttrib4f(ia,X,ea,ba,V),Y.x=X,Y.y=ea,Y.z=ba,Y.w=V;ta=e.call(this,p,a,0);Z=!1;Cc=null;Ia=0;bc=!1;eb=yb=0;Nb=1;cb=0;ob=5126;Jb=Ib=Dd=Ua=0;H(ta)?(Z=!0,Cc=r.createStream(34962,ta),ob=Cc.dtype):(Cc=r.getBuffer(ta))?ob=Cc.dtype:"constant"in ta?(Nb=2,"number"===
typeof ta.constant?(Dd=ta.constant,Ib=Jb=Ua=0):(Dd=0<ta.constant.length?ta.constant[0]:0,Ib=1<ta.constant.length?ta.constant[1]:0,Jb=2<ta.constant.length?ta.constant[2]:0,Ua=3<ta.constant.length?ta.constant[3]:0)):(Cc=H(ta.buffer)?r.createStream(34962,ta.buffer):r.getBuffer(ta.buffer),ob="type"in ta?fe[ta.type]:Cc.dtype,bc=!!ta.normalized,eb=ta.size|0,yb=ta.offset|0,cb=ta.stride|0,Ia=ta.divisor|0);rc=na.location;Ob=Ta[rc];if(1===Nb){Ob.buffer||ga.enableVertexAttribArray(rc);jb=eb||1;if(Ob.type!==
ob||Ob.size!==jb||Ob.buffer!==Cc||Ob.normalized!==bc||Ob.offset!==yb||Ob.stride!==cb)ga.bindBuffer(34962,Cc.buffer),ga.vertexAttribPointer(rc,jb,ob,bc,cb,yb),Ob.type=ob,Ob.size=jb,Ob.buffer=Cc,Ob.normalized=bc,Ob.offset=yb,Ob.stride=cb;Ob.divisor!==Ia&&(O.vertexAttribDivisorANGLE(rc,Ia),Ob.divisor=Ia)}else if(Ob.buffer&&(ga.disableVertexAttribArray(rc),Ob.buffer=null),Ob.x!==Dd||Ob.y!==Ib||Ob.z!==Jb||Ob.w!==Ua)ga.vertexAttrib4f(rc,Dd,Ib,Jb,Ua),Ob.x=Dd,Ob.y=Ib,Ob.z=Jb,Ob.w=Ua;Gb=l.call(this,p,a,0);
Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ra=1;Ub=0;zb=5126;Ha=pb=ib=cc=0;H(Gb)?(Db=!0,wb=r.createStream(34962,Gb),zb=wb.dtype):(wb=r.getBuffer(Gb))?zb=wb.dtype:"constant"in Gb?(Ra=2,"number"===typeof Gb.constant?(ib=Gb.constant,pb=Ha=cc=0):(ib=0<Gb.constant.length?Gb.constant[0]:0,pb=1<Gb.constant.length?Gb.constant[1]:0,Ha=2<Gb.constant.length?Gb.constant[2]:0,cc=3<Gb.constant.length?Gb.constant[3]:0)):(wb=H(Gb.buffer)?r.createStream(34962,Gb.buffer):r.getBuffer(Gb.buffer),zb="type"in Gb?fe[Gb.type]:wb.dtype,
Yb=!!Gb.normalized,qb=Gb.size|0,Pb=Gb.offset|0,Ub=Gb.stride|0,hb=Gb.divisor|0);rb=Ja.location;Ka=Ta[rb];if(1===Ra){Ka.buffer||ga.enableVertexAttribArray(rb);fb=qb||1;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)ga.bindBuffer(34962,wb.buffer),ga.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(O.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&
(ga.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==cc)ga.vertexAttrib4f(rb,ib,pb,Ha,cc),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=cc;gb=q.call(this,p,a,0);La=!1;kb=null;Va=0;tb=!1;Oa=sb=0;tc=1;Qa=0;Kb=5126;Ya=Ed=Ma=Eb=0;H(gb)?(La=!0,kb=r.createStream(34962,gb),Kb=kb.dtype):(kb=r.getBuffer(gb))?Kb=kb.dtype:"constant"in gb?(tc=2,"number"===typeof gb.constant?(Ma=gb.constant,Ed=Ya=Eb=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Ed=1<gb.constant.length?gb.constant[1]:0,Ya=2<gb.constant.length?
gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(kb=H(gb.buffer)?r.createStream(34962,gb.buffer):r.getBuffer(gb.buffer),Kb="type"in gb?fe[gb.type]:kb.dtype,tb=!!gb.normalized,Oa=gb.size|0,sb=gb.offset|0,Qa=gb.stride|0,Va=gb.divisor|0);Lb=Xa.location;Mb=Ta[Lb];if(1===tc){Mb.buffer||ga.enableVertexAttribArray(Lb);lb=Oa||1;if(Mb.type!==Kb||Mb.size!==lb||Mb.buffer!==kb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Qa)ga.bindBuffer(34962,kb.buffer),ga.vertexAttribPointer(Lb,lb,Kb,tb,Qa,
sb),Mb.type=Kb,Mb.size=lb,Mb.buffer=kb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Qa;Mb.divisor!==Va&&(O.vertexAttribDivisorANGLE(Lb,Va),Mb.divisor=Va)}else if(Mb.buffer&&(ga.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Ma||Mb.y!==Ed||Mb.z!==Ya||Mb.w!==Eb)ga.vertexAttrib4f(Lb,Ma,Ed,Ya,Eb),Mb.x=Ma,Mb.y=Ed,Mb.z=Ya,Mb.w=Eb;Na=c.call(this,p,a,0);Zb=!1;Pa=null;ub=0;vb=!1;nb=Sa=0;hc=1;Ac=0;vc=5126;Wa=qd=kc=db=0;H(Na)?(Zb=!0,Pa=r.createStream(34962,Na),vc=Pa.dtype):(Pa=r.getBuffer(Na))?vc=Pa.dtype:"constant"in
Na?(hc=2,"number"===typeof Na.constant?(kc=Na.constant,qd=Wa=db=0):(kc=0<Na.constant.length?Na.constant[0]:0,qd=1<Na.constant.length?Na.constant[1]:0,Wa=2<Na.constant.length?Na.constant[2]:0,db=3<Na.constant.length?Na.constant[3]:0)):(Pa=H(Na.buffer)?r.createStream(34962,Na.buffer):r.getBuffer(Na.buffer),vc="type"in Na?fe[Na.type]:Pa.dtype,vb=!!Na.normalized,nb=Na.size|0,Sa=Na.offset|0,Ac=Na.stride|0,ub=Na.divisor|0);Mc=Ba.location;Ab=Ta[Mc];if(1===hc){Ab.buffer||ga.enableVertexAttribArray(Mc);Za=
nb||1;if(Ab.type!==vc||Ab.size!==Za||Ab.buffer!==Pa||Ab.normalized!==vb||Ab.offset!==Sa||Ab.stride!==Ac)ga.bindBuffer(34962,Pa.buffer),ga.vertexAttribPointer(Mc,Za,vc,vb,Ac,Sa),Ab.type=vc,Ab.size=Za,Ab.buffer=Pa,Ab.normalized=vb,Ab.offset=Sa,Ab.stride=Ac;Ab.divisor!==ub&&(O.vertexAttribDivisorANGLE(Mc,ub),Ab.divisor=ub)}else if(Ab.buffer&&(ga.disableVertexAttribArray(Mc),Ab.buffer=null),Ab.x!==kc||Ab.y!==qd||Ab.z!==Wa||Ab.w!==db)ga.vertexAttrib4f(Mc,kc,qd,Wa,db),Ab.x=kc,Ab.y=qd,Ab.z=Wa,Ab.w=db;Vb=
F.call(this,p,a,0);uc=!1;Wb=null;Qb=0;Kc=!1;pe=Rb=0;Fc=1;sd=0;Nc=5126;wc=oc=td=Yc=0;H(Vb)?(uc=!0,Wb=r.createStream(34962,Vb),Nc=Wb.dtype):(Wb=r.getBuffer(Vb))?Nc=Wb.dtype:"constant"in Vb?(Fc=2,"number"===typeof Vb.constant?(td=Vb.constant,oc=wc=Yc=0):(td=0<Vb.constant.length?Vb.constant[0]:0,oc=1<Vb.constant.length?Vb.constant[1]:0,wc=2<Vb.constant.length?Vb.constant[2]:0,Yc=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=H(Vb.buffer)?r.createStream(34962,Vb.buffer):r.getBuffer(Vb.buffer),Nc="type"in
Vb?fe[Vb.type]:Wb.dtype,Kc=!!Vb.normalized,pe=Vb.size|0,Rb=Vb.offset|0,sd=Vb.stride|0,Qb=Vb.divisor|0);ic=pa.location;$a=Ta[ic];if(1===Fc){$a.buffer||ga.enableVertexAttribArray(ic);sc=pe||1;if($a.type!==Nc||$a.size!==sc||$a.buffer!==Wb||$a.normalized!==Kc||$a.offset!==Rb||$a.stride!==sd)ga.bindBuffer(34962,Wb.buffer),ga.vertexAttribPointer(ic,sc,Nc,Kc,sd,Rb),$a.type=Nc,$a.size=sc,$a.buffer=Wb,$a.normalized=Kc,$a.offset=Rb,$a.stride=sd;$a.divisor!==Qb&&(O.vertexAttribDivisorANGLE(ic,Qb),$a.divisor=
Qb)}else if($a.buffer&&(ga.disableVertexAttribArray(ic),$a.buffer=null),$a.x!==td||$a.y!==oc||$a.z!==wc||$a.w!==Yc)ga.vertexAttrib4f(ic,td,oc,wc,Yc),$a.x=td,$a.y=oc,$a.z=wc,$a.w=Yc;Tb=B.call(this,p,a,0);Xb=!1;ec=null;jc=0;yc=!1;cd=Bc=0;Qc=1;Rc=0;Sc=5126;$c=dd=od=Zc=0;H(Tb)?(Xb=!0,ec=r.createStream(34962,Tb),Sc=ec.dtype):(ec=r.getBuffer(Tb))?Sc=ec.dtype:"constant"in Tb?(Qc=2,"number"===typeof Tb.constant?(od=Tb.constant,dd=$c=Zc=0):(od=0<Tb.constant.length?Tb.constant[0]:0,dd=1<Tb.constant.length?
Tb.constant[1]:0,$c=2<Tb.constant.length?Tb.constant[2]:0,Zc=3<Tb.constant.length?Tb.constant[3]:0)):(ec=H(Tb.buffer)?r.createStream(34962,Tb.buffer):r.getBuffer(Tb.buffer),Sc="type"in Tb?fe[Tb.type]:ec.dtype,yc=!!Tb.normalized,cd=Tb.size|0,Bc=Tb.offset|0,Rc=Tb.stride|0,jc=Tb.divisor|0);lc=m.location;dc=Ta[lc];if(1===Qc){dc.buffer||ga.enableVertexAttribArray(lc);ad=cd||4;if(dc.type!==Sc||dc.size!==ad||dc.buffer!==ec||dc.normalized!==yc||dc.offset!==Bc||dc.stride!==Rc)ga.bindBuffer(34962,ec.buffer),
ga.vertexAttribPointer(lc,ad,Sc,yc,Rc,Bc),dc.type=Sc,dc.size=ad,dc.buffer=ec,dc.normalized=yc,dc.offset=Bc,dc.stride=Rc;dc.divisor!==jc&&(O.vertexAttribDivisorANGLE(lc,jc),dc.divisor=jc)}else if(dc.buffer&&(ga.disableVertexAttribArray(lc),dc.buffer=null),dc.x!==od||dc.y!==dd||dc.z!==$c||dc.w!==Zc)ga.vertexAttrib4f(lc,od,dd,$c,Zc),dc.x=od,dc.y=dd,dc.z=$c,dc.w=Zc;Uc=G.call(this,p,a,0);ed=!1;zc=null;id=0;Nd=!1;ue=wd=0;jd=1;Ce=0;Od=5126;Jd=$d=ce=ge=0;H(Uc)?(ed=!0,zc=r.createStream(34962,Uc),Od=zc.dtype):
(zc=r.getBuffer(Uc))?Od=zc.dtype:"constant"in Uc?(jd=2,"number"===typeof Uc.constant?(ce=Uc.constant,$d=Jd=ge=0):(ce=0<Uc.constant.length?Uc.constant[0]:0,$d=1<Uc.constant.length?Uc.constant[1]:0,Jd=2<Uc.constant.length?Uc.constant[2]:0,ge=3<Uc.constant.length?Uc.constant[3]:0)):(zc=H(Uc.buffer)?r.createStream(34962,Uc.buffer):r.getBuffer(Uc.buffer),Od="type"in Uc?fe[Uc.type]:zc.dtype,Nd=!!Uc.normalized,ue=Uc.size|0,wd=Uc.offset|0,Ce=Uc.stride|0,id=Uc.divisor|0);Hd=Da.location;md=Ta[Hd];if(1===jd){md.buffer||
ga.enableVertexAttribArray(Hd);Tc=ue||4;if(md.type!==Od||md.size!==Tc||md.buffer!==zc||md.normalized!==Nd||md.offset!==wd||md.stride!==Ce)ga.bindBuffer(34962,zc.buffer),ga.vertexAttribPointer(Hd,Tc,Od,Nd,Ce,wd),md.type=Od,md.size=Tc,md.buffer=zc,md.normalized=Nd,md.offset=wd,md.stride=Ce;md.divisor!==id&&(O.vertexAttribDivisorANGLE(Hd,id),md.divisor=id)}else if(md.buffer&&(ga.disableVertexAttribArray(Hd),md.buffer=null),md.x!==ce||md.y!==$d||md.z!==Jd||md.w!==ge)ga.vertexAttrib4f(Hd,ce,$d,Jd,ge),
md.x=ce,md.y=$d,md.z=Jd,md.w=ge;ud=U.call(this,p,a,0);rd=!1;kd=null;vd=0;Cd=!1;je=Fd=0;ye=1;Fe=0;le=5126;de=ve=he=ke=0;H(ud)?(rd=!0,kd=r.createStream(34962,ud),le=kd.dtype):(kd=r.getBuffer(ud))?le=kd.dtype:"constant"in ud?(ye=2,"number"===typeof ud.constant?(he=ud.constant,ve=de=ke=0):(he=0<ud.constant.length?ud.constant[0]:0,ve=1<ud.constant.length?ud.constant[1]:0,de=2<ud.constant.length?ud.constant[2]:0,ke=3<ud.constant.length?ud.constant[3]:0)):(kd=H(ud.buffer)?r.createStream(34962,ud.buffer):
r.getBuffer(ud.buffer),le="type"in ud?fe[ud.type]:kd.dtype,Cd=!!ud.normalized,je=ud.size|0,Fd=ud.offset|0,Fe=ud.stride|0,vd=ud.divisor|0);me=aa.location;Oc=Ta[me];if(1===ye){Oc.buffer||ga.enableVertexAttribArray(me);gd=je||1;if(Oc.type!==le||Oc.size!==gd||Oc.buffer!==kd||Oc.normalized!==Cd||Oc.offset!==Fd||Oc.stride!==Fe)ga.bindBuffer(34962,kd.buffer),ga.vertexAttribPointer(me,gd,le,Cd,Fe,Fd),Oc.type=le,Oc.size=gd,Oc.buffer=kd,Oc.normalized=Cd,Oc.offset=Fd,Oc.stride=Fe;Oc.divisor!==vd&&(O.vertexAttribDivisorANGLE(me,
vd),Oc.divisor=vd)}else if(Oc.buffer&&(ga.disableVertexAttribArray(me),Oc.buffer=null),Oc.x!==he||Oc.y!==ve||Oc.z!==de||Oc.w!==ke)ga.vertexAttrib4f(me,he,ve,de,ke),Oc.x=he,Oc.y=ve,Oc.z=de,Oc.w=ke;ga.uniform1i(J.location,!1);ga.uniform1f(Aa.location,p.pixelRatio);we=n.call(this,p,a,0);ga.uniform2f(ma.location,we[0],we[1]);qe=a.scale;ga.uniform2f(wa.location,qe[0],qe[1]);Kd=a.scaleFract;ga.uniform2f(fa.location,Kd[0],Kd[1]);Pd=a.translate;ga.uniform2f(ka.location,Pd[0],Pd[1]);Rd=a.translateFract;ga.uniform2f(oa.location,
Rd[0],Rd[1]);ga.uniform1f(Q.location,a.opacity);ga.uniform1i(qa.location,u.bind());Sd=a.elements;ne=null;(ne=(Ge=H(Sd))?Ea.createStream(Sd):Ea.getElements(Sd))&&ga.bindBuffer(34963,ne.buffer.buffer);Be=a.offset;if(se=a.count)Re=va.instances,0<Re?ne?O.drawElementsInstancedANGLE(0,se,ne.type,Be<<(ne.type-5121>>1),Re):O.drawArraysInstancedANGLE(0,Be,se,Re):0>Re&&(ne?ga.drawElements(0,se,ne.type,Be<<(ne.type-5121>>1)):ga.drawArrays(0,Be,se)),y.dirty=!0,xa.setVAO(null),p.viewportWidth=t,p.viewportHeight=
w,E&&(da.cpuTime+=performance.now()-ra),I&&r.destroyStream(M),Z&&r.destroyStream(Cc),Db&&r.destroyStream(wb),La&&r.destroyStream(kb),Zb&&r.destroyStream(Pa),uc&&r.destroyStream(Wb),Xb&&r.destroyStream(ec),ed&&r.destroyStream(zc),rd&&r.destroyStream(kd),u.unbind(),Ge&&Ea.destroyStream(ne)},scope:function(c,g,l){var b,m,q,A,e,na,J,P,C,Q,O,fa,M,ga,L,Xa,u,Ja,la,n,N,W,B,aa,xa,K,wa,qa,F,Da,G,U,ca,ka,V,ea,Ta,oa,ta,Ba,pa,ya,ja,ma,ua,Hb,Aa,Cc,Z,za,Ga,mb,Bd,Sb,ha,Ra,$b,ac,Vd,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,
sb,Oa,tc,Qa,Kb,Eb,Ma,xd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,Qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,Xd,Fc,re,Nc,Yc,ze,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,ab,dd,$c,lc,dc,ad,Uc,ed,zc,id,ie,oe,zd,jd,Ce,Od,ge,ce,$d,Jd,Hd,md,Tc,ud,rd,kd,vd,Cd,Fd,je,ye,Fe,le,ke,he,ve,de,me,Oc,gd,we,qe,Kd,Pd,Rd,Sd,ne,Ge,Be,se,Re,Se,Oe,xe,He,Je,Ke,Le,Ie,Ld,Wd,be,ee,Me,Id,Td,De,Ne,pg,bf,Te,Pe,af,Ye,Ue,Ve,Ud,ae,We,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,Ee,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,
Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;b=c.viewport;m=b.x|0;q=b.y|0;A="width"in b?b.width|0:p.framebufferWidth-m;e="height"in b?b.height|0:p.framebufferHeight-q;na=p.viewportWidth;p.viewportWidth=A;J=p.viewportHeight;p.viewportHeight=e;P=Ed[0];Ed[0]=m;C=Ed[1];Ed[1]=q;Q=Ed[2];Ed[2]=A;O=Ed[3];Ed[3]=e;fa=Fa[0];Fa[0]=0;M=Fa[1];Fa[1]=0;ga=Fa[2];Fa[2]=0;L=Fa[3];Fa[3]=
1;Xa=sa.blend_enable;sa.blend_enable=!0;u=Ia[0];Ia[0]=770;Ja=Ia[1];Ia[1]=771;la=Ia[2];Ia[2]=773;n=Ia[3];Ia[3]=1;N=sa.depth_enable;sa.depth_enable=!1;W=c.viewport;B=W.x|0;aa=W.y|0;xa="width"in W?W.width|0:p.framebufferWidth-B;K="height"in W?W.height|0:p.framebufferHeight-aa;wa=Dd[0];Dd[0]=B;qa=Dd[1];Dd[1]=aa;F=Dd[2];Dd[2]=xa;Da=Dd[3];Dd[3]=K;G=sa.scissor_enable;sa.scissor_enable=!0;U=sa.stencil_enable;sa.stencil_enable=!1;if(ca=y.profile)ka=performance.now(),da.count++;V=c.elements;ea=null;ea=(Ta=
H(V))?Ea.createStream(V):Ea.getElements(V);oa=va.elements;va.elements=ea;ta=c.offset;Ba=va.offset;va.offset=ta;pa=c.count;ya=va.count;va.count=pa;ja=va.primitive;va.primitive=0;ma=ra[45];ra[45]=!1;ua=c.markerTexture;Hb=ra[48];ra[48]=ua;Aa=c.opacity;Cc=ra[10];ra[10]=Aa;Z=x.call(this,p,c,l);za=ra[46];ra[46]=Z;Ga=ra[47];ra[47]=ba;mb=p.pixelRatio;Bd=ra[34];ra[34]=mb;Sb=c.scale;ha=ra[6];ra[6]=Sb;Ra=c.scaleFract;$b=ra[7];ra[7]=Ra;ac=c.translate;Vd=ra[8];ra[8]=ac;ib=c.translateFract;pb=ra[9];ra[9]=ib;Ha=
v.call(this,p,c,l);rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;H(Ha)?(rb=!0,Ka=r.createStream(34962,Ha),sb=Ka.dtype):(Ka=r.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Va=2,"number"===typeof Ha.constant?(tc=Ha.constant,Qa=Kb=Oa=0):(tc=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=H(Ha.buffer)?r.createStream(34962,Ha.buffer):r.getBuffer(Ha.buffer),sb="type"in
Ha?fe[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=T.buffer;T.buffer=Ka;Ma=T.divisor;T.divisor=fb;xd=T.normalized;T.normalized=gb;Ya=T.offset;T.offset=La;Lb=T.size;T.size=kb;Mb=T.state;T.state=Va;lb=T.stride;T.stride=tb;Na=T.type;T.type=sb;Zb=T.w;T.w=Oa;Pa=T.x;T.x=tc;ub=T.y;T.y=Qa;vb=T.z;T.z=Kb;Sa=z.call(this,p,c,l);nb=!1;hc=null;Ac=0;vc=!1;kc=db=0;Qd=1;Wa=0;Mc=5126;uc=Vb=Za=Ab=0;H(Sa)?(nb=!0,hc=r.createStream(34962,Sa),Mc=hc.dtype):(hc=r.getBuffer(Sa))?
Mc=hc.dtype:"constant"in Sa?(Qd=2,"number"===typeof Sa.constant?(Za=Sa.constant,Vb=uc=Ab=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(hc=H(Sa.buffer)?r.createStream(34962,Sa.buffer):r.getBuffer(Sa.buffer),Mc="type"in Sa?fe[Sa.type]:hc.dtype,vc=!!Sa.normalized,kc=Sa.size|0,db=Sa.offset|0,Wa=Sa.stride|0,Ac=Sa.divisor|0);Wb=R.buffer;R.buffer=hc;Qb=R.divisor;R.divisor=Ac;Kc=R.normalized;
R.normalized=vc;Rb=R.offset;R.offset=db;Xd=R.size;R.size=kc;Fc=R.state;R.state=Qd;re=R.stride;R.stride=Wa;Nc=R.type;R.type=Mc;Yc=R.w;R.w=Ab;ze=R.x;R.x=Za;oc=R.y;R.y=Vb;wc=R.z;R.z=uc;ic=ia.call(this,p,c,l);$a=!1;sc=null;Tb=0;Xb=!1;jc=ec=0;yc=1;Bc=0;cd=5126;Zc=Sc=Rc=Qc=0;H(ic)?($a=!0,sc=r.createStream(34962,ic),cd=sc.dtype):(sc=r.getBuffer(ic))?cd=sc.dtype:"constant"in ic?(yc=2,"number"===typeof ic.constant?(Rc=ic.constant,Sc=Zc=Qc=0):(Rc=0<ic.constant.length?ic.constant[0]:0,Sc=1<ic.constant.length?
ic.constant[1]:0,Zc=2<ic.constant.length?ic.constant[2]:0,Qc=3<ic.constant.length?ic.constant[3]:0)):(sc=H(ic.buffer)?r.createStream(34962,ic.buffer):r.getBuffer(ic.buffer),cd="type"in ic?fe[ic.type]:sc.dtype,Xb=!!ic.normalized,jc=ic.size|0,ec=ic.offset|0,Bc=ic.stride|0,Tb=ic.divisor|0);ab=h.buffer;h.buffer=sc;dd=h.divisor;h.divisor=Tb;$c=h.normalized;h.normalized=Xb;lc=h.offset;h.offset=ec;dc=h.size;h.size=jc;ad=h.state;h.state=yc;Uc=h.stride;h.stride=Bc;ed=h.type;h.type=cd;zc=h.w;h.w=Qc;id=h.x;
h.x=Rc;ie=h.y;h.y=Sc;oe=h.z;h.z=Zc;zd=t.call(this,p,c,l);jd=!1;Ce=null;Od=0;ge=!1;$d=ce=0;Jd=1;Hd=0;md=5126;kd=rd=ud=Tc=0;H(zd)?(jd=!0,Ce=r.createStream(34962,zd),md=Ce.dtype):(Ce=r.getBuffer(zd))?md=Ce.dtype:"constant"in zd?(Jd=2,"number"===typeof zd.constant?(ud=zd.constant,rd=kd=Tc=0):(ud=0<zd.constant.length?zd.constant[0]:0,rd=1<zd.constant.length?zd.constant[1]:0,kd=2<zd.constant.length?zd.constant[2]:0,Tc=3<zd.constant.length?zd.constant[3]:0)):(Ce=H(zd.buffer)?r.createStream(34962,zd.buffer):
r.getBuffer(zd.buffer),md="type"in zd?fe[zd.type]:Ce.dtype,ge=!!zd.normalized,$d=zd.size|0,ce=zd.offset|0,Hd=zd.stride|0,Od=zd.divisor|0);vd=S.buffer;S.buffer=Ce;Cd=S.divisor;S.divisor=Od;Fd=S.normalized;S.normalized=ge;je=S.offset;S.offset=ce;ye=S.size;S.size=$d;Fe=S.state;S.state=Jd;le=S.stride;S.stride=Hd;ke=S.type;S.type=md;he=S.w;S.w=Tc;ve=S.x;S.x=ud;de=S.y;S.y=rd;me=S.z;S.z=kd;Oc=k.call(this,p,c,l);gd=!1;we=null;qe=0;Kd=!1;Rd=Pd=0;Sd=1;ne=0;Ge=5126;Se=Re=se=Be=0;H(Oc)?(gd=!0,we=r.createStream(34962,
Oc),Ge=we.dtype):(we=r.getBuffer(Oc))?Ge=we.dtype:"constant"in Oc?(Sd=2,"number"===typeof Oc.constant?(se=Oc.constant,Re=Se=Be=0):(se=0<Oc.constant.length?Oc.constant[0]:0,Re=1<Oc.constant.length?Oc.constant[1]:0,Se=2<Oc.constant.length?Oc.constant[2]:0,Be=3<Oc.constant.length?Oc.constant[3]:0)):(we=H(Oc.buffer)?r.createStream(34962,Oc.buffer):r.getBuffer(Oc.buffer),Ge="type"in Oc?fe[Oc.type]:we.dtype,Kd=!!Oc.normalized,Rd=Oc.size|0,Pd=Oc.offset|0,ne=Oc.stride|0,qe=Oc.divisor|0);Oe=X.buffer;X.buffer=
we;xe=X.divisor;X.divisor=qe;He=X.normalized;X.normalized=Kd;Je=X.offset;X.offset=Pd;Ke=X.size;X.size=Rd;Le=X.state;X.state=Sd;Ie=X.stride;X.stride=ne;Ld=X.type;X.type=Ge;Wd=X.w;X.w=Be;be=X.x;X.x=se;ee=X.y;X.y=Re;Me=X.z;X.z=Se;Id=f.call(this,p,c,l);Td=!1;De=null;Ne=0;pg=!1;Te=bf=0;Pe=1;af=0;Ye=5126;ae=Ud=Ve=Ue=0;H(Id)?(Td=!0,De=r.createStream(34962,Id),Ye=De.dtype):(De=r.getBuffer(Id))?Ye=De.dtype:"constant"in Id?(Pe=2,"number"===typeof Id.constant?(Ve=Id.constant,Ud=ae=Ue=0):(Ve=0<Id.constant.length?
Id.constant[0]:0,Ud=1<Id.constant.length?Id.constant[1]:0,ae=2<Id.constant.length?Id.constant[2]:0,Ue=3<Id.constant.length?Id.constant[3]:0)):(De=H(Id.buffer)?r.createStream(34962,Id.buffer):r.getBuffer(Id.buffer),Ye="type"in Id?fe[Id.type]:De.dtype,pg=!!Id.normalized,Te=Id.size|0,bf=Id.offset|0,af=Id.stride|0,Ne=Id.divisor|0);We=w.buffer;w.buffer=De;jf=w.divisor;w.divisor=Ne;nf=w.normalized;w.normalized=pg;ef=w.offset;w.offset=bf;kf=w.size;w.size=Te;lf=w.state;w.state=Pe;mf=w.stride;w.stride=af;
rf=w.type;w.type=Ye;of=w.w;w.w=Ue;sf=w.x;w.x=Ve;Bf=w.y;w.y=Ud;Cf=w.z;w.z=ae;Qe=Y.call(this,p,c,l);Ee=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;H(Qe)?(Ee=!0,pf=r.createStream(34962,Qe),wf=pf.dtype):(pf=r.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(pf=
H(Qe.buffer)?r.createStream(34962,Qe.buffer):r.getBuffer(Qe.buffer),wf="type"in Qe?fe[Qe.type]:pf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=D.buffer;D.buffer=pf;Jf=D.divisor;D.divisor=qf;Kf=D.normalized;D.normalized=Df;Lf=D.offset;D.offset=Gf;tf=D.size;D.size=Af;Qf=D.state;D.state=Ef;Hf=D.stride;D.stride=Ff;uf=D.type;D.type=wf;cg=D.w;D.w=xf;Rf=D.x;D.x=vf;Sf=D.y;D.y=yf;qg=D.z;D.z=zf;ff=E.call(this,p,c,l);cf=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;
Yf=Xf=Wf=Tf=0;H(ff)?(cf=!0,Mf=r.createStream(34962,ff),Vf=Mf.dtype):(Mf=r.getBuffer(ff))?Vf=Mf.dtype:"constant"in ff?(gg=2,"number"===typeof ff.constant?(Wf=ff.constant,Xf=Yf=Tf=0):(Wf=0<ff.constant.length?ff.constant[0]:0,Xf=1<ff.constant.length?ff.constant[1]:0,Yf=2<ff.constant.length?ff.constant[2]:0,Tf=3<ff.constant.length?ff.constant[3]:0)):(Mf=H(ff.buffer)?r.createStream(34962,ff.buffer):r.getBuffer(ff.buffer),Vf="type"in ff?fe[ff.type]:Mf.dtype,dg=!!ff.normalized,fg=ff.size|0,eg=ff.offset|
0,hg=ff.stride|0,Nf=ff.divisor|0);ig=d.buffer;d.buffer=Mf;rg=d.divisor;d.divisor=Nf;sg=d.normalized;d.normalized=dg;tg=d.offset;d.offset=eg;ug=d.size;d.size=fg;vg=d.state;d.state=gg;wg=d.stride;d.stride=hg;xg=d.type;d.type=Vf;yg=d.w;d.w=Tf;zg=d.x;d.x=Wf;Ag=d.y;d.y=Xf;Bg=d.z;d.z=Yf;gf=I.call(this,p,c,l);df=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;H(gf)?(df=!0,Of=r.createStream(34962,gf),Zf=Of.dtype):(Of=r.getBuffer(gf))?Zf=Of.dtype:"constant"in gf?(mg=2,"number"===typeof gf.constant?
($f=gf.constant,ag=bg=Uf=0):($f=0<gf.constant.length?gf.constant[0]:0,ag=1<gf.constant.length?gf.constant[1]:0,bg=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Of=H(gf.buffer)?r.createStream(34962,gf.buffer):r.getBuffer(gf.buffer),Zf="type"in gf?fe[gf.type]:Of.dtype,jg=!!gf.normalized,lg=gf.size|0,kg=gf.offset|0,ng=gf.stride|0,Pf=gf.divisor|0);og=a.buffer;a.buffer=Of;Cg=a.divisor;a.divisor=Pf;Dg=a.normalized;a.normalized=jg;Eg=a.offset;a.offset=kg;Fg=a.size;a.size=
lg;Gg=a.state;a.state=mg;Hg=a.stride;a.stride=ng;Ig=a.type;a.type=Zf;Jg=a.w;a.w=Uf;Kg=a.x;a.x=$f;Lg=a.y;a.y=ag;Mg=a.z;a.z=bg;Ng=Ca.vert;Ca.vert=59;Og=Ca.frag;Ca.frag=58;y.dirty=!0;g(p,c,l);p.viewportWidth=na;p.viewportHeight=J;Ed[0]=P;Ed[1]=C;Ed[2]=Q;Ed[3]=O;Fa[0]=fa;Fa[1]=M;Fa[2]=ga;Fa[3]=L;sa.blend_enable=Xa;Ia[0]=u;Ia[1]=Ja;Ia[2]=la;Ia[3]=n;sa.depth_enable=N;Dd[0]=wa;Dd[1]=qa;Dd[2]=F;Dd[3]=Da;sa.scissor_enable=G;sa.stencil_enable=U;ca&&(da.cpuTime+=performance.now()-ka);Ta&&Ea.destroyStream(ea);
va.elements=oa;va.offset=Ba;va.count=ya;va.primitive=ja;ra[45]=ma;ra[48]=Hb;ra[10]=Cc;ra[46]=za;ra[47]=Ga;ra[34]=Bd;ra[6]=ha;ra[7]=$b;ra[8]=Vd;ra[9]=pb;rb&&r.destroyStream(Ka);T.buffer=Eb;T.divisor=Ma;T.normalized=xd;T.offset=Ya;T.size=Lb;T.state=Mb;T.stride=lb;T.type=Na;T.w=Zb;T.x=Pa;T.y=ub;T.z=vb;nb&&r.destroyStream(hc);R.buffer=Wb;R.divisor=Qb;R.normalized=Kc;R.offset=Rb;R.size=Xd;R.state=Fc;R.stride=re;R.type=Nc;R.w=Yc;R.x=ze;R.y=oc;R.z=wc;$a&&r.destroyStream(sc);h.buffer=ab;h.divisor=dd;h.normalized=
$c;h.offset=lc;h.size=dc;h.state=ad;h.stride=Uc;h.type=ed;h.w=zc;h.x=id;h.y=ie;h.z=oe;jd&&r.destroyStream(Ce);S.buffer=vd;S.divisor=Cd;S.normalized=Fd;S.offset=je;S.size=ye;S.state=Fe;S.stride=le;S.type=ke;S.w=he;S.x=ve;S.y=de;S.z=me;gd&&r.destroyStream(we);X.buffer=Oe;X.divisor=xe;X.normalized=He;X.offset=Je;X.size=Ke;X.state=Le;X.stride=Ie;X.type=Ld;X.w=Wd;X.x=be;X.y=ee;X.z=Me;Td&&r.destroyStream(De);w.buffer=We;w.divisor=jf;w.normalized=nf;w.offset=ef;w.size=kf;w.state=lf;w.stride=mf;w.type=rf;
w.w=of;w.x=sf;w.y=Bf;w.z=Cf;Ee&&r.destroyStream(pf);D.buffer=If;D.divisor=Jf;D.normalized=Kf;D.offset=Lf;D.size=tf;D.state=Qf;D.stride=Hf;D.type=uf;D.w=cg;D.x=Rf;D.y=Sf;D.z=qg;cf&&r.destroyStream(Mf);d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;df&&r.destroyStream(Of);a.buffer=og;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Ca.vert=Ng;Ca.frag=Og;y.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Cc,V,ea){var O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,Z,Hb,ga,H,sa,Ca,ra,xa,Fa,la,W;O=b.attributes;P=b.buffer;C=b.context;g=b.current;N=b.draw;M=b.elements;Da=b.extensions;pa=b.framebuffer;m=b.gl;J=b.isBufferArgs;aa=b.next;Q=b.shader;
ma=b.uniforms;qa=b.vao;Aa=aa.blend_color;wa=g.blend_color;fa=aa.blend_equation;Ba=g.blend_equation;ka=aa.blend_func;oa=g.blend_func;ya=aa.colorMask;Ja=g.colorMask;na=aa.depth_range;Xa=g.depth_range;Ta=aa.polygonOffset_offset;r=g.polygonOffset_offset;p=aa.sample_coverage;y=g.sample_coverage;va=aa.scissor_box;Ea=g.scissor_box;Z=aa.stencil_func;Hb=g.stencil_func;ga=aa.stencil_opBack;H=g.stencil_opBack;sa=aa.stencil_opFront;Ca=g.stencil_opFront;ra=aa.viewport;xa=g.viewport;Fa={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:4,stride:8};W={offset:0,stride:8};return{batch:function(c,l){var b,q,e,v,Q,ra,L,u,n,B,x,K,F;b=pa.next;b!==pa.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),pa.cur=b);if(g.dirty){var G,U,ka,ba,ma,Aa,ha,Md,ab,Ze,$e,Gd,Ae,te,Yd,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc;G=aa.dither;G!==g.dither&&(G?m.enable(3024):m.disable(3024),g.dither=G);U=fa[0];ka=fa[1];if(U!==Ba[0]||
ka!==Ba[1])m.blendEquationSeparate(U,ka),Ba[0]=U,Ba[1]=ka;ba=aa.depth_func;ba!==g.depth_func&&(m.depthFunc(ba),g.depth_func=ba);ma=na[0];Aa=na[1];if(ma!==Xa[0]||Aa!==Xa[1])m.depthRange(ma,Aa),Xa[0]=ma,Xa[1]=Aa;ha=aa.depth_mask;ha!==g.depth_mask&&(m.depthMask(ha),g.depth_mask=ha);Md=ya[0];ab=ya[1];Ze=ya[2];$e=ya[3];if(Md!==Ja[0]||ab!==Ja[1]||Ze!==Ja[2]||$e!==Ja[3])m.colorMask(Md,ab,Ze,$e),Ja[0]=Md,Ja[1]=ab,Ja[2]=Ze,Ja[3]=$e;Gd=aa.cull_enable;Gd!==g.cull_enable&&(Gd?m.enable(2884):m.disable(2884),g.cull_enable=
Gd);Ae=aa.cull_face;Ae!==g.cull_face&&(m.cullFace(Ae),g.cull_face=Ae);te=aa.frontFace;te!==g.frontFace&&(m.frontFace(te),g.frontFace=te);Yd=aa.lineWidth;Yd!==g.lineWidth&&(m.lineWidth(Yd),g.lineWidth=Yd);Ad=aa.polygonOffset_enable;Ad!==g.polygonOffset_enable&&(Ad?m.enable(32823):m.disable(32823),g.polygonOffset_enable=Ad);Zd=Ta[0];ld=Ta[1];if(Zd!==r[0]||ld!==r[1])m.polygonOffset(Zd,ld),r[0]=Zd,r[1]=ld;bd=aa.sample_alpha;bd!==g.sample_alpha&&(bd?m.enable(32926):m.disable(32926),g.sample_alpha=bd);
pd=aa.sample_enable;pd!==g.sample_enable&&(pd?m.enable(32928):m.disable(32928),g.sample_enable=pd);Lc=p[0];nd=p[1];if(Lc!==y[0]||nd!==y[1])m.sampleCoverage(Lc,nd),y[0]=Lc,y[1]=nd;Gc=aa.stencil_mask;Gc!==g.stencil_mask&&(m.stencilMask(Gc),g.stencil_mask=Gc);fd=Z[0];Pc=Z[1];Wc=Z[2];if(fd!==Hb[0]||Pc!==Hb[1]||Wc!==Hb[2])m.stencilFunc(fd,Pc,Wc),Hb[0]=fd,Hb[1]=Pc,Hb[2]=Wc;Bb=sa[0];Fb=sa[1];Dc=sa[2];xb=sa[3];if(Bb!==Ca[0]||Fb!==Ca[1]||Dc!==Ca[2]||xb!==Ca[3])m.stencilOpSeparate(Bb,Fb,Dc,xb),Ca[0]=Bb,Ca[1]=
Fb,Ca[2]=Dc,Ca[3]=xb;xc=ga[0];Cb=ga[1];Jc=ga[2];mc=ga[3];if(xc!==H[0]||Cb!==H[1]||Jc!==H[2]||mc!==H[3])m.stencilOpSeparate(xc,Cb,Jc,mc),H[0]=xc,H[1]=Cb,H[2]=Jc,H[3]=mc;Hc=aa.scissor_enable;Hc!==g.scissor_enable&&(Hc?m.enable(3089):m.disable(3089),g.scissor_enable=Hc);Xc=va[0];Vc=va[1];Ec=va[2];fc=va[3];if(Xc!==Ea[0]||Vc!==Ea[1]||Ec!==Ea[2]||fc!==Ea[3])m.scissor(Xc,Vc,Ec,fc),Ea[0]=Xc,Ea[1]=Vc,Ea[2]=Ec,Ea[3]=fc}q=this.viewport;e=q.x|0;v=q.y|0;Q="width"in q?q.width|0:C.framebufferWidth-e;ra="height"in
q?q.height|0:C.framebufferHeight-v;L=C.viewportWidth;C.viewportWidth=Q;u=C.viewportHeight;C.viewportHeight=ra;m.viewport(e,v,Q,ra);xa[0]=e;xa[1]=v;xa[2]=Q;xa[3]=ra;m.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;m.enable(3042);g.blend_enable=!0;m.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;m.disable(2929);g.depth_enable=!1;m.disable(2960);g.stencil_enable=!1;if(n=g.profile)B=performance.now(),da.count+=l;m.useProgram(T.program);x=Da.angle_instanced_arrays;var Ic,pc,
qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb;qa.setVAO(null);W.buffer=this.sizeBuffer;Ic=!1;pc=null;qc=0;nc=!1;bb=gc=0;bc=1;yb=0;eb=5126;Ua=ob=cb=Nb=0;J(W)?(Ic=!0,pc=P.createStream(34962,W),eb=pc.dtype):(pc=P.getBuffer(W))?eb=pc.dtype:"constant"in W?(bc=2,"number"===typeof W.constant?(cb=W.constant,ob=Ua=Nb=0):(cb=0<W.constant.length?W.constant[0]:
0,ob=1<W.constant.length?W.constant[1]:0,Ua=2<W.constant.length?W.constant[2]:0,Nb=3<W.constant.length?W.constant[3]:0)):(pc=J(W.buffer)?P.createStream(34962,W.buffer):P.getBuffer(W.buffer),eb="type"in W?Fa[W.type]:pc.dtype,nc=!!W.normalized,bb=W.size|0,gc=W.offset|0,yb=W.stride|0,qc=W.divisor|0);hd=ea.location;Ib=O[hd];if(1===bc){Ib.buffer||m.enableVertexAttribArray(hd);Jb=bb||1;if(Ib.type!==eb||Ib.size!==Jb||Ib.buffer!==pc||Ib.normalized!==nc||Ib.offset!==gc||Ib.stride!==yb)m.bindBuffer(34962,pc.buffer),
m.vertexAttribPointer(hd,Jb,eb,nc,yb,gc),Ib.type=eb,Ib.size=Jb,Ib.buffer=pc,Ib.normalized=nc,Ib.offset=gc,Ib.stride=yb;Ib.divisor!==qc&&(x.vertexAttribDivisorANGLE(hd,qc),Ib.divisor=qc)}else if(Ib.buffer&&(m.disableVertexAttribArray(hd),Ib.buffer=null),Ib.x!==cb||Ib.y!==ob||Ib.z!==Ua||Ib.w!==Nb)m.vertexAttrib4f(hd,cb,ob,Ua,Nb),Ib.x=cb,Ib.y=ob,Ib.z=Ua,Ib.w=Nb;la.buffer=this.sizeBuffer;rc=!1;Ob=null;jb=0;Gb=!1;wb=Db=0;hb=1;Yb=0;Pb=5126;zb=Ub=Ra=qb=0;J(la)?(rc=!0,Ob=P.createStream(34962,la),Pb=Ob.dtype):
(Ob=P.getBuffer(la))?Pb=Ob.dtype:"constant"in la?(hb=2,"number"===typeof la.constant?(Ra=la.constant,Ub=zb=qb=0):(Ra=0<la.constant.length?la.constant[0]:0,Ub=1<la.constant.length?la.constant[1]:0,zb=2<la.constant.length?la.constant[2]:0,qb=3<la.constant.length?la.constant[3]:0)):(Ob=J(la.buffer)?P.createStream(34962,la.buffer):P.getBuffer(la.buffer),Pb="type"in la?Fa[la.type]:Ob.dtype,Gb=!!la.normalized,wb=la.size|0,Db=la.offset|0,Yb=la.stride|0,jb=la.divisor|0);cc=D.location;ib=O[cc];if(1===hb){ib.buffer||
m.enableVertexAttribArray(cc);pb=wb||1;if(ib.type!==Pb||ib.size!==pb||ib.buffer!==Ob||ib.normalized!==Gb||ib.offset!==Db||ib.stride!==Yb)m.bindBuffer(34962,Ob.buffer),m.vertexAttribPointer(cc,pb,Pb,Gb,Yb,Db),ib.type=Pb,ib.size=pb,ib.buffer=Ob,ib.normalized=Gb,ib.offset=Db,ib.stride=Yb;ib.divisor!==jb&&(x.vertexAttribDivisorANGLE(cc,jb),ib.divisor=jb)}else if(ib.buffer&&(m.disableVertexAttribArray(cc),ib.buffer=null),ib.x!==Ra||ib.y!==Ub||ib.z!==zb||ib.w!==qb)m.vertexAttrib4f(cc,Ra,Ub,zb,qb),ib.x=
Ra,ib.y=Ub,ib.z=zb,ib.w=qb;Ha=this.charBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Va=1;tb=0;sb=5126;Kb=Qa=tc=Oa=0;J(Ha)?(rb=!0,Ka=P.createStream(34962,Ha),sb=Ka.dtype):(Ka=P.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Va=2,"number"===typeof Ha.constant?(tc=Ha.constant,Qa=Kb=Oa=0):(tc=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=J(Ha.buffer)?P.createStream(34962,Ha.buffer):P.getBuffer(Ha.buffer),
sb="type"in Ha?Fa[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=Y.location;Ma=O[Eb];if(1===Va){Ma.buffer||m.enableVertexAttribArray(Eb);yd=kb||1;if(Ma.type!==sb||Ma.size!==yd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)m.bindBuffer(34962,Ka.buffer),m.vertexAttribPointer(Eb,yd,sb,gb,tb,La),Ma.type=sb,Ma.size=yd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(x.vertexAttribDivisorANGLE(Eb,fb),Ma.divisor=
fb)}else if(Ma.buffer&&(m.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==tc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)m.vertexAttrib4f(Eb,tc,Qa,Kb,Oa),Ma.x=tc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Ya=this.position;Lb=!1;Mb=null;lb=0;Na=!1;Pa=Zb=0;ub=1;vb=0;Sa=5126;vc=Ac=hc=nb=0;J(Ya)?(Lb=!0,Mb=P.createStream(34962,Ya),Sa=Mb.dtype):(Mb=P.getBuffer(Ya))?Sa=Mb.dtype:"constant"in Ya?(ub=2,"number"===typeof Ya.constant?(hc=Ya.constant,Ac=vc=nb=0):(hc=0<Ya.constant.length?Ya.constant[0]:0,Ac=1<Ya.constant.length?Ya.constant[1]:
0,vc=2<Ya.constant.length?Ya.constant[2]:0,nb=3<Ya.constant.length?Ya.constant[3]:0)):(Mb=J(Ya.buffer)?P.createStream(34962,Ya.buffer):P.getBuffer(Ya.buffer),Sa="type"in Ya?Fa[Ya.type]:Mb.dtype,Na=!!Ya.normalized,Pa=Ya.size|0,Zb=Ya.offset|0,vb=Ya.stride|0,lb=Ya.divisor|0);db=ta.location;kc=O[db];if(1===ub){kc.buffer||m.enableVertexAttribArray(db);qd=Pa||2;if(kc.type!==Sa||kc.size!==qd||kc.buffer!==Mb||kc.normalized!==Na||kc.offset!==Zb||kc.stride!==vb)m.bindBuffer(34962,Mb.buffer),m.vertexAttribPointer(db,
qd,Sa,Na,vb,Zb),kc.type=Sa,kc.size=qd,kc.buffer=Mb,kc.normalized=Na,kc.offset=Zb,kc.stride=vb;kc.divisor!==lb&&(x.vertexAttribDivisorANGLE(db,lb),kc.divisor=lb)}else if(kc.buffer&&(m.disableVertexAttribArray(db),kc.buffer=null),kc.x!==hc||kc.y!==Ac||kc.z!==vc||kc.w!==nb)m.vertexAttrib4f(db,hc,Ac,vc,nb),kc.x=hc,kc.y=Ac,kc.z=vc,kc.w=nb;Wa=this.viewportArray;m.uniform4f(V.location,Wa[0],Wa[1],Wa[2],Wa[3]);Mc=this.scale;m.uniform2f(ja.location,Mc[0],Mc[1]);Ab=this.translate;m.uniform2f(Cc.location,Ab[0],
Ab[1]);(Za=N.elements)?m.bindBuffer(34963,Za.buffer.buffer):qa.currentVAO&&(Za=M.getElements(qa.currentVAO.elements))&&m.bindBuffer(34963,Za.buffer.buffer);Vb=N.instances;for(K=0;K<l;++K){F=c[K];var uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id,Nd;uc=z.call(this,C,F,K);K&&Wb===uc||(Wb=uc,m.uniform1f(E.location,uc));Qb=R.call(this,C,F,K);K&&Kc===Qb||(Kc=Qb,m.uniform1f(I.location,Qb));Rb=F.align;K&&pe===Rb||(pe=Rb,m.uniform1f(S.location,
Rb));Fc=F.baseline;K&&sd===Fc||(sd=Fc,m.uniform1f(w.location,Fc));Nc=F.color;Yc=Nc[0];oc=Nc[1];ic=Nc[2];sc=Nc[3];K&&td===Yc&&wc===oc&&$a===ic&&Tb===sc||(td=Yc,wc=oc,$a=ic,Tb=sc,m.uniform4f(d.location,Yc,oc,ic,sc));Xb=ia.call(this,C,F,K);ec=Xb[0];yc=Xb[1];K&&jc===ec&&Bc===yc||(jc=ec,Bc=yc,m.uniform2f(f.location,ec,yc));cd=h.call(this,C,F,K);Qc=cd[0];Sc=cd[1];K&&Rc===Qc&&Zc===Sc||(Rc=Qc,Zc=Sc,m.uniform2f(X.location,Qc,Sc));od=F.positionOffset;dd=od[0];lc=od[1];K&&$c===dd&&dc===lc||($c=dd,dc=lc,m.uniform2f(A.location,
dd,lc));ad=F.opacity;K&&Uc===ad||(Uc=ad,m.uniform1f(a.location,ad));(ed=t.call(this,C,F,K))&&"framebuffer"===ed._reglType&&(ed=ed.color[0]);zc=ed._texture;m.uniform1i(k.location,zc.bind());id=F.offset;if(Nd=F.count)0<Vb?Za?x.drawElementsInstancedANGLE(0,Nd,Za.type,id<<(Za.type-5121>>1),Vb):x.drawArraysInstancedANGLE(0,id,Nd,Vb):0>Vb&&(Za?m.drawElements(0,Nd,Za.type,id<<(Za.type-5121>>1)):m.drawArrays(0,id,Nd)),zc.unbind()}Ic&&P.destroyStream(pc);rc&&P.destroyStream(Ob);rb&&P.destroyStream(Ka);Lb&&
P.destroyStream(Mb);g.dirty=!0;qa.setVAO(null);C.viewportWidth=L;C.viewportHeight=u;n&&(da.cpuTime+=performance.now()-B)},draw:function(h){var b,t,v,Q,ra,u,n,z,B,x,F,R,G,T,U,ka,ba,ia,ma,Aa,ha,ab,Xe,Ze,$e,Gd,Ae,te,Yd,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob,Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb;b=pa.next;b!==pa.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),pa.cur=
b);if(g.dirty){var Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,Vb,uc,Wb,Qb,Kc,Rb,pe,Fc;Va=aa.dither;Va!==g.dither&&(Va?m.enable(3024):m.disable(3024),g.dither=Va);tb=fa[0];sb=fa[1];if(tb!==Ba[0]||sb!==Ba[1])m.blendEquationSeparate(tb,sb),Ba[0]=tb,Ba[1]=sb;Oa=aa.depth_func;Oa!==g.depth_func&&(m.depthFunc(Oa),g.depth_func=Oa);tc=na[0];Qa=na[1];if(tc!==Xa[0]||Qa!==Xa[1])m.depthRange(tc,Qa),Xa[0]=tc,Xa[1]=Qa;Kb=aa.depth_mask;Kb!==g.depth_mask&&(m.depthMask(Kb),
g.depth_mask=Kb);Eb=ya[0];Ma=ya[1];yd=ya[2];Ya=ya[3];if(Eb!==Ja[0]||Ma!==Ja[1]||yd!==Ja[2]||Ya!==Ja[3])m.colorMask(Eb,Ma,yd,Ya),Ja[0]=Eb,Ja[1]=Ma,Ja[2]=yd,Ja[3]=Ya;Lb=aa.cull_enable;Lb!==g.cull_enable&&(Lb?m.enable(2884):m.disable(2884),g.cull_enable=Lb);Mb=aa.cull_face;Mb!==g.cull_face&&(m.cullFace(Mb),g.cull_face=Mb);lb=aa.frontFace;lb!==g.frontFace&&(m.frontFace(lb),g.frontFace=lb);Na=aa.lineWidth;Na!==g.lineWidth&&(m.lineWidth(Na),g.lineWidth=Na);Zb=aa.polygonOffset_enable;Zb!==g.polygonOffset_enable&&
(Zb?m.enable(32823):m.disable(32823),g.polygonOffset_enable=Zb);Pa=Ta[0];ub=Ta[1];if(Pa!==r[0]||ub!==r[1])m.polygonOffset(Pa,ub),r[0]=Pa,r[1]=ub;vb=aa.sample_alpha;vb!==g.sample_alpha&&(vb?m.enable(32926):m.disable(32926),g.sample_alpha=vb);Sa=aa.sample_enable;Sa!==g.sample_enable&&(Sa?m.enable(32928):m.disable(32928),g.sample_enable=Sa);nb=p[0];hc=p[1];if(nb!==y[0]||hc!==y[1])m.sampleCoverage(nb,hc),y[0]=nb,y[1]=hc;Ac=aa.stencil_mask;Ac!==g.stencil_mask&&(m.stencilMask(Ac),g.stencil_mask=Ac);vc=
Z[0];db=Z[1];kc=Z[2];if(vc!==Hb[0]||db!==Hb[1]||kc!==Hb[2])m.stencilFunc(vc,db,kc),Hb[0]=vc,Hb[1]=db,Hb[2]=kc;qd=sa[0];Wa=sa[1];Mc=sa[2];Ab=sa[3];if(qd!==Ca[0]||Wa!==Ca[1]||Mc!==Ca[2]||Ab!==Ca[3])m.stencilOpSeparate(qd,Wa,Mc,Ab),Ca[0]=qd,Ca[1]=Wa,Ca[2]=Mc,Ca[3]=Ab;Za=ga[0];Vb=ga[1];uc=ga[2];Wb=ga[3];if(Za!==H[0]||Vb!==H[1]||uc!==H[2]||Wb!==H[3])m.stencilOpSeparate(Za,Vb,uc,Wb),H[0]=Za,H[1]=Vb,H[2]=uc,H[3]=Wb;Qb=aa.scissor_enable;Qb!==g.scissor_enable&&(Qb?m.enable(3089):m.disable(3089),g.scissor_enable=
Qb);Kc=va[0];Rb=va[1];pe=va[2];Fc=va[3];if(Kc!==Ea[0]||Rb!==Ea[1]||pe!==Ea[2]||Fc!==Ea[3])m.scissor(Kc,Rb,pe,Fc),Ea[0]=Kc,Ea[1]=Rb,Ea[2]=pe,Ea[3]=Fc}t=this.viewport;v=t.x|0;Q=t.y|0;ra="width"in t?t.width|0:C.framebufferWidth-v;u="height"in t?t.height|0:C.framebufferHeight-Q;n=C.viewportWidth;C.viewportWidth=ra;z=C.viewportHeight;C.viewportHeight=u;m.viewport(v,Q,ra,u);xa[0]=v;xa[1]=Q;xa[2]=ra;xa[3]=u;m.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;m.enable(3042);g.blend_enable=!0;m.blendFuncSeparate(770,
771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;m.disable(2929);g.depth_enable=!1;m.disable(2960);g.stencil_enable=!1;if(B=g.profile)x=performance.now(),da.count++;m.useProgram(K.program);F=Da.angle_instanced_arrays;qa.setVAO(null);W.buffer=this.sizeBuffer;R=!1;G=null;T=0;U=!1;ba=ka=0;ia=1;ma=0;Aa=5126;Ze=Xe=ab=ha=0;J(W)?(R=!0,G=P.createStream(34962,W),Aa=G.dtype):(G=P.getBuffer(W))?Aa=G.dtype:"constant"in W?(ia=2,"number"===typeof W.constant?(ab=W.constant,Xe=Ze=ha=0):(ab=0<W.constant.length?W.constant[0]:
0,Xe=1<W.constant.length?W.constant[1]:0,Ze=2<W.constant.length?W.constant[2]:0,ha=3<W.constant.length?W.constant[3]:0)):(G=J(W.buffer)?P.createStream(34962,W.buffer):P.getBuffer(W.buffer),Aa="type"in W?Fa[W.type]:G.dtype,U=!!W.normalized,ba=W.size|0,ka=W.offset|0,ma=W.stride|0,T=W.divisor|0);$e=ea.location;Gd=O[$e];if(1===ia){Gd.buffer||m.enableVertexAttribArray($e);Ae=ba||1;if(Gd.type!==Aa||Gd.size!==Ae||Gd.buffer!==G||Gd.normalized!==U||Gd.offset!==ka||Gd.stride!==ma)m.bindBuffer(34962,G.buffer),
m.vertexAttribPointer($e,Ae,Aa,U,ma,ka),Gd.type=Aa,Gd.size=Ae,Gd.buffer=G,Gd.normalized=U,Gd.offset=ka,Gd.stride=ma;Gd.divisor!==T&&(F.vertexAttribDivisorANGLE($e,T),Gd.divisor=T)}else if(Gd.buffer&&(m.disableVertexAttribArray($e),Gd.buffer=null),Gd.x!==ab||Gd.y!==Xe||Gd.z!==Ze||Gd.w!==ha)m.vertexAttrib4f($e,ab,Xe,Ze,ha),Gd.x=ab,Gd.y=Xe,Gd.z=Ze,Gd.w=ha;la.buffer=this.sizeBuffer;te=!1;Yd=null;Ad=0;Zd=!1;bd=ld=0;pd=1;Lc=0;nd=5126;Wc=Pc=fd=Gc=0;J(la)?(te=!0,Yd=P.createStream(34962,la),nd=Yd.dtype):(Yd=
P.getBuffer(la))?nd=Yd.dtype:"constant"in la?(pd=2,"number"===typeof la.constant?(fd=la.constant,Pc=Wc=Gc=0):(fd=0<la.constant.length?la.constant[0]:0,Pc=1<la.constant.length?la.constant[1]:0,Wc=2<la.constant.length?la.constant[2]:0,Gc=3<la.constant.length?la.constant[3]:0)):(Yd=J(la.buffer)?P.createStream(34962,la.buffer):P.getBuffer(la.buffer),nd="type"in la?Fa[la.type]:Yd.dtype,Zd=!!la.normalized,bd=la.size|0,ld=la.offset|0,Lc=la.stride|0,Ad=la.divisor|0);Bb=D.location;Fb=O[Bb];if(1===pd){Fb.buffer||
m.enableVertexAttribArray(Bb);Dc=bd||1;if(Fb.type!==nd||Fb.size!==Dc||Fb.buffer!==Yd||Fb.normalized!==Zd||Fb.offset!==ld||Fb.stride!==Lc)m.bindBuffer(34962,Yd.buffer),m.vertexAttribPointer(Bb,Dc,nd,Zd,Lc,ld),Fb.type=nd,Fb.size=Dc,Fb.buffer=Yd,Fb.normalized=Zd,Fb.offset=ld,Fb.stride=Lc;Fb.divisor!==Ad&&(F.vertexAttribDivisorANGLE(Bb,Ad),Fb.divisor=Ad)}else if(Fb.buffer&&(m.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==fd||Fb.y!==Pc||Fb.z!==Wc||Fb.w!==Gc)m.vertexAttrib4f(Bb,fd,Pc,Wc,Gc),Fb.x=
fd,Fb.y=Pc,Fb.z=Wc,Fb.w=Gc;xb=this.charBuffer;xc=!1;Cb=null;Jc=0;mc=!1;Xc=Hc=0;Vc=1;Ec=0;fc=5126;nc=qc=pc=Ic=0;J(xb)?(xc=!0,Cb=P.createStream(34962,xb),fc=Cb.dtype):(Cb=P.getBuffer(xb))?fc=Cb.dtype:"constant"in xb?(Vc=2,"number"===typeof xb.constant?(pc=xb.constant,qc=nc=Ic=0):(pc=0<xb.constant.length?xb.constant[0]:0,qc=1<xb.constant.length?xb.constant[1]:0,nc=2<xb.constant.length?xb.constant[2]:0,Ic=3<xb.constant.length?xb.constant[3]:0)):(Cb=J(xb.buffer)?P.createStream(34962,xb.buffer):P.getBuffer(xb.buffer),
fc="type"in xb?Fa[xb.type]:Cb.dtype,mc=!!xb.normalized,Xc=xb.size|0,Hc=xb.offset|0,Ec=xb.stride|0,Jc=xb.divisor|0);gc=Y.location;bb=O[gc];if(1===Vc){bb.buffer||m.enableVertexAttribArray(gc);bc=Xc||1;if(bb.type!==fc||bb.size!==bc||bb.buffer!==Cb||bb.normalized!==mc||bb.offset!==Hc||bb.stride!==Ec)m.bindBuffer(34962,Cb.buffer),m.vertexAttribPointer(gc,bc,fc,mc,Ec,Hc),bb.type=fc,bb.size=bc,bb.buffer=Cb,bb.normalized=mc,bb.offset=Hc,bb.stride=Ec;bb.divisor!==Jc&&(F.vertexAttribDivisorANGLE(gc,Jc),bb.divisor=
Jc)}else if(bb.buffer&&(m.disableVertexAttribArray(gc),bb.buffer=null),bb.x!==pc||bb.y!==qc||bb.z!==nc||bb.w!==Ic)m.vertexAttrib4f(gc,pc,qc,nc,Ic),bb.x=pc,bb.y=qc,bb.z=nc,bb.w=Ic;yb=this.position;eb=!1;Nb=null;cb=0;ob=!1;hd=Ua=0;Ib=1;Jb=0;rc=5126;Db=Gb=jb=Ob=0;J(yb)?(eb=!0,Nb=P.createStream(34962,yb),rc=Nb.dtype):(Nb=P.getBuffer(yb))?rc=Nb.dtype:"constant"in yb?(Ib=2,"number"===typeof yb.constant?(jb=yb.constant,Gb=Db=Ob=0):(jb=0<yb.constant.length?yb.constant[0]:0,Gb=1<yb.constant.length?yb.constant[1]:
0,Db=2<yb.constant.length?yb.constant[2]:0,Ob=3<yb.constant.length?yb.constant[3]:0)):(Nb=J(yb.buffer)?P.createStream(34962,yb.buffer):P.getBuffer(yb.buffer),rc="type"in yb?Fa[yb.type]:Nb.dtype,ob=!!yb.normalized,hd=yb.size|0,Ua=yb.offset|0,Jb=yb.stride|0,cb=yb.divisor|0);wb=ta.location;hb=O[wb];if(1===Ib){hb.buffer||m.enableVertexAttribArray(wb);Yb=hd||2;if(hb.type!==rc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Ua||hb.stride!==Jb)m.bindBuffer(34962,Nb.buffer),m.vertexAttribPointer(wb,
Yb,rc,ob,Jb,Ua),hb.type=rc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Ua,hb.stride=Jb;hb.divisor!==cb&&(F.vertexAttribDivisorANGLE(wb,cb),hb.divisor=cb)}else if(hb.buffer&&(m.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)m.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=L.call(this,C,h,0);m.uniform1f(E.location,Pb);qb=e.call(this,C,h,0);m.uniform1f(I.location,qb);m.uniform1f(S.location,h.align);m.uniform1f(w.location,h.baseline);
Ra=this.viewportArray;m.uniform4f(V.location,Ra[0],Ra[1],Ra[2],Ra[3]);Ub=h.color;m.uniform4f(d.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=l.call(this,C,h,0);m.uniform2f(f.location,zb[0],zb[1]);cc=q.call(this,C,h,0);m.uniform2f(X.location,cc[0],cc[1]);ib=this.scale;m.uniform2f(ja.location,ib[0],ib[1]);pb=this.translate;m.uniform2f(Cc.location,pb[0],pb[1]);Ha=h.positionOffset;m.uniform2f(A.location,Ha[0],Ha[1]);m.uniform1f(a.location,h.opacity);(rb=c.call(this,C,h,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);
Ka=rb._texture;m.uniform1i(k.location,Ka.bind());(fb=N.elements)?m.bindBuffer(34963,fb.buffer.buffer):qa.currentVAO&&(fb=M.getElements(qa.currentVAO.elements))&&m.bindBuffer(34963,fb.buffer.buffer);gb=h.offset;if(La=h.count)kb=N.instances,0<kb?fb?F.drawElementsInstancedANGLE(0,La,fb.type,gb<<(fb.type-5121>>1),kb):F.drawArraysInstancedANGLE(0,gb,La,kb):0>kb&&(fb?m.drawElements(0,La,fb.type,gb<<(fb.type-5121>>1)):m.drawArrays(0,gb,La)),g.dirty=!0,qa.setVAO(null),C.viewportWidth=n,C.viewportHeight=z,
B&&(da.cpuTime+=performance.now()-x),R&&P.destroyStream(G),te&&P.destroyStream(Yd),xc&&P.destroyStream(Cb),eb&&P.destroyStream(Nb),Ka.unbind()},scope:function(a,d,c){var f,h,l,b,k,m,r,p,q,H,y,t,w,e,A,na,sa,Ca,D,E,O,fa,M,ga,I,L,Xa,Ja,z,K,xa,va,wa,R,qa,S,Da,T,V,X,ea,Ta,Y,oa,ia,ta,Ba,pa,ya,ja,Ea,Hb,Z,Cc,Bd,ha,bb,bc,yb,eb,Nb,cb,ob,Ua,ab,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa,Mc,Ab,Za,
Vb,uc,Wb,Qb,Kc,Rb,pe,Fc,sd,Nc,Yc,td,oc,wc,ic,$a,sc,Tb,Xb,ec,jc,yc,Bc,cd,Qc,Rc,Sc,Zc,od,dd,$c,lc,dc,ad,Uc,ed,zc,id;f=this.viewport;h=f.x|0;l=f.y|0;b="width"in f?f.width|0:C.framebufferWidth-h;k="height"in f?f.height|0:C.framebufferHeight-l;m=C.viewportWidth;C.viewportWidth=b;r=C.viewportHeight;C.viewportHeight=k;p=ra[0];ra[0]=h;q=ra[1];ra[1]=l;H=ra[2];ra[2]=b;y=ra[3];ra[3]=k;t=Aa[0];Aa[0]=0;w=Aa[1];Aa[1]=0;e=Aa[2];Aa[2]=0;A=Aa[3];Aa[3]=1;na=aa.blend_enable;aa.blend_enable=!0;sa=ka[0];ka[0]=770;Ca=
ka[1];ka[1]=771;D=ka[2];ka[2]=773;E=ka[3];ka[3]=1;O=aa.depth_enable;aa.depth_enable=!1;fa=aa.stencil_enable;aa.stencil_enable=!1;if(M=g.profile)ga=performance.now(),da.count++;I=a.offset;L=N.offset;N.offset=I;Xa=a.count;Ja=N.count;N.count=Xa;z=N.primitive;N.primitive=0;K=a.align;xa=ma[64];ma[64]=K;va=F.call(this,C,a,c);wa=ma[69];ma[69]=va;R=B.call(this,C,a,c);qa=ma[67];ma[67]=R;S=G.call(this,C,a,c);Da=ma[66];ma[66]=S;T=a.baseline;V=ma[65];ma[65]=T;X=U.call(this,C,a,c);ea=ma[62];ma[62]=X;Ta=a.color;
Y=ma[14];ma[14]=Ta;oa=n.call(this,C,a,c);ia=ma[63];ma[63]=oa;ta=a.opacity;Ba=ma[10];ma[10]=ta;pa=a.positionOffset;ya=ma[68];ma[68]=pa;ja=this.scale;Ea=ma[6];ma[6]=ja;Hb=this.translate;Z=ma[8];ma[8]=Hb;Cc=this.viewportArray;Bd=ma[3];ma[3]=Cc;ha=this.charBuffer;bb=!1;bc=null;yb=0;eb=!1;cb=Nb=0;ob=1;Ua=0;ab=5126;Ob=rc=Jb=Ib=0;J(ha)?(bb=!0,bc=P.createStream(34962,ha),ab=bc.dtype):(bc=P.getBuffer(ha))?ab=bc.dtype:"constant"in ha?(ob=2,"number"===typeof ha.constant?(Jb=ha.constant,rc=Ob=Ib=0):(Jb=0<ha.constant.length?
ha.constant[0]:0,rc=1<ha.constant.length?ha.constant[1]:0,Ob=2<ha.constant.length?ha.constant[2]:0,Ib=3<ha.constant.length?ha.constant[3]:0)):(bc=J(ha.buffer)?P.createStream(34962,ha.buffer):P.getBuffer(ha.buffer),ab="type"in ha?Fa[ha.type]:bc.dtype,eb=!!ha.normalized,cb=ha.size|0,Nb=ha.offset|0,Ua=ha.stride|0,yb=ha.divisor|0);jb=u.buffer;u.buffer=bc;Gb=u.divisor;u.divisor=yb;Db=u.normalized;u.normalized=eb;wb=u.offset;u.offset=Nb;hb=u.size;u.size=cb;Yb=u.state;u.state=ob;Pb=u.stride;u.stride=Ua;
qb=u.type;u.type=ab;Ra=u.w;u.w=Ib;Ub=u.x;u.x=Jb;zb=u.y;u.y=rc;cc=u.z;u.z=Ob;la.buffer=this.sizeBuffer;ib=!1;pb=null;Ha=0;rb=!1;fb=Ka=0;gb=1;La=0;kb=5126;Oa=sb=tb=Va=0;J(la)?(ib=!0,pb=P.createStream(34962,la),kb=pb.dtype):(pb=P.getBuffer(la))?kb=pb.dtype:"constant"in la?(gb=2,"number"===typeof la.constant?(tb=la.constant,sb=Oa=Va=0):(tb=0<la.constant.length?la.constant[0]:0,sb=1<la.constant.length?la.constant[1]:0,Oa=2<la.constant.length?la.constant[2]:0,Va=3<la.constant.length?la.constant[3]:0)):
(pb=J(la.buffer)?P.createStream(34962,la.buffer):P.getBuffer(la.buffer),kb="type"in la?Fa[la.type]:pb.dtype,rb=!!la.normalized,fb=la.size|0,Ka=la.offset|0,La=la.stride|0,Ha=la.divisor|0);tc=x.buffer;x.buffer=pb;Qa=x.divisor;x.divisor=Ha;Kb=x.normalized;x.normalized=rb;Eb=x.offset;x.offset=Ka;Ma=x.size;x.size=fb;yd=x.state;x.state=gb;Ya=x.stride;x.stride=La;Lb=x.type;x.type=kb;Mb=x.w;x.w=Va;lb=x.x;x.x=tb;Na=x.y;x.y=sb;Zb=x.z;x.z=Oa;Pa=this.position;ub=!1;vb=null;Sa=0;nb=!1;Ac=hc=0;vc=1;db=0;kc=5126;
Ab=Mc=Wa=qd=0;J(Pa)?(ub=!0,vb=P.createStream(34962,Pa),kc=vb.dtype):(vb=P.getBuffer(Pa))?kc=vb.dtype:"constant"in Pa?(vc=2,"number"===typeof Pa.constant?(Wa=Pa.constant,Mc=Ab=qd=0):(Wa=0<Pa.constant.length?Pa.constant[0]:0,Mc=1<Pa.constant.length?Pa.constant[1]:0,Ab=2<Pa.constant.length?Pa.constant[2]:0,qd=3<Pa.constant.length?Pa.constant[3]:0)):(vb=J(Pa.buffer)?P.createStream(34962,Pa.buffer):P.getBuffer(Pa.buffer),kc="type"in Pa?Fa[Pa.type]:vb.dtype,nb=!!Pa.normalized,Ac=Pa.size|0,hc=Pa.offset|
0,db=Pa.stride|0,Sa=Pa.divisor|0);Za=ba.buffer;ba.buffer=vb;Vb=ba.divisor;ba.divisor=Sa;uc=ba.normalized;ba.normalized=nb;Wb=ba.offset;ba.offset=hc;Qb=ba.size;ba.size=Ac;Kc=ba.state;ba.state=vc;Rb=ba.stride;ba.stride=db;pe=ba.type;ba.type=kc;Fc=ba.w;ba.w=qd;sd=ba.x;ba.x=Wa;Nc=ba.y;ba.y=Mc;Yc=ba.z;ba.z=Ab;W.buffer=this.sizeBuffer;td=!1;oc=null;wc=0;ic=!1;sc=$a=0;Tb=1;Xb=0;ec=5126;cd=Bc=yc=jc=0;J(W)?(td=!0,oc=P.createStream(34962,W),ec=oc.dtype):(oc=P.getBuffer(W))?ec=oc.dtype:"constant"in W?(Tb=2,
"number"===typeof W.constant?(yc=W.constant,Bc=cd=jc=0):(yc=0<W.constant.length?W.constant[0]:0,Bc=1<W.constant.length?W.constant[1]:0,cd=2<W.constant.length?W.constant[2]:0,jc=3<W.constant.length?W.constant[3]:0)):(oc=J(W.buffer)?P.createStream(34962,W.buffer):P.getBuffer(W.buffer),ec="type"in W?Fa[W.type]:oc.dtype,ic=!!W.normalized,sc=W.size|0,$a=W.offset|0,Xb=W.stride|0,wc=W.divisor|0);Qc=v.buffer;v.buffer=oc;Rc=v.divisor;v.divisor=wc;Sc=v.normalized;v.normalized=ic;Zc=v.offset;v.offset=$a;od=
v.size;v.size=sc;dd=v.state;v.state=Tb;$c=v.stride;v.stride=Xb;lc=v.type;v.type=ec;dc=v.w;v.w=jc;ad=v.x;v.x=yc;Uc=v.y;v.y=Bc;ed=v.z;v.z=cd;zc=Q.vert;Q.vert=61;id=Q.frag;Q.frag=60;g.dirty=!0;d(C,a,c);C.viewportWidth=m;C.viewportHeight=r;ra[0]=p;ra[1]=q;ra[2]=H;ra[3]=y;Aa[0]=t;Aa[1]=w;Aa[2]=e;Aa[3]=A;aa.blend_enable=na;ka[0]=sa;ka[1]=Ca;ka[2]=D;ka[3]=E;aa.depth_enable=O;aa.stencil_enable=fa;M&&(da.cpuTime+=performance.now()-ga);N.offset=L;N.count=Ja;N.primitive=z;ma[64]=xa;ma[69]=wa;ma[67]=qa;ma[66]=
Da;ma[65]=V;ma[62]=ea;ma[14]=Y;ma[63]=ia;ma[10]=Ba;ma[68]=ya;ma[6]=Ea;ma[8]=Z;ma[3]=Bd;bb&&P.destroyStream(bc);u.buffer=jb;u.divisor=Gb;u.normalized=Db;u.offset=wb;u.size=hb;u.state=Yb;u.stride=Pb;u.type=qb;u.w=Ra;u.x=Ub;u.y=zb;u.z=cc;ib&&P.destroyStream(pb);x.buffer=tc;x.divisor=Qa;x.normalized=Kb;x.offset=Eb;x.size=Ma;x.state=yd;x.stride=Ya;x.type=Lb;x.w=Mb;x.x=lb;x.y=Na;x.z=Zb;ub&&P.destroyStream(vb);ba.buffer=Za;ba.divisor=Vb;ba.normalized=uc;ba.offset=Wb;ba.size=Qb;ba.state=Kc;ba.stride=Rb;ba.type=
pe;ba.w=Fc;ba.x=sd;ba.y=Nc;ba.z=Yc;td&&P.destroyStream(oc);v.buffer=Qc;v.divisor=Rc;v.normalized=Sc;v.offset=Zc;v.size=od;v.state=dd;v.stride=$c;v.type=lc;v.w=dc;v.x=ad;v.y=Uc;v.z=ed;Q.vert=zc;Q.frag=id;g.dirty=!0}}},$2:function(b,da,K){var L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I;L=b.attributes;e=b.current;l=b.framebuffer;q=b.gl;c=b.next;F=b.vao;B=c.blend_color;G=e.blend_color;U=c.blend_equation;n=e.blend_equation;u=c.blend_func;x=e.blend_func;ba=c.colorMask;v=e.colorMask;T=
c.depth_range;z=e.depth_range;R=c.polygonOffset_offset;ia=e.polygonOffset_offset;h=c.sample_coverage;t=e.sample_coverage;S=c.scissor_box;k=e.scissor_box;X=c.stencil_func;f=e.stencil_func;w=c.stencil_opBack;Y=e.stencil_opBack;D=c.stencil_opFront;E=e.stencil_opFront;d=c.viewport;I=e.viewport;return{poll:function(){var a,b,A,L,K,F,ea,O,P,C,g,N,M,Da,da,m,J,aa,Q,ma,qa,Aa;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;L=c.depth_enable;K=c.dither;F=c.polygonOffset_enable;ea=c.sample_alpha;O=c.sample_enable;
P=c.scissor_enable;C=c.stencil_enable;g=c.cull_face;N=e.cull_face;M=c.depth_func;Da=e.depth_func;da=c.depth_mask;m=e.depth_mask;J=c.frontFace;aa=e.frontFace;Q=c.lineWidth;ma=e.lineWidth;qa=c.stencil_mask;Aa=e.stencil_mask;a=l.next;a!==l.cur&&(a?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null),l.cur=a);b!==e.blend_enable&&(b?q.enable(3042):q.disable(3042),e.blend_enable=b);A!==e.cull_enable&&(A?q.enable(2884):q.disable(2884),e.cull_enable=A);L!==e.depth_enable&&(L?q.enable(2929):
q.disable(2929),e.depth_enable=L);K!==e.dither&&(K?q.enable(3024):q.disable(3024),e.dither=K);F!==e.polygonOffset_enable&&(F?q.enable(32823):q.disable(32823),e.polygonOffset_enable=F);ea!==e.sample_alpha&&(ea?q.enable(32926):q.disable(32926),e.sample_alpha=ea);O!==e.sample_enable&&(O?q.enable(32928):q.disable(32928),e.sample_enable=O);P!==e.scissor_enable&&(P?q.enable(3089):q.disable(3089),e.scissor_enable=P);C!==e.stencil_enable&&(C?q.enable(2960):q.disable(2960),e.stencil_enable=C);if(B[0]!==G[0]||
B[1]!==G[1]||B[2]!==G[2]||B[3]!==G[3])q.blendColor(B[0],B[1],B[2],B[3]),G[0]=B[0],G[1]=B[1],G[2]=B[2],G[3]=B[3];if(U[0]!==n[0]||U[1]!==n[1])q.blendEquationSeparate(U[0],U[1]),n[0]=U[0],n[1]=U[1];if(u[0]!==x[0]||u[1]!==x[1]||u[2]!==x[2]||u[3]!==x[3])q.blendFuncSeparate(u[0],u[1],u[2],u[3]),x[0]=u[0],x[1]=u[1],x[2]=u[2],x[3]=u[3];if(ba[0]!==v[0]||ba[1]!==v[1]||ba[2]!==v[2]||ba[3]!==v[3])q.colorMask(ba[0],ba[1],ba[2],ba[3]),v[0]=ba[0],v[1]=ba[1],v[2]=ba[2],v[3]=ba[3];g!==N&&(q.cullFace(g),e.cull_face=
g);M!==Da&&(q.depthFunc(M),e.depth_func=M);da!==m&&(q.depthMask(da),e.depth_mask=da);if(T[0]!==z[0]||T[1]!==z[1])q.depthRange(T[0],T[1]),z[0]=T[0],z[1]=T[1];J!==aa&&(q.frontFace(J),e.frontFace=J);Q!==ma&&(q.lineWidth(Q),e.lineWidth=Q);if(R[0]!==ia[0]||R[1]!==ia[1])q.polygonOffset(R[0],R[1]),ia[0]=R[0],ia[1]=R[1];if(h[0]!==t[0]||h[1]!==t[1])q.sampleCoverage(h[0],h[1]),t[0]=h[0],t[1]=h[1];if(S[0]!==k[0]||S[1]!==k[1]||S[2]!==k[2]||S[3]!==k[3])q.scissor(S[0],S[1],S[2],S[3]),k[0]=S[0],k[1]=S[1],k[2]=S[2],
k[3]=S[3];if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2])q.stencilFunc(X[0],X[1],X[2]),f[0]=X[0],f[1]=X[1],f[2]=X[2];qa!==Aa&&(q.stencilMask(qa),e.stencil_mask=qa);if(w[0]!==Y[0]||w[1]!==Y[1]||w[2]!==Y[2]||w[3]!==Y[3])q.stencilOpSeparate(w[0],w[1],w[2],w[3]),Y[0]=w[0],Y[1]=w[1],Y[2]=w[2],Y[3]=w[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])q.stencilOpSeparate(D[0],D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3];if(d[0]!==I[0]||d[1]!==I[1]||d[2]!==I[2]||d[3]!==I[3])q.viewport(d[0],d[1],
d[2],d[3]),I[0]=d[0],I[1]=d[1],I[2]=d[2],I[3]=d[3]},refresh:function(){var a,b,A,K,da,V,ea,O,P,C,g,N,M,Da,pa,m;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;K=c.depth_enable;da=c.dither;V=c.polygonOffset_enable;ea=c.sample_alpha;O=c.sample_enable;P=c.scissor_enable;C=c.stencil_enable;g=c.cull_face;N=c.depth_func;M=c.depth_mask;Da=c.frontFace;pa=c.lineWidth;m=c.stencil_mask;(a=l.next)?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null);l.cur=a;a=L[0];a.buffer?(q.enableVertexAttribArray(0),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=L[1];a.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=L[2];a.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,a.buffer.buffer),
q.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=L[3];a.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=L[4];a.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(4,a.size,
a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=L[5];a.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=L[6];a.buffer?(q.enableVertexAttribArray(6),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):
(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=L[7];a.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=L[8];a.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(8),
q.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=L[9];a.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=L[10];a.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,a.x,a.y,
a.z,a.w),a.buffer=null);a=L[11];a.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=L[12];a.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);
a=L[13];a.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=L[14];a.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(14),q.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=L[15];a.buffer?(q.enableVertexAttribArray(15),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);F.currentVAO=null;F.setVAO(F.targetVAO);b?q.enable(3042):q.disable(3042);e.blend_enable=b;A?q.enable(2884):q.disable(2884);e.cull_enable=A;K?q.enable(2929):q.disable(2929);e.depth_enable=K;da?q.enable(3024):q.disable(3024);e.dither=da;V?q.enable(32823):q.disable(32823);e.polygonOffset_enable=V;ea?q.enable(32926):
q.disable(32926);e.sample_alpha=ea;O?q.enable(32928):q.disable(32928);e.sample_enable=O;P?q.enable(3089):q.disable(3089);e.scissor_enable=P;C?q.enable(2960):q.disable(2960);e.stencil_enable=C;q.blendColor(B[0],B[1],B[2],B[3]);G[0]=B[0];G[1]=B[1];G[2]=B[2];G[3]=B[3];q.blendEquationSeparate(U[0],U[1]);n[0]=U[0];n[1]=U[1];q.blendFuncSeparate(u[0],u[1],u[2],u[3]);x[0]=u[0];x[1]=u[1];x[2]=u[2];x[3]=u[3];q.colorMask(ba[0],ba[1],ba[2],ba[3]);v[0]=ba[0];v[1]=ba[1];v[2]=ba[2];v[3]=ba[3];q.cullFace(g);e.cull_face=
g;q.depthFunc(N);e.depth_func=N;q.depthMask(M);e.depth_mask=M;q.depthRange(T[0],T[1]);z[0]=T[0];z[1]=T[1];q.frontFace(Da);e.frontFace=Da;q.lineWidth(pa);e.lineWidth=pa;q.polygonOffset(R[0],R[1]);ia[0]=R[0];ia[1]=R[1];q.sampleCoverage(h[0],h[1]);t[0]=h[0];t[1]=h[1];q.scissor(S[0],S[1],S[2],S[3]);k[0]=S[0];k[1]=S[1];k[2]=S[2];k[3]=S[3];q.stencilFunc(X[0],X[1],X[2]);f[0]=X[0];f[1]=X[1];f[2]=X[2];q.stencilMask(m);e.stencil_mask=m;q.stencilOpSeparate(w[0],w[1],w[2],w[3]);Y[0]=w[0];Y[1]=w[1];Y[2]=w[2];
Y[3]=w[3];q.stencilOpSeparate(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=D[1];E[2]=D[2];E[3]=D[3];q.viewport(d[0],d[1],d[2],d[3]);I[0]=d[0];I[1]=d[1];I[2]=d[2];I[3]=d[3]}}},$7:function(b,da,K,L,e,l,q,c){var F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Z,V,ea,O;F=b.context;B=b.current;G=b.framebuffer;U=b.gl;n=b.next;u=b.shader;x=b.vao;ba=n.blend_color;v=B.blend_color;T=n.blend_equation;z=B.blend_equation;R=n.blend_func;ia=B.blend_func;h=n.colorMask;t=B.colorMask;S=n.depth_range;k=B.depth_range;
X=n.polygonOffset_offset;f=B.polygonOffset_offset;w=n.sample_coverage;Y=B.sample_coverage;D=n.scissor_box;E=B.scissor_box;d=n.stencil_func;I=B.stencil_func;a=n.stencil_opBack;ta=B.stencil_opBack;A=n.stencil_opFront;ja=B.stencil_opFront;Z=n.viewport;V=B.viewport;ea={};O={};return{draw:function(c){var b,g,q,D,O,pa,m,J,aa,Q;b=c.framebuffer;g=G.getFramebuffer(b);b&&!g&&da.commandRaise(e,K);b=G.next;G.next=g;q=F.framebufferWidth;F.framebufferWidth=g?g.width:F.drawingBufferWidth;D=F.framebufferHeight;F.framebufferHeight=
g?g.height:F.drawingBufferHeight;g!==G.cur&&(g?U.bindFramebuffer(36160,g.framebuffer):U.bindFramebuffer(36160,null),G.cur=g);if(B.dirty){g=n.dither;g!==B.dither&&(g?U.enable(3024):U.disable(3024),B.dither=g);g=n.blend_enable;g!==B.blend_enable&&(g?U.enable(3042):U.disable(3042),B.blend_enable=g);g=ba[0];m=ba[1];O=ba[2];pa=ba[3];if(g!==v[0]||m!==v[1]||O!==v[2]||pa!==v[3])U.blendColor(g,m,O,pa),v[0]=g,v[1]=m,v[2]=O,v[3]=pa;g=T[0];m=T[1];if(g!==z[0]||m!==z[1])U.blendEquationSeparate(g,m),z[0]=g,z[1]=
m;g=R[0];m=R[1];O=R[2];pa=R[3];if(g!==ia[0]||m!==ia[1]||O!==ia[2]||pa!==ia[3])U.blendFuncSeparate(g,m,O,pa),ia[0]=g,ia[1]=m,ia[2]=O,ia[3]=pa;g=n.depth_enable;g!==B.depth_enable&&(g?U.enable(2929):U.disable(2929),B.depth_enable=g);g=n.depth_func;g!==B.depth_func&&(U.depthFunc(g),B.depth_func=g);g=S[0];m=S[1];if(g!==k[0]||m!==k[1])U.depthRange(g,m),k[0]=g,k[1]=m;g=n.depth_mask;g!==B.depth_mask&&(U.depthMask(g),B.depth_mask=g);g=h[0];m=h[1];O=h[2];pa=h[3];if(g!==t[0]||m!==t[1]||O!==t[2]||pa!==t[3])U.colorMask(g,
m,O,pa),t[0]=g,t[1]=m,t[2]=O,t[3]=pa;g=n.cull_enable;g!==B.cull_enable&&(g?U.enable(2884):U.disable(2884),B.cull_enable=g);g=n.cull_face;g!==B.cull_face&&(U.cullFace(g),B.cull_face=g);g=n.frontFace;g!==B.frontFace&&(U.frontFace(g),B.frontFace=g);g=n.lineWidth;g!==B.lineWidth&&(U.lineWidth(g),B.lineWidth=g);g=n.polygonOffset_enable;g!==B.polygonOffset_enable&&(g?U.enable(32823):U.disable(32823),B.polygonOffset_enable=g);g=X[0];m=X[1];if(g!==f[0]||m!==f[1])U.polygonOffset(g,m),f[0]=g,f[1]=m;g=n.sample_alpha;
g!==B.sample_alpha&&(g?U.enable(32926):U.disable(32926),B.sample_alpha=g);g=n.sample_enable;g!==B.sample_enable&&(g?U.enable(32928):U.disable(32928),B.sample_enable=g);g=w[0];m=w[1];if(g!==Y[0]||m!==Y[1])U.sampleCoverage(g,m),Y[0]=g,Y[1]=m;g=n.stencil_enable;g!==B.stencil_enable&&(g?U.enable(2960):U.disable(2960),B.stencil_enable=g);g=n.stencil_mask;g!==B.stencil_mask&&(U.stencilMask(g),B.stencil_mask=g);g=d[0];m=d[1];O=d[2];if(g!==I[0]||m!==I[1]||O!==I[2])U.stencilFunc(g,m,O),I[0]=g,I[1]=m,I[2]=
O;g=A[0];m=A[1];O=A[2];pa=A[3];if(g!==ja[0]||m!==ja[1]||O!==ja[2]||pa!==ja[3])U.stencilOpSeparate(g,m,O,pa),ja[0]=g,ja[1]=m,ja[2]=O,ja[3]=pa;g=a[0];m=a[1];O=a[2];pa=a[3];if(g!==ta[0]||m!==ta[1]||O!==ta[2]||pa!==ta[3])U.stencilOpSeparate(g,m,O,pa),ta[0]=g,ta[1]=m,ta[2]=O,ta[3]=pa;g=n.scissor_enable;g!==B.scissor_enable&&(g?U.enable(3089):U.disable(3089),B.scissor_enable=g)}O=F.framebufferWidth;pa=F.framebufferHeight;g=F.viewportWidth;F.viewportWidth=O;m=F.viewportHeight;F.viewportHeight=pa;U.viewport(0,
0,O,pa);V[0]=0;V[1]=0;V[2]=O;V[3]=pa;O=F.framebufferWidth;pa=F.framebufferHeight;U.scissor(0,0,O,pa);E[0]=0;E[1]=0;E[2]=O;E[3]=pa;if(O=B.profile)J=performance.now(),L.count++;pa=u.program(u.vert,u.frag,K);U.useProgram(pa.program);x.setVAO(null);aa=pa.id;(Q=ea[aa])||(Q=ea[aa]=l(pa));Q.call(this,c);B.dirty=!0;x.setVAO(null);G.next=b;F.framebufferWidth=q;F.framebufferHeight=D;F.viewportWidth=g;F.viewportHeight=m;O&&(L.cpuTime+=performance.now()-J)},scope:function(a,d,c){var f,h,l,b,k,t,w,e,A,v,O,E,fa,
I,u;f=a.framebuffer;h=G.getFramebuffer(f);f&&!h&&da.commandRaise(q,K);f=G.next;G.next=h;l=F.framebufferWidth;F.framebufferWidth=h?h.width:F.drawingBufferWidth;b=F.framebufferHeight;F.framebufferHeight=h?h.height:F.drawingBufferHeight;k=F.framebufferWidth;t=F.framebufferHeight;h=F.viewportWidth;F.viewportWidth=k;w=F.viewportHeight;F.viewportHeight=t;e=Z[0];Z[0]=0;A=Z[1];Z[1]=0;v=Z[2];Z[2]=k;k=Z[3];Z[3]=t;O=F.framebufferWidth;E=F.framebufferHeight;t=D[0];D[0]=0;fa=D[1];D[1]=0;I=D[2];D[2]=O;O=D[3];D[3]=
E;if(E=B.profile)u=performance.now(),L.count++;B.dirty=!0;d(F,a,c);G.next=f;F.framebufferWidth=l;F.framebufferHeight=b;F.viewportWidth=h;F.viewportHeight=w;Z[0]=e;Z[1]=A;Z[2]=v;Z[3]=k;D[0]=t;D[1]=fa;D[2]=I;D[3]=O;E&&(L.cpuTime+=performance.now()-u);B.dirty=!0},batch:function(l,b){var g,q,e,D,E;if(B.dirty){g=n.dither;g!==B.dither&&(g?U.enable(3024):U.disable(3024),B.dither=g);g=n.blend_enable;g!==B.blend_enable&&(g?U.enable(3042):U.disable(3042),B.blend_enable=g);g=ba[0];e=ba[1];D=ba[2];E=ba[3];if(g!==
v[0]||e!==v[1]||D!==v[2]||E!==v[3])U.blendColor(g,e,D,E),v[0]=g,v[1]=e,v[2]=D,v[3]=E;g=T[0];e=T[1];if(g!==z[0]||e!==z[1])U.blendEquationSeparate(g,e),z[0]=g,z[1]=e;g=R[0];e=R[1];D=R[2];E=R[3];if(g!==ia[0]||e!==ia[1]||D!==ia[2]||E!==ia[3])U.blendFuncSeparate(g,e,D,E),ia[0]=g,ia[1]=e,ia[2]=D,ia[3]=E;g=n.depth_enable;g!==B.depth_enable&&(g?U.enable(2929):U.disable(2929),B.depth_enable=g);g=n.depth_func;g!==B.depth_func&&(U.depthFunc(g),B.depth_func=g);g=S[0];e=S[1];if(g!==k[0]||e!==k[1])U.depthRange(g,
e),k[0]=g,k[1]=e;g=n.depth_mask;g!==B.depth_mask&&(U.depthMask(g),B.depth_mask=g);g=h[0];e=h[1];D=h[2];E=h[3];if(g!==t[0]||e!==t[1]||D!==t[2]||E!==t[3])U.colorMask(g,e,D,E),t[0]=g,t[1]=e,t[2]=D,t[3]=E;g=n.cull_enable;g!==B.cull_enable&&(g?U.enable(2884):U.disable(2884),B.cull_enable=g);g=n.cull_face;g!==B.cull_face&&(U.cullFace(g),B.cull_face=g);g=n.frontFace;g!==B.frontFace&&(U.frontFace(g),B.frontFace=g);g=n.lineWidth;g!==B.lineWidth&&(U.lineWidth(g),B.lineWidth=g);g=n.polygonOffset_enable;g!==
B.polygonOffset_enable&&(g?U.enable(32823):U.disable(32823),B.polygonOffset_enable=g);g=X[0];e=X[1];if(g!==f[0]||e!==f[1])U.polygonOffset(g,e),f[0]=g,f[1]=e;g=n.sample_alpha;g!==B.sample_alpha&&(g?U.enable(32926):U.disable(32926),B.sample_alpha=g);g=n.sample_enable;g!==B.sample_enable&&(g?U.enable(32928):U.disable(32928),B.sample_enable=g);g=w[0];e=w[1];if(g!==Y[0]||e!==Y[1])U.sampleCoverage(g,e),Y[0]=g,Y[1]=e;g=n.stencil_enable;g!==B.stencil_enable&&(g?U.enable(2960):U.disable(2960),B.stencil_enable=
g);g=n.stencil_mask;g!==B.stencil_mask&&(U.stencilMask(g),B.stencil_mask=g);g=d[0];e=d[1];D=d[2];if(g!==I[0]||e!==I[1]||D!==I[2])U.stencilFunc(g,e,D),I[0]=g,I[1]=e,I[2]=D;g=A[0];e=A[1];D=A[2];E=A[3];if(g!==ja[0]||e!==ja[1]||D!==ja[2]||E!==ja[3])U.stencilOpSeparate(g,e,D,E),ja[0]=g,ja[1]=e,ja[2]=D,ja[3]=E;g=a[0];e=a[1];D=a[2];E=a[3];if(g!==ta[0]||e!==ta[1]||D!==ta[2]||E!==ta[3])U.stencilOpSeparate(g,e,D,E),ta[0]=g,ta[1]=e,ta[2]=D,ta[3]=E;g=n.scissor_enable;g!==B.scissor_enable&&(g?U.enable(3089):U.disable(3089),
B.scissor_enable=g)}if(g=B.profile)q=performance.now(),L.count+=b;e=u.program(u.vert,u.frag,K);U.useProgram(e.program);x.setVAO(null);D=e.id;(E=O[D])||(E=O[D]=c(e));E.call(this,l,b);B.dirty=!0;x.setVAO(null);g&&(L.cpuTime+=performance.now()-q)}}},$5:function(b,da,K,L,e,l){var q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Z,V;q=b.context;c=b.current;F=b.framebuffer;B=b.gl;G=b.next;U=b.shader;n=b.vao;u=G.blend_color;x=c.blend_color;ba=G.blend_equation;v=c.blend_equation;T=G.blend_func;
z=c.blend_func;R=G.colorMask;ia=c.colorMask;h=G.depth_range;t=c.depth_range;S=G.polygonOffset_offset;k=c.polygonOffset_offset;X=G.sample_coverage;f=c.sample_coverage;w=G.scissor_box;Y=c.scissor_box;D=G.stencil_func;E=c.stencil_func;d=G.stencil_opBack;I=c.stencil_opBack;a=G.stencil_opFront;ta=c.stencil_opFront;A=G.viewport;ja=c.viewport;Z={};V={};return{draw:function(l){var b,q,C,g,N;b=F.next;b!==F.cur&&(b?B.bindFramebuffer(36160,b.framebuffer):B.bindFramebuffer(36160,null),F.cur=b);if(c.dirty){b=
G.dither;b!==c.dither&&(b?B.enable(3024):B.disable(3024),c.dither=b);b=G.blend_enable;b!==c.blend_enable&&(b?B.enable(3042):B.disable(3042),c.blend_enable=b);b=u[0];C=u[1];g=u[2];N=u[3];if(b!==x[0]||C!==x[1]||g!==x[2]||N!==x[3])B.blendColor(b,C,g,N),x[0]=b,x[1]=C,x[2]=g,x[3]=N;b=ba[0];C=ba[1];if(b!==v[0]||C!==v[1])B.blendEquationSeparate(b,C),v[0]=b,v[1]=C;b=T[0];C=T[1];g=T[2];N=T[3];if(b!==z[0]||C!==z[1]||g!==z[2]||N!==z[3])B.blendFuncSeparate(b,C,g,N),z[0]=b,z[1]=C,z[2]=g,z[3]=N;b=G.depth_enable;
b!==c.depth_enable&&(b?B.enable(2929):B.disable(2929),c.depth_enable=b);b=G.depth_func;b!==c.depth_func&&(B.depthFunc(b),c.depth_func=b);b=h[0];C=h[1];if(b!==t[0]||C!==t[1])B.depthRange(b,C),t[0]=b,t[1]=C;b=G.depth_mask;b!==c.depth_mask&&(B.depthMask(b),c.depth_mask=b);b=R[0];C=R[1];g=R[2];N=R[3];if(b!==ia[0]||C!==ia[1]||g!==ia[2]||N!==ia[3])B.colorMask(b,C,g,N),ia[0]=b,ia[1]=C,ia[2]=g,ia[3]=N;b=G.cull_enable;b!==c.cull_enable&&(b?B.enable(2884):B.disable(2884),c.cull_enable=b);b=G.cull_face;b!==
c.cull_face&&(B.cullFace(b),c.cull_face=b);b=G.frontFace;b!==c.frontFace&&(B.frontFace(b),c.frontFace=b);b=G.lineWidth;b!==c.lineWidth&&(B.lineWidth(b),c.lineWidth=b);b=G.polygonOffset_enable;b!==c.polygonOffset_enable&&(b?B.enable(32823):B.disable(32823),c.polygonOffset_enable=b);b=S[0];C=S[1];if(b!==k[0]||C!==k[1])B.polygonOffset(b,C),k[0]=b,k[1]=C;b=G.sample_alpha;b!==c.sample_alpha&&(b?B.enable(32926):B.disable(32926),c.sample_alpha=b);b=G.sample_enable;b!==c.sample_enable&&(b?B.enable(32928):
B.disable(32928),c.sample_enable=b);b=X[0];C=X[1];if(b!==f[0]||C!==f[1])B.sampleCoverage(b,C),f[0]=b,f[1]=C;b=G.stencil_enable;b!==c.stencil_enable&&(b?B.enable(2960):B.disable(2960),c.stencil_enable=b);b=G.stencil_mask;b!==c.stencil_mask&&(B.stencilMask(b),c.stencil_mask=b);b=D[0];C=D[1];g=D[2];if(b!==E[0]||C!==E[1]||g!==E[2])B.stencilFunc(b,C,g),E[0]=b,E[1]=C,E[2]=g;b=a[0];C=a[1];g=a[2];N=a[3];if(b!==ta[0]||C!==ta[1]||g!==ta[2]||N!==ta[3])B.stencilOpSeparate(b,C,g,N),ta[0]=b,ta[1]=C,ta[2]=g,ta[3]=
N;b=d[0];C=d[1];g=d[2];N=d[3];if(b!==I[0]||C!==I[1]||g!==I[2]||N!==I[3])B.stencilOpSeparate(b,C,g,N),I[0]=b,I[1]=C,I[2]=g,I[3]=N;b=G.scissor_enable;b!==c.scissor_enable&&(b?B.enable(3089):B.disable(3089),c.scissor_enable=b);b=w[0];C=w[1];g=w[2];N=w[3];if(b!==Y[0]||C!==Y[1]||g!==Y[2]||N!==Y[3])B.scissor(b,C,g,N),Y[0]=b,Y[1]=C,Y[2]=g,Y[3]=N;b=A[0];C=A[1];g=A[2];N=A[3];if(b!==ja[0]||C!==ja[1]||g!==ja[2]||N!==ja[3])B.viewport(b,C,g,N),ja[0]=b,ja[1]=C,ja[2]=g,ja[3]=N;c.dirty=!1}if(b=c.profile)q=performance.now(),
L.count++;C=U.program(U.vert,U.frag,K);B.useProgram(C.program);n.setVAO(null);g=C.id;(N=Z[g])||(N=Z[g]=e(C));N.call(this,l);n.setVAO(null);b&&(L.cpuTime+=performance.now()-q)},scope:function(a,d,f){var b,g;if(b=c.profile)g=performance.now(),L.count++;d(q,a,f);b&&(L.cpuTime+=performance.now()-g)},batch:function(b,q){var e,C,g,N,M;e=F.next;e!==F.cur&&(e?B.bindFramebuffer(36160,e.framebuffer):B.bindFramebuffer(36160,null),F.cur=e);if(c.dirty){e=G.dither;e!==c.dither&&(e?B.enable(3024):B.disable(3024),
c.dither=e);e=G.blend_enable;e!==c.blend_enable&&(e?B.enable(3042):B.disable(3042),c.blend_enable=e);e=u[0];g=u[1];N=u[2];M=u[3];if(e!==x[0]||g!==x[1]||N!==x[2]||M!==x[3])B.blendColor(e,g,N,M),x[0]=e,x[1]=g,x[2]=N,x[3]=M;e=ba[0];g=ba[1];if(e!==v[0]||g!==v[1])B.blendEquationSeparate(e,g),v[0]=e,v[1]=g;e=T[0];g=T[1];N=T[2];M=T[3];if(e!==z[0]||g!==z[1]||N!==z[2]||M!==z[3])B.blendFuncSeparate(e,g,N,M),z[0]=e,z[1]=g,z[2]=N,z[3]=M;e=G.depth_enable;e!==c.depth_enable&&(e?B.enable(2929):B.disable(2929),c.depth_enable=
e);e=G.depth_func;e!==c.depth_func&&(B.depthFunc(e),c.depth_func=e);e=h[0];g=h[1];if(e!==t[0]||g!==t[1])B.depthRange(e,g),t[0]=e,t[1]=g;e=G.depth_mask;e!==c.depth_mask&&(B.depthMask(e),c.depth_mask=e);e=R[0];g=R[1];N=R[2];M=R[3];if(e!==ia[0]||g!==ia[1]||N!==ia[2]||M!==ia[3])B.colorMask(e,g,N,M),ia[0]=e,ia[1]=g,ia[2]=N,ia[3]=M;e=G.cull_enable;e!==c.cull_enable&&(e?B.enable(2884):B.disable(2884),c.cull_enable=e);e=G.cull_face;e!==c.cull_face&&(B.cullFace(e),c.cull_face=e);e=G.frontFace;e!==c.frontFace&&
(B.frontFace(e),c.frontFace=e);e=G.lineWidth;e!==c.lineWidth&&(B.lineWidth(e),c.lineWidth=e);e=G.polygonOffset_enable;e!==c.polygonOffset_enable&&(e?B.enable(32823):B.disable(32823),c.polygonOffset_enable=e);e=S[0];g=S[1];if(e!==k[0]||g!==k[1])B.polygonOffset(e,g),k[0]=e,k[1]=g;e=G.sample_alpha;e!==c.sample_alpha&&(e?B.enable(32926):B.disable(32926),c.sample_alpha=e);e=G.sample_enable;e!==c.sample_enable&&(e?B.enable(32928):B.disable(32928),c.sample_enable=e);e=X[0];g=X[1];if(e!==f[0]||g!==f[1])B.sampleCoverage(e,
g),f[0]=e,f[1]=g;e=G.stencil_enable;e!==c.stencil_enable&&(e?B.enable(2960):B.disable(2960),c.stencil_enable=e);e=G.stencil_mask;e!==c.stencil_mask&&(B.stencilMask(e),c.stencil_mask=e);e=D[0];g=D[1];N=D[2];if(e!==E[0]||g!==E[1]||N!==E[2])B.stencilFunc(e,g,N),E[0]=e,E[1]=g,E[2]=N;e=a[0];g=a[1];N=a[2];M=a[3];if(e!==ta[0]||g!==ta[1]||N!==ta[2]||M!==ta[3])B.stencilOpSeparate(e,g,N,M),ta[0]=e,ta[1]=g,ta[2]=N,ta[3]=M;e=d[0];g=d[1];N=d[2];M=d[3];if(e!==I[0]||g!==I[1]||N!==I[2]||M!==I[3])B.stencilOpSeparate(e,
g,N,M),I[0]=e,I[1]=g,I[2]=N,I[3]=M;e=G.scissor_enable;e!==c.scissor_enable&&(e?B.enable(3089):B.disable(3089),c.scissor_enable=e);e=w[0];g=w[1];N=w[2];M=w[3];if(e!==Y[0]||g!==Y[1]||N!==Y[2]||M!==Y[3])B.scissor(e,g,N,M),Y[0]=e,Y[1]=g,Y[2]=N,Y[3]=M;e=A[0];g=A[1];N=A[2];M=A[3];if(e!==ja[0]||g!==ja[1]||N!==ja[2]||M!==ja[3])B.viewport(e,g,N,M),ja[0]=e,ja[1]=g,ja[2]=N,ja[3]=M;c.dirty=!1}if(e=c.profile)C=performance.now(),L.count+=q;g=U.program(U.vert,U.frag,K);B.useProgram(g.program);n.setVAO(null);N=g.id;
(M=V[N])||(M=V[N]=l(g));M.call(this,b,q);n.setVAO(null);e&&(L.cpuTime+=performance.now()-C)}}},"$26,color,freq,phase,projection,time,view":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I){var a,ta,A,ja,Z,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,ha,Hb,ga;a=b.attributes;ta=b.context;A=b.current;ja=b.draw;Z=b.elements;V=b.framebuffer;ea=b.gl;O=b.isArrayLike;P=b.next;C=b.shader;g=b.uniforms;N=b.vao;M=P.blend_color;Da=A.blend_color;
pa=P.blend_equation;m=A.blend_equation;J=P.blend_func;aa=A.blend_func;Q=P.colorMask;ma=A.colorMask;qa=P.depth_range;Aa=A.depth_range;wa=P.polygonOffset_offset;fa=A.polygonOffset_offset;Ba=P.sample_coverage;ka=A.sample_coverage;oa=P.scissor_box;ya=A.scissor_box;Ja=P.stencil_func;na=A.stencil_func;Xa=P.stencil_opBack;Ta=A.stencil_opBack;r=P.stencil_opFront;p=A.stencil_opFront;y=P.viewport;va=A.viewport;Ea=new Float32Array(16);ha=new Float32Array(16);Hb=new Float32Array(16);ga=new Float32Array(16);return{draw:function(g){var f,
b,h,k;f=V.next;f!==V.cur&&(f?ea.bindFramebuffer(36160,f.framebuffer):ea.bindFramebuffer(36160,null),V.cur=f);if(A.dirty){var t;f=P.dither;f!==A.dither&&(f?ea.enable(3024):ea.disable(3024),A.dither=f);f=P.blend_enable;f!==A.blend_enable&&(f?ea.enable(3042):ea.disable(3042),A.blend_enable=f);f=M[0];h=M[1];k=M[2];t=M[3];if(f!==Da[0]||h!==Da[1]||k!==Da[2]||t!==Da[3])ea.blendColor(f,h,k,t),Da[0]=f,Da[1]=h,Da[2]=k,Da[3]=t;f=pa[0];h=pa[1];if(f!==m[0]||h!==m[1])ea.blendEquationSeparate(f,h),m[0]=f,m[1]=h;
f=J[0];h=J[1];k=J[2];t=J[3];if(f!==aa[0]||h!==aa[1]||k!==aa[2]||t!==aa[3])ea.blendFuncSeparate(f,h,k,t),aa[0]=f,aa[1]=h,aa[2]=k,aa[3]=t;f=P.depth_enable;f!==A.depth_enable&&(f?ea.enable(2929):ea.disable(2929),A.depth_enable=f);f=P.depth_func;f!==A.depth_func&&(ea.depthFunc(f),A.depth_func=f);f=qa[0];h=qa[1];if(f!==Aa[0]||h!==Aa[1])ea.depthRange(f,h),Aa[0]=f,Aa[1]=h;f=P.depth_mask;f!==A.depth_mask&&(ea.depthMask(f),A.depth_mask=f);f=Q[0];h=Q[1];k=Q[2];t=Q[3];if(f!==ma[0]||h!==ma[1]||k!==ma[2]||t!==
ma[3])ea.colorMask(f,h,k,t),ma[0]=f,ma[1]=h,ma[2]=k,ma[3]=t;f=P.cull_enable;f!==A.cull_enable&&(f?ea.enable(2884):ea.disable(2884),A.cull_enable=f);f=P.cull_face;f!==A.cull_face&&(ea.cullFace(f),A.cull_face=f);f=P.frontFace;f!==A.frontFace&&(ea.frontFace(f),A.frontFace=f);f=P.lineWidth;f!==A.lineWidth&&(ea.lineWidth(f),A.lineWidth=f);f=P.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=f);f=wa[0];h=wa[1];if(f!==fa[0]||h!==fa[1])ea.polygonOffset(f,
h),fa[0]=f,fa[1]=h;f=P.sample_alpha;f!==A.sample_alpha&&(f?ea.enable(32926):ea.disable(32926),A.sample_alpha=f);f=P.sample_enable;f!==A.sample_enable&&(f?ea.enable(32928):ea.disable(32928),A.sample_enable=f);f=Ba[0];h=Ba[1];if(f!==ka[0]||h!==ka[1])ea.sampleCoverage(f,h),ka[0]=f,ka[1]=h;f=P.stencil_enable;f!==A.stencil_enable&&(f?ea.enable(2960):ea.disable(2960),A.stencil_enable=f);f=P.stencil_mask;f!==A.stencil_mask&&(ea.stencilMask(f),A.stencil_mask=f);f=Ja[0];h=Ja[1];k=Ja[2];if(f!==na[0]||h!==na[1]||
k!==na[2])ea.stencilFunc(f,h,k),na[0]=f,na[1]=h,na[2]=k;f=r[0];h=r[1];k=r[2];t=r[3];if(f!==p[0]||h!==p[1]||k!==p[2]||t!==p[3])ea.stencilOpSeparate(f,h,k,t),p[0]=f,p[1]=h,p[2]=k,p[3]=t;f=Xa[0];h=Xa[1];k=Xa[2];t=Xa[3];if(f!==Ta[0]||h!==Ta[1]||k!==Ta[2]||t!==Ta[3])ea.stencilOpSeparate(f,h,k,t),Ta[0]=f,Ta[1]=h,Ta[2]=k,Ta[3]=t;f=P.scissor_enable;f!==A.scissor_enable&&(f?ea.enable(3089):ea.disable(3089),A.scissor_enable=f);f=oa[0];h=oa[1];k=oa[2];t=oa[3];if(f!==ya[0]||h!==ya[1]||k!==ya[2]||t!==ya[3])ea.scissor(f,
h,k,t),ya[0]=f,ya[1]=h,ya[2]=k,ya[3]=t;f=y[0];h=y[1];k=y[2];t=y[3];if(f!==va[0]||h!==va[1]||k!==va[2]||t!==va[3])ea.viewport(f,h,k,t),va[0]=f,va[1]=h,va[2]=k,va[3]=t;A.dirty=!1}if(f=A.profile)b=performance.now(),L.count++;ea.useProgram(e.program);N.setVAO(null);h=Y.location;k=a[h];k.buffer||ea.enableVertexAttribArray(h);if(5126!==k.type||4!==k.size||k.buffer!==l||!1!==k.normalized||0!==k.offset||44!==k.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(h,4,5126,!1,44,0),k.type=5126,k.size=
4,k.buffer=l,k.normalized=!1,k.offset=0,k.stride=44;h=D.location;k=a[h];k.buffer||ea.enableVertexAttribArray(h);if(5126!==k.type||4!==k.size||k.buffer!==q||!1!==k.normalized||16!==k.offset||44!==k.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(h,4,5126,!1,44,16),k.type=5126,k.size=4,k.buffer=q,k.normalized=!1,k.offset=16,k.stride=44;h=w.location;k=a[h];k.buffer||ea.enableVertexAttribArray(h);if(5126!==k.type||3!==k.size||k.buffer!==c||!1!==k.normalized||32!==k.offset||44!==k.stride)ea.bindBuffer(34962,
c.buffer),ea.vertexAttribPointer(h,3,5126,!1,44,32),k.type=5126,k.size=3,k.buffer=c,k.normalized=!1,k.offset=32,k.stride=44;h=F.call(this,ta,g,0);"number"!==typeof h&&da.commandRaise(B,K);ea.uniform1f(d.location,h);h=G.call(this,ta,g,0);O(h)&&16===h.length||da.commandRaise(U,K);ea.uniformMatrix4fv(I.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ea[0]=h[0],Ea[1]=h[1],Ea[2]=h[2],Ea[3]=h[3],Ea[4]=h[4],Ea[5]=h[5],Ea[6]=h[6],Ea[7]=h[7],Ea[8]=h[8],Ea[9]=h[9],Ea[10]=h[10],Ea[11]=h[11],Ea[12]=
h[12],Ea[13]=h[13],Ea[14]=h[14],Ea[15]=h[15],Ea));g=n.call(this,ta,g,0);O(g)&&16===g.length||da.commandRaise(u,K);ea.uniformMatrix4fv(E.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(ha[0]=g[0],ha[1]=g[1],ha[2]=g[2],ha[3]=g[3],ha[4]=g[4],ha[5]=g[5],ha[6]=g[6],ha[7]=g[7],ha[8]=g[8],ha[9]=g[9],ha[10]=g[10],ha[11]=g[11],ha[12]=g[12],ha[13]=g[13],ha[14]=g[14],ha[15]=g[15],ha));(g=ja.elements)?ea.bindBuffer(34963,g.buffer.buffer):N.currentVAO&&(g=Z.getElements(N.currentVAO.elements))&&ea.bindBuffer(34963,
g.buffer.buffer);h=ja.offset;g?ea.drawElements(0,1E4,g.type,h<<(g.type-5121>>1)):ea.drawArrays(0,h,1E4);N.setVAO(null);f&&(L.cpuTime+=performance.now()-b)},scope:function(a,d,f){var h,b,k,m,r,p,e,y,t,w,na,D,J,E,Q,fa,I,ga,u,Xa,Ja,n,K,B,N,aa,M,O,F,va,P,wa,qa,G,S,U,ka,V,X,da,ea,Da,Ta,Y,oa;if(h=A.profile)b=performance.now(),L.count++;k=ja.count;ja.count=1E4;m=ja.primitive;ja.primitive=0;r=x.call(this,ta,a,f);p=g[5];g[5]=r;e=ba.call(this,ta,a,f);r=g[3];g[3]=e;y=v.call(this,ta,a,f);e=g[4];g[4]=y;y=T.buffer;
T.buffer=c;t=T.divisor;T.divisor=0;w=T.normalized;T.normalized=!1;na=T.offset;T.offset=32;D=T.size;T.size=0;J=T.state;T.state=1;E=T.stride;T.stride=44;Q=T.type;T.type=5126;fa=T.w;T.w=0;I=T.x;T.x=0;ga=T.y;T.y=0;u=T.z;T.z=0;Xa=z.buffer;z.buffer=l;Ja=z.divisor;z.divisor=0;n=z.normalized;z.normalized=!1;K=z.offset;z.offset=0;B=z.size;z.size=0;N=z.state;z.state=1;aa=z.stride;z.stride=44;M=z.type;z.type=5126;O=z.w;z.w=0;F=z.x;z.x=0;va=z.y;z.y=0;P=z.z;z.z=0;wa=R.buffer;R.buffer=q;qa=R.divisor;R.divisor=
0;G=R.normalized;R.normalized=!1;S=R.offset;R.offset=16;U=R.size;R.size=0;ka=R.state;R.state=1;V=R.stride;R.stride=44;X=R.type;R.type=5126;da=R.w;R.w=0;ea=R.x;R.x=0;Da=R.y;R.y=0;Ta=R.z;R.z=0;Y=C.vert;C.vert=2;oa=C.frag;C.frag=1;d(ta,a,f);h&&(L.cpuTime+=performance.now()-b);ja.count=k;ja.primitive=m;g[5]=p;g[3]=r;g[4]=e;T.buffer=y;T.divisor=t;T.normalized=w;T.offset=na;T.size=D;T.state=J;T.stride=E;T.type=Q;T.w=fa;T.x=I;T.y=ga;T.z=u;z.buffer=Xa;z.divisor=Ja;z.normalized=n;z.offset=K;z.size=B;z.state=
N;z.stride=aa;z.type=M;z.w=O;z.x=F;z.y=va;z.z=P;R.buffer=wa;R.divisor=qa;R.normalized=G;R.offset=S;R.size=U;R.state=ka;R.stride=V;R.type=X;R.w=da;R.x=ea;R.y=Da;R.z=Ta;C.vert=Y;C.frag=oa},batch:function(g,b){var e,v,C;e=V.next;e!==V.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),V.cur=e);if(A.dirty){var u,n,z;e=P.dither;e!==A.dither&&(e?ea.enable(3024):ea.disable(3024),A.dither=e);e=P.blend_enable;e!==A.blend_enable&&(e?ea.enable(3042):ea.disable(3042),A.blend_enable=
e);e=M[0];u=M[1];n=M[2];z=M[3];if(e!==Da[0]||u!==Da[1]||n!==Da[2]||z!==Da[3])ea.blendColor(e,u,n,z),Da[0]=e,Da[1]=u,Da[2]=n,Da[3]=z;e=pa[0];u=pa[1];if(e!==m[0]||u!==m[1])ea.blendEquationSeparate(e,u),m[0]=e,m[1]=u;e=J[0];u=J[1];n=J[2];z=J[3];if(e!==aa[0]||u!==aa[1]||n!==aa[2]||z!==aa[3])ea.blendFuncSeparate(e,u,n,z),aa[0]=e,aa[1]=u,aa[2]=n,aa[3]=z;e=P.depth_enable;e!==A.depth_enable&&(e?ea.enable(2929):ea.disable(2929),A.depth_enable=e);e=P.depth_func;e!==A.depth_func&&(ea.depthFunc(e),A.depth_func=
e);e=qa[0];u=qa[1];if(e!==Aa[0]||u!==Aa[1])ea.depthRange(e,u),Aa[0]=e,Aa[1]=u;e=P.depth_mask;e!==A.depth_mask&&(ea.depthMask(e),A.depth_mask=e);e=Q[0];u=Q[1];n=Q[2];z=Q[3];if(e!==ma[0]||u!==ma[1]||n!==ma[2]||z!==ma[3])ea.colorMask(e,u,n,z),ma[0]=e,ma[1]=u,ma[2]=n,ma[3]=z;e=P.cull_enable;e!==A.cull_enable&&(e?ea.enable(2884):ea.disable(2884),A.cull_enable=e);e=P.cull_face;e!==A.cull_face&&(ea.cullFace(e),A.cull_face=e);e=P.frontFace;e!==A.frontFace&&(ea.frontFace(e),A.frontFace=e);e=P.lineWidth;e!==
A.lineWidth&&(ea.lineWidth(e),A.lineWidth=e);e=P.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=e);e=wa[0];u=wa[1];if(e!==fa[0]||u!==fa[1])ea.polygonOffset(e,u),fa[0]=e,fa[1]=u;e=P.sample_alpha;e!==A.sample_alpha&&(e?ea.enable(32926):ea.disable(32926),A.sample_alpha=e);e=P.sample_enable;e!==A.sample_enable&&(e?ea.enable(32928):ea.disable(32928),A.sample_enable=e);e=Ba[0];u=Ba[1];if(e!==ka[0]||u!==ka[1])ea.sampleCoverage(e,u),ka[0]=e,ka[1]=
u;e=P.stencil_enable;e!==A.stencil_enable&&(e?ea.enable(2960):ea.disable(2960),A.stencil_enable=e);e=P.stencil_mask;e!==A.stencil_mask&&(ea.stencilMask(e),A.stencil_mask=e);e=Ja[0];u=Ja[1];n=Ja[2];if(e!==na[0]||u!==na[1]||n!==na[2])ea.stencilFunc(e,u,n),na[0]=e,na[1]=u,na[2]=n;e=r[0];u=r[1];n=r[2];z=r[3];if(e!==p[0]||u!==p[1]||n!==p[2]||z!==p[3])ea.stencilOpSeparate(e,u,n,z),p[0]=e,p[1]=u,p[2]=n,p[3]=z;e=Xa[0];u=Xa[1];n=Xa[2];z=Xa[3];if(e!==Ta[0]||u!==Ta[1]||n!==Ta[2]||z!==Ta[3])ea.stencilOpSeparate(e,
u,n,z),Ta[0]=e,Ta[1]=u,Ta[2]=n,Ta[3]=z;e=P.scissor_enable;e!==A.scissor_enable&&(e?ea.enable(3089):ea.disable(3089),A.scissor_enable=e);e=oa[0];u=oa[1];n=oa[2];z=oa[3];if(e!==ya[0]||u!==ya[1]||n!==ya[2]||z!==ya[3])ea.scissor(e,u,n,z),ya[0]=e,ya[1]=u,ya[2]=n,ya[3]=z;e=y[0];u=y[1];n=y[2];z=y[3];if(e!==va[0]||u!==va[1]||n!==va[2]||z!==va[3])ea.viewport(e,u,n,z),va[0]=e,va[1]=u,va[2]=n,va[3]=z;A.dirty=!1}if(e=A.profile)v=performance.now(),L.count+=b;ea.useProgram(ia.program);N.setVAO(null);u=Y.location;
n=a[u];n.buffer||ea.enableVertexAttribArray(u);if(5126!==n.type||4!==n.size||n.buffer!==l||!1!==n.normalized||0!==n.offset||44!==n.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,0),n.type=5126,n.size=4,n.buffer=l,n.normalized=!1,n.offset=0,n.stride=44;u=D.location;n=a[u];n.buffer||ea.enableVertexAttribArray(u);if(5126!==n.type||4!==n.size||n.buffer!==q||!1!==n.normalized||16!==n.offset||44!==n.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,16),
n.type=5126,n.size=4,n.buffer=q,n.normalized=!1,n.offset=16,n.stride=44;u=w.location;n=a[u];n.buffer||ea.enableVertexAttribArray(u);if(5126!==n.type||3!==n.size||n.buffer!==c||!1!==n.normalized||32!==n.offset||44!==n.stride)ea.bindBuffer(34962,c.buffer),ea.vertexAttribPointer(u,3,5126,!1,44,32),n.type=5126,n.size=3,n.buffer=c,n.normalized=!1,n.offset=32,n.stride=44;u=h.call(this,ta,void 0,C);"number"!==typeof u&&da.commandRaise(t,K);ea.uniform1f(d.location,u);u=S.call(this,ta,void 0,C);O(u)&&16===
u.length||da.commandRaise(k,K);ea.uniformMatrix4fv(I.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(Hb[0]=u[0],Hb[1]=u[1],Hb[2]=u[2],Hb[3]=u[3],Hb[4]=u[4],Hb[5]=u[5],Hb[6]=u[6],Hb[7]=u[7],Hb[8]=u[8],Hb[9]=u[9],Hb[10]=u[10],Hb[11]=u[11],Hb[12]=u[12],Hb[13]=u[13],Hb[14]=u[14],Hb[15]=u[15],Hb));C=X.call(this,ta,void 0,C);O(C)&&16===C.length||da.commandRaise(f,K);ea.uniformMatrix4fv(E.location,!1,Array.isArray(C)||C instanceof Float32Array?C:(ga[0]=C[0],ga[1]=C[1],ga[2]=C[2],ga[3]=C[3],ga[4]=
C[4],ga[5]=C[5],ga[6]=C[6],ga[7]=C[7],ga[8]=C[8],ga[9]=C[9],ga[10]=C[10],ga[11]=C[11],ga[12]=C[12],ga[13]=C[13],ga[14]=C[14],ga[15]=C[15],ga));(u=ja.elements)?ea.bindBuffer(34963,u.buffer.buffer):N.currentVAO&&(u=Z.getElements(N.currentVAO.elements))&&ea.bindBuffer(34963,u.buffer.buffer);n=ja.offset;for(C=0;C<b;++C)u?ea.drawElements(0,1E4,u.type,n<<(u.type-5121>>1)):ea.drawArrays(0,n,1E4);N.setVAO(null);e&&(L.cpuTime+=performance.now()-v)}}},"$34,atlas,normal,position,projection,uv,view":function(b,
da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Z,V,ea,O){var P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,ha,Hb,ga,H,sa,Ca,ra,xa,Fa,la,W,ua,Ia,za;P=b.attributes;C=b.buffer;g=b.context;N=b.current;M=b.draw;Da=b.elements;pa=b.framebuffer;m=b.gl;J=b.isArrayLike;aa=b.isBufferArgs;Q=b.next;ma=b.shader;qa=b.uniforms;Aa=b.vao;wa=Q.blend_color;fa=N.blend_color;Ba=Q.blend_equation;ka=N.blend_equation;oa=Q.blend_func;ya=N.blend_func;Ja=Q.colorMask;
na=N.colorMask;Xa=Q.depth_range;Ta=N.depth_range;r=Q.polygonOffset_offset;p=N.polygonOffset_offset;y=Q.sample_coverage;va=N.sample_coverage;Ea=Q.scissor_box;ha=N.scissor_box;Hb=Q.stencil_func;ga=N.stencil_func;H=Q.stencil_opBack;sa=N.stencil_opBack;Ca=Q.stencil_opFront;ra=N.stencil_opFront;xa=Q.viewport;Fa=N.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};W=new Float32Array(16);ua=new Float32Array(16);Ia=new Float32Array(16);za=new Float32Array(16);
return{draw:function(a){var d,f,h,b,k,t,w,v,D,E,z,I,M,R,qa,S,T,X,ba,Y,ia,ma,ta,za,Ia,ab,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb,cb,ob;d=g.view;f=e.call(this,g,a,0);g.view=f;h=pa.next;h!==pa.cur&&(h?m.bindFramebuffer(36160,h.framebuffer):m.bindFramebuffer(36160,null),pa.cur=h);if(N.dirty){var Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,
Ac,vc,db;Ua=Q.dither;Ua!==N.dither&&(Ua?m.enable(3024):m.disable(3024),N.dither=Ua);hd=Q.blend_enable;hd!==N.blend_enable&&(hd?m.enable(3042):m.disable(3042),N.blend_enable=hd);Ib=wa[0];Jb=wa[1];rc=wa[2];Ob=wa[3];if(Ib!==fa[0]||Jb!==fa[1]||rc!==fa[2]||Ob!==fa[3])m.blendColor(Ib,Jb,rc,Ob),fa[0]=Ib,fa[1]=Jb,fa[2]=rc,fa[3]=Ob;jb=Ba[0];Gb=Ba[1];if(jb!==ka[0]||Gb!==ka[1])m.blendEquationSeparate(jb,Gb),ka[0]=jb,ka[1]=Gb;Db=oa[0];wb=oa[1];hb=oa[2];Yb=oa[3];if(Db!==ya[0]||wb!==ya[1]||hb!==ya[2]||Yb!==ya[3])m.blendFuncSeparate(Db,
wb,hb,Yb),ya[0]=Db,ya[1]=wb,ya[2]=hb,ya[3]=Yb;Pb=Q.depth_enable;Pb!==N.depth_enable&&(Pb?m.enable(2929):m.disable(2929),N.depth_enable=Pb);qb=Q.depth_func;qb!==N.depth_func&&(m.depthFunc(qb),N.depth_func=qb);Ra=Xa[0];Ub=Xa[1];if(Ra!==Ta[0]||Ub!==Ta[1])m.depthRange(Ra,Ub),Ta[0]=Ra,Ta[1]=Ub;zb=Q.depth_mask;zb!==N.depth_mask&&(m.depthMask(zb),N.depth_mask=zb);cc=Ja[0];ib=Ja[1];pb=Ja[2];Ha=Ja[3];if(cc!==na[0]||ib!==na[1]||pb!==na[2]||Ha!==na[3])m.colorMask(cc,ib,pb,Ha),na[0]=cc,na[1]=ib,na[2]=pb,na[3]=
Ha;rb=Q.frontFace;rb!==N.frontFace&&(m.frontFace(rb),N.frontFace=rb);Ka=Q.lineWidth;Ka!==N.lineWidth&&(m.lineWidth(Ka),N.lineWidth=Ka);fb=Q.polygonOffset_enable;fb!==N.polygonOffset_enable&&(fb?m.enable(32823):m.disable(32823),N.polygonOffset_enable=fb);gb=r[0];La=r[1];if(gb!==p[0]||La!==p[1])m.polygonOffset(gb,La),p[0]=gb,p[1]=La;kb=Q.sample_alpha;kb!==N.sample_alpha&&(kb?m.enable(32926):m.disable(32926),N.sample_alpha=kb);Va=Q.sample_enable;Va!==N.sample_enable&&(Va?m.enable(32928):m.disable(32928),
N.sample_enable=Va);tb=y[0];sb=y[1];if(tb!==va[0]||sb!==va[1])m.sampleCoverage(tb,sb),va[0]=tb,va[1]=sb;Oa=Q.stencil_enable;Oa!==N.stencil_enable&&(Oa?m.enable(2960):m.disable(2960),N.stencil_enable=Oa);tc=Q.stencil_mask;tc!==N.stencil_mask&&(m.stencilMask(tc),N.stencil_mask=tc);Qa=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Qa!==ga[0]||Kb!==ga[1]||Eb!==ga[2])m.stencilFunc(Qa,Kb,Eb),ga[0]=Qa,ga[1]=Kb,ga[2]=Eb;Ma=Ca[0];yd=Ca[1];Ya=Ca[2];Lb=Ca[3];if(Ma!==ra[0]||yd!==ra[1]||Ya!==ra[2]||Lb!==ra[3])m.stencilOpSeparate(Ma,
yd,Ya,Lb),ra[0]=Ma,ra[1]=yd,ra[2]=Ya,ra[3]=Lb;Mb=H[0];lb=H[1];Na=H[2];Zb=H[3];if(Mb!==sa[0]||lb!==sa[1]||Na!==sa[2]||Zb!==sa[3])m.stencilOpSeparate(Mb,lb,Na,Zb),sa[0]=Mb,sa[1]=lb,sa[2]=Na,sa[3]=Zb;Pa=Q.scissor_enable;Pa!==N.scissor_enable&&(Pa?m.enable(3089):m.disable(3089),N.scissor_enable=Pa);ub=Ea[0];vb=Ea[1];Sa=Ea[2];nb=Ea[3];if(ub!==ha[0]||vb!==ha[1]||Sa!==ha[2]||nb!==ha[3])m.scissor(ub,vb,Sa,nb),ha[0]=ub,ha[1]=vb,ha[2]=Sa,ha[3]=nb;hc=xa[0];Ac=xa[1];vc=xa[2];db=xa[3];if(hc!==Fa[0]||Ac!==Fa[1]||
vc!==Fa[2]||db!==Fa[3])m.viewport(hc,Ac,vc,db),Fa[0]=hc,Fa[1]=Ac,Fa[2]=vc,Fa[3]=db}m.enable(2884);N.cull_enable=!0;m.cullFace(1029);N.cull_face=1029;if(b=N.profile)k=performance.now(),L.count++;m.useProgram(l.program);Aa.setVAO(null);(t=a.position)&&("object"===typeof t||"function"===typeof t)&&(aa(t)||C.getBuffer(t)||C.getBuffer(t.buffer)||aa(t.buffer)||"constant"in t&&("number"===typeof t.constant||J(t.constant)))||da.commandRaise(q,K);w=!1;v=null;D=!1;z=E=0;I=1;M=0;R=5126;X=T=S=qa=0;aa(t)?(w=!0,
v=C.createStream(34962,t),R=v.dtype):(v=C.getBuffer(t))?R=v.dtype:"constant"in t?(I=2,"number"===typeof t.constant?(S=t.constant,T=X=qa=0):(S=0<t.constant.length?t.constant[0]:0,T=1<t.constant.length?t.constant[1]:0,X=2<t.constant.length?t.constant[2]:0,qa=3<t.constant.length?t.constant[3]:0)):(v=aa(t.buffer)?C.createStream(34962,t.buffer):C.getBuffer(t.buffer),R="type"in t?la[t.type]:v.dtype,D=!!t.normalized,z=t.size|0,E=t.offset|0,M=t.stride|0);ba=Z.location;Y=P[ba];if(1===I){if(Y.buffer||m.enableVertexAttribArray(ba),
ia=z||3,Y.type!==R||Y.size!==ia||Y.buffer!==v||Y.normalized!==D||Y.offset!==E||Y.stride!==M)m.bindBuffer(34962,v.buffer),m.vertexAttribPointer(ba,ia,R,D,M,E),Y.type=R,Y.size=ia,Y.buffer=v,Y.normalized=D,Y.offset=E,Y.stride=M}else if(Y.buffer&&(m.disableVertexAttribArray(ba),Y.buffer=null),Y.x!==S||Y.y!==T||Y.z!==X||Y.w!==qa)m.vertexAttrib4f(ba,S,T,X,qa),Y.x=S,Y.y=T,Y.z=X,Y.w=qa;(ma=a.normal)&&("object"===typeof ma||"function"===typeof ma)&&(aa(ma)||C.getBuffer(ma)||C.getBuffer(ma.buffer)||aa(ma.buffer)||
"constant"in ma&&("number"===typeof ma.constant||J(ma.constant)))||da.commandRaise(c,K);ta=!1;za=null;Ia=!1;Ad=ab=0;Zd=1;ld=0;bd=5126;Gc=nd=Lc=pd=0;aa(ma)?(ta=!0,za=C.createStream(34962,ma),bd=za.dtype):(za=C.getBuffer(ma))?bd=za.dtype:"constant"in ma?(Zd=2,"number"===typeof ma.constant?(Lc=ma.constant,nd=Gc=pd=0):(Lc=0<ma.constant.length?ma.constant[0]:0,nd=1<ma.constant.length?ma.constant[1]:0,Gc=2<ma.constant.length?ma.constant[2]:0,pd=3<ma.constant.length?ma.constant[3]:0)):(za=aa(ma.buffer)?
C.createStream(34962,ma.buffer):C.getBuffer(ma.buffer),bd="type"in ma?la[ma.type]:za.dtype,Ia=!!ma.normalized,Ad=ma.size|0,ab=ma.offset|0,ld=ma.stride|0);fd=ja.location;Pc=P[fd];if(1===Zd){if(Pc.buffer||m.enableVertexAttribArray(fd),Wc=Ad||3,Pc.type!==bd||Pc.size!==Wc||Pc.buffer!==za||Pc.normalized!==Ia||Pc.offset!==ab||Pc.stride!==ld)m.bindBuffer(34962,za.buffer),m.vertexAttribPointer(fd,Wc,bd,Ia,ld,ab),Pc.type=bd,Pc.size=Wc,Pc.buffer=za,Pc.normalized=Ia,Pc.offset=ab,Pc.stride=ld}else if(Pc.buffer&&
(m.disableVertexAttribArray(fd),Pc.buffer=null),Pc.x!==Lc||Pc.y!==nd||Pc.z!==Gc||Pc.w!==pd)m.vertexAttrib4f(fd,Lc,nd,Gc,pd),Pc.x=Lc,Pc.y=nd,Pc.z=Gc,Pc.w=pd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(aa(Bb)||C.getBuffer(Bb)||C.getBuffer(Bb.buffer)||aa(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||J(Bb.constant)))||da.commandRaise(F,K);Fb=!1;Dc=null;xb=!1;Cb=xc=0;Jc=1;mc=0;Hc=5126;fc=Ec=Vc=Xc=0;aa(Bb)?(Fb=!0,Dc=C.createStream(34962,Bb),Hc=Dc.dtype):(Dc=C.getBuffer(Bb))?
Hc=Dc.dtype:"constant"in Bb?(Jc=2,"number"===typeof Bb.constant?(Vc=Bb.constant,Ec=fc=Xc=0):(Vc=0<Bb.constant.length?Bb.constant[0]:0,Ec=1<Bb.constant.length?Bb.constant[1]:0,fc=2<Bb.constant.length?Bb.constant[2]:0,Xc=3<Bb.constant.length?Bb.constant[3]:0)):(Dc=aa(Bb.buffer)?C.createStream(34962,Bb.buffer):C.getBuffer(Bb.buffer),Hc="type"in Bb?la[Bb.type]:Dc.dtype,xb=!!Bb.normalized,Cb=Bb.size|0,xc=Bb.offset|0,mc=Bb.stride|0);Ic=ea.location;pc=P[Ic];if(1===Jc){if(pc.buffer||m.enableVertexAttribArray(Ic),
qc=Cb||2,pc.type!==Hc||pc.size!==qc||pc.buffer!==Dc||pc.normalized!==xb||pc.offset!==xc||pc.stride!==mc)m.bindBuffer(34962,Dc.buffer),m.vertexAttribPointer(Ic,qc,Hc,xb,mc,xc),pc.type=Hc,pc.size=qc,pc.buffer=Dc,pc.normalized=xb,pc.offset=xc,pc.stride=mc}else if(pc.buffer&&(m.disableVertexAttribArray(Ic),pc.buffer=null),pc.x!==Vc||pc.y!==Ec||pc.z!==fc||pc.w!==Xc)m.vertexAttrib4f(Ic,Vc,Ec,fc,Xc),pc.x=Vc,pc.y=Ec,pc.z=fc,pc.w=Xc;nc=B.call(this,g,a,0);J(nc)&&16===nc.length||da.commandRaise(G,K);m.uniformMatrix4fv(V.location,
!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(W[0]=nc[0],W[1]=nc[1],W[2]=nc[2],W[3]=nc[3],W[4]=nc[4],W[5]=nc[5],W[6]=nc[6],W[7]=nc[7],W[8]=nc[8],W[9]=nc[9],W[10]=nc[10],W[11]=nc[11],W[12]=nc[12],W[13]=nc[13],W[14]=nc[14],W[15]=nc[15],W));gc=g.view;J(gc)&&16===gc.length||da.commandRaise(U,K);m.uniformMatrix4fv(O.location,!1,Array.isArray(gc)||gc instanceof Float32Array?gc:(ua[0]=gc[0],ua[1]=gc[1],ua[2]=gc[2],ua[3]=gc[3],ua[4]=gc[4],ua[5]=gc[5],ua[6]=gc[6],ua[7]=gc[7],ua[8]=gc[8],ua[9]=gc[9],
ua[10]=gc[10],ua[11]=gc[11],ua[12]=gc[12],ua[13]=gc[13],ua[14]=gc[14],ua[15]=gc[15],ua));(bb=a.atlas)&&"framebuffer"===bb._reglType&&(bb=bb.color[0]);"function"===typeof bb&&"texture2d"===bb._reglType||da.commandRaise(n,K);bc=bb._texture;m.uniform1i(A.location,bc.bind());yb=a.elements;eb=null;(Nb=aa(yb))?eb=Da.createStream(yb):(eb=Da.getElements(yb),yb&&!eb&&da.commandRaise(u,K));eb&&m.bindBuffer(34963,eb.buffer.buffer);cb=eb?eb.primType:4;ob=eb?eb.vertCount:-1;0<=ob||da.commandRaise(x,K);ob&&(eb?
m.drawElements(cb,ob,eb.type,0<<(eb.type-5121>>1)):m.drawArrays(cb,0,ob),N.dirty=!0,Aa.setVAO(null),g.view=d,b&&(L.cpuTime+=performance.now()-k),w&&C.destroyStream(v),ta&&C.destroyStream(za),Fb&&C.destroyStream(Dc),bc.unbind(),Nb&&Da.destroyStream(eb))},scope:function(a,d,c){var f,b,k,l,m,r,p,e,q,H,y,w,A,na,u,D,E,n,fa,I,ga,Xa,Ja,B,sa,x,Ca,O,F,va,P,ra,W,wa,G,U,ka,V,X,Y,ea,Ta,xa,oa,Ba,ya,ta,ja,Ea,Fa,Aa,pa,Hb,Z,ua,ha,za,Cc,Ia,Bd,Ua,ab,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,
gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb;f=g.view;b=ba.call(this,g,a,c);g.view=b;k=Q.cull_enable;Q.cull_enable=!0;l=Q.cull_face;Q.cull_face=1029;if(m=N.profile)r=performance.now(),L.count++;p=a.elements;e=null;(q=aa(p))?e=Da.createStream(p):(e=Da.getElements(p),p&&!e&&da.commandRaise(v,K));H=M.elements;M.elements=e;y=M.offset;M.offset=0;w=e?e.vertCount:-1;A=M.count;M.count=w;na=e?e.primType:4;u=M.primitive;M.primitive=na;D=a.atlas;E=qa[5];qa[5]=D;n=T.call(this,g,a,c);fa=qa[3];qa[3]=n;I=
g.view;ga=qa[4];qa[4]=I;(Xa=a.normal)&&("object"===typeof Xa||"function"===typeof Xa)&&(aa(Xa)||C.getBuffer(Xa)||C.getBuffer(Xa.buffer)||aa(Xa.buffer)||"constant"in Xa&&("number"===typeof Xa.constant||J(Xa.constant)))||da.commandRaise(z,K);Ja=!1;B=null;sa=0;x=!1;O=Ca=0;F=1;va=0;P=5126;G=wa=W=ra=0;aa(Xa)?(Ja=!0,B=C.createStream(34962,Xa),P=B.dtype):(B=C.getBuffer(Xa))?P=B.dtype:"constant"in Xa?(F=2,"number"===typeof Xa.constant?(W=Xa.constant,wa=G=ra=0):(W=0<Xa.constant.length?Xa.constant[0]:0,wa=
1<Xa.constant.length?Xa.constant[1]:0,G=2<Xa.constant.length?Xa.constant[2]:0,ra=3<Xa.constant.length?Xa.constant[3]:0)):(B=aa(Xa.buffer)?C.createStream(34962,Xa.buffer):C.getBuffer(Xa.buffer),P="type"in Xa?la[Xa.type]:B.dtype,x=!!Xa.normalized,O=Xa.size|0,Ca=Xa.offset|0,va=Xa.stride|0,sa=Xa.divisor|0);U=R.buffer;R.buffer=B;ka=R.divisor;R.divisor=sa;V=R.normalized;R.normalized=x;X=R.offset;R.offset=Ca;Y=R.size;R.size=O;ea=R.state;R.state=F;Ta=R.stride;R.stride=va;xa=R.type;R.type=P;oa=R.w;R.w=ra;
Ba=R.x;R.x=W;ya=R.y;R.y=wa;ta=R.z;R.z=G;(ja=a.position)&&("object"===typeof ja||"function"===typeof ja)&&(aa(ja)||C.getBuffer(ja)||C.getBuffer(ja.buffer)||aa(ja.buffer)||"constant"in ja&&("number"===typeof ja.constant||J(ja.constant)))||da.commandRaise(ia,K);Ea=!1;Fa=null;Aa=0;pa=!1;Z=Hb=0;ua=1;ha=0;za=5126;Ua=Bd=Ia=Cc=0;aa(ja)?(Ea=!0,Fa=C.createStream(34962,ja),za=Fa.dtype):(Fa=C.getBuffer(ja))?za=Fa.dtype:"constant"in ja?(ua=2,"number"===typeof ja.constant?(Ia=ja.constant,Bd=Ua=Cc=0):(Ia=0<ja.constant.length?
ja.constant[0]:0,Bd=1<ja.constant.length?ja.constant[1]:0,Ua=2<ja.constant.length?ja.constant[2]:0,Cc=3<ja.constant.length?ja.constant[3]:0)):(Fa=aa(ja.buffer)?C.createStream(34962,ja.buffer):C.getBuffer(ja.buffer),za="type"in ja?la[ja.type]:Fa.dtype,pa=!!ja.normalized,Z=ja.size|0,Hb=ja.offset|0,ha=ja.stride|0,Aa=ja.divisor|0);ab=h.buffer;h.buffer=Fa;Ib=h.divisor;h.divisor=Aa;Jb=h.normalized;h.normalized=pa;rc=h.offset;h.offset=Hb;Ob=h.size;h.size=Z;jb=h.state;h.state=ua;Gb=h.stride;h.stride=ha;Db=
h.type;h.type=za;wb=h.w;h.w=Cc;hb=h.x;h.x=Ia;Yb=h.y;h.y=Bd;Pb=h.z;h.z=Ua;(qb=a.uv)&&("object"===typeof qb||"function"===typeof qb)&&(aa(qb)||C.getBuffer(qb)||C.getBuffer(qb.buffer)||aa(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||J(qb.constant)))||da.commandRaise(t,K);Ra=!1;Ub=null;zb=0;cc=!1;pb=ib=0;Ha=1;rb=0;Ka=5126;kb=La=gb=fb=0;aa(qb)?(Ra=!0,Ub=C.createStream(34962,qb),Ka=Ub.dtype):(Ub=C.getBuffer(qb))?Ka=Ub.dtype:"constant"in qb?(Ha=2,"number"===typeof qb.constant?(gb=qb.constant,
La=kb=fb=0):(gb=0<qb.constant.length?qb.constant[0]:0,La=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,fb=3<qb.constant.length?qb.constant[3]:0)):(Ub=aa(qb.buffer)?C.createStream(34962,qb.buffer):C.getBuffer(qb.buffer),Ka="type"in qb?la[qb.type]:Ub.dtype,cc=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|0);Va=S.buffer;S.buffer=Ub;tb=S.divisor;S.divisor=zb;sb=S.normalized;S.normalized=cc;Oa=S.offset;S.offset=ib;tc=S.size;S.size=pb;Qa=S.state;
S.state=Ha;Kb=S.stride;S.stride=rb;Eb=S.type;S.type=Ka;Ma=S.w;S.w=fb;yd=S.x;S.x=gb;Ya=S.y;S.y=La;Lb=S.z;S.z=kb;Mb=ma.vert;ma.vert=2;lb=ma.frag;ma.frag=1;N.dirty=!0;d(g,a,c);g.view=f;Q.cull_enable=k;Q.cull_face=l;m&&(L.cpuTime+=performance.now()-r);q&&Da.destroyStream(e);M.elements=H;M.offset=y;M.count=A;M.primitive=u;qa[5]=E;qa[3]=fa;qa[4]=ga;Ja&&C.destroyStream(B);R.buffer=U;R.divisor=ka;R.normalized=V;R.offset=X;R.size=Y;R.state=ea;R.stride=Ta;R.type=xa;R.w=oa;R.x=Ba;R.y=ya;R.z=ta;Ea&&C.destroyStream(Fa);
h.buffer=ab;h.divisor=Ib;h.normalized=Jb;h.offset=rc;h.size=Ob;h.state=jb;h.stride=Gb;h.type=Db;h.w=wb;h.x=hb;h.y=Yb;h.z=Pb;Ra&&C.destroyStream(Ub);S.buffer=Va;S.divisor=tb;S.normalized=sb;S.offset=Oa;S.size=tc;S.state=Qa;S.stride=Kb;S.type=Eb;S.w=Ma;S.x=yd;S.y=Ya;S.z=Lb;ma.vert=Mb;ma.frag=lb;N.dirty=!0},batch:function(c,h){var b,l,e,q,t,v,u;b=g.view;l=k.call(this,g,c,0);g.view=l;e=pa.next;e!==pa.cur&&(e?m.bindFramebuffer(36160,e.framebuffer):m.bindFramebuffer(36160,null),pa.cur=e);if(N.dirty){var n,
z,B,x,M,F,W,R,qa,G,S,T,U,ba,ma,ia,ua,ab,Ad,Zd,ld,bd,pd,Lc,nd,Gc,fd,Pc,Wc,Bb,Fb,Dc,xb,xc,Cb,Jc,mc,Hc,Xc,Vc,Ec,fc,Ic,pc,qc,nc,gc,bb,bc,yb,eb,Nb;n=Q.dither;n!==N.dither&&(n?m.enable(3024):m.disable(3024),N.dither=n);z=Q.blend_enable;z!==N.blend_enable&&(z?m.enable(3042):m.disable(3042),N.blend_enable=z);B=wa[0];x=wa[1];M=wa[2];F=wa[3];if(B!==fa[0]||x!==fa[1]||M!==fa[2]||F!==fa[3])m.blendColor(B,x,M,F),fa[0]=B,fa[1]=x,fa[2]=M,fa[3]=F;W=Ba[0];R=Ba[1];if(W!==ka[0]||R!==ka[1])m.blendEquationSeparate(W,R),
ka[0]=W,ka[1]=R;qa=oa[0];G=oa[1];S=oa[2];T=oa[3];if(qa!==ya[0]||G!==ya[1]||S!==ya[2]||T!==ya[3])m.blendFuncSeparate(qa,G,S,T),ya[0]=qa,ya[1]=G,ya[2]=S,ya[3]=T;U=Q.depth_enable;U!==N.depth_enable&&(U?m.enable(2929):m.disable(2929),N.depth_enable=U);ba=Q.depth_func;ba!==N.depth_func&&(m.depthFunc(ba),N.depth_func=ba);ma=Xa[0];ia=Xa[1];if(ma!==Ta[0]||ia!==Ta[1])m.depthRange(ma,ia),Ta[0]=ma,Ta[1]=ia;ua=Q.depth_mask;ua!==N.depth_mask&&(m.depthMask(ua),N.depth_mask=ua);ab=Ja[0];Ad=Ja[1];Zd=Ja[2];ld=Ja[3];
if(ab!==na[0]||Ad!==na[1]||Zd!==na[2]||ld!==na[3])m.colorMask(ab,Ad,Zd,ld),na[0]=ab,na[1]=Ad,na[2]=Zd,na[3]=ld;bd=Q.frontFace;bd!==N.frontFace&&(m.frontFace(bd),N.frontFace=bd);pd=Q.lineWidth;pd!==N.lineWidth&&(m.lineWidth(pd),N.lineWidth=pd);Lc=Q.polygonOffset_enable;Lc!==N.polygonOffset_enable&&(Lc?m.enable(32823):m.disable(32823),N.polygonOffset_enable=Lc);nd=r[0];Gc=r[1];if(nd!==p[0]||Gc!==p[1])m.polygonOffset(nd,Gc),p[0]=nd,p[1]=Gc;fd=Q.sample_alpha;fd!==N.sample_alpha&&(fd?m.enable(32926):m.disable(32926),
N.sample_alpha=fd);Pc=Q.sample_enable;Pc!==N.sample_enable&&(Pc?m.enable(32928):m.disable(32928),N.sample_enable=Pc);Wc=y[0];Bb=y[1];if(Wc!==va[0]||Bb!==va[1])m.sampleCoverage(Wc,Bb),va[0]=Wc,va[1]=Bb;Fb=Q.stencil_enable;Fb!==N.stencil_enable&&(Fb?m.enable(2960):m.disable(2960),N.stencil_enable=Fb);Dc=Q.stencil_mask;Dc!==N.stencil_mask&&(m.stencilMask(Dc),N.stencil_mask=Dc);xb=Hb[0];xc=Hb[1];Cb=Hb[2];if(xb!==ga[0]||xc!==ga[1]||Cb!==ga[2])m.stencilFunc(xb,xc,Cb),ga[0]=xb,ga[1]=xc,ga[2]=Cb;Jc=Ca[0];
mc=Ca[1];Hc=Ca[2];Xc=Ca[3];if(Jc!==ra[0]||mc!==ra[1]||Hc!==ra[2]||Xc!==ra[3])m.stencilOpSeparate(Jc,mc,Hc,Xc),ra[0]=Jc,ra[1]=mc,ra[2]=Hc,ra[3]=Xc;Vc=H[0];Ec=H[1];fc=H[2];Ic=H[3];if(Vc!==sa[0]||Ec!==sa[1]||fc!==sa[2]||Ic!==sa[3])m.stencilOpSeparate(Vc,Ec,fc,Ic),sa[0]=Vc,sa[1]=Ec,sa[2]=fc,sa[3]=Ic;pc=Q.scissor_enable;pc!==N.scissor_enable&&(pc?m.enable(3089):m.disable(3089),N.scissor_enable=pc);qc=Ea[0];nc=Ea[1];gc=Ea[2];bb=Ea[3];if(qc!==ha[0]||nc!==ha[1]||gc!==ha[2]||bb!==ha[3])m.scissor(qc,nc,gc,
bb),ha[0]=qc,ha[1]=nc,ha[2]=gc,ha[3]=bb;bc=xa[0];yb=xa[1];eb=xa[2];Nb=xa[3];if(bc!==Fa[0]||yb!==Fa[1]||eb!==Fa[2]||Nb!==Fa[3])m.viewport(bc,yb,eb,Nb),Fa[0]=bc,Fa[1]=yb,Fa[2]=eb,Fa[3]=Nb}m.enable(2884);N.cull_enable=!0;m.cullFace(1029);N.cull_face=1029;if(q=N.profile)t=performance.now(),L.count+=h;m.useProgram(X.program);var cb,ob;Aa.setVAO(null);cb=D.call(this,g,u,v);J(cb)&&16===cb.length||da.commandRaise(E,K);m.uniformMatrix4fv(V.location,!1,Array.isArray(cb)||cb instanceof Float32Array?cb:(Ia[0]=
cb[0],Ia[1]=cb[1],Ia[2]=cb[2],Ia[3]=cb[3],Ia[4]=cb[4],Ia[5]=cb[5],Ia[6]=cb[6],Ia[7]=cb[7],Ia[8]=cb[8],Ia[9]=cb[9],Ia[10]=cb[10],Ia[11]=cb[11],Ia[12]=cb[12],Ia[13]=cb[13],Ia[14]=cb[14],Ia[15]=cb[15],Ia));ob=g.view;J(ob)&&16===ob.length||da.commandRaise(d,K);m.uniformMatrix4fv(O.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(za[0]=ob[0],za[1]=ob[1],za[2]=ob[2],za[3]=ob[3],za[4]=ob[4],za[5]=ob[5],za[6]=ob[6],za[7]=ob[7],za[8]=ob[8],za[9]=ob[9],za[10]=ob[10],za[11]=ob[11],za[12]=ob[12],
za[13]=ob[13],za[14]=ob[14],za[15]=ob[15],za));for(v=0;v<h;++v){u=c[v];var Ua,hd,Ib,Jb,rc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ra,Ub,zb,cc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Va,tb,sb,Oa,tc,Qa,Kb,Eb,Ma,yd,Ya,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,hc,Ac,vc,db,kc,qd,Wa;(Ua=u.position)&&("object"===typeof Ua||"function"===typeof Ua)&&(aa(Ua)||C.getBuffer(Ua)||C.getBuffer(Ua.buffer)||aa(Ua.buffer)||"constant"in Ua&&("number"===typeof Ua.constant||J(Ua.constant)))||da.commandRaise(f,K);hd=!1;Ib=null;Jb=!1;Ob=rc=0;jb=1;Gb=0;Db=5126;
Pb=Yb=hb=wb=0;aa(Ua)?(hd=!0,Ib=C.createStream(34962,Ua),Db=Ib.dtype):(Ib=C.getBuffer(Ua))?Db=Ib.dtype:"constant"in Ua?(jb=2,"number"===typeof Ua.constant?(hb=Ua.constant,Yb=Pb=wb=0):(hb=0<Ua.constant.length?Ua.constant[0]:0,Yb=1<Ua.constant.length?Ua.constant[1]:0,Pb=2<Ua.constant.length?Ua.constant[2]:0,wb=3<Ua.constant.length?Ua.constant[3]:0)):(Ib=aa(Ua.buffer)?C.createStream(34962,Ua.buffer):C.getBuffer(Ua.buffer),Db="type"in Ua?la[Ua.type]:Ib.dtype,Jb=!!Ua.normalized,Ob=Ua.size|0,rc=Ua.offset|
0,Gb=Ua.stride|0);qb=Z.location;Ra=P[qb];if(1===jb){if(Ra.buffer||m.enableVertexAttribArray(qb),Ub=Ob||3,Ra.type!==Db||Ra.size!==Ub||Ra.buffer!==Ib||Ra.normalized!==Jb||Ra.offset!==rc||Ra.stride!==Gb)m.bindBuffer(34962,Ib.buffer),m.vertexAttribPointer(qb,Ub,Db,Jb,Gb,rc),Ra.type=Db,Ra.size=Ub,Ra.buffer=Ib,Ra.normalized=Jb,Ra.offset=rc,Ra.stride=Gb}else if(Ra.buffer&&(m.disableVertexAttribArray(qb),Ra.buffer=null),Ra.x!==hb||Ra.y!==Yb||Ra.z!==Pb||Ra.w!==wb)m.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ra.x=hb,Ra.y=
Yb,Ra.z=Pb,Ra.w=wb;(zb=u.normal)&&("object"===typeof zb||"function"===typeof zb)&&(aa(zb)||C.getBuffer(zb)||C.getBuffer(zb.buffer)||aa(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||J(zb.constant)))||da.commandRaise(w,K);cc=!1;ib=null;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Va=kb=La=0;aa(zb)?(cc=!0,ib=C.createStream(34962,zb),gb=ib.dtype):(ib=C.getBuffer(zb))?gb=ib.dtype:"constant"in zb?(Ka=2,"number"===typeof zb.constant?(kb=zb.constant,Va=tb=La=0):(kb=0<zb.constant.length?zb.constant[0]:
0,Va=1<zb.constant.length?zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,La=3<zb.constant.length?zb.constant[3]:0)):(ib=aa(zb.buffer)?C.createStream(34962,zb.buffer):C.getBuffer(zb.buffer),gb="type"in zb?la[zb.type]:ib.dtype,pb=!!zb.normalized,rb=zb.size|0,Ha=zb.offset|0,fb=zb.stride|0);sb=ja.location;Oa=P[sb];if(1===Ka){if(Oa.buffer||m.enableVertexAttribArray(sb),tc=rb||3,Oa.type!==gb||Oa.size!==tc||Oa.buffer!==ib||Oa.normalized!==pb||Oa.offset!==Ha||Oa.stride!==fb)m.bindBuffer(34962,
ib.buffer),m.vertexAttribPointer(sb,tc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=tc,Oa.buffer=ib,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb}else if(Oa.buffer&&(m.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Va||Oa.z!==tb||Oa.w!==La)m.vertexAttrib4f(sb,kb,Va,tb,La),Oa.x=kb,Oa.y=Va,Oa.z=tb,Oa.w=La;(Qa=u.uv)&&("object"===typeof Qa||"function"===typeof Qa)&&(aa(Qa)||C.getBuffer(Qa)||C.getBuffer(Qa.buffer)||aa(Qa.buffer)||"constant"in Qa&&("number"===typeof Qa.constant||J(Qa.constant)))||da.commandRaise(Y,
K);Kb=!1;Eb=null;Ma=!1;Ya=yd=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;aa(Qa)?(Kb=!0,Eb=C.createStream(34962,Qa),lb=Eb.dtype):(Eb=C.getBuffer(Qa))?lb=Eb.dtype:"constant"in Qa?(Lb=2,"number"===typeof Qa.constant?(Zb=Qa.constant,Pa=ub=Na=0):(Zb=0<Qa.constant.length?Qa.constant[0]:0,Pa=1<Qa.constant.length?Qa.constant[1]:0,ub=2<Qa.constant.length?Qa.constant[2]:0,Na=3<Qa.constant.length?Qa.constant[3]:0)):(Eb=aa(Qa.buffer)?C.createStream(34962,Qa.buffer):C.getBuffer(Qa.buffer),lb="type"in Qa?la[Qa.type]:Eb.dtype,
Ma=!!Qa.normalized,Ya=Qa.size|0,yd=Qa.offset|0,Mb=Qa.stride|0);vb=ea.location;Sa=P[vb];if(1===Lb){if(Sa.buffer||m.enableVertexAttribArray(vb),nb=Ya||2,Sa.type!==lb||Sa.size!==nb||Sa.buffer!==Eb||Sa.normalized!==Ma||Sa.offset!==yd||Sa.stride!==Mb)m.bindBuffer(34962,Eb.buffer),m.vertexAttribPointer(vb,nb,lb,Ma,Mb,yd),Sa.type=lb,Sa.size=nb,Sa.buffer=Eb,Sa.normalized=Ma,Sa.offset=yd,Sa.stride=Mb}else if(Sa.buffer&&(m.disableVertexAttribArray(vb),Sa.buffer=null),Sa.x!==Zb||Sa.y!==Pa||Sa.z!==ub||Sa.w!==
Na)m.vertexAttrib4f(vb,Zb,Pa,ub,Na),Sa.x=Zb,Sa.y=Pa,Sa.z=ub,Sa.w=Na;(hc=u.atlas)&&"framebuffer"===hc._reglType&&(hc=hc.color[0]);"function"===typeof hc&&"texture2d"===hc._reglType||da.commandRaise(I,K);Ac=hc._texture;m.uniform1i(A.location,Ac.bind());vc=u.elements;db=null;(kc=aa(vc))?db=Da.createStream(vc):(db=Da.getElements(vc),vc&&!db&&da.commandRaise(a,K));db&&m.bindBuffer(34963,db.buffer.buffer);qd=db?db.primType:4;Wa=db?db.vertCount:-1;0<=Wa||da.commandRaise(ta,K);Wa&&(db?m.drawElements(qd,Wa,
db.type,0<<(db.type-5121>>1)):m.drawArrays(qd,0,Wa),hd&&C.destroyStream(Ib),cc&&C.destroyStream(ib),Kb&&C.destroyStream(Eb),Ac.unbind(),kc&&Da.destroyStream(db))}N.dirty=!0;Aa.setVAO(null);g.view=b;q&&(L.cpuTime+=performance.now()-t)}}},"$7,color,position":function(b,da,K,L,e,l,q,c,F,B){var G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Z,V,ea,O,P,C,g,N,M;G=b.attributes;U=b.context;n=b.current;u=b.draw;x=b.elements;ba=b.framebuffer;v=b.gl;T=b.next;z=b.shader;R=b.uniforms;ia=b.vao;h=T.blend_color;
t=n.blend_color;S=T.blend_equation;k=n.blend_equation;X=T.blend_func;f=n.blend_func;w=T.colorMask;Y=n.colorMask;D=T.depth_range;E=n.depth_range;d=T.polygonOffset_offset;I=n.polygonOffset_offset;a=T.sample_coverage;ta=n.sample_coverage;A=T.scissor_box;ja=n.scissor_box;Z=T.stencil_func;V=n.stencil_func;ea=T.stencil_opBack;O=n.stencil_opBack;P=T.stencil_opFront;C=n.stencil_opFront;g=T.viewport;N=n.viewport;M=[1,0,0,1];return{draw:function(c){var b,m,q,z;c=ba.next;c!==ba.cur&&(c?v.bindFramebuffer(36160,
c.framebuffer):v.bindFramebuffer(36160,null),ba.cur=c);if(n.dirty){c=T.dither;c!==n.dither&&(c?v.enable(3024):v.disable(3024),n.dither=c);c=T.blend_enable;c!==n.blend_enable&&(c?v.enable(3042):v.disable(3042),n.blend_enable=c);c=h[0];m=h[1];q=h[2];z=h[3];if(c!==t[0]||m!==t[1]||q!==t[2]||z!==t[3])v.blendColor(c,m,q,z),t[0]=c,t[1]=m,t[2]=q,t[3]=z;c=S[0];m=S[1];if(c!==k[0]||m!==k[1])v.blendEquationSeparate(c,m),k[0]=c,k[1]=m;c=X[0];m=X[1];q=X[2];z=X[3];if(c!==f[0]||m!==f[1]||q!==f[2]||z!==f[3])v.blendFuncSeparate(c,
m,q,z),f[0]=c,f[1]=m,f[2]=q,f[3]=z;c=T.depth_enable;c!==n.depth_enable&&(c?v.enable(2929):v.disable(2929),n.depth_enable=c);c=T.depth_func;c!==n.depth_func&&(v.depthFunc(c),n.depth_func=c);c=D[0];m=D[1];if(c!==E[0]||m!==E[1])v.depthRange(c,m),E[0]=c,E[1]=m;c=T.depth_mask;c!==n.depth_mask&&(v.depthMask(c),n.depth_mask=c);c=w[0];m=w[1];q=w[2];z=w[3];if(c!==Y[0]||m!==Y[1]||q!==Y[2]||z!==Y[3])v.colorMask(c,m,q,z),Y[0]=c,Y[1]=m,Y[2]=q,Y[3]=z;c=T.cull_enable;c!==n.cull_enable&&(c?v.enable(2884):v.disable(2884),
n.cull_enable=c);c=T.cull_face;c!==n.cull_face&&(v.cullFace(c),n.cull_face=c);c=T.frontFace;c!==n.frontFace&&(v.frontFace(c),n.frontFace=c);c=T.lineWidth;c!==n.lineWidth&&(v.lineWidth(c),n.lineWidth=c);c=T.polygonOffset_enable;c!==n.polygonOffset_enable&&(c?v.enable(32823):v.disable(32823),n.polygonOffset_enable=c);c=d[0];m=d[1];if(c!==I[0]||m!==I[1])v.polygonOffset(c,m),I[0]=c,I[1]=m;c=T.sample_alpha;c!==n.sample_alpha&&(c?v.enable(32926):v.disable(32926),n.sample_alpha=c);c=T.sample_enable;c!==
n.sample_enable&&(c?v.enable(32928):v.disable(32928),n.sample_enable=c);c=a[0];m=a[1];if(c!==ta[0]||m!==ta[1])v.sampleCoverage(c,m),ta[0]=c,ta[1]=m;c=T.stencil_enable;c!==n.stencil_enable&&(c?v.enable(2960):v.disable(2960),n.stencil_enable=c);c=T.stencil_mask;c!==n.stencil_mask&&(v.stencilMask(c),n.stencil_mask=c);c=Z[0];m=Z[1];q=Z[2];if(c!==V[0]||m!==V[1]||q!==V[2])v.stencilFunc(c,m,q),V[0]=c,V[1]=m,V[2]=q;c=P[0];m=P[1];q=P[2];z=P[3];if(c!==C[0]||m!==C[1]||q!==C[2]||z!==C[3])v.stencilOpSeparate(c,
m,q,z),C[0]=c,C[1]=m,C[2]=q,C[3]=z;c=ea[0];m=ea[1];q=ea[2];z=ea[3];if(c!==O[0]||m!==O[1]||q!==O[2]||z!==O[3])v.stencilOpSeparate(c,m,q,z),O[0]=c,O[1]=m,O[2]=q,O[3]=z;c=T.scissor_enable;c!==n.scissor_enable&&(c?v.enable(3089):v.disable(3089),n.scissor_enable=c);c=A[0];m=A[1];q=A[2];z=A[3];if(c!==ja[0]||m!==ja[1]||q!==ja[2]||z!==ja[3])v.scissor(c,m,q,z),ja[0]=c,ja[1]=m,ja[2]=q,ja[3]=z;c=g[0];m=g[1];q=g[2];z=g[3];if(c!==N[0]||m!==N[1]||q!==N[2]||z!==N[3])v.viewport(c,m,q,z),N[0]=c,N[1]=m,N[2]=q,N[3]=
z;n.dirty=!1}if(c=n.profile)b=performance.now(),L.count++;v.useProgram(e.program);ia.setVAO(null);m=B.location;q=G[m];q.buffer||v.enableVertexAttribArray(m);if(q.type!==l.dtype||2!==q.size||q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)v.bindBuffer(34962,l.buffer),v.vertexAttribPointer(m,2,l.dtype,!1,0,0),q.type=l.dtype,q.size=2,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;v.uniform4f(F.location,1,0,0,1);(m=u.elements)?v.bindBuffer(34963,m.buffer.buffer):ia.currentVAO&&(m=x.getElements(ia.currentVAO.elements))&&
v.bindBuffer(34963,m.buffer.buffer);q=u.primitive;z=u.offset;m?v.drawElements(q,3,m.type,z<<(m.type-5121>>1)):v.drawArrays(q,z,3);ia.setVAO(null);c&&(L.cpuTime+=performance.now()-b)},scope:function(a,c,d){var f,g,h,b,k,e,t,w,A,v,D,E,C,na,Xa,I,r,p;if(f=n.profile)g=performance.now(),L.count++;h=u.count;u.count=3;b=R[3];R[3]=M;k=q.buffer;q.buffer=l;e=q.divisor;q.divisor=0;t=q.normalized;q.normalized=!1;w=q.offset;q.offset=0;A=q.size;q.size=0;v=q.state;q.state=1;D=q.stride;q.stride=0;E=q.type;q.type=
l.dtype;C=q.w;q.w=0;na=q.x;q.x=0;Xa=q.y;q.y=0;I=q.z;q.z=0;r=z.vert;z.vert=2;p=z.frag;z.frag=1;c(U,a,d);f&&(L.cpuTime+=performance.now()-g);u.count=h;R[3]=b;q.buffer=k;q.divisor=e;q.normalized=t;q.offset=w;q.size=A;q.state=v;q.stride=D;q.type=E;q.w=C;q.x=na;q.y=Xa;q.z=I;z.vert=r;z.frag=p},batch:function(b,e){var m,q,z;m=ba.next;m!==ba.cur&&(m?v.bindFramebuffer(36160,m.framebuffer):v.bindFramebuffer(36160,null),ba.cur=m);if(n.dirty){var Q,K;m=T.dither;m!==n.dither&&(m?v.enable(3024):v.disable(3024),
n.dither=m);m=T.blend_enable;m!==n.blend_enable&&(m?v.enable(3042):v.disable(3042),n.blend_enable=m);m=h[0];z=h[1];Q=h[2];K=h[3];if(m!==t[0]||z!==t[1]||Q!==t[2]||K!==t[3])v.blendColor(m,z,Q,K),t[0]=m,t[1]=z,t[2]=Q,t[3]=K;m=S[0];z=S[1];if(m!==k[0]||z!==k[1])v.blendEquationSeparate(m,z),k[0]=m,k[1]=z;m=X[0];z=X[1];Q=X[2];K=X[3];if(m!==f[0]||z!==f[1]||Q!==f[2]||K!==f[3])v.blendFuncSeparate(m,z,Q,K),f[0]=m,f[1]=z,f[2]=Q,f[3]=K;m=T.depth_enable;m!==n.depth_enable&&(m?v.enable(2929):v.disable(2929),n.depth_enable=
m);m=T.depth_func;m!==n.depth_func&&(v.depthFunc(m),n.depth_func=m);m=D[0];z=D[1];if(m!==E[0]||z!==E[1])v.depthRange(m,z),E[0]=m,E[1]=z;m=T.depth_mask;m!==n.depth_mask&&(v.depthMask(m),n.depth_mask=m);m=w[0];z=w[1];Q=w[2];K=w[3];if(m!==Y[0]||z!==Y[1]||Q!==Y[2]||K!==Y[3])v.colorMask(m,z,Q,K),Y[0]=m,Y[1]=z,Y[2]=Q,Y[3]=K;m=T.cull_enable;m!==n.cull_enable&&(m?v.enable(2884):v.disable(2884),n.cull_enable=m);m=T.cull_face;m!==n.cull_face&&(v.cullFace(m),n.cull_face=m);m=T.frontFace;m!==n.frontFace&&(v.frontFace(m),
n.frontFace=m);m=T.lineWidth;m!==n.lineWidth&&(v.lineWidth(m),n.lineWidth=m);m=T.polygonOffset_enable;m!==n.polygonOffset_enable&&(m?v.enable(32823):v.disable(32823),n.polygonOffset_enable=m);m=d[0];z=d[1];if(m!==I[0]||z!==I[1])v.polygonOffset(m,z),I[0]=m,I[1]=z;m=T.sample_alpha;m!==n.sample_alpha&&(m?v.enable(32926):v.disable(32926),n.sample_alpha=m);m=T.sample_enable;m!==n.sample_enable&&(m?v.enable(32928):v.disable(32928),n.sample_enable=m);m=a[0];z=a[1];if(m!==ta[0]||z!==ta[1])v.sampleCoverage(m,
z),ta[0]=m,ta[1]=z;m=T.stencil_enable;m!==n.stencil_enable&&(m?v.enable(2960):v.disable(2960),n.stencil_enable=m);m=T.stencil_mask;m!==n.stencil_mask&&(v.stencilMask(m),n.stencil_mask=m);m=Z[0];z=Z[1];Q=Z[2];if(m!==V[0]||z!==V[1]||Q!==V[2])v.stencilFunc(m,z,Q),V[0]=m,V[1]=z,V[2]=Q;m=P[0];z=P[1];Q=P[2];K=P[3];if(m!==C[0]||z!==C[1]||Q!==C[2]||K!==C[3])v.stencilOpSeparate(m,z,Q,K),C[0]=m,C[1]=z,C[2]=Q,C[3]=K;m=ea[0];z=ea[1];Q=ea[2];K=ea[3];if(m!==O[0]||z!==O[1]||Q!==O[2]||K!==O[3])v.stencilOpSeparate(m,
z,Q,K),O[0]=m,O[1]=z,O[2]=Q,O[3]=K;m=T.scissor_enable;m!==n.scissor_enable&&(m?v.enable(3089):v.disable(3089),n.scissor_enable=m);m=A[0];z=A[1];Q=A[2];K=A[3];if(m!==ja[0]||z!==ja[1]||Q!==ja[2]||K!==ja[3])v.scissor(m,z,Q,K),ja[0]=m,ja[1]=z,ja[2]=Q,ja[3]=K;m=g[0];z=g[1];Q=g[2];K=g[3];if(m!==N[0]||z!==N[1]||Q!==N[2]||K!==N[3])v.viewport(m,z,Q,K),N[0]=m,N[1]=z,N[2]=Q,N[3]=K;n.dirty=!1}if(m=n.profile)q=performance.now(),L.count+=e;v.useProgram(c.program);var M;ia.setVAO(null);z=B.location;Q=G[z];Q.buffer||
v.enableVertexAttribArray(z);if(Q.type!==l.dtype||2!==Q.size||Q.buffer!==l||!1!==Q.normalized||0!==Q.offset||0!==Q.stride)v.bindBuffer(34962,l.buffer),v.vertexAttribPointer(z,2,l.dtype,!1,0,0),Q.type=l.dtype,Q.size=2,Q.buffer=l,Q.normalized=!1,Q.offset=0,Q.stride=0;v.uniform4f(F.location,1,0,0,1);(Q=u.elements)?v.bindBuffer(34963,Q.buffer.buffer):ia.currentVAO&&(Q=x.getElements(ia.currentVAO.elements))&&v.bindBuffer(34963,Q.buffer.buffer);K=u.primitive;M=u.offset;for(z=0;z<e;++z)Q?v.drawElements(K,
3,Q.type,M<<(Q.type-5121>>1)):v.drawArrays(K,M,3);ia.setVAO(null);m&&(L.cpuTime+=performance.now()-q)}}},"$19,angle,color,offset,position":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S){var k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Z,V,ea,O,P,C,g,N,M,ha,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa;k=b.attributes;X=b.context;f=b.current;w=b.draw;Y=b.elements;D=b.framebuffer;E=b.gl;d=b.isArrayLike;I=b.next;a=b.shader;ta=b.uniforms;A=b.vao;ja=I.blend_color;Z=f.blend_color;V=I.blend_equation;ea=f.blend_equation;
O=I.blend_func;P=f.blend_func;C=I.colorMask;g=f.colorMask;N=I.depth_range;M=f.depth_range;ha=I.polygonOffset_offset;pa=f.polygonOffset_offset;m=I.sample_coverage;J=f.sample_coverage;aa=I.scissor_box;Q=f.scissor_box;ma=I.stencil_func;qa=f.stencil_func;Aa=I.stencil_opBack;wa=f.stencil_opBack;fa=I.stencil_opFront;Ba=f.stencil_opFront;ka=I.viewport;oa=f.viewport;return{draw:function(a){var b,na,v,z;b=D.next;b!==D.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),D.cur=b);if(f.dirty){var r;
b=I.dither;b!==f.dither&&(b?E.enable(3024):E.disable(3024),f.dither=b);b=I.blend_enable;b!==f.blend_enable&&(b?E.enable(3042):E.disable(3042),f.blend_enable=b);b=ja[0];v=ja[1];z=ja[2];r=ja[3];if(b!==Z[0]||v!==Z[1]||z!==Z[2]||r!==Z[3])E.blendColor(b,v,z,r),Z[0]=b,Z[1]=v,Z[2]=z,Z[3]=r;b=V[0];v=V[1];if(b!==ea[0]||v!==ea[1])E.blendEquationSeparate(b,v),ea[0]=b,ea[1]=v;b=O[0];v=O[1];z=O[2];r=O[3];if(b!==P[0]||v!==P[1]||z!==P[2]||r!==P[3])E.blendFuncSeparate(b,v,z,r),P[0]=b,P[1]=v,P[2]=z,P[3]=r;b=I.depth_func;
b!==f.depth_func&&(E.depthFunc(b),f.depth_func=b);b=N[0];v=N[1];if(b!==M[0]||v!==M[1])E.depthRange(b,v),M[0]=b,M[1]=v;b=I.depth_mask;b!==f.depth_mask&&(E.depthMask(b),f.depth_mask=b);b=C[0];v=C[1];z=C[2];r=C[3];if(b!==g[0]||v!==g[1]||z!==g[2]||r!==g[3])E.colorMask(b,v,z,r),g[0]=b,g[1]=v,g[2]=z,g[3]=r;b=I.cull_enable;b!==f.cull_enable&&(b?E.enable(2884):E.disable(2884),f.cull_enable=b);b=I.cull_face;b!==f.cull_face&&(E.cullFace(b),f.cull_face=b);b=I.frontFace;b!==f.frontFace&&(E.frontFace(b),f.frontFace=
b);b=I.lineWidth;b!==f.lineWidth&&(E.lineWidth(b),f.lineWidth=b);b=I.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),f.polygonOffset_enable=b);b=ha[0];v=ha[1];if(b!==pa[0]||v!==pa[1])E.polygonOffset(b,v),pa[0]=b,pa[1]=v;b=I.sample_alpha;b!==f.sample_alpha&&(b?E.enable(32926):E.disable(32926),f.sample_alpha=b);b=I.sample_enable;b!==f.sample_enable&&(b?E.enable(32928):E.disable(32928),f.sample_enable=b);b=m[0];v=m[1];if(b!==J[0]||v!==J[1])E.sampleCoverage(b,v),J[0]=
b,J[1]=v;b=I.stencil_enable;b!==f.stencil_enable&&(b?E.enable(2960):E.disable(2960),f.stencil_enable=b);b=I.stencil_mask;b!==f.stencil_mask&&(E.stencilMask(b),f.stencil_mask=b);b=ma[0];v=ma[1];z=ma[2];if(b!==qa[0]||v!==qa[1]||z!==qa[2])E.stencilFunc(b,v,z),qa[0]=b,qa[1]=v,qa[2]=z;b=fa[0];v=fa[1];z=fa[2];r=fa[3];if(b!==Ba[0]||v!==Ba[1]||z!==Ba[2]||r!==Ba[3])E.stencilOpSeparate(b,v,z,r),Ba[0]=b,Ba[1]=v,Ba[2]=z,Ba[3]=r;b=Aa[0];v=Aa[1];z=Aa[2];r=Aa[3];if(b!==wa[0]||v!==wa[1]||z!==wa[2]||r!==wa[3])E.stencilOpSeparate(b,
v,z,r),wa[0]=b,wa[1]=v,wa[2]=z,wa[3]=r;b=I.scissor_enable;b!==f.scissor_enable&&(b?E.enable(3089):E.disable(3089),f.scissor_enable=b);b=aa[0];v=aa[1];z=aa[2];r=aa[3];if(b!==Q[0]||v!==Q[1]||z!==Q[2]||r!==Q[3])E.scissor(b,v,z,r),Q[0]=b,Q[1]=v,Q[2]=z,Q[3]=r;b=ka[0];v=ka[1];z=ka[2];r=ka[3];if(b!==oa[0]||v!==oa[1]||z!==oa[2]||r!==oa[3])E.viewport(b,v,z,r),oa[0]=b,oa[1]=v,oa[2]=z,oa[3]=r}E.disable(2929);f.depth_enable=!1;if(b=f.profile)na=performance.now(),L.count++;E.useProgram(e.program);A.setVAO(null);
v=S.location;z=k[v];z.buffer||E.enableVertexAttribArray(v);if(z.type!==l.dtype||2!==z.size||z.buffer!==l||!1!==z.normalized||0!==z.offset||0!==z.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(v,2,l.dtype,!1,0,0),z.type=l.dtype,z.size=2,z.buffer=l,z.normalized=!1,z.offset=0,z.stride=0;v=q.call(this,X,a,0);"number"!==typeof v&&da.commandRaise(c,K);E.uniform1f(ia.location,v);v=a.offset;d(v)&&2===v.length||da.commandRaise(F,K);E.uniform2f(t.location,v[0],v[1]);a=B.call(this,X,a,0);d(a)&&4===
a.length||da.commandRaise(G,K);E.uniform4f(h.location,a[0],a[1],a[2],a[3]);(a=w.elements)?E.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=Y.getElements(A.currentVAO.elements))&&E.bindBuffer(34963,a.buffer.buffer);v=w.primitive;z=w.offset;a?E.drawElements(v,3,a.type,z<<(a.type-5121>>1)):E.drawArrays(v,z,3);f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-na)},scope:function(c,d,g){var b,h,k,m,e,q,t,v,z,A,H,D,E,C,Q,fa,J,K,B,x,M;b=I.depth_enable;I.depth_enable=!1;if(h=f.profile)k=performance.now(),
L.count++;m=w.count;w.count=3;e=U.call(this,X,c,g);q=ta[3];ta[3]=e;t=n.call(this,X,c,g);e=ta[5];ta[5]=t;v=c.offset;t=ta[4];ta[4]=v;v=u.buffer;u.buffer=l;z=u.divisor;u.divisor=0;A=u.normalized;u.normalized=!1;H=u.offset;u.offset=0;D=u.size;u.size=0;E=u.state;u.state=1;C=u.stride;u.stride=0;Q=u.type;u.type=l.dtype;fa=u.w;u.w=0;J=u.x;u.x=0;K=u.y;u.y=0;B=u.z;u.z=0;x=a.vert;a.vert=2;M=a.frag;a.frag=1;f.dirty=!0;d(X,c,g);I.depth_enable=b;h&&(L.cpuTime+=performance.now()-k);w.count=m;ta[3]=q;ta[5]=e;ta[4]=
t;u.buffer=v;u.divisor=z;u.normalized=A;u.offset=H;u.size=D;u.state=E;u.stride=C;u.type=Q;u.w=fa;u.x=J;u.y=K;u.z=B;a.vert=x;a.frag=M;f.dirty=!0},batch:function(a,c){var b,e,q,r;b=D.next;b!==D.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),D.cur=b);if(f.dirty){var p,y,u;b=I.dither;b!==f.dither&&(b?E.enable(3024):E.disable(3024),f.dither=b);b=I.blend_enable;b!==f.blend_enable&&(b?E.enable(3042):E.disable(3042),f.blend_enable=b);b=ja[0];p=ja[1];y=ja[2];u=ja[3];if(b!==Z[0]||
p!==Z[1]||y!==Z[2]||u!==Z[3])E.blendColor(b,p,y,u),Z[0]=b,Z[1]=p,Z[2]=y,Z[3]=u;b=V[0];p=V[1];if(b!==ea[0]||p!==ea[1])E.blendEquationSeparate(b,p),ea[0]=b,ea[1]=p;b=O[0];p=O[1];y=O[2];u=O[3];if(b!==P[0]||p!==P[1]||y!==P[2]||u!==P[3])E.blendFuncSeparate(b,p,y,u),P[0]=b,P[1]=p,P[2]=y,P[3]=u;b=I.depth_func;b!==f.depth_func&&(E.depthFunc(b),f.depth_func=b);b=N[0];p=N[1];if(b!==M[0]||p!==M[1])E.depthRange(b,p),M[0]=b,M[1]=p;b=I.depth_mask;b!==f.depth_mask&&(E.depthMask(b),f.depth_mask=b);b=C[0];p=C[1];
y=C[2];u=C[3];if(b!==g[0]||p!==g[1]||y!==g[2]||u!==g[3])E.colorMask(b,p,y,u),g[0]=b,g[1]=p,g[2]=y,g[3]=u;b=I.cull_enable;b!==f.cull_enable&&(b?E.enable(2884):E.disable(2884),f.cull_enable=b);b=I.cull_face;b!==f.cull_face&&(E.cullFace(b),f.cull_face=b);b=I.frontFace;b!==f.frontFace&&(E.frontFace(b),f.frontFace=b);b=I.lineWidth;b!==f.lineWidth&&(E.lineWidth(b),f.lineWidth=b);b=I.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),f.polygonOffset_enable=b);b=ha[0];p=
ha[1];if(b!==pa[0]||p!==pa[1])E.polygonOffset(b,p),pa[0]=b,pa[1]=p;b=I.sample_alpha;b!==f.sample_alpha&&(b?E.enable(32926):E.disable(32926),f.sample_alpha=b);b=I.sample_enable;b!==f.sample_enable&&(b?E.enable(32928):E.disable(32928),f.sample_enable=b);b=m[0];p=m[1];if(b!==J[0]||p!==J[1])E.sampleCoverage(b,p),J[0]=b,J[1]=p;b=I.stencil_enable;b!==f.stencil_enable&&(b?E.enable(2960):E.disable(2960),f.stencil_enable=b);b=I.stencil_mask;b!==f.stencil_mask&&(E.stencilMask(b),f.stencil_mask=b);b=ma[0];p=
ma[1];y=ma[2];if(b!==qa[0]||p!==qa[1]||y!==qa[2])E.stencilFunc(b,p,y),qa[0]=b,qa[1]=p,qa[2]=y;b=fa[0];p=fa[1];y=fa[2];u=fa[3];if(b!==Ba[0]||p!==Ba[1]||y!==Ba[2]||u!==Ba[3])E.stencilOpSeparate(b,p,y,u),Ba[0]=b,Ba[1]=p,Ba[2]=y,Ba[3]=u;b=Aa[0];p=Aa[1];y=Aa[2];u=Aa[3];if(b!==wa[0]||p!==wa[1]||y!==wa[2]||u!==wa[3])E.stencilOpSeparate(b,p,y,u),wa[0]=b,wa[1]=p,wa[2]=y,wa[3]=u;b=I.scissor_enable;b!==f.scissor_enable&&(b?E.enable(3089):E.disable(3089),f.scissor_enable=b);b=aa[0];p=aa[1];y=aa[2];u=aa[3];if(b!==
Q[0]||p!==Q[1]||y!==Q[2]||u!==Q[3])E.scissor(b,p,y,u),Q[0]=b,Q[1]=p,Q[2]=y,Q[3]=u;b=ka[0];p=ka[1];y=ka[2];u=ka[3];if(b!==oa[0]||p!==oa[1]||y!==oa[2]||u!==oa[3])E.viewport(b,p,y,u),oa[0]=b,oa[1]=p,oa[2]=y,oa[3]=u}E.disable(2929);f.depth_enable=!1;if(b=f.profile)e=performance.now(),L.count+=c;E.useProgram(x.program);A.setVAO(null);p=S.location;y=k[p];y.buffer||E.enableVertexAttribArray(p);if(y.type!==l.dtype||2!==y.size||y.buffer!==l||!1!==y.normalized||0!==y.offset||0!==y.stride)E.bindBuffer(34962,
l.buffer),E.vertexAttribPointer(p,2,l.dtype,!1,0,0),y.type=l.dtype,y.size=2,y.buffer=l,y.normalized=!1,y.offset=0,y.stride=0;q=ba.call(this,X,r,q);"number"!==typeof q&&da.commandRaise(v,K);E.uniform1f(ia.location,q);(p=w.elements)?E.bindBuffer(34963,p.buffer.buffer):A.currentVAO&&(p=Y.getElements(A.currentVAO.elements))&&E.bindBuffer(34963,p.buffer.buffer);y=w.primitive;u=w.offset;for(q=0;q<c;++q){r=a[q];var n,B,F,ga,H,sa,Ca,ra,G;n=r.offset;d(n)&&2===n.length||da.commandRaise(T,K);B=n[0];n=n[1];q&&
F===B&&ga===n||(F=B,ga=n,E.uniform2f(t.location,B,n));H=z.call(this,X,r,q);d(H)&&4===H.length||da.commandRaise(R,K);r=H[0];B=H[1];n=H[2];H=H[3];q&&sa===r&&Ca===B&&ra===n&&G===H||(sa=r,Ca=B,ra=n,G=H,E.uniform4f(h.location,r,B,n,H));p?E.drawElements(y,3,p.type,u<<(p.type-5121>>1)):E.drawArrays(y,u,3)}f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-e)}}},"$23,model,position,projection,view":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w){var Y,D,E,d,I,a,ta,A,ja,Z,V,ea,
O,P,C,g,N,M,ha,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea;Y=b.attributes;D=b.context;E=b.current;d=b.draw;I=b.framebuffer;a=b.gl;ta=b.isArrayLike;A=b.next;ja=b.shader;Z=b.uniforms;V=b.vao;ea=A.blend_color;O=E.blend_color;P=A.blend_equation;C=E.blend_equation;g=A.blend_func;N=E.blend_func;M=A.colorMask;ha=E.colorMask;pa=A.depth_range;m=E.depth_range;J=A.polygonOffset_offset;aa=E.polygonOffset_offset;Q=A.sample_coverage;ma=E.sample_coverage;qa=A.scissor_box;Aa=E.scissor_box;wa=A.stencil_func;
fa=E.stencil_func;Ba=A.stencil_opBack;ka=E.stencil_opBack;oa=A.stencil_opFront;ya=E.stencil_opFront;Ja=A.viewport;na=E.viewport;Xa=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);r=new Float32Array(16);p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];y=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);Ea=new Float32Array(16);return{draw:function(d){var b,h,p,t;b=I.next;b!==I.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),I.cur=
b);if(E.dirty){var y;b=A.dither;b!==E.dither&&(b?a.enable(3024):a.disable(3024),E.dither=b);b=A.blend_enable;b!==E.blend_enable&&(b?a.enable(3042):a.disable(3042),E.blend_enable=b);b=ea[0];p=ea[1];t=ea[2];y=ea[3];if(b!==O[0]||p!==O[1]||t!==O[2]||y!==O[3])a.blendColor(b,p,t,y),O[0]=b,O[1]=p,O[2]=t,O[3]=y;b=P[0];p=P[1];if(b!==C[0]||p!==C[1])a.blendEquationSeparate(b,p),C[0]=b,C[1]=p;b=g[0];p=g[1];t=g[2];y=g[3];if(b!==N[0]||p!==N[1]||t!==N[2]||y!==N[3])a.blendFuncSeparate(b,p,t,y),N[0]=b,N[1]=p,N[2]=
t,N[3]=y;b=A.depth_enable;b!==E.depth_enable&&(b?a.enable(2929):a.disable(2929),E.depth_enable=b);b=A.depth_func;b!==E.depth_func&&(a.depthFunc(b),E.depth_func=b);b=pa[0];p=pa[1];if(b!==m[0]||p!==m[1])a.depthRange(b,p),m[0]=b,m[1]=p;b=A.depth_mask;b!==E.depth_mask&&(a.depthMask(b),E.depth_mask=b);b=M[0];p=M[1];t=M[2];y=M[3];if(b!==ha[0]||p!==ha[1]||t!==ha[2]||y!==ha[3])a.colorMask(b,p,t,y),ha[0]=b,ha[1]=p,ha[2]=t,ha[3]=y;b=A.cull_enable;b!==E.cull_enable&&(b?a.enable(2884):a.disable(2884),E.cull_enable=
b);b=A.cull_face;b!==E.cull_face&&(a.cullFace(b),E.cull_face=b);b=A.frontFace;b!==E.frontFace&&(a.frontFace(b),E.frontFace=b);b=A.lineWidth;b!==E.lineWidth&&(a.lineWidth(b),E.lineWidth=b);b=A.polygonOffset_enable;b!==E.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),E.polygonOffset_enable=b);b=J[0];p=J[1];if(b!==aa[0]||p!==aa[1])a.polygonOffset(b,p),aa[0]=b,aa[1]=p;b=A.sample_alpha;b!==E.sample_alpha&&(b?a.enable(32926):a.disable(32926),E.sample_alpha=b);b=A.sample_enable;b!==E.sample_enable&&
(b?a.enable(32928):a.disable(32928),E.sample_enable=b);b=Q[0];p=Q[1];if(b!==ma[0]||p!==ma[1])a.sampleCoverage(b,p),ma[0]=b,ma[1]=p;b=A.stencil_enable;b!==E.stencil_enable&&(b?a.enable(2960):a.disable(2960),E.stencil_enable=b);b=A.stencil_mask;b!==E.stencil_mask&&(a.stencilMask(b),E.stencil_mask=b);b=wa[0];p=wa[1];t=wa[2];if(b!==fa[0]||p!==fa[1]||t!==fa[2])a.stencilFunc(b,p,t),fa[0]=b,fa[1]=p,fa[2]=t;b=oa[0];p=oa[1];t=oa[2];y=oa[3];if(b!==ya[0]||p!==ya[1]||t!==ya[2]||y!==ya[3])a.stencilOpSeparate(b,
p,t,y),ya[0]=b,ya[1]=p,ya[2]=t,ya[3]=y;b=Ba[0];p=Ba[1];t=Ba[2];y=Ba[3];if(b!==ka[0]||p!==ka[1]||t!==ka[2]||y!==ka[3])a.stencilOpSeparate(b,p,t,y),ka[0]=b,ka[1]=p,ka[2]=t,ka[3]=y;b=A.scissor_enable;b!==E.scissor_enable&&(b?a.enable(3089):a.disable(3089),E.scissor_enable=b);b=qa[0];p=qa[1];t=qa[2];y=qa[3];if(b!==Aa[0]||p!==Aa[1]||t!==Aa[2]||y!==Aa[3])a.scissor(b,p,t,y),Aa[0]=b,Aa[1]=p,Aa[2]=t,Aa[3]=y;b=Ja[0];p=Ja[1];t=Ja[2];y=Ja[3];if(b!==na[0]||p!==na[1]||t!==na[2]||y!==na[3])a.viewport(b,p,t,y),na[0]=
b,na[1]=p,na[2]=t,na[3]=y;E.dirty=!1}if(b=E.profile)h=performance.now(),L.count++;a.useProgram(e.program);V.setVAO(null);p=X.location;t=Y[p];t.buffer||a.enableVertexAttribArray(p);if(t.type!==l.dtype||3!==t.size||t.buffer!==l||!1!==t.normalized||0!==t.offset||0!==t.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(p,3,l.dtype,!1,0,0),t.type=l.dtype,t.size=3,t.buffer=l,t.normalized=!1,t.offset=0,t.stride=0;a.uniformMatrix4fv(k.location,!1,Xa);p=q.call(this,D,d,0);ta(p)&&16===p.length||da.commandRaise(c,
K);a.uniformMatrix4fv(w.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Ta[0]=p[0],Ta[1]=p[1],Ta[2]=p[2],Ta[3]=p[3],Ta[4]=p[4],Ta[5]=p[5],Ta[6]=p[6],Ta[7]=p[7],Ta[8]=p[8],Ta[9]=p[9],Ta[10]=p[10],Ta[11]=p[11],Ta[12]=p[12],Ta[13]=p[13],Ta[14]=p[14],Ta[15]=p[15],Ta));d=F.call(this,D,d,0);ta(d)&&16===d.length||da.commandRaise(B,K);a.uniformMatrix4fv(f.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(r[0]=d[0],r[1]=d[1],r[2]=d[2],r[3]=d[3],r[4]=d[4],r[5]=d[5],r[6]=d[6],r[7]=d[7],r[8]=
d[8],r[9]=d[9],r[10]=d[10],r[11]=d[11],r[12]=d[12],r[13]=d[13],r[14]=d[14],r[15]=d[15],r));G&&a.bindBuffer(34963,G.buffer.buffer);d=G.primType;p=G.vertCount-0;0<=p||da.commandRaise(U,K);p&&(a.drawElements(d,p,G.type,0<<(G.type-5121>>1)),V.setVAO(null),b&&(L.cpuTime+=performance.now()-h))},scope:function(a,c,b){var f,g,h,k,m,r,e,q,t,y,w,z,A,C,Q,I,fa,J,na,B,M,Xa,N;if(f=E.profile)g=performance.now(),L.count++;h=d.elements;d.elements=n;k=d.offset;d.offset=0;m=n.vertCount-0;0<=m||da.commandRaise(u,K);
r=d.count;d.count=m;e=n.primType;m=d.primitive;d.primitive=e;e=Z[3];Z[3]=p;q=x.call(this,D,a,b);t=Z[5];Z[5]=q;y=ba.call(this,D,a,b);q=Z[4];Z[4]=y;y=v.buffer;v.buffer=l;w=v.divisor;v.divisor=0;z=v.normalized;v.normalized=!1;A=v.offset;v.offset=0;C=v.size;v.size=0;Q=v.state;v.state=1;I=v.stride;v.stride=0;fa=v.type;v.type=l.dtype;J=v.w;v.w=0;na=v.x;v.x=0;B=v.y;v.y=0;M=v.z;v.z=0;Xa=ja.vert;ja.vert=2;N=ja.frag;ja.frag=1;c(D,a,b);f&&(L.cpuTime+=performance.now()-g);d.elements=h;d.offset=k;d.count=r;d.primitive=
m;Z[3]=e;Z[5]=t;Z[4]=q;v.buffer=y;v.divisor=w;v.normalized=z;v.offset=A;v.size=C;v.state=Q;v.stride=I;v.type=fa;v.w=J;v.x=na;v.y=B;v.z=M;ja.vert=Xa;ja.frag=N},batch:function(d,c){var b,r,p;b=I.next;b!==I.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),I.cur=b);if(E.dirty){var e,q,v;b=A.dither;b!==E.dither&&(b?a.enable(3024):a.disable(3024),E.dither=b);b=A.blend_enable;b!==E.blend_enable&&(b?a.enable(3042):a.disable(3042),E.blend_enable=b);b=ea[0];e=ea[1];q=ea[2];v=ea[3];
if(b!==O[0]||e!==O[1]||q!==O[2]||v!==O[3])a.blendColor(b,e,q,v),O[0]=b,O[1]=e,O[2]=q,O[3]=v;b=P[0];e=P[1];if(b!==C[0]||e!==C[1])a.blendEquationSeparate(b,e),C[0]=b,C[1]=e;b=g[0];e=g[1];q=g[2];v=g[3];if(b!==N[0]||e!==N[1]||q!==N[2]||v!==N[3])a.blendFuncSeparate(b,e,q,v),N[0]=b,N[1]=e,N[2]=q,N[3]=v;b=A.depth_enable;b!==E.depth_enable&&(b?a.enable(2929):a.disable(2929),E.depth_enable=b);b=A.depth_func;b!==E.depth_func&&(a.depthFunc(b),E.depth_func=b);b=pa[0];e=pa[1];if(b!==m[0]||e!==m[1])a.depthRange(b,
e),m[0]=b,m[1]=e;b=A.depth_mask;b!==E.depth_mask&&(a.depthMask(b),E.depth_mask=b);b=M[0];e=M[1];q=M[2];v=M[3];if(b!==ha[0]||e!==ha[1]||q!==ha[2]||v!==ha[3])a.colorMask(b,e,q,v),ha[0]=b,ha[1]=e,ha[2]=q,ha[3]=v;b=A.cull_enable;b!==E.cull_enable&&(b?a.enable(2884):a.disable(2884),E.cull_enable=b);b=A.cull_face;b!==E.cull_face&&(a.cullFace(b),E.cull_face=b);b=A.frontFace;b!==E.frontFace&&(a.frontFace(b),E.frontFace=b);b=A.lineWidth;b!==E.lineWidth&&(a.lineWidth(b),E.lineWidth=b);b=A.polygonOffset_enable;
b!==E.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),E.polygonOffset_enable=b);b=J[0];e=J[1];if(b!==aa[0]||e!==aa[1])a.polygonOffset(b,e),aa[0]=b,aa[1]=e;b=A.sample_alpha;b!==E.sample_alpha&&(b?a.enable(32926):a.disable(32926),E.sample_alpha=b);b=A.sample_enable;b!==E.sample_enable&&(b?a.enable(32928):a.disable(32928),E.sample_enable=b);b=Q[0];e=Q[1];if(b!==ma[0]||e!==ma[1])a.sampleCoverage(b,e),ma[0]=b,ma[1]=e;b=A.stencil_enable;b!==E.stencil_enable&&(b?a.enable(2960):a.disable(2960),
E.stencil_enable=b);b=A.stencil_mask;b!==E.stencil_mask&&(a.stencilMask(b),E.stencil_mask=b);b=wa[0];e=wa[1];q=wa[2];if(b!==fa[0]||e!==fa[1]||q!==fa[2])a.stencilFunc(b,e,q),fa[0]=b,fa[1]=e,fa[2]=q;b=oa[0];e=oa[1];q=oa[2];v=oa[3];if(b!==ya[0]||e!==ya[1]||q!==ya[2]||v!==ya[3])a.stencilOpSeparate(b,e,q,v),ya[0]=b,ya[1]=e,ya[2]=q,ya[3]=v;b=Ba[0];e=Ba[1];q=Ba[2];v=Ba[3];if(b!==ka[0]||e!==ka[1]||q!==ka[2]||v!==ka[3])a.stencilOpSeparate(b,e,q,v),ka[0]=b,ka[1]=e,ka[2]=q,ka[3]=v;b=A.scissor_enable;b!==E.scissor_enable&&
(b?a.enable(3089):a.disable(3089),E.scissor_enable=b);b=qa[0];e=qa[1];q=qa[2];v=qa[3];if(b!==Aa[0]||e!==Aa[1]||q!==Aa[2]||v!==Aa[3])a.scissor(b,e,q,v),Aa[0]=b,Aa[1]=e,Aa[2]=q,Aa[3]=v;b=Ja[0];e=Ja[1];q=Ja[2];v=Ja[3];if(b!==na[0]||e!==na[1]||q!==na[2]||v!==na[3])a.viewport(b,e,q,v),na[0]=b,na[1]=e,na[2]=q,na[3]=v;E.dirty=!1}if(b=E.profile)r=performance.now(),L.count+=c;a.useProgram(T.program);V.setVAO(null);e=X.location;q=Y[e];q.buffer||a.enableVertexAttribArray(e);if(q.type!==l.dtype||3!==q.size||
q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(e,3,l.dtype,!1,0,0),q.type=l.dtype,q.size=3,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;a.uniformMatrix4fv(k.location,!1,y);e=z.call(this,D,void 0,p);ta(e)&&16===e.length||da.commandRaise(R,K);a.uniformMatrix4fv(w.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(va[0]=e[0],va[1]=e[1],va[2]=e[2],va[3]=e[3],va[4]=e[4],va[5]=e[5],va[6]=e[6],va[7]=e[7],va[8]=e[8],va[9]=e[9],va[10]=
e[10],va[11]=e[11],va[12]=e[12],va[13]=e[13],va[14]=e[14],va[15]=e[15],va));p=ia.call(this,D,void 0,p);ta(p)&&16===p.length||da.commandRaise(h,K);a.uniformMatrix4fv(f.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Ea[0]=p[0],Ea[1]=p[1],Ea[2]=p[2],Ea[3]=p[3],Ea[4]=p[4],Ea[5]=p[5],Ea[6]=p[6],Ea[7]=p[7],Ea[8]=p[8],Ea[9]=p[9],Ea[10]=p[10],Ea[11]=p[11],Ea[12]=p[12],Ea[13]=p[13],Ea[14]=p[14],Ea[15]=p[15],Ea));t&&a.bindBuffer(34963,t.buffer.buffer);e=t.primType;q=t.vertCount-0;0<=q||da.commandRaise(S,
K);for(p=0;p<c;++p)q&&a.drawElements(e,q,t.type,0<<(t.type-5121>>1));V.setVAO(null);b&&(L.cpuTime+=performance.now()-r)}}},$20:function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia){var h,t,S,k,X,f,w,Y,D,E,d,I,a,ta,A,ja,Z,V,ea,O,P,C,g,N,M,ha,pa,m,J,aa,Q,ma,qa,Aa;h=b.context;t=b.current;S=b.framebuffer;k=b.gl;X=b.next;f=b.shader;w=b.uniforms;Y=b.vao;D=X.blend_color;E=t.blend_color;d=X.blend_equation;I=t.blend_equation;a=X.blend_func;ta=t.blend_func;A=X.colorMask;ja=t.colorMask;Z=X.depth_range;V=t.depth_range;
ea=X.polygonOffset_offset;O=t.polygonOffset_offset;P=X.sample_coverage;C=t.sample_coverage;g=X.scissor_box;N=t.scissor_box;M=X.stencil_func;ha=t.stencil_func;pa=X.stencil_opBack;m=t.stencil_opBack;J=X.stencil_opFront;aa=t.stencil_opFront;Q=X.viewport;ma=t.viewport;qa={};Aa={};return{draw:function(b){var v,w,z,u,n,x,na,Xa,R,r,p,y,G;v=h.center;w=h.distance;z=h.eye;u=h.phi;n=h.projection;x=q.call(this,h,b,0);na=h.theta;Xa=h.up;R=h.view;h.center=e;h.distance=2.302585092994046;h.eye=l;h.phi=0;h.projection=
x;h.theta=0;h.up=c;h.view=F;x=S.next;x!==S.cur&&(x?k.bindFramebuffer(36160,x.framebuffer):k.bindFramebuffer(36160,null),S.cur=x);if(t.dirty){x=X.dither;x!==t.dither&&(x?k.enable(3024):k.disable(3024),t.dither=x);x=X.blend_enable;x!==t.blend_enable&&(x?k.enable(3042):k.disable(3042),t.blend_enable=x);x=D[0];p=D[1];y=D[2];G=D[3];if(x!==E[0]||p!==E[1]||y!==E[2]||G!==E[3])k.blendColor(x,p,y,G),E[0]=x,E[1]=p,E[2]=y,E[3]=G;x=d[0];p=d[1];if(x!==I[0]||p!==I[1])k.blendEquationSeparate(x,p),I[0]=x,I[1]=p;x=
a[0];p=a[1];y=a[2];G=a[3];if(x!==ta[0]||p!==ta[1]||y!==ta[2]||G!==ta[3])k.blendFuncSeparate(x,p,y,G),ta[0]=x,ta[1]=p,ta[2]=y,ta[3]=G;x=X.depth_enable;x!==t.depth_enable&&(x?k.enable(2929):k.disable(2929),t.depth_enable=x);x=X.depth_func;x!==t.depth_func&&(k.depthFunc(x),t.depth_func=x);x=Z[0];p=Z[1];if(x!==V[0]||p!==V[1])k.depthRange(x,p),V[0]=x,V[1]=p;x=X.depth_mask;x!==t.depth_mask&&(k.depthMask(x),t.depth_mask=x);x=A[0];p=A[1];y=A[2];G=A[3];if(x!==ja[0]||p!==ja[1]||y!==ja[2]||G!==ja[3])k.colorMask(x,
p,y,G),ja[0]=x,ja[1]=p,ja[2]=y,ja[3]=G;x=X.cull_enable;x!==t.cull_enable&&(x?k.enable(2884):k.disable(2884),t.cull_enable=x);x=X.cull_face;x!==t.cull_face&&(k.cullFace(x),t.cull_face=x);x=X.frontFace;x!==t.frontFace&&(k.frontFace(x),t.frontFace=x);x=X.lineWidth;x!==t.lineWidth&&(k.lineWidth(x),t.lineWidth=x);x=X.polygonOffset_enable;x!==t.polygonOffset_enable&&(x?k.enable(32823):k.disable(32823),t.polygonOffset_enable=x);x=ea[0];p=ea[1];if(x!==O[0]||p!==O[1])k.polygonOffset(x,p),O[0]=x,O[1]=p;x=X.sample_alpha;
x!==t.sample_alpha&&(x?k.enable(32926):k.disable(32926),t.sample_alpha=x);x=X.sample_enable;x!==t.sample_enable&&(x?k.enable(32928):k.disable(32928),t.sample_enable=x);x=P[0];p=P[1];if(x!==C[0]||p!==C[1])k.sampleCoverage(x,p),C[0]=x,C[1]=p;x=X.stencil_enable;x!==t.stencil_enable&&(x?k.enable(2960):k.disable(2960),t.stencil_enable=x);x=X.stencil_mask;x!==t.stencil_mask&&(k.stencilMask(x),t.stencil_mask=x);x=M[0];p=M[1];y=M[2];if(x!==ha[0]||p!==ha[1]||y!==ha[2])k.stencilFunc(x,p,y),ha[0]=x,ha[1]=p,
ha[2]=y;x=J[0];p=J[1];y=J[2];G=J[3];if(x!==aa[0]||p!==aa[1]||y!==aa[2]||G!==aa[3])k.stencilOpSeparate(x,p,y,G),aa[0]=x,aa[1]=p,aa[2]=y,aa[3]=G;x=pa[0];p=pa[1];y=pa[2];G=pa[3];if(x!==m[0]||p!==m[1]||y!==m[2]||G!==m[3])k.stencilOpSeparate(x,p,y,G),m[0]=x,m[1]=p,m[2]=y,m[3]=G;x=X.scissor_enable;x!==t.scissor_enable&&(x?k.enable(3089):k.disable(3089),t.scissor_enable=x);x=g[0];p=g[1];y=g[2];G=g[3];if(x!==N[0]||p!==N[1]||y!==N[2]||G!==N[3])k.scissor(x,p,y,G),N[0]=x,N[1]=p,N[2]=y,N[3]=G;x=Q[0];p=Q[1];y=
Q[2];G=Q[3];if(x!==ma[0]||p!==ma[1]||y!==ma[2]||G!==ma[3])k.viewport(x,p,y,G),ma[0]=x,ma[1]=p,ma[2]=y,ma[3]=G;t.dirty=!1}if(x=t.profile)r=performance.now(),L.count++;p=f.program(f.vert,f.frag,K);k.useProgram(p.program);Y.setVAO(null);y=p.id;(G=qa[y])||(G=qa[y]=B(p));G.call(this,b);Y.setVAO(null);h.center=v;h.distance=w;h.eye=z;h.phi=u;h.projection=n;h.theta=na;h.up=Xa;h.view=R;x&&(L.cpuTime+=performance.now()-r)},scope:function(a,d,c){var b,f,g,k,l,m,e,r,p,q,v,z,A,D,E,H,C,Q,I;b=h.center;f=h.distance;
g=h.eye;k=h.phi;l=h.projection;m=n.call(this,h,a,c);e=h.theta;r=h.up;p=h.view;h.center=G;h.distance=2.302585092994046;h.eye=U;h.phi=0;h.projection=m;h.theta=0;h.up=u;h.view=x;if(m=t.profile)q=performance.now(),L.count++;v=h.center;z=w[1];w[1]=v;A=h.distance;v=w[2];w[2]=A;D=h.eye;A=w[3];w[3]=D;E=h.phi;D=w[4];w[4]=E;H=h.projection;E=w[5];w[5]=H;C=h.theta;H=w[6];w[6]=C;Q=h.up;C=w[7];w[7]=Q;Q=h.view;I=w[8];w[8]=Q;d(h,a,c);h.center=b;h.distance=f;h.eye=g;h.phi=k;h.projection=l;h.theta=e;h.up=r;h.view=
p;m&&(L.cpuTime+=performance.now()-q);w[1]=z;w[2]=v;w[3]=A;w[4]=D;w[5]=E;w[6]=H;w[7]=C;w[8]=I},batch:function(c,b){var l,e,q,w,u,n,x,B,r,p,y,G,F;l=h.center;e=h.distance;q=h.eye;w=h.phi;u=h.projection;n=T.call(this,h,c,0);x=h.theta;B=h.up;r=h.view;h.center=ba;h.distance=2.302585092994046;h.eye=v;h.phi=0;h.projection=n;h.theta=0;h.up=z;h.view=R;n=S.next;n!==S.cur&&(n?k.bindFramebuffer(36160,n.framebuffer):k.bindFramebuffer(36160,null),S.cur=n);if(t.dirty){n=X.dither;n!==t.dither&&(n?k.enable(3024):
k.disable(3024),t.dither=n);n=X.blend_enable;n!==t.blend_enable&&(n?k.enable(3042):k.disable(3042),t.blend_enable=n);n=D[0];y=D[1];G=D[2];F=D[3];if(n!==E[0]||y!==E[1]||G!==E[2]||F!==E[3])k.blendColor(n,y,G,F),E[0]=n,E[1]=y,E[2]=G,E[3]=F;n=d[0];y=d[1];if(n!==I[0]||y!==I[1])k.blendEquationSeparate(n,y),I[0]=n,I[1]=y;n=a[0];y=a[1];G=a[2];F=a[3];if(n!==ta[0]||y!==ta[1]||G!==ta[2]||F!==ta[3])k.blendFuncSeparate(n,y,G,F),ta[0]=n,ta[1]=y,ta[2]=G,ta[3]=F;n=X.depth_enable;n!==t.depth_enable&&(n?k.enable(2929):
k.disable(2929),t.depth_enable=n);n=X.depth_func;n!==t.depth_func&&(k.depthFunc(n),t.depth_func=n);n=Z[0];y=Z[1];if(n!==V[0]||y!==V[1])k.depthRange(n,y),V[0]=n,V[1]=y;n=X.depth_mask;n!==t.depth_mask&&(k.depthMask(n),t.depth_mask=n);n=A[0];y=A[1];G=A[2];F=A[3];if(n!==ja[0]||y!==ja[1]||G!==ja[2]||F!==ja[3])k.colorMask(n,y,G,F),ja[0]=n,ja[1]=y,ja[2]=G,ja[3]=F;n=X.cull_enable;n!==t.cull_enable&&(n?k.enable(2884):k.disable(2884),t.cull_enable=n);n=X.cull_face;n!==t.cull_face&&(k.cullFace(n),t.cull_face=
n);n=X.frontFace;n!==t.frontFace&&(k.frontFace(n),t.frontFace=n);n=X.lineWidth;n!==t.lineWidth&&(k.lineWidth(n),t.lineWidth=n);n=X.polygonOffset_enable;n!==t.polygonOffset_enable&&(n?k.enable(32823):k.disable(32823),t.polygonOffset_enable=n);n=ea[0];y=ea[1];if(n!==O[0]||y!==O[1])k.polygonOffset(n,y),O[0]=n,O[1]=y;n=X.sample_alpha;n!==t.sample_alpha&&(n?k.enable(32926):k.disable(32926),t.sample_alpha=n);n=X.sample_enable;n!==t.sample_enable&&(n?k.enable(32928):k.disable(32928),t.sample_enable=n);n=
P[0];y=P[1];if(n!==C[0]||y!==C[1])k.sampleCoverage(n,y),C[0]=n,C[1]=y;n=X.stencil_enable;n!==t.stencil_enable&&(n?k.enable(2960):k.disable(2960),t.stencil_enable=n);n=X.stencil_mask;n!==t.stencil_mask&&(k.stencilMask(n),t.stencil_mask=n);n=M[0];y=M[1];G=M[2];if(n!==ha[0]||y!==ha[1]||G!==ha[2])k.stencilFunc(n,y,G),ha[0]=n,ha[1]=y,ha[2]=G;n=J[0];y=J[1];G=J[2];F=J[3];if(n!==aa[0]||y!==aa[1]||G!==aa[2]||F!==aa[3])k.stencilOpSeparate(n,y,G,F),aa[0]=n,aa[1]=y,aa[2]=G,aa[3]=F;n=pa[0];y=pa[1];G=pa[2];F=pa[3];
if(n!==m[0]||y!==m[1]||G!==m[2]||F!==m[3])k.stencilOpSeparate(n,y,G,F),m[0]=n,m[1]=y,m[2]=G,m[3]=F;n=X.scissor_enable;n!==t.scissor_enable&&(n?k.enable(3089):k.disable(3089),t.scissor_enable=n);n=g[0];y=g[1];G=g[2];F=g[3];if(n!==N[0]||y!==N[1]||G!==N[2]||F!==N[3])k.scissor(n,y,G,F),N[0]=n,N[1]=y,N[2]=G,N[3]=F;n=Q[0];y=Q[1];G=Q[2];F=Q[3];if(n!==ma[0]||y!==ma[1]||G!==ma[2]||F!==ma[3])k.viewport(n,y,G,F),ma[0]=n,ma[1]=y,ma[2]=G,ma[3]=F;t.dirty=!1}if(n=t.profile)p=performance.now(),L.count+=b;y=f.program(f.vert,
f.frag,K);k.useProgram(y.program);Y.setVAO(null);G=y.id;(F=Aa[G])||(F=Aa[G]=ia(y));F.call(this,c,b);Y.setVAO(null);h.center=l;h.distance=e;h.eye=q;h.phi=w;h.projection=u;h.theta=x;h.up=B;h.view=r;n&&(L.cpuTime+=performance.now()-p)}}},"$27,position,projection,tex,uv,view":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I){var a,Z,A,ja,ha,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na,Xa,Ta,r,p,y,va,Ea,ab,Hb;a=b.attributes;Z=b.context;A=b.current;ja=b.draw;
ha=b.framebuffer;V=b.gl;ea=b.isArrayLike;O=b.next;P=b.shader;C=b.uniforms;g=b.vao;N=O.blend_color;M=A.blend_color;Da=O.blend_equation;pa=A.blend_equation;m=O.blend_func;J=A.blend_func;aa=O.colorMask;Q=A.colorMask;ma=O.depth_range;qa=A.depth_range;Aa=O.polygonOffset_offset;wa=A.polygonOffset_offset;fa=O.sample_coverage;Ba=A.sample_coverage;ka=O.scissor_box;oa=A.scissor_box;ya=O.stencil_func;Ja=A.stencil_func;na=O.stencil_opBack;Xa=A.stencil_opBack;Ta=O.stencil_opFront;r=A.stencil_opFront;p=O.viewport;
y=A.viewport;va=new Float32Array(16);Ea=new Float32Array(16);ab=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(b){var f,h,k,t;f=ha.next;f!==ha.cur&&(f?V.bindFramebuffer(36160,f.framebuffer):V.bindFramebuffer(36160,null),ha.cur=f);if(A.dirty){var v;f=O.dither;f!==A.dither&&(f?V.enable(3024):V.disable(3024),A.dither=f);f=O.blend_enable;f!==A.blend_enable&&(f?V.enable(3042):V.disable(3042),A.blend_enable=f);f=N[0];k=N[1];t=N[2];v=N[3];if(f!==M[0]||k!==M[1]||t!==M[2]||v!==M[3])V.blendColor(f,
k,t,v),M[0]=f,M[1]=k,M[2]=t,M[3]=v;f=Da[0];k=Da[1];if(f!==pa[0]||k!==pa[1])V.blendEquationSeparate(f,k),pa[0]=f,pa[1]=k;f=m[0];k=m[1];t=m[2];v=m[3];if(f!==J[0]||k!==J[1]||t!==J[2]||v!==J[3])V.blendFuncSeparate(f,k,t,v),J[0]=f,J[1]=k,J[2]=t,J[3]=v;f=O.depth_enable;f!==A.depth_enable&&(f?V.enable(2929):V.disable(2929),A.depth_enable=f);f=O.depth_func;f!==A.depth_func&&(V.depthFunc(f),A.depth_func=f);f=ma[0];k=ma[1];if(f!==qa[0]||k!==qa[1])V.depthRange(f,k),qa[0]=f,qa[1]=k;f=O.depth_mask;f!==A.depth_mask&&
(V.depthMask(f),A.depth_mask=f);f=aa[0];k=aa[1];t=aa[2];v=aa[3];if(f!==Q[0]||k!==Q[1]||t!==Q[2]||v!==Q[3])V.colorMask(f,k,t,v),Q[0]=f,Q[1]=k,Q[2]=t,Q[3]=v;f=O.cull_enable;f!==A.cull_enable&&(f?V.enable(2884):V.disable(2884),A.cull_enable=f);f=O.cull_face;f!==A.cull_face&&(V.cullFace(f),A.cull_face=f);f=O.frontFace;f!==A.frontFace&&(V.frontFace(f),A.frontFace=f);f=O.lineWidth;f!==A.lineWidth&&(V.lineWidth(f),A.lineWidth=f);f=O.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?V.enable(32823):V.disable(32823),
A.polygonOffset_enable=f);f=Aa[0];k=Aa[1];if(f!==wa[0]||k!==wa[1])V.polygonOffset(f,k),wa[0]=f,wa[1]=k;f=O.sample_alpha;f!==A.sample_alpha&&(f?V.enable(32926):V.disable(32926),A.sample_alpha=f);f=O.sample_enable;f!==A.sample_enable&&(f?V.enable(32928):V.disable(32928),A.sample_enable=f);f=fa[0];k=fa[1];if(f!==Ba[0]||k!==Ba[1])V.sampleCoverage(f,k),Ba[0]=f,Ba[1]=k;f=O.stencil_enable;f!==A.stencil_enable&&(f?V.enable(2960):V.disable(2960),A.stencil_enable=f);f=O.stencil_mask;f!==A.stencil_mask&&(V.stencilMask(f),
A.stencil_mask=f);f=ya[0];k=ya[1];t=ya[2];if(f!==Ja[0]||k!==Ja[1]||t!==Ja[2])V.stencilFunc(f,k,t),Ja[0]=f,Ja[1]=k,Ja[2]=t;f=Ta[0];k=Ta[1];t=Ta[2];v=Ta[3];if(f!==r[0]||k!==r[1]||t!==r[2]||v!==r[3])V.stencilOpSeparate(f,k,t,v),r[0]=f,r[1]=k,r[2]=t,r[3]=v;f=na[0];k=na[1];t=na[2];v=na[3];if(f!==Xa[0]||k!==Xa[1]||t!==Xa[2]||v!==Xa[3])V.stencilOpSeparate(f,k,t,v),Xa[0]=f,Xa[1]=k,Xa[2]=t,Xa[3]=v;f=O.scissor_enable;f!==A.scissor_enable&&(f?V.enable(3089):V.disable(3089),A.scissor_enable=f);f=ka[0];k=ka[1];
t=ka[2];v=ka[3];if(f!==oa[0]||k!==oa[1]||t!==oa[2]||v!==oa[3])V.scissor(f,k,t,v),oa[0]=f,oa[1]=k,oa[2]=t,oa[3]=v;f=p[0];k=p[1];t=p[2];v=p[3];if(f!==y[0]||k!==y[1]||t!==y[2]||v!==y[3])V.viewport(f,k,t,v),y[0]=f,y[1]=k,y[2]=t,y[3]=v;A.dirty=!1}if(f=A.profile)h=performance.now(),L.count++;V.useProgram(e.program);g.setVAO(null);k=Y.location;t=a[k];t.buffer||V.enableVertexAttribArray(k);if(t.type!==l.dtype||3!==t.size||t.buffer!==l||!1!==t.normalized||0!==t.offset||0!==t.stride)V.bindBuffer(34962,l.buffer),
V.vertexAttribPointer(k,3,l.dtype,!1,0,0),t.type=l.dtype,t.size=3,t.buffer=l,t.normalized=!1,t.offset=0,t.stride=0;k=d.location;t=a[k];t.buffer||V.enableVertexAttribArray(k);if(t.type!==q.dtype||2!==t.size||t.buffer!==q||!1!==t.normalized||0!==t.offset||0!==t.stride)V.bindBuffer(34962,q.buffer),V.vertexAttribPointer(k,2,q.dtype,!1,0,0),t.type=q.dtype,t.size=2,t.buffer=q,t.normalized=!1,t.offset=0,t.stride=0;k=c.call(this,Z,b,0);ea(k)&&16===k.length||da.commandRaise(F,K);V.uniformMatrix4fv(D.location,
!1,Array.isArray(k)||k instanceof Float32Array?k:(va[0]=k[0],va[1]=k[1],va[2]=k[2],va[3]=k[3],va[4]=k[4],va[5]=k[5],va[6]=k[6],va[7]=k[7],va[8]=k[8],va[9]=k[9],va[10]=k[10],va[11]=k[11],va[12]=k[12],va[13]=k[13],va[14]=k[14],va[15]=k[15],va));k=B.call(this,Z,b,0);ea(k)&&16===k.length||da.commandRaise(G,K);V.uniformMatrix4fv(I.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ea[0]=k[0],Ea[1]=k[1],Ea[2]=k[2],Ea[3]=k[3],Ea[4]=k[4],Ea[5]=k[5],Ea[6]=k[6],Ea[7]=k[7],Ea[8]=k[8],Ea[9]=k[9],Ea[10]=
k[10],Ea[11]=k[11],Ea[12]=k[12],Ea[13]=k[13],Ea[14]=k[14],Ea[15]=k[15],Ea));(b=b.texture)&&"framebuffer"===b._reglType&&(b=b.color[0]);"function"===typeof b&&"texture2d"===b._reglType||da.commandRaise(U,K);b=b._texture;V.uniform1i(E.location,b.bind());n&&V.bindBuffer(34963,n.buffer.buffer);k=n.primType;t=n.vertCount-0;0<=t||da.commandRaise(u,K);t&&(V.drawElements(k,t,n.type,0<<(n.type-5121>>1)),g.setVAO(null),f&&(L.cpuTime+=performance.now()-h),b.unbind())},scope:function(a,d,c){var b,f,g,h,k,m,p,
r,e,t,y,n,w,u,D,E,Q,I,J,fa,G,B,F,M,N,Xa,O,S,qa,wa,U,na,V,ka,X;if(b=A.profile)f=performance.now(),L.count++;g=ja.elements;ja.elements=x;h=ja.offset;ja.offset=0;k=x.vertCount-0;0<=k||da.commandRaise(ba,K);m=ja.count;ja.count=k;p=x.primType;k=ja.primitive;ja.primitive=p;r=v.call(this,Z,a,c);p=C[3];C[3]=r;e=a.texture;r=C[5];C[5]=e;t=T.call(this,Z,a,c);e=C[4];C[4]=t;t=z.buffer;z.buffer=l;y=z.divisor;z.divisor=0;n=z.normalized;z.normalized=!1;w=z.offset;z.offset=0;u=z.size;z.size=0;D=z.state;z.state=1;
E=z.stride;z.stride=0;Q=z.type;z.type=l.dtype;I=z.w;z.w=0;J=z.x;z.x=0;fa=z.y;z.y=0;G=z.z;z.z=0;B=R.buffer;R.buffer=q;F=R.divisor;R.divisor=0;M=R.normalized;R.normalized=!1;N=R.offset;R.offset=0;Xa=R.size;R.size=0;O=R.state;R.state=1;S=R.stride;R.stride=0;qa=R.type;R.type=q.dtype;wa=R.w;R.w=0;U=R.x;R.x=0;na=R.y;R.y=0;V=R.z;R.z=0;ka=P.vert;P.vert=2;X=P.frag;P.frag=1;d(Z,a,c);b&&(L.cpuTime+=performance.now()-f);ja.elements=g;ja.offset=h;ja.count=m;ja.primitive=k;C[3]=p;C[5]=r;C[4]=e;z.buffer=t;z.divisor=
y;z.normalized=n;z.offset=w;z.size=u;z.state=D;z.stride=E;z.type=Q;z.w=I;z.x=J;z.y=fa;z.z=G;R.buffer=B;R.divisor=F;R.normalized=M;R.offset=N;R.size=Xa;R.state=O;R.stride=S;R.type=qa;R.w=wa;R.x=U;R.y=na;R.z=V;P.vert=ka;P.frag=X},batch:function(c,b){var e,v,n,z;e=ha.next;e!==ha.cur&&(e?V.bindFramebuffer(36160,e.framebuffer):V.bindFramebuffer(36160,null),ha.cur=e);if(A.dirty){var u,x,C;e=O.dither;e!==A.dither&&(e?V.enable(3024):V.disable(3024),A.dither=e);e=O.blend_enable;e!==A.blend_enable&&(e?V.enable(3042):
V.disable(3042),A.blend_enable=e);e=N[0];u=N[1];x=N[2];C=N[3];if(e!==M[0]||u!==M[1]||x!==M[2]||C!==M[3])V.blendColor(e,u,x,C),M[0]=e,M[1]=u,M[2]=x,M[3]=C;e=Da[0];u=Da[1];if(e!==pa[0]||u!==pa[1])V.blendEquationSeparate(e,u),pa[0]=e,pa[1]=u;e=m[0];u=m[1];x=m[2];C=m[3];if(e!==J[0]||u!==J[1]||x!==J[2]||C!==J[3])V.blendFuncSeparate(e,u,x,C),J[0]=e,J[1]=u,J[2]=x,J[3]=C;e=O.depth_enable;e!==A.depth_enable&&(e?V.enable(2929):V.disable(2929),A.depth_enable=e);e=O.depth_func;e!==A.depth_func&&(V.depthFunc(e),
A.depth_func=e);e=ma[0];u=ma[1];if(e!==qa[0]||u!==qa[1])V.depthRange(e,u),qa[0]=e,qa[1]=u;e=O.depth_mask;e!==A.depth_mask&&(V.depthMask(e),A.depth_mask=e);e=aa[0];u=aa[1];x=aa[2];C=aa[3];if(e!==Q[0]||u!==Q[1]||x!==Q[2]||C!==Q[3])V.colorMask(e,u,x,C),Q[0]=e,Q[1]=u,Q[2]=x,Q[3]=C;e=O.cull_enable;e!==A.cull_enable&&(e?V.enable(2884):V.disable(2884),A.cull_enable=e);e=O.cull_face;e!==A.cull_face&&(V.cullFace(e),A.cull_face=e);e=O.frontFace;e!==A.frontFace&&(V.frontFace(e),A.frontFace=e);e=O.lineWidth;
e!==A.lineWidth&&(V.lineWidth(e),A.lineWidth=e);e=O.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?V.enable(32823):V.disable(32823),A.polygonOffset_enable=e);e=Aa[0];u=Aa[1];if(e!==wa[0]||u!==wa[1])V.polygonOffset(e,u),wa[0]=e,wa[1]=u;e=O.sample_alpha;e!==A.sample_alpha&&(e?V.enable(32926):V.disable(32926),A.sample_alpha=e);e=O.sample_enable;e!==A.sample_enable&&(e?V.enable(32928):V.disable(32928),A.sample_enable=e);e=fa[0];u=fa[1];if(e!==Ba[0]||u!==Ba[1])V.sampleCoverage(e,u),Ba[0]=e,Ba[1]=
u;e=O.stencil_enable;e!==A.stencil_enable&&(e?V.enable(2960):V.disable(2960),A.stencil_enable=e);e=O.stencil_mask;e!==A.stencil_mask&&(V.stencilMask(e),A.stencil_mask=e);e=ya[0];u=ya[1];x=ya[2];if(e!==Ja[0]||u!==Ja[1]||x!==Ja[2])V.stencilFunc(e,u,x),Ja[0]=e,Ja[1]=u,Ja[2]=x;e=Ta[0];u=Ta[1];x=Ta[2];C=Ta[3];if(e!==r[0]||u!==r[1]||x!==r[2]||C!==r[3])V.stencilOpSeparate(e,u,x,C),r[0]=e,r[1]=u,r[2]=x,r[3]=C;e=na[0];u=na[1];x=na[2];C=na[3];if(e!==Xa[0]||u!==Xa[1]||x!==Xa[2]||C!==Xa[3])V.stencilOpSeparate(e,
u,x,C),Xa[0]=e,Xa[1]=u,Xa[2]=x,Xa[3]=C;e=O.scissor_enable;e!==A.scissor_enable&&(e?V.enable(3089):V.disable(3089),A.scissor_enable=e);e=ka[0];u=ka[1];x=ka[2];C=ka[3];if(e!==oa[0]||u!==oa[1]||x!==oa[2]||C!==oa[3])V.scissor(e,u,x,C),oa[0]=e,oa[1]=u,oa[2]=x,oa[3]=C;e=p[0];u=p[1];x=p[2];C=p[3];if(e!==y[0]||u!==y[1]||x!==y[2]||C!==y[3])V.viewport(e,u,x,C),y[0]=e,y[1]=u,y[2]=x,y[3]=C;A.dirty=!1}if(e=A.profile)v=performance.now(),L.count+=b;V.useProgram(ia.program);g.setVAO(null);u=Y.location;x=a[u];x.buffer||
V.enableVertexAttribArray(u);if(x.type!==l.dtype||3!==x.size||x.buffer!==l||!1!==x.normalized||0!==x.offset||0!==x.stride)V.bindBuffer(34962,l.buffer),V.vertexAttribPointer(u,3,l.dtype,!1,0,0),x.type=l.dtype,x.size=3,x.buffer=l,x.normalized=!1,x.offset=0,x.stride=0;u=d.location;x=a[u];x.buffer||V.enableVertexAttribArray(u);if(x.type!==q.dtype||2!==x.size||x.buffer!==q||!1!==x.normalized||0!==x.offset||0!==x.stride)V.bindBuffer(34962,q.buffer),V.vertexAttribPointer(u,2,q.dtype,!1,0,0),x.type=q.dtype,
x.size=2,x.buffer=q,x.normalized=!1,x.offset=0,x.stride=0;u=h.call(this,Z,z,n);ea(u)&&16===u.length||da.commandRaise(t,K);V.uniformMatrix4fv(D.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(ab[0]=u[0],ab[1]=u[1],ab[2]=u[2],ab[3]=u[3],ab[4]=u[4],ab[5]=u[5],ab[6]=u[6],ab[7]=u[7],ab[8]=u[8],ab[9]=u[9],ab[10]=u[10],ab[11]=u[11],ab[12]=u[12],ab[13]=u[13],ab[14]=u[14],ab[15]=u[15],ab));n=S.call(this,Z,z,n);ea(n)&&16===n.length||da.commandRaise(k,K);V.uniformMatrix4fv(I.location,!1,Array.isArray(n)||
n instanceof Float32Array?n:(Hb[0]=n[0],Hb[1]=n[1],Hb[2]=n[2],Hb[3]=n[3],Hb[4]=n[4],Hb[5]=n[5],Hb[6]=n[6],Hb[7]=n[7],Hb[8]=n[8],Hb[9]=n[9],Hb[10]=n[10],Hb[11]=n[11],Hb[12]=n[12],Hb[13]=n[13],Hb[14]=n[14],Hb[15]=n[15],Hb));f&&V.bindBuffer(34963,f.buffer.buffer);u=f.primType;x=f.vertCount-0;0<=x||da.commandRaise(w,K);for(n=0;n<b;++n)z=c[n],(z=z.texture)&&"framebuffer"===z._reglType&&(z=z.color[0]),"function"===typeof z&&"texture2d"===z._reglType||da.commandRaise(X,K),z=z._texture,V.uniform1i(E.location,
z.bind()),x&&(V.drawElements(u,x,f.type,0<<(f.type-5121>>1)),z.unbind());g.setVAO(null);e&&(L.cpuTime+=performance.now()-v)}}},"$19,normal,position,projection,view":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,ia,h,t,S){var k,X,f,w,Y,D,E,d,I,a,Z,A,ja,ha,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya,Ja,na;k=b.attributes;X=b.context;f=b.current;w=b.draw;Y=b.framebuffer;D=b.gl;E=b.isArrayLike;d=b.next;I=b.shader;a=b.uniforms;Z=b.vao;A=d.blend_color;ja=f.blend_color;ha=d.blend_equation;
V=f.blend_equation;ea=d.blend_func;O=f.blend_func;P=d.colorMask;C=f.colorMask;g=d.depth_range;N=f.depth_range;M=d.polygonOffset_offset;Da=f.polygonOffset_offset;pa=d.sample_coverage;m=f.sample_coverage;J=d.scissor_box;aa=f.scissor_box;Q=d.stencil_func;ma=f.stencil_func;qa=d.stencil_opBack;Aa=f.stencil_opBack;wa=d.stencil_opFront;fa=f.stencil_opFront;Ba=d.viewport;ka=f.viewport;oa=new Float32Array(16);ya=new Float32Array(16);Ja=new Float32Array(16);na=new Float32Array(16);return{draw:function(b){var v,
r,p;b=Y.next;b!==Y.cur&&(b?D.bindFramebuffer(36160,b.framebuffer):D.bindFramebuffer(36160,null),Y.cur=b);if(f.dirty){var y;b=d.dither;b!==f.dither&&(b?D.enable(3024):D.disable(3024),f.dither=b);b=d.blend_enable;b!==f.blend_enable&&(b?D.enable(3042):D.disable(3042),f.blend_enable=b);b=A[0];r=A[1];p=A[2];y=A[3];if(b!==ja[0]||r!==ja[1]||p!==ja[2]||y!==ja[3])D.blendColor(b,r,p,y),ja[0]=b,ja[1]=r,ja[2]=p,ja[3]=y;b=ha[0];r=ha[1];if(b!==V[0]||r!==V[1])D.blendEquationSeparate(b,r),V[0]=b,V[1]=r;b=ea[0];r=
ea[1];p=ea[2];y=ea[3];if(b!==O[0]||r!==O[1]||p!==O[2]||y!==O[3])D.blendFuncSeparate(b,r,p,y),O[0]=b,O[1]=r,O[2]=p,O[3]=y;b=d.depth_enable;b!==f.depth_enable&&(b?D.enable(2929):D.disable(2929),f.depth_enable=b);b=d.depth_func;b!==f.depth_func&&(D.depthFunc(b),f.depth_func=b);b=g[0];r=g[1];if(b!==N[0]||r!==N[1])D.depthRange(b,r),N[0]=b,N[1]=r;b=d.depth_mask;b!==f.depth_mask&&(D.depthMask(b),f.depth_mask=b);b=P[0];r=P[1];p=P[2];y=P[3];if(b!==C[0]||r!==C[1]||p!==C[2]||y!==C[3])D.colorMask(b,r,p,y),C[0]=
b,C[1]=r,C[2]=p,C[3]=y;b=d.cull_enable;b!==f.cull_enable&&(b?D.enable(2884):D.disable(2884),f.cull_enable=b);b=d.cull_face;b!==f.cull_face&&(D.cullFace(b),f.cull_face=b);b=d.frontFace;b!==f.frontFace&&(D.frontFace(b),f.frontFace=b);b=d.lineWidth;b!==f.lineWidth&&(D.lineWidth(b),f.lineWidth=b);b=d.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?D.enable(32823):D.disable(32823),f.polygonOffset_enable=b);b=M[0];r=M[1];if(b!==Da[0]||r!==Da[1])D.polygonOffset(b,r),Da[0]=b,Da[1]=r;b=d.sample_alpha;
b!==f.sample_alpha&&(b?D.enable(32926):D.disable(32926),f.sample_alpha=b);b=d.sample_enable;b!==f.sample_enable&&(b?D.enable(32928):D.disable(32928),f.sample_enable=b);b=pa[0];r=pa[1];if(b!==m[0]||r!==m[1])D.sampleCoverage(b,r),m[0]=b,m[1]=r;b=d.stencil_enable;b!==f.stencil_enable&&(b?D.enable(2960):D.disable(2960),f.stencil_enable=b);b=d.stencil_mask;b!==f.stencil_mask&&(D.stencilMask(b),f.stencil_mask=b);b=Q[0];r=Q[1];p=Q[2];if(b!==ma[0]||r!==ma[1]||p!==ma[2])D.stencilFunc(b,r,p),ma[0]=b,ma[1]=
r,ma[2]=p;b=wa[0];r=wa[1];p=wa[2];y=wa[3];if(b!==fa[0]||r!==fa[1]||p!==fa[2]||y!==fa[3])D.stencilOpSeparate(b,r,p,y),fa[0]=b,fa[1]=r,fa[2]=p,fa[3]=y;b=qa[0];r=qa[1];p=qa[2];y=qa[3];if(b!==Aa[0]||r!==Aa[1]||p!==Aa[2]||y!==Aa[3])D.stencilOpSeparate(b,r,p,y),Aa[0]=b,Aa[1]=r,Aa[2]=p,Aa[3]=y;b=d.scissor_enable;b!==f.scissor_enable&&(b?D.enable(3089):D.disable(3089),f.scissor_enable=b);b=J[0];r=J[1];p=J[2];y=J[3];if(b!==aa[0]||r!==aa[1]||p!==aa[2]||y!==aa[3])D.scissor(b,r,p,y),aa[0]=b,aa[1]=r,aa[2]=p,aa[3]=
y;b=Ba[0];r=Ba[1];p=Ba[2];y=Ba[3];if(b!==ka[0]||r!==ka[1]||p!==ka[2]||y!==ka[3])D.viewport(b,r,p,y),ka[0]=b,ka[1]=r,ka[2]=p,ka[3]=y;f.dirty=!1}if(b=f.profile)v=performance.now(),L.count++;D.useProgram(e.program);Z.setVAO(null);r=h.location;p=k[r];p.buffer||D.enableVertexAttribArray(r);if(p.type!==l.dtype||3!==p.size||p.buffer!==l||!1!==p.normalized||0!==p.offset||0!==p.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(r,3,l.dtype,!1,0,0),p.type=l.dtype,p.size=3,p.buffer=l,p.normalized=!1,
p.offset=0,p.stride=0;r=ia.location;p=k[r];p.buffer||D.enableVertexAttribArray(r);if(p.type!==q.dtype||3!==p.size||p.buffer!==q||!1!==p.normalized||0!==p.offset||0!==p.stride)D.bindBuffer(34962,q.buffer),D.vertexAttribPointer(r,3,q.dtype,!1,0,0),p.type=q.dtype,p.size=3,p.buffer=q,p.normalized=!1,p.offset=0,p.stride=0;r=a[5];E(r)&&16===r.length||da.commandRaise(c,K);D.uniformMatrix4fv(t.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(oa[0]=r[0],oa[1]=r[1],oa[2]=r[2],oa[3]=r[3],oa[4]=r[4],
oa[5]=r[5],oa[6]=r[6],oa[7]=r[7],oa[8]=r[8],oa[9]=r[9],oa[10]=r[10],oa[11]=r[11],oa[12]=r[12],oa[13]=r[13],oa[14]=r[14],oa[15]=r[15],oa));r=a[8];E(r)&&16===r.length||da.commandRaise(F,K);D.uniformMatrix4fv(S.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(ya[0]=r[0],ya[1]=r[1],ya[2]=r[2],ya[3]=r[3],ya[4]=r[4],ya[5]=r[5],ya[6]=r[6],ya[7]=r[7],ya[8]=r[8],ya[9]=r[9],ya[10]=r[10],ya[11]=r[11],ya[12]=r[12],ya[13]=r[13],ya[14]=r[14],ya[15]=r[15],ya));B&&D.bindBuffer(34963,B.buffer.buffer);r=
B.primType;p=B.vertCount-0;0<=p||da.commandRaise(G,K);p&&(D.drawElements(r,p,B.type,0<<(B.type-5121>>1)),Z.setVAO(null),b&&(L.cpuTime+=performance.now()-v))},scope:function(a,b,d){var c,g,h,k,e,m,t,v,z,A,C,D,E,Q,J,fa,G,B,F,M,N,O,P,R,S,qa,wa,T,na,V,ka,aa;if(c=f.profile)g=performance.now(),L.count++;h=w.elements;w.elements=U;k=w.offset;w.offset=0;e=U.vertCount-0;0<=e||da.commandRaise(n,K);m=w.count;w.count=e;t=U.primType;e=w.primitive;w.primitive=t;t=u.buffer;u.buffer=q;v=u.divisor;u.divisor=0;z=u.normalized;
u.normalized=!1;A=u.offset;u.offset=0;C=u.size;u.size=0;D=u.state;u.state=1;E=u.stride;u.stride=0;Q=u.type;u.type=q.dtype;J=u.w;u.w=0;fa=u.x;u.x=0;G=u.y;u.y=0;B=u.z;u.z=0;F=x.buffer;x.buffer=l;M=x.divisor;x.divisor=0;N=x.normalized;x.normalized=!1;O=x.offset;x.offset=0;P=x.size;x.size=0;R=x.state;x.state=1;S=x.stride;x.stride=0;qa=x.type;x.type=l.dtype;wa=x.w;x.w=0;T=x.x;x.x=0;na=x.y;x.y=0;V=x.z;x.z=0;ka=I.vert;I.vert=10;aa=I.frag;I.frag=9;b(X,a,d);c&&(L.cpuTime+=performance.now()-g);w.elements=h;
w.offset=k;w.count=m;w.primitive=e;u.buffer=t;u.divisor=v;u.normalized=z;u.offset=A;u.size=C;u.state=D;u.stride=E;u.type=Q;u.w=J;u.x=fa;u.y=G;u.z=B;x.buffer=F;x.divisor=M;x.normalized=N;x.offset=O;x.size=P;x.state=R;x.stride=S;x.type=qa;x.w=wa;x.x=T;x.y=na;x.z=V;I.vert=ka;I.frag=aa},batch:function(b,c){var e,p,y;e=Y.next;e!==Y.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),Y.cur=e);if(f.dirty){var n,u;e=d.dither;e!==f.dither&&(e?D.enable(3024):D.disable(3024),f.dither=
e);e=d.blend_enable;e!==f.blend_enable&&(e?D.enable(3042):D.disable(3042),f.blend_enable=e);e=A[0];y=A[1];n=A[2];u=A[3];if(e!==ja[0]||y!==ja[1]||n!==ja[2]||u!==ja[3])D.blendColor(e,y,n,u),ja[0]=e,ja[1]=y,ja[2]=n,ja[3]=u;e=ha[0];y=ha[1];if(e!==V[0]||y!==V[1])D.blendEquationSeparate(e,y),V[0]=e,V[1]=y;e=ea[0];y=ea[1];n=ea[2];u=ea[3];if(e!==O[0]||y!==O[1]||n!==O[2]||u!==O[3])D.blendFuncSeparate(e,y,n,u),O[0]=e,O[1]=y,O[2]=n,O[3]=u;e=d.depth_enable;e!==f.depth_enable&&(e?D.enable(2929):D.disable(2929),
f.depth_enable=e);e=d.depth_func;e!==f.depth_func&&(D.depthFunc(e),f.depth_func=e);e=g[0];y=g[1];if(e!==N[0]||y!==N[1])D.depthRange(e,y),N[0]=e,N[1]=y;e=d.depth_mask;e!==f.depth_mask&&(D.depthMask(e),f.depth_mask=e);e=P[0];y=P[1];n=P[2];u=P[3];if(e!==C[0]||y!==C[1]||n!==C[2]||u!==C[3])D.colorMask(e,y,n,u),C[0]=e,C[1]=y,C[2]=n,C[3]=u;e=d.cull_enable;e!==f.cull_enable&&(e?D.enable(2884):D.disable(2884),f.cull_enable=e);e=d.cull_face;e!==f.cull_face&&(D.cullFace(e),f.cull_face=e);e=d.frontFace;e!==f.frontFace&&
(D.frontFace(e),f.frontFace=e);e=d.lineWidth;e!==f.lineWidth&&(D.lineWidth(e),f.lineWidth=e);e=d.polygonOffset_enable;e!==f.polygonOffset_enable&&(e?D.enable(32823):D.disable(32823),f.polygonOffset_enable=e);e=M[0];y=M[1];if(e!==Da[0]||y!==Da[1])D.polygonOffset(e,y),Da[0]=e,Da[1]=y;e=d.sample_alpha;e!==f.sample_alpha&&(e?D.enable(32926):D.disable(32926),f.sample_alpha=e);e=d.sample_enable;e!==f.sample_enable&&(e?D.enable(32928):D.disable(32928),f.sample_enable=e);e=pa[0];y=pa[1];if(e!==m[0]||y!==
m[1])D.sampleCoverage(e,y),m[0]=e,m[1]=y;e=d.stencil_enable;e!==f.stencil_enable&&(e?D.enable(2960):D.disable(2960),f.stencil_enable=e);e=d.stencil_mask;e!==f.stencil_mask&&(D.stencilMask(e),f.stencil_mask=e);e=Q[0];y=Q[1];n=Q[2];if(e!==ma[0]||y!==ma[1]||n!==ma[2])D.stencilFunc(e,y,n),ma[0]=e,ma[1]=y,ma[2]=n;e=wa[0];y=wa[1];n=wa[2];u=wa[3];if(e!==fa[0]||y!==fa[1]||n!==fa[2]||u!==fa[3])D.stencilOpSeparate(e,y,n,u),fa[0]=e,fa[1]=y,fa[2]=n,fa[3]=u;e=qa[0];y=qa[1];n=qa[2];u=qa[3];if(e!==Aa[0]||y!==Aa[1]||
n!==Aa[2]||u!==Aa[3])D.stencilOpSeparate(e,y,n,u),Aa[0]=e,Aa[1]=y,Aa[2]=n,Aa[3]=u;e=d.scissor_enable;e!==f.scissor_enable&&(e?D.enable(3089):D.disable(3089),f.scissor_enable=e);e=J[0];y=J[1];n=J[2];u=J[3];if(e!==aa[0]||y!==aa[1]||n!==aa[2]||u!==aa[3])D.scissor(e,y,n,u),aa[0]=e,aa[1]=y,aa[2]=n,aa[3]=u;e=Ba[0];y=Ba[1];n=Ba[2];u=Ba[3];if(e!==ka[0]||y!==ka[1]||n!==ka[2]||u!==ka[3])D.viewport(e,y,n,u),ka[0]=e,ka[1]=y,ka[2]=n,ka[3]=u;f.dirty=!1}if(e=f.profile)p=performance.now(),L.count+=c;D.useProgram(ba.program);
Z.setVAO(null);y=h.location;n=k[y];n.buffer||D.enableVertexAttribArray(y);if(n.type!==l.dtype||3!==n.size||n.buffer!==l||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(y,3,l.dtype,!1,0,0),n.type=l.dtype,n.size=3,n.buffer=l,n.normalized=!1,n.offset=0,n.stride=0;y=ia.location;n=k[y];n.buffer||D.enableVertexAttribArray(y);if(n.type!==q.dtype||3!==n.size||n.buffer!==q||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,q.buffer),D.vertexAttribPointer(y,
3,q.dtype,!1,0,0),n.type=q.dtype,n.size=3,n.buffer=q,n.normalized=!1,n.offset=0,n.stride=0;y=a[5];E(y)&&16===y.length||da.commandRaise(v,K);D.uniformMatrix4fv(t.location,!1,Array.isArray(y)||y instanceof Float32Array?y:(Ja[0]=y[0],Ja[1]=y[1],Ja[2]=y[2],Ja[3]=y[3],Ja[4]=y[4],Ja[5]=y[5],Ja[6]=y[6],Ja[7]=y[7],Ja[8]=y[8],Ja[9]=y[9],Ja[10]=y[10],Ja[11]=y[11],Ja[12]=y[12],Ja[13]=y[13],Ja[14]=y[14],Ja[15]=y[15],Ja));y=a[8];E(y)&&16===y.length||da.commandRaise(T,K);D.uniformMatrix4fv(S.location,!1,Array.isArray(y)||
y instanceof Float32Array?y:(na[0]=y[0],na[1]=y[1],na[2]=y[2],na[3]=y[3],na[4]=y[4],na[5]=y[5],na[6]=y[6],na[7]=y[7],na[8]=y[8],na[9]=y[9],na[10]=y[10],na[11]=y[11],na[12]=y[12],na[13]=y[13],na[14]=y[14],na[15]=y[15],na));z&&D.bindBuffer(34963,z.buffer.buffer);n=z.primType;u=z.vertCount-0;0<=u||da.commandRaise(R,K);for(y=0;y<c;++y)u&&D.drawElements(n,u,z.type,0<<(z.type-5121>>1));Z.setVAO(null);e&&(L.cpuTime+=performance.now()-p)}}},"$14,angle,color,position":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,
x,ba,v,T){var z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,Z,A,ja,ha,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa,Q,ma,qa;z=b.attributes;R=b.context;ia=b.current;h=b.draw;t=b.elements;S=b.framebuffer;k=b.gl;X=b.isArrayLike;f=b.next;w=b.shader;Y=b.uniforms;D=b.vao;E=f.blend_color;d=ia.blend_color;I=f.blend_equation;a=ia.blend_equation;Z=f.blend_func;A=ia.blend_func;ja=f.colorMask;ha=ia.colorMask;V=f.depth_range;ea=ia.depth_range;O=f.polygonOffset_offset;P=ia.polygonOffset_offset;C=f.sample_coverage;g=ia.sample_coverage;N=f.scissor_box;
M=ia.scissor_box;Da=f.stencil_func;pa=ia.stencil_func;m=f.stencil_opBack;J=ia.stencil_opBack;aa=f.stencil_opFront;Q=ia.stencil_opFront;ma=f.viewport;qa=ia.viewport;return{draw:function(b){var n,u,w,x;n=S.next;n!==S.cur&&(n?k.bindFramebuffer(36160,n.framebuffer):k.bindFramebuffer(36160,null),S.cur=n);if(ia.dirty){var G;n=f.dither;n!==ia.dither&&(n?k.enable(3024):k.disable(3024),ia.dither=n);n=f.blend_enable;n!==ia.blend_enable&&(n?k.enable(3042):k.disable(3042),ia.blend_enable=n);n=E[0];w=E[1];x=E[2];
G=E[3];if(n!==d[0]||w!==d[1]||x!==d[2]||G!==d[3])k.blendColor(n,w,x,G),d[0]=n,d[1]=w,d[2]=x,d[3]=G;n=I[0];w=I[1];if(n!==a[0]||w!==a[1])k.blendEquationSeparate(n,w),a[0]=n,a[1]=w;n=Z[0];w=Z[1];x=Z[2];G=Z[3];if(n!==A[0]||w!==A[1]||x!==A[2]||G!==A[3])k.blendFuncSeparate(n,w,x,G),A[0]=n,A[1]=w,A[2]=x,A[3]=G;n=f.depth_func;n!==ia.depth_func&&(k.depthFunc(n),ia.depth_func=n);n=V[0];w=V[1];if(n!==ea[0]||w!==ea[1])k.depthRange(n,w),ea[0]=n,ea[1]=w;n=f.depth_mask;n!==ia.depth_mask&&(k.depthMask(n),ia.depth_mask=
n);n=ja[0];w=ja[1];x=ja[2];G=ja[3];if(n!==ha[0]||w!==ha[1]||x!==ha[2]||G!==ha[3])k.colorMask(n,w,x,G),ha[0]=n,ha[1]=w,ha[2]=x,ha[3]=G;n=f.cull_enable;n!==ia.cull_enable&&(n?k.enable(2884):k.disable(2884),ia.cull_enable=n);n=f.cull_face;n!==ia.cull_face&&(k.cullFace(n),ia.cull_face=n);n=f.frontFace;n!==ia.frontFace&&(k.frontFace(n),ia.frontFace=n);n=f.lineWidth;n!==ia.lineWidth&&(k.lineWidth(n),ia.lineWidth=n);n=f.polygonOffset_enable;n!==ia.polygonOffset_enable&&(n?k.enable(32823):k.disable(32823),
ia.polygonOffset_enable=n);n=O[0];w=O[1];if(n!==P[0]||w!==P[1])k.polygonOffset(n,w),P[0]=n,P[1]=w;n=f.sample_alpha;n!==ia.sample_alpha&&(n?k.enable(32926):k.disable(32926),ia.sample_alpha=n);n=f.sample_enable;n!==ia.sample_enable&&(n?k.enable(32928):k.disable(32928),ia.sample_enable=n);n=C[0];w=C[1];if(n!==g[0]||w!==g[1])k.sampleCoverage(n,w),g[0]=n,g[1]=w;n=f.stencil_enable;n!==ia.stencil_enable&&(n?k.enable(2960):k.disable(2960),ia.stencil_enable=n);n=f.stencil_mask;n!==ia.stencil_mask&&(k.stencilMask(n),
ia.stencil_mask=n);n=Da[0];w=Da[1];x=Da[2];if(n!==pa[0]||w!==pa[1]||x!==pa[2])k.stencilFunc(n,w,x),pa[0]=n,pa[1]=w,pa[2]=x;n=aa[0];w=aa[1];x=aa[2];G=aa[3];if(n!==Q[0]||w!==Q[1]||x!==Q[2]||G!==Q[3])k.stencilOpSeparate(n,w,x,G),Q[0]=n,Q[1]=w,Q[2]=x,Q[3]=G;n=m[0];w=m[1];x=m[2];G=m[3];if(n!==J[0]||w!==J[1]||x!==J[2]||G!==J[3])k.stencilOpSeparate(n,w,x,G),J[0]=n,J[1]=w,J[2]=x,J[3]=G;n=f.scissor_enable;n!==ia.scissor_enable&&(n?k.enable(3089):k.disable(3089),ia.scissor_enable=n);n=N[0];w=N[1];x=N[2];G=
N[3];if(n!==M[0]||w!==M[1]||x!==M[2]||G!==M[3])k.scissor(n,w,x,G),M[0]=n,M[1]=w,M[2]=x,M[3]=G;n=ma[0];w=ma[1];x=ma[2];G=ma[3];if(n!==qa[0]||w!==qa[1]||x!==qa[2]||G!==qa[3])k.viewport(n,w,x,G),qa[0]=n,qa[1]=w,qa[2]=x,qa[3]=G}k.disable(2929);ia.depth_enable=!1;if(n=ia.profile)u=performance.now(),L.count++;k.useProgram(e.program);D.setVAO(null);w=T.location;x=z[w];x.buffer||k.enableVertexAttribArray(w);if(x.type!==l.dtype||2!==x.size||x.buffer!==l||!1!==x.normalized||0!==x.offset||0!==x.stride)k.bindBuffer(34962,
l.buffer),k.vertexAttribPointer(w,2,l.dtype,!1,0,0),x.type=l.dtype,x.size=2,x.buffer=l,x.normalized=!1,x.offset=0,x.stride=0;w=q.call(this,R,b,0);"number"!==typeof w&&da.commandRaise(c,K);k.uniform1f(ba.location,w);b=b.color;X(b)&&4===b.length||da.commandRaise(F,K);k.uniform4f(v.location,b[0],b[1],b[2],b[3]);(b=h.elements)?k.bindBuffer(34963,b.buffer.buffer):D.currentVAO&&(b=t.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,b.buffer.buffer);w=h.primitive;x=h.offset;b?k.drawElements(w,3,b.type,
x<<(b.type-5121>>1)):k.drawArrays(w,x,3);ia.dirty=!0;D.setVAO(null);n&&(L.cpuTime+=performance.now()-u)},scope:function(a,b,c){var d,g,k,e,m,q,n,t,r,p,y,v,u,x,z,A,C,D,E,Q;d=f.depth_enable;f.depth_enable=!1;if(g=ia.profile)k=performance.now(),L.count++;e=h.count;h.count=3;m=B.call(this,R,a,c);q=Y[3];Y[3]=m;n=a.color;m=Y[4];Y[4]=n;n=G.buffer;G.buffer=l;t=G.divisor;G.divisor=0;r=G.normalized;G.normalized=!1;p=G.offset;G.offset=0;y=G.size;G.size=0;v=G.state;G.state=1;u=G.stride;G.stride=0;x=G.type;G.type=
l.dtype;z=G.w;G.w=0;A=G.x;G.x=0;C=G.y;G.y=0;D=G.z;G.z=0;E=w.vert;w.vert=2;Q=w.frag;w.frag=1;ia.dirty=!0;b(R,a,c);f.depth_enable=d;g&&(L.cpuTime+=performance.now()-k);h.count=e;Y[3]=q;Y[4]=m;G.buffer=n;G.divisor=t;G.normalized=r;G.offset=p;G.size=y;G.state=v;G.stride=u;G.type=x;G.w=z;G.x=A;G.y=C;G.z=D;w.vert=E;w.frag=Q;ia.dirty=!0},batch:function(b,c){var e,q,w,G;e=S.next;e!==S.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),S.cur=e);if(ia.dirty){var B,F,na;e=f.dither;
e!==ia.dither&&(e?k.enable(3024):k.disable(3024),ia.dither=e);e=f.blend_enable;e!==ia.blend_enable&&(e?k.enable(3042):k.disable(3042),ia.blend_enable=e);e=E[0];B=E[1];F=E[2];na=E[3];if(e!==d[0]||B!==d[1]||F!==d[2]||na!==d[3])k.blendColor(e,B,F,na),d[0]=e,d[1]=B,d[2]=F,d[3]=na;e=I[0];B=I[1];if(e!==a[0]||B!==a[1])k.blendEquationSeparate(e,B),a[0]=e,a[1]=B;e=Z[0];B=Z[1];F=Z[2];na=Z[3];if(e!==A[0]||B!==A[1]||F!==A[2]||na!==A[3])k.blendFuncSeparate(e,B,F,na),A[0]=e,A[1]=B,A[2]=F,A[3]=na;e=f.depth_func;
e!==ia.depth_func&&(k.depthFunc(e),ia.depth_func=e);e=V[0];B=V[1];if(e!==ea[0]||B!==ea[1])k.depthRange(e,B),ea[0]=e,ea[1]=B;e=f.depth_mask;e!==ia.depth_mask&&(k.depthMask(e),ia.depth_mask=e);e=ja[0];B=ja[1];F=ja[2];na=ja[3];if(e!==ha[0]||B!==ha[1]||F!==ha[2]||na!==ha[3])k.colorMask(e,B,F,na),ha[0]=e,ha[1]=B,ha[2]=F,ha[3]=na;e=f.cull_enable;e!==ia.cull_enable&&(e?k.enable(2884):k.disable(2884),ia.cull_enable=e);e=f.cull_face;e!==ia.cull_face&&(k.cullFace(e),ia.cull_face=e);e=f.frontFace;e!==ia.frontFace&&
(k.frontFace(e),ia.frontFace=e);e=f.lineWidth;e!==ia.lineWidth&&(k.lineWidth(e),ia.lineWidth=e);e=f.polygonOffset_enable;e!==ia.polygonOffset_enable&&(e?k.enable(32823):k.disable(32823),ia.polygonOffset_enable=e);e=O[0];B=O[1];if(e!==P[0]||B!==P[1])k.polygonOffset(e,B),P[0]=e,P[1]=B;e=f.sample_alpha;e!==ia.sample_alpha&&(e?k.enable(32926):k.disable(32926),ia.sample_alpha=e);e=f.sample_enable;e!==ia.sample_enable&&(e?k.enable(32928):k.disable(32928),ia.sample_enable=e);e=C[0];B=C[1];if(e!==g[0]||B!==
g[1])k.sampleCoverage(e,B),g[0]=e,g[1]=B;e=f.stencil_enable;e!==ia.stencil_enable&&(e?k.enable(2960):k.disable(2960),ia.stencil_enable=e);e=f.stencil_mask;e!==ia.stencil_mask&&(k.stencilMask(e),ia.stencil_mask=e);e=Da[0];B=Da[1];F=Da[2];if(e!==pa[0]||B!==pa[1]||F!==pa[2])k.stencilFunc(e,B,F),pa[0]=e,pa[1]=B,pa[2]=F;e=aa[0];B=aa[1];F=aa[2];na=aa[3];if(e!==Q[0]||B!==Q[1]||F!==Q[2]||na!==Q[3])k.stencilOpSeparate(e,B,F,na),Q[0]=e,Q[1]=B,Q[2]=F,Q[3]=na;e=m[0];B=m[1];F=m[2];na=m[3];if(e!==J[0]||B!==J[1]||
F!==J[2]||na!==J[3])k.stencilOpSeparate(e,B,F,na),J[0]=e,J[1]=B,J[2]=F,J[3]=na;e=f.scissor_enable;e!==ia.scissor_enable&&(e?k.enable(3089):k.disable(3089),ia.scissor_enable=e);e=N[0];B=N[1];F=N[2];na=N[3];if(e!==M[0]||B!==M[1]||F!==M[2]||na!==M[3])k.scissor(e,B,F,na),M[0]=e,M[1]=B,M[2]=F,M[3]=na;e=ma[0];B=ma[1];F=ma[2];na=ma[3];if(e!==qa[0]||B!==qa[1]||F!==qa[2]||na!==qa[3])k.viewport(e,B,F,na),qa[0]=e,qa[1]=B,qa[2]=F,qa[3]=na}k.disable(2929);ia.depth_enable=!1;if(e=ia.profile)q=performance.now(),
L.count+=c;k.useProgram(U.program);D.setVAO(null);B=T.location;F=z[B];F.buffer||k.enableVertexAttribArray(B);if(F.type!==l.dtype||2!==F.size||F.buffer!==l||!1!==F.normalized||0!==F.offset||0!==F.stride)k.bindBuffer(34962,l.buffer),k.vertexAttribPointer(B,2,l.dtype,!1,0,0),F.type=l.dtype,F.size=2,F.buffer=l,F.normalized=!1,F.offset=0,F.stride=0;w=n.call(this,R,G,w);"number"!==typeof w&&da.commandRaise(u,K);k.uniform1f(ba.location,w);(B=h.elements)?k.bindBuffer(34963,B.buffer.buffer):D.currentVAO&&
(B=t.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,B.buffer.buffer);F=h.primitive;na=h.offset;for(w=0;w<c;++w){G=b[w];var Y,Ta,r,p,y,va,Ea;Y=G.color;X(Y)&&4===Y.length||da.commandRaise(x,K);G=Y[0];r=Y[1];y=Y[2];Y=Y[3];w&&Ta===G&&p===r&&va===y&&Ea===Y||(Ta=G,p=r,va=y,Ea=Y,k.uniform4f(v.location,G,r,y,Y));B?k.drawElements(F,3,B.type,na<<(B.type-5121>>1)):k.drawArrays(F,na,3)}ia.dirty=!0;D.setVAO(null);e&&(L.cpuTime+=performance.now()-q)}}},"$13,color,position":function(b,da,K,L,e,l,q,c,F,
B,G,U,n,u,x,ba){var v,T,z,R,ia,h,t,S,k,X,f,w,Y,D,E,d,I,a,Z,A,ja,ha,V,ea,O,P,C,g,N,M,Da,pa,m,J,aa;v=b.attributes;T=b.context;z=b.current;R=b.draw;ia=b.framebuffer;h=b.gl;t=b.next;S=b.shader;k=b.uniforms;X=b.vao;f=t.blend_color;w=z.blend_color;Y=t.blend_equation;D=z.blend_equation;E=t.blend_func;d=z.blend_func;I=t.colorMask;a=z.colorMask;Z=t.depth_range;A=z.depth_range;ja=t.polygonOffset_offset;ha=z.polygonOffset_offset;V=t.sample_coverage;ea=z.sample_coverage;O=t.scissor_box;P=z.scissor_box;C=t.stencil_func;
g=z.stencil_func;N=t.stencil_opBack;M=z.stencil_opBack;Da=t.stencil_opFront;pa=z.stencil_opFront;m=t.viewport;J=z.viewport;aa=[1,0,0,1];return{draw:function(b){var k,n,u;b=ia.next;b!==ia.cur&&(b?h.bindFramebuffer(36160,b.framebuffer):h.bindFramebuffer(36160,null),ia.cur=b);if(z.dirty){var B;b=t.dither;b!==z.dither&&(b?h.enable(3024):h.disable(3024),z.dither=b);b=t.blend_enable;b!==z.blend_enable&&(b?h.enable(3042):h.disable(3042),z.blend_enable=b);b=f[0];n=f[1];u=f[2];B=f[3];if(b!==w[0]||n!==w[1]||
u!==w[2]||B!==w[3])h.blendColor(b,n,u,B),w[0]=b,w[1]=n,w[2]=u,w[3]=B;b=Y[0];n=Y[1];if(b!==D[0]||n!==D[1])h.blendEquationSeparate(b,n),D[0]=b,D[1]=n;b=E[0];n=E[1];u=E[2];B=E[3];if(b!==d[0]||n!==d[1]||u!==d[2]||B!==d[3])h.blendFuncSeparate(b,n,u,B),d[0]=b,d[1]=n,d[2]=u,d[3]=B;b=t.depth_enable;b!==z.depth_enable&&(b?h.enable(2929):h.disable(2929),z.depth_enable=b);b=t.depth_func;b!==z.depth_func&&(h.depthFunc(b),z.depth_func=b);b=Z[0];n=Z[1];if(b!==A[0]||n!==A[1])h.depthRange(b,n),A[0]=b,A[1]=n;b=t.depth_mask;
b!==z.depth_mask&&(h.depthMask(b),z.depth_mask=b);b=I[0];n=I[1];u=I[2];B=I[3];if(b!==a[0]||n!==a[1]||u!==a[2]||B!==a[3])h.colorMask(b,n,u,B),a[0]=b,a[1]=n,a[2]=u,a[3]=B;b=t.cull_enable;b!==z.cull_enable&&(b?h.enable(2884):h.disable(2884),z.cull_enable=b);b=t.cull_face;b!==z.cull_face&&(h.cullFace(b),z.cull_face=b);b=t.frontFace;b!==z.frontFace&&(h.frontFace(b),z.frontFace=b);b=t.polygonOffset_enable;b!==z.polygonOffset_enable&&(b?h.enable(32823):h.disable(32823),z.polygonOffset_enable=b);b=ja[0];
n=ja[1];if(b!==ha[0]||n!==ha[1])h.polygonOffset(b,n),ha[0]=b,ha[1]=n;b=t.sample_alpha;b!==z.sample_alpha&&(b?h.enable(32926):h.disable(32926),z.sample_alpha=b);b=t.sample_enable;b!==z.sample_enable&&(b?h.enable(32928):h.disable(32928),z.sample_enable=b);b=V[0];n=V[1];if(b!==ea[0]||n!==ea[1])h.sampleCoverage(b,n),ea[0]=b,ea[1]=n;b=t.stencil_enable;b!==z.stencil_enable&&(b?h.enable(2960):h.disable(2960),z.stencil_enable=b);b=t.stencil_mask;b!==z.stencil_mask&&(h.stencilMask(b),z.stencil_mask=b);b=C[0];
n=C[1];u=C[2];if(b!==g[0]||n!==g[1]||u!==g[2])h.stencilFunc(b,n,u),g[0]=b,g[1]=n,g[2]=u;b=Da[0];n=Da[1];u=Da[2];B=Da[3];if(b!==pa[0]||n!==pa[1]||u!==pa[2]||B!==pa[3])h.stencilOpSeparate(b,n,u,B),pa[0]=b,pa[1]=n,pa[2]=u,pa[3]=B;b=N[0];n=N[1];u=N[2];B=N[3];if(b!==M[0]||n!==M[1]||u!==M[2]||B!==M[3])h.stencilOpSeparate(b,n,u,B),M[0]=b,M[1]=n,M[2]=u,M[3]=B;b=t.scissor_enable;b!==z.scissor_enable&&(b?h.enable(3089):h.disable(3089),z.scissor_enable=b);b=O[0];n=O[1];u=O[2];B=O[3];if(b!==P[0]||n!==P[1]||u!==
P[2]||B!==P[3])h.scissor(b,n,u,B),P[0]=b,P[1]=n,P[2]=u,P[3]=B;b=m[0];n=m[1];u=m[2];B=m[3];if(b!==J[0]||n!==J[1]||u!==J[2]||B!==J[3])h.viewport(b,n,u,B),J[0]=b,J[1]=n,J[2]=u,J[3]=B}h.lineWidth(1);z.lineWidth=1;if(b=z.profile)k=performance.now(),L.count++;h.useProgram(e.program);X.setVAO(null);n=ba.location;u=v[n];u.buffer||h.enableVertexAttribArray(n);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)h.bindBuffer(34962,l.buffer),h.vertexAttribPointer(n,2,
l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;h.uniform4f(x.location,1,0,0,1);q&&h.bindBuffer(34963,q.buffer.buffer);n=q.primType;u=q.vertCount-0;0<=u||da.commandRaise(c,K);u&&(h.drawElements(n,u,q.type,0<<(q.type-5121>>1)),z.dirty=!0,X.setVAO(null),b&&(L.cpuTime+=performance.now()-k))},scope:function(a,b,c){var d,f,e,g,h,m,n,q,u,v,w,r,p,y,x,A,C,D,E,H,I,J;d=t.lineWidth;t.lineWidth=1;if(f=z.profile)e=performance.now(),L.count++;g=R.elements;R.elements=F;h=
R.offset;R.offset=0;m=F.vertCount-0;0<=m||da.commandRaise(B,K);n=R.count;R.count=m;q=F.primType;m=R.primitive;R.primitive=q;q=k[3];k[3]=aa;u=G.buffer;G.buffer=l;v=G.divisor;G.divisor=0;w=G.normalized;G.normalized=!1;r=G.offset;G.offset=0;p=G.size;G.size=0;y=G.state;G.state=1;x=G.stride;G.stride=0;A=G.type;G.type=l.dtype;C=G.w;G.w=0;D=G.x;G.x=0;E=G.y;G.y=0;H=G.z;G.z=0;I=S.vert;S.vert=2;J=S.frag;S.frag=1;z.dirty=!0;b(T,a,c);t.lineWidth=d;f&&(L.cpuTime+=performance.now()-e);R.elements=g;R.offset=h;R.count=
n;R.primitive=m;k[3]=q;G.buffer=u;G.divisor=v;G.normalized=w;G.offset=r;G.size=p;G.state=y;G.stride=x;G.type=A;G.w=C;G.x=D;G.y=E;G.z=H;S.vert=I;S.frag=J;z.dirty=!0},batch:function(b,c){var e,k,q;e=ia.next;e!==ia.cur&&(e?h.bindFramebuffer(36160,e.framebuffer):h.bindFramebuffer(36160,null),ia.cur=e);if(z.dirty){var B,F;e=t.dither;e!==z.dither&&(e?h.enable(3024):h.disable(3024),z.dither=e);e=t.blend_enable;e!==z.blend_enable&&(e?h.enable(3042):h.disable(3042),z.blend_enable=e);e=f[0];q=f[1];B=f[2];F=
f[3];if(e!==w[0]||q!==w[1]||B!==w[2]||F!==w[3])h.blendColor(e,q,B,F),w[0]=e,w[1]=q,w[2]=B,w[3]=F;e=Y[0];q=Y[1];if(e!==D[0]||q!==D[1])h.blendEquationSeparate(e,q),D[0]=e,D[1]=q;e=E[0];q=E[1];B=E[2];F=E[3];if(e!==d[0]||q!==d[1]||B!==d[2]||F!==d[3])h.blendFuncSeparate(e,q,B,F),d[0]=e,d[1]=q,d[2]=B,d[3]=F;e=t.depth_enable;e!==z.depth_enable&&(e?h.enable(2929):h.disable(2929),z.depth_enable=e);e=t.depth_func;e!==z.depth_func&&(h.depthFunc(e),z.depth_func=e);e=Z[0];q=Z[1];if(e!==A[0]||q!==A[1])h.depthRange(e,
q),A[0]=e,A[1]=q;e=t.depth_mask;e!==z.depth_mask&&(h.depthMask(e),z.depth_mask=e);e=I[0];q=I[1];B=I[2];F=I[3];if(e!==a[0]||q!==a[1]||B!==a[2]||F!==a[3])h.colorMask(e,q,B,F),a[0]=e,a[1]=q,a[2]=B,a[3]=F;e=t.cull_enable;e!==z.cull_enable&&(e?h.enable(2884):h.disable(2884),z.cull_enable=e);e=t.cull_face;e!==z.cull_face&&(h.cullFace(e),z.cull_face=e);e=t.frontFace;e!==z.frontFace&&(h.frontFace(e),z.frontFace=e);e=t.polygonOffset_enable;e!==z.polygonOffset_enable&&(e?h.enable(32823):h.disable(32823),z.polygonOffset_enable=
e);e=ja[0];q=ja[1];if(e!==ha[0]||q!==ha[1])h.polygonOffset(e,q),ha[0]=e,ha[1]=q;e=t.sample_alpha;e!==z.sample_alpha&&(e?h.enable(32926):h.disable(32926),z.sample_alpha=e);e=t.sample_enable;e!==z.sample_enable&&(e?h.enable(32928):h.disable(32928),z.sample_enable=e);e=V[0];q=V[1];if(e!==ea[0]||q!==ea[1])h.sampleCoverage(e,q),ea[0]=e,ea[1]=q;e=t.stencil_enable;e!==z.stencil_enable&&(e?h.enable(2960):h.disable(2960),z.stencil_enable=e);e=t.stencil_mask;e!==z.stencil_mask&&(h.stencilMask(e),z.stencil_mask=
e);e=C[0];q=C[1];B=C[2];if(e!==g[0]||q!==g[1]||B!==g[2])h.stencilFunc(e,q,B),g[0]=e,g[1]=q,g[2]=B;e=Da[0];q=Da[1];B=Da[2];F=Da[3];if(e!==pa[0]||q!==pa[1]||B!==pa[2]||F!==pa[3])h.stencilOpSeparate(e,q,B,F),pa[0]=e,pa[1]=q,pa[2]=B,pa[3]=F;e=N[0];q=N[1];B=N[2];F=N[3];if(e!==M[0]||q!==M[1]||B!==M[2]||F!==M[3])h.stencilOpSeparate(e,q,B,F),M[0]=e,M[1]=q,M[2]=B,M[3]=F;e=t.scissor_enable;e!==z.scissor_enable&&(e?h.enable(3089):h.disable(3089),z.scissor_enable=e);e=O[0];q=O[1];B=O[2];F=O[3];if(e!==P[0]||q!==
P[1]||B!==P[2]||F!==P[3])h.scissor(e,q,B,F),P[0]=e,P[1]=q,P[2]=B,P[3]=F;e=m[0];q=m[1];B=m[2];F=m[3];if(e!==J[0]||q!==J[1]||B!==J[2]||F!==J[3])h.viewport(e,q,B,F),J[0]=e,J[1]=q,J[2]=B,J[3]=F}h.lineWidth(1);z.lineWidth=1;if(e=z.profile)k=performance.now(),L.count+=c;h.useProgram(U.program);X.setVAO(null);q=ba.location;B=v[q];B.buffer||h.enableVertexAttribArray(q);if(B.type!==l.dtype||2!==B.size||B.buffer!==l||!1!==B.normalized||0!==B.offset||0!==B.stride)h.bindBuffer(34962,l.buffer),h.vertexAttribPointer(q,
2,l.dtype,!1,0,0),B.type=l.dtype,B.size=2,B.buffer=l,B.normalized=!1,B.offset=0,B.stride=0;h.uniform4f(x.location,1,0,0,1);n&&h.bindBuffer(34963,n.buffer.buffer);B=n.primType;F=n.vertCount-0;0<=F||da.commandRaise(u,K);for(q=0;q<c;++q)F&&h.drawElements(B,F,n.type,0<<(n.type-5121>>1));z.dirty=!0;X.setVAO(null);e&&(L.cpuTime+=performance.now()-k)}}},"$20,mouse,position,t,texture":function(b,da,K,L,e,l,q,c,F,B,G,U,n,u,x,ba,v,T,z,R,Z,h,t,S,k){var X,f,w,Y,D,E,d,I,a,ha,A,ja,ab,V,ea,O,P,C,g,N,M,Da,pa,m,J,
aa,Q,ma,qa,Aa,wa,fa,Ba,ka,oa,ya;X=b.attributes;f=b.context;w=b.current;Y=b.draw;D=b.elements;E=b.framebuffer;d=b.gl;I=b.isArrayLike;a=b.next;ha=b.shader;A=b.uniforms;ja=b.vao;ab=a.blend_color;V=w.blend_color;ea=a.blend_equation;O=w.blend_equation;P=a.blend_func;C=w.blend_func;g=a.colorMask;N=w.colorMask;M=a.depth_range;Da=w.depth_range;pa=a.polygonOffset_offset;m=w.polygonOffset_offset;J=a.sample_coverage;aa=w.sample_coverage;Q=a.scissor_box;ma=w.scissor_box;qa=a.stencil_func;Aa=w.stencil_func;wa=
a.stencil_opBack;fa=w.stencil_opBack;Ba=a.stencil_opFront;ka=w.stencil_opFront;oa=a.viewport;ya=w.viewport;return{draw:function(b){var n,u,v,r;n=E.next;n!==E.cur&&(n?d.bindFramebuffer(36160,n.framebuffer):d.bindFramebuffer(36160,null),E.cur=n);if(w.dirty){var p;n=a.dither;n!==w.dither&&(n?d.enable(3024):d.disable(3024),w.dither=n);n=a.blend_enable;n!==w.blend_enable&&(n?d.enable(3042):d.disable(3042),w.blend_enable=n);n=ab[0];v=ab[1];r=ab[2];p=ab[3];if(n!==V[0]||v!==V[1]||r!==V[2]||p!==V[3])d.blendColor(n,
v,r,p),V[0]=n,V[1]=v,V[2]=r,V[3]=p;n=ea[0];v=ea[1];if(n!==O[0]||v!==O[1])d.blendEquationSeparate(n,v),O[0]=n,O[1]=v;n=P[0];v=P[1];r=P[2];p=P[3];if(n!==C[0]||v!==C[1]||r!==C[2]||p!==C[3])d.blendFuncSeparate(n,v,r,p),C[0]=n,C[1]=v,C[2]=r,C[3]=p;n=a.depth_enable;n!==w.depth_enable&&(n?d.enable(2929):d.disable(2929),w.depth_enable=n);n=a.depth_func;n!==w.depth_func&&(d.depthFunc(n),w.depth_func=n);n=M[0];v=M[1];if(n!==Da[0]||v!==Da[1])d.depthRange(n,v),Da[0]=n,Da[1]=v;n=a.depth_mask;n!==w.depth_mask&&
(d.depthMask(n),w.depth_mask=n);n=g[0];v=g[1];r=g[2];p=g[3];if(n!==N[0]||v!==N[1]||r!==N[2]||p!==N[3])d.colorMask(n,v,r,p),N[0]=n,N[1]=v,N[2]=r,N[3]=p;n=a.cull_enable;n!==w.cull_enable&&(n?d.enable(2884):d.disable(2884),w.cull_enable=n);n=a.cull_face;n!==w.cull_face&&(d.cullFace(n),w.cull_face=n);n=a.frontFace;n!==w.frontFace&&(d.frontFace(n),w.frontFace=n);n=a.lineWidth;n!==w.lineWidth&&(d.lineWidth(n),w.lineWidth=n);n=a.polygonOffset_enable;n!==w.polygonOffset_enable&&(n?d.enable(32823):d.disable(32823),
w.polygonOffset_enable=n);n=pa[0];v=pa[1];if(n!==m[0]||v!==m[1])d.polygonOffset(n,v),m[0]=n,m[1]=v;n=a.sample_alpha;n!==w.sample_alpha&&(n?d.enable(32926):d.disable(32926),w.sample_alpha=n);n=a.sample_enable;n!==w.sample_enable&&(n?d.enable(32928):d.disable(32928),w.sample_enable=n);n=J[0];v=J[1];if(n!==aa[0]||v!==aa[1])d.sampleCoverage(n,v),aa[0]=n,aa[1]=v;n=a.stencil_enable;n!==w.stencil_enable&&(n?d.enable(2960):d.disable(2960),w.stencil_enable=n);n=a.stencil_mask;n!==w.stencil_mask&&(d.stencilMask(n),
w.stencil_mask=n);n=qa[0];v=qa[1];r=qa[2];if(n!==Aa[0]||v!==Aa[1]||r!==Aa[2])d.stencilFunc(n,v,r),Aa[0]=n,Aa[1]=v,Aa[2]=r;n=Ba[0];v=Ba[1];r=Ba[2];p=Ba[3];if(n!==ka[0]||v!==ka[1]||r!==ka[2]||p!==ka[3])d.stencilOpSeparate(n,v,r,p),ka[0]=n,ka[1]=v,ka[2]=r,ka[3]=p;n=wa[0];v=wa[1];r=wa[2];p=wa[3];if(n!==fa[0]||v!==fa[1]||r!==fa[2]||p!==fa[3])d.stencilOpSeparate(n,v,r,p),fa[0]=n,fa[1]=v,fa[2]=r,fa[3]=p;n=a.scissor_enable;n!==w.scissor_enable&&(n?d.enable(3089):d.disable(3089),w.scissor_enable=n);n=Q[0];
v=Q[1];r=Q[2];p=Q[3];if(n!==ma[0]||v!==ma[1]||r!==ma[2]||p!==ma[3])d.scissor(n,v,r,p),ma[0]=n,ma[1]=v,ma[2]=r,ma[3]=p;n=oa[0];v=oa[1];r=oa[2];p=oa[3];if(n!==ya[0]||v!==ya[1]||r!==ya[2]||p!==ya[3])d.viewport(n,v,r,p),ya[0]=n,ya[1]=v,ya[2]=r,ya[3]=p;w.dirty=!1}if(n=w.profile)u=performance.now(),L.count++;d.useProgram(e.program);ja.setVAO(null);v=t.location;r=X[v];r.buffer||d.enableVertexAttribArray(v);if(r.type!==l.dtype||2!==r.size||r.buffer!==l||!1!==r.normalized||0!==r.offset||0!==r.stride)d.bindBuffer(34962,
l.buffer),d.vertexAttribPointer(v,2,l.dtype,!1,0,0),r.type=l.dtype,r.size=2,r.buffer=l,r.normalized=!1,r.offset=0,r.stride=0;v=q.call(this,f,b,0);I(v)&&2===v.length||da.commandRaise(c,K);d.uniform2f(h.location,v[0],v[1]);b=F.call(this,f,b,0);"number"!==typeof b&&da.commandRaise(B,K);d.uniform1f(S.location,b);d.uniform1i(k.location,G.bind());(b=Y.elements)?d.bindBuffer(34963,b.buffer.buffer):ja.currentVAO&&(b=D.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,b.buffer.buffer);v=Y.primitive;
r=Y.offset;b?d.drawElements(v,3,b.type,r<<(b.type-5121>>1)):d.drawArrays(v,r,3);ja.setVAO(null);n&&(L.cpuTime+=performance.now()-u);G.unbind()},scope:function(a,b,c){var d,e,g,h,k,m,q,t,v,z,B,C,D,E,F,G,I,J,K,M;if(d=w.profile)e=performance.now(),L.count++;g=Y.count;Y.count=3;h=U.call(this,f,a,c);k=A[3];A[3]=h;m=n.call(this,f,a,c);h=A[4];A[4]=m;m=A[5];A[5]=u;q=x.buffer;x.buffer=l;t=x.divisor;x.divisor=0;v=x.normalized;x.normalized=!1;z=x.offset;x.offset=0;B=x.size;x.size=0;C=x.state;x.state=1;D=x.stride;
x.stride=0;E=x.type;x.type=l.dtype;F=x.w;x.w=0;G=x.x;x.x=0;I=x.y;x.y=0;J=x.z;x.z=0;K=ha.vert;ha.vert=2;M=ha.frag;ha.frag=1;b(f,a,c);d&&(L.cpuTime+=performance.now()-e);Y.count=g;A[3]=k;A[4]=h;A[5]=m;x.buffer=q;x.divisor=t;x.normalized=v;x.offset=z;x.size=B;x.state=C;x.stride=D;x.type=E;x.w=F;x.x=G;x.y=I;x.z=J;ha.vert=K;ha.frag=M},batch:function(b,c){var e,n,q;e=E.next;e!==E.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),E.cur=e);if(w.dirty){var p,u,x;e=a.dither;e!==w.dither&&
(e?d.enable(3024):d.disable(3024),w.dither=e);e=a.blend_enable;e!==w.blend_enable&&(e?d.enable(3042):d.disable(3042),w.blend_enable=e);e=ab[0];p=ab[1];u=ab[2];x=ab[3];if(e!==V[0]||p!==V[1]||u!==V[2]||x!==V[3])d.blendColor(e,p,u,x),V[0]=e,V[1]=p,V[2]=u,V[3]=x;e=ea[0];p=ea[1];if(e!==O[0]||p!==O[1])d.blendEquationSeparate(e,p),O[0]=e,O[1]=p;e=P[0];p=P[1];u=P[2];x=P[3];if(e!==C[0]||p!==C[1]||u!==C[2]||x!==C[3])d.blendFuncSeparate(e,p,u,x),C[0]=e,C[1]=p,C[2]=u,C[3]=x;e=a.depth_enable;e!==w.depth_enable&&
(e?d.enable(2929):d.disable(2929),w.depth_enable=e);e=a.depth_func;e!==w.depth_func&&(d.depthFunc(e),w.depth_func=e);e=M[0];p=M[1];if(e!==Da[0]||p!==Da[1])d.depthRange(e,p),Da[0]=e,Da[1]=p;e=a.depth_mask;e!==w.depth_mask&&(d.depthMask(e),w.depth_mask=e);e=g[0];p=g[1];u=g[2];x=g[3];if(e!==N[0]||p!==N[1]||u!==N[2]||x!==N[3])d.colorMask(e,p,u,x),N[0]=e,N[1]=p,N[2]=u,N[3]=x;e=a.cull_enable;e!==w.cull_enable&&(e?d.enable(2884):d.disable(2884),w.cull_enable=e);e=a.cull_face;e!==w.cull_face&&(d.cullFace(e),
w.cull_face=e);e=a.frontFace;e!==w.frontFace&&(d.frontFace(e),w.frontFace=e);e=a.lineWidth;e!==w.lineWidth&&(d.lineWidth(e),w.lineWidth=e);e=a.polygonOffset_enable;e!==w.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),w.polygonOffset_enable=e);e=pa[0];p=pa[1];if(e!==m[0]||p!==m[1])d.polygonOffset(e,p),m[0]=e,m[1]=p;e=a.sample_alpha;e!==w.sample_alpha&&(e?d.enable(32926):d.disable(32926),w.sample_alpha=e);e=a.sample_enable;e!==w.sample_enable&&(e?d.enable(32928):d.disable(32928),w.sample_enable=
e);e=J[0];p=J[1];if(e!==aa[0]||p!==aa[1])d.sampleCoverage(e,p),aa[0]=e,aa[1]=p;e=a.stencil_enable;e!==w.stencil_enable&&(e?d.enable(2960):d.disable(2960),w.stencil_enable=e);e=a.stencil_mask;e!==w.stencil_mask&&(d.stencilMask(e),w.stencil_mask=e);e=qa[0];p=qa[1];u=qa[2];if(e!==Aa[0]||p!==Aa[1]||u!==Aa[2])d.stencilFunc(e,p,u),Aa[0]=e,Aa[1]=p,Aa[2]=u;e=Ba[0];p=Ba[1];u=Ba[2];x=Ba[3];if(e!==ka[0]||p!==ka[1]||u!==ka[2]||x!==ka[3])d.stencilOpSeparate(e,p,u,x),ka[0]=e,ka[1]=p,ka[2]=u,ka[3]=x;e=wa[0];p=wa[1];
u=wa[2];x=wa[3];if(e!==fa[0]||p!==fa[1]||u!==fa[2]||x!==fa[3])d.stencilOpSeparate(e,p,u,x),fa[0]=e,fa[1]=p,fa[2]=u,fa[3]=x;e=a.scissor_enable;e!==w.scissor_enable&&(e?d.enable(3089):d.disable(3089),w.scissor_enable=e);e=Q[0];p=Q[1];u=Q[2];x=Q[3];if(e!==ma[0]||p!==ma[1]||u!==ma[2]||x!==ma[3])d.scissor(e,p,u,x),ma[0]=e,ma[1]=p,ma[2]=u,ma[3]=x;e=oa[0];p=oa[1];u=oa[2];x=oa[3];if(e!==ya[0]||p!==ya[1]||u!==ya[2]||x!==ya[3])d.viewport(e,p,u,x),ya[0]=e,ya[1]=p,ya[2]=u,ya[3]=x;w.dirty=!1}if(e=w.profile)n=
performance.now(),L.count+=c;d.useProgram(ba.program);ja.setVAO(null);p=t.location;u=X[p];u.buffer||d.enableVertexAttribArray(p);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)d.bindBuffer(34962,l.buffer),d.vertexAttribPointer(p,2,l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;p=v.call(this,f,void 0,q);I(p)&&2===p.length||da.commandRaise(T,K);d.uniform2f(h.location,p[0],p[1]);q=z.call(this,f,void 0,q);"number"!==
typeof q&&da.commandRaise(R,K);d.uniform1f(S.location,q);d.uniform1i(k.location,Z.bind());(p=Y.elements)?d.bindBuffer(34963,p.buffer.buffer):ja.currentVAO&&(p=D.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,p.buffer.buffer);u=Y.primitive;x=Y.offset;for(q=0;q<c;++q)p?d.drawElements(u,3,p.type,x<<(p.type-5121>>1)):d.drawArrays(u,x,3);Z.unbind();ja.setVAO(null);e&&(L.cpuTime+=performance.now()-n)}}}}},{}],25:[function(Z,ha,ab){var b=Z("./sorted-object-keys");ha.exports=function(da,K){for(var L=
b(K),e=0;e<L.length;++e)da[L[e]]=K[L[e]];return da}},{"./sorted-object-keys":34}],26:[function(Z,ha,ab){function b(b,e,l,q,c,F){for(var B=0;B<e;++B)for(var G=b[B],K=0;K<l;++K)for(var n=G[K],u=0;u<q;++u)c[F++]=n[u]}function da(K,e,l,q,c){for(var F=1,B=l+1;B<e.length;++B)F*=e[B];var G=e[l];if(4===e.length-l){var U=e[l+1],n=e[l+2];e=e[l+3];for(B=0;B<G;++B)b(K[B],U,n,e,q,c),c+=F}else for(B=0;B<G;++B)da(K[B],e,l+1,q,c),c+=F}var K=Z("./pool");ha.exports={shape:function(b){for(var e=[];b.length;b=b[0])e.push(b.length);
return e},flatten:function(L,e,l,q){var c=1;if(e.length)for(var F=0;F<e.length;++F)c*=e[F];else c=0;l=q||K.allocType(l,c);switch(e.length){case 0:break;case 1:q=e[0];for(e=0;e<q;++e)l[e]=L[e];break;case 2:q=e[0];e=e[1];for(F=c=0;F<q;++F)for(var B=L[F],G=0;G<e;++G)l[c++]=B[G];break;case 3:b(L,e[0],e[1],e[2],l,0);break;default:da(L,e,0,l,0)}return l}}},{"./pool":32}],27:[function(Z,ha,ab){var b=Z("./is-typed-array");ha.exports=function(da){return Array.isArray(da)||b(da)}},{"./is-typed-array":30}],
28:[function(Z,ha,ab){var b=Z("./is-typed-array");ha.exports=function(da){return!!da&&"object"===typeof da&&Array.isArray(da.shape)&&Array.isArray(da.stride)&&"number"===typeof da.offset&&da.shape.length===da.stride.length&&(Array.isArray(da.data)||b(da.data))}},{"./is-typed-array":30}],29:[function(Z,ha,ab){ha.exports=function(b){return!(b&b-1)&&!!b}},{}],30:[function(Z,ha,ab){ha.exports=function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||
b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Uint8ClampedArray}},{}],31:[function(Z,ha,ab){ha.exports=function(b,da){for(var K=Array(b),L=0;L<b;++L)K[L]=da(L);return K}},{}],32:[function(Z,ha,ab){function b(b){var e,l;e=(65535<b)<<4;b>>>=e;l=(255<b)<<3;b>>>=l;e|=l;l=(15<b)<<2;b>>>=l;e|=l;l=(3<b)<<1;return e|l|b>>>l>>1}function da(){function L(e){a:{for(var c=16;268435456>=c;c*=16)if(e<=c){e=c;break a}e=0}c=l[b(e)>>2];return 0<
c.length?c.pop():new ArrayBuffer(e)}function e(e){l[b(e.byteLength)>>2].push(e)}var l=K(8,function(){return[]});return{alloc:L,free:e,allocType:function(b,c){var e=null;switch(b){case 5120:e=new Int8Array(L(c),0,c);break;case 5121:e=new Uint8Array(L(c),0,c);break;case 5122:e=new Int16Array(L(2*c),0,c);break;case 5123:e=new Uint16Array(L(2*c),0,c);break;case 5124:e=new Int32Array(L(4*c),0,c);break;case 5125:e=new Uint32Array(L(4*c),0,c);break;case 5126:e=new Float32Array(L(4*c),0,c);break;default:return null}return e.length!==
c?e.subarray(0,c):e},freeType:function(b){e(b.buffer)}}}var K=Z("./loop");Z=da();Z.zero=da();ha.exports=Z},{"./loop":31}],33:[function(Z,ha,ab){ha.exports={next:"function"===typeof requestAnimationFrame?function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:clearTimeout}},{}],34:[function(Z,ha,ab){ha.exports=function(b){return Object.keys(b).sort()}},{}],35:[function(Z,ha,ab){var b=
Z("./pool"),da=new Float32Array(1),K=new Uint32Array(da.buffer);ha.exports=function(L){for(var e=b.allocType(5123,L.length),l=0;l<L.length;++l)if(isNaN(L[l]))e[l]=65535;else if(Infinity===L[l])e[l]=31744;else if(-Infinity===L[l])e[l]=64512;else{da[0]=L[l];var q=K[0],c=q>>>31<<15,F=(q<<1>>>24)-127,q=q>>13&1023;e[l]=-24>F?c:-14>F?c+(q+1024>>-14-F):15<F?c+31744:c+(F+15<<10)+q}return e}},{"./pool":32}],36:[function(Z,ha,ab){var b=Z("./sorted-object-keys");ha.exports=function(da){return b(da).map(function(b){return da[b]})}},
{"./sorted-object-keys":34}],37:[function(Z,ha,ab){function b(b,c,e){function B(){var c=window.innerWidth,l=window.innerHeight;b!==document.body&&(l=G.getBoundingClientRect(),c=l.right-l.left,l=l.bottom-l.top);G.width=e*c;G.height=e*l}var G=document.createElement("canvas");l(G.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(G);b===document.body&&(G.style.position="absolute",l(b.style,{margin:0,padding:0}));var K;b!==document.body&&"function"===typeof ResizeObserver?
(K=new ResizeObserver(function(){setTimeout(B)}),K.observe(b)):window.addEventListener("resize",B,!1);B();return{canvas:G,onDestroy:function(){K?K.disconnect():window.removeEventListener("resize",B);b.removeChild(G)}}}function da(b,c){function e(l){try{return b.getContext(l,c)}catch(F){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function K(b){if("string"===typeof b)return b.split();e(Array.isArray(b),"invalid extension array");return b}function L(b){return"string"===
typeof b?(e("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(b)):b}var e=Z("./util/check"),l=Z("./util/extend");ha.exports=function(l){var c=l||{},F,B,G,U;l={};var n=[],u=[],x="undefined"===typeof window?1:window.devicePixelRatio,ba=!1,v=function(b){b&&e.raise(b)},T=function(){};"string"===typeof c?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),F=document.querySelector(c),e(F,"invalid query string for element")):"object"===
typeof c?"string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?F=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(U=c,G=U.canvas):(e.constructor(c),"gl"in c?U=c.gl:"canvas"in c?G=L(c.canvas):"container"in c&&(B=L(c.container)),"attributes"in c&&(l=c.attributes,e.type(l,"object","invalid context attributes")),"extensions"in c&&(n=K(c.extensions)),"optionalExtensions"in c&&(u=K(c.optionalExtensions)),"onDone"in c&&(e.type(c.onDone,
"function","invalid or missing onDone callback"),v=c.onDone),"profile"in c&&(ba=!!c.profile),"pixelRatio"in c&&(x=+c.pixelRatio,e(0<x,"invalid pixel ratio"))):e.raise("invalid arguments to regl");F&&("canvas"===F.nodeName.toLowerCase()?G=F:B=F);if(!U){if(!G){e("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");F=b(B||document.body,v,x);if(!F)return null;G=F.canvas;T=F.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0);U=da(G,l)}return U?
{gl:U,canvas:G,container:B,extensions:n,optionalExtensions:u,pixelRatio:x,profile:ba,onDone:v,onDestroy:T}:(T(),v("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(Z,ha,ab){function b(b,c){for(var e=0;e<b.length;++e)if(b[e]===c)return e;return-1}var da=Z("./lib/util/check"),K=Z("./lib/util/extend"),L=Z("./lib/dynamic"),e=Z("./lib/util/raf"),l=Z("./lib/util/clock"),q=Z("./lib/strings"),c=Z("./lib/webgl"),
F=Z("./lib/extension"),B=Z("./lib/limits"),G=Z("./lib/buffer"),U=Z("./lib/elements"),n=Z("./lib/texture"),u=Z("./lib/renderbuffer"),x=Z("./lib/framebuffer"),ba=Z("./lib/attribute"),v=Z("./lib/shader"),T=Z("./lib/read"),z=Z("./lib/core"),R=Z("./lib/stats"),ia=Z("./lib/timer");ha.exports=function(h){function t(){if(0===Ba.length)P&&P.update(),Ja=null;else{Ja=e.next(t);d();for(var a=Ba.length-1;0<=a;--a){var b=Ba[a];b&&b(M,null,0)}Z.flush();P&&P.update()}}function S(){!Ja&&0<Ba.length&&(Ja=e.next(t))}
function k(){Ja&&(e.cancel(t),Ja=null)}function X(a){a.preventDefault();ha=!0;k();ka.forEach(function(a){a()})}function f(a){Z.getError();ha=!1;ab.restore();aa.restore();pa.restore();Q.restore();ma.restore();qa.restore();J.restore();P&&P.restore();Aa.procs.refresh();S();oa.forEach(function(a){a()})}function w(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(L.isDynamic(f))e[b]=L.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(L.isDynamic(f[g])){e[b]=
L.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<a;)n.push(null);return n}da(!!a,"invalid args to regl({...})");da.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=K({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Aa.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return K(function(a,b){var d;ha&&da.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function Y(a,b){var c=0;Aa.procs.poll();var d=b.color;d&&(Z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Z.clearDepth(+b.depth),c|=256);"stencil"in b&&(Z.clearStencil(b.stencil|0),c|=1024);da(!!c,"called regl.clear with no buffer specified");
Z.clear(c)}function D(a){da.type(a,"function","regl.frame() callback must be a function");Ba.push(a);S();return{cancel:function(){function c(){var a=b(Ba,c);Ba[a]=Ba[Ba.length-1];--Ba.length;0>=Ba.length&&k()}var d=b(Ba,a);da(0<=d,"cannot cancel a frame twice");Ba[d]=c}}}function E(){var a=wa.viewport,b=wa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;M.viewportWidth=M.framebufferWidth=M.drawingBufferWidth=a[2]=b[2]=Z.drawingBufferWidth;M.viewportHeight=M.framebufferHeight=M.drawingBufferHeight=a[3]=b[3]=Z.drawingBufferHeight}
function d(){M.tick+=1;M.time=a();E();Aa.procs.poll()}function I(){Q.refresh();E();Aa.procs.refresh();P&&P.update()}function a(){return(l()-C)/1E3}console.log("REGL args are:",h);h=c(h);console.log("REGL configs are:",h);if(!h)return null;var Z=h.gl,A=Z.getContextAttributes(),ha=Z.isContextLost(),ab=F(Z,h);if(!ab)return null;var V=q(),ea=R(),O=ab.extensions,P=ia(Z,O),C=l(),g=Z.drawingBufferWidth,N=Z.drawingBufferHeight,M={tick:0,time:0,viewportWidth:g,viewportHeight:N,framebufferWidth:g,framebufferHeight:N,
drawingBufferWidth:g,drawingBufferHeight:N,pixelRatio:h.pixelRatio},g={elements:null,primitive:4,count:-1,offset:0,instances:-1},Da=B(Z,O),pa=G(Z,ea,h,function(a){return J.destroyBuffer(a)}),m=U(Z,O,pa,ea),J=ba(Z,O,Da,ea,pa,m,g),aa=v(Z,V,ea,h),Q=n(Z,O,Da,function(){Aa.procs.poll()},M,ea,h),ma=u(Z,O,Da,ea,h),qa=x(Z,O,Da,Q,ma,ea),Aa=z(Z,V,O,Da,pa,m,Q,qa,{},J,aa,g,M,P,h),V=T(Z,qa,Aa.procs.poll,M,A,O,Da),wa=Aa.next,fa=Z.canvas,Ba=[],ka=[],oa=[],ya=[h.onDestroy],Ja=null;fa&&(fa.addEventListener("webglcontextlost",
X,!1),fa.addEventListener("webglcontextrestored",f,!1));var na=qa.setFBO=w({framebuffer:L.define.call(null,1,"framebuffer")});I();A=K(w,{clear:function(a){da("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)na(K({framebuffer:a.framebuffer.faces[b]},a),Y);else na(a,Y);else Y(null,a)},prop:L.define.bind(null,1),context:L.define.bind(null,2),"this":L.define.bind(null,3),draw:w({}),buffer:function(a){return pa.create(a,
34962,!1,!1)},elements:function(a){return m.create(a,!1)},texture:Q.create2D,cube:Q.createCube,renderbuffer:ma.create,framebuffer:qa.create,framebufferCube:qa.createCube,vao:J.createVAO,attributes:A,frame:D,on:function(a,b){da.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return D(b);case "lost":c=ka;break;case "restore":c=oa;break;case "destroy":c=ya;break;default:da.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Da,hasExtension:function(a){return 0<=Da.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){Ba.length=0;k();fa&&(fa.removeEventListener("webglcontextlost",X),fa.removeEventListener("webglcontextrestored",f));aa.clear();qa.clear();ma.clear();J.clear();Q.clear();m.clear();pa.clear();P&&P.clear();ya.forEach(function(a){a()})},_gl:Z,_refresh:I,poll:function(){d();P&&P.update()},now:a,stats:ea});h.onDone(null,A);return A}},
{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
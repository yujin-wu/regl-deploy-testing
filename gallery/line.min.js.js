var $jscomp={scope:{},getGlobal:function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global?global:h}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(h){return"jscomp_symbol_"+h+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(h){$jscomp.initSymbolIterator();if(h[$jscomp.global.Symbol.iterator])return h[$jscomp.global.Symbol.iterator]();var r=0;return{next:function(){return r==h.length?{done:!0}:{done:!1,value:h[r++]}}}};
$jscomp.arrayFromIterator=function(h){for(var r,G=[];!(r=h.next()).done;)G.push(r.value);return G};$jscomp.arrayFromIterable=function(h){return h instanceof Array?h:$jscomp.arrayFromIterator($jscomp.makeIterator(h))};
$jscomp.inherits=function(h,r){function G(){}G.prototype=r.prototype;h.prototype=new G;h.prototype.constructor=h;for(var a in r)if($jscomp.global.Object.defineProperties){var d=$jscomp.global.Object.getOwnPropertyDescriptor(r,a);d&&$jscomp.global.Object.defineProperty(h,a,d)}else h[a]=r[a]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(h,r){h instanceof String&&(h=String(h));var G=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={},d=(a.next=function(){if(G<h.length){var a=G++;return{value:r(a,h[a]),done:!1}}d.next=$jscomp.array.done_;return $jscomp.array.done_()},a[Symbol.iterator]=function(){return d},a);return d};
$jscomp.array.findInternal_=function(h,r,G){h instanceof String&&(h=String(h));for(var a=h.length,d=0;d<a;d++){var T=h[d];if(r.call(G,T,d,h))return{i:d,v:T}}return{i:-1,v:void 0}};
$jscomp.array.from=function(h,r,G){r=void 0===r?function(d){return d}:r;var a=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(h[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();h=h[Symbol.iterator]();for(var d;!(d=h.next()).done;)a.push(r.call(G,d.value))}else{d=h.length;for(var T=0;T<d;T++)a.push(r.call(G,h[T]))}return a};$jscomp.array.of=function(h){for(var r=[],G=0;G<arguments.length;++G)r[G-0]=arguments[G];return $jscomp.array.from(r)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(h,r){return[h,r]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(h){return h})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(h,r){return r})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(h,r,G){var a=this.length;h=Number(h);r=Number(r);G=Number(null!=G?G:a);if(h<r)for(G=Math.min(G,a);r<G;)r in this?this[h++]=this[r++]:(delete this[h++],r++);else for(G=Math.min(G,a+r-h),h+=G-r;G>r;)--G in this?this[--h]=this[G]:delete this[h];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(h,r,G){null!=G&&h.length||(G=this.length||0);G=Number(G);for(r=Number((void 0===r?0:r)||0);r<G;r++)this[r]=h;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(h,r){return $jscomp.array.findInternal_(this,h,r).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(h,r){return $jscomp.array.findInternal_(this,h,r).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(h){h=void 0===h?[]:h;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(h){h=$jscomp.makeIterator(h);for(var r=h.next();!r.done;r=h.next())r=r.value,this.set(r[0],r[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var h=$jscomp.global.Map;if(!h||!h.prototype.entries||!Object.seal)return!1;try{var r=Object.seal({x:4}),G=new h($jscomp.makeIterator([[r,"s"]]));if("s"!=G.get(r)||1!=G.size||G.get({x:4})||G.set({x:4},"t")!=G||2!=G.size)return!1;var a=G.entries(),d=a.next();if(d.done||d.value[0]!=r||"s"!=d.value[1])return!1;d=a.next();return d.done||4!=d.value[0].x||"t"!=d.value[1]||!a.next().done?!1:!0}catch(T){return!1}};
$jscomp.Map.createHead_=function(){var h={};return h.previous=h.next=h.head=h};$jscomp.Map.getId_=function(h){if(!(h instanceof Object))return String(h);$jscomp.Map.key_ in h||h instanceof Object&&Object.isExtensible&&Object.isExtensible(h)&&$jscomp.Map.defineProperty_(h,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in h?h[$jscomp.Map.key_]:" "+h};
$jscomp.Map.prototype.set=function(h,r){var G=this.maybeGetEntry_(h),a=G.id,d=G.list,G=G.entry;d||(d=this.data_[a]=[]);G?G.value=r:(G={next:this.head_,previous:this.head_.previous,head:this.head_,key:h,value:r},d.push(G),this.head_.previous.next=G,this.head_.previous=G,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(h){var r=this.maybeGetEntry_(h);h=r.id;var G=r.list,a=r.index;return(r=r.entry)&&G?(G.splice(a,1),G.length||delete this.data_[h],r.previous.next=r.next,r.next.previous=r.previous,r.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(h){return!!this.maybeGetEntry_(h).entry};
$jscomp.Map.prototype.get=function(h){return(h=this.maybeGetEntry_(h).entry)&&h.value};$jscomp.Map.prototype.maybeGetEntry_=function(h){var r=$jscomp.Map.getId_(h),G=this.data_[r];if(G)for(var a=0;a<G.length;a++){var d=G[a];if(h!==h&&d.key!==d.key||h===d.key)return{id:r,list:G,index:a,entry:d}}return{id:r,list:G,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(h){return[h.key,h.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(h){return h.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(h){return h.value})};$jscomp.Map.prototype.forEach=function(h,r){for(var G=$jscomp.makeIterator(this.entries()),a=G.next();!a.done;a=G.next())a=a.value,h.call(r,a[1],a[0],this)};
$jscomp.Map.prototype.iter_=function(h){var r=this,G=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var a={};return a.next=function(){if(G){for(;G.head!=r.head_;)G=G.previous;for(;G.next!=G.head;)return G=G.next,{done:!1,value:h(G)};G=null}return{done:!0,value:void 0}},a[Symbol.iterator]=function(){return this},a};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(h,r,G){Object.defineProperty(h,r,{value:String(G)})}:function(h,r,G){h[r]=String(G)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(h){h=Number(h)>>>0;if(0===h)return 32;var r=0;0===(h&4294901760)&&(h<<=16,r+=16);0===(h&4278190080)&&(h<<=8,r+=8);0===(h&4026531840)&&(h<<=4,r+=4);0===(h&3221225472)&&(h<<=2,r+=2);0===(h&2147483648)&&r++;return r};$jscomp.math.imul=function(h,r){h=Number(h);r=Number(r);var G=h&65535,a=r&65535;return G*a+((h>>>16&65535)*a+G*(r>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(h){h=Number(h);return 0===h||isNaN(h)?h:0<h?1:-1};
$jscomp.math.log10=function(h){return Math.log(h)/Math.LN10};$jscomp.math.log2=function(h){return Math.log(h)/Math.LN2};$jscomp.math.log1p=function(h){h=Number(h);if(.25>h&&-.25<h){for(var r=h,G=1,a=h,d=0,T=1;d!=a;)r*=h,T*=-1,a=(d=a)+T*r/++G;return a}return Math.log(1+h)};$jscomp.math.expm1=function(h){h=Number(h);if(.25>h&&-.25<h){for(var r=h,G=1,a=h,d=0;d!=a;)r*=h/++G,a=(d=a)+r;return a}return Math.exp(h)-1};$jscomp.math.cosh=function(h){h=Number(h);return(Math.exp(h)+Math.exp(-h))/2};
$jscomp.math.sinh=function(h){h=Number(h);return 0===h?h:(Math.exp(h)-Math.exp(-h))/2};$jscomp.math.tanh=function(h){h=Number(h);if(0===h)return h;var r=Math.exp(2*-Math.abs(h)),r=(1-r)/(1+r);return 0>h?-r:r};$jscomp.math.acosh=function(h){h=Number(h);return Math.log(h+Math.sqrt(h*h-1))};$jscomp.math.asinh=function(h){h=Number(h);if(0===h)return h;var r=Math.log(Math.abs(h)+Math.sqrt(h*h+1));return 0>h?-r:r};
$jscomp.math.atanh=function(h){h=Number(h);return($jscomp.math.log1p(h)-$jscomp.math.log1p(-h))/2};
$jscomp.math.hypot=function(h,r,G){for(var a=[],d=2;d<arguments.length;++d)a[d-2]=arguments[d];h=Number(h);r=Number(r);for(var T=Math.max(Math.abs(h),Math.abs(r)),u=$jscomp.makeIterator(a),d=u.next();!d.done;d=u.next())T=Math.max(T,Math.abs(d.value));if(1E100<T||1E-100>T){h/=T;r/=T;u=h*h+r*r;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d)/T,u+=d*d;return Math.sqrt(u)*T}T=h*h+r*r;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value,d=Number(d),T+=
d*d;return Math.sqrt(T)};$jscomp.math.trunc=function(h){h=Number(h);if(isNaN(h)||Infinity===h||-Infinity===h||0===h)return h;var r=Math.floor(Math.abs(h));return 0>h?-r:r};$jscomp.math.cbrt=function(h){if(0===h)return h;h=Number(h);var r=Math.pow(Math.abs(h),1/3);return 0>h?-r:r};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(h){return"number"!==typeof h?!1:!isNaN(h)&&Infinity!==h&&-Infinity!==h};
$jscomp.number.isInteger=function(h){return $jscomp.number.isFinite(h)?h===Math.floor(h):!1};$jscomp.number.isNaN=function(h){return"number"===typeof h&&isNaN(h)};$jscomp.number.isSafeInteger=function(h){return $jscomp.number.isInteger(h)&&Math.abs(h)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(h,r){for(var G=[],a=1;a<arguments.length;++a)G[a-1]=arguments[a];G=$jscomp.makeIterator(G);for(a=G.next();!a.done;a=G.next())if(a=a.value)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(h[d]=a[d]);return h};$jscomp.object.is=function(h,r){return h===r?0!==h||1/h===1/r:h!==h&&r!==r};$jscomp.Set=function(h){h=void 0===h?[]:h;this.map_=new $jscomp.Map;if(h){h=$jscomp.makeIterator(h);for(var r=h.next();!r.done;r=h.next())this.add(r.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var h=$jscomp.global.Set;if(!h||!h.prototype.entries||!Object.seal)return!1;var r=Object.seal({x:4}),h=new h($jscomp.makeIterator([r]));if(h.has(r)||1!=h.size||h.add(r)!=h||1!=h.size||h.add({x:4})!=h||2!=h.size)return!1;var h=h.entries(),G=h.next();if(G.done||G.value[0]!=r||G.value[1]!=r)return!1;G=h.next();return G.done||G.value[0]==r||4!=G.value[0].x||G.value[1]!=G.value[0]?!1:h.next().done};
$jscomp.Set.prototype.add=function(h){this.map_.set(h,h);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(h){h=this.map_["delete"](h);this.size=this.map_.size;return h};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(h){return this.map_.has(h)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(h,r){var G=this;this.map_.forEach(function(a){return h.call(r,a,a,G)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(h,r){if(h instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(h){for(var r=[],G=0;G<arguments.length;++G)r[G-0]=arguments[G];for(var G="",r=$jscomp.makeIterator(r),a=r.next();!a.done;a=r.next()){a=a.value;a=+a;if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?G+=String.fromCharCode(a):(a-=65536,G+=String.fromCharCode(a>>>10&1023|55296),G+=String.fromCharCode(a&1023|56320))}return G};
$jscomp.string.repeat=function(h){var r=this.toString();if(0>h||1342177279<h)throw new RangeError("Invalid count value");h|=0;for(var G="";h;)if(h&1&&(G+=r),h>>>=1)r+=r;return G};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(h){var r=this.toString(),G=r.length;h=Number(h)||0;if(0<=h&&h<G){h|=0;var a=r.charCodeAt(h);if(55296>a||56319<a||h+1===G)return a;h=r.charCodeAt(h+1);return 56320>h||57343<h?a:1024*(a-55296)+h+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(h,r){r=void 0===r?0:r;$jscomp.string.noRegExp_(h,"includes");return-1!==this.toString().indexOf(h,r)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(h,r){r=void 0===r?0:r;$jscomp.string.noRegExp_(h,"startsWith");var G=this.toString();h+="";for(var a=G.length,d=h.length,T=Math.max(0,Math.min(r|0,G.length)),u=0;u<d&&T<a;)if(G[T++]!=h[u++])return!1;return u>=d};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(h,r){$jscomp.string.noRegExp_(h,"endsWith");var G=this.toString();h+="";void 0===r&&(r=G.length);for(var a=Math.max(0,Math.min(r|0,G.length)),d=h.length;0<d&&0<a;)if(G[--a]!=h[--d])return!1;return 0>=d};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(){function h(r,G,a){function d(q,m){if(!G[q]){if(!r[q]){var b="function"==typeof require&&require;if(!m&&b)return b(q,!0);if(T)return T(q,!0);b=Error("Cannot find module '"+q+"'");throw b.code="MODULE_NOT_FOUND",b;}b=G[q]={exports:{}};r[q][0].call(b.exports,function(b){return d(r[q][1][b]||b)},b,b.exports,h,r,G,a)}return G[q].exports}for(var T="function"==typeof require&&require,u=0;u<a.length;u++)d(a[u]);return d}return h})()({1:[function(h,r,G){var a=h("../regl"),d=h("gl-mat4"),T=h("canvas-orbit-camera");
h=h("canvas-fit");r=Array.prototype;var u=r.push,q=r.unshift,m={duplicate:function(c,b,f){null==b&&(b=1);null==f&&(f=1);for(var d=[],a=Array(2*b),k=0,y=c.length/b;k<y;k++){for(var m=k*b,z=0;z<b;z++){var x=c[m+z];a[z]=x;a[z+b]=x*f}u.apply(d,a)}return d},mapElement:function(c,b,f,d){for(var a=0,k=c.length/f;a<k;a++){var y=b+a*f;c[y]=d(c[y],y,a)}return c},pushElement:function(c,b,f){var d=Array(f);b*=f;for(var a=0;a<f;a++)d[a]=c[b+a];u.apply(c,d);return c},unshiftElement:function(c,b,f){var d=Array(f);
b*=f;for(var a=0;a<f;a++)d[a]=c[b+a];q.apply(c,d);return c}};G=Float32Array.BYTES_PER_ELEMENT;r=document.createElement("canvas");var b=a(r),f=T(r),a=function(c,b,f){for(var d=2*Math.PI,a=0;a<b;a++){var k=a/(b-1)*d,y=f(k,a);c.push(Math.cos(k)*y,Math.sin(k)*y,0)}return c}([],200,function(c){return 20*Math.sin(2.5*c)}).slice();m.mapElement(a,2,3,function(c,b,f){return 20*(f/200-.5)});m.pushElement(a,0,3);m.unshiftElement(a,199,3);var T=Array(200).fill(1).map(function(c,b){return(b+1)/200}),c=new Float32Array(m.duplicate(a,
3)),k=new Float32Array(c),T=m.duplicate(T,1,-1),a=function(c,b,f){for(var d=0;d<b-1;d++){var a=f+2*d,k=a+1,y=a+2;c.push(a,k,y,y,k,a+3)}return c}([],200,0),z=b.buffer({usage:"dynamic",type:"float",length:1212*G}),T=b.buffer({usage:"static",type:"float",length:404*G,data:T});G={prevPosition:{buffer:z,offset:0,stride:3*G},currPosition:{buffer:z,offset:6*G,stride:3*G},nextPosition:{buffer:z,offset:12*G,stride:3*G},offsetScale:T};var T={projection:function(c){return d.perspective([],Math.PI/2,c.viewportWidth/
c.viewportHeight,.01,1E3)},model:d.identity([]),view:function(){return f.view()},aspect:function(c){return c.viewportWidth/c.viewportHeight},color:[.8,.5,0,1],thickness:1,miter:0},a=b.elements({primitive:"triangles",usage:"static",type:"uint16",data:a}),B=b({attributes:G,uniforms:T,elements:a,vert:"\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nuniform float aspect;\n\nuniform float thickness;\nuniform int miter;\n\nattribute vec3 prevPosition;\nattribute vec3 currPosition;\nattribute vec3 nextPosition;\nattribute float offsetScale;\n\nvoid main() {\n  vec2 aspectVec = vec2(aspect, 1.0);\n  mat4 projViewModel = projection * view * model;\n  vec4 prevProjected = projViewModel * vec4(prevPosition, 1.0);\n  vec4 currProjected = projViewModel * vec4(currPosition, 1.0);\n  vec4 nextProjected = projViewModel * vec4(nextPosition, 1.0);\n\n  // get 2D screen space with W divide and aspect correction\n  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;\n  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n\n  float len = thickness;\n\n  // starting point uses (next - current)\n  vec2 dir = vec2(0.0);\n  if (currScreen == prevScreen) {\n    dir = normalize(nextScreen - currScreen);\n  }\n  // ending point uses (current - previous)\n  else if (currScreen == nextScreen) {\n    dir = normalize(currScreen - prevScreen);\n  }\n  // somewhere in middle, needs a join\n  else {\n    // get directions from (C - B) and (B - A)\n    vec2 dirA = normalize((currScreen - prevScreen));\n    if (miter == 1) {\n      vec2 dirB = normalize((nextScreen - currScreen));\n      // now compute the miter join normal and length\n      vec2 tangent = normalize(dirA + dirB);\n      vec2 perp = vec2(-dirA.y, dirA.x);\n      vec2 miter = vec2(-tangent.y, tangent.x);\n      dir = tangent;\n      len = thickness / dot(miter, perp);\n    } else {\n      dir = dirA;\n    }\n  }\n\n  vec2 normal = vec2(-dir.y, dir.x) * thickness;\n  normal.x /= aspect;\n  vec4 offset = vec4(normal * offsetScale, 0.0, 1.0);\n  gl_Position = currProjected + offset;\n}",
frag:"\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"});b.frame(function(e){var l=e.tick;b.clear({color:[.1,.1,.1,1],depth:1});f.tick();m.mapElement(k,2,3,function(b,e,f){return c[e]+5*Math.sin(.05*l+.1*Math.floor(f/2))});z.subdata(k,0);B()});window.addEventListener("resize",h(r),!1);document.body.appendChild(r)},{"../regl":81,"canvas-fit":38,"canvas-orbit-camera":39,"gl-mat4":59}],2:[function(h,r,G){function a(){this.w=this.z=this.y=this.x=this.state=0;
this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var d=h("./util/sorted-object-keys"),T=h("./util/check"),u=h("./util/values"),q=h("./constants/dtypes.json"),m=h("./util/is-typed-array"),b=h("./util/is-ndarray"),f=h("./constants/primitives.json"),c="attributes elements offset count primitive instances".split(" ");r.exports=function(k,z,B,e,l,g,n){function p(c){if(c!==aa.currentVAO){var b=z.oes_vertex_array_object;c?b.bindVertexArrayOES(c.vao):b.bindVertexArrayOES(null);
aa.currentVAO=c}}function w(c){if(c!==aa.currentVAO){if(c)c.bindAttrs();else{for(var b=z.angle_instanced_arrays,e=0;e<v.length;++e){var l=v[e];l.buffer?(k.enableVertexAttribArray(e),l.buffer.bind(),k.vertexAttribPointer(e,l.size,l.type,l.normalized,l.stride,l.offfset),b&&l.divisor&&b.vertexAttribDivisorANGLE(e,l.divisor)):(k.disableVertexAttribArray(e),k.vertexAttrib4f(e,l.x,l.y,l.z,l.w))}n.elements?k.bindBuffer(34963,n.elements.buffer.buffer):k.bindBuffer(34963,null)}aa.currentVAO=c}}function y(){u(I).forEach(function(c){c.destroy()})}
function C(){this.id=++na;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var c=z.oes_vertex_array_object;this.vao=c?c.createVertexArrayOES():null;I[this.id]=this;this.buffers=[]}function h(){z.oes_vertex_array_object&&u(I).forEach(function(c){c.refresh()})}var x=B.maxAttributes,v=Array(x);for(B=0;B<x;++B)v[B]=new a;var na=0,I={},aa={Record:a,scope:{},state:v,currentVAO:null,targetVAO:null,restore:z.oes_vertex_array_object?h:function(){},
createVAO:function(k){function p(e){var k;if(Array.isArray(e))k=e,n.elements&&n.ownsElements&&n.elements.destroy(),n.elements=null,n.ownsElements=!1,n.offset=0,n.count=0,n.instances=-1,n.primitive=4;else{T("object"===typeof e,"invalid arguments for create vao");T("attributes"in e,"must specify attributes for vao");if(e.elements){var w=e.elements;n.ownsElements?("function"===typeof w&&"elements"===w._reglType?n.elements.destroy():n.elements(w),n.ownsElements=!1):g.getElements(e.elements)?(n.elements=
e.elements,n.ownsElements=!1):(n.elements=g.create(e.elements),n.ownsElements=!0)}else n.elements=null,n.ownsElements=!1;k=e.attributes;n.offset=0;n.count=-1;n.instances=-1;n.primitive=4;n.elements&&(n.count=n.elements._elements.vertCount,n.primitive=n.elements._elements.primType);"offset"in e&&(n.offset=e.offset|0);"count"in e&&(n.count=e.count|0);"instances"in e&&(n.instances=e.instances|0);"primitive"in e&&(T(e.primitive in f,"bad primitive type: "+e.primitive),n.primitive=f[e.primitive]);T.optional(function(){for(var b=
d(e),l=0;l<b.length;++l)T(0<=c.indexOf(b[l]),'invalid option for vao: "'+b[l]+'" valid options are '+c)});T(Array.isArray(k),"attributes must be an array")}T(k.length<x,"too many attributes");T(0<k.length,"must specify at least one attribute");var w={},y=n.attributes;y.length=k.length;for(var C=0;C<k.length;++C){var B=k[C],u=y[C]=new a,E=B.data||B;if(Array.isArray(E)||m(E)||b(E)){var v;n.buffers[C]&&(v=n.buffers[C],m(E)&&v._buffer.byteLength>=E.byteLength?v.subdata(E):(v.destroy(),n.buffers[C]=null));
n.buffers[C]||(v=n.buffers[C]=l.create(B,34962,!1,!0));u.buffer=l.getBuffer(v);u.size=u.buffer.dimension|0;u.normalized=!1;u.type=u.buffer.dtype;u.offset=0;u.stride=0;u.divisor=0;u.state=1;w[C]=1}else l.getBuffer(B)?(u.buffer=l.getBuffer(B),u.size=u.buffer.dimension|0,u.normalized=!1,u.type=u.buffer.dtype,u.offset=0,u.stride=0,u.divisor=0,u.state=1):l.getBuffer(B.buffer)?(u.buffer=l.getBuffer(B.buffer),u.size=(+B.size||u.buffer.dimension)|0,u.normalized=!!B.normalized||!1,"type"in B?(T.parameter(B.type,
q,"invalid buffer type"),u.type=q[B.type]):u.type=u.buffer.dtype,u.offset=(B.offset||0)|0,u.stride=(B.stride||0)|0,u.divisor=(B.divisor||0)|0,u.state=1,T(1<=u.size&&4>=u.size,"size must be between 1 and 4"),T(0<=u.offset,"invalid offset"),T(0<=u.stride&&255>=u.stride,"stride must be between 0 and 255"),T(0<=u.divisor,"divisor must be positive"),T(!u.divisor||!!z.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in B?(T(0<C,"first attribute must not be a constant"),
u.x=+B.x||0,u.y=+B.y||0,u.z=+B.z||0,u.w=+B.w||0,u.state=2):T(!1,"invalid attribute spec for location "+C)}for(v=0;v<n.buffers.length;++v)!w[v]&&n.buffers[v]&&(n.buffers[v].destroy(),n.buffers[v]=null);n.refresh();return p}var n=new C;e.vaoCount+=1;p.destroy=function(){for(var c=0;c<n.buffers.length;++c)n.buffers[c]&&n.buffers[c].destroy();n.buffers.length=0;n.ownsElements&&(n.elements.destroy(),n.elements=null,n.ownsElements=!1);n.destroy()};p._vao=n;p._reglType="vao";return p(k)},getVAO:function(c){return"function"===
typeof c&&c._vao?c._vao:null},destroyBuffer:function(c){for(var b=0;b<v.length;++b){var e=v[b];e.buffer===c&&(k.disableVertexAttribArray(b),e.buffer=null)}},setVAO:z.oes_vertex_array_object?p:w,clear:z.oes_vertex_array_object?y:function(){}};C.prototype.bindAttrs=function(){for(var c=z.angle_instanced_arrays,b=this.attributes,e=0;e<b.length;++e){var l=b[e];l.buffer?(k.enableVertexAttribArray(e),k.bindBuffer(34962,l.buffer.buffer),k.vertexAttribPointer(e,l.size,l.type,l.normalized,l.stride,l.offset),
c&&l.divisor&&c.vertexAttribDivisorANGLE(e,l.divisor)):(k.disableVertexAttribArray(e),k.vertexAttrib4f(e,l.x,l.y,l.z,l.w))}for(c=b.length;c<x;++c)k.disableVertexAttribArray(c);(c=g.getElements(this.elements))?k.bindBuffer(34963,c.buffer.buffer):k.bindBuffer(34963,null)};C.prototype.refresh=function(){var c=z.oes_vertex_array_object;c&&(c.bindVertexArrayOES(this.vao),this.bindAttrs(),aa.currentVAO=null,c.bindVertexArrayOES(null))};C.prototype.destroy=function(){if(this.vao){var c=z.oes_vertex_array_object;
this===aa.currentVAO&&(aa.currentVAO=null,c.bindVertexArrayOES(null));c.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);I[this.id]&&(delete I[this.id],--e.vaoCount)};return aa}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(h,r,G){function a(c){return B[Object.prototype.toString.call(c)]|
0}function d(c,b){for(var e=0;e<b.length;++e)c[e]=b[e]}function T(c,b,e,l,f,d,a){for(var k=0,g=0;g<e;++g)for(var m=0;m<l;++m)c[k++]=b[f*g+d*m+a]}var u=h("./util/sorted-object-keys"),q=h("./util/check"),m=h("./util/is-typed-array"),b=h("./util/is-ndarray"),f=h("./util/values"),c=h("./util/pool");G=h("./util/flatten");var k=G.flatten,z=G.shape,B=h("./constants/arraytypes.json"),e=h("./constants/dtypes.json"),l=h("./constants/usage.json"),g=[];g[5120]=1;g[5122]=2;g[5124]=4;g[5121]=1;g[5123]=2;g[5125]=
4;g[5126]=4;r.exports=function(n,p,w,y){function C(c){this.id=na++;this.buffer=n.createBuffer();this.type=c;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;w.profile&&(this.stats={size:0})}function B(c,b,e){c.byteLength=b.byteLength;n.bufferData(c.type,b,e)}function x(e,l,f,g,n,p){e.usage=f;if(Array.isArray(l)){if(e.dtype=g||5126,0<l.length)if(Array.isArray(l[0])){n=z(l);for(var w=g=1;w<n.length;++w)g*=n[w];e.dimension=g;l=k(l,n,e.dtype);B(e,l,f);p?e.persistentData=
l:c.freeType(l)}else"number"===typeof l[0]?(e.dimension=n,n=c.allocType(e.dtype,l.length),d(n,l),B(e,n,f),p?e.persistentData=n:c.freeType(n)):m(l[0])?(e.dimension=l[0].length,e.dtype=g||a(l[0])||5126,l=k(l,[l.length,l[0].length],e.dtype),B(e,l,f),p?e.persistentData=l:c.freeType(l)):q.raise("invalid buffer data")}else if(m(l))e.dtype=g||a(l),e.dimension=n,B(e,l,f),p&&(e.persistentData=new Uint8Array(new Uint8Array(l.buffer)));else if(b(l)){n=l.shape;var y=l.stride,w=l.offset,C=0,x=0,u=0,v=0;1===n.length?
(C=n[0],x=1,u=y[0],v=0):2===n.length?(C=n[0],x=n[1],u=y[0],v=y[1]):q.raise("invalid shape");e.dtype=g||a(l.data)||5126;e.dimension=x;n=c.allocType(e.dtype,C*x);T(n,l.data,C,x,u,v,w);B(e,n,f);p?e.persistentData=n:c.freeType(n)}else l instanceof ArrayBuffer?(e.dtype=5121,e.dimension=n,B(e,l,f),p&&(e.persistentData=new Uint8Array(new Uint8Array(l)))):q.raise("invalid buffer data")}function v(c){p.bufferCount--;y(c);var e=c.buffer;q(e,"buffer must not be deleted already");n.deleteBuffer(e);c.buffer=null;
delete I[c.id]}var na=0,I={};C.prototype.bind=function(){n.bindBuffer(this.type,this.buffer)};C.prototype.destroy=function(){v(this)};var h=[];w.profile&&(p.getTotalBufferSize=function(){var c=0;u(I).forEach(function(e){c+=I[e].stats.size});return c});return{create:function(f,y,B,u){function na(c){var f=35044,d=null,a=0,k=0,p=1;Array.isArray(c)||m(c)||b(c)||c instanceof ArrayBuffer?d=c:"number"===typeof c?a=c|0:c&&(q.type(c,"object","buffer arguments must be an object, a number or an array"),"data"in
c&&(q(null===d||Array.isArray(d)||m(d)||b(d),"invalid data for buffer"),d=c.data),"usage"in c&&(q.parameter(c.usage,l,"invalid buffer usage"),f=l[c.usage]),"type"in c&&(q.parameter(c.type,e,"invalid buffer type"),k=e[c.type]),"dimension"in c&&(q.type(c.dimension,"number","invalid dimension"),p=c.dimension|0),"length"in c&&(q.nni(a,"buffer length must be a nonnegative integer"),a=c.length|0));h.bind();d?x(h,d,f,k,p,u):(a&&n.bufferData(h.type,a,f),h.dtype=k||5121,h.usage=f,h.dimension=p,h.byteLength=
a);w.profile&&(h.stats.size=h.byteLength*g[h.dtype]);return na}function D(c,e){q(e+c.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+c.byteLength+" starting from offset "+e+" to a buffer of size "+h.byteLength);n.bufferSubData(h.type,e,c)}p.bufferCount++;var h=new C(y);I[h.id]=h;B||na(f);na._reglType="buffer";na._buffer=h;na.subdata=function(e,l){var f=(l||0)|0,g;h.bind();if(m(e)||e instanceof ArrayBuffer)D(e,f);else if(Array.isArray(e)){if(0<
e.length)if("number"===typeof e[0]){var n=c.allocType(h.dtype,e.length);d(n,e);D(n,f);c.freeType(n)}else Array.isArray(e[0])||m(e[0])?(g=z(e),n=k(e,g,h.dtype),D(n,f),c.freeType(n)):q.raise("invalid buffer data")}else if(b(e)){g=e.shape;var p=e.stride,w=n=0,y=0,C=0;1===g.length?(n=g[0],w=1,y=p[0],C=0):2===g.length?(n=g[0],w=g[1],y=p[0],C=p[1]):q.raise("invalid shape");g=Array.isArray(e.data)?h.dtype:a(e.data);g=c.allocType(g,n*w);T(g,e.data,n,w,y,C,e.offset);D(g,f);c.freeType(g)}else q.raise("invalid data for buffer subdata");
return na};w.profile&&(na.stats=h.stats);na.destroy=function(){v(h)};return na},createStream:function(c,e){var b=h.pop();b||(b=new C(c));b.bind();x(b,e,35040,0,1,!1);return b},destroyStream:function(c){h.push(c)},clear:function(){f(I).forEach(v);h.forEach(v)},getBuffer:function(c){return c&&c._buffer instanceof C?c._buffer:null},restore:function(){f(I).forEach(function(c){c.buffer=n.createBuffer();n.bindBuffer(c.type,c.buffer);n.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:x}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(h,r,G){r.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(h,r,G){r.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(h,r,G){r.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(h,r,G){r.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(h,r,G){function a(c){return Array.isArray(c)||B(c)||e(c)}function d(c){return c.sort(function(c,
e){return"viewport"===c?-1:"viewport"===e?1:c<e?-1:1})}function T(c,e,b,l){this.thisDep=c;this.contextDep=e;this.propDep=b;this.append=l}function u(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function q(c){return new T(!1,!1,!1,c)}function m(c,e){var b=c.type;if(0===b)return b=c.data.length,new T(!0,1<=b,2<=b,e);if(4===b)return b=c.data,new T(b.thisDep,b.contextDep,b.propDep,e);if(5===b)return new T(!1,!1,!1,e);if(6===b){for(var l=b=!1,f=!1,d=0;d<c.data.length;++d){var a=c.data[d];1===a.type?
f=!0:2===a.type?l=!0:3===a.type?b=!0:0===a.type?(b=!0,a=a.data,1<=a&&(l=!0),2<=a&&(f=!0)):4===a.type&&(b=b||a.data.thisDep,l=l||a.data.contextDep,f=f||a.data.propDep)}return new T(b,l,f,e)}return new T(3===b,2===b,1===b,e)}var b=h("./util/sorted-object-keys"),f=h("./util/check"),c=h("./util/extend"),k=h("./util/codegen"),z=h("./util/loop"),B=h("./util/is-typed-array"),e=h("./util/is-ndarray"),l=h("./util/is-array-like"),g=h("./dynamic"),n=h("./constants/primitives.json"),p=h("./constants/dtypes.json"),
w=["x","y","z","w"],y="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),C={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ea="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
x={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},v={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},na={frag:35632,vert:35633},I={cw:2304,ccw:2305},aa=new T(!1,!1,!1,function(){});r.exports=function(e,B,h,H,F,D,ga,t,r,L,ma,ta,S,V,R){function O(c){return c.replace(".","_")}function M(c,e,b){var l=O(c);ua.push(c);
X[l]=ja[l]=!!b;Ka[l]=e}function N(c,e,b){var l=O(c);ua.push(c);Array.isArray(b)?(ja[l]=b.slice(),X[l]=b.slice()):ja[l]=X[l]=b;Fa[l]=e}function P(){var c=k(),e=c.link,l=c.global;c.id=Kc++;c.batchId="0";var d=e(fb),a=c.shared={props:"a0"};b(fb).forEach(function(c){a[c]=l.def(d,".",c)});f.optional(function(){c.CHECK=e(f);c.commandStr=f.guessCommand();c.command=e(c.commandStr);c.assert=function(c,b,l){c("if(!(",b,"))",this.CHECK,".commandRaise(",e(l),",",this.command,");")};Y.invalidBlendCombinations=
Ea});var g=c.next={},n=c.current={};b(Fa).forEach(function(c){Array.isArray(ja[c])&&(g[c]=l.def(a.next,".",c),n[c]=l.def(a.current,".",c))});var p=c.constants={};b(Y).forEach(function(c){p[c]=l.def(JSON.stringify(Y[c]))});c.invoke=function(b,l){switch(l.type){case 0:var f=["this",a.context,a.props,c.batchId];return b.def(e(l.data),".call(",f.slice(0,Math.max(l.data.length+1,4)),")");case 1:return b.def(a.props,l.data);case 2:return b.def(a.context,l.data);case 3:return b.def("this",l.data);case 4:return l.data.append(c,
b),l.data.ref;case 5:return l.data.toString();case 6:return l.data.map(function(e){return c.invoke(b,e)})}};c.attribCache={};var w={};c.scopeAttrib=function(c){c=B.id(c);if(c in w)return w[c];var b=L.scope[c];b||(b=L.scope[c]=new ya);return w[c]=e(b)};return c}function Q(c){var e=c["static"];c=c.dynamic;var b;if("profile"in e){var l=!!e.profile;b=q(function(c,e){return l});b.enable=l}else if("profile"in c){var f=c.profile;b=m(f,function(c,e){return c.invoke(e,f)})}return b}function ra(c,e){var b=
c["static"],l=c.dynamic;if("framebuffer"in b){var d=b.framebuffer;return d?(d=t.getFramebuffer(d),f.command(d,"invalid framebuffer object"),q(function(c,e){var b=c.link(d),l=c.shared;e.set(l.framebuffer,".next",b);l=l.context;e.set(l,".framebufferWidth",b+".width");e.set(l,".framebufferHeight",b+".height");return b})):q(function(c,e){var b=c.shared;e.set(b.framebuffer,".next","null");b=b.context;e.set(b,".framebufferWidth",b+".drawingBufferWidth");e.set(b,".framebufferHeight",b+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var a=l.framebuffer;return m(a,function(c,e){var b=c.invoke(e,a),l=c.shared,d=l.framebuffer,k=e.def(d,".getFramebuffer(",b,")");f.optional(function(){c.assert(e,"!"+b+"||"+k,"invalid framebuffer object")});e.set(d,".next",k);l=l.context;e.set(l,".framebufferWidth",k+"?"+k+".width:"+l+".drawingBufferWidth");e.set(l,".framebufferHeight",k+"?"+k+".height:"+l+".drawingBufferHeight");return k})}return null}function pa(c,e,b){function l(c){if(c in d){var k=d[c];f.commandType(k,
"object","invalid "+c,b.commandStr);var g=!0,n=k.x|0,p=k.y|0,w,y;"width"in k?(w=k.width|0,f.command(0<=w,"invalid "+c,b.commandStr)):g=!1;"height"in k?(y=k.height|0,f.command(0<=y,"invalid "+c,b.commandStr)):g=!1;return new T(!g&&e&&e.thisDep,!g&&e&&e.contextDep,!g&&e&&e.propDep,function(c,e){var b=c.shared.context,l=w;"width"in k||(l=e.def(b,".","framebufferWidth","-",n));var f=y;"height"in k||(f=e.def(b,".","framebufferHeight","-",p));return[n,p,l,f]})}if(c in a){var C=a[c],g=m(C,function(e,b){var l=
e.invoke(b,C);f.optional(function(){e.assert(b,l+"&&typeof "+l+'==="object"',"invalid "+c)});var d=e.shared.context,a=b.def(l,".x|0"),k=b.def(l,".y|0"),g=b.def('"width" in ',l,"?",l,".width|0:","(",d,".","framebufferWidth","-",a,")"),n=b.def('"height" in ',l,"?",l,".height|0:","(",d,".","framebufferHeight","-",k,")");f.optional(function(){e.assert(b,g+">=0&&"+n+">=0","invalid "+c)});return[a,k,g,n]});e&&(g.thisDep=g.thisDep||e.thisDep,g.contextDep=g.contextDep||e.contextDep,g.propDep=g.propDep||e.propDep);
return g}return e?new T(e.thisDep,e.contextDep,e.propDep,function(c,e){var b=c.shared.context;return[0,0,e.def(b,".","framebufferWidth"),e.def(b,".","framebufferHeight")]}):null}var d=c["static"],a=c.dynamic;if(c=l("viewport")){var k=c;c=new T(c.thisDep,c.contextDep,c.propDep,function(c,e){var b=k.append(c,e),l=c.shared.context;e.set(l,".viewportWidth",b[2]);e.set(l,".viewportHeight",b[3]);return b})}return{viewport:c,scissor_box:l("scissor.box")}}function J(c,e){var l=c["static"];if("string"===typeof l.frag&&
"string"===typeof l.vert){if(0<b(e.dynamic).length)return null;var l=e["static"],d=b(l);if(0<d.length&&"number"===typeof l[d[0]]){for(var a=[],k=0;k<d.length;++k)f("number"===typeof l[d[k]],"must specify all vertex attribute locations when using vaos"),a.push([l[d[k]]|0,d[k]]);return a}}return null}function K(c,e,b){function l(c){if(c in d){var e=B.id(d[c]);f.optional(function(){ma.shader(na[c],e,f.guessCommand())});var b=q(function(){return e});b.id=e;return b}if(c in a){var k=a[c];return m(k,function(e,
b){var l=e.invoke(b,k),d=b.def(e.shared.strings,".id(",l,")");f.optional(function(){b(e.shared.shader,".shader(",na[c],",",d,",",e.command,");")});return d})}return null}var d=c["static"],a=c.dynamic,k=l("frag"),g=l("vert"),n=null;u(k)&&u(g)?(n=ma.program(g.id,k.id,null,b),c=q(function(c,e){return c.link(n)})):c=new T(k&&k.thisDep||g&&g.thisDep,k&&k.contextDep||g&&g.contextDep,k&&k.propDep||g&&g.propDep,function(c,e){var b=c.shared.shader,l;l=k?k.append(c,e):e.def(b,".","frag");var d;d=g?g.append(c,
e):e.def(b,".","vert");var a=b+".program("+d+","+l;f.optional(function(){a+=","+c.command});return e.def(a+")")});return{frag:k,vert:g,progVar:c,program:n}}function ba(c,e){function l(c,b){if(c in d){var a=d[c]|0;b?g.offset=a:g.instances=a;f.command(!b||0<=a,"invalid "+c,e.commandStr);return q(function(c,e){b&&(c.OFFSET=a);return a})}if(c in k){var n=k[c];return m(n,function(e,l){var d=e.invoke(l,n);b&&(e.OFFSET=d,f.optional(function(){e.assert(l,d+">=0","invalid "+c)}));return d})}if(b){if(y)return q(function(c,
e){return c.OFFSET=0});if(p)return new T(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.offset:0")})}else if(p)return new T(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.instances:-1")});return null}var d=c["static"],k=c.dynamic,g={},p=!1,w=function(){if("vao"in d){var c=d.vao;null!==c&&null===L.getVAO(c)&&(c=L.createVAO(c));p=!0;g.vao=c;return q(function(e){var b=
L.getVAO(c);return b?e.link(b):"null"})}if("vao"in k){p=!0;var e=k.vao;return m(e,function(c,b){var l=c.invoke(b,e);return b.def(c.shared.vao+".getVAO("+l+")")})}return null}(),y=!1,C=function(){if("elements"in d){var c=d.elements;g.elements=c;if(a(c)){var b=g.elements=D.create(c,!0),c=D.getElements(b);y=!0}else c&&(c=D.getElements(c),y=!0,f.command(c,"invalid elements",e.commandStr));b=q(function(e,b){if(c){var l=e.link(c);return e.ELEMENTS=l}return e.ELEMENTS=null});b.value=c;return b}if("elements"in
k){y=!0;var l=k.elements;return m(l,function(c,e){var b=c.shared,d=b.isBufferArgs,b=b.elements,a=c.invoke(e,l),k=e.def("null"),d=e.def(d,"(",a,")"),g=c.cond(d).then(k,"=",b,".createStream(",a,");")["else"](k,"=",b,".getElements(",a,");");f.optional(function(){c.assert(g["else"],"!"+a+"||"+k,"invalid elements")});e.entry(g);e.exit(c.cond(d).then(b,".destroyStream(",k,");"));return c.ELEMENTS=k})}return p?new T(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+
c.shared.elements+".getElements("+c.shared.vao+".currentVAO.elements):null")}):null}(),B=l("offset",!0),z=function(){if("primitive"in d){var c=d.primitive;g.primitive=c;f.commandParameter(c,n,"invalid primitve",e.commandStr);return q(function(e,b){return n[c]})}if("primitive"in k){var l=k.primitive;return m(l,function(c,e){var d=c.constants.primTypes,a=c.invoke(e,l);f.optional(function(){c.assert(e,a+" in "+d,"invalid primitive, must be one of "+b(n))});return e.def(d,"[",a,"]")})}return y?u(C)?C.value?
q(function(c,e){return e.def(c.ELEMENTS,".primType")}):q(function(){return 4}):new T(C.thisDep,C.contextDep,C.propDep,function(c,e){var b=c.ELEMENTS;return e.def(b,"?",b,".primType:",4)}):p?new T(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao+".currentVAO?"+c.shared.vao+".currentVAO.primitive:4")}):null}(),x=function(){if("count"in d){var c=d.count|0;g.count=c;f.command("number"===typeof c&&0<=c,"invalid vertex count",e.commandStr);return q(function(){return c})}if("count"in
k){var b=k.count;return m(b,function(c,e){var l=c.invoke(e,b);f.optional(function(){c.assert(e,"typeof "+l+'==="number"&&'+l+">=0&&"+l+"===("+l+"|0)","invalid vertex count")});return l})}if(y){if(u(C)){if(C)return B?new T(B.thisDep,B.contextDep,B.propDep,function(c,e){var b=e.def(c.ELEMENTS,".vertCount-",c.OFFSET);f.optional(function(){c.assert(e,b+">=0","invalid vertex offset/element buffer too small")});return b}):q(function(c,e){return e.def(c.ELEMENTS,".vertCount")});var l=q(function(){return-1});
f.optional(function(){l.MISSING=!0});return l}var a=new T(C.thisDep||B.thisDep,C.contextDep||B.contextDep,C.propDep||B.propDep,function(c,e){var b=c.ELEMENTS;return c.OFFSET?e.def(b,"?",b,".vertCount-",c.OFFSET,":-1"):e.def(b,"?",b,".vertCount:-1")});f.optional(function(){a.DYNAMIC=!0});return a}return p?new T(w.thisDep,w.contextDep,w.propDep,function(c,e){return e.def(c.shared.vao,".currentVAO?",c.shared.vao,".currentVAO.count:-1")}):null}(),t=l("instances",!1);return{elements:C,primitive:z,count:x,
instances:t,offset:B,vao:w,vaoActive:p,elementsActive:y,"static":g}}function W(c,e){var d=c["static"],a=c.dynamic,k={};ua.forEach(function(c){function g(e,b){if(c in d){var l=e(d[c]);k[n]=q(function(){return l})}else if(c in a){var f=a[c];k[n]=m(f,function(c,e){return b(c,e,c.invoke(e,f))})}}var n=O(c);switch(c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return g(function(b){f.commandType(b,
"boolean",c,e.commandStr);return b},function(e,b,l){f.optional(function(){e.assert(b,"typeof "+l+'==="boolean"',"invalid flag "+c,e.commandStr)});return l});case "depth.func":return g(function(b){f.commandParameter(b,x,"invalid "+c,e.commandStr);return x[b]},function(e,l,d){var a=e.constants.compareFuncs;f.optional(function(){e.assert(l,d+" in "+a,"invalid "+c+", must be one of "+b(x))});return l.def(a,"[",d,"]")});case "depth.range":return g(function(c){f.command(l(c)&&2===c.length&&"number"===typeof c[0]&&
"number"===typeof c[1]&&c[0]<=c[1],"depth range is 2d array",e.commandStr);return c},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===2&&typeof "+b+'[0]==="number"&&typeof '+b+'[1]==="number"&&'+b+"[0]<="+b+"[1]","depth range must be a 2d array")});var l=e.def("+",b,"[0]"),d=e.def("+",b,"[1]");return[l,d]});case "blend.func":return g(function(c){f.commandType(c,"object","blend.func",e.commandStr);var b="srcRGB"in c?c.srcRGB:c.src,l="srcAlpha"in c?c.srcAlpha:
c.src,d="dstRGB"in c?c.dstRGB:c.dst;c="dstAlpha"in c?c.dstAlpha:c.dst;f.commandParameter(b,C,n+".srcRGB",e.commandStr);f.commandParameter(l,C,n+".srcAlpha",e.commandStr);f.commandParameter(d,C,n+".dstRGB",e.commandStr);f.commandParameter(c,C,n+".dstAlpha",e.commandStr);f.command(-1===Ea.indexOf(b+", "+d),"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+d+")",e.commandStr);return[C[b],C[d],C[l],C[c]]},function(e,l,d){function a(g,n){var p=l.def('"',g,n,'" in ',d,"?",d,".",g,n,":",d,".",
g);f.optional(function(){e.assert(l,p+" in "+k,"invalid "+c+"."+g+n+", must be one of "+b(C))});return p}var k=e.constants.blendFuncs;f.optional(function(){e.assert(l,d+"&&typeof "+d+'==="object"',"invalid blend func, must be an object")});var g=a("src","RGB"),n=a("dst","RGB");f.optional(function(){e.assert(l,e.constants.invalidBlendCombinations+".indexOf("+g+'+", "+'+n+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var p=l.def(k,"[",g,"]"),w=l.def(k,"[",a("src","Alpha"),"]"),
y=l.def(k,"[",n,"]"),m=l.def(k,"[",a("dst","Alpha"),"]");return[p,y,w,m]});case "blend.equation":return g(function(b){if("string"===typeof b)return f.commandParameter(b,Ga,"invalid "+c,e.commandStr),[Ga[b],Ga[b]];if("object"===typeof b)return f.commandParameter(b.rgb,Ga,c+".rgb",e.commandStr),f.commandParameter(b.alpha,Ga,c+".alpha",e.commandStr),[Ga[b.rgb],Ga[b.alpha]];f.commandRaise("invalid blend.equation",e.commandStr)},function(e,l,d){var a=e.constants.blendEquations,k=l.def(),g=l.def(),n=e.cond("typeof ",
d,'==="string"');f.optional(function(){function l(c,d,f){e.assert(c,f+" in "+a,"invalid "+d+", must be one of "+b(Ga))}l(n.then,c,d);e.assert(n["else"],d+"&&typeof "+d+'==="object"',"invalid "+c);l(n["else"],c+".rgb",d+".rgb");l(n["else"],c+".alpha",d+".alpha")});n.then(k,"=",g,"=",a,"[",d,"];");n["else"](k,"=",a,"[",d,".rgb];",g,"=",a,"[",d,".alpha];");l(n);return[k,g]});case "blend.color":return g(function(c){f.command(l(c)&&4===c.length,"blend.color must be a 4d array",e.commandStr);return z(4,
function(e){return+c[e]})},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","blend.color must be a 4d array")});return z(4,function(c){return e.def("+",b,"[",c,"]")})});case "stencil.mask":return g(function(c){f.commandType(c,"number",n,e.commandStr);return c|0},function(c,e,b){f.optional(function(){c.assert(e,"typeof "+b+'==="number"',"invalid stencil.mask")});return e.def(b,"|0")});case "stencil.func":return g(function(b){f.commandType(b,"object",
n,e.commandStr);var l=b.cmp||"keep",d=b.ref||0;b="mask"in b?b.mask:-1;f.commandParameter(l,x,c+".cmp",e.commandStr);f.commandType(d,"number",c+".ref",e.commandStr);f.commandType(b,"number",c+".mask",e.commandStr);return[x[l],d,b]},function(c,e,b){var l=c.constants.compareFuncs;f.optional(function(){function d(){c.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}d(b+"&&typeof ",b,'==="object"');d('!("cmp" in ',b,")||(",b,".cmp in ",l,")")});var d=e.def('"cmp" in ',b,"?",l,"[",
b,".cmp]",":",7680),a=e.def(b,".ref|0"),k=e.def('"mask" in ',b,"?",b,".mask|0:-1");return[d,a,k]});case "stencil.opFront":case "stencil.opBack":return g(function(b){f.commandType(b,"object",n,e.commandStr);var l=b.fail||"keep",d=b.zfail||"keep";b=b.zpass||"keep";f.commandParameter(l,v,c+".fail",e.commandStr);f.commandParameter(d,v,c+".zfail",e.commandStr);f.commandParameter(b,v,c+".zpass",e.commandStr);return["stencil.opBack"===c?1029:1028,v[l],v[d],v[b]]},function(e,l,d){function a(g){f.optional(function(){e.assert(l,
'!("'+g+'" in '+d+")||("+d+"."+g+" in "+k+")","invalid "+c+"."+g+", must be one of "+b(v))});return l.def('"',g,'" in ',d,"?",k,"[",d,".",g,"]:",7680)}var k=e.constants.stencilOps;f.optional(function(){e.assert(l,d+"&&typeof "+d+'==="object"',"invalid "+c)});return["stencil.opBack"===c?1029:1028,a("fail"),a("zfail"),a("zpass")]});case "polygonOffset.offset":return g(function(c){f.commandType(c,"object",n,e.commandStr);var b=c.factor|0;c=c.units|0;f.commandType(b,"number",n+".factor",e.commandStr);
f.commandType(c,"number",n+".units",e.commandStr);return[b,c]},function(e,b,l){f.optional(function(){e.assert(b,l+"&&typeof "+l+'==="object"',"invalid "+c)});var d=b.def(l,".factor|0"),a=b.def(l,".units|0");return[d,a]});case "cull.face":return g(function(c){var b=0;"front"===c?b=1028:"back"===c&&(b=1029);f.command(!!b,n,e.commandStr);return b},function(c,e,b){f.optional(function(){c.assert(e,b+'==="front"||'+b+'==="back"',"invalid cull.face")});return e.def(b,'==="front"?',1028,":",1029)});case "lineWidth":return g(function(c){f.command("number"===
typeof c&&c>=H.lineWidthDims[0]&&c<=H.lineWidthDims[1],"invalid line width, must be a positive number between "+H.lineWidthDims[0]+" and "+H.lineWidthDims[1],e.commandStr);return c},function(c,e,b){f.optional(function(){c.assert(e,"typeof "+b+'==="number"&&'+b+">="+H.lineWidthDims[0]+"&&"+b+"<="+H.lineWidthDims[1],"invalid line width")});return b});case "frontFace":return g(function(c){f.commandParameter(c,I,n,e.commandStr);return I[c]},function(c,e,b){f.optional(function(){c.assert(e,b+'==="cw"||'+
b+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return e.def(b+'==="cw"?2304:2305')});case "colorMask":return g(function(c){f.command(l(c)&&4===c.length,"color.mask must be length 4 array",e.commandStr);return c.map(function(c){return!!c})},function(c,e,b){f.optional(function(){c.assert(e,c.shared.isArrayLike+"("+b+")&&"+b+".length===4","invalid color.mask")});return z(4,function(c){return"!!"+b+"["+c+"]"})});case "sample.coverage":return g(function(c){f.command("object"===typeof c&&c,
n,e.commandStr);var b="value"in c?c.value:1;c=!!c.invert;f.command("number"===typeof b&&0<=b&&1>=b,"sample.coverage.value must be a number between 0 and 1",e.commandStr);return[b,c]},function(c,e,b){f.optional(function(){c.assert(e,b+"&&typeof "+b+'==="object"',"invalid sample.coverage")});var l=e.def('"value" in ',b,"?+",b,".value:1"),d=e.def("!!",b,".invert");return[l,d]})}});return k}function la(c,e){var d=c["static"],a=c.dynamic,k={};b(d).forEach(function(c){var b=d[c],a;if("number"===typeof b||
"boolean"===typeof b)a=q(function(){return b});else if("function"===typeof b){var g=b._reglType;"texture2d"===g||"textureCube"===g?a=q(function(c){return c.link(b)}):"framebuffer"===g||"framebufferCube"===g?(f.command(0<b.color.length,'missing color attachment for framebuffer sent to uniform "'+c+'"',e.commandStr),a=q(function(c){return c.link(b.color[0])})):f.commandRaise('invalid data for uniform "'+c+'"',e.commandStr)}else l(b)?a=q(function(e){return e.global.def("[",z(b.length,function(l){f.command("number"===
typeof b[l]||"boolean"===typeof b[l],"invalid uniform "+c,e.commandStr);return b[l]}),"]")}):f.commandRaise('invalid or missing data for uniform "'+c+'"',e.commandStr);a.value=b;k[c]=a});b(a).forEach(function(c){var e=a[c];k[c]=m(e,function(c,b){return c.invoke(b,e)})});return k}function ha(c,e){var d=c["static"],k=c.dynamic,g={};b(d).forEach(function(c){var k=d[c],n=B.id(c),y=new ya;if(a(k))y.state=1,y.buffer=F.getBuffer(F.create(k,34962,!1,!0)),y.type=0;else{var m=F.getBuffer(k);if(m)y.state=1,
y.buffer=m,y.type=0;else if(f.command("object"===typeof k&&k,"invalid data for attribute "+c,e.commandStr),"constant"in k){var C=k.constant;y.buffer="null";y.state=2;"number"===typeof C?y.x=C:(f.command(l(C)&&0<C.length&&4>=C.length,"invalid constant for attribute "+c,e.commandStr),w.forEach(function(c,e){e<C.length&&(y[c]=C[e])}))}else{m=a(k.buffer)?F.getBuffer(F.create(k.buffer,34962,!1,!0)):F.getBuffer(k.buffer);f.command(!!m,'missing buffer for attribute "'+c+'"',e.commandStr);var z=k.offset|
0;f.command(0<=z,'invalid offset for attribute "'+c+'"',e.commandStr);var x=k.stride|0;f.command(0<=x&&256>x,'invalid stride for attribute "'+c+'", must be integer betweeen [0, 255]',e.commandStr);var u=k.size|0;f.command(!("size"in k)||0<u&&4>=u,'invalid size for attribute "'+c+'", must be 1,2,3,4',e.commandStr);var D=!!k.normalized,t=0;"type"in k&&(f.commandParameter(k.type,p,"invalid type for attribute "+c,e.commandStr),t=p[k.type]);var v=k.divisor|0;f.optional(function(){"divisor"in k&&(f.command(0===
v||qa,'cannot specify divisor for attribute "'+c+'", instancing not supported',e.commandStr),f.command(0<=v,'invalid divisor for attribute "'+c+'"',e.commandStr));var l=e.commandStr,d="buffer offset divisor normalized type size stride".split(" ");b(k).forEach(function(e){f.command(0<=d.indexOf(e),'unknown parameter "'+e+'" for attribute pointer "'+c+'" (valid parameters are '+d+")",l)})});y.buffer=m;y.state=1;y.size=u;y.normalized=D;y.type=t||m.dtype;y.offset=z;y.stride=x;y.divisor=v}}g[c]=q(function(c,
e){var l=c.attribCache;if(n in l)return l[n];var d={isStream:!1};b(y).forEach(function(c){d[c]=y[c]});y.buffer&&(d.buffer=c.link(y.buffer),d.type=d.type||d.buffer+".dtype");return l[n]=d})});b(k).forEach(function(c){var e=k[c];g[c]=m(e,function(l,d){function a(c){d(m[c],"=",k,".",c,"|0;")}var k=l.invoke(d,e),g=l.shared,n=l.constants,p=g.isBufferArgs,y=g.buffer;f.optional(function(){l.assert(d,k+"&&(typeof "+k+'==="object"||typeof '+k+'==="function")&&('+p+"("+k+")||"+y+".getBuffer("+k+")||"+y+".getBuffer("+
k+".buffer)||"+p+"("+k+'.buffer)||("constant" in '+k+"&&(typeof "+k+'.constant==="number"||'+g.isArrayLike+"("+k+".constant))))",'invalid dynamic attribute "'+c+'"')});var m={isStream:d.def(!1)},C=new ya;C.state=1;b(C).forEach(function(c){m[c]=d.def(""+C[c])});var B=m.buffer,z=m.type;d("if(",p,"(",k,")){",m.isStream,"=true;",B,"=",y,".createStream(",34962,",",k,");",z,"=",B,".dtype;","}else{",B,"=",y,".getBuffer(",k,");","if(",B,"){",z,"=",B,".dtype;",'}else if("constant" in ',k,"){",m.state,"=",
2,";","if(typeof "+k+'.constant === "number"){',m[w[0]],"=",k,".constant;",w.slice(1).map(function(c){return m[c]}).join("="),"=0;","}else{",w.map(function(c,e){return m[c]+"="+k+".constant.length>"+e+"?"+k+".constant["+e+"]:0;"}).join(""),"}}else{","if(",p,"(",k,".buffer)){",B,"=",y,".createStream(",34962,",",k,".buffer);","}else{",B,"=",y,".getBuffer(",k,".buffer);","}",z,'="type" in ',k,"?",n.glTypes,"[",k,".type]:",B,".dtype;",m.normalized,"=!!",k,".normalized;");a("size");a("offset");a("stride");
a("divisor");d("}}");d.exit("if(",m.isStream,"){",y,".destroyStream(",B,");","}");return m})});return g}function Ba(c){var e=c["static"],l=c.dynamic,d={};b(e).forEach(function(c){var b=e[c];d[c]=q(function(c,e){return"number"===typeof b||"boolean"===typeof b?""+b:c.link(b)})});b(l).forEach(function(c){var e=l[c];d[c]=m(e,function(c,b){return c.invoke(b,e)})});return d}function wa(c,e,l,d,k){function a(c){var e=y[c];e&&(C[c]=e)}var g=c["static"],n=c.dynamic;f.optional(function(){function c(l){b(l).forEach(function(c){f.command(0<=
e.indexOf(c),'unknown parameter "'+c+'"',k.commandStr)})}var e="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);c(g);c(n)});var p=J(c,e),w=ra(c,k),y=pa(c,w,k),m=ba(c,k),C=W(c,k),B=K(c,k,p);a("viewport");a(O("scissor.box"));var z=0<b(C).length,w={framebuffer:w,draw:m,shader:B,state:C,dirty:z,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};w.profile=Q(c,k);w.uniforms=la(l,k);w.drawVAO=w.scopeVAO=m.vao;if(!w.drawVAO&&B.program&&!p&&h.angle_instanced_arrays&&
m["static"].elements){var x=!0;c=B.program.attributes.map(function(c){c=e["static"][c];x=x&&!!c;return c});if(x&&0<c.length){var u=L.getVAO(L.createVAO({attributes:c,elements:m["static"].elements}));w.drawVAO=new T(null,null,null,function(c,e){return c.link(u)});w.useVAO=!0}}p?w.useVAO=!0:w.attributes=ha(e,k);w.context=Ba(d,k);return w}function da(c,e,l){var d=c.shared.context,k=c.scope();b(l).forEach(function(b){e.save(d,"."+b);var a=l[b].append(c,e);Array.isArray(a)?k(d,".",b,"=[",a.join(),"];"):
k(d,".",b,"=",a,";")});e(k)}function xa(c,e,b,l){var d=c.shared,k=d.gl,a=d.framebuffer,f;za&&(f=e.def(d.extensions,".webgl_draw_buffers"));var g=c.constants,d=g.drawBuffer,g=g.backBuffer;c=b?b.append(c,e):e.def(a,".next");l||e("if(",c,"!==",a,".cur){");e("if(",c,"){",k,".bindFramebuffer(",36160,",",c,".framebuffer);");za&&e(f,".drawBuffersWEBGL(",d,"[",c,".colorAttachments.length]);");e("}else{",k,".bindFramebuffer(",36160,",null);");za&&e(f,".drawBuffersWEBGL(",g,");");e("}",a,".cur=",c,";");l||
e("}")}function ka(c,e,l){var d=c.shared,k=d.gl,a=c.current,f=c.next,g=d.current,n=d.next,p=c.cond(g,".dirty");ua.forEach(function(e){e=O(e);if(!(e in l.state)){var b,d;if(e in f){b=f[e];d=a[e];var w=z(ja[e].length,function(c){return p.def(b,"[",c,"]")});p(c.cond(w.map(function(c,e){return c+"!=="+d+"["+e+"]"}).join("||")).then(k,".",Fa[e],"(",w,");",w.map(function(c,e){return d+"["+e+"]="+c}).join(";"),";"))}else b=p.def(n,".",e),w=c.cond(b,"!==",g,".",e),p(w),e in Ka?w(c.cond(b).then(k,".enable(",
Ka[e],");")["else"](k,".disable(",Ka[e],");"),g,".",e,"=",b,";"):w(k,".",Fa[e],"(",b,");",g,".",e,"=",b,";")}});0===b(l.state).length&&p(g,".dirty=false;");e(p)}function oa(c,e,k,a){var f=c.shared,g=c.current,n=f.current,p=f.gl;d(b(k)).forEach(function(b){var d=k[b];if(!a||a(d)){var f=d.append(c,e);if(Ka[b]){var w=Ka[b];u(d)?f?e(p,".enable(",w,");"):e(p,".disable(",w,");"):e(c.cond(f).then(p,".enable(",w,");")["else"](p,".disable(",w,");"));e(n,".",b,"=",f,";")}else if(l(f)){var y=g[b];e(p,".",Fa[b],
"(",f,");",f.map(function(c,e){return y+"["+e+"]="+c}).join(";"),";")}else e(p,".",Fa[b],"(",f,");",n,".",b,"=",f,";")}})}function Aa(c,e){qa&&(c.instancing=e.def(c.shared.extensions,".angle_instanced_arrays"))}function Qa(c,e,b,l,d){function k(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function f(c){m=e.def();c(m,"=",k(),";");"string"===typeof d?c(p,".count+=",d,";"):c(p,".count++;");V&&(l?(C=e.def(),c(C,"=",y,".getNumPendingQueries();")):c(y,".beginQuery(",p,");"))}
function a(c){c(p,".cpuTime+=",k(),"-",m,";");V&&(l?c(y,".pushScopeStats(",C,",",y,".getNumPendingQueries(),",p,");"):c(y,".endQuery();"))}function g(c){var b=e.def(w,".profile");e(w,".profile=",c,";");e.exit(w,".profile=",b,";")}var n=c.shared,p=c.stats,w=n.current,y=n.timer;b=b.profile;var m,C;if(b){if(u(b)){b.enable?(f(e),a(e.exit),g("true")):g("false");return}b=b.append(c,e);g(b)}else b=e.def(w,".profile");n=c.block();f(n);e("if(",b,"){",n,"}");c=c.block();a(c);e.exit("if(",b,"){",c,"}")}function Ja(c,
e,l,d,k){function a(c){switch(c){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(b,l,d){function k(){e("if(!",y,".buffer){",a,".enableVertexAttribArray(",p,");}");var b=d.type,f;f=d.size?e.def(d.size,"||",l):l;e("if(",y,".type!==",b,"||",y,".size!==",f,"||",B.map(function(c){return y+"."+c+"!=="+d[c]}).join("||"),"){",a,".bindBuffer(",34962,",",m,".buffer);",a,".vertexAttribPointer(",[p,f,b,
d.normalized,d.stride,d.offset],");",y,".type=",b,";",y,".size=",f,";",B.map(function(c){return y+"."+c+"="+d[c]+";"}).join(""),"}");qa&&(b=d.divisor,e("if(",y,".divisor!==",b,"){",c.instancing,".vertexAttribDivisorANGLE(",[p,b],");",y,".divisor=",b,";}"))}function f(){e("if(",y,".buffer){",a,".disableVertexAttribArray(",p,");",y,".buffer=null;","}if(",w.map(function(c,e){return y+"."+c+"!=="+C[e]}).join("||"),"){",a,".vertexAttrib4f(",p,",",C,");",w.map(function(c,e){return y+"."+c+"="+C[e]+";"}).join(""),
"}")}var a=n.gl,p=e.def(b,".location"),y=e.def(n.attributes,"[",p,"]");b=d.state;var m=d.buffer,C=[d.x,d.y,d.z,d.w],B=["buffer","normalized","offset","stride"];1===b?k():2===b?f():(e("if(",b,"===",1,"){"),k(),e("}else{"),f(),e("}"))}var n=c.shared;d.forEach(function(d){var n=d.name,p=l.attributes[n],w;if(p){if(!k(p))return;w=p.append(c,e)}else{if(!k(aa))return;var y=c.scopeAttrib(n);f.optional(function(){c.assert(e,y+".state","missing attribute "+n)});w={};b(new ya).forEach(function(c){w[c]=e.def(y,
".",c)})}g(c.link(d),a(d.info.type),w)})}function Zb(c,e,b,d,k,a){for(var g=c.shared,n=g.gl,p,w=0;w<d.length;++w){var y=d[w],m=y.name,C=y.info.type,x=b.uniforms[m],y=c.link(y)+".location",D;if(x){if(!k(x))continue;if(u(x)){var q=x.value;f.command(null!==q&&"undefined"!==typeof q,'missing uniform "'+m+'"',c.commandStr);if(35678===C||35680===C)f.command("function"===typeof q&&(35678===C&&("texture2d"===q._reglType||"framebuffer"===q._reglType)||35680===C&&("textureCube"===q._reglType||"framebufferCube"===
q._reglType)),"invalid texture for uniform "+m,c.commandStr),x=c.link(q._texture||q.color[0]._texture),e(n,".uniform1i(",y,",",x+".bind());"),e.exit(x,".unbind();");else if(35674===C||35675===C||35676===C){f.optional(function(){f.command(l(q),"invalid matrix for uniform "+m,c.commandStr);f.command(35674===C&&4===q.length||35675===C&&9===q.length||35676===C&&16===q.length,"invalid length for matrix uniform "+m,c.commandStr)});var x=c.global.def("new Float32Array(["+Array.prototype.slice.call(q)+"])"),
t=2;35675===C?t=3:35676===C&&(t=4);e(n,".uniformMatrix",t,"fv(",y,",false,",x,");")}else{switch(C){case 5126:f.commandType(q,"number","uniform "+m,c.commandStr);p="1f";break;case 35664:f.command(l(q)&&2===q.length,"uniform "+m,c.commandStr);p="2f";break;case 35665:f.command(l(q)&&3===q.length,"uniform "+m,c.commandStr);p="3f";break;case 35666:f.command(l(q)&&4===q.length,"uniform "+m,c.commandStr);p="4f";break;case 35670:f.commandType(q,"boolean","uniform "+m,c.commandStr);p="1i";break;case 5124:f.commandType(q,
"number","uniform "+m,c.commandStr);p="1i";break;case 35671:f.command(l(q)&&2===q.length,"uniform "+m,c.commandStr);p="2i";break;case 35667:f.command(l(q)&&2===q.length,"uniform "+m,c.commandStr);p="2i";break;case 35672:f.command(l(q)&&3===q.length,"uniform "+m,c.commandStr);p="3i";break;case 35668:f.command(l(q)&&3===q.length,"uniform "+m,c.commandStr);p="3i";break;case 35673:f.command(l(q)&&4===q.length,"uniform "+m,c.commandStr);p="4i";break;case 35669:f.command(l(q)&&4===q.length,"uniform "+m,
c.commandStr),p="4i"}e(n,".uniform",p,"(",y,",",l(q)?Array.prototype.slice.call(q):q,");")}continue}else D=x.append(c,e)}else{if(!k(aa))continue;D=e.def(g.uniforms,"[",B.id(m),"]")}35678===C?(f(!Array.isArray(D),"must specify a scalar prop for textures"),e("if(",D,"&&",D,'._reglType==="framebuffer"){',D,"=",D,".color[0];","}")):35680===C&&(f(!Array.isArray(D),"must specify a scalar prop for cube maps"),e("if(",D,"&&",D,'._reglType==="framebufferCube"){',D,"=",D,".color[0];","}"));f.optional(function(){function b(l,
d){c.assert(e,l,'bad data or missing for uniform "'+m+'".  '+d)}function l(c){f(!Array.isArray(D),"must not specify an array type for uniform");b("typeof "+D+'==="'+c+'"',"invalid type, expected "+c)}function d(e,l){Array.isArray(D)?f(D.length===e,"must have length "+e):b(g.isArrayLike+"("+D+")&&"+D+".length==="+e,"invalid vector, should have length "+e,c.commandStr)}function k(e){f(!Array.isArray(D),"must not specify a value type");b("typeof "+D+'==="function"&&'+D+'._reglType==="texture'+(3553===
e?"2d":"Cube")+'"',"invalid texture type",c.commandStr)}switch(C){case 5124:l("number");break;case 35667:d(2,"number");break;case 35668:d(3,"number");break;case 35669:d(4,"number");break;case 5126:l("number");break;case 35664:d(2,"number");break;case 35665:d(3,"number");break;case 35666:d(4,"number");break;case 35670:l("boolean");break;case 35671:d(2,"boolean");break;case 35672:d(3,"boolean");break;case 35673:d(4,"boolean");break;case 35674:d(4,"number");break;case 35675:d(9,"number");break;case 35676:d(16,
"number");break;case 35678:k(3553);break;case 35680:k(34067)}});x=1;switch(C){case 35678:case 35680:x=e.def(D,"._texture");e(n,".uniform1i(",y,",",x,".bind());");e.exit(x,".unbind();");continue;case 5124:case 35670:p="1i";break;case 35667:case 35671:p="2i";x=2;break;case 35668:case 35672:p="3i";x=3;break;case 35669:case 35673:p="4i";x=4;break;case 5126:p="1f";break;case 35664:p="2f";x=2;break;case 35665:p="3f";x=3;break;case 35666:p="4f";x=4;break;case 35674:p="Matrix2fv";break;case 35675:p="Matrix3fv";
break;case 35676:p="Matrix4fv"}if("M"===p.charAt(0)){e(n,".uniform",p,"(",y,",");var y=Math.pow(C-35674+2,2),v=c.global.def("new Float32Array(",y,")");Array.isArray(D)?e("false,(",z(y,function(c){return v+"["+c+"]="+D[c]}),",",v,")"):e("false,(Array.isArray(",D,")||",D," instanceof Float32Array)?",D,":(",z(y,function(c){return v+"["+c+"]="+D+"["+c+"]"}),",",v,")");e(");")}else{if(1<x){for(var t=[],N=[],J=0;J<x;++J)Array.isArray(D)?N.push(D[J]):N.push(e.def(D+"["+J+"]")),a&&t.push(e.def());a&&e("if(!",
c.batchId,"||",t.map(function(c,e){return c+"!=="+N[e]}).join("||"),"){",t.map(function(c,e){return c+"="+N[e]+";"}).join(""));e(n,".uniform",p,"(",y,",",N.join(","),");")}else f(!Array.isArray(D),"uniform value must not be an array"),a&&(x=e.def(),e("if(!",c.batchId,"||",x,"!==",D,"){",x,"=",D,";")),e(n,".uniform",p,"(",y,",",D,");");a&&e("}")}}}function Ua(c,e,b,l){function d(k){var a=w[k];return a?a.contextDep&&l.contextDynamic||a.propDep?a.append(c,b):a.append(c,e):e.def(p,".",k)}function k(){function c(){b(z,
".drawElementsInstancedANGLE(",[m,B,D,C+"<<(("+D+"-5121)>>1)",x],");")}function e(){b(z,".drawArraysInstancedANGLE(",[m,C,B,x],");")}y&&"null"!==y?q?c():(b("if(",y,"){"),c(),b("}else{"),e(),b("}")):e()}function a(){function c(){b(n+".drawElements("+[m,B,D,C+"<<(("+D+"-5121)>>1)"]+");")}function e(){b(n+".drawArrays("+[m,C,B]+");")}y&&"null"!==y?q?c():(b("if(",y,"){"),c(),b("}else{"),e(),b("}")):e()}var g=c.shared,n=g.gl,p=g.draw,w=l.draw,y=function(){var d=w.elements,k=e;if(d){if(d.contextDep&&l.contextDynamic||
d.propDep)k=b;d=d.append(c,k);w.elementsActive&&k("if("+d+")"+n+".bindBuffer(34963,"+d+".buffer.buffer);")}else d=k.def(),k(d,"=",p,".","elements",";","if(",d,"){",n,".bindBuffer(",34963,",",d,".buffer.buffer);}","else if(",g.vao,".currentVAO){",d,"=",c.shared.elements+".getElements("+g.vao,".currentVAO.elements);",Ca?"":"if("+d+")"+n+".bindBuffer(34963,"+d+".buffer.buffer);","}");return d}(),m=d("primitive"),C=d("offset"),B=function(){var d=w.count,k,a=e;if(d){if(d.contextDep&&l.contextDynamic||
d.propDep)a=b;k=d.append(c,a);f.optional(function(){d.MISSING&&c.assert(e,"false","missing vertex count");d.DYNAMIC&&c.assert(a,k+">=0","missing vertex count")})}else k=a.def(p,".","count"),f.optional(function(){c.assert(a,k+">=0","missing vertex count")});return k}();if("number"===typeof B){if(0===B)return}else b("if(",B,"){"),b.exit("}");var x,z;qa&&(x=d("instances"),z=c.instancing);var D=y+".type",q=w.elements&&u(w.elements)&&!w.vaoActive;qa&&("number"!==typeof x||0<=x)?"string"===typeof x?(b("if(",
x,">0){"),k(),b("}else if(",x,"<0){"),a(),b("}")):k():a()}function ia(c,e,b,l,d){var k=P();d=k.proc("body",d);f.optional(function(){k.commandStr=e.commandStr;k.command=k.link(e.commandStr)});qa&&(k.instancing=d.def(k.shared.extensions,".angle_instanced_arrays"));c(k,d,b,l);return k.compile().body}function fa(c,e,b,l){Aa(c,e);b.useVAO?b.drawVAO?e(c.shared.vao,".setVAO(",b.drawVAO.append(c,e),");"):e(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(e(c.shared.vao,".setVAO(null);"),Ja(c,e,b,l.attributes,
function(){return!0}));Zb(c,e,b,l.uniforms,function(){return!0},!1);Ua(c,e,e,b)}function sa(c,e){var l=c.proc("draw",1);Aa(c,l);da(c,l,e.context);xa(c,l,e.framebuffer);ka(c,l,e);oa(c,l,e.state);Qa(c,l,e,!1,!0);var d=e.shader.progVar.append(c,l);l(c.shared.gl,".useProgram(",d,".program);");if(e.shader.program)fa(c,l,e,e.shader.program);else{l(c.shared.vao,".setVAO(null);");var k=c.global.def("{}"),a=l.def(d,".id"),f=l.def(k,"[",a,"]");l(c.cond(f).then(f,".call(this,a0);")["else"](f,"=",k,"[",a,"]=",
c.link(function(b){return ia(fa,c,e,b,1)}),"(",d,");",f,".call(this,a0);"))}0<b(e.state).length&&l(c.shared.current,".dirty=true;");c.shared.vao&&l(c.shared.vao,".setVAO(null);")}function va(c,e,b,l){function d(){return!0}c.batchId="a1";Aa(c,e);Ja(c,e,b,l.attributes,d);Zb(c,e,b,l.uniforms,d,!1);Ua(c,e,e,b)}function Da(c,e,b,l){function d(c){return c.contextDep&&a||c.propDep}function k(c){return!d(c)}Aa(c,e);var a=b.contextDep,f=e.def(),g=e.def();c.shared.props=g;c.batchId=f;var n=c.scope(),p=c.scope();
e(n.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",g,"=","a0","[",f,"];",p,"}",n.exit);b.needsContext&&da(c,p,b.context);b.needsFramebuffer&&xa(c,p,b.framebuffer);oa(c,p,b.state,d);b.profile&&d(b.profile)&&Qa(c,p,b,!1,!0);l?(b.useVAO?b.drawVAO?d(b.drawVAO)?p(c.shared.vao,".setVAO(",b.drawVAO.append(c,p),");"):n(c.shared.vao,".setVAO(",b.drawVAO.append(c,n),");"):n(c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);"):(n(c.shared.vao,".setVAO(null);"),Ja(c,n,b,l.attributes,k),Ja(c,p,b,l.attributes,d)),
Zb(c,n,b,l.uniforms,k,!1),Zb(c,p,b,l.uniforms,d,!0),Ua(c,n,p,b)):(e=c.global.def("{}"),l=b.shader.progVar.append(c,p),g=p.def(l,".id"),n=p.def(e,"[",g,"]"),p(c.shared.gl,".useProgram(",l,".program);","if(!",n,"){",n,"=",e,"[",g,"]=",c.link(function(e){return ia(va,c,b,e,2)}),"(",l,");}",n,".call(this,a0[",f,"],",f,");"))}function G(c,e){function l(c){return c.contextDep&&k||c.propDep}var d=c.proc("batch",2);c.batchId="0";Aa(c,d);var k=!1,a=!0;b(e.context).forEach(function(c){k=k||e.context[c].propDep});
k||(da(c,d,e.context),a=!1);var f=e.framebuffer,g=!1;f?(f.propDep?k=g=!0:f.contextDep&&k&&(g=!0),g||xa(c,d,f)):xa(c,d,null);e.state.viewport&&e.state.viewport.propDep&&(k=!0);ka(c,d,e);oa(c,d,e.state,function(c){return!l(c)});e.profile&&l(e.profile)||Qa(c,d,e,!1,"a1");e.contextDep=k;e.needsContext=a;e.needsFramebuffer=g;a=e.shader.progVar;if(a.contextDep&&k||a.propDep)Da(c,d,e,null);else if(a=a.append(c,d),d(c.shared.gl,".useProgram(",a,".program);"),e.shader.program)Da(c,d,e,e.shader.program);else{d(c.shared.vao,
".setVAO(null);");var f=c.global.def("{}"),g=d.def(a,".id"),n=d.def(f,"[",g,"]");d(c.cond(n).then(n,".call(this,a0,a1);")["else"](n,"=",f,"[",g,"]=",c.link(function(b){return ia(Da,c,e,b,2)}),"(",a,");",n,".call(this,a0,a1);"))}0<b(e.state).length&&d(c.shared.current,".dirty=true;");c.shared.vao&&d(c.shared.vao,".setVAO(null);")}function Gb(c,e){function k(b){var l=e.shader[b];l&&a.set(f.shader,"."+b,l.append(c,a))}var a=c.proc("scope",3);c.batchId="a2";var f=c.shared,g=f.current;da(c,a,e.context);
e.framebuffer&&e.framebuffer.append(c,a);d(b(e.state)).forEach(function(b){var d=e.state[b].append(c,a);l(d)?d.forEach(function(e,l){a.set(c.next[b],"["+l+"]",e)}):a.set(f.next,"."+b,d)});Qa(c,a,e,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var l=e.draw[b];l&&a.set(f.draw,"."+b,""+l.append(c,a))});b(e.uniforms).forEach(function(b){var l=e.uniforms[b].append(c,a);Array.isArray(l)&&(l="["+l.join()+"]");a.set(f.uniforms,"["+B.id(b)+"]",l)});b(e.attributes).forEach(function(l){var d=
e.attributes[l].append(c,a),k=c.scopeAttrib(l);b(new ya).forEach(function(c){a.set(k,"."+c,d[c])})});e.scopeVAO&&a.set(f.vao,".targetVAO",e.scopeVAO.append(c,a));k("vert");k("frag");0<b(e.state).length&&(a(g,".dirty=true;"),a.exit(g,".dirty=true;"));a("a1(",c.shared.context,",a0,",c.batchId,");")}function Z(c){if("object"===typeof c&&!l(c)){for(var e=b(c),d=0;d<e.length;++d)if(g.isDynamic(c[e[d]]))return!0;return!1}}function U(c,e,l){function d(c,e){f.forEach(function(b){var l=k[b];g.isDynamic(l)&&
(l=c.invoke(e,l),e(y,".",b,"=",l,";"))})}var k=e["static"][l];if(k&&Z(k)){var a=c.global,f=b(k),n=!1,p=!1,w=!1,y=c.global.def("{}");f.forEach(function(e){var b=k[e];if(g.isDynamic(b))"function"===typeof b&&(b=k[e]=g.unbox(b)),e=m(b,null),n=n||e.thisDep,w=w||e.propDep,p=p||e.contextDep;else{a(y,".",e,"=");switch(typeof b){case "number":a(b);break;case "string":a('"',b,'"');break;case "object":Array.isArray(b)&&a("[",b.join(),"]");break;default:a(c.link(b))}a(";")}});e.dynamic[l]=new g.DynamicVariable(4,
{thisDep:n,contextDep:p,propDep:w,ref:y,append:d});delete e["static"][l]}}var ya=L.Record,Ga={add:32774,subtract:32778,"reverse subtract":32779};h.ext_blend_minmax&&(Ga.min=32775,Ga.max=32776);var qa=h.angle_instanced_arrays,za=h.webgl_draw_buffers,Ca=h.oes_vertex_array_object,ja={dirty:!0,profile:R.profile},X={},ua=[],Ka={},Fa={};M("dither",3024);M("blend.enable",3042);N("blend.color","blendColor",[0,0,0,0]);N("blend.equation","blendEquationSeparate",[32774,32774]);N("blend.func","blendFuncSeparate",
[1,0,1,0]);M("depth.enable",2929,!0);N("depth.func","depthFunc",513);N("depth.range","depthRange",[0,1]);N("depth.mask","depthMask",!0);N("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);N("cull.face","cullFace",1029);N("frontFace","frontFace",2305);N("lineWidth","lineWidth",1);M("polygonOffset.enable",32823);N("polygonOffset.offset","polygonOffset",[0,0]);M("sample.alpha",32926);M("sample.enable",32928);N("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",2960);N("stencil.mask",
"stencilMask",-1);N("stencil.func","stencilFunc",[519,0,-1]);N("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);N("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);N("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);N("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var fb={gl:e,context:S,strings:B,next:X,current:ja,draw:ta,elements:D,buffer:F,shader:ma,attributes:L.state,vao:L,uniforms:r,framebuffer:t,extensions:h,
timer:V,isBufferArgs:a},Y={primTypes:n,compareFuncs:x,blendFuncs:C,blendEquations:Ga,stencilOps:v,glTypes:p,orientationType:I};f.optional(function(){fb.isArrayLike=l});za&&(Y.backBuffer=[1029],Y.drawBuffer=z(H.maxDrawbuffers,function(c){return 0===c?[0]:z(c,function(c){return 36064+c})}));var Kc=0;return{next:X,current:ja,procs:function(){var c=P(),e=c.proc("poll"),d=c.proc("refresh"),k=c.block();e(k);d(k);var a=c.shared,f=a.gl,g=a.next,n=a.current;k(n,".dirty=false;");xa(c,e);xa(c,d,null,!0);var p;
qa&&(p=c.link(qa));h.oes_vertex_array_object&&d(c.link(h.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var w=0;w<H.maxAttributes;++w){var y=d.def(a.attributes,"[",w,"]"),m=c.cond(y,".buffer");m.then(f,".enableVertexAttribArray(",w,");",f,".bindBuffer(",34962,",",y,".buffer.buffer);",f,".vertexAttribPointer(",w,",",y,".size,",y,".type,",y,".normalized,",y,".stride,",y,".offset);")["else"](f,".disableVertexAttribArray(",w,");",f,".vertexAttrib4f(",w,",",y,".x,",y,".y,",y,".z,",y,".w);",
y,".buffer=null;");d(m);qa&&d(p,".vertexAttribDivisorANGLE(",w,",",y,".divisor);")}d(c.shared.vao,".currentVAO=null;",c.shared.vao,".setVAO(",c.shared.vao,".targetVAO);");b(Ka).forEach(function(b){var l=Ka[b],a=k.def(g,".",b),p=c.block();p("if(",a,"){",f,".enable(",l,")}else{",f,".disable(",l,")}",n,".",b,"=",a,";");d(p);e("if(",a,"!==",n,".",b,"){",p,"}")});b(Fa).forEach(function(b){var a=Fa[b],p=ja[b],w,y,m=c.block();m(f,".",a,"(");l(p)?(a=p.length,w=c.global.def(g,".",b),y=c.global.def(n,".",b),
m(z(a,function(c){return w+"["+c+"]"}),");",z(a,function(c){return y+"["+c+"]="+w+"["+c+"];"}).join("")),e("if(",z(a,function(c){return w+"["+c+"]!=="+y+"["+c+"]"}).join("||"),"){",m,"}")):(w=k.def(g,".",b),y=k.def(n,".",b),m(w,");",n,".",b,"=",w,";"),e("if(",w,"!==",y,"){",m,"}"));d(m)});return c.compile()}(),compile:function(e,l,d,k,a){var f=P();f.stats=f.link(a);b(l["static"]).forEach(function(c){U(f,l,c)});y.forEach(function(c){U(f,e,c)});var g=wa(e,l,d,k,f);sa(f,g);Gb(f,g);G(f,g);return c(f.compile(),
{destroy:function(){g.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(h,r,G){function a(b,d){this.id=m++;this.type=b;this.data=d}function d(b){if(0===b.length)return[];var a=b.charAt(0),c=b.charAt(b.length-1);if(1<b.length&&a===c&&('"'===a||"'"===
a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return d(b.substr(0,a.index)).concat(d(a[1])).concat(d(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];b=[];for(c=0;c<a.length;++c)b=b.concat(d(a[c]));return b}function T(b){return"["+d(b).join("][")+"]"}function u(b,d){if("function"===typeof b)return new a(0,b);if("number"===typeof b||
"boolean"===typeof b)return new a(5,b);if(Array.isArray(b))return new a(6,b.map(function(c,b){return u(c,d+"["+b+"]")}));if(b instanceof a)return b;q(!1,"invalid option type in uniform "+d)}var q=h("./util/check"),m=0;r.exports={DynamicVariable:a,define:function(b,d){return new a(b,T(d+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:u,accessor:T}},{"./util/check":21}],10:[function(h,r,G){var a=h("./util/check"),d=h("./util/is-typed-array"),T=h("./util/is-ndarray"),
u=h("./util/values"),q=h("./constants/primitives.json"),m=h("./constants/usage.json");r.exports=function(b,f,c,k){function z(c){this.id=g++;l[this.id]=this;this.buffer=c;this.primType=4;this.type=this.vertCount=0}function B(e,l,k,g,n,p,m){e.buffer.bind();var B;l?((B=m)||d(l)&&(!T(l)||d(l.data))||(B=f.oes_element_index_uint?5125:5123),c._initBuffer(e.buffer,l,k,B,3)):(b.bufferData(34963,p,k),e.buffer.dtype=B||5121,e.buffer.usage=k,e.buffer.dimension=3,e.buffer.byteLength=p);B=m;if(!m){switch(e.buffer.dtype){case 5121:case 5120:B=
5121;break;case 5123:case 5122:B=5123;break;case 5125:case 5124:B=5125;break;default:a.raise("unsupported type for element array")}e.buffer.dtype=B}e.type=B;a(5125!==B||!!f.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");l=n;0>l&&(l=e.buffer.byteLength,5123===B?l>>=1:5125===B&&(l>>=2));e.vertCount=l;l=g;0>g&&(l=4,g=e.buffer.dimension,1===g&&(l=0),2===g&&(l=1),3===g&&(l=4));e.primType=l}function e(c){k.elementsCount--;a(null!==c.buffer,"must not double destroy elements");
delete l[c.id];c.buffer.destroy();c.buffer=null}var l={},g=0,n={uint8:5121,uint16:5123};f.oes_element_index_uint&&(n.uint32=5125);z.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:function(b,l){function f(c){if(c)if("number"===typeof c)g(c),p.primType=4,p.vertCount=c|0,p.type=5121;else{var e=null,b=35044,l=-1,k=-1,w=0,y=0;if(Array.isArray(c)||d(c)||T(c))e=c;else if(a.type(c,"object","invalid arguments for elements"),"data"in c&&(e=c.data,a(Array.isArray(e)||d(e)||T(e),"invalid data for element buffer")),
"usage"in c&&(a.parameter(c.usage,m,"invalid element buffer usage"),b=m[c.usage]),"primitive"in c&&(a.parameter(c.primitive,q,"invalid element buffer primitive"),l=q[c.primitive]),"count"in c&&(a("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),k=c.count|0),"type"in c&&(a.parameter(c.type,n,"invalid buffer type"),y=n[c.type]),"length"in c)w=c.length|0;else if(w=k,5123===y||5122===y)w*=2;else if(5125===y||5124===y)w*=4;B(p,e,b,l,k,w,y)}else g(),p.primType=4,p.vertCount=0,
p.type=5121;return f}var g=c.create(null,34963,!0),p=new z(g._buffer);k.elementsCount++;f(b);f._reglType="elements";f._elements=p;f.subdata=function(c,e){g.subdata(c,e);return f};f.destroy=function(){e(p)};return f},createStream:function(e){var b=p.pop();b||(b=new z(c.create(null,34963,!0,!1)._buffer));B(b,e,35040,-1,-1,0,0);return b},destroyStream:function(c){p.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof z?c._elements:null},clear:function(){u(l).forEach(e)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(h,r,G){var a=h("./util/sorted-object-keys"),d=h("./util/check");r.exports=function(T,u){function q(c){d.type(c,"string","extension name must be string");c=c.toLowerCase();var b;try{b=m[c]=T.getExtension(c)}catch(a){}return!!b}for(var m={},b=0;b<u.extensions.length;++b){var f=u.extensions[b];if(!q(f))return u.onDestroy(),u.onDone('"'+f+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),
null}u.optionalExtensions.forEach(q);return{extensions:m,restore:function(){a(m).forEach(function(c){if(m[c]&&!q(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(h,r,G){var a=h("./util/check"),d=h("./util/values"),T=h("./util/extend"),u=[6407,6408],q=[];q[6408]=4;q[6407]=3;var m=[];m[5121]=1;m[5126]=4;m[36193]=2;var b=[32854,32855,36194,35907,34842,34843,34836],f={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",
36055:"incomplete, missing attachment",36061:"unsupported"};r.exports=function(c,k,z,B,e,l){function g(c,e,b){this.target=c;this.texture=e;this.renderbuffer=b;var l=c=0;e?(c=e.width,l=e.height):b&&(c=b.width,l=b.height);this.width=c;this.height=l}function n(c){c&&(c.texture&&c.texture._texture.decRef(),c.renderbuffer&&c.renderbuffer._renderbuffer.decRef())}function p(c,e,b){if(c){if(c.texture){c=c.texture._texture;var l=Math.max(1,c.height);a(Math.max(1,c.width)===e&&l===b,"inconsistent width/height for supplied texture")}else c=
c.renderbuffer._renderbuffer,a(c.width===e&&c.height===b,"inconsistent width/height for renderbuffer");c.refCount+=1}}function w(e,b){b&&(b.texture?c.framebufferTexture2D(36160,e,b.target,b.texture._texture.texture,0):c.framebufferRenderbuffer(36160,e,36161,b.renderbuffer._renderbuffer.renderbuffer))}function y(c){var e=3553,b=null,l=null,d=c;"object"===typeof c&&(d=c.data,"target"in c&&(e=c.target|0));a.type(d,"function","invalid attachment data");c=d._reglType;"texture2d"===c?(b=d,a(3553===e)):
"textureCube"===c?(b=d,a(34069<=e&&34075>e,"invalid cube map target")):"renderbuffer"===c?(l=d,e=36161):a.raise("invalid regl object for attachment");return new g(e,b,l)}function C(c,b,l,d,a){if(l)return c=B.create2D({width:c,height:b,format:d,type:a}),c._texture.refCount=0,new g(3553,c,null);c=e.create({width:c,height:b,format:d});c._renderbuffer.refCount=0;return new g(36161,null,c)}function h(c){return c&&(c.texture||c.renderbuffer)}function x(c,e,b){c&&(c.texture?c.texture.resize(e,b):c.renderbuffer&&
c.renderbuffer.resize(e,b),c.width=e,c.height=b)}function v(){this.id=D++;ga[this.id]=this;this.framebuffer=c.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function na(c){c.colorAttachments.forEach(n);n(c.depthAttachment);n(c.stencilAttachment);n(c.depthStencilAttachment)}function I(e){var b=e.framebuffer;a(b,"must not double destroy framebuffer");c.deleteFramebuffer(b);e.framebuffer=null;l.framebufferCount--;
delete ga[e.id]}function aa(e){var b;c.bindFramebuffer(36160,e.framebuffer);var l=e.colorAttachments;for(b=0;b<l.length;++b)w(36064+b,l[b]);for(b=l.length;b<z.maxColorAttachments;++b)c.framebufferTexture2D(36160,36064+b,3553,null,0);c.framebufferTexture2D(36160,33306,3553,null,0);c.framebufferTexture2D(36160,36096,3553,null,0);c.framebufferTexture2D(36160,36128,3553,null,0);w(36096,e.depthAttachment);w(36128,e.stencilAttachment);w(33306,e.depthStencilAttachment);e=c.checkFramebufferStatus(36160);
c.isContextLost()||36053===e||a.raise("framebuffer configuration not supported, status = "+f[e]);c.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;c.getError()}function E(c,e){function d(c,e){var l;a(A.next!==f,"can not update framebuffer which is currently in use");var g=0,n=0,w=!0,B=!0;l=null;var x=!0,D="rgba",t="uint8",v=1,J=null,T=null,I=null,E=!1;if("number"===typeof c)g=c|0,n=e|0||g;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(n=c.shape,a(Array.isArray(n)&&
2<=n.length,"invalid shape for framebuffer"),g=n[0],n=n[1]):("radius"in c&&(g=n=c.radius),"width"in c&&(g=c.width),"height"in c&&(n=c.height));if("color"in c||"colors"in c)l=c.color||c.colors,Array.isArray(l)&&a(1===l.length||k.webgl_draw_buffers,"multiple render targets not supported");if(!l){"colorCount"in c&&(v=c.colorCount|0,a(0<v,"invalid color buffer count"));"colorTexture"in c&&(x=!!c.colorTexture,D="rgba4");if("colorType"in c){t=c.colorType;if(x)a(k.oes_texture_float||!("float"===t||"float32"===
t),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(k.oes_texture_half_float||!("half float"===t||"float16"===t),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===t||"float16"===t)a(k.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),D="rgba16f";else if("float"===t||"float32"===t)a(k.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
D="rgba32f";a.oneOf(t,F,"invalid color type")}"colorFormat"in c&&(D=c.colorFormat,0<=r.indexOf(D)?x=!0:0<=H.indexOf(D)?x=!1:a.optional(function(){if(x)a.oneOf(c.colorFormat,r,"invalid color format for texture");else a.oneOf(c.colorFormat,H,"invalid color format for renderbuffer")}))}if("depthTexture"in c||"depthStencilTexture"in c)E=!(!c.depthTexture&&!c.depthStencilTexture),a(!E||k.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in c&&("boolean"===typeof c.depth?w=c.depth:
(J=c.depth,B=!1));"stencil"in c&&("boolean"===typeof c.stencil?B=c.stencil:(T=c.stencil,w=!1));"depthStencil"in c&&("boolean"===typeof c.depthStencil?w=B=c.depthStencil:(I=c.depthStencil,B=w=!1))}else g=n=1;var ga=null,ha=null,ea=null,wa=null;if(Array.isArray(l))ga=l.map(y);else if(l)ga=[y(l)];else for(ga=Array(v),l=0;l<v;++l)ga[l]=C(g,n,x,D,t);a(k.webgl_draw_buffers||1>=ga.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(ga.length<=z.maxColorAttachments,
"too many color attachments, not supported");g=g||ga[0].width;n=n||ga[0].height;J?ha=y(J):w&&!B&&(ha=C(g,n,E,"depth","uint32"));T?ea=y(T):B&&!w&&(ea=C(g,n,!1,"stencil","uint8"));I?wa=y(I):!J&&!T&&B&&w&&(wa=C(g,n,E,"depth stencil","depth stencil"));a(1>=!!J+!!T+!!I,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");w=null;for(l=0;l<ga.length;++l)p(ga[l],g,n),a(!ga[l]||ga[l].texture&&0<=u.indexOf(ga[l].texture._texture.format)||ga[l].renderbuffer&&0<=b.indexOf(ga[l].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+l+" is invalid"),ga[l]&&ga[l].texture&&(B=q[ga[l].texture._texture.format]*m[ga[l].texture._texture.type],null===w?w=B:a(w===B,"all color attachments much have the same number of bits per pixel."));p(ha,g,n);a(!ha||ha.texture&&6402===ha.texture._texture.format||ha.renderbuffer&&33189===ha.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");p(ea,g,n);a(!ea||ea.renderbuffer&&36168===ea.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
p(wa,g,n);a(!wa||wa.texture&&34041===wa.texture._texture.format||wa.renderbuffer&&34041===wa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");na(f);f.width=g;f.height=n;f.colorAttachments=ga;f.depthAttachment=ha;f.stencilAttachment=ea;f.depthStencilAttachment=wa;d.color=ga.map(h);d.depth=h(ha);d.stencil=h(ea);d.depthStencil=h(wa);d.width=f.width;d.height=f.height;aa(f);return d}var f=new v;l.framebufferCount++;d(c,e);return T(d,{resize:function(c,e){a(A.next!==
f,"can not resize a framebuffer which is currently in use");var b=Math.max(c|0,1),l=Math.max(e|0||b,1);if(b===f.width&&l===f.height)return d;for(var k=f.colorAttachments,g=0;g<k.length;++g)x(k[g],b,l);x(f.depthAttachment,b,l);x(f.stencilAttachment,b,l);x(f.depthStencilAttachment,b,l);f.width=d.width=b;f.height=d.height=l;aa(f);return d},_reglType:"framebuffer",_framebuffer:f,destroy:function(){I(f);na(f)},use:function(c){A.setFBO({framebuffer:d},c)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},
r=["rgba"],H=["rgba4","rgb565","rgb5 a1"];k.ext_srgb&&H.push("srgba");k.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");k.webgl_color_buffer_float&&H.push("rgba32f");var F=["uint8"];k.oes_texture_half_float&&F.push("half float","float16");k.oes_texture_float&&F.push("float","float32");var D=0,ga={};return T(A,{getFramebuffer:function(c){return"function"===typeof c&&"framebuffer"===c._reglType&&(c=c._framebuffer,c instanceof v)?c:null},create:E,createCube:function(c){function e(c){var l;a(0>
b.indexOf(A.next),"can not update framebuffer which is currently in use");var d={color:null},f=0,g=null;l="rgba";var n="uint8",p=1;if("number"===typeof c)f=c|0;else if(c){a.type(c,"object","invalid arguments for framebuffer");"shape"in c?(f=c.shape,a(Array.isArray(f)&&2<=f.length,"invalid shape for framebuffer"),a(f[0]===f[1],"cube framebuffer must be square"),f=f[0]):("radius"in c&&(f=c.radius|0),"width"in c?(f=c.width|0,"height"in c&&a(c.height===f,"must be square")):"height"in c&&(f=c.height|0));
if("color"in c||"colors"in c)g=c.color||c.colors,Array.isArray(g)&&a(1===g.length||k.webgl_draw_buffers,"multiple render targets not supported");g||("colorCount"in c&&(p=c.colorCount|0,a(0<p,"invalid color buffer count")),"colorType"in c&&(a.oneOf(c.colorType,F,"invalid color type"),n=c.colorType),"colorFormat"in c&&(l=c.colorFormat,a.oneOf(c.colorFormat,r,"invalid color format for texture")));"depth"in c&&(d.depth=c.depth);"stencil"in c&&(d.stencil=c.stencil);"depthStencil"in c&&(d.depthStencil=
c.depthStencil)}else f=1;if(g)if(Array.isArray(g))for(c=[],l=0;l<g.length;++l)c[l]=g[l];else c=[g];else for(c=Array(p),g={radius:f,format:l,type:n},l=0;l<p;++l)c[l]=B.createCube(g);d.color=Array(c.length);for(l=0;l<c.length;++l)p=c[l],a("function"===typeof p&&"textureCube"===p._reglType,"invalid cube map"),f=f||p.width,a(p.width===f&&p.height===f,"invalid cube map shape"),d.color[l]={target:34069,data:c[l]};for(l=0;6>l;++l){for(p=0;p<c.length;++p)d.color[p].target=34069+l;0<l&&(d.depth=b[0].depth,
d.stencil=b[0].stencil,d.depthStencil=b[0].depthStencil);if(b[l])b[l](d);else b[l]=E(d)}return T(e,{width:f,height:f,color:c})}var b=Array(6);e(c);return T(e,{faces:b,resize:function(c){var l=c|0;a(0<l&&l<=z.maxCubeMapSize,"invalid radius for cube fbo");if(l===e.width)return e;var d=e.color;for(c=0;c<d.length;++c)d[c].resize(l);for(c=0;6>c;++c)b[c].resize(l);e.width=e.height=l;return e},_reglType:"framebufferCube",destroy:function(){b.forEach(function(c){c.destroy()})}})},clear:function(){d(ga).forEach(I)},
restore:function(){A.cur=null;A.next=null;A.dirty=!0;d(ga).forEach(function(e){e.framebuffer=c.createFramebuffer();aa(e)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(h,r,G){var a=h("./util/sorted-object-keys"),d=h("./util/pool");r.exports=function(T,u){var q=1;u.ext_texture_filter_anisotropic&&(q=T.getParameter(34047));var m=1,b=1;u.webgl_draw_buffers&&(m=T.getParameter(34852),b=T.getParameter(36063));var f=!!u.oes_texture_float;if(f){f=T.createTexture();T.bindTexture(3553,
f);T.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var c=T.createFramebuffer();T.bindFramebuffer(36160,c);T.framebufferTexture2D(36160,36064,3553,f,0);T.bindTexture(3553,null);if(36053!==T.checkFramebufferStatus(36160))f=!1;else{T.viewport(0,0,1,1);T.clearColor(1,0,0,1);T.clear(16384);var k=d.allocType(5126,4);T.readPixels(0,0,1,1,6408,5126,k);T.getError()?f=!1:(T.deleteFramebuffer(c),T.deleteTexture(f),f=1===k[0]);d.freeType(k)}}k=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(k=T.createTexture(),c=d.allocType(5121,36),T.activeTexture(33984),T.bindTexture(34067,k),T.texImage2D(34069,0,6408,3,3,0,6408,5121,c),d.freeType(c),T.bindTexture(34067,null),T.deleteTexture(k),k=!T.getError());return{colorBits:[T.getParameter(3410),T.getParameter(3411),T.getParameter(3412),T.getParameter(3413)],depthBits:T.getParameter(3414),stencilBits:T.getParameter(3415),subpixelBits:T.getParameter(3408),extensions:a(u).filter(function(c){return!!u[c]}),
maxAnisotropic:q,maxDrawbuffers:m,maxColorAttachments:b,pointSizeDims:T.getParameter(33901),lineWidthDims:T.getParameter(33902),maxViewportDims:T.getParameter(3386),maxCombinedTextureUnits:T.getParameter(35661),maxCubeMapSize:T.getParameter(34076),maxRenderbufferSize:T.getParameter(34024),maxTextureUnits:T.getParameter(34930),maxTextureSize:T.getParameter(3379),maxAttributes:T.getParameter(34921),maxVertexUniforms:T.getParameter(36347),maxVertexTextureUnits:T.getParameter(35660),maxVaryingVectors:T.getParameter(36348),
maxFragmentUniforms:T.getParameter(36349),glsl:T.getParameter(35724),renderer:T.getParameter(7937),vendor:T.getParameter(7936),version:T.getParameter(7938),readFloat:f,npotTextureCube:k}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(h,r,G){var a=h("./util/check"),d=h("./util/is-typed-array");r.exports=function(T,u,q,m,b,f,c){function k(k){var e;null===u.next?(a(b.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
e=5121):(a(null!==u.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=u.next.colorAttachments[0].texture._texture.type,a.optional(function(){f.oes_texture_float?(a(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&a(c.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var l=0,g=0,n=m.framebufferWidth,p=m.framebufferHeight,w=null;d(k)?w=k:k&&(a.type(k,"object","invalid arguments to regl.read()"),l=k.x|0,g=k.y|0,a(0<=l&&l<m.framebufferWidth,"invalid x offset for regl.read"),a(0<=g&&g<m.framebufferHeight,"invalid y offset for regl.read"),n=(k.width||m.framebufferWidth-l)|0,p=(k.height||m.framebufferHeight-g)|0,w=k.data||null);w&&(5121===e?a(w instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&a(w instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<n&&n+l<=m.framebufferWidth,"invalid width for read pixels");a(0<p&&p+g<=m.framebufferHeight,"invalid height for read pixels");q();k=n*p*4;w||(5121===e?w=new Uint8Array(k):5126===e&&(w=w||new Float32Array(k)));a.isTypedArray(w,"data buffer for regl.read() must be a typedarray");a(w.byteLength>=k,"data buffer for regl.read() too small");T.pixelStorei(3333,4);T.readPixels(l,g,n,p,6408,e,w);return w}function z(c){var e;
u.setFBO({framebuffer:c.framebuffer},function(){e=k(c)});return e}return function(c){return c&&"framebuffer"in c?z(c):k(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(h,r,G){var a=h("./util/sorted-object-keys"),d=h("./util/check"),T=h("./util/values"),u=[];u[32854]=2;u[32855]=2;u[36194]=2;u[33189]=2;u[36168]=1;u[34041]=4;u[35907]=4;u[34836]=16;u[34842]=8;u[34843]=6;r.exports=function(q,m,b,f,c){function k(e){this.id=l++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=
this.width=0;c.profile&&(this.stats={size:0})}function z(c){var e=c.renderbuffer;d(e,"must not double destroy renderbuffer");q.bindRenderbuffer(36161,null);q.deleteRenderbuffer(e);c.renderbuffer=null;c.refCount=0;delete g[c.id];f.renderbufferCount--}var B={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};m.ext_srgb&&(B.srgba=35907);m.ext_color_buffer_half_float&&(B.rgba16f=34842,B.rgb16f=34843);m.webgl_color_buffer_float&&(B.rgba32f=34836);var e=[];a(B).forEach(function(c){e[B[c]]=
c});var l=0,g={};k.prototype.decRef=function(){0>=--this.refCount&&z(this)};c.profile&&(f.getTotalRenderbufferSize=function(){var c=0;a(g).forEach(function(e){c+=g[e].stats.size});return c});return{create:function(l,a){function w(l,k){var a=0,f=0,g=32854;"object"===typeof l&&l?("shape"in l?(f=l.shape,d(Array.isArray(f)&&2<=f.length,"invalid renderbuffer shape"),a=f[0]|0,f=f[1]|0):("radius"in l&&(a=f=l.radius|0),"width"in l&&(a=l.width|0),"height"in l&&(f=l.height|0)),"format"in l&&(d.parameter(l.format,
B,"invalid renderbuffer format"),g=B[l.format])):"number"===typeof l?(a=l|0,f="number"===typeof k?k|0:a):l?d.raise("invalid arguments to renderbuffer constructor"):a=f=1;d(0<a&&0<f&&a<=b.maxRenderbufferSize&&f<=b.maxRenderbufferSize,"invalid renderbuffer size");if(a!==y.width||f!==y.height||g!==y.format)return w.width=y.width=a,w.height=y.height=f,y.format=g,q.bindRenderbuffer(36161,y.renderbuffer),q.renderbufferStorage(36161,g,a,f),d(0===q.getError(),"invalid render buffer format"),c.profile&&(y.stats.size=
u[y.format]*y.width*y.height),w.format=e[y.format],w}var y=new k(q.createRenderbuffer());g[y.id]=y;f.renderbufferCount++;w(l,a);w.resize=function(e,l){var k=e|0,a=l|0||k;if(k===y.width&&a===y.height)return w;d(0<k&&0<a&&k<=b.maxRenderbufferSize&&a<=b.maxRenderbufferSize,"invalid renderbuffer size");w.width=y.width=k;w.height=y.height=a;q.bindRenderbuffer(36161,y.renderbuffer);q.renderbufferStorage(36161,y.format,k,a);d(0===q.getError(),"invalid render buffer format");c.profile&&(y.stats.size=u[y.format]*
y.width*y.height);return w};w._reglType="renderbuffer";w._renderbuffer=y;c.profile&&(w.stats=y.stats);w.destroy=function(){y.decRef()};return w},clear:function(){T(g).forEach(z)},restore:function(){T(g).forEach(function(c){c.renderbuffer=q.createRenderbuffer();q.bindRenderbuffer(36161,c.renderbuffer);q.renderbufferStorage(36161,c.format,c.width,c.height)});q.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(h,r,G){var a=h("./util/sorted-object-keys"),
d=h("./util/check"),T=h("./util/extend"),u=h("./util/values");r.exports=function(q,m,b,f){function c(c,e,b,l){this.name=c;this.id=e;this.location=b;this.info=l}function k(c,e){for(var b=0;b<c.length;++b)if(c[b].id===e.id){c[b].location=e.location;return}c.push(e)}function z(c,e,b){var k=35632===c?l:g,a=k[e];if(!a){var f=m.str(e),a=q.createShader(c);q.shaderSource(a,f);q.compileShader(a);d.shaderError(q,a,f,c,b);k[e]=a}return a}function B(c,e){this.id=w++;this.fragId=c;this.vertId=e;this.program=null;
this.uniforms=[];this.attributes=[];this.refCount=1;f.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function e(e,b,l){var a;a=z(35632,e.fragId);var g=z(35633,e.vertId),n=e.program=q.createProgram();q.attachShader(n,a);q.attachShader(n,g);if(l)for(a=0;a<l.length;++a)g=l[a],q.bindAttribLocation(n,g[0],g[1]);q.linkProgram(n);d.linkError(q,n,m.str(e.fragId),m.str(e.vertId),b);l=q.getProgramParameter(n,35718);f.profile&&(e.stats.uniformsCount=l);g=e.uniforms;for(a=0;a<l;++a)if(b=q.getActiveUniform(n,
a))if(1<b.size)for(var p=0;p<b.size;++p){var w=b.name.replace("[0]","["+p+"]");k(g,new c(w,m.id(w),q.getUniformLocation(n,w),b))}else k(g,new c(b.name,m.id(b.name),q.getUniformLocation(n,b.name),b));l=q.getProgramParameter(n,35721);f.profile&&(e.stats.attributesCount=l);e=e.attributes;for(a=0;a<l;++a)(b=q.getActiveAttrib(n,a))&&k(e,new c(b.name,m.id(b.name),q.getAttribLocation(n,b.name),b))}var l={},g={},n={},p=[],w=0;f.profile&&(b.getMaxUniformsCount=function(){var c=0;p.forEach(function(e){e.stats.uniformsCount>
c&&(c=e.stats.uniformsCount)});return c},b.getMaxAttributesCount=function(){var c=0;p.forEach(function(e){e.stats.attributesCount>c&&(c=e.stats.attributesCount)});return c});return{clear:function(){var c=q.deleteShader.bind(q);u(l).forEach(c);l={};u(g).forEach(c);g={};p.forEach(function(c){q.deleteProgram(c.program)});p.length=0;n={};b.shaderCount=0},program:function(c,k,f,w){d.command(0<=c,"missing vertex shader",f);d.command(0<=k,"missing fragment shader",f);var m=n[k];m||(m=n[k]={});var z=m[c];
if(z&&(z.refCount++,!w))return z;var u=new B(k,c);b.shaderCount++;e(u,f,w);z||(m[c]=u);p.push(u);return T(u,{destroy:function(){u.refCount--;if(0>=u.refCount){q.deleteProgram(u.program);var c=p.indexOf(u);p.splice(c,1);b.shaderCount--}0>=m[u.vertId].refCount&&(q.deleteShader(g[u.vertId]),delete g[u.vertId],delete n[u.fragId][u.vertId]);a(n[u.fragId]).length||(q.deleteShader(l[u.fragId]),delete l[u.fragId],delete n[u.fragId])}})},restore:function(){l={};g={};for(var c=0;c<p.length;++c)e(p[c],null,
p[c].attributes.map(function(c){return[c.location,c.name]}))},shader:z,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(h,r,G){r.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(h,r,G){r.exports=function(){var a={"":0},d=[""];return{id:function(T){var u=a[T];if(u)return u;u=a[T]=d.length;d.push(T);
return u},str:function(a){return d[a]}}}},{}],19:[function(h,r,G){function a(c){return"[object "+c+"]"}function d(c){return Array.isArray(c)&&(0===c.length||"number"===typeof c[0])}function T(c){return Array.isArray(c)&&0!==c.length&&n(c[0])?!0:!1}function u(c){return Object.prototype.toString.call(c)}function q(c){if(!c)return!1;var b=u(c);return 0<=ca.indexOf(b)?!0:d(c)||T(c)||e(c)}function m(c,e){36193===c.type?(c.data=g(e),l.freeType(e)):c.data=e}function b(c,e,b,l,d,a){c="undefined"!==typeof F[c]?
F[c]:x[c]*H[e];a&&(c*=6);if(d){for(l=0;1<=b;)l+=c*b*b,b/=2;return l}return c*b*l}var f=h("./util/sorted-object-keys"),c=h("./util/check"),k=h("./util/extend"),z=h("./util/values"),B=h("./util/is-typed-array"),e=h("./util/is-ndarray"),l=h("./util/pool"),g=h("./util/to-half-float"),n=h("./util/is-array-like"),p=h("./util/flatten"),w=h("./util/is-pow2");G=h("./constants/arraytypes.json");var y=h("./constants/arraytypes.json"),C=[9984,9986,9985,9987],Ea=[0,6409,6410,6407,6408],x={};x[6409]=x[6406]=x[6402]=
1;x[34041]=x[6410]=2;x[6407]=x[35904]=3;x[6408]=x[35906]=4;var v=a("HTMLCanvasElement"),na=a("OffscreenCanvas"),I=a("CanvasRenderingContext2D"),aa=a("ImageBitmap"),E=a("HTMLImageElement"),A=a("HTMLVideoElement"),ca=f(G).concat([v,na,I,aa,E,A]),H=[];H[5121]=1;H[5126]=4;H[36193]=2;H[5123]=2;H[5125]=4;var F=[];F[32854]=2;F[32855]=2;F[36194]=2;F[34041]=4;F[33776]=.5;F[33777]=.5;F[33778]=1;F[33779]=1;F[35986]=.5;F[35987]=1;F[34798]=1;F[35840]=.5;F[35841]=.25;F[35842]=.5;F[35843]=.25;F[36196]=.5;r.exports=
function(a,h,t,H,F,r,ca){function S(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function V(c,e){c.internalformat=e.internalformat;c.format=e.format;c.type=e.type;c.compressed=e.compressed;c.premultiplyAlpha=e.premultiplyAlpha;c.flipY=e.flipY;c.unpackAlignment=e.unpackAlignment;c.colorSpace=e.colorSpace;c.width=e.width;c.height=e.height;c.channels=e.channels}
function R(e,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(c.type(b.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(c.type(b.flipY,"boolean","invalid texture flip"),e.flipY=b.flipY);"alignment"in b&&(c.oneOf(b.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=b.alignment);"colorSpace"in b&&(c.parameter(b.colorSpace,Ua,"invalid colorSpace"),e.colorSpace=Ua[b.colorSpace]);if("type"in b){var l=b.type;c(h.oes_texture_float||
!("float"===l||"float32"===l),"you must enable the OES_texture_float extension in order to use floating point textures.");c(h.oes_texture_half_float||!("half float"===l||"float16"===l),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");c(h.webgl_depth_texture||!("uint16"===l||"uint32"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");c.parameter(l,ia,"invalid texture type");e.type=
ia[l]}var d=e.width,a=e.height,k=e.channels,l=!1;"shape"in b?(c(Array.isArray(b.shape)&&2<=b.shape.length,"shape must be an array"),d=b.shape[0],a=b.shape[1],3===b.shape.length&&(k=b.shape[2],c(0<k&&4>=k,"invalid number of channels"),l=!0),c(0<=d&&d<=t.maxTextureSize,"invalid width"),c(0<=a&&a<=t.maxTextureSize,"invalid height")):("radius"in b&&(d=a=b.radius,c(0<=d&&d<=t.maxTextureSize,"invalid radius")),"width"in b&&(d=b.width,c(0<=d&&d<=t.maxTextureSize,"invalid width")),"height"in b&&(a=b.height,
c(0<=a&&a<=t.maxTextureSize,"invalid height")),"channels"in b&&(k=b.channels,c(0<k&&4>=k,"invalid number of channels"),l=!0));e.width=d|0;e.height=a|0;e.channels=k|0;d=!1;"format"in b&&(d=b.format,c(h.webgl_depth_texture||!("depth"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(d,fa,"invalid texture format"),a=e.internalformat=fa[d],e.format=Ga[a],d in ia&&!("type"in b)&&(e.type=ia[d]),d in sa&&(e.compressed=!0),d=
!0);!l&&d?e.channels=x[e.format]:l&&!d?e.channels!==Ea[e.format]&&(e.format=e.internalformat=Ea[e.channels]):d&&l&&c(e.channels===x[e.format],"number of channels inconsistent with specified format")}}function O(c){a.pixelStorei(37440,c.flipY);a.pixelStorei(37441,c.premultiplyAlpha);a.pixelStorei(37443,c.colorSpace);a.pixelStorei(3317,c.unpackAlignment)}function M(){S.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function N(b,a){var k=null;
q(a)?k=a:a&&(c.type(a,"object","invalid pixel data type"),R(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),q(a.data)&&(k=a.data));c(!b.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(a.copy){c(!k,"can not specify copy and data field for the same texture");var f=F.viewportWidth,w=F.viewportHeight;b.width=b.width||f-b.xOffset;b.height=b.height||w-b.yOffset;b.needsCopy=!0;c(0<=b.xOffset&&b.xOffset<f&&0<=b.yOffset&&b.yOffset<w&&0<b.width&&b.width<=
f&&0<b.height&&b.height<=w,"copy texture read out of bounds")}else if(!k)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(B(k))b.channels=b.channels||4,b.data=k,"type"in a||5121!==b.type||(b.type=y[Object.prototype.toString.call(k)]|0);else if(d(k)){b.channels=b.channels||4;f=k;w=f.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:w=l.allocType(b.type,w);w.set(f);b.data=w;break;case 36193:b.data=g(f);break;default:c.raise("unsupported texture type, must specify a typed array")}b.alignment=
1;b.needsFree=!0}else if(e(k)){f=k.data;Array.isArray(f)||5121!==b.type||(b.type=y[Object.prototype.toString.call(f)]|0);var w=k.shape,z=k.stride,C,x,D,h;3===w.length?(D=w[2],h=z[2]):(c(2===w.length,"invalid ndarray pixel data, must be 2 or 3D"),h=D=1);C=w[0];x=w[1];w=z[0];z=z[1];b.alignment=1;b.width=C;b.height=x;b.channels=D;b.format=b.internalformat=Ea[D];b.needsFree=!0;C=h;k=k.offset;D=b.width;h=b.height;x=b.channels;for(var J=l.allocType(36193===b.type?5126:b.type,D*h*x),N=0,ia=0;ia<h;++ia)for(var fa=
0;fa<D;++fa)for(var U=0;U<x;++U)J[N++]=f[w*fa+z*ia+C*U+k];m(b,J)}else if(u(k)===v||u(k)===na||u(k)===I)u(k)===v||u(k)===na?b.element=k:b.element=k.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(u(k)===aa)b.element=k,b.width=k.width,b.height=k.height,b.channels=4;else if(u(k)===E)b.element=k,b.width=k.naturalWidth,b.height=k.naturalHeight,b.channels=4;else if(u(k)===A)b.element=k,b.width=k.videoWidth,b.height=k.videoHeight,b.channels=4;else if(T(k)){f=b.width||k[0].length;
w=b.height||k.length;z=b.channels;z=n(k[0][0])?z||k[0][0].length:z||1;C=p.shape(k);D=1;for(h=0;h<C.length;++h)D*=C[h];D=l.allocType(36193===b.type?5126:b.type,D);p.flatten(k,C,"",D);m(b,D);b.alignment=1;b.width=f;b.height=w;b.channels=z;b.format=b.internalformat=Ea[z];b.needsFree=!0}5126===b.type?c(0<=t.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===b.type&&c(0<=t.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function P(c,e,b,l,d){var k=c.element,f=c.data,g=c.internalformat,n=c.format,p=c.type,w=c.width,y=c.height;O(c);k?a.texSubImage2D(e,d,b,l,n,p,k):c.compressed?a.compressedTexSubImage2D(e,d,b,l,g,w,y,f):c.needsCopy?(H(),a.copyTexSubImage2D(e,d,b,l,c.xOffset,c.yOffset,w,y)):a.texSubImage2D(e,d,b,l,w,y,n,p,f)}function Q(){return qa.pop()||new M}function ra(c){c.needsFree&&l.freeType(c.data);M.call(c);qa.push(c)}function pa(){S.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function J(c,e,b){var l=c.images[0]=Q();c.mipmask=1;l.width=c.width=e;l.height=c.height=b;l.channels=c.channels=4}function K(e,b){var l=null;if(q(b))l=e.images[0]=Q(),V(l,e),N(l,b),e.mipmask=1;else if(R(e,b),Array.isArray(b.mipmap))for(var d=b.mipmap,a=0;a<d.length;++a)l=e.images[a]=Q(),V(l,e),l.width>>=a,l.height>>=a,N(l,d[a]),e.mipmask|=1<<a;else l=e.images[0]=Q(),V(l,e),N(l,b),e.mipmask=1;V(e,e.images[0]);!e.compressed||33776!==e.internalformat&&33777!==e.internalformat&&33778!==e.internalformat&&
33779!==e.internalformat||c(0===e.width%4&&0===e.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ba(c,e){for(var b=c.images,l=0;l<b.length&&b[l];++l){var d=b[l],k=e,f=l,g=d.element,n=d.data,p=d.internalformat,w=d.format,y=d.type,m=d.width,B=d.height;O(d);g?a.texImage2D(k,f,w,w,y,g):d.compressed?a.compressedTexImage2D(k,f,p,m,B,0,n):d.needsCopy?(H(),a.copyTexImage2D(k,f,w,d.xOffset,d.yOffset,m,B,0)):a.texImage2D(k,f,w,m,B,0,w,
y,n||null)}}function W(){var c=za.pop()||new pa;S.call(c);for(var e=c.mipmask=0;16>e;++e)c.images[e]=null;return c}function la(c){for(var e=c.images,b=0;b<e.length;++b)e[b]&&ra(e[b]),e[b]=null;za.push(c)}function ha(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ba(e,b){if("min"in b){var l=b.min;c.parameter(l,Zb);e.minFilter=Zb[l];0<=C.indexOf(e.minFilter)&&!("faces"in b)&&(e.genMipmaps=!0)}"mag"in b&&(l=b.mag,c.parameter(l,
Ja),e.magFilter=Ja[l]);var l=e.wrapS,d=e.wrapT;if("wrap"in b){var a=b.wrap;"string"===typeof a?(c.parameter(a,Qa),l=d=Qa[a]):Array.isArray(a)&&(c.parameter(a[0],Qa),c.parameter(a[1],Qa),l=Qa[a[0]],d=Qa[a[1]])}else"wrapS"in b&&(l=b.wrapS,c.parameter(l,Qa),l=Qa[l]),"wrapT"in b&&(d=b.wrapT,c.parameter(d,Qa),d=Qa[d]);e.wrapS=l;e.wrapT=d;"anisotropic"in b&&(l=b.anisotropic,c("number"===typeof l&&1<=l&&l<=t.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=b.anisotropic);if("mipmap"in
b){l=!1;switch(typeof b.mipmap){case "string":c.parameter(b.mipmap,Aa,"invalid mipmap hint");e.mipmapHint=Aa[b.mipmap];l=e.genMipmaps=!0;break;case "boolean":l=e.genMipmaps=b.mipmap;break;case "object":c(Array.isArray(b.mipmap),"invalid mipmap type");e.genMipmaps=!1;l=!0;break;default:c.raise("invalid mipmap type")}!l||"min"in b||(e.minFilter=9984)}}function wa(c,e){a.texParameteri(e,10241,c.minFilter);a.texParameteri(e,10240,c.magFilter);a.texParameteri(e,10242,c.wrapS);a.texParameteri(e,10243,c.wrapT);
h.ext_texture_filter_anisotropic&&a.texParameteri(e,34046,c.anisotropic);c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(e))}function da(c){S.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ca++;this.refCount=1;this.target=c;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ha;ca.profile&&(this.stats={size:0})}function xa(c){a.activeTexture(33984);a.bindTexture(c.target,c.texture)}function ka(){var c=ua[0];c?a.bindTexture(c.target,c.texture):a.bindTexture(3553,
null)}function oa(e){var b=e.texture;c(b,"must not double destroy texture");var l=e.unit,d=e.target;0<=l&&(a.activeTexture(33984+l),a.bindTexture(d,null),ua[l]=null);a.deleteTexture(b);e.texture=null;e.params=null;e.pixels=null;e.refCount=0;delete ja[e.id];r.textureCount--}var Aa={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Qa={repeat:10497,clamp:33071,mirror:33648},Ja={nearest:9728,linear:9729},Zb=k({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,
"linear mipmap linear":9987},Ja),Ua={none:0,browser:37444},ia={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},fa={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sa={};h.ext_srgb&&(fa.srgb=35904,fa.srgba=35906);h.oes_texture_float&&(ia.float32=ia["float"]=5126);h.oes_texture_half_float&&(ia.float16=ia["half float"]=36193);h.webgl_depth_texture&&(k(fa,{depth:6402,"depth stencil":34041}),k(ia,{uint16:5123,uint32:5125,"depth stencil":34042}));
h.webgl_compressed_texture_s3tc&&k(sa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});h.webgl_compressed_texture_atc&&k(sa,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});h.webgl_compressed_texture_pvrtc&&k(sa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});h.webgl_compressed_texture_etc1&&(sa["rgb etc1"]=36196);var va=Array.prototype.slice.call(a.getParameter(34467));
f(sa).forEach(function(c){var e=sa[c];0<=va.indexOf(e)&&(fa[c]=e)});var Da=f(fa);t.textureFormats=Da;var G=[];f(fa).forEach(function(c){G[fa[c]]=c});var Gb=[];f(ia).forEach(function(c){Gb[ia[c]]=c});var Z=[];f(Ja).forEach(function(c){Z[Ja[c]]=c});var U=[];f(Zb).forEach(function(c){U[Zb[c]]=c});var ya=[];f(Qa).forEach(function(c){ya[Qa[c]]=c});var Ga=Da.reduce(function(c,e){var b=fa[e];6409===b||6406===b||6409===b||6410===b||6402===b||34041===b||h.ext_srgb&&(35904===b||35906===b)?c[b]=b:32855===b||
0<=e.indexOf("rgba")?c[b]=6408:c[b]=6407;return c},{}),qa=[],za=[],Ca=0,ja={},X=t.maxTextureUnits,ua=Array(X).map(function(){return null});k(da.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var b=0;b<X;++b){var l=ua[b];if(l){if(0<l.bindCount)continue;l.unit=-1}ua[b]=this;e=b;break}e>=X&&c.raise("insufficient number of texture units");ca.profile&&r.maxTextureUnits<e+1&&(r.maxTextureUnits=e+1);this.unit=e;a.activeTexture(33984+e);a.bindTexture(this.target,this.texture)}return e},
unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&oa(this)}});ca.profile&&(r.getTotalTextureSize=function(){var c=0;f(ja).forEach(function(e){c+=ja[e].stats.size});return c});return{create2D:function(e,l){function d(e,l){var a=k.texInfo;ha.call(a);var f=W();"number"===typeof e?"number"===typeof l?J(f,e|0,l|0):J(f,e|0,e|0):e?(c.type(e,"object","invalid arguments to regl.texture"),Ba(a,e),K(f,e)):J(f,1,1);a.genMipmaps&&(f.mipmask=(f.width<<1)-1);k.mipmask=f.mipmask;V(k,f);c.texture2D(a,
f,t);k.internalformat=f.internalformat;d.width=f.width;d.height=f.height;xa(k);ba(f,3553);wa(a,3553);ka();la(f);ca.profile&&(k.stats.size=b(k.internalformat,k.type,f.width,f.height,a.genMipmaps,!1));d.format=G[k.internalformat];d.type=Gb[k.type];d.mag=Z[a.magFilter];d.min=U[a.minFilter];d.wrapS=ya[a.wrapS];d.wrapT=ya[a.wrapT];return d}var k=new da(3553);ja[k.id]=k;r.textureCount++;d(e,l);d.subimage=function(e,b,l,a){c(!!e,"must specify image data");b|=0;l|=0;a|=0;var f=Q();V(f,k);f.width=0;f.height=
0;N(f,e);f.width=f.width||(k.width>>a)-b;f.height=f.height||(k.height>>a)-l;c(k.type===f.type&&k.format===f.format&&k.internalformat===f.internalformat,"incompatible format for texture.subimage");c(0<=b&&0<=l&&b+f.width<=k.width&&l+f.height<=k.height,"texture.subimage write out of bounds");c(k.mipmask&1<<a,"missing mipmap data");c(f.data||f.element||f.needsCopy,"missing image data");xa(k);P(f,3553,b,l,a);ka();ra(f);return d};d.resize=function(c,e){var l=c|0,f=e|0||l;if(l===k.width&&f===k.height)return d;
d.width=k.width=l;d.height=k.height=f;xa(k);for(var g=0;k.mipmask>>g;++g){var n=l>>g,p=f>>g;if(!n||!p)break;a.texImage2D(3553,g,k.format,n,p,0,k.format,k.type,null)}ka();ca.profile&&(k.stats.size=b(k.internalformat,k.type,l,f,!1,!1));return d};d._reglType="texture2d";d._texture=k;ca.profile&&(d.stats=k.stats);d.destroy=function(){k.decRef()};return d},createCube:function(e,l,d,k,f,g){function n(e,l,d,a,k,f){var g,m=p.texInfo;ha.call(m);for(g=0;6>g;++g)y[g]=W();if("number"!==typeof e&&e)if("object"===
typeof e)if(l)K(y[0],e),K(y[1],l),K(y[2],d),K(y[3],a),K(y[4],k),K(y[5],f);else if(Ba(m,e),R(p,e),"faces"in e)for(e=e.faces,c(Array.isArray(e)&&6===e.length,"cube faces must be a length 6 array"),g=0;6>g;++g)c("object"===typeof e[g]&&!!e[g],"invalid input for cube map face"),V(y[g],p),K(y[g],e[g]);else for(g=0;6>g;++g)K(y[g],e);else c.raise("invalid arguments to cube map");else for(e=e|0||1,g=0;6>g;++g)J(y[g],e,e);V(p,y[0]);c.optional(function(){t.npotTextureCube||c(w(p.width)&&w(p.height),"your browser does not support non power or two texture dimensions")});
p.mipmask=m.genMipmaps?(y[0].width<<1)-1:y[0].mipmask;c.textureCube(p,m,y,t);p.internalformat=y[0].internalformat;n.width=y[0].width;n.height=y[0].height;xa(p);for(g=0;6>g;++g)ba(y[g],34069+g);wa(m,34067);ka();ca.profile&&(p.stats.size=b(p.internalformat,p.type,n.width,n.height,m.genMipmaps,!0));n.format=G[p.internalformat];n.type=Gb[p.type];n.mag=Z[m.magFilter];n.min=U[m.minFilter];n.wrapS=ya[m.wrapS];n.wrapT=ya[m.wrapT];for(g=0;6>g;++g)la(y[g]);return n}var p=new da(34067);ja[p.id]=p;r.cubeCount++;
var y=Array(6);n(e,l,d,k,f,g);n.subimage=function(e,b,l,d,a){c(!!b,"must specify image data");c("number"===typeof e&&e===(e|0)&&0<=e&&6>e,"invalid face");l|=0;d|=0;a|=0;var k=Q();V(k,p);k.width=0;k.height=0;N(k,b);k.width=k.width||(p.width>>a)-l;k.height=k.height||(p.height>>a)-d;c(p.type===k.type&&p.format===k.format&&p.internalformat===k.internalformat,"incompatible format for texture.subimage");c(0<=l&&0<=d&&l+k.width<=p.width&&d+k.height<=p.height,"texture.subimage write out of bounds");c(p.mipmask&
1<<a,"missing mipmap data");c(k.data||k.element||k.needsCopy,"missing image data");xa(p);P(k,34069+e,l,d,a);ka();ra(k);return n};n.resize=function(c){c|=0;if(c!==p.width){n.width=p.width=c;n.height=p.height=c;xa(p);for(var e=0;6>e;++e)for(var l=0;p.mipmask>>l;++l)a.texImage2D(34069+e,l,p.format,c>>l,c>>l,0,p.format,p.type,null);ka();ca.profile&&(p.stats.size=b(p.internalformat,p.type,n.width,n.height,!1,!0));return n}};n._reglType="textureCube";n._texture=p;ca.profile&&(n.stats=p.stats);n.destroy=
function(){p.decRef()};return n},clear:function(){for(var c=0;c<X;++c)a.activeTexture(33984+c),a.bindTexture(3553,null),ua[c]=null;z(ja).forEach(oa);r.cubeCount=0;r.textureCount=0},getTexture:function(c){return null},restore:function(){for(var c=0;c<X;++c){var e=ua[c];e&&(e.bindCount=0,e.unit=-1,ua[c]=null)}z(ja).forEach(function(c){c.texture=a.createTexture();a.bindTexture(c.target,c.texture);for(var e=0;32>e;++e)if(0!==(c.mipmask&1<<e))if(3553===c.target)a.texImage2D(3553,e,c.internalformat,c.width>>
e,c.height>>e,0,c.internalformat,c.type,null);else for(var b=0;6>b;++b)a.texImage2D(34069+b,e,c.internalformat,c.width>>e,c.height>>e,0,c.internalformat,c.type,null);wa(c.texInfo,c.target)})},refresh:function(){for(var c=0;c<X;++c){var e=ua[c];e&&(e.bindCount=0,e.unit=-1,ua[c]=null);a.activeTexture(33984+c);a.bindTexture(3553,null);a.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,
"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(h,r,G){r.exports=function(a,d){function h(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function u(c,d,e){var l=b.pop()||new h;l.startQueryIndex=c;l.endQueryIndex=d;l.sum=0;l.stats=e;f.push(l)}if(!d.ext_disjoint_timer_query)return null;var q=[],m=[],b=[],f=[],c=[],k=[];return{beginQuery:function(c){var b=q.pop()||d.ext_disjoint_timer_query.createQueryEXT();
d.ext_disjoint_timer_query.beginQueryEXT(35007,b);m.push(b);u(m.length-1,m.length,c)},endQuery:function(){d.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:u,update:function(){var a,B;a=m.length;if(0!==a){k.length=Math.max(k.length,a+1);c.length=Math.max(c.length,a+1);c[0]=0;var e=k[0]=0;for(B=a=0;B<m.length;++B){var l=m[B];d.ext_disjoint_timer_query.getQueryObjectEXT(l,34919)?(e+=d.ext_disjoint_timer_query.getQueryObjectEXT(l,34918),q.push(l)):m[a++]=l;c[B+1]=e;k[B+1]=a}m.length=a;for(B=
a=0;B<f.length;++B){var e=f[B],g=e.startQueryIndex,l=e.endQueryIndex;e.sum+=c[l]-c[g];g=k[g];l=k[l];l===g?(e.stats.gpuTime+=e.sum/1E6,b.push(e)):(e.startQueryIndex=g,e.endQueryIndex=l,f[a++]=e)}f.length=a}},getNumPendingQueries:function(){return m.length},clear:function(){q.push.apply(q,m);for(var c=0;c<q.length;c++)d.ext_disjoint_timer_query.deleteQueryEXT(q[c]);m.length=0;q.length=0},restore:function(){m.length=0;q.length=0}}}},{}],21:[function(h,r,G){function a(c){return"undefined"!==typeof atob?
atob(c):"base64:"+c}function d(c){c=Error("(regl) "+c);console.error(c);throw c;}function T(c,e){c||d(e)}function u(c){return c?": "+c:""}function q(c,e){switch(e){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function m(c,e,b){0>e.indexOf(c)&&d("invalid value"+
u(b)+". must be one of: "+e)}function b(c,e){for(c+="";c.length<e;)c=" "+c;return c}function f(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function c(c,e){this.number=c;this.line=e;this.errors=[]}function k(c,e,b){this.file=c;this.line=e;this.message=b}function z(){var c=Error(),c=(c.stack||c).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return e?e[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function B(){var c=Error(),c=(c.stack||c).toString(),
e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);return e?e[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function e(e,b){var l=e.split("\n"),d=1,k=0,g={unknown:new f,0:new f};g.unknown.name=g[0].name=b||z();g.unknown.lines.push(new c(0,""));for(var n=0;n<l.length;++n){var p=l[n],w=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(p);if(w)switch(w[1]){case "line":if(w=/(\d+)(\s+\d+)?/.exec(w[2]))d=w[1]|0,w[2]&&(k=w[2]|0,k in g||(g[k]=new f));break;case "define":if(w=/SHADER_NAME(_B64)?\s+(.*)$/.exec(w[2]))g[k].name=
w[1]?a(w[2]):w[2]}g[k].lines.push(new c(d++,p))}C(g).forEach(function(c){var e=g[c];e.lines.forEach(function(c){e.index[c.number]=c})});return g}function l(c){var e=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var b=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);b?e.push(new k(b[1]|0,b[2]|0,b[3].trim())):0<c.length&&e.push(new k("unknown",0,c))}});return e}function g(c,e){e.forEach(function(e){var b=c[e.file];if(b){var l=b.index[e.line];if(l){l.errors.push(e);b.hasErrors=!0;return}}c.unknown.hasErrors=
!0;c.unknown.lines[0].errors.push(e)})}function n(c){c._commandRef=z()}function p(c,e){var b=B();d(c+" in command "+(e||z())+("unknown"===b?"":" called from "+b))}function w(c,e,b,l){q(c,e)||p("invalid parameter type"+u(b)+". expected "+e+", got "+typeof c,l||z())}function y(c,e){return 32820===c||32819===c||33635===c?2:34042===c?4:v[c]*e}var C=h("./sorted-object-keys"),Ea=h("./is-typed-array");h=h("./extend");var x="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),
v={};v[5120]=v[5121]=1;v[5122]=v[5123]=v[36193]=v[33635]=v[32819]=v[32820]=2;v[5124]=v[5125]=v[5126]=v[34042]=4;r.exports=h(T,{optional:function(c){c()},raise:d,commandRaise:p,command:function(c,e,b){c||p(e,b||z())},parameter:function(c,e,b){c in e||d("unknown parameter ("+c+")"+u(b)+". possible values: "+C(e).join())},commandParameter:function(c,e,b,l){c in e||p("unknown parameter ("+c+")"+u(b)+". possible values: "+C(e).join(),l||z())},constructor:function(c){C(c).forEach(function(c){0>x.indexOf(c)&&
d('invalid regl constructor argument "'+c+'". must be one of '+x)})},type:function(c,e,b){q(c,e)||d("invalid parameter type"+u(b)+". expected "+e+", got "+typeof c)},commandType:w,isTypedArray:function(c,e){Ea(c)||d("invalid parameter type"+u(e)+". must be a typed array")},nni:function(c,e){0<=c&&(c|0)===c||d("invalid parameter type, ("+c+")"+u(e)+". must be a nonnegative integer")},oneOf:m,shaderError:function(c,d,a,k,f){if(!c.getShaderParameter(d,c.COMPILE_STATUS)){d=c.getShaderInfoLog(d);c=k===
c.FRAGMENT_SHADER?"fragment":"vertex";w(a,"string",c+" shader source must be a string",f);var n=e(a,f);a=l(d);g(n,a);C(n).forEach(function(c){function e(c,b){d.push(c);a.push(b||"")}var l=n[c];if(l.hasErrors){var d=[""],a=[""];e("file number "+c+": "+l.name+"\n","color:red;text-decoration:underline;font-weight:bold");l.lines.forEach(function(c){if(0<c.errors.length){e(b(c.number,4)+"|  ","background-color:yellow; font-weight:bold");e(c.line+"\n","color:red; background-color:yellow; font-weight:bold");
var l=0;c.errors.forEach(function(d){d=d.message;var a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(d);if(a){var k=a[1];d=a[2];switch(k){case "assign":k="="}l=Math.max(c.line.indexOf(k,l),0)}else l=0;e(b("| ",6));e(b("^^^",l+3)+"\n","font-weight:bold");e(b("| ",6));e(d+"\n","font-weight:bold")});e(b("| ",6)+"\n")}else e(b(c.number,4)+"|  "),e(c.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(d.join("")):(a[0]=d.join("%c"),console.log.apply(console,a))}});T.raise("Error compiling "+
c+" shader, "+n[0].name)}},linkError:function(c,b,l,d,a){c.getProgramParameter(b,c.LINK_STATUS)||(c=c.getProgramInfoLog(b),l=e(l,a),d='Error linking program with vertex shader, "'+e(d,a)[0].name+'", and fragment shader "'+l[0].name+'"',"undefined"!==typeof document?console.log("%c"+d+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(d+"\n"+c),T.raise(d))},callSite:B,saveCommandRef:n,saveDrawInfo:function(c,e,b,l){function d(c){return c?l.id(c):0}function a(c,
e){C(e).forEach(function(e){c[l.id(e)]=!0})}n(c);c._fragId=d(c["static"].frag);c._vertId=d(c["static"].vert);var k=c._uniformSet={};a(k,e["static"]);a(k,e.dynamic);e=c._attributeSet={};a(e,b["static"]);a(e,b.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,e,b){c.texture?m(c.texture._texture.internalformat,e,"unsupported texture format for attachment"):m(c.renderbuffer._renderbuffer.format,b,"unsupported renderbuffer format for attachment")},
guessCommand:z,texture2D:function(c,e,b){var l=e.width,d=e.height,a=e.channels;T(0<l&&l<=b.maxTextureSize&&0<d&&d<=b.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||T(!(l&l-1)&&!!l&&!(d&d-1)&&!!d,"incompatible wrap mode for texture, both width and height must be power of 2");1===e.mipmask?1!==l&&1!==d&&T(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(T(!(l&l-1)&&!!l&&!(d&d-1)&&!!d,"texture must be a square power of 2 to support mipmapping"),
T(e.mipmask===(l<<1)-1,"missing or incomplete mipmap data"));5126===e.type&&(0>b.extensions.indexOf("oes_texture_float_linear")&&T(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),T(!c.genMipmaps,"mipmap generation not supported with float textures"));var k=e.images;for(b=0;16>b;++b)if(k[b]){var f=l>>b,g=d>>b;T(e.mipmask&1<<b,"missing mipmap data");var n=k[b];T(n.width===f&&n.height===g,"invalid shape for mip images");T(n.format===e.format&&n.internalformat===
e.internalformat&&n.type===e.type,"incompatible type for mip image");!n.compressed&&n.data&&(f=Math.ceil(y(n.type,a)*f/n.unpackAlignment)*n.unpackAlignment,T(n.data.byteLength===f*g,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||T(0===(e.mipmask&1<<b),"extra mipmap data");e.compressed&&T(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,e,b,l){var d=c.width,a=c.height,k=c.channels;T(0<d&&d<=l.maxTextureSize&&
0<a&&a<=l.maxTextureSize,"invalid texture shape");T(d===a,"cube map must be square");T(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(l=0;l<b.length;++l){var f=b[l];T(f.width===d&&f.height===a,"inconsistent cube map face shape");e.genMipmaps&&(T(!f.compressed,"can not generate mipmap for compressed textures"),T(1===f.mipmask,"can not specify mipmaps and generate mipmaps"));for(var g=f.images,n=0;16>n;++n){var p=g[n];if(p){var w=d>>n,m=a>>n;T(f.mipmask&1<<n,"missing mipmap data");
T(p.width===w&&p.height===m,"invalid shape for mip images");T(p.format===c.format&&p.internalformat===c.internalformat&&p.type===c.type,"incompatible type for mip image");p.compressed||p.data&&T(p.data.byteLength===w*m*Math.max(y(p.type,k),p.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(h,r,G){r.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(h,r,G){function a(d){return Array.prototype.slice.call(d)}function d(d){return a(d).join("")}var T=h("./extend"),u=h("./compiled-fns");r.exports=function(){function q(){var c=[],e=[];return T(function(){c.push.apply(c,a(arguments))},{def:function(){var b="v"+f;f++;e.push(b);0<arguments.length&&(c.push(b,"="),c.push.apply(c,a(arguments)),c.push(";"));return b},toString:function(){return d([0<e.length?"var "+e.join(",")+";":"",d(c)])}})}function m(){function c(d,
a){b(d,a,"=",e.def(d,a),";")}var e=q(),b=q(),d=e.toString,k=b.toString;return T(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:b,save:c,set:function(b,l,d){c(b,l);e(b,l,"=",d,";")},toString:function(){return d()+k()}})}var b=0,f=0,c={},k=q(),z={};return{global:k,link:function(d){var e="$"+b,l=!1;"object"===typeof d&&d.name&&(e=d.name.replace(/ /g,"_"),l=!0);if(e in c)return e;c[e]=d;l||b++;return e},block:q,proc:function(c,e){function b(){var c="a"+a.length;a.push(c);return c}var a=[];
e=e||0;for(var k=0;k<e;++k)b();var k=m(),f=k.toString;return z[c]=T(k,{arg:b,toString:function(){return d(["function(",a.join(),"){",f(),"}"])}})},scope:m,cond:function(){var c=d(arguments),e=m(),b=m(),k=e.toString,f=b.toString;return T(e,{then:function(){e.apply(e,a(arguments));return this},"else":function(){b.apply(b,a(arguments));return this},toString:function(){var e=f();e&&(e="else{"+e+"}");return d(["if(",c,"){",k(),"}",e])}})},compile:function(){var b=[],e=[];Object.keys(c).sort(function(c,
e){var b="$"===c.charAt(0),l="$"===e.charAt(0);return b||l?b&&l?+c.slice(1)<+e.slice(1)?-1:1:b&&!l?-1:1:c.localeCompare(e)}).forEach(function(l){var d=c[l];b.push(l);e.push(d)});for(var l=0,a=b.length-1;-1<a;a--)if("$"===b[a].charAt(0)){l=a;break}var f=['"use strict";',k,"return {"];Object.keys(z).forEach(function(c){f.push('"',c,'":',z[c].toString(),",")});f.push("}");var a=d(f).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),l=b.slice(l).join(),p=u[l];if(!p)throw console.log("src code is:"),
console.log(a),console.log("compiled values:",e),console.log("linked names:",b),console.log("Keys available:",Object.keys(u)),console.log("Key:",l),console.log('"'+l+'": function('+b.join(", ")+") \n{\n"+a+"\n},"),Error("missing precompiled function with key: "+l);return p.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(h,r,G){r.exports={$0:function(a){var d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,na,I,aa,E,A,r,H,F;d=a.attributes;h=a.current;u=a.framebuffer;q=a.gl;m=a.next;
b=a.vao;f=m.blend_color;c=h.blend_color;k=m.blend_equation;z=h.blend_equation;B=m.blend_func;e=h.blend_func;l=m.colorMask;g=h.colorMask;n=m.depth_range;p=h.depth_range;w=m.polygonOffset_offset;y=h.polygonOffset_offset;C=m.sample_coverage;Ea=h.sample_coverage;x=m.scissor_box;v=h.scissor_box;na=m.stencil_func;I=h.stencil_func;aa=m.stencil_opBack;E=h.stencil_opBack;A=m.stencil_opFront;r=h.stencil_opFront;H=m.viewport;F=h.viewport;return{poll:function(){var b,d,a,ea,L,ma,G,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,
W,la;h.dirty=!1;d=m.blend_enable;a=m.cull_enable;ea=m.depth_enable;L=m.dither;ma=m.polygonOffset_enable;G=m.sample_alpha;S=m.sample_enable;V=m.scissor_enable;R=m.stencil_enable;O=m.cull_face;M=h.cull_face;N=m.depth_func;P=h.depth_func;Q=m.depth_mask;ra=h.depth_mask;pa=m.frontFace;J=h.frontFace;K=m.lineWidth;ba=h.lineWidth;W=m.stencil_mask;la=h.stencil_mask;b=u.next;b!==u.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),u.cur=b);d!==h.blend_enable&&(d?q.enable(3042):q.disable(3042),
h.blend_enable=d);a!==h.cull_enable&&(a?q.enable(2884):q.disable(2884),h.cull_enable=a);ea!==h.depth_enable&&(ea?q.enable(2929):q.disable(2929),h.depth_enable=ea);L!==h.dither&&(L?q.enable(3024):q.disable(3024),h.dither=L);ma!==h.polygonOffset_enable&&(ma?q.enable(32823):q.disable(32823),h.polygonOffset_enable=ma);G!==h.sample_alpha&&(G?q.enable(32926):q.disable(32926),h.sample_alpha=G);S!==h.sample_enable&&(S?q.enable(32928):q.disable(32928),h.sample_enable=S);V!==h.scissor_enable&&(V?q.enable(3089):
q.disable(3089),h.scissor_enable=V);R!==h.stencil_enable&&(R?q.enable(2960):q.disable(2960),h.stencil_enable=R);if(f[0]!==c[0]||f[1]!==c[1]||f[2]!==c[2]||f[3]!==c[3])q.blendColor(f[0],f[1],f[2],f[3]),c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3];if(k[0]!==z[0]||k[1]!==z[1])q.blendEquationSeparate(k[0],k[1]),z[0]=k[0],z[1]=k[1];if(B[0]!==e[0]||B[1]!==e[1]||B[2]!==e[2]||B[3]!==e[3])q.blendFuncSeparate(B[0],B[1],B[2],B[3]),e[0]=B[0],e[1]=B[1],e[2]=B[2],e[3]=B[3];if(l[0]!==g[0]||l[1]!==g[1]||l[2]!==g[2]||l[3]!==
g[3])q.colorMask(l[0],l[1],l[2],l[3]),g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[3];O!==M&&(q.cullFace(O),h.cull_face=O);N!==P&&(q.depthFunc(N),h.depth_func=N);Q!==ra&&(q.depthMask(Q),h.depth_mask=Q);if(n[0]!==p[0]||n[1]!==p[1])q.depthRange(n[0],n[1]),p[0]=n[0],p[1]=n[1];pa!==J&&(q.frontFace(pa),h.frontFace=pa);K!==ba&&(q.lineWidth(K),h.lineWidth=K);if(w[0]!==y[0]||w[1]!==y[1])q.polygonOffset(w[0],w[1]),y[0]=w[0],y[1]=w[1];if(C[0]!==Ea[0]||C[1]!==Ea[1])q.sampleCoverage(C[0],C[1]),Ea[0]=C[0],Ea[1]=C[1];
if(x[0]!==v[0]||x[1]!==v[1]||x[2]!==v[2]||x[3]!==v[3])q.scissor(x[0],x[1],x[2],x[3]),v[0]=x[0],v[1]=x[1],v[2]=x[2],v[3]=x[3];if(na[0]!==I[0]||na[1]!==I[1]||na[2]!==I[2])q.stencilFunc(na[0],na[1],na[2]),I[0]=na[0],I[1]=na[1],I[2]=na[2];W!==la&&(q.stencilMask(W),h.stencil_mask=W);if(aa[0]!==E[0]||aa[1]!==E[1]||aa[2]!==E[2]||aa[3]!==E[3])q.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]),E[0]=aa[0],E[1]=aa[1],E[2]=aa[2],E[3]=aa[3];if(A[0]!==r[0]||A[1]!==r[1]||A[2]!==r[2]||A[3]!==r[3])q.stencilOpSeparate(A[0],
A[1],A[2],A[3]),r[0]=A[0],r[1]=A[1],r[2]=A[2],r[3]=A[3];if(H[0]!==F[0]||H[1]!==F[1]||H[2]!==F[2]||H[3]!==F[3])q.viewport(H[0],H[1],H[2],H[3]),F[0]=H[0],F[1]=H[1],F[2]=H[2],F[3]=H[3]},refresh:function(){var a,ga,t,ea,L,ma,G,S,V,R,O,M,N,P,Q,ra;h.dirty=!1;ga=m.blend_enable;t=m.cull_enable;ea=m.depth_enable;L=m.dither;ma=m.polygonOffset_enable;G=m.sample_alpha;S=m.sample_enable;V=m.scissor_enable;R=m.stencil_enable;O=m.cull_face;M=m.depth_func;N=m.depth_mask;P=m.frontFace;Q=m.lineWidth;ra=m.stencil_mask;
(a=u.next)?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null);u.cur=a;a=d[0];a.buffer?(q.enableVertexAttribArray(0),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=d[1];a.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(1),
q.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=d[2];a.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=d[3];a.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,a.x,a.y,a.z,
a.w),a.buffer=null);a=d[4];a.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=d[5];a.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=d[6];a.buffer?
(q.enableVertexAttribArray(6),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=d[7];a.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=d[8];a.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,
a.buffer.buffer),q.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(8),q.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=d[9];a.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=d[10];a.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(10,
a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=d[11];a.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=d[12];a.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(12,a.size,a.type,a.normalized,
a.stride,a.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=d[13];a.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=d[14];a.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(14),
q.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=d[15];a.buffer?(q.enableVertexAttribArray(15),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);b.currentVAO=null;b.setVAO(b.targetVAO);ga?q.enable(3042):q.disable(3042);h.blend_enable=ga;t?q.enable(2884):q.disable(2884);h.cull_enable=t;ea?q.enable(2929):q.disable(2929);h.depth_enable=ea;L?q.enable(3024):
q.disable(3024);h.dither=L;ma?q.enable(32823):q.disable(32823);h.polygonOffset_enable=ma;G?q.enable(32926):q.disable(32926);h.sample_alpha=G;S?q.enable(32928):q.disable(32928);h.sample_enable=S;V?q.enable(3089):q.disable(3089);h.scissor_enable=V;R?q.enable(2960):q.disable(2960);h.stencil_enable=R;q.blendColor(f[0],f[1],f[2],f[3]);c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];q.blendEquationSeparate(k[0],k[1]);z[0]=k[0];z[1]=k[1];q.blendFuncSeparate(B[0],B[1],B[2],B[3]);e[0]=B[0];e[1]=B[1];e[2]=B[2];e[3]=
B[3];q.colorMask(l[0],l[1],l[2],l[3]);g[0]=l[0];g[1]=l[1];g[2]=l[2];g[3]=l[3];q.cullFace(O);h.cull_face=O;q.depthFunc(M);h.depth_func=M;q.depthMask(N);h.depth_mask=N;q.depthRange(n[0],n[1]);p[0]=n[0];p[1]=n[1];q.frontFace(P);h.frontFace=P;q.lineWidth(Q);h.lineWidth=Q;q.polygonOffset(w[0],w[1]);y[0]=w[0];y[1]=w[1];q.sampleCoverage(C[0],C[1]);Ea[0]=C[0];Ea[1]=C[1];q.scissor(x[0],x[1],x[2],x[3]);v[0]=x[0];v[1]=x[1];v[2]=x[2];v[3]=x[3];q.stencilFunc(na[0],na[1],na[2]);I[0]=na[0];I[1]=na[1];I[2]=na[2];
q.stencilMask(ra);h.stencil_mask=ra;q.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]);E[0]=aa[0];E[1]=aa[1];E[2]=aa[2];E[3]=aa[3];q.stencilOpSeparate(A[0],A[1],A[2],A[3]);r[0]=A[0];r[1]=A[1];r[2]=A[2];r[3]=A[3];q.viewport(H[0],H[1],H[2],H[3]);F[0]=H[0];F[1]=H[1];F[2]=H[2];F[3]=H[3]}}},$3:function(a,d,h,u){var q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,na,I,r,E,A,ca,H,F,D,ga,t,ea,L,ma;q=a.context;m=a.current;b=a.framebuffer;f=a.gl;c=a.next;k=a.shader;z=a.vao;B=c.blend_color;e=m.blend_color;l=c.blend_equation;
g=m.blend_equation;n=c.blend_func;p=m.blend_func;w=c.colorMask;y=m.colorMask;C=c.depth_range;Ea=m.depth_range;x=c.polygonOffset_offset;v=m.polygonOffset_offset;na=c.sample_coverage;I=m.sample_coverage;r=c.scissor_box;E=m.scissor_box;A=c.stencil_func;ca=m.stencil_func;H=c.stencil_opBack;F=m.stencil_opBack;D=c.stencil_opFront;ga=m.stencil_opFront;t=c.viewport;ea=m.viewport;L={};ma={};return{batch:function(a,q){var h,T,O,M,N;h=b.next;h!==b.cur&&(h?f.bindFramebuffer(36160,h.framebuffer):f.bindFramebuffer(36160,
null),b.cur=h);if(m.dirty){h=c.dither;h!==m.dither&&(h?f.enable(3024):f.disable(3024),m.dither=h);h=c.blend_enable;h!==m.blend_enable&&(h?f.enable(3042):f.disable(3042),m.blend_enable=h);h=B[0];O=B[1];M=B[2];N=B[3];if(h!==e[0]||O!==e[1]||M!==e[2]||N!==e[3])f.blendColor(h,O,M,N),e[0]=h,e[1]=O,e[2]=M,e[3]=N;h=l[0];O=l[1];if(h!==g[0]||O!==g[1])f.blendEquationSeparate(h,O),g[0]=h,g[1]=O;h=n[0];O=n[1];M=n[2];N=n[3];if(h!==p[0]||O!==p[1]||M!==p[2]||N!==p[3])f.blendFuncSeparate(h,O,M,N),p[0]=h,p[1]=O,p[2]=
M,p[3]=N;h=c.depth_enable;h!==m.depth_enable&&(h?f.enable(2929):f.disable(2929),m.depth_enable=h);h=c.depth_func;h!==m.depth_func&&(f.depthFunc(h),m.depth_func=h);h=C[0];O=C[1];if(h!==Ea[0]||O!==Ea[1])f.depthRange(h,O),Ea[0]=h,Ea[1]=O;h=c.depth_mask;h!==m.depth_mask&&(f.depthMask(h),m.depth_mask=h);h=w[0];O=w[1];M=w[2];N=w[3];if(h!==y[0]||O!==y[1]||M!==y[2]||N!==y[3])f.colorMask(h,O,M,N),y[0]=h,y[1]=O,y[2]=M,y[3]=N;h=c.cull_enable;h!==m.cull_enable&&(h?f.enable(2884):f.disable(2884),m.cull_enable=
h);h=c.cull_face;h!==m.cull_face&&(f.cullFace(h),m.cull_face=h);h=c.frontFace;h!==m.frontFace&&(f.frontFace(h),m.frontFace=h);h=c.lineWidth;h!==m.lineWidth&&(f.lineWidth(h),m.lineWidth=h);h=c.polygonOffset_enable;h!==m.polygonOffset_enable&&(h?f.enable(32823):f.disable(32823),m.polygonOffset_enable=h);h=x[0];O=x[1];if(h!==v[0]||O!==v[1])f.polygonOffset(h,O),v[0]=h,v[1]=O;h=c.sample_alpha;h!==m.sample_alpha&&(h?f.enable(32926):f.disable(32926),m.sample_alpha=h);h=c.sample_enable;h!==m.sample_enable&&
(h?f.enable(32928):f.disable(32928),m.sample_enable=h);h=na[0];O=na[1];if(h!==I[0]||O!==I[1])f.sampleCoverage(h,O),I[0]=h,I[1]=O;h=c.stencil_enable;h!==m.stencil_enable&&(h?f.enable(2960):f.disable(2960),m.stencil_enable=h);h=c.stencil_mask;h!==m.stencil_mask&&(f.stencilMask(h),m.stencil_mask=h);h=A[0];O=A[1];M=A[2];if(h!==ca[0]||O!==ca[1]||M!==ca[2])f.stencilFunc(h,O,M),ca[0]=h,ca[1]=O,ca[2]=M;h=D[0];O=D[1];M=D[2];N=D[3];if(h!==ga[0]||O!==ga[1]||M!==ga[2]||N!==ga[3])f.stencilOpSeparate(h,O,M,N),
ga[0]=h,ga[1]=O,ga[2]=M,ga[3]=N;h=H[0];O=H[1];M=H[2];N=H[3];if(h!==F[0]||O!==F[1]||M!==F[2]||N!==F[3])f.stencilOpSeparate(h,O,M,N),F[0]=h,F[1]=O,F[2]=M,F[3]=N;h=c.scissor_enable;h!==m.scissor_enable&&(h?f.enable(3089):f.disable(3089),m.scissor_enable=h);h=r[0];O=r[1];M=r[2];N=r[3];if(h!==E[0]||O!==E[1]||M!==E[2]||N!==E[3])f.scissor(h,O,M,N),E[0]=h,E[1]=O,E[2]=M,E[3]=N;h=t[0];O=t[1];M=t[2];N=t[3];if(h!==ea[0]||O!==ea[1]||M!==ea[2]||N!==ea[3])f.viewport(h,O,M,N),ea[0]=h,ea[1]=O,ea[2]=M,ea[3]=N;m.dirty=
!1}if(h=m.profile)T=performance.now(),d.count+=q;O=k.program(k.vert,k.frag);f.useProgram(O.program);z.setVAO(null);M=O.id;(N=ma[M])||(N=ma[M]=u(O));N.call(this,a,q);z.setVAO(null);h&&(d.cpuTime+=performance.now()-T)},draw:function(a){var u,q,R,O,M;u=b.next;u!==b.cur&&(u?f.bindFramebuffer(36160,u.framebuffer):f.bindFramebuffer(36160,null),b.cur=u);if(m.dirty){u=c.dither;u!==m.dither&&(u?f.enable(3024):f.disable(3024),m.dither=u);u=c.blend_enable;u!==m.blend_enable&&(u?f.enable(3042):f.disable(3042),
m.blend_enable=u);u=B[0];R=B[1];O=B[2];M=B[3];if(u!==e[0]||R!==e[1]||O!==e[2]||M!==e[3])f.blendColor(u,R,O,M),e[0]=u,e[1]=R,e[2]=O,e[3]=M;u=l[0];R=l[1];if(u!==g[0]||R!==g[1])f.blendEquationSeparate(u,R),g[0]=u,g[1]=R;u=n[0];R=n[1];O=n[2];M=n[3];if(u!==p[0]||R!==p[1]||O!==p[2]||M!==p[3])f.blendFuncSeparate(u,R,O,M),p[0]=u,p[1]=R,p[2]=O,p[3]=M;u=c.depth_enable;u!==m.depth_enable&&(u?f.enable(2929):f.disable(2929),m.depth_enable=u);u=c.depth_func;u!==m.depth_func&&(f.depthFunc(u),m.depth_func=u);u=C[0];
R=C[1];if(u!==Ea[0]||R!==Ea[1])f.depthRange(u,R),Ea[0]=u,Ea[1]=R;u=c.depth_mask;u!==m.depth_mask&&(f.depthMask(u),m.depth_mask=u);u=w[0];R=w[1];O=w[2];M=w[3];if(u!==y[0]||R!==y[1]||O!==y[2]||M!==y[3])f.colorMask(u,R,O,M),y[0]=u,y[1]=R,y[2]=O,y[3]=M;u=c.cull_enable;u!==m.cull_enable&&(u?f.enable(2884):f.disable(2884),m.cull_enable=u);u=c.cull_face;u!==m.cull_face&&(f.cullFace(u),m.cull_face=u);u=c.frontFace;u!==m.frontFace&&(f.frontFace(u),m.frontFace=u);u=c.lineWidth;u!==m.lineWidth&&(f.lineWidth(u),
m.lineWidth=u);u=c.polygonOffset_enable;u!==m.polygonOffset_enable&&(u?f.enable(32823):f.disable(32823),m.polygonOffset_enable=u);u=x[0];R=x[1];if(u!==v[0]||R!==v[1])f.polygonOffset(u,R),v[0]=u,v[1]=R;u=c.sample_alpha;u!==m.sample_alpha&&(u?f.enable(32926):f.disable(32926),m.sample_alpha=u);u=c.sample_enable;u!==m.sample_enable&&(u?f.enable(32928):f.disable(32928),m.sample_enable=u);u=na[0];R=na[1];if(u!==I[0]||R!==I[1])f.sampleCoverage(u,R),I[0]=u,I[1]=R;u=c.stencil_enable;u!==m.stencil_enable&&
(u?f.enable(2960):f.disable(2960),m.stencil_enable=u);u=c.stencil_mask;u!==m.stencil_mask&&(f.stencilMask(u),m.stencil_mask=u);u=A[0];R=A[1];O=A[2];if(u!==ca[0]||R!==ca[1]||O!==ca[2])f.stencilFunc(u,R,O),ca[0]=u,ca[1]=R,ca[2]=O;u=D[0];R=D[1];O=D[2];M=D[3];if(u!==ga[0]||R!==ga[1]||O!==ga[2]||M!==ga[3])f.stencilOpSeparate(u,R,O,M),ga[0]=u,ga[1]=R,ga[2]=O,ga[3]=M;u=H[0];R=H[1];O=H[2];M=H[3];if(u!==F[0]||R!==F[1]||O!==F[2]||M!==F[3])f.stencilOpSeparate(u,R,O,M),F[0]=u,F[1]=R,F[2]=O,F[3]=M;u=c.scissor_enable;
u!==m.scissor_enable&&(u?f.enable(3089):f.disable(3089),m.scissor_enable=u);u=r[0];R=r[1];O=r[2];M=r[3];if(u!==E[0]||R!==E[1]||O!==E[2]||M!==E[3])f.scissor(u,R,O,M),E[0]=u,E[1]=R,E[2]=O,E[3]=M;u=t[0];R=t[1];O=t[2];M=t[3];if(u!==ea[0]||R!==ea[1]||O!==ea[2]||M!==ea[3])f.viewport(u,R,O,M),ea[0]=u,ea[1]=R,ea[2]=O,ea[3]=M;m.dirty=!1}if(u=m.profile)q=performance.now(),d.count++;R=k.program(k.vert,k.frag);f.useProgram(R.program);z.setVAO(null);O=R.id;(M=L[O])||(M=L[O]=h(R));M.call(this,a);z.setVAO(null);
u&&(d.cpuTime+=performance.now()-q)},scope:function(c,e,b){var l,a;if(l=m.profile)a=performance.now(),d.count++;e(q,c,b);l&&(d.cpuTime+=performance.now()-a)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,
na,I,r,E,A,ca,H,F,D,ga,t,ea,L,ma,G,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca){var ja,X,ua,Ka,Fa,fb,Y,Kc,bc,Ha,cc,Sb,ze,Id,Ad,Td,De,Ae,$d,re,Dd,yd,Qd,Od,Bd,Be,Qe,Ue,Jd,Ee,le,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa;ja=a.attributes;X=a.context;ua=a.current;Ka=a.draw;Fa=a.elements;fb=a.framebuffer;Y=a.gl;Kc=a.next;bc=a.shader;Ha=a.uniforms;cc=a.vao;Sb=Kc.blend_color;
ze=ua.blend_color;Id=Kc.blend_equation;Ad=ua.blend_equation;Td=Kc.blend_func;De=ua.blend_func;Ae=Kc.colorMask;$d=ua.colorMask;re=Kc.depth_range;Dd=ua.depth_range;yd=Kc.polygonOffset_offset;Qd=ua.polygonOffset_offset;Od=Kc.sample_coverage;Bd=ua.sample_coverage;Be=Kc.scissor_box;Qe=ua.scissor_box;Ue=Kc.stencil_func;Jd=ua.stencil_func;Ee=Kc.stencil_opBack;le=ua.stencil_opBack;be=Kc.stencil_opFront;Md=ua.stencil_opFront;Ed=Kc.viewport;pd=ua.viewport;bd={};td={};Oc=new Float32Array(16);rd=new Float32Array(16);
Gc=new Float32Array(16);gd=new Float32Array(16);Sc=new Float32Array(16);md=new Float32Array(16);Vb=new Float32Array(16);Eb=new Float32Array(16);vc=new Float32Array(16);yb=new Float32Array(16);yc=new Float32Array(16);Bb=new Float32Array(16);Lc=new Float32Array(16);mc=new Float32Array(16);Hc=new Float32Array(16);hd=new Float32Array(16);cd=new Float32Array(16);Ec=new Float32Array(16);fc=new Float32Array(16);Ic=new Float32Array(16);pc=new Float32Array(16);rc=new Float32Array(16);nc=new Float32Array(16);
qc=new Float32Array(16);ob=new Float32Array(16);Pc=new Float32Array(16);Qb=new Float32Array(16);cb=new Float32Array(16);Lb=new Float32Array(16);ab=new Float32Array(16);jb=new Float32Array(16);Wa=new Float32Array(16);return{batch:function(a,d){var h,C,x,t;h=fb.next;h!==fb.cur&&(h?Y.bindFramebuffer(36160,h.framebuffer):Y.bindFramebuffer(36160,null),fb.cur=h);if(ua.dirty){var v,T,A,Ea,I,E,D,ga,H,F,r,na,L,aa,ea,ca,ma,Ha,Sb,bc,Eb,Sc,Vb,Pa,Bb;v=Ae[0];T=Ae[1];A=Ae[2];Ea=Ae[3];if(v!==$d[0]||T!==$d[1]||A!==
$d[2]||Ea!==$d[3])Y.colorMask(v,T,A,Ea),$d[0]=v,$d[1]=T,$d[2]=A,$d[3]=Ea;I=Kc.frontFace;I!==ua.frontFace&&(Y.frontFace(I),ua.frontFace=I);E=Kc.polygonOffset_enable;E!==ua.polygonOffset_enable&&(E?Y.enable(32823):Y.disable(32823),ua.polygonOffset_enable=E);D=yd[0];ga=yd[1];if(D!==Qd[0]||ga!==Qd[1])Y.polygonOffset(D,ga),Qd[0]=D,Qd[1]=ga;H=Kc.sample_alpha;H!==ua.sample_alpha&&(H?Y.enable(32926):Y.disable(32926),ua.sample_alpha=H);F=Kc.sample_enable;F!==ua.sample_enable&&(F?Y.enable(32928):Y.disable(32928),
ua.sample_enable=F);r=Od[0];na=Od[1];if(r!==Bd[0]||na!==Bd[1])Y.sampleCoverage(r,na),Bd[0]=r,Bd[1]=na;L=Kc.stencil_enable;L!==ua.stencil_enable&&(L?Y.enable(2960):Y.disable(2960),ua.stencil_enable=L);aa=Kc.stencil_mask;aa!==ua.stencil_mask&&(Y.stencilMask(aa),ua.stencil_mask=aa);ea=Ue[0];ca=Ue[1];ma=Ue[2];if(ea!==Jd[0]||ca!==Jd[1]||ma!==Jd[2])Y.stencilFunc(ea,ca,ma),Jd[0]=ea,Jd[1]=ca,Jd[2]=ma;Ha=be[0];Sb=be[1];bc=be[2];Eb=be[3];if(Ha!==Md[0]||Sb!==Md[1]||bc!==Md[2]||Eb!==Md[3])Y.stencilOpSeparate(Ha,
Sb,bc,Eb),Md[0]=Ha,Md[1]=Sb,Md[2]=bc,Md[3]=Eb;Sc=Ee[0];Vb=Ee[1];Pa=Ee[2];Bb=Ee[3];if(Sc!==le[0]||Vb!==le[1]||Pa!==le[2]||Bb!==le[3])Y.stencilOpSeparate(Sc,Vb,Pa,Bb),le[0]=Sc,le[1]=Vb,le[2]=Pa,le[3]=Bb}Y.blendColor(0,0,0,0);ze[0]=0;ze[1]=0;ze[2]=0;ze[3]=0;Y.disable(3042);ua.blend_enable=!1;Y.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;Y.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;Y.enable(2884);ua.cull_enable=!0;Y.cullFace(1029);ua.cull_face=1029;Y.enable(2929);
ua.depth_enable=!0;Y.depthFunc(513);ua.depth_func=513;Y.depthMask(!0);ua.depth_mask=!0;Y.depthRange(0,1);Dd[0]=0;Dd[1]=1;Y.disable(3024);ua.dither=!1;Y.lineWidth(2);ua.lineWidth=2;Y.enable(3089);ua.scissor_enable=!0;C=ua.profile;ua.profile=!1;Y.useProgram(G.program);var Be,yb,md,Ma,mc,Za,Gc,Td,mb,Oa,vc,Ra,vb,wb,Sa,nb,rd,Id,Hc,bb,Lc,gd,Ya,Oc,Ab,$a,re,yc,Xb,Pb,Ed,Rb,hd;cc.setVAO(null);Be=Aa.location;yb=ja[Be];yb.buffer||Y.enableVertexAttribArray(Be);if(yb.type!==u.dtype||4!==yb.size||yb.buffer!==u||
!1!==yb.normalized||0!==yb.offset||0!==yb.stride)Y.bindBuffer(34962,u.buffer),Y.vertexAttribPointer(Be,4,u.dtype,!1,0,0),yb.type=u.dtype,yb.size=4,yb.buffer=u,yb.normalized=!1,yb.offset=0,yb.stride=0;md=Qa.location;Ma=ja[md];Ma.buffer||Y.enableVertexAttribArray(md);if(Ma.type!==q.dtype||4!==Ma.size||Ma.buffer!==q||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)Y.bindBuffer(34962,q.buffer),Y.vertexAttribPointer(md,4,q.dtype,!1,0,0),Ma.type=q.dtype,Ma.size=4,Ma.buffer=q,Ma.normalized=!1,Ma.offset=
0,Ma.stride=0;mc=Ja.location;Za=ja[mc];Za.buffer||Y.enableVertexAttribArray(mc);if(Za.type!==m.dtype||4!==Za.size||Za.buffer!==m||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)Y.bindBuffer(34962,m.buffer),Y.vertexAttribPointer(mc,4,m.dtype,!1,0,0),Za.type=m.dtype,Za.size=4,Za.buffer=m,Za.normalized=!1,Za.offset=0,Za.stride=0;Gc=Zb.location;Td=ja[Gc];Td.buffer||Y.enableVertexAttribArray(Gc);if(Td.type!==b.dtype||4!==Td.size||Td.buffer!==b||!1!==Td.normalized||0!==Td.offset||0!==Td.stride)Y.bindBuffer(34962,
b.buffer),Y.vertexAttribPointer(Gc,4,b.dtype,!1,0,0),Td.type=b.dtype,Td.size=4,Td.buffer=b,Td.normalized=!1,Td.offset=0,Td.stride=0;mb=Ua.location;Oa=ja[mb];Oa.buffer||Y.enableVertexAttribArray(mb);if(Oa.type!==f.dtype||4!==Oa.size||Oa.buffer!==f||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(mb,4,f.dtype,!1,0,0),Oa.type=f.dtype,Oa.size=4,Oa.buffer=f,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;vc=ia.location;Ra=ja[vc];Ra.buffer||Y.enableVertexAttribArray(vc);
if(Ra.type!==c.dtype||4!==Ra.size||Ra.buffer!==c||!1!==Ra.normalized||0!==Ra.offset||0!==Ra.stride)Y.bindBuffer(34962,c.buffer),Y.vertexAttribPointer(vc,4,c.dtype,!1,0,0),Ra.type=c.dtype,Ra.size=4,Ra.buffer=c,Ra.normalized=!1,Ra.offset=0,Ra.stride=0;vb=fa.location;wb=ja[vb];wb.buffer||Y.enableVertexAttribArray(vb);if(wb.type!==k.dtype||4!==wb.size||wb.buffer!==k||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)Y.bindBuffer(34962,k.buffer),Y.vertexAttribPointer(vb,4,k.dtype,!1,0,0),wb.type=k.dtype,
wb.size=4,wb.buffer=k,wb.normalized=!1,wb.offset=0,wb.stride=0;Sa=sa.location;nb=ja[Sa];nb.buffer||Y.enableVertexAttribArray(Sa);if(nb.type!==z.dtype||4!==nb.size||nb.buffer!==z||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)Y.bindBuffer(34962,z.buffer),Y.vertexAttribPointer(Sa,4,z.dtype,!1,0,0),nb.type=z.dtype,nb.size=4,nb.buffer=z,nb.normalized=!1,nb.offset=0,nb.stride=0;rd=va.location;Id=ja[rd];Id.buffer||Y.enableVertexAttribArray(rd);if(Id.type!==B.dtype||4!==Id.size||Id.buffer!==B||!1!==Id.normalized||
0!==Id.offset||0!==Id.stride)Y.bindBuffer(34962,B.buffer),Y.vertexAttribPointer(rd,4,B.dtype,!1,0,0),Id.type=B.dtype,Id.size=4,Id.buffer=B,Id.normalized=!1,Id.offset=0,Id.stride=0;Hc=Da.location;bb=ja[Hc];bb.buffer||Y.enableVertexAttribArray(Hc);if(bb.type!==e.dtype||4!==bb.size||bb.buffer!==e||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)Y.bindBuffer(34962,e.buffer),Y.vertexAttribPointer(Hc,4,e.dtype,!1,0,0),bb.type=e.dtype,bb.size=4,bb.buffer=e,bb.normalized=!1,bb.offset=0,bb.stride=0;Lc=rb.location;
gd=ja[Lc];gd.buffer||Y.enableVertexAttribArray(Lc);if(gd.type!==l.dtype||4!==gd.size||gd.buffer!==l||!1!==gd.normalized||0!==gd.offset||0!==gd.stride)Y.bindBuffer(34962,l.buffer),Y.vertexAttribPointer(Lc,4,l.dtype,!1,0,0),gd.type=l.dtype,gd.size=4,gd.buffer=l,gd.normalized=!1,gd.offset=0,gd.stride=0;Ya=Gb.location;Oc=ja[Ya];Oc.buffer||Y.enableVertexAttribArray(Ya);if(Oc.type!==g.dtype||4!==Oc.size||Oc.buffer!==g||!1!==Oc.normalized||0!==Oc.offset||0!==Oc.stride)Y.bindBuffer(34962,g.buffer),Y.vertexAttribPointer(Ya,
4,g.dtype,!1,0,0),Oc.type=g.dtype,Oc.size=4,Oc.buffer=g,Oc.normalized=!1,Oc.offset=0,Oc.stride=0;Ab=Z.location;$a=ja[Ab];$a.buffer||Y.enableVertexAttribArray(Ab);if($a.type!==n.dtype||4!==$a.size||$a.buffer!==n||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)Y.bindBuffer(34962,n.buffer),Y.vertexAttribPointer(Ab,4,n.dtype,!1,0,0),$a.type=n.dtype,$a.size=4,$a.buffer=n,$a.normalized=!1,$a.offset=0,$a.stride=0;re=U.location;yc=ja[re];yc.buffer||Y.enableVertexAttribArray(re);if(yc.type!==p.dtype||4!==
yc.size||yc.buffer!==p||!1!==yc.normalized||0!==yc.offset||0!==yc.stride)Y.bindBuffer(34962,p.buffer),Y.vertexAttribPointer(re,4,p.dtype,!1,0,0),yc.type=p.dtype,yc.size=4,yc.buffer=p,yc.normalized=!1,yc.offset=0,yc.stride=0;Xb=ya.location;Pb=ja[Xb];Pb.buffer||Y.enableVertexAttribArray(Xb);if(Pb.type!==w.dtype||4!==Pb.size||Pb.buffer!==w||!1!==Pb.normalized||0!==Pb.offset||0!==Pb.stride)Y.bindBuffer(34962,w.buffer),Y.vertexAttribPointer(Xb,4,w.dtype,!1,0,0),Pb.type=w.dtype,Pb.size=4,Pb.buffer=w,Pb.normalized=
!1,Pb.offset=0,Pb.stride=0;Ed=V.location;Rb=ja[Ed];Rb.buffer||Y.enableVertexAttribArray(Ed);if(Rb.type!==y.dtype||4!==Rb.size||Rb.buffer!==y||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)Y.bindBuffer(34962,y.buffer),Y.vertexAttribPointer(Ed,4,y.dtype,!1,0,0),Rb.type=y.dtype,Rb.size=4,Rb.buffer=y,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;Y.uniform1i(Ga.location,S.bind());(hd=Ka.elements)?Y.bindBuffer(34963,hd.buffer.buffer):cc.currentVAO&&(hd=Fa.getElements(cc.currentVAO.elements))&&Y.bindBuffer(34963,
hd.buffer.buffer);for(x=0;x<d;++x){t=a[x];var Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe;bd.height=t.viewportHeight;bd.width=t.viewportWidth;bd.x=t.viewportX;bd.y=t.viewportY;Fc=bd.x|0;vd=bd.y|0;Qc="width"in bd?bd.width|0:X.framebufferWidth-Fc;Yc="height"in bd?bd.height|0:X.framebufferHeight-vd;sd=X.viewportWidth;X.viewportWidth=Qc;oc=X.viewportHeight;X.viewportHeight=
Yc;Y.viewport(Fc,vd,Qc,Yc);pd[0]=Fc;pd[1]=vd;pd[2]=Qc;pd[3]=Yc;td.height=t.scissorHeight;td.width=t.scissorWidth;td.x=t.scissorX;td.y=t.scissorY;xc=td.x|0;hc=td.y|0;db="width"in td?td.width|0:X.framebufferWidth-xc;tc="height"in td?td.height|0:X.framebufferHeight-hc;Y.scissor(xc,hc,db,tc);Qe[0]=xc;Qe[1]=hc;Qe[2]=db;Qe[3]=tc;Tb=t.dim0A;Y.uniformMatrix4fv(O.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(cd[0]=Tb[0],cd[1]=Tb[1],cd[2]=Tb[2],cd[3]=Tb[3],cd[4]=Tb[4],cd[5]=Tb[5],cd[6]=Tb[6],
cd[7]=Tb[7],cd[8]=Tb[8],cd[9]=Tb[9],cd[10]=Tb[10],cd[11]=Tb[11],cd[12]=Tb[12],cd[13]=Tb[13],cd[14]=Tb[14],cd[15]=Tb[15],cd));Yb=t.dim1A;Y.uniformMatrix4fv(Q.location,!1,Array.isArray(Yb)||Yb instanceof Float32Array?Yb:(Ec[0]=Yb[0],Ec[1]=Yb[1],Ec[2]=Yb[2],Ec[3]=Yb[3],Ec[4]=Yb[4],Ec[5]=Yb[5],Ec[6]=Yb[6],Ec[7]=Yb[7],Ec[8]=Yb[8],Ec[9]=Yb[9],Ec[10]=Yb[10],Ec[11]=Yb[11],Ec[12]=Yb[12],Ec[13]=Yb[13],Ec[14]=Yb[14],Ec[15]=Yb[15],Ec));ec=t.dim0B;Y.uniformMatrix4fv(M.location,!1,Array.isArray(ec)||ec instanceof
Float32Array?ec:(fc[0]=ec[0],fc[1]=ec[1],fc[2]=ec[2],fc[3]=ec[3],fc[4]=ec[4],fc[5]=ec[5],fc[6]=ec[6],fc[7]=ec[7],fc[8]=ec[8],fc[9]=ec[9],fc[10]=ec[10],fc[11]=ec[11],fc[12]=ec[12],fc[13]=ec[13],fc[14]=ec[14],fc[15]=ec[15],fc));ic=t.dim1B;Y.uniformMatrix4fv(ra.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Ic[0]=ic[0],Ic[1]=ic[1],Ic[2]=ic[2],Ic[3]=ic[3],Ic[4]=ic[4],Ic[5]=ic[5],Ic[6]=ic[6],Ic[7]=ic[7],Ic[8]=ic[8],Ic[9]=ic[9],Ic[10]=ic[10],Ic[11]=ic[11],Ic[12]=ic[12],Ic[13]=ic[13],Ic[14]=
ic[14],Ic[15]=ic[15],Ic));zc=t.dim0C;Y.uniformMatrix4fv(N.location,!1,Array.isArray(zc)||zc instanceof Float32Array?zc:(pc[0]=zc[0],pc[1]=zc[1],pc[2]=zc[2],pc[3]=zc[3],pc[4]=zc[4],pc[5]=zc[5],pc[6]=zc[6],pc[7]=zc[7],pc[8]=zc[8],pc[9]=zc[9],pc[10]=zc[10],pc[11]=zc[11],pc[12]=zc[12],pc[13]=zc[13],pc[14]=zc[14],pc[15]=zc[15],pc));Cc=t.dim1C;Y.uniformMatrix4fv(pa.location,!1,Array.isArray(Cc)||Cc instanceof Float32Array?Cc:(rc[0]=Cc[0],rc[1]=Cc[1],rc[2]=Cc[2],rc[3]=Cc[3],rc[4]=Cc[4],rc[5]=Cc[5],rc[6]=
Cc[6],rc[7]=Cc[7],rc[8]=Cc[8],rc[9]=Cc[9],rc[10]=Cc[10],rc[11]=Cc[11],rc[12]=Cc[12],rc[13]=Cc[13],rc[14]=Cc[14],rc[15]=Cc[15],rc));dd=t.dim0D;Y.uniformMatrix4fv(P.location,!1,Array.isArray(dd)||dd instanceof Float32Array?dd:(nc[0]=dd[0],nc[1]=dd[1],nc[2]=dd[2],nc[3]=dd[3],nc[4]=dd[4],nc[5]=dd[5],nc[6]=dd[6],nc[7]=dd[7],nc[8]=dd[8],nc[9]=dd[9],nc[10]=dd[10],nc[11]=dd[11],nc[12]=dd[12],nc[13]=dd[13],nc[14]=dd[14],nc[15]=dd[15],nc));Tc=t.dim1D;Y.uniformMatrix4fv(J.location,!1,Array.isArray(Tc)||Tc instanceof
Float32Array?Tc:(qc[0]=Tc[0],qc[1]=Tc[1],qc[2]=Tc[2],qc[3]=Tc[3],qc[4]=Tc[4],qc[5]=Tc[5],qc[6]=Tc[6],qc[7]=Tc[7],qc[8]=Tc[8],qc[9]=Tc[9],qc[10]=Tc[10],qc[11]=Tc[11],qc[12]=Tc[12],qc[13]=Tc[13],qc[14]=Tc[14],qc[15]=Tc[15],qc));Uc=t.loA;Y.uniformMatrix4fv(Ba.location,!1,Array.isArray(Uc)||Uc instanceof Float32Array?Uc:(ob[0]=Uc[0],ob[1]=Uc[1],ob[2]=Uc[2],ob[3]=Uc[3],ob[4]=Uc[4],ob[5]=Uc[5],ob[6]=Uc[6],ob[7]=Uc[7],ob[8]=Uc[8],ob[9]=Uc[9],ob[10]=Uc[10],ob[11]=Uc[11],ob[12]=Uc[12],ob[13]=Uc[13],ob[14]=
Uc[14],ob[15]=Uc[15],ob));Vc=t.hiA;Y.uniformMatrix4fv(ba.location,!1,Array.isArray(Vc)||Vc instanceof Float32Array?Vc:(Pc[0]=Vc[0],Pc[1]=Vc[1],Pc[2]=Vc[2],Pc[3]=Vc[3],Pc[4]=Vc[4],Pc[5]=Vc[5],Pc[6]=Vc[6],Pc[7]=Vc[7],Pc[8]=Vc[8],Pc[9]=Vc[9],Pc[10]=Vc[10],Pc[11]=Vc[11],Pc[12]=Vc[12],Pc[13]=Vc[13],Pc[14]=Vc[14],Pc[15]=Vc[15],Pc));Zc=t.loB;Y.uniformMatrix4fv(wa.location,!1,Array.isArray(Zc)||Zc instanceof Float32Array?Zc:(Qb[0]=Zc[0],Qb[1]=Zc[1],Qb[2]=Zc[2],Qb[3]=Zc[3],Qb[4]=Zc[4],Qb[5]=Zc[5],Qb[6]=Zc[6],
Qb[7]=Zc[7],Qb[8]=Zc[8],Qb[9]=Zc[9],Qb[10]=Zc[10],Qb[11]=Zc[11],Qb[12]=Zc[12],Qb[13]=Zc[13],Qb[14]=Zc[14],Qb[15]=Zc[15],Qb));od=t.hiB;Y.uniformMatrix4fv(W.location,!1,Array.isArray(od)||od instanceof Float32Array?od:(cb[0]=od[0],cb[1]=od[1],cb[2]=od[2],cb[3]=od[3],cb[4]=od[4],cb[5]=od[5],cb[6]=od[6],cb[7]=od[7],cb[8]=od[8],cb[9]=od[9],cb[10]=od[10],cb[11]=od[11],cb[12]=od[12],cb[13]=od[13],cb[14]=od[14],cb[15]=od[15],cb));ed=t.loC;Y.uniformMatrix4fv(da.location,!1,Array.isArray(ed)||ed instanceof
Float32Array?ed:(Lb[0]=ed[0],Lb[1]=ed[1],Lb[2]=ed[2],Lb[3]=ed[3],Lb[4]=ed[4],Lb[5]=ed[5],Lb[6]=ed[6],Lb[7]=ed[7],Lb[8]=ed[8],Lb[9]=ed[9],Lb[10]=ed[10],Lb[11]=ed[11],Lb[12]=ed[12],Lb[13]=ed[13],Lb[14]=ed[14],Lb[15]=ed[15],Lb));$c=t.hiC;Y.uniformMatrix4fv(la.location,!1,Array.isArray($c)||$c instanceof Float32Array?$c:(ab[0]=$c[0],ab[1]=$c[1],ab[2]=$c[2],ab[3]=$c[3],ab[4]=$c[4],ab[5]=$c[5],ab[6]=$c[6],ab[7]=$c[7],ab[8]=$c[8],ab[9]=$c[9],ab[10]=$c[10],ab[11]=$c[11],ab[12]=$c[12],ab[13]=$c[13],ab[14]=
$c[14],ab[15]=$c[15],ab));lc=t.loD;Y.uniformMatrix4fv(xa.location,!1,Array.isArray(lc)||lc instanceof Float32Array?lc:(jb[0]=lc[0],jb[1]=lc[1],jb[2]=lc[2],jb[3]=lc[3],jb[4]=lc[4],jb[5]=lc[5],jb[6]=lc[6],jb[7]=lc[7],jb[8]=lc[8],jb[9]=lc[9],jb[10]=lc[10],jb[11]=lc[11],jb[12]=lc[12],jb[13]=lc[13],jb[14]=lc[14],jb[15]=lc[15],jb));dc=t.hiD;Y.uniformMatrix4fv(ha.location,!1,Array.isArray(dc)||dc instanceof Float32Array?dc:(Wa[0]=dc[0],Wa[1]=dc[1],Wa[2]=dc[2],Wa[3]=dc[3],Wa[4]=dc[4],Wa[5]=dc[5],Wa[6]=dc[6],
Wa[7]=dc[7],Wa[8]=dc[8],Wa[9]=dc[9],Wa[10]=dc[10],Wa[11]=dc[11],Wa[12]=dc[12],Wa[13]=dc[13],Wa[14]=dc[14],Wa[15]=dc[15],Wa));ad=t.resolution;Xc=ad[0];Ac=ad[1];x&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,Y.uniform2f(qa.location,Xc,Ac));Cd=t.viewBoxPos;ye=Cd[0];kd=Cd[1];x&&oe===ye&&Fe===kd||(oe=ye,Fe=kd,Y.uniform2f(za.location,ye,kd));Fd=t.viewBoxSize;he=Fd[0];Ud=Fd[1];x&&ee===he&&Nd===Ud||(ee=he,Nd=Ud,Y.uniform2f(Ca.location,he,Ud));Kd=t.maskHeight;x&&qd===Kd||(qd=Kd,Y.uniform1f(ka.location,Kd));Wc=t.drwLayer;
x&&wd===Wc||(wd=Wc,Y.uniform1f(K.location,Wc));ud=t.contextColor;ld=ud[0];Gd=ud[1];je=ud[2];ue=ud[3];x&&xd===ld&&Hd===Gd&&me===je&&ne===ue||(xd=ld,Hd=Gd,me=je,ne=ue,Y.uniform4f(R.location,ld,Gd,je,ue));(ke=t.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);ie=ke._texture;Y.uniform1i(oa.location,ie.bind());ve=t.offset;if(fe=t.count)hd?Y.drawElements(1,fe,hd.type,ve<<(hd.type-5121>>1)):Y.drawArrays(1,ve,fe),X.viewportWidth=sd,X.viewportHeight=oc,ie.unbind()}S.unbind();ua.dirty=!0;cc.setVAO(null);
ua.profile=C},draw:function(a){var d,x,t,v,A,Ea;d=fb.next;d!==fb.cur&&(d?Y.bindFramebuffer(36160,d.framebuffer):Y.bindFramebuffer(36160,null),fb.cur=d);if(ua.dirty){d=Ae[0];Ea=Ae[1];x=Ae[2];t=Ae[3];if(d!==$d[0]||Ea!==$d[1]||x!==$d[2]||t!==$d[3])Y.colorMask(d,Ea,x,t),$d[0]=d,$d[1]=Ea,$d[2]=x,$d[3]=t;d=Kc.frontFace;d!==ua.frontFace&&(Y.frontFace(d),ua.frontFace=d);d=Kc.polygonOffset_enable;d!==ua.polygonOffset_enable&&(d?Y.enable(32823):Y.disable(32823),ua.polygonOffset_enable=d);d=yd[0];Ea=yd[1];if(d!==
Qd[0]||Ea!==Qd[1])Y.polygonOffset(d,Ea),Qd[0]=d,Qd[1]=Ea;d=Kc.sample_alpha;d!==ua.sample_alpha&&(d?Y.enable(32926):Y.disable(32926),ua.sample_alpha=d);d=Kc.sample_enable;d!==ua.sample_enable&&(d?Y.enable(32928):Y.disable(32928),ua.sample_enable=d);d=Od[0];Ea=Od[1];if(d!==Bd[0]||Ea!==Bd[1])Y.sampleCoverage(d,Ea),Bd[0]=d,Bd[1]=Ea;d=Kc.stencil_enable;d!==ua.stencil_enable&&(d?Y.enable(2960):Y.disable(2960),ua.stencil_enable=d);d=Kc.stencil_mask;d!==ua.stencil_mask&&(Y.stencilMask(d),ua.stencil_mask=
d);d=Ue[0];Ea=Ue[1];x=Ue[2];if(d!==Jd[0]||Ea!==Jd[1]||x!==Jd[2])Y.stencilFunc(d,Ea,x),Jd[0]=d,Jd[1]=Ea,Jd[2]=x;d=be[0];Ea=be[1];x=be[2];t=be[3];if(d!==Md[0]||Ea!==Md[1]||x!==Md[2]||t!==Md[3])Y.stencilOpSeparate(d,Ea,x,t),Md[0]=d,Md[1]=Ea,Md[2]=x,Md[3]=t;d=Ee[0];Ea=Ee[1];x=Ee[2];t=Ee[3];if(d!==le[0]||Ea!==le[1]||x!==le[2]||t!==le[3])Y.stencilOpSeparate(d,Ea,x,t),le[0]=d,le[1]=Ea,le[2]=x,le[3]=t}bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;x=bd.x|0;t=bd.y|0;
v="width"in bd?bd.width|0:X.framebufferWidth-x;A="height"in bd?bd.height|0:X.framebufferHeight-t;d=X.viewportWidth;X.viewportWidth=v;Ea=X.viewportHeight;X.viewportHeight=A;Y.viewport(x,t,v,A);pd[0]=x;pd[1]=t;pd[2]=v;pd[3]=A;Y.blendColor(0,0,0,0);ze[0]=0;ze[1]=0;ze[2]=0;ze[3]=0;Y.disable(3042);ua.blend_enable=!1;Y.blendEquationSeparate(32774,32774);Ad[0]=32774;Ad[1]=32774;Y.blendFuncSeparate(770,771,1,1);De[0]=770;De[1]=771;De[2]=1;De[3]=1;Y.enable(2884);ua.cull_enable=!0;Y.cullFace(1029);ua.cull_face=
1029;Y.enable(2929);ua.depth_enable=!0;Y.depthFunc(513);ua.depth_func=513;Y.depthMask(!0);ua.depth_mask=!0;Y.depthRange(0,1);Dd[0]=0;Dd[1]=1;Y.disable(3024);ua.dither=!1;Y.lineWidth(2);ua.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;x=td.x|0;t=td.y|0;v="width"in td?td.width|0:X.framebufferWidth-x;A="height"in td?td.height|0:X.framebufferHeight-t;Y.scissor(x,t,v,A);Qe[0]=x;Qe[1]=t;Qe[2]=v;Qe[3]=A;Y.enable(3089);ua.scissor_enable=!0;x=ua.profile;ua.profile=
!1;Y.useProgram(h.program);cc.setVAO(null);t=Aa.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==u.dtype||4!==v.size||v.buffer!==u||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,u.buffer),Y.vertexAttribPointer(t,4,u.dtype,!1,0,0),v.type=u.dtype,v.size=4,v.buffer=u,v.normalized=!1,v.offset=0,v.stride=0;t=Qa.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==q.dtype||4!==v.size||v.buffer!==q||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,
q.buffer),Y.vertexAttribPointer(t,4,q.dtype,!1,0,0),v.type=q.dtype,v.size=4,v.buffer=q,v.normalized=!1,v.offset=0,v.stride=0;t=Ja.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==m.dtype||4!==v.size||v.buffer!==m||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,m.buffer),Y.vertexAttribPointer(t,4,m.dtype,!1,0,0),v.type=m.dtype,v.size=4,v.buffer=m,v.normalized=!1,v.offset=0,v.stride=0;t=Zb.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==b.dtype||
4!==v.size||v.buffer!==b||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,b.buffer),Y.vertexAttribPointer(t,4,b.dtype,!1,0,0),v.type=b.dtype,v.size=4,v.buffer=b,v.normalized=!1,v.offset=0,v.stride=0;t=Ua.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==f.dtype||4!==v.size||v.buffer!==f||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(t,4,f.dtype,!1,0,0),v.type=f.dtype,v.size=4,v.buffer=f,v.normalized=!1,v.offset=
0,v.stride=0;t=ia.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==c.dtype||4!==v.size||v.buffer!==c||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,c.buffer),Y.vertexAttribPointer(t,4,c.dtype,!1,0,0),v.type=c.dtype,v.size=4,v.buffer=c,v.normalized=!1,v.offset=0,v.stride=0;t=fa.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==k.dtype||4!==v.size||v.buffer!==k||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,k.buffer),Y.vertexAttribPointer(t,
4,k.dtype,!1,0,0),v.type=k.dtype,v.size=4,v.buffer=k,v.normalized=!1,v.offset=0,v.stride=0;t=sa.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==z.dtype||4!==v.size||v.buffer!==z||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,z.buffer),Y.vertexAttribPointer(t,4,z.dtype,!1,0,0),v.type=z.dtype,v.size=4,v.buffer=z,v.normalized=!1,v.offset=0,v.stride=0;t=va.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==B.dtype||4!==v.size||v.buffer!==B||!1!==
v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,B.buffer),Y.vertexAttribPointer(t,4,B.dtype,!1,0,0),v.type=B.dtype,v.size=4,v.buffer=B,v.normalized=!1,v.offset=0,v.stride=0;t=Da.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==e.dtype||4!==v.size||v.buffer!==e||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,e.buffer),Y.vertexAttribPointer(t,4,e.dtype,!1,0,0),v.type=e.dtype,v.size=4,v.buffer=e,v.normalized=!1,v.offset=0,v.stride=0;t=rb.location;v=ja[t];
v.buffer||Y.enableVertexAttribArray(t);if(v.type!==l.dtype||4!==v.size||v.buffer!==l||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,l.buffer),Y.vertexAttribPointer(t,4,l.dtype,!1,0,0),v.type=l.dtype,v.size=4,v.buffer=l,v.normalized=!1,v.offset=0,v.stride=0;t=Gb.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==g.dtype||4!==v.size||v.buffer!==g||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,g.buffer),Y.vertexAttribPointer(t,4,g.dtype,!1,0,0),
v.type=g.dtype,v.size=4,v.buffer=g,v.normalized=!1,v.offset=0,v.stride=0;t=Z.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==n.dtype||4!==v.size||v.buffer!==n||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,n.buffer),Y.vertexAttribPointer(t,4,n.dtype,!1,0,0),v.type=n.dtype,v.size=4,v.buffer=n,v.normalized=!1,v.offset=0,v.stride=0;t=U.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==p.dtype||4!==v.size||v.buffer!==p||!1!==v.normalized||0!==v.offset||
0!==v.stride)Y.bindBuffer(34962,p.buffer),Y.vertexAttribPointer(t,4,p.dtype,!1,0,0),v.type=p.dtype,v.size=4,v.buffer=p,v.normalized=!1,v.offset=0,v.stride=0;t=ya.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);if(v.type!==w.dtype||4!==v.size||v.buffer!==w||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,w.buffer),Y.vertexAttribPointer(t,4,w.dtype,!1,0,0),v.type=w.dtype,v.size=4,v.buffer=w,v.normalized=!1,v.offset=0,v.stride=0;t=V.location;v=ja[t];v.buffer||Y.enableVertexAttribArray(t);
if(v.type!==y.dtype||4!==v.size||v.buffer!==y||!1!==v.normalized||0!==v.offset||0!==v.stride)Y.bindBuffer(34962,y.buffer),Y.vertexAttribPointer(t,4,y.dtype,!1,0,0),v.type=y.dtype,v.size=4,v.buffer=y,v.normalized=!1,v.offset=0,v.stride=0;t=a.dim0A;Y.uniformMatrix4fv(O.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Oc[0]=t[0],Oc[1]=t[1],Oc[2]=t[2],Oc[3]=t[3],Oc[4]=t[4],Oc[5]=t[5],Oc[6]=t[6],Oc[7]=t[7],Oc[8]=t[8],Oc[9]=t[9],Oc[10]=t[10],Oc[11]=t[11],Oc[12]=t[12],Oc[13]=t[13],Oc[14]=t[14],
Oc[15]=t[15],Oc));t=a.dim1A;Y.uniformMatrix4fv(Q.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(rd[0]=t[0],rd[1]=t[1],rd[2]=t[2],rd[3]=t[3],rd[4]=t[4],rd[5]=t[5],rd[6]=t[6],rd[7]=t[7],rd[8]=t[8],rd[9]=t[9],rd[10]=t[10],rd[11]=t[11],rd[12]=t[12],rd[13]=t[13],rd[14]=t[14],rd[15]=t[15],rd));t=a.dim0B;Y.uniformMatrix4fv(M.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Gc[0]=t[0],Gc[1]=t[1],Gc[2]=t[2],Gc[3]=t[3],Gc[4]=t[4],Gc[5]=t[5],Gc[6]=t[6],Gc[7]=t[7],Gc[8]=t[8],Gc[9]=t[9],
Gc[10]=t[10],Gc[11]=t[11],Gc[12]=t[12],Gc[13]=t[13],Gc[14]=t[14],Gc[15]=t[15],Gc));t=a.dim1B;Y.uniformMatrix4fv(ra.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(gd[0]=t[0],gd[1]=t[1],gd[2]=t[2],gd[3]=t[3],gd[4]=t[4],gd[5]=t[5],gd[6]=t[6],gd[7]=t[7],gd[8]=t[8],gd[9]=t[9],gd[10]=t[10],gd[11]=t[11],gd[12]=t[12],gd[13]=t[13],gd[14]=t[14],gd[15]=t[15],gd));t=a.dim0C;Y.uniformMatrix4fv(N.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Sc[0]=t[0],Sc[1]=t[1],Sc[2]=t[2],Sc[3]=t[3],
Sc[4]=t[4],Sc[5]=t[5],Sc[6]=t[6],Sc[7]=t[7],Sc[8]=t[8],Sc[9]=t[9],Sc[10]=t[10],Sc[11]=t[11],Sc[12]=t[12],Sc[13]=t[13],Sc[14]=t[14],Sc[15]=t[15],Sc));t=a.dim1C;Y.uniformMatrix4fv(pa.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(md[0]=t[0],md[1]=t[1],md[2]=t[2],md[3]=t[3],md[4]=t[4],md[5]=t[5],md[6]=t[6],md[7]=t[7],md[8]=t[8],md[9]=t[9],md[10]=t[10],md[11]=t[11],md[12]=t[12],md[13]=t[13],md[14]=t[14],md[15]=t[15],md));t=a.dim0D;Y.uniformMatrix4fv(P.location,!1,Array.isArray(t)||t instanceof
Float32Array?t:(Vb[0]=t[0],Vb[1]=t[1],Vb[2]=t[2],Vb[3]=t[3],Vb[4]=t[4],Vb[5]=t[5],Vb[6]=t[6],Vb[7]=t[7],Vb[8]=t[8],Vb[9]=t[9],Vb[10]=t[10],Vb[11]=t[11],Vb[12]=t[12],Vb[13]=t[13],Vb[14]=t[14],Vb[15]=t[15],Vb));t=a.dim1D;Y.uniformMatrix4fv(J.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Eb[0]=t[0],Eb[1]=t[1],Eb[2]=t[2],Eb[3]=t[3],Eb[4]=t[4],Eb[5]=t[5],Eb[6]=t[6],Eb[7]=t[7],Eb[8]=t[8],Eb[9]=t[9],Eb[10]=t[10],Eb[11]=t[11],Eb[12]=t[12],Eb[13]=t[13],Eb[14]=t[14],Eb[15]=t[15],Eb));t=a.loA;Y.uniformMatrix4fv(Ba.location,
!1,Array.isArray(t)||t instanceof Float32Array?t:(vc[0]=t[0],vc[1]=t[1],vc[2]=t[2],vc[3]=t[3],vc[4]=t[4],vc[5]=t[5],vc[6]=t[6],vc[7]=t[7],vc[8]=t[8],vc[9]=t[9],vc[10]=t[10],vc[11]=t[11],vc[12]=t[12],vc[13]=t[13],vc[14]=t[14],vc[15]=t[15],vc));t=a.hiA;Y.uniformMatrix4fv(ba.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(yb[0]=t[0],yb[1]=t[1],yb[2]=t[2],yb[3]=t[3],yb[4]=t[4],yb[5]=t[5],yb[6]=t[6],yb[7]=t[7],yb[8]=t[8],yb[9]=t[9],yb[10]=t[10],yb[11]=t[11],yb[12]=t[12],yb[13]=t[13],yb[14]=
t[14],yb[15]=t[15],yb));t=a.loB;Y.uniformMatrix4fv(wa.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(yc[0]=t[0],yc[1]=t[1],yc[2]=t[2],yc[3]=t[3],yc[4]=t[4],yc[5]=t[5],yc[6]=t[6],yc[7]=t[7],yc[8]=t[8],yc[9]=t[9],yc[10]=t[10],yc[11]=t[11],yc[12]=t[12],yc[13]=t[13],yc[14]=t[14],yc[15]=t[15],yc));t=a.hiB;Y.uniformMatrix4fv(W.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Bb[0]=t[0],Bb[1]=t[1],Bb[2]=t[2],Bb[3]=t[3],Bb[4]=t[4],Bb[5]=t[5],Bb[6]=t[6],Bb[7]=t[7],Bb[8]=t[8],Bb[9]=t[9],
Bb[10]=t[10],Bb[11]=t[11],Bb[12]=t[12],Bb[13]=t[13],Bb[14]=t[14],Bb[15]=t[15],Bb));t=a.loC;Y.uniformMatrix4fv(da.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Lc[0]=t[0],Lc[1]=t[1],Lc[2]=t[2],Lc[3]=t[3],Lc[4]=t[4],Lc[5]=t[5],Lc[6]=t[6],Lc[7]=t[7],Lc[8]=t[8],Lc[9]=t[9],Lc[10]=t[10],Lc[11]=t[11],Lc[12]=t[12],Lc[13]=t[13],Lc[14]=t[14],Lc[15]=t[15],Lc));t=a.hiC;Y.uniformMatrix4fv(la.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(mc[0]=t[0],mc[1]=t[1],mc[2]=t[2],mc[3]=t[3],mc[4]=
t[4],mc[5]=t[5],mc[6]=t[6],mc[7]=t[7],mc[8]=t[8],mc[9]=t[9],mc[10]=t[10],mc[11]=t[11],mc[12]=t[12],mc[13]=t[13],mc[14]=t[14],mc[15]=t[15],mc));t=a.loD;Y.uniformMatrix4fv(xa.location,!1,Array.isArray(t)||t instanceof Float32Array?t:(Hc[0]=t[0],Hc[1]=t[1],Hc[2]=t[2],Hc[3]=t[3],Hc[4]=t[4],Hc[5]=t[5],Hc[6]=t[6],Hc[7]=t[7],Hc[8]=t[8],Hc[9]=t[9],Hc[10]=t[10],Hc[11]=t[11],Hc[12]=t[12],Hc[13]=t[13],Hc[14]=t[14],Hc[15]=t[15],Hc));t=a.hiD;Y.uniformMatrix4fv(ha.location,!1,Array.isArray(t)||t instanceof Float32Array?
t:(hd[0]=t[0],hd[1]=t[1],hd[2]=t[2],hd[3]=t[3],hd[4]=t[4],hd[5]=t[5],hd[6]=t[6],hd[7]=t[7],hd[8]=t[8],hd[9]=t[9],hd[10]=t[10],hd[11]=t[11],hd[12]=t[12],hd[13]=t[13],hd[14]=t[14],hd[15]=t[15],hd));t=a.resolution;Y.uniform2f(qa.location,t[0],t[1]);t=a.viewBoxPos;Y.uniform2f(za.location,t[0],t[1]);t=a.viewBoxSize;Y.uniform2f(Ca.location,t[0],t[1]);Y.uniform1f(ka.location,a.maskHeight);Y.uniform1f(K.location,a.drwLayer);t=a.contextColor;Y.uniform4f(R.location,t[0],t[1],t[2],t[3]);(t=a.maskTexture)&&"framebuffer"===
t._reglType&&(t=t.color[0]);t=t._texture;Y.uniform1i(oa.location,t.bind());Y.uniform1i(Ga.location,C.bind());(v=Ka.elements)?Y.bindBuffer(34963,v.buffer.buffer):cc.currentVAO&&(v=Fa.getElements(cc.currentVAO.elements))&&Y.bindBuffer(34963,v.buffer.buffer);A=a.offset;if(a=a.count)v?Y.drawElements(1,a,v.type,A<<(v.type-5121>>1)):Y.drawArrays(1,A,a),ua.dirty=!0,cc.setVAO(null),X.viewportWidth=d,X.viewportHeight=Ea,ua.profile=x,t.unbind(),C.unbind()},scope:function(a,d,h){var C,J,ia,N,fa,U,T,sa,Ja,ya,
Qa,Ga,K,O,Zb,M,W,da,qa,Z,R,ja,Q,va,P,ba,za,Ca,Y,ra,ha,wa,S,ka,Ua,V,Aa,Da,oa,xa,pa,la,Gb,G,Ba,rb,Fa,fb,ta,ob,fc,Eb,Sc,Vb,qc,pc,yb,Bb,Bd,Ee,nc,cc,be,rc,cb,ab,Wa,Ic,Ue,md,mc,jb,Gc,le,gd,Jd,Oc,vc,Qb,yc,Ad,rd,Hc,Ec,Lc,$d,pd,ze,Md,Lb,yd,Pc,Qe,cd,hd,Od,Ae,De,Qd,Dd,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,
xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;bd.height=a.viewportHeight;bd.width=a.viewportWidth;bd.x=a.viewportX;bd.y=a.viewportY;C=bd.x|0;J=bd.y|0;ia="width"in bd?bd.width|0:X.framebufferWidth-C;N="height"in bd?bd.height|0:X.framebufferHeight-
J;fa=X.viewportWidth;X.viewportWidth=ia;U=X.viewportHeight;X.viewportHeight=N;T=Ed[0];Ed[0]=C;sa=Ed[1];Ed[1]=J;Ja=Ed[2];Ed[2]=ia;ya=Ed[3];Ed[3]=N;Qa=Sb[0];Sb[0]=0;Ga=Sb[1];Sb[1]=0;K=Sb[2];Sb[2]=0;O=Sb[3];Sb[3]=0;Zb=Kc.blend_enable;Kc.blend_enable=!1;M=Id[0];Id[0]=32774;W=Id[1];Id[1]=32774;da=Td[0];Td[0]=770;qa=Td[1];Td[1]=771;Z=Td[2];Td[2]=1;R=Td[3];Td[3]=1;ja=Kc.cull_enable;Kc.cull_enable=!0;Q=Kc.cull_face;Kc.cull_face=1029;va=Kc.depth_enable;Kc.depth_enable=!0;P=Kc.depth_func;Kc.depth_func=513;
ba=Kc.depth_mask;Kc.depth_mask=!0;za=re[0];re[0]=0;Ca=re[1];re[1]=1;Y=Kc.dither;Kc.dither=!1;ra=Kc.lineWidth;Kc.lineWidth=2;td.height=a.scissorHeight;td.width=a.scissorWidth;td.x=a.scissorX;td.y=a.scissorY;ha=td.x|0;wa=td.y|0;S="width"in td?td.width|0:X.framebufferWidth-ha;ka="height"in td?td.height|0:X.framebufferHeight-wa;Ua=Be[0];Be[0]=ha;V=Be[1];Be[1]=wa;Aa=Be[2];Be[2]=S;Da=Be[3];Be[3]=ka;oa=Kc.scissor_enable;Kc.scissor_enable=!0;xa=ua.profile;ua.profile=!1;pa=a.offset;la=Ka.offset;Ka.offset=
pa;Gb=a.count;G=Ka.count;Ka.count=Gb;Ba=Ka.primitive;Ka.primitive=1;rb=a.contextColor;Fa=Ha[24];Ha[24]=rb;fb=a.dim0A;ta=Ha[3];Ha[3]=fb;ob=a.dim0B;fc=Ha[5];Ha[5]=ob;Eb=a.dim0C;Sc=Ha[7];Ha[7]=Eb;Vb=a.dim0D;qc=Ha[9];Ha[9]=Vb;pc=a.dim1A;yb=Ha[4];Ha[4]=pc;Bb=a.dim1B;Bd=Ha[6];Ha[6]=Bb;Ee=a.dim1C;nc=Ha[8];Ha[8]=Ee;cc=a.dim1D;be=Ha[10];Ha[10]=cc;rc=a.drwLayer;cb=Ha[23];Ha[23]=rc;ab=a.hiA;Wa=Ha[12];Ha[12]=ab;Ic=a.hiB;Ue=Ha[14];Ha[14]=Ic;md=a.hiC;mc=Ha[16];Ha[16]=md;jb=a.hiD;Gc=Ha[18];Ha[18]=jb;le=a.loA;gd=
Ha[11];Ha[11]=le;Jd=a.loB;Oc=Ha[13];Ha[13]=Jd;vc=a.loC;Qb=Ha[15];Ha[15]=vc;yc=a.loD;Ad=Ha[17];Ha[17]=yc;rd=a.maskHeight;Hc=Ha[22];Ha[22]=rd;Ec=a.maskTexture;Lc=Ha[25];Ha[25]=Ec;$d=Ha[26];Ha[26]=Ea;pd=a.resolution;ze=Ha[19];Ha[19]=pd;Md=a.viewBoxPos;Lb=Ha[20];Ha[20]=Md;yd=a.viewBoxSize;Pc=Ha[21];Ha[21]=yd;Qe=x.buffer;x.buffer=y;cd=x.divisor;x.divisor=0;hd=x.normalized;x.normalized=!1;Od=x.offset;x.offset=0;Ae=x.size;x.size=0;De=x.state;x.state=1;Qd=x.stride;x.stride=0;Dd=x.type;x.type=y.dtype;Ud=x.w;
x.w=0;Nd=x.x;x.x=0;Kd=x.y;x.y=0;qd=x.z;x.z=0;Wc=v.buffer;v.buffer=u;wd=v.divisor;v.divisor=0;ud=v.normalized;v.normalized=!1;ld=v.offset;v.offset=0;xd=v.size;v.size=0;Gd=v.state;v.state=1;Hd=v.stride;v.stride=0;je=v.type;v.type=u.dtype;me=v.w;v.w=0;ue=v.x;v.x=0;ne=v.y;v.y=0;ke=v.z;v.z=0;ie=na.buffer;na.buffer=q;ve=na.divisor;na.divisor=0;fe=na.normalized;na.normalized=!1;pe=na.offset;na.offset=0;Rc=na.size;na.size=0;id=na.state;na.state=1;we=na.stride;na.stride=0;se=na.type;na.type=q.dtype;Rd=na.w;
na.w=0;Vd=na.x;na.x=0;Wd=na.y;na.y=0;Xd=na.z;na.z=0;qe=I.buffer;I.buffer=m;Ce=I.divisor;I.divisor=0;Ge=I.normalized;I.normalized=!1;te=I.offset;I.offset=0;Ve=I.size;I.size=0;We=I.state;I.state=1;Re=I.stride;I.stride=0;xe=I.type;I.type=m.dtype;Je=I.w;I.w=0;Le=I.x;I.x=0;Me=I.y;I.y=0;Ne=I.z;I.z=0;Ke=r.buffer;r.buffer=b;Sd=r.divisor;r.divisor=0;ae=r.normalized;r.normalized=!1;de=r.offset;r.offset=0;ge=r.size;r.size=0;Oe=r.state;r.state=1;Ld=r.stride;r.stride=0;Yd=r.type;r.type=b.dtype;He=r.w;r.w=0;Pe=
r.x;r.x=0;df=r.y;r.y=0;cf=r.z;r.z=0;Xe=E.buffer;E.buffer=f;Se=E.divisor;E.divisor=0;bf=E.normalized;E.normalized=!1;af=E.offset;E.offset=0;Ye=E.size;E.size=0;Ze=E.state;E.state=1;Zd=E.stride;E.stride=0;ce=E.type;E.type=f.dtype;$e=E.w;E.w=0;kf=E.x;E.x=0;of=E.y;E.y=0;gf=E.z;E.z=0;lf=A.buffer;A.buffer=c;mf=A.divisor;A.divisor=0;nf=A.normalized;A.normalized=!1;sf=A.offset;A.offset=0;pf=A.size;A.size=0;tf=A.state;A.state=1;Cf=A.stride;A.stride=0;Df=A.type;A.type=c.dtype;Te=A.w;A.w=0;Ie=A.x;A.x=0;qf=A.y;
A.y=0;rf=A.z;A.z=0;Ef=ca.buffer;ca.buffer=k;Hf=ca.divisor;ca.divisor=0;Bf=ca.normalized;ca.normalized=!1;Ff=ca.offset;ca.offset=0;Gf=ca.size;ca.size=0;xf=ca.state;ca.state=1;yf=ca.stride;ca.stride=0;wf=ca.type;ca.type=k.dtype;zf=ca.w;ca.w=0;Af=ca.x;ca.x=0;Jf=ca.y;ca.y=0;Kf=ca.z;ca.z=0;Lf=H.buffer;H.buffer=z;Mf=H.divisor;H.divisor=0;uf=H.normalized;H.normalized=!1;Rf=H.offset;H.offset=0;If=H.size;H.size=0;vf=H.state;H.state=1;dg=H.stride;H.stride=0;Sf=H.type;H.type=z.dtype;Tf=H.w;H.w=0;qg=H.x;H.x=
0;hf=H.y;H.y=0;ef=H.z;H.z=0;Nf=F.buffer;F.buffer=B;Of=F.divisor;F.divisor=0;eg=F.normalized;F.normalized=!1;fg=F.offset;F.offset=0;gg=F.size;F.size=0;hg=F.state;F.state=1;ig=F.stride;F.stride=0;Wf=F.type;F.type=B.dtype;Uf=F.w;F.w=0;Xf=F.x;F.x=0;Yf=F.y;F.y=0;Zf=F.z;F.z=0;jg=D.buffer;D.buffer=e;rg=D.divisor;D.divisor=0;sg=D.normalized;D.normalized=!1;tg=D.offset;D.offset=0;ug=D.size;D.size=0;vg=D.state;D.state=1;wg=D.stride;D.stride=0;xg=D.type;D.type=e.dtype;yg=D.w;D.w=0;zg=D.x;D.x=0;Ag=D.y;D.y=0;
Bg=D.z;D.z=0;jf=ga.buffer;ga.buffer=l;ff=ga.divisor;ga.divisor=0;Pf=ga.normalized;ga.normalized=!1;Qf=ga.offset;ga.offset=0;kg=ga.size;ga.size=0;lg=ga.state;ga.state=1;mg=ga.stride;ga.stride=0;ng=ga.type;ga.type=l.dtype;og=ga.w;ga.w=0;$f=ga.x;ga.x=0;Vf=ga.y;ga.y=0;ag=ga.z;ga.z=0;bg=t.buffer;t.buffer=g;cg=t.divisor;t.divisor=0;pg=t.normalized;t.normalized=!1;Cg=t.offset;t.offset=0;Dg=t.size;t.size=0;Eg=t.state;t.state=1;Fg=t.stride;t.stride=0;Gg=t.type;t.type=g.dtype;Hg=t.w;t.w=0;Ig=t.x;t.x=0;Jg=t.y;
t.y=0;Kg=t.z;t.z=0;Lg=ea.buffer;ea.buffer=n;Mg=ea.divisor;ea.divisor=0;Ng=ea.normalized;ea.normalized=!1;Og=ea.offset;ea.offset=0;Pg=ea.size;ea.size=0;Qg=ea.state;ea.state=1;Rg=ea.stride;ea.stride=0;Sg=ea.type;ea.type=n.dtype;Tg=ea.w;ea.w=0;Ug=ea.x;ea.x=0;Vg=ea.y;ea.y=0;Wg=ea.z;ea.z=0;Xg=L.buffer;L.buffer=p;Yg=L.divisor;L.divisor=0;Zg=L.normalized;L.normalized=!1;$g=L.offset;L.offset=0;ah=L.size;L.size=0;bh=L.state;L.state=1;ch=L.stride;L.stride=0;dh=L.type;L.type=p.dtype;eh=L.w;L.w=0;fh=L.x;L.x=
0;gh=L.y;L.y=0;hh=L.z;L.z=0;ih=ma.buffer;ma.buffer=w;jh=ma.divisor;ma.divisor=0;kh=ma.normalized;ma.normalized=!1;lh=ma.offset;ma.offset=0;mh=ma.size;ma.size=0;nh=ma.state;ma.state=1;oh=ma.stride;ma.stride=0;ph=ma.type;ma.type=w.dtype;qh=ma.w;ma.w=0;rh=ma.x;ma.x=0;sh=ma.y;ma.y=0;th=ma.z;ma.z=0;uh=bc.vert;bc.vert=2;vh=bc.frag;bc.frag=1;ua.dirty=!0;d(X,a,h);X.viewportWidth=fa;X.viewportHeight=U;Ed[0]=T;Ed[1]=sa;Ed[2]=Ja;Ed[3]=ya;Sb[0]=Qa;Sb[1]=Ga;Sb[2]=K;Sb[3]=O;Kc.blend_enable=Zb;Id[0]=M;Id[1]=W;Td[0]=
da;Td[1]=qa;Td[2]=Z;Td[3]=R;Kc.cull_enable=ja;Kc.cull_face=Q;Kc.depth_enable=va;Kc.depth_func=P;Kc.depth_mask=ba;re[0]=za;re[1]=Ca;Kc.dither=Y;Kc.lineWidth=ra;Be[0]=Ua;Be[1]=V;Be[2]=Aa;Be[3]=Da;Kc.scissor_enable=oa;ua.profile=xa;Ka.offset=la;Ka.count=G;Ka.primitive=Ba;Ha[24]=Fa;Ha[3]=ta;Ha[5]=fc;Ha[7]=Sc;Ha[9]=qc;Ha[4]=yb;Ha[6]=Bd;Ha[8]=nc;Ha[10]=be;Ha[23]=cb;Ha[12]=Wa;Ha[14]=Ue;Ha[16]=mc;Ha[18]=Gc;Ha[11]=gd;Ha[13]=Oc;Ha[15]=Qb;Ha[17]=Ad;Ha[22]=Hc;Ha[25]=Lc;Ha[26]=$d;Ha[19]=ze;Ha[20]=Lb;Ha[21]=Pc;
x.buffer=Qe;x.divisor=cd;x.normalized=hd;x.offset=Od;x.size=Ae;x.state=De;x.stride=Qd;x.type=Dd;x.w=Ud;x.x=Nd;x.y=Kd;x.z=qd;v.buffer=Wc;v.divisor=wd;v.normalized=ud;v.offset=ld;v.size=xd;v.state=Gd;v.stride=Hd;v.type=je;v.w=me;v.x=ue;v.y=ne;v.z=ke;na.buffer=ie;na.divisor=ve;na.normalized=fe;na.offset=pe;na.size=Rc;na.state=id;na.stride=we;na.type=se;na.w=Rd;na.x=Vd;na.y=Wd;na.z=Xd;I.buffer=qe;I.divisor=Ce;I.normalized=Ge;I.offset=te;I.size=Ve;I.state=We;I.stride=Re;I.type=xe;I.w=Je;I.x=Le;I.y=Me;
I.z=Ne;r.buffer=Ke;r.divisor=Sd;r.normalized=ae;r.offset=de;r.size=ge;r.state=Oe;r.stride=Ld;r.type=Yd;r.w=He;r.x=Pe;r.y=df;r.z=cf;E.buffer=Xe;E.divisor=Se;E.normalized=bf;E.offset=af;E.size=Ye;E.state=Ze;E.stride=Zd;E.type=ce;E.w=$e;E.x=kf;E.y=of;E.z=gf;A.buffer=lf;A.divisor=mf;A.normalized=nf;A.offset=sf;A.size=pf;A.state=tf;A.stride=Cf;A.type=Df;A.w=Te;A.x=Ie;A.y=qf;A.z=rf;ca.buffer=Ef;ca.divisor=Hf;ca.normalized=Bf;ca.offset=Ff;ca.size=Gf;ca.state=xf;ca.stride=yf;ca.type=wf;ca.w=zf;ca.x=Af;ca.y=
Jf;ca.z=Kf;H.buffer=Lf;H.divisor=Mf;H.normalized=uf;H.offset=Rf;H.size=If;H.state=vf;H.stride=dg;H.type=Sf;H.w=Tf;H.x=qg;H.y=hf;H.z=ef;F.buffer=Nf;F.divisor=Of;F.normalized=eg;F.offset=fg;F.size=gg;F.state=hg;F.stride=ig;F.type=Wf;F.w=Uf;F.x=Xf;F.y=Yf;F.z=Zf;D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;ga.buffer=jf;ga.divisor=ff;ga.normalized=Pf;ga.offset=Qf;ga.size=kg;ga.state=lg;ga.stride=mg;ga.type=ng;ga.w=og;ga.x=$f;
ga.y=Vf;ga.z=ag;t.buffer=bg;t.divisor=cg;t.normalized=pg;t.offset=Cg;t.size=Dg;t.state=Eg;t.stride=Fg;t.type=Gg;t.w=Hg;t.x=Ig;t.y=Jg;t.z=Kg;ea.buffer=Lg;ea.divisor=Mg;ea.normalized=Ng;ea.offset=Og;ea.size=Pg;ea.state=Qg;ea.stride=Rg;ea.type=Sg;ea.w=Tg;ea.x=Ug;ea.y=Vg;ea.z=Wg;L.buffer=Xg;L.divisor=Yg;L.normalized=Zg;L.offset=$g;L.size=ah;L.state=bh;L.stride=ch;L.type=dh;L.w=eh;L.x=fh;L.y=gh;L.z=hh;ma.buffer=ih;ma.divisor=jh;ma.normalized=kh;ma.offset=lh;ma.size=mh;ma.state=nh;ma.stride=oh;ma.type=
ph;ma.w=qh;ma.x=rh;ma.y=sh;ma.z=th;bc.vert=uh;bc.frag=vh;ua.dirty=!0}}},$1:function(a,d){var h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,r,I,aa,E,A,ca,H,F,D;h=a.attributes;u=a.current;q=a.framebuffer;m=a.gl;b=a.next;f=a.vao;c=b.blend_color;k=u.blend_color;z=b.blend_equation;B=u.blend_equation;e=b.blend_func;l=u.blend_func;g=b.colorMask;n=u.colorMask;p=b.depth_range;w=u.depth_range;y=b.polygonOffset_offset;C=u.polygonOffset_offset;Ea=b.sample_coverage;x=u.sample_coverage;v=b.scissor_box;r=u.scissor_box;
I=b.stencil_func;aa=u.stencil_func;E=b.stencil_opBack;A=u.stencil_opBack;ca=b.stencil_opFront;H=u.stencil_opFront;F=b.viewport;D=u.viewport;return{poll:function(){var a,d,f,h,T,G,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha;u.dirty=!1;d=b.blend_enable;f=b.cull_enable;h=b.depth_enable;T=b.dither;G=b.polygonOffset_enable;S=b.sample_alpha;V=b.sample_enable;R=b.scissor_enable;O=b.stencil_enable;M=b.cull_face;N=u.cull_face;P=b.depth_func;Q=u.depth_func;ra=b.depth_mask;pa=u.depth_mask;J=b.frontFace;K=u.frontFace;
ba=b.lineWidth;W=u.lineWidth;la=b.stencil_mask;ha=u.stencil_mask;a=q.next;a!==q.cur&&(a?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null),q.cur=a);d!==u.blend_enable&&(d?m.enable(3042):m.disable(3042),u.blend_enable=d);f!==u.cull_enable&&(f?m.enable(2884):m.disable(2884),u.cull_enable=f);h!==u.depth_enable&&(h?m.enable(2929):m.disable(2929),u.depth_enable=h);T!==u.dither&&(T?m.enable(3024):m.disable(3024),u.dither=T);G!==u.polygonOffset_enable&&(G?m.enable(32823):m.disable(32823),
u.polygonOffset_enable=G);S!==u.sample_alpha&&(S?m.enable(32926):m.disable(32926),u.sample_alpha=S);V!==u.sample_enable&&(V?m.enable(32928):m.disable(32928),u.sample_enable=V);R!==u.scissor_enable&&(R?m.enable(3089):m.disable(3089),u.scissor_enable=R);O!==u.stencil_enable&&(O?m.enable(2960):m.disable(2960),u.stencil_enable=O);if(c[0]!==k[0]||c[1]!==k[1]||c[2]!==k[2]||c[3]!==k[3])m.blendColor(c[0],c[1],c[2],c[3]),k[0]=c[0],k[1]=c[1],k[2]=c[2],k[3]=c[3];if(z[0]!==B[0]||z[1]!==B[1])m.blendEquationSeparate(z[0],
z[1]),B[0]=z[0],B[1]=z[1];if(e[0]!==l[0]||e[1]!==l[1]||e[2]!==l[2]||e[3]!==l[3])m.blendFuncSeparate(e[0],e[1],e[2],e[3]),l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=e[3];if(g[0]!==n[0]||g[1]!==n[1]||g[2]!==n[2]||g[3]!==n[3])m.colorMask(g[0],g[1],g[2],g[3]),n[0]=g[0],n[1]=g[1],n[2]=g[2],n[3]=g[3];M!==N&&(m.cullFace(M),u.cull_face=M);P!==Q&&(m.depthFunc(P),u.depth_func=P);ra!==pa&&(m.depthMask(ra),u.depth_mask=ra);if(p[0]!==w[0]||p[1]!==w[1])m.depthRange(p[0],p[1]),w[0]=p[0],w[1]=p[1];J!==K&&(m.frontFace(J),
u.frontFace=J);ba!==W&&(m.lineWidth(ba),u.lineWidth=ba);if(y[0]!==C[0]||y[1]!==C[1])m.polygonOffset(y[0],y[1]),C[0]=y[0],C[1]=y[1];if(Ea[0]!==x[0]||Ea[1]!==x[1])m.sampleCoverage(Ea[0],Ea[1]),x[0]=Ea[0],x[1]=Ea[1];if(v[0]!==r[0]||v[1]!==r[1]||v[2]!==r[2]||v[3]!==r[3])m.scissor(v[0],v[1],v[2],v[3]),r[0]=v[0],r[1]=v[1],r[2]=v[2],r[3]=v[3];if(I[0]!==aa[0]||I[1]!==aa[1]||I[2]!==aa[2])m.stencilFunc(I[0],I[1],I[2]),aa[0]=I[0],aa[1]=I[1],aa[2]=I[2];la!==ha&&(m.stencilMask(la),u.stencil_mask=la);if(E[0]!==
A[0]||E[1]!==A[1]||E[2]!==A[2]||E[3]!==A[3])m.stencilOpSeparate(E[0],E[1],E[2],E[3]),A[0]=E[0],A[1]=E[1],A[2]=E[2],A[3]=E[3];if(ca[0]!==H[0]||ca[1]!==H[1]||ca[2]!==H[2]||ca[3]!==H[3])m.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]),H[0]=ca[0],H[1]=ca[1],H[2]=ca[2],H[3]=ca[3];if(F[0]!==D[0]||F[1]!==D[1]||F[2]!==D[2]||F[3]!==D[3])m.viewport(F[0],F[1],F[2],F[3]),D[0]=F[0],D[1]=F[1],D[2]=F[2],D[3]=F[3]},refresh:function(){var a,t,ea,L,ma,G,S,V,R,O,M,N,P,Q,ra,pa;u.dirty=!1;t=b.blend_enable;ea=b.cull_enable;
L=b.depth_enable;ma=b.dither;G=b.polygonOffset_enable;S=b.sample_alpha;V=b.sample_enable;R=b.scissor_enable;O=b.stencil_enable;M=b.cull_face;N=b.depth_func;P=b.depth_mask;Q=b.frontFace;ra=b.lineWidth;pa=b.stencil_mask;(a=q.next)?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null);q.cur=a;a=h[0];a.buffer?(m.enableVertexAttribArray(0),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(0),m.vertexAttrib4f(0,
a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(0,a.divisor);a=h[1];a.buffer?(m.enableVertexAttribArray(1),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(1),m.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(1,a.divisor);a=h[2];a.buffer?(m.enableVertexAttribArray(2),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(2),
m.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(2,a.divisor);a=h[3];a.buffer?(m.enableVertexAttribArray(3),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(3),m.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(3,a.divisor);a=h[4];a.buffer?(m.enableVertexAttribArray(4),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,
a.offset)):(m.disableVertexAttribArray(4),m.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(4,a.divisor);a=h[5];a.buffer?(m.enableVertexAttribArray(5),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(5),m.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(5,a.divisor);a=h[6];a.buffer?(m.enableVertexAttribArray(6),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(6,
a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(6),m.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(6,a.divisor);a=h[7];a.buffer?(m.enableVertexAttribArray(7),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(7),m.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(7,a.divisor);a=h[8];a.buffer?(m.enableVertexAttribArray(8),m.bindBuffer(34962,
a.buffer.buffer),m.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(8),m.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(8,a.divisor);a=h[9];a.buffer?(m.enableVertexAttribArray(9),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(9),m.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(9,a.divisor);a=h[10];a.buffer?
(m.enableVertexAttribArray(10),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(10),m.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(10,a.divisor);a=h[11];a.buffer?(m.enableVertexAttribArray(11),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(11),m.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);
d.vertexAttribDivisorANGLE(11,a.divisor);a=h[12];a.buffer?(m.enableVertexAttribArray(12),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(12),m.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(12,a.divisor);a=h[13];a.buffer?(m.enableVertexAttribArray(13),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(13),
m.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(13,a.divisor);a=h[14];a.buffer?(m.enableVertexAttribArray(14),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(m.disableVertexAttribArray(14),m.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(14,a.divisor);a=h[15];a.buffer?(m.enableVertexAttribArray(15),m.bindBuffer(34962,a.buffer.buffer),m.vertexAttribPointer(15,a.size,a.type,a.normalized,
a.stride,a.offset)):(m.disableVertexAttribArray(15),m.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);d.vertexAttribDivisorANGLE(15,a.divisor);f.currentVAO=null;f.setVAO(f.targetVAO);t?m.enable(3042):m.disable(3042);u.blend_enable=t;ea?m.enable(2884):m.disable(2884);u.cull_enable=ea;L?m.enable(2929):m.disable(2929);u.depth_enable=L;ma?m.enable(3024):m.disable(3024);u.dither=ma;G?m.enable(32823):m.disable(32823);u.polygonOffset_enable=G;S?m.enable(32926):m.disable(32926);u.sample_alpha=S;V?m.enable(32928):
m.disable(32928);u.sample_enable=V;R?m.enable(3089):m.disable(3089);u.scissor_enable=R;O?m.enable(2960):m.disable(2960);u.stencil_enable=O;m.blendColor(c[0],c[1],c[2],c[3]);k[0]=c[0];k[1]=c[1];k[2]=c[2];k[3]=c[3];m.blendEquationSeparate(z[0],z[1]);B[0]=z[0];B[1]=z[1];m.blendFuncSeparate(e[0],e[1],e[2],e[3]);l[0]=e[0];l[1]=e[1];l[2]=e[2];l[3]=e[3];m.colorMask(g[0],g[1],g[2],g[3]);n[0]=g[0];n[1]=g[1];n[2]=g[2];n[3]=g[3];m.cullFace(M);u.cull_face=M;m.depthFunc(N);u.depth_func=N;m.depthMask(P);u.depth_mask=
P;m.depthRange(p[0],p[1]);w[0]=p[0];w[1]=p[1];m.frontFace(Q);u.frontFace=Q;m.lineWidth(ra);u.lineWidth=ra;m.polygonOffset(y[0],y[1]);C[0]=y[0];C[1]=y[1];m.sampleCoverage(Ea[0],Ea[1]);x[0]=Ea[0];x[1]=Ea[1];m.scissor(v[0],v[1],v[2],v[3]);r[0]=v[0];r[1]=v[1];r[2]=v[2];r[3]=v[3];m.stencilFunc(I[0],I[1],I[2]);aa[0]=I[0];aa[1]=I[1];aa[2]=I[2];m.stencilMask(pa);u.stencil_mask=pa;m.stencilOpSeparate(E[0],E[1],E[2],E[3]);A[0]=E[0];A[1]=E[1];A[2]=E[2];A[3]=E[3];m.stencilOpSeparate(ca[0],ca[1],ca[2],ca[3]);
H[0]=ca[0];H[1]=ca[1];H[2]=ca[2];H[3]=ca[3];m.viewport(F[0],F[1],F[2],F[3]);D[0]=F[0];D[1]=F[1];D[2]=F[2];D[3]=F[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,r,I,aa,E,A,ca,H,F,D,ga,t,ea,L,ma,G,S,V,R,O,M,N,P,Q,ra,pa){var J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca,ja,X,ua,Ka,Fa,fb,Y,Kc,bc,Ha,
cc,Sb;J=a.attributes;K=a.buffer;ba=a.context;W=a.current;la=a.draw;ha=a.elements;Ba=a.extensions;wa=a.framebuffer;da=a.gl;xa=a.isBufferArgs;ka=a.next;oa=a.shader;Aa=a.uniforms;Qa=a.vao;Ja=ka.blend_color;Zb=W.blend_color;Ua=ka.blend_equation;ia=W.blend_equation;fa=ka.blend_func;sa=W.blend_func;va=ka.colorMask;Da=W.colorMask;rb=ka.depth_range;Gb=W.depth_range;Z=ka.polygonOffset_offset;U=W.polygonOffset_offset;ya=ka.sample_coverage;Ga=W.sample_coverage;qa=ka.scissor_box;za=W.scissor_box;Ca=ka.stencil_func;
ja=W.stencil_func;X=ka.stencil_opBack;ua=W.stencil_opBack;Ka=ka.stencil_opFront;Fa=W.stencil_opFront;fb=ka.viewport;Y=W.viewport;Kc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};bc={};bc.buffer=h;bc.divisor=1;Ha={};Ha.buffer=u;Ha.divisor=1;cc={};cc.buffer=q;cc.divisor=1;Sb={};Sb.buffer=m;Sb.divisor=1;return{batch:function(c,b){var a,k,f,g,n,p;a=wa.next;a!==wa.cur&&(a?da.bindFramebuffer(36160,a.framebuffer):da.bindFramebuffer(36160,null),wa.cur=a);if(W.dirty){var w,
y,m,u,h,x,C,v,z,q,fa,T,Ja,Ea,I,E,qa,r,na,aa,Ua,Aa,oa,fb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd;w=ka.dither;w!==W.dither&&(w?da.enable(3024):da.disable(3024),W.dither=w);y=ka.depth_func;y!==W.depth_func&&(da.depthFunc(y),W.depth_func=y);m=rb[0];u=rb[1];if(m!==Gb[0]||u!==Gb[1])da.depthRange(m,u),Gb[0]=m,Gb[1]=u;h=ka.depth_mask;h!==W.depth_mask&&(da.depthMask(h),W.depth_mask=h);x=va[0];C=va[1];v=va[2];z=va[3];if(x!==Da[0]||C!==Da[1]||v!==Da[2]||z!==Da[3])da.colorMask(x,C,v,z),Da[0]=x,Da[1]=C,Da[2]=v,Da[3]=z;q=ka.cull_enable;
q!==W.cull_enable&&(q?da.enable(2884):da.disable(2884),W.cull_enable=q);fa=ka.cull_face;fa!==W.cull_face&&(da.cullFace(fa),W.cull_face=fa);T=ka.frontFace;T!==W.frontFace&&(da.frontFace(T),W.frontFace=T);Ja=ka.lineWidth;Ja!==W.lineWidth&&(da.lineWidth(Ja),W.lineWidth=Ja);Ea=ka.polygonOffset_enable;Ea!==W.polygonOffset_enable&&(Ea?da.enable(32823):da.disable(32823),W.polygonOffset_enable=Ea);I=Z[0];E=Z[1];if(I!==U[0]||E!==U[1])da.polygonOffset(I,E),U[0]=I,U[1]=E;qa=ka.sample_alpha;qa!==W.sample_alpha&&
(qa?da.enable(32926):da.disable(32926),W.sample_alpha=qa);r=ka.sample_enable;r!==W.sample_enable&&(r?da.enable(32928):da.disable(32928),W.sample_enable=r);na=ya[0];aa=ya[1];if(na!==Ga[0]||aa!==Ga[1])da.sampleCoverage(na,aa),Ga[0]=na,Ga[1]=aa;Ua=ka.stencil_enable;Ua!==W.stencil_enable&&(Ua?da.enable(2960):da.disable(2960),W.stencil_enable=Ua);Aa=ka.stencil_mask;Aa!==W.stencil_mask&&(da.stencilMask(Aa),W.stencil_mask=Aa);oa=Ca[0];fb=Ca[1];Eb=Ca[2];if(oa!==ja[0]||fb!==ja[1]||Eb!==ja[2])da.stencilFunc(oa,
fb,Eb),ja[0]=oa,ja[1]=fb,ja[2]=Eb;vc=Ka[0];yb=Ka[1];yc=Ka[2];Bb=Ka[3];if(vc!==Fa[0]||yb!==Fa[1]||yc!==Fa[2]||Bb!==Fa[3])da.stencilOpSeparate(vc,yb,yc,Bb),Fa[0]=vc,Fa[1]=yb,Fa[2]=yc,Fa[3]=Bb;Lc=X[0];mc=X[1];Hc=X[2];hd=X[3];if(Lc!==ua[0]||mc!==ua[1]||Hc!==ua[2]||hd!==ua[3])da.stencilOpSeparate(Lc,mc,Hc,hd),ua[0]=Lc,ua[1]=mc,ua[2]=Hc,ua[3]=hd}da.blendColor(0,0,0,0);Zb[0]=0;Zb[1]=0;Zb[2]=0;Zb[3]=0;da.enable(3042);W.blend_enable=!0;da.blendEquationSeparate(32774,32774);ia[0]=32774;ia[1]=32774;da.blendFuncSeparate(770,
771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;da.disable(2929);W.depth_enable=!1;da.enable(3089);W.scissor_enable=!0;if(k=W.profile)f=performance.now(),d.count+=b;da.useProgram(A.program);g=Ba.angle_instanced_arrays;var cd,Ec,fc,Ic,pc,rc,nc,qc;Qa.setVAO(null);cd=ma.location;Ec=J[cd];Ec.buffer||da.enableVertexAttribArray(cd);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==B||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(cd,2,5126,!1,24,0),Ec.type=
5126,Ec.size=2,Ec.buffer=B,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(g.vertexAttribDivisorANGLE(cd,0),Ec.divisor=0);fc=S.location;Ic=J[fc];Ic.buffer||da.enableVertexAttribArray(fc);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==e||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(fc,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=e,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(g.vertexAttribDivisorANGLE(fc,0),Ic.divisor=
0);pc=t.location;rc=J[pc];rc.buffer||da.enableVertexAttribArray(pc);if(5126!==rc.type||2!==rc.size||rc.buffer!==l||!1!==rc.normalized||16!==rc.offset||24!==rc.stride)da.bindBuffer(34962,l.buffer),da.vertexAttribPointer(pc,2,5126,!1,24,16),rc.type=5126,rc.size=2,rc.buffer=l,rc.normalized=!1,rc.offset=16,rc.stride=24;0!==rc.divisor&&(g.vertexAttribDivisorANGLE(pc,0),rc.divisor=0);(nc=la.elements)?da.bindBuffer(34963,nc.buffer.buffer):Qa.currentVAO&&(nc=ha.getElements(Qa.currentVAO.elements))&&da.bindBuffer(34963,
nc.buffer.buffer);qc=la.offset;for(n=0;n<b;++n){p=c[n];var ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc;ob=p.viewport;Pc=ob.x|0;Qb=ob.y|0;cb="width"in ob?ob.width|0:ba.framebufferWidth-Pc;Lb="height"in
ob?ob.height|0:ba.framebufferHeight-Qb;ab=ba.viewportWidth;ba.viewportWidth=cb;jb=ba.viewportHeight;ba.viewportHeight=Lb;da.viewport(Pc,Qb,cb,Lb);Y[0]=Pc;Y[1]=Qb;Y[2]=cb;Y[3]=Lb;Wa=p.viewport;Jc=Wa.x|0;Mb=Wa.y|0;Hb="width"in Wa?Wa.width|0:ba.framebufferWidth-Jc;sc="height"in Wa?Wa.height|0:ba.framebufferHeight-Mb;da.scissor(Jc,Mb,Hb,sc);za[0]=Jc;za[1]=Mb;za[2]=Hb;za[3]=sc;Nb=ca.call(this,ba,p,n);cc.offset=Nb;kb=!1;Fb=null;Cb=0;xb=!1;$b=hb=0;Ob=1;qb=0;Ta=5126;ib=jc=zb=Ub=0;xa(cc)?(kb=!0,Fb=K.createStream(34962,
cc),Ta=Fb.dtype):(Fb=K.getBuffer(cc))?Ta=Fb.dtype:"constant"in cc?(Ob=2,"number"===typeof cc.constant?(zb=cc.constant,jc=ib=Ub=0):(zb=0<cc.constant.length?cc.constant[0]:0,jc=1<cc.constant.length?cc.constant[1]:0,ib=2<cc.constant.length?cc.constant[2]:0,Ub=3<cc.constant.length?cc.constant[3]:0)):(Fb=xa(cc.buffer)?K.createStream(34962,cc.buffer):K.getBuffer(cc.buffer),Ta="type"in cc?Kc[cc.type]:Fb.dtype,xb=!!cc.normalized,$b=cc.size|0,hb=cc.offset|0,qb=cc.stride|0,Cb=cc.divisor|0);pb=O.location;Ia=
J[pb];if(1===Ob){Ia.buffer||da.enableVertexAttribArray(pb);sb=$b||2;if(Ia.type!==Ta||Ia.size!==sb||Ia.buffer!==Fb||Ia.normalized!==xb||Ia.offset!==hb||Ia.stride!==qb)da.bindBuffer(34962,Fb.buffer),da.vertexAttribPointer(pb,sb,Ta,xb,qb,hb),Ia.type=Ta,Ia.size=sb,Ia.buffer=Fb,Ia.normalized=xb,Ia.offset=hb,Ia.stride=qb;Ia.divisor!==Cb&&(g.vertexAttribDivisorANGLE(pb,Cb),Ia.divisor=Cb)}else if(Ia.buffer&&(da.disableVertexAttribArray(pb),Ia.buffer=null),Ia.x!==zb||Ia.y!==jc||Ia.z!==ib||Ia.w!==Ub)da.vertexAttrib4f(pb,
zb,jc,ib,Ub),Ia.x=zb,Ia.y=jc,Ia.z=ib,Ia.w=Ub;La=H.call(this,ba,p,n);Sb.offset=La;eb=!1;gb=null;Na=0;lb=!1;ub=Xa=0;tb=1;Pa=0;Dc=5126;Ma=Db=Ib=Va=0;xa(Sb)?(eb=!0,gb=K.createStream(34962,Sb),Dc=gb.dtype):(gb=K.getBuffer(Sb))?Dc=gb.dtype:"constant"in Sb?(tb=2,"number"===typeof Sb.constant?(Ib=Sb.constant,Db=Ma=Va=0):(Ib=0<Sb.constant.length?Sb.constant[0]:0,Db=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?Sb.constant[2]:0,Va=3<Sb.constant.length?Sb.constant[3]:0)):(gb=xa(Sb.buffer)?K.createStream(34962,
Sb.buffer):K.getBuffer(Sb.buffer),Dc="type"in Sb?Kc[Sb.type]:gb.dtype,lb=!!Sb.normalized,ub=Sb.size|0,Xa=Sb.offset|0,Pa=Sb.stride|0,Na=Sb.divisor|0);zd=M.location;Za=J[zd];if(1===tb){Za.buffer||da.enableVertexAttribArray(zd);Jb=ub||2;if(Za.type!==Dc||Za.size!==Jb||Za.buffer!==gb||Za.normalized!==lb||Za.offset!==Xa||Za.stride!==Pa)da.bindBuffer(34962,gb.buffer),da.vertexAttribPointer(zd,Jb,Dc,lb,Pa,Xa),Za.type=Dc,Za.size=Jb,Za.buffer=gb,Za.normalized=lb,Za.offset=Xa,Za.stride=Pa;Za.divisor!==Na&&(g.vertexAttribDivisorANGLE(zd,
Na),Za.divisor=Na)}else if(Za.buffer&&(da.disableVertexAttribArray(zd),Za.buffer=null),Za.x!==Ib||Za.y!==Db||Za.z!==Ma||Za.w!==Va)da.vertexAttrib4f(zd,Ib,Db,Ma,Va),Za.x=Ib,Za.y=Db,Za.z=Ma,Za.w=Va;Kb=F.call(this,ba,p,n);Ha.offset=Kb;mb=!1;Oa=null;ac=0;Ra=!1;wb=vb=0;Sa=1;nb=0;gc=5126;kc=bb=wc=Bc=0;xa(Ha)?(mb=!0,Oa=K.createStream(34962,Ha),gc=Oa.dtype):(Oa=K.getBuffer(Ha))?gc=Oa.dtype:"constant"in Ha?(Sa=2,"number"===typeof Ha.constant?(wc=Ha.constant,bb=kc=Bc=0):(wc=0<Ha.constant.length?Ha.constant[0]:
0,bb=1<Ha.constant.length?Ha.constant[1]:0,kc=2<Ha.constant.length?Ha.constant[2]:0,Bc=3<Ha.constant.length?Ha.constant[3]:0)):(Oa=xa(Ha.buffer)?K.createStream(34962,Ha.buffer):K.getBuffer(Ha.buffer),gc="type"in Ha?Kc[Ha.type]:Oa.dtype,Ra=!!Ha.normalized,wb=Ha.size|0,vb=Ha.offset|0,nb=Ha.stride|0,ac=Ha.divisor|0);Mc=G.location;Ya=J[Mc];if(1===Sa){Ya.buffer||da.enableVertexAttribArray(Mc);nd=wb||4;if(Ya.type!==gc||Ya.size!==nd||Ya.buffer!==Oa||Ya.normalized!==Ra||Ya.offset!==vb||Ya.stride!==nb)da.bindBuffer(34962,
Oa.buffer),da.vertexAttribPointer(Mc,nd,gc,Ra,nb,vb),Ya.type=gc,Ya.size=nd,Ya.buffer=Oa,Ya.normalized=Ra,Ya.offset=vb,Ya.stride=nb;Ya.divisor!==ac&&(g.vertexAttribDivisorANGLE(Mc,ac),Ya.divisor=ac)}else if(Ya.buffer&&(da.disableVertexAttribArray(Mc),Ya.buffer=null),Ya.x!==wc||Ya.y!==bb||Ya.z!==kc||Ya.w!==Bc)da.vertexAttrib4f(Mc,wc,bb,kc,Bc),Ya.x=wc,Ya.y=bb,Ya.z=kc,Ya.w=Bc;Ab=D.call(this,ba,p,n);bc.offset=Ab;$a=!1;Wb=null;uc=0;Xb=!1;Nc=Pb=0;Rb=1;Pd=0;Fc=5126;sd=Yc=Qc=vd=0;xa(bc)?($a=!0,Wb=K.createStream(34962,
bc),Fc=Wb.dtype):(Wb=K.getBuffer(bc))?Fc=Wb.dtype:"constant"in bc?(Rb=2,"number"===typeof bc.constant?(Qc=bc.constant,Yc=sd=vd=0):(Qc=0<bc.constant.length?bc.constant[0]:0,Yc=1<bc.constant.length?bc.constant[1]:0,sd=2<bc.constant.length?bc.constant[2]:0,vd=3<bc.constant.length?bc.constant[3]:0)):(Wb=xa(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),Fc="type"in bc?Kc[bc.type]:Wb.dtype,Xb=!!bc.normalized,Nc=bc.size|0,Pb=bc.offset|0,Pd=bc.stride|0,uc=bc.divisor|0);oc=L.location;xc=
J[oc];if(1===Rb){xc.buffer||da.enableVertexAttribArray(oc);hc=Nc||4;if(xc.type!==Fc||xc.size!==hc||xc.buffer!==Wb||xc.normalized!==Xb||xc.offset!==Pb||xc.stride!==Pd)da.bindBuffer(34962,Wb.buffer),da.vertexAttribPointer(oc,hc,Fc,Xb,Pd,Pb),xc.type=Fc,xc.size=hc,xc.buffer=Wb,xc.normalized=Xb,xc.offset=Pb,xc.stride=Pd;xc.divisor!==uc&&(g.vertexAttribDivisorANGLE(oc,uc),xc.divisor=uc)}else if(xc.buffer&&(da.disableVertexAttribArray(oc),xc.buffer=null),xc.x!==Qc||xc.y!==Yc||xc.z!==sd||xc.w!==vd)da.vertexAttrib4f(oc,
Qc,Yc,sd,vd),xc.x=Qc,xc.y=Yc,xc.z=sd,xc.w=vd;db=ga.call(this,ba,p,n);tc=db[0];Yb=db[1];ic=db[2];Cc=db[3];n&&Tb===tc&&ec===Yb&&zc===ic&&dd===Cc||(Tb=tc,ec=Yb,zc=ic,dd=Cc,da.uniform4f(pa.location,tc,Yb,ic,Cc));Tc=p.lineWidth;n&&Uc===Tc||(Uc=Tc,da.uniform1f(V.location,Tc));Vc=p.capSize;n&&Zc===Vc||(Zc=Vc,da.uniform1f(ea.location,Vc));od=p.scale;ed=od[0];lc=od[1];n&&$c===ed&&dc===lc||($c=ed,dc=lc,da.uniform2f(N.location,ed,lc));ad=p.scaleFract;Xc=ad[0];Ac=ad[1];n&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,da.uniform2f(P.location,
Xc,Ac));Cd=p.translate;ye=Cd[0];kd=Cd[1];n&&oe===ye&&Fe===kd||(oe=ye,Fe=kd,da.uniform2f(Q.location,ye,kd));Fd=p.translateFract;he=Fd[0];Ud=Fd[1];n&&ee===he&&Nd===Ud||(ee=he,Nd=Ud,da.uniform2f(ra.location,he,Ud));Kd=p.opacity;n&&qd===Kd||(qd=Kd,da.uniform1f(R.location,Kd));Wc=p.count;0<Wc?nc?g.drawElementsInstancedANGLE(4,36,nc.type,qc<<(nc.type-5121>>1),Wc):g.drawArraysInstancedANGLE(4,qc,36,Wc):0>Wc&&(nc?da.drawElements(4,36,nc.type,qc<<(nc.type-5121>>1)):da.drawArrays(4,qc,36));ba.viewportWidth=
ab;ba.viewportHeight=jb;kb&&K.destroyStream(Fb);eb&&K.destroyStream(gb);mb&&K.destroyStream(Oa);$a&&K.destroyStream(Wb)}W.dirty=!0;Qa.setVAO(null);k&&(d.cpuTime+=performance.now()-f)},draw:function(a){var n,p,w,y,m,u,h,x,C,v,q,fa,T,Ja,Ea,A,I,E,D,H,qa,r,F,na,aa,Ua,Aa,ca,oa,ga,fb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac;n=wa.next;n!==wa.cur&&
(n?da.bindFramebuffer(36160,n.framebuffer):da.bindFramebuffer(36160,null),wa.cur=n);if(W.dirty){var Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb;Ra=ka.dither;Ra!==W.dither&&(Ra?da.enable(3024):da.disable(3024),W.dither=Ra);vb=ka.depth_func;vb!==W.depth_func&&(da.depthFunc(vb),W.depth_func=vb);wb=rb[0];Sa=rb[1];if(wb!==Gb[0]||Sa!==Gb[1])da.depthRange(wb,Sa),Gb[0]=wb,Gb[1]=Sa;nb=ka.depth_mask;nb!==W.depth_mask&&(da.depthMask(nb),W.depth_mask=nb);
gc=va[0];Bc=va[1];wc=va[2];bb=va[3];if(gc!==Da[0]||Bc!==Da[1]||wc!==Da[2]||bb!==Da[3])da.colorMask(gc,Bc,wc,bb),Da[0]=gc,Da[1]=Bc,Da[2]=wc,Da[3]=bb;kc=ka.cull_enable;kc!==W.cull_enable&&(kc?da.enable(2884):da.disable(2884),W.cull_enable=kc);Mc=ka.cull_face;Mc!==W.cull_face&&(da.cullFace(Mc),W.cull_face=Mc);Ya=ka.frontFace;Ya!==W.frontFace&&(da.frontFace(Ya),W.frontFace=Ya);nd=ka.lineWidth;nd!==W.lineWidth&&(da.lineWidth(nd),W.lineWidth=nd);Ab=ka.polygonOffset_enable;Ab!==W.polygonOffset_enable&&(Ab?
da.enable(32823):da.disable(32823),W.polygonOffset_enable=Ab);$a=Z[0];Wb=Z[1];if($a!==U[0]||Wb!==U[1])da.polygonOffset($a,Wb),U[0]=$a,U[1]=Wb;uc=ka.sample_alpha;uc!==W.sample_alpha&&(uc?da.enable(32926):da.disable(32926),W.sample_alpha=uc);Xb=ka.sample_enable;Xb!==W.sample_enable&&(Xb?da.enable(32928):da.disable(32928),W.sample_enable=Xb);Pb=ya[0];Nc=ya[1];if(Pb!==Ga[0]||Nc!==Ga[1])da.sampleCoverage(Pb,Nc),Ga[0]=Pb,Ga[1]=Nc;Rb=ka.stencil_enable;Rb!==W.stencil_enable&&(Rb?da.enable(2960):da.disable(2960),
W.stencil_enable=Rb);Pd=ka.stencil_mask;Pd!==W.stencil_mask&&(da.stencilMask(Pd),W.stencil_mask=Pd);Fc=Ca[0];vd=Ca[1];Qc=Ca[2];if(Fc!==ja[0]||vd!==ja[1]||Qc!==ja[2])da.stencilFunc(Fc,vd,Qc),ja[0]=Fc,ja[1]=vd,ja[2]=Qc;Yc=Ka[0];sd=Ka[1];oc=Ka[2];xc=Ka[3];if(Yc!==Fa[0]||sd!==Fa[1]||oc!==Fa[2]||xc!==Fa[3])da.stencilOpSeparate(Yc,sd,oc,xc),Fa[0]=Yc,Fa[1]=sd,Fa[2]=oc,Fa[3]=xc;hc=X[0];db=X[1];tc=X[2];Tb=X[3];if(hc!==ua[0]||db!==ua[1]||tc!==ua[2]||Tb!==ua[3])da.stencilOpSeparate(hc,db,tc,Tb),ua[0]=hc,ua[1]=
db,ua[2]=tc,ua[3]=Tb}p=a.viewport;w=p.x|0;y=p.y|0;m="width"in p?p.width|0:ba.framebufferWidth-w;u="height"in p?p.height|0:ba.framebufferHeight-y;h=ba.viewportWidth;ba.viewportWidth=m;x=ba.viewportHeight;ba.viewportHeight=u;da.viewport(w,y,m,u);Y[0]=w;Y[1]=y;Y[2]=m;Y[3]=u;da.blendColor(0,0,0,0);Zb[0]=0;Zb[1]=0;Zb[2]=0;Zb[3]=0;da.enable(3042);W.blend_enable=!0;da.blendEquationSeparate(32774,32774);ia[0]=32774;ia[1]=32774;da.blendFuncSeparate(770,771,773,1);sa[0]=770;sa[1]=771;sa[2]=773;sa[3]=1;da.disable(2929);
W.depth_enable=!1;C=a.viewport;v=C.x|0;q=C.y|0;fa="width"in C?C.width|0:ba.framebufferWidth-v;T="height"in C?C.height|0:ba.framebufferHeight-q;da.scissor(v,q,fa,T);za[0]=v;za[1]=q;za[2]=fa;za[3]=T;da.enable(3089);W.scissor_enable=!0;if(Ja=W.profile)Ea=performance.now(),d.count++;da.useProgram(b.program);A=Ba.angle_instanced_arrays;Qa.setVAO(null);I=f.call(this,ba,a,0);cc.offset=I;E=!1;D=null;H=0;qa=!1;F=r=0;na=1;aa=0;Ua=5126;ga=oa=ca=Aa=0;xa(cc)?(E=!0,D=K.createStream(34962,cc),Ua=D.dtype):(D=K.getBuffer(cc))?
Ua=D.dtype:"constant"in cc?(na=2,"number"===typeof cc.constant?(ca=cc.constant,oa=ga=Aa=0):(ca=0<cc.constant.length?cc.constant[0]:0,oa=1<cc.constant.length?cc.constant[1]:0,ga=2<cc.constant.length?cc.constant[2]:0,Aa=3<cc.constant.length?cc.constant[3]:0)):(D=xa(cc.buffer)?K.createStream(34962,cc.buffer):K.getBuffer(cc.buffer),Ua="type"in cc?Kc[cc.type]:D.dtype,qa=!!cc.normalized,F=cc.size|0,r=cc.offset|0,aa=cc.stride|0,H=cc.divisor|0);fb=O.location;Eb=J[fb];if(1===na){Eb.buffer||da.enableVertexAttribArray(fb);
vc=F||2;if(Eb.type!==Ua||Eb.size!==vc||Eb.buffer!==D||Eb.normalized!==qa||Eb.offset!==r||Eb.stride!==aa)da.bindBuffer(34962,D.buffer),da.vertexAttribPointer(fb,vc,Ua,qa,aa,r),Eb.type=Ua,Eb.size=vc,Eb.buffer=D,Eb.normalized=qa,Eb.offset=r,Eb.stride=aa;Eb.divisor!==H&&(A.vertexAttribDivisorANGLE(fb,H),Eb.divisor=H)}else if(Eb.buffer&&(da.disableVertexAttribArray(fb),Eb.buffer=null),Eb.x!==ca||Eb.y!==oa||Eb.z!==ga||Eb.w!==Aa)da.vertexAttrib4f(fb,ca,oa,ga,Aa),Eb.x=ca,Eb.y=oa,Eb.z=ga,Eb.w=Aa;yb=c.call(this,
ba,a,0);Sb.offset=yb;yc=!1;Bb=null;Lc=0;mc=!1;hd=Hc=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Ic=0;xa(Sb)?(yc=!0,Bb=K.createStream(34962,Sb),fc=Bb.dtype):(Bb=K.getBuffer(Sb))?fc=Bb.dtype:"constant"in Sb?(cd=2,"number"===typeof Sb.constant?(pc=Sb.constant,rc=nc=Ic=0):(pc=0<Sb.constant.length?Sb.constant[0]:0,rc=1<Sb.constant.length?Sb.constant[1]:0,nc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Bb=xa(Sb.buffer)?K.createStream(34962,Sb.buffer):K.getBuffer(Sb.buffer),fc="type"in
Sb?Kc[Sb.type]:Bb.dtype,mc=!!Sb.normalized,hd=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Lc=Sb.divisor|0);qc=M.location;ob=J[qc];if(1===cd){ob.buffer||da.enableVertexAttribArray(qc);Pc=hd||2;if(ob.type!==fc||ob.size!==Pc||ob.buffer!==Bb||ob.normalized!==mc||ob.offset!==Hc||ob.stride!==Ec)da.bindBuffer(34962,Bb.buffer),da.vertexAttribPointer(qc,Pc,fc,mc,Ec,Hc),ob.type=fc,ob.size=Pc,ob.buffer=Bb,ob.normalized=mc,ob.offset=Hc,ob.stride=Ec;ob.divisor!==Lc&&(A.vertexAttribDivisorANGLE(qc,Lc),ob.divisor=Lc)}else if(ob.buffer&&
(da.disableVertexAttribArray(qc),ob.buffer=null),ob.x!==pc||ob.y!==rc||ob.z!==nc||ob.w!==Ic)da.vertexAttrib4f(qc,pc,rc,nc,Ic),ob.x=pc,ob.y=rc,ob.z=nc,ob.w=Ic;Qb=k.call(this,ba,a,0);Ha.offset=Qb;cb=!1;Lb=null;ab=0;jb=!1;Jc=Wa=0;Mb=1;Hb=0;sc=5126;Cb=Fb=kb=Nb=0;xa(Ha)?(cb=!0,Lb=K.createStream(34962,Ha),sc=Lb.dtype):(Lb=K.getBuffer(Ha))?sc=Lb.dtype:"constant"in Ha?(Mb=2,"number"===typeof Ha.constant?(kb=Ha.constant,Fb=Cb=Nb=0):(kb=0<Ha.constant.length?Ha.constant[0]:0,Fb=1<Ha.constant.length?Ha.constant[1]:
0,Cb=2<Ha.constant.length?Ha.constant[2]:0,Nb=3<Ha.constant.length?Ha.constant[3]:0)):(Lb=xa(Ha.buffer)?K.createStream(34962,Ha.buffer):K.getBuffer(Ha.buffer),sc="type"in Ha?Kc[Ha.type]:Lb.dtype,jb=!!Ha.normalized,Jc=Ha.size|0,Wa=Ha.offset|0,Hb=Ha.stride|0,ab=Ha.divisor|0);xb=G.location;hb=J[xb];if(1===Mb){hb.buffer||da.enableVertexAttribArray(xb);$b=Jc||4;if(hb.type!==sc||hb.size!==$b||hb.buffer!==Lb||hb.normalized!==jb||hb.offset!==Wa||hb.stride!==Hb)da.bindBuffer(34962,Lb.buffer),da.vertexAttribPointer(xb,
$b,sc,jb,Hb,Wa),hb.type=sc,hb.size=$b,hb.buffer=Lb,hb.normalized=jb,hb.offset=Wa,hb.stride=Hb;hb.divisor!==ab&&(A.vertexAttribDivisorANGLE(xb,ab),hb.divisor=ab)}else if(hb.buffer&&(da.disableVertexAttribArray(xb),hb.buffer=null),hb.x!==kb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)da.vertexAttrib4f(xb,kb,Fb,Cb,Nb),hb.x=kb,hb.y=Fb,hb.z=Cb,hb.w=Nb;Ob=z.call(this,ba,a,0);bc.offset=Ob;qb=!1;Ta=null;Ub=0;zb=!1;ib=jc=0;pb=1;Ia=0;sb=5126;Na=gb=eb=La=0;xa(bc)?(qb=!0,Ta=K.createStream(34962,bc),sb=Ta.dtype):(Ta=K.getBuffer(bc))?
sb=Ta.dtype:"constant"in bc?(pb=2,"number"===typeof bc.constant?(eb=bc.constant,gb=Na=La=0):(eb=0<bc.constant.length?bc.constant[0]:0,gb=1<bc.constant.length?bc.constant[1]:0,Na=2<bc.constant.length?bc.constant[2]:0,La=3<bc.constant.length?bc.constant[3]:0)):(Ta=xa(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),sb="type"in bc?Kc[bc.type]:Ta.dtype,zb=!!bc.normalized,ib=bc.size|0,jc=bc.offset|0,Ia=bc.stride|0,Ub=bc.divisor|0);lb=L.location;Xa=J[lb];if(1===pb){Xa.buffer||da.enableVertexAttribArray(lb);
ub=ib||4;if(Xa.type!==sb||Xa.size!==ub||Xa.buffer!==Ta||Xa.normalized!==zb||Xa.offset!==jc||Xa.stride!==Ia)da.bindBuffer(34962,Ta.buffer),da.vertexAttribPointer(lb,ub,sb,zb,Ia,jc),Xa.type=sb,Xa.size=ub,Xa.buffer=Ta,Xa.normalized=zb,Xa.offset=jc,Xa.stride=Ia;Xa.divisor!==Ub&&(A.vertexAttribDivisorANGLE(lb,Ub),Xa.divisor=Ub)}else if(Xa.buffer&&(da.disableVertexAttribArray(lb),Xa.buffer=null),Xa.x!==eb||Xa.y!==gb||Xa.z!==Na||Xa.w!==La)da.vertexAttrib4f(lb,eb,gb,Na,La),Xa.x=eb,Xa.y=gb,Xa.z=Na,Xa.w=La;
tb=ma.location;Pa=J[tb];Pa.buffer||da.enableVertexAttribArray(tb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==B||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)da.bindBuffer(34962,B.buffer),da.vertexAttribPointer(tb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=B,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(A.vertexAttribDivisorANGLE(tb,0),Pa.divisor=0);Dc=S.location;Va=J[Dc];Va.buffer||da.enableVertexAttribArray(Dc);if(5126!==Va.type||2!==Va.size||Va.buffer!==e||!1!==Va.normalized||
8!==Va.offset||24!==Va.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(Dc,2,5126,!1,24,8),Va.type=5126,Va.size=2,Va.buffer=e,Va.normalized=!1,Va.offset=8,Va.stride=24;0!==Va.divisor&&(A.vertexAttribDivisorANGLE(Dc,0),Va.divisor=0);Ib=t.location;Db=J[Ib];Db.buffer||da.enableVertexAttribArray(Ib);if(5126!==Db.type||2!==Db.size||Db.buffer!==l||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)da.bindBuffer(34962,l.buffer),da.vertexAttribPointer(Ib,2,5126,!1,24,16),Db.type=5126,Db.size=2,
Db.buffer=l,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(A.vertexAttribDivisorANGLE(Ib,0),Db.divisor=0);Ma=g.call(this,ba,a,0);da.uniform4f(pa.location,Ma[0],Ma[1],Ma[2],Ma[3]);da.uniform1f(V.location,a.lineWidth);da.uniform1f(ea.location,a.capSize);zd=a.scale;da.uniform2f(N.location,zd[0],zd[1]);Za=a.scaleFract;da.uniform2f(P.location,Za[0],Za[1]);Jb=a.translate;da.uniform2f(Q.location,Jb[0],Jb[1]);Kb=a.translateFract;da.uniform2f(ra.location,Kb[0],Kb[1]);da.uniform1f(R.location,a.opacity);
(mb=la.elements)?da.bindBuffer(34963,mb.buffer.buffer):Qa.currentVAO&&(mb=ha.getElements(Qa.currentVAO.elements))&&da.bindBuffer(34963,mb.buffer.buffer);Oa=la.offset;ac=a.count;0<ac?mb?A.drawElementsInstancedANGLE(4,36,mb.type,Oa<<(mb.type-5121>>1),ac):A.drawArraysInstancedANGLE(4,Oa,36,ac):0>ac&&(mb?da.drawElements(4,36,mb.type,Oa<<(mb.type-5121>>1)):da.drawArrays(4,Oa,36));W.dirty=!0;Qa.setVAO(null);ba.viewportWidth=h;ba.viewportHeight=x;Ja&&(d.cpuTime+=performance.now()-Ea);E&&K.destroyStream(D);
yc&&K.destroyStream(Bb);cb&&K.destroyStream(Lb);qb&&K.destroyStream(Ta)},scope:function(c,b,a){var k,f,g,t,m,u,h,z,q,J,ia,N,U,T,A,sa,ya,Qa,Ga,D,O,Zb,M,H,da,Z,R,F,ja,Q,X,va,P,L,za,Ca,Y,ra,ha,wa,S,ua,V,ca,Da,ga,ea,pa,Gb,G,ma,Ba,rb,Fa,Ka,ta,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,
ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd;k=c.viewport;f=k.x|0;g=k.y|0;t="width"in k?k.width|0:ba.framebufferWidth-f;m="height"in k?k.height|0:ba.framebufferHeight-g;u=ba.viewportWidth;ba.viewportWidth=t;h=ba.viewportHeight;ba.viewportHeight=m;z=fb[0];fb[0]=f;q=fb[1];fb[1]=g;J=fb[2];fb[2]=t;ia=fb[3];fb[3]=m;N=Ja[0];Ja[0]=0;U=Ja[1];Ja[1]=0;T=Ja[2];Ja[2]=0;A=Ja[3];Ja[3]=0;sa=ka.blend_enable;
ka.blend_enable=!0;ya=Ua[0];Ua[0]=32774;Qa=Ua[1];Ua[1]=32774;Ga=fa[0];fa[0]=770;D=fa[1];fa[1]=771;O=fa[2];fa[2]=773;Zb=fa[3];fa[3]=1;M=ka.depth_enable;ka.depth_enable=!1;H=c.viewport;da=H.x|0;Z=H.y|0;R="width"in H?H.width|0:ba.framebufferWidth-da;F="height"in H?H.height|0:ba.framebufferHeight-Z;ja=qa[0];qa[0]=da;Q=qa[1];qa[1]=Z;X=qa[2];qa[2]=R;va=qa[3];qa[3]=F;P=ka.scissor_enable;ka.scissor_enable=!0;if(L=W.profile)za=performance.now(),d.count++;Ca=la.count;la.count=36;Y=c.count;ra=la.instances;la.instances=
Y;ha=la.primitive;la.primitive=4;wa=c.capSize;S=Aa[5];Aa[5]=wa;ua=c.lineWidth;V=Aa[4];Aa[4]=ua;ca=c.opacity;Da=Aa[10];Aa[10]=ca;ga=c.range;ea=Aa[18];Aa[18]=ga;pa=c.scale;Gb=Aa[6];Aa[6]=pa;G=c.scaleFract;ma=Aa[7];Aa[7]=G;Ba=c.translate;rb=Aa[8];Aa[8]=Ba;Fa=c.translateFract;Ka=Aa[9];Aa[9]=Fa;ta=n.call(this,ba,c,a);Hb=Aa[3];Aa[3]=ta;sc=p.buffer;p.buffer=l;Nb=p.divisor;p.divisor=0;kb=p.normalized;p.normalized=!1;Fb=p.offset;p.offset=16;Cb=p.size;p.size=0;xb=p.state;p.state=1;hb=p.stride;p.stride=24;$b=
p.type;p.type=5126;Ob=p.w;p.w=0;qb=p.x;p.x=0;Ta=p.y;p.y=0;Ub=p.z;p.z=0;zb=w.call(this,ba,c,a);bc.offset=zb;jc=!1;ib=null;pb=0;Ia=!1;La=sb=0;eb=1;gb=0;Na=5126;tb=ub=Xa=lb=0;xa(bc)?(jc=!0,ib=K.createStream(34962,bc),Na=ib.dtype):(ib=K.getBuffer(bc))?Na=ib.dtype:"constant"in bc?(eb=2,"number"===typeof bc.constant?(Xa=bc.constant,ub=tb=lb=0):(Xa=0<bc.constant.length?bc.constant[0]:0,ub=1<bc.constant.length?bc.constant[1]:0,tb=2<bc.constant.length?bc.constant[2]:0,lb=3<bc.constant.length?bc.constant[3]:
0)):(ib=xa(bc.buffer)?K.createStream(34962,bc.buffer):K.getBuffer(bc.buffer),Na="type"in bc?Kc[bc.type]:ib.dtype,Ia=!!bc.normalized,La=bc.size|0,sb=bc.offset|0,gb=bc.stride|0,pb=bc.divisor|0);Pa=y.buffer;y.buffer=ib;Dc=y.divisor;y.divisor=pb;Va=y.normalized;y.normalized=Ia;Ib=y.offset;y.offset=sb;Db=y.size;y.size=La;Ma=y.state;y.state=eb;zd=y.stride;y.stride=gb;Za=y.type;y.type=Na;Jb=y.w;y.w=lb;Kb=y.x;y.x=Xa;mb=y.y;y.y=ub;Oa=y.z;y.z=tb;ac=C.buffer;C.buffer=B;Ra=C.divisor;C.divisor=0;vb=C.normalized;
C.normalized=!1;wb=C.offset;C.offset=0;Sa=C.size;C.size=0;nb=C.state;C.state=1;gc=C.stride;C.stride=24;Bc=C.type;C.type=5126;wc=C.w;C.w=0;bb=C.x;C.x=0;kc=C.y;C.y=0;Mc=C.z;C.z=0;Ya=Ea.call(this,ba,c,a);Ha.offset=Ya;nd=!1;Ab=null;$a=0;Wb=!1;Xb=uc=0;Pb=1;Nc=0;Rb=5126;Qc=vd=Fc=Pd=0;xa(Ha)?(nd=!0,Ab=K.createStream(34962,Ha),Rb=Ab.dtype):(Ab=K.getBuffer(Ha))?Rb=Ab.dtype:"constant"in Ha?(Pb=2,"number"===typeof Ha.constant?(Fc=Ha.constant,vd=Qc=Pd=0):(Fc=0<Ha.constant.length?Ha.constant[0]:0,vd=1<Ha.constant.length?
Ha.constant[1]:0,Qc=2<Ha.constant.length?Ha.constant[2]:0,Pd=3<Ha.constant.length?Ha.constant[3]:0)):(Ab=xa(Ha.buffer)?K.createStream(34962,Ha.buffer):K.getBuffer(Ha.buffer),Rb="type"in Ha?Kc[Ha.type]:Ab.dtype,Wb=!!Ha.normalized,Xb=Ha.size|0,uc=Ha.offset|0,Nc=Ha.stride|0,$a=Ha.divisor|0);Yc=x.buffer;x.buffer=Ab;sd=x.divisor;x.divisor=$a;oc=x.normalized;x.normalized=Wb;xc=x.offset;x.offset=uc;hc=x.size;x.size=Xb;db=x.state;x.state=Pb;tc=x.stride;x.stride=Nc;Tb=x.type;x.type=Rb;Yb=x.w;x.w=Pd;ec=x.x;
x.x=Fc;ic=x.y;x.y=vd;zc=x.z;x.z=Qc;Cc=v.buffer;v.buffer=e;dd=v.divisor;v.divisor=0;Tc=v.normalized;v.normalized=!1;Uc=v.offset;v.offset=8;Vc=v.size;v.size=0;Zc=v.state;v.state=1;od=v.stride;v.stride=24;ed=v.type;v.type=5126;$c=v.w;v.w=0;lc=v.x;v.x=0;dc=v.y;v.y=0;ad=v.z;v.z=0;Xc=r.call(this,ba,c,a);cc.offset=Xc;fd=!1;Ac=null;jd=0;Cd=!1;oe=ye=0;kd=1;Fe=0;Fd=5126;Nd=Ud=ee=he=0;xa(cc)?(fd=!0,Ac=K.createStream(34962,cc),Fd=Ac.dtype):(Ac=K.getBuffer(cc))?Fd=Ac.dtype:"constant"in cc?(kd=2,"number"===typeof cc.constant?
(ee=cc.constant,Ud=Nd=he=0):(ee=0<cc.constant.length?cc.constant[0]:0,Ud=1<cc.constant.length?cc.constant[1]:0,Nd=2<cc.constant.length?cc.constant[2]:0,he=3<cc.constant.length?cc.constant[3]:0)):(Ac=xa(cc.buffer)?K.createStream(34962,cc.buffer):K.getBuffer(cc.buffer),Fd="type"in cc?Kc[cc.type]:Ac.dtype,Cd=!!cc.normalized,oe=cc.size|0,ye=cc.offset|0,Fe=cc.stride|0,jd=cc.divisor|0);Kd=I.buffer;I.buffer=Ac;qd=I.divisor;I.divisor=jd;Wc=I.normalized;I.normalized=Cd;wd=I.offset;I.offset=ye;ud=I.size;I.size=
oe;ld=I.state;I.state=kd;xd=I.stride;I.stride=Fe;Gd=I.type;I.type=Fd;Hd=I.w;I.w=he;je=I.x;I.x=ee;me=I.y;I.y=Ud;ue=I.z;I.z=Nd;ne=aa.call(this,ba,c,a);Sb.offset=ne;ke=!1;ie=null;ve=0;fe=!1;Rc=pe=0;id=1;we=0;se=5126;Xd=Wd=Vd=Rd=0;xa(Sb)?(ke=!0,ie=K.createStream(34962,Sb),se=ie.dtype):(ie=K.getBuffer(Sb))?se=ie.dtype:"constant"in Sb?(id=2,"number"===typeof Sb.constant?(Vd=Sb.constant,Wd=Xd=Rd=0):(Vd=0<Sb.constant.length?Sb.constant[0]:0,Wd=1<Sb.constant.length?Sb.constant[1]:0,Xd=2<Sb.constant.length?
Sb.constant[2]:0,Rd=3<Sb.constant.length?Sb.constant[3]:0)):(ie=xa(Sb.buffer)?K.createStream(34962,Sb.buffer):K.getBuffer(Sb.buffer),se="type"in Sb?Kc[Sb.type]:ie.dtype,fe=!!Sb.normalized,Rc=Sb.size|0,pe=Sb.offset|0,we=Sb.stride|0,ve=Sb.divisor|0);qe=E.buffer;E.buffer=ie;Ce=E.divisor;E.divisor=ve;Ge=E.normalized;E.normalized=fe;te=E.offset;E.offset=pe;Ve=E.size;E.size=Rc;We=E.state;E.state=id;Re=E.stride;E.stride=we;xe=E.type;E.type=se;Je=E.w;E.w=Rd;Le=E.x;E.x=Vd;Me=E.y;E.y=Wd;Ne=E.z;E.z=Xd;Ke=oa.vert;
oa.vert=2;Sd=oa.frag;oa.frag=1;W.dirty=!0;b(ba,c,a);ba.viewportWidth=u;ba.viewportHeight=h;fb[0]=z;fb[1]=q;fb[2]=J;fb[3]=ia;Ja[0]=N;Ja[1]=U;Ja[2]=T;Ja[3]=A;ka.blend_enable=sa;Ua[0]=ya;Ua[1]=Qa;fa[0]=Ga;fa[1]=D;fa[2]=O;fa[3]=Zb;ka.depth_enable=M;qa[0]=ja;qa[1]=Q;qa[2]=X;qa[3]=va;ka.scissor_enable=P;L&&(d.cpuTime+=performance.now()-za);la.count=Ca;la.instances=ra;la.primitive=ha;Aa[5]=S;Aa[4]=V;Aa[10]=Da;Aa[18]=ea;Aa[6]=Gb;Aa[7]=ma;Aa[8]=rb;Aa[9]=Ka;Aa[3]=Hb;p.buffer=sc;p.divisor=Nb;p.normalized=kb;
p.offset=Fb;p.size=Cb;p.state=xb;p.stride=hb;p.type=$b;p.w=Ob;p.x=qb;p.y=Ta;p.z=Ub;jc&&K.destroyStream(ib);y.buffer=Pa;y.divisor=Dc;y.normalized=Va;y.offset=Ib;y.size=Db;y.state=Ma;y.stride=zd;y.type=Za;y.w=Jb;y.x=Kb;y.y=mb;y.z=Oa;C.buffer=ac;C.divisor=Ra;C.normalized=vb;C.offset=wb;C.size=Sa;C.state=nb;C.stride=gc;C.type=Bc;C.w=wc;C.x=bb;C.y=kc;C.z=Mc;nd&&K.destroyStream(Ab);x.buffer=Yc;x.divisor=sd;x.normalized=oc;x.offset=xc;x.size=hc;x.state=db;x.stride=tc;x.type=Tb;x.w=Yb;x.x=ec;x.y=ic;x.z=zc;
v.buffer=Cc;v.divisor=dd;v.normalized=Tc;v.offset=Uc;v.size=Vc;v.state=Zc;v.stride=od;v.type=ed;v.w=$c;v.x=lc;v.y=dc;v.z=ad;fd&&K.destroyStream(Ac);I.buffer=Kd;I.divisor=qd;I.normalized=Wc;I.offset=wd;I.size=ud;I.state=ld;I.stride=xd;I.type=Gd;I.w=Hd;I.x=je;I.y=me;I.z=ue;ke&&K.destroyStream(ie);E.buffer=qe;E.divisor=Ce;E.normalized=Ge;E.offset=te;E.size=Ve;E.state=We;E.stride=Re;E.type=xe;E.w=Je;E.x=Le;E.y=Me;E.z=Ne;oa.vert=Ke;oa.frag=Sd;W.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,r,I,aa,E,A,ca,H,F,D,ga,t,ea,L,G){var ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca,ja,X;ta=a.attributes;S=a.buffer;V=a.context;R=a.current;O=a.draw;M=a.elements;N=a.extensions;P=a.framebuffer;Q=a.gl;ra=a.isBufferArgs;pa=a.next;J=a.shader;K=a.uniforms;ba=a.vao;W=pa.blend_color;la=R.blend_color;ha=pa.blend_equation;Ba=R.blend_equation;wa=pa.blend_func;da=R.blend_func;xa=pa.colorMask;ka=R.colorMask;
oa=pa.depth_range;Aa=R.depth_range;Qa=pa.polygonOffset_offset;Ja=R.polygonOffset_offset;Zb=pa.sample_coverage;Ua=R.sample_coverage;ia=pa.scissor_box;fa=R.scissor_box;sa=pa.stencil_func;va=R.stencil_func;Da=pa.stencil_opBack;rb=R.stencil_opBack;Gb=pa.stencil_opFront;Z=R.stencil_opFront;U=pa.viewport;ya=R.viewport;Ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};qa={divisor:1,offset:8,stride:8};za={divisor:1,offset:8,stride:8};Ca={divisor:1,offset:16,
stride:8};ja={divisor:1,offset:16,stride:8};X={divisor:1,offset:0,stride:4};return{batch:function(c,e){var b,a,l,k,f,g;b=P.next;b!==P.cur&&(b?Q.bindFramebuffer(36160,b.framebuffer):Q.bindFramebuffer(36160,null),P.cur=b);if(R.dirty){var n,p,u,h,B,z,J,ia,U,T,K,W,ha,wa,Bd,Be,Qe,Ue,Jd,Ee,le,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc;n=pa.dither;n!==R.dither&&(n?Q.enable(3024):Q.disable(3024),R.dither=n);p=pa.depth_func;p!==R.depth_func&&(Q.depthFunc(p),R.depth_func=p);u=oa[0];h=oa[1];if(u!==Aa[0]||h!==Aa[1])Q.depthRange(u,
h),Aa[0]=u,Aa[1]=h;B=pa.depth_mask;B!==R.depth_mask&&(Q.depthMask(B),R.depth_mask=B);z=xa[0];J=xa[1];ia=xa[2];U=xa[3];if(z!==ka[0]||J!==ka[1]||ia!==ka[2]||U!==ka[3])Q.colorMask(z,J,ia,U),ka[0]=z,ka[1]=J,ka[2]=ia,ka[3]=U;T=pa.cull_enable;T!==R.cull_enable&&(T?Q.enable(2884):Q.disable(2884),R.cull_enable=T);K=pa.cull_face;K!==R.cull_face&&(Q.cullFace(K),R.cull_face=K);W=pa.frontFace;W!==R.frontFace&&(Q.frontFace(W),R.frontFace=W);ha=pa.lineWidth;ha!==R.lineWidth&&(Q.lineWidth(ha),R.lineWidth=ha);wa=
pa.polygonOffset_enable;wa!==R.polygonOffset_enable&&(wa?Q.enable(32823):Q.disable(32823),R.polygonOffset_enable=wa);Bd=Qa[0];Be=Qa[1];if(Bd!==Ja[0]||Be!==Ja[1])Q.polygonOffset(Bd,Be),Ja[0]=Bd,Ja[1]=Be;Qe=pa.sample_alpha;Qe!==R.sample_alpha&&(Qe?Q.enable(32926):Q.disable(32926),R.sample_alpha=Qe);Ue=pa.sample_enable;Ue!==R.sample_enable&&(Ue?Q.enable(32928):Q.disable(32928),R.sample_enable=Ue);Jd=Zb[0];Ee=Zb[1];if(Jd!==Ua[0]||Ee!==Ua[1])Q.sampleCoverage(Jd,Ee),Ua[0]=Jd,Ua[1]=Ee;le=pa.stencil_mask;
le!==R.stencil_mask&&(Q.stencilMask(le),R.stencil_mask=le);be=sa[0];Md=sa[1];Ed=sa[2];if(be!==va[0]||Md!==va[1]||Ed!==va[2])Q.stencilFunc(be,Md,Ed),va[0]=be,va[1]=Md,va[2]=Ed;pd=Gb[0];bd=Gb[1];td=Gb[2];Oc=Gb[3];if(pd!==Z[0]||bd!==Z[1]||td!==Z[2]||Oc!==Z[3])Q.stencilOpSeparate(pd,bd,td,Oc),Z[0]=pd,Z[1]=bd,Z[2]=td,Z[3]=Oc;rd=Da[0];Gc=Da[1];gd=Da[2];Sc=Da[3];if(rd!==rb[0]||Gc!==rb[1]||gd!==rb[2]||Sc!==rb[3])Q.stencilOpSeparate(rd,Gc,gd,Sc),rb[0]=rd,rb[1]=Gc,rb[2]=gd,rb[3]=Sc}Q.blendColor(0,0,0,0);la[0]=
0;la[1]=0;la[2]=0;la[3]=0;Q.enable(3042);R.blend_enable=!0;Q.blendEquationSeparate(32774,32774);Ba[0]=32774;Ba[1]=32774;Q.blendFuncSeparate(770,771,773,1);da[0]=770;da[1]=771;da[2]=773;da[3]=1;Q.enable(3089);R.scissor_enable=!0;Q.disable(2960);R.stencil_enable=!1;if(a=R.profile)l=performance.now(),d.count+=e;Q.useProgram(w.program);k=N.angle_instanced_arrays;var md,Vb,Eb,vc,yb;ba.setVAO(null);md=ca.location;Vb=ta[md];Vb.buffer||Q.enableVertexAttribArray(md);if(5126!==Vb.type||1!==Vb.size||Vb.buffer!==
q||!1!==Vb.normalized||0!==Vb.offset||8!==Vb.stride)Q.bindBuffer(34962,q.buffer),Q.vertexAttribPointer(md,1,5126,!1,8,0),Vb.type=5126,Vb.size=1,Vb.buffer=q,Vb.normalized=!1,Vb.offset=0,Vb.stride=8;0!==Vb.divisor&&(k.vertexAttribDivisorANGLE(md,0),Vb.divisor=0);Eb=H.location;vc=ta[Eb];vc.buffer||Q.enableVertexAttribArray(Eb);if(5126!==vc.type||1!==vc.size||vc.buffer!==m||!1!==vc.normalized||4!==vc.offset||8!==vc.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Eb,1,5126,!1,8,4),vc.type=5126,
vc.size=1,vc.buffer=m,vc.normalized=!1,vc.offset=4,vc.stride=8;0!==vc.divisor&&(k.vertexAttribDivisorANGLE(Eb,0),vc.divisor=0);(yb=O.elements)?Q.bindBuffer(34963,yb.buffer.buffer):ba.currentVAO&&(yb=M.getElements(ba.currentVAO.elements))&&Q.bindBuffer(34963,yb.buffer.buffer);for(f=0;f<e;++f){g=c[f];var yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,
wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld;yc=g.viewport;Bb=yc.x|0;Lc=yc.y|0;mc="width"in yc?yc.width|0:V.framebufferWidth-Bb;Hc="height"in yc?yc.height|0:V.framebufferHeight-Lc;hd=V.viewportWidth;V.viewportWidth=mc;cd=V.viewportHeight;V.viewportHeight=Hc;Q.viewport(Bb,Lc,mc,Hc);ya[0]=Bb;ya[1]=Lc;ya[2]=mc;ya[3]=Hc;(Ec=y.call(this,V,g,f))?Q.enable(2929):
Q.disable(2929);R.depth_enable=Ec;fc=g.viewport;Ic=fc.x|0;pc=fc.y|0;rc="width"in fc?fc.width|0:V.framebufferWidth-Ic;nc="height"in fc?fc.height|0:V.framebufferHeight-pc;Q.scissor(Ic,pc,rc,nc);fa[0]=Ic;fa[1]=pc;fa[2]=rc;fa[3]=nc;qa.buffer=g.positionBuffer;qc=!1;ob=null;Pc=0;Qb=!1;Lb=cb=0;ab=1;jb=0;Wa=5126;sc=Hb=Mb=Jc=0;ra(qa)?(qc=!0,ob=S.createStream(34962,qa),Wa=ob.dtype):(ob=S.getBuffer(qa))?Wa=ob.dtype:"constant"in qa?(ab=2,"number"===typeof qa.constant?(Mb=qa.constant,Hb=sc=Jc=0):(Mb=0<qa.constant.length?
qa.constant[0]:0,Hb=1<qa.constant.length?qa.constant[1]:0,sc=2<qa.constant.length?qa.constant[2]:0,Jc=3<qa.constant.length?qa.constant[3]:0)):(ob=ra(qa.buffer)?S.createStream(34962,qa.buffer):S.getBuffer(qa.buffer),Wa="type"in qa?Ga[qa.type]:ob.dtype,Qb=!!qa.normalized,Lb=qa.size|0,cb=qa.offset|0,jb=qa.stride|0,Pc=qa.divisor|0);Nb=Ea.location;kb=ta[Nb];if(1===ab){kb.buffer||Q.enableVertexAttribArray(Nb);Fb=Lb||2;if(kb.type!==Wa||kb.size!==Fb||kb.buffer!==ob||kb.normalized!==Qb||kb.offset!==cb||kb.stride!==
jb)Q.bindBuffer(34962,ob.buffer),Q.vertexAttribPointer(Nb,Fb,Wa,Qb,jb,cb),kb.type=Wa,kb.size=Fb,kb.buffer=ob,kb.normalized=Qb,kb.offset=cb,kb.stride=jb;kb.divisor!==Pc&&(k.vertexAttribDivisorANGLE(Nb,Pc),kb.divisor=Pc)}else if(kb.buffer&&(Q.disableVertexAttribArray(Nb),kb.buffer=null),kb.x!==Mb||kb.y!==Hb||kb.z!==sc||kb.w!==Jc)Q.vertexAttrib4f(Nb,Mb,Hb,sc,Jc),kb.x=Mb,kb.y=Hb,kb.z=sc,kb.w=Jc;Ca.buffer=g.positionBuffer;Cb=!1;xb=null;hb=0;$b=!1;qb=Ob=0;Ta=1;Ub=0;zb=5126;Ia=pb=ib=jc=0;ra(Ca)?(Cb=!0,xb=
S.createStream(34962,Ca),zb=xb.dtype):(xb=S.getBuffer(Ca))?zb=xb.dtype:"constant"in Ca?(Ta=2,"number"===typeof Ca.constant?(ib=Ca.constant,pb=Ia=jc=0):(ib=0<Ca.constant.length?Ca.constant[0]:0,pb=1<Ca.constant.length?Ca.constant[1]:0,Ia=2<Ca.constant.length?Ca.constant[2]:0,jc=3<Ca.constant.length?Ca.constant[3]:0)):(xb=ra(Ca.buffer)?S.createStream(34962,Ca.buffer):S.getBuffer(Ca.buffer),zb="type"in Ca?Ga[Ca.type]:xb.dtype,$b=!!Ca.normalized,qb=Ca.size|0,Ob=Ca.offset|0,Ub=Ca.stride|0,hb=Ca.divisor|
0);sb=v.location;La=ta[sb];if(1===Ta){La.buffer||Q.enableVertexAttribArray(sb);eb=qb||2;if(La.type!==zb||La.size!==eb||La.buffer!==xb||La.normalized!==$b||La.offset!==Ob||La.stride!==Ub)Q.bindBuffer(34962,xb.buffer),Q.vertexAttribPointer(sb,eb,zb,$b,Ub,Ob),La.type=zb,La.size=eb,La.buffer=xb,La.normalized=$b,La.offset=Ob,La.stride=Ub;La.divisor!==hb&&(k.vertexAttribDivisorANGLE(sb,hb),La.divisor=hb)}else if(La.buffer&&(Q.disableVertexAttribArray(sb),La.buffer=null),La.x!==ib||La.y!==pb||La.z!==Ia||
La.w!==jc)Q.vertexAttrib4f(sb,ib,pb,Ia,jc),La.x=ib,La.y=pb,La.z=Ia,La.w=jc;za.buffer=g.positionFractBuffer;gb=!1;Na=null;lb=0;Xa=!1;tb=ub=0;Pa=1;Dc=0;Va=5126;zd=Ma=Db=Ib=0;ra(za)?(gb=!0,Na=S.createStream(34962,za),Va=Na.dtype):(Na=S.getBuffer(za))?Va=Na.dtype:"constant"in za?(Pa=2,"number"===typeof za.constant?(Db=za.constant,Ma=zd=Ib=0):(Db=0<za.constant.length?za.constant[0]:0,Ma=1<za.constant.length?za.constant[1]:0,zd=2<za.constant.length?za.constant[2]:0,Ib=3<za.constant.length?za.constant[3]:
0)):(Na=ra(za.buffer)?S.createStream(34962,za.buffer):S.getBuffer(za.buffer),Va="type"in za?Ga[za.type]:Na.dtype,Xa=!!za.normalized,tb=za.size|0,ub=za.offset|0,Dc=za.stride|0,lb=za.divisor|0);Za=x.location;Jb=ta[Za];if(1===Pa){Jb.buffer||Q.enableVertexAttribArray(Za);Kb=tb||2;if(Jb.type!==Va||Jb.size!==Kb||Jb.buffer!==Na||Jb.normalized!==Xa||Jb.offset!==ub||Jb.stride!==Dc)Q.bindBuffer(34962,Na.buffer),Q.vertexAttribPointer(Za,Kb,Va,Xa,Dc,ub),Jb.type=Va,Jb.size=Kb,Jb.buffer=Na,Jb.normalized=Xa,Jb.offset=
ub,Jb.stride=Dc;Jb.divisor!==lb&&(k.vertexAttribDivisorANGLE(Za,lb),Jb.divisor=lb)}else if(Jb.buffer&&(Q.disableVertexAttribArray(Za),Jb.buffer=null),Jb.x!==Db||Jb.y!==Ma||Jb.z!==zd||Jb.w!==Ib)Q.vertexAttrib4f(Za,Db,Ma,zd,Ib),Jb.x=Db,Jb.y=Ma,Jb.z=zd,Jb.w=Ib;ja.buffer=g.positionFractBuffer;mb=!1;Oa=null;ac=0;Ra=!1;wb=vb=0;Sa=1;nb=0;gc=5126;kc=bb=wc=Bc=0;ra(ja)?(mb=!0,Oa=S.createStream(34962,ja),gc=Oa.dtype):(Oa=S.getBuffer(ja))?gc=Oa.dtype:"constant"in ja?(Sa=2,"number"===typeof ja.constant?(wc=ja.constant,
bb=kc=Bc=0):(wc=0<ja.constant.length?ja.constant[0]:0,bb=1<ja.constant.length?ja.constant[1]:0,kc=2<ja.constant.length?ja.constant[2]:0,Bc=3<ja.constant.length?ja.constant[3]:0)):(Oa=ra(ja.buffer)?S.createStream(34962,ja.buffer):S.getBuffer(ja.buffer),gc="type"in ja?Ga[ja.type]:Oa.dtype,Ra=!!ja.normalized,wb=ja.size|0,vb=ja.offset|0,nb=ja.stride|0,ac=ja.divisor|0);Mc=r.location;Ya=ta[Mc];if(1===Sa){Ya.buffer||Q.enableVertexAttribArray(Mc);nd=wb||2;if(Ya.type!==gc||Ya.size!==nd||Ya.buffer!==Oa||Ya.normalized!==
Ra||Ya.offset!==vb||Ya.stride!==nb)Q.bindBuffer(34962,Oa.buffer),Q.vertexAttribPointer(Mc,nd,gc,Ra,nb,vb),Ya.type=gc,Ya.size=nd,Ya.buffer=Oa,Ya.normalized=Ra,Ya.offset=vb,Ya.stride=nb;Ya.divisor!==ac&&(k.vertexAttribDivisorANGLE(Mc,ac),Ya.divisor=ac)}else if(Ya.buffer&&(Q.disableVertexAttribArray(Mc),Ya.buffer=null),Ya.x!==wc||Ya.y!==bb||Ya.z!==kc||Ya.w!==Bc)Q.vertexAttrib4f(Mc,wc,bb,kc,Bc),Ya.x=wc,Ya.y=bb,Ya.z=kc,Ya.w=Bc;X.buffer=g.colorBuffer;Ab=!1;$a=null;Wb=0;uc=!1;Pb=Xb=0;Nc=1;Rb=0;Pd=5126;Yc=
Qc=vd=Fc=0;ra(X)?(Ab=!0,$a=S.createStream(34962,X),Pd=$a.dtype):($a=S.getBuffer(X))?Pd=$a.dtype:"constant"in X?(Nc=2,"number"===typeof X.constant?(vd=X.constant,Qc=Yc=Fc=0):(vd=0<X.constant.length?X.constant[0]:0,Qc=1<X.constant.length?X.constant[1]:0,Yc=2<X.constant.length?X.constant[2]:0,Fc=3<X.constant.length?X.constant[3]:0)):($a=ra(X.buffer)?S.createStream(34962,X.buffer):S.getBuffer(X.buffer),Pd="type"in X?Ga[X.type]:$a.dtype,uc=!!X.normalized,Pb=X.size|0,Xb=X.offset|0,Rb=X.stride|0,Wb=X.divisor|
0);sd=I.location;oc=ta[sd];if(1===Nc){oc.buffer||Q.enableVertexAttribArray(sd);xc=Pb||4;if(oc.type!==Pd||oc.size!==xc||oc.buffer!==$a||oc.normalized!==uc||oc.offset!==Xb||oc.stride!==Rb)Q.bindBuffer(34962,$a.buffer),Q.vertexAttribPointer(sd,xc,Pd,uc,Rb,Xb),oc.type=Pd,oc.size=xc,oc.buffer=$a,oc.normalized=uc,oc.offset=Xb,oc.stride=Rb;oc.divisor!==Wb&&(k.vertexAttribDivisorANGLE(sd,Wb),oc.divisor=Wb)}else if(oc.buffer&&(Q.disableVertexAttribArray(sd),oc.buffer=null),oc.x!==vd||oc.y!==Qc||oc.z!==Yc||
oc.w!==Fc)Q.vertexAttrib4f(sd,vd,Qc,Yc,Fc),oc.x=vd,oc.y=Qc,oc.z=Yc,oc.w=Fc;hc=g.scale;db=hc[0];Tb=hc[1];f&&tc===db&&Yb===Tb||(tc=db,Yb=Tb,Q.uniform2f(D.location,db,Tb));ec=g.scaleFract;ic=ec[0];Cc=ec[1];f&&zc===ic&&dd===Cc||(zc=ic,dd=Cc,Q.uniform2f(ga.location,ic,Cc));Tc=g.translate;Uc=Tc[0];Zc=Tc[1];f&&Vc===Uc&&od===Zc||(Vc=Uc,od=Zc,Q.uniform2f(ea.location,Uc,Zc));ed=g.translateFract;$c=ed[0];dc=ed[1];f&&lc===$c&&ad===dc||(lc=$c,ad=dc,Q.uniform2f(L.location,$c,dc));Xc=g.thickness;f&&fd===Xc||(fd=
Xc,Q.uniform1f(t.location,Xc));Ac=g.depth;f&&jd===Ac||(jd=Ac,Q.uniform1f(A.location,Ac));Cd=C.call(this,V,g,f);ye=Cd[0];kd=Cd[1];Fd=Cd[2];ee=Cd[3];f&&oe===ye&&Fe===kd&&he===Fd&&Ud===ee||(oe=ye,Fe=kd,he=Fd,Ud=ee,Q.uniform4f(G.location,ye,kd,Fd,ee));Nd=g.dashLength;f&&Kd===Nd||(Kd=Nd,Q.uniform1f(aa.location,Nd));qd=g.opacity;f&&Wc===qd||(Wc=qd,Q.uniform1f(F.location,qd));(wd=g.dashTexture)&&"framebuffer"===wd._reglType&&(wd=wd.color[0]);ud=wd._texture;Q.uniform1i(E.location,ud.bind());ld=g.count;0<
ld?yb?k.drawElementsInstancedANGLE(5,4,yb.type,0<<(yb.type-5121>>1),ld):k.drawArraysInstancedANGLE(5,0,4,ld):0>ld&&(yb?Q.drawElements(5,4,yb.type,0<<(yb.type-5121>>1)):Q.drawArrays(5,0,4));V.viewportWidth=hd;V.viewportHeight=cd;qc&&S.destroyStream(ob);Cb&&S.destroyStream(xb);gb&&S.destroyStream(Na);mb&&S.destroyStream(Oa);Ab&&S.destroyStream($a);ud.unbind()}R.dirty=!0;ba.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(c){var e,a,l,k,f,g,n,p,w,y,C,B,z,J,ia,U,K,W,ha,wa,Od,Bd,Be,Qe,Ue,
Jd,Ee,le,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb;e=P.next;e!==P.cur&&(e?Q.bindFramebuffer(36160,e.framebuffer):Q.bindFramebuffer(36160,null),P.cur=e);if(R.dirty){var wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb;wb=pa.dither;wb!==R.dither&&(wb?Q.enable(3024):
Q.disable(3024),R.dither=wb);Sa=pa.depth_func;Sa!==R.depth_func&&(Q.depthFunc(Sa),R.depth_func=Sa);nb=oa[0];gc=oa[1];if(nb!==Aa[0]||gc!==Aa[1])Q.depthRange(nb,gc),Aa[0]=nb,Aa[1]=gc;Bc=pa.depth_mask;Bc!==R.depth_mask&&(Q.depthMask(Bc),R.depth_mask=Bc);wc=xa[0];bb=xa[1];kc=xa[2];Mc=xa[3];if(wc!==ka[0]||bb!==ka[1]||kc!==ka[2]||Mc!==ka[3])Q.colorMask(wc,bb,kc,Mc),ka[0]=wc,ka[1]=bb,ka[2]=kc,ka[3]=Mc;Ya=pa.cull_enable;Ya!==R.cull_enable&&(Ya?Q.enable(2884):Q.disable(2884),R.cull_enable=Ya);nd=pa.cull_face;
nd!==R.cull_face&&(Q.cullFace(nd),R.cull_face=nd);Ab=pa.frontFace;Ab!==R.frontFace&&(Q.frontFace(Ab),R.frontFace=Ab);$a=pa.lineWidth;$a!==R.lineWidth&&(Q.lineWidth($a),R.lineWidth=$a);Wb=pa.polygonOffset_enable;Wb!==R.polygonOffset_enable&&(Wb?Q.enable(32823):Q.disable(32823),R.polygonOffset_enable=Wb);uc=Qa[0];Xb=Qa[1];if(uc!==Ja[0]||Xb!==Ja[1])Q.polygonOffset(uc,Xb),Ja[0]=uc,Ja[1]=Xb;Pb=pa.sample_alpha;Pb!==R.sample_alpha&&(Pb?Q.enable(32926):Q.disable(32926),R.sample_alpha=Pb);Nc=pa.sample_enable;
Nc!==R.sample_enable&&(Nc?Q.enable(32928):Q.disable(32928),R.sample_enable=Nc);Rb=Zb[0];Pd=Zb[1];if(Rb!==Ua[0]||Pd!==Ua[1])Q.sampleCoverage(Rb,Pd),Ua[0]=Rb,Ua[1]=Pd;Fc=pa.stencil_mask;Fc!==R.stencil_mask&&(Q.stencilMask(Fc),R.stencil_mask=Fc);vd=sa[0];Qc=sa[1];Yc=sa[2];if(vd!==va[0]||Qc!==va[1]||Yc!==va[2])Q.stencilFunc(vd,Qc,Yc),va[0]=vd,va[1]=Qc,va[2]=Yc;sd=Gb[0];oc=Gb[1];xc=Gb[2];hc=Gb[3];if(sd!==Z[0]||oc!==Z[1]||xc!==Z[2]||hc!==Z[3])Q.stencilOpSeparate(sd,oc,xc,hc),Z[0]=sd,Z[1]=oc,Z[2]=xc,Z[3]=
hc;db=Da[0];tc=Da[1];Tb=Da[2];Yb=Da[3];if(db!==rb[0]||tc!==rb[1]||Tb!==rb[2]||Yb!==rb[3])Q.stencilOpSeparate(db,tc,Tb,Yb),rb[0]=db,rb[1]=tc,rb[2]=Tb,rb[3]=Yb}a=c.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:V.framebufferWidth-l;g="height"in a?a.height|0:V.framebufferHeight-k;n=V.viewportWidth;V.viewportWidth=f;p=V.viewportHeight;V.viewportHeight=g;Q.viewport(l,k,f,g);ya[0]=l;ya[1]=k;ya[2]=f;ya[3]=g;Q.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;Q.enable(3042);R.blend_enable=!0;Q.blendEquationSeparate(32774,
32774);Ba[0]=32774;Ba[1]=32774;Q.blendFuncSeparate(770,771,773,1);da[0]=770;da[1]=771;da[2]=773;da[3]=1;(w=h.call(this,V,c,0))?Q.enable(2929):Q.disable(2929);R.depth_enable=w;y=c.viewport;C=y.x|0;B=y.y|0;z="width"in y?y.width|0:V.framebufferWidth-C;J="height"in y?y.height|0:V.framebufferHeight-B;Q.scissor(C,B,z,J);fa[0]=C;fa[1]=B;fa[2]=z;fa[3]=J;Q.enable(3089);R.scissor_enable=!0;Q.disable(2960);R.stencil_enable=!1;if(ia=R.profile)U=performance.now(),d.count++;Q.useProgram(u.program);K=N.angle_instanced_arrays;
ba.setVAO(null);qa.buffer=c.positionBuffer;W=!1;ha=null;wa=0;Od=!1;Be=Bd=0;Qe=1;Ue=0;Jd=5126;Md=be=le=Ee=0;ra(qa)?(W=!0,ha=S.createStream(34962,qa),Jd=ha.dtype):(ha=S.getBuffer(qa))?Jd=ha.dtype:"constant"in qa?(Qe=2,"number"===typeof qa.constant?(le=qa.constant,be=Md=Ee=0):(le=0<qa.constant.length?qa.constant[0]:0,be=1<qa.constant.length?qa.constant[1]:0,Md=2<qa.constant.length?qa.constant[2]:0,Ee=3<qa.constant.length?qa.constant[3]:0)):(ha=ra(qa.buffer)?S.createStream(34962,qa.buffer):S.getBuffer(qa.buffer),
Jd="type"in qa?Ga[qa.type]:ha.dtype,Od=!!qa.normalized,Be=qa.size|0,Bd=qa.offset|0,Ue=qa.stride|0,wa=qa.divisor|0);Ed=Ea.location;pd=ta[Ed];if(1===Qe){pd.buffer||Q.enableVertexAttribArray(Ed);bd=Be||2;if(pd.type!==Jd||pd.size!==bd||pd.buffer!==ha||pd.normalized!==Od||pd.offset!==Bd||pd.stride!==Ue)Q.bindBuffer(34962,ha.buffer),Q.vertexAttribPointer(Ed,bd,Jd,Od,Ue,Bd),pd.type=Jd,pd.size=bd,pd.buffer=ha,pd.normalized=Od,pd.offset=Bd,pd.stride=Ue;pd.divisor!==wa&&(K.vertexAttribDivisorANGLE(Ed,wa),pd.divisor=
wa)}else if(pd.buffer&&(Q.disableVertexAttribArray(Ed),pd.buffer=null),pd.x!==le||pd.y!==be||pd.z!==Md||pd.w!==Ee)Q.vertexAttrib4f(Ed,le,be,Md,Ee),pd.x=le,pd.y=be,pd.z=Md,pd.w=Ee;Ca.buffer=c.positionBuffer;td=!1;Oc=null;rd=0;Gc=!1;Sc=gd=0;md=1;Vb=0;Eb=5126;Bb=yc=yb=vc=0;ra(Ca)?(td=!0,Oc=S.createStream(34962,Ca),Eb=Oc.dtype):(Oc=S.getBuffer(Ca))?Eb=Oc.dtype:"constant"in Ca?(md=2,"number"===typeof Ca.constant?(yb=Ca.constant,yc=Bb=vc=0):(yb=0<Ca.constant.length?Ca.constant[0]:0,yc=1<Ca.constant.length?
Ca.constant[1]:0,Bb=2<Ca.constant.length?Ca.constant[2]:0,vc=3<Ca.constant.length?Ca.constant[3]:0)):(Oc=ra(Ca.buffer)?S.createStream(34962,Ca.buffer):S.getBuffer(Ca.buffer),Eb="type"in Ca?Ga[Ca.type]:Oc.dtype,Gc=!!Ca.normalized,Sc=Ca.size|0,gd=Ca.offset|0,Vb=Ca.stride|0,rd=Ca.divisor|0);Lc=v.location;mc=ta[Lc];if(1===md){mc.buffer||Q.enableVertexAttribArray(Lc);Hc=Sc||2;if(mc.type!==Eb||mc.size!==Hc||mc.buffer!==Oc||mc.normalized!==Gc||mc.offset!==gd||mc.stride!==Vb)Q.bindBuffer(34962,Oc.buffer),
Q.vertexAttribPointer(Lc,Hc,Eb,Gc,Vb,gd),mc.type=Eb,mc.size=Hc,mc.buffer=Oc,mc.normalized=Gc,mc.offset=gd,mc.stride=Vb;mc.divisor!==rd&&(K.vertexAttribDivisorANGLE(Lc,rd),mc.divisor=rd)}else if(mc.buffer&&(Q.disableVertexAttribArray(Lc),mc.buffer=null),mc.x!==yb||mc.y!==yc||mc.z!==Bb||mc.w!==vc)Q.vertexAttrib4f(Lc,yb,yc,Bb,vc),mc.x=yb,mc.y=yc,mc.z=Bb,mc.w=vc;za.buffer=c.positionFractBuffer;hd=!1;cd=null;Ec=0;fc=!1;pc=Ic=0;rc=1;nc=0;qc=5126;cb=Qb=Pc=ob=0;ra(za)?(hd=!0,cd=S.createStream(34962,za),qc=
cd.dtype):(cd=S.getBuffer(za))?qc=cd.dtype:"constant"in za?(rc=2,"number"===typeof za.constant?(Pc=za.constant,Qb=cb=ob=0):(Pc=0<za.constant.length?za.constant[0]:0,Qb=1<za.constant.length?za.constant[1]:0,cb=2<za.constant.length?za.constant[2]:0,ob=3<za.constant.length?za.constant[3]:0)):(cd=ra(za.buffer)?S.createStream(34962,za.buffer):S.getBuffer(za.buffer),qc="type"in za?Ga[za.type]:cd.dtype,fc=!!za.normalized,pc=za.size|0,Ic=za.offset|0,nc=za.stride|0,Ec=za.divisor|0);Lb=x.location;ab=ta[Lb];
if(1===rc){ab.buffer||Q.enableVertexAttribArray(Lb);jb=pc||2;if(ab.type!==qc||ab.size!==jb||ab.buffer!==cd||ab.normalized!==fc||ab.offset!==Ic||ab.stride!==nc)Q.bindBuffer(34962,cd.buffer),Q.vertexAttribPointer(Lb,jb,qc,fc,nc,Ic),ab.type=qc,ab.size=jb,ab.buffer=cd,ab.normalized=fc,ab.offset=Ic,ab.stride=nc;ab.divisor!==Ec&&(K.vertexAttribDivisorANGLE(Lb,Ec),ab.divisor=Ec)}else if(ab.buffer&&(Q.disableVertexAttribArray(Lb),ab.buffer=null),ab.x!==Pc||ab.y!==Qb||ab.z!==cb||ab.w!==ob)Q.vertexAttrib4f(Lb,
Pc,Qb,cb,ob),ab.x=Pc,ab.y=Qb,ab.z=cb,ab.w=ob;ja.buffer=c.positionFractBuffer;Wa=!1;Jc=null;Mb=0;Hb=!1;Nb=sc=0;kb=1;Fb=0;Cb=5126;Ob=$b=hb=xb=0;ra(ja)?(Wa=!0,Jc=S.createStream(34962,ja),Cb=Jc.dtype):(Jc=S.getBuffer(ja))?Cb=Jc.dtype:"constant"in ja?(kb=2,"number"===typeof ja.constant?(hb=ja.constant,$b=Ob=xb=0):(hb=0<ja.constant.length?ja.constant[0]:0,$b=1<ja.constant.length?ja.constant[1]:0,Ob=2<ja.constant.length?ja.constant[2]:0,xb=3<ja.constant.length?ja.constant[3]:0)):(Jc=ra(ja.buffer)?S.createStream(34962,
ja.buffer):S.getBuffer(ja.buffer),Cb="type"in ja?Ga[ja.type]:Jc.dtype,Hb=!!ja.normalized,Nb=ja.size|0,sc=ja.offset|0,Fb=ja.stride|0,Mb=ja.divisor|0);qb=r.location;Ta=ta[qb];if(1===kb){Ta.buffer||Q.enableVertexAttribArray(qb);Ub=Nb||2;if(Ta.type!==Cb||Ta.size!==Ub||Ta.buffer!==Jc||Ta.normalized!==Hb||Ta.offset!==sc||Ta.stride!==Fb)Q.bindBuffer(34962,Jc.buffer),Q.vertexAttribPointer(qb,Ub,Cb,Hb,Fb,sc),Ta.type=Cb,Ta.size=Ub,Ta.buffer=Jc,Ta.normalized=Hb,Ta.offset=sc,Ta.stride=Fb;Ta.divisor!==Mb&&(K.vertexAttribDivisorANGLE(qb,
Mb),Ta.divisor=Mb)}else if(Ta.buffer&&(Q.disableVertexAttribArray(qb),Ta.buffer=null),Ta.x!==hb||Ta.y!==$b||Ta.z!==Ob||Ta.w!==xb)Q.vertexAttrib4f(qb,hb,$b,Ob,xb),Ta.x=hb,Ta.y=$b,Ta.z=Ob,Ta.w=xb;X.buffer=c.colorBuffer;zb=!1;jc=null;ib=0;pb=!1;sb=Ia=0;La=1;eb=0;gb=5126;ub=Xa=lb=Na=0;ra(X)?(zb=!0,jc=S.createStream(34962,X),gb=jc.dtype):(jc=S.getBuffer(X))?gb=jc.dtype:"constant"in X?(La=2,"number"===typeof X.constant?(lb=X.constant,Xa=ub=Na=0):(lb=0<X.constant.length?X.constant[0]:0,Xa=1<X.constant.length?
X.constant[1]:0,ub=2<X.constant.length?X.constant[2]:0,Na=3<X.constant.length?X.constant[3]:0)):(jc=ra(X.buffer)?S.createStream(34962,X.buffer):S.getBuffer(X.buffer),gb="type"in X?Ga[X.type]:jc.dtype,pb=!!X.normalized,sb=X.size|0,Ia=X.offset|0,eb=X.stride|0,ib=X.divisor|0);tb=I.location;Pa=ta[tb];if(1===La){Pa.buffer||Q.enableVertexAttribArray(tb);Dc=sb||4;if(Pa.type!==gb||Pa.size!==Dc||Pa.buffer!==jc||Pa.normalized!==pb||Pa.offset!==Ia||Pa.stride!==eb)Q.bindBuffer(34962,jc.buffer),Q.vertexAttribPointer(tb,
Dc,gb,pb,eb,Ia),Pa.type=gb,Pa.size=Dc,Pa.buffer=jc,Pa.normalized=pb,Pa.offset=Ia,Pa.stride=eb;Pa.divisor!==ib&&(K.vertexAttribDivisorANGLE(tb,ib),Pa.divisor=ib)}else if(Pa.buffer&&(Q.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Xa||Pa.z!==ub||Pa.w!==Na)Q.vertexAttrib4f(tb,lb,Xa,ub,Na),Pa.x=lb,Pa.y=Xa,Pa.z=ub,Pa.w=Na;Va=ca.location;Ib=ta[Va];Ib.buffer||Q.enableVertexAttribArray(Va);if(5126!==Ib.type||1!==Ib.size||Ib.buffer!==q||!1!==Ib.normalized||0!==Ib.offset||8!==Ib.stride)Q.bindBuffer(34962,
q.buffer),Q.vertexAttribPointer(Va,1,5126,!1,8,0),Ib.type=5126,Ib.size=1,Ib.buffer=q,Ib.normalized=!1,Ib.offset=0,Ib.stride=8;0!==Ib.divisor&&(K.vertexAttribDivisorANGLE(Va,0),Ib.divisor=0);Db=H.location;Ma=ta[Db];Ma.buffer||Q.enableVertexAttribArray(Db);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==m||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)Q.bindBuffer(34962,m.buffer),Q.vertexAttribPointer(Db,1,5126,!1,8,4),Ma.type=5126,Ma.size=1,Ma.buffer=m,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&
(K.vertexAttribDivisorANGLE(Db,0),Ma.divisor=0);zd=c.scale;Q.uniform2f(D.location,zd[0],zd[1]);Za=c.scaleFract;Q.uniform2f(ga.location,Za[0],Za[1]);Jb=c.translate;Q.uniform2f(ea.location,Jb[0],Jb[1]);Kb=c.translateFract;Q.uniform2f(L.location,Kb[0],Kb[1]);Q.uniform1f(t.location,c.thickness);Q.uniform1f(A.location,c.depth);mb=b.call(this,V,c,0);Q.uniform4f(G.location,mb[0],mb[1],mb[2],mb[3]);Q.uniform1f(aa.location,c.dashLength);Q.uniform1f(F.location,c.opacity);(Oa=c.dashTexture)&&"framebuffer"===
Oa._reglType&&(Oa=Oa.color[0]);ac=Oa._texture;Q.uniform1i(E.location,ac.bind());(Ra=O.elements)?Q.bindBuffer(34963,Ra.buffer.buffer):ba.currentVAO&&(Ra=M.getElements(ba.currentVAO.elements))&&Q.bindBuffer(34963,Ra.buffer.buffer);vb=c.count;0<vb?Ra?K.drawElementsInstancedANGLE(5,4,Ra.type,0<<(Ra.type-5121>>1),vb):K.drawArraysInstancedANGLE(5,0,4,vb):0>vb&&(Ra?Q.drawElements(5,4,Ra.type,0<<(Ra.type-5121>>1)):Q.drawArrays(5,0,4));R.dirty=!0;ba.setVAO(null);V.viewportWidth=n;V.viewportHeight=p;ia&&(d.cpuTime+=
performance.now()-U);W&&S.destroyStream(ha);td&&S.destroyStream(Oc);hd&&S.destroyStream(cd);Wa&&S.destroyStream(Jc);zb&&S.destroyStream(jc);ac.unbind()},scope:function(b,a,t){var w,y,u,h,C,x,v,fa,N,T,A,Ja,sa,Ea,ya,I,Qa,E,D,Zb,M,H,da,Z,r,F,Q,na,va,P,L,ba,aa,ka,Ua,Aa,ca,oa,Da,ga,ea,xa,G,Gb,la,ma,Ba,rb,ta,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,
kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se;w=b.viewport;y=w.x|0;u=w.y|0;h="width"in w?w.width|0:V.framebufferWidth-y;C="height"in w?w.height|0:V.framebufferHeight-u;x=V.viewportWidth;V.viewportWidth=h;v=V.viewportHeight;V.viewportHeight=
C;fa=U[0];U[0]=y;N=U[1];U[1]=u;T=U[2];U[2]=h;A=U[3];U[3]=C;Ja=W[0];W[0]=0;sa=W[1];W[1]=0;Ea=W[2];W[2]=0;ya=W[3];W[3]=0;I=pa.blend_enable;pa.blend_enable=!0;Qa=ha[0];ha[0]=32774;E=ha[1];ha[1]=32774;D=wa[0];wa[0]=770;Zb=wa[1];wa[1]=771;M=wa[2];wa[2]=773;H=wa[3];wa[3]=1;da=f.call(this,V,b,t);Z=pa.depth_enable;pa.depth_enable=da;r=b.viewport;F=r.x|0;Q=r.y|0;na="width"in r?r.width|0:V.framebufferWidth-F;va="height"in r?r.height|0:V.framebufferHeight-Q;P=ia[0];ia[0]=F;L=ia[1];ia[1]=Q;ba=ia[2];ia[2]=na;
aa=ia[3];ia[3]=va;ka=pa.scissor_enable;pa.scissor_enable=!0;Ua=pa.stencil_enable;pa.stencil_enable=!1;if(Aa=R.profile)ca=performance.now(),d.count++;oa=O.offset;O.offset=0;Da=O.count;O.count=4;ga=b.count;ea=O.instances;O.instances=ga;xa=O.primitive;O.primitive=5;G=b.dashLength;Gb=K[23];K[23]=G;la=b.dashTexture;ma=K[24];K[24]=la;Ba=b.depth;rb=K[22];K[22]=Ba;ta=b.id;Ec=K[31];K[31]=ta;fc=b.miterLimit;Ic=K[32];K[32]=fc;pc=c.call(this,V,b,t);rc=K[33];K[33]=pc;nc=b.opacity;qc=K[10];K[10]=nc;ob=V.pixelRatio;
Pc=K[34];K[34]=ob;Qb=b.scale;cb=K[6];K[6]=Qb;Lb=b.scaleFract;ab=K[7];K[7]=Lb;jb=b.thickness;Wa=K[21];K[21]=jb;Jc=b.translate;Mb=K[8];K[8]=Jc;Hb=b.translateFract;sc=K[9];K[9]=Hb;Nb=k.call(this,V,b,t);kb=K[3];K[3]=Nb;qa.buffer=b.positionBuffer;Fb=!1;Cb=null;xb=0;hb=!1;Ob=$b=0;qb=1;Ta=0;Ub=5126;pb=ib=jc=zb=0;ra(qa)?(Fb=!0,Cb=S.createStream(34962,qa),Ub=Cb.dtype):(Cb=S.getBuffer(qa))?Ub=Cb.dtype:"constant"in qa?(qb=2,"number"===typeof qa.constant?(jc=qa.constant,ib=pb=zb=0):(jc=0<qa.constant.length?qa.constant[0]:
0,ib=1<qa.constant.length?qa.constant[1]:0,pb=2<qa.constant.length?qa.constant[2]:0,zb=3<qa.constant.length?qa.constant[3]:0)):(Cb=ra(qa.buffer)?S.createStream(34962,qa.buffer):S.getBuffer(qa.buffer),Ub="type"in qa?Ga[qa.type]:Cb.dtype,hb=!!qa.normalized,Ob=qa.size|0,$b=qa.offset|0,Ta=qa.stride|0,xb=qa.divisor|0);Ia=z.buffer;z.buffer=Cb;sb=z.divisor;z.divisor=xb;La=z.normalized;z.normalized=hb;eb=z.offset;z.offset=$b;gb=z.size;z.size=Ob;Na=z.state;z.state=qb;lb=z.stride;z.stride=Ta;Xa=z.type;z.type=
Ub;ub=z.w;z.w=zb;tb=z.x;z.x=jc;Pa=z.y;z.y=ib;Dc=z.z;z.z=pb;za.buffer=b.positionFractBuffer;Va=!1;Ib=null;Db=0;Ma=!1;Za=zd=0;Jb=1;Kb=0;mb=5126;vb=Ra=ac=Oa=0;ra(za)?(Va=!0,Ib=S.createStream(34962,za),mb=Ib.dtype):(Ib=S.getBuffer(za))?mb=Ib.dtype:"constant"in za?(Jb=2,"number"===typeof za.constant?(ac=za.constant,Ra=vb=Oa=0):(ac=0<za.constant.length?za.constant[0]:0,Ra=1<za.constant.length?za.constant[1]:0,vb=2<za.constant.length?za.constant[2]:0,Oa=3<za.constant.length?za.constant[3]:0)):(Ib=ra(za.buffer)?
S.createStream(34962,za.buffer):S.getBuffer(za.buffer),mb="type"in za?Ga[za.type]:Ib.dtype,Ma=!!za.normalized,Za=za.size|0,zd=za.offset|0,Kb=za.stride|0,Db=za.divisor|0);wb=B.buffer;B.buffer=Ib;Sa=B.divisor;B.divisor=Db;nb=B.normalized;B.normalized=Ma;gc=B.offset;B.offset=zd;Bc=B.size;B.size=Za;wc=B.state;B.state=Jb;bb=B.stride;B.stride=Kb;kc=B.type;B.type=mb;Mc=B.w;B.w=Oa;Ya=B.x;B.x=ac;nd=B.y;B.y=Ra;Ab=B.z;B.z=vb;Ca.buffer=b.positionBuffer;$a=!1;Wb=null;uc=0;Xb=!1;Nc=Pb=0;Rb=1;Pd=0;Fc=5126;sd=Yc=
Qc=vd=0;ra(Ca)?($a=!0,Wb=S.createStream(34962,Ca),Fc=Wb.dtype):(Wb=S.getBuffer(Ca))?Fc=Wb.dtype:"constant"in Ca?(Rb=2,"number"===typeof Ca.constant?(Qc=Ca.constant,Yc=sd=vd=0):(Qc=0<Ca.constant.length?Ca.constant[0]:0,Yc=1<Ca.constant.length?Ca.constant[1]:0,sd=2<Ca.constant.length?Ca.constant[2]:0,vd=3<Ca.constant.length?Ca.constant[3]:0)):(Wb=ra(Ca.buffer)?S.createStream(34962,Ca.buffer):S.getBuffer(Ca.buffer),Fc="type"in Ca?Ga[Ca.type]:Wb.dtype,Xb=!!Ca.normalized,Nc=Ca.size|0,Pb=Ca.offset|0,Pd=
Ca.stride|0,uc=Ca.divisor|0);oc=e.buffer;e.buffer=Wb;xc=e.divisor;e.divisor=uc;hc=e.normalized;e.normalized=Xb;db=e.offset;e.offset=Pb;tc=e.size;e.size=Nc;Tb=e.state;e.state=Rb;Yb=e.stride;e.stride=Pd;ec=e.type;e.type=Fc;ic=e.w;e.w=vd;zc=e.x;e.x=Qc;Cc=e.y;e.y=Yc;dd=e.z;e.z=sd;ja.buffer=b.positionFractBuffer;Tc=!1;Uc=null;Vc=0;Zc=!1;ed=od=0;$c=1;lc=0;dc=5126;Ac=fd=Xc=ad=0;ra(ja)?(Tc=!0,Uc=S.createStream(34962,ja),dc=Uc.dtype):(Uc=S.getBuffer(ja))?dc=Uc.dtype:"constant"in ja?($c=2,"number"===typeof ja.constant?
(Xc=ja.constant,fd=Ac=ad=0):(Xc=0<ja.constant.length?ja.constant[0]:0,fd=1<ja.constant.length?ja.constant[1]:0,Ac=2<ja.constant.length?ja.constant[2]:0,ad=3<ja.constant.length?ja.constant[3]:0)):(Uc=ra(ja.buffer)?S.createStream(34962,ja.buffer):S.getBuffer(ja.buffer),dc="type"in ja?Ga[ja.type]:Uc.dtype,Zc=!!ja.normalized,ed=ja.size|0,od=ja.offset|0,lc=ja.stride|0,Vc=ja.divisor|0);jd=l.buffer;l.buffer=Uc;Cd=l.divisor;l.divisor=Vc;ye=l.normalized;l.normalized=Zc;oe=l.offset;l.offset=od;kd=l.size;l.size=
ed;Fe=l.state;l.state=$c;Fd=l.stride;l.stride=lc;he=l.type;l.type=dc;ee=l.w;l.w=ad;Ud=l.x;l.x=Xc;Nd=l.y;l.y=fd;Kd=l.z;l.z=Ac;X.buffer=b.colorBuffer;qd=!1;Wc=null;wd=0;ud=!1;xd=ld=0;Gd=1;Hd=0;je=5126;ke=ne=ue=me=0;ra(X)?(qd=!0,Wc=S.createStream(34962,X),je=Wc.dtype):(Wc=S.getBuffer(X))?je=Wc.dtype:"constant"in X?(Gd=2,"number"===typeof X.constant?(ue=X.constant,ne=ke=me=0):(ue=0<X.constant.length?X.constant[0]:0,ne=1<X.constant.length?X.constant[1]:0,ke=2<X.constant.length?X.constant[2]:0,me=3<X.constant.length?
X.constant[3]:0)):(Wc=ra(X.buffer)?S.createStream(34962,X.buffer):S.getBuffer(X.buffer),je="type"in X?Ga[X.type]:Wc.dtype,ud=!!X.normalized,xd=X.size|0,ld=X.offset|0,Hd=X.stride|0,wd=X.divisor|0);ie=g.buffer;g.buffer=Wc;ve=g.divisor;g.divisor=wd;fe=g.normalized;g.normalized=ud;pe=g.offset;g.offset=ld;Rc=g.size;g.size=xd;id=g.state;g.state=Gd;we=g.stride;g.stride=Hd;se=g.type;g.type=je;Rd=g.w;g.w=me;Vd=g.x;g.x=ue;Wd=g.y;g.y=ne;Xd=g.z;g.z=ke;qe=n.buffer;n.buffer=q;Ce=n.divisor;n.divisor=0;Ge=n.normalized;
n.normalized=!1;te=n.offset;n.offset=0;Ve=n.size;n.size=0;We=n.state;n.state=1;Re=n.stride;n.stride=8;xe=n.type;n.type=5126;Je=n.w;n.w=0;Le=n.x;n.x=0;Me=n.y;n.y=0;Ne=n.z;n.z=0;Ke=p.buffer;p.buffer=m;Sd=p.divisor;p.divisor=0;ae=p.normalized;p.normalized=!1;de=p.offset;p.offset=4;ge=p.size;p.size=0;Oe=p.state;p.state=1;Ld=p.stride;p.stride=8;Yd=p.type;p.type=5126;He=p.w;p.w=0;Pe=p.x;p.x=0;df=p.y;p.y=0;cf=p.z;p.z=0;Xe=J.vert;J.vert=20;Se=J.frag;J.frag=19;R.dirty=!0;a(V,b,t);V.viewportWidth=x;V.viewportHeight=
v;U[0]=fa;U[1]=N;U[2]=T;U[3]=A;W[0]=Ja;W[1]=sa;W[2]=Ea;W[3]=ya;pa.blend_enable=I;ha[0]=Qa;ha[1]=E;wa[0]=D;wa[1]=Zb;wa[2]=M;wa[3]=H;pa.depth_enable=Z;ia[0]=P;ia[1]=L;ia[2]=ba;ia[3]=aa;pa.scissor_enable=ka;pa.stencil_enable=Ua;Aa&&(d.cpuTime+=performance.now()-ca);O.offset=oa;O.count=Da;O.instances=ea;O.primitive=xa;K[23]=Gb;K[24]=ma;K[22]=rb;K[31]=Ec;K[32]=Ic;K[33]=rc;K[10]=qc;K[34]=Pc;K[6]=cb;K[7]=ab;K[21]=Wa;K[8]=Mb;K[9]=sc;K[3]=kb;Fb&&S.destroyStream(Cb);z.buffer=Ia;z.divisor=sb;z.normalized=La;
z.offset=eb;z.size=gb;z.state=Na;z.stride=lb;z.type=Xa;z.w=ub;z.x=tb;z.y=Pa;z.z=Dc;Va&&S.destroyStream(Ib);B.buffer=wb;B.divisor=Sa;B.normalized=nb;B.offset=gc;B.size=Bc;B.state=wc;B.stride=bb;B.type=kc;B.w=Mc;B.x=Ya;B.y=nd;B.z=Ab;$a&&S.destroyStream(Wb);e.buffer=oc;e.divisor=xc;e.normalized=hc;e.offset=db;e.size=tc;e.state=Tb;e.stride=Yb;e.type=ec;e.w=ic;e.x=zc;e.y=Cc;e.z=dd;Tc&&S.destroyStream(Uc);l.buffer=jd;l.divisor=Cd;l.normalized=ye;l.offset=oe;l.size=kd;l.state=Fe;l.stride=Fd;l.type=he;l.w=
ee;l.x=Ud;l.y=Nd;l.z=Kd;qd&&S.destroyStream(Wc);g.buffer=ie;g.divisor=ve;g.normalized=fe;g.offset=pe;g.size=Rc;g.state=id;g.stride=we;g.type=se;g.w=Rd;g.x=Vd;g.y=Wd;g.z=Xd;n.buffer=qe;n.divisor=Ce;n.normalized=Ge;n.offset=te;n.size=Ve;n.state=We;n.stride=Re;n.type=xe;n.w=Je;n.x=Le;n.y=Me;n.z=Ne;p.buffer=Ke;p.divisor=Sd;p.normalized=ae;p.offset=de;p.size=ge;p.state=Oe;p.stride=Ld;p.type=Yd;p.w=He;p.x=Pe;p.y=df;p.z=cf;J.vert=Xe;J.frag=Se;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,
d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,r,I,aa,E,A,ca,H,F,D,ga,t,ea,L,G,ta,S,V,R){var O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca,ja,X,ua,Ka,Fa,fb,Y;O=a.attributes;M=a.buffer;N=a.context;P=a.current;Q=a.draw;ra=a.elements;pa=a.extensions;J=a.framebuffer;K=a.gl;ba=a.isBufferArgs;W=a.next;la=a.shader;ha=a.uniforms;Ba=a.vao;wa=W.blend_color;da=P.blend_color;xa=W.blend_equation;ka=P.blend_equation;oa=W.blend_func;Aa=P.blend_func;Qa=W.colorMask;
Ja=P.colorMask;Zb=W.depth_range;Ua=P.depth_range;ia=W.polygonOffset_offset;fa=P.polygonOffset_offset;sa=W.sample_coverage;va=P.sample_coverage;Da=W.scissor_box;rb=P.scissor_box;Gb=W.stencil_func;Z=P.stencil_func;U=W.stencil_opBack;ya=P.stencil_opBack;Ga=W.stencil_opFront;qa=P.stencil_opFront;za=W.viewport;Ca=P.viewport;ja={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Ka={divisor:1,offset:4,
stride:4};Fa={divisor:1,offset:16,stride:8};fb={divisor:1,offset:24,stride:8};Y={divisor:1,offset:0,stride:8};return{batch:function(c,e){var b,a,l,k,f,g;b=J.next;b!==J.cur&&(b?K.bindFramebuffer(36160,b.framebuffer):K.bindFramebuffer(36160,null),J.cur=b);if(P.dirty){var n,p,w,y,u,h,B,z,T,za,ha,wa,oa,Da,xa,la,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb;n=W.dither;n!==P.dither&&(n?K.enable(3024):K.disable(3024),P.dither=n);p=W.depth_func;p!==P.depth_func&&(K.depthFunc(p),P.depth_func=p);w=Zb[0];y=Zb[1];
if(w!==Ua[0]||y!==Ua[1])K.depthRange(w,y),Ua[0]=w,Ua[1]=y;u=W.depth_mask;u!==P.depth_mask&&(K.depthMask(u),P.depth_mask=u);h=Qa[0];B=Qa[1];z=Qa[2];T=Qa[3];if(h!==Ja[0]||B!==Ja[1]||z!==Ja[2]||T!==Ja[3])K.colorMask(h,B,z,T),Ja[0]=h,Ja[1]=B,Ja[2]=z,Ja[3]=T;za=W.frontFace;za!==P.frontFace&&(K.frontFace(za),P.frontFace=za);ha=W.lineWidth;ha!==P.lineWidth&&(K.lineWidth(ha),P.lineWidth=ha);wa=W.polygonOffset_enable;wa!==P.polygonOffset_enable&&(wa?K.enable(32823):K.disable(32823),P.polygonOffset_enable=
wa);oa=ia[0];Da=ia[1];if(oa!==fa[0]||Da!==fa[1])K.polygonOffset(oa,Da),fa[0]=oa,fa[1]=Da;xa=W.sample_alpha;xa!==P.sample_alpha&&(xa?K.enable(32926):K.disable(32926),P.sample_alpha=xa);la=W.sample_enable;la!==P.sample_enable&&(la?K.enable(32928):K.disable(32928),P.sample_enable=la);be=sa[0];Md=sa[1];if(be!==va[0]||Md!==va[1])K.sampleCoverage(be,Md),va[0]=be,va[1]=Md;Ed=W.stencil_mask;Ed!==P.stencil_mask&&(K.stencilMask(Ed),P.stencil_mask=Ed);pd=Gb[0];bd=Gb[1];td=Gb[2];if(pd!==Z[0]||bd!==Z[1]||td!==
Z[2])K.stencilFunc(pd,bd,td),Z[0]=pd,Z[1]=bd,Z[2]=td;Oc=Ga[0];rd=Ga[1];Gc=Ga[2];gd=Ga[3];if(Oc!==qa[0]||rd!==qa[1]||Gc!==qa[2]||gd!==qa[3])K.stencilOpSeparate(Oc,rd,Gc,gd),qa[0]=Oc,qa[1]=rd,qa[2]=Gc,qa[3]=gd;Sc=U[0];md=U[1];Vb=U[2];Eb=U[3];if(Sc!==ya[0]||md!==ya[1]||Vb!==ya[2]||Eb!==ya[3])K.stencilOpSeparate(Sc,md,Vb,Eb),ya[0]=Sc,ya[1]=md,ya[2]=Vb,ya[3]=Eb}K.blendColor(0,0,0,0);da[0]=0;da[1]=0;da[2]=0;da[3]=0;K.enable(3042);P.blend_enable=!0;K.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=
32774;K.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;Aa[3]=1;K.enable(2884);P.cull_enable=!0;K.cullFace(1029);P.cull_face=1029;K.enable(3089);P.scissor_enable=!0;K.disable(2960);P.stencil_enable=!1;if(a=P.profile)l=performance.now(),d.count+=e;K.useProgram(C.program);k=pa.angle_instanced_arrays;var vc,yb,yc,Bb,Lc;Ba.setVAO(null);vc=F.location;yb=O[vc];yb.buffer||K.enableVertexAttribArray(vc);if(5126!==yb.type||1!==yb.size||yb.buffer!==q||!1!==yb.normalized||0!==yb.offset||8!==yb.stride)K.bindBuffer(34962,
q.buffer),K.vertexAttribPointer(vc,1,5126,!1,8,0),yb.type=5126,yb.size=1,yb.buffer=q,yb.normalized=!1,yb.offset=0,yb.stride=8;0!==yb.divisor&&(k.vertexAttribDivisorANGLE(vc,0),yb.divisor=0);yc=D.location;Bb=O[yc];Bb.buffer||K.enableVertexAttribArray(yc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==m||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)K.bindBuffer(34962,m.buffer),K.vertexAttribPointer(yc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=m,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&
(k.vertexAttribDivisorANGLE(yc,0),Bb.divisor=0);(Lc=Q.elements)?K.bindBuffer(34963,Lc.buffer.buffer):Ba.currentVAO&&(Lc=ra.getElements(Ba.currentVAO.elements))&&K.bindBuffer(34963,Lc.buffer.buffer);for(f=0;f<e;++f){g=c[f];var mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,
tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc;mc=g.viewport;Hc=mc.x|0;hd=mc.y|0;cd="width"in mc?mc.width|0:N.framebufferWidth-Hc;Ec="height"in mc?mc.height|0:N.framebufferHeight-hd;fc=N.viewportWidth;N.viewportWidth=cd;Ic=N.viewportHeight;N.viewportHeight=Ec;K.viewport(Hc,hd,cd,Ec);Ca[0]=Hc;Ca[1]=hd;Ca[2]=cd;Ca[3]=Ec;(pc=Ea.call(this,N,g,f))?K.enable(2929):K.disable(2929);P.depth_enable=pc;rc=
g.viewport;nc=rc.x|0;qc=rc.y|0;ob="width"in rc?rc.width|0:N.framebufferWidth-nc;Pc="height"in rc?rc.height|0:N.framebufferHeight-qc;K.scissor(nc,qc,ob,Pc);rb[0]=nc;rb[1]=qc;rb[2]=ob;rb[3]=Pc;ua.buffer=g.positionBuffer;Qb=!1;cb=null;Lb=0;ab=!1;Wa=jb=0;Jc=1;Mb=0;Hb=5126;Fb=kb=Nb=sc=0;ba(ua)?(Qb=!0,cb=M.createStream(34962,ua),Hb=cb.dtype):(cb=M.getBuffer(ua))?Hb=cb.dtype:"constant"in ua?(Jc=2,"number"===typeof ua.constant?(Nb=ua.constant,kb=Fb=sc=0):(Nb=0<ua.constant.length?ua.constant[0]:0,kb=1<ua.constant.length?
ua.constant[1]:0,Fb=2<ua.constant.length?ua.constant[2]:0,sc=3<ua.constant.length?ua.constant[3]:0)):(cb=ba(ua.buffer)?M.createStream(34962,ua.buffer):M.getBuffer(ua.buffer),Hb="type"in ua?ja[ua.type]:cb.dtype,ab=!!ua.normalized,Wa=ua.size|0,jb=ua.offset|0,Mb=ua.stride|0,Lb=ua.divisor|0);Cb=I.location;xb=O[Cb];if(1===Jc){xb.buffer||K.enableVertexAttribArray(Cb);hb=Wa||2;if(xb.type!==Hb||xb.size!==hb||xb.buffer!==cb||xb.normalized!==ab||xb.offset!==jb||xb.stride!==Mb)K.bindBuffer(34962,cb.buffer),
K.vertexAttribPointer(Cb,hb,Hb,ab,Mb,jb),xb.type=Hb,xb.size=hb,xb.buffer=cb,xb.normalized=ab,xb.offset=jb,xb.stride=Mb;xb.divisor!==Lb&&(k.vertexAttribDivisorANGLE(Cb,Lb),xb.divisor=Lb)}else if(xb.buffer&&(K.disableVertexAttribArray(Cb),xb.buffer=null),xb.x!==Nb||xb.y!==kb||xb.z!==Fb||xb.w!==sc)K.vertexAttrib4f(Cb,Nb,kb,Fb,sc),xb.x=Nb,xb.y=kb,xb.z=Fb,xb.w=sc;Fa.buffer=g.positionBuffer;$b=!1;Ob=null;qb=0;Ta=!1;zb=Ub=0;jc=1;ib=0;pb=5126;eb=La=sb=Ia=0;ba(Fa)?($b=!0,Ob=M.createStream(34962,Fa),pb=Ob.dtype):
(Ob=M.getBuffer(Fa))?pb=Ob.dtype:"constant"in Fa?(jc=2,"number"===typeof Fa.constant?(sb=Fa.constant,La=eb=Ia=0):(sb=0<Fa.constant.length?Fa.constant[0]:0,La=1<Fa.constant.length?Fa.constant[1]:0,eb=2<Fa.constant.length?Fa.constant[2]:0,Ia=3<Fa.constant.length?Fa.constant[3]:0)):(Ob=ba(Fa.buffer)?M.createStream(34962,Fa.buffer):M.getBuffer(Fa.buffer),pb="type"in Fa?ja[Fa.type]:Ob.dtype,Ta=!!Fa.normalized,zb=Fa.size|0,Ub=Fa.offset|0,ib=Fa.stride|0,qb=Fa.divisor|0);gb=E.location;Na=O[gb];if(1===jc){Na.buffer||
K.enableVertexAttribArray(gb);lb=zb||2;if(Na.type!==pb||Na.size!==lb||Na.buffer!==Ob||Na.normalized!==Ta||Na.offset!==Ub||Na.stride!==ib)K.bindBuffer(34962,Ob.buffer),K.vertexAttribPointer(gb,lb,pb,Ta,ib,Ub),Na.type=pb,Na.size=lb,Na.buffer=Ob,Na.normalized=Ta,Na.offset=Ub,Na.stride=ib;Na.divisor!==qb&&(k.vertexAttribDivisorANGLE(gb,qb),Na.divisor=qb)}else if(Na.buffer&&(K.disableVertexAttribArray(gb),Na.buffer=null),Na.x!==sb||Na.y!==La||Na.z!==eb||Na.w!==Ia)K.vertexAttrib4f(gb,sb,La,eb,Ia),Na.x=
sb,Na.y=La,Na.z=eb,Na.w=Ia;fb.buffer=g.positionBuffer;Xa=!1;ub=null;tb=0;Pa=!1;Va=Dc=0;Ib=1;Db=0;Ma=5126;Kb=Jb=Za=zd=0;ba(fb)?(Xa=!0,ub=M.createStream(34962,fb),Ma=ub.dtype):(ub=M.getBuffer(fb))?Ma=ub.dtype:"constant"in fb?(Ib=2,"number"===typeof fb.constant?(Za=fb.constant,Jb=Kb=zd=0):(Za=0<fb.constant.length?fb.constant[0]:0,Jb=1<fb.constant.length?fb.constant[1]:0,Kb=2<fb.constant.length?fb.constant[2]:0,zd=3<fb.constant.length?fb.constant[3]:0)):(ub=ba(fb.buffer)?M.createStream(34962,fb.buffer):
M.getBuffer(fb.buffer),Ma="type"in fb?ja[fb.type]:ub.dtype,Pa=!!fb.normalized,Va=fb.size|0,Dc=fb.offset|0,Db=fb.stride|0,tb=fb.divisor|0);mb=ea.location;Oa=O[mb];if(1===Ib){Oa.buffer||K.enableVertexAttribArray(mb);ac=Va||2;if(Oa.type!==Ma||Oa.size!==ac||Oa.buffer!==ub||Oa.normalized!==Pa||Oa.offset!==Dc||Oa.stride!==Db)K.bindBuffer(34962,ub.buffer),K.vertexAttribPointer(mb,ac,Ma,Pa,Db,Dc),Oa.type=Ma,Oa.size=ac,Oa.buffer=ub,Oa.normalized=Pa,Oa.offset=Dc,Oa.stride=Db;Oa.divisor!==tb&&(k.vertexAttribDivisorANGLE(mb,
tb),Oa.divisor=tb)}else if(Oa.buffer&&(K.disableVertexAttribArray(mb),Oa.buffer=null),Oa.x!==Za||Oa.y!==Jb||Oa.z!==Kb||Oa.w!==zd)K.vertexAttrib4f(mb,Za,Jb,Kb,zd),Oa.x=Za,Oa.y=Jb,Oa.z=Kb,Oa.w=zd;Y.buffer=g.positionBuffer;Ra=!1;vb=null;wb=0;Sa=!1;gc=nb=0;Bc=1;wc=0;bb=5126;nd=Ya=Mc=kc=0;ba(Y)?(Ra=!0,vb=M.createStream(34962,Y),bb=vb.dtype):(vb=M.getBuffer(Y))?bb=vb.dtype:"constant"in Y?(Bc=2,"number"===typeof Y.constant?(Mc=Y.constant,Ya=nd=kc=0):(Mc=0<Y.constant.length?Y.constant[0]:0,Ya=1<Y.constant.length?
Y.constant[1]:0,nd=2<Y.constant.length?Y.constant[2]:0,kc=3<Y.constant.length?Y.constant[3]:0)):(vb=ba(Y.buffer)?M.createStream(34962,Y.buffer):M.getBuffer(Y.buffer),bb="type"in Y?ja[Y.type]:vb.dtype,Sa=!!Y.normalized,gc=Y.size|0,nb=Y.offset|0,wc=Y.stride|0,wb=Y.divisor|0);Ab=G.location;$a=O[Ab];if(1===Bc){$a.buffer||K.enableVertexAttribArray(Ab);Wb=gc||2;if($a.type!==bb||$a.size!==Wb||$a.buffer!==vb||$a.normalized!==Sa||$a.offset!==nb||$a.stride!==wc)K.bindBuffer(34962,vb.buffer),K.vertexAttribPointer(Ab,
Wb,bb,Sa,wc,nb),$a.type=bb,$a.size=Wb,$a.buffer=vb,$a.normalized=Sa,$a.offset=nb,$a.stride=wc;$a.divisor!==wb&&(k.vertexAttribDivisorANGLE(Ab,wb),$a.divisor=wb)}else if($a.buffer&&(K.disableVertexAttribArray(Ab),$a.buffer=null),$a.x!==Mc||$a.y!==Ya||$a.z!==nd||$a.w!==kc)K.vertexAttrib4f(Ab,Mc,Ya,nd,kc),$a.x=Mc,$a.y=Ya,$a.z=nd,$a.w=kc;X.buffer=g.colorBuffer;uc=!1;Xb=null;Pb=0;Nc=!1;Pd=Rb=0;Fc=1;vd=0;Qc=5126;xc=oc=sd=Yc=0;ba(X)?(uc=!0,Xb=M.createStream(34962,X),Qc=Xb.dtype):(Xb=M.getBuffer(X))?Qc=Xb.dtype:
"constant"in X?(Fc=2,"number"===typeof X.constant?(sd=X.constant,oc=xc=Yc=0):(sd=0<X.constant.length?X.constant[0]:0,oc=1<X.constant.length?X.constant[1]:0,xc=2<X.constant.length?X.constant[2]:0,Yc=3<X.constant.length?X.constant[3]:0)):(Xb=ba(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),Qc="type"in X?ja[X.type]:Xb.dtype,Nc=!!X.normalized,Pd=X.size|0,Rb=X.offset|0,vd=X.stride|0,Pb=X.divisor|0);hc=r.location;db=O[hc];if(1===Fc){db.buffer||K.enableVertexAttribArray(hc);tc=Pd||4;if(db.type!==
Qc||db.size!==tc||db.buffer!==Xb||db.normalized!==Nc||db.offset!==Rb||db.stride!==vd)K.bindBuffer(34962,Xb.buffer),K.vertexAttribPointer(hc,tc,Qc,Nc,vd,Rb),db.type=Qc,db.size=tc,db.buffer=Xb,db.normalized=Nc,db.offset=Rb,db.stride=vd;db.divisor!==Pb&&(k.vertexAttribDivisorANGLE(hc,Pb),db.divisor=Pb)}else if(db.buffer&&(K.disableVertexAttribArray(hc),db.buffer=null),db.x!==sd||db.y!==oc||db.z!==xc||db.w!==Yc)K.vertexAttrib4f(hc,sd,oc,xc,Yc),db.x=sd,db.y=oc,db.z=xc,db.w=Yc;Ka.buffer=g.colorBuffer;Tb=
!1;Yb=null;ec=0;ic=!1;Cc=zc=0;dd=1;Tc=0;Uc=5126;ed=od=Zc=Vc=0;ba(Ka)?(Tb=!0,Yb=M.createStream(34962,Ka),Uc=Yb.dtype):(Yb=M.getBuffer(Ka))?Uc=Yb.dtype:"constant"in Ka?(dd=2,"number"===typeof Ka.constant?(Zc=Ka.constant,od=ed=Vc=0):(Zc=0<Ka.constant.length?Ka.constant[0]:0,od=1<Ka.constant.length?Ka.constant[1]:0,ed=2<Ka.constant.length?Ka.constant[2]:0,Vc=3<Ka.constant.length?Ka.constant[3]:0)):(Yb=ba(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),Uc="type"in Ka?ja[Ka.type]:Yb.dtype,
ic=!!Ka.normalized,Cc=Ka.size|0,zc=Ka.offset|0,Tc=Ka.stride|0,ec=Ka.divisor|0);$c=aa.location;lc=O[$c];if(1===dd){lc.buffer||K.enableVertexAttribArray($c);dc=Cc||4;if(lc.type!==Uc||lc.size!==dc||lc.buffer!==Yb||lc.normalized!==ic||lc.offset!==zc||lc.stride!==Tc)K.bindBuffer(34962,Yb.buffer),K.vertexAttribPointer($c,dc,Uc,ic,Tc,zc),lc.type=Uc,lc.size=dc,lc.buffer=Yb,lc.normalized=ic,lc.offset=zc,lc.stride=Tc;lc.divisor!==ec&&(k.vertexAttribDivisorANGLE($c,ec),lc.divisor=ec)}else if(lc.buffer&&(K.disableVertexAttribArray($c),
lc.buffer=null),lc.x!==Zc||lc.y!==od||lc.z!==ed||lc.w!==Vc)K.vertexAttrib4f($c,Zc,od,ed,Vc),lc.x=Zc,lc.y=od,lc.z=ed,lc.w=Vc;ad=g.scale;Xc=ad[0];Ac=ad[1];f&&fd===Xc&&jd===Ac||(fd=Xc,jd=Ac,K.uniform2f(ta.location,Xc,Ac));Cd=g.translate;ye=Cd[0];kd=Cd[1];f&&oe===ye&&Fe===kd||(oe=ye,Fe=kd,K.uniform2f(V.location,ye,kd));Fd=g.thickness;f&&he===Fd||(he=Fd,K.uniform1f(S.location,Fd));ee=g.depth;f&&Ud===ee||(Ud=ee,K.uniform1f(H.location,ee));Nd=x.call(this,N,g,f);Kd=Nd[0];Wc=Nd[1];ud=Nd[2];xd=Nd[3];f&&qd===
Kd&&wd===Wc&&ld===ud&&Gd===xd||(qd=Kd,wd=Wc,ld=ud,Gd=xd,K.uniform4f(R.location,Kd,Wc,ud,xd));Hd=g.miterLimit;f&&je===Hd||(je=Hd,K.uniform1f(ga.location,Hd));me=v.call(this,N,g,f);f&&ue===me||(ue=me,K.uniform1f(t.location,me));ne=g.dashLength;f&&ke===ne||(ke=ne,K.uniform1f(A.location,ne));ie=g.opacity;f&&ve===ie||(ve=ie,K.uniform1f(L.location,ie));(fe=g.dashTexture)&&"framebuffer"===fe._reglType&&(fe=fe.color[0]);pe=fe._texture;K.uniform1i(ca.location,pe.bind());Rc=g.count;0<Rc?Lc?k.drawElementsInstancedANGLE(5,
4,Lc.type,0<<(Lc.type-5121>>1),Rc):k.drawArraysInstancedANGLE(5,0,4,Rc):0>Rc&&(Lc?K.drawElements(5,4,Lc.type,0<<(Lc.type-5121>>1)):K.drawArrays(5,0,4));N.viewportWidth=fc;N.viewportHeight=Ic;Qb&&M.destroyStream(cb);$b&&M.destroyStream(Ob);Xa&&M.destroyStream(ub);Ra&&M.destroyStream(vb);uc&&M.destroyStream(Xb);Tb&&M.destroyStream(Yb);pe.unbind()}P.dirty=!0;Ba.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(c){var e,a,l,k,g,n,p,w,y,C,B,x,v,z,Ea,za,ha,wa,oa,Da,xa,la,le,be,Md,Ed,pd,bd,
td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd;e=J.next;e!==J.cur&&(e?K.bindFramebuffer(36160,e.framebuffer):K.bindFramebuffer(36160,null),J.cur=e);if(P.dirty){var Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac;Fc=
W.dither;Fc!==P.dither&&(Fc?K.enable(3024):K.disable(3024),P.dither=Fc);vd=W.depth_func;vd!==P.depth_func&&(K.depthFunc(vd),P.depth_func=vd);Qc=Zb[0];Yc=Zb[1];if(Qc!==Ua[0]||Yc!==Ua[1])K.depthRange(Qc,Yc),Ua[0]=Qc,Ua[1]=Yc;sd=W.depth_mask;sd!==P.depth_mask&&(K.depthMask(sd),P.depth_mask=sd);oc=Qa[0];xc=Qa[1];hc=Qa[2];db=Qa[3];if(oc!==Ja[0]||xc!==Ja[1]||hc!==Ja[2]||db!==Ja[3])K.colorMask(oc,xc,hc,db),Ja[0]=oc,Ja[1]=xc,Ja[2]=hc,Ja[3]=db;tc=W.frontFace;tc!==P.frontFace&&(K.frontFace(tc),P.frontFace=
tc);Tb=W.lineWidth;Tb!==P.lineWidth&&(K.lineWidth(Tb),P.lineWidth=Tb);Yb=W.polygonOffset_enable;Yb!==P.polygonOffset_enable&&(Yb?K.enable(32823):K.disable(32823),P.polygonOffset_enable=Yb);ec=ia[0];ic=ia[1];if(ec!==fa[0]||ic!==fa[1])K.polygonOffset(ec,ic),fa[0]=ec,fa[1]=ic;zc=W.sample_alpha;zc!==P.sample_alpha&&(zc?K.enable(32926):K.disable(32926),P.sample_alpha=zc);Cc=W.sample_enable;Cc!==P.sample_enable&&(Cc?K.enable(32928):K.disable(32928),P.sample_enable=Cc);dd=sa[0];Tc=sa[1];if(dd!==va[0]||Tc!==
va[1])K.sampleCoverage(dd,Tc),va[0]=dd,va[1]=Tc;Uc=W.stencil_mask;Uc!==P.stencil_mask&&(K.stencilMask(Uc),P.stencil_mask=Uc);Vc=Gb[0];Zc=Gb[1];od=Gb[2];if(Vc!==Z[0]||Zc!==Z[1]||od!==Z[2])K.stencilFunc(Vc,Zc,od),Z[0]=Vc,Z[1]=Zc,Z[2]=od;ed=Ga[0];$c=Ga[1];lc=Ga[2];dc=Ga[3];if(ed!==qa[0]||$c!==qa[1]||lc!==qa[2]||dc!==qa[3])K.stencilOpSeparate(ed,$c,lc,dc),qa[0]=ed,qa[1]=$c,qa[2]=lc,qa[3]=dc;ad=U[0];Xc=U[1];fd=U[2];Ac=U[3];if(ad!==ya[0]||Xc!==ya[1]||fd!==ya[2]||Ac!==ya[3])K.stencilOpSeparate(ad,Xc,fd,
Ac),ya[0]=ad,ya[1]=Xc,ya[2]=fd,ya[3]=Ac}a=c.viewport;l=a.x|0;k=a.y|0;g="width"in a?a.width|0:N.framebufferWidth-l;n="height"in a?a.height|0:N.framebufferHeight-k;p=N.viewportWidth;N.viewportWidth=g;w=N.viewportHeight;N.viewportHeight=n;K.viewport(l,k,g,n);Ca[0]=l;Ca[1]=k;Ca[2]=g;Ca[3]=n;K.blendColor(0,0,0,0);da[0]=0;da[1]=0;da[2]=0;da[3]=0;K.enable(3042);P.blend_enable=!0;K.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;K.blendFuncSeparate(770,771,773,1);Aa[0]=770;Aa[1]=771;Aa[2]=773;
Aa[3]=1;K.enable(2884);P.cull_enable=!0;K.cullFace(1029);P.cull_face=1029;(y=h.call(this,N,c,0))?K.enable(2929):K.disable(2929);P.depth_enable=y;C=c.viewport;B=C.x|0;x=C.y|0;v="width"in C?C.width|0:N.framebufferWidth-B;z="height"in C?C.height|0:N.framebufferHeight-x;K.scissor(B,x,v,z);rb[0]=B;rb[1]=x;rb[2]=v;rb[3]=z;K.enable(3089);P.scissor_enable=!0;K.disable(2960);P.stencil_enable=!1;if(Ea=P.profile)za=performance.now(),d.count++;K.useProgram(u.program);ha=pa.angle_instanced_arrays;Ba.setVAO(null);
ua.buffer=c.positionBuffer;wa=!1;oa=null;Da=0;xa=!1;le=la=0;be=1;Md=0;Ed=5126;Oc=td=bd=pd=0;ba(ua)?(wa=!0,oa=M.createStream(34962,ua),Ed=oa.dtype):(oa=M.getBuffer(ua))?Ed=oa.dtype:"constant"in ua?(be=2,"number"===typeof ua.constant?(bd=ua.constant,td=Oc=pd=0):(bd=0<ua.constant.length?ua.constant[0]:0,td=1<ua.constant.length?ua.constant[1]:0,Oc=2<ua.constant.length?ua.constant[2]:0,pd=3<ua.constant.length?ua.constant[3]:0)):(oa=ba(ua.buffer)?M.createStream(34962,ua.buffer):M.getBuffer(ua.buffer),Ed=
"type"in ua?ja[ua.type]:oa.dtype,xa=!!ua.normalized,le=ua.size|0,la=ua.offset|0,Md=ua.stride|0,Da=ua.divisor|0);rd=I.location;Gc=O[rd];if(1===be){Gc.buffer||K.enableVertexAttribArray(rd);gd=le||2;if(Gc.type!==Ed||Gc.size!==gd||Gc.buffer!==oa||Gc.normalized!==xa||Gc.offset!==la||Gc.stride!==Md)K.bindBuffer(34962,oa.buffer),K.vertexAttribPointer(rd,gd,Ed,xa,Md,la),Gc.type=Ed,Gc.size=gd,Gc.buffer=oa,Gc.normalized=xa,Gc.offset=la,Gc.stride=Md;Gc.divisor!==Da&&(ha.vertexAttribDivisorANGLE(rd,Da),Gc.divisor=
Da)}else if(Gc.buffer&&(K.disableVertexAttribArray(rd),Gc.buffer=null),Gc.x!==bd||Gc.y!==td||Gc.z!==Oc||Gc.w!==pd)K.vertexAttrib4f(rd,bd,td,Oc,pd),Gc.x=bd,Gc.y=td,Gc.z=Oc,Gc.w=pd;Fa.buffer=c.positionBuffer;Sc=!1;md=null;Vb=0;Eb=!1;yb=vc=0;yc=1;Bb=0;Lc=5126;cd=hd=Hc=mc=0;ba(Fa)?(Sc=!0,md=M.createStream(34962,Fa),Lc=md.dtype):(md=M.getBuffer(Fa))?Lc=md.dtype:"constant"in Fa?(yc=2,"number"===typeof Fa.constant?(Hc=Fa.constant,hd=cd=mc=0):(Hc=0<Fa.constant.length?Fa.constant[0]:0,hd=1<Fa.constant.length?
Fa.constant[1]:0,cd=2<Fa.constant.length?Fa.constant[2]:0,mc=3<Fa.constant.length?Fa.constant[3]:0)):(md=ba(Fa.buffer)?M.createStream(34962,Fa.buffer):M.getBuffer(Fa.buffer),Lc="type"in Fa?ja[Fa.type]:md.dtype,Eb=!!Fa.normalized,yb=Fa.size|0,vc=Fa.offset|0,Bb=Fa.stride|0,Vb=Fa.divisor|0);Ec=E.location;fc=O[Ec];if(1===yc){fc.buffer||K.enableVertexAttribArray(Ec);Ic=yb||2;if(fc.type!==Lc||fc.size!==Ic||fc.buffer!==md||fc.normalized!==Eb||fc.offset!==vc||fc.stride!==Bb)K.bindBuffer(34962,md.buffer),
K.vertexAttribPointer(Ec,Ic,Lc,Eb,Bb,vc),fc.type=Lc,fc.size=Ic,fc.buffer=md,fc.normalized=Eb,fc.offset=vc,fc.stride=Bb;fc.divisor!==Vb&&(ha.vertexAttribDivisorANGLE(Ec,Vb),fc.divisor=Vb)}else if(fc.buffer&&(K.disableVertexAttribArray(Ec),fc.buffer=null),fc.x!==Hc||fc.y!==hd||fc.z!==cd||fc.w!==mc)K.vertexAttrib4f(Ec,Hc,hd,cd,mc),fc.x=Hc,fc.y=hd,fc.z=cd,fc.w=mc;fb.buffer=c.positionBuffer;pc=!1;rc=null;nc=0;qc=!1;Pc=ob=0;Qb=1;cb=0;Lb=5126;Jc=Wa=jb=ab=0;ba(fb)?(pc=!0,rc=M.createStream(34962,fb),Lb=rc.dtype):
(rc=M.getBuffer(fb))?Lb=rc.dtype:"constant"in fb?(Qb=2,"number"===typeof fb.constant?(jb=fb.constant,Wa=Jc=ab=0):(jb=0<fb.constant.length?fb.constant[0]:0,Wa=1<fb.constant.length?fb.constant[1]:0,Jc=2<fb.constant.length?fb.constant[2]:0,ab=3<fb.constant.length?fb.constant[3]:0)):(rc=ba(fb.buffer)?M.createStream(34962,fb.buffer):M.getBuffer(fb.buffer),Lb="type"in fb?ja[fb.type]:rc.dtype,qc=!!fb.normalized,Pc=fb.size|0,ob=fb.offset|0,cb=fb.stride|0,nc=fb.divisor|0);Mb=ea.location;Hb=O[Mb];if(1===Qb){Hb.buffer||
K.enableVertexAttribArray(Mb);sc=Pc||2;if(Hb.type!==Lb||Hb.size!==sc||Hb.buffer!==rc||Hb.normalized!==qc||Hb.offset!==ob||Hb.stride!==cb)K.bindBuffer(34962,rc.buffer),K.vertexAttribPointer(Mb,sc,Lb,qc,cb,ob),Hb.type=Lb,Hb.size=sc,Hb.buffer=rc,Hb.normalized=qc,Hb.offset=ob,Hb.stride=cb;Hb.divisor!==nc&&(ha.vertexAttribDivisorANGLE(Mb,nc),Hb.divisor=nc)}else if(Hb.buffer&&(K.disableVertexAttribArray(Mb),Hb.buffer=null),Hb.x!==jb||Hb.y!==Wa||Hb.z!==Jc||Hb.w!==ab)K.vertexAttrib4f(Mb,jb,Wa,Jc,ab),Hb.x=
jb,Hb.y=Wa,Hb.z=Jc,Hb.w=ab;Y.buffer=c.positionBuffer;Nb=!1;kb=null;Fb=0;Cb=!1;hb=xb=0;$b=1;Ob=0;qb=5126;jc=zb=Ub=Ta=0;ba(Y)?(Nb=!0,kb=M.createStream(34962,Y),qb=kb.dtype):(kb=M.getBuffer(Y))?qb=kb.dtype:"constant"in Y?($b=2,"number"===typeof Y.constant?(Ub=Y.constant,zb=jc=Ta=0):(Ub=0<Y.constant.length?Y.constant[0]:0,zb=1<Y.constant.length?Y.constant[1]:0,jc=2<Y.constant.length?Y.constant[2]:0,Ta=3<Y.constant.length?Y.constant[3]:0)):(kb=ba(Y.buffer)?M.createStream(34962,Y.buffer):M.getBuffer(Y.buffer),
qb="type"in Y?ja[Y.type]:kb.dtype,Cb=!!Y.normalized,hb=Y.size|0,xb=Y.offset|0,Ob=Y.stride|0,Fb=Y.divisor|0);ib=G.location;pb=O[ib];if(1===$b){pb.buffer||K.enableVertexAttribArray(ib);Ia=hb||2;if(pb.type!==qb||pb.size!==Ia||pb.buffer!==kb||pb.normalized!==Cb||pb.offset!==xb||pb.stride!==Ob)K.bindBuffer(34962,kb.buffer),K.vertexAttribPointer(ib,Ia,qb,Cb,Ob,xb),pb.type=qb,pb.size=Ia,pb.buffer=kb,pb.normalized=Cb,pb.offset=xb,pb.stride=Ob;pb.divisor!==Fb&&(ha.vertexAttribDivisorANGLE(ib,Fb),pb.divisor=
Fb)}else if(pb.buffer&&(K.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==jc||pb.w!==Ta)K.vertexAttrib4f(ib,Ub,zb,jc,Ta),pb.x=Ub,pb.y=zb,pb.z=jc,pb.w=Ta;X.buffer=c.colorBuffer;sb=!1;La=null;eb=0;gb=!1;lb=Na=0;Xa=1;ub=0;tb=5126;Ib=Va=Dc=Pa=0;ba(X)?(sb=!0,La=M.createStream(34962,X),tb=La.dtype):(La=M.getBuffer(X))?tb=La.dtype:"constant"in X?(Xa=2,"number"===typeof X.constant?(Dc=X.constant,Va=Ib=Pa=0):(Dc=0<X.constant.length?X.constant[0]:0,Va=1<X.constant.length?X.constant[1]:
0,Ib=2<X.constant.length?X.constant[2]:0,Pa=3<X.constant.length?X.constant[3]:0)):(La=ba(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),tb="type"in X?ja[X.type]:La.dtype,gb=!!X.normalized,lb=X.size|0,Na=X.offset|0,ub=X.stride|0,eb=X.divisor|0);Db=r.location;Ma=O[Db];if(1===Xa){Ma.buffer||K.enableVertexAttribArray(Db);zd=lb||4;if(Ma.type!==tb||Ma.size!==zd||Ma.buffer!==La||Ma.normalized!==gb||Ma.offset!==Na||Ma.stride!==ub)K.bindBuffer(34962,La.buffer),K.vertexAttribPointer(Db,zd,tb,
gb,ub,Na),Ma.type=tb,Ma.size=zd,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=ub;Ma.divisor!==eb&&(ha.vertexAttribDivisorANGLE(Db,eb),Ma.divisor=eb)}else if(Ma.buffer&&(K.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Dc||Ma.y!==Va||Ma.z!==Ib||Ma.w!==Pa)K.vertexAttrib4f(Db,Dc,Va,Ib,Pa),Ma.x=Dc,Ma.y=Va,Ma.z=Ib,Ma.w=Pa;Ka.buffer=c.colorBuffer;Za=!1;Jb=null;Kb=0;mb=!1;ac=Oa=0;Ra=1;vb=0;wb=5126;Bc=gc=nb=Sa=0;ba(Ka)?(Za=!0,Jb=M.createStream(34962,Ka),wb=Jb.dtype):(Jb=M.getBuffer(Ka))?wb=Jb.dtype:
"constant"in Ka?(Ra=2,"number"===typeof Ka.constant?(nb=Ka.constant,gc=Bc=Sa=0):(nb=0<Ka.constant.length?Ka.constant[0]:0,gc=1<Ka.constant.length?Ka.constant[1]:0,Bc=2<Ka.constant.length?Ka.constant[2]:0,Sa=3<Ka.constant.length?Ka.constant[3]:0)):(Jb=ba(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),wb="type"in Ka?ja[Ka.type]:Jb.dtype,mb=!!Ka.normalized,ac=Ka.size|0,Oa=Ka.offset|0,vb=Ka.stride|0,Kb=Ka.divisor|0);wc=aa.location;bb=O[wc];if(1===Ra){bb.buffer||K.enableVertexAttribArray(wc);
kc=ac||4;if(bb.type!==wb||bb.size!==kc||bb.buffer!==Jb||bb.normalized!==mb||bb.offset!==Oa||bb.stride!==vb)K.bindBuffer(34962,Jb.buffer),K.vertexAttribPointer(wc,kc,wb,mb,vb,Oa),bb.type=wb,bb.size=kc,bb.buffer=Jb,bb.normalized=mb,bb.offset=Oa,bb.stride=vb;bb.divisor!==Kb&&(ha.vertexAttribDivisorANGLE(wc,Kb),bb.divisor=Kb)}else if(bb.buffer&&(K.disableVertexAttribArray(wc),bb.buffer=null),bb.x!==nb||bb.y!==gc||bb.z!==Bc||bb.w!==Sa)K.vertexAttrib4f(wc,nb,gc,Bc,Sa),bb.x=nb,bb.y=gc,bb.z=Bc,bb.w=Sa;Mc=
F.location;Ya=O[Mc];Ya.buffer||K.enableVertexAttribArray(Mc);if(5126!==Ya.type||1!==Ya.size||Ya.buffer!==q||!1!==Ya.normalized||0!==Ya.offset||8!==Ya.stride)K.bindBuffer(34962,q.buffer),K.vertexAttribPointer(Mc,1,5126,!1,8,0),Ya.type=5126,Ya.size=1,Ya.buffer=q,Ya.normalized=!1,Ya.offset=0,Ya.stride=8;0!==Ya.divisor&&(ha.vertexAttribDivisorANGLE(Mc,0),Ya.divisor=0);nd=D.location;Ab=O[nd];Ab.buffer||K.enableVertexAttribArray(nd);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==m||!1!==Ab.normalized||4!==
Ab.offset||8!==Ab.stride)K.bindBuffer(34962,m.buffer),K.vertexAttribPointer(nd,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=m,Ab.normalized=!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(ha.vertexAttribDivisorANGLE(nd,0),Ab.divisor=0);$a=c.scale;K.uniform2f(ta.location,$a[0],$a[1]);Wb=c.translate;K.uniform2f(V.location,Wb[0],Wb[1]);K.uniform1f(S.location,c.thickness);K.uniform1f(H.location,c.depth);uc=b.call(this,N,c,0);K.uniform4f(R.location,uc[0],uc[1],uc[2],uc[3]);K.uniform1f(ga.location,c.miterLimit);
Xb=f.call(this,N,c,0);K.uniform1f(t.location,Xb);K.uniform1f(A.location,c.dashLength);K.uniform1f(L.location,c.opacity);(Pb=c.dashTexture)&&"framebuffer"===Pb._reglType&&(Pb=Pb.color[0]);Nc=Pb._texture;K.uniform1i(ca.location,Nc.bind());(Rb=Q.elements)?K.bindBuffer(34963,Rb.buffer.buffer):Ba.currentVAO&&(Rb=ra.getElements(Ba.currentVAO.elements))&&K.bindBuffer(34963,Rb.buffer.buffer);Pd=c.count;0<Pd?Rb?ha.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),Pd):ha.drawArraysInstancedANGLE(5,
0,4,Pd):0>Pd&&(Rb?K.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):K.drawArrays(5,0,4));P.dirty=!0;Ba.setVAO(null);N.viewportWidth=p;N.viewportHeight=w;Ea&&(d.cpuTime+=performance.now()-za);wa&&M.destroyStream(oa);Sc&&M.destroyStream(md);pc&&M.destroyStream(rc);Nb&&M.destroyStream(kb);sb&&M.destroyStream(La);Za&&M.destroyStream(Jb);Nc.unbind()},scope:function(b,a,f){var t,u,h,C,x,v,J,ia,fa,U,T,A,Ja,sa,Ea,ya,I,Qa,E,D,Ga,K,O,Zb,H,r,qa,da,Z,R,F,na,va,L,Ca,ra,aa,S,ka,Ua,Aa,V,ca,ga,ea,G,Gb,pa,ma,Ba,rb,
ta,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,
Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af;t=b.viewport;u=t.x|0;h=t.y|0;C="width"in t?t.width|0:N.framebufferWidth-u;x="height"in t?t.height|0:N.framebufferHeight-h;v=N.viewportWidth;N.viewportWidth=C;J=N.viewportHeight;N.viewportHeight=x;ia=za[0];za[0]=u;fa=za[1];za[1]=h;U=za[2];za[2]=C;T=za[3];za[3]=x;A=wa[0];wa[0]=0;Ja=wa[1];wa[1]=0;sa=wa[2];wa[2]=0;Ea=wa[3];wa[3]=0;ya=W.blend_enable;W.blend_enable=!0;I=xa[0];xa[0]=32774;Qa=xa[1];xa[1]=32774;E=oa[0];
oa[0]=770;D=oa[1];oa[1]=771;Ga=oa[2];oa[2]=773;K=oa[3];oa[3]=1;O=W.cull_enable;W.cull_enable=!0;Zb=W.cull_face;W.cull_face=1029;H=c.call(this,N,b,f);r=W.depth_enable;W.depth_enable=H;qa=b.viewport;da=qa.x|0;Z=qa.y|0;R="width"in qa?qa.width|0:N.framebufferWidth-da;F="height"in qa?qa.height|0:N.framebufferHeight-Z;na=Da[0];Da[0]=da;va=Da[1];Da[1]=Z;L=Da[2];Da[2]=R;Ca=Da[3];Da[3]=F;ra=W.scissor_enable;W.scissor_enable=!0;aa=W.stencil_enable;W.stencil_enable=!1;if(S=P.profile)ka=performance.now(),d.count++;
Ua=Q.offset;Q.offset=0;Aa=Q.count;Q.count=4;V=b.count;ca=Q.instances;Q.instances=V;ga=Q.primitive;Q.primitive=5;ea=b.dashLength;G=ha[23];ha[23]=ea;Gb=b.dashTexture;pa=ha[24];ha[24]=Gb;ma=b.depth;Ba=ha[22];ha[22]=ma;rb=b.id;ta=ha[31];ha[31]=rb;Pc=b.miterLimit;Qb=ha[32];ha[32]=Pc;cb=k.call(this,N,b,f);Lb=ha[33];ha[33]=cb;ab=b.opacity;jb=ha[10];ha[10]=ab;Wa=N.pixelRatio;Jc=ha[34];ha[34]=Wa;Mb=b.scale;Hb=ha[6];ha[6]=Mb;sc=b.scaleFract;Nb=ha[7];ha[7]=sc;kb=b.thickness;Fb=ha[21];ha[21]=kb;Cb=b.translate;
xb=ha[8];ha[8]=Cb;hb=b.translateFract;$b=ha[9];ha[9]=hb;Ob=z.call(this,N,b,f);qb=ha[3];ha[3]=Ob;X.buffer=b.colorBuffer;Ta=!1;Ub=null;zb=0;jc=!1;pb=ib=0;Ia=1;sb=0;La=5126;lb=Na=gb=eb=0;ba(X)?(Ta=!0,Ub=M.createStream(34962,X),La=Ub.dtype):(Ub=M.getBuffer(X))?La=Ub.dtype:"constant"in X?(Ia=2,"number"===typeof X.constant?(gb=X.constant,Na=lb=eb=0):(gb=0<X.constant.length?X.constant[0]:0,Na=1<X.constant.length?X.constant[1]:0,lb=2<X.constant.length?X.constant[2]:0,eb=3<X.constant.length?X.constant[3]:
0)):(Ub=ba(X.buffer)?M.createStream(34962,X.buffer):M.getBuffer(X.buffer),La="type"in X?ja[X.type]:Ub.dtype,jc=!!X.normalized,pb=X.size|0,ib=X.offset|0,sb=X.stride|0,zb=X.divisor|0);Xa=B.buffer;B.buffer=Ub;ub=B.divisor;B.divisor=zb;tb=B.normalized;B.normalized=jc;Pa=B.offset;B.offset=ib;Dc=B.size;B.size=pb;Va=B.state;B.state=Ia;Ib=B.stride;B.stride=sb;Db=B.type;B.type=La;Ma=B.w;B.w=eb;zd=B.x;B.x=gb;Za=B.y;B.y=Na;Jb=B.z;B.z=lb;ua.buffer=b.positionBuffer;Kb=!1;mb=null;Oa=0;ac=!1;vb=Ra=0;wb=1;Sa=0;nb=
5126;bb=wc=Bc=gc=0;ba(ua)?(Kb=!0,mb=M.createStream(34962,ua),nb=mb.dtype):(mb=M.getBuffer(ua))?nb=mb.dtype:"constant"in ua?(wb=2,"number"===typeof ua.constant?(Bc=ua.constant,wc=bb=gc=0):(Bc=0<ua.constant.length?ua.constant[0]:0,wc=1<ua.constant.length?ua.constant[1]:0,bb=2<ua.constant.length?ua.constant[2]:0,gc=3<ua.constant.length?ua.constant[3]:0)):(mb=ba(ua.buffer)?M.createStream(34962,ua.buffer):M.getBuffer(ua.buffer),nb="type"in ua?ja[ua.type]:mb.dtype,ac=!!ua.normalized,vb=ua.size|0,Ra=ua.offset|
0,Sa=ua.stride|0,Oa=ua.divisor|0);kc=e.buffer;e.buffer=mb;Mc=e.divisor;e.divisor=Oa;Ya=e.normalized;e.normalized=ac;nd=e.offset;e.offset=Ra;Ab=e.size;e.size=vb;$a=e.state;e.state=wb;Wb=e.stride;e.stride=Sa;uc=e.type;e.type=nb;Xb=e.w;e.w=gc;Pb=e.x;e.x=Bc;Nc=e.y;e.y=wc;Rb=e.z;e.z=bb;Ka.buffer=b.colorBuffer;Pd=!1;Fc=null;vd=0;Qc=!1;sd=Yc=0;oc=1;xc=0;hc=5126;Yb=Tb=tc=db=0;ba(Ka)?(Pd=!0,Fc=M.createStream(34962,Ka),hc=Fc.dtype):(Fc=M.getBuffer(Ka))?hc=Fc.dtype:"constant"in Ka?(oc=2,"number"===typeof Ka.constant?
(tc=Ka.constant,Tb=Yb=db=0):(tc=0<Ka.constant.length?Ka.constant[0]:0,Tb=1<Ka.constant.length?Ka.constant[1]:0,Yb=2<Ka.constant.length?Ka.constant[2]:0,db=3<Ka.constant.length?Ka.constant[3]:0)):(Fc=ba(Ka.buffer)?M.createStream(34962,Ka.buffer):M.getBuffer(Ka.buffer),hc="type"in Ka?ja[Ka.type]:Fc.dtype,Qc=!!Ka.normalized,sd=Ka.size|0,Yc=Ka.offset|0,xc=Ka.stride|0,vd=Ka.divisor|0);ec=l.buffer;l.buffer=Fc;ic=l.divisor;l.divisor=vd;zc=l.normalized;l.normalized=Qc;Cc=l.offset;l.offset=Yc;dd=l.size;l.size=
sd;Tc=l.state;l.state=oc;Uc=l.stride;l.stride=xc;Vc=l.type;l.type=hc;Zc=l.w;l.w=db;od=l.x;l.x=tc;ed=l.y;l.y=Tb;$c=l.z;l.z=Yb;Fa.buffer=b.positionBuffer;lc=!1;dc=null;ad=0;Xc=!1;Ac=fd=0;jd=1;Cd=0;ye=5126;Fd=Fe=kd=oe=0;ba(Fa)?(lc=!0,dc=M.createStream(34962,Fa),ye=dc.dtype):(dc=M.getBuffer(Fa))?ye=dc.dtype:"constant"in Fa?(jd=2,"number"===typeof Fa.constant?(kd=Fa.constant,Fe=Fd=oe=0):(kd=0<Fa.constant.length?Fa.constant[0]:0,Fe=1<Fa.constant.length?Fa.constant[1]:0,Fd=2<Fa.constant.length?Fa.constant[2]:
0,oe=3<Fa.constant.length?Fa.constant[3]:0)):(dc=ba(Fa.buffer)?M.createStream(34962,Fa.buffer):M.getBuffer(Fa.buffer),ye="type"in Fa?ja[Fa.type]:dc.dtype,Xc=!!Fa.normalized,Ac=Fa.size|0,fd=Fa.offset|0,Cd=Fa.stride|0,ad=Fa.divisor|0);he=g.buffer;g.buffer=dc;ee=g.divisor;g.divisor=ad;Ud=g.normalized;g.normalized=Xc;Nd=g.offset;g.offset=fd;Kd=g.size;g.size=Ac;qd=g.state;g.state=jd;Wc=g.stride;g.stride=Cd;wd=g.type;g.type=ye;ud=g.w;g.w=oe;ld=g.x;g.x=kd;xd=g.y;g.y=Fe;Gd=g.z;g.z=Fd;Hd=n.buffer;n.buffer=
q;je=n.divisor;n.divisor=0;me=n.normalized;n.normalized=!1;ue=n.offset;n.offset=0;ne=n.size;n.size=0;ke=n.state;n.state=1;ie=n.stride;n.stride=8;ve=n.type;n.type=5126;fe=n.w;n.w=0;pe=n.x;n.x=0;Rc=n.y;n.y=0;id=n.z;n.z=0;we=p.buffer;p.buffer=m;se=p.divisor;p.divisor=0;Rd=p.normalized;p.normalized=!1;Vd=p.offset;p.offset=4;Wd=p.size;p.size=0;Xd=p.state;p.state=1;qe=p.stride;p.stride=8;Ce=p.type;p.type=5126;Ge=p.w;p.w=0;te=p.x;p.x=0;Ve=p.y;p.y=0;We=p.z;p.z=0;fb.buffer=b.positionBuffer;Re=!1;xe=null;Je=
0;Le=!1;Ne=Me=0;Ke=1;Sd=0;ae=5126;Ld=Oe=ge=de=0;ba(fb)?(Re=!0,xe=M.createStream(34962,fb),ae=xe.dtype):(xe=M.getBuffer(fb))?ae=xe.dtype:"constant"in fb?(Ke=2,"number"===typeof fb.constant?(ge=fb.constant,Oe=Ld=de=0):(ge=0<fb.constant.length?fb.constant[0]:0,Oe=1<fb.constant.length?fb.constant[1]:0,Ld=2<fb.constant.length?fb.constant[2]:0,de=3<fb.constant.length?fb.constant[3]:0)):(xe=ba(fb.buffer)?M.createStream(34962,fb.buffer):M.getBuffer(fb.buffer),ae="type"in fb?ja[fb.type]:xe.dtype,Le=!!fb.normalized,
Ne=fb.size|0,Me=fb.offset|0,Sd=fb.stride|0,Je=fb.divisor|0);Yd=w.buffer;w.buffer=xe;He=w.divisor;w.divisor=Je;Pe=w.normalized;w.normalized=Le;df=w.offset;w.offset=Me;cf=w.size;w.size=Ne;Xe=w.state;w.state=Ke;Se=w.stride;w.stride=Sd;bf=w.type;w.type=ae;af=w.w;w.w=de;Ye=w.x;w.x=ge;Ze=w.y;w.y=Oe;Zd=w.z;w.z=Ld;Y.buffer=b.positionBuffer;ce=!1;$e=null;kf=0;of=!1;lf=gf=0;mf=1;nf=0;sf=5126;Df=Cf=tf=pf=0;ba(Y)?(ce=!0,$e=M.createStream(34962,Y),sf=$e.dtype):($e=M.getBuffer(Y))?sf=$e.dtype:"constant"in Y?(mf=
2,"number"===typeof Y.constant?(tf=Y.constant,Cf=Df=pf=0):(tf=0<Y.constant.length?Y.constant[0]:0,Cf=1<Y.constant.length?Y.constant[1]:0,Df=2<Y.constant.length?Y.constant[2]:0,pf=3<Y.constant.length?Y.constant[3]:0)):($e=ba(Y.buffer)?M.createStream(34962,Y.buffer):M.getBuffer(Y.buffer),sf="type"in Y?ja[Y.type]:$e.dtype,of=!!Y.normalized,lf=Y.size|0,gf=Y.offset|0,nf=Y.stride|0,kf=Y.divisor|0);Te=y.buffer;y.buffer=$e;Ie=y.divisor;y.divisor=kf;qf=y.normalized;y.normalized=of;rf=y.offset;y.offset=gf;
Ef=y.size;y.size=lf;Hf=y.state;y.state=mf;Bf=y.stride;y.stride=nf;Ff=y.type;y.type=sf;Gf=y.w;y.w=pf;xf=y.x;y.x=tf;yf=y.y;y.y=Cf;wf=y.z;y.z=Df;zf=la.vert;la.vert=36;Af=la.frag;la.frag=35;P.dirty=!0;a(N,b,f);N.viewportWidth=v;N.viewportHeight=J;za[0]=ia;za[1]=fa;za[2]=U;za[3]=T;wa[0]=A;wa[1]=Ja;wa[2]=sa;wa[3]=Ea;W.blend_enable=ya;xa[0]=I;xa[1]=Qa;oa[0]=E;oa[1]=D;oa[2]=Ga;oa[3]=K;W.cull_enable=O;W.cull_face=Zb;W.depth_enable=r;Da[0]=na;Da[1]=va;Da[2]=L;Da[3]=Ca;W.scissor_enable=ra;W.stencil_enable=aa;
S&&(d.cpuTime+=performance.now()-ka);Q.offset=Ua;Q.count=Aa;Q.instances=ca;Q.primitive=ga;ha[23]=G;ha[24]=pa;ha[22]=Ba;ha[31]=ta;ha[32]=Qb;ha[33]=Lb;ha[10]=jb;ha[34]=Jc;ha[6]=Hb;ha[7]=Nb;ha[21]=Fb;ha[8]=xb;ha[9]=$b;ha[3]=qb;Ta&&M.destroyStream(Ub);B.buffer=Xa;B.divisor=ub;B.normalized=tb;B.offset=Pa;B.size=Dc;B.state=Va;B.stride=Ib;B.type=Db;B.w=Ma;B.x=zd;B.y=Za;B.z=Jb;Kb&&M.destroyStream(mb);e.buffer=kc;e.divisor=Mc;e.normalized=Ya;e.offset=nd;e.size=Ab;e.state=$a;e.stride=Wb;e.type=uc;e.w=Xb;e.x=
Pb;e.y=Nc;e.z=Rb;Pd&&M.destroyStream(Fc);l.buffer=ec;l.divisor=ic;l.normalized=zc;l.offset=Cc;l.size=dd;l.state=Tc;l.stride=Uc;l.type=Vc;l.w=Zc;l.x=od;l.y=ed;l.z=$c;lc&&M.destroyStream(dc);g.buffer=he;g.divisor=ee;g.normalized=Ud;g.offset=Nd;g.size=Kd;g.state=qd;g.stride=Wc;g.type=wd;g.w=ud;g.x=ld;g.y=xd;g.z=Gd;n.buffer=Hd;n.divisor=je;n.normalized=me;n.offset=ue;n.size=ne;n.state=ke;n.stride=ie;n.type=ve;n.w=fe;n.x=pe;n.y=Rc;n.z=id;p.buffer=we;p.divisor=se;p.normalized=Rd;p.offset=Vd;p.size=Wd;p.state=
Xd;p.stride=qe;p.type=Ce;p.w=Ge;p.x=te;p.y=Ve;p.z=We;Re&&M.destroyStream(xe);w.buffer=Yd;w.divisor=He;w.normalized=Pe;w.offset=df;w.size=cf;w.state=Xe;w.stride=Se;w.type=bf;w.w=af;w.x=Ye;w.y=Ze;w.z=Zd;ce&&M.destroyStream($e);y.buffer=Te;y.divisor=Ie;y.normalized=qf;y.offset=rf;y.size=Ef;y.state=Hf;y.stride=Bf;y.type=Ff;y.w=Gf;y.x=xf;y.y=yf;y.z=wf;la.vert=zf;la.frag=Af;P.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,d,h,u,q,m,b,f,c,k,
z,B,e,l,g,n,p,w,y){var C,Ea,x,v,r,I,aa,E,A,ca,H,F,D,ga,t,ea,L,G,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa;C=a.attributes;Ea=a.buffer;x=a.context;v=a.current;r=a.draw;I=a.elements;aa=a.extensions;E=a.framebuffer;A=a.gl;ca=a.isBufferArgs;H=a.next;F=a.shader;D=a.uniforms;ga=a.vao;t=H.blend_color;ea=v.blend_color;L=H.blend_equation;G=v.blend_equation;ta=H.blend_func;S=v.blend_func;V=H.colorMask;R=v.colorMask;O=H.depth_range;M=v.depth_range;N=H.polygonOffset_offset;P=v.polygonOffset_offset;
Q=H.sample_coverage;ra=v.sample_coverage;pa=H.scissor_box;J=v.scissor_box;K=H.stencil_func;ba=v.stencil_func;W=H.stencil_opBack;la=v.stencil_opBack;ha=H.stencil_opFront;Ba=v.stencil_opFront;wa=H.viewport;da=v.viewport;xa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(b,a){var f,t,m,u,h,q;f=E.next;f!==E.cur&&(f?A.bindFramebuffer(36160,f.framebuffer):A.bindFramebuffer(36160,null),E.cur=
f);if(v.dirty){var T,D,F,L,Z,U,ya,Ga,qa,za,Ca,ja,X,wa,pa,Fa,fb,Y,ta,bc,Ha,cc,Sb,ze,Id,Ad,Td,De,Ae,$d,re,Dd;T=H.dither;T!==v.dither&&(T?A.enable(3024):A.disable(3024),v.dither=T);D=H.depth_func;D!==v.depth_func&&(A.depthFunc(D),v.depth_func=D);F=O[0];L=O[1];if(F!==M[0]||L!==M[1])A.depthRange(F,L),M[0]=F,M[1]=L;Z=H.depth_mask;Z!==v.depth_mask&&(A.depthMask(Z),v.depth_mask=Z);U=V[0];ya=V[1];Ga=V[2];qa=V[3];if(U!==R[0]||ya!==R[1]||Ga!==R[2]||qa!==R[3])A.colorMask(U,ya,Ga,qa),R[0]=U,R[1]=ya,R[2]=Ga,R[3]=
qa;za=H.cull_enable;za!==v.cull_enable&&(za?A.enable(2884):A.disable(2884),v.cull_enable=za);Ca=H.cull_face;Ca!==v.cull_face&&(A.cullFace(Ca),v.cull_face=Ca);ja=H.frontFace;ja!==v.frontFace&&(A.frontFace(ja),v.frontFace=ja);X=H.lineWidth;X!==v.lineWidth&&(A.lineWidth(X),v.lineWidth=X);wa=H.polygonOffset_enable;wa!==v.polygonOffset_enable&&(wa?A.enable(32823):A.disable(32823),v.polygonOffset_enable=wa);pa=N[0];Fa=N[1];if(pa!==P[0]||Fa!==P[1])A.polygonOffset(pa,Fa),P[0]=pa,P[1]=Fa;fb=H.sample_alpha;
fb!==v.sample_alpha&&(fb?A.enable(32926):A.disable(32926),v.sample_alpha=fb);Y=H.sample_enable;Y!==v.sample_enable&&(Y?A.enable(32928):A.disable(32928),v.sample_enable=Y);ta=Q[0];bc=Q[1];if(ta!==ra[0]||bc!==ra[1])A.sampleCoverage(ta,bc),ra[0]=ta,ra[1]=bc;Ha=H.stencil_mask;Ha!==v.stencil_mask&&(A.stencilMask(Ha),v.stencil_mask=Ha);cc=K[0];Sb=K[1];ze=K[2];if(cc!==ba[0]||Sb!==ba[1]||ze!==ba[2])A.stencilFunc(cc,Sb,ze),ba[0]=cc,ba[1]=Sb,ba[2]=ze;Id=ha[0];Ad=ha[1];Td=ha[2];De=ha[3];if(Id!==Ba[0]||Ad!==
Ba[1]||Td!==Ba[2]||De!==Ba[3])A.stencilOpSeparate(Id,Ad,Td,De),Ba[0]=Id,Ba[1]=Ad,Ba[2]=Td,Ba[3]=De;Ae=W[0];$d=W[1];re=W[2];Dd=W[3];if(Ae!==la[0]||$d!==la[1]||re!==la[2]||Dd!==la[3])A.stencilOpSeparate(Ae,$d,re,Dd),la[0]=Ae,la[1]=$d,la[2]=re,la[3]=Dd}A.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;A.enable(3042);v.blend_enable=!0;A.blendEquationSeparate(32774,32774);G[0]=32774;G[1]=32774;A.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;A.disable(2929);v.depth_enable=!1;A.enable(3089);
v.scissor_enable=!0;A.disable(2960);v.stencil_enable=!1;if(t=v.profile)m=performance.now(),d.count+=a;A.useProgram(c.program);u=aa.angle_instanced_arrays;var yd;ga.setVAO(null);yd=r.instances;for(h=0;h<a;++h){q=b[h];var Qd,Od,Bd,Be,Qe,Ue,Jd,Ee,le,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db;Qd=q.viewport;Od=Qd.x|0;Bd=Qd.y|0;Be="width"in
Qd?Qd.width|0:x.framebufferWidth-Od;Qe="height"in Qd?Qd.height|0:x.framebufferHeight-Bd;Ue=x.viewportWidth;x.viewportWidth=Be;Jd=x.viewportHeight;x.viewportHeight=Qe;A.viewport(Od,Bd,Be,Qe);da[0]=Od;da[1]=Bd;da[2]=Be;da[3]=Qe;Ee=q.viewport;le=Ee.x|0;be=Ee.y|0;Md="width"in Ee?Ee.width|0:x.framebufferWidth-le;Ed="height"in Ee?Ee.height|0:x.framebufferHeight-be;A.scissor(le,be,Md,Ed);J[0]=le;J[1]=be;J[2]=Md;J[3]=Ed;ka.buffer=q.positionBuffer;pd=!1;bd=null;td=0;Oc=!1;Gc=rd=0;gd=1;Sc=0;md=5126;yb=vc=Eb=
Vb=0;ca(ka)?(pd=!0,bd=Ea.createStream(34962,ka),md=bd.dtype):(bd=Ea.getBuffer(ka))?md=bd.dtype:"constant"in ka?(gd=2,"number"===typeof ka.constant?(Eb=ka.constant,vc=yb=Vb=0):(Eb=0<ka.constant.length?ka.constant[0]:0,vc=1<ka.constant.length?ka.constant[1]:0,yb=2<ka.constant.length?ka.constant[2]:0,Vb=3<ka.constant.length?ka.constant[3]:0)):(bd=ca(ka.buffer)?Ea.createStream(34962,ka.buffer):Ea.getBuffer(ka.buffer),md="type"in ka?xa[ka.type]:bd.dtype,Oc=!!ka.normalized,Gc=ka.size|0,rd=ka.offset|0,Sc=
ka.stride|0,td=ka.divisor|0);yc=l.location;Bb=C[yc];if(1===gd){Bb.buffer||A.enableVertexAttribArray(yc);Lc=Gc||2;if(Bb.type!==md||Bb.size!==Lc||Bb.buffer!==bd||Bb.normalized!==Oc||Bb.offset!==rd||Bb.stride!==Sc)A.bindBuffer(34962,bd.buffer),A.vertexAttribPointer(yc,Lc,md,Oc,Sc,rd),Bb.type=md,Bb.size=Lc,Bb.buffer=bd,Bb.normalized=Oc,Bb.offset=rd,Bb.stride=Sc;Bb.divisor!==td&&(u.vertexAttribDivisorANGLE(yc,td),Bb.divisor=td)}else if(Bb.buffer&&(A.disableVertexAttribArray(yc),Bb.buffer=null),Bb.x!==
Eb||Bb.y!==vc||Bb.z!==yb||Bb.w!==Vb)A.vertexAttrib4f(yc,Eb,vc,yb,Vb),Bb.x=Eb,Bb.y=vc,Bb.z=yb,Bb.w=Vb;oa.buffer=q.positionFractBuffer;mc=!1;Hc=null;hd=0;cd=!1;fc=Ec=0;Ic=1;pc=0;rc=5126;Pc=ob=qc=nc=0;ca(oa)?(mc=!0,Hc=Ea.createStream(34962,oa),rc=Hc.dtype):(Hc=Ea.getBuffer(oa))?rc=Hc.dtype:"constant"in oa?(Ic=2,"number"===typeof oa.constant?(qc=oa.constant,ob=Pc=nc=0):(qc=0<oa.constant.length?oa.constant[0]:0,ob=1<oa.constant.length?oa.constant[1]:0,Pc=2<oa.constant.length?oa.constant[2]:0,nc=3<oa.constant.length?
oa.constant[3]:0)):(Hc=ca(oa.buffer)?Ea.createStream(34962,oa.buffer):Ea.getBuffer(oa.buffer),rc="type"in oa?xa[oa.type]:Hc.dtype,cd=!!oa.normalized,fc=oa.size|0,Ec=oa.offset|0,pc=oa.stride|0,hd=oa.divisor|0);Qb=g.location;cb=C[Qb];if(1===Ic){cb.buffer||A.enableVertexAttribArray(Qb);Lb=fc||2;if(cb.type!==rc||cb.size!==Lb||cb.buffer!==Hc||cb.normalized!==cd||cb.offset!==Ec||cb.stride!==pc)A.bindBuffer(34962,Hc.buffer),A.vertexAttribPointer(Qb,Lb,rc,cd,pc,Ec),cb.type=rc,cb.size=Lb,cb.buffer=Hc,cb.normalized=
cd,cb.offset=Ec,cb.stride=pc;cb.divisor!==hd&&(u.vertexAttribDivisorANGLE(Qb,hd),cb.divisor=hd)}else if(cb.buffer&&(A.disableVertexAttribArray(Qb),cb.buffer=null),cb.x!==qc||cb.y!==ob||cb.z!==Pc||cb.w!==nc)A.vertexAttrib4f(Qb,qc,ob,Pc,nc),cb.x=qc,cb.y=ob,cb.z=Pc,cb.w=nc;ab=q.fill;jb=ab[0];Jc=ab[1];Hb=ab[2];Nb=ab[3];h&&Wa===jb&&Mb===Jc&&sc===Hb&&kb===Nb||(Wa=jb,Mb=Jc,sc=Hb,kb=Nb,A.uniform4f(z.location,jb,Jc,Hb,Nb));Fb=q.scale;Cb=Fb[0];hb=Fb[1];h&&xb===Cb&&$b===hb||(xb=Cb,$b=hb,A.uniform2f(n.location,
Cb,hb));Ob=q.scaleFract;qb=Ob[0];Ub=Ob[1];h&&Ta===qb&&zb===Ub||(Ta=qb,zb=Ub,A.uniform2f(p.location,qb,Ub));jc=q.translate;ib=jc[0];Ia=jc[1];h&&pb===ib&&sb===Ia||(pb=ib,sb=Ia,A.uniform2f(w.location,ib,Ia));La=q.translateFract;eb=La[0];Na=La[1];h&&gb===eb&&lb===Na||(gb=eb,lb=Na,A.uniform2f(y.location,eb,Na));Xa=q.id;h&&ub===Xa||(ub=Xa,A.uniform1f(B.location,Xa));tb=q.opacity;h&&Pa===tb||(Pa=tb,A.uniform1f(e.location,tb));Dc=k.call(this,x,q,h);Va=null;(Va=(Ib=ca(Dc))?I.createStream(Dc):I.getElements(Dc))&&
A.bindBuffer(34963,Va.buffer.buffer);if(Db=Va?Va.vertCount:-1)0<yd?Va?u.drawElementsInstancedANGLE(4,Db,Va.type,0<<(Va.type-5121>>1),yd):u.drawArraysInstancedANGLE(4,0,Db,yd):0>yd&&(Va?A.drawElements(4,Db,Va.type,0<<(Va.type-5121>>1)):A.drawArrays(4,0,Db)),x.viewportWidth=Ue,x.viewportHeight=Jd,pd&&Ea.destroyStream(bd),mc&&Ea.destroyStream(Hc),Ib&&I.destroyStream(Va)}v.dirty=!0;ga.setVAO(null);t&&(d.cpuTime+=performance.now()-m)},draw:function(c){var b,a,k,f,t,m,q,D,F,L,wa,Z,U,ya,Ga,qa,za,Ca,ja,X,
pa,ta;b=E.next;b!==E.cur&&(b?A.bindFramebuffer(36160,b.framebuffer):A.bindFramebuffer(36160,null),E.cur=b);if(v.dirty){b=H.dither;b!==v.dither&&(b?A.enable(3024):A.disable(3024),v.dither=b);b=H.depth_func;b!==v.depth_func&&(A.depthFunc(b),v.depth_func=b);b=O[0];m=O[1];if(b!==M[0]||m!==M[1])A.depthRange(b,m),M[0]=b,M[1]=m;b=H.depth_mask;b!==v.depth_mask&&(A.depthMask(b),v.depth_mask=b);b=V[0];m=V[1];a=V[2];k=V[3];if(b!==R[0]||m!==R[1]||a!==R[2]||k!==R[3])A.colorMask(b,m,a,k),R[0]=b,R[1]=m,R[2]=a,R[3]=
k;b=H.cull_enable;b!==v.cull_enable&&(b?A.enable(2884):A.disable(2884),v.cull_enable=b);b=H.cull_face;b!==v.cull_face&&(A.cullFace(b),v.cull_face=b);b=H.frontFace;b!==v.frontFace&&(A.frontFace(b),v.frontFace=b);b=H.lineWidth;b!==v.lineWidth&&(A.lineWidth(b),v.lineWidth=b);b=H.polygonOffset_enable;b!==v.polygonOffset_enable&&(b?A.enable(32823):A.disable(32823),v.polygonOffset_enable=b);b=N[0];m=N[1];if(b!==P[0]||m!==P[1])A.polygonOffset(b,m),P[0]=b,P[1]=m;b=H.sample_alpha;b!==v.sample_alpha&&(b?A.enable(32926):
A.disable(32926),v.sample_alpha=b);b=H.sample_enable;b!==v.sample_enable&&(b?A.enable(32928):A.disable(32928),v.sample_enable=b);b=Q[0];m=Q[1];if(b!==ra[0]||m!==ra[1])A.sampleCoverage(b,m),ra[0]=b,ra[1]=m;b=H.stencil_mask;b!==v.stencil_mask&&(A.stencilMask(b),v.stencil_mask=b);b=K[0];m=K[1];a=K[2];if(b!==ba[0]||m!==ba[1]||a!==ba[2])A.stencilFunc(b,m,a),ba[0]=b,ba[1]=m,ba[2]=a;b=ha[0];m=ha[1];a=ha[2];k=ha[3];if(b!==Ba[0]||m!==Ba[1]||a!==Ba[2]||k!==Ba[3])A.stencilOpSeparate(b,m,a,k),Ba[0]=b,Ba[1]=m,
Ba[2]=a,Ba[3]=k;b=W[0];m=W[1];a=W[2];k=W[3];if(b!==la[0]||m!==la[1]||a!==la[2]||k!==la[3])A.stencilOpSeparate(b,m,a,k),la[0]=b,la[1]=m,la[2]=a,la[3]=k}b=c.viewport;a=b.x|0;k=b.y|0;f="width"in b?b.width|0:x.framebufferWidth-a;t="height"in b?b.height|0:x.framebufferHeight-k;b=x.viewportWidth;x.viewportWidth=f;m=x.viewportHeight;x.viewportHeight=t;A.viewport(a,k,f,t);da[0]=a;da[1]=k;da[2]=f;da[3]=t;A.blendColor(0,0,0,0);ea[0]=0;ea[1]=0;ea[2]=0;ea[3]=0;A.enable(3042);v.blend_enable=!0;A.blendEquationSeparate(32774,
32774);G[0]=32774;G[1]=32774;A.blendFuncSeparate(770,771,773,1);S[0]=770;S[1]=771;S[2]=773;S[3]=1;A.disable(2929);v.depth_enable=!1;t=c.viewport;a=t.x|0;k=t.y|0;f="width"in t?t.width|0:x.framebufferWidth-a;t="height"in t?t.height|0:x.framebufferHeight-k;A.scissor(a,k,f,t);J[0]=a;J[1]=k;J[2]=f;J[3]=t;A.enable(3089);v.scissor_enable=!0;A.disable(2960);v.stencil_enable=!1;if(a=v.profile)q=performance.now(),d.count++;A.useProgram(h.program);k=aa.angle_instanced_arrays;ga.setVAO(null);ka.buffer=c.positionBuffer;
f=!1;D=0;F=!1;wa=L=0;Z=1;U=0;ya=5126;Ca=za=qa=Ga=0;ca(ka)?(f=!0,t=Ea.createStream(34962,ka),ya=t.dtype):(t=Ea.getBuffer(ka))?ya=t.dtype:"constant"in ka?(Z=2,"number"===typeof ka.constant?(qa=ka.constant,za=Ca=Ga=0):(qa=0<ka.constant.length?ka.constant[0]:0,za=1<ka.constant.length?ka.constant[1]:0,Ca=2<ka.constant.length?ka.constant[2]:0,Ga=3<ka.constant.length?ka.constant[3]:0)):(t=ca(ka.buffer)?Ea.createStream(34962,ka.buffer):Ea.getBuffer(ka.buffer),ya="type"in ka?xa[ka.type]:t.dtype,F=!!ka.normalized,
wa=ka.size|0,L=ka.offset|0,U=ka.stride|0,D=ka.divisor|0);ja=l.location;X=C[ja];if(1===Z){X.buffer||A.enableVertexAttribArray(ja);wa=wa||2;if(X.type!==ya||X.size!==wa||X.buffer!==t||X.normalized!==F||X.offset!==L||X.stride!==U)A.bindBuffer(34962,t.buffer),A.vertexAttribPointer(ja,wa,ya,F,U,L),X.type=ya,X.size=wa,X.buffer=t,X.normalized=F,X.offset=L,X.stride=U;X.divisor!==D&&(k.vertexAttribDivisorANGLE(ja,D),X.divisor=D)}else if(X.buffer&&(A.disableVertexAttribArray(ja),X.buffer=null),X.x!==qa||X.y!==
za||X.z!==Ca||X.w!==Ga)A.vertexAttrib4f(ja,qa,za,Ca,Ga),X.x=qa,X.y=za,X.z=Ca,X.w=Ga;oa.buffer=c.positionFractBuffer;D=!1;L=0;U=!1;Ga=ya=0;qa=1;ja=0;X=5126;ta=pa=Ca=za=0;ca(oa)?(D=!0,F=Ea.createStream(34962,oa),X=F.dtype):(F=Ea.getBuffer(oa))?X=F.dtype:"constant"in oa?(qa=2,"number"===typeof oa.constant?(Ca=oa.constant,pa=ta=za=0):(Ca=0<oa.constant.length?oa.constant[0]:0,pa=1<oa.constant.length?oa.constant[1]:0,ta=2<oa.constant.length?oa.constant[2]:0,za=3<oa.constant.length?oa.constant[3]:0)):(F=
ca(oa.buffer)?Ea.createStream(34962,oa.buffer):Ea.getBuffer(oa.buffer),X="type"in oa?xa[oa.type]:F.dtype,U=!!oa.normalized,Ga=oa.size|0,ya=oa.offset|0,ja=oa.stride|0,L=oa.divisor|0);wa=g.location;Z=C[wa];if(1===qa){Z.buffer||A.enableVertexAttribArray(wa);Ga=Ga||2;if(Z.type!==X||Z.size!==Ga||Z.buffer!==F||Z.normalized!==U||Z.offset!==ya||Z.stride!==ja)A.bindBuffer(34962,F.buffer),A.vertexAttribPointer(wa,Ga,X,U,ja,ya),Z.type=X,Z.size=Ga,Z.buffer=F,Z.normalized=U,Z.offset=ya,Z.stride=ja;Z.divisor!==
L&&(k.vertexAttribDivisorANGLE(wa,L),Z.divisor=L)}else if(Z.buffer&&(A.disableVertexAttribArray(wa),Z.buffer=null),Z.x!==Ca||Z.y!==pa||Z.z!==ta||Z.w!==za)A.vertexAttrib4f(wa,Ca,pa,ta,za),Z.x=Ca,Z.y=pa,Z.z=ta,Z.w=za;L=c.fill;A.uniform4f(z.location,L[0],L[1],L[2],L[3]);L=c.scale;A.uniform2f(n.location,L[0],L[1]);L=c.scaleFract;A.uniform2f(p.location,L[0],L[1]);L=c.translate;A.uniform2f(w.location,L[0],L[1]);L=c.translateFract;A.uniform2f(y.location,L[0],L[1]);A.uniform1f(B.location,c.id);A.uniform1f(e.location,
c.opacity);L=u.call(this,x,c,0);(L=(c=ca(L))?I.createStream(L):I.getElements(L))&&A.bindBuffer(34963,L.buffer.buffer);if(U=L?L.vertCount:-1)ya=r.instances,0<ya?L?k.drawElementsInstancedANGLE(4,U,L.type,0<<(L.type-5121>>1),ya):k.drawArraysInstancedANGLE(4,0,U,ya):0>ya&&(L?A.drawElements(4,U,L.type,0<<(L.type-5121>>1)):A.drawArrays(4,0,U)),v.dirty=!0,ga.setVAO(null),x.viewportWidth=b,x.viewportHeight=m,a&&(d.cpuTime+=performance.now()-q),f&&Ea.destroyStream(t),D&&Ea.destroyStream(F),c&&I.destroyStream(L)},
scope:function(c,e,a){var l,k,g,n,p,w,y,u,h,C,B,z,J,N,T,A,E,K,O,W,M,da,R,Q,P,ba,ha,ra,aa,S,V,ga,ea,G,la,ma,Ba,yd,Qd,Od,Bd,Be,Qe,Ue,Jd,Ee,le,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb;l=c.viewport;k=l.x|0;g=l.y|0;n="width"in l?l.width|0:x.framebufferWidth-k;p="height"in l?l.height|0:x.framebufferHeight-g;w=x.viewportWidth;x.viewportWidth=n;y=
x.viewportHeight;x.viewportHeight=p;u=wa[0];wa[0]=k;h=wa[1];wa[1]=g;C=wa[2];wa[2]=n;B=wa[3];wa[3]=p;z=t[0];t[0]=0;J=t[1];t[1]=0;N=t[2];t[2]=0;T=t[3];t[3]=0;A=H.blend_enable;H.blend_enable=!0;E=L[0];L[0]=32774;K=L[1];L[1]=32774;O=ta[0];ta[0]=770;W=ta[1];ta[1]=771;M=ta[2];ta[2]=773;da=ta[3];ta[3]=1;R=H.depth_enable;H.depth_enable=!1;Q=c.viewport;P=Q.x|0;ba=Q.y|0;ha="width"in Q?Q.width|0:x.framebufferWidth-P;ra="height"in Q?Q.height|0:x.framebufferHeight-ba;aa=pa[0];pa[0]=P;S=pa[1];pa[1]=ba;V=pa[2];
pa[2]=ha;ga=pa[3];pa[3]=ra;ea=H.scissor_enable;H.scissor_enable=!0;G=H.stencil_enable;H.stencil_enable=!1;if(la=v.profile)ma=performance.now(),d.count++;Ba=q.call(this,x,c,a);yd=null;yd=(Qd=ca(Ba))?I.createStream(Ba):I.getElements(Ba);Od=r.elements;r.elements=yd;Bd=r.offset;r.offset=0;Be=yd?yd.vertCount:-1;Qe=r.count;r.count=Be;Ue=r.primitive;r.primitive=4;Jd=c.fill;Ee=D[14];D[14]=Jd;le=c.id;be=D[31];D[31]=le;Md=c.opacity;Ed=D[10];D[10]=Md;pd=x.pixelRatio;bd=D[34];D[34]=pd;td=c.scale;Oc=D[6];D[6]=
td;rd=c.scaleFract;Gc=D[7];D[7]=rd;gd=c.translate;Sc=D[8];D[8]=gd;md=c.translateFract;Vb=D[9];D[9]=md;Eb=m.call(this,x,c,a);vc=D[3];D[3]=Eb;ka.buffer=c.positionBuffer;yb=!1;yc=null;Bb=0;Lc=!1;Hc=mc=0;hd=1;cd=0;Ec=5126;rc=pc=Ic=fc=0;ca(ka)?(yb=!0,yc=Ea.createStream(34962,ka),Ec=yc.dtype):(yc=Ea.getBuffer(ka))?Ec=yc.dtype:"constant"in ka?(hd=2,"number"===typeof ka.constant?(Ic=ka.constant,pc=rc=fc=0):(Ic=0<ka.constant.length?ka.constant[0]:0,pc=1<ka.constant.length?ka.constant[1]:0,rc=2<ka.constant.length?
ka.constant[2]:0,fc=3<ka.constant.length?ka.constant[3]:0)):(yc=ca(ka.buffer)?Ea.createStream(34962,ka.buffer):Ea.getBuffer(ka.buffer),Ec="type"in ka?xa[ka.type]:yc.dtype,Lc=!!ka.normalized,Hc=ka.size|0,mc=ka.offset|0,cd=ka.stride|0,Bb=ka.divisor|0);nc=b.buffer;b.buffer=yc;qc=b.divisor;b.divisor=Bb;ob=b.normalized;b.normalized=Lc;Pc=b.offset;b.offset=mc;Qb=b.size;b.size=Hc;cb=b.state;b.state=hd;Lb=b.stride;b.stride=cd;ab=b.type;b.type=Ec;jb=b.w;b.w=fc;Wa=b.x;b.x=Ic;Jc=b.y;b.y=pc;Mb=b.z;b.z=rc;oa.buffer=
c.positionFractBuffer;Hb=!1;sc=null;Nb=0;kb=!1;Cb=Fb=0;xb=1;hb=0;$b=5126;Ub=Ta=qb=Ob=0;ca(oa)?(Hb=!0,sc=Ea.createStream(34962,oa),$b=sc.dtype):(sc=Ea.getBuffer(oa))?$b=sc.dtype:"constant"in oa?(xb=2,"number"===typeof oa.constant?(qb=oa.constant,Ta=Ub=Ob=0):(qb=0<oa.constant.length?oa.constant[0]:0,Ta=1<oa.constant.length?oa.constant[1]:0,Ub=2<oa.constant.length?oa.constant[2]:0,Ob=3<oa.constant.length?oa.constant[3]:0)):(sc=ca(oa.buffer)?Ea.createStream(34962,oa.buffer):Ea.getBuffer(oa.buffer),$b=
"type"in oa?xa[oa.type]:sc.dtype,kb=!!oa.normalized,Cb=oa.size|0,Fb=oa.offset|0,hb=oa.stride|0,Nb=oa.divisor|0);zb=f.buffer;f.buffer=sc;jc=f.divisor;f.divisor=Nb;ib=f.normalized;f.normalized=kb;pb=f.offset;f.offset=Fb;Ia=f.size;f.size=Cb;sb=f.state;f.state=xb;La=f.stride;f.stride=hb;eb=f.type;f.type=$b;gb=f.w;f.w=Ob;Na=f.x;f.x=qb;lb=f.y;f.y=Ta;Xa=f.z;f.z=Ub;ub=F.vert;F.vert=42;tb=F.frag;F.frag=41;v.dirty=!0;e(x,c,a);x.viewportWidth=w;x.viewportHeight=y;wa[0]=u;wa[1]=h;wa[2]=C;wa[3]=B;t[0]=z;t[1]=
J;t[2]=N;t[3]=T;H.blend_enable=A;L[0]=E;L[1]=K;ta[0]=O;ta[1]=W;ta[2]=M;ta[3]=da;H.depth_enable=R;pa[0]=aa;pa[1]=S;pa[2]=V;pa[3]=ga;H.scissor_enable=ea;H.stencil_enable=G;la&&(d.cpuTime+=performance.now()-ma);Qd&&I.destroyStream(yd);r.elements=Od;r.offset=Bd;r.count=Qe;r.primitive=Ue;D[14]=Ee;D[31]=be;D[10]=Ed;D[34]=bd;D[6]=Oc;D[7]=Gc;D[8]=Sc;D[9]=Vb;D[3]=vc;yb&&Ea.destroyStream(yc);b.buffer=nc;b.divisor=qc;b.normalized=ob;b.offset=Pc;b.size=Qb;b.state=cb;b.stride=Lb;b.type=ab;b.w=jb;b.x=Wa;b.y=Jc;
b.z=Mb;Hb&&Ea.destroyStream(sc);f.buffer=zb;f.divisor=jc;f.normalized=ib;f.offset=pb;f.size=Ia;f.state=sb;f.stride=La;f.type=eb;f.w=gb;f.x=Na;f.y=lb;f.z=Xa;F.vert=ub;F.frag=tb;v.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,r,I,aa,E,A,ca,H,F,D,ga,t,ea,L,G,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,
ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua){var ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca,ja,X,ua,Ka,Fa,fb,Y,Kc,bc,Ha,cc,Sb,ze,Id,Ad,Td,De,Ae,$d,re,Dd,yd,Qd,Od,Bd;ia=a.attributes;fa=a.buffer;sa=a.context;va=a.current;Da=a.draw;rb=a.elements;Gb=a.extensions;Z=a.framebuffer;U=a.gl;ya=a.isBufferArgs;Ga=a.next;qa=a.shader;za=a.uniforms;Ca=a.vao;ja=Ga.blend_color;X=va.blend_color;ua=Ga.blend_equation;Ka=va.blend_equation;Fa=Ga.blend_func;fb=va.blend_func;Y=Ga.colorMask;Kc=va.colorMask;bc=Ga.depth_range;Ha=va.depth_range;
cc=Ga.polygonOffset_offset;Sb=va.polygonOffset_offset;ze=Ga.sample_coverage;Id=va.sample_coverage;Ad=Ga.scissor_box;Td=va.scissor_box;De=Ga.stencil_func;Ae=va.stencil_func;$d=Ga.stencil_opBack;re=va.stencil_opBack;Dd=Ga.stencil_opFront;yd=va.stencil_opFront;Qd=Ga.viewport;Od=va.viewport;Bd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(c,e){var b,a,l,k,f,g;b=Z.next;b!==Z.cur&&(b?U.bindFramebuffer(36160,b.framebuffer):U.bindFramebuffer(36160,
null),Z.cur=b);if(va.dirty){var n,p,t,w,y,m,u,h,C,x,B,v,z,q,T,A,Ea,D,I,E,r,H,F,qa,ja,za,na,aa,ca,ga,Fa,cb,Lb,ab;n=Ga.dither;n!==va.dither&&(n?U.enable(3024):U.disable(3024),va.dither=n);p=ua[0];t=ua[1];if(p!==Ka[0]||t!==Ka[1])U.blendEquationSeparate(p,t),Ka[0]=p,Ka[1]=t;w=Ga.depth_func;w!==va.depth_func&&(U.depthFunc(w),va.depth_func=w);y=bc[0];m=bc[1];if(y!==Ha[0]||m!==Ha[1])U.depthRange(y,m),Ha[0]=y,Ha[1]=m;u=Ga.depth_mask;u!==va.depth_mask&&(U.depthMask(u),va.depth_mask=u);h=Y[0];C=Y[1];x=Y[2];
B=Y[3];if(h!==Kc[0]||C!==Kc[1]||x!==Kc[2]||B!==Kc[3])U.colorMask(h,C,x,B),Kc[0]=h,Kc[1]=C,Kc[2]=x,Kc[3]=B;v=Ga.cull_enable;v!==va.cull_enable&&(v?U.enable(2884):U.disable(2884),va.cull_enable=v);z=Ga.cull_face;z!==va.cull_face&&(U.cullFace(z),va.cull_face=z);q=Ga.frontFace;q!==va.frontFace&&(U.frontFace(q),va.frontFace=q);T=Ga.lineWidth;T!==va.lineWidth&&(U.lineWidth(T),va.lineWidth=T);A=Ga.polygonOffset_enable;A!==va.polygonOffset_enable&&(A?U.enable(32823):U.disable(32823),va.polygonOffset_enable=
A);Ea=cc[0];D=cc[1];if(Ea!==Sb[0]||D!==Sb[1])U.polygonOffset(Ea,D),Sb[0]=Ea,Sb[1]=D;I=Ga.sample_alpha;I!==va.sample_alpha&&(I?U.enable(32926):U.disable(32926),va.sample_alpha=I);E=Ga.sample_enable;E!==va.sample_enable&&(E?U.enable(32928):U.disable(32928),va.sample_enable=E);r=ze[0];H=ze[1];if(r!==Id[0]||H!==Id[1])U.sampleCoverage(r,H),Id[0]=r,Id[1]=H;F=Ga.stencil_mask;F!==va.stencil_mask&&(U.stencilMask(F),va.stencil_mask=F);qa=De[0];ja=De[1];za=De[2];if(qa!==Ae[0]||ja!==Ae[1]||za!==Ae[2])U.stencilFunc(qa,
ja,za),Ae[0]=qa,Ae[1]=ja,Ae[2]=za;na=Dd[0];aa=Dd[1];ca=Dd[2];ga=Dd[3];if(na!==yd[0]||aa!==yd[1]||ca!==yd[2]||ga!==yd[3])U.stencilOpSeparate(na,aa,ca,ga),yd[0]=na,yd[1]=aa,yd[2]=ca,yd[3]=ga;Fa=$d[0];cb=$d[1];Lb=$d[2];ab=$d[3];if(Fa!==re[0]||cb!==re[1]||Lb!==re[2]||ab!==re[3])U.stencilOpSeparate(Fa,cb,Lb,ab),re[0]=Fa,re[1]=cb,re[2]=Lb,re[3]=ab}U.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;U.enable(3042);va.blend_enable=!0;U.blendFuncSeparate(770,771,773,1);fb[0]=770;fb[1]=771;fb[2]=773;fb[3]=1;
U.disable(2929);va.depth_enable=!1;U.enable(3089);va.scissor_enable=!0;U.disable(2960);va.stencil_enable=!1;if(a=va.profile)l=performance.now(),d.count+=e;U.useProgram(ea.program);k=Gb.angle_instanced_arrays;var jb;Ca.setVAO(null);U.uniform1i(K.location,!1);U.uniform1i(Ba.location,P.bind());jb=Da.instances;for(f=0;f<e;++f){g=c[f];var Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,
nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Qd,Ad,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf;Wa=g.viewport;Jc=Wa.x|0;Mb=Wa.y|0;Hb="width"in Wa?Wa.width|0:sa.framebufferWidth-
Jc;sc="height"in Wa?Wa.height|0:sa.framebufferHeight-Mb;Nb=sa.viewportWidth;sa.viewportWidth=Hb;kb=sa.viewportHeight;sa.viewportHeight=sc;U.viewport(Jc,Mb,Hb,sc);Od[0]=Jc;Od[1]=Mb;Od[2]=Hb;Od[3]=sc;Fb=g.viewport;Cb=Fb.x|0;xb=Fb.y|0;hb="width"in Fb?Fb.width|0:sa.framebufferWidth-Cb;$b="height"in Fb?Fb.height|0:sa.framebufferHeight-xb;U.scissor(Cb,xb,hb,$b);Td[0]=Cb;Td[1]=xb;Td[2]=hb;Td[3]=$b;Ob=L.call(this,sa,g,f);qb=!1;Ta=null;Ub=0;zb=!1;ib=jc=0;pb=1;Ia=0;sb=5126;Na=gb=eb=La=0;ya(Ob)?(qb=!0,Ta=fa.createStream(34962,
Ob),sb=Ta.dtype):(Ta=fa.getBuffer(Ob))?sb=Ta.dtype:"constant"in Ob?(pb=2,"number"===typeof Ob.constant?(eb=Ob.constant,gb=Na=La=0):(eb=0<Ob.constant.length?Ob.constant[0]:0,gb=1<Ob.constant.length?Ob.constant[1]:0,Na=2<Ob.constant.length?Ob.constant[2]:0,La=3<Ob.constant.length?Ob.constant[3]:0)):(Ta=ya(Ob.buffer)?fa.createStream(34962,Ob.buffer):fa.getBuffer(Ob.buffer),sb="type"in Ob?Bd[Ob.type]:Ta.dtype,zb=!!Ob.normalized,ib=Ob.size|0,jc=Ob.offset|0,Ia=Ob.stride|0,Ub=Ob.divisor|0);lb=Qa.location;
Xa=ia[lb];if(1===pb){Xa.buffer||U.enableVertexAttribArray(lb);ub=ib||1;if(Xa.type!==sb||Xa.size!==ub||Xa.buffer!==Ta||Xa.normalized!==zb||Xa.offset!==jc||Xa.stride!==Ia)U.bindBuffer(34962,Ta.buffer),U.vertexAttribPointer(lb,ub,sb,zb,Ia,jc),Xa.type=sb,Xa.size=ub,Xa.buffer=Ta,Xa.normalized=zb,Xa.offset=jc,Xa.stride=Ia;Xa.divisor!==Ub&&(k.vertexAttribDivisorANGLE(lb,Ub),Xa.divisor=Ub)}else if(Xa.buffer&&(U.disableVertexAttribArray(lb),Xa.buffer=null),Xa.x!==eb||Xa.y!==gb||Xa.z!==Na||Xa.w!==La)U.vertexAttrib4f(lb,
eb,gb,Na,La),Xa.x=eb,Xa.y=gb,Xa.z=Na,Xa.w=La;tb=G.call(this,sa,g,f);Pa=!1;Dc=null;Va=0;Ib=!1;Ma=Db=0;zd=1;Za=0;Jb=5126;ac=Oa=mb=Kb=0;ya(tb)?(Pa=!0,Dc=fa.createStream(34962,tb),Jb=Dc.dtype):(Dc=fa.getBuffer(tb))?Jb=Dc.dtype:"constant"in tb?(zd=2,"number"===typeof tb.constant?(mb=tb.constant,Oa=ac=Kb=0):(mb=0<tb.constant.length?tb.constant[0]:0,Oa=1<tb.constant.length?tb.constant[1]:0,ac=2<tb.constant.length?tb.constant[2]:0,Kb=3<tb.constant.length?tb.constant[3]:0)):(Dc=ya(tb.buffer)?fa.createStream(34962,
tb.buffer):fa.getBuffer(tb.buffer),Jb="type"in tb?Bd[tb.type]:Dc.dtype,Ib=!!tb.normalized,Ma=tb.size|0,Db=tb.offset|0,Za=tb.stride|0,Va=tb.divisor|0);Ra=Zb.location;vb=ia[Ra];if(1===zd){vb.buffer||U.enableVertexAttribArray(Ra);wb=Ma||1;if(vb.type!==Jb||vb.size!==wb||vb.buffer!==Dc||vb.normalized!==Ib||vb.offset!==Db||vb.stride!==Za)U.bindBuffer(34962,Dc.buffer),U.vertexAttribPointer(Ra,wb,Jb,Ib,Za,Db),vb.type=Jb,vb.size=wb,vb.buffer=Dc,vb.normalized=Ib,vb.offset=Db,vb.stride=Za;vb.divisor!==Va&&(k.vertexAttribDivisorANGLE(Ra,
Va),vb.divisor=Va)}else if(vb.buffer&&(U.disableVertexAttribArray(Ra),vb.buffer=null),vb.x!==mb||vb.y!==Oa||vb.z!==ac||vb.w!==Kb)U.vertexAttrib4f(Ra,mb,Oa,ac,Kb),vb.x=mb,vb.y=Oa,vb.z=ac,vb.w=Kb;Sa=ta.call(this,sa,g,f);nb=!1;gc=null;Bc=0;wc=!1;kc=bb=0;Mc=1;Ya=0;nd=5126;uc=Wb=$a=Ab=0;ya(Sa)?(nb=!0,gc=fa.createStream(34962,Sa),nd=gc.dtype):(gc=fa.getBuffer(Sa))?nd=gc.dtype:"constant"in Sa?(Mc=2,"number"===typeof Sa.constant?($a=Sa.constant,Wb=uc=Ab=0):($a=0<Sa.constant.length?Sa.constant[0]:0,Wb=1<Sa.constant.length?
Sa.constant[1]:0,uc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(gc=ya(Sa.buffer)?fa.createStream(34962,Sa.buffer):fa.getBuffer(Sa.buffer),nd="type"in Sa?Bd[Sa.type]:gc.dtype,wc=!!Sa.normalized,kc=Sa.size|0,bb=Sa.offset|0,Ya=Sa.stride|0,Bc=Sa.divisor|0);Xb=Ja.location;Pb=ia[Xb];if(1===Mc){Pb.buffer||U.enableVertexAttribArray(Xb);Nc=kc||1;if(Pb.type!==nd||Pb.size!==Nc||Pb.buffer!==gc||Pb.normalized!==wc||Pb.offset!==bb||Pb.stride!==Ya)U.bindBuffer(34962,gc.buffer),
U.vertexAttribPointer(Xb,Nc,nd,wc,Ya,bb),Pb.type=nd,Pb.size=Nc,Pb.buffer=gc,Pb.normalized=wc,Pb.offset=bb,Pb.stride=Ya;Pb.divisor!==Bc&&(k.vertexAttribDivisorANGLE(Xb,Bc),Pb.divisor=Bc)}else if(Pb.buffer&&(U.disableVertexAttribArray(Xb),Pb.buffer=null),Pb.x!==$a||Pb.y!==Wb||Pb.z!==uc||Pb.w!==Ab)U.vertexAttrib4f(Xb,$a,Wb,uc,Ab),Pb.x=$a,Pb.y=Wb,Pb.z=uc,Pb.w=Ab;Rb=S.call(this,sa,g,f);Pd=!1;Fc=null;vd=0;Qc=!1;sd=Yc=0;oc=1;xc=0;hc=5126;Yb=Tb=tc=db=0;ya(Rb)?(Pd=!0,Fc=fa.createStream(34962,Rb),hc=Fc.dtype):
(Fc=fa.getBuffer(Rb))?hc=Fc.dtype:"constant"in Rb?(oc=2,"number"===typeof Rb.constant?(tc=Rb.constant,Tb=Yb=db=0):(tc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Yb=2<Rb.constant.length?Rb.constant[2]:0,db=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=ya(Rb.buffer)?fa.createStream(34962,Rb.buffer):fa.getBuffer(Rb.buffer),hc="type"in Rb?Bd[Rb.type]:Fc.dtype,Qc=!!Rb.normalized,sd=Rb.size|0,Yc=Rb.offset|0,xc=Rb.stride|0,vd=Rb.divisor|0);ec=Ua.location;ic=ia[ec];if(1===
oc){ic.buffer||U.enableVertexAttribArray(ec);zc=sd||1;if(ic.type!==hc||ic.size!==zc||ic.buffer!==Fc||ic.normalized!==Qc||ic.offset!==Yc||ic.stride!==xc)U.bindBuffer(34962,Fc.buffer),U.vertexAttribPointer(ec,zc,hc,Qc,xc,Yc),ic.type=hc,ic.size=zc,ic.buffer=Fc,ic.normalized=Qc,ic.offset=Yc,ic.stride=xc;ic.divisor!==vd&&(k.vertexAttribDivisorANGLE(ec,vd),ic.divisor=vd)}else if(ic.buffer&&(U.disableVertexAttribArray(ec),ic.buffer=null),ic.x!==tc||ic.y!==Tb||ic.z!==Yb||ic.w!==db)U.vertexAttrib4f(ec,tc,
Tb,Yb,db),ic.x=tc,ic.y=Tb,ic.z=Yb,ic.w=db;Cc=V.call(this,sa,g,f);dd=!1;Tc=null;Uc=0;Vc=!1;od=Zc=0;ed=1;$c=0;lc=5126;fd=Xc=ad=dc=0;ya(Cc)?(dd=!0,Tc=fa.createStream(34962,Cc),lc=Tc.dtype):(Tc=fa.getBuffer(Cc))?lc=Tc.dtype:"constant"in Cc?(ed=2,"number"===typeof Cc.constant?(ad=Cc.constant,Xc=fd=dc=0):(ad=0<Cc.constant.length?Cc.constant[0]:0,Xc=1<Cc.constant.length?Cc.constant[1]:0,fd=2<Cc.constant.length?Cc.constant[2]:0,dc=3<Cc.constant.length?Cc.constant[3]:0)):(Tc=ya(Cc.buffer)?fa.createStream(34962,
Cc.buffer):fa.getBuffer(Cc.buffer),lc="type"in Cc?Bd[Cc.type]:Tc.dtype,Vc=!!Cc.normalized,od=Cc.size|0,Zc=Cc.offset|0,$c=Cc.stride|0,Uc=Cc.divisor|0);Ac=ka.location;jd=ia[Ac];if(1===ed){jd.buffer||U.enableVertexAttribArray(Ac);Qd=od||1;if(jd.type!==lc||jd.size!==Qd||jd.buffer!==Tc||jd.normalized!==Vc||jd.offset!==Zc||jd.stride!==$c)U.bindBuffer(34962,Tc.buffer),U.vertexAttribPointer(Ac,Qd,lc,Vc,$c,Zc),jd.type=lc,jd.size=Qd,jd.buffer=Tc,jd.normalized=Vc,jd.offset=Zc,jd.stride=$c;jd.divisor!==Uc&&(k.vertexAttribDivisorANGLE(Ac,
Uc),jd.divisor=Uc)}else if(jd.buffer&&(U.disableVertexAttribArray(Ac),jd.buffer=null),jd.x!==ad||jd.y!==Xc||jd.z!==fd||jd.w!==dc)U.vertexAttrib4f(Ac,ad,Xc,fd,dc),jd.x=ad,jd.y=Xc,jd.z=fd,jd.w=dc;Ad=R.call(this,sa,g,f);oe=!1;kd=null;Fe=0;Fd=!1;ee=he=0;Ud=1;Nd=0;Kd=5126;ud=wd=Wc=qd=0;ya(Ad)?(oe=!0,kd=fa.createStream(34962,Ad),Kd=kd.dtype):(kd=fa.getBuffer(Ad))?Kd=kd.dtype:"constant"in Ad?(Ud=2,"number"===typeof Ad.constant?(Wc=Ad.constant,wd=ud=qd=0):(Wc=0<Ad.constant.length?Ad.constant[0]:0,wd=1<Ad.constant.length?
Ad.constant[1]:0,ud=2<Ad.constant.length?Ad.constant[2]:0,qd=3<Ad.constant.length?Ad.constant[3]:0)):(kd=ya(Ad.buffer)?fa.createStream(34962,Ad.buffer):fa.getBuffer(Ad.buffer),Kd="type"in Ad?Bd[Ad.type]:kd.dtype,Fd=!!Ad.normalized,ee=Ad.size|0,he=Ad.offset|0,Nd=Ad.stride|0,Fe=Ad.divisor|0);ld=pa.location;xd=ia[ld];if(1===Ud){xd.buffer||U.enableVertexAttribArray(ld);Gd=ee||1;if(xd.type!==Kd||xd.size!==Gd||xd.buffer!==kd||xd.normalized!==Fd||xd.offset!==he||xd.stride!==Nd)U.bindBuffer(34962,kd.buffer),
U.vertexAttribPointer(ld,Gd,Kd,Fd,Nd,he),xd.type=Kd,xd.size=Gd,xd.buffer=kd,xd.normalized=Fd,xd.offset=he,xd.stride=Nd;xd.divisor!==Fe&&(k.vertexAttribDivisorANGLE(ld,Fe),xd.divisor=Fe)}else if(xd.buffer&&(U.disableVertexAttribArray(ld),xd.buffer=null),xd.x!==Wc||xd.y!==wd||xd.z!==ud||xd.w!==qd)U.vertexAttrib4f(ld,Wc,wd,ud,qd),xd.x=Wc,xd.y=wd,xd.z=ud,xd.w=qd;Hd=O.call(this,sa,g,f);je=!1;me=null;ue=0;ne=!1;ie=ke=0;ve=1;fe=0;pe=5126;se=we=id=Rc=0;ya(Hd)?(je=!0,me=fa.createStream(34962,Hd),pe=me.dtype):
(me=fa.getBuffer(Hd))?pe=me.dtype:"constant"in Hd?(ve=2,"number"===typeof Hd.constant?(id=Hd.constant,we=se=Rc=0):(id=0<Hd.constant.length?Hd.constant[0]:0,we=1<Hd.constant.length?Hd.constant[1]:0,se=2<Hd.constant.length?Hd.constant[2]:0,Rc=3<Hd.constant.length?Hd.constant[3]:0)):(me=ya(Hd.buffer)?fa.createStream(34962,Hd.buffer):fa.getBuffer(Hd.buffer),pe="type"in Hd?Bd[Hd.type]:me.dtype,ne=!!Hd.normalized,ie=Hd.size|0,ke=Hd.offset|0,fe=Hd.stride|0,ue=Hd.divisor|0);Rd=J.location;Vd=ia[Rd];if(1===
ve){Vd.buffer||U.enableVertexAttribArray(Rd);Wd=ie||4;if(Vd.type!==pe||Vd.size!==Wd||Vd.buffer!==me||Vd.normalized!==ne||Vd.offset!==ke||Vd.stride!==fe)U.bindBuffer(34962,me.buffer),U.vertexAttribPointer(Rd,Wd,pe,ne,fe,ke),Vd.type=pe,Vd.size=Wd,Vd.buffer=me,Vd.normalized=ne,Vd.offset=ke,Vd.stride=fe;Vd.divisor!==ue&&(k.vertexAttribDivisorANGLE(Rd,ue),Vd.divisor=ue)}else if(Vd.buffer&&(U.disableVertexAttribArray(Rd),Vd.buffer=null),Vd.x!==id||Vd.y!==we||Vd.z!==se||Vd.w!==Rc)U.vertexAttrib4f(Rd,id,
we,se,Rc),Vd.x=id,Vd.y=we,Vd.z=se,Vd.w=Rc;Xd=M.call(this,sa,g,f);qe=!1;Ce=null;Ge=0;te=!1;We=Ve=0;Re=1;xe=0;Je=5126;Ke=Ne=Me=Le=0;ya(Xd)?(qe=!0,Ce=fa.createStream(34962,Xd),Je=Ce.dtype):(Ce=fa.getBuffer(Xd))?Je=Ce.dtype:"constant"in Xd?(Re=2,"number"===typeof Xd.constant?(Me=Xd.constant,Ne=Ke=Le=0):(Me=0<Xd.constant.length?Xd.constant[0]:0,Ne=1<Xd.constant.length?Xd.constant[1]:0,Ke=2<Xd.constant.length?Xd.constant[2]:0,Le=3<Xd.constant.length?Xd.constant[3]:0)):(Ce=ya(Xd.buffer)?fa.createStream(34962,
Xd.buffer):fa.getBuffer(Xd.buffer),Je="type"in Xd?Bd[Xd.type]:Ce.dtype,te=!!Xd.normalized,We=Xd.size|0,Ve=Xd.offset|0,xe=Xd.stride|0,Ge=Xd.divisor|0);Sd=ra.location;ae=ia[Sd];if(1===Re){ae.buffer||U.enableVertexAttribArray(Sd);de=We||4;if(ae.type!==Je||ae.size!==de||ae.buffer!==Ce||ae.normalized!==te||ae.offset!==Ve||ae.stride!==xe)U.bindBuffer(34962,Ce.buffer),U.vertexAttribPointer(Sd,de,Je,te,xe,Ve),ae.type=Je,ae.size=de,ae.buffer=Ce,ae.normalized=te,ae.offset=Ve,ae.stride=xe;ae.divisor!==Ge&&(k.vertexAttribDivisorANGLE(Sd,
Ge),ae.divisor=Ge)}else if(ae.buffer&&(U.disableVertexAttribArray(Sd),ae.buffer=null),ae.x!==Me||ae.y!==Ne||ae.z!==Ke||ae.w!==Le)U.vertexAttrib4f(Sd,Me,Ne,Ke,Le),ae.x=Me,ae.y=Ne,ae.z=Ke,ae.w=Le;ge=N.call(this,sa,g,f);Oe=!1;Ld=null;Yd=0;He=!1;df=Pe=0;cf=1;Xe=0;Se=5126;Ze=Ye=af=bf=0;ya(ge)?(Oe=!0,Ld=fa.createStream(34962,ge),Se=Ld.dtype):(Ld=fa.getBuffer(ge))?Se=Ld.dtype:"constant"in ge?(cf=2,"number"===typeof ge.constant?(af=ge.constant,Ye=Ze=bf=0):(af=0<ge.constant.length?ge.constant[0]:0,Ye=1<ge.constant.length?
ge.constant[1]:0,Ze=2<ge.constant.length?ge.constant[2]:0,bf=3<ge.constant.length?ge.constant[3]:0)):(Ld=ya(ge.buffer)?fa.createStream(34962,ge.buffer):fa.getBuffer(ge.buffer),Se="type"in ge?Bd[ge.type]:Ld.dtype,He=!!ge.normalized,df=ge.size|0,Pe=ge.offset|0,Xe=ge.stride|0,Yd=ge.divisor|0);Zd=ba.location;ce=ia[Zd];if(1===cf){ce.buffer||U.enableVertexAttribArray(Zd);$e=df||1;if(ce.type!==Se||ce.size!==$e||ce.buffer!==Ld||ce.normalized!==He||ce.offset!==Pe||ce.stride!==Xe)U.bindBuffer(34962,Ld.buffer),
U.vertexAttribPointer(Zd,$e,Se,He,Xe,Pe),ce.type=Se,ce.size=$e,ce.buffer=Ld,ce.normalized=He,ce.offset=Pe,ce.stride=Xe;ce.divisor!==Yd&&(k.vertexAttribDivisorANGLE(Zd,Yd),ce.divisor=Yd)}else if(ce.buffer&&(U.disableVertexAttribArray(Zd),ce.buffer=null),ce.x!==af||ce.y!==Ye||ce.z!==Ze||ce.w!==bf)U.vertexAttrib4f(Zd,af,Ye,Ze,bf),ce.x=af,ce.y=Ye,ce.z=Ze,ce.w=bf;kf=sa.pixelRatio;f&&of===kf||(of=kf,U.uniform1f(wa.location,kf));gf=g.scale;lf=gf[0];nf=gf[1];f&&mf===lf&&sf===nf||(mf=lf,sf=nf,U.uniform2f(da.location,
lf,nf));pf=g.scaleFract;tf=pf[0];Df=pf[1];f&&Cf===tf&&Te===Df||(Cf=tf,Te=Df,U.uniform2f(xa.location,tf,Df));Ie=g.translate;qf=Ie[0];Ef=Ie[1];f&&rf===qf&&Hf===Ef||(rf=qf,Hf=Ef,U.uniform2f(oa.location,qf,Ef));Bf=g.translateFract;Ff=Bf[0];xf=Bf[1];f&&Gf===Ff&&yf===xf||(Gf=Ff,yf=xf,U.uniform2f(Aa.location,Ff,xf));wf=Q.call(this,sa,g,f);zf=wf[0];Jf=wf[1];f&&Af===zf&&Kf===Jf||(Af=zf,Kf=Jf,U.uniform2f(ha.location,zf,Jf));Lf=g.opacity;f&&Mf===Lf||(Mf=Lf,U.uniform1f(la.location,Lf));(uf=g.markerTexture)&&
"framebuffer"===uf._reglType&&(uf=uf.color[0]);Rf=uf._texture;U.uniform1i(W.location,Rf.bind());If=g.elements;vf=null;(vf=(dg=ya(If))?rb.createStream(If):rb.getElements(If))&&U.bindBuffer(34963,vf.buffer.buffer);Sf=g.offset;if(Tf=g.count)0<jb?vf?k.drawElementsInstancedANGLE(0,Tf,vf.type,Sf<<(vf.type-5121>>1),jb):k.drawArraysInstancedANGLE(0,Sf,Tf,jb):0>jb&&(vf?U.drawElements(0,Tf,vf.type,Sf<<(vf.type-5121>>1)):U.drawArrays(0,Sf,Tf)),sa.viewportWidth=Nb,sa.viewportHeight=kb,qb&&fa.destroyStream(Ta),
Pa&&fa.destroyStream(Dc),nb&&fa.destroyStream(gc),Pd&&fa.destroyStream(Fc),dd&&fa.destroyStream(Tc),oe&&fa.destroyStream(kd),je&&fa.destroyStream(me),qe&&fa.destroyStream(Ce),Oe&&fa.destroyStream(Ld),Rf.unbind(),dg&&rb.destroyStream(vf)}P.unbind();va.dirty=!0;Ca.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(a){var g,n,p,t,w,y,C,x,v,N,A,Ea,D,I,E,r,O,H,M,F,qa,R,L,ja,Q,P,za,na,aa,S,V,ca,ga,ea,G,ma,Fa,ta,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,
eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,Ad,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Qd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe;g=Z.next;g!==Z.cur&&(g?U.bindFramebuffer(36160,g.framebuffer):U.bindFramebuffer(36160,null),Z.cur=g);if(va.dirty){var Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,
Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf;Je=Ga.dither;Je!==va.dither&&(Je?U.enable(3024):U.disable(3024),va.dither=Je);Le=ua[0];Me=ua[1];if(Le!==Ka[0]||Me!==Ka[1])U.blendEquationSeparate(Le,Me),Ka[0]=Le,Ka[1]=Me;Ne=Ga.depth_func;Ne!==va.depth_func&&(U.depthFunc(Ne),va.depth_func=Ne);Ke=bc[0];Sd=bc[1];if(Ke!==Ha[0]||Sd!==Ha[1])U.depthRange(Ke,Sd),Ha[0]=Ke,Ha[1]=Sd;ae=Ga.depth_mask;ae!==va.depth_mask&&(U.depthMask(ae),va.depth_mask=ae);de=Y[0];ge=Y[1];Oe=Y[2];Ld=Y[3];if(de!==
Kc[0]||ge!==Kc[1]||Oe!==Kc[2]||Ld!==Kc[3])U.colorMask(de,ge,Oe,Ld),Kc[0]=de,Kc[1]=ge,Kc[2]=Oe,Kc[3]=Ld;Yd=Ga.cull_enable;Yd!==va.cull_enable&&(Yd?U.enable(2884):U.disable(2884),va.cull_enable=Yd);He=Ga.cull_face;He!==va.cull_face&&(U.cullFace(He),va.cull_face=He);Pe=Ga.frontFace;Pe!==va.frontFace&&(U.frontFace(Pe),va.frontFace=Pe);df=Ga.lineWidth;df!==va.lineWidth&&(U.lineWidth(df),va.lineWidth=df);cf=Ga.polygonOffset_enable;cf!==va.polygonOffset_enable&&(cf?U.enable(32823):U.disable(32823),va.polygonOffset_enable=
cf);Xe=cc[0];Se=cc[1];if(Xe!==Sb[0]||Se!==Sb[1])U.polygonOffset(Xe,Se),Sb[0]=Xe,Sb[1]=Se;bf=Ga.sample_alpha;bf!==va.sample_alpha&&(bf?U.enable(32926):U.disable(32926),va.sample_alpha=bf);af=Ga.sample_enable;af!==va.sample_enable&&(af?U.enable(32928):U.disable(32928),va.sample_enable=af);Ye=ze[0];Ze=ze[1];if(Ye!==Id[0]||Ze!==Id[1])U.sampleCoverage(Ye,Ze),Id[0]=Ye,Id[1]=Ze;Zd=Ga.stencil_mask;Zd!==va.stencil_mask&&(U.stencilMask(Zd),va.stencil_mask=Zd);ce=De[0];$e=De[1];kf=De[2];if(ce!==Ae[0]||$e!==
Ae[1]||kf!==Ae[2])U.stencilFunc(ce,$e,kf),Ae[0]=ce,Ae[1]=$e,Ae[2]=kf;of=Dd[0];gf=Dd[1];lf=Dd[2];mf=Dd[3];if(of!==yd[0]||gf!==yd[1]||lf!==yd[2]||mf!==yd[3])U.stencilOpSeparate(of,gf,lf,mf),yd[0]=of,yd[1]=gf,yd[2]=lf,yd[3]=mf;nf=$d[0];sf=$d[1];pf=$d[2];tf=$d[3];if(nf!==re[0]||sf!==re[1]||pf!==re[2]||tf!==re[3])U.stencilOpSeparate(nf,sf,pf,tf),re[0]=nf,re[1]=sf,re[2]=pf,re[3]=tf}n=a.viewport;p=n.x|0;t=n.y|0;w="width"in n?n.width|0:sa.framebufferWidth-p;y="height"in n?n.height|0:sa.framebufferHeight-
t;C=sa.viewportWidth;sa.viewportWidth=w;x=sa.viewportHeight;sa.viewportHeight=y;U.viewport(p,t,w,y);Od[0]=p;Od[1]=t;Od[2]=w;Od[3]=y;U.blendColor(0,0,0,1);X[0]=0;X[1]=0;X[2]=0;X[3]=1;U.enable(3042);va.blend_enable=!0;U.blendFuncSeparate(770,771,773,1);fb[0]=770;fb[1]=771;fb[2]=773;fb[3]=1;U.disable(2929);va.depth_enable=!1;v=a.viewport;N=v.x|0;A=v.y|0;Ea="width"in v?v.width|0:sa.framebufferWidth-N;D="height"in v?v.height|0:sa.framebufferHeight-A;U.scissor(N,A,Ea,D);Td[0]=N;Td[1]=A;Td[2]=Ea;Td[3]=D;
U.enable(3089);va.scissor_enable=!0;U.disable(2960);va.stencil_enable=!1;if(I=va.profile)E=performance.now(),d.count++;U.useProgram(h.program);r=Gb.angle_instanced_arrays;Ca.setVAO(null);O=u.call(this,sa,a,0);H=!1;M=null;F=0;qa=!1;L=R=0;ja=1;Q=0;P=5126;S=aa=na=za=0;ya(O)?(H=!0,M=fa.createStream(34962,O),P=M.dtype):(M=fa.getBuffer(O))?P=M.dtype:"constant"in O?(ja=2,"number"===typeof O.constant?(na=O.constant,aa=S=za=0):(na=0<O.constant.length?O.constant[0]:0,aa=1<O.constant.length?O.constant[1]:0,
S=2<O.constant.length?O.constant[2]:0,za=3<O.constant.length?O.constant[3]:0)):(M=ya(O.buffer)?fa.createStream(34962,O.buffer):fa.getBuffer(O.buffer),P="type"in O?Bd[O.type]:M.dtype,qa=!!O.normalized,L=O.size|0,R=O.offset|0,Q=O.stride|0,F=O.divisor|0);V=Qa.location;ca=ia[V];if(1===ja){ca.buffer||U.enableVertexAttribArray(V);ga=L||1;if(ca.type!==P||ca.size!==ga||ca.buffer!==M||ca.normalized!==qa||ca.offset!==R||ca.stride!==Q)U.bindBuffer(34962,M.buffer),U.vertexAttribPointer(V,ga,P,qa,Q,R),ca.type=
P,ca.size=ga,ca.buffer=M,ca.normalized=qa,ca.offset=R,ca.stride=Q;ca.divisor!==F&&(r.vertexAttribDivisorANGLE(V,F),ca.divisor=F)}else if(ca.buffer&&(U.disableVertexAttribArray(V),ca.buffer=null),ca.x!==na||ca.y!==aa||ca.z!==S||ca.w!==za)U.vertexAttrib4f(V,na,aa,S,za),ca.x=na,ca.y=aa,ca.z=S,ca.w=za;ea=q.call(this,sa,a,0);G=!1;ma=null;Fa=0;ta=!1;Lb=cb=0;ab=1;jb=0;Wa=5126;sc=Hb=Mb=Jc=0;ya(ea)?(G=!0,ma=fa.createStream(34962,ea),Wa=ma.dtype):(ma=fa.getBuffer(ea))?Wa=ma.dtype:"constant"in ea?(ab=2,"number"===
typeof ea.constant?(Mb=ea.constant,Hb=sc=Jc=0):(Mb=0<ea.constant.length?ea.constant[0]:0,Hb=1<ea.constant.length?ea.constant[1]:0,sc=2<ea.constant.length?ea.constant[2]:0,Jc=3<ea.constant.length?ea.constant[3]:0)):(ma=ya(ea.buffer)?fa.createStream(34962,ea.buffer):fa.getBuffer(ea.buffer),Wa="type"in ea?Bd[ea.type]:ma.dtype,ta=!!ea.normalized,Lb=ea.size|0,cb=ea.offset|0,jb=ea.stride|0,Fa=ea.divisor|0);Nb=Zb.location;kb=ia[Nb];if(1===ab){kb.buffer||U.enableVertexAttribArray(Nb);Fb=Lb||1;if(kb.type!==
Wa||kb.size!==Fb||kb.buffer!==ma||kb.normalized!==ta||kb.offset!==cb||kb.stride!==jb)U.bindBuffer(34962,ma.buffer),U.vertexAttribPointer(Nb,Fb,Wa,ta,jb,cb),kb.type=Wa,kb.size=Fb,kb.buffer=ma,kb.normalized=ta,kb.offset=cb,kb.stride=jb;kb.divisor!==Fa&&(r.vertexAttribDivisorANGLE(Nb,Fa),kb.divisor=Fa)}else if(kb.buffer&&(U.disableVertexAttribArray(Nb),kb.buffer=null),kb.x!==Mb||kb.y!==Hb||kb.z!==sc||kb.w!==Jc)U.vertexAttrib4f(Nb,Mb,Hb,sc,Jc),kb.x=Mb,kb.y=Hb,kb.z=sc,kb.w=Jc;Cb=m.call(this,sa,a,0);xb=
!1;hb=null;$b=0;Ob=!1;Ta=qb=0;Ub=1;zb=0;jc=5126;sb=Ia=pb=ib=0;ya(Cb)?(xb=!0,hb=fa.createStream(34962,Cb),jc=hb.dtype):(hb=fa.getBuffer(Cb))?jc=hb.dtype:"constant"in Cb?(Ub=2,"number"===typeof Cb.constant?(pb=Cb.constant,Ia=sb=ib=0):(pb=0<Cb.constant.length?Cb.constant[0]:0,Ia=1<Cb.constant.length?Cb.constant[1]:0,sb=2<Cb.constant.length?Cb.constant[2]:0,ib=3<Cb.constant.length?Cb.constant[3]:0)):(hb=ya(Cb.buffer)?fa.createStream(34962,Cb.buffer):fa.getBuffer(Cb.buffer),jc="type"in Cb?Bd[Cb.type]:
hb.dtype,Ob=!!Cb.normalized,Ta=Cb.size|0,qb=Cb.offset|0,zb=Cb.stride|0,$b=Cb.divisor|0);La=Ja.location;eb=ia[La];if(1===Ub){eb.buffer||U.enableVertexAttribArray(La);gb=Ta||1;if(eb.type!==jc||eb.size!==gb||eb.buffer!==hb||eb.normalized!==Ob||eb.offset!==qb||eb.stride!==zb)U.bindBuffer(34962,hb.buffer),U.vertexAttribPointer(La,gb,jc,Ob,zb,qb),eb.type=jc,eb.size=gb,eb.buffer=hb,eb.normalized=Ob,eb.offset=qb,eb.stride=zb;eb.divisor!==$b&&(r.vertexAttribDivisorANGLE(La,$b),eb.divisor=$b)}else if(eb.buffer&&
(U.disableVertexAttribArray(La),eb.buffer=null),eb.x!==pb||eb.y!==Ia||eb.z!==sb||eb.w!==ib)U.vertexAttrib4f(La,pb,Ia,sb,ib),eb.x=pb,eb.y=Ia,eb.z=sb,eb.w=ib;Na=b.call(this,sa,a,0);lb=!1;Xa=null;ub=0;tb=!1;Dc=Pa=0;Va=1;Ib=0;Db=5126;Jb=Za=Ad=Ma=0;ya(Na)?(lb=!0,Xa=fa.createStream(34962,Na),Db=Xa.dtype):(Xa=fa.getBuffer(Na))?Db=Xa.dtype:"constant"in Na?(Va=2,"number"===typeof Na.constant?(Ad=Na.constant,Za=Jb=Ma=0):(Ad=0<Na.constant.length?Na.constant[0]:0,Za=1<Na.constant.length?Na.constant[1]:0,Jb=2<
Na.constant.length?Na.constant[2]:0,Ma=3<Na.constant.length?Na.constant[3]:0)):(Xa=ya(Na.buffer)?fa.createStream(34962,Na.buffer):fa.getBuffer(Na.buffer),Db="type"in Na?Bd[Na.type]:Xa.dtype,tb=!!Na.normalized,Dc=Na.size|0,Pa=Na.offset|0,Ib=Na.stride|0,ub=Na.divisor|0);Kb=Ua.location;mb=ia[Kb];if(1===Va){mb.buffer||U.enableVertexAttribArray(Kb);Oa=Dc||1;if(mb.type!==Db||mb.size!==Oa||mb.buffer!==Xa||mb.normalized!==tb||mb.offset!==Pa||mb.stride!==Ib)U.bindBuffer(34962,Xa.buffer),U.vertexAttribPointer(Kb,
Oa,Db,tb,Ib,Pa),mb.type=Db,mb.size=Oa,mb.buffer=Xa,mb.normalized=tb,mb.offset=Pa,mb.stride=Ib;mb.divisor!==ub&&(r.vertexAttribDivisorANGLE(Kb,ub),mb.divisor=ub)}else if(mb.buffer&&(U.disableVertexAttribArray(Kb),mb.buffer=null),mb.x!==Ad||mb.y!==Za||mb.z!==Jb||mb.w!==Ma)U.vertexAttrib4f(Kb,Ad,Za,Jb,Ma),mb.x=Ad,mb.y=Za,mb.z=Jb,mb.w=Ma;ac=f.call(this,sa,a,0);Ra=!1;vb=null;wb=0;Sa=!1;gc=nb=0;Bc=1;wc=0;bb=5126;nd=Ya=Mc=kc=0;ya(ac)?(Ra=!0,vb=fa.createStream(34962,ac),bb=vb.dtype):(vb=fa.getBuffer(ac))?
bb=vb.dtype:"constant"in ac?(Bc=2,"number"===typeof ac.constant?(Mc=ac.constant,Ya=nd=kc=0):(Mc=0<ac.constant.length?ac.constant[0]:0,Ya=1<ac.constant.length?ac.constant[1]:0,nd=2<ac.constant.length?ac.constant[2]:0,kc=3<ac.constant.length?ac.constant[3]:0)):(vb=ya(ac.buffer)?fa.createStream(34962,ac.buffer):fa.getBuffer(ac.buffer),bb="type"in ac?Bd[ac.type]:vb.dtype,Sa=!!ac.normalized,gc=ac.size|0,nb=ac.offset|0,wc=ac.stride|0,wb=ac.divisor|0);Ab=ka.location;$a=ia[Ab];if(1===Bc){$a.buffer||U.enableVertexAttribArray(Ab);
Wb=gc||1;if($a.type!==bb||$a.size!==Wb||$a.buffer!==vb||$a.normalized!==Sa||$a.offset!==nb||$a.stride!==wc)U.bindBuffer(34962,vb.buffer),U.vertexAttribPointer(Ab,Wb,bb,Sa,wc,nb),$a.type=bb,$a.size=Wb,$a.buffer=vb,$a.normalized=Sa,$a.offset=nb,$a.stride=wc;$a.divisor!==wb&&(r.vertexAttribDivisorANGLE(Ab,wb),$a.divisor=wb)}else if($a.buffer&&(U.disableVertexAttribArray(Ab),$a.buffer=null),$a.x!==Mc||$a.y!==Ya||$a.z!==nd||$a.w!==kc)U.vertexAttrib4f(Ab,Mc,Ya,nd,kc),$a.x=Mc,$a.y=Ya,$a.z=nd,$a.w=kc;uc=
c.call(this,sa,a,0);Xb=!1;Pb=null;Nc=0;Rb=!1;Fc=Qd=0;vd=1;Qc=0;Yc=5126;hc=xc=oc=sd=0;ya(uc)?(Xb=!0,Pb=fa.createStream(34962,uc),Yc=Pb.dtype):(Pb=fa.getBuffer(uc))?Yc=Pb.dtype:"constant"in uc?(vd=2,"number"===typeof uc.constant?(oc=uc.constant,xc=hc=sd=0):(oc=0<uc.constant.length?uc.constant[0]:0,xc=1<uc.constant.length?uc.constant[1]:0,hc=2<uc.constant.length?uc.constant[2]:0,sd=3<uc.constant.length?uc.constant[3]:0)):(Pb=ya(uc.buffer)?fa.createStream(34962,uc.buffer):fa.getBuffer(uc.buffer),Yc="type"in
uc?Bd[uc.type]:Pb.dtype,Rb=!!uc.normalized,Fc=uc.size|0,Qd=uc.offset|0,Qc=uc.stride|0,Nc=uc.divisor|0);db=pa.location;tc=ia[db];if(1===vd){tc.buffer||U.enableVertexAttribArray(db);Tb=Fc||1;if(tc.type!==Yc||tc.size!==Tb||tc.buffer!==Pb||tc.normalized!==Rb||tc.offset!==Qd||tc.stride!==Qc)U.bindBuffer(34962,Pb.buffer),U.vertexAttribPointer(db,Tb,Yc,Rb,Qc,Qd),tc.type=Yc,tc.size=Tb,tc.buffer=Pb,tc.normalized=Rb,tc.offset=Qd,tc.stride=Qc;tc.divisor!==Nc&&(r.vertexAttribDivisorANGLE(db,Nc),tc.divisor=Nc)}else if(tc.buffer&&
(U.disableVertexAttribArray(db),tc.buffer=null),tc.x!==oc||tc.y!==xc||tc.z!==hc||tc.w!==sd)U.vertexAttrib4f(db,oc,xc,hc,sd),tc.x=oc,tc.y=xc,tc.z=hc,tc.w=sd;Yb=k.call(this,sa,a,0);ec=!1;ic=null;zc=0;Cc=!1;Tc=dd=0;Uc=1;Vc=0;Zc=5126;lc=$c=ed=od=0;ya(Yb)?(ec=!0,ic=fa.createStream(34962,Yb),Zc=ic.dtype):(ic=fa.getBuffer(Yb))?Zc=ic.dtype:"constant"in Yb?(Uc=2,"number"===typeof Yb.constant?(ed=Yb.constant,$c=lc=od=0):(ed=0<Yb.constant.length?Yb.constant[0]:0,$c=1<Yb.constant.length?Yb.constant[1]:0,lc=2<
Yb.constant.length?Yb.constant[2]:0,od=3<Yb.constant.length?Yb.constant[3]:0)):(ic=ya(Yb.buffer)?fa.createStream(34962,Yb.buffer):fa.getBuffer(Yb.buffer),Zc="type"in Yb?Bd[Yb.type]:ic.dtype,Cc=!!Yb.normalized,Tc=Yb.size|0,dd=Yb.offset|0,Vc=Yb.stride|0,zc=Yb.divisor|0);dc=J.location;ad=ia[dc];if(1===Uc){ad.buffer||U.enableVertexAttribArray(dc);Xc=Tc||4;if(ad.type!==Zc||ad.size!==Xc||ad.buffer!==ic||ad.normalized!==Cc||ad.offset!==dd||ad.stride!==Vc)U.bindBuffer(34962,ic.buffer),U.vertexAttribPointer(dc,
Xc,Zc,Cc,Vc,dd),ad.type=Zc,ad.size=Xc,ad.buffer=ic,ad.normalized=Cc,ad.offset=dd,ad.stride=Vc;ad.divisor!==zc&&(r.vertexAttribDivisorANGLE(dc,zc),ad.divisor=zc)}else if(ad.buffer&&(U.disableVertexAttribArray(dc),ad.buffer=null),ad.x!==ed||ad.y!==$c||ad.z!==lc||ad.w!==od)U.vertexAttrib4f(dc,ed,$c,lc,od),ad.x=ed,ad.y=$c,ad.z=lc,ad.w=od;fd=z.call(this,sa,a,0);Ac=!1;jd=null;Cd=0;ye=!1;kd=oe=0;Fe=1;Fd=0;he=5126;Kd=Nd=Ud=ee=0;ya(fd)?(Ac=!0,jd=fa.createStream(34962,fd),he=jd.dtype):(jd=fa.getBuffer(fd))?
he=jd.dtype:"constant"in fd?(Fe=2,"number"===typeof fd.constant?(Ud=fd.constant,Nd=Kd=ee=0):(Ud=0<fd.constant.length?fd.constant[0]:0,Nd=1<fd.constant.length?fd.constant[1]:0,Kd=2<fd.constant.length?fd.constant[2]:0,ee=3<fd.constant.length?fd.constant[3]:0)):(jd=ya(fd.buffer)?fa.createStream(34962,fd.buffer):fa.getBuffer(fd.buffer),he="type"in fd?Bd[fd.type]:jd.dtype,ye=!!fd.normalized,kd=fd.size|0,oe=fd.offset|0,Fd=fd.stride|0,Cd=fd.divisor|0);qd=ra.location;Wc=ia[qd];if(1===Fe){Wc.buffer||U.enableVertexAttribArray(qd);
wd=kd||4;if(Wc.type!==he||Wc.size!==wd||Wc.buffer!==jd||Wc.normalized!==ye||Wc.offset!==oe||Wc.stride!==Fd)U.bindBuffer(34962,jd.buffer),U.vertexAttribPointer(qd,wd,he,ye,Fd,oe),Wc.type=he,Wc.size=wd,Wc.buffer=jd,Wc.normalized=ye,Wc.offset=oe,Wc.stride=Fd;Wc.divisor!==Cd&&(r.vertexAttribDivisorANGLE(qd,Cd),Wc.divisor=Cd)}else if(Wc.buffer&&(U.disableVertexAttribArray(qd),Wc.buffer=null),Wc.x!==Ud||Wc.y!==Nd||Wc.z!==Kd||Wc.w!==ee)U.vertexAttrib4f(qd,Ud,Nd,Kd,ee),Wc.x=Ud,Wc.y=Nd,Wc.z=Kd,Wc.w=ee;ud=
B.call(this,sa,a,0);ld=!1;xd=null;Gd=0;Hd=!1;me=je=0;ue=1;ne=0;ke=5126;pe=fe=ve=ie=0;ya(ud)?(ld=!0,xd=fa.createStream(34962,ud),ke=xd.dtype):(xd=fa.getBuffer(ud))?ke=xd.dtype:"constant"in ud?(ue=2,"number"===typeof ud.constant?(ve=ud.constant,fe=pe=ie=0):(ve=0<ud.constant.length?ud.constant[0]:0,fe=1<ud.constant.length?ud.constant[1]:0,pe=2<ud.constant.length?ud.constant[2]:0,ie=3<ud.constant.length?ud.constant[3]:0)):(xd=ya(ud.buffer)?fa.createStream(34962,ud.buffer):fa.getBuffer(ud.buffer),ke="type"in
ud?Bd[ud.type]:xd.dtype,Hd=!!ud.normalized,me=ud.size|0,je=ud.offset|0,ne=ud.stride|0,Gd=ud.divisor|0);Rc=ba.location;id=ia[Rc];if(1===ue){id.buffer||U.enableVertexAttribArray(Rc);we=me||1;if(id.type!==ke||id.size!==we||id.buffer!==xd||id.normalized!==Hd||id.offset!==je||id.stride!==ne)U.bindBuffer(34962,xd.buffer),U.vertexAttribPointer(Rc,we,ke,Hd,ne,je),id.type=ke,id.size=we,id.buffer=xd,id.normalized=Hd,id.offset=je,id.stride=ne;id.divisor!==Gd&&(r.vertexAttribDivisorANGLE(Rc,Gd),id.divisor=Gd)}else if(id.buffer&&
(U.disableVertexAttribArray(Rc),id.buffer=null),id.x!==ve||id.y!==fe||id.z!==pe||id.w!==ie)U.vertexAttrib4f(Rc,ve,fe,pe,ie),id.x=ve,id.y=fe,id.z=pe,id.w=ie;U.uniform1i(K.location,!1);U.uniform1f(wa.location,sa.pixelRatio);se=a.scale;U.uniform2f(da.location,se[0],se[1]);Rd=a.scaleFract;U.uniform2f(xa.location,Rd[0],Rd[1]);Vd=a.translate;U.uniform2f(oa.location,Vd[0],Vd[1]);Wd=a.translateFract;U.uniform2f(Aa.location,Wd[0],Wd[1]);Xd=e.call(this,sa,a,0);U.uniform2f(ha.location,Xd[0],Xd[1]);U.uniform1f(la.location,
a.opacity);U.uniform1i(Ba.location,l.bind());(qe=a.markerTexture)&&"framebuffer"===qe._reglType&&(qe=qe.color[0]);Ce=qe._texture;U.uniform1i(W.location,Ce.bind());Ge=a.elements;te=null;(te=(Ve=ya(Ge))?rb.createStream(Ge):rb.getElements(Ge))&&U.bindBuffer(34963,te.buffer.buffer);We=a.offset;if(Re=a.count)xe=Da.instances,0<xe?te?r.drawElementsInstancedANGLE(0,Re,te.type,We<<(te.type-5121>>1),xe):r.drawArraysInstancedANGLE(0,We,Re,xe):0>xe&&(te?U.drawElements(0,Re,te.type,We<<(te.type-5121>>1)):U.drawArrays(0,
We,Re)),va.dirty=!0,Ca.setVAO(null),sa.viewportWidth=C,sa.viewportHeight=x,I&&(d.cpuTime+=performance.now()-E),H&&fa.destroyStream(M),G&&fa.destroyStream(ma),xb&&fa.destroyStream(hb),lb&&fa.destroyStream(Xa),Ra&&fa.destroyStream(vb),Xb&&fa.destroyStream(Pb),ec&&fa.destroyStream(ic),Ac&&fa.destroyStream(jd),ld&&fa.destroyStream(xd),l.unbind(),Ce.unbind(),Ve&&rb.destroyStream(te)},scope:function(c,e,b){var a,l,k,f,m,u,h,B,z,q,J,N,ia,U,T,Ja,O,K,M,W,da,R,Z,Zb,L,Q,Qa,P,X,ba,ha,wa,Ca,ra,Y,S,ka,V,Ua,ea,
oa,G,xa,Aa,pa,la,ma,ua,Ba,Gb,Ha,ta,fb,Ka,Sb,bc,cc,Kc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Td,Va,Ib,Db,Ma,Id,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,Od,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,$d,Fc,yd,Qc,Yc,De,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,re,Ae,oe,kd,Dd,Fd,ze,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,
lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;a=c.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:sa.framebufferWidth-l;m="height"in a?a.height|0:sa.framebufferHeight-k;u=sa.viewportWidth;sa.viewportWidth=f;h=sa.viewportHeight;sa.viewportHeight=m;B=Qd[0];Qd[0]=l;z=Qd[1];Qd[1]=k;
q=Qd[2];Qd[2]=f;J=Qd[3];Qd[3]=m;N=ja[0];ja[0]=0;ia=ja[1];ja[1]=0;U=ja[2];ja[2]=0;T=ja[3];ja[3]=1;Ja=Ga.blend_enable;Ga.blend_enable=!0;O=Fa[0];Fa[0]=770;K=Fa[1];Fa[1]=771;M=Fa[2];Fa[2]=773;W=Fa[3];Fa[3]=1;da=Ga.depth_enable;Ga.depth_enable=!1;R=c.viewport;Z=R.x|0;Zb=R.y|0;L="width"in R?R.width|0:sa.framebufferWidth-Z;Q="height"in R?R.height|0:sa.framebufferHeight-Zb;Qa=Ad[0];Ad[0]=Z;P=Ad[1];Ad[1]=Zb;X=Ad[2];Ad[2]=L;ba=Ad[3];Ad[3]=Q;ha=Ga.scissor_enable;Ga.scissor_enable=!0;wa=Ga.stencil_enable;Ga.stencil_enable=
!1;if(Ca=va.profile)ra=performance.now(),d.count++;Y=c.elements;S=null;S=(ka=ya(Y))?rb.createStream(Y):rb.getElements(Y);V=Da.elements;Da.elements=S;Ua=c.offset;ea=Da.offset;Da.offset=Ua;oa=c.count;G=Da.count;Da.count=oa;xa=Da.primitive;Da.primitive=0;Aa=za[45];za[45]=!1;pa=c.markerTexture;la=za[48];za[48]=pa;ma=c.opacity;ua=za[10];za[10]=ma;Ba=g.call(this,sa,c,b);Gb=za[46];za[46]=Ba;Ha=za[47];za[47]=n;ta=sa.pixelRatio;fb=za[34];za[34]=ta;Ka=c.scale;Sb=za[6];za[6]=Ka;bc=c.scaleFract;cc=za[7];za[7]=
bc;Kc=c.translate;ib=za[8];za[8]=Kc;pb=c.translateFract;Ia=za[9];za[9]=pb;sb=p.call(this,sa,c,b);La=!1;eb=null;gb=0;Na=!1;Xa=lb=0;ub=1;tb=0;Pa=5126;Db=Ib=Va=Td=0;ya(sb)?(La=!0,eb=fa.createStream(34962,sb),Pa=eb.dtype):(eb=fa.getBuffer(sb))?Pa=eb.dtype:"constant"in sb?(ub=2,"number"===typeof sb.constant?(Va=sb.constant,Ib=Db=Td=0):(Va=0<sb.constant.length?sb.constant[0]:0,Ib=1<sb.constant.length?sb.constant[1]:0,Db=2<sb.constant.length?sb.constant[2]:0,Td=3<sb.constant.length?sb.constant[3]:0)):(eb=
ya(sb.buffer)?fa.createStream(34962,sb.buffer):fa.getBuffer(sb.buffer),Pa="type"in sb?Bd[sb.type]:eb.dtype,Na=!!sb.normalized,Xa=sb.size|0,lb=sb.offset|0,tb=sb.stride|0,gb=sb.divisor|0);Ma=w.buffer;w.buffer=eb;Id=w.divisor;w.divisor=gb;Za=w.normalized;w.normalized=Na;Jb=w.offset;w.offset=lb;Kb=w.size;w.size=Xa;mb=w.state;w.state=ub;Oa=w.stride;w.stride=tb;ac=w.type;w.type=Pa;Ra=w.w;w.w=Td;vb=w.x;w.x=Va;wb=w.y;w.y=Ib;Sa=w.z;w.z=Db;nb=y.call(this,sa,c,b);gc=!1;Bc=null;wc=0;bb=!1;Mc=kc=0;Ya=1;Od=0;Ab=
5126;Xb=uc=Wb=$a=0;ya(nb)?(gc=!0,Bc=fa.createStream(34962,nb),Ab=Bc.dtype):(Bc=fa.getBuffer(nb))?Ab=Bc.dtype:"constant"in nb?(Ya=2,"number"===typeof nb.constant?(Wb=nb.constant,uc=Xb=$a=0):(Wb=0<nb.constant.length?nb.constant[0]:0,uc=1<nb.constant.length?nb.constant[1]:0,Xb=2<nb.constant.length?nb.constant[2]:0,$a=3<nb.constant.length?nb.constant[3]:0)):(Bc=ya(nb.buffer)?fa.createStream(34962,nb.buffer):fa.getBuffer(nb.buffer),Ab="type"in nb?Bd[nb.type]:Bc.dtype,bb=!!nb.normalized,Mc=nb.size|0,kc=
nb.offset|0,Od=nb.stride|0,wc=nb.divisor|0);Pb=C.buffer;C.buffer=Bc;Nc=C.divisor;C.divisor=wc;Rb=C.normalized;C.normalized=bb;$d=C.offset;C.offset=kc;Fc=C.size;C.size=Mc;yd=C.state;C.state=Ya;Qc=C.stride;C.stride=Od;Yc=C.type;C.type=Ab;De=C.w;C.w=$a;oc=C.x;C.x=Wb;xc=C.y;C.y=uc;hc=C.z;C.z=Xb;db=Ea.call(this,sa,c,b);tc=!1;Tb=null;Yb=0;ec=!1;zc=ic=0;Cc=1;dd=0;Tc=5126;od=Zc=Vc=Uc=0;ya(db)?(tc=!0,Tb=fa.createStream(34962,db),Tc=Tb.dtype):(Tb=fa.getBuffer(db))?Tc=Tb.dtype:"constant"in db?(Cc=2,"number"===
typeof db.constant?(Vc=db.constant,Zc=od=Uc=0):(Vc=0<db.constant.length?db.constant[0]:0,Zc=1<db.constant.length?db.constant[1]:0,od=2<db.constant.length?db.constant[2]:0,Uc=3<db.constant.length?db.constant[3]:0)):(Tb=ya(db.buffer)?fa.createStream(34962,db.buffer):fa.getBuffer(db.buffer),Tc="type"in db?Bd[db.type]:Tb.dtype,ec=!!db.normalized,zc=db.size|0,ic=db.offset|0,dd=db.stride|0,Yb=db.divisor|0);ed=x.buffer;x.buffer=Tb;$c=x.divisor;x.divisor=Yb;lc=x.normalized;x.normalized=ec;dc=x.offset;x.offset=
ic;ad=x.size;x.size=zc;Xc=x.state;x.state=Cc;fd=x.stride;x.stride=dd;Ac=x.type;x.type=Tc;jd=x.w;x.w=Uc;re=x.x;x.x=Vc;Ae=x.y;x.y=Zc;oe=x.z;x.z=od;kd=v.call(this,sa,c,b);Dd=!1;Fd=null;ze=0;ee=!1;Nd=Ud=0;Kd=1;qd=0;Wc=5126;xd=ld=ud=wd=0;ya(kd)?(Dd=!0,Fd=fa.createStream(34962,kd),Wc=Fd.dtype):(Fd=fa.getBuffer(kd))?Wc=Fd.dtype:"constant"in kd?(Kd=2,"number"===typeof kd.constant?(ud=kd.constant,ld=xd=wd=0):(ud=0<kd.constant.length?kd.constant[0]:0,ld=1<kd.constant.length?kd.constant[1]:0,xd=2<kd.constant.length?
kd.constant[2]:0,wd=3<kd.constant.length?kd.constant[3]:0)):(Fd=ya(kd.buffer)?fa.createStream(34962,kd.buffer):fa.getBuffer(kd.buffer),Wc="type"in kd?Bd[kd.type]:Fd.dtype,ee=!!kd.normalized,Nd=kd.size|0,Ud=kd.offset|0,qd=kd.stride|0,ze=kd.divisor|0);Gd=r.buffer;r.buffer=Fd;Hd=r.divisor;r.divisor=ze;je=r.normalized;r.normalized=ee;me=r.offset;r.offset=Ud;ue=r.size;r.size=Nd;ne=r.state;r.state=Kd;ke=r.stride;r.stride=qd;ie=r.type;r.type=Wc;ve=r.w;r.w=wd;fe=r.x;r.x=ud;pe=r.y;r.y=ld;Rc=r.z;r.z=xd;id=
I.call(this,sa,c,b);we=!1;se=null;Rd=0;Vd=!1;Xd=Wd=0;qe=1;Ce=0;Ge=5126;Re=We=Ve=te=0;ya(id)?(we=!0,se=fa.createStream(34962,id),Ge=se.dtype):(se=fa.getBuffer(id))?Ge=se.dtype:"constant"in id?(qe=2,"number"===typeof id.constant?(Ve=id.constant,We=Re=te=0):(Ve=0<id.constant.length?id.constant[0]:0,We=1<id.constant.length?id.constant[1]:0,Re=2<id.constant.length?id.constant[2]:0,te=3<id.constant.length?id.constant[3]:0)):(se=ya(id.buffer)?fa.createStream(34962,id.buffer):fa.getBuffer(id.buffer),Ge="type"in
id?Bd[id.type]:se.dtype,Vd=!!id.normalized,Xd=id.size|0,Wd=id.offset|0,Ce=id.stride|0,Rd=id.divisor|0);xe=aa.buffer;aa.buffer=se;Je=aa.divisor;aa.divisor=Rd;Le=aa.normalized;aa.normalized=Vd;Me=aa.offset;aa.offset=Wd;Ne=aa.size;aa.size=Xd;Ke=aa.state;aa.state=qe;Sd=aa.stride;aa.stride=Ce;ae=aa.type;aa.type=Ge;de=aa.w;aa.w=te;ge=aa.x;aa.x=Ve;Oe=aa.y;aa.y=We;Ld=aa.z;aa.z=Re;Yd=E.call(this,sa,c,b);He=!1;Pe=null;df=0;cf=!1;Se=Xe=0;bf=1;af=0;Ye=5126;$e=ce=Zd=Ze=0;ya(Yd)?(He=!0,Pe=fa.createStream(34962,
Yd),Ye=Pe.dtype):(Pe=fa.getBuffer(Yd))?Ye=Pe.dtype:"constant"in Yd?(bf=2,"number"===typeof Yd.constant?(Zd=Yd.constant,ce=$e=Ze=0):(Zd=0<Yd.constant.length?Yd.constant[0]:0,ce=1<Yd.constant.length?Yd.constant[1]:0,$e=2<Yd.constant.length?Yd.constant[2]:0,Ze=3<Yd.constant.length?Yd.constant[3]:0)):(Pe=ya(Yd.buffer)?fa.createStream(34962,Yd.buffer):fa.getBuffer(Yd.buffer),Ye="type"in Yd?Bd[Yd.type]:Pe.dtype,cf=!!Yd.normalized,Se=Yd.size|0,Xe=Yd.offset|0,af=Yd.stride|0,df=Yd.divisor|0);kf=A.buffer;A.buffer=
Pe;of=A.divisor;A.divisor=df;gf=A.normalized;A.normalized=cf;lf=A.offset;A.offset=Xe;mf=A.size;A.size=Se;nf=A.state;A.state=bf;sf=A.stride;A.stride=af;pf=A.type;A.type=Ye;tf=A.w;A.w=Ze;Cf=A.x;A.x=Zd;Df=A.y;A.y=ce;Te=A.z;A.z=$e;Ie=ca.call(this,sa,c,b);qf=!1;rf=null;Ef=0;Hf=!1;Ff=Bf=0;Gf=1;xf=0;yf=5126;Jf=Af=zf=wf=0;ya(Ie)?(qf=!0,rf=fa.createStream(34962,Ie),yf=rf.dtype):(rf=fa.getBuffer(Ie))?yf=rf.dtype:"constant"in Ie?(Gf=2,"number"===typeof Ie.constant?(zf=Ie.constant,Af=Jf=wf=0):(zf=0<Ie.constant.length?
Ie.constant[0]:0,Af=1<Ie.constant.length?Ie.constant[1]:0,Jf=2<Ie.constant.length?Ie.constant[2]:0,wf=3<Ie.constant.length?Ie.constant[3]:0)):(rf=ya(Ie.buffer)?fa.createStream(34962,Ie.buffer):fa.getBuffer(Ie.buffer),yf="type"in Ie?Bd[Ie.type]:rf.dtype,Hf=!!Ie.normalized,Ff=Ie.size|0,Bf=Ie.offset|0,xf=Ie.stride|0,Ef=Ie.divisor|0);Kf=H.buffer;H.buffer=rf;Lf=H.divisor;H.divisor=Ef;Mf=H.normalized;H.normalized=Hf;uf=H.offset;H.offset=Bf;Rf=H.size;H.size=Ff;If=H.state;H.state=Gf;vf=H.stride;H.stride=
xf;dg=H.type;H.type=yf;Sf=H.w;H.w=wf;Tf=H.x;H.x=zf;qg=H.y;H.y=Af;hf=H.z;H.z=Jf;ef=F.call(this,sa,c,b);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ya(ef)?(Nf=!0,Of=fa.createStream(34962,ef),Uf=Of.dtype):(Of=fa.getBuffer(ef))?Uf=Of.dtype:"constant"in ef?(ig=2,"number"===typeof ef.constant?(Yf=ef.constant,Zf=jg=Xf=0):(Yf=0<ef.constant.length?ef.constant[0]:0,Zf=1<ef.constant.length?ef.constant[1]:0,jg=2<ef.constant.length?ef.constant[2]:0,Xf=3<ef.constant.length?ef.constant[3]:0)):
(Of=ya(ef.buffer)?fa.createStream(34962,ef.buffer):fa.getBuffer(ef.buffer),Uf="type"in ef?Bd[ef.type]:Of.dtype,fg=!!ef.normalized,hg=ef.size|0,gg=ef.offset|0,Wf=ef.stride|0,eg=ef.divisor|0);rg=D.buffer;D.buffer=Of;sg=D.divisor;D.divisor=eg;tg=D.normalized;D.normalized=fg;ug=D.offset;D.offset=gg;vg=D.size;D.size=hg;wg=D.state;D.state=ig;xg=D.stride;D.stride=Wf;yg=D.type;D.type=Uf;zg=D.w;D.w=Xf;Ag=D.x;D.x=Yf;Bg=D.y;D.y=Zf;jf=D.z;D.z=jg;ff=ga.call(this,sa,c,b);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=
0;Vf=5126;pg=cg=bg=ag=0;ya(ff)?(Pf=!0,Qf=fa.createStream(34962,ff),Vf=Qf.dtype):(Qf=fa.getBuffer(ff))?Vf=Qf.dtype:"constant"in ff?(og=2,"number"===typeof ff.constant?(bg=ff.constant,cg=pg=ag=0):(bg=0<ff.constant.length?ff.constant[0]:0,cg=1<ff.constant.length?ff.constant[1]:0,pg=2<ff.constant.length?ff.constant[2]:0,ag=3<ff.constant.length?ff.constant[3]:0)):(Qf=ya(ff.buffer)?fa.createStream(34962,ff.buffer):fa.getBuffer(ff.buffer),Vf="type"in ff?Bd[ff.type]:Qf.dtype,lg=!!ff.normalized,ng=ff.size|
0,mg=ff.offset|0,$f=ff.stride|0,kg=ff.divisor|0);Cg=t.buffer;t.buffer=Qf;Dg=t.divisor;t.divisor=kg;Eg=t.normalized;t.normalized=lg;Fg=t.offset;t.offset=mg;Gg=t.size;t.size=ng;Hg=t.state;t.state=og;Ig=t.stride;t.stride=$f;Jg=t.type;t.type=Vf;Kg=t.w;t.w=ag;Lg=t.x;t.x=bg;Mg=t.y;t.y=cg;Ng=t.z;t.z=pg;Og=qa.vert;qa.vert=44;Pg=qa.frag;qa.frag=43;va.dirty=!0;e(sa,c,b);sa.viewportWidth=u;sa.viewportHeight=h;Qd[0]=B;Qd[1]=z;Qd[2]=q;Qd[3]=J;ja[0]=N;ja[1]=ia;ja[2]=U;ja[3]=T;Ga.blend_enable=Ja;Fa[0]=O;Fa[1]=K;
Fa[2]=M;Fa[3]=W;Ga.depth_enable=da;Ad[0]=Qa;Ad[1]=P;Ad[2]=X;Ad[3]=ba;Ga.scissor_enable=ha;Ga.stencil_enable=wa;Ca&&(d.cpuTime+=performance.now()-ra);ka&&rb.destroyStream(S);Da.elements=V;Da.offset=ea;Da.count=G;Da.primitive=xa;za[45]=Aa;za[48]=la;za[10]=ua;za[46]=Gb;za[47]=Ha;za[34]=fb;za[6]=Sb;za[7]=cc;za[8]=ib;za[9]=Ia;La&&fa.destroyStream(eb);w.buffer=Ma;w.divisor=Id;w.normalized=Za;w.offset=Jb;w.size=Kb;w.state=mb;w.stride=Oa;w.type=ac;w.w=Ra;w.x=vb;w.y=wb;w.z=Sa;gc&&fa.destroyStream(Bc);C.buffer=
Pb;C.divisor=Nc;C.normalized=Rb;C.offset=$d;C.size=Fc;C.state=yd;C.stride=Qc;C.type=Yc;C.w=De;C.x=oc;C.y=xc;C.z=hc;tc&&fa.destroyStream(Tb);x.buffer=ed;x.divisor=$c;x.normalized=lc;x.offset=dc;x.size=ad;x.state=Xc;x.stride=fd;x.type=Ac;x.w=jd;x.x=re;x.y=Ae;x.z=oe;Dd&&fa.destroyStream(Fd);r.buffer=Gd;r.divisor=Hd;r.normalized=je;r.offset=me;r.size=ue;r.state=ne;r.stride=ke;r.type=ie;r.w=ve;r.x=fe;r.y=pe;r.z=Rc;we&&fa.destroyStream(se);aa.buffer=xe;aa.divisor=Je;aa.normalized=Le;aa.offset=Me;aa.size=
Ne;aa.state=Ke;aa.stride=Sd;aa.type=ae;aa.w=de;aa.x=ge;aa.y=Oe;aa.z=Ld;He&&fa.destroyStream(Pe);A.buffer=kf;A.divisor=of;A.normalized=gf;A.offset=lf;A.size=mf;A.state=nf;A.stride=sf;A.type=pf;A.w=tf;A.x=Cf;A.y=Df;A.z=Te;qf&&fa.destroyStream(rf);H.buffer=Kf;H.divisor=Lf;H.normalized=Mf;H.offset=uf;H.size=Rf;H.state=If;H.stride=vf;H.type=dg;H.w=Sf;H.x=Tf;H.y=qg;H.z=hf;Nf&&fa.destroyStream(Of);D.buffer=rg;D.divisor=sg;D.normalized=tg;D.offset=ug;D.size=vg;D.state=wg;D.stride=xg;D.type=yg;D.w=zg;D.x=
Ag;D.y=Bg;D.z=jf;Pf&&fa.destroyStream(Qf);t.buffer=Cg;t.divisor=Dg;t.normalized=Eg;t.offset=Fg;t.size=Gg;t.state=Hg;t.stride=Ig;t.type=Jg;t.w=Kg;t.x=Lg;t.y=Mg;t.z=Ng;qa.vert=Og;qa.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,Ea,x,v,r,I,aa,E,A,ca,H,F,D,ga,t,ea,L,G,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,
ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb){var Ua,ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca,ja,X,ua,Ka,Fa,fb,Y,Kc,bc,Ha,cc,Sb,ze,Id,Ad,Td,De,Ae,$d,re,Dd,yd,Qd,Od;Ua=a.attributes;ia=a.buffer;fa=a.context;sa=a.current;va=a.draw;Da=a.elements;rb=a.extensions;Gb=a.framebuffer;Z=a.gl;U=a.isBufferArgs;ya=a.next;Ga=a.shader;qa=a.uniforms;za=a.vao;Ca=ya.blend_color;ja=sa.blend_color;X=ya.blend_equation;ua=sa.blend_equation;Ka=ya.blend_func;Fa=sa.blend_func;fb=ya.colorMask;Y=sa.colorMask;Kc=ya.depth_range;bc=sa.depth_range;
Ha=ya.polygonOffset_offset;cc=sa.polygonOffset_offset;Sb=ya.sample_coverage;ze=sa.sample_coverage;Id=ya.scissor_box;Ad=sa.scissor_box;Td=ya.stencil_func;De=sa.stencil_func;Ae=ya.stencil_opBack;$d=sa.stencil_opBack;re=ya.stencil_opFront;Dd=sa.stencil_opFront;yd=ya.viewport;Qd=sa.viewport;Od={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(c,e){var b,a,l,k,f,g;b=Gb.next;b!==Gb.cur&&(b?Z.bindFramebuffer(36160,b.framebuffer):Z.bindFramebuffer(36160,
null),Gb.cur=b);if(sa.dirty){var n,p,t,w,y,m,u,h,C,x,B,v,z,q,T,A,r,Ea,D,I,E,Ga,H,F,qa,Ca,aa,na,ca,ga,Ka,Qb,cb,Lb;n=ya.dither;n!==sa.dither&&(n?Z.enable(3024):Z.disable(3024),sa.dither=n);p=X[0];t=X[1];if(p!==ua[0]||t!==ua[1])Z.blendEquationSeparate(p,t),ua[0]=p,ua[1]=t;w=ya.depth_func;w!==sa.depth_func&&(Z.depthFunc(w),sa.depth_func=w);y=Kc[0];m=Kc[1];if(y!==bc[0]||m!==bc[1])Z.depthRange(y,m),bc[0]=y,bc[1]=m;u=ya.depth_mask;u!==sa.depth_mask&&(Z.depthMask(u),sa.depth_mask=u);h=fb[0];C=fb[1];x=fb[2];
B=fb[3];if(h!==Y[0]||C!==Y[1]||x!==Y[2]||B!==Y[3])Z.colorMask(h,C,x,B),Y[0]=h,Y[1]=C,Y[2]=x,Y[3]=B;v=ya.cull_enable;v!==sa.cull_enable&&(v?Z.enable(2884):Z.disable(2884),sa.cull_enable=v);z=ya.cull_face;z!==sa.cull_face&&(Z.cullFace(z),sa.cull_face=z);q=ya.frontFace;q!==sa.frontFace&&(Z.frontFace(q),sa.frontFace=q);T=ya.lineWidth;T!==sa.lineWidth&&(Z.lineWidth(T),sa.lineWidth=T);A=ya.polygonOffset_enable;A!==sa.polygonOffset_enable&&(A?Z.enable(32823):Z.disable(32823),sa.polygonOffset_enable=A);r=
Ha[0];Ea=Ha[1];if(r!==cc[0]||Ea!==cc[1])Z.polygonOffset(r,Ea),cc[0]=r,cc[1]=Ea;D=ya.sample_alpha;D!==sa.sample_alpha&&(D?Z.enable(32926):Z.disable(32926),sa.sample_alpha=D);I=ya.sample_enable;I!==sa.sample_enable&&(I?Z.enable(32928):Z.disable(32928),sa.sample_enable=I);E=Sb[0];Ga=Sb[1];if(E!==ze[0]||Ga!==ze[1])Z.sampleCoverage(E,Ga),ze[0]=E,ze[1]=Ga;H=ya.stencil_mask;H!==sa.stencil_mask&&(Z.stencilMask(H),sa.stencil_mask=H);F=Td[0];qa=Td[1];Ca=Td[2];if(F!==De[0]||qa!==De[1]||Ca!==De[2])Z.stencilFunc(F,
qa,Ca),De[0]=F,De[1]=qa,De[2]=Ca;aa=re[0];na=re[1];ca=re[2];ga=re[3];if(aa!==Dd[0]||na!==Dd[1]||ca!==Dd[2]||ga!==Dd[3])Z.stencilOpSeparate(aa,na,ca,ga),Dd[0]=aa,Dd[1]=na,Dd[2]=ca,Dd[3]=ga;Ka=Ae[0];Qb=Ae[1];cb=Ae[2];Lb=Ae[3];if(Ka!==$d[0]||Qb!==$d[1]||cb!==$d[2]||Lb!==$d[3])Z.stencilOpSeparate(Ka,Qb,cb,Lb),$d[0]=Ka,$d[1]=Qb,$d[2]=cb,$d[3]=Lb}Z.blendColor(0,0,0,1);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=1;Z.enable(3042);sa.blend_enable=!0;Z.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=
1;Z.disable(2929);sa.depth_enable=!1;Z.enable(3089);sa.scissor_enable=!0;Z.disable(2960);sa.stencil_enable=!1;if(a=sa.profile)l=performance.now(),d.count+=e;Z.useProgram(ea.program);k=rb.angle_instanced_arrays;var ab;za.setVAO(null);Z.uniform1i(K.location,!1);Z.uniform1i(ha.location,P.bind());ab=va.instances;for(f=0;f<e;++f){g=c[f];var jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,Id,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,
Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,yd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf;jb=g.viewport;Wa=jb.x|0;Jc=jb.y|0;Mb="width"in jb?jb.width|0:fa.framebufferWidth-
Wa;Hb="height"in jb?jb.height|0:fa.framebufferHeight-Jc;sc=fa.viewportWidth;fa.viewportWidth=Mb;Nb=fa.viewportHeight;fa.viewportHeight=Hb;Z.viewport(Wa,Jc,Mb,Hb);Qd[0]=Wa;Qd[1]=Jc;Qd[2]=Mb;Qd[3]=Hb;kb=g.viewport;Fb=kb.x|0;Cb=kb.y|0;xb="width"in kb?kb.width|0:fa.framebufferWidth-Fb;hb="height"in kb?kb.height|0:fa.framebufferHeight-Cb;Z.scissor(Fb,Cb,xb,hb);Ad[0]=Fb;Ad[1]=Cb;Ad[2]=xb;Ad[3]=hb;$b=L.call(this,fa,g,f);Ob=!1;qb=null;Ta=0;Ub=!1;jc=zb=0;ib=1;pb=0;Ia=5126;gb=eb=La=sb=0;U($b)?(Ob=!0,qb=ia.createStream(34962,
$b),Ia=qb.dtype):(qb=ia.getBuffer($b))?Ia=qb.dtype:"constant"in $b?(ib=2,"number"===typeof $b.constant?(La=$b.constant,eb=gb=sb=0):(La=0<$b.constant.length?$b.constant[0]:0,eb=1<$b.constant.length?$b.constant[1]:0,gb=2<$b.constant.length?$b.constant[2]:0,sb=3<$b.constant.length?$b.constant[3]:0)):(qb=U($b.buffer)?ia.createStream(34962,$b.buffer):ia.getBuffer($b.buffer),Ia="type"in $b?Od[$b.type]:qb.dtype,Ub=!!$b.normalized,jc=$b.size|0,zb=$b.offset|0,pb=$b.stride|0,Ta=$b.divisor|0);Na=Aa.location;
lb=Ua[Na];if(1===ib){lb.buffer||Z.enableVertexAttribArray(Na);Xa=jc||1;if(lb.type!==Ia||lb.size!==Xa||lb.buffer!==qb||lb.normalized!==Ub||lb.offset!==zb||lb.stride!==pb)Z.bindBuffer(34962,qb.buffer),Z.vertexAttribPointer(Na,Xa,Ia,Ub,pb,zb),lb.type=Ia,lb.size=Xa,lb.buffer=qb,lb.normalized=Ub,lb.offset=zb,lb.stride=pb;lb.divisor!==Ta&&(k.vertexAttribDivisorANGLE(Na,Ta),lb.divisor=Ta)}else if(lb.buffer&&(Z.disableVertexAttribArray(Na),lb.buffer=null),lb.x!==La||lb.y!==eb||lb.z!==gb||lb.w!==sb)Z.vertexAttrib4f(Na,
La,eb,gb,sb),lb.x=La,lb.y=eb,lb.z=gb,lb.w=sb;ub=G.call(this,fa,g,f);tb=!1;Pa=null;Dc=0;Va=!1;Db=Ib=0;Ma=1;Id=0;Za=5126;Oa=mb=Kb=Jb=0;U(ub)?(tb=!0,Pa=ia.createStream(34962,ub),Za=Pa.dtype):(Pa=ia.getBuffer(ub))?Za=Pa.dtype:"constant"in ub?(Ma=2,"number"===typeof ub.constant?(Kb=ub.constant,mb=Oa=Jb=0):(Kb=0<ub.constant.length?ub.constant[0]:0,mb=1<ub.constant.length?ub.constant[1]:0,Oa=2<ub.constant.length?ub.constant[2]:0,Jb=3<ub.constant.length?ub.constant[3]:0)):(Pa=U(ub.buffer)?ia.createStream(34962,
ub.buffer):ia.getBuffer(ub.buffer),Za="type"in ub?Od[ub.type]:Pa.dtype,Va=!!ub.normalized,Db=ub.size|0,Ib=ub.offset|0,Id=ub.stride|0,Dc=ub.divisor|0);ac=Ja.location;Ra=Ua[ac];if(1===Ma){Ra.buffer||Z.enableVertexAttribArray(ac);vb=Db||1;if(Ra.type!==Za||Ra.size!==vb||Ra.buffer!==Pa||Ra.normalized!==Va||Ra.offset!==Ib||Ra.stride!==Id)Z.bindBuffer(34962,Pa.buffer),Z.vertexAttribPointer(ac,vb,Za,Va,Id,Ib),Ra.type=Za,Ra.size=vb,Ra.buffer=Pa,Ra.normalized=Va,Ra.offset=Ib,Ra.stride=Id;Ra.divisor!==Dc&&(k.vertexAttribDivisorANGLE(ac,
Dc),Ra.divisor=Dc)}else if(Ra.buffer&&(Z.disableVertexAttribArray(ac),Ra.buffer=null),Ra.x!==Kb||Ra.y!==mb||Ra.z!==Oa||Ra.w!==Jb)Z.vertexAttrib4f(ac,Kb,mb,Oa,Jb),Ra.x=Kb,Ra.y=mb,Ra.z=Oa,Ra.w=Jb;wb=ta.call(this,fa,g,f);Sa=!1;nb=null;gc=0;Bc=!1;bb=wc=0;kc=1;Mc=0;Ya=5126;Wb=$a=Ab=nd=0;U(wb)?(Sa=!0,nb=ia.createStream(34962,wb),Ya=nb.dtype):(nb=ia.getBuffer(wb))?Ya=nb.dtype:"constant"in wb?(kc=2,"number"===typeof wb.constant?(Ab=wb.constant,$a=Wb=nd=0):(Ab=0<wb.constant.length?wb.constant[0]:0,$a=1<wb.constant.length?
wb.constant[1]:0,Wb=2<wb.constant.length?wb.constant[2]:0,nd=3<wb.constant.length?wb.constant[3]:0)):(nb=U(wb.buffer)?ia.createStream(34962,wb.buffer):ia.getBuffer(wb.buffer),Ya="type"in wb?Od[wb.type]:nb.dtype,Bc=!!wb.normalized,bb=wb.size|0,wc=wb.offset|0,Mc=wb.stride|0,gc=wb.divisor|0);uc=Qa.location;Xb=Ua[uc];if(1===kc){Xb.buffer||Z.enableVertexAttribArray(uc);Pb=bb||1;if(Xb.type!==Ya||Xb.size!==Pb||Xb.buffer!==nb||Xb.normalized!==Bc||Xb.offset!==wc||Xb.stride!==Mc)Z.bindBuffer(34962,nb.buffer),
Z.vertexAttribPointer(uc,Pb,Ya,Bc,Mc,wc),Xb.type=Ya,Xb.size=Pb,Xb.buffer=nb,Xb.normalized=Bc,Xb.offset=wc,Xb.stride=Mc;Xb.divisor!==gc&&(k.vertexAttribDivisorANGLE(uc,gc),Xb.divisor=gc)}else if(Xb.buffer&&(Z.disableVertexAttribArray(uc),Xb.buffer=null),Xb.x!==Ab||Xb.y!==$a||Xb.z!==Wb||Xb.w!==nd)Z.vertexAttrib4f(uc,Ab,$a,Wb,nd),Xb.x=Ab,Xb.y=$a,Xb.z=Wb,Xb.w=nd;Nc=S.call(this,fa,g,f);Rb=!1;yd=null;Fc=0;vd=!1;Yc=Qc=0;sd=1;oc=0;xc=5126;Tb=tc=db=hc=0;U(Nc)?(Rb=!0,yd=ia.createStream(34962,Nc),xc=yd.dtype):
(yd=ia.getBuffer(Nc))?xc=yd.dtype:"constant"in Nc?(sd=2,"number"===typeof Nc.constant?(db=Nc.constant,tc=Tb=hc=0):(db=0<Nc.constant.length?Nc.constant[0]:0,tc=1<Nc.constant.length?Nc.constant[1]:0,Tb=2<Nc.constant.length?Nc.constant[2]:0,hc=3<Nc.constant.length?Nc.constant[3]:0)):(yd=U(Nc.buffer)?ia.createStream(34962,Nc.buffer):ia.getBuffer(Nc.buffer),xc="type"in Nc?Od[Nc.type]:yd.dtype,vd=!!Nc.normalized,Yc=Nc.size|0,Qc=Nc.offset|0,oc=Nc.stride|0,Fc=Nc.divisor|0);Yb=Zb.location;ec=Ua[Yb];if(1===
sd){ec.buffer||Z.enableVertexAttribArray(Yb);ic=Yc||1;if(ec.type!==xc||ec.size!==ic||ec.buffer!==yd||ec.normalized!==vd||ec.offset!==Qc||ec.stride!==oc)Z.bindBuffer(34962,yd.buffer),Z.vertexAttribPointer(Yb,ic,xc,vd,oc,Qc),ec.type=xc,ec.size=ic,ec.buffer=yd,ec.normalized=vd,ec.offset=Qc,ec.stride=oc;ec.divisor!==Fc&&(k.vertexAttribDivisorANGLE(Yb,Fc),ec.divisor=Fc)}else if(ec.buffer&&(Z.disableVertexAttribArray(Yb),ec.buffer=null),ec.x!==db||ec.y!==tc||ec.z!==Tb||ec.w!==hc)Z.vertexAttrib4f(Yb,db,
tc,Tb,hc),ec.x=db,ec.y=tc,ec.z=Tb,ec.w=hc;zc=V.call(this,fa,g,f);Cc=!1;dd=null;Tc=0;Uc=!1;Zc=Vc=0;od=1;ed=0;$c=5126;Xc=ad=dc=lc=0;U(zc)?(Cc=!0,dd=ia.createStream(34962,zc),$c=dd.dtype):(dd=ia.getBuffer(zc))?$c=dd.dtype:"constant"in zc?(od=2,"number"===typeof zc.constant?(dc=zc.constant,ad=Xc=lc=0):(dc=0<zc.constant.length?zc.constant[0]:0,ad=1<zc.constant.length?zc.constant[1]:0,Xc=2<zc.constant.length?zc.constant[2]:0,lc=3<zc.constant.length?zc.constant[3]:0)):(dd=U(zc.buffer)?ia.createStream(34962,
zc.buffer):ia.getBuffer(zc.buffer),$c="type"in zc?Od[zc.type]:dd.dtype,Uc=!!zc.normalized,Zc=zc.size|0,Vc=zc.offset|0,ed=zc.stride|0,Tc=zc.divisor|0);fd=xa.location;Ac=Ua[fd];if(1===od){Ac.buffer||Z.enableVertexAttribArray(fd);jd=Zc||1;if(Ac.type!==$c||Ac.size!==jd||Ac.buffer!==dd||Ac.normalized!==Uc||Ac.offset!==Vc||Ac.stride!==ed)Z.bindBuffer(34962,dd.buffer),Z.vertexAttribPointer(fd,jd,$c,Uc,ed,Vc),Ac.type=$c,Ac.size=jd,Ac.buffer=dd,Ac.normalized=Uc,Ac.offset=Vc,Ac.stride=ed;Ac.divisor!==Tc&&(k.vertexAttribDivisorANGLE(fd,
Tc),Ac.divisor=Tc)}else if(Ac.buffer&&(Z.disableVertexAttribArray(fd),Ac.buffer=null),Ac.x!==dc||Ac.y!==ad||Ac.z!==Xc||Ac.w!==lc)Z.vertexAttrib4f(fd,dc,ad,Xc,lc),Ac.x=dc,Ac.y=ad,Ac.z=Xc,Ac.w=lc;Cd=R.call(this,fa,g,f);ye=!1;oe=null;kd=0;Fe=!1;he=Fd=0;ee=1;Ud=0;Nd=5126;wd=Wc=qd=Kd=0;U(Cd)?(ye=!0,oe=ia.createStream(34962,Cd),Nd=oe.dtype):(oe=ia.getBuffer(Cd))?Nd=oe.dtype:"constant"in Cd?(ee=2,"number"===typeof Cd.constant?(qd=Cd.constant,Wc=wd=Kd=0):(qd=0<Cd.constant.length?Cd.constant[0]:0,Wc=1<Cd.constant.length?
Cd.constant[1]:0,wd=2<Cd.constant.length?Cd.constant[2]:0,Kd=3<Cd.constant.length?Cd.constant[3]:0)):(oe=U(Cd.buffer)?ia.createStream(34962,Cd.buffer):ia.getBuffer(Cd.buffer),Nd="type"in Cd?Od[Cd.type]:oe.dtype,Fe=!!Cd.normalized,he=Cd.size|0,Fd=Cd.offset|0,Ud=Cd.stride|0,kd=Cd.divisor|0);ud=pa.location;ld=Ua[ud];if(1===ee){ld.buffer||Z.enableVertexAttribArray(ud);xd=he||1;if(ld.type!==Nd||ld.size!==xd||ld.buffer!==oe||ld.normalized!==Fe||ld.offset!==Fd||ld.stride!==Ud)Z.bindBuffer(34962,oe.buffer),
Z.vertexAttribPointer(ud,xd,Nd,Fe,Ud,Fd),ld.type=Nd,ld.size=xd,ld.buffer=oe,ld.normalized=Fe,ld.offset=Fd,ld.stride=Ud;ld.divisor!==kd&&(k.vertexAttribDivisorANGLE(ud,kd),ld.divisor=kd)}else if(ld.buffer&&(Z.disableVertexAttribArray(ud),ld.buffer=null),ld.x!==qd||ld.y!==Wc||ld.z!==wd||ld.w!==Kd)Z.vertexAttrib4f(ud,qd,Wc,wd,Kd),ld.x=qd,ld.y=Wc,ld.z=wd,ld.w=Kd;Gd=O.call(this,fa,g,f);Hd=!1;je=null;me=0;ue=!1;ke=ne=0;ie=1;ve=0;fe=5126;we=id=Rc=pe=0;U(Gd)?(Hd=!0,je=ia.createStream(34962,Gd),fe=je.dtype):
(je=ia.getBuffer(Gd))?fe=je.dtype:"constant"in Gd?(ie=2,"number"===typeof Gd.constant?(Rc=Gd.constant,id=we=pe=0):(Rc=0<Gd.constant.length?Gd.constant[0]:0,id=1<Gd.constant.length?Gd.constant[1]:0,we=2<Gd.constant.length?Gd.constant[2]:0,pe=3<Gd.constant.length?Gd.constant[3]:0)):(je=U(Gd.buffer)?ia.createStream(34962,Gd.buffer):ia.getBuffer(Gd.buffer),fe="type"in Gd?Od[Gd.type]:je.dtype,ue=!!Gd.normalized,ke=Gd.size|0,ne=Gd.offset|0,ve=Gd.stride|0,me=Gd.divisor|0);se=J.location;Rd=Ua[se];if(1===
ie){Rd.buffer||Z.enableVertexAttribArray(se);Vd=ke||4;if(Rd.type!==fe||Rd.size!==Vd||Rd.buffer!==je||Rd.normalized!==ue||Rd.offset!==ne||Rd.stride!==ve)Z.bindBuffer(34962,je.buffer),Z.vertexAttribPointer(se,Vd,fe,ue,ve,ne),Rd.type=fe,Rd.size=Vd,Rd.buffer=je,Rd.normalized=ue,Rd.offset=ne,Rd.stride=ve;Rd.divisor!==me&&(k.vertexAttribDivisorANGLE(se,me),Rd.divisor=me)}else if(Rd.buffer&&(Z.disableVertexAttribArray(se),Rd.buffer=null),Rd.x!==Rc||Rd.y!==id||Rd.z!==we||Rd.w!==pe)Z.vertexAttrib4f(se,Rc,
id,we,pe),Rd.x=Rc,Rd.y=id,Rd.z=we,Rd.w=pe;Wd=M.call(this,fa,g,f);Xd=!1;qe=null;Ce=0;Ge=!1;Ve=te=0;We=1;Re=0;xe=5126;Ne=Me=Le=Je=0;U(Wd)?(Xd=!0,qe=ia.createStream(34962,Wd),xe=qe.dtype):(qe=ia.getBuffer(Wd))?xe=qe.dtype:"constant"in Wd?(We=2,"number"===typeof Wd.constant?(Le=Wd.constant,Me=Ne=Je=0):(Le=0<Wd.constant.length?Wd.constant[0]:0,Me=1<Wd.constant.length?Wd.constant[1]:0,Ne=2<Wd.constant.length?Wd.constant[2]:0,Je=3<Wd.constant.length?Wd.constant[3]:0)):(qe=U(Wd.buffer)?ia.createStream(34962,
Wd.buffer):ia.getBuffer(Wd.buffer),xe="type"in Wd?Od[Wd.type]:qe.dtype,Ge=!!Wd.normalized,Ve=Wd.size|0,te=Wd.offset|0,Re=Wd.stride|0,Ce=Wd.divisor|0);Ke=ra.location;Sd=Ua[Ke];if(1===We){Sd.buffer||Z.enableVertexAttribArray(Ke);ae=Ve||4;if(Sd.type!==xe||Sd.size!==ae||Sd.buffer!==qe||Sd.normalized!==Ge||Sd.offset!==te||Sd.stride!==Re)Z.bindBuffer(34962,qe.buffer),Z.vertexAttribPointer(Ke,ae,xe,Ge,Re,te),Sd.type=xe,Sd.size=ae,Sd.buffer=qe,Sd.normalized=Ge,Sd.offset=te,Sd.stride=Re;Sd.divisor!==Ce&&(k.vertexAttribDivisorANGLE(Ke,
Ce),Sd.divisor=Ce)}else if(Sd.buffer&&(Z.disableVertexAttribArray(Ke),Sd.buffer=null),Sd.x!==Le||Sd.y!==Me||Sd.z!==Ne||Sd.w!==Je)Z.vertexAttrib4f(Ke,Le,Me,Ne,Je),Sd.x=Le,Sd.y=Me,Sd.z=Ne,Sd.w=Je;de=N.call(this,fa,g,f);ge=!1;Oe=null;Ld=0;Yd=!1;Pe=He=0;df=1;cf=0;Xe=5126;Ye=af=bf=Se=0;U(de)?(ge=!0,Oe=ia.createStream(34962,de),Xe=Oe.dtype):(Oe=ia.getBuffer(de))?Xe=Oe.dtype:"constant"in de?(df=2,"number"===typeof de.constant?(bf=de.constant,af=Ye=Se=0):(bf=0<de.constant.length?de.constant[0]:0,af=1<de.constant.length?
de.constant[1]:0,Ye=2<de.constant.length?de.constant[2]:0,Se=3<de.constant.length?de.constant[3]:0)):(Oe=U(de.buffer)?ia.createStream(34962,de.buffer):ia.getBuffer(de.buffer),Xe="type"in de?Od[de.type]:Oe.dtype,Yd=!!de.normalized,Pe=de.size|0,He=de.offset|0,cf=de.stride|0,Ld=de.divisor|0);Ze=ba.location;Zd=Ua[Ze];if(1===df){Zd.buffer||Z.enableVertexAttribArray(Ze);ce=Pe||1;if(Zd.type!==Xe||Zd.size!==ce||Zd.buffer!==Oe||Zd.normalized!==Yd||Zd.offset!==He||Zd.stride!==cf)Z.bindBuffer(34962,Oe.buffer),
Z.vertexAttribPointer(Ze,ce,Xe,Yd,cf,He),Zd.type=Xe,Zd.size=ce,Zd.buffer=Oe,Zd.normalized=Yd,Zd.offset=He,Zd.stride=cf;Zd.divisor!==Ld&&(k.vertexAttribDivisorANGLE(Ze,Ld),Zd.divisor=Ld)}else if(Zd.buffer&&(Z.disableVertexAttribArray(Ze),Zd.buffer=null),Zd.x!==bf||Zd.y!==af||Zd.z!==Ye||Zd.w!==Se)Z.vertexAttrib4f(Ze,bf,af,Ye,Se),Zd.x=bf,Zd.y=af,Zd.z=Ye,Zd.w=Se;$e=fa.pixelRatio;f&&kf===$e||(kf=$e,Z.uniform1f(Ba.location,$e));of=Q.call(this,fa,g,f);gf=of[0];mf=of[1];f&&lf===gf&&nf===mf||(lf=gf,nf=mf,
Z.uniform2f(la.location,gf,mf));sf=g.scale;pf=sf[0];Cf=sf[1];f&&tf===pf&&Df===Cf||(tf=pf,Df=Cf,Z.uniform2f(wa.location,pf,Cf));Te=g.scaleFract;Ie=Te[0];rf=Te[1];f&&qf===Ie&&Ef===rf||(qf=Ie,Ef=rf,Z.uniform2f(da.location,Ie,rf));Hf=g.translate;Bf=Hf[0];Gf=Hf[1];f&&Ff===Bf&&xf===Gf||(Ff=Bf,xf=Gf,Z.uniform2f(ka.location,Bf,Gf));yf=g.translateFract;wf=yf[0];Af=yf[1];f&&zf===wf&&Jf===Af||(zf=wf,Jf=Af,Z.uniform2f(oa.location,wf,Af));Kf=g.opacity;f&&Lf===Kf||(Lf=Kf,Z.uniform1f(W.location,Kf));Mf=g.elements;
uf=null;(uf=(Rf=U(Mf))?Da.createStream(Mf):Da.getElements(Mf))&&Z.bindBuffer(34963,uf.buffer.buffer);If=g.offset;if(vf=g.count)0<ab?uf?k.drawElementsInstancedANGLE(0,vf,uf.type,If<<(uf.type-5121>>1),ab):k.drawArraysInstancedANGLE(0,If,vf,ab):0>ab&&(uf?Z.drawElements(0,vf,uf.type,If<<(uf.type-5121>>1)):Z.drawArrays(0,If,vf)),fa.viewportWidth=sc,fa.viewportHeight=Nb,Ob&&ia.destroyStream(qb),tb&&ia.destroyStream(Pa),Sa&&ia.destroyStream(nb),Rb&&ia.destroyStream(yd),Cc&&ia.destroyStream(dd),ye&&ia.destroyStream(oe),
Hd&&ia.destroyStream(je),Xd&&ia.destroyStream(qe),ge&&ia.destroyStream(Oe),Rf&&Da.destroyStream(uf)}P.unbind();sa.dirty=!0;za.setVAO(null);a&&(d.cpuTime+=performance.now()-l)},draw:function(a){var g,n,p,t,w,y,C,x,v,N,A,r,Ea,D,I,E,O,Ga,M,H,F,qa,R,L,Q,P,Ca,aa,S,na,ca,V,ea,ga,G,ma,ta,Ka,Qb,cb,Lb,ab,jb,Wa,Id,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,yd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,
Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd,ye,oe,kd,Fe,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve;g=Gb.next;g!==Gb.cur&&(g?Z.bindFramebuffer(36160,g.framebuffer):Z.bindFramebuffer(36160,null),Gb.cur=g);if(sa.dirty){var We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf;We=ya.dither;We!==sa.dither&&(We?Z.enable(3024):Z.disable(3024),sa.dither=
We);Re=X[0];xe=X[1];if(Re!==ua[0]||xe!==ua[1])Z.blendEquationSeparate(Re,xe),ua[0]=Re,ua[1]=xe;Je=ya.depth_func;Je!==sa.depth_func&&(Z.depthFunc(Je),sa.depth_func=Je);Le=Kc[0];Me=Kc[1];if(Le!==bc[0]||Me!==bc[1])Z.depthRange(Le,Me),bc[0]=Le,bc[1]=Me;Ne=ya.depth_mask;Ne!==sa.depth_mask&&(Z.depthMask(Ne),sa.depth_mask=Ne);Ke=fb[0];Sd=fb[1];ae=fb[2];de=fb[3];if(Ke!==Y[0]||Sd!==Y[1]||ae!==Y[2]||de!==Y[3])Z.colorMask(Ke,Sd,ae,de),Y[0]=Ke,Y[1]=Sd,Y[2]=ae,Y[3]=de;ge=ya.cull_enable;ge!==sa.cull_enable&&(ge?
Z.enable(2884):Z.disable(2884),sa.cull_enable=ge);Oe=ya.cull_face;Oe!==sa.cull_face&&(Z.cullFace(Oe),sa.cull_face=Oe);Ld=ya.frontFace;Ld!==sa.frontFace&&(Z.frontFace(Ld),sa.frontFace=Ld);Yd=ya.lineWidth;Yd!==sa.lineWidth&&(Z.lineWidth(Yd),sa.lineWidth=Yd);He=ya.polygonOffset_enable;He!==sa.polygonOffset_enable&&(He?Z.enable(32823):Z.disable(32823),sa.polygonOffset_enable=He);Pe=Ha[0];df=Ha[1];if(Pe!==cc[0]||df!==cc[1])Z.polygonOffset(Pe,df),cc[0]=Pe,cc[1]=df;cf=ya.sample_alpha;cf!==sa.sample_alpha&&
(cf?Z.enable(32926):Z.disable(32926),sa.sample_alpha=cf);Xe=ya.sample_enable;Xe!==sa.sample_enable&&(Xe?Z.enable(32928):Z.disable(32928),sa.sample_enable=Xe);Se=Sb[0];bf=Sb[1];if(Se!==ze[0]||bf!==ze[1])Z.sampleCoverage(Se,bf),ze[0]=Se,ze[1]=bf;af=ya.stencil_mask;af!==sa.stencil_mask&&(Z.stencilMask(af),sa.stencil_mask=af);Ye=Td[0];Ze=Td[1];Zd=Td[2];if(Ye!==De[0]||Ze!==De[1]||Zd!==De[2])Z.stencilFunc(Ye,Ze,Zd),De[0]=Ye,De[1]=Ze,De[2]=Zd;ce=re[0];$e=re[1];kf=re[2];of=re[3];if(ce!==Dd[0]||$e!==Dd[1]||
kf!==Dd[2]||of!==Dd[3])Z.stencilOpSeparate(ce,$e,kf,of),Dd[0]=ce,Dd[1]=$e,Dd[2]=kf,Dd[3]=of;gf=Ae[0];lf=Ae[1];mf=Ae[2];nf=Ae[3];if(gf!==$d[0]||lf!==$d[1]||mf!==$d[2]||nf!==$d[3])Z.stencilOpSeparate(gf,lf,mf,nf),$d[0]=gf,$d[1]=lf,$d[2]=mf,$d[3]=nf}n=a.viewport;p=n.x|0;t=n.y|0;w="width"in n?n.width|0:fa.framebufferWidth-p;y="height"in n?n.height|0:fa.framebufferHeight-t;C=fa.viewportWidth;fa.viewportWidth=w;x=fa.viewportHeight;fa.viewportHeight=y;Z.viewport(p,t,w,y);Qd[0]=p;Qd[1]=t;Qd[2]=w;Qd[3]=y;
Z.blendColor(0,0,0,1);ja[0]=0;ja[1]=0;ja[2]=0;ja[3]=1;Z.enable(3042);sa.blend_enable=!0;Z.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;Z.disable(2929);sa.depth_enable=!1;v=a.viewport;N=v.x|0;A=v.y|0;r="width"in v?v.width|0:fa.framebufferWidth-N;Ea="height"in v?v.height|0:fa.framebufferHeight-A;Z.scissor(N,A,r,Ea);Ad[0]=N;Ad[1]=A;Ad[2]=r;Ad[3]=Ea;Z.enable(3089);sa.scissor_enable=!0;Z.disable(2960);sa.stencil_enable=!1;if(D=sa.profile)I=performance.now(),d.count++;Z.useProgram(h.program);
E=rb.angle_instanced_arrays;za.setVAO(null);O=u.call(this,fa,a,0);Ga=!1;M=null;H=0;F=!1;R=qa=0;L=1;Q=0;P=5126;na=S=aa=Ca=0;U(O)?(Ga=!0,M=ia.createStream(34962,O),P=M.dtype):(M=ia.getBuffer(O))?P=M.dtype:"constant"in O?(L=2,"number"===typeof O.constant?(aa=O.constant,S=na=Ca=0):(aa=0<O.constant.length?O.constant[0]:0,S=1<O.constant.length?O.constant[1]:0,na=2<O.constant.length?O.constant[2]:0,Ca=3<O.constant.length?O.constant[3]:0)):(M=U(O.buffer)?ia.createStream(34962,O.buffer):ia.getBuffer(O.buffer),
P="type"in O?Od[O.type]:M.dtype,F=!!O.normalized,R=O.size|0,qa=O.offset|0,Q=O.stride|0,H=O.divisor|0);ca=Aa.location;V=Ua[ca];if(1===L){V.buffer||Z.enableVertexAttribArray(ca);ea=R||1;if(V.type!==P||V.size!==ea||V.buffer!==M||V.normalized!==F||V.offset!==qa||V.stride!==Q)Z.bindBuffer(34962,M.buffer),Z.vertexAttribPointer(ca,ea,P,F,Q,qa),V.type=P,V.size=ea,V.buffer=M,V.normalized=F,V.offset=qa,V.stride=Q;V.divisor!==H&&(E.vertexAttribDivisorANGLE(ca,H),V.divisor=H)}else if(V.buffer&&(Z.disableVertexAttribArray(ca),
V.buffer=null),V.x!==aa||V.y!==S||V.z!==na||V.w!==Ca)Z.vertexAttrib4f(ca,aa,S,na,Ca),V.x=aa,V.y=S,V.z=na,V.w=Ca;ga=q.call(this,fa,a,0);G=!1;ma=null;ta=0;Ka=!1;cb=Qb=0;Lb=1;ab=0;jb=5126;Hb=Mb=Id=Wa=0;U(ga)?(G=!0,ma=ia.createStream(34962,ga),jb=ma.dtype):(ma=ia.getBuffer(ga))?jb=ma.dtype:"constant"in ga?(Lb=2,"number"===typeof ga.constant?(Id=ga.constant,Mb=Hb=Wa=0):(Id=0<ga.constant.length?ga.constant[0]:0,Mb=1<ga.constant.length?ga.constant[1]:0,Hb=2<ga.constant.length?ga.constant[2]:0,Wa=3<ga.constant.length?
ga.constant[3]:0)):(ma=U(ga.buffer)?ia.createStream(34962,ga.buffer):ia.getBuffer(ga.buffer),jb="type"in ga?Od[ga.type]:ma.dtype,Ka=!!ga.normalized,cb=ga.size|0,Qb=ga.offset|0,ab=ga.stride|0,ta=ga.divisor|0);sc=Ja.location;Nb=Ua[sc];if(1===Lb){Nb.buffer||Z.enableVertexAttribArray(sc);kb=cb||1;if(Nb.type!==jb||Nb.size!==kb||Nb.buffer!==ma||Nb.normalized!==Ka||Nb.offset!==Qb||Nb.stride!==ab)Z.bindBuffer(34962,ma.buffer),Z.vertexAttribPointer(sc,kb,jb,Ka,ab,Qb),Nb.type=jb,Nb.size=kb,Nb.buffer=ma,Nb.normalized=
Ka,Nb.offset=Qb,Nb.stride=ab;Nb.divisor!==ta&&(E.vertexAttribDivisorANGLE(sc,ta),Nb.divisor=ta)}else if(Nb.buffer&&(Z.disableVertexAttribArray(sc),Nb.buffer=null),Nb.x!==Id||Nb.y!==Mb||Nb.z!==Hb||Nb.w!==Wa)Z.vertexAttrib4f(sc,Id,Mb,Hb,Wa),Nb.x=Id,Nb.y=Mb,Nb.z=Hb,Nb.w=Wa;Fb=m.call(this,fa,a,0);Cb=!1;xb=null;hb=0;$b=!1;qb=Ob=0;Ta=1;Ub=0;zb=5126;Ia=pb=ib=jc=0;U(Fb)?(Cb=!0,xb=ia.createStream(34962,Fb),zb=xb.dtype):(xb=ia.getBuffer(Fb))?zb=xb.dtype:"constant"in Fb?(Ta=2,"number"===typeof Fb.constant?(ib=
Fb.constant,pb=Ia=jc=0):(ib=0<Fb.constant.length?Fb.constant[0]:0,pb=1<Fb.constant.length?Fb.constant[1]:0,Ia=2<Fb.constant.length?Fb.constant[2]:0,jc=3<Fb.constant.length?Fb.constant[3]:0)):(xb=U(Fb.buffer)?ia.createStream(34962,Fb.buffer):ia.getBuffer(Fb.buffer),zb="type"in Fb?Od[Fb.type]:xb.dtype,$b=!!Fb.normalized,qb=Fb.size|0,Ob=Fb.offset|0,Ub=Fb.stride|0,hb=Fb.divisor|0);sb=Qa.location;La=Ua[sb];if(1===Ta){La.buffer||Z.enableVertexAttribArray(sb);eb=qb||1;if(La.type!==zb||La.size!==eb||La.buffer!==
xb||La.normalized!==$b||La.offset!==Ob||La.stride!==Ub)Z.bindBuffer(34962,xb.buffer),Z.vertexAttribPointer(sb,eb,zb,$b,Ub,Ob),La.type=zb,La.size=eb,La.buffer=xb,La.normalized=$b,La.offset=Ob,La.stride=Ub;La.divisor!==hb&&(E.vertexAttribDivisorANGLE(sb,hb),La.divisor=hb)}else if(La.buffer&&(Z.disableVertexAttribArray(sb),La.buffer=null),La.x!==ib||La.y!==pb||La.z!==Ia||La.w!==jc)Z.vertexAttrib4f(sb,ib,pb,Ia,jc),La.x=ib,La.y=pb,La.z=Ia,La.w=jc;gb=b.call(this,fa,a,0);Na=!1;lb=null;Xa=0;ub=!1;Pa=tb=0;
Dc=1;Va=0;Ib=5126;Za=yd=Ma=Db=0;U(gb)?(Na=!0,lb=ia.createStream(34962,gb),Ib=lb.dtype):(lb=ia.getBuffer(gb))?Ib=lb.dtype:"constant"in gb?(Dc=2,"number"===typeof gb.constant?(Ma=gb.constant,yd=Za=Db=0):(Ma=0<gb.constant.length?gb.constant[0]:0,yd=1<gb.constant.length?gb.constant[1]:0,Za=2<gb.constant.length?gb.constant[2]:0,Db=3<gb.constant.length?gb.constant[3]:0)):(lb=U(gb.buffer)?ia.createStream(34962,gb.buffer):ia.getBuffer(gb.buffer),Ib="type"in gb?Od[gb.type]:lb.dtype,ub=!!gb.normalized,Pa=gb.size|
0,tb=gb.offset|0,Va=gb.stride|0,Xa=gb.divisor|0);Jb=Zb.location;Kb=Ua[Jb];if(1===Dc){Kb.buffer||Z.enableVertexAttribArray(Jb);mb=Pa||1;if(Kb.type!==Ib||Kb.size!==mb||Kb.buffer!==lb||Kb.normalized!==ub||Kb.offset!==tb||Kb.stride!==Va)Z.bindBuffer(34962,lb.buffer),Z.vertexAttribPointer(Jb,mb,Ib,ub,Va,tb),Kb.type=Ib,Kb.size=mb,Kb.buffer=lb,Kb.normalized=ub,Kb.offset=tb,Kb.stride=Va;Kb.divisor!==Xa&&(E.vertexAttribDivisorANGLE(Jb,Xa),Kb.divisor=Xa)}else if(Kb.buffer&&(Z.disableVertexAttribArray(Jb),Kb.buffer=
null),Kb.x!==Ma||Kb.y!==yd||Kb.z!==Za||Kb.w!==Db)Z.vertexAttrib4f(Jb,Ma,yd,Za,Db),Kb.x=Ma,Kb.y=yd,Kb.z=Za,Kb.w=Db;Oa=f.call(this,fa,a,0);ac=!1;Ra=null;vb=0;wb=!1;nb=Sa=0;gc=1;Bc=0;wc=5126;Ya=Mc=kc=bb=0;U(Oa)?(ac=!0,Ra=ia.createStream(34962,Oa),wc=Ra.dtype):(Ra=ia.getBuffer(Oa))?wc=Ra.dtype:"constant"in Oa?(gc=2,"number"===typeof Oa.constant?(kc=Oa.constant,Mc=Ya=bb=0):(kc=0<Oa.constant.length?Oa.constant[0]:0,Mc=1<Oa.constant.length?Oa.constant[1]:0,Ya=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?
Oa.constant[3]:0)):(Ra=U(Oa.buffer)?ia.createStream(34962,Oa.buffer):ia.getBuffer(Oa.buffer),wc="type"in Oa?Od[Oa.type]:Ra.dtype,wb=!!Oa.normalized,nb=Oa.size|0,Sa=Oa.offset|0,Bc=Oa.stride|0,vb=Oa.divisor|0);nd=xa.location;Ab=Ua[nd];if(1===gc){Ab.buffer||Z.enableVertexAttribArray(nd);$a=nb||1;if(Ab.type!==wc||Ab.size!==$a||Ab.buffer!==Ra||Ab.normalized!==wb||Ab.offset!==Sa||Ab.stride!==Bc)Z.bindBuffer(34962,Ra.buffer),Z.vertexAttribPointer(nd,$a,wc,wb,Bc,Sa),Ab.type=wc,Ab.size=$a,Ab.buffer=Ra,Ab.normalized=
wb,Ab.offset=Sa,Ab.stride=Bc;Ab.divisor!==vb&&(E.vertexAttribDivisorANGLE(nd,vb),Ab.divisor=vb)}else if(Ab.buffer&&(Z.disableVertexAttribArray(nd),Ab.buffer=null),Ab.x!==kc||Ab.y!==Mc||Ab.z!==Ya||Ab.w!==bb)Z.vertexAttrib4f(nd,kc,Mc,Ya,bb),Ab.x=kc,Ab.y=Mc,Ab.z=Ya,Ab.w=bb;Wb=c.call(this,fa,a,0);uc=!1;Xb=null;Pb=0;Nc=!1;Pd=Rb=0;Fc=1;vd=0;Qc=5126;xc=oc=sd=Yc=0;U(Wb)?(uc=!0,Xb=ia.createStream(34962,Wb),Qc=Xb.dtype):(Xb=ia.getBuffer(Wb))?Qc=Xb.dtype:"constant"in Wb?(Fc=2,"number"===typeof Wb.constant?(sd=
Wb.constant,oc=xc=Yc=0):(sd=0<Wb.constant.length?Wb.constant[0]:0,oc=1<Wb.constant.length?Wb.constant[1]:0,xc=2<Wb.constant.length?Wb.constant[2]:0,Yc=3<Wb.constant.length?Wb.constant[3]:0)):(Xb=U(Wb.buffer)?ia.createStream(34962,Wb.buffer):ia.getBuffer(Wb.buffer),Qc="type"in Wb?Od[Wb.type]:Xb.dtype,Nc=!!Wb.normalized,Pd=Wb.size|0,Rb=Wb.offset|0,vd=Wb.stride|0,Pb=Wb.divisor|0);hc=pa.location;db=Ua[hc];if(1===Fc){db.buffer||Z.enableVertexAttribArray(hc);tc=Pd||1;if(db.type!==Qc||db.size!==tc||db.buffer!==
Xb||db.normalized!==Nc||db.offset!==Rb||db.stride!==vd)Z.bindBuffer(34962,Xb.buffer),Z.vertexAttribPointer(hc,tc,Qc,Nc,vd,Rb),db.type=Qc,db.size=tc,db.buffer=Xb,db.normalized=Nc,db.offset=Rb,db.stride=vd;db.divisor!==Pb&&(E.vertexAttribDivisorANGLE(hc,Pb),db.divisor=Pb)}else if(db.buffer&&(Z.disableVertexAttribArray(hc),db.buffer=null),db.x!==sd||db.y!==oc||db.z!==xc||db.w!==Yc)Z.vertexAttrib4f(hc,sd,oc,xc,Yc),db.x=sd,db.y=oc,db.z=xc,db.w=Yc;Tb=k.call(this,fa,a,0);Yb=!1;ec=null;ic=0;zc=!1;dd=Cc=0;
Tc=1;Uc=0;Vc=5126;$c=ed=od=Zc=0;U(Tb)?(Yb=!0,ec=ia.createStream(34962,Tb),Vc=ec.dtype):(ec=ia.getBuffer(Tb))?Vc=ec.dtype:"constant"in Tb?(Tc=2,"number"===typeof Tb.constant?(od=Tb.constant,ed=$c=Zc=0):(od=0<Tb.constant.length?Tb.constant[0]:0,ed=1<Tb.constant.length?Tb.constant[1]:0,$c=2<Tb.constant.length?Tb.constant[2]:0,Zc=3<Tb.constant.length?Tb.constant[3]:0)):(ec=U(Tb.buffer)?ia.createStream(34962,Tb.buffer):ia.getBuffer(Tb.buffer),Vc="type"in Tb?Od[Tb.type]:ec.dtype,zc=!!Tb.normalized,dd=Tb.size|
0,Cc=Tb.offset|0,Uc=Tb.stride|0,ic=Tb.divisor|0);lc=J.location;dc=Ua[lc];if(1===Tc){dc.buffer||Z.enableVertexAttribArray(lc);ad=dd||4;if(dc.type!==Vc||dc.size!==ad||dc.buffer!==ec||dc.normalized!==zc||dc.offset!==Cc||dc.stride!==Uc)Z.bindBuffer(34962,ec.buffer),Z.vertexAttribPointer(lc,ad,Vc,zc,Uc,Cc),dc.type=Vc,dc.size=ad,dc.buffer=ec,dc.normalized=zc,dc.offset=Cc,dc.stride=Uc;dc.divisor!==ic&&(E.vertexAttribDivisorANGLE(lc,ic),dc.divisor=ic)}else if(dc.buffer&&(Z.disableVertexAttribArray(lc),dc.buffer=
null),dc.x!==od||dc.y!==ed||dc.z!==$c||dc.w!==Zc)Z.vertexAttrib4f(lc,od,ed,$c,Zc),dc.x=od,dc.y=ed,dc.z=$c,dc.w=Zc;Xc=z.call(this,fa,a,0);fd=!1;Ac=null;jd=0;Cd=!1;oe=ye=0;kd=1;Fe=0;Fd=5126;Nd=Ud=ee=he=0;U(Xc)?(fd=!0,Ac=ia.createStream(34962,Xc),Fd=Ac.dtype):(Ac=ia.getBuffer(Xc))?Fd=Ac.dtype:"constant"in Xc?(kd=2,"number"===typeof Xc.constant?(ee=Xc.constant,Ud=Nd=he=0):(ee=0<Xc.constant.length?Xc.constant[0]:0,Ud=1<Xc.constant.length?Xc.constant[1]:0,Nd=2<Xc.constant.length?Xc.constant[2]:0,he=3<Xc.constant.length?
Xc.constant[3]:0)):(Ac=U(Xc.buffer)?ia.createStream(34962,Xc.buffer):ia.getBuffer(Xc.buffer),Fd="type"in Xc?Od[Xc.type]:Ac.dtype,Cd=!!Xc.normalized,oe=Xc.size|0,ye=Xc.offset|0,Fe=Xc.stride|0,jd=Xc.divisor|0);Kd=ra.location;qd=Ua[Kd];if(1===kd){qd.buffer||Z.enableVertexAttribArray(Kd);Wc=oe||4;if(qd.type!==Fd||qd.size!==Wc||qd.buffer!==Ac||qd.normalized!==Cd||qd.offset!==ye||qd.stride!==Fe)Z.bindBuffer(34962,Ac.buffer),Z.vertexAttribPointer(Kd,Wc,Fd,Cd,Fe,ye),qd.type=Fd,qd.size=Wc,qd.buffer=Ac,qd.normalized=
Cd,qd.offset=ye,qd.stride=Fe;qd.divisor!==jd&&(E.vertexAttribDivisorANGLE(Kd,jd),qd.divisor=jd)}else if(qd.buffer&&(Z.disableVertexAttribArray(Kd),qd.buffer=null),qd.x!==ee||qd.y!==Ud||qd.z!==Nd||qd.w!==he)Z.vertexAttrib4f(Kd,ee,Ud,Nd,he),qd.x=ee,qd.y=Ud,qd.z=Nd,qd.w=he;wd=B.call(this,fa,a,0);ud=!1;ld=null;xd=0;Gd=!1;je=Hd=0;me=1;ue=0;ne=5126;fe=ve=ie=ke=0;U(wd)?(ud=!0,ld=ia.createStream(34962,wd),ne=ld.dtype):(ld=ia.getBuffer(wd))?ne=ld.dtype:"constant"in wd?(me=2,"number"===typeof wd.constant?(ie=
wd.constant,ve=fe=ke=0):(ie=0<wd.constant.length?wd.constant[0]:0,ve=1<wd.constant.length?wd.constant[1]:0,fe=2<wd.constant.length?wd.constant[2]:0,ke=3<wd.constant.length?wd.constant[3]:0)):(ld=U(wd.buffer)?ia.createStream(34962,wd.buffer):ia.getBuffer(wd.buffer),ne="type"in wd?Od[wd.type]:ld.dtype,Gd=!!wd.normalized,je=wd.size|0,Hd=wd.offset|0,ue=wd.stride|0,xd=wd.divisor|0);pe=ba.location;Rc=Ua[pe];if(1===me){Rc.buffer||Z.enableVertexAttribArray(pe);id=je||1;if(Rc.type!==ne||Rc.size!==id||Rc.buffer!==
ld||Rc.normalized!==Gd||Rc.offset!==Hd||Rc.stride!==ue)Z.bindBuffer(34962,ld.buffer),Z.vertexAttribPointer(pe,id,ne,Gd,ue,Hd),Rc.type=ne,Rc.size=id,Rc.buffer=ld,Rc.normalized=Gd,Rc.offset=Hd,Rc.stride=ue;Rc.divisor!==xd&&(E.vertexAttribDivisorANGLE(pe,xd),Rc.divisor=xd)}else if(Rc.buffer&&(Z.disableVertexAttribArray(pe),Rc.buffer=null),Rc.x!==ie||Rc.y!==ve||Rc.z!==fe||Rc.w!==ke)Z.vertexAttrib4f(pe,ie,ve,fe,ke),Rc.x=ie,Rc.y=ve,Rc.z=fe,Rc.w=ke;Z.uniform1i(K.location,!1);Z.uniform1f(Ba.location,fa.pixelRatio);
we=e.call(this,fa,a,0);Z.uniform2f(la.location,we[0],we[1]);se=a.scale;Z.uniform2f(wa.location,se[0],se[1]);Rd=a.scaleFract;Z.uniform2f(da.location,Rd[0],Rd[1]);Vd=a.translate;Z.uniform2f(ka.location,Vd[0],Vd[1]);Wd=a.translateFract;Z.uniform2f(oa.location,Wd[0],Wd[1]);Z.uniform1f(W.location,a.opacity);Z.uniform1i(ha.location,l.bind());Xd=a.elements;qe=null;(qe=(Ce=U(Xd))?Da.createStream(Xd):Da.getElements(Xd))&&Z.bindBuffer(34963,qe.buffer.buffer);Ge=a.offset;if(te=a.count)Ve=va.instances,0<Ve?qe?
E.drawElementsInstancedANGLE(0,te,qe.type,Ge<<(qe.type-5121>>1),Ve):E.drawArraysInstancedANGLE(0,Ge,te,Ve):0>Ve&&(qe?Z.drawElements(0,te,qe.type,Ge<<(qe.type-5121>>1)):Z.drawArrays(0,Ge,te)),sa.dirty=!0,za.setVAO(null),fa.viewportWidth=C,fa.viewportHeight=x,D&&(d.cpuTime+=performance.now()-I),Ga&&ia.destroyStream(M),G&&ia.destroyStream(ma),Cb&&ia.destroyStream(xb),Na&&ia.destroyStream(lb),ac&&ia.destroyStream(Ra),uc&&ia.destroyStream(Xb),Yb&&ia.destroyStream(ec),fd&&ia.destroyStream(Ac),ud&&ia.destroyStream(ld),
l.unbind(),Ce&&Da.destroyStream(qe)},scope:function(c,e,b){var a,l,k,f,m,u,h,B,z,q,J,N,T,O,Ja,K,M,W,R,da,Z,L,Zb,Q,ja,Qa,P,X,ba,za,ha,wa,ra,S,Y,V,ka,Ua,ea,oa,G,xa,Aa,pa,la,ma,ua,Ba,Gb,ta,Ha,Fa,fb,rb,Sb,Ta,bc,cc,Kc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Td,Va,Ib,Db,Ma,Ad,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,Qd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,$d,Fc,De,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,re,Ae,Dd,kd,ze,Fd,he,ee,Ud,Nd,Kd,qd,Wc,wd,ud,ld,xd,Gd,
Hd,je,me,ue,ne,ke,ie,ve,fe,pe,Rc,id,we,se,Rd,Vd,Wd,Xd,qe,Ce,Ge,te,Ve,We,Re,xe,Je,Le,Me,Ne,Ke,Sd,ae,de,ge,Oe,Ld,Yd,He,Pe,df,cf,Xe,Se,bf,af,Ye,Ze,Zd,ce,$e,kf,of,gf,lf,mf,nf,sf,pf,tf,Cf,Df,Te,Ie,qf,rf,Ef,Hf,Bf,Ff,Gf,xf,yf,wf,zf,Af,Jf,Kf,Lf,Mf,uf,Rf,If,vf,dg,Sf,Tf,qg,hf,ef,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,jf,ff,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;a=c.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:fa.framebufferWidth-l;
m="height"in a?a.height|0:fa.framebufferHeight-k;u=fa.viewportWidth;fa.viewportWidth=f;h=fa.viewportHeight;fa.viewportHeight=m;B=yd[0];yd[0]=l;z=yd[1];yd[1]=k;q=yd[2];yd[2]=f;J=yd[3];yd[3]=m;N=Ca[0];Ca[0]=0;T=Ca[1];Ca[1]=0;O=Ca[2];Ca[2]=0;Ja=Ca[3];Ca[3]=1;K=ya.blend_enable;ya.blend_enable=!0;M=Ka[0];Ka[0]=770;W=Ka[1];Ka[1]=771;R=Ka[2];Ka[2]=773;da=Ka[3];Ka[3]=1;Z=ya.depth_enable;ya.depth_enable=!1;L=c.viewport;Zb=L.x|0;Q=L.y|0;ja="width"in L?L.width|0:fa.framebufferWidth-Zb;Qa="height"in L?L.height|
0:fa.framebufferHeight-Q;P=Id[0];Id[0]=Zb;X=Id[1];Id[1]=Q;ba=Id[2];Id[2]=ja;za=Id[3];Id[3]=Qa;ha=ya.scissor_enable;ya.scissor_enable=!0;wa=ya.stencil_enable;ya.stencil_enable=!1;if(ra=sa.profile)S=performance.now(),d.count++;Y=c.elements;V=null;V=(ka=U(Y))?Da.createStream(Y):Da.getElements(Y);Ua=va.elements;va.elements=V;ea=c.offset;oa=va.offset;va.offset=ea;G=c.count;xa=va.count;va.count=G;Aa=va.primitive;va.primitive=0;pa=qa[45];qa[45]=!1;la=c.markerTexture;ma=qa[48];qa[48]=la;ua=c.opacity;Ba=qa[10];
qa[10]=ua;Gb=g.call(this,fa,c,b);ta=qa[46];qa[46]=Gb;Ha=qa[47];qa[47]=n;Fa=fa.pixelRatio;fb=qa[34];qa[34]=Fa;rb=c.scale;Sb=qa[6];qa[6]=rb;Ta=c.scaleFract;bc=qa[7];qa[7]=Ta;cc=c.translate;Kc=qa[8];qa[8]=cc;ib=c.translateFract;pb=qa[9];qa[9]=ib;Ia=p.call(this,fa,c,b);sb=!1;La=null;eb=0;gb=!1;lb=Na=0;Xa=1;ub=0;tb=5126;Ib=Va=Td=Pa=0;U(Ia)?(sb=!0,La=ia.createStream(34962,Ia),tb=La.dtype):(La=ia.getBuffer(Ia))?tb=La.dtype:"constant"in Ia?(Xa=2,"number"===typeof Ia.constant?(Td=Ia.constant,Va=Ib=Pa=0):(Td=
0<Ia.constant.length?Ia.constant[0]:0,Va=1<Ia.constant.length?Ia.constant[1]:0,Ib=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(La=U(Ia.buffer)?ia.createStream(34962,Ia.buffer):ia.getBuffer(Ia.buffer),tb="type"in Ia?Od[Ia.type]:La.dtype,gb=!!Ia.normalized,lb=Ia.size|0,Na=Ia.offset|0,ub=Ia.stride|0,eb=Ia.divisor|0);Db=w.buffer;w.buffer=La;Ma=w.divisor;w.divisor=eb;Ad=w.normalized;w.normalized=gb;Za=w.offset;w.offset=Na;Jb=w.size;w.size=lb;Kb=w.state;w.state=Xa;mb=
w.stride;w.stride=ub;Oa=w.type;w.type=tb;ac=w.w;w.w=Pa;Ra=w.x;w.x=Td;vb=w.y;w.y=Va;wb=w.z;w.z=Ib;Sa=y.call(this,fa,c,b);nb=!1;gc=null;Bc=0;wc=!1;kc=bb=0;Mc=1;Ya=0;Qd=5126;uc=Wb=$a=Ab=0;U(Sa)?(nb=!0,gc=ia.createStream(34962,Sa),Qd=gc.dtype):(gc=ia.getBuffer(Sa))?Qd=gc.dtype:"constant"in Sa?(Mc=2,"number"===typeof Sa.constant?($a=Sa.constant,Wb=uc=Ab=0):($a=0<Sa.constant.length?Sa.constant[0]:0,Wb=1<Sa.constant.length?Sa.constant[1]:0,uc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?
Sa.constant[3]:0)):(gc=U(Sa.buffer)?ia.createStream(34962,Sa.buffer):ia.getBuffer(Sa.buffer),Qd="type"in Sa?Od[Sa.type]:gc.dtype,wc=!!Sa.normalized,kc=Sa.size|0,bb=Sa.offset|0,Ya=Sa.stride|0,Bc=Sa.divisor|0);Xb=C.buffer;C.buffer=gc;Pb=C.divisor;C.divisor=Bc;Nc=C.normalized;C.normalized=wc;Rb=C.offset;C.offset=bb;$d=C.size;C.size=kc;Fc=C.state;C.state=Mc;De=C.stride;C.stride=Ya;Qc=C.type;C.type=Qd;Yc=C.w;C.w=Ab;sd=C.x;C.x=$a;oc=C.y;C.y=Wb;xc=C.z;C.z=uc;hc=Ea.call(this,fa,c,b);db=!1;tc=null;Tb=0;Yb=
!1;ic=ec=0;zc=1;Cc=0;dd=5126;Zc=Vc=Uc=Tc=0;U(hc)?(db=!0,tc=ia.createStream(34962,hc),dd=tc.dtype):(tc=ia.getBuffer(hc))?dd=tc.dtype:"constant"in hc?(zc=2,"number"===typeof hc.constant?(Uc=hc.constant,Vc=Zc=Tc=0):(Uc=0<hc.constant.length?hc.constant[0]:0,Vc=1<hc.constant.length?hc.constant[1]:0,Zc=2<hc.constant.length?hc.constant[2]:0,Tc=3<hc.constant.length?hc.constant[3]:0)):(tc=U(hc.buffer)?ia.createStream(34962,hc.buffer):ia.getBuffer(hc.buffer),dd="type"in hc?Od[hc.type]:tc.dtype,Yb=!!hc.normalized,
ic=hc.size|0,ec=hc.offset|0,Cc=hc.stride|0,Tb=hc.divisor|0);od=x.buffer;x.buffer=tc;ed=x.divisor;x.divisor=Tb;$c=x.normalized;x.normalized=Yb;lc=x.offset;x.offset=ec;dc=x.size;x.size=ic;ad=x.state;x.state=zc;Xc=x.stride;x.stride=Cc;fd=x.type;x.type=dd;Ac=x.w;x.w=Tc;jd=x.x;x.x=Uc;re=x.y;x.y=Vc;Ae=x.z;x.z=Zc;Dd=v.call(this,fa,c,b);kd=!1;ze=null;Fd=0;he=!1;Ud=ee=0;Nd=1;Kd=0;qd=5126;ld=ud=wd=Wc=0;U(Dd)?(kd=!0,ze=ia.createStream(34962,Dd),qd=ze.dtype):(ze=ia.getBuffer(Dd))?qd=ze.dtype:"constant"in Dd?
(Nd=2,"number"===typeof Dd.constant?(wd=Dd.constant,ud=ld=Wc=0):(wd=0<Dd.constant.length?Dd.constant[0]:0,ud=1<Dd.constant.length?Dd.constant[1]:0,ld=2<Dd.constant.length?Dd.constant[2]:0,Wc=3<Dd.constant.length?Dd.constant[3]:0)):(ze=U(Dd.buffer)?ia.createStream(34962,Dd.buffer):ia.getBuffer(Dd.buffer),qd="type"in Dd?Od[Dd.type]:ze.dtype,he=!!Dd.normalized,Ud=Dd.size|0,ee=Dd.offset|0,Kd=Dd.stride|0,Fd=Dd.divisor|0);xd=r.buffer;r.buffer=ze;Gd=r.divisor;r.divisor=Fd;Hd=r.normalized;r.normalized=he;
je=r.offset;r.offset=ee;me=r.size;r.size=Ud;ue=r.state;r.state=Nd;ne=r.stride;r.stride=Kd;ke=r.type;r.type=qd;ie=r.w;r.w=Wc;ve=r.x;r.x=wd;fe=r.y;r.y=ud;pe=r.z;r.z=ld;Rc=I.call(this,fa,c,b);id=!1;we=null;se=0;Rd=!1;Wd=Vd=0;Xd=1;qe=0;Ce=5126;We=Ve=te=Ge=0;U(Rc)?(id=!0,we=ia.createStream(34962,Rc),Ce=we.dtype):(we=ia.getBuffer(Rc))?Ce=we.dtype:"constant"in Rc?(Xd=2,"number"===typeof Rc.constant?(te=Rc.constant,Ve=We=Ge=0):(te=0<Rc.constant.length?Rc.constant[0]:0,Ve=1<Rc.constant.length?Rc.constant[1]:
0,We=2<Rc.constant.length?Rc.constant[2]:0,Ge=3<Rc.constant.length?Rc.constant[3]:0)):(we=U(Rc.buffer)?ia.createStream(34962,Rc.buffer):ia.getBuffer(Rc.buffer),Ce="type"in Rc?Od[Rc.type]:we.dtype,Rd=!!Rc.normalized,Wd=Rc.size|0,Vd=Rc.offset|0,qe=Rc.stride|0,se=Rc.divisor|0);Re=aa.buffer;aa.buffer=we;xe=aa.divisor;aa.divisor=se;Je=aa.normalized;aa.normalized=Rd;Le=aa.offset;aa.offset=Vd;Me=aa.size;aa.size=Wd;Ne=aa.state;aa.state=Xd;Ke=aa.stride;aa.stride=qe;Sd=aa.type;aa.type=Ce;ae=aa.w;aa.w=Ge;de=
aa.x;aa.x=te;ge=aa.y;aa.y=Ve;Oe=aa.z;aa.z=We;Ld=E.call(this,fa,c,b);Yd=!1;He=null;Pe=0;df=!1;Xe=cf=0;Se=1;bf=0;af=5126;ce=Zd=Ze=Ye=0;U(Ld)?(Yd=!0,He=ia.createStream(34962,Ld),af=He.dtype):(He=ia.getBuffer(Ld))?af=He.dtype:"constant"in Ld?(Se=2,"number"===typeof Ld.constant?(Ze=Ld.constant,Zd=ce=Ye=0):(Ze=0<Ld.constant.length?Ld.constant[0]:0,Zd=1<Ld.constant.length?Ld.constant[1]:0,ce=2<Ld.constant.length?Ld.constant[2]:0,Ye=3<Ld.constant.length?Ld.constant[3]:0)):(He=U(Ld.buffer)?ia.createStream(34962,
Ld.buffer):ia.getBuffer(Ld.buffer),af="type"in Ld?Od[Ld.type]:He.dtype,df=!!Ld.normalized,Xe=Ld.size|0,cf=Ld.offset|0,bf=Ld.stride|0,Pe=Ld.divisor|0);$e=A.buffer;A.buffer=He;kf=A.divisor;A.divisor=Pe;of=A.normalized;A.normalized=df;gf=A.offset;A.offset=cf;lf=A.size;A.size=Xe;mf=A.state;A.state=Se;nf=A.stride;A.stride=bf;sf=A.type;A.type=af;pf=A.w;A.w=Ye;tf=A.x;A.x=Ze;Cf=A.y;A.y=Zd;Df=A.z;A.z=ce;Te=ca.call(this,fa,c,b);Ie=!1;qf=null;rf=0;Ef=!1;Bf=Hf=0;Ff=1;Gf=0;xf=5126;Af=zf=wf=yf=0;U(Te)?(Ie=!0,qf=
ia.createStream(34962,Te),xf=qf.dtype):(qf=ia.getBuffer(Te))?xf=qf.dtype:"constant"in Te?(Ff=2,"number"===typeof Te.constant?(wf=Te.constant,zf=Af=yf=0):(wf=0<Te.constant.length?Te.constant[0]:0,zf=1<Te.constant.length?Te.constant[1]:0,Af=2<Te.constant.length?Te.constant[2]:0,yf=3<Te.constant.length?Te.constant[3]:0)):(qf=U(Te.buffer)?ia.createStream(34962,Te.buffer):ia.getBuffer(Te.buffer),xf="type"in Te?Od[Te.type]:qf.dtype,Ef=!!Te.normalized,Bf=Te.size|0,Hf=Te.offset|0,Gf=Te.stride|0,rf=Te.divisor|
0);Jf=H.buffer;H.buffer=qf;Kf=H.divisor;H.divisor=rf;Lf=H.normalized;H.normalized=Ef;Mf=H.offset;H.offset=Hf;uf=H.size;H.size=Bf;Rf=H.state;H.state=Ff;If=H.stride;H.stride=Gf;vf=H.type;H.type=xf;dg=H.w;H.w=yf;Sf=H.x;H.x=wf;Tf=H.y;H.y=zf;qg=H.z;H.z=Af;hf=F.call(this,fa,c,b);ef=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;U(hf)?(ef=!0,Nf=ia.createStream(34962,hf),Wf=Nf.dtype):(Nf=ia.getBuffer(hf))?Wf=Nf.dtype:"constant"in hf?(hg=2,"number"===typeof hf.constant?(Xf=hf.constant,Yf=Zf=
Uf=0):(Xf=0<hf.constant.length?hf.constant[0]:0,Yf=1<hf.constant.length?hf.constant[1]:0,Zf=2<hf.constant.length?hf.constant[2]:0,Uf=3<hf.constant.length?hf.constant[3]:0)):(Nf=U(hf.buffer)?ia.createStream(34962,hf.buffer):ia.getBuffer(hf.buffer),Wf="type"in hf?Od[hf.type]:Nf.dtype,eg=!!hf.normalized,gg=hf.size|0,fg=hf.offset|0,ig=hf.stride|0,Of=hf.divisor|0);jg=D.buffer;D.buffer=Nf;rg=D.divisor;D.divisor=Of;sg=D.normalized;D.normalized=eg;tg=D.offset;D.offset=fg;ug=D.size;D.size=gg;vg=D.state;D.state=
hg;wg=D.stride;D.stride=ig;xg=D.type;D.type=Wf;yg=D.w;D.w=Uf;zg=D.x;D.x=Xf;Ag=D.y;D.y=Yf;Bg=D.z;D.z=Zf;jf=ga.call(this,fa,c,b);ff=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;U(jf)?(ff=!0,Pf=ia.createStream(34962,jf),$f=Pf.dtype):(Pf=ia.getBuffer(jf))?$f=Pf.dtype:"constant"in jf?(ng=2,"number"===typeof jf.constant?(ag=jf.constant,bg=cg=Vf=0):(ag=0<jf.constant.length?jf.constant[0]:0,bg=1<jf.constant.length?jf.constant[1]:0,cg=2<jf.constant.length?jf.constant[2]:0,Vf=3<jf.constant.length?
jf.constant[3]:0)):(Pf=U(jf.buffer)?ia.createStream(34962,jf.buffer):ia.getBuffer(jf.buffer),$f="type"in jf?Od[jf.type]:Pf.dtype,kg=!!jf.normalized,mg=jf.size|0,lg=jf.offset|0,og=jf.stride|0,Qf=jf.divisor|0);pg=t.buffer;t.buffer=Pf;Cg=t.divisor;t.divisor=Qf;Dg=t.normalized;t.normalized=kg;Eg=t.offset;t.offset=lg;Fg=t.size;t.size=mg;Gg=t.state;t.state=ng;Hg=t.stride;t.stride=og;Ig=t.type;t.type=$f;Jg=t.w;t.w=Vf;Kg=t.x;t.x=ag;Lg=t.y;t.y=bg;Mg=t.z;t.z=cg;Ng=Ga.vert;Ga.vert=59;Og=Ga.frag;Ga.frag=58;sa.dirty=
!0;e(fa,c,b);fa.viewportWidth=u;fa.viewportHeight=h;yd[0]=B;yd[1]=z;yd[2]=q;yd[3]=J;Ca[0]=N;Ca[1]=T;Ca[2]=O;Ca[3]=Ja;ya.blend_enable=K;Ka[0]=M;Ka[1]=W;Ka[2]=R;Ka[3]=da;ya.depth_enable=Z;Id[0]=P;Id[1]=X;Id[2]=ba;Id[3]=za;ya.scissor_enable=ha;ya.stencil_enable=wa;ra&&(d.cpuTime+=performance.now()-S);ka&&Da.destroyStream(V);va.elements=Ua;va.offset=oa;va.count=xa;va.primitive=Aa;qa[45]=pa;qa[48]=ma;qa[10]=Ba;qa[46]=ta;qa[47]=Ha;qa[34]=fb;qa[6]=Sb;qa[7]=bc;qa[8]=Kc;qa[9]=pb;sb&&ia.destroyStream(La);w.buffer=
Db;w.divisor=Ma;w.normalized=Ad;w.offset=Za;w.size=Jb;w.state=Kb;w.stride=mb;w.type=Oa;w.w=ac;w.x=Ra;w.y=vb;w.z=wb;nb&&ia.destroyStream(gc);C.buffer=Xb;C.divisor=Pb;C.normalized=Nc;C.offset=Rb;C.size=$d;C.state=Fc;C.stride=De;C.type=Qc;C.w=Yc;C.x=sd;C.y=oc;C.z=xc;db&&ia.destroyStream(tc);x.buffer=od;x.divisor=ed;x.normalized=$c;x.offset=lc;x.size=dc;x.state=ad;x.stride=Xc;x.type=fd;x.w=Ac;x.x=jd;x.y=re;x.z=Ae;kd&&ia.destroyStream(ze);r.buffer=xd;r.divisor=Gd;r.normalized=Hd;r.offset=je;r.size=me;
r.state=ue;r.stride=ne;r.type=ke;r.w=ie;r.x=ve;r.y=fe;r.z=pe;id&&ia.destroyStream(we);aa.buffer=Re;aa.divisor=xe;aa.normalized=Je;aa.offset=Le;aa.size=Me;aa.state=Ne;aa.stride=Ke;aa.type=Sd;aa.w=ae;aa.x=de;aa.y=ge;aa.z=Oe;Yd&&ia.destroyStream(He);A.buffer=$e;A.divisor=kf;A.normalized=of;A.offset=gf;A.size=lf;A.state=mf;A.stride=nf;A.type=sf;A.w=pf;A.x=tf;A.y=Cf;A.z=Df;Ie&&ia.destroyStream(qf);H.buffer=Jf;H.divisor=Kf;H.normalized=Lf;H.offset=Mf;H.size=uf;H.state=Rf;H.stride=If;H.type=vf;H.w=dg;H.x=
Sf;H.y=Tf;H.z=qg;ef&&ia.destroyStream(Nf);D.buffer=jg;D.divisor=rg;D.normalized=sg;D.offset=tg;D.size=ug;D.state=vg;D.stride=wg;D.type=xg;D.w=yg;D.x=zg;D.y=Ag;D.z=Bg;ff&&ia.destroyStream(Pf);t.buffer=pg;t.divisor=Cg;t.normalized=Dg;t.offset=Eg;t.size=Fg;t.state=Gg;t.stride=Hg;t.type=Ig;t.w=Jg;t.x=Kg;t.y=Lg;t.z=Mg;Ga.vert=Ng;Ga.frag=Og;sa.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,
d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,ca,H,F,D,ga,t,ea,L,G,ta,S,V){var R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca,ja,X;R=a.attributes;O=a.buffer;M=a.context;N=a.current;P=a.draw;Q=a.elements;ra=a.extensions;pa=a.framebuffer;J=a.gl;K=a.isBufferArgs;ba=a.next;W=a.shader;la=a.uniforms;ha=a.vao;Ba=ba.blend_color;wa=N.blend_color;da=ba.blend_equation;xa=N.blend_equation;ka=ba.blend_func;oa=N.blend_func;Aa=ba.colorMask;Qa=
N.colorMask;Ja=ba.depth_range;Zb=N.depth_range;Ua=ba.polygonOffset_offset;ia=N.polygonOffset_offset;fa=ba.sample_coverage;sa=N.sample_coverage;va=ba.scissor_box;Da=N.scissor_box;rb=ba.stencil_func;Gb=N.stencil_func;Z=ba.stencil_opBack;U=N.stencil_opBack;ya=ba.stencil_opFront;Ga=N.stencil_opFront;qa=ba.viewport;za=N.viewport;Ca={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:4,stride:8};X={offset:0,stride:8};return{batch:function(c,b){var e,
a,l,k,f,g,n,p,m,u,h,B,z;e=pa.next;e!==pa.cur&&(e?J.bindFramebuffer(36160,e.framebuffer):J.bindFramebuffer(36160,null),pa.cur=e);if(N.dirty){var q,T,W,qa,ka,la,Ba,Bd,Be,Qe,Ue,Jd,Ee,le,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc;q=ba.dither;q!==N.dither&&(q?J.enable(3024):J.disable(3024),N.dither=q);T=da[0];W=da[1];if(T!==xa[0]||W!==xa[1])J.blendEquationSeparate(T,W),xa[0]=T,xa[1]=W;qa=ba.depth_func;qa!==N.depth_func&&(J.depthFunc(qa),N.depth_func=qa);ka=Ja[0];la=Ja[1];
if(ka!==Zb[0]||la!==Zb[1])J.depthRange(ka,la),Zb[0]=ka,Zb[1]=la;Ba=ba.depth_mask;Ba!==N.depth_mask&&(J.depthMask(Ba),N.depth_mask=Ba);Bd=Aa[0];Be=Aa[1];Qe=Aa[2];Ue=Aa[3];if(Bd!==Qa[0]||Be!==Qa[1]||Qe!==Qa[2]||Ue!==Qa[3])J.colorMask(Bd,Be,Qe,Ue),Qa[0]=Bd,Qa[1]=Be,Qa[2]=Qe,Qa[3]=Ue;Jd=ba.cull_enable;Jd!==N.cull_enable&&(Jd?J.enable(2884):J.disable(2884),N.cull_enable=Jd);Ee=ba.cull_face;Ee!==N.cull_face&&(J.cullFace(Ee),N.cull_face=Ee);le=ba.frontFace;le!==N.frontFace&&(J.frontFace(le),N.frontFace=
le);be=ba.lineWidth;be!==N.lineWidth&&(J.lineWidth(be),N.lineWidth=be);Md=ba.polygonOffset_enable;Md!==N.polygonOffset_enable&&(Md?J.enable(32823):J.disable(32823),N.polygonOffset_enable=Md);Ed=Ua[0];pd=Ua[1];if(Ed!==ia[0]||pd!==ia[1])J.polygonOffset(Ed,pd),ia[0]=Ed,ia[1]=pd;bd=ba.sample_alpha;bd!==N.sample_alpha&&(bd?J.enable(32926):J.disable(32926),N.sample_alpha=bd);td=ba.sample_enable;td!==N.sample_enable&&(td?J.enable(32928):J.disable(32928),N.sample_enable=td);Oc=fa[0];rd=fa[1];if(Oc!==sa[0]||
rd!==sa[1])J.sampleCoverage(Oc,rd),sa[0]=Oc,sa[1]=rd;Gc=ba.stencil_mask;Gc!==N.stencil_mask&&(J.stencilMask(Gc),N.stencil_mask=Gc);gd=rb[0];Sc=rb[1];md=rb[2];if(gd!==Gb[0]||Sc!==Gb[1]||md!==Gb[2])J.stencilFunc(gd,Sc,md),Gb[0]=gd,Gb[1]=Sc,Gb[2]=md;Vb=ya[0];Eb=ya[1];vc=ya[2];yb=ya[3];if(Vb!==Ga[0]||Eb!==Ga[1]||vc!==Ga[2]||yb!==Ga[3])J.stencilOpSeparate(Vb,Eb,vc,yb),Ga[0]=Vb,Ga[1]=Eb,Ga[2]=vc,Ga[3]=yb;yc=Z[0];Bb=Z[1];Lc=Z[2];mc=Z[3];if(yc!==U[0]||Bb!==U[1]||Lc!==U[2]||mc!==U[3])J.stencilOpSeparate(yc,
Bb,Lc,mc),U[0]=yc,U[1]=Bb,U[2]=Lc,U[3]=mc;Hc=ba.scissor_enable;Hc!==N.scissor_enable&&(Hc?J.enable(3089):J.disable(3089),N.scissor_enable=Hc);hd=va[0];cd=va[1];Ec=va[2];fc=va[3];if(hd!==Da[0]||cd!==Da[1]||Ec!==Da[2]||fc!==Da[3])J.scissor(hd,cd,Ec,fc),Da[0]=hd,Da[1]=cd,Da[2]=Ec,Da[3]=fc}a=this.viewport;l=a.x|0;k=a.y|0;f="width"in a?a.width|0:M.framebufferWidth-l;g="height"in a?a.height|0:M.framebufferHeight-k;n=M.viewportWidth;M.viewportWidth=f;p=M.viewportHeight;M.viewportHeight=g;J.viewport(l,k,
f,g);za[0]=l;za[1]=k;za[2]=f;za[3]=g;J.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;J.enable(3042);N.blend_enable=!0;J.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;J.disable(2929);N.depth_enable=!1;J.disable(2960);N.stencil_enable=!1;if(m=N.profile)u=performance.now(),d.count+=b;J.useProgram(w.program);h=ra.angle_instanced_arrays;var Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,
Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb;ha.setVAO(null);X.buffer=this.sizeBuffer;Ic=!1;pc=null;rc=0;nc=!1;ob=qc=0;Pc=1;Qb=0;cb=5126;Wa=jb=ab=Lb=0;K(X)?(Ic=!0,pc=O.createStream(34962,X),cb=pc.dtype):(pc=O.getBuffer(X))?cb=pc.dtype:"constant"in X?(Pc=2,"number"===typeof X.constant?(ab=X.constant,jb=Wa=Lb=0):(ab=0<X.constant.length?X.constant[0]:0,jb=1<X.constant.length?X.constant[1]:0,Wa=2<X.constant.length?X.constant[2]:0,Lb=3<X.constant.length?X.constant[3]:
0)):(pc=K(X.buffer)?O.createStream(34962,X.buffer):O.getBuffer(X.buffer),cb="type"in X?Ca[X.type]:pc.dtype,nc=!!X.normalized,ob=X.size|0,qc=X.offset|0,Qb=X.stride|0,rc=X.divisor|0);Jc=V.location;Mb=R[Jc];if(1===Pc){Mb.buffer||J.enableVertexAttribArray(Jc);Hb=ob||1;if(Mb.type!==cb||Mb.size!==Hb||Mb.buffer!==pc||Mb.normalized!==nc||Mb.offset!==qc||Mb.stride!==Qb)J.bindBuffer(34962,pc.buffer),J.vertexAttribPointer(Jc,Hb,cb,nc,Qb,qc),Mb.type=cb,Mb.size=Hb,Mb.buffer=pc,Mb.normalized=nc,Mb.offset=qc,Mb.stride=
Qb;Mb.divisor!==rc&&(h.vertexAttribDivisorANGLE(Jc,rc),Mb.divisor=rc)}else if(Mb.buffer&&(J.disableVertexAttribArray(Jc),Mb.buffer=null),Mb.x!==ab||Mb.y!==jb||Mb.z!==Wa||Mb.w!==Lb)J.vertexAttrib4f(Jc,ab,jb,Wa,Lb),Mb.x=ab,Mb.y=jb,Mb.z=Wa,Mb.w=Lb;ja.buffer=this.sizeBuffer;sc=!1;Nb=null;kb=0;Fb=!1;xb=Cb=0;hb=1;$b=0;Ob=5126;zb=Ub=Ta=qb=0;K(ja)?(sc=!0,Nb=O.createStream(34962,ja),Ob=Nb.dtype):(Nb=O.getBuffer(ja))?Ob=Nb.dtype:"constant"in ja?(hb=2,"number"===typeof ja.constant?(Ta=ja.constant,Ub=zb=qb=0):
(Ta=0<ja.constant.length?ja.constant[0]:0,Ub=1<ja.constant.length?ja.constant[1]:0,zb=2<ja.constant.length?ja.constant[2]:0,qb=3<ja.constant.length?ja.constant[3]:0)):(Nb=K(ja.buffer)?O.createStream(34962,ja.buffer):O.getBuffer(ja.buffer),Ob="type"in ja?Ca[ja.type]:Nb.dtype,Fb=!!ja.normalized,xb=ja.size|0,Cb=ja.offset|0,$b=ja.stride|0,kb=ja.divisor|0);jc=H.location;ib=R[jc];if(1===hb){ib.buffer||J.enableVertexAttribArray(jc);pb=xb||1;if(ib.type!==Ob||ib.size!==pb||ib.buffer!==Nb||ib.normalized!==
Fb||ib.offset!==Cb||ib.stride!==$b)J.bindBuffer(34962,Nb.buffer),J.vertexAttribPointer(jc,pb,Ob,Fb,$b,Cb),ib.type=Ob,ib.size=pb,ib.buffer=Nb,ib.normalized=Fb,ib.offset=Cb,ib.stride=$b;ib.divisor!==kb&&(h.vertexAttribDivisorANGLE(jc,kb),ib.divisor=kb)}else if(ib.buffer&&(J.disableVertexAttribArray(jc),ib.buffer=null),ib.x!==Ta||ib.y!==Ub||ib.z!==zb||ib.w!==qb)J.vertexAttrib4f(jc,Ta,Ub,zb,qb),ib.x=Ta,ib.y=Ub,ib.z=zb,ib.w=qb;Ia=this.charBuffer;sb=!1;La=null;eb=0;gb=!1;lb=Na=0;Xa=1;ub=0;tb=5126;Ib=Va=
Dc=Pa=0;K(Ia)?(sb=!0,La=O.createStream(34962,Ia),tb=La.dtype):(La=O.getBuffer(Ia))?tb=La.dtype:"constant"in Ia?(Xa=2,"number"===typeof Ia.constant?(Dc=Ia.constant,Va=Ib=Pa=0):(Dc=0<Ia.constant.length?Ia.constant[0]:0,Va=1<Ia.constant.length?Ia.constant[1]:0,Ib=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(La=K(Ia.buffer)?O.createStream(34962,Ia.buffer):O.getBuffer(Ia.buffer),tb="type"in Ia?Ca[Ia.type]:La.dtype,gb=!!Ia.normalized,lb=Ia.size|0,Na=Ia.offset|0,ub=Ia.stride|
0,eb=Ia.divisor|0);Db=ca.location;Ma=R[Db];if(1===Xa){Ma.buffer||J.enableVertexAttribArray(Db);zd=lb||1;if(Ma.type!==tb||Ma.size!==zd||Ma.buffer!==La||Ma.normalized!==gb||Ma.offset!==Na||Ma.stride!==ub)J.bindBuffer(34962,La.buffer),J.vertexAttribPointer(Db,zd,tb,gb,ub,Na),Ma.type=tb,Ma.size=zd,Ma.buffer=La,Ma.normalized=gb,Ma.offset=Na,Ma.stride=ub;Ma.divisor!==eb&&(h.vertexAttribDivisorANGLE(Db,eb),Ma.divisor=eb)}else if(Ma.buffer&&(J.disableVertexAttribArray(Db),Ma.buffer=null),Ma.x!==Dc||Ma.y!==
Va||Ma.z!==Ib||Ma.w!==Pa)J.vertexAttrib4f(Db,Dc,Va,Ib,Pa),Ma.x=Dc,Ma.y=Va,Ma.z=Ib,Ma.w=Pa;Za=this.position;Jb=!1;Kb=null;mb=0;Oa=!1;Ra=ac=0;vb=1;wb=0;Sa=5126;wc=Bc=gc=nb=0;K(Za)?(Jb=!0,Kb=O.createStream(34962,Za),Sa=Kb.dtype):(Kb=O.getBuffer(Za))?Sa=Kb.dtype:"constant"in Za?(vb=2,"number"===typeof Za.constant?(gc=Za.constant,Bc=wc=nb=0):(gc=0<Za.constant.length?Za.constant[0]:0,Bc=1<Za.constant.length?Za.constant[1]:0,wc=2<Za.constant.length?Za.constant[2]:0,nb=3<Za.constant.length?Za.constant[3]:
0)):(Kb=K(Za.buffer)?O.createStream(34962,Za.buffer):O.getBuffer(Za.buffer),Sa="type"in Za?Ca[Za.type]:Kb.dtype,Oa=!!Za.normalized,Ra=Za.size|0,ac=Za.offset|0,wb=Za.stride|0,mb=Za.divisor|0);bb=ea.location;kc=R[bb];if(1===vb){kc.buffer||J.enableVertexAttribArray(bb);Mc=Ra||2;if(kc.type!==Sa||kc.size!==Mc||kc.buffer!==Kb||kc.normalized!==Oa||kc.offset!==ac||kc.stride!==wb)J.bindBuffer(34962,Kb.buffer),J.vertexAttribPointer(bb,Mc,Sa,Oa,wb,ac),kc.type=Sa,kc.size=Mc,kc.buffer=Kb,kc.normalized=Oa,kc.offset=
ac,kc.stride=wb;kc.divisor!==mb&&(h.vertexAttribDivisorANGLE(bb,mb),kc.divisor=mb)}else if(kc.buffer&&(J.disableVertexAttribArray(bb),kc.buffer=null),kc.x!==gc||kc.y!==Bc||kc.z!==wc||kc.w!==nb)J.vertexAttrib4f(bb,gc,Bc,wc,nb),kc.x=gc,kc.y=Bc,kc.z=wc,kc.w=nb;Ya=this.viewportArray;J.uniform4f(S.location,Ya[0],Ya[1],Ya[2],Ya[3]);nd=this.scale;J.uniform2f(G.location,nd[0],nd[1]);Ab=this.translate;J.uniform2f(ta.location,Ab[0],Ab[1]);($a=P.elements)?J.bindBuffer(34963,$a.buffer.buffer):ha.currentVAO&&
($a=Q.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,$a.buffer.buffer);Wb=P.instances;for(B=0;B<b;++B){z=c[B];var uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd,Cd;uc=y.call(this,M,z,B);B&&Xb===uc||(Xb=uc,J.uniform1f(F.location,uc));Pb=C.call(this,M,z,B);B&&Nc===Pb||(Nc=Pb,J.uniform1f(ga.location,Pb));Rb=z.align;B&&Pd===Rb||(Pd=Rb,J.uniform1f(na.location,Rb));Fc=z.baseline;B&&vd===Fc||(vd=Fc,J.uniform1f(A.location,Fc));Qc=z.color;
Yc=Qc[0];oc=Qc[1];hc=Qc[2];tc=Qc[3];B&&sd===Yc&&xc===oc&&db===hc&&Tb===tc||(sd=Yc,xc=oc,db=hc,Tb=tc,J.uniform4f(D.location,Yc,oc,hc,tc));Yb=r.call(this,M,z,B);ec=Yb[0];zc=Yb[1];B&&ic===ec&&Cc===zc||(ic=ec,Cc=zc,J.uniform2f(E.location,ec,zc));dd=x.call(this,M,z,B);Tc=dd[0];Vc=dd[1];B&&Uc===Tc&&Zc===Vc||(Uc=Tc,Zc=Vc,J.uniform2f(aa.location,Tc,Vc));od=z.positionOffset;ed=od[0];lc=od[1];B&&$c===ed&&dc===lc||($c=ed,dc=lc,J.uniform2f(L.location,ed,lc));ad=z.opacity;B&&Xc===ad||(Xc=ad,J.uniform1f(t.location,
ad));(fd=v.call(this,M,z,B))&&"framebuffer"===fd._reglType&&(fd=fd.color[0]);Ac=fd._texture;J.uniform1i(I.location,Ac.bind());jd=z.offset;if(Cd=z.count)0<Wb?$a?h.drawElementsInstancedANGLE(0,Cd,$a.type,jd<<($a.type-5121>>1),Wb):h.drawArraysInstancedANGLE(0,jd,Cd,Wb):0>Wb&&($a?J.drawElements(0,Cd,$a.type,jd<<($a.type-5121>>1)):J.drawArrays(0,jd,Cd)),Ac.unbind()}Ic&&O.destroyStream(pc);sc&&O.destroyStream(Nb);sb&&O.destroyStream(La);Jb&&O.destroyStream(Kb);N.dirty=!0;ha.setVAO(null);M.viewportWidth=
n;M.viewportHeight=p;m&&(d.cpuTime+=performance.now()-u)},draw:function(c){var e,a,l,k,g,n,p,w,y,B,C,v,x,z,r,Ea,W,qa,ka,la,Ba,Bd,Be,Qe,Ue,Jd,Ee,le,be,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb;e=pa.next;e!==pa.cur&&(e?J.bindFramebuffer(36160,e.framebuffer):J.bindFramebuffer(36160,null),pa.cur=e);if(N.dirty){var Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,
Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc;Xa=ba.dither;Xa!==N.dither&&(Xa?J.enable(3024):J.disable(3024),N.dither=Xa);ub=da[0];tb=da[1];if(ub!==xa[0]||tb!==xa[1])J.blendEquationSeparate(ub,tb),xa[0]=ub,xa[1]=tb;Pa=ba.depth_func;Pa!==N.depth_func&&(J.depthFunc(Pa),N.depth_func=Pa);Dc=Ja[0];Va=Ja[1];if(Dc!==Zb[0]||Va!==Zb[1])J.depthRange(Dc,Va),Zb[0]=Dc,Zb[1]=Va;Ib=ba.depth_mask;Ib!==N.depth_mask&&(J.depthMask(Ib),N.depth_mask=Ib);Db=Aa[0];Ma=Aa[1];zd=Aa[2];Za=Aa[3];
if(Db!==Qa[0]||Ma!==Qa[1]||zd!==Qa[2]||Za!==Qa[3])J.colorMask(Db,Ma,zd,Za),Qa[0]=Db,Qa[1]=Ma,Qa[2]=zd,Qa[3]=Za;Jb=ba.cull_enable;Jb!==N.cull_enable&&(Jb?J.enable(2884):J.disable(2884),N.cull_enable=Jb);Kb=ba.cull_face;Kb!==N.cull_face&&(J.cullFace(Kb),N.cull_face=Kb);mb=ba.frontFace;mb!==N.frontFace&&(J.frontFace(mb),N.frontFace=mb);Oa=ba.lineWidth;Oa!==N.lineWidth&&(J.lineWidth(Oa),N.lineWidth=Oa);ac=ba.polygonOffset_enable;ac!==N.polygonOffset_enable&&(ac?J.enable(32823):J.disable(32823),N.polygonOffset_enable=
ac);Ra=Ua[0];vb=Ua[1];if(Ra!==ia[0]||vb!==ia[1])J.polygonOffset(Ra,vb),ia[0]=Ra,ia[1]=vb;wb=ba.sample_alpha;wb!==N.sample_alpha&&(wb?J.enable(32926):J.disable(32926),N.sample_alpha=wb);Sa=ba.sample_enable;Sa!==N.sample_enable&&(Sa?J.enable(32928):J.disable(32928),N.sample_enable=Sa);nb=fa[0];gc=fa[1];if(nb!==sa[0]||gc!==sa[1])J.sampleCoverage(nb,gc),sa[0]=nb,sa[1]=gc;Bc=ba.stencil_mask;Bc!==N.stencil_mask&&(J.stencilMask(Bc),N.stencil_mask=Bc);wc=rb[0];bb=rb[1];kc=rb[2];if(wc!==Gb[0]||bb!==Gb[1]||
kc!==Gb[2])J.stencilFunc(wc,bb,kc),Gb[0]=wc,Gb[1]=bb,Gb[2]=kc;Mc=ya[0];Ya=ya[1];nd=ya[2];Ab=ya[3];if(Mc!==Ga[0]||Ya!==Ga[1]||nd!==Ga[2]||Ab!==Ga[3])J.stencilOpSeparate(Mc,Ya,nd,Ab),Ga[0]=Mc,Ga[1]=Ya,Ga[2]=nd,Ga[3]=Ab;$a=Z[0];Wb=Z[1];uc=Z[2];Xb=Z[3];if($a!==U[0]||Wb!==U[1]||uc!==U[2]||Xb!==U[3])J.stencilOpSeparate($a,Wb,uc,Xb),U[0]=$a,U[1]=Wb,U[2]=uc,U[3]=Xb;Pb=ba.scissor_enable;Pb!==N.scissor_enable&&(Pb?J.enable(3089):J.disable(3089),N.scissor_enable=Pb);Nc=va[0];Rb=va[1];Pd=va[2];Fc=va[3];if(Nc!==
Da[0]||Rb!==Da[1]||Pd!==Da[2]||Fc!==Da[3])J.scissor(Nc,Rb,Pd,Fc),Da[0]=Nc,Da[1]=Rb,Da[2]=Pd,Da[3]=Fc}a=this.viewport;l=a.x|0;k=a.y|0;g="width"in a?a.width|0:M.framebufferWidth-l;n="height"in a?a.height|0:M.framebufferHeight-k;p=M.viewportWidth;M.viewportWidth=g;w=M.viewportHeight;M.viewportHeight=n;J.viewport(l,k,g,n);za[0]=l;za[1]=k;za[2]=g;za[3]=n;J.blendColor(0,0,0,1);wa[0]=0;wa[1]=0;wa[2]=0;wa[3]=1;J.enable(3042);N.blend_enable=!0;J.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;
oa[3]=1;J.disable(2929);N.depth_enable=!1;J.disable(2960);N.stencil_enable=!1;if(y=N.profile)B=performance.now(),d.count++;J.useProgram(h.program);C=ra.angle_instanced_arrays;ha.setVAO(null);X.buffer=this.sizeBuffer;v=!1;x=null;z=0;r=!1;W=Ea=0;qa=1;ka=0;la=5126;Qe=Be=Bd=Ba=0;K(X)?(v=!0,x=O.createStream(34962,X),la=x.dtype):(x=O.getBuffer(X))?la=x.dtype:"constant"in X?(qa=2,"number"===typeof X.constant?(Bd=X.constant,Be=Qe=Ba=0):(Bd=0<X.constant.length?X.constant[0]:0,Be=1<X.constant.length?X.constant[1]:
0,Qe=2<X.constant.length?X.constant[2]:0,Ba=3<X.constant.length?X.constant[3]:0)):(x=K(X.buffer)?O.createStream(34962,X.buffer):O.getBuffer(X.buffer),la="type"in X?Ca[X.type]:x.dtype,r=!!X.normalized,W=X.size|0,Ea=X.offset|0,ka=X.stride|0,z=X.divisor|0);Ue=V.location;Jd=R[Ue];if(1===qa){Jd.buffer||J.enableVertexAttribArray(Ue);Ee=W||1;if(Jd.type!==la||Jd.size!==Ee||Jd.buffer!==x||Jd.normalized!==r||Jd.offset!==Ea||Jd.stride!==ka)J.bindBuffer(34962,x.buffer),J.vertexAttribPointer(Ue,Ee,la,r,ka,Ea),
Jd.type=la,Jd.size=Ee,Jd.buffer=x,Jd.normalized=r,Jd.offset=Ea,Jd.stride=ka;Jd.divisor!==z&&(C.vertexAttribDivisorANGLE(Ue,z),Jd.divisor=z)}else if(Jd.buffer&&(J.disableVertexAttribArray(Ue),Jd.buffer=null),Jd.x!==Bd||Jd.y!==Be||Jd.z!==Qe||Jd.w!==Ba)J.vertexAttrib4f(Ue,Bd,Be,Qe,Ba),Jd.x=Bd,Jd.y=Be,Jd.z=Qe,Jd.w=Ba;ja.buffer=this.sizeBuffer;le=!1;be=null;Md=0;Ed=!1;bd=pd=0;td=1;Oc=0;rd=5126;md=Sc=gd=Gc=0;K(ja)?(le=!0,be=O.createStream(34962,ja),rd=be.dtype):(be=O.getBuffer(ja))?rd=be.dtype:"constant"in
ja?(td=2,"number"===typeof ja.constant?(gd=ja.constant,Sc=md=Gc=0):(gd=0<ja.constant.length?ja.constant[0]:0,Sc=1<ja.constant.length?ja.constant[1]:0,md=2<ja.constant.length?ja.constant[2]:0,Gc=3<ja.constant.length?ja.constant[3]:0)):(be=K(ja.buffer)?O.createStream(34962,ja.buffer):O.getBuffer(ja.buffer),rd="type"in ja?Ca[ja.type]:be.dtype,Ed=!!ja.normalized,bd=ja.size|0,pd=ja.offset|0,Oc=ja.stride|0,Md=ja.divisor|0);Vb=H.location;Eb=R[Vb];if(1===td){Eb.buffer||J.enableVertexAttribArray(Vb);vc=bd||
1;if(Eb.type!==rd||Eb.size!==vc||Eb.buffer!==be||Eb.normalized!==Ed||Eb.offset!==pd||Eb.stride!==Oc)J.bindBuffer(34962,be.buffer),J.vertexAttribPointer(Vb,vc,rd,Ed,Oc,pd),Eb.type=rd,Eb.size=vc,Eb.buffer=be,Eb.normalized=Ed,Eb.offset=pd,Eb.stride=Oc;Eb.divisor!==Md&&(C.vertexAttribDivisorANGLE(Vb,Md),Eb.divisor=Md)}else if(Eb.buffer&&(J.disableVertexAttribArray(Vb),Eb.buffer=null),Eb.x!==gd||Eb.y!==Sc||Eb.z!==md||Eb.w!==Gc)J.vertexAttrib4f(Vb,gd,Sc,md,Gc),Eb.x=gd,Eb.y=Sc,Eb.z=md,Eb.w=Gc;yb=this.charBuffer;
yc=!1;Bb=null;Lc=0;mc=!1;hd=Hc=0;cd=1;Ec=0;fc=5126;nc=rc=pc=Ic=0;K(yb)?(yc=!0,Bb=O.createStream(34962,yb),fc=Bb.dtype):(Bb=O.getBuffer(yb))?fc=Bb.dtype:"constant"in yb?(cd=2,"number"===typeof yb.constant?(pc=yb.constant,rc=nc=Ic=0):(pc=0<yb.constant.length?yb.constant[0]:0,rc=1<yb.constant.length?yb.constant[1]:0,nc=2<yb.constant.length?yb.constant[2]:0,Ic=3<yb.constant.length?yb.constant[3]:0)):(Bb=K(yb.buffer)?O.createStream(34962,yb.buffer):O.getBuffer(yb.buffer),fc="type"in yb?Ca[yb.type]:Bb.dtype,
mc=!!yb.normalized,hd=yb.size|0,Hc=yb.offset|0,Ec=yb.stride|0,Lc=yb.divisor|0);qc=ca.location;ob=R[qc];if(1===cd){ob.buffer||J.enableVertexAttribArray(qc);Pc=hd||1;if(ob.type!==fc||ob.size!==Pc||ob.buffer!==Bb||ob.normalized!==mc||ob.offset!==Hc||ob.stride!==Ec)J.bindBuffer(34962,Bb.buffer),J.vertexAttribPointer(qc,Pc,fc,mc,Ec,Hc),ob.type=fc,ob.size=Pc,ob.buffer=Bb,ob.normalized=mc,ob.offset=Hc,ob.stride=Ec;ob.divisor!==Lc&&(C.vertexAttribDivisorANGLE(qc,Lc),ob.divisor=Lc)}else if(ob.buffer&&(J.disableVertexAttribArray(qc),
ob.buffer=null),ob.x!==pc||ob.y!==rc||ob.z!==nc||ob.w!==Ic)J.vertexAttrib4f(qc,pc,rc,nc,Ic),ob.x=pc,ob.y=rc,ob.z=nc,ob.w=Ic;Qb=this.position;cb=!1;Lb=null;ab=0;jb=!1;Jc=Wa=0;Mb=1;Hb=0;sc=5126;Cb=Fb=kb=Nb=0;K(Qb)?(cb=!0,Lb=O.createStream(34962,Qb),sc=Lb.dtype):(Lb=O.getBuffer(Qb))?sc=Lb.dtype:"constant"in Qb?(Mb=2,"number"===typeof Qb.constant?(kb=Qb.constant,Fb=Cb=Nb=0):(kb=0<Qb.constant.length?Qb.constant[0]:0,Fb=1<Qb.constant.length?Qb.constant[1]:0,Cb=2<Qb.constant.length?Qb.constant[2]:0,Nb=3<
Qb.constant.length?Qb.constant[3]:0)):(Lb=K(Qb.buffer)?O.createStream(34962,Qb.buffer):O.getBuffer(Qb.buffer),sc="type"in Qb?Ca[Qb.type]:Lb.dtype,jb=!!Qb.normalized,Jc=Qb.size|0,Wa=Qb.offset|0,Hb=Qb.stride|0,ab=Qb.divisor|0);xb=ea.location;hb=R[xb];if(1===Mb){hb.buffer||J.enableVertexAttribArray(xb);$b=Jc||2;if(hb.type!==sc||hb.size!==$b||hb.buffer!==Lb||hb.normalized!==jb||hb.offset!==Wa||hb.stride!==Hb)J.bindBuffer(34962,Lb.buffer),J.vertexAttribPointer(xb,$b,sc,jb,Hb,Wa),hb.type=sc,hb.size=$b,
hb.buffer=Lb,hb.normalized=jb,hb.offset=Wa,hb.stride=Hb;hb.divisor!==ab&&(C.vertexAttribDivisorANGLE(xb,ab),hb.divisor=ab)}else if(hb.buffer&&(J.disableVertexAttribArray(xb),hb.buffer=null),hb.x!==kb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)J.vertexAttrib4f(xb,kb,Fb,Cb,Nb),hb.x=kb,hb.y=Fb,hb.z=Cb,hb.w=Nb;Ob=u.call(this,M,c,0);J.uniform1f(F.location,Ob);qb=q.call(this,M,c,0);J.uniform1f(ga.location,qb);J.uniform1f(na.location,c.align);J.uniform1f(A.location,c.baseline);Ta=this.viewportArray;J.uniform4f(S.location,
Ta[0],Ta[1],Ta[2],Ta[3]);Ub=c.color;J.uniform4f(D.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=m.call(this,M,c,0);J.uniform2f(E.location,zb[0],zb[1]);jc=b.call(this,M,c,0);J.uniform2f(aa.location,jc[0],jc[1]);ib=this.scale;J.uniform2f(G.location,ib[0],ib[1]);pb=this.translate;J.uniform2f(ta.location,pb[0],pb[1]);Ia=c.positionOffset;J.uniform2f(L.location,Ia[0],Ia[1]);J.uniform1f(t.location,c.opacity);(sb=f.call(this,M,c,0))&&"framebuffer"===sb._reglType&&(sb=sb.color[0]);La=sb._texture;J.uniform1i(I.location,
La.bind());(eb=P.elements)?J.bindBuffer(34963,eb.buffer.buffer):ha.currentVAO&&(eb=Q.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,eb.buffer.buffer);gb=c.offset;if(Na=c.count)lb=P.instances,0<lb?eb?C.drawElementsInstancedANGLE(0,Na,eb.type,gb<<(eb.type-5121>>1),lb):C.drawArraysInstancedANGLE(0,gb,Na,lb):0>lb&&(eb?J.drawElements(0,Na,eb.type,gb<<(eb.type-5121>>1)):J.drawArrays(0,gb,Na)),N.dirty=!0,ha.setVAO(null),M.viewportWidth=p,M.viewportHeight=w,y&&(d.cpuTime+=performance.now()-B),v&&
O.destroyStream(x),le&&O.destroyStream(be),yc&&O.destroyStream(Bb),cb&&O.destroyStream(Lb),La.unbind()},scope:function(b,a,f){var t,w,y,m,u,h,C,x,v,q,J,ia,T,U,fa,r,A,Ea,E,D,sa,I,Ja,ya,Ga,H,F,R,da,Z,L,Zb,Q,Qa,za,va,ha,wa,ra,aa,S,na,V,ca,ga,Ua,ea,oa,G,xa,Aa,pa,ma,Da,Gb,ta,rb,Pc,Qb,cb,Lb,ab,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya,nd,Ab,$a,Wb,uc,Xb,Pb,Nc,Rb,Pd,Fc,vd,Qc,Yc,sd,
oc,xc,hc,db,tc,Tb,Yb,ec,ic,zc,Cc,dd,Tc,Uc,Vc,Zc,od,ed,$c,lc,dc,ad,Xc,fd,Ac,jd;t=this.viewport;w=t.x|0;y=t.y|0;m="width"in t?t.width|0:M.framebufferWidth-w;u="height"in t?t.height|0:M.framebufferHeight-y;h=M.viewportWidth;M.viewportWidth=m;C=M.viewportHeight;M.viewportHeight=u;x=qa[0];qa[0]=w;v=qa[1];qa[1]=y;q=qa[2];qa[2]=m;J=qa[3];qa[3]=u;ia=Ba[0];Ba[0]=0;T=Ba[1];Ba[1]=0;U=Ba[2];Ba[2]=0;fa=Ba[3];Ba[3]=1;r=ba.blend_enable;ba.blend_enable=!0;A=ka[0];ka[0]=770;Ea=ka[1];ka[1]=771;E=ka[2];ka[2]=773;D=
ka[3];ka[3]=1;sa=ba.depth_enable;ba.depth_enable=!1;I=ba.stencil_enable;ba.stencil_enable=!1;if(Ja=N.profile)ya=performance.now(),d.count++;Ga=b.offset;H=P.offset;P.offset=Ga;F=b.count;R=P.count;P.count=F;da=P.primitive;P.primitive=0;Z=b.align;L=la[64];la[64]=Z;Zb=c.call(this,M,b,f);Q=la[69];la[69]=Zb;Qa=k.call(this,M,b,f);za=la[67];la[67]=Qa;va=z.call(this,M,b,f);ha=la[66];la[66]=va;wa=b.baseline;ra=la[65];la[65]=wa;aa=B.call(this,M,b,f);S=la[62];la[62]=aa;na=b.color;V=la[14];la[14]=na;ca=e.call(this,
M,b,f);ga=la[63];la[63]=ca;Ua=b.opacity;ea=la[10];la[10]=Ua;oa=b.positionOffset;G=la[68];la[68]=oa;xa=this.scale;Aa=la[6];la[6]=xa;pa=this.translate;ma=la[8];la[8]=pa;Da=this.viewportArray;Gb=la[3];la[3]=Da;ta=this.charBuffer;rb=!1;Pc=null;Qb=0;cb=!1;ab=Lb=0;jb=1;Wa=0;Jc=5126;Nb=sc=Hb=Mb=0;K(ta)?(rb=!0,Pc=O.createStream(34962,ta),Jc=Pc.dtype):(Pc=O.getBuffer(ta))?Jc=Pc.dtype:"constant"in ta?(jb=2,"number"===typeof ta.constant?(Hb=ta.constant,sc=Nb=Mb=0):(Hb=0<ta.constant.length?ta.constant[0]:0,sc=
1<ta.constant.length?ta.constant[1]:0,Nb=2<ta.constant.length?ta.constant[2]:0,Mb=3<ta.constant.length?ta.constant[3]:0)):(Pc=K(ta.buffer)?O.createStream(34962,ta.buffer):O.getBuffer(ta.buffer),Jc="type"in ta?Ca[ta.type]:Pc.dtype,cb=!!ta.normalized,ab=ta.size|0,Lb=ta.offset|0,Wa=ta.stride|0,Qb=ta.divisor|0);kb=l.buffer;l.buffer=Pc;Fb=l.divisor;l.divisor=Qb;Cb=l.normalized;l.normalized=cb;xb=l.offset;l.offset=Lb;hb=l.size;l.size=ab;$b=l.state;l.state=jb;Ob=l.stride;l.stride=Wa;qb=l.type;l.type=Jc;
Ta=l.w;l.w=Mb;Ub=l.x;l.x=Hb;zb=l.y;l.y=sc;jc=l.z;l.z=Nb;ja.buffer=this.sizeBuffer;ib=!1;pb=null;Ia=0;sb=!1;eb=La=0;gb=1;Na=0;lb=5126;Pa=tb=ub=Xa=0;K(ja)?(ib=!0,pb=O.createStream(34962,ja),lb=pb.dtype):(pb=O.getBuffer(ja))?lb=pb.dtype:"constant"in ja?(gb=2,"number"===typeof ja.constant?(ub=ja.constant,tb=Pa=Xa=0):(ub=0<ja.constant.length?ja.constant[0]:0,tb=1<ja.constant.length?ja.constant[1]:0,Pa=2<ja.constant.length?ja.constant[2]:0,Xa=3<ja.constant.length?ja.constant[3]:0)):(pb=K(ja.buffer)?O.createStream(34962,
ja.buffer):O.getBuffer(ja.buffer),lb="type"in ja?Ca[ja.type]:pb.dtype,sb=!!ja.normalized,eb=ja.size|0,La=ja.offset|0,Na=ja.stride|0,Ia=ja.divisor|0);Dc=g.buffer;g.buffer=pb;Va=g.divisor;g.divisor=Ia;Ib=g.normalized;g.normalized=sb;Db=g.offset;g.offset=La;Ma=g.size;g.size=eb;zd=g.state;g.state=gb;Za=g.stride;g.stride=Na;Jb=g.type;g.type=lb;Kb=g.w;g.w=Xa;mb=g.x;g.x=ub;Oa=g.y;g.y=tb;ac=g.z;g.z=Pa;Ra=this.position;vb=!1;wb=null;Sa=0;nb=!1;Bc=gc=0;wc=1;bb=0;kc=5126;Ab=nd=Ya=Mc=0;K(Ra)?(vb=!0,wb=O.createStream(34962,
Ra),kc=wb.dtype):(wb=O.getBuffer(Ra))?kc=wb.dtype:"constant"in Ra?(wc=2,"number"===typeof Ra.constant?(Ya=Ra.constant,nd=Ab=Mc=0):(Ya=0<Ra.constant.length?Ra.constant[0]:0,nd=1<Ra.constant.length?Ra.constant[1]:0,Ab=2<Ra.constant.length?Ra.constant[2]:0,Mc=3<Ra.constant.length?Ra.constant[3]:0)):(wb=K(Ra.buffer)?O.createStream(34962,Ra.buffer):O.getBuffer(Ra.buffer),kc="type"in Ra?Ca[Ra.type]:wb.dtype,nb=!!Ra.normalized,Bc=Ra.size|0,gc=Ra.offset|0,bb=Ra.stride|0,Sa=Ra.divisor|0);$a=n.buffer;n.buffer=
wb;Wb=n.divisor;n.divisor=Sa;uc=n.normalized;n.normalized=nb;Xb=n.offset;n.offset=gc;Pb=n.size;n.size=Bc;Nc=n.state;n.state=wc;Rb=n.stride;n.stride=bb;Pd=n.type;n.type=kc;Fc=n.w;n.w=Mc;vd=n.x;n.x=Ya;Qc=n.y;n.y=nd;Yc=n.z;n.z=Ab;X.buffer=this.sizeBuffer;sd=!1;oc=null;xc=0;hc=!1;tc=db=0;Tb=1;Yb=0;ec=5126;dd=Cc=zc=ic=0;K(X)?(sd=!0,oc=O.createStream(34962,X),ec=oc.dtype):(oc=O.getBuffer(X))?ec=oc.dtype:"constant"in X?(Tb=2,"number"===typeof X.constant?(zc=X.constant,Cc=dd=ic=0):(zc=0<X.constant.length?
X.constant[0]:0,Cc=1<X.constant.length?X.constant[1]:0,dd=2<X.constant.length?X.constant[2]:0,ic=3<X.constant.length?X.constant[3]:0)):(oc=K(X.buffer)?O.createStream(34962,X.buffer):O.getBuffer(X.buffer),ec="type"in X?Ca[X.type]:oc.dtype,hc=!!X.normalized,tc=X.size|0,db=X.offset|0,Yb=X.stride|0,xc=X.divisor|0);Tc=p.buffer;p.buffer=oc;Uc=p.divisor;p.divisor=xc;Vc=p.normalized;p.normalized=hc;Zc=p.offset;p.offset=db;od=p.size;p.size=tc;ed=p.state;p.state=Tb;$c=p.stride;p.stride=Yb;lc=p.type;p.type=
ec;dc=p.w;p.w=ic;ad=p.x;p.x=zc;Xc=p.y;p.y=Cc;fd=p.z;p.z=dd;Ac=W.vert;W.vert=61;jd=W.frag;W.frag=60;N.dirty=!0;a(M,b,f);M.viewportWidth=h;M.viewportHeight=C;qa[0]=x;qa[1]=v;qa[2]=q;qa[3]=J;Ba[0]=ia;Ba[1]=T;Ba[2]=U;Ba[3]=fa;ba.blend_enable=r;ka[0]=A;ka[1]=Ea;ka[2]=E;ka[3]=D;ba.depth_enable=sa;ba.stencil_enable=I;Ja&&(d.cpuTime+=performance.now()-ya);P.offset=H;P.count=R;P.primitive=da;la[64]=L;la[69]=Q;la[67]=za;la[66]=ha;la[65]=ra;la[62]=S;la[14]=V;la[63]=ga;la[10]=ea;la[68]=G;la[6]=Aa;la[8]=ma;la[3]=
Gb;rb&&O.destroyStream(Pc);l.buffer=kb;l.divisor=Fb;l.normalized=Cb;l.offset=xb;l.size=hb;l.state=$b;l.stride=Ob;l.type=qb;l.w=Ta;l.x=Ub;l.y=zb;l.z=jc;ib&&O.destroyStream(pb);g.buffer=Dc;g.divisor=Va;g.normalized=Ib;g.offset=Db;g.size=Ma;g.state=zd;g.stride=Za;g.type=Jb;g.w=Kb;g.x=mb;g.y=Oa;g.z=ac;vb&&O.destroyStream(wb);n.buffer=$a;n.divisor=Wb;n.normalized=uc;n.offset=Xb;n.size=Pb;n.state=Nc;n.stride=Rb;n.type=Pd;n.w=Fc;n.x=vd;n.y=Qc;n.z=Yc;sd&&O.destroyStream(oc);p.buffer=Tc;p.divisor=Uc;p.normalized=
Vc;p.offset=Zc;p.size=od;p.state=ed;p.stride=$c;p.type=lc;p.w=dc;p.x=ad;p.y=Xc;p.z=fd;W.vert=Ac;W.frag=jd;N.dirty=!0}}},$2:function(a,d,h){var u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,ca,H,F,D,ga;u=a.attributes;q=a.current;m=a.framebuffer;b=a.gl;f=a.next;c=a.vao;k=f.blend_color;z=q.blend_color;B=f.blend_equation;e=q.blend_equation;l=f.blend_func;g=q.blend_func;n=f.colorMask;p=q.colorMask;w=f.depth_range;y=q.depth_range;C=f.polygonOffset_offset;r=q.polygonOffset_offset;x=f.sample_coverage;
v=q.sample_coverage;na=f.scissor_box;I=q.scissor_box;aa=f.stencil_func;E=q.stencil_func;A=f.stencil_opBack;ca=q.stencil_opBack;H=f.stencil_opFront;F=q.stencil_opFront;D=f.viewport;ga=q.viewport;return{poll:function(){var c,a,d,u,h,T,V,R,O,M,N,P,Q,ra,G,J,K,ba,W,la,ha,Ba;q.dirty=!1;a=f.blend_enable;d=f.cull_enable;u=f.depth_enable;h=f.dither;T=f.polygonOffset_enable;V=f.sample_alpha;R=f.sample_enable;O=f.scissor_enable;M=f.stencil_enable;N=f.cull_face;P=q.cull_face;Q=f.depth_func;ra=q.depth_func;G=
f.depth_mask;J=q.depth_mask;K=f.frontFace;ba=q.frontFace;W=f.lineWidth;la=q.lineWidth;ha=f.stencil_mask;Ba=q.stencil_mask;c=m.next;c!==m.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),m.cur=c);a!==q.blend_enable&&(a?b.enable(3042):b.disable(3042),q.blend_enable=a);d!==q.cull_enable&&(d?b.enable(2884):b.disable(2884),q.cull_enable=d);u!==q.depth_enable&&(u?b.enable(2929):b.disable(2929),q.depth_enable=u);h!==q.dither&&(h?b.enable(3024):b.disable(3024),q.dither=h);T!==
q.polygonOffset_enable&&(T?b.enable(32823):b.disable(32823),q.polygonOffset_enable=T);V!==q.sample_alpha&&(V?b.enable(32926):b.disable(32926),q.sample_alpha=V);R!==q.sample_enable&&(R?b.enable(32928):b.disable(32928),q.sample_enable=R);O!==q.scissor_enable&&(O?b.enable(3089):b.disable(3089),q.scissor_enable=O);M!==q.stencil_enable&&(M?b.enable(2960):b.disable(2960),q.stencil_enable=M);if(k[0]!==z[0]||k[1]!==z[1]||k[2]!==z[2]||k[3]!==z[3])b.blendColor(k[0],k[1],k[2],k[3]),z[0]=k[0],z[1]=k[1],z[2]=
k[2],z[3]=k[3];if(B[0]!==e[0]||B[1]!==e[1])b.blendEquationSeparate(B[0],B[1]),e[0]=B[0],e[1]=B[1];if(l[0]!==g[0]||l[1]!==g[1]||l[2]!==g[2]||l[3]!==g[3])b.blendFuncSeparate(l[0],l[1],l[2],l[3]),g[0]=l[0],g[1]=l[1],g[2]=l[2],g[3]=l[3];if(n[0]!==p[0]||n[1]!==p[1]||n[2]!==p[2]||n[3]!==p[3])b.colorMask(n[0],n[1],n[2],n[3]),p[0]=n[0],p[1]=n[1],p[2]=n[2],p[3]=n[3];N!==P&&(b.cullFace(N),q.cull_face=N);Q!==ra&&(b.depthFunc(Q),q.depth_func=Q);G!==J&&(b.depthMask(G),q.depth_mask=G);if(w[0]!==y[0]||w[1]!==y[1])b.depthRange(w[0],
w[1]),y[0]=w[0],y[1]=w[1];K!==ba&&(b.frontFace(K),q.frontFace=K);W!==la&&(b.lineWidth(W),q.lineWidth=W);if(C[0]!==r[0]||C[1]!==r[1])b.polygonOffset(C[0],C[1]),r[0]=C[0],r[1]=C[1];if(x[0]!==v[0]||x[1]!==v[1])b.sampleCoverage(x[0],x[1]),v[0]=x[0],v[1]=x[1];if(na[0]!==I[0]||na[1]!==I[1]||na[2]!==I[2]||na[3]!==I[3])b.scissor(na[0],na[1],na[2],na[3]),I[0]=na[0],I[1]=na[1],I[2]=na[2],I[3]=na[3];if(aa[0]!==E[0]||aa[1]!==E[1]||aa[2]!==E[2])b.stencilFunc(aa[0],aa[1],aa[2]),E[0]=aa[0],E[1]=aa[1],E[2]=aa[2];
ha!==Ba&&(b.stencilMask(ha),q.stencil_mask=ha);if(A[0]!==ca[0]||A[1]!==ca[1]||A[2]!==ca[2]||A[3]!==ca[3])b.stencilOpSeparate(A[0],A[1],A[2],A[3]),ca[0]=A[0],ca[1]=A[1],ca[2]=A[2],ca[3]=A[3];if(H[0]!==F[0]||H[1]!==F[1]||H[2]!==F[2]||H[3]!==F[3])b.stencilOpSeparate(H[0],H[1],H[2],H[3]),F[0]=H[0],F[1]=H[1],F[2]=H[2],F[3]=H[3];if(D[0]!==ga[0]||D[1]!==ga[1]||D[2]!==ga[2]||D[3]!==ga[3])b.viewport(D[0],D[1],D[2],D[3]),ga[0]=D[0],ga[1]=D[1],ga[2]=D[2],ga[3]=D[3]},refresh:function(){var a,d,h,T,G,S,V,R,O,
M,N,P,Q,ra,pa,J;q.dirty=!1;d=f.blend_enable;h=f.cull_enable;T=f.depth_enable;G=f.dither;S=f.polygonOffset_enable;V=f.sample_alpha;R=f.sample_enable;O=f.scissor_enable;M=f.stencil_enable;N=f.cull_face;P=f.depth_func;Q=f.depth_mask;ra=f.frontFace;pa=f.lineWidth;J=f.stencil_mask;(a=m.next)?b.bindFramebuffer(36160,a.framebuffer):b.bindFramebuffer(36160,null);m.cur=a;a=u[0];a.buffer?(b.enableVertexAttribArray(0),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,
a.offset)):(b.disableVertexAttribArray(0),b.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=u[1];a.buffer?(b.enableVertexAttribArray(1),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(1),b.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=u[2];a.buffer?(b.enableVertexAttribArray(2),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(2),
b.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=u[3];a.buffer?(b.enableVertexAttribArray(3),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(3),b.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=u[4];a.buffer?(b.enableVertexAttribArray(4),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(4),b.vertexAttrib4f(4,a.x,a.y,a.z,
a.w),a.buffer=null);a=u[5];a.buffer?(b.enableVertexAttribArray(5),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(5),b.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=u[6];a.buffer?(b.enableVertexAttribArray(6),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(6),b.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);a=u[7];a.buffer?
(b.enableVertexAttribArray(7),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(7),b.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=u[8];a.buffer?(b.enableVertexAttribArray(8),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(8),b.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=u[9];a.buffer?(b.enableVertexAttribArray(9),b.bindBuffer(34962,
a.buffer.buffer),b.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(9),b.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=u[10];a.buffer?(b.enableVertexAttribArray(10),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(10),b.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=u[11];a.buffer?(b.enableVertexAttribArray(11),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(11,
a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(11),b.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=u[12];a.buffer?(b.enableVertexAttribArray(12),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(12),b.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=u[13];a.buffer?(b.enableVertexAttribArray(13),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(13,a.size,a.type,a.normalized,
a.stride,a.offset)):(b.disableVertexAttribArray(13),b.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=u[14];a.buffer?(b.enableVertexAttribArray(14),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(14),b.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=u[15];a.buffer?(b.enableVertexAttribArray(15),b.bindBuffer(34962,a.buffer.buffer),b.vertexAttribPointer(15,a.size,a.type,a.normalized,a.stride,a.offset)):(b.disableVertexAttribArray(15),
b.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);c.currentVAO=null;c.setVAO(c.targetVAO);d?b.enable(3042):b.disable(3042);q.blend_enable=d;h?b.enable(2884):b.disable(2884);q.cull_enable=h;T?b.enable(2929):b.disable(2929);q.depth_enable=T;G?b.enable(3024):b.disable(3024);q.dither=G;S?b.enable(32823):b.disable(32823);q.polygonOffset_enable=S;V?b.enable(32926):b.disable(32926);q.sample_alpha=V;R?b.enable(32928):b.disable(32928);q.sample_enable=R;O?b.enable(3089):b.disable(3089);q.scissor_enable=O;
M?b.enable(2960):b.disable(2960);q.stencil_enable=M;b.blendColor(k[0],k[1],k[2],k[3]);z[0]=k[0];z[1]=k[1];z[2]=k[2];z[3]=k[3];b.blendEquationSeparate(B[0],B[1]);e[0]=B[0];e[1]=B[1];b.blendFuncSeparate(l[0],l[1],l[2],l[3]);g[0]=l[0];g[1]=l[1];g[2]=l[2];g[3]=l[3];b.colorMask(n[0],n[1],n[2],n[3]);p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];b.cullFace(N);q.cull_face=N;b.depthFunc(P);q.depth_func=P;b.depthMask(Q);q.depth_mask=Q;b.depthRange(w[0],w[1]);y[0]=w[0];y[1]=w[1];b.frontFace(ra);q.frontFace=ra;b.lineWidth(pa);
q.lineWidth=pa;b.polygonOffset(C[0],C[1]);r[0]=C[0];r[1]=C[1];b.sampleCoverage(x[0],x[1]);v[0]=x[0];v[1]=x[1];b.scissor(na[0],na[1],na[2],na[3]);I[0]=na[0];I[1]=na[1];I[2]=na[2];I[3]=na[3];b.stencilFunc(aa[0],aa[1],aa[2]);E[0]=aa[0];E[1]=aa[1];E[2]=aa[2];b.stencilMask(J);q.stencil_mask=J;b.stencilOpSeparate(A[0],A[1],A[2],A[3]);ca[0]=A[0];ca[1]=A[1];ca[2]=A[2];ca[3]=A[3];b.stencilOpSeparate(H[0],H[1],H[2],H[3]);F[0]=H[0];F[1]=H[1];F[2]=H[2];F[3]=H[3];b.viewport(D[0],D[1],D[2],D[3]);ga[0]=D[0];ga[1]=
D[1];ga[2]=D[2];ga[3]=D[3]}}},$7:function(a,d,h,u,q,m,b,f){var c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,ca,H,F,D,ga,t,ea,L,G,ta,S,V,R;c=a.context;k=a.current;z=a.framebuffer;B=a.gl;e=a.next;l=a.shader;g=a.vao;n=e.blend_color;p=k.blend_color;w=e.blend_equation;y=k.blend_equation;C=e.blend_func;r=k.blend_func;x=e.colorMask;v=k.colorMask;na=e.depth_range;I=k.depth_range;aa=e.polygonOffset_offset;E=k.polygonOffset_offset;A=e.sample_coverage;ca=k.sample_coverage;H=e.scissor_box;F=k.scissor_box;D=e.stencil_func;
ga=k.stencil_func;t=e.stencil_opBack;ea=k.stencil_opBack;L=e.stencil_opFront;G=k.stencil_opFront;ta=e.viewport;S=k.viewport;V={};R={};return{draw:function(a){var b,f,H,R,ra,pa,J,K,ba,W;b=a.framebuffer;f=z.getFramebuffer(b);b&&!f&&d.commandRaise(q,h);b=z.next;z.next=f;H=c.framebufferWidth;c.framebufferWidth=f?f.width:c.drawingBufferWidth;R=c.framebufferHeight;c.framebufferHeight=f?f.height:c.drawingBufferHeight;f!==z.cur&&(f?B.bindFramebuffer(36160,f.framebuffer):B.bindFramebuffer(36160,null),z.cur=
f);if(k.dirty){f=e.dither;f!==k.dither&&(f?B.enable(3024):B.disable(3024),k.dither=f);f=e.blend_enable;f!==k.blend_enable&&(f?B.enable(3042):B.disable(3042),k.blend_enable=f);f=n[0];J=n[1];ra=n[2];pa=n[3];if(f!==p[0]||J!==p[1]||ra!==p[2]||pa!==p[3])B.blendColor(f,J,ra,pa),p[0]=f,p[1]=J,p[2]=ra,p[3]=pa;f=w[0];J=w[1];if(f!==y[0]||J!==y[1])B.blendEquationSeparate(f,J),y[0]=f,y[1]=J;f=C[0];J=C[1];ra=C[2];pa=C[3];if(f!==r[0]||J!==r[1]||ra!==r[2]||pa!==r[3])B.blendFuncSeparate(f,J,ra,pa),r[0]=f,r[1]=J,
r[2]=ra,r[3]=pa;f=e.depth_enable;f!==k.depth_enable&&(f?B.enable(2929):B.disable(2929),k.depth_enable=f);f=e.depth_func;f!==k.depth_func&&(B.depthFunc(f),k.depth_func=f);f=na[0];J=na[1];if(f!==I[0]||J!==I[1])B.depthRange(f,J),I[0]=f,I[1]=J;f=e.depth_mask;f!==k.depth_mask&&(B.depthMask(f),k.depth_mask=f);f=x[0];J=x[1];ra=x[2];pa=x[3];if(f!==v[0]||J!==v[1]||ra!==v[2]||pa!==v[3])B.colorMask(f,J,ra,pa),v[0]=f,v[1]=J,v[2]=ra,v[3]=pa;f=e.cull_enable;f!==k.cull_enable&&(f?B.enable(2884):B.disable(2884),
k.cull_enable=f);f=e.cull_face;f!==k.cull_face&&(B.cullFace(f),k.cull_face=f);f=e.frontFace;f!==k.frontFace&&(B.frontFace(f),k.frontFace=f);f=e.lineWidth;f!==k.lineWidth&&(B.lineWidth(f),k.lineWidth=f);f=e.polygonOffset_enable;f!==k.polygonOffset_enable&&(f?B.enable(32823):B.disable(32823),k.polygonOffset_enable=f);f=aa[0];J=aa[1];if(f!==E[0]||J!==E[1])B.polygonOffset(f,J),E[0]=f,E[1]=J;f=e.sample_alpha;f!==k.sample_alpha&&(f?B.enable(32926):B.disable(32926),k.sample_alpha=f);f=e.sample_enable;f!==
k.sample_enable&&(f?B.enable(32928):B.disable(32928),k.sample_enable=f);f=A[0];J=A[1];if(f!==ca[0]||J!==ca[1])B.sampleCoverage(f,J),ca[0]=f,ca[1]=J;f=e.stencil_enable;f!==k.stencil_enable&&(f?B.enable(2960):B.disable(2960),k.stencil_enable=f);f=e.stencil_mask;f!==k.stencil_mask&&(B.stencilMask(f),k.stencil_mask=f);f=D[0];J=D[1];ra=D[2];if(f!==ga[0]||J!==ga[1]||ra!==ga[2])B.stencilFunc(f,J,ra),ga[0]=f,ga[1]=J,ga[2]=ra;f=L[0];J=L[1];ra=L[2];pa=L[3];if(f!==G[0]||J!==G[1]||ra!==G[2]||pa!==G[3])B.stencilOpSeparate(f,
J,ra,pa),G[0]=f,G[1]=J,G[2]=ra,G[3]=pa;f=t[0];J=t[1];ra=t[2];pa=t[3];if(f!==ea[0]||J!==ea[1]||ra!==ea[2]||pa!==ea[3])B.stencilOpSeparate(f,J,ra,pa),ea[0]=f,ea[1]=J,ea[2]=ra,ea[3]=pa;f=e.scissor_enable;f!==k.scissor_enable&&(f?B.enable(3089):B.disable(3089),k.scissor_enable=f)}ra=c.framebufferWidth;pa=c.framebufferHeight;f=c.viewportWidth;c.viewportWidth=ra;J=c.viewportHeight;c.viewportHeight=pa;B.viewport(0,0,ra,pa);S[0]=0;S[1]=0;S[2]=ra;S[3]=pa;ra=c.framebufferWidth;pa=c.framebufferHeight;B.scissor(0,
0,ra,pa);F[0]=0;F[1]=0;F[2]=ra;F[3]=pa;if(ra=k.profile)K=performance.now(),u.count++;pa=l.program(l.vert,l.frag,h);B.useProgram(pa.program);g.setVAO(null);ba=pa.id;(W=V[ba])||(W=V[ba]=m(pa));W.call(this,a);k.dirty=!0;g.setVAO(null);z.next=b;c.framebufferWidth=H;c.framebufferHeight=R;c.viewportWidth=f;c.viewportHeight=J;ra&&(u.cpuTime+=performance.now()-K)},scope:function(a,e,l){var f,g,n,p,w,y,m,t,C,B,x,v,q,r,A;f=a.framebuffer;g=z.getFramebuffer(f);f&&!g&&d.commandRaise(b,h);f=z.next;z.next=g;n=c.framebufferWidth;
c.framebufferWidth=g?g.width:c.drawingBufferWidth;p=c.framebufferHeight;c.framebufferHeight=g?g.height:c.drawingBufferHeight;w=c.framebufferWidth;y=c.framebufferHeight;g=c.viewportWidth;c.viewportWidth=w;m=c.viewportHeight;c.viewportHeight=y;t=ta[0];ta[0]=0;C=ta[1];ta[1]=0;B=ta[2];ta[2]=w;w=ta[3];ta[3]=y;x=c.framebufferWidth;v=c.framebufferHeight;y=H[0];H[0]=0;q=H[1];H[1]=0;r=H[2];H[2]=x;x=H[3];H[3]=v;if(v=k.profile)A=performance.now(),u.count++;k.dirty=!0;e(c,a,l);z.next=f;c.framebufferWidth=n;c.framebufferHeight=
p;c.viewportWidth=g;c.viewportHeight=m;ta[0]=t;ta[1]=C;ta[2]=B;ta[3]=w;H[0]=y;H[1]=q;H[2]=r;H[3]=x;v&&(u.cpuTime+=performance.now()-A);k.dirty=!0},batch:function(c,a){var b,d,m,z,q;if(k.dirty){b=e.dither;b!==k.dither&&(b?B.enable(3024):B.disable(3024),k.dither=b);b=e.blend_enable;b!==k.blend_enable&&(b?B.enable(3042):B.disable(3042),k.blend_enable=b);b=n[0];m=n[1];z=n[2];q=n[3];if(b!==p[0]||m!==p[1]||z!==p[2]||q!==p[3])B.blendColor(b,m,z,q),p[0]=b,p[1]=m,p[2]=z,p[3]=q;b=w[0];m=w[1];if(b!==y[0]||m!==
y[1])B.blendEquationSeparate(b,m),y[0]=b,y[1]=m;b=C[0];m=C[1];z=C[2];q=C[3];if(b!==r[0]||m!==r[1]||z!==r[2]||q!==r[3])B.blendFuncSeparate(b,m,z,q),r[0]=b,r[1]=m,r[2]=z,r[3]=q;b=e.depth_enable;b!==k.depth_enable&&(b?B.enable(2929):B.disable(2929),k.depth_enable=b);b=e.depth_func;b!==k.depth_func&&(B.depthFunc(b),k.depth_func=b);b=na[0];m=na[1];if(b!==I[0]||m!==I[1])B.depthRange(b,m),I[0]=b,I[1]=m;b=e.depth_mask;b!==k.depth_mask&&(B.depthMask(b),k.depth_mask=b);b=x[0];m=x[1];z=x[2];q=x[3];if(b!==v[0]||
m!==v[1]||z!==v[2]||q!==v[3])B.colorMask(b,m,z,q),v[0]=b,v[1]=m,v[2]=z,v[3]=q;b=e.cull_enable;b!==k.cull_enable&&(b?B.enable(2884):B.disable(2884),k.cull_enable=b);b=e.cull_face;b!==k.cull_face&&(B.cullFace(b),k.cull_face=b);b=e.frontFace;b!==k.frontFace&&(B.frontFace(b),k.frontFace=b);b=e.lineWidth;b!==k.lineWidth&&(B.lineWidth(b),k.lineWidth=b);b=e.polygonOffset_enable;b!==k.polygonOffset_enable&&(b?B.enable(32823):B.disable(32823),k.polygonOffset_enable=b);b=aa[0];m=aa[1];if(b!==E[0]||m!==E[1])B.polygonOffset(b,
m),E[0]=b,E[1]=m;b=e.sample_alpha;b!==k.sample_alpha&&(b?B.enable(32926):B.disable(32926),k.sample_alpha=b);b=e.sample_enable;b!==k.sample_enable&&(b?B.enable(32928):B.disable(32928),k.sample_enable=b);b=A[0];m=A[1];if(b!==ca[0]||m!==ca[1])B.sampleCoverage(b,m),ca[0]=b,ca[1]=m;b=e.stencil_enable;b!==k.stencil_enable&&(b?B.enable(2960):B.disable(2960),k.stencil_enable=b);b=e.stencil_mask;b!==k.stencil_mask&&(B.stencilMask(b),k.stencil_mask=b);b=D[0];m=D[1];z=D[2];if(b!==ga[0]||m!==ga[1]||z!==ga[2])B.stencilFunc(b,
m,z),ga[0]=b,ga[1]=m,ga[2]=z;b=L[0];m=L[1];z=L[2];q=L[3];if(b!==G[0]||m!==G[1]||z!==G[2]||q!==G[3])B.stencilOpSeparate(b,m,z,q),G[0]=b,G[1]=m,G[2]=z,G[3]=q;b=t[0];m=t[1];z=t[2];q=t[3];if(b!==ea[0]||m!==ea[1]||z!==ea[2]||q!==ea[3])B.stencilOpSeparate(b,m,z,q),ea[0]=b,ea[1]=m,ea[2]=z,ea[3]=q;b=e.scissor_enable;b!==k.scissor_enable&&(b?B.enable(3089):B.disable(3089),k.scissor_enable=b)}if(b=k.profile)d=performance.now(),u.count+=a;m=l.program(l.vert,l.frag,h);B.useProgram(m.program);g.setVAO(null);z=
m.id;(q=R[z])||(q=R[z]=f(m));q.call(this,c,a);k.dirty=!0;g.setVAO(null);b&&(u.cpuTime+=performance.now()-d)}}},$5:function(a,d,h,u,q,m){var b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,ca,H,F,D,G,t,ea,L,ma,ta,S;b=a.context;f=a.current;c=a.framebuffer;k=a.gl;z=a.next;B=a.shader;e=a.vao;l=z.blend_color;g=f.blend_color;n=z.blend_equation;p=f.blend_equation;w=z.blend_func;y=f.blend_func;C=z.colorMask;r=f.colorMask;x=z.depth_range;v=f.depth_range;na=z.polygonOffset_offset;I=f.polygonOffset_offset;aa=
z.sample_coverage;E=f.sample_coverage;A=z.scissor_box;ca=f.scissor_box;H=z.stencil_func;F=f.stencil_func;D=z.stencil_opBack;G=f.stencil_opBack;t=z.stencil_opFront;ea=f.stencil_opFront;L=z.viewport;ma=f.viewport;ta={};S={};return{draw:function(b){var a,d,m,N,P;a=c.next;a!==c.cur&&(a?k.bindFramebuffer(36160,a.framebuffer):k.bindFramebuffer(36160,null),c.cur=a);if(f.dirty){a=z.dither;a!==f.dither&&(a?k.enable(3024):k.disable(3024),f.dither=a);a=z.blend_enable;a!==f.blend_enable&&(a?k.enable(3042):k.disable(3042),
f.blend_enable=a);a=l[0];m=l[1];N=l[2];P=l[3];if(a!==g[0]||m!==g[1]||N!==g[2]||P!==g[3])k.blendColor(a,m,N,P),g[0]=a,g[1]=m,g[2]=N,g[3]=P;a=n[0];m=n[1];if(a!==p[0]||m!==p[1])k.blendEquationSeparate(a,m),p[0]=a,p[1]=m;a=w[0];m=w[1];N=w[2];P=w[3];if(a!==y[0]||m!==y[1]||N!==y[2]||P!==y[3])k.blendFuncSeparate(a,m,N,P),y[0]=a,y[1]=m,y[2]=N,y[3]=P;a=z.depth_enable;a!==f.depth_enable&&(a?k.enable(2929):k.disable(2929),f.depth_enable=a);a=z.depth_func;a!==f.depth_func&&(k.depthFunc(a),f.depth_func=a);a=x[0];
m=x[1];if(a!==v[0]||m!==v[1])k.depthRange(a,m),v[0]=a,v[1]=m;a=z.depth_mask;a!==f.depth_mask&&(k.depthMask(a),f.depth_mask=a);a=C[0];m=C[1];N=C[2];P=C[3];if(a!==r[0]||m!==r[1]||N!==r[2]||P!==r[3])k.colorMask(a,m,N,P),r[0]=a,r[1]=m,r[2]=N,r[3]=P;a=z.cull_enable;a!==f.cull_enable&&(a?k.enable(2884):k.disable(2884),f.cull_enable=a);a=z.cull_face;a!==f.cull_face&&(k.cullFace(a),f.cull_face=a);a=z.frontFace;a!==f.frontFace&&(k.frontFace(a),f.frontFace=a);a=z.lineWidth;a!==f.lineWidth&&(k.lineWidth(a),
f.lineWidth=a);a=z.polygonOffset_enable;a!==f.polygonOffset_enable&&(a?k.enable(32823):k.disable(32823),f.polygonOffset_enable=a);a=na[0];m=na[1];if(a!==I[0]||m!==I[1])k.polygonOffset(a,m),I[0]=a,I[1]=m;a=z.sample_alpha;a!==f.sample_alpha&&(a?k.enable(32926):k.disable(32926),f.sample_alpha=a);a=z.sample_enable;a!==f.sample_enable&&(a?k.enable(32928):k.disable(32928),f.sample_enable=a);a=aa[0];m=aa[1];if(a!==E[0]||m!==E[1])k.sampleCoverage(a,m),E[0]=a,E[1]=m;a=z.stencil_enable;a!==f.stencil_enable&&
(a?k.enable(2960):k.disable(2960),f.stencil_enable=a);a=z.stencil_mask;a!==f.stencil_mask&&(k.stencilMask(a),f.stencil_mask=a);a=H[0];m=H[1];N=H[2];if(a!==F[0]||m!==F[1]||N!==F[2])k.stencilFunc(a,m,N),F[0]=a,F[1]=m,F[2]=N;a=t[0];m=t[1];N=t[2];P=t[3];if(a!==ea[0]||m!==ea[1]||N!==ea[2]||P!==ea[3])k.stencilOpSeparate(a,m,N,P),ea[0]=a,ea[1]=m,ea[2]=N,ea[3]=P;a=D[0];m=D[1];N=D[2];P=D[3];if(a!==G[0]||m!==G[1]||N!==G[2]||P!==G[3])k.stencilOpSeparate(a,m,N,P),G[0]=a,G[1]=m,G[2]=N,G[3]=P;a=z.scissor_enable;
a!==f.scissor_enable&&(a?k.enable(3089):k.disable(3089),f.scissor_enable=a);a=A[0];m=A[1];N=A[2];P=A[3];if(a!==ca[0]||m!==ca[1]||N!==ca[2]||P!==ca[3])k.scissor(a,m,N,P),ca[0]=a,ca[1]=m,ca[2]=N,ca[3]=P;a=L[0];m=L[1];N=L[2];P=L[3];if(a!==ma[0]||m!==ma[1]||N!==ma[2]||P!==ma[3])k.viewport(a,m,N,P),ma[0]=a,ma[1]=m,ma[2]=N,ma[3]=P;f.dirty=!1}if(a=f.profile)d=performance.now(),u.count++;m=B.program(B.vert,B.frag,h);k.useProgram(m.program);e.setVAO(null);N=m.id;(P=ta[N])||(P=ta[N]=q(m));P.call(this,b);e.setVAO(null);
a&&(u.cpuTime+=performance.now()-d)},scope:function(c,a,e){var l,d;if(l=f.profile)d=performance.now(),u.count++;a(b,c,e);l&&(u.cpuTime+=performance.now()-d)},batch:function(a,b){var d,q,N,P,Q;d=c.next;d!==c.cur&&(d?k.bindFramebuffer(36160,d.framebuffer):k.bindFramebuffer(36160,null),c.cur=d);if(f.dirty){d=z.dither;d!==f.dither&&(d?k.enable(3024):k.disable(3024),f.dither=d);d=z.blend_enable;d!==f.blend_enable&&(d?k.enable(3042):k.disable(3042),f.blend_enable=d);d=l[0];N=l[1];P=l[2];Q=l[3];if(d!==g[0]||
N!==g[1]||P!==g[2]||Q!==g[3])k.blendColor(d,N,P,Q),g[0]=d,g[1]=N,g[2]=P,g[3]=Q;d=n[0];N=n[1];if(d!==p[0]||N!==p[1])k.blendEquationSeparate(d,N),p[0]=d,p[1]=N;d=w[0];N=w[1];P=w[2];Q=w[3];if(d!==y[0]||N!==y[1]||P!==y[2]||Q!==y[3])k.blendFuncSeparate(d,N,P,Q),y[0]=d,y[1]=N,y[2]=P,y[3]=Q;d=z.depth_enable;d!==f.depth_enable&&(d?k.enable(2929):k.disable(2929),f.depth_enable=d);d=z.depth_func;d!==f.depth_func&&(k.depthFunc(d),f.depth_func=d);d=x[0];N=x[1];if(d!==v[0]||N!==v[1])k.depthRange(d,N),v[0]=d,v[1]=
N;d=z.depth_mask;d!==f.depth_mask&&(k.depthMask(d),f.depth_mask=d);d=C[0];N=C[1];P=C[2];Q=C[3];if(d!==r[0]||N!==r[1]||P!==r[2]||Q!==r[3])k.colorMask(d,N,P,Q),r[0]=d,r[1]=N,r[2]=P,r[3]=Q;d=z.cull_enable;d!==f.cull_enable&&(d?k.enable(2884):k.disable(2884),f.cull_enable=d);d=z.cull_face;d!==f.cull_face&&(k.cullFace(d),f.cull_face=d);d=z.frontFace;d!==f.frontFace&&(k.frontFace(d),f.frontFace=d);d=z.lineWidth;d!==f.lineWidth&&(k.lineWidth(d),f.lineWidth=d);d=z.polygonOffset_enable;d!==f.polygonOffset_enable&&
(d?k.enable(32823):k.disable(32823),f.polygonOffset_enable=d);d=na[0];N=na[1];if(d!==I[0]||N!==I[1])k.polygonOffset(d,N),I[0]=d,I[1]=N;d=z.sample_alpha;d!==f.sample_alpha&&(d?k.enable(32926):k.disable(32926),f.sample_alpha=d);d=z.sample_enable;d!==f.sample_enable&&(d?k.enable(32928):k.disable(32928),f.sample_enable=d);d=aa[0];N=aa[1];if(d!==E[0]||N!==E[1])k.sampleCoverage(d,N),E[0]=d,E[1]=N;d=z.stencil_enable;d!==f.stencil_enable&&(d?k.enable(2960):k.disable(2960),f.stencil_enable=d);d=z.stencil_mask;
d!==f.stencil_mask&&(k.stencilMask(d),f.stencil_mask=d);d=H[0];N=H[1];P=H[2];if(d!==F[0]||N!==F[1]||P!==F[2])k.stencilFunc(d,N,P),F[0]=d,F[1]=N,F[2]=P;d=t[0];N=t[1];P=t[2];Q=t[3];if(d!==ea[0]||N!==ea[1]||P!==ea[2]||Q!==ea[3])k.stencilOpSeparate(d,N,P,Q),ea[0]=d,ea[1]=N,ea[2]=P,ea[3]=Q;d=D[0];N=D[1];P=D[2];Q=D[3];if(d!==G[0]||N!==G[1]||P!==G[2]||Q!==G[3])k.stencilOpSeparate(d,N,P,Q),G[0]=d,G[1]=N,G[2]=P,G[3]=Q;d=z.scissor_enable;d!==f.scissor_enable&&(d?k.enable(3089):k.disable(3089),f.scissor_enable=
d);d=A[0];N=A[1];P=A[2];Q=A[3];if(d!==ca[0]||N!==ca[1]||P!==ca[2]||Q!==ca[3])k.scissor(d,N,P,Q),ca[0]=d,ca[1]=N,ca[2]=P,ca[3]=Q;d=L[0];N=L[1];P=L[2];Q=L[3];if(d!==ma[0]||N!==ma[1]||P!==ma[2]||Q!==ma[3])k.viewport(d,N,P,Q),ma[0]=d,ma[1]=N,ma[2]=P,ma[3]=Q;f.dirty=!1}if(d=f.profile)q=performance.now(),u.count+=b;N=B.program(B.vert,B.frag,h);k.useProgram(N.program);e.setVAO(null);P=N.id;(Q=S[P])||(Q=S[P]=m(N));Q.call(this,a,b);e.setVAO(null);d&&(u.cpuTime+=performance.now()-q)}}},"$26,color,freq,phase,projection,time,view":function(a,
d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,G,H,F,D,ga){var t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb,Z;t=a.attributes;ea=a.context;L=a.current;ma=a.draw;ta=a.elements;S=a.framebuffer;V=a.gl;R=a.isArrayLike;O=a.next;M=a.shader;N=a.uniforms;P=a.vao;Q=O.blend_color;ra=L.blend_color;pa=O.blend_equation;J=L.blend_equation;K=O.blend_func;ba=L.blend_func;W=O.colorMask;la=L.colorMask;ha=O.depth_range;Ba=L.depth_range;wa=O.polygonOffset_offset;
da=L.polygonOffset_offset;xa=O.sample_coverage;ka=L.sample_coverage;oa=O.scissor_box;Aa=L.scissor_box;Qa=O.stencil_func;Ja=L.stencil_func;Zb=O.stencil_opBack;Ua=L.stencil_opBack;ia=O.stencil_opFront;fa=L.stencil_opFront;sa=O.viewport;va=L.viewport;Da=new Float32Array(16);rb=new Float32Array(16);Gb=new Float32Array(16);Z=new Float32Array(16);return{draw:function(a){var g,n,p,w;g=S.next;g!==S.cur&&(g?V.bindFramebuffer(36160,g.framebuffer):V.bindFramebuffer(36160,null),S.cur=g);if(L.dirty){var y;g=O.dither;
g!==L.dither&&(g?V.enable(3024):V.disable(3024),L.dither=g);g=O.blend_enable;g!==L.blend_enable&&(g?V.enable(3042):V.disable(3042),L.blend_enable=g);g=Q[0];p=Q[1];w=Q[2];y=Q[3];if(g!==ra[0]||p!==ra[1]||w!==ra[2]||y!==ra[3])V.blendColor(g,p,w,y),ra[0]=g,ra[1]=p,ra[2]=w,ra[3]=y;g=pa[0];p=pa[1];if(g!==J[0]||p!==J[1])V.blendEquationSeparate(g,p),J[0]=g,J[1]=p;g=K[0];p=K[1];w=K[2];y=K[3];if(g!==ba[0]||p!==ba[1]||w!==ba[2]||y!==ba[3])V.blendFuncSeparate(g,p,w,y),ba[0]=g,ba[1]=p,ba[2]=w,ba[3]=y;g=O.depth_enable;
g!==L.depth_enable&&(g?V.enable(2929):V.disable(2929),L.depth_enable=g);g=O.depth_func;g!==L.depth_func&&(V.depthFunc(g),L.depth_func=g);g=ha[0];p=ha[1];if(g!==Ba[0]||p!==Ba[1])V.depthRange(g,p),Ba[0]=g,Ba[1]=p;g=O.depth_mask;g!==L.depth_mask&&(V.depthMask(g),L.depth_mask=g);g=W[0];p=W[1];w=W[2];y=W[3];if(g!==la[0]||p!==la[1]||w!==la[2]||y!==la[3])V.colorMask(g,p,w,y),la[0]=g,la[1]=p,la[2]=w,la[3]=y;g=O.cull_enable;g!==L.cull_enable&&(g?V.enable(2884):V.disable(2884),L.cull_enable=g);g=O.cull_face;
g!==L.cull_face&&(V.cullFace(g),L.cull_face=g);g=O.frontFace;g!==L.frontFace&&(V.frontFace(g),L.frontFace=g);g=O.lineWidth;g!==L.lineWidth&&(V.lineWidth(g),L.lineWidth=g);g=O.polygonOffset_enable;g!==L.polygonOffset_enable&&(g?V.enable(32823):V.disable(32823),L.polygonOffset_enable=g);g=wa[0];p=wa[1];if(g!==da[0]||p!==da[1])V.polygonOffset(g,p),da[0]=g,da[1]=p;g=O.sample_alpha;g!==L.sample_alpha&&(g?V.enable(32926):V.disable(32926),L.sample_alpha=g);g=O.sample_enable;g!==L.sample_enable&&(g?V.enable(32928):
V.disable(32928),L.sample_enable=g);g=xa[0];p=xa[1];if(g!==ka[0]||p!==ka[1])V.sampleCoverage(g,p),ka[0]=g,ka[1]=p;g=O.stencil_enable;g!==L.stencil_enable&&(g?V.enable(2960):V.disable(2960),L.stencil_enable=g);g=O.stencil_mask;g!==L.stencil_mask&&(V.stencilMask(g),L.stencil_mask=g);g=Qa[0];p=Qa[1];w=Qa[2];if(g!==Ja[0]||p!==Ja[1]||w!==Ja[2])V.stencilFunc(g,p,w),Ja[0]=g,Ja[1]=p,Ja[2]=w;g=ia[0];p=ia[1];w=ia[2];y=ia[3];if(g!==fa[0]||p!==fa[1]||w!==fa[2]||y!==fa[3])V.stencilOpSeparate(g,p,w,y),fa[0]=g,
fa[1]=p,fa[2]=w,fa[3]=y;g=Zb[0];p=Zb[1];w=Zb[2];y=Zb[3];if(g!==Ua[0]||p!==Ua[1]||w!==Ua[2]||y!==Ua[3])V.stencilOpSeparate(g,p,w,y),Ua[0]=g,Ua[1]=p,Ua[2]=w,Ua[3]=y;g=O.scissor_enable;g!==L.scissor_enable&&(g?V.enable(3089):V.disable(3089),L.scissor_enable=g);g=oa[0];p=oa[1];w=oa[2];y=oa[3];if(g!==Aa[0]||p!==Aa[1]||w!==Aa[2]||y!==Aa[3])V.scissor(g,p,w,y),Aa[0]=g,Aa[1]=p,Aa[2]=w,Aa[3]=y;g=sa[0];p=sa[1];w=sa[2];y=sa[3];if(g!==va[0]||p!==va[1]||w!==va[2]||y!==va[3])V.viewport(g,p,w,y),va[0]=g,va[1]=p,
va[2]=w,va[3]=y;L.dirty=!1}if(g=L.profile)n=performance.now(),u.count++;V.useProgram(q.program);P.setVAO(null);p=G.location;w=t[p];w.buffer||V.enableVertexAttribArray(p);if(5126!==w.type||4!==w.size||w.buffer!==m||!1!==w.normalized||0!==w.offset||44!==w.stride)V.bindBuffer(34962,m.buffer),V.vertexAttribPointer(p,4,5126,!1,44,0),w.type=5126,w.size=4,w.buffer=m,w.normalized=!1,w.offset=0,w.stride=44;p=H.location;w=t[p];w.buffer||V.enableVertexAttribArray(p);if(5126!==w.type||4!==w.size||w.buffer!==
b||!1!==w.normalized||16!==w.offset||44!==w.stride)V.bindBuffer(34962,b.buffer),V.vertexAttribPointer(p,4,5126,!1,44,16),w.type=5126,w.size=4,w.buffer=b,w.normalized=!1,w.offset=16,w.stride=44;p=A.location;w=t[p];w.buffer||V.enableVertexAttribArray(p);if(5126!==w.type||3!==w.size||w.buffer!==f||!1!==w.normalized||32!==w.offset||44!==w.stride)V.bindBuffer(34962,f.buffer),V.vertexAttribPointer(p,3,5126,!1,44,32),w.type=5126,w.size=3,w.buffer=f,w.normalized=!1,w.offset=32,w.stride=44;p=c.call(this,ea,
a,0);"number"!==typeof p&&d.commandRaise(k,h);V.uniform1f(D.location,p);p=z.call(this,ea,a,0);R(p)&&16===p.length||d.commandRaise(B,h);V.uniformMatrix4fv(ga.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(Da[0]=p[0],Da[1]=p[1],Da[2]=p[2],Da[3]=p[3],Da[4]=p[4],Da[5]=p[5],Da[6]=p[6],Da[7]=p[7],Da[8]=p[8],Da[9]=p[9],Da[10]=p[10],Da[11]=p[11],Da[12]=p[12],Da[13]=p[13],Da[14]=p[14],Da[15]=p[15],Da));a=e.call(this,ea,a,0);R(a)&&16===a.length||d.commandRaise(l,h);V.uniformMatrix4fv(F.location,
!1,Array.isArray(a)||a instanceof Float32Array?a:(rb[0]=a[0],rb[1]=a[1],rb[2]=a[2],rb[3]=a[3],rb[4]=a[4],rb[5]=a[5],rb[6]=a[6],rb[7]=a[7],rb[8]=a[8],rb[9]=a[9],rb[10]=a[10],rb[11]=a[11],rb[12]=a[12],rb[13]=a[13],rb[14]=a[14],rb[15]=a[15],rb));(a=ma.elements)?V.bindBuffer(34963,a.buffer.buffer):P.currentVAO&&(a=ta.getElements(P.currentVAO.elements))&&V.bindBuffer(34963,a.buffer.buffer);p=ma.offset;a?V.drawElements(0,1E4,a.type,p<<(a.type-5121>>1)):V.drawArrays(0,p,1E4);P.setVAO(null);g&&(u.cpuTime+=
performance.now()-n)},scope:function(c,a,e){var l,d,k,h,t,z,B,x,v,q,J,r,ia,T,fa,A,E,D,sa,I,Ea,Ja,K,H,W,F,da,Z,Zb,Qa,O,P,ba,va,Q,ha,wa,aa,R,na,S,ra,ka,V,G;if(l=L.profile)d=performance.now(),u.count++;k=ma.count;ma.count=1E4;h=ma.primitive;ma.primitive=0;t=g.call(this,ea,c,e);z=N[5];N[5]=t;B=n.call(this,ea,c,e);t=N[3];N[3]=B;x=p.call(this,ea,c,e);B=N[4];N[4]=x;x=w.buffer;w.buffer=f;v=w.divisor;w.divisor=0;q=w.normalized;w.normalized=!1;J=w.offset;w.offset=32;r=w.size;w.size=0;ia=w.state;w.state=1;T=
w.stride;w.stride=44;fa=w.type;w.type=5126;A=w.w;w.w=0;E=w.x;w.x=0;D=w.y;w.y=0;sa=w.z;w.z=0;I=y.buffer;y.buffer=m;Ea=y.divisor;y.divisor=0;Ja=y.normalized;y.normalized=!1;K=y.offset;y.offset=0;H=y.size;y.size=0;W=y.state;y.state=1;F=y.stride;y.stride=44;da=y.type;y.type=5126;Z=y.w;y.w=0;Zb=y.x;y.x=0;Qa=y.y;y.y=0;O=y.z;y.z=0;P=C.buffer;C.buffer=b;ba=C.divisor;C.divisor=0;va=C.normalized;C.normalized=!1;Q=C.offset;C.offset=16;ha=C.size;C.size=0;wa=C.state;C.state=1;aa=C.stride;C.stride=44;R=C.type;
C.type=5126;na=C.w;C.w=0;S=C.x;C.x=0;ra=C.y;C.y=0;ka=C.z;C.z=0;V=M.vert;M.vert=2;G=M.frag;M.frag=1;a(ea,c,e);l&&(u.cpuTime+=performance.now()-d);ma.count=k;ma.primitive=h;N[5]=z;N[3]=t;N[4]=B;w.buffer=x;w.divisor=v;w.normalized=q;w.offset=J;w.size=r;w.state=ia;w.stride=T;w.type=fa;w.w=A;w.x=E;w.y=D;w.z=sa;y.buffer=I;y.divisor=Ea;y.normalized=Ja;y.offset=K;y.size=H;y.state=W;y.stride=F;y.type=da;y.w=Z;y.x=Zb;y.y=Qa;y.z=O;C.buffer=P;C.divisor=ba;C.normalized=va;C.offset=Q;C.size=ha;C.state=wa;C.stride=
aa;C.type=R;C.w=na;C.x=S;C.y=ra;C.z=ka;M.vert=V;M.frag=G},batch:function(c,a){var e,l,k;e=S.next;e!==S.cur&&(e?V.bindFramebuffer(36160,e.framebuffer):V.bindFramebuffer(36160,null),S.cur=e);if(L.dirty){var g,p,n;e=O.dither;e!==L.dither&&(e?V.enable(3024):V.disable(3024),L.dither=e);e=O.blend_enable;e!==L.blend_enable&&(e?V.enable(3042):V.disable(3042),L.blend_enable=e);e=Q[0];g=Q[1];p=Q[2];n=Q[3];if(e!==ra[0]||g!==ra[1]||p!==ra[2]||n!==ra[3])V.blendColor(e,g,p,n),ra[0]=e,ra[1]=g,ra[2]=p,ra[3]=n;e=
pa[0];g=pa[1];if(e!==J[0]||g!==J[1])V.blendEquationSeparate(e,g),J[0]=e,J[1]=g;e=K[0];g=K[1];p=K[2];n=K[3];if(e!==ba[0]||g!==ba[1]||p!==ba[2]||n!==ba[3])V.blendFuncSeparate(e,g,p,n),ba[0]=e,ba[1]=g,ba[2]=p,ba[3]=n;e=O.depth_enable;e!==L.depth_enable&&(e?V.enable(2929):V.disable(2929),L.depth_enable=e);e=O.depth_func;e!==L.depth_func&&(V.depthFunc(e),L.depth_func=e);e=ha[0];g=ha[1];if(e!==Ba[0]||g!==Ba[1])V.depthRange(e,g),Ba[0]=e,Ba[1]=g;e=O.depth_mask;e!==L.depth_mask&&(V.depthMask(e),L.depth_mask=
e);e=W[0];g=W[1];p=W[2];n=W[3];if(e!==la[0]||g!==la[1]||p!==la[2]||n!==la[3])V.colorMask(e,g,p,n),la[0]=e,la[1]=g,la[2]=p,la[3]=n;e=O.cull_enable;e!==L.cull_enable&&(e?V.enable(2884):V.disable(2884),L.cull_enable=e);e=O.cull_face;e!==L.cull_face&&(V.cullFace(e),L.cull_face=e);e=O.frontFace;e!==L.frontFace&&(V.frontFace(e),L.frontFace=e);e=O.lineWidth;e!==L.lineWidth&&(V.lineWidth(e),L.lineWidth=e);e=O.polygonOffset_enable;e!==L.polygonOffset_enable&&(e?V.enable(32823):V.disable(32823),L.polygonOffset_enable=
e);e=wa[0];g=wa[1];if(e!==da[0]||g!==da[1])V.polygonOffset(e,g),da[0]=e,da[1]=g;e=O.sample_alpha;e!==L.sample_alpha&&(e?V.enable(32926):V.disable(32926),L.sample_alpha=e);e=O.sample_enable;e!==L.sample_enable&&(e?V.enable(32928):V.disable(32928),L.sample_enable=e);e=xa[0];g=xa[1];if(e!==ka[0]||g!==ka[1])V.sampleCoverage(e,g),ka[0]=e,ka[1]=g;e=O.stencil_enable;e!==L.stencil_enable&&(e?V.enable(2960):V.disable(2960),L.stencil_enable=e);e=O.stencil_mask;e!==L.stencil_mask&&(V.stencilMask(e),L.stencil_mask=
e);e=Qa[0];g=Qa[1];p=Qa[2];if(e!==Ja[0]||g!==Ja[1]||p!==Ja[2])V.stencilFunc(e,g,p),Ja[0]=e,Ja[1]=g,Ja[2]=p;e=ia[0];g=ia[1];p=ia[2];n=ia[3];if(e!==fa[0]||g!==fa[1]||p!==fa[2]||n!==fa[3])V.stencilOpSeparate(e,g,p,n),fa[0]=e,fa[1]=g,fa[2]=p,fa[3]=n;e=Zb[0];g=Zb[1];p=Zb[2];n=Zb[3];if(e!==Ua[0]||g!==Ua[1]||p!==Ua[2]||n!==Ua[3])V.stencilOpSeparate(e,g,p,n),Ua[0]=e,Ua[1]=g,Ua[2]=p,Ua[3]=n;e=O.scissor_enable;e!==L.scissor_enable&&(e?V.enable(3089):V.disable(3089),L.scissor_enable=e);e=oa[0];g=oa[1];p=oa[2];
n=oa[3];if(e!==Aa[0]||g!==Aa[1]||p!==Aa[2]||n!==Aa[3])V.scissor(e,g,p,n),Aa[0]=e,Aa[1]=g,Aa[2]=p,Aa[3]=n;e=sa[0];g=sa[1];p=sa[2];n=sa[3];if(e!==va[0]||g!==va[1]||p!==va[2]||n!==va[3])V.viewport(e,g,p,n),va[0]=e,va[1]=g,va[2]=p,va[3]=n;L.dirty=!1}if(e=L.profile)l=performance.now(),u.count+=a;V.useProgram(r.program);P.setVAO(null);g=G.location;p=t[g];p.buffer||V.enableVertexAttribArray(g);if(5126!==p.type||4!==p.size||p.buffer!==m||!1!==p.normalized||0!==p.offset||44!==p.stride)V.bindBuffer(34962,m.buffer),
V.vertexAttribPointer(g,4,5126,!1,44,0),p.type=5126,p.size=4,p.buffer=m,p.normalized=!1,p.offset=0,p.stride=44;g=H.location;p=t[g];p.buffer||V.enableVertexAttribArray(g);if(5126!==p.type||4!==p.size||p.buffer!==b||!1!==p.normalized||16!==p.offset||44!==p.stride)V.bindBuffer(34962,b.buffer),V.vertexAttribPointer(g,4,5126,!1,44,16),p.type=5126,p.size=4,p.buffer=b,p.normalized=!1,p.offset=16,p.stride=44;g=A.location;p=t[g];p.buffer||V.enableVertexAttribArray(g);if(5126!==p.type||3!==p.size||p.buffer!==
f||!1!==p.normalized||32!==p.offset||44!==p.stride)V.bindBuffer(34962,f.buffer),V.vertexAttribPointer(g,3,5126,!1,44,32),p.type=5126,p.size=3,p.buffer=f,p.normalized=!1,p.offset=32,p.stride=44;g=x.call(this,ea,void 0,k);"number"!==typeof g&&d.commandRaise(v,h);V.uniform1f(D.location,g);g=na.call(this,ea,void 0,k);R(g)&&16===g.length||d.commandRaise(I,h);V.uniformMatrix4fv(ga.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Gb[0]=g[0],Gb[1]=g[1],Gb[2]=g[2],Gb[3]=g[3],Gb[4]=g[4],Gb[5]=g[5],
Gb[6]=g[6],Gb[7]=g[7],Gb[8]=g[8],Gb[9]=g[9],Gb[10]=g[10],Gb[11]=g[11],Gb[12]=g[12],Gb[13]=g[13],Gb[14]=g[14],Gb[15]=g[15],Gb));k=aa.call(this,ea,void 0,k);R(k)&&16===k.length||d.commandRaise(E,h);V.uniformMatrix4fv(F.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Z[0]=k[0],Z[1]=k[1],Z[2]=k[2],Z[3]=k[3],Z[4]=k[4],Z[5]=k[5],Z[6]=k[6],Z[7]=k[7],Z[8]=k[8],Z[9]=k[9],Z[10]=k[10],Z[11]=k[11],Z[12]=k[12],Z[13]=k[13],Z[14]=k[14],Z[15]=k[15],Z));(g=ma.elements)?V.bindBuffer(34963,g.buffer.buffer):
P.currentVAO&&(g=ta.getElements(P.currentVAO.elements))&&V.bindBuffer(34963,g.buffer.buffer);p=ma.offset;for(k=0;k<a;++k)g?V.drawElements(0,1E4,g.type,p<<(g.type-5121>>1)):V.drawArrays(0,p,1E4);P.setVAO(null);e&&(u.cpuTime+=performance.now()-l)}}},"$34,atlas,normal,position,projection,uv,view":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,G,H,F,D,ga,t,ea,L,ma,ta,S,V,R){var O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb,Z,U,ya,Ga,qa,za,Ca,
ja,X,ua,Ka,Fa;O=a.attributes;M=a.buffer;N=a.context;P=a.current;Q=a.draw;ra=a.elements;pa=a.framebuffer;J=a.gl;K=a.isArrayLike;ba=a.isBufferArgs;W=a.next;la=a.shader;ha=a.uniforms;Ba=a.vao;wa=W.blend_color;da=P.blend_color;xa=W.blend_equation;ka=P.blend_equation;oa=W.blend_func;Aa=P.blend_func;Qa=W.colorMask;Ja=P.colorMask;Zb=W.depth_range;Ua=P.depth_range;ia=W.polygonOffset_offset;fa=P.polygonOffset_offset;sa=W.sample_coverage;va=P.sample_coverage;Da=W.scissor_box;rb=P.scissor_box;Gb=W.stencil_func;
Z=P.stencil_func;U=W.stencil_opBack;ya=P.stencil_opBack;Ga=W.stencil_opFront;qa=P.stencil_opFront;za=W.viewport;Ca=P.viewport;ja={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};X=new Float32Array(16);ua=new Float32Array(16);Ka=new Float32Array(16);Fa=new Float32Array(16);return{draw:function(a){var p,n,w,y,t,C,x,v,r,A,E,D,I,Ea,H,F,Q,ha,aa,na,G,ca,ea,ga,la,Fa,Ka,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,pc,rc,nc,qc,ob,Pc,
Qb,cb,Lb,ab,jb;p=N.view;n=q.call(this,N,a,0);N.view=n;w=pa.next;w!==pa.cur&&(w?J.bindFramebuffer(36160,w.framebuffer):J.bindFramebuffer(36160,null),pa.cur=w);if(P.dirty){var Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb;Wa=W.dither;Wa!==P.dither&&(Wa?J.enable(3024):J.disable(3024),P.dither=Wa);Jc=W.blend_enable;Jc!==P.blend_enable&&(Jc?J.enable(3042):J.disable(3042),P.blend_enable=Jc);Mb=
wa[0];Hb=wa[1];sc=wa[2];Nb=wa[3];if(Mb!==da[0]||Hb!==da[1]||sc!==da[2]||Nb!==da[3])J.blendColor(Mb,Hb,sc,Nb),da[0]=Mb,da[1]=Hb,da[2]=sc,da[3]=Nb;kb=xa[0];Fb=xa[1];if(kb!==ka[0]||Fb!==ka[1])J.blendEquationSeparate(kb,Fb),ka[0]=kb,ka[1]=Fb;Cb=oa[0];xb=oa[1];hb=oa[2];$b=oa[3];if(Cb!==Aa[0]||xb!==Aa[1]||hb!==Aa[2]||$b!==Aa[3])J.blendFuncSeparate(Cb,xb,hb,$b),Aa[0]=Cb,Aa[1]=xb,Aa[2]=hb,Aa[3]=$b;Ob=W.depth_enable;Ob!==P.depth_enable&&(Ob?J.enable(2929):J.disable(2929),P.depth_enable=Ob);qb=W.depth_func;
qb!==P.depth_func&&(J.depthFunc(qb),P.depth_func=qb);Ta=Zb[0];Ub=Zb[1];if(Ta!==Ua[0]||Ub!==Ua[1])J.depthRange(Ta,Ub),Ua[0]=Ta,Ua[1]=Ub;zb=W.depth_mask;zb!==P.depth_mask&&(J.depthMask(zb),P.depth_mask=zb);jc=Qa[0];ib=Qa[1];pb=Qa[2];Ia=Qa[3];if(jc!==Ja[0]||ib!==Ja[1]||pb!==Ja[2]||Ia!==Ja[3])J.colorMask(jc,ib,pb,Ia),Ja[0]=jc,Ja[1]=ib,Ja[2]=pb,Ja[3]=Ia;sb=W.frontFace;sb!==P.frontFace&&(J.frontFace(sb),P.frontFace=sb);La=W.lineWidth;La!==P.lineWidth&&(J.lineWidth(La),P.lineWidth=La);eb=W.polygonOffset_enable;
eb!==P.polygonOffset_enable&&(eb?J.enable(32823):J.disable(32823),P.polygonOffset_enable=eb);gb=ia[0];Na=ia[1];if(gb!==fa[0]||Na!==fa[1])J.polygonOffset(gb,Na),fa[0]=gb,fa[1]=Na;lb=W.sample_alpha;lb!==P.sample_alpha&&(lb?J.enable(32926):J.disable(32926),P.sample_alpha=lb);Xa=W.sample_enable;Xa!==P.sample_enable&&(Xa?J.enable(32928):J.disable(32928),P.sample_enable=Xa);ub=sa[0];tb=sa[1];if(ub!==va[0]||tb!==va[1])J.sampleCoverage(ub,tb),va[0]=ub,va[1]=tb;Pa=W.stencil_enable;Pa!==P.stencil_enable&&(Pa?
J.enable(2960):J.disable(2960),P.stencil_enable=Pa);Dc=W.stencil_mask;Dc!==P.stencil_mask&&(J.stencilMask(Dc),P.stencil_mask=Dc);Va=Gb[0];Ib=Gb[1];Db=Gb[2];if(Va!==Z[0]||Ib!==Z[1]||Db!==Z[2])J.stencilFunc(Va,Ib,Db),Z[0]=Va,Z[1]=Ib,Z[2]=Db;Ma=Ga[0];zd=Ga[1];Za=Ga[2];Jb=Ga[3];if(Ma!==qa[0]||zd!==qa[1]||Za!==qa[2]||Jb!==qa[3])J.stencilOpSeparate(Ma,zd,Za,Jb),qa[0]=Ma,qa[1]=zd,qa[2]=Za,qa[3]=Jb;Kb=U[0];mb=U[1];Oa=U[2];ac=U[3];if(Kb!==ya[0]||mb!==ya[1]||Oa!==ya[2]||ac!==ya[3])J.stencilOpSeparate(Kb,mb,
Oa,ac),ya[0]=Kb,ya[1]=mb,ya[2]=Oa,ya[3]=ac;Ra=W.scissor_enable;Ra!==P.scissor_enable&&(Ra?J.enable(3089):J.disable(3089),P.scissor_enable=Ra);vb=Da[0];wb=Da[1];Sa=Da[2];nb=Da[3];if(vb!==rb[0]||wb!==rb[1]||Sa!==rb[2]||nb!==rb[3])J.scissor(vb,wb,Sa,nb),rb[0]=vb,rb[1]=wb,rb[2]=Sa,rb[3]=nb;gc=za[0];Bc=za[1];wc=za[2];bb=za[3];if(gc!==Ca[0]||Bc!==Ca[1]||wc!==Ca[2]||bb!==Ca[3])J.viewport(gc,Bc,wc,bb),Ca[0]=gc,Ca[1]=Bc,Ca[2]=wc,Ca[3]=bb}J.enable(2884);P.cull_enable=!0;J.cullFace(1029);P.cull_face=1029;if(y=
P.profile)t=performance.now(),u.count++;J.useProgram(m.program);Ba.setVAO(null);(C=a.position)&&("object"===typeof C||"function"===typeof C)&&(ba(C)||M.getBuffer(C)||M.getBuffer(C.buffer)||ba(C.buffer)||"constant"in C&&("number"===typeof C.constant||K(C.constant)))||d.commandRaise(b,h);x=!1;v=null;r=!1;E=A=0;D=1;I=0;Ea=5126;ha=Q=F=H=0;ba(C)?(x=!0,v=M.createStream(34962,C),Ea=v.dtype):(v=M.getBuffer(C))?Ea=v.dtype:"constant"in C?(D=2,"number"===typeof C.constant?(F=C.constant,Q=ha=H=0):(F=0<C.constant.length?
C.constant[0]:0,Q=1<C.constant.length?C.constant[1]:0,ha=2<C.constant.length?C.constant[2]:0,H=3<C.constant.length?C.constant[3]:0)):(v=ba(C.buffer)?M.createStream(34962,C.buffer):M.getBuffer(C.buffer),Ea="type"in C?ja[C.type]:v.dtype,r=!!C.normalized,E=C.size|0,A=C.offset|0,I=C.stride|0);aa=ta.location;na=O[aa];if(1===D){if(na.buffer||J.enableVertexAttribArray(aa),G=E||3,na.type!==Ea||na.size!==G||na.buffer!==v||na.normalized!==r||na.offset!==A||na.stride!==I)J.bindBuffer(34962,v.buffer),J.vertexAttribPointer(aa,
G,Ea,r,I,A),na.type=Ea,na.size=G,na.buffer=v,na.normalized=r,na.offset=A,na.stride=I}else if(na.buffer&&(J.disableVertexAttribArray(aa),na.buffer=null),na.x!==F||na.y!==Q||na.z!==ha||na.w!==H)J.vertexAttrib4f(aa,F,Q,ha,H),na.x=F,na.y=Q,na.z=ha,na.w=H;(ca=a.normal)&&("object"===typeof ca||"function"===typeof ca)&&(ba(ca)||M.getBuffer(ca)||M.getBuffer(ca.buffer)||ba(ca.buffer)||"constant"in ca&&("number"===typeof ca.constant||K(ca.constant)))||d.commandRaise(f,h);ea=!1;ga=null;la=!1;Ka=Fa=0;Ed=1;pd=
0;bd=5126;Gc=rd=Oc=td=0;ba(ca)?(ea=!0,ga=M.createStream(34962,ca),bd=ga.dtype):(ga=M.getBuffer(ca))?bd=ga.dtype:"constant"in ca?(Ed=2,"number"===typeof ca.constant?(Oc=ca.constant,rd=Gc=td=0):(Oc=0<ca.constant.length?ca.constant[0]:0,rd=1<ca.constant.length?ca.constant[1]:0,Gc=2<ca.constant.length?ca.constant[2]:0,td=3<ca.constant.length?ca.constant[3]:0)):(ga=ba(ca.buffer)?M.createStream(34962,ca.buffer):M.getBuffer(ca.buffer),bd="type"in ca?ja[ca.type]:ga.dtype,la=!!ca.normalized,Ka=ca.size|0,Fa=
ca.offset|0,pd=ca.stride|0);gd=ma.location;Sc=O[gd];if(1===Ed){if(Sc.buffer||J.enableVertexAttribArray(gd),md=Ka||3,Sc.type!==bd||Sc.size!==md||Sc.buffer!==ga||Sc.normalized!==la||Sc.offset!==Fa||Sc.stride!==pd)J.bindBuffer(34962,ga.buffer),J.vertexAttribPointer(gd,md,bd,la,pd,Fa),Sc.type=bd,Sc.size=md,Sc.buffer=ga,Sc.normalized=la,Sc.offset=Fa,Sc.stride=pd}else if(Sc.buffer&&(J.disableVertexAttribArray(gd),Sc.buffer=null),Sc.x!==Oc||Sc.y!==rd||Sc.z!==Gc||Sc.w!==td)J.vertexAttrib4f(gd,Oc,rd,Gc,td),
Sc.x=Oc,Sc.y=rd,Sc.z=Gc,Sc.w=td;(Vb=a.uv)&&("object"===typeof Vb||"function"===typeof Vb)&&(ba(Vb)||M.getBuffer(Vb)||M.getBuffer(Vb.buffer)||ba(Vb.buffer)||"constant"in Vb&&("number"===typeof Vb.constant||K(Vb.constant)))||d.commandRaise(c,h);Eb=!1;vc=null;yb=!1;Bb=yc=0;Lc=1;mc=0;Hc=5126;fc=Ec=cd=hd=0;ba(Vb)?(Eb=!0,vc=M.createStream(34962,Vb),Hc=vc.dtype):(vc=M.getBuffer(Vb))?Hc=vc.dtype:"constant"in Vb?(Lc=2,"number"===typeof Vb.constant?(cd=Vb.constant,Ec=fc=hd=0):(cd=0<Vb.constant.length?Vb.constant[0]:
0,Ec=1<Vb.constant.length?Vb.constant[1]:0,fc=2<Vb.constant.length?Vb.constant[2]:0,hd=3<Vb.constant.length?Vb.constant[3]:0)):(vc=ba(Vb.buffer)?M.createStream(34962,Vb.buffer):M.getBuffer(Vb.buffer),Hc="type"in Vb?ja[Vb.type]:vc.dtype,yb=!!Vb.normalized,Bb=Vb.size|0,yc=Vb.offset|0,mc=Vb.stride|0);Ic=V.location;pc=O[Ic];if(1===Lc){if(pc.buffer||J.enableVertexAttribArray(Ic),rc=Bb||2,pc.type!==Hc||pc.size!==rc||pc.buffer!==vc||pc.normalized!==yb||pc.offset!==yc||pc.stride!==mc)J.bindBuffer(34962,vc.buffer),
J.vertexAttribPointer(Ic,rc,Hc,yb,mc,yc),pc.type=Hc,pc.size=rc,pc.buffer=vc,pc.normalized=yb,pc.offset=yc,pc.stride=mc}else if(pc.buffer&&(J.disableVertexAttribArray(Ic),pc.buffer=null),pc.x!==cd||pc.y!==Ec||pc.z!==fc||pc.w!==hd)J.vertexAttrib4f(Ic,cd,Ec,fc,hd),pc.x=cd,pc.y=Ec,pc.z=fc,pc.w=hd;nc=k.call(this,N,a,0);K(nc)&&16===nc.length||d.commandRaise(z,h);J.uniformMatrix4fv(S.location,!1,Array.isArray(nc)||nc instanceof Float32Array?nc:(X[0]=nc[0],X[1]=nc[1],X[2]=nc[2],X[3]=nc[3],X[4]=nc[4],X[5]=
nc[5],X[6]=nc[6],X[7]=nc[7],X[8]=nc[8],X[9]=nc[9],X[10]=nc[10],X[11]=nc[11],X[12]=nc[12],X[13]=nc[13],X[14]=nc[14],X[15]=nc[15],X));qc=N.view;K(qc)&&16===qc.length||d.commandRaise(B,h);J.uniformMatrix4fv(R.location,!1,Array.isArray(qc)||qc instanceof Float32Array?qc:(ua[0]=qc[0],ua[1]=qc[1],ua[2]=qc[2],ua[3]=qc[3],ua[4]=qc[4],ua[5]=qc[5],ua[6]=qc[6],ua[7]=qc[7],ua[8]=qc[8],ua[9]=qc[9],ua[10]=qc[10],ua[11]=qc[11],ua[12]=qc[12],ua[13]=qc[13],ua[14]=qc[14],ua[15]=qc[15],ua));(ob=a.atlas)&&"framebuffer"===
ob._reglType&&(ob=ob.color[0]);"function"===typeof ob&&"texture2d"===ob._reglType||d.commandRaise(e,h);Pc=ob._texture;J.uniform1i(L.location,Pc.bind());Qb=a.elements;cb=null;(Lb=ba(Qb))?cb=ra.createStream(Qb):(cb=ra.getElements(Qb),Qb&&!cb&&d.commandRaise(l,h));cb&&J.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;jb=cb?cb.vertCount:-1;0<=jb||d.commandRaise(g,h);jb&&(cb?J.drawElements(ab,jb,cb.type,0<<(cb.type-5121>>1)):J.drawArrays(ab,0,jb),P.dirty=!0,Ba.setVAO(null),N.view=p,y&&(u.cpuTime+=
performance.now()-t),x&&M.destroyStream(v),ea&&M.destroyStream(ga),Eb&&M.destroyStream(vc),Pc.unbind(),Lb&&ra.destroyStream(cb))},scope:function(c,a,b){var e,l,f,g,k,m,t,z,B,q,J,ia,A,fa,U,E,D,I,sa,Ja,H,F,da,Z,Zb,L,Qa,O,ya,qa,Ga,va,wa,X,aa,R,S,ca,ka,G,V,Ua,ga,za,ea,oa,Aa,xa,Ca,Da,Ba,pa,Gb,ma,ua,ta,rb,Fa,Ka,jb,Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb;e=N.view;l=n.call(this,N,c,b);N.view=l;f=W.cull_enable;W.cull_enable=
!0;g=W.cull_face;W.cull_face=1029;if(k=P.profile)m=performance.now(),u.count++;t=c.elements;z=null;(B=ba(t))?z=ra.createStream(t):(z=ra.getElements(t),t&&!z&&d.commandRaise(p,h));q=Q.elements;Q.elements=z;J=Q.offset;Q.offset=0;ia=z?z.vertCount:-1;A=Q.count;Q.count=ia;fa=z?z.primType:4;U=Q.primitive;Q.primitive=fa;E=c.atlas;D=ha[5];ha[5]=E;I=w.call(this,N,c,b);sa=ha[3];ha[3]=I;Ja=N.view;H=ha[4];ha[4]=Ja;(F=c.normal)&&("object"===typeof F||"function"===typeof F)&&(ba(F)||M.getBuffer(F)||M.getBuffer(F.buffer)||
ba(F.buffer)||"constant"in F&&("number"===typeof F.constant||K(F.constant)))||d.commandRaise(y,h);da=!1;Z=null;Zb=0;L=!1;O=Qa=0;ya=1;qa=0;Ga=5126;aa=X=wa=va=0;ba(F)?(da=!0,Z=M.createStream(34962,F),Ga=Z.dtype):(Z=M.getBuffer(F))?Ga=Z.dtype:"constant"in F?(ya=2,"number"===typeof F.constant?(wa=F.constant,X=aa=va=0):(wa=0<F.constant.length?F.constant[0]:0,X=1<F.constant.length?F.constant[1]:0,aa=2<F.constant.length?F.constant[2]:0,va=3<F.constant.length?F.constant[3]:0)):(Z=ba(F.buffer)?M.createStream(34962,
F.buffer):M.getBuffer(F.buffer),Ga="type"in F?ja[F.type]:Z.dtype,L=!!F.normalized,O=F.size|0,Qa=F.offset|0,qa=F.stride|0,Zb=F.divisor|0);R=C.buffer;C.buffer=Z;S=C.divisor;C.divisor=Zb;ca=C.normalized;C.normalized=L;ka=C.offset;C.offset=Qa;G=C.size;C.size=O;V=C.state;C.state=ya;Ua=C.stride;C.stride=qa;ga=C.type;C.type=Ga;za=C.w;C.w=va;ea=C.x;C.x=wa;oa=C.y;C.y=X;Aa=C.z;C.z=aa;(xa=c.position)&&("object"===typeof xa||"function"===typeof xa)&&(ba(xa)||M.getBuffer(xa)||M.getBuffer(xa.buffer)||ba(xa.buffer)||
"constant"in xa&&("number"===typeof xa.constant||K(xa.constant)))||d.commandRaise(r,h);Ca=!1;Da=null;Ba=0;pa=!1;ma=Gb=0;ua=1;ta=0;rb=5126;Wa=jb=Ka=Fa=0;ba(xa)?(Ca=!0,Da=M.createStream(34962,xa),rb=Da.dtype):(Da=M.getBuffer(xa))?rb=Da.dtype:"constant"in xa?(ua=2,"number"===typeof xa.constant?(Ka=xa.constant,jb=Wa=Fa=0):(Ka=0<xa.constant.length?xa.constant[0]:0,jb=1<xa.constant.length?xa.constant[1]:0,Wa=2<xa.constant.length?xa.constant[2]:0,Fa=3<xa.constant.length?xa.constant[3]:0)):(Da=ba(xa.buffer)?
M.createStream(34962,xa.buffer):M.getBuffer(xa.buffer),rb="type"in xa?ja[xa.type]:Da.dtype,pa=!!xa.normalized,ma=xa.size|0,Gb=xa.offset|0,ta=xa.stride|0,Ba=xa.divisor|0);Jc=x.buffer;x.buffer=Da;Mb=x.divisor;x.divisor=Ba;Hb=x.normalized;x.normalized=pa;sc=x.offset;x.offset=Gb;Nb=x.size;x.size=ma;kb=x.state;x.state=ua;Fb=x.stride;x.stride=ta;Cb=x.type;x.type=rb;xb=x.w;x.w=Fa;hb=x.x;x.x=Ka;$b=x.y;x.y=jb;Ob=x.z;x.z=Wa;(qb=c.uv)&&("object"===typeof qb||"function"===typeof qb)&&(ba(qb)||M.getBuffer(qb)||
M.getBuffer(qb.buffer)||ba(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||K(qb.constant)))||d.commandRaise(v,h);Ta=!1;Ub=null;zb=0;jc=!1;pb=ib=0;Ia=1;sb=0;La=5126;lb=Na=gb=eb=0;ba(qb)?(Ta=!0,Ub=M.createStream(34962,qb),La=Ub.dtype):(Ub=M.getBuffer(qb))?La=Ub.dtype:"constant"in qb?(Ia=2,"number"===typeof qb.constant?(gb=qb.constant,Na=lb=eb=0):(gb=0<qb.constant.length?qb.constant[0]:0,Na=1<qb.constant.length?qb.constant[1]:0,lb=2<qb.constant.length?qb.constant[2]:0,eb=3<qb.constant.length?
qb.constant[3]:0)):(Ub=ba(qb.buffer)?M.createStream(34962,qb.buffer):M.getBuffer(qb.buffer),La="type"in qb?ja[qb.type]:Ub.dtype,jc=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,sb=qb.stride|0,zb=qb.divisor|0);Xa=na.buffer;na.buffer=Ub;ub=na.divisor;na.divisor=zb;tb=na.normalized;na.normalized=jc;Pa=na.offset;na.offset=ib;Dc=na.size;na.size=pb;Va=na.state;na.state=Ia;Ib=na.stride;na.stride=sb;Db=na.type;na.type=La;Ma=na.w;na.w=eb;zd=na.x;na.x=gb;Za=na.y;na.y=Na;Jb=na.z;na.z=lb;Kb=la.vert;la.vert=2;mb=
la.frag;la.frag=1;P.dirty=!0;a(N,c,b);N.view=e;W.cull_enable=f;W.cull_face=g;k&&(u.cpuTime+=performance.now()-m);B&&ra.destroyStream(z);Q.elements=q;Q.offset=J;Q.count=A;Q.primitive=U;ha[5]=D;ha[3]=sa;ha[4]=H;da&&M.destroyStream(Z);C.buffer=R;C.divisor=S;C.normalized=ca;C.offset=ka;C.size=G;C.state=V;C.stride=Ua;C.type=ga;C.w=za;C.x=ea;C.y=oa;C.z=Aa;Ca&&M.destroyStream(Da);x.buffer=Jc;x.divisor=Mb;x.normalized=Hb;x.offset=sc;x.size=Nb;x.state=kb;x.stride=Fb;x.type=Cb;x.w=xb;x.x=hb;x.y=$b;x.z=Ob;Ta&&
M.destroyStream(Ub);na.buffer=Xa;na.divisor=ub;na.normalized=tb;na.offset=Pa;na.size=Dc;na.state=Va;na.stride=Ib;na.type=Db;na.w=Ma;na.x=zd;na.y=Za;na.z=Jb;la.vert=Kb;la.frag=mb;P.dirty=!0},batch:function(c,a){var b,e,l,f,g,k,p;b=N.view;e=I.call(this,N,c,0);N.view=e;l=pa.next;l!==pa.cur&&(l?J.bindFramebuffer(36160,l.framebuffer):J.bindFramebuffer(36160,null),pa.cur=l);if(P.dirty){var n,w,m,y,C,z,B,x,v,q,r,Ea,Q,ha,X,na,la,ua,Md,Ed,pd,bd,td,Oc,rd,Gc,gd,Sc,md,Vb,Eb,vc,yb,yc,Bb,Lc,mc,Hc,hd,cd,Ec,fc,Ic,
pc,rc,nc,qc,ob,Pc,Qb,cb,Lb;n=W.dither;n!==P.dither&&(n?J.enable(3024):J.disable(3024),P.dither=n);w=W.blend_enable;w!==P.blend_enable&&(w?J.enable(3042):J.disable(3042),P.blend_enable=w);m=wa[0];y=wa[1];C=wa[2];z=wa[3];if(m!==da[0]||y!==da[1]||C!==da[2]||z!==da[3])J.blendColor(m,y,C,z),da[0]=m,da[1]=y,da[2]=C,da[3]=z;B=xa[0];x=xa[1];if(B!==ka[0]||x!==ka[1])J.blendEquationSeparate(B,x),ka[0]=B,ka[1]=x;v=oa[0];q=oa[1];r=oa[2];Ea=oa[3];if(v!==Aa[0]||q!==Aa[1]||r!==Aa[2]||Ea!==Aa[3])J.blendFuncSeparate(v,
q,r,Ea),Aa[0]=v,Aa[1]=q,Aa[2]=r,Aa[3]=Ea;Q=W.depth_enable;Q!==P.depth_enable&&(Q?J.enable(2929):J.disable(2929),P.depth_enable=Q);ha=W.depth_func;ha!==P.depth_func&&(J.depthFunc(ha),P.depth_func=ha);X=Zb[0];na=Zb[1];if(X!==Ua[0]||na!==Ua[1])J.depthRange(X,na),Ua[0]=X,Ua[1]=na;la=W.depth_mask;la!==P.depth_mask&&(J.depthMask(la),P.depth_mask=la);ua=Qa[0];Md=Qa[1];Ed=Qa[2];pd=Qa[3];if(ua!==Ja[0]||Md!==Ja[1]||Ed!==Ja[2]||pd!==Ja[3])J.colorMask(ua,Md,Ed,pd),Ja[0]=ua,Ja[1]=Md,Ja[2]=Ed,Ja[3]=pd;bd=W.frontFace;
bd!==P.frontFace&&(J.frontFace(bd),P.frontFace=bd);td=W.lineWidth;td!==P.lineWidth&&(J.lineWidth(td),P.lineWidth=td);Oc=W.polygonOffset_enable;Oc!==P.polygonOffset_enable&&(Oc?J.enable(32823):J.disable(32823),P.polygonOffset_enable=Oc);rd=ia[0];Gc=ia[1];if(rd!==fa[0]||Gc!==fa[1])J.polygonOffset(rd,Gc),fa[0]=rd,fa[1]=Gc;gd=W.sample_alpha;gd!==P.sample_alpha&&(gd?J.enable(32926):J.disable(32926),P.sample_alpha=gd);Sc=W.sample_enable;Sc!==P.sample_enable&&(Sc?J.enable(32928):J.disable(32928),P.sample_enable=
Sc);md=sa[0];Vb=sa[1];if(md!==va[0]||Vb!==va[1])J.sampleCoverage(md,Vb),va[0]=md,va[1]=Vb;Eb=W.stencil_enable;Eb!==P.stencil_enable&&(Eb?J.enable(2960):J.disable(2960),P.stencil_enable=Eb);vc=W.stencil_mask;vc!==P.stencil_mask&&(J.stencilMask(vc),P.stencil_mask=vc);yb=Gb[0];yc=Gb[1];Bb=Gb[2];if(yb!==Z[0]||yc!==Z[1]||Bb!==Z[2])J.stencilFunc(yb,yc,Bb),Z[0]=yb,Z[1]=yc,Z[2]=Bb;Lc=Ga[0];mc=Ga[1];Hc=Ga[2];hd=Ga[3];if(Lc!==qa[0]||mc!==qa[1]||Hc!==qa[2]||hd!==qa[3])J.stencilOpSeparate(Lc,mc,Hc,hd),qa[0]=
Lc,qa[1]=mc,qa[2]=Hc,qa[3]=hd;cd=U[0];Ec=U[1];fc=U[2];Ic=U[3];if(cd!==ya[0]||Ec!==ya[1]||fc!==ya[2]||Ic!==ya[3])J.stencilOpSeparate(cd,Ec,fc,Ic),ya[0]=cd,ya[1]=Ec,ya[2]=fc,ya[3]=Ic;pc=W.scissor_enable;pc!==P.scissor_enable&&(pc?J.enable(3089):J.disable(3089),P.scissor_enable=pc);rc=Da[0];nc=Da[1];qc=Da[2];ob=Da[3];if(rc!==rb[0]||nc!==rb[1]||qc!==rb[2]||ob!==rb[3])J.scissor(rc,nc,qc,ob),rb[0]=rc,rb[1]=nc,rb[2]=qc,rb[3]=ob;Pc=za[0];Qb=za[1];cb=za[2];Lb=za[3];if(Pc!==Ca[0]||Qb!==Ca[1]||cb!==Ca[2]||Lb!==
Ca[3])J.viewport(Pc,Qb,cb,Lb),Ca[0]=Pc,Ca[1]=Qb,Ca[2]=cb,Ca[3]=Lb}J.enable(2884);P.cull_enable=!0;J.cullFace(1029);P.cull_face=1029;if(f=P.profile)g=performance.now(),u.count+=a;J.useProgram(aa.program);var ab,jb;Ba.setVAO(null);ab=H.call(this,N,p,k);K(ab)&&16===ab.length||d.commandRaise(F,h);J.uniformMatrix4fv(S.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ka[0]=ab[0],Ka[1]=ab[1],Ka[2]=ab[2],Ka[3]=ab[3],Ka[4]=ab[4],Ka[5]=ab[5],Ka[6]=ab[6],Ka[7]=ab[7],Ka[8]=ab[8],Ka[9]=ab[9],Ka[10]=
ab[10],Ka[11]=ab[11],Ka[12]=ab[12],Ka[13]=ab[13],Ka[14]=ab[14],Ka[15]=ab[15],Ka));jb=N.view;K(jb)&&16===jb.length||d.commandRaise(D,h);J.uniformMatrix4fv(R.location,!1,Array.isArray(jb)||jb instanceof Float32Array?jb:(Fa[0]=jb[0],Fa[1]=jb[1],Fa[2]=jb[2],Fa[3]=jb[3],Fa[4]=jb[4],Fa[5]=jb[5],Fa[6]=jb[6],Fa[7]=jb[7],Fa[8]=jb[8],Fa[9]=jb[9],Fa[10]=jb[10],Fa[11]=jb[11],Fa[12]=jb[12],Fa[13]=jb[13],Fa[14]=jb[14],Fa[15]=jb[15],Fa));for(k=0;k<a;++k){p=c[k];var Wa,Jc,Mb,Hb,sc,Nb,kb,Fb,Cb,xb,hb,$b,Ob,qb,Ta,Ub,
zb,jc,ib,pb,Ia,sb,La,eb,gb,Na,lb,Xa,ub,tb,Pa,Dc,Va,Ib,Db,Ma,zd,Za,Jb,Kb,mb,Oa,ac,Ra,vb,wb,Sa,nb,gc,Bc,wc,bb,kc,Mc,Ya;(Wa=p.position)&&("object"===typeof Wa||"function"===typeof Wa)&&(ba(Wa)||M.getBuffer(Wa)||M.getBuffer(Wa.buffer)||ba(Wa.buffer)||"constant"in Wa&&("number"===typeof Wa.constant||K(Wa.constant)))||d.commandRaise(E,h);Jc=!1;Mb=null;Hb=!1;Nb=sc=0;kb=1;Fb=0;Cb=5126;Ob=$b=hb=xb=0;ba(Wa)?(Jc=!0,Mb=M.createStream(34962,Wa),Cb=Mb.dtype):(Mb=M.getBuffer(Wa))?Cb=Mb.dtype:"constant"in Wa?(kb=
2,"number"===typeof Wa.constant?(hb=Wa.constant,$b=Ob=xb=0):(hb=0<Wa.constant.length?Wa.constant[0]:0,$b=1<Wa.constant.length?Wa.constant[1]:0,Ob=2<Wa.constant.length?Wa.constant[2]:0,xb=3<Wa.constant.length?Wa.constant[3]:0)):(Mb=ba(Wa.buffer)?M.createStream(34962,Wa.buffer):M.getBuffer(Wa.buffer),Cb="type"in Wa?ja[Wa.type]:Mb.dtype,Hb=!!Wa.normalized,Nb=Wa.size|0,sc=Wa.offset|0,Fb=Wa.stride|0);qb=ta.location;Ta=O[qb];if(1===kb){if(Ta.buffer||J.enableVertexAttribArray(qb),Ub=Nb||3,Ta.type!==Cb||
Ta.size!==Ub||Ta.buffer!==Mb||Ta.normalized!==Hb||Ta.offset!==sc||Ta.stride!==Fb)J.bindBuffer(34962,Mb.buffer),J.vertexAttribPointer(qb,Ub,Cb,Hb,Fb,sc),Ta.type=Cb,Ta.size=Ub,Ta.buffer=Mb,Ta.normalized=Hb,Ta.offset=sc,Ta.stride=Fb}else if(Ta.buffer&&(J.disableVertexAttribArray(qb),Ta.buffer=null),Ta.x!==hb||Ta.y!==$b||Ta.z!==Ob||Ta.w!==xb)J.vertexAttrib4f(qb,hb,$b,Ob,xb),Ta.x=hb,Ta.y=$b,Ta.z=Ob,Ta.w=xb;(zb=p.normal)&&("object"===typeof zb||"function"===typeof zb)&&(ba(zb)||M.getBuffer(zb)||M.getBuffer(zb.buffer)||
ba(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||K(zb.constant)))||d.commandRaise(A,h);jc=!1;ib=null;pb=!1;sb=Ia=0;La=1;eb=0;gb=5126;ub=Xa=lb=Na=0;ba(zb)?(jc=!0,ib=M.createStream(34962,zb),gb=ib.dtype):(ib=M.getBuffer(zb))?gb=ib.dtype:"constant"in zb?(La=2,"number"===typeof zb.constant?(lb=zb.constant,Xa=ub=Na=0):(lb=0<zb.constant.length?zb.constant[0]:0,Xa=1<zb.constant.length?zb.constant[1]:0,ub=2<zb.constant.length?zb.constant[2]:0,Na=3<zb.constant.length?zb.constant[3]:0)):(ib=
ba(zb.buffer)?M.createStream(34962,zb.buffer):M.getBuffer(zb.buffer),gb="type"in zb?ja[zb.type]:ib.dtype,pb=!!zb.normalized,sb=zb.size|0,Ia=zb.offset|0,eb=zb.stride|0);tb=ma.location;Pa=O[tb];if(1===La){if(Pa.buffer||J.enableVertexAttribArray(tb),Dc=sb||3,Pa.type!==gb||Pa.size!==Dc||Pa.buffer!==ib||Pa.normalized!==pb||Pa.offset!==Ia||Pa.stride!==eb)J.bindBuffer(34962,ib.buffer),J.vertexAttribPointer(tb,Dc,gb,pb,eb,Ia),Pa.type=gb,Pa.size=Dc,Pa.buffer=ib,Pa.normalized=pb,Pa.offset=Ia,Pa.stride=eb}else if(Pa.buffer&&
(J.disableVertexAttribArray(tb),Pa.buffer=null),Pa.x!==lb||Pa.y!==Xa||Pa.z!==ub||Pa.w!==Na)J.vertexAttrib4f(tb,lb,Xa,ub,Na),Pa.x=lb,Pa.y=Xa,Pa.z=ub,Pa.w=Na;(Va=p.uv)&&("object"===typeof Va||"function"===typeof Va)&&(ba(Va)||M.getBuffer(Va)||M.getBuffer(Va.buffer)||ba(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||K(Va.constant)))||d.commandRaise(G,h);Ib=!1;Db=null;Ma=!1;Za=zd=0;Jb=1;Kb=0;mb=5126;vb=Ra=ac=Oa=0;ba(Va)?(Ib=!0,Db=M.createStream(34962,Va),mb=Db.dtype):(Db=M.getBuffer(Va))?
mb=Db.dtype:"constant"in Va?(Jb=2,"number"===typeof Va.constant?(ac=Va.constant,Ra=vb=Oa=0):(ac=0<Va.constant.length?Va.constant[0]:0,Ra=1<Va.constant.length?Va.constant[1]:0,vb=2<Va.constant.length?Va.constant[2]:0,Oa=3<Va.constant.length?Va.constant[3]:0)):(Db=ba(Va.buffer)?M.createStream(34962,Va.buffer):M.getBuffer(Va.buffer),mb="type"in Va?ja[Va.type]:Db.dtype,Ma=!!Va.normalized,Za=Va.size|0,zd=Va.offset|0,Kb=Va.stride|0);wb=V.location;Sa=O[wb];if(1===Jb){if(Sa.buffer||J.enableVertexAttribArray(wb),
nb=Za||2,Sa.type!==mb||Sa.size!==nb||Sa.buffer!==Db||Sa.normalized!==Ma||Sa.offset!==zd||Sa.stride!==Kb)J.bindBuffer(34962,Db.buffer),J.vertexAttribPointer(wb,nb,mb,Ma,Kb,zd),Sa.type=mb,Sa.size=nb,Sa.buffer=Db,Sa.normalized=Ma,Sa.offset=zd,Sa.stride=Kb}else if(Sa.buffer&&(J.disableVertexAttribArray(wb),Sa.buffer=null),Sa.x!==ac||Sa.y!==Ra||Sa.z!==vb||Sa.w!==Oa)J.vertexAttrib4f(wb,ac,Ra,vb,Oa),Sa.x=ac,Sa.y=Ra,Sa.z=vb,Sa.w=Oa;(gc=p.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===
typeof gc&&"texture2d"===gc._reglType||d.commandRaise(ga,h);Bc=gc._texture;J.uniform1i(L.location,Bc.bind());wc=p.elements;bb=null;(kc=ba(wc))?bb=ra.createStream(wc):(bb=ra.getElements(wc),wc&&!bb&&d.commandRaise(t,h));bb&&J.bindBuffer(34963,bb.buffer.buffer);Mc=bb?bb.primType:4;Ya=bb?bb.vertCount:-1;0<=Ya||d.commandRaise(ea,h);Ya&&(bb?J.drawElements(Mc,Ya,bb.type,0<<(bb.type-5121>>1)):J.drawArrays(Mc,0,Ya),Jc&&M.destroyStream(Mb),jc&&M.destroyStream(ib),Ib&&M.destroyStream(Db),Bc.unbind(),kc&&ra.destroyStream(bb))}P.dirty=
!0;Ba.setVAO(null);N.view=b;f&&(u.cpuTime+=performance.now()-g)}}},"$7,color,position":function(a,d,h,u,q,m,b,f,c,k){var z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,ca,H,F,D,G,t,ea,L,ma,ta,S,V,R,O,M,N,P,Q;z=a.attributes;B=a.context;e=a.current;l=a.draw;g=a.elements;n=a.framebuffer;p=a.gl;w=a.next;y=a.shader;C=a.uniforms;r=a.vao;x=w.blend_color;v=e.blend_color;na=w.blend_equation;I=e.blend_equation;aa=w.blend_func;E=e.blend_func;A=w.colorMask;ca=e.colorMask;H=w.depth_range;F=e.depth_range;D=w.polygonOffset_offset;
G=e.polygonOffset_offset;t=w.sample_coverage;ea=e.sample_coverage;L=w.scissor_box;ma=e.scissor_box;ta=w.stencil_func;S=e.stencil_func;V=w.stencil_opBack;R=e.stencil_opBack;O=w.stencil_opFront;M=e.stencil_opFront;N=w.viewport;P=e.viewport;Q=[1,0,0,1];return{draw:function(a){var b,d,f,y;a=n.next;a!==n.cur&&(a?p.bindFramebuffer(36160,a.framebuffer):p.bindFramebuffer(36160,null),n.cur=a);if(e.dirty){a=w.dither;a!==e.dither&&(a?p.enable(3024):p.disable(3024),e.dither=a);a=w.blend_enable;a!==e.blend_enable&&
(a?p.enable(3042):p.disable(3042),e.blend_enable=a);a=x[0];d=x[1];f=x[2];y=x[3];if(a!==v[0]||d!==v[1]||f!==v[2]||y!==v[3])p.blendColor(a,d,f,y),v[0]=a,v[1]=d,v[2]=f,v[3]=y;a=na[0];d=na[1];if(a!==I[0]||d!==I[1])p.blendEquationSeparate(a,d),I[0]=a,I[1]=d;a=aa[0];d=aa[1];f=aa[2];y=aa[3];if(a!==E[0]||d!==E[1]||f!==E[2]||y!==E[3])p.blendFuncSeparate(a,d,f,y),E[0]=a,E[1]=d,E[2]=f,E[3]=y;a=w.depth_enable;a!==e.depth_enable&&(a?p.enable(2929):p.disable(2929),e.depth_enable=a);a=w.depth_func;a!==e.depth_func&&
(p.depthFunc(a),e.depth_func=a);a=H[0];d=H[1];if(a!==F[0]||d!==F[1])p.depthRange(a,d),F[0]=a,F[1]=d;a=w.depth_mask;a!==e.depth_mask&&(p.depthMask(a),e.depth_mask=a);a=A[0];d=A[1];f=A[2];y=A[3];if(a!==ca[0]||d!==ca[1]||f!==ca[2]||y!==ca[3])p.colorMask(a,d,f,y),ca[0]=a,ca[1]=d,ca[2]=f,ca[3]=y;a=w.cull_enable;a!==e.cull_enable&&(a?p.enable(2884):p.disable(2884),e.cull_enable=a);a=w.cull_face;a!==e.cull_face&&(p.cullFace(a),e.cull_face=a);a=w.frontFace;a!==e.frontFace&&(p.frontFace(a),e.frontFace=a);
a=w.lineWidth;a!==e.lineWidth&&(p.lineWidth(a),e.lineWidth=a);a=w.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?p.enable(32823):p.disable(32823),e.polygonOffset_enable=a);a=D[0];d=D[1];if(a!==G[0]||d!==G[1])p.polygonOffset(a,d),G[0]=a,G[1]=d;a=w.sample_alpha;a!==e.sample_alpha&&(a?p.enable(32926):p.disable(32926),e.sample_alpha=a);a=w.sample_enable;a!==e.sample_enable&&(a?p.enable(32928):p.disable(32928),e.sample_enable=a);a=t[0];d=t[1];if(a!==ea[0]||d!==ea[1])p.sampleCoverage(a,d),ea[0]=a,
ea[1]=d;a=w.stencil_enable;a!==e.stencil_enable&&(a?p.enable(2960):p.disable(2960),e.stencil_enable=a);a=w.stencil_mask;a!==e.stencil_mask&&(p.stencilMask(a),e.stencil_mask=a);a=ta[0];d=ta[1];f=ta[2];if(a!==S[0]||d!==S[1]||f!==S[2])p.stencilFunc(a,d,f),S[0]=a,S[1]=d,S[2]=f;a=O[0];d=O[1];f=O[2];y=O[3];if(a!==M[0]||d!==M[1]||f!==M[2]||y!==M[3])p.stencilOpSeparate(a,d,f,y),M[0]=a,M[1]=d,M[2]=f,M[3]=y;a=V[0];d=V[1];f=V[2];y=V[3];if(a!==R[0]||d!==R[1]||f!==R[2]||y!==R[3])p.stencilOpSeparate(a,d,f,y),R[0]=
a,R[1]=d,R[2]=f,R[3]=y;a=w.scissor_enable;a!==e.scissor_enable&&(a?p.enable(3089):p.disable(3089),e.scissor_enable=a);a=L[0];d=L[1];f=L[2];y=L[3];if(a!==ma[0]||d!==ma[1]||f!==ma[2]||y!==ma[3])p.scissor(a,d,f,y),ma[0]=a,ma[1]=d,ma[2]=f,ma[3]=y;a=N[0];d=N[1];f=N[2];y=N[3];if(a!==P[0]||d!==P[1]||f!==P[2]||y!==P[3])p.viewport(a,d,f,y),P[0]=a,P[1]=d,P[2]=f,P[3]=y;e.dirty=!1}if(a=e.profile)b=performance.now(),u.count++;p.useProgram(q.program);r.setVAO(null);d=k.location;f=z[d];f.buffer||p.enableVertexAttribArray(d);
if(f.type!==m.dtype||2!==f.size||f.buffer!==m||!1!==f.normalized||0!==f.offset||0!==f.stride)p.bindBuffer(34962,m.buffer),p.vertexAttribPointer(d,2,m.dtype,!1,0,0),f.type=m.dtype,f.size=2,f.buffer=m,f.normalized=!1,f.offset=0,f.stride=0;p.uniform4f(c.location,1,0,0,1);(d=l.elements)?p.bindBuffer(34963,d.buffer.buffer):r.currentVAO&&(d=g.getElements(r.currentVAO.elements))&&p.bindBuffer(34963,d.buffer.buffer);f=l.primitive;y=l.offset;d?p.drawElements(f,3,d.type,y<<(d.type-5121>>1)):p.drawArrays(f,
y,3);r.setVAO(null);a&&(u.cpuTime+=performance.now()-b)},scope:function(c,a,d){var f,g,k,p,n,w,h,t,z,x,v,q,r,A,T,E,ia,fa;if(f=e.profile)g=performance.now(),u.count++;k=l.count;l.count=3;p=C[3];C[3]=Q;n=b.buffer;b.buffer=m;w=b.divisor;b.divisor=0;h=b.normalized;b.normalized=!1;t=b.offset;b.offset=0;z=b.size;b.size=0;x=b.state;b.state=1;v=b.stride;b.stride=0;q=b.type;b.type=m.dtype;r=b.w;b.w=0;A=b.x;b.x=0;T=b.y;b.y=0;E=b.z;b.z=0;ia=y.vert;y.vert=2;fa=y.frag;y.frag=1;a(B,c,d);f&&(u.cpuTime+=performance.now()-
g);l.count=k;C[3]=p;b.buffer=n;b.divisor=w;b.normalized=h;b.offset=t;b.size=z;b.state=x;b.stride=v;b.type=q;b.w=r;b.x=A;b.y=T;b.z=E;y.vert=ia;y.frag=fa},batch:function(a,b){var d,y,h;d=n.next;d!==n.cur&&(d?p.bindFramebuffer(36160,d.framebuffer):p.bindFramebuffer(36160,null),n.cur=d);if(e.dirty){var C,B;d=w.dither;d!==e.dither&&(d?p.enable(3024):p.disable(3024),e.dither=d);d=w.blend_enable;d!==e.blend_enable&&(d?p.enable(3042):p.disable(3042),e.blend_enable=d);d=x[0];h=x[1];C=x[2];B=x[3];if(d!==v[0]||
h!==v[1]||C!==v[2]||B!==v[3])p.blendColor(d,h,C,B),v[0]=d,v[1]=h,v[2]=C,v[3]=B;d=na[0];h=na[1];if(d!==I[0]||h!==I[1])p.blendEquationSeparate(d,h),I[0]=d,I[1]=h;d=aa[0];h=aa[1];C=aa[2];B=aa[3];if(d!==E[0]||h!==E[1]||C!==E[2]||B!==E[3])p.blendFuncSeparate(d,h,C,B),E[0]=d,E[1]=h,E[2]=C,E[3]=B;d=w.depth_enable;d!==e.depth_enable&&(d?p.enable(2929):p.disable(2929),e.depth_enable=d);d=w.depth_func;d!==e.depth_func&&(p.depthFunc(d),e.depth_func=d);d=H[0];h=H[1];if(d!==F[0]||h!==F[1])p.depthRange(d,h),F[0]=
d,F[1]=h;d=w.depth_mask;d!==e.depth_mask&&(p.depthMask(d),e.depth_mask=d);d=A[0];h=A[1];C=A[2];B=A[3];if(d!==ca[0]||h!==ca[1]||C!==ca[2]||B!==ca[3])p.colorMask(d,h,C,B),ca[0]=d,ca[1]=h,ca[2]=C,ca[3]=B;d=w.cull_enable;d!==e.cull_enable&&(d?p.enable(2884):p.disable(2884),e.cull_enable=d);d=w.cull_face;d!==e.cull_face&&(p.cullFace(d),e.cull_face=d);d=w.frontFace;d!==e.frontFace&&(p.frontFace(d),e.frontFace=d);d=w.lineWidth;d!==e.lineWidth&&(p.lineWidth(d),e.lineWidth=d);d=w.polygonOffset_enable;d!==
e.polygonOffset_enable&&(d?p.enable(32823):p.disable(32823),e.polygonOffset_enable=d);d=D[0];h=D[1];if(d!==G[0]||h!==G[1])p.polygonOffset(d,h),G[0]=d,G[1]=h;d=w.sample_alpha;d!==e.sample_alpha&&(d?p.enable(32926):p.disable(32926),e.sample_alpha=d);d=w.sample_enable;d!==e.sample_enable&&(d?p.enable(32928):p.disable(32928),e.sample_enable=d);d=t[0];h=t[1];if(d!==ea[0]||h!==ea[1])p.sampleCoverage(d,h),ea[0]=d,ea[1]=h;d=w.stencil_enable;d!==e.stencil_enable&&(d?p.enable(2960):p.disable(2960),e.stencil_enable=
d);d=w.stencil_mask;d!==e.stencil_mask&&(p.stencilMask(d),e.stencil_mask=d);d=ta[0];h=ta[1];C=ta[2];if(d!==S[0]||h!==S[1]||C!==S[2])p.stencilFunc(d,h,C),S[0]=d,S[1]=h,S[2]=C;d=O[0];h=O[1];C=O[2];B=O[3];if(d!==M[0]||h!==M[1]||C!==M[2]||B!==M[3])p.stencilOpSeparate(d,h,C,B),M[0]=d,M[1]=h,M[2]=C,M[3]=B;d=V[0];h=V[1];C=V[2];B=V[3];if(d!==R[0]||h!==R[1]||C!==R[2]||B!==R[3])p.stencilOpSeparate(d,h,C,B),R[0]=d,R[1]=h,R[2]=C,R[3]=B;d=w.scissor_enable;d!==e.scissor_enable&&(d?p.enable(3089):p.disable(3089),
e.scissor_enable=d);d=L[0];h=L[1];C=L[2];B=L[3];if(d!==ma[0]||h!==ma[1]||C!==ma[2]||B!==ma[3])p.scissor(d,h,C,B),ma[0]=d,ma[1]=h,ma[2]=C,ma[3]=B;d=N[0];h=N[1];C=N[2];B=N[3];if(d!==P[0]||h!==P[1]||C!==P[2]||B!==P[3])p.viewport(d,h,C,B),P[0]=d,P[1]=h,P[2]=C,P[3]=B;e.dirty=!1}if(d=e.profile)y=performance.now(),u.count+=b;p.useProgram(f.program);var q;r.setVAO(null);h=k.location;C=z[h];C.buffer||p.enableVertexAttribArray(h);if(C.type!==m.dtype||2!==C.size||C.buffer!==m||!1!==C.normalized||0!==C.offset||
0!==C.stride)p.bindBuffer(34962,m.buffer),p.vertexAttribPointer(h,2,m.dtype,!1,0,0),C.type=m.dtype,C.size=2,C.buffer=m,C.normalized=!1,C.offset=0,C.stride=0;p.uniform4f(c.location,1,0,0,1);(C=l.elements)?p.bindBuffer(34963,C.buffer.buffer):r.currentVAO&&(C=g.getElements(r.currentVAO.elements))&&p.bindBuffer(34963,C.buffer.buffer);B=l.primitive;q=l.offset;for(h=0;h<b;++h)C?p.drawElements(B,3,C.type,q<<(C.type-5121>>1)):p.drawArrays(B,q,3);r.setVAO(null);d&&(u.cpuTime+=performance.now()-y)}}},"$19,angle,color,offset,position":function(a,
d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na){var I,aa,E,A,G,H,F,D,ga,t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa;I=a.attributes;aa=a.context;E=a.current;A=a.draw;G=a.elements;H=a.framebuffer;F=a.gl;D=a.isArrayLike;ga=a.next;t=a.shader;ea=a.uniforms;L=a.vao;ma=ga.blend_color;ta=E.blend_color;S=ga.blend_equation;V=E.blend_equation;R=ga.blend_func;O=E.blend_func;M=ga.colorMask;N=E.colorMask;P=ga.depth_range;Q=E.depth_range;ra=ga.polygonOffset_offset;pa=E.polygonOffset_offset;
J=ga.sample_coverage;K=E.sample_coverage;ba=ga.scissor_box;W=E.scissor_box;la=ga.stencil_func;ha=E.stencil_func;Ba=ga.stencil_opBack;wa=E.stencil_opBack;da=ga.stencil_opFront;xa=E.stencil_opFront;ka=ga.viewport;oa=E.viewport;return{draw:function(a){var e,l,g,p;e=H.next;e!==H.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),H.cur=e);if(E.dirty){var n;e=ga.dither;e!==E.dither&&(e?F.enable(3024):F.disable(3024),E.dither=e);e=ga.blend_enable;e!==E.blend_enable&&(e?F.enable(3042):
F.disable(3042),E.blend_enable=e);e=ma[0];g=ma[1];p=ma[2];n=ma[3];if(e!==ta[0]||g!==ta[1]||p!==ta[2]||n!==ta[3])F.blendColor(e,g,p,n),ta[0]=e,ta[1]=g,ta[2]=p,ta[3]=n;e=S[0];g=S[1];if(e!==V[0]||g!==V[1])F.blendEquationSeparate(e,g),V[0]=e,V[1]=g;e=R[0];g=R[1];p=R[2];n=R[3];if(e!==O[0]||g!==O[1]||p!==O[2]||n!==O[3])F.blendFuncSeparate(e,g,p,n),O[0]=e,O[1]=g,O[2]=p,O[3]=n;e=ga.depth_func;e!==E.depth_func&&(F.depthFunc(e),E.depth_func=e);e=P[0];g=P[1];if(e!==Q[0]||g!==Q[1])F.depthRange(e,g),Q[0]=e,Q[1]=
g;e=ga.depth_mask;e!==E.depth_mask&&(F.depthMask(e),E.depth_mask=e);e=M[0];g=M[1];p=M[2];n=M[3];if(e!==N[0]||g!==N[1]||p!==N[2]||n!==N[3])F.colorMask(e,g,p,n),N[0]=e,N[1]=g,N[2]=p,N[3]=n;e=ga.cull_enable;e!==E.cull_enable&&(e?F.enable(2884):F.disable(2884),E.cull_enable=e);e=ga.cull_face;e!==E.cull_face&&(F.cullFace(e),E.cull_face=e);e=ga.frontFace;e!==E.frontFace&&(F.frontFace(e),E.frontFace=e);e=ga.lineWidth;e!==E.lineWidth&&(F.lineWidth(e),E.lineWidth=e);e=ga.polygonOffset_enable;e!==E.polygonOffset_enable&&
(e?F.enable(32823):F.disable(32823),E.polygonOffset_enable=e);e=ra[0];g=ra[1];if(e!==pa[0]||g!==pa[1])F.polygonOffset(e,g),pa[0]=e,pa[1]=g;e=ga.sample_alpha;e!==E.sample_alpha&&(e?F.enable(32926):F.disable(32926),E.sample_alpha=e);e=ga.sample_enable;e!==E.sample_enable&&(e?F.enable(32928):F.disable(32928),E.sample_enable=e);e=J[0];g=J[1];if(e!==K[0]||g!==K[1])F.sampleCoverage(e,g),K[0]=e,K[1]=g;e=ga.stencil_enable;e!==E.stencil_enable&&(e?F.enable(2960):F.disable(2960),E.stencil_enable=e);e=ga.stencil_mask;
e!==E.stencil_mask&&(F.stencilMask(e),E.stencil_mask=e);e=la[0];g=la[1];p=la[2];if(e!==ha[0]||g!==ha[1]||p!==ha[2])F.stencilFunc(e,g,p),ha[0]=e,ha[1]=g,ha[2]=p;e=da[0];g=da[1];p=da[2];n=da[3];if(e!==xa[0]||g!==xa[1]||p!==xa[2]||n!==xa[3])F.stencilOpSeparate(e,g,p,n),xa[0]=e,xa[1]=g,xa[2]=p,xa[3]=n;e=Ba[0];g=Ba[1];p=Ba[2];n=Ba[3];if(e!==wa[0]||g!==wa[1]||p!==wa[2]||n!==wa[3])F.stencilOpSeparate(e,g,p,n),wa[0]=e,wa[1]=g,wa[2]=p,wa[3]=n;e=ga.scissor_enable;e!==E.scissor_enable&&(e?F.enable(3089):F.disable(3089),
E.scissor_enable=e);e=ba[0];g=ba[1];p=ba[2];n=ba[3];if(e!==W[0]||g!==W[1]||p!==W[2]||n!==W[3])F.scissor(e,g,p,n),W[0]=e,W[1]=g,W[2]=p,W[3]=n;e=ka[0];g=ka[1];p=ka[2];n=ka[3];if(e!==oa[0]||g!==oa[1]||p!==oa[2]||n!==oa[3])F.viewport(e,g,p,n),oa[0]=e,oa[1]=g,oa[2]=p,oa[3]=n}F.disable(2929);E.depth_enable=!1;if(e=E.profile)l=performance.now(),u.count++;F.useProgram(q.program);L.setVAO(null);g=na.location;p=I[g];p.buffer||F.enableVertexAttribArray(g);if(p.type!==m.dtype||2!==p.size||p.buffer!==m||!1!==
p.normalized||0!==p.offset||0!==p.stride)F.bindBuffer(34962,m.buffer),F.vertexAttribPointer(g,2,m.dtype,!1,0,0),p.type=m.dtype,p.size=2,p.buffer=m,p.normalized=!1,p.offset=0,p.stride=0;g=b.call(this,aa,a,0);"number"!==typeof g&&d.commandRaise(f,h);F.uniform1f(r.location,g);g=a.offset;D(g)&&2===g.length||d.commandRaise(c,h);F.uniform2f(v.location,g[0],g[1]);a=k.call(this,aa,a,0);D(a)&&4===a.length||d.commandRaise(z,h);F.uniform4f(x.location,a[0],a[1],a[2],a[3]);(a=A.elements)?F.bindBuffer(34963,a.buffer.buffer):
L.currentVAO&&(a=G.getElements(L.currentVAO.elements))&&F.bindBuffer(34963,a.buffer.buffer);g=A.primitive;p=A.offset;a?F.drawElements(g,3,a.type,p<<(a.type-5121>>1)):F.drawArrays(g,p,3);E.dirty=!0;L.setVAO(null);e&&(u.cpuTime+=performance.now()-l)},scope:function(c,a,b){var d,f,g,k,p,n,w,y,h,C,z,x,v,q,r,T,D,I,Ea,F,H;d=ga.depth_enable;ga.depth_enable=!1;if(f=E.profile)g=performance.now(),u.count++;k=A.count;A.count=3;p=B.call(this,aa,c,b);n=ea[3];ea[3]=p;w=e.call(this,aa,c,b);p=ea[5];ea[5]=w;y=c.offset;
w=ea[4];ea[4]=y;y=l.buffer;l.buffer=m;h=l.divisor;l.divisor=0;C=l.normalized;l.normalized=!1;z=l.offset;l.offset=0;x=l.size;l.size=0;v=l.state;l.state=1;q=l.stride;l.stride=0;r=l.type;l.type=m.dtype;T=l.w;l.w=0;D=l.x;l.x=0;I=l.y;l.y=0;Ea=l.z;l.z=0;F=t.vert;t.vert=2;H=t.frag;t.frag=1;E.dirty=!0;a(aa,c,b);ga.depth_enable=d;f&&(u.cpuTime+=performance.now()-g);A.count=k;ea[3]=n;ea[5]=p;ea[4]=w;l.buffer=y;l.divisor=h;l.normalized=C;l.offset=z;l.size=x;l.state=v;l.stride=q;l.type=r;l.w=T;l.x=D;l.y=I;l.z=
Ea;t.vert=F;t.frag=H;E.dirty=!0},batch:function(c,a){var e,b,l,f;e=H.next;e!==H.cur&&(e?F.bindFramebuffer(36160,e.framebuffer):F.bindFramebuffer(36160,null),H.cur=e);if(E.dirty){var k,t,B;e=ga.dither;e!==E.dither&&(e?F.enable(3024):F.disable(3024),E.dither=e);e=ga.blend_enable;e!==E.blend_enable&&(e?F.enable(3042):F.disable(3042),E.blend_enable=e);e=ma[0];k=ma[1];t=ma[2];B=ma[3];if(e!==ta[0]||k!==ta[1]||t!==ta[2]||B!==ta[3])F.blendColor(e,k,t,B),ta[0]=e,ta[1]=k,ta[2]=t,ta[3]=B;e=S[0];k=S[1];if(e!==
V[0]||k!==V[1])F.blendEquationSeparate(e,k),V[0]=e,V[1]=k;e=R[0];k=R[1];t=R[2];B=R[3];if(e!==O[0]||k!==O[1]||t!==O[2]||B!==O[3])F.blendFuncSeparate(e,k,t,B),O[0]=e,O[1]=k,O[2]=t,O[3]=B;e=ga.depth_func;e!==E.depth_func&&(F.depthFunc(e),E.depth_func=e);e=P[0];k=P[1];if(e!==Q[0]||k!==Q[1])F.depthRange(e,k),Q[0]=e,Q[1]=k;e=ga.depth_mask;e!==E.depth_mask&&(F.depthMask(e),E.depth_mask=e);e=M[0];k=M[1];t=M[2];B=M[3];if(e!==N[0]||k!==N[1]||t!==N[2]||B!==N[3])F.colorMask(e,k,t,B),N[0]=e,N[1]=k,N[2]=t,N[3]=
B;e=ga.cull_enable;e!==E.cull_enable&&(e?F.enable(2884):F.disable(2884),E.cull_enable=e);e=ga.cull_face;e!==E.cull_face&&(F.cullFace(e),E.cull_face=e);e=ga.frontFace;e!==E.frontFace&&(F.frontFace(e),E.frontFace=e);e=ga.lineWidth;e!==E.lineWidth&&(F.lineWidth(e),E.lineWidth=e);e=ga.polygonOffset_enable;e!==E.polygonOffset_enable&&(e?F.enable(32823):F.disable(32823),E.polygonOffset_enable=e);e=ra[0];k=ra[1];if(e!==pa[0]||k!==pa[1])F.polygonOffset(e,k),pa[0]=e,pa[1]=k;e=ga.sample_alpha;e!==E.sample_alpha&&
(e?F.enable(32926):F.disable(32926),E.sample_alpha=e);e=ga.sample_enable;e!==E.sample_enable&&(e?F.enable(32928):F.disable(32928),E.sample_enable=e);e=J[0];k=J[1];if(e!==K[0]||k!==K[1])F.sampleCoverage(e,k),K[0]=e,K[1]=k;e=ga.stencil_enable;e!==E.stencil_enable&&(e?F.enable(2960):F.disable(2960),E.stencil_enable=e);e=ga.stencil_mask;e!==E.stencil_mask&&(F.stencilMask(e),E.stencil_mask=e);e=la[0];k=la[1];t=la[2];if(e!==ha[0]||k!==ha[1]||t!==ha[2])F.stencilFunc(e,k,t),ha[0]=e,ha[1]=k,ha[2]=t;e=da[0];
k=da[1];t=da[2];B=da[3];if(e!==xa[0]||k!==xa[1]||t!==xa[2]||B!==xa[3])F.stencilOpSeparate(e,k,t,B),xa[0]=e,xa[1]=k,xa[2]=t,xa[3]=B;e=Ba[0];k=Ba[1];t=Ba[2];B=Ba[3];if(e!==wa[0]||k!==wa[1]||t!==wa[2]||B!==wa[3])F.stencilOpSeparate(e,k,t,B),wa[0]=e,wa[1]=k,wa[2]=t,wa[3]=B;e=ga.scissor_enable;e!==E.scissor_enable&&(e?F.enable(3089):F.disable(3089),E.scissor_enable=e);e=ba[0];k=ba[1];t=ba[2];B=ba[3];if(e!==W[0]||k!==W[1]||t!==W[2]||B!==W[3])F.scissor(e,k,t,B),W[0]=e,W[1]=k,W[2]=t,W[3]=B;e=ka[0];k=ka[1];
t=ka[2];B=ka[3];if(e!==oa[0]||k!==oa[1]||t!==oa[2]||B!==oa[3])F.viewport(e,k,t,B),oa[0]=e,oa[1]=k,oa[2]=t,oa[3]=B}F.disable(2929);E.depth_enable=!1;if(e=E.profile)b=performance.now(),u.count+=a;F.useProgram(g.program);L.setVAO(null);k=na.location;t=I[k];t.buffer||F.enableVertexAttribArray(k);if(t.type!==m.dtype||2!==t.size||t.buffer!==m||!1!==t.normalized||0!==t.offset||0!==t.stride)F.bindBuffer(34962,m.buffer),F.vertexAttribPointer(k,2,m.dtype,!1,0,0),t.type=m.dtype,t.size=2,t.buffer=m,t.normalized=
!1,t.offset=0,t.stride=0;l=n.call(this,aa,f,l);"number"!==typeof l&&d.commandRaise(p,h);F.uniform1f(r.location,l);(k=A.elements)?F.bindBuffer(34963,k.buffer.buffer):L.currentVAO&&(k=G.getElements(L.currentVAO.elements))&&F.bindBuffer(34963,k.buffer.buffer);t=A.primitive;B=A.offset;for(l=0;l<a;++l){f=c[l];var z,q,ea,Z,U,ya,Ga,qa,za;z=f.offset;D(z)&&2===z.length||d.commandRaise(w,h);q=z[0];z=z[1];l&&ea===q&&Z===z||(ea=q,Z=z,F.uniform2f(v.location,q,z));U=y.call(this,aa,f,l);D(U)&&4===U.length||d.commandRaise(C,
h);f=U[0];q=U[1];z=U[2];U=U[3];l&&ya===f&&Ga===q&&qa===z&&za===U||(ya=f,Ga=q,qa=z,za=U,F.uniform4f(x.location,f,q,z,U));k?F.drawElements(t,3,k.type,B<<(k.type-5121>>1)):F.drawArrays(t,B,3)}E.dirty=!0;L.setVAO(null);e&&(u.cpuTime+=performance.now()-b)}}},"$23,model,position,projection,view":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A){var G,H,F,D,ga,t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da;G=a.attributes;H=a.context;F=
a.current;D=a.draw;ga=a.framebuffer;t=a.gl;ea=a.isArrayLike;L=a.next;ma=a.shader;ta=a.uniforms;S=a.vao;V=L.blend_color;R=F.blend_color;O=L.blend_equation;M=F.blend_equation;N=L.blend_func;P=F.blend_func;Q=L.colorMask;ra=F.colorMask;pa=L.depth_range;J=F.depth_range;K=L.polygonOffset_offset;ba=F.polygonOffset_offset;W=L.sample_coverage;la=F.sample_coverage;ha=L.scissor_box;Ba=F.scissor_box;wa=L.stencil_func;da=F.stencil_func;xa=L.stencil_opBack;ka=F.stencil_opBack;oa=L.stencil_opFront;Aa=F.stencil_opFront;
Qa=L.viewport;Ja=F.viewport;Zb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ua=new Float32Array(16);ia=new Float32Array(16);fa=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];sa=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);Da=new Float32Array(16);return{draw:function(a){var e,l,g,p;e=ga.next;e!==ga.cur&&(e?t.bindFramebuffer(36160,e.framebuffer):t.bindFramebuffer(36160,null),ga.cur=e);if(F.dirty){var n;e=L.dither;e!==F.dither&&(e?t.enable(3024):t.disable(3024),F.dither=e);e=
L.blend_enable;e!==F.blend_enable&&(e?t.enable(3042):t.disable(3042),F.blend_enable=e);e=V[0];g=V[1];p=V[2];n=V[3];if(e!==R[0]||g!==R[1]||p!==R[2]||n!==R[3])t.blendColor(e,g,p,n),R[0]=e,R[1]=g,R[2]=p,R[3]=n;e=O[0];g=O[1];if(e!==M[0]||g!==M[1])t.blendEquationSeparate(e,g),M[0]=e,M[1]=g;e=N[0];g=N[1];p=N[2];n=N[3];if(e!==P[0]||g!==P[1]||p!==P[2]||n!==P[3])t.blendFuncSeparate(e,g,p,n),P[0]=e,P[1]=g,P[2]=p,P[3]=n;e=L.depth_enable;e!==F.depth_enable&&(e?t.enable(2929):t.disable(2929),F.depth_enable=e);
e=L.depth_func;e!==F.depth_func&&(t.depthFunc(e),F.depth_func=e);e=pa[0];g=pa[1];if(e!==J[0]||g!==J[1])t.depthRange(e,g),J[0]=e,J[1]=g;e=L.depth_mask;e!==F.depth_mask&&(t.depthMask(e),F.depth_mask=e);e=Q[0];g=Q[1];p=Q[2];n=Q[3];if(e!==ra[0]||g!==ra[1]||p!==ra[2]||n!==ra[3])t.colorMask(e,g,p,n),ra[0]=e,ra[1]=g,ra[2]=p,ra[3]=n;e=L.cull_enable;e!==F.cull_enable&&(e?t.enable(2884):t.disable(2884),F.cull_enable=e);e=L.cull_face;e!==F.cull_face&&(t.cullFace(e),F.cull_face=e);e=L.frontFace;e!==F.frontFace&&
(t.frontFace(e),F.frontFace=e);e=L.lineWidth;e!==F.lineWidth&&(t.lineWidth(e),F.lineWidth=e);e=L.polygonOffset_enable;e!==F.polygonOffset_enable&&(e?t.enable(32823):t.disable(32823),F.polygonOffset_enable=e);e=K[0];g=K[1];if(e!==ba[0]||g!==ba[1])t.polygonOffset(e,g),ba[0]=e,ba[1]=g;e=L.sample_alpha;e!==F.sample_alpha&&(e?t.enable(32926):t.disable(32926),F.sample_alpha=e);e=L.sample_enable;e!==F.sample_enable&&(e?t.enable(32928):t.disable(32928),F.sample_enable=e);e=W[0];g=W[1];if(e!==la[0]||g!==la[1])t.sampleCoverage(e,
g),la[0]=e,la[1]=g;e=L.stencil_enable;e!==F.stencil_enable&&(e?t.enable(2960):t.disable(2960),F.stencil_enable=e);e=L.stencil_mask;e!==F.stencil_mask&&(t.stencilMask(e),F.stencil_mask=e);e=wa[0];g=wa[1];p=wa[2];if(e!==da[0]||g!==da[1]||p!==da[2])t.stencilFunc(e,g,p),da[0]=e,da[1]=g,da[2]=p;e=oa[0];g=oa[1];p=oa[2];n=oa[3];if(e!==Aa[0]||g!==Aa[1]||p!==Aa[2]||n!==Aa[3])t.stencilOpSeparate(e,g,p,n),Aa[0]=e,Aa[1]=g,Aa[2]=p,Aa[3]=n;e=xa[0];g=xa[1];p=xa[2];n=xa[3];if(e!==ka[0]||g!==ka[1]||p!==ka[2]||n!==
ka[3])t.stencilOpSeparate(e,g,p,n),ka[0]=e,ka[1]=g,ka[2]=p,ka[3]=n;e=L.scissor_enable;e!==F.scissor_enable&&(e?t.enable(3089):t.disable(3089),F.scissor_enable=e);e=ha[0];g=ha[1];p=ha[2];n=ha[3];if(e!==Ba[0]||g!==Ba[1]||p!==Ba[2]||n!==Ba[3])t.scissor(e,g,p,n),Ba[0]=e,Ba[1]=g,Ba[2]=p,Ba[3]=n;e=Qa[0];g=Qa[1];p=Qa[2];n=Qa[3];if(e!==Ja[0]||g!==Ja[1]||p!==Ja[2]||n!==Ja[3])t.viewport(e,g,p,n),Ja[0]=e,Ja[1]=g,Ja[2]=p,Ja[3]=n;F.dirty=!1}if(e=F.profile)l=performance.now(),u.count++;t.useProgram(q.program);
S.setVAO(null);g=aa.location;p=G[g];p.buffer||t.enableVertexAttribArray(g);if(p.type!==m.dtype||3!==p.size||p.buffer!==m||!1!==p.normalized||0!==p.offset||0!==p.stride)t.bindBuffer(34962,m.buffer),t.vertexAttribPointer(g,3,m.dtype,!1,0,0),p.type=m.dtype,p.size=3,p.buffer=m,p.normalized=!1,p.offset=0,p.stride=0;t.uniformMatrix4fv(I.location,!1,Zb);g=b.call(this,H,a,0);ea(g)&&16===g.length||d.commandRaise(f,h);t.uniformMatrix4fv(A.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Ua[0]=g[0],
Ua[1]=g[1],Ua[2]=g[2],Ua[3]=g[3],Ua[4]=g[4],Ua[5]=g[5],Ua[6]=g[6],Ua[7]=g[7],Ua[8]=g[8],Ua[9]=g[9],Ua[10]=g[10],Ua[11]=g[11],Ua[12]=g[12],Ua[13]=g[13],Ua[14]=g[14],Ua[15]=g[15],Ua));a=c.call(this,H,a,0);ea(a)&&16===a.length||d.commandRaise(k,h);t.uniformMatrix4fv(E.location,!1,Array.isArray(a)||a instanceof Float32Array?a:(ia[0]=a[0],ia[1]=a[1],ia[2]=a[2],ia[3]=a[3],ia[4]=a[4],ia[5]=a[5],ia[6]=a[6],ia[7]=a[7],ia[8]=a[8],ia[9]=a[9],ia[10]=a[10],ia[11]=a[11],ia[12]=a[12],ia[13]=a[13],ia[14]=a[14],ia[15]=
a[15],ia));z&&t.bindBuffer(34963,z.buffer.buffer);a=z.primType;g=z.vertCount-0;0<=g||d.commandRaise(B,h);g&&(t.drawElements(a,g,z.type,0<<(z.type-5121>>1)),S.setVAO(null),e&&(u.cpuTime+=performance.now()-l))},scope:function(c,a,b){var f,k,w,y,t,C,B,z,x,v,q,r,A,ia,E,I,Ea,sa,J,da,K,L,M;if(f=F.profile)k=performance.now(),u.count++;w=D.elements;D.elements=e;y=D.offset;D.offset=0;t=e.vertCount-0;0<=t||d.commandRaise(l,h);C=D.count;D.count=t;B=e.primType;t=D.primitive;D.primitive=B;B=ta[3];ta[3]=fa;z=g.call(this,
H,c,b);x=ta[5];ta[5]=z;v=n.call(this,H,c,b);z=ta[4];ta[4]=v;v=p.buffer;p.buffer=m;q=p.divisor;p.divisor=0;r=p.normalized;p.normalized=!1;A=p.offset;p.offset=0;ia=p.size;p.size=0;E=p.state;p.state=1;I=p.stride;p.stride=0;Ea=p.type;p.type=m.dtype;sa=p.w;p.w=0;J=p.x;p.x=0;da=p.y;p.y=0;K=p.z;p.z=0;L=ma.vert;ma.vert=2;M=ma.frag;ma.frag=1;a(H,c,b);f&&(u.cpuTime+=performance.now()-k);D.elements=w;D.offset=y;D.count=C;D.primitive=t;ta[3]=B;ta[5]=x;ta[4]=z;p.buffer=v;p.divisor=q;p.normalized=r;p.offset=A;
p.size=ia;p.state=E;p.stride=I;p.type=Ea;p.w=sa;p.x=J;p.y=da;p.z=K;ma.vert=L;ma.frag=M},batch:function(c,e){var a,b,l;a=ga.next;a!==ga.cur&&(a?t.bindFramebuffer(36160,a.framebuffer):t.bindFramebuffer(36160,null),ga.cur=a);if(F.dirty){var g,f,k;a=L.dither;a!==F.dither&&(a?t.enable(3024):t.disable(3024),F.dither=a);a=L.blend_enable;a!==F.blend_enable&&(a?t.enable(3042):t.disable(3042),F.blend_enable=a);a=V[0];g=V[1];f=V[2];k=V[3];if(a!==R[0]||g!==R[1]||f!==R[2]||k!==R[3])t.blendColor(a,g,f,k),R[0]=
a,R[1]=g,R[2]=f,R[3]=k;a=O[0];g=O[1];if(a!==M[0]||g!==M[1])t.blendEquationSeparate(a,g),M[0]=a,M[1]=g;a=N[0];g=N[1];f=N[2];k=N[3];if(a!==P[0]||g!==P[1]||f!==P[2]||k!==P[3])t.blendFuncSeparate(a,g,f,k),P[0]=a,P[1]=g,P[2]=f,P[3]=k;a=L.depth_enable;a!==F.depth_enable&&(a?t.enable(2929):t.disable(2929),F.depth_enable=a);a=L.depth_func;a!==F.depth_func&&(t.depthFunc(a),F.depth_func=a);a=pa[0];g=pa[1];if(a!==J[0]||g!==J[1])t.depthRange(a,g),J[0]=a,J[1]=g;a=L.depth_mask;a!==F.depth_mask&&(t.depthMask(a),
F.depth_mask=a);a=Q[0];g=Q[1];f=Q[2];k=Q[3];if(a!==ra[0]||g!==ra[1]||f!==ra[2]||k!==ra[3])t.colorMask(a,g,f,k),ra[0]=a,ra[1]=g,ra[2]=f,ra[3]=k;a=L.cull_enable;a!==F.cull_enable&&(a?t.enable(2884):t.disable(2884),F.cull_enable=a);a=L.cull_face;a!==F.cull_face&&(t.cullFace(a),F.cull_face=a);a=L.frontFace;a!==F.frontFace&&(t.frontFace(a),F.frontFace=a);a=L.lineWidth;a!==F.lineWidth&&(t.lineWidth(a),F.lineWidth=a);a=L.polygonOffset_enable;a!==F.polygonOffset_enable&&(a?t.enable(32823):t.disable(32823),
F.polygonOffset_enable=a);a=K[0];g=K[1];if(a!==ba[0]||g!==ba[1])t.polygonOffset(a,g),ba[0]=a,ba[1]=g;a=L.sample_alpha;a!==F.sample_alpha&&(a?t.enable(32926):t.disable(32926),F.sample_alpha=a);a=L.sample_enable;a!==F.sample_enable&&(a?t.enable(32928):t.disable(32928),F.sample_enable=a);a=W[0];g=W[1];if(a!==la[0]||g!==la[1])t.sampleCoverage(a,g),la[0]=a,la[1]=g;a=L.stencil_enable;a!==F.stencil_enable&&(a?t.enable(2960):t.disable(2960),F.stencil_enable=a);a=L.stencil_mask;a!==F.stencil_mask&&(t.stencilMask(a),
F.stencil_mask=a);a=wa[0];g=wa[1];f=wa[2];if(a!==da[0]||g!==da[1]||f!==da[2])t.stencilFunc(a,g,f),da[0]=a,da[1]=g,da[2]=f;a=oa[0];g=oa[1];f=oa[2];k=oa[3];if(a!==Aa[0]||g!==Aa[1]||f!==Aa[2]||k!==Aa[3])t.stencilOpSeparate(a,g,f,k),Aa[0]=a,Aa[1]=g,Aa[2]=f,Aa[3]=k;a=xa[0];g=xa[1];f=xa[2];k=xa[3];if(a!==ka[0]||g!==ka[1]||f!==ka[2]||k!==ka[3])t.stencilOpSeparate(a,g,f,k),ka[0]=a,ka[1]=g,ka[2]=f,ka[3]=k;a=L.scissor_enable;a!==F.scissor_enable&&(a?t.enable(3089):t.disable(3089),F.scissor_enable=a);a=ha[0];
g=ha[1];f=ha[2];k=ha[3];if(a!==Ba[0]||g!==Ba[1]||f!==Ba[2]||k!==Ba[3])t.scissor(a,g,f,k),Ba[0]=a,Ba[1]=g,Ba[2]=f,Ba[3]=k;a=Qa[0];g=Qa[1];f=Qa[2];k=Qa[3];if(a!==Ja[0]||g!==Ja[1]||f!==Ja[2]||k!==Ja[3])t.viewport(a,g,f,k),Ja[0]=a,Ja[1]=g,Ja[2]=f,Ja[3]=k;F.dirty=!1}if(a=F.profile)b=performance.now(),u.count+=e;t.useProgram(w.program);S.setVAO(null);g=aa.location;f=G[g];f.buffer||t.enableVertexAttribArray(g);if(f.type!==m.dtype||3!==f.size||f.buffer!==m||!1!==f.normalized||0!==f.offset||0!==f.stride)t.bindBuffer(34962,
m.buffer),t.vertexAttribPointer(g,3,m.dtype,!1,0,0),f.type=m.dtype,f.size=3,f.buffer=m,f.normalized=!1,f.offset=0,f.stride=0;t.uniformMatrix4fv(I.location,!1,sa);g=y.call(this,H,void 0,l);ea(g)&&16===g.length||d.commandRaise(C,h);t.uniformMatrix4fv(A.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(va[0]=g[0],va[1]=g[1],va[2]=g[2],va[3]=g[3],va[4]=g[4],va[5]=g[5],va[6]=g[6],va[7]=g[7],va[8]=g[8],va[9]=g[9],va[10]=g[10],va[11]=g[11],va[12]=g[12],va[13]=g[13],va[14]=g[14],va[15]=g[15],va));
l=r.call(this,H,void 0,l);ea(l)&&16===l.length||d.commandRaise(x,h);t.uniformMatrix4fv(E.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Da[0]=l[0],Da[1]=l[1],Da[2]=l[2],Da[3]=l[3],Da[4]=l[4],Da[5]=l[5],Da[6]=l[6],Da[7]=l[7],Da[8]=l[8],Da[9]=l[9],Da[10]=l[10],Da[11]=l[11],Da[12]=l[12],Da[13]=l[13],Da[14]=l[14],Da[15]=l[15],Da));v&&t.bindBuffer(34963,v.buffer.buffer);g=v.primType;f=v.vertCount-0;0<=f||d.commandRaise(na,h);for(l=0;l<e;++l)f&&t.drawElements(g,f,v.type,0<<(v.type-5121>>1));
S.setVAO(null);a&&(u.cpuTime+=performance.now()-b)}}},$20:function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r){var x,v,na,I,aa,E,A,G,H,F,D,ga,t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba;x=a.context;v=a.current;na=a.framebuffer;I=a.gl;aa=a.next;E=a.shader;A=a.uniforms;G=a.vao;H=aa.blend_color;F=v.blend_color;D=aa.blend_equation;ga=v.blend_equation;t=aa.blend_func;ea=v.blend_func;L=aa.colorMask;ma=v.colorMask;ta=aa.depth_range;S=v.depth_range;V=aa.polygonOffset_offset;R=v.polygonOffset_offset;
O=aa.sample_coverage;M=v.sample_coverage;N=aa.scissor_box;P=v.scissor_box;Q=aa.stencil_func;ra=v.stencil_func;pa=aa.stencil_opBack;J=v.stencil_opBack;K=aa.stencil_opFront;ba=v.stencil_opFront;W=aa.viewport;la=v.viewport;ha={};Ba={};return{draw:function(a){var e,l,d,g,p,n,w,y,C,B,z,r,A;e=x.center;l=x.distance;d=x.eye;g=x.phi;p=x.projection;n=b.call(this,x,a,0);w=x.theta;y=x.up;C=x.view;x.center=q;x.distance=2.302585092994046;x.eye=m;x.phi=0;x.projection=n;x.theta=0;x.up=f;x.view=c;n=na.next;n!==na.cur&&
(n?I.bindFramebuffer(36160,n.framebuffer):I.bindFramebuffer(36160,null),na.cur=n);if(v.dirty){n=aa.dither;n!==v.dither&&(n?I.enable(3024):I.disable(3024),v.dither=n);n=aa.blend_enable;n!==v.blend_enable&&(n?I.enable(3042):I.disable(3042),v.blend_enable=n);n=H[0];z=H[1];r=H[2];A=H[3];if(n!==F[0]||z!==F[1]||r!==F[2]||A!==F[3])I.blendColor(n,z,r,A),F[0]=n,F[1]=z,F[2]=r,F[3]=A;n=D[0];z=D[1];if(n!==ga[0]||z!==ga[1])I.blendEquationSeparate(n,z),ga[0]=n,ga[1]=z;n=t[0];z=t[1];r=t[2];A=t[3];if(n!==ea[0]||
z!==ea[1]||r!==ea[2]||A!==ea[3])I.blendFuncSeparate(n,z,r,A),ea[0]=n,ea[1]=z,ea[2]=r,ea[3]=A;n=aa.depth_enable;n!==v.depth_enable&&(n?I.enable(2929):I.disable(2929),v.depth_enable=n);n=aa.depth_func;n!==v.depth_func&&(I.depthFunc(n),v.depth_func=n);n=ta[0];z=ta[1];if(n!==S[0]||z!==S[1])I.depthRange(n,z),S[0]=n,S[1]=z;n=aa.depth_mask;n!==v.depth_mask&&(I.depthMask(n),v.depth_mask=n);n=L[0];z=L[1];r=L[2];A=L[3];if(n!==ma[0]||z!==ma[1]||r!==ma[2]||A!==ma[3])I.colorMask(n,z,r,A),ma[0]=n,ma[1]=z,ma[2]=
r,ma[3]=A;n=aa.cull_enable;n!==v.cull_enable&&(n?I.enable(2884):I.disable(2884),v.cull_enable=n);n=aa.cull_face;n!==v.cull_face&&(I.cullFace(n),v.cull_face=n);n=aa.frontFace;n!==v.frontFace&&(I.frontFace(n),v.frontFace=n);n=aa.lineWidth;n!==v.lineWidth&&(I.lineWidth(n),v.lineWidth=n);n=aa.polygonOffset_enable;n!==v.polygonOffset_enable&&(n?I.enable(32823):I.disable(32823),v.polygonOffset_enable=n);n=V[0];z=V[1];if(n!==R[0]||z!==R[1])I.polygonOffset(n,z),R[0]=n,R[1]=z;n=aa.sample_alpha;n!==v.sample_alpha&&
(n?I.enable(32926):I.disable(32926),v.sample_alpha=n);n=aa.sample_enable;n!==v.sample_enable&&(n?I.enable(32928):I.disable(32928),v.sample_enable=n);n=O[0];z=O[1];if(n!==M[0]||z!==M[1])I.sampleCoverage(n,z),M[0]=n,M[1]=z;n=aa.stencil_enable;n!==v.stencil_enable&&(n?I.enable(2960):I.disable(2960),v.stencil_enable=n);n=aa.stencil_mask;n!==v.stencil_mask&&(I.stencilMask(n),v.stencil_mask=n);n=Q[0];z=Q[1];r=Q[2];if(n!==ra[0]||z!==ra[1]||r!==ra[2])I.stencilFunc(n,z,r),ra[0]=n,ra[1]=z,ra[2]=r;n=K[0];z=
K[1];r=K[2];A=K[3];if(n!==ba[0]||z!==ba[1]||r!==ba[2]||A!==ba[3])I.stencilOpSeparate(n,z,r,A),ba[0]=n,ba[1]=z,ba[2]=r,ba[3]=A;n=pa[0];z=pa[1];r=pa[2];A=pa[3];if(n!==J[0]||z!==J[1]||r!==J[2]||A!==J[3])I.stencilOpSeparate(n,z,r,A),J[0]=n,J[1]=z,J[2]=r,J[3]=A;n=aa.scissor_enable;n!==v.scissor_enable&&(n?I.enable(3089):I.disable(3089),v.scissor_enable=n);n=N[0];z=N[1];r=N[2];A=N[3];if(n!==P[0]||z!==P[1]||r!==P[2]||A!==P[3])I.scissor(n,z,r,A),P[0]=n,P[1]=z,P[2]=r,P[3]=A;n=W[0];z=W[1];r=W[2];A=W[3];if(n!==
la[0]||z!==la[1]||r!==la[2]||A!==la[3])I.viewport(n,z,r,A),la[0]=n,la[1]=z,la[2]=r,la[3]=A;v.dirty=!1}if(n=v.profile)B=performance.now(),u.count++;z=E.program(E.vert,E.frag,h);I.useProgram(z.program);G.setVAO(null);r=z.id;(A=ha[r])||(A=ha[r]=k(z));A.call(this,a);G.setVAO(null);x.center=e;x.distance=l;x.eye=d;x.phi=g;x.projection=p;x.theta=w;x.up=y;x.view=C;n&&(u.cpuTime+=performance.now()-B)},scope:function(c,a,b){var d,f,k,p,n,w,m,y,h,t,C,q,r,T,E,D,I,Ea,F;d=x.center;f=x.distance;k=x.eye;p=x.phi;
n=x.projection;w=e.call(this,x,c,b);m=x.theta;y=x.up;h=x.view;x.center=z;x.distance=2.302585092994046;x.eye=B;x.phi=0;x.projection=w;x.theta=0;x.up=l;x.view=g;if(w=v.profile)t=performance.now(),u.count++;C=x.center;q=A[1];A[1]=C;r=x.distance;C=A[2];A[2]=r;T=x.eye;r=A[3];A[3]=T;E=x.phi;T=A[4];A[4]=E;D=x.projection;E=A[5];A[5]=D;I=x.theta;D=A[6];A[6]=I;Ea=x.up;I=A[7];A[7]=Ea;Ea=x.view;F=A[8];A[8]=Ea;a(x,c,b);x.center=d;x.distance=f;x.eye=k;x.phi=p;x.projection=n;x.theta=m;x.up=y;x.view=h;w&&(u.cpuTime+=
performance.now()-t);A[1]=q;A[2]=C;A[3]=r;A[4]=T;A[5]=E;A[6]=D;A[7]=I;A[8]=F},batch:function(c,a){var e,b,l,d,g,f,k,m,z,B,q,A,ha;e=x.center;b=x.distance;l=x.eye;d=x.phi;g=x.projection;f=w.call(this,x,c,0);k=x.theta;m=x.up;z=x.view;x.center=n;x.distance=2.302585092994046;x.eye=p;x.phi=0;x.projection=f;x.theta=0;x.up=y;x.view=C;f=na.next;f!==na.cur&&(f?I.bindFramebuffer(36160,f.framebuffer):I.bindFramebuffer(36160,null),na.cur=f);if(v.dirty){f=aa.dither;f!==v.dither&&(f?I.enable(3024):I.disable(3024),
v.dither=f);f=aa.blend_enable;f!==v.blend_enable&&(f?I.enable(3042):I.disable(3042),v.blend_enable=f);f=H[0];q=H[1];A=H[2];ha=H[3];if(f!==F[0]||q!==F[1]||A!==F[2]||ha!==F[3])I.blendColor(f,q,A,ha),F[0]=f,F[1]=q,F[2]=A,F[3]=ha;f=D[0];q=D[1];if(f!==ga[0]||q!==ga[1])I.blendEquationSeparate(f,q),ga[0]=f,ga[1]=q;f=t[0];q=t[1];A=t[2];ha=t[3];if(f!==ea[0]||q!==ea[1]||A!==ea[2]||ha!==ea[3])I.blendFuncSeparate(f,q,A,ha),ea[0]=f,ea[1]=q,ea[2]=A,ea[3]=ha;f=aa.depth_enable;f!==v.depth_enable&&(f?I.enable(2929):
I.disable(2929),v.depth_enable=f);f=aa.depth_func;f!==v.depth_func&&(I.depthFunc(f),v.depth_func=f);f=ta[0];q=ta[1];if(f!==S[0]||q!==S[1])I.depthRange(f,q),S[0]=f,S[1]=q;f=aa.depth_mask;f!==v.depth_mask&&(I.depthMask(f),v.depth_mask=f);f=L[0];q=L[1];A=L[2];ha=L[3];if(f!==ma[0]||q!==ma[1]||A!==ma[2]||ha!==ma[3])I.colorMask(f,q,A,ha),ma[0]=f,ma[1]=q,ma[2]=A,ma[3]=ha;f=aa.cull_enable;f!==v.cull_enable&&(f?I.enable(2884):I.disable(2884),v.cull_enable=f);f=aa.cull_face;f!==v.cull_face&&(I.cullFace(f),
v.cull_face=f);f=aa.frontFace;f!==v.frontFace&&(I.frontFace(f),v.frontFace=f);f=aa.lineWidth;f!==v.lineWidth&&(I.lineWidth(f),v.lineWidth=f);f=aa.polygonOffset_enable;f!==v.polygonOffset_enable&&(f?I.enable(32823):I.disable(32823),v.polygonOffset_enable=f);f=V[0];q=V[1];if(f!==R[0]||q!==R[1])I.polygonOffset(f,q),R[0]=f,R[1]=q;f=aa.sample_alpha;f!==v.sample_alpha&&(f?I.enable(32926):I.disable(32926),v.sample_alpha=f);f=aa.sample_enable;f!==v.sample_enable&&(f?I.enable(32928):I.disable(32928),v.sample_enable=
f);f=O[0];q=O[1];if(f!==M[0]||q!==M[1])I.sampleCoverage(f,q),M[0]=f,M[1]=q;f=aa.stencil_enable;f!==v.stencil_enable&&(f?I.enable(2960):I.disable(2960),v.stencil_enable=f);f=aa.stencil_mask;f!==v.stencil_mask&&(I.stencilMask(f),v.stencil_mask=f);f=Q[0];q=Q[1];A=Q[2];if(f!==ra[0]||q!==ra[1]||A!==ra[2])I.stencilFunc(f,q,A),ra[0]=f,ra[1]=q,ra[2]=A;f=K[0];q=K[1];A=K[2];ha=K[3];if(f!==ba[0]||q!==ba[1]||A!==ba[2]||ha!==ba[3])I.stencilOpSeparate(f,q,A,ha),ba[0]=f,ba[1]=q,ba[2]=A,ba[3]=ha;f=pa[0];q=pa[1];
A=pa[2];ha=pa[3];if(f!==J[0]||q!==J[1]||A!==J[2]||ha!==J[3])I.stencilOpSeparate(f,q,A,ha),J[0]=f,J[1]=q,J[2]=A,J[3]=ha;f=aa.scissor_enable;f!==v.scissor_enable&&(f?I.enable(3089):I.disable(3089),v.scissor_enable=f);f=N[0];q=N[1];A=N[2];ha=N[3];if(f!==P[0]||q!==P[1]||A!==P[2]||ha!==P[3])I.scissor(f,q,A,ha),P[0]=f,P[1]=q,P[2]=A,P[3]=ha;f=W[0];q=W[1];A=W[2];ha=W[3];if(f!==la[0]||q!==la[1]||A!==la[2]||ha!==la[3])I.viewport(f,q,A,ha),la[0]=f,la[1]=q,la[2]=A,la[3]=ha;v.dirty=!1}if(f=v.profile)B=performance.now(),
u.count+=a;q=E.program(E.vert,E.frag,h);I.useProgram(q.program);G.setVAO(null);A=q.id;(ha=Ba[A])||(ha=Ba[A]=r(q));ha.call(this,c,a);G.setVAO(null);x.center=e;x.distance=b;x.eye=l;x.phi=d;x.projection=g;x.theta=k;x.up=m;x.view=z;f&&(u.cpuTime+=performance.now()-B)}}},"$27,position,projection,tex,uv,view":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na,I,aa,E,A,G,H,F,D,ga){var t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja,Zb,Ua,ia,fa,sa,va,Da,rb,Gb;t=a.attributes;
ea=a.context;L=a.current;ma=a.draw;ta=a.framebuffer;S=a.gl;V=a.isArrayLike;R=a.next;O=a.shader;M=a.uniforms;N=a.vao;P=R.blend_color;Q=L.blend_color;ra=R.blend_equation;pa=L.blend_equation;J=R.blend_func;K=L.blend_func;ba=R.colorMask;W=L.colorMask;la=R.depth_range;ha=L.depth_range;Ba=R.polygonOffset_offset;wa=L.polygonOffset_offset;da=R.sample_coverage;xa=L.sample_coverage;ka=R.scissor_box;oa=L.scissor_box;Aa=R.stencil_func;Qa=L.stencil_func;Ja=R.stencil_opBack;Zb=L.stencil_opBack;Ua=R.stencil_opFront;
ia=L.stencil_opFront;fa=R.viewport;sa=L.viewport;va=new Float32Array(16);Da=new Float32Array(16);rb=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(a){var g,p,n,w;g=ta.next;g!==ta.cur&&(g?S.bindFramebuffer(36160,g.framebuffer):S.bindFramebuffer(36160,null),ta.cur=g);if(L.dirty){var y;g=R.dither;g!==L.dither&&(g?S.enable(3024):S.disable(3024),L.dither=g);g=R.blend_enable;g!==L.blend_enable&&(g?S.enable(3042):S.disable(3042),L.blend_enable=g);g=P[0];n=P[1];w=P[2];y=P[3];if(g!==Q[0]||
n!==Q[1]||w!==Q[2]||y!==Q[3])S.blendColor(g,n,w,y),Q[0]=g,Q[1]=n,Q[2]=w,Q[3]=y;g=ra[0];n=ra[1];if(g!==pa[0]||n!==pa[1])S.blendEquationSeparate(g,n),pa[0]=g,pa[1]=n;g=J[0];n=J[1];w=J[2];y=J[3];if(g!==K[0]||n!==K[1]||w!==K[2]||y!==K[3])S.blendFuncSeparate(g,n,w,y),K[0]=g,K[1]=n,K[2]=w,K[3]=y;g=R.depth_enable;g!==L.depth_enable&&(g?S.enable(2929):S.disable(2929),L.depth_enable=g);g=R.depth_func;g!==L.depth_func&&(S.depthFunc(g),L.depth_func=g);g=la[0];n=la[1];if(g!==ha[0]||n!==ha[1])S.depthRange(g,n),
ha[0]=g,ha[1]=n;g=R.depth_mask;g!==L.depth_mask&&(S.depthMask(g),L.depth_mask=g);g=ba[0];n=ba[1];w=ba[2];y=ba[3];if(g!==W[0]||n!==W[1]||w!==W[2]||y!==W[3])S.colorMask(g,n,w,y),W[0]=g,W[1]=n,W[2]=w,W[3]=y;g=R.cull_enable;g!==L.cull_enable&&(g?S.enable(2884):S.disable(2884),L.cull_enable=g);g=R.cull_face;g!==L.cull_face&&(S.cullFace(g),L.cull_face=g);g=R.frontFace;g!==L.frontFace&&(S.frontFace(g),L.frontFace=g);g=R.lineWidth;g!==L.lineWidth&&(S.lineWidth(g),L.lineWidth=g);g=R.polygonOffset_enable;g!==
L.polygonOffset_enable&&(g?S.enable(32823):S.disable(32823),L.polygonOffset_enable=g);g=Ba[0];n=Ba[1];if(g!==wa[0]||n!==wa[1])S.polygonOffset(g,n),wa[0]=g,wa[1]=n;g=R.sample_alpha;g!==L.sample_alpha&&(g?S.enable(32926):S.disable(32926),L.sample_alpha=g);g=R.sample_enable;g!==L.sample_enable&&(g?S.enable(32928):S.disable(32928),L.sample_enable=g);g=da[0];n=da[1];if(g!==xa[0]||n!==xa[1])S.sampleCoverage(g,n),xa[0]=g,xa[1]=n;g=R.stencil_enable;g!==L.stencil_enable&&(g?S.enable(2960):S.disable(2960),
L.stencil_enable=g);g=R.stencil_mask;g!==L.stencil_mask&&(S.stencilMask(g),L.stencil_mask=g);g=Aa[0];n=Aa[1];w=Aa[2];if(g!==Qa[0]||n!==Qa[1]||w!==Qa[2])S.stencilFunc(g,n,w),Qa[0]=g,Qa[1]=n,Qa[2]=w;g=Ua[0];n=Ua[1];w=Ua[2];y=Ua[3];if(g!==ia[0]||n!==ia[1]||w!==ia[2]||y!==ia[3])S.stencilOpSeparate(g,n,w,y),ia[0]=g,ia[1]=n,ia[2]=w,ia[3]=y;g=Ja[0];n=Ja[1];w=Ja[2];y=Ja[3];if(g!==Zb[0]||n!==Zb[1]||w!==Zb[2]||y!==Zb[3])S.stencilOpSeparate(g,n,w,y),Zb[0]=g,Zb[1]=n,Zb[2]=w,Zb[3]=y;g=R.scissor_enable;g!==L.scissor_enable&&
(g?S.enable(3089):S.disable(3089),L.scissor_enable=g);g=ka[0];n=ka[1];w=ka[2];y=ka[3];if(g!==oa[0]||n!==oa[1]||w!==oa[2]||y!==oa[3])S.scissor(g,n,w,y),oa[0]=g,oa[1]=n,oa[2]=w,oa[3]=y;g=fa[0];n=fa[1];w=fa[2];y=fa[3];if(g!==sa[0]||n!==sa[1]||w!==sa[2]||y!==sa[3])S.viewport(g,n,w,y),sa[0]=g,sa[1]=n,sa[2]=w,sa[3]=y;L.dirty=!1}if(g=L.profile)p=performance.now(),u.count++;S.useProgram(q.program);N.setVAO(null);n=G.location;w=t[n];w.buffer||S.enableVertexAttribArray(n);if(w.type!==m.dtype||3!==w.size||w.buffer!==
m||!1!==w.normalized||0!==w.offset||0!==w.stride)S.bindBuffer(34962,m.buffer),S.vertexAttribPointer(n,3,m.dtype,!1,0,0),w.type=m.dtype,w.size=3,w.buffer=m,w.normalized=!1,w.offset=0,w.stride=0;n=D.location;w=t[n];w.buffer||S.enableVertexAttribArray(n);if(w.type!==b.dtype||2!==w.size||w.buffer!==b||!1!==w.normalized||0!==w.offset||0!==w.stride)S.bindBuffer(34962,b.buffer),S.vertexAttribPointer(n,2,b.dtype,!1,0,0),w.type=b.dtype,w.size=2,w.buffer=b,w.normalized=!1,w.offset=0,w.stride=0;n=f.call(this,
ea,a,0);V(n)&&16===n.length||d.commandRaise(c,h);S.uniformMatrix4fv(H.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(va[0]=n[0],va[1]=n[1],va[2]=n[2],va[3]=n[3],va[4]=n[4],va[5]=n[5],va[6]=n[6],va[7]=n[7],va[8]=n[8],va[9]=n[9],va[10]=n[10],va[11]=n[11],va[12]=n[12],va[13]=n[13],va[14]=n[14],va[15]=n[15],va));n=k.call(this,ea,a,0);V(n)&&16===n.length||d.commandRaise(z,h);S.uniformMatrix4fv(ga.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Da[0]=n[0],Da[1]=n[1],Da[2]=n[2],Da[3]=
n[3],Da[4]=n[4],Da[5]=n[5],Da[6]=n[6],Da[7]=n[7],Da[8]=n[8],Da[9]=n[9],Da[10]=n[10],Da[11]=n[11],Da[12]=n[12],Da[13]=n[13],Da[14]=n[14],Da[15]=n[15],Da));(a=a.texture)&&"framebuffer"===a._reglType&&(a=a.color[0]);"function"===typeof a&&"texture2d"===a._reglType||d.commandRaise(B,h);a=a._texture;S.uniform1i(F.location,a.bind());e&&S.bindBuffer(34963,e.buffer.buffer);n=e.primType;w=e.vertCount-0;0<=w||d.commandRaise(l,h);w&&(S.drawElements(n,w,e.type,0<<(e.type-5121>>1)),N.setVAO(null),g&&(u.cpuTime+=
performance.now()-p),a.unbind())},scope:function(c,a,e){var l,f,k,t,z,B,q,v,x,r,A,ia,E,D,I,Ea,F,H,J,fa,da,K,W,N,ha,P,Q,sa,wa,na,Zb,aa,R,G,S;if(l=L.profile)f=performance.now(),u.count++;k=ma.elements;ma.elements=g;t=ma.offset;ma.offset=0;z=g.vertCount-0;0<=z||d.commandRaise(n,h);B=ma.count;ma.count=z;q=g.primType;z=ma.primitive;ma.primitive=q;v=p.call(this,ea,c,e);q=M[3];M[3]=v;x=c.texture;v=M[5];M[5]=x;r=w.call(this,ea,c,e);x=M[4];M[4]=r;r=y.buffer;y.buffer=m;A=y.divisor;y.divisor=0;ia=y.normalized;
y.normalized=!1;E=y.offset;y.offset=0;D=y.size;y.size=0;I=y.state;y.state=1;Ea=y.stride;y.stride=0;F=y.type;y.type=m.dtype;H=y.w;y.w=0;J=y.x;y.x=0;fa=y.y;y.y=0;da=y.z;y.z=0;K=C.buffer;C.buffer=b;W=C.divisor;C.divisor=0;N=C.normalized;C.normalized=!1;ha=C.offset;C.offset=0;P=C.size;C.size=0;Q=C.state;C.state=1;sa=C.stride;C.stride=0;wa=C.type;C.type=b.dtype;na=C.w;C.w=0;Zb=C.x;C.x=0;aa=C.y;C.y=0;R=C.z;C.z=0;G=O.vert;O.vert=2;S=O.frag;O.frag=1;a(ea,c,e);l&&(u.cpuTime+=performance.now()-f);ma.elements=
k;ma.offset=t;ma.count=B;ma.primitive=z;M[3]=q;M[5]=v;M[4]=x;y.buffer=r;y.divisor=A;y.normalized=ia;y.offset=E;y.size=D;y.state=I;y.stride=Ea;y.type=F;y.w=H;y.x=J;y.y=fa;y.z=da;C.buffer=K;C.divisor=W;C.normalized=N;C.offset=ha;C.size=P;C.state=Q;C.stride=sa;C.type=wa;C.w=na;C.x=Zb;C.y=aa;C.z=R;O.vert=G;O.frag=S},batch:function(c,a){var e,l,g,f;e=ta.next;e!==ta.cur&&(e?S.bindFramebuffer(36160,e.framebuffer):S.bindFramebuffer(36160,null),ta.cur=e);if(L.dirty){var k,n,p;e=R.dither;e!==L.dither&&(e?S.enable(3024):
S.disable(3024),L.dither=e);e=R.blend_enable;e!==L.blend_enable&&(e?S.enable(3042):S.disable(3042),L.blend_enable=e);e=P[0];k=P[1];n=P[2];p=P[3];if(e!==Q[0]||k!==Q[1]||n!==Q[2]||p!==Q[3])S.blendColor(e,k,n,p),Q[0]=e,Q[1]=k,Q[2]=n,Q[3]=p;e=ra[0];k=ra[1];if(e!==pa[0]||k!==pa[1])S.blendEquationSeparate(e,k),pa[0]=e,pa[1]=k;e=J[0];k=J[1];n=J[2];p=J[3];if(e!==K[0]||k!==K[1]||n!==K[2]||p!==K[3])S.blendFuncSeparate(e,k,n,p),K[0]=e,K[1]=k,K[2]=n,K[3]=p;e=R.depth_enable;e!==L.depth_enable&&(e?S.enable(2929):
S.disable(2929),L.depth_enable=e);e=R.depth_func;e!==L.depth_func&&(S.depthFunc(e),L.depth_func=e);e=la[0];k=la[1];if(e!==ha[0]||k!==ha[1])S.depthRange(e,k),ha[0]=e,ha[1]=k;e=R.depth_mask;e!==L.depth_mask&&(S.depthMask(e),L.depth_mask=e);e=ba[0];k=ba[1];n=ba[2];p=ba[3];if(e!==W[0]||k!==W[1]||n!==W[2]||p!==W[3])S.colorMask(e,k,n,p),W[0]=e,W[1]=k,W[2]=n,W[3]=p;e=R.cull_enable;e!==L.cull_enable&&(e?S.enable(2884):S.disable(2884),L.cull_enable=e);e=R.cull_face;e!==L.cull_face&&(S.cullFace(e),L.cull_face=
e);e=R.frontFace;e!==L.frontFace&&(S.frontFace(e),L.frontFace=e);e=R.lineWidth;e!==L.lineWidth&&(S.lineWidth(e),L.lineWidth=e);e=R.polygonOffset_enable;e!==L.polygonOffset_enable&&(e?S.enable(32823):S.disable(32823),L.polygonOffset_enable=e);e=Ba[0];k=Ba[1];if(e!==wa[0]||k!==wa[1])S.polygonOffset(e,k),wa[0]=e,wa[1]=k;e=R.sample_alpha;e!==L.sample_alpha&&(e?S.enable(32926):S.disable(32926),L.sample_alpha=e);e=R.sample_enable;e!==L.sample_enable&&(e?S.enable(32928):S.disable(32928),L.sample_enable=
e);e=da[0];k=da[1];if(e!==xa[0]||k!==xa[1])S.sampleCoverage(e,k),xa[0]=e,xa[1]=k;e=R.stencil_enable;e!==L.stencil_enable&&(e?S.enable(2960):S.disable(2960),L.stencil_enable=e);e=R.stencil_mask;e!==L.stencil_mask&&(S.stencilMask(e),L.stencil_mask=e);e=Aa[0];k=Aa[1];n=Aa[2];if(e!==Qa[0]||k!==Qa[1]||n!==Qa[2])S.stencilFunc(e,k,n),Qa[0]=e,Qa[1]=k,Qa[2]=n;e=Ua[0];k=Ua[1];n=Ua[2];p=Ua[3];if(e!==ia[0]||k!==ia[1]||n!==ia[2]||p!==ia[3])S.stencilOpSeparate(e,k,n,p),ia[0]=e,ia[1]=k,ia[2]=n,ia[3]=p;e=Ja[0];k=
Ja[1];n=Ja[2];p=Ja[3];if(e!==Zb[0]||k!==Zb[1]||n!==Zb[2]||p!==Zb[3])S.stencilOpSeparate(e,k,n,p),Zb[0]=e,Zb[1]=k,Zb[2]=n,Zb[3]=p;e=R.scissor_enable;e!==L.scissor_enable&&(e?S.enable(3089):S.disable(3089),L.scissor_enable=e);e=ka[0];k=ka[1];n=ka[2];p=ka[3];if(e!==oa[0]||k!==oa[1]||n!==oa[2]||p!==oa[3])S.scissor(e,k,n,p),oa[0]=e,oa[1]=k,oa[2]=n,oa[3]=p;e=fa[0];k=fa[1];n=fa[2];p=fa[3];if(e!==sa[0]||k!==sa[1]||n!==sa[2]||p!==sa[3])S.viewport(e,k,n,p),sa[0]=e,sa[1]=k,sa[2]=n,sa[3]=p;L.dirty=!1}if(e=L.profile)l=
performance.now(),u.count+=a;S.useProgram(r.program);N.setVAO(null);k=G.location;n=t[k];n.buffer||S.enableVertexAttribArray(k);if(n.type!==m.dtype||3!==n.size||n.buffer!==m||!1!==n.normalized||0!==n.offset||0!==n.stride)S.bindBuffer(34962,m.buffer),S.vertexAttribPointer(k,3,m.dtype,!1,0,0),n.type=m.dtype,n.size=3,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;k=D.location;n=t[k];n.buffer||S.enableVertexAttribArray(k);if(n.type!==b.dtype||2!==n.size||n.buffer!==b||!1!==n.normalized||0!==n.offset||
0!==n.stride)S.bindBuffer(34962,b.buffer),S.vertexAttribPointer(k,2,b.dtype,!1,0,0),n.type=b.dtype,n.size=2,n.buffer=b,n.normalized=!1,n.offset=0,n.stride=0;k=x.call(this,ea,f,g);V(k)&&16===k.length||d.commandRaise(v,h);S.uniformMatrix4fv(H.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(rb[0]=k[0],rb[1]=k[1],rb[2]=k[2],rb[3]=k[3],rb[4]=k[4],rb[5]=k[5],rb[6]=k[6],rb[7]=k[7],rb[8]=k[8],rb[9]=k[9],rb[10]=k[10],rb[11]=k[11],rb[12]=k[12],rb[13]=k[13],rb[14]=k[14],rb[15]=k[15],rb));g=na.call(this,
ea,f,g);V(g)&&16===g.length||d.commandRaise(I,h);S.uniformMatrix4fv(ga.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Gb[0]=g[0],Gb[1]=g[1],Gb[2]=g[2],Gb[3]=g[3],Gb[4]=g[4],Gb[5]=g[5],Gb[6]=g[6],Gb[7]=g[7],Gb[8]=g[8],Gb[9]=g[9],Gb[10]=g[10],Gb[11]=g[11],Gb[12]=g[12],Gb[13]=g[13],Gb[14]=g[14],Gb[15]=g[15],Gb));E&&S.bindBuffer(34963,E.buffer.buffer);k=E.primType;n=E.vertCount-0;0<=n||d.commandRaise(A,h);for(g=0;g<a;++g)f=c[g],(f=f.texture)&&"framebuffer"===f._reglType&&(f=f.color[0]),"function"===
typeof f&&"texture2d"===f._reglType||d.commandRaise(aa,h),f=f._texture,S.uniform1i(F.location,f.bind()),n&&(S.drawElements(k,n,E.type,0<<(E.type-5121>>1)),f.unbind());N.setVAO(null);e&&(u.cpuTime+=performance.now()-l)}}},"$19,normal,position,projection,view":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,na){var I,aa,E,A,G,H,F,D,ga,t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa,Qa,Ja;I=a.attributes;aa=a.context;E=a.current;A=a.draw;G=a.framebuffer;H=a.gl;F=a.isArrayLike;
D=a.next;ga=a.shader;t=a.uniforms;ea=a.vao;L=D.blend_color;ma=E.blend_color;ta=D.blend_equation;S=E.blend_equation;V=D.blend_func;R=E.blend_func;O=D.colorMask;M=E.colorMask;N=D.depth_range;P=E.depth_range;Q=D.polygonOffset_offset;ra=E.polygonOffset_offset;pa=D.sample_coverage;J=E.sample_coverage;K=D.scissor_box;ba=E.scissor_box;W=D.stencil_func;la=E.stencil_func;ha=D.stencil_opBack;Ba=E.stencil_opBack;wa=D.stencil_opFront;da=E.stencil_opFront;xa=D.viewport;ka=E.viewport;oa=new Float32Array(16);Aa=
new Float32Array(16);Qa=new Float32Array(16);Ja=new Float32Array(16);return{draw:function(e){var a,g,l;e=G.next;e!==G.cur&&(e?H.bindFramebuffer(36160,e.framebuffer):H.bindFramebuffer(36160,null),G.cur=e);if(E.dirty){var n;e=D.dither;e!==E.dither&&(e?H.enable(3024):H.disable(3024),E.dither=e);e=D.blend_enable;e!==E.blend_enable&&(e?H.enable(3042):H.disable(3042),E.blend_enable=e);e=L[0];g=L[1];l=L[2];n=L[3];if(e!==ma[0]||g!==ma[1]||l!==ma[2]||n!==ma[3])H.blendColor(e,g,l,n),ma[0]=e,ma[1]=g,ma[2]=l,
ma[3]=n;e=ta[0];g=ta[1];if(e!==S[0]||g!==S[1])H.blendEquationSeparate(e,g),S[0]=e,S[1]=g;e=V[0];g=V[1];l=V[2];n=V[3];if(e!==R[0]||g!==R[1]||l!==R[2]||n!==R[3])H.blendFuncSeparate(e,g,l,n),R[0]=e,R[1]=g,R[2]=l,R[3]=n;e=D.depth_enable;e!==E.depth_enable&&(e?H.enable(2929):H.disable(2929),E.depth_enable=e);e=D.depth_func;e!==E.depth_func&&(H.depthFunc(e),E.depth_func=e);e=N[0];g=N[1];if(e!==P[0]||g!==P[1])H.depthRange(e,g),P[0]=e,P[1]=g;e=D.depth_mask;e!==E.depth_mask&&(H.depthMask(e),E.depth_mask=e);
e=O[0];g=O[1];l=O[2];n=O[3];if(e!==M[0]||g!==M[1]||l!==M[2]||n!==M[3])H.colorMask(e,g,l,n),M[0]=e,M[1]=g,M[2]=l,M[3]=n;e=D.cull_enable;e!==E.cull_enable&&(e?H.enable(2884):H.disable(2884),E.cull_enable=e);e=D.cull_face;e!==E.cull_face&&(H.cullFace(e),E.cull_face=e);e=D.frontFace;e!==E.frontFace&&(H.frontFace(e),E.frontFace=e);e=D.lineWidth;e!==E.lineWidth&&(H.lineWidth(e),E.lineWidth=e);e=D.polygonOffset_enable;e!==E.polygonOffset_enable&&(e?H.enable(32823):H.disable(32823),E.polygonOffset_enable=
e);e=Q[0];g=Q[1];if(e!==ra[0]||g!==ra[1])H.polygonOffset(e,g),ra[0]=e,ra[1]=g;e=D.sample_alpha;e!==E.sample_alpha&&(e?H.enable(32926):H.disable(32926),E.sample_alpha=e);e=D.sample_enable;e!==E.sample_enable&&(e?H.enable(32928):H.disable(32928),E.sample_enable=e);e=pa[0];g=pa[1];if(e!==J[0]||g!==J[1])H.sampleCoverage(e,g),J[0]=e,J[1]=g;e=D.stencil_enable;e!==E.stencil_enable&&(e?H.enable(2960):H.disable(2960),E.stencil_enable=e);e=D.stencil_mask;e!==E.stencil_mask&&(H.stencilMask(e),E.stencil_mask=
e);e=W[0];g=W[1];l=W[2];if(e!==la[0]||g!==la[1]||l!==la[2])H.stencilFunc(e,g,l),la[0]=e,la[1]=g,la[2]=l;e=wa[0];g=wa[1];l=wa[2];n=wa[3];if(e!==da[0]||g!==da[1]||l!==da[2]||n!==da[3])H.stencilOpSeparate(e,g,l,n),da[0]=e,da[1]=g,da[2]=l,da[3]=n;e=ha[0];g=ha[1];l=ha[2];n=ha[3];if(e!==Ba[0]||g!==Ba[1]||l!==Ba[2]||n!==Ba[3])H.stencilOpSeparate(e,g,l,n),Ba[0]=e,Ba[1]=g,Ba[2]=l,Ba[3]=n;e=D.scissor_enable;e!==E.scissor_enable&&(e?H.enable(3089):H.disable(3089),E.scissor_enable=e);e=K[0];g=K[1];l=K[2];n=K[3];
if(e!==ba[0]||g!==ba[1]||l!==ba[2]||n!==ba[3])H.scissor(e,g,l,n),ba[0]=e,ba[1]=g,ba[2]=l,ba[3]=n;e=xa[0];g=xa[1];l=xa[2];n=xa[3];if(e!==ka[0]||g!==ka[1]||l!==ka[2]||n!==ka[3])H.viewport(e,g,l,n),ka[0]=e,ka[1]=g,ka[2]=l,ka[3]=n;E.dirty=!1}if(e=E.profile)a=performance.now(),u.count++;H.useProgram(q.program);ea.setVAO(null);g=x.location;l=I[g];l.buffer||H.enableVertexAttribArray(g);if(l.type!==m.dtype||3!==l.size||l.buffer!==m||!1!==l.normalized||0!==l.offset||0!==l.stride)H.bindBuffer(34962,m.buffer),
H.vertexAttribPointer(g,3,m.dtype,!1,0,0),l.type=m.dtype,l.size=3,l.buffer=m,l.normalized=!1,l.offset=0,l.stride=0;g=r.location;l=I[g];l.buffer||H.enableVertexAttribArray(g);if(l.type!==b.dtype||3!==l.size||l.buffer!==b||!1!==l.normalized||0!==l.offset||0!==l.stride)H.bindBuffer(34962,b.buffer),H.vertexAttribPointer(g,3,b.dtype,!1,0,0),l.type=b.dtype,l.size=3,l.buffer=b,l.normalized=!1,l.offset=0,l.stride=0;g=t[5];F(g)&&16===g.length||d.commandRaise(f,h);H.uniformMatrix4fv(v.location,!1,Array.isArray(g)||
g instanceof Float32Array?g:(oa[0]=g[0],oa[1]=g[1],oa[2]=g[2],oa[3]=g[3],oa[4]=g[4],oa[5]=g[5],oa[6]=g[6],oa[7]=g[7],oa[8]=g[8],oa[9]=g[9],oa[10]=g[10],oa[11]=g[11],oa[12]=g[12],oa[13]=g[13],oa[14]=g[14],oa[15]=g[15],oa));g=t[8];F(g)&&16===g.length||d.commandRaise(c,h);H.uniformMatrix4fv(na.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Aa[0]=g[0],Aa[1]=g[1],Aa[2]=g[2],Aa[3]=g[3],Aa[4]=g[4],Aa[5]=g[5],Aa[6]=g[6],Aa[7]=g[7],Aa[8]=g[8],Aa[9]=g[9],Aa[10]=g[10],Aa[11]=g[11],Aa[12]=g[12],Aa[13]=
g[13],Aa[14]=g[14],Aa[15]=g[15],Aa));k&&H.bindBuffer(34963,k.buffer.buffer);g=k.primType;l=k.vertCount-0;0<=l||d.commandRaise(z,h);l&&(H.drawElements(g,l,k.type,0<<(k.type-5121>>1)),ea.setVAO(null),e&&(u.cpuTime+=performance.now()-a))},scope:function(c,a,f){var k,n,p,w,y,z,t,C,q,v,x,r,D,I,F,Ea,H,J,da,K,L,M,W,N,ha,O,P,Q,wa,na,G,R;if(k=E.profile)n=performance.now(),u.count++;p=A.elements;A.elements=B;w=A.offset;A.offset=0;y=B.vertCount-0;0<=y||d.commandRaise(e,h);z=A.count;A.count=y;t=B.primType;y=
A.primitive;A.primitive=t;t=l.buffer;l.buffer=b;C=l.divisor;l.divisor=0;q=l.normalized;l.normalized=!1;v=l.offset;l.offset=0;x=l.size;l.size=0;r=l.state;l.state=1;D=l.stride;l.stride=0;I=l.type;l.type=b.dtype;F=l.w;l.w=0;Ea=l.x;l.x=0;H=l.y;l.y=0;J=l.z;l.z=0;da=g.buffer;g.buffer=m;K=g.divisor;g.divisor=0;L=g.normalized;g.normalized=!1;M=g.offset;g.offset=0;W=g.size;g.size=0;N=g.state;g.state=1;ha=g.stride;g.stride=0;O=g.type;g.type=m.dtype;P=g.w;g.w=0;Q=g.x;g.x=0;wa=g.y;g.y=0;na=g.z;g.z=0;G=ga.vert;
ga.vert=10;R=ga.frag;ga.frag=9;a(aa,c,f);k&&(u.cpuTime+=performance.now()-n);A.elements=p;A.offset=w;A.count=z;A.primitive=y;l.buffer=t;l.divisor=C;l.normalized=q;l.offset=v;l.size=x;l.state=r;l.stride=D;l.type=I;l.w=F;l.x=Ea;l.y=H;l.z=J;g.buffer=da;g.divisor=K;g.normalized=L;g.offset=M;g.size=W;g.state=N;g.stride=ha;g.type=O;g.w=P;g.x=Q;g.y=wa;g.z=na;ga.vert=G;ga.frag=R},batch:function(c,e){var a,g,l;a=G.next;a!==G.cur&&(a?H.bindFramebuffer(36160,a.framebuffer):H.bindFramebuffer(36160,null),G.cur=
a);if(E.dirty){var f,k;a=D.dither;a!==E.dither&&(a?H.enable(3024):H.disable(3024),E.dither=a);a=D.blend_enable;a!==E.blend_enable&&(a?H.enable(3042):H.disable(3042),E.blend_enable=a);a=L[0];l=L[1];f=L[2];k=L[3];if(a!==ma[0]||l!==ma[1]||f!==ma[2]||k!==ma[3])H.blendColor(a,l,f,k),ma[0]=a,ma[1]=l,ma[2]=f,ma[3]=k;a=ta[0];l=ta[1];if(a!==S[0]||l!==S[1])H.blendEquationSeparate(a,l),S[0]=a,S[1]=l;a=V[0];l=V[1];f=V[2];k=V[3];if(a!==R[0]||l!==R[1]||f!==R[2]||k!==R[3])H.blendFuncSeparate(a,l,f,k),R[0]=a,R[1]=
l,R[2]=f,R[3]=k;a=D.depth_enable;a!==E.depth_enable&&(a?H.enable(2929):H.disable(2929),E.depth_enable=a);a=D.depth_func;a!==E.depth_func&&(H.depthFunc(a),E.depth_func=a);a=N[0];l=N[1];if(a!==P[0]||l!==P[1])H.depthRange(a,l),P[0]=a,P[1]=l;a=D.depth_mask;a!==E.depth_mask&&(H.depthMask(a),E.depth_mask=a);a=O[0];l=O[1];f=O[2];k=O[3];if(a!==M[0]||l!==M[1]||f!==M[2]||k!==M[3])H.colorMask(a,l,f,k),M[0]=a,M[1]=l,M[2]=f,M[3]=k;a=D.cull_enable;a!==E.cull_enable&&(a?H.enable(2884):H.disable(2884),E.cull_enable=
a);a=D.cull_face;a!==E.cull_face&&(H.cullFace(a),E.cull_face=a);a=D.frontFace;a!==E.frontFace&&(H.frontFace(a),E.frontFace=a);a=D.lineWidth;a!==E.lineWidth&&(H.lineWidth(a),E.lineWidth=a);a=D.polygonOffset_enable;a!==E.polygonOffset_enable&&(a?H.enable(32823):H.disable(32823),E.polygonOffset_enable=a);a=Q[0];l=Q[1];if(a!==ra[0]||l!==ra[1])H.polygonOffset(a,l),ra[0]=a,ra[1]=l;a=D.sample_alpha;a!==E.sample_alpha&&(a?H.enable(32926):H.disable(32926),E.sample_alpha=a);a=D.sample_enable;a!==E.sample_enable&&
(a?H.enable(32928):H.disable(32928),E.sample_enable=a);a=pa[0];l=pa[1];if(a!==J[0]||l!==J[1])H.sampleCoverage(a,l),J[0]=a,J[1]=l;a=D.stencil_enable;a!==E.stencil_enable&&(a?H.enable(2960):H.disable(2960),E.stencil_enable=a);a=D.stencil_mask;a!==E.stencil_mask&&(H.stencilMask(a),E.stencil_mask=a);a=W[0];l=W[1];f=W[2];if(a!==la[0]||l!==la[1]||f!==la[2])H.stencilFunc(a,l,f),la[0]=a,la[1]=l,la[2]=f;a=wa[0];l=wa[1];f=wa[2];k=wa[3];if(a!==da[0]||l!==da[1]||f!==da[2]||k!==da[3])H.stencilOpSeparate(a,l,f,
k),da[0]=a,da[1]=l,da[2]=f,da[3]=k;a=ha[0];l=ha[1];f=ha[2];k=ha[3];if(a!==Ba[0]||l!==Ba[1]||f!==Ba[2]||k!==Ba[3])H.stencilOpSeparate(a,l,f,k),Ba[0]=a,Ba[1]=l,Ba[2]=f,Ba[3]=k;a=D.scissor_enable;a!==E.scissor_enable&&(a?H.enable(3089):H.disable(3089),E.scissor_enable=a);a=K[0];l=K[1];f=K[2];k=K[3];if(a!==ba[0]||l!==ba[1]||f!==ba[2]||k!==ba[3])H.scissor(a,l,f,k),ba[0]=a,ba[1]=l,ba[2]=f,ba[3]=k;a=xa[0];l=xa[1];f=xa[2];k=xa[3];if(a!==ka[0]||l!==ka[1]||f!==ka[2]||k!==ka[3])H.viewport(a,l,f,k),ka[0]=a,ka[1]=
l,ka[2]=f,ka[3]=k;E.dirty=!1}if(a=E.profile)g=performance.now(),u.count+=e;H.useProgram(n.program);ea.setVAO(null);l=x.location;f=I[l];f.buffer||H.enableVertexAttribArray(l);if(f.type!==m.dtype||3!==f.size||f.buffer!==m||!1!==f.normalized||0!==f.offset||0!==f.stride)H.bindBuffer(34962,m.buffer),H.vertexAttribPointer(l,3,m.dtype,!1,0,0),f.type=m.dtype,f.size=3,f.buffer=m,f.normalized=!1,f.offset=0,f.stride=0;l=r.location;f=I[l];f.buffer||H.enableVertexAttribArray(l);if(f.type!==b.dtype||3!==f.size||
f.buffer!==b||!1!==f.normalized||0!==f.offset||0!==f.stride)H.bindBuffer(34962,b.buffer),H.vertexAttribPointer(l,3,b.dtype,!1,0,0),f.type=b.dtype,f.size=3,f.buffer=b,f.normalized=!1,f.offset=0,f.stride=0;l=t[5];F(l)&&16===l.length||d.commandRaise(p,h);H.uniformMatrix4fv(v.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Qa[0]=l[0],Qa[1]=l[1],Qa[2]=l[2],Qa[3]=l[3],Qa[4]=l[4],Qa[5]=l[5],Qa[6]=l[6],Qa[7]=l[7],Qa[8]=l[8],Qa[9]=l[9],Qa[10]=l[10],Qa[11]=l[11],Qa[12]=l[12],Qa[13]=l[13],Qa[14]=
l[14],Qa[15]=l[15],Qa));l=t[8];F(l)&&16===l.length||d.commandRaise(w,h);H.uniformMatrix4fv(na.location,!1,Array.isArray(l)||l instanceof Float32Array?l:(Ja[0]=l[0],Ja[1]=l[1],Ja[2]=l[2],Ja[3]=l[3],Ja[4]=l[4],Ja[5]=l[5],Ja[6]=l[6],Ja[7]=l[7],Ja[8]=l[8],Ja[9]=l[9],Ja[10]=l[10],Ja[11]=l[11],Ja[12]=l[12],Ja[13]=l[13],Ja[14]=l[14],Ja[15]=l[15],Ja));y&&H.bindBuffer(34963,y.buffer.buffer);f=y.primType;k=y.vertCount-0;0<=k||d.commandRaise(C,h);for(l=0;l<e;++l)k&&H.drawElements(f,k,y.type,0<<(y.type-5121>>
1));ea.setVAO(null);a&&(u.cpuTime+=performance.now()-g)}}},"$14,angle,color,position":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w){var y,C,r,x,v,na,I,aa,E,A,G,H,F,D,ga,t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha;y=a.attributes;C=a.context;r=a.current;x=a.draw;v=a.elements;na=a.framebuffer;I=a.gl;aa=a.isArrayLike;E=a.next;A=a.shader;G=a.uniforms;H=a.vao;F=E.blend_color;D=r.blend_color;ga=E.blend_equation;t=r.blend_equation;ea=E.blend_func;L=r.blend_func;ma=E.colorMask;ta=r.colorMask;S=E.depth_range;
V=r.depth_range;R=E.polygonOffset_offset;O=r.polygonOffset_offset;M=E.sample_coverage;N=r.sample_coverage;P=E.scissor_box;Q=r.scissor_box;ra=E.stencil_func;pa=r.stencil_func;J=E.stencil_opBack;K=r.stencil_opBack;ba=E.stencil_opFront;W=r.stencil_opFront;la=E.viewport;ha=r.viewport;return{draw:function(e){var a,l,g,k;a=na.next;a!==na.cur&&(a?I.bindFramebuffer(36160,a.framebuffer):I.bindFramebuffer(36160,null),na.cur=a);if(r.dirty){var z;a=E.dither;a!==r.dither&&(a?I.enable(3024):I.disable(3024),r.dither=
a);a=E.blend_enable;a!==r.blend_enable&&(a?I.enable(3042):I.disable(3042),r.blend_enable=a);a=F[0];g=F[1];k=F[2];z=F[3];if(a!==D[0]||g!==D[1]||k!==D[2]||z!==D[3])I.blendColor(a,g,k,z),D[0]=a,D[1]=g,D[2]=k,D[3]=z;a=ga[0];g=ga[1];if(a!==t[0]||g!==t[1])I.blendEquationSeparate(a,g),t[0]=a,t[1]=g;a=ea[0];g=ea[1];k=ea[2];z=ea[3];if(a!==L[0]||g!==L[1]||k!==L[2]||z!==L[3])I.blendFuncSeparate(a,g,k,z),L[0]=a,L[1]=g,L[2]=k,L[3]=z;a=E.depth_func;a!==r.depth_func&&(I.depthFunc(a),r.depth_func=a);a=S[0];g=S[1];
if(a!==V[0]||g!==V[1])I.depthRange(a,g),V[0]=a,V[1]=g;a=E.depth_mask;a!==r.depth_mask&&(I.depthMask(a),r.depth_mask=a);a=ma[0];g=ma[1];k=ma[2];z=ma[3];if(a!==ta[0]||g!==ta[1]||k!==ta[2]||z!==ta[3])I.colorMask(a,g,k,z),ta[0]=a,ta[1]=g,ta[2]=k,ta[3]=z;a=E.cull_enable;a!==r.cull_enable&&(a?I.enable(2884):I.disable(2884),r.cull_enable=a);a=E.cull_face;a!==r.cull_face&&(I.cullFace(a),r.cull_face=a);a=E.frontFace;a!==r.frontFace&&(I.frontFace(a),r.frontFace=a);a=E.lineWidth;a!==r.lineWidth&&(I.lineWidth(a),
r.lineWidth=a);a=E.polygonOffset_enable;a!==r.polygonOffset_enable&&(a?I.enable(32823):I.disable(32823),r.polygonOffset_enable=a);a=R[0];g=R[1];if(a!==O[0]||g!==O[1])I.polygonOffset(a,g),O[0]=a,O[1]=g;a=E.sample_alpha;a!==r.sample_alpha&&(a?I.enable(32926):I.disable(32926),r.sample_alpha=a);a=E.sample_enable;a!==r.sample_enable&&(a?I.enable(32928):I.disable(32928),r.sample_enable=a);a=M[0];g=M[1];if(a!==N[0]||g!==N[1])I.sampleCoverage(a,g),N[0]=a,N[1]=g;a=E.stencil_enable;a!==r.stencil_enable&&(a?
I.enable(2960):I.disable(2960),r.stencil_enable=a);a=E.stencil_mask;a!==r.stencil_mask&&(I.stencilMask(a),r.stencil_mask=a);a=ra[0];g=ra[1];k=ra[2];if(a!==pa[0]||g!==pa[1]||k!==pa[2])I.stencilFunc(a,g,k),pa[0]=a,pa[1]=g,pa[2]=k;a=ba[0];g=ba[1];k=ba[2];z=ba[3];if(a!==W[0]||g!==W[1]||k!==W[2]||z!==W[3])I.stencilOpSeparate(a,g,k,z),W[0]=a,W[1]=g,W[2]=k,W[3]=z;a=J[0];g=J[1];k=J[2];z=J[3];if(a!==K[0]||g!==K[1]||k!==K[2]||z!==K[3])I.stencilOpSeparate(a,g,k,z),K[0]=a,K[1]=g,K[2]=k,K[3]=z;a=E.scissor_enable;
a!==r.scissor_enable&&(a?I.enable(3089):I.disable(3089),r.scissor_enable=a);a=P[0];g=P[1];k=P[2];z=P[3];if(a!==Q[0]||g!==Q[1]||k!==Q[2]||z!==Q[3])I.scissor(a,g,k,z),Q[0]=a,Q[1]=g,Q[2]=k,Q[3]=z;a=la[0];g=la[1];k=la[2];z=la[3];if(a!==ha[0]||g!==ha[1]||k!==ha[2]||z!==ha[3])I.viewport(a,g,k,z),ha[0]=a,ha[1]=g,ha[2]=k,ha[3]=z}I.disable(2929);r.depth_enable=!1;if(a=r.profile)l=performance.now(),u.count++;I.useProgram(q.program);H.setVAO(null);g=w.location;k=y[g];k.buffer||I.enableVertexAttribArray(g);if(k.type!==
m.dtype||2!==k.size||k.buffer!==m||!1!==k.normalized||0!==k.offset||0!==k.stride)I.bindBuffer(34962,m.buffer),I.vertexAttribPointer(g,2,m.dtype,!1,0,0),k.type=m.dtype,k.size=2,k.buffer=m,k.normalized=!1,k.offset=0,k.stride=0;g=b.call(this,C,e,0);"number"!==typeof g&&d.commandRaise(f,h);I.uniform1f(n.location,g);e=e.color;aa(e)&&4===e.length||d.commandRaise(c,h);I.uniform4f(p.location,e[0],e[1],e[2],e[3]);(e=x.elements)?I.bindBuffer(34963,e.buffer.buffer):H.currentVAO&&(e=v.getElements(H.currentVAO.elements))&&
I.bindBuffer(34963,e.buffer.buffer);g=x.primitive;k=x.offset;e?I.drawElements(g,3,e.type,k<<(e.type-5121>>1)):I.drawArrays(g,k,3);r.dirty=!0;H.setVAO(null);a&&(u.cpuTime+=performance.now()-l)},scope:function(c,a,e){var b,l,g,d,f,n,p,w,y,h,t,B,q,v,D,I,F,T,H,J;b=E.depth_enable;E.depth_enable=!1;if(l=r.profile)g=performance.now(),u.count++;d=x.count;x.count=3;f=k.call(this,C,c,e);n=G[3];G[3]=f;p=c.color;f=G[4];G[4]=p;p=z.buffer;z.buffer=m;w=z.divisor;z.divisor=0;y=z.normalized;z.normalized=!1;h=z.offset;
z.offset=0;t=z.size;z.size=0;B=z.state;z.state=1;q=z.stride;z.stride=0;v=z.type;z.type=m.dtype;D=z.w;z.w=0;I=z.x;z.x=0;F=z.y;z.y=0;T=z.z;z.z=0;H=A.vert;A.vert=2;J=A.frag;A.frag=1;r.dirty=!0;a(C,c,e);E.depth_enable=b;l&&(u.cpuTime+=performance.now()-g);x.count=d;G[3]=n;G[4]=f;z.buffer=p;z.divisor=w;z.normalized=y;z.offset=h;z.size=t;z.state=B;z.stride=q;z.type=v;z.w=D;z.x=I;z.y=F;z.z=T;A.vert=H;A.frag=J;r.dirty=!0},batch:function(c,a){var b,f,k,z;b=na.next;b!==na.cur&&(b?I.bindFramebuffer(36160,b.framebuffer):
I.bindFramebuffer(36160,null),na.cur=b);if(r.dirty){var q,A,G;b=E.dither;b!==r.dither&&(b?I.enable(3024):I.disable(3024),r.dither=b);b=E.blend_enable;b!==r.blend_enable&&(b?I.enable(3042):I.disable(3042),r.blend_enable=b);b=F[0];q=F[1];A=F[2];G=F[3];if(b!==D[0]||q!==D[1]||A!==D[2]||G!==D[3])I.blendColor(b,q,A,G),D[0]=b,D[1]=q,D[2]=A,D[3]=G;b=ga[0];q=ga[1];if(b!==t[0]||q!==t[1])I.blendEquationSeparate(b,q),t[0]=b,t[1]=q;b=ea[0];q=ea[1];A=ea[2];G=ea[3];if(b!==L[0]||q!==L[1]||A!==L[2]||G!==L[3])I.blendFuncSeparate(b,
q,A,G),L[0]=b,L[1]=q,L[2]=A,L[3]=G;b=E.depth_func;b!==r.depth_func&&(I.depthFunc(b),r.depth_func=b);b=S[0];q=S[1];if(b!==V[0]||q!==V[1])I.depthRange(b,q),V[0]=b,V[1]=q;b=E.depth_mask;b!==r.depth_mask&&(I.depthMask(b),r.depth_mask=b);b=ma[0];q=ma[1];A=ma[2];G=ma[3];if(b!==ta[0]||q!==ta[1]||A!==ta[2]||G!==ta[3])I.colorMask(b,q,A,G),ta[0]=b,ta[1]=q,ta[2]=A,ta[3]=G;b=E.cull_enable;b!==r.cull_enable&&(b?I.enable(2884):I.disable(2884),r.cull_enable=b);b=E.cull_face;b!==r.cull_face&&(I.cullFace(b),r.cull_face=
b);b=E.frontFace;b!==r.frontFace&&(I.frontFace(b),r.frontFace=b);b=E.lineWidth;b!==r.lineWidth&&(I.lineWidth(b),r.lineWidth=b);b=E.polygonOffset_enable;b!==r.polygonOffset_enable&&(b?I.enable(32823):I.disable(32823),r.polygonOffset_enable=b);b=R[0];q=R[1];if(b!==O[0]||q!==O[1])I.polygonOffset(b,q),O[0]=b,O[1]=q;b=E.sample_alpha;b!==r.sample_alpha&&(b?I.enable(32926):I.disable(32926),r.sample_alpha=b);b=E.sample_enable;b!==r.sample_enable&&(b?I.enable(32928):I.disable(32928),r.sample_enable=b);b=M[0];
q=M[1];if(b!==N[0]||q!==N[1])I.sampleCoverage(b,q),N[0]=b,N[1]=q;b=E.stencil_enable;b!==r.stencil_enable&&(b?I.enable(2960):I.disable(2960),r.stencil_enable=b);b=E.stencil_mask;b!==r.stencil_mask&&(I.stencilMask(b),r.stencil_mask=b);b=ra[0];q=ra[1];A=ra[2];if(b!==pa[0]||q!==pa[1]||A!==pa[2])I.stencilFunc(b,q,A),pa[0]=b,pa[1]=q,pa[2]=A;b=ba[0];q=ba[1];A=ba[2];G=ba[3];if(b!==W[0]||q!==W[1]||A!==W[2]||G!==W[3])I.stencilOpSeparate(b,q,A,G),W[0]=b,W[1]=q,W[2]=A,W[3]=G;b=J[0];q=J[1];A=J[2];G=J[3];if(b!==
K[0]||q!==K[1]||A!==K[2]||G!==K[3])I.stencilOpSeparate(b,q,A,G),K[0]=b,K[1]=q,K[2]=A,K[3]=G;b=E.scissor_enable;b!==r.scissor_enable&&(b?I.enable(3089):I.disable(3089),r.scissor_enable=b);b=P[0];q=P[1];A=P[2];G=P[3];if(b!==Q[0]||q!==Q[1]||A!==Q[2]||G!==Q[3])I.scissor(b,q,A,G),Q[0]=b,Q[1]=q,Q[2]=A,Q[3]=G;b=la[0];q=la[1];A=la[2];G=la[3];if(b!==ha[0]||q!==ha[1]||A!==ha[2]||G!==ha[3])I.viewport(b,q,A,G),ha[0]=b,ha[1]=q,ha[2]=A,ha[3]=G}I.disable(2929);r.depth_enable=!1;if(b=r.profile)f=performance.now(),
u.count+=a;I.useProgram(B.program);H.setVAO(null);q=w.location;A=y[q];A.buffer||I.enableVertexAttribArray(q);if(A.type!==m.dtype||2!==A.size||A.buffer!==m||!1!==A.normalized||0!==A.offset||0!==A.stride)I.bindBuffer(34962,m.buffer),I.vertexAttribPointer(q,2,m.dtype,!1,0,0),A.type=m.dtype,A.size=2,A.buffer=m,A.normalized=!1,A.offset=0,A.stride=0;k=e.call(this,C,z,k);"number"!==typeof k&&d.commandRaise(l,h);I.uniform1f(n.location,k);(q=x.elements)?I.bindBuffer(34963,q.buffer.buffer):H.currentVAO&&(q=
v.getElements(H.currentVAO.elements))&&I.bindBuffer(34963,q.buffer.buffer);A=x.primitive;G=x.offset;for(k=0;k<a;++k){z=c[k];var ca,Ua,ia,fa,sa,va,Da;ca=z.color;aa(ca)&&4===ca.length||d.commandRaise(g,h);z=ca[0];ia=ca[1];sa=ca[2];ca=ca[3];k&&Ua===z&&fa===ia&&va===sa&&Da===ca||(Ua=z,fa=ia,va=sa,Da=ca,I.uniform4f(p.location,z,ia,sa,ca));q?I.drawElements(A,3,q.type,G<<(q.type-5121>>1)):I.drawArrays(A,G,3)}r.dirty=!0;H.setVAO(null);b&&(u.cpuTime+=performance.now()-f)}}},"$13,color,position":function(a,
d,h,u,q,m,b,f,c,k,z,B,e,l,g,n){var p,w,y,C,r,x,v,G,I,aa,E,A,ca,H,F,D,ga,t,ea,L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba;p=a.attributes;w=a.context;y=a.current;C=a.draw;r=a.framebuffer;x=a.gl;v=a.next;G=a.shader;I=a.uniforms;aa=a.vao;E=v.blend_color;A=y.blend_color;ca=v.blend_equation;H=y.blend_equation;F=v.blend_func;D=y.blend_func;ga=v.colorMask;t=y.colorMask;ea=v.depth_range;L=y.depth_range;ma=v.polygonOffset_offset;ta=y.polygonOffset_offset;S=v.sample_coverage;V=y.sample_coverage;R=v.scissor_box;O=y.scissor_box;
M=v.stencil_func;N=y.stencil_func;P=v.stencil_opBack;Q=y.stencil_opBack;ra=v.stencil_opFront;pa=y.stencil_opFront;J=v.viewport;K=y.viewport;ba=[1,0,0,1];return{draw:function(c){var a,e,l;c=r.next;c!==r.cur&&(c?x.bindFramebuffer(36160,c.framebuffer):x.bindFramebuffer(36160,null),r.cur=c);if(y.dirty){var k;c=v.dither;c!==y.dither&&(c?x.enable(3024):x.disable(3024),y.dither=c);c=v.blend_enable;c!==y.blend_enable&&(c?x.enable(3042):x.disable(3042),y.blend_enable=c);c=E[0];e=E[1];l=E[2];k=E[3];if(c!==
A[0]||e!==A[1]||l!==A[2]||k!==A[3])x.blendColor(c,e,l,k),A[0]=c,A[1]=e,A[2]=l,A[3]=k;c=ca[0];e=ca[1];if(c!==H[0]||e!==H[1])x.blendEquationSeparate(c,e),H[0]=c,H[1]=e;c=F[0];e=F[1];l=F[2];k=F[3];if(c!==D[0]||e!==D[1]||l!==D[2]||k!==D[3])x.blendFuncSeparate(c,e,l,k),D[0]=c,D[1]=e,D[2]=l,D[3]=k;c=v.depth_enable;c!==y.depth_enable&&(c?x.enable(2929):x.disable(2929),y.depth_enable=c);c=v.depth_func;c!==y.depth_func&&(x.depthFunc(c),y.depth_func=c);c=ea[0];e=ea[1];if(c!==L[0]||e!==L[1])x.depthRange(c,e),
L[0]=c,L[1]=e;c=v.depth_mask;c!==y.depth_mask&&(x.depthMask(c),y.depth_mask=c);c=ga[0];e=ga[1];l=ga[2];k=ga[3];if(c!==t[0]||e!==t[1]||l!==t[2]||k!==t[3])x.colorMask(c,e,l,k),t[0]=c,t[1]=e,t[2]=l,t[3]=k;c=v.cull_enable;c!==y.cull_enable&&(c?x.enable(2884):x.disable(2884),y.cull_enable=c);c=v.cull_face;c!==y.cull_face&&(x.cullFace(c),y.cull_face=c);c=v.frontFace;c!==y.frontFace&&(x.frontFace(c),y.frontFace=c);c=v.polygonOffset_enable;c!==y.polygonOffset_enable&&(c?x.enable(32823):x.disable(32823),y.polygonOffset_enable=
c);c=ma[0];e=ma[1];if(c!==ta[0]||e!==ta[1])x.polygonOffset(c,e),ta[0]=c,ta[1]=e;c=v.sample_alpha;c!==y.sample_alpha&&(c?x.enable(32926):x.disable(32926),y.sample_alpha=c);c=v.sample_enable;c!==y.sample_enable&&(c?x.enable(32928):x.disable(32928),y.sample_enable=c);c=S[0];e=S[1];if(c!==V[0]||e!==V[1])x.sampleCoverage(c,e),V[0]=c,V[1]=e;c=v.stencil_enable;c!==y.stencil_enable&&(c?x.enable(2960):x.disable(2960),y.stencil_enable=c);c=v.stencil_mask;c!==y.stencil_mask&&(x.stencilMask(c),y.stencil_mask=
c);c=M[0];e=M[1];l=M[2];if(c!==N[0]||e!==N[1]||l!==N[2])x.stencilFunc(c,e,l),N[0]=c,N[1]=e,N[2]=l;c=ra[0];e=ra[1];l=ra[2];k=ra[3];if(c!==pa[0]||e!==pa[1]||l!==pa[2]||k!==pa[3])x.stencilOpSeparate(c,e,l,k),pa[0]=c,pa[1]=e,pa[2]=l,pa[3]=k;c=P[0];e=P[1];l=P[2];k=P[3];if(c!==Q[0]||e!==Q[1]||l!==Q[2]||k!==Q[3])x.stencilOpSeparate(c,e,l,k),Q[0]=c,Q[1]=e,Q[2]=l,Q[3]=k;c=v.scissor_enable;c!==y.scissor_enable&&(c?x.enable(3089):x.disable(3089),y.scissor_enable=c);c=R[0];e=R[1];l=R[2];k=R[3];if(c!==O[0]||e!==
O[1]||l!==O[2]||k!==O[3])x.scissor(c,e,l,k),O[0]=c,O[1]=e,O[2]=l,O[3]=k;c=J[0];e=J[1];l=J[2];k=J[3];if(c!==K[0]||e!==K[1]||l!==K[2]||k!==K[3])x.viewport(c,e,l,k),K[0]=c,K[1]=e,K[2]=l,K[3]=k}x.lineWidth(1);y.lineWidth=1;if(c=y.profile)a=performance.now(),u.count++;x.useProgram(q.program);aa.setVAO(null);e=n.location;l=p[e];l.buffer||x.enableVertexAttribArray(e);if(l.type!==m.dtype||2!==l.size||l.buffer!==m||!1!==l.normalized||0!==l.offset||0!==l.stride)x.bindBuffer(34962,m.buffer),x.vertexAttribPointer(e,
2,m.dtype,!1,0,0),l.type=m.dtype,l.size=2,l.buffer=m,l.normalized=!1,l.offset=0,l.stride=0;x.uniform4f(g.location,1,0,0,1);b&&x.bindBuffer(34963,b.buffer.buffer);e=b.primType;l=b.vertCount-0;0<=l||d.commandRaise(f,h);l&&(x.drawElements(e,l,b.type,0<<(b.type-5121>>1)),y.dirty=!0,aa.setVAO(null),c&&(u.cpuTime+=performance.now()-a))},scope:function(e,a,b){var l,g,f,n,p,t,q,B,x,r,A,D,E,F,H,J,K,L,Ea,M,N,O;l=v.lineWidth;v.lineWidth=1;if(g=y.profile)f=performance.now(),u.count++;n=C.elements;C.elements=
c;p=C.offset;C.offset=0;t=c.vertCount-0;0<=t||d.commandRaise(k,h);q=C.count;C.count=t;B=c.primType;t=C.primitive;C.primitive=B;B=I[3];I[3]=ba;x=z.buffer;z.buffer=m;r=z.divisor;z.divisor=0;A=z.normalized;z.normalized=!1;D=z.offset;z.offset=0;E=z.size;z.size=0;F=z.state;z.state=1;H=z.stride;z.stride=0;J=z.type;z.type=m.dtype;K=z.w;z.w=0;L=z.x;z.x=0;Ea=z.y;z.y=0;M=z.z;z.z=0;N=G.vert;G.vert=2;O=G.frag;G.frag=1;y.dirty=!0;a(w,e,b);v.lineWidth=l;g&&(u.cpuTime+=performance.now()-f);C.elements=n;C.offset=
p;C.count=q;C.primitive=t;I[3]=B;z.buffer=x;z.divisor=r;z.normalized=A;z.offset=D;z.size=E;z.state=F;z.stride=H;z.type=J;z.w=K;z.x=L;z.y=Ea;z.z=M;G.vert=N;G.frag=O;y.dirty=!0},batch:function(c,a){var b,f,k;b=r.next;b!==r.cur&&(b?x.bindFramebuffer(36160,b.framebuffer):x.bindFramebuffer(36160,null),r.cur=b);if(y.dirty){var w,z;b=v.dither;b!==y.dither&&(b?x.enable(3024):x.disable(3024),y.dither=b);b=v.blend_enable;b!==y.blend_enable&&(b?x.enable(3042):x.disable(3042),y.blend_enable=b);b=E[0];k=E[1];
w=E[2];z=E[3];if(b!==A[0]||k!==A[1]||w!==A[2]||z!==A[3])x.blendColor(b,k,w,z),A[0]=b,A[1]=k,A[2]=w,A[3]=z;b=ca[0];k=ca[1];if(b!==H[0]||k!==H[1])x.blendEquationSeparate(b,k),H[0]=b,H[1]=k;b=F[0];k=F[1];w=F[2];z=F[3];if(b!==D[0]||k!==D[1]||w!==D[2]||z!==D[3])x.blendFuncSeparate(b,k,w,z),D[0]=b,D[1]=k,D[2]=w,D[3]=z;b=v.depth_enable;b!==y.depth_enable&&(b?x.enable(2929):x.disable(2929),y.depth_enable=b);b=v.depth_func;b!==y.depth_func&&(x.depthFunc(b),y.depth_func=b);b=ea[0];k=ea[1];if(b!==L[0]||k!==
L[1])x.depthRange(b,k),L[0]=b,L[1]=k;b=v.depth_mask;b!==y.depth_mask&&(x.depthMask(b),y.depth_mask=b);b=ga[0];k=ga[1];w=ga[2];z=ga[3];if(b!==t[0]||k!==t[1]||w!==t[2]||z!==t[3])x.colorMask(b,k,w,z),t[0]=b,t[1]=k,t[2]=w,t[3]=z;b=v.cull_enable;b!==y.cull_enable&&(b?x.enable(2884):x.disable(2884),y.cull_enable=b);b=v.cull_face;b!==y.cull_face&&(x.cullFace(b),y.cull_face=b);b=v.frontFace;b!==y.frontFace&&(x.frontFace(b),y.frontFace=b);b=v.polygonOffset_enable;b!==y.polygonOffset_enable&&(b?x.enable(32823):
x.disable(32823),y.polygonOffset_enable=b);b=ma[0];k=ma[1];if(b!==ta[0]||k!==ta[1])x.polygonOffset(b,k),ta[0]=b,ta[1]=k;b=v.sample_alpha;b!==y.sample_alpha&&(b?x.enable(32926):x.disable(32926),y.sample_alpha=b);b=v.sample_enable;b!==y.sample_enable&&(b?x.enable(32928):x.disable(32928),y.sample_enable=b);b=S[0];k=S[1];if(b!==V[0]||k!==V[1])x.sampleCoverage(b,k),V[0]=b,V[1]=k;b=v.stencil_enable;b!==y.stencil_enable&&(b?x.enable(2960):x.disable(2960),y.stencil_enable=b);b=v.stencil_mask;b!==y.stencil_mask&&
(x.stencilMask(b),y.stencil_mask=b);b=M[0];k=M[1];w=M[2];if(b!==N[0]||k!==N[1]||w!==N[2])x.stencilFunc(b,k,w),N[0]=b,N[1]=k,N[2]=w;b=ra[0];k=ra[1];w=ra[2];z=ra[3];if(b!==pa[0]||k!==pa[1]||w!==pa[2]||z!==pa[3])x.stencilOpSeparate(b,k,w,z),pa[0]=b,pa[1]=k,pa[2]=w,pa[3]=z;b=P[0];k=P[1];w=P[2];z=P[3];if(b!==Q[0]||k!==Q[1]||w!==Q[2]||z!==Q[3])x.stencilOpSeparate(b,k,w,z),Q[0]=b,Q[1]=k,Q[2]=w,Q[3]=z;b=v.scissor_enable;b!==y.scissor_enable&&(b?x.enable(3089):x.disable(3089),y.scissor_enable=b);b=R[0];k=
R[1];w=R[2];z=R[3];if(b!==O[0]||k!==O[1]||w!==O[2]||z!==O[3])x.scissor(b,k,w,z),O[0]=b,O[1]=k,O[2]=w,O[3]=z;b=J[0];k=J[1];w=J[2];z=J[3];if(b!==K[0]||k!==K[1]||w!==K[2]||z!==K[3])x.viewport(b,k,w,z),K[0]=b,K[1]=k,K[2]=w,K[3]=z}x.lineWidth(1);y.lineWidth=1;if(b=y.profile)f=performance.now(),u.count+=a;x.useProgram(B.program);aa.setVAO(null);k=n.location;w=p[k];w.buffer||x.enableVertexAttribArray(k);if(w.type!==m.dtype||2!==w.size||w.buffer!==m||!1!==w.normalized||0!==w.offset||0!==w.stride)x.bindBuffer(34962,
m.buffer),x.vertexAttribPointer(k,2,m.dtype,!1,0,0),w.type=m.dtype,w.size=2,w.buffer=m,w.normalized=!1,w.offset=0,w.stride=0;x.uniform4f(g.location,1,0,0,1);e&&x.bindBuffer(34963,e.buffer.buffer);w=e.primType;z=e.vertCount-0;0<=z||d.commandRaise(l,h);for(k=0;k<a;++k)z&&x.drawElements(w,z,e.type,0<<(e.type-5121>>1));y.dirty=!0;aa.setVAO(null);b&&(u.cpuTime+=performance.now()-f)}}},"$20,mouse,position,t,texture":function(a,d,h,u,q,m,b,f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,G,I){var aa,E,A,ca,H,F,D,ga,t,ea,
L,ma,ta,S,V,R,O,M,N,P,Q,ra,pa,J,K,ba,W,la,ha,Ba,wa,da,xa,ka,oa,Aa;aa=a.attributes;E=a.context;A=a.current;ca=a.draw;H=a.elements;F=a.framebuffer;D=a.gl;ga=a.isArrayLike;t=a.next;ea=a.shader;L=a.uniforms;ma=a.vao;ta=t.blend_color;S=A.blend_color;V=t.blend_equation;R=A.blend_equation;O=t.blend_func;M=A.blend_func;N=t.colorMask;P=A.colorMask;Q=t.depth_range;ra=A.depth_range;pa=t.polygonOffset_offset;J=A.polygonOffset_offset;K=t.sample_coverage;ba=A.sample_coverage;W=t.scissor_box;la=A.scissor_box;ha=
t.stencil_func;Ba=A.stencil_func;wa=t.stencil_opBack;da=A.stencil_opBack;xa=t.stencil_opFront;ka=A.stencil_opFront;oa=t.viewport;Aa=A.viewport;return{draw:function(a){var e,l,g,n;e=F.next;e!==F.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),F.cur=e);if(A.dirty){var p;e=t.dither;e!==A.dither&&(e?D.enable(3024):D.disable(3024),A.dither=e);e=t.blend_enable;e!==A.blend_enable&&(e?D.enable(3042):D.disable(3042),A.blend_enable=e);e=ta[0];g=ta[1];n=ta[2];p=ta[3];if(e!==S[0]||
g!==S[1]||n!==S[2]||p!==S[3])D.blendColor(e,g,n,p),S[0]=e,S[1]=g,S[2]=n,S[3]=p;e=V[0];g=V[1];if(e!==R[0]||g!==R[1])D.blendEquationSeparate(e,g),R[0]=e,R[1]=g;e=O[0];g=O[1];n=O[2];p=O[3];if(e!==M[0]||g!==M[1]||n!==M[2]||p!==M[3])D.blendFuncSeparate(e,g,n,p),M[0]=e,M[1]=g,M[2]=n,M[3]=p;e=t.depth_enable;e!==A.depth_enable&&(e?D.enable(2929):D.disable(2929),A.depth_enable=e);e=t.depth_func;e!==A.depth_func&&(D.depthFunc(e),A.depth_func=e);e=Q[0];g=Q[1];if(e!==ra[0]||g!==ra[1])D.depthRange(e,g),ra[0]=
e,ra[1]=g;e=t.depth_mask;e!==A.depth_mask&&(D.depthMask(e),A.depth_mask=e);e=N[0];g=N[1];n=N[2];p=N[3];if(e!==P[0]||g!==P[1]||n!==P[2]||p!==P[3])D.colorMask(e,g,n,p),P[0]=e,P[1]=g,P[2]=n,P[3]=p;e=t.cull_enable;e!==A.cull_enable&&(e?D.enable(2884):D.disable(2884),A.cull_enable=e);e=t.cull_face;e!==A.cull_face&&(D.cullFace(e),A.cull_face=e);e=t.frontFace;e!==A.frontFace&&(D.frontFace(e),A.frontFace=e);e=t.lineWidth;e!==A.lineWidth&&(D.lineWidth(e),A.lineWidth=e);e=t.polygonOffset_enable;e!==A.polygonOffset_enable&&
(e?D.enable(32823):D.disable(32823),A.polygonOffset_enable=e);e=pa[0];g=pa[1];if(e!==J[0]||g!==J[1])D.polygonOffset(e,g),J[0]=e,J[1]=g;e=t.sample_alpha;e!==A.sample_alpha&&(e?D.enable(32926):D.disable(32926),A.sample_alpha=e);e=t.sample_enable;e!==A.sample_enable&&(e?D.enable(32928):D.disable(32928),A.sample_enable=e);e=K[0];g=K[1];if(e!==ba[0]||g!==ba[1])D.sampleCoverage(e,g),ba[0]=e,ba[1]=g;e=t.stencil_enable;e!==A.stencil_enable&&(e?D.enable(2960):D.disable(2960),A.stencil_enable=e);e=t.stencil_mask;
e!==A.stencil_mask&&(D.stencilMask(e),A.stencil_mask=e);e=ha[0];g=ha[1];n=ha[2];if(e!==Ba[0]||g!==Ba[1]||n!==Ba[2])D.stencilFunc(e,g,n),Ba[0]=e,Ba[1]=g,Ba[2]=n;e=xa[0];g=xa[1];n=xa[2];p=xa[3];if(e!==ka[0]||g!==ka[1]||n!==ka[2]||p!==ka[3])D.stencilOpSeparate(e,g,n,p),ka[0]=e,ka[1]=g,ka[2]=n,ka[3]=p;e=wa[0];g=wa[1];n=wa[2];p=wa[3];if(e!==da[0]||g!==da[1]||n!==da[2]||p!==da[3])D.stencilOpSeparate(e,g,n,p),da[0]=e,da[1]=g,da[2]=n,da[3]=p;e=t.scissor_enable;e!==A.scissor_enable&&(e?D.enable(3089):D.disable(3089),
A.scissor_enable=e);e=W[0];g=W[1];n=W[2];p=W[3];if(e!==la[0]||g!==la[1]||n!==la[2]||p!==la[3])D.scissor(e,g,n,p),la[0]=e,la[1]=g,la[2]=n,la[3]=p;e=oa[0];g=oa[1];n=oa[2];p=oa[3];if(e!==Aa[0]||g!==Aa[1]||n!==Aa[2]||p!==Aa[3])D.viewport(e,g,n,p),Aa[0]=e,Aa[1]=g,Aa[2]=n,Aa[3]=p;A.dirty=!1}if(e=A.profile)l=performance.now(),u.count++;D.useProgram(q.program);ma.setVAO(null);g=v.location;n=aa[g];n.buffer||D.enableVertexAttribArray(g);if(n.type!==m.dtype||2!==n.size||n.buffer!==m||!1!==n.normalized||0!==
n.offset||0!==n.stride)D.bindBuffer(34962,m.buffer),D.vertexAttribPointer(g,2,m.dtype,!1,0,0),n.type=m.dtype,n.size=2,n.buffer=m,n.normalized=!1,n.offset=0,n.stride=0;g=b.call(this,E,a,0);ga(g)&&2===g.length||d.commandRaise(f,h);D.uniform2f(x.location,g[0],g[1]);a=c.call(this,E,a,0);"number"!==typeof a&&d.commandRaise(k,h);D.uniform1f(G.location,a);D.uniform1i(I.location,z.bind());(a=ca.elements)?D.bindBuffer(34963,a.buffer.buffer):ma.currentVAO&&(a=H.getElements(ma.currentVAO.elements))&&D.bindBuffer(34963,
a.buffer.buffer);g=ca.primitive;n=ca.offset;a?D.drawElements(g,3,a.type,n<<(a.type-5121>>1)):D.drawArrays(g,n,3);ma.setVAO(null);e&&(u.cpuTime+=performance.now()-l);z.unbind()},scope:function(c,a,b){var k,d,f,n,p,w,y,h,z,t,q,C,v,x,r,D,I,F,T,H;if(k=A.profile)d=performance.now(),u.count++;f=ca.count;ca.count=3;n=B.call(this,E,c,b);p=L[3];L[3]=n;w=e.call(this,E,c,b);n=L[4];L[4]=w;w=L[5];L[5]=l;y=g.buffer;g.buffer=m;h=g.divisor;g.divisor=0;z=g.normalized;g.normalized=!1;t=g.offset;g.offset=0;q=g.size;
g.size=0;C=g.state;g.state=1;v=g.stride;g.stride=0;x=g.type;g.type=m.dtype;r=g.w;g.w=0;D=g.x;g.x=0;I=g.y;g.y=0;F=g.z;g.z=0;T=ea.vert;ea.vert=2;H=ea.frag;ea.frag=1;a(E,c,b);k&&(u.cpuTime+=performance.now()-d);ca.count=f;L[3]=p;L[4]=n;L[5]=w;g.buffer=y;g.divisor=h;g.normalized=z;g.offset=t;g.size=q;g.state=C;g.stride=v;g.type=x;g.w=r;g.x=D;g.y=I;g.z=F;ea.vert=T;ea.frag=H},batch:function(c,e){var a,b,g;a=F.next;a!==F.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),F.cur=
a);if(A.dirty){var l,k,f;a=t.dither;a!==A.dither&&(a?D.enable(3024):D.disable(3024),A.dither=a);a=t.blend_enable;a!==A.blend_enable&&(a?D.enable(3042):D.disable(3042),A.blend_enable=a);a=ta[0];l=ta[1];k=ta[2];f=ta[3];if(a!==S[0]||l!==S[1]||k!==S[2]||f!==S[3])D.blendColor(a,l,k,f),S[0]=a,S[1]=l,S[2]=k,S[3]=f;a=V[0];l=V[1];if(a!==R[0]||l!==R[1])D.blendEquationSeparate(a,l),R[0]=a,R[1]=l;a=O[0];l=O[1];k=O[2];f=O[3];if(a!==M[0]||l!==M[1]||k!==M[2]||f!==M[3])D.blendFuncSeparate(a,l,k,f),M[0]=a,M[1]=l,
M[2]=k,M[3]=f;a=t.depth_enable;a!==A.depth_enable&&(a?D.enable(2929):D.disable(2929),A.depth_enable=a);a=t.depth_func;a!==A.depth_func&&(D.depthFunc(a),A.depth_func=a);a=Q[0];l=Q[1];if(a!==ra[0]||l!==ra[1])D.depthRange(a,l),ra[0]=a,ra[1]=l;a=t.depth_mask;a!==A.depth_mask&&(D.depthMask(a),A.depth_mask=a);a=N[0];l=N[1];k=N[2];f=N[3];if(a!==P[0]||l!==P[1]||k!==P[2]||f!==P[3])D.colorMask(a,l,k,f),P[0]=a,P[1]=l,P[2]=k,P[3]=f;a=t.cull_enable;a!==A.cull_enable&&(a?D.enable(2884):D.disable(2884),A.cull_enable=
a);a=t.cull_face;a!==A.cull_face&&(D.cullFace(a),A.cull_face=a);a=t.frontFace;a!==A.frontFace&&(D.frontFace(a),A.frontFace=a);a=t.lineWidth;a!==A.lineWidth&&(D.lineWidth(a),A.lineWidth=a);a=t.polygonOffset_enable;a!==A.polygonOffset_enable&&(a?D.enable(32823):D.disable(32823),A.polygonOffset_enable=a);a=pa[0];l=pa[1];if(a!==J[0]||l!==J[1])D.polygonOffset(a,l),J[0]=a,J[1]=l;a=t.sample_alpha;a!==A.sample_alpha&&(a?D.enable(32926):D.disable(32926),A.sample_alpha=a);a=t.sample_enable;a!==A.sample_enable&&
(a?D.enable(32928):D.disable(32928),A.sample_enable=a);a=K[0];l=K[1];if(a!==ba[0]||l!==ba[1])D.sampleCoverage(a,l),ba[0]=a,ba[1]=l;a=t.stencil_enable;a!==A.stencil_enable&&(a?D.enable(2960):D.disable(2960),A.stencil_enable=a);a=t.stencil_mask;a!==A.stencil_mask&&(D.stencilMask(a),A.stencil_mask=a);a=ha[0];l=ha[1];k=ha[2];if(a!==Ba[0]||l!==Ba[1]||k!==Ba[2])D.stencilFunc(a,l,k),Ba[0]=a,Ba[1]=l,Ba[2]=k;a=xa[0];l=xa[1];k=xa[2];f=xa[3];if(a!==ka[0]||l!==ka[1]||k!==ka[2]||f!==ka[3])D.stencilOpSeparate(a,
l,k,f),ka[0]=a,ka[1]=l,ka[2]=k,ka[3]=f;a=wa[0];l=wa[1];k=wa[2];f=wa[3];if(a!==da[0]||l!==da[1]||k!==da[2]||f!==da[3])D.stencilOpSeparate(a,l,k,f),da[0]=a,da[1]=l,da[2]=k,da[3]=f;a=t.scissor_enable;a!==A.scissor_enable&&(a?D.enable(3089):D.disable(3089),A.scissor_enable=a);a=W[0];l=W[1];k=W[2];f=W[3];if(a!==la[0]||l!==la[1]||k!==la[2]||f!==la[3])D.scissor(a,l,k,f),la[0]=a,la[1]=l,la[2]=k,la[3]=f;a=oa[0];l=oa[1];k=oa[2];f=oa[3];if(a!==Aa[0]||l!==Aa[1]||k!==Aa[2]||f!==Aa[3])D.viewport(a,l,k,f),Aa[0]=
a,Aa[1]=l,Aa[2]=k,Aa[3]=f;A.dirty=!1}if(a=A.profile)b=performance.now(),u.count+=e;D.useProgram(n.program);ma.setVAO(null);l=v.location;k=aa[l];k.buffer||D.enableVertexAttribArray(l);if(k.type!==m.dtype||2!==k.size||k.buffer!==m||!1!==k.normalized||0!==k.offset||0!==k.stride)D.bindBuffer(34962,m.buffer),D.vertexAttribPointer(l,2,m.dtype,!1,0,0),k.type=m.dtype,k.size=2,k.buffer=m,k.normalized=!1,k.offset=0,k.stride=0;l=p.call(this,E,void 0,g);ga(l)&&2===l.length||d.commandRaise(w,h);D.uniform2f(x.location,
l[0],l[1]);g=y.call(this,E,void 0,g);"number"!==typeof g&&d.commandRaise(C,h);D.uniform1f(G.location,g);D.uniform1i(I.location,r.bind());(l=ca.elements)?D.bindBuffer(34963,l.buffer.buffer):ma.currentVAO&&(l=H.getElements(ma.currentVAO.elements))&&D.bindBuffer(34963,l.buffer.buffer);k=ca.primitive;f=ca.offset;for(g=0;g<e;++g)l?D.drawElements(k,3,l.type,f<<(l.type-5121>>1)):D.drawArrays(k,f,3);r.unbind();ma.setVAO(null);a&&(u.cpuTime+=performance.now()-b)}}}}},{}],25:[function(h,r,G){var a=h("./sorted-object-keys");
r.exports=function(d,h){for(var u=a(h),q=0;q<u.length;++q)d[u[q]]=h[u[q]];return d}},{"./sorted-object-keys":34}],26:[function(h,r,G){function a(a,d,m,b,f,c){for(var k=0;k<d;++k)for(var h=a[k],B=0;B<m;++B)for(var e=h[B],l=0;l<b;++l)f[c++]=e[l]}function d(h,q,m,b,f){for(var c=1,k=m+1;k<q.length;++k)c*=q[k];var z=q[m];if(4===q.length-m){var B=q[m+1],e=q[m+2];q=q[m+3];for(k=0;k<z;++k)a(h[k],B,e,q,b,f),f+=c}else for(k=0;k<z;++k)d(h[k],q,m+1,b,f),f+=c}var T=h("./pool");r.exports={shape:function(a){for(var d=
[];a.length;a=a[0])d.push(a.length);return d},flatten:function(h,q,m,b){var f=1;if(q.length)for(var c=0;c<q.length;++c)f*=q[c];else f=0;m=b||T.allocType(m,f);switch(q.length){case 0:break;case 1:b=q[0];for(q=0;q<b;++q)m[q]=h[q];break;case 2:b=q[0];q=q[1];for(c=f=0;c<b;++c)for(var k=h[c],z=0;z<q;++z)m[f++]=k[z];break;case 3:a(h,q[0],q[1],q[2],m,0);break;default:d(h,q,0,m,0)}return m}}},{"./pool":32}],27:[function(h,r,G){var a=h("./is-typed-array");r.exports=function(d){return Array.isArray(d)||a(d)}},
{"./is-typed-array":30}],28:[function(h,r,G){var a=h("./is-typed-array");r.exports=function(d){return!!d&&"object"===typeof d&&Array.isArray(d.shape)&&Array.isArray(d.stride)&&"number"===typeof d.offset&&d.shape.length===d.stride.length&&(Array.isArray(d.data)||a(d.data))}},{"./is-typed-array":30}],29:[function(h,r,G){r.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(h,r,G){r.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof
Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(h,r,G){r.exports=function(a,d){for(var h=Array(a),u=0;u<a;++u)h[u]=d(u);return h}},{}],32:[function(h,r,G){function a(a){var d,m;d=(65535<a)<<4;a>>>=d;m=(255<a)<<3;a>>>=m;d|=m;m=(15<a)<<2;a>>>=m;d|=m;m=(3<a)<<1;return d|m|a>>>m>>1}function d(){function d(b){a:{for(var f=16;268435456>=f;f*=16)if(b<=f){b=f;break a}b=0}f=m[a(b)>>2];return 0<
f.length?f.pop():new ArrayBuffer(b)}function h(b){m[a(b.byteLength)>>2].push(b)}var m=T(8,function(){return[]});return{alloc:d,free:h,allocType:function(a,f){var c=null;switch(a){case 5120:c=new Int8Array(d(f),0,f);break;case 5121:c=new Uint8Array(d(f),0,f);break;case 5122:c=new Int16Array(d(2*f),0,f);break;case 5123:c=new Uint16Array(d(2*f),0,f);break;case 5124:c=new Int32Array(d(4*f),0,f);break;case 5125:c=new Uint32Array(d(4*f),0,f);break;case 5126:c=new Float32Array(d(4*f),0,f);break;default:return null}return c.length!==
f?c.subarray(0,f):c},freeType:function(a){h(a.buffer)}}}var T=h("./loop");h=d();h.zero=d();r.exports=h},{"./loop":31}],33:[function(h,r,G){r.exports={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(h,r,G){r.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(h,r,G){var a=h("./pool"),
d=new Float32Array(1),T=new Uint32Array(d.buffer);r.exports=function(h){for(var q=a.allocType(5123,h.length),m=0;m<h.length;++m)if(isNaN(h[m]))q[m]=65535;else if(Infinity===h[m])q[m]=31744;else if(-Infinity===h[m])q[m]=64512;else{d[0]=h[m];var b=T[0],f=b>>>31<<15,c=(b<<1>>>24)-127,b=b>>13&1023;q[m]=-24>c?f:-14>c?f+(b+1024>>-14-c):15<c?f+31744:f+(c+15<<10)+b}return q}},{"./pool":32}],36:[function(h,r,G){var a=h("./sorted-object-keys");r.exports=function(d){return a(d).map(function(a){return d[a]})}},
{"./sorted-object-keys":34}],37:[function(h,r,G){function a(a,f,c){function k(){var e=window.innerWidth,l=window.innerHeight;a!==document.body&&(l=d.getBoundingClientRect(),e=l.right-l.left,l=l.bottom-l.top);d.width=c*e;d.height=c*l}var d=document.createElement("canvas");m(d.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(d);a===document.body&&(d.style.position="absolute",m(a.style,{margin:0,padding:0}));var h;a!==document.body&&"function"===typeof ResizeObserver?
(h=new ResizeObserver(function(){setTimeout(k)}),h.observe(a)):window.addEventListener("resize",k,!1);k();return{canvas:d,onDestroy:function(){h?h.disconnect():window.removeEventListener("resize",k);a.removeChild(d)}}}function d(a,d){function c(c){try{return a.getContext(c,d)}catch(h){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function T(a){if("string"===typeof a)return a.split();q(Array.isArray(a),"invalid extension array");return a}function u(a){return"string"===
typeof a?(q("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var q=h("./util/check"),m=h("./util/extend");r.exports=function(b){var f=b||{},c,k,h,m;b={};var e=[],l=[],g="undefined"===typeof window?1:window.devicePixelRatio,n=!1,p=function(c){c&&q.raise(c)},w=function(){};"string"===typeof f?(q("undefined"!==typeof document,"selector queries only supported in DOM environments"),c=document.querySelector(f),q(c,"invalid query string for element")):"object"===
typeof f?"string"===typeof f.nodeName&&"function"===typeof f.appendChild&&"function"===typeof f.getBoundingClientRect?c=f:"function"===typeof f.drawArrays||"function"===typeof f.drawElements?(m=f,h=m.canvas):(q.constructor(f),"gl"in f?m=f.gl:"canvas"in f?h=u(f.canvas):"container"in f&&(k=u(f.container)),"attributes"in f&&(b=f.attributes,q.type(b,"object","invalid context attributes")),"extensions"in f&&(e=T(f.extensions)),"optionalExtensions"in f&&(l=T(f.optionalExtensions)),"onDone"in f&&(q.type(f.onDone,
"function","invalid or missing onDone callback"),p=f.onDone),"profile"in f&&(n=!!f.profile),"pixelRatio"in f&&(g=+f.pixelRatio,q(0<g,"invalid pixel ratio"))):q.raise("invalid arguments to regl");c&&("canvas"===c.nodeName.toLowerCase()?h=c:k=c);if(!m){if(!h){q("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");c=a(k||document.body,p,g);if(!c)return null;h=c.canvas;w=c.onDestroy}void 0===b.premultipliedAlpha&&(b.premultipliedAlpha=!0);m=d(h,b)}return m?
{gl:m,canvas:h,container:k,extensions:e,optionalExtensions:l,pixelRatio:g,profile:n,onDone:p,onDestroy:w}:(w(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(h,r,G){var a=h("element-size");r.exports=function(h,u,q){function m(){var f=m.parent||h.parentNode;if("function"===typeof f)var c=f(d)||d,f=c[0],c=c[1];else f&&f!==document.body?(c=a(f),f=c[0]|0,c=c[1]|0):(f=window.innerWidth,c=window.innerHeight);
b?(h.setAttribute("width",f*m.scale+"px"),h.setAttribute("height",c*m.scale+"px")):(h.width=f*m.scale,h.height=c*m.scale);h.style.width=f+"px";h.style.height=c+"px";return m}var b="SVG"===h.nodeName.toUpperCase();h.style.position=h.style.position||"absolute";h.style.top=0;h.style.left=0;m.scale=parseFloat(q||1);m.parent=u;return m()};var d=new Float32Array(2)},{"element-size":42}],39:[function(h,r,G){var a=h("orbit-camera"),d=h("scroll-speed"),T=h("mouse-position"),u=h("mouse-pressed"),q=h("key-pressed");
r.exports=function(h,b){b=b||{};b.pan=!1!==b.pan;b.scale=!1!==b.scale;b.rotate=!1!==b.rotate;var f=d(h,b.scale),c=u(h,b.rotate),k=T(h),z=a([0,10,30],[0,0,0],[0,1,0]);z.tick=function(){var a=q("<control>")||q("<alt>"),e=q("<shift>"),l=h.height,g=h.width;b.rotate&&c.left&&!a&&!e&&z.rotate([k.x/g-.5,k.y/l-.5],[k.prevX/g-.5,k.prevY/l-.5]);(b.pan&&c.right||c.left&&a&&!e)&&z.pan([1*(k.x-k.prevX)/g,1*(k.y-k.prevY)/l]);b.scale&&f[1]&&(z.distance*=Math.exp(f[1]/l));if(b.scale&&(c.middle||c.left&&!a&&e)){a=
k.y-k.prevY;if(!a)return;z.distance*=Math.exp(a/l)}f.flush();k.flush()};return z}},{"key-pressed":75,"mouse-position":40,"mouse-pressed":41,"orbit-camera":76,"scroll-speed":78}],40:[function(h,r,G){var a=h("events/");r.exports=function(d,h){var u=new a;u.x=0;u.y=0;u.prevX=0;u.prevY=0;u.flush=function(){this.prevX=this.x;this.prevY=this.y};if("undefined"===typeof window)return u;h=h||d||window;d=d||document.body;h.addEventListener("mousemove",d===document.body||d===window?function(a){u.prevX=u.x;u.prevY=
u.y;u.x=a.clientX;u.y=a.clientY;u.emit("move",a)}:function(a){u.prevX=u.x;u.prevY=u.y;var h=d.getBoundingClientRect();u.x=a.clientX-h.left;u.y=a.clientY-h.top;u.emit("move",a)},!1);return u}},{"events/":43}],41:[function(h,r,G){var a=h("events/"),d=["left","middle","right"];r.exports=function(h,u){function q(a){b.right=!1;b[d[a.button]]=!0;b.emit("down",a);if(u){if(!a.preventDefault)return!1;a.preventDefault();a.stopPropagation()}}function m(a){b.right=!1;b[d[a.button]]=!1;b.emit("up",a);u&&a.preventDefault&&
(a.preventDefault(),a.stopPropagation())}var b=new a;b.left=!1;b.right=!1;b.middle=!1;"undefined"!==typeof window&&(h=h||window,h.addEventListener("mousedown",q,!1),h.addEventListener("mouseup",m,!1),u&&h.addEventListener("contextmenu",function(a){return a.preventDefault&&a.preventDefault()&&!1},!1));return b}},{"events/":43}],42:[function(h,r,G){function a(a){return parseFloat(a)||0}r.exports=function(d){if(d===window||d===document.body)return[window.innerWidth,window.innerHeight];if(!d.parentNode){var h=
!0;document.body.appendChild(d)}var u=d.getBoundingClientRect(),q=getComputedStyle(d),m=(u.height|0)+a(q.getPropertyValue("margin-top"))+a(q.getPropertyValue("margin-bottom")),u=(u.width|0)+a(q.getPropertyValue("margin-left"))+a(q.getPropertyValue("margin-right"));h&&document.body.removeChild(d);return[u,m]}},{}],43:[function(h,r,G){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function d(a){return"function"===typeof a}function T(a){return"object"===typeof a&&
null!==a}r.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var h,m,b,f;this._events||(this._events={});if("error"===a&&(!this._events.error||T(this._events.error)&&!this._events.error.length)){h=arguments[1];if(h instanceof Error)throw h;m=Error('Uncaught, unspecified "error" event. ('+
h+")");m.context=h;throw m;}m=this._events[a];if(void 0===m)return!1;if(d(m))switch(arguments.length){case 1:m.call(this);break;case 2:m.call(this,arguments[1]);break;case 3:m.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),m.apply(this,h)}else if(T(m))for(h=Array.prototype.slice.call(arguments,1),f=m.slice(),m=f.length,b=0;b<m;b++)f[b].apply(this,h);return!0};a.prototype.addListener=function(h,q){var m;if(!d(q))throw TypeError("listener must be a function");
this._events||(this._events={});this._events.newListener&&this.emit("newListener",h,d(q.listener)?q.listener:q);this._events[h]?T(this._events[h])?this._events[h].push(q):this._events[h]=[this._events[h],q]:this._events[h]=q;T(this._events[h])&&!this._events[h].warned&&(m=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<m&&this._events[h].length>m&&(this._events[h].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",
this._events[h].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,h){function m(){this.removeListener(a,m);b||(b=!0,h.apply(this,arguments))}if(!d(h))throw TypeError("listener must be a function");var b=!1;m.listener=h;this.on(a,m);return this};a.prototype.removeListener=function(a,h){var m,b,f;if(!d(h))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;m=this._events[a];
f=m.length;b=-1;if(m===h||d(m.listener)&&m.listener===h)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,h);else if(T(m)){for(;0<f--;)if(m[f]===h||m[f].listener&&m[f].listener===h){b=f;break}if(0>b)return this;1===m.length?(m.length=0,delete this._events[a]):m.splice(b,1);this._events.removeListener&&this.emit("removeListener",a,h)}return this};a.prototype.removeAllListeners=function(a){var h;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?
this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(h in this._events)"removeListener"!==h&&this.removeAllListeners(h);this.removeAllListeners("removeListener");this._events={};return this}h=this._events[a];if(d(h))this.removeListener(a,h);else if(h)for(;h.length;)this.removeListener(a,h[h.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():
[]};a.prototype.listenerCount=function(a){if(this._events){a=this._events[a];if(d(a))return 1;if(a)return a.length}return 0};a.listenerCount=function(a,d){return a.listenerCount(d)}},{}],44:[function(h,r,G){r.exports=function(a,d){var h=d[0],u=d[1],q=d[2],m=d[3],b=d[4],f=d[5],c=d[6],k=d[7],z=d[8],B=d[9],e=d[10],l=d[11],g=d[12],n=d[13],p=d[14],w=d[15];a[0]=f*(e*w-l*p)-B*(c*w-k*p)+n*(c*l-k*e);a[1]=-(u*(e*w-l*p)-B*(q*w-m*p)+n*(q*l-m*e));a[2]=u*(c*w-k*p)-f*(q*w-m*p)+n*(q*k-m*c);a[3]=-(u*(c*l-k*e)-f*(q*
l-m*e)+B*(q*k-m*c));a[4]=-(b*(e*w-l*p)-z*(c*w-k*p)+g*(c*l-k*e));a[5]=h*(e*w-l*p)-z*(q*w-m*p)+g*(q*l-m*e);a[6]=-(h*(c*w-k*p)-b*(q*w-m*p)+g*(q*k-m*c));a[7]=h*(c*l-k*e)-b*(q*l-m*e)+z*(q*k-m*c);a[8]=b*(B*w-l*n)-z*(f*w-k*n)+g*(f*l-k*B);a[9]=-(h*(B*w-l*n)-z*(u*w-m*n)+g*(u*l-m*B));a[10]=h*(f*w-k*n)-b*(u*w-m*n)+g*(u*k-m*f);a[11]=-(h*(f*l-k*B)-b*(u*l-m*B)+z*(u*k-m*f));a[12]=-(b*(B*p-e*n)-z*(f*p-c*n)+g*(f*e-c*B));a[13]=h*(B*p-e*n)-z*(u*p-q*n)+g*(u*e-q*B);a[14]=-(h*(f*p-c*n)-b*(u*p-q*n)+g*(u*c-q*f));a[15]=h*
(f*e-c*B)-b*(u*e-q*B)+z*(u*c-q*f);return a}},{}],45:[function(h,r,G){r.exports=function(a){var d=new Float32Array(16);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d}},{}],46:[function(h,r,G){r.exports=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=
d[14];a[15]=d[15];return a}},{}],47:[function(h,r,G){r.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],48:[function(h,r,G){r.exports=function(a){var d=a[0],h=a[1],u=a[2],q=a[3],m=a[4],b=a[5],f=a[6],c=a[7],k=a[8],z=a[9],B=a[10],e=a[11],l=a[12],g=a[13],n=a[14];a=a[15];return(d*b-h*m)*(B*a-e*n)-(d*f-u*m)*(z*a-e*g)+(d*c-q*m)*(z*n-B*g)+(h*f-u*b)*(k*a-e*l)-(h*c-q*b)*(k*n-B*
l)+(u*c-q*f)*(k*g-z*l)}},{}],49:[function(h,r,G){r.exports=function(a,d){var h=d[0],u=d[1],q=d[2],m=d[3],b=h+h,f=u+u,c=q+q,h=h*b,k=u*b,u=u*f,z=q*b,B=q*f,q=q*c,b=m*b,f=m*f,m=m*c;a[0]=1-u-q;a[1]=k+m;a[2]=z-f;a[3]=0;a[4]=k-m;a[5]=1-h-q;a[6]=B+b;a[7]=0;a[8]=z+f;a[9]=B-b;a[10]=1-h-u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],50:[function(h,r,G){r.exports=function(a,d,h){var u,q,m=h[0],b=h[1];h=h[2];u=Math.sqrt(m*m+b*b+h*h);if(1E-6>Math.abs(u))return null;u=1/u;m*=u;b*=u;h*=u;u=Math.sin(d);
d=Math.cos(d);q=1-d;a[0]=m*m*q+d;a[1]=b*m*q+h*u;a[2]=h*m*q-b*u;a[3]=0;a[4]=m*b*q-h*u;a[5]=b*b*q+d;a[6]=h*b*q+m*u;a[7]=0;a[8]=m*h*q+b*u;a[9]=b*h*q-m*u;a[10]=h*h*q+d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],51:[function(h,r,G){r.exports=function(a,d,h){var u=d[0],q=d[1],m=d[2],b=d[3],f=u+u,c=q+q,k=m+m;d=u*f;var z=u*c,u=u*k,B=q*c,q=q*k,m=m*k,f=b*f,c=b*c,b=b*k;a[0]=1-(B+m);a[1]=z+b;a[2]=u-c;a[3]=0;a[4]=z-b;a[5]=1-(d+m);a[6]=q+f;a[7]=0;a[8]=u+c;a[9]=q-f;a[10]=1-(d+B);a[11]=0;a[12]=h[0];a[13]=
h[1];a[14]=h[2];a[15]=1;return a}},{}],52:[function(h,r,G){r.exports=function(a,d){a[0]=d[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],53:[function(h,r,G){r.exports=function(a,d){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a}},{}],54:[function(h,r,G){r.exports=function(a,d){var h=Math.sin(d),u=Math.cos(d);a[0]=1;a[1]=0;
a[2]=0;a[3]=0;a[4]=0;a[5]=u;a[6]=h;a[7]=0;a[8]=0;a[9]=-h;a[10]=u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],55:[function(h,r,G){r.exports=function(a,d){var h=Math.sin(d),u=Math.cos(d);a[0]=u;a[1]=0;a[2]=-h;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=h;a[9]=0;a[10]=u;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],56:[function(h,r,G){r.exports=function(a,d){var h=Math.sin(d),u=Math.cos(d);a[0]=u;a[1]=h;a[2]=0;a[3]=0;a[4]=-h;a[5]=u;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;
a[13]=0;a[14]=0;a[15]=1;return a}},{}],57:[function(h,r,G){r.exports=function(a,d,h,u,q,m,b){var f=1/(h-d),c=1/(q-u),k=1/(m-b);a[0]=2*m*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*m*c;a[6]=0;a[7]=0;a[8]=(h+d)*f;a[9]=(q+u)*c;a[10]=(b+m)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=b*m*2*k;a[15]=0;return a}},{}],58:[function(h,r,G){r.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],59:[function(h,r,G){r.exports={create:h("./create"),
clone:h("./clone"),copy:h("./copy"),identity:h("./identity"),transpose:h("./transpose"),invert:h("./invert"),adjoint:h("./adjoint"),determinant:h("./determinant"),multiply:h("./multiply"),translate:h("./translate"),scale:h("./scale"),rotate:h("./rotate"),rotateX:h("./rotateX"),rotateY:h("./rotateY"),rotateZ:h("./rotateZ"),fromRotation:h("./fromRotation"),fromRotationTranslation:h("./fromRotationTranslation"),fromScaling:h("./fromScaling"),fromTranslation:h("./fromTranslation"),fromXRotation:h("./fromXRotation"),
fromYRotation:h("./fromYRotation"),fromZRotation:h("./fromZRotation"),fromQuat:h("./fromQuat"),frustum:h("./frustum"),perspective:h("./perspective"),perspectiveFromFieldOfView:h("./perspectiveFromFieldOfView"),ortho:h("./ortho"),lookAt:h("./lookAt"),str:h("./str")}},{"./adjoint":44,"./clone":45,"./copy":46,"./create":47,"./determinant":48,"./fromQuat":49,"./fromRotation":50,"./fromRotationTranslation":51,"./fromScaling":52,"./fromTranslation":53,"./fromXRotation":54,"./fromYRotation":55,"./fromZRotation":56,
"./frustum":57,"./identity":58,"./invert":60,"./lookAt":61,"./multiply":62,"./ortho":63,"./perspective":64,"./perspectiveFromFieldOfView":65,"./rotate":66,"./rotateX":67,"./rotateY":68,"./rotateZ":69,"./scale":70,"./str":71,"./translate":72,"./transpose":73}],60:[function(h,r,G){r.exports=function(a,d){var h=d[0],u=d[1],q=d[2],m=d[3],b=d[4],f=d[5],c=d[6],k=d[7],z=d[8],B=d[9],e=d[10],l=d[11],g=d[12],n=d[13],p=d[14],w=d[15],y=h*f-u*b,C=h*c-q*b,r=h*k-m*b,x=u*c-q*f,v=u*k-m*f,G=q*k-m*c,I=z*n-B*g,aa=z*
p-e*g,E=z*w-l*g,A=B*p-e*n,ca=B*w-l*n,H=e*w-l*p,F=y*H-C*ca+r*A+x*E-v*aa+G*I;if(!F)return null;F=1/F;a[0]=(f*H-c*ca+k*A)*F;a[1]=(q*ca-u*H-m*A)*F;a[2]=(n*G-p*v+w*x)*F;a[3]=(e*v-B*G-l*x)*F;a[4]=(c*E-b*H-k*aa)*F;a[5]=(h*H-q*E+m*aa)*F;a[6]=(p*r-g*G-w*C)*F;a[7]=(z*G-e*r+l*C)*F;a[8]=(b*ca-f*E+k*I)*F;a[9]=(u*E-h*ca-m*I)*F;a[10]=(g*v-n*r+w*y)*F;a[11]=(B*r-z*v-l*y)*F;a[12]=(f*aa-b*A-c*I)*F;a[13]=(h*A-u*aa+q*I)*F;a[14]=(n*C-g*x-p*y)*F;a[15]=(z*x-B*C+e*y)*F;return a}},{}],61:[function(h,r,G){var a=h("./identity");
r.exports=function(d,h,u,q){var m,b,f,c,k,z,B,e,l=h[0],g=h[1];h=h[2];f=q[0];c=q[1];b=q[2];B=u[0];q=u[1];m=u[2];if(1E-6>Math.abs(l-B)&&1E-6>Math.abs(g-q)&&1E-6>Math.abs(h-m))return a(d);u=l-B;q=g-q;B=h-m;e=1/Math.sqrt(u*u+q*q+B*B);u*=e;q*=e;B*=e;m=c*B-b*q;b=b*u-f*B;f=f*q-c*u;(e=Math.sqrt(m*m+b*b+f*f))?(e=1/e,m*=e,b*=e,f*=e):f=b=m=0;c=q*f-B*b;k=B*m-u*f;z=u*b-q*m;(e=Math.sqrt(c*c+k*k+z*z))?(e=1/e,c*=e,k*=e,z*=e):z=k=c=0;d[0]=m;d[1]=c;d[2]=u;d[3]=0;d[4]=b;d[5]=k;d[6]=q;d[7]=0;d[8]=f;d[9]=z;d[10]=B;d[11]=
0;d[12]=-(m*l+b*g+f*h);d[13]=-(c*l+k*g+z*h);d[14]=-(u*l+q*g+B*h);d[15]=1;return d}},{"./identity":58}],62:[function(h,r,G){r.exports=function(a,d,h){var u=d[0],q=d[1],m=d[2],b=d[3],f=d[4],c=d[5],k=d[6],z=d[7],B=d[8],e=d[9],l=d[10],g=d[11],n=d[12],p=d[13],w=d[14];d=d[15];var y=h[0],C=h[1],r=h[2],x=h[3];a[0]=y*u+C*f+r*B+x*n;a[1]=y*q+C*c+r*e+x*p;a[2]=y*m+C*k+r*l+x*w;a[3]=y*b+C*z+r*g+x*d;y=h[4];C=h[5];r=h[6];x=h[7];a[4]=y*u+C*f+r*B+x*n;a[5]=y*q+C*c+r*e+x*p;a[6]=y*m+C*k+r*l+x*w;a[7]=y*b+C*z+r*g+x*d;y=
h[8];C=h[9];r=h[10];x=h[11];a[8]=y*u+C*f+r*B+x*n;a[9]=y*q+C*c+r*e+x*p;a[10]=y*m+C*k+r*l+x*w;a[11]=y*b+C*z+r*g+x*d;y=h[12];C=h[13];r=h[14];x=h[15];a[12]=y*u+C*f+r*B+x*n;a[13]=y*q+C*c+r*e+x*p;a[14]=y*m+C*k+r*l+x*w;a[15]=y*b+C*z+r*g+x*d;return a}},{}],63:[function(h,r,G){r.exports=function(a,d,h,u,q,m,b){var f=1/(d-h),c=1/(u-q),k=1/(m-b);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*k;a[11]=0;a[12]=(d+h)*f;a[13]=(q+u)*c;a[14]=(b+m)*k;a[15]=1;return a}},{}],64:[function(h,
r,G){r.exports=function(a,d,h,u,q){d=1/Math.tan(d/2);var m=1/(u-q);a[0]=d/h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(q+u)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*q*u*m;a[15]=0;return a}},{}],65:[function(h,r,G){r.exports=function(a,d,h,u){var q=Math.tan(d.upDegrees*Math.PI/180),m=Math.tan(d.downDegrees*Math.PI/180),b=Math.tan(d.leftDegrees*Math.PI/180);d=Math.tan(d.rightDegrees*Math.PI/180);var f=2/(b+d),c=2/(q+m);a[0]=f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=
-((b-d)*f*.5);a[9]=(q-m)*c*.5;a[10]=u/(h-u);a[11]=-1;a[12]=0;a[13]=0;a[14]=u*h/(h-u);a[15]=0;return a}},{}],66:[function(h,r,G){r.exports=function(a,d,h,u){var q=u[0],m=u[1];u=u[2];var b=Math.sqrt(q*q+m*m+u*u),f,c,k,z,B,e,l,g,n,p,w,y,C,r,x,v,G,I,aa,E;if(1E-6>Math.abs(b))return null;b=1/b;q*=b;m*=b;u*=b;f=Math.sin(h);c=Math.cos(h);k=1-c;h=d[0];b=d[1];z=d[2];B=d[3];e=d[4];l=d[5];g=d[6];n=d[7];p=d[8];w=d[9];y=d[10];C=d[11];r=q*q*k+c;x=m*q*k+u*f;v=u*q*k-m*f;G=q*m*k-u*f;I=m*m*k+c;aa=u*m*k+q*f;E=q*u*k+
m*f;q=m*u*k-q*f;m=u*u*k+c;a[0]=h*r+e*x+p*v;a[1]=b*r+l*x+w*v;a[2]=z*r+g*x+y*v;a[3]=B*r+n*x+C*v;a[4]=h*G+e*I+p*aa;a[5]=b*G+l*I+w*aa;a[6]=z*G+g*I+y*aa;a[7]=B*G+n*I+C*aa;a[8]=h*E+e*q+p*m;a[9]=b*E+l*q+w*m;a[10]=z*E+g*q+y*m;a[11]=B*E+n*q+C*m;d!==a&&(a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a}},{}],67:[function(h,r,G){r.exports=function(a,d,h){var u=Math.sin(h);h=Math.cos(h);var q=d[4],m=d[5],b=d[6],f=d[7],c=d[8],k=d[9],z=d[10],B=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=
d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[4]=q*h+c*u;a[5]=m*h+k*u;a[6]=b*h+z*u;a[7]=f*h+B*u;a[8]=c*h-q*u;a[9]=k*h-m*u;a[10]=z*h-b*u;a[11]=B*h-f*u;return a}},{}],68:[function(h,r,G){r.exports=function(a,d,h){var u=Math.sin(h);h=Math.cos(h);var q=d[0],m=d[1],b=d[2],f=d[3],c=d[8],k=d[9],z=d[10],B=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=q*h-c*u;a[1]=m*h-k*u;a[2]=b*h-z*u;a[3]=f*h-B*u;a[8]=q*u+c*h;a[9]=m*u+k*h;a[10]=b*u+z*h;a[11]=f*
u+B*h;return a}},{}],69:[function(h,r,G){r.exports=function(a,d,h){var u=Math.sin(h);h=Math.cos(h);var q=d[0],m=d[1],b=d[2],f=d[3],c=d[4],k=d[5],z=d[6],B=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=q*h+c*u;a[1]=m*h+k*u;a[2]=b*h+z*u;a[3]=f*h+B*u;a[4]=c*h-q*u;a[5]=k*h-m*u;a[6]=z*h-b*u;a[7]=B*h-f*u;return a}},{}],70:[function(h,r,G){r.exports=function(a,d,h){var u=h[0],q=h[1];h=h[2];a[0]=d[0]*u;a[1]=d[1]*u;a[2]=d[2]*u;a[3]=d[3]*u;a[4]=
d[4]*q;a[5]=d[5]*q;a[6]=d[6]*q;a[7]=d[7]*q;a[8]=d[8]*h;a[9]=d[9]*h;a[10]=d[10]*h;a[11]=d[11]*h;a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a}},{}],71:[function(h,r,G){r.exports=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}},{}],72:[function(h,r,G){r.exports=function(a,d,h){var u=h[0],q=h[1];h=h[2];var m,b,f,c,k,z,B,e,l,g,n,p;d===a?(a[12]=d[0]*
u+d[4]*q+d[8]*h+d[12],a[13]=d[1]*u+d[5]*q+d[9]*h+d[13],a[14]=d[2]*u+d[6]*q+d[10]*h+d[14],a[15]=d[3]*u+d[7]*q+d[11]*h+d[15]):(m=d[0],b=d[1],f=d[2],c=d[3],k=d[4],z=d[5],B=d[6],e=d[7],l=d[8],g=d[9],n=d[10],p=d[11],a[0]=m,a[1]=b,a[2]=f,a[3]=c,a[4]=k,a[5]=z,a[6]=B,a[7]=e,a[8]=l,a[9]=g,a[10]=n,a[11]=p,a[12]=m*u+k*q+l*h+d[12],a[13]=b*u+z*q+g*h+d[13],a[14]=f*u+B*q+n*h+d[14],a[15]=c*u+e*q+p*h+d[15]);return a}},{}],73:[function(h,r,G){r.exports=function(a,d){if(a===d){var h=d[1],u=d[2],q=d[3],m=d[6],b=d[7],
f=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=h;a[6]=d[9];a[7]=d[13];a[8]=u;a[9]=m;a[11]=d[14];a[12]=q;a[13]=b;a[14]=f}else a[0]=d[0],a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a}},{}],74:[function(h,r,G){!function(a,d){if("object"==typeof G&&"object"==typeof r)r.exports=d();else if("function"==typeof define&&define.amd)define([],d);else{var h=d(),u;for(u in h)("object"==typeof G?
G:a)[u]=h[u]}}("undefined"!=typeof self?self:this,function(){return function(a){function d(u){if(h[u])return h[u].exports;var q=h[u]={i:u,l:!1,exports:{}};return a[u].call(q.exports,q,q.exports,d),q.l=!0,q.exports}var h={};return d.m=a,d.c=h,d.d=function(a,h,m){d.o(a,h)||Object.defineProperty(a,h,{enumerable:!0,get:m})},d.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,h){if((1&h&&(a=d(a)),8&h)||4&h&&"object"==typeof a&&a&&a.__esModule)return a;var m=Object.create(null);if(d.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:a}),2&h&&"string"!=typeof a)for(var b in a)d.d(m,b,function(b){return a[b]}.bind(null,b));return m},d.n=function(a){var h=a&&a.__esModule?function(){return a["default"]}:function(){return a};return d.d(h,"a",h),h},d.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,
d)},d.p="",d(d.s=10)}([function(a,d,h){Object.defineProperty(d,"__esModule",{value:!0});d.setMatrixArrayType=function(a){d.ARRAY_TYPE=a};d.toRadian=function(a){return a*q};d.equals=function(a,b){return Math.abs(a-b)<=r*Math.max(1,Math.abs(a),Math.abs(b))};var r=d.EPSILON=1E-6;d.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;d.RANDOM=Math.random;var q=Math.PI/180},function(a,d,h){function r(){var a=new B.ARRAY_TYPE(4);return B.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0),
a}function q(a,c,b){return a[0]=c[0]-b[0],a[1]=c[1]-b[1],a[2]=c[2]-b[2],a[3]=c[3]-b[3],a}function m(a,c,b){return a[0]=c[0]*b[0],a[1]=c[1]*b[1],a[2]=c[2]*b[2],a[3]=c[3]*b[3],a}function b(a,c,b){return a[0]=c[0]/b[0],a[1]=c[1]/b[1],a[2]=c[2]/b[2],a[3]=c[3]/b[3],a}function f(a,c){var b=c[0]-a[0],k=c[1]-a[1],d=c[2]-a[2],f=c[3]-a[3];return Math.sqrt(b*b+k*k+d*d+f*f)}function c(a,c){var b=c[0]-a[0],k=c[1]-a[1],d=c[2]-a[2],f=c[3]-a[3];return b*b+k*k+d*d+f*f}function k(a){var c=a[0],b=a[1],k=a[2];a=a[3];
return Math.sqrt(c*c+b*b+k*k+a*a)}function z(a){var c=a[0],b=a[1],k=a[2];a=a[3];return c*c+b*b+k*k+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(a){var c=new B.ARRAY_TYPE(4);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c};d.fromValues=function(a,c,b,k){var d=new B.ARRAY_TYPE(4);return d[0]=a,d[1]=c,d[2]=b,d[3]=k,d};d.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a};d.set=function(a,
c,b,k,d){return a[0]=c,a[1]=b,a[2]=k,a[3]=d,a};d.add=function(a,c,b){return a[0]=c[0]+b[0],a[1]=c[1]+b[1],a[2]=c[2]+b[2],a[3]=c[3]+b[3],a};d.subtract=q;d.multiply=m;d.divide=b;d.ceil=function(a,c){return a[0]=Math.ceil(c[0]),a[1]=Math.ceil(c[1]),a[2]=Math.ceil(c[2]),a[3]=Math.ceil(c[3]),a};d.floor=function(a,c){return a[0]=Math.floor(c[0]),a[1]=Math.floor(c[1]),a[2]=Math.floor(c[2]),a[3]=Math.floor(c[3]),a};d.min=function(a,c,b){return a[0]=Math.min(c[0],b[0]),a[1]=Math.min(c[1],b[1]),a[2]=Math.min(c[2],
b[2]),a[3]=Math.min(c[3],b[3]),a};d.max=function(a,c,b){return a[0]=Math.max(c[0],b[0]),a[1]=Math.max(c[1],b[1]),a[2]=Math.max(c[2],b[2]),a[3]=Math.max(c[3],b[3]),a};d.round=function(a,c){return a[0]=Math.round(c[0]),a[1]=Math.round(c[1]),a[2]=Math.round(c[2]),a[3]=Math.round(c[3]),a};d.scale=function(a,c,b){return a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b,a};d.scaleAndAdd=function(a,c,b,k){return a[0]=c[0]+b[0]*k,a[1]=c[1]+b[1]*k,a[2]=c[2]+b[2]*k,a[3]=c[3]+b[3]*k,a};d.distance=f;d.squaredDistance=
c;d.length=k;d.squaredLength=z;d.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a[3]=-c[3],a};d.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a[3]=1/c[3],a};d.normalize=function(a,c){var b=c[0],k=c[1],d=c[2],f=c[3],h=b*b+k*k+d*d+f*f;0<h&&(h=1/Math.sqrt(h),a[0]=b*h,a[1]=k*h,a[2]=d*h,a[3]=f*h);return a};d.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};d.lerp=function(a,c,b,k){var d=c[0],f=c[1],h=c[2];c=c[3];return a[0]=d+k*(b[0]-d),a[1]=f+k*(b[1]-
f),a[2]=h+k*(b[2]-h),a[3]=c+k*(b[3]-c),a};d.random=function(a,c){var b,k,d,f,h,m;c=c||1;do b=2*B.RANDOM()-1,k=2*B.RANDOM()-1,h=b*b+k*k;while(1<=h);do d=2*B.RANDOM()-1,f=2*B.RANDOM()-1,m=d*d+f*f;while(1<=m);h=Math.sqrt((1-h)/m);return a[0]=c*b,a[1]=c*k,a[2]=c*d*h,a[3]=c*f*h,a};d.transformMat4=function(a,c,b){var k=c[0],d=c[1],f=c[2];c=c[3];return a[0]=b[0]*k+b[4]*d+b[8]*f+b[12]*c,a[1]=b[1]*k+b[5]*d+b[9]*f+b[13]*c,a[2]=b[2]*k+b[6]*d+b[10]*f+b[14]*c,a[3]=b[3]*k+b[7]*d+b[11]*f+b[15]*c,a};d.transformQuat=
function(a,c,b){var k=c[0],d=c[1],f=c[2],h=b[0],m=b[1],z=b[2];b=b[3];var B=b*k+m*f-z*d,q=b*d+z*k-h*f,r=b*f+h*d-m*k,k=-h*k-m*d-z*f;return a[0]=B*b+k*-h+q*-z-r*-m,a[1]=q*b+k*-m+r*-h-B*-z,a[2]=r*b+k*-z+B*-m-q*-h,a[3]=c[3],a};d.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]};d.equals=function(a,c){var b=a[0],k=a[1],d=a[2],f=a[3],h=c[0],m=c[1],z=c[2],q=c[3];return Math.abs(b-h)<=B.EPSILON*Math.max(1,
Math.abs(b),Math.abs(h))&&Math.abs(k-m)<=B.EPSILON*Math.max(1,Math.abs(k),Math.abs(m))&&Math.abs(d-z)<=B.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(f-q)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(q))};var B=function(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}(h(0));d.sub=q;d.mul=m;d.div=b;d.dist=f;d.sqrDist=c;d.len=k;d.sqrLen=z;d.forEach=function(){var a=r();return function(c,b,k,d,f,h){var m=
void 0,z=void 0;b||(b=4);k||(k=0);z=d?Math.min(d*b+k,c.length):c.length;for(m=k;m<z;m+=b)a[0]=c[m],a[1]=c[m+1],a[2]=c[m+2],a[3]=c[m+3],f(a,a,h),c[m]=a[0],c[m+1]=a[1],c[m+2]=a[2],c[m+3]=a[3];return c}}()},function(a,d,h){function r(){var a=new g.ARRAY_TYPE(3);return g.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function q(a){var c=a[0],e=a[1];a=a[2];return Math.sqrt(c*c+e*e+a*a)}function m(a,c,e){var b=new g.ARRAY_TYPE(3);return b[0]=a,b[1]=c,b[2]=e,b}function b(a,c,e){return a[0]=c[0]-e[0],
a[1]=c[1]-e[1],a[2]=c[2]-e[2],a}function f(a,c,e){return a[0]=c[0]*e[0],a[1]=c[1]*e[1],a[2]=c[2]*e[2],a}function c(a,c,e){return a[0]=c[0]/e[0],a[1]=c[1]/e[1],a[2]=c[2]/e[2],a}function k(a,c){var e=c[0]-a[0],b=c[1]-a[1],g=c[2]-a[2];return Math.sqrt(e*e+b*b+g*g)}function z(a,c){var e=c[0]-a[0],b=c[1]-a[1],g=c[2]-a[2];return e*e+b*b+g*g}function B(a){var c=a[0],e=a[1];a=a[2];return c*c+e*e+a*a}function e(a,c){var e=c[0],b=c[1],g=c[2],e=e*e+b*b+g*g;return 0<e&&(e=1/Math.sqrt(e),a[0]=c[0]*e,a[1]=c[1]*
e,a[2]=c[2]*e),a}function l(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.len=d.sqrDist=d.dist=d.div=d.mul=d.sub=void 0;d.create=r;d.clone=function(a){var c=new g.ARRAY_TYPE(3);return c[0]=a[0],c[1]=a[1],c[2]=a[2],c};d.length=q;d.fromValues=m;d.copy=function(a,c){return a[0]=c[0],a[1]=c[1],a[2]=c[2],a};d.set=function(a,c,e,b){return a[0]=c,a[1]=e,a[2]=b,a};d.add=function(a,c,e){return a[0]=c[0]+e[0],a[1]=c[1]+e[1],a[2]=c[2]+e[2],a};
d.subtract=b;d.multiply=f;d.divide=c;d.ceil=function(a,c){return a[0]=Math.ceil(c[0]),a[1]=Math.ceil(c[1]),a[2]=Math.ceil(c[2]),a};d.floor=function(a,c){return a[0]=Math.floor(c[0]),a[1]=Math.floor(c[1]),a[2]=Math.floor(c[2]),a};d.min=function(a,c,e){return a[0]=Math.min(c[0],e[0]),a[1]=Math.min(c[1],e[1]),a[2]=Math.min(c[2],e[2]),a};d.max=function(a,c,e){return a[0]=Math.max(c[0],e[0]),a[1]=Math.max(c[1],e[1]),a[2]=Math.max(c[2],e[2]),a};d.round=function(a,c){return a[0]=Math.round(c[0]),a[1]=Math.round(c[1]),
a[2]=Math.round(c[2]),a};d.scale=function(a,c,e){return a[0]=c[0]*e,a[1]=c[1]*e,a[2]=c[2]*e,a};d.scaleAndAdd=function(a,c,e,b){return a[0]=c[0]+e[0]*b,a[1]=c[1]+e[1]*b,a[2]=c[2]+e[2]*b,a};d.distance=k;d.squaredDistance=z;d.squaredLength=B;d.negate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a};d.inverse=function(a,c){return a[0]=1/c[0],a[1]=1/c[1],a[2]=1/c[2],a};d.normalize=e;d.dot=l;d.cross=function(a,c,e){var b=c[0],g=c[1];c=c[2];var l=e[0],k=e[1];e=e[2];return a[0]=g*e-c*k,a[1]=c*l-b*
e,a[2]=b*k-g*l,a};d.lerp=function(a,c,e,b){var g=c[0],l=c[1];c=c[2];return a[0]=g+b*(e[0]-g),a[1]=l+b*(e[1]-l),a[2]=c+b*(e[2]-c),a};d.hermite=function(a,c,e,b,g,l){var k=l*l,d=k*(2*l-3)+1,f=k*(l-2)+l,h=k*(l-1);l=k*(3-2*l);return a[0]=c[0]*d+e[0]*f+b[0]*h+g[0]*l,a[1]=c[1]*d+e[1]*f+b[1]*h+g[1]*l,a[2]=c[2]*d+e[2]*f+b[2]*h+g[2]*l,a};d.bezier=function(a,c,e,b,g,l){var k=1-l,d=k*k,f=l*l,h=d*k,d=3*l*d,k=3*f*k;l*=f;return a[0]=c[0]*h+e[0]*d+b[0]*k+g[0]*l,a[1]=c[1]*h+e[1]*d+b[1]*k+g[1]*l,a[2]=c[2]*h+e[2]*
d+b[2]*k+g[2]*l,a};d.random=function(a,c){c=c||1;var e=2*g.RANDOM()*Math.PI,b=2*g.RANDOM()-1,l=Math.sqrt(1-b*b)*c;return a[0]=Math.cos(e)*l,a[1]=Math.sin(e)*l,a[2]=b*c,a};d.transformMat4=function(a,c,e){var b=c[0],l=c[1];c=c[2];var g=e[3]*b+e[7]*l+e[11]*c+e[15];return g=g||1,a[0]=(e[0]*b+e[4]*l+e[8]*c+e[12])/g,a[1]=(e[1]*b+e[5]*l+e[9]*c+e[13])/g,a[2]=(e[2]*b+e[6]*l+e[10]*c+e[14])/g,a};d.transformMat3=function(a,c,e){var b=c[0],l=c[1];c=c[2];return a[0]=b*e[0]+l*e[3]+c*e[6],a[1]=b*e[1]+l*e[4]+c*e[7],
a[2]=b*e[2]+l*e[5]+c*e[8],a};d.transformQuat=function(a,c,e){var b=e[0],l=e[1],g=e[2],k=c[0],d=c[1];c=c[2];var f=l*c-g*d,h=g*k-b*c,m=b*d-l*k,z=l*m-g*h,g=g*f-b*m,b=b*h-l*f;e=2*e[3];return f*=e,h*=e,m*=e,z*=2,g*=2,b*=2,a[0]=k+f+z,a[1]=d+h+g,a[2]=c+m+b,a};d.rotateX=function(a,c,e,b){var l=[],g=[];return l[0]=c[0]-e[0],l[1]=c[1]-e[1],l[2]=c[2]-e[2],g[0]=l[0],g[1]=l[1]*Math.cos(b)-l[2]*Math.sin(b),g[2]=l[1]*Math.sin(b)+l[2]*Math.cos(b),a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.rotateY=function(a,
c,e,b){var l=[],g=[];return l[0]=c[0]-e[0],l[1]=c[1]-e[1],l[2]=c[2]-e[2],g[0]=l[2]*Math.sin(b)+l[0]*Math.cos(b),g[1]=l[1],g[2]=l[2]*Math.cos(b)-l[0]*Math.sin(b),a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.rotateZ=function(a,c,e,b){var l=[],g=[];return l[0]=c[0]-e[0],l[1]=c[1]-e[1],l[2]=c[2]-e[2],g[0]=l[0]*Math.cos(b)-l[1]*Math.sin(b),g[1]=l[0]*Math.sin(b)+l[1]*Math.cos(b),g[2]=l[2],a[0]=g[0]+e[0],a[1]=g[1]+e[1],a[2]=g[2]+e[2],a};d.angle=function(a,c){var b=m(a[0],a[1],a[2]),g=m(c[0],c[1],c[2]);
e(b,b);e(g,g);b=l(b,g);return 1<b?0:-1>b?Math.PI:Math.acos(b)};d.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};d.exactEquals=function(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]};d.equals=function(a,c){var e=a[0],b=a[1],l=a[2],k=c[0],d=c[1],f=c[2];return Math.abs(e-k)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(b-d)<=g.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))&&Math.abs(l-f)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))};var g=function(a){if(a&&a.__esModule)return a;
var c={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);return c["default"]=a,c}(h(0));d.sub=b;d.mul=f;d.div=c;d.dist=k;d.sqrDist=z;d.len=q;d.sqrLen=B;d.forEach=function(){var a=r();return function(c,e,b,l,g,k){var d=void 0,f=void 0;e||(e=3);b||(b=0);f=l?Math.min(l*e+b,c.length):c.length;for(d=b;d<f;d+=e)a[0]=c[d],a[1]=c[d+1],a[2]=c[d+2],g(a,a,k),c[d]=a[0],c[d+1]=a[1],c[d+2]=a[2];return c}}()},function(a,d,h){function r(a){if(a&&a.__esModule)return a;var c={};if(null!=
a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(c[e]=a[e]);return c["default"]=a,c}function q(){var a=new k.ARRAY_TYPE(4);return k.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function m(a,c,e){e*=.5;var b=Math.sin(e);return a[0]=b*c[0],a[1]=b*c[1],a[2]=b*c[2],a[3]=Math.cos(e),a}function b(a,c,e){var b=c[0],k=c[1],d=c[2];c=c[3];var f=e[0],h=e[1],m=e[2];e=e[3];return a[0]=b*e+c*f+k*m-d*h,a[1]=k*e+c*h+d*f-b*m,a[2]=d*e+c*m+b*h-k*f,a[3]=c*e-b*f-k*h-d*m,a}function f(a,c,e,b){var d=
c[0],f=c[1],h=c[2];c=c[3];var m=e[0],z=e[1],B=e[2];e=e[3];var q=void 0,r=void 0,u=void 0,E=void 0,A=void 0;return 0>(r=d*m+f*z+h*B+c*e)&&(r=-r,m=-m,z=-z,B=-B,e=-e),1-r>k.EPSILON?(q=Math.acos(r),u=Math.sin(q),E=Math.sin((1-b)*q)/u,A=Math.sin(b*q)/u):(E=1-b,A=b),a[0]=E*d+A*m,a[1]=E*f+A*z,a[2]=E*h+A*B,a[3]=E*c+A*e,a}function c(a,c){var e=c[0]+c[4]+c[8],b=void 0;if(0<e)b=Math.sqrt(e+1),a[3]=.5*b,b=.5/b,a[0]=(c[5]-c[7])*b,a[1]=(c[6]-c[2])*b,a[2]=(c[1]-c[3])*b;else{e=0;c[4]>c[0]&&(e=1);c[8]>c[3*e+e]&&(e=
2);var k=(e+1)%3,d=(e+2)%3,b=Math.sqrt(c[3*e+e]-c[3*k+k]-c[3*d+d]+1);a[e]=.5*b;b=.5/b;a[3]=(c[3*k+d]-c[3*d+k])*b;a[k]=(c[3*k+e]+c[3*e+k])*b;a[d]=(c[3*d+e]+c[3*e+d])*b}return a}Object.defineProperty(d,"__esModule",{value:!0});d.setAxes=d.sqlerp=d.rotationTo=d.equals=d.exactEquals=d.normalize=d.sqrLen=d.squaredLength=d.len=d.length=d.lerp=d.dot=d.scale=d.mul=d.add=d.set=d.copy=d.fromValues=d.clone=void 0;d.create=q;d.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a};d.setAxisAngle=m;d.getAxisAngle=
function(a,c){var e=2*Math.acos(c[3]),b=Math.sin(e/2);b>k.EPSILON?(a[0]=c[0]/b,a[1]=c[1]/b,a[2]=c[2]/b):(a[0]=1,a[1]=0,a[2]=0);return e};d.multiply=b;d.rotateX=function(a,c,e){e*=.5;var b=c[0],k=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e+c*f,a[1]=k*e+d*f,a[2]=d*e-k*f,a[3]=c*e-b*f,a};d.rotateY=function(a,c,e){e*=.5;var b=c[0],k=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e-d*f,a[1]=k*e+c*f,a[2]=d*e+b*f,a[3]=c*e-k*f,a};d.rotateZ=function(a,c,e){e*=.5;var b=
c[0],k=c[1],d=c[2];c=c[3];var f=Math.sin(e);e=Math.cos(e);return a[0]=b*e+k*f,a[1]=k*e-b*f,a[2]=d*e+c*f,a[3]=c*e-d*f,a};d.calculateW=function(a,c){var e=c[0],b=c[1],k=c[2];return a[0]=e,a[1]=b,a[2]=k,a[3]=Math.sqrt(Math.abs(1-e*e-b*b-k*k)),a};d.slerp=f;d.random=function(a){var c=k.RANDOM(),e=k.RANDOM(),b=k.RANDOM(),d=Math.sqrt(1-c),c=Math.sqrt(c);return a[0]=d*Math.sin(2*Math.PI*e),a[1]=d*Math.cos(2*Math.PI*e),a[2]=c*Math.sin(2*Math.PI*b),a[3]=c*Math.cos(2*Math.PI*b),a};d.invert=function(a,c){var e=
c[0],b=c[1],k=c[2],d=c[3],f=e*e+b*b+k*k+d*d,f=f?1/f:0;return a[0]=-e*f,a[1]=-b*f,a[2]=-k*f,a[3]=d*f,a};d.conjugate=function(a,c){return a[0]=-c[0],a[1]=-c[1],a[2]=-c[2],a[3]=c[3],a};d.fromMat3=c;d.fromEuler=function(a,c,e,b){var k=.5*Math.PI/180;c*=k;e*=k;b*=k;k=Math.sin(c);c=Math.cos(c);var d=Math.sin(e);e=Math.cos(e);var f=Math.sin(b);b=Math.cos(b);return a[0]=k*e*b-c*d*f,a[1]=c*d*b+k*e*f,a[2]=c*e*f-k*d*b,a[3]=c*e*b+k*d*f,a};d.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};
var k=r(h(0)),z=r(h(5)),B=r(h(2));a=r(h(1));d.clone=a.clone;d.fromValues=a.fromValues;d.copy=a.copy;d.set=a.set;d.add=a.add;d.mul=b;d.scale=a.scale;d.dot=a.dot;d.lerp=a.lerp;h=d.length=a.length;h=(d.len=h,d.squaredLength=a.squaredLength);var e=(d.sqrLen=h,d.normalize=a.normalize);d.exactEquals=a.exactEquals;d.equals=a.equals;d.rotationTo=function(){var a=B.create(),c=B.fromValues(1,0,0),b=B.fromValues(0,1,0);return function(k,d,f){var h=B.dot(d,f);return-.999999>h?(B.cross(a,c,d),1E-6>B.len(a)&&B.cross(a,
b,d),B.normalize(a,a),m(k,a,Math.PI),k):.999999<h?(k[0]=0,k[1]=0,k[2]=0,k[3]=1,k):(B.cross(a,d,f),k[0]=a[0],k[1]=a[1],k[2]=a[2],k[3]=1+h,e(k,k))}}();d.sqlerp=function(){var a=q(),c=q();return function(e,b,k,d,h,m){return f(a,b,h,m),f(c,k,d,m),f(e,a,c,2*m*(1-m)),e}}();d.setAxes=function(){var a=z.create();return function(b,k,d,f){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=f[0],a[4]=f[1],a[7]=f[2],a[2]=-k[0],a[5]=-k[1],a[8]=-k[2],e(b,c(b,a))}}()},function(a,d,h){function r(a){return a[0]=1,a[1]=0,a[2]=
0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function q(a,b,d){var f=b[0],e=b[1],l=b[2],g=b[3],n=b[4],h=b[5],m=b[6],y=b[7],q=b[8],r=b[9],x=b[10],v=b[11],u=b[12],I=b[13],G=b[14];b=b[15];var E=d[0],A=d[1],ca=d[2],H=d[3];return a[0]=E*f+A*n+ca*q+H*u,a[1]=E*e+A*h+ca*r+H*I,a[2]=E*l+A*m+ca*x+H*G,a[3]=E*g+A*y+ca*v+H*b,E=d[4],A=d[5],ca=d[6],H=d[7],a[4]=E*f+A*n+ca*q+H*u,a[5]=E*e+A*h+ca*r+H*I,a[6]=E*l+A*m+ca*x+H*G,a[7]=E*g+A*y+ca*v+H*b,E=d[8],A=d[9],ca=
d[10],H=d[11],a[8]=E*f+A*n+ca*q+H*u,a[9]=E*e+A*h+ca*r+H*I,a[10]=E*l+A*m+ca*x+H*G,a[11]=E*g+A*y+ca*v+H*b,E=d[12],A=d[13],ca=d[14],H=d[15],a[12]=E*f+A*n+ca*q+H*u,a[13]=E*e+A*h+ca*r+H*I,a[14]=E*l+A*m+ca*x+H*G,a[15]=E*g+A*y+ca*v+H*b,a}function m(a,b,d){var f=b[0],e=b[1],l=b[2],g=b[3],n=f+f,h=e+e,m=l+l;b=f*n;var y=f*h,f=f*m,q=e*h,e=e*m,l=l*m,n=g*n,h=g*h,g=g*m;return a[0]=1-(q+l),a[1]=y+g,a[2]=f-h,a[3]=0,a[4]=y-g,a[5]=1-(b+l),a[6]=e+n,a[7]=0,a[8]=f+h,a[9]=e-n,a[10]=1-(b+q),a[11]=0,a[12]=d[0],a[13]=d[1],
a[14]=d[2],a[15]=1,a}function b(a,b,d){return a[0]=b[0]-d[0],a[1]=b[1]-d[1],a[2]=b[2]-d[2],a[3]=b[3]-d[3],a[4]=b[4]-d[4],a[5]=b[5]-d[5],a[6]=b[6]-d[6],a[7]=b[7]-d[7],a[8]=b[8]-d[8],a[9]=b[9]-d[9],a[10]=b[10]-d[10],a[11]=b[11]-d[11],a[12]=b[12]-d[12],a[13]=b[13]-d[13],a[14]=b[14]-d[14],a[15]=b[15]-d[15],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new f.ARRAY_TYPE(16);f.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=
0,a[11]=0,a[12]=0,a[13]=0,a[14]=0);return a[0]=1,a[5]=1,a[10]=1,a[15]=1,a};d.clone=function(a){var b=new f.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b};d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],
a};d.fromValues=function(a,b,d,h,e,l,g,n,p,m,y,q,r,x,v,u){var I=new f.ARRAY_TYPE(16);return I[0]=a,I[1]=b,I[2]=d,I[3]=h,I[4]=e,I[5]=l,I[6]=g,I[7]=n,I[8]=p,I[9]=m,I[10]=y,I[11]=q,I[12]=r,I[13]=x,I[14]=v,I[15]=u,I};d.set=function(a,b,d,f,e,l,g,n,h,m,y,q,r,x,v,u,I){return a[0]=b,a[1]=d,a[2]=f,a[3]=e,a[4]=l,a[5]=g,a[6]=n,a[7]=h,a[8]=m,a[9]=y,a[10]=q,a[11]=r,a[12]=x,a[13]=v,a[14]=u,a[15]=I,a};d.identity=r;d.transpose=function(a,b){if(a===b){var d=b[1],f=b[2],e=b[3],l=b[6],g=b[7],n=b[11];a[1]=b[4];a[2]=
b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=f;a[9]=l;a[11]=b[14];a[12]=e;a[13]=g;a[14]=n}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};d.invert=function(a,b){var d=b[0],f=b[1],e=b[2],l=b[3],g=b[4],n=b[5],h=b[6],m=b[7],y=b[8],q=b[9],r=b[10],x=b[11],v=b[12],u=b[13],I=b[14],G=b[15],E=d*n-f*g,A=d*h-e*g,ca=d*m-l*g,H=f*h-e*n,F=f*m-l*n,D=e*m-l*h,T=y*u-q*v,t=y*
I-r*v,ea=y*G-x*v,L=q*I-r*u,ma=q*G-x*u,ta=r*G-x*I,S=E*ta-A*ma+ca*L+H*ea-F*t+D*T;return S?(S=1/S,a[0]=(n*ta-h*ma+m*L)*S,a[1]=(e*ma-f*ta-l*L)*S,a[2]=(u*D-I*F+G*H)*S,a[3]=(r*F-q*D-x*H)*S,a[4]=(h*ea-g*ta-m*t)*S,a[5]=(d*ta-e*ea+l*t)*S,a[6]=(I*ca-v*D-G*A)*S,a[7]=(y*D-r*ca+x*A)*S,a[8]=(g*ma-n*ea+m*T)*S,a[9]=(f*ea-d*ma-l*T)*S,a[10]=(v*F-u*ca+G*E)*S,a[11]=(q*ca-y*F-x*E)*S,a[12]=(n*t-g*L-h*T)*S,a[13]=(d*L-f*t+e*T)*S,a[14]=(u*A-v*H-I*E)*S,a[15]=(y*H-q*A+r*E)*S,a):null};d.adjoint=function(a,b){var d=b[0],f=b[1],
e=b[2],l=b[3],g=b[4],n=b[5],h=b[6],m=b[7],y=b[8],q=b[9],r=b[10],x=b[11],v=b[12],u=b[13],I=b[14],G=b[15];return a[0]=n*(r*G-x*I)-q*(h*G-m*I)+u*(h*x-m*r),a[1]=-(f*(r*G-x*I)-q*(e*G-l*I)+u*(e*x-l*r)),a[2]=f*(h*G-m*I)-n*(e*G-l*I)+u*(e*m-l*h),a[3]=-(f*(h*x-m*r)-n*(e*x-l*r)+q*(e*m-l*h)),a[4]=-(g*(r*G-x*I)-y*(h*G-m*I)+v*(h*x-m*r)),a[5]=d*(r*G-x*I)-y*(e*G-l*I)+v*(e*x-l*r),a[6]=-(d*(h*G-m*I)-g*(e*G-l*I)+v*(e*m-l*h)),a[7]=d*(h*x-m*r)-g*(e*x-l*r)+y*(e*m-l*h),a[8]=g*(q*G-x*u)-y*(n*G-m*u)+v*(n*x-m*q),a[9]=-(d*
(q*G-x*u)-y*(f*G-l*u)+v*(f*x-l*q)),a[10]=d*(n*G-m*u)-g*(f*G-l*u)+v*(f*m-l*n),a[11]=-(d*(n*x-m*q)-g*(f*x-l*q)+y*(f*m-l*n)),a[12]=-(g*(q*I-r*u)-y*(n*I-h*u)+v*(n*r-h*q)),a[13]=d*(q*I-r*u)-y*(f*I-e*u)+v*(f*r-e*q),a[14]=-(d*(n*I-h*u)-g*(f*I-e*u)+v*(f*h-e*n)),a[15]=d*(n*r-h*q)-g*(f*r-e*q)+y*(f*h-e*n),a};d.determinant=function(a){var b=a[0],d=a[1],f=a[2],e=a[3],l=a[4],g=a[5],h=a[6],p=a[7],m=a[8],y=a[9],q=a[10],r=a[11],x=a[12],v=a[13],u=a[14];a=a[15];return(b*g-d*l)*(q*a-r*u)-(b*h-f*l)*(y*a-r*v)+(b*p-e*l)*
(y*u-q*v)+(d*h-f*g)*(m*a-r*x)-(d*p-e*g)*(m*u-q*x)+(f*p-e*h)*(m*v-y*x)};d.multiply=q;d.translate=function(a,b,d){var f=d[0],e=d[1];d=d[2];var l=void 0,g=void 0,h=void 0,p=void 0,m=void 0,y=void 0,q=void 0,r=void 0,x=void 0,v=void 0,u=void 0,I=void 0;b===a?(a[12]=b[0]*f+b[4]*e+b[8]*d+b[12],a[13]=b[1]*f+b[5]*e+b[9]*d+b[13],a[14]=b[2]*f+b[6]*e+b[10]*d+b[14],a[15]=b[3]*f+b[7]*e+b[11]*d+b[15]):(l=b[0],g=b[1],h=b[2],p=b[3],m=b[4],y=b[5],q=b[6],r=b[7],x=b[8],v=b[9],u=b[10],I=b[11],a[0]=l,a[1]=g,a[2]=h,a[3]=
p,a[4]=m,a[5]=y,a[6]=q,a[7]=r,a[8]=x,a[9]=v,a[10]=u,a[11]=I,a[12]=l*f+m*e+x*d+b[12],a[13]=g*f+y*e+v*d+b[13],a[14]=h*f+q*e+u*d+b[14],a[15]=p*f+r*e+I*d+b[15]);return a};d.scale=function(a,b,d){var f=d[0],e=d[1];d=d[2];return a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f,a[3]=b[3]*f,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a};d.rotate=function(a,b,d,h){var e=h[0],l=h[1];h=h[2];var g=Math.sqrt(e*e+l*l+h*h),
n=void 0,p=void 0,m=void 0,y=void 0,q=void 0,r=void 0,x=void 0,v=void 0,u=void 0,I=void 0,G=void 0,E=void 0,A=void 0,T=void 0,H=void 0,F=void 0,D=void 0,ga=void 0,t=void 0,ea=void 0,L=void 0,ma=void 0,p=n=void 0;if(g<f.EPSILON)return null;e*=g=1/g;l*=g;h*=g;n=Math.sin(d);p=Math.cos(d);m=1-p;y=b[0];q=b[1];r=b[2];x=b[3];v=b[4];u=b[5];I=b[6];G=b[7];E=b[8];A=b[9];T=b[10];H=b[11];F=e*e*m+p;D=l*e*m+h*n;ga=h*e*m-l*n;t=e*l*m-h*n;ea=l*l*m+p;L=h*l*m+e*n;ma=e*h*m+l*n;n=l*h*m-e*n;p=h*h*m+p;a[0]=y*F+v*D+E*ga;
a[1]=q*F+u*D+A*ga;a[2]=r*F+I*D+T*ga;a[3]=x*F+G*D+H*ga;a[4]=y*t+v*ea+E*L;a[5]=q*t+u*ea+A*L;a[6]=r*t+I*ea+T*L;a[7]=x*t+G*ea+H*L;a[8]=y*ma+v*n+E*p;a[9]=q*ma+u*n+A*p;a[10]=r*ma+I*n+T*p;a[11]=x*ma+G*n+H*p;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};d.rotateX=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[4],l=b[5],g=b[6],h=b[7],p=b[8],m=b[9],q=b[10],r=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[4]=e*d+p*
f,a[5]=l*d+m*f,a[6]=g*d+q*f,a[7]=h*d+r*f,a[8]=p*d-e*f,a[9]=m*d-l*f,a[10]=q*d-g*f,a[11]=r*d-h*f,a};d.rotateY=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[0],l=b[1],g=b[2],h=b[3],p=b[8],m=b[9],q=b[10],r=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[0]=e*d-p*f,a[1]=l*d-m*f,a[2]=g*d-q*f,a[3]=h*d-r*f,a[8]=e*f+p*d,a[9]=l*f+m*d,a[10]=g*f+q*d,a[11]=h*f+r*d,a};d.rotateZ=function(a,b,d){var f=Math.sin(d);d=Math.cos(d);var e=b[0],l=
b[1],g=b[2],h=b[3],p=b[4],m=b[5],q=b[6],r=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a[0]=e*d+p*f,a[1]=l*d+m*f,a[2]=g*d+q*f,a[3]=h*d+r*f,a[4]=p*d-e*f,a[5]=m*d-l*f,a[6]=q*d-g*f,a[7]=r*d-h*f,a};d.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a};d.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=
0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromRotation=function(a,b,d){var h=d[0],e=d[1];d=d[2];var l=Math.sqrt(h*h+e*e+d*d),g=void 0,n=void 0,p=void 0;return l<f.EPSILON?null:(h*=l=1/l,e*=l,d*=l,g=Math.sin(b),n=Math.cos(b),p=1-n,a[0]=h*h*p+n,a[1]=e*h*p+d*g,a[2]=d*h*p-e*g,a[3]=0,a[4]=h*e*p-d*g,a[5]=e*e*p+n,a[6]=d*e*p+h*g,a[7]=0,a[8]=h*d*p+e*g,a[9]=e*d*p-h*g,a[10]=d*d*p+n,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)};d.fromXRotation=function(a,b){var d=
Math.sin(b),f=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=d,a[7]=0,a[8]=0,a[9]=-d,a[10]=f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromYRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);return a[0]=f,a[1]=0,a[2]=-d,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=d,a[9]=0,a[10]=f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromZRotation=function(a,b){var d=Math.sin(b),f=Math.cos(b);return a[0]=f,a[1]=d,a[2]=0,a[3]=0,a[4]=-d,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,
a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.fromRotationTranslation=m;d.fromQuat2=function(a,b){var d=new f.ARRAY_TYPE(3),h=-b[0],e=-b[1],l=-b[2],g=b[3],n=b[4],p=b[5],w=b[6],q=b[7],r=h*h+e*e+l*l+g*g;0<r?(d[0]=2*(n*g+q*h+p*l-w*e)/r,d[1]=2*(p*g+q*e+w*h-n*l)/r,d[2]=2*(w*g+q*l+n*e-p*h)/r):(d[0]=2*(n*g+q*h+p*l-w*e),d[1]=2*(p*g+q*e+w*h-n*l),d[2]=2*(w*g+q*l+n*e-p*h));return m(a,b,d),a};d.getTranslation=function(a,b){return a[0]=b[12],a[1]=b[13],a[2]=b[14],a};d.getScaling=function(a,b){var d=b[0],f=b[1],e=b[2],
l=b[4],g=b[5],h=b[6],p=b[8],m=b[9],q=b[10];return a[0]=Math.sqrt(d*d+f*f+e*e),a[1]=Math.sqrt(l*l+g*g+h*h),a[2]=Math.sqrt(p*p+m*m+q*q),a};d.getRotation=function(a,b){var d=b[0]+b[5]+b[10],f=0;0<d?(f=2*Math.sqrt(d+1),a[3]=.25*f,a[0]=(b[6]-b[9])/f,a[1]=(b[8]-b[2])/f,a[2]=(b[1]-b[4])/f):b[0]>b[5]&&b[0]>b[10]?(f=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/f,a[0]=.25*f,a[1]=(b[1]+b[4])/f,a[2]=(b[8]+b[2])/f):b[5]>b[10]?(f=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/f,a[0]=(b[1]+b[4])/f,a[1]=.25*
f,a[2]=(b[6]+b[9])/f):(f=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/f,a[0]=(b[8]+b[2])/f,a[1]=(b[6]+b[9])/f,a[2]=.25*f);return a};d.fromRotationTranslationScale=function(a,b,d,f){var e=b[0],l=b[1],g=b[2],h=b[3],p=e+e,m=l+l,q=g+g;b=e*p;var r=e*m,e=e*q,u=l*m,l=l*q,g=g*q,p=h*p,m=h*m,h=h*q,q=f[0],x=f[1];f=f[2];return a[0]=(1-(u+g))*q,a[1]=(r+h)*q,a[2]=(e-m)*q,a[3]=0,a[4]=(r-h)*x,a[5]=(1-(b+g))*x,a[6]=(l+p)*x,a[7]=0,a[8]=(e+m)*f,a[9]=(l-p)*f,a[10]=(1-(b+u))*f,a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],
a[15]=1,a};d.fromRotationTranslationScaleOrigin=function(a,b,d,f,e){var l=b[0],g=b[1],h=b[2],p=b[3],m=l+l,q=g+g,r=h+h;b=l*m;var u=l*q,x=l*r,l=g*q,g=g*r,v=h*r,h=p*m,q=p*q,G=p*r,I=f[0],aa=f[1],r=f[2];f=e[0];p=e[1];e=e[2];var m=(1-(l+v))*I,E=(u+G)*I,I=(x-q)*I,u=(u-G)*aa,v=(1-(b+v))*aa,aa=(g+h)*aa,x=(x+q)*r,g=(g-h)*r;b=(1-(b+l))*r;return a[0]=m,a[1]=E,a[2]=I,a[3]=0,a[4]=u,a[5]=v,a[6]=aa,a[7]=0,a[8]=x,a[9]=g,a[10]=b,a[11]=0,a[12]=d[0]+f-(m*f+u*p+x*e),a[13]=d[1]+p-(E*f+v*p+g*e),a[14]=d[2]+e-(I*f+aa*p+b*
e),a[15]=1,a};d.fromQuat=function(a,b){var d=b[0],f=b[1],e=b[2],l=b[3],g=d+d,h=f+f,p=e+e,d=d*g,m=f*g,f=f*h,q=e*g,r=e*h,e=e*p,g=l*g,h=l*h,l=l*p;return a[0]=1-f-e,a[1]=m+l,a[2]=q-h,a[3]=0,a[4]=m-l,a[5]=1-d-e,a[6]=r+g,a[7]=0,a[8]=q+h,a[9]=r-g,a[10]=1-d-f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a};d.frustum=function(a,b,d,f,e,l,g){var h=1/(d-b),p=1/(e-f),m=1/(l-g);return a[0]=2*l*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*l*p,a[6]=0,a[7]=0,a[8]=(d+b)*h,a[9]=(e+f)*p,a[10]=(g+l)*m,a[11]=-1,a[12]=0,a[13]=0,a[14]=
g*l*2*m,a[15]=0,a};d.perspective=function(a,b,d,f,e){b=1/Math.tan(b/2);var l=void 0;a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=e&&e!==1/0?(l=1/(f-e),a[10]=(e+f)*l,a[14]=2*e*f*l):(a[10]=-1,a[14]=-2*f);return a};d.perspectiveFromFieldOfView=function(a,b,d,f){var e=Math.tan(b.upDegrees*Math.PI/180),l=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var h=2/(g+b),p=2/(e+
l);return a[0]=h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=p,a[6]=0,a[7]=0,a[8]=-(g-b)*h*.5,a[9]=(e-l)*p*.5,a[10]=f/(d-f),a[11]=-1,a[12]=0,a[13]=0,a[14]=f*d/(d-f),a[15]=0,a};d.ortho=function(a,b,d,f,e,l,g){var h=1/(b-d),p=1/(f-e),m=1/(l-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*p,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*m,a[11]=0,a[12]=(b+d)*h,a[13]=(e+f)*p,a[14]=(g+l)*m,a[15]=1,a};d.lookAt=function(a,b,d,h){var e=void 0,l=void 0,g=void 0,n=void 0,p=void 0,m=void 0,q=void 0,C=void 0,G=void 0,x=void 0,
v=b[0],T=b[1];b=b[2];g=h[0];n=h[1];h=h[2];q=d[0];C=d[1];d=d[2];if(Math.abs(v-q)<f.EPSILON&&Math.abs(T-C)<f.EPSILON&&Math.abs(b-d)<f.EPSILON)return r(a);q=v-q;C=T-C;G=b-d;x=1/Math.sqrt(q*q+C*C+G*G);e=n*(G*=x)-h*(C*=x);l=h*(q*=x)-g*G;g=g*C-n*q;(x=Math.sqrt(e*e+l*l+g*g))?(e*=x=1/x,l*=x,g*=x):(e=0,l=0,g=0);n=C*g-G*l;p=G*e-q*g;m=q*l-C*e;(x=Math.sqrt(n*n+p*p+m*m))?(n*=x=1/x,p*=x,m*=x):(n=0,p=0,m=0);return a[0]=e,a[1]=n,a[2]=q,a[3]=0,a[4]=l,a[5]=p,a[6]=C,a[7]=0,a[8]=g,a[9]=m,a[10]=G,a[11]=0,a[12]=-(e*v+
l*T+g*b),a[13]=-(n*v+p*T+m*b),a[14]=-(q*v+C*T+G*b),a[15]=1,a};d.targetTo=function(a,b,d,f){var e=b[0],l=b[1];b=b[2];var g=f[0],h=f[1],p=f[2];f=e-d[0];var m=l-d[1];d=b-d[2];var q=f*f+m*m+d*d;0<q&&(q=1/Math.sqrt(q),f*=q,m*=q,d*=q);var r=h*d-p*m,p=p*f-g*d,g=g*m-h*f;0<(q=r*r+p*p+g*g)&&(q=1/Math.sqrt(q),r*=q,p*=q,g*=q);return a[0]=r,a[1]=p,a[2]=g,a[3]=0,a[4]=m*g-d*p,a[5]=d*r-f*g,a[6]=f*p-m*r,a[7]=0,a[8]=f,a[9]=m,a[10]=d,a[11]=0,a[12]=e,a[13]=l,a[14]=b,a[15]=1,a};d.str=function(a){return"mat4("+a[0]+", "+
a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,b,d){return a[0]=
b[0]+d[0],a[1]=b[1]+d[1],a[2]=b[2]+d[2],a[3]=b[3]+d[3],a[4]=b[4]+d[4],a[5]=b[5]+d[5],a[6]=b[6]+d[6],a[7]=b[7]+d[7],a[8]=b[8]+d[8],a[9]=b[9]+d[9],a[10]=b[10]+d[10],a[11]=b[11]+d[11],a[12]=b[12]+d[12],a[13]=b[13]+d[13],a[14]=b[14]+d[14],a[15]=b[15]+d[15],a};d.subtract=b;d.multiplyScalar=function(a,b,d){return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*d,a[5]=b[5]*d,a[6]=b[6]*d,a[7]=b[7]*d,a[8]=b[8]*d,a[9]=b[9]*d,a[10]=b[10]*d,a[11]=b[11]*d,a[12]=b[12]*d,a[13]=b[13]*d,a[14]=b[14]*d,a[15]=
b[15]*d,a};d.multiplyScalarAndAdd=function(a,b,d,f){return a[0]=b[0]+d[0]*f,a[1]=b[1]+d[1]*f,a[2]=b[2]+d[2]*f,a[3]=b[3]+d[3]*f,a[4]=b[4]+d[4]*f,a[5]=b[5]+d[5]*f,a[6]=b[6]+d[6]*f,a[7]=b[7]+d[7]*f,a[8]=b[8]+d[8]*f,a[9]=b[9]+d[9]*f,a[10]=b[10]+d[10]*f,a[11]=b[11]+d[11]*f,a[12]=b[12]+d[12]*f,a[13]=b[13]+d[13]*f,a[14]=b[14]+d[14]*f,a[15]=b[15]+d[15]*f,a};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&
a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};d.equals=function(a,b){var d=a[0],h=a[1],e=a[2],l=a[3],g=a[4],n=a[5],p=a[6],m=a[7],q=a[8],r=a[9],u=a[10],x=a[11],v=a[12],G=a[13],I=a[14],T=a[15],E=b[0],A=b[1],ca=b[2],H=b[3],F=b[4],D=b[5],ga=b[6],t=b[7],ea=b[8],L=b[9],ma=b[10],ta=b[11],S=b[12],V=b[13],R=b[14],O=b[15];return Math.abs(d-E)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(h-A)<=f.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&
Math.abs(e-ca)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(ca))&&Math.abs(l-H)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(H))&&Math.abs(g-F)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(n-D)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(p-ga)<=f.EPSILON*Math.max(1,Math.abs(p),Math.abs(ga))&&Math.abs(m-t)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(t))&&Math.abs(q-ea)<=f.EPSILON*Math.max(1,Math.abs(q),Math.abs(ea))&&Math.abs(r-L)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(L))&&
Math.abs(u-ma)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(ma))&&Math.abs(x-ta)<=f.EPSILON*Math.max(1,Math.abs(x),Math.abs(ta))&&Math.abs(v-S)<=f.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(G-V)<=f.EPSILON*Math.max(1,Math.abs(G),Math.abs(V))&&Math.abs(I-R)<=f.EPSILON*Math.max(1,Math.abs(I),Math.abs(R))&&Math.abs(T-O)<=f.EPSILON*Math.max(1,Math.abs(T),Math.abs(O))};var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=
a[d]);return b["default"]=a,b}(h(0));d.mul=q;d.sub=b},function(a,d,h){function r(a,d,c){var k=d[0],h=d[1],m=d[2],e=d[3],l=d[4],g=d[5],n=d[6],p=d[7];d=d[8];var q=c[0],y=c[1],u=c[2],G=c[3],x=c[4],v=c[5],T=c[6],I=c[7];c=c[8];return a[0]=q*k+y*e+u*n,a[1]=q*h+y*l+u*p,a[2]=q*m+y*g+u*d,a[3]=G*k+x*e+v*n,a[4]=G*h+x*l+v*p,a[5]=G*m+x*g+v*d,a[6]=T*k+I*e+c*n,a[7]=T*h+I*l+c*p,a[8]=T*m+I*g+c*d,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a[6]=
d[6]-c[6],a[7]=d[7]-c[7],a[8]=d[8]-c[8],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(9);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);return a[0]=1,a[4]=1,a[8]=1,a};d.fromMat4=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[4],a[4]=d[5],a[5]=d[6],a[6]=d[8],a[7]=d[9],a[8]=d[10],a};d.clone=function(a){var d=new m.ARRAY_TYPE(9);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d[6]=
a[6],d[7]=a[7],d[8]=a[8],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a};d.fromValues=function(a,d,c,k,h,q,e,l,g){var n=new m.ARRAY_TYPE(9);return n[0]=a,n[1]=d,n[2]=c,n[3]=k,n[4]=h,n[5]=q,n[6]=e,n[7]=l,n[8]=g,n};d.set=function(a,d,c,k,h,m,e,l,g,n){return a[0]=d,a[1]=c,a[2]=k,a[3]=h,a[4]=m,a[5]=e,a[6]=l,a[7]=g,a[8]=n,a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.transpose=
function(a,d){if(a===d){var c=d[1],k=d[2],h=d[5];a[1]=d[3];a[2]=d[6];a[3]=c;a[5]=d[7];a[6]=k;a[7]=h}else a[0]=d[0],a[1]=d[3],a[2]=d[6],a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=d[5],a[8]=d[8];return a};d.invert=function(a,d){var c=d[0],k=d[1],h=d[2],m=d[3],e=d[4],l=d[5],g=d[6],n=d[7],p=d[8],q=p*e-l*n,r=-p*m+l*g,u=n*m-e*g,G=c*q+k*r+h*u;return G?(G=1/G,a[0]=q*G,a[1]=(-p*k+h*n)*G,a[2]=(l*k-h*e)*G,a[3]=r*G,a[4]=(p*c-h*g)*G,a[5]=(-l*c+h*m)*G,a[6]=u*G,a[7]=(-n*c+k*g)*G,a[8]=(e*c-k*m)*G,a):null};d.adjoint=
function(a,d){var c=d[0],k=d[1],h=d[2],m=d[3],e=d[4],l=d[5],g=d[6],n=d[7],p=d[8];return a[0]=e*p-l*n,a[1]=h*n-k*p,a[2]=k*l-h*e,a[3]=l*g-m*p,a[4]=c*p-h*g,a[5]=h*m-c*l,a[6]=m*n-e*g,a[7]=k*g-c*n,a[8]=c*e-k*m,a};d.determinant=function(a){var d=a[3],c=a[4],k=a[5],h=a[6],m=a[7],e=a[8];return a[0]*(e*c-k*m)+a[1]*(-e*d+k*h)+a[2]*(m*d-c*h)};d.multiply=r;d.translate=function(a,d,c){var k=d[0],h=d[1],m=d[2],e=d[3],l=d[4],g=d[5],n=d[6],p=d[7];d=d[8];var q=c[0];c=c[1];return a[0]=k,a[1]=h,a[2]=m,a[3]=e,a[4]=l,
a[5]=g,a[6]=q*k+c*e+n,a[7]=q*h+c*l+p,a[8]=q*m+c*g+d,a};d.rotate=function(a,d,c){var k=d[0],h=d[1],m=d[2],e=d[3],l=d[4],g=d[5],n=d[6],p=d[7];d=d[8];var q=Math.sin(c);c=Math.cos(c);return a[0]=c*k+q*e,a[1]=c*h+q*l,a[2]=c*m+q*g,a[3]=c*e-q*k,a[4]=c*l-q*h,a[5]=c*g-q*m,a[6]=n,a[7]=p,a[8]=d,a};d.scale=function(a,d,c){var k=c[0];c=c[1];return a[0]=k*d[0],a[1]=k*d[1],a[2]=k*d[2],a[3]=c*d[3],a[4]=c*d[4],a[5]=c*d[5],a[6]=d[6],a[7]=d[7],a[8]=d[8],a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,
a[3]=0,a[4]=1,a[5]=0,a[6]=d[0],a[7]=d[1],a[8]=1,a};d.fromRotation=function(a,d){var c=Math.sin(d),k=Math.cos(d);return a[0]=k,a[1]=c,a[2]=0,a[3]=-c,a[4]=k,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=0,a[4]=d[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a};d.fromMat2d=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=0,a[3]=d[2],a[4]=d[3],a[5]=0,a[6]=d[4],a[7]=d[5],a[8]=1,a};d.fromQuat=function(a,d){var c=d[0],k=d[1],h=d[2],m=d[3],e=c+c,l=k+k,g=h+h,c=c*e,n=k*e,k=k*
l,p=h*e,q=h*l,h=h*g,e=m*e,l=m*l,m=m*g;return a[0]=1-k-h,a[3]=n-m,a[6]=p+l,a[1]=n+m,a[4]=1-c-h,a[7]=q-e,a[2]=p-l,a[5]=q+e,a[8]=1-c-k,a};d.normalFromMat4=function(a,d){var c=d[0],k=d[1],h=d[2],m=d[3],e=d[4],l=d[5],g=d[6],n=d[7],p=d[8],q=d[9],r=d[10],u=d[11],G=d[12],x=d[13],v=d[14],T=d[15],I=c*l-k*e,aa=c*g-h*e,E=c*n-m*e,A=k*g-h*l,ca=k*n-m*l,H=h*n-m*g,F=p*x-q*G,D=p*v-r*G,p=p*T-u*G,ga=q*v-r*x,q=q*T-u*x,r=r*T-u*v;return(u=I*r-aa*q+E*ga+A*p-ca*D+H*F)?(u=1/u,a[0]=(l*r-g*q+n*ga)*u,a[1]=(g*p-e*r-n*D)*u,a[2]=
(e*q-l*p+n*F)*u,a[3]=(h*q-k*r-m*ga)*u,a[4]=(c*r-h*p+m*D)*u,a[5]=(k*p-c*q-m*F)*u,a[6]=(x*H-v*ca+T*A)*u,a[7]=(v*E-G*H-T*aa)*u,a[8]=(G*ca-x*E+T*I)*u,a):null};d.projection=function(a,d,c){return a[0]=2/d,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/c,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a};d.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],
2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a[6]=d[6]+c[6],a[7]=d[7]+c[7],a[8]=d[8]+c[8],a};d.subtract=q;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a[6]=d[6]*c,a[7]=d[7]*c,a[8]=d[8]*c,a};d.multiplyScalarAndAdd=function(a,d,c,k){return a[0]=d[0]+c[0]*k,a[1]=d[1]+c[1]*k,a[2]=d[2]+c[2]*
k,a[3]=d[3]+c[3]*k,a[4]=d[4]+c[4]*k,a[5]=d[5]+c[5]*k,a[6]=d[6]+c[6]*k,a[7]=d[7]+c[7]*k,a[8]=d[8]+c[8]*k,a};d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]&&a[6]===d[6]&&a[7]===d[7]&&a[8]===d[8]};d.equals=function(a,d){var c=a[0],k=a[1],h=a[2],q=a[3],e=a[4],l=a[5],g=a[6],n=a[7],p=a[8],r=d[0],y=d[1],u=d[2],G=d[3],x=d[4],v=d[5],T=d[6],I=d[7],aa=d[8];return Math.abs(c-r)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(r))&&Math.abs(k-y)<=m.EPSILON*
Math.max(1,Math.abs(k),Math.abs(y))&&Math.abs(h-u)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(q-G)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(e-x)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(l-v)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(g-T)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(T))&&Math.abs(n-I)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(p-aa)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(aa))};var m=function(a){if(a&&a.__esModule)return a;
var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d["default"]=a,d}(h(0));d.mul=r;d.sub=q},function(a,d,h){function r(){var a=new B.ARRAY_TYPE(2);return B.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0),a}function q(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function m(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a}function b(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a}function f(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)}function c(a,b){var c=
b[0]-a[0],d=b[1]-a[1];return c*c+d*d}function k(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function z(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.forEach=d.sqrLen=d.sqrDist=d.dist=d.div=d.mul=d.sub=d.len=void 0;d.create=r;d.clone=function(a){var b=new B.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b};d.fromValues=function(a,b){var c=new B.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c};d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a};d.set=function(a,b,c){return a[0]=
b,a[1]=c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a};d.subtract=q;d.multiply=m;d.divide=b;d.ceil=function(a,b){return a[0]=Math.ceil(b[0]),a[1]=Math.ceil(b[1]),a};d.floor=function(a,b){return a[0]=Math.floor(b[0]),a[1]=Math.floor(b[1]),a};d.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a};d.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a};d.round=function(a,b){return a[0]=Math.round(b[0]),a[1]=Math.round(b[1]),a};d.scale=
function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a};d.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a};d.distance=f;d.squaredDistance=c;d.length=k;d.squaredLength=z;d.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a};d.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a};d.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,c){b=b[0]*c[1]-b[1]*
c[0];return a[0]=a[1]=0,a[2]=b,a};d.lerp=function(a,b,c,d){var f=b[0];b=b[1];return a[0]=f+d*(c[0]-f),a[1]=b+d*(c[1]-b),a};d.random=function(a,b){b=b||1;var c=2*B.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a};d.transformMat2=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b,a[1]=c[1]*d+c[3]*b,a};d.transformMat2d=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[2]*b+c[4],a[1]=c[1]*d+c[3]*b+c[5],a};d.transformMat3=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*
d+c[3]*b+c[6],a[1]=c[1]*d+c[4]*b+c[7],a};d.transformMat4=function(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a};d.rotate=function(a,b,c,d){var f=b[0]-c[0];b=b[1]-c[1];var k=Math.sin(d);d=Math.cos(d);return a[0]=f*d-b*k+c[0],a[1]=f*k+b*d+c[1],a};d.angle=function(a,b){var c=a[0],d=a[1],f=b[0],k=b[1],h=c*c+d*d;0<h&&(h=1/Math.sqrt(h));var m=f*f+k*k;0<m&&(m=1/Math.sqrt(m));c=(c*f+d*k)*h*m;return 1<c?0:-1>c?Math.PI:Math.acos(c)};d.str=function(a){return"vec2("+a[0]+
", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.equals=function(a,b){var c=a[0],d=a[1],f=b[0],k=b[1];return Math.abs(c-f)<=B.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-k)<=B.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))};var B=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(h(0));d.len=k;d.sub=q;d.mul=m;d.div=b;d.dist=f;d.sqrDist=c;d.sqrLen=z;d.forEach=
function(){var a=r();return function(b,c,d,f,k,h){var m=void 0,q=void 0;c||(c=2);d||(d=0);q=f?Math.min(f*c+d,b.length):b.length;for(m=d;m<q;m+=c)a[0]=b[m],a[1]=b[m+1],k(a,a,h),b[m]=a[0],b[m+1]=a[1];return b}}()},function(a,d,h){function r(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function q(a,b,c){var d=.5*c[0],f=.5*c[1];c=.5*c[2];var k=b[0],h=b[1],m=b[2];b=b[3];return a[0]=k,a[1]=h,a[2]=m,a[3]=
b,a[4]=d*b+f*m-c*h,a[5]=f*b+c*k-d*m,a[6]=c*b+d*h-f*k,a[7]=-d*k-f*h-c*m,a}function m(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a}function b(a,b,c){var d=b[0],f=b[1],k=b[2],h=b[3],m=c[4],q=c[5],r=c[6],u=c[7],z=b[4],B=b[5],G=b[6];b=b[7];var E=c[0],A=c[1],T=c[2];c=c[3];return a[0]=d*c+h*E+f*T-k*A,a[1]=f*c+h*A+k*E-d*T,a[2]=k*c+h*T+d*A-f*E,a[3]=h*c-d*E-f*A-k*T,a[4]=d*u+h*m+f*r-k*q+z*c+b*E+B*T-G*A,a[5]=f*u+h*q+k*m-d*r+B*c+b*A+G*E-z*T,a[6]=k*u+h*r+d*q-f*m+
G*c+b*T+z*A-B*E,a[7]=h*u-d*m-f*q-k*r+b*c-z*E-B*A-G*T,a}Object.defineProperty(d,"__esModule",{value:!0});d.sqrLen=d.squaredLength=d.len=d.length=d.dot=d.mul=d.setReal=d.getReal=void 0;d.create=function(){var a=new f.ARRAY_TYPE(8);f.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);return a[3]=1,a};d.clone=function(a){var b=new f.ARRAY_TYPE(8);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b};d.fromValues=function(a,b,c,d,k,h,m,q){var r=
new f.ARRAY_TYPE(8);return r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=k,r[5]=h,r[6]=m,r[7]=q,r};d.fromRotationTranslationValues=function(a,b,c,d,k,h,m){var q=new f.ARRAY_TYPE(8);q[0]=a;q[1]=b;q[2]=c;q[3]=d;k*=.5;h*=.5;m*=.5;return q[4]=k*d+h*c-m*b,q[5]=h*d+m*a-k*c,q[6]=m*d+k*b-h*a,q[7]=-k*a-h*b-m*c,q};d.fromRotationTranslation=q;d.fromTranslation=function(a,b){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=.5*b[0],a[5]=.5*b[1],a[6]=.5*b[2],a[7]=0,a};d.fromRotation=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],
a[3]=b[3],a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.fromMat4=function(a,b){var d=c.create();k.getRotation(d,b);var h=new f.ARRAY_TYPE(3);return k.getTranslation(h,b),q(a,d,h),a};d.copy=m;d.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a};d.set=function(a,b,c,d,f,k,h,m,q){return a[0]=b,a[1]=c,a[2]=d,a[3]=f,a[4]=k,a[5]=h,a[6]=m,a[7]=q,a};d.getDual=function(a,b){return a[0]=b[4],a[1]=b[5],a[2]=b[6],a[3]=b[7],a};d.setDual=function(a,b){return a[4]=b[0],a[5]=b[1],a[6]=b[2],
a[7]=b[3],a};d.getTranslation=function(a,b){var c=b[4],d=b[5],f=b[6],k=b[7],h=-b[0],m=-b[1],q=-b[2],r=b[3];return a[0]=2*(c*r+k*h+d*q-f*m),a[1]=2*(d*r+k*m+f*h-c*q),a[2]=2*(f*r+k*q+c*m-d*h),a};d.translate=function(a,b,c){var d=b[0],f=b[1],k=b[2],h=b[3],m=.5*c[0],q=.5*c[1];c=.5*c[2];var r=b[4],u=b[5],z=b[6];b=b[7];return a[0]=d,a[1]=f,a[2]=k,a[3]=h,a[4]=h*m+f*c-k*q+r,a[5]=h*q+k*m-d*c+u,a[6]=h*c+d*q-f*m+z,a[7]=-d*m-f*q-k*c+b,a};d.rotateX=function(a,b,d){var f=-b[0],k=-b[1],h=-b[2],m=b[3],q=b[4],r=b[5],
u=b[6],v=b[7],z=q*m+v*f+r*h-u*k,B=r*m+v*k+u*f-q*h,G=u*m+v*h+q*k-r*f,q=v*m-q*f-r*k-u*h;return c.rotateX(a,b,d),f=a[0],k=a[1],h=a[2],m=a[3],a[4]=z*m+q*f+B*h-G*k,a[5]=B*m+q*k+G*f-z*h,a[6]=G*m+q*h+z*k-B*f,a[7]=q*m-z*f-B*k-G*h,a};d.rotateY=function(a,b,d){var f=-b[0],k=-b[1],h=-b[2],m=b[3],q=b[4],r=b[5],u=b[6],v=b[7],z=q*m+v*f+r*h-u*k,B=r*m+v*k+u*f-q*h,G=u*m+v*h+q*k-r*f,q=v*m-q*f-r*k-u*h;return c.rotateY(a,b,d),f=a[0],k=a[1],h=a[2],m=a[3],a[4]=z*m+q*f+B*h-G*k,a[5]=B*m+q*k+G*f-z*h,a[6]=G*m+q*h+z*k-B*f,
a[7]=q*m-z*f-B*k-G*h,a};d.rotateZ=function(a,b,d){var f=-b[0],k=-b[1],h=-b[2],m=b[3],q=b[4],r=b[5],u=b[6],v=b[7],z=q*m+v*f+r*h-u*k,B=r*m+v*k+u*f-q*h,G=u*m+v*h+q*k-r*f,q=v*m-q*f-r*k-u*h;return c.rotateZ(a,b,d),f=a[0],k=a[1],h=a[2],m=a[3],a[4]=z*m+q*f+B*h-G*k,a[5]=B*m+q*k+G*f-z*h,a[6]=G*m+q*h+z*k-B*f,a[7]=q*m-z*f-B*k-G*h,a};d.rotateByQuatAppend=function(a,b,c){var d=c[0],f=c[1],k=c[2];c=c[3];var h=b[0],m=b[1],q=b[2],r=b[3];return a[0]=h*c+r*d+m*k-q*f,a[1]=m*c+r*f+q*d-h*k,a[2]=q*c+r*k+h*f-m*d,a[3]=r*
c-h*d-m*f-q*k,h=b[4],m=b[5],q=b[6],r=b[7],a[4]=h*c+r*d+m*k-q*f,a[5]=m*c+r*f+q*d-h*k,a[6]=q*c+r*k+h*f-m*d,a[7]=r*c-h*d-m*f-q*k,a};d.rotateByQuatPrepend=function(a,b,c){var d=b[0],f=b[1],k=b[2];b=b[3];var h=c[0],m=c[1],q=c[2],r=c[3];return a[0]=d*r+b*h+f*q-k*m,a[1]=f*r+b*m+k*h-d*q,a[2]=k*r+b*q+d*m-f*h,a[3]=b*r-d*h-f*m-k*q,h=c[4],m=c[5],q=c[6],r=c[7],a[4]=d*r+b*h+f*q-k*m,a[5]=f*r+b*m+k*h-d*q,a[6]=k*r+b*q+d*m-f*h,a[7]=b*r-d*h-f*m-k*q,a};d.rotateAroundAxis=function(a,b,c,d){if(Math.abs(d)<f.EPSILON)return m(a,
b);var k=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);d*=.5;var h=Math.sin(d),q=h*c[0]/k,r=h*c[1]/k;c=h*c[2]/k;d=Math.cos(d);var k=b[0],h=b[1],u=b[2],x=b[3];a[0]=k*d+x*q+h*c-u*r;a[1]=h*d+x*r+u*q-k*c;a[2]=u*d+x*c+k*r-h*q;a[3]=x*d-k*q-h*r-u*c;k=b[4];h=b[5];u=b[6];b=b[7];return a[4]=k*d+b*q+h*c-u*r,a[5]=h*d+b*r+u*q-k*c,a[6]=u*d+b*c+k*r-h*q,a[7]=b*d-k*q-h*r-u*c,a};d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a[4]=b[4]+c[4],a[5]=b[5]+c[5],a[6]=b[6]+c[6],a[7]=b[7]+
c[7],a};d.multiply=b;d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a[4]=b[4]*c,a[5]=b[5]*c,a[6]=b[6]*c,a[7]=b[7]*c,a};d.lerp=function(a,b,c,d){var f=1-d;0>z(b,c)&&(d=-d);return a[0]=b[0]*f+c[0]*d,a[1]=b[1]*f+c[1]*d,a[2]=b[2]*f+c[2]*d,a[3]=b[3]*f+c[3]*d,a[4]=b[4]*f+c[4]*d,a[5]=b[5]*f+c[5]*d,a[6]=b[6]*f+c[6]*d,a[7]=b[7]*f+c[7]*d,a};d.invert=function(a,b){var c=B(b);return a[0]=-b[0]/c,a[1]=-b[1]/c,a[2]=-b[2]/c,a[3]=b[3]/c,a[4]=-b[4]/c,a[5]=-b[5]/c,a[6]=-b[6]/c,a[7]=
b[7]/c,a};d.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a[4]=-b[4],a[5]=-b[5],a[6]=-b[6],a[7]=b[7],a};d.normalize=function(a,b){var c=B(b);if(0<c){var c=Math.sqrt(c),d=b[0]/c,f=b[1]/c,k=b[2]/c,h=b[3]/c,m=b[4],q=b[5],r=b[6],u=b[7],z=d*m+f*q+k*r+h*u;a[0]=d;a[1]=f;a[2]=k;a[3]=h;a[4]=(m-d*z)/c;a[5]=(q-f*z)/c;a[6]=(r-k*z)/c;a[7]=(u-h*z)/c}return a};d.str=function(a){return"quat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+")"};d.exactEquals=
function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};d.equals=function(a,b){var c=a[0],d=a[1],k=a[2],h=a[3],m=a[4],q=a[5],r=a[6],u=a[7],v=b[0],z=b[1],B=b[2],G=b[3],E=b[4],A=b[5],T=b[6],H=b[7];return Math.abs(c-v)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(d-z)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(k-B)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(B))&&Math.abs(h-G)<=f.EPSILON*Math.max(1,Math.abs(h),
Math.abs(G))&&Math.abs(m-E)<=f.EPSILON*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(q-A)<=f.EPSILON*Math.max(1,Math.abs(q),Math.abs(A))&&Math.abs(r-T)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(u-H)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(H))};var f=r(h(0)),c=r(h(3)),k=r(h(4));d.getReal=c.copy;d.setReal=c.copy;d.mul=b;var z=d.dot=c.dot;a=d.length=c.length;var B=(d.len=a,d.squaredLength=c.squaredLength);d.sqrLen=B},function(a,d,h){function r(a,d,c){var k=d[0],h=d[1],m=d[2],e=d[3],
l=d[4];d=d[5];var g=c[0],n=c[1],p=c[2],q=c[3],u=c[4];c=c[5];return a[0]=k*g+m*n,a[1]=h*g+e*n,a[2]=k*p+m*q,a[3]=h*p+e*q,a[4]=k*u+m*c+l,a[5]=h*u+e*c+d,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a[4]=d[4]-c[4],a[5]=d[5]-c[5],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(6);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[4]=0,a[5]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new m.ARRAY_TYPE(6);
return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[4]=a[4],d[5]=a[5],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=d[4],a[5]=d[5],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a};d.fromValues=function(a,d,c,k,h,q){var e=new m.ARRAY_TYPE(6);return e[0]=a,e[1]=d,e[2]=c,e[3]=k,e[4]=h,e[5]=q,e};d.set=function(a,d,c,k,h,m,e){return a[0]=d,a[1]=c,a[2]=k,a[3]=h,a[4]=m,a[5]=e,a};d.invert=function(a,d){var c=d[0],k=d[1],h=d[2],m=d[3],e=d[4],l=d[5],g=
c*m-k*h;return g?(g=1/g,a[0]=m*g,a[1]=-k*g,a[2]=-h*g,a[3]=c*g,a[4]=(h*l-m*e)*g,a[5]=(k*e-c*l)*g,a):null};d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};d.multiply=r;d.rotate=function(a,d,c){var k=d[0],h=d[1],m=d[2],e=d[3],l=d[4];d=d[5];var g=Math.sin(c);c=Math.cos(c);return a[0]=k*c+m*g,a[1]=h*c+e*g,a[2]=k*-g+m*c,a[3]=h*-g+e*c,a[4]=l,a[5]=d,a};d.scale=function(a,d,c){var k=d[1],h=d[2],m=d[3],e=d[4],l=d[5],g=c[0];c=c[1];return a[0]=d[0]*g,a[1]=k*g,a[2]=h*c,a[3]=m*c,a[4]=e,a[5]=l,a};d.translate=
function(a,d,c){var k=d[0],h=d[1],m=d[2],e=d[3],l=d[4];d=d[5];var g=c[0];c=c[1];return a[0]=k,a[1]=h,a[2]=m,a[3]=e,a[4]=k*g+m*c+l,a[5]=h*g+e*c+d,a};d.fromRotation=function(a,d){var c=Math.sin(d),k=Math.cos(d);return a[0]=k,a[1]=c,a[2]=-c,a[3]=k,a[4]=0,a[5]=0,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],a[4]=0,a[5]=0,a};d.fromTranslation=function(a,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=d[0],a[5]=d[1],a};d.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+
a[3]+", "+a[4]+", "+a[5]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a[4]=d[4]+c[4],a[5]=d[5]+c[5],a};d.subtract=q;d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a[4]=d[4]*c,a[5]=d[5]*c,a};d.multiplyScalarAndAdd=function(a,d,c,k){return a[0]=d[0]+c[0]*k,a[1]=d[1]+c[1]*
k,a[2]=d[2]+c[2]*k,a[3]=d[3]+c[3]*k,a[4]=d[4]+c[4]*k,a[5]=d[5]+c[5]*k,a};d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]&&a[4]===d[4]&&a[5]===d[5]};d.equals=function(a,d){var c=a[0],k=a[1],h=a[2],q=a[3],e=a[4],l=a[5],g=d[0],n=d[1],p=d[2],r=d[3],u=d[4],C=d[5];return Math.abs(c-g)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(k-n)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(n))&&Math.abs(h-p)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(q-
r)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(r))&&Math.abs(e-u)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(l-C)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d["default"]=a,d}(h(0));d.mul=r;d.sub=q},function(a,d,h){function r(a,d,c){var k=d[0],h=d[1],m=d[2];d=d[3];var e=c[0],l=c[1],g=c[2];c=c[3];return a[0]=k*e+m*l,a[1]=h*e+d*l,a[2]=k*g+m*
c,a[3]=h*g+d*c,a}function q(a,d,c){return a[0]=d[0]-c[0],a[1]=d[1]-c[1],a[2]=d[2]-c[2],a[3]=d[3]-c[3],a}Object.defineProperty(d,"__esModule",{value:!0});d.sub=d.mul=void 0;d.create=function(){var a=new m.ARRAY_TYPE(4);m.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0);return a[0]=1,a[3]=1,a};d.clone=function(a){var d=new m.ARRAY_TYPE(4);return d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d};d.copy=function(a,d){return a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a};d.identity=function(a){return a[0]=1,a[1]=0,a[2]=
0,a[3]=1,a};d.fromValues=function(a,d,c,k){var h=new m.ARRAY_TYPE(4);return h[0]=a,h[1]=d,h[2]=c,h[3]=k,h};d.set=function(a,d,c,k,h){return a[0]=d,a[1]=c,a[2]=k,a[3]=h,a};d.transpose=function(a,d){if(a===d){var c=d[1];a[1]=d[2];a[2]=c}else a[0]=d[0],a[1]=d[2],a[2]=d[1],a[3]=d[3];return a};d.invert=function(a,d){var c=d[0],k=d[1],h=d[2],m=d[3],e=c*m-h*k;return e?(e=1/e,a[0]=m*e,a[1]=-k*e,a[2]=-h*e,a[3]=c*e,a):null};d.adjoint=function(a,d){var c=d[0];return a[0]=d[3],a[1]=-d[1],a[2]=-d[2],a[3]=c,a};
d.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};d.multiply=r;d.rotate=function(a,d,c){var k=d[0],h=d[1],m=d[2];d=d[3];var e=Math.sin(c);c=Math.cos(c);return a[0]=k*c+m*e,a[1]=h*c+d*e,a[2]=k*-e+m*c,a[3]=h*-e+d*c,a};d.scale=function(a,d,c){var k=d[1],h=d[2],m=d[3],e=c[0];c=c[1];return a[0]=d[0]*e,a[1]=k*e,a[2]=h*c,a[3]=m*c,a};d.fromRotation=function(a,d){var c=Math.sin(d),k=Math.cos(d);return a[0]=k,a[1]=c,a[2]=-c,a[3]=k,a};d.fromScaling=function(a,d){return a[0]=d[0],a[1]=0,a[2]=0,a[3]=d[1],
a};d.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};d.LDU=function(a,d,c,k){return a[2]=k[2]/k[0],c[0]=k[0],c[1]=k[1],c[3]=k[3]-a[2]*c[1],[a,d,c]};d.add=function(a,d,c){return a[0]=d[0]+c[0],a[1]=d[1]+c[1],a[2]=d[2]+c[2],a[3]=d[3]+c[3],a};d.subtract=q;d.exactEquals=function(a,d){return a[0]===d[0]&&a[1]===d[1]&&a[2]===d[2]&&a[3]===d[3]};d.equals=function(a,d){var c=a[0],
k=a[1],h=a[2],q=a[3],e=d[0],l=d[1],g=d[2],n=d[3];return Math.abs(c-e)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(k-l)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(l))&&Math.abs(h-g)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(q-n)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(n))};d.multiplyScalar=function(a,d,c){return a[0]=d[0]*c,a[1]=d[1]*c,a[2]=d[2]*c,a[3]=d[3]*c,a};d.multiplyScalarAndAdd=function(a,d,c,k){return a[0]=d[0]+c[0]*k,a[1]=d[1]+c[1]*k,a[2]=d[2]+c[2]*k,a[3]=d[3]+
c[3]*k,a};var m=function(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d["default"]=a,d}(h(0));d.mul=r;d.sub=q},function(a,d,h){function r(a){if(a&&a.__esModule)return a;var c={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b]);return c["default"]=a,c}Object.defineProperty(d,"__esModule",{value:!0});d.vec4=d.vec3=d.vec2=d.quat2=d.quat=d.mat4=d.mat3=d.mat2d=d.mat2=d.glMatrix=void 0;a=r(h(0));
var q=r(h(9)),m=r(h(8)),b=r(h(5)),f=r(h(4)),c=r(h(3)),k=r(h(7)),z=r(h(6)),B=r(h(2));h=r(h(1));d.glMatrix=a;d.mat2=q;d.mat2d=m;d.mat3=b;d.mat4=f;d.quat=c;d.quat2=k;d.vec2=z;d.vec3=B;d.vec4=h}])})},{}],75:[function(h,r,G){(function(a){function d(){m.forEach(function(a){b[q[a]]=!1})}function G(a){b[q[a.keyCode]]=!1}function u(a){b[q[a.keyCode]]=!0}var q=h("vkey"),m=Object.keys(q),b={};d();r.exports=function(a){return a?b[a]:b};a.browser&&(window.addEventListener("keydown",u,!1),window.addEventListener("keyup",
G,!1),window.addEventListener("blur",d,!1))}).call(this,h("_process"))},{_process:77,vkey:79}],76:[function(h,r,G){function a(a,b,d){this.rotation=a;this.center=b;this.distance=d}function d(a,b){var d=b[0],f=b[1],d=d*d+f*f;1<d&&(d=1);a[0]=-b[0];a[1]=b[1];a[2]=b[2]||Math.sqrt(1-d);a[3]=0}h=h("gl-matrix");var T=h.vec3,u=h.mat3,q=h.mat4,m=h.quat,b=new Float32Array(16),f=new Float32Array(16);h=a.prototype;h.view=function(a){a||(a=q.create());f[0]=f[1]=0;f[2]=-this.distance;q.fromRotationTranslation(a,
m.conjugate(b,this.rotation),f);q.translate(a,a,T.negate(b,this.center));return a};h.lookAt=function(a,d,f){q.lookAt(b,a,d,f);u.fromMat4(b,b);m.fromMat3(this.rotation,b);T.copy(this.center,d);this.distance=T.distance(a,d)};h.pan=function(a){var d=this.distance;b[0]=-d*(a[0]||0);b[1]=d*(a[1]||0);b[2]=d*(a[2]||0);T.transformQuat(b,b,this.rotation);T.add(this.center,this.center,b)};h.zoom=function(a){this.distance+=a;0>this.distance&&(this.distance=0)};h.rotate=function(a,k){d(b,a);d(f,k);m.invert(f,
f);m.multiply(b,b,f);1E-6>m.length(b)||(m.multiply(this.rotation,this.rotation,b),m.normalize(this.rotation,this.rotation))};r.exports=function(c,b,d){c=c||[0,0,-1];b=b||[0,0,0];d=d||[0,1,0];var f=new a(m.create(),T.create(),1);f.lookAt(c,b,d);return f}},{"gl-matrix":74}],77:[function(h,r,G){function a(){throw Error("setTimeout has not been defined");}function d(){throw Error("clearTimeout has not been defined");}function T(b){if(c===setTimeout)return setTimeout(b,0);if((c===a||!c)&&setTimeout)return c=
setTimeout,setTimeout(b,0);try{return c(b,0)}catch(d){try{return c.call(null,b,0)}catch(e){return c.call(this,b,0)}}}function u(a){if(k===clearTimeout)return clearTimeout(a);if((k===d||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(b){try{return k.call(null,a)}catch(c){return k.call(this,a)}}}function q(){B&&e&&(B=!1,e.length?z=e.concat(z):l=-1,z.length&&m())}function m(){if(!B){var a=T(q);B=!0;for(var b=z.length;b;){e=z;for(z=[];++l<b;)e&&e[l].run();l=-1;b=z.length}e=
null;B=!1;u(a)}}function b(a,b){this.fun=a;this.array=b}function f(){}h=r.exports={};var c,k;try{c="function"===typeof setTimeout?setTimeout:a}catch(g){c=a}try{k="function"===typeof clearTimeout?clearTimeout:d}catch(g){k=d}var z=[],B=!1,e,l=-1;h.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];z.push(new b(a,c));1!==z.length||B||T(m)};b.prototype.run=function(){this.fun.apply(null,this.array)};h.title="browser";h.browser=
!0;h.env={};h.argv=[];h.version="";h.versions={};h.on=f;h.addListener=f;h.once=f;h.off=f;h.removeListener=f;h.removeAllListeners=f;h.emit=f;h.prependListener=f;h.prependOnceListener=f;h.listeners=function(a){return[]};h.binding=function(a){throw Error("process.binding is not supported");};h.cwd=function(){return"/"};h.chdir=function(a){throw Error("process.chdir is not supported");};h.umask=function(){return 0}},{}],78:[function(h,r,G){var a=h("events/"),d=h("wheel");r.exports=function(h,r){function q(){m[0]=
m[1]=m[2]=0}var m=new a;m.flush=q;q();if("undefined"===typeof window)return m;h=h||window;d(h,function(a){var d=1===a.deltaMode?12:1;m[0]+=d*(a.deltaX||0);m[1]+=d*(a.deltaY||0);m[2]+=d*(a.deltaZ||0);m.emit("scroll",m);r&&a.preventDefault&&(a.preventDefault(),a.stopPropagation&&a.stopPropagation())},!1);return m}},{"events/":43,wheel:80}],79:[function(h,r,G){var a="undefined"!==typeof window?window.navigator.userAgent:"";h=/OS X/.test(a);G=/Opera/.test(a);a=!/like Gecko/.test(a)&&!G;h=r.exports={0:h?
"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",
40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:h?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",
170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:h&&a?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:G?"`":"<unicode>",246:"<attention>",247:"<crsel>",
248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(r=58;65>r;++r)h[r]=String.fromCharCode(r);for(r=48;58>r;++r)h[r]=r-48+"";for(r=65;91>r;++r)h[r]=String.fromCharCode(r);for(r=96;106>r;++r)h[r]="<num-"+(r-96)+">";for(r=112;136>r;++r)h[r]="F"+(r-111)},{}],80:[function(h,r,G){function a(a,h,b,f){a[T](d+h,"wheel"==u?b:function(a){!a&&(a=window.event);var d={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==
a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==u?(d.deltaY=-.025*a.wheelDelta,a.wheelDeltaX&&(d.deltaX=-.025*a.wheelDeltaX)):d.deltaY=a.detail;return b(d)},f||!1)}r.exports=function(d,h,b){a(d,u,h,b);"DOMMouseScroll"==u&&a(d,"MozMousePixelScroll",h,b)};var d="",T,u;window.addEventListener?T="addEventListener":(T="attachEvent",d="on");u="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":
"DOMMouseScroll"},{}],81:[function(h,r,G){function a(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var d=h("./lib/util/check"),T=h("./lib/util/extend"),u=h("./lib/dynamic"),q=h("./lib/util/raf"),m=h("./lib/util/clock"),b=h("./lib/strings"),f=h("./lib/webgl"),c=h("./lib/extension"),k=h("./lib/limits"),z=h("./lib/buffer"),B=h("./lib/elements"),e=h("./lib/texture"),l=h("./lib/renderbuffer"),g=h("./lib/framebuffer"),n=h("./lib/attribute"),p=h("./lib/shader"),w=h("./lib/read"),y=h("./lib/core"),
C=h("./lib/stats"),Ea=h("./lib/timer");r.exports=function(h){function r(){if(0===xa.length)O&&O.update(),Qa=null;else{Qa=q.next(r);D();for(var a=xa.length-1;0<=a;--a){var b=xa[a];b&&b(Q,null,0)}ea.flush();O&&O.update()}}function G(){!Qa&&0<xa.length&&(Qa=q.next(r))}function I(){Qa&&(q.cancel(r),Qa=null)}function aa(a){a.preventDefault();ma=!0;I();ka.forEach(function(a){a()})}function E(a){ea.getError();ma=!1;ta.restore();ba.restore();pa.restore();W.restore();la.restore();ha.restore();K.restore();
O&&O.restore();Ba.procs.refresh();G();oa.forEach(function(a){a()})}function A(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(u.isDynamic(f))e[b]=u.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(u.isDynamic(f[g])){e[b]=u.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}d(!!a,"invalid args to regl({...})");d.type(a,"object","invalid args to regl({...})");var e=b(a.context||{},!0),f=
b(a.uniforms||{},!0),g=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=T({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var k={gpuTime:0,cpuTime:0,
count:0},h=Ba.compile(a,g,f,e,k),l=h.draw,m=h.batch,n=h.scope,p=[];return T(function(a,b){var e;ma&&d.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(e=0;e<a;++e)n.call(this,null,b,e);else if(Array.isArray(a))for(e=0;e<a.length;++e)n.call(this,a[e],b,e);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return l.call(this,
a)},{stats:k,destroy:function(){h.destroy()}})}function ca(a,b){var c=0;Ba.procs.poll();var e=b.color;e&&(ea.clearColor(+e[0]||0,+e[1]||0,+e[2]||0,+e[3]||0),c|=16384);"depth"in b&&(ea.clearDepth(+b.depth),c|=256);"stencil"in b&&(ea.clearStencil(b.stencil|0),c|=1024);d(!!c,"called regl.clear with no buffer specified");ea.clear(c)}function H(b){d.type(b,"function","regl.frame() callback must be a function");xa.push(b);G();return{cancel:function(){function c(){var b=a(xa,c);xa[b]=xa[xa.length-1];--xa.length;
0>=xa.length&&I()}var e=a(xa,b);d(0<=e,"cannot cancel a frame twice");xa[e]=c}}}function F(){var a=wa.viewport,b=wa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;Q.viewportWidth=Q.framebufferWidth=Q.drawingBufferWidth=a[2]=b[2]=ea.drawingBufferWidth;Q.viewportHeight=Q.framebufferHeight=Q.drawingBufferHeight=a[3]=b[3]=ea.drawingBufferHeight}function D(){Q.tick+=1;Q.time=t();F();Ba.procs.poll()}function ga(){W.refresh();F();Ba.procs.refresh();O&&O.update()}function t(){return(m()-M)/1E3}console.log("REGL args are:",
h);h=f(h);console.log("REGL configs are:",h);if(!h)return null;var ea=h.gl,L=ea.getContextAttributes(),ma=ea.isContextLost(),ta=c(ea,h);if(!ta)return null;var S=b(),V=C(),R=ta.extensions,O=Ea(ea,R),M=m(),N=ea.drawingBufferWidth,P=ea.drawingBufferHeight,Q={tick:0,time:0,viewportWidth:N,viewportHeight:P,framebufferWidth:N,framebufferHeight:P,drawingBufferWidth:N,drawingBufferHeight:P,pixelRatio:h.pixelRatio},N={elements:null,primitive:4,count:-1,offset:0,instances:-1},ra=k(ea,R),pa=z(ea,V,h,function(a){return K.destroyBuffer(a)}),
J=B(ea,R,pa,V),K=n(ea,R,ra,V,pa,J,N),ba=p(ea,S,V,h),W=e(ea,R,ra,function(){Ba.procs.poll()},Q,V,h),la=l(ea,R,ra,V,h),ha=g(ea,R,ra,W,la,V),Ba=y(ea,S,R,ra,pa,J,W,ha,{},K,ba,N,Q,O,h),S=w(ea,ha,Ba.procs.poll,Q,L,R,ra),wa=Ba.next,da=ea.canvas,xa=[],ka=[],oa=[],Aa=[h.onDestroy],Qa=null;da&&(da.addEventListener("webglcontextlost",aa,!1),da.addEventListener("webglcontextrestored",E,!1));var Ja=ha.setFBO=A({framebuffer:u.define.call(null,1,"framebuffer")});ga();L=T(A,{clear:function(a){d("object"===typeof a&&
a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)Ja(T({framebuffer:a.framebuffer.faces[b]},a),ca);else Ja(a,ca);else ca(null,a)},prop:u.define.bind(null,1),context:u.define.bind(null,2),"this":u.define.bind(null,3),draw:A({}),buffer:function(a){return pa.create(a,34962,!1,!1)},elements:function(a){return J.create(a,!1)},texture:W.create2D,cube:W.createCube,renderbuffer:la.create,framebuffer:ha.create,framebufferCube:ha.createCube,
vao:K.createVAO,attributes:L,frame:H,on:function(a,b){d.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return H(b);case "lost":c=ka;break;case "restore":c=oa;break;case "destroy":c=Aa;break;default:d.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:ra,hasExtension:function(a){return 0<=ra.extensions.indexOf(a.toLowerCase())},
read:S,destroy:function(){xa.length=0;I();da&&(da.removeEventListener("webglcontextlost",aa),da.removeEventListener("webglcontextrestored",E));ba.clear();ha.clear();la.clear();K.clear();W.clear();J.clear();pa.clear();O&&O.clear();Aa.forEach(function(a){a()})},_gl:ea,_refresh:ga,poll:function(){D();O&&O.update()},now:t,stats:V});h.onDone(null,L);return L}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,
"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

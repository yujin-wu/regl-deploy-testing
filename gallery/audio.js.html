<!DOCTYPE html>
      <html>
        <head>
          <title>example/audio.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function V(ia,Aa,a){function X(g,f){if(!Aa[g]){if(!ia[g]){var q="function"==typeof require&&require;if(!f&&q)return q(g,!0);if(F)return F(g,!0);q=Error("Cannot find module '"+g+"'");throw q.code="MODULE_NOT_FOUND",q;}q=Aa[g]={exports:{}};ia[g][0].call(q.exports,function(e){return X(ia[g][1][e]||e)},q,q.exports,V,ia,Aa,a)}return Aa[g].exports}for(var F="function"==typeof require&&require,J=0;J<a.length;J++)X(a[J]);return X}return V})()({1:[function(V,ia,Aa){var a=V("../regl")({pixelRatio:1}),
X=V("gl-mat4/perspective"),F=V("gl-mat4/lookAt");V("resl")({manifest:{song:{type:"audio",src:"assets/8bitpeoples-bamboo-cactus.mp3",stream:!0}},onDone:function(J){J=J.song;var g=new AudioContext,f=g.createMediaElementSource(J),q=g.createAnalyser();f.connect(q);f.connect(g.destination);J.play();var e=a.texture({data:(new Uint8Array(65536)).fill(128),radius:256,channels:1,min:"linear",mag:"linear",wrap:"repeat"}),x=a.texture({width:64,height:1,channels:4,min:"linear",mag:"linear",wrap:"repeat"}),C=
a({vert:"\n      precision highp float;\n\n      #define N float(256)\n      #define WEIGHT1 vec4(-1.0, 8.0, -8.0, 1.0)\n      #define WEIGHT2 vec4(-1.0, 16.0, 16.0, -1.0)\n\n      attribute vec2 vertId;\n\n      uniform float t;\n      uniform mat4 projection, view;\n      uniform vec3 lightPosition;\n      uniform float offsetRow;\n      uniform sampler2D terrain, color;\n\n      varying vec3 grad, fragColor, eyeDir, lightDir;\n      varying float curvature;\n\n      float f(vec2 x) {\n        return 0.025 * pow(texture2D(terrain, x).r, 2.0) *\n          (1.0 + 2.5 * pow(texture2D(color, vec2(x.y, 0.0)).a, 3.0));\n      }\n\n      vec4 stencil(vec2 x, vec2 d) {\n        return vec4(\n          f(x - 2.0 * d),\n          f(x - d),\n          f(x + d),\n          f(x + 2.0 * d));\n      }\n\n      void main () {\n        vec2 uv = (vertId + vec2(0.0, offsetRow)) / N;\n\n        float h0 = f(uv);\n        vec4 hx = stencil(uv, vec2(1.0 / N, 0.0));\n        vec4 hy = stencil(uv, vec2(0.0, 1.0 / N));\n\n        grad = normalize(vec3(\n          dot(WEIGHT1, hx),\n          dot(WEIGHT1, hy),\n          0.025));\n\n        curvature =\n          max(max((dot(WEIGHT2, hx) - 30.0 * h0),\n              (dot(WEIGHT2, hy) - 30.0 * h0)), 0.0);\n\n        vec3 pos = vec3(vertId / N, h0 + 0.4);\n        lightDir = lightPosition - pos;\n\n        vec4 viewPos = view * vec4(pos, 1);\n        gl_Position = projection * viewPos;\n        eyeDir = viewPos.xyz / viewPos.w;\n\n        vec3 audioColor = texture2D(color, vec2(uv.y, 0)).rgb;\n        float minC = 0.9 * min(min(audioColor.r, audioColor.g), audioColor.b);\n        float maxC = max(max(audioColor.r, audioColor.g), audioColor.b);\n        fragColor = (audioColor - minC) / (maxC - minC);\n      }",
frag:"\n      precision highp float;\n\n      varying vec3 grad, fragColor, eyeDir, lightDir;\n      varying float curvature;\n\n      void main () {\n        vec3 N = normalize(grad);\n        vec3 V = normalize(eyeDir);\n        vec3 L = normalize(lightDir);\n\n        vec3 H = normalize(V + L);\n\n        float ao = 1.0 - curvature;\n        float diffuse = max(dot(L, N), 0.0);\n        float fresnel = 0.1 + 0.5 * pow(1.0 - max(dot(H, V), 0.0), 5.0);\n        float light = 0.25 * ao + 0.8 * diffuse + fresnel;\n        gl_FragColor = vec4(light * fragColor, 1);\n      }",
attributes:{vertId:Array(262144).fill().map(function(e,f){var q=.5*Math.floor(f/512),g=f%512*.5;return[q,g,q+.5,g,q,g+.5,q,g+.5,q+.5,g+.5,q+.5,g]})},uniforms:{offsetRow:function(e){return e.tick%256},terrain:e,projection:function(e){return X([],Math.PI/8,e.viewportWidth/e.viewportHeight,.01,1E3)},view:function(e){e=e.tick;return F([],[.5+.2*Math.cos(.001*e),1,.7+.2*Math.cos(.003*e+2.4)],[.5,0,0],[0,0,1])},lightPosition:function(e){e=e.tick;return[.5+Math.sin(.01*e),1+Math.cos(.01*e),1+.6*Math.cos(.04*
e)]},color:x,t:function(e){return.01*e.tick}},elements:null,instances:-1,count:1572864}),L={width:256,height:1,data:new Uint8Array(256)},K=new Uint8Array(256);a.frame(function(f){f=f.tick%256;a.clear({color:[0,0,0,1],depth:1});q.getByteTimeDomainData(L.data);e.subimage(L,0,f);q.getByteFrequencyData(K);x.subimage(K);C()})}})},{"../regl":42,"gl-mat4/lookAt":39,"gl-mat4/perspective":40,resl:41}],2:[function(V,ia,Aa){function a(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=
!1;this.type=5126;this.divisor=this.stride=this.offset=0}var X=V("./util/sorted-object-keys"),F=V("./util/check"),J=V("./util/values"),g=V("./constants/dtypes.json"),f=V("./util/is-typed-array"),q=V("./util/is-ndarray"),e=V("./constants/primitives.json"),x="attributes elements offset count primitive instances".split(" ");ia.exports=function(C,L,K,A,m,t,da){function y(k){if(k!==aa.currentVAO){var e=L.oes_vertex_array_object;k?e.bindVertexArrayOES(k.vao):e.bindVertexArrayOES(null);aa.currentVAO=k}}
function U(k){if(k!==aa.currentVAO){if(k)k.bindAttrs();else{for(var e=L.angle_instanced_arrays,c=0;c<h.length;++c){var f=h[c];f.buffer?(C.enableVertexAttribArray(c),f.buffer.bind(),C.vertexAttribPointer(c,f.size,f.type,f.normalized,f.stride,f.offfset),e&&f.divisor&&e.vertexAttribDivisorANGLE(c,f.divisor)):(C.disableVertexAttribArray(c),C.vertexAttrib4f(c,f.x,f.y,f.z,f.w))}da.elements?C.bindBuffer(34963,da.elements.buffer.buffer):C.bindBuffer(34963,null)}aa.currentVAO=k}}function u(){J(r).forEach(function(e){e.destroy()})}
function Q(){this.id=++M;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var e=L.oes_vertex_array_object;this.vao=e?e.createVertexArrayOES():null;r[this.id]=this;this.buffers=[]}function ga(){L.oes_vertex_array_object&&J(r).forEach(function(e){e.refresh()})}var c=K.maxAttributes,h=Array(c);for(K=0;K<c;++K)h[K]=new a;var M=0,r={},aa={Record:a,scope:{},state:h,currentVAO:null,targetVAO:null,restore:L.oes_vertex_array_object?ga:function(){},
createVAO:function(k){function w(k){var r;if(Array.isArray(k))r=k,h.elements&&h.ownsElements&&h.elements.destroy(),h.elements=null,h.ownsElements=!1,h.offset=0,h.count=0,h.instances=-1,h.primitive=4;else{F("object"===typeof k,"invalid arguments for create vao");F("attributes"in k,"must specify attributes for vao");if(k.elements){var d=k.elements;h.ownsElements?("function"===typeof d&&"elements"===d._reglType?h.elements.destroy():h.elements(d),h.ownsElements=!1):t.getElements(k.elements)?(h.elements=
k.elements,h.ownsElements=!1):(h.elements=t.create(k.elements),h.ownsElements=!0)}else h.elements=null,h.ownsElements=!1;r=k.attributes;h.offset=0;h.count=-1;h.instances=-1;h.primitive=4;h.elements&&(h.count=h.elements._elements.vertCount,h.primitive=h.elements._elements.primType);"offset"in k&&(h.offset=k.offset|0);"count"in k&&(h.count=k.count|0);"instances"in k&&(h.instances=k.instances|0);"primitive"in k&&(F(k.primitive in e,"bad primitive type: "+k.primitive),h.primitive=e[k.primitive]);F.optional(function(){for(var b=
X(k),d=0;d<b.length;++d)F(0<=x.indexOf(b[d]),'invalid option for vao: "'+b[d]+'" valid options are '+x)});F(Array.isArray(r),"attributes must be an array")}F(r.length<c,"too many attributes");F(0<r.length,"must specify at least one attribute");var d={},P=h.attributes;P.length=r.length;for(var b=0;b<r.length;++b){var M=r[b],B=P[b]=new a,u=M.data||M;if(Array.isArray(u)||f(u)||q(u)){var y;h.buffers[b]&&(y=h.buffers[b],f(u)&&y._buffer.byteLength>=u.byteLength?y.subdata(u):(y.destroy(),h.buffers[b]=null));
h.buffers[b]||(y=h.buffers[b]=m.create(M,34962,!1,!0));B.buffer=m.getBuffer(y);B.size=B.buffer.dimension|0;B.normalized=!1;B.type=B.buffer.dtype;B.offset=0;B.stride=0;B.divisor=0;B.state=1;d[b]=1}else m.getBuffer(M)?(B.buffer=m.getBuffer(M),B.size=B.buffer.dimension|0,B.normalized=!1,B.type=B.buffer.dtype,B.offset=0,B.stride=0,B.divisor=0,B.state=1):m.getBuffer(M.buffer)?(B.buffer=m.getBuffer(M.buffer),B.size=(+M.size||B.buffer.dimension)|0,B.normalized=!!M.normalized||!1,"type"in M?(F.parameter(M.type,
g,"invalid buffer type"),B.type=g[M.type]):B.type=B.buffer.dtype,B.offset=(M.offset||0)|0,B.stride=(M.stride||0)|0,B.divisor=(M.divisor||0)|0,B.state=1,F(1<=B.size&&4>=B.size,"size must be between 1 and 4"),F(0<=B.offset,"invalid offset"),F(0<=B.stride&&255>=B.stride,"stride must be between 0 and 255"),F(0<=B.divisor,"divisor must be positive"),F(!B.divisor||!!L.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in M?(F(0<b,"first attribute must not be a constant"),
B.x=+M.x||0,B.y=+M.y||0,B.z=+M.z||0,B.w=+M.w||0,B.state=2):F(!1,"invalid attribute spec for location "+b)}for(y=0;y<h.buffers.length;++y)!d[y]&&h.buffers[y]&&(h.buffers[y].destroy(),h.buffers[y]=null);h.refresh();return w}var h=new Q;A.vaoCount+=1;w.destroy=function(){for(var k=0;k<h.buffers.length;++k)h.buffers[k]&&h.buffers[k].destroy();h.buffers.length=0;h.ownsElements&&(h.elements.destroy(),h.elements=null,h.ownsElements=!1);h.destroy()};w._vao=h;w._reglType="vao";return w(k)},getVAO:function(k){return"function"===
typeof k&&k._vao?k._vao:null},destroyBuffer:function(k){for(var e=0;e<h.length;++e){var c=h[e];c.buffer===k&&(C.disableVertexAttribArray(e),c.buffer=null)}},setVAO:L.oes_vertex_array_object?y:U,clear:L.oes_vertex_array_object?u:function(){}};Q.prototype.bindAttrs=function(){for(var k=L.angle_instanced_arrays,e=this.attributes,f=0;f<e.length;++f){var h=e[f];h.buffer?(C.enableVertexAttribArray(f),C.bindBuffer(34962,h.buffer.buffer),C.vertexAttribPointer(f,h.size,h.type,h.normalized,h.stride,h.offset),
k&&h.divisor&&k.vertexAttribDivisorANGLE(f,h.divisor)):(C.disableVertexAttribArray(f),C.vertexAttrib4f(f,h.x,h.y,h.z,h.w))}for(k=e.length;k<c;++k)C.disableVertexAttribArray(k);(k=t.getElements(this.elements))?C.bindBuffer(34963,k.buffer.buffer):C.bindBuffer(34963,null)};Q.prototype.refresh=function(){var k=L.oes_vertex_array_object;k&&(k.bindVertexArrayOES(this.vao),this.bindAttrs(),aa.currentVAO=null,k.bindVertexArrayOES(null))};Q.prototype.destroy=function(){if(this.vao){var k=L.oes_vertex_array_object;
this===aa.currentVAO&&(aa.currentVAO=null,k.bindVertexArrayOES(null));k.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);r[this.id]&&(delete r[this.id],--A.vaoCount)};return aa}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(V,ia,Aa){function a(e){return K[Object.prototype.toString.call(e)]|
0}function X(e,f){for(var q=0;q<f.length;++q)e[q]=f[q]}function F(e,f,q,g,a,m,c){for(var h=0,M=0;M<q;++M)for(var r=0;r<g;++r)e[h++]=f[a*M+m*r+c]}var J=V("./util/sorted-object-keys"),g=V("./util/check"),f=V("./util/is-typed-array"),q=V("./util/is-ndarray"),e=V("./util/values"),x=V("./util/pool");Aa=V("./util/flatten");var C=Aa.flatten,L=Aa.shape,K=V("./constants/arraytypes.json"),A=V("./constants/dtypes.json"),m=V("./constants/usage.json"),t=[];t[5120]=1;t[5122]=2;t[5124]=4;t[5121]=1;t[5123]=2;t[5125]=
4;t[5126]=4;ia.exports=function(K,y,U,u){function Q(e){this.id=M++;this.buffer=K.createBuffer();this.type=e;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;U.profile&&(this.stats={size:0})}function ga(e,f,c){e.byteLength=f.byteLength;K.bufferData(e.type,f,c)}function c(e,c,h,r,M,d){e.usage=h;if(Array.isArray(c)){if(e.dtype=r||5126,0<c.length)if(Array.isArray(c[0])){M=L(c);for(var P=r=1;P<M.length;++P)r*=M[P];e.dimension=r;c=C(c,M,e.dtype);ga(e,c,h);d?e.persistentData=
c:x.freeType(c)}else"number"===typeof c[0]?(e.dimension=M,M=x.allocType(e.dtype,c.length),X(M,c),ga(e,M,h),d?e.persistentData=M:x.freeType(M)):f(c[0])?(e.dimension=c[0].length,e.dtype=r||a(c[0])||5126,c=C(c,[c.length,c[0].length],e.dtype),ga(e,c,h),d?e.persistentData=c:x.freeType(c)):g.raise("invalid buffer data")}else if(f(c))e.dtype=r||a(c),e.dimension=M,ga(e,c,h),d&&(e.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(q(c)){M=c.shape;var b=c.stride,P=c.offset,u=0,B=0,y=0,m=0;1===
M.length?(u=M[0],B=1,y=b[0],m=0):2===M.length?(u=M[0],B=M[1],y=b[0],m=b[1]):g.raise("invalid shape");e.dtype=r||a(c.data)||5126;e.dimension=B;M=x.allocType(e.dtype,u*B);F(M,c.data,u,B,y,m,P);ga(e,M,h);d?e.persistentData=M:x.freeType(M)}else c instanceof ArrayBuffer?(e.dtype=5121,e.dimension=M,ga(e,c,h),d&&(e.persistentData=new Uint8Array(new Uint8Array(c)))):g.raise("invalid buffer data")}function h(e){y.bufferCount--;u(e);var c=e.buffer;g(c,"buffer must not be deleted already");K.deleteBuffer(c);
e.buffer=null;delete r[e.id]}var M=0,r={};Q.prototype.bind=function(){K.bindBuffer(this.type,this.buffer)};Q.prototype.destroy=function(){h(this)};var aa=[];U.profile&&(y.getTotalBufferSize=function(){var e=0;J(r).forEach(function(c){e+=r[c].stats.size});return e});return{create:function(e,w,M,u){function D(b){var d=35044,e=null,h=0,k=0,w=1;Array.isArray(b)||f(b)||q(b)||b instanceof ArrayBuffer?e=b:"number"===typeof b?h=b|0:b&&(g.type(b,"object","buffer arguments must be an object, a number or an array"),
"data"in b&&(g(null===e||Array.isArray(e)||f(e)||q(e),"invalid data for buffer"),e=b.data),"usage"in b&&(g.parameter(b.usage,m,"invalid buffer usage"),d=m[b.usage]),"type"in b&&(g.parameter(b.type,A,"invalid buffer type"),k=A[b.type]),"dimension"in b&&(g.type(b.dimension,"number","invalid dimension"),w=b.dimension|0),"length"in b&&(g.nni(h,"buffer length must be a nonnegative integer"),h=b.length|0));P.bind();e?c(P,e,d,k,w,u):(h&&K.bufferData(P.type,h,d),P.dtype=k||5121,P.usage=d,P.dimension=w,P.byteLength=
h);U.profile&&(P.stats.size=P.byteLength*t[P.dtype]);return D}function d(b,d){g(d+b.byteLength<=P.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+b.byteLength+" starting from offset "+d+" to a buffer of size "+P.byteLength);K.bufferSubData(P.type,d,b)}y.bufferCount++;var P=new Q(w);r[P.id]=P;M||D(e);D._reglType="buffer";D._buffer=P;D.subdata=function(b,e){var c=(e||0)|0,h;P.bind();if(f(b)||b instanceof ArrayBuffer)d(b,c);else if(Array.isArray(b)){if(0<b.length)if("number"===
typeof b[0]){var k=x.allocType(P.dtype,b.length);X(k,b);d(k,c);x.freeType(k)}else Array.isArray(b[0])||f(b[0])?(h=L(b),k=C(b,h,P.dtype),d(k,c),x.freeType(k)):g.raise("invalid buffer data")}else if(q(b)){h=b.shape;var w=b.stride,r=k=0,M=0,T=0;1===h.length?(k=h[0],r=1,M=w[0],T=0):2===h.length?(k=h[0],r=h[1],M=w[0],T=w[1]):g.raise("invalid shape");h=Array.isArray(b.data)?P.dtype:a(b.data);h=x.allocType(h,k*r);F(h,b.data,k,r,M,T,b.offset);d(h,c);x.freeType(h)}else g.raise("invalid data for buffer subdata");
return D};U.profile&&(D.stats=P.stats);D.destroy=function(){h(P)};return D},createStream:function(e,h){var f=aa.pop();f||(f=new Q(e));f.bind();c(f,h,35040,0,1,!1);return f},destroyStream:function(e){aa.push(e)},clear:function(){e(r).forEach(h);aa.forEach(h)},getBuffer:function(e){return e&&e._buffer instanceof Q?e._buffer:null},restore:function(){e(r).forEach(function(e){e.buffer=K.createBuffer();K.bindBuffer(e.type,e.buffer);K.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:c}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(V,ia,Aa){ia.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(V,ia,Aa){ia.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(V,ia,Aa){ia.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(V,ia,Aa){ia.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(V,ia,Aa){function a(e){return Array.isArray(e)||K(e)||
A(e)}function X(e){return e.sort(function(e,c){return"viewport"===e?-1:"viewport"===c?1:e<c?-1:1})}function F(e,c,f,h){this.thisDep=e;this.contextDep=c;this.propDep=f;this.append=h}function J(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function g(e){return new F(!1,!1,!1,e)}function f(e,c){var f=e.type;if(0===f)return f=e.data.length,new F(!0,1<=f,2<=f,c);if(4===f)return f=e.data,new F(f.thisDep,f.contextDep,f.propDep,c);if(5===f)return new F(!1,!1,!1,c);if(6===f){for(var h=f=!1,q=!1,d=0;d<
e.data.length;++d){var r=e.data[d];1===r.type?q=!0:2===r.type?h=!0:3===r.type?f=!0:0===r.type?(f=!0,r=r.data,1<=r&&(h=!0),2<=r&&(q=!0)):4===r.type&&(f=f||r.data.thisDep,h=h||r.data.contextDep,q=q||r.data.propDep)}return new F(f,h,q,c)}return new F(3===f,2===f,1===f,c)}var q=V("./util/sorted-object-keys"),e=V("./util/check"),x=V("./util/extend"),C=V("./util/codegen"),L=V("./util/loop"),K=V("./util/is-typed-array"),A=V("./util/is-ndarray"),m=V("./util/is-array-like"),t=V("./dynamic"),da=V("./constants/primitives.json"),
y=V("./constants/dtypes.json"),U=["x","y","z","w"],u="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Q={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},
ga="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),c={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,
always:519},h={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},M={frag:35632,vert:35633},r={cw:2304,ccw:2305},aa=new F(!1,!1,!1,function(){});ia.exports=function(k,w,A,E,D,d,P,b,K,B,qa,hd,Y,ea,R){function T(b){return b.replace(".","_")}function z(b,d,e){var c=T(b);ta.push(b);Z[c]=ka[c]=!!e;Ja[c]=d}function l(b,d,e){var c=T(b);ta.push(b);Array.isArray(e)?(ka[c]=e.slice(),Z[c]=e.slice()):ka[c]=Z[c]=e;Fa[c]=d}function O(){var b=
C(),d=b.link,c=b.global;b.id=zd++;b.batchId="0";var f=d(gb),h=b.shared={props:"a0"};q(gb).forEach(function(b){h[b]=c.def(f,".",b)});e.optional(function(){b.CHECK=d(e);b.commandStr=e.guessCommand();b.command=d(b.commandStr);b.assert=function(b,e,c){b("if(!(",e,"))",this.CHECK,".commandRaise(",d(c),",",this.command,");")};ca.invalidBlendCombinations=ga});var l=b.next={},n=b.current={};q(Fa).forEach(function(b){Array.isArray(ka[b])&&(l[b]=c.def(h.next,".",b),n[b]=c.def(h.current,".",b))});var v=b.constants=
{};q(ca).forEach(function(b){v[b]=c.def(JSON.stringify(ca[b]))});b.invoke=function(e,c){switch(c.type){case 0:var f=["this",h.context,h.props,b.batchId];return e.def(d(c.data),".call(",f.slice(0,Math.max(c.data.length+1,4)),")");case 1:return e.def(h.props,c.data);case 2:return e.def(h.context,c.data);case 3:return e.def("this",c.data);case 4:return c.data.append(b,e),c.data.ref;case 5:return c.data.toString();case 6:return c.data.map(function(d){return b.invoke(e,d)})}};b.attribCache={};var p={};
b.scopeAttrib=function(b){b=w.id(b);if(b in p)return p[b];var e=B.scope[b];e||(e=B.scope[b]=new sa);return p[b]=d(e)};return b}function N(b){var d=b["static"];b=b.dynamic;var e;if("profile"in d){var c=!!d.profile;e=g(function(b,d){return c});e.enable=c}else if("profile"in b){var h=b.profile;e=f(h,function(b,d){return b.invoke(d,h)})}return e}function wa(d,c){var h=d["static"],l=d.dynamic;if("framebuffer"in h){var n=h.framebuffer;return n?(n=b.getFramebuffer(n),e.command(n,"invalid framebuffer object"),
g(function(b,d){var e=b.link(n),c=b.shared;d.set(c.framebuffer,".next",e);c=c.context;d.set(c,".framebufferWidth",e+".width");d.set(c,".framebufferHeight",e+".height");return e})):g(function(b,d){var e=b.shared;d.set(e.framebuffer,".next","null");e=e.context;d.set(e,".framebufferWidth",e+".drawingBufferWidth");d.set(e,".framebufferHeight",e+".drawingBufferHeight");return"null"})}if("framebuffer"in l){var v=l.framebuffer;return f(v,function(b,d){var c=b.invoke(d,v),f=b.shared,h=f.framebuffer,l=d.def(h,
".getFramebuffer(",c,")");e.optional(function(){b.assert(d,"!"+c+"||"+l,"invalid framebuffer object")});d.set(h,".next",l);f=f.context;d.set(f,".framebufferWidth",l+"?"+l+".width:"+f+".drawingBufferWidth");d.set(f,".framebufferHeight",l+"?"+l+".height:"+f+".drawingBufferHeight");return l})}return null}function na(b,d,c){function h(b){if(b in l){var v=l[b];e.commandType(v,"object","invalid "+b,c.commandStr);var p=!0,H=v.x|0,q=v.y|0,k,r;"width"in v?(k=v.width|0,e.command(0<=k,"invalid "+b,c.commandStr)):
p=!1;"height"in v?(r=v.height|0,e.command(0<=r,"invalid "+b,c.commandStr)):p=!1;return new F(!p&&d&&d.thisDep,!p&&d&&d.contextDep,!p&&d&&d.propDep,function(b,d){var e=b.shared.context,c=k;"width"in v||(c=d.def(e,".","framebufferWidth","-",H));var f=r;"height"in v||(f=d.def(e,".","framebufferHeight","-",q));return[H,q,c,f]})}if(b in n){var I=n[b],p=f(I,function(d,c){var f=d.invoke(c,I);e.optional(function(){d.assert(c,f+"&&typeof "+f+'==="object"',"invalid "+b)});var h=d.shared.context,l=c.def(f,".x|0"),
v=c.def(f,".y|0"),n=c.def('"width" in ',f,"?",f,".width|0:","(",h,".","framebufferWidth","-",l,")"),p=c.def('"height" in ',f,"?",f,".height|0:","(",h,".","framebufferHeight","-",v,")");e.optional(function(){d.assert(c,n+">=0&&"+p+">=0","invalid "+b)});return[l,v,n,p]});d&&(p.thisDep=p.thisDep||d.thisDep,p.contextDep=p.contextDep||d.contextDep,p.propDep=p.propDep||d.propDep);return p}return d?new F(d.thisDep,d.contextDep,d.propDep,function(b,d){var e=b.shared.context;return[0,0,d.def(e,".","framebufferWidth"),
d.def(e,".","framebufferHeight")]}):null}var l=b["static"],n=b.dynamic;if(b=h("viewport")){var v=b;b=new F(b.thisDep,b.contextDep,b.propDep,function(b,d){var e=v.append(b,d),c=b.shared.context;d.set(c,".viewportWidth",e[2]);d.set(c,".viewportHeight",e[3]);return e})}return{viewport:b,scissor_box:h("scissor.box")}}function n(b,d){var c=b["static"];if("string"===typeof c.frag&&"string"===typeof c.vert){if(0<q(d.dynamic).length)return null;var c=d["static"],f=q(c);if(0<f.length&&"number"===typeof c[f[0]]){for(var h=
[],l=0;l<f.length;++l)e("number"===typeof c[f[l]],"must specify all vertex attribute locations when using vaos"),h.push([c[f[l]]|0,f[l]]);return h}}return null}function G(b,d,c){function h(b){if(b in l){var d=w.id(l[b]);e.optional(function(){qa.shader(M[b],d,e.guessCommand())});var c=g(function(){return d});c.id=d;return c}if(b in v){var n=v[b];return f(n,function(d,c){var f=d.invoke(c,n),h=c.def(d.shared.strings,".id(",f,")");e.optional(function(){c(d.shared.shader,".shader(",M[b],",",h,",",d.command,
");")});return h})}return null}var l=b["static"],v=b.dynamic,n=h("frag"),p=h("vert"),H=null;J(n)&&J(p)?(H=qa.program(p.id,n.id,null,c),b=g(function(b,d){return b.link(H)})):b=new F(n&&n.thisDep||p&&p.thisDep,n&&n.contextDep||p&&p.contextDep,n&&n.propDep||p&&p.propDep,function(b,d){var c=b.shared.shader,f;f=n?n.append(b,d):d.def(c,".","frag");var h;h=p?p.append(b,d):d.def(c,".","vert");var l=c+".program("+h+","+f;e.optional(function(){l+=","+b.command});return d.def(l+")")});return{frag:n,vert:p,progVar:b,
program:H}}function ba(b,c){function h(b,d){if(b in l){var q=l[b]|0;d?p.offset=q:p.instances=q;e.command(!d||0<=q,"invalid "+b,c.commandStr);return g(function(b,e){d&&(b.OFFSET=q);return q})}if(b in n){var r=n[b];return f(r,function(c,f){var l=c.invoke(f,r);d&&(c.OFFSET=l,e.optional(function(){c.assert(f,l+">=0","invalid "+b)}));return l})}if(d){if(k)return g(function(b,d){return b.OFFSET=0});if(v)return new F(H.thisDep,H.contextDep,H.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+
b.shared.vao+".currentVAO.offset:0")})}else if(v)return new F(H.thisDep,H.contextDep,H.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.instances:-1")});return null}var l=b["static"],n=b.dynamic,p={},v=!1,H=function(){if("vao"in l){var b=l.vao;null!==b&&null===B.getVAO(b)&&(b=B.createVAO(b));v=!0;p.vao=b;return g(function(d){var e=B.getVAO(b);return e?d.link(e):"null"})}if("vao"in n){v=!0;var d=n.vao;return f(d,function(b,e){var c=b.invoke(e,d);return e.def(b.shared.vao+
".getVAO("+c+")")})}return null}(),k=!1,r=function(){if("elements"in l){var b=l.elements;p.elements=b;if(a(b)){var h=p.elements=d.create(b,!0),b=d.getElements(h);k=!0}else b&&(b=d.getElements(b),k=!0,e.command(b,"invalid elements",c.commandStr));h=g(function(d,e){if(b){var c=d.link(b);return d.ELEMENTS=c}return d.ELEMENTS=null});h.value=b;return h}if("elements"in n){k=!0;var q=n.elements;return f(q,function(b,d){var c=b.shared,f=c.isBufferArgs,c=c.elements,l=b.invoke(d,q),h=d.def("null"),f=d.def(f,
"(",l,")"),n=b.cond(f).then(h,"=",c,".createStream(",l,");")["else"](h,"=",c,".getElements(",l,");");e.optional(function(){b.assert(n["else"],"!"+l+"||"+h,"invalid elements")});d.entry(n);d.exit(b.cond(f).then(c,".destroyStream(",h,");"));return b.ELEMENTS=h})}return v?new F(H.thisDep,H.contextDep,H.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+b.shared.elements+".getElements("+b.shared.vao+".currentVAO.elements):null")}):null}(),I=h("offset",!0),w=function(){if("primitive"in l){var b=
l.primitive;p.primitive=b;e.commandParameter(b,da,"invalid primitve",c.commandStr);return g(function(d,e){return da[b]})}if("primitive"in n){var d=n.primitive;return f(d,function(b,c){var f=b.constants.primTypes,l=b.invoke(c,d);e.optional(function(){b.assert(c,l+" in "+f,"invalid primitive, must be one of "+q(da))});return c.def(f,"[",l,"]")})}return k?J(r)?r.value?g(function(b,d){return d.def(b.ELEMENTS,".primType")}):g(function(){return 4}):new F(r.thisDep,r.contextDep,r.propDep,function(b,d){var e=
b.ELEMENTS;return d.def(e,"?",e,".primType:",4)}):v?new F(H.thisDep,H.contextDep,H.propDep,function(b,d){return d.def(b.shared.vao+".currentVAO?"+b.shared.vao+".currentVAO.primitive:4")}):null}(),ma=function(){if("count"in l){var b=l.count|0;p.count=b;e.command("number"===typeof b&&0<=b,"invalid vertex count",c.commandStr);return g(function(){return b})}if("count"in n){var d=n.count;return f(d,function(b,c){var f=b.invoke(c,d);e.optional(function(){b.assert(c,"typeof "+f+'==="number"&&'+f+">=0&&"+
f+"===("+f+"|0)","invalid vertex count")});return f})}if(k){if(J(r)){if(r)return I?new F(I.thisDep,I.contextDep,I.propDep,function(b,d){var c=d.def(b.ELEMENTS,".vertCount-",b.OFFSET);e.optional(function(){b.assert(d,c+">=0","invalid vertex offset/element buffer too small")});return c}):g(function(b,d){return d.def(b.ELEMENTS,".vertCount")});var h=g(function(){return-1});e.optional(function(){h.MISSING=!0});return h}var q=new F(r.thisDep||I.thisDep,r.contextDep||I.contextDep,r.propDep||I.propDep,function(b,
d){var e=b.ELEMENTS;return b.OFFSET?d.def(e,"?",e,".vertCount-",b.OFFSET,":-1"):d.def(e,"?",e,".vertCount:-1")});e.optional(function(){q.DYNAMIC=!0});return q}return v?new F(H.thisDep,H.contextDep,H.propDep,function(b,d){return d.def(b.shared.vao,".currentVAO?",b.shared.vao,".currentVAO.count:-1")}):null}(),P=h("instances",!1);return{elements:r,primitive:w,count:ma,instances:P,offset:I,vao:H,vaoActive:v,elementsActive:k,"static":p}}function S(b,d){var l=b["static"],n=b.dynamic,p={};ta.forEach(function(b){function v(d,
e){if(b in l){var c=d(l[b]);p[H]=g(function(){return c})}else if(b in n){var h=n[b];p[H]=f(h,function(b,d){return e(b,d,b.invoke(d,h))})}}var H=T(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return v(function(c){e.commandType(c,"boolean",b,d.commandStr);return c},function(d,c,f){e.optional(function(){d.assert(c,"typeof "+f+'==="boolean"',
"invalid flag "+b,d.commandStr)});return f});case "depth.func":return v(function(f){e.commandParameter(f,c,"invalid "+b,d.commandStr);return c[f]},function(d,f,l){var h=d.constants.compareFuncs;e.optional(function(){d.assert(f,l+" in "+h,"invalid "+b+", must be one of "+q(c))});return f.def(h,"[",l,"]")});case "depth.range":return v(function(b){e.command(m(b)&&2===b.length&&"number"===typeof b[0]&&"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",d.commandStr);return b},function(b,d,c){e.optional(function(){b.assert(d,
b.shared.isArrayLike+"("+c+")&&"+c+".length===2&&typeof "+c+'[0]==="number"&&typeof '+c+'[1]==="number"&&'+c+"[0]<="+c+"[1]","depth range must be a 2d array")});var f=d.def("+",c,"[0]"),l=d.def("+",c,"[1]");return[f,l]});case "blend.func":return v(function(b){e.commandType(b,"object","blend.func",d.commandStr);var c="srcRGB"in b?b.srcRGB:b.src,f="srcAlpha"in b?b.srcAlpha:b.src,l="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;e.commandParameter(c,Q,H+".srcRGB",d.commandStr);e.commandParameter(f,
Q,H+".srcAlpha",d.commandStr);e.commandParameter(l,Q,H+".dstRGB",d.commandStr);e.commandParameter(b,Q,H+".dstAlpha",d.commandStr);e.command(-1===ga.indexOf(c+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+c+", "+l+")",d.commandStr);return[Q[c],Q[l],Q[f],Q[b]]},function(d,c,f){function l(v,n){var p=c.def('"',v,n,'" in ',f,"?",f,".",v,n,":",f,".",v);e.optional(function(){d.assert(c,p+" in "+h,"invalid "+b+"."+v+n+", must be one of "+q(Q))});return p}var h=d.constants.blendFuncs;e.optional(function(){d.assert(c,
f+"&&typeof "+f+'==="object"',"invalid blend func, must be an object")});var v=l("src","RGB"),n=l("dst","RGB");e.optional(function(){d.assert(c,d.constants.invalidBlendCombinations+".indexOf("+v+'+", "+'+n+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var p=c.def(h,"[",v,"]"),H=c.def(h,"[",l("src","Alpha"),"]"),k=c.def(h,"[",n,"]"),r=c.def(h,"[",l("dst","Alpha"),"]");return[p,k,H,r]});case "blend.equation":return v(function(c){if("string"===typeof c)return e.commandParameter(c,
Ga,"invalid "+b,d.commandStr),[Ga[c],Ga[c]];if("object"===typeof c)return e.commandParameter(c.rgb,Ga,b+".rgb",d.commandStr),e.commandParameter(c.alpha,Ga,b+".alpha",d.commandStr),[Ga[c.rgb],Ga[c.alpha]];e.commandRaise("invalid blend.equation",d.commandStr)},function(d,c,f){var l=d.constants.blendEquations,h=c.def(),v=c.def(),n=d.cond("typeof ",f,'==="string"');e.optional(function(){function c(b,e,f){d.assert(b,f+" in "+l,"invalid "+e+", must be one of "+q(Ga))}c(n.then,b,f);d.assert(n["else"],f+
"&&typeof "+f+'==="object"',"invalid "+b);c(n["else"],b+".rgb",f+".rgb");c(n["else"],b+".alpha",f+".alpha")});n.then(h,"=",v,"=",l,"[",f,"];");n["else"](h,"=",l,"[",f,".rgb];",v,"=",l,"[",f,".alpha];");c(n);return[h,v]});case "blend.color":return v(function(b){e.command(m(b)&&4===b.length,"blend.color must be a 4d array",d.commandStr);return L(4,function(d){return+b[d]})},function(b,d,c){e.optional(function(){b.assert(d,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","blend.color must be a 4d array")});
return L(4,function(b){return d.def("+",c,"[",b,"]")})});case "stencil.mask":return v(function(b){e.commandType(b,"number",H,d.commandStr);return b|0},function(b,d,c){e.optional(function(){b.assert(d,"typeof "+c+'==="number"',"invalid stencil.mask")});return d.def(c,"|0")});case "stencil.func":return v(function(f){e.commandType(f,"object",H,d.commandStr);var l=f.cmp||"keep",h=f.ref||0;f="mask"in f?f.mask:-1;e.commandParameter(l,c,b+".cmp",d.commandStr);e.commandType(h,"number",b+".ref",d.commandStr);
e.commandType(f,"number",b+".mask",d.commandStr);return[c[l],h,f]},function(b,d,c){var f=b.constants.compareFuncs;e.optional(function(){function e(){b.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}e(c+"&&typeof ",c,'==="object"');e('!("cmp" in ',c,")||(",c,".cmp in ",f,")")});var l=d.def('"cmp" in ',c,"?",f,"[",c,".cmp]",":",7680),h=d.def(c,".ref|0"),n=d.def('"mask" in ',c,"?",c,".mask|0:-1");return[l,h,n]});case "stencil.opFront":case "stencil.opBack":return v(function(c){e.commandType(c,
"object",H,d.commandStr);var f=c.fail||"keep",l=c.zfail||"keep";c=c.zpass||"keep";e.commandParameter(f,h,b+".fail",d.commandStr);e.commandParameter(l,h,b+".zfail",d.commandStr);e.commandParameter(c,h,b+".zpass",d.commandStr);return["stencil.opBack"===b?1029:1028,h[f],h[l],h[c]]},function(d,c,f){function l(v){e.optional(function(){d.assert(c,'!("'+v+'" in '+f+")||("+f+"."+v+" in "+n+")","invalid "+b+"."+v+", must be one of "+q(h))});return c.def('"',v,'" in ',f,"?",n,"[",f,".",v,"]:",7680)}var n=d.constants.stencilOps;
e.optional(function(){d.assert(c,f+"&&typeof "+f+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return v(function(b){e.commandType(b,"object",H,d.commandStr);var c=b.factor|0;b=b.units|0;e.commandType(c,"number",H+".factor",d.commandStr);e.commandType(b,"number",H+".units",d.commandStr);return[c,b]},function(d,c,f){e.optional(function(){d.assert(c,f+"&&typeof "+f+'==="object"',"invalid "+b)});var l=c.def(f,".factor|0"),
h=c.def(f,".units|0");return[l,h]});case "cull.face":return v(function(b){var c=0;"front"===b?c=1028:"back"===b&&(c=1029);e.command(!!c,H,d.commandStr);return c},function(b,d,c){e.optional(function(){b.assert(d,c+'==="front"||'+c+'==="back"',"invalid cull.face")});return d.def(c,'==="front"?',1028,":",1029)});case "lineWidth":return v(function(b){e.command("number"===typeof b&&b>=E.lineWidthDims[0]&&b<=E.lineWidthDims[1],"invalid line width, must be a positive number between "+E.lineWidthDims[0]+
" and "+E.lineWidthDims[1],d.commandStr);return b},function(b,d,c){e.optional(function(){b.assert(d,"typeof "+c+'==="number"&&'+c+">="+E.lineWidthDims[0]+"&&"+c+"<="+E.lineWidthDims[1],"invalid line width")});return c});case "frontFace":return v(function(b){e.commandParameter(b,r,H,d.commandStr);return r[b]},function(b,d,c){e.optional(function(){b.assert(d,c+'==="cw"||'+c+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(c+'==="cw"?2304:2305')});case "colorMask":return v(function(b){e.command(m(b)&&
4===b.length,"color.mask must be length 4 array",d.commandStr);return b.map(function(b){return!!b})},function(b,d,c){e.optional(function(){b.assert(d,b.shared.isArrayLike+"("+c+")&&"+c+".length===4","invalid color.mask")});return L(4,function(b){return"!!"+c+"["+b+"]"})});case "sample.coverage":return v(function(b){e.command("object"===typeof b&&b,H,d.commandStr);var c="value"in b?b.value:1;b=!!b.invert;e.command("number"===typeof c&&0<=c&&1>=c,"sample.coverage.value must be a number between 0 and 1",
d.commandStr);return[c,b]},function(b,d,c){e.optional(function(){b.assert(d,c+"&&typeof "+c+'==="object"',"invalid sample.coverage")});var f=d.def('"value" in ',c,"?+",c,".value:1"),l=d.def("!!",c,".invert");return[f,l]})}});return p}function la(b,d){var c=b["static"],l=b.dynamic,h={};q(c).forEach(function(b){var f=c[b],l;if("number"===typeof f||"boolean"===typeof f)l=g(function(){return f});else if("function"===typeof f){var n=f._reglType;"texture2d"===n||"textureCube"===n?l=g(function(b){return b.link(f)}):
"framebuffer"===n||"framebufferCube"===n?(e.command(0<f.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',d.commandStr),l=g(function(b){return b.link(f.color[0])})):e.commandRaise('invalid data for uniform "'+b+'"',d.commandStr)}else m(f)?l=g(function(d){return d.global.def("[",L(f.length,function(c){e.command("number"===typeof f[c]||"boolean"===typeof f[c],"invalid uniform "+b,d.commandStr);return f[c]}),"]")}):e.commandRaise('invalid or missing data for uniform "'+
b+'"',d.commandStr);l.value=f;h[b]=l});q(l).forEach(function(b){var d=l[b];h[b]=f(d,function(b,c){return b.invoke(c,d)})});return h}function pa(b,d){var c=b["static"],l=b.dynamic,h={};q(c).forEach(function(b){var f=c[b],l=w.id(b),n=new sa;if(a(f))n.state=1,n.buffer=D.getBuffer(D.create(f,34962,!1,!0)),n.type=0;else{var v=D.getBuffer(f);if(v)n.state=1,n.buffer=v,n.type=0;else if(e.command("object"===typeof f&&f,"invalid data for attribute "+b,d.commandStr),"constant"in f){var p=f.constant;n.buffer=
"null";n.state=2;"number"===typeof p?n.x=p:(e.command(m(p)&&0<p.length&&4>=p.length,"invalid constant for attribute "+b,d.commandStr),U.forEach(function(b,d){d<p.length&&(n[b]=p[d])}))}else{v=a(f.buffer)?D.getBuffer(D.create(f.buffer,34962,!1,!0)):D.getBuffer(f.buffer);e.command(!!v,'missing buffer for attribute "'+b+'"',d.commandStr);var H=f.offset|0;e.command(0<=H,'invalid offset for attribute "'+b+'"',d.commandStr);var k=f.stride|0;e.command(0<=k&&256>k,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',
d.commandStr);var r=f.size|0;e.command(!("size"in f)||0<r&&4>=r,'invalid size for attribute "'+b+'", must be 1,2,3,4',d.commandStr);var I=!!f.normalized,ma=0;"type"in f&&(e.commandParameter(f.type,y,"invalid type for attribute "+b,d.commandStr),ma=y[f.type]);var P=f.divisor|0;e.optional(function(){"divisor"in f&&(e.command(0===P||ra,'cannot specify divisor for attribute "'+b+'", instancing not supported',d.commandStr),e.command(0<=P,'invalid divisor for attribute "'+b+'"',d.commandStr));var c=d.commandStr,
l="buffer offset divisor normalized type size stride".split(" ");q(f).forEach(function(d){e.command(0<=l.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+b+'" (valid parameters are '+l+")",c)})});n.buffer=v;n.state=1;n.size=r;n.normalized=I;n.type=ma||v.dtype;n.offset=H;n.stride=k;n.divisor=P}}h[b]=g(function(b,d){var c=b.attribCache;if(l in c)return c[l];var e={isStream:!1};q(n).forEach(function(b){e[b]=n[b]});n.buffer&&(e.buffer=b.link(n.buffer),e.type=e.type||e.buffer+".dtype");return c[l]=
e})});q(l).forEach(function(b){var d=l[b];h[b]=f(d,function(c,f){function l(b){f(k[b],"=",n,".",b,"|0;")}var n=c.invoke(f,d),h=c.shared,v=c.constants,p=h.isBufferArgs,H=h.buffer;e.optional(function(){c.assert(f,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+p+"("+n+")||"+H+".getBuffer("+n+")||"+H+".getBuffer("+n+".buffer)||"+p+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+h.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+b+'"')});var k=
{isStream:f.def(!1)},r=new sa;r.state=1;q(r).forEach(function(b){k[b]=f.def(""+r[b])});var I=k.buffer,ma=k.type;f("if(",p,"(",n,")){",k.isStream,"=true;",I,"=",H,".createStream(",34962,",",n,");",ma,"=",I,".dtype;","}else{",I,"=",H,".getBuffer(",n,");","if(",I,"){",ma,"=",I,".dtype;",'}else if("constant" in ',n,"){",k.state,"=",2,";","if(typeof "+n+'.constant === "number"){',k[U[0]],"=",n,".constant;",U.slice(1).map(function(b){return k[b]}).join("="),"=0;","}else{",U.map(function(b,d){return k[b]+
"="+n+".constant.length>"+d+"?"+n+".constant["+d+"]:0;"}).join(""),"}}else{","if(",p,"(",n,".buffer)){",I,"=",H,".createStream(",34962,",",n,".buffer);","}else{",I,"=",H,".getBuffer(",n,".buffer);","}",ma,'="type" in ',n,"?",v.glTypes,"[",n,".type]:",I,".dtype;",k.normalized,"=!!",n,".normalized;");l("size");l("offset");l("stride");l("divisor");f("}}");f.exit("if(",k.isStream,"){",H,".destroyStream(",I,");","}");return k})});return h}function Ca(b){var d=b["static"],c=b.dynamic,e={};q(d).forEach(function(b){var c=
d[b];e[b]=g(function(b,d){return"number"===typeof c||"boolean"===typeof c?""+c:b.link(c)})});q(c).forEach(function(b){var d=c[b];e[b]=f(d,function(b,c){return b.invoke(c,d)})});return e}function Ba(b,d,c,f,l){function h(b){var d=r[b];d&&(ma[b]=d)}var v=b["static"],p=b.dynamic;e.optional(function(){function b(c){q(c).forEach(function(b){e.command(0<=d.indexOf(b),'unknown parameter "'+b+'"',l.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ta);
b(v);b(p)});var H=n(b,d),k=wa(b,l),r=na(b,k,l),I=ba(b,l),ma=S(b,l),w=G(b,l,H);h("viewport");h(T("scissor.box"));var P=0<q(ma).length,k={framebuffer:k,draw:I,shader:w,state:ma,dirty:P,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};k.profile=N(b,l);k.uniforms=la(c,l);k.drawVAO=k.scopeVAO=I.vao;if(!k.drawVAO&&w.program&&!H&&A.angle_instanced_arrays&&I["static"].elements){var M=!0;b=w.program.attributes.map(function(b){b=d["static"][b];M=M&&!!b;return b});if(M&&0<b.length){var sa=B.getVAO(B.createVAO({attributes:b,
elements:I["static"].elements}));k.drawVAO=new F(null,null,null,function(b,d){return b.link(sa)});k.useVAO=!0}}H?k.useVAO=!0:k.attributes=pa(d,l);k.context=Ca(f,l);return k}function fa(b,d,c){var e=b.shared.context,f=b.scope();q(c).forEach(function(l){d.save(e,"."+l);var n=c[l].append(b,d);Array.isArray(n)?f(e,".",l,"=[",n.join(),"];"):f(e,".",l,"=",n,";")});d(f)}function Ea(b,d,c,e){var f=b.shared,l=f.gl,n=f.framebuffer,h;za&&(h=d.def(f.extensions,".webgl_draw_buffers"));var v=b.constants,f=v.drawBuffer,
v=v.backBuffer;b=c?c.append(b,d):d.def(n,".next");e||d("if(",b,"!==",n,".cur){");d("if(",b,"){",l,".bindFramebuffer(",36160,",",b,".framebuffer);");za&&d(h,".drawBuffersWEBGL(",f,"[",b,".colorAttachments.length]);");d("}else{",l,".bindFramebuffer(",36160,",null);");za&&d(h,".drawBuffersWEBGL(",v,");");d("}",n,".cur=",b,";");e||d("}")}function ja(b,d,c){var e=b.shared,f=e.gl,l=b.current,n=b.next,h=e.current,v=e.next,p=b.cond(h,".dirty");ta.forEach(function(d){d=T(d);if(!(d in c.state)){var e,H;if(d in
n){e=n[d];H=l[d];var k=L(ka[d].length,function(b){return p.def(e,"[",b,"]")});p(b.cond(k.map(function(b,d){return b+"!=="+H+"["+d+"]"}).join("||")).then(f,".",Fa[d],"(",k,");",k.map(function(b,d){return H+"["+d+"]="+b}).join(";"),";"))}else e=p.def(v,".",d),k=b.cond(e,"!==",h,".",d),p(k),d in Ja?k(b.cond(e).then(f,".enable(",Ja[d],");")["else"](f,".disable(",Ja[d],");"),h,".",d,"=",e,";"):k(f,".",Fa[d],"(",e,");",h,".",d,"=",e,";")}});0===q(c.state).length&&p(h,".dirty=false;");d(p)}function oa(b,
d,c,e){var f=b.shared,l=b.current,n=f.current,h=f.gl;X(q(c)).forEach(function(f){var v=c[f];if(!e||e(v)){var p=v.append(b,d);if(Ja[f]){var H=Ja[f];J(v)?p?d(h,".enable(",H,");"):d(h,".disable(",H,");"):d(b.cond(p).then(h,".enable(",H,");")["else"](h,".disable(",H,");"));d(n,".",f,"=",p,";")}else if(m(p)){var k=l[f];d(h,".",Fa[f],"(",p,");",p.map(function(b,d){return k+"["+d+"]="+b}).join(";"),";")}else d(h,".",Fa[f],"(",p,");",n,".",f,"=",p,";")}})}function ya(b,d){ra&&(b.instancing=d.def(b.shared.extensions,
".angle_instanced_arrays"))}function Ma(b,d,c,e,f){function l(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function n(b){r=d.def();b(r,"=",l(),";");"string"===typeof f?b(H,".count+=",f,";"):b(H,".count++;");ea&&(e?(I=d.def(),b(I,"=",q,".getNumPendingQueries();")):b(q,".beginQuery(",H,");"))}function h(b){b(H,".cpuTime+=",l(),"-",r,";");ea&&(e?b(q,".pushScopeStats(",I,",",q,".getNumPendingQueries(),",H,");"):b(q,".endQuery();"))}function v(b){var c=d.def(k,".profile");
d(k,".profile=",b,";");d.exit(k,".profile=",c,";")}var p=b.shared,H=b.stats,k=p.current,q=p.timer;c=c.profile;var r,I;if(c){if(J(c)){c.enable?(n(d),h(d.exit),v("true")):v("false");return}c=c.append(b,d);v(c)}else c=d.def(k,".profile");p=b.block();n(p);d("if(",c,"){",p,"}");b=b.block();h(b);d.exit("if(",c,"){",b,"}")}function ma(b,d,c,f,l){function n(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}
function h(c,e,f){function l(){d("if(!",k,".buffer){",p,".enableVertexAttribArray(",H,");}");var c=f.type,n;n=f.size?d.def(f.size,"||",e):e;d("if(",k,".type!==",c,"||",k,".size!==",n,"||",I.map(function(b){return k+"."+b+"!=="+f[b]}).join("||"),"){",p,".bindBuffer(",34962,",",q,".buffer);",p,".vertexAttribPointer(",[H,n,c,f.normalized,f.stride,f.offset],");",k,".type=",c,";",k,".size=",n,";",I.map(function(b){return k+"."+b+"="+f[b]+";"}).join(""),"}");ra&&(c=f.divisor,d("if(",k,".divisor!==",c,"){",
b.instancing,".vertexAttribDivisorANGLE(",[H,c],");",k,".divisor=",c,";}"))}function n(){d("if(",k,".buffer){",p,".disableVertexAttribArray(",H,");",k,".buffer=null;","}if(",U.map(function(b,d){return k+"."+b+"!=="+r[d]}).join("||"),"){",p,".vertexAttrib4f(",H,",",r,");",U.map(function(b,d){return k+"."+b+"="+r[d]+";"}).join(""),"}")}var p=v.gl,H=d.def(c,".location"),k=d.def(v.attributes,"[",H,"]");c=f.state;var q=f.buffer,r=[f.x,f.y,f.z,f.w],I=["buffer","normalized","offset","stride"];1===c?l():
2===c?n():(d("if(",c,"===",1,"){"),l(),d("}else{"),n(),d("}"))}var v=b.shared;f.forEach(function(f){var v=f.name,p=c.attributes[v],H;if(p){if(!l(p))return;H=p.append(b,d)}else{if(!l(aa))return;var k=b.scopeAttrib(v);e.optional(function(){b.assert(d,k+".state","missing attribute "+v)});H={};q(new sa).forEach(function(b){H[b]=d.def(k,".",b)})}h(b.link(f),n(f.info.type),H)})}function cc(b,d,c,f,l,n){for(var h=b.shared,v=h.gl,p,H=0;H<f.length;++H){var k=f[H],q=k.name,r=k.info.type,I=c.uniforms[q],k=b.link(k)+
".location",ma;if(I){if(!l(I))continue;if(J(I)){var P=I.value;e.command(null!==P&&"undefined"!==typeof P,'missing uniform "'+q+'"',b.commandStr);if(35678===r||35680===r)e.command("function"===typeof P&&(35678===r&&("texture2d"===P._reglType||"framebuffer"===P._reglType)||35680===r&&("textureCube"===P._reglType||"framebufferCube"===P._reglType)),"invalid texture for uniform "+q,b.commandStr),I=b.link(P._texture||P.color[0]._texture),d(v,".uniform1i(",k,",",I+".bind());"),d.exit(I,".unbind();");else if(35674===
r||35675===r||35676===r){e.optional(function(){e.command(m(P),"invalid matrix for uniform "+q,b.commandStr);e.command(35674===r&&4===P.length||35675===r&&9===P.length||35676===r&&16===P.length,"invalid length for matrix uniform "+q,b.commandStr)});var I=b.global.def("new Float32Array(["+Array.prototype.slice.call(P)+"])"),M=2;35675===r?M=3:35676===r&&(M=4);d(v,".uniformMatrix",M,"fv(",k,",false,",I,");")}else{switch(r){case 5126:e.commandType(P,"number","uniform "+q,b.commandStr);p="1f";break;case 35664:e.command(m(P)&&
2===P.length,"uniform "+q,b.commandStr);p="2f";break;case 35665:e.command(m(P)&&3===P.length,"uniform "+q,b.commandStr);p="3f";break;case 35666:e.command(m(P)&&4===P.length,"uniform "+q,b.commandStr);p="4f";break;case 35670:e.commandType(P,"boolean","uniform "+q,b.commandStr);p="1i";break;case 5124:e.commandType(P,"number","uniform "+q,b.commandStr);p="1i";break;case 35671:e.command(m(P)&&2===P.length,"uniform "+q,b.commandStr);p="2i";break;case 35667:e.command(m(P)&&2===P.length,"uniform "+q,b.commandStr);
p="2i";break;case 35672:e.command(m(P)&&3===P.length,"uniform "+q,b.commandStr);p="3i";break;case 35668:e.command(m(P)&&3===P.length,"uniform "+q,b.commandStr);p="3i";break;case 35673:e.command(m(P)&&4===P.length,"uniform "+q,b.commandStr);p="4i";break;case 35669:e.command(m(P)&&4===P.length,"uniform "+q,b.commandStr),p="4i"}d(v,".uniform",p,"(",k,",",m(P)?Array.prototype.slice.call(P):P,");")}continue}else ma=I.append(b,d)}else{if(!l(aa))continue;ma=d.def(h.uniforms,"[",w.id(q),"]")}35678===r?(e(!Array.isArray(ma),
"must specify a scalar prop for textures"),d("if(",ma,"&&",ma,'._reglType==="framebuffer"){',ma,"=",ma,".color[0];","}")):35680===r&&(e(!Array.isArray(ma),"must specify a scalar prop for cube maps"),d("if(",ma,"&&",ma,'._reglType==="framebufferCube"){',ma,"=",ma,".color[0];","}"));e.optional(function(){function c(f,e){b.assert(d,f,'bad data or missing for uniform "'+q+'".  '+e)}function f(b){e(!Array.isArray(ma),"must not specify an array type for uniform");c("typeof "+ma+'==="'+b+'"',"invalid type, expected "+
b)}function l(d,f){Array.isArray(ma)?e(ma.length===d,"must have length "+d):c(h.isArrayLike+"("+ma+")&&"+ma+".length==="+d,"invalid vector, should have length "+d,b.commandStr)}function n(d){e(!Array.isArray(ma),"must not specify a value type");c("typeof "+ma+'==="function"&&'+ma+'._reglType==="texture'+(3553===d?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(r){case 5124:f("number");break;case 35667:l(2,"number");break;case 35668:l(3,"number");break;case 35669:l(4,"number");break;case 5126:f("number");
break;case 35664:l(2,"number");break;case 35665:l(3,"number");break;case 35666:l(4,"number");break;case 35670:f("boolean");break;case 35671:l(2,"boolean");break;case 35672:l(3,"boolean");break;case 35673:l(4,"boolean");break;case 35674:l(4,"number");break;case 35675:l(9,"number");break;case 35676:l(16,"number");break;case 35678:n(3553);break;case 35680:n(34067)}});I=1;switch(r){case 35678:case 35680:I=d.def(ma,"._texture");d(v,".uniform1i(",k,",",I,".bind());");d.exit(I,".unbind();");continue;case 5124:case 35670:p=
"1i";break;case 35667:case 35671:p="2i";I=2;break;case 35668:case 35672:p="3i";I=3;break;case 35669:case 35673:p="4i";I=4;break;case 5126:p="1f";break;case 35664:p="2f";I=2;break;case 35665:p="3f";I=3;break;case 35666:p="4f";I=4;break;case 35674:p="Matrix2fv";break;case 35675:p="Matrix3fv";break;case 35676:p="Matrix4fv"}if("M"===p.charAt(0)){d(v,".uniform",p,"(",k,",");var k=Math.pow(r-35674+2,2),T=b.global.def("new Float32Array(",k,")");Array.isArray(ma)?d("false,(",L(k,function(b){return T+"["+
b+"]="+ma[b]}),",",T,")"):d("false,(Array.isArray(",ma,")||",ma," instanceof Float32Array)?",ma,":(",L(k,function(b){return T+"["+b+"]="+ma+"["+b+"]"}),",",T,")");d(");")}else{if(1<I){for(var M=[],sa=[],Ma=0;Ma<I;++Ma)Array.isArray(ma)?sa.push(ma[Ma]):sa.push(d.def(ma+"["+Ma+"]")),n&&M.push(d.def());n&&d("if(!",b.batchId,"||",M.map(function(b,d){return b+"!=="+sa[d]}).join("||"),"){",M.map(function(b,d){return b+"="+sa[d]+";"}).join(""));d(v,".uniform",p,"(",k,",",sa.join(","),");")}else e(!Array.isArray(ma),
"uniform value must not be an array"),n&&(I=d.def(),d("if(!",b.batchId,"||",I,"!==",ma,"){",I,"=",ma,";")),d(v,".uniform",p,"(",k,",",ma,");");n&&d("}")}}}function Ta(b,d,c,f){function l(e){var n=k[e];return n?n.contextDep&&f.contextDynamic||n.propDep?n.append(b,c):n.append(b,d):d.def(H,".",e)}function n(){function b(){c(w,".drawElementsInstancedANGLE(",[I,ma,M,r+"<<(("+M+"-5121)>>1)",P],");")}function d(){c(w,".drawArraysInstancedANGLE(",[I,r,ma,P],");")}q&&"null"!==q?T?b():(c("if(",q,"){"),b(),
c("}else{"),d(),c("}")):d()}function h(){function b(){c(v+".drawElements("+[I,ma,M,r+"<<(("+M+"-5121)>>1)"]+");")}function d(){c(v+".drawArrays("+[I,r,ma]+");")}q&&"null"!==q?T?b():(c("if(",q,"){"),b(),c("}else{"),d(),c("}")):d()}var p=b.shared,v=p.gl,H=p.draw,k=f.draw,q=function(){var e=k.elements,l=d;if(e){if(e.contextDep&&f.contextDynamic||e.propDep)l=c;e=e.append(b,l);k.elementsActive&&l("if("+e+")"+v+".bindBuffer(34963,"+e+".buffer.buffer);")}else e=l.def(),l(e,"=",H,".","elements",";","if(",
e,"){",v,".bindBuffer(",34963,",",e,".buffer.buffer);}","else if(",p.vao,".currentVAO){",e,"=",b.shared.elements+".getElements("+p.vao,".currentVAO.elements);",Da?"":"if("+e+")"+v+".bindBuffer(34963,"+e+".buffer.buffer);","}");return e}(),I=l("primitive"),r=l("offset"),ma=function(){var l=k.count,n,h=d;if(l){if(l.contextDep&&f.contextDynamic||l.propDep)h=c;n=l.append(b,h);e.optional(function(){l.MISSING&&b.assert(d,"false","missing vertex count");l.DYNAMIC&&b.assert(h,n+">=0","missing vertex count")})}else n=
h.def(H,".","count"),e.optional(function(){b.assert(h,n+">=0","missing vertex count")});return n}();if("number"===typeof ma){if(0===ma)return}else c("if(",ma,"){"),c.exit("}");var P,w;ra&&(P=l("instances"),w=b.instancing);var M=q+".type",T=k.elements&&J(k.elements)&&!k.vaoActive;ra&&("number"!==typeof P||0<=P)?"string"===typeof P?(c("if(",P,">0){"),n(),c("}else if(",P,"<0){"),h(),c("}")):n():h()}function v(b,d,c,f,l){var n=O();l=n.proc("body",l);e.optional(function(){n.commandStr=d.commandStr;n.command=
n.link(d.commandStr)});ra&&(n.instancing=l.def(n.shared.extensions,".angle_instanced_arrays"));b(n,l,c,f);return n.compile().body}function p(b,d,c,f){ya(b,d);c.useVAO?c.drawVAO?d(b.shared.vao,".setVAO(",c.drawVAO.append(b,d),");"):d(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(d(b.shared.vao,".setVAO(null);"),ma(b,d,c,f.attributes,function(){return!0}));cc(b,d,c,f.uniforms,function(){return!0},!1);Ta(b,d,d,c)}function I(b,d){var c=b.proc("draw",1);ya(b,c);fa(b,c,d.context);Ea(b,c,d.framebuffer);
ja(b,c,d);oa(b,c,d.state);Ma(b,c,d,!1,!0);var f=d.shader.progVar.append(b,c);c(b.shared.gl,".useProgram(",f,".program);");if(d.shader.program)p(b,c,d,d.shader.program);else{c(b.shared.vao,".setVAO(null);");var e=b.global.def("{}"),l=c.def(f,".id"),n=c.def(e,"[",l,"]");c(b.cond(n).then(n,".call(this,a0);")["else"](n,"=",e,"[",l,"]=",b.link(function(c){return v(p,b,d,c,1)}),"(",f,");",n,".call(this,a0);"))}0<q(d.state).length&&c(b.shared.current,".dirty=true;");b.shared.vao&&c(b.shared.vao,".setVAO(null);")}
function ua(b,d,c,f){function e(){return!0}b.batchId="a1";ya(b,d);ma(b,d,c,f.attributes,e);cc(b,d,c,f.uniforms,e,!1);Ta(b,d,d,c)}function va(b,d,c,f){function e(b){return b.contextDep&&n||b.propDep}function l(b){return!e(b)}ya(b,d);var n=c.contextDep,h=d.def(),p=d.def();b.shared.props=p;b.batchId=h;var k=b.scope(),H=b.scope();d(k.entry,"for(",h,"=0;",h,"<","a1",";++",h,"){",p,"=","a0","[",h,"];",H,"}",k.exit);c.needsContext&&fa(b,H,c.context);c.needsFramebuffer&&Ea(b,H,c.framebuffer);oa(b,H,c.state,
e);c.profile&&e(c.profile)&&Ma(b,H,c,!1,!0);f?(c.useVAO?c.drawVAO?e(c.drawVAO)?H(b.shared.vao,".setVAO(",c.drawVAO.append(b,H),");"):k(b.shared.vao,".setVAO(",c.drawVAO.append(b,k),");"):k(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(k(b.shared.vao,".setVAO(null);"),ma(b,k,c,f.attributes,l),ma(b,H,c,f.attributes,e)),cc(b,k,c,f.uniforms,l,!1),cc(b,H,c,f.uniforms,e,!0),Ta(b,k,H,c)):(d=b.global.def("{}"),f=c.shader.progVar.append(b,H),p=H.def(f,".id"),k=H.def(d,"[",p,"]"),H(b.shared.gl,".useProgram(",
f,".program);","if(!",k,"){",k,"=",d,"[",p,"]=",b.link(function(d){return v(ua,b,c,d,2)}),"(",f,");}",k,".call(this,a0[",h,"],",h,");"))}function dd(b,d){function c(b){return b.contextDep&&e||b.propDep}var f=b.proc("batch",2);b.batchId="0";ya(b,f);var e=!1,l=!0;q(d.context).forEach(function(b){e=e||d.context[b].propDep});e||(fa(b,f,d.context),l=!1);var n=d.framebuffer,h=!1;n?(n.propDep?e=h=!0:n.contextDep&&e&&(h=!0),h||Ea(b,f,n)):Ea(b,f,null);d.state.viewport&&d.state.viewport.propDep&&(e=!0);ja(b,
f,d);oa(b,f,d.state,function(b){return!c(b)});d.profile&&c(d.profile)||Ma(b,f,d,!1,"a1");d.contextDep=e;d.needsContext=l;d.needsFramebuffer=h;l=d.shader.progVar;if(l.contextDep&&e||l.propDep)va(b,f,d,null);else if(l=l.append(b,f),f(b.shared.gl,".useProgram(",l,".program);"),d.shader.program)va(b,f,d,d.shader.program);else{f(b.shared.vao,".setVAO(null);");var n=b.global.def("{}"),h=f.def(l,".id"),p=f.def(n,"[",h,"]");f(b.cond(p).then(p,".call(this,a0,a1);")["else"](p,"=",n,"[",h,"]=",b.link(function(c){return v(va,
b,d,c,2)}),"(",l,");",p,".call(this,a0,a1);"))}0<q(d.state).length&&f(b.shared.current,".dirty=true;");b.shared.vao&&f(b.shared.vao,".setVAO(null);")}function Gb(b,d){function c(l){var n=d.shader[l];n&&f.set(e.shader,"."+l,n.append(b,f))}var f=b.proc("scope",3);b.batchId="a2";var e=b.shared,l=e.current;fa(b,f,d.context);d.framebuffer&&d.framebuffer.append(b,f);X(q(d.state)).forEach(function(c){var l=d.state[c].append(b,f);m(l)?l.forEach(function(d,e){f.set(b.next[c],"["+e+"]",d)}):f.set(e.next,"."+
c,l)});Ma(b,f,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(c){var l=d.draw[c];l&&f.set(e.draw,"."+c,""+l.append(b,f))});q(d.uniforms).forEach(function(c){var l=d.uniforms[c].append(b,f);Array.isArray(l)&&(l="["+l.join()+"]");f.set(e.uniforms,"["+w.id(c)+"]",l)});q(d.attributes).forEach(function(c){var e=d.attributes[c].append(b,f),l=b.scopeAttrib(c);q(new sa).forEach(function(b){f.set(l,"."+b,e[b])})});d.scopeVAO&&f.set(e.vao,".targetVAO",d.scopeVAO.append(b,f));
c("vert");c("frag");0<q(d.state).length&&(f(l,".dirty=true;"),f.exit(l,".dirty=true;"));f("a1(",b.shared.context,",a0,",b.batchId,");")}function ha(b){if("object"===typeof b&&!m(b)){for(var d=q(b),c=0;c<d.length;++c)if(t.isDynamic(b[d[c]]))return!0;return!1}}function H(b,d,c){function e(b,d){h.forEach(function(c){var f=l[c];t.isDynamic(f)&&(f=b.invoke(d,f),d(H,".",c,"=",f,";"))})}var l=d["static"][c];if(l&&ha(l)){var n=b.global,h=q(l),p=!1,v=!1,k=!1,H=b.global.def("{}");h.forEach(function(d){var c=
l[d];if(t.isDynamic(c))"function"===typeof c&&(c=l[d]=t.unbox(c)),d=f(c,null),p=p||d.thisDep,k=k||d.propDep,v=v||d.contextDep;else{n(H,".",d,"=");switch(typeof c){case "number":n(c);break;case "string":n('"',c,'"');break;case "object":Array.isArray(c)&&n("[",c.join(),"]");break;default:n(b.link(c))}n(";")}});d.dynamic[c]=new t.DynamicVariable(4,{thisDep:p,contextDep:v,propDep:k,ref:H,append:e});delete d["static"][c]}}var sa=B.Record,Ga={add:32774,subtract:32778,"reverse subtract":32779};A.ext_blend_minmax&&
(Ga.min=32775,Ga.max=32776);var ra=A.angle_instanced_arrays,za=A.webgl_draw_buffers,Da=A.oes_vertex_array_object,ka={dirty:!0,profile:R.profile},Z={},ta=[],Ja={},Fa={};z("dither",3024);z("blend.enable",3042);l("blend.color","blendColor",[0,0,0,0]);l("blend.equation","blendEquationSeparate",[32774,32774]);l("blend.func","blendFuncSeparate",[1,0,1,0]);z("depth.enable",2929,!0);l("depth.func","depthFunc",513);l("depth.range","depthRange",[0,1]);l("depth.mask","depthMask",!0);l("colorMask","colorMask",
[!0,!0,!0,!0]);z("cull.enable",2884);l("cull.face","cullFace",1029);l("frontFace","frontFace",2305);l("lineWidth","lineWidth",1);z("polygonOffset.enable",32823);l("polygonOffset.offset","polygonOffset",[0,0]);z("sample.alpha",32926);z("sample.enable",32928);l("sample.coverage","sampleCoverage",[1,!1]);z("stencil.enable",2960);l("stencil.mask","stencilMask",-1);l("stencil.func","stencilFunc",[519,0,-1]);l("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);l("stencil.opBack","stencilOpSeparate",
[1029,7680,7680,7680]);z("scissor.enable",3089);l("scissor.box","scissor",[0,0,k.drawingBufferWidth,k.drawingBufferHeight]);l("viewport","viewport",[0,0,k.drawingBufferWidth,k.drawingBufferHeight]);var gb={gl:k,context:Y,strings:w,next:Z,current:ka,draw:hd,elements:d,buffer:D,shader:qa,attributes:B.state,vao:B,uniforms:K,framebuffer:b,extensions:A,timer:ea,isBufferArgs:a},ca={primTypes:da,compareFuncs:c,blendFuncs:Q,blendEquations:Ga,stencilOps:h,glTypes:y,orientationType:r};e.optional(function(){gb.isArrayLike=
m});za&&(ca.backBuffer=[1029],ca.drawBuffer=L(E.maxDrawbuffers,function(b){return 0===b?[0]:L(b,function(b){return 36064+b})}));var zd=0;return{next:Z,current:ka,procs:function(){var b=O(),d=b.proc("poll"),c=b.proc("refresh"),f=b.block();d(f);c(f);var e=b.shared,l=e.gl,n=e.next,h=e.current;f(h,".dirty=false;");Ea(b,d);Ea(b,c,null,!0);var p;ra&&(p=b.link(ra));A.oes_vertex_array_object&&c(b.link(A.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var v=0;v<E.maxAttributes;++v){var k=c.def(e.attributes,
"[",v,"]"),H=b.cond(k,".buffer");H.then(l,".enableVertexAttribArray(",v,");",l,".bindBuffer(",34962,",",k,".buffer.buffer);",l,".vertexAttribPointer(",v,",",k,".size,",k,".type,",k,".normalized,",k,".stride,",k,".offset);")["else"](l,".disableVertexAttribArray(",v,");",l,".vertexAttrib4f(",v,",",k,".x,",k,".y,",k,".z,",k,".w);",k,".buffer=null;");c(H);ra&&c(p,".vertexAttribDivisorANGLE(",v,",",k,".divisor);")}c(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");
q(Ja).forEach(function(e){var p=Ja[e],v=f.def(n,".",e),k=b.block();k("if(",v,"){",l,".enable(",p,")}else{",l,".disable(",p,")}",h,".",e,"=",v,";");c(k);d("if(",v,"!==",h,".",e,"){",k,"}")});q(Fa).forEach(function(e){var p=Fa[e],v=ka[e],k,H,q=b.block();q(l,".",p,"(");m(v)?(p=v.length,k=b.global.def(n,".",e),H=b.global.def(h,".",e),q(L(p,function(b){return k+"["+b+"]"}),");",L(p,function(b){return H+"["+b+"]="+k+"["+b+"];"}).join("")),d("if(",L(p,function(b){return k+"["+b+"]!=="+H+"["+b+"]"}).join("||"),
"){",q,"}")):(k=f.def(n,".",e),H=f.def(h,".",e),q(k,");",h,".",e,"=",k,";"),d("if(",k,"!==",H,"){",q,"}"));c(q)});return b.compile()}(),compile:function(b,d,c,f,e){var l=O();l.stats=l.link(e);q(d["static"]).forEach(function(b){H(l,d,b)});u.forEach(function(d){H(l,b,d)});var n=Ba(b,d,c,f,l);I(l,n);Gb(l,n);dd(l,n);return x(l.compile(),{destroy:function(){n.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,
"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(V,ia,Aa){function a(q,e){this.id=f++;this.type=q;this.data=e}function X(f){if(0===f.length)return[];var e=f.charAt(0),g=f.charAt(f.length-1);if(1<f.length&&e===g&&('"'===e||"'"===e))return['"'+f.substr(1,f.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(e=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(f))return X(f.substr(0,e.index)).concat(X(e[1])).concat(X(f.substr(e.index+
e[0].length)));e=f.split(".");if(1===e.length)return['"'+f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];f=[];for(g=0;g<e.length;++g)f=f.concat(X(e[g]));return f}function F(f){return"["+X(f).join("][")+"]"}function J(f,e){if("function"===typeof f)return new a(0,f);if("number"===typeof f||"boolean"===typeof f)return new a(5,f);if(Array.isArray(f))return new a(6,f.map(function(f,q){return J(f,e+"["+q+"]")}));if(f instanceof a)return f;g(!1,"invalid option type in uniform "+e)}var g=V("./util/check"),
f=0;ia.exports={DynamicVariable:a,define:function(f,e){return new a(f,F(e+""))},isDynamic:function(f){return"function"===typeof f&&!f._reglType||f instanceof a},unbox:J,accessor:F}},{"./util/check":21}],10:[function(V,ia,Aa){var a=V("./util/check"),X=V("./util/is-typed-array"),F=V("./util/is-ndarray"),J=V("./util/values"),g=V("./constants/primitives.json"),f=V("./constants/usage.json");ia.exports=function(q,e,x,C){function L(f){this.id=t++;m[this.id]=this;this.buffer=f;this.primType=4;this.type=this.vertCount=
0}function K(f,g,y,A,c,h,M){f.buffer.bind();var r;g?((r=M)||X(g)&&(!F(g)||X(g.data))||(r=e.oes_element_index_uint?5125:5123),x._initBuffer(f.buffer,g,y,r,3)):(q.bufferData(34963,h,y),f.buffer.dtype=r||5121,f.buffer.usage=y,f.buffer.dimension=3,f.buffer.byteLength=h);r=M;if(!M){switch(f.buffer.dtype){case 5121:case 5120:r=5121;break;case 5123:case 5122:r=5123;break;case 5125:case 5124:r=5125;break;default:a.raise("unsupported type for element array")}f.buffer.dtype=r}f.type=r;a(5125!==r||!!e.oes_element_index_uint,
"32 bit element buffers not supported, enable oes_element_index_uint first");g=c;0>g&&(g=f.buffer.byteLength,5123===r?g>>=1:5125===r&&(g>>=2));f.vertCount=g;g=A;0>A&&(g=4,A=f.buffer.dimension,1===A&&(g=0),2===A&&(g=1),3===A&&(g=4));f.primType=g}function A(f){C.elementsCount--;a(null!==f.buffer,"must not double destroy elements");delete m[f.id];f.buffer.destroy();f.buffer=null}var m={},t=0,da={uint8:5121,uint16:5123};e.oes_element_index_uint&&(da.uint32=5125);L.prototype.bind=function(){this.buffer.bind()};
var y=[];return{create:function(e,q){function y(e){if(e)if("number"===typeof e)m(e),c.primType=4,c.vertCount=e|0,c.type=5121;else{var q=null,r=35044,u=-1,k=-1,w=0,A=0;if(Array.isArray(e)||X(e)||F(e))q=e;else if(a.type(e,"object","invalid arguments for elements"),"data"in e&&(q=e.data,a(Array.isArray(q)||X(q)||F(q),"invalid data for element buffer")),"usage"in e&&(a.parameter(e.usage,f,"invalid element buffer usage"),r=f[e.usage]),"primitive"in e&&(a.parameter(e.primitive,g,"invalid element buffer primitive"),
u=g[e.primitive]),"count"in e&&(a("number"===typeof e.count&&0<=e.count,"invalid vertex count for elements"),k=e.count|0),"type"in e&&(a.parameter(e.type,da,"invalid buffer type"),A=da[e.type]),"length"in e)w=e.length|0;else if(w=k,5123===A||5122===A)w*=2;else if(5125===A||5124===A)w*=4;K(c,q,r,u,k,w,A)}else m(),c.primType=4,c.vertCount=0,c.type=5121;return y}var m=x.create(null,34963,!0),c=new L(m._buffer);C.elementsCount++;y(e);y._reglType="elements";y._elements=c;y.subdata=function(c,f){m.subdata(c,
f);return y};y.destroy=function(){A(c)};return y},createStream:function(f){var e=y.pop();e||(e=new L(x.create(null,34963,!0,!1)._buffer));K(e,f,35040,-1,-1,0,0);return e},destroyStream:function(f){y.push(f)},getElements:function(f){return"function"===typeof f&&f._elements instanceof L?f._elements:null},clear:function(){J(m).forEach(A)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(V,
ia,Aa){var a=V("./util/sorted-object-keys"),X=V("./util/check");ia.exports=function(F,J){function g(e){X.type(e,"string","extension name must be string");e=e.toLowerCase();var q;try{q=f[e]=F.getExtension(e)}catch(g){}return!!q}for(var f={},q=0;q<J.extensions.length;++q){var e=J.extensions[q];if(!g(e))return J.onDestroy(),J.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}J.optionalExtensions.forEach(g);return{extensions:f,
restore:function(){a(f).forEach(function(e){if(f[e]&&!g(e))throw Error("(regl): error restoring extension "+e);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(V,ia,Aa){var a=V("./util/check"),X=V("./util/values"),F=V("./util/extend"),J=[6407,6408],g=[];g[6408]=4;g[6407]=3;var f=[];f[5121]=1;f[5126]=4;f[36193]=2;var q=[32854,32855,36194,35907,34842,34843,34836],e={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",
36061:"unsupported"};ia.exports=function(x,C,L,K,A,m){function t(b,d,c){this.target=b;this.texture=d;this.renderbuffer=c;var f=b=0;d?(b=d.width,f=d.height):c&&(b=c.width,f=c.height);this.width=b;this.height=f}function da(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function y(b,d,c){if(b){if(b.texture){b=b.texture._texture;var f=Math.max(1,b.height);a(Math.max(1,b.width)===d&&f===c,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,
a(b.width===d&&b.height===c,"inconsistent width/height for renderbuffer");b.refCount+=1}}function U(b,d){d&&(d.texture?x.framebufferTexture2D(36160,b,d.target,d.texture._texture.texture,0):x.framebufferRenderbuffer(36160,b,36161,d.renderbuffer._renderbuffer.renderbuffer))}function u(b){var d=3553,c=null,f=null,e=b;"object"===typeof b&&(e=b.data,"target"in b&&(d=b.target|0));a.type(e,"function","invalid attachment data");b=e._reglType;"texture2d"===b?(c=e,a(3553===d)):"textureCube"===b?(c=e,a(34069<=
d&&34075>d,"invalid cube map target")):"renderbuffer"===b?(f=e,d=36161):a.raise("invalid regl object for attachment");return new t(d,c,f)}function Q(b,d,c,f,e){if(c)return b=K.create2D({width:b,height:d,format:f,type:e}),b._texture.refCount=0,new t(3553,b,null);b=A.create({width:b,height:d,format:f});b._renderbuffer.refCount=0;return new t(36161,null,b)}function ga(b){return b&&(b.texture||b.renderbuffer)}function c(b,d,c){b&&(b.texture?b.texture.resize(d,c):b.renderbuffer&&b.renderbuffer.resize(d,
c),b.width=d,b.height=c)}function h(){this.id=d++;P[this.id]=this;this.framebuffer=x.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function M(b){b.colorAttachments.forEach(da);da(b.depthAttachment);da(b.stencilAttachment);da(b.depthStencilAttachment)}function r(b){var d=b.framebuffer;a(d,"must not double destroy framebuffer");x.deleteFramebuffer(d);b.framebuffer=null;m.framebufferCount--;delete P[b.id]}
function aa(b){var d;x.bindFramebuffer(36160,b.framebuffer);var c=b.colorAttachments;for(d=0;d<c.length;++d)U(36064+d,c[d]);for(d=c.length;d<L.maxColorAttachments;++d)x.framebufferTexture2D(36160,36064+d,3553,null,0);x.framebufferTexture2D(36160,33306,3553,null,0);x.framebufferTexture2D(36160,36096,3553,null,0);x.framebufferTexture2D(36160,36128,3553,null,0);U(36096,b.depthAttachment);U(36128,b.stencilAttachment);U(33306,b.depthStencilAttachment);b=x.checkFramebufferStatus(36160);x.isContextLost()||
36053===b||a.raise("framebuffer configuration not supported, status = "+e[b]);x.bindFramebuffer(36160,w.next?w.next.framebuffer:null);w.cur=w.next;x.getError()}function k(b,d){function e(b,d){var c;a(w.next!==k,"can not update framebuffer which is currently in use");var h=0,r=0,P=!0,l=!0;c=null;var A=!0,m="rgba",K="uint8",t=1,n=null,G=null,ba=null,S=!1;if("number"===typeof b)h=b|0,r=d|0||h;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(r=b.shape,a(Array.isArray(r)&&
2<=r.length,"invalid shape for framebuffer"),h=r[0],r=r[1]):("radius"in b&&(h=r=b.radius),"width"in b&&(h=b.width),"height"in b&&(r=b.height));if("color"in b||"colors"in b)c=b.color||b.colors,Array.isArray(c)&&a(1===c.length||C.webgl_draw_buffers,"multiple render targets not supported");if(!c){"colorCount"in b&&(t=b.colorCount|0,a(0<t,"invalid color buffer count"));"colorTexture"in b&&(A=!!b.colorTexture,m="rgba4");if("colorType"in b){K=b.colorType;if(A)a(C.oes_texture_float||!("float"===K||"float32"===
K),"you must enable OES_texture_float in order to use floating point framebuffer objects"),a(C.oes_texture_half_float||!("half float"===K||"float16"===K),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===K||"float16"===K)a(C.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),m="rgba16f";else if("float"===K||"float32"===K)a(C.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),
m="rgba32f";a.oneOf(K,D,"invalid color type")}"colorFormat"in b&&(m=b.colorFormat,0<=W.indexOf(m)?A=!0:0<=E.indexOf(m)?A=!1:a.optional(function(){if(A)a.oneOf(b.colorFormat,W,"invalid color format for texture");else a.oneOf(b.colorFormat,E,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)S=!(!b.depthTexture&&!b.depthStencilTexture),a(!S||C.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?P=b.depth:
(n=b.depth,l=!1));"stencil"in b&&("boolean"===typeof b.stencil?l=b.stencil:(G=b.stencil,P=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?P=l=b.depthStencil:(ba=b.depthStencil,l=P=!1))}else h=r=1;var x=null,pa=null,F=null,U=null;if(Array.isArray(c))x=c.map(u);else if(c)x=[u(c)];else for(x=Array(t),c=0;c<t;++c)x[c]=Q(h,r,A,m,K);a(C.webgl_draw_buffers||1>=x.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");a(x.length<=L.maxColorAttachments,
"too many color attachments, not supported");h=h||x[0].width;r=r||x[0].height;n?pa=u(n):P&&!l&&(pa=Q(h,r,S,"depth","uint32"));G?F=u(G):l&&!P&&(F=Q(h,r,!1,"stencil","uint8"));ba?U=u(ba):!n&&!G&&l&&P&&(U=Q(h,r,S,"depth stencil","depth stencil"));a(1>=!!n+!!G+!!ba,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");P=null;for(c=0;c<x.length;++c)y(x[c],h,r),a(!x[c]||x[c].texture&&0<=J.indexOf(x[c].texture._texture.format)||x[c].renderbuffer&&0<=q.indexOf(x[c].renderbuffer._renderbuffer.format),
"framebuffer color attachment "+c+" is invalid"),x[c]&&x[c].texture&&(l=g[x[c].texture._texture.format]*f[x[c].texture._texture.type],null===P?P=l:a(P===l,"all color attachments much have the same number of bits per pixel."));y(pa,h,r);a(!pa||pa.texture&&6402===pa.texture._texture.format||pa.renderbuffer&&33189===pa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");y(F,h,r);a(!F||F.renderbuffer&&36168===F.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");
y(U,h,r);a(!U||U.texture&&34041===U.texture._texture.format||U.renderbuffer&&34041===U.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");M(k);k.width=h;k.height=r;k.colorAttachments=x;k.depthAttachment=pa;k.stencilAttachment=F;k.depthStencilAttachment=U;e.color=x.map(ga);e.depth=ga(pa);e.stencil=ga(F);e.depthStencil=ga(U);e.width=k.width;e.height=k.height;aa(k);return e}var k=new h;m.framebufferCount++;e(b,d);return F(e,{resize:function(b,d){a(w.next!==k,
"can not resize a framebuffer which is currently in use");var f=Math.max(b|0,1),h=Math.max(d|0||f,1);if(f===k.width&&h===k.height)return e;for(var r=k.colorAttachments,q=0;q<r.length;++q)c(r[q],f,h);c(k.depthAttachment,f,h);c(k.stencilAttachment,f,h);c(k.depthStencilAttachment,f,h);k.width=e.width=f;k.height=e.height=h;aa(k);return e},_reglType:"framebuffer",_framebuffer:k,destroy:function(){r(k);M(k)},use:function(b){w.setFBO({framebuffer:e},b)}})}var w={cur:null,next:null,dirty:!1,setFBO:null},
W=["rgba"],E=["rgba4","rgb565","rgb5 a1"];C.ext_srgb&&E.push("srgba");C.ext_color_buffer_half_float&&E.push("rgba16f","rgb16f");C.webgl_color_buffer_float&&E.push("rgba32f");var D=["uint8"];C.oes_texture_half_float&&D.push("half float","float16");C.oes_texture_float&&D.push("float","float32");var d=0,P={};return F(w,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof h)?b:null},create:k,createCube:function(b){function d(b){var f;a(0>
c.indexOf(w.next),"can not update framebuffer which is currently in use");var e={color:null},h=0,r=null;f="rgba";var q="uint8",P=1;if("number"===typeof b)h=b|0;else if(b){a.type(b,"object","invalid arguments for framebuffer");"shape"in b?(h=b.shape,a(Array.isArray(h)&&2<=h.length,"invalid shape for framebuffer"),a(h[0]===h[1],"cube framebuffer must be square"),h=h[0]):("radius"in b&&(h=b.radius|0),"width"in b?(h=b.width|0,"height"in b&&a(b.height===h,"must be square")):"height"in b&&(h=b.height|0));
if("color"in b||"colors"in b)r=b.color||b.colors,Array.isArray(r)&&a(1===r.length||C.webgl_draw_buffers,"multiple render targets not supported");r||("colorCount"in b&&(P=b.colorCount|0,a(0<P,"invalid color buffer count")),"colorType"in b&&(a.oneOf(b.colorType,D,"invalid color type"),q=b.colorType),"colorFormat"in b&&(f=b.colorFormat,a.oneOf(b.colorFormat,W,"invalid color format for texture")));"depth"in b&&(e.depth=b.depth);"stencil"in b&&(e.stencil=b.stencil);"depthStencil"in b&&(e.depthStencil=
b.depthStencil)}else h=1;if(r)if(Array.isArray(r))for(b=[],f=0;f<r.length;++f)b[f]=r[f];else b=[r];else for(b=Array(P),r={radius:h,format:f,type:q},f=0;f<P;++f)b[f]=K.createCube(r);e.color=Array(b.length);for(f=0;f<b.length;++f)P=b[f],a("function"===typeof P&&"textureCube"===P._reglType,"invalid cube map"),h=h||P.width,a(P.width===h&&P.height===h,"invalid cube map shape"),e.color[f]={target:34069,data:b[f]};for(f=0;6>f;++f){for(P=0;P<b.length;++P)e.color[P].target=34069+f;0<f&&(e.depth=c[0].depth,
e.stencil=c[0].stencil,e.depthStencil=c[0].depthStencil);if(c[f])c[f](e);else c[f]=k(e)}return F(d,{width:h,height:h,color:b})}var c=Array(6);d(b);return F(d,{faces:c,resize:function(b){var f=b|0;a(0<f&&f<=L.maxCubeMapSize,"invalid radius for cube fbo");if(f===d.width)return d;var e=d.color;for(b=0;b<e.length;++b)e[b].resize(f);for(b=0;6>b;++b)c[b].resize(f);d.width=d.height=f;return d},_reglType:"framebufferCube",destroy:function(){c.forEach(function(b){b.destroy()})}})},clear:function(){X(P).forEach(r)},
restore:function(){w.cur=null;w.next=null;w.dirty=!0;X(P).forEach(function(b){b.framebuffer=x.createFramebuffer();aa(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(V,ia,Aa){var a=V("./util/sorted-object-keys"),X=V("./util/pool");ia.exports=function(F,J){var g=1;J.ext_texture_filter_anisotropic&&(g=F.getParameter(34047));var f=1,q=1;J.webgl_draw_buffers&&(f=F.getParameter(34852),q=F.getParameter(36063));var e=!!J.oes_texture_float;if(e){e=F.createTexture();F.bindTexture(3553,
e);F.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var x=F.createFramebuffer();F.bindFramebuffer(36160,x);F.framebufferTexture2D(36160,36064,3553,e,0);F.bindTexture(3553,null);if(36053!==F.checkFramebufferStatus(36160))e=!1;else{F.viewport(0,0,1,1);F.clearColor(1,0,0,1);F.clear(16384);var C=X.allocType(5126,4);F.readPixels(0,0,1,1,6408,5126,C);F.getError()?e=!1:(F.deleteFramebuffer(x),F.deleteTexture(e),e=1===C[0]);X.freeType(C)}}C=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||
/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(C=F.createTexture(),x=X.allocType(5121,36),F.activeTexture(33984),F.bindTexture(34067,C),F.texImage2D(34069,0,6408,3,3,0,6408,5121,x),X.freeType(x),F.bindTexture(34067,null),F.deleteTexture(C),C=!F.getError());return{colorBits:[F.getParameter(3410),F.getParameter(3411),F.getParameter(3412),F.getParameter(3413)],depthBits:F.getParameter(3414),stencilBits:F.getParameter(3415),subpixelBits:F.getParameter(3408),extensions:a(J).filter(function(f){return!!J[f]}),
maxAnisotropic:g,maxDrawbuffers:f,maxColorAttachments:q,pointSizeDims:F.getParameter(33901),lineWidthDims:F.getParameter(33902),maxViewportDims:F.getParameter(3386),maxCombinedTextureUnits:F.getParameter(35661),maxCubeMapSize:F.getParameter(34076),maxRenderbufferSize:F.getParameter(34024),maxTextureUnits:F.getParameter(34930),maxTextureSize:F.getParameter(3379),maxAttributes:F.getParameter(34921),maxVertexUniforms:F.getParameter(36347),maxVertexTextureUnits:F.getParameter(35660),maxVaryingVectors:F.getParameter(36348),
maxFragmentUniforms:F.getParameter(36349),glsl:F.getParameter(35724),renderer:F.getParameter(7937),vendor:F.getParameter(7936),version:F.getParameter(7938),readFloat:e,npotTextureCube:C}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(V,ia,Aa){var a=V("./util/check"),X=V("./util/is-typed-array");ia.exports=function(F,J,g,f,q,e,x){function C(K){var A;null===J.next?(a(q.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),
A=5121):(a(null!==J.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),A=J.next.colorAttachments[0].texture._texture.type,a.optional(function(){e.oes_texture_float?(a(5121===A||5126===A,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===A&&a(x.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):a(5121===A,"Reading from a framebuffer is only allowed for the type 'uint8'")}));
var m=0,t=0,C=f.framebufferWidth,y=f.framebufferHeight,U=null;X(K)?U=K:K&&(a.type(K,"object","invalid arguments to regl.read()"),m=K.x|0,t=K.y|0,a(0<=m&&m<f.framebufferWidth,"invalid x offset for regl.read"),a(0<=t&&t<f.framebufferHeight,"invalid y offset for regl.read"),C=(K.width||f.framebufferWidth-m)|0,y=(K.height||f.framebufferHeight-t)|0,U=K.data||null);U&&(5121===A?a(U instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===A&&a(U instanceof
Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));a(0<C&&C+m<=f.framebufferWidth,"invalid width for read pixels");a(0<y&&y+t<=f.framebufferHeight,"invalid height for read pixels");g();K=C*y*4;U||(5121===A?U=new Uint8Array(K):5126===A&&(U=U||new Float32Array(K)));a.isTypedArray(U,"data buffer for regl.read() must be a typedarray");a(U.byteLength>=K,"data buffer for regl.read() too small");F.pixelStorei(3333,4);F.readPixels(m,t,C,y,6408,A,U);return U}function L(f){var e;
J.setFBO({framebuffer:f.framebuffer},function(){e=C(f)});return e}return function(f){return f&&"framebuffer"in f?L(f):C(f)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(V,ia,Aa){var a=V("./util/sorted-object-keys"),X=V("./util/check"),F=V("./util/values"),J=[];J[32854]=2;J[32855]=2;J[36194]=2;J[33189]=2;J[36168]=1;J[34041]=4;J[35907]=4;J[34836]=16;J[34842]=8;J[34843]=6;ia.exports=function(g,f,q,e,x){function C(f){this.id=m++;this.refCount=1;this.renderbuffer=f;this.format=32854;
this.height=this.width=0;x.profile&&(this.stats={size:0})}function L(f){var q=f.renderbuffer;X(q,"must not double destroy renderbuffer");g.bindRenderbuffer(36161,null);g.deleteRenderbuffer(q);f.renderbuffer=null;f.refCount=0;delete t[f.id];e.renderbufferCount--}var K={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};f.ext_srgb&&(K.srgba=35907);f.ext_color_buffer_half_float&&(K.rgba16f=34842,K.rgb16f=34843);f.webgl_color_buffer_float&&(K.rgba32f=34836);var A=
[];a(K).forEach(function(f){A[K[f]]=f});var m=0,t={};C.prototype.decRef=function(){0>=--this.refCount&&L(this)};x.profile&&(e.getTotalRenderbufferSize=function(){var f=0;a(t).forEach(function(e){f+=t[e].stats.size});return f});return{create:function(f,a){function m(f,e){var c=0,h=0,M=32854;"object"===typeof f&&f?("shape"in f?(h=f.shape,X(Array.isArray(h)&&2<=h.length,"invalid renderbuffer shape"),c=h[0]|0,h=h[1]|0):("radius"in f&&(c=h=f.radius|0),"width"in f&&(c=f.width|0),"height"in f&&(h=f.height|
0)),"format"in f&&(X.parameter(f.format,K,"invalid renderbuffer format"),M=K[f.format])):"number"===typeof f?(c=f|0,h="number"===typeof e?e|0:c):f?X.raise("invalid arguments to renderbuffer constructor"):c=h=1;X(0<c&&0<h&&c<=q.maxRenderbufferSize&&h<=q.maxRenderbufferSize,"invalid renderbuffer size");if(c!==u.width||h!==u.height||M!==u.format)return m.width=u.width=c,m.height=u.height=h,u.format=M,g.bindRenderbuffer(36161,u.renderbuffer),g.renderbufferStorage(36161,M,c,h),X(0===g.getError(),"invalid render buffer format"),
x.profile&&(u.stats.size=J[u.format]*u.width*u.height),m.format=A[u.format],m}var u=new C(g.createRenderbuffer());t[u.id]=u;e.renderbufferCount++;m(f,a);m.resize=function(f,e){var c=f|0,h=e|0||c;if(c===u.width&&h===u.height)return m;X(0<c&&0<h&&c<=q.maxRenderbufferSize&&h<=q.maxRenderbufferSize,"invalid renderbuffer size");m.width=u.width=c;m.height=u.height=h;g.bindRenderbuffer(36161,u.renderbuffer);g.renderbufferStorage(36161,u.format,c,h);X(0===g.getError(),"invalid render buffer format");x.profile&&
(u.stats.size=J[u.format]*u.width*u.height);return m};m._reglType="renderbuffer";m._renderbuffer=u;x.profile&&(m.stats=u.stats);m.destroy=function(){u.decRef()};return m},clear:function(){F(t).forEach(L)},restore:function(){F(t).forEach(function(f){f.renderbuffer=g.createRenderbuffer();g.bindRenderbuffer(36161,f.renderbuffer);g.renderbufferStorage(36161,f.format,f.width,f.height)});g.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(V,
ia,Aa){var a=V("./util/sorted-object-keys"),X=V("./util/check"),F=V("./util/extend"),J=V("./util/values");ia.exports=function(g,f,q,e){function x(f,e,q,c){this.name=f;this.id=e;this.location=q;this.info=c}function C(f,e){for(var q=0;q<f.length;++q)if(f[q].id===e.id){f[q].location=e.location;return}f.push(e)}function L(e,q,a){var c=35632===e?m:t,h=c[q];if(!h){var M=f.str(q),h=g.createShader(e);g.shaderSource(h,M);g.compileShader(h);X.shaderError(g,h,M,e,a);c[q]=h}return h}function K(f,q){this.id=U++;
this.fragId=f;this.vertId=q;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;e.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function A(q,a,y){var c;c=L(35632,q.fragId);var h=L(35633,q.vertId),M=q.program=g.createProgram();g.attachShader(M,c);g.attachShader(M,h);if(y)for(c=0;c<y.length;++c)h=y[c],g.bindAttribLocation(M,h[0],h[1]);g.linkProgram(M);X.linkError(g,M,f.str(q.fragId),f.str(q.vertId),a);y=g.getProgramParameter(M,35718);e.profile&&(q.stats.uniformsCount=y);
h=q.uniforms;for(c=0;c<y;++c)if(a=g.getActiveUniform(M,c))if(1<a.size)for(var r=0;r<a.size;++r){var m=a.name.replace("[0]","["+r+"]");C(h,new x(m,f.id(m),g.getUniformLocation(M,m),a))}else C(h,new x(a.name,f.id(a.name),g.getUniformLocation(M,a.name),a));y=g.getProgramParameter(M,35721);e.profile&&(q.stats.attributesCount=y);q=q.attributes;for(c=0;c<y;++c)(a=g.getActiveAttrib(M,c))&&C(q,new x(a.name,f.id(a.name),g.getAttribLocation(M,a.name),a))}var m={},t={},da={},y=[],U=0;e.profile&&(q.getMaxUniformsCount=
function(){var f=0;y.forEach(function(e){e.stats.uniformsCount>f&&(f=e.stats.uniformsCount)});return f},q.getMaxAttributesCount=function(){var f=0;y.forEach(function(e){e.stats.attributesCount>f&&(f=e.stats.attributesCount)});return f});return{clear:function(){var f=g.deleteShader.bind(g);J(m).forEach(f);m={};J(t).forEach(f);t={};y.forEach(function(f){g.deleteProgram(f.program)});y.length=0;da={};q.shaderCount=0},program:function(f,e,J,c){X.command(0<=f,"missing vertex shader",J);X.command(0<=e,"missing fragment shader",
J);var h=da[e];h||(h=da[e]={});var M=h[f];if(M&&(M.refCount++,!c))return M;var r=new K(e,f);q.shaderCount++;A(r,J,c);M||(h[f]=r);y.push(r);return F(r,{destroy:function(){r.refCount--;if(0>=r.refCount){g.deleteProgram(r.program);var c=y.indexOf(r);y.splice(c,1);q.shaderCount--}0>=h[r.vertId].refCount&&(g.deleteShader(t[r.vertId]),delete t[r.vertId],delete da[r.fragId][r.vertId]);a(da[r.fragId]).length||(g.deleteShader(m[r.fragId]),delete m[r.fragId],delete da[r.fragId])}})},restore:function(){m={};
t={};for(var f=0;f<y.length;++f)A(y[f],null,y[f].attributes.map(function(f){return[f.location,f.name]}))},shader:L,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(V,ia,Aa){ia.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(V,ia,Aa){ia.exports=function(){var a={"":0},X=[""];return{id:function(F){var J=
a[F];if(J)return J;J=a[F]=X.length;X.push(F);return J},str:function(a){return X[a]}}}},{}],19:[function(V,ia,Aa){function a(d){return"[object "+d+"]"}function X(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function F(d){return Array.isArray(d)&&0!==d.length&&da(d[0])?!0:!1}function J(d){return Object.prototype.toString.call(d)}function g(d){if(!d)return!1;var c=J(d);return 0<=W.indexOf(c)?!0:X(d)||F(d)||A(d)}function f(d,c){36193===d.type?(d.data=t(c),m.freeType(c)):d.data=c}
function q(d,f,b,e,h,k){d="undefined"!==typeof D[d]?D[d]:c[d]*E[f];k&&(d*=6);if(h){for(e=0;1<=b;)e+=d*b*b,b/=2;return e}return d*b*e}var e=V("./util/sorted-object-keys"),x=V("./util/check"),C=V("./util/extend"),L=V("./util/values"),K=V("./util/is-typed-array"),A=V("./util/is-ndarray"),m=V("./util/pool"),t=V("./util/to-half-float"),da=V("./util/is-array-like"),y=V("./util/flatten"),U=V("./util/is-pow2");Aa=V("./constants/arraytypes.json");var u=V("./constants/arraytypes.json"),Q=[9984,9986,9985,9987],
ga=[0,6409,6410,6407,6408],c={};c[6409]=c[6406]=c[6402]=1;c[34041]=c[6410]=2;c[6407]=c[35904]=3;c[6408]=c[35906]=4;var h=a("HTMLCanvasElement"),M=a("OffscreenCanvas"),r=a("CanvasRenderingContext2D"),aa=a("ImageBitmap"),k=a("HTMLImageElement"),w=a("HTMLVideoElement"),W=e(Aa).concat([h,M,r,aa,k,w]),E=[];E[5121]=1;E[5126]=4;E[36193]=2;E[5123]=2;E[5125]=4;var D=[];D[32854]=2;D[32855]=2;D[36194]=2;D[34041]=4;D[33776]=.5;D[33777]=.5;D[33778]=1;D[33779]=1;D[35986]=.5;D[35987]=1;D[34798]=1;D[35840]=.5;D[35841]=
.25;D[35842]=.5;D[35843]=.25;D[36196]=.5;ia.exports=function(d,P,b,a,D,E,W){function Y(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(b,d){b.internalformat=d.internalformat;b.format=d.format;b.type=d.type;b.compressed=d.compressed;b.premultiplyAlpha=d.premultiplyAlpha;b.flipY=d.flipY;b.unpackAlignment=d.unpackAlignment;b.colorSpace=d.colorSpace;
b.width=d.width;b.height=d.height;b.channels=d.channels}function R(d,f){if("object"===typeof f&&f){"premultiplyAlpha"in f&&(x.type(f.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),d.premultiplyAlpha=f.premultiplyAlpha);"flipY"in f&&(x.type(f.flipY,"boolean","invalid texture flip"),d.flipY=f.flipY);"alignment"in f&&(x.oneOf(f.alignment,[1,2,4,8],"invalid texture unpack alignment"),d.unpackAlignment=f.alignment);"colorSpace"in f&&(x.parameter(f.colorSpace,Ta,"invalid colorSpace"),d.colorSpace=
Ta[f.colorSpace]);if("type"in f){var e=f.type;x(P.oes_texture_float||!("float"===e||"float32"===e),"you must enable the OES_texture_float extension in order to use floating point textures.");x(P.oes_texture_half_float||!("half float"===e||"float16"===e),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");x(P.webgl_depth_texture||!("uint16"===e||"uint32"===e||"depth stencil"===e),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
x.parameter(e,v,"invalid texture type");d.type=v[e]}var l=d.width,n=d.height,h=d.channels,e=!1;"shape"in f?(x(Array.isArray(f.shape)&&2<=f.shape.length,"shape must be an array"),l=f.shape[0],n=f.shape[1],3===f.shape.length&&(h=f.shape[2],x(0<h&&4>=h,"invalid number of channels"),e=!0),x(0<=l&&l<=b.maxTextureSize,"invalid width"),x(0<=n&&n<=b.maxTextureSize,"invalid height")):("radius"in f&&(l=n=f.radius,x(0<=l&&l<=b.maxTextureSize,"invalid radius")),"width"in f&&(l=f.width,x(0<=l&&l<=b.maxTextureSize,
"invalid width")),"height"in f&&(n=f.height,x(0<=n&&n<=b.maxTextureSize,"invalid height")),"channels"in f&&(h=f.channels,x(0<h&&4>=h,"invalid number of channels"),e=!0));d.width=l|0;d.height=n|0;d.channels=h|0;l=!1;"format"in f&&(l=f.format,x(P.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(l,p,"invalid texture format"),n=d.internalformat=p[l],d.format=Ga[n],l in v&&!("type"in f)&&(d.type=
v[l]),l in I&&(d.compressed=!0),l=!0);!e&&l?d.channels=c[d.format]:e&&!l?d.channels!==ga[d.format]&&(d.format=d.internalformat=ga[d.channels]):l&&e&&x(d.channels===c[d.format],"number of channels inconsistent with specified format")}}function T(b){d.pixelStorei(37440,b.flipY);d.pixelStorei(37441,b.premultiplyAlpha);d.pixelStorei(37443,b.colorSpace);d.pixelStorei(3317,b.unpackAlignment)}function z(){Y.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function l(d,c){var e=null;g(c)?e=c:c&&(x.type(c,"object","invalid pixel data type"),R(d,c),"x"in c&&(d.xOffset=c.x|0),"y"in c&&(d.yOffset=c.y|0),g(c.data)&&(e=c.data));x(!d.compressed||e instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){x(!e,"can not specify copy and data field for the same texture");var l=D.viewportWidth,n=D.viewportHeight;d.width=d.width||l-d.xOffset;d.height=d.height||n-d.yOffset;d.needsCopy=!0;x(0<=d.xOffset&&d.xOffset<l&&0<=d.yOffset&&
d.yOffset<n&&0<d.width&&d.width<=l&&0<d.height&&d.height<=n,"copy texture read out of bounds")}else if(!e)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(K(e))d.channels=d.channels||4,d.data=e,"type"in c||5121!==d.type||(d.type=u[Object.prototype.toString.call(e)]|0);else if(X(e)){d.channels=d.channels||4;l=e;n=l.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:n=m.allocType(d.type,n);n.set(l);d.data=n;break;case 36193:d.data=t(l);break;default:x.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(A(e)){l=e.data;Array.isArray(l)||5121!==d.type||(d.type=u[Object.prototype.toString.call(l)]|0);var n=e.shape,p=e.stride,v,H,q,I;3===n.length?(q=n[2],I=p[2]):(x(2===n.length,"invalid ndarray pixel data, must be 2 or 3D"),I=q=1);v=n[0];H=n[1];n=p[0];p=p[1];d.alignment=1;d.width=v;d.height=H;d.channels=q;d.format=d.internalformat=ga[q];d.needsFree=!0;v=I;e=e.offset;q=d.width;I=d.height;H=d.channels;for(var ma=m.allocType(36193===d.type?5126:d.type,q*I*H),P=0,sa=0;sa<I;++sa)for(var Ma=
0;Ma<q;++Ma)for(var a=0;a<H;++a)ma[P++]=l[n*Ma+p*sa+v*a+e];f(d,ma)}else if(J(e)===h||J(e)===M||J(e)===r)J(e)===h||J(e)===M?d.element=e:d.element=e.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(J(e)===aa)d.element=e,d.width=e.width,d.height=e.height,d.channels=4;else if(J(e)===k)d.element=e,d.width=e.naturalWidth,d.height=e.naturalHeight,d.channels=4;else if(J(e)===w)d.element=e,d.width=e.videoWidth,d.height=e.videoHeight,d.channels=4;else if(F(e)){l=d.width||e[0].length;
n=d.height||e.length;p=d.channels;p=da(e[0][0])?p||e[0][0].length:p||1;v=y.shape(e);q=1;for(I=0;I<v.length;++I)q*=v[I];q=m.allocType(36193===d.type?5126:d.type,q);y.flatten(e,v,"",q);f(d,q);d.alignment=1;d.width=l;d.height=n;d.channels=p;d.format=d.internalformat=ga[p];d.needsFree=!0}5126===d.type?x(0<=b.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&x(0<=b.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function O(b,c,f,e,l){var n=b.element,h=b.data,p=b.internalformat,v=b.format,k=b.type,H=b.width,q=b.height;T(b);n?d.texSubImage2D(c,l,f,e,v,k,n):b.compressed?d.compressedTexSubImage2D(c,l,f,e,p,H,q,h):b.needsCopy?(a(),d.copyTexSubImage2D(c,l,f,e,b.xOffset,b.yOffset,H,q)):d.texSubImage2D(c,l,f,e,H,q,v,k,h)}function N(){return ra.pop()||new z}function wa(b){b.needsFree&&m.freeType(b.data);z.call(b);ra.push(b)}function na(){Y.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function n(b,d,c){var f=b.images[0]=N();b.mipmask=1;f.width=b.width=d;f.height=b.height=c;f.channels=b.channels=4}function G(b,d){var c=null;if(g(d))c=b.images[0]=N(),ea(c,b),l(c,d),b.mipmask=1;else if(R(b,d),Array.isArray(d.mipmap))for(var f=d.mipmap,e=0;e<f.length;++e)c=b.images[e]=N(),ea(c,b),c.width>>=e,c.height>>=e,l(c,f[e]),b.mipmask|=1<<e;else c=b.images[0]=N(),ea(c,b),l(c,d),b.mipmask=1;ea(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==
b.internalformat&&33779!==b.internalformat||x(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ba(b,c){for(var f=b.images,e=0;e<f.length&&f[e];++e){var l=f[e],n=c,h=e,p=l.element,v=l.data,k=l.internalformat,H=l.format,q=l.type,r=l.width,I=l.height;T(l);p?d.texImage2D(n,h,H,H,q,p):l.compressed?d.compressedTexImage2D(n,h,k,r,I,0,v):l.needsCopy?(a(),d.copyTexImage2D(n,h,H,l.xOffset,l.yOffset,r,I,0)):d.texImage2D(n,
h,H,r,I,0,H,q,v||null)}}function S(){var b=za.pop()||new na;Y.call(b);for(var d=b.mipmask=0;16>d;++d)b.images[d]=null;return b}function la(b){for(var d=b.images,c=0;c<d.length;++c)d[c]&&wa(d[c]),d[c]=null;za.push(b)}function pa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Ca(d,c){if("min"in c){var f=c.min;x.parameter(f,cc);d.minFilter=cc[f];0<=Q.indexOf(d.minFilter)&&!("faces"in c)&&(d.genMipmaps=!0)}"mag"in c&&
(f=c.mag,x.parameter(f,ma),d.magFilter=ma[f]);var f=d.wrapS,e=d.wrapT;if("wrap"in c){var l=c.wrap;"string"===typeof l?(x.parameter(l,Ma),f=e=Ma[l]):Array.isArray(l)&&(x.parameter(l[0],Ma),x.parameter(l[1],Ma),f=Ma[l[0]],e=Ma[l[1]])}else"wrapS"in c&&(f=c.wrapS,x.parameter(f,Ma),f=Ma[f]),"wrapT"in c&&(e=c.wrapT,x.parameter(e,Ma),e=Ma[e]);d.wrapS=f;d.wrapT=e;"anisotropic"in c&&(f=c.anisotropic,x("number"===typeof f&&1<=f&&f<=b.maxAnisotropic,"aniso samples must be between 1 and "),d.anisotropic=c.anisotropic);
if("mipmap"in c){f=!1;switch(typeof c.mipmap){case "string":x.parameter(c.mipmap,ya,"invalid mipmap hint");d.mipmapHint=ya[c.mipmap];f=d.genMipmaps=!0;break;case "boolean":f=d.genMipmaps=c.mipmap;break;case "object":x(Array.isArray(c.mipmap),"invalid mipmap type");d.genMipmaps=!1;f=!0;break;default:x.raise("invalid mipmap type")}!f||"min"in c||(d.minFilter=9984)}}function Ba(b,c){d.texParameteri(c,10241,b.minFilter);d.texParameteri(c,10240,b.magFilter);d.texParameteri(c,10242,b.wrapS);d.texParameteri(c,
10243,b.wrapT);P.ext_texture_filter_anisotropic&&d.texParameteri(c,34046,b.anisotropic);b.genMipmaps&&(d.hint(33170,b.mipmapHint),d.generateMipmap(c))}function fa(b){Y.call(this);this.mipmask=0;this.internalformat=6408;this.id=Da++;this.refCount=1;this.target=b;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new pa;W.profile&&(this.stats={size:0})}function Ea(b){d.activeTexture(33984);d.bindTexture(b.target,b.texture)}function ja(){var b=ta[0];b?d.bindTexture(b.target,b.texture):
d.bindTexture(3553,null)}function oa(b){var c=b.texture;x(c,"must not double destroy texture");var f=b.unit,e=b.target;0<=f&&(d.activeTexture(33984+f),d.bindTexture(e,null),ta[f]=null);d.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ka[b.id];E.textureCount--}var ya={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ma={repeat:10497,clamp:33071,mirror:33648},ma={nearest:9728,linear:9729},cc=C({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},ma),Ta={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},p={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},I={};P.ext_srgb&&(p.srgb=35904,p.srgba=35906);P.oes_texture_float&&(v.float32=v["float"]=5126);P.oes_texture_half_float&&(v.float16=v["half float"]=36193);P.webgl_depth_texture&&(C(p,{depth:6402,"depth stencil":34041}),C(v,{uint16:5123,uint32:5125,
"depth stencil":34042}));P.webgl_compressed_texture_s3tc&&C(I,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});P.webgl_compressed_texture_atc&&C(I,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});P.webgl_compressed_texture_pvrtc&&C(I,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});P.webgl_compressed_texture_etc1&&(I["rgb etc1"]=36196);var ua=Array.prototype.slice.call(d.getParameter(34467));
e(I).forEach(function(b){var d=I[b];0<=ua.indexOf(d)&&(p[b]=d)});var va=e(p);b.textureFormats=va;var dd=[];e(p).forEach(function(b){dd[p[b]]=b});var Gb=[];e(v).forEach(function(b){Gb[v[b]]=b});var ha=[];e(ma).forEach(function(b){ha[ma[b]]=b});var H=[];e(cc).forEach(function(b){H[cc[b]]=b});var sa=[];e(Ma).forEach(function(b){sa[Ma[b]]=b});var Ga=va.reduce(function(b,d){var c=p[d];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||P.ext_srgb&&(35904===c||35906===c)?b[c]=c:32855===c||0<=d.indexOf("rgba")?
b[c]=6408:b[c]=6407;return b},{}),ra=[],za=[],Da=0,ka={},Z=b.maxTextureUnits,ta=Array(Z).map(function(){return null});C(fa.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<Z;++c){var f=ta[c];if(f){if(0<f.bindCount)continue;f.unit=-1}ta[c]=this;b=c;break}b>=Z&&x.raise("insufficient number of texture units");W.profile&&E.maxTextureUnits<b+1&&(E.maxTextureUnits=b+1);this.unit=b;d.activeTexture(33984+b);d.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&oa(this)}});W.profile&&(E.getTotalTextureSize=function(){var b=0;e(ka).forEach(function(d){b+=ka[d].stats.size});return b});return{create2D:function(c,f){function e(d,c){var f=h.texInfo;pa.call(f);var l=S();"number"===typeof d?"number"===typeof c?n(l,d|0,c|0):n(l,d|0,d|0):d?(x.type(d,"object","invalid arguments to regl.texture"),Ca(f,d),G(l,d)):n(l,1,1);f.genMipmaps&&(l.mipmask=(l.width<<1)-1);h.mipmask=l.mipmask;ea(h,l);x.texture2D(f,l,b);h.internalformat=l.internalformat;
e.width=l.width;e.height=l.height;Ea(h);ba(l,3553);Ba(f,3553);ja();la(l);W.profile&&(h.stats.size=q(h.internalformat,h.type,l.width,l.height,f.genMipmaps,!1));e.format=dd[h.internalformat];e.type=Gb[h.type];e.mag=ha[f.magFilter];e.min=H[f.minFilter];e.wrapS=sa[f.wrapS];e.wrapT=sa[f.wrapT];return e}var h=new fa(3553);ka[h.id]=h;E.textureCount++;e(c,f);e.subimage=function(b,d,c,f){x(!!b,"must specify image data");d|=0;c|=0;f|=0;var n=N();ea(n,h);n.width=0;n.height=0;l(n,b);n.width=n.width||(h.width>>
f)-d;n.height=n.height||(h.height>>f)-c;x(h.type===n.type&&h.format===n.format&&h.internalformat===n.internalformat,"incompatible format for texture.subimage");x(0<=d&&0<=c&&d+n.width<=h.width&&c+n.height<=h.height,"texture.subimage write out of bounds");x(h.mipmask&1<<f,"missing mipmap data");x(n.data||n.element||n.needsCopy,"missing image data");Ea(h);O(n,3553,d,c,f);ja();wa(n);return e};e.resize=function(b,c){var f=b|0,l=c|0||f;if(f===h.width&&l===h.height)return e;e.width=h.width=f;e.height=h.height=
l;Ea(h);for(var n=0;h.mipmask>>n;++n){var p=f>>n,v=l>>n;if(!p||!v)break;d.texImage2D(3553,n,h.format,p,v,0,h.format,h.type,null)}ja();W.profile&&(h.stats.size=q(h.internalformat,h.type,f,l,!1,!1));return e};e._reglType="texture2d";e._texture=h;W.profile&&(e.stats=h.stats);e.destroy=function(){h.decRef()};return e},createCube:function(c,f,e,h,p,v){function k(d,c,f,e,l,h){var p,v=r.texInfo;pa.call(v);for(p=0;6>p;++p)I[p]=S();if("number"!==typeof d&&d)if("object"===typeof d)if(c)G(I[0],d),G(I[1],c),
G(I[2],f),G(I[3],e),G(I[4],l),G(I[5],h);else if(Ca(v,d),R(r,d),"faces"in d)for(d=d.faces,x(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),p=0;6>p;++p)x("object"===typeof d[p]&&!!d[p],"invalid input for cube map face"),ea(I[p],r),G(I[p],d[p]);else for(p=0;6>p;++p)G(I[p],d);else x.raise("invalid arguments to cube map");else for(d=d|0||1,p=0;6>p;++p)n(I[p],d,d);ea(r,I[0]);x.optional(function(){b.npotTextureCube||x(U(r.width)&&U(r.height),"your browser does not support non power or two texture dimensions")});
r.mipmask=v.genMipmaps?(I[0].width<<1)-1:I[0].mipmask;x.textureCube(r,v,I,b);r.internalformat=I[0].internalformat;k.width=I[0].width;k.height=I[0].height;Ea(r);for(p=0;6>p;++p)ba(I[p],34069+p);Ba(v,34067);ja();W.profile&&(r.stats.size=q(r.internalformat,r.type,k.width,k.height,v.genMipmaps,!0));k.format=dd[r.internalformat];k.type=Gb[r.type];k.mag=ha[v.magFilter];k.min=H[v.minFilter];k.wrapS=sa[v.wrapS];k.wrapT=sa[v.wrapT];for(p=0;6>p;++p)la(I[p]);return k}var r=new fa(34067);ka[r.id]=r;E.cubeCount++;
var I=Array(6);k(c,f,e,h,p,v);k.subimage=function(b,d,c,f,e){x(!!d,"must specify image data");x("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");c|=0;f|=0;e|=0;var n=N();ea(n,r);n.width=0;n.height=0;l(n,d);n.width=n.width||(r.width>>e)-c;n.height=n.height||(r.height>>e)-f;x(r.type===n.type&&r.format===n.format&&r.internalformat===n.internalformat,"incompatible format for texture.subimage");x(0<=c&&0<=f&&c+n.width<=r.width&&f+n.height<=r.height,"texture.subimage write out of bounds");x(r.mipmask&
1<<e,"missing mipmap data");x(n.data||n.element||n.needsCopy,"missing image data");Ea(r);O(n,34069+b,c,f,e);ja();wa(n);return k};k.resize=function(b){b|=0;if(b!==r.width){k.width=r.width=b;k.height=r.height=b;Ea(r);for(var c=0;6>c;++c)for(var f=0;r.mipmask>>f;++f)d.texImage2D(34069+c,f,r.format,b>>f,b>>f,0,r.format,r.type,null);ja();W.profile&&(r.stats.size=q(r.internalformat,r.type,k.width,k.height,!1,!0));return k}};k._reglType="textureCube";k._texture=r;W.profile&&(k.stats=r.stats);k.destroy=function(){r.decRef()};
return k},clear:function(){for(var b=0;b<Z;++b)d.activeTexture(33984+b),d.bindTexture(3553,null),ta[b]=null;L(ka).forEach(oa);E.cubeCount=0;E.textureCount=0},getTexture:function(b){return null},restore:function(){for(var b=0;b<Z;++b){var c=ta[b];c&&(c.bindCount=0,c.unit=-1,ta[b]=null)}L(ka).forEach(function(b){b.texture=d.createTexture();d.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)d.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,
b.type,null);else for(var f=0;6>f;++f)d.texImage2D(34069+f,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);Ba(b.texInfo,b.target)})},refresh:function(){for(var b=0;b<Z;++b){var c=ta[b];c&&(c.bindCount=0,c.unit=-1,ta[b]=null);d.activeTexture(33984+b);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(V,ia,Aa){ia.exports=function(a,X){function F(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function J(f,g,a){var m=q.pop()||new F;m.startQueryIndex=f;m.endQueryIndex=g;m.sum=0;m.stats=a;e.push(m)}if(!X.ext_disjoint_timer_query)return null;var g=[],f=[],q=[],e=[],x=[],C=[];return{beginQuery:function(e){var q=g.pop()||X.ext_disjoint_timer_query.createQueryEXT();X.ext_disjoint_timer_query.beginQueryEXT(35007,
q);f.push(q);J(f.length-1,f.length,e)},endQuery:function(){X.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:J,update:function(){var a,J;a=f.length;if(0!==a){C.length=Math.max(C.length,a+1);x.length=Math.max(x.length,a+1);x[0]=0;var A=C[0]=0;for(J=a=0;J<f.length;++J){var m=f[J];X.ext_disjoint_timer_query.getQueryObjectEXT(m,34919)?(A+=X.ext_disjoint_timer_query.getQueryObjectEXT(m,34918),g.push(m)):f[a++]=m;x[J+1]=A;C[J+1]=a}f.length=a;for(J=a=0;J<e.length;++J){var A=e[J],t=A.startQueryIndex,
m=A.endQueryIndex;A.sum+=x[m]-x[t];t=C[t];m=C[m];m===t?(A.stats.gpuTime+=A.sum/1E6,q.push(A)):(A.startQueryIndex=t,A.endQueryIndex=m,e[a++]=A)}e.length=a}},getNumPendingQueries:function(){return f.length},clear:function(){g.push.apply(g,f);for(var e=0;e<g.length;e++)X.ext_disjoint_timer_query.deleteQueryEXT(g[e]);f.length=0;g.length=0},restore:function(){f.length=0;g.length=0}}}},{}],21:[function(V,ia,Aa){function a(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function X(c){c=Error("(regl) "+
c);console.error(c);throw c;}function F(c,f){c||X(f)}function J(c){return c?": "+c:""}function g(c,f){switch(f){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function f(c,f,e){0>f.indexOf(c)&&X("invalid value"+J(e)+". must be one of: "+f)}function q(c,f){for(c+=
"";c.length<f;)c=" "+c;return c}function e(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function x(c,f){this.number=c;this.line=f;this.errors=[]}function C(c,f,e){this.file=c;this.line=f;this.message=e}function L(){var c=Error(),c=(c.stack||c).toString(),f=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return f?f[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function K(){var c=Error(),c=(c.stack||c).toString(),f=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return f?f[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function A(c,f){var h=c.split("\n"),k=1,q=0,g={unknown:new e,0:new e};g.unknown.name=g[0].name=f||L();g.unknown.lines.push(new x(0,""));for(var y=0;y<h.length;++y){var m=h[y],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(m);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))k=d[1]|0,d[2]&&(q=d[2]|0,q in g||(g[q]=new e));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))g[q].name=d[1]?a(d[2]):d[2]}g[q].lines.push(new x(k++,
m))}Q(g).forEach(function(d){var b=g[d];b.lines.forEach(function(d){b.index[d.number]=d})});return g}function m(c){var f=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);e?f.push(new C(e[1]|0,e[2]|0,e[3].trim())):0<c.length&&f.push(new C("unknown",0,c))}});return f}function t(c,f){f.forEach(function(f){var e=c[f.file];if(e){var h=e.index[f.line];if(h){h.errors.push(f);e.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(f)})}
function da(c){c._commandRef=L()}function y(c,f){var e=K();X(c+" in command "+(f||L())+("unknown"===e?"":" called from "+e))}function U(c,f,e,h){g(c,f)||y("invalid parameter type"+J(e)+". expected "+f+", got "+typeof c,h||L())}function u(c,f){return 32820===c||32819===c||33635===c?2:34042===c?4:h[c]*f}var Q=V("./sorted-object-keys"),ga=V("./is-typed-array");V=V("./extend");var c="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),h={};h[5120]=h[5121]=
1;h[5122]=h[5123]=h[36193]=h[33635]=h[32819]=h[32820]=2;h[5124]=h[5125]=h[5126]=h[34042]=4;ia.exports=V(F,{optional:function(c){c()},raise:X,commandRaise:y,command:function(c,f,e){c||y(f,e||L())},parameter:function(c,f,e){c in f||X("unknown parameter ("+c+")"+J(e)+". possible values: "+Q(f).join())},commandParameter:function(c,f,e,h){c in f||y("unknown parameter ("+c+")"+J(e)+". possible values: "+Q(f).join(),h||L())},constructor:function(f){Q(f).forEach(function(f){0>c.indexOf(f)&&X('invalid regl constructor argument "'+
f+'". must be one of '+c)})},type:function(c,f,e){g(c,f)||X("invalid parameter type"+J(e)+". expected "+f+", got "+typeof c)},commandType:U,isTypedArray:function(c,f){ga(c)||X("invalid parameter type"+J(f)+". must be a typed array")},nni:function(c,f){0<=c&&(c|0)===c||X("invalid parameter type, ("+c+")"+J(f)+". must be a nonnegative integer")},oneOf:f,shaderError:function(c,f,e,h,w){if(!c.getShaderParameter(f,c.COMPILE_STATUS)){f=c.getShaderInfoLog(f);c=h===c.FRAGMENT_SHADER?"fragment":"vertex";U(e,
"string",c+" shader source must be a string",w);var g=A(e,w);e=m(f);t(g,e);Q(g).forEach(function(c){function f(d,c){e.push(d);b.push(c||"")}var d=g[c];if(d.hasErrors){var e=[""],b=[""];f("file number "+c+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(b){if(0<b.errors.length){f(q(b.number,4)+"|  ","background-color:yellow; font-weight:bold");f(b.line+"\n","color:red; background-color:yellow; font-weight:bold");var d=0;b.errors.forEach(function(c){c=
c.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(e){var h=e[1];c=e[2];switch(h){case "assign":h="="}d=Math.max(b.line.indexOf(h,d),0)}else d=0;f(q("| ",6));f(q("^^^",d+3)+"\n","font-weight:bold");f(q("| ",6));f(c+"\n","font-weight:bold")});f(q("| ",6)+"\n")}else f(q(b.number,4)+"|  "),f(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(e.join("")):(b[0]=e.join("%c"),console.log.apply(console,b))}});F.raise("Error compiling "+c+" shader, "+g[0].name)}},linkError:function(c,
f,e,h,q){c.getProgramParameter(f,c.LINK_STATUS)||(c=c.getProgramInfoLog(f),e=A(e,q),h='Error linking program with vertex shader, "'+A(h,q)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+h+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(h+"\n"+c),F.raise(h))},callSite:K,saveCommandRef:da,saveDrawInfo:function(c,f,e,h){function q(c){return c?h.id(c):0}function g(c,d){Q(d).forEach(function(d){c[h.id(d)]=!0})}da(c);
c._fragId=q(c["static"].frag);c._vertId=q(c["static"].vert);var a=c._uniformSet={};g(a,f["static"]);g(a,f.dynamic);f=c._attributeSet={};g(f,e["static"]);g(f,e.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,e,h){c.texture?f(c.texture._texture.internalformat,e,"unsupported texture format for attachment"):f(c.renderbuffer._renderbuffer.format,h,"unsupported renderbuffer format for attachment")},guessCommand:L,
texture2D:function(c,f,e){var h=f.width,q=f.height,g=f.channels;F(0<h&&h<=e.maxTextureSize&&0<q&&q<=e.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||F(!(h&h-1)&&!!h&&!(q&q-1)&&!!q,"incompatible wrap mode for texture, both width and height must be power of 2");1===f.mipmask?1!==h&&1!==q&&F(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(F(!(h&h-1)&&!!h&&!(q&q-1)&&!!q,"texture must be a square power of 2 to support mipmapping"),
F(f.mipmask===(h<<1)-1,"missing or incomplete mipmap data"));5126===f.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&F(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),F(!c.genMipmaps,"mipmap generation not supported with float textures"));var a=f.images;for(e=0;16>e;++e)if(a[e]){var y=h>>e,d=q>>e;F(f.mipmask&1<<e,"missing mipmap data");var P=a[e];F(P.width===y&&P.height===d,"invalid shape for mip images");F(P.format===f.format&&P.internalformat===
f.internalformat&&P.type===f.type,"incompatible type for mip image");!P.compressed&&P.data&&(y=Math.ceil(u(P.type,g)*y/P.unpackAlignment)*P.unpackAlignment,F(P.data.byteLength===y*d,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||F(0===(f.mipmask&1<<e),"extra mipmap data");f.compressed&&F(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,f,e,h){var q=c.width,g=c.height,a=c.channels;F(0<q&&q<=h.maxTextureSize&&
0<g&&g<=h.maxTextureSize,"invalid texture shape");F(q===g,"cube map must be square");F(33071===f.wrapS&&33071===f.wrapT,"wrap mode not supported by cube map");for(h=0;h<e.length;++h){var y=e[h];F(y.width===q&&y.height===g,"inconsistent cube map face shape");f.genMipmaps&&(F(!y.compressed,"can not generate mipmap for compressed textures"),F(1===y.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=y.images,P=0;16>P;++P){var b=d[P];if(b){var m=q>>P,A=g>>P;F(y.mipmask&1<<P,"missing mipmap data");
F(b.width===m&&b.height===A,"invalid shape for mip images");F(b.format===c.format&&b.internalformat===c.internalformat&&b.type===c.type,"incompatible type for mip image");b.compressed||b.data&&F(b.data.byteLength===m*A*Math.max(u(b.type,a),b.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(V,ia,Aa){ia.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(V,ia,Aa){function a(g){return Array.prototype.slice.call(g)}function X(g){return a(g).join("")}var F=V("./extend"),J=V("./compiled-fns");ia.exports=function(){function g(){var f=[],q=[];return F(function(){f.push.apply(f,a(arguments))},{def:function(){var g="v"+e;e++;q.push(g);0<arguments.length&&(f.push(g,"="),f.push.apply(f,a(arguments)),f.push(";"));return g},toString:function(){return X([0<q.length?"var "+q.join(",")+";":"",X(f)])}})}function f(){function f(g,
a){q(g,a,"=",e.def(g,a),";")}var e=g(),q=g(),J=e.toString,C=q.toString;return F(function(){e.apply(e,a(arguments))},{def:e.def,entry:e,exit:q,save:f,set:function(q,g,a){f(q,g);e(q,g,"=",a,";")},toString:function(){return J()+C()}})}var q=0,e=0,x={},C=g(),L={};return{global:C,link:function(f){var e="$"+q,g=!1;"object"===typeof f&&f.name&&(e=f.name.replace(/ /g,"_"),g=!0);if(e in x)return e;x[e]=f;g||q++;return e},block:g,proc:function(e,q){function g(){var f="a"+a.length;a.push(f);return f}var a=[];
q=q||0;for(var J=0;J<q;++J)g();var J=f(),y=J.toString;return L[e]=F(J,{arg:g,toString:function(){return X(["function(",a.join(),"){",y(),"}"])}})},scope:f,cond:function(){var e=X(arguments),q=f(),g=f(),J=q.toString,C=g.toString;return F(q,{then:function(){q.apply(q,a(arguments));return this},"else":function(){g.apply(g,a(arguments));return this},toString:function(){var f=C();f&&(f="else{"+f+"}");return X(["if(",e,"){",J(),"}",f])}})},compile:function(){var f=[],e=[];Object.keys(x).sort(function(f,
e){var q="$"===f.charAt(0),g="$"===e.charAt(0);return q||g?q&&g?+f.slice(1)<+e.slice(1)?-1:1:q&&!g?-1:1:f.localeCompare(e)}).forEach(function(q){var g=x[q];f.push(q);e.push(g)});for(var q=0,g=f.length-1;-1<g;g--)if("$"===f[g].charAt(0)){q=g;break}var a=['"use strict";',C,"return {"];Object.keys(L).forEach(function(f){a.push('"',f,'":',L[f].toString(),",")});a.push("}");var g=X(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),q=f.slice(q).join(),y=J[q];if(!y)throw console.log("src code is:"),
console.log(g),console.log("compiled values:",e),console.log("linked names:",f),console.log("Keys available:",Object.keys(J)),console.log("Key:",q),console.log('"'+q+'": function('+f.join(", ")+") \n{\n"+g+"\n},"),Error("missing precompiled function with key: "+q);return y.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(V,ia,Aa){ia.exports={$0:function(a){var X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D;X=a.attributes;F=a.current;J=a.framebuffer;g=a.gl;f=a.next;
q=a.vao;e=f.blend_color;x=F.blend_color;C=f.blend_equation;L=F.blend_equation;K=f.blend_func;A=F.blend_func;m=f.colorMask;t=F.colorMask;da=f.depth_range;y=F.depth_range;U=f.polygonOffset_offset;u=F.polygonOffset_offset;Q=f.sample_coverage;ga=F.sample_coverage;c=f.scissor_box;h=F.scissor_box;M=f.stencil_func;r=F.stencil_func;aa=f.stencil_opBack;k=F.stencil_opBack;w=f.stencil_opFront;W=F.stencil_opFront;E=f.viewport;D=F.viewport;return{poll:function(){var d,q,b,a,B,X,hd,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,
S,la;F.dirty=!1;q=f.blend_enable;b=f.cull_enable;a=f.depth_enable;B=f.dither;X=f.polygonOffset_enable;hd=f.sample_alpha;Y=f.sample_enable;ea=f.scissor_enable;R=f.stencil_enable;T=f.cull_face;z=F.cull_face;l=f.depth_func;O=F.depth_func;N=f.depth_mask;wa=F.depth_mask;na=f.frontFace;n=F.frontFace;G=f.lineWidth;ba=F.lineWidth;S=f.stencil_mask;la=F.stencil_mask;d=J.next;d!==J.cur&&(d?g.bindFramebuffer(36160,d.framebuffer):g.bindFramebuffer(36160,null),J.cur=d);q!==F.blend_enable&&(q?g.enable(3042):g.disable(3042),
F.blend_enable=q);b!==F.cull_enable&&(b?g.enable(2884):g.disable(2884),F.cull_enable=b);a!==F.depth_enable&&(a?g.enable(2929):g.disable(2929),F.depth_enable=a);B!==F.dither&&(B?g.enable(3024):g.disable(3024),F.dither=B);X!==F.polygonOffset_enable&&(X?g.enable(32823):g.disable(32823),F.polygonOffset_enable=X);hd!==F.sample_alpha&&(hd?g.enable(32926):g.disable(32926),F.sample_alpha=hd);Y!==F.sample_enable&&(Y?g.enable(32928):g.disable(32928),F.sample_enable=Y);ea!==F.scissor_enable&&(ea?g.enable(3089):
g.disable(3089),F.scissor_enable=ea);R!==F.stencil_enable&&(R?g.enable(2960):g.disable(2960),F.stencil_enable=R);if(e[0]!==x[0]||e[1]!==x[1]||e[2]!==x[2]||e[3]!==x[3])g.blendColor(e[0],e[1],e[2],e[3]),x[0]=e[0],x[1]=e[1],x[2]=e[2],x[3]=e[3];if(C[0]!==L[0]||C[1]!==L[1])g.blendEquationSeparate(C[0],C[1]),L[0]=C[0],L[1]=C[1];if(K[0]!==A[0]||K[1]!==A[1]||K[2]!==A[2]||K[3]!==A[3])g.blendFuncSeparate(K[0],K[1],K[2],K[3]),A[0]=K[0],A[1]=K[1],A[2]=K[2],A[3]=K[3];if(m[0]!==t[0]||m[1]!==t[1]||m[2]!==t[2]||
m[3]!==t[3])g.colorMask(m[0],m[1],m[2],m[3]),t[0]=m[0],t[1]=m[1],t[2]=m[2],t[3]=m[3];T!==z&&(g.cullFace(T),F.cull_face=T);l!==O&&(g.depthFunc(l),F.depth_func=l);N!==wa&&(g.depthMask(N),F.depth_mask=N);if(da[0]!==y[0]||da[1]!==y[1])g.depthRange(da[0],da[1]),y[0]=da[0],y[1]=da[1];na!==n&&(g.frontFace(na),F.frontFace=na);G!==ba&&(g.lineWidth(G),F.lineWidth=G);if(U[0]!==u[0]||U[1]!==u[1])g.polygonOffset(U[0],U[1]),u[0]=U[0],u[1]=U[1];if(Q[0]!==ga[0]||Q[1]!==ga[1])g.sampleCoverage(Q[0],Q[1]),ga[0]=Q[0],
ga[1]=Q[1];if(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3])g.scissor(c[0],c[1],c[2],c[3]),h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3];if(M[0]!==r[0]||M[1]!==r[1]||M[2]!==r[2])g.stencilFunc(M[0],M[1],M[2]),r[0]=M[0],r[1]=M[1],r[2]=M[2];S!==la&&(g.stencilMask(S),F.stencil_mask=S);if(aa[0]!==k[0]||aa[1]!==k[1]||aa[2]!==k[2]||aa[3]!==k[3])g.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]),k[0]=aa[0],k[1]=aa[1],k[2]=aa[2],k[3]=aa[3];if(w[0]!==W[0]||w[1]!==W[1]||w[2]!==W[2]||w[3]!==W[3])g.stencilOpSeparate(w[0],
w[1],w[2],w[3]),W[0]=w[0],W[1]=w[1],W[2]=w[2],W[3]=w[3];if(E[0]!==D[0]||E[1]!==D[1]||E[2]!==D[2]||E[3]!==D[3])g.viewport(E[0],E[1],E[2],E[3]),D[0]=E[0],D[1]=E[1],D[2]=E[2],D[3]=E[3]},refresh:function(){var d,P,b,a,B,qa,hd,Y,ea,R,T,z,l,O,N,wa;F.dirty=!1;P=f.blend_enable;b=f.cull_enable;a=f.depth_enable;B=f.dither;qa=f.polygonOffset_enable;hd=f.sample_alpha;Y=f.sample_enable;ea=f.scissor_enable;R=f.stencil_enable;T=f.cull_face;z=f.depth_func;l=f.depth_mask;O=f.frontFace;N=f.lineWidth;wa=f.stencil_mask;
(d=J.next)?g.bindFramebuffer(36160,d.framebuffer):g.bindFramebuffer(36160,null);J.cur=d;d=X[0];d.buffer?(g.enableVertexAttribArray(0),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(0),g.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=X[1];d.buffer?(g.enableVertexAttribArray(1),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(1),
g.vertexAttrib4f(1,d.x,d.y,d.z,d.w),d.buffer=null);d=X[2];d.buffer?(g.enableVertexAttribArray(2),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(2),g.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=X[3];d.buffer?(g.enableVertexAttribArray(3),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(3),g.vertexAttrib4f(3,d.x,d.y,d.z,
d.w),d.buffer=null);d=X[4];d.buffer?(g.enableVertexAttribArray(4),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(4),g.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=X[5];d.buffer?(g.enableVertexAttribArray(5),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(5),g.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=X[6];d.buffer?
(g.enableVertexAttribArray(6),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(6),g.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=X[7];d.buffer?(g.enableVertexAttribArray(7),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(7),g.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=X[8];d.buffer?(g.enableVertexAttribArray(8),g.bindBuffer(34962,
d.buffer.buffer),g.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(8),g.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=X[9];d.buffer?(g.enableVertexAttribArray(9),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(9),g.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=X[10];d.buffer?(g.enableVertexAttribArray(10),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(10,
d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(10),g.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=X[11];d.buffer?(g.enableVertexAttribArray(11),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(11),g.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=X[12];d.buffer?(g.enableVertexAttribArray(12),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(g.disableVertexAttribArray(12),g.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=X[13];d.buffer?(g.enableVertexAttribArray(13),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(13),g.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=X[14];d.buffer?(g.enableVertexAttribArray(14),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(14),
g.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=X[15];d.buffer?(g.enableVertexAttribArray(15),g.bindBuffer(34962,d.buffer.buffer),g.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(g.disableVertexAttribArray(15),g.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);q.currentVAO=null;q.setVAO(q.targetVAO);P?g.enable(3042):g.disable(3042);F.blend_enable=P;b?g.enable(2884):g.disable(2884);F.cull_enable=b;a?g.enable(2929):g.disable(2929);F.depth_enable=a;B?g.enable(3024):g.disable(3024);
F.dither=B;qa?g.enable(32823):g.disable(32823);F.polygonOffset_enable=qa;hd?g.enable(32926):g.disable(32926);F.sample_alpha=hd;Y?g.enable(32928):g.disable(32928);F.sample_enable=Y;ea?g.enable(3089):g.disable(3089);F.scissor_enable=ea;R?g.enable(2960):g.disable(2960);F.stencil_enable=R;g.blendColor(e[0],e[1],e[2],e[3]);x[0]=e[0];x[1]=e[1];x[2]=e[2];x[3]=e[3];g.blendEquationSeparate(C[0],C[1]);L[0]=C[0];L[1]=C[1];g.blendFuncSeparate(K[0],K[1],K[2],K[3]);A[0]=K[0];A[1]=K[1];A[2]=K[2];A[3]=K[3];g.colorMask(m[0],
m[1],m[2],m[3]);t[0]=m[0];t[1]=m[1];t[2]=m[2];t[3]=m[3];g.cullFace(T);F.cull_face=T;g.depthFunc(z);F.depth_func=z;g.depthMask(l);F.depth_mask=l;g.depthRange(da[0],da[1]);y[0]=da[0];y[1]=da[1];g.frontFace(O);F.frontFace=O;g.lineWidth(N);F.lineWidth=N;g.polygonOffset(U[0],U[1]);u[0]=U[0];u[1]=U[1];g.sampleCoverage(Q[0],Q[1]);ga[0]=Q[0];ga[1]=Q[1];g.scissor(c[0],c[1],c[2],c[3]);h[0]=c[0];h[1]=c[1];h[2]=c[2];h[3]=c[3];g.stencilFunc(M[0],M[1],M[2]);r[0]=M[0];r[1]=M[1];r[2]=M[2];g.stencilMask(wa);F.stencil_mask=
wa;g.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]);k[0]=aa[0];k[1]=aa[1];k[2]=aa[2];k[3]=aa[3];g.stencilOpSeparate(w[0],w[1],w[2],w[3]);W[0]=w[0];W[1]=w[1];W[2]=w[2];W[3]=w[3];g.viewport(E[0],E[1],E[2],E[3]);D[0]=E[0];D[1]=E[1];D[2]=E[2];D[3]=E[3]}}},$3:function(a,X,F,J){var g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa;g=a.context;f=a.current;q=a.framebuffer;e=a.gl;x=a.next;C=a.shader;L=a.vao;K=x.blend_color;A=f.blend_color;m=x.blend_equation;t=f.blend_equation;da=x.blend_func;
y=f.blend_func;U=x.colorMask;u=f.colorMask;Q=x.depth_range;ga=f.depth_range;c=x.polygonOffset_offset;h=f.polygonOffset_offset;M=x.sample_coverage;r=f.sample_coverage;aa=x.scissor_box;k=f.scissor_box;w=x.stencil_func;W=f.stencil_func;E=x.stencil_opBack;D=f.stencil_opBack;d=x.stencil_opFront;P=f.stencil_opFront;b=x.viewport;xa=f.viewport;B={};qa={};return{batch:function(g,a){var B,R,T,z,l;B=q.next;B!==q.cur&&(B?e.bindFramebuffer(36160,B.framebuffer):e.bindFramebuffer(36160,null),q.cur=B);if(f.dirty){B=
x.dither;B!==f.dither&&(B?e.enable(3024):e.disable(3024),f.dither=B);B=x.blend_enable;B!==f.blend_enable&&(B?e.enable(3042):e.disable(3042),f.blend_enable=B);B=K[0];T=K[1];z=K[2];l=K[3];if(B!==A[0]||T!==A[1]||z!==A[2]||l!==A[3])e.blendColor(B,T,z,l),A[0]=B,A[1]=T,A[2]=z,A[3]=l;B=m[0];T=m[1];if(B!==t[0]||T!==t[1])e.blendEquationSeparate(B,T),t[0]=B,t[1]=T;B=da[0];T=da[1];z=da[2];l=da[3];if(B!==y[0]||T!==y[1]||z!==y[2]||l!==y[3])e.blendFuncSeparate(B,T,z,l),y[0]=B,y[1]=T,y[2]=z,y[3]=l;B=x.depth_enable;
B!==f.depth_enable&&(B?e.enable(2929):e.disable(2929),f.depth_enable=B);B=x.depth_func;B!==f.depth_func&&(e.depthFunc(B),f.depth_func=B);B=Q[0];T=Q[1];if(B!==ga[0]||T!==ga[1])e.depthRange(B,T),ga[0]=B,ga[1]=T;B=x.depth_mask;B!==f.depth_mask&&(e.depthMask(B),f.depth_mask=B);B=U[0];T=U[1];z=U[2];l=U[3];if(B!==u[0]||T!==u[1]||z!==u[2]||l!==u[3])e.colorMask(B,T,z,l),u[0]=B,u[1]=T,u[2]=z,u[3]=l;B=x.cull_enable;B!==f.cull_enable&&(B?e.enable(2884):e.disable(2884),f.cull_enable=B);B=x.cull_face;B!==f.cull_face&&
(e.cullFace(B),f.cull_face=B);B=x.frontFace;B!==f.frontFace&&(e.frontFace(B),f.frontFace=B);B=x.lineWidth;B!==f.lineWidth&&(e.lineWidth(B),f.lineWidth=B);B=x.polygonOffset_enable;B!==f.polygonOffset_enable&&(B?e.enable(32823):e.disable(32823),f.polygonOffset_enable=B);B=c[0];T=c[1];if(B!==h[0]||T!==h[1])e.polygonOffset(B,T),h[0]=B,h[1]=T;B=x.sample_alpha;B!==f.sample_alpha&&(B?e.enable(32926):e.disable(32926),f.sample_alpha=B);B=x.sample_enable;B!==f.sample_enable&&(B?e.enable(32928):e.disable(32928),
f.sample_enable=B);B=M[0];T=M[1];if(B!==r[0]||T!==r[1])e.sampleCoverage(B,T),r[0]=B,r[1]=T;B=x.stencil_enable;B!==f.stencil_enable&&(B?e.enable(2960):e.disable(2960),f.stencil_enable=B);B=x.stencil_mask;B!==f.stencil_mask&&(e.stencilMask(B),f.stencil_mask=B);B=w[0];T=w[1];z=w[2];if(B!==W[0]||T!==W[1]||z!==W[2])e.stencilFunc(B,T,z),W[0]=B,W[1]=T,W[2]=z;B=d[0];T=d[1];z=d[2];l=d[3];if(B!==P[0]||T!==P[1]||z!==P[2]||l!==P[3])e.stencilOpSeparate(B,T,z,l),P[0]=B,P[1]=T,P[2]=z,P[3]=l;B=E[0];T=E[1];z=E[2];
l=E[3];if(B!==D[0]||T!==D[1]||z!==D[2]||l!==D[3])e.stencilOpSeparate(B,T,z,l),D[0]=B,D[1]=T,D[2]=z,D[3]=l;B=x.scissor_enable;B!==f.scissor_enable&&(B?e.enable(3089):e.disable(3089),f.scissor_enable=B);B=aa[0];T=aa[1];z=aa[2];l=aa[3];if(B!==k[0]||T!==k[1]||z!==k[2]||l!==k[3])e.scissor(B,T,z,l),k[0]=B,k[1]=T,k[2]=z,k[3]=l;B=b[0];T=b[1];z=b[2];l=b[3];if(B!==xa[0]||T!==xa[1]||z!==xa[2]||l!==xa[3])e.viewport(B,T,z,l),xa[0]=B,xa[1]=T,xa[2]=z,xa[3]=l;f.dirty=!1}if(B=f.profile)R=performance.now(),X.count+=
a;T=C.program(C.vert,C.frag);e.useProgram(T.program);L.setVAO(null);z=T.id;(l=qa[z])||(l=qa[z]=J(T));l.call(this,g,a);L.setVAO(null);B&&(X.cpuTime+=performance.now()-R)},draw:function(g){var a,J,R,T,z;a=q.next;a!==q.cur&&(a?e.bindFramebuffer(36160,a.framebuffer):e.bindFramebuffer(36160,null),q.cur=a);if(f.dirty){a=x.dither;a!==f.dither&&(a?e.enable(3024):e.disable(3024),f.dither=a);a=x.blend_enable;a!==f.blend_enable&&(a?e.enable(3042):e.disable(3042),f.blend_enable=a);a=K[0];R=K[1];T=K[2];z=K[3];
if(a!==A[0]||R!==A[1]||T!==A[2]||z!==A[3])e.blendColor(a,R,T,z),A[0]=a,A[1]=R,A[2]=T,A[3]=z;a=m[0];R=m[1];if(a!==t[0]||R!==t[1])e.blendEquationSeparate(a,R),t[0]=a,t[1]=R;a=da[0];R=da[1];T=da[2];z=da[3];if(a!==y[0]||R!==y[1]||T!==y[2]||z!==y[3])e.blendFuncSeparate(a,R,T,z),y[0]=a,y[1]=R,y[2]=T,y[3]=z;a=x.depth_enable;a!==f.depth_enable&&(a?e.enable(2929):e.disable(2929),f.depth_enable=a);a=x.depth_func;a!==f.depth_func&&(e.depthFunc(a),f.depth_func=a);a=Q[0];R=Q[1];if(a!==ga[0]||R!==ga[1])e.depthRange(a,
R),ga[0]=a,ga[1]=R;a=x.depth_mask;a!==f.depth_mask&&(e.depthMask(a),f.depth_mask=a);a=U[0];R=U[1];T=U[2];z=U[3];if(a!==u[0]||R!==u[1]||T!==u[2]||z!==u[3])e.colorMask(a,R,T,z),u[0]=a,u[1]=R,u[2]=T,u[3]=z;a=x.cull_enable;a!==f.cull_enable&&(a?e.enable(2884):e.disable(2884),f.cull_enable=a);a=x.cull_face;a!==f.cull_face&&(e.cullFace(a),f.cull_face=a);a=x.frontFace;a!==f.frontFace&&(e.frontFace(a),f.frontFace=a);a=x.lineWidth;a!==f.lineWidth&&(e.lineWidth(a),f.lineWidth=a);a=x.polygonOffset_enable;a!==
f.polygonOffset_enable&&(a?e.enable(32823):e.disable(32823),f.polygonOffset_enable=a);a=c[0];R=c[1];if(a!==h[0]||R!==h[1])e.polygonOffset(a,R),h[0]=a,h[1]=R;a=x.sample_alpha;a!==f.sample_alpha&&(a?e.enable(32926):e.disable(32926),f.sample_alpha=a);a=x.sample_enable;a!==f.sample_enable&&(a?e.enable(32928):e.disable(32928),f.sample_enable=a);a=M[0];R=M[1];if(a!==r[0]||R!==r[1])e.sampleCoverage(a,R),r[0]=a,r[1]=R;a=x.stencil_enable;a!==f.stencil_enable&&(a?e.enable(2960):e.disable(2960),f.stencil_enable=
a);a=x.stencil_mask;a!==f.stencil_mask&&(e.stencilMask(a),f.stencil_mask=a);a=w[0];R=w[1];T=w[2];if(a!==W[0]||R!==W[1]||T!==W[2])e.stencilFunc(a,R,T),W[0]=a,W[1]=R,W[2]=T;a=d[0];R=d[1];T=d[2];z=d[3];if(a!==P[0]||R!==P[1]||T!==P[2]||z!==P[3])e.stencilOpSeparate(a,R,T,z),P[0]=a,P[1]=R,P[2]=T,P[3]=z;a=E[0];R=E[1];T=E[2];z=E[3];if(a!==D[0]||R!==D[1]||T!==D[2]||z!==D[3])e.stencilOpSeparate(a,R,T,z),D[0]=a,D[1]=R,D[2]=T,D[3]=z;a=x.scissor_enable;a!==f.scissor_enable&&(a?e.enable(3089):e.disable(3089),f.scissor_enable=
a);a=aa[0];R=aa[1];T=aa[2];z=aa[3];if(a!==k[0]||R!==k[1]||T!==k[2]||z!==k[3])e.scissor(a,R,T,z),k[0]=a,k[1]=R,k[2]=T,k[3]=z;a=b[0];R=b[1];T=b[2];z=b[3];if(a!==xa[0]||R!==xa[1]||T!==xa[2]||z!==xa[3])e.viewport(a,R,T,z),xa[0]=a,xa[1]=R,xa[2]=T,xa[3]=z;f.dirty=!1}if(a=f.profile)J=performance.now(),X.count++;R=C.program(C.vert,C.frag);e.useProgram(R.program);L.setVAO(null);T=R.id;(z=B[T])||(z=B[T]=F(R));z.call(this,g);L.setVAO(null);a&&(X.cpuTime+=performance.now()-J)},scope:function(b,d,c){var e,h;if(e=
f.profile)h=performance.now(),X.count++;d(g,b,c);e&&(X.cpuTime+=performance.now()-h)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,hd,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,
Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,dd,Gb,ha,H,sa,Ga,ra,za,Da){var ka,Z,ta,Ja,Fa,gb,ca,zd,Zb,Ha,$b,Rb,V,Bd,oe,Vd,ze,se,Ud,ne,xe,Cd,rd,ge,be,De,Ze,Re,Fd,Be,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va;ka=a.attributes;Z=a.context;ta=a.current;Ja=a.draw;Fa=a.elements;gb=a.framebuffer;ca=a.gl;zd=a.next;Zb=a.shader;Ha=a.uniforms;$b=a.vao;Rb=zd.blend_color;V=ta.blend_color;Bd=zd.blend_equation;oe=ta.blend_equation;Vd=zd.blend_func;
ze=ta.blend_func;se=zd.colorMask;Ud=ta.colorMask;ne=zd.depth_range;xe=ta.depth_range;Cd=zd.polygonOffset_offset;rd=ta.polygonOffset_offset;ge=zd.sample_coverage;be=ta.sample_coverage;De=zd.scissor_box;Ze=ta.scissor_box;Re=zd.stencil_func;Fd=ta.stencil_func;Be=zd.stencil_opBack;te=ta.stencil_opBack;$d=zd.stencil_opFront;Wd=ta.stencil_opFront;Ld=zd.viewport;md=ta.viewport;$c={};sd={};Kc=new Float32Array(16);pd=new Float32Array(16);Ec=new Float32Array(16);ed=new Float32Array(16);Oc=new Float32Array(16);
ld=new Float32Array(16);Ab=new Float32Array(16);Eb=new Float32Array(16);tc=new Float32Array(16);wb=new Float32Array(16);wc=new Float32Array(16);Bb=new Float32Array(16);Ic=new Float32Array(16);lc=new Float32Array(16);Fc=new Float32Array(16);Wc=new Float32Array(16);Vc=new Float32Array(16);Cc=new Float32Array(16);ec=new Float32Array(16);Gc=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);mc=new Float32Array(16);fc=new Float32Array(16);$a=new Float32Array(16);Hc=new Float32Array(16);
xb=new Float32Array(16);cb=new Float32Array(16);Mb=new Float32Array(16);ab=new Float32Array(16);nb=new Float32Array(16);Va=new Float32Array(16);return{batch:function(b,d){var c,h,k,a;c=gb.next;c!==gb.cur&&(c?ca.bindFramebuffer(36160,c.framebuffer):ca.bindFramebuffer(36160,null),gb.cur=c);if(ta.dirty){var r,P,B,w,E,D,M,F,Q,X,aa,ga,W,Ha,xa,qa,Rb,Zb,La,Eb,Oc,Ab,Bb,Pa,De;r=se[0];P=se[1];B=se[2];w=se[3];if(r!==Ud[0]||P!==Ud[1]||B!==Ud[2]||w!==Ud[3])ca.colorMask(r,P,B,w),Ud[0]=r,Ud[1]=P,Ud[2]=B,Ud[3]=w;
E=zd.frontFace;E!==ta.frontFace&&(ca.frontFace(E),ta.frontFace=E);D=zd.polygonOffset_enable;D!==ta.polygonOffset_enable&&(D?ca.enable(32823):ca.disable(32823),ta.polygonOffset_enable=D);M=Cd[0];F=Cd[1];if(M!==rd[0]||F!==rd[1])ca.polygonOffset(M,F),rd[0]=M,rd[1]=F;Q=zd.sample_alpha;Q!==ta.sample_alpha&&(Q?ca.enable(32926):ca.disable(32926),ta.sample_alpha=Q);X=zd.sample_enable;X!==ta.sample_enable&&(X?ca.enable(32928):ca.disable(32928),ta.sample_enable=X);aa=ge[0];ga=ge[1];if(aa!==be[0]||ga!==be[1])ca.sampleCoverage(aa,
ga),be[0]=aa,be[1]=ga;W=zd.stencil_enable;W!==ta.stencil_enable&&(W?ca.enable(2960):ca.disable(2960),ta.stencil_enable=W);Ha=zd.stencil_mask;Ha!==ta.stencil_mask&&(ca.stencilMask(Ha),ta.stencil_mask=Ha);xa=Re[0];qa=Re[1];Rb=Re[2];if(xa!==Fd[0]||qa!==Fd[1]||Rb!==Fd[2])ca.stencilFunc(xa,qa,Rb),Fd[0]=xa,Fd[1]=qa,Fd[2]=Rb;Zb=$d[0];La=$d[1];Eb=$d[2];Oc=$d[3];if(Zb!==Wd[0]||La!==Wd[1]||Eb!==Wd[2]||Oc!==Wd[3])ca.stencilOpSeparate(Zb,La,Eb,Oc),Wd[0]=Zb,Wd[1]=La,Wd[2]=Eb,Wd[3]=Oc;Ab=Be[0];Bb=Be[1];Pa=Be[2];
De=Be[3];if(Ab!==te[0]||Bb!==te[1]||Pa!==te[2]||De!==te[3])ca.stencilOpSeparate(Ab,Bb,Pa,De),te[0]=Ab,te[1]=Bb,te[2]=Pa,te[3]=De}ca.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;ca.disable(3042);ta.blend_enable=!1;ca.blendEquationSeparate(32774,32774);oe[0]=32774;oe[1]=32774;ca.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ca.enable(2884);ta.cull_enable=!0;ca.cullFace(1029);ta.cull_face=1029;ca.enable(2929);ta.depth_enable=!0;ca.depthFunc(513);ta.depth_func=513;ca.depthMask(!0);
ta.depth_mask=!0;ca.depthRange(0,1);xe[0]=0;xe[1]=1;ca.disable(3024);ta.dither=!1;ca.lineWidth(2);ta.lineWidth=2;ca.enable(3089);ta.scissor_enable=!0;h=ta.profile;ta.profile=!1;ca.useProgram(hd.program);var Ra,wb,ld,Na,lc,Ya,Ec,Vd,lb,Oa,tc,Qa,tb,ub,Sa,mb,pd,Bd,Fc,bb,Ic,ed,Xa,Kc,zb,Za,ne,wc,Vb,Pb,Ld,Qb,Wc;$b.setVAO(null);Ra=ya.location;wb=ka[Ra];wb.buffer||ca.enableVertexAttribArray(Ra);if(wb.type!==J.dtype||4!==wb.size||wb.buffer!==J||!1!==wb.normalized||0!==wb.offset||0!==wb.stride)ca.bindBuffer(34962,
J.buffer),ca.vertexAttribPointer(Ra,4,J.dtype,!1,0,0),wb.type=J.dtype,wb.size=4,wb.buffer=J,wb.normalized=!1,wb.offset=0,wb.stride=0;ld=Ma.location;Na=ka[ld];Na.buffer||ca.enableVertexAttribArray(ld);if(Na.type!==g.dtype||4!==Na.size||Na.buffer!==g||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)ca.bindBuffer(34962,g.buffer),ca.vertexAttribPointer(ld,4,g.dtype,!1,0,0),Na.type=g.dtype,Na.size=4,Na.buffer=g,Na.normalized=!1,Na.offset=0,Na.stride=0;lc=ma.location;Ya=ka[lc];Ya.buffer||ca.enableVertexAttribArray(lc);
if(Ya.type!==f.dtype||4!==Ya.size||Ya.buffer!==f||!1!==Ya.normalized||0!==Ya.offset||0!==Ya.stride)ca.bindBuffer(34962,f.buffer),ca.vertexAttribPointer(lc,4,f.dtype,!1,0,0),Ya.type=f.dtype,Ya.size=4,Ya.buffer=f,Ya.normalized=!1,Ya.offset=0,Ya.stride=0;Ec=cc.location;Vd=ka[Ec];Vd.buffer||ca.enableVertexAttribArray(Ec);if(Vd.type!==q.dtype||4!==Vd.size||Vd.buffer!==q||!1!==Vd.normalized||0!==Vd.offset||0!==Vd.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(Ec,4,q.dtype,!1,0,0),Vd.type=q.dtype,
Vd.size=4,Vd.buffer=q,Vd.normalized=!1,Vd.offset=0,Vd.stride=0;lb=Ta.location;Oa=ka[lb];Oa.buffer||ca.enableVertexAttribArray(lb);if(Oa.type!==e.dtype||4!==Oa.size||Oa.buffer!==e||!1!==Oa.normalized||0!==Oa.offset||0!==Oa.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(lb,4,e.dtype,!1,0,0),Oa.type=e.dtype,Oa.size=4,Oa.buffer=e,Oa.normalized=!1,Oa.offset=0,Oa.stride=0;tc=v.location;Qa=ka[tc];Qa.buffer||ca.enableVertexAttribArray(tc);if(Qa.type!==x.dtype||4!==Qa.size||Qa.buffer!==x||!1!==
Qa.normalized||0!==Qa.offset||0!==Qa.stride)ca.bindBuffer(34962,x.buffer),ca.vertexAttribPointer(tc,4,x.dtype,!1,0,0),Qa.type=x.dtype,Qa.size=4,Qa.buffer=x,Qa.normalized=!1,Qa.offset=0,Qa.stride=0;tb=p.location;ub=ka[tb];ub.buffer||ca.enableVertexAttribArray(tb);if(ub.type!==C.dtype||4!==ub.size||ub.buffer!==C||!1!==ub.normalized||0!==ub.offset||0!==ub.stride)ca.bindBuffer(34962,C.buffer),ca.vertexAttribPointer(tb,4,C.dtype,!1,0,0),ub.type=C.dtype,ub.size=4,ub.buffer=C,ub.normalized=!1,ub.offset=
0,ub.stride=0;Sa=I.location;mb=ka[Sa];mb.buffer||ca.enableVertexAttribArray(Sa);if(mb.type!==L.dtype||4!==mb.size||mb.buffer!==L||!1!==mb.normalized||0!==mb.offset||0!==mb.stride)ca.bindBuffer(34962,L.buffer),ca.vertexAttribPointer(Sa,4,L.dtype,!1,0,0),mb.type=L.dtype,mb.size=4,mb.buffer=L,mb.normalized=!1,mb.offset=0,mb.stride=0;pd=ua.location;Bd=ka[pd];Bd.buffer||ca.enableVertexAttribArray(pd);if(Bd.type!==K.dtype||4!==Bd.size||Bd.buffer!==K||!1!==Bd.normalized||0!==Bd.offset||0!==Bd.stride)ca.bindBuffer(34962,
K.buffer),ca.vertexAttribPointer(pd,4,K.dtype,!1,0,0),Bd.type=K.dtype,Bd.size=4,Bd.buffer=K,Bd.normalized=!1,Bd.offset=0,Bd.stride=0;Fc=va.location;bb=ka[Fc];bb.buffer||ca.enableVertexAttribArray(Fc);if(bb.type!==A.dtype||4!==bb.size||bb.buffer!==A||!1!==bb.normalized||0!==bb.offset||0!==bb.stride)ca.bindBuffer(34962,A.buffer),ca.vertexAttribPointer(Fc,4,A.dtype,!1,0,0),bb.type=A.dtype,bb.size=4,bb.buffer=A,bb.normalized=!1,bb.offset=0,bb.stride=0;Ic=dd.location;ed=ka[Ic];ed.buffer||ca.enableVertexAttribArray(Ic);
if(ed.type!==m.dtype||4!==ed.size||ed.buffer!==m||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)ca.bindBuffer(34962,m.buffer),ca.vertexAttribPointer(Ic,4,m.dtype,!1,0,0),ed.type=m.dtype,ed.size=4,ed.buffer=m,ed.normalized=!1,ed.offset=0,ed.stride=0;Xa=Gb.location;Kc=ka[Xa];Kc.buffer||ca.enableVertexAttribArray(Xa);if(Kc.type!==t.dtype||4!==Kc.size||Kc.buffer!==t||!1!==Kc.normalized||0!==Kc.offset||0!==Kc.stride)ca.bindBuffer(34962,t.buffer),ca.vertexAttribPointer(Xa,4,t.dtype,!1,0,0),Kc.type=t.dtype,
Kc.size=4,Kc.buffer=t,Kc.normalized=!1,Kc.offset=0,Kc.stride=0;zb=ha.location;Za=ka[zb];Za.buffer||ca.enableVertexAttribArray(zb);if(Za.type!==da.dtype||4!==Za.size||Za.buffer!==da||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)ca.bindBuffer(34962,da.buffer),ca.vertexAttribPointer(zb,4,da.dtype,!1,0,0),Za.type=da.dtype,Za.size=4,Za.buffer=da,Za.normalized=!1,Za.offset=0,Za.stride=0;ne=H.location;wc=ka[ne];wc.buffer||ca.enableVertexAttribArray(ne);if(wc.type!==y.dtype||4!==wc.size||wc.buffer!==
y||!1!==wc.normalized||0!==wc.offset||0!==wc.stride)ca.bindBuffer(34962,y.buffer),ca.vertexAttribPointer(ne,4,y.dtype,!1,0,0),wc.type=y.dtype,wc.size=4,wc.buffer=y,wc.normalized=!1,wc.offset=0,wc.stride=0;Vb=sa.location;Pb=ka[Vb];Pb.buffer||ca.enableVertexAttribArray(Vb);if(Pb.type!==U.dtype||4!==Pb.size||Pb.buffer!==U||!1!==Pb.normalized||0!==Pb.offset||0!==Pb.stride)ca.bindBuffer(34962,U.buffer),ca.vertexAttribPointer(Vb,4,U.dtype,!1,0,0),Pb.type=U.dtype,Pb.size=4,Pb.buffer=U,Pb.normalized=!1,Pb.offset=
0,Pb.stride=0;Ld=ea.location;Qb=ka[Ld];Qb.buffer||ca.enableVertexAttribArray(Ld);if(Qb.type!==u.dtype||4!==Qb.size||Qb.buffer!==u||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)ca.bindBuffer(34962,u.buffer),ca.vertexAttribPointer(Ld,4,u.dtype,!1,0,0),Qb.type=u.dtype,Qb.size=4,Qb.buffer=u,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;ca.uniform1i(Ga.location,Y.bind());(Wc=Ja.elements)?ca.bindBuffer(34963,Wc.buffer.buffer):$b.currentVAO&&(Wc=Fa.getElements($b.currentVAO.elements))&&ca.bindBuffer(34963,
Wc.buffer.buffer);for(k=0;k<d;++k){a=b[k];var Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,ia,ye,xd,jd,uf,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Aa,ke,ie,he,ue,ee;$c.height=a.viewportHeight;$c.width=a.viewportWidth;$c.x=a.viewportX;$c.y=a.viewportY;Dc=$c.x|0;ud=$c.y|0;Mc="width"in $c?$c.width|0:Z.framebufferWidth-Dc;fd="height"in $c?$c.height|0:Z.framebufferHeight-ud;qd=Z.viewportWidth;Z.viewportWidth=Mc;nc=Z.viewportHeight;Z.viewportHeight=
fd;ca.viewport(Dc,ud,Mc,fd);md[0]=Dc;md[1]=ud;md[2]=Mc;md[3]=fd;sd.height=a.scissorHeight;sd.width=a.scissorWidth;sd.x=a.scissorX;sd.y=a.scissorY;vc=sd.x|0;hc=sd.y|0;db="width"in sd?sd.width|0:Z.framebufferWidth-vc;rc="height"in sd?sd.height|0:Z.framebufferHeight-hc;ca.scissor(vc,hc,db,rc);Ze[0]=vc;Ze[1]=hc;Ze[2]=db;Ze[3]=rc;Sb=a.dim0A;ca.uniformMatrix4fv(T.location,!1,Array.isArray(Sb)||Sb instanceof Float32Array?Sb:(Vc[0]=Sb[0],Vc[1]=Sb[1],Vc[2]=Sb[2],Vc[3]=Sb[3],Vc[4]=Sb[4],Vc[5]=Sb[5],Vc[6]=Sb[6],
Vc[7]=Sb[7],Vc[8]=Sb[8],Vc[9]=Sb[9],Vc[10]=Sb[10],Vc[11]=Sb[11],Vc[12]=Sb[12],Vc[13]=Sb[13],Vc[14]=Sb[14],Vc[15]=Sb[15],Vc));Wb=a.dim1A;ca.uniformMatrix4fv(N.location,!1,Array.isArray(Wb)||Wb instanceof Float32Array?Wb:(Cc[0]=Wb[0],Cc[1]=Wb[1],Cc[2]=Wb[2],Cc[3]=Wb[3],Cc[4]=Wb[4],Cc[5]=Wb[5],Cc[6]=Wb[6],Cc[7]=Wb[7],Cc[8]=Wb[8],Cc[9]=Wb[9],Cc[10]=Wb[10],Cc[11]=Wb[11],Cc[12]=Wb[12],Cc[13]=Wb[13],Cc[14]=Wb[14],Cc[15]=Wb[15],Cc));dc=a.dim0B;ca.uniformMatrix4fv(z.location,!1,Array.isArray(dc)||dc instanceof
Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));ic=a.dim1B;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Gc[0]=ic[0],Gc[1]=ic[1],Gc[2]=ic[2],Gc[3]=ic[3],Gc[4]=ic[4],Gc[5]=ic[5],Gc[6]=ic[6],Gc[7]=ic[7],Gc[8]=ic[8],Gc[9]=ic[9],Gc[10]=ic[10],Gc[11]=ic[11],Gc[12]=ic[12],Gc[13]=ic[13],Gc[14]=
ic[14],Gc[15]=ic[15],Gc));xc=a.dim0C;ca.uniformMatrix4fv(l.location,!1,Array.isArray(xc)||xc instanceof Float32Array?xc:(oc[0]=xc[0],oc[1]=xc[1],oc[2]=xc[2],oc[3]=xc[3],oc[4]=xc[4],oc[5]=xc[5],oc[6]=xc[6],oc[7]=xc[7],oc[8]=xc[8],oc[9]=xc[9],oc[10]=xc[10],oc[11]=xc[11],oc[12]=xc[12],oc[13]=xc[13],oc[14]=xc[14],oc[15]=xc[15],oc));Ac=a.dim1C;ca.uniformMatrix4fv(na.location,!1,Array.isArray(Ac)||Ac instanceof Float32Array?Ac:(pc[0]=Ac[0],pc[1]=Ac[1],pc[2]=Ac[2],pc[3]=Ac[3],pc[4]=Ac[4],pc[5]=Ac[5],pc[6]=
Ac[6],pc[7]=Ac[7],pc[8]=Ac[8],pc[9]=Ac[9],pc[10]=Ac[10],pc[11]=Ac[11],pc[12]=Ac[12],pc[13]=Ac[13],pc[14]=Ac[14],pc[15]=Ac[15],pc));ad=a.dim0D;ca.uniformMatrix4fv(O.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(mc[0]=ad[0],mc[1]=ad[1],mc[2]=ad[2],mc[3]=ad[3],mc[4]=ad[4],mc[5]=ad[5],mc[6]=ad[6],mc[7]=ad[7],mc[8]=ad[8],mc[9]=ad[9],mc[10]=ad[10],mc[11]=ad[11],mc[12]=ad[12],mc[13]=ad[13],mc[14]=ad[14],mc[15]=ad[15],mc));Pc=a.dim1D;ca.uniformMatrix4fv(n.location,!1,Array.isArray(Pc)||Pc instanceof
Float32Array?Pc:(fc[0]=Pc[0],fc[1]=Pc[1],fc[2]=Pc[2],fc[3]=Pc[3],fc[4]=Pc[4],fc[5]=Pc[5],fc[6]=Pc[6],fc[7]=Pc[7],fc[8]=Pc[8],fc[9]=Pc[9],fc[10]=Pc[10],fc[11]=Pc[11],fc[12]=Pc[12],fc[13]=Pc[13],fc[14]=Pc[14],fc[15]=Pc[15],fc));Qc=a.loA;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:($a[0]=Qc[0],$a[1]=Qc[1],$a[2]=Qc[2],$a[3]=Qc[3],$a[4]=Qc[4],$a[5]=Qc[5],$a[6]=Qc[6],$a[7]=Qc[7],$a[8]=Qc[8],$a[9]=Qc[9],$a[10]=Qc[10],$a[11]=Qc[11],$a[12]=Qc[12],$a[13]=Qc[13],$a[14]=
Qc[14],$a[15]=Qc[15],$a));Rc=a.hiA;ca.uniformMatrix4fv(ba.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(Hc[0]=Rc[0],Hc[1]=Rc[1],Hc[2]=Rc[2],Hc[3]=Rc[3],Hc[4]=Rc[4],Hc[5]=Rc[5],Hc[6]=Rc[6],Hc[7]=Rc[7],Hc[8]=Rc[8],Hc[9]=Rc[9],Hc[10]=Rc[10],Hc[11]=Rc[11],Hc[12]=Rc[12],Hc[13]=Rc[13],Hc[14]=Rc[14],Hc[15]=Rc[15],Hc));Xc=a.loB;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(xb[0]=Xc[0],xb[1]=Xc[1],xb[2]=Xc[2],xb[3]=Xc[3],xb[4]=Xc[4],xb[5]=Xc[5],xb[6]=
Xc[6],xb[7]=Xc[7],xb[8]=Xc[8],xb[9]=Xc[9],xb[10]=Xc[10],xb[11]=Xc[11],xb[12]=Xc[12],xb[13]=Xc[13],xb[14]=Xc[14],xb[15]=Xc[15],xb));wd=a.hiB;ca.uniformMatrix4fv(S.location,!1,Array.isArray(wd)||wd instanceof Float32Array?wd:(cb[0]=wd[0],cb[1]=wd[1],cb[2]=wd[2],cb[3]=wd[3],cb[4]=wd[4],cb[5]=wd[5],cb[6]=wd[6],cb[7]=wd[7],cb[8]=wd[8],cb[9]=wd[9],cb[10]=wd[10],cb[11]=wd[11],cb[12]=wd[12],cb[13]=wd[13],cb[14]=wd[14],cb[15]=wd[15],cb));bd=a.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(bd)||bd instanceof
Float32Array?bd:(Mb[0]=bd[0],Mb[1]=bd[1],Mb[2]=bd[2],Mb[3]=bd[3],Mb[4]=bd[4],Mb[5]=bd[5],Mb[6]=bd[6],Mb[7]=bd[7],Mb[8]=bd[8],Mb[9]=bd[9],Mb[10]=bd[10],Mb[11]=bd[11],Mb[12]=bd[12],Mb[13]=bd[13],Mb[14]=bd[14],Mb[15]=bd[15],Mb));Yc=a.hiC;ca.uniformMatrix4fv(la.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(ab[0]=Yc[0],ab[1]=Yc[1],ab[2]=Yc[2],ab[3]=Yc[3],ab[4]=Yc[4],ab[5]=Yc[5],ab[6]=Yc[6],ab[7]=Yc[7],ab[8]=Yc[8],ab[9]=Yc[9],ab[10]=Yc[10],ab[11]=Yc[11],ab[12]=Yc[12],ab[13]=Yc[13],ab[14]=
Yc[14],ab[15]=Yc[15],ab));kc=a.loD;ca.uniformMatrix4fv(Ea.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(nb[0]=kc[0],nb[1]=kc[1],nb[2]=kc[2],nb[3]=kc[3],nb[4]=kc[4],nb[5]=kc[5],nb[6]=kc[6],nb[7]=kc[7],nb[8]=kc[8],nb[9]=kc[9],nb[10]=kc[10],nb[11]=kc[11],nb[12]=kc[12],nb[13]=kc[13],nb[14]=kc[14],nb[15]=kc[15],nb));bc=a.hiD;ca.uniformMatrix4fv(pa.location,!1,Array.isArray(bc)||bc instanceof Float32Array?bc:(Va[0]=bc[0],Va[1]=bc[1],Va[2]=bc[2],Va[3]=bc[3],Va[4]=bc[4],Va[5]=bc[5],Va[6]=
bc[6],Va[7]=bc[7],Va[8]=bc[8],Va[9]=bc[9],Va[10]=bc[10],Va[11]=bc[11],Va[12]=bc[12],Va[13]=bc[13],Va[14]=bc[14],Va[15]=bc[15],Va));Zc=a.resolution;Uc=Zc[0];yc=Zc[1];k&&cd===Uc&&id===yc||(cd=Uc,id=yc,ca.uniform2f(ra.location,Uc,yc));ia=a.viewBoxPos;ye=ia[0];jd=ia[1];k&&xd===ye&&uf===jd||(xd=ye,uf=jd,ca.uniform2f(za.location,ye,jd));Nd=a.viewBoxSize;Yd=Nd[0];Od=Nd[1];k&&de===Yd&&Id===Od||(de=Yd,Id=Od,ca.uniform2f(Da.location,Yd,Od));Gd=a.maskHeight;k&&od===Gd||(od=Gd,ca.uniform1f(ja.location,Gd));Sc=
a.drwLayer;k&&vd===Sc||(vd=Sc,ca.uniform1f(G.location,Sc));td=a.contextColor;kd=td[0];Ad=td[1];pe=td[2];Aa=td[3];k&&yd===kd&&Ed===Ad&&je===pe&&ke===Aa||(yd=kd,Ed=Ad,je=pe,ke=Aa,ca.uniform4f(R.location,kd,Ad,pe,Aa));(ie=a.maskTexture)&&"framebuffer"===ie._reglType&&(ie=ie.color[0]);he=ie._texture;ca.uniform1i(oa.location,he.bind());ue=a.offset;if(ee=a.count)Wc?ca.drawElements(1,ee,Wc.type,ue<<(Wc.type-5121>>1)):ca.drawArrays(1,ue,ee),Z.viewportWidth=qd,Z.viewportHeight=nc,he.unbind()}Y.unbind();ta.dirty=
!0;$b.setVAO(null);ta.profile=h},draw:function(b){var d,c,h,k,a,r;d=gb.next;d!==gb.cur&&(d?ca.bindFramebuffer(36160,d.framebuffer):ca.bindFramebuffer(36160,null),gb.cur=d);if(ta.dirty){d=se[0];r=se[1];c=se[2];h=se[3];if(d!==Ud[0]||r!==Ud[1]||c!==Ud[2]||h!==Ud[3])ca.colorMask(d,r,c,h),Ud[0]=d,Ud[1]=r,Ud[2]=c,Ud[3]=h;d=zd.frontFace;d!==ta.frontFace&&(ca.frontFace(d),ta.frontFace=d);d=zd.polygonOffset_enable;d!==ta.polygonOffset_enable&&(d?ca.enable(32823):ca.disable(32823),ta.polygonOffset_enable=d);
d=Cd[0];r=Cd[1];if(d!==rd[0]||r!==rd[1])ca.polygonOffset(d,r),rd[0]=d,rd[1]=r;d=zd.sample_alpha;d!==ta.sample_alpha&&(d?ca.enable(32926):ca.disable(32926),ta.sample_alpha=d);d=zd.sample_enable;d!==ta.sample_enable&&(d?ca.enable(32928):ca.disable(32928),ta.sample_enable=d);d=ge[0];r=ge[1];if(d!==be[0]||r!==be[1])ca.sampleCoverage(d,r),be[0]=d,be[1]=r;d=zd.stencil_enable;d!==ta.stencil_enable&&(d?ca.enable(2960):ca.disable(2960),ta.stencil_enable=d);d=zd.stencil_mask;d!==ta.stencil_mask&&(ca.stencilMask(d),
ta.stencil_mask=d);d=Re[0];r=Re[1];c=Re[2];if(d!==Fd[0]||r!==Fd[1]||c!==Fd[2])ca.stencilFunc(d,r,c),Fd[0]=d,Fd[1]=r,Fd[2]=c;d=$d[0];r=$d[1];c=$d[2];h=$d[3];if(d!==Wd[0]||r!==Wd[1]||c!==Wd[2]||h!==Wd[3])ca.stencilOpSeparate(d,r,c,h),Wd[0]=d,Wd[1]=r,Wd[2]=c,Wd[3]=h;d=Be[0];r=Be[1];c=Be[2];h=Be[3];if(d!==te[0]||r!==te[1]||c!==te[2]||h!==te[3])ca.stencilOpSeparate(d,r,c,h),te[0]=d,te[1]=r,te[2]=c,te[3]=h}$c.height=b.viewportHeight;$c.width=b.viewportWidth;$c.x=b.viewportX;$c.y=b.viewportY;c=$c.x|0;h=
$c.y|0;k="width"in $c?$c.width|0:Z.framebufferWidth-c;a="height"in $c?$c.height|0:Z.framebufferHeight-h;d=Z.viewportWidth;Z.viewportWidth=k;r=Z.viewportHeight;Z.viewportHeight=a;ca.viewport(c,h,k,a);md[0]=c;md[1]=h;md[2]=k;md[3]=a;ca.blendColor(0,0,0,0);V[0]=0;V[1]=0;V[2]=0;V[3]=0;ca.disable(3042);ta.blend_enable=!1;ca.blendEquationSeparate(32774,32774);oe[0]=32774;oe[1]=32774;ca.blendFuncSeparate(770,771,1,1);ze[0]=770;ze[1]=771;ze[2]=1;ze[3]=1;ca.enable(2884);ta.cull_enable=!0;ca.cullFace(1029);
ta.cull_face=1029;ca.enable(2929);ta.depth_enable=!0;ca.depthFunc(513);ta.depth_func=513;ca.depthMask(!0);ta.depth_mask=!0;ca.depthRange(0,1);xe[0]=0;xe[1]=1;ca.disable(3024);ta.dither=!1;ca.lineWidth(2);ta.lineWidth=2;sd.height=b.scissorHeight;sd.width=b.scissorWidth;sd.x=b.scissorX;sd.y=b.scissorY;c=sd.x|0;h=sd.y|0;k="width"in sd?sd.width|0:Z.framebufferWidth-c;a="height"in sd?sd.height|0:Z.framebufferHeight-h;ca.scissor(c,h,k,a);Ze[0]=c;Ze[1]=h;Ze[2]=k;Ze[3]=a;ca.enable(3089);ta.scissor_enable=
!0;c=ta.profile;ta.profile=!1;ca.useProgram(F.program);$b.setVAO(null);h=ya.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==J.dtype||4!==k.size||k.buffer!==J||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,J.buffer),ca.vertexAttribPointer(h,4,J.dtype,!1,0,0),k.type=J.dtype,k.size=4,k.buffer=J,k.normalized=!1,k.offset=0,k.stride=0;h=Ma.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==g.dtype||4!==k.size||k.buffer!==g||!1!==k.normalized||0!==
k.offset||0!==k.stride)ca.bindBuffer(34962,g.buffer),ca.vertexAttribPointer(h,4,g.dtype,!1,0,0),k.type=g.dtype,k.size=4,k.buffer=g,k.normalized=!1,k.offset=0,k.stride=0;h=ma.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==f.dtype||4!==k.size||k.buffer!==f||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,f.buffer),ca.vertexAttribPointer(h,4,f.dtype,!1,0,0),k.type=f.dtype,k.size=4,k.buffer=f,k.normalized=!1,k.offset=0,k.stride=0;h=cc.location;k=ka[h];k.buffer||
ca.enableVertexAttribArray(h);if(k.type!==q.dtype||4!==k.size||k.buffer!==q||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,q.buffer),ca.vertexAttribPointer(h,4,q.dtype,!1,0,0),k.type=q.dtype,k.size=4,k.buffer=q,k.normalized=!1,k.offset=0,k.stride=0;h=Ta.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,e.buffer),ca.vertexAttribPointer(h,4,e.dtype,!1,0,0),k.type=
e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;h=v.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==x.dtype||4!==k.size||k.buffer!==x||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,x.buffer),ca.vertexAttribPointer(h,4,x.dtype,!1,0,0),k.type=x.dtype,k.size=4,k.buffer=x,k.normalized=!1,k.offset=0,k.stride=0;h=p.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==C.dtype||4!==k.size||k.buffer!==C||!1!==k.normalized||0!==k.offset||
0!==k.stride)ca.bindBuffer(34962,C.buffer),ca.vertexAttribPointer(h,4,C.dtype,!1,0,0),k.type=C.dtype,k.size=4,k.buffer=C,k.normalized=!1,k.offset=0,k.stride=0;h=I.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==L.dtype||4!==k.size||k.buffer!==L||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,L.buffer),ca.vertexAttribPointer(h,4,L.dtype,!1,0,0),k.type=L.dtype,k.size=4,k.buffer=L,k.normalized=!1,k.offset=0,k.stride=0;h=ua.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);
if(k.type!==K.dtype||4!==k.size||k.buffer!==K||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,K.buffer),ca.vertexAttribPointer(h,4,K.dtype,!1,0,0),k.type=K.dtype,k.size=4,k.buffer=K,k.normalized=!1,k.offset=0,k.stride=0;h=va.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==A.dtype||4!==k.size||k.buffer!==A||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,A.buffer),ca.vertexAttribPointer(h,4,A.dtype,!1,0,0),k.type=A.dtype,k.size=4,k.buffer=A,
k.normalized=!1,k.offset=0,k.stride=0;h=dd.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==m.dtype||4!==k.size||k.buffer!==m||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,m.buffer),ca.vertexAttribPointer(h,4,m.dtype,!1,0,0),k.type=m.dtype,k.size=4,k.buffer=m,k.normalized=!1,k.offset=0,k.stride=0;h=Gb.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==t.dtype||4!==k.size||k.buffer!==t||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,
t.buffer),ca.vertexAttribPointer(h,4,t.dtype,!1,0,0),k.type=t.dtype,k.size=4,k.buffer=t,k.normalized=!1,k.offset=0,k.stride=0;h=ha.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==da.dtype||4!==k.size||k.buffer!==da||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,da.buffer),ca.vertexAttribPointer(h,4,da.dtype,!1,0,0),k.type=da.dtype,k.size=4,k.buffer=da,k.normalized=!1,k.offset=0,k.stride=0;h=H.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==
y.dtype||4!==k.size||k.buffer!==y||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,y.buffer),ca.vertexAttribPointer(h,4,y.dtype,!1,0,0),k.type=y.dtype,k.size=4,k.buffer=y,k.normalized=!1,k.offset=0,k.stride=0;h=sa.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==U.dtype||4!==k.size||k.buffer!==U||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,U.buffer),ca.vertexAttribPointer(h,4,U.dtype,!1,0,0),k.type=U.dtype,k.size=4,k.buffer=U,k.normalized=
!1,k.offset=0,k.stride=0;h=ea.location;k=ka[h];k.buffer||ca.enableVertexAttribArray(h);if(k.type!==u.dtype||4!==k.size||k.buffer!==u||!1!==k.normalized||0!==k.offset||0!==k.stride)ca.bindBuffer(34962,u.buffer),ca.vertexAttribPointer(h,4,u.dtype,!1,0,0),k.type=u.dtype,k.size=4,k.buffer=u,k.normalized=!1,k.offset=0,k.stride=0;h=b.dim0A;ca.uniformMatrix4fv(T.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Kc[0]=h[0],Kc[1]=h[1],Kc[2]=h[2],Kc[3]=h[3],Kc[4]=h[4],Kc[5]=h[5],Kc[6]=h[6],Kc[7]=h[7],
Kc[8]=h[8],Kc[9]=h[9],Kc[10]=h[10],Kc[11]=h[11],Kc[12]=h[12],Kc[13]=h[13],Kc[14]=h[14],Kc[15]=h[15],Kc));h=b.dim1A;ca.uniformMatrix4fv(N.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(pd[0]=h[0],pd[1]=h[1],pd[2]=h[2],pd[3]=h[3],pd[4]=h[4],pd[5]=h[5],pd[6]=h[6],pd[7]=h[7],pd[8]=h[8],pd[9]=h[9],pd[10]=h[10],pd[11]=h[11],pd[12]=h[12],pd[13]=h[13],pd[14]=h[14],pd[15]=h[15],pd));h=b.dim0B;ca.uniformMatrix4fv(z.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ec[0]=h[0],Ec[1]=h[1],
Ec[2]=h[2],Ec[3]=h[3],Ec[4]=h[4],Ec[5]=h[5],Ec[6]=h[6],Ec[7]=h[7],Ec[8]=h[8],Ec[9]=h[9],Ec[10]=h[10],Ec[11]=h[11],Ec[12]=h[12],Ec[13]=h[13],Ec[14]=h[14],Ec[15]=h[15],Ec));h=b.dim1B;ca.uniformMatrix4fv(wa.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(ed[0]=h[0],ed[1]=h[1],ed[2]=h[2],ed[3]=h[3],ed[4]=h[4],ed[5]=h[5],ed[6]=h[6],ed[7]=h[7],ed[8]=h[8],ed[9]=h[9],ed[10]=h[10],ed[11]=h[11],ed[12]=h[12],ed[13]=h[13],ed[14]=h[14],ed[15]=h[15],ed));h=b.dim0C;ca.uniformMatrix4fv(l.location,!1,Array.isArray(h)||
h instanceof Float32Array?h:(Oc[0]=h[0],Oc[1]=h[1],Oc[2]=h[2],Oc[3]=h[3],Oc[4]=h[4],Oc[5]=h[5],Oc[6]=h[6],Oc[7]=h[7],Oc[8]=h[8],Oc[9]=h[9],Oc[10]=h[10],Oc[11]=h[11],Oc[12]=h[12],Oc[13]=h[13],Oc[14]=h[14],Oc[15]=h[15],Oc));h=b.dim1C;ca.uniformMatrix4fv(na.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(ld[0]=h[0],ld[1]=h[1],ld[2]=h[2],ld[3]=h[3],ld[4]=h[4],ld[5]=h[5],ld[6]=h[6],ld[7]=h[7],ld[8]=h[8],ld[9]=h[9],ld[10]=h[10],ld[11]=h[11],ld[12]=h[12],ld[13]=h[13],ld[14]=h[14],ld[15]=h[15],
ld));h=b.dim0D;ca.uniformMatrix4fv(O.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ab[0]=h[0],Ab[1]=h[1],Ab[2]=h[2],Ab[3]=h[3],Ab[4]=h[4],Ab[5]=h[5],Ab[6]=h[6],Ab[7]=h[7],Ab[8]=h[8],Ab[9]=h[9],Ab[10]=h[10],Ab[11]=h[11],Ab[12]=h[12],Ab[13]=h[13],Ab[14]=h[14],Ab[15]=h[15],Ab));h=b.dim1D;ca.uniformMatrix4fv(n.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Eb[0]=h[0],Eb[1]=h[1],Eb[2]=h[2],Eb[3]=h[3],Eb[4]=h[4],Eb[5]=h[5],Eb[6]=h[6],Eb[7]=h[7],Eb[8]=h[8],Eb[9]=h[9],Eb[10]=h[10],
Eb[11]=h[11],Eb[12]=h[12],Eb[13]=h[13],Eb[14]=h[14],Eb[15]=h[15],Eb));h=b.loA;ca.uniformMatrix4fv(Ca.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(tc[0]=h[0],tc[1]=h[1],tc[2]=h[2],tc[3]=h[3],tc[4]=h[4],tc[5]=h[5],tc[6]=h[6],tc[7]=h[7],tc[8]=h[8],tc[9]=h[9],tc[10]=h[10],tc[11]=h[11],tc[12]=h[12],tc[13]=h[13],tc[14]=h[14],tc[15]=h[15],tc));h=b.hiA;ca.uniformMatrix4fv(ba.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(wb[0]=h[0],wb[1]=h[1],wb[2]=h[2],wb[3]=h[3],wb[4]=h[4],wb[5]=
h[5],wb[6]=h[6],wb[7]=h[7],wb[8]=h[8],wb[9]=h[9],wb[10]=h[10],wb[11]=h[11],wb[12]=h[12],wb[13]=h[13],wb[14]=h[14],wb[15]=h[15],wb));h=b.loB;ca.uniformMatrix4fv(Ba.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(wc[0]=h[0],wc[1]=h[1],wc[2]=h[2],wc[3]=h[3],wc[4]=h[4],wc[5]=h[5],wc[6]=h[6],wc[7]=h[7],wc[8]=h[8],wc[9]=h[9],wc[10]=h[10],wc[11]=h[11],wc[12]=h[12],wc[13]=h[13],wc[14]=h[14],wc[15]=h[15],wc));h=b.hiB;ca.uniformMatrix4fv(S.location,!1,Array.isArray(h)||h instanceof Float32Array?
h:(Bb[0]=h[0],Bb[1]=h[1],Bb[2]=h[2],Bb[3]=h[3],Bb[4]=h[4],Bb[5]=h[5],Bb[6]=h[6],Bb[7]=h[7],Bb[8]=h[8],Bb[9]=h[9],Bb[10]=h[10],Bb[11]=h[11],Bb[12]=h[12],Bb[13]=h[13],Bb[14]=h[14],Bb[15]=h[15],Bb));h=b.loC;ca.uniformMatrix4fv(fa.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ic[0]=h[0],Ic[1]=h[1],Ic[2]=h[2],Ic[3]=h[3],Ic[4]=h[4],Ic[5]=h[5],Ic[6]=h[6],Ic[7]=h[7],Ic[8]=h[8],Ic[9]=h[9],Ic[10]=h[10],Ic[11]=h[11],Ic[12]=h[12],Ic[13]=h[13],Ic[14]=h[14],Ic[15]=h[15],Ic));h=b.hiC;ca.uniformMatrix4fv(la.location,
!1,Array.isArray(h)||h instanceof Float32Array?h:(lc[0]=h[0],lc[1]=h[1],lc[2]=h[2],lc[3]=h[3],lc[4]=h[4],lc[5]=h[5],lc[6]=h[6],lc[7]=h[7],lc[8]=h[8],lc[9]=h[9],lc[10]=h[10],lc[11]=h[11],lc[12]=h[12],lc[13]=h[13],lc[14]=h[14],lc[15]=h[15],lc));h=b.loD;ca.uniformMatrix4fv(Ea.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Fc[0]=h[0],Fc[1]=h[1],Fc[2]=h[2],Fc[3]=h[3],Fc[4]=h[4],Fc[5]=h[5],Fc[6]=h[6],Fc[7]=h[7],Fc[8]=h[8],Fc[9]=h[9],Fc[10]=h[10],Fc[11]=h[11],Fc[12]=h[12],Fc[13]=h[13],Fc[14]=
h[14],Fc[15]=h[15],Fc));h=b.hiD;ca.uniformMatrix4fv(pa.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Wc[0]=h[0],Wc[1]=h[1],Wc[2]=h[2],Wc[3]=h[3],Wc[4]=h[4],Wc[5]=h[5],Wc[6]=h[6],Wc[7]=h[7],Wc[8]=h[8],Wc[9]=h[9],Wc[10]=h[10],Wc[11]=h[11],Wc[12]=h[12],Wc[13]=h[13],Wc[14]=h[14],Wc[15]=h[15],Wc));h=b.resolution;ca.uniform2f(ra.location,h[0],h[1]);h=b.viewBoxPos;ca.uniform2f(za.location,h[0],h[1]);h=b.viewBoxSize;ca.uniform2f(Da.location,h[0],h[1]);ca.uniform1f(ja.location,b.maskHeight);ca.uniform1f(G.location,
b.drwLayer);h=b.contextColor;ca.uniform4f(R.location,h[0],h[1],h[2],h[3]);(h=b.maskTexture)&&"framebuffer"===h._reglType&&(h=h.color[0]);h=h._texture;ca.uniform1i(oa.location,h.bind());ca.uniform1i(Ga.location,Q.bind());(k=Ja.elements)?ca.bindBuffer(34963,k.buffer.buffer):$b.currentVAO&&(k=Fa.getElements($b.currentVAO.elements))&&ca.bindBuffer(34963,k.buffer.buffer);a=b.offset;if(b=b.count)k?ca.drawElements(1,b,k.type,a<<(k.type-5121>>1)):ca.drawArrays(1,a,b),ta.dirty=!0,$b.setVAO(null),Z.viewportWidth=
d,Z.viewportHeight=r,ta.profile=c,h.unbind(),Q.unbind()},scope:function(l,n,p){var v,a,H,I,ma,sa,Ma,Ga,G,T,S,cc,z,fa,ra,ha,R,ka,N,ua,O,ba,za,Da,ca,F,wa,pa,Q,Ba,X,ja,Y,Ta,ea,ya,va,oa,Ea,na,la,Gb,Ca,dd,Fa,gb,hd,$a,ec,Eb,Oc,Ab,fc,oc,wb,Bb,be,Be,mc,$b,$d,pc,cb,ab,Va,V,Gc,Re,ld,lc,nb,Ec,te,ed,Fd,Kc,tc,xb,wc,oe,pd,Fc,Cc,Ic,Ud,md,Wd,Mb,Cd,Hc,Ze,Vc,Qf,Wc,ge,se,ze,rd,xe,ia,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,Aa,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,
Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=l.viewportHeight;$c.width=l.viewportWidth;$c.x=l.viewportX;$c.y=l.viewportY;
v=$c.x|0;a=$c.y|0;H="width"in $c?$c.width|0:Z.framebufferWidth-v;I="height"in $c?$c.height|0:Z.framebufferHeight-a;ma=Z.viewportWidth;Z.viewportWidth=H;sa=Z.viewportHeight;Z.viewportHeight=I;Ma=Ld[0];Ld[0]=v;Ga=Ld[1];Ld[1]=a;G=Ld[2];Ld[2]=H;T=Ld[3];Ld[3]=I;S=Rb[0];Rb[0]=0;cc=Rb[1];Rb[1]=0;z=Rb[2];Rb[2]=0;fa=Rb[3];Rb[3]=0;ra=zd.blend_enable;zd.blend_enable=!1;ha=Bd[0];Bd[0]=32774;R=Bd[1];Bd[1]=32774;ka=Vd[0];Vd[0]=770;N=Vd[1];Vd[1]=771;ua=Vd[2];Vd[2]=1;O=Vd[3];Vd[3]=1;ba=zd.cull_enable;zd.cull_enable=
!0;za=zd.cull_face;zd.cull_face=1029;Da=zd.depth_enable;zd.depth_enable=!0;ca=zd.depth_func;zd.depth_func=513;F=zd.depth_mask;zd.depth_mask=!0;wa=ne[0];ne[0]=0;pa=ne[1];ne[1]=1;Q=zd.dither;zd.dither=!1;Ba=zd.lineWidth;zd.lineWidth=2;sd.height=l.scissorHeight;sd.width=l.scissorWidth;sd.x=l.scissorX;sd.y=l.scissorY;X=sd.x|0;ja=sd.y|0;Y="width"in sd?sd.width|0:Z.framebufferWidth-X;Ta="height"in sd?sd.height|0:Z.framebufferHeight-ja;ea=De[0];De[0]=X;ya=De[1];De[1]=ja;va=De[2];De[2]=Y;oa=De[3];De[3]=Ta;
Ea=zd.scissor_enable;zd.scissor_enable=!0;na=ta.profile;ta.profile=!1;la=l.offset;Gb=Ja.offset;Ja.offset=la;Ca=l.count;dd=Ja.count;Ja.count=Ca;Fa=Ja.primitive;Ja.primitive=1;gb=l.contextColor;hd=Ha[24];Ha[24]=gb;$a=l.dim0A;ec=Ha[3];Ha[3]=$a;Eb=l.dim0B;Oc=Ha[5];Ha[5]=Eb;Ab=l.dim0C;fc=Ha[7];Ha[7]=Ab;oc=l.dim0D;wb=Ha[9];Ha[9]=oc;Bb=l.dim1A;be=Ha[4];Ha[4]=Bb;Be=l.dim1B;mc=Ha[6];Ha[6]=Be;$b=l.dim1C;$d=Ha[8];Ha[8]=$b;pc=l.dim1D;cb=Ha[10];Ha[10]=pc;ab=l.drwLayer;Va=Ha[23];Ha[23]=ab;V=l.hiA;Gc=Ha[12];Ha[12]=
V;Re=l.hiB;ld=Ha[14];Ha[14]=Re;lc=l.hiC;nb=Ha[16];Ha[16]=lc;Ec=l.hiD;te=Ha[18];Ha[18]=Ec;ed=l.loA;Fd=Ha[11];Ha[11]=ed;Kc=l.loB;tc=Ha[13];Ha[13]=Kc;xb=l.loC;wc=Ha[15];Ha[15]=xb;oe=l.loD;pd=Ha[17];Ha[17]=oe;Fc=l.maskHeight;Cc=Ha[22];Ha[22]=Fc;Ic=l.maskTexture;Ud=Ha[25];Ha[25]=Ic;md=Ha[26];Ha[26]=ga;Wd=l.resolution;Mb=Ha[19];Ha[19]=Wd;Cd=l.viewBoxPos;Hc=Ha[20];Ha[20]=Cd;Ze=l.viewBoxSize;Vc=Ha[21];Ha[21]=Ze;Qf=c.buffer;c.buffer=u;Wc=c.divisor;c.divisor=0;ge=c.normalized;c.normalized=!1;se=c.offset;c.offset=
0;ze=c.size;c.size=0;rd=c.state;c.state=1;xe=c.stride;c.stride=0;ia=c.type;c.type=u.dtype;Od=c.w;c.w=0;Id=c.x;c.x=0;Gd=c.y;c.y=0;od=c.z;c.z=0;Sc=h.buffer;h.buffer=J;vd=h.divisor;h.divisor=0;td=h.normalized;h.normalized=!1;kd=h.offset;h.offset=0;yd=h.size;h.size=0;Ad=h.state;h.state=1;Ed=h.stride;h.stride=0;Aa=h.type;h.type=J.dtype;je=h.w;h.w=0;Ne=h.x;h.x=0;ke=h.y;h.y=0;ie=h.z;h.z=0;he=M.buffer;M.buffer=g;ue=M.divisor;M.divisor=0;ee=M.normalized;M.normalized=!1;le=M.offset;M.offset=0;Nc=M.size;M.size=
0;gd=M.state;M.state=1;ve=M.stride;M.stride=0;qe=M.type;M.type=g.dtype;Kd=M.w;M.w=0;Pd=M.x;M.x=0;Qd=M.y;M.y=0;Rd=M.z;M.z=0;me=r.buffer;r.buffer=f;Ae=r.divisor;r.divisor=0;Ce=r.normalized;r.normalized=!1;re=r.offset;r.offset=0;Se=r.size;r.size=0;Te=r.state;r.state=1;Oe=r.stride;r.stride=0;we=r.type;r.type=f.dtype;Ge=r.w;r.w=0;Ie=r.x;r.x=0;Je=r.y;r.y=0;Ke=r.z;r.z=0;He=aa.buffer;aa.buffer=q;Md=aa.divisor;aa.divisor=0;Zd=aa.normalized;aa.normalized=!1;ce=aa.offset;aa.offset=0;fe=aa.size;aa.size=0;Le=
aa.state;aa.state=1;Hd=aa.stride;aa.stride=0;Sd=aa.type;aa.type=q.dtype;Ee=aa.w;aa.w=0;Me=aa.x;aa.x=0;bf=aa.y;aa.y=0;af=aa.z;aa.z=0;Ue=k.buffer;k.buffer=e;Pe=k.divisor;k.divisor=0;$e=k.normalized;k.normalized=!1;Ye=k.offset;k.offset=0;Ve=k.size;k.size=0;We=k.state;k.state=1;Td=k.stride;k.stride=0;ae=k.type;k.type=e.dtype;Xe=k.w;k.w=0;hf=k.x;k.x=0;mf=k.y;k.y=0;ef=k.z;k.z=0;jf=w.buffer;w.buffer=x;kf=w.divisor;w.divisor=0;lf=w.normalized;w.normalized=!1;qf=w.offset;w.offset=0;nf=w.size;w.size=0;rf=w.state;
w.state=1;Bf=w.stride;w.stride=0;Cf=w.type;w.type=x.dtype;Qe=w.w;w.w=0;Fe=w.x;w.x=0;of=w.y;w.y=0;pf=w.z;w.z=0;Df=W.buffer;W.buffer=C;Gf=W.divisor;W.divisor=0;Af=W.normalized;W.normalized=!1;Ef=W.offset;W.offset=0;Ff=W.size;W.size=0;wf=W.state;W.state=1;xf=W.stride;W.stride=0;vf=W.type;W.type=C.dtype;yf=W.w;W.w=0;zf=W.x;W.x=0;If=W.y;W.y=0;Jf=W.z;W.z=0;Kf=E.buffer;E.buffer=L;Lf=E.divisor;E.divisor=0;sf=E.normalized;E.normalized=!1;Rf=E.offset;E.offset=0;Hf=E.size;E.size=0;tf=E.state;E.state=1;dg=E.stride;
E.stride=0;Sf=E.type;E.type=L.dtype;Tf=E.w;E.w=0;qg=E.x;E.x=0;ff=E.y;E.y=0;cf=E.z;E.z=0;Mf=D.buffer;D.buffer=K;Nf=D.divisor;D.divisor=0;eg=D.normalized;D.normalized=!1;fg=D.offset;D.offset=0;gg=D.size;D.size=0;hg=D.state;D.state=1;ig=D.stride;D.stride=0;Wf=D.type;D.type=K.dtype;Uf=D.w;D.w=0;Xf=D.x;D.x=0;Yf=D.y;D.y=0;Zf=D.z;D.z=0;jg=d.buffer;d.buffer=A;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=0;xg=d.type;
d.type=A.dtype;yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;gf=P.buffer;P.buffer=m;df=P.divisor;P.divisor=0;Of=P.normalized;P.normalized=!1;Pf=P.offset;P.offset=0;kg=P.size;P.size=0;lg=P.state;P.state=1;mg=P.stride;P.stride=0;ng=P.type;P.type=m.dtype;og=P.w;P.w=0;$f=P.x;P.x=0;Vf=P.y;P.y=0;ag=P.z;P.z=0;bg=b.buffer;b.buffer=t;cg=b.divisor;b.divisor=0;pg=b.normalized;b.normalized=!1;Cg=b.offset;b.offset=0;Dg=b.size;b.size=0;Eg=b.state;b.state=1;Fg=b.stride;b.stride=0;Gg=b.type;b.type=t.dtype;
Hg=b.w;b.w=0;Ig=b.x;b.x=0;Jg=b.y;b.y=0;Kg=b.z;b.z=0;Lg=xa.buffer;xa.buffer=da;Mg=xa.divisor;xa.divisor=0;Ng=xa.normalized;xa.normalized=!1;Og=xa.offset;xa.offset=0;Pg=xa.size;xa.size=0;Qg=xa.state;xa.state=1;Rg=xa.stride;xa.stride=0;Sg=xa.type;xa.type=da.dtype;Tg=xa.w;xa.w=0;Ug=xa.x;xa.x=0;Vg=xa.y;xa.y=0;Wg=xa.z;xa.z=0;Xg=B.buffer;B.buffer=y;Yg=B.divisor;B.divisor=0;Zg=B.normalized;B.normalized=!1;$g=B.offset;B.offset=0;ah=B.size;B.size=0;bh=B.state;B.state=1;ch=B.stride;B.stride=0;dh=B.type;B.type=
y.dtype;eh=B.w;B.w=0;fh=B.x;B.x=0;gh=B.y;B.y=0;hh=B.z;B.z=0;ih=qa.buffer;qa.buffer=U;jh=qa.divisor;qa.divisor=0;kh=qa.normalized;qa.normalized=!1;lh=qa.offset;qa.offset=0;mh=qa.size;qa.size=0;nh=qa.state;qa.state=1;oh=qa.stride;qa.stride=0;ph=qa.type;qa.type=U.dtype;qh=qa.w;qa.w=0;rh=qa.x;qa.x=0;sh=qa.y;qa.y=0;th=qa.z;qa.z=0;uh=Zb.vert;Zb.vert=2;vh=Zb.frag;Zb.frag=1;ta.dirty=!0;n(Z,l,p);Z.viewportWidth=ma;Z.viewportHeight=sa;Ld[0]=Ma;Ld[1]=Ga;Ld[2]=G;Ld[3]=T;Rb[0]=S;Rb[1]=cc;Rb[2]=z;Rb[3]=fa;zd.blend_enable=
ra;Bd[0]=ha;Bd[1]=R;Vd[0]=ka;Vd[1]=N;Vd[2]=ua;Vd[3]=O;zd.cull_enable=ba;zd.cull_face=za;zd.depth_enable=Da;zd.depth_func=ca;zd.depth_mask=F;ne[0]=wa;ne[1]=pa;zd.dither=Q;zd.lineWidth=Ba;De[0]=ea;De[1]=ya;De[2]=va;De[3]=oa;zd.scissor_enable=Ea;ta.profile=na;Ja.offset=Gb;Ja.count=dd;Ja.primitive=Fa;Ha[24]=hd;Ha[3]=ec;Ha[5]=Oc;Ha[7]=fc;Ha[9]=wb;Ha[4]=be;Ha[6]=mc;Ha[8]=$d;Ha[10]=cb;Ha[23]=Va;Ha[12]=Gc;Ha[14]=ld;Ha[16]=nb;Ha[18]=te;Ha[11]=Fd;Ha[13]=tc;Ha[15]=wc;Ha[17]=pd;Ha[22]=Cc;Ha[25]=Ud;Ha[26]=md;
Ha[19]=Mb;Ha[20]=Hc;Ha[21]=Vc;c.buffer=Qf;c.divisor=Wc;c.normalized=ge;c.offset=se;c.size=ze;c.state=rd;c.stride=xe;c.type=ia;c.w=Od;c.x=Id;c.y=Gd;c.z=od;h.buffer=Sc;h.divisor=vd;h.normalized=td;h.offset=kd;h.size=yd;h.state=Ad;h.stride=Ed;h.type=Aa;h.w=je;h.x=Ne;h.y=ke;h.z=ie;M.buffer=he;M.divisor=ue;M.normalized=ee;M.offset=le;M.size=Nc;M.state=gd;M.stride=ve;M.type=qe;M.w=Kd;M.x=Pd;M.y=Qd;M.z=Rd;r.buffer=me;r.divisor=Ae;r.normalized=Ce;r.offset=re;r.size=Se;r.state=Te;r.stride=Oe;r.type=we;r.w=
Ge;r.x=Ie;r.y=Je;r.z=Ke;aa.buffer=He;aa.divisor=Md;aa.normalized=Zd;aa.offset=ce;aa.size=fe;aa.state=Le;aa.stride=Hd;aa.type=Sd;aa.w=Ee;aa.x=Me;aa.y=bf;aa.z=af;k.buffer=Ue;k.divisor=Pe;k.normalized=$e;k.offset=Ye;k.size=Ve;k.state=We;k.stride=Td;k.type=ae;k.w=Xe;k.x=hf;k.y=mf;k.z=ef;w.buffer=jf;w.divisor=kf;w.normalized=lf;w.offset=qf;w.size=nf;w.state=rf;w.stride=Bf;w.type=Cf;w.w=Qe;w.x=Fe;w.y=of;w.z=pf;W.buffer=Df;W.divisor=Gf;W.normalized=Af;W.offset=Ef;W.size=Ff;W.state=wf;W.stride=xf;W.type=
vf;W.w=yf;W.x=zf;W.y=If;W.z=Jf;E.buffer=Kf;E.divisor=Lf;E.normalized=sf;E.offset=Rf;E.size=Hf;E.state=tf;E.stride=dg;E.type=Sf;E.w=Tf;E.x=qg;E.y=ff;E.z=cf;D.buffer=Mf;D.divisor=Nf;D.normalized=eg;D.offset=fg;D.size=gg;D.state=hg;D.stride=ig;D.type=Wf;D.w=Uf;D.x=Xf;D.y=Yf;D.z=Zf;d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;P.buffer=gf;P.divisor=df;P.normalized=Of;P.offset=Pf;P.size=kg;P.state=lg;P.stride=mg;P.type=ng;P.w=
og;P.x=$f;P.y=Vf;P.z=ag;b.buffer=bg;b.divisor=cg;b.normalized=pg;b.offset=Cg;b.size=Dg;b.state=Eg;b.stride=Fg;b.type=Gg;b.w=Hg;b.x=Ig;b.y=Jg;b.z=Kg;xa.buffer=Lg;xa.divisor=Mg;xa.normalized=Ng;xa.offset=Og;xa.size=Pg;xa.state=Qg;xa.stride=Rg;xa.type=Sg;xa.w=Tg;xa.x=Ug;xa.y=Vg;xa.z=Wg;B.buffer=Xg;B.divisor=Yg;B.normalized=Zg;B.offset=$g;B.size=ah;B.state=bh;B.stride=ch;B.type=dh;B.w=eh;B.x=fh;B.y=gh;B.z=hh;qa.buffer=ih;qa.divisor=jh;qa.normalized=kh;qa.offset=lh;qa.size=mh;qa.state=nh;qa.stride=oh;
qa.type=ph;qa.w=qh;qa.x=rh;qa.y=sh;qa.z=th;Zb.vert=uh;Zb.frag=vh;ta.dirty=!0}}},$1:function(a,X){var F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d;F=a.attributes;J=a.current;g=a.framebuffer;f=a.gl;q=a.next;e=a.vao;x=q.blend_color;C=J.blend_color;L=q.blend_equation;K=J.blend_equation;A=q.blend_func;m=J.blend_func;t=q.colorMask;da=J.colorMask;y=q.depth_range;U=J.depth_range;u=q.polygonOffset_offset;Q=J.polygonOffset_offset;ga=q.sample_coverage;c=J.sample_coverage;h=q.scissor_box;M=
J.scissor_box;r=q.stencil_func;aa=J.stencil_func;k=q.stencil_opBack;w=J.stencil_opBack;W=q.stencil_opFront;E=J.stencil_opFront;D=q.viewport;d=J.viewport;return{poll:function(){var e,b,a,B,F,X,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa;J.dirty=!1;b=q.blend_enable;a=q.cull_enable;B=q.depth_enable;F=q.dither;X=q.polygonOffset_enable;Y=q.sample_alpha;ea=q.sample_enable;R=q.scissor_enable;T=q.stencil_enable;z=q.cull_face;l=J.cull_face;O=q.depth_func;N=J.depth_func;wa=q.depth_mask;na=J.depth_mask;n=q.frontFace;
G=J.frontFace;ba=q.lineWidth;S=J.lineWidth;la=q.stencil_mask;pa=J.stencil_mask;e=g.next;e!==g.cur&&(e?f.bindFramebuffer(36160,e.framebuffer):f.bindFramebuffer(36160,null),g.cur=e);b!==J.blend_enable&&(b?f.enable(3042):f.disable(3042),J.blend_enable=b);a!==J.cull_enable&&(a?f.enable(2884):f.disable(2884),J.cull_enable=a);B!==J.depth_enable&&(B?f.enable(2929):f.disable(2929),J.depth_enable=B);F!==J.dither&&(F?f.enable(3024):f.disable(3024),J.dither=F);X!==J.polygonOffset_enable&&(X?f.enable(32823):
f.disable(32823),J.polygonOffset_enable=X);Y!==J.sample_alpha&&(Y?f.enable(32926):f.disable(32926),J.sample_alpha=Y);ea!==J.sample_enable&&(ea?f.enable(32928):f.disable(32928),J.sample_enable=ea);R!==J.scissor_enable&&(R?f.enable(3089):f.disable(3089),J.scissor_enable=R);T!==J.stencil_enable&&(T?f.enable(2960):f.disable(2960),J.stencil_enable=T);if(x[0]!==C[0]||x[1]!==C[1]||x[2]!==C[2]||x[3]!==C[3])f.blendColor(x[0],x[1],x[2],x[3]),C[0]=x[0],C[1]=x[1],C[2]=x[2],C[3]=x[3];if(L[0]!==K[0]||L[1]!==K[1])f.blendEquationSeparate(L[0],
L[1]),K[0]=L[0],K[1]=L[1];if(A[0]!==m[0]||A[1]!==m[1]||A[2]!==m[2]||A[3]!==m[3])f.blendFuncSeparate(A[0],A[1],A[2],A[3]),m[0]=A[0],m[1]=A[1],m[2]=A[2],m[3]=A[3];if(t[0]!==da[0]||t[1]!==da[1]||t[2]!==da[2]||t[3]!==da[3])f.colorMask(t[0],t[1],t[2],t[3]),da[0]=t[0],da[1]=t[1],da[2]=t[2],da[3]=t[3];z!==l&&(f.cullFace(z),J.cull_face=z);O!==N&&(f.depthFunc(O),J.depth_func=O);wa!==na&&(f.depthMask(wa),J.depth_mask=wa);if(y[0]!==U[0]||y[1]!==U[1])f.depthRange(y[0],y[1]),U[0]=y[0],U[1]=y[1];n!==G&&(f.frontFace(n),
J.frontFace=n);ba!==S&&(f.lineWidth(ba),J.lineWidth=ba);if(u[0]!==Q[0]||u[1]!==Q[1])f.polygonOffset(u[0],u[1]),Q[0]=u[0],Q[1]=u[1];if(ga[0]!==c[0]||ga[1]!==c[1])f.sampleCoverage(ga[0],ga[1]),c[0]=ga[0],c[1]=ga[1];if(h[0]!==M[0]||h[1]!==M[1]||h[2]!==M[2]||h[3]!==M[3])f.scissor(h[0],h[1],h[2],h[3]),M[0]=h[0],M[1]=h[1],M[2]=h[2],M[3]=h[3];if(r[0]!==aa[0]||r[1]!==aa[1]||r[2]!==aa[2])f.stencilFunc(r[0],r[1],r[2]),aa[0]=r[0],aa[1]=r[1],aa[2]=r[2];la!==pa&&(f.stencilMask(la),J.stencil_mask=la);if(k[0]!==
w[0]||k[1]!==w[1]||k[2]!==w[2]||k[3]!==w[3])f.stencilOpSeparate(k[0],k[1],k[2],k[3]),w[0]=k[0],w[1]=k[1],w[2]=k[2],w[3]=k[3];if(W[0]!==E[0]||W[1]!==E[1]||W[2]!==E[2]||W[3]!==E[3])f.stencilOpSeparate(W[0],W[1],W[2],W[3]),E[0]=W[0],E[1]=W[1],E[2]=W[2],E[3]=W[3];if(D[0]!==d[0]||D[1]!==d[1]||D[2]!==d[2]||D[3]!==d[3])f.viewport(D[0],D[1],D[2],D[3]),d[0]=D[0],d[1]=D[1],d[2]=D[2],d[3]=D[3]},refresh:function(){var a,b,xa,B,qa,hd,Y,ea,R,T,z,l,O,N,wa,na;J.dirty=!1;b=q.blend_enable;xa=q.cull_enable;B=q.depth_enable;
qa=q.dither;hd=q.polygonOffset_enable;Y=q.sample_alpha;ea=q.sample_enable;R=q.scissor_enable;T=q.stencil_enable;z=q.cull_face;l=q.depth_func;O=q.depth_mask;N=q.frontFace;wa=q.lineWidth;na=q.stencil_mask;(a=g.next)?f.bindFramebuffer(36160,a.framebuffer):f.bindFramebuffer(36160,null);g.cur=a;a=F[0];a.buffer?(f.enableVertexAttribArray(0),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(0,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(0),f.vertexAttrib4f(0,a.x,a.y,
a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(0,a.divisor);a=F[1];a.buffer?(f.enableVertexAttribArray(1),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(1),f.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(1,a.divisor);a=F[2];a.buffer?(f.enableVertexAttribArray(2),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(2),
f.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(2,a.divisor);a=F[3];a.buffer?(f.enableVertexAttribArray(3),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(3),f.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(3,a.divisor);a=F[4];a.buffer?(f.enableVertexAttribArray(4),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,
a.offset)):(f.disableVertexAttribArray(4),f.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(4,a.divisor);a=F[5];a.buffer?(f.enableVertexAttribArray(5),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(5),f.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(5,a.divisor);a=F[6];a.buffer?(f.enableVertexAttribArray(6),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(6,
a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(6),f.vertexAttrib4f(6,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(6,a.divisor);a=F[7];a.buffer?(f.enableVertexAttribArray(7),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(7),f.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(7,a.divisor);a=F[8];a.buffer?(f.enableVertexAttribArray(8),f.bindBuffer(34962,
a.buffer.buffer),f.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(8),f.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(8,a.divisor);a=F[9];a.buffer?(f.enableVertexAttribArray(9),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(9),f.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(9,a.divisor);a=F[10];a.buffer?
(f.enableVertexAttribArray(10),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(10),f.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(10,a.divisor);a=F[11];a.buffer?(f.enableVertexAttribArray(11),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(11),f.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);
X.vertexAttribDivisorANGLE(11,a.divisor);a=F[12];a.buffer?(f.enableVertexAttribArray(12),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(12),f.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(12,a.divisor);a=F[13];a.buffer?(f.enableVertexAttribArray(13),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(13),
f.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(13,a.divisor);a=F[14];a.buffer?(f.enableVertexAttribArray(14),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(f.disableVertexAttribArray(14),f.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(14,a.divisor);a=F[15];a.buffer?(f.enableVertexAttribArray(15),f.bindBuffer(34962,a.buffer.buffer),f.vertexAttribPointer(15,a.size,a.type,a.normalized,
a.stride,a.offset)):(f.disableVertexAttribArray(15),f.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);X.vertexAttribDivisorANGLE(15,a.divisor);e.currentVAO=null;e.setVAO(e.targetVAO);b?f.enable(3042):f.disable(3042);J.blend_enable=b;xa?f.enable(2884):f.disable(2884);J.cull_enable=xa;B?f.enable(2929):f.disable(2929);J.depth_enable=B;qa?f.enable(3024):f.disable(3024);J.dither=qa;hd?f.enable(32823):f.disable(32823);J.polygonOffset_enable=hd;Y?f.enable(32926):f.disable(32926);J.sample_alpha=Y;ea?f.enable(32928):
f.disable(32928);J.sample_enable=ea;R?f.enable(3089):f.disable(3089);J.scissor_enable=R;T?f.enable(2960):f.disable(2960);J.stencil_enable=T;f.blendColor(x[0],x[1],x[2],x[3]);C[0]=x[0];C[1]=x[1];C[2]=x[2];C[3]=x[3];f.blendEquationSeparate(L[0],L[1]);K[0]=L[0];K[1]=L[1];f.blendFuncSeparate(A[0],A[1],A[2],A[3]);m[0]=A[0];m[1]=A[1];m[2]=A[2];m[3]=A[3];f.colorMask(t[0],t[1],t[2],t[3]);da[0]=t[0];da[1]=t[1];da[2]=t[2];da[3]=t[3];f.cullFace(z);J.cull_face=z;f.depthFunc(l);J.depth_func=l;f.depthMask(O);J.depth_mask=
O;f.depthRange(y[0],y[1]);U[0]=y[0];U[1]=y[1];f.frontFace(N);J.frontFace=N;f.lineWidth(wa);J.lineWidth=wa;f.polygonOffset(u[0],u[1]);Q[0]=u[0];Q[1]=u[1];f.sampleCoverage(ga[0],ga[1]);c[0]=ga[0];c[1]=ga[1];f.scissor(h[0],h[1],h[2],h[3]);M[0]=h[0];M[1]=h[1];M[2]=h[2];M[3]=h[3];f.stencilFunc(r[0],r[1],r[2]);aa[0]=r[0];aa[1]=r[1];aa[2]=r[2];f.stencilMask(na);J.stencil_mask=na;f.stencilOpSeparate(k[0],k[1],k[2],k[3]);w[0]=k[0];w[1]=k[1];w[2]=k[2];w[3]=k[3];f.stencilOpSeparate(W[0],W[1],W[2],W[3]);E[0]=
W[0];E[1]=W[1];E[2]=W[2];E[3]=W[3];f.viewport(D[0],D[1],D[2],D[3]);d[0]=D[0];d[1]=D[1];d[2]=D[2];d[3]=D[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,hd,Y,ea,R,T,z,l,O,N,wa,na){var n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,dd,Gb,ha,H,sa,Ga,ra,za,Da,ka,Z,ta,Ja,Fa,gb,ca,zd,Zb,Ha,$b,Rb;n=
a.attributes;G=a.buffer;ba=a.context;S=a.current;la=a.draw;pa=a.elements;Ca=a.extensions;Ba=a.framebuffer;fa=a.gl;Ea=a.isBufferArgs;ja=a.next;oa=a.shader;ya=a.uniforms;Ma=a.vao;ma=ja.blend_color;cc=S.blend_color;Ta=ja.blend_equation;v=S.blend_equation;p=ja.blend_func;I=S.blend_func;ua=ja.colorMask;va=S.colorMask;dd=ja.depth_range;Gb=S.depth_range;ha=ja.polygonOffset_offset;H=S.polygonOffset_offset;sa=ja.sample_coverage;Ga=S.sample_coverage;ra=ja.scissor_box;za=S.scissor_box;Da=ja.stencil_func;ka=
S.stencil_func;Z=ja.stencil_opBack;ta=S.stencil_opBack;Ja=ja.stencil_opFront;Fa=S.stencil_opFront;gb=ja.viewport;ca=S.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Zb={};Zb.buffer=F;Zb.divisor=1;Ha={};Ha.buffer=J;Ha.divisor=1;$b={};$b.buffer=g;$b.divisor=1;Rb={};Rb.buffer=f;Rb.divisor=1;return{batch:function(c,f){var h,e,k,a,p,q;h=Ba.next;h!==Ba.cur&&(h?fa.bindFramebuffer(36160,h.framebuffer):fa.bindFramebuffer(36160,null),Ba.cur=h);if(S.dirty){var r,
ma,g,y,ra,J,M,u,C,x,F,t,Q,L,U,Ta,aa,ga,ya,oa,da,gb,V,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc;r=ja.dither;r!==S.dither&&(r?fa.enable(3024):fa.disable(3024),S.dither=r);ma=ja.depth_func;ma!==S.depth_func&&(fa.depthFunc(ma),S.depth_func=ma);g=dd[0];y=dd[1];if(g!==Gb[0]||y!==Gb[1])fa.depthRange(g,y),Gb[0]=g,Gb[1]=y;ra=ja.depth_mask;ra!==S.depth_mask&&(fa.depthMask(ra),S.depth_mask=ra);J=ua[0];M=ua[1];u=ua[2];C=ua[3];if(J!==va[0]||M!==va[1]||u!==va[2]||C!==va[3])fa.colorMask(J,M,u,C),va[0]=J,va[1]=M,va[2]=u,va[3]=
C;x=ja.cull_enable;x!==S.cull_enable&&(x?fa.enable(2884):fa.disable(2884),S.cull_enable=x);F=ja.cull_face;F!==S.cull_face&&(fa.cullFace(F),S.cull_face=F);t=ja.frontFace;t!==S.frontFace&&(fa.frontFace(t),S.frontFace=t);Q=ja.lineWidth;Q!==S.lineWidth&&(fa.lineWidth(Q),S.lineWidth=Q);L=ja.polygonOffset_enable;L!==S.polygonOffset_enable&&(L?fa.enable(32823):fa.disable(32823),S.polygonOffset_enable=L);U=ha[0];Ta=ha[1];if(U!==H[0]||Ta!==H[1])fa.polygonOffset(U,Ta),H[0]=U,H[1]=Ta;aa=ja.sample_alpha;aa!==
S.sample_alpha&&(aa?fa.enable(32926):fa.disable(32926),S.sample_alpha=aa);ga=ja.sample_enable;ga!==S.sample_enable&&(ga?fa.enable(32928):fa.disable(32928),S.sample_enable=ga);ya=sa[0];oa=sa[1];if(ya!==Ga[0]||oa!==Ga[1])fa.sampleCoverage(ya,oa),Ga[0]=ya,Ga[1]=oa;da=ja.stencil_enable;da!==S.stencil_enable&&(da?fa.enable(2960):fa.disable(2960),S.stencil_enable=da);gb=ja.stencil_mask;gb!==S.stencil_mask&&(fa.stencilMask(gb),S.stencil_mask=gb);V=Da[0];Ab=Da[1];Eb=Da[2];if(V!==ka[0]||Ab!==ka[1]||Eb!==ka[2])fa.stencilFunc(V,
Ab,Eb),ka[0]=V,ka[1]=Ab,ka[2]=Eb;tc=Ja[0];wb=Ja[1];wc=Ja[2];Bb=Ja[3];if(tc!==Fa[0]||wb!==Fa[1]||wc!==Fa[2]||Bb!==Fa[3])fa.stencilOpSeparate(tc,wb,wc,Bb),Fa[0]=tc,Fa[1]=wb,Fa[2]=wc,Fa[3]=Bb;Ic=Z[0];lc=Z[1];Fc=Z[2];Wc=Z[3];if(Ic!==ta[0]||lc!==ta[1]||Fc!==ta[2]||Wc!==ta[3])fa.stencilOpSeparate(Ic,lc,Fc,Wc),ta[0]=Ic,ta[1]=lc,ta[2]=Fc,ta[3]=Wc}fa.blendColor(0,0,0,0);cc[0]=0;cc[1]=0;cc[2]=0;cc[3]=0;fa.enable(3042);S.blend_enable=!0;fa.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;fa.blendFuncSeparate(770,
771,773,1);I[0]=770;I[1]=771;I[2]=773;I[3]=1;fa.disable(2929);S.depth_enable=!1;fa.enable(3089);S.scissor_enable=!0;if(e=S.profile)k=performance.now(),X.count+=f;fa.useProgram(w.program);a=Ca.angle_instanced_arrays;var Vc,Cc,ec,Gc,oc,pc,mc,fc;Ma.setVAO(null);Vc=qa.location;Cc=n[Vc];Cc.buffer||fa.enableVertexAttribArray(Vc);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==K||!1!==Cc.normalized||0!==Cc.offset||24!==Cc.stride)fa.bindBuffer(34962,K.buffer),fa.vertexAttribPointer(Vc,2,5126,!1,24,0),Cc.type=
5126,Cc.size=2,Cc.buffer=K,Cc.normalized=!1,Cc.offset=0,Cc.stride=24;0!==Cc.divisor&&(a.vertexAttribDivisorANGLE(Vc,0),Cc.divisor=0);ec=Y.location;Gc=n[ec];Gc.buffer||fa.enableVertexAttribArray(ec);if(5126!==Gc.type||2!==Gc.size||Gc.buffer!==A||!1!==Gc.normalized||8!==Gc.offset||24!==Gc.stride)fa.bindBuffer(34962,A.buffer),fa.vertexAttribPointer(ec,2,5126,!1,24,8),Gc.type=5126,Gc.size=2,Gc.buffer=A,Gc.normalized=!1,Gc.offset=8,Gc.stride=24;0!==Gc.divisor&&(a.vertexAttribDivisorANGLE(ec,0),Gc.divisor=
0);oc=b.location;pc=n[oc];pc.buffer||fa.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==m||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=m,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(a.vertexAttribDivisorANGLE(oc,0),pc.divisor=0);(mc=la.elements)?fa.bindBuffer(34963,mc.buffer.buffer):Ma.currentVAO&&(mc=pa.getElements(Ma.currentVAO.elements))&&fa.bindBuffer(34963,
mc.buffer.buffer);fc=la.offset;for(p=0;p<f;++p){q=c[p];var $a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,ia,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,Aa,Nd,Yd,de,Od,Id,Gd,od,Sc;$a=q.viewport;Hc=$a.x|0;xb=$a.y|0;cb="width"in $a?$a.width|0:ba.framebufferWidth-Hc;Mb="height"in
$a?$a.height|0:ba.framebufferHeight-xb;ab=ba.viewportWidth;ba.viewportWidth=cb;nb=ba.viewportHeight;ba.viewportHeight=Mb;fa.viewport(Hc,xb,cb,Mb);ca[0]=Hc;ca[1]=xb;ca[2]=cb;ca[3]=Mb;Va=q.viewport;Tc=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:ba.framebufferWidth-Tc;qc="height"in Va?Va.height|0:ba.framebufferHeight-Hb;fa.scissor(Tc,Hb,Ib,qc);za[0]=Tc;za[1]=Hb;za[2]=Ib;za[3]=qc;Nb=W.call(this,ba,q,p);$b.offset=Nb;jb=!1;Fb=null;Cb=0;vb=!1;Xb=hb=0;Ob=1;pb=0;Ua=5126;ib=ac=yb=Tb=0;Ea($b)?(jb=!0,Fb=G.createStream(34962,
$b),Ua=Fb.dtype):(Fb=G.getBuffer($b))?Ua=Fb.dtype:"constant"in $b?(Ob=2,"number"===typeof $b.constant?(yb=$b.constant,ac=ib=Tb=0):(yb=0<$b.constant.length?$b.constant[0]:0,ac=1<$b.constant.length?$b.constant[1]:0,ib=2<$b.constant.length?$b.constant[2]:0,Tb=3<$b.constant.length?$b.constant[3]:0)):(Fb=Ea($b.buffer)?G.createStream(34962,$b.buffer):G.getBuffer($b.buffer),Ua="type"in $b?zd[$b.type]:Fb.dtype,vb=!!$b.normalized,Xb=$b.size|0,hb=$b.offset|0,pb=$b.stride|0,Cb=$b.divisor|0);ob=T.location;Ia=
n[ob];if(1===Ob){Ia.buffer||fa.enableVertexAttribArray(ob);qb=Xb||2;if(Ia.type!==Ua||Ia.size!==qb||Ia.buffer!==Fb||Ia.normalized!==vb||Ia.offset!==hb||Ia.stride!==pb)fa.bindBuffer(34962,Fb.buffer),fa.vertexAttribPointer(ob,qb,Ua,vb,pb,hb),Ia.type=Ua,Ia.size=qb,Ia.buffer=Fb,Ia.normalized=vb,Ia.offset=hb,Ia.stride=pb;Ia.divisor!==Cb&&(a.vertexAttribDivisorANGLE(ob,Cb),Ia.divisor=Cb)}else if(Ia.buffer&&(fa.disableVertexAttribArray(ob),Ia.buffer=null),Ia.x!==yb||Ia.y!==ac||Ia.z!==ib||Ia.w!==Tb)fa.vertexAttrib4f(ob,
yb,ac,ib,Tb),Ia.x=yb,Ia.y=ac,Ia.z=ib,Ia.w=Tb;Ka=E.call(this,ba,q,p);Rb.offset=Ka;eb=!1;fb=null;La=0;kb=!1;sb=Wa=0;rb=1;Pa=0;Bc=5126;Na=Db=Jb=Ra=0;Ea(Rb)?(eb=!0,fb=G.createStream(34962,Rb),Bc=fb.dtype):(fb=G.getBuffer(Rb))?Bc=fb.dtype:"constant"in Rb?(rb=2,"number"===typeof Rb.constant?(Jb=Rb.constant,Db=Na=Ra=0):(Jb=0<Rb.constant.length?Rb.constant[0]:0,Db=1<Rb.constant.length?Rb.constant[1]:0,Na=2<Rb.constant.length?Rb.constant[2]:0,Ra=3<Rb.constant.length?Rb.constant[3]:0)):(fb=Ea(Rb.buffer)?G.createStream(34962,
Rb.buffer):G.getBuffer(Rb.buffer),Bc="type"in Rb?zd[Rb.type]:fb.dtype,kb=!!Rb.normalized,sb=Rb.size|0,Wa=Rb.offset|0,Pa=Rb.stride|0,La=Rb.divisor|0);Jd=z.location;Ya=n[Jd];if(1===rb){Ya.buffer||fa.enableVertexAttribArray(Jd);Kb=sb||2;if(Ya.type!==Bc||Ya.size!==Kb||Ya.buffer!==fb||Ya.normalized!==kb||Ya.offset!==Wa||Ya.stride!==Pa)fa.bindBuffer(34962,fb.buffer),fa.vertexAttribPointer(Jd,Kb,Bc,kb,Pa,Wa),Ya.type=Bc,Ya.size=Kb,Ya.buffer=fb,Ya.normalized=kb,Ya.offset=Wa,Ya.stride=Pa;Ya.divisor!==La&&(a.vertexAttribDivisorANGLE(Jd,
La),Ya.divisor=La)}else if(Ya.buffer&&(fa.disableVertexAttribArray(Jd),Ya.buffer=null),Ya.x!==Jb||Ya.y!==Db||Ya.z!==Na||Ya.w!==Ra)fa.vertexAttrib4f(Jd,Jb,Db,Na,Ra),Ya.x=Jb,Ya.y=Db,Ya.z=Na,Ya.w=Ra;Lb=D.call(this,ba,q,p);Ha.offset=Lb;lb=!1;Oa=null;Yb=0;Qa=!1;ub=tb=0;Sa=1;mb=0;gc=5126;jc=bb=uc=zc=0;Ea(Ha)?(lb=!0,Oa=G.createStream(34962,Ha),gc=Oa.dtype):(Oa=G.getBuffer(Ha))?gc=Oa.dtype:"constant"in Ha?(Sa=2,"number"===typeof Ha.constant?(uc=Ha.constant,bb=jc=zc=0):(uc=0<Ha.constant.length?Ha.constant[0]:
0,bb=1<Ha.constant.length?Ha.constant[1]:0,jc=2<Ha.constant.length?Ha.constant[2]:0,zc=3<Ha.constant.length?Ha.constant[3]:0)):(Oa=Ea(Ha.buffer)?G.createStream(34962,Ha.buffer):G.getBuffer(Ha.buffer),gc="type"in Ha?zd[Ha.type]:Oa.dtype,Qa=!!Ha.normalized,ub=Ha.size|0,tb=Ha.offset|0,mb=Ha.stride|0,Yb=Ha.divisor|0);nd=hd.location;Xa=n[nd];if(1===Sa){Xa.buffer||fa.enableVertexAttribArray(nd);Lc=ub||4;if(Xa.type!==gc||Xa.size!==Lc||Xa.buffer!==Oa||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)fa.bindBuffer(34962,
Oa.buffer),fa.vertexAttribPointer(nd,Lc,gc,Qa,mb,tb),Xa.type=gc,Xa.size=Lc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Yb&&(a.vertexAttribDivisorANGLE(nd,Yb),Xa.divisor=Yb)}else if(Xa.buffer&&(fa.disableVertexAttribArray(nd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)fa.vertexAttrib4f(nd,uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;zb=d.call(this,ba,q,p);Zb.offset=zb;Za=!1;Ub=null;sc=0;Vb=!1;Jc=Pb=0;Qb=1;ia=0;Dc=5126;qd=fd=Mc=ud=0;Ea(Zb)?(Za=!0,Ub=G.createStream(34962,
Zb),Dc=Ub.dtype):(Ub=G.getBuffer(Zb))?Dc=Ub.dtype:"constant"in Zb?(Qb=2,"number"===typeof Zb.constant?(Mc=Zb.constant,fd=qd=ud=0):(Mc=0<Zb.constant.length?Zb.constant[0]:0,fd=1<Zb.constant.length?Zb.constant[1]:0,qd=2<Zb.constant.length?Zb.constant[2]:0,ud=3<Zb.constant.length?Zb.constant[3]:0)):(Ub=Ea(Zb.buffer)?G.createStream(34962,Zb.buffer):G.getBuffer(Zb.buffer),Dc="type"in Zb?zd[Zb.type]:Ub.dtype,Vb=!!Zb.normalized,Jc=Zb.size|0,Pb=Zb.offset|0,ia=Zb.stride|0,sc=Zb.divisor|0);nc=B.location;vc=
n[nc];if(1===Qb){vc.buffer||fa.enableVertexAttribArray(nc);hc=Jc||4;if(vc.type!==Dc||vc.size!==hc||vc.buffer!==Ub||vc.normalized!==Vb||vc.offset!==Pb||vc.stride!==ia)fa.bindBuffer(34962,Ub.buffer),fa.vertexAttribPointer(nc,hc,Dc,Vb,ia,Pb),vc.type=Dc,vc.size=hc,vc.buffer=Ub,vc.normalized=Vb,vc.offset=Pb,vc.stride=ia;vc.divisor!==sc&&(a.vertexAttribDivisorANGLE(nc,sc),vc.divisor=sc)}else if(vc.buffer&&(fa.disableVertexAttribArray(nc),vc.buffer=null),vc.x!==Mc||vc.y!==fd||vc.z!==qd||vc.w!==ud)fa.vertexAttrib4f(nc,
Mc,fd,qd,ud),vc.x=Mc,vc.y=fd,vc.z=qd,vc.w=ud;db=P.call(this,ba,q,p);rc=db[0];Wb=db[1];ic=db[2];Ac=db[3];p&&Sb===rc&&dc===Wb&&xc===ic&&ad===Ac||(Sb=rc,dc=Wb,xc=ic,ad=Ac,fa.uniform4f(na.location,rc,Wb,ic,Ac));Pc=q.lineWidth;p&&Qc===Pc||(Qc=Pc,fa.uniform1f(ea.location,Pc));Rc=q.capSize;p&&Xc===Rc||(Xc=Rc,fa.uniform1f(xa.location,Rc));wd=q.scale;bd=wd[0];kc=wd[1];p&&Yc===bd&&bc===kc||(Yc=bd,bc=kc,fa.uniform2f(l.location,bd,kc));Zc=q.scaleFract;Uc=Zc[0];yc=Zc[1];p&&cd===Uc&&id===yc||(cd=Uc,id=yc,fa.uniform2f(O.location,
Uc,yc));Dd=q.translate;ye=Dd[0];jd=Dd[1];p&&xd===ye&&Aa===jd||(xd=ye,Aa=jd,fa.uniform2f(N.location,ye,jd));Nd=q.translateFract;Yd=Nd[0];Od=Nd[1];p&&de===Yd&&Id===Od||(de=Yd,Id=Od,fa.uniform2f(wa.location,Yd,Od));Gd=q.opacity;p&&od===Gd||(od=Gd,fa.uniform1f(R.location,Gd));Sc=q.count;0<Sc?mc?a.drawElementsInstancedANGLE(4,36,mc.type,fc<<(mc.type-5121>>1),Sc):a.drawArraysInstancedANGLE(4,fc,36,Sc):0>Sc&&(mc?fa.drawElements(4,36,mc.type,fc<<(mc.type-5121>>1)):fa.drawArrays(4,fc,36));ba.viewportWidth=
ab;ba.viewportHeight=nb;jb&&G.destroyStream(Fb);eb&&G.destroyStream(fb);lb&&G.destroyStream(Oa);Za&&G.destroyStream(Ub)}S.dirty=!0;Ma.setVAO(null);e&&(X.cpuTime+=performance.now()-k)},draw:function(d){var c,f,h,k,a,p,r,ma,g,w,y,ra,E,J,D,M,u,F,P,Q,U,Ta,aa,ga,ya,oa,da,W,gb,V,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb;c=Ba.next;c!==Ba.cur&&(c?
fa.bindFramebuffer(36160,c.framebuffer):fa.bindFramebuffer(36160,null),Ba.cur=c);if(S.dirty){var Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,ia,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb;Qa=ja.dither;Qa!==S.dither&&(Qa?fa.enable(3024):fa.disable(3024),S.dither=Qa);tb=ja.depth_func;tb!==S.depth_func&&(fa.depthFunc(tb),S.depth_func=tb);ub=dd[0];Sa=dd[1];if(ub!==Gb[0]||Sa!==Gb[1])fa.depthRange(ub,Sa),Gb[0]=ub,Gb[1]=Sa;mb=ja.depth_mask;mb!==S.depth_mask&&(fa.depthMask(mb),S.depth_mask=mb);gc=
ua[0];zc=ua[1];uc=ua[2];bb=ua[3];if(gc!==va[0]||zc!==va[1]||uc!==va[2]||bb!==va[3])fa.colorMask(gc,zc,uc,bb),va[0]=gc,va[1]=zc,va[2]=uc,va[3]=bb;jc=ja.cull_enable;jc!==S.cull_enable&&(jc?fa.enable(2884):fa.disable(2884),S.cull_enable=jc);ia=ja.cull_face;ia!==S.cull_face&&(fa.cullFace(ia),S.cull_face=ia);Xa=ja.frontFace;Xa!==S.frontFace&&(fa.frontFace(Xa),S.frontFace=Xa);Lc=ja.lineWidth;Lc!==S.lineWidth&&(fa.lineWidth(Lc),S.lineWidth=Lc);zb=ja.polygonOffset_enable;zb!==S.polygonOffset_enable&&(zb?
fa.enable(32823):fa.disable(32823),S.polygonOffset_enable=zb);Za=ha[0];Ub=ha[1];if(Za!==H[0]||Ub!==H[1])fa.polygonOffset(Za,Ub),H[0]=Za,H[1]=Ub;sc=ja.sample_alpha;sc!==S.sample_alpha&&(sc?fa.enable(32926):fa.disable(32926),S.sample_alpha=sc);Vb=ja.sample_enable;Vb!==S.sample_enable&&(Vb?fa.enable(32928):fa.disable(32928),S.sample_enable=Vb);Pb=sa[0];Jc=sa[1];if(Pb!==Ga[0]||Jc!==Ga[1])fa.sampleCoverage(Pb,Jc),Ga[0]=Pb,Ga[1]=Jc;Qb=ja.stencil_enable;Qb!==S.stencil_enable&&(Qb?fa.enable(2960):fa.disable(2960),
S.stencil_enable=Qb);Xd=ja.stencil_mask;Xd!==S.stencil_mask&&(fa.stencilMask(Xd),S.stencil_mask=Xd);Dc=Da[0];ud=Da[1];Mc=Da[2];if(Dc!==ka[0]||ud!==ka[1]||Mc!==ka[2])fa.stencilFunc(Dc,ud,Mc),ka[0]=Dc,ka[1]=ud,ka[2]=Mc;fd=Ja[0];qd=Ja[1];nc=Ja[2];vc=Ja[3];if(fd!==Fa[0]||qd!==Fa[1]||nc!==Fa[2]||vc!==Fa[3])fa.stencilOpSeparate(fd,qd,nc,vc),Fa[0]=fd,Fa[1]=qd,Fa[2]=nc,Fa[3]=vc;hc=Z[0];db=Z[1];rc=Z[2];Sb=Z[3];if(hc!==ta[0]||db!==ta[1]||rc!==ta[2]||Sb!==ta[3])fa.stencilOpSeparate(hc,db,rc,Sb),ta[0]=hc,ta[1]=
db,ta[2]=rc,ta[3]=Sb}f=d.viewport;h=f.x|0;k=f.y|0;a="width"in f?f.width|0:ba.framebufferWidth-h;p="height"in f?f.height|0:ba.framebufferHeight-k;r=ba.viewportWidth;ba.viewportWidth=a;ma=ba.viewportHeight;ba.viewportHeight=p;fa.viewport(h,k,a,p);ca[0]=h;ca[1]=k;ca[2]=a;ca[3]=p;fa.blendColor(0,0,0,0);cc[0]=0;cc[1]=0;cc[2]=0;cc[3]=0;fa.enable(3042);S.blend_enable=!0;fa.blendEquationSeparate(32774,32774);v[0]=32774;v[1]=32774;fa.blendFuncSeparate(770,771,773,1);I[0]=770;I[1]=771;I[2]=773;I[3]=1;fa.disable(2929);
S.depth_enable=!1;g=d.viewport;w=g.x|0;y=g.y|0;ra="width"in g?g.width|0:ba.framebufferWidth-w;E="height"in g?g.height|0:ba.framebufferHeight-y;fa.scissor(w,y,ra,E);za[0]=w;za[1]=y;za[2]=ra;za[3]=E;fa.enable(3089);S.scissor_enable=!0;if(J=S.profile)D=performance.now(),X.count++;fa.useProgram(q.program);M=Ca.angle_instanced_arrays;Ma.setVAO(null);u=e.call(this,ba,d,0);$b.offset=u;F=!1;P=null;Q=0;U=!1;aa=Ta=0;ga=1;ya=0;oa=5126;V=gb=W=da=0;Ea($b)?(F=!0,P=G.createStream(34962,$b),oa=P.dtype):(P=G.getBuffer($b))?
oa=P.dtype:"constant"in $b?(ga=2,"number"===typeof $b.constant?(W=$b.constant,gb=V=da=0):(W=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,V=2<$b.constant.length?$b.constant[2]:0,da=3<$b.constant.length?$b.constant[3]:0)):(P=Ea($b.buffer)?G.createStream(34962,$b.buffer):G.getBuffer($b.buffer),oa="type"in $b?zd[$b.type]:P.dtype,U=!!$b.normalized,aa=$b.size|0,Ta=$b.offset|0,ya=$b.stride|0,Q=$b.divisor|0);Ab=T.location;Eb=n[Ab];if(1===ga){Eb.buffer||fa.enableVertexAttribArray(Ab);
tc=aa||2;if(Eb.type!==oa||Eb.size!==tc||Eb.buffer!==P||Eb.normalized!==U||Eb.offset!==Ta||Eb.stride!==ya)fa.bindBuffer(34962,P.buffer),fa.vertexAttribPointer(Ab,tc,oa,U,ya,Ta),Eb.type=oa,Eb.size=tc,Eb.buffer=P,Eb.normalized=U,Eb.offset=Ta,Eb.stride=ya;Eb.divisor!==Q&&(M.vertexAttribDivisorANGLE(Ab,Q),Eb.divisor=Q)}else if(Eb.buffer&&(fa.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==W||Eb.y!==gb||Eb.z!==V||Eb.w!==da)fa.vertexAttrib4f(Ab,W,gb,V,da),Eb.x=W,Eb.y=gb,Eb.z=V,Eb.w=da;wb=x.call(this,
ba,d,0);Rb.offset=wb;wc=!1;Bb=null;Ic=0;lc=!1;Wc=Fc=0;Vc=1;Cc=0;ec=5126;mc=pc=oc=Gc=0;Ea(Rb)?(wc=!0,Bb=G.createStream(34962,Rb),ec=Bb.dtype):(Bb=G.getBuffer(Rb))?ec=Bb.dtype:"constant"in Rb?(Vc=2,"number"===typeof Rb.constant?(oc=Rb.constant,pc=mc=Gc=0):(oc=0<Rb.constant.length?Rb.constant[0]:0,pc=1<Rb.constant.length?Rb.constant[1]:0,mc=2<Rb.constant.length?Rb.constant[2]:0,Gc=3<Rb.constant.length?Rb.constant[3]:0)):(Bb=Ea(Rb.buffer)?G.createStream(34962,Rb.buffer):G.getBuffer(Rb.buffer),ec="type"in
Rb?zd[Rb.type]:Bb.dtype,lc=!!Rb.normalized,Wc=Rb.size|0,Fc=Rb.offset|0,Cc=Rb.stride|0,Ic=Rb.divisor|0);fc=z.location;$a=n[fc];if(1===Vc){$a.buffer||fa.enableVertexAttribArray(fc);Hc=Wc||2;if($a.type!==ec||$a.size!==Hc||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Fc||$a.stride!==Cc)fa.bindBuffer(34962,Bb.buffer),fa.vertexAttribPointer(fc,Hc,ec,lc,Cc,Fc),$a.type=ec,$a.size=Hc,$a.buffer=Bb,$a.normalized=lc,$a.offset=Fc,$a.stride=Cc;$a.divisor!==Ic&&(M.vertexAttribDivisorANGLE(fc,Ic),$a.divisor=Ic)}else if($a.buffer&&
(fa.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Gc)fa.vertexAttrib4f(fc,oc,pc,mc,Gc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Gc;xb=C.call(this,ba,d,0);Ha.offset=xb;cb=!1;Mb=null;ab=0;nb=!1;Tc=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=jb=Nb=0;Ea(Ha)?(cb=!0,Mb=G.createStream(34962,Ha),qc=Mb.dtype):(Mb=G.getBuffer(Ha))?qc=Mb.dtype:"constant"in Ha?(Hb=2,"number"===typeof Ha.constant?(jb=Ha.constant,Fb=Cb=Nb=0):(jb=0<Ha.constant.length?Ha.constant[0]:0,Fb=1<Ha.constant.length?Ha.constant[1]:
0,Cb=2<Ha.constant.length?Ha.constant[2]:0,Nb=3<Ha.constant.length?Ha.constant[3]:0)):(Mb=Ea(Ha.buffer)?G.createStream(34962,Ha.buffer):G.getBuffer(Ha.buffer),qc="type"in Ha?zd[Ha.type]:Mb.dtype,nb=!!Ha.normalized,Tc=Ha.size|0,Va=Ha.offset|0,Ib=Ha.stride|0,ab=Ha.divisor|0);vb=hd.location;hb=n[vb];if(1===Hb){hb.buffer||fa.enableVertexAttribArray(vb);Xb=Tc||4;if(hb.type!==qc||hb.size!==Xb||hb.buffer!==Mb||hb.normalized!==nb||hb.offset!==Va||hb.stride!==Ib)fa.bindBuffer(34962,Mb.buffer),fa.vertexAttribPointer(vb,
Xb,qc,nb,Ib,Va),hb.type=qc,hb.size=Xb,hb.buffer=Mb,hb.normalized=nb,hb.offset=Va,hb.stride=Ib;hb.divisor!==ab&&(M.vertexAttribDivisorANGLE(vb,ab),hb.divisor=ab)}else if(hb.buffer&&(fa.disableVertexAttribArray(vb),hb.buffer=null),hb.x!==jb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)fa.vertexAttrib4f(vb,jb,Fb,Cb,Nb),hb.x=jb,hb.y=Fb,hb.z=Cb,hb.w=Nb;Ob=L.call(this,ba,d,0);Zb.offset=Ob;pb=!1;Ua=null;Tb=0;yb=!1;ib=ac=0;ob=1;Ia=0;qb=5126;La=fb=eb=Ka=0;Ea(Zb)?(pb=!0,Ua=G.createStream(34962,Zb),qb=Ua.dtype):(Ua=G.getBuffer(Zb))?
qb=Ua.dtype:"constant"in Zb?(ob=2,"number"===typeof Zb.constant?(eb=Zb.constant,fb=La=Ka=0):(eb=0<Zb.constant.length?Zb.constant[0]:0,fb=1<Zb.constant.length?Zb.constant[1]:0,La=2<Zb.constant.length?Zb.constant[2]:0,Ka=3<Zb.constant.length?Zb.constant[3]:0)):(Ua=Ea(Zb.buffer)?G.createStream(34962,Zb.buffer):G.getBuffer(Zb.buffer),qb="type"in Zb?zd[Zb.type]:Ua.dtype,yb=!!Zb.normalized,ib=Zb.size|0,ac=Zb.offset|0,Ia=Zb.stride|0,Tb=Zb.divisor|0);kb=B.location;Wa=n[kb];if(1===ob){Wa.buffer||fa.enableVertexAttribArray(kb);
sb=ib||4;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Ua||Wa.normalized!==yb||Wa.offset!==ac||Wa.stride!==Ia)fa.bindBuffer(34962,Ua.buffer),fa.vertexAttribPointer(kb,sb,qb,yb,Ia,ac),Wa.type=qb,Wa.size=sb,Wa.buffer=Ua,Wa.normalized=yb,Wa.offset=ac,Wa.stride=Ia;Wa.divisor!==Tb&&(M.vertexAttribDivisorANGLE(kb,Tb),Wa.divisor=Tb)}else if(Wa.buffer&&(fa.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)fa.vertexAttrib4f(kb,eb,fb,La,Ka),Wa.x=eb,Wa.y=fb,Wa.z=La,Wa.w=Ka;
rb=qa.location;Pa=n[rb];Pa.buffer||fa.enableVertexAttribArray(rb);if(5126!==Pa.type||2!==Pa.size||Pa.buffer!==K||!1!==Pa.normalized||0!==Pa.offset||24!==Pa.stride)fa.bindBuffer(34962,K.buffer),fa.vertexAttribPointer(rb,2,5126,!1,24,0),Pa.type=5126,Pa.size=2,Pa.buffer=K,Pa.normalized=!1,Pa.offset=0,Pa.stride=24;0!==Pa.divisor&&(M.vertexAttribDivisorANGLE(rb,0),Pa.divisor=0);Bc=Y.location;Ra=n[Bc];Ra.buffer||fa.enableVertexAttribArray(Bc);if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==A||!1!==Ra.normalized||
8!==Ra.offset||24!==Ra.stride)fa.bindBuffer(34962,A.buffer),fa.vertexAttribPointer(Bc,2,5126,!1,24,8),Ra.type=5126,Ra.size=2,Ra.buffer=A,Ra.normalized=!1,Ra.offset=8,Ra.stride=24;0!==Ra.divisor&&(M.vertexAttribDivisorANGLE(Bc,0),Ra.divisor=0);Jb=b.location;Db=n[Jb];Db.buffer||fa.enableVertexAttribArray(Jb);if(5126!==Db.type||2!==Db.size||Db.buffer!==m||!1!==Db.normalized||16!==Db.offset||24!==Db.stride)fa.bindBuffer(34962,m.buffer),fa.vertexAttribPointer(Jb,2,5126,!1,24,16),Db.type=5126,Db.size=2,
Db.buffer=m,Db.normalized=!1,Db.offset=16,Db.stride=24;0!==Db.divisor&&(M.vertexAttribDivisorANGLE(Jb,0),Db.divisor=0);Na=t.call(this,ba,d,0);fa.uniform4f(na.location,Na[0],Na[1],Na[2],Na[3]);fa.uniform1f(ea.location,d.lineWidth);fa.uniform1f(xa.location,d.capSize);Jd=d.scale;fa.uniform2f(l.location,Jd[0],Jd[1]);Ya=d.scaleFract;fa.uniform2f(O.location,Ya[0],Ya[1]);Kb=d.translate;fa.uniform2f(N.location,Kb[0],Kb[1]);Lb=d.translateFract;fa.uniform2f(wa.location,Lb[0],Lb[1]);fa.uniform1f(R.location,
d.opacity);(lb=la.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ma.currentVAO&&(lb=pa.getElements(Ma.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Oa=la.offset;Yb=d.count;0<Yb?lb?M.drawElementsInstancedANGLE(4,36,lb.type,Oa<<(lb.type-5121>>1),Yb):M.drawArraysInstancedANGLE(4,Oa,36,Yb):0>Yb&&(lb?fa.drawElements(4,36,lb.type,Oa<<(lb.type-5121>>1)):fa.drawArrays(4,Oa,36));S.dirty=!0;Ma.setVAO(null);ba.viewportWidth=r;ba.viewportHeight=ma;J&&(X.cpuTime+=performance.now()-D);F&&G.destroyStream(P);
wc&&G.destroyStream(Bb);cb&&G.destroyStream(Mb);pb&&G.destroyStream(Ua)},scope:function(b,d,f){var e,l,a,n,v,q,H,I,g,B,w,sa,Ma,Ga,T,cc,z,fa,ha,R,E,ka,J,D,N,Z,ua,O,za,C,x,P,F,Da,ca,t,wa,pa,L,Ba,Y,ta,ea,va,W,na,Gb,xa,qa,Ca,dd,Fa,Ja,hd,V,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,
Zc,Uc,cd,yc,id,Dd,ye,xd,jd,Aa,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md;e=b.viewport;l=e.x|0;a=e.y|0;n="width"in e?e.width|0:ba.framebufferWidth-l;v="height"in e?e.height|0:ba.framebufferHeight-a;q=ba.viewportWidth;ba.viewportWidth=n;H=ba.viewportHeight;ba.viewportHeight=v;I=gb[0];gb[0]=l;g=gb[1];gb[1]=a;B=gb[2];gb[2]=n;w=gb[3];gb[3]=v;sa=ma[0];ma[0]=0;Ma=ma[1];ma[1]=0;Ga=ma[2];ma[2]=0;T=ma[3];ma[3]=0;cc=
ja.blend_enable;ja.blend_enable=!0;z=Ta[0];Ta[0]=32774;fa=Ta[1];Ta[1]=32774;ha=p[0];p[0]=770;R=p[1];p[1]=771;E=p[2];p[2]=773;ka=p[3];p[3]=1;J=ja.depth_enable;ja.depth_enable=!1;D=b.viewport;N=D.x|0;Z=D.y|0;ua="width"in D?D.width|0:ba.framebufferWidth-N;O="height"in D?D.height|0:ba.framebufferHeight-Z;za=ra[0];ra[0]=N;C=ra[1];ra[1]=Z;x=ra[2];ra[2]=ua;P=ra[3];ra[3]=O;F=ja.scissor_enable;ja.scissor_enable=!0;if(Da=S.profile)ca=performance.now(),X.count++;t=la.count;la.count=36;wa=b.count;pa=la.instances;
la.instances=wa;L=la.primitive;la.primitive=4;Ba=b.capSize;Y=ya[5];ya[5]=Ba;ta=b.lineWidth;ea=ya[4];ya[4]=ta;va=b.opacity;W=ya[10];ya[10]=va;na=b.range;Gb=ya[18];ya[18]=na;xa=b.scale;qa=ya[6];ya[6]=xa;Ca=b.scaleFract;dd=ya[7];ya[7]=Ca;Fa=b.translate;Ja=ya[8];ya[8]=Fa;hd=b.translateFract;V=ya[9];ya[9]=hd;Hb=da.call(this,ba,b,f);Ib=ya[3];ya[3]=Hb;qc=y.buffer;y.buffer=m;Nb=y.divisor;y.divisor=0;jb=y.normalized;y.normalized=!1;Fb=y.offset;y.offset=16;Cb=y.size;y.size=0;vb=y.state;y.state=1;hb=y.stride;
y.stride=24;Xb=y.type;y.type=5126;Ob=y.w;y.w=0;pb=y.x;y.x=0;Ua=y.y;y.y=0;Tb=y.z;y.z=0;yb=U.call(this,ba,b,f);Zb.offset=yb;ac=!1;ib=null;ob=0;Ia=!1;Ka=qb=0;eb=1;fb=0;La=5126;rb=sb=Wa=kb=0;Ea(Zb)?(ac=!0,ib=G.createStream(34962,Zb),La=ib.dtype):(ib=G.getBuffer(Zb))?La=ib.dtype:"constant"in Zb?(eb=2,"number"===typeof Zb.constant?(Wa=Zb.constant,sb=rb=kb=0):(Wa=0<Zb.constant.length?Zb.constant[0]:0,sb=1<Zb.constant.length?Zb.constant[1]:0,rb=2<Zb.constant.length?Zb.constant[2]:0,kb=3<Zb.constant.length?
Zb.constant[3]:0)):(ib=Ea(Zb.buffer)?G.createStream(34962,Zb.buffer):G.getBuffer(Zb.buffer),La="type"in Zb?zd[Zb.type]:ib.dtype,Ia=!!Zb.normalized,Ka=Zb.size|0,qb=Zb.offset|0,fb=Zb.stride|0,ob=Zb.divisor|0);Pa=u.buffer;u.buffer=ib;Bc=u.divisor;u.divisor=ob;Ra=u.normalized;u.normalized=Ia;Jb=u.offset;u.offset=qb;Db=u.size;u.size=Ka;Na=u.state;u.state=eb;ia=u.stride;u.stride=fb;Ya=u.type;u.type=La;Kb=u.w;u.w=kb;Lb=u.x;u.x=Wa;lb=u.y;u.y=sb;Oa=u.z;u.z=rb;Yb=Q.buffer;Q.buffer=K;Qa=Q.divisor;Q.divisor=
0;tb=Q.normalized;Q.normalized=!1;ub=Q.offset;Q.offset=0;Sa=Q.size;Q.size=0;mb=Q.state;Q.state=1;gc=Q.stride;Q.stride=24;zc=Q.type;Q.type=5126;uc=Q.w;Q.w=0;bb=Q.x;Q.x=0;jc=Q.y;Q.y=0;nd=Q.z;Q.z=0;Xa=ga.call(this,ba,b,f);Ha.offset=Xa;Lc=!1;zb=null;Za=0;Ub=!1;Vb=sc=0;Pb=1;Jc=0;Qb=5126;Mc=ud=Dc=Xd=0;Ea(Ha)?(Lc=!0,zb=G.createStream(34962,Ha),Qb=zb.dtype):(zb=G.getBuffer(Ha))?Qb=zb.dtype:"constant"in Ha?(Pb=2,"number"===typeof Ha.constant?(Dc=Ha.constant,ud=Mc=Xd=0):(Dc=0<Ha.constant.length?Ha.constant[0]:
0,ud=1<Ha.constant.length?Ha.constant[1]:0,Mc=2<Ha.constant.length?Ha.constant[2]:0,Xd=3<Ha.constant.length?Ha.constant[3]:0)):(zb=Ea(Ha.buffer)?G.createStream(34962,Ha.buffer):G.getBuffer(Ha.buffer),Qb="type"in Ha?zd[Ha.type]:zb.dtype,Ub=!!Ha.normalized,Vb=Ha.size|0,sc=Ha.offset|0,Jc=Ha.stride|0,Za=Ha.divisor|0);fd=c.buffer;c.buffer=zb;qd=c.divisor;c.divisor=Za;nc=c.normalized;c.normalized=Ub;vc=c.offset;c.offset=sc;hc=c.size;c.size=Vb;db=c.state;c.state=Pb;rc=c.stride;c.stride=Jc;Sb=c.type;c.type=
Qb;Wb=c.w;c.w=Xd;dc=c.x;c.x=Dc;ic=c.y;c.y=ud;xc=c.z;c.z=Mc;Ac=h.buffer;h.buffer=A;ad=h.divisor;h.divisor=0;Pc=h.normalized;h.normalized=!1;Qc=h.offset;h.offset=8;Rc=h.size;h.size=0;Xc=h.state;h.state=1;wd=h.stride;h.stride=24;bd=h.type;h.type=5126;Yc=h.w;h.w=0;kc=h.x;h.x=0;bc=h.y;h.y=0;Zc=h.z;h.z=0;Uc=M.call(this,ba,b,f);$b.offset=Uc;cd=!1;yc=null;id=0;Dd=!1;xd=ye=0;jd=1;Aa=0;Nd=5126;Id=Od=de=Yd=0;Ea($b)?(cd=!0,yc=G.createStream(34962,$b),Nd=yc.dtype):(yc=G.getBuffer($b))?Nd=yc.dtype:"constant"in
$b?(jd=2,"number"===typeof $b.constant?(de=$b.constant,Od=Id=Yd=0):(de=0<$b.constant.length?$b.constant[0]:0,Od=1<$b.constant.length?$b.constant[1]:0,Id=2<$b.constant.length?$b.constant[2]:0,Yd=3<$b.constant.length?$b.constant[3]:0)):(yc=Ea($b.buffer)?G.createStream(34962,$b.buffer):G.getBuffer($b.buffer),Nd="type"in $b?zd[$b.type]:yc.dtype,Dd=!!$b.normalized,xd=$b.size|0,ye=$b.offset|0,Aa=$b.stride|0,id=$b.divisor|0);Gd=r.buffer;r.buffer=yc;od=r.divisor;r.divisor=id;Sc=r.normalized;r.normalized=
Dd;vd=r.offset;r.offset=ye;td=r.size;r.size=xd;kd=r.state;r.state=jd;yd=r.stride;r.stride=Aa;Ad=r.type;r.type=Nd;Ed=r.w;r.w=Yd;pe=r.x;r.x=de;je=r.y;r.y=Od;Ne=r.z;r.z=Id;ke=aa.call(this,ba,b,f);Rb.offset=ke;ie=!1;he=null;ue=0;ee=!1;Nc=le=0;gd=1;ve=0;qe=5126;Rd=Qd=Pd=Kd=0;Ea(Rb)?(ie=!0,he=G.createStream(34962,Rb),qe=he.dtype):(he=G.getBuffer(Rb))?qe=he.dtype:"constant"in Rb?(gd=2,"number"===typeof Rb.constant?(Pd=Rb.constant,Qd=Rd=Kd=0):(Pd=0<Rb.constant.length?Rb.constant[0]:0,Qd=1<Rb.constant.length?
Rb.constant[1]:0,Rd=2<Rb.constant.length?Rb.constant[2]:0,Kd=3<Rb.constant.length?Rb.constant[3]:0)):(he=Ea(Rb.buffer)?G.createStream(34962,Rb.buffer):G.getBuffer(Rb.buffer),qe="type"in Rb?zd[Rb.type]:he.dtype,ee=!!Rb.normalized,Nc=Rb.size|0,le=Rb.offset|0,ve=Rb.stride|0,ue=Rb.divisor|0);me=k.buffer;k.buffer=he;Ae=k.divisor;k.divisor=ue;Ce=k.normalized;k.normalized=ee;re=k.offset;k.offset=le;Se=k.size;k.size=Nc;Te=k.state;k.state=gd;Oe=k.stride;k.stride=ve;we=k.type;k.type=qe;Ge=k.w;k.w=Kd;Ie=k.x;
k.x=Pd;Je=k.y;k.y=Qd;Ke=k.z;k.z=Rd;He=oa.vert;oa.vert=2;Md=oa.frag;oa.frag=1;S.dirty=!0;d(ba,b,f);ba.viewportWidth=q;ba.viewportHeight=H;gb[0]=I;gb[1]=g;gb[2]=B;gb[3]=w;ma[0]=sa;ma[1]=Ma;ma[2]=Ga;ma[3]=T;ja.blend_enable=cc;Ta[0]=z;Ta[1]=fa;p[0]=ha;p[1]=R;p[2]=E;p[3]=ka;ja.depth_enable=J;ra[0]=za;ra[1]=C;ra[2]=x;ra[3]=P;ja.scissor_enable=F;Da&&(X.cpuTime+=performance.now()-ca);la.count=t;la.instances=pa;la.primitive=L;ya[5]=Y;ya[4]=ea;ya[10]=W;ya[18]=Gb;ya[6]=qa;ya[7]=dd;ya[8]=Ja;ya[9]=V;ya[3]=Ib;
y.buffer=qc;y.divisor=Nb;y.normalized=jb;y.offset=Fb;y.size=Cb;y.state=vb;y.stride=hb;y.type=Xb;y.w=Ob;y.x=pb;y.y=Ua;y.z=Tb;ac&&G.destroyStream(ib);u.buffer=Pa;u.divisor=Bc;u.normalized=Ra;u.offset=Jb;u.size=Db;u.state=Na;u.stride=ia;u.type=Ya;u.w=Kb;u.x=Lb;u.y=lb;u.z=Oa;Q.buffer=Yb;Q.divisor=Qa;Q.normalized=tb;Q.offset=ub;Q.size=Sa;Q.state=mb;Q.stride=gc;Q.type=zc;Q.w=uc;Q.x=bb;Q.y=jc;Q.z=nd;Lc&&G.destroyStream(zb);c.buffer=fd;c.divisor=qd;c.normalized=nc;c.offset=vc;c.size=hc;c.state=db;c.stride=
rc;c.type=Sb;c.w=Wb;c.x=dc;c.y=ic;c.z=xc;h.buffer=Ac;h.divisor=ad;h.normalized=Pc;h.offset=Qc;h.size=Rc;h.state=Xc;h.stride=wd;h.type=bd;h.w=Yc;h.x=kc;h.y=bc;h.z=Zc;cd&&G.destroyStream(yc);r.buffer=Gd;r.divisor=od;r.normalized=Sc;r.offset=vd;r.size=td;r.state=kd;r.stride=yd;r.type=Ad;r.w=Ed;r.x=pe;r.y=je;r.z=Ne;ie&&G.destroyStream(he);k.buffer=me;k.divisor=Ae;k.normalized=Ce;k.offset=re;k.size=Se;k.state=Te;k.stride=Oe;k.type=we;k.w=Ge;k.x=Ie;k.y=Je;k.z=Ke;oa.vert=He;oa.frag=Md;S.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(a,
X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa){var hd,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,dd,Gb,ha,H,sa,Ga,ra,za,Da,ka,Z;hd=a.attributes;Y=a.buffer;ea=a.context;R=a.current;T=a.draw;z=a.elements;l=a.extensions;O=a.framebuffer;N=a.gl;wa=a.isBufferArgs;na=a.next;n=a.shader;G=a.uniforms;ba=a.vao;S=na.blend_color;la=R.blend_color;pa=na.blend_equation;Ca=R.blend_equation;Ba=na.blend_func;fa=R.blend_func;Ea=na.colorMask;ja=R.colorMask;
oa=na.depth_range;ya=R.depth_range;Ma=na.polygonOffset_offset;ma=R.polygonOffset_offset;cc=na.sample_coverage;Ta=R.sample_coverage;v=na.scissor_box;p=R.scissor_box;I=na.stencil_func;ua=R.stencil_func;va=na.stencil_opBack;dd=R.stencil_opBack;Gb=na.stencil_opFront;ha=R.stencil_opFront;H=na.viewport;sa=R.viewport;Ga={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ra={divisor:1,offset:8,stride:8};za={divisor:1,offset:8,stride:8};Da={divisor:1,offset:16,stride:8};
ka={divisor:1,offset:16,stride:8};Z={divisor:1,offset:0,stride:4};return{batch:function(e,a){var n,v,q,H,G,y;n=O.next;n!==O.cur&&(n?N.bindFramebuffer(36160,n.framebuffer):N.bindFramebuffer(36160,null),O.cur=n);if(R.dirty){var S,m,J,A,C,x,F,t,pa,K,L,Ba,da,V,be,De,Ze,Re,Fd,Be,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc;S=na.dither;S!==R.dither&&(S?N.enable(3024):N.disable(3024),R.dither=S);m=na.depth_func;m!==R.depth_func&&(N.depthFunc(m),R.depth_func=m);J=oa[0];A=oa[1];if(J!==ya[0]||A!==ya[1])N.depthRange(J,
A),ya[0]=J,ya[1]=A;C=na.depth_mask;C!==R.depth_mask&&(N.depthMask(C),R.depth_mask=C);x=Ea[0];F=Ea[1];t=Ea[2];pa=Ea[3];if(x!==ja[0]||F!==ja[1]||t!==ja[2]||pa!==ja[3])N.colorMask(x,F,t,pa),ja[0]=x,ja[1]=F,ja[2]=t,ja[3]=pa;K=na.cull_enable;K!==R.cull_enable&&(K?N.enable(2884):N.disable(2884),R.cull_enable=K);L=na.cull_face;L!==R.cull_face&&(N.cullFace(L),R.cull_face=L);Ba=na.frontFace;Ba!==R.frontFace&&(N.frontFace(Ba),R.frontFace=Ba);da=na.lineWidth;da!==R.lineWidth&&(N.lineWidth(da),R.lineWidth=da);
V=na.polygonOffset_enable;V!==R.polygonOffset_enable&&(V?N.enable(32823):N.disable(32823),R.polygonOffset_enable=V);be=Ma[0];De=Ma[1];if(be!==ma[0]||De!==ma[1])N.polygonOffset(be,De),ma[0]=be,ma[1]=De;Ze=na.sample_alpha;Ze!==R.sample_alpha&&(Ze?N.enable(32926):N.disable(32926),R.sample_alpha=Ze);Re=na.sample_enable;Re!==R.sample_enable&&(Re?N.enable(32928):N.disable(32928),R.sample_enable=Re);Fd=cc[0];Be=cc[1];if(Fd!==Ta[0]||Be!==Ta[1])N.sampleCoverage(Fd,Be),Ta[0]=Fd,Ta[1]=Be;te=na.stencil_mask;
te!==R.stencil_mask&&(N.stencilMask(te),R.stencil_mask=te);$d=I[0];Wd=I[1];Ld=I[2];if($d!==ua[0]||Wd!==ua[1]||Ld!==ua[2])N.stencilFunc($d,Wd,Ld),ua[0]=$d,ua[1]=Wd,ua[2]=Ld;md=Gb[0];$c=Gb[1];sd=Gb[2];Kc=Gb[3];if(md!==ha[0]||$c!==ha[1]||sd!==ha[2]||Kc!==ha[3])N.stencilOpSeparate(md,$c,sd,Kc),ha[0]=md,ha[1]=$c,ha[2]=sd,ha[3]=Kc;pd=va[0];Ec=va[1];ed=va[2];Oc=va[3];if(pd!==dd[0]||Ec!==dd[1]||ed!==dd[2]||Oc!==dd[3])N.stencilOpSeparate(pd,Ec,ed,Oc),dd[0]=pd,dd[1]=Ec,dd[2]=ed,dd[3]=Oc}N.blendColor(0,0,0,
0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;N.enable(3042);R.blend_enable=!0;N.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;N.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;N.enable(3089);R.scissor_enable=!0;N.disable(2960);R.stencil_enable=!1;if(v=R.profile)q=performance.now(),X.count+=a;N.useProgram(U.program);H=l.angle_instanced_arrays;var ld,Ab,Eb,tc,wb;ba.setVAO(null);ld=W.location;Ab=hd[ld];Ab.buffer||N.enableVertexAttribArray(ld);if(5126!==Ab.type||1!==Ab.size||
Ab.buffer!==g||!1!==Ab.normalized||0!==Ab.offset||8!==Ab.stride)N.bindBuffer(34962,g.buffer),N.vertexAttribPointer(ld,1,5126,!1,8,0),Ab.type=5126,Ab.size=1,Ab.buffer=g,Ab.normalized=!1,Ab.offset=0,Ab.stride=8;0!==Ab.divisor&&(H.vertexAttribDivisorANGLE(ld,0),Ab.divisor=0);Eb=E.location;tc=hd[Eb];tc.buffer||N.enableVertexAttribArray(Eb);if(5126!==tc.type||1!==tc.size||tc.buffer!==f||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)N.bindBuffer(34962,f.buffer),N.vertexAttribPointer(Eb,1,5126,!1,8,4),
tc.type=5126,tc.size=1,tc.buffer=f,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(H.vertexAttribDivisorANGLE(Eb,0),tc.divisor=0);(wb=T.elements)?N.bindBuffer(34963,wb.buffer.buffer):ba.currentVAO&&(wb=z.getElements(ba.currentVAO.elements))&&N.bindBuffer(34963,wb.buffer.buffer);for(G=0;G<a;++G){y=e[G];var wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,ia,Ya,Kb,Lb,lb,
Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,Aa,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd;wc=y.viewport;Bb=wc.x|0;Ic=wc.y|0;lc="width"in wc?wc.width|0:ea.framebufferWidth-Bb;Fc="height"in wc?wc.height|0:ea.framebufferHeight-Ic;Wc=ea.viewportWidth;ea.viewportWidth=lc;Vc=ea.viewportHeight;ea.viewportHeight=Fc;N.viewport(Bb,Ic,lc,Fc);sa[0]=Bb;sa[1]=Ic;sa[2]=lc;sa[3]=Fc;(Cc=u.call(this,
ea,y,G))?N.enable(2929):N.disable(2929);R.depth_enable=Cc;ec=y.viewport;Gc=ec.x|0;oc=ec.y|0;pc="width"in ec?ec.width|0:ea.framebufferWidth-Gc;mc="height"in ec?ec.height|0:ea.framebufferHeight-oc;N.scissor(Gc,oc,pc,mc);p[0]=Gc;p[1]=oc;p[2]=pc;p[3]=mc;ra.buffer=y.positionBuffer;fc=!1;$a=null;Hc=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=Tc=0;wa(ra)?(fc=!0,$a=Y.createStream(34962,ra),Va=$a.dtype):($a=Y.getBuffer(ra))?Va=$a.dtype:"constant"in ra?(ab=2,"number"===typeof ra.constant?(Hb=ra.constant,Ib=
qc=Tc=0):(Hb=0<ra.constant.length?ra.constant[0]:0,Ib=1<ra.constant.length?ra.constant[1]:0,qc=2<ra.constant.length?ra.constant[2]:0,Tc=3<ra.constant.length?ra.constant[3]:0)):($a=wa(ra.buffer)?Y.createStream(34962,ra.buffer):Y.getBuffer(ra.buffer),Va="type"in ra?Ga[ra.type]:$a.dtype,xb=!!ra.normalized,Mb=ra.size|0,cb=ra.offset|0,nb=ra.stride|0,Hc=ra.divisor|0);Nb=ga.location;jb=hd[Nb];if(1===ab){jb.buffer||N.enableVertexAttribArray(Nb);Fb=Mb||2;if(jb.type!==Va||jb.size!==Fb||jb.buffer!==$a||jb.normalized!==
xb||jb.offset!==cb||jb.stride!==nb)N.bindBuffer(34962,$a.buffer),N.vertexAttribPointer(Nb,Fb,Va,xb,nb,cb),jb.type=Va,jb.size=Fb,jb.buffer=$a,jb.normalized=xb,jb.offset=cb,jb.stride=nb;jb.divisor!==Hc&&(H.vertexAttribDivisorANGLE(Nb,Hc),jb.divisor=Hc)}else if(jb.buffer&&(N.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==Ib||jb.z!==qc||jb.w!==Tc)N.vertexAttrib4f(Nb,Hb,Ib,qc,Tc),jb.x=Hb,jb.y=Ib,jb.z=qc,jb.w=Tc;Da.buffer=y.positionBuffer;Cb=!1;vb=null;hb=0;Xb=!1;pb=Ob=0;Ua=1;Tb=0;yb=5126;
Ia=ob=ib=ac=0;wa(Da)?(Cb=!0,vb=Y.createStream(34962,Da),yb=vb.dtype):(vb=Y.getBuffer(Da))?yb=vb.dtype:"constant"in Da?(Ua=2,"number"===typeof Da.constant?(ib=Da.constant,ob=Ia=ac=0):(ib=0<Da.constant.length?Da.constant[0]:0,ob=1<Da.constant.length?Da.constant[1]:0,Ia=2<Da.constant.length?Da.constant[2]:0,ac=3<Da.constant.length?Da.constant[3]:0)):(vb=wa(Da.buffer)?Y.createStream(34962,Da.buffer):Y.getBuffer(Da.buffer),yb="type"in Da?Ga[Da.type]:vb.dtype,Xb=!!Da.normalized,pb=Da.size|0,Ob=Da.offset|
0,Tb=Da.stride|0,hb=Da.divisor|0);qb=h.location;Ka=hd[qb];if(1===Ua){Ka.buffer||N.enableVertexAttribArray(qb);eb=pb||2;if(Ka.type!==yb||Ka.size!==eb||Ka.buffer!==vb||Ka.normalized!==Xb||Ka.offset!==Ob||Ka.stride!==Tb)N.bindBuffer(34962,vb.buffer),N.vertexAttribPointer(qb,eb,yb,Xb,Tb,Ob),Ka.type=yb,Ka.size=eb,Ka.buffer=vb,Ka.normalized=Xb,Ka.offset=Ob,Ka.stride=Tb;Ka.divisor!==hb&&(H.vertexAttribDivisorANGLE(qb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(N.disableVertexAttribArray(qb),Ka.buffer=null),Ka.x!==
ib||Ka.y!==ob||Ka.z!==Ia||Ka.w!==ac)N.vertexAttrib4f(qb,ib,ob,Ia,ac),Ka.x=ib,Ka.y=ob,Ka.z=Ia,Ka.w=ac;za.buffer=y.positionFractBuffer;fb=!1;La=null;kb=0;Wa=!1;rb=sb=0;Pa=1;Bc=0;Ra=5126;ia=Na=Db=Jb=0;wa(za)?(fb=!0,La=Y.createStream(34962,za),Ra=La.dtype):(La=Y.getBuffer(za))?Ra=La.dtype:"constant"in za?(Pa=2,"number"===typeof za.constant?(Db=za.constant,Na=ia=Jb=0):(Db=0<za.constant.length?za.constant[0]:0,Na=1<za.constant.length?za.constant[1]:0,ia=2<za.constant.length?za.constant[2]:0,Jb=3<za.constant.length?
za.constant[3]:0)):(La=wa(za.buffer)?Y.createStream(34962,za.buffer):Y.getBuffer(za.buffer),Ra="type"in za?Ga[za.type]:La.dtype,Wa=!!za.normalized,rb=za.size|0,sb=za.offset|0,Bc=za.stride|0,kb=za.divisor|0);Ya=c.location;Kb=hd[Ya];if(1===Pa){Kb.buffer||N.enableVertexAttribArray(Ya);Lb=rb||2;if(Kb.type!==Ra||Kb.size!==Lb||Kb.buffer!==La||Kb.normalized!==Wa||Kb.offset!==sb||Kb.stride!==Bc)N.bindBuffer(34962,La.buffer),N.vertexAttribPointer(Ya,Lb,Ra,Wa,Bc,sb),Kb.type=Ra,Kb.size=Lb,Kb.buffer=La,Kb.normalized=
Wa,Kb.offset=sb,Kb.stride=Bc;Kb.divisor!==kb&&(H.vertexAttribDivisorANGLE(Ya,kb),Kb.divisor=kb)}else if(Kb.buffer&&(N.disableVertexAttribArray(Ya),Kb.buffer=null),Kb.x!==Db||Kb.y!==Na||Kb.z!==ia||Kb.w!==Jb)N.vertexAttrib4f(Ya,Db,Na,ia,Jb),Kb.x=Db,Kb.y=Na,Kb.z=ia,Kb.w=Jb;ka.buffer=y.positionFractBuffer;lb=!1;Oa=null;Yb=0;Qa=!1;ub=tb=0;Sa=1;mb=0;gc=5126;jc=bb=uc=zc=0;wa(ka)?(lb=!0,Oa=Y.createStream(34962,ka),gc=Oa.dtype):(Oa=Y.getBuffer(ka))?gc=Oa.dtype:"constant"in ka?(Sa=2,"number"===typeof ka.constant?
(uc=ka.constant,bb=jc=zc=0):(uc=0<ka.constant.length?ka.constant[0]:0,bb=1<ka.constant.length?ka.constant[1]:0,jc=2<ka.constant.length?ka.constant[2]:0,zc=3<ka.constant.length?ka.constant[3]:0)):(Oa=wa(ka.buffer)?Y.createStream(34962,ka.buffer):Y.getBuffer(ka.buffer),gc="type"in ka?Ga[ka.type]:Oa.dtype,Qa=!!ka.normalized,ub=ka.size|0,tb=ka.offset|0,mb=ka.stride|0,Yb=ka.divisor|0);nd=M.location;Xa=hd[nd];if(1===Sa){Xa.buffer||N.enableVertexAttribArray(nd);Lc=ub||2;if(Xa.type!==gc||Xa.size!==Lc||Xa.buffer!==
Oa||Xa.normalized!==Qa||Xa.offset!==tb||Xa.stride!==mb)N.bindBuffer(34962,Oa.buffer),N.vertexAttribPointer(nd,Lc,gc,Qa,mb,tb),Xa.type=gc,Xa.size=Lc,Xa.buffer=Oa,Xa.normalized=Qa,Xa.offset=tb,Xa.stride=mb;Xa.divisor!==Yb&&(H.vertexAttribDivisorANGLE(nd,Yb),Xa.divisor=Yb)}else if(Xa.buffer&&(N.disableVertexAttribArray(nd),Xa.buffer=null),Xa.x!==uc||Xa.y!==bb||Xa.z!==jc||Xa.w!==zc)N.vertexAttrib4f(nd,uc,bb,jc,zc),Xa.x=uc,Xa.y=bb,Xa.z=jc,Xa.w=zc;Z.buffer=y.colorBuffer;zb=!1;Za=null;Ub=0;sc=!1;Pb=Vb=0;
Jc=1;Qb=0;Xd=5126;fd=Mc=ud=Dc=0;wa(Z)?(zb=!0,Za=Y.createStream(34962,Z),Xd=Za.dtype):(Za=Y.getBuffer(Z))?Xd=Za.dtype:"constant"in Z?(Jc=2,"number"===typeof Z.constant?(ud=Z.constant,Mc=fd=Dc=0):(ud=0<Z.constant.length?Z.constant[0]:0,Mc=1<Z.constant.length?Z.constant[1]:0,fd=2<Z.constant.length?Z.constant[2]:0,Dc=3<Z.constant.length?Z.constant[3]:0)):(Za=wa(Z.buffer)?Y.createStream(34962,Z.buffer):Y.getBuffer(Z.buffer),Xd="type"in Z?Ga[Z.type]:Za.dtype,sc=!!Z.normalized,Pb=Z.size|0,Vb=Z.offset|0,
Qb=Z.stride|0,Ub=Z.divisor|0);qd=r.location;nc=hd[qd];if(1===Jc){nc.buffer||N.enableVertexAttribArray(qd);vc=Pb||4;if(nc.type!==Xd||nc.size!==vc||nc.buffer!==Za||nc.normalized!==sc||nc.offset!==Vb||nc.stride!==Qb)N.bindBuffer(34962,Za.buffer),N.vertexAttribPointer(qd,vc,Xd,sc,Qb,Vb),nc.type=Xd,nc.size=vc,nc.buffer=Za,nc.normalized=sc,nc.offset=Vb,nc.stride=Qb;nc.divisor!==Ub&&(H.vertexAttribDivisorANGLE(qd,Ub),nc.divisor=Ub)}else if(nc.buffer&&(N.disableVertexAttribArray(qd),nc.buffer=null),nc.x!==
ud||nc.y!==Mc||nc.z!==fd||nc.w!==Dc)N.vertexAttrib4f(qd,ud,Mc,fd,Dc),nc.x=ud,nc.y=Mc,nc.z=fd,nc.w=Dc;hc=y.scale;db=hc[0];Sb=hc[1];G&&rc===db&&Wb===Sb||(rc=db,Wb=Sb,N.uniform2f(d.location,db,Sb));dc=y.scaleFract;ic=dc[0];Ac=dc[1];G&&xc===ic&&ad===Ac||(xc=ic,ad=Ac,N.uniform2f(P.location,ic,Ac));Pc=y.translate;Qc=Pc[0];Xc=Pc[1];G&&Rc===Qc&&wd===Xc||(Rc=Qc,wd=Xc,N.uniform2f(xa.location,Qc,Xc));bd=y.translateFract;Yc=bd[0];bc=bd[1];G&&kc===Yc&&Zc===bc||(kc=Yc,Zc=bc,N.uniform2f(B.location,Yc,bc));Uc=y.thickness;
G&&cd===Uc||(cd=Uc,N.uniform1f(b.location,Uc));yc=y.depth;G&&id===yc||(id=yc,N.uniform1f(w.location,yc));Dd=Q.call(this,ea,y,G);ye=Dd[0];jd=Dd[1];Nd=Dd[2];de=Dd[3];G&&xd===ye&&Aa===jd&&Yd===Nd&&Od===de||(xd=ye,Aa=jd,Yd=Nd,Od=de,N.uniform4f(qa.location,ye,jd,Nd,de));Id=y.dashLength;G&&Gd===Id||(Gd=Id,N.uniform1f(aa.location,Id));od=y.opacity;G&&Sc===od||(Sc=od,N.uniform1f(D.location,od));(vd=y.dashTexture)&&"framebuffer"===vd._reglType&&(vd=vd.color[0]);td=vd._texture;N.uniform1i(k.location,td.bind());
kd=y.count;0<kd?wb?H.drawElementsInstancedANGLE(5,4,wb.type,0<<(wb.type-5121>>1),kd):H.drawArraysInstancedANGLE(5,0,4,kd):0>kd&&(wb?N.drawElements(5,4,wb.type,0<<(wb.type-5121>>1)):N.drawArrays(5,0,4));ea.viewportWidth=Wc;ea.viewportHeight=Vc;fc&&Y.destroyStream($a);Cb&&Y.destroyStream(vb);fb&&Y.destroyStream(La);lb&&Y.destroyStream(Oa);zb&&Y.destroyStream(Za);td.unbind()}R.dirty=!0;ba.setVAO(null);v&&(X.cpuTime+=performance.now()-q)},draw:function(e){var a,n,v,H,G,y,S,m,A,u,C,x,t,pa,Q,K,L,Ba,U,da,
V,be,De,Ze,Re,Fd,Be,te,$d,Wd,ia,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb;a=O.next;a!==O.cur&&(a?N.bindFramebuffer(36160,a.framebuffer):N.bindFramebuffer(36160,null),O.cur=a);if(R.dirty){var ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb;ub=na.dither;ub!==R.dither&&
(ub?N.enable(3024):N.disable(3024),R.dither=ub);Sa=na.depth_func;Sa!==R.depth_func&&(N.depthFunc(Sa),R.depth_func=Sa);mb=oa[0];gc=oa[1];if(mb!==ya[0]||gc!==ya[1])N.depthRange(mb,gc),ya[0]=mb,ya[1]=gc;zc=na.depth_mask;zc!==R.depth_mask&&(N.depthMask(zc),R.depth_mask=zc);uc=Ea[0];bb=Ea[1];jc=Ea[2];nd=Ea[3];if(uc!==ja[0]||bb!==ja[1]||jc!==ja[2]||nd!==ja[3])N.colorMask(uc,bb,jc,nd),ja[0]=uc,ja[1]=bb,ja[2]=jc,ja[3]=nd;Xa=na.cull_enable;Xa!==R.cull_enable&&(Xa?N.enable(2884):N.disable(2884),R.cull_enable=
Xa);Lc=na.cull_face;Lc!==R.cull_face&&(N.cullFace(Lc),R.cull_face=Lc);zb=na.frontFace;zb!==R.frontFace&&(N.frontFace(zb),R.frontFace=zb);Za=na.lineWidth;Za!==R.lineWidth&&(N.lineWidth(Za),R.lineWidth=Za);Ub=na.polygonOffset_enable;Ub!==R.polygonOffset_enable&&(Ub?N.enable(32823):N.disable(32823),R.polygonOffset_enable=Ub);sc=Ma[0];Vb=Ma[1];if(sc!==ma[0]||Vb!==ma[1])N.polygonOffset(sc,Vb),ma[0]=sc,ma[1]=Vb;Pb=na.sample_alpha;Pb!==R.sample_alpha&&(Pb?N.enable(32926):N.disable(32926),R.sample_alpha=
Pb);Jc=na.sample_enable;Jc!==R.sample_enable&&(Jc?N.enable(32928):N.disable(32928),R.sample_enable=Jc);Qb=cc[0];Xd=cc[1];if(Qb!==Ta[0]||Xd!==Ta[1])N.sampleCoverage(Qb,Xd),Ta[0]=Qb,Ta[1]=Xd;Dc=na.stencil_mask;Dc!==R.stencil_mask&&(N.stencilMask(Dc),R.stencil_mask=Dc);ud=I[0];Mc=I[1];fd=I[2];if(ud!==ua[0]||Mc!==ua[1]||fd!==ua[2])N.stencilFunc(ud,Mc,fd),ua[0]=ud,ua[1]=Mc,ua[2]=fd;qd=Gb[0];nc=Gb[1];vc=Gb[2];hc=Gb[3];if(qd!==ha[0]||nc!==ha[1]||vc!==ha[2]||hc!==ha[3])N.stencilOpSeparate(qd,nc,vc,hc),ha[0]=
qd,ha[1]=nc,ha[2]=vc,ha[3]=hc;db=va[0];rc=va[1];Sb=va[2];Wb=va[3];if(db!==dd[0]||rc!==dd[1]||Sb!==dd[2]||Wb!==dd[3])N.stencilOpSeparate(db,rc,Sb,Wb),dd[0]=db,dd[1]=rc,dd[2]=Sb,dd[3]=Wb}n=e.viewport;v=n.x|0;H=n.y|0;G="width"in n?n.width|0:ea.framebufferWidth-v;y="height"in n?n.height|0:ea.framebufferHeight-H;S=ea.viewportWidth;ea.viewportWidth=G;m=ea.viewportHeight;ea.viewportHeight=y;N.viewport(v,H,G,y);sa[0]=v;sa[1]=H;sa[2]=G;sa[3]=y;N.blendColor(0,0,0,0);la[0]=0;la[1]=0;la[2]=0;la[3]=0;N.enable(3042);
R.blend_enable=!0;N.blendEquationSeparate(32774,32774);Ca[0]=32774;Ca[1]=32774;N.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(A=F.call(this,ea,e,0))?N.enable(2929):N.disable(2929);R.depth_enable=A;u=e.viewport;C=u.x|0;x=u.y|0;t="width"in u?u.width|0:ea.framebufferWidth-C;pa="height"in u?u.height|0:ea.framebufferHeight-x;N.scissor(C,x,t,pa);p[0]=C;p[1]=x;p[2]=t;p[3]=pa;N.enable(3089);R.scissor_enable=!0;N.disable(2960);R.stencil_enable=!1;if(Q=R.profile)K=performance.now(),
X.count++;N.useProgram(J.program);L=l.angle_instanced_arrays;ba.setVAO(null);ra.buffer=e.positionBuffer;Ba=!1;U=null;da=0;V=!1;De=be=0;Ze=1;Re=0;Fd=5126;Wd=$d=te=Be=0;wa(ra)?(Ba=!0,U=Y.createStream(34962,ra),Fd=U.dtype):(U=Y.getBuffer(ra))?Fd=U.dtype:"constant"in ra?(Ze=2,"number"===typeof ra.constant?(te=ra.constant,$d=Wd=Be=0):(te=0<ra.constant.length?ra.constant[0]:0,$d=1<ra.constant.length?ra.constant[1]:0,Wd=2<ra.constant.length?ra.constant[2]:0,Be=3<ra.constant.length?ra.constant[3]:0)):(U=
wa(ra.buffer)?Y.createStream(34962,ra.buffer):Y.getBuffer(ra.buffer),Fd="type"in ra?Ga[ra.type]:U.dtype,V=!!ra.normalized,De=ra.size|0,be=ra.offset|0,Re=ra.stride|0,da=ra.divisor|0);ia=ga.location;md=hd[ia];if(1===Ze){md.buffer||N.enableVertexAttribArray(ia);$c=De||2;if(md.type!==Fd||md.size!==$c||md.buffer!==U||md.normalized!==V||md.offset!==be||md.stride!==Re)N.bindBuffer(34962,U.buffer),N.vertexAttribPointer(ia,$c,Fd,V,Re,be),md.type=Fd,md.size=$c,md.buffer=U,md.normalized=V,md.offset=be,md.stride=
Re;md.divisor!==da&&(L.vertexAttribDivisorANGLE(ia,da),md.divisor=da)}else if(md.buffer&&(N.disableVertexAttribArray(ia),md.buffer=null),md.x!==te||md.y!==$d||md.z!==Wd||md.w!==Be)N.vertexAttrib4f(ia,te,$d,Wd,Be),md.x=te,md.y=$d,md.z=Wd,md.w=Be;Da.buffer=e.positionBuffer;sd=!1;Kc=null;pd=0;Ec=!1;Oc=ed=0;ld=1;Ab=0;Eb=5126;Bb=wc=wb=tc=0;wa(Da)?(sd=!0,Kc=Y.createStream(34962,Da),Eb=Kc.dtype):(Kc=Y.getBuffer(Da))?Eb=Kc.dtype:"constant"in Da?(ld=2,"number"===typeof Da.constant?(wb=Da.constant,wc=Bb=tc=
0):(wb=0<Da.constant.length?Da.constant[0]:0,wc=1<Da.constant.length?Da.constant[1]:0,Bb=2<Da.constant.length?Da.constant[2]:0,tc=3<Da.constant.length?Da.constant[3]:0)):(Kc=wa(Da.buffer)?Y.createStream(34962,Da.buffer):Y.getBuffer(Da.buffer),Eb="type"in Da?Ga[Da.type]:Kc.dtype,Ec=!!Da.normalized,Oc=Da.size|0,ed=Da.offset|0,Ab=Da.stride|0,pd=Da.divisor|0);Ic=h.location;lc=hd[Ic];if(1===ld){lc.buffer||N.enableVertexAttribArray(Ic);Fc=Oc||2;if(lc.type!==Eb||lc.size!==Fc||lc.buffer!==Kc||lc.normalized!==
Ec||lc.offset!==ed||lc.stride!==Ab)N.bindBuffer(34962,Kc.buffer),N.vertexAttribPointer(Ic,Fc,Eb,Ec,Ab,ed),lc.type=Eb,lc.size=Fc,lc.buffer=Kc,lc.normalized=Ec,lc.offset=ed,lc.stride=Ab;lc.divisor!==pd&&(L.vertexAttribDivisorANGLE(Ic,pd),lc.divisor=pd)}else if(lc.buffer&&(N.disableVertexAttribArray(Ic),lc.buffer=null),lc.x!==wb||lc.y!==wc||lc.z!==Bb||lc.w!==tc)N.vertexAttrib4f(Ic,wb,wc,Bb,tc),lc.x=wb,lc.y=wc,lc.z=Bb,lc.w=tc;za.buffer=e.positionFractBuffer;Wc=!1;Vc=null;Cc=0;ec=!1;oc=Gc=0;pc=1;mc=0;
fc=5126;cb=xb=Hc=$a=0;wa(za)?(Wc=!0,Vc=Y.createStream(34962,za),fc=Vc.dtype):(Vc=Y.getBuffer(za))?fc=Vc.dtype:"constant"in za?(pc=2,"number"===typeof za.constant?(Hc=za.constant,xb=cb=$a=0):(Hc=0<za.constant.length?za.constant[0]:0,xb=1<za.constant.length?za.constant[1]:0,cb=2<za.constant.length?za.constant[2]:0,$a=3<za.constant.length?za.constant[3]:0)):(Vc=wa(za.buffer)?Y.createStream(34962,za.buffer):Y.getBuffer(za.buffer),fc="type"in za?Ga[za.type]:Vc.dtype,ec=!!za.normalized,oc=za.size|0,Gc=
za.offset|0,mc=za.stride|0,Cc=za.divisor|0);Mb=c.location;ab=hd[Mb];if(1===pc){ab.buffer||N.enableVertexAttribArray(Mb);nb=oc||2;if(ab.type!==fc||ab.size!==nb||ab.buffer!==Vc||ab.normalized!==ec||ab.offset!==Gc||ab.stride!==mc)N.bindBuffer(34962,Vc.buffer),N.vertexAttribPointer(Mb,nb,fc,ec,mc,Gc),ab.type=fc,ab.size=nb,ab.buffer=Vc,ab.normalized=ec,ab.offset=Gc,ab.stride=mc;ab.divisor!==Cc&&(L.vertexAttribDivisorANGLE(Mb,Cc),ab.divisor=Cc)}else if(ab.buffer&&(N.disableVertexAttribArray(Mb),ab.buffer=
null),ab.x!==Hc||ab.y!==xb||ab.z!==cb||ab.w!==$a)N.vertexAttrib4f(Mb,Hc,xb,cb,$a),ab.x=Hc,ab.y=xb,ab.z=cb,ab.w=$a;ka.buffer=e.positionFractBuffer;Va=!1;Tc=null;Hb=0;Ib=!1;Nb=qc=0;jb=1;Fb=0;Cb=5126;Ob=Xb=hb=vb=0;wa(ka)?(Va=!0,Tc=Y.createStream(34962,ka),Cb=Tc.dtype):(Tc=Y.getBuffer(ka))?Cb=Tc.dtype:"constant"in ka?(jb=2,"number"===typeof ka.constant?(hb=ka.constant,Xb=Ob=vb=0):(hb=0<ka.constant.length?ka.constant[0]:0,Xb=1<ka.constant.length?ka.constant[1]:0,Ob=2<ka.constant.length?ka.constant[2]:
0,vb=3<ka.constant.length?ka.constant[3]:0)):(Tc=wa(ka.buffer)?Y.createStream(34962,ka.buffer):Y.getBuffer(ka.buffer),Cb="type"in ka?Ga[ka.type]:Tc.dtype,Ib=!!ka.normalized,Nb=ka.size|0,qc=ka.offset|0,Fb=ka.stride|0,Hb=ka.divisor|0);pb=M.location;Ua=hd[pb];if(1===jb){Ua.buffer||N.enableVertexAttribArray(pb);Tb=Nb||2;if(Ua.type!==Cb||Ua.size!==Tb||Ua.buffer!==Tc||Ua.normalized!==Ib||Ua.offset!==qc||Ua.stride!==Fb)N.bindBuffer(34962,Tc.buffer),N.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=
Tb,Ua.buffer=Tc,Ua.normalized=Ib,Ua.offset=qc,Ua.stride=Fb;Ua.divisor!==Hb&&(L.vertexAttribDivisorANGLE(pb,Hb),Ua.divisor=Hb)}else if(Ua.buffer&&(N.disableVertexAttribArray(pb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Xb||Ua.z!==Ob||Ua.w!==vb)N.vertexAttrib4f(pb,hb,Xb,Ob,vb),Ua.x=hb,Ua.y=Xb,Ua.z=Ob,Ua.w=vb;Z.buffer=e.colorBuffer;yb=!1;ac=null;ib=0;ob=!1;qb=Ia=0;Ka=1;eb=0;fb=5126;sb=Wa=kb=La=0;wa(Z)?(yb=!0,ac=Y.createStream(34962,Z),fb=ac.dtype):(ac=Y.getBuffer(Z))?fb=ac.dtype:"constant"in Z?(Ka=2,"number"===
typeof Z.constant?(kb=Z.constant,Wa=sb=La=0):(kb=0<Z.constant.length?Z.constant[0]:0,Wa=1<Z.constant.length?Z.constant[1]:0,sb=2<Z.constant.length?Z.constant[2]:0,La=3<Z.constant.length?Z.constant[3]:0)):(ac=wa(Z.buffer)?Y.createStream(34962,Z.buffer):Y.getBuffer(Z.buffer),fb="type"in Z?Ga[Z.type]:ac.dtype,ob=!!Z.normalized,qb=Z.size|0,Ia=Z.offset|0,eb=Z.stride|0,ib=Z.divisor|0);rb=r.location;Pa=hd[rb];if(1===Ka){Pa.buffer||N.enableVertexAttribArray(rb);Bc=qb||4;if(Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==
ac||Pa.normalized!==ob||Pa.offset!==Ia||Pa.stride!==eb)N.bindBuffer(34962,ac.buffer),N.vertexAttribPointer(rb,Bc,fb,ob,eb,Ia),Pa.type=fb,Pa.size=Bc,Pa.buffer=ac,Pa.normalized=ob,Pa.offset=Ia,Pa.stride=eb;Pa.divisor!==ib&&(L.vertexAttribDivisorANGLE(rb,ib),Pa.divisor=ib)}else if(Pa.buffer&&(N.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==La)N.vertexAttrib4f(rb,kb,Wa,sb,La),Pa.x=kb,Pa.y=Wa,Pa.z=sb,Pa.w=La;Ra=W.location;Jb=hd[Ra];Jb.buffer||N.enableVertexAttribArray(Ra);
if(5126!==Jb.type||1!==Jb.size||Jb.buffer!==g||!1!==Jb.normalized||0!==Jb.offset||8!==Jb.stride)N.bindBuffer(34962,g.buffer),N.vertexAttribPointer(Ra,1,5126,!1,8,0),Jb.type=5126,Jb.size=1,Jb.buffer=g,Jb.normalized=!1,Jb.offset=0,Jb.stride=8;0!==Jb.divisor&&(L.vertexAttribDivisorANGLE(Ra,0),Jb.divisor=0);Db=E.location;Na=hd[Db];Na.buffer||N.enableVertexAttribArray(Db);if(5126!==Na.type||1!==Na.size||Na.buffer!==f||!1!==Na.normalized||4!==Na.offset||8!==Na.stride)N.bindBuffer(34962,f.buffer),N.vertexAttribPointer(Db,
1,5126,!1,8,4),Na.type=5126,Na.size=1,Na.buffer=f,Na.normalized=!1,Na.offset=4,Na.stride=8;0!==Na.divisor&&(L.vertexAttribDivisorANGLE(Db,0),Na.divisor=0);Jd=e.scale;N.uniform2f(d.location,Jd[0],Jd[1]);Ya=e.scaleFract;N.uniform2f(P.location,Ya[0],Ya[1]);Kb=e.translate;N.uniform2f(xa.location,Kb[0],Kb[1]);Lb=e.translateFract;N.uniform2f(B.location,Lb[0],Lb[1]);N.uniform1f(b.location,e.thickness);N.uniform1f(w.location,e.depth);lb=q.call(this,ea,e,0);N.uniform4f(qa.location,lb[0],lb[1],lb[2],lb[3]);
N.uniform1f(aa.location,e.dashLength);N.uniform1f(D.location,e.opacity);(Oa=e.dashTexture)&&"framebuffer"===Oa._reglType&&(Oa=Oa.color[0]);Yb=Oa._texture;N.uniform1i(k.location,Yb.bind());(Qa=T.elements)?N.bindBuffer(34963,Qa.buffer.buffer):ba.currentVAO&&(Qa=z.getElements(ba.currentVAO.elements))&&N.bindBuffer(34963,Qa.buffer.buffer);tb=e.count;0<tb?Qa?L.drawElementsInstancedANGLE(5,4,Qa.type,0<<(Qa.type-5121>>1),tb):L.drawArraysInstancedANGLE(5,0,4,tb):0>tb&&(Qa?N.drawElements(5,4,Qa.type,0<<(Qa.type-
5121>>1)):N.drawArrays(5,0,4));R.dirty=!0;ba.setVAO(null);ea.viewportWidth=S;ea.viewportHeight=m;Q&&(X.cpuTime+=performance.now()-K);Ba&&Y.destroyStream(U);sd&&Y.destroyStream(Kc);Wc&&Y.destroyStream(Vc);Va&&Y.destroyStream(Tc);yb&&Y.destroyStream(ac);Yb.unbind()},scope:function(b,d,c){var h,l,k,a,p,q,I,r,ma,B,w,sa,Ma,cc,z,fa,ha,E,J,D,N,ua,M,u,O,ba,F,P,Q,U,ja,Ta,aa,ga,ya,oa,va,Ea,W,Gb,la,xa,qa,Ca,dd,hd,V,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,ia,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,
Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,Aa,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe;h=b.viewport;l=h.x|0;k=h.y|0;a="width"in h?h.width|0:ea.framebufferWidth-
l;p="height"in h?h.height|0:ea.framebufferHeight-k;q=ea.viewportWidth;ea.viewportWidth=a;I=ea.viewportHeight;ea.viewportHeight=p;r=H[0];H[0]=l;ma=H[1];H[1]=k;B=H[2];H[2]=a;w=H[3];H[3]=p;sa=S[0];S[0]=0;Ma=S[1];S[1]=0;cc=S[2];S[2]=0;z=S[3];S[3]=0;fa=na.blend_enable;na.blend_enable=!0;ha=pa[0];pa[0]=32774;E=pa[1];pa[1]=32774;J=Ba[0];Ba[0]=770;D=Ba[1];Ba[1]=771;N=Ba[2];Ba[2]=773;ua=Ba[3];Ba[3]=1;M=e.call(this,ea,b,c);u=na.depth_enable;na.depth_enable=M;O=b.viewport;ba=O.x|0;F=O.y|0;P="width"in O?O.width|
0:ea.framebufferWidth-ba;Q="height"in O?O.height|0:ea.framebufferHeight-F;U=v[0];v[0]=ba;ja=v[1];v[1]=F;Ta=v[2];v[2]=P;aa=v[3];v[3]=Q;ga=na.scissor_enable;na.scissor_enable=!0;ya=na.stencil_enable;na.stencil_enable=!1;if(oa=R.profile)va=performance.now(),X.count++;Ea=T.offset;T.offset=0;W=T.count;T.count=4;Gb=b.count;la=T.instances;T.instances=Gb;xa=T.primitive;T.primitive=5;qa=b.dashLength;Ca=G[23];G[23]=qa;dd=b.dashTexture;hd=G[24];G[24]=dd;V=b.depth;Wc=G[22];G[22]=V;Vc=b.id;Cc=G[31];G[31]=Vc;ec=
b.miterLimit;Gc=G[32];G[32]=ec;oc=x.call(this,ea,b,c);pc=G[33];G[33]=oc;mc=b.opacity;fc=G[10];G[10]=mc;$a=ea.pixelRatio;Hc=G[34];G[34]=$a;xb=b.scale;cb=G[6];G[6]=xb;Mb=b.scaleFract;ab=G[7];G[7]=Mb;nb=b.thickness;Va=G[21];G[21]=nb;ia=b.translate;Hb=G[8];G[8]=ia;Ib=b.translateFract;qc=G[9];G[9]=Ib;Nb=C.call(this,ea,b,c);jb=G[3];G[3]=Nb;ra.buffer=b.positionBuffer;Fb=!1;Cb=null;vb=0;hb=!1;Ob=Xb=0;pb=1;Ua=0;Tb=5126;ob=ib=ac=yb=0;wa(ra)?(Fb=!0,Cb=Y.createStream(34962,ra),Tb=Cb.dtype):(Cb=Y.getBuffer(ra))?
Tb=Cb.dtype:"constant"in ra?(pb=2,"number"===typeof ra.constant?(ac=ra.constant,ib=ob=yb=0):(ac=0<ra.constant.length?ra.constant[0]:0,ib=1<ra.constant.length?ra.constant[1]:0,ob=2<ra.constant.length?ra.constant[2]:0,yb=3<ra.constant.length?ra.constant[3]:0)):(Cb=wa(ra.buffer)?Y.createStream(34962,ra.buffer):Y.getBuffer(ra.buffer),Tb="type"in ra?Ga[ra.type]:Cb.dtype,hb=!!ra.normalized,Ob=ra.size|0,Xb=ra.offset|0,Ua=ra.stride|0,vb=ra.divisor|0);Ia=L.buffer;L.buffer=Cb;qb=L.divisor;L.divisor=vb;Ka=L.normalized;
L.normalized=hb;eb=L.offset;L.offset=Xb;fb=L.size;L.size=Ob;La=L.state;L.state=pb;kb=L.stride;L.stride=Ua;Wa=L.type;L.type=Tb;sb=L.w;L.w=yb;rb=L.x;L.x=ac;Pa=L.y;L.y=ib;Bc=L.z;L.z=ob;za.buffer=b.positionFractBuffer;Ra=!1;Jb=null;Db=0;Na=!1;Ya=Jd=0;Kb=1;Lb=0;lb=5126;tb=Qa=Yb=Oa=0;wa(za)?(Ra=!0,Jb=Y.createStream(34962,za),lb=Jb.dtype):(Jb=Y.getBuffer(za))?lb=Jb.dtype:"constant"in za?(Kb=2,"number"===typeof za.constant?(Yb=za.constant,Qa=tb=Oa=0):(Yb=0<za.constant.length?za.constant[0]:0,Qa=1<za.constant.length?
za.constant[1]:0,tb=2<za.constant.length?za.constant[2]:0,Oa=3<za.constant.length?za.constant[3]:0)):(Jb=wa(za.buffer)?Y.createStream(34962,za.buffer):Y.getBuffer(za.buffer),lb="type"in za?Ga[za.type]:Jb.dtype,Na=!!za.normalized,Ya=za.size|0,Jd=za.offset|0,Lb=za.stride|0,Db=za.divisor|0);ub=K.buffer;K.buffer=Jb;Sa=K.divisor;K.divisor=Db;mb=K.normalized;K.normalized=Na;gc=K.offset;K.offset=Jd;zc=K.size;K.size=Ya;uc=K.state;K.state=Kb;bb=K.stride;K.stride=Lb;jc=K.type;K.type=lb;nd=K.w;K.w=Oa;Xa=K.x;
K.x=Yb;Lc=K.y;K.y=Qa;zb=K.z;K.z=tb;Da.buffer=b.positionBuffer;Za=!1;Ub=null;sc=0;Vb=!1;Jc=Pb=0;Qb=1;Xd=0;Dc=5126;qd=fd=Mc=ud=0;wa(Da)?(Za=!0,Ub=Y.createStream(34962,Da),Dc=Ub.dtype):(Ub=Y.getBuffer(Da))?Dc=Ub.dtype:"constant"in Da?(Qb=2,"number"===typeof Da.constant?(Mc=Da.constant,fd=qd=ud=0):(Mc=0<Da.constant.length?Da.constant[0]:0,fd=1<Da.constant.length?Da.constant[1]:0,qd=2<Da.constant.length?Da.constant[2]:0,ud=3<Da.constant.length?Da.constant[3]:0)):(Ub=wa(Da.buffer)?Y.createStream(34962,
Da.buffer):Y.getBuffer(Da.buffer),Dc="type"in Da?Ga[Da.type]:Ub.dtype,Vb=!!Da.normalized,Jc=Da.size|0,Pb=Da.offset|0,Xd=Da.stride|0,sc=Da.divisor|0);nc=A.buffer;A.buffer=Ub;vc=A.divisor;A.divisor=sc;hc=A.normalized;A.normalized=Vb;db=A.offset;A.offset=Pb;rc=A.size;A.size=Jc;Sb=A.state;A.state=Qb;Wb=A.stride;A.stride=Xd;dc=A.type;A.type=Dc;ic=A.w;A.w=ud;xc=A.x;A.x=Mc;Ac=A.y;A.y=fd;ad=A.z;A.z=qd;ka.buffer=b.positionFractBuffer;Pc=!1;Qc=null;Rc=0;Xc=!1;bd=wd=0;Yc=1;kc=0;bc=5126;yc=cd=Uc=Zc=0;wa(ka)?
(Pc=!0,Qc=Y.createStream(34962,ka),bc=Qc.dtype):(Qc=Y.getBuffer(ka))?bc=Qc.dtype:"constant"in ka?(Yc=2,"number"===typeof ka.constant?(Uc=ka.constant,cd=yc=Zc=0):(Uc=0<ka.constant.length?ka.constant[0]:0,cd=1<ka.constant.length?ka.constant[1]:0,yc=2<ka.constant.length?ka.constant[2]:0,Zc=3<ka.constant.length?ka.constant[3]:0)):(Qc=wa(ka.buffer)?Y.createStream(34962,ka.buffer):Y.getBuffer(ka.buffer),bc="type"in ka?Ga[ka.type]:Qc.dtype,Xc=!!ka.normalized,bd=ka.size|0,wd=ka.offset|0,kc=ka.stride|0,Rc=
ka.divisor|0);id=m.buffer;m.buffer=Qc;Dd=m.divisor;m.divisor=Rc;ye=m.normalized;m.normalized=Xc;xd=m.offset;m.offset=wd;jd=m.size;m.size=bd;Aa=m.state;m.state=Yc;Nd=m.stride;m.stride=kc;Yd=m.type;m.type=bc;de=m.w;m.w=Zc;Od=m.x;m.x=Uc;Id=m.y;m.y=cd;Gd=m.z;m.z=yc;Z.buffer=b.colorBuffer;od=!1;Sc=null;vd=0;td=!1;yd=kd=0;Ad=1;Ed=0;pe=5126;ie=ke=Ne=je=0;wa(Z)?(od=!0,Sc=Y.createStream(34962,Z),pe=Sc.dtype):(Sc=Y.getBuffer(Z))?pe=Sc.dtype:"constant"in Z?(Ad=2,"number"===typeof Z.constant?(Ne=Z.constant,ke=
ie=je=0):(Ne=0<Z.constant.length?Z.constant[0]:0,ke=1<Z.constant.length?Z.constant[1]:0,ie=2<Z.constant.length?Z.constant[2]:0,je=3<Z.constant.length?Z.constant[3]:0)):(Sc=wa(Z.buffer)?Y.createStream(34962,Z.buffer):Y.getBuffer(Z.buffer),pe="type"in Z?Ga[Z.type]:Sc.dtype,td=!!Z.normalized,yd=Z.size|0,kd=Z.offset|0,Ed=Z.stride|0,vd=Z.divisor|0);he=t.buffer;t.buffer=Sc;ue=t.divisor;t.divisor=vd;ee=t.normalized;t.normalized=td;le=t.offset;t.offset=kd;Nc=t.size;t.size=yd;gd=t.state;t.state=Ad;ve=t.stride;
t.stride=Ed;qe=t.type;t.type=pe;Kd=t.w;t.w=je;Pd=t.x;t.x=Ne;Qd=t.y;t.y=ke;Rd=t.z;t.z=ie;me=da.buffer;da.buffer=g;Ae=da.divisor;da.divisor=0;Ce=da.normalized;da.normalized=!1;re=da.offset;da.offset=0;Se=da.size;da.size=0;Te=da.state;da.state=1;Oe=da.stride;da.stride=8;we=da.type;da.type=5126;Ge=da.w;da.w=0;Ie=da.x;da.x=0;Je=da.y;da.y=0;Ke=da.z;da.z=0;He=y.buffer;y.buffer=f;Md=y.divisor;y.divisor=0;Zd=y.normalized;y.normalized=!1;ce=y.offset;y.offset=4;fe=y.size;y.size=0;Le=y.state;y.state=1;Hd=y.stride;
y.stride=8;Sd=y.type;y.type=5126;Ee=y.w;y.w=0;Me=y.x;y.x=0;bf=y.y;y.y=0;af=y.z;y.z=0;Ue=n.vert;n.vert=20;Pe=n.frag;n.frag=19;R.dirty=!0;d(ea,b,c);ea.viewportWidth=q;ea.viewportHeight=I;H[0]=r;H[1]=ma;H[2]=B;H[3]=w;S[0]=sa;S[1]=Ma;S[2]=cc;S[3]=z;na.blend_enable=fa;pa[0]=ha;pa[1]=E;Ba[0]=J;Ba[1]=D;Ba[2]=N;Ba[3]=ua;na.depth_enable=u;v[0]=U;v[1]=ja;v[2]=Ta;v[3]=aa;na.scissor_enable=ga;na.stencil_enable=ya;oa&&(X.cpuTime+=performance.now()-va);T.offset=Ea;T.count=W;T.instances=la;T.primitive=xa;G[23]=
Ca;G[24]=hd;G[22]=Wc;G[31]=Cc;G[32]=Gc;G[33]=pc;G[10]=fc;G[34]=Hc;G[6]=cb;G[7]=ab;G[21]=Va;G[8]=Hb;G[9]=qc;G[3]=jb;Fb&&Y.destroyStream(Cb);L.buffer=Ia;L.divisor=qb;L.normalized=Ka;L.offset=eb;L.size=fb;L.state=La;L.stride=kb;L.type=Wa;L.w=sb;L.x=rb;L.y=Pa;L.z=Bc;Ra&&Y.destroyStream(Jb);K.buffer=ub;K.divisor=Sa;K.normalized=mb;K.offset=gc;K.size=zc;K.state=uc;K.stride=bb;K.type=jc;K.w=nd;K.x=Xa;K.y=Lc;K.z=zb;Za&&Y.destroyStream(Ub);A.buffer=nc;A.divisor=vc;A.normalized=hc;A.offset=db;A.size=rc;A.state=
Sb;A.stride=Wb;A.type=dc;A.w=ic;A.x=xc;A.y=Ac;A.z=ad;Pc&&Y.destroyStream(Qc);m.buffer=id;m.divisor=Dd;m.normalized=ye;m.offset=xd;m.size=jd;m.state=Aa;m.stride=Nd;m.type=Yd;m.w=de;m.x=Od;m.y=Id;m.z=Gd;od&&Y.destroyStream(Sc);t.buffer=he;t.divisor=ue;t.normalized=ee;t.offset=le;t.size=Nc;t.state=gd;t.stride=ve;t.type=qe;t.w=Kd;t.x=Pd;t.y=Qd;t.z=Rd;da.buffer=me;da.divisor=Ae;da.normalized=Ce;da.offset=re;da.size=Se;da.state=Te;da.stride=Oe;da.type=we;da.w=Ge;da.x=Ie;da.y=Je;da.z=Ke;y.buffer=He;y.divisor=
Md;y.normalized=Zd;y.offset=ce;y.size=fe;y.state=Le;y.stride=Hd;y.type=Sd;y.w=Ee;y.x=Me;y.y=bf;y.z=af;n.vert=Ue;n.frag=Pe;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,hd,Y,ea,R){var T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,dd,Gb,ha,H,sa,Ga,ra,za,
Da,ka,Z,ta,Ja,Fa,gb,ca;T=a.attributes;z=a.buffer;l=a.context;O=a.current;N=a.draw;wa=a.elements;na=a.extensions;n=a.framebuffer;G=a.gl;ba=a.isBufferArgs;S=a.next;la=a.shader;pa=a.uniforms;Ca=a.vao;Ba=S.blend_color;fa=O.blend_color;Ea=S.blend_equation;ja=O.blend_equation;oa=S.blend_func;ya=O.blend_func;Ma=S.colorMask;ma=O.colorMask;cc=S.depth_range;Ta=O.depth_range;v=S.polygonOffset_offset;p=O.polygonOffset_offset;I=S.sample_coverage;ua=O.sample_coverage;va=S.scissor_box;dd=O.scissor_box;Gb=S.stencil_func;
ha=O.stencil_func;H=S.stencil_opBack;sa=O.stencil_opBack;Ga=S.stencil_opFront;ra=O.stencil_opFront;za=S.viewport;Da=O.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Z={divisor:1,offset:0,stride:4};ta={divisor:1,offset:8,stride:8};Ja={divisor:1,offset:4,stride:4};Fa={divisor:1,offset:16,stride:8};gb={divisor:1,offset:24,stride:8};ca={divisor:1,offset:0,stride:8};return{batch:function(e,a){var q,y,m,J,A,u;q=n.next;q!==n.cur&&(q?G.bindFramebuffer(36160,
q.framebuffer):G.bindFramebuffer(36160,null),n.cur=q);if(O.dirty){var C,x,za,F,t,pa,L,K,Ba,U,oa,va,da,Ea,la,V,$d,ia,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb;C=S.dither;C!==O.dither&&(C?G.enable(3024):G.disable(3024),O.dither=C);x=S.depth_func;x!==O.depth_func&&(G.depthFunc(x),O.depth_func=x);za=cc[0];F=cc[1];if(za!==Ta[0]||F!==Ta[1])G.depthRange(za,F),Ta[0]=za,Ta[1]=F;t=S.depth_mask;t!==O.depth_mask&&(G.depthMask(t),O.depth_mask=t);pa=Ma[0];L=Ma[1];K=Ma[2];Ba=Ma[3];if(pa!==ma[0]||L!==ma[1]||K!==ma[2]||
Ba!==ma[3])G.colorMask(pa,L,K,Ba),ma[0]=pa,ma[1]=L,ma[2]=K,ma[3]=Ba;U=S.frontFace;U!==O.frontFace&&(G.frontFace(U),O.frontFace=U);oa=S.lineWidth;oa!==O.lineWidth&&(G.lineWidth(oa),O.lineWidth=oa);va=S.polygonOffset_enable;va!==O.polygonOffset_enable&&(va?G.enable(32823):G.disable(32823),O.polygonOffset_enable=va);da=v[0];Ea=v[1];if(da!==p[0]||Ea!==p[1])G.polygonOffset(da,Ea),p[0]=da,p[1]=Ea;la=S.sample_alpha;la!==O.sample_alpha&&(la?G.enable(32926):G.disable(32926),O.sample_alpha=la);V=S.sample_enable;
V!==O.sample_enable&&(V?G.enable(32928):G.disable(32928),O.sample_enable=V);$d=I[0];ia=I[1];if($d!==ua[0]||ia!==ua[1])G.sampleCoverage($d,ia),ua[0]=$d,ua[1]=ia;Ld=S.stencil_mask;Ld!==O.stencil_mask&&(G.stencilMask(Ld),O.stencil_mask=Ld);md=Gb[0];$c=Gb[1];sd=Gb[2];if(md!==ha[0]||$c!==ha[1]||sd!==ha[2])G.stencilFunc(md,$c,sd),ha[0]=md,ha[1]=$c,ha[2]=sd;Kc=Ga[0];pd=Ga[1];Ec=Ga[2];ed=Ga[3];if(Kc!==ra[0]||pd!==ra[1]||Ec!==ra[2]||ed!==ra[3])G.stencilOpSeparate(Kc,pd,Ec,ed),ra[0]=Kc,ra[1]=pd,ra[2]=Ec,ra[3]=
ed;Oc=H[0];ld=H[1];Ab=H[2];Eb=H[3];if(Oc!==sa[0]||ld!==sa[1]||Ab!==sa[2]||Eb!==sa[3])G.stencilOpSeparate(Oc,ld,Ab,Eb),sa[0]=Oc,sa[1]=ld,sa[2]=Ab,sa[3]=Eb}G.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;G.enable(3042);O.blend_enable=!0;G.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;G.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;G.enable(2884);O.cull_enable=!0;G.cullFace(1029);O.cull_face=1029;G.enable(3089);O.scissor_enable=!0;G.disable(2960);O.stencil_enable=
!1;if(y=O.profile)m=performance.now(),X.count+=a;G.useProgram(Q.program);J=na.angle_instanced_arrays;var tc,wb,wc,Bb,Ic;Ca.setVAO(null);tc=D.location;wb=T[tc];wb.buffer||G.enableVertexAttribArray(tc);if(5126!==wb.type||1!==wb.size||wb.buffer!==g||!1!==wb.normalized||0!==wb.offset||8!==wb.stride)G.bindBuffer(34962,g.buffer),G.vertexAttribPointer(tc,1,5126,!1,8,0),wb.type=5126,wb.size=1,wb.buffer=g,wb.normalized=!1,wb.offset=0,wb.stride=8;0!==wb.divisor&&(J.vertexAttribDivisorANGLE(tc,0),wb.divisor=
0);wc=d.location;Bb=T[wc];Bb.buffer||G.enableVertexAttribArray(wc);if(5126!==Bb.type||1!==Bb.size||Bb.buffer!==f||!1!==Bb.normalized||4!==Bb.offset||8!==Bb.stride)G.bindBuffer(34962,f.buffer),G.vertexAttribPointer(wc,1,5126,!1,8,4),Bb.type=5126,Bb.size=1,Bb.buffer=f,Bb.normalized=!1,Bb.offset=4,Bb.stride=8;0!==Bb.divisor&&(J.vertexAttribDivisorANGLE(wc,0),Bb.divisor=0);(Ic=N.elements)?G.bindBuffer(34963,Ic.buffer.buffer):Ca.currentVAO&&(Ic=wa.getElements(Ca.currentVAO.elements))&&G.bindBuffer(34963,
Ic.buffer.buffer);for(A=0;A<a;++A){u=e[A];var lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,Aa,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc;lc=u.viewport;Fc=lc.x|0;Wc=
lc.y|0;Vc="width"in lc?lc.width|0:l.framebufferWidth-Fc;Cc="height"in lc?lc.height|0:l.framebufferHeight-Wc;ec=l.viewportWidth;l.viewportWidth=Vc;Gc=l.viewportHeight;l.viewportHeight=Cc;G.viewport(Fc,Wc,Vc,Cc);Da[0]=Fc;Da[1]=Wc;Da[2]=Vc;Da[3]=Cc;(oc=ga.call(this,l,u,A))?G.enable(2929):G.disable(2929);O.depth_enable=oc;pc=u.viewport;mc=pc.x|0;fc=pc.y|0;$a="width"in pc?pc.width|0:l.framebufferWidth-mc;Hc="height"in pc?pc.height|0:l.framebufferHeight-fc;G.scissor(mc,fc,$a,Hc);dd[0]=mc;dd[1]=fc;dd[2]=
$a;dd[3]=Hc;ta.buffer=u.positionBuffer;xb=!1;cb=null;Mb=0;ab=!1;Va=nb=0;Tc=1;Hb=0;Ib=5126;Fb=jb=Nb=qc=0;ba(ta)?(xb=!0,cb=z.createStream(34962,ta),Ib=cb.dtype):(cb=z.getBuffer(ta))?Ib=cb.dtype:"constant"in ta?(Tc=2,"number"===typeof ta.constant?(Nb=ta.constant,jb=Fb=qc=0):(Nb=0<ta.constant.length?ta.constant[0]:0,jb=1<ta.constant.length?ta.constant[1]:0,Fb=2<ta.constant.length?ta.constant[2]:0,qc=3<ta.constant.length?ta.constant[3]:0)):(cb=ba(ta.buffer)?z.createStream(34962,ta.buffer):z.getBuffer(ta.buffer),
Ib="type"in ta?ka[ta.type]:cb.dtype,ab=!!ta.normalized,Va=ta.size|0,nb=ta.offset|0,Hb=ta.stride|0,Mb=ta.divisor|0);Cb=r.location;vb=T[Cb];if(1===Tc){vb.buffer||G.enableVertexAttribArray(Cb);hb=Va||2;if(vb.type!==Ib||vb.size!==hb||vb.buffer!==cb||vb.normalized!==ab||vb.offset!==nb||vb.stride!==Hb)G.bindBuffer(34962,cb.buffer),G.vertexAttribPointer(Cb,hb,Ib,ab,Hb,nb),vb.type=Ib,vb.size=hb,vb.buffer=cb,vb.normalized=ab,vb.offset=nb,vb.stride=Hb;vb.divisor!==Mb&&(J.vertexAttribDivisorANGLE(Cb,Mb),vb.divisor=
Mb)}else if(vb.buffer&&(G.disableVertexAttribArray(Cb),vb.buffer=null),vb.x!==Nb||vb.y!==jb||vb.z!==Fb||vb.w!==qc)G.vertexAttrib4f(Cb,Nb,jb,Fb,qc),vb.x=Nb,vb.y=jb,vb.z=Fb,vb.w=qc;Fa.buffer=u.positionBuffer;Xb=!1;Ob=null;pb=0;Ua=!1;yb=Tb=0;ac=1;ib=0;ob=5126;eb=Ka=qb=Ia=0;ba(Fa)?(Xb=!0,Ob=z.createStream(34962,Fa),ob=Ob.dtype):(Ob=z.getBuffer(Fa))?ob=Ob.dtype:"constant"in Fa?(ac=2,"number"===typeof Fa.constant?(qb=Fa.constant,Ka=eb=Ia=0):(qb=0<Fa.constant.length?Fa.constant[0]:0,Ka=1<Fa.constant.length?
Fa.constant[1]:0,eb=2<Fa.constant.length?Fa.constant[2]:0,Ia=3<Fa.constant.length?Fa.constant[3]:0)):(Ob=ba(Fa.buffer)?z.createStream(34962,Fa.buffer):z.getBuffer(Fa.buffer),ob="type"in Fa?ka[Fa.type]:Ob.dtype,Ua=!!Fa.normalized,yb=Fa.size|0,Tb=Fa.offset|0,ib=Fa.stride|0,pb=Fa.divisor|0);fb=k.location;La=T[fb];if(1===ac){La.buffer||G.enableVertexAttribArray(fb);kb=yb||2;if(La.type!==ob||La.size!==kb||La.buffer!==Ob||La.normalized!==Ua||La.offset!==Tb||La.stride!==ib)G.bindBuffer(34962,Ob.buffer),
G.vertexAttribPointer(fb,kb,ob,Ua,ib,Tb),La.type=ob,La.size=kb,La.buffer=Ob,La.normalized=Ua,La.offset=Tb,La.stride=ib;La.divisor!==pb&&(J.vertexAttribDivisorANGLE(fb,pb),La.divisor=pb)}else if(La.buffer&&(G.disableVertexAttribArray(fb),La.buffer=null),La.x!==qb||La.y!==Ka||La.z!==eb||La.w!==Ia)G.vertexAttrib4f(fb,qb,Ka,eb,Ia),La.x=qb,La.y=Ka,La.z=eb,La.w=Ia;gb.buffer=u.positionBuffer;Wa=!1;sb=null;rb=0;Pa=!1;Ra=Bc=0;Jb=1;Db=0;Na=5126;Lb=Kb=Ya=Jd=0;ba(gb)?(Wa=!0,sb=z.createStream(34962,gb),Na=sb.dtype):
(sb=z.getBuffer(gb))?Na=sb.dtype:"constant"in gb?(Jb=2,"number"===typeof gb.constant?(Ya=gb.constant,Kb=Lb=Jd=0):(Ya=0<gb.constant.length?gb.constant[0]:0,Kb=1<gb.constant.length?gb.constant[1]:0,Lb=2<gb.constant.length?gb.constant[2]:0,Jd=3<gb.constant.length?gb.constant[3]:0)):(sb=ba(gb.buffer)?z.createStream(34962,gb.buffer):z.getBuffer(gb.buffer),Na="type"in gb?ka[gb.type]:sb.dtype,Pa=!!gb.normalized,Ra=gb.size|0,Bc=gb.offset|0,Db=gb.stride|0,rb=gb.divisor|0);lb=xa.location;Oa=T[lb];if(1===Jb){Oa.buffer||
G.enableVertexAttribArray(lb);Yb=Ra||2;if(Oa.type!==Na||Oa.size!==Yb||Oa.buffer!==sb||Oa.normalized!==Pa||Oa.offset!==Bc||Oa.stride!==Db)G.bindBuffer(34962,sb.buffer),G.vertexAttribPointer(lb,Yb,Na,Pa,Db,Bc),Oa.type=Na,Oa.size=Yb,Oa.buffer=sb,Oa.normalized=Pa,Oa.offset=Bc,Oa.stride=Db;Oa.divisor!==rb&&(J.vertexAttribDivisorANGLE(lb,rb),Oa.divisor=rb)}else if(Oa.buffer&&(G.disableVertexAttribArray(lb),Oa.buffer=null),Oa.x!==Ya||Oa.y!==Kb||Oa.z!==Lb||Oa.w!==Jd)G.vertexAttrib4f(lb,Ya,Kb,Lb,Jd),Oa.x=
Ya,Oa.y=Kb,Oa.z=Lb,Oa.w=Jd;ca.buffer=u.positionBuffer;Qa=!1;tb=null;ub=0;Sa=!1;gc=mb=0;zc=1;uc=0;bb=5126;Lc=Xa=nd=jc=0;ba(ca)?(Qa=!0,tb=z.createStream(34962,ca),bb=tb.dtype):(tb=z.getBuffer(ca))?bb=tb.dtype:"constant"in ca?(zc=2,"number"===typeof ca.constant?(nd=ca.constant,Xa=Lc=jc=0):(nd=0<ca.constant.length?ca.constant[0]:0,Xa=1<ca.constant.length?ca.constant[1]:0,Lc=2<ca.constant.length?ca.constant[2]:0,jc=3<ca.constant.length?ca.constant[3]:0)):(tb=ba(ca.buffer)?z.createStream(34962,ca.buffer):
z.getBuffer(ca.buffer),bb="type"in ca?ka[ca.type]:tb.dtype,Sa=!!ca.normalized,gc=ca.size|0,mb=ca.offset|0,uc=ca.stride|0,ub=ca.divisor|0);zb=qa.location;Za=T[zb];if(1===zc){Za.buffer||G.enableVertexAttribArray(zb);Ub=gc||2;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)G.bindBuffer(34962,tb.buffer),G.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(J.vertexAttribDivisorANGLE(zb,
ub),Za.divisor=ub)}else if(Za.buffer&&(G.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==nd||Za.y!==Xa||Za.z!==Lc||Za.w!==jc)G.vertexAttrib4f(zb,nd,Xa,Lc,jc),Za.x=nd,Za.y=Xa,Za.z=Lc,Za.w=jc;Z.buffer=u.colorBuffer;sc=!1;Vb=null;Pb=0;Jc=!1;Xd=Qb=0;Dc=1;ud=0;Mc=5126;vc=nc=qd=fd=0;ba(Z)?(sc=!0,Vb=z.createStream(34962,Z),Mc=Vb.dtype):(Vb=z.getBuffer(Z))?Mc=Vb.dtype:"constant"in Z?(Dc=2,"number"===typeof Z.constant?(qd=Z.constant,nc=vc=fd=0):(qd=0<Z.constant.length?Z.constant[0]:0,nc=1<Z.constant.length?
Z.constant[1]:0,vc=2<Z.constant.length?Z.constant[2]:0,fd=3<Z.constant.length?Z.constant[3]:0)):(Vb=ba(Z.buffer)?z.createStream(34962,Z.buffer):z.getBuffer(Z.buffer),Mc="type"in Z?ka[Z.type]:Vb.dtype,Jc=!!Z.normalized,Xd=Z.size|0,Qb=Z.offset|0,ud=Z.stride|0,Pb=Z.divisor|0);hc=M.location;db=T[hc];if(1===Dc){db.buffer||G.enableVertexAttribArray(hc);rc=Xd||4;if(db.type!==Mc||db.size!==rc||db.buffer!==Vb||db.normalized!==Jc||db.offset!==Qb||db.stride!==ud)G.bindBuffer(34962,Vb.buffer),G.vertexAttribPointer(hc,
rc,Mc,Jc,ud,Qb),db.type=Mc,db.size=rc,db.buffer=Vb,db.normalized=Jc,db.offset=Qb,db.stride=ud;db.divisor!==Pb&&(J.vertexAttribDivisorANGLE(hc,Pb),db.divisor=Pb)}else if(db.buffer&&(G.disableVertexAttribArray(hc),db.buffer=null),db.x!==qd||db.y!==nc||db.z!==vc||db.w!==fd)G.vertexAttrib4f(hc,qd,nc,vc,fd),db.x=qd,db.y=nc,db.z=vc,db.w=fd;Ja.buffer=u.colorBuffer;Sb=!1;Wb=null;dc=0;ic=!1;Ac=xc=0;ad=1;Pc=0;Qc=5126;bd=wd=Xc=Rc=0;ba(Ja)?(Sb=!0,Wb=z.createStream(34962,Ja),Qc=Wb.dtype):(Wb=z.getBuffer(Ja))?
Qc=Wb.dtype:"constant"in Ja?(ad=2,"number"===typeof Ja.constant?(Xc=Ja.constant,wd=bd=Rc=0):(Xc=0<Ja.constant.length?Ja.constant[0]:0,wd=1<Ja.constant.length?Ja.constant[1]:0,bd=2<Ja.constant.length?Ja.constant[2]:0,Rc=3<Ja.constant.length?Ja.constant[3]:0)):(Wb=ba(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),Qc="type"in Ja?ka[Ja.type]:Wb.dtype,ic=!!Ja.normalized,Ac=Ja.size|0,xc=Ja.offset|0,Pc=Ja.stride|0,dc=Ja.divisor|0);Yc=aa.location;kc=T[Yc];if(1===ad){kc.buffer||G.enableVertexAttribArray(Yc);
bc=Ac||4;if(kc.type!==Qc||kc.size!==bc||kc.buffer!==Wb||kc.normalized!==ic||kc.offset!==xc||kc.stride!==Pc)G.bindBuffer(34962,Wb.buffer),G.vertexAttribPointer(Yc,bc,Qc,ic,Pc,xc),kc.type=Qc,kc.size=bc,kc.buffer=Wb,kc.normalized=ic,kc.offset=xc,kc.stride=Pc;kc.divisor!==dc&&(J.vertexAttribDivisorANGLE(Yc,dc),kc.divisor=dc)}else if(kc.buffer&&(G.disableVertexAttribArray(Yc),kc.buffer=null),kc.x!==Xc||kc.y!==wd||kc.z!==bd||kc.w!==Rc)G.vertexAttrib4f(Yc,Xc,wd,bd,Rc),kc.x=Xc,kc.y=wd,kc.z=bd,kc.w=Rc;Zc=
u.scale;Uc=Zc[0];yc=Zc[1];A&&cd===Uc&&id===yc||(cd=Uc,id=yc,G.uniform2f(hd.location,Uc,yc));Dd=u.translate;ye=Dd[0];jd=Dd[1];A&&xd===ye&&Aa===jd||(xd=ye,Aa=jd,G.uniform2f(ea.location,ye,jd));Nd=u.thickness;A&&Yd===Nd||(Yd=Nd,G.uniform1f(Y.location,Nd));de=u.depth;A&&Od===de||(Od=de,G.uniform1f(E.location,de));Id=c.call(this,l,u,A);Gd=Id[0];Sc=Id[1];td=Id[2];yd=Id[3];A&&od===Gd&&vd===Sc&&kd===td&&Ad===yd||(od=Gd,vd=Sc,kd=td,Ad=yd,G.uniform4f(R.location,Gd,Sc,td,yd));Ed=u.miterLimit;A&&pe===Ed||(pe=
Ed,G.uniform1f(P.location,Ed));je=h.call(this,l,u,A);A&&Ne===je||(Ne=je,G.uniform1f(b.location,je));ke=u.dashLength;A&&ie===ke||(ie=ke,G.uniform1f(w.location,ke));he=u.opacity;A&&ue===he||(ue=he,G.uniform1f(B.location,he));(ee=u.dashTexture)&&"framebuffer"===ee._reglType&&(ee=ee.color[0]);le=ee._texture;G.uniform1i(W.location,le.bind());Nc=u.count;0<Nc?Ic?J.drawElementsInstancedANGLE(5,4,Ic.type,0<<(Ic.type-5121>>1),Nc):J.drawArraysInstancedANGLE(5,0,4,Nc):0>Nc&&(Ic?G.drawElements(5,4,Ic.type,0<<
(Ic.type-5121>>1)):G.drawArrays(5,0,4));l.viewportWidth=ec;l.viewportHeight=Gc;xb&&z.destroyStream(cb);Xb&&z.destroyStream(Ob);Wa&&z.destroyStream(sb);Qa&&z.destroyStream(tb);sc&&z.destroyStream(Vb);Sb&&z.destroyStream(Wb);le.unbind()}O.dirty=!0;Ca.setVAO(null);y&&(X.cpuTime+=performance.now()-m)},draw:function(c){var h,a,y,m,A,u,C,x,za,t,pa,L,Q,K,Ba,U,ga,oa,va,da,Ea,la,V,$d,ia,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,
Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd;h=n.next;h!==n.cur&&(h?G.bindFramebuffer(36160,h.framebuffer):G.bindFramebuffer(36160,null),n.cur=h);if(O.dirty){var Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc;Dc=S.dither;Dc!==O.dither&&(Dc?G.enable(3024):G.disable(3024),O.dither=Dc);ud=S.depth_func;ud!==O.depth_func&&(G.depthFunc(ud),
O.depth_func=ud);Mc=cc[0];fd=cc[1];if(Mc!==Ta[0]||fd!==Ta[1])G.depthRange(Mc,fd),Ta[0]=Mc,Ta[1]=fd;qd=S.depth_mask;qd!==O.depth_mask&&(G.depthMask(qd),O.depth_mask=qd);nc=Ma[0];vc=Ma[1];hc=Ma[2];db=Ma[3];if(nc!==ma[0]||vc!==ma[1]||hc!==ma[2]||db!==ma[3])G.colorMask(nc,vc,hc,db),ma[0]=nc,ma[1]=vc,ma[2]=hc,ma[3]=db;rc=S.frontFace;rc!==O.frontFace&&(G.frontFace(rc),O.frontFace=rc);Sb=S.lineWidth;Sb!==O.lineWidth&&(G.lineWidth(Sb),O.lineWidth=Sb);Wb=S.polygonOffset_enable;Wb!==O.polygonOffset_enable&&
(Wb?G.enable(32823):G.disable(32823),O.polygonOffset_enable=Wb);dc=v[0];ic=v[1];if(dc!==p[0]||ic!==p[1])G.polygonOffset(dc,ic),p[0]=dc,p[1]=ic;xc=S.sample_alpha;xc!==O.sample_alpha&&(xc?G.enable(32926):G.disable(32926),O.sample_alpha=xc);Ac=S.sample_enable;Ac!==O.sample_enable&&(Ac?G.enable(32928):G.disable(32928),O.sample_enable=Ac);ad=I[0];Pc=I[1];if(ad!==ua[0]||Pc!==ua[1])G.sampleCoverage(ad,Pc),ua[0]=ad,ua[1]=Pc;Qc=S.stencil_mask;Qc!==O.stencil_mask&&(G.stencilMask(Qc),O.stencil_mask=Qc);Rc=Gb[0];
Xc=Gb[1];wd=Gb[2];if(Rc!==ha[0]||Xc!==ha[1]||wd!==ha[2])G.stencilFunc(Rc,Xc,wd),ha[0]=Rc,ha[1]=Xc,ha[2]=wd;bd=Ga[0];Yc=Ga[1];kc=Ga[2];bc=Ga[3];if(bd!==ra[0]||Yc!==ra[1]||kc!==ra[2]||bc!==ra[3])G.stencilOpSeparate(bd,Yc,kc,bc),ra[0]=bd,ra[1]=Yc,ra[2]=kc,ra[3]=bc;Zc=H[0];Uc=H[1];cd=H[2];yc=H[3];if(Zc!==sa[0]||Uc!==sa[1]||cd!==sa[2]||yc!==sa[3])G.stencilOpSeparate(Zc,Uc,cd,yc),sa[0]=Zc,sa[1]=Uc,sa[2]=cd,sa[3]=yc}a=c.viewport;y=a.x|0;m=a.y|0;A="width"in a?a.width|0:l.framebufferWidth-y;u="height"in a?
a.height|0:l.framebufferHeight-m;C=l.viewportWidth;l.viewportWidth=A;x=l.viewportHeight;l.viewportHeight=u;G.viewport(y,m,A,u);Da[0]=y;Da[1]=m;Da[2]=A;Da[3]=u;G.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;G.enable(3042);O.blend_enable=!0;G.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;G.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;G.enable(2884);O.cull_enable=!0;G.cullFace(1029);O.cull_face=1029;(za=F.call(this,l,c,0))?G.enable(2929):G.disable(2929);
O.depth_enable=za;t=c.viewport;pa=t.x|0;L=t.y|0;Q="width"in t?t.width|0:l.framebufferWidth-pa;K="height"in t?t.height|0:l.framebufferHeight-L;G.scissor(pa,L,Q,K);dd[0]=pa;dd[1]=L;dd[2]=Q;dd[3]=K;G.enable(3089);O.scissor_enable=!0;G.disable(2960);O.stencil_enable=!1;if(Ba=O.profile)U=performance.now(),X.count++;G.useProgram(J.program);ga=na.angle_instanced_arrays;Ca.setVAO(null);ta.buffer=c.positionBuffer;oa=!1;va=null;da=0;Ea=!1;V=la=0;$d=1;ia=0;Ld=5126;Kc=sd=$c=md=0;ba(ta)?(oa=!0,va=z.createStream(34962,
ta),Ld=va.dtype):(va=z.getBuffer(ta))?Ld=va.dtype:"constant"in ta?($d=2,"number"===typeof ta.constant?($c=ta.constant,sd=Kc=md=0):($c=0<ta.constant.length?ta.constant[0]:0,sd=1<ta.constant.length?ta.constant[1]:0,Kc=2<ta.constant.length?ta.constant[2]:0,md=3<ta.constant.length?ta.constant[3]:0)):(va=ba(ta.buffer)?z.createStream(34962,ta.buffer):z.getBuffer(ta.buffer),Ld="type"in ta?ka[ta.type]:va.dtype,Ea=!!ta.normalized,V=ta.size|0,la=ta.offset|0,ia=ta.stride|0,da=ta.divisor|0);pd=r.location;Ec=
T[pd];if(1===$d){Ec.buffer||G.enableVertexAttribArray(pd);ed=V||2;if(Ec.type!==Ld||Ec.size!==ed||Ec.buffer!==va||Ec.normalized!==Ea||Ec.offset!==la||Ec.stride!==ia)G.bindBuffer(34962,va.buffer),G.vertexAttribPointer(pd,ed,Ld,Ea,ia,la),Ec.type=Ld,Ec.size=ed,Ec.buffer=va,Ec.normalized=Ea,Ec.offset=la,Ec.stride=ia;Ec.divisor!==da&&(ga.vertexAttribDivisorANGLE(pd,da),Ec.divisor=da)}else if(Ec.buffer&&(G.disableVertexAttribArray(pd),Ec.buffer=null),Ec.x!==$c||Ec.y!==sd||Ec.z!==Kc||Ec.w!==md)G.vertexAttrib4f(pd,
$c,sd,Kc,md),Ec.x=$c,Ec.y=sd,Ec.z=Kc,Ec.w=md;Fa.buffer=c.positionBuffer;Oc=!1;ld=null;Ab=0;Eb=!1;wb=tc=0;wc=1;Bb=0;Ic=5126;Vc=Wc=Fc=lc=0;ba(Fa)?(Oc=!0,ld=z.createStream(34962,Fa),Ic=ld.dtype):(ld=z.getBuffer(Fa))?Ic=ld.dtype:"constant"in Fa?(wc=2,"number"===typeof Fa.constant?(Fc=Fa.constant,Wc=Vc=lc=0):(Fc=0<Fa.constant.length?Fa.constant[0]:0,Wc=1<Fa.constant.length?Fa.constant[1]:0,Vc=2<Fa.constant.length?Fa.constant[2]:0,lc=3<Fa.constant.length?Fa.constant[3]:0)):(ld=ba(Fa.buffer)?z.createStream(34962,
Fa.buffer):z.getBuffer(Fa.buffer),Ic="type"in Fa?ka[Fa.type]:ld.dtype,Eb=!!Fa.normalized,wb=Fa.size|0,tc=Fa.offset|0,Bb=Fa.stride|0,Ab=Fa.divisor|0);Cc=k.location;ec=T[Cc];if(1===wc){ec.buffer||G.enableVertexAttribArray(Cc);Gc=wb||2;if(ec.type!==Ic||ec.size!==Gc||ec.buffer!==ld||ec.normalized!==Eb||ec.offset!==tc||ec.stride!==Bb)G.bindBuffer(34962,ld.buffer),G.vertexAttribPointer(Cc,Gc,Ic,Eb,Bb,tc),ec.type=Ic,ec.size=Gc,ec.buffer=ld,ec.normalized=Eb,ec.offset=tc,ec.stride=Bb;ec.divisor!==Ab&&(ga.vertexAttribDivisorANGLE(Cc,
Ab),ec.divisor=Ab)}else if(ec.buffer&&(G.disableVertexAttribArray(Cc),ec.buffer=null),ec.x!==Fc||ec.y!==Wc||ec.z!==Vc||ec.w!==lc)G.vertexAttrib4f(Cc,Fc,Wc,Vc,lc),ec.x=Fc,ec.y=Wc,ec.z=Vc,ec.w=lc;gb.buffer=c.positionBuffer;oc=!1;pc=null;mc=0;fc=!1;Hc=$a=0;xb=1;cb=0;Mb=5126;Tc=Va=nb=ab=0;ba(gb)?(oc=!0,pc=z.createStream(34962,gb),Mb=pc.dtype):(pc=z.getBuffer(gb))?Mb=pc.dtype:"constant"in gb?(xb=2,"number"===typeof gb.constant?(nb=gb.constant,Va=Tc=ab=0):(nb=0<gb.constant.length?gb.constant[0]:0,Va=1<
gb.constant.length?gb.constant[1]:0,Tc=2<gb.constant.length?gb.constant[2]:0,ab=3<gb.constant.length?gb.constant[3]:0)):(pc=ba(gb.buffer)?z.createStream(34962,gb.buffer):z.getBuffer(gb.buffer),Mb="type"in gb?ka[gb.type]:pc.dtype,fc=!!gb.normalized,Hc=gb.size|0,$a=gb.offset|0,cb=gb.stride|0,mc=gb.divisor|0);Hb=xa.location;Ib=T[Hb];if(1===xb){Ib.buffer||G.enableVertexAttribArray(Hb);qc=Hc||2;if(Ib.type!==Mb||Ib.size!==qc||Ib.buffer!==pc||Ib.normalized!==fc||Ib.offset!==$a||Ib.stride!==cb)G.bindBuffer(34962,
pc.buffer),G.vertexAttribPointer(Hb,qc,Mb,fc,cb,$a),Ib.type=Mb,Ib.size=qc,Ib.buffer=pc,Ib.normalized=fc,Ib.offset=$a,Ib.stride=cb;Ib.divisor!==mc&&(ga.vertexAttribDivisorANGLE(Hb,mc),Ib.divisor=mc)}else if(Ib.buffer&&(G.disableVertexAttribArray(Hb),Ib.buffer=null),Ib.x!==nb||Ib.y!==Va||Ib.z!==Tc||Ib.w!==ab)G.vertexAttrib4f(Hb,nb,Va,Tc,ab),Ib.x=nb,Ib.y=Va,Ib.z=Tc,Ib.w=ab;ca.buffer=c.positionBuffer;Nb=!1;jb=null;Fb=0;Cb=!1;hb=vb=0;Xb=1;Ob=0;pb=5126;ac=yb=Tb=Ua=0;ba(ca)?(Nb=!0,jb=z.createStream(34962,
ca),pb=jb.dtype):(jb=z.getBuffer(ca))?pb=jb.dtype:"constant"in ca?(Xb=2,"number"===typeof ca.constant?(Tb=ca.constant,yb=ac=Ua=0):(Tb=0<ca.constant.length?ca.constant[0]:0,yb=1<ca.constant.length?ca.constant[1]:0,ac=2<ca.constant.length?ca.constant[2]:0,Ua=3<ca.constant.length?ca.constant[3]:0)):(jb=ba(ca.buffer)?z.createStream(34962,ca.buffer):z.getBuffer(ca.buffer),pb="type"in ca?ka[ca.type]:jb.dtype,Cb=!!ca.normalized,hb=ca.size|0,vb=ca.offset|0,Ob=ca.stride|0,Fb=ca.divisor|0);ib=qa.location;ob=
T[ib];if(1===Xb){ob.buffer||G.enableVertexAttribArray(ib);Ia=hb||2;if(ob.type!==pb||ob.size!==Ia||ob.buffer!==jb||ob.normalized!==Cb||ob.offset!==vb||ob.stride!==Ob)G.bindBuffer(34962,jb.buffer),G.vertexAttribPointer(ib,Ia,pb,Cb,Ob,vb),ob.type=pb,ob.size=Ia,ob.buffer=jb,ob.normalized=Cb,ob.offset=vb,ob.stride=Ob;ob.divisor!==Fb&&(ga.vertexAttribDivisorANGLE(ib,Fb),ob.divisor=Fb)}else if(ob.buffer&&(G.disableVertexAttribArray(ib),ob.buffer=null),ob.x!==Tb||ob.y!==yb||ob.z!==ac||ob.w!==Ua)G.vertexAttrib4f(ib,
Tb,yb,ac,Ua),ob.x=Tb,ob.y=yb,ob.z=ac,ob.w=Ua;Z.buffer=c.colorBuffer;qb=!1;Ka=null;eb=0;fb=!1;kb=La=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=Pa=0;ba(Z)?(qb=!0,Ka=z.createStream(34962,Z),rb=Ka.dtype):(Ka=z.getBuffer(Z))?rb=Ka.dtype:"constant"in Z?(Wa=2,"number"===typeof Z.constant?(Bc=Z.constant,Ra=Jb=Pa=0):(Bc=0<Z.constant.length?Z.constant[0]:0,Ra=1<Z.constant.length?Z.constant[1]:0,Jb=2<Z.constant.length?Z.constant[2]:0,Pa=3<Z.constant.length?Z.constant[3]:0)):(Ka=ba(Z.buffer)?z.createStream(34962,Z.buffer):
z.getBuffer(Z.buffer),rb="type"in Z?ka[Z.type]:Ka.dtype,fb=!!Z.normalized,kb=Z.size|0,La=Z.offset|0,sb=Z.stride|0,eb=Z.divisor|0);Db=M.location;Na=T[Db];if(1===Wa){Na.buffer||G.enableVertexAttribArray(Db);Jd=kb||4;if(Na.type!==rb||Na.size!==Jd||Na.buffer!==Ka||Na.normalized!==fb||Na.offset!==La||Na.stride!==sb)G.bindBuffer(34962,Ka.buffer),G.vertexAttribPointer(Db,Jd,rb,fb,sb,La),Na.type=rb,Na.size=Jd,Na.buffer=Ka,Na.normalized=fb,Na.offset=La,Na.stride=sb;Na.divisor!==eb&&(ga.vertexAttribDivisorANGLE(Db,
eb),Na.divisor=eb)}else if(Na.buffer&&(G.disableVertexAttribArray(Db),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)G.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ja.buffer=c.colorBuffer;Ya=!1;Kb=null;Lb=0;lb=!1;Yb=Oa=0;Qa=1;tb=0;ub=5126;zc=gc=mb=Sa=0;ba(Ja)?(Ya=!0,Kb=z.createStream(34962,Ja),ub=Kb.dtype):(Kb=z.getBuffer(Ja))?ub=Kb.dtype:"constant"in Ja?(Qa=2,"number"===typeof Ja.constant?(mb=Ja.constant,gc=zc=Sa=0):(mb=0<Ja.constant.length?Ja.constant[0]:0,gc=1<Ja.constant.length?
Ja.constant[1]:0,zc=2<Ja.constant.length?Ja.constant[2]:0,Sa=3<Ja.constant.length?Ja.constant[3]:0)):(Kb=ba(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),ub="type"in Ja?ka[Ja.type]:Kb.dtype,lb=!!Ja.normalized,Yb=Ja.size|0,Oa=Ja.offset|0,tb=Ja.stride|0,Lb=Ja.divisor|0);uc=aa.location;bb=T[uc];if(1===Qa){bb.buffer||G.enableVertexAttribArray(uc);jc=Yb||4;if(bb.type!==ub||bb.size!==jc||bb.buffer!==Kb||bb.normalized!==lb||bb.offset!==Oa||bb.stride!==tb)G.bindBuffer(34962,Kb.buffer),
G.vertexAttribPointer(uc,jc,ub,lb,tb,Oa),bb.type=ub,bb.size=jc,bb.buffer=Kb,bb.normalized=lb,bb.offset=Oa,bb.stride=tb;bb.divisor!==Lb&&(ga.vertexAttribDivisorANGLE(uc,Lb),bb.divisor=Lb)}else if(bb.buffer&&(G.disableVertexAttribArray(uc),bb.buffer=null),bb.x!==mb||bb.y!==gc||bb.z!==zc||bb.w!==Sa)G.vertexAttrib4f(uc,mb,gc,zc,Sa),bb.x=mb,bb.y=gc,bb.z=zc,bb.w=Sa;nd=D.location;Xa=T[nd];Xa.buffer||G.enableVertexAttribArray(nd);if(5126!==Xa.type||1!==Xa.size||Xa.buffer!==g||!1!==Xa.normalized||0!==Xa.offset||
8!==Xa.stride)G.bindBuffer(34962,g.buffer),G.vertexAttribPointer(nd,1,5126,!1,8,0),Xa.type=5126,Xa.size=1,Xa.buffer=g,Xa.normalized=!1,Xa.offset=0,Xa.stride=8;0!==Xa.divisor&&(ga.vertexAttribDivisorANGLE(nd,0),Xa.divisor=0);Lc=d.location;zb=T[Lc];zb.buffer||G.enableVertexAttribArray(Lc);if(5126!==zb.type||1!==zb.size||zb.buffer!==f||!1!==zb.normalized||4!==zb.offset||8!==zb.stride)G.bindBuffer(34962,f.buffer),G.vertexAttribPointer(Lc,1,5126,!1,8,4),zb.type=5126,zb.size=1,zb.buffer=f,zb.normalized=
!1,zb.offset=4,zb.stride=8;0!==zb.divisor&&(ga.vertexAttribDivisorANGLE(Lc,0),zb.divisor=0);Za=c.scale;G.uniform2f(hd.location,Za[0],Za[1]);Ub=c.translate;G.uniform2f(ea.location,Ub[0],Ub[1]);G.uniform1f(Y.location,c.thickness);G.uniform1f(E.location,c.depth);sc=q.call(this,l,c,0);G.uniform4f(R.location,sc[0],sc[1],sc[2],sc[3]);G.uniform1f(P.location,c.miterLimit);Vb=e.call(this,l,c,0);G.uniform1f(b.location,Vb);G.uniform1f(w.location,c.dashLength);G.uniform1f(B.location,c.opacity);(Pb=c.dashTexture)&&
"framebuffer"===Pb._reglType&&(Pb=Pb.color[0]);Jc=Pb._texture;G.uniform1i(W.location,Jc.bind());(Qb=N.elements)?G.bindBuffer(34963,Qb.buffer.buffer):Ca.currentVAO&&(Qb=wa.getElements(Ca.currentVAO.elements))&&G.bindBuffer(34963,Qb.buffer.buffer);Xd=c.count;0<Xd?Qb?ga.drawElementsInstancedANGLE(5,4,Qb.type,0<<(Qb.type-5121>>1),Xd):ga.drawArraysInstancedANGLE(5,0,4,Xd):0>Xd&&(Qb?G.drawElements(5,4,Qb.type,0<<(Qb.type-5121>>1)):G.drawArrays(5,0,4));O.dirty=!0;Ca.setVAO(null);l.viewportWidth=C;l.viewportHeight=
x;Ba&&(X.cpuTime+=performance.now()-U);oa&&z.destroyStream(va);Oc&&z.destroyStream(ld);oc&&z.destroyStream(pc);Nb&&z.destroyStream(jb);qb&&z.destroyStream(Ka);Ya&&z.destroyStream(Kb);Jc.unbind()},scope:function(b,d,c){var h,e,a,k,n,p,v,q,H,I,r,ma,B,w,sa,Ma,G,Ga,T,cc,ra,fa,ha,R,J,E,D,ua,M,F,P,Da,Q,wa,ja,Ta,Y,ga,aa,ya,ea,W,Gb,na,xa,qa,Ca,dd,V,hd,fc,$a,ia,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,
tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,Aa,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;h=b.viewport;e=h.x|0;a=h.y|0;k="width"in h?h.width|0:l.framebufferWidth-
e;n="height"in h?h.height|0:l.framebufferHeight-a;p=l.viewportWidth;l.viewportWidth=k;v=l.viewportHeight;l.viewportHeight=n;q=za[0];za[0]=e;H=za[1];za[1]=a;I=za[2];za[2]=k;r=za[3];za[3]=n;ma=Ba[0];Ba[0]=0;B=Ba[1];Ba[1]=0;w=Ba[2];Ba[2]=0;sa=Ba[3];Ba[3]=0;Ma=S.blend_enable;S.blend_enable=!0;G=Ea[0];Ea[0]=32774;Ga=Ea[1];Ea[1]=32774;T=oa[0];oa[0]=770;cc=oa[1];oa[1]=771;ra=oa[2];oa[2]=773;fa=oa[3];oa[3]=1;ha=S.cull_enable;S.cull_enable=!0;R=S.cull_face;S.cull_face=1029;J=x.call(this,l,b,c);E=S.depth_enable;
S.depth_enable=J;D=b.viewport;ua=D.x|0;M=D.y|0;F="width"in D?D.width|0:l.framebufferWidth-ua;P="height"in D?D.height|0:l.framebufferHeight-M;Da=va[0];va[0]=ua;Q=va[1];va[1]=M;wa=va[2];va[2]=F;ja=va[3];va[3]=P;Ta=S.scissor_enable;S.scissor_enable=!0;Y=S.stencil_enable;S.stencil_enable=!1;if(ga=O.profile)aa=performance.now(),X.count++;ya=N.offset;N.offset=0;ea=N.count;N.count=4;W=b.count;Gb=N.instances;N.instances=W;na=N.primitive;N.primitive=5;xa=b.dashLength;qa=pa[23];pa[23]=xa;Ca=b.dashTexture;dd=
pa[24];pa[24]=Ca;V=b.depth;hd=pa[22];pa[22]=V;fc=b.id;$a=pa[31];pa[31]=fc;ia=b.miterLimit;xb=pa[32];pa[32]=ia;cb=C.call(this,l,b,c);Mb=pa[33];pa[33]=cb;ab=b.opacity;nb=pa[10];pa[10]=ab;Va=l.pixelRatio;Tc=pa[34];pa[34]=Va;Hb=b.scale;Ib=pa[6];pa[6]=Hb;qc=b.scaleFract;Nb=pa[7];pa[7]=qc;jb=b.thickness;Fb=pa[21];pa[21]=jb;Cb=b.translate;vb=pa[8];pa[8]=Cb;hb=b.translateFract;Xb=pa[9];pa[9]=hb;Ob=L.call(this,l,b,c);pb=pa[3];pa[3]=Ob;Z.buffer=b.colorBuffer;Ua=!1;Tb=null;yb=0;ac=!1;ob=ib=0;Ia=1;qb=0;Ka=5126;
kb=La=fb=eb=0;ba(Z)?(Ua=!0,Tb=z.createStream(34962,Z),Ka=Tb.dtype):(Tb=z.getBuffer(Z))?Ka=Tb.dtype:"constant"in Z?(Ia=2,"number"===typeof Z.constant?(fb=Z.constant,La=kb=eb=0):(fb=0<Z.constant.length?Z.constant[0]:0,La=1<Z.constant.length?Z.constant[1]:0,kb=2<Z.constant.length?Z.constant[2]:0,eb=3<Z.constant.length?Z.constant[3]:0)):(Tb=ba(Z.buffer)?z.createStream(34962,Z.buffer):z.getBuffer(Z.buffer),Ka="type"in Z?ka[Z.type]:Tb.dtype,ac=!!Z.normalized,ob=Z.size|0,ib=Z.offset|0,qb=Z.stride|0,yb=Z.divisor|
0);Wa=K.buffer;K.buffer=Tb;sb=K.divisor;K.divisor=yb;rb=K.normalized;K.normalized=ac;Pa=K.offset;K.offset=ib;Bc=K.size;K.size=ob;Ra=K.state;K.state=Ia;Jb=K.stride;K.stride=qb;Db=K.type;K.type=Ka;Na=K.w;K.w=eb;Jd=K.x;K.x=fb;Ya=K.y;K.y=La;Kb=K.z;K.z=kb;ta.buffer=b.positionBuffer;Lb=!1;lb=null;Oa=0;Yb=!1;tb=Qa=0;ub=1;Sa=0;mb=5126;bb=uc=zc=gc=0;ba(ta)?(Lb=!0,lb=z.createStream(34962,ta),mb=lb.dtype):(lb=z.getBuffer(ta))?mb=lb.dtype:"constant"in ta?(ub=2,"number"===typeof ta.constant?(zc=ta.constant,uc=
bb=gc=0):(zc=0<ta.constant.length?ta.constant[0]:0,uc=1<ta.constant.length?ta.constant[1]:0,bb=2<ta.constant.length?ta.constant[2]:0,gc=3<ta.constant.length?ta.constant[3]:0)):(lb=ba(ta.buffer)?z.createStream(34962,ta.buffer):z.getBuffer(ta.buffer),mb="type"in ta?ka[ta.type]:lb.dtype,Yb=!!ta.normalized,tb=ta.size|0,Qa=ta.offset|0,Sa=ta.stride|0,Oa=ta.divisor|0);jc=A.buffer;A.buffer=lb;nd=A.divisor;A.divisor=Oa;Xa=A.normalized;A.normalized=Yb;Lc=A.offset;A.offset=Qa;zb=A.size;A.size=tb;Za=A.state;
A.state=ub;Ub=A.stride;A.stride=Sa;sc=A.type;A.type=mb;Vb=A.w;A.w=gc;Pb=A.x;A.x=zc;Jc=A.y;A.y=uc;Qb=A.z;A.z=bb;Ja.buffer=b.colorBuffer;Xd=!1;Dc=null;ud=0;Mc=!1;qd=fd=0;nc=1;vc=0;hc=5126;Wb=Sb=rc=db=0;ba(Ja)?(Xd=!0,Dc=z.createStream(34962,Ja),hc=Dc.dtype):(Dc=z.getBuffer(Ja))?hc=Dc.dtype:"constant"in Ja?(nc=2,"number"===typeof Ja.constant?(rc=Ja.constant,Sb=Wb=db=0):(rc=0<Ja.constant.length?Ja.constant[0]:0,Sb=1<Ja.constant.length?Ja.constant[1]:0,Wb=2<Ja.constant.length?Ja.constant[2]:0,db=3<Ja.constant.length?
Ja.constant[3]:0)):(Dc=ba(Ja.buffer)?z.createStream(34962,Ja.buffer):z.getBuffer(Ja.buffer),hc="type"in Ja?ka[Ja.type]:Dc.dtype,Mc=!!Ja.normalized,qd=Ja.size|0,fd=Ja.offset|0,vc=Ja.stride|0,ud=Ja.divisor|0);dc=m.buffer;m.buffer=Dc;ic=m.divisor;m.divisor=ud;xc=m.normalized;m.normalized=Mc;Ac=m.offset;m.offset=fd;ad=m.size;m.size=qd;Pc=m.state;m.state=nc;Qc=m.stride;m.stride=vc;Rc=m.type;m.type=hc;Xc=m.w;m.w=db;wd=m.x;m.x=rc;bd=m.y;m.y=Sb;Yc=m.z;m.z=Wb;Fa.buffer=b.positionBuffer;kc=!1;bc=null;Zc=0;
Uc=!1;yc=cd=0;id=1;Dd=0;ye=5126;Nd=Aa=jd=xd=0;ba(Fa)?(kc=!0,bc=z.createStream(34962,Fa),ye=bc.dtype):(bc=z.getBuffer(Fa))?ye=bc.dtype:"constant"in Fa?(id=2,"number"===typeof Fa.constant?(jd=Fa.constant,Aa=Nd=xd=0):(jd=0<Fa.constant.length?Fa.constant[0]:0,Aa=1<Fa.constant.length?Fa.constant[1]:0,Nd=2<Fa.constant.length?Fa.constant[2]:0,xd=3<Fa.constant.length?Fa.constant[3]:0)):(bc=ba(Fa.buffer)?z.createStream(34962,Fa.buffer):z.getBuffer(Fa.buffer),ye="type"in Fa?ka[Fa.type]:bc.dtype,Uc=!!Fa.normalized,
yc=Fa.size|0,cd=Fa.offset|0,Dd=Fa.stride|0,Zc=Fa.divisor|0);Yd=t.buffer;t.buffer=bc;de=t.divisor;t.divisor=Zc;Od=t.normalized;t.normalized=Uc;Id=t.offset;t.offset=cd;Gd=t.size;t.size=yc;od=t.state;t.state=id;Sc=t.stride;t.stride=Dd;vd=t.type;t.type=ye;td=t.w;t.w=xd;kd=t.x;t.x=jd;yd=t.y;t.y=Aa;Ad=t.z;t.z=Nd;Ed=da.buffer;da.buffer=g;pe=da.divisor;da.divisor=0;je=da.normalized;da.normalized=!1;Ne=da.offset;da.offset=0;ke=da.size;da.size=0;ie=da.state;da.state=1;he=da.stride;da.stride=8;ue=da.type;da.type=
5126;ee=da.w;da.w=0;le=da.x;da.x=0;Nc=da.y;da.y=0;gd=da.z;da.z=0;ve=y.buffer;y.buffer=f;qe=y.divisor;y.divisor=0;Kd=y.normalized;y.normalized=!1;Pd=y.offset;y.offset=4;Qd=y.size;y.size=0;Rd=y.state;y.state=1;me=y.stride;y.stride=8;Ae=y.type;y.type=5126;Ce=y.w;y.w=0;re=y.x;y.x=0;Se=y.y;y.y=0;Te=y.z;y.z=0;gb.buffer=b.positionBuffer;Oe=!1;we=null;Ge=0;Ie=!1;Ke=Je=0;He=1;Md=0;Zd=5126;Hd=Le=fe=ce=0;ba(gb)?(Oe=!0,we=z.createStream(34962,gb),Zd=we.dtype):(we=z.getBuffer(gb))?Zd=we.dtype:"constant"in gb?
(He=2,"number"===typeof gb.constant?(fe=gb.constant,Le=Hd=ce=0):(fe=0<gb.constant.length?gb.constant[0]:0,Le=1<gb.constant.length?gb.constant[1]:0,Hd=2<gb.constant.length?gb.constant[2]:0,ce=3<gb.constant.length?gb.constant[3]:0)):(we=ba(gb.buffer)?z.createStream(34962,gb.buffer):z.getBuffer(gb.buffer),Zd="type"in gb?ka[gb.type]:we.dtype,Ie=!!gb.normalized,Ke=gb.size|0,Je=gb.offset|0,Md=gb.stride|0,Ge=gb.divisor|0);Sd=U.buffer;U.buffer=we;Ee=U.divisor;U.divisor=Ge;Me=U.normalized;U.normalized=Ie;
bf=U.offset;U.offset=Je;af=U.size;U.size=Ke;Ue=U.state;U.state=He;Pe=U.stride;U.stride=Md;$e=U.type;U.type=Zd;Ye=U.w;U.w=ce;Ve=U.x;U.x=fe;We=U.y;U.y=Le;Td=U.z;U.z=Hd;ca.buffer=b.positionBuffer;ae=!1;Xe=null;hf=0;mf=!1;jf=ef=0;kf=1;lf=0;qf=5126;Cf=Bf=rf=nf=0;ba(ca)?(ae=!0,Xe=z.createStream(34962,ca),qf=Xe.dtype):(Xe=z.getBuffer(ca))?qf=Xe.dtype:"constant"in ca?(kf=2,"number"===typeof ca.constant?(rf=ca.constant,Bf=Cf=nf=0):(rf=0<ca.constant.length?ca.constant[0]:0,Bf=1<ca.constant.length?ca.constant[1]:
0,Cf=2<ca.constant.length?ca.constant[2]:0,nf=3<ca.constant.length?ca.constant[3]:0)):(Xe=ba(ca.buffer)?z.createStream(34962,ca.buffer):z.getBuffer(ca.buffer),qf="type"in ca?ka[ca.type]:Xe.dtype,mf=!!ca.normalized,jf=ca.size|0,ef=ca.offset|0,lf=ca.stride|0,hf=ca.divisor|0);Qe=u.buffer;u.buffer=Xe;Fe=u.divisor;u.divisor=hf;of=u.normalized;u.normalized=mf;pf=u.offset;u.offset=ef;Df=u.size;u.size=jf;Gf=u.state;u.state=kf;Af=u.stride;u.stride=lf;Ef=u.type;u.type=qf;Ff=u.w;u.w=nf;wf=u.x;u.x=rf;xf=u.y;
u.y=Bf;vf=u.z;u.z=Cf;yf=la.vert;la.vert=36;zf=la.frag;la.frag=35;O.dirty=!0;d(l,b,c);l.viewportWidth=p;l.viewportHeight=v;za[0]=q;za[1]=H;za[2]=I;za[3]=r;Ba[0]=ma;Ba[1]=B;Ba[2]=w;Ba[3]=sa;S.blend_enable=Ma;Ea[0]=G;Ea[1]=Ga;oa[0]=T;oa[1]=cc;oa[2]=ra;oa[3]=fa;S.cull_enable=ha;S.cull_face=R;S.depth_enable=E;va[0]=Da;va[1]=Q;va[2]=wa;va[3]=ja;S.scissor_enable=Ta;S.stencil_enable=Y;ga&&(X.cpuTime+=performance.now()-aa);N.offset=ya;N.count=ea;N.instances=Gb;N.primitive=na;pa[23]=qa;pa[24]=dd;pa[22]=hd;
pa[31]=$a;pa[32]=xb;pa[33]=Mb;pa[10]=nb;pa[34]=Tc;pa[6]=Ib;pa[7]=Nb;pa[21]=Fb;pa[8]=vb;pa[9]=Xb;pa[3]=pb;Ua&&z.destroyStream(Tb);K.buffer=Wa;K.divisor=sb;K.normalized=rb;K.offset=Pa;K.size=Bc;K.state=Ra;K.stride=Jb;K.type=Db;K.w=Na;K.x=Jd;K.y=Ya;K.z=Kb;Lb&&z.destroyStream(lb);A.buffer=jc;A.divisor=nd;A.normalized=Xa;A.offset=Lc;A.size=zb;A.state=Za;A.stride=Ub;A.type=sc;A.w=Vb;A.x=Pb;A.y=Jc;A.z=Qb;Xd&&z.destroyStream(Dc);m.buffer=dc;m.divisor=ic;m.normalized=xc;m.offset=Ac;m.size=ad;m.state=Pc;m.stride=
Qc;m.type=Rc;m.w=Xc;m.x=wd;m.y=bd;m.z=Yc;kc&&z.destroyStream(bc);t.buffer=Yd;t.divisor=de;t.normalized=Od;t.offset=Id;t.size=Gd;t.state=od;t.stride=Sc;t.type=vd;t.w=td;t.x=kd;t.y=yd;t.z=Ad;da.buffer=Ed;da.divisor=pe;da.normalized=je;da.offset=Ne;da.size=ke;da.state=ie;da.stride=he;da.type=ue;da.w=ee;da.x=le;da.y=Nc;da.z=gd;y.buffer=ve;y.divisor=qe;y.normalized=Kd;y.offset=Pd;y.size=Qd;y.state=Rd;y.stride=me;y.type=Ae;y.w=Ce;y.x=re;y.y=Se;y.z=Te;Oe&&z.destroyStream(we);U.buffer=Sd;U.divisor=Ee;U.normalized=
Me;U.offset=bf;U.size=af;U.state=Ue;U.stride=Pe;U.type=$e;U.w=Ye;U.x=Ve;U.y=We;U.z=Td;ae&&z.destroyStream(Xe);u.buffer=Qe;u.divisor=Fe;u.normalized=of;u.offset=pf;u.size=Df;u.state=Gf;u.stride=Af;u.type=Ef;u.w=Ff;u.x=wf;u.y=xf;u.z=vf;la.vert=yf;la.frag=zf;O.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u){var Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,
ja,oa;Q=a.attributes;ga=a.buffer;c=a.context;h=a.current;M=a.draw;r=a.elements;aa=a.extensions;k=a.framebuffer;w=a.gl;W=a.isBufferArgs;E=a.next;D=a.shader;d=a.uniforms;P=a.vao;b=E.blend_color;xa=h.blend_color;B=E.blend_equation;qa=h.blend_equation;V=E.blend_func;Y=h.blend_func;ea=E.colorMask;R=h.colorMask;T=E.depth_range;z=h.depth_range;l=E.polygonOffset_offset;O=h.polygonOffset_offset;N=E.sample_coverage;wa=h.sample_coverage;na=E.scissor_box;n=h.scissor_box;G=E.stencil_func;ba=h.stencil_func;S=E.stencil_opBack;
la=h.stencil_opBack;pa=E.stencil_opFront;Ca=h.stencil_opFront;Ba=E.viewport;fa=h.viewport;Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ja={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(b,d){var f,e,a,v,p,q;f=k.next;f!==k.cur&&(f?w.bindFramebuffer(36160,f.framebuffer):w.bindFramebuffer(36160,null),k.cur=f);if(h.dirty){var g,B,J,D,ha,H,sa,Ga,ra,za,F,ka,Z,Ba,na,V,gb,ca,hd,Zb,Ha,$b,Rb,ia,Bd,oe,Vd,ze,Aa,Ud,ne,xe;g=E.dither;g!==h.dither&&
(g?w.enable(3024):w.disable(3024),h.dither=g);B=E.depth_func;B!==h.depth_func&&(w.depthFunc(B),h.depth_func=B);J=T[0];D=T[1];if(J!==z[0]||D!==z[1])w.depthRange(J,D),z[0]=J,z[1]=D;ha=E.depth_mask;ha!==h.depth_mask&&(w.depthMask(ha),h.depth_mask=ha);H=ea[0];sa=ea[1];Ga=ea[2];ra=ea[3];if(H!==R[0]||sa!==R[1]||Ga!==R[2]||ra!==R[3])w.colorMask(H,sa,Ga,ra),R[0]=H,R[1]=sa,R[2]=Ga,R[3]=ra;za=E.cull_enable;za!==h.cull_enable&&(za?w.enable(2884):w.disable(2884),h.cull_enable=za);F=E.cull_face;F!==h.cull_face&&
(w.cullFace(F),h.cull_face=F);ka=E.frontFace;ka!==h.frontFace&&(w.frontFace(ka),h.frontFace=ka);Z=E.lineWidth;Z!==h.lineWidth&&(w.lineWidth(Z),h.lineWidth=Z);Ba=E.polygonOffset_enable;Ba!==h.polygonOffset_enable&&(Ba?w.enable(32823):w.disable(32823),h.polygonOffset_enable=Ba);na=l[0];V=l[1];if(na!==O[0]||V!==O[1])w.polygonOffset(na,V),O[0]=na,O[1]=V;gb=E.sample_alpha;gb!==h.sample_alpha&&(gb?w.enable(32926):w.disable(32926),h.sample_alpha=gb);ca=E.sample_enable;ca!==h.sample_enable&&(ca?w.enable(32928):
w.disable(32928),h.sample_enable=ca);hd=N[0];Zb=N[1];if(hd!==wa[0]||Zb!==wa[1])w.sampleCoverage(hd,Zb),wa[0]=hd,wa[1]=Zb;Ha=E.stencil_mask;Ha!==h.stencil_mask&&(w.stencilMask(Ha),h.stencil_mask=Ha);$b=G[0];Rb=G[1];ia=G[2];if($b!==ba[0]||Rb!==ba[1]||ia!==ba[2])w.stencilFunc($b,Rb,ia),ba[0]=$b,ba[1]=Rb,ba[2]=ia;Bd=pa[0];oe=pa[1];Vd=pa[2];ze=pa[3];if(Bd!==Ca[0]||oe!==Ca[1]||Vd!==Ca[2]||ze!==Ca[3])w.stencilOpSeparate(Bd,oe,Vd,ze),Ca[0]=Bd,Ca[1]=oe,Ca[2]=Vd,Ca[3]=ze;Aa=S[0];Ud=S[1];ne=S[2];xe=S[3];if(Aa!==
la[0]||Ud!==la[1]||ne!==la[2]||xe!==la[3])w.stencilOpSeparate(Aa,Ud,ne,xe),la[0]=Aa,la[1]=Ud,la[2]=ne,la[3]=xe}w.blendColor(0,0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;w.enable(3042);h.blend_enable=!0;w.blendEquationSeparate(32774,32774);qa[0]=32774;qa[1]=32774;w.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;w.disable(2929);h.depth_enable=!1;w.enable(3089);h.scissor_enable=!0;w.disable(2960);h.stencil_enable=!1;if(e=h.profile)a=performance.now(),X.count+=d;w.useProgram(x.program);
v=aa.angle_instanced_arrays;var Cd;P.setVAO(null);Cd=M.instances;for(p=0;p<d;++p){q=b[p];var rd,ge,be,De,Ze,Re,Fd,Be,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db;rd=q.viewport;ge=rd.x|0;be=rd.y|0;De="width"in rd?rd.width|0:c.framebufferWidth-ge;Ze="height"in rd?rd.height|0:c.framebufferHeight-be;Re=c.viewportWidth;c.viewportWidth=
De;Fd=c.viewportHeight;c.viewportHeight=Ze;w.viewport(ge,be,De,Ze);fa[0]=ge;fa[1]=be;fa[2]=De;fa[3]=Ze;Be=q.viewport;te=Be.x|0;$d=Be.y|0;Wd="width"in Be?Be.width|0:c.framebufferWidth-te;Ld="height"in Be?Be.height|0:c.framebufferHeight-$d;w.scissor(te,$d,Wd,Ld);n[0]=te;n[1]=$d;n[2]=Wd;n[3]=Ld;ja.buffer=q.positionBuffer;md=!1;$c=null;sd=0;Kc=!1;Ec=pd=0;ed=1;Oc=0;ld=5126;wb=tc=Eb=Ab=0;W(ja)?(md=!0,$c=ga.createStream(34962,ja),ld=$c.dtype):($c=ga.getBuffer(ja))?ld=$c.dtype:"constant"in ja?(ed=2,"number"===
typeof ja.constant?(Eb=ja.constant,tc=wb=Ab=0):(Eb=0<ja.constant.length?ja.constant[0]:0,tc=1<ja.constant.length?ja.constant[1]:0,wb=2<ja.constant.length?ja.constant[2]:0,Ab=3<ja.constant.length?ja.constant[3]:0)):($c=W(ja.buffer)?ga.createStream(34962,ja.buffer):ga.getBuffer(ja.buffer),ld="type"in ja?Ea[ja.type]:$c.dtype,Kc=!!ja.normalized,Ec=ja.size|0,pd=ja.offset|0,Oc=ja.stride|0,sd=ja.divisor|0);wc=m.location;Bb=Q[wc];if(1===ed){Bb.buffer||w.enableVertexAttribArray(wc);Ic=Ec||2;if(Bb.type!==ld||
Bb.size!==Ic||Bb.buffer!==$c||Bb.normalized!==Kc||Bb.offset!==pd||Bb.stride!==Oc)w.bindBuffer(34962,$c.buffer),w.vertexAttribPointer(wc,Ic,ld,Kc,Oc,pd),Bb.type=ld,Bb.size=Ic,Bb.buffer=$c,Bb.normalized=Kc,Bb.offset=pd,Bb.stride=Oc;Bb.divisor!==sd&&(v.vertexAttribDivisorANGLE(wc,sd),Bb.divisor=sd)}else if(Bb.buffer&&(w.disableVertexAttribArray(wc),Bb.buffer=null),Bb.x!==Eb||Bb.y!==tc||Bb.z!==wb||Bb.w!==Ab)w.vertexAttrib4f(wc,Eb,tc,wb,Ab),Bb.x=Eb,Bb.y=tc,Bb.z=wb,Bb.w=Ab;oa.buffer=q.positionFractBuffer;
lc=!1;Fc=null;Wc=0;Vc=!1;ec=Cc=0;Gc=1;oc=0;pc=5126;Hc=$a=fc=mc=0;W(oa)?(lc=!0,Fc=ga.createStream(34962,oa),pc=Fc.dtype):(Fc=ga.getBuffer(oa))?pc=Fc.dtype:"constant"in oa?(Gc=2,"number"===typeof oa.constant?(fc=oa.constant,$a=Hc=mc=0):(fc=0<oa.constant.length?oa.constant[0]:0,$a=1<oa.constant.length?oa.constant[1]:0,Hc=2<oa.constant.length?oa.constant[2]:0,mc=3<oa.constant.length?oa.constant[3]:0)):(Fc=W(oa.buffer)?ga.createStream(34962,oa.buffer):ga.getBuffer(oa.buffer),pc="type"in oa?Ea[oa.type]:
Fc.dtype,Vc=!!oa.normalized,ec=oa.size|0,Cc=oa.offset|0,oc=oa.stride|0,Wc=oa.divisor|0);xb=t.location;cb=Q[xb];if(1===Gc){cb.buffer||w.enableVertexAttribArray(xb);Mb=ec||2;if(cb.type!==pc||cb.size!==Mb||cb.buffer!==Fc||cb.normalized!==Vc||cb.offset!==Cc||cb.stride!==oc)w.bindBuffer(34962,Fc.buffer),w.vertexAttribPointer(xb,Mb,pc,Vc,oc,Cc),cb.type=pc,cb.size=Mb,cb.buffer=Fc,cb.normalized=Vc,cb.offset=Cc,cb.stride=oc;cb.divisor!==Wc&&(v.vertexAttribDivisorANGLE(xb,Wc),cb.divisor=Wc)}else if(cb.buffer&&
(w.disableVertexAttribArray(xb),cb.buffer=null),cb.x!==fc||cb.y!==$a||cb.z!==Hc||cb.w!==mc)w.vertexAttrib4f(xb,fc,$a,Hc,mc),cb.x=fc,cb.y=$a,cb.z=Hc,cb.w=mc;ab=q.fill;nb=ab[0];Tc=ab[1];Ib=ab[2];Nb=ab[3];p&&Va===nb&&Hb===Tc&&qc===Ib&&jb===Nb||(Va=nb,Hb=Tc,qc=Ib,jb=Nb,w.uniform4f(L.location,nb,Tc,Ib,Nb));Fb=q.scale;Cb=Fb[0];hb=Fb[1];p&&vb===Cb&&Xb===hb||(vb=Cb,Xb=hb,w.uniform2f(da.location,Cb,hb));Ob=q.scaleFract;pb=Ob[0];Tb=Ob[1];p&&Ua===pb&&yb===Tb||(Ua=pb,yb=Tb,w.uniform2f(y.location,pb,Tb));ac=q.translate;
ib=ac[0];Ia=ac[1];p&&ob===ib&&qb===Ia||(ob=ib,qb=Ia,w.uniform2f(U.location,ib,Ia));Ka=q.translateFract;eb=Ka[0];La=Ka[1];p&&fb===eb&&kb===La||(fb=eb,kb=La,w.uniform2f(u.location,eb,La));Wa=q.id;p&&sb===Wa||(sb=Wa,w.uniform1f(K.location,Wa));rb=q.opacity;p&&Pa===rb||(Pa=rb,w.uniform1f(A.location,rb));Bc=C.call(this,c,q,p);Ra=null;(Ra=(Jb=W(Bc))?r.createStream(Bc):r.getElements(Bc))&&w.bindBuffer(34963,Ra.buffer.buffer);if(Db=Ra?Ra.vertCount:-1)0<Cd?Ra?v.drawElementsInstancedANGLE(4,Db,Ra.type,0<<(Ra.type-
5121>>1),Cd):v.drawArraysInstancedANGLE(4,0,Db,Cd):0>Cd&&(Ra?w.drawElements(4,Db,Ra.type,0<<(Ra.type-5121>>1)):w.drawArrays(4,0,Db)),c.viewportWidth=Re,c.viewportHeight=Fd,md&&ga.destroyStream($c),lc&&ga.destroyStream(Fc),Jb&&r.destroyStream(Ra)}h.dirty=!0;P.setVAO(null);e&&(X.cpuTime+=performance.now()-a)},draw:function(b){var d,f,e,a,v,p,q,g,B,D,C,ha,H,sa,Ga,ra,x,Da,ka,Z,Ba,na;d=k.next;d!==k.cur&&(d?w.bindFramebuffer(36160,d.framebuffer):w.bindFramebuffer(36160,null),k.cur=d);if(h.dirty){d=E.dither;
d!==h.dither&&(d?w.enable(3024):w.disable(3024),h.dither=d);d=E.depth_func;d!==h.depth_func&&(w.depthFunc(d),h.depth_func=d);d=T[0];p=T[1];if(d!==z[0]||p!==z[1])w.depthRange(d,p),z[0]=d,z[1]=p;d=E.depth_mask;d!==h.depth_mask&&(w.depthMask(d),h.depth_mask=d);d=ea[0];p=ea[1];f=ea[2];e=ea[3];if(d!==R[0]||p!==R[1]||f!==R[2]||e!==R[3])w.colorMask(d,p,f,e),R[0]=d,R[1]=p,R[2]=f,R[3]=e;d=E.cull_enable;d!==h.cull_enable&&(d?w.enable(2884):w.disable(2884),h.cull_enable=d);d=E.cull_face;d!==h.cull_face&&(w.cullFace(d),
h.cull_face=d);d=E.frontFace;d!==h.frontFace&&(w.frontFace(d),h.frontFace=d);d=E.lineWidth;d!==h.lineWidth&&(w.lineWidth(d),h.lineWidth=d);d=E.polygonOffset_enable;d!==h.polygonOffset_enable&&(d?w.enable(32823):w.disable(32823),h.polygonOffset_enable=d);d=l[0];p=l[1];if(d!==O[0]||p!==O[1])w.polygonOffset(d,p),O[0]=d,O[1]=p;d=E.sample_alpha;d!==h.sample_alpha&&(d?w.enable(32926):w.disable(32926),h.sample_alpha=d);d=E.sample_enable;d!==h.sample_enable&&(d?w.enable(32928):w.disable(32928),h.sample_enable=
d);d=N[0];p=N[1];if(d!==wa[0]||p!==wa[1])w.sampleCoverage(d,p),wa[0]=d,wa[1]=p;d=E.stencil_mask;d!==h.stencil_mask&&(w.stencilMask(d),h.stencil_mask=d);d=G[0];p=G[1];f=G[2];if(d!==ba[0]||p!==ba[1]||f!==ba[2])w.stencilFunc(d,p,f),ba[0]=d,ba[1]=p,ba[2]=f;d=pa[0];p=pa[1];f=pa[2];e=pa[3];if(d!==Ca[0]||p!==Ca[1]||f!==Ca[2]||e!==Ca[3])w.stencilOpSeparate(d,p,f,e),Ca[0]=d,Ca[1]=p,Ca[2]=f,Ca[3]=e;d=S[0];p=S[1];f=S[2];e=S[3];if(d!==la[0]||p!==la[1]||f!==la[2]||e!==la[3])w.stencilOpSeparate(d,p,f,e),la[0]=
d,la[1]=p,la[2]=f,la[3]=e}d=b.viewport;f=d.x|0;e=d.y|0;a="width"in d?d.width|0:c.framebufferWidth-f;v="height"in d?d.height|0:c.framebufferHeight-e;d=c.viewportWidth;c.viewportWidth=a;p=c.viewportHeight;c.viewportHeight=v;w.viewport(f,e,a,v);fa[0]=f;fa[1]=e;fa[2]=a;fa[3]=v;w.blendColor(0,0,0,0);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=0;w.enable(3042);h.blend_enable=!0;w.blendEquationSeparate(32774,32774);qa[0]=32774;qa[1]=32774;w.blendFuncSeparate(770,771,773,1);Y[0]=770;Y[1]=771;Y[2]=773;Y[3]=1;w.disable(2929);
h.depth_enable=!1;v=b.viewport;f=v.x|0;e=v.y|0;a="width"in v?v.width|0:c.framebufferWidth-f;v="height"in v?v.height|0:c.framebufferHeight-e;w.scissor(f,e,a,v);n[0]=f;n[1]=e;n[2]=a;n[3]=v;w.enable(3089);h.scissor_enable=!0;w.disable(2960);h.stencil_enable=!1;if(f=h.profile)q=performance.now(),X.count++;w.useProgram(F.program);e=aa.angle_instanced_arrays;P.setVAO(null);ja.buffer=b.positionBuffer;a=!1;g=0;B=!1;C=D=0;ha=1;H=0;sa=5126;Da=x=ra=Ga=0;W(ja)?(a=!0,v=ga.createStream(34962,ja),sa=v.dtype):(v=
ga.getBuffer(ja))?sa=v.dtype:"constant"in ja?(ha=2,"number"===typeof ja.constant?(ra=ja.constant,x=Da=Ga=0):(ra=0<ja.constant.length?ja.constant[0]:0,x=1<ja.constant.length?ja.constant[1]:0,Da=2<ja.constant.length?ja.constant[2]:0,Ga=3<ja.constant.length?ja.constant[3]:0)):(v=W(ja.buffer)?ga.createStream(34962,ja.buffer):ga.getBuffer(ja.buffer),sa="type"in ja?Ea[ja.type]:v.dtype,B=!!ja.normalized,C=ja.size|0,D=ja.offset|0,H=ja.stride|0,g=ja.divisor|0);ka=m.location;Z=Q[ka];if(1===ha){Z.buffer||w.enableVertexAttribArray(ka);
C=C||2;if(Z.type!==sa||Z.size!==C||Z.buffer!==v||Z.normalized!==B||Z.offset!==D||Z.stride!==H)w.bindBuffer(34962,v.buffer),w.vertexAttribPointer(ka,C,sa,B,H,D),Z.type=sa,Z.size=C,Z.buffer=v,Z.normalized=B,Z.offset=D,Z.stride=H;Z.divisor!==g&&(e.vertexAttribDivisorANGLE(ka,g),Z.divisor=g)}else if(Z.buffer&&(w.disableVertexAttribArray(ka),Z.buffer=null),Z.x!==ra||Z.y!==x||Z.z!==Da||Z.w!==Ga)w.vertexAttrib4f(ka,ra,x,Da,Ga),Z.x=ra,Z.y=x,Z.z=Da,Z.w=Ga;oa.buffer=b.positionFractBuffer;g=!1;D=0;H=!1;Ga=sa=
0;ra=1;ka=0;Z=5126;na=Ba=Da=x=0;W(oa)?(g=!0,B=ga.createStream(34962,oa),Z=B.dtype):(B=ga.getBuffer(oa))?Z=B.dtype:"constant"in oa?(ra=2,"number"===typeof oa.constant?(Da=oa.constant,Ba=na=x=0):(Da=0<oa.constant.length?oa.constant[0]:0,Ba=1<oa.constant.length?oa.constant[1]:0,na=2<oa.constant.length?oa.constant[2]:0,x=3<oa.constant.length?oa.constant[3]:0)):(B=W(oa.buffer)?ga.createStream(34962,oa.buffer):ga.getBuffer(oa.buffer),Z="type"in oa?Ea[oa.type]:B.dtype,H=!!oa.normalized,Ga=oa.size|0,sa=oa.offset|
0,ka=oa.stride|0,D=oa.divisor|0);C=t.location;ha=Q[C];if(1===ra){ha.buffer||w.enableVertexAttribArray(C);Ga=Ga||2;if(ha.type!==Z||ha.size!==Ga||ha.buffer!==B||ha.normalized!==H||ha.offset!==sa||ha.stride!==ka)w.bindBuffer(34962,B.buffer),w.vertexAttribPointer(C,Ga,Z,H,ka,sa),ha.type=Z,ha.size=Ga,ha.buffer=B,ha.normalized=H,ha.offset=sa,ha.stride=ka;ha.divisor!==D&&(e.vertexAttribDivisorANGLE(C,D),ha.divisor=D)}else if(ha.buffer&&(w.disableVertexAttribArray(C),ha.buffer=null),ha.x!==Da||ha.y!==Ba||
ha.z!==na||ha.w!==x)w.vertexAttrib4f(C,Da,Ba,na,x),ha.x=Da,ha.y=Ba,ha.z=na,ha.w=x;D=b.fill;w.uniform4f(L.location,D[0],D[1],D[2],D[3]);D=b.scale;w.uniform2f(da.location,D[0],D[1]);D=b.scaleFract;w.uniform2f(y.location,D[0],D[1]);D=b.translate;w.uniform2f(U.location,D[0],D[1]);D=b.translateFract;w.uniform2f(u.location,D[0],D[1]);w.uniform1f(K.location,b.id);w.uniform1f(A.location,b.opacity);D=J.call(this,c,b,0);(D=(b=W(D))?r.createStream(D):r.getElements(D))&&w.bindBuffer(34963,D.buffer.buffer);if(H=
D?D.vertCount:-1)sa=M.instances,0<sa?D?e.drawElementsInstancedANGLE(4,H,D.type,0<<(D.type-5121>>1),sa):e.drawArraysInstancedANGLE(4,0,H,sa):0>sa&&(D?w.drawElements(4,H,D.type,0<<(D.type-5121>>1)):w.drawArrays(4,0,H)),h.dirty=!0,P.setVAO(null),c.viewportWidth=d,c.viewportHeight=p,f&&(X.cpuTime+=performance.now()-q),a&&ga.destroyStream(v),g&&ga.destroyStream(B),b&&r.destroyStream(D)},scope:function(a,l,k){var n,w,v,p,I,G,y,T,S,z,H,sa,Ga,ra,fa,J,R,m,A,u,N,C,O,x,ba,F,t,P,pa,Q,L,wa,K,U,Y,aa,ea,da,la,xa,
qa,Ca,ia,Re,Fd,Be,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb;n=a.viewport;w=n.x|0;v=n.y|0;p="width"in n?n.width|0:c.framebufferWidth-w;I="height"in n?n.height|0:c.framebufferHeight-v;G=c.viewportWidth;c.viewportWidth=p;y=c.viewportHeight;c.viewportHeight=I;T=Ba[0];Ba[0]=w;S=Ba[1];Ba[1]=v;z=Ba[2];Ba[2]=p;H=Ba[3];Ba[3]=I;sa=b[0];b[0]=0;Ga=b[1];
b[1]=0;ra=b[2];b[2]=0;fa=b[3];b[3]=0;J=E.blend_enable;E.blend_enable=!0;R=B[0];B[0]=32774;m=B[1];B[1]=32774;A=V[0];V[0]=770;u=V[1];V[1]=771;N=V[2];V[2]=773;C=V[3];V[3]=1;O=E.depth_enable;E.depth_enable=!1;x=a.viewport;ba=x.x|0;F=x.y|0;t="width"in x?x.width|0:c.framebufferWidth-ba;P="height"in x?x.height|0:c.framebufferHeight-F;pa=na[0];na[0]=ba;Q=na[1];na[1]=F;L=na[2];na[2]=t;wa=na[3];na[3]=P;K=E.scissor_enable;E.scissor_enable=!0;U=E.stencil_enable;E.stencil_enable=!1;if(Y=h.profile)aa=performance.now(),
X.count++;ea=g.call(this,c,a,k);da=null;da=(la=W(ea))?r.createStream(ea):r.getElements(ea);xa=M.elements;M.elements=da;qa=M.offset;M.offset=0;Ca=da?da.vertCount:-1;ia=M.count;M.count=Ca;Re=M.primitive;M.primitive=4;Fd=a.fill;Be=d[14];d[14]=Fd;te=a.id;$d=d[31];d[31]=te;Wd=a.opacity;Ld=d[10];d[10]=Wd;md=c.pixelRatio;$c=d[34];d[34]=md;sd=a.scale;Kc=d[6];d[6]=sd;pd=a.scaleFract;Ec=d[7];d[7]=pd;ed=a.translate;Oc=d[8];d[8]=ed;ld=a.translateFract;Ab=d[9];d[9]=ld;Eb=f.call(this,c,a,k);tc=d[3];d[3]=Eb;ja.buffer=
a.positionBuffer;wb=!1;wc=null;Bb=0;Ic=!1;Fc=lc=0;Wc=1;Vc=0;Cc=5126;pc=oc=Gc=ec=0;W(ja)?(wb=!0,wc=ga.createStream(34962,ja),Cc=wc.dtype):(wc=ga.getBuffer(ja))?Cc=wc.dtype:"constant"in ja?(Wc=2,"number"===typeof ja.constant?(Gc=ja.constant,oc=pc=ec=0):(Gc=0<ja.constant.length?ja.constant[0]:0,oc=1<ja.constant.length?ja.constant[1]:0,pc=2<ja.constant.length?ja.constant[2]:0,ec=3<ja.constant.length?ja.constant[3]:0)):(wc=W(ja.buffer)?ga.createStream(34962,ja.buffer):ga.getBuffer(ja.buffer),Cc="type"in
ja?Ea[ja.type]:wc.dtype,Ic=!!ja.normalized,Fc=ja.size|0,lc=ja.offset|0,Vc=ja.stride|0,Bb=ja.divisor|0);mc=q.buffer;q.buffer=wc;fc=q.divisor;q.divisor=Bb;$a=q.normalized;q.normalized=Ic;Hc=q.offset;q.offset=lc;xb=q.size;q.size=Fc;cb=q.state;q.state=Wc;Mb=q.stride;q.stride=Vc;ab=q.type;q.type=Cc;nb=q.w;q.w=ec;Va=q.x;q.x=Gc;Tc=q.y;q.y=oc;Hb=q.z;q.z=pc;oa.buffer=a.positionFractBuffer;Ib=!1;qc=null;Nb=0;jb=!1;Cb=Fb=0;vb=1;hb=0;Xb=5126;Tb=Ua=pb=Ob=0;W(oa)?(Ib=!0,qc=ga.createStream(34962,oa),Xb=qc.dtype):
(qc=ga.getBuffer(oa))?Xb=qc.dtype:"constant"in oa?(vb=2,"number"===typeof oa.constant?(pb=oa.constant,Ua=Tb=Ob=0):(pb=0<oa.constant.length?oa.constant[0]:0,Ua=1<oa.constant.length?oa.constant[1]:0,Tb=2<oa.constant.length?oa.constant[2]:0,Ob=3<oa.constant.length?oa.constant[3]:0)):(qc=W(oa.buffer)?ga.createStream(34962,oa.buffer):ga.getBuffer(oa.buffer),Xb="type"in oa?Ea[oa.type]:qc.dtype,jb=!!oa.normalized,Cb=oa.size|0,Fb=oa.offset|0,hb=oa.stride|0,Nb=oa.divisor|0);yb=e.buffer;e.buffer=qc;ac=e.divisor;
e.divisor=Nb;ib=e.normalized;e.normalized=jb;ob=e.offset;e.offset=Fb;Ia=e.size;e.size=Cb;qb=e.state;e.state=vb;Ka=e.stride;e.stride=hb;eb=e.type;e.type=Xb;fb=e.w;e.w=Ob;La=e.x;e.x=pb;kb=e.y;e.y=Ua;Wa=e.z;e.z=Tb;sb=D.vert;D.vert=42;rb=D.frag;D.frag=41;h.dirty=!0;l(c,a,k);c.viewportWidth=G;c.viewportHeight=y;Ba[0]=T;Ba[1]=S;Ba[2]=z;Ba[3]=H;b[0]=sa;b[1]=Ga;b[2]=ra;b[3]=fa;E.blend_enable=J;B[0]=R;B[1]=m;V[0]=A;V[1]=u;V[2]=N;V[3]=C;E.depth_enable=O;na[0]=pa;na[1]=Q;na[2]=L;na[3]=wa;E.scissor_enable=K;
E.stencil_enable=U;Y&&(X.cpuTime+=performance.now()-aa);la&&r.destroyStream(da);M.elements=xa;M.offset=qa;M.count=ia;M.primitive=Re;d[14]=Be;d[31]=$d;d[10]=Ld;d[34]=$c;d[6]=Kc;d[7]=Ec;d[8]=Oc;d[9]=Ab;d[3]=tc;wb&&ga.destroyStream(wc);q.buffer=mc;q.divisor=fc;q.normalized=$a;q.offset=Hc;q.size=xb;q.state=cb;q.stride=Mb;q.type=ab;q.w=nb;q.x=Va;q.y=Tc;q.z=Hb;Ib&&ga.destroyStream(qc);e.buffer=yb;e.divisor=ac;e.normalized=ib;e.offset=ob;e.size=Ia;e.state=qb;e.stride=Ka;e.type=eb;e.w=fb;e.x=La;e.y=kb;e.z=
Wa;D.vert=sb;D.frag=rb;h.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta){var v,p,I,ua,va,dd,Gb,ha,H,sa,Ga,ra,za,Da,ka,Z,ta,Ja,Fa,gb,ca,ia,Zb,Ha,$b,Rb,Aa,Bd,oe,Vd,ze,se,Ud,ne,xe,Cd,rd,ge,be;
v=a.attributes;p=a.buffer;I=a.context;ua=a.current;va=a.draw;dd=a.elements;Gb=a.extensions;ha=a.framebuffer;H=a.gl;sa=a.isBufferArgs;Ga=a.next;ra=a.shader;za=a.uniforms;Da=a.vao;ka=Ga.blend_color;Z=ua.blend_color;ta=Ga.blend_equation;Ja=ua.blend_equation;Fa=Ga.blend_func;gb=ua.blend_func;ca=Ga.colorMask;ia=ua.colorMask;Zb=Ga.depth_range;Ha=ua.depth_range;$b=Ga.polygonOffset_offset;Rb=ua.polygonOffset_offset;Aa=Ga.sample_coverage;Bd=ua.sample_coverage;oe=Ga.scissor_box;Vd=ua.scissor_box;ze=Ga.stencil_func;
se=ua.stencil_func;Ud=Ga.stencil_opBack;ne=ua.stencil_opBack;xe=Ga.stencil_opFront;Cd=ua.stencil_opFront;rd=Ga.viewport;ge=ua.viewport;be={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,d){var c,f,h,e,a,k;c=ha.next;c!==ha.cur&&(c?H.bindFramebuffer(36160,c.framebuffer):H.bindFramebuffer(36160,null),ha.cur=c);if(ua.dirty){var q,r,g,w,y,D,ra,J,m,E,A,u,ka,C,x,M,F,t,P,za,Q,L,K,U,aa,ga,da,W,Fa,Hc,xb,cb,Mb,ab;q=Ga.dither;q!==ua.dither&&
(q?H.enable(3024):H.disable(3024),ua.dither=q);r=ta[0];g=ta[1];if(r!==Ja[0]||g!==Ja[1])H.blendEquationSeparate(r,g),Ja[0]=r,Ja[1]=g;w=Ga.depth_func;w!==ua.depth_func&&(H.depthFunc(w),ua.depth_func=w);y=Zb[0];D=Zb[1];if(y!==Ha[0]||D!==Ha[1])H.depthRange(y,D),Ha[0]=y,Ha[1]=D;ra=Ga.depth_mask;ra!==ua.depth_mask&&(H.depthMask(ra),ua.depth_mask=ra);J=ca[0];m=ca[1];E=ca[2];A=ca[3];if(J!==ia[0]||m!==ia[1]||E!==ia[2]||A!==ia[3])H.colorMask(J,m,E,A),ia[0]=J,ia[1]=m,ia[2]=E,ia[3]=A;u=Ga.cull_enable;u!==ua.cull_enable&&
(u?H.enable(2884):H.disable(2884),ua.cull_enable=u);ka=Ga.cull_face;ka!==ua.cull_face&&(H.cullFace(ka),ua.cull_face=ka);C=Ga.frontFace;C!==ua.frontFace&&(H.frontFace(C),ua.frontFace=C);x=Ga.lineWidth;x!==ua.lineWidth&&(H.lineWidth(x),ua.lineWidth=x);M=Ga.polygonOffset_enable;M!==ua.polygonOffset_enable&&(M?H.enable(32823):H.disable(32823),ua.polygonOffset_enable=M);F=$b[0];t=$b[1];if(F!==Rb[0]||t!==Rb[1])H.polygonOffset(F,t),Rb[0]=F,Rb[1]=t;P=Ga.sample_alpha;P!==ua.sample_alpha&&(P?H.enable(32926):
H.disable(32926),ua.sample_alpha=P);za=Ga.sample_enable;za!==ua.sample_enable&&(za?H.enable(32928):H.disable(32928),ua.sample_enable=za);Q=Aa[0];L=Aa[1];if(Q!==Bd[0]||L!==Bd[1])H.sampleCoverage(Q,L),Bd[0]=Q,Bd[1]=L;K=Ga.stencil_mask;K!==ua.stencil_mask&&(H.stencilMask(K),ua.stencil_mask=K);U=ze[0];aa=ze[1];ga=ze[2];if(U!==se[0]||aa!==se[1]||ga!==se[2])H.stencilFunc(U,aa,ga),se[0]=U,se[1]=aa,se[2]=ga;da=xe[0];W=xe[1];Fa=xe[2];Hc=xe[3];if(da!==Cd[0]||W!==Cd[1]||Fa!==Cd[2]||Hc!==Cd[3])H.stencilOpSeparate(da,
W,Fa,Hc),Cd[0]=da,Cd[1]=W,Cd[2]=Fa,Cd[3]=Hc;xb=Ud[0];cb=Ud[1];Mb=Ud[2];ab=Ud[3];if(xb!==ne[0]||cb!==ne[1]||Mb!==ne[2]||ab!==ne[3])H.stencilOpSeparate(xb,cb,Mb,ab),ne[0]=xb,ne[1]=cb,ne[2]=Mb,ne[3]=ab}H.blendColor(0,0,0,1);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=1;H.enable(3042);ua.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;H.disable(2929);ua.depth_enable=!1;H.enable(3089);ua.scissor_enable=!0;H.disable(2960);ua.stencil_enable=!1;if(f=ua.profile)h=performance.now(),X.count+=
d;H.useProgram(xa.program);e=Gb.angle_instanced_arrays;var nb;Da.setVAO(null);H.uniform1i(G.location,!1);H.uniform1i(Ca.location,O.bind());nb=va.instances;for(a=0;a<d;++a){k=b[a];var Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,oe,rd,xd,jd,uf,Nd,Yd,de,Od,Id,
Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf,dg,Sf,Tf;Va=k.viewport;Tc=Va.x|0;Hb=Va.y|0;Ib="width"in Va?Va.width|0:I.framebufferWidth-Tc;qc="height"in Va?Va.height|0:I.framebufferHeight-Hb;Nb=I.viewportWidth;I.viewportWidth=Ib;jb=I.viewportHeight;I.viewportHeight=qc;H.viewport(Tc,
Hb,Ib,qc);ge[0]=Tc;ge[1]=Hb;ge[2]=Ib;ge[3]=qc;Fb=k.viewport;Cb=Fb.x|0;vb=Fb.y|0;hb="width"in Fb?Fb.width|0:I.framebufferWidth-Cb;Xb="height"in Fb?Fb.height|0:I.framebufferHeight-vb;H.scissor(Cb,vb,hb,Xb);Vd[0]=Cb;Vd[1]=vb;Vd[2]=hb;Vd[3]=Xb;Ob=B.call(this,I,k,a);pb=!1;Ua=null;Tb=0;yb=!1;ib=ac=0;ob=1;Ia=0;qb=5126;La=fb=eb=Ka=0;sa(Ob)?(pb=!0,Ua=p.createStream(34962,Ob),qb=Ua.dtype):(Ua=p.getBuffer(Ob))?qb=Ua.dtype:"constant"in Ob?(ob=2,"number"===typeof Ob.constant?(eb=Ob.constant,fb=La=Ka=0):(eb=0<
Ob.constant.length?Ob.constant[0]:0,fb=1<Ob.constant.length?Ob.constant[1]:0,La=2<Ob.constant.length?Ob.constant[2]:0,Ka=3<Ob.constant.length?Ob.constant[3]:0)):(Ua=sa(Ob.buffer)?p.createStream(34962,Ob.buffer):p.getBuffer(Ob.buffer),qb="type"in Ob?be[Ob.type]:Ua.dtype,yb=!!Ob.normalized,ib=Ob.size|0,ac=Ob.offset|0,Ia=Ob.stride|0,Tb=Ob.divisor|0);kb=Ma.location;Wa=v[kb];if(1===ob){Wa.buffer||H.enableVertexAttribArray(kb);sb=ib||1;if(Wa.type!==qb||Wa.size!==sb||Wa.buffer!==Ua||Wa.normalized!==yb||
Wa.offset!==ac||Wa.stride!==Ia)H.bindBuffer(34962,Ua.buffer),H.vertexAttribPointer(kb,sb,qb,yb,Ia,ac),Wa.type=qb,Wa.size=sb,Wa.buffer=Ua,Wa.normalized=yb,Wa.offset=ac,Wa.stride=Ia;Wa.divisor!==Tb&&(e.vertexAttribDivisorANGLE(kb,Tb),Wa.divisor=Tb)}else if(Wa.buffer&&(H.disableVertexAttribArray(kb),Wa.buffer=null),Wa.x!==eb||Wa.y!==fb||Wa.z!==La||Wa.w!==Ka)H.vertexAttrib4f(kb,eb,fb,La,Ka),Wa.x=eb,Wa.y=fb,Wa.z=La,Wa.w=Ka;rb=qa.call(this,I,k,a);Pa=!1;Bc=null;Ra=0;Jb=!1;Na=Db=0;Jd=1;Ya=0;Kb=5126;Yb=Oa=
lb=Lb=0;sa(rb)?(Pa=!0,Bc=p.createStream(34962,rb),Kb=Bc.dtype):(Bc=p.getBuffer(rb))?Kb=Bc.dtype:"constant"in rb?(Jd=2,"number"===typeof rb.constant?(lb=rb.constant,Oa=Yb=Lb=0):(lb=0<rb.constant.length?rb.constant[0]:0,Oa=1<rb.constant.length?rb.constant[1]:0,Yb=2<rb.constant.length?rb.constant[2]:0,Lb=3<rb.constant.length?rb.constant[3]:0)):(Bc=sa(rb.buffer)?p.createStream(34962,rb.buffer):p.getBuffer(rb.buffer),Kb="type"in rb?be[rb.type]:Bc.dtype,Jb=!!rb.normalized,Na=rb.size|0,Db=rb.offset|0,Ya=
rb.stride|0,Ra=rb.divisor|0);Qa=cc.location;tb=v[Qa];if(1===Jd){tb.buffer||H.enableVertexAttribArray(Qa);ub=Na||1;if(tb.type!==Kb||tb.size!==ub||tb.buffer!==Bc||tb.normalized!==Jb||tb.offset!==Db||tb.stride!==Ya)H.bindBuffer(34962,Bc.buffer),H.vertexAttribPointer(Qa,ub,Kb,Jb,Ya,Db),tb.type=Kb,tb.size=ub,tb.buffer=Bc,tb.normalized=Jb,tb.offset=Db,tb.stride=Ya;tb.divisor!==Ra&&(e.vertexAttribDivisorANGLE(Qa,Ra),tb.divisor=Ra)}else if(tb.buffer&&(H.disableVertexAttribArray(Qa),tb.buffer=null),tb.x!==
lb||tb.y!==Oa||tb.z!==Yb||tb.w!==Lb)H.vertexAttrib4f(Qa,lb,Oa,Yb,Lb),tb.x=lb,tb.y=Oa,tb.z=Yb,tb.w=Lb;Sa=V.call(this,I,k,a);mb=!1;gc=null;zc=0;uc=!1;jc=bb=0;nd=1;Xa=0;Lc=5126;sc=Ub=Za=zb=0;sa(Sa)?(mb=!0,gc=p.createStream(34962,Sa),Lc=gc.dtype):(gc=p.getBuffer(Sa))?Lc=gc.dtype:"constant"in Sa?(nd=2,"number"===typeof Sa.constant?(Za=Sa.constant,Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?
Sa.constant[3]:0)):(gc=sa(Sa.buffer)?p.createStream(34962,Sa.buffer):p.getBuffer(Sa.buffer),Lc="type"in Sa?be[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,zc=Sa.divisor|0);Vb=ma.location;Pb=v[Vb];if(1===nd){Pb.buffer||H.enableVertexAttribArray(Vb);Jc=jc||1;if(Pb.type!==Lc||Pb.size!==Jc||Pb.buffer!==gc||Pb.normalized!==uc||Pb.offset!==bb||Pb.stride!==Xa)H.bindBuffer(34962,gc.buffer),H.vertexAttribPointer(Vb,Jc,Lc,uc,Xa,bb),Pb.type=Lc,Pb.size=Jc,Pb.buffer=gc,Pb.normalized=
uc,Pb.offset=bb,Pb.stride=Xa;Pb.divisor!==zc&&(e.vertexAttribDivisorANGLE(Vb,zc),Pb.divisor=zc)}else if(Pb.buffer&&(H.disableVertexAttribArray(Vb),Pb.buffer=null),Pb.x!==Za||Pb.y!==Ub||Pb.z!==sc||Pb.w!==zb)H.vertexAttrib4f(Vb,Za,Ub,sc,zb),Pb.x=Za,Pb.y=Ub,Pb.z=sc,Pb.w=zb;Qb=Y.call(this,I,k,a);Xd=!1;Dc=null;ud=0;Mc=!1;qd=fd=0;nc=1;vc=0;hc=5126;Wb=Sb=rc=db=0;sa(Qb)?(Xd=!0,Dc=p.createStream(34962,Qb),hc=Dc.dtype):(Dc=p.getBuffer(Qb))?hc=Dc.dtype:"constant"in Qb?(nc=2,"number"===typeof Qb.constant?(rc=
Qb.constant,Sb=Wb=db=0):(rc=0<Qb.constant.length?Qb.constant[0]:0,Sb=1<Qb.constant.length?Qb.constant[1]:0,Wb=2<Qb.constant.length?Qb.constant[2]:0,db=3<Qb.constant.length?Qb.constant[3]:0)):(Dc=sa(Qb.buffer)?p.createStream(34962,Qb.buffer):p.getBuffer(Qb.buffer),hc="type"in Qb?be[Qb.type]:Dc.dtype,Mc=!!Qb.normalized,qd=Qb.size|0,fd=Qb.offset|0,vc=Qb.stride|0,ud=Qb.divisor|0);dc=Ta.location;ic=v[dc];if(1===nc){ic.buffer||H.enableVertexAttribArray(dc);xc=qd||1;if(ic.type!==hc||ic.size!==xc||ic.buffer!==
Dc||ic.normalized!==Mc||ic.offset!==fd||ic.stride!==vc)H.bindBuffer(34962,Dc.buffer),H.vertexAttribPointer(dc,xc,hc,Mc,vc,fd),ic.type=hc,ic.size=xc,ic.buffer=Dc,ic.normalized=Mc,ic.offset=fd,ic.stride=vc;ic.divisor!==ud&&(e.vertexAttribDivisorANGLE(dc,ud),ic.divisor=ud)}else if(ic.buffer&&(H.disableVertexAttribArray(dc),ic.buffer=null),ic.x!==rc||ic.y!==Sb||ic.z!==Wb||ic.w!==db)H.vertexAttrib4f(dc,rc,Sb,Wb,db),ic.x=rc,ic.y=Sb,ic.z=Wb,ic.w=db;Ac=ea.call(this,I,k,a);ad=!1;Pc=null;Qc=0;Rc=!1;wd=Xc=0;
bd=1;Yc=0;kc=5126;cd=Uc=Zc=bc=0;sa(Ac)?(ad=!0,Pc=p.createStream(34962,Ac),kc=Pc.dtype):(Pc=p.getBuffer(Ac))?kc=Pc.dtype:"constant"in Ac?(bd=2,"number"===typeof Ac.constant?(Zc=Ac.constant,Uc=cd=bc=0):(Zc=0<Ac.constant.length?Ac.constant[0]:0,Uc=1<Ac.constant.length?Ac.constant[1]:0,cd=2<Ac.constant.length?Ac.constant[2]:0,bc=3<Ac.constant.length?Ac.constant[3]:0)):(Pc=sa(Ac.buffer)?p.createStream(34962,Ac.buffer):p.getBuffer(Ac.buffer),kc="type"in Ac?be[Ac.type]:Pc.dtype,Rc=!!Ac.normalized,wd=Ac.size|
0,Xc=Ac.offset|0,Yc=Ac.stride|0,Qc=Ac.divisor|0);yc=ja.location;id=v[yc];if(1===bd){id.buffer||H.enableVertexAttribArray(yc);oe=wd||1;if(id.type!==kc||id.size!==oe||id.buffer!==Pc||id.normalized!==Rc||id.offset!==Xc||id.stride!==Yc)H.bindBuffer(34962,Pc.buffer),H.vertexAttribPointer(yc,oe,kc,Rc,Yc,Xc),id.type=kc,id.size=oe,id.buffer=Pc,id.normalized=Rc,id.offset=Xc,id.stride=Yc;id.divisor!==Qc&&(e.vertexAttribDivisorANGLE(yc,Qc),id.divisor=Qc)}else if(id.buffer&&(H.disableVertexAttribArray(yc),id.buffer=
null),id.x!==Zc||id.y!==Uc||id.z!==cd||id.w!==bc)H.vertexAttrib4f(yc,Zc,Uc,cd,bc),id.x=Zc,id.y=Uc,id.z=cd,id.w=bc;rd=R.call(this,I,k,a);xd=!1;jd=null;uf=0;Nd=!1;de=Yd=0;Od=1;Id=0;Gd=5126;td=vd=Sc=od=0;sa(rd)?(xd=!0,jd=p.createStream(34962,rd),Gd=jd.dtype):(jd=p.getBuffer(rd))?Gd=jd.dtype:"constant"in rd?(Od=2,"number"===typeof rd.constant?(Sc=rd.constant,vd=td=od=0):(Sc=0<rd.constant.length?rd.constant[0]:0,vd=1<rd.constant.length?rd.constant[1]:0,td=2<rd.constant.length?rd.constant[2]:0,od=3<rd.constant.length?
rd.constant[3]:0)):(jd=sa(rd.buffer)?p.createStream(34962,rd.buffer):p.getBuffer(rd.buffer),Gd="type"in rd?be[rd.type]:jd.dtype,Nd=!!rd.normalized,de=rd.size|0,Yd=rd.offset|0,Id=rd.stride|0,uf=rd.divisor|0);kd=na.location;yd=v[kd];if(1===Od){yd.buffer||H.enableVertexAttribArray(kd);Ad=de||1;if(yd.type!==Gd||yd.size!==Ad||yd.buffer!==jd||yd.normalized!==Nd||yd.offset!==Yd||yd.stride!==Id)H.bindBuffer(34962,jd.buffer),H.vertexAttribPointer(kd,Ad,Gd,Nd,Id,Yd),yd.type=Gd,yd.size=Ad,yd.buffer=jd,yd.normalized=
Nd,yd.offset=Yd,yd.stride=Id;yd.divisor!==uf&&(e.vertexAttribDivisorANGLE(kd,uf),yd.divisor=uf)}else if(yd.buffer&&(H.disableVertexAttribArray(kd),yd.buffer=null),yd.x!==Sc||yd.y!==vd||yd.z!==td||yd.w!==od)H.vertexAttrib4f(kd,Sc,vd,td,od),yd.x=Sc,yd.y=vd,yd.z=td,yd.w=od;Ed=T.call(this,I,k,a);pe=!1;je=null;Ne=0;ke=!1;he=ie=0;ue=1;ee=0;le=5126;qe=ve=gd=Nc=0;sa(Ed)?(pe=!0,je=p.createStream(34962,Ed),le=je.dtype):(je=p.getBuffer(Ed))?le=je.dtype:"constant"in Ed?(ue=2,"number"===typeof Ed.constant?(gd=
Ed.constant,ve=qe=Nc=0):(gd=0<Ed.constant.length?Ed.constant[0]:0,ve=1<Ed.constant.length?Ed.constant[1]:0,qe=2<Ed.constant.length?Ed.constant[2]:0,Nc=3<Ed.constant.length?Ed.constant[3]:0)):(je=sa(Ed.buffer)?p.createStream(34962,Ed.buffer):p.getBuffer(Ed.buffer),le="type"in Ed?be[Ed.type]:je.dtype,ke=!!Ed.normalized,he=Ed.size|0,ie=Ed.offset|0,ee=Ed.stride|0,Ne=Ed.divisor|0);Kd=n.location;Pd=v[Kd];if(1===ue){Pd.buffer||H.enableVertexAttribArray(Kd);Qd=he||4;if(Pd.type!==le||Pd.size!==Qd||Pd.buffer!==
je||Pd.normalized!==ke||Pd.offset!==ie||Pd.stride!==ee)H.bindBuffer(34962,je.buffer),H.vertexAttribPointer(Kd,Qd,le,ke,ee,ie),Pd.type=le,Pd.size=Qd,Pd.buffer=je,Pd.normalized=ke,Pd.offset=ie,Pd.stride=ee;Pd.divisor!==Ne&&(e.vertexAttribDivisorANGLE(Kd,Ne),Pd.divisor=Ne)}else if(Pd.buffer&&(H.disableVertexAttribArray(Kd),Pd.buffer=null),Pd.x!==gd||Pd.y!==ve||Pd.z!==qe||Pd.w!==Nc)H.vertexAttrib4f(Kd,gd,ve,qe,Nc),Pd.x=gd,Pd.y=ve,Pd.z=qe,Pd.w=Nc;Rd=z.call(this,I,k,a);me=!1;Ae=null;Ce=0;re=!1;Te=Se=0;
Oe=1;we=0;Ge=5126;He=Ke=Je=Ie=0;sa(Rd)?(me=!0,Ae=p.createStream(34962,Rd),Ge=Ae.dtype):(Ae=p.getBuffer(Rd))?Ge=Ae.dtype:"constant"in Rd?(Oe=2,"number"===typeof Rd.constant?(Je=Rd.constant,Ke=He=Ie=0):(Je=0<Rd.constant.length?Rd.constant[0]:0,Ke=1<Rd.constant.length?Rd.constant[1]:0,He=2<Rd.constant.length?Rd.constant[2]:0,Ie=3<Rd.constant.length?Rd.constant[3]:0)):(Ae=sa(Rd.buffer)?p.createStream(34962,Rd.buffer):p.getBuffer(Rd.buffer),Ge="type"in Rd?be[Rd.type]:Ae.dtype,re=!!Rd.normalized,Te=Rd.size|
0,Se=Rd.offset|0,we=Rd.stride|0,Ce=Rd.divisor|0);Md=wa.location;Zd=v[Md];if(1===Oe){Zd.buffer||H.enableVertexAttribArray(Md);ce=Te||4;if(Zd.type!==Ge||Zd.size!==ce||Zd.buffer!==Ae||Zd.normalized!==re||Zd.offset!==Se||Zd.stride!==we)H.bindBuffer(34962,Ae.buffer),H.vertexAttribPointer(Md,ce,Ge,re,we,Se),Zd.type=Ge,Zd.size=ce,Zd.buffer=Ae,Zd.normalized=re,Zd.offset=Se,Zd.stride=we;Zd.divisor!==Ce&&(e.vertexAttribDivisorANGLE(Md,Ce),Zd.divisor=Ce)}else if(Zd.buffer&&(H.disableVertexAttribArray(Md),Zd.buffer=
null),Zd.x!==Je||Zd.y!==Ke||Zd.z!==He||Zd.w!==Ie)H.vertexAttrib4f(Md,Je,Ke,He,Ie),Zd.x=Je,Zd.y=Ke,Zd.z=He,Zd.w=Ie;fe=l.call(this,I,k,a);Le=!1;Hd=null;Sd=0;Ee=!1;bf=Me=0;af=1;Ue=0;Pe=5126;We=Ve=Ye=$e=0;sa(fe)?(Le=!0,Hd=p.createStream(34962,fe),Pe=Hd.dtype):(Hd=p.getBuffer(fe))?Pe=Hd.dtype:"constant"in fe?(af=2,"number"===typeof fe.constant?(Ye=fe.constant,Ve=We=$e=0):(Ye=0<fe.constant.length?fe.constant[0]:0,Ve=1<fe.constant.length?fe.constant[1]:0,We=2<fe.constant.length?fe.constant[2]:0,$e=3<fe.constant.length?
fe.constant[3]:0)):(Hd=sa(fe.buffer)?p.createStream(34962,fe.buffer):p.getBuffer(fe.buffer),Pe="type"in fe?be[fe.type]:Hd.dtype,Ee=!!fe.normalized,bf=fe.size|0,Me=fe.offset|0,Ue=fe.stride|0,Sd=fe.divisor|0);Td=ba.location;ae=v[Td];if(1===af){ae.buffer||H.enableVertexAttribArray(Td);Xe=bf||1;if(ae.type!==Pe||ae.size!==Xe||ae.buffer!==Hd||ae.normalized!==Ee||ae.offset!==Me||ae.stride!==Ue)H.bindBuffer(34962,Hd.buffer),H.vertexAttribPointer(Td,Xe,Pe,Ee,Ue,Me),ae.type=Pe,ae.size=Xe,ae.buffer=Hd,ae.normalized=
Ee,ae.offset=Me,ae.stride=Ue;ae.divisor!==Sd&&(e.vertexAttribDivisorANGLE(Td,Sd),ae.divisor=Sd)}else if(ae.buffer&&(H.disableVertexAttribArray(Td),ae.buffer=null),ae.x!==Ye||ae.y!==Ve||ae.z!==We||ae.w!==$e)H.vertexAttrib4f(Td,Ye,Ve,We,$e),ae.x=Ye,ae.y=Ve,ae.z=We,ae.w=$e;hf=I.pixelRatio;a&&mf===hf||(mf=hf,H.uniform1f(Ba.location,hf));ef=k.scale;jf=ef[0];lf=ef[1];a&&kf===jf&&qf===lf||(kf=jf,qf=lf,H.uniform2f(fa.location,jf,lf));nf=k.scaleFract;rf=nf[0];Cf=nf[1];a&&Bf===rf&&Qe===Cf||(Bf=rf,Qe=Cf,H.uniform2f(Ea.location,
rf,Cf));Fe=k.translate;of=Fe[0];Df=Fe[1];a&&pf===of&&Gf===Df||(pf=of,Gf=Df,H.uniform2f(oa.location,of,Df));Af=k.translateFract;Ef=Af[0];wf=Af[1];a&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,H.uniform2f(ya.location,Ef,wf));vf=N.call(this,I,k,a);yf=vf[0];If=vf[1];a&&zf===yf&&Jf===If||(zf=yf,Jf=If,H.uniform2f(pa.location,yf,If));Kf=k.opacity;a&&Lf===Kf||(Lf=Kf,H.uniform1f(la.location,Kf));(sf=k.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Rf=sf._texture;H.uniform1i(S.location,Rf.bind());Hf=k.elements;
tf=null;(tf=(dg=sa(Hf))?dd.createStream(Hf):dd.getElements(Hf))&&H.bindBuffer(34963,tf.buffer.buffer);Sf=k.offset;if(Tf=k.count)0<nb?tf?e.drawElementsInstancedANGLE(0,Tf,tf.type,Sf<<(tf.type-5121>>1),nb):e.drawArraysInstancedANGLE(0,Sf,Tf,nb):0>nb&&(tf?H.drawElements(0,Tf,tf.type,Sf<<(tf.type-5121>>1)):H.drawArrays(0,Sf,Tf)),I.viewportWidth=Nb,I.viewportHeight=jb,pb&&p.destroyStream(Ua),Pa&&p.destroyStream(Bc),mb&&p.destroyStream(gc),Xd&&p.destroyStream(Dc),ad&&p.destroyStream(Pc),xd&&p.destroyStream(jd),
pe&&p.destroyStream(je),me&&p.destroyStream(Ae),Le&&p.destroyStream(Hd),Rf.unbind(),dg&&dd.destroyStream(tf)}O.unbind();ua.dirty=!0;Da.setVAO(null);f&&(X.cpuTime+=performance.now()-h)},draw:function(b){var d,c,h,a,k,l,r,B,w,y,T,D,z,ra,R,E,u,ka,N,M,O,t,P,za,Q,U,aa,ga,Y,ea,da,W,xa,qa,V,Fa,hd,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,rd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,oe,
Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,uf,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we;d=ha.next;d!==ha.cur&&(d?H.bindFramebuffer(36160,d.framebuffer):H.bindFramebuffer(36160,null),ha.cur=d);if(ua.dirty){var Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf;Ge=Ga.dither;Ge!==ua.dither&&(Ge?H.enable(3024):H.disable(3024),
ua.dither=Ge);Ie=ta[0];Je=ta[1];if(Ie!==Ja[0]||Je!==Ja[1])H.blendEquationSeparate(Ie,Je),Ja[0]=Ie,Ja[1]=Je;Ke=Ga.depth_func;Ke!==ua.depth_func&&(H.depthFunc(Ke),ua.depth_func=Ke);He=Zb[0];Md=Zb[1];if(He!==Ha[0]||Md!==Ha[1])H.depthRange(He,Md),Ha[0]=He,Ha[1]=Md;Zd=Ga.depth_mask;Zd!==ua.depth_mask&&(H.depthMask(Zd),ua.depth_mask=Zd);ce=ca[0];fe=ca[1];Le=ca[2];Hd=ca[3];if(ce!==ia[0]||fe!==ia[1]||Le!==ia[2]||Hd!==ia[3])H.colorMask(ce,fe,Le,Hd),ia[0]=ce,ia[1]=fe,ia[2]=Le,ia[3]=Hd;Sd=Ga.cull_enable;Sd!==
ua.cull_enable&&(Sd?H.enable(2884):H.disable(2884),ua.cull_enable=Sd);Ee=Ga.cull_face;Ee!==ua.cull_face&&(H.cullFace(Ee),ua.cull_face=Ee);Me=Ga.frontFace;Me!==ua.frontFace&&(H.frontFace(Me),ua.frontFace=Me);bf=Ga.lineWidth;bf!==ua.lineWidth&&(H.lineWidth(bf),ua.lineWidth=bf);af=Ga.polygonOffset_enable;af!==ua.polygonOffset_enable&&(af?H.enable(32823):H.disable(32823),ua.polygonOffset_enable=af);Ue=$b[0];Pe=$b[1];if(Ue!==Rb[0]||Pe!==Rb[1])H.polygonOffset(Ue,Pe),Rb[0]=Ue,Rb[1]=Pe;$e=Ga.sample_alpha;
$e!==ua.sample_alpha&&($e?H.enable(32926):H.disable(32926),ua.sample_alpha=$e);Ye=Ga.sample_enable;Ye!==ua.sample_enable&&(Ye?H.enable(32928):H.disable(32928),ua.sample_enable=Ye);Ve=Aa[0];We=Aa[1];if(Ve!==Bd[0]||We!==Bd[1])H.sampleCoverage(Ve,We),Bd[0]=Ve,Bd[1]=We;Td=Ga.stencil_mask;Td!==ua.stencil_mask&&(H.stencilMask(Td),ua.stencil_mask=Td);ae=ze[0];Xe=ze[1];hf=ze[2];if(ae!==se[0]||Xe!==se[1]||hf!==se[2])H.stencilFunc(ae,Xe,hf),se[0]=ae,se[1]=Xe,se[2]=hf;mf=xe[0];ef=xe[1];jf=xe[2];kf=xe[3];if(mf!==
Cd[0]||ef!==Cd[1]||jf!==Cd[2]||kf!==Cd[3])H.stencilOpSeparate(mf,ef,jf,kf),Cd[0]=mf,Cd[1]=ef,Cd[2]=jf,Cd[3]=kf;lf=Ud[0];qf=Ud[1];nf=Ud[2];rf=Ud[3];if(lf!==ne[0]||qf!==ne[1]||nf!==ne[2]||rf!==ne[3])H.stencilOpSeparate(lf,qf,nf,rf),ne[0]=lf,ne[1]=qf,ne[2]=nf,ne[3]=rf}c=b.viewport;h=c.x|0;a=c.y|0;k="width"in c?c.width|0:I.framebufferWidth-h;l="height"in c?c.height|0:I.framebufferHeight-a;r=I.viewportWidth;I.viewportWidth=k;B=I.viewportHeight;I.viewportHeight=l;H.viewport(h,a,k,l);ge[0]=h;ge[1]=a;ge[2]=
k;ge[3]=l;H.blendColor(0,0,0,1);Z[0]=0;Z[1]=0;Z[2]=0;Z[3]=1;H.enable(3042);ua.blend_enable=!0;H.blendFuncSeparate(770,771,773,1);gb[0]=770;gb[1]=771;gb[2]=773;gb[3]=1;H.disable(2929);ua.depth_enable=!1;w=b.viewport;y=w.x|0;T=w.y|0;D="width"in w?w.width|0:I.framebufferWidth-y;z="height"in w?w.height|0:I.framebufferHeight-T;H.scissor(y,T,D,z);Vd[0]=y;Vd[1]=T;Vd[2]=D;Vd[3]=z;H.enable(3089);ua.scissor_enable=!0;H.disable(2960);ua.stencil_enable=!1;if(ra=ua.profile)R=performance.now(),X.count++;H.useProgram(F.program);
E=Gb.angle_instanced_arrays;Da.setVAO(null);u=J.call(this,I,b,0);ka=!1;N=null;M=0;O=!1;P=t=0;za=1;Q=0;U=5126;ea=Y=ga=aa=0;sa(u)?(ka=!0,N=p.createStream(34962,u),U=N.dtype):(N=p.getBuffer(u))?U=N.dtype:"constant"in u?(za=2,"number"===typeof u.constant?(ga=u.constant,Y=ea=aa=0):(ga=0<u.constant.length?u.constant[0]:0,Y=1<u.constant.length?u.constant[1]:0,ea=2<u.constant.length?u.constant[2]:0,aa=3<u.constant.length?u.constant[3]:0)):(N=sa(u.buffer)?p.createStream(34962,u.buffer):p.getBuffer(u.buffer),
U="type"in u?be[u.type]:N.dtype,O=!!u.normalized,P=u.size|0,t=u.offset|0,Q=u.stride|0,M=u.divisor|0);da=Ma.location;W=v[da];if(1===za){W.buffer||H.enableVertexAttribArray(da);xa=P||1;if(W.type!==U||W.size!==xa||W.buffer!==N||W.normalized!==O||W.offset!==t||W.stride!==Q)H.bindBuffer(34962,N.buffer),H.vertexAttribPointer(da,xa,U,O,Q,t),W.type=U,W.size=xa,W.buffer=N,W.normalized=O,W.offset=t,W.stride=Q;W.divisor!==M&&(E.vertexAttribDivisorANGLE(da,M),W.divisor=M)}else if(W.buffer&&(H.disableVertexAttribArray(da),
W.buffer=null),W.x!==ga||W.y!==Y||W.z!==ea||W.w!==aa)H.vertexAttrib4f(da,ga,Y,ea,aa),W.x=ga,W.y=Y,W.z=ea,W.w=aa;qa=g.call(this,I,b,0);V=!1;Fa=null;hd=0;xb=!1;Mb=cb=0;ab=1;nb=0;Va=5126;qc=Ib=Hb=Tc=0;sa(qa)?(V=!0,Fa=p.createStream(34962,qa),Va=Fa.dtype):(Fa=p.getBuffer(qa))?Va=Fa.dtype:"constant"in qa?(ab=2,"number"===typeof qa.constant?(Hb=qa.constant,Ib=qc=Tc=0):(Hb=0<qa.constant.length?qa.constant[0]:0,Ib=1<qa.constant.length?qa.constant[1]:0,qc=2<qa.constant.length?qa.constant[2]:0,Tc=3<qa.constant.length?
qa.constant[3]:0)):(Fa=sa(qa.buffer)?p.createStream(34962,qa.buffer):p.getBuffer(qa.buffer),Va="type"in qa?be[qa.type]:Fa.dtype,xb=!!qa.normalized,Mb=qa.size|0,cb=qa.offset|0,nb=qa.stride|0,hd=qa.divisor|0);Nb=cc.location;jb=v[Nb];if(1===ab){jb.buffer||H.enableVertexAttribArray(Nb);Fb=Mb||1;if(jb.type!==Va||jb.size!==Fb||jb.buffer!==Fa||jb.normalized!==xb||jb.offset!==cb||jb.stride!==nb)H.bindBuffer(34962,Fa.buffer),H.vertexAttribPointer(Nb,Fb,Va,xb,nb,cb),jb.type=Va,jb.size=Fb,jb.buffer=Fa,jb.normalized=
xb,jb.offset=cb,jb.stride=nb;jb.divisor!==hd&&(E.vertexAttribDivisorANGLE(Nb,hd),jb.divisor=hd)}else if(jb.buffer&&(H.disableVertexAttribArray(Nb),jb.buffer=null),jb.x!==Hb||jb.y!==Ib||jb.z!==qc||jb.w!==Tc)H.vertexAttrib4f(Nb,Hb,Ib,qc,Tc),jb.x=Hb,jb.y=Ib,jb.z=qc,jb.w=Tc;Cb=f.call(this,I,b,0);vb=!1;hb=null;Xb=0;Ob=!1;Ua=pb=0;Tb=1;yb=0;ac=5126;qb=Ia=ob=ib=0;sa(Cb)?(vb=!0,hb=p.createStream(34962,Cb),ac=hb.dtype):(hb=p.getBuffer(Cb))?ac=hb.dtype:"constant"in Cb?(Tb=2,"number"===typeof Cb.constant?(ob=
Cb.constant,Ia=qb=ib=0):(ob=0<Cb.constant.length?Cb.constant[0]:0,Ia=1<Cb.constant.length?Cb.constant[1]:0,qb=2<Cb.constant.length?Cb.constant[2]:0,ib=3<Cb.constant.length?Cb.constant[3]:0)):(hb=sa(Cb.buffer)?p.createStream(34962,Cb.buffer):p.getBuffer(Cb.buffer),ac="type"in Cb?be[Cb.type]:hb.dtype,Ob=!!Cb.normalized,Ua=Cb.size|0,pb=Cb.offset|0,yb=Cb.stride|0,Xb=Cb.divisor|0);Ka=ma.location;eb=v[Ka];if(1===Tb){eb.buffer||H.enableVertexAttribArray(Ka);fb=Ua||1;if(eb.type!==ac||eb.size!==fb||eb.buffer!==
hb||eb.normalized!==Ob||eb.offset!==pb||eb.stride!==yb)H.bindBuffer(34962,hb.buffer),H.vertexAttribPointer(Ka,fb,ac,Ob,yb,pb),eb.type=ac,eb.size=fb,eb.buffer=hb,eb.normalized=Ob,eb.offset=pb,eb.stride=yb;eb.divisor!==Xb&&(E.vertexAttribDivisorANGLE(Ka,Xb),eb.divisor=Xb)}else if(eb.buffer&&(H.disableVertexAttribArray(Ka),eb.buffer=null),eb.x!==ob||eb.y!==Ia||eb.z!==qb||eb.w!==ib)H.vertexAttrib4f(Ka,ob,Ia,qb,ib),eb.x=ob,eb.y=Ia,eb.z=qb,eb.w=ib;La=q.call(this,I,b,0);kb=!1;Wa=null;sb=0;rb=!1;Bc=Pa=0;
Ra=1;Jb=0;Db=5126;Kb=Ya=rd=Na=0;sa(La)?(kb=!0,Wa=p.createStream(34962,La),Db=Wa.dtype):(Wa=p.getBuffer(La))?Db=Wa.dtype:"constant"in La?(Ra=2,"number"===typeof La.constant?(rd=La.constant,Ya=Kb=Na=0):(rd=0<La.constant.length?La.constant[0]:0,Ya=1<La.constant.length?La.constant[1]:0,Kb=2<La.constant.length?La.constant[2]:0,Na=3<La.constant.length?La.constant[3]:0)):(Wa=sa(La.buffer)?p.createStream(34962,La.buffer):p.getBuffer(La.buffer),Db="type"in La?be[La.type]:Wa.dtype,rb=!!La.normalized,Bc=La.size|
0,Pa=La.offset|0,Jb=La.stride|0,sb=La.divisor|0);Lb=Ta.location;lb=v[Lb];if(1===Ra){lb.buffer||H.enableVertexAttribArray(Lb);Oa=Bc||1;if(lb.type!==Db||lb.size!==Oa||lb.buffer!==Wa||lb.normalized!==rb||lb.offset!==Pa||lb.stride!==Jb)H.bindBuffer(34962,Wa.buffer),H.vertexAttribPointer(Lb,Oa,Db,rb,Jb,Pa),lb.type=Db,lb.size=Oa,lb.buffer=Wa,lb.normalized=rb,lb.offset=Pa,lb.stride=Jb;lb.divisor!==sb&&(E.vertexAttribDivisorANGLE(Lb,sb),lb.divisor=sb)}else if(lb.buffer&&(H.disableVertexAttribArray(Lb),lb.buffer=
null),lb.x!==rd||lb.y!==Ya||lb.z!==Kb||lb.w!==Na)H.vertexAttrib4f(Lb,rd,Ya,Kb,Na),lb.x=rd,lb.y=Ya,lb.z=Kb,lb.w=Na;Yb=e.call(this,I,b,0);Qa=!1;tb=null;ub=0;Sa=!1;gc=mb=0;zc=1;uc=0;bb=5126;Lc=Xa=nd=jc=0;sa(Yb)?(Qa=!0,tb=p.createStream(34962,Yb),bb=tb.dtype):(tb=p.getBuffer(Yb))?bb=tb.dtype:"constant"in Yb?(zc=2,"number"===typeof Yb.constant?(nd=Yb.constant,Xa=Lc=jc=0):(nd=0<Yb.constant.length?Yb.constant[0]:0,Xa=1<Yb.constant.length?Yb.constant[1]:0,Lc=2<Yb.constant.length?Yb.constant[2]:0,jc=3<Yb.constant.length?
Yb.constant[3]:0)):(tb=sa(Yb.buffer)?p.createStream(34962,Yb.buffer):p.getBuffer(Yb.buffer),bb="type"in Yb?be[Yb.type]:tb.dtype,Sa=!!Yb.normalized,gc=Yb.size|0,mb=Yb.offset|0,uc=Yb.stride|0,ub=Yb.divisor|0);zb=ja.location;Za=v[zb];if(1===zc){Za.buffer||H.enableVertexAttribArray(zb);Ub=gc||1;if(Za.type!==bb||Za.size!==Ub||Za.buffer!==tb||Za.normalized!==Sa||Za.offset!==mb||Za.stride!==uc)H.bindBuffer(34962,tb.buffer),H.vertexAttribPointer(zb,Ub,bb,Sa,uc,mb),Za.type=bb,Za.size=Ub,Za.buffer=tb,Za.normalized=
Sa,Za.offset=mb,Za.stride=uc;Za.divisor!==ub&&(E.vertexAttribDivisorANGLE(zb,ub),Za.divisor=ub)}else if(Za.buffer&&(H.disableVertexAttribArray(zb),Za.buffer=null),Za.x!==nd||Za.y!==Xa||Za.z!==Lc||Za.w!==jc)H.vertexAttrib4f(zb,nd,Xa,Lc,jc),Za.x=nd,Za.y=Xa,Za.z=Lc,Za.w=jc;sc=x.call(this,I,b,0);Vb=!1;Pb=null;Jc=0;Qb=!1;Dc=oe=0;ud=1;Mc=0;fd=5126;hc=vc=nc=qd=0;sa(sc)?(Vb=!0,Pb=p.createStream(34962,sc),fd=Pb.dtype):(Pb=p.getBuffer(sc))?fd=Pb.dtype:"constant"in sc?(ud=2,"number"===typeof sc.constant?(nc=
sc.constant,vc=hc=qd=0):(nc=0<sc.constant.length?sc.constant[0]:0,vc=1<sc.constant.length?sc.constant[1]:0,hc=2<sc.constant.length?sc.constant[2]:0,qd=3<sc.constant.length?sc.constant[3]:0)):(Pb=sa(sc.buffer)?p.createStream(34962,sc.buffer):p.getBuffer(sc.buffer),fd="type"in sc?be[sc.type]:Pb.dtype,Qb=!!sc.normalized,Dc=sc.size|0,oe=sc.offset|0,Mc=sc.stride|0,Jc=sc.divisor|0);db=na.location;rc=v[db];if(1===ud){rc.buffer||H.enableVertexAttribArray(db);Sb=Dc||1;if(rc.type!==fd||rc.size!==Sb||rc.buffer!==
Pb||rc.normalized!==Qb||rc.offset!==oe||rc.stride!==Mc)H.bindBuffer(34962,Pb.buffer),H.vertexAttribPointer(db,Sb,fd,Qb,Mc,oe),rc.type=fd,rc.size=Sb,rc.buffer=Pb,rc.normalized=Qb,rc.offset=oe,rc.stride=Mc;rc.divisor!==Jc&&(E.vertexAttribDivisorANGLE(db,Jc),rc.divisor=Jc)}else if(rc.buffer&&(H.disableVertexAttribArray(db),rc.buffer=null),rc.x!==nc||rc.y!==vc||rc.z!==hc||rc.w!==qd)H.vertexAttrib4f(db,nc,vc,hc,qd),rc.x=nc,rc.y=vc,rc.z=hc,rc.w=qd;Wb=C.call(this,I,b,0);dc=!1;ic=null;xc=0;Ac=!1;Pc=ad=0;
Qc=1;Rc=0;Xc=5126;kc=Yc=bd=wd=0;sa(Wb)?(dc=!0,ic=p.createStream(34962,Wb),Xc=ic.dtype):(ic=p.getBuffer(Wb))?Xc=ic.dtype:"constant"in Wb?(Qc=2,"number"===typeof Wb.constant?(bd=Wb.constant,Yc=kc=wd=0):(bd=0<Wb.constant.length?Wb.constant[0]:0,Yc=1<Wb.constant.length?Wb.constant[1]:0,kc=2<Wb.constant.length?Wb.constant[2]:0,wd=3<Wb.constant.length?Wb.constant[3]:0)):(ic=sa(Wb.buffer)?p.createStream(34962,Wb.buffer):p.getBuffer(Wb.buffer),Xc="type"in Wb?be[Wb.type]:ic.dtype,Ac=!!Wb.normalized,Pc=Wb.size|
0,ad=Wb.offset|0,Rc=Wb.stride|0,xc=Wb.divisor|0);bc=n.location;Zc=v[bc];if(1===Qc){Zc.buffer||H.enableVertexAttribArray(bc);Uc=Pc||4;if(Zc.type!==Xc||Zc.size!==Uc||Zc.buffer!==ic||Zc.normalized!==Ac||Zc.offset!==ad||Zc.stride!==Rc)H.bindBuffer(34962,ic.buffer),H.vertexAttribPointer(bc,Uc,Xc,Ac,Rc,ad),Zc.type=Xc,Zc.size=Uc,Zc.buffer=ic,Zc.normalized=Ac,Zc.offset=ad,Zc.stride=Rc;Zc.divisor!==xc&&(E.vertexAttribDivisorANGLE(bc,xc),Zc.divisor=xc)}else if(Zc.buffer&&(H.disableVertexAttribArray(bc),Zc.buffer=
null),Zc.x!==bd||Zc.y!==Yc||Zc.z!==kc||Zc.w!==wd)H.vertexAttrib4f(bc,bd,Yc,kc,wd),Zc.x=bd,Zc.y=Yc,Zc.z=kc,Zc.w=wd;cd=L.call(this,I,b,0);yc=!1;id=null;Dd=0;ye=!1;jd=xd=0;uf=1;Nd=0;Yd=5126;Gd=Id=Od=de=0;sa(cd)?(yc=!0,id=p.createStream(34962,cd),Yd=id.dtype):(id=p.getBuffer(cd))?Yd=id.dtype:"constant"in cd?(uf=2,"number"===typeof cd.constant?(Od=cd.constant,Id=Gd=de=0):(Od=0<cd.constant.length?cd.constant[0]:0,Id=1<cd.constant.length?cd.constant[1]:0,Gd=2<cd.constant.length?cd.constant[2]:0,de=3<cd.constant.length?
cd.constant[3]:0)):(id=sa(cd.buffer)?p.createStream(34962,cd.buffer):p.getBuffer(cd.buffer),Yd="type"in cd?be[cd.type]:id.dtype,ye=!!cd.normalized,jd=cd.size|0,xd=cd.offset|0,Nd=cd.stride|0,Dd=cd.divisor|0);od=wa.location;Sc=v[od];if(1===uf){Sc.buffer||H.enableVertexAttribArray(od);vd=jd||4;if(Sc.type!==Yd||Sc.size!==vd||Sc.buffer!==id||Sc.normalized!==ye||Sc.offset!==xd||Sc.stride!==Nd)H.bindBuffer(34962,id.buffer),H.vertexAttribPointer(od,vd,Yd,ye,Nd,xd),Sc.type=Yd,Sc.size=vd,Sc.buffer=id,Sc.normalized=
ye,Sc.offset=xd,Sc.stride=Nd;Sc.divisor!==Dd&&(E.vertexAttribDivisorANGLE(od,Dd),Sc.divisor=Dd)}else if(Sc.buffer&&(H.disableVertexAttribArray(od),Sc.buffer=null),Sc.x!==Od||Sc.y!==Id||Sc.z!==Gd||Sc.w!==de)H.vertexAttrib4f(od,Od,Id,Gd,de),Sc.x=Od,Sc.y=Id,Sc.z=Gd,Sc.w=de;td=K.call(this,I,b,0);kd=!1;yd=null;Ad=0;Ed=!1;je=pe=0;Ne=1;ke=0;ie=5126;le=ee=ue=he=0;sa(td)?(kd=!0,yd=p.createStream(34962,td),ie=yd.dtype):(yd=p.getBuffer(td))?ie=yd.dtype:"constant"in td?(Ne=2,"number"===typeof td.constant?(ue=
td.constant,ee=le=he=0):(ue=0<td.constant.length?td.constant[0]:0,ee=1<td.constant.length?td.constant[1]:0,le=2<td.constant.length?td.constant[2]:0,he=3<td.constant.length?td.constant[3]:0)):(yd=sa(td.buffer)?p.createStream(34962,td.buffer):p.getBuffer(td.buffer),ie="type"in td?be[td.type]:yd.dtype,Ed=!!td.normalized,je=td.size|0,pe=td.offset|0,ke=td.stride|0,Ad=td.divisor|0);Nc=ba.location;gd=v[Nc];if(1===Ne){gd.buffer||H.enableVertexAttribArray(Nc);ve=je||1;if(gd.type!==ie||gd.size!==ve||gd.buffer!==
yd||gd.normalized!==Ed||gd.offset!==pe||gd.stride!==ke)H.bindBuffer(34962,yd.buffer),H.vertexAttribPointer(Nc,ve,ie,Ed,ke,pe),gd.type=ie,gd.size=ve,gd.buffer=yd,gd.normalized=Ed,gd.offset=pe,gd.stride=ke;gd.divisor!==Ad&&(E.vertexAttribDivisorANGLE(Nc,Ad),gd.divisor=Ad)}else if(gd.buffer&&(H.disableVertexAttribArray(Nc),gd.buffer=null),gd.x!==ue||gd.y!==ee||gd.z!==le||gd.w!==he)H.vertexAttrib4f(Nc,ue,ee,le,he),gd.x=ue,gd.y=ee,gd.z=le,gd.w=he;H.uniform1i(G.location,!1);H.uniform1f(Ba.location,I.pixelRatio);
qe=b.scale;H.uniform2f(fa.location,qe[0],qe[1]);Kd=b.scaleFract;H.uniform2f(Ea.location,Kd[0],Kd[1]);Pd=b.translate;H.uniform2f(oa.location,Pd[0],Pd[1]);Qd=b.translateFract;H.uniform2f(ya.location,Qd[0],Qd[1]);Rd=A.call(this,I,b,0);H.uniform2f(pa.location,Rd[0],Rd[1]);H.uniform1f(la.location,b.opacity);H.uniform1i(Ca.location,m.bind());(me=b.markerTexture)&&"framebuffer"===me._reglType&&(me=me.color[0]);Ae=me._texture;H.uniform1i(S.location,Ae.bind());Ce=b.elements;re=null;(re=(Se=sa(Ce))?dd.createStream(Ce):
dd.getElements(Ce))&&H.bindBuffer(34963,re.buffer.buffer);Te=b.offset;if(Oe=b.count)we=va.instances,0<we?re?E.drawElementsInstancedANGLE(0,Oe,re.type,Te<<(re.type-5121>>1),we):E.drawArraysInstancedANGLE(0,Te,Oe,we):0>we&&(re?H.drawElements(0,Oe,re.type,Te<<(re.type-5121>>1)):H.drawArrays(0,Te,Oe)),ua.dirty=!0,Da.setVAO(null),I.viewportWidth=r,I.viewportHeight=B,ra&&(X.cpuTime+=performance.now()-R),ka&&p.destroyStream(N),V&&p.destroyStream(Fa),vb&&p.destroyStream(hb),kb&&p.destroyStream(Wa),Qa&&p.destroyStream(tb),
Vb&&p.destroyStream(Pb),dc&&p.destroyStream(ic),yc&&p.destroyStream(id),kd&&p.destroyStream(yd),m.unbind(),Ae.unbind(),Se&&dd.destroyStream(re)},scope:function(f,e,a){var l,n,v,q,H,g,ma,B,G,T,S,z,J,fa,R,ha,m,cc,A,N,Ma,C,x,O,Z,ba,F,pa,L,wa,Ba,K,Da,ca,ja,Y,ea,Ta,oa,Ea,ya,na,la,qa,xa,ta,Ca,Gb,V,Ha,hd,gb,Ja,Rb,ia,Zb,$b,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Vd,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,Bd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Aa,Dc,Ud,Mc,fd,ge,nc,vc,hc,db,rc,Sb,Wb,dc,ic,
xc,Ac,ad,Pc,Qc,Rc,Xc,ze,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Cd,ne,xd,jd,xe,se,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Qf,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,
Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;l=f.viewport;n=l.x|0;v=l.y|0;q="width"in l?l.width|0:I.framebufferWidth-n;H="height"in l?l.height|0:I.framebufferHeight-v;g=I.viewportWidth;I.viewportWidth=q;ma=I.viewportHeight;I.viewportHeight=H;B=rd[0];rd[0]=n;G=rd[1];rd[1]=v;T=rd[2];rd[2]=q;S=rd[3];rd[3]=H;z=ka[0];ka[0]=0;J=ka[1];ka[1]=0;fa=ka[2];ka[2]=0;R=ka[3];ka[3]=1;ha=Ga.blend_enable;Ga.blend_enable=!0;m=Fa[0];Fa[0]=770;cc=Fa[1];Fa[1]=771;A=Fa[2];Fa[2]=773;N=Fa[3];Fa[3]=1;Ma=Ga.depth_enable;Ga.depth_enable=
!1;C=f.viewport;x=C.x|0;O=C.y|0;Z="width"in C?C.width|0:I.framebufferWidth-x;ba="height"in C?C.height|0:I.framebufferHeight-O;F=oe[0];oe[0]=x;pa=oe[1];oe[1]=O;L=oe[2];oe[2]=Z;wa=oe[3];oe[3]=ba;Ba=Ga.scissor_enable;Ga.scissor_enable=!0;K=Ga.stencil_enable;Ga.stencil_enable=!1;if(Da=ua.profile)ca=performance.now(),X.count++;ja=f.elements;Y=null;Y=(ea=sa(ja))?dd.createStream(ja):dd.getElements(ja);Ta=va.elements;va.elements=Y;oa=f.offset;Ea=va.offset;va.offset=oa;ya=f.count;na=va.count;va.count=ya;la=
va.primitive;va.primitive=0;qa=za[45];za[45]=!1;xa=f.markerTexture;ta=za[48];za[48]=xa;Ca=f.opacity;Gb=za[10];za[10]=Ca;V=t.call(this,I,f,a);Ha=za[46];za[46]=V;hd=za[47];za[47]=da;gb=I.pixelRatio;Ja=za[34];za[34]=gb;Rb=f.scale;ia=za[6];za[6]=Rb;Zb=f.scaleFract;$b=za[7];za[7]=Zb;ac=f.translate;ib=za[8];za[8]=ac;ob=f.translateFract;Ia=za[9];za[9]=ob;qb=y.call(this,I,f,a);Ka=!1;eb=null;fb=0;La=!1;Wa=kb=0;sb=1;rb=0;Pa=5126;Db=Jb=Ra=Vd=0;sa(qb)?(Ka=!0,eb=p.createStream(34962,qb),Pa=eb.dtype):(eb=p.getBuffer(qb))?
Pa=eb.dtype:"constant"in qb?(sb=2,"number"===typeof qb.constant?(Ra=qb.constant,Jb=Db=Vd=0):(Ra=0<qb.constant.length?qb.constant[0]:0,Jb=1<qb.constant.length?qb.constant[1]:0,Db=2<qb.constant.length?qb.constant[2]:0,Vd=3<qb.constant.length?qb.constant[3]:0)):(eb=sa(qb.buffer)?p.createStream(34962,qb.buffer):p.getBuffer(qb.buffer),Pa="type"in qb?be[qb.type]:eb.dtype,La=!!qb.normalized,Wa=qb.size|0,kb=qb.offset|0,rb=qb.stride|0,fb=qb.divisor|0);Na=U.buffer;U.buffer=eb;zd=U.divisor;U.divisor=fb;Ya=U.normalized;
U.normalized=La;Kb=U.offset;U.offset=kb;Lb=U.size;U.size=Wa;lb=U.state;U.state=sb;Oa=U.stride;U.stride=rb;Yb=U.type;U.type=Pa;Qa=U.w;U.w=Vd;tb=U.x;U.x=Ra;ub=U.y;U.y=Jb;Sa=U.z;U.z=Db;mb=u.call(this,I,f,a);gc=!1;zc=null;uc=0;bb=!1;Bd=jc=0;Xa=1;Lc=0;zb=5126;Vb=sc=Ub=Za=0;sa(mb)?(gc=!0,zc=p.createStream(34962,mb),zb=zc.dtype):(zc=p.getBuffer(mb))?zb=zc.dtype:"constant"in mb?(Xa=2,"number"===typeof mb.constant?(Ub=mb.constant,sc=Vb=Za=0):(Ub=0<mb.constant.length?mb.constant[0]:0,sc=1<mb.constant.length?
mb.constant[1]:0,Vb=2<mb.constant.length?mb.constant[2]:0,Za=3<mb.constant.length?mb.constant[3]:0)):(zc=sa(mb.buffer)?p.createStream(34962,mb.buffer):p.getBuffer(mb.buffer),zb="type"in mb?be[mb.type]:zc.dtype,bb=!!mb.normalized,Bd=mb.size|0,jc=mb.offset|0,Lc=mb.stride|0,uc=mb.divisor|0);Pb=Q.buffer;Q.buffer=zc;Jc=Q.divisor;Q.divisor=uc;Qb=Q.normalized;Q.normalized=bb;Aa=Q.offset;Q.offset=jc;Dc=Q.size;Q.size=Bd;Ud=Q.state;Q.state=Xa;Mc=Q.stride;Q.stride=Lc;fd=Q.type;Q.type=zb;ge=Q.w;Q.w=Za;nc=Q.x;
Q.x=Ub;vc=Q.y;Q.y=sc;hc=Q.z;Q.z=Vb;db=ga.call(this,I,f,a);rc=!1;Sb=null;Wb=0;dc=!1;xc=ic=0;Ac=1;ad=0;Pc=5126;ze=Xc=Rc=Qc=0;sa(db)?(rc=!0,Sb=p.createStream(34962,db),Pc=Sb.dtype):(Sb=p.getBuffer(db))?Pc=Sb.dtype:"constant"in db?(Ac=2,"number"===typeof db.constant?(Rc=db.constant,Xc=ze=Qc=0):(Rc=0<db.constant.length?db.constant[0]:0,Xc=1<db.constant.length?db.constant[1]:0,ze=2<db.constant.length?db.constant[2]:0,Qc=3<db.constant.length?db.constant[3]:0)):(Sb=sa(db.buffer)?p.createStream(34962,db.buffer):
p.getBuffer(db.buffer),Pc="type"in db?be[db.type]:Sb.dtype,dc=!!db.normalized,xc=db.size|0,ic=db.offset|0,ad=db.stride|0,Wb=db.divisor|0);bd=c.buffer;c.buffer=Sb;Yc=c.divisor;c.divisor=Wb;kc=c.normalized;c.normalized=dc;bc=c.offset;c.offset=ic;Zc=c.size;c.size=xc;Uc=c.state;c.state=Ac;cd=c.stride;c.stride=ad;yc=c.type;c.type=Pc;id=c.w;c.w=Qc;Cd=c.x;c.x=Rc;ne=c.y;c.y=Xc;xd=c.z;c.z=ze;jd=h.call(this,I,f,a);xe=!1;se=null;Yd=0;de=!1;Id=Od=0;Gd=1;od=0;Sc=5126;yd=kd=td=vd=0;sa(jd)?(xe=!0,se=p.createStream(34962,
jd),Sc=se.dtype):(se=p.getBuffer(jd))?Sc=se.dtype:"constant"in jd?(Gd=2,"number"===typeof jd.constant?(td=jd.constant,kd=yd=vd=0):(td=0<jd.constant.length?jd.constant[0]:0,kd=1<jd.constant.length?jd.constant[1]:0,yd=2<jd.constant.length?jd.constant[2]:0,vd=3<jd.constant.length?jd.constant[3]:0)):(se=sa(jd.buffer)?p.createStream(34962,jd.buffer):p.getBuffer(jd.buffer),Sc="type"in jd?be[jd.type]:se.dtype,de=!!jd.normalized,Id=jd.size|0,Od=jd.offset|0,od=jd.stride|0,Yd=jd.divisor|0);Ad=M.buffer;M.buffer=
se;Ed=M.divisor;M.divisor=Yd;pe=M.normalized;M.normalized=de;je=M.offset;M.offset=Od;Qf=M.size;M.size=Id;ke=M.state;M.state=Gd;ie=M.stride;M.stride=od;he=M.type;M.type=Sc;ue=M.w;M.w=vd;ee=M.x;M.x=td;le=M.y;M.y=kd;Nc=M.z;M.z=yd;gd=r.call(this,I,f,a);ve=!1;qe=null;Kd=0;Pd=!1;Rd=Qd=0;me=1;Ae=0;Ce=5126;Oe=Te=Se=re=0;sa(gd)?(ve=!0,qe=p.createStream(34962,gd),Ce=qe.dtype):(qe=p.getBuffer(gd))?Ce=qe.dtype:"constant"in gd?(me=2,"number"===typeof gd.constant?(Se=gd.constant,Te=Oe=re=0):(Se=0<gd.constant.length?
gd.constant[0]:0,Te=1<gd.constant.length?gd.constant[1]:0,Oe=2<gd.constant.length?gd.constant[2]:0,re=3<gd.constant.length?gd.constant[3]:0)):(qe=sa(gd.buffer)?p.createStream(34962,gd.buffer):p.getBuffer(gd.buffer),Ce="type"in gd?be[gd.type]:qe.dtype,Pd=!!gd.normalized,Rd=gd.size|0,Qd=gd.offset|0,Ae=gd.stride|0,Kd=gd.divisor|0);we=aa.buffer;aa.buffer=qe;Ge=aa.divisor;aa.divisor=Kd;Ie=aa.normalized;aa.normalized=Pd;Je=aa.offset;aa.offset=Qd;Ke=aa.size;aa.size=Rd;He=aa.state;aa.state=me;Md=aa.stride;
aa.stride=Ae;Zd=aa.type;aa.type=Ce;ce=aa.w;aa.w=re;fe=aa.x;aa.x=Se;Le=aa.y;aa.y=Te;Hd=aa.z;aa.z=Oe;Sd=k.call(this,I,f,a);Ee=!1;Me=null;bf=0;af=!1;Pe=Ue=0;$e=1;Ye=0;Ve=5126;Xe=ae=Td=We=0;sa(Sd)?(Ee=!0,Me=p.createStream(34962,Sd),Ve=Me.dtype):(Me=p.getBuffer(Sd))?Ve=Me.dtype:"constant"in Sd?($e=2,"number"===typeof Sd.constant?(Td=Sd.constant,ae=Xe=We=0):(Td=0<Sd.constant.length?Sd.constant[0]:0,ae=1<Sd.constant.length?Sd.constant[1]:0,Xe=2<Sd.constant.length?Sd.constant[2]:0,We=3<Sd.constant.length?
Sd.constant[3]:0)):(Me=sa(Sd.buffer)?p.createStream(34962,Sd.buffer):p.getBuffer(Sd.buffer),Ve="type"in Sd?be[Sd.type]:Me.dtype,af=!!Sd.normalized,Pe=Sd.size|0,Ue=Sd.offset|0,Ye=Sd.stride|0,bf=Sd.divisor|0);hf=w.buffer;w.buffer=Me;mf=w.divisor;w.divisor=bf;ef=w.normalized;w.normalized=af;jf=w.offset;w.offset=Ue;kf=w.size;w.size=Pe;lf=w.state;w.state=$e;qf=w.stride;w.stride=Ye;nf=w.type;w.type=Ve;rf=w.w;w.w=We;Bf=w.x;w.x=Td;Cf=w.y;w.y=ae;Qe=w.z;w.z=Xe;Fe=W.call(this,I,f,a);of=!1;pf=null;Df=0;Gf=!1;
Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(Fe)?(of=!0,pf=p.createStream(34962,Fe),xf=pf.dtype):(pf=p.getBuffer(Fe))?xf=pf.dtype:"constant"in Fe?(Ff=2,"number"===typeof Fe.constant?(yf=Fe.constant,zf=If=vf=0):(yf=0<Fe.constant.length?Fe.constant[0]:0,zf=1<Fe.constant.length?Fe.constant[1]:0,If=2<Fe.constant.length?Fe.constant[2]:0,vf=3<Fe.constant.length?Fe.constant[3]:0)):(pf=sa(Fe.buffer)?p.createStream(34962,Fe.buffer):p.getBuffer(Fe.buffer),xf="type"in Fe?be[Fe.type]:pf.dtype,Gf=!!Fe.normalized,
Ef=Fe.size|0,Af=Fe.offset|0,wf=Fe.stride|0,Df=Fe.divisor|0);Jf=E.buffer;E.buffer=pf;Kf=E.divisor;E.divisor=Df;Lf=E.normalized;E.normalized=Gf;sf=E.offset;E.offset=Af;Rf=E.size;E.size=Ef;Hf=E.state;E.state=Ff;tf=E.stride;E.stride=wf;dg=E.type;E.type=xf;Sf=E.w;E.w=vf;Tf=E.x;E.x=yf;qg=E.y;E.y=zf;ff=E.z;E.z=If;cf=D.call(this,I,f,a);Mf=!1;Nf=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;sa(cf)?(Mf=!0,Nf=p.createStream(34962,cf),Uf=Nf.dtype):(Nf=p.getBuffer(cf))?Uf=Nf.dtype:"constant"in cf?(ig=
2,"number"===typeof cf.constant?(Yf=cf.constant,Zf=jg=Xf=0):(Yf=0<cf.constant.length?cf.constant[0]:0,Zf=1<cf.constant.length?cf.constant[1]:0,jg=2<cf.constant.length?cf.constant[2]:0,Xf=3<cf.constant.length?cf.constant[3]:0)):(Nf=sa(cf.buffer)?p.createStream(34962,cf.buffer):p.getBuffer(cf.buffer),Uf="type"in cf?be[cf.type]:Nf.dtype,fg=!!cf.normalized,hg=cf.size|0,gg=cf.offset|0,Wf=cf.stride|0,eg=cf.divisor|0);rg=d.buffer;d.buffer=Nf;sg=d.divisor;d.divisor=eg;tg=d.normalized;d.normalized=fg;ug=d.offset;
d.offset=gg;vg=d.size;d.size=hg;wg=d.state;d.state=ig;xg=d.stride;d.stride=Wf;yg=d.type;d.type=Uf;zg=d.w;d.w=Xf;Ag=d.x;d.x=Yf;Bg=d.y;d.y=Zf;gf=d.z;d.z=jg;df=P.call(this,I,f,a);Of=!1;Pf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;sa(df)?(Of=!0,Pf=p.createStream(34962,df),Vf=Pf.dtype):(Pf=p.getBuffer(df))?Vf=Pf.dtype:"constant"in df?(og=2,"number"===typeof df.constant?(bg=df.constant,cg=pg=ag=0):(bg=0<df.constant.length?df.constant[0]:0,cg=1<df.constant.length?df.constant[1]:0,pg=2<df.constant.length?
df.constant[2]:0,ag=3<df.constant.length?df.constant[3]:0)):(Pf=sa(df.buffer)?p.createStream(34962,df.buffer):p.getBuffer(df.buffer),Vf="type"in df?be[df.type]:Pf.dtype,lg=!!df.normalized,ng=df.size|0,mg=df.offset|0,$f=df.stride|0,kg=df.divisor|0);Cg=b.buffer;b.buffer=Pf;Dg=b.divisor;b.divisor=kg;Eg=b.normalized;b.normalized=lg;Fg=b.offset;b.offset=mg;Gg=b.size;b.size=ng;Hg=b.state;b.state=og;Ig=b.stride;b.stride=$f;Jg=b.type;b.type=Vf;Kg=b.w;b.w=ag;Lg=b.x;b.x=bg;Mg=b.y;b.y=cg;Ng=b.z;b.z=pg;Og=ra.vert;
ra.vert=44;Pg=ra.frag;ra.frag=43;ua.dirty=!0;e(I,f,a);I.viewportWidth=g;I.viewportHeight=ma;rd[0]=B;rd[1]=G;rd[2]=T;rd[3]=S;ka[0]=z;ka[1]=J;ka[2]=fa;ka[3]=R;Ga.blend_enable=ha;Fa[0]=m;Fa[1]=cc;Fa[2]=A;Fa[3]=N;Ga.depth_enable=Ma;oe[0]=F;oe[1]=pa;oe[2]=L;oe[3]=wa;Ga.scissor_enable=Ba;Ga.stencil_enable=K;Da&&(X.cpuTime+=performance.now()-ca);ea&&dd.destroyStream(Y);va.elements=Ta;va.offset=Ea;va.count=na;va.primitive=la;za[45]=qa;za[48]=ta;za[10]=Gb;za[46]=Ha;za[47]=hd;za[34]=Ja;za[6]=ia;za[7]=$b;za[8]=
ib;za[9]=Ia;Ka&&p.destroyStream(eb);U.buffer=Na;U.divisor=zd;U.normalized=Ya;U.offset=Kb;U.size=Lb;U.state=lb;U.stride=Oa;U.type=Yb;U.w=Qa;U.x=tb;U.y=ub;U.z=Sa;gc&&p.destroyStream(zc);Q.buffer=Pb;Q.divisor=Jc;Q.normalized=Qb;Q.offset=Aa;Q.size=Dc;Q.state=Ud;Q.stride=Mc;Q.type=fd;Q.w=ge;Q.x=nc;Q.y=vc;Q.z=hc;rc&&p.destroyStream(Sb);c.buffer=bd;c.divisor=Yc;c.normalized=kc;c.offset=bc;c.size=Zc;c.state=Uc;c.stride=cd;c.type=yc;c.w=id;c.x=Cd;c.y=ne;c.z=xd;xe&&p.destroyStream(se);M.buffer=Ad;M.divisor=
Ed;M.normalized=pe;M.offset=je;M.size=Qf;M.state=ke;M.stride=ie;M.type=he;M.w=ue;M.x=ee;M.y=le;M.z=Nc;ve&&p.destroyStream(qe);aa.buffer=we;aa.divisor=Ge;aa.normalized=Ie;aa.offset=Je;aa.size=Ke;aa.state=He;aa.stride=Md;aa.type=Zd;aa.w=ce;aa.x=fe;aa.y=Le;aa.z=Hd;Ee&&p.destroyStream(Me);w.buffer=hf;w.divisor=mf;w.normalized=ef;w.offset=jf;w.size=kf;w.state=lf;w.stride=qf;w.type=nf;w.w=rf;w.x=Bf;w.y=Cf;w.z=Qe;of&&p.destroyStream(pf);E.buffer=Jf;E.divisor=Kf;E.normalized=Lf;E.offset=sf;E.size=Rf;E.state=
Hf;E.stride=tf;E.type=dg;E.w=Sf;E.x=Tf;E.y=qg;E.z=ff;Mf&&p.destroyStream(Nf);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;d.x=Ag;d.y=Bg;d.z=gf;Of&&p.destroyStream(Pf);b.buffer=Cg;b.divisor=Dg;b.normalized=Eg;b.offset=Fg;b.size=Gg;b.state=Hg;b.stride=Ig;b.type=Jg;b.w=Kg;b.x=Lg;b.y=Mg;b.z=Ng;ra.vert=Og;ra.frag=Pg;ua.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(a,
X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc){var Ta,v,p,I,ua,va,dd,Gb,ha,H,sa,Ga,ra,za,Da,ka,Z,ta,Ja,Fa,gb,ca,ia,Zb,Ha,$b,Rb,Aa,Bd,oe,Vd,ze,se,Ud,ne,xe,Cd,rd,ge;Ta=a.attributes;v=a.buffer;p=a.context;I=a.current;ua=a.draw;va=a.elements;dd=a.extensions;Gb=a.framebuffer;ha=a.gl;H=a.isBufferArgs;sa=a.next;Ga=a.shader;ra=a.uniforms;za=a.vao;Da=sa.blend_color;ka=I.blend_color;Z=sa.blend_equation;ta=I.blend_equation;
Ja=sa.blend_func;Fa=I.blend_func;gb=sa.colorMask;ca=I.colorMask;ia=sa.depth_range;Zb=I.depth_range;Ha=sa.polygonOffset_offset;$b=I.polygonOffset_offset;Rb=sa.sample_coverage;Aa=I.sample_coverage;Bd=sa.scissor_box;oe=I.scissor_box;Vd=sa.stencil_func;ze=I.stencil_func;se=sa.stencil_opBack;Ud=I.stencil_opBack;ne=sa.stencil_opFront;xe=I.stencil_opFront;Cd=sa.viewport;rd=I.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,
d){var c,f,h,e,a,k;c=Gb.next;c!==Gb.cur&&(c?ha.bindFramebuffer(36160,c.framebuffer):ha.bindFramebuffer(36160,null),Gb.cur=c);if(I.dirty){var q,r,g,w,y,Ga,D,ra,J,E,u,m,A,C,M,x,F,t,P,Q,L,K,U,Da,aa,ga,da,W,Ja,$a,Hc,xb,cb,Mb;q=sa.dither;q!==I.dither&&(q?ha.enable(3024):ha.disable(3024),I.dither=q);r=Z[0];g=Z[1];if(r!==ta[0]||g!==ta[1])ha.blendEquationSeparate(r,g),ta[0]=r,ta[1]=g;w=sa.depth_func;w!==I.depth_func&&(ha.depthFunc(w),I.depth_func=w);y=ia[0];Ga=ia[1];if(y!==Zb[0]||Ga!==Zb[1])ha.depthRange(y,
Ga),Zb[0]=y,Zb[1]=Ga;D=sa.depth_mask;D!==I.depth_mask&&(ha.depthMask(D),I.depth_mask=D);ra=gb[0];J=gb[1];E=gb[2];u=gb[3];if(ra!==ca[0]||J!==ca[1]||E!==ca[2]||u!==ca[3])ha.colorMask(ra,J,E,u),ca[0]=ra,ca[1]=J,ca[2]=E,ca[3]=u;m=sa.cull_enable;m!==I.cull_enable&&(m?ha.enable(2884):ha.disable(2884),I.cull_enable=m);A=sa.cull_face;A!==I.cull_face&&(ha.cullFace(A),I.cull_face=A);C=sa.frontFace;C!==I.frontFace&&(ha.frontFace(C),I.frontFace=C);M=sa.lineWidth;M!==I.lineWidth&&(ha.lineWidth(M),I.lineWidth=
M);x=sa.polygonOffset_enable;x!==I.polygonOffset_enable&&(x?ha.enable(32823):ha.disable(32823),I.polygonOffset_enable=x);F=Ha[0];t=Ha[1];if(F!==$b[0]||t!==$b[1])ha.polygonOffset(F,t),$b[0]=F,$b[1]=t;P=sa.sample_alpha;P!==I.sample_alpha&&(P?ha.enable(32926):ha.disable(32926),I.sample_alpha=P);Q=sa.sample_enable;Q!==I.sample_enable&&(Q?ha.enable(32928):ha.disable(32928),I.sample_enable=Q);L=Rb[0];K=Rb[1];if(L!==Aa[0]||K!==Aa[1])ha.sampleCoverage(L,K),Aa[0]=L,Aa[1]=K;U=sa.stencil_mask;U!==I.stencil_mask&&
(ha.stencilMask(U),I.stencil_mask=U);Da=Vd[0];aa=Vd[1];ga=Vd[2];if(Da!==ze[0]||aa!==ze[1]||ga!==ze[2])ha.stencilFunc(Da,aa,ga),ze[0]=Da,ze[1]=aa,ze[2]=ga;da=ne[0];W=ne[1];Ja=ne[2];$a=ne[3];if(da!==xe[0]||W!==xe[1]||Ja!==xe[2]||$a!==xe[3])ha.stencilOpSeparate(da,W,Ja,$a),xe[0]=da,xe[1]=W,xe[2]=Ja,xe[3]=$a;Hc=se[0];xb=se[1];cb=se[2];Mb=se[3];if(Hc!==Ud[0]||xb!==Ud[1]||cb!==Ud[2]||Mb!==Ud[3])ha.stencilOpSeparate(Hc,xb,cb,Mb),Ud[0]=Hc,Ud[1]=xb,Ud[2]=cb,Ud[3]=Mb}ha.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;
ka[2]=0;ka[3]=1;ha.enable(3042);I.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;ha.disable(2929);I.depth_enable=!1;ha.enable(3089);I.scissor_enable=!0;ha.disable(2960);I.stencil_enable=!1;if(f=I.profile)h=performance.now(),X.count+=d;ha.useProgram(xa.program);e=dd.angle_instanced_arrays;var ab;za.setVAO(null);ha.uniform1i(G.location,!1);ha.uniform1i(pa.location,O.bind());ab=ua.instances;for(a=0;a<d;++a){k=b[a];var nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,
Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Bd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Cd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,uf,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,
pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,Hf,tf;nb=k.viewport;Va=nb.x|0;Tc=nb.y|0;Hb="width"in nb?nb.width|0:p.framebufferWidth-Va;Ib="height"in nb?nb.height|0:p.framebufferHeight-Tc;qc=p.viewportWidth;p.viewportWidth=Hb;Nb=p.viewportHeight;p.viewportHeight=Ib;ha.viewport(Va,Tc,Hb,Ib);rd[0]=Va;rd[1]=Tc;rd[2]=Hb;rd[3]=Ib;jb=k.viewport;Fb=jb.x|0;Cb=jb.y|0;vb="width"in jb?jb.width|0:p.framebufferWidth-Fb;hb="height"in jb?jb.height|0:p.framebufferHeight-Cb;ha.scissor(Fb,Cb,vb,hb);oe[0]=Fb;oe[1]=
Cb;oe[2]=vb;oe[3]=hb;Xb=B.call(this,p,k,a);Ob=!1;pb=null;Ua=0;Tb=!1;ac=yb=0;ib=1;ob=0;Ia=5126;fb=eb=Ka=qb=0;H(Xb)?(Ob=!0,pb=v.createStream(34962,Xb),Ia=pb.dtype):(pb=v.getBuffer(Xb))?Ia=pb.dtype:"constant"in Xb?(ib=2,"number"===typeof Xb.constant?(Ka=Xb.constant,eb=fb=qb=0):(Ka=0<Xb.constant.length?Xb.constant[0]:0,eb=1<Xb.constant.length?Xb.constant[1]:0,fb=2<Xb.constant.length?Xb.constant[2]:0,qb=3<Xb.constant.length?Xb.constant[3]:0)):(pb=H(Xb.buffer)?v.createStream(34962,Xb.buffer):v.getBuffer(Xb.buffer),
Ia="type"in Xb?ge[Xb.type]:pb.dtype,Tb=!!Xb.normalized,ac=Xb.size|0,yb=Xb.offset|0,ob=Xb.stride|0,Ua=Xb.divisor|0);La=ya.location;kb=Ta[La];if(1===ib){kb.buffer||ha.enableVertexAttribArray(La);Wa=ac||1;if(kb.type!==Ia||kb.size!==Wa||kb.buffer!==pb||kb.normalized!==Tb||kb.offset!==yb||kb.stride!==ob)ha.bindBuffer(34962,pb.buffer),ha.vertexAttribPointer(La,Wa,Ia,Tb,ob,yb),kb.type=Ia,kb.size=Wa,kb.buffer=pb,kb.normalized=Tb,kb.offset=yb,kb.stride=ob;kb.divisor!==Ua&&(e.vertexAttribDivisorANGLE(La,Ua),
kb.divisor=Ua)}else if(kb.buffer&&(ha.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==eb||kb.z!==fb||kb.w!==qb)ha.vertexAttrib4f(La,Ka,eb,fb,qb),kb.x=Ka,kb.y=eb,kb.z=fb,kb.w=qb;sb=qa.call(this,p,k,a);rb=!1;Pa=null;Bc=0;Ra=!1;Db=Jb=0;Na=1;Bd=0;Ya=5126;Oa=lb=Lb=Kb=0;H(sb)?(rb=!0,Pa=v.createStream(34962,sb),Ya=Pa.dtype):(Pa=v.getBuffer(sb))?Ya=Pa.dtype:"constant"in sb?(Na=2,"number"===typeof sb.constant?(Lb=sb.constant,lb=Oa=Kb=0):(Lb=0<sb.constant.length?sb.constant[0]:0,lb=1<sb.constant.length?
sb.constant[1]:0,Oa=2<sb.constant.length?sb.constant[2]:0,Kb=3<sb.constant.length?sb.constant[3]:0)):(Pa=H(sb.buffer)?v.createStream(34962,sb.buffer):v.getBuffer(sb.buffer),Ya="type"in sb?ge[sb.type]:Pa.dtype,Ra=!!sb.normalized,Db=sb.size|0,Jb=sb.offset|0,Bd=sb.stride|0,Bc=sb.divisor|0);Yb=ma.location;Qa=Ta[Yb];if(1===Na){Qa.buffer||ha.enableVertexAttribArray(Yb);tb=Db||1;if(Qa.type!==Ya||Qa.size!==tb||Qa.buffer!==Pa||Qa.normalized!==Ra||Qa.offset!==Jb||Qa.stride!==Bd)ha.bindBuffer(34962,Pa.buffer),
ha.vertexAttribPointer(Yb,tb,Ya,Ra,Bd,Jb),Qa.type=Ya,Qa.size=tb,Qa.buffer=Pa,Qa.normalized=Ra,Qa.offset=Jb,Qa.stride=Bd;Qa.divisor!==Bc&&(e.vertexAttribDivisorANGLE(Yb,Bc),Qa.divisor=Bc)}else if(Qa.buffer&&(ha.disableVertexAttribArray(Yb),Qa.buffer=null),Qa.x!==Lb||Qa.y!==lb||Qa.z!==Oa||Qa.w!==Kb)ha.vertexAttrib4f(Yb,Lb,lb,Oa,Kb),Qa.x=Lb,Qa.y=lb,Qa.z=Oa,Qa.w=Kb;ub=V.call(this,p,k,a);Sa=!1;mb=null;gc=0;zc=!1;bb=uc=0;jc=1;nd=0;Xa=5126;Ub=Za=zb=Lc=0;H(ub)?(Sa=!0,mb=v.createStream(34962,ub),Xa=mb.dtype):
(mb=v.getBuffer(ub))?Xa=mb.dtype:"constant"in ub?(jc=2,"number"===typeof ub.constant?(zb=ub.constant,Za=Ub=Lc=0):(zb=0<ub.constant.length?ub.constant[0]:0,Za=1<ub.constant.length?ub.constant[1]:0,Ub=2<ub.constant.length?ub.constant[2]:0,Lc=3<ub.constant.length?ub.constant[3]:0)):(mb=H(ub.buffer)?v.createStream(34962,ub.buffer):v.getBuffer(ub.buffer),Xa="type"in ub?ge[ub.type]:mb.dtype,zc=!!ub.normalized,bb=ub.size|0,uc=ub.offset|0,nd=ub.stride|0,gc=ub.divisor|0);sc=Ma.location;Vb=Ta[sc];if(1===jc){Vb.buffer||
ha.enableVertexAttribArray(sc);Pb=bb||1;if(Vb.type!==Xa||Vb.size!==Pb||Vb.buffer!==mb||Vb.normalized!==zc||Vb.offset!==uc||Vb.stride!==nd)ha.bindBuffer(34962,mb.buffer),ha.vertexAttribPointer(sc,Pb,Xa,zc,nd,uc),Vb.type=Xa,Vb.size=Pb,Vb.buffer=mb,Vb.normalized=zc,Vb.offset=uc,Vb.stride=nd;Vb.divisor!==gc&&(e.vertexAttribDivisorANGLE(sc,gc),Vb.divisor=gc)}else if(Vb.buffer&&(ha.disableVertexAttribArray(sc),Vb.buffer=null),Vb.x!==zb||Vb.y!==Za||Vb.z!==Ub||Vb.w!==Lc)ha.vertexAttrib4f(sc,zb,Za,Ub,Lc),
Vb.x=zb,Vb.y=Za,Vb.z=Ub,Vb.w=Lc;Jc=Y.call(this,p,k,a);Qb=!1;Cd=null;Dc=0;ud=!1;fd=Mc=0;qd=1;nc=0;vc=5126;Sb=rc=db=hc=0;H(Jc)?(Qb=!0,Cd=v.createStream(34962,Jc),vc=Cd.dtype):(Cd=v.getBuffer(Jc))?vc=Cd.dtype:"constant"in Jc?(qd=2,"number"===typeof Jc.constant?(db=Jc.constant,rc=Sb=hc=0):(db=0<Jc.constant.length?Jc.constant[0]:0,rc=1<Jc.constant.length?Jc.constant[1]:0,Sb=2<Jc.constant.length?Jc.constant[2]:0,hc=3<Jc.constant.length?Jc.constant[3]:0)):(Cd=H(Jc.buffer)?v.createStream(34962,Jc.buffer):
v.getBuffer(Jc.buffer),vc="type"in Jc?ge[Jc.type]:Cd.dtype,ud=!!Jc.normalized,fd=Jc.size|0,Mc=Jc.offset|0,nc=Jc.stride|0,Dc=Jc.divisor|0);Wb=cc.location;dc=Ta[Wb];if(1===qd){dc.buffer||ha.enableVertexAttribArray(Wb);ic=fd||1;if(dc.type!==vc||dc.size!==ic||dc.buffer!==Cd||dc.normalized!==ud||dc.offset!==Mc||dc.stride!==nc)ha.bindBuffer(34962,Cd.buffer),ha.vertexAttribPointer(Wb,ic,vc,ud,nc,Mc),dc.type=vc,dc.size=ic,dc.buffer=Cd,dc.normalized=ud,dc.offset=Mc,dc.stride=nc;dc.divisor!==Dc&&(e.vertexAttribDivisorANGLE(Wb,
Dc),dc.divisor=Dc)}else if(dc.buffer&&(ha.disableVertexAttribArray(Wb),dc.buffer=null),dc.x!==db||dc.y!==rc||dc.z!==Sb||dc.w!==hc)ha.vertexAttrib4f(Wb,db,rc,Sb,hc),dc.x=db,dc.y=rc,dc.z=Sb,dc.w=hc;xc=ea.call(this,p,k,a);Ac=!1;ad=null;Pc=0;Qc=!1;Xc=Rc=0;wd=1;bd=0;Yc=5126;Uc=Zc=bc=kc=0;H(xc)?(Ac=!0,ad=v.createStream(34962,xc),Yc=ad.dtype):(ad=v.getBuffer(xc))?Yc=ad.dtype:"constant"in xc?(wd=2,"number"===typeof xc.constant?(bc=xc.constant,Zc=Uc=kc=0):(bc=0<xc.constant.length?xc.constant[0]:0,Zc=1<xc.constant.length?
xc.constant[1]:0,Uc=2<xc.constant.length?xc.constant[2]:0,kc=3<xc.constant.length?xc.constant[3]:0)):(ad=H(xc.buffer)?v.createStream(34962,xc.buffer):v.getBuffer(xc.buffer),Yc="type"in xc?ge[xc.type]:ad.dtype,Qc=!!xc.normalized,Xc=xc.size|0,Rc=xc.offset|0,bd=xc.stride|0,Pc=xc.divisor|0);cd=Ea.location;yc=Ta[cd];if(1===wd){yc.buffer||ha.enableVertexAttribArray(cd);id=Xc||1;if(yc.type!==Yc||yc.size!==id||yc.buffer!==ad||yc.normalized!==Qc||yc.offset!==Rc||yc.stride!==bd)ha.bindBuffer(34962,ad.buffer),
ha.vertexAttribPointer(cd,id,Yc,Qc,bd,Rc),yc.type=Yc,yc.size=id,yc.buffer=ad,yc.normalized=Qc,yc.offset=Rc,yc.stride=bd;yc.divisor!==Pc&&(e.vertexAttribDivisorANGLE(cd,Pc),yc.divisor=Pc)}else if(yc.buffer&&(ha.disableVertexAttribArray(cd),yc.buffer=null),yc.x!==bc||yc.y!==Zc||yc.z!==Uc||yc.w!==kc)ha.vertexAttrib4f(cd,bc,Zc,Uc,kc),yc.x=bc,yc.y=Zc,yc.z=Uc,yc.w=kc;Dd=R.call(this,p,k,a);ye=!1;xd=null;jd=0;uf=!1;Yd=Nd=0;de=1;Od=0;Id=5126;vd=Sc=od=Gd=0;H(Dd)?(ye=!0,xd=v.createStream(34962,Dd),Id=xd.dtype):
(xd=v.getBuffer(Dd))?Id=xd.dtype:"constant"in Dd?(de=2,"number"===typeof Dd.constant?(od=Dd.constant,Sc=vd=Gd=0):(od=0<Dd.constant.length?Dd.constant[0]:0,Sc=1<Dd.constant.length?Dd.constant[1]:0,vd=2<Dd.constant.length?Dd.constant[2]:0,Gd=3<Dd.constant.length?Dd.constant[3]:0)):(xd=H(Dd.buffer)?v.createStream(34962,Dd.buffer):v.getBuffer(Dd.buffer),Id="type"in Dd?ge[Dd.type]:xd.dtype,uf=!!Dd.normalized,Yd=Dd.size|0,Nd=Dd.offset|0,Od=Dd.stride|0,jd=Dd.divisor|0);td=na.location;kd=Ta[td];if(1===de){kd.buffer||
ha.enableVertexAttribArray(td);yd=Yd||1;if(kd.type!==Id||kd.size!==yd||kd.buffer!==xd||kd.normalized!==uf||kd.offset!==Nd||kd.stride!==Od)ha.bindBuffer(34962,xd.buffer),ha.vertexAttribPointer(td,yd,Id,uf,Od,Nd),kd.type=Id,kd.size=yd,kd.buffer=xd,kd.normalized=uf,kd.offset=Nd,kd.stride=Od;kd.divisor!==jd&&(e.vertexAttribDivisorANGLE(td,jd),kd.divisor=jd)}else if(kd.buffer&&(ha.disableVertexAttribArray(td),kd.buffer=null),kd.x!==od||kd.y!==Sc||kd.z!==vd||kd.w!==Gd)ha.vertexAttrib4f(td,od,Sc,vd,Gd),
kd.x=od,kd.y=Sc,kd.z=vd,kd.w=Gd;Ad=T.call(this,p,k,a);Ed=!1;pe=null;je=0;Ne=!1;ie=ke=0;he=1;ue=0;ee=5126;ve=gd=Nc=le=0;H(Ad)?(Ed=!0,pe=v.createStream(34962,Ad),ee=pe.dtype):(pe=v.getBuffer(Ad))?ee=pe.dtype:"constant"in Ad?(he=2,"number"===typeof Ad.constant?(Nc=Ad.constant,gd=ve=le=0):(Nc=0<Ad.constant.length?Ad.constant[0]:0,gd=1<Ad.constant.length?Ad.constant[1]:0,ve=2<Ad.constant.length?Ad.constant[2]:0,le=3<Ad.constant.length?Ad.constant[3]:0)):(pe=H(Ad.buffer)?v.createStream(34962,Ad.buffer):
v.getBuffer(Ad.buffer),ee="type"in Ad?ge[Ad.type]:pe.dtype,Ne=!!Ad.normalized,ie=Ad.size|0,ke=Ad.offset|0,ue=Ad.stride|0,je=Ad.divisor|0);qe=n.location;Kd=Ta[qe];if(1===he){Kd.buffer||ha.enableVertexAttribArray(qe);Pd=ie||4;if(Kd.type!==ee||Kd.size!==Pd||Kd.buffer!==pe||Kd.normalized!==Ne||Kd.offset!==ke||Kd.stride!==ue)ha.bindBuffer(34962,pe.buffer),ha.vertexAttribPointer(qe,Pd,ee,Ne,ue,ke),Kd.type=ee,Kd.size=Pd,Kd.buffer=pe,Kd.normalized=Ne,Kd.offset=ke,Kd.stride=ue;Kd.divisor!==je&&(e.vertexAttribDivisorANGLE(qe,
je),Kd.divisor=je)}else if(Kd.buffer&&(ha.disableVertexAttribArray(qe),Kd.buffer=null),Kd.x!==Nc||Kd.y!==gd||Kd.z!==ve||Kd.w!==le)ha.vertexAttrib4f(qe,Nc,gd,ve,le),Kd.x=Nc,Kd.y=gd,Kd.z=ve,Kd.w=le;Qd=z.call(this,p,k,a);Rd=!1;me=null;Ae=0;Ce=!1;Se=re=0;Te=1;Oe=0;we=5126;Ke=Je=Ie=Ge=0;H(Qd)?(Rd=!0,me=v.createStream(34962,Qd),we=me.dtype):(me=v.getBuffer(Qd))?we=me.dtype:"constant"in Qd?(Te=2,"number"===typeof Qd.constant?(Ie=Qd.constant,Je=Ke=Ge=0):(Ie=0<Qd.constant.length?Qd.constant[0]:0,Je=1<Qd.constant.length?
Qd.constant[1]:0,Ke=2<Qd.constant.length?Qd.constant[2]:0,Ge=3<Qd.constant.length?Qd.constant[3]:0)):(me=H(Qd.buffer)?v.createStream(34962,Qd.buffer):v.getBuffer(Qd.buffer),we="type"in Qd?ge[Qd.type]:me.dtype,Ce=!!Qd.normalized,Se=Qd.size|0,re=Qd.offset|0,Oe=Qd.stride|0,Ae=Qd.divisor|0);He=wa.location;Md=Ta[He];if(1===Te){Md.buffer||ha.enableVertexAttribArray(He);Zd=Se||4;if(Md.type!==we||Md.size!==Zd||Md.buffer!==me||Md.normalized!==Ce||Md.offset!==re||Md.stride!==Oe)ha.bindBuffer(34962,me.buffer),
ha.vertexAttribPointer(He,Zd,we,Ce,Oe,re),Md.type=we,Md.size=Zd,Md.buffer=me,Md.normalized=Ce,Md.offset=re,Md.stride=Oe;Md.divisor!==Ae&&(e.vertexAttribDivisorANGLE(He,Ae),Md.divisor=Ae)}else if(Md.buffer&&(ha.disableVertexAttribArray(He),Md.buffer=null),Md.x!==Ie||Md.y!==Je||Md.z!==Ke||Md.w!==Ge)ha.vertexAttrib4f(He,Ie,Je,Ke,Ge),Md.x=Ie,Md.y=Je,Md.z=Ke,Md.w=Ge;ce=l.call(this,p,k,a);fe=!1;Le=null;Hd=0;Sd=!1;Me=Ee=0;bf=1;af=0;Ue=5126;Ve=Ye=$e=Pe=0;H(ce)?(fe=!0,Le=v.createStream(34962,ce),Ue=Le.dtype):
(Le=v.getBuffer(ce))?Ue=Le.dtype:"constant"in ce?(bf=2,"number"===typeof ce.constant?($e=ce.constant,Ye=Ve=Pe=0):($e=0<ce.constant.length?ce.constant[0]:0,Ye=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,Pe=3<ce.constant.length?ce.constant[3]:0)):(Le=H(ce.buffer)?v.createStream(34962,ce.buffer):v.getBuffer(ce.buffer),Ue="type"in ce?ge[ce.type]:Le.dtype,Sd=!!ce.normalized,Me=ce.size|0,Ee=ce.offset|0,af=ce.stride|0,Hd=ce.divisor|0);We=ba.location;Td=Ta[We];if(1===bf){Td.buffer||
ha.enableVertexAttribArray(We);ae=Me||1;if(Td.type!==Ue||Td.size!==ae||Td.buffer!==Le||Td.normalized!==Sd||Td.offset!==Ee||Td.stride!==af)ha.bindBuffer(34962,Le.buffer),ha.vertexAttribPointer(We,ae,Ue,Sd,af,Ee),Td.type=Ue,Td.size=ae,Td.buffer=Le,Td.normalized=Sd,Td.offset=Ee,Td.stride=af;Td.divisor!==Hd&&(e.vertexAttribDivisorANGLE(We,Hd),Td.divisor=Hd)}else if(Td.buffer&&(ha.disableVertexAttribArray(We),Td.buffer=null),Td.x!==$e||Td.y!==Ye||Td.z!==Ve||Td.w!==Pe)ha.vertexAttrib4f(We,$e,Ye,Ve,Pe),
Td.x=$e,Td.y=Ye,Td.z=Ve,Td.w=Pe;Xe=p.pixelRatio;a&&hf===Xe||(hf=Xe,ha.uniform1f(Ca.location,Xe));mf=N.call(this,p,k,a);ef=mf[0];kf=mf[1];a&&jf===ef&&lf===kf||(jf=ef,lf=kf,ha.uniform2f(la.location,ef,kf));qf=k.scale;nf=qf[0];Bf=qf[1];a&&rf===nf&&Cf===Bf||(rf=nf,Cf=Bf,ha.uniform2f(Ba.location,nf,Bf));Qe=k.scaleFract;Fe=Qe[0];pf=Qe[1];a&&of===Fe&&Df===pf||(of=Fe,Df=pf,ha.uniform2f(fa.location,Fe,pf));Gf=k.translate;Af=Gf[0];Ff=Gf[1];a&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ha.uniform2f(ja.location,Af,Ff));
xf=k.translateFract;vf=xf[0];zf=xf[1];a&&yf===vf&&If===zf||(yf=vf,If=zf,ha.uniform2f(oa.location,vf,zf));Jf=k.opacity;a&&Kf===Jf||(Kf=Jf,ha.uniform1f(S.location,Jf));Lf=k.elements;sf=null;(sf=(Rf=H(Lf))?va.createStream(Lf):va.getElements(Lf))&&ha.bindBuffer(34963,sf.buffer.buffer);Hf=k.offset;if(tf=k.count)0<ab?sf?e.drawElementsInstancedANGLE(0,tf,sf.type,Hf<<(sf.type-5121>>1),ab):e.drawArraysInstancedANGLE(0,Hf,tf,ab):0>ab&&(sf?ha.drawElements(0,tf,sf.type,Hf<<(sf.type-5121>>1)):ha.drawArrays(0,
Hf,tf)),p.viewportWidth=qc,p.viewportHeight=Nb,Ob&&v.destroyStream(pb),rb&&v.destroyStream(Pa),Sa&&v.destroyStream(mb),Qb&&v.destroyStream(Cd),Ac&&v.destroyStream(ad),ye&&v.destroyStream(xd),Ed&&v.destroyStream(pe),Rd&&v.destroyStream(me),fe&&v.destroyStream(Le),Rf&&va.destroyStream(sf)}O.unbind();I.dirty=!0;za.setVAO(null);f&&(X.cpuTime+=performance.now()-h)},draw:function(b){var d,c,h,a,k,l,r,B,w,y,Ga,T,D,z,ra,E,u,R,N,M,O,t,P,Q,U,Da,aa,ga,Y,ea,da,W,qa,xa,V,hd,Ja,Hc,xb,cb,Mb,ab,nb,Va,Bd,Hb,Ib,qc,
Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Cd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd,ye,xd,jd,uf,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se;d=Gb.next;d!==Gb.cur&&(d?ha.bindFramebuffer(36160,d.framebuffer):ha.bindFramebuffer(36160,null),Gb.cur=d);
if(I.dirty){var Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf;Te=sa.dither;Te!==I.dither&&(Te?ha.enable(3024):ha.disable(3024),I.dither=Te);Oe=Z[0];we=Z[1];if(Oe!==ta[0]||we!==ta[1])ha.blendEquationSeparate(Oe,we),ta[0]=Oe,ta[1]=we;Ge=sa.depth_func;Ge!==I.depth_func&&(ha.depthFunc(Ge),I.depth_func=Ge);Ie=ia[0];Je=ia[1];if(Ie!==Zb[0]||Je!==Zb[1])ha.depthRange(Ie,Je),Zb[0]=Ie,Zb[1]=Je;Ke=sa.depth_mask;Ke!==I.depth_mask&&(ha.depthMask(Ke),I.depth_mask=
Ke);He=gb[0];Md=gb[1];Zd=gb[2];ce=gb[3];if(He!==ca[0]||Md!==ca[1]||Zd!==ca[2]||ce!==ca[3])ha.colorMask(He,Md,Zd,ce),ca[0]=He,ca[1]=Md,ca[2]=Zd,ca[3]=ce;fe=sa.cull_enable;fe!==I.cull_enable&&(fe?ha.enable(2884):ha.disable(2884),I.cull_enable=fe);Le=sa.cull_face;Le!==I.cull_face&&(ha.cullFace(Le),I.cull_face=Le);Hd=sa.frontFace;Hd!==I.frontFace&&(ha.frontFace(Hd),I.frontFace=Hd);Sd=sa.lineWidth;Sd!==I.lineWidth&&(ha.lineWidth(Sd),I.lineWidth=Sd);Ee=sa.polygonOffset_enable;Ee!==I.polygonOffset_enable&&
(Ee?ha.enable(32823):ha.disable(32823),I.polygonOffset_enable=Ee);Me=Ha[0];bf=Ha[1];if(Me!==$b[0]||bf!==$b[1])ha.polygonOffset(Me,bf),$b[0]=Me,$b[1]=bf;af=sa.sample_alpha;af!==I.sample_alpha&&(af?ha.enable(32926):ha.disable(32926),I.sample_alpha=af);Ue=sa.sample_enable;Ue!==I.sample_enable&&(Ue?ha.enable(32928):ha.disable(32928),I.sample_enable=Ue);Pe=Rb[0];$e=Rb[1];if(Pe!==Aa[0]||$e!==Aa[1])ha.sampleCoverage(Pe,$e),Aa[0]=Pe,Aa[1]=$e;Ye=sa.stencil_mask;Ye!==I.stencil_mask&&(ha.stencilMask(Ye),I.stencil_mask=
Ye);Ve=Vd[0];We=Vd[1];Td=Vd[2];if(Ve!==ze[0]||We!==ze[1]||Td!==ze[2])ha.stencilFunc(Ve,We,Td),ze[0]=Ve,ze[1]=We,ze[2]=Td;ae=ne[0];Xe=ne[1];hf=ne[2];mf=ne[3];if(ae!==xe[0]||Xe!==xe[1]||hf!==xe[2]||mf!==xe[3])ha.stencilOpSeparate(ae,Xe,hf,mf),xe[0]=ae,xe[1]=Xe,xe[2]=hf,xe[3]=mf;ef=se[0];jf=se[1];kf=se[2];lf=se[3];if(ef!==Ud[0]||jf!==Ud[1]||kf!==Ud[2]||lf!==Ud[3])ha.stencilOpSeparate(ef,jf,kf,lf),Ud[0]=ef,Ud[1]=jf,Ud[2]=kf,Ud[3]=lf}c=b.viewport;h=c.x|0;a=c.y|0;k="width"in c?c.width|0:p.framebufferWidth-
h;l="height"in c?c.height|0:p.framebufferHeight-a;r=p.viewportWidth;p.viewportWidth=k;B=p.viewportHeight;p.viewportHeight=l;ha.viewport(h,a,k,l);rd[0]=h;rd[1]=a;rd[2]=k;rd[3]=l;ha.blendColor(0,0,0,1);ka[0]=0;ka[1]=0;ka[2]=0;ka[3]=1;ha.enable(3042);I.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Fa[0]=770;Fa[1]=771;Fa[2]=773;Fa[3]=1;ha.disable(2929);I.depth_enable=!1;w=b.viewport;y=w.x|0;Ga=w.y|0;T="width"in w?w.width|0:p.framebufferWidth-y;D="height"in w?w.height|0:p.framebufferHeight-Ga;ha.scissor(y,
Ga,T,D);oe[0]=y;oe[1]=Ga;oe[2]=T;oe[3]=D;ha.enable(3089);I.scissor_enable=!0;ha.disable(2960);I.stencil_enable=!1;if(z=I.profile)ra=performance.now(),X.count++;ha.useProgram(F.program);E=dd.angle_instanced_arrays;za.setVAO(null);u=J.call(this,p,b,0);R=!1;N=null;M=0;O=!1;P=t=0;Q=1;U=0;Da=5126;ea=Y=ga=aa=0;H(u)?(R=!0,N=v.createStream(34962,u),Da=N.dtype):(N=v.getBuffer(u))?Da=N.dtype:"constant"in u?(Q=2,"number"===typeof u.constant?(ga=u.constant,Y=ea=aa=0):(ga=0<u.constant.length?u.constant[0]:0,Y=
1<u.constant.length?u.constant[1]:0,ea=2<u.constant.length?u.constant[2]:0,aa=3<u.constant.length?u.constant[3]:0)):(N=H(u.buffer)?v.createStream(34962,u.buffer):v.getBuffer(u.buffer),Da="type"in u?ge[u.type]:N.dtype,O=!!u.normalized,P=u.size|0,t=u.offset|0,U=u.stride|0,M=u.divisor|0);da=ya.location;W=Ta[da];if(1===Q){W.buffer||ha.enableVertexAttribArray(da);qa=P||1;if(W.type!==Da||W.size!==qa||W.buffer!==N||W.normalized!==O||W.offset!==t||W.stride!==U)ha.bindBuffer(34962,N.buffer),ha.vertexAttribPointer(da,
qa,Da,O,U,t),W.type=Da,W.size=qa,W.buffer=N,W.normalized=O,W.offset=t,W.stride=U;W.divisor!==M&&(E.vertexAttribDivisorANGLE(da,M),W.divisor=M)}else if(W.buffer&&(ha.disableVertexAttribArray(da),W.buffer=null),W.x!==ga||W.y!==Y||W.z!==ea||W.w!==aa)ha.vertexAttrib4f(da,ga,Y,ea,aa),W.x=ga,W.y=Y,W.z=ea,W.w=aa;xa=g.call(this,p,b,0);V=!1;hd=null;Ja=0;Hc=!1;cb=xb=0;Mb=1;ab=0;nb=5126;Ib=Hb=Bd=Va=0;H(xa)?(V=!0,hd=v.createStream(34962,xa),nb=hd.dtype):(hd=v.getBuffer(xa))?nb=hd.dtype:"constant"in xa?(Mb=2,
"number"===typeof xa.constant?(Bd=xa.constant,Hb=Ib=Va=0):(Bd=0<xa.constant.length?xa.constant[0]:0,Hb=1<xa.constant.length?xa.constant[1]:0,Ib=2<xa.constant.length?xa.constant[2]:0,Va=3<xa.constant.length?xa.constant[3]:0)):(hd=H(xa.buffer)?v.createStream(34962,xa.buffer):v.getBuffer(xa.buffer),nb="type"in xa?ge[xa.type]:hd.dtype,Hc=!!xa.normalized,cb=xa.size|0,xb=xa.offset|0,ab=xa.stride|0,Ja=xa.divisor|0);qc=ma.location;Nb=Ta[qc];if(1===Mb){Nb.buffer||ha.enableVertexAttribArray(qc);jb=cb||1;if(Nb.type!==
nb||Nb.size!==jb||Nb.buffer!==hd||Nb.normalized!==Hc||Nb.offset!==xb||Nb.stride!==ab)ha.bindBuffer(34962,hd.buffer),ha.vertexAttribPointer(qc,jb,nb,Hc,ab,xb),Nb.type=nb,Nb.size=jb,Nb.buffer=hd,Nb.normalized=Hc,Nb.offset=xb,Nb.stride=ab;Nb.divisor!==Ja&&(E.vertexAttribDivisorANGLE(qc,Ja),Nb.divisor=Ja)}else if(Nb.buffer&&(ha.disableVertexAttribArray(qc),Nb.buffer=null),Nb.x!==Bd||Nb.y!==Hb||Nb.z!==Ib||Nb.w!==Va)ha.vertexAttrib4f(qc,Bd,Hb,Ib,Va),Nb.x=Bd,Nb.y=Hb,Nb.z=Ib,Nb.w=Va;Fb=f.call(this,p,b,0);
Cb=!1;vb=null;hb=0;Xb=!1;pb=Ob=0;Ua=1;Tb=0;yb=5126;Ia=ob=ib=ac=0;H(Fb)?(Cb=!0,vb=v.createStream(34962,Fb),yb=vb.dtype):(vb=v.getBuffer(Fb))?yb=vb.dtype:"constant"in Fb?(Ua=2,"number"===typeof Fb.constant?(ib=Fb.constant,ob=Ia=ac=0):(ib=0<Fb.constant.length?Fb.constant[0]:0,ob=1<Fb.constant.length?Fb.constant[1]:0,Ia=2<Fb.constant.length?Fb.constant[2]:0,ac=3<Fb.constant.length?Fb.constant[3]:0)):(vb=H(Fb.buffer)?v.createStream(34962,Fb.buffer):v.getBuffer(Fb.buffer),yb="type"in Fb?ge[Fb.type]:vb.dtype,
Xb=!!Fb.normalized,pb=Fb.size|0,Ob=Fb.offset|0,Tb=Fb.stride|0,hb=Fb.divisor|0);qb=Ma.location;Ka=Ta[qb];if(1===Ua){Ka.buffer||ha.enableVertexAttribArray(qb);eb=pb||1;if(Ka.type!==yb||Ka.size!==eb||Ka.buffer!==vb||Ka.normalized!==Xb||Ka.offset!==Ob||Ka.stride!==Tb)ha.bindBuffer(34962,vb.buffer),ha.vertexAttribPointer(qb,eb,yb,Xb,Tb,Ob),Ka.type=yb,Ka.size=eb,Ka.buffer=vb,Ka.normalized=Xb,Ka.offset=Ob,Ka.stride=Tb;Ka.divisor!==hb&&(E.vertexAttribDivisorANGLE(qb,hb),Ka.divisor=hb)}else if(Ka.buffer&&
(ha.disableVertexAttribArray(qb),Ka.buffer=null),Ka.x!==ib||Ka.y!==ob||Ka.z!==Ia||Ka.w!==ac)ha.vertexAttrib4f(qb,ib,ob,Ia,ac),Ka.x=ib,Ka.y=ob,Ka.z=Ia,Ka.w=ac;fb=q.call(this,p,b,0);La=!1;kb=null;Wa=0;sb=!1;Pa=rb=0;Bc=1;Ra=0;Jb=5126;Ya=Cd=Na=Db=0;H(fb)?(La=!0,kb=v.createStream(34962,fb),Jb=kb.dtype):(kb=v.getBuffer(fb))?Jb=kb.dtype:"constant"in fb?(Bc=2,"number"===typeof fb.constant?(Na=fb.constant,Cd=Ya=Db=0):(Na=0<fb.constant.length?fb.constant[0]:0,Cd=1<fb.constant.length?fb.constant[1]:0,Ya=2<fb.constant.length?
fb.constant[2]:0,Db=3<fb.constant.length?fb.constant[3]:0)):(kb=H(fb.buffer)?v.createStream(34962,fb.buffer):v.getBuffer(fb.buffer),Jb="type"in fb?ge[fb.type]:kb.dtype,sb=!!fb.normalized,Pa=fb.size|0,rb=fb.offset|0,Ra=fb.stride|0,Wa=fb.divisor|0);Kb=cc.location;Lb=Ta[Kb];if(1===Bc){Lb.buffer||ha.enableVertexAttribArray(Kb);lb=Pa||1;if(Lb.type!==Jb||Lb.size!==lb||Lb.buffer!==kb||Lb.normalized!==sb||Lb.offset!==rb||Lb.stride!==Ra)ha.bindBuffer(34962,kb.buffer),ha.vertexAttribPointer(Kb,lb,Jb,sb,Ra,
rb),Lb.type=Jb,Lb.size=lb,Lb.buffer=kb,Lb.normalized=sb,Lb.offset=rb,Lb.stride=Ra;Lb.divisor!==Wa&&(E.vertexAttribDivisorANGLE(Kb,Wa),Lb.divisor=Wa)}else if(Lb.buffer&&(ha.disableVertexAttribArray(Kb),Lb.buffer=null),Lb.x!==Na||Lb.y!==Cd||Lb.z!==Ya||Lb.w!==Db)ha.vertexAttrib4f(Kb,Na,Cd,Ya,Db),Lb.x=Na,Lb.y=Cd,Lb.z=Ya,Lb.w=Db;Oa=e.call(this,p,b,0);Yb=!1;Qa=null;tb=0;ub=!1;mb=Sa=0;gc=1;zc=0;uc=5126;Xa=nd=jc=bb=0;H(Oa)?(Yb=!0,Qa=v.createStream(34962,Oa),uc=Qa.dtype):(Qa=v.getBuffer(Oa))?uc=Qa.dtype:"constant"in
Oa?(gc=2,"number"===typeof Oa.constant?(jc=Oa.constant,nd=Xa=bb=0):(jc=0<Oa.constant.length?Oa.constant[0]:0,nd=1<Oa.constant.length?Oa.constant[1]:0,Xa=2<Oa.constant.length?Oa.constant[2]:0,bb=3<Oa.constant.length?Oa.constant[3]:0)):(Qa=H(Oa.buffer)?v.createStream(34962,Oa.buffer):v.getBuffer(Oa.buffer),uc="type"in Oa?ge[Oa.type]:Qa.dtype,ub=!!Oa.normalized,mb=Oa.size|0,Sa=Oa.offset|0,zc=Oa.stride|0,tb=Oa.divisor|0);Lc=Ea.location;zb=Ta[Lc];if(1===gc){zb.buffer||ha.enableVertexAttribArray(Lc);Za=
mb||1;if(zb.type!==uc||zb.size!==Za||zb.buffer!==Qa||zb.normalized!==ub||zb.offset!==Sa||zb.stride!==zc)ha.bindBuffer(34962,Qa.buffer),ha.vertexAttribPointer(Lc,Za,uc,ub,zc,Sa),zb.type=uc,zb.size=Za,zb.buffer=Qa,zb.normalized=ub,zb.offset=Sa,zb.stride=zc;zb.divisor!==tb&&(E.vertexAttribDivisorANGLE(Lc,tb),zb.divisor=tb)}else if(zb.buffer&&(ha.disableVertexAttribArray(Lc),zb.buffer=null),zb.x!==jc||zb.y!==nd||zb.z!==Xa||zb.w!==bb)ha.vertexAttrib4f(Lc,jc,nd,Xa,bb),zb.x=jc,zb.y=nd,zb.z=Xa,zb.w=bb;Ub=
x.call(this,p,b,0);sc=!1;Vb=null;Pb=0;Jc=!1;Xd=Qb=0;Dc=1;ud=0;Mc=5126;vc=nc=qd=fd=0;H(Ub)?(sc=!0,Vb=v.createStream(34962,Ub),Mc=Vb.dtype):(Vb=v.getBuffer(Ub))?Mc=Vb.dtype:"constant"in Ub?(Dc=2,"number"===typeof Ub.constant?(qd=Ub.constant,nc=vc=fd=0):(qd=0<Ub.constant.length?Ub.constant[0]:0,nc=1<Ub.constant.length?Ub.constant[1]:0,vc=2<Ub.constant.length?Ub.constant[2]:0,fd=3<Ub.constant.length?Ub.constant[3]:0)):(Vb=H(Ub.buffer)?v.createStream(34962,Ub.buffer):v.getBuffer(Ub.buffer),Mc="type"in
Ub?ge[Ub.type]:Vb.dtype,Jc=!!Ub.normalized,Xd=Ub.size|0,Qb=Ub.offset|0,ud=Ub.stride|0,Pb=Ub.divisor|0);hc=na.location;db=Ta[hc];if(1===Dc){db.buffer||ha.enableVertexAttribArray(hc);rc=Xd||1;if(db.type!==Mc||db.size!==rc||db.buffer!==Vb||db.normalized!==Jc||db.offset!==Qb||db.stride!==ud)ha.bindBuffer(34962,Vb.buffer),ha.vertexAttribPointer(hc,rc,Mc,Jc,ud,Qb),db.type=Mc,db.size=rc,db.buffer=Vb,db.normalized=Jc,db.offset=Qb,db.stride=ud;db.divisor!==Pb&&(E.vertexAttribDivisorANGLE(hc,Pb),db.divisor=
Pb)}else if(db.buffer&&(ha.disableVertexAttribArray(hc),db.buffer=null),db.x!==qd||db.y!==nc||db.z!==vc||db.w!==fd)ha.vertexAttrib4f(hc,qd,nc,vc,fd),db.x=qd,db.y=nc,db.z=vc,db.w=fd;Sb=C.call(this,p,b,0);Wb=!1;dc=null;ic=0;xc=!1;ad=Ac=0;Pc=1;Qc=0;Rc=5126;Yc=bd=wd=Xc=0;H(Sb)?(Wb=!0,dc=v.createStream(34962,Sb),Rc=dc.dtype):(dc=v.getBuffer(Sb))?Rc=dc.dtype:"constant"in Sb?(Pc=2,"number"===typeof Sb.constant?(wd=Sb.constant,bd=Yc=Xc=0):(wd=0<Sb.constant.length?Sb.constant[0]:0,bd=1<Sb.constant.length?
Sb.constant[1]:0,Yc=2<Sb.constant.length?Sb.constant[2]:0,Xc=3<Sb.constant.length?Sb.constant[3]:0)):(dc=H(Sb.buffer)?v.createStream(34962,Sb.buffer):v.getBuffer(Sb.buffer),Rc="type"in Sb?ge[Sb.type]:dc.dtype,xc=!!Sb.normalized,ad=Sb.size|0,Ac=Sb.offset|0,Qc=Sb.stride|0,ic=Sb.divisor|0);kc=n.location;bc=Ta[kc];if(1===Pc){bc.buffer||ha.enableVertexAttribArray(kc);Zc=ad||4;if(bc.type!==Rc||bc.size!==Zc||bc.buffer!==dc||bc.normalized!==xc||bc.offset!==Ac||bc.stride!==Qc)ha.bindBuffer(34962,dc.buffer),
ha.vertexAttribPointer(kc,Zc,Rc,xc,Qc,Ac),bc.type=Rc,bc.size=Zc,bc.buffer=dc,bc.normalized=xc,bc.offset=Ac,bc.stride=Qc;bc.divisor!==ic&&(E.vertexAttribDivisorANGLE(kc,ic),bc.divisor=ic)}else if(bc.buffer&&(ha.disableVertexAttribArray(kc),bc.buffer=null),bc.x!==wd||bc.y!==bd||bc.z!==Yc||bc.w!==Xc)ha.vertexAttrib4f(kc,wd,bd,Yc,Xc),bc.x=wd,bc.y=bd,bc.z=Yc,bc.w=Xc;Uc=L.call(this,p,b,0);cd=!1;yc=null;id=0;Dd=!1;xd=ye=0;jd=1;uf=0;Nd=5126;Id=Od=de=Yd=0;H(Uc)?(cd=!0,yc=v.createStream(34962,Uc),Nd=yc.dtype):
(yc=v.getBuffer(Uc))?Nd=yc.dtype:"constant"in Uc?(jd=2,"number"===typeof Uc.constant?(de=Uc.constant,Od=Id=Yd=0):(de=0<Uc.constant.length?Uc.constant[0]:0,Od=1<Uc.constant.length?Uc.constant[1]:0,Id=2<Uc.constant.length?Uc.constant[2]:0,Yd=3<Uc.constant.length?Uc.constant[3]:0)):(yc=H(Uc.buffer)?v.createStream(34962,Uc.buffer):v.getBuffer(Uc.buffer),Nd="type"in Uc?ge[Uc.type]:yc.dtype,Dd=!!Uc.normalized,xd=Uc.size|0,ye=Uc.offset|0,uf=Uc.stride|0,id=Uc.divisor|0);Gd=wa.location;od=Ta[Gd];if(1===jd){od.buffer||
ha.enableVertexAttribArray(Gd);Sc=xd||4;if(od.type!==Nd||od.size!==Sc||od.buffer!==yc||od.normalized!==Dd||od.offset!==ye||od.stride!==uf)ha.bindBuffer(34962,yc.buffer),ha.vertexAttribPointer(Gd,Sc,Nd,Dd,uf,ye),od.type=Nd,od.size=Sc,od.buffer=yc,od.normalized=Dd,od.offset=ye,od.stride=uf;od.divisor!==id&&(E.vertexAttribDivisorANGLE(Gd,id),od.divisor=id)}else if(od.buffer&&(ha.disableVertexAttribArray(Gd),od.buffer=null),od.x!==de||od.y!==Od||od.z!==Id||od.w!==Yd)ha.vertexAttrib4f(Gd,de,Od,Id,Yd),
od.x=de,od.y=Od,od.z=Id,od.w=Yd;vd=K.call(this,p,b,0);td=!1;kd=null;yd=0;Ad=!1;pe=Ed=0;je=1;Ne=0;ke=5126;ee=ue=he=ie=0;H(vd)?(td=!0,kd=v.createStream(34962,vd),ke=kd.dtype):(kd=v.getBuffer(vd))?ke=kd.dtype:"constant"in vd?(je=2,"number"===typeof vd.constant?(he=vd.constant,ue=ee=ie=0):(he=0<vd.constant.length?vd.constant[0]:0,ue=1<vd.constant.length?vd.constant[1]:0,ee=2<vd.constant.length?vd.constant[2]:0,ie=3<vd.constant.length?vd.constant[3]:0)):(kd=H(vd.buffer)?v.createStream(34962,vd.buffer):
v.getBuffer(vd.buffer),ke="type"in vd?ge[vd.type]:kd.dtype,Ad=!!vd.normalized,pe=vd.size|0,Ed=vd.offset|0,Ne=vd.stride|0,yd=vd.divisor|0);le=ba.location;Nc=Ta[le];if(1===je){Nc.buffer||ha.enableVertexAttribArray(le);gd=pe||1;if(Nc.type!==ke||Nc.size!==gd||Nc.buffer!==kd||Nc.normalized!==Ad||Nc.offset!==Ed||Nc.stride!==Ne)ha.bindBuffer(34962,kd.buffer),ha.vertexAttribPointer(le,gd,ke,Ad,Ne,Ed),Nc.type=ke,Nc.size=gd,Nc.buffer=kd,Nc.normalized=Ad,Nc.offset=Ed,Nc.stride=Ne;Nc.divisor!==yd&&(E.vertexAttribDivisorANGLE(le,
yd),Nc.divisor=yd)}else if(Nc.buffer&&(ha.disableVertexAttribArray(le),Nc.buffer=null),Nc.x!==he||Nc.y!==ue||Nc.z!==ee||Nc.w!==ie)ha.vertexAttrib4f(le,he,ue,ee,ie),Nc.x=he,Nc.y=ue,Nc.z=ee,Nc.w=ie;ha.uniform1i(G.location,!1);ha.uniform1f(Ca.location,p.pixelRatio);ve=A.call(this,p,b,0);ha.uniform2f(la.location,ve[0],ve[1]);qe=b.scale;ha.uniform2f(Ba.location,qe[0],qe[1]);Kd=b.scaleFract;ha.uniform2f(fa.location,Kd[0],Kd[1]);Pd=b.translate;ha.uniform2f(ja.location,Pd[0],Pd[1]);Qd=b.translateFract;ha.uniform2f(oa.location,
Qd[0],Qd[1]);ha.uniform1f(S.location,b.opacity);ha.uniform1i(pa.location,m.bind());Rd=b.elements;me=null;(me=(Ae=H(Rd))?va.createStream(Rd):va.getElements(Rd))&&ha.bindBuffer(34963,me.buffer.buffer);Ce=b.offset;if(re=b.count)Se=ua.instances,0<Se?me?E.drawElementsInstancedANGLE(0,re,me.type,Ce<<(me.type-5121>>1),Se):E.drawArraysInstancedANGLE(0,Ce,re,Se):0>Se&&(me?ha.drawElements(0,re,me.type,Ce<<(me.type-5121>>1)):ha.drawArrays(0,Ce,re)),I.dirty=!0,za.setVAO(null),p.viewportWidth=r,p.viewportHeight=
B,z&&(X.cpuTime+=performance.now()-ra),R&&v.destroyStream(N),V&&v.destroyStream(hd),Cb&&v.destroyStream(vb),La&&v.destroyStream(kb),Yb&&v.destroyStream(Qa),sc&&v.destroyStream(Vb),Wb&&v.destroyStream(dc),cd&&v.destroyStream(yc),td&&v.destroyStream(kd),m.unbind(),Ae&&va.destroyStream(me)},scope:function(f,e,a){var l,n,q,g,ma,B,G,T,z,S,J,R,fa,m,ha,A,N,cc,Ma,ka,C,x,O,Z,F,ba,za,L,pa,K,wa,Ba,ca,ja,Y,ea,Ta,oa,xa,Ea,ya,na,qa,la,ta,Ca,Gb,V,Ha,Fa,hd,dd,gb,Rb,ia,Ua,Zb,$b,Vd,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,
rb,Pa,rd,Ra,Jb,Db,Na,zd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,Aa,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Ud,Dc,oe,Mc,ze,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,ne,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,se,xe,xd,jd,Qf,Nd,Yd,de,Od,Id,Gd,od,Sc,vd,td,kd,yd,Ad,Ed,pe,je,Ne,ke,ie,he,ue,ee,le,Nc,gd,ve,qe,Kd,Pd,Qd,Rd,me,Ae,Ce,re,Se,Te,Oe,we,Ge,Ie,Je,Ke,He,Md,Zd,ce,fe,Le,Hd,Sd,Ee,Me,bf,af,Ue,Pe,$e,Ye,Ve,We,Td,ae,Xe,hf,mf,ef,jf,kf,lf,qf,nf,rf,Bf,Cf,Qe,Fe,of,pf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,sf,Rf,
Hf,tf,dg,Sf,Tf,qg,ff,cf,Mf,Nf,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;l=f.viewport;n=l.x|0;q=l.y|0;g="width"in l?l.width|0:p.framebufferWidth-n;ma="height"in l?l.height|0:p.framebufferHeight-q;B=p.viewportWidth;p.viewportWidth=g;G=p.viewportHeight;p.viewportHeight=ma;T=Cd[0];Cd[0]=n;z=Cd[1];Cd[1]=q;S=Cd[2];Cd[2]=g;J=Cd[3];Cd[3]=ma;R=Da[0];Da[0]=0;fa=Da[1];Da[1]=0;m=Da[2];Da[2]=0;ha=Da[3];
Da[3]=1;A=sa.blend_enable;sa.blend_enable=!0;N=Ja[0];Ja[0]=770;cc=Ja[1];Ja[1]=771;Ma=Ja[2];Ja[2]=773;ka=Ja[3];Ja[3]=1;C=sa.depth_enable;sa.depth_enable=!1;x=f.viewport;O=x.x|0;Z=x.y|0;F="width"in x?x.width|0:p.framebufferWidth-O;ba="height"in x?x.height|0:p.framebufferHeight-Z;za=Bd[0];Bd[0]=O;L=Bd[1];Bd[1]=Z;pa=Bd[2];Bd[2]=F;K=Bd[3];Bd[3]=ba;wa=sa.scissor_enable;sa.scissor_enable=!0;Ba=sa.stencil_enable;sa.stencil_enable=!1;if(ca=I.profile)ja=performance.now(),X.count++;Y=f.elements;ea=null;ea=(Ta=
H(Y))?va.createStream(Y):va.getElements(Y);oa=ua.elements;ua.elements=ea;xa=f.offset;Ea=ua.offset;ua.offset=xa;ya=f.count;na=ua.count;ua.count=ya;qa=ua.primitive;ua.primitive=0;la=ra[45];ra[45]=!1;ta=f.markerTexture;Ca=ra[48];ra[48]=ta;Gb=f.opacity;V=ra[10];ra[10]=Gb;Ha=t.call(this,p,f,a);Fa=ra[46];ra[46]=Ha;hd=ra[47];ra[47]=da;dd=p.pixelRatio;gb=ra[34];ra[34]=dd;Rb=f.scale;ia=ra[6];ra[6]=Rb;Ua=f.scaleFract;Zb=ra[7];ra[7]=Ua;$b=f.translate;Vd=ra[8];ra[8]=$b;ib=f.translateFract;ob=ra[9];ra[9]=ib;Ia=
y.call(this,p,f,a);qb=!1;Ka=null;eb=0;fb=!1;kb=La=0;Wa=1;sb=0;rb=5126;Jb=Ra=rd=Pa=0;H(Ia)?(qb=!0,Ka=v.createStream(34962,Ia),rb=Ka.dtype):(Ka=v.getBuffer(Ia))?rb=Ka.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(rd=Ia.constant,Ra=Jb=Pa=0):(rd=0<Ia.constant.length?Ia.constant[0]:0,Ra=1<Ia.constant.length?Ia.constant[1]:0,Jb=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=H(Ia.buffer)?v.createStream(34962,Ia.buffer):v.getBuffer(Ia.buffer),rb="type"in
Ia?ge[Ia.type]:Ka.dtype,fb=!!Ia.normalized,kb=Ia.size|0,La=Ia.offset|0,sb=Ia.stride|0,eb=Ia.divisor|0);Db=U.buffer;U.buffer=Ka;Na=U.divisor;U.divisor=eb;zd=U.normalized;U.normalized=fb;Ya=U.offset;U.offset=La;Kb=U.size;U.size=kb;Lb=U.state;U.state=Wa;lb=U.stride;U.stride=sb;Oa=U.type;U.type=rb;Yb=U.w;U.w=Pa;Qa=U.x;U.x=rd;tb=U.y;U.y=Ra;ub=U.z;U.z=Jb;Sa=u.call(this,p,f,a);mb=!1;gc=null;zc=0;uc=!1;jc=bb=0;Aa=1;Xa=0;Lc=5126;sc=Ub=Za=zb=0;H(Sa)?(mb=!0,gc=v.createStream(34962,Sa),Lc=gc.dtype):(gc=v.getBuffer(Sa))?
Lc=gc.dtype:"constant"in Sa?(Aa=2,"number"===typeof Sa.constant?(Za=Sa.constant,Ub=sc=zb=0):(Za=0<Sa.constant.length?Sa.constant[0]:0,Ub=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,zb=3<Sa.constant.length?Sa.constant[3]:0)):(gc=H(Sa.buffer)?v.createStream(34962,Sa.buffer):v.getBuffer(Sa.buffer),Lc="type"in Sa?ge[Sa.type]:gc.dtype,uc=!!Sa.normalized,jc=Sa.size|0,bb=Sa.offset|0,Xa=Sa.stride|0,zc=Sa.divisor|0);Vb=Q.buffer;Q.buffer=gc;Pb=Q.divisor;Q.divisor=zc;Jc=Q.normalized;
Q.normalized=uc;Qb=Q.offset;Q.offset=bb;Ud=Q.size;Q.size=jc;Dc=Q.state;Q.state=Aa;oe=Q.stride;Q.stride=Xa;Mc=Q.type;Q.type=Lc;ze=Q.w;Q.w=zb;qd=Q.x;Q.x=Za;nc=Q.y;Q.y=Ub;vc=Q.z;Q.z=sc;hc=ga.call(this,p,f,a);db=!1;rc=null;Sb=0;Wb=!1;ic=dc=0;xc=1;Ac=0;ad=5126;Xc=Rc=Qc=Pc=0;H(hc)?(db=!0,rc=v.createStream(34962,hc),ad=rc.dtype):(rc=v.getBuffer(hc))?ad=rc.dtype:"constant"in hc?(xc=2,"number"===typeof hc.constant?(Qc=hc.constant,Rc=Xc=Pc=0):(Qc=0<hc.constant.length?hc.constant[0]:0,Rc=1<hc.constant.length?
hc.constant[1]:0,Xc=2<hc.constant.length?hc.constant[2]:0,Pc=3<hc.constant.length?hc.constant[3]:0)):(rc=H(hc.buffer)?v.createStream(34962,hc.buffer):v.getBuffer(hc.buffer),ad="type"in hc?ge[hc.type]:rc.dtype,Wb=!!hc.normalized,ic=hc.size|0,dc=hc.offset|0,Ac=hc.stride|0,Sb=hc.divisor|0);ne=c.buffer;c.buffer=rc;bd=c.divisor;c.divisor=Sb;Yc=c.normalized;c.normalized=Wb;kc=c.offset;c.offset=dc;bc=c.size;c.size=ic;Zc=c.state;c.state=xc;Uc=c.stride;c.stride=Ac;cd=c.type;c.type=ad;yc=c.w;c.w=Pc;id=c.x;
c.x=Qc;se=c.y;c.y=Rc;xe=c.z;c.z=Xc;xd=h.call(this,p,f,a);jd=!1;Qf=null;Nd=0;Yd=!1;Od=de=0;Id=1;Gd=0;od=5126;kd=td=vd=Sc=0;H(xd)?(jd=!0,Qf=v.createStream(34962,xd),od=Qf.dtype):(Qf=v.getBuffer(xd))?od=Qf.dtype:"constant"in xd?(Id=2,"number"===typeof xd.constant?(vd=xd.constant,td=kd=Sc=0):(vd=0<xd.constant.length?xd.constant[0]:0,td=1<xd.constant.length?xd.constant[1]:0,kd=2<xd.constant.length?xd.constant[2]:0,Sc=3<xd.constant.length?xd.constant[3]:0)):(Qf=H(xd.buffer)?v.createStream(34962,xd.buffer):
v.getBuffer(xd.buffer),od="type"in xd?ge[xd.type]:Qf.dtype,Yd=!!xd.normalized,Od=xd.size|0,de=xd.offset|0,Gd=xd.stride|0,Nd=xd.divisor|0);yd=M.buffer;M.buffer=Qf;Ad=M.divisor;M.divisor=Nd;Ed=M.normalized;M.normalized=Yd;pe=M.offset;M.offset=de;je=M.size;M.size=Od;Ne=M.state;M.state=Id;ke=M.stride;M.stride=Gd;ie=M.type;M.type=od;he=M.w;M.w=Sc;ue=M.x;M.x=vd;ee=M.y;M.y=td;le=M.z;M.z=kd;Nc=r.call(this,p,f,a);gd=!1;ve=null;qe=0;Kd=!1;Qd=Pd=0;Rd=1;me=0;Ae=5126;Te=Se=re=Ce=0;H(Nc)?(gd=!0,ve=v.createStream(34962,
Nc),Ae=ve.dtype):(ve=v.getBuffer(Nc))?Ae=ve.dtype:"constant"in Nc?(Rd=2,"number"===typeof Nc.constant?(re=Nc.constant,Se=Te=Ce=0):(re=0<Nc.constant.length?Nc.constant[0]:0,Se=1<Nc.constant.length?Nc.constant[1]:0,Te=2<Nc.constant.length?Nc.constant[2]:0,Ce=3<Nc.constant.length?Nc.constant[3]:0)):(ve=H(Nc.buffer)?v.createStream(34962,Nc.buffer):v.getBuffer(Nc.buffer),Ae="type"in Nc?ge[Nc.type]:ve.dtype,Kd=!!Nc.normalized,Qd=Nc.size|0,Pd=Nc.offset|0,me=Nc.stride|0,qe=Nc.divisor|0);Oe=aa.buffer;aa.buffer=
ve;we=aa.divisor;aa.divisor=qe;Ge=aa.normalized;aa.normalized=Kd;Ie=aa.offset;aa.offset=Pd;Je=aa.size;aa.size=Qd;Ke=aa.state;aa.state=Rd;He=aa.stride;aa.stride=me;Md=aa.type;aa.type=Ae;Zd=aa.w;aa.w=Ce;ce=aa.x;aa.x=re;fe=aa.y;aa.y=Se;Le=aa.z;aa.z=Te;Hd=k.call(this,p,f,a);Sd=!1;Ee=null;Me=0;bf=!1;Ue=af=0;Pe=1;$e=0;Ye=5126;ae=Td=We=Ve=0;H(Hd)?(Sd=!0,Ee=v.createStream(34962,Hd),Ye=Ee.dtype):(Ee=v.getBuffer(Hd))?Ye=Ee.dtype:"constant"in Hd?(Pe=2,"number"===typeof Hd.constant?(We=Hd.constant,Td=ae=Ve=0):
(We=0<Hd.constant.length?Hd.constant[0]:0,Td=1<Hd.constant.length?Hd.constant[1]:0,ae=2<Hd.constant.length?Hd.constant[2]:0,Ve=3<Hd.constant.length?Hd.constant[3]:0)):(Ee=H(Hd.buffer)?v.createStream(34962,Hd.buffer):v.getBuffer(Hd.buffer),Ye="type"in Hd?ge[Hd.type]:Ee.dtype,bf=!!Hd.normalized,Ue=Hd.size|0,af=Hd.offset|0,$e=Hd.stride|0,Me=Hd.divisor|0);Xe=w.buffer;w.buffer=Ee;hf=w.divisor;w.divisor=Me;mf=w.normalized;w.normalized=bf;ef=w.offset;w.offset=af;jf=w.size;w.size=Ue;kf=w.state;w.state=Pe;
lf=w.stride;w.stride=$e;qf=w.type;w.type=Ye;nf=w.w;w.w=Ve;rf=w.x;w.x=We;Bf=w.y;w.y=Td;Cf=w.z;w.z=ae;Qe=W.call(this,p,f,a);Fe=!1;of=null;pf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;H(Qe)?(Fe=!0,of=v.createStream(34962,Qe),wf=of.dtype):(of=v.getBuffer(Qe))?wf=of.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?
Qe.constant[3]:0)):(of=H(Qe.buffer)?v.createStream(34962,Qe.buffer):v.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:of.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,pf=Qe.divisor|0);If=E.buffer;E.buffer=of;Jf=E.divisor;E.divisor=pf;Kf=E.normalized;E.normalized=Df;Lf=E.offset;E.offset=Gf;sf=E.size;E.size=Af;Rf=E.state;E.state=Ef;Hf=E.stride;E.stride=Ff;tf=E.type;E.type=wf;dg=E.w;E.w=xf;Sf=E.x;E.x=vf;Tf=E.y;E.y=yf;qg=E.z;E.z=zf;ff=D.call(this,p,f,a);cf=!1;Mf=null;Nf=0;eg=!1;
gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;H(ff)?(cf=!0,Mf=v.createStream(34962,ff),Wf=Mf.dtype):(Mf=v.getBuffer(ff))?Wf=Mf.dtype:"constant"in ff?(hg=2,"number"===typeof ff.constant?(Xf=ff.constant,Yf=Zf=Uf=0):(Xf=0<ff.constant.length?ff.constant[0]:0,Yf=1<ff.constant.length?ff.constant[1]:0,Zf=2<ff.constant.length?ff.constant[2]:0,Uf=3<ff.constant.length?ff.constant[3]:0)):(Mf=H(ff.buffer)?v.createStream(34962,ff.buffer):v.getBuffer(ff.buffer),Wf="type"in ff?ge[ff.type]:Mf.dtype,eg=!!ff.normalized,
gg=ff.size|0,fg=ff.offset|0,ig=ff.stride|0,Nf=ff.divisor|0);jg=d.buffer;d.buffer=Mf;rg=d.divisor;d.divisor=Nf;sg=d.normalized;d.normalized=eg;tg=d.offset;d.offset=fg;ug=d.size;d.size=gg;vg=d.state;d.state=hg;wg=d.stride;d.stride=ig;xg=d.type;d.type=Wf;yg=d.w;d.w=Uf;zg=d.x;d.x=Xf;Ag=d.y;d.y=Yf;Bg=d.z;d.z=Zf;gf=P.call(this,p,f,a);df=!1;Of=null;Pf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;H(gf)?(df=!0,Of=v.createStream(34962,gf),$f=Of.dtype):(Of=v.getBuffer(gf))?$f=Of.dtype:"constant"in gf?(ng=
2,"number"===typeof gf.constant?(ag=gf.constant,bg=cg=Vf=0):(ag=0<gf.constant.length?gf.constant[0]:0,bg=1<gf.constant.length?gf.constant[1]:0,cg=2<gf.constant.length?gf.constant[2]:0,Vf=3<gf.constant.length?gf.constant[3]:0)):(Of=H(gf.buffer)?v.createStream(34962,gf.buffer):v.getBuffer(gf.buffer),$f="type"in gf?ge[gf.type]:Of.dtype,kg=!!gf.normalized,mg=gf.size|0,lg=gf.offset|0,og=gf.stride|0,Pf=gf.divisor|0);pg=b.buffer;b.buffer=Of;Cg=b.divisor;b.divisor=Pf;Dg=b.normalized;b.normalized=kg;Eg=b.offset;
b.offset=lg;Fg=b.size;b.size=mg;Gg=b.state;b.state=ng;Hg=b.stride;b.stride=og;Ig=b.type;b.type=$f;Jg=b.w;b.w=Vf;Kg=b.x;b.x=ag;Lg=b.y;b.y=bg;Mg=b.z;b.z=cg;Ng=Ga.vert;Ga.vert=59;Og=Ga.frag;Ga.frag=58;I.dirty=!0;e(p,f,a);p.viewportWidth=B;p.viewportHeight=G;Cd[0]=T;Cd[1]=z;Cd[2]=S;Cd[3]=J;Da[0]=R;Da[1]=fa;Da[2]=m;Da[3]=ha;sa.blend_enable=A;Ja[0]=N;Ja[1]=cc;Ja[2]=Ma;Ja[3]=ka;sa.depth_enable=C;Bd[0]=za;Bd[1]=L;Bd[2]=pa;Bd[3]=K;sa.scissor_enable=wa;sa.stencil_enable=Ba;ca&&(X.cpuTime+=performance.now()-
ja);Ta&&va.destroyStream(ea);ua.elements=oa;ua.offset=Ea;ua.count=na;ua.primitive=qa;ra[45]=la;ra[48]=Ca;ra[10]=V;ra[46]=Fa;ra[47]=hd;ra[34]=gb;ra[6]=ia;ra[7]=Zb;ra[8]=Vd;ra[9]=ob;qb&&v.destroyStream(Ka);U.buffer=Db;U.divisor=Na;U.normalized=zd;U.offset=Ya;U.size=Kb;U.state=Lb;U.stride=lb;U.type=Oa;U.w=Yb;U.x=Qa;U.y=tb;U.z=ub;mb&&v.destroyStream(gc);Q.buffer=Vb;Q.divisor=Pb;Q.normalized=Jc;Q.offset=Qb;Q.size=Ud;Q.state=Dc;Q.stride=oe;Q.type=Mc;Q.w=ze;Q.x=qd;Q.y=nc;Q.z=vc;db&&v.destroyStream(rc);c.buffer=
ne;c.divisor=bd;c.normalized=Yc;c.offset=kc;c.size=bc;c.state=Zc;c.stride=Uc;c.type=cd;c.w=yc;c.x=id;c.y=se;c.z=xe;jd&&v.destroyStream(Qf);M.buffer=yd;M.divisor=Ad;M.normalized=Ed;M.offset=pe;M.size=je;M.state=Ne;M.stride=ke;M.type=ie;M.w=he;M.x=ue;M.y=ee;M.z=le;gd&&v.destroyStream(ve);aa.buffer=Oe;aa.divisor=we;aa.normalized=Ge;aa.offset=Ie;aa.size=Je;aa.state=Ke;aa.stride=He;aa.type=Md;aa.w=Zd;aa.x=ce;aa.y=fe;aa.z=Le;Sd&&v.destroyStream(Ee);w.buffer=Xe;w.divisor=hf;w.normalized=mf;w.offset=ef;w.size=
jf;w.state=kf;w.stride=lf;w.type=qf;w.w=nf;w.x=rf;w.y=Bf;w.z=Cf;Fe&&v.destroyStream(of);E.buffer=If;E.divisor=Jf;E.normalized=Kf;E.offset=Lf;E.size=sf;E.state=Rf;E.stride=Hf;E.type=tf;E.w=dg;E.x=Sf;E.y=Tf;E.z=qg;cf&&v.destroyStream(Mf);d.buffer=jg;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;df&&v.destroyStream(Of);b.buffer=pg;b.divisor=Cg;b.normalized=Dg;b.offset=Eg;b.size=Fg;b.state=Gg;b.stride=Hg;b.type=Ig;b.w=Jg;b.x=Kg;b.y=Lg;
b.z=Mg;Ga.vert=Ng;Ga.frag=Og;I.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea){var R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,dd,Gb,ha,H,sa,Ga,ra,za,Da,ka,Z;R=a.attributes;T=a.buffer;z=a.context;l=a.current;O=a.draw;N=a.elements;wa=a.extensions;na=a.framebuffer;n=
a.gl;G=a.isBufferArgs;ba=a.next;S=a.shader;la=a.uniforms;pa=a.vao;Ca=ba.blend_color;Ba=l.blend_color;fa=ba.blend_equation;Ea=l.blend_equation;ja=ba.blend_func;oa=l.blend_func;ya=ba.colorMask;Ma=l.colorMask;ma=ba.depth_range;cc=l.depth_range;Ta=ba.polygonOffset_offset;v=l.polygonOffset_offset;p=ba.sample_coverage;I=l.sample_coverage;ua=ba.scissor_box;va=l.scissor_box;dd=ba.stencil_func;Gb=l.stencil_func;ha=ba.stencil_opBack;H=l.stencil_opBack;sa=ba.stencil_opFront;Ga=l.stencil_opFront;ra=ba.viewport;
za=l.viewport;Da={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:4,stride:8};Z={offset:0,stride:8};return{batch:function(f,e){var a,q,g,y,S,ra,J,m,A,C,x,F,t;a=na.next;a!==na.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),na.cur=a);if(l.dirty){var L,K,ja,da,la,Ca,ia,Aa,De,Ze,Re,Fd,Be,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec;L=ba.dither;L!==l.dither&&(L?n.enable(3024):n.disable(3024),
l.dither=L);K=fa[0];ja=fa[1];if(K!==Ea[0]||ja!==Ea[1])n.blendEquationSeparate(K,ja),Ea[0]=K,Ea[1]=ja;da=ba.depth_func;da!==l.depth_func&&(n.depthFunc(da),l.depth_func=da);la=ma[0];Ca=ma[1];if(la!==cc[0]||Ca!==cc[1])n.depthRange(la,Ca),cc[0]=la,cc[1]=Ca;ia=ba.depth_mask;ia!==l.depth_mask&&(n.depthMask(ia),l.depth_mask=ia);Aa=ya[0];De=ya[1];Ze=ya[2];Re=ya[3];if(Aa!==Ma[0]||De!==Ma[1]||Ze!==Ma[2]||Re!==Ma[3])n.colorMask(Aa,De,Ze,Re),Ma[0]=Aa,Ma[1]=De,Ma[2]=Ze,Ma[3]=Re;Fd=ba.cull_enable;Fd!==l.cull_enable&&
(Fd?n.enable(2884):n.disable(2884),l.cull_enable=Fd);Be=ba.cull_face;Be!==l.cull_face&&(n.cullFace(Be),l.cull_face=Be);te=ba.frontFace;te!==l.frontFace&&(n.frontFace(te),l.frontFace=te);$d=ba.lineWidth;$d!==l.lineWidth&&(n.lineWidth($d),l.lineWidth=$d);Wd=ba.polygonOffset_enable;Wd!==l.polygonOffset_enable&&(Wd?n.enable(32823):n.disable(32823),l.polygonOffset_enable=Wd);Ld=Ta[0];md=Ta[1];if(Ld!==v[0]||md!==v[1])n.polygonOffset(Ld,md),v[0]=Ld,v[1]=md;$c=ba.sample_alpha;$c!==l.sample_alpha&&($c?n.enable(32926):
n.disable(32926),l.sample_alpha=$c);sd=ba.sample_enable;sd!==l.sample_enable&&(sd?n.enable(32928):n.disable(32928),l.sample_enable=sd);Kc=p[0];pd=p[1];if(Kc!==I[0]||pd!==I[1])n.sampleCoverage(Kc,pd),I[0]=Kc,I[1]=pd;Ec=ba.stencil_mask;Ec!==l.stencil_mask&&(n.stencilMask(Ec),l.stencil_mask=Ec);ed=dd[0];Oc=dd[1];ld=dd[2];if(ed!==Gb[0]||Oc!==Gb[1]||ld!==Gb[2])n.stencilFunc(ed,Oc,ld),Gb[0]=ed,Gb[1]=Oc,Gb[2]=ld;Ab=sa[0];Eb=sa[1];tc=sa[2];wb=sa[3];if(Ab!==Ga[0]||Eb!==Ga[1]||tc!==Ga[2]||wb!==Ga[3])n.stencilOpSeparate(Ab,
Eb,tc,wb),Ga[0]=Ab,Ga[1]=Eb,Ga[2]=tc,Ga[3]=wb;wc=ha[0];Bb=ha[1];Ic=ha[2];lc=ha[3];if(wc!==H[0]||Bb!==H[1]||Ic!==H[2]||lc!==H[3])n.stencilOpSeparate(wc,Bb,Ic,lc),H[0]=wc,H[1]=Bb,H[2]=Ic,H[3]=lc;Fc=ba.scissor_enable;Fc!==l.scissor_enable&&(Fc?n.enable(3089):n.disable(3089),l.scissor_enable=Fc);Wc=ua[0];Vc=ua[1];Cc=ua[2];ec=ua[3];if(Wc!==va[0]||Vc!==va[1]||Cc!==va[2]||ec!==va[3])n.scissor(Wc,Vc,Cc,ec),va[0]=Wc,va[1]=Vc,va[2]=Cc,va[3]=ec}q=this.viewport;g=q.x|0;y=q.y|0;S="width"in q?q.width|0:z.framebufferWidth-
g;ra="height"in q?q.height|0:z.framebufferHeight-y;J=z.viewportWidth;z.viewportWidth=S;m=z.viewportHeight;z.viewportHeight=ra;n.viewport(g,y,S,ra);za[0]=g;za[1]=y;za[2]=S;za[3]=ra;n.blendColor(0,0,0,1);Ba[0]=0;Ba[1]=0;Ba[2]=0;Ba[3]=1;n.enable(3042);l.blend_enable=!0;n.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;n.disable(2929);l.depth_enable=!1;n.disable(2960);l.stencil_enable=!1;if(A=l.profile)C=performance.now(),X.count+=e;n.useProgram(U.program);x=wa.angle_instanced_arrays;
var Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub;pa.setVAO(null);Z.buffer=this.sizeBuffer;Gc=!1;oc=null;pc=0;mc=!1;$a=fc=0;Hc=1;xb=0;cb=5126;Va=nb=ab=Mb=0;G(Z)?(Gc=!0,oc=T.createStream(34962,Z),cb=oc.dtype):(oc=T.getBuffer(Z))?cb=oc.dtype:"constant"in Z?(Hc=2,"number"===typeof Z.constant?(ab=Z.constant,nb=Va=Mb=0):(ab=0<Z.constant.length?
Z.constant[0]:0,nb=1<Z.constant.length?Z.constant[1]:0,Va=2<Z.constant.length?Z.constant[2]:0,Mb=3<Z.constant.length?Z.constant[3]:0)):(oc=G(Z.buffer)?T.createStream(34962,Z.buffer):T.getBuffer(Z.buffer),cb="type"in Z?Da[Z.type]:oc.dtype,mc=!!Z.normalized,$a=Z.size|0,fc=Z.offset|0,xb=Z.stride|0,pc=Z.divisor|0);Tc=ea.location;Hb=R[Tc];if(1===Hc){Hb.buffer||n.enableVertexAttribArray(Tc);Ib=$a||1;if(Hb.type!==cb||Hb.size!==Ib||Hb.buffer!==oc||Hb.normalized!==mc||Hb.offset!==fc||Hb.stride!==xb)n.bindBuffer(34962,
oc.buffer),n.vertexAttribPointer(Tc,Ib,cb,mc,xb,fc),Hb.type=cb,Hb.size=Ib,Hb.buffer=oc,Hb.normalized=mc,Hb.offset=fc,Hb.stride=xb;Hb.divisor!==pc&&(x.vertexAttribDivisorANGLE(Tc,pc),Hb.divisor=pc)}else if(Hb.buffer&&(n.disableVertexAttribArray(Tc),Hb.buffer=null),Hb.x!==ab||Hb.y!==nb||Hb.z!==Va||Hb.w!==Mb)n.vertexAttrib4f(Tc,ab,nb,Va,Mb),Hb.x=ab,Hb.y=nb,Hb.z=Va,Hb.w=Mb;ka.buffer=this.sizeBuffer;qc=!1;Nb=null;jb=0;Fb=!1;vb=Cb=0;hb=1;Xb=0;Ob=5126;yb=Tb=Ua=pb=0;G(ka)?(qc=!0,Nb=T.createStream(34962,ka),
Ob=Nb.dtype):(Nb=T.getBuffer(ka))?Ob=Nb.dtype:"constant"in ka?(hb=2,"number"===typeof ka.constant?(Ua=ka.constant,Tb=yb=pb=0):(Ua=0<ka.constant.length?ka.constant[0]:0,Tb=1<ka.constant.length?ka.constant[1]:0,yb=2<ka.constant.length?ka.constant[2]:0,pb=3<ka.constant.length?ka.constant[3]:0)):(Nb=G(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),Ob="type"in ka?Da[ka.type]:Nb.dtype,Fb=!!ka.normalized,vb=ka.size|0,Cb=ka.offset|0,Xb=ka.stride|0,jb=ka.divisor|0);ac=E.location;ib=R[ac];
if(1===hb){ib.buffer||n.enableVertexAttribArray(ac);ob=vb||1;if(ib.type!==Ob||ib.size!==ob||ib.buffer!==Nb||ib.normalized!==Fb||ib.offset!==Cb||ib.stride!==Xb)n.bindBuffer(34962,Nb.buffer),n.vertexAttribPointer(ac,ob,Ob,Fb,Xb,Cb),ib.type=Ob,ib.size=ob,ib.buffer=Nb,ib.normalized=Fb,ib.offset=Cb,ib.stride=Xb;ib.divisor!==jb&&(x.vertexAttribDivisorANGLE(ac,jb),ib.divisor=jb)}else if(ib.buffer&&(n.disableVertexAttribArray(ac),ib.buffer=null),ib.x!==Ua||ib.y!==Tb||ib.z!==yb||ib.w!==pb)n.vertexAttrib4f(ac,
Ua,Tb,yb,pb),ib.x=Ua,ib.y=Tb,ib.z=yb,ib.w=pb;Ia=this.charBuffer;qb=!1;Ka=null;eb=0;fb=!1;kb=La=0;Wa=1;sb=0;rb=5126;Jb=Ra=Bc=Pa=0;G(Ia)?(qb=!0,Ka=T.createStream(34962,Ia),rb=Ka.dtype):(Ka=T.getBuffer(Ia))?rb=Ka.dtype:"constant"in Ia?(Wa=2,"number"===typeof Ia.constant?(Bc=Ia.constant,Ra=Jb=Pa=0):(Bc=0<Ia.constant.length?Ia.constant[0]:0,Ra=1<Ia.constant.length?Ia.constant[1]:0,Jb=2<Ia.constant.length?Ia.constant[2]:0,Pa=3<Ia.constant.length?Ia.constant[3]:0)):(Ka=G(Ia.buffer)?T.createStream(34962,
Ia.buffer):T.getBuffer(Ia.buffer),rb="type"in Ia?Da[Ia.type]:Ka.dtype,fb=!!Ia.normalized,kb=Ia.size|0,La=Ia.offset|0,sb=Ia.stride|0,eb=Ia.divisor|0);Db=W.location;Na=R[Db];if(1===Wa){Na.buffer||n.enableVertexAttribArray(Db);Jd=kb||1;if(Na.type!==rb||Na.size!==Jd||Na.buffer!==Ka||Na.normalized!==fb||Na.offset!==La||Na.stride!==sb)n.bindBuffer(34962,Ka.buffer),n.vertexAttribPointer(Db,Jd,rb,fb,sb,La),Na.type=rb,Na.size=Jd,Na.buffer=Ka,Na.normalized=fb,Na.offset=La,Na.stride=sb;Na.divisor!==eb&&(x.vertexAttribDivisorANGLE(Db,
eb),Na.divisor=eb)}else if(Na.buffer&&(n.disableVertexAttribArray(Db),Na.buffer=null),Na.x!==Bc||Na.y!==Ra||Na.z!==Jb||Na.w!==Pa)n.vertexAttrib4f(Db,Bc,Ra,Jb,Pa),Na.x=Bc,Na.y=Ra,Na.z=Jb,Na.w=Pa;Ya=this.position;Kb=!1;Lb=null;lb=0;Oa=!1;Qa=Yb=0;tb=1;ub=0;Sa=5126;uc=zc=gc=mb=0;G(Ya)?(Kb=!0,Lb=T.createStream(34962,Ya),Sa=Lb.dtype):(Lb=T.getBuffer(Ya))?Sa=Lb.dtype:"constant"in Ya?(tb=2,"number"===typeof Ya.constant?(gc=Ya.constant,zc=uc=mb=0):(gc=0<Ya.constant.length?Ya.constant[0]:0,zc=1<Ya.constant.length?
Ya.constant[1]:0,uc=2<Ya.constant.length?Ya.constant[2]:0,mb=3<Ya.constant.length?Ya.constant[3]:0)):(Lb=G(Ya.buffer)?T.createStream(34962,Ya.buffer):T.getBuffer(Ya.buffer),Sa="type"in Ya?Da[Ya.type]:Lb.dtype,Oa=!!Ya.normalized,Qa=Ya.size|0,Yb=Ya.offset|0,ub=Ya.stride|0,lb=Ya.divisor|0);bb=xa.location;jc=R[bb];if(1===tb){jc.buffer||n.enableVertexAttribArray(bb);nd=Qa||2;if(jc.type!==Sa||jc.size!==nd||jc.buffer!==Lb||jc.normalized!==Oa||jc.offset!==Yb||jc.stride!==ub)n.bindBuffer(34962,Lb.buffer),
n.vertexAttribPointer(bb,nd,Sa,Oa,ub,Yb),jc.type=Sa,jc.size=nd,jc.buffer=Lb,jc.normalized=Oa,jc.offset=Yb,jc.stride=ub;jc.divisor!==lb&&(x.vertexAttribDivisorANGLE(bb,lb),jc.divisor=lb)}else if(jc.buffer&&(n.disableVertexAttribArray(bb),jc.buffer=null),jc.x!==gc||jc.y!==zc||jc.z!==uc||jc.w!==mb)n.vertexAttrib4f(bb,gc,zc,uc,mb),jc.x=gc,jc.y=zc,jc.z=uc,jc.w=mb;Xa=this.viewportArray;n.uniform4f(Y.location,Xa[0],Xa[1],Xa[2],Xa[3]);Lc=this.scale;n.uniform2f(qa.location,Lc[0],Lc[1]);zb=this.translate;n.uniform2f(V.location,
zb[0],zb[1]);(Za=O.elements)?n.bindBuffer(34963,Za.buffer.buffer):pa.currentVAO&&(Za=N.getElements(pa.currentVAO.elements))&&n.bindBuffer(34963,Za.buffer.buffer);Ub=O.instances;for(F=0;F<e;++F){t=f[F];var sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id,Dd;sc=u.call(this,z,t,F);F&&Vb===sc||(Vb=sc,n.uniform1f(D.location,sc));Pb=Q.call(this,z,t,F);F&&Jc===Pb||(Jc=Pb,n.uniform1f(P.location,Pb));Qb=t.align;F&&Xd===Qb||(Xd=Qb,n.uniform1f(M.location,
Qb));Dc=t.baseline;F&&ud===Dc||(ud=Dc,n.uniform1f(w.location,Dc));Mc=t.color;fd=Mc[0];nc=Mc[1];hc=Mc[2];rc=Mc[3];F&&qd===fd&&vc===nc&&db===hc&&Sb===rc||(qd=fd,vc=nc,db=hc,Sb=rc,n.uniform4f(d.location,fd,nc,hc,rc));Wb=ga.call(this,z,t,F);dc=Wb[0];xc=Wb[1];F&&ic===dc&&Ac===xc||(ic=dc,Ac=xc,n.uniform2f(k.location,dc,xc));ad=c.call(this,z,t,F);Pc=ad[0];Rc=ad[1];F&&Qc===Pc&&Xc===Rc||(Qc=Pc,Xc=Rc,n.uniform2f(aa.location,Pc,Rc));wd=t.positionOffset;bd=wd[0];kc=wd[1];F&&Yc===bd&&bc===kc||(Yc=bd,bc=kc,n.uniform2f(B.location,
bd,kc));Zc=t.opacity;F&&Uc===Zc||(Uc=Zc,n.uniform1f(b.location,Zc));(cd=h.call(this,z,t,F))&&"framebuffer"===cd._reglType&&(cd=cd.color[0]);yc=cd._texture;n.uniform1i(r.location,yc.bind());id=t.offset;if(Dd=t.count)0<Ub?Za?x.drawElementsInstancedANGLE(0,Dd,Za.type,id<<(Za.type-5121>>1),Ub):x.drawArraysInstancedANGLE(0,id,Dd,Ub):0>Ub&&(Za?n.drawElements(0,Dd,Za.type,id<<(Za.type-5121>>1)):n.drawArrays(0,id,Dd)),yc.unbind()}Gc&&T.destroyStream(oc);qc&&T.destroyStream(Nb);qb&&T.destroyStream(Ka);Kb&&
T.destroyStream(Lb);l.dirty=!0;pa.setVAO(null);z.viewportWidth=J;z.viewportHeight=m;A&&(X.cpuTime+=performance.now()-C)},draw:function(c){var h,a,y,S,u,ra,m,A,x,C,t,Q,L,K,U,ja,ga,da,la,Ca,ia,Aa,De,Ze,Re,Fd,Be,te,$d,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb;h=na.next;h!==na.cur&&(h?n.bindFramebuffer(36160,h.framebuffer):n.bindFramebuffer(36160,null),na.cur=
h);if(l.dirty){var Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc;Wa=ba.dither;Wa!==l.dither&&(Wa?n.enable(3024):n.disable(3024),l.dither=Wa);sb=fa[0];rb=fa[1];if(sb!==Ea[0]||rb!==Ea[1])n.blendEquationSeparate(sb,rb),Ea[0]=sb,Ea[1]=rb;Pa=ba.depth_func;Pa!==l.depth_func&&(n.depthFunc(Pa),l.depth_func=Pa);Bc=ma[0];Ra=ma[1];if(Bc!==cc[0]||Ra!==cc[1])n.depthRange(Bc,Ra),cc[0]=Bc,cc[1]=Ra;Jb=ba.depth_mask;Jb!==l.depth_mask&&(n.depthMask(Jb),
l.depth_mask=Jb);Db=ya[0];Na=ya[1];Jd=ya[2];Ya=ya[3];if(Db!==Ma[0]||Na!==Ma[1]||Jd!==Ma[2]||Ya!==Ma[3])n.colorMask(Db,Na,Jd,Ya),Ma[0]=Db,Ma[1]=Na,Ma[2]=Jd,Ma[3]=Ya;Kb=ba.cull_enable;Kb!==l.cull_enable&&(Kb?n.enable(2884):n.disable(2884),l.cull_enable=Kb);Lb=ba.cull_face;Lb!==l.cull_face&&(n.cullFace(Lb),l.cull_face=Lb);lb=ba.frontFace;lb!==l.frontFace&&(n.frontFace(lb),l.frontFace=lb);Oa=ba.lineWidth;Oa!==l.lineWidth&&(n.lineWidth(Oa),l.lineWidth=Oa);Yb=ba.polygonOffset_enable;Yb!==l.polygonOffset_enable&&
(Yb?n.enable(32823):n.disable(32823),l.polygonOffset_enable=Yb);Qa=Ta[0];tb=Ta[1];if(Qa!==v[0]||tb!==v[1])n.polygonOffset(Qa,tb),v[0]=Qa,v[1]=tb;ub=ba.sample_alpha;ub!==l.sample_alpha&&(ub?n.enable(32926):n.disable(32926),l.sample_alpha=ub);Sa=ba.sample_enable;Sa!==l.sample_enable&&(Sa?n.enable(32928):n.disable(32928),l.sample_enable=Sa);mb=p[0];gc=p[1];if(mb!==I[0]||gc!==I[1])n.sampleCoverage(mb,gc),I[0]=mb,I[1]=gc;zc=ba.stencil_mask;zc!==l.stencil_mask&&(n.stencilMask(zc),l.stencil_mask=zc);uc=
dd[0];bb=dd[1];jc=dd[2];if(uc!==Gb[0]||bb!==Gb[1]||jc!==Gb[2])n.stencilFunc(uc,bb,jc),Gb[0]=uc,Gb[1]=bb,Gb[2]=jc;nd=sa[0];Xa=sa[1];Lc=sa[2];zb=sa[3];if(nd!==Ga[0]||Xa!==Ga[1]||Lc!==Ga[2]||zb!==Ga[3])n.stencilOpSeparate(nd,Xa,Lc,zb),Ga[0]=nd,Ga[1]=Xa,Ga[2]=Lc,Ga[3]=zb;Za=ha[0];Ub=ha[1];sc=ha[2];Vb=ha[3];if(Za!==H[0]||Ub!==H[1]||sc!==H[2]||Vb!==H[3])n.stencilOpSeparate(Za,Ub,sc,Vb),H[0]=Za,H[1]=Ub,H[2]=sc,H[3]=Vb;Pb=ba.scissor_enable;Pb!==l.scissor_enable&&(Pb?n.enable(3089):n.disable(3089),l.scissor_enable=
Pb);Jc=ua[0];Qb=ua[1];Xd=ua[2];Dc=ua[3];if(Jc!==va[0]||Qb!==va[1]||Xd!==va[2]||Dc!==va[3])n.scissor(Jc,Qb,Xd,Dc),va[0]=Jc,va[1]=Qb,va[2]=Xd,va[3]=Dc}a=this.viewport;y=a.x|0;S=a.y|0;u="width"in a?a.width|0:z.framebufferWidth-y;ra="height"in a?a.height|0:z.framebufferHeight-S;m=z.viewportWidth;z.viewportWidth=u;A=z.viewportHeight;z.viewportHeight=ra;n.viewport(y,S,u,ra);za[0]=y;za[1]=S;za[2]=u;za[3]=ra;n.blendColor(0,0,0,1);Ba[0]=0;Ba[1]=0;Ba[2]=0;Ba[3]=1;n.enable(3042);l.blend_enable=!0;n.blendFuncSeparate(770,
771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;n.disable(2929);l.depth_enable=!1;n.disable(2960);l.stencil_enable=!1;if(x=l.profile)C=performance.now(),X.count++;n.useProgram(F.program);t=wa.angle_instanced_arrays;pa.setVAO(null);Z.buffer=this.sizeBuffer;Q=!1;L=null;K=0;U=!1;ga=ja=0;da=1;la=0;Ca=5126;Ze=De=Aa=ia=0;G(Z)?(Q=!0,L=T.createStream(34962,Z),Ca=L.dtype):(L=T.getBuffer(Z))?Ca=L.dtype:"constant"in Z?(da=2,"number"===typeof Z.constant?(Aa=Z.constant,De=Ze=ia=0):(Aa=0<Z.constant.length?Z.constant[0]:
0,De=1<Z.constant.length?Z.constant[1]:0,Ze=2<Z.constant.length?Z.constant[2]:0,ia=3<Z.constant.length?Z.constant[3]:0)):(L=G(Z.buffer)?T.createStream(34962,Z.buffer):T.getBuffer(Z.buffer),Ca="type"in Z?Da[Z.type]:L.dtype,U=!!Z.normalized,ga=Z.size|0,ja=Z.offset|0,la=Z.stride|0,K=Z.divisor|0);Re=ea.location;Fd=R[Re];if(1===da){Fd.buffer||n.enableVertexAttribArray(Re);Be=ga||1;if(Fd.type!==Ca||Fd.size!==Be||Fd.buffer!==L||Fd.normalized!==U||Fd.offset!==ja||Fd.stride!==la)n.bindBuffer(34962,L.buffer),
n.vertexAttribPointer(Re,Be,Ca,U,la,ja),Fd.type=Ca,Fd.size=Be,Fd.buffer=L,Fd.normalized=U,Fd.offset=ja,Fd.stride=la;Fd.divisor!==K&&(t.vertexAttribDivisorANGLE(Re,K),Fd.divisor=K)}else if(Fd.buffer&&(n.disableVertexAttribArray(Re),Fd.buffer=null),Fd.x!==Aa||Fd.y!==De||Fd.z!==Ze||Fd.w!==ia)n.vertexAttrib4f(Re,Aa,De,Ze,ia),Fd.x=Aa,Fd.y=De,Fd.z=Ze,Fd.w=ia;ka.buffer=this.sizeBuffer;te=!1;$d=null;Wd=0;Ld=!1;$c=md=0;sd=1;Kc=0;pd=5126;ld=Oc=ed=Ec=0;G(ka)?(te=!0,$d=T.createStream(34962,ka),pd=$d.dtype):($d=
T.getBuffer(ka))?pd=$d.dtype:"constant"in ka?(sd=2,"number"===typeof ka.constant?(ed=ka.constant,Oc=ld=Ec=0):(ed=0<ka.constant.length?ka.constant[0]:0,Oc=1<ka.constant.length?ka.constant[1]:0,ld=2<ka.constant.length?ka.constant[2]:0,Ec=3<ka.constant.length?ka.constant[3]:0)):($d=G(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),pd="type"in ka?Da[ka.type]:$d.dtype,Ld=!!ka.normalized,$c=ka.size|0,md=ka.offset|0,Kc=ka.stride|0,Wd=ka.divisor|0);Ab=E.location;Eb=R[Ab];if(1===sd){Eb.buffer||
n.enableVertexAttribArray(Ab);tc=$c||1;if(Eb.type!==pd||Eb.size!==tc||Eb.buffer!==$d||Eb.normalized!==Ld||Eb.offset!==md||Eb.stride!==Kc)n.bindBuffer(34962,$d.buffer),n.vertexAttribPointer(Ab,tc,pd,Ld,Kc,md),Eb.type=pd,Eb.size=tc,Eb.buffer=$d,Eb.normalized=Ld,Eb.offset=md,Eb.stride=Kc;Eb.divisor!==Wd&&(t.vertexAttribDivisorANGLE(Ab,Wd),Eb.divisor=Wd)}else if(Eb.buffer&&(n.disableVertexAttribArray(Ab),Eb.buffer=null),Eb.x!==ed||Eb.y!==Oc||Eb.z!==ld||Eb.w!==Ec)n.vertexAttrib4f(Ab,ed,Oc,ld,Ec),Eb.x=
ed,Eb.y=Oc,Eb.z=ld,Eb.w=Ec;wb=this.charBuffer;wc=!1;Bb=null;Ic=0;lc=!1;Wc=Fc=0;Vc=1;Cc=0;ec=5126;mc=pc=oc=Gc=0;G(wb)?(wc=!0,Bb=T.createStream(34962,wb),ec=Bb.dtype):(Bb=T.getBuffer(wb))?ec=Bb.dtype:"constant"in wb?(Vc=2,"number"===typeof wb.constant?(oc=wb.constant,pc=mc=Gc=0):(oc=0<wb.constant.length?wb.constant[0]:0,pc=1<wb.constant.length?wb.constant[1]:0,mc=2<wb.constant.length?wb.constant[2]:0,Gc=3<wb.constant.length?wb.constant[3]:0)):(Bb=G(wb.buffer)?T.createStream(34962,wb.buffer):T.getBuffer(wb.buffer),
ec="type"in wb?Da[wb.type]:Bb.dtype,lc=!!wb.normalized,Wc=wb.size|0,Fc=wb.offset|0,Cc=wb.stride|0,Ic=wb.divisor|0);fc=W.location;$a=R[fc];if(1===Vc){$a.buffer||n.enableVertexAttribArray(fc);Hc=Wc||1;if($a.type!==ec||$a.size!==Hc||$a.buffer!==Bb||$a.normalized!==lc||$a.offset!==Fc||$a.stride!==Cc)n.bindBuffer(34962,Bb.buffer),n.vertexAttribPointer(fc,Hc,ec,lc,Cc,Fc),$a.type=ec,$a.size=Hc,$a.buffer=Bb,$a.normalized=lc,$a.offset=Fc,$a.stride=Cc;$a.divisor!==Ic&&(t.vertexAttribDivisorANGLE(fc,Ic),$a.divisor=
Ic)}else if($a.buffer&&(n.disableVertexAttribArray(fc),$a.buffer=null),$a.x!==oc||$a.y!==pc||$a.z!==mc||$a.w!==Gc)n.vertexAttrib4f(fc,oc,pc,mc,Gc),$a.x=oc,$a.y=pc,$a.z=mc,$a.w=Gc;xb=this.position;cb=!1;Mb=null;ab=0;nb=!1;Tc=Va=0;Hb=1;Ib=0;qc=5126;Cb=Fb=jb=Nb=0;G(xb)?(cb=!0,Mb=T.createStream(34962,xb),qc=Mb.dtype):(Mb=T.getBuffer(xb))?qc=Mb.dtype:"constant"in xb?(Hb=2,"number"===typeof xb.constant?(jb=xb.constant,Fb=Cb=Nb=0):(jb=0<xb.constant.length?xb.constant[0]:0,Fb=1<xb.constant.length?xb.constant[1]:
0,Cb=2<xb.constant.length?xb.constant[2]:0,Nb=3<xb.constant.length?xb.constant[3]:0)):(Mb=G(xb.buffer)?T.createStream(34962,xb.buffer):T.getBuffer(xb.buffer),qc="type"in xb?Da[xb.type]:Mb.dtype,nb=!!xb.normalized,Tc=xb.size|0,Va=xb.offset|0,Ib=xb.stride|0,ab=xb.divisor|0);vb=xa.location;hb=R[vb];if(1===Hb){hb.buffer||n.enableVertexAttribArray(vb);Xb=Tc||2;if(hb.type!==qc||hb.size!==Xb||hb.buffer!==Mb||hb.normalized!==nb||hb.offset!==Va||hb.stride!==Ib)n.bindBuffer(34962,Mb.buffer),n.vertexAttribPointer(vb,
Xb,qc,nb,Ib,Va),hb.type=qc,hb.size=Xb,hb.buffer=Mb,hb.normalized=nb,hb.offset=Va,hb.stride=Ib;hb.divisor!==ab&&(t.vertexAttribDivisorANGLE(vb,ab),hb.divisor=ab)}else if(hb.buffer&&(n.disableVertexAttribArray(vb),hb.buffer=null),hb.x!==jb||hb.y!==Fb||hb.z!==Cb||hb.w!==Nb)n.vertexAttrib4f(vb,jb,Fb,Cb,Nb),hb.x=jb,hb.y=Fb,hb.z=Cb,hb.w=Nb;Ob=J.call(this,z,c,0);n.uniform1f(D.location,Ob);pb=g.call(this,z,c,0);n.uniform1f(P.location,pb);n.uniform1f(M.location,c.align);n.uniform1f(w.location,c.baseline);
Ua=this.viewportArray;n.uniform4f(Y.location,Ua[0],Ua[1],Ua[2],Ua[3]);Tb=c.color;n.uniform4f(d.location,Tb[0],Tb[1],Tb[2],Tb[3]);yb=f.call(this,z,c,0);n.uniform2f(k.location,yb[0],yb[1]);ac=q.call(this,z,c,0);n.uniform2f(aa.location,ac[0],ac[1]);ib=this.scale;n.uniform2f(qa.location,ib[0],ib[1]);ob=this.translate;n.uniform2f(V.location,ob[0],ob[1]);Ia=c.positionOffset;n.uniform2f(B.location,Ia[0],Ia[1]);n.uniform1f(b.location,c.opacity);(qb=e.call(this,z,c,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);
Ka=qb._texture;n.uniform1i(r.location,Ka.bind());(eb=O.elements)?n.bindBuffer(34963,eb.buffer.buffer):pa.currentVAO&&(eb=N.getElements(pa.currentVAO.elements))&&n.bindBuffer(34963,eb.buffer.buffer);fb=c.offset;if(La=c.count)kb=O.instances,0<kb?eb?t.drawElementsInstancedANGLE(0,La,eb.type,fb<<(eb.type-5121>>1),kb):t.drawArraysInstancedANGLE(0,fb,La,kb):0>kb&&(eb?n.drawElements(0,La,eb.type,fb<<(eb.type-5121>>1)):n.drawArrays(0,fb,La)),l.dirty=!0,pa.setVAO(null),z.viewportWidth=m,z.viewportHeight=A,
x&&(X.cpuTime+=performance.now()-C),Q&&T.destroyStream(L),te&&T.destroyStream($d),wc&&T.destroyStream(Bb),cb&&T.destroyStream(Mb),Ka.unbind()},scope:function(b,d,c){var f,h,e,a,k,n,p,q,v,H,r,I,g,ma,B,w,sa,Ga,D,u,E,J,R,fa,ha,N,cc,Ma,M,F,P,ua,Q,za,U,pa,wa,Ba,ga,Y,aa,W,ea,Ta,oa,xa,Ea,ya,na,qa,va,Gb,V,hd,dd,ia,$a,Aa,xb,cb,Mb,ab,nb,Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa,Lc,zb,Za,
Ub,sc,Vb,Pb,Jc,Qb,Xd,Dc,ud,Mc,fd,qd,nc,vc,hc,db,rc,Sb,Wb,dc,ic,xc,Ac,ad,Pc,Qc,Rc,Xc,wd,bd,Yc,kc,bc,Zc,Uc,cd,yc,id;f=this.viewport;h=f.x|0;e=f.y|0;a="width"in f?f.width|0:z.framebufferWidth-h;k="height"in f?f.height|0:z.framebufferHeight-e;n=z.viewportWidth;z.viewportWidth=a;p=z.viewportHeight;z.viewportHeight=k;q=ra[0];ra[0]=h;v=ra[1];ra[1]=e;H=ra[2];ra[2]=a;r=ra[3];ra[3]=k;I=Ca[0];Ca[0]=0;g=Ca[1];Ca[1]=0;ma=Ca[2];Ca[2]=0;B=Ca[3];Ca[3]=1;w=ba.blend_enable;ba.blend_enable=!0;sa=ja[0];ja[0]=770;Ga=
ja[1];ja[1]=771;D=ja[2];ja[2]=773;u=ja[3];ja[3]=1;E=ba.depth_enable;ba.depth_enable=!1;J=ba.stencil_enable;ba.stencil_enable=!1;if(R=l.profile)fa=performance.now(),X.count++;ha=b.offset;N=O.offset;O.offset=ha;cc=b.count;Ma=O.count;O.count=cc;M=O.primitive;O.primitive=0;F=b.align;P=la[64];la[64]=F;ua=x.call(this,z,b,c);Q=la[69];la[69]=ua;za=C.call(this,z,b,c);U=la[67];la[67]=za;pa=L.call(this,z,b,c);wa=la[66];la[66]=pa;Ba=b.baseline;ga=la[65];la[65]=Ba;Y=K.call(this,z,b,c);aa=la[62];la[62]=Y;W=b.color;
ea=la[14];la[14]=W;Ta=A.call(this,z,b,c);oa=la[63];la[63]=Ta;xa=b.opacity;Ea=la[10];la[10]=xa;ya=b.positionOffset;na=la[68];la[68]=ya;qa=this.scale;va=la[6];la[6]=qa;Gb=this.translate;V=la[8];la[8]=Gb;hd=this.viewportArray;dd=la[3];la[3]=hd;ia=this.charBuffer;$a=!1;Aa=null;xb=0;cb=!1;ab=Mb=0;nb=1;Va=0;Tc=5126;Nb=qc=Ib=Hb=0;G(ia)?($a=!0,Aa=T.createStream(34962,ia),Tc=Aa.dtype):(Aa=T.getBuffer(ia))?Tc=Aa.dtype:"constant"in ia?(nb=2,"number"===typeof ia.constant?(Ib=ia.constant,qc=Nb=Hb=0):(Ib=0<ia.constant.length?
ia.constant[0]:0,qc=1<ia.constant.length?ia.constant[1]:0,Nb=2<ia.constant.length?ia.constant[2]:0,Hb=3<ia.constant.length?ia.constant[3]:0)):(Aa=G(ia.buffer)?T.createStream(34962,ia.buffer):T.getBuffer(ia.buffer),Tc="type"in ia?Da[ia.type]:Aa.dtype,cb=!!ia.normalized,ab=ia.size|0,Mb=ia.offset|0,Va=ia.stride|0,xb=ia.divisor|0);jb=m.buffer;m.buffer=Aa;Fb=m.divisor;m.divisor=xb;Cb=m.normalized;m.normalized=cb;vb=m.offset;m.offset=Mb;hb=m.size;m.size=ab;Xb=m.state;m.state=nb;Ob=m.stride;m.stride=Va;
pb=m.type;m.type=Tc;Ua=m.w;m.w=Hb;Tb=m.x;m.x=Ib;yb=m.y;m.y=qc;ac=m.z;m.z=Nb;ka.buffer=this.sizeBuffer;ib=!1;ob=null;Ia=0;qb=!1;eb=Ka=0;fb=1;La=0;kb=5126;Pa=rb=sb=Wa=0;G(ka)?(ib=!0,ob=T.createStream(34962,ka),kb=ob.dtype):(ob=T.getBuffer(ka))?kb=ob.dtype:"constant"in ka?(fb=2,"number"===typeof ka.constant?(sb=ka.constant,rb=Pa=Wa=0):(sb=0<ka.constant.length?ka.constant[0]:0,rb=1<ka.constant.length?ka.constant[1]:0,Pa=2<ka.constant.length?ka.constant[2]:0,Wa=3<ka.constant.length?ka.constant[3]:0)):
(ob=G(ka.buffer)?T.createStream(34962,ka.buffer):T.getBuffer(ka.buffer),kb="type"in ka?Da[ka.type]:ob.dtype,qb=!!ka.normalized,eb=ka.size|0,Ka=ka.offset|0,La=ka.stride|0,Ia=ka.divisor|0);Bc=t.buffer;t.buffer=ob;Ra=t.divisor;t.divisor=Ia;Jb=t.normalized;t.normalized=qb;Db=t.offset;t.offset=Ka;Na=t.size;t.size=eb;Jd=t.state;t.state=fb;Ya=t.stride;t.stride=La;Kb=t.type;t.type=kb;Lb=t.w;t.w=Wa;lb=t.x;t.x=sb;Oa=t.y;t.y=rb;Yb=t.z;t.z=Pa;Qa=this.position;tb=!1;ub=null;Sa=0;mb=!1;zc=gc=0;uc=1;bb=0;jc=5126;
zb=Lc=Xa=nd=0;G(Qa)?(tb=!0,ub=T.createStream(34962,Qa),jc=ub.dtype):(ub=T.getBuffer(Qa))?jc=ub.dtype:"constant"in Qa?(uc=2,"number"===typeof Qa.constant?(Xa=Qa.constant,Lc=zb=nd=0):(Xa=0<Qa.constant.length?Qa.constant[0]:0,Lc=1<Qa.constant.length?Qa.constant[1]:0,zb=2<Qa.constant.length?Qa.constant[2]:0,nd=3<Qa.constant.length?Qa.constant[3]:0)):(ub=G(Qa.buffer)?T.createStream(34962,Qa.buffer):T.getBuffer(Qa.buffer),jc="type"in Qa?Da[Qa.type]:ub.dtype,mb=!!Qa.normalized,zc=Qa.size|0,gc=Qa.offset|
0,bb=Qa.stride|0,Sa=Qa.divisor|0);Za=da.buffer;da.buffer=ub;Ub=da.divisor;da.divisor=Sa;sc=da.normalized;da.normalized=mb;Vb=da.offset;da.offset=gc;Pb=da.size;da.size=zc;Jc=da.state;da.state=uc;Qb=da.stride;da.stride=bb;Xd=da.type;da.type=jc;Dc=da.w;da.w=nd;ud=da.x;da.x=Xa;Mc=da.y;da.y=Lc;fd=da.z;da.z=zb;Z.buffer=this.sizeBuffer;qd=!1;nc=null;vc=0;hc=!1;rc=db=0;Sb=1;Wb=0;dc=5126;ad=Ac=xc=ic=0;G(Z)?(qd=!0,nc=T.createStream(34962,Z),dc=nc.dtype):(nc=T.getBuffer(Z))?dc=nc.dtype:"constant"in Z?(Sb=2,
"number"===typeof Z.constant?(xc=Z.constant,Ac=ad=ic=0):(xc=0<Z.constant.length?Z.constant[0]:0,Ac=1<Z.constant.length?Z.constant[1]:0,ad=2<Z.constant.length?Z.constant[2]:0,ic=3<Z.constant.length?Z.constant[3]:0)):(nc=G(Z.buffer)?T.createStream(34962,Z.buffer):T.getBuffer(Z.buffer),dc="type"in Z?Da[Z.type]:nc.dtype,hc=!!Z.normalized,rc=Z.size|0,db=Z.offset|0,Wb=Z.stride|0,vc=Z.divisor|0);Pc=y.buffer;y.buffer=nc;Qc=y.divisor;y.divisor=vc;Rc=y.normalized;y.normalized=hc;Xc=y.offset;y.offset=db;wd=
y.size;y.size=rc;bd=y.state;y.state=Sb;Yc=y.stride;y.stride=Wb;kc=y.type;y.type=dc;bc=y.w;y.w=ic;Zc=y.x;y.x=xc;Uc=y.y;y.y=Ac;cd=y.z;y.z=ad;yc=S.vert;S.vert=61;id=S.frag;S.frag=60;l.dirty=!0;d(z,b,c);z.viewportWidth=n;z.viewportHeight=p;ra[0]=q;ra[1]=v;ra[2]=H;ra[3]=r;Ca[0]=I;Ca[1]=g;Ca[2]=ma;Ca[3]=B;ba.blend_enable=w;ja[0]=sa;ja[1]=Ga;ja[2]=D;ja[3]=u;ba.depth_enable=E;ba.stencil_enable=J;R&&(X.cpuTime+=performance.now()-fa);O.offset=N;O.count=Ma;O.primitive=M;la[64]=P;la[69]=Q;la[67]=U;la[66]=wa;
la[65]=ga;la[62]=aa;la[14]=ea;la[63]=oa;la[10]=Ea;la[68]=na;la[6]=va;la[8]=V;la[3]=dd;$a&&T.destroyStream(Aa);m.buffer=jb;m.divisor=Fb;m.normalized=Cb;m.offset=vb;m.size=hb;m.state=Xb;m.stride=Ob;m.type=pb;m.w=Ua;m.x=Tb;m.y=yb;m.z=ac;ib&&T.destroyStream(ob);t.buffer=Bc;t.divisor=Ra;t.normalized=Jb;t.offset=Db;t.size=Na;t.state=Jd;t.stride=Ya;t.type=Kb;t.w=Lb;t.x=lb;t.y=Oa;t.z=Yb;tb&&T.destroyStream(ub);da.buffer=Za;da.divisor=Ub;da.normalized=sc;da.offset=Vb;da.size=Pb;da.state=Jc;da.stride=Qb;da.type=
Xd;da.w=Dc;da.x=ud;da.y=Mc;da.z=fd;qd&&T.destroyStream(nc);y.buffer=Pc;y.divisor=Qc;y.normalized=Rc;y.offset=Xc;y.size=wd;y.state=bd;y.stride=Yc;y.type=kc;y.w=bc;y.x=Zc;y.y=Uc;y.z=cd;S.vert=yc;S.frag=id;l.dirty=!0}}},$2:function(a,X,F){var J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P;J=a.attributes;g=a.current;f=a.framebuffer;q=a.gl;e=a.next;x=a.vao;C=e.blend_color;L=g.blend_color;K=e.blend_equation;A=g.blend_equation;m=e.blend_func;t=g.blend_func;da=e.colorMask;y=g.colorMask;U=
e.depth_range;u=g.depth_range;Q=e.polygonOffset_offset;ga=g.polygonOffset_offset;c=e.sample_coverage;h=g.sample_coverage;M=e.scissor_box;r=g.scissor_box;aa=e.stencil_func;k=g.stencil_func;w=e.stencil_opBack;W=g.stencil_opBack;E=e.stencil_opFront;D=g.stencil_opFront;d=e.viewport;P=g.viewport;return{poll:function(){var b,a,B,J,x,F,X,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca;g.dirty=!1;a=e.blend_enable;B=e.cull_enable;J=e.depth_enable;x=e.dither;F=e.polygonOffset_enable;X=e.sample_alpha;R=e.sample_enable;
T=e.scissor_enable;z=e.stencil_enable;l=e.cull_face;O=g.cull_face;N=e.depth_func;wa=g.depth_func;na=e.depth_mask;n=g.depth_mask;G=e.frontFace;ba=g.frontFace;S=e.lineWidth;la=g.lineWidth;pa=e.stencil_mask;Ca=g.stencil_mask;b=f.next;b!==f.cur&&(b?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null),f.cur=b);a!==g.blend_enable&&(a?q.enable(3042):q.disable(3042),g.blend_enable=a);B!==g.cull_enable&&(B?q.enable(2884):q.disable(2884),g.cull_enable=B);J!==g.depth_enable&&(J?q.enable(2929):
q.disable(2929),g.depth_enable=J);x!==g.dither&&(x?q.enable(3024):q.disable(3024),g.dither=x);F!==g.polygonOffset_enable&&(F?q.enable(32823):q.disable(32823),g.polygonOffset_enable=F);X!==g.sample_alpha&&(X?q.enable(32926):q.disable(32926),g.sample_alpha=X);R!==g.sample_enable&&(R?q.enable(32928):q.disable(32928),g.sample_enable=R);T!==g.scissor_enable&&(T?q.enable(3089):q.disable(3089),g.scissor_enable=T);z!==g.stencil_enable&&(z?q.enable(2960):q.disable(2960),g.stencil_enable=z);if(C[0]!==L[0]||
C[1]!==L[1]||C[2]!==L[2]||C[3]!==L[3])q.blendColor(C[0],C[1],C[2],C[3]),L[0]=C[0],L[1]=C[1],L[2]=C[2],L[3]=C[3];if(K[0]!==A[0]||K[1]!==A[1])q.blendEquationSeparate(K[0],K[1]),A[0]=K[0],A[1]=K[1];if(m[0]!==t[0]||m[1]!==t[1]||m[2]!==t[2]||m[3]!==t[3])q.blendFuncSeparate(m[0],m[1],m[2],m[3]),t[0]=m[0],t[1]=m[1],t[2]=m[2],t[3]=m[3];if(da[0]!==y[0]||da[1]!==y[1]||da[2]!==y[2]||da[3]!==y[3])q.colorMask(da[0],da[1],da[2],da[3]),y[0]=da[0],y[1]=da[1],y[2]=da[2],y[3]=da[3];l!==O&&(q.cullFace(l),g.cull_face=
l);N!==wa&&(q.depthFunc(N),g.depth_func=N);na!==n&&(q.depthMask(na),g.depth_mask=na);if(U[0]!==u[0]||U[1]!==u[1])q.depthRange(U[0],U[1]),u[0]=U[0],u[1]=U[1];G!==ba&&(q.frontFace(G),g.frontFace=G);S!==la&&(q.lineWidth(S),g.lineWidth=S);if(Q[0]!==ga[0]||Q[1]!==ga[1])q.polygonOffset(Q[0],Q[1]),ga[0]=Q[0],ga[1]=Q[1];if(c[0]!==h[0]||c[1]!==h[1])q.sampleCoverage(c[0],c[1]),h[0]=c[0],h[1]=c[1];if(M[0]!==r[0]||M[1]!==r[1]||M[2]!==r[2]||M[3]!==r[3])q.scissor(M[0],M[1],M[2],M[3]),r[0]=M[0],r[1]=M[1],r[2]=M[2],
r[3]=M[3];if(aa[0]!==k[0]||aa[1]!==k[1]||aa[2]!==k[2])q.stencilFunc(aa[0],aa[1],aa[2]),k[0]=aa[0],k[1]=aa[1],k[2]=aa[2];pa!==Ca&&(q.stencilMask(pa),g.stencil_mask=pa);if(w[0]!==W[0]||w[1]!==W[1]||w[2]!==W[2]||w[3]!==W[3])q.stencilOpSeparate(w[0],w[1],w[2],w[3]),W[0]=w[0],W[1]=w[1],W[2]=w[2],W[3]=w[3];if(E[0]!==D[0]||E[1]!==D[1]||E[2]!==D[2]||E[3]!==D[3])q.stencilOpSeparate(E[0],E[1],E[2],E[3]),D[0]=E[0],D[1]=E[1],D[2]=E[2],D[3]=E[3];if(d[0]!==P[0]||d[1]!==P[1]||d[2]!==P[2]||d[3]!==P[3])q.viewport(d[0],
d[1],d[2],d[3]),P[0]=d[0],P[1]=d[1],P[2]=d[2],P[3]=d[3]},refresh:function(){var b,a,B,F,X,Y,ea,R,T,z,l,O,N,wa,na,n;g.dirty=!1;a=e.blend_enable;B=e.cull_enable;F=e.depth_enable;X=e.dither;Y=e.polygonOffset_enable;ea=e.sample_alpha;R=e.sample_enable;T=e.scissor_enable;z=e.stencil_enable;l=e.cull_face;O=e.depth_func;N=e.depth_mask;wa=e.frontFace;na=e.lineWidth;n=e.stencil_mask;(b=f.next)?q.bindFramebuffer(36160,b.framebuffer):q.bindFramebuffer(36160,null);f.cur=b;b=J[0];b.buffer?(q.enableVertexAttribArray(0),
q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=null);b=J[1];b.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);b=J[2];b.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,b.buffer.buffer),
q.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);b=J[3];b.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);b=J[4];b.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(4,b.size,
b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(4),q.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);b=J[5];b.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);b=J[6];b.buffer?(q.enableVertexAttribArray(6),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):
(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);b=J[7];b.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);b=J[8];b.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(8),
q.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);b=J[9];b.buffer?(q.enableVertexAttribArray(9),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);b=J[10];b.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,b.x,b.y,
b.z,b.w),b.buffer=null);b=J[11];b.buffer?(q.enableVertexAttribArray(11),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,b.x,b.y,b.z,b.w),b.buffer=null);b=J[12];b.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);
b=J[13];b.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);b=J[14];b.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(14),q.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);b=J[15];b.buffer?(q.enableVertexAttribArray(15),
q.bindBuffer(34962,b.buffer.buffer),q.vertexAttribPointer(15,b.size,b.type,b.normalized,b.stride,b.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);x.currentVAO=null;x.setVAO(x.targetVAO);a?q.enable(3042):q.disable(3042);g.blend_enable=a;B?q.enable(2884):q.disable(2884);g.cull_enable=B;F?q.enable(2929):q.disable(2929);g.depth_enable=F;X?q.enable(3024):q.disable(3024);g.dither=X;Y?q.enable(32823):q.disable(32823);g.polygonOffset_enable=Y;ea?q.enable(32926):
q.disable(32926);g.sample_alpha=ea;R?q.enable(32928):q.disable(32928);g.sample_enable=R;T?q.enable(3089):q.disable(3089);g.scissor_enable=T;z?q.enable(2960):q.disable(2960);g.stencil_enable=z;q.blendColor(C[0],C[1],C[2],C[3]);L[0]=C[0];L[1]=C[1];L[2]=C[2];L[3]=C[3];q.blendEquationSeparate(K[0],K[1]);A[0]=K[0];A[1]=K[1];q.blendFuncSeparate(m[0],m[1],m[2],m[3]);t[0]=m[0];t[1]=m[1];t[2]=m[2];t[3]=m[3];q.colorMask(da[0],da[1],da[2],da[3]);y[0]=da[0];y[1]=da[1];y[2]=da[2];y[3]=da[3];q.cullFace(l);g.cull_face=
l;q.depthFunc(O);g.depth_func=O;q.depthMask(N);g.depth_mask=N;q.depthRange(U[0],U[1]);u[0]=U[0];u[1]=U[1];q.frontFace(wa);g.frontFace=wa;q.lineWidth(na);g.lineWidth=na;q.polygonOffset(Q[0],Q[1]);ga[0]=Q[0];ga[1]=Q[1];q.sampleCoverage(c[0],c[1]);h[0]=c[0];h[1]=c[1];q.scissor(M[0],M[1],M[2],M[3]);r[0]=M[0];r[1]=M[1];r[2]=M[2];r[3]=M[3];q.stencilFunc(aa[0],aa[1],aa[2]);k[0]=aa[0];k[1]=aa[1];k[2]=aa[2];q.stencilMask(n);g.stencil_mask=n;q.stencilOpSeparate(w[0],w[1],w[2],w[3]);W[0]=w[0];W[1]=w[1];W[2]=
w[2];W[3]=w[3];q.stencilOpSeparate(E[0],E[1],E[2],E[3]);D[0]=E[0];D[1]=E[1];D[2]=E[2];D[3]=E[3];q.viewport(d[0],d[1],d[2],d[3]);P[0]=d[0];P[1]=d[1];P[2]=d[2];P[3]=d[3]}}},$7:function(a,X,F,J,g,f,q,e){var x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea,R;x=a.context;C=a.current;L=a.framebuffer;K=a.gl;A=a.next;m=a.shader;t=a.vao;da=A.blend_color;y=C.blend_color;U=A.blend_equation;u=C.blend_equation;Q=A.blend_func;ga=C.blend_func;c=A.colorMask;h=C.colorMask;M=A.depth_range;r=C.depth_range;
aa=A.polygonOffset_offset;k=C.polygonOffset_offset;w=A.sample_coverage;W=C.sample_coverage;E=A.scissor_box;D=C.scissor_box;d=A.stencil_func;P=C.stencil_func;b=A.stencil_opBack;xa=C.stencil_opBack;B=A.stencil_opFront;qa=C.stencil_opFront;V=A.viewport;Y=C.viewport;ea={};R={};return{draw:function(e){var a,l,q,E,R,na,n,G,ba,S;a=e.framebuffer;l=L.getFramebuffer(a);a&&!l&&X.commandRaise(g,F);a=L.next;L.next=l;q=x.framebufferWidth;x.framebufferWidth=l?l.width:x.drawingBufferWidth;E=x.framebufferHeight;x.framebufferHeight=
l?l.height:x.drawingBufferHeight;l!==L.cur&&(l?K.bindFramebuffer(36160,l.framebuffer):K.bindFramebuffer(36160,null),L.cur=l);if(C.dirty){l=A.dither;l!==C.dither&&(l?K.enable(3024):K.disable(3024),C.dither=l);l=A.blend_enable;l!==C.blend_enable&&(l?K.enable(3042):K.disable(3042),C.blend_enable=l);l=da[0];n=da[1];R=da[2];na=da[3];if(l!==y[0]||n!==y[1]||R!==y[2]||na!==y[3])K.blendColor(l,n,R,na),y[0]=l,y[1]=n,y[2]=R,y[3]=na;l=U[0];n=U[1];if(l!==u[0]||n!==u[1])K.blendEquationSeparate(l,n),u[0]=l,u[1]=
n;l=Q[0];n=Q[1];R=Q[2];na=Q[3];if(l!==ga[0]||n!==ga[1]||R!==ga[2]||na!==ga[3])K.blendFuncSeparate(l,n,R,na),ga[0]=l,ga[1]=n,ga[2]=R,ga[3]=na;l=A.depth_enable;l!==C.depth_enable&&(l?K.enable(2929):K.disable(2929),C.depth_enable=l);l=A.depth_func;l!==C.depth_func&&(K.depthFunc(l),C.depth_func=l);l=M[0];n=M[1];if(l!==r[0]||n!==r[1])K.depthRange(l,n),r[0]=l,r[1]=n;l=A.depth_mask;l!==C.depth_mask&&(K.depthMask(l),C.depth_mask=l);l=c[0];n=c[1];R=c[2];na=c[3];if(l!==h[0]||n!==h[1]||R!==h[2]||na!==h[3])K.colorMask(l,
n,R,na),h[0]=l,h[1]=n,h[2]=R,h[3]=na;l=A.cull_enable;l!==C.cull_enable&&(l?K.enable(2884):K.disable(2884),C.cull_enable=l);l=A.cull_face;l!==C.cull_face&&(K.cullFace(l),C.cull_face=l);l=A.frontFace;l!==C.frontFace&&(K.frontFace(l),C.frontFace=l);l=A.lineWidth;l!==C.lineWidth&&(K.lineWidth(l),C.lineWidth=l);l=A.polygonOffset_enable;l!==C.polygonOffset_enable&&(l?K.enable(32823):K.disable(32823),C.polygonOffset_enable=l);l=aa[0];n=aa[1];if(l!==k[0]||n!==k[1])K.polygonOffset(l,n),k[0]=l,k[1]=n;l=A.sample_alpha;
l!==C.sample_alpha&&(l?K.enable(32926):K.disable(32926),C.sample_alpha=l);l=A.sample_enable;l!==C.sample_enable&&(l?K.enable(32928):K.disable(32928),C.sample_enable=l);l=w[0];n=w[1];if(l!==W[0]||n!==W[1])K.sampleCoverage(l,n),W[0]=l,W[1]=n;l=A.stencil_enable;l!==C.stencil_enable&&(l?K.enable(2960):K.disable(2960),C.stencil_enable=l);l=A.stencil_mask;l!==C.stencil_mask&&(K.stencilMask(l),C.stencil_mask=l);l=d[0];n=d[1];R=d[2];if(l!==P[0]||n!==P[1]||R!==P[2])K.stencilFunc(l,n,R),P[0]=l,P[1]=n,P[2]=
R;l=B[0];n=B[1];R=B[2];na=B[3];if(l!==qa[0]||n!==qa[1]||R!==qa[2]||na!==qa[3])K.stencilOpSeparate(l,n,R,na),qa[0]=l,qa[1]=n,qa[2]=R,qa[3]=na;l=b[0];n=b[1];R=b[2];na=b[3];if(l!==xa[0]||n!==xa[1]||R!==xa[2]||na!==xa[3])K.stencilOpSeparate(l,n,R,na),xa[0]=l,xa[1]=n,xa[2]=R,xa[3]=na;l=A.scissor_enable;l!==C.scissor_enable&&(l?K.enable(3089):K.disable(3089),C.scissor_enable=l)}R=x.framebufferWidth;na=x.framebufferHeight;l=x.viewportWidth;x.viewportWidth=R;n=x.viewportHeight;x.viewportHeight=na;K.viewport(0,
0,R,na);Y[0]=0;Y[1]=0;Y[2]=R;Y[3]=na;R=x.framebufferWidth;na=x.framebufferHeight;K.scissor(0,0,R,na);D[0]=0;D[1]=0;D[2]=R;D[3]=na;if(R=C.profile)G=performance.now(),J.count++;na=m.program(m.vert,m.frag,F);K.useProgram(na.program);t.setVAO(null);ba=na.id;(S=ea[ba])||(S=ea[ba]=f(na));S.call(this,e);C.dirty=!0;t.setVAO(null);L.next=a;x.framebufferWidth=q;x.framebufferHeight=E;x.viewportWidth=l;x.viewportHeight=n;R&&(J.cpuTime+=performance.now()-G)},scope:function(b,d,c){var f,h,e,a,k,r,g,B,w,y,R,D,u,
m,A;f=b.framebuffer;h=L.getFramebuffer(f);f&&!h&&X.commandRaise(q,F);f=L.next;L.next=h;e=x.framebufferWidth;x.framebufferWidth=h?h.width:x.drawingBufferWidth;a=x.framebufferHeight;x.framebufferHeight=h?h.height:x.drawingBufferHeight;k=x.framebufferWidth;r=x.framebufferHeight;h=x.viewportWidth;x.viewportWidth=k;g=x.viewportHeight;x.viewportHeight=r;B=V[0];V[0]=0;w=V[1];V[1]=0;y=V[2];V[2]=k;k=V[3];V[3]=r;R=x.framebufferWidth;D=x.framebufferHeight;r=E[0];E[0]=0;u=E[1];E[1]=0;m=E[2];E[2]=R;R=E[3];E[3]=
D;if(D=C.profile)A=performance.now(),J.count++;C.dirty=!0;d(x,b,c);L.next=f;x.framebufferWidth=e;x.framebufferHeight=a;x.viewportWidth=h;x.viewportHeight=g;V[0]=B;V[1]=w;V[2]=y;V[3]=k;E[0]=r;E[1]=u;E[2]=m;E[3]=R;D&&(J.cpuTime+=performance.now()-A);C.dirty=!0},batch:function(f,a){var l,q,g,D,E;if(C.dirty){l=A.dither;l!==C.dither&&(l?K.enable(3024):K.disable(3024),C.dither=l);l=A.blend_enable;l!==C.blend_enable&&(l?K.enable(3042):K.disable(3042),C.blend_enable=l);l=da[0];g=da[1];D=da[2];E=da[3];if(l!==
y[0]||g!==y[1]||D!==y[2]||E!==y[3])K.blendColor(l,g,D,E),y[0]=l,y[1]=g,y[2]=D,y[3]=E;l=U[0];g=U[1];if(l!==u[0]||g!==u[1])K.blendEquationSeparate(l,g),u[0]=l,u[1]=g;l=Q[0];g=Q[1];D=Q[2];E=Q[3];if(l!==ga[0]||g!==ga[1]||D!==ga[2]||E!==ga[3])K.blendFuncSeparate(l,g,D,E),ga[0]=l,ga[1]=g,ga[2]=D,ga[3]=E;l=A.depth_enable;l!==C.depth_enable&&(l?K.enable(2929):K.disable(2929),C.depth_enable=l);l=A.depth_func;l!==C.depth_func&&(K.depthFunc(l),C.depth_func=l);l=M[0];g=M[1];if(l!==r[0]||g!==r[1])K.depthRange(l,
g),r[0]=l,r[1]=g;l=A.depth_mask;l!==C.depth_mask&&(K.depthMask(l),C.depth_mask=l);l=c[0];g=c[1];D=c[2];E=c[3];if(l!==h[0]||g!==h[1]||D!==h[2]||E!==h[3])K.colorMask(l,g,D,E),h[0]=l,h[1]=g,h[2]=D,h[3]=E;l=A.cull_enable;l!==C.cull_enable&&(l?K.enable(2884):K.disable(2884),C.cull_enable=l);l=A.cull_face;l!==C.cull_face&&(K.cullFace(l),C.cull_face=l);l=A.frontFace;l!==C.frontFace&&(K.frontFace(l),C.frontFace=l);l=A.lineWidth;l!==C.lineWidth&&(K.lineWidth(l),C.lineWidth=l);l=A.polygonOffset_enable;l!==
C.polygonOffset_enable&&(l?K.enable(32823):K.disable(32823),C.polygonOffset_enable=l);l=aa[0];g=aa[1];if(l!==k[0]||g!==k[1])K.polygonOffset(l,g),k[0]=l,k[1]=g;l=A.sample_alpha;l!==C.sample_alpha&&(l?K.enable(32926):K.disable(32926),C.sample_alpha=l);l=A.sample_enable;l!==C.sample_enable&&(l?K.enable(32928):K.disable(32928),C.sample_enable=l);l=w[0];g=w[1];if(l!==W[0]||g!==W[1])K.sampleCoverage(l,g),W[0]=l,W[1]=g;l=A.stencil_enable;l!==C.stencil_enable&&(l?K.enable(2960):K.disable(2960),C.stencil_enable=
l);l=A.stencil_mask;l!==C.stencil_mask&&(K.stencilMask(l),C.stencil_mask=l);l=d[0];g=d[1];D=d[2];if(l!==P[0]||g!==P[1]||D!==P[2])K.stencilFunc(l,g,D),P[0]=l,P[1]=g,P[2]=D;l=B[0];g=B[1];D=B[2];E=B[3];if(l!==qa[0]||g!==qa[1]||D!==qa[2]||E!==qa[3])K.stencilOpSeparate(l,g,D,E),qa[0]=l,qa[1]=g,qa[2]=D,qa[3]=E;l=b[0];g=b[1];D=b[2];E=b[3];if(l!==xa[0]||g!==xa[1]||D!==xa[2]||E!==xa[3])K.stencilOpSeparate(l,g,D,E),xa[0]=l,xa[1]=g,xa[2]=D,xa[3]=E;l=A.scissor_enable;l!==C.scissor_enable&&(l?K.enable(3089):K.disable(3089),
C.scissor_enable=l)}if(l=C.profile)q=performance.now(),J.count+=a;g=m.program(m.vert,m.frag,F);K.useProgram(g.program);t.setVAO(null);D=g.id;(E=R[D])||(E=R[D]=e(g));E.call(this,f,a);C.dirty=!0;t.setVAO(null);l&&(J.cpuTime+=performance.now()-q)}}},$5:function(a,X,F,J,g,f){var q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y;q=a.context;e=a.current;x=a.framebuffer;C=a.gl;L=a.next;K=a.shader;A=a.vao;m=L.blend_color;t=e.blend_color;da=L.blend_equation;y=e.blend_equation;U=L.blend_func;
u=e.blend_func;Q=L.colorMask;ga=e.colorMask;c=L.depth_range;h=e.depth_range;M=L.polygonOffset_offset;r=e.polygonOffset_offset;aa=L.sample_coverage;k=e.sample_coverage;w=L.scissor_box;W=e.scissor_box;E=L.stencil_func;D=e.stencil_func;d=L.stencil_opBack;P=e.stencil_opBack;b=L.stencil_opFront;xa=e.stencil_opFront;B=L.viewport;qa=e.viewport;V={};Y={};return{draw:function(f){var a,q,z,l,O;a=x.next;a!==x.cur&&(a?C.bindFramebuffer(36160,a.framebuffer):C.bindFramebuffer(36160,null),x.cur=a);if(e.dirty){a=
L.dither;a!==e.dither&&(a?C.enable(3024):C.disable(3024),e.dither=a);a=L.blend_enable;a!==e.blend_enable&&(a?C.enable(3042):C.disable(3042),e.blend_enable=a);a=m[0];z=m[1];l=m[2];O=m[3];if(a!==t[0]||z!==t[1]||l!==t[2]||O!==t[3])C.blendColor(a,z,l,O),t[0]=a,t[1]=z,t[2]=l,t[3]=O;a=da[0];z=da[1];if(a!==y[0]||z!==y[1])C.blendEquationSeparate(a,z),y[0]=a,y[1]=z;a=U[0];z=U[1];l=U[2];O=U[3];if(a!==u[0]||z!==u[1]||l!==u[2]||O!==u[3])C.blendFuncSeparate(a,z,l,O),u[0]=a,u[1]=z,u[2]=l,u[3]=O;a=L.depth_enable;
a!==e.depth_enable&&(a?C.enable(2929):C.disable(2929),e.depth_enable=a);a=L.depth_func;a!==e.depth_func&&(C.depthFunc(a),e.depth_func=a);a=c[0];z=c[1];if(a!==h[0]||z!==h[1])C.depthRange(a,z),h[0]=a,h[1]=z;a=L.depth_mask;a!==e.depth_mask&&(C.depthMask(a),e.depth_mask=a);a=Q[0];z=Q[1];l=Q[2];O=Q[3];if(a!==ga[0]||z!==ga[1]||l!==ga[2]||O!==ga[3])C.colorMask(a,z,l,O),ga[0]=a,ga[1]=z,ga[2]=l,ga[3]=O;a=L.cull_enable;a!==e.cull_enable&&(a?C.enable(2884):C.disable(2884),e.cull_enable=a);a=L.cull_face;a!==
e.cull_face&&(C.cullFace(a),e.cull_face=a);a=L.frontFace;a!==e.frontFace&&(C.frontFace(a),e.frontFace=a);a=L.lineWidth;a!==e.lineWidth&&(C.lineWidth(a),e.lineWidth=a);a=L.polygonOffset_enable;a!==e.polygonOffset_enable&&(a?C.enable(32823):C.disable(32823),e.polygonOffset_enable=a);a=M[0];z=M[1];if(a!==r[0]||z!==r[1])C.polygonOffset(a,z),r[0]=a,r[1]=z;a=L.sample_alpha;a!==e.sample_alpha&&(a?C.enable(32926):C.disable(32926),e.sample_alpha=a);a=L.sample_enable;a!==e.sample_enable&&(a?C.enable(32928):
C.disable(32928),e.sample_enable=a);a=aa[0];z=aa[1];if(a!==k[0]||z!==k[1])C.sampleCoverage(a,z),k[0]=a,k[1]=z;a=L.stencil_enable;a!==e.stencil_enable&&(a?C.enable(2960):C.disable(2960),e.stencil_enable=a);a=L.stencil_mask;a!==e.stencil_mask&&(C.stencilMask(a),e.stencil_mask=a);a=E[0];z=E[1];l=E[2];if(a!==D[0]||z!==D[1]||l!==D[2])C.stencilFunc(a,z,l),D[0]=a,D[1]=z,D[2]=l;a=b[0];z=b[1];l=b[2];O=b[3];if(a!==xa[0]||z!==xa[1]||l!==xa[2]||O!==xa[3])C.stencilOpSeparate(a,z,l,O),xa[0]=a,xa[1]=z,xa[2]=l,xa[3]=
O;a=d[0];z=d[1];l=d[2];O=d[3];if(a!==P[0]||z!==P[1]||l!==P[2]||O!==P[3])C.stencilOpSeparate(a,z,l,O),P[0]=a,P[1]=z,P[2]=l,P[3]=O;a=L.scissor_enable;a!==e.scissor_enable&&(a?C.enable(3089):C.disable(3089),e.scissor_enable=a);a=w[0];z=w[1];l=w[2];O=w[3];if(a!==W[0]||z!==W[1]||l!==W[2]||O!==W[3])C.scissor(a,z,l,O),W[0]=a,W[1]=z,W[2]=l,W[3]=O;a=B[0];z=B[1];l=B[2];O=B[3];if(a!==qa[0]||z!==qa[1]||l!==qa[2]||O!==qa[3])C.viewport(a,z,l,O),qa[0]=a,qa[1]=z,qa[2]=l,qa[3]=O;e.dirty=!1}if(a=e.profile)q=performance.now(),
J.count++;z=K.program(K.vert,K.frag,F);C.useProgram(z.program);A.setVAO(null);l=z.id;(O=V[l])||(O=V[l]=g(z));O.call(this,f);A.setVAO(null);a&&(J.cpuTime+=performance.now()-q)},scope:function(b,d,c){var f,h;if(f=e.profile)h=performance.now(),J.count++;d(q,b,c);f&&(J.cpuTime+=performance.now()-h)},batch:function(a,q){var g,z,l,O,N;g=x.next;g!==x.cur&&(g?C.bindFramebuffer(36160,g.framebuffer):C.bindFramebuffer(36160,null),x.cur=g);if(e.dirty){g=L.dither;g!==e.dither&&(g?C.enable(3024):C.disable(3024),
e.dither=g);g=L.blend_enable;g!==e.blend_enable&&(g?C.enable(3042):C.disable(3042),e.blend_enable=g);g=m[0];l=m[1];O=m[2];N=m[3];if(g!==t[0]||l!==t[1]||O!==t[2]||N!==t[3])C.blendColor(g,l,O,N),t[0]=g,t[1]=l,t[2]=O,t[3]=N;g=da[0];l=da[1];if(g!==y[0]||l!==y[1])C.blendEquationSeparate(g,l),y[0]=g,y[1]=l;g=U[0];l=U[1];O=U[2];N=U[3];if(g!==u[0]||l!==u[1]||O!==u[2]||N!==u[3])C.blendFuncSeparate(g,l,O,N),u[0]=g,u[1]=l,u[2]=O,u[3]=N;g=L.depth_enable;g!==e.depth_enable&&(g?C.enable(2929):C.disable(2929),e.depth_enable=
g);g=L.depth_func;g!==e.depth_func&&(C.depthFunc(g),e.depth_func=g);g=c[0];l=c[1];if(g!==h[0]||l!==h[1])C.depthRange(g,l),h[0]=g,h[1]=l;g=L.depth_mask;g!==e.depth_mask&&(C.depthMask(g),e.depth_mask=g);g=Q[0];l=Q[1];O=Q[2];N=Q[3];if(g!==ga[0]||l!==ga[1]||O!==ga[2]||N!==ga[3])C.colorMask(g,l,O,N),ga[0]=g,ga[1]=l,ga[2]=O,ga[3]=N;g=L.cull_enable;g!==e.cull_enable&&(g?C.enable(2884):C.disable(2884),e.cull_enable=g);g=L.cull_face;g!==e.cull_face&&(C.cullFace(g),e.cull_face=g);g=L.frontFace;g!==e.frontFace&&
(C.frontFace(g),e.frontFace=g);g=L.lineWidth;g!==e.lineWidth&&(C.lineWidth(g),e.lineWidth=g);g=L.polygonOffset_enable;g!==e.polygonOffset_enable&&(g?C.enable(32823):C.disable(32823),e.polygonOffset_enable=g);g=M[0];l=M[1];if(g!==r[0]||l!==r[1])C.polygonOffset(g,l),r[0]=g,r[1]=l;g=L.sample_alpha;g!==e.sample_alpha&&(g?C.enable(32926):C.disable(32926),e.sample_alpha=g);g=L.sample_enable;g!==e.sample_enable&&(g?C.enable(32928):C.disable(32928),e.sample_enable=g);g=aa[0];l=aa[1];if(g!==k[0]||l!==k[1])C.sampleCoverage(g,
l),k[0]=g,k[1]=l;g=L.stencil_enable;g!==e.stencil_enable&&(g?C.enable(2960):C.disable(2960),e.stencil_enable=g);g=L.stencil_mask;g!==e.stencil_mask&&(C.stencilMask(g),e.stencil_mask=g);g=E[0];l=E[1];O=E[2];if(g!==D[0]||l!==D[1]||O!==D[2])C.stencilFunc(g,l,O),D[0]=g,D[1]=l,D[2]=O;g=b[0];l=b[1];O=b[2];N=b[3];if(g!==xa[0]||l!==xa[1]||O!==xa[2]||N!==xa[3])C.stencilOpSeparate(g,l,O,N),xa[0]=g,xa[1]=l,xa[2]=O,xa[3]=N;g=d[0];l=d[1];O=d[2];N=d[3];if(g!==P[0]||l!==P[1]||O!==P[2]||N!==P[3])C.stencilOpSeparate(g,
l,O,N),P[0]=g,P[1]=l,P[2]=O,P[3]=N;g=L.scissor_enable;g!==e.scissor_enable&&(g?C.enable(3089):C.disable(3089),e.scissor_enable=g);g=w[0];l=w[1];O=w[2];N=w[3];if(g!==W[0]||l!==W[1]||O!==W[2]||N!==W[3])C.scissor(g,l,O,N),W[0]=g,W[1]=l,W[2]=O,W[3]=N;g=B[0];l=B[1];O=B[2];N=B[3];if(g!==qa[0]||l!==qa[1]||O!==qa[2]||N!==qa[3])C.viewport(g,l,O,N),qa[0]=g,qa[1]=l,qa[2]=O,qa[3]=N;e.dirty=!1}if(g=e.profile)z=performance.now(),J.count+=q;l=K.program(K.vert,K.frag,F);C.useProgram(l.program);A.setVAO(null);O=l.id;
(N=Y[O])||(N=Y[O]=f(l));N.call(this,a,q);A.setVAO(null);g&&(J.cpuTime+=performance.now()-z)}}},"$26,color,freq,phase,projection,time,view":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P){var b,xa,B,qa,V,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,ia,Gb,ha;b=a.attributes;xa=a.context;B=a.current;qa=a.draw;V=a.elements;Y=a.framebuffer;ea=a.gl;R=a.isArrayLike;T=a.next;z=a.shader;l=a.uniforms;O=a.vao;N=T.blend_color;wa=B.blend_color;
na=T.blend_equation;n=B.blend_equation;G=T.blend_func;ba=B.blend_func;S=T.colorMask;la=B.colorMask;pa=T.depth_range;Ca=B.depth_range;Ba=T.polygonOffset_offset;fa=B.polygonOffset_offset;Ea=T.sample_coverage;ja=B.sample_coverage;oa=T.scissor_box;ya=B.scissor_box;Ma=T.stencil_func;ma=B.stencil_func;cc=T.stencil_opBack;Ta=B.stencil_opBack;v=T.stencil_opFront;p=B.stencil_opFront;I=T.viewport;ua=B.viewport;va=new Float32Array(16);ia=new Float32Array(16);Gb=new Float32Array(16);ha=new Float32Array(16);return{draw:function(c){var h,
a,k,l;h=Y.next;h!==Y.cur&&(h?ea.bindFramebuffer(36160,h.framebuffer):ea.bindFramebuffer(36160,null),Y.cur=h);if(B.dirty){var r;h=T.dither;h!==B.dither&&(h?ea.enable(3024):ea.disable(3024),B.dither=h);h=T.blend_enable;h!==B.blend_enable&&(h?ea.enable(3042):ea.disable(3042),B.blend_enable=h);h=N[0];k=N[1];l=N[2];r=N[3];if(h!==wa[0]||k!==wa[1]||l!==wa[2]||r!==wa[3])ea.blendColor(h,k,l,r),wa[0]=h,wa[1]=k,wa[2]=l,wa[3]=r;h=na[0];k=na[1];if(h!==n[0]||k!==n[1])ea.blendEquationSeparate(h,k),n[0]=h,n[1]=k;
h=G[0];k=G[1];l=G[2];r=G[3];if(h!==ba[0]||k!==ba[1]||l!==ba[2]||r!==ba[3])ea.blendFuncSeparate(h,k,l,r),ba[0]=h,ba[1]=k,ba[2]=l,ba[3]=r;h=T.depth_enable;h!==B.depth_enable&&(h?ea.enable(2929):ea.disable(2929),B.depth_enable=h);h=T.depth_func;h!==B.depth_func&&(ea.depthFunc(h),B.depth_func=h);h=pa[0];k=pa[1];if(h!==Ca[0]||k!==Ca[1])ea.depthRange(h,k),Ca[0]=h,Ca[1]=k;h=T.depth_mask;h!==B.depth_mask&&(ea.depthMask(h),B.depth_mask=h);h=S[0];k=S[1];l=S[2];r=S[3];if(h!==la[0]||k!==la[1]||l!==la[2]||r!==
la[3])ea.colorMask(h,k,l,r),la[0]=h,la[1]=k,la[2]=l,la[3]=r;h=T.cull_enable;h!==B.cull_enable&&(h?ea.enable(2884):ea.disable(2884),B.cull_enable=h);h=T.cull_face;h!==B.cull_face&&(ea.cullFace(h),B.cull_face=h);h=T.frontFace;h!==B.frontFace&&(ea.frontFace(h),B.frontFace=h);h=T.lineWidth;h!==B.lineWidth&&(ea.lineWidth(h),B.lineWidth=h);h=T.polygonOffset_enable;h!==B.polygonOffset_enable&&(h?ea.enable(32823):ea.disable(32823),B.polygonOffset_enable=h);h=Ba[0];k=Ba[1];if(h!==fa[0]||k!==fa[1])ea.polygonOffset(h,
k),fa[0]=h,fa[1]=k;h=T.sample_alpha;h!==B.sample_alpha&&(h?ea.enable(32926):ea.disable(32926),B.sample_alpha=h);h=T.sample_enable;h!==B.sample_enable&&(h?ea.enable(32928):ea.disable(32928),B.sample_enable=h);h=Ea[0];k=Ea[1];if(h!==ja[0]||k!==ja[1])ea.sampleCoverage(h,k),ja[0]=h,ja[1]=k;h=T.stencil_enable;h!==B.stencil_enable&&(h?ea.enable(2960):ea.disable(2960),B.stencil_enable=h);h=T.stencil_mask;h!==B.stencil_mask&&(ea.stencilMask(h),B.stencil_mask=h);h=Ma[0];k=Ma[1];l=Ma[2];if(h!==ma[0]||k!==ma[1]||
l!==ma[2])ea.stencilFunc(h,k,l),ma[0]=h,ma[1]=k,ma[2]=l;h=v[0];k=v[1];l=v[2];r=v[3];if(h!==p[0]||k!==p[1]||l!==p[2]||r!==p[3])ea.stencilOpSeparate(h,k,l,r),p[0]=h,p[1]=k,p[2]=l,p[3]=r;h=cc[0];k=cc[1];l=cc[2];r=cc[3];if(h!==Ta[0]||k!==Ta[1]||l!==Ta[2]||r!==Ta[3])ea.stencilOpSeparate(h,k,l,r),Ta[0]=h,Ta[1]=k,Ta[2]=l,Ta[3]=r;h=T.scissor_enable;h!==B.scissor_enable&&(h?ea.enable(3089):ea.disable(3089),B.scissor_enable=h);h=oa[0];k=oa[1];l=oa[2];r=oa[3];if(h!==ya[0]||k!==ya[1]||l!==ya[2]||r!==ya[3])ea.scissor(h,
k,l,r),ya[0]=h,ya[1]=k,ya[2]=l,ya[3]=r;h=I[0];k=I[1];l=I[2];r=I[3];if(h!==ua[0]||k!==ua[1]||l!==ua[2]||r!==ua[3])ea.viewport(h,k,l,r),ua[0]=h,ua[1]=k,ua[2]=l,ua[3]=r;B.dirty=!1}if(h=B.profile)a=performance.now(),J.count++;ea.useProgram(g.program);O.setVAO(null);k=W.location;l=b[k];l.buffer||ea.enableVertexAttribArray(k);if(5126!==l.type||4!==l.size||l.buffer!==f||!1!==l.normalized||0!==l.offset||44!==l.stride)ea.bindBuffer(34962,f.buffer),ea.vertexAttribPointer(k,4,5126,!1,44,0),l.type=5126,l.size=
4,l.buffer=f,l.normalized=!1,l.offset=0,l.stride=44;k=E.location;l=b[k];l.buffer||ea.enableVertexAttribArray(k);if(5126!==l.type||4!==l.size||l.buffer!==q||!1!==l.normalized||16!==l.offset||44!==l.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(k,4,5126,!1,44,16),l.type=5126,l.size=4,l.buffer=q,l.normalized=!1,l.offset=16,l.stride=44;k=w.location;l=b[k];l.buffer||ea.enableVertexAttribArray(k);if(5126!==l.type||3!==l.size||l.buffer!==e||!1!==l.normalized||32!==l.offset||44!==l.stride)ea.bindBuffer(34962,
e.buffer),ea.vertexAttribPointer(k,3,5126,!1,44,32),l.type=5126,l.size=3,l.buffer=e,l.normalized=!1,l.offset=32,l.stride=44;k=x.call(this,xa,c,0);"number"!==typeof k&&X.commandRaise(C,F);ea.uniform1f(d.location,k);k=L.call(this,xa,c,0);R(k)&&16===k.length||X.commandRaise(K,F);ea.uniformMatrix4fv(P.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(va[0]=k[0],va[1]=k[1],va[2]=k[2],va[3]=k[3],va[4]=k[4],va[5]=k[5],va[6]=k[6],va[7]=k[7],va[8]=k[8],va[9]=k[9],va[10]=k[10],va[11]=k[11],va[12]=
k[12],va[13]=k[13],va[14]=k[14],va[15]=k[15],va));c=A.call(this,xa,c,0);R(c)&&16===c.length||X.commandRaise(m,F);ea.uniformMatrix4fv(D.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(ia[0]=c[0],ia[1]=c[1],ia[2]=c[2],ia[3]=c[3],ia[4]=c[4],ia[5]=c[5],ia[6]=c[6],ia[7]=c[7],ia[8]=c[8],ia[9]=c[9],ia[10]=c[10],ia[11]=c[11],ia[12]=c[12],ia[13]=c[13],ia[14]=c[14],ia[15]=c[15],ia));(c=qa.elements)?ea.bindBuffer(34963,c.buffer.buffer):O.currentVAO&&(c=V.getElements(O.currentVAO.elements))&&ea.bindBuffer(34963,
c.buffer.buffer);k=qa.offset;c?ea.drawElements(0,1E4,c.type,k<<(c.type-5121>>1)):ea.drawArrays(0,k,1E4);O.setVAO(null);h&&(J.cpuTime+=performance.now()-a)},scope:function(b,d,c){var h,a,k,n,p,v,g,r,I,ma,w,D,G,E,S,m,fa,ha,A,cc,x,Ma,F,C,M,O,ba,P,N,ua,L,R,T,K,pa,Ba,X,ja,ga,aa,Y,W,wa,Ta,ea;if(h=B.profile)a=performance.now(),J.count++;k=qa.count;qa.count=1E4;n=qa.primitive;qa.primitive=0;p=t.call(this,xa,b,c);v=l[5];l[5]=p;g=da.call(this,xa,b,c);p=l[3];l[3]=g;r=y.call(this,xa,b,c);g=l[4];l[4]=r;r=U.buffer;
U.buffer=e;I=U.divisor;U.divisor=0;ma=U.normalized;U.normalized=!1;w=U.offset;U.offset=32;D=U.size;U.size=0;G=U.state;U.state=1;E=U.stride;U.stride=44;S=U.type;U.type=5126;m=U.w;U.w=0;fa=U.x;U.x=0;ha=U.y;U.y=0;A=U.z;U.z=0;cc=u.buffer;u.buffer=f;x=u.divisor;u.divisor=0;Ma=u.normalized;u.normalized=!1;F=u.offset;u.offset=0;C=u.size;u.size=0;M=u.state;u.state=1;O=u.stride;u.stride=44;ba=u.type;u.type=5126;P=u.w;u.w=0;N=u.x;u.x=0;ua=u.y;u.y=0;L=u.z;u.z=0;R=Q.buffer;Q.buffer=q;T=Q.divisor;Q.divisor=0;
K=Q.normalized;Q.normalized=!1;pa=Q.offset;Q.offset=16;Ba=Q.size;Q.size=0;X=Q.state;Q.state=1;ja=Q.stride;Q.stride=44;ga=Q.type;Q.type=5126;aa=Q.w;Q.w=0;Y=Q.x;Q.x=0;W=Q.y;Q.y=0;wa=Q.z;Q.z=0;Ta=z.vert;z.vert=2;ea=z.frag;z.frag=1;d(xa,b,c);h&&(J.cpuTime+=performance.now()-a);qa.count=k;qa.primitive=n;l[5]=v;l[3]=p;l[4]=g;U.buffer=r;U.divisor=I;U.normalized=ma;U.offset=w;U.size=D;U.state=G;U.stride=E;U.type=S;U.w=m;U.x=fa;U.y=ha;U.z=A;u.buffer=cc;u.divisor=x;u.normalized=Ma;u.offset=F;u.size=C;u.state=
M;u.stride=O;u.type=ba;u.w=P;u.x=N;u.y=ua;u.z=L;Q.buffer=R;Q.divisor=T;Q.normalized=K;Q.offset=pa;Q.size=Ba;Q.state=X;Q.stride=ja;Q.type=ga;Q.w=aa;Q.x=Y;Q.y=W;Q.z=wa;z.vert=Ta;z.frag=ea},batch:function(a,l){var g,y,u;g=Y.next;g!==Y.cur&&(g?ea.bindFramebuffer(36160,g.framebuffer):ea.bindFramebuffer(36160,null),Y.cur=g);if(B.dirty){var z,m,A;g=T.dither;g!==B.dither&&(g?ea.enable(3024):ea.disable(3024),B.dither=g);g=T.blend_enable;g!==B.blend_enable&&(g?ea.enable(3042):ea.disable(3042),B.blend_enable=
g);g=N[0];z=N[1];m=N[2];A=N[3];if(g!==wa[0]||z!==wa[1]||m!==wa[2]||A!==wa[3])ea.blendColor(g,z,m,A),wa[0]=g,wa[1]=z,wa[2]=m,wa[3]=A;g=na[0];z=na[1];if(g!==n[0]||z!==n[1])ea.blendEquationSeparate(g,z),n[0]=g,n[1]=z;g=G[0];z=G[1];m=G[2];A=G[3];if(g!==ba[0]||z!==ba[1]||m!==ba[2]||A!==ba[3])ea.blendFuncSeparate(g,z,m,A),ba[0]=g,ba[1]=z,ba[2]=m,ba[3]=A;g=T.depth_enable;g!==B.depth_enable&&(g?ea.enable(2929):ea.disable(2929),B.depth_enable=g);g=T.depth_func;g!==B.depth_func&&(ea.depthFunc(g),B.depth_func=
g);g=pa[0];z=pa[1];if(g!==Ca[0]||z!==Ca[1])ea.depthRange(g,z),Ca[0]=g,Ca[1]=z;g=T.depth_mask;g!==B.depth_mask&&(ea.depthMask(g),B.depth_mask=g);g=S[0];z=S[1];m=S[2];A=S[3];if(g!==la[0]||z!==la[1]||m!==la[2]||A!==la[3])ea.colorMask(g,z,m,A),la[0]=g,la[1]=z,la[2]=m,la[3]=A;g=T.cull_enable;g!==B.cull_enable&&(g?ea.enable(2884):ea.disable(2884),B.cull_enable=g);g=T.cull_face;g!==B.cull_face&&(ea.cullFace(g),B.cull_face=g);g=T.frontFace;g!==B.frontFace&&(ea.frontFace(g),B.frontFace=g);g=T.lineWidth;g!==
B.lineWidth&&(ea.lineWidth(g),B.lineWidth=g);g=T.polygonOffset_enable;g!==B.polygonOffset_enable&&(g?ea.enable(32823):ea.disable(32823),B.polygonOffset_enable=g);g=Ba[0];z=Ba[1];if(g!==fa[0]||z!==fa[1])ea.polygonOffset(g,z),fa[0]=g,fa[1]=z;g=T.sample_alpha;g!==B.sample_alpha&&(g?ea.enable(32926):ea.disable(32926),B.sample_alpha=g);g=T.sample_enable;g!==B.sample_enable&&(g?ea.enable(32928):ea.disable(32928),B.sample_enable=g);g=Ea[0];z=Ea[1];if(g!==ja[0]||z!==ja[1])ea.sampleCoverage(g,z),ja[0]=g,ja[1]=
z;g=T.stencil_enable;g!==B.stencil_enable&&(g?ea.enable(2960):ea.disable(2960),B.stencil_enable=g);g=T.stencil_mask;g!==B.stencil_mask&&(ea.stencilMask(g),B.stencil_mask=g);g=Ma[0];z=Ma[1];m=Ma[2];if(g!==ma[0]||z!==ma[1]||m!==ma[2])ea.stencilFunc(g,z,m),ma[0]=g,ma[1]=z,ma[2]=m;g=v[0];z=v[1];m=v[2];A=v[3];if(g!==p[0]||z!==p[1]||m!==p[2]||A!==p[3])ea.stencilOpSeparate(g,z,m,A),p[0]=g,p[1]=z,p[2]=m,p[3]=A;g=cc[0];z=cc[1];m=cc[2];A=cc[3];if(g!==Ta[0]||z!==Ta[1]||m!==Ta[2]||A!==Ta[3])ea.stencilOpSeparate(g,
z,m,A),Ta[0]=g,Ta[1]=z,Ta[2]=m,Ta[3]=A;g=T.scissor_enable;g!==B.scissor_enable&&(g?ea.enable(3089):ea.disable(3089),B.scissor_enable=g);g=oa[0];z=oa[1];m=oa[2];A=oa[3];if(g!==ya[0]||z!==ya[1]||m!==ya[2]||A!==ya[3])ea.scissor(g,z,m,A),ya[0]=g,ya[1]=z,ya[2]=m,ya[3]=A;g=I[0];z=I[1];m=I[2];A=I[3];if(g!==ua[0]||z!==ua[1]||m!==ua[2]||A!==ua[3])ea.viewport(g,z,m,A),ua[0]=g,ua[1]=z,ua[2]=m,ua[3]=A;B.dirty=!1}if(g=B.profile)y=performance.now(),J.count+=l;ea.useProgram(ga.program);O.setVAO(null);z=W.location;
m=b[z];m.buffer||ea.enableVertexAttribArray(z);if(5126!==m.type||4!==m.size||m.buffer!==f||!1!==m.normalized||0!==m.offset||44!==m.stride)ea.bindBuffer(34962,f.buffer),ea.vertexAttribPointer(z,4,5126,!1,44,0),m.type=5126,m.size=4,m.buffer=f,m.normalized=!1,m.offset=0,m.stride=44;z=E.location;m=b[z];m.buffer||ea.enableVertexAttribArray(z);if(5126!==m.type||4!==m.size||m.buffer!==q||!1!==m.normalized||16!==m.offset||44!==m.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(z,4,5126,!1,44,16),
m.type=5126,m.size=4,m.buffer=q,m.normalized=!1,m.offset=16,m.stride=44;z=w.location;m=b[z];m.buffer||ea.enableVertexAttribArray(z);if(5126!==m.type||3!==m.size||m.buffer!==e||!1!==m.normalized||32!==m.offset||44!==m.stride)ea.bindBuffer(34962,e.buffer),ea.vertexAttribPointer(z,3,5126,!1,44,32),m.type=5126,m.size=3,m.buffer=e,m.normalized=!1,m.offset=32,m.stride=44;z=c.call(this,xa,void 0,u);"number"!==typeof z&&X.commandRaise(h,F);ea.uniform1f(d.location,z);z=M.call(this,xa,void 0,u);R(z)&&16===
z.length||X.commandRaise(r,F);ea.uniformMatrix4fv(P.location,!1,Array.isArray(z)||z instanceof Float32Array?z:(Gb[0]=z[0],Gb[1]=z[1],Gb[2]=z[2],Gb[3]=z[3],Gb[4]=z[4],Gb[5]=z[5],Gb[6]=z[6],Gb[7]=z[7],Gb[8]=z[8],Gb[9]=z[9],Gb[10]=z[10],Gb[11]=z[11],Gb[12]=z[12],Gb[13]=z[13],Gb[14]=z[14],Gb[15]=z[15],Gb));u=aa.call(this,xa,void 0,u);R(u)&&16===u.length||X.commandRaise(k,F);ea.uniformMatrix4fv(D.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(ha[0]=u[0],ha[1]=u[1],ha[2]=u[2],ha[3]=u[3],ha[4]=
u[4],ha[5]=u[5],ha[6]=u[6],ha[7]=u[7],ha[8]=u[8],ha[9]=u[9],ha[10]=u[10],ha[11]=u[11],ha[12]=u[12],ha[13]=u[13],ha[14]=u[14],ha[15]=u[15],ha));(z=qa.elements)?ea.bindBuffer(34963,z.buffer.buffer):O.currentVAO&&(z=V.getElements(O.currentVAO.elements))&&ea.bindBuffer(34963,z.buffer.buffer);m=qa.offset;for(u=0;u<l;++u)z?ea.drawElements(0,1E4,z.type,m<<(z.type-5121>>1)):ea.drawArrays(0,m,1E4);O.setVAO(null);g&&(J.cpuTime+=performance.now()-y)}}},"$34,atlas,normal,position,projection,uv,view":function(a,
X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea,R){var T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,ia,Gb,ha,H,sa,Ga,ra,za,Da,ka,Z,ta,Ja,Fa;T=a.attributes;z=a.buffer;l=a.context;O=a.current;N=a.draw;wa=a.elements;na=a.framebuffer;n=a.gl;G=a.isArrayLike;ba=a.isBufferArgs;S=a.next;la=a.shader;pa=a.uniforms;Ca=a.vao;Ba=S.blend_color;fa=O.blend_color;Ea=S.blend_equation;ja=O.blend_equation;oa=S.blend_func;ya=O.blend_func;Ma=S.colorMask;
ma=O.colorMask;cc=S.depth_range;Ta=O.depth_range;v=S.polygonOffset_offset;p=O.polygonOffset_offset;I=S.sample_coverage;ua=O.sample_coverage;va=S.scissor_box;ia=O.scissor_box;Gb=S.stencil_func;ha=O.stencil_func;H=S.stencil_opBack;sa=O.stencil_opBack;Ga=S.stencil_opFront;ra=O.stencil_opFront;za=S.viewport;Da=O.viewport;ka={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};Z=new Float32Array(16);ta=new Float32Array(16);Ja=new Float32Array(16);Fa=new Float32Array(16);
return{draw:function(b){var d,c,h,a,k,r,w,y,D,u,E,M,P,N,Q,U,pa,ga,aa,W,da,la,xa,Fa,Ja,Aa,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb,ab,nb;d=l.view;c=g.call(this,l,b,0);l.view=c;h=na.next;h!==na.cur&&(h?n.bindFramebuffer(36160,h.framebuffer):n.bindFramebuffer(36160,null),na.cur=h);if(O.dirty){var Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,
zc,uc,bb;Va=S.dither;Va!==O.dither&&(Va?n.enable(3024):n.disable(3024),O.dither=Va);Tc=S.blend_enable;Tc!==O.blend_enable&&(Tc?n.enable(3042):n.disable(3042),O.blend_enable=Tc);Hb=Ba[0];Ib=Ba[1];qc=Ba[2];Nb=Ba[3];if(Hb!==fa[0]||Ib!==fa[1]||qc!==fa[2]||Nb!==fa[3])n.blendColor(Hb,Ib,qc,Nb),fa[0]=Hb,fa[1]=Ib,fa[2]=qc,fa[3]=Nb;jb=Ea[0];Fb=Ea[1];if(jb!==ja[0]||Fb!==ja[1])n.blendEquationSeparate(jb,Fb),ja[0]=jb,ja[1]=Fb;Cb=oa[0];vb=oa[1];hb=oa[2];Xb=oa[3];if(Cb!==ya[0]||vb!==ya[1]||hb!==ya[2]||Xb!==ya[3])n.blendFuncSeparate(Cb,
vb,hb,Xb),ya[0]=Cb,ya[1]=vb,ya[2]=hb,ya[3]=Xb;Ob=S.depth_enable;Ob!==O.depth_enable&&(Ob?n.enable(2929):n.disable(2929),O.depth_enable=Ob);pb=S.depth_func;pb!==O.depth_func&&(n.depthFunc(pb),O.depth_func=pb);Ua=cc[0];Tb=cc[1];if(Ua!==Ta[0]||Tb!==Ta[1])n.depthRange(Ua,Tb),Ta[0]=Ua,Ta[1]=Tb;yb=S.depth_mask;yb!==O.depth_mask&&(n.depthMask(yb),O.depth_mask=yb);ac=Ma[0];ib=Ma[1];ob=Ma[2];Ia=Ma[3];if(ac!==ma[0]||ib!==ma[1]||ob!==ma[2]||Ia!==ma[3])n.colorMask(ac,ib,ob,Ia),ma[0]=ac,ma[1]=ib,ma[2]=ob,ma[3]=
Ia;qb=S.frontFace;qb!==O.frontFace&&(n.frontFace(qb),O.frontFace=qb);Ka=S.lineWidth;Ka!==O.lineWidth&&(n.lineWidth(Ka),O.lineWidth=Ka);eb=S.polygonOffset_enable;eb!==O.polygonOffset_enable&&(eb?n.enable(32823):n.disable(32823),O.polygonOffset_enable=eb);fb=v[0];La=v[1];if(fb!==p[0]||La!==p[1])n.polygonOffset(fb,La),p[0]=fb,p[1]=La;kb=S.sample_alpha;kb!==O.sample_alpha&&(kb?n.enable(32926):n.disable(32926),O.sample_alpha=kb);Wa=S.sample_enable;Wa!==O.sample_enable&&(Wa?n.enable(32928):n.disable(32928),
O.sample_enable=Wa);sb=I[0];rb=I[1];if(sb!==ua[0]||rb!==ua[1])n.sampleCoverage(sb,rb),ua[0]=sb,ua[1]=rb;Pa=S.stencil_enable;Pa!==O.stencil_enable&&(Pa?n.enable(2960):n.disable(2960),O.stencil_enable=Pa);Bc=S.stencil_mask;Bc!==O.stencil_mask&&(n.stencilMask(Bc),O.stencil_mask=Bc);Ra=Gb[0];Jb=Gb[1];Db=Gb[2];if(Ra!==ha[0]||Jb!==ha[1]||Db!==ha[2])n.stencilFunc(Ra,Jb,Db),ha[0]=Ra,ha[1]=Jb,ha[2]=Db;Na=Ga[0];Jd=Ga[1];Ya=Ga[2];Kb=Ga[3];if(Na!==ra[0]||Jd!==ra[1]||Ya!==ra[2]||Kb!==ra[3])n.stencilOpSeparate(Na,
Jd,Ya,Kb),ra[0]=Na,ra[1]=Jd,ra[2]=Ya,ra[3]=Kb;Lb=H[0];lb=H[1];Oa=H[2];Yb=H[3];if(Lb!==sa[0]||lb!==sa[1]||Oa!==sa[2]||Yb!==sa[3])n.stencilOpSeparate(Lb,lb,Oa,Yb),sa[0]=Lb,sa[1]=lb,sa[2]=Oa,sa[3]=Yb;Qa=S.scissor_enable;Qa!==O.scissor_enable&&(Qa?n.enable(3089):n.disable(3089),O.scissor_enable=Qa);tb=va[0];ub=va[1];Sa=va[2];mb=va[3];if(tb!==ia[0]||ub!==ia[1]||Sa!==ia[2]||mb!==ia[3])n.scissor(tb,ub,Sa,mb),ia[0]=tb,ia[1]=ub,ia[2]=Sa,ia[3]=mb;gc=za[0];zc=za[1];uc=za[2];bb=za[3];if(gc!==Da[0]||zc!==Da[1]||
uc!==Da[2]||bb!==Da[3])n.viewport(gc,zc,uc,bb),Da[0]=gc,Da[1]=zc,Da[2]=uc,Da[3]=bb}n.enable(2884);O.cull_enable=!0;n.cullFace(1029);O.cull_face=1029;if(a=O.profile)k=performance.now(),J.count++;n.useProgram(f.program);Ca.setVAO(null);(r=b.position)&&("object"===typeof r||"function"===typeof r)&&(ba(r)||z.getBuffer(r)||z.getBuffer(r.buffer)||ba(r.buffer)||"constant"in r&&("number"===typeof r.constant||G(r.constant)))||X.commandRaise(q,F);w=!1;y=null;D=!1;E=u=0;M=1;P=0;N=5126;ga=pa=U=Q=0;ba(r)?(w=!0,
y=z.createStream(34962,r),N=y.dtype):(y=z.getBuffer(r))?N=y.dtype:"constant"in r?(M=2,"number"===typeof r.constant?(U=r.constant,pa=ga=Q=0):(U=0<r.constant.length?r.constant[0]:0,pa=1<r.constant.length?r.constant[1]:0,ga=2<r.constant.length?r.constant[2]:0,Q=3<r.constant.length?r.constant[3]:0)):(y=ba(r.buffer)?z.createStream(34962,r.buffer):z.getBuffer(r.buffer),N="type"in r?ka[r.type]:y.dtype,D=!!r.normalized,E=r.size|0,u=r.offset|0,P=r.stride|0);aa=V.location;W=T[aa];if(1===M){if(W.buffer||n.enableVertexAttribArray(aa),
da=E||3,W.type!==N||W.size!==da||W.buffer!==y||W.normalized!==D||W.offset!==u||W.stride!==P)n.bindBuffer(34962,y.buffer),n.vertexAttribPointer(aa,da,N,D,P,u),W.type=N,W.size=da,W.buffer=y,W.normalized=D,W.offset=u,W.stride=P}else if(W.buffer&&(n.disableVertexAttribArray(aa),W.buffer=null),W.x!==U||W.y!==pa||W.z!==ga||W.w!==Q)n.vertexAttrib4f(aa,U,pa,ga,Q),W.x=U,W.y=pa,W.z=ga,W.w=Q;(la=b.normal)&&("object"===typeof la||"function"===typeof la)&&(ba(la)||z.getBuffer(la)||z.getBuffer(la.buffer)||ba(la.buffer)||
"constant"in la&&("number"===typeof la.constant||G(la.constant)))||X.commandRaise(e,F);xa=!1;Fa=null;Ja=!1;Wd=Aa=0;Ld=1;md=0;$c=5126;Ec=pd=Kc=sd=0;ba(la)?(xa=!0,Fa=z.createStream(34962,la),$c=Fa.dtype):(Fa=z.getBuffer(la))?$c=Fa.dtype:"constant"in la?(Ld=2,"number"===typeof la.constant?(Kc=la.constant,pd=Ec=sd=0):(Kc=0<la.constant.length?la.constant[0]:0,pd=1<la.constant.length?la.constant[1]:0,Ec=2<la.constant.length?la.constant[2]:0,sd=3<la.constant.length?la.constant[3]:0)):(Fa=ba(la.buffer)?z.createStream(34962,
la.buffer):z.getBuffer(la.buffer),$c="type"in la?ka[la.type]:Fa.dtype,Ja=!!la.normalized,Wd=la.size|0,Aa=la.offset|0,md=la.stride|0);ed=qa.location;Oc=T[ed];if(1===Ld){if(Oc.buffer||n.enableVertexAttribArray(ed),ld=Wd||3,Oc.type!==$c||Oc.size!==ld||Oc.buffer!==Fa||Oc.normalized!==Ja||Oc.offset!==Aa||Oc.stride!==md)n.bindBuffer(34962,Fa.buffer),n.vertexAttribPointer(ed,ld,$c,Ja,md,Aa),Oc.type=$c,Oc.size=ld,Oc.buffer=Fa,Oc.normalized=Ja,Oc.offset=Aa,Oc.stride=md}else if(Oc.buffer&&(n.disableVertexAttribArray(ed),
Oc.buffer=null),Oc.x!==Kc||Oc.y!==pd||Oc.z!==Ec||Oc.w!==sd)n.vertexAttrib4f(ed,Kc,pd,Ec,sd),Oc.x=Kc,Oc.y=pd,Oc.z=Ec,Oc.w=sd;(Ab=b.uv)&&("object"===typeof Ab||"function"===typeof Ab)&&(ba(Ab)||z.getBuffer(Ab)||z.getBuffer(Ab.buffer)||ba(Ab.buffer)||"constant"in Ab&&("number"===typeof Ab.constant||G(Ab.constant)))||X.commandRaise(x,F);Eb=!1;tc=null;wb=!1;Bb=wc=0;Ic=1;lc=0;Fc=5126;ec=Cc=Vc=Wc=0;ba(Ab)?(Eb=!0,tc=z.createStream(34962,Ab),Fc=tc.dtype):(tc=z.getBuffer(Ab))?Fc=tc.dtype:"constant"in Ab?(Ic=
2,"number"===typeof Ab.constant?(Vc=Ab.constant,Cc=ec=Wc=0):(Vc=0<Ab.constant.length?Ab.constant[0]:0,Cc=1<Ab.constant.length?Ab.constant[1]:0,ec=2<Ab.constant.length?Ab.constant[2]:0,Wc=3<Ab.constant.length?Ab.constant[3]:0)):(tc=ba(Ab.buffer)?z.createStream(34962,Ab.buffer):z.getBuffer(Ab.buffer),Fc="type"in Ab?ka[Ab.type]:tc.dtype,wb=!!Ab.normalized,Bb=Ab.size|0,wc=Ab.offset|0,lc=Ab.stride|0);Gc=ea.location;oc=T[Gc];if(1===Ic){if(oc.buffer||n.enableVertexAttribArray(Gc),pc=Bb||2,oc.type!==Fc||
oc.size!==pc||oc.buffer!==tc||oc.normalized!==wb||oc.offset!==wc||oc.stride!==lc)n.bindBuffer(34962,tc.buffer),n.vertexAttribPointer(Gc,pc,Fc,wb,lc,wc),oc.type=Fc,oc.size=pc,oc.buffer=tc,oc.normalized=wb,oc.offset=wc,oc.stride=lc}else if(oc.buffer&&(n.disableVertexAttribArray(Gc),oc.buffer=null),oc.x!==Vc||oc.y!==Cc||oc.z!==ec||oc.w!==Wc)n.vertexAttrib4f(Gc,Vc,Cc,ec,Wc),oc.x=Vc,oc.y=Cc,oc.z=ec,oc.w=Wc;mc=C.call(this,l,b,0);G(mc)&&16===mc.length||X.commandRaise(L,F);n.uniformMatrix4fv(Y.location,!1,
Array.isArray(mc)||mc instanceof Float32Array?mc:(Z[0]=mc[0],Z[1]=mc[1],Z[2]=mc[2],Z[3]=mc[3],Z[4]=mc[4],Z[5]=mc[5],Z[6]=mc[6],Z[7]=mc[7],Z[8]=mc[8],Z[9]=mc[9],Z[10]=mc[10],Z[11]=mc[11],Z[12]=mc[12],Z[13]=mc[13],Z[14]=mc[14],Z[15]=mc[15],Z));fc=l.view;G(fc)&&16===fc.length||X.commandRaise(K,F);n.uniformMatrix4fv(R.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(ta[0]=fc[0],ta[1]=fc[1],ta[2]=fc[2],ta[3]=fc[3],ta[4]=fc[4],ta[5]=fc[5],ta[6]=fc[6],ta[7]=fc[7],ta[8]=fc[8],ta[9]=fc[9],ta[10]=
fc[10],ta[11]=fc[11],ta[12]=fc[12],ta[13]=fc[13],ta[14]=fc[14],ta[15]=fc[15],ta));($a=b.atlas)&&"framebuffer"===$a._reglType&&($a=$a.color[0]);"function"===typeof $a&&"texture2d"===$a._reglType||X.commandRaise(A,F);Hc=$a._texture;n.uniform1i(B.location,Hc.bind());xb=b.elements;cb=null;(Mb=ba(xb))?cb=wa.createStream(xb):(cb=wa.getElements(xb),xb&&!cb&&X.commandRaise(m,F));cb&&n.bindBuffer(34963,cb.buffer.buffer);ab=cb?cb.primType:4;nb=cb?cb.vertCount:-1;0<=nb||X.commandRaise(t,F);nb&&(cb?n.drawElements(ab,
nb,cb.type,0<<(cb.type-5121>>1)):n.drawArrays(ab,0,nb),O.dirty=!0,Ca.setVAO(null),l.view=d,a&&(J.cpuTime+=performance.now()-k),w&&z.destroyStream(y),xa&&z.destroyStream(Fa),Eb&&z.destroyStream(tc),Hc.unbind(),Mb&&wa.destroyStream(cb))},scope:function(b,d,f){var e,a,k,n,g,p,q,v,r,H,I,ma,B,w,m,D,E,A,fa,ha,cc,x,Ma,C,t,sa,P,Ga,ua,L,R,T,ra,K,Z,Ba,W,aa,ja,Y,Ta,ea,za,oa,ya,Ea,xa,va,qa,Da,na,Ca,Gb,V,ia,ta,Fa,Ja,hd,dd,Va,Aa,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,
Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb;e=l.view;a=da.call(this,l,b,f);l.view=a;k=S.cull_enable;S.cull_enable=!0;n=S.cull_face;S.cull_face=1029;if(g=O.profile)p=performance.now(),J.count++;q=b.elements;v=null;(r=ba(q))?v=wa.createStream(q):(v=wa.getElements(q),q&&!v&&X.commandRaise(y,F));H=N.elements;N.elements=v;I=N.offset;N.offset=0;ma=v?v.vertCount:-1;B=N.count;N.count=ma;w=v?v.primType:4;m=N.primitive;N.primitive=w;D=b.atlas;E=pa[5];pa[5]=D;A=U.call(this,l,b,f);fa=pa[3];pa[3]=A;ha=l.view;cc=pa[4];pa[4]=
ha;(x=b.normal)&&("object"===typeof x||"function"===typeof x)&&(ba(x)||z.getBuffer(x)||z.getBuffer(x.buffer)||ba(x.buffer)||"constant"in x&&("number"===typeof x.constant||G(x.constant)))||X.commandRaise(u,F);Ma=!1;C=null;t=0;sa=!1;Ga=P=0;ua=1;L=0;R=5126;Z=K=ra=T=0;ba(x)?(Ma=!0,C=z.createStream(34962,x),R=C.dtype):(C=z.getBuffer(x))?R=C.dtype:"constant"in x?(ua=2,"number"===typeof x.constant?(ra=x.constant,K=Z=T=0):(ra=0<x.constant.length?x.constant[0]:0,K=1<x.constant.length?x.constant[1]:0,Z=2<x.constant.length?
x.constant[2]:0,T=3<x.constant.length?x.constant[3]:0)):(C=ba(x.buffer)?z.createStream(34962,x.buffer):z.getBuffer(x.buffer),R="type"in x?ka[x.type]:C.dtype,sa=!!x.normalized,Ga=x.size|0,P=x.offset|0,L=x.stride|0,t=x.divisor|0);Ba=Q.buffer;Q.buffer=C;W=Q.divisor;Q.divisor=t;aa=Q.normalized;Q.normalized=sa;ja=Q.offset;Q.offset=P;Y=Q.size;Q.size=Ga;Ta=Q.state;Q.state=ua;ea=Q.stride;Q.stride=L;za=Q.type;Q.type=R;oa=Q.w;Q.w=T;ya=Q.x;Q.x=ra;Ea=Q.y;Q.y=K;xa=Q.z;Q.z=Z;(va=b.position)&&("object"===typeof va||
"function"===typeof va)&&(ba(va)||z.getBuffer(va)||z.getBuffer(va.buffer)||ba(va.buffer)||"constant"in va&&("number"===typeof va.constant||G(va.constant)))||X.commandRaise(ga,F);qa=!1;Da=null;na=0;Ca=!1;V=Gb=0;ia=1;ta=0;Fa=5126;Va=dd=hd=Ja=0;ba(va)?(qa=!0,Da=z.createStream(34962,va),Fa=Da.dtype):(Da=z.getBuffer(va))?Fa=Da.dtype:"constant"in va?(ia=2,"number"===typeof va.constant?(hd=va.constant,dd=Va=Ja=0):(hd=0<va.constant.length?va.constant[0]:0,dd=1<va.constant.length?va.constant[1]:0,Va=2<va.constant.length?
va.constant[2]:0,Ja=3<va.constant.length?va.constant[3]:0)):(Da=ba(va.buffer)?z.createStream(34962,va.buffer):z.getBuffer(va.buffer),Fa="type"in va?ka[va.type]:Da.dtype,Ca=!!va.normalized,V=va.size|0,Gb=va.offset|0,ta=va.stride|0,na=va.divisor|0);Aa=c.buffer;c.buffer=Da;Hb=c.divisor;c.divisor=na;Ib=c.normalized;c.normalized=Ca;qc=c.offset;c.offset=Gb;Nb=c.size;c.size=V;jb=c.state;c.state=ia;Fb=c.stride;c.stride=ta;Cb=c.type;c.type=Fa;vb=c.w;c.w=Ja;hb=c.x;c.x=hd;Xb=c.y;c.y=dd;Ob=c.z;c.z=Va;(pb=b.uv)&&
("object"===typeof pb||"function"===typeof pb)&&(ba(pb)||z.getBuffer(pb)||z.getBuffer(pb.buffer)||ba(pb.buffer)||"constant"in pb&&("number"===typeof pb.constant||G(pb.constant)))||X.commandRaise(h,F);Ua=!1;Tb=null;yb=0;ac=!1;ob=ib=0;Ia=1;qb=0;Ka=5126;kb=La=fb=eb=0;ba(pb)?(Ua=!0,Tb=z.createStream(34962,pb),Ka=Tb.dtype):(Tb=z.getBuffer(pb))?Ka=Tb.dtype:"constant"in pb?(Ia=2,"number"===typeof pb.constant?(fb=pb.constant,La=kb=eb=0):(fb=0<pb.constant.length?pb.constant[0]:0,La=1<pb.constant.length?pb.constant[1]:
0,kb=2<pb.constant.length?pb.constant[2]:0,eb=3<pb.constant.length?pb.constant[3]:0)):(Tb=ba(pb.buffer)?z.createStream(34962,pb.buffer):z.getBuffer(pb.buffer),Ka="type"in pb?ka[pb.type]:Tb.dtype,ac=!!pb.normalized,ob=pb.size|0,ib=pb.offset|0,qb=pb.stride|0,yb=pb.divisor|0);Wa=M.buffer;M.buffer=Tb;sb=M.divisor;M.divisor=yb;rb=M.normalized;M.normalized=ac;Pa=M.offset;M.offset=ib;Bc=M.size;M.size=ob;Ra=M.state;M.state=Ia;Jb=M.stride;M.stride=qb;Db=M.type;M.type=Ka;Na=M.w;M.w=eb;Jd=M.x;M.x=fb;Ya=M.y;
M.y=La;Kb=M.z;M.z=kb;Lb=la.vert;la.vert=2;lb=la.frag;la.frag=1;O.dirty=!0;d(l,b,f);l.view=e;S.cull_enable=k;S.cull_face=n;g&&(J.cpuTime+=performance.now()-p);r&&wa.destroyStream(v);N.elements=H;N.offset=I;N.count=B;N.primitive=m;pa[5]=E;pa[3]=fa;pa[4]=cc;Ma&&z.destroyStream(C);Q.buffer=Ba;Q.divisor=W;Q.normalized=aa;Q.offset=ja;Q.size=Y;Q.state=Ta;Q.stride=ea;Q.type=za;Q.w=oa;Q.x=ya;Q.y=Ea;Q.z=xa;qa&&z.destroyStream(Da);c.buffer=Aa;c.divisor=Hb;c.normalized=Ib;c.offset=qc;c.size=Nb;c.state=jb;c.stride=
Fb;c.type=Cb;c.w=vb;c.x=hb;c.y=Xb;c.z=Ob;Ua&&z.destroyStream(Tb);M.buffer=Wa;M.divisor=sb;M.normalized=rb;M.offset=Pa;M.size=Bc;M.state=Ra;M.stride=Jb;M.type=Db;M.w=Na;M.x=Jd;M.y=Ya;M.z=Kb;la.vert=Lb;la.frag=lb;O.dirty=!0},batch:function(c,f){var h,e,a,g,q,y,m;h=l.view;e=r.call(this,l,c,0);l.view=e;a=na.next;a!==na.cur&&(a?n.bindFramebuffer(36160,a.framebuffer):n.bindFramebuffer(36160,null),na.cur=a);if(O.dirty){var u,A,x,C,M,t,N,L,Q,K,U,Z,pa,ga,da,la,ta,Aa,Wd,Ld,md,$c,sd,Kc,pd,Ec,ed,Oc,ld,Ab,Eb,
tc,wb,wc,Bb,Ic,lc,Fc,Wc,Vc,Cc,ec,Gc,oc,pc,mc,fc,$a,Hc,xb,cb,Mb;u=S.dither;u!==O.dither&&(u?n.enable(3024):n.disable(3024),O.dither=u);A=S.blend_enable;A!==O.blend_enable&&(A?n.enable(3042):n.disable(3042),O.blend_enable=A);x=Ba[0];C=Ba[1];M=Ba[2];t=Ba[3];if(x!==fa[0]||C!==fa[1]||M!==fa[2]||t!==fa[3])n.blendColor(x,C,M,t),fa[0]=x,fa[1]=C,fa[2]=M,fa[3]=t;N=Ea[0];L=Ea[1];if(N!==ja[0]||L!==ja[1])n.blendEquationSeparate(N,L),ja[0]=N,ja[1]=L;Q=oa[0];K=oa[1];U=oa[2];Z=oa[3];if(Q!==ya[0]||K!==ya[1]||U!==
ya[2]||Z!==ya[3])n.blendFuncSeparate(Q,K,U,Z),ya[0]=Q,ya[1]=K,ya[2]=U,ya[3]=Z;pa=S.depth_enable;pa!==O.depth_enable&&(pa?n.enable(2929):n.disable(2929),O.depth_enable=pa);ga=S.depth_func;ga!==O.depth_func&&(n.depthFunc(ga),O.depth_func=ga);da=cc[0];la=cc[1];if(da!==Ta[0]||la!==Ta[1])n.depthRange(da,la),Ta[0]=da,Ta[1]=la;ta=S.depth_mask;ta!==O.depth_mask&&(n.depthMask(ta),O.depth_mask=ta);Aa=Ma[0];Wd=Ma[1];Ld=Ma[2];md=Ma[3];if(Aa!==ma[0]||Wd!==ma[1]||Ld!==ma[2]||md!==ma[3])n.colorMask(Aa,Wd,Ld,md),
ma[0]=Aa,ma[1]=Wd,ma[2]=Ld,ma[3]=md;$c=S.frontFace;$c!==O.frontFace&&(n.frontFace($c),O.frontFace=$c);sd=S.lineWidth;sd!==O.lineWidth&&(n.lineWidth(sd),O.lineWidth=sd);Kc=S.polygonOffset_enable;Kc!==O.polygonOffset_enable&&(Kc?n.enable(32823):n.disable(32823),O.polygonOffset_enable=Kc);pd=v[0];Ec=v[1];if(pd!==p[0]||Ec!==p[1])n.polygonOffset(pd,Ec),p[0]=pd,p[1]=Ec;ed=S.sample_alpha;ed!==O.sample_alpha&&(ed?n.enable(32926):n.disable(32926),O.sample_alpha=ed);Oc=S.sample_enable;Oc!==O.sample_enable&&
(Oc?n.enable(32928):n.disable(32928),O.sample_enable=Oc);ld=I[0];Ab=I[1];if(ld!==ua[0]||Ab!==ua[1])n.sampleCoverage(ld,Ab),ua[0]=ld,ua[1]=Ab;Eb=S.stencil_enable;Eb!==O.stencil_enable&&(Eb?n.enable(2960):n.disable(2960),O.stencil_enable=Eb);tc=S.stencil_mask;tc!==O.stencil_mask&&(n.stencilMask(tc),O.stencil_mask=tc);wb=Gb[0];wc=Gb[1];Bb=Gb[2];if(wb!==ha[0]||wc!==ha[1]||Bb!==ha[2])n.stencilFunc(wb,wc,Bb),ha[0]=wb,ha[1]=wc,ha[2]=Bb;Ic=Ga[0];lc=Ga[1];Fc=Ga[2];Wc=Ga[3];if(Ic!==ra[0]||lc!==ra[1]||Fc!==
ra[2]||Wc!==ra[3])n.stencilOpSeparate(Ic,lc,Fc,Wc),ra[0]=Ic,ra[1]=lc,ra[2]=Fc,ra[3]=Wc;Vc=H[0];Cc=H[1];ec=H[2];Gc=H[3];if(Vc!==sa[0]||Cc!==sa[1]||ec!==sa[2]||Gc!==sa[3])n.stencilOpSeparate(Vc,Cc,ec,Gc),sa[0]=Vc,sa[1]=Cc,sa[2]=ec,sa[3]=Gc;oc=S.scissor_enable;oc!==O.scissor_enable&&(oc?n.enable(3089):n.disable(3089),O.scissor_enable=oc);pc=va[0];mc=va[1];fc=va[2];$a=va[3];if(pc!==ia[0]||mc!==ia[1]||fc!==ia[2]||$a!==ia[3])n.scissor(pc,mc,fc,$a),ia[0]=pc,ia[1]=mc,ia[2]=fc,ia[3]=$a;Hc=za[0];xb=za[1];cb=
za[2];Mb=za[3];if(Hc!==Da[0]||xb!==Da[1]||cb!==Da[2]||Mb!==Da[3])n.viewport(Hc,xb,cb,Mb),Da[0]=Hc,Da[1]=xb,Da[2]=cb,Da[3]=Mb}n.enable(2884);O.cull_enable=!0;n.cullFace(1029);O.cull_face=1029;if(g=O.profile)q=performance.now(),J.count+=f;n.useProgram(aa.program);var ab,nb;Ca.setVAO(null);ab=E.call(this,l,m,y);G(ab)&&16===ab.length||X.commandRaise(D,F);n.uniformMatrix4fv(Y.location,!1,Array.isArray(ab)||ab instanceof Float32Array?ab:(Ja[0]=ab[0],Ja[1]=ab[1],Ja[2]=ab[2],Ja[3]=ab[3],Ja[4]=ab[4],Ja[5]=
ab[5],Ja[6]=ab[6],Ja[7]=ab[7],Ja[8]=ab[8],Ja[9]=ab[9],Ja[10]=ab[10],Ja[11]=ab[11],Ja[12]=ab[12],Ja[13]=ab[13],Ja[14]=ab[14],Ja[15]=ab[15],Ja));nb=l.view;G(nb)&&16===nb.length||X.commandRaise(d,F);n.uniformMatrix4fv(R.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(Fa[0]=nb[0],Fa[1]=nb[1],Fa[2]=nb[2],Fa[3]=nb[3],Fa[4]=nb[4],Fa[5]=nb[5],Fa[6]=nb[6],Fa[7]=nb[7],Fa[8]=nb[8],Fa[9]=nb[9],Fa[10]=nb[10],Fa[11]=nb[11],Fa[12]=nb[12],Fa[13]=nb[13],Fa[14]=nb[14],Fa[15]=nb[15],Fa));for(y=0;y<f;++y){m=
c[y];var Va,Tc,Hb,Ib,qc,Nb,jb,Fb,Cb,vb,hb,Xb,Ob,pb,Ua,Tb,yb,ac,ib,ob,Ia,qb,Ka,eb,fb,La,kb,Wa,sb,rb,Pa,Bc,Ra,Jb,Db,Na,Jd,Ya,Kb,Lb,lb,Oa,Yb,Qa,tb,ub,Sa,mb,gc,zc,uc,bb,jc,nd,Xa;(Va=m.position)&&("object"===typeof Va||"function"===typeof Va)&&(ba(Va)||z.getBuffer(Va)||z.getBuffer(Va.buffer)||ba(Va.buffer)||"constant"in Va&&("number"===typeof Va.constant||G(Va.constant)))||X.commandRaise(k,F);Tc=!1;Hb=null;Ib=!1;Nb=qc=0;jb=1;Fb=0;Cb=5126;Ob=Xb=hb=vb=0;ba(Va)?(Tc=!0,Hb=z.createStream(34962,Va),Cb=Hb.dtype):
(Hb=z.getBuffer(Va))?Cb=Hb.dtype:"constant"in Va?(jb=2,"number"===typeof Va.constant?(hb=Va.constant,Xb=Ob=vb=0):(hb=0<Va.constant.length?Va.constant[0]:0,Xb=1<Va.constant.length?Va.constant[1]:0,Ob=2<Va.constant.length?Va.constant[2]:0,vb=3<Va.constant.length?Va.constant[3]:0)):(Hb=ba(Va.buffer)?z.createStream(34962,Va.buffer):z.getBuffer(Va.buffer),Cb="type"in Va?ka[Va.type]:Hb.dtype,Ib=!!Va.normalized,Nb=Va.size|0,qc=Va.offset|0,Fb=Va.stride|0);pb=V.location;Ua=T[pb];if(1===jb){if(Ua.buffer||n.enableVertexAttribArray(pb),
Tb=Nb||3,Ua.type!==Cb||Ua.size!==Tb||Ua.buffer!==Hb||Ua.normalized!==Ib||Ua.offset!==qc||Ua.stride!==Fb)n.bindBuffer(34962,Hb.buffer),n.vertexAttribPointer(pb,Tb,Cb,Ib,Fb,qc),Ua.type=Cb,Ua.size=Tb,Ua.buffer=Hb,Ua.normalized=Ib,Ua.offset=qc,Ua.stride=Fb}else if(Ua.buffer&&(n.disableVertexAttribArray(pb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Xb||Ua.z!==Ob||Ua.w!==vb)n.vertexAttrib4f(pb,hb,Xb,Ob,vb),Ua.x=hb,Ua.y=Xb,Ua.z=Ob,Ua.w=vb;(yb=m.normal)&&("object"===typeof yb||"function"===typeof yb)&&(ba(yb)||z.getBuffer(yb)||
z.getBuffer(yb.buffer)||ba(yb.buffer)||"constant"in yb&&("number"===typeof yb.constant||G(yb.constant)))||X.commandRaise(w,F);ac=!1;ib=null;ob=!1;qb=Ia=0;Ka=1;eb=0;fb=5126;sb=Wa=kb=La=0;ba(yb)?(ac=!0,ib=z.createStream(34962,yb),fb=ib.dtype):(ib=z.getBuffer(yb))?fb=ib.dtype:"constant"in yb?(Ka=2,"number"===typeof yb.constant?(kb=yb.constant,Wa=sb=La=0):(kb=0<yb.constant.length?yb.constant[0]:0,Wa=1<yb.constant.length?yb.constant[1]:0,sb=2<yb.constant.length?yb.constant[2]:0,La=3<yb.constant.length?
yb.constant[3]:0)):(ib=ba(yb.buffer)?z.createStream(34962,yb.buffer):z.getBuffer(yb.buffer),fb="type"in yb?ka[yb.type]:ib.dtype,ob=!!yb.normalized,qb=yb.size|0,Ia=yb.offset|0,eb=yb.stride|0);rb=qa.location;Pa=T[rb];if(1===Ka){if(Pa.buffer||n.enableVertexAttribArray(rb),Bc=qb||3,Pa.type!==fb||Pa.size!==Bc||Pa.buffer!==ib||Pa.normalized!==ob||Pa.offset!==Ia||Pa.stride!==eb)n.bindBuffer(34962,ib.buffer),n.vertexAttribPointer(rb,Bc,fb,ob,eb,Ia),Pa.type=fb,Pa.size=Bc,Pa.buffer=ib,Pa.normalized=ob,Pa.offset=
Ia,Pa.stride=eb}else if(Pa.buffer&&(n.disableVertexAttribArray(rb),Pa.buffer=null),Pa.x!==kb||Pa.y!==Wa||Pa.z!==sb||Pa.w!==La)n.vertexAttrib4f(rb,kb,Wa,sb,La),Pa.x=kb,Pa.y=Wa,Pa.z=sb,Pa.w=La;(Ra=m.uv)&&("object"===typeof Ra||"function"===typeof Ra)&&(ba(Ra)||z.getBuffer(Ra)||z.getBuffer(Ra.buffer)||ba(Ra.buffer)||"constant"in Ra&&("number"===typeof Ra.constant||G(Ra.constant)))||X.commandRaise(W,F);Jb=!1;Db=null;Na=!1;Ya=Jd=0;Kb=1;Lb=0;lb=5126;tb=Qa=Yb=Oa=0;ba(Ra)?(Jb=!0,Db=z.createStream(34962,Ra),
lb=Db.dtype):(Db=z.getBuffer(Ra))?lb=Db.dtype:"constant"in Ra?(Kb=2,"number"===typeof Ra.constant?(Yb=Ra.constant,Qa=tb=Oa=0):(Yb=0<Ra.constant.length?Ra.constant[0]:0,Qa=1<Ra.constant.length?Ra.constant[1]:0,tb=2<Ra.constant.length?Ra.constant[2]:0,Oa=3<Ra.constant.length?Ra.constant[3]:0)):(Db=ba(Ra.buffer)?z.createStream(34962,Ra.buffer):z.getBuffer(Ra.buffer),lb="type"in Ra?ka[Ra.type]:Db.dtype,Na=!!Ra.normalized,Ya=Ra.size|0,Jd=Ra.offset|0,Lb=Ra.stride|0);ub=ea.location;Sa=T[ub];if(1===Kb){if(Sa.buffer||
n.enableVertexAttribArray(ub),mb=Ya||2,Sa.type!==lb||Sa.size!==mb||Sa.buffer!==Db||Sa.normalized!==Na||Sa.offset!==Jd||Sa.stride!==Lb)n.bindBuffer(34962,Db.buffer),n.vertexAttribPointer(ub,mb,lb,Na,Lb,Jd),Sa.type=lb,Sa.size=mb,Sa.buffer=Db,Sa.normalized=Na,Sa.offset=Jd,Sa.stride=Lb}else if(Sa.buffer&&(n.disableVertexAttribArray(ub),Sa.buffer=null),Sa.x!==Yb||Sa.y!==Qa||Sa.z!==tb||Sa.w!==Oa)n.vertexAttrib4f(ub,Yb,Qa,tb,Oa),Sa.x=Yb,Sa.y=Qa,Sa.z=tb,Sa.w=Oa;(gc=m.atlas)&&"framebuffer"===gc._reglType&&
(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||X.commandRaise(P,F);zc=gc._texture;n.uniform1i(B.location,zc.bind());uc=m.elements;bb=null;(jc=ba(uc))?bb=wa.createStream(uc):(bb=wa.getElements(uc),uc&&!bb&&X.commandRaise(b,F));bb&&n.bindBuffer(34963,bb.buffer.buffer);nd=bb?bb.primType:4;Xa=bb?bb.vertCount:-1;0<=Xa||X.commandRaise(xa,F);Xa&&(bb?n.drawElements(nd,Xa,bb.type,0<<(bb.type-5121>>1)):n.drawArrays(nd,0,Xa),Tc&&z.destroyStream(Hb),ac&&z.destroyStream(ib),Jb&&z.destroyStream(Db),
zc.unbind(),jc&&wa.destroyStream(bb))}O.dirty=!0;Ca.setVAO(null);l.view=h;g&&(J.cpuTime+=performance.now()-q)}}},"$7,color,position":function(a,X,F,J,g,f,q,e,x,C){var L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea,R,T,z,l,O,N;L=a.attributes;K=a.context;A=a.current;m=a.draw;t=a.elements;da=a.framebuffer;y=a.gl;U=a.next;u=a.shader;Q=a.uniforms;ga=a.vao;c=U.blend_color;h=A.blend_color;M=U.blend_equation;r=A.blend_equation;aa=U.blend_func;k=A.blend_func;w=U.colorMask;W=A.colorMask;
E=U.depth_range;D=A.depth_range;d=U.polygonOffset_offset;P=A.polygonOffset_offset;b=U.sample_coverage;xa=A.sample_coverage;B=U.scissor_box;qa=A.scissor_box;V=U.stencil_func;Y=A.stencil_func;ea=U.stencil_opBack;R=A.stencil_opBack;T=U.stencil_opFront;z=A.stencil_opFront;l=U.viewport;O=A.viewport;N=[1,0,0,1];return{draw:function(e){var a,n,q,u;e=da.next;e!==da.cur&&(e?y.bindFramebuffer(36160,e.framebuffer):y.bindFramebuffer(36160,null),da.cur=e);if(A.dirty){e=U.dither;e!==A.dither&&(e?y.enable(3024):
y.disable(3024),A.dither=e);e=U.blend_enable;e!==A.blend_enable&&(e?y.enable(3042):y.disable(3042),A.blend_enable=e);e=c[0];n=c[1];q=c[2];u=c[3];if(e!==h[0]||n!==h[1]||q!==h[2]||u!==h[3])y.blendColor(e,n,q,u),h[0]=e,h[1]=n,h[2]=q,h[3]=u;e=M[0];n=M[1];if(e!==r[0]||n!==r[1])y.blendEquationSeparate(e,n),r[0]=e,r[1]=n;e=aa[0];n=aa[1];q=aa[2];u=aa[3];if(e!==k[0]||n!==k[1]||q!==k[2]||u!==k[3])y.blendFuncSeparate(e,n,q,u),k[0]=e,k[1]=n,k[2]=q,k[3]=u;e=U.depth_enable;e!==A.depth_enable&&(e?y.enable(2929):
y.disable(2929),A.depth_enable=e);e=U.depth_func;e!==A.depth_func&&(y.depthFunc(e),A.depth_func=e);e=E[0];n=E[1];if(e!==D[0]||n!==D[1])y.depthRange(e,n),D[0]=e,D[1]=n;e=U.depth_mask;e!==A.depth_mask&&(y.depthMask(e),A.depth_mask=e);e=w[0];n=w[1];q=w[2];u=w[3];if(e!==W[0]||n!==W[1]||q!==W[2]||u!==W[3])y.colorMask(e,n,q,u),W[0]=e,W[1]=n,W[2]=q,W[3]=u;e=U.cull_enable;e!==A.cull_enable&&(e?y.enable(2884):y.disable(2884),A.cull_enable=e);e=U.cull_face;e!==A.cull_face&&(y.cullFace(e),A.cull_face=e);e=U.frontFace;
e!==A.frontFace&&(y.frontFace(e),A.frontFace=e);e=U.lineWidth;e!==A.lineWidth&&(y.lineWidth(e),A.lineWidth=e);e=U.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?y.enable(32823):y.disable(32823),A.polygonOffset_enable=e);e=d[0];n=d[1];if(e!==P[0]||n!==P[1])y.polygonOffset(e,n),P[0]=e,P[1]=n;e=U.sample_alpha;e!==A.sample_alpha&&(e?y.enable(32926):y.disable(32926),A.sample_alpha=e);e=U.sample_enable;e!==A.sample_enable&&(e?y.enable(32928):y.disable(32928),A.sample_enable=e);e=b[0];n=b[1];if(e!==
xa[0]||n!==xa[1])y.sampleCoverage(e,n),xa[0]=e,xa[1]=n;e=U.stencil_enable;e!==A.stencil_enable&&(e?y.enable(2960):y.disable(2960),A.stencil_enable=e);e=U.stencil_mask;e!==A.stencil_mask&&(y.stencilMask(e),A.stencil_mask=e);e=V[0];n=V[1];q=V[2];if(e!==Y[0]||n!==Y[1]||q!==Y[2])y.stencilFunc(e,n,q),Y[0]=e,Y[1]=n,Y[2]=q;e=T[0];n=T[1];q=T[2];u=T[3];if(e!==z[0]||n!==z[1]||q!==z[2]||u!==z[3])y.stencilOpSeparate(e,n,q,u),z[0]=e,z[1]=n,z[2]=q,z[3]=u;e=ea[0];n=ea[1];q=ea[2];u=ea[3];if(e!==R[0]||n!==R[1]||q!==
R[2]||u!==R[3])y.stencilOpSeparate(e,n,q,u),R[0]=e,R[1]=n,R[2]=q,R[3]=u;e=U.scissor_enable;e!==A.scissor_enable&&(e?y.enable(3089):y.disable(3089),A.scissor_enable=e);e=B[0];n=B[1];q=B[2];u=B[3];if(e!==qa[0]||n!==qa[1]||q!==qa[2]||u!==qa[3])y.scissor(e,n,q,u),qa[0]=e,qa[1]=n,qa[2]=q,qa[3]=u;e=l[0];n=l[1];q=l[2];u=l[3];if(e!==O[0]||n!==O[1]||q!==O[2]||u!==O[3])y.viewport(e,n,q,u),O[0]=e,O[1]=n,O[2]=q,O[3]=u;A.dirty=!1}if(e=A.profile)a=performance.now(),J.count++;y.useProgram(g.program);ga.setVAO(null);
n=C.location;q=L[n];q.buffer||y.enableVertexAttribArray(n);if(q.type!==f.dtype||2!==q.size||q.buffer!==f||!1!==q.normalized||0!==q.offset||0!==q.stride)y.bindBuffer(34962,f.buffer),y.vertexAttribPointer(n,2,f.dtype,!1,0,0),q.type=f.dtype,q.size=2,q.buffer=f,q.normalized=!1,q.offset=0,q.stride=0;y.uniform4f(x.location,1,0,0,1);(n=m.elements)?y.bindBuffer(34963,n.buffer.buffer):ga.currentVAO&&(n=t.getElements(ga.currentVAO.elements))&&y.bindBuffer(34963,n.buffer.buffer);q=m.primitive;u=m.offset;n?y.drawElements(q,
3,n.type,u<<(n.type-5121>>1)):y.drawArrays(q,u,3);ga.setVAO(null);e&&(J.cpuTime+=performance.now()-a)},scope:function(b,d,c){var h,e,a,k,l,g,r,B,w,y,z,D,E,ma,x,C,v,p;if(h=A.profile)e=performance.now(),J.count++;a=m.count;m.count=3;k=Q[3];Q[3]=N;l=q.buffer;q.buffer=f;g=q.divisor;q.divisor=0;r=q.normalized;q.normalized=!1;B=q.offset;q.offset=0;w=q.size;q.size=0;y=q.state;q.state=1;z=q.stride;q.stride=0;D=q.type;q.type=f.dtype;E=q.w;q.w=0;ma=q.x;q.x=0;x=q.y;q.y=0;C=q.z;q.z=0;v=u.vert;u.vert=2;p=u.frag;
u.frag=1;d(K,b,c);h&&(J.cpuTime+=performance.now()-e);m.count=a;Q[3]=k;q.buffer=l;q.divisor=g;q.normalized=r;q.offset=B;q.size=w;q.state=y;q.stride=z;q.type=D;q.w=E;q.x=ma;q.y=x;q.z=C;u.vert=v;u.frag=p},batch:function(a,g){var n,q,u;n=da.next;n!==da.cur&&(n?y.bindFramebuffer(36160,n.framebuffer):y.bindFramebuffer(36160,null),da.cur=n);if(A.dirty){var S,F;n=U.dither;n!==A.dither&&(n?y.enable(3024):y.disable(3024),A.dither=n);n=U.blend_enable;n!==A.blend_enable&&(n?y.enable(3042):y.disable(3042),A.blend_enable=
n);n=c[0];u=c[1];S=c[2];F=c[3];if(n!==h[0]||u!==h[1]||S!==h[2]||F!==h[3])y.blendColor(n,u,S,F),h[0]=n,h[1]=u,h[2]=S,h[3]=F;n=M[0];u=M[1];if(n!==r[0]||u!==r[1])y.blendEquationSeparate(n,u),r[0]=n,r[1]=u;n=aa[0];u=aa[1];S=aa[2];F=aa[3];if(n!==k[0]||u!==k[1]||S!==k[2]||F!==k[3])y.blendFuncSeparate(n,u,S,F),k[0]=n,k[1]=u,k[2]=S,k[3]=F;n=U.depth_enable;n!==A.depth_enable&&(n?y.enable(2929):y.disable(2929),A.depth_enable=n);n=U.depth_func;n!==A.depth_func&&(y.depthFunc(n),A.depth_func=n);n=E[0];u=E[1];
if(n!==D[0]||u!==D[1])y.depthRange(n,u),D[0]=n,D[1]=u;n=U.depth_mask;n!==A.depth_mask&&(y.depthMask(n),A.depth_mask=n);n=w[0];u=w[1];S=w[2];F=w[3];if(n!==W[0]||u!==W[1]||S!==W[2]||F!==W[3])y.colorMask(n,u,S,F),W[0]=n,W[1]=u,W[2]=S,W[3]=F;n=U.cull_enable;n!==A.cull_enable&&(n?y.enable(2884):y.disable(2884),A.cull_enable=n);n=U.cull_face;n!==A.cull_face&&(y.cullFace(n),A.cull_face=n);n=U.frontFace;n!==A.frontFace&&(y.frontFace(n),A.frontFace=n);n=U.lineWidth;n!==A.lineWidth&&(y.lineWidth(n),A.lineWidth=
n);n=U.polygonOffset_enable;n!==A.polygonOffset_enable&&(n?y.enable(32823):y.disable(32823),A.polygonOffset_enable=n);n=d[0];u=d[1];if(n!==P[0]||u!==P[1])y.polygonOffset(n,u),P[0]=n,P[1]=u;n=U.sample_alpha;n!==A.sample_alpha&&(n?y.enable(32926):y.disable(32926),A.sample_alpha=n);n=U.sample_enable;n!==A.sample_enable&&(n?y.enable(32928):y.disable(32928),A.sample_enable=n);n=b[0];u=b[1];if(n!==xa[0]||u!==xa[1])y.sampleCoverage(n,u),xa[0]=n,xa[1]=u;n=U.stencil_enable;n!==A.stencil_enable&&(n?y.enable(2960):
y.disable(2960),A.stencil_enable=n);n=U.stencil_mask;n!==A.stencil_mask&&(y.stencilMask(n),A.stencil_mask=n);n=V[0];u=V[1];S=V[2];if(n!==Y[0]||u!==Y[1]||S!==Y[2])y.stencilFunc(n,u,S),Y[0]=n,Y[1]=u,Y[2]=S;n=T[0];u=T[1];S=T[2];F=T[3];if(n!==z[0]||u!==z[1]||S!==z[2]||F!==z[3])y.stencilOpSeparate(n,u,S,F),z[0]=n,z[1]=u,z[2]=S,z[3]=F;n=ea[0];u=ea[1];S=ea[2];F=ea[3];if(n!==R[0]||u!==R[1]||S!==R[2]||F!==R[3])y.stencilOpSeparate(n,u,S,F),R[0]=n,R[1]=u,R[2]=S,R[3]=F;n=U.scissor_enable;n!==A.scissor_enable&&
(n?y.enable(3089):y.disable(3089),A.scissor_enable=n);n=B[0];u=B[1];S=B[2];F=B[3];if(n!==qa[0]||u!==qa[1]||S!==qa[2]||F!==qa[3])y.scissor(n,u,S,F),qa[0]=n,qa[1]=u,qa[2]=S,qa[3]=F;n=l[0];u=l[1];S=l[2];F=l[3];if(n!==O[0]||u!==O[1]||S!==O[2]||F!==O[3])y.viewport(n,u,S,F),O[0]=n,O[1]=u,O[2]=S,O[3]=F;A.dirty=!1}if(n=A.profile)q=performance.now(),J.count+=g;y.useProgram(e.program);var N;ga.setVAO(null);u=C.location;S=L[u];S.buffer||y.enableVertexAttribArray(u);if(S.type!==f.dtype||2!==S.size||S.buffer!==
f||!1!==S.normalized||0!==S.offset||0!==S.stride)y.bindBuffer(34962,f.buffer),y.vertexAttribPointer(u,2,f.dtype,!1,0,0),S.type=f.dtype,S.size=2,S.buffer=f,S.normalized=!1,S.offset=0,S.stride=0;y.uniform4f(x.location,1,0,0,1);(S=m.elements)?y.bindBuffer(34963,S.buffer.buffer):ga.currentVAO&&(S=t.getElements(ga.currentVAO.elements))&&y.bindBuffer(34963,S.buffer.buffer);F=m.primitive;N=m.offset;for(u=0;u<g;++u)S?y.drawElements(F,3,S.type,N<<(S.type-5121>>1)):y.drawArrays(F,N,3);ga.setVAO(null);n&&(J.cpuTime+=
performance.now()-q)}}},"$19,angle,color,offset,position":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M){var r,aa,k,w,W,E,D,d,P,b,xa,B,qa,V,Y,ea,R,T,z,l,O,N,ia,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa;r=a.attributes;aa=a.context;k=a.current;w=a.draw;W=a.elements;E=a.framebuffer;D=a.gl;d=a.isArrayLike;P=a.next;b=a.shader;xa=a.uniforms;B=a.vao;qa=P.blend_color;V=k.blend_color;Y=P.blend_equation;ea=k.blend_equation;R=P.blend_func;T=k.blend_func;z=P.colorMask;l=k.colorMask;O=P.depth_range;N=k.depth_range;
ia=P.polygonOffset_offset;na=k.polygonOffset_offset;n=P.sample_coverage;G=k.sample_coverage;ba=P.scissor_box;S=k.scissor_box;la=P.stencil_func;pa=k.stencil_func;Ca=P.stencil_opBack;Ba=k.stencil_opBack;fa=P.stencil_opFront;Ea=k.stencil_opFront;ja=P.viewport;oa=k.viewport;return{draw:function(b){var a,u,y,m;a=E.next;a!==E.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),E.cur=a);if(k.dirty){var v;a=P.dither;a!==k.dither&&(a?D.enable(3024):D.disable(3024),k.dither=a);a=P.blend_enable;
a!==k.blend_enable&&(a?D.enable(3042):D.disable(3042),k.blend_enable=a);a=qa[0];y=qa[1];m=qa[2];v=qa[3];if(a!==V[0]||y!==V[1]||m!==V[2]||v!==V[3])D.blendColor(a,y,m,v),V[0]=a,V[1]=y,V[2]=m,V[3]=v;a=Y[0];y=Y[1];if(a!==ea[0]||y!==ea[1])D.blendEquationSeparate(a,y),ea[0]=a,ea[1]=y;a=R[0];y=R[1];m=R[2];v=R[3];if(a!==T[0]||y!==T[1]||m!==T[2]||v!==T[3])D.blendFuncSeparate(a,y,m,v),T[0]=a,T[1]=y,T[2]=m,T[3]=v;a=P.depth_func;a!==k.depth_func&&(D.depthFunc(a),k.depth_func=a);a=O[0];y=O[1];if(a!==N[0]||y!==
N[1])D.depthRange(a,y),N[0]=a,N[1]=y;a=P.depth_mask;a!==k.depth_mask&&(D.depthMask(a),k.depth_mask=a);a=z[0];y=z[1];m=z[2];v=z[3];if(a!==l[0]||y!==l[1]||m!==l[2]||v!==l[3])D.colorMask(a,y,m,v),l[0]=a,l[1]=y,l[2]=m,l[3]=v;a=P.cull_enable;a!==k.cull_enable&&(a?D.enable(2884):D.disable(2884),k.cull_enable=a);a=P.cull_face;a!==k.cull_face&&(D.cullFace(a),k.cull_face=a);a=P.frontFace;a!==k.frontFace&&(D.frontFace(a),k.frontFace=a);a=P.lineWidth;a!==k.lineWidth&&(D.lineWidth(a),k.lineWidth=a);a=P.polygonOffset_enable;
a!==k.polygonOffset_enable&&(a?D.enable(32823):D.disable(32823),k.polygonOffset_enable=a);a=ia[0];y=ia[1];if(a!==na[0]||y!==na[1])D.polygonOffset(a,y),na[0]=a,na[1]=y;a=P.sample_alpha;a!==k.sample_alpha&&(a?D.enable(32926):D.disable(32926),k.sample_alpha=a);a=P.sample_enable;a!==k.sample_enable&&(a?D.enable(32928):D.disable(32928),k.sample_enable=a);a=n[0];y=n[1];if(a!==G[0]||y!==G[1])D.sampleCoverage(a,y),G[0]=a,G[1]=y;a=P.stencil_enable;a!==k.stencil_enable&&(a?D.enable(2960):D.disable(2960),k.stencil_enable=
a);a=P.stencil_mask;a!==k.stencil_mask&&(D.stencilMask(a),k.stencil_mask=a);a=la[0];y=la[1];m=la[2];if(a!==pa[0]||y!==pa[1]||m!==pa[2])D.stencilFunc(a,y,m),pa[0]=a,pa[1]=y,pa[2]=m;a=fa[0];y=fa[1];m=fa[2];v=fa[3];if(a!==Ea[0]||y!==Ea[1]||m!==Ea[2]||v!==Ea[3])D.stencilOpSeparate(a,y,m,v),Ea[0]=a,Ea[1]=y,Ea[2]=m,Ea[3]=v;a=Ca[0];y=Ca[1];m=Ca[2];v=Ca[3];if(a!==Ba[0]||y!==Ba[1]||m!==Ba[2]||v!==Ba[3])D.stencilOpSeparate(a,y,m,v),Ba[0]=a,Ba[1]=y,Ba[2]=m,Ba[3]=v;a=P.scissor_enable;a!==k.scissor_enable&&(a?
D.enable(3089):D.disable(3089),k.scissor_enable=a);a=ba[0];y=ba[1];m=ba[2];v=ba[3];if(a!==S[0]||y!==S[1]||m!==S[2]||v!==S[3])D.scissor(a,y,m,v),S[0]=a,S[1]=y,S[2]=m,S[3]=v;a=ja[0];y=ja[1];m=ja[2];v=ja[3];if(a!==oa[0]||y!==oa[1]||m!==oa[2]||v!==oa[3])D.viewport(a,y,m,v),oa[0]=a,oa[1]=y,oa[2]=m,oa[3]=v}D.disable(2929);k.depth_enable=!1;if(a=k.profile)u=performance.now(),J.count++;D.useProgram(g.program);B.setVAO(null);y=M.location;m=r[y];m.buffer||D.enableVertexAttribArray(y);if(m.type!==f.dtype||2!==
m.size||m.buffer!==f||!1!==m.normalized||0!==m.offset||0!==m.stride)D.bindBuffer(34962,f.buffer),D.vertexAttribPointer(y,2,f.dtype,!1,0,0),m.type=f.dtype,m.size=2,m.buffer=f,m.normalized=!1,m.offset=0,m.stride=0;y=q.call(this,aa,b,0);"number"!==typeof y&&X.commandRaise(e,F);D.uniform1f(ga.location,y);y=b.offset;d(y)&&2===y.length||X.commandRaise(x,F);D.uniform2f(h.location,y[0],y[1]);b=C.call(this,aa,b,0);d(b)&&4===b.length||X.commandRaise(L,F);D.uniform4f(c.location,b[0],b[1],b[2],b[3]);(b=w.elements)?
D.bindBuffer(34963,b.buffer.buffer):B.currentVAO&&(b=W.getElements(B.currentVAO.elements))&&D.bindBuffer(34963,b.buffer.buffer);y=w.primitive;m=w.offset;b?D.drawElements(y,3,b.type,m<<(b.type-5121>>1)):D.drawArrays(y,m,3);k.dirty=!0;B.setVAO(null);a&&(J.cpuTime+=performance.now()-u)},scope:function(d,c,h){var e,a,l,n,g,q,r,y,u,B,H,z,D,E,S,x,F,G,fa,C,M;e=P.depth_enable;P.depth_enable=!1;if(a=k.profile)l=performance.now(),J.count++;n=w.count;w.count=3;g=K.call(this,aa,d,h);q=xa[3];xa[3]=g;r=A.call(this,
aa,d,h);g=xa[5];xa[5]=r;y=d.offset;r=xa[4];xa[4]=y;y=m.buffer;m.buffer=f;u=m.divisor;m.divisor=0;B=m.normalized;m.normalized=!1;H=m.offset;m.offset=0;z=m.size;m.size=0;D=m.state;m.state=1;E=m.stride;m.stride=0;S=m.type;m.type=f.dtype;x=m.w;m.w=0;F=m.x;m.x=0;G=m.y;m.y=0;fa=m.z;m.z=0;C=b.vert;b.vert=2;M=b.frag;b.frag=1;k.dirty=!0;c(aa,d,h);P.depth_enable=e;a&&(J.cpuTime+=performance.now()-l);w.count=n;xa[3]=q;xa[5]=g;xa[4]=r;m.buffer=y;m.divisor=u;m.normalized=B;m.offset=H;m.size=z;m.state=D;m.stride=
E;m.type=S;m.w=x;m.x=F;m.y=G;m.z=fa;b.vert=C;b.frag=M;k.dirty=!0},batch:function(b,e){var a,g,q,v;a=E.next;a!==E.cur&&(a?D.bindFramebuffer(36160,a.framebuffer):D.bindFramebuffer(36160,null),E.cur=a);if(k.dirty){var p,I,m;a=P.dither;a!==k.dither&&(a?D.enable(3024):D.disable(3024),k.dither=a);a=P.blend_enable;a!==k.blend_enable&&(a?D.enable(3042):D.disable(3042),k.blend_enable=a);a=qa[0];p=qa[1];I=qa[2];m=qa[3];if(a!==V[0]||p!==V[1]||I!==V[2]||m!==V[3])D.blendColor(a,p,I,m),V[0]=a,V[1]=p,V[2]=I,V[3]=
m;a=Y[0];p=Y[1];if(a!==ea[0]||p!==ea[1])D.blendEquationSeparate(a,p),ea[0]=a,ea[1]=p;a=R[0];p=R[1];I=R[2];m=R[3];if(a!==T[0]||p!==T[1]||I!==T[2]||m!==T[3])D.blendFuncSeparate(a,p,I,m),T[0]=a,T[1]=p,T[2]=I,T[3]=m;a=P.depth_func;a!==k.depth_func&&(D.depthFunc(a),k.depth_func=a);a=O[0];p=O[1];if(a!==N[0]||p!==N[1])D.depthRange(a,p),N[0]=a,N[1]=p;a=P.depth_mask;a!==k.depth_mask&&(D.depthMask(a),k.depth_mask=a);a=z[0];p=z[1];I=z[2];m=z[3];if(a!==l[0]||p!==l[1]||I!==l[2]||m!==l[3])D.colorMask(a,p,I,m),
l[0]=a,l[1]=p,l[2]=I,l[3]=m;a=P.cull_enable;a!==k.cull_enable&&(a?D.enable(2884):D.disable(2884),k.cull_enable=a);a=P.cull_face;a!==k.cull_face&&(D.cullFace(a),k.cull_face=a);a=P.frontFace;a!==k.frontFace&&(D.frontFace(a),k.frontFace=a);a=P.lineWidth;a!==k.lineWidth&&(D.lineWidth(a),k.lineWidth=a);a=P.polygonOffset_enable;a!==k.polygonOffset_enable&&(a?D.enable(32823):D.disable(32823),k.polygonOffset_enable=a);a=ia[0];p=ia[1];if(a!==na[0]||p!==na[1])D.polygonOffset(a,p),na[0]=a,na[1]=p;a=P.sample_alpha;
a!==k.sample_alpha&&(a?D.enable(32926):D.disable(32926),k.sample_alpha=a);a=P.sample_enable;a!==k.sample_enable&&(a?D.enable(32928):D.disable(32928),k.sample_enable=a);a=n[0];p=n[1];if(a!==G[0]||p!==G[1])D.sampleCoverage(a,p),G[0]=a,G[1]=p;a=P.stencil_enable;a!==k.stencil_enable&&(a?D.enable(2960):D.disable(2960),k.stencil_enable=a);a=P.stencil_mask;a!==k.stencil_mask&&(D.stencilMask(a),k.stencil_mask=a);a=la[0];p=la[1];I=la[2];if(a!==pa[0]||p!==pa[1]||I!==pa[2])D.stencilFunc(a,p,I),pa[0]=a,pa[1]=
p,pa[2]=I;a=fa[0];p=fa[1];I=fa[2];m=fa[3];if(a!==Ea[0]||p!==Ea[1]||I!==Ea[2]||m!==Ea[3])D.stencilOpSeparate(a,p,I,m),Ea[0]=a,Ea[1]=p,Ea[2]=I,Ea[3]=m;a=Ca[0];p=Ca[1];I=Ca[2];m=Ca[3];if(a!==Ba[0]||p!==Ba[1]||I!==Ba[2]||m!==Ba[3])D.stencilOpSeparate(a,p,I,m),Ba[0]=a,Ba[1]=p,Ba[2]=I,Ba[3]=m;a=P.scissor_enable;a!==k.scissor_enable&&(a?D.enable(3089):D.disable(3089),k.scissor_enable=a);a=ba[0];p=ba[1];I=ba[2];m=ba[3];if(a!==S[0]||p!==S[1]||I!==S[2]||m!==S[3])D.scissor(a,p,I,m),S[0]=a,S[1]=p,S[2]=I,S[3]=
m;a=ja[0];p=ja[1];I=ja[2];m=ja[3];if(a!==oa[0]||p!==oa[1]||I!==oa[2]||m!==oa[3])D.viewport(a,p,I,m),oa[0]=a,oa[1]=p,oa[2]=I,oa[3]=m}D.disable(2929);k.depth_enable=!1;if(a=k.profile)g=performance.now(),J.count+=e;D.useProgram(t.program);B.setVAO(null);p=M.location;I=r[p];I.buffer||D.enableVertexAttribArray(p);if(I.type!==f.dtype||2!==I.size||I.buffer!==f||!1!==I.normalized||0!==I.offset||0!==I.stride)D.bindBuffer(34962,f.buffer),D.vertexAttribPointer(p,2,f.dtype,!1,0,0),I.type=f.dtype,I.size=2,I.buffer=
f,I.normalized=!1,I.offset=0,I.stride=0;q=da.call(this,aa,v,q);"number"!==typeof q&&X.commandRaise(y,F);D.uniform1f(ga.location,q);(p=w.elements)?D.bindBuffer(34963,p.buffer.buffer):B.currentVAO&&(p=W.getElements(B.currentVAO.elements))&&D.bindBuffer(34963,p.buffer.buffer);I=w.primitive;m=w.offset;for(q=0;q<e;++q){v=b[q];var A,x,C,ha,H,sa,L,ra,K;A=v.offset;d(A)&&2===A.length||X.commandRaise(U,F);x=A[0];A=A[1];q&&C===x&&ha===A||(C=x,ha=A,D.uniform2f(h.location,x,A));H=u.call(this,aa,v,q);d(H)&&4===
H.length||X.commandRaise(Q,F);v=H[0];x=H[1];A=H[2];H=H[3];q&&sa===v&&L===x&&ra===A&&K===H||(sa=v,L=x,ra=A,K=H,D.uniform4f(c.location,v,x,A,H));p?D.drawElements(I,3,p.type,m<<(p.type-5121>>1)):D.drawArrays(I,m,3)}k.dirty=!0;B.setVAO(null);a&&(J.cpuTime+=performance.now()-g)}}},"$23,model,position,projection,view":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w){var W,E,D,d,P,b,xa,B,V,ia,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va;W=a.attributes;
E=a.context;D=a.current;d=a.draw;P=a.framebuffer;b=a.gl;xa=a.isArrayLike;B=a.next;V=a.shader;ia=a.uniforms;Y=a.vao;ea=B.blend_color;R=D.blend_color;T=B.blend_equation;z=D.blend_equation;l=B.blend_func;O=D.blend_func;N=B.colorMask;wa=D.colorMask;na=B.depth_range;n=D.depth_range;G=B.polygonOffset_offset;ba=D.polygonOffset_offset;S=B.sample_coverage;la=D.sample_coverage;pa=B.scissor_box;Ca=D.scissor_box;Ba=B.stencil_func;fa=D.stencil_func;Ea=B.stencil_opBack;ja=D.stencil_opBack;oa=B.stencil_opFront;
ya=D.stencil_opFront;Ma=B.viewport;ma=D.viewport;cc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);v=new Float32Array(16);p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];I=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);ua=new Float32Array(16);va=new Float32Array(16);return{draw:function(d){var c,h,a,p;c=P.next;c!==P.cur&&(c?b.bindFramebuffer(36160,c.framebuffer):b.bindFramebuffer(36160,null),P.cur=c);if(D.dirty){var I;c=B.dither;c!==D.dither&&(c?b.enable(3024):b.disable(3024),
D.dither=c);c=B.blend_enable;c!==D.blend_enable&&(c?b.enable(3042):b.disable(3042),D.blend_enable=c);c=ea[0];a=ea[1];p=ea[2];I=ea[3];if(c!==R[0]||a!==R[1]||p!==R[2]||I!==R[3])b.blendColor(c,a,p,I),R[0]=c,R[1]=a,R[2]=p,R[3]=I;c=T[0];a=T[1];if(c!==z[0]||a!==z[1])b.blendEquationSeparate(c,a),z[0]=c,z[1]=a;c=l[0];a=l[1];p=l[2];I=l[3];if(c!==O[0]||a!==O[1]||p!==O[2]||I!==O[3])b.blendFuncSeparate(c,a,p,I),O[0]=c,O[1]=a,O[2]=p,O[3]=I;c=B.depth_enable;c!==D.depth_enable&&(c?b.enable(2929):b.disable(2929),
D.depth_enable=c);c=B.depth_func;c!==D.depth_func&&(b.depthFunc(c),D.depth_func=c);c=na[0];a=na[1];if(c!==n[0]||a!==n[1])b.depthRange(c,a),n[0]=c,n[1]=a;c=B.depth_mask;c!==D.depth_mask&&(b.depthMask(c),D.depth_mask=c);c=N[0];a=N[1];p=N[2];I=N[3];if(c!==wa[0]||a!==wa[1]||p!==wa[2]||I!==wa[3])b.colorMask(c,a,p,I),wa[0]=c,wa[1]=a,wa[2]=p,wa[3]=I;c=B.cull_enable;c!==D.cull_enable&&(c?b.enable(2884):b.disable(2884),D.cull_enable=c);c=B.cull_face;c!==D.cull_face&&(b.cullFace(c),D.cull_face=c);c=B.frontFace;
c!==D.frontFace&&(b.frontFace(c),D.frontFace=c);c=B.lineWidth;c!==D.lineWidth&&(b.lineWidth(c),D.lineWidth=c);c=B.polygonOffset_enable;c!==D.polygonOffset_enable&&(c?b.enable(32823):b.disable(32823),D.polygonOffset_enable=c);c=G[0];a=G[1];if(c!==ba[0]||a!==ba[1])b.polygonOffset(c,a),ba[0]=c,ba[1]=a;c=B.sample_alpha;c!==D.sample_alpha&&(c?b.enable(32926):b.disable(32926),D.sample_alpha=c);c=B.sample_enable;c!==D.sample_enable&&(c?b.enable(32928):b.disable(32928),D.sample_enable=c);c=S[0];a=S[1];if(c!==
la[0]||a!==la[1])b.sampleCoverage(c,a),la[0]=c,la[1]=a;c=B.stencil_enable;c!==D.stencil_enable&&(c?b.enable(2960):b.disable(2960),D.stencil_enable=c);c=B.stencil_mask;c!==D.stencil_mask&&(b.stencilMask(c),D.stencil_mask=c);c=Ba[0];a=Ba[1];p=Ba[2];if(c!==fa[0]||a!==fa[1]||p!==fa[2])b.stencilFunc(c,a,p),fa[0]=c,fa[1]=a,fa[2]=p;c=oa[0];a=oa[1];p=oa[2];I=oa[3];if(c!==ya[0]||a!==ya[1]||p!==ya[2]||I!==ya[3])b.stencilOpSeparate(c,a,p,I),ya[0]=c,ya[1]=a,ya[2]=p,ya[3]=I;c=Ea[0];a=Ea[1];p=Ea[2];I=Ea[3];if(c!==
ja[0]||a!==ja[1]||p!==ja[2]||I!==ja[3])b.stencilOpSeparate(c,a,p,I),ja[0]=c,ja[1]=a,ja[2]=p,ja[3]=I;c=B.scissor_enable;c!==D.scissor_enable&&(c?b.enable(3089):b.disable(3089),D.scissor_enable=c);c=pa[0];a=pa[1];p=pa[2];I=pa[3];if(c!==Ca[0]||a!==Ca[1]||p!==Ca[2]||I!==Ca[3])b.scissor(c,a,p,I),Ca[0]=c,Ca[1]=a,Ca[2]=p,Ca[3]=I;c=Ma[0];a=Ma[1];p=Ma[2];I=Ma[3];if(c!==ma[0]||a!==ma[1]||p!==ma[2]||I!==ma[3])b.viewport(c,a,p,I),ma[0]=c,ma[1]=a,ma[2]=p,ma[3]=I;D.dirty=!1}if(c=D.profile)h=performance.now(),J.count++;
b.useProgram(g.program);Y.setVAO(null);a=aa.location;p=W[a];p.buffer||b.enableVertexAttribArray(a);if(p.type!==f.dtype||3!==p.size||p.buffer!==f||!1!==p.normalized||0!==p.offset||0!==p.stride)b.bindBuffer(34962,f.buffer),b.vertexAttribPointer(a,3,f.dtype,!1,0,0),p.type=f.dtype,p.size=3,p.buffer=f,p.normalized=!1,p.offset=0,p.stride=0;b.uniformMatrix4fv(r.location,!1,cc);a=q.call(this,E,d,0);xa(a)&&16===a.length||X.commandRaise(e,F);b.uniformMatrix4fv(w.location,!1,Array.isArray(a)||a instanceof Float32Array?
a:(Ta[0]=a[0],Ta[1]=a[1],Ta[2]=a[2],Ta[3]=a[3],Ta[4]=a[4],Ta[5]=a[5],Ta[6]=a[6],Ta[7]=a[7],Ta[8]=a[8],Ta[9]=a[9],Ta[10]=a[10],Ta[11]=a[11],Ta[12]=a[12],Ta[13]=a[13],Ta[14]=a[14],Ta[15]=a[15],Ta));d=x.call(this,E,d,0);xa(d)&&16===d.length||X.commandRaise(C,F);b.uniformMatrix4fv(k.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(v[0]=d[0],v[1]=d[1],v[2]=d[2],v[3]=d[3],v[4]=d[4],v[5]=d[5],v[6]=d[6],v[7]=d[7],v[8]=d[8],v[9]=d[9],v[10]=d[10],v[11]=d[11],v[12]=d[12],v[13]=d[13],v[14]=d[14],v[15]=
d[15],v));L&&b.bindBuffer(34963,L.buffer.buffer);d=L.primType;a=L.vertCount-0;0<=a||X.commandRaise(K,F);a&&(b.drawElements(d,a,L.type,0<<(L.type-5121>>1)),Y.setVAO(null),c&&(J.cpuTime+=performance.now()-h))},scope:function(b,c,a){var h,e,k,l,n,g,q,v,r,I,u,B,w,z,x,S,ma,G,fa,C,M,N,O;if(h=D.profile)e=performance.now(),J.count++;k=d.elements;d.elements=A;l=d.offset;d.offset=0;n=A.vertCount-0;0<=n||X.commandRaise(m,F);g=d.count;d.count=n;q=A.primType;n=d.primitive;d.primitive=q;q=ia[3];ia[3]=p;v=t.call(this,
E,b,a);r=ia[5];ia[5]=v;I=da.call(this,E,b,a);v=ia[4];ia[4]=I;I=y.buffer;y.buffer=f;u=y.divisor;y.divisor=0;B=y.normalized;y.normalized=!1;w=y.offset;y.offset=0;z=y.size;y.size=0;x=y.state;y.state=1;S=y.stride;y.stride=0;ma=y.type;y.type=f.dtype;G=y.w;y.w=0;fa=y.x;y.x=0;C=y.y;y.y=0;M=y.z;y.z=0;N=V.vert;V.vert=2;O=V.frag;V.frag=1;c(E,b,a);h&&(J.cpuTime+=performance.now()-e);d.elements=k;d.offset=l;d.count=g;d.primitive=n;ia[3]=q;ia[5]=r;ia[4]=v;y.buffer=I;y.divisor=u;y.normalized=B;y.offset=w;y.size=
z;y.state=x;y.stride=S;y.type=ma;y.w=G;y.x=fa;y.y=C;y.z=M;V.vert=N;V.frag=O},batch:function(d,a){var e,g,q;e=P.next;e!==P.cur&&(e?b.bindFramebuffer(36160,e.framebuffer):b.bindFramebuffer(36160,null),P.cur=e);if(D.dirty){var p,v,m;e=B.dither;e!==D.dither&&(e?b.enable(3024):b.disable(3024),D.dither=e);e=B.blend_enable;e!==D.blend_enable&&(e?b.enable(3042):b.disable(3042),D.blend_enable=e);e=ea[0];p=ea[1];v=ea[2];m=ea[3];if(e!==R[0]||p!==R[1]||v!==R[2]||m!==R[3])b.blendColor(e,p,v,m),R[0]=e,R[1]=p,R[2]=
v,R[3]=m;e=T[0];p=T[1];if(e!==z[0]||p!==z[1])b.blendEquationSeparate(e,p),z[0]=e,z[1]=p;e=l[0];p=l[1];v=l[2];m=l[3];if(e!==O[0]||p!==O[1]||v!==O[2]||m!==O[3])b.blendFuncSeparate(e,p,v,m),O[0]=e,O[1]=p,O[2]=v,O[3]=m;e=B.depth_enable;e!==D.depth_enable&&(e?b.enable(2929):b.disable(2929),D.depth_enable=e);e=B.depth_func;e!==D.depth_func&&(b.depthFunc(e),D.depth_func=e);e=na[0];p=na[1];if(e!==n[0]||p!==n[1])b.depthRange(e,p),n[0]=e,n[1]=p;e=B.depth_mask;e!==D.depth_mask&&(b.depthMask(e),D.depth_mask=
e);e=N[0];p=N[1];v=N[2];m=N[3];if(e!==wa[0]||p!==wa[1]||v!==wa[2]||m!==wa[3])b.colorMask(e,p,v,m),wa[0]=e,wa[1]=p,wa[2]=v,wa[3]=m;e=B.cull_enable;e!==D.cull_enable&&(e?b.enable(2884):b.disable(2884),D.cull_enable=e);e=B.cull_face;e!==D.cull_face&&(b.cullFace(e),D.cull_face=e);e=B.frontFace;e!==D.frontFace&&(b.frontFace(e),D.frontFace=e);e=B.lineWidth;e!==D.lineWidth&&(b.lineWidth(e),D.lineWidth=e);e=B.polygonOffset_enable;e!==D.polygonOffset_enable&&(e?b.enable(32823):b.disable(32823),D.polygonOffset_enable=
e);e=G[0];p=G[1];if(e!==ba[0]||p!==ba[1])b.polygonOffset(e,p),ba[0]=e,ba[1]=p;e=B.sample_alpha;e!==D.sample_alpha&&(e?b.enable(32926):b.disable(32926),D.sample_alpha=e);e=B.sample_enable;e!==D.sample_enable&&(e?b.enable(32928):b.disable(32928),D.sample_enable=e);e=S[0];p=S[1];if(e!==la[0]||p!==la[1])b.sampleCoverage(e,p),la[0]=e,la[1]=p;e=B.stencil_enable;e!==D.stencil_enable&&(e?b.enable(2960):b.disable(2960),D.stencil_enable=e);e=B.stencil_mask;e!==D.stencil_mask&&(b.stencilMask(e),D.stencil_mask=
e);e=Ba[0];p=Ba[1];v=Ba[2];if(e!==fa[0]||p!==fa[1]||v!==fa[2])b.stencilFunc(e,p,v),fa[0]=e,fa[1]=p,fa[2]=v;e=oa[0];p=oa[1];v=oa[2];m=oa[3];if(e!==ya[0]||p!==ya[1]||v!==ya[2]||m!==ya[3])b.stencilOpSeparate(e,p,v,m),ya[0]=e,ya[1]=p,ya[2]=v,ya[3]=m;e=Ea[0];p=Ea[1];v=Ea[2];m=Ea[3];if(e!==ja[0]||p!==ja[1]||v!==ja[2]||m!==ja[3])b.stencilOpSeparate(e,p,v,m),ja[0]=e,ja[1]=p,ja[2]=v,ja[3]=m;e=B.scissor_enable;e!==D.scissor_enable&&(e?b.enable(3089):b.disable(3089),D.scissor_enable=e);e=pa[0];p=pa[1];v=pa[2];
m=pa[3];if(e!==Ca[0]||p!==Ca[1]||v!==Ca[2]||m!==Ca[3])b.scissor(e,p,v,m),Ca[0]=e,Ca[1]=p,Ca[2]=v,Ca[3]=m;e=Ma[0];p=Ma[1];v=Ma[2];m=Ma[3];if(e!==ma[0]||p!==ma[1]||v!==ma[2]||m!==ma[3])b.viewport(e,p,v,m),ma[0]=e,ma[1]=p,ma[2]=v,ma[3]=m;D.dirty=!1}if(e=D.profile)g=performance.now(),J.count+=a;b.useProgram(U.program);Y.setVAO(null);p=aa.location;v=W[p];v.buffer||b.enableVertexAttribArray(p);if(v.type!==f.dtype||3!==v.size||v.buffer!==f||!1!==v.normalized||0!==v.offset||0!==v.stride)b.bindBuffer(34962,
f.buffer),b.vertexAttribPointer(p,3,f.dtype,!1,0,0),v.type=f.dtype,v.size=3,v.buffer=f,v.normalized=!1,v.offset=0,v.stride=0;b.uniformMatrix4fv(r.location,!1,I);p=u.call(this,E,void 0,q);xa(p)&&16===p.length||X.commandRaise(Q,F);b.uniformMatrix4fv(w.location,!1,Array.isArray(p)||p instanceof Float32Array?p:(ua[0]=p[0],ua[1]=p[1],ua[2]=p[2],ua[3]=p[3],ua[4]=p[4],ua[5]=p[5],ua[6]=p[6],ua[7]=p[7],ua[8]=p[8],ua[9]=p[9],ua[10]=p[10],ua[11]=p[11],ua[12]=p[12],ua[13]=p[13],ua[14]=p[14],ua[15]=p[15],ua));
q=ga.call(this,E,void 0,q);xa(q)&&16===q.length||X.commandRaise(c,F);b.uniformMatrix4fv(k.location,!1,Array.isArray(q)||q instanceof Float32Array?q:(va[0]=q[0],va[1]=q[1],va[2]=q[2],va[3]=q[3],va[4]=q[4],va[5]=q[5],va[6]=q[6],va[7]=q[7],va[8]=q[8],va[9]=q[9],va[10]=q[10],va[11]=q[11],va[12]=q[12],va[13]=q[13],va[14]=q[14],va[15]=q[15],va));h&&b.bindBuffer(34963,h.buffer.buffer);p=h.primType;v=h.vertCount-0;0<=v||X.commandRaise(M,F);for(q=0;q<a;++q)v&&b.drawElements(p,v,h.type,0<<(h.type-5121>>1));
Y.setVAO(null);e&&(J.cpuTime+=performance.now()-g)}}},$20:function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga){var c,h,M,r,aa,k,w,W,E,D,d,P,b,V,B,qa,ia,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca;c=a.context;h=a.current;M=a.framebuffer;r=a.gl;aa=a.next;k=a.shader;w=a.uniforms;W=a.vao;E=aa.blend_color;D=h.blend_color;d=aa.blend_equation;P=h.blend_equation;b=aa.blend_func;V=h.blend_func;B=aa.colorMask;qa=h.colorMask;ia=aa.depth_range;Y=h.depth_range;ea=aa.polygonOffset_offset;R=h.polygonOffset_offset;
T=aa.sample_coverage;z=h.sample_coverage;l=aa.scissor_box;O=h.scissor_box;N=aa.stencil_func;wa=h.stencil_func;na=aa.stencil_opBack;n=h.stencil_opBack;G=aa.stencil_opFront;ba=h.stencil_opFront;S=aa.viewport;la=h.viewport;pa={};Ca={};return{draw:function(a){var m,y,u,w,A,t,ma,L,Q,v,p,I,K;m=c.center;y=c.distance;u=c.eye;w=c.phi;A=c.projection;t=q.call(this,c,a,0);ma=c.theta;L=c.up;Q=c.view;c.center=g;c.distance=2.302585092994046;c.eye=f;c.phi=0;c.projection=t;c.theta=0;c.up=e;c.view=x;t=M.next;t!==M.cur&&
(t?r.bindFramebuffer(36160,t.framebuffer):r.bindFramebuffer(36160,null),M.cur=t);if(h.dirty){t=aa.dither;t!==h.dither&&(t?r.enable(3024):r.disable(3024),h.dither=t);t=aa.blend_enable;t!==h.blend_enable&&(t?r.enable(3042):r.disable(3042),h.blend_enable=t);t=E[0];p=E[1];I=E[2];K=E[3];if(t!==D[0]||p!==D[1]||I!==D[2]||K!==D[3])r.blendColor(t,p,I,K),D[0]=t,D[1]=p,D[2]=I,D[3]=K;t=d[0];p=d[1];if(t!==P[0]||p!==P[1])r.blendEquationSeparate(t,p),P[0]=t,P[1]=p;t=b[0];p=b[1];I=b[2];K=b[3];if(t!==V[0]||p!==V[1]||
I!==V[2]||K!==V[3])r.blendFuncSeparate(t,p,I,K),V[0]=t,V[1]=p,V[2]=I,V[3]=K;t=aa.depth_enable;t!==h.depth_enable&&(t?r.enable(2929):r.disable(2929),h.depth_enable=t);t=aa.depth_func;t!==h.depth_func&&(r.depthFunc(t),h.depth_func=t);t=ia[0];p=ia[1];if(t!==Y[0]||p!==Y[1])r.depthRange(t,p),Y[0]=t,Y[1]=p;t=aa.depth_mask;t!==h.depth_mask&&(r.depthMask(t),h.depth_mask=t);t=B[0];p=B[1];I=B[2];K=B[3];if(t!==qa[0]||p!==qa[1]||I!==qa[2]||K!==qa[3])r.colorMask(t,p,I,K),qa[0]=t,qa[1]=p,qa[2]=I,qa[3]=K;t=aa.cull_enable;
t!==h.cull_enable&&(t?r.enable(2884):r.disable(2884),h.cull_enable=t);t=aa.cull_face;t!==h.cull_face&&(r.cullFace(t),h.cull_face=t);t=aa.frontFace;t!==h.frontFace&&(r.frontFace(t),h.frontFace=t);t=aa.lineWidth;t!==h.lineWidth&&(r.lineWidth(t),h.lineWidth=t);t=aa.polygonOffset_enable;t!==h.polygonOffset_enable&&(t?r.enable(32823):r.disable(32823),h.polygonOffset_enable=t);t=ea[0];p=ea[1];if(t!==R[0]||p!==R[1])r.polygonOffset(t,p),R[0]=t,R[1]=p;t=aa.sample_alpha;t!==h.sample_alpha&&(t?r.enable(32926):
r.disable(32926),h.sample_alpha=t);t=aa.sample_enable;t!==h.sample_enable&&(t?r.enable(32928):r.disable(32928),h.sample_enable=t);t=T[0];p=T[1];if(t!==z[0]||p!==z[1])r.sampleCoverage(t,p),z[0]=t,z[1]=p;t=aa.stencil_enable;t!==h.stencil_enable&&(t?r.enable(2960):r.disable(2960),h.stencil_enable=t);t=aa.stencil_mask;t!==h.stencil_mask&&(r.stencilMask(t),h.stencil_mask=t);t=N[0];p=N[1];I=N[2];if(t!==wa[0]||p!==wa[1]||I!==wa[2])r.stencilFunc(t,p,I),wa[0]=t,wa[1]=p,wa[2]=I;t=G[0];p=G[1];I=G[2];K=G[3];
if(t!==ba[0]||p!==ba[1]||I!==ba[2]||K!==ba[3])r.stencilOpSeparate(t,p,I,K),ba[0]=t,ba[1]=p,ba[2]=I,ba[3]=K;t=na[0];p=na[1];I=na[2];K=na[3];if(t!==n[0]||p!==n[1]||I!==n[2]||K!==n[3])r.stencilOpSeparate(t,p,I,K),n[0]=t,n[1]=p,n[2]=I,n[3]=K;t=aa.scissor_enable;t!==h.scissor_enable&&(t?r.enable(3089):r.disable(3089),h.scissor_enable=t);t=l[0];p=l[1];I=l[2];K=l[3];if(t!==O[0]||p!==O[1]||I!==O[2]||K!==O[3])r.scissor(t,p,I,K),O[0]=t,O[1]=p,O[2]=I,O[3]=K;t=S[0];p=S[1];I=S[2];K=S[3];if(t!==la[0]||p!==la[1]||
I!==la[2]||K!==la[3])r.viewport(t,p,I,K),la[0]=t,la[1]=p,la[2]=I,la[3]=K;h.dirty=!1}if(t=h.profile)v=performance.now(),J.count++;p=k.program(k.vert,k.frag,F);r.useProgram(p.program);W.setVAO(null);I=p.id;(K=pa[I])||(K=pa[I]=C(p));K.call(this,a);W.setVAO(null);c.center=m;c.distance=y;c.eye=u;c.phi=w;c.projection=A;c.theta=ma;c.up=L;c.view=Q;t&&(J.cpuTime+=performance.now()-v)},scope:function(b,d,e){var a,f,k,l,n,g,q,v,p,r,y,u,B,z,D,H,E,x,S;a=c.center;f=c.distance;k=c.eye;l=c.phi;n=c.projection;g=A.call(this,
c,b,e);q=c.theta;v=c.up;p=c.view;c.center=L;c.distance=2.302585092994046;c.eye=K;c.phi=0;c.projection=g;c.theta=0;c.up=m;c.view=t;if(g=h.profile)r=performance.now(),J.count++;y=c.center;u=w[1];w[1]=y;B=c.distance;y=w[2];w[2]=B;z=c.eye;B=w[3];w[3]=z;D=c.phi;z=w[4];w[4]=D;H=c.projection;D=w[5];w[5]=H;E=c.theta;H=w[6];w[6]=E;x=c.up;E=w[7];w[7]=x;x=c.view;S=w[8];w[8]=x;d(c,b,e);c.center=a;c.distance=f;c.eye=k;c.phi=l;c.projection=n;c.theta=q;c.up=v;c.view=p;g&&(J.cpuTime+=performance.now()-r);w[1]=u;
w[2]=y;w[3]=B;w[4]=z;w[5]=D;w[6]=H;w[7]=E;w[8]=S},batch:function(e,a){var f,g,q,m,w,t,A,x,v,p,I,C,K;f=c.center;g=c.distance;q=c.eye;m=c.phi;w=c.projection;t=U.call(this,c,e,0);A=c.theta;x=c.up;v=c.view;c.center=da;c.distance=2.302585092994046;c.eye=y;c.phi=0;c.projection=t;c.theta=0;c.up=u;c.view=Q;t=M.next;t!==M.cur&&(t?r.bindFramebuffer(36160,t.framebuffer):r.bindFramebuffer(36160,null),M.cur=t);if(h.dirty){t=aa.dither;t!==h.dither&&(t?r.enable(3024):r.disable(3024),h.dither=t);t=aa.blend_enable;
t!==h.blend_enable&&(t?r.enable(3042):r.disable(3042),h.blend_enable=t);t=E[0];I=E[1];C=E[2];K=E[3];if(t!==D[0]||I!==D[1]||C!==D[2]||K!==D[3])r.blendColor(t,I,C,K),D[0]=t,D[1]=I,D[2]=C,D[3]=K;t=d[0];I=d[1];if(t!==P[0]||I!==P[1])r.blendEquationSeparate(t,I),P[0]=t,P[1]=I;t=b[0];I=b[1];C=b[2];K=b[3];if(t!==V[0]||I!==V[1]||C!==V[2]||K!==V[3])r.blendFuncSeparate(t,I,C,K),V[0]=t,V[1]=I,V[2]=C,V[3]=K;t=aa.depth_enable;t!==h.depth_enable&&(t?r.enable(2929):r.disable(2929),h.depth_enable=t);t=aa.depth_func;
t!==h.depth_func&&(r.depthFunc(t),h.depth_func=t);t=ia[0];I=ia[1];if(t!==Y[0]||I!==Y[1])r.depthRange(t,I),Y[0]=t,Y[1]=I;t=aa.depth_mask;t!==h.depth_mask&&(r.depthMask(t),h.depth_mask=t);t=B[0];I=B[1];C=B[2];K=B[3];if(t!==qa[0]||I!==qa[1]||C!==qa[2]||K!==qa[3])r.colorMask(t,I,C,K),qa[0]=t,qa[1]=I,qa[2]=C,qa[3]=K;t=aa.cull_enable;t!==h.cull_enable&&(t?r.enable(2884):r.disable(2884),h.cull_enable=t);t=aa.cull_face;t!==h.cull_face&&(r.cullFace(t),h.cull_face=t);t=aa.frontFace;t!==h.frontFace&&(r.frontFace(t),
h.frontFace=t);t=aa.lineWidth;t!==h.lineWidth&&(r.lineWidth(t),h.lineWidth=t);t=aa.polygonOffset_enable;t!==h.polygonOffset_enable&&(t?r.enable(32823):r.disable(32823),h.polygonOffset_enable=t);t=ea[0];I=ea[1];if(t!==R[0]||I!==R[1])r.polygonOffset(t,I),R[0]=t,R[1]=I;t=aa.sample_alpha;t!==h.sample_alpha&&(t?r.enable(32926):r.disable(32926),h.sample_alpha=t);t=aa.sample_enable;t!==h.sample_enable&&(t?r.enable(32928):r.disable(32928),h.sample_enable=t);t=T[0];I=T[1];if(t!==z[0]||I!==z[1])r.sampleCoverage(t,
I),z[0]=t,z[1]=I;t=aa.stencil_enable;t!==h.stencil_enable&&(t?r.enable(2960):r.disable(2960),h.stencil_enable=t);t=aa.stencil_mask;t!==h.stencil_mask&&(r.stencilMask(t),h.stencil_mask=t);t=N[0];I=N[1];C=N[2];if(t!==wa[0]||I!==wa[1]||C!==wa[2])r.stencilFunc(t,I,C),wa[0]=t,wa[1]=I,wa[2]=C;t=G[0];I=G[1];C=G[2];K=G[3];if(t!==ba[0]||I!==ba[1]||C!==ba[2]||K!==ba[3])r.stencilOpSeparate(t,I,C,K),ba[0]=t,ba[1]=I,ba[2]=C,ba[3]=K;t=na[0];I=na[1];C=na[2];K=na[3];if(t!==n[0]||I!==n[1]||C!==n[2]||K!==n[3])r.stencilOpSeparate(t,
I,C,K),n[0]=t,n[1]=I,n[2]=C,n[3]=K;t=aa.scissor_enable;t!==h.scissor_enable&&(t?r.enable(3089):r.disable(3089),h.scissor_enable=t);t=l[0];I=l[1];C=l[2];K=l[3];if(t!==O[0]||I!==O[1]||C!==O[2]||K!==O[3])r.scissor(t,I,C,K),O[0]=t,O[1]=I,O[2]=C,O[3]=K;t=S[0];I=S[1];C=S[2];K=S[3];if(t!==la[0]||I!==la[1]||C!==la[2]||K!==la[3])r.viewport(t,I,C,K),la[0]=t,la[1]=I,la[2]=C,la[3]=K;h.dirty=!1}if(t=h.profile)p=performance.now(),J.count+=a;I=k.program(k.vert,k.frag,F);r.useProgram(I.program);W.setVAO(null);C=
I.id;(K=Ca[C])||(K=Ca[C]=ga(I));K.call(this,e,a);W.setVAO(null);c.center=f;c.distance=g;c.eye=q;c.phi=m;c.projection=w;c.theta=A;c.up=x;c.view=v;t&&(J.cpuTime+=performance.now()-p)}}},"$27,position,projection,tex,uv,view":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P){var b,V,B,qa,ia,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma,cc,Ta,v,p,I,ua,va,Aa,Gb;b=a.attributes;V=a.context;B=a.current;qa=a.draw;ia=a.framebuffer;Y=a.gl;ea=a.isArrayLike;R=a.next;
T=a.shader;z=a.uniforms;l=a.vao;O=R.blend_color;N=B.blend_color;wa=R.blend_equation;na=B.blend_equation;n=R.blend_func;G=B.blend_func;ba=R.colorMask;S=B.colorMask;la=R.depth_range;pa=B.depth_range;Ca=R.polygonOffset_offset;Ba=B.polygonOffset_offset;fa=R.sample_coverage;Ea=B.sample_coverage;ja=R.scissor_box;oa=B.scissor_box;ya=R.stencil_func;Ma=B.stencil_func;ma=R.stencil_opBack;cc=B.stencil_opBack;Ta=R.stencil_opFront;v=B.stencil_opFront;p=R.viewport;I=B.viewport;ua=new Float32Array(16);va=new Float32Array(16);
Aa=new Float32Array(16);Gb=new Float32Array(16);return{draw:function(c){var a,h,k,r;a=ia.next;a!==ia.cur&&(a?Y.bindFramebuffer(36160,a.framebuffer):Y.bindFramebuffer(36160,null),ia.cur=a);if(B.dirty){var t;a=R.dither;a!==B.dither&&(a?Y.enable(3024):Y.disable(3024),B.dither=a);a=R.blend_enable;a!==B.blend_enable&&(a?Y.enable(3042):Y.disable(3042),B.blend_enable=a);a=O[0];k=O[1];r=O[2];t=O[3];if(a!==N[0]||k!==N[1]||r!==N[2]||t!==N[3])Y.blendColor(a,k,r,t),N[0]=a,N[1]=k,N[2]=r,N[3]=t;a=wa[0];k=wa[1];
if(a!==na[0]||k!==na[1])Y.blendEquationSeparate(a,k),na[0]=a,na[1]=k;a=n[0];k=n[1];r=n[2];t=n[3];if(a!==G[0]||k!==G[1]||r!==G[2]||t!==G[3])Y.blendFuncSeparate(a,k,r,t),G[0]=a,G[1]=k,G[2]=r,G[3]=t;a=R.depth_enable;a!==B.depth_enable&&(a?Y.enable(2929):Y.disable(2929),B.depth_enable=a);a=R.depth_func;a!==B.depth_func&&(Y.depthFunc(a),B.depth_func=a);a=la[0];k=la[1];if(a!==pa[0]||k!==pa[1])Y.depthRange(a,k),pa[0]=a,pa[1]=k;a=R.depth_mask;a!==B.depth_mask&&(Y.depthMask(a),B.depth_mask=a);a=ba[0];k=ba[1];
r=ba[2];t=ba[3];if(a!==S[0]||k!==S[1]||r!==S[2]||t!==S[3])Y.colorMask(a,k,r,t),S[0]=a,S[1]=k,S[2]=r,S[3]=t;a=R.cull_enable;a!==B.cull_enable&&(a?Y.enable(2884):Y.disable(2884),B.cull_enable=a);a=R.cull_face;a!==B.cull_face&&(Y.cullFace(a),B.cull_face=a);a=R.frontFace;a!==B.frontFace&&(Y.frontFace(a),B.frontFace=a);a=R.lineWidth;a!==B.lineWidth&&(Y.lineWidth(a),B.lineWidth=a);a=R.polygonOffset_enable;a!==B.polygonOffset_enable&&(a?Y.enable(32823):Y.disable(32823),B.polygonOffset_enable=a);a=Ca[0];
k=Ca[1];if(a!==Ba[0]||k!==Ba[1])Y.polygonOffset(a,k),Ba[0]=a,Ba[1]=k;a=R.sample_alpha;a!==B.sample_alpha&&(a?Y.enable(32926):Y.disable(32926),B.sample_alpha=a);a=R.sample_enable;a!==B.sample_enable&&(a?Y.enable(32928):Y.disable(32928),B.sample_enable=a);a=fa[0];k=fa[1];if(a!==Ea[0]||k!==Ea[1])Y.sampleCoverage(a,k),Ea[0]=a,Ea[1]=k;a=R.stencil_enable;a!==B.stencil_enable&&(a?Y.enable(2960):Y.disable(2960),B.stencil_enable=a);a=R.stencil_mask;a!==B.stencil_mask&&(Y.stencilMask(a),B.stencil_mask=a);a=
ya[0];k=ya[1];r=ya[2];if(a!==Ma[0]||k!==Ma[1]||r!==Ma[2])Y.stencilFunc(a,k,r),Ma[0]=a,Ma[1]=k,Ma[2]=r;a=Ta[0];k=Ta[1];r=Ta[2];t=Ta[3];if(a!==v[0]||k!==v[1]||r!==v[2]||t!==v[3])Y.stencilOpSeparate(a,k,r,t),v[0]=a,v[1]=k,v[2]=r,v[3]=t;a=ma[0];k=ma[1];r=ma[2];t=ma[3];if(a!==cc[0]||k!==cc[1]||r!==cc[2]||t!==cc[3])Y.stencilOpSeparate(a,k,r,t),cc[0]=a,cc[1]=k,cc[2]=r,cc[3]=t;a=R.scissor_enable;a!==B.scissor_enable&&(a?Y.enable(3089):Y.disable(3089),B.scissor_enable=a);a=ja[0];k=ja[1];r=ja[2];t=ja[3];if(a!==
oa[0]||k!==oa[1]||r!==oa[2]||t!==oa[3])Y.scissor(a,k,r,t),oa[0]=a,oa[1]=k,oa[2]=r,oa[3]=t;a=p[0];k=p[1];r=p[2];t=p[3];if(a!==I[0]||k!==I[1]||r!==I[2]||t!==I[3])Y.viewport(a,k,r,t),I[0]=a,I[1]=k,I[2]=r,I[3]=t;B.dirty=!1}if(a=B.profile)h=performance.now(),J.count++;Y.useProgram(g.program);l.setVAO(null);k=W.location;r=b[k];r.buffer||Y.enableVertexAttribArray(k);if(r.type!==f.dtype||3!==r.size||r.buffer!==f||!1!==r.normalized||0!==r.offset||0!==r.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(k,
3,f.dtype,!1,0,0),r.type=f.dtype,r.size=3,r.buffer=f,r.normalized=!1,r.offset=0,r.stride=0;k=d.location;r=b[k];r.buffer||Y.enableVertexAttribArray(k);if(r.type!==q.dtype||2!==r.size||r.buffer!==q||!1!==r.normalized||0!==r.offset||0!==r.stride)Y.bindBuffer(34962,q.buffer),Y.vertexAttribPointer(k,2,q.dtype,!1,0,0),r.type=q.dtype,r.size=2,r.buffer=q,r.normalized=!1,r.offset=0,r.stride=0;k=e.call(this,V,c,0);ea(k)&&16===k.length||X.commandRaise(x,F);Y.uniformMatrix4fv(E.location,!1,Array.isArray(k)||
k instanceof Float32Array?k:(ua[0]=k[0],ua[1]=k[1],ua[2]=k[2],ua[3]=k[3],ua[4]=k[4],ua[5]=k[5],ua[6]=k[6],ua[7]=k[7],ua[8]=k[8],ua[9]=k[9],ua[10]=k[10],ua[11]=k[11],ua[12]=k[12],ua[13]=k[13],ua[14]=k[14],ua[15]=k[15],ua));k=C.call(this,V,c,0);ea(k)&&16===k.length||X.commandRaise(L,F);Y.uniformMatrix4fv(P.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(va[0]=k[0],va[1]=k[1],va[2]=k[2],va[3]=k[3],va[4]=k[4],va[5]=k[5],va[6]=k[6],va[7]=k[7],va[8]=k[8],va[9]=k[9],va[10]=k[10],va[11]=k[11],
va[12]=k[12],va[13]=k[13],va[14]=k[14],va[15]=k[15],va));(c=c.texture)&&"framebuffer"===c._reglType&&(c=c.color[0]);"function"===typeof c&&"texture2d"===c._reglType||X.commandRaise(K,F);c=c._texture;Y.uniform1i(D.location,c.bind());A&&Y.bindBuffer(34963,A.buffer.buffer);k=A.primType;r=A.vertCount-0;0<=r||X.commandRaise(m,F);r&&(Y.drawElements(k,r,A.type,0<<(A.type-5121>>1)),l.setVAO(null),a&&(J.cpuTime+=performance.now()-h),c.unbind())},scope:function(b,c,d){var a,e,h,k,l,p,n,g,v,r,I,m,w,D,E,A,x,
S,C,G,fa,K,M,N,O,P,L,R,pa,cc,ma,Ba,ga,W,aa;if(a=B.profile)e=performance.now(),J.count++;h=qa.elements;qa.elements=t;k=qa.offset;qa.offset=0;l=t.vertCount-0;0<=l||X.commandRaise(da,F);p=qa.count;qa.count=l;n=t.primType;l=qa.primitive;qa.primitive=n;g=y.call(this,V,b,d);n=z[3];z[3]=g;v=b.texture;g=z[5];z[5]=v;r=U.call(this,V,b,d);v=z[4];z[4]=r;r=u.buffer;u.buffer=f;I=u.divisor;u.divisor=0;m=u.normalized;u.normalized=!1;w=u.offset;u.offset=0;D=u.size;u.size=0;E=u.state;u.state=1;A=u.stride;u.stride=
0;x=u.type;u.type=f.dtype;S=u.w;u.w=0;C=u.x;u.x=0;G=u.y;u.y=0;fa=u.z;u.z=0;K=Q.buffer;Q.buffer=q;M=Q.divisor;Q.divisor=0;N=Q.normalized;Q.normalized=!1;O=Q.offset;Q.offset=0;P=Q.size;Q.size=0;L=Q.state;Q.state=1;R=Q.stride;Q.stride=0;pa=Q.type;Q.type=q.dtype;cc=Q.w;Q.w=0;ma=Q.x;Q.x=0;Ba=Q.y;Q.y=0;ga=Q.z;Q.z=0;W=T.vert;T.vert=2;aa=T.frag;T.frag=1;c(V,b,d);a&&(J.cpuTime+=performance.now()-e);qa.elements=h;qa.offset=k;qa.count=p;qa.primitive=l;z[3]=n;z[5]=g;z[4]=v;u.buffer=r;u.divisor=I;u.normalized=
m;u.offset=w;u.size=D;u.state=E;u.stride=A;u.type=x;u.w=S;u.x=C;u.y=G;u.z=fa;Q.buffer=K;Q.divisor=M;Q.normalized=N;Q.offset=O;Q.size=P;Q.state=L;Q.stride=R;Q.type=pa;Q.w=cc;Q.x=ma;Q.y=Ba;Q.z=ga;T.vert=W;T.frag=aa},batch:function(a,e){var g,t,m,y;g=ia.next;g!==ia.cur&&(g?Y.bindFramebuffer(36160,g.framebuffer):Y.bindFramebuffer(36160,null),ia.cur=g);if(B.dirty){var u,z,A;g=R.dither;g!==B.dither&&(g?Y.enable(3024):Y.disable(3024),B.dither=g);g=R.blend_enable;g!==B.blend_enable&&(g?Y.enable(3042):Y.disable(3042),
B.blend_enable=g);g=O[0];u=O[1];z=O[2];A=O[3];if(g!==N[0]||u!==N[1]||z!==N[2]||A!==N[3])Y.blendColor(g,u,z,A),N[0]=g,N[1]=u,N[2]=z,N[3]=A;g=wa[0];u=wa[1];if(g!==na[0]||u!==na[1])Y.blendEquationSeparate(g,u),na[0]=g,na[1]=u;g=n[0];u=n[1];z=n[2];A=n[3];if(g!==G[0]||u!==G[1]||z!==G[2]||A!==G[3])Y.blendFuncSeparate(g,u,z,A),G[0]=g,G[1]=u,G[2]=z,G[3]=A;g=R.depth_enable;g!==B.depth_enable&&(g?Y.enable(2929):Y.disable(2929),B.depth_enable=g);g=R.depth_func;g!==B.depth_func&&(Y.depthFunc(g),B.depth_func=
g);g=la[0];u=la[1];if(g!==pa[0]||u!==pa[1])Y.depthRange(g,u),pa[0]=g,pa[1]=u;g=R.depth_mask;g!==B.depth_mask&&(Y.depthMask(g),B.depth_mask=g);g=ba[0];u=ba[1];z=ba[2];A=ba[3];if(g!==S[0]||u!==S[1]||z!==S[2]||A!==S[3])Y.colorMask(g,u,z,A),S[0]=g,S[1]=u,S[2]=z,S[3]=A;g=R.cull_enable;g!==B.cull_enable&&(g?Y.enable(2884):Y.disable(2884),B.cull_enable=g);g=R.cull_face;g!==B.cull_face&&(Y.cullFace(g),B.cull_face=g);g=R.frontFace;g!==B.frontFace&&(Y.frontFace(g),B.frontFace=g);g=R.lineWidth;g!==B.lineWidth&&
(Y.lineWidth(g),B.lineWidth=g);g=R.polygonOffset_enable;g!==B.polygonOffset_enable&&(g?Y.enable(32823):Y.disable(32823),B.polygonOffset_enable=g);g=Ca[0];u=Ca[1];if(g!==Ba[0]||u!==Ba[1])Y.polygonOffset(g,u),Ba[0]=g,Ba[1]=u;g=R.sample_alpha;g!==B.sample_alpha&&(g?Y.enable(32926):Y.disable(32926),B.sample_alpha=g);g=R.sample_enable;g!==B.sample_enable&&(g?Y.enable(32928):Y.disable(32928),B.sample_enable=g);g=fa[0];u=fa[1];if(g!==Ea[0]||u!==Ea[1])Y.sampleCoverage(g,u),Ea[0]=g,Ea[1]=u;g=R.stencil_enable;
g!==B.stencil_enable&&(g?Y.enable(2960):Y.disable(2960),B.stencil_enable=g);g=R.stencil_mask;g!==B.stencil_mask&&(Y.stencilMask(g),B.stencil_mask=g);g=ya[0];u=ya[1];z=ya[2];if(g!==Ma[0]||u!==Ma[1]||z!==Ma[2])Y.stencilFunc(g,u,z),Ma[0]=g,Ma[1]=u,Ma[2]=z;g=Ta[0];u=Ta[1];z=Ta[2];A=Ta[3];if(g!==v[0]||u!==v[1]||z!==v[2]||A!==v[3])Y.stencilOpSeparate(g,u,z,A),v[0]=g,v[1]=u,v[2]=z,v[3]=A;g=ma[0];u=ma[1];z=ma[2];A=ma[3];if(g!==cc[0]||u!==cc[1]||z!==cc[2]||A!==cc[3])Y.stencilOpSeparate(g,u,z,A),cc[0]=g,cc[1]=
u,cc[2]=z,cc[3]=A;g=R.scissor_enable;g!==B.scissor_enable&&(g?Y.enable(3089):Y.disable(3089),B.scissor_enable=g);g=ja[0];u=ja[1];z=ja[2];A=ja[3];if(g!==oa[0]||u!==oa[1]||z!==oa[2]||A!==oa[3])Y.scissor(g,u,z,A),oa[0]=g,oa[1]=u,oa[2]=z,oa[3]=A;g=p[0];u=p[1];z=p[2];A=p[3];if(g!==I[0]||u!==I[1]||z!==I[2]||A!==I[3])Y.viewport(g,u,z,A),I[0]=g,I[1]=u,I[2]=z,I[3]=A;B.dirty=!1}if(g=B.profile)t=performance.now(),J.count+=e;Y.useProgram(ga.program);l.setVAO(null);u=W.location;z=b[u];z.buffer||Y.enableVertexAttribArray(u);
if(z.type!==f.dtype||3!==z.size||z.buffer!==f||!1!==z.normalized||0!==z.offset||0!==z.stride)Y.bindBuffer(34962,f.buffer),Y.vertexAttribPointer(u,3,f.dtype,!1,0,0),z.type=f.dtype,z.size=3,z.buffer=f,z.normalized=!1,z.offset=0,z.stride=0;u=d.location;z=b[u];z.buffer||Y.enableVertexAttribArray(u);if(z.type!==q.dtype||2!==z.size||z.buffer!==q||!1!==z.normalized||0!==z.offset||0!==z.stride)Y.bindBuffer(34962,q.buffer),Y.vertexAttribPointer(u,2,q.dtype,!1,0,0),z.type=q.dtype,z.size=2,z.buffer=q,z.normalized=
!1,z.offset=0,z.stride=0;u=c.call(this,V,y,m);ea(u)&&16===u.length||X.commandRaise(h,F);Y.uniformMatrix4fv(E.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(Aa[0]=u[0],Aa[1]=u[1],Aa[2]=u[2],Aa[3]=u[3],Aa[4]=u[4],Aa[5]=u[5],Aa[6]=u[6],Aa[7]=u[7],Aa[8]=u[8],Aa[9]=u[9],Aa[10]=u[10],Aa[11]=u[11],Aa[12]=u[12],Aa[13]=u[13],Aa[14]=u[14],Aa[15]=u[15],Aa));m=M.call(this,V,y,m);ea(m)&&16===m.length||X.commandRaise(r,F);Y.uniformMatrix4fv(P.location,!1,Array.isArray(m)||m instanceof Float32Array?
m:(Gb[0]=m[0],Gb[1]=m[1],Gb[2]=m[2],Gb[3]=m[3],Gb[4]=m[4],Gb[5]=m[5],Gb[6]=m[6],Gb[7]=m[7],Gb[8]=m[8],Gb[9]=m[9],Gb[10]=m[10],Gb[11]=m[11],Gb[12]=m[12],Gb[13]=m[13],Gb[14]=m[14],Gb[15]=m[15],Gb));k&&Y.bindBuffer(34963,k.buffer.buffer);u=k.primType;z=k.vertCount-0;0<=z||X.commandRaise(w,F);for(m=0;m<e;++m)y=a[m],(y=y.texture)&&"framebuffer"===y._reglType&&(y=y.color[0]),"function"===typeof y&&"texture2d"===y._reglType||X.commandRaise(aa,F),y=y._texture,Y.uniform1i(D.location,y.bind()),z&&(Y.drawElements(u,
z,k.type,0<<(k.type-5121>>1)),y.unbind());l.setVAO(null);g&&(J.cpuTime+=performance.now()-t)}}},"$19,normal,position,projection,view":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M){var r,aa,k,w,W,E,D,d,P,b,V,B,qa,ia,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya,Ma,ma;r=a.attributes;aa=a.context;k=a.current;w=a.draw;W=a.framebuffer;E=a.gl;D=a.isArrayLike;d=a.next;P=a.shader;b=a.uniforms;V=a.vao;B=d.blend_color;qa=k.blend_color;ia=d.blend_equation;Y=k.blend_equation;ea=d.blend_func;
R=k.blend_func;T=d.colorMask;z=k.colorMask;l=d.depth_range;O=k.depth_range;N=d.polygonOffset_offset;wa=k.polygonOffset_offset;na=d.sample_coverage;n=k.sample_coverage;G=d.scissor_box;ba=k.scissor_box;S=d.stencil_func;la=k.stencil_func;pa=d.stencil_opBack;Ca=k.stencil_opBack;Ba=d.stencil_opFront;fa=k.stencil_opFront;Ea=d.viewport;ja=k.viewport;oa=new Float32Array(16);ya=new Float32Array(16);Ma=new Float32Array(16);ma=new Float32Array(16);return{draw:function(a){var u,v,p;a=W.next;a!==W.cur&&(a?E.bindFramebuffer(36160,
a.framebuffer):E.bindFramebuffer(36160,null),W.cur=a);if(k.dirty){var m;a=d.dither;a!==k.dither&&(a?E.enable(3024):E.disable(3024),k.dither=a);a=d.blend_enable;a!==k.blend_enable&&(a?E.enable(3042):E.disable(3042),k.blend_enable=a);a=B[0];v=B[1];p=B[2];m=B[3];if(a!==qa[0]||v!==qa[1]||p!==qa[2]||m!==qa[3])E.blendColor(a,v,p,m),qa[0]=a,qa[1]=v,qa[2]=p,qa[3]=m;a=ia[0];v=ia[1];if(a!==Y[0]||v!==Y[1])E.blendEquationSeparate(a,v),Y[0]=a,Y[1]=v;a=ea[0];v=ea[1];p=ea[2];m=ea[3];if(a!==R[0]||v!==R[1]||p!==R[2]||
m!==R[3])E.blendFuncSeparate(a,v,p,m),R[0]=a,R[1]=v,R[2]=p,R[3]=m;a=d.depth_enable;a!==k.depth_enable&&(a?E.enable(2929):E.disable(2929),k.depth_enable=a);a=d.depth_func;a!==k.depth_func&&(E.depthFunc(a),k.depth_func=a);a=l[0];v=l[1];if(a!==O[0]||v!==O[1])E.depthRange(a,v),O[0]=a,O[1]=v;a=d.depth_mask;a!==k.depth_mask&&(E.depthMask(a),k.depth_mask=a);a=T[0];v=T[1];p=T[2];m=T[3];if(a!==z[0]||v!==z[1]||p!==z[2]||m!==z[3])E.colorMask(a,v,p,m),z[0]=a,z[1]=v,z[2]=p,z[3]=m;a=d.cull_enable;a!==k.cull_enable&&
(a?E.enable(2884):E.disable(2884),k.cull_enable=a);a=d.cull_face;a!==k.cull_face&&(E.cullFace(a),k.cull_face=a);a=d.frontFace;a!==k.frontFace&&(E.frontFace(a),k.frontFace=a);a=d.lineWidth;a!==k.lineWidth&&(E.lineWidth(a),k.lineWidth=a);a=d.polygonOffset_enable;a!==k.polygonOffset_enable&&(a?E.enable(32823):E.disable(32823),k.polygonOffset_enable=a);a=N[0];v=N[1];if(a!==wa[0]||v!==wa[1])E.polygonOffset(a,v),wa[0]=a,wa[1]=v;a=d.sample_alpha;a!==k.sample_alpha&&(a?E.enable(32926):E.disable(32926),k.sample_alpha=
a);a=d.sample_enable;a!==k.sample_enable&&(a?E.enable(32928):E.disable(32928),k.sample_enable=a);a=na[0];v=na[1];if(a!==n[0]||v!==n[1])E.sampleCoverage(a,v),n[0]=a,n[1]=v;a=d.stencil_enable;a!==k.stencil_enable&&(a?E.enable(2960):E.disable(2960),k.stencil_enable=a);a=d.stencil_mask;a!==k.stencil_mask&&(E.stencilMask(a),k.stencil_mask=a);a=S[0];v=S[1];p=S[2];if(a!==la[0]||v!==la[1]||p!==la[2])E.stencilFunc(a,v,p),la[0]=a,la[1]=v,la[2]=p;a=Ba[0];v=Ba[1];p=Ba[2];m=Ba[3];if(a!==fa[0]||v!==fa[1]||p!==
fa[2]||m!==fa[3])E.stencilOpSeparate(a,v,p,m),fa[0]=a,fa[1]=v,fa[2]=p,fa[3]=m;a=pa[0];v=pa[1];p=pa[2];m=pa[3];if(a!==Ca[0]||v!==Ca[1]||p!==Ca[2]||m!==Ca[3])E.stencilOpSeparate(a,v,p,m),Ca[0]=a,Ca[1]=v,Ca[2]=p,Ca[3]=m;a=d.scissor_enable;a!==k.scissor_enable&&(a?E.enable(3089):E.disable(3089),k.scissor_enable=a);a=G[0];v=G[1];p=G[2];m=G[3];if(a!==ba[0]||v!==ba[1]||p!==ba[2]||m!==ba[3])E.scissor(a,v,p,m),ba[0]=a,ba[1]=v,ba[2]=p,ba[3]=m;a=Ea[0];v=Ea[1];p=Ea[2];m=Ea[3];if(a!==ja[0]||v!==ja[1]||p!==ja[2]||
m!==ja[3])E.viewport(a,v,p,m),ja[0]=a,ja[1]=v,ja[2]=p,ja[3]=m;k.dirty=!1}if(a=k.profile)u=performance.now(),J.count++;E.useProgram(g.program);V.setVAO(null);v=c.location;p=r[v];p.buffer||E.enableVertexAttribArray(v);if(p.type!==f.dtype||3!==p.size||p.buffer!==f||!1!==p.normalized||0!==p.offset||0!==p.stride)E.bindBuffer(34962,f.buffer),E.vertexAttribPointer(v,3,f.dtype,!1,0,0),p.type=f.dtype,p.size=3,p.buffer=f,p.normalized=!1,p.offset=0,p.stride=0;v=ga.location;p=r[v];p.buffer||E.enableVertexAttribArray(v);
if(p.type!==q.dtype||3!==p.size||p.buffer!==q||!1!==p.normalized||0!==p.offset||0!==p.stride)E.bindBuffer(34962,q.buffer),E.vertexAttribPointer(v,3,q.dtype,!1,0,0),p.type=q.dtype,p.size=3,p.buffer=q,p.normalized=!1,p.offset=0,p.stride=0;v=b[5];D(v)&&16===v.length||X.commandRaise(e,F);E.uniformMatrix4fv(h.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(oa[0]=v[0],oa[1]=v[1],oa[2]=v[2],oa[3]=v[3],oa[4]=v[4],oa[5]=v[5],oa[6]=v[6],oa[7]=v[7],oa[8]=v[8],oa[9]=v[9],oa[10]=v[10],oa[11]=v[11],
oa[12]=v[12],oa[13]=v[13],oa[14]=v[14],oa[15]=v[15],oa));v=b[8];D(v)&&16===v.length||X.commandRaise(x,F);E.uniformMatrix4fv(M.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(ya[0]=v[0],ya[1]=v[1],ya[2]=v[2],ya[3]=v[3],ya[4]=v[4],ya[5]=v[5],ya[6]=v[6],ya[7]=v[7],ya[8]=v[8],ya[9]=v[9],ya[10]=v[10],ya[11]=v[11],ya[12]=v[12],ya[13]=v[13],ya[14]=v[14],ya[15]=v[15],ya));C&&E.bindBuffer(34963,C.buffer.buffer);v=C.primType;p=C.vertCount-0;0<=p||X.commandRaise(L,F);p&&(E.drawElements(v,p,C.type,
0<<(C.type-5121>>1)),V.setVAO(null),a&&(J.cpuTime+=performance.now()-u))},scope:function(b,a,c){var d,e,h,l,g,n,r,u,y,z,B,D,E,x,S,C,G,fa,M,N,O,L,Q,R,T,U,pa,ma,Ba,ga,W,Y;if(d=k.profile)e=performance.now(),J.count++;h=w.elements;w.elements=K;l=w.offset;w.offset=0;g=K.vertCount-0;0<=g||X.commandRaise(A,F);n=w.count;w.count=g;r=K.primType;g=w.primitive;w.primitive=r;r=m.buffer;m.buffer=q;u=m.divisor;m.divisor=0;y=m.normalized;m.normalized=!1;z=m.offset;m.offset=0;B=m.size;m.size=0;D=m.state;m.state=1;
E=m.stride;m.stride=0;x=m.type;m.type=q.dtype;S=m.w;m.w=0;C=m.x;m.x=0;G=m.y;m.y=0;fa=m.z;m.z=0;M=t.buffer;t.buffer=f;N=t.divisor;t.divisor=0;O=t.normalized;t.normalized=!1;L=t.offset;t.offset=0;Q=t.size;t.size=0;R=t.state;t.state=1;T=t.stride;t.stride=0;U=t.type;t.type=f.dtype;pa=t.w;t.w=0;ma=t.x;t.x=0;Ba=t.y;t.y=0;ga=t.z;t.z=0;W=P.vert;P.vert=10;Y=P.frag;P.frag=9;a(aa,b,c);d&&(J.cpuTime+=performance.now()-e);w.elements=h;w.offset=l;w.count=n;w.primitive=g;m.buffer=r;m.divisor=u;m.normalized=y;m.offset=
z;m.size=B;m.state=D;m.stride=E;m.type=x;m.w=S;m.x=C;m.y=G;m.z=fa;t.buffer=M;t.divisor=N;t.normalized=O;t.offset=L;t.size=Q;t.state=R;t.stride=T;t.type=U;t.w=pa;t.x=ma;t.y=Ba;t.z=ga;P.vert=W;P.frag=Y},batch:function(a,e){var g,p,m;g=W.next;g!==W.cur&&(g?E.bindFramebuffer(36160,g.framebuffer):E.bindFramebuffer(36160,null),W.cur=g);if(k.dirty){var t,w;g=d.dither;g!==k.dither&&(g?E.enable(3024):E.disable(3024),k.dither=g);g=d.blend_enable;g!==k.blend_enable&&(g?E.enable(3042):E.disable(3042),k.blend_enable=
g);g=B[0];m=B[1];t=B[2];w=B[3];if(g!==qa[0]||m!==qa[1]||t!==qa[2]||w!==qa[3])E.blendColor(g,m,t,w),qa[0]=g,qa[1]=m,qa[2]=t,qa[3]=w;g=ia[0];m=ia[1];if(g!==Y[0]||m!==Y[1])E.blendEquationSeparate(g,m),Y[0]=g,Y[1]=m;g=ea[0];m=ea[1];t=ea[2];w=ea[3];if(g!==R[0]||m!==R[1]||t!==R[2]||w!==R[3])E.blendFuncSeparate(g,m,t,w),R[0]=g,R[1]=m,R[2]=t,R[3]=w;g=d.depth_enable;g!==k.depth_enable&&(g?E.enable(2929):E.disable(2929),k.depth_enable=g);g=d.depth_func;g!==k.depth_func&&(E.depthFunc(g),k.depth_func=g);g=l[0];
m=l[1];if(g!==O[0]||m!==O[1])E.depthRange(g,m),O[0]=g,O[1]=m;g=d.depth_mask;g!==k.depth_mask&&(E.depthMask(g),k.depth_mask=g);g=T[0];m=T[1];t=T[2];w=T[3];if(g!==z[0]||m!==z[1]||t!==z[2]||w!==z[3])E.colorMask(g,m,t,w),z[0]=g,z[1]=m,z[2]=t,z[3]=w;g=d.cull_enable;g!==k.cull_enable&&(g?E.enable(2884):E.disable(2884),k.cull_enable=g);g=d.cull_face;g!==k.cull_face&&(E.cullFace(g),k.cull_face=g);g=d.frontFace;g!==k.frontFace&&(E.frontFace(g),k.frontFace=g);g=d.lineWidth;g!==k.lineWidth&&(E.lineWidth(g),
k.lineWidth=g);g=d.polygonOffset_enable;g!==k.polygonOffset_enable&&(g?E.enable(32823):E.disable(32823),k.polygonOffset_enable=g);g=N[0];m=N[1];if(g!==wa[0]||m!==wa[1])E.polygonOffset(g,m),wa[0]=g,wa[1]=m;g=d.sample_alpha;g!==k.sample_alpha&&(g?E.enable(32926):E.disable(32926),k.sample_alpha=g);g=d.sample_enable;g!==k.sample_enable&&(g?E.enable(32928):E.disable(32928),k.sample_enable=g);g=na[0];m=na[1];if(g!==n[0]||m!==n[1])E.sampleCoverage(g,m),n[0]=g,n[1]=m;g=d.stencil_enable;g!==k.stencil_enable&&
(g?E.enable(2960):E.disable(2960),k.stencil_enable=g);g=d.stencil_mask;g!==k.stencil_mask&&(E.stencilMask(g),k.stencil_mask=g);g=S[0];m=S[1];t=S[2];if(g!==la[0]||m!==la[1]||t!==la[2])E.stencilFunc(g,m,t),la[0]=g,la[1]=m,la[2]=t;g=Ba[0];m=Ba[1];t=Ba[2];w=Ba[3];if(g!==fa[0]||m!==fa[1]||t!==fa[2]||w!==fa[3])E.stencilOpSeparate(g,m,t,w),fa[0]=g,fa[1]=m,fa[2]=t,fa[3]=w;g=pa[0];m=pa[1];t=pa[2];w=pa[3];if(g!==Ca[0]||m!==Ca[1]||t!==Ca[2]||w!==Ca[3])E.stencilOpSeparate(g,m,t,w),Ca[0]=g,Ca[1]=m,Ca[2]=t,Ca[3]=
w;g=d.scissor_enable;g!==k.scissor_enable&&(g?E.enable(3089):E.disable(3089),k.scissor_enable=g);g=G[0];m=G[1];t=G[2];w=G[3];if(g!==ba[0]||m!==ba[1]||t!==ba[2]||w!==ba[3])E.scissor(g,m,t,w),ba[0]=g,ba[1]=m,ba[2]=t,ba[3]=w;g=Ea[0];m=Ea[1];t=Ea[2];w=Ea[3];if(g!==ja[0]||m!==ja[1]||t!==ja[2]||w!==ja[3])E.viewport(g,m,t,w),ja[0]=g,ja[1]=m,ja[2]=t,ja[3]=w;k.dirty=!1}if(g=k.profile)p=performance.now(),J.count+=e;E.useProgram(da.program);V.setVAO(null);m=c.location;t=r[m];t.buffer||E.enableVertexAttribArray(m);
if(t.type!==f.dtype||3!==t.size||t.buffer!==f||!1!==t.normalized||0!==t.offset||0!==t.stride)E.bindBuffer(34962,f.buffer),E.vertexAttribPointer(m,3,f.dtype,!1,0,0),t.type=f.dtype,t.size=3,t.buffer=f,t.normalized=!1,t.offset=0,t.stride=0;m=ga.location;t=r[m];t.buffer||E.enableVertexAttribArray(m);if(t.type!==q.dtype||3!==t.size||t.buffer!==q||!1!==t.normalized||0!==t.offset||0!==t.stride)E.bindBuffer(34962,q.buffer),E.vertexAttribPointer(m,3,q.dtype,!1,0,0),t.type=q.dtype,t.size=3,t.buffer=q,t.normalized=
!1,t.offset=0,t.stride=0;m=b[5];D(m)&&16===m.length||X.commandRaise(y,F);E.uniformMatrix4fv(h.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(Ma[0]=m[0],Ma[1]=m[1],Ma[2]=m[2],Ma[3]=m[3],Ma[4]=m[4],Ma[5]=m[5],Ma[6]=m[6],Ma[7]=m[7],Ma[8]=m[8],Ma[9]=m[9],Ma[10]=m[10],Ma[11]=m[11],Ma[12]=m[12],Ma[13]=m[13],Ma[14]=m[14],Ma[15]=m[15],Ma));m=b[8];D(m)&&16===m.length||X.commandRaise(U,F);E.uniformMatrix4fv(M.location,!1,Array.isArray(m)||m instanceof Float32Array?m:(ma[0]=m[0],ma[1]=m[1],ma[2]=
m[2],ma[3]=m[3],ma[4]=m[4],ma[5]=m[5],ma[6]=m[6],ma[7]=m[7],ma[8]=m[8],ma[9]=m[9],ma[10]=m[10],ma[11]=m[11],ma[12]=m[12],ma[13]=m[13],ma[14]=m[14],ma[15]=m[15],ma));u&&E.bindBuffer(34963,u.buffer.buffer);t=u.primType;w=u.vertCount-0;0<=w||X.commandRaise(Q,F);for(m=0;m<e;++m)w&&E.drawElements(t,w,u.type,0<<(u.type-5121>>1));V.setVAO(null);g&&(J.cpuTime+=performance.now()-p)}}},"$14,angle,color,position":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U){var u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,V,B,ia,Aa,
Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa;u=a.attributes;Q=a.context;ga=a.current;c=a.draw;h=a.elements;M=a.framebuffer;r=a.gl;aa=a.isArrayLike;k=a.next;w=a.shader;W=a.uniforms;E=a.vao;D=k.blend_color;d=ga.blend_color;P=k.blend_equation;b=ga.blend_equation;V=k.blend_func;B=ga.blend_func;ia=k.colorMask;Aa=ga.colorMask;Y=k.depth_range;ea=ga.depth_range;R=k.polygonOffset_offset;T=ga.polygonOffset_offset;z=k.sample_coverage;l=ga.sample_coverage;O=k.scissor_box;N=ga.scissor_box;wa=k.stencil_func;na=ga.stencil_func;
n=k.stencil_opBack;G=ga.stencil_opBack;ba=k.stencil_opFront;S=ga.stencil_opFront;la=k.viewport;pa=ga.viewport;return{draw:function(a){var m,t,w,A;m=M.next;m!==M.cur&&(m?r.bindFramebuffer(36160,m.framebuffer):r.bindFramebuffer(36160,null),M.cur=m);if(ga.dirty){var C;m=k.dither;m!==ga.dither&&(m?r.enable(3024):r.disable(3024),ga.dither=m);m=k.blend_enable;m!==ga.blend_enable&&(m?r.enable(3042):r.disable(3042),ga.blend_enable=m);m=D[0];w=D[1];A=D[2];C=D[3];if(m!==d[0]||w!==d[1]||A!==d[2]||C!==d[3])r.blendColor(m,
w,A,C),d[0]=m,d[1]=w,d[2]=A,d[3]=C;m=P[0];w=P[1];if(m!==b[0]||w!==b[1])r.blendEquationSeparate(m,w),b[0]=m,b[1]=w;m=V[0];w=V[1];A=V[2];C=V[3];if(m!==B[0]||w!==B[1]||A!==B[2]||C!==B[3])r.blendFuncSeparate(m,w,A,C),B[0]=m,B[1]=w,B[2]=A,B[3]=C;m=k.depth_func;m!==ga.depth_func&&(r.depthFunc(m),ga.depth_func=m);m=Y[0];w=Y[1];if(m!==ea[0]||w!==ea[1])r.depthRange(m,w),ea[0]=m,ea[1]=w;m=k.depth_mask;m!==ga.depth_mask&&(r.depthMask(m),ga.depth_mask=m);m=ia[0];w=ia[1];A=ia[2];C=ia[3];if(m!==Aa[0]||w!==Aa[1]||
A!==Aa[2]||C!==Aa[3])r.colorMask(m,w,A,C),Aa[0]=m,Aa[1]=w,Aa[2]=A,Aa[3]=C;m=k.cull_enable;m!==ga.cull_enable&&(m?r.enable(2884):r.disable(2884),ga.cull_enable=m);m=k.cull_face;m!==ga.cull_face&&(r.cullFace(m),ga.cull_face=m);m=k.frontFace;m!==ga.frontFace&&(r.frontFace(m),ga.frontFace=m);m=k.lineWidth;m!==ga.lineWidth&&(r.lineWidth(m),ga.lineWidth=m);m=k.polygonOffset_enable;m!==ga.polygonOffset_enable&&(m?r.enable(32823):r.disable(32823),ga.polygonOffset_enable=m);m=R[0];w=R[1];if(m!==T[0]||w!==
T[1])r.polygonOffset(m,w),T[0]=m,T[1]=w;m=k.sample_alpha;m!==ga.sample_alpha&&(m?r.enable(32926):r.disable(32926),ga.sample_alpha=m);m=k.sample_enable;m!==ga.sample_enable&&(m?r.enable(32928):r.disable(32928),ga.sample_enable=m);m=z[0];w=z[1];if(m!==l[0]||w!==l[1])r.sampleCoverage(m,w),l[0]=m,l[1]=w;m=k.stencil_enable;m!==ga.stencil_enable&&(m?r.enable(2960):r.disable(2960),ga.stencil_enable=m);m=k.stencil_mask;m!==ga.stencil_mask&&(r.stencilMask(m),ga.stencil_mask=m);m=wa[0];w=wa[1];A=wa[2];if(m!==
na[0]||w!==na[1]||A!==na[2])r.stencilFunc(m,w,A),na[0]=m,na[1]=w,na[2]=A;m=ba[0];w=ba[1];A=ba[2];C=ba[3];if(m!==S[0]||w!==S[1]||A!==S[2]||C!==S[3])r.stencilOpSeparate(m,w,A,C),S[0]=m,S[1]=w,S[2]=A,S[3]=C;m=n[0];w=n[1];A=n[2];C=n[3];if(m!==G[0]||w!==G[1]||A!==G[2]||C!==G[3])r.stencilOpSeparate(m,w,A,C),G[0]=m,G[1]=w,G[2]=A,G[3]=C;m=k.scissor_enable;m!==ga.scissor_enable&&(m?r.enable(3089):r.disable(3089),ga.scissor_enable=m);m=O[0];w=O[1];A=O[2];C=O[3];if(m!==N[0]||w!==N[1]||A!==N[2]||C!==N[3])r.scissor(m,
w,A,C),N[0]=m,N[1]=w,N[2]=A,N[3]=C;m=la[0];w=la[1];A=la[2];C=la[3];if(m!==pa[0]||w!==pa[1]||A!==pa[2]||C!==pa[3])r.viewport(m,w,A,C),pa[0]=m,pa[1]=w,pa[2]=A,pa[3]=C}r.disable(2929);ga.depth_enable=!1;if(m=ga.profile)t=performance.now(),J.count++;r.useProgram(g.program);E.setVAO(null);w=U.location;A=u[w];A.buffer||r.enableVertexAttribArray(w);if(A.type!==f.dtype||2!==A.size||A.buffer!==f||!1!==A.normalized||0!==A.offset||0!==A.stride)r.bindBuffer(34962,f.buffer),r.vertexAttribPointer(w,2,f.dtype,!1,
0,0),A.type=f.dtype,A.size=2,A.buffer=f,A.normalized=!1,A.offset=0,A.stride=0;w=q.call(this,Q,a,0);"number"!==typeof w&&X.commandRaise(e,F);r.uniform1f(da.location,w);a=a.color;aa(a)&&4===a.length||X.commandRaise(x,F);r.uniform4f(y.location,a[0],a[1],a[2],a[3]);(a=c.elements)?r.bindBuffer(34963,a.buffer.buffer):E.currentVAO&&(a=h.getElements(E.currentVAO.elements))&&r.bindBuffer(34963,a.buffer.buffer);w=c.primitive;A=c.offset;a?r.drawElements(w,3,a.type,A<<(a.type-5121>>1)):r.drawArrays(w,A,3);ga.dirty=
!0;E.setVAO(null);m&&(J.cpuTime+=performance.now()-t)},scope:function(b,a,d){var e,h,g,l,n,m,q,r,v,p,t,u,y,z,B,A,D,E,x,S;e=k.depth_enable;k.depth_enable=!1;if(h=ga.profile)g=performance.now(),J.count++;l=c.count;c.count=3;n=C.call(this,Q,b,d);m=W[3];W[3]=n;q=b.color;n=W[4];W[4]=q;q=L.buffer;L.buffer=f;r=L.divisor;L.divisor=0;v=L.normalized;L.normalized=!1;p=L.offset;L.offset=0;t=L.size;L.size=0;u=L.state;L.state=1;y=L.stride;L.stride=0;z=L.type;L.type=f.dtype;B=L.w;L.w=0;A=L.x;L.x=0;D=L.y;L.y=0;E=
L.z;L.z=0;x=w.vert;w.vert=2;S=w.frag;w.frag=1;ga.dirty=!0;a(Q,b,d);k.depth_enable=e;h&&(J.cpuTime+=performance.now()-g);c.count=l;W[3]=m;W[4]=n;L.buffer=q;L.divisor=r;L.normalized=v;L.offset=p;L.size=t;L.state=u;L.stride=y;L.type=z;L.w=B;L.x=A;L.y=D;L.z=E;w.vert=x;w.frag=S;ga.dirty=!0},batch:function(a,e){var g,q,w,C;g=M.next;g!==M.cur&&(g?r.bindFramebuffer(36160,g.framebuffer):r.bindFramebuffer(36160,null),M.cur=g);if(ga.dirty){var x,L,ma;g=k.dither;g!==ga.dither&&(g?r.enable(3024):r.disable(3024),
ga.dither=g);g=k.blend_enable;g!==ga.blend_enable&&(g?r.enable(3042):r.disable(3042),ga.blend_enable=g);g=D[0];x=D[1];L=D[2];ma=D[3];if(g!==d[0]||x!==d[1]||L!==d[2]||ma!==d[3])r.blendColor(g,x,L,ma),d[0]=g,d[1]=x,d[2]=L,d[3]=ma;g=P[0];x=P[1];if(g!==b[0]||x!==b[1])r.blendEquationSeparate(g,x),b[0]=g,b[1]=x;g=V[0];x=V[1];L=V[2];ma=V[3];if(g!==B[0]||x!==B[1]||L!==B[2]||ma!==B[3])r.blendFuncSeparate(g,x,L,ma),B[0]=g,B[1]=x,B[2]=L,B[3]=ma;g=k.depth_func;g!==ga.depth_func&&(r.depthFunc(g),ga.depth_func=
g);g=Y[0];x=Y[1];if(g!==ea[0]||x!==ea[1])r.depthRange(g,x),ea[0]=g,ea[1]=x;g=k.depth_mask;g!==ga.depth_mask&&(r.depthMask(g),ga.depth_mask=g);g=ia[0];x=ia[1];L=ia[2];ma=ia[3];if(g!==Aa[0]||x!==Aa[1]||L!==Aa[2]||ma!==Aa[3])r.colorMask(g,x,L,ma),Aa[0]=g,Aa[1]=x,Aa[2]=L,Aa[3]=ma;g=k.cull_enable;g!==ga.cull_enable&&(g?r.enable(2884):r.disable(2884),ga.cull_enable=g);g=k.cull_face;g!==ga.cull_face&&(r.cullFace(g),ga.cull_face=g);g=k.frontFace;g!==ga.frontFace&&(r.frontFace(g),ga.frontFace=g);g=k.lineWidth;
g!==ga.lineWidth&&(r.lineWidth(g),ga.lineWidth=g);g=k.polygonOffset_enable;g!==ga.polygonOffset_enable&&(g?r.enable(32823):r.disable(32823),ga.polygonOffset_enable=g);g=R[0];x=R[1];if(g!==T[0]||x!==T[1])r.polygonOffset(g,x),T[0]=g,T[1]=x;g=k.sample_alpha;g!==ga.sample_alpha&&(g?r.enable(32926):r.disable(32926),ga.sample_alpha=g);g=k.sample_enable;g!==ga.sample_enable&&(g?r.enable(32928):r.disable(32928),ga.sample_enable=g);g=z[0];x=z[1];if(g!==l[0]||x!==l[1])r.sampleCoverage(g,x),l[0]=g,l[1]=x;g=
k.stencil_enable;g!==ga.stencil_enable&&(g?r.enable(2960):r.disable(2960),ga.stencil_enable=g);g=k.stencil_mask;g!==ga.stencil_mask&&(r.stencilMask(g),ga.stencil_mask=g);g=wa[0];x=wa[1];L=wa[2];if(g!==na[0]||x!==na[1]||L!==na[2])r.stencilFunc(g,x,L),na[0]=g,na[1]=x,na[2]=L;g=ba[0];x=ba[1];L=ba[2];ma=ba[3];if(g!==S[0]||x!==S[1]||L!==S[2]||ma!==S[3])r.stencilOpSeparate(g,x,L,ma),S[0]=g,S[1]=x,S[2]=L,S[3]=ma;g=n[0];x=n[1];L=n[2];ma=n[3];if(g!==G[0]||x!==G[1]||L!==G[2]||ma!==G[3])r.stencilOpSeparate(g,
x,L,ma),G[0]=g,G[1]=x,G[2]=L,G[3]=ma;g=k.scissor_enable;g!==ga.scissor_enable&&(g?r.enable(3089):r.disable(3089),ga.scissor_enable=g);g=O[0];x=O[1];L=O[2];ma=O[3];if(g!==N[0]||x!==N[1]||L!==N[2]||ma!==N[3])r.scissor(g,x,L,ma),N[0]=g,N[1]=x,N[2]=L,N[3]=ma;g=la[0];x=la[1];L=la[2];ma=la[3];if(g!==pa[0]||x!==pa[1]||L!==pa[2]||ma!==pa[3])r.viewport(g,x,L,ma),pa[0]=g,pa[1]=x,pa[2]=L,pa[3]=ma}r.disable(2929);ga.depth_enable=!1;if(g=ga.profile)q=performance.now(),J.count+=e;r.useProgram(K.program);E.setVAO(null);
x=U.location;L=u[x];L.buffer||r.enableVertexAttribArray(x);if(L.type!==f.dtype||2!==L.size||L.buffer!==f||!1!==L.normalized||0!==L.offset||0!==L.stride)r.bindBuffer(34962,f.buffer),r.vertexAttribPointer(x,2,f.dtype,!1,0,0),L.type=f.dtype,L.size=2,L.buffer=f,L.normalized=!1,L.offset=0,L.stride=0;w=A.call(this,Q,C,w);"number"!==typeof w&&X.commandRaise(m,F);r.uniform1f(da.location,w);(x=c.elements)?r.bindBuffer(34963,x.buffer.buffer):E.currentVAO&&(x=h.getElements(E.currentVAO.elements))&&r.bindBuffer(34963,
x.buffer.buffer);L=c.primitive;ma=c.offset;for(w=0;w<e;++w){C=a[w];var W,Ta,v,p,I,ua,va;W=C.color;aa(W)&&4===W.length||X.commandRaise(t,F);C=W[0];v=W[1];I=W[2];W=W[3];w&&Ta===C&&p===v&&ua===I&&va===W||(Ta=C,p=v,ua=I,va=W,r.uniform4f(y.location,C,v,I,W));x?r.drawElements(L,3,x.type,ma<<(x.type-5121>>1)):r.drawArrays(L,ma,3)}ga.dirty=!0;E.setVAO(null);g&&(J.cpuTime+=performance.now()-q)}}},"$13,color,position":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da){var y,U,u,Q,ga,c,h,M,r,aa,k,w,W,E,D,d,P,b,V,B,
ia,Aa,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba;y=a.attributes;U=a.context;u=a.current;Q=a.draw;ga=a.framebuffer;c=a.gl;h=a.next;M=a.shader;r=a.uniforms;aa=a.vao;k=h.blend_color;w=u.blend_color;W=h.blend_equation;E=u.blend_equation;D=h.blend_func;d=u.blend_func;P=h.colorMask;b=u.colorMask;V=h.depth_range;B=u.depth_range;ia=h.polygonOffset_offset;Aa=u.polygonOffset_offset;Y=h.sample_coverage;ea=u.sample_coverage;R=h.scissor_box;T=u.scissor_box;z=h.stencil_func;l=u.stencil_func;O=h.stencil_opBack;N=u.stencil_opBack;
wa=h.stencil_opFront;na=u.stencil_opFront;n=h.viewport;G=u.viewport;ba=[1,0,0,1];return{draw:function(a){var m,r,A;a=ga.next;a!==ga.cur&&(a?c.bindFramebuffer(36160,a.framebuffer):c.bindFramebuffer(36160,null),ga.cur=a);if(u.dirty){var x;a=h.dither;a!==u.dither&&(a?c.enable(3024):c.disable(3024),u.dither=a);a=h.blend_enable;a!==u.blend_enable&&(a?c.enable(3042):c.disable(3042),u.blend_enable=a);a=k[0];r=k[1];A=k[2];x=k[3];if(a!==w[0]||r!==w[1]||A!==w[2]||x!==w[3])c.blendColor(a,r,A,x),w[0]=a,w[1]=
r,w[2]=A,w[3]=x;a=W[0];r=W[1];if(a!==E[0]||r!==E[1])c.blendEquationSeparate(a,r),E[0]=a,E[1]=r;a=D[0];r=D[1];A=D[2];x=D[3];if(a!==d[0]||r!==d[1]||A!==d[2]||x!==d[3])c.blendFuncSeparate(a,r,A,x),d[0]=a,d[1]=r,d[2]=A,d[3]=x;a=h.depth_enable;a!==u.depth_enable&&(a?c.enable(2929):c.disable(2929),u.depth_enable=a);a=h.depth_func;a!==u.depth_func&&(c.depthFunc(a),u.depth_func=a);a=V[0];r=V[1];if(a!==B[0]||r!==B[1])c.depthRange(a,r),B[0]=a,B[1]=r;a=h.depth_mask;a!==u.depth_mask&&(c.depthMask(a),u.depth_mask=
a);a=P[0];r=P[1];A=P[2];x=P[3];if(a!==b[0]||r!==b[1]||A!==b[2]||x!==b[3])c.colorMask(a,r,A,x),b[0]=a,b[1]=r,b[2]=A,b[3]=x;a=h.cull_enable;a!==u.cull_enable&&(a?c.enable(2884):c.disable(2884),u.cull_enable=a);a=h.cull_face;a!==u.cull_face&&(c.cullFace(a),u.cull_face=a);a=h.frontFace;a!==u.frontFace&&(c.frontFace(a),u.frontFace=a);a=h.polygonOffset_enable;a!==u.polygonOffset_enable&&(a?c.enable(32823):c.disable(32823),u.polygonOffset_enable=a);a=ia[0];r=ia[1];if(a!==Aa[0]||r!==Aa[1])c.polygonOffset(a,
r),Aa[0]=a,Aa[1]=r;a=h.sample_alpha;a!==u.sample_alpha&&(a?c.enable(32926):c.disable(32926),u.sample_alpha=a);a=h.sample_enable;a!==u.sample_enable&&(a?c.enable(32928):c.disable(32928),u.sample_enable=a);a=Y[0];r=Y[1];if(a!==ea[0]||r!==ea[1])c.sampleCoverage(a,r),ea[0]=a,ea[1]=r;a=h.stencil_enable;a!==u.stencil_enable&&(a?c.enable(2960):c.disable(2960),u.stencil_enable=a);a=h.stencil_mask;a!==u.stencil_mask&&(c.stencilMask(a),u.stencil_mask=a);a=z[0];r=z[1];A=z[2];if(a!==l[0]||r!==l[1]||A!==l[2])c.stencilFunc(a,
r,A),l[0]=a,l[1]=r,l[2]=A;a=wa[0];r=wa[1];A=wa[2];x=wa[3];if(a!==na[0]||r!==na[1]||A!==na[2]||x!==na[3])c.stencilOpSeparate(a,r,A,x),na[0]=a,na[1]=r,na[2]=A,na[3]=x;a=O[0];r=O[1];A=O[2];x=O[3];if(a!==N[0]||r!==N[1]||A!==N[2]||x!==N[3])c.stencilOpSeparate(a,r,A,x),N[0]=a,N[1]=r,N[2]=A,N[3]=x;a=h.scissor_enable;a!==u.scissor_enable&&(a?c.enable(3089):c.disable(3089),u.scissor_enable=a);a=R[0];r=R[1];A=R[2];x=R[3];if(a!==T[0]||r!==T[1]||A!==T[2]||x!==T[3])c.scissor(a,r,A,x),T[0]=a,T[1]=r,T[2]=A,T[3]=
x;a=n[0];r=n[1];A=n[2];x=n[3];if(a!==G[0]||r!==G[1]||A!==G[2]||x!==G[3])c.viewport(a,r,A,x),G[0]=a,G[1]=r,G[2]=A,G[3]=x}c.lineWidth(1);u.lineWidth=1;if(a=u.profile)m=performance.now(),J.count++;c.useProgram(g.program);aa.setVAO(null);r=da.location;A=y[r];A.buffer||c.enableVertexAttribArray(r);if(A.type!==f.dtype||2!==A.size||A.buffer!==f||!1!==A.normalized||0!==A.offset||0!==A.stride)c.bindBuffer(34962,f.buffer),c.vertexAttribPointer(r,2,f.dtype,!1,0,0),A.type=f.dtype,A.size=2,A.buffer=f,A.normalized=
!1,A.offset=0,A.stride=0;c.uniform4f(t.location,1,0,0,1);q&&c.bindBuffer(34963,q.buffer.buffer);r=q.primType;A=q.vertCount-0;0<=A||X.commandRaise(e,F);A&&(c.drawElements(r,A,q.type,0<<(q.type-5121>>1)),u.dirty=!0,aa.setVAO(null),a&&(J.cpuTime+=performance.now()-m))},scope:function(b,a,c){var d,e,g,k,l,n,m,q,t,w,y,v,p,A,z,B,D,E,G,H,K,N;d=h.lineWidth;h.lineWidth=1;if(e=u.profile)g=performance.now(),J.count++;k=Q.elements;Q.elements=x;l=Q.offset;Q.offset=0;n=x.vertCount-0;0<=n||X.commandRaise(C,F);m=
Q.count;Q.count=n;q=x.primType;n=Q.primitive;Q.primitive=q;q=r[3];r[3]=ba;t=L.buffer;L.buffer=f;w=L.divisor;L.divisor=0;y=L.normalized;L.normalized=!1;v=L.offset;L.offset=0;p=L.size;L.size=0;A=L.state;L.state=1;z=L.stride;L.stride=0;B=L.type;L.type=f.dtype;D=L.w;L.w=0;E=L.x;L.x=0;G=L.y;L.y=0;H=L.z;L.z=0;K=M.vert;M.vert=2;N=M.frag;M.frag=1;u.dirty=!0;a(U,b,c);h.lineWidth=d;e&&(J.cpuTime+=performance.now()-g);Q.elements=k;Q.offset=l;Q.count=m;Q.primitive=n;r[3]=q;L.buffer=t;L.divisor=w;L.normalized=
y;L.offset=v;L.size=p;L.state=A;L.stride=z;L.type=B;L.w=D;L.x=E;L.y=G;L.z=H;M.vert=K;M.frag=N;u.dirty=!0},batch:function(a,e){var g,q,r;g=ga.next;g!==ga.cur&&(g?c.bindFramebuffer(36160,g.framebuffer):c.bindFramebuffer(36160,null),ga.cur=g);if(u.dirty){var x,C;g=h.dither;g!==u.dither&&(g?c.enable(3024):c.disable(3024),u.dither=g);g=h.blend_enable;g!==u.blend_enable&&(g?c.enable(3042):c.disable(3042),u.blend_enable=g);g=k[0];r=k[1];x=k[2];C=k[3];if(g!==w[0]||r!==w[1]||x!==w[2]||C!==w[3])c.blendColor(g,
r,x,C),w[0]=g,w[1]=r,w[2]=x,w[3]=C;g=W[0];r=W[1];if(g!==E[0]||r!==E[1])c.blendEquationSeparate(g,r),E[0]=g,E[1]=r;g=D[0];r=D[1];x=D[2];C=D[3];if(g!==d[0]||r!==d[1]||x!==d[2]||C!==d[3])c.blendFuncSeparate(g,r,x,C),d[0]=g,d[1]=r,d[2]=x,d[3]=C;g=h.depth_enable;g!==u.depth_enable&&(g?c.enable(2929):c.disable(2929),u.depth_enable=g);g=h.depth_func;g!==u.depth_func&&(c.depthFunc(g),u.depth_func=g);g=V[0];r=V[1];if(g!==B[0]||r!==B[1])c.depthRange(g,r),B[0]=g,B[1]=r;g=h.depth_mask;g!==u.depth_mask&&(c.depthMask(g),
u.depth_mask=g);g=P[0];r=P[1];x=P[2];C=P[3];if(g!==b[0]||r!==b[1]||x!==b[2]||C!==b[3])c.colorMask(g,r,x,C),b[0]=g,b[1]=r,b[2]=x,b[3]=C;g=h.cull_enable;g!==u.cull_enable&&(g?c.enable(2884):c.disable(2884),u.cull_enable=g);g=h.cull_face;g!==u.cull_face&&(c.cullFace(g),u.cull_face=g);g=h.frontFace;g!==u.frontFace&&(c.frontFace(g),u.frontFace=g);g=h.polygonOffset_enable;g!==u.polygonOffset_enable&&(g?c.enable(32823):c.disable(32823),u.polygonOffset_enable=g);g=ia[0];r=ia[1];if(g!==Aa[0]||r!==Aa[1])c.polygonOffset(g,
r),Aa[0]=g,Aa[1]=r;g=h.sample_alpha;g!==u.sample_alpha&&(g?c.enable(32926):c.disable(32926),u.sample_alpha=g);g=h.sample_enable;g!==u.sample_enable&&(g?c.enable(32928):c.disable(32928),u.sample_enable=g);g=Y[0];r=Y[1];if(g!==ea[0]||r!==ea[1])c.sampleCoverage(g,r),ea[0]=g,ea[1]=r;g=h.stencil_enable;g!==u.stencil_enable&&(g?c.enable(2960):c.disable(2960),u.stencil_enable=g);g=h.stencil_mask;g!==u.stencil_mask&&(c.stencilMask(g),u.stencil_mask=g);g=z[0];r=z[1];x=z[2];if(g!==l[0]||r!==l[1]||x!==l[2])c.stencilFunc(g,
r,x),l[0]=g,l[1]=r,l[2]=x;g=wa[0];r=wa[1];x=wa[2];C=wa[3];if(g!==na[0]||r!==na[1]||x!==na[2]||C!==na[3])c.stencilOpSeparate(g,r,x,C),na[0]=g,na[1]=r,na[2]=x,na[3]=C;g=O[0];r=O[1];x=O[2];C=O[3];if(g!==N[0]||r!==N[1]||x!==N[2]||C!==N[3])c.stencilOpSeparate(g,r,x,C),N[0]=g,N[1]=r,N[2]=x,N[3]=C;g=h.scissor_enable;g!==u.scissor_enable&&(g?c.enable(3089):c.disable(3089),u.scissor_enable=g);g=R[0];r=R[1];x=R[2];C=R[3];if(g!==T[0]||r!==T[1]||x!==T[2]||C!==T[3])c.scissor(g,r,x,C),T[0]=g,T[1]=r,T[2]=x,T[3]=
C;g=n[0];r=n[1];x=n[2];C=n[3];if(g!==G[0]||r!==G[1]||x!==G[2]||C!==G[3])c.viewport(g,r,x,C),G[0]=g,G[1]=r,G[2]=x,G[3]=C}c.lineWidth(1);u.lineWidth=1;if(g=u.profile)q=performance.now(),J.count+=e;c.useProgram(K.program);aa.setVAO(null);r=da.location;x=y[r];x.buffer||c.enableVertexAttribArray(r);if(x.type!==f.dtype||2!==x.size||x.buffer!==f||!1!==x.normalized||0!==x.offset||0!==x.stride)c.bindBuffer(34962,f.buffer),c.vertexAttribPointer(r,2,f.dtype,!1,0,0),x.type=f.dtype,x.size=2,x.buffer=f,x.normalized=
!1,x.offset=0,x.stride=0;c.uniform4f(t.location,1,0,0,1);A&&c.bindBuffer(34963,A.buffer.buffer);x=A.primType;C=A.vertCount-0;0<=C||X.commandRaise(m,F);for(r=0;r<e;++r)C&&c.drawElements(x,C,A.type,0<<(A.type-5121>>1));u.dirty=!0;aa.setVAO(null);g&&(J.cpuTime+=performance.now()-q)}}},"$20,mouse,position,t,texture":function(a,X,F,J,g,f,q,e,x,C,L,K,A,m,t,da,y,U,u,Q,ga,c,h,M,r){var aa,k,w,W,E,D,d,P,b,V,B,ia,Aa,Y,ea,R,T,z,l,O,N,wa,na,n,G,ba,S,la,pa,Ca,Ba,fa,Ea,ja,oa,ya;aa=a.attributes;k=a.context;w=a.current;
W=a.draw;E=a.elements;D=a.framebuffer;d=a.gl;P=a.isArrayLike;b=a.next;V=a.shader;B=a.uniforms;ia=a.vao;Aa=b.blend_color;Y=w.blend_color;ea=b.blend_equation;R=w.blend_equation;T=b.blend_func;z=w.blend_func;l=b.colorMask;O=w.colorMask;N=b.depth_range;wa=w.depth_range;na=b.polygonOffset_offset;n=w.polygonOffset_offset;G=b.sample_coverage;ba=w.sample_coverage;S=b.scissor_box;la=w.scissor_box;pa=b.stencil_func;Ca=w.stencil_func;Ba=b.stencil_opBack;fa=w.stencil_opBack;Ea=b.stencil_opFront;ja=w.stencil_opFront;
oa=b.viewport;ya=w.viewport;return{draw:function(a){var m,t,u,v;m=D.next;m!==D.cur&&(m?d.bindFramebuffer(36160,m.framebuffer):d.bindFramebuffer(36160,null),D.cur=m);if(w.dirty){var p;m=b.dither;m!==w.dither&&(m?d.enable(3024):d.disable(3024),w.dither=m);m=b.blend_enable;m!==w.blend_enable&&(m?d.enable(3042):d.disable(3042),w.blend_enable=m);m=Aa[0];u=Aa[1];v=Aa[2];p=Aa[3];if(m!==Y[0]||u!==Y[1]||v!==Y[2]||p!==Y[3])d.blendColor(m,u,v,p),Y[0]=m,Y[1]=u,Y[2]=v,Y[3]=p;m=ea[0];u=ea[1];if(m!==R[0]||u!==R[1])d.blendEquationSeparate(m,
u),R[0]=m,R[1]=u;m=T[0];u=T[1];v=T[2];p=T[3];if(m!==z[0]||u!==z[1]||v!==z[2]||p!==z[3])d.blendFuncSeparate(m,u,v,p),z[0]=m,z[1]=u,z[2]=v,z[3]=p;m=b.depth_enable;m!==w.depth_enable&&(m?d.enable(2929):d.disable(2929),w.depth_enable=m);m=b.depth_func;m!==w.depth_func&&(d.depthFunc(m),w.depth_func=m);m=N[0];u=N[1];if(m!==wa[0]||u!==wa[1])d.depthRange(m,u),wa[0]=m,wa[1]=u;m=b.depth_mask;m!==w.depth_mask&&(d.depthMask(m),w.depth_mask=m);m=l[0];u=l[1];v=l[2];p=l[3];if(m!==O[0]||u!==O[1]||v!==O[2]||p!==O[3])d.colorMask(m,
u,v,p),O[0]=m,O[1]=u,O[2]=v,O[3]=p;m=b.cull_enable;m!==w.cull_enable&&(m?d.enable(2884):d.disable(2884),w.cull_enable=m);m=b.cull_face;m!==w.cull_face&&(d.cullFace(m),w.cull_face=m);m=b.frontFace;m!==w.frontFace&&(d.frontFace(m),w.frontFace=m);m=b.lineWidth;m!==w.lineWidth&&(d.lineWidth(m),w.lineWidth=m);m=b.polygonOffset_enable;m!==w.polygonOffset_enable&&(m?d.enable(32823):d.disable(32823),w.polygonOffset_enable=m);m=na[0];u=na[1];if(m!==n[0]||u!==n[1])d.polygonOffset(m,u),n[0]=m,n[1]=u;m=b.sample_alpha;
m!==w.sample_alpha&&(m?d.enable(32926):d.disable(32926),w.sample_alpha=m);m=b.sample_enable;m!==w.sample_enable&&(m?d.enable(32928):d.disable(32928),w.sample_enable=m);m=G[0];u=G[1];if(m!==ba[0]||u!==ba[1])d.sampleCoverage(m,u),ba[0]=m,ba[1]=u;m=b.stencil_enable;m!==w.stencil_enable&&(m?d.enable(2960):d.disable(2960),w.stencil_enable=m);m=b.stencil_mask;m!==w.stencil_mask&&(d.stencilMask(m),w.stencil_mask=m);m=pa[0];u=pa[1];v=pa[2];if(m!==Ca[0]||u!==Ca[1]||v!==Ca[2])d.stencilFunc(m,u,v),Ca[0]=m,Ca[1]=
u,Ca[2]=v;m=Ea[0];u=Ea[1];v=Ea[2];p=Ea[3];if(m!==ja[0]||u!==ja[1]||v!==ja[2]||p!==ja[3])d.stencilOpSeparate(m,u,v,p),ja[0]=m,ja[1]=u,ja[2]=v,ja[3]=p;m=Ba[0];u=Ba[1];v=Ba[2];p=Ba[3];if(m!==fa[0]||u!==fa[1]||v!==fa[2]||p!==fa[3])d.stencilOpSeparate(m,u,v,p),fa[0]=m,fa[1]=u,fa[2]=v,fa[3]=p;m=b.scissor_enable;m!==w.scissor_enable&&(m?d.enable(3089):d.disable(3089),w.scissor_enable=m);m=S[0];u=S[1];v=S[2];p=S[3];if(m!==la[0]||u!==la[1]||v!==la[2]||p!==la[3])d.scissor(m,u,v,p),la[0]=m,la[1]=u,la[2]=v,la[3]=
p;m=oa[0];u=oa[1];v=oa[2];p=oa[3];if(m!==ya[0]||u!==ya[1]||v!==ya[2]||p!==ya[3])d.viewport(m,u,v,p),ya[0]=m,ya[1]=u,ya[2]=v,ya[3]=p;w.dirty=!1}if(m=w.profile)t=performance.now(),J.count++;d.useProgram(g.program);ia.setVAO(null);u=h.location;v=aa[u];v.buffer||d.enableVertexAttribArray(u);if(v.type!==f.dtype||2!==v.size||v.buffer!==f||!1!==v.normalized||0!==v.offset||0!==v.stride)d.bindBuffer(34962,f.buffer),d.vertexAttribPointer(u,2,f.dtype,!1,0,0),v.type=f.dtype,v.size=2,v.buffer=f,v.normalized=!1,
v.offset=0,v.stride=0;u=q.call(this,k,a,0);P(u)&&2===u.length||X.commandRaise(e,F);d.uniform2f(c.location,u[0],u[1]);a=x.call(this,k,a,0);"number"!==typeof a&&X.commandRaise(C,F);d.uniform1f(M.location,a);d.uniform1i(r.location,L.bind());(a=W.elements)?d.bindBuffer(34963,a.buffer.buffer):ia.currentVAO&&(a=E.getElements(ia.currentVAO.elements))&&d.bindBuffer(34963,a.buffer.buffer);u=W.primitive;v=W.offset;a?d.drawElements(u,3,a.type,v<<(a.type-5121>>1)):d.drawArrays(u,v,3);ia.setVAO(null);m&&(J.cpuTime+=
performance.now()-t);L.unbind()},scope:function(b,a,c){var d,e,h,g,l,n,q,r,u,y,x,z,C,D,E,G,F,L,M,N;if(d=w.profile)e=performance.now(),J.count++;h=W.count;W.count=3;g=K.call(this,k,b,c);l=B[3];B[3]=g;n=A.call(this,k,b,c);g=B[4];B[4]=n;n=B[5];B[5]=m;q=t.buffer;t.buffer=f;r=t.divisor;t.divisor=0;u=t.normalized;t.normalized=!1;y=t.offset;t.offset=0;x=t.size;t.size=0;z=t.state;t.state=1;C=t.stride;t.stride=0;D=t.type;t.type=f.dtype;E=t.w;t.w=0;G=t.x;t.x=0;F=t.y;t.y=0;L=t.z;t.z=0;M=V.vert;V.vert=2;N=V.frag;
V.frag=1;a(k,b,c);d&&(J.cpuTime+=performance.now()-e);W.count=h;B[3]=l;B[4]=g;B[5]=n;t.buffer=q;t.divisor=r;t.normalized=u;t.offset=y;t.size=x;t.state=z;t.stride=C;t.type=D;t.w=E;t.x=G;t.y=F;t.z=L;V.vert=M;V.frag=N},batch:function(a,e){var g,m,q;g=D.next;g!==D.cur&&(g?d.bindFramebuffer(36160,g.framebuffer):d.bindFramebuffer(36160,null),D.cur=g);if(w.dirty){var p,t,x;g=b.dither;g!==w.dither&&(g?d.enable(3024):d.disable(3024),w.dither=g);g=b.blend_enable;g!==w.blend_enable&&(g?d.enable(3042):d.disable(3042),
w.blend_enable=g);g=Aa[0];p=Aa[1];t=Aa[2];x=Aa[3];if(g!==Y[0]||p!==Y[1]||t!==Y[2]||x!==Y[3])d.blendColor(g,p,t,x),Y[0]=g,Y[1]=p,Y[2]=t,Y[3]=x;g=ea[0];p=ea[1];if(g!==R[0]||p!==R[1])d.blendEquationSeparate(g,p),R[0]=g,R[1]=p;g=T[0];p=T[1];t=T[2];x=T[3];if(g!==z[0]||p!==z[1]||t!==z[2]||x!==z[3])d.blendFuncSeparate(g,p,t,x),z[0]=g,z[1]=p,z[2]=t,z[3]=x;g=b.depth_enable;g!==w.depth_enable&&(g?d.enable(2929):d.disable(2929),w.depth_enable=g);g=b.depth_func;g!==w.depth_func&&(d.depthFunc(g),w.depth_func=
g);g=N[0];p=N[1];if(g!==wa[0]||p!==wa[1])d.depthRange(g,p),wa[0]=g,wa[1]=p;g=b.depth_mask;g!==w.depth_mask&&(d.depthMask(g),w.depth_mask=g);g=l[0];p=l[1];t=l[2];x=l[3];if(g!==O[0]||p!==O[1]||t!==O[2]||x!==O[3])d.colorMask(g,p,t,x),O[0]=g,O[1]=p,O[2]=t,O[3]=x;g=b.cull_enable;g!==w.cull_enable&&(g?d.enable(2884):d.disable(2884),w.cull_enable=g);g=b.cull_face;g!==w.cull_face&&(d.cullFace(g),w.cull_face=g);g=b.frontFace;g!==w.frontFace&&(d.frontFace(g),w.frontFace=g);g=b.lineWidth;g!==w.lineWidth&&(d.lineWidth(g),
w.lineWidth=g);g=b.polygonOffset_enable;g!==w.polygonOffset_enable&&(g?d.enable(32823):d.disable(32823),w.polygonOffset_enable=g);g=na[0];p=na[1];if(g!==n[0]||p!==n[1])d.polygonOffset(g,p),n[0]=g,n[1]=p;g=b.sample_alpha;g!==w.sample_alpha&&(g?d.enable(32926):d.disable(32926),w.sample_alpha=g);g=b.sample_enable;g!==w.sample_enable&&(g?d.enable(32928):d.disable(32928),w.sample_enable=g);g=G[0];p=G[1];if(g!==ba[0]||p!==ba[1])d.sampleCoverage(g,p),ba[0]=g,ba[1]=p;g=b.stencil_enable;g!==w.stencil_enable&&
(g?d.enable(2960):d.disable(2960),w.stencil_enable=g);g=b.stencil_mask;g!==w.stencil_mask&&(d.stencilMask(g),w.stencil_mask=g);g=pa[0];p=pa[1];t=pa[2];if(g!==Ca[0]||p!==Ca[1]||t!==Ca[2])d.stencilFunc(g,p,t),Ca[0]=g,Ca[1]=p,Ca[2]=t;g=Ea[0];p=Ea[1];t=Ea[2];x=Ea[3];if(g!==ja[0]||p!==ja[1]||t!==ja[2]||x!==ja[3])d.stencilOpSeparate(g,p,t,x),ja[0]=g,ja[1]=p,ja[2]=t,ja[3]=x;g=Ba[0];p=Ba[1];t=Ba[2];x=Ba[3];if(g!==fa[0]||p!==fa[1]||t!==fa[2]||x!==fa[3])d.stencilOpSeparate(g,p,t,x),fa[0]=g,fa[1]=p,fa[2]=t,
fa[3]=x;g=b.scissor_enable;g!==w.scissor_enable&&(g?d.enable(3089):d.disable(3089),w.scissor_enable=g);g=S[0];p=S[1];t=S[2];x=S[3];if(g!==la[0]||p!==la[1]||t!==la[2]||x!==la[3])d.scissor(g,p,t,x),la[0]=g,la[1]=p,la[2]=t,la[3]=x;g=oa[0];p=oa[1];t=oa[2];x=oa[3];if(g!==ya[0]||p!==ya[1]||t!==ya[2]||x!==ya[3])d.viewport(g,p,t,x),ya[0]=g,ya[1]=p,ya[2]=t,ya[3]=x;w.dirty=!1}if(g=w.profile)m=performance.now(),J.count+=e;d.useProgram(da.program);ia.setVAO(null);p=h.location;t=aa[p];t.buffer||d.enableVertexAttribArray(p);
if(t.type!==f.dtype||2!==t.size||t.buffer!==f||!1!==t.normalized||0!==t.offset||0!==t.stride)d.bindBuffer(34962,f.buffer),d.vertexAttribPointer(p,2,f.dtype,!1,0,0),t.type=f.dtype,t.size=2,t.buffer=f,t.normalized=!1,t.offset=0,t.stride=0;p=y.call(this,k,void 0,q);P(p)&&2===p.length||X.commandRaise(U,F);d.uniform2f(c.location,p[0],p[1]);q=u.call(this,k,void 0,q);"number"!==typeof q&&X.commandRaise(Q,F);d.uniform1f(M.location,q);d.uniform1i(r.location,ga.bind());(p=W.elements)?d.bindBuffer(34963,p.buffer.buffer):
ia.currentVAO&&(p=E.getElements(ia.currentVAO.elements))&&d.bindBuffer(34963,p.buffer.buffer);t=W.primitive;x=W.offset;for(q=0;q<e;++q)p?d.drawElements(t,3,p.type,x<<(p.type-5121>>1)):d.drawArrays(t,x,3);ga.unbind();ia.setVAO(null);g&&(J.cpuTime+=performance.now()-m)}}}}},{}],25:[function(V,ia,Aa){var a=V("./sorted-object-keys");ia.exports=function(X,F){for(var J=a(F),g=0;g<J.length;++g)X[J[g]]=F[J[g]];return X}},{"./sorted-object-keys":34}],26:[function(V,ia,Aa){function a(a,g,f,q,e,x){for(var C=
0;C<g;++C)for(var F=a[C],K=0;K<f;++K)for(var A=F[K],m=0;m<q;++m)e[x++]=A[m]}function X(J,g,f,q,e){for(var x=1,C=f+1;C<g.length;++C)x*=g[C];var F=g[f];if(4===g.length-f){var K=g[f+1],A=g[f+2];g=g[f+3];for(C=0;C<F;++C)a(J[C],K,A,g,q,e),e+=x}else for(C=0;C<F;++C)X(J[C],g,f+1,q,e),e+=x}var F=V("./pool");ia.exports={shape:function(a){for(var g=[];a.length;a=a[0])g.push(a.length);return g},flatten:function(J,g,f,q){var e=1;if(g.length)for(var x=0;x<g.length;++x)e*=g[x];else e=0;f=q||F.allocType(f,e);switch(g.length){case 0:break;
case 1:q=g[0];for(g=0;g<q;++g)f[g]=J[g];break;case 2:q=g[0];g=g[1];for(x=e=0;x<q;++x)for(var C=J[x],L=0;L<g;++L)f[e++]=C[L];break;case 3:a(J,g[0],g[1],g[2],f,0);break;default:X(J,g,0,f,0)}return f}}},{"./pool":32}],27:[function(V,ia,Aa){var a=V("./is-typed-array");ia.exports=function(X){return Array.isArray(X)||a(X)}},{"./is-typed-array":30}],28:[function(V,ia,Aa){var a=V("./is-typed-array");ia.exports=function(X){return!!X&&"object"===typeof X&&Array.isArray(X.shape)&&Array.isArray(X.stride)&&"number"===
typeof X.offset&&X.shape.length===X.stride.length&&(Array.isArray(X.data)||a(X.data))}},{"./is-typed-array":30}],29:[function(V,ia,Aa){ia.exports=function(a){return!(a&a-1)&&!!a}},{}],30:[function(V,ia,Aa){ia.exports=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray}},{}],31:[function(V,ia,Aa){ia.exports=
function(a,X){for(var F=Array(a),J=0;J<a;++J)F[J]=X(J);return F}},{}],32:[function(V,ia,Aa){function a(a){var g,f;g=(65535<a)<<4;a>>>=g;f=(255<a)<<3;a>>>=f;g|=f;f=(15<a)<<2;a>>>=f;g|=f;f=(3<a)<<1;return g|f|a>>>f>>1}function X(){function J(g){a:{for(var e=16;268435456>=e;e*=16)if(g<=e){g=e;break a}g=0}e=f[a(g)>>2];return 0<e.length?e.pop():new ArrayBuffer(g)}function g(g){f[a(g.byteLength)>>2].push(g)}var f=F(8,function(){return[]});return{alloc:J,free:g,allocType:function(a,e){var f=null;switch(a){case 5120:f=
new Int8Array(J(e),0,e);break;case 5121:f=new Uint8Array(J(e),0,e);break;case 5122:f=new Int16Array(J(2*e),0,e);break;case 5123:f=new Uint16Array(J(2*e),0,e);break;case 5124:f=new Int32Array(J(4*e),0,e);break;case 5125:f=new Uint32Array(J(4*e),0,e);break;case 5126:f=new Float32Array(J(4*e),0,e);break;default:return null}return f.length!==e?f.subarray(0,e):f},freeType:function(a){g(a.buffer)}}}var F=V("./loop");V=X();V.zero=X();ia.exports=V},{"./loop":31}],33:[function(V,ia,Aa){ia.exports={next:"function"===
typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout}},{}],34:[function(V,ia,Aa){ia.exports=function(a){return Object.keys(a).sort()}},{}],35:[function(V,ia,Aa){var a=V("./pool"),X=new Float32Array(1),F=new Uint32Array(X.buffer);ia.exports=function(J){for(var g=a.allocType(5123,J.length),f=0;f<J.length;++f)if(isNaN(J[f]))g[f]=65535;else if(Infinity===
J[f])g[f]=31744;else if(-Infinity===J[f])g[f]=64512;else{X[0]=J[f];var q=F[0],e=q>>>31<<15,x=(q<<1>>>24)-127,q=q>>13&1023;g[f]=-24>x?e:-14>x?e+(q+1024>>-14-x):15<x?e+31744:e+(x+15<<10)+q}return g}},{"./pool":32}],36:[function(V,ia,Aa){var a=V("./sorted-object-keys");ia.exports=function(X){return a(X).map(function(a){return X[a]})}},{"./sorted-object-keys":34}],37:[function(V,ia,Aa){function a(a,e,g){function C(){var e=window.innerWidth,f=window.innerHeight;a!==document.body&&(f=F.getBoundingClientRect(),
e=f.right-f.left,f=f.bottom-f.top);F.width=g*e;F.height=g*f}var F=document.createElement("canvas");f(F.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});a.appendChild(F);a===document.body&&(F.style.position="absolute",f(a.style,{margin:0,padding:0}));var J;a!==document.body&&"function"===typeof ResizeObserver?(J=new ResizeObserver(function(){setTimeout(C)}),J.observe(a)):window.addEventListener("resize",C,!1);C();return{canvas:F,onDestroy:function(){J?J.disconnect():window.removeEventListener("resize",
C);a.removeChild(F)}}}function X(a,e){function f(g){try{return a.getContext(g,e)}catch(x){return null}}return f("webgl")||f("experimental-webgl")||f("webgl-experimental")}function F(a){if("string"===typeof a)return a.split();g(Array.isArray(a),"invalid extension array");return a}function J(a){return"string"===typeof a?(g("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(a)):a}var g=V("./util/check"),f=V("./util/extend");ia.exports=function(f){var e=f||{},x,C,L,K;
f={};var A=[],m=[],t="undefined"===typeof window?1:window.devicePixelRatio,V=!1,y=function(a){a&&g.raise(a)},U=function(){};"string"===typeof e?(g("undefined"!==typeof document,"selector queries only supported in DOM environments"),x=document.querySelector(e),g(x,"invalid query string for element")):"object"===typeof e?"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&"function"===typeof e.getBoundingClientRect?x=e:"function"===typeof e.drawArrays||"function"===typeof e.drawElements?
(K=e,L=K.canvas):(g.constructor(e),"gl"in e?K=e.gl:"canvas"in e?L=J(e.canvas):"container"in e&&(C=J(e.container)),"attributes"in e&&(f=e.attributes,g.type(f,"object","invalid context attributes")),"extensions"in e&&(A=F(e.extensions)),"optionalExtensions"in e&&(m=F(e.optionalExtensions)),"onDone"in e&&(g.type(e.onDone,"function","invalid or missing onDone callback"),y=e.onDone),"profile"in e&&(V=!!e.profile),"pixelRatio"in e&&(t=+e.pixelRatio,g(0<t,"invalid pixel ratio"))):g.raise("invalid arguments to regl");
x&&("canvas"===x.nodeName.toLowerCase()?L=x:C=x);if(!K){if(!L){g("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");x=a(C||document.body,y,t);if(!x)return null;L=x.canvas;U=x.onDestroy}void 0===f.premultipliedAlpha&&(f.premultipliedAlpha=!0);K=X(L,f)}return K?{gl:K,canvas:L,container:C,extensions:A,optionalExtensions:m,pixelRatio:t,profile:V,onDone:y,onDestroy:U}:(U(),y("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}},{"./util/check":21,"./util/extend":25}],38:[function(V,ia,Aa){ia.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],39:[function(V,ia,Aa){var a=V("./identity");ia.exports=function(X,F,J,g){var f,q,e,x,C,L,K,A,m=F[0],t=F[1];F=F[2];e=g[0];x=g[1];q=g[2];K=J[0];g=J[1];f=J[2];if(1E-6>Math.abs(m-K)&&1E-6>Math.abs(t-g)&&1E-6>Math.abs(F-f))return a(X);J=m-K;g=t-g;K=F-f;A=1/Math.sqrt(J*J+g*g+K*K);
J*=A;g*=A;K*=A;f=x*K-q*g;q=q*J-e*K;e=e*g-x*J;(A=Math.sqrt(f*f+q*q+e*e))?(A=1/A,f*=A,q*=A,e*=A):e=q=f=0;x=g*e-K*q;C=K*f-J*e;L=J*q-g*f;(A=Math.sqrt(x*x+C*C+L*L))?(A=1/A,x*=A,C*=A,L*=A):L=C=x=0;X[0]=f;X[1]=x;X[2]=J;X[3]=0;X[4]=q;X[5]=C;X[6]=g;X[7]=0;X[8]=e;X[9]=L;X[10]=K;X[11]=0;X[12]=-(f*m+q*t+e*F);X[13]=-(x*m+C*t+L*F);X[14]=-(J*m+g*t+K*F);X[15]=1;return X}},{"./identity":38}],40:[function(V,ia,Aa){ia.exports=function(a,X,F,J,g){X=1/Math.tan(X/2);var f=1/(J-g);a[0]=X/F;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
X;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+J)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*J*f;a[15]=0;return a}},{}],41:[function(V,ia,Aa){function a(a){throw Error("resl: "+a);}function X(f,e,g){Object.keys(f).forEach(function(f){0>e.indexOf(f)&&a('invalid parameter "'+f+'" in '+g)})}function F(a,e){this.state=0;this.ready=!1;this.progress=0;this.name=a;this.cancel=e}var J=["manifest","onDone","onProgress","onError"],g=["type","src","stream","credentials","parser"],f=["onData","onDone"];ia.exports=function(q){function e(e,
c){if(e in q){var f=q[e];"function"!==typeof f&&a('invalid callback "'+e+'"');return f}return null}function x(a){function c(){if(!(2>k.readyState||1===t.state||-1===t.state)){if(200!==k.status)return L('error loading resource "'+a.name+'"');if(2<k.readyState&&0===t.state){var c;c="binary"===a.type?k.response:k.responseText;if(m.data)try{q=m.data(c)}catch(f){return L(f)}else q=c}if(3<k.readyState&&0===t.state){if(m.done)try{q=m.done()}catch(f){return L(f)}t.state=1}y[e]=q;t.progress=.75*t.progress+
.25;t.ready=a.stream&&!!q||1===t.state;K()}}var e=a.name,f=a.stream,g="binary"===a.type,m=a.parser,k=new XMLHttpRequest,q=null,t=new F(e,function(){1!==t.state&&-1!==t.state&&(k.onreadystatechange=null,k.abort(),t.state=-1)});k.onreadystatechange=f?c:function(){4===k.readyState&&c()};g&&(k.responseType="arraybuffer");a.credentials&&(k.withCredentials=!0);k.open("GET",a.src,!0);k.send();return t}function C(a,c){function e(){if(0===u.state)if(t.data)try{x=t.data(c)}catch(b){return L(b)}else x=c}function f(b){e();
y[q]=x;u.progress=b.lengthComputable?Math.max(u.progress,b.loaded/b.total):.75*u.progress+.25;K(q)}function g(){e();if(0===u.state){if(t.done)try{x=t.done()}catch(b){return L(b)}u.state=1}u.progress=1;u.ready=!0;y[q]=x;k();K("finish "+q)}function m(){L('error loading asset "'+q+'"')}function k(){a.stream&&c.removeEventListener("progress",f);"image"===a.type?c.addEventListener("load",g):c.addEventListener("canplay",g);c.removeEventListener("error",m)}var q=a.name,t=a.parser,u=new F(q,function(){1!==
u.state&&-1!==u.state&&(u.state=-1,k(),c.src="")}),x=c;a.stream&&c.addEventListener("progress",f);if("image"===a.type)c.addEventListener("load",g);else{var d=!1,A=!1;c.addEventListener("loadedmetadata",function(){A=!0;d&&g()});c.addEventListener("canplay",function(){d=!0;A&&g()})}c.addEventListener("error",m);c.crossOrigin=a.credentials?"use-credentials":"anonymous";c.src=a.src;return u}function L(a){-1!==U&&1!==U&&(U=-1,Q.forEach(function(a){a.cancel()}),V?"string"===typeof a?V(Error("resl: "+a)):
V(a):console.error("resl error:",a))}function K(a){if(-1!==U&&1!==U){var c=0,e=0;Q.forEach(function(a){a.ready&&(e+=1);c+=a.progress});e===Q.length?(U=1,m(y)):t&&t(c/Q.length,a)}}"object"===typeof q&&q||a("invalid or missing configuration");X(q,J,"config");var A=q.manifest;"object"===typeof A&&A||a("missing manifest");var m=e("onDone");m||a("missing onDone() callback");var t=e("onProgress"),V=e("onError"),y={},U=0,u={text:x,binary:function(a){return x(a)},image:function(a){return C(a,document.createElement("img"))},
video:function(a){return C(a,document.createElement("video"))},audio:function(a){return C(a,document.createElement("audio"))}},Q=Object.keys(A).map(function(e){function c(c,e){if(c in h.parser){var f=h.parser[c];"function"!==typeof f&&a("invalid parser callback "+c+' for asset "'+c+'"');return f}return e}var h=A[e];"string"===typeof h?h={src:h}:"object"===typeof h&&h||a('invalid asset definition "'+e+'"');X(h,g,'asset "'+e+'"');var m={};"parser"in h&&("function"===typeof h.parser?m={data:h.parser}:
"object"===typeof h.parser&&h.parser?(X(m,f,'parser for asset "'+e+'"'),"onData"in m||a('missing onData callback for parser in asset "'+e+'"'),m={data:c("onData"),done:c("onDone")}):a('invalid parser for asset "'+e+'"'));return{name:e,type:function(c,f,g){c in h&&(g=h[c]);0>f.indexOf(g)&&a("invalid "+c+' "'+g+'" for asset "'+e+'", possible values: '+f);return g}("type",Object.keys(u),"text"),stream:!!h.stream,credentials:!!h.credentials,src:function(c,f,g){c in h?g=h[c]:f&&a("missing "+c+' for asset "'+
e+'"');"string"!==typeof g&&a("invalid "+c+' for asset "'+e+'", must be a string');return g}("src",!0,""),parser:m}}).map(function(a){return u[a.type](a)});0===Q.length&&setTimeout(function(){K("done")},1)}},{}],42:[function(V,ia,Aa){function a(a,e){for(var f=0;f<a.length;++f)if(a[f]===e)return f;return-1}var X=V("./lib/util/check"),F=V("./lib/util/extend"),J=V("./lib/dynamic"),g=V("./lib/util/raf"),f=V("./lib/util/clock"),q=V("./lib/strings"),e=V("./lib/webgl"),x=V("./lib/extension"),C=V("./lib/limits"),
L=V("./lib/buffer"),K=V("./lib/elements"),A=V("./lib/texture"),m=V("./lib/renderbuffer"),t=V("./lib/framebuffer"),da=V("./lib/attribute"),y=V("./lib/shader"),U=V("./lib/read"),u=V("./lib/core"),Q=V("./lib/stats"),ga=V("./lib/timer");ia.exports=function(c){function h(){if(0===Ea.length)T&&T.update(),Ma=null;else{Ma=g.next(h);d();for(var a=Ea.length-1;0<=a;--a){var b=Ea[a];b&&b(N,null,0)}V.flush();T&&T.update()}}function M(){!Ma&&0<Ea.length&&(Ma=g.next(h))}function r(){Ma&&(g.cancel(h),Ma=null)}function aa(a){a.preventDefault();
ia=!0;r();ja.forEach(function(a){a()})}function k(a){V.getError();ia=!1;Aa.restore();ba.restore();na.restore();S.restore();la.restore();pa.restore();G.restore();T&&T.restore();Ca.procs.refresh();M();oa.forEach(function(a){a()})}function w(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(J.isDynamic(f))e[b]=J.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(J.isDynamic(f[g])){e[b]=J.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;n.length<
a;)n.push(null);return n}X(!!a,"invalid args to regl({...})");X.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=F({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=Ca.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,n=[];return F(function(a,b){var d;ia&&X.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);
else if("number"===typeof a){if(0<a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function W(a,b){var c=0;Ca.procs.poll();var d=b.color;d&&(V.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(V.clearDepth(+b.depth),c|=256);"stencil"in b&&(V.clearStencil(b.stencil|0),c|=1024);X(!!c,"called regl.clear with no buffer specified");V.clear(c)}function E(b){X.type(b,
"function","regl.frame() callback must be a function");Ea.push(b);M();return{cancel:function(){function c(){var b=a(Ea,c);Ea[b]=Ea[Ea.length-1];--Ea.length;0>=Ea.length&&r()}var d=a(Ea,b);X(0<=d,"cannot cancel a frame twice");Ea[d]=c}}}function D(){var a=Ba.viewport,b=Ba.scissor_box;a[0]=a[1]=b[0]=b[1]=0;N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=a[2]=b[2]=V.drawingBufferWidth;N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=a[3]=b[3]=V.drawingBufferHeight}function d(){N.tick+=
1;N.time=b();D();Ca.procs.poll()}function P(){S.refresh();D();Ca.procs.refresh();T&&T.update()}function b(){return(f()-z)/1E3}console.log("REGL args are:",c);c=e(c);console.log("REGL configs are:",c);if(!c)return null;var V=c.gl,B=V.getContextAttributes(),ia=V.isContextLost(),Aa=x(V,c);if(!Aa)return null;var Y=q(),ea=Q(),R=Aa.extensions,T=ga(V,R),z=f(),l=V.drawingBufferWidth,O=V.drawingBufferHeight,N={tick:0,time:0,viewportWidth:l,viewportHeight:O,framebufferWidth:l,framebufferHeight:O,drawingBufferWidth:l,
drawingBufferHeight:O,pixelRatio:c.pixelRatio},l={elements:null,primitive:4,count:-1,offset:0,instances:-1},wa=C(V,R),na=L(V,ea,c,function(a){return G.destroyBuffer(a)}),n=K(V,R,na,ea),G=da(V,R,wa,ea,na,n,l),ba=y(V,Y,ea,c),S=A(V,R,wa,function(){Ca.procs.poll()},N,ea,c),la=m(V,R,wa,ea,c),pa=t(V,R,wa,S,la,ea),Ca=u(V,Y,R,wa,na,n,S,pa,{},G,ba,l,N,T,c),Y=U(V,pa,Ca.procs.poll,N,B,R,wa),Ba=Ca.next,fa=V.canvas,Ea=[],ja=[],oa=[],ya=[c.onDestroy],Ma=null;fa&&(fa.addEventListener("webglcontextlost",aa,!1),fa.addEventListener("webglcontextrestored",
k,!1));var ma=pa.setFBO=w({framebuffer:J.define.call(null,1,"framebuffer")});P();B=F(w,{clear:function(a){X("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)ma(F({framebuffer:a.framebuffer.faces[b]},a),W);else ma(a,W);else W(null,a)},prop:J.define.bind(null,1),context:J.define.bind(null,2),"this":J.define.bind(null,3),draw:w({}),buffer:function(a){return na.create(a,34962,!1,!1)},elements:function(a){return n.create(a,
!1)},texture:S.create2D,cube:S.createCube,renderbuffer:la.create,framebuffer:pa.create,framebufferCube:pa.createCube,vao:G.createVAO,attributes:B,frame:E,on:function(a,b){X.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return E(b);case "lost":c=ja;break;case "restore":c=oa;break;case "destroy":c=ya;break;default:X.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=
c[c.length-1];c.pop();break}}}},limits:wa,hasExtension:function(a){return 0<=wa.extensions.indexOf(a.toLowerCase())},read:Y,destroy:function(){Ea.length=0;r();fa&&(fa.removeEventListener("webglcontextlost",aa),fa.removeEventListener("webglcontextrestored",k));ba.clear();pa.clear();la.clear();G.clear();S.clear();n.clear();na.clear();T&&T.clear();ya.forEach(function(a){a()})},_gl:V,_refresh:P,poll:function(){d();T&&T.update()},now:b,stats:ea});c.onDone(null,B);return B}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
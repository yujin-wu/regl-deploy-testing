<!DOCTYPE html>
      <html>
        <head>
          <title>example/audio.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function B(w,Va,c){function Q(e,d){if(!Va[e]){if(!w[e]){var r="function"==typeof require&&require;if(!d&&r)return r(e,!0);if(p)return p(e,!0);r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r;}r=Va[e]={exports:{}};w[e][0].call(r.exports,function(a){return Q(w[e][1][a]||a)},r,r.exports,B,w,Va,c)}return Va[e].exports}for(var p="function"==typeof require&&require,y=0;y<c.length;y++)Q(c[y]);return Q}return B})()({1:[function(B,w,Va){var c=B("../regl")({pixelRatio:1}),
Q=B("gl-mat4/perspective"),p=B("gl-mat4/lookAt");B("resl")({manifest:{song:{type:"audio",src:"assets/8bitpeoples-bamboo-cactus.mp3",stream:!0}},onDone:function(y){y=y.song;var e=new AudioContext,d=e.createMediaElementSource(y),r=e.createAnalyser();d.connect(r);d.connect(e.destination);y.play();var a=c.texture({data:(new Uint8Array(65536)).fill(128),radius:256,channels:1,min:"linear",mag:"linear",wrap:"repeat"}),u=c.texture({width:64,height:1,channels:4,min:"linear",mag:"linear",wrap:"repeat"}),ja=
c({vert:"\n      precision highp float;\n\n      #define N float(256)\n      #define WEIGHT1 vec4(-1.0, 8.0, -8.0, 1.0)\n      #define WEIGHT2 vec4(-1.0, 16.0, 16.0, -1.0)\n\n      attribute vec2 vertId;\n\n      uniform float t;\n      uniform mat4 projection, view;\n      uniform vec3 lightPosition;\n      uniform float offsetRow;\n      uniform sampler2D terrain, color;\n\n      varying vec3 grad, fragColor, eyeDir, lightDir;\n      varying float curvature;\n\n      float f(vec2 x) {\n        return 0.025 * pow(texture2D(terrain, x).r, 2.0) *\n          (1.0 + 2.5 * pow(texture2D(color, vec2(x.y, 0.0)).a, 3.0));\n      }\n\n      vec4 stencil(vec2 x, vec2 d) {\n        return vec4(\n          f(x - 2.0 * d),\n          f(x - d),\n          f(x + d),\n          f(x + 2.0 * d));\n      }\n\n      void main () {\n        vec2 uv = (vertId + vec2(0.0, offsetRow)) / N;\n\n        float h0 = f(uv);\n        vec4 hx = stencil(uv, vec2(1.0 / N, 0.0));\n        vec4 hy = stencil(uv, vec2(0.0, 1.0 / N));\n\n        grad = normalize(vec3(\n          dot(WEIGHT1, hx),\n          dot(WEIGHT1, hy),\n          0.025));\n\n        curvature =\n          max(max((dot(WEIGHT2, hx) - 30.0 * h0),\n              (dot(WEIGHT2, hy) - 30.0 * h0)), 0.0);\n\n        vec3 pos = vec3(vertId / N, h0 + 0.4);\n        lightDir = lightPosition - pos;\n\n        vec4 viewPos = view * vec4(pos, 1);\n        gl_Position = projection * viewPos;\n        eyeDir = viewPos.xyz / viewPos.w;\n\n        vec3 audioColor = texture2D(color, vec2(uv.y, 0)).rgb;\n        float minC = 0.9 * min(min(audioColor.r, audioColor.g), audioColor.b);\n        float maxC = max(max(audioColor.r, audioColor.g), audioColor.b);\n        fragColor = (audioColor - minC) / (maxC - minC);\n      }",
frag:"\n      precision highp float;\n\n      varying vec3 grad, fragColor, eyeDir, lightDir;\n      varying float curvature;\n\n      void main () {\n        vec3 N = normalize(grad);\n        vec3 V = normalize(eyeDir);\n        vec3 L = normalize(lightDir);\n\n        vec3 H = normalize(V + L);\n\n        float ao = 1.0 - curvature;\n        float diffuse = max(dot(L, N), 0.0);\n        float fresnel = 0.1 + 0.5 * pow(1.0 - max(dot(H, V), 0.0), 5.0);\n        float light = 0.25 * ao + 0.8 * diffuse + fresnel;\n        gl_FragColor = vec4(light * fragColor, 1);\n      }",
attributes:{vertId:Array(262144).fill().map(function(a,d){var e=.5*Math.floor(d/512),c=d%512*.5;return[e,c,e+.5,c,e,c+.5,e,c+.5,e+.5,c+.5,e+.5,c]})},uniforms:{offsetRow:function(a){return a.tick%256},terrain:a,projection:function(a){return Q([],Math.PI/8,a.viewportWidth/a.viewportHeight,.01,1E3)},view:function(a){a=a.tick;return p([],[.5+.2*Math.cos(.001*a),1,.7+.2*Math.cos(.003*a+2.4)],[.5,0,0],[0,0,1])},lightPosition:function(a){a=a.tick;return[.5+Math.sin(.01*a),1+Math.cos(.01*a),1+.6*Math.cos(.04*
a)]},color:u,t:function(a){return.01*a.tick}},elements:null,instances:-1,count:1572864}),sa={width:256,height:1,data:new Uint8Array(256)},n=new Uint8Array(256);c.frame(function(d){d=d.tick%256;c.clear({color:[0,0,0,1],depth:1});r.getByteTimeDomainData(sa.data);a.subimage(sa,0,d);r.getByteFrequencyData(n);u.subimage(n);ja()})}})},{"../regl":42,"gl-mat4/lookAt":39,"gl-mat4/perspective":40,resl:41}],2:[function(B,w,Va){function c(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=
0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var Q=B("./util/sorted-object-keys"),p=B("./util/check"),y=B("./util/values"),e=B("./constants/dtypes.json"),d=B("./util/is-typed-array"),r=B("./util/is-ndarray"),a=B("./constants/primitives.json"),u="attributes elements offset count primitive instances".split(" ");w.exports=function(ja,sa,n,I,v,D,L){function C(a){if(a!==S.currentVAO){var d=sa.oes_vertex_array_object;a?d.bindVertexArrayOES(a.vao):d.bindVertexArrayOES(null);
S.currentVAO=a}}function F(a){if(a!==S.currentVAO){if(a)a.bindAttrs();else{for(var d=sa.angle_instanced_arrays,e=0;e<g.length;++e){var f=g[e];f.buffer?(ja.enableVertexAttribArray(e),f.buffer.bind(),ja.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,f.offfset),d&&f.divisor&&d.vertexAttribDivisorANGLE(e,f.divisor)):(ja.disableVertexAttribArray(e),ja.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}L.elements?ja.bindBuffer(34963,L.elements.buffer.buffer):ja.bindBuffer(34963,null)}S.currentVAO=a}}function na(){y(A).forEach(function(a){a.destroy()})}
function P(){this.id=++f;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var a=sa.oes_vertex_array_object;this.vao=a?a.createVertexArrayOES():null;A[this.id]=this;this.buffers=[]}function va(){sa.oes_vertex_array_object&&y(A).forEach(function(a){a.refresh()})}var h=n.maxAttributes,g=Array(h);for(n=0;n<h;++n)g[n]=new c;var f=0,A={},S={Record:c,scope:{},state:g,currentVAO:null,targetVAO:null,restore:sa.oes_vertex_array_object?va:
function(){},createVAO:function(f){function m(f){var aa;if(Array.isArray(f))aa=f,g.elements&&g.ownsElements&&g.elements.destroy(),g.elements=null,g.ownsElements=!1,g.offset=0,g.count=0,g.instances=-1,g.primitive=4;else{p("object"===typeof f,"invalid arguments for create vao");p("attributes"in f,"must specify attributes for vao");if(f.elements){var b=f.elements;g.ownsElements?("function"===typeof b&&"elements"===b._reglType?g.elements.destroy():g.elements(b),g.ownsElements=!1):D.getElements(f.elements)?
(g.elements=f.elements,g.ownsElements=!1):(g.elements=D.create(f.elements),g.ownsElements=!0)}else g.elements=null,g.ownsElements=!1;aa=f.attributes;g.offset=0;g.count=-1;g.instances=-1;g.primitive=4;g.elements&&(g.count=g.elements._elements.vertCount,g.primitive=g.elements._elements.primType);"offset"in f&&(g.offset=f.offset|0);"count"in f&&(g.count=f.count|0);"instances"in f&&(g.instances=f.instances|0);"primitive"in f&&(p(f.primitive in a,"bad primitive type: "+f.primitive),g.primitive=a[f.primitive]);
p.optional(function(){for(var b=Q(f),a=0;a<b.length;++a)p(0<=u.indexOf(b[a]),'invalid option for vao: "'+b[a]+'" valid options are '+u)});p(Array.isArray(aa),"attributes must be an array")}p(aa.length<h,"too many attributes");p(0<aa.length,"must specify at least one attribute");var b={},k=g.attributes;k.length=aa.length;for(var X=0;X<aa.length;++X){var A=aa[X],n=k[X]=new c,C=A.data||A;if(Array.isArray(C)||d(C)||r(C)){var y;g.buffers[X]&&(y=g.buffers[X],d(C)&&y._buffer.byteLength>=C.byteLength?y.subdata(C):
(y.destroy(),g.buffers[X]=null));g.buffers[X]||(y=g.buffers[X]=v.create(A,34962,!1,!0));n.buffer=v.getBuffer(y);n.size=n.buffer.dimension|0;n.normalized=!1;n.type=n.buffer.dtype;n.offset=0;n.stride=0;n.divisor=0;n.state=1;b[X]=1}else v.getBuffer(A)?(n.buffer=v.getBuffer(A),n.size=n.buffer.dimension|0,n.normalized=!1,n.type=n.buffer.dtype,n.offset=0,n.stride=0,n.divisor=0,n.state=1):v.getBuffer(A.buffer)?(n.buffer=v.getBuffer(A.buffer),n.size=(+A.size||n.buffer.dimension)|0,n.normalized=!!A.normalized||
!1,"type"in A?(p.parameter(A.type,e,"invalid buffer type"),n.type=e[A.type]):n.type=n.buffer.dtype,n.offset=(A.offset||0)|0,n.stride=(A.stride||0)|0,n.divisor=(A.divisor||0)|0,n.state=1,p(1<=n.size&&4>=n.size,"size must be between 1 and 4"),p(0<=n.offset,"invalid offset"),p(0<=n.stride&&255>=n.stride,"stride must be between 0 and 255"),p(0<=n.divisor,"divisor must be positive"),p(!n.divisor||!!sa.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in A?(p(0<X,"first attribute must not be a constant"),
n.x=+A.x||0,n.y=+A.y||0,n.z=+A.z||0,n.w=+A.w||0,n.state=2):p(!1,"invalid attribute spec for location "+X)}for(y=0;y<g.buffers.length;++y)!b[y]&&g.buffers[y]&&(g.buffers[y].destroy(),g.buffers[y]=null);g.refresh();return m}var g=new P;I.vaoCount+=1;m.destroy=function(){for(var a=0;a<g.buffers.length;++a)g.buffers[a]&&g.buffers[a].destroy();g.buffers.length=0;g.ownsElements&&(g.elements.destroy(),g.elements=null,g.ownsElements=!1);g.destroy()};m._vao=g;m._reglType="vao";return m(f)},getVAO:function(a){return"function"===
typeof a&&a._vao?a._vao:null},destroyBuffer:function(a){for(var d=0;d<g.length;++d){var e=g[d];e.buffer===a&&(ja.disableVertexAttribArray(d),e.buffer=null)}},setVAO:sa.oes_vertex_array_object?C:F,clear:sa.oes_vertex_array_object?na:function(){}};P.prototype.bindAttrs=function(){for(var a=sa.angle_instanced_arrays,d=this.attributes,e=0;e<d.length;++e){var f=d[e];f.buffer?(ja.enableVertexAttribArray(e),ja.bindBuffer(34962,f.buffer.buffer),ja.vertexAttribPointer(e,f.size,f.type,f.normalized,f.stride,
f.offset),a&&f.divisor&&a.vertexAttribDivisorANGLE(e,f.divisor)):(ja.disableVertexAttribArray(e),ja.vertexAttrib4f(e,f.x,f.y,f.z,f.w))}for(a=d.length;a<h;++a)ja.disableVertexAttribArray(a);(a=D.getElements(this.elements))?ja.bindBuffer(34963,a.buffer.buffer):ja.bindBuffer(34963,null)};P.prototype.refresh=function(){var a=sa.oes_vertex_array_object;a&&(a.bindVertexArrayOES(this.vao),this.bindAttrs(),S.currentVAO=null,a.bindVertexArrayOES(null))};P.prototype.destroy=function(){if(this.vao){var a=sa.oes_vertex_array_object;
this===S.currentVAO&&(S.currentVAO=null,a.bindVertexArrayOES(null));a.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);A[this.id]&&(delete A[this.id],--I.vaoCount)};return S}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(B,w,Va){function c(a){return n[Object.prototype.toString.call(a)]|
0}function Q(a,d){for(var e=0;e<d.length;++e)a[e]=d[e]}function p(a,d,e,c,r,n,h){for(var g=0,f=0;f<e;++f)for(var A=0;A<c;++A)a[g++]=d[r*f+n*A+h]}var y=B("./util/sorted-object-keys"),e=B("./util/check"),d=B("./util/is-typed-array"),r=B("./util/is-ndarray"),a=B("./util/values"),u=B("./util/pool");Va=B("./util/flatten");var ja=Va.flatten,sa=Va.shape,n=B("./constants/arraytypes.json"),I=B("./constants/dtypes.json"),v=B("./constants/usage.json"),D=[];D[5120]=1;D[5122]=2;D[5124]=4;D[5121]=1;D[5123]=2;D[5125]=
4;D[5126]=4;w.exports=function(n,C,F,na){function P(a){this.id=f++;this.buffer=n.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;F.profile&&(this.stats={size:0})}function va(a,d,e){a.byteLength=d.byteLength;n.bufferData(a.type,d,e)}function h(a,f,g,h,n,b){a.usage=g;if(Array.isArray(f)){if(a.dtype=h||5126,0<f.length)if(Array.isArray(f[0])){n=sa(f);for(var k=h=1;k<n.length;++k)h*=n[k];a.dimension=h;f=ja(f,n,a.dtype);va(a,f,g);b?
a.persistentData=f:u.freeType(f)}else"number"===typeof f[0]?(a.dimension=n,n=u.allocType(a.dtype,f.length),Q(n,f),va(a,n,g),b?a.persistentData=n:u.freeType(n)):d(f[0])?(a.dimension=f[0].length,a.dtype=h||c(f[0])||5126,f=ja(f,[f.length,f[0].length],a.dtype),va(a,f,g),b?a.persistentData=f:u.freeType(f)):e.raise("invalid buffer data")}else if(d(f))a.dtype=h||c(f),a.dimension=n,va(a,f,g),b&&(a.persistentData=new Uint8Array(new Uint8Array(f.buffer)));else if(r(f)){n=f.shape;var X=f.stride,k=f.offset,A=
0,v=0,y=0,C=0;1===n.length?(A=n[0],v=1,y=X[0],C=0):2===n.length?(A=n[0],v=n[1],y=X[0],C=X[1]):e.raise("invalid shape");a.dtype=h||c(f.data)||5126;a.dimension=v;n=u.allocType(a.dtype,A*v);p(n,f.data,A,v,y,C,k);va(a,n,g);b?a.persistentData=n:u.freeType(n)}else f instanceof ArrayBuffer?(a.dtype=5121,a.dimension=n,va(a,f,g),b&&(a.persistentData=new Uint8Array(new Uint8Array(f)))):e.raise("invalid buffer data")}function g(a){C.bufferCount--;na(a);var d=a.buffer;e(d,"buffer must not be deleted already");
n.deleteBuffer(d);a.buffer=null;delete A[a.id]}var f=0,A={};P.prototype.bind=function(){n.bindBuffer(this.type,this.buffer)};P.prototype.destroy=function(){g(this)};var S=[];F.profile&&(C.getTotalBufferSize=function(){var a=0;y(A).forEach(function(d){a+=A[d].stats.size});return a});return{create:function(a,f,y,H){function S(a){var b=35044,f=null,g=0,c=0,m=1;Array.isArray(a)||d(a)||r(a)||a instanceof ArrayBuffer?f=a:"number"===typeof a?g=a|0:a&&(e.type(a,"object","buffer arguments must be an object, a number or an array"),
"data"in a&&(e(null===f||Array.isArray(f)||d(f)||r(f),"invalid data for buffer"),f=a.data),"usage"in a&&(e.parameter(a.usage,v,"invalid buffer usage"),b=v[a.usage]),"type"in a&&(e.parameter(a.type,I,"invalid buffer type"),c=I[a.type]),"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),m=a.dimension|0),"length"in a&&(e.nni(g,"buffer length must be a nonnegative integer"),g=a.length|0));k.bind();f?h(k,f,b,c,m,H):(g&&n.bufferData(k.type,g,b),k.dtype=c||5121,k.usage=b,k.dimension=m,k.byteLength=
g);F.profile&&(k.stats.size=k.byteLength*D[k.dtype]);return S}function b(a,b){e(b+a.byteLength<=k.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+b+" to a buffer of size "+k.byteLength);n.bufferSubData(k.type,b,a)}C.bufferCount++;var k=new P(f);A[k.id]=k;y||S(a);S._reglType="buffer";S._buffer=k;S.subdata=function(a,f){var g=(f||0)|0,m;k.bind();if(d(a)||a instanceof ArrayBuffer)b(a,g);else if(Array.isArray(a)){if(0<a.length)if("number"===
typeof a[0]){var h=u.allocType(k.dtype,a.length);Q(h,a);b(h,g);u.freeType(h)}else Array.isArray(a[0])||d(a[0])?(m=sa(a),h=ja(a,m,k.dtype),b(h,g),u.freeType(h)):e.raise("invalid buffer data")}else if(r(a)){m=a.shape;var n=a.stride,A=h=0,v=0,y=0;1===m.length?(h=m[0],A=1,v=n[0],y=0):2===m.length?(h=m[0],A=m[1],v=n[0],y=n[1]):e.raise("invalid shape");m=Array.isArray(a.data)?k.dtype:c(a.data);m=u.allocType(m,h*A);p(m,a.data,h,A,v,y,a.offset);b(m,g);u.freeType(m)}else e.raise("invalid data for buffer subdata");
return S};F.profile&&(S.stats=k.stats);S.destroy=function(){g(k)};return S},createStream:function(a,d){var f=S.pop();f||(f=new P(a));f.bind();h(f,d,35040,0,1,!1);return f},destroyStream:function(a){S.push(a)},clear:function(){a(A).forEach(g);S.forEach(g)},getBuffer:function(a){return a&&a._buffer instanceof P?a._buffer:null},restore:function(){a(A).forEach(function(a){a.buffer=n.createBuffer();n.bindBuffer(a.type,a.buffer);n.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:h}}},
{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(B,w,Va){w.exports={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(B,w,Va){w.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(B,w,Va){w.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,"triangle strip":5,"triangle fan":6}},{}],7:[function(B,w,Va){w.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(B,w,Va){function c(a){return Array.isArray(a)||n(a)||I(a)}function Q(a){return a.sort(function(a,
d){return"viewport"===a?-1:"viewport"===d?1:a<d?-1:1})}function p(a,d,f,e){this.thisDep=a;this.contextDep=d;this.propDep=f;this.append=e}function y(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function e(a){return new p(!1,!1,!1,a)}function d(a,d){var f=a.type;if(0===f)return f=a.data.length,new p(!0,1<=f,2<=f,d);if(4===f)return f=a.data,new p(f.thisDep,f.contextDep,f.propDep,d);if(5===f)return new p(!1,!1,!1,d);if(6===f){for(var e=f=!1,g=!1,b=0;b<a.data.length;++b){var k=a.data[b];1===k.type?
g=!0:2===k.type?e=!0:3===k.type?f=!0:0===k.type?(f=!0,k=k.data,1<=k&&(e=!0),2<=k&&(g=!0)):4===k.type&&(f=f||k.data.thisDep,e=e||k.data.contextDep,g=g||k.data.propDep)}return new p(f,e,g,d)}return new p(3===f,2===f,1===f,d)}var r=B("./util/sorted-object-keys"),a=B("./util/check"),u=B("./util/extend"),ja=B("./util/codegen"),sa=B("./util/loop"),n=B("./util/is-typed-array"),I=B("./util/is-ndarray"),v=B("./util/is-array-like"),D=B("./dynamic"),L=B("./constants/primitives.json"),C=B("./constants/dtypes.json"),
F=["x","y","z","w"],na="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),P={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},va="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
h={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},g={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},f={frag:35632,vert:35633},A={cw:2304,ccw:2305},S=new p(!1,!1,!1,function(){});w.exports=function(n,m,I,H,da,b,k,X,pa,ze,jb,Gb,ua,Na,Y){function N(a){return a.replace(".","_")}function M(a,q,b){var d=N(a);
ba.push(a);x[d]=G[d]=!!b;O[d]=q}function T(a,q,b){var d=N(a);ba.push(a);Array.isArray(b)?(G[d]=b.slice(),x[d]=b.slice()):G[d]=x[d]=b;za[d]=q}function B(){var b=ja(),q=b.link,d=b.global;b.id=mc++;b.batchId="0";var f=q(ka),e=b.shared={props:"a0"};r(ka).forEach(function(a){e[a]=d.def(f,".",a)});a.optional(function(){b.CHECK=q(a);b.commandStr=a.guessCommand();b.command=q(b.commandStr);b.assert=function(a,b,d){a("if(!(",b,"))",this.CHECK,".commandRaise(",q(d),",",this.command,");")};l.invalidBlendCombinations=
va});var O=b.next={},g=b.current={};r(za).forEach(function(a){Array.isArray(G[a])&&(O[a]=d.def(e.next,".",a),g[a]=d.def(e.current,".",a))});var k=b.constants={};r(l).forEach(function(a){k[a]=d.def(JSON.stringify(l[a]))});b.invoke=function(a,d){switch(d.type){case 0:var f=["this",e.context,e.props,b.batchId];return a.def(q(d.data),".call(",f.slice(0,Math.max(d.data.length+1,4)),")");case 1:return a.def(e.props,d.data);case 2:return a.def(e.context,d.data);case 3:return a.def("this",d.data);case 4:return d.data.append(b,
a),d.data.ref;case 5:return d.data.toString();case 6:return d.data.map(function(q){return b.invoke(a,q)})}};b.attribCache={};var bd={};b.scopeAttrib=function(a){a=m.id(a);if(a in bd)return bd[a];var b=ze.scope[a];b||(b=ze.scope[a]=new ga);return bd[a]=q(b)};return b}function J(a){var q=a["static"];a=a.dynamic;var b;if("profile"in q){var f=!!q.profile;b=e(function(a,q){return f});b.enable=f}else if("profile"in a){var l=a.profile;b=d(l,function(a,q){return a.invoke(q,l)})}return b}function Zb(b,q){var f=
b["static"],l=b.dynamic;if("framebuffer"in f){var O=f.framebuffer;return O?(O=X.getFramebuffer(O),a.command(O,"invalid framebuffer object"),e(function(a,q){var b=a.link(O),d=a.shared;q.set(d.framebuffer,".next",b);d=d.context;q.set(d,".framebufferWidth",b+".width");q.set(d,".framebufferHeight",b+".height");return b})):e(function(a,q){var b=a.shared;q.set(b.framebuffer,".next","null");b=b.context;q.set(b,".framebufferWidth",b+".drawingBufferWidth");q.set(b,".framebufferHeight",b+".drawingBufferHeight");
return"null"})}if("framebuffer"in l){var g=l.framebuffer;return d(g,function(b,q){var d=b.invoke(q,g),f=b.shared,l=f.framebuffer,e=q.def(l,".getFramebuffer(",d,")");a.optional(function(){b.assert(q,"!"+d+"||"+e,"invalid framebuffer object")});q.set(l,".next",e);f=f.context;q.set(f,".framebufferWidth",e+"?"+e+".width:"+f+".drawingBufferWidth");q.set(f,".framebufferHeight",e+"?"+e+".height:"+f+".drawingBufferHeight");return e})}return null}function Ja(b,q,f){function l(b){if(b in e){var ea=e[b];a.commandType(ea,
"object","invalid "+b,f.commandStr);var g=!0,k=ea.x|0,h=ea.y|0,m,c;"width"in ea?(m=ea.width|0,a.command(0<=m,"invalid "+b,f.commandStr)):g=!1;"height"in ea?(c=ea.height|0,a.command(0<=c,"invalid "+b,f.commandStr)):g=!1;return new p(!g&&q&&q.thisDep,!g&&q&&q.contextDep,!g&&q&&q.propDep,function(a,b){var q=a.shared.context,d=m;"width"in ea||(d=b.def(q,".","framebufferWidth","-",k));var f=c;"height"in ea||(f=b.def(q,".","framebufferHeight","-",h));return[k,h,d,f]})}if(b in O){var n=O[b],g=d(n,function(q,
d){var f=q.invoke(d,n);a.optional(function(){q.assert(d,f+"&&typeof "+f+'==="object"',"invalid "+b)});var l=q.shared.context,e=d.def(f,".x|0"),ea=d.def(f,".y|0"),g=d.def('"width" in ',f,"?",f,".width|0:","(",l,".","framebufferWidth","-",e,")"),O=d.def('"height" in ',f,"?",f,".height|0:","(",l,".","framebufferHeight","-",ea,")");a.optional(function(){q.assert(d,g+">=0&&"+O+">=0","invalid "+b)});return[e,ea,g,O]});q&&(g.thisDep=g.thisDep||q.thisDep,g.contextDep=g.contextDep||q.contextDep,g.propDep=
g.propDep||q.propDep);return g}return q?new p(q.thisDep,q.contextDep,q.propDep,function(a,b){var q=a.shared.context;return[0,0,b.def(q,".","framebufferWidth"),b.def(q,".","framebufferHeight")]}):null}var e=b["static"],O=b.dynamic;if(b=l("viewport")){var g=b;b=new p(b.thisDep,b.contextDep,b.propDep,function(a,b){var q=g.append(a,b),d=a.shared.context;b.set(d,".viewportWidth",q[2]);b.set(d,".viewportHeight",q[3]);return q})}return{viewport:b,scissor_box:l("scissor.box")}}function R(b,q){var d=b["static"];
if("string"===typeof d.frag&&"string"===typeof d.vert){if(0<r(q.dynamic).length)return null;var d=q["static"],f=r(d);if(0<f.length&&"number"===typeof d[f[0]]){for(var l=[],e=0;e<f.length;++e)a("number"===typeof d[f[e]],"must specify all vertex attribute locations when using vaos"),l.push([d[f[e]]|0,f[e]]);return l}}return null}function t(b,q,l){function g(b){if(b in O){var q=m.id(O[b]);a.optional(function(){jb.shader(f[b],q,a.guessCommand())});var l=e(function(){return q});l.id=q;return l}if(b in
k){var ea=k[b];return d(ea,function(q,d){var l=q.invoke(d,ea),e=d.def(q.shared.strings,".id(",l,")");a.optional(function(){d(q.shared.shader,".shader(",f[b],",",e,",",q.command,");")});return e})}return null}var O=b["static"],k=b.dynamic,h=g("frag"),c=g("vert"),bd=null;y(h)&&y(c)?(bd=jb.program(c.id,h.id,null,l),b=e(function(a,b){return a.link(bd)})):b=new p(h&&h.thisDep||c&&c.thisDep,h&&h.contextDep||c&&c.contextDep,h&&h.propDep||c&&c.propDep,function(b,q){var d=b.shared.shader,f;f=h?h.append(b,
q):q.def(d,".","frag");var l;l=c?c.append(b,q):q.def(d,".","vert");var e=d+".program("+l+","+f;a.optional(function(){e+=","+b.command});return q.def(e+")")});return{frag:h,vert:c,progVar:b,program:bd}}function ha(f,q){function l(b,f){if(b in g){var ea=g[b]|0;f?k.offset=ea:k.instances=ea;a.command(!f||0<=ea,"invalid "+b,q.commandStr);return e(function(a,b){f&&(a.OFFSET=ea);return ea})}if(b in O){var ud=O[b];return d(ud,function(q,d){var l=q.invoke(d,ud);f&&(q.OFFSET=l,a.optional(function(){q.assert(d,
l+">=0","invalid "+b)}));return l})}if(f){if(bd)return e(function(a,b){return a.OFFSET=0});if(h)return new p(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(h)return new p(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var g=f["static"],O=f.dynamic,k={},h=!1,m=function(){if("vao"in g){var a=g.vao;null!==a&&null===ze.getVAO(a)&&
(a=ze.createVAO(a));h=!0;k.vao=a;return e(function(b){var q=ze.getVAO(a);return q?b.link(q):"null"})}if("vao"in O){h=!0;var b=O.vao;return d(b,function(a,q){var d=a.invoke(q,b);return q.def(a.shared.vao+".getVAO("+d+")")})}return null}(),bd=!1,n=function(){if("elements"in g){var f=g.elements;k.elements=f;if(c(f)){var l=k.elements=b.create(f,!0),f=b.getElements(l);bd=!0}else f&&(f=b.getElements(f),bd=!0,a.command(f,"invalid elements",q.commandStr));l=e(function(a,b){if(f){var q=a.link(f);return a.ELEMENTS=
q}return a.ELEMENTS=null});l.value=f;return l}if("elements"in O){bd=!0;var ea=O.elements;return d(ea,function(b,q){var d=b.shared,f=d.isBufferArgs,d=d.elements,l=b.invoke(q,ea),e=q.def("null"),f=q.def(f,"(",l,")"),g=b.cond(f).then(e,"=",d,".createStream(",l,");")["else"](e,"=",d,".getElements(",l,");");a.optional(function(){b.assert(g["else"],"!"+l+"||"+e,"invalid elements")});q.entry(g);q.exit(b.cond(f).then(d,".destroyStream(",e,");"));return b.ELEMENTS=e})}return h?new p(m.thisDep,m.contextDep,
m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),ud=l("offset",!0),x=function(){if("primitive"in g){var b=g.primitive;k.primitive=b;a.commandParameter(b,L,"invalid primitve",q.commandStr);return e(function(a,q){return L[b]})}if("primitive"in O){var f=O.primitive;return d(f,function(b,q){var d=b.constants.primTypes,l=b.invoke(q,f);a.optional(function(){b.assert(q,l+" in "+d,"invalid primitive, must be one of "+
r(L))});return q.def(d,"[",l,"]")})}return bd?y(n)?n.value?e(function(a,b){return b.def(a.ELEMENTS,".primType")}):e(function(){return 4}):new p(n.thisDep,n.contextDep,n.propDep,function(a,b){var q=a.ELEMENTS;return b.def(q,"?",q,".primType:",4)}):h?new p(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),t=function(){if("count"in g){var b=g.count|0;k.count=b;a.command("number"===typeof b&&0<=b,"invalid vertex count",
q.commandStr);return e(function(){return b})}if("count"in O){var f=O.count;return d(f,function(b,q){var d=b.invoke(q,f);a.optional(function(){b.assert(q,"typeof "+d+'==="number"&&'+d+">=0&&"+d+"===("+d+"|0)","invalid vertex count")});return d})}if(bd){if(y(n)){if(n)return ud?new p(ud.thisDep,ud.contextDep,ud.propDep,function(b,q){var d=q.def(b.ELEMENTS,".vertCount-",b.OFFSET);a.optional(function(){b.assert(q,d+">=0","invalid vertex offset/element buffer too small")});return d}):e(function(a,b){return b.def(a.ELEMENTS,
".vertCount")});var l=e(function(){return-1});a.optional(function(){l.MISSING=!0});return l}var ea=new p(n.thisDep||ud.thisDep,n.contextDep||ud.contextDep,n.propDep||ud.propDep,function(a,b){var q=a.ELEMENTS;return a.OFFSET?b.def(q,"?",q,".vertCount-",a.OFFSET,":-1"):b.def(q,"?",q,".vertCount:-1")});a.optional(function(){ea.DYNAMIC=!0});return ea}return h?new p(m.thisDep,m.contextDep,m.propDep,function(a,b){return b.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),ka=
l("instances",!1);return{elements:n,primitive:x,count:t,instances:ka,offset:ud,vao:m,vaoActive:h,elementsActive:bd,"static":k}}function Z(b,q){var f=b["static"],l=b.dynamic,O={};ba.forEach(function(b){function ea(a,q){if(b in f){var g=a(f[b]);O[k]=e(function(){return g})}else if(b in l){var h=l[b];O[k]=d(h,function(a,b){return q(a,b,a.invoke(b,h))})}}var k=N(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return ea(function(d){a.commandType(d,
"boolean",b,q.commandStr);return d},function(q,d,f){a.optional(function(){q.assert(d,"typeof "+f+'==="boolean"',"invalid flag "+b,q.commandStr)});return f});case "depth.func":return ea(function(d){a.commandParameter(d,h,"invalid "+b,q.commandStr);return h[d]},function(q,d,f){var l=q.constants.compareFuncs;a.optional(function(){q.assert(d,f+" in "+l,"invalid "+b+", must be one of "+r(h))});return d.def(l,"[",f,"]")});case "depth.range":return ea(function(b){a.command(v(b)&&2===b.length&&"number"===
typeof b[0]&&"number"===typeof b[1]&&b[0]<=b[1],"depth range is 2d array",q.commandStr);return b},function(b,q,d){a.optional(function(){b.assert(q,b.shared.isArrayLike+"("+d+")&&"+d+".length===2&&typeof "+d+'[0]==="number"&&typeof '+d+'[1]==="number"&&'+d+"[0]<="+d+"[1]","depth range must be a 2d array")});var f=q.def("+",d,"[0]"),l=q.def("+",d,"[1]");return[f,l]});case "blend.func":return ea(function(b){a.commandType(b,"object","blend.func",q.commandStr);var d="srcRGB"in b?b.srcRGB:b.src,f="srcAlpha"in
b?b.srcAlpha:b.src,l="dstRGB"in b?b.dstRGB:b.dst;b="dstAlpha"in b?b.dstAlpha:b.dst;a.commandParameter(d,P,k+".srcRGB",q.commandStr);a.commandParameter(f,P,k+".srcAlpha",q.commandStr);a.commandParameter(l,P,k+".dstRGB",q.commandStr);a.commandParameter(b,P,k+".dstAlpha",q.commandStr);a.command(-1===va.indexOf(d+", "+l),"unallowed blending combination (srcRGB, dstRGB) = ("+d+", "+l+")",q.commandStr);return[P[d],P[l],P[f],P[b]]},function(q,d,f){function l(ea,g){var O=d.def('"',ea,g,'" in ',f,"?",f,".",
ea,g,":",f,".",ea);a.optional(function(){q.assert(d,O+" in "+e,"invalid "+b+"."+ea+g+", must be one of "+r(P))});return O}var e=q.constants.blendFuncs;a.optional(function(){q.assert(d,f+"&&typeof "+f+'==="object"',"invalid blend func, must be an object")});var ea=l("src","RGB"),g=l("dst","RGB");a.optional(function(){q.assert(d,q.constants.invalidBlendCombinations+".indexOf("+ea+'+", "+'+g+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var O=d.def(e,"[",ea,"]"),k=d.def(e,"[",
l("src","Alpha"),"]"),h=d.def(e,"[",g,"]"),m=d.def(e,"[",l("dst","Alpha"),"]");return[O,h,k,m]});case "blend.equation":return ea(function(d){if("string"===typeof d)return a.commandParameter(d,ta,"invalid "+b,q.commandStr),[ta[d],ta[d]];if("object"===typeof d)return a.commandParameter(d.rgb,ta,b+".rgb",q.commandStr),a.commandParameter(d.alpha,ta,b+".alpha",q.commandStr),[ta[d.rgb],ta[d.alpha]];a.commandRaise("invalid blend.equation",q.commandStr)},function(q,d,f){var l=q.constants.blendEquations,e=
d.def(),ea=d.def(),g=q.cond("typeof ",f,'==="string"');a.optional(function(){function a(b,d,f){q.assert(b,f+" in "+l,"invalid "+d+", must be one of "+r(ta))}a(g.then,b,f);q.assert(g["else"],f+"&&typeof "+f+'==="object"',"invalid "+b);a(g["else"],b+".rgb",f+".rgb");a(g["else"],b+".alpha",f+".alpha")});g.then(e,"=",ea,"=",l,"[",f,"];");g["else"](e,"=",l,"[",f,".rgb];",ea,"=",l,"[",f,".alpha];");d(g);return[e,ea]});case "blend.color":return ea(function(b){a.command(v(b)&&4===b.length,"blend.color must be a 4d array",
q.commandStr);return sa(4,function(a){return+b[a]})},function(b,q,d){a.optional(function(){b.assert(q,b.shared.isArrayLike+"("+d+")&&"+d+".length===4","blend.color must be a 4d array")});return sa(4,function(a){return q.def("+",d,"[",a,"]")})});case "stencil.mask":return ea(function(b){a.commandType(b,"number",k,q.commandStr);return b|0},function(b,q,d){a.optional(function(){b.assert(q,"typeof "+d+'==="number"',"invalid stencil.mask")});return q.def(d,"|0")});case "stencil.func":return ea(function(d){a.commandType(d,
"object",k,q.commandStr);var f=d.cmp||"keep",l=d.ref||0;d="mask"in d?d.mask:-1;a.commandParameter(f,h,b+".cmp",q.commandStr);a.commandType(l,"number",b+".ref",q.commandStr);a.commandType(d,"number",b+".mask",q.commandStr);return[h[f],l,d]},function(b,q,d){var f=b.constants.compareFuncs;a.optional(function(){function a(){b.assert(q,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(d+"&&typeof ",d,'==="object"');a('!("cmp" in ',d,")||(",d,".cmp in ",f,")")});var l=q.def('"cmp" in ',
d,"?",f,"[",d,".cmp]",":",7680),e=q.def(d,".ref|0"),g=q.def('"mask" in ',d,"?",d,".mask|0:-1");return[l,e,g]});case "stencil.opFront":case "stencil.opBack":return ea(function(d){a.commandType(d,"object",k,q.commandStr);var f=d.fail||"keep",l=d.zfail||"keep";d=d.zpass||"keep";a.commandParameter(f,g,b+".fail",q.commandStr);a.commandParameter(l,g,b+".zfail",q.commandStr);a.commandParameter(d,g,b+".zpass",q.commandStr);return["stencil.opBack"===b?1029:1028,g[f],g[l],g[d]]},function(d,q,f){function l(ea){a.optional(function(){d.assert(q,
'!("'+ea+'" in '+f+")||("+f+"."+ea+" in "+e+")","invalid "+b+"."+ea+", must be one of "+r(g))});return q.def('"',ea,'" in ',f,"?",e,"[",f,".",ea,"]:",7680)}var e=d.constants.stencilOps;a.optional(function(){d.assert(q,f+"&&typeof "+f+'==="object"',"invalid "+b)});return["stencil.opBack"===b?1029:1028,l("fail"),l("zfail"),l("zpass")]});case "polygonOffset.offset":return ea(function(b){a.commandType(b,"object",k,q.commandStr);var d=b.factor|0;b=b.units|0;a.commandType(d,"number",k+".factor",q.commandStr);
a.commandType(b,"number",k+".units",q.commandStr);return[d,b]},function(d,q,f){a.optional(function(){d.assert(q,f+"&&typeof "+f+'==="object"',"invalid "+b)});var l=q.def(f,".factor|0"),e=q.def(f,".units|0");return[l,e]});case "cull.face":return ea(function(b){var d=0;"front"===b?d=1028:"back"===b&&(d=1029);a.command(!!d,k,q.commandStr);return d},function(b,d,q){a.optional(function(){b.assert(d,q+'==="front"||'+q+'==="back"',"invalid cull.face")});return d.def(q,'==="front"?',1028,":",1029)});case "lineWidth":return ea(function(b){a.command("number"===
typeof b&&b>=H.lineWidthDims[0]&&b<=H.lineWidthDims[1],"invalid line width, must be a positive number between "+H.lineWidthDims[0]+" and "+H.lineWidthDims[1],q.commandStr);return b},function(b,d,q){a.optional(function(){b.assert(d,"typeof "+q+'==="number"&&'+q+">="+H.lineWidthDims[0]+"&&"+q+"<="+H.lineWidthDims[1],"invalid line width")});return q});case "frontFace":return ea(function(b){a.commandParameter(b,A,k,q.commandStr);return A[b]},function(b,d,q){a.optional(function(){b.assert(d,q+'==="cw"||'+
q+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(q+'==="cw"?2304:2305')});case "colorMask":return ea(function(b){a.command(v(b)&&4===b.length,"color.mask must be length 4 array",q.commandStr);return b.map(function(b){return!!b})},function(b,d,q){a.optional(function(){b.assert(d,b.shared.isArrayLike+"("+q+")&&"+q+".length===4","invalid color.mask")});return sa(4,function(b){return"!!"+q+"["+b+"]"})});case "sample.coverage":return ea(function(b){a.command("object"===typeof b&&
b,k,q.commandStr);var d="value"in b?b.value:1;b=!!b.invert;a.command("number"===typeof d&&0<=d&&1>=d,"sample.coverage.value must be a number between 0 and 1",q.commandStr);return[d,b]},function(b,d,q){a.optional(function(){b.assert(d,q+"&&typeof "+q+'==="object"',"invalid sample.coverage")});var f=d.def('"value" in ',q,"?+",q,".value:1"),l=d.def("!!",q,".invert");return[f,l]})}});return O}function Aa(b,q){var f=b["static"],l=b.dynamic,g={};r(f).forEach(function(b){var d=f[b],l;if("number"===typeof d||
"boolean"===typeof d)l=e(function(){return d});else if("function"===typeof d){var ea=d._reglType;"texture2d"===ea||"textureCube"===ea?l=e(function(b){return b.link(d)}):"framebuffer"===ea||"framebufferCube"===ea?(a.command(0<d.color.length,'missing color attachment for framebuffer sent to uniform "'+b+'"',q.commandStr),l=e(function(b){return b.link(d.color[0])})):a.commandRaise('invalid data for uniform "'+b+'"',q.commandStr)}else v(d)?l=e(function(q){return q.global.def("[",sa(d.length,function(f){a.command("number"===
typeof d[f]||"boolean"===typeof d[f],"invalid uniform "+b,q.commandStr);return d[f]}),"]")}):a.commandRaise('invalid or missing data for uniform "'+b+'"',q.commandStr);l.value=d;g[b]=l});r(l).forEach(function(b){var a=l[b];g[b]=d(a,function(b,d){return b.invoke(d,a)})});return g}function Oa(b,q){var f=b["static"],l=b.dynamic,g={};r(f).forEach(function(b){var d=f[b],l=m.id(b),ea=new ga;if(c(d))ea.state=1,ea.buffer=da.getBuffer(da.create(d,34962,!1,!0)),ea.type=0;else{var O=da.getBuffer(d);if(O)ea.state=
1,ea.buffer=O,ea.type=0;else if(a.command("object"===typeof d&&d,"invalid data for attribute "+b,q.commandStr),"constant"in d){var k=d.constant;ea.buffer="null";ea.state=2;"number"===typeof k?ea.x=k:(a.command(v(k)&&0<k.length&&4>=k.length,"invalid constant for attribute "+b,q.commandStr),F.forEach(function(b,a){a<k.length&&(ea[b]=k[a])}))}else{O=c(d.buffer)?da.getBuffer(da.create(d.buffer,34962,!1,!0)):da.getBuffer(d.buffer);a.command(!!O,'missing buffer for attribute "'+b+'"',q.commandStr);var h=
d.offset|0;a.command(0<=h,'invalid offset for attribute "'+b+'"',q.commandStr);var n=d.stride|0;a.command(0<=n&&256>n,'invalid stride for attribute "'+b+'", must be integer betweeen [0, 255]',q.commandStr);var x=d.size|0;a.command(!("size"in d)||0<x&&4>=x,'invalid size for attribute "'+b+'", must be 1,2,3,4',q.commandStr);var t=!!d.normalized,ka=0;"type"in d&&(a.commandParameter(d.type,C,"invalid type for attribute "+b,q.commandStr),ka=C[d.type]);var A=d.divisor|0;a.optional(function(){"divisor"in
d&&(a.command(0===A||V,'cannot specify divisor for attribute "'+b+'", instancing not supported',q.commandStr),a.command(0<=A,'invalid divisor for attribute "'+b+'"',q.commandStr));var f=q.commandStr,l="buffer offset divisor normalized type size stride".split(" ");r(d).forEach(function(d){a.command(0<=l.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+b+'" (valid parameters are '+l+")",f)})});ea.buffer=O;ea.state=1;ea.size=x;ea.normalized=t;ea.type=ka||O.dtype;ea.offset=h;ea.stride=n;
ea.divisor=A}}g[b]=e(function(b,a){var d=b.attribCache;if(l in d)return d[l];var q={isStream:!1};r(ea).forEach(function(b){q[b]=ea[b]});ea.buffer&&(q.buffer=b.link(ea.buffer),q.type=q.type||q.buffer+".dtype");return d[l]=q})});r(l).forEach(function(b){var q=l[b];g[b]=d(q,function(d,f){function l(b){f(h[b],"=",e,".",b,"|0;")}var e=d.invoke(f,q),ea=d.shared,g=d.constants,O=ea.isBufferArgs,k=ea.buffer;a.optional(function(){d.assert(f,e+"&&(typeof "+e+'==="object"||typeof '+e+'==="function")&&('+O+"("+
e+")||"+k+".getBuffer("+e+")||"+k+".getBuffer("+e+".buffer)||"+O+"("+e+'.buffer)||("constant" in '+e+"&&(typeof "+e+'.constant==="number"||'+ea.isArrayLike+"("+e+".constant))))",'invalid dynamic attribute "'+b+'"')});var h={isStream:f.def(!1)},m=new ga;m.state=1;r(m).forEach(function(b){h[b]=f.def(""+m[b])});var c=h.buffer,n=h.type;f("if(",O,"(",e,")){",h.isStream,"=true;",c,"=",k,".createStream(",34962,",",e,");",n,"=",c,".dtype;","}else{",c,"=",k,".getBuffer(",e,");","if(",c,"){",n,"=",c,".dtype;",
'}else if("constant" in ',e,"){",h.state,"=",2,";","if(typeof "+e+'.constant === "number"){',h[F[0]],"=",e,".constant;",F.slice(1).map(function(b){return h[b]}).join("="),"=0;","}else{",F.map(function(b,a){return h[b]+"="+e+".constant.length>"+a+"?"+e+".constant["+a+"]:0;"}).join(""),"}}else{","if(",O,"(",e,".buffer)){",c,"=",k,".createStream(",34962,",",e,".buffer);","}else{",c,"=",k,".getBuffer(",e,".buffer);","}",n,'="type" in ',e,"?",g.glTypes,"[",e,".type]:",c,".dtype;",h.normalized,"=!!",e,
".normalized;");l("size");l("offset");l("stride");l("divisor");f("}}");f.exit("if(",h.isStream,"){",k,".destroyStream(",c,");","}");return h})});return g}function w(b){var a=b["static"],f=b.dynamic,l={};r(a).forEach(function(b){var d=a[b];l[b]=e(function(b,a){return"number"===typeof d||"boolean"===typeof d?""+d:b.link(d)})});r(f).forEach(function(b){var a=f[b];l[b]=d(a,function(b,d){return b.invoke(d,a)})});return l}function bb(b,d,f,l,e){function g(b){var a=c[b];a&&(x[b]=a)}var O=b["static"],k=b.dynamic;
a.optional(function(){function b(q){r(q).forEach(function(b){a.command(0<=d.indexOf(b),'unknown parameter "'+b+'"',e.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ba);b(O);b(k)});var h=R(b,d),m=Zb(b,e),c=Ja(b,m,e),n=ha(b,e),x=Z(b,e),ka=t(b,e,h);g("viewport");g(N("scissor.box"));var A=0<r(x).length,m={framebuffer:m,draw:n,shader:ka,state:x,dirty:A,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};m.profile=J(b,e);m.uniforms=Aa(f,
e);m.drawVAO=m.scopeVAO=n.vao;if(!m.drawVAO&&ka.program&&!h&&I.angle_instanced_arrays&&n["static"].elements){var z=!0;b=ka.program.attributes.map(function(b){b=d["static"][b];z=z&&!!b;return b});if(z&&0<b.length){var u=ze.getVAO(ze.createVAO({attributes:b,elements:n["static"].elements}));m.drawVAO=new p(null,null,null,function(b,a){return b.link(u)});m.useVAO=!0}}h?m.useVAO=!0:m.attributes=Oa(d,e);m.context=w(l,e);return m}function U(b,a,d){var f=b.shared.context,l=b.scope();r(d).forEach(function(e){a.save(f,
"."+e);var g=d[e].append(b,a);Array.isArray(g)?l(f,".",e,"=[",g.join(),"];"):l(f,".",e,"=",g,";")});a(l)}function ob(b,a,d,f){var l=b.shared,e=l.gl,g=l.framebuffer,O;fa&&(O=a.def(l.extensions,".webgl_draw_buffers"));var k=b.constants,l=k.drawBuffer,k=k.backBuffer;b=d?d.append(b,a):a.def(g,".next");f||a("if(",b,"!==",g,".cur){");a("if(",b,"){",e,".bindFramebuffer(",36160,",",b,".framebuffer);");fa&&a(O,".drawBuffersWEBGL(",l,"[",b,".colorAttachments.length]);");a("}else{",e,".bindFramebuffer(",36160,
",null);");fa&&a(O,".drawBuffersWEBGL(",k,");");a("}",g,".cur=",b,";");f||a("}")}function ca(b,a,d){var f=b.shared,l=f.gl,e=b.current,g=b.next,k=f.current,h=f.next,m=b.cond(k,".dirty");ba.forEach(function(a){a=N(a);if(!(a in d.state)){var q,f;if(a in g){q=g[a];f=e[a];var c=sa(G[a].length,function(b){return m.def(q,"[",b,"]")});m(b.cond(c.map(function(b,a){return b+"!=="+f+"["+a+"]"}).join("||")).then(l,".",za[a],"(",c,");",c.map(function(b,a){return f+"["+a+"]="+b}).join(";"),";"))}else q=m.def(h,
".",a),c=b.cond(q,"!==",k,".",a),m(c),a in O?c(b.cond(q).then(l,".enable(",O[a],");")["else"](l,".disable(",O[a],");"),k,".",a,"=",q,";"):c(l,".",za[a],"(",q,");",k,".",a,"=",q,";")}});0===r(d.state).length&&m(k,".dirty=false;");a(m)}function oa(b,a,d,f){var l=b.shared,e=b.current,g=l.current,k=l.gl;Q(r(d)).forEach(function(l){var h=d[l];if(!f||f(h)){var m=h.append(b,a);if(O[l]){var c=O[l];y(h)?m?a(k,".enable(",c,");"):a(k,".disable(",c,");"):a(b.cond(m).then(k,".enable(",c,");")["else"](k,".disable(",
c,");"));a(g,".",l,"=",m,";")}else if(v(m)){var n=e[l];a(k,".",za[l],"(",m,");",m.map(function(b,a){return n+"["+a+"]="+b}).join(";"),";")}else a(k,".",za[l],"(",m,");",g,".",l,"=",m,";")}})}function fc(b,a){V&&(b.instancing=a.def(b.shared.extensions,".angle_instanced_arrays"))}function gc(b,a,d,f,l){function e(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(b){x=a.def();b(x,"=",e(),";");"string"===typeof l?b(m,".count+=",l,";"):b(m,".count++;");Na&&(f?(t=a.def(),
b(t,"=",n,".getNumPendingQueries();")):b(n,".beginQuery(",m,");"))}function O(b){b(m,".cpuTime+=",e(),"-",x,";");Na&&(f?b(n,".pushScopeStats(",t,",",n,".getNumPendingQueries(),",m,");"):b(n,".endQuery();"))}function k(b){var d=a.def(c,".profile");a(c,".profile=",b,";");a.exit(c,".profile=",d,";")}var h=b.shared,m=b.stats,c=h.current,n=h.timer;d=d.profile;var x,t;if(d){if(y(d)){d.enable?(g(a),O(a.exit),k("true")):k("false");return}d=d.append(b,a);k(d)}else d=a.def(c,".profile");h=b.block();g(h);a("if(",
d,"){",h,"}");b=b.block();O(b);a.exit("if(",d,"){",b,"}")}function rc(b,d,f,l,e){function g(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function O(a,f,l){function e(){d("if(!",c,".buffer){",h,".enableVertexAttribArray(",m,");}");var a=l.type,g;g=l.size?d.def(l.size,"||",f):f;d("if(",c,".type!==",a,"||",c,".size!==",g,"||",t.map(function(b){return c+"."+b+"!=="+l[b]}).join("||"),"){",h,
".bindBuffer(",34962,",",n,".buffer);",h,".vertexAttribPointer(",[m,g,a,l.normalized,l.stride,l.offset],");",c,".type=",a,";",c,".size=",g,";",t.map(function(b){return c+"."+b+"="+l[b]+";"}).join(""),"}");V&&(a=l.divisor,d("if(",c,".divisor!==",a,"){",b.instancing,".vertexAttribDivisorANGLE(",[m,a],");",c,".divisor=",a,";}"))}function g(){d("if(",c,".buffer){",h,".disableVertexAttribArray(",m,");",c,".buffer=null;","}if(",F.map(function(b,a){return c+"."+b+"!=="+x[a]}).join("||"),"){",h,".vertexAttrib4f(",
m,",",x,");",F.map(function(b,a){return c+"."+b+"="+x[a]+";"}).join(""),"}")}var h=k.gl,m=d.def(a,".location"),c=d.def(k.attributes,"[",m,"]");a=l.state;var n=l.buffer,x=[l.x,l.y,l.z,l.w],t=["buffer","normalized","offset","stride"];1===a?e():2===a?g():(d("if(",a,"===",1,"){"),e(),d("}else{"),g(),d("}"))}var k=b.shared;l.forEach(function(l){var k=l.name,h=f.attributes[k],m;if(h){if(!e(h))return;m=h.append(b,d)}else{if(!e(S))return;var c=b.scopeAttrib(k);a.optional(function(){b.assert(d,c+".state",
"missing attribute "+k)});m={};r(new ga).forEach(function(b){m[b]=d.def(c,".",b)})}O(b.link(l),g(l.info.type),m)})}function vd(b,d,f,l,e,g){for(var O=b.shared,k=O.gl,h,c=0;c<l.length;++c){var n=l[c],x=n.name,t=n.info.type,ka=f.uniforms[x],n=b.link(n)+".location",A;if(ka){if(!e(ka))continue;if(y(ka)){var r=ka.value;a.command(null!==r&&"undefined"!==typeof r,'missing uniform "'+x+'"',b.commandStr);if(35678===t||35680===t)a.command("function"===typeof r&&(35678===t&&("texture2d"===r._reglType||"framebuffer"===
r._reglType)||35680===t&&("textureCube"===r._reglType||"framebufferCube"===r._reglType)),"invalid texture for uniform "+x,b.commandStr),ka=b.link(r._texture||r.color[0]._texture),d(k,".uniform1i(",n,",",ka+".bind());"),d.exit(ka,".unbind();");else if(35674===t||35675===t||35676===t){a.optional(function(){a.command(v(r),"invalid matrix for uniform "+x,b.commandStr);a.command(35674===t&&4===r.length||35675===t&&9===r.length||35676===t&&16===r.length,"invalid length for matrix uniform "+x,b.commandStr)});
var ka=b.global.def("new Float32Array(["+Array.prototype.slice.call(r)+"])"),z=2;35675===t?z=3:35676===t&&(z=4);d(k,".uniformMatrix",z,"fv(",n,",false,",ka,");")}else{switch(t){case 5126:a.commandType(r,"number","uniform "+x,b.commandStr);h="1f";break;case 35664:a.command(v(r)&&2===r.length,"uniform "+x,b.commandStr);h="2f";break;case 35665:a.command(v(r)&&3===r.length,"uniform "+x,b.commandStr);h="3f";break;case 35666:a.command(v(r)&&4===r.length,"uniform "+x,b.commandStr);h="4f";break;case 35670:a.commandType(r,
"boolean","uniform "+x,b.commandStr);h="1i";break;case 5124:a.commandType(r,"number","uniform "+x,b.commandStr);h="1i";break;case 35671:a.command(v(r)&&2===r.length,"uniform "+x,b.commandStr);h="2i";break;case 35667:a.command(v(r)&&2===r.length,"uniform "+x,b.commandStr);h="2i";break;case 35672:a.command(v(r)&&3===r.length,"uniform "+x,b.commandStr);h="3i";break;case 35668:a.command(v(r)&&3===r.length,"uniform "+x,b.commandStr);h="3i";break;case 35673:a.command(v(r)&&4===r.length,"uniform "+x,b.commandStr);
h="4i";break;case 35669:a.command(v(r)&&4===r.length,"uniform "+x,b.commandStr),h="4i"}d(k,".uniform",h,"(",n,",",v(r)?Array.prototype.slice.call(r):r,");")}continue}else A=ka.append(b,d)}else{if(!e(S))continue;A=d.def(O.uniforms,"[",m.id(x),"]")}35678===t?(a(!Array.isArray(A),"must specify a scalar prop for textures"),d("if(",A,"&&",A,'._reglType==="framebuffer"){',A,"=",A,".color[0];","}")):35680===t&&(a(!Array.isArray(A),"must specify a scalar prop for cube maps"),d("if(",A,"&&",A,'._reglType==="framebufferCube"){',
A,"=",A,".color[0];","}"));a.optional(function(){function f(a,l){b.assert(d,a,'bad data or missing for uniform "'+x+'".  '+l)}function l(b){a(!Array.isArray(A),"must not specify an array type for uniform");f("typeof "+A+'==="'+b+'"',"invalid type, expected "+b)}function e(d,l){Array.isArray(A)?a(A.length===d,"must have length "+d):f(O.isArrayLike+"("+A+")&&"+A+".length==="+d,"invalid vector, should have length "+d,b.commandStr)}function g(d){a(!Array.isArray(A),"must not specify a value type");f("typeof "+
A+'==="function"&&'+A+'._reglType==="texture'+(3553===d?"2d":"Cube")+'"',"invalid texture type",b.commandStr)}switch(t){case 5124:l("number");break;case 35667:e(2,"number");break;case 35668:e(3,"number");break;case 35669:e(4,"number");break;case 5126:l("number");break;case 35664:e(2,"number");break;case 35665:e(3,"number");break;case 35666:e(4,"number");break;case 35670:l("boolean");break;case 35671:e(2,"boolean");break;case 35672:e(3,"boolean");break;case 35673:e(4,"boolean");break;case 35674:e(4,
"number");break;case 35675:e(9,"number");break;case 35676:e(16,"number");break;case 35678:g(3553);break;case 35680:g(34067)}});ka=1;switch(t){case 35678:case 35680:ka=d.def(A,"._texture");d(k,".uniform1i(",n,",",ka,".bind());");d.exit(ka,".unbind();");continue;case 5124:case 35670:h="1i";break;case 35667:case 35671:h="2i";ka=2;break;case 35668:case 35672:h="3i";ka=3;break;case 35669:case 35673:h="4i";ka=4;break;case 5126:h="1f";break;case 35664:h="2f";ka=2;break;case 35665:h="3f";ka=3;break;case 35666:h=
"4f";ka=4;break;case 35674:h="Matrix2fv";break;case 35675:h="Matrix3fv";break;case 35676:h="Matrix4fv"}if("M"===h.charAt(0)){d(k,".uniform",h,"(",n,",");var n=Math.pow(t-35674+2,2),u=b.global.def("new Float32Array(",n,")");Array.isArray(A)?d("false,(",sa(n,function(b){return u+"["+b+"]="+A[b]}),",",u,")"):d("false,(Array.isArray(",A,")||",A," instanceof Float32Array)?",A,":(",sa(n,function(b){return u+"["+b+"]="+A+"["+b+"]"}),",",u,")");d(");")}else{if(1<ka){for(var z=[],X=[],za=0;za<ka;++za)Array.isArray(A)?
X.push(A[za]):X.push(d.def(A+"["+za+"]")),g&&z.push(d.def());g&&d("if(!",b.batchId,"||",z.map(function(b,a){return b+"!=="+X[a]}).join("||"),"){",z.map(function(b,a){return b+"="+X[a]+";"}).join(""));d(k,".uniform",h,"(",n,",",X.join(","),");")}else a(!Array.isArray(A),"uniform value must not be an array"),g&&(ka=d.def(),d("if(!",b.batchId,"||",ka,"!==",A,"){",ka,"=",A,";")),d(k,".uniform",h,"(",n,",",A,");");g&&d("}")}}}function xc(b,d,f,l){function e(a){var g=c[a];return g?g.contextDep&&l.contextDynamic||
g.propDep?g.append(b,f):g.append(b,d):d.def(m,".",a)}function g(){function b(){f(ka,".drawElementsInstancedANGLE(",[x,A,z,r+"<<(("+z+"-5121)>>1)",t],");")}function a(){f(ka,".drawArraysInstancedANGLE(",[x,r,A,t],");")}n&&"null"!==n?u?b():(f("if(",n,"){"),b(),f("}else{"),a(),f("}")):a()}function O(){function b(){f(h+".drawElements("+[x,A,z,r+"<<(("+z+"-5121)>>1)"]+");")}function a(){f(h+".drawArrays("+[x,r,A]+");")}n&&"null"!==n?u?b():(f("if(",n,"){"),b(),f("}else{"),a(),f("}")):a()}var k=b.shared,
h=k.gl,m=k.draw,c=l.draw,n=function(){var a=c.elements,e=d;if(a){if(a.contextDep&&l.contextDynamic||a.propDep)e=f;a=a.append(b,e);c.elementsActive&&e("if("+a+")"+h+".bindBuffer(34963,"+a+".buffer.buffer);")}else a=e.def(),e(a,"=",m,".","elements",";","if(",a,"){",h,".bindBuffer(",34963,",",a,".buffer.buffer);}","else if(",k.vao,".currentVAO){",a,"=",b.shared.elements+".getElements("+k.vao,".currentVAO.elements);",ma?"":"if("+a+")"+h+".bindBuffer(34963,"+a+".buffer.buffer);","}");return a}(),x=e("primitive"),
r=e("offset"),A=function(){var e=c.count,g,k=d;if(e){if(e.contextDep&&l.contextDynamic||e.propDep)k=f;g=e.append(b,k);a.optional(function(){e.MISSING&&b.assert(d,"false","missing vertex count");e.DYNAMIC&&b.assert(k,g+">=0","missing vertex count")})}else g=k.def(m,".","count"),a.optional(function(){b.assert(k,g+">=0","missing vertex count")});return g}();if("number"===typeof A){if(0===A)return}else f("if(",A,"){"),f.exit("}");var t,ka;V&&(t=e("instances"),ka=b.instancing);var z=n+".type",u=c.elements&&
y(c.elements)&&!c.vaoActive;V&&("number"!==typeof t||0<=t)?"string"===typeof t?(f("if(",t,">0){"),g(),f("}else if(",t,"<0){"),O(),f("}")):g():O()}function W(b,d,f,l,e){var g=B();e=g.proc("body",e);a.optional(function(){g.commandStr=d.commandStr;g.command=g.link(d.commandStr)});V&&(g.instancing=e.def(g.shared.extensions,".angle_instanced_arrays"));b(g,e,f,l);return g.compile().body}function K(b,a,d,f){fc(b,a);d.useVAO?d.drawVAO?a(b.shared.vao,".setVAO(",d.drawVAO.append(b,a),");"):a(b.shared.vao,".setVAO(",
b.shared.vao,".targetVAO);"):(a(b.shared.vao,".setVAO(null);"),rc(b,a,d,f.attributes,function(){return!0}));vd(b,a,d,f.uniforms,function(){return!0},!1);xc(b,a,a,d)}function ia(b,a){var d=b.proc("draw",1);fc(b,d);U(b,d,a.context);ob(b,d,a.framebuffer);ca(b,d,a);oa(b,d,a.state);gc(b,d,a,!1,!0);var f=a.shader.progVar.append(b,d);d(b.shared.gl,".useProgram(",f,".program);");if(a.shader.program)K(b,d,a,a.shader.program);else{d(b.shared.vao,".setVAO(null);");var l=b.global.def("{}"),e=d.def(f,".id"),g=
d.def(l,"[",e,"]");d(b.cond(g).then(g,".call(this,a0);")["else"](g,"=",l,"[",e,"]=",b.link(function(d){return W(K,b,a,d,1)}),"(",f,");",g,".call(this,a0);"))}0<r(a.state).length&&d(b.shared.current,".dirty=true;");b.shared.vao&&d(b.shared.vao,".setVAO(null);")}function Da(b,a,d,f){function l(){return!0}b.batchId="a1";fc(b,a);rc(b,a,d,f.attributes,l);vd(b,a,d,f.uniforms,l,!1);xc(b,a,a,d)}function ub(b,a,d,f){function l(b){return b.contextDep&&g||b.propDep}function e(b){return!l(b)}fc(b,a);var g=d.contextDep,
k=a.def(),O=a.def();b.shared.props=O;b.batchId=k;var h=b.scope(),m=b.scope();a(h.entry,"for(",k,"=0;",k,"<","a1",";++",k,"){",O,"=","a0","[",k,"];",m,"}",h.exit);d.needsContext&&U(b,m,d.context);d.needsFramebuffer&&ob(b,m,d.framebuffer);oa(b,m,d.state,l);d.profile&&l(d.profile)&&gc(b,m,d,!1,!0);f?(d.useVAO?d.drawVAO?l(d.drawVAO)?m(b.shared.vao,".setVAO(",d.drawVAO.append(b,m),");"):h(b.shared.vao,".setVAO(",d.drawVAO.append(b,h),");"):h(b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);"):(h(b.shared.vao,
".setVAO(null);"),rc(b,h,d,f.attributes,e),rc(b,m,d,f.attributes,l)),vd(b,h,d,f.uniforms,e,!1),vd(b,m,d,f.uniforms,l,!0),xc(b,h,m,d)):(a=b.global.def("{}"),f=d.shader.progVar.append(b,m),O=m.def(f,".id"),h=m.def(a,"[",O,"]"),m(b.shared.gl,".useProgram(",f,".program);","if(!",h,"){",h,"=",a,"[",O,"]=",b.link(function(a){return W(Da,b,d,a,2)}),"(",f,");}",h,".call(this,a0[",k,"],",k,");"))}function Vc(b,a){function d(b){return b.contextDep&&l||b.propDep}var f=b.proc("batch",2);b.batchId="0";fc(b,f);
var l=!1,e=!0;r(a.context).forEach(function(b){l=l||a.context[b].propDep});l||(U(b,f,a.context),e=!1);var g=a.framebuffer,k=!1;g?(g.propDep?l=k=!0:g.contextDep&&l&&(k=!0),k||ob(b,f,g)):ob(b,f,null);a.state.viewport&&a.state.viewport.propDep&&(l=!0);ca(b,f,a);oa(b,f,a.state,function(b){return!d(b)});a.profile&&d(a.profile)||gc(b,f,a,!1,"a1");a.contextDep=l;a.needsContext=e;a.needsFramebuffer=k;e=a.shader.progVar;if(e.contextDep&&l||e.propDep)ub(b,f,a,null);else if(e=e.append(b,f),f(b.shared.gl,".useProgram(",
e,".program);"),a.shader.program)ub(b,f,a,a.shader.program);else{f(b.shared.vao,".setVAO(null);");var g=b.global.def("{}"),k=f.def(e,".id"),O=f.def(g,"[",k,"]");f(b.cond(O).then(O,".call(this,a0,a1);")["else"](O,"=",g,"[",k,"]=",b.link(function(d){return W(ub,b,a,d,2)}),"(",e,");",O,".call(this,a0,a1);"))}0<r(a.state).length&&f(b.shared.current,".dirty=true;");b.shared.vao&&f(b.shared.vao,".setVAO(null);")}function Ac(b,a){function d(e){var g=a.shader[e];g&&f.set(l.shader,"."+e,g.append(b,f))}var f=
b.proc("scope",3);b.batchId="a2";var l=b.shared,e=l.current;U(b,f,a.context);a.framebuffer&&a.framebuffer.append(b,f);Q(r(a.state)).forEach(function(d){var e=a.state[d].append(b,f);v(e)?e.forEach(function(a,l){f.set(b.next[d],"["+l+"]",a)}):f.set(l.next,"."+d,e)});gc(b,f,a,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(d){var e=a.draw[d];e&&f.set(l.draw,"."+d,""+e.append(b,f))});r(a.uniforms).forEach(function(d){var e=a.uniforms[d].append(b,f);Array.isArray(e)&&(e="["+
e.join()+"]");f.set(l.uniforms,"["+m.id(d)+"]",e)});r(a.attributes).forEach(function(d){var l=a.attributes[d].append(b,f),e=b.scopeAttrib(d);r(new ga).forEach(function(b){f.set(e,"."+b,l[b])})});a.scopeVAO&&f.set(l.vao,".targetVAO",a.scopeVAO.append(b,f));d("vert");d("frag");0<r(a.state).length&&(f(e,".dirty=true;"),f.exit(e,".dirty=true;"));f("a1(",b.shared.context,",a0,",b.batchId,");")}function E(b){if("object"===typeof b&&!v(b)){for(var a=r(b),d=0;d<a.length;++d)if(D.isDynamic(b[a[d]]))return!0;
return!1}}function z(b,a,f){function l(b,a){k.forEach(function(d){var f=e[d];D.isDynamic(f)&&(f=b.invoke(a,f),a(c,".",d,"=",f,";"))})}var e=a["static"][f];if(e&&E(e)){var g=b.global,k=r(e),O=!1,h=!1,m=!1,c=b.global.def("{}");k.forEach(function(a){var f=e[a];if(D.isDynamic(f))"function"===typeof f&&(f=e[a]=D.unbox(f)),a=d(f,null),O=O||a.thisDep,m=m||a.propDep,h=h||a.contextDep;else{g(c,".",a,"=");switch(typeof f){case "number":g(f);break;case "string":g('"',f,'"');break;case "object":Array.isArray(f)&&
g("[",f.join(),"]");break;default:g(b.link(f))}g(";")}});a.dynamic[f]=new D.DynamicVariable(4,{thisDep:O,contextDep:h,propDep:m,ref:c,append:l});delete a["static"][f]}}var ga=ze.Record,ta={add:32774,subtract:32778,"reverse subtract":32779};I.ext_blend_minmax&&(ta.min=32775,ta.max=32776);var V=I.angle_instanced_arrays,fa=I.webgl_draw_buffers,ma=I.oes_vertex_array_object,G={dirty:!0,profile:Y.profile},x={},ba=[],O={},za={};M("dither",3024);M("blend.enable",3042);T("blend.color","blendColor",[0,0,0,
0]);T("blend.equation","blendEquationSeparate",[32774,32774]);T("blend.func","blendFuncSeparate",[1,0,1,0]);M("depth.enable",2929,!0);T("depth.func","depthFunc",513);T("depth.range","depthRange",[0,1]);T("depth.mask","depthMask",!0);T("colorMask","colorMask",[!0,!0,!0,!0]);M("cull.enable",2884);T("cull.face","cullFace",1029);T("frontFace","frontFace",2305);T("lineWidth","lineWidth",1);M("polygonOffset.enable",32823);T("polygonOffset.offset","polygonOffset",[0,0]);M("sample.alpha",32926);M("sample.enable",
32928);T("sample.coverage","sampleCoverage",[1,!1]);M("stencil.enable",2960);T("stencil.mask","stencilMask",-1);T("stencil.func","stencilFunc",[519,0,-1]);T("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);T("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);M("scissor.enable",3089);T("scissor.box","scissor",[0,0,n.drawingBufferWidth,n.drawingBufferHeight]);T("viewport","viewport",[0,0,n.drawingBufferWidth,n.drawingBufferHeight]);var ka={gl:n,context:ua,strings:m,next:x,current:G,
draw:Gb,elements:b,buffer:da,shader:jb,attributes:ze.state,vao:ze,uniforms:pa,framebuffer:X,extensions:I,timer:Na,isBufferArgs:c},l={primTypes:L,compareFuncs:h,blendFuncs:P,blendEquations:ta,stencilOps:g,glTypes:C,orientationType:A};a.optional(function(){ka.isArrayLike=v});fa&&(l.backBuffer=[1029],l.drawBuffer=sa(H.maxDrawbuffers,function(b){return 0===b?[0]:sa(b,function(b){return 36064+b})}));var mc=0;return{next:x,current:G,procs:function(){var b=B(),a=b.proc("poll"),d=b.proc("refresh"),f=b.block();
a(f);d(f);var l=b.shared,e=l.gl,g=l.next,k=l.current;f(k,".dirty=false;");ob(b,a);ob(b,d,null,!0);var h;V&&(h=b.link(V));I.oes_vertex_array_object&&d(b.link(I.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var m=0;m<H.maxAttributes;++m){var c=d.def(l.attributes,"[",m,"]"),n=b.cond(c,".buffer");n.then(e,".enableVertexAttribArray(",m,");",e,".bindBuffer(",34962,",",c,".buffer.buffer);",e,".vertexAttribPointer(",m,",",c,".size,",c,".type,",c,".normalized,",c,".stride,",c,".offset);")["else"](e,
".disableVertexAttribArray(",m,");",e,".vertexAttrib4f(",m,",",c,".x,",c,".y,",c,".z,",c,".w);",c,".buffer=null;");d(n);V&&d(h,".vertexAttribDivisorANGLE(",m,",",c,".divisor);")}d(b.shared.vao,".currentVAO=null;",b.shared.vao,".setVAO(",b.shared.vao,".targetVAO);");r(O).forEach(function(l){var h=O[l],m=f.def(g,".",l),c=b.block();c("if(",m,"){",e,".enable(",h,")}else{",e,".disable(",h,")}",k,".",l,"=",m,";");d(c);a("if(",m,"!==",k,".",l,"){",c,"}")});r(za).forEach(function(l){var O=za[l],h=G[l],m,
c,n=b.block();n(e,".",O,"(");v(h)?(O=h.length,m=b.global.def(g,".",l),c=b.global.def(k,".",l),n(sa(O,function(b){return m+"["+b+"]"}),");",sa(O,function(b){return c+"["+b+"]="+m+"["+b+"];"}).join("")),a("if(",sa(O,function(b){return m+"["+b+"]!=="+c+"["+b+"]"}).join("||"),"){",n,"}")):(m=f.def(g,".",l),c=f.def(k,".",l),n(m,");",k,".",l,"=",m,";"),a("if(",m,"!==",c,"){",n,"}"));d(n)});return b.compile()}(),compile:function(b,a,d,f,l){var e=B();e.stats=e.link(l);r(a["static"]).forEach(function(b){z(e,
a,b)});na.forEach(function(a){z(e,b,a)});var g=bb(b,a,d,f,e);ia(e,g);Ac(e,g);Vc(e,g);return u(e.compile(),{destroy:function(){g.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(B,w,Va){function c(e,a){this.id=d++;this.type=e;this.data=a}function Q(d){if(0===
d.length)return[];var a=d.charAt(0),e=d.charAt(d.length-1);if(1<d.length&&a===e&&('"'===a||"'"===a))return['"'+d.substr(1,d.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(d))return Q(d.substr(0,a.index)).concat(Q(a[1])).concat(Q(d.substr(a.index+a[0].length)));a=d.split(".");if(1===a.length)return['"'+d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];d=[];for(e=0;e<a.length;++e)d=d.concat(Q(a[e]));return d}function p(d){return"["+Q(d).join("][")+
"]"}function y(d,a){if("function"===typeof d)return new c(0,d);if("number"===typeof d||"boolean"===typeof d)return new c(5,d);if(Array.isArray(d))return new c(6,d.map(function(d,e){return y(d,a+"["+e+"]")}));if(d instanceof c)return d;e(!1,"invalid option type in uniform "+a)}var e=B("./util/check"),d=0;w.exports={DynamicVariable:c,define:function(d,a){return new c(d,p(a+""))},isDynamic:function(d){return"function"===typeof d&&!d._reglType||d instanceof c},unbox:y,accessor:p}},{"./util/check":21}],
10:[function(B,w,Va){var c=B("./util/check"),Q=B("./util/is-typed-array"),p=B("./util/is-ndarray"),y=B("./util/values"),e=B("./constants/primitives.json"),d=B("./constants/usage.json");w.exports=function(r,a,u,ja){function sa(a){this.id=D++;v[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function n(d,e,n,v,h,g,f){d.buffer.bind();var A;e?((A=f)||Q(e)&&(!p(e)||Q(e.data))||(A=a.oes_element_index_uint?5125:5123),u._initBuffer(d.buffer,e,n,A,3)):(r.bufferData(34963,g,n),d.buffer.dtype=
A||5121,d.buffer.usage=n,d.buffer.dimension=3,d.buffer.byteLength=g);A=f;if(!f){switch(d.buffer.dtype){case 5121:case 5120:A=5121;break;case 5123:case 5122:A=5123;break;case 5125:case 5124:A=5125;break;default:c.raise("unsupported type for element array")}d.buffer.dtype=A}d.type=A;c(5125!==A||!!a.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=h;0>e&&(e=d.buffer.byteLength,5123===A?e>>=1:5125===A&&(e>>=2));d.vertCount=e;e=v;0>v&&(e=4,v=d.buffer.dimension,
1===v&&(e=0),2===v&&(e=1),3===v&&(e=4));d.primType=e}function I(a){ja.elementsCount--;c(null!==a.buffer,"must not double destroy elements");delete v[a.id];a.buffer.destroy();a.buffer=null}var v={},D=0,L={uint8:5121,uint16:5123};a.oes_element_index_uint&&(L.uint32=5125);sa.prototype.bind=function(){this.buffer.bind()};var C=[];return{create:function(a,r){function v(a){if(a)if("number"===typeof a)y(a),h.primType=4,h.vertCount=a|0,h.type=5121;else{var f=null,A=35044,r=-1,u=-1,m=0,C=0;if(Array.isArray(a)||
Q(a)||p(a))f=a;else if(c.type(a,"object","invalid arguments for elements"),"data"in a&&(f=a.data,c(Array.isArray(f)||Q(f)||p(f),"invalid data for element buffer")),"usage"in a&&(c.parameter(a.usage,d,"invalid element buffer usage"),A=d[a.usage]),"primitive"in a&&(c.parameter(a.primitive,e,"invalid element buffer primitive"),r=e[a.primitive]),"count"in a&&(c("number"===typeof a.count&&0<=a.count,"invalid vertex count for elements"),u=a.count|0),"type"in a&&(c.parameter(a.type,L,"invalid buffer type"),
C=L[a.type]),"length"in a)m=a.length|0;else if(m=u,5123===C||5122===C)m*=2;else if(5125===C||5124===C)m*=4;n(h,f,A,r,u,m,C)}else y(),h.primType=4,h.vertCount=0,h.type=5121;return v}var y=u.create(null,34963,!0),h=new sa(y._buffer);ja.elementsCount++;v(a);v._reglType="elements";v._elements=h;v.subdata=function(a,d){y.subdata(a,d);return v};v.destroy=function(){I(h)};return v},createStream:function(a){var d=C.pop();d||(d=new sa(u.create(null,34963,!0,!1)._buffer));n(d,a,35040,-1,-1,0,0);return d},destroyStream:function(a){C.push(a)},
getElements:function(a){return"function"===typeof a&&a._elements instanceof sa?a._elements:null},clear:function(){y(v).forEach(I)}}}},{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(B,w,Va){var c=B("./util/sorted-object-keys"),Q=B("./util/check");w.exports=function(p,y){function e(a){Q.type(a,"string","extension name must be string");a=a.toLowerCase();var e;try{e=d[a]=p.getExtension(a)}catch(c){}return!!e}
for(var d={},r=0;r<y.extensions.length;++r){var a=y.extensions[r];if(!e(a))return y.onDestroy(),y.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}y.optionalExtensions.forEach(e);return{extensions:d,restore:function(){c(d).forEach(function(a){if(d[a]&&!e(a))throw Error("(regl): error restoring extension "+a);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(B,w,Va){var c=B("./util/check"),Q=B("./util/values"),
p=B("./util/extend"),y=[6407,6408],e=[];e[6408]=4;e[6407]=3;var d=[];d[5121]=1;d[5126]=4;d[36193]=2;var r=[32854,32855,36194,35907,34842,34843,34836],a={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};w.exports=function(u,ja,sa,n,I,v){function D(b,a,d){this.target=b;this.texture=a;this.renderbuffer=d;var f=b=0;a?(b=a.width,f=a.height):d&&(b=d.width,f=d.height);this.width=b;this.height=f}function L(b){b&&(b.texture&&
b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function C(b,a,d){if(b){if(b.texture){b=b.texture._texture;var f=Math.max(1,b.height);c(Math.max(1,b.width)===a&&f===d,"inconsistent width/height for supplied texture")}else b=b.renderbuffer._renderbuffer,c(b.width===a&&b.height===d,"inconsistent width/height for renderbuffer");b.refCount+=1}}function F(b,a){a&&(a.texture?u.framebufferTexture2D(36160,b,a.target,a.texture._texture.texture,0):u.framebufferRenderbuffer(36160,
b,36161,a.renderbuffer._renderbuffer.renderbuffer))}function na(b){var a=3553,d=null,f=null,e=b;"object"===typeof b&&(e=b.data,"target"in b&&(a=b.target|0));c.type(e,"function","invalid attachment data");b=e._reglType;"texture2d"===b?(d=e,c(3553===a)):"textureCube"===b?(d=e,c(34069<=a&&34075>a,"invalid cube map target")):"renderbuffer"===b?(f=e,a=36161):c.raise("invalid regl object for attachment");return new D(a,d,f)}function P(b,a,d,f,e){if(d)return b=n.create2D({width:b,height:a,format:f,type:e}),
b._texture.refCount=0,new D(3553,b,null);b=I.create({width:b,height:a,format:f});b._renderbuffer.refCount=0;return new D(36161,null,b)}function va(b){return b&&(b.texture||b.renderbuffer)}function h(b,a,d){b&&(b.texture?b.texture.resize(a,d):b.renderbuffer&&b.renderbuffer.resize(a,d),b.width=a,b.height=d)}function g(){this.id=b++;k[this.id]=this;this.framebuffer=u.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=
null}function f(b){b.colorAttachments.forEach(L);L(b.depthAttachment);L(b.stencilAttachment);L(b.depthStencilAttachment)}function A(b){var a=b.framebuffer;c(a,"must not double destroy framebuffer");u.deleteFramebuffer(a);b.framebuffer=null;v.framebufferCount--;delete k[b.id]}function S(b){var d;u.bindFramebuffer(36160,b.framebuffer);var f=b.colorAttachments;for(d=0;d<f.length;++d)F(36064+d,f[d]);for(d=f.length;d<sa.maxColorAttachments;++d)u.framebufferTexture2D(36160,36064+d,3553,null,0);u.framebufferTexture2D(36160,
33306,3553,null,0);u.framebufferTexture2D(36160,36096,3553,null,0);u.framebufferTexture2D(36160,36128,3553,null,0);F(36096,b.depthAttachment);F(36128,b.stencilAttachment);F(33306,b.depthStencilAttachment);b=u.checkFramebufferStatus(36160);u.isContextLost()||36053===b||c.raise("framebuffer configuration not supported, status = "+a[b]);u.bindFramebuffer(36160,m.next?m.next.framebuffer:null);m.cur=m.next;u.getError()}function aa(b,a){function k(b,a){var g;c(m.next!==n,"can not update framebuffer which is currently in use");
var h=0,A=0,v=!0,u=!0;g=null;var p=!0,I="rgba",Q="uint8",D=1,X=null,t=null,L=null,aa=!1;if("number"===typeof b)h=b|0,A=a|0||h;else if(b){c.type(b,"object","invalid arguments for framebuffer");"shape"in b?(A=b.shape,c(Array.isArray(A)&&2<=A.length,"invalid shape for framebuffer"),h=A[0],A=A[1]):("radius"in b&&(h=A=b.radius),"width"in b&&(h=b.width),"height"in b&&(A=b.height));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g)&&c(1===g.length||ja.webgl_draw_buffers,"multiple render targets not supported");
if(!g){"colorCount"in b&&(D=b.colorCount|0,c(0<D,"invalid color buffer count"));"colorTexture"in b&&(p=!!b.colorTexture,I="rgba4");if("colorType"in b){Q=b.colorType;if(p)c(ja.oes_texture_float||!("float"===Q||"float32"===Q),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(ja.oes_texture_half_float||!("half float"===Q||"float16"===Q),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===Q||
"float16"===Q)c(ja.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),I="rgba16f";else if("float"===Q||"float32"===Q)c(ja.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),I="rgba32f";c.oneOf(Q,da,"invalid color type")}"colorFormat"in b&&(I=b.colorFormat,0<=la.indexOf(I)?p=!0:0<=H.indexOf(I)?p=!1:c.optional(function(){if(p)c.oneOf(b.colorFormat,la,"invalid color format for texture");
else c.oneOf(b.colorFormat,H,"invalid color format for renderbuffer")}))}if("depthTexture"in b||"depthStencilTexture"in b)aa=!(!b.depthTexture&&!b.depthStencilTexture),c(!aa||ja.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in b&&("boolean"===typeof b.depth?v=b.depth:(X=b.depth,u=!1));"stencil"in b&&("boolean"===typeof b.stencil?u=b.stencil:(t=b.stencil,v=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?v=u=b.depthStencil:(L=b.depthStencil,u=v=!1))}else h=A=
1;var F=null,pa=null,B=null,w=null;if(Array.isArray(g))F=g.map(na);else if(g)F=[na(g)];else for(F=Array(D),g=0;g<D;++g)F[g]=P(h,A,p,I,Q);c(ja.webgl_draw_buffers||1>=F.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");c(F.length<=sa.maxColorAttachments,"too many color attachments, not supported");h=h||F[0].width;A=A||F[0].height;X?pa=na(X):v&&!u&&(pa=P(h,A,aa,"depth","uint32"));t?B=na(t):u&&!v&&(B=P(h,A,!1,"stencil","uint8"));L?w=na(L):!X&&!t&&u&&v&&
(w=P(h,A,aa,"depth stencil","depth stencil"));c(1>=!!X+!!t+!!L,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");v=null;for(g=0;g<F.length;++g)C(F[g],h,A),c(!F[g]||F[g].texture&&0<=y.indexOf(F[g].texture._texture.format)||F[g].renderbuffer&&0<=r.indexOf(F[g].renderbuffer._renderbuffer.format),"framebuffer color attachment "+g+" is invalid"),F[g]&&F[g].texture&&(u=e[F[g].texture._texture.format]*d[F[g].texture._texture.type],null===v?v=u:c(v===u,"all color attachments much have the same number of bits per pixel."));
C(pa,h,A);c(!pa||pa.texture&&6402===pa.texture._texture.format||pa.renderbuffer&&33189===pa.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object");C(B,h,A);c(!B||B.renderbuffer&&36168===B.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");C(w,h,A);c(!w||w.texture&&34041===w.texture._texture.format||w.renderbuffer&&34041===w.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");f(n);n.width=h;n.height=
A;n.colorAttachments=F;n.depthAttachment=pa;n.stencilAttachment=B;n.depthStencilAttachment=w;k.color=F.map(va);k.depth=va(pa);k.stencil=va(B);k.depthStencil=va(w);k.width=n.width;k.height=n.height;S(n);return k}var n=new g;v.framebufferCount++;k(b,a);return p(k,{resize:function(b,a){c(m.next!==n,"can not resize a framebuffer which is currently in use");var d=Math.max(b|0,1),f=Math.max(a|0||d,1);if(d===n.width&&f===n.height)return k;for(var e=n.colorAttachments,g=0;g<e.length;++g)h(e[g],d,f);h(n.depthAttachment,
d,f);h(n.stencilAttachment,d,f);h(n.depthStencilAttachment,d,f);n.width=k.width=d;n.height=k.height=f;S(n);return k},_reglType:"framebuffer",_framebuffer:n,destroy:function(){A(n);f(n)},use:function(b){m.setFBO({framebuffer:k},b)}})}var m={cur:null,next:null,dirty:!1,setFBO:null},la=["rgba"],H=["rgba4","rgb565","rgb5 a1"];ja.ext_srgb&&H.push("srgba");ja.ext_color_buffer_half_float&&H.push("rgba16f","rgb16f");ja.webgl_color_buffer_float&&H.push("rgba32f");var da=["uint8"];ja.oes_texture_half_float&&
da.push("half float","float16");ja.oes_texture_float&&da.push("float","float32");var b=0,k={};return p(m,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof g)?b:null},create:aa,createCube:function(b){function a(b){var f;c(0>d.indexOf(m.next),"can not update framebuffer which is currently in use");var e={color:null},g=0,k=null;f="rgba";var h="uint8",A=1;if("number"===typeof b)g=b|0;else if(b){c.type(b,"object","invalid arguments for framebuffer");
"shape"in b?(g=b.shape,c(Array.isArray(g)&&2<=g.length,"invalid shape for framebuffer"),c(g[0]===g[1],"cube framebuffer must be square"),g=g[0]):("radius"in b&&(g=b.radius|0),"width"in b?(g=b.width|0,"height"in b&&c(b.height===g,"must be square")):"height"in b&&(g=b.height|0));if("color"in b||"colors"in b)k=b.color||b.colors,Array.isArray(k)&&c(1===k.length||ja.webgl_draw_buffers,"multiple render targets not supported");k||("colorCount"in b&&(A=b.colorCount|0,c(0<A,"invalid color buffer count")),
"colorType"in b&&(c.oneOf(b.colorType,da,"invalid color type"),h=b.colorType),"colorFormat"in b&&(f=b.colorFormat,c.oneOf(b.colorFormat,la,"invalid color format for texture")));"depth"in b&&(e.depth=b.depth);"stencil"in b&&(e.stencil=b.stencil);"depthStencil"in b&&(e.depthStencil=b.depthStencil)}else g=1;if(k)if(Array.isArray(k))for(b=[],f=0;f<k.length;++f)b[f]=k[f];else b=[k];else for(b=Array(A),k={radius:g,format:f,type:h},f=0;f<A;++f)b[f]=n.createCube(k);e.color=Array(b.length);for(f=0;f<b.length;++f)A=
b[f],c("function"===typeof A&&"textureCube"===A._reglType,"invalid cube map"),g=g||A.width,c(A.width===g&&A.height===g,"invalid cube map shape"),e.color[f]={target:34069,data:b[f]};for(f=0;6>f;++f){for(A=0;A<b.length;++A)e.color[A].target=34069+f;0<f&&(e.depth=d[0].depth,e.stencil=d[0].stencil,e.depthStencil=d[0].depthStencil);if(d[f])d[f](e);else d[f]=aa(e)}return p(a,{width:g,height:g,color:b})}var d=Array(6);a(b);return p(a,{faces:d,resize:function(b){var f=b|0;c(0<f&&f<=sa.maxCubeMapSize,"invalid radius for cube fbo");
if(f===a.width)return a;var e=a.color;for(b=0;b<e.length;++b)e[b].resize(f);for(b=0;6>b;++b)d[b].resize(f);a.width=a.height=f;return a},_reglType:"framebufferCube",destroy:function(){d.forEach(function(b){b.destroy()})}})},clear:function(){Q(k).forEach(A)},restore:function(){m.cur=null;m.next=null;m.dirty=!0;Q(k).forEach(function(b){b.framebuffer=u.createFramebuffer();S(b)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(B,w,Va){var c=B("./util/sorted-object-keys"),Q=
B("./util/pool");w.exports=function(p,y){var e=1;y.ext_texture_filter_anisotropic&&(e=p.getParameter(34047));var d=1,r=1;y.webgl_draw_buffers&&(d=p.getParameter(34852),r=p.getParameter(36063));var a=!!y.oes_texture_float;if(a){a=p.createTexture();p.bindTexture(3553,a);p.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=p.createFramebuffer();p.bindFramebuffer(36160,u);p.framebufferTexture2D(36160,36064,3553,a,0);p.bindTexture(3553,null);if(36053!==p.checkFramebufferStatus(36160))a=!1;else{p.viewport(0,
0,1,1);p.clearColor(1,0,0,1);p.clear(16384);var ja=Q.allocType(5126,4);p.readPixels(0,0,1,1,6408,5126,ja);p.getError()?a=!1:(p.deleteFramebuffer(u),p.deleteTexture(a),a=1===ja[0]);Q.freeType(ja)}}ja=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ja=p.createTexture(),u=Q.allocType(5121,36),p.activeTexture(33984),p.bindTexture(34067,ja),p.texImage2D(34069,0,6408,3,3,0,6408,5121,u),Q.freeType(u),p.bindTexture(34067,
null),p.deleteTexture(ja),ja=!p.getError());return{colorBits:[p.getParameter(3410),p.getParameter(3411),p.getParameter(3412),p.getParameter(3413)],depthBits:p.getParameter(3414),stencilBits:p.getParameter(3415),subpixelBits:p.getParameter(3408),extensions:c(y).filter(function(a){return!!y[a]}),maxAnisotropic:e,maxDrawbuffers:d,maxColorAttachments:r,pointSizeDims:p.getParameter(33901),lineWidthDims:p.getParameter(33902),maxViewportDims:p.getParameter(3386),maxCombinedTextureUnits:p.getParameter(35661),
maxCubeMapSize:p.getParameter(34076),maxRenderbufferSize:p.getParameter(34024),maxTextureUnits:p.getParameter(34930),maxTextureSize:p.getParameter(3379),maxAttributes:p.getParameter(34921),maxVertexUniforms:p.getParameter(36347),maxVertexTextureUnits:p.getParameter(35660),maxVaryingVectors:p.getParameter(36348),maxFragmentUniforms:p.getParameter(36349),glsl:p.getParameter(35724),renderer:p.getParameter(7937),vendor:p.getParameter(7936),version:p.getParameter(7938),readFloat:a,npotTextureCube:ja}}},
{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(B,w,Va){var c=B("./util/check"),Q=B("./util/is-typed-array");w.exports=function(p,y,e,d,r,a,u){function ja(n){var I;null===y.next?(c(r.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),I=5121):(c(null!==y.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),I=y.next.colorAttachments[0].texture._texture.type,c.optional(function(){a.oes_texture_float?
(c(5121===I||5126===I,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===I&&c(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(5121===I,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var v=0,D=0,L=d.framebufferWidth,C=d.framebufferHeight,F=null;Q(n)?F=n:n&&(c.type(n,"object","invalid arguments to regl.read()"),v=n.x|0,D=n.y|0,c(0<=v&&v<d.framebufferWidth,
"invalid x offset for regl.read"),c(0<=D&&D<d.framebufferHeight,"invalid y offset for regl.read"),L=(n.width||d.framebufferWidth-v)|0,C=(n.height||d.framebufferHeight-D)|0,F=n.data||null);F&&(5121===I?c(F instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===I&&c(F instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));c(0<L&&L+v<=d.framebufferWidth,"invalid width for read pixels");c(0<C&&C+D<=
d.framebufferHeight,"invalid height for read pixels");e();n=L*C*4;F||(5121===I?F=new Uint8Array(n):5126===I&&(F=F||new Float32Array(n)));c.isTypedArray(F,"data buffer for regl.read() must be a typedarray");c(F.byteLength>=n,"data buffer for regl.read() too small");p.pixelStorei(3333,4);p.readPixels(v,D,L,C,6408,I,F);return F}function sa(a){var d;y.setFBO({framebuffer:a.framebuffer},function(){d=ja(a)});return d}return function(a){return a&&"framebuffer"in a?sa(a):ja(a)}}},{"./util/check":21,"./util/is-typed-array":30}],
15:[function(B,w,Va){var c=B("./util/sorted-object-keys"),Q=B("./util/check"),p=B("./util/values"),y=[];y[32854]=2;y[32855]=2;y[36194]=2;y[33189]=2;y[36168]=1;y[34041]=4;y[35907]=4;y[34836]=16;y[34842]=8;y[34843]=6;w.exports=function(e,d,r,a,u){function ja(a){this.id=v++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;u.profile&&(this.stats={size:0})}function sa(d){var c=d.renderbuffer;Q(c,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(c);
d.renderbuffer=null;d.refCount=0;delete D[d.id];a.renderbufferCount--}var n={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};d.ext_srgb&&(n.srgba=35907);d.ext_color_buffer_half_float&&(n.rgba16f=34842,n.rgb16f=34843);d.webgl_color_buffer_float&&(n.rgba32f=34836);var I=[];c(n).forEach(function(a){I[n[a]]=a});var v=0,D={};ja.prototype.decRef=function(){0>=--this.refCount&&sa(this)};u.profile&&(a.getTotalRenderbufferSize=function(){var a=0;c(D).forEach(function(d){a+=
D[d].stats.size});return a});return{create:function(d,c){function v(a,d){var h=0,g=0,f=32854;"object"===typeof a&&a?("shape"in a?(g=a.shape,Q(Array.isArray(g)&&2<=g.length,"invalid renderbuffer shape"),h=g[0]|0,g=g[1]|0):("radius"in a&&(h=g=a.radius|0),"width"in a&&(h=a.width|0),"height"in a&&(g=a.height|0)),"format"in a&&(Q.parameter(a.format,n,"invalid renderbuffer format"),f=n[a.format])):"number"===typeof a?(h=a|0,g="number"===typeof d?d|0:h):a?Q.raise("invalid arguments to renderbuffer constructor"):
h=g=1;Q(0<h&&0<g&&h<=r.maxRenderbufferSize&&g<=r.maxRenderbufferSize,"invalid renderbuffer size");if(h!==p.width||g!==p.height||f!==p.format)return v.width=p.width=h,v.height=p.height=g,p.format=f,e.bindRenderbuffer(36161,p.renderbuffer),e.renderbufferStorage(36161,f,h,g),Q(0===e.getError(),"invalid render buffer format"),u.profile&&(p.stats.size=y[p.format]*p.width*p.height),v.format=I[p.format],v}var p=new ja(e.createRenderbuffer());D[p.id]=p;a.renderbufferCount++;v(d,c);v.resize=function(a,d){var h=
a|0,g=d|0||h;if(h===p.width&&g===p.height)return v;Q(0<h&&0<g&&h<=r.maxRenderbufferSize&&g<=r.maxRenderbufferSize,"invalid renderbuffer size");v.width=p.width=h;v.height=p.height=g;e.bindRenderbuffer(36161,p.renderbuffer);e.renderbufferStorage(36161,p.format,h,g);Q(0===e.getError(),"invalid render buffer format");u.profile&&(p.stats.size=y[p.format]*p.width*p.height);return v};v._reglType="renderbuffer";v._renderbuffer=p;u.profile&&(v.stats=p.stats);v.destroy=function(){p.decRef()};return v},clear:function(){p(D).forEach(sa)},
restore:function(){p(D).forEach(function(a){a.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,a.renderbuffer);e.renderbufferStorage(36161,a.format,a.width,a.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,"./util/sorted-object-keys":34,"./util/values":36}],16:[function(B,w,Va){var c=B("./util/sorted-object-keys"),Q=B("./util/check"),p=B("./util/extend"),y=B("./util/values");w.exports=function(e,d,r,a){function u(a,d,e,h){this.name=a;this.id=d;this.location=e;this.info=
h}function ja(a,d){for(var e=0;e<a.length;++e)if(a[e].id===d.id){a[e].location=d.location;return}a.push(d)}function sa(a,c,n){var h=35632===a?v:D,g=h[c];if(!g){var f=d.str(c),g=e.createShader(a);e.shaderSource(g,f);e.compileShader(g);Q.shaderError(e,g,f,a,n);h[c]=g}return g}function n(d,e){this.id=F++;this.fragId=d;this.vertId=e;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function I(c,n,v){var h;h=sa(35632,c.fragId);
var g=sa(35633,c.vertId),f=c.program=e.createProgram();e.attachShader(f,h);e.attachShader(f,g);if(v)for(h=0;h<v.length;++h)g=v[h],e.bindAttribLocation(f,g[0],g[1]);e.linkProgram(f);Q.linkError(e,f,d.str(c.fragId),d.str(c.vertId),n);v=e.getProgramParameter(f,35718);a.profile&&(c.stats.uniformsCount=v);g=c.uniforms;for(h=0;h<v;++h)if(n=e.getActiveUniform(f,h))if(1<n.size)for(var A=0;A<n.size;++A){var r=n.name.replace("[0]","["+A+"]");ja(g,new u(r,d.id(r),e.getUniformLocation(f,r),n))}else ja(g,new u(n.name,
d.id(n.name),e.getUniformLocation(f,n.name),n));v=e.getProgramParameter(f,35721);a.profile&&(c.stats.attributesCount=v);c=c.attributes;for(h=0;h<v;++h)(n=e.getActiveAttrib(f,h))&&ja(c,new u(n.name,d.id(n.name),e.getAttribLocation(f,n.name),n))}var v={},D={},L={},C=[],F=0;a.profile&&(r.getMaxUniformsCount=function(){var a=0;C.forEach(function(d){d.stats.uniformsCount>a&&(a=d.stats.uniformsCount)});return a},r.getMaxAttributesCount=function(){var a=0;C.forEach(function(d){d.stats.attributesCount>a&&
(a=d.stats.attributesCount)});return a});return{clear:function(){var a=e.deleteShader.bind(e);y(v).forEach(a);v={};y(D).forEach(a);D={};C.forEach(function(a){e.deleteProgram(a.program)});C.length=0;L={};r.shaderCount=0},program:function(a,d,u,h){Q.command(0<=a,"missing vertex shader",u);Q.command(0<=d,"missing fragment shader",u);var g=L[d];g||(g=L[d]={});var f=g[a];if(f&&(f.refCount++,!h))return f;var A=new n(d,a);r.shaderCount++;I(A,u,h);f||(g[a]=A);C.push(A);return p(A,{destroy:function(){A.refCount--;
if(0>=A.refCount){e.deleteProgram(A.program);var a=C.indexOf(A);C.splice(a,1);r.shaderCount--}0>=g[A.vertId].refCount&&(e.deleteShader(D[A.vertId]),delete D[A.vertId],delete L[A.fragId][A.vertId]);c(L[A.fragId]).length||(e.deleteShader(v[A.fragId]),delete v[A.fragId],delete L[A.fragId])}})},restore:function(){v={};D={};for(var a=0;a<C.length;++a)I(C[a],null,C[a].attributes.map(function(a){return[a.location,a.name]}))},shader:sa,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,
"./util/values":36}],17:[function(B,w,Va){w.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(B,w,Va){w.exports=function(){var c={"":0},Q=[""];return{id:function(p){var y=c[p];if(y)return y;y=c[p]=Q.length;Q.push(p);return y},str:function(c){return Q[c]}}}},{}],19:[function(B,w,Va){function c(b){return"[object "+b+"]"}function Q(b){return Array.isArray(b)&&(0===b.length||
"number"===typeof b[0])}function p(b){return Array.isArray(b)&&0!==b.length&&L(b[0])?!0:!1}function y(b){return Object.prototype.toString.call(b)}function e(b){if(!b)return!1;var a=y(b);return 0<=la.indexOf(a)?!0:Q(b)||p(b)||I(b)}function d(b,a){36193===b.type?(b.data=D(a),v.freeType(a)):b.data=a}function r(b,a,d,f,e,g){b="undefined"!==typeof da[b]?da[b]:h[b]*H[a];g&&(b*=6);if(e){for(f=0;1<=d;)f+=b*d*d,d/=2;return f}return b*d*f}var a=B("./util/sorted-object-keys"),u=B("./util/check"),ja=B("./util/extend"),
sa=B("./util/values"),n=B("./util/is-typed-array"),I=B("./util/is-ndarray"),v=B("./util/pool"),D=B("./util/to-half-float"),L=B("./util/is-array-like"),C=B("./util/flatten"),F=B("./util/is-pow2");Va=B("./constants/arraytypes.json");var na=B("./constants/arraytypes.json"),P=[9984,9986,9985,9987],va=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;h[6408]=h[35906]=4;var g=c("HTMLCanvasElement"),f=c("OffscreenCanvas"),A=c("CanvasRenderingContext2D"),S=c("ImageBitmap"),
aa=c("HTMLImageElement"),m=c("HTMLVideoElement"),la=a(Va).concat([g,f,A,S,aa,m]),H=[];H[5121]=1;H[5126]=4;H[36193]=2;H[5123]=2;H[5125]=4;var da=[];da[32854]=2;da[32855]=2;da[36194]=2;da[34041]=4;da[33776]=.5;da[33777]=.5;da[33778]=1;da[33779]=1;da[35986]=.5;da[35987]=1;da[34798]=1;da[35840]=.5;da[35841]=.25;da[35842]=.5;da[35843]=.25;da[36196]=.5;w.exports=function(b,k,c,H,da,la,B){function ua(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;
this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Na(b,a){b.internalformat=a.internalformat;b.format=a.format;b.type=a.type;b.compressed=a.compressed;b.premultiplyAlpha=a.premultiplyAlpha;b.flipY=a.flipY;b.unpackAlignment=a.unpackAlignment;b.colorSpace=a.colorSpace;b.width=a.width;b.height=a.height;b.channels=a.channels}function Y(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(u.type(a.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),b.premultiplyAlpha=
a.premultiplyAlpha);"flipY"in a&&(u.type(a.flipY,"boolean","invalid texture flip"),b.flipY=a.flipY);"alignment"in a&&(u.oneOf(a.alignment,[1,2,4,8],"invalid texture unpack alignment"),b.unpackAlignment=a.alignment);"colorSpace"in a&&(u.parameter(a.colorSpace,xc,"invalid colorSpace"),b.colorSpace=xc[a.colorSpace]);if("type"in a){var d=a.type;u(k.oes_texture_float||!("float"===d||"float32"===d),"you must enable the OES_texture_float extension in order to use floating point textures.");u(k.oes_texture_half_float||
!("half float"===d||"float16"===d),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");u(k.webgl_depth_texture||!("uint16"===d||"uint32"===d||"depth stencil"===d),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");u.parameter(d,W,"invalid texture type");b.type=W[d]}var f=b.width,e=b.height,g=b.channels,d=!1;"shape"in a?(u(Array.isArray(a.shape)&&2<=a.shape.length,"shape must be an array"),f=a.shape[0],e=
a.shape[1],3===a.shape.length&&(g=a.shape[2],u(0<g&&4>=g,"invalid number of channels"),d=!0),u(0<=f&&f<=c.maxTextureSize,"invalid width"),u(0<=e&&e<=c.maxTextureSize,"invalid height")):("radius"in a&&(f=e=a.radius,u(0<=f&&f<=c.maxTextureSize,"invalid radius")),"width"in a&&(f=a.width,u(0<=f&&f<=c.maxTextureSize,"invalid width")),"height"in a&&(e=a.height,u(0<=e&&e<=c.maxTextureSize,"invalid height")),"channels"in a&&(g=a.channels,u(0<g&&4>=g,"invalid number of channels"),d=!0));b.width=f|0;b.height=
e|0;b.channels=g|0;f=!1;"format"in a&&(f=a.format,u(k.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),u.parameter(f,K,"invalid texture format"),e=b.internalformat=K[f],b.format=ta[e],f in W&&!("type"in a)&&(b.type=W[f]),f in ia&&(b.compressed=!0),f=!0);!d&&f?b.channels=h[b.format]:d&&!f?b.channels!==va[b.format]&&(b.format=b.internalformat=va[b.channels]):f&&d&&u(b.channels===h[b.format],"number of channels inconsistent with specified format")}}
function N(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}function M(){ua.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function T(b,a){var k=null;e(a)?k=a:a&&(u.type(a,"object","invalid pixel data type"),Y(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),e(a.data)&&(k=a.data));u(!b.compressed||k instanceof Uint8Array,"compressed texture data must be stored in a uint8array");
if(a.copy){u(!k,"can not specify copy and data field for the same texture");var l=da.viewportWidth,h=da.viewportHeight;b.width=b.width||l-b.xOffset;b.height=b.height||h-b.yOffset;b.needsCopy=!0;u(0<=b.xOffset&&b.xOffset<l&&0<=b.yOffset&&b.yOffset<h&&0<b.width&&b.width<=l&&0<b.height&&b.height<=h,"copy texture read out of bounds")}else if(!k)b.width=b.width||1,b.height=b.height||1,b.channels=b.channels||4;else if(n(k))b.channels=b.channels||4,b.data=k,"type"in a||5121!==b.type||(b.type=na[Object.prototype.toString.call(k)]|
0);else if(Q(k)){b.channels=b.channels||4;l=k;h=l.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:h=v.allocType(b.type,h);h.set(l);b.data=h;break;case 36193:b.data=D(l);break;default:u.raise("unsupported texture type, must specify a typed array")}b.alignment=1;b.needsFree=!0}else if(I(k)){l=k.data;Array.isArray(l)||5121!==b.type||(b.type=na[Object.prototype.toString.call(l)]|0);var h=k.shape,x=k.stride,q,t,r,z;3===h.length?(r=h[2],z=x[2]):(u(2===h.length,"invalid ndarray pixel data, must be 2 or 3D"),
z=r=1);q=h[0];t=h[1];h=x[0];x=x[1];b.alignment=1;b.width=q;b.height=t;b.channels=r;b.format=b.internalformat=va[r];b.needsFree=!0;q=z;k=k.offset;r=b.width;z=b.height;t=b.channels;for(var K=v.allocType(36193===b.type?5126:b.type,r*z*t),G=0,ba=0;ba<z;++ba)for(var E=0;E<r;++E)for(var H=0;H<t;++H)K[G++]=l[h*E+x*ba+q*H+k];d(b,K)}else if(y(k)===g||y(k)===f||y(k)===A)y(k)===g||y(k)===f?b.element=k:b.element=k.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(y(k)===S)b.element=
k,b.width=k.width,b.height=k.height,b.channels=4;else if(y(k)===aa)b.element=k,b.width=k.naturalWidth,b.height=k.naturalHeight,b.channels=4;else if(y(k)===m)b.element=k,b.width=k.videoWidth,b.height=k.videoHeight,b.channels=4;else if(p(k)){l=b.width||k[0].length;h=b.height||k.length;x=b.channels;x=L(k[0][0])?x||k[0][0].length:x||1;q=C.shape(k);r=1;for(z=0;z<q.length;++z)r*=q[z];r=v.allocType(36193===b.type?5126:b.type,r);C.flatten(k,q,"",r);d(b,r);b.alignment=1;b.width=l;b.height=h;b.channels=x;b.format=
b.internalformat=va[x];b.needsFree=!0}5126===b.type?u(0<=c.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===b.type&&u(0<=c.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function qa(a,d,f,e,g){var k=a.element,q=a.data,h=a.internalformat,c=a.format,m=a.type,n=a.width,A=a.height;N(a);k?b.texSubImage2D(d,g,f,e,c,m,k):a.compressed?b.compressedTexSubImage2D(d,g,f,e,h,n,A,q):a.needsCopy?(H(),b.copyTexSubImage2D(d,g,
f,e,a.xOffset,a.yOffset,n,A)):b.texSubImage2D(d,g,f,e,n,A,c,m,q)}function J(){return V.pop()||new M}function w(b){b.needsFree&&v.freeType(b.data);M.call(b);V.push(b)}function Ja(){ua.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function R(b,a,d){var f=b.images[0]=J();b.mipmask=1;f.width=b.width=a;f.height=b.height=d;f.channels=b.channels=4}function t(b,a){var d=null;if(e(a))d=b.images[0]=J(),Na(d,b),T(d,a),b.mipmask=1;else if(Y(b,a),Array.isArray(a.mipmap))for(var f=
a.mipmap,g=0;g<f.length;++g)d=b.images[g]=J(),Na(d,b),d.width>>=g,d.height>>=g,T(d,f[g]),b.mipmask|=1<<g;else d=b.images[0]=J(),Na(d,b),T(d,a),b.mipmask=1;Na(b,b.images[0]);!b.compressed||33776!==b.internalformat&&33777!==b.internalformat&&33778!==b.internalformat&&33779!==b.internalformat||u(0===b.width%4&&0===b.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ha(a,d){for(var f=a.images,e=0;e<f.length&&f[e];++e){var g=f[e],k=
d,q=e,h=g.element,c=g.data,m=g.internalformat,n=g.format,A=g.type,x=g.width,t=g.height;N(g);h?b.texImage2D(k,q,n,n,A,h):g.compressed?b.compressedTexImage2D(k,q,m,x,t,0,c):g.needsCopy?(H(),b.copyTexImage2D(k,q,n,g.xOffset,g.yOffset,x,t,0)):b.texImage2D(k,q,n,x,t,0,n,A,c||null)}}function Z(){var b=fa.pop()||new Ja;ua.call(b);for(var a=b.mipmask=0;16>a;++a)b.images[a]=null;return b}function Aa(b){for(var a=b.images,d=0;d<a.length;++d)a[d]&&w(a[d]),a[d]=null;fa.push(b)}function Oa(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ac(b,a){if("min"in a){var d=a.min;u.parameter(d,vd);b.minFilter=vd[d];0<=P.indexOf(b.minFilter)&&!("faces"in a)&&(b.genMipmaps=!0)}"mag"in a&&(d=a.mag,u.parameter(d,rc),b.magFilter=rc[d]);var d=b.wrapS,f=b.wrapT;if("wrap"in a){var e=a.wrap;"string"===typeof e?(u.parameter(e,gc),d=f=gc[e]):Array.isArray(e)&&(u.parameter(e[0],gc),u.parameter(e[1],gc),d=gc[e[0]],f=gc[e[1]])}else"wrapS"in a&&(d=a.wrapS,
u.parameter(d,gc),d=gc[d]),"wrapT"in a&&(f=a.wrapT,u.parameter(f,gc),f=gc[f]);b.wrapS=d;b.wrapT=f;"anisotropic"in a&&(d=a.anisotropic,u("number"===typeof d&&1<=d&&d<=c.maxAnisotropic,"aniso samples must be between 1 and "),b.anisotropic=a.anisotropic);if("mipmap"in a){d=!1;switch(typeof a.mipmap){case "string":u.parameter(a.mipmap,fc,"invalid mipmap hint");b.mipmapHint=fc[a.mipmap];d=b.genMipmaps=!0;break;case "boolean":d=b.genMipmaps=a.mipmap;break;case "object":u(Array.isArray(a.mipmap),"invalid mipmap type");
b.genMipmaps=!1;d=!0;break;default:u.raise("invalid mipmap type")}!d||"min"in a||(b.minFilter=9984)}}function bb(a,d){b.texParameteri(d,10241,a.minFilter);b.texParameteri(d,10240,a.magFilter);b.texParameteri(d,10242,a.wrapS);b.texParameteri(d,10243,a.wrapT);k.ext_texture_filter_anisotropic&&b.texParameteri(d,34046,a.anisotropic);a.genMipmaps&&(b.hint(33170,a.mipmapHint),b.generateMipmap(d))}function U(a){ua.call(this);this.mipmask=0;this.internalformat=6408;this.id=ma++;this.refCount=1;this.target=
a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Oa;B.profile&&(this.stats={size:0})}function ob(a){b.activeTexture(33984);b.bindTexture(a.target,a.texture)}function ca(){var a=ba[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function oa(a){var d=a.texture;u(d,"must not double destroy texture");var f=a.unit,e=a.target;0<=f&&(b.activeTexture(33984+f),b.bindTexture(e,null),ba[f]=null);b.deleteTexture(d);a.texture=null;a.params=null;a.pixels=null;a.refCount=
0;delete G[a.id];la.textureCount--}var fc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},gc={repeat:10497,clamp:33071,mirror:33648},rc={nearest:9728,linear:9729},vd=ja({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},rc),xc={none:0,browser:37444},W={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},K={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},
ia={};k.ext_srgb&&(K.srgb=35904,K.srgba=35906);k.oes_texture_float&&(W.float32=W["float"]=5126);k.oes_texture_half_float&&(W.float16=W["half float"]=36193);k.webgl_depth_texture&&(ja(K,{depth:6402,"depth stencil":34041}),ja(W,{uint16:5123,uint32:5125,"depth stencil":34042}));k.webgl_compressed_texture_s3tc&&ja(ia,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});k.webgl_compressed_texture_atc&&ja(ia,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});
k.webgl_compressed_texture_pvrtc&&ja(ia,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});k.webgl_compressed_texture_etc1&&(ia["rgb etc1"]=36196);var Da=Array.prototype.slice.call(b.getParameter(34467));a(ia).forEach(function(b){var a=ia[b];0<=Da.indexOf(a)&&(K[b]=a)});var ub=a(K);c.textureFormats=ub;var Vc=[];a(K).forEach(function(b){Vc[K[b]]=b});var Ac=[];a(W).forEach(function(b){Ac[W[b]]=b});var E=[];a(rc).forEach(function(b){E[rc[b]]=b});
var z=[];a(vd).forEach(function(b){z[vd[b]]=b});var ga=[];a(gc).forEach(function(b){ga[gc[b]]=b});var ta=ub.reduce(function(b,a){var d=K[a];6409===d||6406===d||6409===d||6410===d||6402===d||34041===d||k.ext_srgb&&(35904===d||35906===d)?b[d]=d:32855===d||0<=a.indexOf("rgba")?b[d]=6408:b[d]=6407;return b},{}),V=[],fa=[],ma=0,G={},x=c.maxTextureUnits,ba=Array(x).map(function(){return null});ja(U.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var d=0;d<x;++d){var f=ba[d];if(f){if(0<
f.bindCount)continue;f.unit=-1}ba[d]=this;a=d;break}a>=x&&u.raise("insufficient number of texture units");B.profile&&la.maxTextureUnits<a+1&&(la.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&oa(this)}});B.profile&&(la.getTotalTextureSize=function(){var b=0;a(G).forEach(function(a){b+=G[a].stats.size});return b});return{create2D:function(a,d){function f(b,a){var d=
e.texInfo;Oa.call(d);var g=Z();"number"===typeof b?"number"===typeof a?R(g,b|0,a|0):R(g,b|0,b|0):b?(u.type(b,"object","invalid arguments to regl.texture"),ac(d,b),t(g,b)):R(g,1,1);d.genMipmaps&&(g.mipmask=(g.width<<1)-1);e.mipmask=g.mipmask;Na(e,g);u.texture2D(d,g,c);e.internalformat=g.internalformat;f.width=g.width;f.height=g.height;ob(e);ha(g,3553);bb(d,3553);ca();Aa(g);B.profile&&(e.stats.size=r(e.internalformat,e.type,g.width,g.height,d.genMipmaps,!1));f.format=Vc[e.internalformat];f.type=Ac[e.type];
f.mag=E[d.magFilter];f.min=z[d.minFilter];f.wrapS=ga[d.wrapS];f.wrapT=ga[d.wrapT];return f}var e=new U(3553);G[e.id]=e;la.textureCount++;f(a,d);f.subimage=function(b,a,d,g){u(!!b,"must specify image data");a|=0;d|=0;g|=0;var k=J();Na(k,e);k.width=0;k.height=0;T(k,b);k.width=k.width||(e.width>>g)-a;k.height=k.height||(e.height>>g)-d;u(e.type===k.type&&e.format===k.format&&e.internalformat===k.internalformat,"incompatible format for texture.subimage");u(0<=a&&0<=d&&a+k.width<=e.width&&d+k.height<=e.height,
"texture.subimage write out of bounds");u(e.mipmask&1<<g,"missing mipmap data");u(k.data||k.element||k.needsCopy,"missing image data");ob(e);qa(k,3553,a,d,g);ca();w(k);return f};f.resize=function(a,d){var g=a|0,k=d|0||g;if(g===e.width&&k===e.height)return f;f.width=e.width=g;f.height=e.height=k;ob(e);for(var h=0;e.mipmask>>h;++h){var c=g>>h,m=k>>h;if(!c||!m)break;b.texImage2D(3553,h,e.format,c,m,0,e.format,e.type,null)}ca();B.profile&&(e.stats.size=r(e.internalformat,e.type,g,k,!1,!1));return f};
f._reglType="texture2d";f._texture=e;B.profile&&(f.stats=e.stats);f.destroy=function(){e.decRef()};return f},createCube:function(a,d,f,e,g,k){function h(b,a,d,f,e,g){var k,l=m.texInfo;Oa.call(l);for(k=0;6>k;++k)n[k]=Z();if("number"!==typeof b&&b)if("object"===typeof b)if(a)t(n[0],b),t(n[1],a),t(n[2],d),t(n[3],f),t(n[4],e),t(n[5],g);else if(ac(l,b),Y(m,b),"faces"in b)for(b=b.faces,u(Array.isArray(b)&&6===b.length,"cube faces must be a length 6 array"),k=0;6>k;++k)u("object"===typeof b[k]&&!!b[k],"invalid input for cube map face"),
Na(n[k],m),t(n[k],b[k]);else for(k=0;6>k;++k)t(n[k],b);else u.raise("invalid arguments to cube map");else for(b=b|0||1,k=0;6>k;++k)R(n[k],b,b);Na(m,n[0]);u.optional(function(){c.npotTextureCube||u(F(m.width)&&F(m.height),"your browser does not support non power or two texture dimensions")});m.mipmask=l.genMipmaps?(n[0].width<<1)-1:n[0].mipmask;u.textureCube(m,l,n,c);m.internalformat=n[0].internalformat;h.width=n[0].width;h.height=n[0].height;ob(m);for(k=0;6>k;++k)ha(n[k],34069+k);bb(l,34067);ca();
B.profile&&(m.stats.size=r(m.internalformat,m.type,h.width,h.height,l.genMipmaps,!0));h.format=Vc[m.internalformat];h.type=Ac[m.type];h.mag=E[l.magFilter];h.min=z[l.minFilter];h.wrapS=ga[l.wrapS];h.wrapT=ga[l.wrapT];for(k=0;6>k;++k)Aa(n[k]);return h}var m=new U(34067);G[m.id]=m;la.cubeCount++;var n=Array(6);h(a,d,f,e,g,k);h.subimage=function(b,a,d,f,e){u(!!a,"must specify image data");u("number"===typeof b&&b===(b|0)&&0<=b&&6>b,"invalid face");d|=0;f|=0;e|=0;var g=J();Na(g,m);g.width=0;g.height=0;
T(g,a);g.width=g.width||(m.width>>e)-d;g.height=g.height||(m.height>>e)-f;u(m.type===g.type&&m.format===g.format&&m.internalformat===g.internalformat,"incompatible format for texture.subimage");u(0<=d&&0<=f&&d+g.width<=m.width&&f+g.height<=m.height,"texture.subimage write out of bounds");u(m.mipmask&1<<e,"missing mipmap data");u(g.data||g.element||g.needsCopy,"missing image data");ob(m);qa(g,34069+b,d,f,e);ca();w(g);return h};h.resize=function(a){a|=0;if(a!==m.width){h.width=m.width=a;h.height=m.height=
a;ob(m);for(var d=0;6>d;++d)for(var f=0;m.mipmask>>f;++f)b.texImage2D(34069+d,f,m.format,a>>f,a>>f,0,m.format,m.type,null);ca();B.profile&&(m.stats.size=r(m.internalformat,m.type,h.width,h.height,!1,!0));return h}};h._reglType="textureCube";h._texture=m;B.profile&&(h.stats=m.stats);h.destroy=function(){m.decRef()};return h},clear:function(){for(var a=0;a<x;++a)b.activeTexture(33984+a),b.bindTexture(3553,null),ba[a]=null;sa(G).forEach(oa);la.cubeCount=0;la.textureCount=0},getTexture:function(b){return null},
restore:function(){for(var a=0;a<x;++a){var d=ba[a];d&&(d.bindCount=0,d.unit=-1,ba[a]=null)}sa(G).forEach(function(a){a.texture=b.createTexture();b.bindTexture(a.target,a.texture);for(var d=0;32>d;++d)if(0!==(a.mipmask&1<<d))if(3553===a.target)b.texImage2D(3553,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);else for(var f=0;6>f;++f)b.texImage2D(34069+f,d,a.internalformat,a.width>>d,a.height>>d,0,a.internalformat,a.type,null);bb(a.texInfo,a.target)})},refresh:function(){for(var a=
0;a<x;++a){var d=ba[a];d&&(d.bindCount=0,d.unit=-1,ba[a]=null);b.activeTexture(33984+a);b.bindTexture(3553,null);b.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(B,w,Va){w.exports=function(c,Q){function p(){this.endQueryIndex=
this.startQueryIndex=-1;this.sum=0;this.stats=null}function y(d,e,c){var v=r.pop()||new p;v.startQueryIndex=d;v.endQueryIndex=e;v.sum=0;v.stats=c;a.push(v)}if(!Q.ext_disjoint_timer_query)return null;var e=[],d=[],r=[],a=[],u=[],ja=[];return{beginQuery:function(a){var c=e.pop()||Q.ext_disjoint_timer_query.createQueryEXT();Q.ext_disjoint_timer_query.beginQueryEXT(35007,c);d.push(c);y(d.length-1,d.length,a)},endQuery:function(){Q.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:y,update:function(){var c,
n;c=d.length;if(0!==c){ja.length=Math.max(ja.length,c+1);u.length=Math.max(u.length,c+1);u[0]=0;var p=ja[0]=0;for(n=c=0;n<d.length;++n){var v=d[n];Q.ext_disjoint_timer_query.getQueryObjectEXT(v,34919)?(p+=Q.ext_disjoint_timer_query.getQueryObjectEXT(v,34918),e.push(v)):d[c++]=v;u[n+1]=p;ja[n+1]=c}d.length=c;for(n=c=0;n<a.length;++n){var p=a[n],y=p.startQueryIndex,v=p.endQueryIndex;p.sum+=u[v]-u[y];y=ja[y];v=ja[v];v===y?(p.stats.gpuTime+=p.sum/1E6,r.push(p)):(p.startQueryIndex=y,p.endQueryIndex=v,
a[c++]=p)}a.length=c}},getNumPendingQueries:function(){return d.length},clear:function(){e.push.apply(e,d);for(var a=0;a<e.length;a++)Q.ext_disjoint_timer_query.deleteQueryEXT(e[a]);d.length=0;e.length=0},restore:function(){d.length=0;e.length=0}}}},{}],21:[function(B,w,Va){function c(a){return"undefined"!==typeof atob?atob(a):"base64:"+a}function Q(a){a=Error("(regl) "+a);console.error(a);throw a;}function p(a,d){a||Q(d)}function y(a){return a?": "+a:""}function e(a,d){switch(d){case "number":return"number"===
typeof a;case "object":return"object"===typeof a;case "string":return"string"===typeof a;case "boolean":return"boolean"===typeof a;case "function":return"function"===typeof a;case "undefined":return"undefined"===typeof a;case "symbol":return"symbol"===typeof a}}function d(a,d,e){0>d.indexOf(a)&&Q("invalid value"+y(e)+". must be one of: "+d)}function r(a,d){for(a+="";a.length<d;)a=" "+a;return a}function a(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function u(a,d){this.number=
a;this.line=d;this.errors=[]}function ja(a,d,e){this.file=a;this.line=d;this.message=e}function sa(){var a=Error(),a=(a.stack||a).toString(),d=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(a);return d?d[1]:(a=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(a))?a[1]:"unknown"}function n(){var a=Error(),a=(a.stack||a).toString(),d=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(a);return d?d[1]:(a=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(a))?a[1]:"unknown"}function I(d,e){var g=d.split("\n"),h=1,m=0,n={unknown:new a,
0:new a};n.unknown.name=n[0].name=e||sa();n.unknown.lines.push(new u(0,""));for(var r=0;r<g.length;++r){var v=g[r],b=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(v);if(b)switch(b[1]){case "line":if(b=/(\d+)(\s+\d+)?/.exec(b[2]))h=b[1]|0,b[2]&&(m=b[2]|0,m in n||(n[m]=new a));break;case "define":if(b=/SHADER_NAME(_B64)?\s+(.*)$/.exec(b[2]))n[m].name=b[1]?c(b[2]):b[2]}n[m].lines.push(new u(h++,v))}P(n).forEach(function(b){var a=n[b];a.lines.forEach(function(b){a.index[b.number]=b})});return n}function v(a){var d=
[];a.split("\n").forEach(function(a){if(!(5>a.length)){var f=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(a);f?d.push(new ja(f[1]|0,f[2]|0,f[3].trim())):0<a.length&&d.push(new ja("unknown",0,a))}});return d}function D(a,d){d.forEach(function(d){var e=a[d.file];if(e){var g=e.index[d.line];if(g){g.errors.push(d);e.hasErrors=!0;return}}a.unknown.hasErrors=!0;a.unknown.lines[0].errors.push(d)})}function L(a){a._commandRef=sa()}function C(a,d){var e=n();Q(a+" in command "+(d||sa())+("unknown"===e?"":" called from "+
e))}function F(a,d,g,h){e(a,d)||C("invalid parameter type"+y(g)+". expected "+d+", got "+typeof a,h||sa())}function na(a,d){return 32820===a||32819===a||33635===a?2:34042===a?4:g[a]*d}var P=B("./sorted-object-keys"),va=B("./is-typed-array");B=B("./extend");var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),g={};g[5120]=g[5121]=1;g[5122]=g[5123]=g[36193]=g[33635]=g[32819]=g[32820]=2;g[5124]=g[5125]=g[5126]=g[34042]=4;w.exports=B(p,{optional:function(a){a()},
raise:Q,commandRaise:C,command:function(a,d,e){a||C(d,e||sa())},parameter:function(a,d,e){a in d||Q("unknown parameter ("+a+")"+y(e)+". possible values: "+P(d).join())},commandParameter:function(a,d,e,g){a in d||C("unknown parameter ("+a+")"+y(e)+". possible values: "+P(d).join(),g||sa())},constructor:function(a){P(a).forEach(function(a){0>h.indexOf(a)&&Q('invalid regl constructor argument "'+a+'". must be one of '+h)})},type:function(a,d,g){e(a,d)||Q("invalid parameter type"+y(g)+". expected "+d+
", got "+typeof a)},commandType:F,isTypedArray:function(a,d){va(a)||Q("invalid parameter type"+y(d)+". must be a typed array")},nni:function(a,d){0<=a&&(a|0)===a||Q("invalid parameter type, ("+a+")"+y(d)+". must be a nonnegative integer")},oneOf:d,shaderError:function(a,d,e,g,h){if(!a.getShaderParameter(d,a.COMPILE_STATUS)){d=a.getShaderInfoLog(d);a=g===a.FRAGMENT_SHADER?"fragment":"vertex";F(e,"string",a+" shader source must be a string",h);var c=I(e,h);e=v(d);D(c,e);P(c).forEach(function(a){function d(b,
a){f.push(b);e.push(a||"")}var b=c[a];if(b.hasErrors){var f=[""],e=[""];d("file number "+a+": "+b.name+"\n","color:red;text-decoration:underline;font-weight:bold");b.lines.forEach(function(b){if(0<b.errors.length){d(r(b.number,4)+"|  ","background-color:yellow; font-weight:bold");d(b.line+"\n","color:red; background-color:yellow; font-weight:bold");var a=0;b.errors.forEach(function(f){f=f.message;var e=/^\s*'(.*)'\s*:\s*(.*)$/.exec(f);if(e){var g=e[1];f=e[2];switch(g){case "assign":g="="}a=Math.max(b.line.indexOf(g,
a),0)}else a=0;d(r("| ",6));d(r("^^^",a+3)+"\n","font-weight:bold");d(r("| ",6));d(f+"\n","font-weight:bold")});d(r("| ",6)+"\n")}else d(r(b.number,4)+"|  "),d(b.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(f.join("")):(e[0]=f.join("%c"),console.log.apply(console,e))}});p.raise("Error compiling "+a+" shader, "+c[0].name)}},linkError:function(a,d,e,g,h){a.getProgramParameter(d,a.LINK_STATUS)||(a=a.getProgramInfoLog(d),e=I(e,h),g='Error linking program with vertex shader, "'+
I(g,h)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!==typeof document?console.log("%c"+g+"\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(g+"\n"+a),p.raise(g))},callSite:n,saveCommandRef:L,saveDrawInfo:function(a,d,e,g){function h(a){return a?g.id(a):0}function c(a,b){P(b).forEach(function(b){a[g.id(b)]=!0})}L(a);a._fragId=h(a["static"].frag);a._vertId=h(a["static"].vert);var n=a._uniformSet={};c(n,d["static"]);c(n,d.dynamic);d=a._attributeSet=
{};c(d,e["static"]);c(d,e.dynamic);a._hasCount="count"in a["static"]||"count"in a.dynamic||"elements"in a["static"]||"elements"in a.dynamic},framebufferFormat:function(a,e,g){a.texture?d(a.texture._texture.internalformat,e,"unsupported texture format for attachment"):d(a.renderbuffer._renderbuffer.format,g,"unsupported renderbuffer format for attachment")},guessCommand:sa,texture2D:function(a,d,e){var g=d.width,h=d.height,c=d.channels;p(0<g&&g<=e.maxTextureSize&&0<h&&h<=e.maxTextureSize,"invalid texture shape");
33071===a.wrapS&&33071===a.wrapT||p(!(g&g-1)&&!!g&&!(h&h-1)&&!!h,"incompatible wrap mode for texture, both width and height must be power of 2");1===d.mipmask?1!==g&&1!==h&&p(9984!==a.minFilter&&9986!==a.minFilter&&9985!==a.minFilter&&9987!==a.minFilter,"min filter requires mipmap"):(p(!(g&g-1)&&!!g&&!(h&h-1)&&!!h,"texture must be a square power of 2 to support mipmapping"),p(d.mipmask===(g<<1)-1,"missing or incomplete mipmap data"));5126===d.type&&(0>e.extensions.indexOf("oes_texture_float_linear")&&
p(9728===a.minFilter&&9728===a.magFilter,"filter not supported, must enable oes_texture_float_linear"),p(!a.genMipmaps,"mipmap generation not supported with float textures"));var n=d.images;for(e=0;16>e;++e)if(n[e]){var r=g>>e,b=h>>e;p(d.mipmask&1<<e,"missing mipmap data");var k=n[e];p(k.width===r&&k.height===b,"invalid shape for mip images");p(k.format===d.format&&k.internalformat===d.internalformat&&k.type===d.type,"incompatible type for mip image");!k.compressed&&k.data&&(r=Math.ceil(na(k.type,
c)*r/k.unpackAlignment)*k.unpackAlignment,p(k.data.byteLength===r*b,"invalid data for image, buffer size is inconsistent with image format"))}else a.genMipmaps||p(0===(d.mipmask&1<<e),"extra mipmap data");d.compressed&&p(!a.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(a,d,e,g){var h=a.width,c=a.height,n=a.channels;p(0<h&&h<=g.maxTextureSize&&0<c&&c<=g.maxTextureSize,"invalid texture shape");p(h===c,"cube map must be square");p(33071===d.wrapS&&33071===
d.wrapT,"wrap mode not supported by cube map");for(g=0;g<e.length;++g){var r=e[g];p(r.width===h&&r.height===c,"inconsistent cube map face shape");d.genMipmaps&&(p(!r.compressed,"can not generate mipmap for compressed textures"),p(1===r.mipmask,"can not specify mipmaps and generate mipmaps"));for(var b=r.images,k=0;16>k;++k){var v=b[k];if(v){var u=h>>k,y=c>>k;p(r.mipmask&1<<k,"missing mipmap data");p(v.width===u&&v.height===y,"invalid shape for mip images");p(v.format===a.format&&v.internalformat===
a.internalformat&&v.type===a.type,"incompatible type for mip image");v.compressed||v.data&&p(v.data.byteLength===u*y*Math.max(na(v.type,n),v.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(B,w,Va){w.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date}},{}],23:[function(B,w,Va){function c(c){return Array.prototype.slice.call(c)}
var Q=B("./extend"),p=B("./compiled-fns");w.exports=function(){function y(){var a=[],d=[];return Q(function(){a.push.apply(a,c(arguments))},{def:function(){var e="v"+r;r++;d.push(e);0<arguments.length&&(a.push(e,"="),a.push.apply(a,c(arguments)),a.push(";"));return e},toString:function(){return c([0<d.length?"var "+d.join(",")+";":"",c(a).join("")]).join("")}})}function e(){function a(c,r){e(c,r,"=",d.def(c,r),";")}var d=y(),e=y(),r=d.toString,v=e.toString;return Q(function(){d.apply(d,c(arguments))},
{def:d.def,entry:d,exit:e,save:a,set:function(e,c,n){a(e,c);d(e,c,"=",n,";")},toString:function(){return r()+v()}})}var d=0,r=0,a={},u={};return{global:y(),link:function(e){var c="$"+d,n=!1;"object"===typeof e&&e.name&&(c=e.name.replace(/ /g,"_"),n=!0);if(c in a)return c;a[c]=e;n||d++;return c},block:y,proc:function(a,d){function n(){var a="a"+r.length;r.push(a);return a}var r=[];d=d||0;for(var v=0;v<d;++v)n();var v=e(),p=v.toString;return u[a]=Q(v,{arg:n,toString:function(){return c(["function(",
r.join(),"){",p(),"}"]).join("")}})},scope:e,cond:function(){var a=c(arguments).join(""),d=e(),n=e(),r=d.toString,v=n.toString;return Q(d,{then:function(){d.apply(d,c(arguments));return this},"else":function(){n.apply(n,c(arguments));return this},toString:function(){var d=v();d&&(d="else{"+d+"}");return c(["if(",a,"){",r(),"}",d]).join("")}})},compile:function(){var d=[],e=[];Object.keys(a).sort(function(a,d){var e="$"===a.charAt(0),c="$"===d.charAt(0);return e||c?e&&c?+a.slice(1)<+d.slice(1)?-1:
1:e&&!c?-1:1:a.localeCompare(d)}).forEach(function(c){var n=a[c];d.push(c);e.push(n)});for(var c=0,r=d.length-1;-1<r;r--)if("$"===d[r].charAt(0)){c=r;break}c=d.slice(c).join();r=p[c];if(!r)throw Error("missing precompiled function with key: "+c);return r.apply(null,e)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(B,w,Va){w.exports={$0:function(c){var Q,p,y,e,d,r,a,u,ja,sa,n,I,v,D,L,C,F,B,P,va,h,g,f,A,S,aa,m,la,H,da;Q=c.attributes;p=c.current;y=c.framebuffer;e=c.gl;d=c.next;r=c.vao;a=d.blend_color;
u=p.blend_color;ja=d.blend_equation;sa=p.blend_equation;n=d.blend_func;I=p.blend_func;v=d.colorMask;D=p.colorMask;L=d.depth_range;C=p.depth_range;F=d.polygonOffset_offset;B=p.polygonOffset_offset;P=d.sample_coverage;va=p.sample_coverage;h=d.scissor_box;g=p.scissor_box;f=d.stencil_func;A=p.stencil_func;S=d.stencil_opBack;aa=p.stencil_opBack;m=d.stencil_opFront;la=p.stencil_opFront;H=d.viewport;da=p.viewport;return{poll:function(){var b,k,c,r,Q,w,Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa;p.dirty=!1;k=
d.blend_enable;c=d.cull_enable;r=d.depth_enable;Q=d.dither;w=d.polygonOffset_enable;Gb=d.sample_alpha;ua=d.sample_enable;Na=d.scissor_enable;Y=d.stencil_enable;N=d.cull_face;M=p.cull_face;T=d.depth_func;qa=p.depth_func;J=d.depth_mask;Zb=p.depth_mask;Ja=d.frontFace;R=p.frontFace;t=d.lineWidth;ha=p.lineWidth;Z=d.stencil_mask;Aa=p.stencil_mask;b=y.next;b!==y.cur&&(b?e.bindFramebuffer(36160,b.framebuffer):e.bindFramebuffer(36160,null),y.cur=b);k!==p.blend_enable&&(k?e.enable(3042):e.disable(3042),p.blend_enable=
k);c!==p.cull_enable&&(c?e.enable(2884):e.disable(2884),p.cull_enable=c);r!==p.depth_enable&&(r?e.enable(2929):e.disable(2929),p.depth_enable=r);Q!==p.dither&&(Q?e.enable(3024):e.disable(3024),p.dither=Q);w!==p.polygonOffset_enable&&(w?e.enable(32823):e.disable(32823),p.polygonOffset_enable=w);Gb!==p.sample_alpha&&(Gb?e.enable(32926):e.disable(32926),p.sample_alpha=Gb);ua!==p.sample_enable&&(ua?e.enable(32928):e.disable(32928),p.sample_enable=ua);Na!==p.scissor_enable&&(Na?e.enable(3089):e.disable(3089),
p.scissor_enable=Na);Y!==p.stencil_enable&&(Y?e.enable(2960):e.disable(2960),p.stencil_enable=Y);if(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3])e.blendColor(a[0],a[1],a[2],a[3]),u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[3];if(ja[0]!==sa[0]||ja[1]!==sa[1])e.blendEquationSeparate(ja[0],ja[1]),sa[0]=ja[0],sa[1]=ja[1];if(n[0]!==I[0]||n[1]!==I[1]||n[2]!==I[2]||n[3]!==I[3])e.blendFuncSeparate(n[0],n[1],n[2],n[3]),I[0]=n[0],I[1]=n[1],I[2]=n[2],I[3]=n[3];if(v[0]!==D[0]||v[1]!==D[1]||v[2]!==D[2]||v[3]!==
D[3])e.colorMask(v[0],v[1],v[2],v[3]),D[0]=v[0],D[1]=v[1],D[2]=v[2],D[3]=v[3];N!==M&&(e.cullFace(N),p.cull_face=N);T!==qa&&(e.depthFunc(T),p.depth_func=T);J!==Zb&&(e.depthMask(J),p.depth_mask=J);if(L[0]!==C[0]||L[1]!==C[1])e.depthRange(L[0],L[1]),C[0]=L[0],C[1]=L[1];Ja!==R&&(e.frontFace(Ja),p.frontFace=Ja);t!==ha&&(e.lineWidth(t),p.lineWidth=t);if(F[0]!==B[0]||F[1]!==B[1])e.polygonOffset(F[0],F[1]),B[0]=F[0],B[1]=F[1];if(P[0]!==va[0]||P[1]!==va[1])e.sampleCoverage(P[0],P[1]),va[0]=P[0],va[1]=P[1];
if(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3])e.scissor(h[0],h[1],h[2],h[3]),g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3];if(f[0]!==A[0]||f[1]!==A[1]||f[2]!==A[2])e.stencilFunc(f[0],f[1],f[2]),A[0]=f[0],A[1]=f[1],A[2]=f[2];Z!==Aa&&(e.stencilMask(Z),p.stencil_mask=Z);if(S[0]!==aa[0]||S[1]!==aa[1]||S[2]!==aa[2]||S[3]!==aa[3])e.stencilOpSeparate(S[0],S[1],S[2],S[3]),aa[0]=S[0],aa[1]=S[1],aa[2]=S[2],aa[3]=S[3];if(m[0]!==la[0]||m[1]!==la[1]||m[2]!==la[2]||m[3]!==la[3])e.stencilOpSeparate(m[0],m[1],
m[2],m[3]),la[0]=m[0],la[1]=m[1],la[2]=m[2],la[3]=m[3];if(H[0]!==da[0]||H[1]!==da[1]||H[2]!==da[2]||H[3]!==da[3])e.viewport(H[0],H[1],H[2],H[3]),da[0]=H[0],da[1]=H[1],da[2]=H[2],da[3]=H[3]},refresh:function(){var b,k,c,pa,w,jb,Gb,ua,Na,Y,N,M,T,qa,J,Zb;p.dirty=!1;k=d.blend_enable;c=d.cull_enable;pa=d.depth_enable;w=d.dither;jb=d.polygonOffset_enable;Gb=d.sample_alpha;ua=d.sample_enable;Na=d.scissor_enable;Y=d.stencil_enable;N=d.cull_face;M=d.depth_func;T=d.depth_mask;qa=d.frontFace;J=d.lineWidth;Zb=
d.stencil_mask;(b=y.next)?e.bindFramebuffer(36160,b.framebuffer):e.bindFramebuffer(36160,null);y.cur=b;b=Q[0];b.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[1];b.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(1),
e.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[2];b.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[3];b.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,b.x,b.y,b.z,
b.w),b.buffer=null);b=Q[4];b.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(4,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[5];b.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[6];b.buffer?
(e.enableVertexAttribArray(6),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[7];b.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[8];b.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,
b.buffer.buffer),e.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[9];b.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[10];b.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(10,
b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[11];b.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[12];b.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(12,b.size,b.type,b.normalized,
b.stride,b.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[13];b.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[14];b.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(14),
e.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);b=Q[15];b.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,b.buffer.buffer),e.vertexAttribPointer(15,b.size,b.type,b.normalized,b.stride,b.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);r.currentVAO=null;r.setVAO(r.targetVAO);k?e.enable(3042):e.disable(3042);p.blend_enable=k;c?e.enable(2884):e.disable(2884);p.cull_enable=c;pa?e.enable(2929):e.disable(2929);p.depth_enable=pa;w?e.enable(3024):e.disable(3024);
p.dither=w;jb?e.enable(32823):e.disable(32823);p.polygonOffset_enable=jb;Gb?e.enable(32926):e.disable(32926);p.sample_alpha=Gb;ua?e.enable(32928):e.disable(32928);p.sample_enable=ua;Na?e.enable(3089):e.disable(3089);p.scissor_enable=Na;Y?e.enable(2960):e.disable(2960);p.stencil_enable=Y;e.blendColor(a[0],a[1],a[2],a[3]);u[0]=a[0];u[1]=a[1];u[2]=a[2];u[3]=a[3];e.blendEquationSeparate(ja[0],ja[1]);sa[0]=ja[0];sa[1]=ja[1];e.blendFuncSeparate(n[0],n[1],n[2],n[3]);I[0]=n[0];I[1]=n[1];I[2]=n[2];I[3]=n[3];
e.colorMask(v[0],v[1],v[2],v[3]);D[0]=v[0];D[1]=v[1];D[2]=v[2];D[3]=v[3];e.cullFace(N);p.cull_face=N;e.depthFunc(M);p.depth_func=M;e.depthMask(T);p.depth_mask=T;e.depthRange(L[0],L[1]);C[0]=L[0];C[1]=L[1];e.frontFace(qa);p.frontFace=qa;e.lineWidth(J);p.lineWidth=J;e.polygonOffset(F[0],F[1]);B[0]=F[0];B[1]=F[1];e.sampleCoverage(P[0],P[1]);va[0]=P[0];va[1]=P[1];e.scissor(h[0],h[1],h[2],h[3]);g[0]=h[0];g[1]=h[1];g[2]=h[2];g[3]=h[3];e.stencilFunc(f[0],f[1],f[2]);A[0]=f[0];A[1]=f[1];A[2]=f[2];e.stencilMask(Zb);
p.stencil_mask=Zb;e.stencilOpSeparate(S[0],S[1],S[2],S[3]);aa[0]=S[0];aa[1]=S[1];aa[2]=S[2];aa[3]=S[3];e.stencilOpSeparate(m[0],m[1],m[2],m[3]);la[0]=m[0];la[1]=m[1];la[2]=m[2];la[3]=m[3];e.viewport(H[0],H[1],H[2],H[3]);da[0]=H[0];da[1]=H[1];da[2]=H[2];da[3]=H[3]}}},$3:function(c,Q,p,y){var e,d,r,a,u,ja,sa,n,I,v,D,L,C,F,B,P,va,h,g,f,A,S,aa,m,la,H,da,b,k,X,pa,w,jb;e=c.context;d=c.current;r=c.framebuffer;a=c.gl;u=c.next;ja=c.shader;sa=c.vao;n=u.blend_color;I=d.blend_color;v=u.blend_equation;D=d.blend_equation;
L=u.blend_func;C=d.blend_func;F=u.colorMask;B=d.colorMask;P=u.depth_range;va=d.depth_range;h=u.polygonOffset_offset;g=d.polygonOffset_offset;f=u.sample_coverage;A=d.sample_coverage;S=u.scissor_box;aa=d.scissor_box;m=u.stencil_func;la=d.stencil_func;H=u.stencil_opBack;da=d.stencil_opBack;b=u.stencil_opFront;k=d.stencil_opFront;X=u.viewport;pa=d.viewport;w={};jb={};return{batch:function(e,c){var p,Y,N,M,T;p=r.next;p!==r.cur&&(p?a.bindFramebuffer(36160,p.framebuffer):a.bindFramebuffer(36160,null),r.cur=
p);if(d.dirty){p=u.dither;p!==d.dither&&(p?a.enable(3024):a.disable(3024),d.dither=p);p=u.blend_enable;p!==d.blend_enable&&(p?a.enable(3042):a.disable(3042),d.blend_enable=p);p=n[0];N=n[1];M=n[2];T=n[3];if(p!==I[0]||N!==I[1]||M!==I[2]||T!==I[3])a.blendColor(p,N,M,T),I[0]=p,I[1]=N,I[2]=M,I[3]=T;p=v[0];N=v[1];if(p!==D[0]||N!==D[1])a.blendEquationSeparate(p,N),D[0]=p,D[1]=N;p=L[0];N=L[1];M=L[2];T=L[3];if(p!==C[0]||N!==C[1]||M!==C[2]||T!==C[3])a.blendFuncSeparate(p,N,M,T),C[0]=p,C[1]=N,C[2]=M,C[3]=T;
p=u.depth_enable;p!==d.depth_enable&&(p?a.enable(2929):a.disable(2929),d.depth_enable=p);p=u.depth_func;p!==d.depth_func&&(a.depthFunc(p),d.depth_func=p);p=P[0];N=P[1];if(p!==va[0]||N!==va[1])a.depthRange(p,N),va[0]=p,va[1]=N;p=u.depth_mask;p!==d.depth_mask&&(a.depthMask(p),d.depth_mask=p);p=F[0];N=F[1];M=F[2];T=F[3];if(p!==B[0]||N!==B[1]||M!==B[2]||T!==B[3])a.colorMask(p,N,M,T),B[0]=p,B[1]=N,B[2]=M,B[3]=T;p=u.cull_enable;p!==d.cull_enable&&(p?a.enable(2884):a.disable(2884),d.cull_enable=p);p=u.cull_face;
p!==d.cull_face&&(a.cullFace(p),d.cull_face=p);p=u.frontFace;p!==d.frontFace&&(a.frontFace(p),d.frontFace=p);p=u.lineWidth;p!==d.lineWidth&&(a.lineWidth(p),d.lineWidth=p);p=u.polygonOffset_enable;p!==d.polygonOffset_enable&&(p?a.enable(32823):a.disable(32823),d.polygonOffset_enable=p);p=h[0];N=h[1];if(p!==g[0]||N!==g[1])a.polygonOffset(p,N),g[0]=p,g[1]=N;p=u.sample_alpha;p!==d.sample_alpha&&(p?a.enable(32926):a.disable(32926),d.sample_alpha=p);p=u.sample_enable;p!==d.sample_enable&&(p?a.enable(32928):
a.disable(32928),d.sample_enable=p);p=f[0];N=f[1];if(p!==A[0]||N!==A[1])a.sampleCoverage(p,N),A[0]=p,A[1]=N;p=u.stencil_enable;p!==d.stencil_enable&&(p?a.enable(2960):a.disable(2960),d.stencil_enable=p);p=u.stencil_mask;p!==d.stencil_mask&&(a.stencilMask(p),d.stencil_mask=p);p=m[0];N=m[1];M=m[2];if(p!==la[0]||N!==la[1]||M!==la[2])a.stencilFunc(p,N,M),la[0]=p,la[1]=N,la[2]=M;p=b[0];N=b[1];M=b[2];T=b[3];if(p!==k[0]||N!==k[1]||M!==k[2]||T!==k[3])a.stencilOpSeparate(p,N,M,T),k[0]=p,k[1]=N,k[2]=M,k[3]=
T;p=H[0];N=H[1];M=H[2];T=H[3];if(p!==da[0]||N!==da[1]||M!==da[2]||T!==da[3])a.stencilOpSeparate(p,N,M,T),da[0]=p,da[1]=N,da[2]=M,da[3]=T;p=u.scissor_enable;p!==d.scissor_enable&&(p?a.enable(3089):a.disable(3089),d.scissor_enable=p);p=S[0];N=S[1];M=S[2];T=S[3];if(p!==aa[0]||N!==aa[1]||M!==aa[2]||T!==aa[3])a.scissor(p,N,M,T),aa[0]=p,aa[1]=N,aa[2]=M,aa[3]=T;p=X[0];N=X[1];M=X[2];T=X[3];if(p!==pa[0]||N!==pa[1]||M!==pa[2]||T!==pa[3])a.viewport(p,N,M,T),pa[0]=p,pa[1]=N,pa[2]=M,pa[3]=T;d.dirty=!1}if(p=d.profile)Y=
performance.now(),Q.count+=c;N=ja.program(ja.vert,ja.frag);a.useProgram(N.program);sa.setVAO(null);M=N.id;(T=jb[M])||(T=jb[M]=y(N));T.call(this,e,c);sa.setVAO(null);p&&(Q.cpuTime+=performance.now()-Y)},draw:function(e){var c,y,Y,N,M;c=r.next;c!==r.cur&&(c?a.bindFramebuffer(36160,c.framebuffer):a.bindFramebuffer(36160,null),r.cur=c);if(d.dirty){c=u.dither;c!==d.dither&&(c?a.enable(3024):a.disable(3024),d.dither=c);c=u.blend_enable;c!==d.blend_enable&&(c?a.enable(3042):a.disable(3042),d.blend_enable=
c);c=n[0];Y=n[1];N=n[2];M=n[3];if(c!==I[0]||Y!==I[1]||N!==I[2]||M!==I[3])a.blendColor(c,Y,N,M),I[0]=c,I[1]=Y,I[2]=N,I[3]=M;c=v[0];Y=v[1];if(c!==D[0]||Y!==D[1])a.blendEquationSeparate(c,Y),D[0]=c,D[1]=Y;c=L[0];Y=L[1];N=L[2];M=L[3];if(c!==C[0]||Y!==C[1]||N!==C[2]||M!==C[3])a.blendFuncSeparate(c,Y,N,M),C[0]=c,C[1]=Y,C[2]=N,C[3]=M;c=u.depth_enable;c!==d.depth_enable&&(c?a.enable(2929):a.disable(2929),d.depth_enable=c);c=u.depth_func;c!==d.depth_func&&(a.depthFunc(c),d.depth_func=c);c=P[0];Y=P[1];if(c!==
va[0]||Y!==va[1])a.depthRange(c,Y),va[0]=c,va[1]=Y;c=u.depth_mask;c!==d.depth_mask&&(a.depthMask(c),d.depth_mask=c);c=F[0];Y=F[1];N=F[2];M=F[3];if(c!==B[0]||Y!==B[1]||N!==B[2]||M!==B[3])a.colorMask(c,Y,N,M),B[0]=c,B[1]=Y,B[2]=N,B[3]=M;c=u.cull_enable;c!==d.cull_enable&&(c?a.enable(2884):a.disable(2884),d.cull_enable=c);c=u.cull_face;c!==d.cull_face&&(a.cullFace(c),d.cull_face=c);c=u.frontFace;c!==d.frontFace&&(a.frontFace(c),d.frontFace=c);c=u.lineWidth;c!==d.lineWidth&&(a.lineWidth(c),d.lineWidth=
c);c=u.polygonOffset_enable;c!==d.polygonOffset_enable&&(c?a.enable(32823):a.disable(32823),d.polygonOffset_enable=c);c=h[0];Y=h[1];if(c!==g[0]||Y!==g[1])a.polygonOffset(c,Y),g[0]=c,g[1]=Y;c=u.sample_alpha;c!==d.sample_alpha&&(c?a.enable(32926):a.disable(32926),d.sample_alpha=c);c=u.sample_enable;c!==d.sample_enable&&(c?a.enable(32928):a.disable(32928),d.sample_enable=c);c=f[0];Y=f[1];if(c!==A[0]||Y!==A[1])a.sampleCoverage(c,Y),A[0]=c,A[1]=Y;c=u.stencil_enable;c!==d.stencil_enable&&(c?a.enable(2960):
a.disable(2960),d.stencil_enable=c);c=u.stencil_mask;c!==d.stencil_mask&&(a.stencilMask(c),d.stencil_mask=c);c=m[0];Y=m[1];N=m[2];if(c!==la[0]||Y!==la[1]||N!==la[2])a.stencilFunc(c,Y,N),la[0]=c,la[1]=Y,la[2]=N;c=b[0];Y=b[1];N=b[2];M=b[3];if(c!==k[0]||Y!==k[1]||N!==k[2]||M!==k[3])a.stencilOpSeparate(c,Y,N,M),k[0]=c,k[1]=Y,k[2]=N,k[3]=M;c=H[0];Y=H[1];N=H[2];M=H[3];if(c!==da[0]||Y!==da[1]||N!==da[2]||M!==da[3])a.stencilOpSeparate(c,Y,N,M),da[0]=c,da[1]=Y,da[2]=N,da[3]=M;c=u.scissor_enable;c!==d.scissor_enable&&
(c?a.enable(3089):a.disable(3089),d.scissor_enable=c);c=S[0];Y=S[1];N=S[2];M=S[3];if(c!==aa[0]||Y!==aa[1]||N!==aa[2]||M!==aa[3])a.scissor(c,Y,N,M),aa[0]=c,aa[1]=Y,aa[2]=N,aa[3]=M;c=X[0];Y=X[1];N=X[2];M=X[3];if(c!==pa[0]||Y!==pa[1]||N!==pa[2]||M!==pa[3])a.viewport(c,Y,N,M),pa[0]=c,pa[1]=Y,pa[2]=N,pa[3]=M;d.dirty=!1}if(c=d.profile)y=performance.now(),Q.count++;Y=ja.program(ja.vert,ja.frag);a.useProgram(Y.program);sa.setVAO(null);N=Y.id;(M=w[N])||(M=w[N]=p(Y));M.call(this,e);sa.setVAO(null);c&&(Q.cpuTime+=
performance.now()-y)},scope:function(b,a,f){var g,c;if(g=d.profile)c=performance.now(),Q.count++;a(e,b,f);g&&(Q.cpuTime+=performance.now()-c)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(c,Q,p,y,e,d,r,a,u,B,sa,n,I,v,D,L,C,F,na,P,va,h,g,f,A,S,aa,m,la,
H,da,b,k,X,pa,w,jb,Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa,fc,gc,rc,vd,xc,W,K,ia,Da,ub,Vc,Ac,E,z,ga,ta,V,fa,ma){var G,x,ba,O,za,ka,l,mc,ea,q,Ib,Ab,Ue,ke,te,ae,bd,oe,ud,de,qe,Gd,Nd,Vd,ee,Ye,Jf,Ve,yd,Ce,Qd,Rd,Zd,Ke,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,Od,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb;G=c.attributes;x=c.context;ba=c.current;O=c.draw;za=c.elements;ka=c.framebuffer;l=c.gl;mc=c.next;ea=c.shader;q=c.uniforms;Ib=c.vao;Ab=mc.blend_color;Ue=ba.blend_color;
ke=mc.blend_equation;te=ba.blend_equation;ae=mc.blend_func;bd=ba.blend_func;oe=mc.colorMask;ud=ba.colorMask;de=mc.depth_range;qe=ba.depth_range;Gd=mc.polygonOffset_offset;Nd=ba.polygonOffset_offset;Vd=mc.sample_coverage;ee=ba.sample_coverage;Ye=mc.scissor_box;Jf=ba.scissor_box;Ve=mc.stencil_func;yd=ba.stencil_func;Ce=mc.stencil_opBack;Qd=ba.stencil_opBack;Rd=mc.stencil_opFront;Zd=ba.stencil_opFront;Ke=mc.viewport;qd=ba.viewport;ld={};wd={};od=new Float32Array(16);gd=new Float32Array(16);Bc=new Float32Array(16);
rd=new Float32Array(16);Rc=new Float32Array(16);Mc=new Float32Array(16);sc=new Float32Array(16);$a=new Float32Array(16);lc=new Float32Array(16);Eb=new Float32Array(16);qc=new Float32Array(16);Ta=new Float32Array(16);Kc=new Float32Array(16);cc=new Float32Array(16);$c=new Float32Array(16);Od=new Float32Array(16);md=new Float32Array(16);Cc=new Float32Array(16);Yb=new Float32Array(16);Hc=new Float32Array(16);Hb=new Float32Array(16);La=new Float32Array(16);vb=new Float32Array(16);Xa=new Float32Array(16);
Ea=new Float32Array(16);sd=new Float32Array(16);gb=new Float32Array(16);Sa=new Float32Array(16);Wb=new Float32Array(16);cb=new Float32Array(16);tc=new Float32Array(16);Sb=new Float32Array(16);return{batch:function(b,f){var g,c,k,h;g=ka.next;g!==ka.cur&&(g?l.bindFramebuffer(36160,g.framebuffer):l.bindFramebuffer(36160,null),ka.cur=g);if(ba.dirty){var m,q,p,A,Q,H,ea,S,aa,X,P,$a,da,ra,Ta,wa,la,w,Ba,va,Ia,Ab,Eb,Ra,cc;m=oe[0];q=oe[1];p=oe[2];A=oe[3];if(m!==ud[0]||q!==ud[1]||p!==ud[2]||A!==ud[3])l.colorMask(m,
q,p,A),ud[0]=m,ud[1]=q,ud[2]=p,ud[3]=A;Q=mc.frontFace;Q!==ba.frontFace&&(l.frontFace(Q),ba.frontFace=Q);H=mc.polygonOffset_enable;H!==ba.polygonOffset_enable&&(H?l.enable(32823):l.disable(32823),ba.polygonOffset_enable=H);ea=Gd[0];S=Gd[1];if(ea!==Nd[0]||S!==Nd[1])l.polygonOffset(ea,S),Nd[0]=ea,Nd[1]=S;aa=mc.sample_alpha;aa!==ba.sample_alpha&&(aa?l.enable(32926):l.disable(32926),ba.sample_alpha=aa);X=mc.sample_enable;X!==ba.sample_enable&&(X?l.enable(32928):l.disable(32928),ba.sample_enable=X);P=Vd[0];
$a=Vd[1];if(P!==ee[0]||$a!==ee[1])l.sampleCoverage(P,$a),ee[0]=P,ee[1]=$a;da=mc.stencil_enable;da!==ba.stencil_enable&&(da?l.enable(2960):l.disable(2960),ba.stencil_enable=da);ra=mc.stencil_mask;ra!==ba.stencil_mask&&(l.stencilMask(ra),ba.stencil_mask=ra);Ta=Ve[0];wa=Ve[1];la=Ve[2];if(Ta!==yd[0]||wa!==yd[1]||la!==yd[2])l.stencilFunc(Ta,wa,la),yd[0]=Ta,yd[1]=wa,yd[2]=la;w=Rd[0];Ba=Rd[1];va=Rd[2];Ia=Rd[3];if(w!==Zd[0]||Ba!==Zd[1]||va!==Zd[2]||Ia!==Zd[3])l.stencilOpSeparate(w,Ba,va,Ia),Zd[0]=w,Zd[1]=
Ba,Zd[2]=va,Zd[3]=Ia;Ab=Ce[0];Eb=Ce[1];Ra=Ce[2];cc=Ce[3];if(Ab!==Qd[0]||Eb!==Qd[1]||Ra!==Qd[2]||cc!==Qd[3])l.stencilOpSeparate(Ab,Eb,Ra,cc),Qd[0]=Ab,Qd[1]=Eb,Qd[2]=Ra,Qd[3]=cc}l.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;l.disable(3042);ba.blend_enable=!1;l.blendEquationSeparate(32774,32774);te[0]=32774;te[1]=32774;l.blendFuncSeparate(770,771,1,1);bd[0]=770;bd[1]=771;bd[2]=1;bd[3]=1;l.enable(2884);ba.cull_enable=!0;l.cullFace(1029);ba.cull_face=1029;l.enable(2929);ba.depth_enable=!0;l.depthFunc(513);
ba.depth_func=513;l.depthMask(!0);ba.depth_mask=!0;l.depthRange(0,1);qe[0]=0;qe[1]=1;l.disable(3024);ba.dither=!1;l.lineWidth(2);ba.lineWidth=2;l.enable(3089);ba.scissor_enable=!0;c=ba.profile;ba.profile=!1;l.useProgram(Gb.program);var Mc,Rc,pa,xa,sc,Ka,Ye,fb,ib,ya,Bc,Fa,rb,sb,Ya,Za,Kc,lc,$c,Wa,Nb,gd,Ga,qc,Qa,Ca,mb,xb,Db,tb,od,yb,rd;Ib.setVAO(null);Mc=fc.location;Rc=G[Mc];Rc.buffer||l.enableVertexAttribArray(Mc);if(Rc.type!==y.dtype||4!==Rc.size||Rc.buffer!==y||!1!==Rc.normalized||0!==Rc.offset||
0!==Rc.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(Mc,4,y.dtype,!1,0,0),Rc.type=y.dtype,Rc.size=4,Rc.buffer=y,Rc.normalized=!1,Rc.offset=0,Rc.stride=0;pa=gc.location;xa=G[pa];xa.buffer||l.enableVertexAttribArray(pa);if(xa.type!==e.dtype||4!==xa.size||xa.buffer!==e||!1!==xa.normalized||0!==xa.offset||0!==xa.stride)l.bindBuffer(34962,e.buffer),l.vertexAttribPointer(pa,4,e.dtype,!1,0,0),xa.type=e.dtype,xa.size=4,xa.buffer=e,xa.normalized=!1,xa.offset=0,xa.stride=0;sc=rc.location;Ka=G[sc];
Ka.buffer||l.enableVertexAttribArray(sc);if(Ka.type!==d.dtype||4!==Ka.size||Ka.buffer!==d||!1!==Ka.normalized||0!==Ka.offset||0!==Ka.stride)l.bindBuffer(34962,d.buffer),l.vertexAttribPointer(sc,4,d.dtype,!1,0,0),Ka.type=d.dtype,Ka.size=4,Ka.buffer=d,Ka.normalized=!1,Ka.offset=0,Ka.stride=0;Ye=vd.location;fb=G[Ye];fb.buffer||l.enableVertexAttribArray(Ye);if(fb.type!==r.dtype||4!==fb.size||fb.buffer!==r||!1!==fb.normalized||0!==fb.offset||0!==fb.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(Ye,
4,r.dtype,!1,0,0),fb.type=r.dtype,fb.size=4,fb.buffer=r,fb.normalized=!1,fb.offset=0,fb.stride=0;ib=xc.location;ya=G[ib];ya.buffer||l.enableVertexAttribArray(ib);if(ya.type!==a.dtype||4!==ya.size||ya.buffer!==a||!1!==ya.normalized||0!==ya.offset||0!==ya.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(ib,4,a.dtype,!1,0,0),ya.type=a.dtype,ya.size=4,ya.buffer=a,ya.normalized=!1,ya.offset=0,ya.stride=0;Bc=W.location;Fa=G[Bc];Fa.buffer||l.enableVertexAttribArray(Bc);if(Fa.type!==u.dtype||4!==
Fa.size||Fa.buffer!==u||!1!==Fa.normalized||0!==Fa.offset||0!==Fa.stride)l.bindBuffer(34962,u.buffer),l.vertexAttribPointer(Bc,4,u.dtype,!1,0,0),Fa.type=u.dtype,Fa.size=4,Fa.buffer=u,Fa.normalized=!1,Fa.offset=0,Fa.stride=0;rb=K.location;sb=G[rb];sb.buffer||l.enableVertexAttribArray(rb);if(sb.type!==B.dtype||4!==sb.size||sb.buffer!==B||!1!==sb.normalized||0!==sb.offset||0!==sb.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(rb,4,B.dtype,!1,0,0),sb.type=B.dtype,sb.size=4,sb.buffer=B,sb.normalized=
!1,sb.offset=0,sb.stride=0;Ya=ia.location;Za=G[Ya];Za.buffer||l.enableVertexAttribArray(Ya);if(Za.type!==sa.dtype||4!==Za.size||Za.buffer!==sa||!1!==Za.normalized||0!==Za.offset||0!==Za.stride)l.bindBuffer(34962,sa.buffer),l.vertexAttribPointer(Ya,4,sa.dtype,!1,0,0),Za.type=sa.dtype,Za.size=4,Za.buffer=sa,Za.normalized=!1,Za.offset=0,Za.stride=0;Kc=Da.location;lc=G[Kc];lc.buffer||l.enableVertexAttribArray(Kc);if(lc.type!==n.dtype||4!==lc.size||lc.buffer!==n||!1!==lc.normalized||0!==lc.offset||0!==
lc.stride)l.bindBuffer(34962,n.buffer),l.vertexAttribPointer(Kc,4,n.dtype,!1,0,0),lc.type=n.dtype,lc.size=4,lc.buffer=n,lc.normalized=!1,lc.offset=0,lc.stride=0;$c=ub.location;Wa=G[$c];Wa.buffer||l.enableVertexAttribArray($c);if(Wa.type!==I.dtype||4!==Wa.size||Wa.buffer!==I||!1!==Wa.normalized||0!==Wa.offset||0!==Wa.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer($c,4,I.dtype,!1,0,0),Wa.type=I.dtype,Wa.size=4,Wa.buffer=I,Wa.normalized=!1,Wa.offset=0,Wa.stride=0;Nb=Vc.location;gd=G[Nb];gd.buffer||
l.enableVertexAttribArray(Nb);if(gd.type!==v.dtype||4!==gd.size||gd.buffer!==v||!1!==gd.normalized||0!==gd.offset||0!==gd.stride)l.bindBuffer(34962,v.buffer),l.vertexAttribPointer(Nb,4,v.dtype,!1,0,0),gd.type=v.dtype,gd.size=4,gd.buffer=v,gd.normalized=!1,gd.offset=0,gd.stride=0;Ga=Ac.location;qc=G[Ga];qc.buffer||l.enableVertexAttribArray(Ga);if(qc.type!==D.dtype||4!==qc.size||qc.buffer!==D||!1!==qc.normalized||0!==qc.offset||0!==qc.stride)l.bindBuffer(34962,D.buffer),l.vertexAttribPointer(Ga,4,D.dtype,
!1,0,0),qc.type=D.dtype,qc.size=4,qc.buffer=D,qc.normalized=!1,qc.offset=0,qc.stride=0;Qa=E.location;Ca=G[Qa];Ca.buffer||l.enableVertexAttribArray(Qa);if(Ca.type!==L.dtype||4!==Ca.size||Ca.buffer!==L||!1!==Ca.normalized||0!==Ca.offset||0!==Ca.stride)l.bindBuffer(34962,L.buffer),l.vertexAttribPointer(Qa,4,L.dtype,!1,0,0),Ca.type=L.dtype,Ca.size=4,Ca.buffer=L,Ca.normalized=!1,Ca.offset=0,Ca.stride=0;mb=z.location;xb=G[mb];xb.buffer||l.enableVertexAttribArray(mb);if(xb.type!==C.dtype||4!==xb.size||xb.buffer!==
C||!1!==xb.normalized||0!==xb.offset||0!==xb.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(mb,4,C.dtype,!1,0,0),xb.type=C.dtype,xb.size=4,xb.buffer=C,xb.normalized=!1,xb.offset=0,xb.stride=0;Db=ga.location;tb=G[Db];tb.buffer||l.enableVertexAttribArray(Db);if(tb.type!==F.dtype||4!==tb.size||tb.buffer!==F||!1!==tb.normalized||0!==tb.offset||0!==tb.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer(Db,4,F.dtype,!1,0,0),tb.type=F.dtype,tb.size=4,tb.buffer=F,tb.normalized=!1,tb.offset=
0,tb.stride=0;od=Na.location;yb=G[od];yb.buffer||l.enableVertexAttribArray(od);if(yb.type!==na.dtype||4!==yb.size||yb.buffer!==na||!1!==yb.normalized||0!==yb.offset||0!==yb.stride)l.bindBuffer(34962,na.buffer),l.vertexAttribPointer(od,4,na.dtype,!1,0,0),yb.type=na.dtype,yb.size=4,yb.buffer=na,yb.normalized=!1,yb.offset=0,yb.stride=0;l.uniform1i(ta.location,ua.bind());(rd=O.elements)?l.bindBuffer(34963,rd.buffer.buffer):Ib.currentVAO&&(rd=za.getElements(Ib.currentVAO.elements))&&l.bindBuffer(34963,
rd.buffer.buffer);for(k=0;k<f;++k){h=b[k];var ae,de,Ke,Od,ke,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,jb,le,Yc,kf,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,Va,ce,be,$d,ze,Xd;ld.height=h.viewportHeight;ld.width=h.viewportWidth;ld.x=h.viewportX;ld.y=h.viewportY;ae=ld.x|0;de=ld.y|0;Ke="width"in ld?ld.width|0:x.framebufferWidth-ae;Od="height"in ld?ld.height|0:x.framebufferHeight-de;ke=x.viewportWidth;x.viewportWidth=Ke;Xb=x.viewportHeight;x.viewportHeight=
Od;l.viewport(ae,de,Ke,Od);qd[0]=ae;qd[1]=de;qd[2]=Ke;qd[3]=Od;wd.height=h.scissorHeight;wd.width=h.scissorWidth;wd.x=h.scissorX;wd.y=h.scissorY;dc=wd.x|0;Qb=wd.y|0;Ha="width"in wd?wd.width|0:x.framebufferWidth-dc;$b="height"in wd?wd.height|0:x.framebufferHeight-Qb;l.scissor(dc,Qb,Ha,$b);Jf[0]=dc;Jf[1]=Qb;Jf[2]=Ha;Jf[3]=$b;nb=h.dim0A;l.uniformMatrix4fv(N.location,!1,Array.isArray(nb)||nb instanceof Float32Array?nb:(md[0]=nb[0],md[1]=nb[1],md[2]=nb[2],md[3]=nb[3],md[4]=nb[4],md[5]=nb[5],md[6]=nb[6],
md[7]=nb[7],md[8]=nb[8],md[9]=nb[9],md[10]=nb[10],md[11]=nb[11],md[12]=nb[12],md[13]=nb[13],md[14]=nb[14],md[15]=nb[15],md));zb=h.dim1A;l.uniformMatrix4fv(J.location,!1,Array.isArray(zb)||zb instanceof Float32Array?zb:(Cc[0]=zb[0],Cc[1]=zb[1],Cc[2]=zb[2],Cc[3]=zb[3],Cc[4]=zb[4],Cc[5]=zb[5],Cc[6]=zb[6],Cc[7]=zb[7],Cc[8]=zb[8],Cc[9]=zb[9],Cc[10]=zb[10],Cc[11]=zb[11],Cc[12]=zb[12],Cc[13]=zb[13],Cc[14]=zb[14],Cc[15]=zb[15],Cc));Ob=h.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(Ob)||Ob instanceof
Float32Array?Ob:(Yb[0]=Ob[0],Yb[1]=Ob[1],Yb[2]=Ob[2],Yb[3]=Ob[3],Yb[4]=Ob[4],Yb[5]=Ob[5],Yb[6]=Ob[6],Yb[7]=Ob[7],Yb[8]=Ob[8],Yb[9]=Ob[9],Yb[10]=Ob[10],Yb[11]=Ob[11],Yb[12]=Ob[12],Yb[13]=Ob[13],Yb[14]=Ob[14],Yb[15]=Ob[15],Yb));Rb=h.dim1B;l.uniformMatrix4fv(Zb.location,!1,Array.isArray(Rb)||Rb instanceof Float32Array?Rb:(Hc[0]=Rb[0],Hc[1]=Rb[1],Hc[2]=Rb[2],Hc[3]=Rb[3],Hc[4]=Rb[4],Hc[5]=Rb[5],Hc[6]=Rb[6],Hc[7]=Rb[7],Hc[8]=Rb[8],Hc[9]=Rb[9],Hc[10]=Rb[10],Hc[11]=Rb[11],Hc[12]=Rb[12],Hc[13]=Rb[13],Hc[14]=
Rb[14],Hc[15]=Rb[15],Hc));ic=h.dim0C;l.uniformMatrix4fv(T.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Hb[0]=ic[0],Hb[1]=ic[1],Hb[2]=ic[2],Hb[3]=ic[3],Hb[4]=ic[4],Hb[5]=ic[5],Hb[6]=ic[6],Hb[7]=ic[7],Hb[8]=ic[8],Hb[9]=ic[9],Hb[10]=ic[10],Hb[11]=ic[11],Hb[12]=ic[12],Hb[13]=ic[13],Hb[14]=ic[14],Hb[15]=ic[15],Hb));kc=h.dim1C;l.uniformMatrix4fv(Ja.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(La[0]=kc[0],La[1]=kc[1],La[2]=kc[2],La[3]=kc[3],La[4]=kc[4],La[5]=kc[5],La[6]=
kc[6],La[7]=kc[7],La[8]=kc[8],La[9]=kc[9],La[10]=kc[10],La[11]=kc[11],La[12]=kc[12],La[13]=kc[13],La[14]=kc[14],La[15]=kc[15],La));Sc=h.dim0D;l.uniformMatrix4fv(qa.location,!1,Array.isArray(Sc)||Sc instanceof Float32Array?Sc:(vb[0]=Sc[0],vb[1]=Sc[1],vb[2]=Sc[2],vb[3]=Sc[3],vb[4]=Sc[4],vb[5]=Sc[5],vb[6]=Sc[6],vb[7]=Sc[7],vb[8]=Sc[8],vb[9]=Sc[9],vb[10]=Sc[10],vb[11]=Sc[11],vb[12]=Sc[12],vb[13]=Sc[13],vb[14]=Sc[14],vb[15]=Sc[15],vb));Dc=h.dim1D;l.uniformMatrix4fv(R.location,!1,Array.isArray(Dc)||Dc instanceof
Float32Array?Dc:(Xa[0]=Dc[0],Xa[1]=Dc[1],Xa[2]=Dc[2],Xa[3]=Dc[3],Xa[4]=Dc[4],Xa[5]=Dc[5],Xa[6]=Dc[6],Xa[7]=Dc[7],Xa[8]=Dc[8],Xa[9]=Dc[9],Xa[10]=Dc[10],Xa[11]=Dc[11],Xa[12]=Dc[12],Xa[13]=Dc[13],Xa[14]=Dc[14],Xa[15]=Dc[15],Xa));Ec=h.loA;l.uniformMatrix4fv(ac.location,!1,Array.isArray(Ec)||Ec instanceof Float32Array?Ec:(Ea[0]=Ec[0],Ea[1]=Ec[1],Ea[2]=Ec[2],Ea[3]=Ec[3],Ea[4]=Ec[4],Ea[5]=Ec[5],Ea[6]=Ec[6],Ea[7]=Ec[7],Ea[8]=Ec[8],Ea[9]=Ec[9],Ea[10]=Ec[10],Ea[11]=Ec[11],Ea[12]=Ec[12],Ea[13]=Ec[13],Ea[14]=
Ec[14],Ea[15]=Ec[15],Ea));Fc=h.hiA;l.uniformMatrix4fv(ha.location,!1,Array.isArray(Fc)||Fc instanceof Float32Array?Fc:(sd[0]=Fc[0],sd[1]=Fc[1],sd[2]=Fc[2],sd[3]=Fc[3],sd[4]=Fc[4],sd[5]=Fc[5],sd[6]=Fc[6],sd[7]=Fc[7],sd[8]=Fc[8],sd[9]=Fc[9],sd[10]=Fc[10],sd[11]=Fc[11],sd[12]=Fc[12],sd[13]=Fc[13],sd[14]=Fc[14],sd[15]=Fc[15],sd));Oc=h.loB;l.uniformMatrix4fv(bb.location,!1,Array.isArray(Oc)||Oc instanceof Float32Array?Oc:(gb[0]=Oc[0],gb[1]=Oc[1],gb[2]=Oc[2],gb[3]=Oc[3],gb[4]=Oc[4],gb[5]=Oc[5],gb[6]=Oc[6],
gb[7]=Oc[7],gb[8]=Oc[8],gb[9]=Oc[9],gb[10]=Oc[10],gb[11]=Oc[11],gb[12]=Oc[12],gb[13]=Oc[13],gb[14]=Oc[14],gb[15]=Oc[15],gb));ad=h.hiB;l.uniformMatrix4fv(Z.location,!1,Array.isArray(ad)||ad instanceof Float32Array?ad:(Sa[0]=ad[0],Sa[1]=ad[1],Sa[2]=ad[2],Sa[3]=ad[3],Sa[4]=ad[4],Sa[5]=ad[5],Sa[6]=ad[6],Sa[7]=ad[7],Sa[8]=ad[8],Sa[9]=ad[9],Sa[10]=ad[10],Sa[11]=ad[11],Sa[12]=ad[12],Sa[13]=ad[13],Sa[14]=ad[14],Sa[15]=ad[15],Sa));Tc=h.loC;l.uniformMatrix4fv(U.location,!1,Array.isArray(Tc)||Tc instanceof Float32Array?
Tc:(Wb[0]=Tc[0],Wb[1]=Tc[1],Wb[2]=Tc[2],Wb[3]=Tc[3],Wb[4]=Tc[4],Wb[5]=Tc[5],Wb[6]=Tc[6],Wb[7]=Tc[7],Wb[8]=Tc[8],Wb[9]=Tc[9],Wb[10]=Tc[10],Wb[11]=Tc[11],Wb[12]=Tc[12],Wb[13]=Tc[13],Wb[14]=Tc[14],Wb[15]=Tc[15],Wb));Pc=h.hiC;l.uniformMatrix4fv(Aa.location,!1,Array.isArray(Pc)||Pc instanceof Float32Array?Pc:(cb[0]=Pc[0],cb[1]=Pc[1],cb[2]=Pc[2],cb[3]=Pc[3],cb[4]=Pc[4],cb[5]=Pc[5],cb[6]=Pc[6],cb[7]=Pc[7],cb[8]=Pc[8],cb[9]=Pc[9],cb[10]=Pc[10],cb[11]=Pc[11],cb[12]=Pc[12],cb[13]=Pc[13],cb[14]=Pc[14],cb[15]=
Pc[15],cb));Lb=h.loD;l.uniformMatrix4fv(ob.location,!1,Array.isArray(Lb)||Lb instanceof Float32Array?Lb:(tc[0]=Lb[0],tc[1]=Lb[1],tc[2]=Lb[2],tc[3]=Lb[3],tc[4]=Lb[4],tc[5]=Lb[5],tc[6]=Lb[6],tc[7]=Lb[7],tc[8]=Lb[8],tc[9]=Lb[9],tc[10]=Lb[10],tc[11]=Lb[11],tc[12]=Lb[12],tc[13]=Lb[13],tc[14]=Lb[14],tc[15]=Lb[15],tc));Fb=h.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(Fb)||Fb instanceof Float32Array?Fb:(Sb[0]=Fb[0],Sb[1]=Fb[1],Sb[2]=Fb[2],Sb[3]=Fb[3],Sb[4]=Fb[4],Sb[5]=Fb[5],Sb[6]=Fb[6],Sb[7]=Fb[7],
Sb[8]=Fb[8],Sb[9]=Fb[9],Sb[10]=Fb[10],Sb[11]=Fb[11],Sb[12]=Fb[12],Sb[13]=Fb[13],Sb[14]=Fb[14],Sb[15]=Fb[15],Sb));Qc=h.resolution;Jc=Qc[0];jc=Qc[1];k&&Uc===Jc&&Xc===jc||(Uc=Jc,Xc=jc,l.uniform2f(V.location,Jc,jc));fd=h.viewBoxPos;jb=fd[0];Yc=fd[1];k&&le===jb&&kf===Yc||(le=jb,kf=Yc,l.uniform2f(fa.location,jb,Yc));he=h.viewBoxSize;re=he[0];Sd=he[1];k&&pe===re&&Ed===Sd||(pe=re,Ed=Sd,l.uniform2f(ma.location,re,Sd));Cd=h.maskHeight;k&&hd===Cd||(hd=Cd,l.uniform1f(ca.location,Cd));Gc=h.drwLayer;k&&nd===Gc||
(nd=Gc,l.uniform1f(t.location,Gc));jd=h.contextColor;Zc=jd[0];Ad=jd[1];ue=jd[2];Va=jd[3];k&&kd===Zc&&Bd===Ad&&we===ue&&ce===Va||(kd=Zc,Bd=Ad,we=ue,ce=Va,l.uniform4f(Y.location,Zc,Ad,ue,Va));(be=h.maskTexture)&&"framebuffer"===be._reglType&&(be=be.color[0]);$d=be._texture;l.uniform1i(oa.location,$d.bind());ze=h.offset;if(Xd=h.count)rd?l.drawElements(1,Xd,rd.type,ze<<(rd.type-5121>>1)):l.drawArrays(1,ze,Xd),x.viewportWidth=ke,x.viewportHeight=Xb,$d.unbind()}ua.unbind();ba.dirty=!0;Ib.setVAO(null);ba.profile=
c},draw:function(b){var f,g,c,k,h,m;f=ka.next;f!==ka.cur&&(f?l.bindFramebuffer(36160,f.framebuffer):l.bindFramebuffer(36160,null),ka.cur=f);if(ba.dirty){f=oe[0];m=oe[1];g=oe[2];c=oe[3];if(f!==ud[0]||m!==ud[1]||g!==ud[2]||c!==ud[3])l.colorMask(f,m,g,c),ud[0]=f,ud[1]=m,ud[2]=g,ud[3]=c;f=mc.frontFace;f!==ba.frontFace&&(l.frontFace(f),ba.frontFace=f);f=mc.polygonOffset_enable;f!==ba.polygonOffset_enable&&(f?l.enable(32823):l.disable(32823),ba.polygonOffset_enable=f);f=Gd[0];m=Gd[1];if(f!==Nd[0]||m!==
Nd[1])l.polygonOffset(f,m),Nd[0]=f,Nd[1]=m;f=mc.sample_alpha;f!==ba.sample_alpha&&(f?l.enable(32926):l.disable(32926),ba.sample_alpha=f);f=mc.sample_enable;f!==ba.sample_enable&&(f?l.enable(32928):l.disable(32928),ba.sample_enable=f);f=Vd[0];m=Vd[1];if(f!==ee[0]||m!==ee[1])l.sampleCoverage(f,m),ee[0]=f,ee[1]=m;f=mc.stencil_enable;f!==ba.stencil_enable&&(f?l.enable(2960):l.disable(2960),ba.stencil_enable=f);f=mc.stencil_mask;f!==ba.stencil_mask&&(l.stencilMask(f),ba.stencil_mask=f);f=Ve[0];m=Ve[1];
g=Ve[2];if(f!==yd[0]||m!==yd[1]||g!==yd[2])l.stencilFunc(f,m,g),yd[0]=f,yd[1]=m,yd[2]=g;f=Rd[0];m=Rd[1];g=Rd[2];c=Rd[3];if(f!==Zd[0]||m!==Zd[1]||g!==Zd[2]||c!==Zd[3])l.stencilOpSeparate(f,m,g,c),Zd[0]=f,Zd[1]=m,Zd[2]=g,Zd[3]=c;f=Ce[0];m=Ce[1];g=Ce[2];c=Ce[3];if(f!==Qd[0]||m!==Qd[1]||g!==Qd[2]||c!==Qd[3])l.stencilOpSeparate(f,m,g,c),Qd[0]=f,Qd[1]=m,Qd[2]=g,Qd[3]=c}ld.height=b.viewportHeight;ld.width=b.viewportWidth;ld.x=b.viewportX;ld.y=b.viewportY;g=ld.x|0;c=ld.y|0;k="width"in ld?ld.width|0:x.framebufferWidth-
g;h="height"in ld?ld.height|0:x.framebufferHeight-c;f=x.viewportWidth;x.viewportWidth=k;m=x.viewportHeight;x.viewportHeight=h;l.viewport(g,c,k,h);qd[0]=g;qd[1]=c;qd[2]=k;qd[3]=h;l.blendColor(0,0,0,0);Ue[0]=0;Ue[1]=0;Ue[2]=0;Ue[3]=0;l.disable(3042);ba.blend_enable=!1;l.blendEquationSeparate(32774,32774);te[0]=32774;te[1]=32774;l.blendFuncSeparate(770,771,1,1);bd[0]=770;bd[1]=771;bd[2]=1;bd[3]=1;l.enable(2884);ba.cull_enable=!0;l.cullFace(1029);ba.cull_face=1029;l.enable(2929);ba.depth_enable=!0;l.depthFunc(513);
ba.depth_func=513;l.depthMask(!0);ba.depth_mask=!0;l.depthRange(0,1);qe[0]=0;qe[1]=1;l.disable(3024);ba.dither=!1;l.lineWidth(2);ba.lineWidth=2;wd.height=b.scissorHeight;wd.width=b.scissorWidth;wd.x=b.scissorX;wd.y=b.scissorY;g=wd.x|0;c=wd.y|0;k="width"in wd?wd.width|0:x.framebufferWidth-g;h="height"in wd?wd.height|0:x.framebufferHeight-c;l.scissor(g,c,k,h);Jf[0]=g;Jf[1]=c;Jf[2]=k;Jf[3]=h;l.enable(3089);ba.scissor_enable=!0;g=ba.profile;ba.profile=!1;l.useProgram(p.program);Ib.setVAO(null);c=fc.location;
k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==y.dtype||4!==k.size||k.buffer!==y||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,y.buffer),l.vertexAttribPointer(c,4,y.dtype,!1,0,0),k.type=y.dtype,k.size=4,k.buffer=y,k.normalized=!1,k.offset=0,k.stride=0;c=gc.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,e.buffer),l.vertexAttribPointer(c,4,e.dtype,!1,
0,0),k.type=e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;c=rc.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==d.dtype||4!==k.size||k.buffer!==d||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,d.buffer),l.vertexAttribPointer(c,4,d.dtype,!1,0,0),k.type=d.dtype,k.size=4,k.buffer=d,k.normalized=!1,k.offset=0,k.stride=0;c=vd.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==r.dtype||4!==k.size||k.buffer!==r||!1!==k.normalized||
0!==k.offset||0!==k.stride)l.bindBuffer(34962,r.buffer),l.vertexAttribPointer(c,4,r.dtype,!1,0,0),k.type=r.dtype,k.size=4,k.buffer=r,k.normalized=!1,k.offset=0,k.stride=0;c=xc.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==a.dtype||4!==k.size||k.buffer!==a||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,a.buffer),l.vertexAttribPointer(c,4,a.dtype,!1,0,0),k.type=a.dtype,k.size=4,k.buffer=a,k.normalized=!1,k.offset=0,k.stride=0;c=W.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);
if(k.type!==u.dtype||4!==k.size||k.buffer!==u||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,u.buffer),l.vertexAttribPointer(c,4,u.dtype,!1,0,0),k.type=u.dtype,k.size=4,k.buffer=u,k.normalized=!1,k.offset=0,k.stride=0;c=K.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==B.dtype||4!==k.size||k.buffer!==B||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,B.buffer),l.vertexAttribPointer(c,4,B.dtype,!1,0,0),k.type=B.dtype,k.size=4,k.buffer=B,k.normalized=
!1,k.offset=0,k.stride=0;c=ia.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==sa.dtype||4!==k.size||k.buffer!==sa||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,sa.buffer),l.vertexAttribPointer(c,4,sa.dtype,!1,0,0),k.type=sa.dtype,k.size=4,k.buffer=sa,k.normalized=!1,k.offset=0,k.stride=0;c=Da.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==n.dtype||4!==k.size||k.buffer!==n||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,n.buffer),
l.vertexAttribPointer(c,4,n.dtype,!1,0,0),k.type=n.dtype,k.size=4,k.buffer=n,k.normalized=!1,k.offset=0,k.stride=0;c=ub.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==I.dtype||4!==k.size||k.buffer!==I||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,I.buffer),l.vertexAttribPointer(c,4,I.dtype,!1,0,0),k.type=I.dtype,k.size=4,k.buffer=I,k.normalized=!1,k.offset=0,k.stride=0;c=Vc.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==v.dtype||4!==k.size||
k.buffer!==v||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,v.buffer),l.vertexAttribPointer(c,4,v.dtype,!1,0,0),k.type=v.dtype,k.size=4,k.buffer=v,k.normalized=!1,k.offset=0,k.stride=0;c=Ac.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==D.dtype||4!==k.size||k.buffer!==D||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,D.buffer),l.vertexAttribPointer(c,4,D.dtype,!1,0,0),k.type=D.dtype,k.size=4,k.buffer=D,k.normalized=!1,k.offset=0,k.stride=0;
c=E.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==L.dtype||4!==k.size||k.buffer!==L||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,L.buffer),l.vertexAttribPointer(c,4,L.dtype,!1,0,0),k.type=L.dtype,k.size=4,k.buffer=L,k.normalized=!1,k.offset=0,k.stride=0;c=z.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==C.dtype||4!==k.size||k.buffer!==C||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,C.buffer),l.vertexAttribPointer(c,
4,C.dtype,!1,0,0),k.type=C.dtype,k.size=4,k.buffer=C,k.normalized=!1,k.offset=0,k.stride=0;c=ga.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==F.dtype||4!==k.size||k.buffer!==F||!1!==k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,F.buffer),l.vertexAttribPointer(c,4,F.dtype,!1,0,0),k.type=F.dtype,k.size=4,k.buffer=F,k.normalized=!1,k.offset=0,k.stride=0;c=Na.location;k=G[c];k.buffer||l.enableVertexAttribArray(c);if(k.type!==na.dtype||4!==k.size||k.buffer!==na||!1!==
k.normalized||0!==k.offset||0!==k.stride)l.bindBuffer(34962,na.buffer),l.vertexAttribPointer(c,4,na.dtype,!1,0,0),k.type=na.dtype,k.size=4,k.buffer=na,k.normalized=!1,k.offset=0,k.stride=0;c=b.dim0A;l.uniformMatrix4fv(N.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(od[0]=c[0],od[1]=c[1],od[2]=c[2],od[3]=c[3],od[4]=c[4],od[5]=c[5],od[6]=c[6],od[7]=c[7],od[8]=c[8],od[9]=c[9],od[10]=c[10],od[11]=c[11],od[12]=c[12],od[13]=c[13],od[14]=c[14],od[15]=c[15],od));c=b.dim1A;l.uniformMatrix4fv(J.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(gd[0]=c[0],gd[1]=c[1],gd[2]=c[2],gd[3]=c[3],gd[4]=c[4],gd[5]=c[5],gd[6]=c[6],gd[7]=c[7],gd[8]=c[8],gd[9]=c[9],gd[10]=c[10],gd[11]=c[11],gd[12]=c[12],gd[13]=c[13],gd[14]=c[14],gd[15]=c[15],gd));c=b.dim0B;l.uniformMatrix4fv(M.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Bc[0]=c[0],Bc[1]=c[1],Bc[2]=c[2],Bc[3]=c[3],Bc[4]=c[4],Bc[5]=c[5],Bc[6]=c[6],Bc[7]=c[7],Bc[8]=c[8],Bc[9]=c[9],Bc[10]=c[10],Bc[11]=c[11],Bc[12]=c[12],Bc[13]=c[13],Bc[14]=
c[14],Bc[15]=c[15],Bc));c=b.dim1B;l.uniformMatrix4fv(Zb.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(rd[0]=c[0],rd[1]=c[1],rd[2]=c[2],rd[3]=c[3],rd[4]=c[4],rd[5]=c[5],rd[6]=c[6],rd[7]=c[7],rd[8]=c[8],rd[9]=c[9],rd[10]=c[10],rd[11]=c[11],rd[12]=c[12],rd[13]=c[13],rd[14]=c[14],rd[15]=c[15],rd));c=b.dim0C;l.uniformMatrix4fv(T.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Rc[0]=c[0],Rc[1]=c[1],Rc[2]=c[2],Rc[3]=c[3],Rc[4]=c[4],Rc[5]=c[5],Rc[6]=c[6],Rc[7]=c[7],Rc[8]=c[8],Rc[9]=
c[9],Rc[10]=c[10],Rc[11]=c[11],Rc[12]=c[12],Rc[13]=c[13],Rc[14]=c[14],Rc[15]=c[15],Rc));c=b.dim1C;l.uniformMatrix4fv(Ja.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Mc[0]=c[0],Mc[1]=c[1],Mc[2]=c[2],Mc[3]=c[3],Mc[4]=c[4],Mc[5]=c[5],Mc[6]=c[6],Mc[7]=c[7],Mc[8]=c[8],Mc[9]=c[9],Mc[10]=c[10],Mc[11]=c[11],Mc[12]=c[12],Mc[13]=c[13],Mc[14]=c[14],Mc[15]=c[15],Mc));c=b.dim0D;l.uniformMatrix4fv(qa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(sc[0]=c[0],sc[1]=c[1],sc[2]=c[2],sc[3]=
c[3],sc[4]=c[4],sc[5]=c[5],sc[6]=c[6],sc[7]=c[7],sc[8]=c[8],sc[9]=c[9],sc[10]=c[10],sc[11]=c[11],sc[12]=c[12],sc[13]=c[13],sc[14]=c[14],sc[15]=c[15],sc));c=b.dim1D;l.uniformMatrix4fv(R.location,!1,Array.isArray(c)||c instanceof Float32Array?c:($a[0]=c[0],$a[1]=c[1],$a[2]=c[2],$a[3]=c[3],$a[4]=c[4],$a[5]=c[5],$a[6]=c[6],$a[7]=c[7],$a[8]=c[8],$a[9]=c[9],$a[10]=c[10],$a[11]=c[11],$a[12]=c[12],$a[13]=c[13],$a[14]=c[14],$a[15]=c[15],$a));c=b.loA;l.uniformMatrix4fv(ac.location,!1,Array.isArray(c)||c instanceof
Float32Array?c:(lc[0]=c[0],lc[1]=c[1],lc[2]=c[2],lc[3]=c[3],lc[4]=c[4],lc[5]=c[5],lc[6]=c[6],lc[7]=c[7],lc[8]=c[8],lc[9]=c[9],lc[10]=c[10],lc[11]=c[11],lc[12]=c[12],lc[13]=c[13],lc[14]=c[14],lc[15]=c[15],lc));c=b.hiA;l.uniformMatrix4fv(ha.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Eb[0]=c[0],Eb[1]=c[1],Eb[2]=c[2],Eb[3]=c[3],Eb[4]=c[4],Eb[5]=c[5],Eb[6]=c[6],Eb[7]=c[7],Eb[8]=c[8],Eb[9]=c[9],Eb[10]=c[10],Eb[11]=c[11],Eb[12]=c[12],Eb[13]=c[13],Eb[14]=c[14],Eb[15]=c[15],Eb));c=b.loB;l.uniformMatrix4fv(bb.location,
!1,Array.isArray(c)||c instanceof Float32Array?c:(qc[0]=c[0],qc[1]=c[1],qc[2]=c[2],qc[3]=c[3],qc[4]=c[4],qc[5]=c[5],qc[6]=c[6],qc[7]=c[7],qc[8]=c[8],qc[9]=c[9],qc[10]=c[10],qc[11]=c[11],qc[12]=c[12],qc[13]=c[13],qc[14]=c[14],qc[15]=c[15],qc));c=b.hiB;l.uniformMatrix4fv(Z.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Ta[0]=c[0],Ta[1]=c[1],Ta[2]=c[2],Ta[3]=c[3],Ta[4]=c[4],Ta[5]=c[5],Ta[6]=c[6],Ta[7]=c[7],Ta[8]=c[8],Ta[9]=c[9],Ta[10]=c[10],Ta[11]=c[11],Ta[12]=c[12],Ta[13]=c[13],Ta[14]=c[14],
Ta[15]=c[15],Ta));c=b.loC;l.uniformMatrix4fv(U.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Kc[0]=c[0],Kc[1]=c[1],Kc[2]=c[2],Kc[3]=c[3],Kc[4]=c[4],Kc[5]=c[5],Kc[6]=c[6],Kc[7]=c[7],Kc[8]=c[8],Kc[9]=c[9],Kc[10]=c[10],Kc[11]=c[11],Kc[12]=c[12],Kc[13]=c[13],Kc[14]=c[14],Kc[15]=c[15],Kc));c=b.hiC;l.uniformMatrix4fv(Aa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(cc[0]=c[0],cc[1]=c[1],cc[2]=c[2],cc[3]=c[3],cc[4]=c[4],cc[5]=c[5],cc[6]=c[6],cc[7]=c[7],cc[8]=c[8],cc[9]=c[9],cc[10]=
c[10],cc[11]=c[11],cc[12]=c[12],cc[13]=c[13],cc[14]=c[14],cc[15]=c[15],cc));c=b.loD;l.uniformMatrix4fv(ob.location,!1,Array.isArray(c)||c instanceof Float32Array?c:($c[0]=c[0],$c[1]=c[1],$c[2]=c[2],$c[3]=c[3],$c[4]=c[4],$c[5]=c[5],$c[6]=c[6],$c[7]=c[7],$c[8]=c[8],$c[9]=c[9],$c[10]=c[10],$c[11]=c[11],$c[12]=c[12],$c[13]=c[13],$c[14]=c[14],$c[15]=c[15],$c));c=b.hiD;l.uniformMatrix4fv(Oa.location,!1,Array.isArray(c)||c instanceof Float32Array?c:(Od[0]=c[0],Od[1]=c[1],Od[2]=c[2],Od[3]=c[3],Od[4]=c[4],
Od[5]=c[5],Od[6]=c[6],Od[7]=c[7],Od[8]=c[8],Od[9]=c[9],Od[10]=c[10],Od[11]=c[11],Od[12]=c[12],Od[13]=c[13],Od[14]=c[14],Od[15]=c[15],Od));c=b.resolution;l.uniform2f(V.location,c[0],c[1]);c=b.viewBoxPos;l.uniform2f(fa.location,c[0],c[1]);c=b.viewBoxSize;l.uniform2f(ma.location,c[0],c[1]);l.uniform1f(ca.location,b.maskHeight);l.uniform1f(t.location,b.drwLayer);c=b.contextColor;l.uniform4f(Y.location,c[0],c[1],c[2],c[3]);(c=b.maskTexture)&&"framebuffer"===c._reglType&&(c=c.color[0]);c=c._texture;l.uniform1i(oa.location,
c.bind());l.uniform1i(ta.location,P.bind());(k=O.elements)?l.bindBuffer(34963,k.buffer.buffer):Ib.currentVAO&&(k=za.getElements(Ib.currentVAO.elements))&&l.bindBuffer(34963,k.buffer.buffer);h=b.offset;if(b=b.count)k?l.drawElements(1,b,k.type,h<<(k.type-5121>>1)):l.drawArrays(1,h,b),ba.dirty=!0,Ib.setVAO(null),x.viewportWidth=f,x.viewportHeight=m,ba.profile=g,c.unbind(),P.unbind()},scope:function(c,l,p){var t,z,K,Q,G,E,W,M,N,J,T,R,U,V,fa,ia,ka,Y,P,ga,Z,za,ca,ha,ta,Ea,gc,$a,ma,Ta,Da,xa,La,ee,Eb,Rc,
Ib,ya,Xa,Fa,Rd,cc,Hc,Mc,Yb,lc,Sa,qa,vb,sc,Ga,Hb,Qa,Ca,vd,oa,gd,gb,cb,ua,Bc,qc,yd,ud,Qd,Kc,Cc,$c,Wb,Ha,ub,nb,zb,qd,rd,Zd,Vc,Sb,od,xc,sd,tc,Aa,md,Ue,Lb,Fb,te,bd,Gd,Jf,Ce,Od,fc,Ve,Ja,Na,rc,Vd,oe,Oa,ob,Nd,qe,Gc,Zb,Ac,Zc,kd,bb,ac,Gb,Va,of,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,Hf,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me,We,Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,hf,pf,lf,qf,Af,Bf,Ne,ye,mf,nf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,Sf,Tf,qg,bf,Ze,Nf,Of,eg,
fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,cf,$e,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;ld.height=c.viewportHeight;ld.width=c.viewportWidth;ld.x=c.viewportX;ld.y=c.viewportY;t=ld.x|0;z=ld.y|0;K="width"in ld?ld.width|0:x.framebufferWidth-t;Q="height"in ld?ld.height|0:x.framebufferHeight-z;G=x.viewportWidth;x.viewportWidth=K;E=x.viewportHeight;
x.viewportHeight=Q;W=Ke[0];Ke[0]=t;M=Ke[1];Ke[1]=z;N=Ke[2];Ke[2]=K;J=Ke[3];Ke[3]=Q;T=Ab[0];Ab[0]=0;R=Ab[1];Ab[1]=0;U=Ab[2];Ab[2]=0;V=Ab[3];Ab[3]=0;fa=mc.blend_enable;mc.blend_enable=!1;ia=ke[0];ke[0]=32774;ka=ke[1];ke[1]=32774;Y=ae[0];ae[0]=770;P=ae[1];ae[1]=771;ga=ae[2];ae[2]=1;Z=ae[3];ae[3]=1;za=mc.cull_enable;mc.cull_enable=!0;ca=mc.cull_face;mc.cull_face=1029;ha=mc.depth_enable;mc.depth_enable=!0;ta=mc.depth_func;mc.depth_func=513;Ea=mc.depth_mask;mc.depth_mask=!0;gc=de[0];de[0]=0;$a=de[1];de[1]=
1;ma=mc.dither;mc.dither=!1;Ta=mc.lineWidth;mc.lineWidth=2;wd.height=c.scissorHeight;wd.width=c.scissorWidth;wd.x=c.scissorX;wd.y=c.scissorY;Da=wd.x|0;xa=wd.y|0;La="width"in wd?wd.width|0:x.framebufferWidth-Da;ee="height"in wd?wd.height|0:x.framebufferHeight-xa;Eb=Ye[0];Ye[0]=Da;Rc=Ye[1];Ye[1]=xa;Ib=Ye[2];Ye[2]=La;ya=Ye[3];Ye[3]=ee;Xa=mc.scissor_enable;mc.scissor_enable=!0;Fa=ba.profile;ba.profile=!1;Rd=c.offset;cc=O.offset;O.offset=Rd;Hc=c.count;Mc=O.count;O.count=Hc;Yb=O.primitive;O.primitive=1;
lc=c.contextColor;Sa=q[24];q[24]=lc;qa=c.dim0A;vb=q[3];q[3]=qa;sc=c.dim0B;Ga=q[5];q[5]=sc;Hb=c.dim0C;Qa=q[7];q[7]=Hb;Ca=c.dim0D;vd=q[9];q[9]=Ca;oa=c.dim1A;gd=q[4];q[4]=oa;gb=c.dim1B;cb=q[6];q[6]=gb;ua=c.dim1C;Bc=q[8];q[8]=ua;qc=c.dim1D;yd=q[10];q[10]=qc;ud=c.drwLayer;Qd=q[23];q[23]=ud;Kc=c.hiA;Cc=q[12];q[12]=Kc;$c=c.hiB;Wb=q[14];q[14]=$c;Ha=c.hiC;ub=q[16];q[16]=Ha;nb=c.hiD;zb=q[18];q[18]=nb;qd=c.loA;rd=q[11];q[11]=qd;Zd=c.loB;Vc=q[13];q[13]=Zd;Sb=c.loC;od=q[15];q[15]=Sb;xc=c.loD;sd=q[17];q[17]=xc;
tc=c.maskHeight;Aa=q[22];q[22]=tc;md=c.maskTexture;Ue=q[25];q[25]=md;Lb=q[26];q[26]=va;Fb=c.resolution;te=q[19];q[19]=Fb;bd=c.viewBoxPos;Gd=q[20];q[20]=bd;Jf=c.viewBoxSize;Ce=q[21];q[21]=Jf;Od=h.buffer;h.buffer=na;fc=h.divisor;h.divisor=0;Ve=h.normalized;h.normalized=!1;Ja=h.offset;h.offset=0;Na=h.size;h.size=0;rc=h.state;h.state=1;Vd=h.stride;h.stride=0;oe=h.type;h.type=na.dtype;Oa=h.w;h.w=0;ob=h.x;h.x=0;Nd=h.y;h.y=0;qe=h.z;h.z=0;Gc=g.buffer;g.buffer=y;Zb=g.divisor;g.divisor=0;Ac=g.normalized;g.normalized=
!1;Zc=g.offset;g.offset=0;kd=g.size;g.size=0;bb=g.state;g.state=1;ac=g.stride;g.stride=0;Gb=g.type;g.type=y.dtype;Va=g.w;g.w=0;of=g.x;g.x=0;ce=g.y;g.y=0;be=g.z;g.z=0;$d=f.buffer;f.buffer=e;Ee=f.divisor;f.divisor=0;Xd=f.normalized;f.normalized=!1;fe=f.offset;f.offset=0;zc=f.size;f.size=0;Wc=f.state;f.state=1;me=f.stride;f.stride=0;ie=f.type;f.type=e.dtype;Dd=f.w;f.w=0;Id=f.x;f.x=0;Jd=f.y;f.y=0;Kd=f.z;f.z=0;ge=A.buffer;A.buffer=d;se=A.divisor;A.divisor=0;ve=A.normalized;A.normalized=!1;je=A.offset;
A.offset=0;Hf=A.size;A.size=0;Oe=A.state;A.state=1;Le=A.stride;A.stride=0;ne=A.type;A.type=d.dtype;Ae=A.w;A.w=0;Fe=A.x;A.x=0;Ge=A.y;A.y=0;He=A.z;A.z=0;Be=S.buffer;S.buffer=r;Fd=S.divisor;S.divisor=0;Pd=S.normalized;S.normalized=!1;Ud=S.offset;S.offset=0;Yd=S.size;S.size=0;Ie=S.state;S.state=1;zd=S.stride;S.stride=0;Ld=S.type;S.type=r.dtype;xe=S.w;S.w=0;Je=S.x;S.x=0;df=S.y;S.y=0;Xe=S.z;S.z=0;Pe=aa.buffer;aa.buffer=a;Me=aa.divisor;aa.divisor=0;We=aa.normalized;aa.normalized=!1;Te=aa.offset;aa.offset=
0;Qe=aa.size;aa.size=0;Re=aa.state;aa.state=1;Md=aa.stride;aa.stride=0;Td=aa.type;aa.type=a.dtype;Se=aa.w;aa.w=0;ef=aa.x;aa.x=0;jf=aa.y;aa.y=0;af=aa.z;aa.z=0;ff=m.buffer;m.buffer=u;gf=m.divisor;m.divisor=0;hf=m.normalized;m.normalized=!1;pf=m.offset;m.offset=0;lf=m.size;m.size=0;qf=m.state;m.state=1;Af=m.stride;m.stride=0;Bf=m.type;m.type=u.dtype;Ne=m.w;m.w=0;ye=m.x;m.x=0;mf=m.y;m.y=0;nf=m.z;m.z=0;Cf=la.buffer;la.buffer=B;Ff=la.divisor;la.divisor=0;zf=la.normalized;la.normalized=!1;Df=la.offset;la.offset=
0;Ef=la.size;la.size=0;vf=la.state;la.state=1;wf=la.stride;la.stride=0;uf=la.type;la.type=B.dtype;xf=la.w;la.w=0;yf=la.x;la.x=0;If=la.y;la.y=0;Kf=la.z;la.z=0;Lf=H.buffer;H.buffer=sa;Mf=H.divisor;H.divisor=0;sf=H.normalized;H.normalized=!1;Rf=H.offset;H.offset=0;Gf=H.size;H.size=0;tf=H.state;H.state=1;dg=H.stride;H.stride=0;Sf=H.type;H.type=sa.dtype;Tf=H.w;H.w=0;qg=H.x;H.x=0;bf=H.y;H.y=0;Ze=H.z;H.z=0;Nf=da.buffer;da.buffer=n;Of=da.divisor;da.divisor=0;eg=da.normalized;da.normalized=!1;fg=da.offset;
da.offset=0;gg=da.size;da.size=0;hg=da.state;da.state=1;ig=da.stride;da.stride=0;Wf=da.type;da.type=n.dtype;Uf=da.w;da.w=0;Xf=da.x;da.x=0;Yf=da.y;da.y=0;Zf=da.z;da.z=0;jg=b.buffer;b.buffer=I;rg=b.divisor;b.divisor=0;sg=b.normalized;b.normalized=!1;tg=b.offset;b.offset=0;ug=b.size;b.size=0;vg=b.state;b.state=1;wg=b.stride;b.stride=0;xg=b.type;b.type=I.dtype;yg=b.w;b.w=0;zg=b.x;b.x=0;Ag=b.y;b.y=0;Bg=b.z;b.z=0;cf=k.buffer;k.buffer=v;$e=k.divisor;k.divisor=0;Pf=k.normalized;k.normalized=!1;Qf=k.offset;
k.offset=0;kg=k.size;k.size=0;lg=k.state;k.state=1;mg=k.stride;k.stride=0;ng=k.type;k.type=v.dtype;og=k.w;k.w=0;$f=k.x;k.x=0;Vf=k.y;k.y=0;ag=k.z;k.z=0;bg=X.buffer;X.buffer=D;cg=X.divisor;X.divisor=0;pg=X.normalized;X.normalized=!1;Cg=X.offset;X.offset=0;Dg=X.size;X.size=0;Eg=X.state;X.state=1;Fg=X.stride;X.stride=0;Gg=X.type;X.type=D.dtype;Hg=X.w;X.w=0;Ig=X.x;X.x=0;Jg=X.y;X.y=0;Kg=X.z;X.z=0;Lg=pa.buffer;pa.buffer=L;Mg=pa.divisor;pa.divisor=0;Ng=pa.normalized;pa.normalized=!1;Og=pa.offset;pa.offset=
0;Pg=pa.size;pa.size=0;Qg=pa.state;pa.state=1;Rg=pa.stride;pa.stride=0;Sg=pa.type;pa.type=L.dtype;Tg=pa.w;pa.w=0;Ug=pa.x;pa.x=0;Vg=pa.y;pa.y=0;Wg=pa.z;pa.z=0;Xg=w.buffer;w.buffer=C;Yg=w.divisor;w.divisor=0;Zg=w.normalized;w.normalized=!1;$g=w.offset;w.offset=0;ah=w.size;w.size=0;bh=w.state;w.state=1;ch=w.stride;w.stride=0;dh=w.type;w.type=C.dtype;eh=w.w;w.w=0;fh=w.x;w.x=0;gh=w.y;w.y=0;hh=w.z;w.z=0;ih=jb.buffer;jb.buffer=F;jh=jb.divisor;jb.divisor=0;kh=jb.normalized;jb.normalized=!1;lh=jb.offset;jb.offset=
0;mh=jb.size;jb.size=0;nh=jb.state;jb.state=1;oh=jb.stride;jb.stride=0;ph=jb.type;jb.type=F.dtype;qh=jb.w;jb.w=0;rh=jb.x;jb.x=0;sh=jb.y;jb.y=0;th=jb.z;jb.z=0;uh=ea.vert;ea.vert=2;vh=ea.frag;ea.frag=1;ba.dirty=!0;l(x,c,p);x.viewportWidth=G;x.viewportHeight=E;Ke[0]=W;Ke[1]=M;Ke[2]=N;Ke[3]=J;Ab[0]=T;Ab[1]=R;Ab[2]=U;Ab[3]=V;mc.blend_enable=fa;ke[0]=ia;ke[1]=ka;ae[0]=Y;ae[1]=P;ae[2]=ga;ae[3]=Z;mc.cull_enable=za;mc.cull_face=ca;mc.depth_enable=ha;mc.depth_func=ta;mc.depth_mask=Ea;de[0]=gc;de[1]=$a;mc.dither=
ma;mc.lineWidth=Ta;Ye[0]=Eb;Ye[1]=Rc;Ye[2]=Ib;Ye[3]=ya;mc.scissor_enable=Xa;ba.profile=Fa;O.offset=cc;O.count=Mc;O.primitive=Yb;q[24]=Sa;q[3]=vb;q[5]=Ga;q[7]=Qa;q[9]=vd;q[4]=gd;q[6]=cb;q[8]=Bc;q[10]=yd;q[23]=Qd;q[12]=Cc;q[14]=Wb;q[16]=ub;q[18]=zb;q[11]=rd;q[13]=Vc;q[15]=od;q[17]=sd;q[22]=Aa;q[25]=Ue;q[26]=Lb;q[19]=te;q[20]=Gd;q[21]=Ce;h.buffer=Od;h.divisor=fc;h.normalized=Ve;h.offset=Ja;h.size=Na;h.state=rc;h.stride=Vd;h.type=oe;h.w=Oa;h.x=ob;h.y=Nd;h.z=qe;g.buffer=Gc;g.divisor=Zb;g.normalized=Ac;
g.offset=Zc;g.size=kd;g.state=bb;g.stride=ac;g.type=Gb;g.w=Va;g.x=of;g.y=ce;g.z=be;f.buffer=$d;f.divisor=Ee;f.normalized=Xd;f.offset=fe;f.size=zc;f.state=Wc;f.stride=me;f.type=ie;f.w=Dd;f.x=Id;f.y=Jd;f.z=Kd;A.buffer=ge;A.divisor=se;A.normalized=ve;A.offset=je;A.size=Hf;A.state=Oe;A.stride=Le;A.type=ne;A.w=Ae;A.x=Fe;A.y=Ge;A.z=He;S.buffer=Be;S.divisor=Fd;S.normalized=Pd;S.offset=Ud;S.size=Yd;S.state=Ie;S.stride=zd;S.type=Ld;S.w=xe;S.x=Je;S.y=df;S.z=Xe;aa.buffer=Pe;aa.divisor=Me;aa.normalized=We;aa.offset=
Te;aa.size=Qe;aa.state=Re;aa.stride=Md;aa.type=Td;aa.w=Se;aa.x=ef;aa.y=jf;aa.z=af;m.buffer=ff;m.divisor=gf;m.normalized=hf;m.offset=pf;m.size=lf;m.state=qf;m.stride=Af;m.type=Bf;m.w=Ne;m.x=ye;m.y=mf;m.z=nf;la.buffer=Cf;la.divisor=Ff;la.normalized=zf;la.offset=Df;la.size=Ef;la.state=vf;la.stride=wf;la.type=uf;la.w=xf;la.x=yf;la.y=If;la.z=Kf;H.buffer=Lf;H.divisor=Mf;H.normalized=sf;H.offset=Rf;H.size=Gf;H.state=tf;H.stride=dg;H.type=Sf;H.w=Tf;H.x=qg;H.y=bf;H.z=Ze;da.buffer=Nf;da.divisor=Of;da.normalized=
eg;da.offset=fg;da.size=gg;da.state=hg;da.stride=ig;da.type=Wf;da.w=Uf;da.x=Xf;da.y=Yf;da.z=Zf;b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=ug;b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;k.buffer=cf;k.divisor=$e;k.normalized=Pf;k.offset=Qf;k.size=kg;k.state=lg;k.stride=mg;k.type=ng;k.w=og;k.x=$f;k.y=Vf;k.z=ag;X.buffer=bg;X.divisor=cg;X.normalized=pg;X.offset=Cg;X.size=Dg;X.state=Eg;X.stride=Fg;X.type=Gg;X.w=Hg;X.x=Ig;X.y=Jg;X.z=Kg;pa.buffer=Lg;pa.divisor=Mg;pa.normalized=
Ng;pa.offset=Og;pa.size=Pg;pa.state=Qg;pa.stride=Rg;pa.type=Sg;pa.w=Tg;pa.x=Ug;pa.y=Vg;pa.z=Wg;w.buffer=Xg;w.divisor=Yg;w.normalized=Zg;w.offset=$g;w.size=ah;w.state=bh;w.stride=ch;w.type=dh;w.w=eh;w.x=fh;w.y=gh;w.z=hh;jb.buffer=ih;jb.divisor=jh;jb.normalized=kh;jb.offset=lh;jb.size=mh;jb.state=nh;jb.stride=oh;jb.type=ph;jb.w=qh;jb.x=rh;jb.y=sh;jb.z=th;ea.vert=uh;ea.frag=vh;ba.dirty=!0}}},$1:function(c,Q){var p,y,e,d,r,a,u,B,sa,n,I,v,D,L,C,F,w,P,va,h,g,f,A,S,aa,m,la,H,da,b;p=c.attributes;y=c.current;
e=c.framebuffer;d=c.gl;r=c.next;a=c.vao;u=r.blend_color;B=y.blend_color;sa=r.blend_equation;n=y.blend_equation;I=r.blend_func;v=y.blend_func;D=r.colorMask;L=y.colorMask;C=r.depth_range;F=y.depth_range;w=r.polygonOffset_offset;P=y.polygonOffset_offset;va=r.sample_coverage;h=y.sample_coverage;g=r.scissor_box;f=y.scissor_box;A=r.stencil_func;S=y.stencil_func;aa=r.stencil_opBack;m=y.stencil_opBack;la=r.stencil_opFront;H=y.stencil_opFront;da=r.viewport;b=y.viewport;return{poll:function(){var a,c,p,Q,jb,
Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa;y.dirty=!1;c=r.blend_enable;p=r.cull_enable;Q=r.depth_enable;jb=r.dither;Gb=r.polygonOffset_enable;ua=r.sample_alpha;Na=r.sample_enable;Y=r.scissor_enable;N=r.stencil_enable;M=r.cull_face;T=y.cull_face;qa=r.depth_func;J=y.depth_func;Zb=r.depth_mask;Ja=y.depth_mask;R=r.frontFace;t=y.frontFace;ha=r.lineWidth;Z=y.lineWidth;Aa=r.stencil_mask;Oa=y.stencil_mask;a=e.next;a!==e.cur&&(a?d.bindFramebuffer(36160,a.framebuffer):d.bindFramebuffer(36160,null),e.cur=a);
c!==y.blend_enable&&(c?d.enable(3042):d.disable(3042),y.blend_enable=c);p!==y.cull_enable&&(p?d.enable(2884):d.disable(2884),y.cull_enable=p);Q!==y.depth_enable&&(Q?d.enable(2929):d.disable(2929),y.depth_enable=Q);jb!==y.dither&&(jb?d.enable(3024):d.disable(3024),y.dither=jb);Gb!==y.polygonOffset_enable&&(Gb?d.enable(32823):d.disable(32823),y.polygonOffset_enable=Gb);ua!==y.sample_alpha&&(ua?d.enable(32926):d.disable(32926),y.sample_alpha=ua);Na!==y.sample_enable&&(Na?d.enable(32928):d.disable(32928),
y.sample_enable=Na);Y!==y.scissor_enable&&(Y?d.enable(3089):d.disable(3089),y.scissor_enable=Y);N!==y.stencil_enable&&(N?d.enable(2960):d.disable(2960),y.stencil_enable=N);if(u[0]!==B[0]||u[1]!==B[1]||u[2]!==B[2]||u[3]!==B[3])d.blendColor(u[0],u[1],u[2],u[3]),B[0]=u[0],B[1]=u[1],B[2]=u[2],B[3]=u[3];if(sa[0]!==n[0]||sa[1]!==n[1])d.blendEquationSeparate(sa[0],sa[1]),n[0]=sa[0],n[1]=sa[1];if(I[0]!==v[0]||I[1]!==v[1]||I[2]!==v[2]||I[3]!==v[3])d.blendFuncSeparate(I[0],I[1],I[2],I[3]),v[0]=I[0],v[1]=I[1],
v[2]=I[2],v[3]=I[3];if(D[0]!==L[0]||D[1]!==L[1]||D[2]!==L[2]||D[3]!==L[3])d.colorMask(D[0],D[1],D[2],D[3]),L[0]=D[0],L[1]=D[1],L[2]=D[2],L[3]=D[3];M!==T&&(d.cullFace(M),y.cull_face=M);qa!==J&&(d.depthFunc(qa),y.depth_func=qa);Zb!==Ja&&(d.depthMask(Zb),y.depth_mask=Zb);if(C[0]!==F[0]||C[1]!==F[1])d.depthRange(C[0],C[1]),F[0]=C[0],F[1]=C[1];R!==t&&(d.frontFace(R),y.frontFace=R);ha!==Z&&(d.lineWidth(ha),y.lineWidth=ha);if(w[0]!==P[0]||w[1]!==P[1])d.polygonOffset(w[0],w[1]),P[0]=w[0],P[1]=w[1];if(va[0]!==
h[0]||va[1]!==h[1])d.sampleCoverage(va[0],va[1]),h[0]=va[0],h[1]=va[1];if(g[0]!==f[0]||g[1]!==f[1]||g[2]!==f[2]||g[3]!==f[3])d.scissor(g[0],g[1],g[2],g[3]),f[0]=g[0],f[1]=g[1],f[2]=g[2],f[3]=g[3];if(A[0]!==S[0]||A[1]!==S[1]||A[2]!==S[2])d.stencilFunc(A[0],A[1],A[2]),S[0]=A[0],S[1]=A[1],S[2]=A[2];Aa!==Oa&&(d.stencilMask(Aa),y.stencil_mask=Aa);if(aa[0]!==m[0]||aa[1]!==m[1]||aa[2]!==m[2]||aa[3]!==m[3])d.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]),m[0]=aa[0],m[1]=aa[1],m[2]=aa[2],m[3]=aa[3];if(la[0]!==
H[0]||la[1]!==H[1]||la[2]!==H[2]||la[3]!==H[3])d.stencilOpSeparate(la[0],la[1],la[2],la[3]),H[0]=la[0],H[1]=la[1],H[2]=la[2],H[3]=la[3];if(da[0]!==b[0]||da[1]!==b[1]||da[2]!==b[2]||da[3]!==b[3])d.viewport(da[0],da[1],da[2],da[3]),b[0]=da[0],b[1]=da[1],b[2]=da[2],b[3]=da[3]},refresh:function(){var c,X,pa,Va,jb,Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja;y.dirty=!1;X=r.blend_enable;pa=r.cull_enable;Va=r.depth_enable;jb=r.dither;Gb=r.polygonOffset_enable;ua=r.sample_alpha;Na=r.sample_enable;Y=r.scissor_enable;N=r.stencil_enable;
M=r.cull_face;T=r.depth_func;qa=r.depth_mask;J=r.frontFace;Zb=r.lineWidth;Ja=r.stencil_mask;(c=e.next)?d.bindFramebuffer(36160,c.framebuffer):d.bindFramebuffer(36160,null);e.cur=c;c=p[0];c.buffer?(d.enableVertexAttribArray(0),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(0,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(0),d.vertexAttrib4f(0,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(0,c.divisor);c=p[1];c.buffer?(d.enableVertexAttribArray(1),
d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(1,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(1),d.vertexAttrib4f(1,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(1,c.divisor);c=p[2];c.buffer?(d.enableVertexAttribArray(2),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(2,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(2),d.vertexAttrib4f(2,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(2,c.divisor);
c=p[3];c.buffer?(d.enableVertexAttribArray(3),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(3,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(3),d.vertexAttrib4f(3,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(3,c.divisor);c=p[4];c.buffer?(d.enableVertexAttribArray(4),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(4,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(4),d.vertexAttrib4f(4,c.x,c.y,c.z,c.w),c.buffer=
null);Q.vertexAttribDivisorANGLE(4,c.divisor);c=p[5];c.buffer?(d.enableVertexAttribArray(5),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(5,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(5),d.vertexAttrib4f(5,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(5,c.divisor);c=p[6];c.buffer?(d.enableVertexAttribArray(6),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(6,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(6),
d.vertexAttrib4f(6,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(6,c.divisor);c=p[7];c.buffer?(d.enableVertexAttribArray(7),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(7,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(7),d.vertexAttrib4f(7,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(7,c.divisor);c=p[8];c.buffer?(d.enableVertexAttribArray(8),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(8,c.size,c.type,c.normalized,c.stride,
c.offset)):(d.disableVertexAttribArray(8),d.vertexAttrib4f(8,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(8,c.divisor);c=p[9];c.buffer?(d.enableVertexAttribArray(9),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(9,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(9),d.vertexAttrib4f(9,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(9,c.divisor);c=p[10];c.buffer?(d.enableVertexAttribArray(10),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(10,
c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(10),d.vertexAttrib4f(10,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(10,c.divisor);c=p[11];c.buffer?(d.enableVertexAttribArray(11),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(11,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(11),d.vertexAttrib4f(11,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(11,c.divisor);c=p[12];c.buffer?(d.enableVertexAttribArray(12),
d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(12,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(12),d.vertexAttrib4f(12,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(12,c.divisor);c=p[13];c.buffer?(d.enableVertexAttribArray(13),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(13,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(13),d.vertexAttrib4f(13,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(13,
c.divisor);c=p[14];c.buffer?(d.enableVertexAttribArray(14),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(14,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(14),d.vertexAttrib4f(14,c.x,c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(14,c.divisor);c=p[15];c.buffer?(d.enableVertexAttribArray(15),d.bindBuffer(34962,c.buffer.buffer),d.vertexAttribPointer(15,c.size,c.type,c.normalized,c.stride,c.offset)):(d.disableVertexAttribArray(15),d.vertexAttrib4f(15,c.x,
c.y,c.z,c.w),c.buffer=null);Q.vertexAttribDivisorANGLE(15,c.divisor);a.currentVAO=null;a.setVAO(a.targetVAO);X?d.enable(3042):d.disable(3042);y.blend_enable=X;pa?d.enable(2884):d.disable(2884);y.cull_enable=pa;Va?d.enable(2929):d.disable(2929);y.depth_enable=Va;jb?d.enable(3024):d.disable(3024);y.dither=jb;Gb?d.enable(32823):d.disable(32823);y.polygonOffset_enable=Gb;ua?d.enable(32926):d.disable(32926);y.sample_alpha=ua;Na?d.enable(32928):d.disable(32928);y.sample_enable=Na;Y?d.enable(3089):d.disable(3089);
y.scissor_enable=Y;N?d.enable(2960):d.disable(2960);y.stencil_enable=N;d.blendColor(u[0],u[1],u[2],u[3]);B[0]=u[0];B[1]=u[1];B[2]=u[2];B[3]=u[3];d.blendEquationSeparate(sa[0],sa[1]);n[0]=sa[0];n[1]=sa[1];d.blendFuncSeparate(I[0],I[1],I[2],I[3]);v[0]=I[0];v[1]=I[1];v[2]=I[2];v[3]=I[3];d.colorMask(D[0],D[1],D[2],D[3]);L[0]=D[0];L[1]=D[1];L[2]=D[2];L[3]=D[3];d.cullFace(M);y.cull_face=M;d.depthFunc(T);y.depth_func=T;d.depthMask(qa);y.depth_mask=qa;d.depthRange(C[0],C[1]);F[0]=C[0];F[1]=C[1];d.frontFace(J);
y.frontFace=J;d.lineWidth(Zb);y.lineWidth=Zb;d.polygonOffset(w[0],w[1]);P[0]=w[0];P[1]=w[1];d.sampleCoverage(va[0],va[1]);h[0]=va[0];h[1]=va[1];d.scissor(g[0],g[1],g[2],g[3]);f[0]=g[0];f[1]=g[1];f[2]=g[2];f[3]=g[3];d.stencilFunc(A[0],A[1],A[2]);S[0]=A[0];S[1]=A[1];S[2]=A[2];d.stencilMask(Ja);y.stencil_mask=Ja;d.stencilOpSeparate(aa[0],aa[1],aa[2],aa[3]);m[0]=aa[0];m[1]=aa[1];m[2]=aa[2];m[3]=aa[3];d.stencilOpSeparate(la[0],la[1],la[2],la[3]);H[0]=la[0];H[1]=la[1];H[2]=la[2];H[3]=la[3];d.viewport(da[0],
da[1],da[2],da[3]);b[0]=da[0];b[1]=da[1];b[2]=da[2];b[3]=da[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(c,Q,p,y,e,d,r,a,u,B,sa,n,I,v,D,L,C,F,w,P,va,h,g,f,A,S,aa,m,la,H,da,b,k,X,pa,Va,jb,Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja){var R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa,fc,gc,rc,vd,xc,W,K,ia,Da,ub,Vc,Ac,E,z,ga,ta,V,fa,ma,G,x,ba,O,za,ka,l,mc,ea,q,Ib,Ab;R=c.attributes;t=c.buffer;ha=c.context;Z=c.current;
Aa=c.draw;Oa=c.elements;ac=c.extensions;bb=c.framebuffer;U=c.gl;ob=c.isBufferArgs;ca=c.next;oa=c.shader;fc=c.uniforms;gc=c.vao;rc=ca.blend_color;vd=Z.blend_color;xc=ca.blend_equation;W=Z.blend_equation;K=ca.blend_func;ia=Z.blend_func;Da=ca.colorMask;ub=Z.colorMask;Vc=ca.depth_range;Ac=Z.depth_range;E=ca.polygonOffset_offset;z=Z.polygonOffset_offset;ga=ca.sample_coverage;ta=Z.sample_coverage;V=ca.scissor_box;fa=Z.scissor_box;ma=ca.stencil_func;G=Z.stencil_func;x=ca.stencil_opBack;ba=Z.stencil_opBack;
O=ca.stencil_opFront;za=Z.stencil_opFront;ka=ca.viewport;l=Z.viewport;mc={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ea={};ea.buffer=p;ea.divisor=1;q={};q.buffer=y;q.divisor=1;Ib={};Ib.buffer=e;Ib.divisor=1;Ab={};Ab.buffer=d;Ab.divisor=1;return{batch:function(a,c){var d,e,f,g,h,p;d=bb.next;d!==bb.cur&&(d?U.bindFramebuffer(36160,d.framebuffer):U.bindFramebuffer(36160,null),bb.cur=d);if(Z.dirty){var r,A,u,K,y,C,D,F,B,S,L,V,ka,w,aa,P,sa,va,ja,oa,rd,
Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,xc;r=ca.dither;r!==Z.dither&&(r?U.enable(3024):U.disable(3024),Z.dither=r);A=ca.depth_func;A!==Z.depth_func&&(U.depthFunc(A),Z.depth_func=A);u=Vc[0];K=Vc[1];if(u!==Ac[0]||K!==Ac[1])U.depthRange(u,K),Ac[0]=u,Ac[1]=K;y=ca.depth_mask;y!==Z.depth_mask&&(U.depthMask(y),Z.depth_mask=y);C=Da[0];D=Da[1];F=Da[2];B=Da[3];if(C!==ub[0]||D!==ub[1]||F!==ub[2]||B!==ub[3])U.colorMask(C,D,F,B),ub[0]=C,ub[1]=D,ub[2]=F,ub[3]=B;S=ca.cull_enable;S!==Z.cull_enable&&(S?U.enable(2884):U.disable(2884),
Z.cull_enable=S);L=ca.cull_face;L!==Z.cull_face&&(U.cullFace(L),Z.cull_face=L);V=ca.frontFace;V!==Z.frontFace&&(U.frontFace(V),Z.frontFace=V);ka=ca.lineWidth;ka!==Z.lineWidth&&(U.lineWidth(ka),Z.lineWidth=ka);w=ca.polygonOffset_enable;w!==Z.polygonOffset_enable&&(w?U.enable(32823):U.disable(32823),Z.polygonOffset_enable=w);aa=E[0];P=E[1];if(aa!==z[0]||P!==z[1])U.polygonOffset(aa,P),z[0]=aa,z[1]=P;sa=ca.sample_alpha;sa!==Z.sample_alpha&&(sa?U.enable(32926):U.disable(32926),Z.sample_alpha=sa);va=ca.sample_enable;
va!==Z.sample_enable&&(va?U.enable(32928):U.disable(32928),Z.sample_enable=va);ja=ga[0];oa=ga[1];if(ja!==ta[0]||oa!==ta[1])U.sampleCoverage(ja,oa),ta[0]=ja,ta[1]=oa;rd=ca.stencil_enable;rd!==Z.stencil_enable&&(rd?U.enable(2960):U.disable(2960),Z.stencil_enable=rd);Rc=ca.stencil_mask;Rc!==Z.stencil_mask&&(U.stencilMask(Rc),Z.stencil_mask=Rc);Mc=ma[0];sc=ma[1];$a=ma[2];if(Mc!==G[0]||sc!==G[1]||$a!==G[2])U.stencilFunc(Mc,sc,$a),G[0]=Mc,G[1]=sc,G[2]=$a;lc=O[0];Eb=O[1];qc=O[2];Ta=O[3];if(lc!==za[0]||Eb!==
za[1]||qc!==za[2]||Ta!==za[3])U.stencilOpSeparate(lc,Eb,qc,Ta),za[0]=lc,za[1]=Eb,za[2]=qc,za[3]=Ta;Kc=x[0];cc=x[1];$c=x[2];xc=x[3];if(Kc!==ba[0]||cc!==ba[1]||$c!==ba[2]||xc!==ba[3])U.stencilOpSeparate(Kc,cc,$c,xc),ba[0]=Kc,ba[1]=cc,ba[2]=$c,ba[3]=xc}U.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;U.enable(3042);Z.blend_enable=!0;U.blendEquationSeparate(32774,32774);W[0]=32774;W[1]=32774;U.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;U.disable(2929);Z.depth_enable=!1;
U.enable(3089);Z.scissor_enable=!0;if(e=Z.profile)f=performance.now(),Q.count+=c;U.useProgram(m.program);g=ac.angle_instanced_arrays;var md,Cc,Yb,Hc,Hb,La,vb,Xa;gc.setVAO(null);md=jb.location;Cc=R[md];Cc.buffer||U.enableVertexAttribArray(md);if(5126!==Cc.type||2!==Cc.size||Cc.buffer!==n||!1!==Cc.normalized||0!==Cc.offset||24!==Cc.stride)U.bindBuffer(34962,n.buffer),U.vertexAttribPointer(md,2,5126,!1,24,0),Cc.type=5126,Cc.size=2,Cc.buffer=n,Cc.normalized=!1,Cc.offset=0,Cc.stride=24;0!==Cc.divisor&&
(g.vertexAttribDivisorANGLE(md,0),Cc.divisor=0);Yb=ua.location;Hc=R[Yb];Hc.buffer||U.enableVertexAttribArray(Yb);if(5126!==Hc.type||2!==Hc.size||Hc.buffer!==I||!1!==Hc.normalized||8!==Hc.offset||24!==Hc.stride)U.bindBuffer(34962,I.buffer),U.vertexAttribPointer(Yb,2,5126,!1,24,8),Hc.type=5126,Hc.size=2,Hc.buffer=I,Hc.normalized=!1,Hc.offset=8,Hc.stride=24;0!==Hc.divisor&&(g.vertexAttribDivisorANGLE(Yb,0),Hc.divisor=0);Hb=X.location;La=R[Hb];La.buffer||U.enableVertexAttribArray(Hb);if(5126!==La.type||
2!==La.size||La.buffer!==v||!1!==La.normalized||16!==La.offset||24!==La.stride)U.bindBuffer(34962,v.buffer),U.vertexAttribPointer(Hb,2,5126,!1,24,16),La.type=5126,La.size=2,La.buffer=v,La.normalized=!1,La.offset=16,La.stride=24;0!==La.divisor&&(g.vertexAttribDivisorANGLE(Hb,0),La.divisor=0);(vb=Aa.elements)?U.bindBuffer(34963,vb.buffer.buffer):gc.currentVAO&&(vb=Oa.getElements(gc.currentVAO.elements))&&U.bindBuffer(34963,vb.buffer.buffer);Xa=Aa.offset;for(h=0;h<c;++h){p=a[h];var Ea,sd,gb,Sa,Wb,cb,
tc,Sb,fc,bc,Tb,rc,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,na,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Wd,le,Yc,kf,he,re,pe,Sd,Ed,Cd,hd,Gc;Ea=p.viewport;sd=Ea.x|0;gb=Ea.y|0;Sa="width"in Ea?Ea.width|0:ha.framebufferWidth-sd;Wb="height"in Ea?Ea.height|0:ha.framebufferHeight-gb;cb=ha.viewportWidth;ha.viewportWidth=
Sa;tc=ha.viewportHeight;ha.viewportHeight=Wb;U.viewport(sd,gb,Sa,Wb);l[0]=sd;l[1]=gb;l[2]=Sa;l[3]=Wb;Sb=p.viewport;fc=Sb.x|0;bc=Sb.y|0;Tb="width"in Sb?Sb.width|0:ha.framebufferWidth-fc;rc="height"in Sb?Sb.height|0:ha.framebufferHeight-bc;U.scissor(fc,bc,Tb,rc);fa[0]=fc;fa[1]=bc;fa[2]=Tb;fa[3]=rc;Ub=la.call(this,ha,p,h);Ib.offset=Ub;Ma=!1;pb=null;wb=0;hb=!1;pc=Pa=0;Jb=1;pd=0;db=5126;kb=ec=Ic=nc=0;ob(Ib)?(Ma=!0,pb=t.createStream(34962,Ib),db=pb.dtype):(pb=t.getBuffer(Ib))?db=pb.dtype:"constant"in Ib?
(Jb=2,"number"===typeof Ib.constant?(Ic=Ib.constant,ec=kb=nc=0):(Ic=0<Ib.constant.length?Ib.constant[0]:0,ec=1<Ib.constant.length?Ib.constant[1]:0,kb=2<Ib.constant.length?Ib.constant[2]:0,nc=3<Ib.constant.length?Ib.constant[3]:0)):(pb=ob(Ib.buffer)?t.createStream(34962,Ib.buffer):t.getBuffer(Ib.buffer),db="type"in Ib?mc[Ib.type]:pb.dtype,hb=!!Ib.normalized,pc=Ib.size|0,Pa=Ib.offset|0,pd=Ib.stride|0,wb=Ib.divisor|0);lb=N.location;ra=R[lb];if(1===Jb){ra.buffer||U.enableVertexAttribArray(lb);qb=pc||
2;if(ra.type!==db||ra.size!==qb||ra.buffer!==pb||ra.normalized!==hb||ra.offset!==Pa||ra.stride!==pd)U.bindBuffer(34962,pb.buffer),U.vertexAttribPointer(lb,qb,db,hb,pd,Pa),ra.type=db,ra.size=qb,ra.buffer=pb,ra.normalized=hb,ra.offset=Pa,ra.stride=pd;ra.divisor!==wb&&(g.vertexAttribDivisorANGLE(lb,wb),ra.divisor=wb)}else if(ra.buffer&&(U.disableVertexAttribArray(lb),ra.buffer=null),ra.x!==Ic||ra.y!==ec||ra.z!==kb||ra.w!==nc)U.vertexAttrib4f(lb,Ic,ec,kb,nc),ra.x=Ic,ra.y=ec,ra.z=kb,ra.w=nc;wa=H.call(this,
ha,p,h);Ab.offset=wa;Ua=!1;ab=null;Ba=0;eb=!1;Cb=Ia=0;Bb=1;Ra=0;Lc=5126;xa=Vb=Mb=Kb=0;ob(Ab)?(Ua=!0,ab=t.createStream(34962,Ab),Lc=ab.dtype):(ab=t.getBuffer(Ab))?Lc=ab.dtype:"constant"in Ab?(Bb=2,"number"===typeof Ab.constant?(Mb=Ab.constant,Vb=xa=Kb=0):(Mb=0<Ab.constant.length?Ab.constant[0]:0,Vb=1<Ab.constant.length?Ab.constant[1]:0,xa=2<Ab.constant.length?Ab.constant[2]:0,Kb=3<Ab.constant.length?Ab.constant[3]:0)):(ab=ob(Ab.buffer)?t.createStream(34962,Ab.buffer):t.getBuffer(Ab.buffer),Lc="type"in
Ab?mc[Ab.type]:ab.dtype,eb=!!Ab.normalized,Cb=Ab.size|0,Ia=Ab.offset|0,Ra=Ab.stride|0,Ba=Ab.divisor|0);na=M.location;Ka=R[na];if(1===Bb){Ka.buffer||U.enableVertexAttribArray(na);Pb=Cb||2;if(Ka.type!==Lc||Ka.size!==Pb||Ka.buffer!==ab||Ka.normalized!==eb||Ka.offset!==Ia||Ka.stride!==Ra)U.bindBuffer(34962,ab.buffer),U.vertexAttribPointer(na,Pb,Lc,eb,Ra,Ia),Ka.type=Lc,Ka.size=Pb,Ka.buffer=ab,Ka.normalized=eb,Ka.offset=Ia,Ka.stride=Ra;Ka.divisor!==Ba&&(g.vertexAttribDivisorANGLE(na,Ba),Ka.divisor=Ba)}else if(Ka.buffer&&
(U.disableVertexAttribArray(na),Ka.buffer=null),Ka.x!==Mb||Ka.y!==Vb||Ka.z!==xa||Ka.w!==Kb)U.vertexAttrib4f(na,Mb,Vb,xa,Kb),Ka.x=Mb,Ka.y=Vb,Ka.z=xa,Ka.w=Kb;fb=da.call(this,ha,p,h);q.offset=fb;ib=!1;ya=null;hc=0;Fa=!1;sb=rb=0;Ya=1;Za=0;oc=5126;Nb=Wa=vc=cd=0;ob(q)?(ib=!0,ya=t.createStream(34962,q),oc=ya.dtype):(ya=t.getBuffer(q))?oc=ya.dtype:"constant"in q?(Ya=2,"number"===typeof q.constant?(vc=q.constant,Wa=Nb=cd=0):(vc=0<q.constant.length?q.constant[0]:0,Wa=1<q.constant.length?q.constant[1]:0,Nb=
2<q.constant.length?q.constant[2]:0,cd=3<q.constant.length?q.constant[3]:0)):(ya=ob(q.buffer)?t.createStream(34962,q.buffer):t.getBuffer(q.buffer),oc="type"in q?mc[q.type]:ya.dtype,Fa=!!q.normalized,sb=q.size|0,rb=q.offset|0,Za=q.stride|0,hc=q.divisor|0);dd=Gb.location;Ga=R[dd];if(1===Ya){Ga.buffer||U.enableVertexAttribArray(dd);yc=sb||4;if(Ga.type!==oc||Ga.size!==yc||Ga.buffer!==ya||Ga.normalized!==Fa||Ga.offset!==rb||Ga.stride!==Za)U.bindBuffer(34962,ya.buffer),U.vertexAttribPointer(dd,yc,oc,Fa,
Za,rb),Ga.type=oc,Ga.size=yc,Ga.buffer=ya,Ga.normalized=Fa,Ga.offset=rb,Ga.stride=Za;Ga.divisor!==hc&&(g.vertexAttribDivisorANGLE(dd,hc),Ga.divisor=hc)}else if(Ga.buffer&&(U.disableVertexAttribArray(dd),Ga.buffer=null),Ga.x!==vc||Ga.y!==Wa||Ga.z!==Nb||Ga.w!==cd)U.vertexAttrib4f(dd,vc,Wa,Nb,cd),Ga.x=vc,Ga.y=Wa,Ga.z=Nb,Ga.w=cd;Qa=b.call(this,ha,p,h);ea.offset=Qa;Ca=!1;mb=null;xb=0;Db=!1;wc=tb=0;yb=1;xd=0;uc=5126;ed=id=Nc=Hd=0;ob(ea)?(Ca=!0,mb=t.createStream(34962,ea),uc=mb.dtype):(mb=t.getBuffer(ea))?
uc=mb.dtype:"constant"in ea?(yb=2,"number"===typeof ea.constant?(Nc=ea.constant,id=ed=Hd=0):(Nc=0<ea.constant.length?ea.constant[0]:0,id=1<ea.constant.length?ea.constant[1]:0,ed=2<ea.constant.length?ea.constant[2]:0,Hd=3<ea.constant.length?ea.constant[3]:0)):(mb=ob(ea.buffer)?t.createStream(34962,ea.buffer):t.getBuffer(ea.buffer),uc="type"in ea?mc[ea.type]:mb.dtype,Db=!!ea.normalized,wc=ea.size|0,tb=ea.offset|0,xd=ea.stride|0,xb=ea.divisor|0);Xb=Va.location;dc=R[Xb];if(1===yb){dc.buffer||U.enableVertexAttribArray(Xb);
Qb=wc||4;if(dc.type!==uc||dc.size!==Qb||dc.buffer!==mb||dc.normalized!==Db||dc.offset!==tb||dc.stride!==xd)U.bindBuffer(34962,mb.buffer),U.vertexAttribPointer(Xb,Qb,uc,Db,xd,tb),dc.type=uc,dc.size=Qb,dc.buffer=mb,dc.normalized=Db,dc.offset=tb,dc.stride=xd;dc.divisor!==xb&&(g.vertexAttribDivisorANGLE(Xb,xb),dc.divisor=xb)}else if(dc.buffer&&(U.disableVertexAttribArray(Xb),dc.buffer=null),dc.x!==Nc||dc.y!==id||dc.z!==ed||dc.w!==Hd)U.vertexAttrib4f(Xb,Nc,id,ed,Hd),dc.x=Nc,dc.y=id,dc.z=ed,dc.w=Hd;Ha=
k.call(this,ha,p,h);$b=Ha[0];zb=Ha[1];Rb=Ha[2];kc=Ha[3];h&&nb===$b&&Ob===zb&&ic===Rb&&Sc===kc||(nb=$b,Ob=zb,ic=Rb,Sc=kc,U.uniform4f(Ja.location,$b,zb,Rb,kc));Dc=p.lineWidth;h&&Ec===Dc||(Ec=Dc,U.uniform1f(Na.location,Dc));Fc=p.capSize;h&&Oc===Fc||(Oc=Fc,U.uniform1f(pa.location,Fc));ad=p.scale;Tc=ad[0];Lb=ad[1];h&&Pc===Tc&&Fb===Lb||(Pc=Tc,Fb=Lb,U.uniform2f(T.location,Tc,Lb));Qc=p.scaleFract;Jc=Qc[0];jc=Qc[1];h&&Uc===Jc&&Xc===jc||(Uc=Jc,Xc=jc,U.uniform2f(qa.location,Jc,jc));fd=p.translate;Wd=fd[0];Yc=
fd[1];h&&le===Wd&&kf===Yc||(le=Wd,kf=Yc,U.uniform2f(J.location,Wd,Yc));he=p.translateFract;re=he[0];Sd=he[1];h&&pe===re&&Ed===Sd||(pe=re,Ed=Sd,U.uniform2f(Zb.location,re,Sd));Cd=p.opacity;h&&hd===Cd||(hd=Cd,U.uniform1f(Y.location,Cd));Gc=p.count;0<Gc?vb?g.drawElementsInstancedANGLE(4,36,vb.type,Xa<<(vb.type-5121>>1),Gc):g.drawArraysInstancedANGLE(4,Xa,36,Gc):0>Gc&&(vb?U.drawElements(4,36,vb.type,Xa<<(vb.type-5121>>1)):U.drawArrays(4,Xa,36));ha.viewportWidth=cb;ha.viewportHeight=tc;Ma&&t.destroyStream(pb);
Ua&&t.destroyStream(ab);ib&&t.destroyStream(ya);Ca&&t.destroyStream(mb)}Z.dirty=!0;gc.setVAO(null);e&&(Q.cpuTime+=performance.now()-f)},draw:function(b){var c,d,e,f,g,h,k,m,p,A,K,y,C,H,F,S,L,V,ka,w,aa,P,da,va,la,oa,Bc,xc,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,fc,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,rc,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,na,Ka,Pb,fb,ib,ya,hc;c=bb.next;c!==bb.cur&&(c?U.bindFramebuffer(36160,c.framebuffer):U.bindFramebuffer(36160,
null),bb.cur=c);if(Z.dirty){var Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb;Fa=ca.dither;Fa!==Z.dither&&(Fa?U.enable(3024):U.disable(3024),Z.dither=Fa);rb=ca.depth_func;rb!==Z.depth_func&&(U.depthFunc(rb),Z.depth_func=rb);sb=Vc[0];Ya=Vc[1];if(sb!==Ac[0]||Ya!==Ac[1])U.depthRange(sb,Ya),Ac[0]=sb,Ac[1]=Ya;Za=ca.depth_mask;Za!==Z.depth_mask&&(U.depthMask(Za),Z.depth_mask=Za);oc=Da[0];cd=Da[1];vc=Da[2];Wa=Da[3];if(oc!==ub[0]||cd!==ub[1]||vc!==ub[2]||
Wa!==ub[3])U.colorMask(oc,cd,vc,Wa),ub[0]=oc,ub[1]=cd,ub[2]=vc,ub[3]=Wa;Nb=ca.cull_enable;Nb!==Z.cull_enable&&(Nb?U.enable(2884):U.disable(2884),Z.cull_enable=Nb);dd=ca.cull_face;dd!==Z.cull_face&&(U.cullFace(dd),Z.cull_face=dd);Ga=ca.frontFace;Ga!==Z.frontFace&&(U.frontFace(Ga),Z.frontFace=Ga);yc=ca.lineWidth;yc!==Z.lineWidth&&(U.lineWidth(yc),Z.lineWidth=yc);Qa=ca.polygonOffset_enable;Qa!==Z.polygonOffset_enable&&(Qa?U.enable(32823):U.disable(32823),Z.polygonOffset_enable=Qa);Ca=E[0];mb=E[1];if(Ca!==
z[0]||mb!==z[1])U.polygonOffset(Ca,mb),z[0]=Ca,z[1]=mb;xb=ca.sample_alpha;xb!==Z.sample_alpha&&(xb?U.enable(32926):U.disable(32926),Z.sample_alpha=xb);Db=ca.sample_enable;Db!==Z.sample_enable&&(Db?U.enable(32928):U.disable(32928),Z.sample_enable=Db);tb=ga[0];wc=ga[1];if(tb!==ta[0]||wc!==ta[1])U.sampleCoverage(tb,wc),ta[0]=tb,ta[1]=wc;yb=ca.stencil_enable;yb!==Z.stencil_enable&&(yb?U.enable(2960):U.disable(2960),Z.stencil_enable=yb);xd=ca.stencil_mask;xd!==Z.stencil_mask&&(U.stencilMask(xd),Z.stencil_mask=
xd);uc=ma[0];Hd=ma[1];Nc=ma[2];if(uc!==G[0]||Hd!==G[1]||Nc!==G[2])U.stencilFunc(uc,Hd,Nc),G[0]=uc,G[1]=Hd,G[2]=Nc;id=O[0];ed=O[1];Xb=O[2];dc=O[3];if(id!==za[0]||ed!==za[1]||Xb!==za[2]||dc!==za[3])U.stencilOpSeparate(id,ed,Xb,dc),za[0]=id,za[1]=ed,za[2]=Xb,za[3]=dc;Qb=x[0];Ha=x[1];$b=x[2];nb=x[3];if(Qb!==ba[0]||Ha!==ba[1]||$b!==ba[2]||nb!==ba[3])U.stencilOpSeparate(Qb,Ha,$b,nb),ba[0]=Qb,ba[1]=Ha,ba[2]=$b,ba[3]=nb}d=b.viewport;e=d.x|0;f=d.y|0;g="width"in d?d.width|0:ha.framebufferWidth-e;h="height"in
d?d.height|0:ha.framebufferHeight-f;k=ha.viewportWidth;ha.viewportWidth=g;m=ha.viewportHeight;ha.viewportHeight=h;U.viewport(e,f,g,h);l[0]=e;l[1]=f;l[2]=g;l[3]=h;U.blendColor(0,0,0,0);vd[0]=0;vd[1]=0;vd[2]=0;vd[3]=0;U.enable(3042);Z.blend_enable=!0;U.blendEquationSeparate(32774,32774);W[0]=32774;W[1]=32774;U.blendFuncSeparate(770,771,773,1);ia[0]=770;ia[1]=771;ia[2]=773;ia[3]=1;U.disable(2929);Z.depth_enable=!1;p=b.viewport;A=p.x|0;K=p.y|0;y="width"in p?p.width|0:ha.framebufferWidth-A;C="height"in
p?p.height|0:ha.framebufferHeight-K;U.scissor(A,K,y,C);fa[0]=A;fa[1]=K;fa[2]=y;fa[3]=C;U.enable(3089);Z.scissor_enable=!0;if(H=Z.profile)F=performance.now(),Q.count++;U.useProgram(r.program);S=ac.angle_instanced_arrays;gc.setVAO(null);L=a.call(this,ha,b,0);Ib.offset=L;V=!1;ka=null;w=0;aa=!1;da=P=0;va=1;la=0;oa=5126;Mc=Rc=xc=Bc=0;ob(Ib)?(V=!0,ka=t.createStream(34962,Ib),oa=ka.dtype):(ka=t.getBuffer(Ib))?oa=ka.dtype:"constant"in Ib?(va=2,"number"===typeof Ib.constant?(xc=Ib.constant,Rc=Mc=Bc=0):(xc=
0<Ib.constant.length?Ib.constant[0]:0,Rc=1<Ib.constant.length?Ib.constant[1]:0,Mc=2<Ib.constant.length?Ib.constant[2]:0,Bc=3<Ib.constant.length?Ib.constant[3]:0)):(ka=ob(Ib.buffer)?t.createStream(34962,Ib.buffer):t.getBuffer(Ib.buffer),oa="type"in Ib?mc[Ib.type]:ka.dtype,aa=!!Ib.normalized,da=Ib.size|0,P=Ib.offset|0,la=Ib.stride|0,w=Ib.divisor|0);sc=N.location;$a=R[sc];if(1===va){$a.buffer||U.enableVertexAttribArray(sc);lc=da||2;if($a.type!==oa||$a.size!==lc||$a.buffer!==ka||$a.normalized!==aa||$a.offset!==
P||$a.stride!==la)U.bindBuffer(34962,ka.buffer),U.vertexAttribPointer(sc,lc,oa,aa,la,P),$a.type=oa,$a.size=lc,$a.buffer=ka,$a.normalized=aa,$a.offset=P,$a.stride=la;$a.divisor!==w&&(S.vertexAttribDivisorANGLE(sc,w),$a.divisor=w)}else if($a.buffer&&(U.disableVertexAttribArray(sc),$a.buffer=null),$a.x!==xc||$a.y!==Rc||$a.z!==Mc||$a.w!==Bc)U.vertexAttrib4f(sc,xc,Rc,Mc,Bc),$a.x=xc,$a.y=Rc,$a.z=Mc,$a.w=Bc;Eb=u.call(this,ha,b,0);Ab.offset=Eb;qc=!1;Ta=null;Kc=0;cc=!1;fc=$c=0;md=1;Cc=0;Yb=5126;vb=La=Hb=Hc=
0;ob(Ab)?(qc=!0,Ta=t.createStream(34962,Ab),Yb=Ta.dtype):(Ta=t.getBuffer(Ab))?Yb=Ta.dtype:"constant"in Ab?(md=2,"number"===typeof Ab.constant?(Hb=Ab.constant,La=vb=Hc=0):(Hb=0<Ab.constant.length?Ab.constant[0]:0,La=1<Ab.constant.length?Ab.constant[1]:0,vb=2<Ab.constant.length?Ab.constant[2]:0,Hc=3<Ab.constant.length?Ab.constant[3]:0)):(Ta=ob(Ab.buffer)?t.createStream(34962,Ab.buffer):t.getBuffer(Ab.buffer),Yb="type"in Ab?mc[Ab.type]:Ta.dtype,cc=!!Ab.normalized,fc=Ab.size|0,$c=Ab.offset|0,Cc=Ab.stride|
0,Kc=Ab.divisor|0);Xa=M.location;Ea=R[Xa];if(1===md){Ea.buffer||U.enableVertexAttribArray(Xa);sd=fc||2;if(Ea.type!==Yb||Ea.size!==sd||Ea.buffer!==Ta||Ea.normalized!==cc||Ea.offset!==$c||Ea.stride!==Cc)U.bindBuffer(34962,Ta.buffer),U.vertexAttribPointer(Xa,sd,Yb,cc,Cc,$c),Ea.type=Yb,Ea.size=sd,Ea.buffer=Ta,Ea.normalized=cc,Ea.offset=$c,Ea.stride=Cc;Ea.divisor!==Kc&&(S.vertexAttribDivisorANGLE(Xa,Kc),Ea.divisor=Kc)}else if(Ea.buffer&&(U.disableVertexAttribArray(Xa),Ea.buffer=null),Ea.x!==Hb||Ea.y!==
La||Ea.z!==vb||Ea.w!==Hc)U.vertexAttrib4f(Xa,Hb,La,vb,Hc),Ea.x=Hb,Ea.y=La,Ea.z=vb,Ea.w=Hc;gb=B.call(this,ha,b,0);q.offset=gb;Sa=!1;Wb=null;cb=0;tc=!1;rc=Sb=0;bc=1;Tb=0;td=5126;wb=pb=Ma=Ub=0;ob(q)?(Sa=!0,Wb=t.createStream(34962,q),td=Wb.dtype):(Wb=t.getBuffer(q))?td=Wb.dtype:"constant"in q?(bc=2,"number"===typeof q.constant?(Ma=q.constant,pb=wb=Ub=0):(Ma=0<q.constant.length?q.constant[0]:0,pb=1<q.constant.length?q.constant[1]:0,wb=2<q.constant.length?q.constant[2]:0,Ub=3<q.constant.length?q.constant[3]:
0)):(Wb=ob(q.buffer)?t.createStream(34962,q.buffer):t.getBuffer(q.buffer),td="type"in q?mc[q.type]:Wb.dtype,tc=!!q.normalized,rc=q.size|0,Sb=q.offset|0,Tb=q.stride|0,cb=q.divisor|0);hb=Gb.location;Pa=R[hb];if(1===bc){Pa.buffer||U.enableVertexAttribArray(hb);pc=rc||4;if(Pa.type!==td||Pa.size!==pc||Pa.buffer!==Wb||Pa.normalized!==tc||Pa.offset!==Sb||Pa.stride!==Tb)U.bindBuffer(34962,Wb.buffer),U.vertexAttribPointer(hb,pc,td,tc,Tb,Sb),Pa.type=td,Pa.size=pc,Pa.buffer=Wb,Pa.normalized=tc,Pa.offset=Sb,
Pa.stride=Tb;Pa.divisor!==cb&&(S.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(U.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==pb||Pa.z!==wb||Pa.w!==Ub)U.vertexAttrib4f(hb,Ma,pb,wb,Ub),Pa.x=Ma,Pa.y=pb,Pa.z=wb,Pa.w=Ub;Jb=sa.call(this,ha,b,0);ea.offset=Jb;pd=!1;db=null;nc=0;Ic=!1;kb=ec=0;lb=1;ra=0;qb=5126;Ba=ab=Ua=wa=0;ob(ea)?(pd=!0,db=t.createStream(34962,ea),qb=db.dtype):(db=t.getBuffer(ea))?qb=db.dtype:"constant"in ea?(lb=2,"number"===typeof ea.constant?(Ua=
ea.constant,ab=Ba=wa=0):(Ua=0<ea.constant.length?ea.constant[0]:0,ab=1<ea.constant.length?ea.constant[1]:0,Ba=2<ea.constant.length?ea.constant[2]:0,wa=3<ea.constant.length?ea.constant[3]:0)):(db=ob(ea.buffer)?t.createStream(34962,ea.buffer):t.getBuffer(ea.buffer),qb="type"in ea?mc[ea.type]:db.dtype,Ic=!!ea.normalized,kb=ea.size|0,ec=ea.offset|0,ra=ea.stride|0,nc=ea.divisor|0);eb=Va.location;Ia=R[eb];if(1===lb){Ia.buffer||U.enableVertexAttribArray(eb);Cb=kb||4;if(Ia.type!==qb||Ia.size!==Cb||Ia.buffer!==
db||Ia.normalized!==Ic||Ia.offset!==ec||Ia.stride!==ra)U.bindBuffer(34962,db.buffer),U.vertexAttribPointer(eb,Cb,qb,Ic,ra,ec),Ia.type=qb,Ia.size=Cb,Ia.buffer=db,Ia.normalized=Ic,Ia.offset=ec,Ia.stride=ra;Ia.divisor!==nc&&(S.vertexAttribDivisorANGLE(eb,nc),Ia.divisor=nc)}else if(Ia.buffer&&(U.disableVertexAttribArray(eb),Ia.buffer=null),Ia.x!==Ua||Ia.y!==ab||Ia.z!==Ba||Ia.w!==wa)U.vertexAttrib4f(eb,Ua,ab,Ba,wa),Ia.x=Ua,Ia.y=ab,Ia.z=Ba,Ia.w=wa;Bb=jb.location;Ra=R[Bb];Ra.buffer||U.enableVertexAttribArray(Bb);
if(5126!==Ra.type||2!==Ra.size||Ra.buffer!==n||!1!==Ra.normalized||0!==Ra.offset||24!==Ra.stride)U.bindBuffer(34962,n.buffer),U.vertexAttribPointer(Bb,2,5126,!1,24,0),Ra.type=5126,Ra.size=2,Ra.buffer=n,Ra.normalized=!1,Ra.offset=0,Ra.stride=24;0!==Ra.divisor&&(S.vertexAttribDivisorANGLE(Bb,0),Ra.divisor=0);Lc=ua.location;Kb=R[Lc];Kb.buffer||U.enableVertexAttribArray(Lc);if(5126!==Kb.type||2!==Kb.size||Kb.buffer!==I||!1!==Kb.normalized||8!==Kb.offset||24!==Kb.stride)U.bindBuffer(34962,I.buffer),U.vertexAttribPointer(Lc,
2,5126,!1,24,8),Kb.type=5126,Kb.size=2,Kb.buffer=I,Kb.normalized=!1,Kb.offset=8,Kb.stride=24;0!==Kb.divisor&&(S.vertexAttribDivisorANGLE(Lc,0),Kb.divisor=0);Mb=X.location;Vb=R[Mb];Vb.buffer||U.enableVertexAttribArray(Mb);if(5126!==Vb.type||2!==Vb.size||Vb.buffer!==v||!1!==Vb.normalized||16!==Vb.offset||24!==Vb.stride)U.bindBuffer(34962,v.buffer),U.vertexAttribPointer(Mb,2,5126,!1,24,16),Vb.type=5126,Vb.size=2,Vb.buffer=v,Vb.normalized=!1,Vb.offset=16,Vb.stride=24;0!==Vb.divisor&&(S.vertexAttribDivisorANGLE(Mb,
0),Vb.divisor=0);xa=D.call(this,ha,b,0);U.uniform4f(Ja.location,xa[0],xa[1],xa[2],xa[3]);U.uniform1f(Na.location,b.lineWidth);U.uniform1f(pa.location,b.capSize);na=b.scale;U.uniform2f(T.location,na[0],na[1]);Ka=b.scaleFract;U.uniform2f(qa.location,Ka[0],Ka[1]);Pb=b.translate;U.uniform2f(J.location,Pb[0],Pb[1]);fb=b.translateFract;U.uniform2f(Zb.location,fb[0],fb[1]);U.uniform1f(Y.location,b.opacity);(ib=Aa.elements)?U.bindBuffer(34963,ib.buffer.buffer):gc.currentVAO&&(ib=Oa.getElements(gc.currentVAO.elements))&&
U.bindBuffer(34963,ib.buffer.buffer);ya=Aa.offset;hc=b.count;0<hc?ib?S.drawElementsInstancedANGLE(4,36,ib.type,ya<<(ib.type-5121>>1),hc):S.drawArraysInstancedANGLE(4,ya,36,hc):0>hc&&(ib?U.drawElements(4,36,ib.type,ya<<(ib.type-5121>>1)):U.drawArrays(4,ya,36));Z.dirty=!0;gc.setVAO(null);ha.viewportWidth=k;ha.viewportHeight=m;H&&(Q.cpuTime+=performance.now()-F);V&&t.destroyStream(ka);qc&&t.destroyStream(Ta);Sa&&t.destroyStream(Wb);pd&&t.destroyStream(db)},scope:function(b,a,c){var d,e,k,l,m,p,r,x,z,
u,y,G,E,ba,H,W,M,D,O,N,J,B,T,R,U,fa,ia,Y,sa,X,ga,za,ta,gc,da,ma,la,Da,ja,qa,Yb,Hc,Hb,La,vb,Xa,Ea,vd,gb,Sa,ua,cb,pa,ub,Vc,bc,Tb,Ja,Ub,Ma,pb,wb,hb,Pa,Na,Jb,Oa,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,Zb,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,Ac,uc,jb,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,bb,le,Yc,ac,Gb,Va,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,of,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,
Id,Jd,Kd,ge,se,ve,je,ze,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd;d=b.viewport;e=d.x|0;k=d.y|0;l="width"in d?d.width|0:ha.framebufferWidth-e;m="height"in d?d.height|0:ha.framebufferHeight-k;p=ha.viewportWidth;ha.viewportWidth=l;r=ha.viewportHeight;ha.viewportHeight=m;x=ka[0];ka[0]=e;z=ka[1];ka[1]=k;u=ka[2];ka[2]=l;y=ka[3];ka[3]=m;G=rc[0];rc[0]=0;E=rc[1];rc[1]=0;ba=rc[2];rc[2]=0;H=rc[3];rc[3]=0;W=ca.blend_enable;ca.blend_enable=!0;M=xc[0];xc[0]=32774;D=xc[1];xc[1]=32774;O=K[0];K[0]=770;N=K[1];K[1]=771;J=K[2];K[2]=
773;B=K[3];K[3]=1;T=ca.depth_enable;ca.depth_enable=!1;R=b.viewport;U=R.x|0;fa=R.y|0;ia="width"in R?R.width|0:ha.framebufferWidth-U;Y="height"in R?R.height|0:ha.framebufferHeight-fa;sa=V[0];V[0]=U;X=V[1];V[1]=fa;ga=V[2];V[2]=ia;za=V[3];V[3]=Y;ta=ca.scissor_enable;ca.scissor_enable=!0;if(gc=Z.profile)da=performance.now(),Q.count++;ma=Aa.count;Aa.count=36;la=b.count;Da=Aa.instances;Aa.instances=la;ja=Aa.primitive;Aa.primitive=4;qa=b.capSize;Yb=fc[5];fc[5]=qa;Hc=b.lineWidth;Hb=fc[4];fc[4]=Hc;La=b.opacity;
vb=fc[10];fc[10]=La;Xa=b.range;Ea=fc[18];fc[18]=Xa;vd=b.scale;gb=fc[6];fc[6]=vd;Sa=b.scaleFract;ua=fc[7];fc[7]=Sa;cb=b.translate;pa=fc[8];fc[8]=cb;ub=b.translateFract;Vc=fc[9];fc[9]=ub;bc=L.call(this,ha,b,c);Tb=fc[3];fc[3]=bc;Ja=C.buffer;C.buffer=v;Ub=C.divisor;C.divisor=0;Ma=C.normalized;C.normalized=!1;pb=C.offset;C.offset=16;wb=C.size;C.size=0;hb=C.state;C.state=1;Pa=C.stride;C.stride=24;Na=C.type;C.type=5126;Jb=C.w;C.w=0;Oa=C.x;C.x=0;db=C.y;C.y=0;nc=C.z;C.z=0;Ic=F.call(this,ha,b,c);ea.offset=
Ic;ec=!1;kb=null;lb=0;ra=!1;wa=qb=0;Ua=1;ab=0;Ba=5126;Bb=Cb=Ia=eb=0;ob(ea)?(ec=!0,kb=t.createStream(34962,ea),Ba=kb.dtype):(kb=t.getBuffer(ea))?Ba=kb.dtype:"constant"in ea?(Ua=2,"number"===typeof ea.constant?(Ia=ea.constant,Cb=Bb=eb=0):(Ia=0<ea.constant.length?ea.constant[0]:0,Cb=1<ea.constant.length?ea.constant[1]:0,Bb=2<ea.constant.length?ea.constant[2]:0,eb=3<ea.constant.length?ea.constant[3]:0)):(kb=ob(ea.buffer)?t.createStream(34962,ea.buffer):t.getBuffer(ea.buffer),Ba="type"in ea?mc[ea.type]:
kb.dtype,ra=!!ea.normalized,wa=ea.size|0,qb=ea.offset|0,ab=ea.stride|0,lb=ea.divisor|0);Ra=w.buffer;w.buffer=kb;Lc=w.divisor;w.divisor=lb;Kb=w.normalized;w.normalized=ra;Mb=w.offset;w.offset=qb;Vb=w.size;w.size=wa;xa=w.state;w.state=Ua;Zb=w.stride;w.stride=ab;Ka=w.type;w.type=Ba;Pb=w.w;w.w=eb;fb=w.x;w.x=Ia;ib=w.y;w.y=Cb;ya=w.z;w.z=Bb;hc=P.buffer;P.buffer=n;Fa=P.divisor;P.divisor=0;rb=P.normalized;P.normalized=!1;sb=P.offset;P.offset=0;Ya=P.size;P.size=0;Za=P.state;P.state=1;oc=P.stride;P.stride=24;
cd=P.type;P.type=5126;vc=P.w;P.w=0;Wa=P.x;P.x=0;Nb=P.y;P.y=0;dd=P.z;P.z=0;Ga=va.call(this,ha,b,c);q.offset=Ga;yc=!1;Qa=null;Ca=0;mb=!1;Db=xb=0;tb=1;wc=0;yb=5126;Nc=jb=uc=Ac=0;ob(q)?(yc=!0,Qa=t.createStream(34962,q),yb=Qa.dtype):(Qa=t.getBuffer(q))?yb=Qa.dtype:"constant"in q?(tb=2,"number"===typeof q.constant?(uc=q.constant,jb=Nc=Ac=0):(uc=0<q.constant.length?q.constant[0]:0,jb=1<q.constant.length?q.constant[1]:0,Nc=2<q.constant.length?q.constant[2]:0,Ac=3<q.constant.length?q.constant[3]:0)):(Qa=ob(q.buffer)?
t.createStream(34962,q.buffer):t.getBuffer(q.buffer),yb="type"in q?mc[q.type]:Qa.dtype,mb=!!q.normalized,Db=q.size|0,xb=q.offset|0,wc=q.stride|0,Ca=q.divisor|0);id=h.buffer;h.buffer=Qa;ed=h.divisor;h.divisor=Ca;Xb=h.normalized;h.normalized=mb;dc=h.offset;h.offset=xb;Qb=h.size;h.size=Db;Ha=h.state;h.state=tb;$b=h.stride;h.stride=wc;nb=h.type;h.type=yb;zb=h.w;h.w=Ac;Ob=h.x;h.x=uc;Rb=h.y;h.y=jb;ic=h.z;h.z=Nc;kc=g.buffer;g.buffer=I;Sc=g.divisor;g.divisor=0;Dc=g.normalized;g.normalized=!1;Ec=g.offset;
g.offset=8;Fc=g.size;g.size=0;Oc=g.state;g.state=1;ad=g.stride;g.stride=24;Tc=g.type;g.type=5126;Pc=g.w;g.w=0;Lb=g.x;g.x=0;Fb=g.y;g.y=0;Qc=g.z;g.z=0;Jc=f.call(this,ha,b,c);Ib.offset=Jc;Uc=!1;jc=null;Xc=0;fd=!1;le=bb=0;Yc=1;ac=0;Gb=5126;Ed=Sd=pe=Va=0;ob(Ib)?(Uc=!0,jc=t.createStream(34962,Ib),Gb=jc.dtype):(jc=t.getBuffer(Ib))?Gb=jc.dtype:"constant"in Ib?(Yc=2,"number"===typeof Ib.constant?(pe=Ib.constant,Sd=Ed=Va=0):(pe=0<Ib.constant.length?Ib.constant[0]:0,Sd=1<Ib.constant.length?Ib.constant[1]:0,
Ed=2<Ib.constant.length?Ib.constant[2]:0,Va=3<Ib.constant.length?Ib.constant[3]:0)):(jc=ob(Ib.buffer)?t.createStream(34962,Ib.buffer):t.getBuffer(Ib.buffer),Gb="type"in Ib?mc[Ib.type]:jc.dtype,fd=!!Ib.normalized,le=Ib.size|0,bb=Ib.offset|0,ac=Ib.stride|0,Xc=Ib.divisor|0);Cd=A.buffer;A.buffer=jc;hd=A.divisor;A.divisor=Xc;Gc=A.normalized;A.normalized=fd;nd=A.offset;A.offset=bb;jd=A.size;A.size=le;Zc=A.state;A.state=Yc;kd=A.stride;A.stride=ac;Ad=A.type;A.type=Gb;Bd=A.w;A.w=Va;ue=A.x;A.x=pe;we=A.y;A.y=
Sd;of=A.z;A.z=Ed;ce=S.call(this,ha,b,c);Ab.offset=ce;be=!1;$d=null;Ee=0;Xd=!1;zc=fe=0;Wc=1;me=0;ie=5126;Kd=Jd=Id=Dd=0;ob(Ab)?(be=!0,$d=t.createStream(34962,Ab),ie=$d.dtype):($d=t.getBuffer(Ab))?ie=$d.dtype:"constant"in Ab?(Wc=2,"number"===typeof Ab.constant?(Id=Ab.constant,Jd=Kd=Dd=0):(Id=0<Ab.constant.length?Ab.constant[0]:0,Jd=1<Ab.constant.length?Ab.constant[1]:0,Kd=2<Ab.constant.length?Ab.constant[2]:0,Dd=3<Ab.constant.length?Ab.constant[3]:0)):($d=ob(Ab.buffer)?t.createStream(34962,Ab.buffer):
t.getBuffer(Ab.buffer),ie="type"in Ab?mc[Ab.type]:$d.dtype,Xd=!!Ab.normalized,zc=Ab.size|0,fe=Ab.offset|0,me=Ab.stride|0,Ee=Ab.divisor|0);ge=aa.buffer;aa.buffer=$d;se=aa.divisor;aa.divisor=Ee;ve=aa.normalized;aa.normalized=Xd;je=aa.offset;aa.offset=fe;ze=aa.size;aa.size=zc;Oe=aa.state;aa.state=Wc;Le=aa.stride;aa.stride=me;ne=aa.type;aa.type=ie;Ae=aa.w;aa.w=Dd;Fe=aa.x;aa.x=Id;Ge=aa.y;aa.y=Jd;He=aa.z;aa.z=Kd;Be=oa.vert;oa.vert=2;Fd=oa.frag;oa.frag=1;Z.dirty=!0;a(ha,b,c);ha.viewportWidth=p;ha.viewportHeight=
r;ka[0]=x;ka[1]=z;ka[2]=u;ka[3]=y;rc[0]=G;rc[1]=E;rc[2]=ba;rc[3]=H;ca.blend_enable=W;xc[0]=M;xc[1]=D;K[0]=O;K[1]=N;K[2]=J;K[3]=B;ca.depth_enable=T;V[0]=sa;V[1]=X;V[2]=ga;V[3]=za;ca.scissor_enable=ta;gc&&(Q.cpuTime+=performance.now()-da);Aa.count=ma;Aa.instances=Da;Aa.primitive=ja;fc[5]=Yb;fc[4]=Hb;fc[10]=vb;fc[18]=Ea;fc[6]=gb;fc[7]=ua;fc[8]=pa;fc[9]=Vc;fc[3]=Tb;C.buffer=Ja;C.divisor=Ub;C.normalized=Ma;C.offset=pb;C.size=wb;C.state=hb;C.stride=Pa;C.type=Na;C.w=Jb;C.x=Oa;C.y=db;C.z=nc;ec&&t.destroyStream(kb);
w.buffer=Ra;w.divisor=Lc;w.normalized=Kb;w.offset=Mb;w.size=Vb;w.state=xa;w.stride=Zb;w.type=Ka;w.w=Pb;w.x=fb;w.y=ib;w.z=ya;P.buffer=hc;P.divisor=Fa;P.normalized=rb;P.offset=sb;P.size=Ya;P.state=Za;P.stride=oc;P.type=cd;P.w=vc;P.x=Wa;P.y=Nb;P.z=dd;yc&&t.destroyStream(Qa);h.buffer=id;h.divisor=ed;h.normalized=Xb;h.offset=dc;h.size=Qb;h.state=Ha;h.stride=$b;h.type=nb;h.w=zb;h.x=Ob;h.y=Rb;h.z=ic;g.buffer=kc;g.divisor=Sc;g.normalized=Dc;g.offset=Ec;g.size=Fc;g.state=Oc;g.stride=ad;g.type=Tc;g.w=Pc;g.x=
Lb;g.y=Fb;g.z=Qc;Uc&&t.destroyStream(jc);A.buffer=Cd;A.divisor=hd;A.normalized=Gc;A.offset=nd;A.size=jd;A.state=Zc;A.stride=kd;A.type=Ad;A.w=Bd;A.x=ue;A.y=we;A.z=of;be&&t.destroyStream($d);aa.buffer=ge;aa.divisor=se;aa.normalized=ve;aa.offset=je;aa.size=ze;aa.state=Oe;aa.stride=Le;aa.type=ne;aa.w=Ae;aa.x=Fe;aa.y=Ge;aa.z=He;oa.vert=Be;oa.frag=Fd;Z.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(c,
Q,p,y,e,d,r,a,u,B,w,n,I,v,D,L,C,F,na,P,va,h,g,f,A,S,aa,m,la,H,da,b,k,X,pa,Va,jb){var Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa,fc,gc,rc,vd,xc,W,K,ia,Da,ub,Vc,Ac,E,z,ga,ta,V,fa,ma,G,x;Gb=c.attributes;ua=c.buffer;Na=c.context;Y=c.current;N=c.draw;M=c.elements;T=c.extensions;qa=c.framebuffer;J=c.gl;Zb=c.isBufferArgs;Ja=c.next;R=c.shader;t=c.uniforms;ha=c.vao;Z=Ja.blend_color;Aa=Y.blend_color;Oa=Ja.blend_equation;ac=Y.blend_equation;bb=Ja.blend_func;U=Y.blend_func;ob=Ja.colorMask;ca=
Y.colorMask;oa=Ja.depth_range;fc=Y.depth_range;gc=Ja.polygonOffset_offset;rc=Y.polygonOffset_offset;vd=Ja.sample_coverage;xc=Y.sample_coverage;W=Ja.scissor_box;K=Y.scissor_box;ia=Ja.stencil_func;Da=Y.stencil_func;ub=Ja.stencil_opBack;Vc=Y.stencil_opBack;Ac=Ja.stencil_opFront;E=Y.stencil_opFront;z=Ja.viewport;ga=Y.viewport;ta={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};V={divisor:1,offset:8,stride:8};fa={divisor:1,offset:8,stride:8};ma={divisor:1,
offset:16,stride:8};G={divisor:1,offset:16,stride:8};x={divisor:1,offset:0,stride:4};return{batch:function(a,c){var n,p,l,r,t,q;n=qa.next;n!==qa.cur&&(n?J.bindFramebuffer(36160,n.framebuffer):J.bindFramebuffer(36160,null),qa.cur=n);if(Y.dirty){var v,z,u,y,C,W,D,w,I,B,R,L,Z,sa,ja,Ye,Oa,Ve,yd,Ce,Qd,Rd,Zd,Ke,qd,ld,wd,od,gd,Bc,rd,Rc;v=Ja.dither;v!==Y.dither&&(v?J.enable(3024):J.disable(3024),Y.dither=v);z=Ja.depth_func;z!==Y.depth_func&&(J.depthFunc(z),Y.depth_func=z);u=oa[0];y=oa[1];if(u!==fc[0]||y!==
fc[1])J.depthRange(u,y),fc[0]=u,fc[1]=y;C=Ja.depth_mask;C!==Y.depth_mask&&(J.depthMask(C),Y.depth_mask=C);W=ob[0];D=ob[1];w=ob[2];I=ob[3];if(W!==ca[0]||D!==ca[1]||w!==ca[2]||I!==ca[3])J.colorMask(W,D,w,I),ca[0]=W,ca[1]=D,ca[2]=w,ca[3]=I;B=Ja.cull_enable;B!==Y.cull_enable&&(B?J.enable(2884):J.disable(2884),Y.cull_enable=B);R=Ja.cull_face;R!==Y.cull_face&&(J.cullFace(R),Y.cull_face=R);L=Ja.frontFace;L!==Y.frontFace&&(J.frontFace(L),Y.frontFace=L);Z=Ja.lineWidth;Z!==Y.lineWidth&&(J.lineWidth(Z),Y.lineWidth=
Z);sa=Ja.polygonOffset_enable;sa!==Y.polygonOffset_enable&&(sa?J.enable(32823):J.disable(32823),Y.polygonOffset_enable=sa);ja=gc[0];Ye=gc[1];if(ja!==rc[0]||Ye!==rc[1])J.polygonOffset(ja,Ye),rc[0]=ja,rc[1]=Ye;Oa=Ja.sample_alpha;Oa!==Y.sample_alpha&&(Oa?J.enable(32926):J.disable(32926),Y.sample_alpha=Oa);Ve=Ja.sample_enable;Ve!==Y.sample_enable&&(Ve?J.enable(32928):J.disable(32928),Y.sample_enable=Ve);yd=vd[0];Ce=vd[1];if(yd!==xc[0]||Ce!==xc[1])J.sampleCoverage(yd,Ce),xc[0]=yd,xc[1]=Ce;Qd=Ja.stencil_mask;
Qd!==Y.stencil_mask&&(J.stencilMask(Qd),Y.stencil_mask=Qd);Rd=ia[0];Zd=ia[1];Ke=ia[2];if(Rd!==Da[0]||Zd!==Da[1]||Ke!==Da[2])J.stencilFunc(Rd,Zd,Ke),Da[0]=Rd,Da[1]=Zd,Da[2]=Ke;qd=Ac[0];ld=Ac[1];wd=Ac[2];od=Ac[3];if(qd!==E[0]||ld!==E[1]||wd!==E[2]||od!==E[3])J.stencilOpSeparate(qd,ld,wd,od),E[0]=qd,E[1]=ld,E[2]=wd,E[3]=od;gd=ub[0];Bc=ub[1];rd=ub[2];Rc=ub[3];if(gd!==Vc[0]||Bc!==Vc[1]||rd!==Vc[2]||Rc!==Vc[3])J.stencilOpSeparate(gd,Bc,rd,Rc),Vc[0]=gd,Vc[1]=Bc,Vc[2]=rd,Vc[3]=Rc}J.blendColor(0,0,0,0);Aa[0]=
0;Aa[1]=0;Aa[2]=0;Aa[3]=0;J.enable(3042);Y.blend_enable=!0;J.blendEquationSeparate(32774,32774);ac[0]=32774;ac[1]=32774;J.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;J.enable(3089);Y.scissor_enable=!0;J.disable(2960);Y.stencil_enable=!1;if(p=Y.profile)l=performance.now(),Q.count+=c;J.useProgram(F.program);r=T.angle_instanced_arrays;var Mc,sc,$a,lc,Eb;ha.setVAO(null);Mc=la.location;sc=Gb[Mc];sc.buffer||J.enableVertexAttribArray(Mc);if(5126!==sc.type||1!==sc.size||sc.buffer!==
e||!1!==sc.normalized||0!==sc.offset||8!==sc.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(Mc,1,5126,!1,8,0),sc.type=5126,sc.size=1,sc.buffer=e,sc.normalized=!1,sc.offset=0,sc.stride=8;0!==sc.divisor&&(r.vertexAttribDivisorANGLE(Mc,0),sc.divisor=0);$a=H.location;lc=Gb[$a];lc.buffer||J.enableVertexAttribArray($a);if(5126!==lc.type||1!==lc.size||lc.buffer!==d||!1!==lc.normalized||4!==lc.offset||8!==lc.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer($a,1,5126,!1,8,4),lc.type=5126,
lc.size=1,lc.buffer=d,lc.normalized=!1,lc.offset=4,lc.stride=8;0!==lc.divisor&&(r.vertexAttribDivisorANGLE($a,0),lc.divisor=0);(Eb=N.elements)?J.bindBuffer(34963,Eb.buffer.buffer):ha.currentVAO&&(Eb=M.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,Eb.buffer.buffer);for(t=0;t<c;++t){q=a[t];var qc,Ta,Kc,cc,$c,Od,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,bb,Ka,Pb,fb,ib,ya,hc,Fa,rb,
sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Wd,le,Yc,kf,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc;qc=q.viewport;Ta=qc.x|0;Kc=qc.y|0;cc="width"in qc?qc.width|0:Na.framebufferWidth-Ta;$c="height"in qc?qc.height|0:Na.framebufferHeight-Kc;Od=Na.viewportWidth;Na.viewportWidth=cc;md=Na.viewportHeight;Na.viewportHeight=$c;J.viewport(Ta,Kc,cc,$c);ga[0]=Ta;ga[1]=Kc;ga[2]=cc;ga[3]=$c;(Cc=na.call(this,Na,q,
t))?J.enable(2929):J.disable(2929);Y.depth_enable=Cc;Yb=q.viewport;Hc=Yb.x|0;Hb=Yb.y|0;La="width"in Yb?Yb.width|0:Na.framebufferWidth-Hc;vb="height"in Yb?Yb.height|0:Na.framebufferHeight-Hb;J.scissor(Hc,Hb,La,vb);K[0]=Hc;K[1]=Hb;K[2]=La;K[3]=vb;V.buffer=q.positionBuffer;Xa=!1;Ea=null;sd=0;gb=!1;Wb=Sa=0;cb=1;tc=0;Sb=5126;td=Tb=bc=De=0;Zb(V)?(Xa=!0,Ea=ua.createStream(34962,V),Sb=Ea.dtype):(Ea=ua.getBuffer(V))?Sb=Ea.dtype:"constant"in V?(cb=2,"number"===typeof V.constant?(bc=V.constant,Tb=td=De=0):(bc=
0<V.constant.length?V.constant[0]:0,Tb=1<V.constant.length?V.constant[1]:0,td=2<V.constant.length?V.constant[2]:0,De=3<V.constant.length?V.constant[3]:0)):(Ea=Zb(V.buffer)?ua.createStream(34962,V.buffer):ua.getBuffer(V.buffer),Sb="type"in V?ta[V.type]:Ea.dtype,gb=!!V.normalized,Wb=V.size|0,Sa=V.offset|0,tc=V.stride|0,sd=V.divisor|0);Ub=va.location;Ma=Gb[Ub];if(1===cb){Ma.buffer||J.enableVertexAttribArray(Ub);pb=Wb||2;if(Ma.type!==Sb||Ma.size!==pb||Ma.buffer!==Ea||Ma.normalized!==gb||Ma.offset!==Sa||
Ma.stride!==tc)J.bindBuffer(34962,Ea.buffer),J.vertexAttribPointer(Ub,pb,Sb,gb,tc,Sa),Ma.type=Sb,Ma.size=pb,Ma.buffer=Ea,Ma.normalized=gb,Ma.offset=Sa,Ma.stride=tc;Ma.divisor!==sd&&(r.vertexAttribDivisorANGLE(Ub,sd),Ma.divisor=sd)}else if(Ma.buffer&&(J.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==bc||Ma.y!==Tb||Ma.z!==td||Ma.w!==De)J.vertexAttrib4f(Ub,bc,Tb,td,De),Ma.x=bc,Ma.y=Tb,Ma.z=td,Ma.w=De;ma.buffer=q.positionBuffer;wb=!1;hb=null;Pa=0;pc=!1;pd=Jb=0;db=1;nc=0;Ic=5126;ra=lb=kb=ec=0;Zb(ma)?
(wb=!0,hb=ua.createStream(34962,ma),Ic=hb.dtype):(hb=ua.getBuffer(ma))?Ic=hb.dtype:"constant"in ma?(db=2,"number"===typeof ma.constant?(kb=ma.constant,lb=ra=ec=0):(kb=0<ma.constant.length?ma.constant[0]:0,lb=1<ma.constant.length?ma.constant[1]:0,ra=2<ma.constant.length?ma.constant[2]:0,ec=3<ma.constant.length?ma.constant[3]:0)):(hb=Zb(ma.buffer)?ua.createStream(34962,ma.buffer):ua.getBuffer(ma.buffer),Ic="type"in ma?ta[ma.type]:hb.dtype,pc=!!ma.normalized,pd=ma.size|0,Jb=ma.offset|0,nc=ma.stride|
0,Pa=ma.divisor|0);qb=g.location;wa=Gb[qb];if(1===db){wa.buffer||J.enableVertexAttribArray(qb);Ua=pd||2;if(wa.type!==Ic||wa.size!==Ua||wa.buffer!==hb||wa.normalized!==pc||wa.offset!==Jb||wa.stride!==nc)J.bindBuffer(34962,hb.buffer),J.vertexAttribPointer(qb,Ua,Ic,pc,nc,Jb),wa.type=Ic,wa.size=Ua,wa.buffer=hb,wa.normalized=pc,wa.offset=Jb,wa.stride=nc;wa.divisor!==Pa&&(r.vertexAttribDivisorANGLE(qb,Pa),wa.divisor=Pa)}else if(wa.buffer&&(J.disableVertexAttribArray(qb),wa.buffer=null),wa.x!==kb||wa.y!==
lb||wa.z!==ra||wa.w!==ec)J.vertexAttrib4f(qb,kb,lb,ra,ec),wa.x=kb,wa.y=lb,wa.z=ra,wa.w=ec;fa.buffer=q.positionFractBuffer;ab=!1;Ba=null;eb=0;Ia=!1;Bb=Cb=0;Ra=1;Lc=0;Kb=5126;bb=xa=Vb=Mb=0;Zb(fa)?(ab=!0,Ba=ua.createStream(34962,fa),Kb=Ba.dtype):(Ba=ua.getBuffer(fa))?Kb=Ba.dtype:"constant"in fa?(Ra=2,"number"===typeof fa.constant?(Vb=fa.constant,xa=bb=Mb=0):(Vb=0<fa.constant.length?fa.constant[0]:0,xa=1<fa.constant.length?fa.constant[1]:0,bb=2<fa.constant.length?fa.constant[2]:0,Mb=3<fa.constant.length?
fa.constant[3]:0)):(Ba=Zb(fa.buffer)?ua.createStream(34962,fa.buffer):ua.getBuffer(fa.buffer),Kb="type"in fa?ta[fa.type]:Ba.dtype,Ia=!!fa.normalized,Bb=fa.size|0,Cb=fa.offset|0,Lc=fa.stride|0,eb=fa.divisor|0);Ka=h.location;Pb=Gb[Ka];if(1===Ra){Pb.buffer||J.enableVertexAttribArray(Ka);fb=Bb||2;if(Pb.type!==Kb||Pb.size!==fb||Pb.buffer!==Ba||Pb.normalized!==Ia||Pb.offset!==Cb||Pb.stride!==Lc)J.bindBuffer(34962,Ba.buffer),J.vertexAttribPointer(Ka,fb,Kb,Ia,Lc,Cb),Pb.type=Kb,Pb.size=fb,Pb.buffer=Ba,Pb.normalized=
Ia,Pb.offset=Cb,Pb.stride=Lc;Pb.divisor!==eb&&(r.vertexAttribDivisorANGLE(Ka,eb),Pb.divisor=eb)}else if(Pb.buffer&&(J.disableVertexAttribArray(Ka),Pb.buffer=null),Pb.x!==Vb||Pb.y!==xa||Pb.z!==bb||Pb.w!==Mb)J.vertexAttrib4f(Ka,Vb,xa,bb,Mb),Pb.x=Vb,Pb.y=xa,Pb.z=bb,Pb.w=Mb;G.buffer=q.positionFractBuffer;ib=!1;ya=null;hc=0;Fa=!1;sb=rb=0;Ya=1;Za=0;oc=5126;Nb=Wa=vc=cd=0;Zb(G)?(ib=!0,ya=ua.createStream(34962,G),oc=ya.dtype):(ya=ua.getBuffer(G))?oc=ya.dtype:"constant"in G?(Ya=2,"number"===typeof G.constant?
(vc=G.constant,Wa=Nb=cd=0):(vc=0<G.constant.length?G.constant[0]:0,Wa=1<G.constant.length?G.constant[1]:0,Nb=2<G.constant.length?G.constant[2]:0,cd=3<G.constant.length?G.constant[3]:0)):(ya=Zb(G.buffer)?ua.createStream(34962,G.buffer):ua.getBuffer(G.buffer),oc="type"in G?ta[G.type]:ya.dtype,Fa=!!G.normalized,sb=G.size|0,rb=G.offset|0,Za=G.stride|0,hc=G.divisor|0);dd=f.location;Ga=Gb[dd];if(1===Ya){Ga.buffer||J.enableVertexAttribArray(dd);yc=sb||2;if(Ga.type!==oc||Ga.size!==yc||Ga.buffer!==ya||Ga.normalized!==
Fa||Ga.offset!==rb||Ga.stride!==Za)J.bindBuffer(34962,ya.buffer),J.vertexAttribPointer(dd,yc,oc,Fa,Za,rb),Ga.type=oc,Ga.size=yc,Ga.buffer=ya,Ga.normalized=Fa,Ga.offset=rb,Ga.stride=Za;Ga.divisor!==hc&&(r.vertexAttribDivisorANGLE(dd,hc),Ga.divisor=hc)}else if(Ga.buffer&&(J.disableVertexAttribArray(dd),Ga.buffer=null),Ga.x!==vc||Ga.y!==Wa||Ga.z!==Nb||Ga.w!==cd)J.vertexAttrib4f(dd,vc,Wa,Nb,cd),Ga.x=vc,Ga.y=Wa,Ga.z=Nb,Ga.w=cd;x.buffer=q.colorBuffer;Qa=!1;Ca=null;mb=0;xb=!1;tb=Db=0;wc=1;yb=0;xd=5126;id=
Nc=Hd=uc=0;Zb(x)?(Qa=!0,Ca=ua.createStream(34962,x),xd=Ca.dtype):(Ca=ua.getBuffer(x))?xd=Ca.dtype:"constant"in x?(wc=2,"number"===typeof x.constant?(Hd=x.constant,Nc=id=uc=0):(Hd=0<x.constant.length?x.constant[0]:0,Nc=1<x.constant.length?x.constant[1]:0,id=2<x.constant.length?x.constant[2]:0,uc=3<x.constant.length?x.constant[3]:0)):(Ca=Zb(x.buffer)?ua.createStream(34962,x.buffer):ua.getBuffer(x.buffer),xd="type"in x?ta[x.type]:Ca.dtype,xb=!!x.normalized,tb=x.size|0,Db=x.offset|0,yb=x.stride|0,mb=
x.divisor|0);ed=A.location;Xb=Gb[ed];if(1===wc){Xb.buffer||J.enableVertexAttribArray(ed);dc=tb||4;if(Xb.type!==xd||Xb.size!==dc||Xb.buffer!==Ca||Xb.normalized!==xb||Xb.offset!==Db||Xb.stride!==yb)J.bindBuffer(34962,Ca.buffer),J.vertexAttribPointer(ed,dc,xd,xb,yb,Db),Xb.type=xd,Xb.size=dc,Xb.buffer=Ca,Xb.normalized=xb,Xb.offset=Db,Xb.stride=yb;Xb.divisor!==mb&&(r.vertexAttribDivisorANGLE(ed,mb),Xb.divisor=mb)}else if(Xb.buffer&&(J.disableVertexAttribArray(ed),Xb.buffer=null),Xb.x!==Hd||Xb.y!==Nc||
Xb.z!==id||Xb.w!==uc)J.vertexAttrib4f(ed,Hd,Nc,id,uc),Xb.x=Hd,Xb.y=Nc,Xb.z=id,Xb.w=uc;Qb=q.scale;Ha=Qb[0];nb=Qb[1];t&&$b===Ha&&zb===nb||($b=Ha,zb=nb,J.uniform2f(b.location,Ha,nb));Ob=q.scaleFract;Rb=Ob[0];kc=Ob[1];t&&ic===Rb&&Sc===kc||(ic=Rb,Sc=kc,J.uniform2f(k.location,Rb,kc));Dc=q.translate;Ec=Dc[0];Oc=Dc[1];t&&Fc===Ec&&ad===Oc||(Fc=Ec,ad=Oc,J.uniform2f(pa.location,Ec,Oc));Tc=q.translateFract;Pc=Tc[0];Fb=Tc[1];t&&Lb===Pc&&Qc===Fb||(Lb=Pc,Qc=Fb,J.uniform2f(Va.location,Pc,Fb));Jc=q.thickness;t&&Uc===
Jc||(Uc=Jc,J.uniform1f(X.location,Jc));jc=q.depth;t&&Xc===jc||(Xc=jc,J.uniform1f(m.location,jc));fd=P.call(this,Na,q,t);Wd=fd[0];Yc=fd[1];he=fd[2];pe=fd[3];t&&le===Wd&&kf===Yc&&re===he&&Sd===pe||(le=Wd,kf=Yc,re=he,Sd=pe,J.uniform4f(jb.location,Wd,Yc,he,pe));Ed=q.dashLength;t&&Cd===Ed||(Cd=Ed,J.uniform1f(S.location,Ed));hd=q.opacity;t&&Gc===hd||(Gc=hd,J.uniform1f(da.location,hd));(nd=q.dashTexture)&&"framebuffer"===nd._reglType&&(nd=nd.color[0]);jd=nd._texture;J.uniform1i(aa.location,jd.bind());Zc=
q.count;0<Zc?Eb?r.drawElementsInstancedANGLE(5,4,Eb.type,0<<(Eb.type-5121>>1),Zc):r.drawArraysInstancedANGLE(5,0,4,Zc):0>Zc&&(Eb?J.drawElements(5,4,Eb.type,0<<(Eb.type-5121>>1)):J.drawArrays(5,0,4));Na.viewportWidth=Od;Na.viewportHeight=md;Xa&&ua.destroyStream(Ea);wb&&ua.destroyStream(hb);ab&&ua.destroyStream(Ba);ib&&ua.destroyStream(ya);Qa&&ua.destroyStream(Ca);jd.unbind()}Y.dirty=!0;ha.setVAO(null);p&&(Q.cpuTime+=performance.now()-l)},draw:function(a){var c,n,t,l,v,z,q,u,C,W,D,w,I,F,B,R,L,P,Z,sa,
ja,ee,Ye,Oa,Ve,yd,Ce,Qd,Rd,Zd,na,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,Od,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,bb,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,rf,Ka,Pb,fb,ib,ya,hc,Fa,rb;c=qa.next;c!==qa.cur&&(c?J.bindFramebuffer(36160,c.framebuffer):J.bindFramebuffer(36160,null),qa.cur=c);if(Y.dirty){var sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb;sb=Ja.dither;sb!==
Y.dither&&(sb?J.enable(3024):J.disable(3024),Y.dither=sb);Ya=Ja.depth_func;Ya!==Y.depth_func&&(J.depthFunc(Ya),Y.depth_func=Ya);Za=oa[0];oc=oa[1];if(Za!==fc[0]||oc!==fc[1])J.depthRange(Za,oc),fc[0]=Za,fc[1]=oc;cd=Ja.depth_mask;cd!==Y.depth_mask&&(J.depthMask(cd),Y.depth_mask=cd);vc=ob[0];Wa=ob[1];Nb=ob[2];dd=ob[3];if(vc!==ca[0]||Wa!==ca[1]||Nb!==ca[2]||dd!==ca[3])J.colorMask(vc,Wa,Nb,dd),ca[0]=vc,ca[1]=Wa,ca[2]=Nb,ca[3]=dd;Ga=Ja.cull_enable;Ga!==Y.cull_enable&&(Ga?J.enable(2884):J.disable(2884),Y.cull_enable=
Ga);yc=Ja.cull_face;yc!==Y.cull_face&&(J.cullFace(yc),Y.cull_face=yc);Qa=Ja.frontFace;Qa!==Y.frontFace&&(J.frontFace(Qa),Y.frontFace=Qa);Ca=Ja.lineWidth;Ca!==Y.lineWidth&&(J.lineWidth(Ca),Y.lineWidth=Ca);mb=Ja.polygonOffset_enable;mb!==Y.polygonOffset_enable&&(mb?J.enable(32823):J.disable(32823),Y.polygonOffset_enable=mb);xb=gc[0];Db=gc[1];if(xb!==rc[0]||Db!==rc[1])J.polygonOffset(xb,Db),rc[0]=xb,rc[1]=Db;tb=Ja.sample_alpha;tb!==Y.sample_alpha&&(tb?J.enable(32926):J.disable(32926),Y.sample_alpha=
tb);wc=Ja.sample_enable;wc!==Y.sample_enable&&(wc?J.enable(32928):J.disable(32928),Y.sample_enable=wc);yb=vd[0];xd=vd[1];if(yb!==xc[0]||xd!==xc[1])J.sampleCoverage(yb,xd),xc[0]=yb,xc[1]=xd;uc=Ja.stencil_mask;uc!==Y.stencil_mask&&(J.stencilMask(uc),Y.stencil_mask=uc);Hd=ia[0];Nc=ia[1];id=ia[2];if(Hd!==Da[0]||Nc!==Da[1]||id!==Da[2])J.stencilFunc(Hd,Nc,id),Da[0]=Hd,Da[1]=Nc,Da[2]=id;ed=Ac[0];Xb=Ac[1];dc=Ac[2];Qb=Ac[3];if(ed!==E[0]||Xb!==E[1]||dc!==E[2]||Qb!==E[3])J.stencilOpSeparate(ed,Xb,dc,Qb),E[0]=
ed,E[1]=Xb,E[2]=dc,E[3]=Qb;Ha=ub[0];$b=ub[1];nb=ub[2];zb=ub[3];if(Ha!==Vc[0]||$b!==Vc[1]||nb!==Vc[2]||zb!==Vc[3])J.stencilOpSeparate(Ha,$b,nb,zb),Vc[0]=Ha,Vc[1]=$b,Vc[2]=nb,Vc[3]=zb}n=a.viewport;t=n.x|0;l=n.y|0;v="width"in n?n.width|0:Na.framebufferWidth-t;z="height"in n?n.height|0:Na.framebufferHeight-l;q=Na.viewportWidth;Na.viewportWidth=v;u=Na.viewportHeight;Na.viewportHeight=z;J.viewport(t,l,v,z);ga[0]=t;ga[1]=l;ga[2]=v;ga[3]=z;J.blendColor(0,0,0,0);Aa[0]=0;Aa[1]=0;Aa[2]=0;Aa[3]=0;J.enable(3042);
Y.blend_enable=!0;J.blendEquationSeparate(32774,32774);ac[0]=32774;ac[1]=32774;J.blendFuncSeparate(770,771,773,1);U[0]=770;U[1]=771;U[2]=773;U[3]=1;(C=p.call(this,Na,a,0))?J.enable(2929):J.disable(2929);Y.depth_enable=C;W=a.viewport;D=W.x|0;w=W.y|0;I="width"in W?W.width|0:Na.framebufferWidth-D;F="height"in W?W.height|0:Na.framebufferHeight-w;J.scissor(D,w,I,F);K[0]=D;K[1]=w;K[2]=I;K[3]=F;J.enable(3089);Y.scissor_enable=!0;J.disable(2960);Y.stencil_enable=!1;if(B=Y.profile)R=performance.now(),Q.count++;
J.useProgram(y.program);L=T.angle_instanced_arrays;ha.setVAO(null);V.buffer=a.positionBuffer;P=!1;Z=null;sa=0;ja=!1;Ye=ee=0;Oa=1;Ve=0;yd=5126;Zd=Rd=Qd=Ce=0;Zb(V)?(P=!0,Z=ua.createStream(34962,V),yd=Z.dtype):(Z=ua.getBuffer(V))?yd=Z.dtype:"constant"in V?(Oa=2,"number"===typeof V.constant?(Qd=V.constant,Rd=Zd=Ce=0):(Qd=0<V.constant.length?V.constant[0]:0,Rd=1<V.constant.length?V.constant[1]:0,Zd=2<V.constant.length?V.constant[2]:0,Ce=3<V.constant.length?V.constant[3]:0)):(Z=Zb(V.buffer)?ua.createStream(34962,
V.buffer):ua.getBuffer(V.buffer),yd="type"in V?ta[V.type]:Z.dtype,ja=!!V.normalized,Ye=V.size|0,ee=V.offset|0,Ve=V.stride|0,sa=V.divisor|0);na=va.location;qd=Gb[na];if(1===Oa){qd.buffer||J.enableVertexAttribArray(na);ld=Ye||2;if(qd.type!==yd||qd.size!==ld||qd.buffer!==Z||qd.normalized!==ja||qd.offset!==ee||qd.stride!==Ve)J.bindBuffer(34962,Z.buffer),J.vertexAttribPointer(na,ld,yd,ja,Ve,ee),qd.type=yd,qd.size=ld,qd.buffer=Z,qd.normalized=ja,qd.offset=ee,qd.stride=Ve;qd.divisor!==sa&&(L.vertexAttribDivisorANGLE(na,
sa),qd.divisor=sa)}else if(qd.buffer&&(J.disableVertexAttribArray(na),qd.buffer=null),qd.x!==Qd||qd.y!==Rd||qd.z!==Zd||qd.w!==Ce)J.vertexAttrib4f(na,Qd,Rd,Zd,Ce),qd.x=Qd,qd.y=Rd,qd.z=Zd,qd.w=Ce;ma.buffer=a.positionBuffer;wd=!1;od=null;gd=0;Bc=!1;Rc=rd=0;Mc=1;sc=0;$a=5126;Ta=qc=Eb=lc=0;Zb(ma)?(wd=!0,od=ua.createStream(34962,ma),$a=od.dtype):(od=ua.getBuffer(ma))?$a=od.dtype:"constant"in ma?(Mc=2,"number"===typeof ma.constant?(Eb=ma.constant,qc=Ta=lc=0):(Eb=0<ma.constant.length?ma.constant[0]:0,qc=
1<ma.constant.length?ma.constant[1]:0,Ta=2<ma.constant.length?ma.constant[2]:0,lc=3<ma.constant.length?ma.constant[3]:0)):(od=Zb(ma.buffer)?ua.createStream(34962,ma.buffer):ua.getBuffer(ma.buffer),$a="type"in ma?ta[ma.type]:od.dtype,Bc=!!ma.normalized,Rc=ma.size|0,rd=ma.offset|0,sc=ma.stride|0,gd=ma.divisor|0);Kc=g.location;cc=Gb[Kc];if(1===Mc){cc.buffer||J.enableVertexAttribArray(Kc);$c=Rc||2;if(cc.type!==$a||cc.size!==$c||cc.buffer!==od||cc.normalized!==Bc||cc.offset!==rd||cc.stride!==sc)J.bindBuffer(34962,
od.buffer),J.vertexAttribPointer(Kc,$c,$a,Bc,sc,rd),cc.type=$a,cc.size=$c,cc.buffer=od,cc.normalized=Bc,cc.offset=rd,cc.stride=sc;cc.divisor!==gd&&(L.vertexAttribDivisorANGLE(Kc,gd),cc.divisor=gd)}else if(cc.buffer&&(J.disableVertexAttribArray(Kc),cc.buffer=null),cc.x!==Eb||cc.y!==qc||cc.z!==Ta||cc.w!==lc)J.vertexAttrib4f(Kc,Eb,qc,Ta,lc),cc.x=Eb,cc.y=qc,cc.z=Ta,cc.w=lc;fa.buffer=a.positionFractBuffer;Od=!1;md=null;Cc=0;Yb=!1;Hb=Hc=0;La=1;vb=0;Xa=5126;Sa=gb=sd=Ea=0;Zb(fa)?(Od=!0,md=ua.createStream(34962,
fa),Xa=md.dtype):(md=ua.getBuffer(fa))?Xa=md.dtype:"constant"in fa?(La=2,"number"===typeof fa.constant?(sd=fa.constant,gb=Sa=Ea=0):(sd=0<fa.constant.length?fa.constant[0]:0,gb=1<fa.constant.length?fa.constant[1]:0,Sa=2<fa.constant.length?fa.constant[2]:0,Ea=3<fa.constant.length?fa.constant[3]:0)):(md=Zb(fa.buffer)?ua.createStream(34962,fa.buffer):ua.getBuffer(fa.buffer),Xa="type"in fa?ta[fa.type]:md.dtype,Yb=!!fa.normalized,Hb=fa.size|0,Hc=fa.offset|0,vb=fa.stride|0,Cc=fa.divisor|0);Wb=h.location;
cb=Gb[Wb];if(1===La){cb.buffer||J.enableVertexAttribArray(Wb);tc=Hb||2;if(cb.type!==Xa||cb.size!==tc||cb.buffer!==md||cb.normalized!==Yb||cb.offset!==Hc||cb.stride!==vb)J.bindBuffer(34962,md.buffer),J.vertexAttribPointer(Wb,tc,Xa,Yb,vb,Hc),cb.type=Xa,cb.size=tc,cb.buffer=md,cb.normalized=Yb,cb.offset=Hc,cb.stride=vb;cb.divisor!==Cc&&(L.vertexAttribDivisorANGLE(Wb,Cc),cb.divisor=Cc)}else if(cb.buffer&&(J.disableVertexAttribArray(Wb),cb.buffer=null),cb.x!==sd||cb.y!==gb||cb.z!==Sa||cb.w!==Ea)J.vertexAttrib4f(Wb,
sd,gb,Sa,Ea),cb.x=sd,cb.y=gb,cb.z=Sa,cb.w=Ea;G.buffer=a.positionFractBuffer;Sb=!1;bb=null;bc=0;Tb=!1;Ub=td=0;Ma=1;pb=0;wb=5126;Jb=pc=Pa=hb=0;Zb(G)?(Sb=!0,bb=ua.createStream(34962,G),wb=bb.dtype):(bb=ua.getBuffer(G))?wb=bb.dtype:"constant"in G?(Ma=2,"number"===typeof G.constant?(Pa=G.constant,pc=Jb=hb=0):(Pa=0<G.constant.length?G.constant[0]:0,pc=1<G.constant.length?G.constant[1]:0,Jb=2<G.constant.length?G.constant[2]:0,hb=3<G.constant.length?G.constant[3]:0)):(bb=Zb(G.buffer)?ua.createStream(34962,
G.buffer):ua.getBuffer(G.buffer),wb="type"in G?ta[G.type]:bb.dtype,Tb=!!G.normalized,Ub=G.size|0,td=G.offset|0,pb=G.stride|0,bc=G.divisor|0);pd=f.location;db=Gb[pd];if(1===Ma){db.buffer||J.enableVertexAttribArray(pd);nc=Ub||2;if(db.type!==wb||db.size!==nc||db.buffer!==bb||db.normalized!==Tb||db.offset!==td||db.stride!==pb)J.bindBuffer(34962,bb.buffer),J.vertexAttribPointer(pd,nc,wb,Tb,pb,td),db.type=wb,db.size=nc,db.buffer=bb,db.normalized=Tb,db.offset=td,db.stride=pb;db.divisor!==bc&&(L.vertexAttribDivisorANGLE(pd,
bc),db.divisor=bc)}else if(db.buffer&&(J.disableVertexAttribArray(pd),db.buffer=null),db.x!==Pa||db.y!==pc||db.z!==Jb||db.w!==hb)J.vertexAttrib4f(pd,Pa,pc,Jb,hb),db.x=Pa,db.y=pc,db.z=Jb,db.w=hb;x.buffer=a.colorBuffer;Ic=!1;ec=null;kb=0;lb=!1;qb=ra=0;wa=1;Ua=0;ab=5126;Cb=Ia=eb=Ba=0;Zb(x)?(Ic=!0,ec=ua.createStream(34962,x),ab=ec.dtype):(ec=ua.getBuffer(x))?ab=ec.dtype:"constant"in x?(wa=2,"number"===typeof x.constant?(eb=x.constant,Ia=Cb=Ba=0):(eb=0<x.constant.length?x.constant[0]:0,Ia=1<x.constant.length?
x.constant[1]:0,Cb=2<x.constant.length?x.constant[2]:0,Ba=3<x.constant.length?x.constant[3]:0)):(ec=Zb(x.buffer)?ua.createStream(34962,x.buffer):ua.getBuffer(x.buffer),ab="type"in x?ta[x.type]:ec.dtype,lb=!!x.normalized,qb=x.size|0,ra=x.offset|0,Ua=x.stride|0,kb=x.divisor|0);Bb=A.location;Ra=Gb[Bb];if(1===wa){Ra.buffer||J.enableVertexAttribArray(Bb);Lc=qb||4;if(Ra.type!==ab||Ra.size!==Lc||Ra.buffer!==ec||Ra.normalized!==lb||Ra.offset!==ra||Ra.stride!==Ua)J.bindBuffer(34962,ec.buffer),J.vertexAttribPointer(Bb,
Lc,ab,lb,Ua,ra),Ra.type=ab,Ra.size=Lc,Ra.buffer=ec,Ra.normalized=lb,Ra.offset=ra,Ra.stride=Ua;Ra.divisor!==kb&&(L.vertexAttribDivisorANGLE(Bb,kb),Ra.divisor=kb)}else if(Ra.buffer&&(J.disableVertexAttribArray(Bb),Ra.buffer=null),Ra.x!==eb||Ra.y!==Ia||Ra.z!==Cb||Ra.w!==Ba)J.vertexAttrib4f(Bb,eb,Ia,Cb,Ba),Ra.x=eb,Ra.y=Ia,Ra.z=Cb,Ra.w=Ba;Kb=la.location;Mb=Gb[Kb];Mb.buffer||J.enableVertexAttribArray(Kb);if(5126!==Mb.type||1!==Mb.size||Mb.buffer!==e||!1!==Mb.normalized||0!==Mb.offset||8!==Mb.stride)J.bindBuffer(34962,
e.buffer),J.vertexAttribPointer(Kb,1,5126,!1,8,0),Mb.type=5126,Mb.size=1,Mb.buffer=e,Mb.normalized=!1,Mb.offset=0,Mb.stride=8;0!==Mb.divisor&&(L.vertexAttribDivisorANGLE(Kb,0),Mb.divisor=0);Vb=H.location;xa=Gb[Vb];xa.buffer||J.enableVertexAttribArray(Vb);if(5126!==xa.type||1!==xa.size||xa.buffer!==d||!1!==xa.normalized||4!==xa.offset||8!==xa.stride)J.bindBuffer(34962,d.buffer),J.vertexAttribPointer(Vb,1,5126,!1,8,4),xa.type=5126,xa.size=1,xa.buffer=d,xa.normalized=!1,xa.offset=4,xa.stride=8;0!==xa.divisor&&
(L.vertexAttribDivisorANGLE(Vb,0),xa.divisor=0);rf=a.scale;J.uniform2f(b.location,rf[0],rf[1]);Ka=a.scaleFract;J.uniform2f(k.location,Ka[0],Ka[1]);Pb=a.translate;J.uniform2f(pa.location,Pb[0],Pb[1]);fb=a.translateFract;J.uniform2f(Va.location,fb[0],fb[1]);J.uniform1f(X.location,a.thickness);J.uniform1f(m.location,a.depth);ib=r.call(this,Na,a,0);J.uniform4f(jb.location,ib[0],ib[1],ib[2],ib[3]);J.uniform1f(S.location,a.dashLength);J.uniform1f(da.location,a.opacity);(ya=a.dashTexture)&&"framebuffer"===
ya._reglType&&(ya=ya.color[0]);hc=ya._texture;J.uniform1i(aa.location,hc.bind());(Fa=N.elements)?J.bindBuffer(34963,Fa.buffer.buffer):ha.currentVAO&&(Fa=M.getElements(ha.currentVAO.elements))&&J.bindBuffer(34963,Fa.buffer.buffer);rb=a.count;0<rb?Fa?L.drawElementsInstancedANGLE(5,4,Fa.type,0<<(Fa.type-5121>>1),rb):L.drawArraysInstancedANGLE(5,0,4,rb):0>rb&&(Fa?J.drawElements(5,4,Fa.type,0<<(Fa.type-5121>>1)):J.drawArrays(5,0,4));Y.dirty=!0;ha.setVAO(null);Na.viewportWidth=q;Na.viewportHeight=u;B&&
(Q.cpuTime+=performance.now()-R);P&&ua.destroyStream(Z);wd&&ua.destroyStream(od);Od&&ua.destroyStream(md);Sb&&ua.destroyStream(bb);Ic&&ua.destroyStream(ec);hc.unbind()},scope:function(b,c,f){var g,h,k,m,q,p,r,A,K,y,E,H,M,F,J,S,T,U,P,aa,ia,X,ga,ca,ha,gc,da,la,va,Da,oa,qa,vd,pa,xc,ub,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,Vc,fc,Aa,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,rc,bc,Tb,na,Ub,Ma,pb,wb,hb,Pa,pc,Jb,ob,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,Ac,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,
Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,jb,uc,ac,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Gb,le,Yc,Va,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,of,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,ze,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me;g=b.viewport;h=g.x|0;k=g.y|0;m="width"in g?g.width|0:Na.framebufferWidth-h;q="height"in g?g.height|0:Na.framebufferHeight-k;p=Na.viewportWidth;Na.viewportWidth=m;r=Na.viewportHeight;
Na.viewportHeight=q;A=z[0];z[0]=h;K=z[1];z[1]=k;y=z[2];z[2]=m;E=z[3];z[3]=q;H=Z[0];Z[0]=0;M=Z[1];Z[1]=0;F=Z[2];Z[2]=0;J=Z[3];Z[3]=0;S=Ja.blend_enable;Ja.blend_enable=!0;T=Oa[0];Oa[0]=32774;U=Oa[1];Oa[1]=32774;P=bb[0];bb[0]=770;aa=bb[1];bb[1]=771;ia=bb[2];bb[2]=773;X=bb[3];bb[3]=1;ga=a.call(this,Na,b,f);ca=Ja.depth_enable;Ja.depth_enable=ga;ha=b.viewport;gc=ha.x|0;da=ha.y|0;la="width"in ha?ha.width|0:Na.framebufferWidth-gc;va="height"in ha?ha.height|0:Na.framebufferHeight-da;Da=W[0];W[0]=gc;oa=W[1];
W[1]=da;qa=W[2];W[2]=la;vd=W[3];W[3]=va;pa=Ja.scissor_enable;Ja.scissor_enable=!0;xc=Ja.stencil_enable;Ja.stencil_enable=!1;if(ub=Y.profile)Rc=performance.now(),Q.count++;Mc=N.offset;N.offset=0;sc=N.count;N.count=4;$a=b.count;lc=N.instances;N.instances=$a;Eb=N.primitive;N.primitive=5;qc=b.dashLength;Ta=t[23];t[23]=qc;Kc=b.dashTexture;cc=t[24];t[24]=Kc;Vc=b.depth;fc=t[22];t[22]=Vc;Aa=b.id;Cc=t[31];t[31]=Aa;Yb=b.miterLimit;Hc=t[32];t[32]=Yb;Hb=u.call(this,Na,b,f);La=t[33];t[33]=Hb;vb=b.opacity;Xa=t[10];
t[10]=vb;Ea=Na.pixelRatio;sd=t[34];t[34]=Ea;gb=b.scale;Sa=t[6];t[6]=gb;Wb=b.scaleFract;cb=t[7];t[7]=Wb;tc=b.thickness;Sb=t[21];t[21]=tc;rc=b.translate;bc=t[8];t[8]=rc;Tb=b.translateFract;na=t[9];t[9]=Tb;Ub=B.call(this,Na,b,f);Ma=t[3];t[3]=Ub;V.buffer=b.positionBuffer;pb=!1;wb=null;hb=0;Pa=!1;Jb=pc=0;ob=1;db=0;nc=5126;lb=kb=ec=Ic=0;Zb(V)?(pb=!0,wb=ua.createStream(34962,V),nc=wb.dtype):(wb=ua.getBuffer(V))?nc=wb.dtype:"constant"in V?(ob=2,"number"===typeof V.constant?(ec=V.constant,kb=lb=Ic=0):(ec=
0<V.constant.length?V.constant[0]:0,kb=1<V.constant.length?V.constant[1]:0,lb=2<V.constant.length?V.constant[2]:0,Ic=3<V.constant.length?V.constant[3]:0)):(wb=Zb(V.buffer)?ua.createStream(34962,V.buffer):ua.getBuffer(V.buffer),nc="type"in V?ta[V.type]:wb.dtype,Pa=!!V.normalized,Jb=V.size|0,pc=V.offset|0,db=V.stride|0,hb=V.divisor|0);ra=w.buffer;w.buffer=wb;qb=w.divisor;w.divisor=hb;wa=w.normalized;w.normalized=Pa;Ua=w.offset;w.offset=pc;ab=w.size;w.size=Jb;Ba=w.state;w.state=ob;eb=w.stride;w.stride=
db;Ia=w.type;w.type=nc;Cb=w.w;w.w=Ic;Bb=w.x;w.x=ec;Ra=w.y;w.y=kb;Lc=w.z;w.z=lb;fa.buffer=b.positionFractBuffer;Kb=!1;Mb=null;Vb=0;xa=!1;Ka=Ac=0;Pb=1;fb=0;ib=5126;rb=Fa=hc=ya=0;Zb(fa)?(Kb=!0,Mb=ua.createStream(34962,fa),ib=Mb.dtype):(Mb=ua.getBuffer(fa))?ib=Mb.dtype:"constant"in fa?(Pb=2,"number"===typeof fa.constant?(hc=fa.constant,Fa=rb=ya=0):(hc=0<fa.constant.length?fa.constant[0]:0,Fa=1<fa.constant.length?fa.constant[1]:0,rb=2<fa.constant.length?fa.constant[2]:0,ya=3<fa.constant.length?fa.constant[3]:
0)):(Mb=Zb(fa.buffer)?ua.createStream(34962,fa.buffer):ua.getBuffer(fa.buffer),ib="type"in fa?ta[fa.type]:Mb.dtype,xa=!!fa.normalized,Ka=fa.size|0,Ac=fa.offset|0,fb=fa.stride|0,Vb=fa.divisor|0);sb=n.buffer;n.buffer=Mb;Ya=n.divisor;n.divisor=Vb;Za=n.normalized;n.normalized=xa;oc=n.offset;n.offset=Ac;cd=n.size;n.size=Ka;vc=n.state;n.state=Pb;Wa=n.stride;n.stride=fb;Nb=n.type;n.type=ib;dd=n.w;n.w=ya;Ga=n.x;n.x=hc;yc=n.y;n.y=Fa;Qa=n.z;n.z=rb;ma.buffer=b.positionBuffer;Ca=!1;mb=null;xb=0;Db=!1;wc=tb=0;
yb=1;jb=0;uc=5126;ed=id=Nc=ac=0;Zb(ma)?(Ca=!0,mb=ua.createStream(34962,ma),uc=mb.dtype):(mb=ua.getBuffer(ma))?uc=mb.dtype:"constant"in ma?(yb=2,"number"===typeof ma.constant?(Nc=ma.constant,id=ed=ac=0):(Nc=0<ma.constant.length?ma.constant[0]:0,id=1<ma.constant.length?ma.constant[1]:0,ed=2<ma.constant.length?ma.constant[2]:0,ac=3<ma.constant.length?ma.constant[3]:0)):(mb=Zb(ma.buffer)?ua.createStream(34962,ma.buffer):ua.getBuffer(ma.buffer),uc="type"in ma?ta[ma.type]:mb.dtype,Db=!!ma.normalized,wc=
ma.size|0,tb=ma.offset|0,jb=ma.stride|0,xb=ma.divisor|0);Xb=I.buffer;I.buffer=mb;dc=I.divisor;I.divisor=xb;Qb=I.normalized;I.normalized=Db;Ha=I.offset;I.offset=tb;$b=I.size;I.size=wc;nb=I.state;I.state=yb;zb=I.stride;I.stride=jb;Ob=I.type;I.type=uc;Rb=I.w;I.w=ac;ic=I.x;I.x=Nc;kc=I.y;I.y=id;Sc=I.z;I.z=ed;G.buffer=b.positionFractBuffer;Dc=!1;Ec=null;Fc=0;Oc=!1;Tc=ad=0;Pc=1;Lb=0;Fb=5126;jc=Uc=Jc=Qc=0;Zb(G)?(Dc=!0,Ec=ua.createStream(34962,G),Fb=Ec.dtype):(Ec=ua.getBuffer(G))?Fb=Ec.dtype:"constant"in G?
(Pc=2,"number"===typeof G.constant?(Jc=G.constant,Uc=jc=Qc=0):(Jc=0<G.constant.length?G.constant[0]:0,Uc=1<G.constant.length?G.constant[1]:0,jc=2<G.constant.length?G.constant[2]:0,Qc=3<G.constant.length?G.constant[3]:0)):(Ec=Zb(G.buffer)?ua.createStream(34962,G.buffer):ua.getBuffer(G.buffer),Fb="type"in G?ta[G.type]:Ec.dtype,Oc=!!G.normalized,Tc=G.size|0,ad=G.offset|0,Lb=G.stride|0,Fc=G.divisor|0);Xc=v.buffer;v.buffer=Ec;fd=v.divisor;v.divisor=Fc;Gb=v.normalized;v.normalized=Oc;le=v.offset;v.offset=
ad;Yc=v.size;v.size=Tc;Va=v.state;v.state=Pc;he=v.stride;v.stride=Lb;re=v.type;v.type=Fb;pe=v.w;v.w=Qc;Sd=v.x;v.x=Jc;Ed=v.y;v.y=Uc;Cd=v.z;v.z=jc;x.buffer=b.colorBuffer;hd=!1;Gc=null;nd=0;jd=!1;kd=Zc=0;Ad=1;Bd=0;ue=5126;be=ce=of=we=0;Zb(x)?(hd=!0,Gc=ua.createStream(34962,x),ue=Gc.dtype):(Gc=ua.getBuffer(x))?ue=Gc.dtype:"constant"in x?(Ad=2,"number"===typeof x.constant?(of=x.constant,ce=be=we=0):(of=0<x.constant.length?x.constant[0]:0,ce=1<x.constant.length?x.constant[1]:0,be=2<x.constant.length?x.constant[2]:
0,we=3<x.constant.length?x.constant[3]:0)):(Gc=Zb(x.buffer)?ua.createStream(34962,x.buffer):ua.getBuffer(x.buffer),ue="type"in x?ta[x.type]:Gc.dtype,jd=!!x.normalized,kd=x.size|0,Zc=x.offset|0,Bd=x.stride|0,nd=x.divisor|0);$d=D.buffer;D.buffer=Gc;Ee=D.divisor;D.divisor=nd;Xd=D.normalized;D.normalized=jd;fe=D.offset;D.offset=Zc;zc=D.size;D.size=kd;Wc=D.state;D.state=Ad;me=D.stride;D.stride=Bd;ie=D.type;D.type=ue;Dd=D.w;D.w=we;Id=D.x;D.x=of;Jd=D.y;D.y=ce;Kd=D.z;D.z=be;ge=L.buffer;L.buffer=e;se=L.divisor;
L.divisor=0;ve=L.normalized;L.normalized=!1;je=L.offset;L.offset=0;ze=L.size;L.size=0;Oe=L.state;L.state=1;Le=L.stride;L.stride=8;ne=L.type;L.type=5126;Ae=L.w;L.w=0;Fe=L.x;L.x=0;Ge=L.y;L.y=0;He=L.z;L.z=0;Be=C.buffer;C.buffer=d;Fd=C.divisor;C.divisor=0;Pd=C.normalized;C.normalized=!1;Ud=C.offset;C.offset=4;Yd=C.size;C.size=0;Ie=C.state;C.state=1;zd=C.stride;C.stride=8;Ld=C.type;C.type=5126;xe=C.w;C.w=0;Je=C.x;C.x=0;df=C.y;C.y=0;Xe=C.z;C.z=0;Pe=R.vert;R.vert=20;Me=R.frag;R.frag=19;Y.dirty=!0;c(Na,b,
f);Na.viewportWidth=p;Na.viewportHeight=r;z[0]=A;z[1]=K;z[2]=y;z[3]=E;Z[0]=H;Z[1]=M;Z[2]=F;Z[3]=J;Ja.blend_enable=S;Oa[0]=T;Oa[1]=U;bb[0]=P;bb[1]=aa;bb[2]=ia;bb[3]=X;Ja.depth_enable=ca;W[0]=Da;W[1]=oa;W[2]=qa;W[3]=vd;Ja.scissor_enable=pa;Ja.stencil_enable=xc;ub&&(Q.cpuTime+=performance.now()-Rc);N.offset=Mc;N.count=sc;N.instances=lc;N.primitive=Eb;t[23]=Ta;t[24]=cc;t[22]=fc;t[31]=Cc;t[32]=Hc;t[33]=La;t[10]=Xa;t[34]=sd;t[6]=Sa;t[7]=cb;t[21]=Sb;t[8]=bc;t[9]=na;t[3]=Ma;pb&&ua.destroyStream(wb);w.buffer=
ra;w.divisor=qb;w.normalized=wa;w.offset=Ua;w.size=ab;w.state=Ba;w.stride=eb;w.type=Ia;w.w=Cb;w.x=Bb;w.y=Ra;w.z=Lc;Kb&&ua.destroyStream(Mb);n.buffer=sb;n.divisor=Ya;n.normalized=Za;n.offset=oc;n.size=cd;n.state=vc;n.stride=Wa;n.type=Nb;n.w=dd;n.x=Ga;n.y=yc;n.z=Qa;Ca&&ua.destroyStream(mb);I.buffer=Xb;I.divisor=dc;I.normalized=Qb;I.offset=Ha;I.size=$b;I.state=nb;I.stride=zb;I.type=Ob;I.w=Rb;I.x=ic;I.y=kc;I.z=Sc;Dc&&ua.destroyStream(Ec);v.buffer=Xc;v.divisor=fd;v.normalized=Gb;v.offset=le;v.size=Yc;
v.state=Va;v.stride=he;v.type=re;v.w=pe;v.x=Sd;v.y=Ed;v.z=Cd;hd&&ua.destroyStream(Gc);D.buffer=$d;D.divisor=Ee;D.normalized=Xd;D.offset=fe;D.size=zc;D.state=Wc;D.stride=me;D.type=ie;D.w=Dd;D.x=Id;D.y=Jd;D.z=Kd;L.buffer=ge;L.divisor=se;L.normalized=ve;L.offset=je;L.size=ze;L.state=Oe;L.stride=Le;L.type=ne;L.w=Ae;L.x=Fe;L.y=Ge;L.z=He;C.buffer=Be;C.divisor=Fd;C.normalized=Pd;C.offset=Ud;C.size=Yd;C.state=Ie;C.stride=zd;C.type=Ld;C.w=xe;C.x=Je;C.y=df;C.z=Xe;R.vert=Pe;R.frag=Me;Y.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(c,
Q,p,y,e,d,r,a,u,w,B,n,I,v,D,L,C,F,na,P,va,h,g,f,A,S,aa,m,la,H,da,b,k,X,pa,Va,jb,Gb,ua,Na,Y){var N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa,fc,gc,rc,vd,xc,W,K,ia,Da,ub,Vc,Ac,E,z,ga,ta,V,fa,ma,G,x,ba,O,za,ka,l;N=c.attributes;M=c.buffer;T=c.context;qa=c.current;J=c.draw;Zb=c.elements;Ja=c.extensions;R=c.framebuffer;t=c.gl;ha=c.isBufferArgs;Z=c.next;Aa=c.shader;Oa=c.uniforms;ac=c.vao;bb=Z.blend_color;U=qa.blend_color;ob=Z.blend_equation;ca=qa.blend_equation;oa=Z.blend_func;fc=qa.blend_func;gc=Z.colorMask;
rc=qa.colorMask;vd=Z.depth_range;xc=qa.depth_range;W=Z.polygonOffset_offset;K=qa.polygonOffset_offset;ia=Z.sample_coverage;Da=qa.sample_coverage;ub=Z.scissor_box;Vc=qa.scissor_box;Ac=Z.stencil_func;E=qa.stencil_func;z=Z.stencil_opBack;ga=qa.stencil_opBack;ta=Z.stencil_opFront;V=qa.stencil_opFront;fa=Z.viewport;ma=qa.viewport;G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};x={divisor:1,offset:0,stride:4};ba={divisor:1,offset:8,stride:8};O={divisor:1,
offset:4,stride:4};za={divisor:1,offset:16,stride:8};ka={divisor:1,offset:24,stride:8};l={divisor:1,offset:0,stride:8};return{batch:function(a,c){var n,p,r,v,u,y;n=R.next;n!==R.cur&&(n?t.bindFramebuffer(36160,n.framebuffer):t.bindFramebuffer(36160,null),R.cur=n);if(qa.dirty){var C,D,w,I,F,B,L,fa,sa,ja,oa,ub,Aa,Oa,na,Qd,Rd,Zd,ob,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a;C=Z.dither;C!==qa.dither&&(C?t.enable(3024):t.disable(3024),qa.dither=C);D=Z.depth_func;D!==qa.depth_func&&(t.depthFunc(D),qa.depth_func=D);
w=vd[0];I=vd[1];if(w!==xc[0]||I!==xc[1])t.depthRange(w,I),xc[0]=w,xc[1]=I;F=Z.depth_mask;F!==qa.depth_mask&&(t.depthMask(F),qa.depth_mask=F);B=gc[0];L=gc[1];fa=gc[2];sa=gc[3];if(B!==rc[0]||L!==rc[1]||fa!==rc[2]||sa!==rc[3])t.colorMask(B,L,fa,sa),rc[0]=B,rc[1]=L,rc[2]=fa,rc[3]=sa;ja=Z.frontFace;ja!==qa.frontFace&&(t.frontFace(ja),qa.frontFace=ja);oa=Z.lineWidth;oa!==qa.lineWidth&&(t.lineWidth(oa),qa.lineWidth=oa);ub=Z.polygonOffset_enable;ub!==qa.polygonOffset_enable&&(ub?t.enable(32823):t.disable(32823),
qa.polygonOffset_enable=ub);Aa=W[0];Oa=W[1];if(Aa!==K[0]||Oa!==K[1])t.polygonOffset(Aa,Oa),K[0]=Aa,K[1]=Oa;na=Z.sample_alpha;na!==qa.sample_alpha&&(na?t.enable(32926):t.disable(32926),qa.sample_alpha=na);Qd=Z.sample_enable;Qd!==qa.sample_enable&&(Qd?t.enable(32928):t.disable(32928),qa.sample_enable=Qd);Rd=ia[0];Zd=ia[1];if(Rd!==Da[0]||Zd!==Da[1])t.sampleCoverage(Rd,Zd),Da[0]=Rd,Da[1]=Zd;ob=Z.stencil_mask;ob!==qa.stencil_mask&&(t.stencilMask(ob),qa.stencil_mask=ob);qd=Ac[0];ld=Ac[1];wd=Ac[2];if(qd!==
E[0]||ld!==E[1]||wd!==E[2])t.stencilFunc(qd,ld,wd),E[0]=qd,E[1]=ld,E[2]=wd;od=ta[0];gd=ta[1];Bc=ta[2];rd=ta[3];if(od!==V[0]||gd!==V[1]||Bc!==V[2]||rd!==V[3])t.stencilOpSeparate(od,gd,Bc,rd),V[0]=od,V[1]=gd,V[2]=Bc,V[3]=rd;Rc=z[0];Mc=z[1];sc=z[2];$a=z[3];if(Rc!==ga[0]||Mc!==ga[1]||sc!==ga[2]||$a!==ga[3])t.stencilOpSeparate(Rc,Mc,sc,$a),ga[0]=Rc,ga[1]=Mc,ga[2]=sc,ga[3]=$a}t.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;t.enable(3042);qa.blend_enable=!0;t.blendEquationSeparate(32774,32774);ca[0]=32774;
ca[1]=32774;t.blendFuncSeparate(770,771,773,1);fc[0]=770;fc[1]=771;fc[2]=773;fc[3]=1;t.enable(2884);qa.cull_enable=!0;t.cullFace(1029);qa.cull_face=1029;t.enable(3089);qa.scissor_enable=!0;t.disable(2960);qa.stencil_enable=!1;if(p=qa.profile)r=performance.now(),Q.count+=c;t.useProgram(P.program);v=Ja.angle_instanced_arrays;var lc,Eb,qc,Ta,Kc;ac.setVAO(null);lc=da.location;Eb=N[lc];Eb.buffer||t.enableVertexAttribArray(lc);if(5126!==Eb.type||1!==Eb.size||Eb.buffer!==e||!1!==Eb.normalized||0!==Eb.offset||
8!==Eb.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(lc,1,5126,!1,8,0),Eb.type=5126,Eb.size=1,Eb.buffer=e,Eb.normalized=!1,Eb.offset=0,Eb.stride=8;0!==Eb.divisor&&(v.vertexAttribDivisorANGLE(lc,0),Eb.divisor=0);qc=b.location;Ta=N[qc];Ta.buffer||t.enableVertexAttribArray(qc);if(5126!==Ta.type||1!==Ta.size||Ta.buffer!==d||!1!==Ta.normalized||4!==Ta.offset||8!==Ta.stride)t.bindBuffer(34962,d.buffer),t.vertexAttribPointer(qc,1,5126,!1,8,4),Ta.type=5126,Ta.size=1,Ta.buffer=d,Ta.normalized=
!1,Ta.offset=4,Ta.stride=8;0!==Ta.divisor&&(v.vertexAttribDivisorANGLE(qc,0),Ta.divisor=0);(Kc=J.elements)?t.bindBuffer(34963,Kc.buffer.buffer):ac.currentVAO&&(Kc=Zb.getElements(ac.currentVAO.elements))&&t.bindBuffer(34963,Kc.buffer.buffer);for(u=0;u<c;++u){y=a[u];var cc,$c,bb,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,rf,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,
Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Wd,le,Yc,kf,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,of,ce,be,$d,Ee,Xd,fe,zc;cc=y.viewport;$c=cc.x|0;bb=cc.y|0;md="width"in cc?cc.width|0:T.framebufferWidth-$c;Cc="height"in cc?cc.height|0:T.framebufferHeight-bb;Yb=T.viewportWidth;T.viewportWidth=md;Hc=T.viewportHeight;T.viewportHeight=Cc;t.viewport($c,bb,md,Cc);ma[0]=$c;ma[1]=bb;ma[2]=md;ma[3]=Cc;(Hb=va.call(this,T,y,u))?t.enable(2929):
t.disable(2929);qa.depth_enable=Hb;La=y.viewport;vb=La.x|0;Xa=La.y|0;Ea="width"in La?La.width|0:T.framebufferWidth-vb;sd="height"in La?La.height|0:T.framebufferHeight-Xa;t.scissor(vb,Xa,Ea,sd);Vc[0]=vb;Vc[1]=Xa;Vc[2]=Ea;Vc[3]=sd;ba.buffer=y.positionBuffer;gb=!1;Sa=null;Wb=0;cb=!1;Sb=tc=0;De=1;bc=0;Tb=5126;pb=Ma=Ub=td=0;ha(ba)?(gb=!0,Sa=M.createStream(34962,ba),Tb=Sa.dtype):(Sa=M.getBuffer(ba))?Tb=Sa.dtype:"constant"in ba?(De=2,"number"===typeof ba.constant?(Ub=ba.constant,Ma=pb=td=0):(Ub=0<ba.constant.length?
ba.constant[0]:0,Ma=1<ba.constant.length?ba.constant[1]:0,pb=2<ba.constant.length?ba.constant[2]:0,td=3<ba.constant.length?ba.constant[3]:0)):(Sa=ha(ba.buffer)?M.createStream(34962,ba.buffer):M.getBuffer(ba.buffer),Tb="type"in ba?G[ba.type]:Sa.dtype,cb=!!ba.normalized,Sb=ba.size|0,tc=ba.offset|0,bc=ba.stride|0,Wb=ba.divisor|0);wb=A.location;hb=N[wb];if(1===De){hb.buffer||t.enableVertexAttribArray(wb);Pa=Sb||2;if(hb.type!==Tb||hb.size!==Pa||hb.buffer!==Sa||hb.normalized!==cb||hb.offset!==tc||hb.stride!==
bc)t.bindBuffer(34962,Sa.buffer),t.vertexAttribPointer(wb,Pa,Tb,cb,bc,tc),hb.type=Tb,hb.size=Pa,hb.buffer=Sa,hb.normalized=cb,hb.offset=tc,hb.stride=bc;hb.divisor!==Wb&&(v.vertexAttribDivisorANGLE(wb,Wb),hb.divisor=Wb)}else if(hb.buffer&&(t.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==Ub||hb.y!==Ma||hb.z!==pb||hb.w!==td)t.vertexAttrib4f(wb,Ub,Ma,pb,td),hb.x=Ub,hb.y=Ma,hb.z=pb,hb.w=td;za.buffer=y.positionBuffer;pc=!1;Jb=null;pd=0;db=!1;Ic=nc=0;ec=1;kb=0;lb=5126;Ua=wa=qb=ra=0;ha(za)?(pc=!0,Jb=
M.createStream(34962,za),lb=Jb.dtype):(Jb=M.getBuffer(za))?lb=Jb.dtype:"constant"in za?(ec=2,"number"===typeof za.constant?(qb=za.constant,wa=Ua=ra=0):(qb=0<za.constant.length?za.constant[0]:0,wa=1<za.constant.length?za.constant[1]:0,Ua=2<za.constant.length?za.constant[2]:0,ra=3<za.constant.length?za.constant[3]:0)):(Jb=ha(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),lb="type"in za?G[za.type]:Jb.dtype,db=!!za.normalized,Ic=za.size|0,nc=za.offset|0,kb=za.stride|0,pd=za.divisor|
0);ab=aa.location;Ba=N[ab];if(1===ec){Ba.buffer||t.enableVertexAttribArray(ab);eb=Ic||2;if(Ba.type!==lb||Ba.size!==eb||Ba.buffer!==Jb||Ba.normalized!==db||Ba.offset!==nc||Ba.stride!==kb)t.bindBuffer(34962,Jb.buffer),t.vertexAttribPointer(ab,eb,lb,db,kb,nc),Ba.type=lb,Ba.size=eb,Ba.buffer=Jb,Ba.normalized=db,Ba.offset=nc,Ba.stride=kb;Ba.divisor!==pd&&(v.vertexAttribDivisorANGLE(ab,pd),Ba.divisor=pd)}else if(Ba.buffer&&(t.disableVertexAttribArray(ab),Ba.buffer=null),Ba.x!==qb||Ba.y!==wa||Ba.z!==Ua||
Ba.w!==ra)t.vertexAttrib4f(ab,qb,wa,Ua,ra),Ba.x=qb,Ba.y=wa,Ba.z=Ua,Ba.w=ra;ka.buffer=y.positionBuffer;Ia=!1;Cb=null;Bb=0;Ra=!1;Kb=Lc=0;Mb=1;Vb=0;xa=5126;fb=Pb=Ka=rf=0;ha(ka)?(Ia=!0,Cb=M.createStream(34962,ka),xa=Cb.dtype):(Cb=M.getBuffer(ka))?xa=Cb.dtype:"constant"in ka?(Mb=2,"number"===typeof ka.constant?(Ka=ka.constant,Pb=fb=rf=0):(Ka=0<ka.constant.length?ka.constant[0]:0,Pb=1<ka.constant.length?ka.constant[1]:0,fb=2<ka.constant.length?ka.constant[2]:0,rf=3<ka.constant.length?ka.constant[3]:0)):
(Cb=ha(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),xa="type"in ka?G[ka.type]:Cb.dtype,Ra=!!ka.normalized,Kb=ka.size|0,Lc=ka.offset|0,Vb=ka.stride|0,Bb=ka.divisor|0);ib=pa.location;ya=N[ib];if(1===Mb){ya.buffer||t.enableVertexAttribArray(ib);hc=Kb||2;if(ya.type!==xa||ya.size!==hc||ya.buffer!==Cb||ya.normalized!==Ra||ya.offset!==Lc||ya.stride!==Vb)t.bindBuffer(34962,Cb.buffer),t.vertexAttribPointer(ib,hc,xa,Ra,Vb,Lc),ya.type=xa,ya.size=hc,ya.buffer=Cb,ya.normalized=Ra,ya.offset=
Lc,ya.stride=Vb;ya.divisor!==Bb&&(v.vertexAttribDivisorANGLE(ib,Bb),ya.divisor=Bb)}else if(ya.buffer&&(t.disableVertexAttribArray(ib),ya.buffer=null),ya.x!==Ka||ya.y!==Pb||ya.z!==fb||ya.w!==rf)t.vertexAttrib4f(ib,Ka,Pb,fb,rf),ya.x=Ka,ya.y=Pb,ya.z=fb,ya.w=rf;l.buffer=y.positionBuffer;Fa=!1;rb=null;sb=0;Ya=!1;oc=Za=0;cd=1;vc=0;Wa=5126;yc=Ga=dd=Nb=0;ha(l)?(Fa=!0,rb=M.createStream(34962,l),Wa=rb.dtype):(rb=M.getBuffer(l))?Wa=rb.dtype:"constant"in l?(cd=2,"number"===typeof l.constant?(dd=l.constant,Ga=
yc=Nb=0):(dd=0<l.constant.length?l.constant[0]:0,Ga=1<l.constant.length?l.constant[1]:0,yc=2<l.constant.length?l.constant[2]:0,Nb=3<l.constant.length?l.constant[3]:0)):(rb=ha(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),Wa="type"in l?G[l.type]:rb.dtype,Ya=!!l.normalized,oc=l.size|0,Za=l.offset|0,vc=l.stride|0,sb=l.divisor|0);Qa=jb.location;Ca=N[Qa];if(1===cd){Ca.buffer||t.enableVertexAttribArray(Qa);mb=oc||2;if(Ca.type!==Wa||Ca.size!==mb||Ca.buffer!==rb||Ca.normalized!==Ya||Ca.offset!==
Za||Ca.stride!==vc)t.bindBuffer(34962,rb.buffer),t.vertexAttribPointer(Qa,mb,Wa,Ya,vc,Za),Ca.type=Wa,Ca.size=mb,Ca.buffer=rb,Ca.normalized=Ya,Ca.offset=Za,Ca.stride=vc;Ca.divisor!==sb&&(v.vertexAttribDivisorANGLE(Qa,sb),Ca.divisor=sb)}else if(Ca.buffer&&(t.disableVertexAttribArray(Qa),Ca.buffer=null),Ca.x!==dd||Ca.y!==Ga||Ca.z!==yc||Ca.w!==Nb)t.vertexAttrib4f(Qa,dd,Ga,yc,Nb),Ca.x=dd,Ca.y=Ga,Ca.z=yc,Ca.w=Nb;x.buffer=y.colorBuffer;xb=!1;Db=null;tb=0;wc=!1;xd=yb=0;uc=1;Hd=0;Nc=5126;dc=Xb=ed=id=0;ha(x)?
(xb=!0,Db=M.createStream(34962,x),Nc=Db.dtype):(Db=M.getBuffer(x))?Nc=Db.dtype:"constant"in x?(uc=2,"number"===typeof x.constant?(ed=x.constant,Xb=dc=id=0):(ed=0<x.constant.length?x.constant[0]:0,Xb=1<x.constant.length?x.constant[1]:0,dc=2<x.constant.length?x.constant[2]:0,id=3<x.constant.length?x.constant[3]:0)):(Db=ha(x.buffer)?M.createStream(34962,x.buffer):M.getBuffer(x.buffer),Nc="type"in x?G[x.type]:Db.dtype,wc=!!x.normalized,xd=x.size|0,yb=x.offset|0,Hd=x.stride|0,tb=x.divisor|0);Qb=f.location;
Ha=N[Qb];if(1===uc){Ha.buffer||t.enableVertexAttribArray(Qb);$b=xd||4;if(Ha.type!==Nc||Ha.size!==$b||Ha.buffer!==Db||Ha.normalized!==wc||Ha.offset!==yb||Ha.stride!==Hd)t.bindBuffer(34962,Db.buffer),t.vertexAttribPointer(Qb,$b,Nc,wc,Hd,yb),Ha.type=Nc,Ha.size=$b,Ha.buffer=Db,Ha.normalized=wc,Ha.offset=yb,Ha.stride=Hd;Ha.divisor!==tb&&(v.vertexAttribDivisorANGLE(Qb,tb),Ha.divisor=tb)}else if(Ha.buffer&&(t.disableVertexAttribArray(Qb),Ha.buffer=null),Ha.x!==ed||Ha.y!==Xb||Ha.z!==dc||Ha.w!==id)t.vertexAttrib4f(Qb,
ed,Xb,dc,id),Ha.x=ed,Ha.y=Xb,Ha.z=dc,Ha.w=id;O.buffer=y.colorBuffer;nb=!1;zb=null;Ob=0;Rb=!1;kc=ic=0;Sc=1;Dc=0;Ec=5126;Tc=ad=Oc=Fc=0;ha(O)?(nb=!0,zb=M.createStream(34962,O),Ec=zb.dtype):(zb=M.getBuffer(O))?Ec=zb.dtype:"constant"in O?(Sc=2,"number"===typeof O.constant?(Oc=O.constant,ad=Tc=Fc=0):(Oc=0<O.constant.length?O.constant[0]:0,ad=1<O.constant.length?O.constant[1]:0,Tc=2<O.constant.length?O.constant[2]:0,Fc=3<O.constant.length?O.constant[3]:0)):(zb=ha(O.buffer)?M.createStream(34962,O.buffer):
M.getBuffer(O.buffer),Ec="type"in O?G[O.type]:zb.dtype,Rb=!!O.normalized,kc=O.size|0,ic=O.offset|0,Dc=O.stride|0,Ob=O.divisor|0);Pc=S.location;Lb=N[Pc];if(1===Sc){Lb.buffer||t.enableVertexAttribArray(Pc);Fb=kc||4;if(Lb.type!==Ec||Lb.size!==Fb||Lb.buffer!==zb||Lb.normalized!==Rb||Lb.offset!==ic||Lb.stride!==Dc)t.bindBuffer(34962,zb.buffer),t.vertexAttribPointer(Pc,Fb,Ec,Rb,Dc,ic),Lb.type=Ec,Lb.size=Fb,Lb.buffer=zb,Lb.normalized=Rb,Lb.offset=ic,Lb.stride=Dc;Lb.divisor!==Ob&&(v.vertexAttribDivisorANGLE(Pc,
Ob),Lb.divisor=Ob)}else if(Lb.buffer&&(t.disableVertexAttribArray(Pc),Lb.buffer=null),Lb.x!==Oc||Lb.y!==ad||Lb.z!==Tc||Lb.w!==Fc)t.vertexAttrib4f(Pc,Oc,ad,Tc,Fc),Lb.x=Oc,Lb.y=ad,Lb.z=Tc,Lb.w=Fc;Qc=y.scale;Jc=Qc[0];jc=Qc[1];u&&Uc===Jc&&Xc===jc||(Uc=Jc,Xc=jc,t.uniform2f(Gb.location,Jc,jc));fd=y.translate;Wd=fd[0];Yc=fd[1];u&&le===Wd&&kf===Yc||(le=Wd,kf=Yc,t.uniform2f(Na.location,Wd,Yc));he=y.thickness;u&&re===he||(re=he,t.uniform1f(ua.location,he));pe=y.depth;u&&Sd===pe||(Sd=pe,t.uniform1f(H.location,
pe));Ed=h.call(this,T,y,u);Cd=Ed[0];Gc=Ed[1];jd=Ed[2];kd=Ed[3];u&&hd===Cd&&nd===Gc&&Zc===jd&&Ad===kd||(hd=Cd,nd=Gc,Zc=jd,Ad=kd,t.uniform4f(Y.location,Cd,Gc,jd,kd));Bd=y.miterLimit;u&&ue===Bd||(ue=Bd,t.uniform1f(k.location,Bd));we=g.call(this,T,y,u);u&&of===we||(of=we,t.uniform1f(X.location,we));ce=y.dashLength;u&&be===ce||(be=ce,t.uniform1f(m.location,ce));$d=y.opacity;u&&Ee===$d||(Ee=$d,t.uniform1f(Va.location,$d));(Xd=y.dashTexture)&&"framebuffer"===Xd._reglType&&(Xd=Xd.color[0]);fe=Xd._texture;
t.uniform1i(la.location,fe.bind());zc=y.count;0<zc?Kc?v.drawElementsInstancedANGLE(5,4,Kc.type,0<<(Kc.type-5121>>1),zc):v.drawArraysInstancedANGLE(5,0,4,zc):0>zc&&(Kc?t.drawElements(5,4,Kc.type,0<<(Kc.type-5121>>1)):t.drawArrays(5,0,4));T.viewportWidth=Yb;T.viewportHeight=Hc;gb&&M.destroyStream(Sa);pc&&M.destroyStream(Jb);Ia&&M.destroyStream(Cb);Fa&&M.destroyStream(rb);xb&&M.destroyStream(Db);nb&&M.destroyStream(zb);fe.unbind()}qa.dirty=!0;ac.setVAO(null);p&&(Q.cpuTime+=performance.now()-r)},draw:function(c){var g,
h,n,v,u,C,D,w,I,F,B,L,fa,P,sa,ja,va,oa,ub,Aa,Oa,na,Qd,Rd,ob,bb,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,Od,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,rf,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd;g=R.next;g!==R.cur&&(g?t.bindFramebuffer(36160,g.framebuffer):t.bindFramebuffer(36160,null),R.cur=g);if(qa.dirty){var uc,Hd,Nc,id,ed,Xb,dc,Qb,
Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc;uc=Z.dither;uc!==qa.dither&&(uc?t.enable(3024):t.disable(3024),qa.dither=uc);Hd=Z.depth_func;Hd!==qa.depth_func&&(t.depthFunc(Hd),qa.depth_func=Hd);Nc=vd[0];id=vd[1];if(Nc!==xc[0]||id!==xc[1])t.depthRange(Nc,id),xc[0]=Nc,xc[1]=id;ed=Z.depth_mask;ed!==qa.depth_mask&&(t.depthMask(ed),qa.depth_mask=ed);Xb=gc[0];dc=gc[1];Qb=gc[2];Ha=gc[3];if(Xb!==rc[0]||dc!==rc[1]||Qb!==rc[2]||Ha!==rc[3])t.colorMask(Xb,dc,Qb,Ha),rc[0]=Xb,rc[1]=dc,rc[2]=
Qb,rc[3]=Ha;$b=Z.frontFace;$b!==qa.frontFace&&(t.frontFace($b),qa.frontFace=$b);nb=Z.lineWidth;nb!==qa.lineWidth&&(t.lineWidth(nb),qa.lineWidth=nb);zb=Z.polygonOffset_enable;zb!==qa.polygonOffset_enable&&(zb?t.enable(32823):t.disable(32823),qa.polygonOffset_enable=zb);Ob=W[0];Rb=W[1];if(Ob!==K[0]||Rb!==K[1])t.polygonOffset(Ob,Rb),K[0]=Ob,K[1]=Rb;ic=Z.sample_alpha;ic!==qa.sample_alpha&&(ic?t.enable(32926):t.disable(32926),qa.sample_alpha=ic);kc=Z.sample_enable;kc!==qa.sample_enable&&(kc?t.enable(32928):
t.disable(32928),qa.sample_enable=kc);Sc=ia[0];Dc=ia[1];if(Sc!==Da[0]||Dc!==Da[1])t.sampleCoverage(Sc,Dc),Da[0]=Sc,Da[1]=Dc;Ec=Z.stencil_mask;Ec!==qa.stencil_mask&&(t.stencilMask(Ec),qa.stencil_mask=Ec);Fc=Ac[0];Oc=Ac[1];ad=Ac[2];if(Fc!==E[0]||Oc!==E[1]||ad!==E[2])t.stencilFunc(Fc,Oc,ad),E[0]=Fc,E[1]=Oc,E[2]=ad;Tc=ta[0];Pc=ta[1];Lb=ta[2];Fb=ta[3];if(Tc!==V[0]||Pc!==V[1]||Lb!==V[2]||Fb!==V[3])t.stencilOpSeparate(Tc,Pc,Lb,Fb),V[0]=Tc,V[1]=Pc,V[2]=Lb,V[3]=Fb;Qc=z[0];Jc=z[1];Uc=z[2];jc=z[3];if(Qc!==ga[0]||
Jc!==ga[1]||Uc!==ga[2]||jc!==ga[3])t.stencilOpSeparate(Qc,Jc,Uc,jc),ga[0]=Qc,ga[1]=Jc,ga[2]=Uc,ga[3]=jc}h=c.viewport;n=h.x|0;v=h.y|0;u="width"in h?h.width|0:T.framebufferWidth-n;C="height"in h?h.height|0:T.framebufferHeight-v;D=T.viewportWidth;T.viewportWidth=u;w=T.viewportHeight;T.viewportHeight=C;t.viewport(n,v,u,C);ma[0]=n;ma[1]=v;ma[2]=u;ma[3]=C;t.blendColor(0,0,0,0);U[0]=0;U[1]=0;U[2]=0;U[3]=0;t.enable(3042);qa.blend_enable=!0;t.blendEquationSeparate(32774,32774);ca[0]=32774;ca[1]=32774;t.blendFuncSeparate(770,
771,773,1);fc[0]=770;fc[1]=771;fc[2]=773;fc[3]=1;t.enable(2884);qa.cull_enable=!0;t.cullFace(1029);qa.cull_face=1029;(I=p.call(this,T,c,0))?t.enable(2929):t.disable(2929);qa.depth_enable=I;F=c.viewport;B=F.x|0;L=F.y|0;fa="width"in F?F.width|0:T.framebufferWidth-B;P="height"in F?F.height|0:T.framebufferHeight-L;t.scissor(B,L,fa,P);Vc[0]=B;Vc[1]=L;Vc[2]=fa;Vc[3]=P;t.enable(3089);qa.scissor_enable=!0;t.disable(2960);qa.stencil_enable=!1;if(sa=qa.profile)ja=performance.now(),Q.count++;t.useProgram(y.program);
va=Ja.angle_instanced_arrays;ac.setVAO(null);ba.buffer=c.positionBuffer;oa=!1;ub=null;Aa=0;Oa=!1;Qd=na=0;Rd=1;ob=0;bb=5126;od=wd=ld=qd=0;ha(ba)?(oa=!0,ub=M.createStream(34962,ba),bb=ub.dtype):(ub=M.getBuffer(ba))?bb=ub.dtype:"constant"in ba?(Rd=2,"number"===typeof ba.constant?(ld=ba.constant,wd=od=qd=0):(ld=0<ba.constant.length?ba.constant[0]:0,wd=1<ba.constant.length?ba.constant[1]:0,od=2<ba.constant.length?ba.constant[2]:0,qd=3<ba.constant.length?ba.constant[3]:0)):(ub=ha(ba.buffer)?M.createStream(34962,
ba.buffer):M.getBuffer(ba.buffer),bb="type"in ba?G[ba.type]:ub.dtype,Oa=!!ba.normalized,Qd=ba.size|0,na=ba.offset|0,ob=ba.stride|0,Aa=ba.divisor|0);gd=A.location;Bc=N[gd];if(1===Rd){Bc.buffer||t.enableVertexAttribArray(gd);rd=Qd||2;if(Bc.type!==bb||Bc.size!==rd||Bc.buffer!==ub||Bc.normalized!==Oa||Bc.offset!==na||Bc.stride!==ob)t.bindBuffer(34962,ub.buffer),t.vertexAttribPointer(gd,rd,bb,Oa,ob,na),Bc.type=bb,Bc.size=rd,Bc.buffer=ub,Bc.normalized=Oa,Bc.offset=na,Bc.stride=ob;Bc.divisor!==Aa&&(va.vertexAttribDivisorANGLE(gd,
Aa),Bc.divisor=Aa)}else if(Bc.buffer&&(t.disableVertexAttribArray(gd),Bc.buffer=null),Bc.x!==ld||Bc.y!==wd||Bc.z!==od||Bc.w!==qd)t.vertexAttrib4f(gd,ld,wd,od,qd),Bc.x=ld,Bc.y=wd,Bc.z=od,Bc.w=qd;za.buffer=c.positionBuffer;Rc=!1;Mc=null;sc=0;$a=!1;Eb=lc=0;qc=1;Ta=0;Kc=5126;md=Od=$c=cc=0;ha(za)?(Rc=!0,Mc=M.createStream(34962,za),Kc=Mc.dtype):(Mc=M.getBuffer(za))?Kc=Mc.dtype:"constant"in za?(qc=2,"number"===typeof za.constant?($c=za.constant,Od=md=cc=0):($c=0<za.constant.length?za.constant[0]:0,Od=1<
za.constant.length?za.constant[1]:0,md=2<za.constant.length?za.constant[2]:0,cc=3<za.constant.length?za.constant[3]:0)):(Mc=ha(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),Kc="type"in za?G[za.type]:Mc.dtype,$a=!!za.normalized,Eb=za.size|0,lc=za.offset|0,Ta=za.stride|0,sc=za.divisor|0);Cc=aa.location;Yb=N[Cc];if(1===qc){Yb.buffer||t.enableVertexAttribArray(Cc);Hc=Eb||2;if(Yb.type!==Kc||Yb.size!==Hc||Yb.buffer!==Mc||Yb.normalized!==$a||Yb.offset!==lc||Yb.stride!==Ta)t.bindBuffer(34962,
Mc.buffer),t.vertexAttribPointer(Cc,Hc,Kc,$a,Ta,lc),Yb.type=Kc,Yb.size=Hc,Yb.buffer=Mc,Yb.normalized=$a,Yb.offset=lc,Yb.stride=Ta;Yb.divisor!==sc&&(va.vertexAttribDivisorANGLE(Cc,sc),Yb.divisor=sc)}else if(Yb.buffer&&(t.disableVertexAttribArray(Cc),Yb.buffer=null),Yb.x!==$c||Yb.y!==Od||Yb.z!==md||Yb.w!==cc)t.vertexAttrib4f(Cc,$c,Od,md,cc),Yb.x=$c,Yb.y=Od,Yb.z=md,Yb.w=cc;ka.buffer=c.positionBuffer;Hb=!1;La=null;vb=0;Xa=!1;sd=Ea=0;gb=1;Sa=0;Wb=5126;De=Sb=tc=cb=0;ha(ka)?(Hb=!0,La=M.createStream(34962,
ka),Wb=La.dtype):(La=M.getBuffer(ka))?Wb=La.dtype:"constant"in ka?(gb=2,"number"===typeof ka.constant?(tc=ka.constant,Sb=De=cb=0):(tc=0<ka.constant.length?ka.constant[0]:0,Sb=1<ka.constant.length?ka.constant[1]:0,De=2<ka.constant.length?ka.constant[2]:0,cb=3<ka.constant.length?ka.constant[3]:0)):(La=ha(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),Wb="type"in ka?G[ka.type]:La.dtype,Xa=!!ka.normalized,sd=ka.size|0,Ea=ka.offset|0,Sa=ka.stride|0,vb=ka.divisor|0);bc=pa.location;Tb=
N[bc];if(1===gb){Tb.buffer||t.enableVertexAttribArray(bc);td=sd||2;if(Tb.type!==Wb||Tb.size!==td||Tb.buffer!==La||Tb.normalized!==Xa||Tb.offset!==Ea||Tb.stride!==Sa)t.bindBuffer(34962,La.buffer),t.vertexAttribPointer(bc,td,Wb,Xa,Sa,Ea),Tb.type=Wb,Tb.size=td,Tb.buffer=La,Tb.normalized=Xa,Tb.offset=Ea,Tb.stride=Sa;Tb.divisor!==vb&&(va.vertexAttribDivisorANGLE(bc,vb),Tb.divisor=vb)}else if(Tb.buffer&&(t.disableVertexAttribArray(bc),Tb.buffer=null),Tb.x!==tc||Tb.y!==Sb||Tb.z!==De||Tb.w!==cb)t.vertexAttrib4f(bc,
tc,Sb,De,cb),Tb.x=tc,Tb.y=Sb,Tb.z=De,Tb.w=cb;l.buffer=c.positionBuffer;Ub=!1;Ma=null;pb=0;wb=!1;Pa=hb=0;pc=1;Jb=0;pd=5126;ec=Ic=nc=db=0;ha(l)?(Ub=!0,Ma=M.createStream(34962,l),pd=Ma.dtype):(Ma=M.getBuffer(l))?pd=Ma.dtype:"constant"in l?(pc=2,"number"===typeof l.constant?(nc=l.constant,Ic=ec=db=0):(nc=0<l.constant.length?l.constant[0]:0,Ic=1<l.constant.length?l.constant[1]:0,ec=2<l.constant.length?l.constant[2]:0,db=3<l.constant.length?l.constant[3]:0)):(Ma=ha(l.buffer)?M.createStream(34962,l.buffer):
M.getBuffer(l.buffer),pd="type"in l?G[l.type]:Ma.dtype,wb=!!l.normalized,Pa=l.size|0,hb=l.offset|0,Jb=l.stride|0,pb=l.divisor|0);kb=jb.location;lb=N[kb];if(1===pc){lb.buffer||t.enableVertexAttribArray(kb);ra=Pa||2;if(lb.type!==pd||lb.size!==ra||lb.buffer!==Ma||lb.normalized!==wb||lb.offset!==hb||lb.stride!==Jb)t.bindBuffer(34962,Ma.buffer),t.vertexAttribPointer(kb,ra,pd,wb,Jb,hb),lb.type=pd,lb.size=ra,lb.buffer=Ma,lb.normalized=wb,lb.offset=hb,lb.stride=Jb;lb.divisor!==pb&&(va.vertexAttribDivisorANGLE(kb,
pb),lb.divisor=pb)}else if(lb.buffer&&(t.disableVertexAttribArray(kb),lb.buffer=null),lb.x!==nc||lb.y!==Ic||lb.z!==ec||lb.w!==db)t.vertexAttrib4f(kb,nc,Ic,ec,db),lb.x=nc,lb.y=Ic,lb.z=ec,lb.w=db;x.buffer=c.colorBuffer;qb=!1;wa=null;Ua=0;ab=!1;eb=Ba=0;Ia=1;Cb=0;Bb=5126;Mb=Kb=Lc=Ra=0;ha(x)?(qb=!0,wa=M.createStream(34962,x),Bb=wa.dtype):(wa=M.getBuffer(x))?Bb=wa.dtype:"constant"in x?(Ia=2,"number"===typeof x.constant?(Lc=x.constant,Kb=Mb=Ra=0):(Lc=0<x.constant.length?x.constant[0]:0,Kb=1<x.constant.length?
x.constant[1]:0,Mb=2<x.constant.length?x.constant[2]:0,Ra=3<x.constant.length?x.constant[3]:0)):(wa=ha(x.buffer)?M.createStream(34962,x.buffer):M.getBuffer(x.buffer),Bb="type"in x?G[x.type]:wa.dtype,ab=!!x.normalized,eb=x.size|0,Ba=x.offset|0,Cb=x.stride|0,Ua=x.divisor|0);Vb=f.location;xa=N[Vb];if(1===Ia){xa.buffer||t.enableVertexAttribArray(Vb);rf=eb||4;if(xa.type!==Bb||xa.size!==rf||xa.buffer!==wa||xa.normalized!==ab||xa.offset!==Ba||xa.stride!==Cb)t.bindBuffer(34962,wa.buffer),t.vertexAttribPointer(Vb,
rf,Bb,ab,Cb,Ba),xa.type=Bb,xa.size=rf,xa.buffer=wa,xa.normalized=ab,xa.offset=Ba,xa.stride=Cb;xa.divisor!==Ua&&(va.vertexAttribDivisorANGLE(Vb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(t.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Lc||xa.y!==Kb||xa.z!==Mb||xa.w!==Ra)t.vertexAttrib4f(Vb,Lc,Kb,Mb,Ra),xa.x=Lc,xa.y=Kb,xa.z=Mb,xa.w=Ra;O.buffer=c.colorBuffer;Ka=!1;Pb=null;fb=0;ib=!1;hc=ya=0;Fa=1;rb=0;sb=5126;cd=oc=Za=Ya=0;ha(O)?(Ka=!0,Pb=M.createStream(34962,O),sb=Pb.dtype):(Pb=M.getBuffer(O))?sb=
Pb.dtype:"constant"in O?(Fa=2,"number"===typeof O.constant?(Za=O.constant,oc=cd=Ya=0):(Za=0<O.constant.length?O.constant[0]:0,oc=1<O.constant.length?O.constant[1]:0,cd=2<O.constant.length?O.constant[2]:0,Ya=3<O.constant.length?O.constant[3]:0)):(Pb=ha(O.buffer)?M.createStream(34962,O.buffer):M.getBuffer(O.buffer),sb="type"in O?G[O.type]:Pb.dtype,ib=!!O.normalized,hc=O.size|0,ya=O.offset|0,rb=O.stride|0,fb=O.divisor|0);vc=S.location;Wa=N[vc];if(1===Fa){Wa.buffer||t.enableVertexAttribArray(vc);Nb=hc||
4;if(Wa.type!==sb||Wa.size!==Nb||Wa.buffer!==Pb||Wa.normalized!==ib||Wa.offset!==ya||Wa.stride!==rb)t.bindBuffer(34962,Pb.buffer),t.vertexAttribPointer(vc,Nb,sb,ib,rb,ya),Wa.type=sb,Wa.size=Nb,Wa.buffer=Pb,Wa.normalized=ib,Wa.offset=ya,Wa.stride=rb;Wa.divisor!==fb&&(va.vertexAttribDivisorANGLE(vc,fb),Wa.divisor=fb)}else if(Wa.buffer&&(t.disableVertexAttribArray(vc),Wa.buffer=null),Wa.x!==Za||Wa.y!==oc||Wa.z!==cd||Wa.w!==Ya)t.vertexAttrib4f(vc,Za,oc,cd,Ya),Wa.x=Za,Wa.y=oc,Wa.z=cd,Wa.w=Ya;dd=da.location;
Ga=N[dd];Ga.buffer||t.enableVertexAttribArray(dd);if(5126!==Ga.type||1!==Ga.size||Ga.buffer!==e||!1!==Ga.normalized||0!==Ga.offset||8!==Ga.stride)t.bindBuffer(34962,e.buffer),t.vertexAttribPointer(dd,1,5126,!1,8,0),Ga.type=5126,Ga.size=1,Ga.buffer=e,Ga.normalized=!1,Ga.offset=0,Ga.stride=8;0!==Ga.divisor&&(va.vertexAttribDivisorANGLE(dd,0),Ga.divisor=0);yc=b.location;Qa=N[yc];Qa.buffer||t.enableVertexAttribArray(yc);if(5126!==Qa.type||1!==Qa.size||Qa.buffer!==d||!1!==Qa.normalized||4!==Qa.offset||
8!==Qa.stride)t.bindBuffer(34962,d.buffer),t.vertexAttribPointer(yc,1,5126,!1,8,4),Qa.type=5126,Qa.size=1,Qa.buffer=d,Qa.normalized=!1,Qa.offset=4,Qa.stride=8;0!==Qa.divisor&&(va.vertexAttribDivisorANGLE(yc,0),Qa.divisor=0);Ca=c.scale;t.uniform2f(Gb.location,Ca[0],Ca[1]);mb=c.translate;t.uniform2f(Na.location,mb[0],mb[1]);t.uniform1f(ua.location,c.thickness);t.uniform1f(H.location,c.depth);xb=r.call(this,T,c,0);t.uniform4f(Y.location,xb[0],xb[1],xb[2],xb[3]);t.uniform1f(k.location,c.miterLimit);Db=
a.call(this,T,c,0);t.uniform1f(X.location,Db);t.uniform1f(m.location,c.dashLength);t.uniform1f(Va.location,c.opacity);(tb=c.dashTexture)&&"framebuffer"===tb._reglType&&(tb=tb.color[0]);wc=tb._texture;t.uniform1i(la.location,wc.bind());(yb=J.elements)?t.bindBuffer(34963,yb.buffer.buffer):ac.currentVAO&&(yb=Zb.getElements(ac.currentVAO.elements))&&t.bindBuffer(34963,yb.buffer.buffer);xd=c.count;0<xd?yb?va.drawElementsInstancedANGLE(5,4,yb.type,0<<(yb.type-5121>>1),xd):va.drawArraysInstancedANGLE(5,
0,4,xd):0>xd&&(yb?t.drawElements(5,4,yb.type,0<<(yb.type-5121>>1)):t.drawArrays(5,0,4));qa.dirty=!0;ac.setVAO(null);T.viewportWidth=D;T.viewportHeight=w;sa&&(Q.cpuTime+=performance.now()-ja);oa&&M.destroyStream(ub);Rc&&M.destroyStream(Mc);Hb&&M.destroyStream(La);Ub&&M.destroyStream(Ma);qb&&M.destroyStream(wa);Ka&&M.destroyStream(Pb);wc.unbind()},scope:function(b,a,c){var f,g,h,k,m,p,r,t,z,A,y,K,E,W,H,N,S,R,U,P,V,aa,ia,Y,X,ga,ca,va,ta,gc,da,la,ma,Da,$a,vd,Eb,pa,Ta,ua,cc,xc,Vc,fc,Cc,Yb,Hc,Hb,La,vb,
Xa,Ea,rc,gb,Sa,Wb,cb,tc,Sb,Ja,bc,Tb,Na,Ub,Ma,pb,wb,hb,Pa,pc,Jb,Ac,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,jb,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,Zb,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,ac,uc,Va,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Gb,le,Yc,kf,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,of,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,ze,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me,We,
Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,hf,pf,lf,qf,Af,Bf,Ne,ye,mf,nf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf;f=b.viewport;g=f.x|0;h=f.y|0;k="width"in f?f.width|0:T.framebufferWidth-g;m="height"in f?f.height|0:T.framebufferHeight-h;p=T.viewportWidth;T.viewportWidth=k;r=T.viewportHeight;T.viewportHeight=m;t=fa[0];fa[0]=g;z=fa[1];fa[1]=h;A=fa[2];fa[2]=k;y=fa[3];fa[3]=m;K=bb[0];bb[0]=0;E=bb[1];bb[1]=0;W=bb[2];bb[2]=0;H=bb[3];bb[3]=0;N=Z.blend_enable;Z.blend_enable=!0;S=ob[0];ob[0]=32774;R=ob[1];ob[1]=32774;U=oa[0];oa[0]=
770;P=oa[1];oa[1]=771;V=oa[2];oa[2]=773;aa=oa[3];oa[3]=1;ia=Z.cull_enable;Z.cull_enable=!0;Y=Z.cull_face;Z.cull_face=1029;X=u.call(this,T,b,c);ga=Z.depth_enable;Z.depth_enable=X;ca=b.viewport;va=ca.x|0;ta=ca.y|0;gc="width"in ca?ca.width|0:T.framebufferWidth-va;da="height"in ca?ca.height|0:T.framebufferHeight-ta;la=ub[0];ub[0]=va;ma=ub[1];ub[1]=ta;Da=ub[2];ub[2]=gc;$a=ub[3];ub[3]=da;vd=Z.scissor_enable;Z.scissor_enable=!0;Eb=Z.stencil_enable;Z.stencil_enable=!1;if(pa=qa.profile)Ta=performance.now(),
Q.count++;ua=J.offset;J.offset=0;cc=J.count;J.count=4;xc=b.count;Vc=J.instances;J.instances=xc;fc=J.primitive;J.primitive=5;Cc=b.dashLength;Yb=Oa[23];Oa[23]=Cc;Hc=b.dashTexture;Hb=Oa[24];Oa[24]=Hc;La=b.depth;vb=Oa[22];Oa[22]=La;Xa=b.id;Ea=Oa[31];Oa[31]=Xa;rc=b.miterLimit;gb=Oa[32];Oa[32]=rc;Sa=w.call(this,T,b,c);Wb=Oa[33];Oa[33]=Sa;cb=b.opacity;tc=Oa[10];Oa[10]=cb;Sb=T.pixelRatio;Ja=Oa[34];Oa[34]=Sb;bc=b.scale;Tb=Oa[6];Oa[6]=bc;Na=b.scaleFract;Ub=Oa[7];Oa[7]=Na;Ma=b.thickness;pb=Oa[21];Oa[21]=Ma;
wb=b.translate;hb=Oa[8];Oa[8]=wb;Pa=b.translateFract;pc=Oa[9];Oa[9]=Pa;Jb=B.call(this,T,b,c);Ac=Oa[3];Oa[3]=Jb;x.buffer=b.colorBuffer;db=!1;nc=null;Ic=0;ec=!1;lb=kb=0;ra=1;qb=0;wa=5126;eb=Ba=ab=Ua=0;ha(x)?(db=!0,nc=M.createStream(34962,x),wa=nc.dtype):(nc=M.getBuffer(x))?wa=nc.dtype:"constant"in x?(ra=2,"number"===typeof x.constant?(ab=x.constant,Ba=eb=Ua=0):(ab=0<x.constant.length?x.constant[0]:0,Ba=1<x.constant.length?x.constant[1]:0,eb=2<x.constant.length?x.constant[2]:0,Ua=3<x.constant.length?
x.constant[3]:0)):(nc=ha(x.buffer)?M.createStream(34962,x.buffer):M.getBuffer(x.buffer),wa="type"in x?G[x.type]:nc.dtype,ec=!!x.normalized,lb=x.size|0,kb=x.offset|0,qb=x.stride|0,Ic=x.divisor|0);Ia=n.buffer;n.buffer=nc;Cb=n.divisor;n.divisor=Ic;Bb=n.normalized;n.normalized=ec;Ra=n.offset;n.offset=kb;Lc=n.size;n.size=lb;Kb=n.state;n.state=ra;Mb=n.stride;n.stride=qb;Vb=n.type;n.type=wa;xa=n.w;n.w=Ua;jb=n.x;n.x=ab;Ka=n.y;n.y=Ba;Pb=n.z;n.z=eb;ba.buffer=b.positionBuffer;fb=!1;ib=null;ya=0;hc=!1;rb=Fa=
0;sb=1;Ya=0;Za=5126;Wa=vc=cd=oc=0;ha(ba)?(fb=!0,ib=M.createStream(34962,ba),Za=ib.dtype):(ib=M.getBuffer(ba))?Za=ib.dtype:"constant"in ba?(sb=2,"number"===typeof ba.constant?(cd=ba.constant,vc=Wa=oc=0):(cd=0<ba.constant.length?ba.constant[0]:0,vc=1<ba.constant.length?ba.constant[1]:0,Wa=2<ba.constant.length?ba.constant[2]:0,oc=3<ba.constant.length?ba.constant[3]:0)):(ib=ha(ba.buffer)?M.createStream(34962,ba.buffer):M.getBuffer(ba.buffer),Za="type"in ba?G[ba.type]:ib.dtype,hc=!!ba.normalized,rb=ba.size|
0,Fa=ba.offset|0,Ya=ba.stride|0,ya=ba.divisor|0);Nb=I.buffer;I.buffer=ib;Zb=I.divisor;I.divisor=ya;Ga=I.normalized;I.normalized=hc;yc=I.offset;I.offset=Fa;Qa=I.size;I.size=rb;Ca=I.state;I.state=sb;mb=I.stride;I.stride=Ya;xb=I.type;I.type=Za;Db=I.w;I.w=oc;tb=I.x;I.x=cd;wc=I.y;I.y=vc;yb=I.z;I.z=Wa;O.buffer=b.colorBuffer;ac=!1;uc=null;Va=0;Nc=!1;ed=id=0;Xb=1;dc=0;Qb=5126;zb=nb=$b=Ha=0;ha(O)?(ac=!0,uc=M.createStream(34962,O),Qb=uc.dtype):(uc=M.getBuffer(O))?Qb=uc.dtype:"constant"in O?(Xb=2,"number"===
typeof O.constant?($b=O.constant,nb=zb=Ha=0):($b=0<O.constant.length?O.constant[0]:0,nb=1<O.constant.length?O.constant[1]:0,zb=2<O.constant.length?O.constant[2]:0,Ha=3<O.constant.length?O.constant[3]:0)):(uc=ha(O.buffer)?M.createStream(34962,O.buffer):M.getBuffer(O.buffer),Qb="type"in O?G[O.type]:uc.dtype,Nc=!!O.normalized,ed=O.size|0,id=O.offset|0,dc=O.stride|0,Va=O.divisor|0);Ob=v.buffer;v.buffer=uc;Rb=v.divisor;v.divisor=Va;ic=v.normalized;v.normalized=Nc;kc=v.offset;v.offset=id;Sc=v.size;v.size=
ed;Dc=v.state;v.state=Xb;Ec=v.stride;v.stride=dc;Fc=v.type;v.type=Qb;Oc=v.w;v.w=Ha;ad=v.x;v.x=$b;Tc=v.y;v.y=nb;Pc=v.z;v.z=zb;za.buffer=b.positionBuffer;Lb=!1;Fb=null;Qc=0;Jc=!1;jc=Uc=0;Xc=1;fd=0;Gb=5126;he=kf=Yc=le=0;ha(za)?(Lb=!0,Fb=M.createStream(34962,za),Gb=Fb.dtype):(Fb=M.getBuffer(za))?Gb=Fb.dtype:"constant"in za?(Xc=2,"number"===typeof za.constant?(Yc=za.constant,kf=he=le=0):(Yc=0<za.constant.length?za.constant[0]:0,kf=1<za.constant.length?za.constant[1]:0,he=2<za.constant.length?za.constant[2]:
0,le=3<za.constant.length?za.constant[3]:0)):(Fb=ha(za.buffer)?M.createStream(34962,za.buffer):M.getBuffer(za.buffer),Gb="type"in za?G[za.type]:Fb.dtype,Jc=!!za.normalized,jc=za.size|0,Uc=za.offset|0,fd=za.stride|0,Qc=za.divisor|0);re=D.buffer;D.buffer=Fb;pe=D.divisor;D.divisor=Qc;Sd=D.normalized;D.normalized=Jc;Ed=D.offset;D.offset=Uc;Cd=D.size;D.size=jc;hd=D.state;D.state=Xc;Gc=D.stride;D.stride=fd;nd=D.type;D.type=Gb;jd=D.w;D.w=le;Zc=D.x;D.x=Yc;kd=D.y;D.y=kf;Ad=D.z;D.z=he;Bd=L.buffer;L.buffer=
e;ue=L.divisor;L.divisor=0;we=L.normalized;L.normalized=!1;of=L.offset;L.offset=0;ce=L.size;L.size=0;be=L.state;L.state=1;$d=L.stride;L.stride=8;Ee=L.type;L.type=5126;Xd=L.w;L.w=0;fe=L.x;L.x=0;zc=L.y;L.y=0;Wc=L.z;L.z=0;me=C.buffer;C.buffer=d;ie=C.divisor;C.divisor=0;Dd=C.normalized;C.normalized=!1;Id=C.offset;C.offset=4;Jd=C.size;C.size=0;Kd=C.state;C.state=1;ge=C.stride;C.stride=8;se=C.type;C.type=5126;ve=C.w;C.w=0;je=C.x;C.x=0;ze=C.y;C.y=0;Oe=C.z;C.z=0;ka.buffer=b.positionBuffer;Le=!1;ne=null;Ae=
0;Fe=!1;He=Ge=0;Be=1;Fd=0;Pd=5126;zd=Ie=Yd=Ud=0;ha(ka)?(Le=!0,ne=M.createStream(34962,ka),Pd=ne.dtype):(ne=M.getBuffer(ka))?Pd=ne.dtype:"constant"in ka?(Be=2,"number"===typeof ka.constant?(Yd=ka.constant,Ie=zd=Ud=0):(Yd=0<ka.constant.length?ka.constant[0]:0,Ie=1<ka.constant.length?ka.constant[1]:0,zd=2<ka.constant.length?ka.constant[2]:0,Ud=3<ka.constant.length?ka.constant[3]:0)):(ne=ha(ka.buffer)?M.createStream(34962,ka.buffer):M.getBuffer(ka.buffer),Pd="type"in ka?G[ka.type]:ne.dtype,Fe=!!ka.normalized,
He=ka.size|0,Ge=ka.offset|0,Fd=ka.stride|0,Ae=ka.divisor|0);Ld=F.buffer;F.buffer=ne;xe=F.divisor;F.divisor=Ae;Je=F.normalized;F.normalized=Fe;df=F.offset;F.offset=Ge;Xe=F.size;F.size=He;Pe=F.state;F.state=Be;Me=F.stride;F.stride=Fd;We=F.type;F.type=Pd;Te=F.w;F.w=Ud;Qe=F.x;F.x=Yd;Re=F.y;F.y=Ie;Md=F.z;F.z=zd;l.buffer=b.positionBuffer;Td=!1;Se=null;ef=0;jf=!1;ff=af=0;gf=1;hf=0;pf=5126;Bf=Af=qf=lf=0;ha(l)?(Td=!0,Se=M.createStream(34962,l),pf=Se.dtype):(Se=M.getBuffer(l))?pf=Se.dtype:"constant"in l?(gf=
2,"number"===typeof l.constant?(qf=l.constant,Af=Bf=lf=0):(qf=0<l.constant.length?l.constant[0]:0,Af=1<l.constant.length?l.constant[1]:0,Bf=2<l.constant.length?l.constant[2]:0,lf=3<l.constant.length?l.constant[3]:0)):(Se=ha(l.buffer)?M.createStream(34962,l.buffer):M.getBuffer(l.buffer),pf="type"in l?G[l.type]:Se.dtype,jf=!!l.normalized,ff=l.size|0,af=l.offset|0,hf=l.stride|0,ef=l.divisor|0);Ne=na.buffer;na.buffer=Se;ye=na.divisor;na.divisor=ef;mf=na.normalized;na.normalized=jf;nf=na.offset;na.offset=
af;Cf=na.size;na.size=ff;Ff=na.state;na.state=gf;zf=na.stride;na.stride=hf;Df=na.type;na.type=pf;Ef=na.w;na.w=lf;vf=na.x;na.x=qf;wf=na.y;na.y=Af;uf=na.z;na.z=Bf;xf=Aa.vert;Aa.vert=36;yf=Aa.frag;Aa.frag=35;qa.dirty=!0;a(T,b,c);T.viewportWidth=p;T.viewportHeight=r;fa[0]=t;fa[1]=z;fa[2]=A;fa[3]=y;bb[0]=K;bb[1]=E;bb[2]=W;bb[3]=H;Z.blend_enable=N;ob[0]=S;ob[1]=R;oa[0]=U;oa[1]=P;oa[2]=V;oa[3]=aa;Z.cull_enable=ia;Z.cull_face=Y;Z.depth_enable=ga;ub[0]=la;ub[1]=ma;ub[2]=Da;ub[3]=$a;Z.scissor_enable=vd;Z.stencil_enable=
Eb;pa&&(Q.cpuTime+=performance.now()-Ta);J.offset=ua;J.count=cc;J.instances=Vc;J.primitive=fc;Oa[23]=Yb;Oa[24]=Hb;Oa[22]=vb;Oa[31]=Ea;Oa[32]=gb;Oa[33]=Wb;Oa[10]=tc;Oa[34]=Ja;Oa[6]=Tb;Oa[7]=Ub;Oa[21]=pb;Oa[8]=hb;Oa[9]=pc;Oa[3]=Ac;db&&M.destroyStream(nc);n.buffer=Ia;n.divisor=Cb;n.normalized=Bb;n.offset=Ra;n.size=Lc;n.state=Kb;n.stride=Mb;n.type=Vb;n.w=xa;n.x=jb;n.y=Ka;n.z=Pb;fb&&M.destroyStream(ib);I.buffer=Nb;I.divisor=Zb;I.normalized=Ga;I.offset=yc;I.size=Qa;I.state=Ca;I.stride=mb;I.type=xb;I.w=
Db;I.x=tb;I.y=wc;I.z=yb;ac&&M.destroyStream(uc);v.buffer=Ob;v.divisor=Rb;v.normalized=ic;v.offset=kc;v.size=Sc;v.state=Dc;v.stride=Ec;v.type=Fc;v.w=Oc;v.x=ad;v.y=Tc;v.z=Pc;Lb&&M.destroyStream(Fb);D.buffer=re;D.divisor=pe;D.normalized=Sd;D.offset=Ed;D.size=Cd;D.state=hd;D.stride=Gc;D.type=nd;D.w=jd;D.x=Zc;D.y=kd;D.z=Ad;L.buffer=Bd;L.divisor=ue;L.normalized=we;L.offset=of;L.size=ce;L.state=be;L.stride=$d;L.type=Ee;L.w=Xd;L.x=fe;L.y=zc;L.z=Wc;C.buffer=me;C.divisor=ie;C.normalized=Dd;C.offset=Id;C.size=
Jd;C.state=Kd;C.stride=ge;C.type=se;C.w=ve;C.x=je;C.y=ze;C.z=Oe;Le&&M.destroyStream(ne);F.buffer=Ld;F.divisor=xe;F.normalized=Je;F.offset=df;F.size=Xe;F.state=Pe;F.stride=Me;F.type=We;F.w=Te;F.x=Qe;F.y=Re;F.z=Md;Td&&M.destroyStream(Se);na.buffer=Ne;na.divisor=ye;na.normalized=mf;na.offset=nf;na.size=Cf;na.state=Ff;na.stride=zf;na.type=Df;na.w=Ef;na.x=vf;na.y=wf;na.z=uf;Aa.vert=xf;Aa.frag=yf;qa.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(c,
Q,p,y,e,d,r,a,u,w,B,n,I,v,D,L,C,F,na){var P,va,h,g,f,A,S,aa,m,la,H,da,b,k,X,pa,Va,jb,Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa;P=c.attributes;va=c.buffer;h=c.context;g=c.current;f=c.draw;A=c.elements;S=c.extensions;aa=c.framebuffer;m=c.gl;la=c.isBufferArgs;H=c.next;da=c.shader;b=c.uniforms;k=c.vao;X=H.blend_color;pa=g.blend_color;Va=H.blend_equation;jb=g.blend_equation;Gb=H.blend_func;ua=g.blend_func;Na=H.colorMask;Y=g.colorMask;N=H.depth_range;M=g.depth_range;T=H.polygonOffset_offset;
qa=g.polygonOffset_offset;J=H.sample_coverage;Zb=g.sample_coverage;Ja=H.scissor_box;R=g.scissor_box;t=H.stencil_func;ha=g.stencil_func;Z=H.stencil_opBack;Aa=g.stencil_opBack;Oa=H.stencil_opFront;ac=g.stencil_opFront;bb=H.viewport;U=g.viewport;ob={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ca={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(b,a){var c,d,e,p,r,y;c=aa.next;c!==aa.cur&&(c?m.bindFramebuffer(36160,c.framebuffer):m.bindFramebuffer(36160,
null),aa.cur=c);if(g.dirty){var X,da,Vc,Ja,E,z,ga,ta,V,fa,ma,G,x,ba,O,za,ka,l,mc,ea,q,Ib,Ab,bb,Va,Gb,ae,bd,oe,ud,de,qe;X=H.dither;X!==g.dither&&(X?m.enable(3024):m.disable(3024),g.dither=X);da=H.depth_func;da!==g.depth_func&&(m.depthFunc(da),g.depth_func=da);Vc=N[0];Ja=N[1];if(Vc!==M[0]||Ja!==M[1])m.depthRange(Vc,Ja),M[0]=Vc,M[1]=Ja;E=H.depth_mask;E!==g.depth_mask&&(m.depthMask(E),g.depth_mask=E);z=Na[0];ga=Na[1];ta=Na[2];V=Na[3];if(z!==Y[0]||ga!==Y[1]||ta!==Y[2]||V!==Y[3])m.colorMask(z,ga,ta,V),
Y[0]=z,Y[1]=ga,Y[2]=ta,Y[3]=V;fa=H.cull_enable;fa!==g.cull_enable&&(fa?m.enable(2884):m.disable(2884),g.cull_enable=fa);ma=H.cull_face;ma!==g.cull_face&&(m.cullFace(ma),g.cull_face=ma);G=H.frontFace;G!==g.frontFace&&(m.frontFace(G),g.frontFace=G);x=H.lineWidth;x!==g.lineWidth&&(m.lineWidth(x),g.lineWidth=x);ba=H.polygonOffset_enable;ba!==g.polygonOffset_enable&&(ba?m.enable(32823):m.disable(32823),g.polygonOffset_enable=ba);O=T[0];za=T[1];if(O!==qa[0]||za!==qa[1])m.polygonOffset(O,za),qa[0]=O,qa[1]=
za;ka=H.sample_alpha;ka!==g.sample_alpha&&(ka?m.enable(32926):m.disable(32926),g.sample_alpha=ka);l=H.sample_enable;l!==g.sample_enable&&(l?m.enable(32928):m.disable(32928),g.sample_enable=l);mc=J[0];ea=J[1];if(mc!==Zb[0]||ea!==Zb[1])m.sampleCoverage(mc,ea),Zb[0]=mc,Zb[1]=ea;q=H.stencil_mask;q!==g.stencil_mask&&(m.stencilMask(q),g.stencil_mask=q);Ib=t[0];Ab=t[1];bb=t[2];if(Ib!==ha[0]||Ab!==ha[1]||bb!==ha[2])m.stencilFunc(Ib,Ab,bb),ha[0]=Ib,ha[1]=Ab,ha[2]=bb;Va=Oa[0];Gb=Oa[1];ae=Oa[2];bd=Oa[3];if(Va!==
ac[0]||Gb!==ac[1]||ae!==ac[2]||bd!==ac[3])m.stencilOpSeparate(Va,Gb,ae,bd),ac[0]=Va,ac[1]=Gb,ac[2]=ae,ac[3]=bd;oe=Z[0];ud=Z[1];de=Z[2];qe=Z[3];if(oe!==Aa[0]||ud!==Aa[1]||de!==Aa[2]||qe!==Aa[3])m.stencilOpSeparate(oe,ud,de,qe),Aa[0]=oe,Aa[1]=ud,Aa[2]=de,Aa[3]=qe}m.blendColor(0,0,0,0);pa[0]=0;pa[1]=0;pa[2]=0;pa[3]=0;m.enable(3042);g.blend_enable=!0;m.blendEquationSeparate(32774,32774);jb[0]=32774;jb[1]=32774;m.blendFuncSeparate(770,771,773,1);ua[0]=770;ua[1]=771;ua[2]=773;ua[3]=1;m.disable(2929);g.depth_enable=
!1;m.enable(3089);g.scissor_enable=!0;m.disable(2960);g.stencil_enable=!1;if(d=g.profile)e=performance.now(),Q.count+=a;m.useProgram(u.program);p=S.angle_instanced_arrays;var Gd;k.setVAO(null);Gd=f.instances;for(r=0;r<a;++r){y=b[r];var Nd,Vd,ee,Ye,Jf,Ve,yd,Ce,Qd,Rd,Zd,Ke,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,Od,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb;Nd=y.viewport;Vd=Nd.x|
0;ee=Nd.y|0;Ye="width"in Nd?Nd.width|0:h.framebufferWidth-Vd;Jf="height"in Nd?Nd.height|0:h.framebufferHeight-ee;Ve=h.viewportWidth;h.viewportWidth=Ye;yd=h.viewportHeight;h.viewportHeight=Jf;m.viewport(Vd,ee,Ye,Jf);U[0]=Vd;U[1]=ee;U[2]=Ye;U[3]=Jf;Ce=y.viewport;Qd=Ce.x|0;Rd=Ce.y|0;Zd="width"in Ce?Ce.width|0:h.framebufferWidth-Qd;Ke="height"in Ce?Ce.height|0:h.framebufferHeight-Rd;m.scissor(Qd,Rd,Zd,Ke);R[0]=Qd;R[1]=Rd;R[2]=Zd;R[3]=Ke;ca.buffer=y.positionBuffer;qd=!1;ld=null;wd=0;od=!1;Bc=gd=0;rd=1;
Rc=0;Mc=5126;Eb=lc=$a=sc=0;la(ca)?(qd=!0,ld=va.createStream(34962,ca),Mc=ld.dtype):(ld=va.getBuffer(ca))?Mc=ld.dtype:"constant"in ca?(rd=2,"number"===typeof ca.constant?($a=ca.constant,lc=Eb=sc=0):($a=0<ca.constant.length?ca.constant[0]:0,lc=1<ca.constant.length?ca.constant[1]:0,Eb=2<ca.constant.length?ca.constant[2]:0,sc=3<ca.constant.length?ca.constant[3]:0)):(ld=la(ca.buffer)?va.createStream(34962,ca.buffer):va.getBuffer(ca.buffer),Mc="type"in ca?ob[ca.type]:ld.dtype,od=!!ca.normalized,Bc=ca.size|
0,gd=ca.offset|0,Rc=ca.stride|0,wd=ca.divisor|0);qc=v.location;Ta=P[qc];if(1===rd){Ta.buffer||m.enableVertexAttribArray(qc);Kc=Bc||2;if(Ta.type!==Mc||Ta.size!==Kc||Ta.buffer!==ld||Ta.normalized!==od||Ta.offset!==gd||Ta.stride!==Rc)m.bindBuffer(34962,ld.buffer),m.vertexAttribPointer(qc,Kc,Mc,od,Rc,gd),Ta.type=Mc,Ta.size=Kc,Ta.buffer=ld,Ta.normalized=od,Ta.offset=gd,Ta.stride=Rc;Ta.divisor!==wd&&(p.vertexAttribDivisorANGLE(qc,wd),Ta.divisor=wd)}else if(Ta.buffer&&(m.disableVertexAttribArray(qc),Ta.buffer=
null),Ta.x!==$a||Ta.y!==lc||Ta.z!==Eb||Ta.w!==sc)m.vertexAttrib4f(qc,$a,lc,Eb,sc),Ta.x=$a,Ta.y=lc,Ta.z=Eb,Ta.w=sc;oa.buffer=y.positionFractBuffer;cc=!1;$c=null;Od=0;md=!1;Yb=Cc=0;Hc=1;Hb=0;La=5126;sd=Ea=Xa=vb=0;la(oa)?(cc=!0,$c=va.createStream(34962,oa),La=$c.dtype):($c=va.getBuffer(oa))?La=$c.dtype:"constant"in oa?(Hc=2,"number"===typeof oa.constant?(Xa=oa.constant,Ea=sd=vb=0):(Xa=0<oa.constant.length?oa.constant[0]:0,Ea=1<oa.constant.length?oa.constant[1]:0,sd=2<oa.constant.length?oa.constant[2]:
0,vb=3<oa.constant.length?oa.constant[3]:0)):($c=la(oa.buffer)?va.createStream(34962,oa.buffer):va.getBuffer(oa.buffer),La="type"in oa?ob[oa.type]:$c.dtype,md=!!oa.normalized,Yb=oa.size|0,Cc=oa.offset|0,Hb=oa.stride|0,Od=oa.divisor|0);gb=D.location;Sa=P[gb];if(1===Hc){Sa.buffer||m.enableVertexAttribArray(gb);Wb=Yb||2;if(Sa.type!==La||Sa.size!==Wb||Sa.buffer!==$c||Sa.normalized!==md||Sa.offset!==Cc||Sa.stride!==Hb)m.bindBuffer(34962,$c.buffer),m.vertexAttribPointer(gb,Wb,La,md,Hb,Cc),Sa.type=La,Sa.size=
Wb,Sa.buffer=$c,Sa.normalized=md,Sa.offset=Cc,Sa.stride=Hb;Sa.divisor!==Od&&(p.vertexAttribDivisorANGLE(gb,Od),Sa.divisor=Od)}else if(Sa.buffer&&(m.disableVertexAttribArray(gb),Sa.buffer=null),Sa.x!==Xa||Sa.y!==Ea||Sa.z!==sd||Sa.w!==vb)m.vertexAttrib4f(gb,Xa,Ea,sd,vb),Sa.x=Xa,Sa.y=Ea,Sa.z=sd,Sa.w=vb;cb=y.fill;tc=cb[0];De=cb[1];Tb=cb[2];Ub=cb[3];r&&Sb===tc&&bc===De&&td===Tb&&Ma===Ub||(Sb=tc,bc=De,td=Tb,Ma=Ub,m.uniform4f(B.location,tc,De,Tb,Ub));pb=y.scale;wb=pb[0];Pa=pb[1];r&&hb===wb&&pc===Pa||(hb=
wb,pc=Pa,m.uniform2f(L.location,wb,Pa));Jb=y.scaleFract;pd=Jb[0];nc=Jb[1];r&&db===pd&&Ic===nc||(db=pd,Ic=nc,m.uniform2f(C.location,pd,nc));ec=y.translate;kb=ec[0];ra=ec[1];r&&lb===kb&&qb===ra||(lb=kb,qb=ra,m.uniform2f(F.location,kb,ra));wa=y.translateFract;Ua=wa[0];Ba=wa[1];r&&ab===Ua&&eb===Ba||(ab=Ua,eb=Ba,m.uniform2f(na.location,Ua,Ba));Ia=y.id;r&&Cb===Ia||(Cb=Ia,m.uniform1f(n.location,Ia));Bb=y.opacity;r&&Ra===Bb||(Ra=Bb,m.uniform1f(I.location,Bb));Lc=w.call(this,h,y,r);Kb=null;(Kb=(Mb=la(Lc))?
A.createStream(Lc):A.getElements(Lc))&&m.bindBuffer(34963,Kb.buffer.buffer);if(Vb=Kb?Kb.vertCount:-1)0<Gd?Kb?p.drawElementsInstancedANGLE(4,Vb,Kb.type,0<<(Kb.type-5121>>1),Gd):p.drawArraysInstancedANGLE(4,0,Vb,Gd):0>Gd&&(Kb?m.drawElements(4,Vb,Kb.type,0<<(Kb.type-5121>>1)):m.drawArrays(4,0,Vb)),h.viewportWidth=Ve,h.viewportHeight=yd,qd&&va.destroyStream(ld),cc&&va.destroyStream($c),Mb&&A.destroyStream(Kb)}g.dirty=!0;k.setVAO(null);d&&(Q.cpuTime+=performance.now()-e)},draw:function(b){var a,c,d,e,
r,u,w,X,da,ja,Ja,E,z,ga,ta,V,fa,ma,G,x,ba,O;a=aa.next;a!==aa.cur&&(a?m.bindFramebuffer(36160,a.framebuffer):m.bindFramebuffer(36160,null),aa.cur=a);if(g.dirty){a=H.dither;a!==g.dither&&(a?m.enable(3024):m.disable(3024),g.dither=a);a=H.depth_func;a!==g.depth_func&&(m.depthFunc(a),g.depth_func=a);a=N[0];u=N[1];if(a!==M[0]||u!==M[1])m.depthRange(a,u),M[0]=a,M[1]=u;a=H.depth_mask;a!==g.depth_mask&&(m.depthMask(a),g.depth_mask=a);a=Na[0];u=Na[1];c=Na[2];d=Na[3];if(a!==Y[0]||u!==Y[1]||c!==Y[2]||d!==Y[3])m.colorMask(a,
u,c,d),Y[0]=a,Y[1]=u,Y[2]=c,Y[3]=d;a=H.cull_enable;a!==g.cull_enable&&(a?m.enable(2884):m.disable(2884),g.cull_enable=a);a=H.cull_face;a!==g.cull_face&&(m.cullFace(a),g.cull_face=a);a=H.frontFace;a!==g.frontFace&&(m.frontFace(a),g.frontFace=a);a=H.lineWidth;a!==g.lineWidth&&(m.lineWidth(a),g.lineWidth=a);a=H.polygonOffset_enable;a!==g.polygonOffset_enable&&(a?m.enable(32823):m.disable(32823),g.polygonOffset_enable=a);a=T[0];u=T[1];if(a!==qa[0]||u!==qa[1])m.polygonOffset(a,u),qa[0]=a,qa[1]=u;a=H.sample_alpha;
a!==g.sample_alpha&&(a?m.enable(32926):m.disable(32926),g.sample_alpha=a);a=H.sample_enable;a!==g.sample_enable&&(a?m.enable(32928):m.disable(32928),g.sample_enable=a);a=J[0];u=J[1];if(a!==Zb[0]||u!==Zb[1])m.sampleCoverage(a,u),Zb[0]=a,Zb[1]=u;a=H.stencil_mask;a!==g.stencil_mask&&(m.stencilMask(a),g.stencil_mask=a);a=t[0];u=t[1];c=t[2];if(a!==ha[0]||u!==ha[1]||c!==ha[2])m.stencilFunc(a,u,c),ha[0]=a,ha[1]=u,ha[2]=c;a=Oa[0];u=Oa[1];c=Oa[2];d=Oa[3];if(a!==ac[0]||u!==ac[1]||c!==ac[2]||d!==ac[3])m.stencilOpSeparate(a,
u,c,d),ac[0]=a,ac[1]=u,ac[2]=c,ac[3]=d;a=Z[0];u=Z[1];c=Z[2];d=Z[3];if(a!==Aa[0]||u!==Aa[1]||c!==Aa[2]||d!==Aa[3])m.stencilOpSeparate(a,u,c,d),Aa[0]=a,Aa[1]=u,Aa[2]=c,Aa[3]=d}a=b.viewport;c=a.x|0;d=a.y|0;e="width"in a?a.width|0:h.framebufferWidth-c;r="height"in a?a.height|0:h.framebufferHeight-d;a=h.viewportWidth;h.viewportWidth=e;u=h.viewportHeight;h.viewportHeight=r;m.viewport(c,d,e,r);U[0]=c;U[1]=d;U[2]=e;U[3]=r;m.blendColor(0,0,0,0);pa[0]=0;pa[1]=0;pa[2]=0;pa[3]=0;m.enable(3042);g.blend_enable=
!0;m.blendEquationSeparate(32774,32774);jb[0]=32774;jb[1]=32774;m.blendFuncSeparate(770,771,773,1);ua[0]=770;ua[1]=771;ua[2]=773;ua[3]=1;m.disable(2929);g.depth_enable=!1;r=b.viewport;c=r.x|0;d=r.y|0;e="width"in r?r.width|0:h.framebufferWidth-c;r="height"in r?r.height|0:h.framebufferHeight-d;m.scissor(c,d,e,r);R[0]=c;R[1]=d;R[2]=e;R[3]=r;m.enable(3089);g.scissor_enable=!0;m.disable(2960);g.stencil_enable=!1;if(c=g.profile)w=performance.now(),Q.count++;m.useProgram(p.program);d=S.angle_instanced_arrays;
k.setVAO(null);ca.buffer=b.positionBuffer;e=!1;X=0;da=!1;Ja=ja=0;E=1;z=0;ga=5126;ma=fa=V=ta=0;la(ca)?(e=!0,r=va.createStream(34962,ca),ga=r.dtype):(r=va.getBuffer(ca))?ga=r.dtype:"constant"in ca?(E=2,"number"===typeof ca.constant?(V=ca.constant,fa=ma=ta=0):(V=0<ca.constant.length?ca.constant[0]:0,fa=1<ca.constant.length?ca.constant[1]:0,ma=2<ca.constant.length?ca.constant[2]:0,ta=3<ca.constant.length?ca.constant[3]:0)):(r=la(ca.buffer)?va.createStream(34962,ca.buffer):va.getBuffer(ca.buffer),ga="type"in
ca?ob[ca.type]:r.dtype,da=!!ca.normalized,Ja=ca.size|0,ja=ca.offset|0,z=ca.stride|0,X=ca.divisor|0);G=v.location;x=P[G];if(1===E){x.buffer||m.enableVertexAttribArray(G);Ja=Ja||2;if(x.type!==ga||x.size!==Ja||x.buffer!==r||x.normalized!==da||x.offset!==ja||x.stride!==z)m.bindBuffer(34962,r.buffer),m.vertexAttribPointer(G,Ja,ga,da,z,ja),x.type=ga,x.size=Ja,x.buffer=r,x.normalized=da,x.offset=ja,x.stride=z;x.divisor!==X&&(d.vertexAttribDivisorANGLE(G,X),x.divisor=X)}else if(x.buffer&&(m.disableVertexAttribArray(G),
x.buffer=null),x.x!==V||x.y!==fa||x.z!==ma||x.w!==ta)m.vertexAttrib4f(G,V,fa,ma,ta),x.x=V,x.y=fa,x.z=ma,x.w=ta;oa.buffer=b.positionFractBuffer;X=!1;ja=0;z=!1;ta=ga=0;V=1;G=0;x=5126;O=ba=ma=fa=0;la(oa)?(X=!0,da=va.createStream(34962,oa),x=da.dtype):(da=va.getBuffer(oa))?x=da.dtype:"constant"in oa?(V=2,"number"===typeof oa.constant?(ma=oa.constant,ba=O=fa=0):(ma=0<oa.constant.length?oa.constant[0]:0,ba=1<oa.constant.length?oa.constant[1]:0,O=2<oa.constant.length?oa.constant[2]:0,fa=3<oa.constant.length?
oa.constant[3]:0)):(da=la(oa.buffer)?va.createStream(34962,oa.buffer):va.getBuffer(oa.buffer),x="type"in oa?ob[oa.type]:da.dtype,z=!!oa.normalized,ta=oa.size|0,ga=oa.offset|0,G=oa.stride|0,ja=oa.divisor|0);Ja=D.location;E=P[Ja];if(1===V){E.buffer||m.enableVertexAttribArray(Ja);ta=ta||2;if(E.type!==x||E.size!==ta||E.buffer!==da||E.normalized!==z||E.offset!==ga||E.stride!==G)m.bindBuffer(34962,da.buffer),m.vertexAttribPointer(Ja,ta,x,z,G,ga),E.type=x,E.size=ta,E.buffer=da,E.normalized=z,E.offset=ga,
E.stride=G;E.divisor!==ja&&(d.vertexAttribDivisorANGLE(Ja,ja),E.divisor=ja)}else if(E.buffer&&(m.disableVertexAttribArray(Ja),E.buffer=null),E.x!==ma||E.y!==ba||E.z!==O||E.w!==fa)m.vertexAttrib4f(Ja,ma,ba,O,fa),E.x=ma,E.y=ba,E.z=O,E.w=fa;ja=b.fill;m.uniform4f(B.location,ja[0],ja[1],ja[2],ja[3]);ja=b.scale;m.uniform2f(L.location,ja[0],ja[1]);ja=b.scaleFract;m.uniform2f(C.location,ja[0],ja[1]);ja=b.translate;m.uniform2f(F.location,ja[0],ja[1]);ja=b.translateFract;m.uniform2f(na.location,ja[0],ja[1]);
m.uniform1f(n.location,b.id);m.uniform1f(I.location,b.opacity);ja=y.call(this,h,b,0);(ja=(b=la(ja))?A.createStream(ja):A.getElements(ja))&&m.bindBuffer(34963,ja.buffer.buffer);if(z=ja?ja.vertCount:-1)ga=f.instances,0<ga?ja?d.drawElementsInstancedANGLE(4,z,ja.type,0<<(ja.type-5121>>1),ga):d.drawArraysInstancedANGLE(4,0,z,ga):0>ga&&(ja?m.drawElements(4,z,ja.type,0<<(ja.type-5121>>1)):m.drawArrays(4,0,z)),g.dirty=!0,k.setVAO(null),h.viewportWidth=a,h.viewportHeight=u,c&&(Q.cpuTime+=performance.now()-
w),e&&va.destroyStream(r),X&&va.destroyStream(da),b&&A.destroyStream(ja)},scope:function(c,k,m){var n,p,t,u,v,y,C,w,D,E,z,F,I,B,M,L,G,x,ba,N,J,S,l,R,U,q,P,T,aa,ja,Y,Z,ha,sa,qa,pa,ua,Aa,Oa,na,Na,Ye,jb,Zb,yd,ac,Qd,Rd,Zd,Ke,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,Od,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb;n=c.viewport;p=n.x|0;t=n.y|0;u="width"in n?n.width|0:h.framebufferWidth-p;v="height"in n?
n.height|0:h.framebufferHeight-t;y=h.viewportWidth;h.viewportWidth=u;C=h.viewportHeight;h.viewportHeight=v;w=bb[0];bb[0]=p;D=bb[1];bb[1]=t;E=bb[2];bb[2]=u;z=bb[3];bb[3]=v;F=X[0];X[0]=0;I=X[1];X[1]=0;B=X[2];X[2]=0;M=X[3];X[3]=0;L=H.blend_enable;H.blend_enable=!0;G=Va[0];Va[0]=32774;x=Va[1];Va[1]=32774;ba=Gb[0];Gb[0]=770;N=Gb[1];Gb[1]=771;J=Gb[2];Gb[2]=773;S=Gb[3];Gb[3]=1;l=H.depth_enable;H.depth_enable=!1;R=c.viewport;U=R.x|0;q=R.y|0;P="width"in R?R.width|0:h.framebufferWidth-U;T="height"in R?R.height|
0:h.framebufferHeight-q;aa=Ja[0];Ja[0]=U;ja=Ja[1];Ja[1]=q;Y=Ja[2];Ja[2]=P;Z=Ja[3];Ja[3]=T;ha=H.scissor_enable;H.scissor_enable=!0;sa=H.stencil_enable;H.stencil_enable=!1;if(qa=g.profile)pa=performance.now(),Q.count++;ua=e.call(this,h,c,m);Aa=null;Aa=(Oa=la(ua))?A.createStream(ua):A.getElements(ua);na=f.elements;f.elements=Aa;Na=f.offset;f.offset=0;Ye=Aa?Aa.vertCount:-1;jb=f.count;f.count=Ye;Zb=f.primitive;f.primitive=4;yd=c.fill;ac=b[14];b[14]=yd;Qd=c.id;Rd=b[31];b[31]=Qd;Zd=c.opacity;Ke=b[10];b[10]=
Zd;qd=h.pixelRatio;ld=b[34];b[34]=qd;wd=c.scale;od=b[6];b[6]=wd;gd=c.scaleFract;Bc=b[7];b[7]=gd;rd=c.translate;Rc=b[8];b[8]=rd;Mc=c.translateFract;sc=b[9];b[9]=Mc;$a=d.call(this,h,c,m);lc=b[3];b[3]=$a;ca.buffer=c.positionBuffer;Eb=!1;qc=null;Ta=0;Kc=!1;$c=cc=0;Od=1;md=0;Cc=5126;La=Hb=Hc=Yb=0;la(ca)?(Eb=!0,qc=va.createStream(34962,ca),Cc=qc.dtype):(qc=va.getBuffer(ca))?Cc=qc.dtype:"constant"in ca?(Od=2,"number"===typeof ca.constant?(Hc=ca.constant,Hb=La=Yb=0):(Hc=0<ca.constant.length?ca.constant[0]:
0,Hb=1<ca.constant.length?ca.constant[1]:0,La=2<ca.constant.length?ca.constant[2]:0,Yb=3<ca.constant.length?ca.constant[3]:0)):(qc=la(ca.buffer)?va.createStream(34962,ca.buffer):va.getBuffer(ca.buffer),Cc="type"in ca?ob[ca.type]:qc.dtype,Kc=!!ca.normalized,$c=ca.size|0,cc=ca.offset|0,md=ca.stride|0,Ta=ca.divisor|0);vb=r.buffer;r.buffer=qc;Xa=r.divisor;r.divisor=Ta;Ea=r.normalized;r.normalized=Kc;sd=r.offset;r.offset=cc;gb=r.size;r.size=$c;Sa=r.state;r.state=Od;Wb=r.stride;r.stride=md;cb=r.type;r.type=
Cc;tc=r.w;r.w=Yb;Sb=r.x;r.x=Hc;De=r.y;r.y=Hb;bc=r.z;r.z=La;oa.buffer=c.positionFractBuffer;Tb=!1;td=null;Ub=0;Ma=!1;wb=pb=0;hb=1;Pa=0;pc=5126;nc=db=pd=Jb=0;la(oa)?(Tb=!0,td=va.createStream(34962,oa),pc=td.dtype):(td=va.getBuffer(oa))?pc=td.dtype:"constant"in oa?(hb=2,"number"===typeof oa.constant?(pd=oa.constant,db=nc=Jb=0):(pd=0<oa.constant.length?oa.constant[0]:0,db=1<oa.constant.length?oa.constant[1]:0,nc=2<oa.constant.length?oa.constant[2]:0,Jb=3<oa.constant.length?oa.constant[3]:0)):(td=la(oa.buffer)?
va.createStream(34962,oa.buffer):va.getBuffer(oa.buffer),pc="type"in oa?ob[oa.type]:td.dtype,Ma=!!oa.normalized,wb=oa.size|0,pb=oa.offset|0,Pa=oa.stride|0,Ub=oa.divisor|0);Ic=a.buffer;a.buffer=td;ec=a.divisor;a.divisor=Ub;kb=a.normalized;a.normalized=Ma;lb=a.offset;a.offset=pb;ra=a.size;a.size=wb;qb=a.state;a.state=hb;wa=a.stride;a.stride=Pa;Ua=a.type;a.type=pc;ab=a.w;a.w=Jb;Ba=a.x;a.x=pd;eb=a.y;a.y=db;Ia=a.z;a.z=nc;Cb=da.vert;da.vert=42;Bb=da.frag;da.frag=41;g.dirty=!0;k(h,c,m);h.viewportWidth=y;
h.viewportHeight=C;bb[0]=w;bb[1]=D;bb[2]=E;bb[3]=z;X[0]=F;X[1]=I;X[2]=B;X[3]=M;H.blend_enable=L;Va[0]=G;Va[1]=x;Gb[0]=ba;Gb[1]=N;Gb[2]=J;Gb[3]=S;H.depth_enable=l;Ja[0]=aa;Ja[1]=ja;Ja[2]=Y;Ja[3]=Z;H.scissor_enable=ha;H.stencil_enable=sa;qa&&(Q.cpuTime+=performance.now()-pa);Oa&&A.destroyStream(Aa);f.elements=na;f.offset=Na;f.count=jb;f.primitive=Zb;b[14]=ac;b[31]=Rd;b[10]=Ke;b[34]=ld;b[6]=od;b[7]=Bc;b[8]=Rc;b[9]=sc;b[3]=lc;Eb&&va.destroyStream(qc);r.buffer=vb;r.divisor=Xa;r.normalized=Ea;r.offset=
sd;r.size=gb;r.state=Sa;r.stride=Wb;r.type=cb;r.w=tc;r.x=Sb;r.y=De;r.z=bc;Tb&&va.destroyStream(td);a.buffer=Ic;a.divisor=ec;a.normalized=kb;a.offset=lb;a.size=ra;a.state=qb;a.stride=wa;a.type=Ua;a.w=ab;a.x=Ba;a.y=eb;a.z=Ia;da.vert=Cb;da.frag=Bb;g.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,Q,p,y,e,d,r,a,u,w,B,n,I,v,D,L,C,F,na,P,va,h,
g,f,A,S,aa,m,la,H,da,b,k,X,pa,Va,jb,Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa,fc,gc,rc,vd,xc){var W,K,ia,Da,ub,Vc,Ac,E,z,ga,ta,V,fa,ma,G,x,ba,O,za,ka,l,mc,ea,q,Ib,Ab,Ue,ke,te,ae,bd,oe,ud,de,qe,Gd,Nd,Vd,ee;W=c.attributes;K=c.buffer;ia=c.context;Da=c.current;ub=c.draw;Vc=c.elements;Ac=c.extensions;E=c.framebuffer;z=c.gl;ga=c.isBufferArgs;ta=c.next;V=c.shader;fa=c.uniforms;ma=c.vao;G=ta.blend_color;x=Da.blend_color;ba=ta.blend_equation;O=Da.blend_equation;za=ta.blend_func;ka=Da.blend_func;
l=ta.colorMask;mc=Da.colorMask;ea=ta.depth_range;q=Da.depth_range;Ib=ta.polygonOffset_offset;Ab=Da.polygonOffset_offset;Ue=ta.sample_coverage;ke=Da.sample_coverage;te=ta.scissor_box;ae=Da.scissor_box;bd=ta.stencil_func;oe=Da.stencil_func;ud=ta.stencil_opBack;de=Da.stencil_opBack;qe=ta.stencil_opFront;Gd=Da.stencil_opFront;Nd=ta.viewport;Vd=Da.viewport;ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var c,d,e,f,g,h;c=E.next;
c!==E.cur&&(c?z.bindFramebuffer(36160,c.framebuffer):z.bindFramebuffer(36160,null),E.cur=c);if(Da.dirty){var k,m,n,p,r,u,v,y,A,C,G,w,H,D,F,B,I,L,S,P,aa,ja,V,fa,X,da,va,sa,la,za,gb,Sa,na,cb;k=ta.dither;k!==Da.dither&&(k?z.enable(3024):z.disable(3024),Da.dither=k);m=ba[0];n=ba[1];if(m!==O[0]||n!==O[1])z.blendEquationSeparate(m,n),O[0]=m,O[1]=n;p=ta.depth_func;p!==Da.depth_func&&(z.depthFunc(p),Da.depth_func=p);r=ea[0];u=ea[1];if(r!==q[0]||u!==q[1])z.depthRange(r,u),q[0]=r,q[1]=u;v=ta.depth_mask;v!==
Da.depth_mask&&(z.depthMask(v),Da.depth_mask=v);y=l[0];A=l[1];C=l[2];G=l[3];if(y!==mc[0]||A!==mc[1]||C!==mc[2]||G!==mc[3])z.colorMask(y,A,C,G),mc[0]=y,mc[1]=A,mc[2]=C,mc[3]=G;w=ta.cull_enable;w!==Da.cull_enable&&(w?z.enable(2884):z.disable(2884),Da.cull_enable=w);H=ta.cull_face;H!==Da.cull_face&&(z.cullFace(H),Da.cull_face=H);D=ta.frontFace;D!==Da.frontFace&&(z.frontFace(D),Da.frontFace=D);F=ta.lineWidth;F!==Da.lineWidth&&(z.lineWidth(F),Da.lineWidth=F);B=ta.polygonOffset_enable;B!==Da.polygonOffset_enable&&
(B?z.enable(32823):z.disable(32823),Da.polygonOffset_enable=B);I=Ib[0];L=Ib[1];if(I!==Ab[0]||L!==Ab[1])z.polygonOffset(I,L),Ab[0]=I,Ab[1]=L;S=ta.sample_alpha;S!==Da.sample_alpha&&(S?z.enable(32926):z.disable(32926),Da.sample_alpha=S);P=ta.sample_enable;P!==Da.sample_enable&&(P?z.enable(32928):z.disable(32928),Da.sample_enable=P);aa=Ue[0];ja=Ue[1];if(aa!==ke[0]||ja!==ke[1])z.sampleCoverage(aa,ja),ke[0]=aa,ke[1]=ja;V=ta.stencil_mask;V!==Da.stencil_mask&&(z.stencilMask(V),Da.stencil_mask=V);fa=bd[0];
X=bd[1];da=bd[2];if(fa!==oe[0]||X!==oe[1]||da!==oe[2])z.stencilFunc(fa,X,da),oe[0]=fa,oe[1]=X,oe[2]=da;va=qe[0];sa=qe[1];la=qe[2];za=qe[3];if(va!==Gd[0]||sa!==Gd[1]||la!==Gd[2]||za!==Gd[3])z.stencilOpSeparate(va,sa,la,za),Gd[0]=va,Gd[1]=sa,Gd[2]=la,Gd[3]=za;gb=ud[0];Sa=ud[1];na=ud[2];cb=ud[3];if(gb!==de[0]||Sa!==de[1]||na!==de[2]||cb!==de[3])z.stencilOpSeparate(gb,Sa,na,cb),de[0]=gb,de[1]=Sa,de[2]=na,de[3]=cb}z.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;z.enable(3042);Da.blend_enable=!0;z.blendFuncSeparate(770,
771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;z.disable(2929);Da.depth_enable=!1;z.enable(3089);Da.scissor_enable=!0;z.disable(2960);Da.stencil_enable=!1;if(d=Da.profile)e=performance.now(),Q.count+=a;z.useProgram(pa.program);f=Ac.angle_instanced_arrays;var tc;ma.setVAO(null);z.uniform1i(t.location,!1);z.uniform1i(ac.location,qa.bind());tc=ub.instances;for(g=0;g<a;++g){h=b[g];var Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,Nd,Ka,Pb,
fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Wd,le,Yc,kf,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,te,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,Hf,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me,We,Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,hf,pf,lf,qf,Af,Bf,Ne,ye,mf,nf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,Sf,Tf;Sb=h.viewport;De=
Sb.x|0;bc=Sb.y|0;Tb="width"in Sb?Sb.width|0:ia.framebufferWidth-De;td="height"in Sb?Sb.height|0:ia.framebufferHeight-bc;Ub=ia.viewportWidth;ia.viewportWidth=Tb;Ma=ia.viewportHeight;ia.viewportHeight=td;z.viewport(De,bc,Tb,td);Vd[0]=De;Vd[1]=bc;Vd[2]=Tb;Vd[3]=td;pb=h.viewport;wb=pb.x|0;hb=pb.y|0;Pa="width"in pb?pb.width|0:ia.framebufferWidth-wb;pc="height"in pb?pb.height|0:ia.framebufferHeight-hb;z.scissor(wb,hb,Pa,pc);ae[0]=wb;ae[1]=hb;ae[2]=Pa;ae[3]=pc;Jb=Va.call(this,ia,h,g);pd=!1;db=null;nc=0;
Ic=!1;kb=ec=0;lb=1;ra=0;qb=5126;Ba=ab=Ua=wa=0;ga(Jb)?(pd=!0,db=K.createStream(34962,Jb),qb=db.dtype):(db=K.getBuffer(Jb))?qb=db.dtype:"constant"in Jb?(lb=2,"number"===typeof Jb.constant?(Ua=Jb.constant,ab=Ba=wa=0):(Ua=0<Jb.constant.length?Jb.constant[0]:0,ab=1<Jb.constant.length?Jb.constant[1]:0,Ba=2<Jb.constant.length?Jb.constant[2]:0,wa=3<Jb.constant.length?Jb.constant[3]:0)):(db=ga(Jb.buffer)?K.createStream(34962,Jb.buffer):K.getBuffer(Jb.buffer),qb="type"in Jb?ee[Jb.type]:db.dtype,Ic=!!Jb.normalized,
kb=Jb.size|0,ec=Jb.offset|0,ra=Jb.stride|0,nc=Jb.divisor|0);eb=gc.location;Ia=W[eb];if(1===lb){Ia.buffer||z.enableVertexAttribArray(eb);Cb=kb||1;if(Ia.type!==qb||Ia.size!==Cb||Ia.buffer!==db||Ia.normalized!==Ic||Ia.offset!==ec||Ia.stride!==ra)z.bindBuffer(34962,db.buffer),z.vertexAttribPointer(eb,Cb,qb,Ic,ra,ec),Ia.type=qb,Ia.size=Cb,Ia.buffer=db,Ia.normalized=Ic,Ia.offset=ec,Ia.stride=ra;Ia.divisor!==nc&&(f.vertexAttribDivisorANGLE(eb,nc),Ia.divisor=nc)}else if(Ia.buffer&&(z.disableVertexAttribArray(eb),
Ia.buffer=null),Ia.x!==Ua||Ia.y!==ab||Ia.z!==Ba||Ia.w!==wa)z.vertexAttrib4f(eb,Ua,ab,Ba,wa),Ia.x=Ua,Ia.y=ab,Ia.z=Ba,Ia.w=wa;Bb=jb.call(this,ia,h,g);Ra=!1;Lc=null;Kb=0;Mb=!1;xa=Vb=0;Nd=1;Ka=0;Pb=5126;hc=ya=ib=fb=0;ga(Bb)?(Ra=!0,Lc=K.createStream(34962,Bb),Pb=Lc.dtype):(Lc=K.getBuffer(Bb))?Pb=Lc.dtype:"constant"in Bb?(Nd=2,"number"===typeof Bb.constant?(ib=Bb.constant,ya=hc=fb=0):(ib=0<Bb.constant.length?Bb.constant[0]:0,ya=1<Bb.constant.length?Bb.constant[1]:0,hc=2<Bb.constant.length?Bb.constant[2]:
0,fb=3<Bb.constant.length?Bb.constant[3]:0)):(Lc=ga(Bb.buffer)?K.createStream(34962,Bb.buffer):K.getBuffer(Bb.buffer),Pb="type"in Bb?ee[Bb.type]:Lc.dtype,Mb=!!Bb.normalized,xa=Bb.size|0,Vb=Bb.offset|0,Ka=Bb.stride|0,Kb=Bb.divisor|0);Fa=vd.location;rb=W[Fa];if(1===Nd){rb.buffer||z.enableVertexAttribArray(Fa);sb=xa||1;if(rb.type!==Pb||rb.size!==sb||rb.buffer!==Lc||rb.normalized!==Mb||rb.offset!==Vb||rb.stride!==Ka)z.bindBuffer(34962,Lc.buffer),z.vertexAttribPointer(Fa,sb,Pb,Mb,Ka,Vb),rb.type=Pb,rb.size=
sb,rb.buffer=Lc,rb.normalized=Mb,rb.offset=Vb,rb.stride=Ka;rb.divisor!==Kb&&(f.vertexAttribDivisorANGLE(Fa,Kb),rb.divisor=Kb)}else if(rb.buffer&&(z.disableVertexAttribArray(Fa),rb.buffer=null),rb.x!==ib||rb.y!==ya||rb.z!==hc||rb.w!==fb)z.vertexAttrib4f(Fa,ib,ya,hc,fb),rb.x=ib,rb.y=ya,rb.z=hc,rb.w=fb;Ya=Gb.call(this,ia,h,g);Za=!1;oc=null;cd=0;vc=!1;Nb=Wa=0;dd=1;Ga=0;yc=5126;xb=mb=Ca=Qa=0;ga(Ya)?(Za=!0,oc=K.createStream(34962,Ya),yc=oc.dtype):(oc=K.getBuffer(Ya))?yc=oc.dtype:"constant"in Ya?(dd=2,"number"===
typeof Ya.constant?(Ca=Ya.constant,mb=xb=Qa=0):(Ca=0<Ya.constant.length?Ya.constant[0]:0,mb=1<Ya.constant.length?Ya.constant[1]:0,xb=2<Ya.constant.length?Ya.constant[2]:0,Qa=3<Ya.constant.length?Ya.constant[3]:0)):(oc=ga(Ya.buffer)?K.createStream(34962,Ya.buffer):K.getBuffer(Ya.buffer),yc="type"in Ya?ee[Ya.type]:oc.dtype,vc=!!Ya.normalized,Nb=Ya.size|0,Wa=Ya.offset|0,Ga=Ya.stride|0,cd=Ya.divisor|0);Db=rc.location;tb=W[Db];if(1===dd){tb.buffer||z.enableVertexAttribArray(Db);wc=Nb||1;if(tb.type!==yc||
tb.size!==wc||tb.buffer!==oc||tb.normalized!==vc||tb.offset!==Wa||tb.stride!==Ga)z.bindBuffer(34962,oc.buffer),z.vertexAttribPointer(Db,wc,yc,vc,Ga,Wa),tb.type=yc,tb.size=wc,tb.buffer=oc,tb.normalized=vc,tb.offset=Wa,tb.stride=Ga;tb.divisor!==cd&&(f.vertexAttribDivisorANGLE(Db,cd),tb.divisor=cd)}else if(tb.buffer&&(z.disableVertexAttribArray(Db),tb.buffer=null),tb.x!==Ca||tb.y!==mb||tb.z!==xb||tb.w!==Qa)z.vertexAttrib4f(Db,Ca,mb,xb,Qa),tb.x=Ca,tb.y=mb,tb.z=xb,tb.w=Qa;yb=ua.call(this,ia,h,g);xd=!1;
uc=null;Hd=0;Nc=!1;ed=id=0;Xb=1;dc=0;Qb=5126;zb=nb=$b=Ha=0;ga(yb)?(xd=!0,uc=K.createStream(34962,yb),Qb=uc.dtype):(uc=K.getBuffer(yb))?Qb=uc.dtype:"constant"in yb?(Xb=2,"number"===typeof yb.constant?($b=yb.constant,nb=zb=Ha=0):($b=0<yb.constant.length?yb.constant[0]:0,nb=1<yb.constant.length?yb.constant[1]:0,zb=2<yb.constant.length?yb.constant[2]:0,Ha=3<yb.constant.length?yb.constant[3]:0)):(uc=ga(yb.buffer)?K.createStream(34962,yb.buffer):K.getBuffer(yb.buffer),Qb="type"in yb?ee[yb.type]:uc.dtype,
Nc=!!yb.normalized,ed=yb.size|0,id=yb.offset|0,dc=yb.stride|0,Hd=yb.divisor|0);Ob=xc.location;Rb=W[Ob];if(1===Xb){Rb.buffer||z.enableVertexAttribArray(Ob);ic=ed||1;if(Rb.type!==Qb||Rb.size!==ic||Rb.buffer!==uc||Rb.normalized!==Nc||Rb.offset!==id||Rb.stride!==dc)z.bindBuffer(34962,uc.buffer),z.vertexAttribPointer(Ob,ic,Qb,Nc,dc,id),Rb.type=Qb,Rb.size=ic,Rb.buffer=uc,Rb.normalized=Nc,Rb.offset=id,Rb.stride=dc;Rb.divisor!==Hd&&(f.vertexAttribDivisorANGLE(Ob,Hd),Rb.divisor=Hd)}else if(Rb.buffer&&(z.disableVertexAttribArray(Ob),
Rb.buffer=null),Rb.x!==$b||Rb.y!==nb||Rb.z!==zb||Rb.w!==Ha)z.vertexAttrib4f(Ob,$b,nb,zb,Ha),Rb.x=$b,Rb.y=nb,Rb.z=zb,Rb.w=Ha;kc=Na.call(this,ia,h,g);Sc=!1;Dc=null;Ec=0;Fc=!1;ad=Oc=0;Tc=1;Pc=0;Lb=5126;Uc=Jc=Qc=Fb=0;ga(kc)?(Sc=!0,Dc=K.createStream(34962,kc),Lb=Dc.dtype):(Dc=K.getBuffer(kc))?Lb=Dc.dtype:"constant"in kc?(Tc=2,"number"===typeof kc.constant?(Qc=kc.constant,Jc=Uc=Fb=0):(Qc=0<kc.constant.length?kc.constant[0]:0,Jc=1<kc.constant.length?kc.constant[1]:0,Uc=2<kc.constant.length?kc.constant[2]:
0,Fb=3<kc.constant.length?kc.constant[3]:0)):(Dc=ga(kc.buffer)?K.createStream(34962,kc.buffer):K.getBuffer(kc.buffer),Lb="type"in kc?ee[kc.type]:Dc.dtype,Fc=!!kc.normalized,ad=kc.size|0,Oc=kc.offset|0,Pc=kc.stride|0,Ec=kc.divisor|0);jc=ca.location;Xc=W[jc];if(1===Tc){Xc.buffer||z.enableVertexAttribArray(jc);fd=ad||1;if(Xc.type!==Lb||Xc.size!==fd||Xc.buffer!==Dc||Xc.normalized!==Fc||Xc.offset!==Oc||Xc.stride!==Pc)z.bindBuffer(34962,Dc.buffer),z.vertexAttribPointer(jc,fd,Lb,Fc,Pc,Oc),Xc.type=Lb,Xc.size=
fd,Xc.buffer=Dc,Xc.normalized=Fc,Xc.offset=Oc,Xc.stride=Pc;Xc.divisor!==Ec&&(f.vertexAttribDivisorANGLE(jc,Ec),Xc.divisor=Ec)}else if(Xc.buffer&&(z.disableVertexAttribArray(jc),Xc.buffer=null),Xc.x!==Qc||Xc.y!==Jc||Xc.z!==Uc||Xc.w!==Fb)z.vertexAttrib4f(jc,Qc,Jc,Uc,Fb),Xc.x=Qc,Xc.y=Jc,Xc.z=Uc,Xc.w=Fb;Wd=Y.call(this,ia,h,g);le=!1;Yc=null;kf=0;he=!1;pe=re=0;Sd=1;Ed=0;Cd=5126;jd=nd=Gc=hd=0;ga(Wd)?(le=!0,Yc=K.createStream(34962,Wd),Cd=Yc.dtype):(Yc=K.getBuffer(Wd))?Cd=Yc.dtype:"constant"in Wd?(Sd=2,"number"===
typeof Wd.constant?(Gc=Wd.constant,nd=jd=hd=0):(Gc=0<Wd.constant.length?Wd.constant[0]:0,nd=1<Wd.constant.length?Wd.constant[1]:0,jd=2<Wd.constant.length?Wd.constant[2]:0,hd=3<Wd.constant.length?Wd.constant[3]:0)):(Yc=ga(Wd.buffer)?K.createStream(34962,Wd.buffer):K.getBuffer(Wd.buffer),Cd="type"in Wd?ee[Wd.type]:Yc.dtype,he=!!Wd.normalized,pe=Wd.size|0,re=Wd.offset|0,Ed=Wd.stride|0,kf=Wd.divisor|0);Zc=Ja.location;kd=W[Zc];if(1===Sd){kd.buffer||z.enableVertexAttribArray(Zc);Ad=pe||1;if(kd.type!==Cd||
kd.size!==Ad||kd.buffer!==Yc||kd.normalized!==he||kd.offset!==re||kd.stride!==Ed)z.bindBuffer(34962,Yc.buffer),z.vertexAttribPointer(Zc,Ad,Cd,he,Ed,re),kd.type=Cd,kd.size=Ad,kd.buffer=Yc,kd.normalized=he,kd.offset=re,kd.stride=Ed;kd.divisor!==kf&&(f.vertexAttribDivisorANGLE(Zc,kf),kd.divisor=kf)}else if(kd.buffer&&(z.disableVertexAttribArray(Zc),kd.buffer=null),kd.x!==Gc||kd.y!==nd||kd.z!==jd||kd.w!==hd)z.vertexAttrib4f(Zc,Gc,nd,jd,hd),kd.x=Gc,kd.y=nd,kd.z=jd,kd.w=hd;Bd=N.call(this,ia,h,g);ue=!1;
we=null;te=0;ce=!1;$d=be=0;Ee=1;Xd=0;fe=5126;ie=me=Wc=zc=0;ga(Bd)?(ue=!0,we=K.createStream(34962,Bd),fe=we.dtype):(we=K.getBuffer(Bd))?fe=we.dtype:"constant"in Bd?(Ee=2,"number"===typeof Bd.constant?(Wc=Bd.constant,me=ie=zc=0):(Wc=0<Bd.constant.length?Bd.constant[0]:0,me=1<Bd.constant.length?Bd.constant[1]:0,ie=2<Bd.constant.length?Bd.constant[2]:0,zc=3<Bd.constant.length?Bd.constant[3]:0)):(we=ga(Bd.buffer)?K.createStream(34962,Bd.buffer):K.getBuffer(Bd.buffer),fe="type"in Bd?ee[Bd.type]:we.dtype,
ce=!!Bd.normalized,$d=Bd.size|0,be=Bd.offset|0,Xd=Bd.stride|0,te=Bd.divisor|0);Dd=R.location;Id=W[Dd];if(1===Ee){Id.buffer||z.enableVertexAttribArray(Dd);Jd=$d||4;if(Id.type!==fe||Id.size!==Jd||Id.buffer!==we||Id.normalized!==ce||Id.offset!==be||Id.stride!==Xd)z.bindBuffer(34962,we.buffer),z.vertexAttribPointer(Dd,Jd,fe,ce,Xd,be),Id.type=fe,Id.size=Jd,Id.buffer=we,Id.normalized=ce,Id.offset=be,Id.stride=Xd;Id.divisor!==te&&(f.vertexAttribDivisorANGLE(Dd,te),Id.divisor=te)}else if(Id.buffer&&(z.disableVertexAttribArray(Dd),
Id.buffer=null),Id.x!==Wc||Id.y!==me||Id.z!==ie||Id.w!==zc)z.vertexAttrib4f(Dd,Wc,me,ie,zc),Id.x=Wc,Id.y=me,Id.z=ie,Id.w=zc;Kd=M.call(this,ia,h,g);ge=!1;se=null;ve=0;je=!1;Oe=Hf=0;Le=1;ne=0;Ae=5126;Be=He=Ge=Fe=0;ga(Kd)?(ge=!0,se=K.createStream(34962,Kd),Ae=se.dtype):(se=K.getBuffer(Kd))?Ae=se.dtype:"constant"in Kd?(Le=2,"number"===typeof Kd.constant?(Ge=Kd.constant,He=Be=Fe=0):(Ge=0<Kd.constant.length?Kd.constant[0]:0,He=1<Kd.constant.length?Kd.constant[1]:0,Be=2<Kd.constant.length?Kd.constant[2]:
0,Fe=3<Kd.constant.length?Kd.constant[3]:0)):(se=ga(Kd.buffer)?K.createStream(34962,Kd.buffer):K.getBuffer(Kd.buffer),Ae="type"in Kd?ee[Kd.type]:se.dtype,je=!!Kd.normalized,Oe=Kd.size|0,Hf=Kd.offset|0,ne=Kd.stride|0,ve=Kd.divisor|0);Fd=Zb.location;Pd=W[Fd];if(1===Le){Pd.buffer||z.enableVertexAttribArray(Fd);Ud=Oe||4;if(Pd.type!==Ae||Pd.size!==Ud||Pd.buffer!==se||Pd.normalized!==je||Pd.offset!==Hf||Pd.stride!==ne)z.bindBuffer(34962,se.buffer),z.vertexAttribPointer(Fd,Ud,Ae,je,ne,Hf),Pd.type=Ae,Pd.size=
Ud,Pd.buffer=se,Pd.normalized=je,Pd.offset=Hf,Pd.stride=ne;Pd.divisor!==ve&&(f.vertexAttribDivisorANGLE(Fd,ve),Pd.divisor=ve)}else if(Pd.buffer&&(z.disableVertexAttribArray(Fd),Pd.buffer=null),Pd.x!==Ge||Pd.y!==He||Pd.z!==Be||Pd.w!==Fe)z.vertexAttrib4f(Fd,Ge,He,Be,Fe),Pd.x=Ge,Pd.y=He,Pd.z=Be,Pd.w=Fe;Yd=T.call(this,ia,h,g);Ie=!1;zd=null;Ld=0;xe=!1;df=Je=0;Xe=1;Pe=0;Me=5126;Re=Qe=Te=We=0;ga(Yd)?(Ie=!0,zd=K.createStream(34962,Yd),Me=zd.dtype):(zd=K.getBuffer(Yd))?Me=zd.dtype:"constant"in Yd?(Xe=2,"number"===
typeof Yd.constant?(Te=Yd.constant,Qe=Re=We=0):(Te=0<Yd.constant.length?Yd.constant[0]:0,Qe=1<Yd.constant.length?Yd.constant[1]:0,Re=2<Yd.constant.length?Yd.constant[2]:0,We=3<Yd.constant.length?Yd.constant[3]:0)):(zd=ga(Yd.buffer)?K.createStream(34962,Yd.buffer):K.getBuffer(Yd.buffer),Me="type"in Yd?ee[Yd.type]:zd.dtype,xe=!!Yd.normalized,df=Yd.size|0,Je=Yd.offset|0,Pe=Yd.stride|0,Ld=Yd.divisor|0);Md=ha.location;Td=W[Md];if(1===Xe){Td.buffer||z.enableVertexAttribArray(Md);Se=df||1;if(Td.type!==Me||
Td.size!==Se||Td.buffer!==zd||Td.normalized!==xe||Td.offset!==Je||Td.stride!==Pe)z.bindBuffer(34962,zd.buffer),z.vertexAttribPointer(Md,Se,Me,xe,Pe,Je),Td.type=Me,Td.size=Se,Td.buffer=zd,Td.normalized=xe,Td.offset=Je,Td.stride=Pe;Td.divisor!==Ld&&(f.vertexAttribDivisorANGLE(Md,Ld),Td.divisor=Ld)}else if(Td.buffer&&(z.disableVertexAttribArray(Md),Td.buffer=null),Td.x!==Te||Td.y!==Qe||Td.z!==Re||Td.w!==We)z.vertexAttrib4f(Md,Te,Qe,Re,We),Td.x=Te,Td.y=Qe,Td.z=Re,Td.w=We;ef=ia.pixelRatio;g&&jf===ef||
(jf=ef,z.uniform1f(bb.location,ef));af=h.scale;ff=af[0];hf=af[1];g&&gf===ff&&pf===hf||(gf=ff,pf=hf,z.uniform2f(U.location,ff,hf));lf=h.scaleFract;qf=lf[0];Bf=lf[1];g&&Af===qf&&Ne===Bf||(Af=qf,Ne=Bf,z.uniform2f(ob.location,qf,Bf));ye=h.translate;mf=ye[0];Cf=ye[1];g&&nf===mf&&Ff===Cf||(nf=mf,Ff=Cf,z.uniform2f(oa.location,mf,Cf));zf=h.translateFract;Df=zf[0];vf=zf[1];g&&Ef===Df&&wf===vf||(Ef=Df,wf=vf,z.uniform2f(fc.location,Df,vf));uf=J.call(this,ia,h,g);xf=uf[0];If=uf[1];g&&yf===xf&&Kf===If||(yf=xf,
Kf=If,z.uniform2f(Oa.location,xf,If));Lf=h.opacity;g&&Mf===Lf||(Mf=Lf,z.uniform1f(Aa.location,Lf));(sf=h.markerTexture)&&"framebuffer"===sf._reglType&&(sf=sf.color[0]);Rf=sf._texture;z.uniform1i(Z.location,Rf.bind());Gf=h.elements;tf=null;(tf=(dg=ga(Gf))?Vc.createStream(Gf):Vc.getElements(Gf))&&z.bindBuffer(34963,tf.buffer.buffer);Sf=h.offset;if(Tf=h.count)0<tc?tf?f.drawElementsInstancedANGLE(0,Tf,tf.type,Sf<<(tf.type-5121>>1),tc):f.drawArraysInstancedANGLE(0,Sf,Tf,tc):0>tc&&(tf?z.drawElements(0,
Tf,tf.type,Sf<<(tf.type-5121>>1)):z.drawArrays(0,Sf,Tf)),ia.viewportWidth=Ub,ia.viewportHeight=Ma,pd&&K.destroyStream(db),Ra&&K.destroyStream(Lc),Za&&K.destroyStream(oc),xd&&K.destroyStream(uc),Sc&&K.destroyStream(Dc),le&&K.destroyStream(Yc),ue&&K.destroyStream(we),ge&&K.destroyStream(se),Ie&&K.destroyStream(zd),Rf.unbind(),dg&&Vc.destroyStream(tf)}qa.unbind();Da.dirty=!0;ma.setVAO(null);d&&(Q.cpuTime+=performance.now()-e)},draw:function(b){var c,f,g,h,k,m,A,C,G,H,D,F,M,L,S,N,J,P,aa,T,V,fa,X,Y,da,
va,la,za,qa,ua,pa,Hb,La,vb,Xa,Ea,na,gb,Sa,Wb,cb,Na,Sb,jb,bc,Tb,Va,Ub,Ma,pb,wb,hb,Pa,pc,Jb,Gb,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,Nd,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Wd,le,Yc,te,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,of,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,ze,Oe,Le,ne;c=E.next;c!==E.cur&&(c?z.bindFramebuffer(36160,
c.framebuffer):z.bindFramebuffer(36160,null),E.cur=c);if(Da.dirty){var Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me,We,Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,hf,pf,lf,qf;Ae=ta.dither;Ae!==Da.dither&&(Ae?z.enable(3024):z.disable(3024),Da.dither=Ae);Fe=ba[0];Ge=ba[1];if(Fe!==O[0]||Ge!==O[1])z.blendEquationSeparate(Fe,Ge),O[0]=Fe,O[1]=Ge;He=ta.depth_func;He!==Da.depth_func&&(z.depthFunc(He),Da.depth_func=He);Be=ea[0];Fd=ea[1];if(Be!==q[0]||Fd!==q[1])z.depthRange(Be,Fd),q[0]=Be,q[1]=Fd;Pd=ta.depth_mask;
Pd!==Da.depth_mask&&(z.depthMask(Pd),Da.depth_mask=Pd);Ud=l[0];Yd=l[1];Ie=l[2];zd=l[3];if(Ud!==mc[0]||Yd!==mc[1]||Ie!==mc[2]||zd!==mc[3])z.colorMask(Ud,Yd,Ie,zd),mc[0]=Ud,mc[1]=Yd,mc[2]=Ie,mc[3]=zd;Ld=ta.cull_enable;Ld!==Da.cull_enable&&(Ld?z.enable(2884):z.disable(2884),Da.cull_enable=Ld);xe=ta.cull_face;xe!==Da.cull_face&&(z.cullFace(xe),Da.cull_face=xe);Je=ta.frontFace;Je!==Da.frontFace&&(z.frontFace(Je),Da.frontFace=Je);df=ta.lineWidth;df!==Da.lineWidth&&(z.lineWidth(df),Da.lineWidth=df);Xe=ta.polygonOffset_enable;
Xe!==Da.polygonOffset_enable&&(Xe?z.enable(32823):z.disable(32823),Da.polygonOffset_enable=Xe);Pe=Ib[0];Me=Ib[1];if(Pe!==Ab[0]||Me!==Ab[1])z.polygonOffset(Pe,Me),Ab[0]=Pe,Ab[1]=Me;We=ta.sample_alpha;We!==Da.sample_alpha&&(We?z.enable(32926):z.disable(32926),Da.sample_alpha=We);Te=ta.sample_enable;Te!==Da.sample_enable&&(Te?z.enable(32928):z.disable(32928),Da.sample_enable=Te);Qe=Ue[0];Re=Ue[1];if(Qe!==ke[0]||Re!==ke[1])z.sampleCoverage(Qe,Re),ke[0]=Qe,ke[1]=Re;Md=ta.stencil_mask;Md!==Da.stencil_mask&&
(z.stencilMask(Md),Da.stencil_mask=Md);Td=bd[0];Se=bd[1];ef=bd[2];if(Td!==oe[0]||Se!==oe[1]||ef!==oe[2])z.stencilFunc(Td,Se,ef),oe[0]=Td,oe[1]=Se,oe[2]=ef;jf=qe[0];af=qe[1];ff=qe[2];gf=qe[3];if(jf!==Gd[0]||af!==Gd[1]||ff!==Gd[2]||gf!==Gd[3])z.stencilOpSeparate(jf,af,ff,gf),Gd[0]=jf,Gd[1]=af,Gd[2]=ff,Gd[3]=gf;hf=ud[0];pf=ud[1];lf=ud[2];qf=ud[3];if(hf!==de[0]||pf!==de[1]||lf!==de[2]||qf!==de[3])z.stencilOpSeparate(hf,pf,lf,qf),de[0]=hf,de[1]=pf,de[2]=lf,de[3]=qf}f=b.viewport;g=f.x|0;h=f.y|0;k="width"in
f?f.width|0:ia.framebufferWidth-g;m="height"in f?f.height|0:ia.framebufferHeight-h;A=ia.viewportWidth;ia.viewportWidth=k;C=ia.viewportHeight;ia.viewportHeight=m;z.viewport(g,h,k,m);Vd[0]=g;Vd[1]=h;Vd[2]=k;Vd[3]=m;z.blendColor(0,0,0,1);x[0]=0;x[1]=0;x[2]=0;x[3]=1;z.enable(3042);Da.blend_enable=!0;z.blendFuncSeparate(770,771,773,1);ka[0]=770;ka[1]=771;ka[2]=773;ka[3]=1;z.disable(2929);Da.depth_enable=!1;G=b.viewport;H=G.x|0;D=G.y|0;F="width"in G?G.width|0:ia.framebufferWidth-H;M="height"in G?G.height|
0:ia.framebufferHeight-D;z.scissor(H,D,F,M);ae[0]=H;ae[1]=D;ae[2]=F;ae[3]=M;z.enable(3089);Da.scissor_enable=!0;z.disable(2960);Da.stencil_enable=!1;if(L=Da.profile)S=performance.now(),Q.count++;z.useProgram(p.program);N=Ac.angle_instanced_arrays;ma.setVAO(null);J=y.call(this,ia,b,0);P=!1;aa=null;T=0;V=!1;X=fa=0;Y=1;da=0;va=5126;ua=qa=za=la=0;ga(J)?(P=!0,aa=K.createStream(34962,J),va=aa.dtype):(aa=K.getBuffer(J))?va=aa.dtype:"constant"in J?(Y=2,"number"===typeof J.constant?(za=J.constant,qa=ua=la=
0):(za=0<J.constant.length?J.constant[0]:0,qa=1<J.constant.length?J.constant[1]:0,ua=2<J.constant.length?J.constant[2]:0,la=3<J.constant.length?J.constant[3]:0)):(aa=ga(J.buffer)?K.createStream(34962,J.buffer):K.getBuffer(J.buffer),va="type"in J?ee[J.type]:aa.dtype,V=!!J.normalized,X=J.size|0,fa=J.offset|0,da=J.stride|0,T=J.divisor|0);pa=gc.location;Hb=W[pa];if(1===Y){Hb.buffer||z.enableVertexAttribArray(pa);La=X||1;if(Hb.type!==va||Hb.size!==La||Hb.buffer!==aa||Hb.normalized!==V||Hb.offset!==fa||
Hb.stride!==da)z.bindBuffer(34962,aa.buffer),z.vertexAttribPointer(pa,La,va,V,da,fa),Hb.type=va,Hb.size=La,Hb.buffer=aa,Hb.normalized=V,Hb.offset=fa,Hb.stride=da;Hb.divisor!==T&&(N.vertexAttribDivisorANGLE(pa,T),Hb.divisor=T)}else if(Hb.buffer&&(z.disableVertexAttribArray(pa),Hb.buffer=null),Hb.x!==za||Hb.y!==qa||Hb.z!==ua||Hb.w!==la)z.vertexAttrib4f(pa,za,qa,ua,la),Hb.x=za,Hb.y=qa,Hb.z=ua,Hb.w=la;vb=e.call(this,ia,b,0);Xa=!1;Ea=null;na=0;gb=!1;Wb=Sa=0;cb=1;Na=0;Sb=5126;Va=Tb=bc=jb=0;ga(vb)?(Xa=!0,
Ea=K.createStream(34962,vb),Sb=Ea.dtype):(Ea=K.getBuffer(vb))?Sb=Ea.dtype:"constant"in vb?(cb=2,"number"===typeof vb.constant?(bc=vb.constant,Tb=Va=jb=0):(bc=0<vb.constant.length?vb.constant[0]:0,Tb=1<vb.constant.length?vb.constant[1]:0,Va=2<vb.constant.length?vb.constant[2]:0,jb=3<vb.constant.length?vb.constant[3]:0)):(Ea=ga(vb.buffer)?K.createStream(34962,vb.buffer):K.getBuffer(vb.buffer),Sb="type"in vb?ee[vb.type]:Ea.dtype,gb=!!vb.normalized,Wb=vb.size|0,Sa=vb.offset|0,Na=vb.stride|0,na=vb.divisor|
0);Ub=vd.location;Ma=W[Ub];if(1===cb){Ma.buffer||z.enableVertexAttribArray(Ub);pb=Wb||1;if(Ma.type!==Sb||Ma.size!==pb||Ma.buffer!==Ea||Ma.normalized!==gb||Ma.offset!==Sa||Ma.stride!==Na)z.bindBuffer(34962,Ea.buffer),z.vertexAttribPointer(Ub,pb,Sb,gb,Na,Sa),Ma.type=Sb,Ma.size=pb,Ma.buffer=Ea,Ma.normalized=gb,Ma.offset=Sa,Ma.stride=Na;Ma.divisor!==na&&(N.vertexAttribDivisorANGLE(Ub,na),Ma.divisor=na)}else if(Ma.buffer&&(z.disableVertexAttribArray(Ub),Ma.buffer=null),Ma.x!==bc||Ma.y!==Tb||Ma.z!==Va||
Ma.w!==jb)z.vertexAttrib4f(Ub,bc,Tb,Va,jb),Ma.x=bc,Ma.y=Tb,Ma.z=Va,Ma.w=jb;wb=d.call(this,ia,b,0);hb=!1;Pa=null;pc=0;Jb=!1;db=Gb=0;nc=1;Ic=0;ec=5126;qb=ra=lb=kb=0;ga(wb)?(hb=!0,Pa=K.createStream(34962,wb),ec=Pa.dtype):(Pa=K.getBuffer(wb))?ec=Pa.dtype:"constant"in wb?(nc=2,"number"===typeof wb.constant?(lb=wb.constant,ra=qb=kb=0):(lb=0<wb.constant.length?wb.constant[0]:0,ra=1<wb.constant.length?wb.constant[1]:0,qb=2<wb.constant.length?wb.constant[2]:0,kb=3<wb.constant.length?wb.constant[3]:0)):(Pa=
ga(wb.buffer)?K.createStream(34962,wb.buffer):K.getBuffer(wb.buffer),ec="type"in wb?ee[wb.type]:Pa.dtype,Jb=!!wb.normalized,db=wb.size|0,Gb=wb.offset|0,Ic=wb.stride|0,pc=wb.divisor|0);wa=rc.location;Ua=W[wa];if(1===nc){Ua.buffer||z.enableVertexAttribArray(wa);ab=db||1;if(Ua.type!==ec||Ua.size!==ab||Ua.buffer!==Pa||Ua.normalized!==Jb||Ua.offset!==Gb||Ua.stride!==Ic)z.bindBuffer(34962,Pa.buffer),z.vertexAttribPointer(wa,ab,ec,Jb,Ic,Gb),Ua.type=ec,Ua.size=ab,Ua.buffer=Pa,Ua.normalized=Jb,Ua.offset=Gb,
Ua.stride=Ic;Ua.divisor!==pc&&(N.vertexAttribDivisorANGLE(wa,pc),Ua.divisor=pc)}else if(Ua.buffer&&(z.disableVertexAttribArray(wa),Ua.buffer=null),Ua.x!==lb||Ua.y!==ra||Ua.z!==qb||Ua.w!==kb)z.vertexAttrib4f(wa,lb,ra,qb,kb),Ua.x=lb,Ua.y=ra,Ua.z=qb,Ua.w=kb;Ba=r.call(this,ia,b,0);eb=!1;Ia=null;Cb=0;Bb=!1;Lc=Ra=0;Kb=1;Mb=0;Vb=5126;Pb=Ka=Nd=xa=0;ga(Ba)?(eb=!0,Ia=K.createStream(34962,Ba),Vb=Ia.dtype):(Ia=K.getBuffer(Ba))?Vb=Ia.dtype:"constant"in Ba?(Kb=2,"number"===typeof Ba.constant?(Nd=Ba.constant,Ka=
Pb=xa=0):(Nd=0<Ba.constant.length?Ba.constant[0]:0,Ka=1<Ba.constant.length?Ba.constant[1]:0,Pb=2<Ba.constant.length?Ba.constant[2]:0,xa=3<Ba.constant.length?Ba.constant[3]:0)):(Ia=ga(Ba.buffer)?K.createStream(34962,Ba.buffer):K.getBuffer(Ba.buffer),Vb="type"in Ba?ee[Ba.type]:Ia.dtype,Bb=!!Ba.normalized,Lc=Ba.size|0,Ra=Ba.offset|0,Mb=Ba.stride|0,Cb=Ba.divisor|0);fb=xc.location;ib=W[fb];if(1===Kb){ib.buffer||z.enableVertexAttribArray(fb);ya=Lc||1;if(ib.type!==Vb||ib.size!==ya||ib.buffer!==Ia||ib.normalized!==
Bb||ib.offset!==Ra||ib.stride!==Mb)z.bindBuffer(34962,Ia.buffer),z.vertexAttribPointer(fb,ya,Vb,Bb,Mb,Ra),ib.type=Vb,ib.size=ya,ib.buffer=Ia,ib.normalized=Bb,ib.offset=Ra,ib.stride=Mb;ib.divisor!==Cb&&(N.vertexAttribDivisorANGLE(fb,Cb),ib.divisor=Cb)}else if(ib.buffer&&(z.disableVertexAttribArray(fb),ib.buffer=null),ib.x!==Nd||ib.y!==Ka||ib.z!==Pb||ib.w!==xa)z.vertexAttrib4f(fb,Nd,Ka,Pb,xa),ib.x=Nd,ib.y=Ka,ib.z=Pb,ib.w=xa;hc=a.call(this,ia,b,0);Fa=!1;rb=null;sb=0;Ya=!1;oc=Za=0;cd=1;vc=0;Wa=5126;yc=
Ga=dd=Nb=0;ga(hc)?(Fa=!0,rb=K.createStream(34962,hc),Wa=rb.dtype):(rb=K.getBuffer(hc))?Wa=rb.dtype:"constant"in hc?(cd=2,"number"===typeof hc.constant?(dd=hc.constant,Ga=yc=Nb=0):(dd=0<hc.constant.length?hc.constant[0]:0,Ga=1<hc.constant.length?hc.constant[1]:0,yc=2<hc.constant.length?hc.constant[2]:0,Nb=3<hc.constant.length?hc.constant[3]:0)):(rb=ga(hc.buffer)?K.createStream(34962,hc.buffer):K.getBuffer(hc.buffer),Wa="type"in hc?ee[hc.type]:rb.dtype,Ya=!!hc.normalized,oc=hc.size|0,Za=hc.offset|0,
vc=hc.stride|0,sb=hc.divisor|0);Qa=ca.location;Ca=W[Qa];if(1===cd){Ca.buffer||z.enableVertexAttribArray(Qa);mb=oc||1;if(Ca.type!==Wa||Ca.size!==mb||Ca.buffer!==rb||Ca.normalized!==Ya||Ca.offset!==Za||Ca.stride!==vc)z.bindBuffer(34962,rb.buffer),z.vertexAttribPointer(Qa,mb,Wa,Ya,vc,Za),Ca.type=Wa,Ca.size=mb,Ca.buffer=rb,Ca.normalized=Ya,Ca.offset=Za,Ca.stride=vc;Ca.divisor!==sb&&(N.vertexAttribDivisorANGLE(Qa,sb),Ca.divisor=sb)}else if(Ca.buffer&&(z.disableVertexAttribArray(Qa),Ca.buffer=null),Ca.x!==
dd||Ca.y!==Ga||Ca.z!==yc||Ca.w!==Nb)z.vertexAttrib4f(Qa,dd,Ga,yc,Nb),Ca.x=dd,Ca.y=Ga,Ca.z=yc,Ca.w=Nb;xb=u.call(this,ia,b,0);Db=!1;tb=null;wc=0;yb=!1;uc=xd=0;Hd=1;Nc=0;id=5126;Qb=dc=Xb=ed=0;ga(xb)?(Db=!0,tb=K.createStream(34962,xb),id=tb.dtype):(tb=K.getBuffer(xb))?id=tb.dtype:"constant"in xb?(Hd=2,"number"===typeof xb.constant?(Xb=xb.constant,dc=Qb=ed=0):(Xb=0<xb.constant.length?xb.constant[0]:0,dc=1<xb.constant.length?xb.constant[1]:0,Qb=2<xb.constant.length?xb.constant[2]:0,ed=3<xb.constant.length?
xb.constant[3]:0)):(tb=ga(xb.buffer)?K.createStream(34962,xb.buffer):K.getBuffer(xb.buffer),id="type"in xb?ee[xb.type]:tb.dtype,yb=!!xb.normalized,uc=xb.size|0,xd=xb.offset|0,Nc=xb.stride|0,wc=xb.divisor|0);Ha=Ja.location;$b=W[Ha];if(1===Hd){$b.buffer||z.enableVertexAttribArray(Ha);nb=uc||1;if($b.type!==id||$b.size!==nb||$b.buffer!==tb||$b.normalized!==yb||$b.offset!==xd||$b.stride!==Nc)z.bindBuffer(34962,tb.buffer),z.vertexAttribPointer(Ha,nb,id,yb,Nc,xd),$b.type=id,$b.size=nb,$b.buffer=tb,$b.normalized=
yb,$b.offset=xd,$b.stride=Nc;$b.divisor!==wc&&(N.vertexAttribDivisorANGLE(Ha,wc),$b.divisor=wc)}else if($b.buffer&&(z.disableVertexAttribArray(Ha),$b.buffer=null),$b.x!==Xb||$b.y!==dc||$b.z!==Qb||$b.w!==ed)z.vertexAttrib4f(Ha,Xb,dc,Qb,ed),$b.x=Xb,$b.y=dc,$b.z=Qb,$b.w=ed;zb=w.call(this,ia,b,0);Ob=!1;Rb=null;ic=0;kc=!1;Dc=Sc=0;Ec=1;Fc=0;Oc=5126;Lb=Pc=Tc=ad=0;ga(zb)?(Ob=!0,Rb=K.createStream(34962,zb),Oc=Rb.dtype):(Rb=K.getBuffer(zb))?Oc=Rb.dtype:"constant"in zb?(Ec=2,"number"===typeof zb.constant?(Tc=
zb.constant,Pc=Lb=ad=0):(Tc=0<zb.constant.length?zb.constant[0]:0,Pc=1<zb.constant.length?zb.constant[1]:0,Lb=2<zb.constant.length?zb.constant[2]:0,ad=3<zb.constant.length?zb.constant[3]:0)):(Rb=ga(zb.buffer)?K.createStream(34962,zb.buffer):K.getBuffer(zb.buffer),Oc="type"in zb?ee[zb.type]:Rb.dtype,kc=!!zb.normalized,Dc=zb.size|0,Sc=zb.offset|0,Fc=zb.stride|0,ic=zb.divisor|0);Fb=R.location;Qc=W[Fb];if(1===Ec){Qc.buffer||z.enableVertexAttribArray(Fb);Jc=Dc||4;if(Qc.type!==Oc||Qc.size!==Jc||Qc.buffer!==
Rb||Qc.normalized!==kc||Qc.offset!==Sc||Qc.stride!==Fc)z.bindBuffer(34962,Rb.buffer),z.vertexAttribPointer(Fb,Jc,Oc,kc,Fc,Sc),Qc.type=Oc,Qc.size=Jc,Qc.buffer=Rb,Qc.normalized=kc,Qc.offset=Sc,Qc.stride=Fc;Qc.divisor!==ic&&(N.vertexAttribDivisorANGLE(Fb,ic),Qc.divisor=ic)}else if(Qc.buffer&&(z.disableVertexAttribArray(Fb),Qc.buffer=null),Qc.x!==Tc||Qc.y!==Pc||Qc.z!==Lb||Qc.w!==ad)z.vertexAttrib4f(Fb,Tc,Pc,Lb,ad),Qc.x=Tc,Qc.y=Pc,Qc.z=Lb,Qc.w=ad;Uc=B.call(this,ia,b,0);jc=!1;Xc=null;fd=0;Wd=!1;Yc=le=0;
te=1;he=0;re=5126;Cd=Ed=Sd=pe=0;ga(Uc)?(jc=!0,Xc=K.createStream(34962,Uc),re=Xc.dtype):(Xc=K.getBuffer(Uc))?re=Xc.dtype:"constant"in Uc?(te=2,"number"===typeof Uc.constant?(Sd=Uc.constant,Ed=Cd=pe=0):(Sd=0<Uc.constant.length?Uc.constant[0]:0,Ed=1<Uc.constant.length?Uc.constant[1]:0,Cd=2<Uc.constant.length?Uc.constant[2]:0,pe=3<Uc.constant.length?Uc.constant[3]:0)):(Xc=ga(Uc.buffer)?K.createStream(34962,Uc.buffer):K.getBuffer(Uc.buffer),re="type"in Uc?ee[Uc.type]:Xc.dtype,Wd=!!Uc.normalized,Yc=Uc.size|
0,le=Uc.offset|0,he=Uc.stride|0,fd=Uc.divisor|0);hd=Zb.location;Gc=W[hd];if(1===te){Gc.buffer||z.enableVertexAttribArray(hd);nd=Yc||4;if(Gc.type!==re||Gc.size!==nd||Gc.buffer!==Xc||Gc.normalized!==Wd||Gc.offset!==le||Gc.stride!==he)z.bindBuffer(34962,Xc.buffer),z.vertexAttribPointer(hd,nd,re,Wd,he,le),Gc.type=re,Gc.size=nd,Gc.buffer=Xc,Gc.normalized=Wd,Gc.offset=le,Gc.stride=he;Gc.divisor!==fd&&(N.vertexAttribDivisorANGLE(hd,fd),Gc.divisor=fd)}else if(Gc.buffer&&(z.disableVertexAttribArray(hd),Gc.buffer=
null),Gc.x!==Sd||Gc.y!==Ed||Gc.z!==Cd||Gc.w!==pe)z.vertexAttrib4f(hd,Sd,Ed,Cd,pe),Gc.x=Sd,Gc.y=Ed,Gc.z=Cd,Gc.w=pe;jd=n.call(this,ia,b,0);Zc=!1;kd=null;Ad=0;Bd=!1;we=ue=0;of=1;ce=0;be=5126;fe=Xd=Ee=$d=0;ga(jd)?(Zc=!0,kd=K.createStream(34962,jd),be=kd.dtype):(kd=K.getBuffer(jd))?be=kd.dtype:"constant"in jd?(of=2,"number"===typeof jd.constant?(Ee=jd.constant,Xd=fe=$d=0):(Ee=0<jd.constant.length?jd.constant[0]:0,Xd=1<jd.constant.length?jd.constant[1]:0,fe=2<jd.constant.length?jd.constant[2]:0,$d=3<jd.constant.length?
jd.constant[3]:0)):(kd=ga(jd.buffer)?K.createStream(34962,jd.buffer):K.getBuffer(jd.buffer),be="type"in jd?ee[jd.type]:kd.dtype,Bd=!!jd.normalized,we=jd.size|0,ue=jd.offset|0,ce=jd.stride|0,Ad=jd.divisor|0);zc=ha.location;Wc=W[zc];if(1===of){Wc.buffer||z.enableVertexAttribArray(zc);me=we||1;if(Wc.type!==be||Wc.size!==me||Wc.buffer!==kd||Wc.normalized!==Bd||Wc.offset!==ue||Wc.stride!==ce)z.bindBuffer(34962,kd.buffer),z.vertexAttribPointer(zc,me,be,Bd,ce,ue),Wc.type=be,Wc.size=me,Wc.buffer=kd,Wc.normalized=
Bd,Wc.offset=ue,Wc.stride=ce;Wc.divisor!==Ad&&(N.vertexAttribDivisorANGLE(zc,Ad),Wc.divisor=Ad)}else if(Wc.buffer&&(z.disableVertexAttribArray(zc),Wc.buffer=null),Wc.x!==Ee||Wc.y!==Xd||Wc.z!==fe||Wc.w!==$d)z.vertexAttrib4f(zc,Ee,Xd,fe,$d),Wc.x=Ee,Wc.y=Xd,Wc.z=fe,Wc.w=$d;z.uniform1i(t.location,!1);z.uniform1f(bb.location,ia.pixelRatio);ie=b.scale;z.uniform2f(U.location,ie[0],ie[1]);Dd=b.scaleFract;z.uniform2f(ob.location,Dd[0],Dd[1]);Id=b.translate;z.uniform2f(oa.location,Id[0],Id[1]);Jd=b.translateFract;
z.uniform2f(fc.location,Jd[0],Jd[1]);Kd=I.call(this,ia,b,0);z.uniform2f(Oa.location,Kd[0],Kd[1]);z.uniform1f(Aa.location,b.opacity);z.uniform1i(ac.location,v.bind());(ge=b.markerTexture)&&"framebuffer"===ge._reglType&&(ge=ge.color[0]);se=ge._texture;z.uniform1i(Z.location,se.bind());ve=b.elements;je=null;(je=(ze=ga(ve))?Vc.createStream(ve):Vc.getElements(ve))&&z.bindBuffer(34963,je.buffer.buffer);Oe=b.offset;if(Le=b.count)ne=ub.instances,0<ne?je?N.drawElementsInstancedANGLE(0,Le,je.type,Oe<<(je.type-
5121>>1),ne):N.drawArraysInstancedANGLE(0,Oe,Le,ne):0>ne&&(je?z.drawElements(0,Le,je.type,Oe<<(je.type-5121>>1)):z.drawArrays(0,Oe,Le)),Da.dirty=!0,ma.setVAO(null),ia.viewportWidth=A,ia.viewportHeight=C,L&&(Q.cpuTime+=performance.now()-S),P&&K.destroyStream(aa),Xa&&K.destroyStream(Ea),hb&&K.destroyStream(Pa),eb&&K.destroyStream(Ia),Fa&&K.destroyStream(rb),Db&&K.destroyStream(tb),Ob&&K.destroyStream(Rb),jc&&K.destroyStream(Xc),Zc&&K.destroyStream(kd),v.unbind(),se.unbind(),ze&&Vc.destroyStream(je)},
scope:function(a,c,d){var e,l,n,p,q,r,t,u,x,v,y,z,E,w,J,B,I,M,N,W,ba,R,O,T,U,ja,Y,ea,Z,ka,ca,ha,sa,ma,oa,qa,ua,pa,Aa,Ja,Oa,Ab,Na,xc,Ib,bb,Ma,pb,wb,hb,Pa,ob,Jb,mc,db,jb,vd,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Va,Kb,Mb,Vb,xa,Zb,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,Gb,vc,Wa,Nb,fc,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,ac,uc,gc,Nc,rc,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,ud,Ac,Yc,bd,ae,Vd,Gd,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,de,oe,qe,ce,be,$d,ke,Xd,fe,zc,Wc,me,
ie,Dd,Id,Jd,Kd,ge,se,ve,je,ze,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,Ue,Xe,Pe,Me,We,Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,hf,pf,lf,qf,Af,Bf,Ne,ye,mf,nf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,Sf,Tf,qg,bf,Ze,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,cf,$e,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;e=a.viewport;l=e.x|0;n=e.y|0;p="width"in e?e.width|0:ia.framebufferWidth-l;q="height"in e?e.height|0:ia.framebufferHeight-
n;r=ia.viewportWidth;ia.viewportWidth=p;t=ia.viewportHeight;ia.viewportHeight=q;u=Nd[0];Nd[0]=l;x=Nd[1];Nd[1]=n;v=Nd[2];Nd[2]=p;y=Nd[3];Nd[3]=q;z=G[0];G[0]=0;E=G[1];G[1]=0;w=G[2];G[2]=0;J=G[3];G[3]=1;B=ta.blend_enable;ta.blend_enable=!0;I=za[0];za[0]=770;M=za[1];za[1]=771;N=za[2];za[2]=773;W=za[3];za[3]=1;ba=ta.depth_enable;ta.depth_enable=!1;R=a.viewport;O=R.x|0;T=R.y|0;U="width"in R?R.width|0:ia.framebufferWidth-O;ja="height"in R?R.height|0:ia.framebufferHeight-T;Y=te[0];te[0]=O;ea=te[1];te[1]=
T;Z=te[2];te[2]=U;ka=te[3];te[3]=ja;ca=ta.scissor_enable;ta.scissor_enable=!0;ha=ta.stencil_enable;ta.stencil_enable=!1;if(sa=Da.profile)ma=performance.now(),Q.count++;oa=a.elements;qa=null;qa=(ua=ga(oa))?Vc.createStream(oa):Vc.getElements(oa);pa=ub.elements;ub.elements=qa;Aa=a.offset;Ja=ub.offset;ub.offset=Aa;Oa=a.count;Ab=ub.count;ub.count=Oa;Na=ub.primitive;ub.primitive=0;xc=fa[45];fa[45]=!1;Ib=a.markerTexture;bb=fa[48];fa[48]=Ib;Ma=a.opacity;pb=fa[10];fa[10]=Ma;wb=D.call(this,ia,a,d);hb=fa[46];
fa[46]=wb;Pa=fa[47];fa[47]=L;ob=ia.pixelRatio;Jb=fa[34];fa[34]=ob;mc=a.scale;db=fa[6];fa[6]=mc;jb=a.scaleFract;vd=fa[7];fa[7]=jb;ec=a.translate;kb=fa[8];fa[8]=ec;lb=a.translateFract;ra=fa[9];fa[9]=lb;qb=C.call(this,ia,a,d);wa=!1;Ua=null;ab=0;Ba=!1;Ia=eb=0;Cb=1;Bb=0;Ra=5126;Vb=Mb=Kb=Va=0;ga(qb)?(wa=!0,Ua=K.createStream(34962,qb),Ra=Ua.dtype):(Ua=K.getBuffer(qb))?Ra=Ua.dtype:"constant"in qb?(Cb=2,"number"===typeof qb.constant?(Kb=qb.constant,Mb=Vb=Va=0):(Kb=0<qb.constant.length?qb.constant[0]:0,Mb=
1<qb.constant.length?qb.constant[1]:0,Vb=2<qb.constant.length?qb.constant[2]:0,Va=3<qb.constant.length?qb.constant[3]:0)):(Ua=ga(qb.buffer)?K.createStream(34962,qb.buffer):K.getBuffer(qb.buffer),Ra="type"in qb?ee[qb.type]:Ua.dtype,Ba=!!qb.normalized,Ia=qb.size|0,eb=qb.offset|0,Bb=qb.stride|0,ab=qb.divisor|0);xa=F.buffer;F.buffer=Ua;Zb=F.divisor;F.divisor=ab;Ka=F.normalized;F.normalized=Ba;Pb=F.offset;F.offset=eb;fb=F.size;F.size=Ia;ib=F.state;F.state=Cb;ya=F.stride;F.stride=Bb;hc=F.type;F.type=Ra;
Fa=F.w;F.w=Va;rb=F.x;F.x=Kb;sb=F.y;F.y=Mb;Ya=F.z;F.z=Vb;Za=na.call(this,ia,a,d);oc=!1;Gb=null;vc=0;Wa=!1;fc=Nb=0;Ga=1;yc=0;Qa=5126;Db=xb=mb=Ca=0;ga(Za)?(oc=!0,Gb=K.createStream(34962,Za),Qa=Gb.dtype):(Gb=K.getBuffer(Za))?Qa=Gb.dtype:"constant"in Za?(Ga=2,"number"===typeof Za.constant?(mb=Za.constant,xb=Db=Ca=0):(mb=0<Za.constant.length?Za.constant[0]:0,xb=1<Za.constant.length?Za.constant[1]:0,Db=2<Za.constant.length?Za.constant[2]:0,Ca=3<Za.constant.length?Za.constant[3]:0)):(Gb=ga(Za.buffer)?K.createStream(34962,
Za.buffer):K.getBuffer(Za.buffer),Qa="type"in Za?ee[Za.type]:Gb.dtype,Wa=!!Za.normalized,fc=Za.size|0,Nb=Za.offset|0,yc=Za.stride|0,vc=Za.divisor|0);tb=P.buffer;P.buffer=Gb;wc=P.divisor;P.divisor=vc;yb=P.normalized;P.normalized=Wa;ac=P.offset;P.offset=Nb;uc=P.size;P.size=fc;gc=P.state;P.state=Ga;Nc=P.stride;P.stride=yc;rc=P.type;P.type=Qa;ed=P.w;P.w=Ca;Xb=P.x;P.x=mb;dc=P.y;P.y=xb;Qb=P.z;P.z=Db;Ha=va.call(this,ia,a,d);$b=!1;nb=null;zb=0;Ob=!1;ic=Rb=0;kc=1;Sc=0;Dc=5126;ad=Oc=Fc=Ec=0;ga(Ha)?($b=!0,nb=
K.createStream(34962,Ha),Dc=nb.dtype):(nb=K.getBuffer(Ha))?Dc=nb.dtype:"constant"in Ha?(kc=2,"number"===typeof Ha.constant?(Fc=Ha.constant,Oc=ad=Ec=0):(Fc=0<Ha.constant.length?Ha.constant[0]:0,Oc=1<Ha.constant.length?Ha.constant[1]:0,ad=2<Ha.constant.length?Ha.constant[2]:0,Ec=3<Ha.constant.length?Ha.constant[3]:0)):(nb=ga(Ha.buffer)?K.createStream(34962,Ha.buffer):K.getBuffer(Ha.buffer),Dc="type"in Ha?ee[Ha.type]:nb.dtype,Ob=!!Ha.normalized,ic=Ha.size|0,Rb=Ha.offset|0,Sc=Ha.stride|0,zb=Ha.divisor|
0);Tc=h.buffer;h.buffer=nb;Pc=h.divisor;h.divisor=zb;Lb=h.normalized;h.normalized=Ob;Fb=h.offset;h.offset=Rb;Qc=h.size;h.size=ic;Jc=h.state;h.state=kc;Uc=h.stride;h.stride=Sc;jc=h.type;h.type=Dc;Xc=h.w;h.w=Ec;fd=h.x;h.x=Fc;ud=h.y;h.y=Oc;Ac=h.z;h.z=ad;Yc=g.call(this,ia,a,d);bd=!1;ae=null;Vd=0;Gd=!1;Ed=Sd=0;Cd=1;hd=0;Gc=5126;kd=Zc=jd=nd=0;ga(Yc)?(bd=!0,ae=K.createStream(34962,Yc),Gc=ae.dtype):(ae=K.getBuffer(Yc))?Gc=ae.dtype:"constant"in Yc?(Cd=2,"number"===typeof Yc.constant?(jd=Yc.constant,Zc=kd=
nd=0):(jd=0<Yc.constant.length?Yc.constant[0]:0,Zc=1<Yc.constant.length?Yc.constant[1]:0,kd=2<Yc.constant.length?Yc.constant[2]:0,nd=3<Yc.constant.length?Yc.constant[3]:0)):(ae=ga(Yc.buffer)?K.createStream(34962,Yc.buffer):K.getBuffer(Yc.buffer),Gc="type"in Yc?ee[Yc.type]:ae.dtype,Gd=!!Yc.normalized,Ed=Yc.size|0,Sd=Yc.offset|0,hd=Yc.stride|0,Vd=Yc.divisor|0);Ad=f.buffer;f.buffer=ae;Bd=f.divisor;f.divisor=Vd;de=f.normalized;f.normalized=Gd;oe=f.offset;f.offset=Sd;qe=f.size;f.size=Ed;ce=f.state;f.state=
Cd;be=f.stride;f.stride=hd;$d=f.type;f.type=Gc;ke=f.w;f.w=nd;Xd=f.x;f.x=jd;fe=f.y;f.y=Zc;zc=f.z;f.z=kd;Wc=A.call(this,ia,a,d);me=!1;ie=null;Dd=0;Id=!1;Kd=Jd=0;ge=1;se=0;ve=5126;Le=Oe=ze=je=0;ga(Wc)?(me=!0,ie=K.createStream(34962,Wc),ve=ie.dtype):(ie=K.getBuffer(Wc))?ve=ie.dtype:"constant"in Wc?(ge=2,"number"===typeof Wc.constant?(ze=Wc.constant,Oe=Le=je=0):(ze=0<Wc.constant.length?Wc.constant[0]:0,Oe=1<Wc.constant.length?Wc.constant[1]:0,Le=2<Wc.constant.length?Wc.constant[2]:0,je=3<Wc.constant.length?
Wc.constant[3]:0)):(ie=ga(Wc.buffer)?K.createStream(34962,Wc.buffer):K.getBuffer(Wc.buffer),ve="type"in Wc?ee[Wc.type]:ie.dtype,Id=!!Wc.normalized,Kd=Wc.size|0,Jd=Wc.offset|0,se=Wc.stride|0,Dd=Wc.divisor|0);ne=S.buffer;S.buffer=ie;Ae=S.divisor;S.divisor=Dd;Fe=S.normalized;S.normalized=Id;Ge=S.offset;S.offset=Jd;He=S.size;S.size=Kd;Be=S.state;S.state=ge;Fd=S.stride;S.stride=se;Pd=S.type;S.type=ve;Ud=S.w;S.w=je;Yd=S.x;S.x=ze;Ie=S.y;S.y=Oe;zd=S.z;S.z=Le;Ld=aa.call(this,ia,a,d);xe=!1;Je=null;Ue=0;Xe=
!1;Me=Pe=0;We=1;Te=0;Qe=5126;Se=Td=Md=Re=0;ga(Ld)?(xe=!0,Je=K.createStream(34962,Ld),Qe=Je.dtype):(Je=K.getBuffer(Ld))?Qe=Je.dtype:"constant"in Ld?(We=2,"number"===typeof Ld.constant?(Md=Ld.constant,Td=Se=Re=0):(Md=0<Ld.constant.length?Ld.constant[0]:0,Td=1<Ld.constant.length?Ld.constant[1]:0,Se=2<Ld.constant.length?Ld.constant[2]:0,Re=3<Ld.constant.length?Ld.constant[3]:0)):(Je=ga(Ld.buffer)?K.createStream(34962,Ld.buffer):K.getBuffer(Ld.buffer),Qe="type"in Ld?ee[Ld.type]:Je.dtype,Xe=!!Ld.normalized,
Me=Ld.size|0,Pe=Ld.offset|0,Te=Ld.stride|0,Ue=Ld.divisor|0);ef=m.buffer;m.buffer=Je;jf=m.divisor;m.divisor=Ue;af=m.normalized;m.normalized=Xe;ff=m.offset;m.offset=Pe;gf=m.size;m.size=Me;hf=m.state;m.state=We;pf=m.stride;m.stride=Te;lf=m.type;m.type=Qe;qf=m.w;m.w=Re;Af=m.x;m.x=Md;Bf=m.y;m.y=Td;Ne=m.z;m.z=Se;ye=la.call(this,ia,a,d);mf=!1;nf=null;Cf=0;Ff=!1;Df=zf=0;Ef=1;vf=0;wf=5126;If=yf=xf=uf=0;ga(ye)?(mf=!0,nf=K.createStream(34962,ye),wf=nf.dtype):(nf=K.getBuffer(ye))?wf=nf.dtype:"constant"in ye?
(Ef=2,"number"===typeof ye.constant?(xf=ye.constant,yf=If=uf=0):(xf=0<ye.constant.length?ye.constant[0]:0,yf=1<ye.constant.length?ye.constant[1]:0,If=2<ye.constant.length?ye.constant[2]:0,uf=3<ye.constant.length?ye.constant[3]:0)):(nf=ga(ye.buffer)?K.createStream(34962,ye.buffer):K.getBuffer(ye.buffer),wf="type"in ye?ee[ye.type]:nf.dtype,Ff=!!ye.normalized,Df=ye.size|0,zf=ye.offset|0,vf=ye.stride|0,Cf=ye.divisor|0);Kf=H.buffer;H.buffer=nf;Lf=H.divisor;H.divisor=Cf;Mf=H.normalized;H.normalized=Ff;
sf=H.offset;H.offset=zf;Rf=H.size;H.size=Df;Gf=H.state;H.state=Ef;tf=H.stride;H.stride=vf;dg=H.type;H.type=wf;Sf=H.w;H.w=uf;Tf=H.x;H.x=xf;qg=H.y;H.y=yf;bf=H.z;H.z=If;Ze=da.call(this,ia,a,d);Nf=!1;Of=null;eg=0;fg=!1;hg=gg=0;ig=1;Wf=0;Uf=5126;jg=Zf=Yf=Xf=0;ga(Ze)?(Nf=!0,Of=K.createStream(34962,Ze),Uf=Of.dtype):(Of=K.getBuffer(Ze))?Uf=Of.dtype:"constant"in Ze?(ig=2,"number"===typeof Ze.constant?(Yf=Ze.constant,Zf=jg=Xf=0):(Yf=0<Ze.constant.length?Ze.constant[0]:0,Zf=1<Ze.constant.length?Ze.constant[1]:
0,jg=2<Ze.constant.length?Ze.constant[2]:0,Xf=3<Ze.constant.length?Ze.constant[3]:0)):(Of=ga(Ze.buffer)?K.createStream(34962,Ze.buffer):K.getBuffer(Ze.buffer),Uf="type"in Ze?ee[Ze.type]:Of.dtype,fg=!!Ze.normalized,hg=Ze.size|0,gg=Ze.offset|0,Wf=Ze.stride|0,eg=Ze.divisor|0);rg=b.buffer;b.buffer=Of;sg=b.divisor;b.divisor=eg;tg=b.normalized;b.normalized=fg;ug=b.offset;b.offset=gg;vg=b.size;b.size=hg;wg=b.state;b.state=ig;xg=b.stride;b.stride=Wf;yg=b.type;b.type=Uf;zg=b.w;b.w=Xf;Ag=b.x;b.x=Yf;Bg=b.y;
b.y=Zf;cf=b.z;b.z=jg;$e=k.call(this,ia,a,d);Pf=!1;Qf=null;kg=0;lg=!1;ng=mg=0;og=1;$f=0;Vf=5126;pg=cg=bg=ag=0;ga($e)?(Pf=!0,Qf=K.createStream(34962,$e),Vf=Qf.dtype):(Qf=K.getBuffer($e))?Vf=Qf.dtype:"constant"in $e?(og=2,"number"===typeof $e.constant?(bg=$e.constant,cg=pg=ag=0):(bg=0<$e.constant.length?$e.constant[0]:0,cg=1<$e.constant.length?$e.constant[1]:0,pg=2<$e.constant.length?$e.constant[2]:0,ag=3<$e.constant.length?$e.constant[3]:0)):(Qf=ga($e.buffer)?K.createStream(34962,$e.buffer):K.getBuffer($e.buffer),
Vf="type"in $e?ee[$e.type]:Qf.dtype,lg=!!$e.normalized,ng=$e.size|0,mg=$e.offset|0,$f=$e.stride|0,kg=$e.divisor|0);Cg=X.buffer;X.buffer=Qf;Dg=X.divisor;X.divisor=kg;Eg=X.normalized;X.normalized=lg;Fg=X.offset;X.offset=mg;Gg=X.size;X.size=ng;Hg=X.state;X.state=og;Ig=X.stride;X.stride=$f;Jg=X.type;X.type=Vf;Kg=X.w;X.w=ag;Lg=X.x;X.x=bg;Mg=X.y;X.y=cg;Ng=X.z;X.z=pg;Og=V.vert;V.vert=44;Pg=V.frag;V.frag=43;Da.dirty=!0;c(ia,a,d);ia.viewportWidth=r;ia.viewportHeight=t;Nd[0]=u;Nd[1]=x;Nd[2]=v;Nd[3]=y;G[0]=
z;G[1]=E;G[2]=w;G[3]=J;ta.blend_enable=B;za[0]=I;za[1]=M;za[2]=N;za[3]=W;ta.depth_enable=ba;te[0]=Y;te[1]=ea;te[2]=Z;te[3]=ka;ta.scissor_enable=ca;ta.stencil_enable=ha;sa&&(Q.cpuTime+=performance.now()-ma);ua&&Vc.destroyStream(qa);ub.elements=pa;ub.offset=Ja;ub.count=Ab;ub.primitive=Na;fa[45]=xc;fa[48]=bb;fa[10]=pb;fa[46]=hb;fa[47]=Pa;fa[34]=Jb;fa[6]=db;fa[7]=vd;fa[8]=kb;fa[9]=ra;wa&&K.destroyStream(Ua);F.buffer=xa;F.divisor=Zb;F.normalized=Ka;F.offset=Pb;F.size=fb;F.state=ib;F.stride=ya;F.type=hc;
F.w=Fa;F.x=rb;F.y=sb;F.z=Ya;oc&&K.destroyStream(Gb);P.buffer=tb;P.divisor=wc;P.normalized=yb;P.offset=ac;P.size=uc;P.state=gc;P.stride=Nc;P.type=rc;P.w=ed;P.x=Xb;P.y=dc;P.z=Qb;$b&&K.destroyStream(nb);h.buffer=Tc;h.divisor=Pc;h.normalized=Lb;h.offset=Fb;h.size=Qc;h.state=Jc;h.stride=Uc;h.type=jc;h.w=Xc;h.x=fd;h.y=ud;h.z=Ac;bd&&K.destroyStream(ae);f.buffer=Ad;f.divisor=Bd;f.normalized=de;f.offset=oe;f.size=qe;f.state=ce;f.stride=be;f.type=$d;f.w=ke;f.x=Xd;f.y=fe;f.z=zc;me&&K.destroyStream(ie);S.buffer=
ne;S.divisor=Ae;S.normalized=Fe;S.offset=Ge;S.size=He;S.state=Be;S.stride=Fd;S.type=Pd;S.w=Ud;S.x=Yd;S.y=Ie;S.z=zd;xe&&K.destroyStream(Je);m.buffer=ef;m.divisor=jf;m.normalized=af;m.offset=ff;m.size=gf;m.state=hf;m.stride=pf;m.type=lf;m.w=qf;m.x=Af;m.y=Bf;m.z=Ne;mf&&K.destroyStream(nf);H.buffer=Kf;H.divisor=Lf;H.normalized=Mf;H.offset=sf;H.size=Rf;H.state=Gf;H.stride=tf;H.type=dg;H.w=Sf;H.x=Tf;H.y=qg;H.z=bf;Nf&&K.destroyStream(Of);b.buffer=rg;b.divisor=sg;b.normalized=tg;b.offset=ug;b.size=vg;b.state=
wg;b.stride=xg;b.type=yg;b.w=zg;b.x=Ag;b.y=Bg;b.z=cf;Pf&&K.destroyStream(Qf);X.buffer=Cg;X.divisor=Dg;X.normalized=Eg;X.offset=Fg;X.size=Gg;X.state=Hg;X.stride=Ig;X.type=Jg;X.w=Kg;X.x=Lg;X.y=Mg;X.z=Ng;V.vert=Og;V.frag=Pg;Da.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(c,Q,p,y,e,d,r,a,u,w,B,n,I,v,D,L,C,F,na,P,va,h,g,f,A,S,aa,m,la,H,da,b,k,X,pa,Va,jb,
Gb,ua,Na,Y,N,M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa,fc,gc,rc,vd){var xc,W,K,ia,Da,ub,Vc,Ac,E,z,ga,ta,V,fa,ma,G,x,ba,O,za,ka,l,mc,ea,q,Ib,Ab,Ue,ke,te,ae,bd,oe,ud,de,qe,Gd,Nd,Vd;xc=c.attributes;W=c.buffer;K=c.context;ia=c.current;Da=c.draw;ub=c.elements;Vc=c.extensions;Ac=c.framebuffer;E=c.gl;z=c.isBufferArgs;ga=c.next;ta=c.shader;V=c.uniforms;fa=c.vao;ma=ga.blend_color;G=ia.blend_color;x=ga.blend_equation;ba=ia.blend_equation;O=ga.blend_func;za=ia.blend_func;ka=ga.colorMask;l=ia.colorMask;
mc=ga.depth_range;ea=ia.depth_range;q=ga.polygonOffset_offset;Ib=ia.polygonOffset_offset;Ab=ga.sample_coverage;Ue=ia.sample_coverage;ke=ga.scissor_box;te=ia.scissor_box;ae=ga.stencil_func;bd=ia.stencil_func;oe=ga.stencil_opBack;ud=ia.stencil_opBack;de=ga.stencil_opFront;qe=ia.stencil_opFront;Gd=ga.viewport;Nd=ia.viewport;Vd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(b,a){var c,d,e,f,g,h;c=Ac.next;c!==Ac.cur&&(c?E.bindFramebuffer(36160,
c.framebuffer):E.bindFramebuffer(36160,null),Ac.cur=c);if(ia.dirty){var k,m,n,p,r,u,v,y,A,C,w,H,D,B,F,I,L,S,O,aa,P,V,X,ja,da,va,la,sa,ta,ma,na,gb,Sa,Wb;k=ga.dither;k!==ia.dither&&(k?E.enable(3024):E.disable(3024),ia.dither=k);m=x[0];n=x[1];if(m!==ba[0]||n!==ba[1])E.blendEquationSeparate(m,n),ba[0]=m,ba[1]=n;p=ga.depth_func;p!==ia.depth_func&&(E.depthFunc(p),ia.depth_func=p);r=mc[0];u=mc[1];if(r!==ea[0]||u!==ea[1])E.depthRange(r,u),ea[0]=r,ea[1]=u;v=ga.depth_mask;v!==ia.depth_mask&&(E.depthMask(v),
ia.depth_mask=v);y=ka[0];A=ka[1];C=ka[2];w=ka[3];if(y!==l[0]||A!==l[1]||C!==l[2]||w!==l[3])E.colorMask(y,A,C,w),l[0]=y,l[1]=A,l[2]=C,l[3]=w;H=ga.cull_enable;H!==ia.cull_enable&&(H?E.enable(2884):E.disable(2884),ia.cull_enable=H);D=ga.cull_face;D!==ia.cull_face&&(E.cullFace(D),ia.cull_face=D);B=ga.frontFace;B!==ia.frontFace&&(E.frontFace(B),ia.frontFace=B);F=ga.lineWidth;F!==ia.lineWidth&&(E.lineWidth(F),ia.lineWidth=F);I=ga.polygonOffset_enable;I!==ia.polygonOffset_enable&&(I?E.enable(32823):E.disable(32823),
ia.polygonOffset_enable=I);L=q[0];S=q[1];if(L!==Ib[0]||S!==Ib[1])E.polygonOffset(L,S),Ib[0]=L,Ib[1]=S;O=ga.sample_alpha;O!==ia.sample_alpha&&(O?E.enable(32926):E.disable(32926),ia.sample_alpha=O);aa=ga.sample_enable;aa!==ia.sample_enable&&(aa?E.enable(32928):E.disable(32928),ia.sample_enable=aa);P=Ab[0];V=Ab[1];if(P!==Ue[0]||V!==Ue[1])E.sampleCoverage(P,V),Ue[0]=P,Ue[1]=V;X=ga.stencil_mask;X!==ia.stencil_mask&&(E.stencilMask(X),ia.stencil_mask=X);ja=ae[0];da=ae[1];va=ae[2];if(ja!==bd[0]||da!==bd[1]||
va!==bd[2])E.stencilFunc(ja,da,va),bd[0]=ja,bd[1]=da,bd[2]=va;la=de[0];sa=de[1];ta=de[2];ma=de[3];if(la!==qe[0]||sa!==qe[1]||ta!==qe[2]||ma!==qe[3])E.stencilOpSeparate(la,sa,ta,ma),qe[0]=la,qe[1]=sa,qe[2]=ta,qe[3]=ma;na=oe[0];gb=oe[1];Sa=oe[2];Wb=oe[3];if(na!==ud[0]||gb!==ud[1]||Sa!==ud[2]||Wb!==ud[3])E.stencilOpSeparate(na,gb,Sa,Wb),ud[0]=na,ud[1]=gb,ud[2]=Sa,ud[3]=Wb}E.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;E.enable(3042);ia.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);za[0]=770;
za[1]=771;za[2]=773;za[3]=1;E.disable(2929);ia.depth_enable=!1;E.enable(3089);ia.scissor_enable=!0;E.disable(2960);ia.stencil_enable=!1;if(d=ia.profile)e=performance.now(),Q.count+=a;E.useProgram(pa.program);f=Vc.angle_instanced_arrays;var cb;fa.setVAO(null);E.uniform1i(t.location,!1);E.uniform1i(Oa.location,qa.bind());cb=Da.instances;for(g=0;g<a;++g){h=b[g];var tc,Sb,Gd,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,ke,Ka,Pb,fb,ib,ya,hc,Fa,rb,
sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Wd,le,Yc,kf,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,of,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,Hf,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me,We,Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,hf,pf,lf,qf,Af,Bf,Ne,ye,mf,nf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf;tc=h.viewport;Sb=tc.x|0;Gd=tc.y|0;bc="width"in
tc?tc.width|0:K.framebufferWidth-Sb;Tb="height"in tc?tc.height|0:K.framebufferHeight-Gd;td=K.viewportWidth;K.viewportWidth=bc;Ub=K.viewportHeight;K.viewportHeight=Tb;E.viewport(Sb,Gd,bc,Tb);Nd[0]=Sb;Nd[1]=Gd;Nd[2]=bc;Nd[3]=Tb;Ma=h.viewport;pb=Ma.x|0;wb=Ma.y|0;hb="width"in Ma?Ma.width|0:K.framebufferWidth-pb;Pa="height"in Ma?Ma.height|0:K.framebufferHeight-wb;E.scissor(pb,wb,hb,Pa);te[0]=pb;te[1]=wb;te[2]=hb;te[3]=Pa;pc=Va.call(this,K,h,g);Jb=!1;pd=null;db=0;nc=!1;ec=Ic=0;kb=1;lb=0;ra=5126;ab=Ua=wa=
qb=0;z(pc)?(Jb=!0,pd=W.createStream(34962,pc),ra=pd.dtype):(pd=W.getBuffer(pc))?ra=pd.dtype:"constant"in pc?(kb=2,"number"===typeof pc.constant?(wa=pc.constant,Ua=ab=qb=0):(wa=0<pc.constant.length?pc.constant[0]:0,Ua=1<pc.constant.length?pc.constant[1]:0,ab=2<pc.constant.length?pc.constant[2]:0,qb=3<pc.constant.length?pc.constant[3]:0)):(pd=z(pc.buffer)?W.createStream(34962,pc.buffer):W.getBuffer(pc.buffer),ra="type"in pc?Vd[pc.type]:pd.dtype,nc=!!pc.normalized,ec=pc.size|0,Ic=pc.offset|0,lb=pc.stride|
0,db=pc.divisor|0);Ba=fc.location;eb=xc[Ba];if(1===kb){eb.buffer||E.enableVertexAttribArray(Ba);Ia=ec||1;if(eb.type!==ra||eb.size!==Ia||eb.buffer!==pd||eb.normalized!==nc||eb.offset!==Ic||eb.stride!==lb)E.bindBuffer(34962,pd.buffer),E.vertexAttribPointer(Ba,Ia,ra,nc,lb,Ic),eb.type=ra,eb.size=Ia,eb.buffer=pd,eb.normalized=nc,eb.offset=Ic,eb.stride=lb;eb.divisor!==db&&(f.vertexAttribDivisorANGLE(Ba,db),eb.divisor=db)}else if(eb.buffer&&(E.disableVertexAttribArray(Ba),eb.buffer=null),eb.x!==wa||eb.y!==
Ua||eb.z!==ab||eb.w!==qb)E.vertexAttrib4f(Ba,wa,Ua,ab,qb),eb.x=wa,eb.y=Ua,eb.z=ab,eb.w=qb;Cb=jb.call(this,K,h,g);Bb=!1;Ra=null;Lc=0;Kb=!1;Vb=Mb=0;xa=1;ke=0;Ka=5126;ya=ib=fb=Pb=0;z(Cb)?(Bb=!0,Ra=W.createStream(34962,Cb),Ka=Ra.dtype):(Ra=W.getBuffer(Cb))?Ka=Ra.dtype:"constant"in Cb?(xa=2,"number"===typeof Cb.constant?(fb=Cb.constant,ib=ya=Pb=0):(fb=0<Cb.constant.length?Cb.constant[0]:0,ib=1<Cb.constant.length?Cb.constant[1]:0,ya=2<Cb.constant.length?Cb.constant[2]:0,Pb=3<Cb.constant.length?Cb.constant[3]:
0)):(Ra=z(Cb.buffer)?W.createStream(34962,Cb.buffer):W.getBuffer(Cb.buffer),Ka="type"in Cb?Vd[Cb.type]:Ra.dtype,Kb=!!Cb.normalized,Vb=Cb.size|0,Mb=Cb.offset|0,ke=Cb.stride|0,Lc=Cb.divisor|0);hc=rc.location;Fa=xc[hc];if(1===xa){Fa.buffer||E.enableVertexAttribArray(hc);rb=Vb||1;if(Fa.type!==Ka||Fa.size!==rb||Fa.buffer!==Ra||Fa.normalized!==Kb||Fa.offset!==Mb||Fa.stride!==ke)E.bindBuffer(34962,Ra.buffer),E.vertexAttribPointer(hc,rb,Ka,Kb,ke,Mb),Fa.type=Ka,Fa.size=rb,Fa.buffer=Ra,Fa.normalized=Kb,Fa.offset=
Mb,Fa.stride=ke;Fa.divisor!==Lc&&(f.vertexAttribDivisorANGLE(hc,Lc),Fa.divisor=Lc)}else if(Fa.buffer&&(E.disableVertexAttribArray(hc),Fa.buffer=null),Fa.x!==fb||Fa.y!==ib||Fa.z!==ya||Fa.w!==Pb)E.vertexAttrib4f(hc,fb,ib,ya,Pb),Fa.x=fb,Fa.y=ib,Fa.z=ya,Fa.w=Pb;sb=Gb.call(this,K,h,g);Ya=!1;Za=null;oc=0;cd=!1;Wa=vc=0;Nb=1;dd=0;Ga=5126;mb=Ca=Qa=yc=0;z(sb)?(Ya=!0,Za=W.createStream(34962,sb),Ga=Za.dtype):(Za=W.getBuffer(sb))?Ga=Za.dtype:"constant"in sb?(Nb=2,"number"===typeof sb.constant?(Qa=sb.constant,
Ca=mb=yc=0):(Qa=0<sb.constant.length?sb.constant[0]:0,Ca=1<sb.constant.length?sb.constant[1]:0,mb=2<sb.constant.length?sb.constant[2]:0,yc=3<sb.constant.length?sb.constant[3]:0)):(Za=z(sb.buffer)?W.createStream(34962,sb.buffer):W.getBuffer(sb.buffer),Ga="type"in sb?Vd[sb.type]:Za.dtype,cd=!!sb.normalized,Wa=sb.size|0,vc=sb.offset|0,dd=sb.stride|0,oc=sb.divisor|0);xb=gc.location;Db=xc[xb];if(1===Nb){Db.buffer||E.enableVertexAttribArray(xb);tb=Wa||1;if(Db.type!==Ga||Db.size!==tb||Db.buffer!==Za||Db.normalized!==
cd||Db.offset!==vc||Db.stride!==dd)E.bindBuffer(34962,Za.buffer),E.vertexAttribPointer(xb,tb,Ga,cd,dd,vc),Db.type=Ga,Db.size=tb,Db.buffer=Za,Db.normalized=cd,Db.offset=vc,Db.stride=dd;Db.divisor!==oc&&(f.vertexAttribDivisorANGLE(xb,oc),Db.divisor=oc)}else if(Db.buffer&&(E.disableVertexAttribArray(xb),Db.buffer=null),Db.x!==Qa||Db.y!==Ca||Db.z!==mb||Db.w!==yc)E.vertexAttrib4f(xb,Qa,Ca,mb,yc),Db.x=Qa,Db.y=Ca,Db.z=mb,Db.w=yc;wc=ua.call(this,K,h,g);yb=!1;xd=null;uc=0;Hd=!1;id=Nc=0;ed=1;Xb=0;dc=5126;nb=
$b=Ha=Qb=0;z(wc)?(yb=!0,xd=W.createStream(34962,wc),dc=xd.dtype):(xd=W.getBuffer(wc))?dc=xd.dtype:"constant"in wc?(ed=2,"number"===typeof wc.constant?(Ha=wc.constant,$b=nb=Qb=0):(Ha=0<wc.constant.length?wc.constant[0]:0,$b=1<wc.constant.length?wc.constant[1]:0,nb=2<wc.constant.length?wc.constant[2]:0,Qb=3<wc.constant.length?wc.constant[3]:0)):(xd=z(wc.buffer)?W.createStream(34962,wc.buffer):W.getBuffer(wc.buffer),dc="type"in wc?Vd[wc.type]:xd.dtype,Hd=!!wc.normalized,id=wc.size|0,Nc=wc.offset|0,Xb=
wc.stride|0,uc=wc.divisor|0);zb=vd.location;Ob=xc[zb];if(1===ed){Ob.buffer||E.enableVertexAttribArray(zb);Rb=id||1;if(Ob.type!==dc||Ob.size!==Rb||Ob.buffer!==xd||Ob.normalized!==Hd||Ob.offset!==Nc||Ob.stride!==Xb)E.bindBuffer(34962,xd.buffer),E.vertexAttribPointer(zb,Rb,dc,Hd,Xb,Nc),Ob.type=dc,Ob.size=Rb,Ob.buffer=xd,Ob.normalized=Hd,Ob.offset=Nc,Ob.stride=Xb;Ob.divisor!==uc&&(f.vertexAttribDivisorANGLE(zb,uc),Ob.divisor=uc)}else if(Ob.buffer&&(E.disableVertexAttribArray(zb),Ob.buffer=null),Ob.x!==
Ha||Ob.y!==$b||Ob.z!==nb||Ob.w!==Qb)E.vertexAttrib4f(zb,Ha,$b,nb,Qb),Ob.x=Ha,Ob.y=$b,Ob.z=nb,Ob.w=Qb;ic=Na.call(this,K,h,g);kc=!1;Sc=null;Dc=0;Ec=!1;Oc=Fc=0;ad=1;Tc=0;Pc=5126;Jc=Qc=Fb=Lb=0;z(ic)?(kc=!0,Sc=W.createStream(34962,ic),Pc=Sc.dtype):(Sc=W.getBuffer(ic))?Pc=Sc.dtype:"constant"in ic?(ad=2,"number"===typeof ic.constant?(Fb=ic.constant,Qc=Jc=Lb=0):(Fb=0<ic.constant.length?ic.constant[0]:0,Qc=1<ic.constant.length?ic.constant[1]:0,Jc=2<ic.constant.length?ic.constant[2]:0,Lb=3<ic.constant.length?
ic.constant[3]:0)):(Sc=z(ic.buffer)?W.createStream(34962,ic.buffer):W.getBuffer(ic.buffer),Pc="type"in ic?Vd[ic.type]:Sc.dtype,Ec=!!ic.normalized,Oc=ic.size|0,Fc=ic.offset|0,Tc=ic.stride|0,Dc=ic.divisor|0);Uc=ob.location;jc=xc[Uc];if(1===ad){jc.buffer||E.enableVertexAttribArray(Uc);Xc=Oc||1;if(jc.type!==Pc||jc.size!==Xc||jc.buffer!==Sc||jc.normalized!==Ec||jc.offset!==Fc||jc.stride!==Tc)E.bindBuffer(34962,Sc.buffer),E.vertexAttribPointer(Uc,Xc,Pc,Ec,Tc,Fc),jc.type=Pc,jc.size=Xc,jc.buffer=Sc,jc.normalized=
Ec,jc.offset=Fc,jc.stride=Tc;jc.divisor!==Dc&&(f.vertexAttribDivisorANGLE(Uc,Dc),jc.divisor=Dc)}else if(jc.buffer&&(E.disableVertexAttribArray(Uc),jc.buffer=null),jc.x!==Fb||jc.y!==Qc||jc.z!==Jc||jc.w!==Lb)E.vertexAttrib4f(Uc,Fb,Qc,Jc,Lb),jc.x=Fb,jc.y=Qc,jc.z=Jc,jc.w=Lb;fd=Y.call(this,K,h,g);Wd=!1;le=null;Yc=0;kf=!1;re=he=0;pe=1;Sd=0;Ed=5126;nd=Gc=hd=Cd=0;z(fd)?(Wd=!0,le=W.createStream(34962,fd),Ed=le.dtype):(le=W.getBuffer(fd))?Ed=le.dtype:"constant"in fd?(pe=2,"number"===typeof fd.constant?(hd=
fd.constant,Gc=nd=Cd=0):(hd=0<fd.constant.length?fd.constant[0]:0,Gc=1<fd.constant.length?fd.constant[1]:0,nd=2<fd.constant.length?fd.constant[2]:0,Cd=3<fd.constant.length?fd.constant[3]:0)):(le=z(fd.buffer)?W.createStream(34962,fd.buffer):W.getBuffer(fd.buffer),Ed="type"in fd?Vd[fd.type]:le.dtype,kf=!!fd.normalized,re=fd.size|0,he=fd.offset|0,Sd=fd.stride|0,Yc=fd.divisor|0);jd=Ja.location;Zc=xc[jd];if(1===pe){Zc.buffer||E.enableVertexAttribArray(jd);kd=re||1;if(Zc.type!==Ed||Zc.size!==kd||Zc.buffer!==
le||Zc.normalized!==kf||Zc.offset!==he||Zc.stride!==Sd)E.bindBuffer(34962,le.buffer),E.vertexAttribPointer(jd,kd,Ed,kf,Sd,he),Zc.type=Ed,Zc.size=kd,Zc.buffer=le,Zc.normalized=kf,Zc.offset=he,Zc.stride=Sd;Zc.divisor!==Yc&&(f.vertexAttribDivisorANGLE(jd,Yc),Zc.divisor=Yc)}else if(Zc.buffer&&(E.disableVertexAttribArray(jd),Zc.buffer=null),Zc.x!==hd||Zc.y!==Gc||Zc.z!==nd||Zc.w!==Cd)E.vertexAttrib4f(jd,hd,Gc,nd,Cd),Zc.x=hd,Zc.y=Gc,Zc.z=nd,Zc.w=Cd;Ad=N.call(this,K,h,g);Bd=!1;ue=null;we=0;of=!1;be=ce=0;
$d=1;Ee=0;Xd=5126;me=Wc=zc=fe=0;z(Ad)?(Bd=!0,ue=W.createStream(34962,Ad),Xd=ue.dtype):(ue=W.getBuffer(Ad))?Xd=ue.dtype:"constant"in Ad?($d=2,"number"===typeof Ad.constant?(zc=Ad.constant,Wc=me=fe=0):(zc=0<Ad.constant.length?Ad.constant[0]:0,Wc=1<Ad.constant.length?Ad.constant[1]:0,me=2<Ad.constant.length?Ad.constant[2]:0,fe=3<Ad.constant.length?Ad.constant[3]:0)):(ue=z(Ad.buffer)?W.createStream(34962,Ad.buffer):W.getBuffer(Ad.buffer),Xd="type"in Ad?Vd[Ad.type]:ue.dtype,of=!!Ad.normalized,be=Ad.size|
0,ce=Ad.offset|0,Ee=Ad.stride|0,we=Ad.divisor|0);ie=R.location;Dd=xc[ie];if(1===$d){Dd.buffer||E.enableVertexAttribArray(ie);Id=be||4;if(Dd.type!==Xd||Dd.size!==Id||Dd.buffer!==ue||Dd.normalized!==of||Dd.offset!==ce||Dd.stride!==Ee)E.bindBuffer(34962,ue.buffer),E.vertexAttribPointer(ie,Id,Xd,of,Ee,ce),Dd.type=Xd,Dd.size=Id,Dd.buffer=ue,Dd.normalized=of,Dd.offset=ce,Dd.stride=Ee;Dd.divisor!==we&&(f.vertexAttribDivisorANGLE(ie,we),Dd.divisor=we)}else if(Dd.buffer&&(E.disableVertexAttribArray(ie),Dd.buffer=
null),Dd.x!==zc||Dd.y!==Wc||Dd.z!==me||Dd.w!==fe)E.vertexAttrib4f(ie,zc,Wc,me,fe),Dd.x=zc,Dd.y=Wc,Dd.z=me,Dd.w=fe;Jd=M.call(this,K,h,g);Kd=!1;ge=null;se=0;ve=!1;Hf=je=0;Oe=1;Le=0;ne=5126;He=Ge=Fe=Ae=0;z(Jd)?(Kd=!0,ge=W.createStream(34962,Jd),ne=ge.dtype):(ge=W.getBuffer(Jd))?ne=ge.dtype:"constant"in Jd?(Oe=2,"number"===typeof Jd.constant?(Fe=Jd.constant,Ge=He=Ae=0):(Fe=0<Jd.constant.length?Jd.constant[0]:0,Ge=1<Jd.constant.length?Jd.constant[1]:0,He=2<Jd.constant.length?Jd.constant[2]:0,Ae=3<Jd.constant.length?
Jd.constant[3]:0)):(ge=z(Jd.buffer)?W.createStream(34962,Jd.buffer):W.getBuffer(Jd.buffer),ne="type"in Jd?Vd[Jd.type]:ge.dtype,ve=!!Jd.normalized,Hf=Jd.size|0,je=Jd.offset|0,Le=Jd.stride|0,se=Jd.divisor|0);Be=Zb.location;Fd=xc[Be];if(1===Oe){Fd.buffer||E.enableVertexAttribArray(Be);Pd=Hf||4;if(Fd.type!==ne||Fd.size!==Pd||Fd.buffer!==ge||Fd.normalized!==ve||Fd.offset!==je||Fd.stride!==Le)E.bindBuffer(34962,ge.buffer),E.vertexAttribPointer(Be,Pd,ne,ve,Le,je),Fd.type=ne,Fd.size=Pd,Fd.buffer=ge,Fd.normalized=
ve,Fd.offset=je,Fd.stride=Le;Fd.divisor!==se&&(f.vertexAttribDivisorANGLE(Be,se),Fd.divisor=se)}else if(Fd.buffer&&(E.disableVertexAttribArray(Be),Fd.buffer=null),Fd.x!==Fe||Fd.y!==Ge||Fd.z!==He||Fd.w!==Ae)E.vertexAttrib4f(Be,Fe,Ge,He,Ae),Fd.x=Fe,Fd.y=Ge,Fd.z=He,Fd.w=Ae;Ud=T.call(this,K,h,g);Yd=!1;Ie=null;zd=0;Ld=!1;Je=xe=0;df=1;Xe=0;Pe=5126;Qe=Te=We=Me=0;z(Ud)?(Yd=!0,Ie=W.createStream(34962,Ud),Pe=Ie.dtype):(Ie=W.getBuffer(Ud))?Pe=Ie.dtype:"constant"in Ud?(df=2,"number"===typeof Ud.constant?(We=
Ud.constant,Te=Qe=Me=0):(We=0<Ud.constant.length?Ud.constant[0]:0,Te=1<Ud.constant.length?Ud.constant[1]:0,Qe=2<Ud.constant.length?Ud.constant[2]:0,Me=3<Ud.constant.length?Ud.constant[3]:0)):(Ie=z(Ud.buffer)?W.createStream(34962,Ud.buffer):W.getBuffer(Ud.buffer),Pe="type"in Ud?Vd[Ud.type]:Ie.dtype,Ld=!!Ud.normalized,Je=Ud.size|0,xe=Ud.offset|0,Xe=Ud.stride|0,zd=Ud.divisor|0);Re=ha.location;Md=xc[Re];if(1===df){Md.buffer||E.enableVertexAttribArray(Re);Td=Je||1;if(Md.type!==Pe||Md.size!==Td||Md.buffer!==
Ie||Md.normalized!==Ld||Md.offset!==xe||Md.stride!==Xe)E.bindBuffer(34962,Ie.buffer),E.vertexAttribPointer(Re,Td,Pe,Ld,Xe,xe),Md.type=Pe,Md.size=Td,Md.buffer=Ie,Md.normalized=Ld,Md.offset=xe,Md.stride=Xe;Md.divisor!==zd&&(f.vertexAttribDivisorANGLE(Re,zd),Md.divisor=zd)}else if(Md.buffer&&(E.disableVertexAttribArray(Re),Md.buffer=null),Md.x!==We||Md.y!==Te||Md.z!==Qe||Md.w!==Me)E.vertexAttrib4f(Re,We,Te,Qe,Me),Md.x=We,Md.y=Te,Md.z=Qe,Md.w=Me;Se=K.pixelRatio;g&&ef===Se||(ef=Se,E.uniform1f(ac.location,
Se));jf=J.call(this,K,h,g);af=jf[0];gf=jf[1];g&&ff===af&&hf===gf||(ff=af,hf=gf,E.uniform2f(Aa.location,af,gf));pf=h.scale;lf=pf[0];Af=pf[1];g&&qf===lf&&Bf===Af||(qf=lf,Bf=Af,E.uniform2f(bb.location,lf,Af));Ne=h.scaleFract;ye=Ne[0];nf=Ne[1];g&&mf===ye&&Cf===nf||(mf=ye,Cf=nf,E.uniform2f(U.location,ye,nf));Ff=h.translate;zf=Ff[0];Ef=Ff[1];g&&Df===zf&&vf===Ef||(Df=zf,vf=Ef,E.uniform2f(ca.location,zf,Ef));wf=h.translateFract;uf=wf[0];yf=wf[1];g&&xf===uf&&If===yf||(xf=uf,If=yf,E.uniform2f(oa.location,uf,
yf));Kf=h.opacity;g&&Lf===Kf||(Lf=Kf,E.uniform1f(Z.location,Kf));Mf=h.elements;sf=null;(sf=(Rf=z(Mf))?ub.createStream(Mf):ub.getElements(Mf))&&E.bindBuffer(34963,sf.buffer.buffer);Gf=h.offset;if(tf=h.count)0<cb?sf?f.drawElementsInstancedANGLE(0,tf,sf.type,Gf<<(sf.type-5121>>1),cb):f.drawArraysInstancedANGLE(0,Gf,tf,cb):0>cb&&(sf?E.drawElements(0,tf,sf.type,Gf<<(sf.type-5121>>1)):E.drawArrays(0,Gf,tf)),K.viewportWidth=td,K.viewportHeight=Ub,Jb&&W.destroyStream(pd),Bb&&W.destroyStream(Ra),Ya&&W.destroyStream(Za),
yb&&W.destroyStream(xd),kc&&W.destroyStream(Sc),Wd&&W.destroyStream(le),Bd&&W.destroyStream(ue),Kd&&W.destroyStream(ge),Yd&&W.destroyStream(Ie),Rf&&ub.destroyStream(sf)}qa.unbind();ia.dirty=!0;fa.setVAO(null);d&&(Q.cpuTime+=performance.now()-e)},draw:function(b){var c,f,g,h,k,m,A,C,H,D,F,J,M,L,N,S,O,aa,P,T,V,X,Y,da,va,la,ta,ma,qa,ua,pa,na,Na,La,vb,Xa,Ea,Va,gb,Sa,Wb,cb,jb,Sb,Gb,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,Gd,Ka,Pb,fb,ib,ya,hc,
Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,Wd,le,Yc,ke,he,re,pe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,ue,we,ze,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,Hf;c=Ac.next;c!==Ac.cur&&(c?E.bindFramebuffer(36160,c.framebuffer):E.bindFramebuffer(36160,null),Ac.cur=c);if(ia.dirty){var Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me,We,Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,
hf;Oe=ga.dither;Oe!==ia.dither&&(Oe?E.enable(3024):E.disable(3024),ia.dither=Oe);Le=x[0];ne=x[1];if(Le!==ba[0]||ne!==ba[1])E.blendEquationSeparate(Le,ne),ba[0]=Le,ba[1]=ne;Ae=ga.depth_func;Ae!==ia.depth_func&&(E.depthFunc(Ae),ia.depth_func=Ae);Fe=mc[0];Ge=mc[1];if(Fe!==ea[0]||Ge!==ea[1])E.depthRange(Fe,Ge),ea[0]=Fe,ea[1]=Ge;He=ga.depth_mask;He!==ia.depth_mask&&(E.depthMask(He),ia.depth_mask=He);Be=ka[0];Fd=ka[1];Pd=ka[2];Ud=ka[3];if(Be!==l[0]||Fd!==l[1]||Pd!==l[2]||Ud!==l[3])E.colorMask(Be,Fd,Pd,
Ud),l[0]=Be,l[1]=Fd,l[2]=Pd,l[3]=Ud;Yd=ga.cull_enable;Yd!==ia.cull_enable&&(Yd?E.enable(2884):E.disable(2884),ia.cull_enable=Yd);Ie=ga.cull_face;Ie!==ia.cull_face&&(E.cullFace(Ie),ia.cull_face=Ie);zd=ga.frontFace;zd!==ia.frontFace&&(E.frontFace(zd),ia.frontFace=zd);Ld=ga.lineWidth;Ld!==ia.lineWidth&&(E.lineWidth(Ld),ia.lineWidth=Ld);xe=ga.polygonOffset_enable;xe!==ia.polygonOffset_enable&&(xe?E.enable(32823):E.disable(32823),ia.polygonOffset_enable=xe);Je=q[0];df=q[1];if(Je!==Ib[0]||df!==Ib[1])E.polygonOffset(Je,
df),Ib[0]=Je,Ib[1]=df;Xe=ga.sample_alpha;Xe!==ia.sample_alpha&&(Xe?E.enable(32926):E.disable(32926),ia.sample_alpha=Xe);Pe=ga.sample_enable;Pe!==ia.sample_enable&&(Pe?E.enable(32928):E.disable(32928),ia.sample_enable=Pe);Me=Ab[0];We=Ab[1];if(Me!==Ue[0]||We!==Ue[1])E.sampleCoverage(Me,We),Ue[0]=Me,Ue[1]=We;Te=ga.stencil_mask;Te!==ia.stencil_mask&&(E.stencilMask(Te),ia.stencil_mask=Te);Qe=ae[0];Re=ae[1];Md=ae[2];if(Qe!==bd[0]||Re!==bd[1]||Md!==bd[2])E.stencilFunc(Qe,Re,Md),bd[0]=Qe,bd[1]=Re,bd[2]=Md;
Td=de[0];Se=de[1];ef=de[2];jf=de[3];if(Td!==qe[0]||Se!==qe[1]||ef!==qe[2]||jf!==qe[3])E.stencilOpSeparate(Td,Se,ef,jf),qe[0]=Td,qe[1]=Se,qe[2]=ef,qe[3]=jf;af=oe[0];ff=oe[1];gf=oe[2];hf=oe[3];if(af!==ud[0]||ff!==ud[1]||gf!==ud[2]||hf!==ud[3])E.stencilOpSeparate(af,ff,gf,hf),ud[0]=af,ud[1]=ff,ud[2]=gf,ud[3]=hf}f=b.viewport;g=f.x|0;h=f.y|0;k="width"in f?f.width|0:K.framebufferWidth-g;m="height"in f?f.height|0:K.framebufferHeight-h;A=K.viewportWidth;K.viewportWidth=k;C=K.viewportHeight;K.viewportHeight=
m;E.viewport(g,h,k,m);Nd[0]=g;Nd[1]=h;Nd[2]=k;Nd[3]=m;E.blendColor(0,0,0,1);G[0]=0;G[1]=0;G[2]=0;G[3]=1;E.enable(3042);ia.blend_enable=!0;E.blendFuncSeparate(770,771,773,1);za[0]=770;za[1]=771;za[2]=773;za[3]=1;E.disable(2929);ia.depth_enable=!1;H=b.viewport;D=H.x|0;F=H.y|0;J="width"in H?H.width|0:K.framebufferWidth-D;M="height"in H?H.height|0:K.framebufferHeight-F;E.scissor(D,F,J,M);te[0]=D;te[1]=F;te[2]=J;te[3]=M;E.enable(3089);ia.scissor_enable=!0;E.disable(2960);ia.stencil_enable=!1;if(L=ia.profile)N=
performance.now(),Q.count++;E.useProgram(p.program);S=Vc.angle_instanced_arrays;fa.setVAO(null);O=y.call(this,K,b,0);aa=!1;P=null;T=0;V=!1;Y=X=0;da=1;va=0;la=5126;ua=qa=ma=ta=0;z(O)?(aa=!0,P=W.createStream(34962,O),la=P.dtype):(P=W.getBuffer(O))?la=P.dtype:"constant"in O?(da=2,"number"===typeof O.constant?(ma=O.constant,qa=ua=ta=0):(ma=0<O.constant.length?O.constant[0]:0,qa=1<O.constant.length?O.constant[1]:0,ua=2<O.constant.length?O.constant[2]:0,ta=3<O.constant.length?O.constant[3]:0)):(P=z(O.buffer)?
W.createStream(34962,O.buffer):W.getBuffer(O.buffer),la="type"in O?Vd[O.type]:P.dtype,V=!!O.normalized,Y=O.size|0,X=O.offset|0,va=O.stride|0,T=O.divisor|0);pa=fc.location;na=xc[pa];if(1===da){na.buffer||E.enableVertexAttribArray(pa);Na=Y||1;if(na.type!==la||na.size!==Na||na.buffer!==P||na.normalized!==V||na.offset!==X||na.stride!==va)E.bindBuffer(34962,P.buffer),E.vertexAttribPointer(pa,Na,la,V,va,X),na.type=la,na.size=Na,na.buffer=P,na.normalized=V,na.offset=X,na.stride=va;na.divisor!==T&&(S.vertexAttribDivisorANGLE(pa,
T),na.divisor=T)}else if(na.buffer&&(E.disableVertexAttribArray(pa),na.buffer=null),na.x!==ma||na.y!==qa||na.z!==ua||na.w!==ta)E.vertexAttrib4f(pa,ma,qa,ua,ta),na.x=ma,na.y=qa,na.z=ua,na.w=ta;La=e.call(this,K,b,0);vb=!1;Xa=null;Ea=0;Va=!1;Sa=gb=0;Wb=1;cb=0;jb=5126;Tb=bc=Gb=Sb=0;z(La)?(vb=!0,Xa=W.createStream(34962,La),jb=Xa.dtype):(Xa=W.getBuffer(La))?jb=Xa.dtype:"constant"in La?(Wb=2,"number"===typeof La.constant?(Gb=La.constant,bc=Tb=Sb=0):(Gb=0<La.constant.length?La.constant[0]:0,bc=1<La.constant.length?
La.constant[1]:0,Tb=2<La.constant.length?La.constant[2]:0,Sb=3<La.constant.length?La.constant[3]:0)):(Xa=z(La.buffer)?W.createStream(34962,La.buffer):W.getBuffer(La.buffer),jb="type"in La?Vd[La.type]:Xa.dtype,Va=!!La.normalized,Sa=La.size|0,gb=La.offset|0,cb=La.stride|0,Ea=La.divisor|0);td=rc.location;Ub=xc[td];if(1===Wb){Ub.buffer||E.enableVertexAttribArray(td);Ma=Sa||1;if(Ub.type!==jb||Ub.size!==Ma||Ub.buffer!==Xa||Ub.normalized!==Va||Ub.offset!==gb||Ub.stride!==cb)E.bindBuffer(34962,Xa.buffer),
E.vertexAttribPointer(td,Ma,jb,Va,cb,gb),Ub.type=jb,Ub.size=Ma,Ub.buffer=Xa,Ub.normalized=Va,Ub.offset=gb,Ub.stride=cb;Ub.divisor!==Ea&&(S.vertexAttribDivisorANGLE(td,Ea),Ub.divisor=Ea)}else if(Ub.buffer&&(E.disableVertexAttribArray(td),Ub.buffer=null),Ub.x!==Gb||Ub.y!==bc||Ub.z!==Tb||Ub.w!==Sb)E.vertexAttrib4f(td,Gb,bc,Tb,Sb),Ub.x=Gb,Ub.y=bc,Ub.z=Tb,Ub.w=Sb;pb=d.call(this,K,b,0);wb=!1;hb=null;Pa=0;pc=!1;pd=Jb=0;db=1;nc=0;Ic=5126;ra=lb=kb=ec=0;z(pb)?(wb=!0,hb=W.createStream(34962,pb),Ic=hb.dtype):
(hb=W.getBuffer(pb))?Ic=hb.dtype:"constant"in pb?(db=2,"number"===typeof pb.constant?(kb=pb.constant,lb=ra=ec=0):(kb=0<pb.constant.length?pb.constant[0]:0,lb=1<pb.constant.length?pb.constant[1]:0,ra=2<pb.constant.length?pb.constant[2]:0,ec=3<pb.constant.length?pb.constant[3]:0)):(hb=z(pb.buffer)?W.createStream(34962,pb.buffer):W.getBuffer(pb.buffer),Ic="type"in pb?Vd[pb.type]:hb.dtype,pc=!!pb.normalized,pd=pb.size|0,Jb=pb.offset|0,nc=pb.stride|0,Pa=pb.divisor|0);qb=gc.location;wa=xc[qb];if(1===db){wa.buffer||
E.enableVertexAttribArray(qb);Ua=pd||1;if(wa.type!==Ic||wa.size!==Ua||wa.buffer!==hb||wa.normalized!==pc||wa.offset!==Jb||wa.stride!==nc)E.bindBuffer(34962,hb.buffer),E.vertexAttribPointer(qb,Ua,Ic,pc,nc,Jb),wa.type=Ic,wa.size=Ua,wa.buffer=hb,wa.normalized=pc,wa.offset=Jb,wa.stride=nc;wa.divisor!==Pa&&(S.vertexAttribDivisorANGLE(qb,Pa),wa.divisor=Pa)}else if(wa.buffer&&(E.disableVertexAttribArray(qb),wa.buffer=null),wa.x!==kb||wa.y!==lb||wa.z!==ra||wa.w!==ec)E.vertexAttrib4f(qb,kb,lb,ra,ec),wa.x=
kb,wa.y=lb,wa.z=ra,wa.w=ec;ab=r.call(this,K,b,0);Ba=!1;eb=null;Ia=0;Cb=!1;Ra=Bb=0;Lc=1;Kb=0;Mb=5126;Ka=Gd=xa=Vb=0;z(ab)?(Ba=!0,eb=W.createStream(34962,ab),Mb=eb.dtype):(eb=W.getBuffer(ab))?Mb=eb.dtype:"constant"in ab?(Lc=2,"number"===typeof ab.constant?(xa=ab.constant,Gd=Ka=Vb=0):(xa=0<ab.constant.length?ab.constant[0]:0,Gd=1<ab.constant.length?ab.constant[1]:0,Ka=2<ab.constant.length?ab.constant[2]:0,Vb=3<ab.constant.length?ab.constant[3]:0)):(eb=z(ab.buffer)?W.createStream(34962,ab.buffer):W.getBuffer(ab.buffer),
Mb="type"in ab?Vd[ab.type]:eb.dtype,Cb=!!ab.normalized,Ra=ab.size|0,Bb=ab.offset|0,Kb=ab.stride|0,Ia=ab.divisor|0);Pb=vd.location;fb=xc[Pb];if(1===Lc){fb.buffer||E.enableVertexAttribArray(Pb);ib=Ra||1;if(fb.type!==Mb||fb.size!==ib||fb.buffer!==eb||fb.normalized!==Cb||fb.offset!==Bb||fb.stride!==Kb)E.bindBuffer(34962,eb.buffer),E.vertexAttribPointer(Pb,ib,Mb,Cb,Kb,Bb),fb.type=Mb,fb.size=ib,fb.buffer=eb,fb.normalized=Cb,fb.offset=Bb,fb.stride=Kb;fb.divisor!==Ia&&(S.vertexAttribDivisorANGLE(Pb,Ia),fb.divisor=
Ia)}else if(fb.buffer&&(E.disableVertexAttribArray(Pb),fb.buffer=null),fb.x!==xa||fb.y!==Gd||fb.z!==Ka||fb.w!==Vb)E.vertexAttrib4f(Pb,xa,Gd,Ka,Vb),fb.x=xa,fb.y=Gd,fb.z=Ka,fb.w=Vb;ya=a.call(this,K,b,0);hc=!1;Fa=null;rb=0;sb=!1;Za=Ya=0;oc=1;cd=0;vc=5126;Ga=dd=Nb=Wa=0;z(ya)?(hc=!0,Fa=W.createStream(34962,ya),vc=Fa.dtype):(Fa=W.getBuffer(ya))?vc=Fa.dtype:"constant"in ya?(oc=2,"number"===typeof ya.constant?(Nb=ya.constant,dd=Ga=Wa=0):(Nb=0<ya.constant.length?ya.constant[0]:0,dd=1<ya.constant.length?ya.constant[1]:
0,Ga=2<ya.constant.length?ya.constant[2]:0,Wa=3<ya.constant.length?ya.constant[3]:0)):(Fa=z(ya.buffer)?W.createStream(34962,ya.buffer):W.getBuffer(ya.buffer),vc="type"in ya?Vd[ya.type]:Fa.dtype,sb=!!ya.normalized,Za=ya.size|0,Ya=ya.offset|0,cd=ya.stride|0,rb=ya.divisor|0);yc=ob.location;Qa=xc[yc];if(1===oc){Qa.buffer||E.enableVertexAttribArray(yc);Ca=Za||1;if(Qa.type!==vc||Qa.size!==Ca||Qa.buffer!==Fa||Qa.normalized!==sb||Qa.offset!==Ya||Qa.stride!==cd)E.bindBuffer(34962,Fa.buffer),E.vertexAttribPointer(yc,
Ca,vc,sb,cd,Ya),Qa.type=vc,Qa.size=Ca,Qa.buffer=Fa,Qa.normalized=sb,Qa.offset=Ya,Qa.stride=cd;Qa.divisor!==rb&&(S.vertexAttribDivisorANGLE(yc,rb),Qa.divisor=rb)}else if(Qa.buffer&&(E.disableVertexAttribArray(yc),Qa.buffer=null),Qa.x!==Nb||Qa.y!==dd||Qa.z!==Ga||Qa.w!==Wa)E.vertexAttrib4f(yc,Nb,dd,Ga,Wa),Qa.x=Nb,Qa.y=dd,Qa.z=Ga,Qa.w=Wa;mb=u.call(this,K,b,0);xb=!1;Db=null;tb=0;wc=!1;xd=yb=0;uc=1;Hd=0;Nc=5126;dc=Xb=ed=id=0;z(mb)?(xb=!0,Db=W.createStream(34962,mb),Nc=Db.dtype):(Db=W.getBuffer(mb))?Nc=
Db.dtype:"constant"in mb?(uc=2,"number"===typeof mb.constant?(ed=mb.constant,Xb=dc=id=0):(ed=0<mb.constant.length?mb.constant[0]:0,Xb=1<mb.constant.length?mb.constant[1]:0,dc=2<mb.constant.length?mb.constant[2]:0,id=3<mb.constant.length?mb.constant[3]:0)):(Db=z(mb.buffer)?W.createStream(34962,mb.buffer):W.getBuffer(mb.buffer),Nc="type"in mb?Vd[mb.type]:Db.dtype,wc=!!mb.normalized,xd=mb.size|0,yb=mb.offset|0,Hd=mb.stride|0,tb=mb.divisor|0);Qb=Ja.location;Ha=xc[Qb];if(1===uc){Ha.buffer||E.enableVertexAttribArray(Qb);
$b=xd||1;if(Ha.type!==Nc||Ha.size!==$b||Ha.buffer!==Db||Ha.normalized!==wc||Ha.offset!==yb||Ha.stride!==Hd)E.bindBuffer(34962,Db.buffer),E.vertexAttribPointer(Qb,$b,Nc,wc,Hd,yb),Ha.type=Nc,Ha.size=$b,Ha.buffer=Db,Ha.normalized=wc,Ha.offset=yb,Ha.stride=Hd;Ha.divisor!==tb&&(S.vertexAttribDivisorANGLE(Qb,tb),Ha.divisor=tb)}else if(Ha.buffer&&(E.disableVertexAttribArray(Qb),Ha.buffer=null),Ha.x!==ed||Ha.y!==Xb||Ha.z!==dc||Ha.w!==id)E.vertexAttrib4f(Qb,ed,Xb,dc,id),Ha.x=ed,Ha.y=Xb,Ha.z=dc,Ha.w=id;nb=
w.call(this,K,b,0);zb=!1;Ob=null;Rb=0;ic=!1;Sc=kc=0;Dc=1;Ec=0;Fc=5126;Pc=Tc=ad=Oc=0;z(nb)?(zb=!0,Ob=W.createStream(34962,nb),Fc=Ob.dtype):(Ob=W.getBuffer(nb))?Fc=Ob.dtype:"constant"in nb?(Dc=2,"number"===typeof nb.constant?(ad=nb.constant,Tc=Pc=Oc=0):(ad=0<nb.constant.length?nb.constant[0]:0,Tc=1<nb.constant.length?nb.constant[1]:0,Pc=2<nb.constant.length?nb.constant[2]:0,Oc=3<nb.constant.length?nb.constant[3]:0)):(Ob=z(nb.buffer)?W.createStream(34962,nb.buffer):W.getBuffer(nb.buffer),Fc="type"in
nb?Vd[nb.type]:Ob.dtype,ic=!!nb.normalized,Sc=nb.size|0,kc=nb.offset|0,Ec=nb.stride|0,Rb=nb.divisor|0);Lb=R.location;Fb=xc[Lb];if(1===Dc){Fb.buffer||E.enableVertexAttribArray(Lb);Qc=Sc||4;if(Fb.type!==Fc||Fb.size!==Qc||Fb.buffer!==Ob||Fb.normalized!==ic||Fb.offset!==kc||Fb.stride!==Ec)E.bindBuffer(34962,Ob.buffer),E.vertexAttribPointer(Lb,Qc,Fc,ic,Ec,kc),Fb.type=Fc,Fb.size=Qc,Fb.buffer=Ob,Fb.normalized=ic,Fb.offset=kc,Fb.stride=Ec;Fb.divisor!==Rb&&(S.vertexAttribDivisorANGLE(Lb,Rb),Fb.divisor=Rb)}else if(Fb.buffer&&
(E.disableVertexAttribArray(Lb),Fb.buffer=null),Fb.x!==ad||Fb.y!==Tc||Fb.z!==Pc||Fb.w!==Oc)E.vertexAttrib4f(Lb,ad,Tc,Pc,Oc),Fb.x=ad,Fb.y=Tc,Fb.z=Pc,Fb.w=Oc;Jc=B.call(this,K,b,0);Uc=!1;jc=null;Xc=0;fd=!1;le=Wd=0;Yc=1;ke=0;he=5126;Ed=Sd=pe=re=0;z(Jc)?(Uc=!0,jc=W.createStream(34962,Jc),he=jc.dtype):(jc=W.getBuffer(Jc))?he=jc.dtype:"constant"in Jc?(Yc=2,"number"===typeof Jc.constant?(pe=Jc.constant,Sd=Ed=re=0):(pe=0<Jc.constant.length?Jc.constant[0]:0,Sd=1<Jc.constant.length?Jc.constant[1]:0,Ed=2<Jc.constant.length?
Jc.constant[2]:0,re=3<Jc.constant.length?Jc.constant[3]:0)):(jc=z(Jc.buffer)?W.createStream(34962,Jc.buffer):W.getBuffer(Jc.buffer),he="type"in Jc?Vd[Jc.type]:jc.dtype,fd=!!Jc.normalized,le=Jc.size|0,Wd=Jc.offset|0,ke=Jc.stride|0,Xc=Jc.divisor|0);Cd=Zb.location;hd=xc[Cd];if(1===Yc){hd.buffer||E.enableVertexAttribArray(Cd);Gc=le||4;if(hd.type!==he||hd.size!==Gc||hd.buffer!==jc||hd.normalized!==fd||hd.offset!==Wd||hd.stride!==ke)E.bindBuffer(34962,jc.buffer),E.vertexAttribPointer(Cd,Gc,he,fd,ke,Wd),
hd.type=he,hd.size=Gc,hd.buffer=jc,hd.normalized=fd,hd.offset=Wd,hd.stride=ke;hd.divisor!==Xc&&(S.vertexAttribDivisorANGLE(Cd,Xc),hd.divisor=Xc)}else if(hd.buffer&&(E.disableVertexAttribArray(Cd),hd.buffer=null),hd.x!==pe||hd.y!==Sd||hd.z!==Ed||hd.w!==re)E.vertexAttrib4f(Cd,pe,Sd,Ed,re),hd.x=pe,hd.y=Sd,hd.z=Ed,hd.w=re;nd=n.call(this,K,b,0);jd=!1;Zc=null;kd=0;Ad=!1;ue=Bd=0;we=1;ze=0;ce=5126;Xd=Ee=$d=be=0;z(nd)?(jd=!0,Zc=W.createStream(34962,nd),ce=Zc.dtype):(Zc=W.getBuffer(nd))?ce=Zc.dtype:"constant"in
nd?(we=2,"number"===typeof nd.constant?($d=nd.constant,Ee=Xd=be=0):($d=0<nd.constant.length?nd.constant[0]:0,Ee=1<nd.constant.length?nd.constant[1]:0,Xd=2<nd.constant.length?nd.constant[2]:0,be=3<nd.constant.length?nd.constant[3]:0)):(Zc=z(nd.buffer)?W.createStream(34962,nd.buffer):W.getBuffer(nd.buffer),ce="type"in nd?Vd[nd.type]:Zc.dtype,Ad=!!nd.normalized,ue=nd.size|0,Bd=nd.offset|0,ze=nd.stride|0,kd=nd.divisor|0);fe=ha.location;zc=xc[fe];if(1===we){zc.buffer||E.enableVertexAttribArray(fe);Wc=
ue||1;if(zc.type!==ce||zc.size!==Wc||zc.buffer!==Zc||zc.normalized!==Ad||zc.offset!==Bd||zc.stride!==ze)E.bindBuffer(34962,Zc.buffer),E.vertexAttribPointer(fe,Wc,ce,Ad,ze,Bd),zc.type=ce,zc.size=Wc,zc.buffer=Zc,zc.normalized=Ad,zc.offset=Bd,zc.stride=ze;zc.divisor!==kd&&(S.vertexAttribDivisorANGLE(fe,kd),zc.divisor=kd)}else if(zc.buffer&&(E.disableVertexAttribArray(fe),zc.buffer=null),zc.x!==$d||zc.y!==Ee||zc.z!==Xd||zc.w!==be)E.vertexAttrib4f(fe,$d,Ee,Xd,be),zc.x=$d,zc.y=Ee,zc.z=Xd,zc.w=be;E.uniform1i(t.location,
!1);E.uniform1f(ac.location,K.pixelRatio);me=I.call(this,K,b,0);E.uniform2f(Aa.location,me[0],me[1]);ie=b.scale;E.uniform2f(bb.location,ie[0],ie[1]);Dd=b.scaleFract;E.uniform2f(U.location,Dd[0],Dd[1]);Id=b.translate;E.uniform2f(ca.location,Id[0],Id[1]);Jd=b.translateFract;E.uniform2f(oa.location,Jd[0],Jd[1]);E.uniform1f(Z.location,b.opacity);E.uniform1i(Oa.location,v.bind());Kd=b.elements;ge=null;(ge=(se=z(Kd))?ub.createStream(Kd):ub.getElements(Kd))&&E.bindBuffer(34963,ge.buffer.buffer);ve=b.offset;
if(je=b.count)Hf=Da.instances,0<Hf?ge?S.drawElementsInstancedANGLE(0,je,ge.type,ve<<(ge.type-5121>>1),Hf):S.drawArraysInstancedANGLE(0,ve,je,Hf):0>Hf&&(ge?E.drawElements(0,je,ge.type,ve<<(ge.type-5121>>1)):E.drawArrays(0,ve,je)),ia.dirty=!0,fa.setVAO(null),K.viewportWidth=A,K.viewportHeight=C,L&&(Q.cpuTime+=performance.now()-N),aa&&W.destroyStream(P),vb&&W.destroyStream(Xa),wb&&W.destroyStream(hb),Ba&&W.destroyStream(eb),hc&&W.destroyStream(Fa),xb&&W.destroyStream(Db),zb&&W.destroyStream(Ob),Uc&&
W.destroyStream(jc),jd&&W.destroyStream(Zc),v.unbind(),se&&ub.destroyStream(ge)},scope:function(a,c,d){var e,l,n,p,q,r,t,u,v,x,y,G,E,w,B,J,I,M,N,R,ba,T,U,ja,fa,Y,ea,Z,ka,ca,ha,sa,za,qa,oa,pa,ua,Aa,Ja,Na,Oa,Ab,xc,Ib,bb,jb,ob,Ma,pb,wb,hb,Pa,Va,Jb,Gb,db,mc,vd,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Zb,Kb,Mb,Vb,xa,fc,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,ac,vc,Wa,Nb,gc,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,rc,uc,Vc,Nc,ae,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd,ud,bd,
Yc,Ac,Nd,de,oe,Sd,Ed,Cd,hd,Gc,nd,jd,Zc,kd,Ad,Bd,te,qe,ze,ce,be,$d,Ee,Xd,fe,zc,Wc,me,ie,Dd,Id,Jd,Kd,ge,se,ve,je,Ue,Oe,Le,ne,Ae,Fe,Ge,He,Be,Fd,Pd,Ud,Yd,Ie,zd,Ld,xe,Je,df,Xe,Pe,Me,We,Te,Qe,Re,Md,Td,Se,ef,jf,af,ff,gf,hf,pf,lf,qf,Af,Bf,Ne,ye,mf,nf,Cf,Ff,zf,Df,Ef,vf,wf,uf,xf,yf,If,Kf,Lf,Mf,sf,Rf,Gf,tf,dg,Sf,Tf,qg,bf,Ze,Nf,Of,eg,fg,gg,hg,ig,Wf,Uf,Xf,Yf,Zf,jg,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,cf,$e,Pf,Qf,kg,lg,mg,ng,og,$f,Vf,ag,bg,cg,pg,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;e=a.viewport;l=e.x|0;n=e.y|0;p=
"width"in e?e.width|0:K.framebufferWidth-l;q="height"in e?e.height|0:K.framebufferHeight-n;r=K.viewportWidth;K.viewportWidth=p;t=K.viewportHeight;K.viewportHeight=q;u=Gd[0];Gd[0]=l;v=Gd[1];Gd[1]=n;x=Gd[2];Gd[2]=p;y=Gd[3];Gd[3]=q;G=ma[0];ma[0]=0;E=ma[1];ma[1]=0;w=ma[2];ma[2]=0;B=ma[3];ma[3]=1;J=ga.blend_enable;ga.blend_enable=!0;I=O[0];O[0]=770;M=O[1];O[1]=771;N=O[2];O[2]=773;R=O[3];O[3]=1;ba=ga.depth_enable;ga.depth_enable=!1;T=a.viewport;U=T.x|0;ja=T.y|0;fa="width"in T?T.width|0:K.framebufferWidth-
U;Y="height"in T?T.height|0:K.framebufferHeight-ja;ea=ke[0];ke[0]=U;Z=ke[1];ke[1]=ja;ka=ke[2];ke[2]=fa;ca=ke[3];ke[3]=Y;ha=ga.scissor_enable;ga.scissor_enable=!0;sa=ga.stencil_enable;ga.stencil_enable=!1;if(za=ia.profile)qa=performance.now(),Q.count++;oa=a.elements;pa=null;pa=(ua=z(oa))?ub.createStream(oa):ub.getElements(oa);Aa=Da.elements;Da.elements=pa;Ja=a.offset;Na=Da.offset;Da.offset=Ja;Oa=a.count;Ab=Da.count;Da.count=Oa;xc=Da.primitive;Da.primitive=0;Ib=V[45];V[45]=!1;bb=a.markerTexture;jb=
V[48];V[48]=bb;ob=a.opacity;Ma=V[10];V[10]=ob;pb=D.call(this,K,a,d);wb=V[46];V[46]=pb;hb=V[47];V[47]=L;Pa=K.pixelRatio;Va=V[34];V[34]=Pa;Jb=a.scale;Gb=V[6];V[6]=Jb;db=a.scaleFract;mc=V[7];V[7]=db;vd=a.translate;ec=V[8];V[8]=vd;kb=a.translateFract;lb=V[9];V[9]=kb;ra=C.call(this,K,a,d);qb=!1;wa=null;Ua=0;ab=!1;eb=Ba=0;Ia=1;Cb=0;Bb=5126;Mb=Kb=Zb=Ra=0;z(ra)?(qb=!0,wa=W.createStream(34962,ra),Bb=wa.dtype):(wa=W.getBuffer(ra))?Bb=wa.dtype:"constant"in ra?(Ia=2,"number"===typeof ra.constant?(Zb=ra.constant,
Kb=Mb=Ra=0):(Zb=0<ra.constant.length?ra.constant[0]:0,Kb=1<ra.constant.length?ra.constant[1]:0,Mb=2<ra.constant.length?ra.constant[2]:0,Ra=3<ra.constant.length?ra.constant[3]:0)):(wa=z(ra.buffer)?W.createStream(34962,ra.buffer):W.getBuffer(ra.buffer),Bb="type"in ra?Vd[ra.type]:wa.dtype,ab=!!ra.normalized,eb=ra.size|0,Ba=ra.offset|0,Cb=ra.stride|0,Ua=ra.divisor|0);Vb=F.buffer;F.buffer=wa;xa=F.divisor;F.divisor=Ua;fc=F.normalized;F.normalized=ab;Ka=F.offset;F.offset=Ba;Pb=F.size;F.size=eb;fb=F.state;
F.state=Ia;ib=F.stride;F.stride=Cb;ya=F.type;F.type=Bb;hc=F.w;F.w=Ra;Fa=F.x;F.x=Zb;rb=F.y;F.y=Kb;sb=F.z;F.z=Mb;Ya=na.call(this,K,a,d);Za=!1;oc=null;ac=0;vc=!1;Nb=Wa=0;gc=1;Ga=0;yc=5126;xb=mb=Ca=Qa=0;z(Ya)?(Za=!0,oc=W.createStream(34962,Ya),yc=oc.dtype):(oc=W.getBuffer(Ya))?yc=oc.dtype:"constant"in Ya?(gc=2,"number"===typeof Ya.constant?(Ca=Ya.constant,mb=xb=Qa=0):(Ca=0<Ya.constant.length?Ya.constant[0]:0,mb=1<Ya.constant.length?Ya.constant[1]:0,xb=2<Ya.constant.length?Ya.constant[2]:0,Qa=3<Ya.constant.length?
Ya.constant[3]:0)):(oc=z(Ya.buffer)?W.createStream(34962,Ya.buffer):W.getBuffer(Ya.buffer),yc="type"in Ya?Vd[Ya.type]:oc.dtype,vc=!!Ya.normalized,Nb=Ya.size|0,Wa=Ya.offset|0,Ga=Ya.stride|0,ac=Ya.divisor|0);Db=P.buffer;P.buffer=oc;tb=P.divisor;P.divisor=ac;wc=P.normalized;P.normalized=vc;yb=P.offset;P.offset=Wa;rc=P.size;P.size=Nb;uc=P.state;P.state=gc;Vc=P.stride;P.stride=Ga;Nc=P.type;P.type=yc;ae=P.w;P.w=Qa;ed=P.x;P.x=Ca;Xb=P.y;P.y=mb;dc=P.z;P.z=xb;Qb=va.call(this,K,a,d);Ha=!1;$b=null;nb=0;zb=!1;
Rb=Ob=0;ic=1;kc=0;Sc=5126;Oc=Fc=Ec=Dc=0;z(Qb)?(Ha=!0,$b=W.createStream(34962,Qb),Sc=$b.dtype):($b=W.getBuffer(Qb))?Sc=$b.dtype:"constant"in Qb?(ic=2,"number"===typeof Qb.constant?(Ec=Qb.constant,Fc=Oc=Dc=0):(Ec=0<Qb.constant.length?Qb.constant[0]:0,Fc=1<Qb.constant.length?Qb.constant[1]:0,Oc=2<Qb.constant.length?Qb.constant[2]:0,Dc=3<Qb.constant.length?Qb.constant[3]:0)):($b=z(Qb.buffer)?W.createStream(34962,Qb.buffer):W.getBuffer(Qb.buffer),Sc="type"in Qb?Vd[Qb.type]:$b.dtype,zb=!!Qb.normalized,
Rb=Qb.size|0,Ob=Qb.offset|0,kc=Qb.stride|0,nb=Qb.divisor|0);ad=h.buffer;h.buffer=$b;Tc=h.divisor;h.divisor=nb;Pc=h.normalized;h.normalized=zb;Lb=h.offset;h.offset=Ob;Fb=h.size;h.size=Rb;Qc=h.state;h.state=ic;Jc=h.stride;h.stride=kc;Uc=h.type;h.type=Sc;jc=h.w;h.w=Dc;Xc=h.x;h.x=Ec;fd=h.y;h.y=Fc;ud=h.z;h.z=Oc;bd=g.call(this,K,a,d);Yc=!1;Ac=null;Nd=0;de=!1;Sd=oe=0;Ed=1;Cd=0;hd=5126;Zc=jd=nd=Gc=0;z(bd)?(Yc=!0,Ac=W.createStream(34962,bd),hd=Ac.dtype):(Ac=W.getBuffer(bd))?hd=Ac.dtype:"constant"in bd?(Ed=
2,"number"===typeof bd.constant?(nd=bd.constant,jd=Zc=Gc=0):(nd=0<bd.constant.length?bd.constant[0]:0,jd=1<bd.constant.length?bd.constant[1]:0,Zc=2<bd.constant.length?bd.constant[2]:0,Gc=3<bd.constant.length?bd.constant[3]:0)):(Ac=z(bd.buffer)?W.createStream(34962,bd.buffer):W.getBuffer(bd.buffer),hd="type"in bd?Vd[bd.type]:Ac.dtype,de=!!bd.normalized,Sd=bd.size|0,oe=bd.offset|0,Cd=bd.stride|0,Nd=bd.divisor|0);kd=f.buffer;f.buffer=Ac;Ad=f.divisor;f.divisor=Nd;Bd=f.normalized;f.normalized=de;te=f.offset;
f.offset=oe;qe=f.size;f.size=Sd;ze=f.state;f.state=Ed;ce=f.stride;f.stride=Cd;be=f.type;f.type=hd;$d=f.w;f.w=Gc;Ee=f.x;f.x=nd;Xd=f.y;f.y=jd;fe=f.z;f.z=Zc;zc=A.call(this,K,a,d);Wc=!1;me=null;ie=0;Dd=!1;Jd=Id=0;Kd=1;ge=0;se=5126;Oe=Ue=je=ve=0;z(zc)?(Wc=!0,me=W.createStream(34962,zc),se=me.dtype):(me=W.getBuffer(zc))?se=me.dtype:"constant"in zc?(Kd=2,"number"===typeof zc.constant?(je=zc.constant,Ue=Oe=ve=0):(je=0<zc.constant.length?zc.constant[0]:0,Ue=1<zc.constant.length?zc.constant[1]:0,Oe=2<zc.constant.length?
zc.constant[2]:0,ve=3<zc.constant.length?zc.constant[3]:0)):(me=z(zc.buffer)?W.createStream(34962,zc.buffer):W.getBuffer(zc.buffer),se="type"in zc?Vd[zc.type]:me.dtype,Dd=!!zc.normalized,Jd=zc.size|0,Id=zc.offset|0,ge=zc.stride|0,ie=zc.divisor|0);Le=S.buffer;S.buffer=me;ne=S.divisor;S.divisor=ie;Ae=S.normalized;S.normalized=Dd;Fe=S.offset;S.offset=Id;Ge=S.size;S.size=Jd;He=S.state;S.state=Kd;Be=S.stride;S.stride=ge;Fd=S.type;S.type=se;Pd=S.w;S.w=ve;Ud=S.x;S.x=je;Yd=S.y;S.y=Ue;Ie=S.z;S.z=Oe;zd=aa.call(this,
K,a,d);Ld=!1;xe=null;Je=0;df=!1;Pe=Xe=0;Me=1;We=0;Te=5126;Td=Md=Re=Qe=0;z(zd)?(Ld=!0,xe=W.createStream(34962,zd),Te=xe.dtype):(xe=W.getBuffer(zd))?Te=xe.dtype:"constant"in zd?(Me=2,"number"===typeof zd.constant?(Re=zd.constant,Md=Td=Qe=0):(Re=0<zd.constant.length?zd.constant[0]:0,Md=1<zd.constant.length?zd.constant[1]:0,Td=2<zd.constant.length?zd.constant[2]:0,Qe=3<zd.constant.length?zd.constant[3]:0)):(xe=z(zd.buffer)?W.createStream(34962,zd.buffer):W.getBuffer(zd.buffer),Te="type"in zd?Vd[zd.type]:
xe.dtype,df=!!zd.normalized,Pe=zd.size|0,Xe=zd.offset|0,We=zd.stride|0,Je=zd.divisor|0);Se=m.buffer;m.buffer=xe;ef=m.divisor;m.divisor=Je;jf=m.normalized;m.normalized=df;af=m.offset;m.offset=Xe;ff=m.size;m.size=Pe;gf=m.state;m.state=Me;hf=m.stride;m.stride=We;pf=m.type;m.type=Te;lf=m.w;m.w=Qe;qf=m.x;m.x=Re;Af=m.y;m.y=Md;Bf=m.z;m.z=Td;Ne=la.call(this,K,a,d);ye=!1;mf=null;nf=0;Cf=!1;zf=Ff=0;Df=1;Ef=0;vf=5126;yf=xf=uf=wf=0;z(Ne)?(ye=!0,mf=W.createStream(34962,Ne),vf=mf.dtype):(mf=W.getBuffer(Ne))?vf=
mf.dtype:"constant"in Ne?(Df=2,"number"===typeof Ne.constant?(uf=Ne.constant,xf=yf=wf=0):(uf=0<Ne.constant.length?Ne.constant[0]:0,xf=1<Ne.constant.length?Ne.constant[1]:0,yf=2<Ne.constant.length?Ne.constant[2]:0,wf=3<Ne.constant.length?Ne.constant[3]:0)):(mf=z(Ne.buffer)?W.createStream(34962,Ne.buffer):W.getBuffer(Ne.buffer),vf="type"in Ne?Vd[Ne.type]:mf.dtype,Cf=!!Ne.normalized,zf=Ne.size|0,Ff=Ne.offset|0,Ef=Ne.stride|0,nf=Ne.divisor|0);If=H.buffer;H.buffer=mf;Kf=H.divisor;H.divisor=nf;Lf=H.normalized;
H.normalized=Cf;Mf=H.offset;H.offset=Ff;sf=H.size;H.size=zf;Rf=H.state;H.state=Df;Gf=H.stride;H.stride=Ef;tf=H.type;H.type=vf;dg=H.w;H.w=wf;Sf=H.x;H.x=uf;Tf=H.y;H.y=xf;qg=H.z;H.z=yf;bf=da.call(this,K,a,d);Ze=!1;Nf=null;Of=0;eg=!1;gg=fg=0;hg=1;ig=0;Wf=5126;Zf=Yf=Xf=Uf=0;z(bf)?(Ze=!0,Nf=W.createStream(34962,bf),Wf=Nf.dtype):(Nf=W.getBuffer(bf))?Wf=Nf.dtype:"constant"in bf?(hg=2,"number"===typeof bf.constant?(Xf=bf.constant,Yf=Zf=Uf=0):(Xf=0<bf.constant.length?bf.constant[0]:0,Yf=1<bf.constant.length?
bf.constant[1]:0,Zf=2<bf.constant.length?bf.constant[2]:0,Uf=3<bf.constant.length?bf.constant[3]:0)):(Nf=z(bf.buffer)?W.createStream(34962,bf.buffer):W.getBuffer(bf.buffer),Wf="type"in bf?Vd[bf.type]:Nf.dtype,eg=!!bf.normalized,gg=bf.size|0,fg=bf.offset|0,ig=bf.stride|0,Of=bf.divisor|0);jg=b.buffer;b.buffer=Nf;rg=b.divisor;b.divisor=Of;sg=b.normalized;b.normalized=eg;tg=b.offset;b.offset=fg;ug=b.size;b.size=gg;vg=b.state;b.state=hg;wg=b.stride;b.stride=ig;xg=b.type;b.type=Wf;yg=b.w;b.w=Uf;zg=b.x;
b.x=Xf;Ag=b.y;b.y=Yf;Bg=b.z;b.z=Zf;cf=k.call(this,K,a,d);$e=!1;Pf=null;Qf=0;kg=!1;mg=lg=0;ng=1;og=0;$f=5126;cg=bg=ag=Vf=0;z(cf)?($e=!0,Pf=W.createStream(34962,cf),$f=Pf.dtype):(Pf=W.getBuffer(cf))?$f=Pf.dtype:"constant"in cf?(ng=2,"number"===typeof cf.constant?(ag=cf.constant,bg=cg=Vf=0):(ag=0<cf.constant.length?cf.constant[0]:0,bg=1<cf.constant.length?cf.constant[1]:0,cg=2<cf.constant.length?cf.constant[2]:0,Vf=3<cf.constant.length?cf.constant[3]:0)):(Pf=z(cf.buffer)?W.createStream(34962,cf.buffer):
W.getBuffer(cf.buffer),$f="type"in cf?Vd[cf.type]:Pf.dtype,kg=!!cf.normalized,mg=cf.size|0,lg=cf.offset|0,og=cf.stride|0,Qf=cf.divisor|0);pg=X.buffer;X.buffer=Pf;Cg=X.divisor;X.divisor=Qf;Dg=X.normalized;X.normalized=kg;Eg=X.offset;X.offset=lg;Fg=X.size;X.size=mg;Gg=X.state;X.state=ng;Hg=X.stride;X.stride=og;Ig=X.type;X.type=$f;Jg=X.w;X.w=Vf;Kg=X.x;X.x=ag;Lg=X.y;X.y=bg;Mg=X.z;X.z=cg;Ng=ta.vert;ta.vert=59;Og=ta.frag;ta.frag=58;ia.dirty=!0;c(K,a,d);K.viewportWidth=r;K.viewportHeight=t;Gd[0]=u;Gd[1]=
v;Gd[2]=x;Gd[3]=y;ma[0]=G;ma[1]=E;ma[2]=w;ma[3]=B;ga.blend_enable=J;O[0]=I;O[1]=M;O[2]=N;O[3]=R;ga.depth_enable=ba;ke[0]=ea;ke[1]=Z;ke[2]=ka;ke[3]=ca;ga.scissor_enable=ha;ga.stencil_enable=sa;za&&(Q.cpuTime+=performance.now()-qa);ua&&ub.destroyStream(pa);Da.elements=Aa;Da.offset=Na;Da.count=Ab;Da.primitive=xc;V[45]=Ib;V[48]=jb;V[10]=Ma;V[46]=wb;V[47]=hb;V[34]=Va;V[6]=Gb;V[7]=mc;V[8]=ec;V[9]=lb;qb&&W.destroyStream(wa);F.buffer=Vb;F.divisor=xa;F.normalized=fc;F.offset=Ka;F.size=Pb;F.state=fb;F.stride=
ib;F.type=ya;F.w=hc;F.x=Fa;F.y=rb;F.z=sb;Za&&W.destroyStream(oc);P.buffer=Db;P.divisor=tb;P.normalized=wc;P.offset=yb;P.size=rc;P.state=uc;P.stride=Vc;P.type=Nc;P.w=ae;P.x=ed;P.y=Xb;P.z=dc;Ha&&W.destroyStream($b);h.buffer=ad;h.divisor=Tc;h.normalized=Pc;h.offset=Lb;h.size=Fb;h.state=Qc;h.stride=Jc;h.type=Uc;h.w=jc;h.x=Xc;h.y=fd;h.z=ud;Yc&&W.destroyStream(Ac);f.buffer=kd;f.divisor=Ad;f.normalized=Bd;f.offset=te;f.size=qe;f.state=ze;f.stride=ce;f.type=be;f.w=$d;f.x=Ee;f.y=Xd;f.z=fe;Wc&&W.destroyStream(me);
S.buffer=Le;S.divisor=ne;S.normalized=Ae;S.offset=Fe;S.size=Ge;S.state=He;S.stride=Be;S.type=Fd;S.w=Pd;S.x=Ud;S.y=Yd;S.z=Ie;Ld&&W.destroyStream(xe);m.buffer=Se;m.divisor=ef;m.normalized=jf;m.offset=af;m.size=ff;m.state=gf;m.stride=hf;m.type=pf;m.w=lf;m.x=qf;m.y=Af;m.z=Bf;ye&&W.destroyStream(mf);H.buffer=If;H.divisor=Kf;H.normalized=Lf;H.offset=Mf;H.size=sf;H.state=Rf;H.stride=Gf;H.type=tf;H.w=dg;H.x=Sf;H.y=Tf;H.z=qg;Ze&&W.destroyStream(Nf);b.buffer=jg;b.divisor=rg;b.normalized=sg;b.offset=tg;b.size=
ug;b.state=vg;b.stride=wg;b.type=xg;b.w=yg;b.x=zg;b.y=Ag;b.z=Bg;$e&&W.destroyStream(Pf);X.buffer=pg;X.divisor=Cg;X.normalized=Dg;X.offset=Eg;X.size=Fg;X.state=Gg;X.stride=Hg;X.type=Ig;X.w=Jg;X.x=Kg;X.y=Lg;X.z=Mg;ta.vert=Ng;ta.frag=Og;ia.dirty=!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(c,Q,p,y,e,d,r,a,u,w,B,n,I,v,D,L,C,F,na,P,va,h,g,f,A,S,aa,m,la,H,da,b,k,X,pa,Va,jb,Gb,ua,Na){var Y,N,
M,T,qa,J,Zb,Ja,R,t,ha,Z,Aa,Oa,ac,bb,U,ob,ca,oa,fc,gc,rc,vd,xc,W,K,ia,Da,ub,Vc,Ac,E,z,ga,ta,V,fa,ma,G,x;Y=c.attributes;N=c.buffer;M=c.context;T=c.current;qa=c.draw;J=c.elements;Zb=c.extensions;Ja=c.framebuffer;R=c.gl;t=c.isBufferArgs;ha=c.next;Z=c.shader;Aa=c.uniforms;Oa=c.vao;ac=ha.blend_color;bb=T.blend_color;U=ha.blend_equation;ob=T.blend_equation;ca=ha.blend_func;oa=T.blend_func;fc=ha.colorMask;gc=T.colorMask;rc=ha.depth_range;vd=T.depth_range;xc=ha.polygonOffset_offset;W=T.polygonOffset_offset;
K=ha.sample_coverage;ia=T.sample_coverage;Da=ha.scissor_box;ub=T.scissor_box;Vc=ha.stencil_func;Ac=T.stencil_func;E=ha.stencil_opBack;z=T.stencil_opBack;ga=ha.stencil_opFront;ta=T.stencil_opFront;V=ha.viewport;fa=T.viewport;ma={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};G={offset:4,stride:8};x={offset:0,stride:8};return{batch:function(a,c){var d,e,l,n,p,q,r,u,v,y,C,w,D;d=Ja.next;d!==Ja.cur&&(d?R.bindFramebuffer(36160,d.framebuffer):R.bindFramebuffer(36160,
null),Ja.cur=d);if(T.dirty){var B,I,L,V,ja,Z,ca,sa,Aa,ac,Ve,yd,Ce,Qd,Rd,Zd,Ke,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a,lc,Eb,qc,Ta,Kc,cc,$c,Od,md,Cc,Yb;B=ha.dither;B!==T.dither&&(B?R.enable(3024):R.disable(3024),T.dither=B);I=U[0];L=U[1];if(I!==ob[0]||L!==ob[1])R.blendEquationSeparate(I,L),ob[0]=I,ob[1]=L;V=ha.depth_func;V!==T.depth_func&&(R.depthFunc(V),T.depth_func=V);ja=rc[0];Z=rc[1];if(ja!==vd[0]||Z!==vd[1])R.depthRange(ja,Z),vd[0]=ja,vd[1]=Z;ca=ha.depth_mask;ca!==T.depth_mask&&(R.depthMask(ca),T.depth_mask=
ca);sa=fc[0];Aa=fc[1];ac=fc[2];Ve=fc[3];if(sa!==gc[0]||Aa!==gc[1]||ac!==gc[2]||Ve!==gc[3])R.colorMask(sa,Aa,ac,Ve),gc[0]=sa,gc[1]=Aa,gc[2]=ac,gc[3]=Ve;yd=ha.cull_enable;yd!==T.cull_enable&&(yd?R.enable(2884):R.disable(2884),T.cull_enable=yd);Ce=ha.cull_face;Ce!==T.cull_face&&(R.cullFace(Ce),T.cull_face=Ce);Qd=ha.frontFace;Qd!==T.frontFace&&(R.frontFace(Qd),T.frontFace=Qd);Rd=ha.lineWidth;Rd!==T.lineWidth&&(R.lineWidth(Rd),T.lineWidth=Rd);Zd=ha.polygonOffset_enable;Zd!==T.polygonOffset_enable&&(Zd?
R.enable(32823):R.disable(32823),T.polygonOffset_enable=Zd);Ke=xc[0];qd=xc[1];if(Ke!==W[0]||qd!==W[1])R.polygonOffset(Ke,qd),W[0]=Ke,W[1]=qd;ld=ha.sample_alpha;ld!==T.sample_alpha&&(ld?R.enable(32926):R.disable(32926),T.sample_alpha=ld);wd=ha.sample_enable;wd!==T.sample_enable&&(wd?R.enable(32928):R.disable(32928),T.sample_enable=wd);od=K[0];gd=K[1];if(od!==ia[0]||gd!==ia[1])R.sampleCoverage(od,gd),ia[0]=od,ia[1]=gd;Bc=ha.stencil_mask;Bc!==T.stencil_mask&&(R.stencilMask(Bc),T.stencil_mask=Bc);rd=
Vc[0];Rc=Vc[1];Mc=Vc[2];if(rd!==Ac[0]||Rc!==Ac[1]||Mc!==Ac[2])R.stencilFunc(rd,Rc,Mc),Ac[0]=rd,Ac[1]=Rc,Ac[2]=Mc;sc=ga[0];$a=ga[1];lc=ga[2];Eb=ga[3];if(sc!==ta[0]||$a!==ta[1]||lc!==ta[2]||Eb!==ta[3])R.stencilOpSeparate(sc,$a,lc,Eb),ta[0]=sc,ta[1]=$a,ta[2]=lc,ta[3]=Eb;qc=E[0];Ta=E[1];Kc=E[2];cc=E[3];if(qc!==z[0]||Ta!==z[1]||Kc!==z[2]||cc!==z[3])R.stencilOpSeparate(qc,Ta,Kc,cc),z[0]=qc,z[1]=Ta,z[2]=Kc,z[3]=cc;$c=ha.scissor_enable;$c!==T.scissor_enable&&($c?R.enable(3089):R.disable(3089),T.scissor_enable=
$c);Od=Da[0];md=Da[1];Cc=Da[2];Yb=Da[3];if(Od!==ub[0]||md!==ub[1]||Cc!==ub[2]||Yb!==ub[3])R.scissor(Od,md,Cc,Yb),ub[0]=Od,ub[1]=md,ub[2]=Cc,ub[3]=Yb}e=this.viewport;l=e.x|0;n=e.y|0;p="width"in e?e.width|0:M.framebufferWidth-l;q="height"in e?e.height|0:M.framebufferHeight-n;r=M.viewportWidth;M.viewportWidth=p;u=M.viewportHeight;M.viewportHeight=q;R.viewport(l,n,p,q);fa[0]=l;fa[1]=n;fa[2]=p;fa[3]=q;R.blendColor(0,0,0,1);bb[0]=0;bb[1]=0;bb[2]=0;bb[3]=1;R.enable(3042);T.blend_enable=!0;R.blendFuncSeparate(770,
771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;R.disable(2929);T.depth_enable=!1;R.disable(2960);T.stencil_enable=!1;if(v=T.profile)y=performance.now(),Q.count+=c;R.useProgram(F.program);C=Zb.angle_instanced_arrays;var Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,rf,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb;Oa.setVAO(null);x.buffer=this.sizeBuffer;Hc=!1;Hb=null;La=0;vb=!1;Ea=
Xa=0;sd=1;gb=0;Sa=5126;Sb=tc=cb=Wb=0;t(x)?(Hc=!0,Hb=N.createStream(34962,x),Sa=Hb.dtype):(Hb=N.getBuffer(x))?Sa=Hb.dtype:"constant"in x?(sd=2,"number"===typeof x.constant?(cb=x.constant,tc=Sb=Wb=0):(cb=0<x.constant.length?x.constant[0]:0,tc=1<x.constant.length?x.constant[1]:0,Sb=2<x.constant.length?x.constant[2]:0,Wb=3<x.constant.length?x.constant[3]:0)):(Hb=t(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),Sa="type"in x?ma[x.type]:Hb.dtype,vb=!!x.normalized,Ea=x.size|0,Xa=x.offset|
0,gb=x.stride|0,La=x.divisor|0);De=Na.location;bc=Y[De];if(1===sd){bc.buffer||R.enableVertexAttribArray(De);Tb=Ea||1;if(bc.type!==Sa||bc.size!==Tb||bc.buffer!==Hb||bc.normalized!==vb||bc.offset!==Xa||bc.stride!==gb)R.bindBuffer(34962,Hb.buffer),R.vertexAttribPointer(De,Tb,Sa,vb,gb,Xa),bc.type=Sa,bc.size=Tb,bc.buffer=Hb,bc.normalized=vb,bc.offset=Xa,bc.stride=gb;bc.divisor!==La&&(C.vertexAttribDivisorANGLE(De,La),bc.divisor=La)}else if(bc.buffer&&(R.disableVertexAttribArray(De),bc.buffer=null),bc.x!==
cb||bc.y!==tc||bc.z!==Sb||bc.w!==Wb)R.vertexAttrib4f(De,cb,tc,Sb,Wb),bc.x=cb,bc.y=tc,bc.z=Sb,bc.w=Wb;G.buffer=this.sizeBuffer;td=!1;Ub=null;Ma=0;pb=!1;hb=wb=0;Pa=1;pc=0;Jb=5126;Ic=nc=db=pd=0;t(G)?(td=!0,Ub=N.createStream(34962,G),Jb=Ub.dtype):(Ub=N.getBuffer(G))?Jb=Ub.dtype:"constant"in G?(Pa=2,"number"===typeof G.constant?(db=G.constant,nc=Ic=pd=0):(db=0<G.constant.length?G.constant[0]:0,nc=1<G.constant.length?G.constant[1]:0,Ic=2<G.constant.length?G.constant[2]:0,pd=3<G.constant.length?G.constant[3]:
0)):(Ub=t(G.buffer)?N.createStream(34962,G.buffer):N.getBuffer(G.buffer),Jb="type"in G?ma[G.type]:Ub.dtype,pb=!!G.normalized,hb=G.size|0,wb=G.offset|0,pc=G.stride|0,Ma=G.divisor|0);ec=H.location;kb=Y[ec];if(1===Pa){kb.buffer||R.enableVertexAttribArray(ec);lb=hb||1;if(kb.type!==Jb||kb.size!==lb||kb.buffer!==Ub||kb.normalized!==pb||kb.offset!==wb||kb.stride!==pc)R.bindBuffer(34962,Ub.buffer),R.vertexAttribPointer(ec,lb,Jb,pb,pc,wb),kb.type=Jb,kb.size=lb,kb.buffer=Ub,kb.normalized=pb,kb.offset=wb,kb.stride=
pc;kb.divisor!==Ma&&(C.vertexAttribDivisorANGLE(ec,Ma),kb.divisor=Ma)}else if(kb.buffer&&(R.disableVertexAttribArray(ec),kb.buffer=null),kb.x!==db||kb.y!==nc||kb.z!==Ic||kb.w!==pd)R.vertexAttrib4f(ec,db,nc,Ic,pd),kb.x=db,kb.y=nc,kb.z=Ic,kb.w=pd;ra=this.charBuffer;qb=!1;wa=null;Ua=0;ab=!1;eb=Ba=0;Ia=1;Cb=0;Bb=5126;Mb=Kb=Lc=Ra=0;t(ra)?(qb=!0,wa=N.createStream(34962,ra),Bb=wa.dtype):(wa=N.getBuffer(ra))?Bb=wa.dtype:"constant"in ra?(Ia=2,"number"===typeof ra.constant?(Lc=ra.constant,Kb=Mb=Ra=0):(Lc=0<
ra.constant.length?ra.constant[0]:0,Kb=1<ra.constant.length?ra.constant[1]:0,Mb=2<ra.constant.length?ra.constant[2]:0,Ra=3<ra.constant.length?ra.constant[3]:0)):(wa=t(ra.buffer)?N.createStream(34962,ra.buffer):N.getBuffer(ra.buffer),Bb="type"in ra?ma[ra.type]:wa.dtype,ab=!!ra.normalized,eb=ra.size|0,Ba=ra.offset|0,Cb=ra.stride|0,Ua=ra.divisor|0);Vb=la.location;xa=Y[Vb];if(1===Ia){xa.buffer||R.enableVertexAttribArray(Vb);rf=eb||1;if(xa.type!==Bb||xa.size!==rf||xa.buffer!==wa||xa.normalized!==ab||xa.offset!==
Ba||xa.stride!==Cb)R.bindBuffer(34962,wa.buffer),R.vertexAttribPointer(Vb,rf,Bb,ab,Cb,Ba),xa.type=Bb,xa.size=rf,xa.buffer=wa,xa.normalized=ab,xa.offset=Ba,xa.stride=Cb;xa.divisor!==Ua&&(C.vertexAttribDivisorANGLE(Vb,Ua),xa.divisor=Ua)}else if(xa.buffer&&(R.disableVertexAttribArray(Vb),xa.buffer=null),xa.x!==Lc||xa.y!==Kb||xa.z!==Mb||xa.w!==Ra)R.vertexAttrib4f(Vb,Lc,Kb,Mb,Ra),xa.x=Lc,xa.y=Kb,xa.z=Mb,xa.w=Ra;Ka=this.position;Pb=!1;fb=null;ib=0;ya=!1;Fa=hc=0;rb=1;sb=0;Ya=5126;vc=cd=oc=Za=0;t(Ka)?(Pb=
!0,fb=N.createStream(34962,Ka),Ya=fb.dtype):(fb=N.getBuffer(Ka))?Ya=fb.dtype:"constant"in Ka?(rb=2,"number"===typeof Ka.constant?(oc=Ka.constant,cd=vc=Za=0):(oc=0<Ka.constant.length?Ka.constant[0]:0,cd=1<Ka.constant.length?Ka.constant[1]:0,vc=2<Ka.constant.length?Ka.constant[2]:0,Za=3<Ka.constant.length?Ka.constant[3]:0)):(fb=t(Ka.buffer)?N.createStream(34962,Ka.buffer):N.getBuffer(Ka.buffer),Ya="type"in Ka?ma[Ka.type]:fb.dtype,ya=!!Ka.normalized,Fa=Ka.size|0,hc=Ka.offset|0,sb=Ka.stride|0,ib=Ka.divisor|
0);Wa=pa.location;Nb=Y[Wa];if(1===rb){Nb.buffer||R.enableVertexAttribArray(Wa);dd=Fa||2;if(Nb.type!==Ya||Nb.size!==dd||Nb.buffer!==fb||Nb.normalized!==ya||Nb.offset!==hc||Nb.stride!==sb)R.bindBuffer(34962,fb.buffer),R.vertexAttribPointer(Wa,dd,Ya,ya,sb,hc),Nb.type=Ya,Nb.size=dd,Nb.buffer=fb,Nb.normalized=ya,Nb.offset=hc,Nb.stride=sb;Nb.divisor!==ib&&(C.vertexAttribDivisorANGLE(Wa,ib),Nb.divisor=ib)}else if(Nb.buffer&&(R.disableVertexAttribArray(Wa),Nb.buffer=null),Nb.x!==oc||Nb.y!==cd||Nb.z!==vc||
Nb.w!==Za)R.vertexAttrib4f(Wa,oc,cd,vc,Za),Nb.x=oc,Nb.y=cd,Nb.z=vc,Nb.w=Za;Ga=this.viewportArray;R.uniform4f(ua.location,Ga[0],Ga[1],Ga[2],Ga[3]);yc=this.scale;R.uniform2f(jb.location,yc[0],yc[1]);Qa=this.translate;R.uniform2f(Gb.location,Qa[0],Qa[1]);(Ca=qa.elements)?R.bindBuffer(34963,Ca.buffer.buffer):Oa.currentVAO&&(Ca=J.getElements(Oa.currentVAO.elements))&&R.bindBuffer(34963,Ca.buffer.buffer);mb=qa.instances;for(w=0;w<c;++w){D=a[w];var xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,
Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc,fd;xb=na.call(this,M,D,w);w&&Db===xb||(Db=xb,R.uniform1f(da.location,xb));tb=P.call(this,M,D,w);w&&wc===tb||(wc=tb,R.uniform1f(k.location,tb));yb=D.align;w&&xd===yb||(xd=yb,R.uniform1f(f.location,yb));uc=D.baseline;w&&Hd===uc||(Hd=uc,R.uniform1f(m.location,uc));Nc=D.color;id=Nc[0];Xb=Nc[1];Qb=Nc[2];$b=Nc[3];w&&ed===id&&dc===Xb&&Ha===Qb&&nb===$b||(ed=id,dc=Xb,Ha=Qb,nb=$b,R.uniform4f(b.location,id,Xb,Qb,$b));zb=va.call(this,M,D,w);Ob=zb[0];ic=zb[1];
w&&Rb===Ob&&kc===ic||(Rb=Ob,kc=ic,R.uniform2f(aa.location,Ob,ic));Sc=h.call(this,M,D,w);Dc=Sc[0];Fc=Sc[1];w&&Ec===Dc&&Oc===Fc||(Ec=Dc,Oc=Fc,R.uniform2f(S.location,Dc,Fc));ad=D.positionOffset;Tc=ad[0];Lb=ad[1];w&&Pc===Tc&&Fb===Lb||(Pc=Tc,Fb=Lb,R.uniform2f(Va.location,Tc,Lb));Qc=D.opacity;w&&Jc===Qc||(Jc=Qc,R.uniform1f(X.location,Qc));(Uc=g.call(this,M,D,w))&&"framebuffer"===Uc._reglType&&(Uc=Uc.color[0]);jc=Uc._texture;R.uniform1i(A.location,jc.bind());Xc=D.offset;if(fd=D.count)0<mb?Ca?C.drawElementsInstancedANGLE(0,
fd,Ca.type,Xc<<(Ca.type-5121>>1),mb):C.drawArraysInstancedANGLE(0,Xc,fd,mb):0>mb&&(Ca?R.drawElements(0,fd,Ca.type,Xc<<(Ca.type-5121>>1)):R.drawArrays(0,Xc,fd)),jc.unbind()}Hc&&N.destroyStream(Hb);td&&N.destroyStream(Ub);qb&&N.destroyStream(wa);Pb&&N.destroyStream(fb);T.dirty=!0;Oa.setVAO(null);M.viewportWidth=r;M.viewportHeight=u;v&&(Q.cpuTime+=performance.now()-y)},draw:function(c){var g,h,n,l,u,v,q,C,w,D,B,I,F,L,P,V,ja,Z,va,ca,sa,na,Aa,ac,Ve,yd,Ce,Qd,Rd,Zd,Ke,qd,ld,wd,od,gd,Bc,rd,Rc,Mc,sc,$a,lc,
Eb,qc,Ta,Kc,cc,$c,Od,md,Cc,Yb,Hc,Hb,La,vb,Xa,Ea,sd,gb,Sa,Wb,cb,tc,Sb,De,bc,Tb,td,Ub,Ma,pb,wb,hb,Pa,pc,Jb,pd,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb;g=Ja.next;g!==Ja.cur&&(g?R.bindFramebuffer(36160,g.framebuffer):R.bindFramebuffer(36160,null),Ja.cur=g);if(T.dirty){var Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,rf,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc;Ia=ha.dither;Ia!==T.dither&&(Ia?R.enable(3024):R.disable(3024),T.dither=Ia);Cb=U[0];Bb=U[1];if(Cb!==ob[0]||Bb!==ob[1])R.blendEquationSeparate(Cb,
Bb),ob[0]=Cb,ob[1]=Bb;Ra=ha.depth_func;Ra!==T.depth_func&&(R.depthFunc(Ra),T.depth_func=Ra);Lc=rc[0];Kb=rc[1];if(Lc!==vd[0]||Kb!==vd[1])R.depthRange(Lc,Kb),vd[0]=Lc,vd[1]=Kb;Mb=ha.depth_mask;Mb!==T.depth_mask&&(R.depthMask(Mb),T.depth_mask=Mb);Vb=fc[0];xa=fc[1];rf=fc[2];Ka=fc[3];if(Vb!==gc[0]||xa!==gc[1]||rf!==gc[2]||Ka!==gc[3])R.colorMask(Vb,xa,rf,Ka),gc[0]=Vb,gc[1]=xa,gc[2]=rf,gc[3]=Ka;Pb=ha.cull_enable;Pb!==T.cull_enable&&(Pb?R.enable(2884):R.disable(2884),T.cull_enable=Pb);fb=ha.cull_face;fb!==
T.cull_face&&(R.cullFace(fb),T.cull_face=fb);ib=ha.frontFace;ib!==T.frontFace&&(R.frontFace(ib),T.frontFace=ib);ya=ha.lineWidth;ya!==T.lineWidth&&(R.lineWidth(ya),T.lineWidth=ya);hc=ha.polygonOffset_enable;hc!==T.polygonOffset_enable&&(hc?R.enable(32823):R.disable(32823),T.polygonOffset_enable=hc);Fa=xc[0];rb=xc[1];if(Fa!==W[0]||rb!==W[1])R.polygonOffset(Fa,rb),W[0]=Fa,W[1]=rb;sb=ha.sample_alpha;sb!==T.sample_alpha&&(sb?R.enable(32926):R.disable(32926),T.sample_alpha=sb);Ya=ha.sample_enable;Ya!==
T.sample_enable&&(Ya?R.enable(32928):R.disable(32928),T.sample_enable=Ya);Za=K[0];oc=K[1];if(Za!==ia[0]||oc!==ia[1])R.sampleCoverage(Za,oc),ia[0]=Za,ia[1]=oc;cd=ha.stencil_mask;cd!==T.stencil_mask&&(R.stencilMask(cd),T.stencil_mask=cd);vc=Vc[0];Wa=Vc[1];Nb=Vc[2];if(vc!==Ac[0]||Wa!==Ac[1]||Nb!==Ac[2])R.stencilFunc(vc,Wa,Nb),Ac[0]=vc,Ac[1]=Wa,Ac[2]=Nb;dd=ga[0];Ga=ga[1];yc=ga[2];Qa=ga[3];if(dd!==ta[0]||Ga!==ta[1]||yc!==ta[2]||Qa!==ta[3])R.stencilOpSeparate(dd,Ga,yc,Qa),ta[0]=dd,ta[1]=Ga,ta[2]=yc,ta[3]=
Qa;Ca=E[0];mb=E[1];xb=E[2];Db=E[3];if(Ca!==z[0]||mb!==z[1]||xb!==z[2]||Db!==z[3])R.stencilOpSeparate(Ca,mb,xb,Db),z[0]=Ca,z[1]=mb,z[2]=xb,z[3]=Db;tb=ha.scissor_enable;tb!==T.scissor_enable&&(tb?R.enable(3089):R.disable(3089),T.scissor_enable=tb);wc=Da[0];yb=Da[1];xd=Da[2];uc=Da[3];if(wc!==ub[0]||yb!==ub[1]||xd!==ub[2]||uc!==ub[3])R.scissor(wc,yb,xd,uc),ub[0]=wc,ub[1]=yb,ub[2]=xd,ub[3]=uc}h=this.viewport;n=h.x|0;l=h.y|0;u="width"in h?h.width|0:M.framebufferWidth-n;v="height"in h?h.height|0:M.framebufferHeight-
l;q=M.viewportWidth;M.viewportWidth=u;C=M.viewportHeight;M.viewportHeight=v;R.viewport(n,l,u,v);fa[0]=n;fa[1]=l;fa[2]=u;fa[3]=v;R.blendColor(0,0,0,1);bb[0]=0;bb[1]=0;bb[2]=0;bb[3]=1;R.enable(3042);T.blend_enable=!0;R.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;R.disable(2929);T.depth_enable=!1;R.disable(2960);T.stencil_enable=!1;if(w=T.profile)D=performance.now(),Q.count++;R.useProgram(p.program);B=Zb.angle_instanced_arrays;Oa.setVAO(null);x.buffer=this.sizeBuffer;I=!1;
F=null;L=0;P=!1;ja=V=0;Z=1;va=0;ca=5126;ac=Aa=na=sa=0;t(x)?(I=!0,F=N.createStream(34962,x),ca=F.dtype):(F=N.getBuffer(x))?ca=F.dtype:"constant"in x?(Z=2,"number"===typeof x.constant?(na=x.constant,Aa=ac=sa=0):(na=0<x.constant.length?x.constant[0]:0,Aa=1<x.constant.length?x.constant[1]:0,ac=2<x.constant.length?x.constant[2]:0,sa=3<x.constant.length?x.constant[3]:0)):(F=t(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),ca="type"in x?ma[x.type]:F.dtype,P=!!x.normalized,ja=x.size|0,V=x.offset|
0,va=x.stride|0,L=x.divisor|0);Ve=Na.location;yd=Y[Ve];if(1===Z){yd.buffer||R.enableVertexAttribArray(Ve);Ce=ja||1;if(yd.type!==ca||yd.size!==Ce||yd.buffer!==F||yd.normalized!==P||yd.offset!==V||yd.stride!==va)R.bindBuffer(34962,F.buffer),R.vertexAttribPointer(Ve,Ce,ca,P,va,V),yd.type=ca,yd.size=Ce,yd.buffer=F,yd.normalized=P,yd.offset=V,yd.stride=va;yd.divisor!==L&&(B.vertexAttribDivisorANGLE(Ve,L),yd.divisor=L)}else if(yd.buffer&&(R.disableVertexAttribArray(Ve),yd.buffer=null),yd.x!==na||yd.y!==
Aa||yd.z!==ac||yd.w!==sa)R.vertexAttrib4f(Ve,na,Aa,ac,sa),yd.x=na,yd.y=Aa,yd.z=ac,yd.w=sa;G.buffer=this.sizeBuffer;Qd=!1;Rd=null;Zd=0;Ke=!1;ld=qd=0;wd=1;od=0;gd=5126;Mc=Rc=rd=Bc=0;t(G)?(Qd=!0,Rd=N.createStream(34962,G),gd=Rd.dtype):(Rd=N.getBuffer(G))?gd=Rd.dtype:"constant"in G?(wd=2,"number"===typeof G.constant?(rd=G.constant,Rc=Mc=Bc=0):(rd=0<G.constant.length?G.constant[0]:0,Rc=1<G.constant.length?G.constant[1]:0,Mc=2<G.constant.length?G.constant[2]:0,Bc=3<G.constant.length?G.constant[3]:0)):(Rd=
t(G.buffer)?N.createStream(34962,G.buffer):N.getBuffer(G.buffer),gd="type"in G?ma[G.type]:Rd.dtype,Ke=!!G.normalized,ld=G.size|0,qd=G.offset|0,od=G.stride|0,Zd=G.divisor|0);sc=H.location;$a=Y[sc];if(1===wd){$a.buffer||R.enableVertexAttribArray(sc);lc=ld||1;if($a.type!==gd||$a.size!==lc||$a.buffer!==Rd||$a.normalized!==Ke||$a.offset!==qd||$a.stride!==od)R.bindBuffer(34962,Rd.buffer),R.vertexAttribPointer(sc,lc,gd,Ke,od,qd),$a.type=gd,$a.size=lc,$a.buffer=Rd,$a.normalized=Ke,$a.offset=qd,$a.stride=
od;$a.divisor!==Zd&&(B.vertexAttribDivisorANGLE(sc,Zd),$a.divisor=Zd)}else if($a.buffer&&(R.disableVertexAttribArray(sc),$a.buffer=null),$a.x!==rd||$a.y!==Rc||$a.z!==Mc||$a.w!==Bc)R.vertexAttrib4f(sc,rd,Rc,Mc,Bc),$a.x=rd,$a.y=Rc,$a.z=Mc,$a.w=Bc;Eb=this.charBuffer;qc=!1;Ta=null;Kc=0;cc=!1;Od=$c=0;md=1;Cc=0;Yb=5126;vb=La=Hb=Hc=0;t(Eb)?(qc=!0,Ta=N.createStream(34962,Eb),Yb=Ta.dtype):(Ta=N.getBuffer(Eb))?Yb=Ta.dtype:"constant"in Eb?(md=2,"number"===typeof Eb.constant?(Hb=Eb.constant,La=vb=Hc=0):(Hb=0<
Eb.constant.length?Eb.constant[0]:0,La=1<Eb.constant.length?Eb.constant[1]:0,vb=2<Eb.constant.length?Eb.constant[2]:0,Hc=3<Eb.constant.length?Eb.constant[3]:0)):(Ta=t(Eb.buffer)?N.createStream(34962,Eb.buffer):N.getBuffer(Eb.buffer),Yb="type"in Eb?ma[Eb.type]:Ta.dtype,cc=!!Eb.normalized,Od=Eb.size|0,$c=Eb.offset|0,Cc=Eb.stride|0,Kc=Eb.divisor|0);Xa=la.location;Ea=Y[Xa];if(1===md){Ea.buffer||R.enableVertexAttribArray(Xa);sd=Od||1;if(Ea.type!==Yb||Ea.size!==sd||Ea.buffer!==Ta||Ea.normalized!==cc||Ea.offset!==
$c||Ea.stride!==Cc)R.bindBuffer(34962,Ta.buffer),R.vertexAttribPointer(Xa,sd,Yb,cc,Cc,$c),Ea.type=Yb,Ea.size=sd,Ea.buffer=Ta,Ea.normalized=cc,Ea.offset=$c,Ea.stride=Cc;Ea.divisor!==Kc&&(B.vertexAttribDivisorANGLE(Xa,Kc),Ea.divisor=Kc)}else if(Ea.buffer&&(R.disableVertexAttribArray(Xa),Ea.buffer=null),Ea.x!==Hb||Ea.y!==La||Ea.z!==vb||Ea.w!==Hc)R.vertexAttrib4f(Xa,Hb,La,vb,Hc),Ea.x=Hb,Ea.y=La,Ea.z=vb,Ea.w=Hc;gb=this.position;Sa=!1;Wb=null;cb=0;tc=!1;De=Sb=0;bc=1;Tb=0;td=5126;wb=pb=Ma=Ub=0;t(gb)?(Sa=
!0,Wb=N.createStream(34962,gb),td=Wb.dtype):(Wb=N.getBuffer(gb))?td=Wb.dtype:"constant"in gb?(bc=2,"number"===typeof gb.constant?(Ma=gb.constant,pb=wb=Ub=0):(Ma=0<gb.constant.length?gb.constant[0]:0,pb=1<gb.constant.length?gb.constant[1]:0,wb=2<gb.constant.length?gb.constant[2]:0,Ub=3<gb.constant.length?gb.constant[3]:0)):(Wb=t(gb.buffer)?N.createStream(34962,gb.buffer):N.getBuffer(gb.buffer),td="type"in gb?ma[gb.type]:Wb.dtype,tc=!!gb.normalized,De=gb.size|0,Sb=gb.offset|0,Tb=gb.stride|0,cb=gb.divisor|
0);hb=pa.location;Pa=Y[hb];if(1===bc){Pa.buffer||R.enableVertexAttribArray(hb);pc=De||2;if(Pa.type!==td||Pa.size!==pc||Pa.buffer!==Wb||Pa.normalized!==tc||Pa.offset!==Sb||Pa.stride!==Tb)R.bindBuffer(34962,Wb.buffer),R.vertexAttribPointer(hb,pc,td,tc,Tb,Sb),Pa.type=td,Pa.size=pc,Pa.buffer=Wb,Pa.normalized=tc,Pa.offset=Sb,Pa.stride=Tb;Pa.divisor!==cb&&(B.vertexAttribDivisorANGLE(hb,cb),Pa.divisor=cb)}else if(Pa.buffer&&(R.disableVertexAttribArray(hb),Pa.buffer=null),Pa.x!==Ma||Pa.y!==pb||Pa.z!==wb||
Pa.w!==Ub)R.vertexAttrib4f(hb,Ma,pb,wb,Ub),Pa.x=Ma,Pa.y=pb,Pa.z=wb,Pa.w=Ub;Jb=y.call(this,M,c,0);R.uniform1f(da.location,Jb);pd=e.call(this,M,c,0);R.uniform1f(k.location,pd);R.uniform1f(f.location,c.align);R.uniform1f(m.location,c.baseline);db=this.viewportArray;R.uniform4f(ua.location,db[0],db[1],db[2],db[3]);nc=c.color;R.uniform4f(b.location,nc[0],nc[1],nc[2],nc[3]);Ic=d.call(this,M,c,0);R.uniform2f(aa.location,Ic[0],Ic[1]);ec=r.call(this,M,c,0);R.uniform2f(S.location,ec[0],ec[1]);kb=this.scale;
R.uniform2f(jb.location,kb[0],kb[1]);lb=this.translate;R.uniform2f(Gb.location,lb[0],lb[1]);ra=c.positionOffset;R.uniform2f(Va.location,ra[0],ra[1]);R.uniform1f(X.location,c.opacity);(qb=a.call(this,M,c,0))&&"framebuffer"===qb._reglType&&(qb=qb.color[0]);wa=qb._texture;R.uniform1i(A.location,wa.bind());(Ua=qa.elements)?R.bindBuffer(34963,Ua.buffer.buffer):Oa.currentVAO&&(Ua=J.getElements(Oa.currentVAO.elements))&&R.bindBuffer(34963,Ua.buffer.buffer);ab=c.offset;if(Ba=c.count)eb=qa.instances,0<eb?
Ua?B.drawElementsInstancedANGLE(0,Ba,Ua.type,ab<<(Ua.type-5121>>1),eb):B.drawArraysInstancedANGLE(0,ab,Ba,eb):0>eb&&(Ua?R.drawElements(0,Ba,Ua.type,ab<<(Ua.type-5121>>1)):R.drawArrays(0,ab,Ba)),T.dirty=!0,Oa.setVAO(null),M.viewportWidth=q,M.viewportHeight=C,w&&(Q.cpuTime+=performance.now()-D),I&&N.destroyStream(F),Qd&&N.destroyStream(Rd),qc&&N.destroyStream(Ta),Sa&&N.destroyStream(Wb),wa.unbind()},scope:function(b,a,c){var d,e,f,g,h,k,m,p,r,y,A,z,E,H,F,K,J,S,P,W,R,aa,X,U,fa,Y,da,va,ga,la,ia,ta,na,
oa,pa,ua,Da,Ja,Na,Oa,xc,bb,Va,Ta,ub,jb,ob,Gb,vd,Zb,Yb,fc,Hb,La,vb,Xa,Ea,gc,gb,Sa,Wb,cb,tc,Sb,rc,bc,Tb,Ac,Ub,Ma,pb,wb,hb,Pa,pc,Jb,Vc,db,nc,Ic,ec,kb,lb,ra,qb,wa,Ua,ab,Ba,eb,Ia,Cb,Bb,Ra,Lc,Kb,Mb,Vb,xa,ze,Ka,Pb,fb,ib,ya,hc,Fa,rb,sb,Ya,Za,oc,cd,vc,Wa,Nb,dd,Ga,yc,Qa,Ca,mb,xb,Db,tb,wc,yb,xd,uc,Hd,Nc,id,ed,Xb,dc,Qb,Ha,$b,nb,zb,Ob,Rb,ic,kc,Sc,Dc,Ec,Fc,Oc,ad,Tc,Pc,Lb,Fb,Qc,Jc,Uc,jc,Xc;d=this.viewport;e=d.x|0;f=d.y|0;g="width"in d?d.width|0:M.framebufferWidth-e;h="height"in d?d.height|0:M.framebufferHeight-
f;k=M.viewportWidth;M.viewportWidth=g;m=M.viewportHeight;M.viewportHeight=h;p=V[0];V[0]=e;r=V[1];V[1]=f;y=V[2];V[2]=g;A=V[3];V[3]=h;z=ac[0];ac[0]=0;E=ac[1];ac[1]=0;H=ac[2];ac[2]=0;F=ac[3];ac[3]=1;K=ha.blend_enable;ha.blend_enable=!0;J=ca[0];ca[0]=770;S=ca[1];ca[1]=771;P=ca[2];ca[2]=773;W=ca[3];ca[3]=1;R=ha.depth_enable;ha.depth_enable=!1;aa=ha.stencil_enable;ha.stencil_enable=!1;if(X=T.profile)U=performance.now(),Q.count++;fa=b.offset;Y=qa.offset;qa.offset=fa;da=b.count;va=qa.count;qa.count=da;ga=
qa.primitive;qa.primitive=0;la=b.align;ia=Aa[64];Aa[64]=la;ta=u.call(this,M,b,c);na=Aa[69];Aa[69]=ta;oa=w.call(this,M,b,c);pa=Aa[67];Aa[67]=oa;ua=B.call(this,M,b,c);Da=Aa[66];Aa[66]=ua;Ja=b.baseline;Na=Aa[65];Aa[65]=Ja;Oa=n.call(this,M,b,c);xc=Aa[62];Aa[62]=Oa;bb=b.color;Va=Aa[14];Aa[14]=bb;Ta=I.call(this,M,b,c);ub=Aa[63];Aa[63]=Ta;jb=b.opacity;ob=Aa[10];Aa[10]=jb;Gb=b.positionOffset;vd=Aa[68];Aa[68]=Gb;Zb=this.scale;Yb=Aa[6];Aa[6]=Zb;fc=this.translate;Hb=Aa[8];Aa[8]=fc;La=this.viewportArray;vb=Aa[3];
Aa[3]=La;Xa=this.charBuffer;Ea=!1;gc=null;gb=0;Sa=!1;cb=Wb=0;tc=1;Sb=0;rc=5126;Ub=Ac=Tb=bc=0;t(Xa)?(Ea=!0,gc=N.createStream(34962,Xa),rc=gc.dtype):(gc=N.getBuffer(Xa))?rc=gc.dtype:"constant"in Xa?(tc=2,"number"===typeof Xa.constant?(Tb=Xa.constant,Ac=Ub=bc=0):(Tb=0<Xa.constant.length?Xa.constant[0]:0,Ac=1<Xa.constant.length?Xa.constant[1]:0,Ub=2<Xa.constant.length?Xa.constant[2]:0,bc=3<Xa.constant.length?Xa.constant[3]:0)):(gc=t(Xa.buffer)?N.createStream(34962,Xa.buffer):N.getBuffer(Xa.buffer),rc=
"type"in Xa?ma[Xa.type]:gc.dtype,Sa=!!Xa.normalized,cb=Xa.size|0,Wb=Xa.offset|0,Sb=Xa.stride|0,gb=Xa.divisor|0);Ma=v.buffer;v.buffer=gc;pb=v.divisor;v.divisor=gb;wb=v.normalized;v.normalized=Sa;hb=v.offset;v.offset=Wb;Pa=v.size;v.size=cb;pc=v.state;v.state=tc;Jb=v.stride;v.stride=Sb;Vc=v.type;v.type=rc;db=v.w;v.w=bc;nc=v.x;v.x=Tb;Ic=v.y;v.y=Ac;ec=v.z;v.z=Ub;G.buffer=this.sizeBuffer;kb=!1;lb=null;ra=0;qb=!1;Ua=wa=0;ab=1;Ba=0;eb=5126;Ra=Bb=Cb=Ia=0;t(G)?(kb=!0,lb=N.createStream(34962,G),eb=lb.dtype):
(lb=N.getBuffer(G))?eb=lb.dtype:"constant"in G?(ab=2,"number"===typeof G.constant?(Cb=G.constant,Bb=Ra=Ia=0):(Cb=0<G.constant.length?G.constant[0]:0,Bb=1<G.constant.length?G.constant[1]:0,Ra=2<G.constant.length?G.constant[2]:0,Ia=3<G.constant.length?G.constant[3]:0)):(lb=t(G.buffer)?N.createStream(34962,G.buffer):N.getBuffer(G.buffer),eb="type"in G?ma[G.type]:lb.dtype,qb=!!G.normalized,Ua=G.size|0,wa=G.offset|0,Ba=G.stride|0,ra=G.divisor|0);Lc=D.buffer;D.buffer=lb;Kb=D.divisor;D.divisor=ra;Mb=D.normalized;
D.normalized=qb;Vb=D.offset;D.offset=wa;xa=D.size;D.size=Ua;ze=D.state;D.state=ab;Ka=D.stride;D.stride=Ba;Pb=D.type;D.type=eb;fb=D.w;D.w=Ia;ib=D.x;D.x=Cb;ya=D.y;D.y=Bb;hc=D.z;D.z=Ra;Fa=this.position;rb=!1;sb=null;Ya=0;Za=!1;cd=oc=0;vc=1;Wa=0;Nb=5126;Qa=yc=Ga=dd=0;t(Fa)?(rb=!0,sb=N.createStream(34962,Fa),Nb=sb.dtype):(sb=N.getBuffer(Fa))?Nb=sb.dtype:"constant"in Fa?(vc=2,"number"===typeof Fa.constant?(Ga=Fa.constant,yc=Qa=dd=0):(Ga=0<Fa.constant.length?Fa.constant[0]:0,yc=1<Fa.constant.length?Fa.constant[1]:
0,Qa=2<Fa.constant.length?Fa.constant[2]:0,dd=3<Fa.constant.length?Fa.constant[3]:0)):(sb=t(Fa.buffer)?N.createStream(34962,Fa.buffer):N.getBuffer(Fa.buffer),Nb="type"in Fa?ma[Fa.type]:sb.dtype,Za=!!Fa.normalized,cd=Fa.size|0,oc=Fa.offset|0,Wa=Fa.stride|0,Ya=Fa.divisor|0);Ca=L.buffer;L.buffer=sb;mb=L.divisor;L.divisor=Ya;xb=L.normalized;L.normalized=Za;Db=L.offset;L.offset=oc;tb=L.size;L.size=cd;wc=L.state;L.state=vc;yb=L.stride;L.stride=Wa;xd=L.type;L.type=Nb;uc=L.w;L.w=dd;Hd=L.x;L.x=Ga;Nc=L.y;L.y=
yc;id=L.z;L.z=Qa;x.buffer=this.sizeBuffer;ed=!1;Xb=null;dc=0;Qb=!1;$b=Ha=0;nb=1;zb=0;Ob=5126;Sc=kc=ic=Rb=0;t(x)?(ed=!0,Xb=N.createStream(34962,x),Ob=Xb.dtype):(Xb=N.getBuffer(x))?Ob=Xb.dtype:"constant"in x?(nb=2,"number"===typeof x.constant?(ic=x.constant,kc=Sc=Rb=0):(ic=0<x.constant.length?x.constant[0]:0,kc=1<x.constant.length?x.constant[1]:0,Sc=2<x.constant.length?x.constant[2]:0,Rb=3<x.constant.length?x.constant[3]:0)):(Xb=t(x.buffer)?N.createStream(34962,x.buffer):N.getBuffer(x.buffer),Ob="type"in
x?ma[x.type]:Xb.dtype,Qb=!!x.normalized,$b=x.size|0,Ha=x.offset|0,zb=x.stride|0,dc=x.divisor|0);Dc=C.buffer;C.buffer=Xb;Ec=C.divisor;C.divisor=dc;Fc=C.normalized;C.normalized=Qb;Oc=C.offset;C.offset=Ha;ad=C.size;C.size=$b;Tc=C.state;C.state=nb;Pc=C.stride;C.stride=zb;Lb=C.type;C.type=Ob;Fb=C.w;C.w=Rb;Qc=C.x;C.x=ic;Jc=C.y;C.y=kc;Uc=C.z;C.z=Sc;jc=Z.vert;Z.vert=61;Xc=Z.frag;Z.frag=60;T.dirty=!0;a(M,b,c);M.viewportWidth=k;M.viewportHeight=m;V[0]=p;V[1]=r;V[2]=y;V[3]=A;ac[0]=z;ac[1]=E;ac[2]=H;ac[3]=F;
ha.blend_enable=K;ca[0]=J;ca[1]=S;ca[2]=P;ca[3]=W;ha.depth_enable=R;ha.stencil_enable=aa;X&&(Q.cpuTime+=performance.now()-U);qa.offset=Y;qa.count=va;qa.primitive=ga;Aa[64]=ia;Aa[69]=na;Aa[67]=pa;Aa[66]=Da;Aa[65]=Na;Aa[62]=xc;Aa[14]=Va;Aa[63]=ub;Aa[10]=ob;Aa[68]=vd;Aa[6]=Yb;Aa[8]=Hb;Aa[3]=vb;Ea&&N.destroyStream(gc);v.buffer=Ma;v.divisor=pb;v.normalized=wb;v.offset=hb;v.size=Pa;v.state=pc;v.stride=Jb;v.type=Vc;v.w=db;v.x=nc;v.y=Ic;v.z=ec;kb&&N.destroyStream(lb);D.buffer=Lc;D.divisor=Kb;D.normalized=
Mb;D.offset=Vb;D.size=xa;D.state=ze;D.stride=Ka;D.type=Pb;D.w=fb;D.x=ib;D.y=ya;D.z=hc;rb&&N.destroyStream(sb);L.buffer=Ca;L.divisor=mb;L.normalized=xb;L.offset=Db;L.size=tb;L.state=wc;L.stride=yb;L.type=xd;L.w=uc;L.x=Hd;L.y=Nc;L.z=id;ed&&N.destroyStream(Xb);C.buffer=Dc;C.divisor=Ec;C.normalized=Fc;C.offset=Oc;C.size=ad;C.state=Tc;C.stride=Pc;C.type=Lb;C.w=Fb;C.x=Qc;C.y=Jc;C.z=Uc;Z.vert=jc;Z.frag=Xc;T.dirty=!0}}}}},{}],25:[function(B,w,Va){var c=B("./sorted-object-keys");w.exports=function(w,p){for(var y=
c(p),e=0;e<y.length;++e)w[y[e]]=p[y[e]];return w}},{"./sorted-object-keys":34}],26:[function(B,w,Va){function c(c,e,d,p,a,u){for(var w=0;w<e;++w)for(var B=c[w],n=0;n<d;++n)for(var Q=B[n],v=0;v<p;++v)a[u++]=Q[v]}function Q(p,e,d,r,a){for(var u=1,w=d+1;w<e.length;++w)u*=e[w];var B=e[d];if(4===e.length-d){var n=e[d+1],I=e[d+2];e=e[d+3];for(w=0;w<B;++w)c(p[w],n,I,e,r,a),a+=u}else for(w=0;w<B;++w)Q(p[w],e,d+1,r,a),a+=u}var p=B("./pool");w.exports={shape:function(c){for(var e=[];c.length;c=c[0])e.push(c.length);
return e},flatten:function(y,e,d,r){var a=1;if(e.length)for(var u=0;u<e.length;++u)a*=e[u];else a=0;d=r||p.allocType(d,a);switch(e.length){case 0:break;case 1:r=e[0];for(e=0;e<r;++e)d[e]=y[e];break;case 2:r=e[0];e=e[1];for(u=a=0;u<r;++u)for(var w=y[u],B=0;B<e;++B)d[a++]=w[B];break;case 3:c(y,e[0],e[1],e[2],d,0);break;default:Q(y,e,0,d,0)}return d}}},{"./pool":32}],27:[function(B,w,Va){var c=B("./is-typed-array");w.exports=function(w){return Array.isArray(w)||c(w)}},{"./is-typed-array":30}],28:[function(B,
w,Va){var c=B("./is-typed-array");w.exports=function(w){return!!w&&"object"===typeof w&&Array.isArray(w.shape)&&Array.isArray(w.stride)&&"number"===typeof w.offset&&w.shape.length===w.stride.length&&(Array.isArray(w.data)||c(w.data))}},{"./is-typed-array":30}],29:[function(B,w,Va){w.exports=function(c){return!(c&c-1)&&!!c}},{}],30:[function(B,w,Va){w.exports=function(c){return c instanceof Uint8Array||c instanceof Uint16Array||c instanceof Uint32Array||c instanceof Int8Array||c instanceof Int16Array||
c instanceof Int32Array||c instanceof Float32Array||c instanceof Float64Array||c instanceof Uint8ClampedArray}},{}],31:[function(B,w,Va){w.exports=function(c,w){for(var p=Array(c),y=0;y<c;++y)p[y]=w(y);return p}},{}],32:[function(B,w,Va){function c(c){var e,d;e=(65535<c)<<4;c>>>=e;d=(255<c)<<3;c>>>=d;e|=d;d=(15<c)<<2;c>>>=d;e|=d;d=(3<c)<<1;return e|d|c>>>d>>1}function Q(){function y(e){a:{for(var a=16;268435456>=a;a*=16)if(e<=a){e=a;break a}e=0}a=d[c(e)>>2];return 0<a.length?a.pop():new ArrayBuffer(e)}
function e(e){d[c(e.byteLength)>>2].push(e)}var d=p(8,function(){return[]});return{alloc:y,free:e,allocType:function(c,a){var d=null;switch(c){case 5120:d=new Int8Array(y(a),0,a);break;case 5121:d=new Uint8Array(y(a),0,a);break;case 5122:d=new Int16Array(y(2*a),0,a);break;case 5123:d=new Uint16Array(y(2*a),0,a);break;case 5124:d=new Int32Array(y(4*a),0,a);break;case 5125:d=new Uint32Array(y(4*a),0,a);break;case 5126:d=new Float32Array(y(4*a),0,a);break;default:return null}return d.length!==a?d.subarray(0,
a):d},freeType:function(c){e(c.buffer)}}}var p=B("./loop");B=Q();B.zero=Q();w.exports=B},{"./loop":31}],33:[function(B,w,Va){w.exports={next:"function"===typeof requestAnimationFrame?function(c){return requestAnimationFrame(c)}:function(c){return setTimeout(c,16)},cancel:"function"===typeof cancelAnimationFrame?function(c){return cancelAnimationFrame(c)}:clearTimeout}},{}],34:[function(B,w,Va){w.exports=function(c){return Object.keys(c).sort()}},{}],35:[function(B,w,Va){var c=B("./pool"),Q=new Float32Array(1),
p=new Uint32Array(Q.buffer);w.exports=function(y){for(var e=c.allocType(5123,y.length),d=0;d<y.length;++d)if(isNaN(y[d]))e[d]=65535;else if(Infinity===y[d])e[d]=31744;else if(-Infinity===y[d])e[d]=64512;else{Q[0]=y[d];var r=p[0],a=r>>>31<<15,u=(r<<1>>>24)-127,r=r>>13&1023;e[d]=-24>u?a:-14>u?a+(r+1024>>-14-u):15<u?a+31744:a+(u+15<<10)+r}return e}},{"./pool":32}],36:[function(B,w,Va){var c=B("./sorted-object-keys");w.exports=function(w){return c(w).map(function(c){return w[c]})}},{"./sorted-object-keys":34}],
37:[function(B,w,Va){function c(c,a,e){function p(){var a=window.innerWidth,d=window.innerHeight;c!==document.body&&(d=y.getBoundingClientRect(),a=d.right-d.left,d=d.bottom-d.top);y.width=e*a;y.height=e*d}var y=document.createElement("canvas");d(y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});c.appendChild(y);c===document.body&&(y.style.position="absolute",d(c.style,{margin:0,padding:0}));var n;c!==document.body&&"function"===typeof ResizeObserver?(n=new ResizeObserver(function(){setTimeout(p)}),
n.observe(c)):window.addEventListener("resize",p,!1);p();return{canvas:y,onDestroy:function(){n?n.disconnect():window.removeEventListener("resize",p);c.removeChild(y)}}}function Q(c,a){function d(e){try{return c.getContext(e,a)}catch(p){return null}}return d("webgl")||d("experimental-webgl")||d("webgl-experimental")}function p(c){if("string"===typeof c)return c.split();e(Array.isArray(c),"invalid extension array");return c}function y(c){return"string"===typeof c?(e("undefined"!==typeof document,"not supported outside of DOM"),
document.querySelector(c)):c}var e=B("./util/check"),d=B("./util/extend");w.exports=function(d){var a=d||{},u,w,B,n;d={};var I=[],v=[],D="undefined"===typeof window?1:window.devicePixelRatio,L=!1,C=function(a){a&&e.raise(a)},F=function(){};"string"===typeof a?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),u=document.querySelector(a),e(u,"invalid query string for element")):"object"===typeof a?"string"===typeof a.nodeName&&"function"===typeof a.appendChild&&
"function"===typeof a.getBoundingClientRect?u=a:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?(n=a,B=n.canvas):(e.constructor(a),"gl"in a?n=a.gl:"canvas"in a?B=y(a.canvas):"container"in a&&(w=y(a.container)),"attributes"in a&&(d=a.attributes,e.type(d,"object","invalid context attributes")),"extensions"in a&&(I=p(a.extensions)),"optionalExtensions"in a&&(v=p(a.optionalExtensions)),"onDone"in a&&(e.type(a.onDone,"function","invalid or missing onDone callback"),C=a.onDone),"profile"in
a&&(L=!!a.profile),"pixelRatio"in a&&(D=+a.pixelRatio,e(0<D,"invalid pixel ratio"))):e.raise("invalid arguments to regl");u&&("canvas"===u.nodeName.toLowerCase()?B=u:w=u);if(!n){if(!B){e("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");u=c(w||document.body,C,D);if(!u)return null;B=u.canvas;F=u.onDestroy}void 0===d.premultipliedAlpha&&(d.premultipliedAlpha=!0);n=Q(B,d)}return n?{gl:n,canvas:B,container:w,extensions:I,optionalExtensions:v,pixelRatio:D,
profile:L,onDone:C,onDestroy:F}:(F(),C("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(B,w,Va){w.exports=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}},{}],39:[function(B,w,Va){var c=B("./identity");w.exports=function(w,p,y,e){var d,r,a,u,B,sa,n,I,v=p[0],D=p[1];p=p[2];a=e[0];u=e[1];r=e[2];n=y[0];e=y[1];
d=y[2];if(1E-6>Math.abs(v-n)&&1E-6>Math.abs(D-e)&&1E-6>Math.abs(p-d))return c(w);y=v-n;e=D-e;n=p-d;I=1/Math.sqrt(y*y+e*e+n*n);y*=I;e*=I;n*=I;d=u*n-r*e;r=r*y-a*n;a=a*e-u*y;(I=Math.sqrt(d*d+r*r+a*a))?(I=1/I,d*=I,r*=I,a*=I):a=r=d=0;u=e*a-n*r;B=n*d-y*a;sa=y*r-e*d;(I=Math.sqrt(u*u+B*B+sa*sa))?(I=1/I,u*=I,B*=I,sa*=I):sa=B=u=0;w[0]=d;w[1]=u;w[2]=y;w[3]=0;w[4]=r;w[5]=B;w[6]=e;w[7]=0;w[8]=a;w[9]=sa;w[10]=n;w[11]=0;w[12]=-(d*v+r*D+a*p);w[13]=-(u*v+B*D+sa*p);w[14]=-(y*v+e*D+n*p);w[15]=1;return w}},{"./identity":38}],
40:[function(B,w,Va){w.exports=function(c,w,p,y,e){w=1/Math.tan(w/2);var d=1/(y-e);c[0]=w/p;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=w;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=(e+y)*d;c[11]=-1;c[12]=0;c[13]=0;c[14]=2*e*y*d;c[15]=0;return c}},{}],41:[function(B,w,Va){function c(c){throw Error("resl: "+c);}function Q(d,a,e){Object.keys(d).forEach(function(d){0>a.indexOf(d)&&c('invalid parameter "'+d+'" in '+e)})}function p(c,a){this.state=0;this.ready=!1;this.progress=0;this.name=c;this.cancel=a}var y=["manifest",
"onDone","onProgress","onError"],e=["type","src","stream","credentials","parser"],d=["onData","onDone"];w.exports=function(r){function a(a,d){if(a in r){var e=r[a];"function"!==typeof e&&c('invalid callback "'+a+'"');return e}return null}function u(a){function c(){if(!(2>u.readyState||1===w.state||-1===w.state)){if(200!==u.status)return B('error loading resource "'+a.name+'"');if(2<u.readyState&&0===w.state){var e;e="binary"===a.type?u.response:u.responseText;if(v.data)try{m=v.data(e)}catch(f){return B(f)}else m=
e}if(3<u.readyState&&0===w.state){if(v.done)try{m=v.done()}catch(f){return B(f)}w.state=1}C[d]=m;w.progress=.75*w.progress+.25;w.ready=a.stream&&!!m||1===w.state;n()}}var d=a.name,e=a.stream,r="binary"===a.type,v=a.parser,u=new XMLHttpRequest,m=null,w=new p(d,function(){1!==w.state&&-1!==w.state&&(u.onreadystatechange=null,u.abort(),w.state=-1)});u.onreadystatechange=e?c:function(){4===u.readyState&&c()};r&&(u.responseType="arraybuffer");a.credentials&&(u.withCredentials=!0);u.open("GET",a.src,!0);
u.send();return w}function w(a,c){function d(){if(0===D.state)if(y.data)try{F=y.data(c)}catch(b){return B(b)}else F=c}function e(b){d();C[m]=F;D.progress=b.lengthComputable?Math.max(D.progress,b.loaded/b.total):.75*D.progress+.25;n(m)}function r(){d();if(0===D.state){if(y.done)try{F=y.done()}catch(b){return B(b)}D.state=1}D.progress=1;D.ready=!0;C[m]=F;v();n("finish "+m)}function u(){B('error loading asset "'+m+'"')}function v(){a.stream&&c.removeEventListener("progress",e);"image"===a.type?c.addEventListener("load",
r):c.addEventListener("canplay",r);c.removeEventListener("error",u)}var m=a.name,y=a.parser,D=new p(m,function(){1!==D.state&&-1!==D.state&&(D.state=-1,v(),c.src="")}),F=c;a.stream&&c.addEventListener("progress",e);if("image"===a.type)c.addEventListener("load",r);else{var b=!1,k=!1;c.addEventListener("loadedmetadata",function(){k=!0;b&&r()});c.addEventListener("canplay",function(){b=!0;k&&r()})}c.addEventListener("error",u);c.crossOrigin=a.credentials?"use-credentials":"anonymous";c.src=a.src;return D}
function B(a){-1!==F&&1!==F&&(F=-1,P.forEach(function(a){a.cancel()}),L?"string"===typeof a?L(Error("resl: "+a)):L(a):console.error("resl error:",a))}function n(a){if(-1!==F&&1!==F){var c=0,d=0;P.forEach(function(a){a.ready&&(d+=1);c+=a.progress});d===P.length?(F=1,v(C)):D&&D(c/P.length,a)}}"object"===typeof r&&r||c("invalid or missing configuration");Q(r,y,"config");var I=r.manifest;"object"===typeof I&&I||c("missing manifest");var v=a("onDone");v||c("missing onDone() callback");var D=a("onProgress"),
L=a("onError"),C={},F=0,na={text:u,binary:function(a){return u(a)},image:function(a){return w(a,document.createElement("img"))},video:function(a){return w(a,document.createElement("video"))},audio:function(a){return w(a,document.createElement("audio"))}},P=Object.keys(I).map(function(a){function h(a,d){if(a in g.parser){var e=g.parser[a];"function"!==typeof e&&c("invalid parser callback "+a+' for asset "'+a+'"');return e}return d}var g=I[a];"string"===typeof g?g={src:g}:"object"===typeof g&&g||c('invalid asset definition "'+
a+'"');Q(g,e,'asset "'+a+'"');var f={};"parser"in g&&("function"===typeof g.parser?f={data:g.parser}:"object"===typeof g.parser&&g.parser?(Q(f,d,'parser for asset "'+a+'"'),"onData"in f||c('missing onData callback for parser in asset "'+a+'"'),f={data:h("onData"),done:h("onDone")}):c('invalid parser for asset "'+a+'"'));return{name:a,type:function(d,e,f){d in g&&(f=g[d]);0>e.indexOf(f)&&c("invalid "+d+' "'+f+'" for asset "'+a+'", possible values: '+e);return f}("type",Object.keys(na),"text"),stream:!!g.stream,
credentials:!!g.credentials,src:function(d,e,f){d in g?f=g[d]:e&&c("missing "+d+' for asset "'+a+'"');"string"!==typeof f&&c("invalid "+d+' for asset "'+a+'", must be a string');return f}("src",!0,""),parser:f}}).map(function(a){return na[a.type](a)});0===P.length&&setTimeout(function(){n("done")},1)}},{}],42:[function(B,w,Va){function c(a,c){for(var d=0;d<a.length;++d)if(a[d]===c)return d;return-1}var Q=B("./lib/util/check"),p=B("./lib/util/extend"),y=B("./lib/dynamic"),e=B("./lib/util/raf"),d=B("./lib/util/clock"),
r=B("./lib/strings"),a=B("./lib/webgl"),u=B("./lib/extension"),ja=B("./lib/limits"),sa=B("./lib/buffer"),n=B("./lib/elements"),I=B("./lib/texture"),v=B("./lib/renderbuffer"),D=B("./lib/framebuffer"),L=B("./lib/attribute"),C=B("./lib/shader"),F=B("./lib/read"),na=B("./lib/core"),P=B("./lib/stats"),va=B("./lib/timer");w.exports=function(h){function g(){if(0===ob.length)N&&N.update(),gc=null;else{gc=e.next(g);b();for(var a=ob.length-1;0<=a;--a){var c=ob[a];c&&c(J,null,0)}pa.flush();N&&N.update()}}function f(){!gc&&
0<ob.length&&(gc=e.next(g))}function w(){gc&&(e.cancel(g),gc=null)}function B(a){a.preventDefault();jb=!0;w();ca.forEach(function(a){a()})}function aa(a){pa.getError();jb=!1;Gb.restore();ha.restore();Ja.restore();Z.restore();Aa.restore();Oa.restore();t.restore();N&&N.restore();ac.procs.refresh();f();oa.forEach(function(a){a()})}function m(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(y.isDynamic(f))e[b]=y.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(y.isDynamic(f[g])){e[b]=
y.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;r.length<a;)r.push(null);return r}Q(!!a,"invalid args to regl({...})");Q.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=p({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&
(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=ac.compile(a,f,e,d,g),k=h.draw,m=h.batch,n=h.scope,r=[];return p(function(a,b){var d;jb&&Q.raise("context lost");if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=
0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return m.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return m.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function la(a,b){var c=0;ac.procs.poll();var d=b.color;d&&(pa.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(pa.clearDepth(+b.depth),c|=256);"stencil"in b&&(pa.clearStencil(b.stencil|0),c|=1024);Q(!!c,
"called regl.clear with no buffer specified");pa.clear(c)}function H(a){Q.type(a,"function","regl.frame() callback must be a function");ob.push(a);f();return{cancel:function(){function b(){var a=c(ob,b);ob[a]=ob[ob.length-1];--ob.length;0>=ob.length&&w()}var d=c(ob,a);Q(0<=d,"cannot cancel a frame twice");ob[d]=b}}}function da(){var a=bb.viewport,b=bb.scissor_box;a[0]=a[1]=b[0]=b[1]=0;J.viewportWidth=J.framebufferWidth=J.drawingBufferWidth=a[2]=b[2]=pa.drawingBufferWidth;J.viewportHeight=J.framebufferHeight=
J.drawingBufferHeight=a[3]=b[3]=pa.drawingBufferHeight}function b(){J.tick+=1;J.time=X();da();ac.procs.poll()}function k(){Z.refresh();da();ac.procs.refresh();N&&N.update()}function X(){return(d()-M)/1E3}console.log("REGL args are:",h);h=a(h);console.log("REGL configs are:",h);if(!h)return null;var pa=h.gl,Va=pa.getContextAttributes(),jb=pa.isContextLost(),Gb=u(pa,h);if(!Gb)return null;var ua=r(),Na=P(),Y=Gb.extensions,N=va(pa,Y),M=d(),T=pa.drawingBufferWidth,qa=pa.drawingBufferHeight,J={tick:0,time:0,
viewportWidth:T,viewportHeight:qa,framebufferWidth:T,framebufferHeight:qa,drawingBufferWidth:T,drawingBufferHeight:qa,pixelRatio:h.pixelRatio},T={elements:null,primitive:4,count:-1,offset:0,instances:-1},Zb=ja(pa,Y),Ja=sa(pa,Na,h,function(a){return t.destroyBuffer(a)}),R=n(pa,Y,Ja,Na),t=L(pa,Y,Zb,Na,Ja,R,T),ha=C(pa,ua,Na,h),Z=I(pa,Y,Zb,function(){ac.procs.poll()},J,Na,h),Aa=v(pa,Y,Zb,Na,h),Oa=D(pa,Y,Zb,Z,Aa,Na),ac=na(pa,ua,Y,Zb,Ja,R,Z,Oa,{},t,ha,T,J,N,h),ua=F(pa,Oa,ac.procs.poll,J,Va,Y,Zb),bb=ac.next,
U=pa.canvas,ob=[],ca=[],oa=[],fc=[h.onDestroy],gc=null;U&&(U.addEventListener("webglcontextlost",B,!1),U.addEventListener("webglcontextrestored",aa,!1));var rc=Oa.setFBO=m({framebuffer:y.define.call(null,1,"framebuffer")});k();Va=p(m,{clear:function(a){Q("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)rc(p({framebuffer:a.framebuffer.faces[b]},a),la);else rc(a,la);else la(null,a)},
prop:y.define.bind(null,1),context:y.define.bind(null,2),"this":y.define.bind(null,3),draw:m({}),buffer:function(a){return Ja.create(a,34962,!1,!1)},elements:function(a){return R.create(a,!1)},texture:Z.create2D,cube:Z.createCube,renderbuffer:Aa.create,framebuffer:Oa.create,framebufferCube:Oa.createCube,vao:t.createVAO,attributes:Va,frame:H,on:function(a,b){Q.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return H(b);case "lost":c=ca;break;case "restore":c=
oa;break;case "destroy":c=fc;break;default:Q.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:Zb,hasExtension:function(a){return 0<=Zb.extensions.indexOf(a.toLowerCase())},read:ua,destroy:function(){ob.length=0;w();U&&(U.removeEventListener("webglcontextlost",B),U.removeEventListener("webglcontextrestored",aa));ha.clear();Oa.clear();Aa.clear();t.clear();Z.clear();
R.clear();Ja.clear();N&&N.clear();fc.forEach(function(a){a()})},_gl:pa,_refresh:k,poll:function(){b();N&&N.update()},now:X,stats:Na});h.onDone(null,Va);return Va}},{"./lib/attribute":2,"./lib/buffer":3,"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,
"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>
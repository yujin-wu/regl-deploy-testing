<!DOCTYPE html>
      <html>
        <head>
          <title>example/elements.js</title>
          <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
          <meta charset=utf-8>
        </head>
        <body>
        <script type='text/javascript'>
        (function(){function ga(Z,Ra,b){function ca(e,l){if(!Ra[e]){if(!Z[e]){var q="function"==typeof require&&require;if(!l&&q)return q(e,!0);if(N)return N(e,!0);q=Error("Cannot find module '"+e+"'");throw q.code="MODULE_NOT_FOUND",q;}q=Ra[e]={exports:{}};Z[e][0].call(q.exports,function(c){return ca(Z[e][1][c]||c)},q,q.exports,ga,Z,Ra,b)}return Ra[e].exports}for(var N="function"==typeof require&&require,L=0;L<b.length;L++)ca(b[L]);return ca}return ga})()({1:[function(ga,Z,Ra){ga=ga("../regl")();ga.clear({color:[0,
0,0,1],depth:1});Z=3;Z>ga.limits.lineWidthDims[1]&&(Z=ga.limits.lineWidthDims[1]);ga({frag:"\n    precision mediump float;\n    uniform vec4 color;\n    void main() {\n      gl_FragColor = color;\n    }",vert:"\n    precision mediump float;\n    attribute vec2 position;\n    void main() {\n      gl_Position = vec4(position, 0, 1);\n    }",attributes:{position:Array(5).fill().map(function(b,ca){var N=2*Math.PI*ca/5;return[Math.sin(N),Math.cos(N)]})},uniforms:{color:[1,0,0,1]},elements:[[0,1],[0,2],
[0,3],[0,4],[1,2],[1,3],[1,4],[2,3],[2,4],[3,4]],lineWidth:Z})()},{"../regl":38}],2:[function(ga,Z,Ra){function b(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}var ca=ga("./util/sorted-object-keys"),N=ga("./util/check"),L=ga("./util/values"),e=ga("./constants/dtypes.json"),l=ga("./util/is-typed-array"),q=ga("./util/is-ndarray"),c=ga("./constants/primitives.json"),F="attributes elements offset count primitive instances".split(" ");
Z.exports=function(C,H,U,y,u,p,ba){function w(f){if(f!==X.currentVAO){var x=H.oes_vertex_array_object;f?x.bindVertexArrayOES(f.vao):x.bindVertexArrayOES(null);X.currentVAO=f}}function T(f){if(f!==X.currentVAO){if(f)f.bindAttrs();else{for(var x=H.angle_instanced_arrays,h=0;h<t.length;++h){var c=t[h];c.buffer?(C.enableVertexAttribArray(h),c.buffer.bind(),C.vertexAttribPointer(h,c.size,c.type,c.normalized,c.stride,c.offfset),x&&c.divisor&&x.vertexAttribDivisorANGLE(h,c.divisor)):(C.disableVertexAttribArray(h),
C.vertexAttrib4f(h,c.x,c.y,c.z,c.w))}ba.elements?C.bindBuffer(34963,ba.elements.buffer.buffer):C.bindBuffer(34963,null)}X.currentVAO=f}}function v(){L(k).forEach(function(f){f.destroy()})}function Q(){this.id=++S;this.attributes=[];this.elements=null;this.ownsElements=!1;this.offset=this.count=0;this.instances=-1;this.primitive=4;var f=H.oes_vertex_array_object;this.vao=f?f.createVertexArrayOES():null;k[this.id]=this;this.buffers=[]}function ia(){H.oes_vertex_array_object&&L(k).forEach(function(f){f.refresh()})}
var h=U.maxAttributes,t=Array(h);for(U=0;U<h;++U)t[U]=new b;var S=0,k={},X={Record:b,scope:{},state:t,currentVAO:null,targetVAO:null,restore:H.oes_vertex_array_object?ia:function(){},createVAO:function(f){function x(f){var t;if(Array.isArray(f))t=f,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{N("object"===typeof f,"invalid arguments for create vao");N("attributes"in f,"must specify attributes for vao");if(f.elements){var d=
f.elements;k.ownsElements?("function"===typeof d&&"elements"===d._reglType?k.elements.destroy():k.elements(d),k.ownsElements=!1):p.getElements(f.elements)?(k.elements=f.elements,k.ownsElements=!1):(k.elements=p.create(f.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;t=f.attributes;k.offset=0;k.count=-1;k.instances=-1;k.primitive=4;k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType);"offset"in f&&(k.offset=f.offset|0);"count"in f&&(k.count=
f.count|0);"instances"in f&&(k.instances=f.instances|0);"primitive"in f&&(N(f.primitive in c,"bad primitive type: "+f.primitive),k.primitive=c[f.primitive]);N.optional(function(){for(var a=ca(f),d=0;d<a.length;++d)N(0<=F.indexOf(a[d]),'invalid option for vao: "'+a[d]+'" valid options are '+F)});N(Array.isArray(t),"attributes must be an array")}N(t.length<h,"too many attributes");N(0<t.length,"must specify at least one attribute");var d={},G=k.attributes;G.length=t.length;for(var a=0;a<t.length;++a){var S=
t[a],A=G[a]=new b,v=S.data||S;if(Array.isArray(v)||l(v)||q(v)){var w;k.buffers[a]&&(w=k.buffers[a],l(v)&&w._buffer.byteLength>=v.byteLength?w.subdata(v):(w.destroy(),k.buffers[a]=null));k.buffers[a]||(w=k.buffers[a]=u.create(S,34962,!1,!0));A.buffer=u.getBuffer(w);A.size=A.buffer.dimension|0;A.normalized=!1;A.type=A.buffer.dtype;A.offset=0;A.stride=0;A.divisor=0;A.state=1;d[a]=1}else u.getBuffer(S)?(A.buffer=u.getBuffer(S),A.size=A.buffer.dimension|0,A.normalized=!1,A.type=A.buffer.dtype,A.offset=
0,A.stride=0,A.divisor=0,A.state=1):u.getBuffer(S.buffer)?(A.buffer=u.getBuffer(S.buffer),A.size=(+S.size||A.buffer.dimension)|0,A.normalized=!!S.normalized||!1,"type"in S?(N.parameter(S.type,e,"invalid buffer type"),A.type=e[S.type]):A.type=A.buffer.dtype,A.offset=(S.offset||0)|0,A.stride=(S.stride||0)|0,A.divisor=(S.divisor||0)|0,A.state=1,N(1<=A.size&&4>=A.size,"size must be between 1 and 4"),N(0<=A.offset,"invalid offset"),N(0<=A.stride&&255>=A.stride,"stride must be between 0 and 255"),N(0<=
A.divisor,"divisor must be positive"),N(!A.divisor||!!H.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in S?(N(0<a,"first attribute must not be a constant"),A.x=+S.x||0,A.y=+S.y||0,A.z=+S.z||0,A.w=+S.w||0,A.state=2):N(!1,"invalid attribute spec for location "+a)}for(w=0;w<k.buffers.length;++w)!d[w]&&k.buffers[w]&&(k.buffers[w].destroy(),k.buffers[w]=null);k.refresh();return x}var k=new Q;y.vaoCount+=1;x.destroy=function(){for(var f=0;f<k.buffers.length;++f)k.buffers[f]&&
k.buffers[f].destroy();k.buffers.length=0;k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1);k.destroy()};x._vao=k;x._reglType="vao";return x(f)},getVAO:function(f){return"function"===typeof f&&f._vao?f._vao:null},destroyBuffer:function(f){for(var x=0;x<t.length;++x){var c=t[x];c.buffer===f&&(C.disableVertexAttribArray(x),c.buffer=null)}},setVAO:H.oes_vertex_array_object?w:T,clear:H.oes_vertex_array_object?v:function(){}};Q.prototype.bindAttrs=function(){for(var f=H.angle_instanced_arrays,
x=this.attributes,c=0;c<x.length;++c){var l=x[c];l.buffer?(C.enableVertexAttribArray(c),C.bindBuffer(34962,l.buffer.buffer),C.vertexAttribPointer(c,l.size,l.type,l.normalized,l.stride,l.offset),f&&l.divisor&&f.vertexAttribDivisorANGLE(c,l.divisor)):(C.disableVertexAttribArray(c),C.vertexAttrib4f(c,l.x,l.y,l.z,l.w))}for(f=x.length;f<h;++f)C.disableVertexAttribArray(f);(f=p.getElements(this.elements))?C.bindBuffer(34963,f.buffer.buffer):C.bindBuffer(34963,null)};Q.prototype.refresh=function(){var f=
H.oes_vertex_array_object;f&&(f.bindVertexArrayOES(this.vao),this.bindAttrs(),X.currentVAO=null,f.bindVertexArrayOES(null))};Q.prototype.destroy=function(){if(this.vao){var f=H.oes_vertex_array_object;this===X.currentVAO&&(X.currentVAO=null,f.bindVertexArrayOES(null));f.deleteVertexArrayOES(this.vao);this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1);k[this.id]&&(delete k[this.id],--y.vaoCount)};return X}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,
"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/sorted-object-keys":34,"./util/values":36}],3:[function(ga,Z,Ra){function b(c){return U[Object.prototype.toString.call(c)]|0}function ca(c,l){for(var q=0;q<l.length;++q)c[q]=l[q]}function N(c,l,q,e,b,u,h){for(var t=0,S=0;S<q;++S)for(var k=0;k<e;++k)c[t++]=l[b*S+u*k+h]}var L=ga("./util/sorted-object-keys"),e=ga("./util/check"),l=ga("./util/is-typed-array"),q=ga("./util/is-ndarray"),c=ga("./util/values"),F=ga("./util/pool");
Ra=ga("./util/flatten");var C=Ra.flatten,H=Ra.shape,U=ga("./constants/arraytypes.json"),y=ga("./constants/dtypes.json"),u=ga("./constants/usage.json"),p=[];p[5120]=1;p[5122]=2;p[5124]=4;p[5121]=1;p[5123]=2;p[5125]=4;p[5126]=4;Z.exports=function(U,w,T,v){function Q(f){this.id=S++;this.buffer=U.createBuffer();this.type=f;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;T.profile&&(this.stats={size:0})}function ia(f,c,h){f.byteLength=c.byteLength;U.bufferData(f.type,
c,h)}function h(f,c,h,k,t,d){f.usage=h;if(Array.isArray(c)){if(f.dtype=k||5126,0<c.length)if(Array.isArray(c[0])){t=H(c);for(var G=k=1;G<t.length;++G)k*=t[G];f.dimension=k;c=C(c,t,f.dtype);ia(f,c,h);d?f.persistentData=c:F.freeType(c)}else"number"===typeof c[0]?(f.dimension=t,t=F.allocType(f.dtype,c.length),ca(t,c),ia(f,t,h),d?f.persistentData=t:F.freeType(t)):l(c[0])?(f.dimension=c[0].length,f.dtype=k||b(c[0])||5126,c=C(c,[c.length,c[0].length],f.dtype),ia(f,c,h),d?f.persistentData=c:F.freeType(c)):
e.raise("invalid buffer data")}else if(l(c))f.dtype=k||b(c),f.dimension=t,ia(f,c,h),d&&(f.persistentData=new Uint8Array(new Uint8Array(c.buffer)));else if(q(c)){t=c.shape;var a=c.stride,G=c.offset,S=0,A=0,v=0,w=0;1===t.length?(S=t[0],A=1,v=a[0],w=0):2===t.length?(S=t[0],A=t[1],v=a[0],w=a[1]):e.raise("invalid shape");f.dtype=k||b(c.data)||5126;f.dimension=A;t=F.allocType(f.dtype,S*A);N(t,c.data,S,A,v,w,G);ia(f,t,h);d?f.persistentData=t:F.freeType(t)}else c instanceof ArrayBuffer?(f.dtype=5121,f.dimension=
t,ia(f,c,h),d&&(f.persistentData=new Uint8Array(new Uint8Array(c)))):e.raise("invalid buffer data")}function t(c){w.bufferCount--;v(c);var h=c.buffer;e(h,"buffer must not be deleted already");U.deleteBuffer(h);c.buffer=null;delete k[c.id]}var S=0,k={};Q.prototype.bind=function(){U.bindBuffer(this.type,this.buffer)};Q.prototype.destroy=function(){t(this)};var X=[];T.profile&&(w.getTotalBufferSize=function(){var c=0;L(k).forEach(function(h){c+=k[h].stats.size});return c});return{create:function(c,x,
S,v){function E(a){var d=35044,c=null,f=0,k=0,x=1;Array.isArray(a)||l(a)||q(a)||a instanceof ArrayBuffer?c=a:"number"===typeof a?f=a|0:a&&(e.type(a,"object","buffer arguments must be an object, a number or an array"),"data"in a&&(e(null===c||Array.isArray(c)||l(c)||q(c),"invalid data for buffer"),c=a.data),"usage"in a&&(e.parameter(a.usage,u,"invalid buffer usage"),d=u[a.usage]),"type"in a&&(e.parameter(a.type,y,"invalid buffer type"),k=y[a.type]),"dimension"in a&&(e.type(a.dimension,"number","invalid dimension"),
x=a.dimension|0),"length"in a&&(e.nni(f,"buffer length must be a nonnegative integer"),f=a.length|0));G.bind();c?h(G,c,d,k,x,v):(f&&U.bufferData(G.type,f,d),G.dtype=k||5121,G.usage=d,G.dimension=x,G.byteLength=f);T.profile&&(G.stats.size=G.byteLength*p[G.dtype]);return E}function d(a,d){e(d+a.byteLength<=G.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+a.byteLength+" starting from offset "+d+" to a buffer of size "+G.byteLength);U.bufferSubData(G.type,d,
a)}w.bufferCount++;var G=new Q(x);k[G.id]=G;S||E(c);E._reglType="buffer";E._buffer=G;E.subdata=function(a,c){var f=(c||0)|0,h;G.bind();if(l(a)||a instanceof ArrayBuffer)d(a,f);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var k=F.allocType(G.dtype,a.length);ca(k,a);d(k,f);F.freeType(k)}else Array.isArray(a[0])||l(a[0])?(h=H(a),k=C(a,h,G.dtype),d(k,f),F.freeType(k)):e.raise("invalid buffer data")}else if(q(a)){h=a.shape;var x=a.stride,t=k=0,R=0,P=0;1===h.length?(k=h[0],t=1,R=x[0],
P=0):2===h.length?(k=h[0],t=h[1],R=x[0],P=x[1]):e.raise("invalid shape");h=Array.isArray(a.data)?G.dtype:b(a.data);h=F.allocType(h,k*t);N(h,a.data,k,t,R,P,a.offset);d(h,f);F.freeType(h)}else e.raise("invalid data for buffer subdata");return E};T.profile&&(E.stats=G.stats);E.destroy=function(){t(G)};return E},createStream:function(c,l){var k=X.pop();k||(k=new Q(c));k.bind();h(k,l,35040,0,1,!1);return k},destroyStream:function(c){X.push(c)},clear:function(){c(k).forEach(t);X.forEach(t)},getBuffer:function(c){return c&&
c._buffer instanceof Q?c._buffer:null},restore:function(){c(k).forEach(function(c){c.buffer=U.createBuffer();U.bindBuffer(c.type,c.buffer);U.bufferData(c.type,c.persistentData||c.byteLength,c.usage)})},_initBuffer:h}}},{"./constants/arraytypes.json":4,"./constants/dtypes.json":5,"./constants/usage.json":7,"./util/check":21,"./util/flatten":26,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/pool":32,"./util/sorted-object-keys":34,"./util/values":36}],4:[function(ga,Z,Ra){Z.exports={"[object Int8Array]":5120,
"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121}},{}],5:[function(ga,Z,Ra){Z.exports={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126}},{}],6:[function(ga,Z,Ra){Z.exports={points:0,point:0,lines:1,line:1,"line loop":2,"line strip":3,triangles:4,triangle:4,
"triangle strip":5,"triangle fan":6}},{}],7:[function(ga,Z,Ra){Z.exports={"static":35044,dynamic:35048,stream:35040}},{}],8:[function(ga,Z,Ra){function b(c){return Array.isArray(c)||U(c)||y(c)}function ca(c){return c.sort(function(c,h){return"viewport"===c?-1:"viewport"===h?1:c<h?-1:1})}function N(c,h,l,k){this.thisDep=c;this.contextDep=h;this.propDep=l;this.append=k}function L(c){return c&&!(c.thisDep||c.contextDep||c.propDep)}function e(c){return new N(!1,!1,!1,c)}function l(c,h){var l=c.type;if(0===
l)return l=c.data.length,new N(!0,1<=l,2<=l,h);if(4===l)return l=c.data,new N(l.thisDep,l.contextDep,l.propDep,h);if(5===l)return new N(!1,!1,!1,h);if(6===l){for(var k=l=!1,q=!1,d=0;d<c.data.length;++d){var G=c.data[d];1===G.type?q=!0:2===G.type?k=!0:3===G.type?l=!0:0===G.type?(l=!0,G=G.data,1<=G&&(k=!0),2<=G&&(q=!0)):4===G.type&&(l=l||G.data.thisDep,k=k||G.data.contextDep,q=q||G.data.propDep)}return new N(l,k,q,h)}return new N(3===l,2===l,1===l,h)}var q=ga("./util/sorted-object-keys"),c=ga("./util/check"),
F=ga("./util/extend"),C=ga("./util/codegen"),H=ga("./util/loop"),U=ga("./util/is-typed-array"),y=ga("./util/is-ndarray"),u=ga("./util/is-array-like"),p=ga("./dynamic"),ba=ga("./constants/primitives.json"),w=ga("./constants/dtypes.json"),T=["x","y","z","w"],v="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Q={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,
"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ia="constant color, constant alpha;one minus constant color, constant alpha;constant color, one minus constant alpha;one minus constant color, one minus constant alpha;constant alpha, constant color;constant alpha, one minus constant color;one minus constant alpha, constant color;one minus constant alpha, one minus constant color".split(";"),
h={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},t={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},S={frag:35632,vert:35633},k={cw:2304,ccw:2305},X=new N(!1,!1,!1,function(){});Z.exports=function(f,x,y,D,E,d,G,a,U,A,ja,Dc,V,ea,R){function P(a){return a.replace(".","_")}function B(a,d,c){var g=P(a);ua.push(a);
W[g]=la[g]=!!c;Fa[g]=d}function g(a,d,c){var g=P(a);ua.push(a);Array.isArray(c)?(la[g]=c.slice(),W[g]=c.slice()):la[g]=W[g]=c;Ia[g]=d}function M(){var a=C(),d=a.link,g=a.global;a.id=zd++;a.batchId="0";var m=d(mb),r=a.shared={props:"a0"};q(mb).forEach(function(a){r[a]=g.def(m,".",a)});c.optional(function(){a.CHECK=d(c);a.commandStr=c.guessCommand();a.command=d(a.commandStr);a.assert=function(a,c,g){a("if(!(",c,"))",this.CHECK,".commandRaise(",d(g),",",this.command,");")};da.invalidBlendCombinations=
ia});var h=a.next={},n=a.current={};q(Ia).forEach(function(a){Array.isArray(la[a])&&(h[a]=g.def(r.next,".",a),n[a]=g.def(r.current,".",a))});var l=a.constants={};q(da).forEach(function(a){l[a]=g.def(JSON.stringify(da[a]))});a.invoke=function(c,g){switch(g.type){case 0:var m=["this",r.context,r.props,a.batchId];return c.def(d(g.data),".call(",m.slice(0,Math.max(g.data.length+1,4)),")");case 1:return c.def(r.props,g.data);case 2:return c.def(r.context,g.data);case 3:return c.def("this",g.data);case 4:return g.data.append(a,
c),g.data.ref;case 5:return g.data.toString();case 6:return g.data.map(function(d){return a.invoke(c,d)})}};a.attribCache={};var k={};a.scopeAttrib=function(a){a=x.id(a);if(a in k)return k[a];var c=A.scope[a];c||(c=A.scope[a]=new sa);return k[a]=d(c)};return a}function K(a){var d=a["static"];a=a.dynamic;var c;if("profile"in d){var g=!!d.profile;c=e(function(a,d){return g});c.enable=g}else if("profile"in a){var r=a.profile;c=l(r,function(a,d){return a.invoke(d,r)})}return c}function Da(d,g){var r=
d["static"],m=d.dynamic;if("framebuffer"in r){var h=r.framebuffer;return h?(h=a.getFramebuffer(h),c.command(h,"invalid framebuffer object"),e(function(a,d){var c=a.link(h),g=a.shared;d.set(g.framebuffer,".next",c);g=g.context;d.set(g,".framebufferWidth",c+".width");d.set(g,".framebufferHeight",c+".height");return c})):e(function(a,d){var c=a.shared;d.set(c.framebuffer,".next","null");c=c.context;d.set(c,".framebufferWidth",c+".drawingBufferWidth");d.set(c,".framebufferHeight",c+".drawingBufferHeight");
return"null"})}if("framebuffer"in m){var n=m.framebuffer;return l(n,function(a,d){var g=a.invoke(d,n),r=a.shared,m=r.framebuffer,h=d.def(m,".getFramebuffer(",g,")");c.optional(function(){a.assert(d,"!"+g+"||"+h,"invalid framebuffer object")});d.set(m,".next",h);r=r.context;d.set(r,".framebufferWidth",h+"?"+h+".width:"+r+".drawingBufferWidth");d.set(r,".framebufferHeight",h+"?"+h+".height:"+r+".drawingBufferHeight");return h})}return null}function qa(a,d,g){function r(a){if(a in h){var n=h[a];c.commandType(n,
"object","invalid "+a,g.commandStr);var k=!0,f=n.x|0,I=n.y|0,z,x;"width"in n?(z=n.width|0,c.command(0<=z,"invalid "+a,g.commandStr)):k=!1;"height"in n?(x=n.height|0,c.command(0<=x,"invalid "+a,g.commandStr)):k=!1;return new N(!k&&d&&d.thisDep,!k&&d&&d.contextDep,!k&&d&&d.propDep,function(a,d){var c=a.shared.context,g=z;"width"in n||(g=d.def(c,".","framebufferWidth","-",f));var r=x;"height"in n||(r=d.def(c,".","framebufferHeight","-",I));return[f,I,g,r]})}if(a in m){var na=m[a],k=l(na,function(d,g){var r=
d.invoke(g,na);c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});var h=d.shared.context,m=g.def(r,".x|0"),n=g.def(r,".y|0"),l=g.def('"width" in ',r,"?",r,".width|0:","(",h,".","framebufferWidth","-",m,")"),k=g.def('"height" in ',r,"?",r,".height|0:","(",h,".","framebufferHeight","-",n,")");c.optional(function(){d.assert(g,l+">=0&&"+k+">=0","invalid "+a)});return[m,n,l,k]});d&&(k.thisDep=k.thisDep||d.thisDep,k.contextDep=k.contextDep||d.contextDep,k.propDep=k.propDep||
d.propDep);return k}return d?new N(d.thisDep,d.contextDep,d.propDep,function(a,d){var c=a.shared.context;return[0,0,d.def(c,".","framebufferWidth"),d.def(c,".","framebufferHeight")]}):null}var h=a["static"],m=a.dynamic;if(a=r("viewport")){var n=a;a=new N(a.thisDep,a.contextDep,a.propDep,function(a,d){var c=n.append(a,d),g=a.shared.context;d.set(g,".viewportWidth",c[2]);d.set(g,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:r("scissor.box")}}function m(a,d){var g=a["static"];if("string"===
typeof g.frag&&"string"===typeof g.vert){if(0<q(d.dynamic).length)return null;var g=d["static"],r=q(g);if(0<r.length&&"number"===typeof g[r[0]]){for(var h=[],m=0;m<r.length;++m)c("number"===typeof g[r[m]],"must specify all vertex attribute locations when using vaos"),h.push([g[r[m]]|0,r[m]]);return h}}return null}function J(a,d,g){function r(a){if(a in h){var d=x.id(h[a]);c.optional(function(){ja.shader(S[a],d,c.guessCommand())});var g=e(function(){return d});g.id=d;return g}if(a in m){var n=m[a];
return l(n,function(d,g){var r=d.invoke(g,n),h=g.def(d.shared.strings,".id(",r,")");c.optional(function(){g(d.shared.shader,".shader(",S[a],",",h,",",d.command,");")});return h})}return null}var h=a["static"],m=a.dynamic,n=r("frag"),k=r("vert"),f=null;L(n)&&L(k)?(f=ja.program(k.id,n.id,null,g),a=e(function(a,d){return a.link(f)})):a=new N(n&&n.thisDep||k&&k.thisDep,n&&n.contextDep||k&&k.contextDep,n&&n.propDep||k&&k.propDep,function(a,d){var g=a.shared.shader,r;r=n?n.append(a,d):d.def(g,".","frag");
var h;h=k?k.append(a,d):d.def(g,".","vert");var m=g+".program("+h+","+r;c.optional(function(){m+=","+a.command});return d.def(m+")")});return{frag:n,vert:k,progVar:a,program:f}}function aa(a,g){function r(a,d){if(a in h){var z=h[a]|0;d?n.offset=z:n.instances=z;c.command(!d||0<=z,"invalid "+a,g.commandStr);return e(function(a,c){d&&(a.OFFSET=z);return z})}if(a in m){var x=m[a];return l(x,function(g,r){var h=g.invoke(r,x);d&&(g.OFFSET=h,c.optional(function(){g.assert(r,h+">=0","invalid "+a)}));return h})}if(d){if(I)return e(function(a,
d){return a.OFFSET=0});if(k)return new N(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.offset:0")})}else if(k)return new N(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.instances:-1")});return null}var h=a["static"],m=a.dynamic,n={},k=!1,f=function(){if("vao"in h){var a=h.vao;null!==a&&null===A.getVAO(a)&&(a=A.createVAO(a));k=!0;n.vao=a;return e(function(d){var c=
A.getVAO(a);return c?d.link(c):"null"})}if("vao"in m){k=!0;var d=m.vao;return l(d,function(a,c){var g=a.invoke(c,d);return c.def(a.shared.vao+".getVAO("+g+")")})}return null}(),I=!1,z=function(){if("elements"in h){var a=h.elements;n.elements=a;if(b(a)){var r=n.elements=d.create(a,!0),a=d.getElements(r);I=!0}else a&&(a=d.getElements(a),I=!0,c.command(a,"invalid elements",g.commandStr));r=e(function(d,c){if(a){var g=d.link(a);return d.ELEMENTS=g}return d.ELEMENTS=null});r.value=a;return r}if("elements"in
m){I=!0;var z=m.elements;return l(z,function(a,d){var g=a.shared,r=g.isBufferArgs,g=g.elements,h=a.invoke(d,z),m=d.def("null"),r=d.def(r,"(",h,")"),n=a.cond(r).then(m,"=",g,".createStream(",h,");")["else"](m,"=",g,".getElements(",h,");");c.optional(function(){a.assert(n["else"],"!"+h+"||"+m,"invalid elements")});d.entry(n);d.exit(a.cond(r).then(g,".destroyStream(",m,");"));return a.ELEMENTS=m})}return k?new N(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+
a.shared.elements+".getElements("+a.shared.vao+".currentVAO.elements):null")}):null}(),x=r("offset",!0),na=function(){if("primitive"in h){var a=h.primitive;n.primitive=a;c.commandParameter(a,ba,"invalid primitve",g.commandStr);return e(function(d,c){return ba[a]})}if("primitive"in m){var d=m.primitive;return l(d,function(a,g){var r=a.constants.primTypes,h=a.invoke(g,d);c.optional(function(){a.assert(g,h+" in "+r,"invalid primitive, must be one of "+q(ba))});return g.def(r,"[",h,"]")})}return I?L(z)?
z.value?e(function(a,d){return d.def(a.ELEMENTS,".primType")}):e(function(){return 4}):new N(z.thisDep,z.contextDep,z.propDep,function(a,d){var c=a.ELEMENTS;return d.def(c,"?",c,".primType:",4)}):k?new N(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao+".currentVAO?"+a.shared.vao+".currentVAO.primitive:4")}):null}(),G=function(){if("count"in h){var a=h.count|0;n.count=a;c.command("number"===typeof a&&0<=a,"invalid vertex count",g.commandStr);return e(function(){return a})}if("count"in
m){var d=m.count;return l(d,function(a,g){var r=a.invoke(g,d);c.optional(function(){a.assert(g,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")});return r})}if(I){if(L(z)){if(z)return x?new N(x.thisDep,x.contextDep,x.propDep,function(a,d){var g=d.def(a.ELEMENTS,".vertCount-",a.OFFSET);c.optional(function(){a.assert(d,g+">=0","invalid vertex offset/element buffer too small")});return g}):e(function(a,d){return d.def(a.ELEMENTS,".vertCount")});var r=e(function(){return-1});
c.optional(function(){r.MISSING=!0});return r}var na=new N(z.thisDep||x.thisDep,z.contextDep||x.contextDep,z.propDep||x.propDep,function(a,d){var c=a.ELEMENTS;return a.OFFSET?d.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):d.def(c,"?",c,".vertCount:-1")});c.optional(function(){na.DYNAMIC=!0});return na}return k?new N(f.thisDep,f.contextDep,f.propDep,function(a,d){return d.def(a.shared.vao,".currentVAO?",a.shared.vao,".currentVAO.count:-1")}):null}(),t=r("instances",!1);return{elements:z,primitive:na,
count:G,instances:t,offset:x,vao:f,vaoActive:k,elementsActive:I,"static":n}}function O(a,d){var g=a["static"],r=a.dynamic,m={};ua.forEach(function(a){function n(d,c){if(a in g){var h=d(g[a]);m[f]=e(function(){return h})}else if(a in r){var k=r[a];m[f]=l(k,function(a,d){return c(a,d,a.invoke(d,k))})}}var f=P(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return n(function(g){c.commandType(g,
"boolean",a,d.commandStr);return g},function(d,g,r){c.optional(function(){d.assert(g,"typeof "+r+'==="boolean"',"invalid flag "+a,d.commandStr)});return r});case "depth.func":return n(function(g){c.commandParameter(g,h,"invalid "+a,d.commandStr);return h[g]},function(d,g,r){var n=d.constants.compareFuncs;c.optional(function(){d.assert(g,r+" in "+n,"invalid "+a+", must be one of "+q(h))});return g.def(n,"[",r,"]")});case "depth.range":return n(function(a){c.command(u(a)&&2===a.length&&"number"===typeof a[0]&&
"number"===typeof a[1]&&a[0]<=a[1],"depth range is 2d array",d.commandStr);return a},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===2&&typeof "+g+'[0]==="number"&&typeof '+g+'[1]==="number"&&'+g+"[0]<="+g+"[1]","depth range must be a 2d array")});var r=d.def("+",g,"[0]"),n=d.def("+",g,"[1]");return[r,n]});case "blend.func":return n(function(a){c.commandType(a,"object","blend.func",d.commandStr);var g="srcRGB"in a?a.srcRGB:a.src,r="srcAlpha"in a?a.srcAlpha:
a.src,n="dstRGB"in a?a.dstRGB:a.dst;a="dstAlpha"in a?a.dstAlpha:a.dst;c.commandParameter(g,Q,f+".srcRGB",d.commandStr);c.commandParameter(r,Q,f+".srcAlpha",d.commandStr);c.commandParameter(n,Q,f+".dstRGB",d.commandStr);c.commandParameter(a,Q,f+".dstAlpha",d.commandStr);c.command(-1===ia.indexOf(g+", "+n),"unallowed blending combination (srcRGB, dstRGB) = ("+g+", "+n+")",d.commandStr);return[Q[g],Q[n],Q[r],Q[a]]},function(d,g,r){function n(m,k){var f=g.def('"',m,k,'" in ',r,"?",r,".",m,k,":",r,".",
m);c.optional(function(){d.assert(g,f+" in "+h,"invalid "+a+"."+m+k+", must be one of "+q(Q))});return f}var h=d.constants.blendFuncs;c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var m=n("src","RGB"),k=n("dst","RGB");c.optional(function(){d.assert(g,d.constants.invalidBlendCombinations+".indexOf("+m+'+", "+'+k+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var f=g.def(h,"[",m,"]"),l=g.def(h,"[",n("src","Alpha"),"]"),
I=g.def(h,"[",k,"]"),z=g.def(h,"[",n("dst","Alpha"),"]");return[f,I,l,z]});case "blend.equation":return n(function(g){if("string"===typeof g)return c.commandParameter(g,Ba,"invalid "+a,d.commandStr),[Ba[g],Ba[g]];if("object"===typeof g)return c.commandParameter(g.rgb,Ba,a+".rgb",d.commandStr),c.commandParameter(g.alpha,Ba,a+".alpha",d.commandStr),[Ba[g.rgb],Ba[g.alpha]];c.commandRaise("invalid blend.equation",d.commandStr)},function(d,g,r){var n=d.constants.blendEquations,h=g.def(),m=g.def(),k=d.cond("typeof ",
r,'==="string"');c.optional(function(){function g(a,c,r){d.assert(a,r+" in "+n,"invalid "+c+", must be one of "+q(Ba))}g(k.then,a,r);d.assert(k["else"],r+"&&typeof "+r+'==="object"',"invalid "+a);g(k["else"],a+".rgb",r+".rgb");g(k["else"],a+".alpha",r+".alpha")});k.then(h,"=",m,"=",n,"[",r,"];");k["else"](h,"=",n,"[",r,".rgb];",m,"=",n,"[",r,".alpha];");g(k);return[h,m]});case "blend.color":return n(function(a){c.command(u(a)&&4===a.length,"blend.color must be a 4d array",d.commandStr);return H(4,
function(d){return+a[d]})},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===4","blend.color must be a 4d array")});return H(4,function(a){return d.def("+",g,"[",a,"]")})});case "stencil.mask":return n(function(a){c.commandType(a,"number",f,d.commandStr);return a|0},function(a,d,g){c.optional(function(){a.assert(d,"typeof "+g+'==="number"',"invalid stencil.mask")});return d.def(g,"|0")});case "stencil.func":return n(function(g){c.commandType(g,"object",
f,d.commandStr);var r=g.cmp||"keep",n=g.ref||0;g="mask"in g?g.mask:-1;c.commandParameter(r,h,a+".cmp",d.commandStr);c.commandType(n,"number",a+".ref",d.commandStr);c.commandType(g,"number",a+".mask",d.commandStr);return[h[r],n,g]},function(a,d,g){var r=a.constants.compareFuncs;c.optional(function(){function c(){a.assert(d,Array.prototype.join.call(arguments,""),"invalid stencil.func")}c(g+"&&typeof ",g,'==="object"');c('!("cmp" in ',g,")||(",g,".cmp in ",r,")")});var n=d.def('"cmp" in ',g,"?",r,"[",
g,".cmp]",":",7680),h=d.def(g,".ref|0"),m=d.def('"mask" in ',g,"?",g,".mask|0:-1");return[n,h,m]});case "stencil.opFront":case "stencil.opBack":return n(function(g){c.commandType(g,"object",f,d.commandStr);var r=g.fail||"keep",n=g.zfail||"keep";g=g.zpass||"keep";c.commandParameter(r,t,a+".fail",d.commandStr);c.commandParameter(n,t,a+".zfail",d.commandStr);c.commandParameter(g,t,a+".zpass",d.commandStr);return["stencil.opBack"===a?1029:1028,t[r],t[n],t[g]]},function(d,g,r){function n(m){c.optional(function(){d.assert(g,
'!("'+m+'" in '+r+")||("+r+"."+m+" in "+h+")","invalid "+a+"."+m+", must be one of "+q(t))});return g.def('"',m,'" in ',r,"?",h,"[",r,".",m,"]:",7680)}var h=d.constants.stencilOps;c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});return["stencil.opBack"===a?1029:1028,n("fail"),n("zfail"),n("zpass")]});case "polygonOffset.offset":return n(function(a){c.commandType(a,"object",f,d.commandStr);var g=a.factor|0;a=a.units|0;c.commandType(g,"number",f+".factor",d.commandStr);
c.commandType(a,"number",f+".units",d.commandStr);return[g,a]},function(d,g,r){c.optional(function(){d.assert(g,r+"&&typeof "+r+'==="object"',"invalid "+a)});var n=g.def(r,".factor|0"),h=g.def(r,".units|0");return[n,h]});case "cull.face":return n(function(a){var g=0;"front"===a?g=1028:"back"===a&&(g=1029);c.command(!!g,f,d.commandStr);return g},function(a,d,g){c.optional(function(){a.assert(d,g+'==="front"||'+g+'==="back"',"invalid cull.face")});return d.def(g,'==="front"?',1028,":",1029)});case "lineWidth":return n(function(a){c.command("number"===
typeof a&&a>=D.lineWidthDims[0]&&a<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+" and "+D.lineWidthDims[1],d.commandStr);return a},function(a,d,g){c.optional(function(){a.assert(d,"typeof "+g+'==="number"&&'+g+">="+D.lineWidthDims[0]+"&&"+g+"<="+D.lineWidthDims[1],"invalid line width")});return g});case "frontFace":return n(function(a){c.commandParameter(a,k,f,d.commandStr);return k[a]},function(a,d,g){c.optional(function(){a.assert(d,g+'==="cw"||'+
g+'==="ccw"',"invalid frontFace, must be one of cw,ccw")});return d.def(g+'==="cw"?2304:2305')});case "colorMask":return n(function(a){c.command(u(a)&&4===a.length,"color.mask must be length 4 array",d.commandStr);return a.map(function(a){return!!a})},function(a,d,g){c.optional(function(){a.assert(d,a.shared.isArrayLike+"("+g+")&&"+g+".length===4","invalid color.mask")});return H(4,function(a){return"!!"+g+"["+a+"]"})});case "sample.coverage":return n(function(a){c.command("object"===typeof a&&a,
f,d.commandStr);var g="value"in a?a.value:1;a=!!a.invert;c.command("number"===typeof g&&0<=g&&1>=g,"sample.coverage.value must be a number between 0 and 1",d.commandStr);return[g,a]},function(a,d,g){c.optional(function(){a.assert(d,g+"&&typeof "+g+'==="object"',"invalid sample.coverage")});var r=d.def('"value" in ',g,"?+",g,".value:1"),n=d.def("!!",g,".invert");return[r,n]})}});return m}function ma(a,d){var g=a["static"],r=a.dynamic,n={};q(g).forEach(function(a){var r=g[a],h;if("number"===typeof r||
"boolean"===typeof r)h=e(function(){return r});else if("function"===typeof r){var m=r._reglType;"texture2d"===m||"textureCube"===m?h=e(function(a){return a.link(r)}):"framebuffer"===m||"framebufferCube"===m?(c.command(0<r.color.length,'missing color attachment for framebuffer sent to uniform "'+a+'"',d.commandStr),h=e(function(a){return a.link(r.color[0])})):c.commandRaise('invalid data for uniform "'+a+'"',d.commandStr)}else u(r)?h=e(function(d){return d.global.def("[",H(r.length,function(g){c.command("number"===
typeof r[g]||"boolean"===typeof r[g],"invalid uniform "+a,d.commandStr);return r[g]}),"]")}):c.commandRaise('invalid or missing data for uniform "'+a+'"',d.commandStr);h.value=r;n[a]=h});q(r).forEach(function(a){var d=r[a];n[a]=l(d,function(a,g){return a.invoke(g,d)})});return n}function pa(a,d){var g=a["static"],r=a.dynamic,n={};q(g).forEach(function(a){var r=g[a],h=x.id(a),m=new sa;if(b(r))m.state=1,m.buffer=E.getBuffer(E.create(r,34962,!1,!0)),m.type=0;else{var k=E.getBuffer(r);if(k)m.state=1,
m.buffer=k,m.type=0;else if(c.command("object"===typeof r&&r,"invalid data for attribute "+a,d.commandStr),"constant"in r){var f=r.constant;m.buffer="null";m.state=2;"number"===typeof f?m.x=f:(c.command(u(f)&&0<f.length&&4>=f.length,"invalid constant for attribute "+a,d.commandStr),T.forEach(function(a,d){d<f.length&&(m[a]=f[d])}))}else{k=b(r.buffer)?E.getBuffer(E.create(r.buffer,34962,!1,!0)):E.getBuffer(r.buffer);c.command(!!k,'missing buffer for attribute "'+a+'"',d.commandStr);var l=r.offset|
0;c.command(0<=l,'invalid offset for attribute "'+a+'"',d.commandStr);var I=r.stride|0;c.command(0<=I&&256>I,'invalid stride for attribute "'+a+'", must be integer betweeen [0, 255]',d.commandStr);var z=r.size|0;c.command(!("size"in r)||0<z&&4>=z,'invalid size for attribute "'+a+'", must be 1,2,3,4',d.commandStr);var na=!!r.normalized,G=0;"type"in r&&(c.commandParameter(r.type,w,"invalid type for attribute "+a,d.commandStr),G=w[r.type]);var t=r.divisor|0;c.optional(function(){"divisor"in r&&(c.command(0===
t||ra,'cannot specify divisor for attribute "'+a+'", instancing not supported',d.commandStr),c.command(0<=t,'invalid divisor for attribute "'+a+'"',d.commandStr));var g=d.commandStr,n="buffer offset divisor normalized type size stride".split(" ");q(r).forEach(function(d){c.command(0<=n.indexOf(d),'unknown parameter "'+d+'" for attribute pointer "'+a+'" (valid parameters are '+n+")",g)})});m.buffer=k;m.state=1;m.size=z;m.normalized=na;m.type=G||k.dtype;m.offset=l;m.stride=I;m.divisor=t}}n[a]=e(function(a,
d){var g=a.attribCache;if(h in g)return g[h];var r={isStream:!1};q(m).forEach(function(a){r[a]=m[a]});m.buffer&&(r.buffer=a.link(m.buffer),r.type=r.type||r.buffer+".dtype");return g[h]=r})});q(r).forEach(function(a){var d=r[a];n[a]=l(d,function(g,r){function n(a){r(I[a],"=",m,".",a,"|0;")}var m=g.invoke(r,d),h=g.shared,k=g.constants,f=h.isBufferArgs,l=h.buffer;c.optional(function(){g.assert(r,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+f+"("+m+")||"+l+".getBuffer("+m+")||"+l+".getBuffer("+
m+".buffer)||"+f+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+h.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+a+'"')});var I={isStream:r.def(!1)},z=new sa;z.state=1;q(z).forEach(function(a){I[a]=r.def(""+z[a])});var x=I.buffer,na=I.type;r("if(",f,"(",m,")){",I.isStream,"=true;",x,"=",l,".createStream(",34962,",",m,");",na,"=",x,".dtype;","}else{",x,"=",l,".getBuffer(",m,");","if(",x,"){",na,"=",x,".dtype;",'}else if("constant" in ',m,"){",I.state,"=",
2,";","if(typeof "+m+'.constant === "number"){',I[T[0]],"=",m,".constant;",T.slice(1).map(function(a){return I[a]}).join("="),"=0;","}else{",T.map(function(a,d){return I[a]+"="+m+".constant.length>"+d+"?"+m+".constant["+d+"]:0;"}).join(""),"}}else{","if(",f,"(",m,".buffer)){",x,"=",l,".createStream(",34962,",",m,".buffer);","}else{",x,"=",l,".getBuffer(",m,".buffer);","}",na,'="type" in ',m,"?",k.glTypes,"[",m,".type]:",x,".dtype;",I.normalized,"=!!",m,".normalized;");n("size");n("offset");n("stride");
n("divisor");r("}}");r.exit("if(",I.isStream,"){",l,".destroyStream(",x,");","}");return I})});return n}function za(a){var d=a["static"],g=a.dynamic,r={};q(d).forEach(function(a){var g=d[a];r[a]=e(function(a,d){return"number"===typeof g||"boolean"===typeof g?""+g:a.link(g)})});q(g).forEach(function(a){var d=g[a];r[a]=l(d,function(a,g){return a.invoke(g,d)})});return r}function xa(a,d,g,r,n){function h(a){var d=z[a];d&&(na[a]=d)}var k=a["static"],f=a.dynamic;c.optional(function(){function a(g){q(g).forEach(function(a){c.command(0<=
d.indexOf(a),'unknown parameter "'+a+'"',n.commandStr)})}var d="framebuffer vert frag elements primitive offset count instances profile vao".split(" ").concat(ua);a(k);a(f)});var l=m(a,d),I=Da(a,n),z=qa(a,I,n),x=aa(a,n),na=O(a,n),G=J(a,n,l);h("viewport");h(P("scissor.box"));var t=0<q(na).length,I={framebuffer:I,draw:x,shader:G,state:na,dirty:t,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};I.profile=K(a,n);I.uniforms=ma(g,n);I.drawVAO=I.scopeVAO=x.vao;if(!I.drawVAO&&G.program&&!l&&y.angle_instanced_arrays&&
x["static"].elements){var sa=!0;a=G.program.attributes.map(function(a){a=d["static"][a];sa=sa&&!!a;return a});if(sa&&0<a.length){var Ja=A.getVAO(A.createVAO({attributes:a,elements:x["static"].elements}));I.drawVAO=new N(null,null,null,function(a,d){return a.link(Ja)});I.useVAO=!0}}l?I.useVAO=!0:I.attributes=pa(d,n);I.context=za(r,n);return I}function fa(a,d,g){var r=a.shared.context,c=a.scope();q(g).forEach(function(m){d.save(r,"."+m);var n=g[m].append(a,d);Array.isArray(n)?c(r,".",m,"=[",n.join(),
"];"):c(r,".",m,"=",n,";")});d(c)}function Aa(a,d,g,r){var c=a.shared,m=c.gl,n=c.framebuffer,h;wa&&(h=d.def(c.extensions,".webgl_draw_buffers"));var k=a.constants,c=k.drawBuffer,k=k.backBuffer;a=g?g.append(a,d):d.def(n,".next");r||d("if(",a,"!==",n,".cur){");d("if(",a,"){",m,".bindFramebuffer(",36160,",",a,".framebuffer);");wa&&d(h,".drawBuffersWEBGL(",c,"[",a,".colorAttachments.length]);");d("}else{",m,".bindFramebuffer(",36160,",null);");wa&&d(h,".drawBuffersWEBGL(",k,");");d("}",n,".cur=",a,";");
r||d("}")}function ka(a,d,g){var r=a.shared,c=r.gl,m=a.current,n=a.next,h=r.current,k=r.next,f=a.cond(h,".dirty");ua.forEach(function(d){d=P(d);if(!(d in g.state)){var r,l;if(d in n){r=n[d];l=m[d];var I=H(la[d].length,function(a){return f.def(r,"[",a,"]")});f(a.cond(I.map(function(a,d){return a+"!=="+l+"["+d+"]"}).join("||")).then(c,".",Ia[d],"(",I,");",I.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";"))}else r=f.def(k,".",d),I=a.cond(r,"!==",h,".",d),f(I),d in Fa?I(a.cond(r).then(c,".enable(",
Fa[d],");")["else"](c,".disable(",Fa[d],");"),h,".",d,"=",r,";"):I(c,".",Ia[d],"(",r,");",h,".",d,"=",r,";")}});0===q(g.state).length&&f(h,".dirty=false;");d(f)}function oa(a,d,g,r){var c=a.shared,m=a.current,n=c.current,h=c.gl;ca(q(g)).forEach(function(c){var k=g[c];if(!r||r(k)){var f=k.append(a,d);if(Fa[c]){var I=Fa[c];L(k)?f?d(h,".enable(",I,");"):d(h,".disable(",I,");"):d(a.cond(f).then(h,".enable(",I,");")["else"](h,".disable(",I,");"));d(n,".",c,"=",f,";")}else if(u(f)){var l=m[c];d(h,".",Ia[c],
"(",f,");",f.map(function(a,d){return l+"["+d+"]="+a}).join(";"),";")}else d(h,".",Ia[c],"(",f,");",n,".",c,"=",f,";")}})}function ya(a,d){ra&&(a.instancing=d.def(a.shared.extensions,".angle_instanced_arrays"))}function Ja(a,d,g,r,c){function m(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function n(a){x=d.def();a(x,"=",m(),";");"string"===typeof c?a(I,".count+=",c,";"):a(I,".count++;");ea&&(r?(na=d.def(),a(na,"=",z,".getNumPendingQueries();")):a(z,".beginQuery(",I,");"))}
function h(a){a(I,".cpuTime+=",m(),"-",x,";");ea&&(r?a(z,".pushScopeStats(",na,",",z,".getNumPendingQueries(),",I,");"):a(z,".endQuery();"))}function k(a){var g=d.def(l,".profile");d(l,".profile=",a,";");d.exit(l,".profile=",g,";")}var f=a.shared,I=a.stats,l=f.current,z=f.timer;g=g.profile;var x,na;if(g){if(L(g)){g.enable?(n(d),h(d.exit),k("true")):k("false");return}g=g.append(a,d);k(g)}else g=d.def(l,".profile");f=a.block();n(f);d("if(",g,"){",f,"}");a=a.block();h(a);d.exit("if(",g,"){",a,"}")}function na(a,
d,g,r,m){function n(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function h(g,r,c){function m(){d("if(!",l,".buffer){",f,".enableVertexAttribArray(",I,");}");var g=c.type,n;n=c.size?d.def(c.size,"||",r):r;d("if(",l,".type!==",g,"||",l,".size!==",n,"||",na.map(function(a){return l+"."+a+"!=="+c[a]}).join("||"),"){",f,".bindBuffer(",34962,",",z,".buffer);",f,".vertexAttribPointer(",[I,n,g,
c.normalized,c.stride,c.offset],");",l,".type=",g,";",l,".size=",n,";",na.map(function(a){return l+"."+a+"="+c[a]+";"}).join(""),"}");ra&&(g=c.divisor,d("if(",l,".divisor!==",g,"){",a.instancing,".vertexAttribDivisorANGLE(",[I,g],");",l,".divisor=",g,";}"))}function n(){d("if(",l,".buffer){",f,".disableVertexAttribArray(",I,");",l,".buffer=null;","}if(",T.map(function(a,d){return l+"."+a+"!=="+x[d]}).join("||"),"){",f,".vertexAttrib4f(",I,",",x,");",T.map(function(a,d){return l+"."+a+"="+x[d]+";"}).join(""),
"}")}var f=k.gl,I=d.def(g,".location"),l=d.def(k.attributes,"[",I,"]");g=c.state;var z=c.buffer,x=[c.x,c.y,c.z,c.w],na=["buffer","normalized","offset","stride"];1===g?m():2===g?n():(d("if(",g,"===",1,"){"),m(),d("}else{"),n(),d("}"))}var k=a.shared;r.forEach(function(r){var k=r.name,f=g.attributes[k],l;if(f){if(!m(f))return;l=f.append(a,d)}else{if(!m(X))return;var I=a.scopeAttrib(k);c.optional(function(){a.assert(d,I+".state","missing attribute "+k)});l={};q(new sa).forEach(function(a){l[a]=d.def(I,
".",a)})}h(a.link(r),n(r.info.type),l)})}function Za(a,d,g,r,n,m){for(var h=a.shared,k=h.gl,f,l=0;l<r.length;++l){var I=r[l],z=I.name,na=I.info.type,G=g.uniforms[z],I=a.link(I)+".location",q;if(G){if(!n(G))continue;if(L(G)){var t=G.value;c.command(null!==t&&"undefined"!==typeof t,'missing uniform "'+z+'"',a.commandStr);if(35678===na||35680===na)c.command("function"===typeof t&&(35678===na&&("texture2d"===t._reglType||"framebuffer"===t._reglType)||35680===na&&("textureCube"===t._reglType||"framebufferCube"===
t._reglType)),"invalid texture for uniform "+z,a.commandStr),G=a.link(t._texture||t.color[0]._texture),d(k,".uniform1i(",I,",",G+".bind());"),d.exit(G,".unbind();");else if(35674===na||35675===na||35676===na){c.optional(function(){c.command(u(t),"invalid matrix for uniform "+z,a.commandStr);c.command(35674===na&&4===t.length||35675===na&&9===t.length||35676===na&&16===t.length,"invalid length for matrix uniform "+z,a.commandStr)});var G=a.global.def("new Float32Array(["+Array.prototype.slice.call(t)+
"])"),P=2;35675===na?P=3:35676===na&&(P=4);d(k,".uniformMatrix",P,"fv(",I,",false,",G,");")}else{switch(na){case 5126:c.commandType(t,"number","uniform "+z,a.commandStr);f="1f";break;case 35664:c.command(u(t)&&2===t.length,"uniform "+z,a.commandStr);f="2f";break;case 35665:c.command(u(t)&&3===t.length,"uniform "+z,a.commandStr);f="3f";break;case 35666:c.command(u(t)&&4===t.length,"uniform "+z,a.commandStr);f="4f";break;case 35670:c.commandType(t,"boolean","uniform "+z,a.commandStr);f="1i";break;case 5124:c.commandType(t,
"number","uniform "+z,a.commandStr);f="1i";break;case 35671:c.command(u(t)&&2===t.length,"uniform "+z,a.commandStr);f="2i";break;case 35667:c.command(u(t)&&2===t.length,"uniform "+z,a.commandStr);f="2i";break;case 35672:c.command(u(t)&&3===t.length,"uniform "+z,a.commandStr);f="3i";break;case 35668:c.command(u(t)&&3===t.length,"uniform "+z,a.commandStr);f="3i";break;case 35673:c.command(u(t)&&4===t.length,"uniform "+z,a.commandStr);f="4i";break;case 35669:c.command(u(t)&&4===t.length,"uniform "+z,
a.commandStr),f="4i"}d(k,".uniform",f,"(",I,",",u(t)?Array.prototype.slice.call(t):t,");")}continue}else q=G.append(a,d)}else{if(!n(X))continue;q=d.def(h.uniforms,"[",x.id(z),"]")}35678===na?(c(!Array.isArray(q),"must specify a scalar prop for textures"),d("if(",q,"&&",q,'._reglType==="framebuffer"){',q,"=",q,".color[0];","}")):35680===na&&(c(!Array.isArray(q),"must specify a scalar prop for cube maps"),d("if(",q,"&&",q,'._reglType==="framebufferCube"){',q,"=",q,".color[0];","}"));c.optional(function(){function g(r,
c){a.assert(d,r,'bad data or missing for uniform "'+z+'".  '+c)}function r(a){c(!Array.isArray(q),"must not specify an array type for uniform");g("typeof "+q+'==="'+a+'"',"invalid type, expected "+a)}function m(d,r){Array.isArray(q)?c(q.length===d,"must have length "+d):g(h.isArrayLike+"("+q+")&&"+q+".length==="+d,"invalid vector, should have length "+d,a.commandStr)}function n(d){c(!Array.isArray(q),"must not specify a value type");g("typeof "+q+'==="function"&&'+q+'._reglType==="texture'+(3553===
d?"2d":"Cube")+'"',"invalid texture type",a.commandStr)}switch(na){case 5124:r("number");break;case 35667:m(2,"number");break;case 35668:m(3,"number");break;case 35669:m(4,"number");break;case 5126:r("number");break;case 35664:m(2,"number");break;case 35665:m(3,"number");break;case 35666:m(4,"number");break;case 35670:r("boolean");break;case 35671:m(2,"boolean");break;case 35672:m(3,"boolean");break;case 35673:m(4,"boolean");break;case 35674:m(4,"number");break;case 35675:m(9,"number");break;case 35676:m(16,
"number");break;case 35678:n(3553);break;case 35680:n(34067)}});G=1;switch(na){case 35678:case 35680:G=d.def(q,"._texture");d(k,".uniform1i(",I,",",G,".bind());");d.exit(G,".unbind();");continue;case 5124:case 35670:f="1i";break;case 35667:case 35671:f="2i";G=2;break;case 35668:case 35672:f="3i";G=3;break;case 35669:case 35673:f="4i";G=4;break;case 5126:f="1f";break;case 35664:f="2f";G=2;break;case 35665:f="3f";G=3;break;case 35666:f="4f";G=4;break;case 35674:f="Matrix2fv";break;case 35675:f="Matrix3fv";
break;case 35676:f="Matrix4fv"}if("M"===f.charAt(0)){d(k,".uniform",f,"(",I,",");var I=Math.pow(na-35674+2,2),sa=a.global.def("new Float32Array(",I,")");Array.isArray(q)?d("false,(",H(I,function(a){return sa+"["+a+"]="+q[a]}),",",sa,")"):d("false,(Array.isArray(",q,")||",q," instanceof Float32Array)?",q,":(",H(I,function(a){return sa+"["+a+"]="+q+"["+a+"]"}),",",sa,")");d(");")}else{if(1<G){for(var P=[],Ja=[],Ba=0;Ba<G;++Ba)Array.isArray(q)?Ja.push(q[Ba]):Ja.push(d.def(q+"["+Ba+"]")),m&&P.push(d.def());
m&&d("if(!",a.batchId,"||",P.map(function(a,d){return a+"!=="+Ja[d]}).join("||"),"){",P.map(function(a,d){return a+"="+Ja[d]+";"}).join(""));d(k,".uniform",f,"(",I,",",Ja.join(","),");")}else c(!Array.isArray(q),"uniform value must not be an array"),m&&(G=d.def(),d("if(!",a.batchId,"||",G,"!==",q,"){",G,"=",q,";")),d(k,".uniform",f,"(",I,",",q,");");m&&d("}")}}}function Ta(a,d,g,r){function m(c){var n=l[c];return n?n.contextDep&&r.contextDynamic||n.propDep?n.append(a,g):n.append(a,d):d.def(I,".",
c)}function n(){function a(){g(G,".drawElementsInstancedANGLE(",[na,t,P,x+"<<(("+P+"-5121)>>1)",q],");")}function d(){g(G,".drawArraysInstancedANGLE(",[na,x,t,q],");")}z&&"null"!==z?sa?a():(g("if(",z,"){"),a(),g("}else{"),d(),g("}")):d()}function h(){function a(){g(k+".drawElements("+[na,t,P,x+"<<(("+P+"-5121)>>1)"]+");")}function d(){g(k+".drawArrays("+[na,x,t]+");")}z&&"null"!==z?sa?a():(g("if(",z,"){"),a(),g("}else{"),d(),g("}")):d()}var f=a.shared,k=f.gl,I=f.draw,l=r.draw,z=function(){var c=l.elements,
m=d;if(c){if(c.contextDep&&r.contextDynamic||c.propDep)m=g;c=c.append(a,m);l.elementsActive&&m("if("+c+")"+k+".bindBuffer(34963,"+c+".buffer.buffer);")}else c=m.def(),m(c,"=",I,".","elements",";","if(",c,"){",k,".bindBuffer(",34963,",",c,".buffer.buffer);}","else if(",f.vao,".currentVAO){",c,"=",a.shared.elements+".getElements("+f.vao,".currentVAO.elements);",Ea?"":"if("+c+")"+k+".bindBuffer(34963,"+c+".buffer.buffer);","}");return c}(),na=m("primitive"),x=m("offset"),t=function(){var m=l.count,n,
h=d;if(m){if(m.contextDep&&r.contextDynamic||m.propDep)h=g;n=m.append(a,h);c.optional(function(){m.MISSING&&a.assert(d,"false","missing vertex count");m.DYNAMIC&&a.assert(h,n+">=0","missing vertex count")})}else n=h.def(I,".","count"),c.optional(function(){a.assert(h,n+">=0","missing vertex count")});return n}();if("number"===typeof t){if(0===t)return}else g("if(",t,"){"),g.exit("}");var q,G;ra&&(q=m("instances"),G=a.instancing);var P=z+".type",sa=l.elements&&L(l.elements)&&!l.vaoActive;ra&&("number"!==
typeof q||0<=q)?"string"===typeof q?(g("if(",q,">0){"),n(),g("}else if(",q,"<0){"),h(),g("}")):n():h()}function r(a,d,g,r,m){var n=M();m=n.proc("body",m);c.optional(function(){n.commandStr=d.commandStr;n.command=n.link(d.commandStr)});ra&&(n.instancing=m.def(n.shared.extensions,".angle_instanced_arrays"));a(n,m,g,r);return n.compile().body}function n(a,d,g,r){ya(a,d);g.useVAO?g.drawVAO?d(a.shared.vao,".setVAO(",g.drawVAO.append(a,d),");"):d(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(d(a.shared.vao,
".setVAO(null);"),na(a,d,g,r.attributes,function(){return!0}));Za(a,d,g,r.uniforms,function(){return!0},!1);Ta(a,d,d,g)}function z(a,d){var g=a.proc("draw",1);ya(a,g);fa(a,g,d.context);Aa(a,g,d.framebuffer);ka(a,g,d);oa(a,g,d.state);Ja(a,g,d,!1,!0);var c=d.shader.progVar.append(a,g);g(a.shared.gl,".useProgram(",c,".program);");if(d.shader.program)n(a,g,d,d.shader.program);else{g(a.shared.vao,".setVAO(null);");var m=a.global.def("{}"),h=g.def(c,".id"),f=g.def(m,"[",h,"]");g(a.cond(f).then(f,".call(this,a0);")["else"](f,
"=",m,"[",h,"]=",a.link(function(g){return r(n,a,d,g,1)}),"(",c,");",f,".call(this,a0);"))}0<q(d.state).length&&g(a.shared.current,".dirty=true;");a.shared.vao&&g(a.shared.vao,".setVAO(null);")}function va(a,d,g,r){function c(){return!0}a.batchId="a1";ya(a,d);na(a,d,g,r.attributes,c);Za(a,d,g,r.uniforms,c,!1);Ta(a,d,d,g)}function Ca(a,d,g,c){function m(a){return a.contextDep&&h||a.propDep}function n(a){return!m(a)}ya(a,d);var h=g.contextDep,f=d.def(),k=d.def();a.shared.props=k;a.batchId=f;var I=a.scope(),
l=a.scope();d(I.entry,"for(",f,"=0;",f,"<","a1",";++",f,"){",k,"=","a0","[",f,"];",l,"}",I.exit);g.needsContext&&fa(a,l,g.context);g.needsFramebuffer&&Aa(a,l,g.framebuffer);oa(a,l,g.state,m);g.profile&&m(g.profile)&&Ja(a,l,g,!1,!0);c?(g.useVAO?g.drawVAO?m(g.drawVAO)?l(a.shared.vao,".setVAO(",g.drawVAO.append(a,l),");"):I(a.shared.vao,".setVAO(",g.drawVAO.append(a,I),");"):I(a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"):(I(a.shared.vao,".setVAO(null);"),na(a,I,g,c.attributes,n),na(a,l,g,c.attributes,
m)),Za(a,I,g,c.uniforms,n,!1),Za(a,l,g,c.uniforms,m,!0),Ta(a,I,l,g)):(d=a.global.def("{}"),c=g.shader.progVar.append(a,l),k=l.def(c,".id"),I=l.def(d,"[",k,"]"),l(a.shared.gl,".useProgram(",c,".program);","if(!",I,"){",I,"=",d,"[",k,"]=",a.link(function(d){return r(va,a,g,d,2)}),"(",c,");}",I,".call(this,a0[",f,"],",f,");"))}function xd(a,d){function g(a){return a.contextDep&&m||a.propDep}var c=a.proc("batch",2);a.batchId="0";ya(a,c);var m=!1,n=!0;q(d.context).forEach(function(a){m=m||d.context[a].propDep});
m||(fa(a,c,d.context),n=!1);var h=d.framebuffer,f=!1;h?(h.propDep?m=f=!0:h.contextDep&&m&&(f=!0),f||Aa(a,c,h)):Aa(a,c,null);d.state.viewport&&d.state.viewport.propDep&&(m=!0);ka(a,c,d);oa(a,c,d.state,function(a){return!g(a)});d.profile&&g(d.profile)||Ja(a,c,d,!1,"a1");d.contextDep=m;d.needsContext=n;d.needsFramebuffer=f;n=d.shader.progVar;if(n.contextDep&&m||n.propDep)Ca(a,c,d,null);else if(n=n.append(a,c),c(a.shared.gl,".useProgram(",n,".program);"),d.shader.program)Ca(a,c,d,d.shader.program);else{c(a.shared.vao,
".setVAO(null);");var h=a.global.def("{}"),f=c.def(n,".id"),k=c.def(h,"[",f,"]");c(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"=",h,"[",f,"]=",a.link(function(g){return r(Ca,a,d,g,2)}),"(",n,");",k,".call(this,a0,a1);"))}0<q(d.state).length&&c(a.shared.current,".dirty=true;");a.shared.vao&&c(a.shared.vao,".setVAO(null);")}function Hb(a,d){function g(m){var n=d.shader[m];n&&r.set(c.shader,"."+m,n.append(a,r))}var r=a.proc("scope",3);a.batchId="a2";var c=a.shared,m=c.current;fa(a,r,d.context);
d.framebuffer&&d.framebuffer.append(a,r);ca(q(d.state)).forEach(function(g){var m=d.state[g].append(a,r);u(m)?m.forEach(function(d,c){r.set(a.next[g],"["+c+"]",d)}):r.set(c.next,"."+g,m)});Ja(a,r,d,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(g){var m=d.draw[g];m&&r.set(c.draw,"."+g,""+m.append(a,r))});q(d.uniforms).forEach(function(g){var m=d.uniforms[g].append(a,r);Array.isArray(m)&&(m="["+m.join()+"]");r.set(c.uniforms,"["+x.id(g)+"]",m)});q(d.attributes).forEach(function(g){var c=
d.attributes[g].append(a,r),m=a.scopeAttrib(g);q(new sa).forEach(function(a){r.set(m,"."+a,c[a])})});d.scopeVAO&&r.set(c.vao,".targetVAO",d.scopeVAO.append(a,r));g("vert");g("frag");0<q(d.state).length&&(r(m,".dirty=true;"),r.exit(m,".dirty=true;"));r("a1(",a.shared.context,",a0,",a.batchId,");")}function ha(a){if("object"===typeof a&&!u(a)){for(var d=q(a),g=0;g<d.length;++g)if(p.isDynamic(a[d[g]]))return!0;return!1}}function I(a,d,g){function r(a,d){n.forEach(function(g){var r=c[g];p.isDynamic(r)&&
(r=a.invoke(d,r),d(I,".",g,"=",r,";"))})}var c=d["static"][g];if(c&&ha(c)){var m=a.global,n=q(c),h=!1,f=!1,k=!1,I=a.global.def("{}");n.forEach(function(d){var g=c[d];if(p.isDynamic(g))"function"===typeof g&&(g=c[d]=p.unbox(g)),d=l(g,null),h=h||d.thisDep,k=k||d.propDep,f=f||d.contextDep;else{m(I,".",d,"=");switch(typeof g){case "number":m(g);break;case "string":m('"',g,'"');break;case "object":Array.isArray(g)&&m("[",g.join(),"]");break;default:m(a.link(g))}m(";")}});d.dynamic[g]=new p.DynamicVariable(4,
{thisDep:h,contextDep:f,propDep:k,ref:I,append:r});delete d["static"][g]}}var sa=A.Record,Ba={add:32774,subtract:32778,"reverse subtract":32779};y.ext_blend_minmax&&(Ba.min=32775,Ba.max=32776);var ra=y.angle_instanced_arrays,wa=y.webgl_draw_buffers,Ea=y.oes_vertex_array_object,la={dirty:!0,profile:R.profile},W={},ua=[],Fa={},Ia={};B("dither",3024);B("blend.enable",3042);g("blend.color","blendColor",[0,0,0,0]);g("blend.equation","blendEquationSeparate",[32774,32774]);g("blend.func","blendFuncSeparate",
[1,0,1,0]);B("depth.enable",2929,!0);g("depth.func","depthFunc",513);g("depth.range","depthRange",[0,1]);g("depth.mask","depthMask",!0);g("colorMask","colorMask",[!0,!0,!0,!0]);B("cull.enable",2884);g("cull.face","cullFace",1029);g("frontFace","frontFace",2305);g("lineWidth","lineWidth",1);B("polygonOffset.enable",32823);g("polygonOffset.offset","polygonOffset",[0,0]);B("sample.alpha",32926);B("sample.enable",32928);g("sample.coverage","sampleCoverage",[1,!1]);B("stencil.enable",2960);g("stencil.mask",
"stencilMask",-1);g("stencil.func","stencilFunc",[519,0,-1]);g("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);g("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);B("scissor.enable",3089);g("scissor.box","scissor",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);g("viewport","viewport",[0,0,f.drawingBufferWidth,f.drawingBufferHeight]);var mb={gl:f,context:V,strings:x,next:W,current:la,draw:Dc,elements:d,buffer:E,shader:ja,attributes:A.state,vao:A,uniforms:U,framebuffer:a,extensions:y,
timer:ea,isBufferArgs:b},da={primTypes:ba,compareFuncs:h,blendFuncs:Q,blendEquations:Ba,stencilOps:t,glTypes:w,orientationType:k};c.optional(function(){mb.isArrayLike=u});wa&&(da.backBuffer=[1029],da.drawBuffer=H(D.maxDrawbuffers,function(a){return 0===a?[0]:H(a,function(a){return 36064+a})}));var zd=0;return{next:W,current:la,procs:function(){var a=M(),d=a.proc("poll"),g=a.proc("refresh"),r=a.block();d(r);g(r);var c=a.shared,m=c.gl,n=c.next,h=c.current;r(h,".dirty=false;");Aa(a,d);Aa(a,g,null,!0);
var f;ra&&(f=a.link(ra));y.oes_vertex_array_object&&g(a.link(y.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var k=0;k<D.maxAttributes;++k){var I=g.def(c.attributes,"[",k,"]"),l=a.cond(I,".buffer");l.then(m,".enableVertexAttribArray(",k,");",m,".bindBuffer(",34962,",",I,".buffer.buffer);",m,".vertexAttribPointer(",k,",",I,".size,",I,".type,",I,".normalized,",I,".stride,",I,".offset);")["else"](m,".disableVertexAttribArray(",k,");",m,".vertexAttrib4f(",k,",",I,".x,",I,".y,",I,".z,",I,
".w);",I,".buffer=null;");g(l);ra&&g(f,".vertexAttribDivisorANGLE(",k,",",I,".divisor);")}g(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);");q(Fa).forEach(function(c){var f=Fa[c],k=r.def(n,".",c),I=a.block();I("if(",k,"){",m,".enable(",f,")}else{",m,".disable(",f,")}",h,".",c,"=",k,";");g(I);d("if(",k,"!==",h,".",c,"){",I,"}")});q(Ia).forEach(function(c){var f=Ia[c],k=la[c],I,l,z=a.block();z(m,".",f,"(");u(k)?(f=k.length,I=a.global.def(n,".",c),l=a.global.def(h,
".",c),z(H(f,function(a){return I+"["+a+"]"}),");",H(f,function(a){return l+"["+a+"]="+I+"["+a+"];"}).join("")),d("if(",H(f,function(a){return I+"["+a+"]!=="+l+"["+a+"]"}).join("||"),"){",z,"}")):(I=r.def(n,".",c),l=r.def(h,".",c),z(I,");",h,".",c,"=",I,";"),d("if(",I,"!==",l,"){",z,"}"));g(z)});return a.compile()}(),compile:function(a,d,g,r,c){var m=M();m.stats=m.link(c);q(d["static"]).forEach(function(a){I(m,d,a)});v.forEach(function(d){I(m,a,d)});var n=xa(a,d,g,r,m);z(m,n);Hb(m,n);xd(m,n);return F(m.compile(),
{destroy:function(){n.shader.program.destroy()}})}}}},{"./constants/dtypes.json":5,"./constants/primitives.json":6,"./dynamic":9,"./util/check":21,"./util/codegen":23,"./util/extend":25,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/loop":31,"./util/sorted-object-keys":34}],9:[function(ga,Z,Ra){function b(q,c){this.id=l++;this.type=q;this.data=c}function ca(l){if(0===l.length)return[];var c=l.charAt(0),e=l.charAt(l.length-1);if(1<l.length&&c===e&&('"'===c||"'"===
c))return['"'+l.substr(1,l.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(c=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(l))return ca(l.substr(0,c.index)).concat(ca(c[1])).concat(ca(l.substr(c.index+c[0].length)));c=l.split(".");if(1===c.length)return['"'+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];l=[];for(e=0;e<c.length;++e)l=l.concat(ca(c[e]));return l}function N(l){return"["+ca(l).join("][")+"]"}function L(l,c){if("function"===typeof l)return new b(0,l);if("number"===typeof l||
"boolean"===typeof l)return new b(5,l);if(Array.isArray(l))return new b(6,l.map(function(l,q){return L(l,c+"["+q+"]")}));if(l instanceof b)return l;e(!1,"invalid option type in uniform "+c)}var e=ga("./util/check"),l=0;Z.exports={DynamicVariable:b,define:function(l,c){return new b(l,N(c+""))},isDynamic:function(l){return"function"===typeof l&&!l._reglType||l instanceof b},unbox:L,accessor:N}},{"./util/check":21}],10:[function(ga,Z,Ra){var b=ga("./util/check"),ca=ga("./util/is-typed-array"),N=ga("./util/is-ndarray"),
L=ga("./util/values"),e=ga("./constants/primitives.json"),l=ga("./constants/usage.json");Z.exports=function(q,c,F,C){function H(c){this.id=p++;u[this.id]=this;this.buffer=c;this.primType=4;this.type=this.vertCount=0}function U(l,e,w,u,h,t,S){l.buffer.bind();var k;e?((k=S)||ca(e)&&(!N(e)||ca(e.data))||(k=c.oes_element_index_uint?5125:5123),F._initBuffer(l.buffer,e,w,k,3)):(q.bufferData(34963,t,w),l.buffer.dtype=k||5121,l.buffer.usage=w,l.buffer.dimension=3,l.buffer.byteLength=t);k=S;if(!S){switch(l.buffer.dtype){case 5121:case 5120:k=
5121;break;case 5123:case 5122:k=5123;break;case 5125:case 5124:k=5125;break;default:b.raise("unsupported type for element array")}l.buffer.dtype=k}l.type=k;b(5125!==k||!!c.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");e=h;0>e&&(e=l.buffer.byteLength,5123===k?e>>=1:5125===k&&(e>>=2));l.vertCount=e;e=u;0>u&&(e=4,u=l.buffer.dimension,1===u&&(e=0),2===u&&(e=1),3===u&&(e=4));l.primType=e}function y(c){C.elementsCount--;b(null!==c.buffer,"must not double destroy elements");
delete u[c.id];c.buffer.destroy();c.buffer=null}var u={},p=0,ba={uint8:5121,uint16:5123};c.oes_element_index_uint&&(ba.uint32=5125);H.prototype.bind=function(){this.buffer.bind()};var w=[];return{create:function(c,q){function w(c){if(c)if("number"===typeof c)u(c),h.primType=4,h.vertCount=c|0,h.type=5121;else{var q=null,k=35044,v=-1,f=-1,x=0,y=0;if(Array.isArray(c)||ca(c)||N(c))q=c;else if(b.type(c,"object","invalid arguments for elements"),"data"in c&&(q=c.data,b(Array.isArray(q)||ca(q)||N(q),"invalid data for element buffer")),
"usage"in c&&(b.parameter(c.usage,l,"invalid element buffer usage"),k=l[c.usage]),"primitive"in c&&(b.parameter(c.primitive,e,"invalid element buffer primitive"),v=e[c.primitive]),"count"in c&&(b("number"===typeof c.count&&0<=c.count,"invalid vertex count for elements"),f=c.count|0),"type"in c&&(b.parameter(c.type,ba,"invalid buffer type"),y=ba[c.type]),"length"in c)x=c.length|0;else if(x=f,5123===y||5122===y)x*=2;else if(5125===y||5124===y)x*=4;U(h,q,k,v,f,x,y)}else u(),h.primType=4,h.vertCount=
0,h.type=5121;return w}var u=F.create(null,34963,!0),h=new H(u._buffer);C.elementsCount++;w(c);w._reglType="elements";w._elements=h;w.subdata=function(c,h){u.subdata(c,h);return w};w.destroy=function(){y(h)};return w},createStream:function(c){var l=w.pop();l||(l=new H(F.create(null,34963,!0,!1)._buffer));U(l,c,35040,-1,-1,0,0);return l},destroyStream:function(c){w.push(c)},getElements:function(c){return"function"===typeof c&&c._elements instanceof H?c._elements:null},clear:function(){L(u).forEach(y)}}}},
{"./constants/primitives.json":6,"./constants/usage.json":7,"./util/check":21,"./util/is-ndarray":28,"./util/is-typed-array":30,"./util/values":36}],11:[function(ga,Z,Ra){var b=ga("./util/sorted-object-keys"),ca=ga("./util/check");Z.exports=function(N,L){function e(c){ca.type(c,"string","extension name must be string");c=c.toLowerCase();var q;try{q=l[c]=N.getExtension(c)}catch(e){}return!!q}for(var l={},q=0;q<L.extensions.length;++q){var c=L.extensions[q];if(!e(c))return L.onDestroy(),L.onDone('"'+
c+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}L.optionalExtensions.forEach(e);return{extensions:l,restore:function(){b(l).forEach(function(c){if(l[c]&&!e(c))throw Error("(regl): error restoring extension "+c);})}}}},{"./util/check":21,"./util/sorted-object-keys":34}],12:[function(ga,Z,Ra){var b=ga("./util/check"),ca=ga("./util/values"),N=ga("./util/extend"),L=[6407,6408],e=[];e[6408]=4;e[6407]=3;var l=[];l[5121]=1;l[5126]=4;l[36193]=
2;var q=[32854,32855,36194,35907,34842,34843,34836],c={36053:"complete",36054:"incomplete attachment",36057:"incomplete dimensions",36055:"incomplete, missing attachment",36061:"unsupported"};Z.exports=function(F,C,H,U,y,u){function p(a,d,c){this.target=a;this.texture=d;this.renderbuffer=c;var h=a=0;d?(a=d.width,h=d.height):c&&(a=c.width,h=c.height);this.width=a;this.height=h}function ba(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function w(a,
d,c){if(a){if(a.texture){a=a.texture._texture;var h=Math.max(1,a.height);b(Math.max(1,a.width)===d&&h===c,"inconsistent width/height for supplied texture")}else a=a.renderbuffer._renderbuffer,b(a.width===d&&a.height===c,"inconsistent width/height for renderbuffer");a.refCount+=1}}function T(a,d){d&&(d.texture?F.framebufferTexture2D(36160,a,d.target,d.texture._texture.texture,0):F.framebufferRenderbuffer(36160,a,36161,d.renderbuffer._renderbuffer.renderbuffer))}function v(a){var d=3553,c=null,h=null,
l=a;"object"===typeof a&&(l=a.data,"target"in a&&(d=a.target|0));b.type(l,"function","invalid attachment data");a=l._reglType;"texture2d"===a?(c=l,b(3553===d)):"textureCube"===a?(c=l,b(34069<=d&&34075>d,"invalid cube map target")):"renderbuffer"===a?(h=l,d=36161):b.raise("invalid regl object for attachment");return new p(d,c,h)}function Q(a,d,c,h,l){if(c)return a=U.create2D({width:a,height:d,format:h,type:l}),a._texture.refCount=0,new p(3553,a,null);a=y.create({width:a,height:d,format:h});a._renderbuffer.refCount=
0;return new p(36161,null,a)}function ia(a){return a&&(a.texture||a.renderbuffer)}function h(a,d,c){a&&(a.texture?a.texture.resize(d,c):a.renderbuffer&&a.renderbuffer.resize(d,c),a.width=d,a.height=c)}function t(){this.id=d++;G[this.id]=this;this.framebuffer=F.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function S(a){a.colorAttachments.forEach(ba);ba(a.depthAttachment);ba(a.stencilAttachment);ba(a.depthStencilAttachment)}
function k(a){var d=a.framebuffer;b(d,"must not double destroy framebuffer");F.deleteFramebuffer(d);a.framebuffer=null;u.framebufferCount--;delete G[a.id]}function X(a){var d;F.bindFramebuffer(36160,a.framebuffer);var h=a.colorAttachments;for(d=0;d<h.length;++d)T(36064+d,h[d]);for(d=h.length;d<H.maxColorAttachments;++d)F.framebufferTexture2D(36160,36064+d,3553,null,0);F.framebufferTexture2D(36160,33306,3553,null,0);F.framebufferTexture2D(36160,36096,3553,null,0);F.framebufferTexture2D(36160,36128,
3553,null,0);T(36096,a.depthAttachment);T(36128,a.stencilAttachment);T(33306,a.depthStencilAttachment);a=F.checkFramebufferStatus(36160);F.isContextLost()||36053===a||b.raise("framebuffer configuration not supported, status = "+c[a]);F.bindFramebuffer(36160,x.next?x.next.framebuffer:null);x.cur=x.next;F.getError()}function f(a,d){function c(a,d){var h;b(x.next!==f,"can not update framebuffer which is currently in use");var k=0,G=0,t=!0,g=!0;h=null;var u=!0,K="rgba",y="uint8",U=1,m=null,J=null,aa=
null,O=!1;if("number"===typeof a)k=a|0,G=d|0||k;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(G=a.shape,b(Array.isArray(G)&&2<=G.length,"invalid shape for framebuffer"),k=G[0],G=G[1]):("radius"in a&&(k=G=a.radius),"width"in a&&(k=a.width),"height"in a&&(G=a.height));if("color"in a||"colors"in a)h=a.color||a.colors,Array.isArray(h)&&b(1===h.length||C.webgl_draw_buffers,"multiple render targets not supported");if(!h){"colorCount"in a&&(U=a.colorCount|0,b(0<U,"invalid color buffer count"));
"colorTexture"in a&&(u=!!a.colorTexture,K="rgba4");if("colorType"in a){y=a.colorType;if(u)b(C.oes_texture_float||!("float"===y||"float32"===y),"you must enable OES_texture_float in order to use floating point framebuffer objects"),b(C.oes_texture_half_float||!("half float"===y||"float16"===y),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects");else if("half float"===y||"float16"===y)b(C.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),
K="rgba16f";else if("float"===y||"float32"===y)b(C.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),K="rgba32f";b.oneOf(y,E,"invalid color type")}"colorFormat"in a&&(K=a.colorFormat,0<=Y.indexOf(K)?u=!0:0<=D.indexOf(K)?u=!1:b.optional(function(){if(u)b.oneOf(a.colorFormat,Y,"invalid color format for texture");else b.oneOf(a.colorFormat,D,"invalid color format for renderbuffer")}))}if("depthTexture"in a||"depthStencilTexture"in
a)O=!(!a.depthTexture&&!a.depthStencilTexture),b(!O||C.webgl_depth_texture,"webgl_depth_texture extension not supported");"depth"in a&&("boolean"===typeof a.depth?t=a.depth:(m=a.depth,g=!1));"stencil"in a&&("boolean"===typeof a.stencil?g=a.stencil:(J=a.stencil,t=!1));"depthStencil"in a&&("boolean"===typeof a.depthStencil?t=g=a.depthStencil:(aa=a.depthStencil,g=t=!1))}else k=G=1;var p=null,pa=null,T=null,xa=null;if(Array.isArray(h))p=h.map(v);else if(h)p=[v(h)];else for(p=Array(U),h=0;h<U;++h)p[h]=
Q(k,G,u,K,y);b(C.webgl_draw_buffers||1>=p.length,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.");b(p.length<=H.maxColorAttachments,"too many color attachments, not supported");k=k||p[0].width;G=G||p[0].height;m?pa=v(m):t&&!g&&(pa=Q(k,G,O,"depth","uint32"));J?T=v(J):g&&!t&&(T=Q(k,G,!1,"stencil","uint8"));aa?xa=v(aa):!m&&!J&&g&&t&&(xa=Q(k,G,O,"depth stencil","depth stencil"));b(1>=!!m+!!J+!!aa,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");
t=null;for(h=0;h<p.length;++h)w(p[h],k,G),b(!p[h]||p[h].texture&&0<=L.indexOf(p[h].texture._texture.format)||p[h].renderbuffer&&0<=q.indexOf(p[h].renderbuffer._renderbuffer.format),"framebuffer color attachment "+h+" is invalid"),p[h]&&p[h].texture&&(g=e[p[h].texture._texture.format]*l[p[h].texture._texture.type],null===t?t=g:b(t===g,"all color attachments much have the same number of bits per pixel."));w(pa,k,G);b(!pa||pa.texture&&6402===pa.texture._texture.format||pa.renderbuffer&&33189===pa.renderbuffer._renderbuffer.format,
"invalid depth attachment for framebuffer object");w(T,k,G);b(!T||T.renderbuffer&&36168===T.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object");w(xa,k,G);b(!xa||xa.texture&&34041===xa.texture._texture.format||xa.renderbuffer&&34041===xa.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object");S(f);f.width=k;f.height=G;f.colorAttachments=p;f.depthAttachment=pa;f.stencilAttachment=T;f.depthStencilAttachment=xa;c.color=p.map(ia);
c.depth=ia(pa);c.stencil=ia(T);c.depthStencil=ia(xa);c.width=f.width;c.height=f.height;X(f);return c}var f=new t;u.framebufferCount++;c(a,d);return N(c,{resize:function(a,d){b(x.next!==f,"can not resize a framebuffer which is currently in use");var l=Math.max(a|0,1),k=Math.max(d|0||l,1);if(l===f.width&&k===f.height)return c;for(var G=f.colorAttachments,t=0;t<G.length;++t)h(G[t],l,k);h(f.depthAttachment,l,k);h(f.stencilAttachment,l,k);h(f.depthStencilAttachment,l,k);f.width=c.width=l;f.height=c.height=
k;X(f);return c},_reglType:"framebuffer",_framebuffer:f,destroy:function(){k(f);S(f)},use:function(a){x.setFBO({framebuffer:c},a)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},Y=["rgba"],D=["rgba4","rgb565","rgb5 a1"];C.ext_srgb&&D.push("srgba");C.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");C.webgl_color_buffer_float&&D.push("rgba32f");var E=["uint8"];C.oes_texture_half_float&&E.push("half float","float16");C.oes_texture_float&&E.push("float","float32");var d=0,G={};return N(x,{getFramebuffer:function(a){return"function"===
typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof t)?a:null},create:f,createCube:function(a){function d(a){var h;b(0>c.indexOf(x.next),"can not update framebuffer which is currently in use");var l={color:null},k=0,G=null;h="rgba";var t="uint8",q=1;if("number"===typeof a)k=a|0;else if(a){b.type(a,"object","invalid arguments for framebuffer");"shape"in a?(k=a.shape,b(Array.isArray(k)&&2<=k.length,"invalid shape for framebuffer"),b(k[0]===k[1],"cube framebuffer must be square"),k=
k[0]):("radius"in a&&(k=a.radius|0),"width"in a?(k=a.width|0,"height"in a&&b(a.height===k,"must be square")):"height"in a&&(k=a.height|0));if("color"in a||"colors"in a)G=a.color||a.colors,Array.isArray(G)&&b(1===G.length||C.webgl_draw_buffers,"multiple render targets not supported");G||("colorCount"in a&&(q=a.colorCount|0,b(0<q,"invalid color buffer count")),"colorType"in a&&(b.oneOf(a.colorType,E,"invalid color type"),t=a.colorType),"colorFormat"in a&&(h=a.colorFormat,b.oneOf(a.colorFormat,Y,"invalid color format for texture")));
"depth"in a&&(l.depth=a.depth);"stencil"in a&&(l.stencil=a.stencil);"depthStencil"in a&&(l.depthStencil=a.depthStencil)}else k=1;if(G)if(Array.isArray(G))for(a=[],h=0;h<G.length;++h)a[h]=G[h];else a=[G];else for(a=Array(q),G={radius:k,format:h,type:t},h=0;h<q;++h)a[h]=U.createCube(G);l.color=Array(a.length);for(h=0;h<a.length;++h)q=a[h],b("function"===typeof q&&"textureCube"===q._reglType,"invalid cube map"),k=k||q.width,b(q.width===k&&q.height===k,"invalid cube map shape"),l.color[h]={target:34069,
data:a[h]};for(h=0;6>h;++h){for(q=0;q<a.length;++q)l.color[q].target=34069+h;0<h&&(l.depth=c[0].depth,l.stencil=c[0].stencil,l.depthStencil=c[0].depthStencil);if(c[h])c[h](l);else c[h]=f(l)}return N(d,{width:k,height:k,color:a})}var c=Array(6);d(a);return N(d,{faces:c,resize:function(a){var h=a|0;b(0<h&&h<=H.maxCubeMapSize,"invalid radius for cube fbo");if(h===d.width)return d;var l=d.color;for(a=0;a<l.length;++a)l[a].resize(h);for(a=0;6>a;++a)c[a].resize(h);d.width=d.height=h;return d},_reglType:"framebufferCube",
destroy:function(){c.forEach(function(a){a.destroy()})}})},clear:function(){ca(G).forEach(k)},restore:function(){x.cur=null;x.next=null;x.dirty=!0;ca(G).forEach(function(a){a.framebuffer=F.createFramebuffer();X(a)})}})}},{"./util/check":21,"./util/extend":25,"./util/values":36}],13:[function(ga,Z,Ra){var b=ga("./util/sorted-object-keys"),ca=ga("./util/pool");Z.exports=function(N,L){var e=1;L.ext_texture_filter_anisotropic&&(e=N.getParameter(34047));var l=1,q=1;L.webgl_draw_buffers&&(l=N.getParameter(34852),
q=N.getParameter(36063));var c=!!L.oes_texture_float;if(c){c=N.createTexture();N.bindTexture(3553,c);N.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var F=N.createFramebuffer();N.bindFramebuffer(36160,F);N.framebufferTexture2D(36160,36064,3553,c,0);N.bindTexture(3553,null);if(36053!==N.checkFramebufferStatus(36160))c=!1;else{N.viewport(0,0,1,1);N.clearColor(1,0,0,1);N.clear(16384);var C=ca.allocType(5126,4);N.readPixels(0,0,1,1,6408,5126,C);N.getError()?c=!1:(N.deleteFramebuffer(F),N.deleteTexture(c),
c=1===C[0]);ca.freeType(C)}}C=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(C=N.createTexture(),F=ca.allocType(5121,36),N.activeTexture(33984),N.bindTexture(34067,C),N.texImage2D(34069,0,6408,3,3,0,6408,5121,F),ca.freeType(F),N.bindTexture(34067,null),N.deleteTexture(C),C=!N.getError());return{colorBits:[N.getParameter(3410),N.getParameter(3411),N.getParameter(3412),N.getParameter(3413)],depthBits:N.getParameter(3414),
stencilBits:N.getParameter(3415),subpixelBits:N.getParameter(3408),extensions:b(L).filter(function(c){return!!L[c]}),maxAnisotropic:e,maxDrawbuffers:l,maxColorAttachments:q,pointSizeDims:N.getParameter(33901),lineWidthDims:N.getParameter(33902),maxViewportDims:N.getParameter(3386),maxCombinedTextureUnits:N.getParameter(35661),maxCubeMapSize:N.getParameter(34076),maxRenderbufferSize:N.getParameter(34024),maxTextureUnits:N.getParameter(34930),maxTextureSize:N.getParameter(3379),maxAttributes:N.getParameter(34921),
maxVertexUniforms:N.getParameter(36347),maxVertexTextureUnits:N.getParameter(35660),maxVaryingVectors:N.getParameter(36348),maxFragmentUniforms:N.getParameter(36349),glsl:N.getParameter(35724),renderer:N.getParameter(7937),vendor:N.getParameter(7936),version:N.getParameter(7938),readFloat:c,npotTextureCube:C}}},{"./util/pool":32,"./util/sorted-object-keys":34}],14:[function(ga,Z,Ra){var b=ga("./util/check"),ca=ga("./util/is-typed-array");Z.exports=function(N,L,e,l,q,c,F){function C(U){var y;null===
L.next?(b(q.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),y=5121):(b(null!==L.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),y=L.next.colorAttachments[0].texture._texture.type,b.optional(function(){c.oes_texture_float?(b(5121===y||5126===y,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===y&&b(F.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):
b(5121===y,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var u=0,p=0,C=l.framebufferWidth,w=l.framebufferHeight,T=null;ca(U)?T=U:U&&(b.type(U,"object","invalid arguments to regl.read()"),u=U.x|0,p=U.y|0,b(0<=u&&u<l.framebufferWidth,"invalid x offset for regl.read"),b(0<=p&&p<l.framebufferHeight,"invalid y offset for regl.read"),C=(U.width||l.framebufferWidth-u)|0,w=(U.height||l.framebufferHeight-p)|0,T=U.data||null);T&&(5121===y?b(T instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):
5126===y&&b(T instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'"));b(0<C&&C+u<=l.framebufferWidth,"invalid width for read pixels");b(0<w&&w+p<=l.framebufferHeight,"invalid height for read pixels");e();U=C*w*4;T||(5121===y?T=new Uint8Array(U):5126===y&&(T=T||new Float32Array(U)));b.isTypedArray(T,"data buffer for regl.read() must be a typedarray");b(T.byteLength>=U,"data buffer for regl.read() too small");N.pixelStorei(3333,4);N.readPixels(u,p,C,
w,6408,y,T);return T}function H(c){var l;L.setFBO({framebuffer:c.framebuffer},function(){l=C(c)});return l}return function(c){return c&&"framebuffer"in c?H(c):C(c)}}},{"./util/check":21,"./util/is-typed-array":30}],15:[function(ga,Z,Ra){var b=ga("./util/sorted-object-keys"),ca=ga("./util/check"),N=ga("./util/values"),L=[];L[32854]=2;L[32855]=2;L[36194]=2;L[33189]=2;L[36168]=1;L[34041]=4;L[35907]=4;L[34836]=16;L[34842]=8;L[34843]=6;Z.exports=function(e,l,q,c,F){function C(c){this.id=u++;this.refCount=
1;this.renderbuffer=c;this.format=32854;this.height=this.width=0;F.profile&&(this.stats={size:0})}function H(l){var q=l.renderbuffer;ca(q,"must not double destroy renderbuffer");e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(q);l.renderbuffer=null;l.refCount=0;delete p[l.id];c.renderbufferCount--}var U={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};l.ext_srgb&&(U.srgba=35907);l.ext_color_buffer_half_float&&(U.rgba16f=34842,U.rgb16f=34843);l.webgl_color_buffer_float&&
(U.rgba32f=34836);var y=[];b(U).forEach(function(c){y[U[c]]=c});var u=0,p={};C.prototype.decRef=function(){0>=--this.refCount&&H(this)};F.profile&&(c.getTotalRenderbufferSize=function(){var c=0;b(p).forEach(function(l){c+=p[l].stats.size});return c});return{create:function(l,w){function b(c,l){var h=0,t=0,S=32854;"object"===typeof c&&c?("shape"in c?(t=c.shape,ca(Array.isArray(t)&&2<=t.length,"invalid renderbuffer shape"),h=t[0]|0,t=t[1]|0):("radius"in c&&(h=t=c.radius|0),"width"in c&&(h=c.width|0),
"height"in c&&(t=c.height|0)),"format"in c&&(ca.parameter(c.format,U,"invalid renderbuffer format"),S=U[c.format])):"number"===typeof c?(h=c|0,t="number"===typeof l?l|0:h):c?ca.raise("invalid arguments to renderbuffer constructor"):h=t=1;ca(0<h&&0<t&&h<=q.maxRenderbufferSize&&t<=q.maxRenderbufferSize,"invalid renderbuffer size");if(h!==v.width||t!==v.height||S!==v.format)return b.width=v.width=h,b.height=v.height=t,v.format=S,e.bindRenderbuffer(36161,v.renderbuffer),e.renderbufferStorage(36161,S,
h,t),ca(0===e.getError(),"invalid render buffer format"),F.profile&&(v.stats.size=L[v.format]*v.width*v.height),b.format=y[v.format],b}var v=new C(e.createRenderbuffer());p[v.id]=v;c.renderbufferCount++;b(l,w);b.resize=function(c,l){var h=c|0,t=l|0||h;if(h===v.width&&t===v.height)return b;ca(0<h&&0<t&&h<=q.maxRenderbufferSize&&t<=q.maxRenderbufferSize,"invalid renderbuffer size");b.width=v.width=h;b.height=v.height=t;e.bindRenderbuffer(36161,v.renderbuffer);e.renderbufferStorage(36161,v.format,h,
t);ca(0===e.getError(),"invalid render buffer format");F.profile&&(v.stats.size=L[v.format]*v.width*v.height);return b};b._reglType="renderbuffer";b._renderbuffer=v;F.profile&&(b.stats=v.stats);b.destroy=function(){v.decRef()};return b},clear:function(){N(p).forEach(H)},restore:function(){N(p).forEach(function(c){c.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,c.renderbuffer);e.renderbufferStorage(36161,c.format,c.width,c.height)});e.bindRenderbuffer(36161,null)}}}},{"./util/check":21,
"./util/sorted-object-keys":34,"./util/values":36}],16:[function(ga,Z,Ra){var b=ga("./util/sorted-object-keys"),ca=ga("./util/check"),N=ga("./util/extend"),L=ga("./util/values");Z.exports=function(e,l,q,c){function F(c,l,q,h){this.name=c;this.id=l;this.location=q;this.info=h}function C(c,l){for(var q=0;q<c.length;++q)if(c[q].id===l.id){c[q].location=l.location;return}c.push(l)}function H(c,q,w){var h=35632===c?u:p,t=h[q];if(!t){var S=l.str(q),t=e.createShader(c);e.shaderSource(t,S);e.compileShader(t);
ca.shaderError(e,t,S,c,w);h[q]=t}return t}function U(l,q){this.id=T++;this.fragId=l;this.vertId=q;this.program=null;this.uniforms=[];this.attributes=[];this.refCount=1;c.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function y(q,w,b){var h;h=H(35632,q.fragId);var t=H(35633,q.vertId),S=q.program=e.createProgram();e.attachShader(S,h);e.attachShader(S,t);if(b)for(h=0;h<b.length;++h)t=b[h],e.bindAttribLocation(S,t[0],t[1]);e.linkProgram(S);ca.linkError(e,S,l.str(q.fragId),l.str(q.vertId),
w);b=e.getProgramParameter(S,35718);c.profile&&(q.stats.uniformsCount=b);t=q.uniforms;for(h=0;h<b;++h)if(w=e.getActiveUniform(S,h))if(1<w.size)for(var k=0;k<w.size;++k){var u=w.name.replace("[0]","["+k+"]");C(t,new F(u,l.id(u),e.getUniformLocation(S,u),w))}else C(t,new F(w.name,l.id(w.name),e.getUniformLocation(S,w.name),w));b=e.getProgramParameter(S,35721);c.profile&&(q.stats.attributesCount=b);q=q.attributes;for(h=0;h<b;++h)(w=e.getActiveAttrib(S,h))&&C(q,new F(w.name,l.id(w.name),e.getAttribLocation(S,
w.name),w))}var u={},p={},ba={},w=[],T=0;c.profile&&(q.getMaxUniformsCount=function(){var c=0;w.forEach(function(l){l.stats.uniformsCount>c&&(c=l.stats.uniformsCount)});return c},q.getMaxAttributesCount=function(){var c=0;w.forEach(function(l){l.stats.attributesCount>c&&(c=l.stats.attributesCount)});return c});return{clear:function(){var c=e.deleteShader.bind(e);L(u).forEach(c);u={};L(p).forEach(c);p={};w.forEach(function(c){e.deleteProgram(c.program)});w.length=0;ba={};q.shaderCount=0},program:function(c,
l,L,h){ca.command(0<=c,"missing vertex shader",L);ca.command(0<=l,"missing fragment shader",L);var t=ba[l];t||(t=ba[l]={});var S=t[c];if(S&&(S.refCount++,!h))return S;var k=new U(l,c);q.shaderCount++;y(k,L,h);S||(t[c]=k);w.push(k);return N(k,{destroy:function(){k.refCount--;if(0>=k.refCount){e.deleteProgram(k.program);var c=w.indexOf(k);w.splice(c,1);q.shaderCount--}0>=t[k.vertId].refCount&&(e.deleteShader(p[k.vertId]),delete p[k.vertId],delete ba[k.fragId][k.vertId]);b(ba[k.fragId]).length||(e.deleteShader(u[k.fragId]),
delete u[k.fragId],delete ba[k.fragId])}})},restore:function(){u={};p={};for(var c=0;c<w.length;++c)y(w[c],null,w[c].attributes.map(function(c){return[c.location,c.name]}))},shader:H,frag:-1,vert:-1}}},{"./util/check":21,"./util/extend":25,"./util/sorted-object-keys":34,"./util/values":36}],17:[function(ga,Z,Ra){Z.exports=function(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}},{}],18:[function(ga,
Z,Ra){Z.exports=function(){var b={"":0},ca=[""];return{id:function(N){var L=b[N];if(L)return L;L=b[N]=ca.length;ca.push(N);return L},str:function(b){return ca[b]}}}},{}],19:[function(ga,Z,Ra){function b(d){return"[object "+d+"]"}function ca(d){return Array.isArray(d)&&(0===d.length||"number"===typeof d[0])}function N(d){return Array.isArray(d)&&0!==d.length&&ba(d[0])?!0:!1}function L(d){return Object.prototype.toString.call(d)}function e(d){if(!d)return!1;var c=L(d);return 0<=Y.indexOf(c)?!0:ca(d)||
N(d)||y(d)}function l(d,c){36193===d.type?(d.data=p(c),u.freeType(c)):d.data=c}function q(d,c,a,l,k,f){d="undefined"!==typeof E[d]?E[d]:h[d]*D[c];f&&(d*=6);if(k){for(l=0;1<=a;)l+=d*a*a,a/=2;return l}return d*a*l}var c=ga("./util/sorted-object-keys"),F=ga("./util/check"),C=ga("./util/extend"),H=ga("./util/values"),U=ga("./util/is-typed-array"),y=ga("./util/is-ndarray"),u=ga("./util/pool"),p=ga("./util/to-half-float"),ba=ga("./util/is-array-like"),w=ga("./util/flatten"),T=ga("./util/is-pow2");Ra=ga("./constants/arraytypes.json");
var v=ga("./constants/arraytypes.json"),Q=[9984,9986,9985,9987],ia=[0,6409,6410,6407,6408],h={};h[6409]=h[6406]=h[6402]=1;h[34041]=h[6410]=2;h[6407]=h[35904]=3;h[6408]=h[35906]=4;var t=b("HTMLCanvasElement"),S=b("OffscreenCanvas"),k=b("CanvasRenderingContext2D"),X=b("ImageBitmap"),f=b("HTMLImageElement"),x=b("HTMLVideoElement"),Y=c(Ra).concat([t,S,k,X,f,x]),D=[];D[5121]=1;D[5126]=4;D[36193]=2;D[5123]=2;D[5125]=4;var E=[];E[32854]=2;E[32855]=2;E[36194]=2;E[34041]=4;E[33776]=.5;E[33777]=.5;E[33778]=
1;E[33779]=1;E[35986]=.5;E[35987]=1;E[34798]=1;E[35840]=.5;E[35841]=.25;E[35842]=.5;E[35843]=.25;E[36196]=.5;Z.exports=function(d,G,a,b,A,E,D){function V(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function ea(a,d){a.internalformat=d.internalformat;a.format=d.format;a.type=d.type;a.compressed=d.compressed;a.premultiplyAlpha=d.premultiplyAlpha;a.flipY=d.flipY;
a.unpackAlignment=d.unpackAlignment;a.colorSpace=d.colorSpace;a.width=d.width;a.height=d.height;a.channels=d.channels}function R(d,c){if("object"===typeof c&&c){"premultiplyAlpha"in c&&(F.type(c.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),d.premultiplyAlpha=c.premultiplyAlpha);"flipY"in c&&(F.type(c.flipY,"boolean","invalid texture flip"),d.flipY=c.flipY);"alignment"in c&&(F.oneOf(c.alignment,[1,2,4,8],"invalid texture unpack alignment"),d.unpackAlignment=c.alignment);"colorSpace"in c&&
(F.parameter(c.colorSpace,Ta,"invalid colorSpace"),d.colorSpace=Ta[c.colorSpace]);if("type"in c){var g=c.type;F(G.oes_texture_float||!("float"===g||"float32"===g),"you must enable the OES_texture_float extension in order to use floating point textures.");F(G.oes_texture_half_float||!("half float"===g||"float16"===g),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.");F(G.webgl_depth_texture||!("uint16"===g||"uint32"===g||"depth stencil"===g),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.");
F.parameter(g,r,"invalid texture type");d.type=r[g]}var m=d.width,l=d.height,k=d.channels,g=!1;"shape"in c?(F(Array.isArray(c.shape)&&2<=c.shape.length,"shape must be an array"),m=c.shape[0],l=c.shape[1],3===c.shape.length&&(k=c.shape[2],F(0<k&&4>=k,"invalid number of channels"),g=!0),F(0<=m&&m<=a.maxTextureSize,"invalid width"),F(0<=l&&l<=a.maxTextureSize,"invalid height")):("radius"in c&&(m=l=c.radius,F(0<=m&&m<=a.maxTextureSize,"invalid radius")),"width"in c&&(m=c.width,F(0<=m&&m<=a.maxTextureSize,
"invalid width")),"height"in c&&(l=c.height,F(0<=l&&l<=a.maxTextureSize,"invalid height")),"channels"in c&&(k=c.channels,F(0<k&&4>=k,"invalid number of channels"),g=!0));d.width=m|0;d.height=l|0;d.channels=k|0;m=!1;"format"in c&&(m=c.format,F(G.webgl_depth_texture||!("depth"===m||"depth stencil"===m),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),F.parameter(m,n,"invalid texture format"),l=d.internalformat=n[m],d.format=Ba[l],m in r&&!("type"in c)&&(d.type=
r[m]),m in z&&(d.compressed=!0),m=!0);!g&&m?d.channels=h[d.format]:g&&!m?d.channels!==ia[d.format]&&(d.format=d.internalformat=ia[d.channels]):m&&g&&F(d.channels===h[d.format],"number of channels inconsistent with specified format")}}function P(a){d.pixelStorei(37440,a.flipY);d.pixelStorei(37441,a.premultiplyAlpha);d.pixelStorei(37443,a.colorSpace);d.pixelStorei(3317,a.unpackAlignment)}function B(){V.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=
!1}function g(d,c){var g=null;e(c)?g=c:c&&(F.type(c,"object","invalid pixel data type"),R(d,c),"x"in c&&(d.xOffset=c.x|0),"y"in c&&(d.yOffset=c.y|0),e(c.data)&&(g=c.data));F(!d.compressed||g instanceof Uint8Array,"compressed texture data must be stored in a uint8array");if(c.copy){F(!g,"can not specify copy and data field for the same texture");var r=A.viewportWidth,m=A.viewportHeight;d.width=d.width||r-d.xOffset;d.height=d.height||m-d.yOffset;d.needsCopy=!0;F(0<=d.xOffset&&d.xOffset<r&&0<=d.yOffset&&
d.yOffset<m&&0<d.width&&d.width<=r&&0<d.height&&d.height<=m,"copy texture read out of bounds")}else if(!g)d.width=d.width||1,d.height=d.height||1,d.channels=d.channels||4;else if(U(g))d.channels=d.channels||4,d.data=g,"type"in c||5121!==d.type||(d.type=v[Object.prototype.toString.call(g)]|0);else if(ca(g)){d.channels=d.channels||4;r=g;m=r.length;switch(d.type){case 5121:case 5123:case 5125:case 5126:m=u.allocType(d.type,m);m.set(r);d.data=m;break;case 36193:d.data=p(r);break;default:F.raise("unsupported texture type, must specify a typed array")}d.alignment=
1;d.needsFree=!0}else if(y(g)){r=g.data;Array.isArray(r)||5121!==d.type||(d.type=v[Object.prototype.toString.call(r)]|0);var m=g.shape,h=g.stride,n,I,z,q;3===m.length?(z=m[2],q=h[2]):(F(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),q=z=1);n=m[0];I=m[1];m=h[0];h=h[1];d.alignment=1;d.width=n;d.height=I;d.channels=z;d.format=d.internalformat=ia[z];d.needsFree=!0;n=q;g=g.offset;z=d.width;q=d.height;I=d.channels;for(var G=u.allocType(36193===d.type?5126:d.type,z*q*I),na=0,sa=0;sa<q;++sa)for(var Ja=
0;Ja<z;++Ja)for(var Ba=0;Ba<I;++Ba)G[na++]=r[m*Ja+h*sa+n*Ba+g];l(d,G)}else if(L(g)===t||L(g)===S||L(g)===k)L(g)===t||L(g)===S?d.element=g:d.element=g.canvas,d.width=d.element.width,d.height=d.element.height,d.channels=4;else if(L(g)===X)d.element=g,d.width=g.width,d.height=g.height,d.channels=4;else if(L(g)===f)d.element=g,d.width=g.naturalWidth,d.height=g.naturalHeight,d.channels=4;else if(L(g)===x)d.element=g,d.width=g.videoWidth,d.height=g.videoHeight,d.channels=4;else if(N(g)){r=d.width||g[0].length;
m=d.height||g.length;h=d.channels;h=ba(g[0][0])?h||g[0][0].length:h||1;n=w.shape(g);z=1;for(q=0;q<n.length;++q)z*=n[q];z=u.allocType(36193===d.type?5126:d.type,z);w.flatten(g,n,"",z);l(d,z);d.alignment=1;d.width=r;d.height=m;d.channels=h;d.format=d.internalformat=ia[h];d.needsFree=!0}5126===d.type?F(0<=a.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===d.type&&F(0<=a.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}
function M(a,c,g,r,m){var h=a.element,n=a.data,l=a.internalformat,k=a.format,f=a.type,I=a.width,z=a.height;P(a);h?d.texSubImage2D(c,m,g,r,k,f,h):a.compressed?d.compressedTexSubImage2D(c,m,g,r,l,I,z,n):a.needsCopy?(b(),d.copyTexSubImage2D(c,m,g,r,a.xOffset,a.yOffset,I,z)):d.texSubImage2D(c,m,g,r,I,z,k,f,n)}function K(){return ra.pop()||new B}function Da(a){a.needsFree&&u.freeType(a.data);B.call(a);ra.push(a)}function qa(){V.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=
Array(16)}function m(a,d,c){var g=a.images[0]=K();a.mipmask=1;g.width=a.width=d;g.height=a.height=c;g.channels=a.channels=4}function J(a,d){var c=null;if(e(d))c=a.images[0]=K(),ea(c,a),g(c,d),a.mipmask=1;else if(R(a,d),Array.isArray(d.mipmap))for(var r=d.mipmap,m=0;m<r.length;++m)c=a.images[m]=K(),ea(c,a),c.width>>=m,c.height>>=m,g(c,r[m]),a.mipmask|=1<<m;else c=a.images[0]=K(),ea(c,a),g(c,d),a.mipmask=1;ea(a,a.images[0]);!a.compressed||33776!==a.internalformat&&33777!==a.internalformat&&33778!==
a.internalformat&&33779!==a.internalformat||F(0===a.width%4&&0===a.height%4,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function aa(a,c){for(var g=a.images,r=0;r<g.length&&g[r];++r){var m=g[r],h=c,n=r,l=m.element,k=m.data,f=m.internalformat,I=m.format,z=m.type,q=m.width,G=m.height;P(m);l?d.texImage2D(h,n,I,I,z,l):m.compressed?d.compressedTexImage2D(h,n,f,q,G,0,k):m.needsCopy?(b(),d.copyTexImage2D(h,n,I,m.xOffset,m.yOffset,q,G,0)):d.texImage2D(h,
n,I,q,G,0,I,z,k||null)}}function O(){var a=wa.pop()||new qa;V.call(a);for(var d=a.mipmask=0;16>d;++d)a.images[d]=null;return a}function ma(a){for(var d=a.images,c=0;c<d.length;++c)d[c]&&Da(d[c]),d[c]=null;wa.push(a)}function pa(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Y(d,c){if("min"in c){var g=c.min;F.parameter(g,Za);d.minFilter=Za[g];0<=Q.indexOf(d.minFilter)&&!("faces"in c)&&(d.genMipmaps=!0)}"mag"in c&&
(g=c.mag,F.parameter(g,na),d.magFilter=na[g]);var g=d.wrapS,r=d.wrapT;if("wrap"in c){var m=c.wrap;"string"===typeof m?(F.parameter(m,Ja),g=r=Ja[m]):Array.isArray(m)&&(F.parameter(m[0],Ja),F.parameter(m[1],Ja),g=Ja[m[0]],r=Ja[m[1]])}else"wrapS"in c&&(g=c.wrapS,F.parameter(g,Ja),g=Ja[g]),"wrapT"in c&&(r=c.wrapT,F.parameter(r,Ja),r=Ja[r]);d.wrapS=g;d.wrapT=r;"anisotropic"in c&&(g=c.anisotropic,F("number"===typeof g&&1<=g&&g<=a.maxAnisotropic,"aniso samples must be between 1 and "),d.anisotropic=c.anisotropic);
if("mipmap"in c){g=!1;switch(typeof c.mipmap){case "string":F.parameter(c.mipmap,ya,"invalid mipmap hint");d.mipmapHint=ya[c.mipmap];g=d.genMipmaps=!0;break;case "boolean":g=d.genMipmaps=c.mipmap;break;case "object":F(Array.isArray(c.mipmap),"invalid mipmap type");d.genMipmaps=!1;g=!0;break;default:F.raise("invalid mipmap type")}!g||"min"in c||(d.minFilter=9984)}}function xa(a,c){d.texParameteri(c,10241,a.minFilter);d.texParameteri(c,10240,a.magFilter);d.texParameteri(c,10242,a.wrapS);d.texParameteri(c,
10243,a.wrapT);G.ext_texture_filter_anisotropic&&d.texParameteri(c,34046,a.anisotropic);a.genMipmaps&&(d.hint(33170,a.mipmapHint),d.generateMipmap(c))}function fa(a){V.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ea++;this.refCount=1;this.target=a;this.texture=d.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new pa;D.profile&&(this.stats={size:0})}function Aa(a){d.activeTexture(33984);d.bindTexture(a.target,a.texture)}function ka(){var a=ua[0];a?d.bindTexture(a.target,a.texture):
d.bindTexture(3553,null)}function oa(a){var c=a.texture;F(c,"must not double destroy texture");var g=a.unit,m=a.target;0<=g&&(d.activeTexture(33984+g),d.bindTexture(m,null),ua[g]=null);d.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete la[a.id];E.textureCount--}var ya={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ja={repeat:10497,clamp:33071,mirror:33648},na={nearest:9728,linear:9729},Za=C({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,
"nearest mipmap linear":9986,"linear mipmap linear":9987},na),Ta={none:0,browser:37444},r={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},n={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},z={};G.ext_srgb&&(n.srgb=35904,n.srgba=35906);G.oes_texture_float&&(r.float32=r["float"]=5126);G.oes_texture_half_float&&(r.float16=r["half float"]=36193);G.webgl_depth_texture&&(C(n,{depth:6402,"depth stencil":34041}),C(r,{uint16:5123,uint32:5125,
"depth stencil":34042}));G.webgl_compressed_texture_s3tc&&C(z,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});G.webgl_compressed_texture_atc&&C(z,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});G.webgl_compressed_texture_pvrtc&&C(z,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});G.webgl_compressed_texture_etc1&&(z["rgb etc1"]=36196);var va=Array.prototype.slice.call(d.getParameter(34467));
c(z).forEach(function(a){var d=z[a];0<=va.indexOf(d)&&(n[a]=d)});var Ca=c(n);a.textureFormats=Ca;var xd=[];c(n).forEach(function(a){xd[n[a]]=a});var Hb=[];c(r).forEach(function(a){Hb[r[a]]=a});var ha=[];c(na).forEach(function(a){ha[na[a]]=a});var I=[];c(Za).forEach(function(a){I[Za[a]]=a});var sa=[];c(Ja).forEach(function(a){sa[Ja[a]]=a});var Ba=Ca.reduce(function(a,d){var c=n[d];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c||G.ext_srgb&&(35904===c||35906===c)?a[c]=c:32855===c||0<=d.indexOf("rgba")?
a[c]=6408:a[c]=6407;return a},{}),ra=[],wa=[],Ea=0,la={},W=a.maxTextureUnits,ua=Array(W).map(function(){return null});C(fa.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<W;++c){var g=ua[c];if(g){if(0<g.bindCount)continue;g.unit=-1}ua[c]=this;a=c;break}a>=W&&F.raise("insufficient number of texture units");D.profile&&E.maxTextureUnits<a+1&&(E.maxTextureUnits=a+1);this.unit=a;d.activeTexture(33984+a);d.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},
decRef:function(){0>=--this.refCount&&oa(this)}});D.profile&&(E.getTotalTextureSize=function(){var a=0;c(la).forEach(function(d){a+=la[d].stats.size});return a});return{create2D:function(c,r){function h(d,c){var g=n.texInfo;pa.call(g);var r=O();"number"===typeof d?"number"===typeof c?m(r,d|0,c|0):m(r,d|0,d|0):d?(F.type(d,"object","invalid arguments to regl.texture"),Y(g,d),J(r,d)):m(r,1,1);g.genMipmaps&&(r.mipmask=(r.width<<1)-1);n.mipmask=r.mipmask;ea(n,r);F.texture2D(g,r,a);n.internalformat=r.internalformat;
h.width=r.width;h.height=r.height;Aa(n);aa(r,3553);xa(g,3553);ka();ma(r);D.profile&&(n.stats.size=q(n.internalformat,n.type,r.width,r.height,g.genMipmaps,!1));h.format=xd[n.internalformat];h.type=Hb[n.type];h.mag=ha[g.magFilter];h.min=I[g.minFilter];h.wrapS=sa[g.wrapS];h.wrapT=sa[g.wrapT];return h}var n=new fa(3553);la[n.id]=n;E.textureCount++;h(c,r);h.subimage=function(a,d,c,r){F(!!a,"must specify image data");d|=0;c|=0;r|=0;var m=K();ea(m,n);m.width=0;m.height=0;g(m,a);m.width=m.width||(n.width>>
r)-d;m.height=m.height||(n.height>>r)-c;F(n.type===m.type&&n.format===m.format&&n.internalformat===m.internalformat,"incompatible format for texture.subimage");F(0<=d&&0<=c&&d+m.width<=n.width&&c+m.height<=n.height,"texture.subimage write out of bounds");F(n.mipmask&1<<r,"missing mipmap data");F(m.data||m.element||m.needsCopy,"missing image data");Aa(n);M(m,3553,d,c,r);ka();Da(m);return h};h.resize=function(a,c){var g=a|0,r=c|0||g;if(g===n.width&&r===n.height)return h;h.width=n.width=g;h.height=n.height=
r;Aa(n);for(var m=0;n.mipmask>>m;++m){var l=g>>m,k=r>>m;if(!l||!k)break;d.texImage2D(3553,m,n.format,l,k,0,n.format,n.type,null)}ka();D.profile&&(n.stats.size=q(n.internalformat,n.type,g,r,!1,!1));return h};h._reglType="texture2d";h._texture=n;D.profile&&(h.stats=n.stats);h.destroy=function(){n.decRef()};return h},createCube:function(c,r,h,n,l,k){function f(d,c,g,r,h,n){var l,k=z.texInfo;pa.call(k);for(l=0;6>l;++l)G[l]=O();if("number"!==typeof d&&d)if("object"===typeof d)if(c)J(G[0],d),J(G[1],c),
J(G[2],g),J(G[3],r),J(G[4],h),J(G[5],n);else if(Y(k,d),R(z,d),"faces"in d)for(d=d.faces,F(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),l=0;6>l;++l)F("object"===typeof d[l]&&!!d[l],"invalid input for cube map face"),ea(G[l],z),J(G[l],d[l]);else for(l=0;6>l;++l)J(G[l],d);else F.raise("invalid arguments to cube map");else for(d=d|0||1,l=0;6>l;++l)m(G[l],d,d);ea(z,G[0]);F.optional(function(){a.npotTextureCube||F(T(z.width)&&T(z.height),"your browser does not support non power or two texture dimensions")});
z.mipmask=k.genMipmaps?(G[0].width<<1)-1:G[0].mipmask;F.textureCube(z,k,G,a);z.internalformat=G[0].internalformat;f.width=G[0].width;f.height=G[0].height;Aa(z);for(l=0;6>l;++l)aa(G[l],34069+l);xa(k,34067);ka();D.profile&&(z.stats.size=q(z.internalformat,z.type,f.width,f.height,k.genMipmaps,!0));f.format=xd[z.internalformat];f.type=Hb[z.type];f.mag=ha[k.magFilter];f.min=I[k.minFilter];f.wrapS=sa[k.wrapS];f.wrapT=sa[k.wrapT];for(l=0;6>l;++l)ma(G[l]);return f}var z=new fa(34067);la[z.id]=z;E.cubeCount++;
var G=Array(6);f(c,r,h,n,l,k);f.subimage=function(a,d,c,r,m){F(!!d,"must specify image data");F("number"===typeof a&&a===(a|0)&&0<=a&&6>a,"invalid face");c|=0;r|=0;m|=0;var h=K();ea(h,z);h.width=0;h.height=0;g(h,d);h.width=h.width||(z.width>>m)-c;h.height=h.height||(z.height>>m)-r;F(z.type===h.type&&z.format===h.format&&z.internalformat===h.internalformat,"incompatible format for texture.subimage");F(0<=c&&0<=r&&c+h.width<=z.width&&r+h.height<=z.height,"texture.subimage write out of bounds");F(z.mipmask&
1<<m,"missing mipmap data");F(h.data||h.element||h.needsCopy,"missing image data");Aa(z);M(h,34069+a,c,r,m);ka();Da(h);return f};f.resize=function(a){a|=0;if(a!==z.width){f.width=z.width=a;f.height=z.height=a;Aa(z);for(var c=0;6>c;++c)for(var g=0;z.mipmask>>g;++g)d.texImage2D(34069+c,g,z.format,a>>g,a>>g,0,z.format,z.type,null);ka();D.profile&&(z.stats.size=q(z.internalformat,z.type,f.width,f.height,!1,!0));return f}};f._reglType="textureCube";f._texture=z;D.profile&&(f.stats=z.stats);f.destroy=function(){z.decRef()};
return f},clear:function(){for(var a=0;a<W;++a)d.activeTexture(33984+a),d.bindTexture(3553,null),ua[a]=null;H(la).forEach(oa);E.cubeCount=0;E.textureCount=0},getTexture:function(a){return null},restore:function(){for(var a=0;a<W;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null)}H(la).forEach(function(a){a.texture=d.createTexture();d.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)d.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,
a.type,null);else for(var g=0;6>g;++g)d.texImage2D(34069+g,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);xa(a.texInfo,a.target)})},refresh:function(){for(var a=0;a<W;++a){var c=ua[a];c&&(c.bindCount=0,c.unit=-1,ua[a]=null);d.activeTexture(33984+a);d.bindTexture(3553,null);d.bindTexture(34067,null)}}}}},{"./constants/arraytypes.json":4,"./util/check":21,"./util/extend":25,"./util/flatten":26,"./util/is-array-like":27,"./util/is-ndarray":28,"./util/is-pow2":29,"./util/is-typed-array":30,
"./util/pool":32,"./util/sorted-object-keys":34,"./util/to-half-float":35,"./util/values":36}],20:[function(ga,Z,Ra){Z.exports=function(b,ca){function N(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function L(l,e,b){var u=q.pop()||new N;u.startQueryIndex=l;u.endQueryIndex=e;u.sum=0;u.stats=b;c.push(u)}if(!ca.ext_disjoint_timer_query)return null;var e=[],l=[],q=[],c=[],F=[],C=[];return{beginQuery:function(c){var q=e.pop()||ca.ext_disjoint_timer_query.createQueryEXT();ca.ext_disjoint_timer_query.beginQueryEXT(35007,
q);l.push(q);L(l.length-1,l.length,c)},endQuery:function(){ca.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:L,update:function(){var b,L;b=l.length;if(0!==b){C.length=Math.max(C.length,b+1);F.length=Math.max(F.length,b+1);F[0]=0;var y=C[0]=0;for(L=b=0;L<l.length;++L){var u=l[L];ca.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(y+=ca.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),e.push(u)):l[b++]=u;F[L+1]=y;C[L+1]=b}l.length=b;for(L=b=0;L<c.length;++L){var y=c[L],p=y.startQueryIndex,
u=y.endQueryIndex;y.sum+=F[u]-F[p];p=C[p];u=C[u];u===p?(y.stats.gpuTime+=y.sum/1E6,q.push(y)):(y.startQueryIndex=p,y.endQueryIndex=u,c[b++]=y)}c.length=b}},getNumPendingQueries:function(){return l.length},clear:function(){e.push.apply(e,l);for(var c=0;c<e.length;c++)ca.ext_disjoint_timer_query.deleteQueryEXT(e[c]);l.length=0;e.length=0},restore:function(){l.length=0;e.length=0}}}},{}],21:[function(ga,Z,Ra){function b(c){return"undefined"!==typeof atob?atob(c):"base64:"+c}function ca(c){c=Error("(regl) "+
c);console.error(c);throw c;}function N(c,h){c||ca(h)}function L(c){return c?": "+c:""}function e(c,h){switch(h){case "number":return"number"===typeof c;case "object":return"object"===typeof c;case "string":return"string"===typeof c;case "boolean":return"boolean"===typeof c;case "function":return"function"===typeof c;case "undefined":return"undefined"===typeof c;case "symbol":return"symbol"===typeof c}}function l(c,h,l){0>h.indexOf(c)&&ca("invalid value"+L(l)+". must be one of: "+h)}function q(c,
h){for(c+="";c.length<h;)c=" "+c;return c}function c(){this.name="unknown";this.lines=[];this.index={};this.hasErrors=!1}function F(c,h){this.number=c;this.line=h;this.errors=[]}function C(c,h,l){this.file=c;this.line=h;this.message=l}function H(){var c=Error(),c=(c.stack||c).toString(),h=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(c);return h?h[1]:(c=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(c))?c[1]:"unknown"}function U(){var c=Error(),c=(c.stack||c).toString(),h=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(c);
return h?h[1]:(c=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(c))?c[1]:"unknown"}function y(h,l){var q=h.split("\n"),f=1,x=0,t={unknown:new c,0:new c};t.unknown.name=t[0].name=l||H();t.unknown.lines.push(new F(0,""));for(var e=0;e<q.length;++e){var w=q[e],d=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(w);if(d)switch(d[1]){case "line":if(d=/(\d+)(\s+\d+)?/.exec(d[2]))f=d[1]|0,d[2]&&(x=d[2]|0,x in t||(t[x]=new c));break;case "define":if(d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(d[2]))t[x].name=d[1]?b(d[2]):d[2]}t[x].lines.push(new F(f++,
w))}Q(t).forEach(function(d){var a=t[d];a.lines.forEach(function(d){a.index[d.number]=d})});return t}function u(c){var h=[];c.split("\n").forEach(function(c){if(!(5>c.length)){var l=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(c);l?h.push(new C(l[1]|0,l[2]|0,l[3].trim())):0<c.length&&h.push(new C("unknown",0,c))}});return h}function p(c,h){h.forEach(function(h){var l=c[h.file];if(l){var k=l.index[h.line];if(k){k.errors.push(h);l.hasErrors=!0;return}}c.unknown.hasErrors=!0;c.unknown.lines[0].errors.push(h)})}
function ba(c){c._commandRef=H()}function w(c,h){var l=U();ca(c+" in command "+(h||H())+("unknown"===l?"":" called from "+l))}function T(c,h,l,f){e(c,h)||w("invalid parameter type"+L(l)+". expected "+h+", got "+typeof c,f||H())}function v(c,h){return 32820===c||32819===c||33635===c?2:34042===c?4:t[c]*h}var Q=ga("./sorted-object-keys"),ia=ga("./is-typed-array");ga=ga("./extend");var h="gl canvas container attributes pixelRatio extensions optionalExtensions profile onDone".split(" "),t={};t[5120]=t[5121]=
1;t[5122]=t[5123]=t[36193]=t[33635]=t[32819]=t[32820]=2;t[5124]=t[5125]=t[5126]=t[34042]=4;Z.exports=ga(N,{optional:function(c){c()},raise:ca,commandRaise:w,command:function(c,h,l){c||w(h,l||H())},parameter:function(c,h,l){c in h||ca("unknown parameter ("+c+")"+L(l)+". possible values: "+Q(h).join())},commandParameter:function(c,h,l,f){c in h||w("unknown parameter ("+c+")"+L(l)+". possible values: "+Q(h).join(),f||H())},constructor:function(c){Q(c).forEach(function(c){0>h.indexOf(c)&&ca('invalid regl constructor argument "'+
c+'". must be one of '+h)})},type:function(c,h,l){e(c,h)||ca("invalid parameter type"+L(l)+". expected "+h+", got "+typeof c)},commandType:T,isTypedArray:function(c,h){ia(c)||ca("invalid parameter type"+L(h)+". must be a typed array")},nni:function(c,h){0<=c&&(c|0)===c||ca("invalid parameter type, ("+c+")"+L(h)+". must be a nonnegative integer")},oneOf:l,shaderError:function(c,h,l,f,x){if(!c.getShaderParameter(h,c.COMPILE_STATUS)){h=c.getShaderInfoLog(h);c=f===c.FRAGMENT_SHADER?"fragment":"vertex";
T(l,"string",c+" shader source must be a string",x);var t=y(l,x);l=u(h);p(t,l);Q(t).forEach(function(c){function h(d,c){l.push(d);a.push(c||"")}var d=t[c];if(d.hasErrors){var l=[""],a=[""];h("file number "+c+": "+d.name+"\n","color:red;text-decoration:underline;font-weight:bold");d.lines.forEach(function(a){if(0<a.errors.length){h(q(a.number,4)+"|  ","background-color:yellow; font-weight:bold");h(a.line+"\n","color:red; background-color:yellow; font-weight:bold");var d=0;a.errors.forEach(function(c){c=
c.message;var l=/^\s*'(.*)'\s*:\s*(.*)$/.exec(c);if(l){var f=l[1];c=l[2];switch(f){case "assign":f="="}d=Math.max(a.line.indexOf(f,d),0)}else d=0;h(q("| ",6));h(q("^^^",d+3)+"\n","font-weight:bold");h(q("| ",6));h(c+"\n","font-weight:bold")});h(q("| ",6)+"\n")}else h(q(a.number,4)+"|  "),h(a.line+"\n","color:red")});"undefined"===typeof document||window.chrome?console.log(l.join("")):(a[0]=l.join("%c"),console.log.apply(console,a))}});N.raise("Error compiling "+c+" shader, "+t[0].name)}},linkError:function(c,
h,l,f,q){c.getProgramParameter(h,c.LINK_STATUS)||(c=c.getProgramInfoLog(h),l=y(l,q),f='Error linking program with vertex shader, "'+y(f,q)[0].name+'", and fragment shader "'+l[0].name+'"',"undefined"!==typeof document?console.log("%c"+f+"\n%c"+c,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(f+"\n"+c),N.raise(f))},callSite:U,saveCommandRef:ba,saveDrawInfo:function(c,h,l,f){function q(c){return c?f.id(c):0}function t(c,d){Q(d).forEach(function(d){c[f.id(d)]=!0})}ba(c);
c._fragId=q(c["static"].frag);c._vertId=q(c["static"].vert);var e=c._uniformSet={};t(e,h["static"]);t(e,h.dynamic);h=c._attributeSet={};t(h,l["static"]);t(h,l.dynamic);c._hasCount="count"in c["static"]||"count"in c.dynamic||"elements"in c["static"]||"elements"in c.dynamic},framebufferFormat:function(c,h,q){c.texture?l(c.texture._texture.internalformat,h,"unsupported texture format for attachment"):l(c.renderbuffer._renderbuffer.format,q,"unsupported renderbuffer format for attachment")},guessCommand:H,
texture2D:function(c,h,l){var f=h.width,q=h.height,t=h.channels;N(0<f&&f<=l.maxTextureSize&&0<q&&q<=l.maxTextureSize,"invalid texture shape");33071===c.wrapS&&33071===c.wrapT||N(!(f&f-1)&&!!f&&!(q&q-1)&&!!q,"incompatible wrap mode for texture, both width and height must be power of 2");1===h.mipmask?1!==f&&1!==q&&N(9984!==c.minFilter&&9986!==c.minFilter&&9985!==c.minFilter&&9987!==c.minFilter,"min filter requires mipmap"):(N(!(f&f-1)&&!!f&&!(q&q-1)&&!!q,"texture must be a square power of 2 to support mipmapping"),
N(h.mipmask===(f<<1)-1,"missing or incomplete mipmap data"));5126===h.type&&(0>l.extensions.indexOf("oes_texture_float_linear")&&N(9728===c.minFilter&&9728===c.magFilter,"filter not supported, must enable oes_texture_float_linear"),N(!c.genMipmaps,"mipmap generation not supported with float textures"));var e=h.images;for(l=0;16>l;++l)if(e[l]){var w=f>>l,d=q>>l;N(h.mipmask&1<<l,"missing mipmap data");var G=e[l];N(G.width===w&&G.height===d,"invalid shape for mip images");N(G.format===h.format&&G.internalformat===
h.internalformat&&G.type===h.type,"incompatible type for mip image");!G.compressed&&G.data&&(w=Math.ceil(v(G.type,t)*w/G.unpackAlignment)*G.unpackAlignment,N(G.data.byteLength===w*d,"invalid data for image, buffer size is inconsistent with image format"))}else c.genMipmaps||N(0===(h.mipmask&1<<l),"extra mipmap data");h.compressed&&N(!c.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(c,h,l,f){var q=c.width,t=c.height,e=c.channels;N(0<q&&q<=f.maxTextureSize&&
0<t&&t<=f.maxTextureSize,"invalid texture shape");N(q===t,"cube map must be square");N(33071===h.wrapS&&33071===h.wrapT,"wrap mode not supported by cube map");for(f=0;f<l.length;++f){var w=l[f];N(w.width===q&&w.height===t,"inconsistent cube map face shape");h.genMipmaps&&(N(!w.compressed,"can not generate mipmap for compressed textures"),N(1===w.mipmask,"can not specify mipmaps and generate mipmaps"));for(var d=w.images,G=0;16>G;++G){var a=d[G];if(a){var b=q>>G,u=t>>G;N(w.mipmask&1<<G,"missing mipmap data");
N(a.width===b&&a.height===u,"invalid shape for mip images");N(a.format===c.format&&a.internalformat===c.internalformat&&a.type===c.type,"incompatible type for mip image");a.compressed||a.data&&N(a.data.byteLength===b*u*Math.max(v(a.type,e),a.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format")}}}}})},{"./extend":25,"./is-typed-array":30,"./sorted-object-keys":34}],22:[function(ga,Z,Ra){Z.exports="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:
function(){return+new Date}},{}],23:[function(ga,Z,Ra){function b(e){return Array.prototype.slice.call(e)}function ca(e){return b(e).join("")}var N=ga("./extend"),L=ga("./compiled-fns");Z.exports=function(){function e(){var l=[],q=[];return N(function(){l.push.apply(l,b(arguments))},{def:function(){var e="v"+c;c++;q.push(e);0<arguments.length&&(l.push(e,"="),l.push.apply(l,b(arguments)),l.push(";"));return e},toString:function(){return ca([0<q.length?"var "+q.join(",")+";":"",ca(l)])}})}function l(){function c(e,
b){q(e,b,"=",l.def(e,b),";")}var l=e(),q=e(),L=l.toString,C=q.toString;return N(function(){l.apply(l,b(arguments))},{def:l.def,entry:l,exit:q,save:c,set:function(q,e,b){c(q,e);l(q,e,"=",b,";")},toString:function(){return L()+C()}})}var q=0,c=0,F={},C=e(),H={};return{global:C,link:function(c){var l="$"+q,e=!1;"object"===typeof c&&c.name&&(l=c.name.replace(/ /g,"_"),e=!0);if(l in F)return l;F[l]=c;e||q++;return l},block:e,proc:function(c,q){function e(){var c="a"+b.length;b.push(c);return c}var b=[];
q=q||0;for(var L=0;L<q;++L)e();var L=l(),w=L.toString;return H[c]=N(L,{arg:e,toString:function(){return ca(["function(",b.join(),"){",w(),"}"])}})},scope:l,cond:function(){var c=ca(arguments),q=l(),e=l(),L=q.toString,C=e.toString;return N(q,{then:function(){q.apply(q,b(arguments));return this},"else":function(){e.apply(e,b(arguments));return this},toString:function(){var l=C();l&&(l="else{"+l+"}");return ca(["if(",c,"){",L(),"}",l])}})},compile:function(){var c=[],l=[];Object.keys(F).sort(function(c,
l){var q="$"===c.charAt(0),e="$"===l.charAt(0);return q||e?q&&e?+c.slice(1)<+l.slice(1)?-1:1:q&&!e?-1:1:c.localeCompare(l)}).forEach(function(q){var e=F[q];c.push(q);l.push(e)});for(var q=0,e=c.length-1;-1<e;e--)if("$"===c[e].charAt(0)){q=e;break}var b=['"use strict";',C,"return {"];Object.keys(H).forEach(function(c){b.push('"',c,'":',H[c].toString(),",")});b.push("}");var e=ca(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"),q=c.slice(q).join(),w=L[q];if(!w)throw console.log("src code is:"),
console.log(e),console.log("compiled values:",l),console.log("linked names:",c),console.log("Keys available:",Object.keys(L)),console.log("Key:",q),console.log('"'+q+'": function('+c.join(", ")+") \n{\n"+e+"\n},"),Error("missing precompiled function with key: "+q);return w.apply(null,l)}}}},{"./compiled-fns":24,"./extend":25}],24:[function(ga,Z,Ra){Z.exports={$0:function(b){var ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E;ca=b.attributes;N=b.current;L=b.framebuffer;e=b.gl;l=b.next;
q=b.vao;c=l.blend_color;F=N.blend_color;C=l.blend_equation;H=N.blend_equation;U=l.blend_func;y=N.blend_func;u=l.colorMask;p=N.colorMask;ba=l.depth_range;w=N.depth_range;T=l.polygonOffset_offset;v=N.polygonOffset_offset;Q=l.sample_coverage;ia=N.sample_coverage;h=l.scissor_box;t=N.scissor_box;S=l.stencil_func;k=N.stencil_func;X=l.stencil_opBack;f=N.stencil_opBack;x=l.stencil_opFront;Y=N.stencil_opFront;D=l.viewport;E=N.viewport;return{poll:function(){var d,q,a,b,A,ca,Dc,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,
O,ma;N.dirty=!1;q=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;ca=l.polygonOffset_enable;Dc=l.sample_alpha;V=l.sample_enable;ea=l.scissor_enable;R=l.stencil_enable;P=l.cull_face;B=N.cull_face;g=l.depth_func;M=N.depth_func;K=l.depth_mask;Da=N.depth_mask;qa=l.frontFace;m=N.frontFace;J=l.lineWidth;aa=N.lineWidth;O=l.stencil_mask;ma=N.stencil_mask;d=L.next;d!==L.cur&&(d?e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null),L.cur=d);q!==N.blend_enable&&(q?e.enable(3042):e.disable(3042),
N.blend_enable=q);a!==N.cull_enable&&(a?e.enable(2884):e.disable(2884),N.cull_enable=a);b!==N.depth_enable&&(b?e.enable(2929):e.disable(2929),N.depth_enable=b);A!==N.dither&&(A?e.enable(3024):e.disable(3024),N.dither=A);ca!==N.polygonOffset_enable&&(ca?e.enable(32823):e.disable(32823),N.polygonOffset_enable=ca);Dc!==N.sample_alpha&&(Dc?e.enable(32926):e.disable(32926),N.sample_alpha=Dc);V!==N.sample_enable&&(V?e.enable(32928):e.disable(32928),N.sample_enable=V);ea!==N.scissor_enable&&(ea?e.enable(3089):
e.disable(3089),N.scissor_enable=ea);R!==N.stencil_enable&&(R?e.enable(2960):e.disable(2960),N.stencil_enable=R);if(c[0]!==F[0]||c[1]!==F[1]||c[2]!==F[2]||c[3]!==F[3])e.blendColor(c[0],c[1],c[2],c[3]),F[0]=c[0],F[1]=c[1],F[2]=c[2],F[3]=c[3];if(C[0]!==H[0]||C[1]!==H[1])e.blendEquationSeparate(C[0],C[1]),H[0]=C[0],H[1]=C[1];if(U[0]!==y[0]||U[1]!==y[1]||U[2]!==y[2]||U[3]!==y[3])e.blendFuncSeparate(U[0],U[1],U[2],U[3]),y[0]=U[0],y[1]=U[1],y[2]=U[2],y[3]=U[3];if(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||
u[3]!==p[3])e.colorMask(u[0],u[1],u[2],u[3]),p[0]=u[0],p[1]=u[1],p[2]=u[2],p[3]=u[3];P!==B&&(e.cullFace(P),N.cull_face=P);g!==M&&(e.depthFunc(g),N.depth_func=g);K!==Da&&(e.depthMask(K),N.depth_mask=K);if(ba[0]!==w[0]||ba[1]!==w[1])e.depthRange(ba[0],ba[1]),w[0]=ba[0],w[1]=ba[1];qa!==m&&(e.frontFace(qa),N.frontFace=qa);J!==aa&&(e.lineWidth(J),N.lineWidth=J);if(T[0]!==v[0]||T[1]!==v[1])e.polygonOffset(T[0],T[1]),v[0]=T[0],v[1]=T[1];if(Q[0]!==ia[0]||Q[1]!==ia[1])e.sampleCoverage(Q[0],Q[1]),ia[0]=Q[0],
ia[1]=Q[1];if(h[0]!==t[0]||h[1]!==t[1]||h[2]!==t[2]||h[3]!==t[3])e.scissor(h[0],h[1],h[2],h[3]),t[0]=h[0],t[1]=h[1],t[2]=h[2],t[3]=h[3];if(S[0]!==k[0]||S[1]!==k[1]||S[2]!==k[2])e.stencilFunc(S[0],S[1],S[2]),k[0]=S[0],k[1]=S[1],k[2]=S[2];O!==ma&&(e.stencilMask(O),N.stencil_mask=O);if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2]||X[3]!==f[3])e.stencilOpSeparate(X[0],X[1],X[2],X[3]),f[0]=X[0],f[1]=X[1],f[2]=X[2],f[3]=X[3];if(x[0]!==Y[0]||x[1]!==Y[1]||x[2]!==Y[2]||x[3]!==Y[3])e.stencilOpSeparate(x[0],x[1],x[2],
x[3]),Y[0]=x[0],Y[1]=x[1],Y[2]=x[2],Y[3]=x[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])e.viewport(D[0],D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3]},refresh:function(){var d,G,a,b,A,ja,Dc,V,ea,R,P,B,g,M,K,Da;N.dirty=!1;G=l.blend_enable;a=l.cull_enable;b=l.depth_enable;A=l.dither;ja=l.polygonOffset_enable;Dc=l.sample_alpha;V=l.sample_enable;ea=l.scissor_enable;R=l.stencil_enable;P=l.cull_face;B=l.depth_func;g=l.depth_mask;M=l.frontFace;K=l.lineWidth;Da=l.stencil_mask;(d=L.next)?
e.bindFramebuffer(36160,d.framebuffer):e.bindFramebuffer(36160,null);L.cur=d;d=ca[0];d.buffer?(e.enableVertexAttribArray(0),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(0,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(0),e.vertexAttrib4f(0,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[1];d.buffer?(e.enableVertexAttribArray(1),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(1,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(1),e.vertexAttrib4f(1,
d.x,d.y,d.z,d.w),d.buffer=null);d=ca[2];d.buffer?(e.enableVertexAttribArray(2),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(2,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(2),e.vertexAttrib4f(2,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[3];d.buffer?(e.enableVertexAttribArray(3),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(3,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(3),e.vertexAttrib4f(3,d.x,d.y,d.z,d.w),d.buffer=null);
d=ca[4];d.buffer?(e.enableVertexAttribArray(4),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(4,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(4),e.vertexAttrib4f(4,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[5];d.buffer?(e.enableVertexAttribArray(5),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(5,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(5),e.vertexAttrib4f(5,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[6];d.buffer?(e.enableVertexAttribArray(6),
e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(6,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(6),e.vertexAttrib4f(6,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[7];d.buffer?(e.enableVertexAttribArray(7),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(7,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(7),e.vertexAttrib4f(7,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[8];d.buffer?(e.enableVertexAttribArray(8),e.bindBuffer(34962,d.buffer.buffer),
e.vertexAttribPointer(8,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(8),e.vertexAttrib4f(8,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[9];d.buffer?(e.enableVertexAttribArray(9),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(9,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(9),e.vertexAttrib4f(9,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[10];d.buffer?(e.enableVertexAttribArray(10),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(10,d.size,
d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(10),e.vertexAttrib4f(10,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[11];d.buffer?(e.enableVertexAttribArray(11),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(11,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(11),e.vertexAttrib4f(11,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[12];d.buffer?(e.enableVertexAttribArray(12),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(12,d.size,d.type,d.normalized,
d.stride,d.offset)):(e.disableVertexAttribArray(12),e.vertexAttrib4f(12,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[13];d.buffer?(e.enableVertexAttribArray(13),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(13,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(13),e.vertexAttrib4f(13,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[14];d.buffer?(e.enableVertexAttribArray(14),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(14,d.size,d.type,d.normalized,d.stride,d.offset)):
(e.disableVertexAttribArray(14),e.vertexAttrib4f(14,d.x,d.y,d.z,d.w),d.buffer=null);d=ca[15];d.buffer?(e.enableVertexAttribArray(15),e.bindBuffer(34962,d.buffer.buffer),e.vertexAttribPointer(15,d.size,d.type,d.normalized,d.stride,d.offset)):(e.disableVertexAttribArray(15),e.vertexAttrib4f(15,d.x,d.y,d.z,d.w),d.buffer=null);q.currentVAO=null;q.setVAO(q.targetVAO);G?e.enable(3042):e.disable(3042);N.blend_enable=G;a?e.enable(2884):e.disable(2884);N.cull_enable=a;b?e.enable(2929):e.disable(2929);N.depth_enable=
b;A?e.enable(3024):e.disable(3024);N.dither=A;ja?e.enable(32823):e.disable(32823);N.polygonOffset_enable=ja;Dc?e.enable(32926):e.disable(32926);N.sample_alpha=Dc;V?e.enable(32928):e.disable(32928);N.sample_enable=V;ea?e.enable(3089):e.disable(3089);N.scissor_enable=ea;R?e.enable(2960):e.disable(2960);N.stencil_enable=R;e.blendColor(c[0],c[1],c[2],c[3]);F[0]=c[0];F[1]=c[1];F[2]=c[2];F[3]=c[3];e.blendEquationSeparate(C[0],C[1]);H[0]=C[0];H[1]=C[1];e.blendFuncSeparate(U[0],U[1],U[2],U[3]);y[0]=U[0];
y[1]=U[1];y[2]=U[2];y[3]=U[3];e.colorMask(u[0],u[1],u[2],u[3]);p[0]=u[0];p[1]=u[1];p[2]=u[2];p[3]=u[3];e.cullFace(P);N.cull_face=P;e.depthFunc(B);N.depth_func=B;e.depthMask(g);N.depth_mask=g;e.depthRange(ba[0],ba[1]);w[0]=ba[0];w[1]=ba[1];e.frontFace(M);N.frontFace=M;e.lineWidth(K);N.lineWidth=K;e.polygonOffset(T[0],T[1]);v[0]=T[0];v[1]=T[1];e.sampleCoverage(Q[0],Q[1]);ia[0]=Q[0];ia[1]=Q[1];e.scissor(h[0],h[1],h[2],h[3]);t[0]=h[0];t[1]=h[1];t[2]=h[2];t[3]=h[3];e.stencilFunc(S[0],S[1],S[2]);k[0]=S[0];
k[1]=S[1];k[2]=S[2];e.stencilMask(Da);N.stencil_mask=Da;e.stencilOpSeparate(X[0],X[1],X[2],X[3]);f[0]=X[0];f[1]=X[1];f[2]=X[2];f[3]=X[3];e.stencilOpSeparate(x[0],x[1],x[2],x[3]);Y[0]=x[0];Y[1]=x[1];Y[2]=x[2];Y[3]=x[3];e.viewport(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=D[1];E[2]=D[2];E[3]=D[3]}}},$3:function(b,ca,N,L){var e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja;e=b.context;l=b.current;q=b.framebuffer;c=b.gl;F=b.next;C=b.shader;H=b.vao;U=F.blend_color;y=l.blend_color;u=F.blend_equation;
p=l.blend_equation;ba=F.blend_func;w=l.blend_func;T=F.colorMask;v=l.colorMask;Q=F.depth_range;ia=l.depth_range;h=F.polygonOffset_offset;t=l.polygonOffset_offset;S=F.sample_coverage;k=l.sample_coverage;X=F.scissor_box;f=l.scissor_box;x=F.stencil_func;Y=l.stencil_func;D=F.stencil_opBack;E=l.stencil_opBack;d=F.stencil_opFront;G=l.stencil_opFront;a=F.viewport;ta=l.viewport;A={};ja={};return{batch:function(e,b){var A,R,P,B,g;A=q.next;A!==q.cur&&(A?c.bindFramebuffer(36160,A.framebuffer):c.bindFramebuffer(36160,
null),q.cur=A);if(l.dirty){A=F.dither;A!==l.dither&&(A?c.enable(3024):c.disable(3024),l.dither=A);A=F.blend_enable;A!==l.blend_enable&&(A?c.enable(3042):c.disable(3042),l.blend_enable=A);A=U[0];P=U[1];B=U[2];g=U[3];if(A!==y[0]||P!==y[1]||B!==y[2]||g!==y[3])c.blendColor(A,P,B,g),y[0]=A,y[1]=P,y[2]=B,y[3]=g;A=u[0];P=u[1];if(A!==p[0]||P!==p[1])c.blendEquationSeparate(A,P),p[0]=A,p[1]=P;A=ba[0];P=ba[1];B=ba[2];g=ba[3];if(A!==w[0]||P!==w[1]||B!==w[2]||g!==w[3])c.blendFuncSeparate(A,P,B,g),w[0]=A,w[1]=
P,w[2]=B,w[3]=g;A=F.depth_enable;A!==l.depth_enable&&(A?c.enable(2929):c.disable(2929),l.depth_enable=A);A=F.depth_func;A!==l.depth_func&&(c.depthFunc(A),l.depth_func=A);A=Q[0];P=Q[1];if(A!==ia[0]||P!==ia[1])c.depthRange(A,P),ia[0]=A,ia[1]=P;A=F.depth_mask;A!==l.depth_mask&&(c.depthMask(A),l.depth_mask=A);A=T[0];P=T[1];B=T[2];g=T[3];if(A!==v[0]||P!==v[1]||B!==v[2]||g!==v[3])c.colorMask(A,P,B,g),v[0]=A,v[1]=P,v[2]=B,v[3]=g;A=F.cull_enable;A!==l.cull_enable&&(A?c.enable(2884):c.disable(2884),l.cull_enable=
A);A=F.cull_face;A!==l.cull_face&&(c.cullFace(A),l.cull_face=A);A=F.frontFace;A!==l.frontFace&&(c.frontFace(A),l.frontFace=A);A=F.lineWidth;A!==l.lineWidth&&(c.lineWidth(A),l.lineWidth=A);A=F.polygonOffset_enable;A!==l.polygonOffset_enable&&(A?c.enable(32823):c.disable(32823),l.polygonOffset_enable=A);A=h[0];P=h[1];if(A!==t[0]||P!==t[1])c.polygonOffset(A,P),t[0]=A,t[1]=P;A=F.sample_alpha;A!==l.sample_alpha&&(A?c.enable(32926):c.disable(32926),l.sample_alpha=A);A=F.sample_enable;A!==l.sample_enable&&
(A?c.enable(32928):c.disable(32928),l.sample_enable=A);A=S[0];P=S[1];if(A!==k[0]||P!==k[1])c.sampleCoverage(A,P),k[0]=A,k[1]=P;A=F.stencil_enable;A!==l.stencil_enable&&(A?c.enable(2960):c.disable(2960),l.stencil_enable=A);A=F.stencil_mask;A!==l.stencil_mask&&(c.stencilMask(A),l.stencil_mask=A);A=x[0];P=x[1];B=x[2];if(A!==Y[0]||P!==Y[1]||B!==Y[2])c.stencilFunc(A,P,B),Y[0]=A,Y[1]=P,Y[2]=B;A=d[0];P=d[1];B=d[2];g=d[3];if(A!==G[0]||P!==G[1]||B!==G[2]||g!==G[3])c.stencilOpSeparate(A,P,B,g),G[0]=A,G[1]=
P,G[2]=B,G[3]=g;A=D[0];P=D[1];B=D[2];g=D[3];if(A!==E[0]||P!==E[1]||B!==E[2]||g!==E[3])c.stencilOpSeparate(A,P,B,g),E[0]=A,E[1]=P,E[2]=B,E[3]=g;A=F.scissor_enable;A!==l.scissor_enable&&(A?c.enable(3089):c.disable(3089),l.scissor_enable=A);A=X[0];P=X[1];B=X[2];g=X[3];if(A!==f[0]||P!==f[1]||B!==f[2]||g!==f[3])c.scissor(A,P,B,g),f[0]=A,f[1]=P,f[2]=B,f[3]=g;A=a[0];P=a[1];B=a[2];g=a[3];if(A!==ta[0]||P!==ta[1]||B!==ta[2]||g!==ta[3])c.viewport(A,P,B,g),ta[0]=A,ta[1]=P,ta[2]=B,ta[3]=g;l.dirty=!1}if(A=l.profile)R=
performance.now(),ca.count+=b;P=C.program(C.vert,C.frag);c.useProgram(P.program);H.setVAO(null);B=P.id;(g=ja[B])||(g=ja[B]=L(P));g.call(this,e,b);H.setVAO(null);A&&(ca.cpuTime+=performance.now()-R)},draw:function(e){var b,L,R,P,B;b=q.next;b!==q.cur&&(b?c.bindFramebuffer(36160,b.framebuffer):c.bindFramebuffer(36160,null),q.cur=b);if(l.dirty){b=F.dither;b!==l.dither&&(b?c.enable(3024):c.disable(3024),l.dither=b);b=F.blend_enable;b!==l.blend_enable&&(b?c.enable(3042):c.disable(3042),l.blend_enable=b);
b=U[0];R=U[1];P=U[2];B=U[3];if(b!==y[0]||R!==y[1]||P!==y[2]||B!==y[3])c.blendColor(b,R,P,B),y[0]=b,y[1]=R,y[2]=P,y[3]=B;b=u[0];R=u[1];if(b!==p[0]||R!==p[1])c.blendEquationSeparate(b,R),p[0]=b,p[1]=R;b=ba[0];R=ba[1];P=ba[2];B=ba[3];if(b!==w[0]||R!==w[1]||P!==w[2]||B!==w[3])c.blendFuncSeparate(b,R,P,B),w[0]=b,w[1]=R,w[2]=P,w[3]=B;b=F.depth_enable;b!==l.depth_enable&&(b?c.enable(2929):c.disable(2929),l.depth_enable=b);b=F.depth_func;b!==l.depth_func&&(c.depthFunc(b),l.depth_func=b);b=Q[0];R=Q[1];if(b!==
ia[0]||R!==ia[1])c.depthRange(b,R),ia[0]=b,ia[1]=R;b=F.depth_mask;b!==l.depth_mask&&(c.depthMask(b),l.depth_mask=b);b=T[0];R=T[1];P=T[2];B=T[3];if(b!==v[0]||R!==v[1]||P!==v[2]||B!==v[3])c.colorMask(b,R,P,B),v[0]=b,v[1]=R,v[2]=P,v[3]=B;b=F.cull_enable;b!==l.cull_enable&&(b?c.enable(2884):c.disable(2884),l.cull_enable=b);b=F.cull_face;b!==l.cull_face&&(c.cullFace(b),l.cull_face=b);b=F.frontFace;b!==l.frontFace&&(c.frontFace(b),l.frontFace=b);b=F.lineWidth;b!==l.lineWidth&&(c.lineWidth(b),l.lineWidth=
b);b=F.polygonOffset_enable;b!==l.polygonOffset_enable&&(b?c.enable(32823):c.disable(32823),l.polygonOffset_enable=b);b=h[0];R=h[1];if(b!==t[0]||R!==t[1])c.polygonOffset(b,R),t[0]=b,t[1]=R;b=F.sample_alpha;b!==l.sample_alpha&&(b?c.enable(32926):c.disable(32926),l.sample_alpha=b);b=F.sample_enable;b!==l.sample_enable&&(b?c.enable(32928):c.disable(32928),l.sample_enable=b);b=S[0];R=S[1];if(b!==k[0]||R!==k[1])c.sampleCoverage(b,R),k[0]=b,k[1]=R;b=F.stencil_enable;b!==l.stencil_enable&&(b?c.enable(2960):
c.disable(2960),l.stencil_enable=b);b=F.stencil_mask;b!==l.stencil_mask&&(c.stencilMask(b),l.stencil_mask=b);b=x[0];R=x[1];P=x[2];if(b!==Y[0]||R!==Y[1]||P!==Y[2])c.stencilFunc(b,R,P),Y[0]=b,Y[1]=R,Y[2]=P;b=d[0];R=d[1];P=d[2];B=d[3];if(b!==G[0]||R!==G[1]||P!==G[2]||B!==G[3])c.stencilOpSeparate(b,R,P,B),G[0]=b,G[1]=R,G[2]=P,G[3]=B;b=D[0];R=D[1];P=D[2];B=D[3];if(b!==E[0]||R!==E[1]||P!==E[2]||B!==E[3])c.stencilOpSeparate(b,R,P,B),E[0]=b,E[1]=R,E[2]=P,E[3]=B;b=F.scissor_enable;b!==l.scissor_enable&&(b?
c.enable(3089):c.disable(3089),l.scissor_enable=b);b=X[0];R=X[1];P=X[2];B=X[3];if(b!==f[0]||R!==f[1]||P!==f[2]||B!==f[3])c.scissor(b,R,P,B),f[0]=b,f[1]=R,f[2]=P,f[3]=B;b=a[0];R=a[1];P=a[2];B=a[3];if(b!==ta[0]||R!==ta[1]||P!==ta[2]||B!==ta[3])c.viewport(b,R,P,B),ta[0]=b,ta[1]=R,ta[2]=P,ta[3]=B;l.dirty=!1}if(b=l.profile)L=performance.now(),ca.count++;R=C.program(C.vert,C.frag);c.useProgram(R.program);H.setVAO(null);P=R.id;(B=A[P])||(B=A[P]=N(R));B.call(this,e);H.setVAO(null);b&&(ca.cpuTime+=performance.now()-
L)},scope:function(a,d,c){var h,f;if(h=l.profile)f=performance.now(),ca.count++;d(e,a,c);h&&(ca.cpuTime+=performance.now()-f)}}},"$38,colors,contextColor,dim0A,dim0B,dim0C,dim0D,dim1A,dim1B,dim1C,dim1D,drwLayer,hiA,hiB,hiC,hiD,loA,loB,loC,loD,maskHeight,maskTexture,p01_04,p05_08,p09_12,p13_16,p17_20,p21_24,p25_28,p29_32,p33_36,p37_40,p41_44,p45_48,p49_52,p53_56,p57_60,palette,resolution,viewBoxPos,viewBoxSize":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,
Dc,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,xd,Hb,ha,I,sa,Ba,ra,wa,Ea){var la,W,ua,Fa,Ia,mb,da,zd,$b,Ga,ac,Sb,ga,Fd,yd,Vd,xe,Ad,Nd,oe,fe,Dd,be,ge,ae,Be,Ze,$e,Gd,ye,se,Zd,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa;la=b.attributes;W=b.context;ua=b.current;Fa=b.draw;Ia=b.elements;mb=b.framebuffer;da=b.gl;zd=b.next;$b=b.shader;Ga=b.uniforms;ac=b.vao;Sb=zd.blend_color;ga=ua.blend_color;Fd=zd.blend_equation;
yd=ua.blend_equation;Vd=zd.blend_func;xe=ua.blend_func;Ad=zd.colorMask;Nd=ua.colorMask;oe=zd.depth_range;fe=ua.depth_range;Dd=zd.polygonOffset_offset;be=ua.polygonOffset_offset;ge=zd.sample_coverage;ae=ua.sample_coverage;Be=zd.scissor_box;Ze=ua.scissor_box;$e=zd.stencil_func;Gd=ua.stencil_func;ye=zd.stencil_opBack;se=ua.stencil_opBack;Zd=zd.stencil_opFront;Wd=ua.stencil_opFront;Bd=zd.viewport;ld=ua.viewport;$c={};rd={};Lc=new Float32Array(16);od=new Float32Array(16);Gc=new Float32Array(16);ed=new Float32Array(16);
Oc=new Float32Array(16);jd=new Float32Array(16);Bb=new Float32Array(16);Fb=new Float32Array(16);tc=new Float32Array(16);xb=new Float32Array(16);xc=new Float32Array(16);Cb=new Float32Array(16);Jc=new Float32Array(16);lc=new Float32Array(16);Hc=new Float32Array(16);Vc=new Float32Array(16);Uc=new Float32Array(16);Ec=new Float32Array(16);ec=new Float32Array(16);Ic=new Float32Array(16);oc=new Float32Array(16);pc=new Float32Array(16);mc=new Float32Array(16);fc=new Float32Array(16);Va=new Float32Array(16);
uc=new Float32Array(16);yb=new Float32Array(16);db=new Float32Array(16);Nb=new Float32Array(16);bb=new Float32Array(16);ob=new Float32Array(16);Wa=new Float32Array(16);return{batch:function(a,d){var h,f,k,G;h=mb.next;h!==mb.cur&&(h?da.bindFramebuffer(36160,h.framebuffer):da.bindFramebuffer(36160,null),mb.cur=h);if(ua.dirty){var b,t,x,A,D,E,S,Q,N,ca,X,ia,Ga,ta,ja,Y,Sb,$b,La,Fb,Oc,Bb,Cb,Oa,Be;b=Ad[0];t=Ad[1];x=Ad[2];A=Ad[3];if(b!==Nd[0]||t!==Nd[1]||x!==Nd[2]||A!==Nd[3])da.colorMask(b,t,x,A),Nd[0]=b,
Nd[1]=t,Nd[2]=x,Nd[3]=A;D=zd.frontFace;D!==ua.frontFace&&(da.frontFace(D),ua.frontFace=D);E=zd.polygonOffset_enable;E!==ua.polygonOffset_enable&&(E?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=E);S=Dd[0];Q=Dd[1];if(S!==be[0]||Q!==be[1])da.polygonOffset(S,Q),be[0]=S,be[1]=Q;N=zd.sample_alpha;N!==ua.sample_alpha&&(N?da.enable(32926):da.disable(32926),ua.sample_alpha=N);ca=zd.sample_enable;ca!==ua.sample_enable&&(ca?da.enable(32928):da.disable(32928),ua.sample_enable=ca);X=ge[0];ia=ge[1];
if(X!==ae[0]||ia!==ae[1])da.sampleCoverage(X,ia),ae[0]=X,ae[1]=ia;Ga=zd.stencil_enable;Ga!==ua.stencil_enable&&(Ga?da.enable(2960):da.disable(2960),ua.stencil_enable=Ga);ta=zd.stencil_mask;ta!==ua.stencil_mask&&(da.stencilMask(ta),ua.stencil_mask=ta);ja=$e[0];Y=$e[1];Sb=$e[2];if(ja!==Gd[0]||Y!==Gd[1]||Sb!==Gd[2])da.stencilFunc(ja,Y,Sb),Gd[0]=ja,Gd[1]=Y,Gd[2]=Sb;$b=Zd[0];La=Zd[1];Fb=Zd[2];Oc=Zd[3];if($b!==Wd[0]||La!==Wd[1]||Fb!==Wd[2]||Oc!==Wd[3])da.stencilOpSeparate($b,La,Fb,Oc),Wd[0]=$b,Wd[1]=La,
Wd[2]=Fb,Wd[3]=Oc;Bb=ye[0];Cb=ye[1];Oa=ye[2];Be=ye[3];if(Bb!==se[0]||Cb!==se[1]||Oa!==se[2]||Be!==se[3])da.stencilOpSeparate(Bb,Cb,Oa,Be),se[0]=Bb,se[1]=Cb,se[2]=Oa,se[3]=Be}da.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);yd[0]=32774;yd[1]=32774;da.blendFuncSeparate(770,771,1,1);xe[0]=770;xe[1]=771;xe[2]=1;xe[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;
da.depthFunc(513);ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);fe[0]=0;fe[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;da.enable(3089);ua.scissor_enable=!0;f=ua.profile;ua.profile=!1;da.useProgram(Dc.program);var Qa,xb,jd,Ma,lc,$a,Gc,Vd,lb,Na,tc,Pa,ub,vb,Sa,nb,od,Fd,Hc,cb,Jc,ed,Ya,Lc,Ab,ab,oe,xc,Wb,Qb,Bd,Rb,Vc;ac.setVAO(null);Qa=ya.location;xb=la[Qa];xb.buffer||da.enableVertexAttribArray(Qa);if(xb.type!==L.dtype||4!==xb.size||xb.buffer!==L||!1!==xb.normalized||
0!==xb.offset||0!==xb.stride)da.bindBuffer(34962,L.buffer),da.vertexAttribPointer(Qa,4,L.dtype,!1,0,0),xb.type=L.dtype,xb.size=4,xb.buffer=L,xb.normalized=!1,xb.offset=0,xb.stride=0;jd=Ja.location;Ma=la[jd];Ma.buffer||da.enableVertexAttribArray(jd);if(Ma.type!==e.dtype||4!==Ma.size||Ma.buffer!==e||!1!==Ma.normalized||0!==Ma.offset||0!==Ma.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(jd,4,e.dtype,!1,0,0),Ma.type=e.dtype,Ma.size=4,Ma.buffer=e,Ma.normalized=!1,Ma.offset=0,Ma.stride=0;
lc=na.location;$a=la[lc];$a.buffer||da.enableVertexAttribArray(lc);if($a.type!==l.dtype||4!==$a.size||$a.buffer!==l||!1!==$a.normalized||0!==$a.offset||0!==$a.stride)da.bindBuffer(34962,l.buffer),da.vertexAttribPointer(lc,4,l.dtype,!1,0,0),$a.type=l.dtype,$a.size=4,$a.buffer=l,$a.normalized=!1,$a.offset=0,$a.stride=0;Gc=Za.location;Vd=la[Gc];Vd.buffer||da.enableVertexAttribArray(Gc);if(Vd.type!==q.dtype||4!==Vd.size||Vd.buffer!==q||!1!==Vd.normalized||0!==Vd.offset||0!==Vd.stride)da.bindBuffer(34962,
q.buffer),da.vertexAttribPointer(Gc,4,q.dtype,!1,0,0),Vd.type=q.dtype,Vd.size=4,Vd.buffer=q,Vd.normalized=!1,Vd.offset=0,Vd.stride=0;lb=Ta.location;Na=la[lb];Na.buffer||da.enableVertexAttribArray(lb);if(Na.type!==c.dtype||4!==Na.size||Na.buffer!==c||!1!==Na.normalized||0!==Na.offset||0!==Na.stride)da.bindBuffer(34962,c.buffer),da.vertexAttribPointer(lb,4,c.dtype,!1,0,0),Na.type=c.dtype,Na.size=4,Na.buffer=c,Na.normalized=!1,Na.offset=0,Na.stride=0;tc=r.location;Pa=la[tc];Pa.buffer||da.enableVertexAttribArray(tc);
if(Pa.type!==F.dtype||4!==Pa.size||Pa.buffer!==F||!1!==Pa.normalized||0!==Pa.offset||0!==Pa.stride)da.bindBuffer(34962,F.buffer),da.vertexAttribPointer(tc,4,F.dtype,!1,0,0),Pa.type=F.dtype,Pa.size=4,Pa.buffer=F,Pa.normalized=!1,Pa.offset=0,Pa.stride=0;ub=n.location;vb=la[ub];vb.buffer||da.enableVertexAttribArray(ub);if(vb.type!==C.dtype||4!==vb.size||vb.buffer!==C||!1!==vb.normalized||0!==vb.offset||0!==vb.stride)da.bindBuffer(34962,C.buffer),da.vertexAttribPointer(ub,4,C.dtype,!1,0,0),vb.type=C.dtype,
vb.size=4,vb.buffer=C,vb.normalized=!1,vb.offset=0,vb.stride=0;Sa=z.location;nb=la[Sa];nb.buffer||da.enableVertexAttribArray(Sa);if(nb.type!==H.dtype||4!==nb.size||nb.buffer!==H||!1!==nb.normalized||0!==nb.offset||0!==nb.stride)da.bindBuffer(34962,H.buffer),da.vertexAttribPointer(Sa,4,H.dtype,!1,0,0),nb.type=H.dtype,nb.size=4,nb.buffer=H,nb.normalized=!1,nb.offset=0,nb.stride=0;od=va.location;Fd=la[od];Fd.buffer||da.enableVertexAttribArray(od);if(Fd.type!==U.dtype||4!==Fd.size||Fd.buffer!==U||!1!==
Fd.normalized||0!==Fd.offset||0!==Fd.stride)da.bindBuffer(34962,U.buffer),da.vertexAttribPointer(od,4,U.dtype,!1,0,0),Fd.type=U.dtype,Fd.size=4,Fd.buffer=U,Fd.normalized=!1,Fd.offset=0,Fd.stride=0;Hc=Ca.location;cb=la[Hc];cb.buffer||da.enableVertexAttribArray(Hc);if(cb.type!==y.dtype||4!==cb.size||cb.buffer!==y||!1!==cb.normalized||0!==cb.offset||0!==cb.stride)da.bindBuffer(34962,y.buffer),da.vertexAttribPointer(Hc,4,y.dtype,!1,0,0),cb.type=y.dtype,cb.size=4,cb.buffer=y,cb.normalized=!1,cb.offset=
0,cb.stride=0;Jc=xd.location;ed=la[Jc];ed.buffer||da.enableVertexAttribArray(Jc);if(ed.type!==u.dtype||4!==ed.size||ed.buffer!==u||!1!==ed.normalized||0!==ed.offset||0!==ed.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(Jc,4,u.dtype,!1,0,0),ed.type=u.dtype,ed.size=4,ed.buffer=u,ed.normalized=!1,ed.offset=0,ed.stride=0;Ya=Hb.location;Lc=la[Ya];Lc.buffer||da.enableVertexAttribArray(Ya);if(Lc.type!==p.dtype||4!==Lc.size||Lc.buffer!==p||!1!==Lc.normalized||0!==Lc.offset||0!==Lc.stride)da.bindBuffer(34962,
p.buffer),da.vertexAttribPointer(Ya,4,p.dtype,!1,0,0),Lc.type=p.dtype,Lc.size=4,Lc.buffer=p,Lc.normalized=!1,Lc.offset=0,Lc.stride=0;Ab=ha.location;ab=la[Ab];ab.buffer||da.enableVertexAttribArray(Ab);if(ab.type!==ba.dtype||4!==ab.size||ab.buffer!==ba||!1!==ab.normalized||0!==ab.offset||0!==ab.stride)da.bindBuffer(34962,ba.buffer),da.vertexAttribPointer(Ab,4,ba.dtype,!1,0,0),ab.type=ba.dtype,ab.size=4,ab.buffer=ba,ab.normalized=!1,ab.offset=0,ab.stride=0;oe=I.location;xc=la[oe];xc.buffer||da.enableVertexAttribArray(oe);
if(xc.type!==w.dtype||4!==xc.size||xc.buffer!==w||!1!==xc.normalized||0!==xc.offset||0!==xc.stride)da.bindBuffer(34962,w.buffer),da.vertexAttribPointer(oe,4,w.dtype,!1,0,0),xc.type=w.dtype,xc.size=4,xc.buffer=w,xc.normalized=!1,xc.offset=0,xc.stride=0;Wb=sa.location;Qb=la[Wb];Qb.buffer||da.enableVertexAttribArray(Wb);if(Qb.type!==T.dtype||4!==Qb.size||Qb.buffer!==T||!1!==Qb.normalized||0!==Qb.offset||0!==Qb.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(Wb,4,T.dtype,!1,0,0),Qb.type=T.dtype,
Qb.size=4,Qb.buffer=T,Qb.normalized=!1,Qb.offset=0,Qb.stride=0;Bd=ea.location;Rb=la[Bd];Rb.buffer||da.enableVertexAttribArray(Bd);if(Rb.type!==v.dtype||4!==Rb.size||Rb.buffer!==v||!1!==Rb.normalized||0!==Rb.offset||0!==Rb.stride)da.bindBuffer(34962,v.buffer),da.vertexAttribPointer(Bd,4,v.dtype,!1,0,0),Rb.type=v.dtype,Rb.size=4,Rb.buffer=v,Rb.normalized=!1,Rb.offset=0,Rb.stride=0;da.uniform1i(Ba.location,V.bind());(Vc=Fa.elements)?da.bindBuffer(34963,Vc.buffer.buffer):ac.currentVAO&&(Vc=Ia.getElements(ac.currentVAO.elements))&&
da.bindBuffer(34963,Vc.buffer.buffer);for(k=0;k<d;++k){G=a[k];var Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Z,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de;$c.height=G.viewportHeight;$c.width=G.viewportWidth;$c.x=G.viewportX;$c.y=G.viewportY;Fc=$c.x|0;td=$c.y|0;Mc="width"in $c?$c.width|0:W.framebufferWidth-Fc;Wc="height"in $c?$c.height|0:W.framebufferHeight-td;pd=W.viewportWidth;W.viewportWidth=Mc;nc=W.viewportHeight;
W.viewportHeight=Wc;da.viewport(Fc,td,Mc,Wc);ld[0]=Fc;ld[1]=td;ld[2]=Mc;ld[3]=Wc;rd.height=G.scissorHeight;rd.width=G.scissorWidth;rd.x=G.scissorX;rd.y=G.scissorY;wc=rd.x|0;hc=rd.y|0;eb="width"in rd?rd.width|0:W.framebufferWidth-wc;rc="height"in rd?rd.height|0:W.framebufferHeight-hc;da.scissor(wc,hc,eb,rc);Ze[0]=wc;Ze[1]=hc;Ze[2]=eb;Ze[3]=rc;Tb=G.dim0A;da.uniformMatrix4fv(P.location,!1,Array.isArray(Tb)||Tb instanceof Float32Array?Tb:(Uc[0]=Tb[0],Uc[1]=Tb[1],Uc[2]=Tb[2],Uc[3]=Tb[3],Uc[4]=Tb[4],Uc[5]=
Tb[5],Uc[6]=Tb[6],Uc[7]=Tb[7],Uc[8]=Tb[8],Uc[9]=Tb[9],Uc[10]=Tb[10],Uc[11]=Tb[11],Uc[12]=Tb[12],Uc[13]=Tb[13],Uc[14]=Tb[14],Uc[15]=Tb[15],Uc));Xb=G.dim1A;da.uniformMatrix4fv(K.location,!1,Array.isArray(Xb)||Xb instanceof Float32Array?Xb:(Ec[0]=Xb[0],Ec[1]=Xb[1],Ec[2]=Xb[2],Ec[3]=Xb[3],Ec[4]=Xb[4],Ec[5]=Xb[5],Ec[6]=Xb[6],Ec[7]=Xb[7],Ec[8]=Xb[8],Ec[9]=Xb[9],Ec[10]=Xb[10],Ec[11]=Xb[11],Ec[12]=Xb[12],Ec[13]=Xb[13],Ec[14]=Xb[14],Ec[15]=Xb[15],Ec));dc=G.dim0B;da.uniformMatrix4fv(B.location,!1,Array.isArray(dc)||
dc instanceof Float32Array?dc:(ec[0]=dc[0],ec[1]=dc[1],ec[2]=dc[2],ec[3]=dc[3],ec[4]=dc[4],ec[5]=dc[5],ec[6]=dc[6],ec[7]=dc[7],ec[8]=dc[8],ec[9]=dc[9],ec[10]=dc[10],ec[11]=dc[11],ec[12]=dc[12],ec[13]=dc[13],ec[14]=dc[14],ec[15]=dc[15],ec));ic=G.dim1B;da.uniformMatrix4fv(Da.location,!1,Array.isArray(ic)||ic instanceof Float32Array?ic:(Ic[0]=ic[0],Ic[1]=ic[1],Ic[2]=ic[2],Ic[3]=ic[3],Ic[4]=ic[4],Ic[5]=ic[5],Ic[6]=ic[6],Ic[7]=ic[7],Ic[8]=ic[8],Ic[9]=ic[9],Ic[10]=ic[10],Ic[11]=ic[11],Ic[12]=ic[12],Ic[13]=
ic[13],Ic[14]=ic[14],Ic[15]=ic[15],Ic));yc=G.dim0C;da.uniformMatrix4fv(g.location,!1,Array.isArray(yc)||yc instanceof Float32Array?yc:(oc[0]=yc[0],oc[1]=yc[1],oc[2]=yc[2],oc[3]=yc[3],oc[4]=yc[4],oc[5]=yc[5],oc[6]=yc[6],oc[7]=yc[7],oc[8]=yc[8],oc[9]=yc[9],oc[10]=yc[10],oc[11]=yc[11],oc[12]=yc[12],oc[13]=yc[13],oc[14]=yc[14],oc[15]=yc[15],oc));Bc=G.dim1C;da.uniformMatrix4fv(qa.location,!1,Array.isArray(Bc)||Bc instanceof Float32Array?Bc:(pc[0]=Bc[0],pc[1]=Bc[1],pc[2]=Bc[2],pc[3]=Bc[3],pc[4]=Bc[4],pc[5]=
Bc[5],pc[6]=Bc[6],pc[7]=Bc[7],pc[8]=Bc[8],pc[9]=Bc[9],pc[10]=Bc[10],pc[11]=Bc[11],pc[12]=Bc[12],pc[13]=Bc[13],pc[14]=Bc[14],pc[15]=Bc[15],pc));bd=G.dim0D;da.uniformMatrix4fv(M.location,!1,Array.isArray(bd)||bd instanceof Float32Array?bd:(mc[0]=bd[0],mc[1]=bd[1],mc[2]=bd[2],mc[3]=bd[3],mc[4]=bd[4],mc[5]=bd[5],mc[6]=bd[6],mc[7]=bd[7],mc[8]=bd[8],mc[9]=bd[9],mc[10]=bd[10],mc[11]=bd[11],mc[12]=bd[12],mc[13]=bd[13],mc[14]=bd[14],mc[15]=bd[15],mc));Pc=G.dim1D;da.uniformMatrix4fv(m.location,!1,Array.isArray(Pc)||
Pc instanceof Float32Array?Pc:(fc[0]=Pc[0],fc[1]=Pc[1],fc[2]=Pc[2],fc[3]=Pc[3],fc[4]=Pc[4],fc[5]=Pc[5],fc[6]=Pc[6],fc[7]=Pc[7],fc[8]=Pc[8],fc[9]=Pc[9],fc[10]=Pc[10],fc[11]=Pc[11],fc[12]=Pc[12],fc[13]=Pc[13],fc[14]=Pc[14],fc[15]=Pc[15],fc));Qc=G.loA;da.uniformMatrix4fv(za.location,!1,Array.isArray(Qc)||Qc instanceof Float32Array?Qc:(Va[0]=Qc[0],Va[1]=Qc[1],Va[2]=Qc[2],Va[3]=Qc[3],Va[4]=Qc[4],Va[5]=Qc[5],Va[6]=Qc[6],Va[7]=Qc[7],Va[8]=Qc[8],Va[9]=Qc[9],Va[10]=Qc[10],Va[11]=Qc[11],Va[12]=Qc[12],Va[13]=
Qc[13],Va[14]=Qc[14],Va[15]=Qc[15],Va));Rc=G.hiA;da.uniformMatrix4fv(aa.location,!1,Array.isArray(Rc)||Rc instanceof Float32Array?Rc:(uc[0]=Rc[0],uc[1]=Rc[1],uc[2]=Rc[2],uc[3]=Rc[3],uc[4]=Rc[4],uc[5]=Rc[5],uc[6]=Rc[6],uc[7]=Rc[7],uc[8]=Rc[8],uc[9]=Rc[9],uc[10]=Rc[10],uc[11]=Rc[11],uc[12]=Rc[12],uc[13]=Rc[13],uc[14]=Rc[14],uc[15]=Rc[15],uc));Xc=G.loB;da.uniformMatrix4fv(xa.location,!1,Array.isArray(Xc)||Xc instanceof Float32Array?Xc:(yb[0]=Xc[0],yb[1]=Xc[1],yb[2]=Xc[2],yb[3]=Xc[3],yb[4]=Xc[4],yb[5]=
Xc[5],yb[6]=Xc[6],yb[7]=Xc[7],yb[8]=Xc[8],yb[9]=Xc[9],yb[10]=Xc[10],yb[11]=Xc[11],yb[12]=Xc[12],yb[13]=Xc[13],yb[14]=Xc[14],yb[15]=Xc[15],yb));kd=G.hiB;da.uniformMatrix4fv(O.location,!1,Array.isArray(kd)||kd instanceof Float32Array?kd:(db[0]=kd[0],db[1]=kd[1],db[2]=kd[2],db[3]=kd[3],db[4]=kd[4],db[5]=kd[5],db[6]=kd[6],db[7]=kd[7],db[8]=kd[8],db[9]=kd[9],db[10]=kd[10],db[11]=kd[11],db[12]=kd[12],db[13]=kd[13],db[14]=kd[14],db[15]=kd[15],db));cd=G.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(cd)||
cd instanceof Float32Array?cd:(Nb[0]=cd[0],Nb[1]=cd[1],Nb[2]=cd[2],Nb[3]=cd[3],Nb[4]=cd[4],Nb[5]=cd[5],Nb[6]=cd[6],Nb[7]=cd[7],Nb[8]=cd[8],Nb[9]=cd[9],Nb[10]=cd[10],Nb[11]=cd[11],Nb[12]=cd[12],Nb[13]=cd[13],Nb[14]=cd[14],Nb[15]=cd[15],Nb));Yc=G.hiC;da.uniformMatrix4fv(ma.location,!1,Array.isArray(Yc)||Yc instanceof Float32Array?Yc:(bb[0]=Yc[0],bb[1]=Yc[1],bb[2]=Yc[2],bb[3]=Yc[3],bb[4]=Yc[4],bb[5]=Yc[5],bb[6]=Yc[6],bb[7]=Yc[7],bb[8]=Yc[8],bb[9]=Yc[9],bb[10]=Yc[10],bb[11]=Yc[11],bb[12]=Yc[12],bb[13]=
Yc[13],bb[14]=Yc[14],bb[15]=Yc[15],bb));kc=G.loD;da.uniformMatrix4fv(Aa.location,!1,Array.isArray(kc)||kc instanceof Float32Array?kc:(ob[0]=kc[0],ob[1]=kc[1],ob[2]=kc[2],ob[3]=kc[3],ob[4]=kc[4],ob[5]=kc[5],ob[6]=kc[6],ob[7]=kc[7],ob[8]=kc[8],ob[9]=kc[9],ob[10]=kc[10],ob[11]=kc[11],ob[12]=kc[12],ob[13]=kc[13],ob[14]=kc[14],ob[15]=kc[15],ob));cc=G.hiD;da.uniformMatrix4fv(pa.location,!1,Array.isArray(cc)||cc instanceof Float32Array?cc:(Wa[0]=cc[0],Wa[1]=cc[1],Wa[2]=cc[2],Wa[3]=cc[3],Wa[4]=cc[4],Wa[5]=
cc[5],Wa[6]=cc[6],Wa[7]=cc[7],Wa[8]=cc[8],Wa[9]=cc[9],Wa[10]=cc[10],Wa[11]=cc[11],Wa[12]=cc[12],Wa[13]=cc[13],Wa[14]=cc[14],Wa[15]=cc[15],Wa));Zc=G.resolution;Tc=Zc[0];zc=Zc[1];k&&dd===Tc&&gd===zc||(dd=Tc,gd=zc,da.uniform2f(ra.location,Tc,zc));qd=G.viewBoxPos;Z=qd[0];hd=qd[1];k&&ze===Z&&Re===hd||(ze=Z,Re=hd,da.uniform2f(wa.location,Z,hd));Od=G.viewBoxSize;he=Od[0];Pd=Od[1];k&&pe===he&&Jd===Pd||(pe=he,Jd=Pd,da.uniform2f(Ea.location,he,Pd));Hd=G.maskHeight;k&&nd===Hd||(nd=Hd,da.uniform1f(ka.location,
Hd));Sc=G.drwLayer;k&&ud===Sc||(ud=Sc,da.uniform1f(J.location,Sc));sd=G.contextColor;id=sd[0];Cd=sd[1];je=sd[2];Fe=sd[3];k&&wd===id&&Ed===Cd&&we===je&&le===Fe||(wd=id,Ed=Cd,we=je,le=Fe,da.uniform4f(R.location,id,Cd,je,Fe));(ke=G.maskTexture)&&"framebuffer"===ke._reglType&&(ke=ke.color[0]);ie=ke._texture;da.uniform1i(oa.location,ie.bind());te=G.offset;if(de=G.count)Vc?da.drawElements(1,de,Vc.type,te<<(Vc.type-5121>>1)):da.drawArrays(1,te,de),W.viewportWidth=pd,W.viewportHeight=nc,ie.unbind()}V.unbind();
ua.dirty=!0;ac.setVAO(null);ua.profile=f},draw:function(a){var d,h,f,k,G,b;d=mb.next;d!==mb.cur&&(d?da.bindFramebuffer(36160,d.framebuffer):da.bindFramebuffer(36160,null),mb.cur=d);if(ua.dirty){d=Ad[0];b=Ad[1];h=Ad[2];f=Ad[3];if(d!==Nd[0]||b!==Nd[1]||h!==Nd[2]||f!==Nd[3])da.colorMask(d,b,h,f),Nd[0]=d,Nd[1]=b,Nd[2]=h,Nd[3]=f;d=zd.frontFace;d!==ua.frontFace&&(da.frontFace(d),ua.frontFace=d);d=zd.polygonOffset_enable;d!==ua.polygonOffset_enable&&(d?da.enable(32823):da.disable(32823),ua.polygonOffset_enable=
d);d=Dd[0];b=Dd[1];if(d!==be[0]||b!==be[1])da.polygonOffset(d,b),be[0]=d,be[1]=b;d=zd.sample_alpha;d!==ua.sample_alpha&&(d?da.enable(32926):da.disable(32926),ua.sample_alpha=d);d=zd.sample_enable;d!==ua.sample_enable&&(d?da.enable(32928):da.disable(32928),ua.sample_enable=d);d=ge[0];b=ge[1];if(d!==ae[0]||b!==ae[1])da.sampleCoverage(d,b),ae[0]=d,ae[1]=b;d=zd.stencil_enable;d!==ua.stencil_enable&&(d?da.enable(2960):da.disable(2960),ua.stencil_enable=d);d=zd.stencil_mask;d!==ua.stencil_mask&&(da.stencilMask(d),
ua.stencil_mask=d);d=$e[0];b=$e[1];h=$e[2];if(d!==Gd[0]||b!==Gd[1]||h!==Gd[2])da.stencilFunc(d,b,h),Gd[0]=d,Gd[1]=b,Gd[2]=h;d=Zd[0];b=Zd[1];h=Zd[2];f=Zd[3];if(d!==Wd[0]||b!==Wd[1]||h!==Wd[2]||f!==Wd[3])da.stencilOpSeparate(d,b,h,f),Wd[0]=d,Wd[1]=b,Wd[2]=h,Wd[3]=f;d=ye[0];b=ye[1];h=ye[2];f=ye[3];if(d!==se[0]||b!==se[1]||h!==se[2]||f!==se[3])da.stencilOpSeparate(d,b,h,f),se[0]=d,se[1]=b,se[2]=h,se[3]=f}$c.height=a.viewportHeight;$c.width=a.viewportWidth;$c.x=a.viewportX;$c.y=a.viewportY;h=$c.x|0;f=
$c.y|0;k="width"in $c?$c.width|0:W.framebufferWidth-h;G="height"in $c?$c.height|0:W.framebufferHeight-f;d=W.viewportWidth;W.viewportWidth=k;b=W.viewportHeight;W.viewportHeight=G;da.viewport(h,f,k,G);ld[0]=h;ld[1]=f;ld[2]=k;ld[3]=G;da.blendColor(0,0,0,0);ga[0]=0;ga[1]=0;ga[2]=0;ga[3]=0;da.disable(3042);ua.blend_enable=!1;da.blendEquationSeparate(32774,32774);yd[0]=32774;yd[1]=32774;da.blendFuncSeparate(770,771,1,1);xe[0]=770;xe[1]=771;xe[2]=1;xe[3]=1;da.enable(2884);ua.cull_enable=!0;da.cullFace(1029);
ua.cull_face=1029;da.enable(2929);ua.depth_enable=!0;da.depthFunc(513);ua.depth_func=513;da.depthMask(!0);ua.depth_mask=!0;da.depthRange(0,1);fe[0]=0;fe[1]=1;da.disable(3024);ua.dither=!1;da.lineWidth(2);ua.lineWidth=2;rd.height=a.scissorHeight;rd.width=a.scissorWidth;rd.x=a.scissorX;rd.y=a.scissorY;h=rd.x|0;f=rd.y|0;k="width"in rd?rd.width|0:W.framebufferWidth-h;G="height"in rd?rd.height|0:W.framebufferHeight-f;da.scissor(h,f,k,G);Ze[0]=h;Ze[1]=f;Ze[2]=k;Ze[3]=G;da.enable(3089);ua.scissor_enable=
!0;h=ua.profile;ua.profile=!1;da.useProgram(N.program);ac.setVAO(null);f=ya.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==L.dtype||4!==k.size||k.buffer!==L||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,L.buffer),da.vertexAttribPointer(f,4,L.dtype,!1,0,0),k.type=L.dtype,k.size=4,k.buffer=L,k.normalized=!1,k.offset=0,k.stride=0;f=Ja.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==e.dtype||4!==k.size||k.buffer!==e||!1!==k.normalized||0!==
k.offset||0!==k.stride)da.bindBuffer(34962,e.buffer),da.vertexAttribPointer(f,4,e.dtype,!1,0,0),k.type=e.dtype,k.size=4,k.buffer=e,k.normalized=!1,k.offset=0,k.stride=0;f=na.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==l.dtype||4!==k.size||k.buffer!==l||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,l.buffer),da.vertexAttribPointer(f,4,l.dtype,!1,0,0),k.type=l.dtype,k.size=4,k.buffer=l,k.normalized=!1,k.offset=0,k.stride=0;f=Za.location;k=la[f];k.buffer||
da.enableVertexAttribArray(f);if(k.type!==q.dtype||4!==k.size||k.buffer!==q||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,q.buffer),da.vertexAttribPointer(f,4,q.dtype,!1,0,0),k.type=q.dtype,k.size=4,k.buffer=q,k.normalized=!1,k.offset=0,k.stride=0;f=Ta.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==c.dtype||4!==k.size||k.buffer!==c||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,c.buffer),da.vertexAttribPointer(f,4,c.dtype,!1,0,0),k.type=
c.dtype,k.size=4,k.buffer=c,k.normalized=!1,k.offset=0,k.stride=0;f=r.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==F.dtype||4!==k.size||k.buffer!==F||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,F.buffer),da.vertexAttribPointer(f,4,F.dtype,!1,0,0),k.type=F.dtype,k.size=4,k.buffer=F,k.normalized=!1,k.offset=0,k.stride=0;f=n.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==C.dtype||4!==k.size||k.buffer!==C||!1!==k.normalized||0!==k.offset||
0!==k.stride)da.bindBuffer(34962,C.buffer),da.vertexAttribPointer(f,4,C.dtype,!1,0,0),k.type=C.dtype,k.size=4,k.buffer=C,k.normalized=!1,k.offset=0,k.stride=0;f=z.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==H.dtype||4!==k.size||k.buffer!==H||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,H.buffer),da.vertexAttribPointer(f,4,H.dtype,!1,0,0),k.type=H.dtype,k.size=4,k.buffer=H,k.normalized=!1,k.offset=0,k.stride=0;f=va.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);
if(k.type!==U.dtype||4!==k.size||k.buffer!==U||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,U.buffer),da.vertexAttribPointer(f,4,U.dtype,!1,0,0),k.type=U.dtype,k.size=4,k.buffer=U,k.normalized=!1,k.offset=0,k.stride=0;f=Ca.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==y.dtype||4!==k.size||k.buffer!==y||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,y.buffer),da.vertexAttribPointer(f,4,y.dtype,!1,0,0),k.type=y.dtype,k.size=4,k.buffer=y,
k.normalized=!1,k.offset=0,k.stride=0;f=xd.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==u.dtype||4!==k.size||k.buffer!==u||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,u.buffer),da.vertexAttribPointer(f,4,u.dtype,!1,0,0),k.type=u.dtype,k.size=4,k.buffer=u,k.normalized=!1,k.offset=0,k.stride=0;f=Hb.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==p.dtype||4!==k.size||k.buffer!==p||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,
p.buffer),da.vertexAttribPointer(f,4,p.dtype,!1,0,0),k.type=p.dtype,k.size=4,k.buffer=p,k.normalized=!1,k.offset=0,k.stride=0;f=ha.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==ba.dtype||4!==k.size||k.buffer!==ba||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,ba.buffer),da.vertexAttribPointer(f,4,ba.dtype,!1,0,0),k.type=ba.dtype,k.size=4,k.buffer=ba,k.normalized=!1,k.offset=0,k.stride=0;f=I.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==
w.dtype||4!==k.size||k.buffer!==w||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,w.buffer),da.vertexAttribPointer(f,4,w.dtype,!1,0,0),k.type=w.dtype,k.size=4,k.buffer=w,k.normalized=!1,k.offset=0,k.stride=0;f=sa.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==T.dtype||4!==k.size||k.buffer!==T||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,T.buffer),da.vertexAttribPointer(f,4,T.dtype,!1,0,0),k.type=T.dtype,k.size=4,k.buffer=T,k.normalized=
!1,k.offset=0,k.stride=0;f=ea.location;k=la[f];k.buffer||da.enableVertexAttribArray(f);if(k.type!==v.dtype||4!==k.size||k.buffer!==v||!1!==k.normalized||0!==k.offset||0!==k.stride)da.bindBuffer(34962,v.buffer),da.vertexAttribPointer(f,4,v.dtype,!1,0,0),k.type=v.dtype,k.size=4,k.buffer=v,k.normalized=!1,k.offset=0,k.stride=0;f=a.dim0A;da.uniformMatrix4fv(P.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Lc[0]=f[0],Lc[1]=f[1],Lc[2]=f[2],Lc[3]=f[3],Lc[4]=f[4],Lc[5]=f[5],Lc[6]=f[6],Lc[7]=f[7],
Lc[8]=f[8],Lc[9]=f[9],Lc[10]=f[10],Lc[11]=f[11],Lc[12]=f[12],Lc[13]=f[13],Lc[14]=f[14],Lc[15]=f[15],Lc));f=a.dim1A;da.uniformMatrix4fv(K.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(od[0]=f[0],od[1]=f[1],od[2]=f[2],od[3]=f[3],od[4]=f[4],od[5]=f[5],od[6]=f[6],od[7]=f[7],od[8]=f[8],od[9]=f[9],od[10]=f[10],od[11]=f[11],od[12]=f[12],od[13]=f[13],od[14]=f[14],od[15]=f[15],od));f=a.dim0B;da.uniformMatrix4fv(B.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Gc[0]=f[0],Gc[1]=f[1],
Gc[2]=f[2],Gc[3]=f[3],Gc[4]=f[4],Gc[5]=f[5],Gc[6]=f[6],Gc[7]=f[7],Gc[8]=f[8],Gc[9]=f[9],Gc[10]=f[10],Gc[11]=f[11],Gc[12]=f[12],Gc[13]=f[13],Gc[14]=f[14],Gc[15]=f[15],Gc));f=a.dim1B;da.uniformMatrix4fv(Da.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(ed[0]=f[0],ed[1]=f[1],ed[2]=f[2],ed[3]=f[3],ed[4]=f[4],ed[5]=f[5],ed[6]=f[6],ed[7]=f[7],ed[8]=f[8],ed[9]=f[9],ed[10]=f[10],ed[11]=f[11],ed[12]=f[12],ed[13]=f[13],ed[14]=f[14],ed[15]=f[15],ed));f=a.dim0C;da.uniformMatrix4fv(g.location,!1,Array.isArray(f)||
f instanceof Float32Array?f:(Oc[0]=f[0],Oc[1]=f[1],Oc[2]=f[2],Oc[3]=f[3],Oc[4]=f[4],Oc[5]=f[5],Oc[6]=f[6],Oc[7]=f[7],Oc[8]=f[8],Oc[9]=f[9],Oc[10]=f[10],Oc[11]=f[11],Oc[12]=f[12],Oc[13]=f[13],Oc[14]=f[14],Oc[15]=f[15],Oc));f=a.dim1C;da.uniformMatrix4fv(qa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(jd[0]=f[0],jd[1]=f[1],jd[2]=f[2],jd[3]=f[3],jd[4]=f[4],jd[5]=f[5],jd[6]=f[6],jd[7]=f[7],jd[8]=f[8],jd[9]=f[9],jd[10]=f[10],jd[11]=f[11],jd[12]=f[12],jd[13]=f[13],jd[14]=f[14],jd[15]=f[15],
jd));f=a.dim0D;da.uniformMatrix4fv(M.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Bb[0]=f[0],Bb[1]=f[1],Bb[2]=f[2],Bb[3]=f[3],Bb[4]=f[4],Bb[5]=f[5],Bb[6]=f[6],Bb[7]=f[7],Bb[8]=f[8],Bb[9]=f[9],Bb[10]=f[10],Bb[11]=f[11],Bb[12]=f[12],Bb[13]=f[13],Bb[14]=f[14],Bb[15]=f[15],Bb));f=a.dim1D;da.uniformMatrix4fv(m.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Fb[0]=f[0],Fb[1]=f[1],Fb[2]=f[2],Fb[3]=f[3],Fb[4]=f[4],Fb[5]=f[5],Fb[6]=f[6],Fb[7]=f[7],Fb[8]=f[8],Fb[9]=f[9],Fb[10]=f[10],
Fb[11]=f[11],Fb[12]=f[12],Fb[13]=f[13],Fb[14]=f[14],Fb[15]=f[15],Fb));f=a.loA;da.uniformMatrix4fv(za.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(tc[0]=f[0],tc[1]=f[1],tc[2]=f[2],tc[3]=f[3],tc[4]=f[4],tc[5]=f[5],tc[6]=f[6],tc[7]=f[7],tc[8]=f[8],tc[9]=f[9],tc[10]=f[10],tc[11]=f[11],tc[12]=f[12],tc[13]=f[13],tc[14]=f[14],tc[15]=f[15],tc));f=a.hiA;da.uniformMatrix4fv(aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xb[0]=f[0],xb[1]=f[1],xb[2]=f[2],xb[3]=f[3],xb[4]=f[4],xb[5]=
f[5],xb[6]=f[6],xb[7]=f[7],xb[8]=f[8],xb[9]=f[9],xb[10]=f[10],xb[11]=f[11],xb[12]=f[12],xb[13]=f[13],xb[14]=f[14],xb[15]=f[15],xb));f=a.loB;da.uniformMatrix4fv(xa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(xc[0]=f[0],xc[1]=f[1],xc[2]=f[2],xc[3]=f[3],xc[4]=f[4],xc[5]=f[5],xc[6]=f[6],xc[7]=f[7],xc[8]=f[8],xc[9]=f[9],xc[10]=f[10],xc[11]=f[11],xc[12]=f[12],xc[13]=f[13],xc[14]=f[14],xc[15]=f[15],xc));f=a.hiB;da.uniformMatrix4fv(O.location,!1,Array.isArray(f)||f instanceof Float32Array?
f:(Cb[0]=f[0],Cb[1]=f[1],Cb[2]=f[2],Cb[3]=f[3],Cb[4]=f[4],Cb[5]=f[5],Cb[6]=f[6],Cb[7]=f[7],Cb[8]=f[8],Cb[9]=f[9],Cb[10]=f[10],Cb[11]=f[11],Cb[12]=f[12],Cb[13]=f[13],Cb[14]=f[14],Cb[15]=f[15],Cb));f=a.loC;da.uniformMatrix4fv(fa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Jc[0]=f[0],Jc[1]=f[1],Jc[2]=f[2],Jc[3]=f[3],Jc[4]=f[4],Jc[5]=f[5],Jc[6]=f[6],Jc[7]=f[7],Jc[8]=f[8],Jc[9]=f[9],Jc[10]=f[10],Jc[11]=f[11],Jc[12]=f[12],Jc[13]=f[13],Jc[14]=f[14],Jc[15]=f[15],Jc));f=a.hiC;da.uniformMatrix4fv(ma.location,
!1,Array.isArray(f)||f instanceof Float32Array?f:(lc[0]=f[0],lc[1]=f[1],lc[2]=f[2],lc[3]=f[3],lc[4]=f[4],lc[5]=f[5],lc[6]=f[6],lc[7]=f[7],lc[8]=f[8],lc[9]=f[9],lc[10]=f[10],lc[11]=f[11],lc[12]=f[12],lc[13]=f[13],lc[14]=f[14],lc[15]=f[15],lc));f=a.loD;da.uniformMatrix4fv(Aa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Hc[0]=f[0],Hc[1]=f[1],Hc[2]=f[2],Hc[3]=f[3],Hc[4]=f[4],Hc[5]=f[5],Hc[6]=f[6],Hc[7]=f[7],Hc[8]=f[8],Hc[9]=f[9],Hc[10]=f[10],Hc[11]=f[11],Hc[12]=f[12],Hc[13]=f[13],Hc[14]=
f[14],Hc[15]=f[15],Hc));f=a.hiD;da.uniformMatrix4fv(pa.location,!1,Array.isArray(f)||f instanceof Float32Array?f:(Vc[0]=f[0],Vc[1]=f[1],Vc[2]=f[2],Vc[3]=f[3],Vc[4]=f[4],Vc[5]=f[5],Vc[6]=f[6],Vc[7]=f[7],Vc[8]=f[8],Vc[9]=f[9],Vc[10]=f[10],Vc[11]=f[11],Vc[12]=f[12],Vc[13]=f[13],Vc[14]=f[14],Vc[15]=f[15],Vc));f=a.resolution;da.uniform2f(ra.location,f[0],f[1]);f=a.viewBoxPos;da.uniform2f(wa.location,f[0],f[1]);f=a.viewBoxSize;da.uniform2f(Ea.location,f[0],f[1]);da.uniform1f(ka.location,a.maskHeight);da.uniform1f(J.location,
a.drwLayer);f=a.contextColor;da.uniform4f(R.location,f[0],f[1],f[2],f[3]);(f=a.maskTexture)&&"framebuffer"===f._reglType&&(f=f.color[0]);f=f._texture;da.uniform1i(oa.location,f.bind());da.uniform1i(Ba.location,Q.bind());(k=Fa.elements)?da.bindBuffer(34963,k.buffer.buffer):ac.currentVAO&&(k=Ia.getElements(ac.currentVAO.elements))&&da.bindBuffer(34963,k.buffer.buffer);G=a.offset;if(a=a.count)k?da.drawElements(1,a,k.type,G<<(k.type-5121>>1)):da.drawArrays(1,G,a),ua.dirty=!0,ac.setVAO(null),W.viewportWidth=
d,W.viewportHeight=b,ua.profile=h,f.unbind(),Q.unbind()},scope:function(g,r,m){var n,I,z,b,na,sa,Ja,Ba,P,J,O,Za,B,R,fa,ra,ha,la,K,va,M,aa,wa,Ea,da,Da,pa,xa,Q,N,ka,ca,V,Ta,ea,ya,Ca,oa,Aa,qa,ma,Hb,za,xd,Ia,mb,Dc,Va,ec,Fb,Oc,Bb,fc,oc,xb,Cb,ae,ye,mc,ac,Zd,pc,db,bb,Wa,Ic,ga,$e,jd,lc,ob,Gc,se,ed,Gd,Lc,tc,yb,xc,yd,od,Hc,Ec,Jc,Nd,ld,Wd,Nb,Dd,uc,Ze,Uc,pg,Vc,ge,Ad,xe,be,fe,Z,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ra,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,
Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg,Qg,Rg,Sg,Tg,Ug,Vg,Wg,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh,oh,ph,qh,rh,sh,th,uh,vh;$c.height=g.viewportHeight;$c.width=g.viewportWidth;$c.x=g.viewportX;$c.y=g.viewportY;
n=$c.x|0;I=$c.y|0;z="width"in $c?$c.width|0:W.framebufferWidth-n;b="height"in $c?$c.height|0:W.framebufferHeight-I;na=W.viewportWidth;W.viewportWidth=z;sa=W.viewportHeight;W.viewportHeight=b;Ja=Bd[0];Bd[0]=n;Ba=Bd[1];Bd[1]=I;P=Bd[2];Bd[2]=z;J=Bd[3];Bd[3]=b;O=Sb[0];Sb[0]=0;Za=Sb[1];Sb[1]=0;B=Sb[2];Sb[2]=0;R=Sb[3];Sb[3]=0;fa=zd.blend_enable;zd.blend_enable=!1;ra=Fd[0];Fd[0]=32774;ha=Fd[1];Fd[1]=32774;la=Vd[0];Vd[0]=770;K=Vd[1];Vd[1]=771;va=Vd[2];Vd[2]=1;M=Vd[3];Vd[3]=1;aa=zd.cull_enable;zd.cull_enable=
!0;wa=zd.cull_face;zd.cull_face=1029;Ea=zd.depth_enable;zd.depth_enable=!0;da=zd.depth_func;zd.depth_func=513;Da=zd.depth_mask;zd.depth_mask=!0;pa=oe[0];oe[0]=0;xa=oe[1];oe[1]=1;Q=zd.dither;zd.dither=!1;N=zd.lineWidth;zd.lineWidth=2;rd.height=g.scissorHeight;rd.width=g.scissorWidth;rd.x=g.scissorX;rd.y=g.scissorY;ka=rd.x|0;ca=rd.y|0;V="width"in rd?rd.width|0:W.framebufferWidth-ka;Ta="height"in rd?rd.height|0:W.framebufferHeight-ca;ea=Be[0];Be[0]=ka;ya=Be[1];Be[1]=ca;Ca=Be[2];Be[2]=V;oa=Be[3];Be[3]=
Ta;Aa=zd.scissor_enable;zd.scissor_enable=!0;qa=ua.profile;ua.profile=!1;ma=g.offset;Hb=Fa.offset;Fa.offset=ma;za=g.count;xd=Fa.count;Fa.count=za;Ia=Fa.primitive;Fa.primitive=1;mb=g.contextColor;Dc=Ga[24];Ga[24]=mb;Va=g.dim0A;ec=Ga[3];Ga[3]=Va;Fb=g.dim0B;Oc=Ga[5];Ga[5]=Fb;Bb=g.dim0C;fc=Ga[7];Ga[7]=Bb;oc=g.dim0D;xb=Ga[9];Ga[9]=oc;Cb=g.dim1A;ae=Ga[4];Ga[4]=Cb;ye=g.dim1B;mc=Ga[6];Ga[6]=ye;ac=g.dim1C;Zd=Ga[8];Ga[8]=ac;pc=g.dim1D;db=Ga[10];Ga[10]=pc;bb=g.drwLayer;Wa=Ga[23];Ga[23]=bb;Ic=g.hiA;ga=Ga[12];
Ga[12]=Ic;$e=g.hiB;jd=Ga[14];Ga[14]=$e;lc=g.hiC;ob=Ga[16];Ga[16]=lc;Gc=g.hiD;se=Ga[18];Ga[18]=Gc;ed=g.loA;Gd=Ga[11];Ga[11]=ed;Lc=g.loB;tc=Ga[13];Ga[13]=Lc;yb=g.loC;xc=Ga[15];Ga[15]=yb;yd=g.loD;od=Ga[17];Ga[17]=yd;Hc=g.maskHeight;Ec=Ga[22];Ga[22]=Hc;Jc=g.maskTexture;Nd=Ga[25];Ga[25]=Jc;ld=Ga[26];Ga[26]=ia;Wd=g.resolution;Nb=Ga[19];Ga[19]=Wd;Dd=g.viewBoxPos;uc=Ga[20];Ga[20]=Dd;Ze=g.viewBoxSize;Uc=Ga[21];Ga[21]=Ze;pg=h.buffer;h.buffer=v;Vc=h.divisor;h.divisor=0;ge=h.normalized;h.normalized=!1;Ad=h.offset;
h.offset=0;xe=h.size;h.size=0;be=h.state;h.state=1;fe=h.stride;h.stride=0;Z=h.type;h.type=v.dtype;Pd=h.w;h.w=0;Jd=h.x;h.x=0;Hd=h.y;h.y=0;nd=h.z;h.z=0;Sc=t.buffer;t.buffer=L;ud=t.divisor;t.divisor=0;sd=t.normalized;t.normalized=!1;id=t.offset;t.offset=0;wd=t.size;t.size=0;Cd=t.state;t.state=1;Ed=t.stride;t.stride=0;je=t.type;t.type=L.dtype;we=t.w;t.w=0;Fe=t.x;t.x=0;le=t.y;t.y=0;ke=t.z;t.z=0;ie=S.buffer;S.buffer=e;te=S.divisor;S.divisor=0;de=S.normalized;S.normalized=!1;me=S.offset;S.offset=0;Nc=S.size;
S.size=0;fd=S.state;S.state=1;ue=S.stride;S.stride=0;qe=S.type;S.type=e.dtype;Kd=S.w;S.w=0;Qd=S.x;S.x=0;Rd=S.y;S.y=0;Sd=S.z;S.z=0;ne=k.buffer;k.buffer=l;Ra=k.divisor;k.divisor=0;Ae=k.normalized;k.normalized=!1;re=k.offset;k.offset=0;Se=k.size;k.size=0;Te=k.state;k.state=1;Oe=k.stride;k.stride=0;ve=k.type;k.type=l.dtype;He=k.w;k.w=0;Je=k.x;k.x=0;Ke=k.y;k.y=0;Le=k.z;k.z=0;Ie=X.buffer;X.buffer=q;Md=X.divisor;X.divisor=0;Yd=X.normalized;X.normalized=!1;ce=X.offset;X.offset=0;ee=X.size;X.size=0;Me=X.state;
X.state=1;Id=X.stride;X.stride=0;Td=X.type;X.type=q.dtype;Ce=X.w;X.w=0;Ne=X.x;X.x=0;hf=X.y;X.y=0;bf=X.z;X.z=0;Ue=f.buffer;f.buffer=c;Pe=f.divisor;f.divisor=0;af=f.normalized;f.normalized=!1;Ye=f.offset;f.offset=0;Ve=f.size;f.size=0;We=f.state;f.state=1;Ud=f.stride;f.stride=0;$d=f.type;f.type=c.dtype;Xe=f.w;f.w=0;jf=f.x;f.x=0;nf=f.y;f.y=0;ef=f.z;f.z=0;kf=x.buffer;x.buffer=F;lf=x.divisor;x.divisor=0;mf=x.normalized;x.normalized=!1;rf=x.offset;x.offset=0;of=x.size;x.size=0;sf=x.state;x.state=1;Bf=x.stride;
x.stride=0;Cf=x.type;x.type=F.dtype;Qe=x.w;x.w=0;De=x.x;x.x=0;pf=x.y;x.y=0;qf=x.z;x.z=0;Df=Y.buffer;Y.buffer=C;Gf=Y.divisor;Y.divisor=0;Af=Y.normalized;Y.normalized=!1;Ef=Y.offset;Y.offset=0;Ff=Y.size;Y.size=0;wf=Y.state;Y.state=1;xf=Y.stride;Y.stride=0;vf=Y.type;Y.type=C.dtype;yf=Y.w;Y.w=0;zf=Y.x;Y.x=0;If=Y.y;Y.y=0;Jf=Y.z;Y.z=0;Kf=D.buffer;D.buffer=H;Lf=D.divisor;D.divisor=0;tf=D.normalized;D.normalized=!1;Qf=D.offset;D.offset=0;Hf=D.size;D.size=0;uf=D.state;D.state=1;cg=D.stride;D.stride=0;Rf=D.type;
D.type=H.dtype;Sf=D.w;D.w=0;qg=D.x;D.x=0;ff=D.y;D.y=0;cf=D.z;D.z=0;Mf=E.buffer;E.buffer=U;Nf=E.divisor;E.divisor=0;dg=E.normalized;E.normalized=!1;eg=E.offset;E.offset=0;fg=E.size;E.size=0;gg=E.state;E.state=1;hg=E.stride;E.stride=0;Vf=E.type;E.type=U.dtype;Tf=E.w;E.w=0;Wf=E.x;E.x=0;Xf=E.y;E.y=0;Yf=E.z;E.z=0;ig=d.buffer;d.buffer=y;rg=d.divisor;d.divisor=0;sg=d.normalized;d.normalized=!1;tg=d.offset;d.offset=0;ug=d.size;d.size=0;vg=d.state;d.state=1;wg=d.stride;d.stride=0;xg=d.type;d.type=y.dtype;
yg=d.w;d.w=0;zg=d.x;d.x=0;Ag=d.y;d.y=0;Bg=d.z;d.z=0;gf=G.buffer;G.buffer=u;df=G.divisor;G.divisor=0;Of=G.normalized;G.normalized=!1;Pf=G.offset;G.offset=0;jg=G.size;G.size=0;kg=G.state;G.state=1;lg=G.stride;G.stride=0;mg=G.type;G.type=u.dtype;ng=G.w;G.w=0;Zf=G.x;G.x=0;Uf=G.y;G.y=0;$f=G.z;G.z=0;ag=a.buffer;a.buffer=p;bg=a.divisor;a.divisor=0;og=a.normalized;a.normalized=!1;Cg=a.offset;a.offset=0;Dg=a.size;a.size=0;Eg=a.state;a.state=1;Fg=a.stride;a.stride=0;Gg=a.type;a.type=p.dtype;Hg=a.w;a.w=0;Ig=
a.x;a.x=0;Jg=a.y;a.y=0;Kg=a.z;a.z=0;Lg=ta.buffer;ta.buffer=ba;Mg=ta.divisor;ta.divisor=0;Ng=ta.normalized;ta.normalized=!1;Og=ta.offset;ta.offset=0;Pg=ta.size;ta.size=0;Qg=ta.state;ta.state=1;Rg=ta.stride;ta.stride=0;Sg=ta.type;ta.type=ba.dtype;Tg=ta.w;ta.w=0;Ug=ta.x;ta.x=0;Vg=ta.y;ta.y=0;Wg=ta.z;ta.z=0;Xg=A.buffer;A.buffer=w;Yg=A.divisor;A.divisor=0;Zg=A.normalized;A.normalized=!1;$g=A.offset;A.offset=0;ah=A.size;A.size=0;bh=A.state;A.state=1;ch=A.stride;A.stride=0;dh=A.type;A.type=w.dtype;eh=A.w;
A.w=0;fh=A.x;A.x=0;gh=A.y;A.y=0;hh=A.z;A.z=0;ih=ja.buffer;ja.buffer=T;jh=ja.divisor;ja.divisor=0;kh=ja.normalized;ja.normalized=!1;lh=ja.offset;ja.offset=0;mh=ja.size;ja.size=0;nh=ja.state;ja.state=1;oh=ja.stride;ja.stride=0;ph=ja.type;ja.type=T.dtype;qh=ja.w;ja.w=0;rh=ja.x;ja.x=0;sh=ja.y;ja.y=0;th=ja.z;ja.z=0;uh=$b.vert;$b.vert=2;vh=$b.frag;$b.frag=1;ua.dirty=!0;r(W,g,m);W.viewportWidth=na;W.viewportHeight=sa;Bd[0]=Ja;Bd[1]=Ba;Bd[2]=P;Bd[3]=J;Sb[0]=O;Sb[1]=Za;Sb[2]=B;Sb[3]=R;zd.blend_enable=fa;Fd[0]=
ra;Fd[1]=ha;Vd[0]=la;Vd[1]=K;Vd[2]=va;Vd[3]=M;zd.cull_enable=aa;zd.cull_face=wa;zd.depth_enable=Ea;zd.depth_func=da;zd.depth_mask=Da;oe[0]=pa;oe[1]=xa;zd.dither=Q;zd.lineWidth=N;Be[0]=ea;Be[1]=ya;Be[2]=Ca;Be[3]=oa;zd.scissor_enable=Aa;ua.profile=qa;Fa.offset=Hb;Fa.count=xd;Fa.primitive=Ia;Ga[24]=Dc;Ga[3]=ec;Ga[5]=Oc;Ga[7]=fc;Ga[9]=xb;Ga[4]=ae;Ga[6]=mc;Ga[8]=Zd;Ga[10]=db;Ga[23]=Wa;Ga[12]=ga;Ga[14]=jd;Ga[16]=ob;Ga[18]=se;Ga[11]=Gd;Ga[13]=tc;Ga[15]=xc;Ga[17]=od;Ga[22]=Ec;Ga[25]=Nd;Ga[26]=ld;Ga[19]=Nb;
Ga[20]=uc;Ga[21]=Uc;h.buffer=pg;h.divisor=Vc;h.normalized=ge;h.offset=Ad;h.size=xe;h.state=be;h.stride=fe;h.type=Z;h.w=Pd;h.x=Jd;h.y=Hd;h.z=nd;t.buffer=Sc;t.divisor=ud;t.normalized=sd;t.offset=id;t.size=wd;t.state=Cd;t.stride=Ed;t.type=je;t.w=we;t.x=Fe;t.y=le;t.z=ke;S.buffer=ie;S.divisor=te;S.normalized=de;S.offset=me;S.size=Nc;S.state=fd;S.stride=ue;S.type=qe;S.w=Kd;S.x=Qd;S.y=Rd;S.z=Sd;k.buffer=ne;k.divisor=Ra;k.normalized=Ae;k.offset=re;k.size=Se;k.state=Te;k.stride=Oe;k.type=ve;k.w=He;k.x=Je;
k.y=Ke;k.z=Le;X.buffer=Ie;X.divisor=Md;X.normalized=Yd;X.offset=ce;X.size=ee;X.state=Me;X.stride=Id;X.type=Td;X.w=Ce;X.x=Ne;X.y=hf;X.z=bf;f.buffer=Ue;f.divisor=Pe;f.normalized=af;f.offset=Ye;f.size=Ve;f.state=We;f.stride=Ud;f.type=$d;f.w=Xe;f.x=jf;f.y=nf;f.z=ef;x.buffer=kf;x.divisor=lf;x.normalized=mf;x.offset=rf;x.size=of;x.state=sf;x.stride=Bf;x.type=Cf;x.w=Qe;x.x=De;x.y=pf;x.z=qf;Y.buffer=Df;Y.divisor=Gf;Y.normalized=Af;Y.offset=Ef;Y.size=Ff;Y.state=wf;Y.stride=xf;Y.type=vf;Y.w=yf;Y.x=zf;Y.y=If;
Y.z=Jf;D.buffer=Kf;D.divisor=Lf;D.normalized=tf;D.offset=Qf;D.size=Hf;D.state=uf;D.stride=cg;D.type=Rf;D.w=Sf;D.x=qg;D.y=ff;D.z=cf;E.buffer=Mf;E.divisor=Nf;E.normalized=dg;E.offset=eg;E.size=fg;E.state=gg;E.stride=hg;E.type=Vf;E.w=Tf;E.x=Wf;E.y=Xf;E.z=Yf;d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;G.buffer=gf;G.divisor=df;G.normalized=Of;G.offset=Pf;G.size=jg;G.state=kg;G.stride=lg;G.type=mg;G.w=ng;G.x=Zf;G.y=Uf;G.z=$f;
a.buffer=ag;a.divisor=bg;a.normalized=og;a.offset=Cg;a.size=Dg;a.state=Eg;a.stride=Fg;a.type=Gg;a.w=Hg;a.x=Ig;a.y=Jg;a.z=Kg;ta.buffer=Lg;ta.divisor=Mg;ta.normalized=Ng;ta.offset=Og;ta.size=Pg;ta.state=Qg;ta.stride=Rg;ta.type=Sg;ta.w=Tg;ta.x=Ug;ta.y=Vg;ta.z=Wg;A.buffer=Xg;A.divisor=Yg;A.normalized=Zg;A.offset=$g;A.size=ah;A.state=bh;A.stride=ch;A.type=dh;A.w=eh;A.x=fh;A.y=gh;A.z=hh;ja.buffer=ih;ja.divisor=jh;ja.normalized=kh;ja.offset=lh;ja.size=mh;ja.state=nh;ja.stride=oh;ja.type=ph;ja.w=qh;ja.x=
rh;ja.y=sh;ja.z=th;$b.vert=uh;$b.frag=vh;ua.dirty=!0}}},$1:function(b,ca){var N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d;N=b.attributes;L=b.current;e=b.framebuffer;l=b.gl;q=b.next;c=b.vao;F=q.blend_color;C=L.blend_color;H=q.blend_equation;U=L.blend_equation;y=q.blend_func;u=L.blend_func;p=q.colorMask;ba=L.colorMask;w=q.depth_range;T=L.depth_range;v=q.polygonOffset_offset;Q=L.polygonOffset_offset;ia=q.sample_coverage;h=L.sample_coverage;t=q.scissor_box;S=L.scissor_box;k=q.stencil_func;
X=L.stencil_func;f=q.stencil_opBack;x=L.stencil_opBack;Y=q.stencil_opFront;D=L.stencil_opFront;E=q.viewport;d=L.viewport;return{poll:function(){var c,a,b,A,N,ca,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa;L.dirty=!1;a=q.blend_enable;b=q.cull_enable;A=q.depth_enable;N=q.dither;ca=q.polygonOffset_enable;V=q.sample_alpha;ea=q.sample_enable;R=q.scissor_enable;P=q.stencil_enable;B=q.cull_face;g=L.cull_face;M=q.depth_func;K=L.depth_func;Da=q.depth_mask;qa=L.depth_mask;m=q.frontFace;J=L.frontFace;aa=q.lineWidth;
O=L.lineWidth;ma=q.stencil_mask;pa=L.stencil_mask;c=e.next;c!==e.cur&&(c?l.bindFramebuffer(36160,c.framebuffer):l.bindFramebuffer(36160,null),e.cur=c);a!==L.blend_enable&&(a?l.enable(3042):l.disable(3042),L.blend_enable=a);b!==L.cull_enable&&(b?l.enable(2884):l.disable(2884),L.cull_enable=b);A!==L.depth_enable&&(A?l.enable(2929):l.disable(2929),L.depth_enable=A);N!==L.dither&&(N?l.enable(3024):l.disable(3024),L.dither=N);ca!==L.polygonOffset_enable&&(ca?l.enable(32823):l.disable(32823),L.polygonOffset_enable=
ca);V!==L.sample_alpha&&(V?l.enable(32926):l.disable(32926),L.sample_alpha=V);ea!==L.sample_enable&&(ea?l.enable(32928):l.disable(32928),L.sample_enable=ea);R!==L.scissor_enable&&(R?l.enable(3089):l.disable(3089),L.scissor_enable=R);P!==L.stencil_enable&&(P?l.enable(2960):l.disable(2960),L.stencil_enable=P);if(F[0]!==C[0]||F[1]!==C[1]||F[2]!==C[2]||F[3]!==C[3])l.blendColor(F[0],F[1],F[2],F[3]),C[0]=F[0],C[1]=F[1],C[2]=F[2],C[3]=F[3];if(H[0]!==U[0]||H[1]!==U[1])l.blendEquationSeparate(H[0],H[1]),U[0]=
H[0],U[1]=H[1];if(y[0]!==u[0]||y[1]!==u[1]||y[2]!==u[2]||y[3]!==u[3])l.blendFuncSeparate(y[0],y[1],y[2],y[3]),u[0]=y[0],u[1]=y[1],u[2]=y[2],u[3]=y[3];if(p[0]!==ba[0]||p[1]!==ba[1]||p[2]!==ba[2]||p[3]!==ba[3])l.colorMask(p[0],p[1],p[2],p[3]),ba[0]=p[0],ba[1]=p[1],ba[2]=p[2],ba[3]=p[3];B!==g&&(l.cullFace(B),L.cull_face=B);M!==K&&(l.depthFunc(M),L.depth_func=M);Da!==qa&&(l.depthMask(Da),L.depth_mask=Da);if(w[0]!==T[0]||w[1]!==T[1])l.depthRange(w[0],w[1]),T[0]=w[0],T[1]=w[1];m!==J&&(l.frontFace(m),L.frontFace=
m);aa!==O&&(l.lineWidth(aa),L.lineWidth=aa);if(v[0]!==Q[0]||v[1]!==Q[1])l.polygonOffset(v[0],v[1]),Q[0]=v[0],Q[1]=v[1];if(ia[0]!==h[0]||ia[1]!==h[1])l.sampleCoverage(ia[0],ia[1]),h[0]=ia[0],h[1]=ia[1];if(t[0]!==S[0]||t[1]!==S[1]||t[2]!==S[2]||t[3]!==S[3])l.scissor(t[0],t[1],t[2],t[3]),S[0]=t[0],S[1]=t[1],S[2]=t[2],S[3]=t[3];if(k[0]!==X[0]||k[1]!==X[1]||k[2]!==X[2])l.stencilFunc(k[0],k[1],k[2]),X[0]=k[0],X[1]=k[1],X[2]=k[2];ma!==pa&&(l.stencilMask(ma),L.stencil_mask=ma);if(f[0]!==x[0]||f[1]!==x[1]||
f[2]!==x[2]||f[3]!==x[3])l.stencilOpSeparate(f[0],f[1],f[2],f[3]),x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3];if(Y[0]!==D[0]||Y[1]!==D[1]||Y[2]!==D[2]||Y[3]!==D[3])l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]),D[0]=Y[0],D[1]=Y[1],D[2]=Y[2],D[3]=Y[3];if(E[0]!==d[0]||E[1]!==d[1]||E[2]!==d[2]||E[3]!==d[3])l.viewport(E[0],E[1],E[2],E[3]),d[0]=E[0],d[1]=E[1],d[2]=E[2],d[3]=E[3]},refresh:function(){var b,a,ta,A,ja,Dc,V,ea,R,P,B,g,M,K,Da,qa;L.dirty=!1;a=q.blend_enable;ta=q.cull_enable;A=q.depth_enable;ja=q.dither;
Dc=q.polygonOffset_enable;V=q.sample_alpha;ea=q.sample_enable;R=q.scissor_enable;P=q.stencil_enable;B=q.cull_face;g=q.depth_func;M=q.depth_mask;K=q.frontFace;Da=q.lineWidth;qa=q.stencil_mask;(b=e.next)?l.bindFramebuffer(36160,b.framebuffer):l.bindFramebuffer(36160,null);e.cur=b;b=N[0];b.buffer?(l.enableVertexAttribArray(0),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(0,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(0),l.vertexAttrib4f(0,b.x,b.y,b.z,b.w),b.buffer=
null);ca.vertexAttribDivisorANGLE(0,b.divisor);b=N[1];b.buffer?(l.enableVertexAttribArray(1),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(1,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(1),l.vertexAttrib4f(1,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(1,b.divisor);b=N[2];b.buffer?(l.enableVertexAttribArray(2),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(2,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(2),
l.vertexAttrib4f(2,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(2,b.divisor);b=N[3];b.buffer?(l.enableVertexAttribArray(3),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(3,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(3),l.vertexAttrib4f(3,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(3,b.divisor);b=N[4];b.buffer?(l.enableVertexAttribArray(4),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(4,b.size,b.type,b.normalized,
b.stride,b.offset)):(l.disableVertexAttribArray(4),l.vertexAttrib4f(4,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(4,b.divisor);b=N[5];b.buffer?(l.enableVertexAttribArray(5),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(5,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(5),l.vertexAttrib4f(5,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(5,b.divisor);b=N[6];b.buffer?(l.enableVertexAttribArray(6),l.bindBuffer(34962,b.buffer.buffer),
l.vertexAttribPointer(6,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(6),l.vertexAttrib4f(6,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(6,b.divisor);b=N[7];b.buffer?(l.enableVertexAttribArray(7),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(7,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(7),l.vertexAttrib4f(7,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(7,b.divisor);b=N[8];b.buffer?(l.enableVertexAttribArray(8),
l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(8,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(8),l.vertexAttrib4f(8,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(8,b.divisor);b=N[9];b.buffer?(l.enableVertexAttribArray(9),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(9,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(9),l.vertexAttrib4f(9,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(9,b.divisor);
b=N[10];b.buffer?(l.enableVertexAttribArray(10),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(10,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(10),l.vertexAttrib4f(10,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(10,b.divisor);b=N[11];b.buffer?(l.enableVertexAttribArray(11),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(11,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(11),l.vertexAttrib4f(11,b.x,b.y,b.z,
b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(11,b.divisor);b=N[12];b.buffer?(l.enableVertexAttribArray(12),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(12,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(12),l.vertexAttrib4f(12,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(12,b.divisor);b=N[13];b.buffer?(l.enableVertexAttribArray(13),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(13,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(13),
l.vertexAttrib4f(13,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(13,b.divisor);b=N[14];b.buffer?(l.enableVertexAttribArray(14),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(14,b.size,b.type,b.normalized,b.stride,b.offset)):(l.disableVertexAttribArray(14),l.vertexAttrib4f(14,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(14,b.divisor);b=N[15];b.buffer?(l.enableVertexAttribArray(15),l.bindBuffer(34962,b.buffer.buffer),l.vertexAttribPointer(15,b.size,b.type,b.normalized,
b.stride,b.offset)):(l.disableVertexAttribArray(15),l.vertexAttrib4f(15,b.x,b.y,b.z,b.w),b.buffer=null);ca.vertexAttribDivisorANGLE(15,b.divisor);c.currentVAO=null;c.setVAO(c.targetVAO);a?l.enable(3042):l.disable(3042);L.blend_enable=a;ta?l.enable(2884):l.disable(2884);L.cull_enable=ta;A?l.enable(2929):l.disable(2929);L.depth_enable=A;ja?l.enable(3024):l.disable(3024);L.dither=ja;Dc?l.enable(32823):l.disable(32823);L.polygonOffset_enable=Dc;V?l.enable(32926):l.disable(32926);L.sample_alpha=V;ea?l.enable(32928):
l.disable(32928);L.sample_enable=ea;R?l.enable(3089):l.disable(3089);L.scissor_enable=R;P?l.enable(2960):l.disable(2960);L.stencil_enable=P;l.blendColor(F[0],F[1],F[2],F[3]);C[0]=F[0];C[1]=F[1];C[2]=F[2];C[3]=F[3];l.blendEquationSeparate(H[0],H[1]);U[0]=H[0];U[1]=H[1];l.blendFuncSeparate(y[0],y[1],y[2],y[3]);u[0]=y[0];u[1]=y[1];u[2]=y[2];u[3]=y[3];l.colorMask(p[0],p[1],p[2],p[3]);ba[0]=p[0];ba[1]=p[1];ba[2]=p[2];ba[3]=p[3];l.cullFace(B);L.cull_face=B;l.depthFunc(g);L.depth_func=g;l.depthMask(M);L.depth_mask=
M;l.depthRange(w[0],w[1]);T[0]=w[0];T[1]=w[1];l.frontFace(K);L.frontFace=K;l.lineWidth(Da);L.lineWidth=Da;l.polygonOffset(v[0],v[1]);Q[0]=v[0];Q[1]=v[1];l.sampleCoverage(ia[0],ia[1]);h[0]=ia[0];h[1]=ia[1];l.scissor(t[0],t[1],t[2],t[3]);S[0]=t[0];S[1]=t[1];S[2]=t[2];S[3]=t[3];l.stencilFunc(k[0],k[1],k[2]);X[0]=k[0];X[1]=k[1];X[2]=k[2];l.stencilMask(qa);L.stencil_mask=qa;l.stencilOpSeparate(f[0],f[1],f[2],f[3]);x[0]=f[0];x[1]=f[1];x[2]=f[2];x[3]=f[3];l.stencilOpSeparate(Y[0],Y[1],Y[2],Y[3]);D[0]=Y[0];
D[1]=Y[1];D[2]=Y[2];D[3]=Y[3];l.viewport(E[0],E[1],E[2],E[3]);d[0]=E[0];d[1]=E[1];d[2]=E[2];d[3]=E[3]}}},"$32,capOffset,capSize,color,direction,error,lineOffset,lineWidth,opacity,position,positionFract,scale,scaleFract,translate,translateFract,viewport":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,Dc,V,ea,R,P,B,g,M,K,Da,qa){var m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,xd,Hb,ha,I,sa,Ba,ra,wa,Ea,la,W,ua,Fa,Ia,mb,da,zd,$b,Ga,ac,Sb;m=b.attributes;
J=b.buffer;aa=b.context;O=b.current;ma=b.draw;pa=b.elements;za=b.extensions;xa=b.framebuffer;fa=b.gl;Aa=b.isBufferArgs;ka=b.next;oa=b.shader;ya=b.uniforms;Ja=b.vao;na=ka.blend_color;Za=O.blend_color;Ta=ka.blend_equation;r=O.blend_equation;n=ka.blend_func;z=O.blend_func;va=ka.colorMask;Ca=O.colorMask;xd=ka.depth_range;Hb=O.depth_range;ha=ka.polygonOffset_offset;I=O.polygonOffset_offset;sa=ka.sample_coverage;Ba=O.sample_coverage;ra=ka.scissor_box;wa=O.scissor_box;Ea=ka.stencil_func;la=O.stencil_func;
W=ka.stencil_opBack;ua=O.stencil_opBack;Fa=ka.stencil_opFront;Ia=O.stencil_opFront;mb=ka.viewport;da=O.viewport;zd={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};$b={};$b.buffer=N;$b.divisor=1;Ga={};Ga.buffer=L;Ga.divisor=1;ac={};ac.buffer=e;ac.divisor=1;Sb={};Sb.buffer=l;Sb.divisor=1;return{batch:function(c,f){var h,l,k,n,b,q;h=xa.next;h!==xa.cur&&(h?fa.bindFramebuffer(36160,h.framebuffer):fa.bindFramebuffer(36160,null),xa.cur=h);if(O.dirty){var t,
na,e,w,ra,L,v,p,C,N,S,Q,F,H,T,Ta,X,ya,oa,ba,ia,mb,ga,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc;t=ka.dither;t!==O.dither&&(t?fa.enable(3024):fa.disable(3024),O.dither=t);na=ka.depth_func;na!==O.depth_func&&(fa.depthFunc(na),O.depth_func=na);e=xd[0];w=xd[1];if(e!==Hb[0]||w!==Hb[1])fa.depthRange(e,w),Hb[0]=e,Hb[1]=w;ra=ka.depth_mask;ra!==O.depth_mask&&(fa.depthMask(ra),O.depth_mask=ra);L=va[0];v=va[1];p=va[2];C=va[3];if(L!==Ca[0]||v!==Ca[1]||p!==Ca[2]||C!==Ca[3])fa.colorMask(L,v,p,C),Ca[0]=L,Ca[1]=v,Ca[2]=p,Ca[3]=
C;N=ka.cull_enable;N!==O.cull_enable&&(N?fa.enable(2884):fa.disable(2884),O.cull_enable=N);S=ka.cull_face;S!==O.cull_face&&(fa.cullFace(S),O.cull_face=S);Q=ka.frontFace;Q!==O.frontFace&&(fa.frontFace(Q),O.frontFace=Q);F=ka.lineWidth;F!==O.lineWidth&&(fa.lineWidth(F),O.lineWidth=F);H=ka.polygonOffset_enable;H!==O.polygonOffset_enable&&(H?fa.enable(32823):fa.disable(32823),O.polygonOffset_enable=H);T=ha[0];Ta=ha[1];if(T!==I[0]||Ta!==I[1])fa.polygonOffset(T,Ta),I[0]=T,I[1]=Ta;X=ka.sample_alpha;X!==O.sample_alpha&&
(X?fa.enable(32926):fa.disable(32926),O.sample_alpha=X);ya=ka.sample_enable;ya!==O.sample_enable&&(ya?fa.enable(32928):fa.disable(32928),O.sample_enable=ya);oa=sa[0];ba=sa[1];if(oa!==Ba[0]||ba!==Ba[1])fa.sampleCoverage(oa,ba),Ba[0]=oa,Ba[1]=ba;ia=ka.stencil_enable;ia!==O.stencil_enable&&(ia?fa.enable(2960):fa.disable(2960),O.stencil_enable=ia);mb=ka.stencil_mask;mb!==O.stencil_mask&&(fa.stencilMask(mb),O.stencil_mask=mb);ga=Ea[0];Bb=Ea[1];Fb=Ea[2];if(ga!==la[0]||Bb!==la[1]||Fb!==la[2])fa.stencilFunc(ga,
Bb,Fb),la[0]=ga,la[1]=Bb,la[2]=Fb;tc=Fa[0];xb=Fa[1];xc=Fa[2];Cb=Fa[3];if(tc!==Ia[0]||xb!==Ia[1]||xc!==Ia[2]||Cb!==Ia[3])fa.stencilOpSeparate(tc,xb,xc,Cb),Ia[0]=tc,Ia[1]=xb,Ia[2]=xc,Ia[3]=Cb;Jc=W[0];lc=W[1];Hc=W[2];Vc=W[3];if(Jc!==ua[0]||lc!==ua[1]||Hc!==ua[2]||Vc!==ua[3])fa.stencilOpSeparate(Jc,lc,Hc,Vc),ua[0]=Jc,ua[1]=lc,ua[2]=Hc,ua[3]=Vc}fa.blendColor(0,0,0,0);Za[0]=0;Za[1]=0;Za[2]=0;Za[3]=0;fa.enable(3042);O.blend_enable=!0;fa.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;fa.blendFuncSeparate(770,
771,773,1);z[0]=770;z[1]=771;z[2]=773;z[3]=1;fa.disable(2929);O.depth_enable=!1;fa.enable(3089);O.scissor_enable=!0;if(l=O.profile)k=performance.now(),ca.count+=f;fa.useProgram(x.program);n=za.angle_instanced_arrays;var Uc,Ec,ec,Ic,oc,pc,mc,fc;Ja.setVAO(null);Uc=ja.location;Ec=m[Uc];Ec.buffer||fa.enableVertexAttribArray(Uc);if(5126!==Ec.type||2!==Ec.size||Ec.buffer!==U||!1!==Ec.normalized||0!==Ec.offset||24!==Ec.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(Uc,2,5126,!1,24,0),Ec.type=
5126,Ec.size=2,Ec.buffer=U,Ec.normalized=!1,Ec.offset=0,Ec.stride=24;0!==Ec.divisor&&(n.vertexAttribDivisorANGLE(Uc,0),Ec.divisor=0);ec=V.location;Ic=m[ec];Ic.buffer||fa.enableVertexAttribArray(ec);if(5126!==Ic.type||2!==Ic.size||Ic.buffer!==y||!1!==Ic.normalized||8!==Ic.offset||24!==Ic.stride)fa.bindBuffer(34962,y.buffer),fa.vertexAttribPointer(ec,2,5126,!1,24,8),Ic.type=5126,Ic.size=2,Ic.buffer=y,Ic.normalized=!1,Ic.offset=8,Ic.stride=24;0!==Ic.divisor&&(n.vertexAttribDivisorANGLE(ec,0),Ic.divisor=
0);oc=a.location;pc=m[oc];pc.buffer||fa.enableVertexAttribArray(oc);if(5126!==pc.type||2!==pc.size||pc.buffer!==u||!1!==pc.normalized||16!==pc.offset||24!==pc.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(oc,2,5126,!1,24,16),pc.type=5126,pc.size=2,pc.buffer=u,pc.normalized=!1,pc.offset=16,pc.stride=24;0!==pc.divisor&&(n.vertexAttribDivisorANGLE(oc,0),pc.divisor=0);(mc=ma.elements)?fa.bindBuffer(34963,mc.buffer.buffer):Ja.currentVAO&&(mc=pa.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,
mc.buffer.buffer);fc=ma.offset;for(b=0;b<f;++b){q=c[b];var Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Z,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc;Va=q.viewport;uc=Va.x|0;yb=Va.y|0;db="width"in Va?Va.width|0:aa.framebufferWidth-uc;Nb="height"in
Va?Va.height|0:aa.framebufferHeight-yb;bb=aa.viewportWidth;aa.viewportWidth=db;ob=aa.viewportHeight;aa.viewportHeight=Nb;fa.viewport(uc,yb,db,Nb);da[0]=uc;da[1]=yb;da[2]=db;da[3]=Nb;Wa=q.viewport;Ld=Wa.x|0;Ib=Wa.y|0;Jb="width"in Wa?Wa.width|0:aa.framebufferWidth-Ld;qc="height"in Wa?Wa.height|0:aa.framebufferHeight-Ib;fa.scissor(Ld,Ib,Jb,qc);wa[0]=Ld;wa[1]=Ib;wa[2]=Jb;wa[3]=qc;Ob=Y.call(this,aa,q,b);ac.offset=Ob;jb=!1;Gb=null;Db=0;wb=!1;Yb=hb=0;Pb=1;qb=0;Ua=5126;ib=bc=zb=Ub=0;Aa(ac)?(jb=!0,Gb=J.createStream(34962,
ac),Ua=Gb.dtype):(Gb=J.getBuffer(ac))?Ua=Gb.dtype:"constant"in ac?(Pb=2,"number"===typeof ac.constant?(zb=ac.constant,bc=ib=Ub=0):(zb=0<ac.constant.length?ac.constant[0]:0,bc=1<ac.constant.length?ac.constant[1]:0,ib=2<ac.constant.length?ac.constant[2]:0,Ub=3<ac.constant.length?ac.constant[3]:0)):(Gb=Aa(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Ua="type"in ac?zd[ac.type]:Gb.dtype,wb=!!ac.normalized,Yb=ac.size|0,hb=ac.offset|0,qb=ac.stride|0,Db=ac.divisor|0);pb=P.location;Ha=
m[pb];if(1===Pb){Ha.buffer||fa.enableVertexAttribArray(pb);rb=Yb||2;if(Ha.type!==Ua||Ha.size!==rb||Ha.buffer!==Gb||Ha.normalized!==wb||Ha.offset!==hb||Ha.stride!==qb)fa.bindBuffer(34962,Gb.buffer),fa.vertexAttribPointer(pb,rb,Ua,wb,qb,hb),Ha.type=Ua,Ha.size=rb,Ha.buffer=Gb,Ha.normalized=wb,Ha.offset=hb,Ha.stride=qb;Ha.divisor!==Db&&(n.vertexAttribDivisorANGLE(pb,Db),Ha.divisor=Db)}else if(Ha.buffer&&(fa.disableVertexAttribArray(pb),Ha.buffer=null),Ha.x!==zb||Ha.y!==bc||Ha.z!==ib||Ha.w!==Ub)fa.vertexAttrib4f(pb,
zb,bc,ib,Ub),Ha.x=zb,Ha.y=bc,Ha.z=ib,Ha.w=Ub;Ka=D.call(this,aa,q,b);Sb.offset=Ka;fb=!1;gb=null;La=0;kb=!1;tb=Xa=0;sb=1;Oa=0;Cc=5126;Ma=Eb=Kb=Qa=0;Aa(Sb)?(fb=!0,gb=J.createStream(34962,Sb),Cc=gb.dtype):(gb=J.getBuffer(Sb))?Cc=gb.dtype:"constant"in Sb?(sb=2,"number"===typeof Sb.constant?(Kb=Sb.constant,Eb=Ma=Qa=0):(Kb=0<Sb.constant.length?Sb.constant[0]:0,Eb=1<Sb.constant.length?Sb.constant[1]:0,Ma=2<Sb.constant.length?Sb.constant[2]:0,Qa=3<Sb.constant.length?Sb.constant[3]:0)):(gb=Aa(Sb.buffer)?J.createStream(34962,
Sb.buffer):J.getBuffer(Sb.buffer),Cc="type"in Sb?zd[Sb.type]:gb.dtype,kb=!!Sb.normalized,tb=Sb.size|0,Xa=Sb.offset|0,Oa=Sb.stride|0,La=Sb.divisor|0);vd=B.location;$a=m[vd];if(1===sb){$a.buffer||fa.enableVertexAttribArray(vd);Lb=tb||2;if($a.type!==Cc||$a.size!==Lb||$a.buffer!==gb||$a.normalized!==kb||$a.offset!==Xa||$a.stride!==Oa)fa.bindBuffer(34962,gb.buffer),fa.vertexAttribPointer(vd,Lb,Cc,kb,Oa,Xa),$a.type=Cc,$a.size=Lb,$a.buffer=gb,$a.normalized=kb,$a.offset=Xa,$a.stride=Oa;$a.divisor!==La&&(n.vertexAttribDivisorANGLE(vd,
La),$a.divisor=La)}else if($a.buffer&&(fa.disableVertexAttribArray(vd),$a.buffer=null),$a.x!==Kb||$a.y!==Eb||$a.z!==Ma||$a.w!==Qa)fa.vertexAttrib4f(vd,Kb,Eb,Ma,Qa),$a.x=Kb,$a.y=Eb,$a.z=Ma,$a.w=Qa;Mb=E.call(this,aa,q,b);Ga.offset=Mb;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;gc=5126;jc=cb=vc=Ac=0;Aa(Ga)?(lb=!0,Na=J.createStream(34962,Ga),gc=Na.dtype):(Na=J.getBuffer(Ga))?gc=Na.dtype:"constant"in Ga?(Sa=2,"number"===typeof Ga.constant?(vc=Ga.constant,cb=jc=Ac=0):(vc=0<Ga.constant.length?Ga.constant[0]:
0,cb=1<Ga.constant.length?Ga.constant[1]:0,jc=2<Ga.constant.length?Ga.constant[2]:0,Ac=3<Ga.constant.length?Ga.constant[3]:0)):(Na=Aa(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),gc="type"in Ga?zd[Ga.type]:Na.dtype,Pa=!!Ga.normalized,vb=Ga.size|0,ub=Ga.offset|0,nb=Ga.stride|0,Zb=Ga.divisor|0);ad=Dc.location;Ya=m[ad];if(1===Sa){Ya.buffer||fa.enableVertexAttribArray(ad);md=vb||4;if(Ya.type!==gc||Ya.size!==md||Ya.buffer!==Na||Ya.normalized!==Pa||Ya.offset!==ub||Ya.stride!==nb)fa.bindBuffer(34962,
Na.buffer),fa.vertexAttribPointer(ad,md,gc,Pa,nb,ub),Ya.type=gc,Ya.size=md,Ya.buffer=Na,Ya.normalized=Pa,Ya.offset=ub,Ya.stride=nb;Ya.divisor!==Zb&&(n.vertexAttribDivisorANGLE(ad,Zb),Ya.divisor=Zb)}else if(Ya.buffer&&(fa.disableVertexAttribArray(ad),Ya.buffer=null),Ya.x!==vc||Ya.y!==cb||Ya.z!==jc||Ya.w!==Ac)fa.vertexAttrib4f(ad,vc,cb,jc,Ac),Ya.x=vc,Ya.y=cb,Ya.z=jc,Ya.w=Ac;Ab=d.call(this,aa,q,b);$b.offset=Ab;ab=!1;Vb=null;sc=0;Wb=!1;Kc=Qb=0;Rb=1;Z=0;Fc=5126;pd=Wc=Mc=td=0;Aa($b)?(ab=!0,Vb=J.createStream(34962,
$b),Fc=Vb.dtype):(Vb=J.getBuffer($b))?Fc=Vb.dtype:"constant"in $b?(Rb=2,"number"===typeof $b.constant?(Mc=$b.constant,Wc=pd=td=0):(Mc=0<$b.constant.length?$b.constant[0]:0,Wc=1<$b.constant.length?$b.constant[1]:0,pd=2<$b.constant.length?$b.constant[2]:0,td=3<$b.constant.length?$b.constant[3]:0)):(Vb=Aa($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),Fc="type"in $b?zd[$b.type]:Vb.dtype,Wb=!!$b.normalized,Kc=$b.size|0,Qb=$b.offset|0,Z=$b.stride|0,sc=$b.divisor|0);nc=A.location;wc=
m[nc];if(1===Rb){wc.buffer||fa.enableVertexAttribArray(nc);hc=Kc||4;if(wc.type!==Fc||wc.size!==hc||wc.buffer!==Vb||wc.normalized!==Wb||wc.offset!==Qb||wc.stride!==Z)fa.bindBuffer(34962,Vb.buffer),fa.vertexAttribPointer(nc,hc,Fc,Wb,Z,Qb),wc.type=Fc,wc.size=hc,wc.buffer=Vb,wc.normalized=Wb,wc.offset=Qb,wc.stride=Z;wc.divisor!==sc&&(n.vertexAttribDivisorANGLE(nc,sc),wc.divisor=sc)}else if(wc.buffer&&(fa.disableVertexAttribArray(nc),wc.buffer=null),wc.x!==Mc||wc.y!==Wc||wc.z!==pd||wc.w!==td)fa.vertexAttrib4f(nc,
Mc,Wc,pd,td),wc.x=Mc,wc.y=Wc,wc.z=pd,wc.w=td;eb=G.call(this,aa,q,b);rc=eb[0];Xb=eb[1];ic=eb[2];Bc=eb[3];b&&Tb===rc&&dc===Xb&&yc===ic&&bd===Bc||(Tb=rc,dc=Xb,yc=ic,bd=Bc,fa.uniform4f(qa.location,rc,Xb,ic,Bc));Pc=q.lineWidth;b&&Qc===Pc||(Qc=Pc,fa.uniform1f(ea.location,Pc));Rc=q.capSize;b&&Xc===Rc||(Xc=Rc,fa.uniform1f(ta.location,Rc));kd=q.scale;cd=kd[0];kc=kd[1];b&&Yc===cd&&cc===kc||(Yc=cd,cc=kc,fa.uniform2f(g.location,cd,kc));Zc=q.scaleFract;Tc=Zc[0];zc=Zc[1];b&&dd===Tc&&gd===zc||(dd=Tc,gd=zc,fa.uniform2f(M.location,
Tc,zc));qd=q.translate;Ee=qd[0];hd=qd[1];b&&ze===Ee&&Re===hd||(ze=Ee,Re=hd,fa.uniform2f(K.location,Ee,hd));Od=q.translateFract;he=Od[0];Pd=Od[1];b&&pe===he&&Jd===Pd||(pe=he,Jd=Pd,fa.uniform2f(Da.location,he,Pd));Hd=q.opacity;b&&nd===Hd||(nd=Hd,fa.uniform1f(R.location,Hd));Sc=q.count;0<Sc?mc?n.drawElementsInstancedANGLE(4,36,mc.type,fc<<(mc.type-5121>>1),Sc):n.drawArraysInstancedANGLE(4,fc,36,Sc):0>Sc&&(mc?fa.drawElements(4,36,mc.type,fc<<(mc.type-5121>>1)):fa.drawArrays(4,fc,36));aa.viewportWidth=
bb;aa.viewportHeight=ob;jb&&J.destroyStream(Gb);fb&&J.destroyStream(gb);lb&&J.destroyStream(Na);ab&&J.destroyStream(Vb)}O.dirty=!0;Ja.setVAO(null);l&&(ca.cpuTime+=performance.now()-k)},draw:function(d){var f,h,l,k,n,b,t,na,x,e,w,ra,G,D,E,L,v,N,S,Q,T,Ta,X,ya,oa,ba,ia,Y,mb,ga,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb;f=xa.next;f!==xa.cur&&
(f?fa.bindFramebuffer(36160,f.framebuffer):fa.bindFramebuffer(36160,null),xa.cur=f);if(O.dirty){var Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,Z,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb;Pa=ka.dither;Pa!==O.dither&&(Pa?fa.enable(3024):fa.disable(3024),O.dither=Pa);ub=ka.depth_func;ub!==O.depth_func&&(fa.depthFunc(ub),O.depth_func=ub);vb=xd[0];Sa=xd[1];if(vb!==Hb[0]||Sa!==Hb[1])fa.depthRange(vb,Sa),Hb[0]=vb,Hb[1]=Sa;nb=ka.depth_mask;nb!==O.depth_mask&&(fa.depthMask(nb),O.depth_mask=nb);
gc=va[0];Ac=va[1];vc=va[2];cb=va[3];if(gc!==Ca[0]||Ac!==Ca[1]||vc!==Ca[2]||cb!==Ca[3])fa.colorMask(gc,Ac,vc,cb),Ca[0]=gc,Ca[1]=Ac,Ca[2]=vc,Ca[3]=cb;jc=ka.cull_enable;jc!==O.cull_enable&&(jc?fa.enable(2884):fa.disable(2884),O.cull_enable=jc);ad=ka.cull_face;ad!==O.cull_face&&(fa.cullFace(ad),O.cull_face=ad);Ya=ka.frontFace;Ya!==O.frontFace&&(fa.frontFace(Ya),O.frontFace=Ya);Z=ka.lineWidth;Z!==O.lineWidth&&(fa.lineWidth(Z),O.lineWidth=Z);Ab=ka.polygonOffset_enable;Ab!==O.polygonOffset_enable&&(Ab?fa.enable(32823):
fa.disable(32823),O.polygonOffset_enable=Ab);ab=ha[0];Vb=ha[1];if(ab!==I[0]||Vb!==I[1])fa.polygonOffset(ab,Vb),I[0]=ab,I[1]=Vb;sc=ka.sample_alpha;sc!==O.sample_alpha&&(sc?fa.enable(32926):fa.disable(32926),O.sample_alpha=sc);Wb=ka.sample_enable;Wb!==O.sample_enable&&(Wb?fa.enable(32928):fa.disable(32928),O.sample_enable=Wb);Qb=sa[0];Kc=sa[1];if(Qb!==Ba[0]||Kc!==Ba[1])fa.sampleCoverage(Qb,Kc),Ba[0]=Qb,Ba[1]=Kc;Rb=ka.stencil_enable;Rb!==O.stencil_enable&&(Rb?fa.enable(2960):fa.disable(2960),O.stencil_enable=
Rb);Xd=ka.stencil_mask;Xd!==O.stencil_mask&&(fa.stencilMask(Xd),O.stencil_mask=Xd);Fc=Ea[0];td=Ea[1];Mc=Ea[2];if(Fc!==la[0]||td!==la[1]||Mc!==la[2])fa.stencilFunc(Fc,td,Mc),la[0]=Fc,la[1]=td,la[2]=Mc;Wc=Fa[0];pd=Fa[1];nc=Fa[2];wc=Fa[3];if(Wc!==Ia[0]||pd!==Ia[1]||nc!==Ia[2]||wc!==Ia[3])fa.stencilOpSeparate(Wc,pd,nc,wc),Ia[0]=Wc,Ia[1]=pd,Ia[2]=nc,Ia[3]=wc;hc=W[0];eb=W[1];rc=W[2];Tb=W[3];if(hc!==ua[0]||eb!==ua[1]||rc!==ua[2]||Tb!==ua[3])fa.stencilOpSeparate(hc,eb,rc,Tb),ua[0]=hc,ua[1]=eb,ua[2]=rc,ua[3]=
Tb}h=d.viewport;l=h.x|0;k=h.y|0;n="width"in h?h.width|0:aa.framebufferWidth-l;b="height"in h?h.height|0:aa.framebufferHeight-k;t=aa.viewportWidth;aa.viewportWidth=n;na=aa.viewportHeight;aa.viewportHeight=b;fa.viewport(l,k,n,b);da[0]=l;da[1]=k;da[2]=n;da[3]=b;fa.blendColor(0,0,0,0);Za[0]=0;Za[1]=0;Za[2]=0;Za[3]=0;fa.enable(3042);O.blend_enable=!0;fa.blendEquationSeparate(32774,32774);r[0]=32774;r[1]=32774;fa.blendFuncSeparate(770,771,773,1);z[0]=770;z[1]=771;z[2]=773;z[3]=1;fa.disable(2929);O.depth_enable=
!1;x=d.viewport;e=x.x|0;w=x.y|0;ra="width"in x?x.width|0:aa.framebufferWidth-e;G="height"in x?x.height|0:aa.framebufferHeight-w;fa.scissor(e,w,ra,G);wa[0]=e;wa[1]=w;wa[2]=ra;wa[3]=G;fa.enable(3089);O.scissor_enable=!0;if(D=O.profile)E=performance.now(),ca.count++;fa.useProgram(q.program);L=za.angle_instanced_arrays;Ja.setVAO(null);v=c.call(this,aa,d,0);ac.offset=v;N=!1;S=null;Q=0;T=!1;X=Ta=0;ya=1;oa=0;ba=5126;ga=mb=Y=ia=0;Aa(ac)?(N=!0,S=J.createStream(34962,ac),ba=S.dtype):(S=J.getBuffer(ac))?ba=
S.dtype:"constant"in ac?(ya=2,"number"===typeof ac.constant?(Y=ac.constant,mb=ga=ia=0):(Y=0<ac.constant.length?ac.constant[0]:0,mb=1<ac.constant.length?ac.constant[1]:0,ga=2<ac.constant.length?ac.constant[2]:0,ia=3<ac.constant.length?ac.constant[3]:0)):(S=Aa(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),ba="type"in ac?zd[ac.type]:S.dtype,T=!!ac.normalized,X=ac.size|0,Ta=ac.offset|0,oa=ac.stride|0,Q=ac.divisor|0);Bb=P.location;Fb=m[Bb];if(1===ya){Fb.buffer||fa.enableVertexAttribArray(Bb);
tc=X||2;if(Fb.type!==ba||Fb.size!==tc||Fb.buffer!==S||Fb.normalized!==T||Fb.offset!==Ta||Fb.stride!==oa)fa.bindBuffer(34962,S.buffer),fa.vertexAttribPointer(Bb,tc,ba,T,oa,Ta),Fb.type=ba,Fb.size=tc,Fb.buffer=S,Fb.normalized=T,Fb.offset=Ta,Fb.stride=oa;Fb.divisor!==Q&&(L.vertexAttribDivisorANGLE(Bb,Q),Fb.divisor=Q)}else if(Fb.buffer&&(fa.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==Y||Fb.y!==mb||Fb.z!==ga||Fb.w!==ia)fa.vertexAttrib4f(Bb,Y,mb,ga,ia),Fb.x=Y,Fb.y=mb,Fb.z=ga,Fb.w=ia;xb=F.call(this,
aa,d,0);Sb.offset=xb;xc=!1;Cb=null;Jc=0;lc=!1;Vc=Hc=0;Uc=1;Ec=0;ec=5126;mc=pc=oc=Ic=0;Aa(Sb)?(xc=!0,Cb=J.createStream(34962,Sb),ec=Cb.dtype):(Cb=J.getBuffer(Sb))?ec=Cb.dtype:"constant"in Sb?(Uc=2,"number"===typeof Sb.constant?(oc=Sb.constant,pc=mc=Ic=0):(oc=0<Sb.constant.length?Sb.constant[0]:0,pc=1<Sb.constant.length?Sb.constant[1]:0,mc=2<Sb.constant.length?Sb.constant[2]:0,Ic=3<Sb.constant.length?Sb.constant[3]:0)):(Cb=Aa(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),ec="type"in
Sb?zd[Sb.type]:Cb.dtype,lc=!!Sb.normalized,Vc=Sb.size|0,Hc=Sb.offset|0,Ec=Sb.stride|0,Jc=Sb.divisor|0);fc=B.location;Va=m[fc];if(1===Uc){Va.buffer||fa.enableVertexAttribArray(fc);uc=Vc||2;if(Va.type!==ec||Va.size!==uc||Va.buffer!==Cb||Va.normalized!==lc||Va.offset!==Hc||Va.stride!==Ec)fa.bindBuffer(34962,Cb.buffer),fa.vertexAttribPointer(fc,uc,ec,lc,Ec,Hc),Va.type=ec,Va.size=uc,Va.buffer=Cb,Va.normalized=lc,Va.offset=Hc,Va.stride=Ec;Va.divisor!==Jc&&(L.vertexAttribDivisorANGLE(fc,Jc),Va.divisor=Jc)}else if(Va.buffer&&
(fa.disableVertexAttribArray(fc),Va.buffer=null),Va.x!==oc||Va.y!==pc||Va.z!==mc||Va.w!==Ic)fa.vertexAttrib4f(fc,oc,pc,mc,Ic),Va.x=oc,Va.y=pc,Va.z=mc,Va.w=Ic;yb=C.call(this,aa,d,0);Ga.offset=yb;db=!1;Nb=null;bb=0;ob=!1;Ld=Wa=0;Ib=1;Jb=0;qc=5126;Db=Gb=jb=Ob=0;Aa(Ga)?(db=!0,Nb=J.createStream(34962,Ga),qc=Nb.dtype):(Nb=J.getBuffer(Ga))?qc=Nb.dtype:"constant"in Ga?(Ib=2,"number"===typeof Ga.constant?(jb=Ga.constant,Gb=Db=Ob=0):(jb=0<Ga.constant.length?Ga.constant[0]:0,Gb=1<Ga.constant.length?Ga.constant[1]:
0,Db=2<Ga.constant.length?Ga.constant[2]:0,Ob=3<Ga.constant.length?Ga.constant[3]:0)):(Nb=Aa(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),qc="type"in Ga?zd[Ga.type]:Nb.dtype,ob=!!Ga.normalized,Ld=Ga.size|0,Wa=Ga.offset|0,Jb=Ga.stride|0,bb=Ga.divisor|0);wb=Dc.location;hb=m[wb];if(1===Ib){hb.buffer||fa.enableVertexAttribArray(wb);Yb=Ld||4;if(hb.type!==qc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Wa||hb.stride!==Jb)fa.bindBuffer(34962,Nb.buffer),fa.vertexAttribPointer(wb,
Yb,qc,ob,Jb,Wa),hb.type=qc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Wa,hb.stride=Jb;hb.divisor!==bb&&(L.vertexAttribDivisorANGLE(wb,bb),hb.divisor=bb)}else if(hb.buffer&&(fa.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)fa.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=H.call(this,aa,d,0);$b.offset=Pb;qb=!1;Ua=null;Ub=0;zb=!1;ib=bc=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;Aa($b)?(qb=!0,Ua=J.createStream(34962,$b),rb=Ua.dtype):(Ua=J.getBuffer($b))?
rb=Ua.dtype:"constant"in $b?(pb=2,"number"===typeof $b.constant?(fb=$b.constant,gb=La=Ka=0):(fb=0<$b.constant.length?$b.constant[0]:0,gb=1<$b.constant.length?$b.constant[1]:0,La=2<$b.constant.length?$b.constant[2]:0,Ka=3<$b.constant.length?$b.constant[3]:0)):(Ua=Aa($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),rb="type"in $b?zd[$b.type]:Ua.dtype,zb=!!$b.normalized,ib=$b.size|0,bc=$b.offset|0,Ha=$b.stride|0,Ub=$b.divisor|0);kb=A.location;Xa=m[kb];if(1===pb){Xa.buffer||fa.enableVertexAttribArray(kb);
tb=ib||4;if(Xa.type!==rb||Xa.size!==tb||Xa.buffer!==Ua||Xa.normalized!==zb||Xa.offset!==bc||Xa.stride!==Ha)fa.bindBuffer(34962,Ua.buffer),fa.vertexAttribPointer(kb,tb,rb,zb,Ha,bc),Xa.type=rb,Xa.size=tb,Xa.buffer=Ua,Xa.normalized=zb,Xa.offset=bc,Xa.stride=Ha;Xa.divisor!==Ub&&(L.vertexAttribDivisorANGLE(kb,Ub),Xa.divisor=Ub)}else if(Xa.buffer&&(fa.disableVertexAttribArray(kb),Xa.buffer=null),Xa.x!==fb||Xa.y!==gb||Xa.z!==La||Xa.w!==Ka)fa.vertexAttrib4f(kb,fb,gb,La,Ka),Xa.x=fb,Xa.y=gb,Xa.z=La,Xa.w=Ka;
sb=ja.location;Oa=m[sb];Oa.buffer||fa.enableVertexAttribArray(sb);if(5126!==Oa.type||2!==Oa.size||Oa.buffer!==U||!1!==Oa.normalized||0!==Oa.offset||24!==Oa.stride)fa.bindBuffer(34962,U.buffer),fa.vertexAttribPointer(sb,2,5126,!1,24,0),Oa.type=5126,Oa.size=2,Oa.buffer=U,Oa.normalized=!1,Oa.offset=0,Oa.stride=24;0!==Oa.divisor&&(L.vertexAttribDivisorANGLE(sb,0),Oa.divisor=0);Cc=V.location;Qa=m[Cc];Qa.buffer||fa.enableVertexAttribArray(Cc);if(5126!==Qa.type||2!==Qa.size||Qa.buffer!==y||!1!==Qa.normalized||
8!==Qa.offset||24!==Qa.stride)fa.bindBuffer(34962,y.buffer),fa.vertexAttribPointer(Cc,2,5126,!1,24,8),Qa.type=5126,Qa.size=2,Qa.buffer=y,Qa.normalized=!1,Qa.offset=8,Qa.stride=24;0!==Qa.divisor&&(L.vertexAttribDivisorANGLE(Cc,0),Qa.divisor=0);Kb=a.location;Eb=m[Kb];Eb.buffer||fa.enableVertexAttribArray(Kb);if(5126!==Eb.type||2!==Eb.size||Eb.buffer!==u||!1!==Eb.normalized||16!==Eb.offset||24!==Eb.stride)fa.bindBuffer(34962,u.buffer),fa.vertexAttribPointer(Kb,2,5126,!1,24,16),Eb.type=5126,Eb.size=2,
Eb.buffer=u,Eb.normalized=!1,Eb.offset=16,Eb.stride=24;0!==Eb.divisor&&(L.vertexAttribDivisorANGLE(Kb,0),Eb.divisor=0);Ma=p.call(this,aa,d,0);fa.uniform4f(qa.location,Ma[0],Ma[1],Ma[2],Ma[3]);fa.uniform1f(ea.location,d.lineWidth);fa.uniform1f(ta.location,d.capSize);vd=d.scale;fa.uniform2f(g.location,vd[0],vd[1]);$a=d.scaleFract;fa.uniform2f(M.location,$a[0],$a[1]);Lb=d.translate;fa.uniform2f(K.location,Lb[0],Lb[1]);Mb=d.translateFract;fa.uniform2f(Da.location,Mb[0],Mb[1]);fa.uniform1f(R.location,
d.opacity);(lb=ma.elements)?fa.bindBuffer(34963,lb.buffer.buffer):Ja.currentVAO&&(lb=pa.getElements(Ja.currentVAO.elements))&&fa.bindBuffer(34963,lb.buffer.buffer);Na=ma.offset;Zb=d.count;0<Zb?lb?L.drawElementsInstancedANGLE(4,36,lb.type,Na<<(lb.type-5121>>1),Zb):L.drawArraysInstancedANGLE(4,Na,36,Zb):0>Zb&&(lb?fa.drawElements(4,36,lb.type,Na<<(lb.type-5121>>1)):fa.drawArrays(4,Na,36));O.dirty=!0;Ja.setVAO(null);aa.viewportWidth=t;aa.viewportHeight=na;D&&(ca.cpuTime+=performance.now()-E);N&&J.destroyStream(S);
xc&&J.destroyStream(Cb);db&&J.destroyStream(Nb);qb&&J.destroyStream(Ua)},scope:function(a,d,c){var g,r,m,l,b,I,q,z,x,e,A,sa,Ja,Ba,P,Za,B,R,fa,ha,G,la,K,D,E,L,W,va,M,wa,Ea,p,C,da,Da,pa,N,xa,F,H,V,ua,ea,Ca,qa,Hb,ta,Y,ja,za,xd,Ia,Fa,Dc,ga,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,Z,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,
Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Ra,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md;g=a.viewport;r=g.x|0;m=g.y|0;l="width"in g?g.width|0:aa.framebufferWidth-r;b="height"in g?g.height|0:aa.framebufferHeight-m;I=aa.viewportWidth;aa.viewportWidth=l;q=aa.viewportHeight;aa.viewportHeight=b;z=mb[0];mb[0]=r;x=mb[1];mb[1]=m;e=mb[2];mb[2]=l;A=mb[3];mb[3]=b;sa=na[0];na[0]=0;Ja=na[1];na[1]=0;Ba=na[2];na[2]=0;P=na[3];na[3]=0;Za=
ka.blend_enable;ka.blend_enable=!0;B=Ta[0];Ta[0]=32774;R=Ta[1];Ta[1]=32774;fa=n[0];n[0]=770;ha=n[1];n[1]=771;G=n[2];n[2]=773;la=n[3];n[3]=1;K=ka.depth_enable;ka.depth_enable=!1;D=a.viewport;E=D.x|0;L=D.y|0;W="width"in D?D.width|0:aa.framebufferWidth-E;va="height"in D?D.height|0:aa.framebufferHeight-L;M=ra[0];ra[0]=E;wa=ra[1];ra[1]=L;Ea=ra[2];ra[2]=W;p=ra[3];ra[3]=va;C=ka.scissor_enable;ka.scissor_enable=!0;if(da=O.profile)Da=performance.now(),ca.count++;pa=ma.count;ma.count=36;N=a.count;xa=ma.instances;
ma.instances=N;F=ma.primitive;ma.primitive=4;H=a.capSize;V=ya[5];ya[5]=H;ua=a.lineWidth;ea=ya[4];ya[4]=ua;Ca=a.opacity;qa=ya[10];ya[10]=Ca;Hb=a.range;ta=ya[18];ya[18]=Hb;Y=a.scale;ja=ya[6];ya[6]=Y;za=a.scaleFract;xd=ya[7];ya[7]=za;Ia=a.translate;Fa=ya[8];ya[8]=Ia;Dc=a.translateFract;ga=ya[9];ya[9]=Dc;Ib=ba.call(this,aa,a,c);Jb=ya[3];ya[3]=Ib;qc=w.buffer;w.buffer=u;Ob=w.divisor;w.divisor=0;jb=w.normalized;w.normalized=!1;Gb=w.offset;w.offset=16;Db=w.size;w.size=0;wb=w.state;w.state=1;hb=w.stride;w.stride=
24;Yb=w.type;w.type=5126;Pb=w.w;w.w=0;qb=w.x;w.x=0;Ua=w.y;w.y=0;Ub=w.z;w.z=0;zb=T.call(this,aa,a,c);$b.offset=zb;bc=!1;ib=null;pb=0;Ha=!1;Ka=rb=0;fb=1;gb=0;La=5126;sb=tb=Xa=kb=0;Aa($b)?(bc=!0,ib=J.createStream(34962,$b),La=ib.dtype):(ib=J.getBuffer($b))?La=ib.dtype:"constant"in $b?(fb=2,"number"===typeof $b.constant?(Xa=$b.constant,tb=sb=kb=0):(Xa=0<$b.constant.length?$b.constant[0]:0,tb=1<$b.constant.length?$b.constant[1]:0,sb=2<$b.constant.length?$b.constant[2]:0,kb=3<$b.constant.length?$b.constant[3]:
0)):(ib=Aa($b.buffer)?J.createStream(34962,$b.buffer):J.getBuffer($b.buffer),La="type"in $b?zd[$b.type]:ib.dtype,Ha=!!$b.normalized,Ka=$b.size|0,rb=$b.offset|0,gb=$b.stride|0,pb=$b.divisor|0);Oa=v.buffer;v.buffer=ib;Cc=v.divisor;v.divisor=pb;Qa=v.normalized;v.normalized=Ha;Kb=v.offset;v.offset=rb;Eb=v.size;v.size=Ka;Ma=v.state;v.state=fb;Z=v.stride;v.stride=gb;$a=v.type;v.type=La;Lb=v.w;v.w=kb;Mb=v.x;v.x=Xa;lb=v.y;v.y=tb;Na=v.z;v.z=sb;Zb=Q.buffer;Q.buffer=U;Pa=Q.divisor;Q.divisor=0;ub=Q.normalized;
Q.normalized=!1;vb=Q.offset;Q.offset=0;Sa=Q.size;Q.size=0;nb=Q.state;Q.state=1;gc=Q.stride;Q.stride=24;Ac=Q.type;Q.type=5126;vc=Q.w;Q.w=0;cb=Q.x;Q.x=0;jc=Q.y;Q.y=0;ad=Q.z;Q.z=0;Ya=ia.call(this,aa,a,c);Ga.offset=Ya;md=!1;Ab=null;ab=0;Vb=!1;Wb=sc=0;Qb=1;Kc=0;Rb=5126;Mc=td=Fc=Xd=0;Aa(Ga)?(md=!0,Ab=J.createStream(34962,Ga),Rb=Ab.dtype):(Ab=J.getBuffer(Ga))?Rb=Ab.dtype:"constant"in Ga?(Qb=2,"number"===typeof Ga.constant?(Fc=Ga.constant,td=Mc=Xd=0):(Fc=0<Ga.constant.length?Ga.constant[0]:0,td=1<Ga.constant.length?
Ga.constant[1]:0,Mc=2<Ga.constant.length?Ga.constant[2]:0,Xd=3<Ga.constant.length?Ga.constant[3]:0)):(Ab=Aa(Ga.buffer)?J.createStream(34962,Ga.buffer):J.getBuffer(Ga.buffer),Rb="type"in Ga?zd[Ga.type]:Ab.dtype,Vb=!!Ga.normalized,Wb=Ga.size|0,sc=Ga.offset|0,Kc=Ga.stride|0,ab=Ga.divisor|0);Wc=h.buffer;h.buffer=Ab;pd=h.divisor;h.divisor=ab;nc=h.normalized;h.normalized=Vb;wc=h.offset;h.offset=sc;hc=h.size;h.size=Wb;eb=h.state;h.state=Qb;rc=h.stride;h.stride=Kc;Tb=h.type;h.type=Rb;Xb=h.w;h.w=Xd;dc=h.x;
h.x=Fc;ic=h.y;h.y=td;yc=h.z;h.z=Mc;Bc=t.buffer;t.buffer=y;bd=t.divisor;t.divisor=0;Pc=t.normalized;t.normalized=!1;Qc=t.offset;t.offset=8;Rc=t.size;t.size=0;Xc=t.state;t.state=1;kd=t.stride;t.stride=24;cd=t.type;t.type=5126;Yc=t.w;t.w=0;kc=t.x;t.x=0;cc=t.y;t.y=0;Zc=t.z;t.z=0;Tc=S.call(this,aa,a,c);ac.offset=Tc;dd=!1;zc=null;gd=0;qd=!1;ze=Ee=0;hd=1;Re=0;Od=5126;Jd=Pd=pe=he=0;Aa(ac)?(dd=!0,zc=J.createStream(34962,ac),Od=zc.dtype):(zc=J.getBuffer(ac))?Od=zc.dtype:"constant"in ac?(hd=2,"number"===typeof ac.constant?
(pe=ac.constant,Pd=Jd=he=0):(pe=0<ac.constant.length?ac.constant[0]:0,Pd=1<ac.constant.length?ac.constant[1]:0,Jd=2<ac.constant.length?ac.constant[2]:0,he=3<ac.constant.length?ac.constant[3]:0)):(zc=Aa(ac.buffer)?J.createStream(34962,ac.buffer):J.getBuffer(ac.buffer),Od="type"in ac?zd[ac.type]:zc.dtype,qd=!!ac.normalized,ze=ac.size|0,Ee=ac.offset|0,Re=ac.stride|0,gd=ac.divisor|0);Hd=k.buffer;k.buffer=zc;nd=k.divisor;k.divisor=gd;Sc=k.normalized;k.normalized=qd;ud=k.offset;k.offset=Ee;sd=k.size;k.size=
ze;id=k.state;k.state=hd;wd=k.stride;k.stride=Re;Cd=k.type;k.type=Od;Ed=k.w;k.w=he;je=k.x;k.x=pe;we=k.y;k.y=Pd;Ra=k.z;k.z=Jd;le=X.call(this,aa,a,c);Sb.offset=le;ke=!1;ie=null;te=0;de=!1;Nc=me=0;fd=1;ue=0;qe=5126;Sd=Rd=Qd=Kd=0;Aa(Sb)?(ke=!0,ie=J.createStream(34962,Sb),qe=ie.dtype):(ie=J.getBuffer(Sb))?qe=ie.dtype:"constant"in Sb?(fd=2,"number"===typeof Sb.constant?(Qd=Sb.constant,Rd=Sd=Kd=0):(Qd=0<Sb.constant.length?Sb.constant[0]:0,Rd=1<Sb.constant.length?Sb.constant[1]:0,Sd=2<Sb.constant.length?
Sb.constant[2]:0,Kd=3<Sb.constant.length?Sb.constant[3]:0)):(ie=Aa(Sb.buffer)?J.createStream(34962,Sb.buffer):J.getBuffer(Sb.buffer),qe="type"in Sb?zd[Sb.type]:ie.dtype,de=!!Sb.normalized,Nc=Sb.size|0,me=Sb.offset|0,ue=Sb.stride|0,te=Sb.divisor|0);ne=f.buffer;f.buffer=ie;Ge=f.divisor;f.divisor=te;Ae=f.normalized;f.normalized=de;re=f.offset;f.offset=me;Se=f.size;f.size=Nc;Te=f.state;f.state=fd;Oe=f.stride;f.stride=ue;ve=f.type;f.type=qe;He=f.w;f.w=Kd;Je=f.x;f.x=Qd;Ke=f.y;f.y=Rd;Le=f.z;f.z=Sd;Ie=oa.vert;
oa.vert=2;Md=oa.frag;oa.frag=1;O.dirty=!0;d(aa,a,c);aa.viewportWidth=I;aa.viewportHeight=q;mb[0]=z;mb[1]=x;mb[2]=e;mb[3]=A;na[0]=sa;na[1]=Ja;na[2]=Ba;na[3]=P;ka.blend_enable=Za;Ta[0]=B;Ta[1]=R;n[0]=fa;n[1]=ha;n[2]=G;n[3]=la;ka.depth_enable=K;ra[0]=M;ra[1]=wa;ra[2]=Ea;ra[3]=p;ka.scissor_enable=C;da&&(ca.cpuTime+=performance.now()-Da);ma.count=pa;ma.instances=xa;ma.primitive=F;ya[5]=V;ya[4]=ea;ya[10]=qa;ya[18]=ta;ya[6]=ja;ya[7]=xd;ya[8]=Fa;ya[9]=ga;ya[3]=Jb;w.buffer=qc;w.divisor=Ob;w.normalized=jb;
w.offset=Gb;w.size=Db;w.state=wb;w.stride=hb;w.type=Yb;w.w=Pb;w.x=qb;w.y=Ua;w.z=Ub;bc&&J.destroyStream(ib);v.buffer=Oa;v.divisor=Cc;v.normalized=Qa;v.offset=Kb;v.size=Eb;v.state=Ma;v.stride=Z;v.type=$a;v.w=Lb;v.x=Mb;v.y=lb;v.z=Na;Q.buffer=Zb;Q.divisor=Pa;Q.normalized=ub;Q.offset=vb;Q.size=Sa;Q.state=nb;Q.stride=gc;Q.type=Ac;Q.w=vc;Q.x=cb;Q.y=jc;Q.z=ad;md&&J.destroyStream(Ab);h.buffer=Wc;h.divisor=pd;h.normalized=nc;h.offset=wc;h.size=hc;h.state=eb;h.stride=rc;h.type=Tb;h.w=Xb;h.x=dc;h.y=ic;h.z=yc;
t.buffer=Bc;t.divisor=bd;t.normalized=Pc;t.offset=Qc;t.size=Rc;t.state=Xc;t.stride=kd;t.type=cd;t.w=Yc;t.x=kc;t.y=cc;t.z=Zc;dd&&J.destroyStream(zc);k.buffer=Hd;k.divisor=nd;k.normalized=Sc;k.offset=ud;k.size=sd;k.state=id;k.stride=wd;k.type=Cd;k.w=Ed;k.x=je;k.y=we;k.z=Ra;ke&&J.destroyStream(ie);f.buffer=ne;f.divisor=Ge;f.normalized=Ae;f.offset=re;f.size=Se;f.state=Te;f.stride=Oe;f.type=ve;f.w=He;f.x=Je;f.y=Ke;f.z=Le;oa.vert=Ie;oa.frag=Md;O.dirty=!0}}},"$19,aCoord,aCoordFract,bCoord,bCoordFract,color,dashLength,dashTexture,depth,lineEnd,lineTop,opacity,scale,scaleFract,thickness,translate,translateFract,viewport":function(b,
ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja){var Dc,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,xd,Hb,ha,I,sa,Ba,ra,wa,Ea,la,W;Dc=b.attributes;V=b.buffer;ea=b.context;R=b.current;P=b.draw;B=b.elements;g=b.extensions;M=b.framebuffer;K=b.gl;Da=b.isBufferArgs;qa=b.next;m=b.shader;J=b.uniforms;aa=b.vao;O=qa.blend_color;ma=R.blend_color;pa=qa.blend_equation;za=R.blend_equation;xa=qa.blend_func;fa=R.blend_func;Aa=qa.colorMask;ka=R.colorMask;
oa=qa.depth_range;ya=R.depth_range;Ja=qa.polygonOffset_offset;na=R.polygonOffset_offset;Za=qa.sample_coverage;Ta=R.sample_coverage;r=qa.scissor_box;n=R.scissor_box;z=qa.stencil_func;va=R.stencil_func;Ca=qa.stencil_opBack;xd=R.stencil_opBack;Hb=qa.stencil_opFront;ha=R.stencil_opFront;I=qa.viewport;sa=R.viewport;Ba={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ra={divisor:1,offset:8,stride:8};wa={divisor:1,offset:8,stride:8};Ea={divisor:1,offset:16,stride:8};
la={divisor:1,offset:16,stride:8};W={divisor:1,offset:0,stride:4};return{batch:function(c,r){var m,b,I,q,J,w;m=M.next;m!==M.cur&&(m?K.bindFramebuffer(36160,m.framebuffer):K.bindFramebuffer(36160,null),M.cur=m);if(R.dirty){var O,L,u,y,p,C,pa,N,xa,F,H,U,ba,ga,ae,Be,Ze,$e,Gd,ye,se,Zd,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc;O=qa.dither;O!==R.dither&&(O?K.enable(3024):K.disable(3024),R.dither=O);L=qa.depth_func;L!==R.depth_func&&(K.depthFunc(L),R.depth_func=L);u=oa[0];y=oa[1];if(u!==ya[0]||y!==ya[1])K.depthRange(u,
y),ya[0]=u,ya[1]=y;p=qa.depth_mask;p!==R.depth_mask&&(K.depthMask(p),R.depth_mask=p);C=Aa[0];pa=Aa[1];N=Aa[2];xa=Aa[3];if(C!==ka[0]||pa!==ka[1]||N!==ka[2]||xa!==ka[3])K.colorMask(C,pa,N,xa),ka[0]=C,ka[1]=pa,ka[2]=N,ka[3]=xa;F=qa.cull_enable;F!==R.cull_enable&&(F?K.enable(2884):K.disable(2884),R.cull_enable=F);H=qa.cull_face;H!==R.cull_face&&(K.cullFace(H),R.cull_face=H);U=qa.frontFace;U!==R.frontFace&&(K.frontFace(U),R.frontFace=U);ba=qa.lineWidth;ba!==R.lineWidth&&(K.lineWidth(ba),R.lineWidth=ba);
ga=qa.polygonOffset_enable;ga!==R.polygonOffset_enable&&(ga?K.enable(32823):K.disable(32823),R.polygonOffset_enable=ga);ae=Ja[0];Be=Ja[1];if(ae!==na[0]||Be!==na[1])K.polygonOffset(ae,Be),na[0]=ae,na[1]=Be;Ze=qa.sample_alpha;Ze!==R.sample_alpha&&(Ze?K.enable(32926):K.disable(32926),R.sample_alpha=Ze);$e=qa.sample_enable;$e!==R.sample_enable&&($e?K.enable(32928):K.disable(32928),R.sample_enable=$e);Gd=Za[0];ye=Za[1];if(Gd!==Ta[0]||ye!==Ta[1])K.sampleCoverage(Gd,ye),Ta[0]=Gd,Ta[1]=ye;se=qa.stencil_mask;
se!==R.stencil_mask&&(K.stencilMask(se),R.stencil_mask=se);Zd=z[0];Wd=z[1];Bd=z[2];if(Zd!==va[0]||Wd!==va[1]||Bd!==va[2])K.stencilFunc(Zd,Wd,Bd),va[0]=Zd,va[1]=Wd,va[2]=Bd;ld=Hb[0];$c=Hb[1];rd=Hb[2];Lc=Hb[3];if(ld!==ha[0]||$c!==ha[1]||rd!==ha[2]||Lc!==ha[3])K.stencilOpSeparate(ld,$c,rd,Lc),ha[0]=ld,ha[1]=$c,ha[2]=rd,ha[3]=Lc;od=Ca[0];Gc=Ca[1];ed=Ca[2];Oc=Ca[3];if(od!==xd[0]||Gc!==xd[1]||ed!==xd[2]||Oc!==xd[3])K.stencilOpSeparate(od,Gc,ed,Oc),xd[0]=od,xd[1]=Gc,xd[2]=ed,xd[3]=Oc}K.blendColor(0,0,0,
0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;K.enable(3042);R.blend_enable=!0;K.blendEquationSeparate(32774,32774);za[0]=32774;za[1]=32774;K.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;K.enable(3089);R.scissor_enable=!0;K.disable(2960);R.stencil_enable=!1;if(b=R.profile)I=performance.now(),ca.count+=r;K.useProgram(T.program);q=g.angle_instanced_arrays;var jd,Bb,Fb,tc,xb;aa.setVAO(null);jd=Y.location;Bb=Dc[jd];Bb.buffer||K.enableVertexAttribArray(jd);if(5126!==Bb.type||1!==Bb.size||
Bb.buffer!==e||!1!==Bb.normalized||0!==Bb.offset||8!==Bb.stride)K.bindBuffer(34962,e.buffer),K.vertexAttribPointer(jd,1,5126,!1,8,0),Bb.type=5126,Bb.size=1,Bb.buffer=e,Bb.normalized=!1,Bb.offset=0,Bb.stride=8;0!==Bb.divisor&&(q.vertexAttribDivisorANGLE(jd,0),Bb.divisor=0);Fb=D.location;tc=Dc[Fb];tc.buffer||K.enableVertexAttribArray(Fb);if(5126!==tc.type||1!==tc.size||tc.buffer!==l||!1!==tc.normalized||4!==tc.offset||8!==tc.stride)K.bindBuffer(34962,l.buffer),K.vertexAttribPointer(Fb,1,5126,!1,8,4),
tc.type=5126,tc.size=1,tc.buffer=l,tc.normalized=!1,tc.offset=4,tc.stride=8;0!==tc.divisor&&(q.vertexAttribDivisorANGLE(Fb,0),tc.divisor=0);(xb=P.elements)?K.bindBuffer(34963,xb.buffer.buffer):aa.currentVAO&&(xb=B.getElements(aa.currentVAO.elements))&&K.bindBuffer(34963,xb.buffer.buffer);for(J=0;J<r;++J){w=c[J];var xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,Z,$a,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id;xc=w.viewport;Cb=xc.x|0;Jc=xc.y|0;lc="width"in xc?xc.width|0:ea.framebufferWidth-Cb;Hc="height"in xc?xc.height|0:ea.framebufferHeight-Jc;Vc=ea.viewportWidth;ea.viewportWidth=lc;Uc=ea.viewportHeight;ea.viewportHeight=Hc;K.viewport(Cb,Jc,lc,Hc);sa[0]=Cb;sa[1]=Jc;sa[2]=lc;sa[3]=Hc;(Ec=v.call(this,
ea,w,J))?K.enable(2929):K.disable(2929);R.depth_enable=Ec;ec=w.viewport;Ic=ec.x|0;oc=ec.y|0;pc="width"in ec?ec.width|0:ea.framebufferWidth-Ic;mc="height"in ec?ec.height|0:ea.framebufferHeight-oc;K.scissor(Ic,oc,pc,mc);n[0]=Ic;n[1]=oc;n[2]=pc;n[3]=mc;ra.buffer=w.positionBuffer;fc=!1;Va=null;uc=0;yb=!1;Nb=db=0;bb=1;ob=0;Wa=5126;qc=Jb=Ib=Ld=0;Da(ra)?(fc=!0,Va=V.createStream(34962,ra),Wa=Va.dtype):(Va=V.getBuffer(ra))?Wa=Va.dtype:"constant"in ra?(bb=2,"number"===typeof ra.constant?(Ib=ra.constant,Jb=
qc=Ld=0):(Ib=0<ra.constant.length?ra.constant[0]:0,Jb=1<ra.constant.length?ra.constant[1]:0,qc=2<ra.constant.length?ra.constant[2]:0,Ld=3<ra.constant.length?ra.constant[3]:0)):(Va=Da(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Wa="type"in ra?Ba[ra.type]:Va.dtype,yb=!!ra.normalized,Nb=ra.size|0,db=ra.offset|0,ob=ra.stride|0,uc=ra.divisor|0);Ob=ia.location;jb=Dc[Ob];if(1===bb){jb.buffer||K.enableVertexAttribArray(Ob);Gb=Nb||2;if(jb.type!==Wa||jb.size!==Gb||jb.buffer!==Va||jb.normalized!==
yb||jb.offset!==db||jb.stride!==ob)K.bindBuffer(34962,Va.buffer),K.vertexAttribPointer(Ob,Gb,Wa,yb,ob,db),jb.type=Wa,jb.size=Gb,jb.buffer=Va,jb.normalized=yb,jb.offset=db,jb.stride=ob;jb.divisor!==uc&&(q.vertexAttribDivisorANGLE(Ob,uc),jb.divisor=uc)}else if(jb.buffer&&(K.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==qc||jb.w!==Ld)K.vertexAttrib4f(Ob,Ib,Jb,qc,Ld),jb.x=Ib,jb.y=Jb,jb.z=qc,jb.w=Ld;Ea.buffer=w.positionBuffer;Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ua=1;Ub=0;zb=5126;
Ha=pb=ib=bc=0;Da(Ea)?(Db=!0,wb=V.createStream(34962,Ea),zb=wb.dtype):(wb=V.getBuffer(Ea))?zb=wb.dtype:"constant"in Ea?(Ua=2,"number"===typeof Ea.constant?(ib=Ea.constant,pb=Ha=bc=0):(ib=0<Ea.constant.length?Ea.constant[0]:0,pb=1<Ea.constant.length?Ea.constant[1]:0,Ha=2<Ea.constant.length?Ea.constant[2]:0,bc=3<Ea.constant.length?Ea.constant[3]:0)):(wb=Da(Ea.buffer)?V.createStream(34962,Ea.buffer):V.getBuffer(Ea.buffer),zb="type"in Ea?Ba[Ea.type]:wb.dtype,Yb=!!Ea.normalized,qb=Ea.size|0,Pb=Ea.offset|
0,Ub=Ea.stride|0,hb=Ea.divisor|0);rb=t.location;Ka=Dc[rb];if(1===Ua){Ka.buffer||K.enableVertexAttribArray(rb);fb=qb||2;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)K.bindBuffer(34962,wb.buffer),K.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(q.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&(K.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==
ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==bc)K.vertexAttrib4f(rb,ib,pb,Ha,bc),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=bc;wa.buffer=w.positionFractBuffer;gb=!1;La=null;kb=0;Xa=!1;sb=tb=0;Oa=1;Cc=0;Qa=5126;Z=Ma=Eb=Kb=0;Da(wa)?(gb=!0,La=V.createStream(34962,wa),Qa=La.dtype):(La=V.getBuffer(wa))?Qa=La.dtype:"constant"in wa?(Oa=2,"number"===typeof wa.constant?(Eb=wa.constant,Ma=Z=Kb=0):(Eb=0<wa.constant.length?wa.constant[0]:0,Ma=1<wa.constant.length?wa.constant[1]:0,Z=2<wa.constant.length?wa.constant[2]:0,Kb=3<wa.constant.length?
wa.constant[3]:0)):(La=Da(wa.buffer)?V.createStream(34962,wa.buffer):V.getBuffer(wa.buffer),Qa="type"in wa?Ba[wa.type]:La.dtype,Xa=!!wa.normalized,sb=wa.size|0,tb=wa.offset|0,Cc=wa.stride|0,kb=wa.divisor|0);$a=h.location;Lb=Dc[$a];if(1===Oa){Lb.buffer||K.enableVertexAttribArray($a);Mb=sb||2;if(Lb.type!==Qa||Lb.size!==Mb||Lb.buffer!==La||Lb.normalized!==Xa||Lb.offset!==tb||Lb.stride!==Cc)K.bindBuffer(34962,La.buffer),K.vertexAttribPointer($a,Mb,Qa,Xa,Cc,tb),Lb.type=Qa,Lb.size=Mb,Lb.buffer=La,Lb.normalized=
Xa,Lb.offset=tb,Lb.stride=Cc;Lb.divisor!==kb&&(q.vertexAttribDivisorANGLE($a,kb),Lb.divisor=kb)}else if(Lb.buffer&&(K.disableVertexAttribArray($a),Lb.buffer=null),Lb.x!==Eb||Lb.y!==Ma||Lb.z!==Z||Lb.w!==Kb)K.vertexAttrib4f($a,Eb,Ma,Z,Kb),Lb.x=Eb,Lb.y=Ma,Lb.z=Z,Lb.w=Kb;la.buffer=w.positionFractBuffer;lb=!1;Na=null;Zb=0;Pa=!1;vb=ub=0;Sa=1;nb=0;gc=5126;jc=cb=vc=Ac=0;Da(la)?(lb=!0,Na=V.createStream(34962,la),gc=Na.dtype):(Na=V.getBuffer(la))?gc=Na.dtype:"constant"in la?(Sa=2,"number"===typeof la.constant?
(vc=la.constant,cb=jc=Ac=0):(vc=0<la.constant.length?la.constant[0]:0,cb=1<la.constant.length?la.constant[1]:0,jc=2<la.constant.length?la.constant[2]:0,Ac=3<la.constant.length?la.constant[3]:0)):(Na=Da(la.buffer)?V.createStream(34962,la.buffer):V.getBuffer(la.buffer),gc="type"in la?Ba[la.type]:Na.dtype,Pa=!!la.normalized,vb=la.size|0,ub=la.offset|0,nb=la.stride|0,Zb=la.divisor|0);ad=S.location;Ya=Dc[ad];if(1===Sa){Ya.buffer||K.enableVertexAttribArray(ad);md=vb||2;if(Ya.type!==gc||Ya.size!==md||Ya.buffer!==
Na||Ya.normalized!==Pa||Ya.offset!==ub||Ya.stride!==nb)K.bindBuffer(34962,Na.buffer),K.vertexAttribPointer(ad,md,gc,Pa,nb,ub),Ya.type=gc,Ya.size=md,Ya.buffer=Na,Ya.normalized=Pa,Ya.offset=ub,Ya.stride=nb;Ya.divisor!==Zb&&(q.vertexAttribDivisorANGLE(ad,Zb),Ya.divisor=Zb)}else if(Ya.buffer&&(K.disableVertexAttribArray(ad),Ya.buffer=null),Ya.x!==vc||Ya.y!==cb||Ya.z!==jc||Ya.w!==Ac)K.vertexAttrib4f(ad,vc,cb,jc,Ac),Ya.x=vc,Ya.y=cb,Ya.z=jc,Ya.w=Ac;W.buffer=w.colorBuffer;Ab=!1;ab=null;Vb=0;sc=!1;Qb=Wb=0;
Kc=1;Rb=0;Xd=5126;Wc=Mc=td=Fc=0;Da(W)?(Ab=!0,ab=V.createStream(34962,W),Xd=ab.dtype):(ab=V.getBuffer(W))?Xd=ab.dtype:"constant"in W?(Kc=2,"number"===typeof W.constant?(td=W.constant,Mc=Wc=Fc=0):(td=0<W.constant.length?W.constant[0]:0,Mc=1<W.constant.length?W.constant[1]:0,Wc=2<W.constant.length?W.constant[2]:0,Fc=3<W.constant.length?W.constant[3]:0)):(ab=Da(W.buffer)?V.createStream(34962,W.buffer):V.getBuffer(W.buffer),Xd="type"in W?Ba[W.type]:ab.dtype,sc=!!W.normalized,Qb=W.size|0,Wb=W.offset|0,
Rb=W.stride|0,Vb=W.divisor|0);pd=k.location;nc=Dc[pd];if(1===Kc){nc.buffer||K.enableVertexAttribArray(pd);wc=Qb||4;if(nc.type!==Xd||nc.size!==wc||nc.buffer!==ab||nc.normalized!==sc||nc.offset!==Wb||nc.stride!==Rb)K.bindBuffer(34962,ab.buffer),K.vertexAttribPointer(pd,wc,Xd,sc,Rb,Wb),nc.type=Xd,nc.size=wc,nc.buffer=ab,nc.normalized=sc,nc.offset=Wb,nc.stride=Rb;nc.divisor!==Vb&&(q.vertexAttribDivisorANGLE(pd,Vb),nc.divisor=Vb)}else if(nc.buffer&&(K.disableVertexAttribArray(pd),nc.buffer=null),nc.x!==
td||nc.y!==Mc||nc.z!==Wc||nc.w!==Fc)K.vertexAttrib4f(pd,td,Mc,Wc,Fc),nc.x=td,nc.y=Mc,nc.z=Wc,nc.w=Fc;hc=w.scale;eb=hc[0];Tb=hc[1];J&&rc===eb&&Xb===Tb||(rc=eb,Xb=Tb,K.uniform2f(d.location,eb,Tb));dc=w.scaleFract;ic=dc[0];Bc=dc[1];J&&yc===ic&&bd===Bc||(yc=ic,bd=Bc,K.uniform2f(G.location,ic,Bc));Pc=w.translate;Qc=Pc[0];Xc=Pc[1];J&&Rc===Qc&&kd===Xc||(Rc=Qc,kd=Xc,K.uniform2f(ta.location,Qc,Xc));cd=w.translateFract;Yc=cd[0];cc=cd[1];J&&kc===Yc&&Zc===cc||(kc=Yc,Zc=cc,K.uniform2f(A.location,Yc,cc));Tc=w.thickness;
J&&dd===Tc||(dd=Tc,K.uniform1f(a.location,Tc));zc=w.depth;J&&gd===zc||(gd=zc,K.uniform1f(x.location,zc));qd=Q.call(this,ea,w,J);Ee=qd[0];hd=qd[1];Od=qd[2];pe=qd[3];J&&ze===Ee&&Re===hd&&he===Od&&Pd===pe||(ze=Ee,Re=hd,he=Od,Pd=pe,K.uniform4f(ja.location,Ee,hd,Od,pe));Jd=w.dashLength;J&&Hd===Jd||(Hd=Jd,K.uniform1f(X.location,Jd));nd=w.opacity;J&&Sc===nd||(Sc=nd,K.uniform1f(E.location,nd));(ud=w.dashTexture)&&"framebuffer"===ud._reglType&&(ud=ud.color[0]);sd=ud._texture;K.uniform1i(f.location,sd.bind());
id=w.count;0<id?xb?q.drawElementsInstancedANGLE(5,4,xb.type,0<<(xb.type-5121>>1),id):q.drawArraysInstancedANGLE(5,0,4,id):0>id&&(xb?K.drawElements(5,4,xb.type,0<<(xb.type-5121>>1)):K.drawArrays(5,0,4));ea.viewportWidth=Vc;ea.viewportHeight=Uc;fc&&V.destroyStream(Va);Db&&V.destroyStream(wb);gb&&V.destroyStream(La);lb&&V.destroyStream(Na);Ab&&V.destroyStream(ab);sd.unbind()}R.dirty=!0;aa.setVAO(null);b&&(ca.cpuTime+=performance.now()-I)},draw:function(c){var r,m,b,I,J,w,O,u,v,y,p,C,pa,xa,Q,F,H,T,U,
ba,ga,ae,Be,Ze,$e,Gd,ye,se,Zd,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Z,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub;r=M.next;r!==M.cur&&(r?K.bindFramebuffer(36160,r.framebuffer):K.bindFramebuffer(36160,null),M.cur=r);if(R.dirty){var vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb;vb=qa.dither;vb!==
R.dither&&(vb?K.enable(3024):K.disable(3024),R.dither=vb);Sa=qa.depth_func;Sa!==R.depth_func&&(K.depthFunc(Sa),R.depth_func=Sa);nb=oa[0];gc=oa[1];if(nb!==ya[0]||gc!==ya[1])K.depthRange(nb,gc),ya[0]=nb,ya[1]=gc;Ac=qa.depth_mask;Ac!==R.depth_mask&&(K.depthMask(Ac),R.depth_mask=Ac);vc=Aa[0];cb=Aa[1];jc=Aa[2];ad=Aa[3];if(vc!==ka[0]||cb!==ka[1]||jc!==ka[2]||ad!==ka[3])K.colorMask(vc,cb,jc,ad),ka[0]=vc,ka[1]=cb,ka[2]=jc,ka[3]=ad;Ya=qa.cull_enable;Ya!==R.cull_enable&&(Ya?K.enable(2884):K.disable(2884),R.cull_enable=
Ya);md=qa.cull_face;md!==R.cull_face&&(K.cullFace(md),R.cull_face=md);Ab=qa.frontFace;Ab!==R.frontFace&&(K.frontFace(Ab),R.frontFace=Ab);ab=qa.lineWidth;ab!==R.lineWidth&&(K.lineWidth(ab),R.lineWidth=ab);Vb=qa.polygonOffset_enable;Vb!==R.polygonOffset_enable&&(Vb?K.enable(32823):K.disable(32823),R.polygonOffset_enable=Vb);sc=Ja[0];Wb=Ja[1];if(sc!==na[0]||Wb!==na[1])K.polygonOffset(sc,Wb),na[0]=sc,na[1]=Wb;Qb=qa.sample_alpha;Qb!==R.sample_alpha&&(Qb?K.enable(32926):K.disable(32926),R.sample_alpha=
Qb);Kc=qa.sample_enable;Kc!==R.sample_enable&&(Kc?K.enable(32928):K.disable(32928),R.sample_enable=Kc);Rb=Za[0];Xd=Za[1];if(Rb!==Ta[0]||Xd!==Ta[1])K.sampleCoverage(Rb,Xd),Ta[0]=Rb,Ta[1]=Xd;Fc=qa.stencil_mask;Fc!==R.stencil_mask&&(K.stencilMask(Fc),R.stencil_mask=Fc);td=z[0];Mc=z[1];Wc=z[2];if(td!==va[0]||Mc!==va[1]||Wc!==va[2])K.stencilFunc(td,Mc,Wc),va[0]=td,va[1]=Mc,va[2]=Wc;pd=Hb[0];nc=Hb[1];wc=Hb[2];hc=Hb[3];if(pd!==ha[0]||nc!==ha[1]||wc!==ha[2]||hc!==ha[3])K.stencilOpSeparate(pd,nc,wc,hc),ha[0]=
pd,ha[1]=nc,ha[2]=wc,ha[3]=hc;eb=Ca[0];rc=Ca[1];Tb=Ca[2];Xb=Ca[3];if(eb!==xd[0]||rc!==xd[1]||Tb!==xd[2]||Xb!==xd[3])K.stencilOpSeparate(eb,rc,Tb,Xb),xd[0]=eb,xd[1]=rc,xd[2]=Tb,xd[3]=Xb}m=c.viewport;b=m.x|0;I=m.y|0;J="width"in m?m.width|0:ea.framebufferWidth-b;w="height"in m?m.height|0:ea.framebufferHeight-I;O=ea.viewportWidth;ea.viewportWidth=J;u=ea.viewportHeight;ea.viewportHeight=w;K.viewport(b,I,J,w);sa[0]=b;sa[1]=I;sa[2]=J;sa[3]=w;K.blendColor(0,0,0,0);ma[0]=0;ma[1]=0;ma[2]=0;ma[3]=0;K.enable(3042);
R.blend_enable=!0;K.blendEquationSeparate(32774,32774);za[0]=32774;za[1]=32774;K.blendFuncSeparate(770,771,773,1);fa[0]=770;fa[1]=771;fa[2]=773;fa[3]=1;(v=N.call(this,ea,c,0))?K.enable(2929):K.disable(2929);R.depth_enable=v;y=c.viewport;p=y.x|0;C=y.y|0;pa="width"in y?y.width|0:ea.framebufferWidth-p;xa="height"in y?y.height|0:ea.framebufferHeight-C;K.scissor(p,C,pa,xa);n[0]=p;n[1]=C;n[2]=pa;n[3]=xa;K.enable(3089);R.scissor_enable=!0;K.disable(2960);R.stencil_enable=!1;if(Q=R.profile)F=performance.now(),
ca.count++;K.useProgram(L.program);H=g.angle_instanced_arrays;aa.setVAO(null);ra.buffer=c.positionBuffer;T=!1;U=null;ba=0;ga=!1;Be=ae=0;Ze=1;$e=0;Gd=5126;Wd=Zd=se=ye=0;Da(ra)?(T=!0,U=V.createStream(34962,ra),Gd=U.dtype):(U=V.getBuffer(ra))?Gd=U.dtype:"constant"in ra?(Ze=2,"number"===typeof ra.constant?(se=ra.constant,Zd=Wd=ye=0):(se=0<ra.constant.length?ra.constant[0]:0,Zd=1<ra.constant.length?ra.constant[1]:0,Wd=2<ra.constant.length?ra.constant[2]:0,ye=3<ra.constant.length?ra.constant[3]:0)):(U=
Da(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Gd="type"in ra?Ba[ra.type]:U.dtype,ga=!!ra.normalized,Be=ra.size|0,ae=ra.offset|0,$e=ra.stride|0,ba=ra.divisor|0);Bd=ia.location;ld=Dc[Bd];if(1===Ze){ld.buffer||K.enableVertexAttribArray(Bd);$c=Be||2;if(ld.type!==Gd||ld.size!==$c||ld.buffer!==U||ld.normalized!==ga||ld.offset!==ae||ld.stride!==$e)K.bindBuffer(34962,U.buffer),K.vertexAttribPointer(Bd,$c,Gd,ga,$e,ae),ld.type=Gd,ld.size=$c,ld.buffer=U,ld.normalized=ga,ld.offset=ae,ld.stride=
$e;ld.divisor!==ba&&(H.vertexAttribDivisorANGLE(Bd,ba),ld.divisor=ba)}else if(ld.buffer&&(K.disableVertexAttribArray(Bd),ld.buffer=null),ld.x!==se||ld.y!==Zd||ld.z!==Wd||ld.w!==ye)K.vertexAttrib4f(Bd,se,Zd,Wd,ye),ld.x=se,ld.y=Zd,ld.z=Wd,ld.w=ye;Ea.buffer=c.positionBuffer;rd=!1;Lc=null;od=0;Gc=!1;Oc=ed=0;jd=1;Bb=0;Fb=5126;Cb=xc=xb=tc=0;Da(Ea)?(rd=!0,Lc=V.createStream(34962,Ea),Fb=Lc.dtype):(Lc=V.getBuffer(Ea))?Fb=Lc.dtype:"constant"in Ea?(jd=2,"number"===typeof Ea.constant?(xb=Ea.constant,xc=Cb=tc=
0):(xb=0<Ea.constant.length?Ea.constant[0]:0,xc=1<Ea.constant.length?Ea.constant[1]:0,Cb=2<Ea.constant.length?Ea.constant[2]:0,tc=3<Ea.constant.length?Ea.constant[3]:0)):(Lc=Da(Ea.buffer)?V.createStream(34962,Ea.buffer):V.getBuffer(Ea.buffer),Fb="type"in Ea?Ba[Ea.type]:Lc.dtype,Gc=!!Ea.normalized,Oc=Ea.size|0,ed=Ea.offset|0,Bb=Ea.stride|0,od=Ea.divisor|0);Jc=t.location;lc=Dc[Jc];if(1===jd){lc.buffer||K.enableVertexAttribArray(Jc);Hc=Oc||2;if(lc.type!==Fb||lc.size!==Hc||lc.buffer!==Lc||lc.normalized!==
Gc||lc.offset!==ed||lc.stride!==Bb)K.bindBuffer(34962,Lc.buffer),K.vertexAttribPointer(Jc,Hc,Fb,Gc,Bb,ed),lc.type=Fb,lc.size=Hc,lc.buffer=Lc,lc.normalized=Gc,lc.offset=ed,lc.stride=Bb;lc.divisor!==od&&(H.vertexAttribDivisorANGLE(Jc,od),lc.divisor=od)}else if(lc.buffer&&(K.disableVertexAttribArray(Jc),lc.buffer=null),lc.x!==xb||lc.y!==xc||lc.z!==Cb||lc.w!==tc)K.vertexAttrib4f(Jc,xb,xc,Cb,tc),lc.x=xb,lc.y=xc,lc.z=Cb,lc.w=tc;wa.buffer=c.positionFractBuffer;Vc=!1;Uc=null;Ec=0;ec=!1;oc=Ic=0;pc=1;mc=0;
fc=5126;db=yb=uc=Va=0;Da(wa)?(Vc=!0,Uc=V.createStream(34962,wa),fc=Uc.dtype):(Uc=V.getBuffer(wa))?fc=Uc.dtype:"constant"in wa?(pc=2,"number"===typeof wa.constant?(uc=wa.constant,yb=db=Va=0):(uc=0<wa.constant.length?wa.constant[0]:0,yb=1<wa.constant.length?wa.constant[1]:0,db=2<wa.constant.length?wa.constant[2]:0,Va=3<wa.constant.length?wa.constant[3]:0)):(Uc=Da(wa.buffer)?V.createStream(34962,wa.buffer):V.getBuffer(wa.buffer),fc="type"in wa?Ba[wa.type]:Uc.dtype,ec=!!wa.normalized,oc=wa.size|0,Ic=
wa.offset|0,mc=wa.stride|0,Ec=wa.divisor|0);Nb=h.location;bb=Dc[Nb];if(1===pc){bb.buffer||K.enableVertexAttribArray(Nb);ob=oc||2;if(bb.type!==fc||bb.size!==ob||bb.buffer!==Uc||bb.normalized!==ec||bb.offset!==Ic||bb.stride!==mc)K.bindBuffer(34962,Uc.buffer),K.vertexAttribPointer(Nb,ob,fc,ec,mc,Ic),bb.type=fc,bb.size=ob,bb.buffer=Uc,bb.normalized=ec,bb.offset=Ic,bb.stride=mc;bb.divisor!==Ec&&(H.vertexAttribDivisorANGLE(Nb,Ec),bb.divisor=Ec)}else if(bb.buffer&&(K.disableVertexAttribArray(Nb),bb.buffer=
null),bb.x!==uc||bb.y!==yb||bb.z!==db||bb.w!==Va)K.vertexAttrib4f(Nb,uc,yb,db,Va),bb.x=uc,bb.y=yb,bb.z=db,bb.w=Va;la.buffer=c.positionFractBuffer;Wa=!1;Z=null;Ib=0;Jb=!1;Ob=qc=0;jb=1;Gb=0;Db=5126;Pb=Yb=hb=wb=0;Da(la)?(Wa=!0,Z=V.createStream(34962,la),Db=Z.dtype):(Z=V.getBuffer(la))?Db=Z.dtype:"constant"in la?(jb=2,"number"===typeof la.constant?(hb=la.constant,Yb=Pb=wb=0):(hb=0<la.constant.length?la.constant[0]:0,Yb=1<la.constant.length?la.constant[1]:0,Pb=2<la.constant.length?la.constant[2]:0,wb=
3<la.constant.length?la.constant[3]:0)):(Z=Da(la.buffer)?V.createStream(34962,la.buffer):V.getBuffer(la.buffer),Db="type"in la?Ba[la.type]:Z.dtype,Jb=!!la.normalized,Ob=la.size|0,qc=la.offset|0,Gb=la.stride|0,Ib=la.divisor|0);qb=S.location;Ua=Dc[qb];if(1===jb){Ua.buffer||K.enableVertexAttribArray(qb);Ub=Ob||2;if(Ua.type!==Db||Ua.size!==Ub||Ua.buffer!==Z||Ua.normalized!==Jb||Ua.offset!==qc||Ua.stride!==Gb)K.bindBuffer(34962,Z.buffer),K.vertexAttribPointer(qb,Ub,Db,Jb,Gb,qc),Ua.type=Db,Ua.size=Ub,Ua.buffer=
Z,Ua.normalized=Jb,Ua.offset=qc,Ua.stride=Gb;Ua.divisor!==Ib&&(H.vertexAttribDivisorANGLE(qb,Ib),Ua.divisor=Ib)}else if(Ua.buffer&&(K.disableVertexAttribArray(qb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Yb||Ua.z!==Pb||Ua.w!==wb)K.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ua.x=hb,Ua.y=Yb,Ua.z=Pb,Ua.w=wb;W.buffer=c.colorBuffer;zb=!1;bc=null;ib=0;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Xa=kb=La=0;Da(W)?(zb=!0,bc=V.createStream(34962,W),gb=bc.dtype):(bc=V.getBuffer(W))?gb=bc.dtype:"constant"in W?(Ka=2,"number"===typeof W.constant?
(kb=W.constant,Xa=tb=La=0):(kb=0<W.constant.length?W.constant[0]:0,Xa=1<W.constant.length?W.constant[1]:0,tb=2<W.constant.length?W.constant[2]:0,La=3<W.constant.length?W.constant[3]:0)):(bc=Da(W.buffer)?V.createStream(34962,W.buffer):V.getBuffer(W.buffer),gb="type"in W?Ba[W.type]:bc.dtype,pb=!!W.normalized,rb=W.size|0,Ha=W.offset|0,fb=W.stride|0,ib=W.divisor|0);sb=k.location;Oa=Dc[sb];if(1===Ka){Oa.buffer||K.enableVertexAttribArray(sb);Cc=rb||4;if(Oa.type!==gb||Oa.size!==Cc||Oa.buffer!==bc||Oa.normalized!==
pb||Oa.offset!==Ha||Oa.stride!==fb)K.bindBuffer(34962,bc.buffer),K.vertexAttribPointer(sb,Cc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=Cc,Oa.buffer=bc,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb;Oa.divisor!==ib&&(H.vertexAttribDivisorANGLE(sb,ib),Oa.divisor=ib)}else if(Oa.buffer&&(K.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Xa||Oa.z!==tb||Oa.w!==La)K.vertexAttrib4f(sb,kb,Xa,tb,La),Oa.x=kb,Oa.y=Xa,Oa.z=tb,Oa.w=La;Qa=Y.location;Kb=Dc[Qa];Kb.buffer||K.enableVertexAttribArray(Qa);if(5126!==
Kb.type||1!==Kb.size||Kb.buffer!==e||!1!==Kb.normalized||0!==Kb.offset||8!==Kb.stride)K.bindBuffer(34962,e.buffer),K.vertexAttribPointer(Qa,1,5126,!1,8,0),Kb.type=5126,Kb.size=1,Kb.buffer=e,Kb.normalized=!1,Kb.offset=0,Kb.stride=8;0!==Kb.divisor&&(H.vertexAttribDivisorANGLE(Qa,0),Kb.divisor=0);Eb=D.location;Ma=Dc[Eb];Ma.buffer||K.enableVertexAttribArray(Eb);if(5126!==Ma.type||1!==Ma.size||Ma.buffer!==l||!1!==Ma.normalized||4!==Ma.offset||8!==Ma.stride)K.bindBuffer(34962,l.buffer),K.vertexAttribPointer(Eb,
1,5126,!1,8,4),Ma.type=5126,Ma.size=1,Ma.buffer=l,Ma.normalized=!1,Ma.offset=4,Ma.stride=8;0!==Ma.divisor&&(H.vertexAttribDivisorANGLE(Eb,0),Ma.divisor=0);vd=c.scale;K.uniform2f(d.location,vd[0],vd[1]);$a=c.scaleFract;K.uniform2f(G.location,$a[0],$a[1]);Lb=c.translate;K.uniform2f(ta.location,Lb[0],Lb[1]);Mb=c.translateFract;K.uniform2f(A.location,Mb[0],Mb[1]);K.uniform1f(a.location,c.thickness);K.uniform1f(x.location,c.depth);lb=q.call(this,ea,c,0);K.uniform4f(ja.location,lb[0],lb[1],lb[2],lb[3]);
K.uniform1f(X.location,c.dashLength);K.uniform1f(E.location,c.opacity);(Na=c.dashTexture)&&"framebuffer"===Na._reglType&&(Na=Na.color[0]);Zb=Na._texture;K.uniform1i(f.location,Zb.bind());(Pa=P.elements)?K.bindBuffer(34963,Pa.buffer.buffer):aa.currentVAO&&(Pa=B.getElements(aa.currentVAO.elements))&&K.bindBuffer(34963,Pa.buffer.buffer);ub=c.count;0<ub?Pa?H.drawElementsInstancedANGLE(5,4,Pa.type,0<<(Pa.type-5121>>1),ub):H.drawArraysInstancedANGLE(5,0,4,ub):0>ub&&(Pa?K.drawElements(5,4,Pa.type,0<<(Pa.type-
5121>>1)):K.drawArrays(5,0,4));R.dirty=!0;aa.setVAO(null);ea.viewportWidth=O;ea.viewportHeight=u;Q&&(ca.cpuTime+=performance.now()-F);T&&V.destroyStream(U);rd&&V.destroyStream(Lc);Vc&&V.destroyStream(Uc);Wa&&V.destroyStream(Z);zb&&V.destroyStream(bc);Zb.unbind()},scope:function(a,d,g){var f,h,k,b,n,q,z,t,na,x,A,sa,Ja,Za,B,fa,ha,G,D,K,L,E,va,M,aa,v,N,S,Q,T,ka,Ta,X,ya,oa,Ca,Aa,Hb,ia,ma,ta,Y,ja,za,xd,Dc,ga,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Z,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,
zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,Ra,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe;f=a.viewport;h=f.x|0;k=f.y|0;b="width"in f?f.width|0:ea.framebufferWidth-h;
n="height"in f?f.height|0:ea.framebufferHeight-k;q=ea.viewportWidth;ea.viewportWidth=b;z=ea.viewportHeight;ea.viewportHeight=n;t=I[0];I[0]=h;na=I[1];I[1]=k;x=I[2];I[2]=b;A=I[3];I[3]=n;sa=O[0];O[0]=0;Ja=O[1];O[1]=0;Za=O[2];O[2]=0;B=O[3];O[3]=0;fa=qa.blend_enable;qa.blend_enable=!0;ha=pa[0];pa[0]=32774;G=pa[1];pa[1]=32774;D=xa[0];xa[0]=770;K=xa[1];xa[1]=771;L=xa[2];xa[2]=773;E=xa[3];xa[3]=1;va=c.call(this,ea,a,g);M=qa.depth_enable;qa.depth_enable=va;aa=a.viewport;v=aa.x|0;N=aa.y|0;S="width"in aa?aa.width|
0:ea.framebufferWidth-v;Q="height"in aa?aa.height|0:ea.framebufferHeight-N;T=r[0];r[0]=v;ka=r[1];r[1]=N;Ta=r[2];r[2]=S;X=r[3];r[3]=Q;ya=qa.scissor_enable;qa.scissor_enable=!0;oa=qa.stencil_enable;qa.stencil_enable=!1;if(Ca=R.profile)Aa=performance.now(),ca.count++;Hb=P.offset;P.offset=0;ia=P.count;P.count=4;ma=a.count;ta=P.instances;P.instances=ma;Y=P.primitive;P.primitive=5;ja=a.dashLength;za=J[23];J[23]=ja;xd=a.dashTexture;Dc=J[24];J[24]=xd;ga=a.depth;Vc=J[22];J[22]=ga;Uc=a.id;Ec=J[31];J[31]=Uc;
ec=a.miterLimit;Ic=J[32];J[32]=ec;oc=F.call(this,ea,a,g);pc=J[33];J[33]=oc;mc=a.opacity;fc=J[10];J[10]=mc;Va=ea.pixelRatio;uc=J[34];J[34]=Va;yb=a.scale;db=J[6];J[6]=yb;Nb=a.scaleFract;bb=J[7];J[7]=Nb;ob=a.thickness;Wa=J[21];J[21]=ob;Z=a.translate;Ib=J[8];J[8]=Z;Jb=a.translateFract;qc=J[9];J[9]=Jb;Ob=C.call(this,ea,a,g);jb=J[3];J[3]=Ob;ra.buffer=a.positionBuffer;Gb=!1;Db=null;wb=0;hb=!1;Pb=Yb=0;qb=1;Ua=0;Ub=5126;pb=ib=bc=zb=0;Da(ra)?(Gb=!0,Db=V.createStream(34962,ra),Ub=Db.dtype):(Db=V.getBuffer(ra))?
Ub=Db.dtype:"constant"in ra?(qb=2,"number"===typeof ra.constant?(bc=ra.constant,ib=pb=zb=0):(bc=0<ra.constant.length?ra.constant[0]:0,ib=1<ra.constant.length?ra.constant[1]:0,pb=2<ra.constant.length?ra.constant[2]:0,zb=3<ra.constant.length?ra.constant[3]:0)):(Db=Da(ra.buffer)?V.createStream(34962,ra.buffer):V.getBuffer(ra.buffer),Ub="type"in ra?Ba[ra.type]:Db.dtype,hb=!!ra.normalized,Pb=ra.size|0,Yb=ra.offset|0,Ua=ra.stride|0,wb=ra.divisor|0);Ha=H.buffer;H.buffer=Db;rb=H.divisor;H.divisor=wb;Ka=H.normalized;
H.normalized=hb;fb=H.offset;H.offset=Yb;gb=H.size;H.size=Pb;La=H.state;H.state=qb;kb=H.stride;H.stride=Ua;Xa=H.type;H.type=Ub;tb=H.w;H.w=zb;sb=H.x;H.x=bc;Oa=H.y;H.y=ib;Cc=H.z;H.z=pb;wa.buffer=a.positionFractBuffer;Qa=!1;Kb=null;Eb=0;Ma=!1;$a=vd=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;Da(wa)?(Qa=!0,Kb=V.createStream(34962,wa),lb=Kb.dtype):(Kb=V.getBuffer(wa))?lb=Kb.dtype:"constant"in wa?(Lb=2,"number"===typeof wa.constant?(Zb=wa.constant,Pa=ub=Na=0):(Zb=0<wa.constant.length?wa.constant[0]:0,Pa=1<wa.constant.length?
wa.constant[1]:0,ub=2<wa.constant.length?wa.constant[2]:0,Na=3<wa.constant.length?wa.constant[3]:0)):(Kb=Da(wa.buffer)?V.createStream(34962,wa.buffer):V.getBuffer(wa.buffer),lb="type"in wa?Ba[wa.type]:Kb.dtype,Ma=!!wa.normalized,$a=wa.size|0,vd=wa.offset|0,Mb=wa.stride|0,Eb=wa.divisor|0);vb=U.buffer;U.buffer=Kb;Sa=U.divisor;U.divisor=Eb;nb=U.normalized;U.normalized=Ma;gc=U.offset;U.offset=vd;Ac=U.size;U.size=$a;vc=U.state;U.state=Lb;cb=U.stride;U.stride=Mb;jc=U.type;U.type=lb;ad=U.w;U.w=Na;Ya=U.x;
U.x=Zb;md=U.y;U.y=Pa;Ab=U.z;U.z=ub;Ea.buffer=a.positionBuffer;ab=!1;Vb=null;sc=0;Wb=!1;Kc=Qb=0;Rb=1;Xd=0;Fc=5126;pd=Wc=Mc=td=0;Da(Ea)?(ab=!0,Vb=V.createStream(34962,Ea),Fc=Vb.dtype):(Vb=V.getBuffer(Ea))?Fc=Vb.dtype:"constant"in Ea?(Rb=2,"number"===typeof Ea.constant?(Mc=Ea.constant,Wc=pd=td=0):(Mc=0<Ea.constant.length?Ea.constant[0]:0,Wc=1<Ea.constant.length?Ea.constant[1]:0,pd=2<Ea.constant.length?Ea.constant[2]:0,td=3<Ea.constant.length?Ea.constant[3]:0)):(Vb=Da(Ea.buffer)?V.createStream(34962,
Ea.buffer):V.getBuffer(Ea.buffer),Fc="type"in Ea?Ba[Ea.type]:Vb.dtype,Wb=!!Ea.normalized,Kc=Ea.size|0,Qb=Ea.offset|0,Xd=Ea.stride|0,sc=Ea.divisor|0);nc=y.buffer;y.buffer=Vb;wc=y.divisor;y.divisor=sc;hc=y.normalized;y.normalized=Wb;eb=y.offset;y.offset=Qb;rc=y.size;y.size=Kc;Tb=y.state;y.state=Rb;Xb=y.stride;y.stride=Xd;dc=y.type;y.type=Fc;ic=y.w;y.w=td;yc=y.x;y.x=Mc;Bc=y.y;y.y=Wc;bd=y.z;y.z=pd;la.buffer=a.positionFractBuffer;Pc=!1;Qc=null;Rc=0;Xc=!1;cd=kd=0;Yc=1;kc=0;cc=5126;zc=dd=Tc=Zc=0;Da(la)?
(Pc=!0,Qc=V.createStream(34962,la),cc=Qc.dtype):(Qc=V.getBuffer(la))?cc=Qc.dtype:"constant"in la?(Yc=2,"number"===typeof la.constant?(Tc=la.constant,dd=zc=Zc=0):(Tc=0<la.constant.length?la.constant[0]:0,dd=1<la.constant.length?la.constant[1]:0,zc=2<la.constant.length?la.constant[2]:0,Zc=3<la.constant.length?la.constant[3]:0)):(Qc=Da(la.buffer)?V.createStream(34962,la.buffer):V.getBuffer(la.buffer),cc="type"in la?Ba[la.type]:Qc.dtype,Xc=!!la.normalized,cd=la.size|0,kd=la.offset|0,kc=la.stride|0,Rc=
la.divisor|0);gd=u.buffer;u.buffer=Qc;qd=u.divisor;u.divisor=Rc;Ee=u.normalized;u.normalized=Xc;ze=u.offset;u.offset=kd;hd=u.size;u.size=cd;Re=u.state;u.state=Yc;Od=u.stride;u.stride=kc;he=u.type;u.type=cc;pe=u.w;u.w=Zc;Pd=u.x;u.x=Tc;Jd=u.y;u.y=dd;Hd=u.z;u.z=zc;W.buffer=a.colorBuffer;nd=!1;Sc=null;ud=0;sd=!1;wd=id=0;Cd=1;Ed=0;je=5126;ke=le=Fe=Ra=0;Da(W)?(nd=!0,Sc=V.createStream(34962,W),je=Sc.dtype):(Sc=V.getBuffer(W))?je=Sc.dtype:"constant"in W?(Cd=2,"number"===typeof W.constant?(Fe=W.constant,le=
ke=Ra=0):(Fe=0<W.constant.length?W.constant[0]:0,le=1<W.constant.length?W.constant[1]:0,ke=2<W.constant.length?W.constant[2]:0,Ra=3<W.constant.length?W.constant[3]:0)):(Sc=Da(W.buffer)?V.createStream(34962,W.buffer):V.getBuffer(W.buffer),je="type"in W?Ba[W.type]:Sc.dtype,sd=!!W.normalized,wd=W.size|0,id=W.offset|0,Ed=W.stride|0,ud=W.divisor|0);ie=p.buffer;p.buffer=Sc;te=p.divisor;p.divisor=ud;de=p.normalized;p.normalized=sd;me=p.offset;p.offset=id;Nc=p.size;p.size=wd;fd=p.state;p.state=Cd;ue=p.stride;
p.stride=Ed;qe=p.type;p.type=je;Kd=p.w;p.w=Ra;Qd=p.x;p.x=Fe;Rd=p.y;p.y=le;Sd=p.z;p.z=ke;ne=ba.buffer;ba.buffer=e;Ge=ba.divisor;ba.divisor=0;Ae=ba.normalized;ba.normalized=!1;re=ba.offset;ba.offset=0;Se=ba.size;ba.size=0;Te=ba.state;ba.state=1;Oe=ba.stride;ba.stride=8;ve=ba.type;ba.type=5126;He=ba.w;ba.w=0;Je=ba.x;ba.x=0;Ke=ba.y;ba.y=0;Le=ba.z;ba.z=0;Ie=w.buffer;w.buffer=l;Md=w.divisor;w.divisor=0;Yd=w.normalized;w.normalized=!1;ce=w.offset;w.offset=4;ee=w.size;w.size=0;Me=w.state;w.state=1;Id=w.stride;
w.stride=8;Td=w.type;w.type=5126;Ce=w.w;w.w=0;Ne=w.x;w.x=0;hf=w.y;w.y=0;bf=w.z;w.z=0;Ue=m.vert;m.vert=20;Pe=m.frag;m.frag=19;R.dirty=!0;d(ea,a,g);ea.viewportWidth=q;ea.viewportHeight=z;I[0]=t;I[1]=na;I[2]=x;I[3]=A;O[0]=sa;O[1]=Ja;O[2]=Za;O[3]=B;qa.blend_enable=fa;pa[0]=ha;pa[1]=G;xa[0]=D;xa[1]=K;xa[2]=L;xa[3]=E;qa.depth_enable=M;r[0]=T;r[1]=ka;r[2]=Ta;r[3]=X;qa.scissor_enable=ya;qa.stencil_enable=oa;Ca&&(ca.cpuTime+=performance.now()-Aa);P.offset=Hb;P.count=ia;P.instances=ta;P.primitive=Y;J[23]=za;
J[24]=Dc;J[22]=Vc;J[31]=Ec;J[32]=Ic;J[33]=pc;J[10]=fc;J[34]=uc;J[6]=db;J[7]=bb;J[21]=Wa;J[8]=Ib;J[9]=qc;J[3]=jb;Gb&&V.destroyStream(Db);H.buffer=Ha;H.divisor=rb;H.normalized=Ka;H.offset=fb;H.size=gb;H.state=La;H.stride=kb;H.type=Xa;H.w=tb;H.x=sb;H.y=Oa;H.z=Cc;Qa&&V.destroyStream(Kb);U.buffer=vb;U.divisor=Sa;U.normalized=nb;U.offset=gc;U.size=Ac;U.state=vc;U.stride=cb;U.type=jc;U.w=ad;U.x=Ya;U.y=md;U.z=Ab;ab&&V.destroyStream(Vb);y.buffer=nc;y.divisor=wc;y.normalized=hc;y.offset=eb;y.size=rc;y.state=
Tb;y.stride=Xb;y.type=dc;y.w=ic;y.x=yc;y.y=Bc;y.z=bd;Pc&&V.destroyStream(Qc);u.buffer=gd;u.divisor=qd;u.normalized=Ee;u.offset=ze;u.size=hd;u.state=Re;u.stride=Od;u.type=he;u.w=pe;u.x=Pd;u.y=Jd;u.z=Hd;nd&&V.destroyStream(Sc);p.buffer=ie;p.divisor=te;p.normalized=de;p.offset=me;p.size=Nc;p.state=fd;p.stride=ue;p.type=qe;p.w=Kd;p.x=Qd;p.y=Rd;p.z=Sd;ba.buffer=ne;ba.divisor=Ge;ba.normalized=Ae;ba.offset=re;ba.size=Se;ba.state=Te;ba.stride=Oe;ba.type=ve;ba.w=He;ba.x=Je;ba.y=Ke;ba.z=Le;w.buffer=Ie;w.divisor=
Md;w.normalized=Yd;w.offset=ce;w.size=ee;w.state=Me;w.stride=Id;w.type=Td;w.w=Ce;w.x=Ne;w.y=hf;w.z=bf;m.vert=Ue;m.frag=Pe;R.dirty=!0}}},"$22,aColor,aCoord,bColor,bCoord,dashLength,dashTexture,depth,lineEnd,lineTop,miterLimit,miterMode,nextCoord,opacity,prevCoord,scale,thickness,translate,viewport":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,Dc,V,ea,R){var P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,xd,Hb,ha,I,sa,Ba,ra,wa,
Ea,la,W,ua,Fa,Ia,mb,da;P=b.attributes;B=b.buffer;g=b.context;M=b.current;K=b.draw;Da=b.elements;qa=b.extensions;m=b.framebuffer;J=b.gl;aa=b.isBufferArgs;O=b.next;ma=b.shader;pa=b.uniforms;za=b.vao;xa=O.blend_color;fa=M.blend_color;Aa=O.blend_equation;ka=M.blend_equation;oa=O.blend_func;ya=M.blend_func;Ja=O.colorMask;na=M.colorMask;Za=O.depth_range;Ta=M.depth_range;r=O.polygonOffset_offset;n=M.polygonOffset_offset;z=O.sample_coverage;va=M.sample_coverage;Ca=O.scissor_box;xd=M.scissor_box;Hb=O.stencil_func;
ha=M.stencil_func;I=O.stencil_opBack;sa=M.stencil_opBack;Ba=O.stencil_opFront;ra=M.stencil_opFront;wa=O.viewport;Ea=M.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};W={divisor:1,offset:0,stride:4};ua={divisor:1,offset:8,stride:8};Fa={divisor:1,offset:4,stride:4};Ia={divisor:1,offset:16,stride:8};mb={divisor:1,offset:24,stride:8};da={divisor:1,offset:0,stride:8};return{batch:function(c,b){var q,w,L,u,v,y;q=m.next;q!==m.cur&&(q?J.bindFramebuffer(36160,
q.framebuffer):J.bindFramebuffer(36160,null),m.cur=q);if(M.dirty){var wa,p,C,pa,N,xa,F,H,U,T,oa,Ca,ba,Aa,ma,ga,Zd,Z,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb;wa=O.dither;wa!==M.dither&&(wa?J.enable(3024):J.disable(3024),M.dither=wa);p=O.depth_func;p!==M.depth_func&&(J.depthFunc(p),M.depth_func=p);C=Za[0];pa=Za[1];if(C!==Ta[0]||pa!==Ta[1])J.depthRange(C,pa),Ta[0]=C,Ta[1]=pa;N=O.depth_mask;N!==M.depth_mask&&(J.depthMask(N),M.depth_mask=N);xa=Ja[0];F=Ja[1];H=Ja[2];U=Ja[3];if(xa!==na[0]||F!==na[1]||H!==na[2]||
U!==na[3])J.colorMask(xa,F,H,U),na[0]=xa,na[1]=F,na[2]=H,na[3]=U;T=O.frontFace;T!==M.frontFace&&(J.frontFace(T),M.frontFace=T);oa=O.lineWidth;oa!==M.lineWidth&&(J.lineWidth(oa),M.lineWidth=oa);Ca=O.polygonOffset_enable;Ca!==M.polygonOffset_enable&&(Ca?J.enable(32823):J.disable(32823),M.polygonOffset_enable=Ca);ba=r[0];Aa=r[1];if(ba!==n[0]||Aa!==n[1])J.polygonOffset(ba,Aa),n[0]=ba,n[1]=Aa;ma=O.sample_alpha;ma!==M.sample_alpha&&(ma?J.enable(32926):J.disable(32926),M.sample_alpha=ma);ga=O.sample_enable;
ga!==M.sample_enable&&(ga?J.enable(32928):J.disable(32928),M.sample_enable=ga);Zd=z[0];Z=z[1];if(Zd!==va[0]||Z!==va[1])J.sampleCoverage(Zd,Z),va[0]=Zd,va[1]=Z;Bd=O.stencil_mask;Bd!==M.stencil_mask&&(J.stencilMask(Bd),M.stencil_mask=Bd);ld=Hb[0];$c=Hb[1];rd=Hb[2];if(ld!==ha[0]||$c!==ha[1]||rd!==ha[2])J.stencilFunc(ld,$c,rd),ha[0]=ld,ha[1]=$c,ha[2]=rd;Lc=Ba[0];od=Ba[1];Gc=Ba[2];ed=Ba[3];if(Lc!==ra[0]||od!==ra[1]||Gc!==ra[2]||ed!==ra[3])J.stencilOpSeparate(Lc,od,Gc,ed),ra[0]=Lc,ra[1]=od,ra[2]=Gc,ra[3]=
ed;Oc=I[0];jd=I[1];Bb=I[2];Fb=I[3];if(Oc!==sa[0]||jd!==sa[1]||Bb!==sa[2]||Fb!==sa[3])J.stencilOpSeparate(Oc,jd,Bb,Fb),sa[0]=Oc,sa[1]=jd,sa[2]=Bb,sa[3]=Fb}J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);M.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);M.cull_enable=!0;J.cullFace(1029);M.cull_face=1029;J.enable(3089);M.scissor_enable=!0;J.disable(2960);M.stencil_enable=
!1;if(w=M.profile)L=performance.now(),ca.count+=b;J.useProgram(Q.program);u=qa.angle_instanced_arrays;var tc,xb,xc,Cb,Jc;za.setVAO(null);tc=E.location;xb=P[tc];xb.buffer||J.enableVertexAttribArray(tc);if(5126!==xb.type||1!==xb.size||xb.buffer!==e||!1!==xb.normalized||0!==xb.offset||8!==xb.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(tc,1,5126,!1,8,0),xb.type=5126,xb.size=1,xb.buffer=e,xb.normalized=!1,xb.offset=0,xb.stride=8;0!==xb.divisor&&(u.vertexAttribDivisorANGLE(tc,0),xb.divisor=
0);xc=d.location;Cb=P[xc];Cb.buffer||J.enableVertexAttribArray(xc);if(5126!==Cb.type||1!==Cb.size||Cb.buffer!==l||!1!==Cb.normalized||4!==Cb.offset||8!==Cb.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(xc,1,5126,!1,8,4),Cb.type=5126,Cb.size=1,Cb.buffer=l,Cb.normalized=!1,Cb.offset=4,Cb.stride=8;0!==Cb.divisor&&(u.vertexAttribDivisorANGLE(xc,0),Cb.divisor=0);(Jc=K.elements)?J.bindBuffer(34963,Jc.buffer.buffer):za.currentVAO&&(Jc=Da.getElements(za.currentVAO.elements))&&J.bindBuffer(34963,
Jc.buffer.buffer);for(v=0;v<b;++v){y=c[v];var lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,Ra,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc;lc=y.viewport;Hc=lc.x|0;Vc=
lc.y|0;Uc="width"in lc?lc.width|0:g.framebufferWidth-Hc;Ec="height"in lc?lc.height|0:g.framebufferHeight-Vc;ec=g.viewportWidth;g.viewportWidth=Uc;Ic=g.viewportHeight;g.viewportHeight=Ec;J.viewport(Hc,Vc,Uc,Ec);Ea[0]=Hc;Ea[1]=Vc;Ea[2]=Uc;Ea[3]=Ec;(oc=ia.call(this,g,y,v))?J.enable(2929):J.disable(2929);M.depth_enable=oc;pc=y.viewport;mc=pc.x|0;fc=pc.y|0;Va="width"in pc?pc.width|0:g.framebufferWidth-mc;uc="height"in pc?pc.height|0:g.framebufferHeight-fc;J.scissor(mc,fc,Va,uc);xd[0]=mc;xd[1]=fc;xd[2]=
Va;xd[3]=uc;ua.buffer=y.positionBuffer;yb=!1;db=null;Nb=0;bb=!1;Wa=ob=0;Ld=1;Ib=0;Jb=5126;Gb=jb=Ob=qc=0;aa(ua)?(yb=!0,db=B.createStream(34962,ua),Jb=db.dtype):(db=B.getBuffer(ua))?Jb=db.dtype:"constant"in ua?(Ld=2,"number"===typeof ua.constant?(Ob=ua.constant,jb=Gb=qc=0):(Ob=0<ua.constant.length?ua.constant[0]:0,jb=1<ua.constant.length?ua.constant[1]:0,Gb=2<ua.constant.length?ua.constant[2]:0,qc=3<ua.constant.length?ua.constant[3]:0)):(db=aa(ua.buffer)?B.createStream(34962,ua.buffer):B.getBuffer(ua.buffer),
Jb="type"in ua?la[ua.type]:db.dtype,bb=!!ua.normalized,Wa=ua.size|0,ob=ua.offset|0,Ib=ua.stride|0,Nb=ua.divisor|0);Db=k.location;wb=P[Db];if(1===Ld){wb.buffer||J.enableVertexAttribArray(Db);hb=Wa||2;if(wb.type!==Jb||wb.size!==hb||wb.buffer!==db||wb.normalized!==bb||wb.offset!==ob||wb.stride!==Ib)J.bindBuffer(34962,db.buffer),J.vertexAttribPointer(Db,hb,Jb,bb,Ib,ob),wb.type=Jb,wb.size=hb,wb.buffer=db,wb.normalized=bb,wb.offset=ob,wb.stride=Ib;wb.divisor!==Nb&&(u.vertexAttribDivisorANGLE(Db,Nb),wb.divisor=
Nb)}else if(wb.buffer&&(J.disableVertexAttribArray(Db),wb.buffer=null),wb.x!==Ob||wb.y!==jb||wb.z!==Gb||wb.w!==qc)J.vertexAttrib4f(Db,Ob,jb,Gb,qc),wb.x=Ob,wb.y=jb,wb.z=Gb,wb.w=qc;Ia.buffer=y.positionBuffer;Yb=!1;Pb=null;qb=0;Ua=!1;zb=Ub=0;bc=1;ib=0;pb=5126;fb=Ka=rb=Ha=0;aa(Ia)?(Yb=!0,Pb=B.createStream(34962,Ia),pb=Pb.dtype):(Pb=B.getBuffer(Ia))?pb=Pb.dtype:"constant"in Ia?(bc=2,"number"===typeof Ia.constant?(rb=Ia.constant,Ka=fb=Ha=0):(rb=0<Ia.constant.length?Ia.constant[0]:0,Ka=1<Ia.constant.length?
Ia.constant[1]:0,fb=2<Ia.constant.length?Ia.constant[2]:0,Ha=3<Ia.constant.length?Ia.constant[3]:0)):(Pb=aa(Ia.buffer)?B.createStream(34962,Ia.buffer):B.getBuffer(Ia.buffer),pb="type"in Ia?la[Ia.type]:Pb.dtype,Ua=!!Ia.normalized,zb=Ia.size|0,Ub=Ia.offset|0,ib=Ia.stride|0,qb=Ia.divisor|0);gb=f.location;La=P[gb];if(1===bc){La.buffer||J.enableVertexAttribArray(gb);kb=zb||2;if(La.type!==pb||La.size!==kb||La.buffer!==Pb||La.normalized!==Ua||La.offset!==Ub||La.stride!==ib)J.bindBuffer(34962,Pb.buffer),
J.vertexAttribPointer(gb,kb,pb,Ua,ib,Ub),La.type=pb,La.size=kb,La.buffer=Pb,La.normalized=Ua,La.offset=Ub,La.stride=ib;La.divisor!==qb&&(u.vertexAttribDivisorANGLE(gb,qb),La.divisor=qb)}else if(La.buffer&&(J.disableVertexAttribArray(gb),La.buffer=null),La.x!==rb||La.y!==Ka||La.z!==fb||La.w!==Ha)J.vertexAttrib4f(gb,rb,Ka,fb,Ha),La.x=rb,La.y=Ka,La.z=fb,La.w=Ha;mb.buffer=y.positionBuffer;Xa=!1;tb=null;sb=0;Oa=!1;Qa=Cc=0;Kb=1;Eb=0;Ma=5126;Mb=Lb=$a=vd=0;aa(mb)?(Xa=!0,tb=B.createStream(34962,mb),Ma=tb.dtype):
(tb=B.getBuffer(mb))?Ma=tb.dtype:"constant"in mb?(Kb=2,"number"===typeof mb.constant?($a=mb.constant,Lb=Mb=vd=0):($a=0<mb.constant.length?mb.constant[0]:0,Lb=1<mb.constant.length?mb.constant[1]:0,Mb=2<mb.constant.length?mb.constant[2]:0,vd=3<mb.constant.length?mb.constant[3]:0)):(tb=aa(mb.buffer)?B.createStream(34962,mb.buffer):B.getBuffer(mb.buffer),Ma="type"in mb?la[mb.type]:tb.dtype,Oa=!!mb.normalized,Qa=mb.size|0,Cc=mb.offset|0,Eb=mb.stride|0,sb=mb.divisor|0);lb=ta.location;Na=P[lb];if(1===Kb){Na.buffer||
J.enableVertexAttribArray(lb);Zb=Qa||2;if(Na.type!==Ma||Na.size!==Zb||Na.buffer!==tb||Na.normalized!==Oa||Na.offset!==Cc||Na.stride!==Eb)J.bindBuffer(34962,tb.buffer),J.vertexAttribPointer(lb,Zb,Ma,Oa,Eb,Cc),Na.type=Ma,Na.size=Zb,Na.buffer=tb,Na.normalized=Oa,Na.offset=Cc,Na.stride=Eb;Na.divisor!==sb&&(u.vertexAttribDivisorANGLE(lb,sb),Na.divisor=sb)}else if(Na.buffer&&(J.disableVertexAttribArray(lb),Na.buffer=null),Na.x!==$a||Na.y!==Lb||Na.z!==Mb||Na.w!==vd)J.vertexAttrib4f(lb,$a,Lb,Mb,vd),Na.x=
$a,Na.y=Lb,Na.z=Mb,Na.w=vd;da.buffer=y.positionBuffer;Pa=!1;ub=null;vb=0;Sa=!1;gc=nb=0;Ac=1;vc=0;cb=5126;md=Ya=ad=jc=0;aa(da)?(Pa=!0,ub=B.createStream(34962,da),cb=ub.dtype):(ub=B.getBuffer(da))?cb=ub.dtype:"constant"in da?(Ac=2,"number"===typeof da.constant?(ad=da.constant,Ya=md=jc=0):(ad=0<da.constant.length?da.constant[0]:0,Ya=1<da.constant.length?da.constant[1]:0,md=2<da.constant.length?da.constant[2]:0,jc=3<da.constant.length?da.constant[3]:0)):(ub=aa(da.buffer)?B.createStream(34962,da.buffer):
B.getBuffer(da.buffer),cb="type"in da?la[da.type]:ub.dtype,Sa=!!da.normalized,gc=da.size|0,nb=da.offset|0,vc=da.stride|0,vb=da.divisor|0);Ab=ja.location;ab=P[Ab];if(1===Ac){ab.buffer||J.enableVertexAttribArray(Ab);Vb=gc||2;if(ab.type!==cb||ab.size!==Vb||ab.buffer!==ub||ab.normalized!==Sa||ab.offset!==nb||ab.stride!==vc)J.bindBuffer(34962,ub.buffer),J.vertexAttribPointer(Ab,Vb,cb,Sa,vc,nb),ab.type=cb,ab.size=Vb,ab.buffer=ub,ab.normalized=Sa,ab.offset=nb,ab.stride=vc;ab.divisor!==vb&&(u.vertexAttribDivisorANGLE(Ab,
vb),ab.divisor=vb)}else if(ab.buffer&&(J.disableVertexAttribArray(Ab),ab.buffer=null),ab.x!==ad||ab.y!==Ya||ab.z!==md||ab.w!==jc)J.vertexAttrib4f(Ab,ad,Ya,md,jc),ab.x=ad,ab.y=Ya,ab.z=md,ab.w=jc;W.buffer=y.colorBuffer;sc=!1;Wb=null;Qb=0;Kc=!1;Xd=Rb=0;Fc=1;td=0;Mc=5126;wc=nc=pd=Wc=0;aa(W)?(sc=!0,Wb=B.createStream(34962,W),Mc=Wb.dtype):(Wb=B.getBuffer(W))?Mc=Wb.dtype:"constant"in W?(Fc=2,"number"===typeof W.constant?(pd=W.constant,nc=wc=Wc=0):(pd=0<W.constant.length?W.constant[0]:0,nc=1<W.constant.length?
W.constant[1]:0,wc=2<W.constant.length?W.constant[2]:0,Wc=3<W.constant.length?W.constant[3]:0)):(Wb=aa(W.buffer)?B.createStream(34962,W.buffer):B.getBuffer(W.buffer),Mc="type"in W?la[W.type]:Wb.dtype,Kc=!!W.normalized,Xd=W.size|0,Rb=W.offset|0,td=W.stride|0,Qb=W.divisor|0);hc=S.location;eb=P[hc];if(1===Fc){eb.buffer||J.enableVertexAttribArray(hc);rc=Xd||4;if(eb.type!==Mc||eb.size!==rc||eb.buffer!==Wb||eb.normalized!==Kc||eb.offset!==Rb||eb.stride!==td)J.bindBuffer(34962,Wb.buffer),J.vertexAttribPointer(hc,
rc,Mc,Kc,td,Rb),eb.type=Mc,eb.size=rc,eb.buffer=Wb,eb.normalized=Kc,eb.offset=Rb,eb.stride=td;eb.divisor!==Qb&&(u.vertexAttribDivisorANGLE(hc,Qb),eb.divisor=Qb)}else if(eb.buffer&&(J.disableVertexAttribArray(hc),eb.buffer=null),eb.x!==pd||eb.y!==nc||eb.z!==wc||eb.w!==Wc)J.vertexAttrib4f(hc,pd,nc,wc,Wc),eb.x=pd,eb.y=nc,eb.z=wc,eb.w=Wc;Fa.buffer=y.colorBuffer;Tb=!1;Xb=null;dc=0;ic=!1;Bc=yc=0;bd=1;Pc=0;Qc=5126;cd=kd=Xc=Rc=0;aa(Fa)?(Tb=!0,Xb=B.createStream(34962,Fa),Qc=Xb.dtype):(Xb=B.getBuffer(Fa))?
Qc=Xb.dtype:"constant"in Fa?(bd=2,"number"===typeof Fa.constant?(Xc=Fa.constant,kd=cd=Rc=0):(Xc=0<Fa.constant.length?Fa.constant[0]:0,kd=1<Fa.constant.length?Fa.constant[1]:0,cd=2<Fa.constant.length?Fa.constant[2]:0,Rc=3<Fa.constant.length?Fa.constant[3]:0)):(Xb=aa(Fa.buffer)?B.createStream(34962,Fa.buffer):B.getBuffer(Fa.buffer),Qc="type"in Fa?la[Fa.type]:Xb.dtype,ic=!!Fa.normalized,Bc=Fa.size|0,yc=Fa.offset|0,Pc=Fa.stride|0,dc=Fa.divisor|0);Yc=X.location;kc=P[Yc];if(1===bd){kc.buffer||J.enableVertexAttribArray(Yc);
cc=Bc||4;if(kc.type!==Qc||kc.size!==cc||kc.buffer!==Xb||kc.normalized!==ic||kc.offset!==yc||kc.stride!==Pc)J.bindBuffer(34962,Xb.buffer),J.vertexAttribPointer(Yc,cc,Qc,ic,Pc,yc),kc.type=Qc,kc.size=cc,kc.buffer=Xb,kc.normalized=ic,kc.offset=yc,kc.stride=Pc;kc.divisor!==dc&&(u.vertexAttribDivisorANGLE(Yc,dc),kc.divisor=dc)}else if(kc.buffer&&(J.disableVertexAttribArray(Yc),kc.buffer=null),kc.x!==Xc||kc.y!==kd||kc.z!==cd||kc.w!==Rc)J.vertexAttrib4f(Yc,Xc,kd,cd,Rc),kc.x=Xc,kc.y=kd,kc.z=cd,kc.w=Rc;Zc=
y.scale;Tc=Zc[0];zc=Zc[1];v&&dd===Tc&&gd===zc||(dd=Tc,gd=zc,J.uniform2f(Dc.location,Tc,zc));qd=y.translate;Ee=qd[0];hd=qd[1];v&&ze===Ee&&Re===hd||(ze=Ee,Re=hd,J.uniform2f(ea.location,Ee,hd));Od=y.thickness;v&&he===Od||(he=Od,J.uniform1f(V.location,Od));Ra=y.depth;v&&Pd===Ra||(Pd=Ra,J.uniform1f(D.location,Ra));Jd=h.call(this,g,y,v);Hd=Jd[0];Sc=Jd[1];sd=Jd[2];wd=Jd[3];v&&nd===Hd&&ud===Sc&&id===sd&&Cd===wd||(nd=Hd,ud=Sc,id=sd,Cd=wd,J.uniform4f(R.location,Hd,Sc,sd,wd));Ed=y.miterLimit;v&&je===Ed||(je=
Ed,J.uniform1f(G.location,Ed));we=t.call(this,g,y,v);v&&Fe===we||(Fe=we,J.uniform1f(a.location,we));le=y.dashLength;v&&ke===le||(ke=le,J.uniform1f(x.location,le));ie=y.opacity;v&&te===ie||(te=ie,J.uniform1f(A.location,ie));(de=y.dashTexture)&&"framebuffer"===de._reglType&&(de=de.color[0]);me=de._texture;J.uniform1i(Y.location,me.bind());Nc=y.count;0<Nc?Jc?u.drawElementsInstancedANGLE(5,4,Jc.type,0<<(Jc.type-5121>>1),Nc):u.drawArraysInstancedANGLE(5,0,4,Nc):0>Nc&&(Jc?J.drawElements(5,4,Jc.type,0<<
(Jc.type-5121>>1)):J.drawArrays(5,0,4));g.viewportWidth=ec;g.viewportHeight=Ic;yb&&B.destroyStream(db);Yb&&B.destroyStream(Pb);Xa&&B.destroyStream(tb);Pa&&B.destroyStream(ub);sc&&B.destroyStream(Wb);Tb&&B.destroyStream(Xb);me.unbind()}M.dirty=!0;za.setVAO(null);w&&(ca.cpuTime+=performance.now()-L)},draw:function(h){var b,t,w,u,y,v,wa,p,C,pa,xa,Q,F,H,U,T,oa,Ca,ba,Aa,ma,ia,ga,Zd,Z,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,
Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd;b=m.next;b!==m.cur&&(b?J.bindFramebuffer(36160,b.framebuffer):J.bindFramebuffer(36160,null),m.cur=b);if(M.dirty){var Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc;Fc=O.dither;Fc!==M.dither&&(Fc?J.enable(3024):J.disable(3024),M.dither=Fc);td=O.depth_func;td!==M.depth_func&&(J.depthFunc(td),
M.depth_func=td);Mc=Za[0];Wc=Za[1];if(Mc!==Ta[0]||Wc!==Ta[1])J.depthRange(Mc,Wc),Ta[0]=Mc,Ta[1]=Wc;pd=O.depth_mask;pd!==M.depth_mask&&(J.depthMask(pd),M.depth_mask=pd);nc=Ja[0];wc=Ja[1];hc=Ja[2];eb=Ja[3];if(nc!==na[0]||wc!==na[1]||hc!==na[2]||eb!==na[3])J.colorMask(nc,wc,hc,eb),na[0]=nc,na[1]=wc,na[2]=hc,na[3]=eb;rc=O.frontFace;rc!==M.frontFace&&(J.frontFace(rc),M.frontFace=rc);Tb=O.lineWidth;Tb!==M.lineWidth&&(J.lineWidth(Tb),M.lineWidth=Tb);Xb=O.polygonOffset_enable;Xb!==M.polygonOffset_enable&&
(Xb?J.enable(32823):J.disable(32823),M.polygonOffset_enable=Xb);dc=r[0];ic=r[1];if(dc!==n[0]||ic!==n[1])J.polygonOffset(dc,ic),n[0]=dc,n[1]=ic;yc=O.sample_alpha;yc!==M.sample_alpha&&(yc?J.enable(32926):J.disable(32926),M.sample_alpha=yc);Bc=O.sample_enable;Bc!==M.sample_enable&&(Bc?J.enable(32928):J.disable(32928),M.sample_enable=Bc);bd=z[0];Pc=z[1];if(bd!==va[0]||Pc!==va[1])J.sampleCoverage(bd,Pc),va[0]=bd,va[1]=Pc;Qc=O.stencil_mask;Qc!==M.stencil_mask&&(J.stencilMask(Qc),M.stencil_mask=Qc);Rc=Hb[0];
Xc=Hb[1];kd=Hb[2];if(Rc!==ha[0]||Xc!==ha[1]||kd!==ha[2])J.stencilFunc(Rc,Xc,kd),ha[0]=Rc,ha[1]=Xc,ha[2]=kd;cd=Ba[0];Yc=Ba[1];kc=Ba[2];cc=Ba[3];if(cd!==ra[0]||Yc!==ra[1]||kc!==ra[2]||cc!==ra[3])J.stencilOpSeparate(cd,Yc,kc,cc),ra[0]=cd,ra[1]=Yc,ra[2]=kc,ra[3]=cc;Zc=I[0];Tc=I[1];dd=I[2];zc=I[3];if(Zc!==sa[0]||Tc!==sa[1]||dd!==sa[2]||zc!==sa[3])J.stencilOpSeparate(Zc,Tc,dd,zc),sa[0]=Zc,sa[1]=Tc,sa[2]=dd,sa[3]=zc}t=h.viewport;w=t.x|0;u=t.y|0;y="width"in t?t.width|0:g.framebufferWidth-w;v="height"in t?
t.height|0:g.framebufferHeight-u;wa=g.viewportWidth;g.viewportWidth=y;p=g.viewportHeight;g.viewportHeight=v;J.viewport(w,u,y,v);Ea[0]=w;Ea[1]=u;Ea[2]=y;Ea[3]=v;J.blendColor(0,0,0,0);fa[0]=0;fa[1]=0;fa[2]=0;fa[3]=0;J.enable(3042);M.blend_enable=!0;J.blendEquationSeparate(32774,32774);ka[0]=32774;ka[1]=32774;J.blendFuncSeparate(770,771,773,1);ya[0]=770;ya[1]=771;ya[2]=773;ya[3]=1;J.enable(2884);M.cull_enable=!0;J.cullFace(1029);M.cull_face=1029;(C=N.call(this,g,h,0))?J.enable(2929):J.disable(2929);
M.depth_enable=C;pa=h.viewport;xa=pa.x|0;Q=pa.y|0;F="width"in pa?pa.width|0:g.framebufferWidth-xa;H="height"in pa?pa.height|0:g.framebufferHeight-Q;J.scissor(xa,Q,F,H);xd[0]=xa;xd[1]=Q;xd[2]=F;xd[3]=H;J.enable(3089);M.scissor_enable=!0;J.disable(2960);M.stencil_enable=!1;if(U=M.profile)T=performance.now(),ca.count++;J.useProgram(L.program);oa=qa.angle_instanced_arrays;za.setVAO(null);ua.buffer=h.positionBuffer;Ca=!1;ba=null;Aa=0;ma=!1;ga=ia=0;Zd=1;Z=0;Bd=5126;Lc=rd=$c=ld=0;aa(ua)?(Ca=!0,ba=B.createStream(34962,
ua),Bd=ba.dtype):(ba=B.getBuffer(ua))?Bd=ba.dtype:"constant"in ua?(Zd=2,"number"===typeof ua.constant?($c=ua.constant,rd=Lc=ld=0):($c=0<ua.constant.length?ua.constant[0]:0,rd=1<ua.constant.length?ua.constant[1]:0,Lc=2<ua.constant.length?ua.constant[2]:0,ld=3<ua.constant.length?ua.constant[3]:0)):(ba=aa(ua.buffer)?B.createStream(34962,ua.buffer):B.getBuffer(ua.buffer),Bd="type"in ua?la[ua.type]:ba.dtype,ma=!!ua.normalized,ga=ua.size|0,ia=ua.offset|0,Z=ua.stride|0,Aa=ua.divisor|0);od=k.location;Gc=
P[od];if(1===Zd){Gc.buffer||J.enableVertexAttribArray(od);ed=ga||2;if(Gc.type!==Bd||Gc.size!==ed||Gc.buffer!==ba||Gc.normalized!==ma||Gc.offset!==ia||Gc.stride!==Z)J.bindBuffer(34962,ba.buffer),J.vertexAttribPointer(od,ed,Bd,ma,Z,ia),Gc.type=Bd,Gc.size=ed,Gc.buffer=ba,Gc.normalized=ma,Gc.offset=ia,Gc.stride=Z;Gc.divisor!==Aa&&(oa.vertexAttribDivisorANGLE(od,Aa),Gc.divisor=Aa)}else if(Gc.buffer&&(J.disableVertexAttribArray(od),Gc.buffer=null),Gc.x!==$c||Gc.y!==rd||Gc.z!==Lc||Gc.w!==ld)J.vertexAttrib4f(od,
$c,rd,Lc,ld),Gc.x=$c,Gc.y=rd,Gc.z=Lc,Gc.w=ld;Ia.buffer=h.positionBuffer;Oc=!1;jd=null;Bb=0;Fb=!1;xb=tc=0;xc=1;Cb=0;Jc=5126;Uc=Vc=Hc=lc=0;aa(Ia)?(Oc=!0,jd=B.createStream(34962,Ia),Jc=jd.dtype):(jd=B.getBuffer(Ia))?Jc=jd.dtype:"constant"in Ia?(xc=2,"number"===typeof Ia.constant?(Hc=Ia.constant,Vc=Uc=lc=0):(Hc=0<Ia.constant.length?Ia.constant[0]:0,Vc=1<Ia.constant.length?Ia.constant[1]:0,Uc=2<Ia.constant.length?Ia.constant[2]:0,lc=3<Ia.constant.length?Ia.constant[3]:0)):(jd=aa(Ia.buffer)?B.createStream(34962,
Ia.buffer):B.getBuffer(Ia.buffer),Jc="type"in Ia?la[Ia.type]:jd.dtype,Fb=!!Ia.normalized,xb=Ia.size|0,tc=Ia.offset|0,Cb=Ia.stride|0,Bb=Ia.divisor|0);Ec=f.location;ec=P[Ec];if(1===xc){ec.buffer||J.enableVertexAttribArray(Ec);Ic=xb||2;if(ec.type!==Jc||ec.size!==Ic||ec.buffer!==jd||ec.normalized!==Fb||ec.offset!==tc||ec.stride!==Cb)J.bindBuffer(34962,jd.buffer),J.vertexAttribPointer(Ec,Ic,Jc,Fb,Cb,tc),ec.type=Jc,ec.size=Ic,ec.buffer=jd,ec.normalized=Fb,ec.offset=tc,ec.stride=Cb;ec.divisor!==Bb&&(oa.vertexAttribDivisorANGLE(Ec,
Bb),ec.divisor=Bb)}else if(ec.buffer&&(J.disableVertexAttribArray(Ec),ec.buffer=null),ec.x!==Hc||ec.y!==Vc||ec.z!==Uc||ec.w!==lc)J.vertexAttrib4f(Ec,Hc,Vc,Uc,lc),ec.x=Hc,ec.y=Vc,ec.z=Uc,ec.w=lc;mb.buffer=h.positionBuffer;oc=!1;pc=null;mc=0;fc=!1;uc=Va=0;yb=1;db=0;Nb=5126;Ld=Wa=ob=bb=0;aa(mb)?(oc=!0,pc=B.createStream(34962,mb),Nb=pc.dtype):(pc=B.getBuffer(mb))?Nb=pc.dtype:"constant"in mb?(yb=2,"number"===typeof mb.constant?(ob=mb.constant,Wa=Ld=bb=0):(ob=0<mb.constant.length?mb.constant[0]:0,Wa=1<
mb.constant.length?mb.constant[1]:0,Ld=2<mb.constant.length?mb.constant[2]:0,bb=3<mb.constant.length?mb.constant[3]:0)):(pc=aa(mb.buffer)?B.createStream(34962,mb.buffer):B.getBuffer(mb.buffer),Nb="type"in mb?la[mb.type]:pc.dtype,fc=!!mb.normalized,uc=mb.size|0,Va=mb.offset|0,db=mb.stride|0,mc=mb.divisor|0);Ib=ta.location;Jb=P[Ib];if(1===yb){Jb.buffer||J.enableVertexAttribArray(Ib);qc=uc||2;if(Jb.type!==Nb||Jb.size!==qc||Jb.buffer!==pc||Jb.normalized!==fc||Jb.offset!==Va||Jb.stride!==db)J.bindBuffer(34962,
pc.buffer),J.vertexAttribPointer(Ib,qc,Nb,fc,db,Va),Jb.type=Nb,Jb.size=qc,Jb.buffer=pc,Jb.normalized=fc,Jb.offset=Va,Jb.stride=db;Jb.divisor!==mc&&(oa.vertexAttribDivisorANGLE(Ib,mc),Jb.divisor=mc)}else if(Jb.buffer&&(J.disableVertexAttribArray(Ib),Jb.buffer=null),Jb.x!==ob||Jb.y!==Wa||Jb.z!==Ld||Jb.w!==bb)J.vertexAttrib4f(Ib,ob,Wa,Ld,bb),Jb.x=ob,Jb.y=Wa,Jb.z=Ld,Jb.w=bb;da.buffer=h.positionBuffer;Ob=!1;jb=null;Gb=0;Db=!1;hb=wb=0;Yb=1;Pb=0;qb=5126;bc=zb=Ub=Ua=0;aa(da)?(Ob=!0,jb=B.createStream(34962,
da),qb=jb.dtype):(jb=B.getBuffer(da))?qb=jb.dtype:"constant"in da?(Yb=2,"number"===typeof da.constant?(Ub=da.constant,zb=bc=Ua=0):(Ub=0<da.constant.length?da.constant[0]:0,zb=1<da.constant.length?da.constant[1]:0,bc=2<da.constant.length?da.constant[2]:0,Ua=3<da.constant.length?da.constant[3]:0)):(jb=aa(da.buffer)?B.createStream(34962,da.buffer):B.getBuffer(da.buffer),qb="type"in da?la[da.type]:jb.dtype,Db=!!da.normalized,hb=da.size|0,wb=da.offset|0,Pb=da.stride|0,Gb=da.divisor|0);ib=ja.location;pb=
P[ib];if(1===Yb){pb.buffer||J.enableVertexAttribArray(ib);Ha=hb||2;if(pb.type!==qb||pb.size!==Ha||pb.buffer!==jb||pb.normalized!==Db||pb.offset!==wb||pb.stride!==Pb)J.bindBuffer(34962,jb.buffer),J.vertexAttribPointer(ib,Ha,qb,Db,Pb,wb),pb.type=qb,pb.size=Ha,pb.buffer=jb,pb.normalized=Db,pb.offset=wb,pb.stride=Pb;pb.divisor!==Gb&&(oa.vertexAttribDivisorANGLE(ib,Gb),pb.divisor=Gb)}else if(pb.buffer&&(J.disableVertexAttribArray(ib),pb.buffer=null),pb.x!==Ub||pb.y!==zb||pb.z!==bc||pb.w!==Ua)J.vertexAttrib4f(ib,
Ub,zb,bc,Ua),pb.x=Ub,pb.y=zb,pb.z=bc,pb.w=Ua;W.buffer=h.colorBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Xa=1;tb=0;sb=5126;Kb=Qa=Cc=Oa=0;aa(W)?(rb=!0,Ka=B.createStream(34962,W),sb=Ka.dtype):(Ka=B.getBuffer(W))?sb=Ka.dtype:"constant"in W?(Xa=2,"number"===typeof W.constant?(Cc=W.constant,Qa=Kb=Oa=0):(Cc=0<W.constant.length?W.constant[0]:0,Qa=1<W.constant.length?W.constant[1]:0,Kb=2<W.constant.length?W.constant[2]:0,Oa=3<W.constant.length?W.constant[3]:0)):(Ka=aa(W.buffer)?B.createStream(34962,W.buffer):
B.getBuffer(W.buffer),sb="type"in W?la[W.type]:Ka.dtype,gb=!!W.normalized,kb=W.size|0,La=W.offset|0,tb=W.stride|0,fb=W.divisor|0);Eb=S.location;Ma=P[Eb];if(1===Xa){Ma.buffer||J.enableVertexAttribArray(Eb);vd=kb||4;if(Ma.type!==sb||Ma.size!==vd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)J.bindBuffer(34962,Ka.buffer),J.vertexAttribPointer(Eb,vd,sb,gb,tb,La),Ma.type=sb,Ma.size=vd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(oa.vertexAttribDivisorANGLE(Eb,
fb),Ma.divisor=fb)}else if(Ma.buffer&&(J.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)J.vertexAttrib4f(Eb,Cc,Qa,Kb,Oa),Ma.x=Cc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;Fa.buffer=h.colorBuffer;$a=!1;Lb=null;Mb=0;lb=!1;Zb=Na=0;Pa=1;ub=0;vb=5126;Ac=gc=nb=Sa=0;aa(Fa)?($a=!0,Lb=B.createStream(34962,Fa),vb=Lb.dtype):(Lb=B.getBuffer(Fa))?vb=Lb.dtype:"constant"in Fa?(Pa=2,"number"===typeof Fa.constant?(nb=Fa.constant,gc=Ac=Sa=0):(nb=0<Fa.constant.length?Fa.constant[0]:0,gc=1<Fa.constant.length?
Fa.constant[1]:0,Ac=2<Fa.constant.length?Fa.constant[2]:0,Sa=3<Fa.constant.length?Fa.constant[3]:0)):(Lb=aa(Fa.buffer)?B.createStream(34962,Fa.buffer):B.getBuffer(Fa.buffer),vb="type"in Fa?la[Fa.type]:Lb.dtype,lb=!!Fa.normalized,Zb=Fa.size|0,Na=Fa.offset|0,ub=Fa.stride|0,Mb=Fa.divisor|0);vc=X.location;cb=P[vc];if(1===Pa){cb.buffer||J.enableVertexAttribArray(vc);jc=Zb||4;if(cb.type!==vb||cb.size!==jc||cb.buffer!==Lb||cb.normalized!==lb||cb.offset!==Na||cb.stride!==ub)J.bindBuffer(34962,Lb.buffer),
J.vertexAttribPointer(vc,jc,vb,lb,ub,Na),cb.type=vb,cb.size=jc,cb.buffer=Lb,cb.normalized=lb,cb.offset=Na,cb.stride=ub;cb.divisor!==Mb&&(oa.vertexAttribDivisorANGLE(vc,Mb),cb.divisor=Mb)}else if(cb.buffer&&(J.disableVertexAttribArray(vc),cb.buffer=null),cb.x!==nb||cb.y!==gc||cb.z!==Ac||cb.w!==Sa)J.vertexAttrib4f(vc,nb,gc,Ac,Sa),cb.x=nb,cb.y=gc,cb.z=Ac,cb.w=Sa;ad=E.location;Ya=P[ad];Ya.buffer||J.enableVertexAttribArray(ad);if(5126!==Ya.type||1!==Ya.size||Ya.buffer!==e||!1!==Ya.normalized||0!==Ya.offset||
8!==Ya.stride)J.bindBuffer(34962,e.buffer),J.vertexAttribPointer(ad,1,5126,!1,8,0),Ya.type=5126,Ya.size=1,Ya.buffer=e,Ya.normalized=!1,Ya.offset=0,Ya.stride=8;0!==Ya.divisor&&(oa.vertexAttribDivisorANGLE(ad,0),Ya.divisor=0);md=d.location;Ab=P[md];Ab.buffer||J.enableVertexAttribArray(md);if(5126!==Ab.type||1!==Ab.size||Ab.buffer!==l||!1!==Ab.normalized||4!==Ab.offset||8!==Ab.stride)J.bindBuffer(34962,l.buffer),J.vertexAttribPointer(md,1,5126,!1,8,4),Ab.type=5126,Ab.size=1,Ab.buffer=l,Ab.normalized=
!1,Ab.offset=4,Ab.stride=8;0!==Ab.divisor&&(oa.vertexAttribDivisorANGLE(md,0),Ab.divisor=0);ab=h.scale;J.uniform2f(Dc.location,ab[0],ab[1]);Vb=h.translate;J.uniform2f(ea.location,Vb[0],Vb[1]);J.uniform1f(V.location,h.thickness);J.uniform1f(D.location,h.depth);sc=q.call(this,g,h,0);J.uniform4f(R.location,sc[0],sc[1],sc[2],sc[3]);J.uniform1f(G.location,h.miterLimit);Wb=c.call(this,g,h,0);J.uniform1f(a.location,Wb);J.uniform1f(x.location,h.dashLength);J.uniform1f(A.location,h.opacity);(Qb=h.dashTexture)&&
"framebuffer"===Qb._reglType&&(Qb=Qb.color[0]);Kc=Qb._texture;J.uniform1i(Y.location,Kc.bind());(Rb=K.elements)?J.bindBuffer(34963,Rb.buffer.buffer):za.currentVAO&&(Rb=Da.getElements(za.currentVAO.elements))&&J.bindBuffer(34963,Rb.buffer.buffer);Xd=h.count;0<Xd?Rb?oa.drawElementsInstancedANGLE(5,4,Rb.type,0<<(Rb.type-5121>>1),Xd):oa.drawArraysInstancedANGLE(5,0,4,Xd):0>Xd&&(Rb?J.drawElements(5,4,Rb.type,0<<(Rb.type-5121>>1)):J.drawArrays(5,0,4));M.dirty=!0;za.setVAO(null);g.viewportWidth=wa;g.viewportHeight=
p;U&&(ca.cpuTime+=performance.now()-T);Ca&&B.destroyStream(ba);Oc&&B.destroyStream(jd);oc&&B.destroyStream(pc);Ob&&B.destroyStream(jb);rb&&B.destroyStream(Ka);$a&&B.destroyStream(Lb);Kc.unbind()},scope:function(a,d,c){var f,h,r,m,k,b,n,I,q,z,t,na,x,A,sa,Ja,J,Ba,P,Za,ra,fa,R,ha,G,D,L,E,va,Ea,N,Da,S,Q,ka,Ta,V,X,ya,ea,ia,Hb,qa,ta,Y,ja,za,xd,Dc,ga,fc,Va,Z,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,
ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Ra,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf;f=a.viewport;h=f.x|0;r=f.y|0;m="width"in f?f.width|0:g.framebufferWidth-
h;k="height"in f?f.height|0:g.framebufferHeight-r;b=g.viewportWidth;g.viewportWidth=m;n=g.viewportHeight;g.viewportHeight=k;I=wa[0];wa[0]=h;q=wa[1];wa[1]=r;z=wa[2];wa[2]=m;t=wa[3];wa[3]=k;na=xa[0];xa[0]=0;x=xa[1];xa[1]=0;A=xa[2];xa[2]=0;sa=xa[3];xa[3]=0;Ja=O.blend_enable;O.blend_enable=!0;J=Aa[0];Aa[0]=32774;Ba=Aa[1];Aa[1]=32774;P=oa[0];oa[0]=770;Za=oa[1];oa[1]=771;ra=oa[2];oa[2]=773;fa=oa[3];oa[3]=1;R=O.cull_enable;O.cull_enable=!0;ha=O.cull_face;O.cull_face=1029;G=F.call(this,g,a,c);D=O.depth_enable;
O.depth_enable=G;L=a.viewport;E=L.x|0;va=L.y|0;Ea="width"in L?L.width|0:g.framebufferWidth-E;N="height"in L?L.height|0:g.framebufferHeight-va;Da=Ca[0];Ca[0]=E;S=Ca[1];Ca[1]=va;Q=Ca[2];Ca[2]=Ea;ka=Ca[3];Ca[3]=N;Ta=O.scissor_enable;O.scissor_enable=!0;V=O.stencil_enable;O.stencil_enable=!1;if(X=M.profile)ya=performance.now(),ca.count++;ea=K.offset;K.offset=0;ia=K.count;K.count=4;Hb=a.count;qa=K.instances;K.instances=Hb;ta=K.primitive;K.primitive=5;Y=a.dashLength;ja=pa[23];pa[23]=Y;za=a.dashTexture;
xd=pa[24];pa[24]=za;Dc=a.depth;ga=pa[22];pa[22]=Dc;fc=a.id;Va=pa[31];pa[31]=fc;Z=a.miterLimit;yb=pa[32];pa[32]=Z;db=C.call(this,g,a,c);Nb=pa[33];pa[33]=db;bb=a.opacity;ob=pa[10];pa[10]=bb;Wa=g.pixelRatio;Ld=pa[34];pa[34]=Wa;Ib=a.scale;Jb=pa[6];pa[6]=Ib;qc=a.scaleFract;Ob=pa[7];pa[7]=qc;jb=a.thickness;Gb=pa[21];pa[21]=jb;Db=a.translate;wb=pa[8];pa[8]=Db;hb=a.translateFract;Yb=pa[9];pa[9]=hb;Pb=H.call(this,g,a,c);qb=pa[3];pa[3]=Pb;W.buffer=a.colorBuffer;Ua=!1;Ub=null;zb=0;bc=!1;pb=ib=0;Ha=1;rb=0;Ka=
5126;kb=La=gb=fb=0;aa(W)?(Ua=!0,Ub=B.createStream(34962,W),Ka=Ub.dtype):(Ub=B.getBuffer(W))?Ka=Ub.dtype:"constant"in W?(Ha=2,"number"===typeof W.constant?(gb=W.constant,La=kb=fb=0):(gb=0<W.constant.length?W.constant[0]:0,La=1<W.constant.length?W.constant[1]:0,kb=2<W.constant.length?W.constant[2]:0,fb=3<W.constant.length?W.constant[3]:0)):(Ub=aa(W.buffer)?B.createStream(34962,W.buffer):B.getBuffer(W.buffer),Ka="type"in W?la[W.type]:Ub.dtype,bc=!!W.normalized,pb=W.size|0,ib=W.offset|0,rb=W.stride|0,
zb=W.divisor|0);Xa=U.buffer;U.buffer=Ub;tb=U.divisor;U.divisor=zb;sb=U.normalized;U.normalized=bc;Oa=U.offset;U.offset=ib;Cc=U.size;U.size=pb;Qa=U.state;U.state=Ha;Kb=U.stride;U.stride=rb;Eb=U.type;U.type=Ka;Ma=U.w;U.w=fb;vd=U.x;U.x=gb;$a=U.y;U.y=La;Lb=U.z;U.z=kb;ua.buffer=a.positionBuffer;Mb=!1;lb=null;Na=0;Zb=!1;ub=Pa=0;vb=1;Sa=0;nb=5126;cb=vc=Ac=gc=0;aa(ua)?(Mb=!0,lb=B.createStream(34962,ua),nb=lb.dtype):(lb=B.getBuffer(ua))?nb=lb.dtype:"constant"in ua?(vb=2,"number"===typeof ua.constant?(Ac=ua.constant,
vc=cb=gc=0):(Ac=0<ua.constant.length?ua.constant[0]:0,vc=1<ua.constant.length?ua.constant[1]:0,cb=2<ua.constant.length?ua.constant[2]:0,gc=3<ua.constant.length?ua.constant[3]:0)):(lb=aa(ua.buffer)?B.createStream(34962,ua.buffer):B.getBuffer(ua.buffer),nb="type"in ua?la[ua.type]:lb.dtype,Zb=!!ua.normalized,ub=ua.size|0,Pa=ua.offset|0,Sa=ua.stride|0,Na=ua.divisor|0);jc=y.buffer;y.buffer=lb;ad=y.divisor;y.divisor=Na;Ya=y.normalized;y.normalized=Zb;md=y.offset;y.offset=Pa;Ab=y.size;y.size=ub;ab=y.state;
y.state=vb;Vb=y.stride;y.stride=Sa;sc=y.type;y.type=nb;Wb=y.w;y.w=gc;Qb=y.x;y.x=Ac;Kc=y.y;y.y=vc;Rb=y.z;y.z=cb;Fa.buffer=a.colorBuffer;Xd=!1;Fc=null;td=0;Mc=!1;pd=Wc=0;nc=1;wc=0;hc=5126;Xb=Tb=rc=eb=0;aa(Fa)?(Xd=!0,Fc=B.createStream(34962,Fa),hc=Fc.dtype):(Fc=B.getBuffer(Fa))?hc=Fc.dtype:"constant"in Fa?(nc=2,"number"===typeof Fa.constant?(rc=Fa.constant,Tb=Xb=eb=0):(rc=0<Fa.constant.length?Fa.constant[0]:0,Tb=1<Fa.constant.length?Fa.constant[1]:0,Xb=2<Fa.constant.length?Fa.constant[2]:0,eb=3<Fa.constant.length?
Fa.constant[3]:0)):(Fc=aa(Fa.buffer)?B.createStream(34962,Fa.buffer):B.getBuffer(Fa.buffer),hc="type"in Fa?la[Fa.type]:Fc.dtype,Mc=!!Fa.normalized,pd=Fa.size|0,Wc=Fa.offset|0,wc=Fa.stride|0,td=Fa.divisor|0);dc=u.buffer;u.buffer=Fc;ic=u.divisor;u.divisor=td;yc=u.normalized;u.normalized=Mc;Bc=u.offset;u.offset=Wc;bd=u.size;u.size=pd;Pc=u.state;u.state=nc;Qc=u.stride;u.stride=wc;Rc=u.type;u.type=hc;Xc=u.w;u.w=eb;kd=u.x;u.x=rc;cd=u.y;u.y=Tb;Yc=u.z;u.z=Xb;Ia.buffer=a.positionBuffer;kc=!1;cc=null;Zc=0;
Tc=!1;zc=dd=0;gd=1;qd=0;Ee=5126;Od=Ra=hd=ze=0;aa(Ia)?(kc=!0,cc=B.createStream(34962,Ia),Ee=cc.dtype):(cc=B.getBuffer(Ia))?Ee=cc.dtype:"constant"in Ia?(gd=2,"number"===typeof Ia.constant?(hd=Ia.constant,Ra=Od=ze=0):(hd=0<Ia.constant.length?Ia.constant[0]:0,Ra=1<Ia.constant.length?Ia.constant[1]:0,Od=2<Ia.constant.length?Ia.constant[2]:0,ze=3<Ia.constant.length?Ia.constant[3]:0)):(cc=aa(Ia.buffer)?B.createStream(34962,Ia.buffer):B.getBuffer(Ia.buffer),Ee="type"in Ia?la[Ia.type]:cc.dtype,Tc=!!Ia.normalized,
zc=Ia.size|0,dd=Ia.offset|0,qd=Ia.stride|0,Zc=Ia.divisor|0);he=p.buffer;p.buffer=cc;pe=p.divisor;p.divisor=Zc;Pd=p.normalized;p.normalized=Tc;Jd=p.offset;p.offset=dd;Hd=p.size;p.size=zc;nd=p.state;p.state=gd;Sc=p.stride;p.stride=qd;ud=p.type;p.type=Ee;sd=p.w;p.w=ze;id=p.x;p.x=hd;wd=p.y;p.y=Ra;Cd=p.z;p.z=Od;Ed=ba.buffer;ba.buffer=e;je=ba.divisor;ba.divisor=0;we=ba.normalized;ba.normalized=!1;Fe=ba.offset;ba.offset=0;le=ba.size;ba.size=0;ke=ba.state;ba.state=1;ie=ba.stride;ba.stride=8;te=ba.type;ba.type=
5126;de=ba.w;ba.w=0;me=ba.x;ba.x=0;Nc=ba.y;ba.y=0;fd=ba.z;ba.z=0;ue=w.buffer;w.buffer=l;qe=w.divisor;w.divisor=0;Kd=w.normalized;w.normalized=!1;Qd=w.offset;w.offset=4;Rd=w.size;w.size=0;Sd=w.state;w.state=1;ne=w.stride;w.stride=8;Ge=w.type;w.type=5126;Ae=w.w;w.w=0;re=w.x;w.x=0;Se=w.y;w.y=0;Te=w.z;w.z=0;mb.buffer=a.positionBuffer;Oe=!1;ve=null;He=0;Je=!1;Le=Ke=0;Ie=1;Md=0;Yd=5126;Id=Me=ee=ce=0;aa(mb)?(Oe=!0,ve=B.createStream(34962,mb),Yd=ve.dtype):(ve=B.getBuffer(mb))?Yd=ve.dtype:"constant"in mb?
(Ie=2,"number"===typeof mb.constant?(ee=mb.constant,Me=Id=ce=0):(ee=0<mb.constant.length?mb.constant[0]:0,Me=1<mb.constant.length?mb.constant[1]:0,Id=2<mb.constant.length?mb.constant[2]:0,ce=3<mb.constant.length?mb.constant[3]:0)):(ve=aa(mb.buffer)?B.createStream(34962,mb.buffer):B.getBuffer(mb.buffer),Yd="type"in mb?la[mb.type]:ve.dtype,Je=!!mb.normalized,Le=mb.size|0,Ke=mb.offset|0,Md=mb.stride|0,He=mb.divisor|0);Td=T.buffer;T.buffer=ve;Ce=T.divisor;T.divisor=He;Ne=T.normalized;T.normalized=Je;
hf=T.offset;T.offset=Ke;bf=T.size;T.size=Le;Ue=T.state;T.state=Ie;Pe=T.stride;T.stride=Md;af=T.type;T.type=Yd;Ye=T.w;T.w=ce;Ve=T.x;T.x=ee;We=T.y;T.y=Me;Ud=T.z;T.z=Id;da.buffer=a.positionBuffer;$d=!1;Xe=null;jf=0;nf=!1;kf=ef=0;lf=1;mf=0;rf=5126;Cf=Bf=sf=of=0;aa(da)?($d=!0,Xe=B.createStream(34962,da),rf=Xe.dtype):(Xe=B.getBuffer(da))?rf=Xe.dtype:"constant"in da?(lf=2,"number"===typeof da.constant?(sf=da.constant,Bf=Cf=of=0):(sf=0<da.constant.length?da.constant[0]:0,Bf=1<da.constant.length?da.constant[1]:
0,Cf=2<da.constant.length?da.constant[2]:0,of=3<da.constant.length?da.constant[3]:0)):(Xe=aa(da.buffer)?B.createStream(34962,da.buffer):B.getBuffer(da.buffer),rf="type"in da?la[da.type]:Xe.dtype,nf=!!da.normalized,kf=da.size|0,ef=da.offset|0,mf=da.stride|0,jf=da.divisor|0);Qe=v.buffer;v.buffer=Xe;De=v.divisor;v.divisor=jf;pf=v.normalized;v.normalized=nf;qf=v.offset;v.offset=ef;Df=v.size;v.size=kf;Gf=v.state;v.state=lf;Af=v.stride;v.stride=mf;Ef=v.type;v.type=rf;Ff=v.w;v.w=of;wf=v.x;v.x=sf;xf=v.y;
v.y=Bf;vf=v.z;v.z=Cf;yf=ma.vert;ma.vert=36;zf=ma.frag;ma.frag=35;M.dirty=!0;d(g,a,c);g.viewportWidth=b;g.viewportHeight=n;wa[0]=I;wa[1]=q;wa[2]=z;wa[3]=t;xa[0]=na;xa[1]=x;xa[2]=A;xa[3]=sa;O.blend_enable=Ja;Aa[0]=J;Aa[1]=Ba;oa[0]=P;oa[1]=Za;oa[2]=ra;oa[3]=fa;O.cull_enable=R;O.cull_face=ha;O.depth_enable=D;Ca[0]=Da;Ca[1]=S;Ca[2]=Q;Ca[3]=ka;O.scissor_enable=Ta;O.stencil_enable=V;X&&(ca.cpuTime+=performance.now()-ya);K.offset=ea;K.count=ia;K.instances=qa;K.primitive=ta;pa[23]=ja;pa[24]=xd;pa[22]=ga;pa[31]=
Va;pa[32]=yb;pa[33]=Nb;pa[10]=ob;pa[34]=Ld;pa[6]=Jb;pa[7]=Ob;pa[21]=Gb;pa[8]=wb;pa[9]=Yb;pa[3]=qb;Ua&&B.destroyStream(Ub);U.buffer=Xa;U.divisor=tb;U.normalized=sb;U.offset=Oa;U.size=Cc;U.state=Qa;U.stride=Kb;U.type=Eb;U.w=Ma;U.x=vd;U.y=$a;U.z=Lb;Mb&&B.destroyStream(lb);y.buffer=jc;y.divisor=ad;y.normalized=Ya;y.offset=md;y.size=Ab;y.state=ab;y.stride=Vb;y.type=sc;y.w=Wb;y.x=Qb;y.y=Kc;y.z=Rb;Xd&&B.destroyStream(Fc);u.buffer=dc;u.divisor=ic;u.normalized=yc;u.offset=Bc;u.size=bd;u.state=Pc;u.stride=
Qc;u.type=Rc;u.w=Xc;u.x=kd;u.y=cd;u.z=Yc;kc&&B.destroyStream(cc);p.buffer=he;p.divisor=pe;p.normalized=Pd;p.offset=Jd;p.size=Hd;p.state=nd;p.stride=Sc;p.type=ud;p.w=sd;p.x=id;p.y=wd;p.z=Cd;ba.buffer=Ed;ba.divisor=je;ba.normalized=we;ba.offset=Fe;ba.size=le;ba.state=ke;ba.stride=ie;ba.type=te;ba.w=de;ba.x=me;ba.y=Nc;ba.z=fd;w.buffer=ue;w.divisor=qe;w.normalized=Kd;w.offset=Qd;w.size=Rd;w.state=Sd;w.stride=ne;w.type=Ge;w.w=Ae;w.x=re;w.y=Se;w.z=Te;Oe&&B.destroyStream(ve);T.buffer=Td;T.divisor=Ce;T.normalized=
Ne;T.offset=hf;T.size=bf;T.state=Ue;T.stride=Pe;T.type=af;T.w=Ye;T.x=Ve;T.y=We;T.z=Ud;$d&&B.destroyStream(Xe);v.buffer=Qe;v.divisor=De;v.normalized=pf;v.offset=qf;v.size=Df;v.state=Gf;v.stride=Af;v.type=Ef;v.w=Ff;v.x=wf;v.y=xf;v.z=vf;ma.vert=yf;ma.frag=zf;M.dirty=!0}}},"$9,color,id,opacity,position,positionFract,scale,scaleFract,translate,translateFract":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v){var Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,Dc,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,
ka,oa;Q=b.attributes;ia=b.buffer;h=b.context;t=b.current;S=b.draw;k=b.elements;X=b.extensions;f=b.framebuffer;x=b.gl;Y=b.isBufferArgs;D=b.next;E=b.shader;d=b.uniforms;G=b.vao;a=D.blend_color;ta=t.blend_color;A=D.blend_equation;ja=t.blend_equation;Dc=D.blend_func;V=t.blend_func;ea=D.colorMask;R=t.colorMask;P=D.depth_range;B=t.depth_range;g=D.polygonOffset_offset;M=t.polygonOffset_offset;K=D.sample_coverage;Da=t.sample_coverage;qa=D.scissor_box;m=t.scissor_box;J=D.stencil_func;aa=t.stencil_func;O=D.stencil_opBack;
ma=t.stencil_opBack;pa=D.stencil_opFront;za=t.stencil_opFront;xa=D.viewport;fa=t.viewport;Aa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};ka={offset:8,stride:8};oa={offset:8,stride:8};return{batch:function(a,d){var c,l,b,r,n,q;c=f.next;c!==f.cur&&(c?x.bindFramebuffer(36160,c.framebuffer):x.bindFramebuffer(36160,null),f.cur=c);if(t.dirty){var A,e,L,E,ha,I,sa,Ba,ra,wa,Ea,la,W,N,xa,qa,Dc,da,ga,$b,Ga,ac,Sb,Z,Fd,yd,Vd,xe,Ad,Nd,oe,fe;A=D.dither;A!==t.dither&&
(A?x.enable(3024):x.disable(3024),t.dither=A);e=D.depth_func;e!==t.depth_func&&(x.depthFunc(e),t.depth_func=e);L=P[0];E=P[1];if(L!==B[0]||E!==B[1])x.depthRange(L,E),B[0]=L,B[1]=E;ha=D.depth_mask;ha!==t.depth_mask&&(x.depthMask(ha),t.depth_mask=ha);I=ea[0];sa=ea[1];Ba=ea[2];ra=ea[3];if(I!==R[0]||sa!==R[1]||Ba!==R[2]||ra!==R[3])x.colorMask(I,sa,Ba,ra),R[0]=I,R[1]=sa,R[2]=Ba,R[3]=ra;wa=D.cull_enable;wa!==t.cull_enable&&(wa?x.enable(2884):x.disable(2884),t.cull_enable=wa);Ea=D.cull_face;Ea!==t.cull_face&&
(x.cullFace(Ea),t.cull_face=Ea);la=D.frontFace;la!==t.frontFace&&(x.frontFace(la),t.frontFace=la);W=D.lineWidth;W!==t.lineWidth&&(x.lineWidth(W),t.lineWidth=W);N=D.polygonOffset_enable;N!==t.polygonOffset_enable&&(N?x.enable(32823):x.disable(32823),t.polygonOffset_enable=N);xa=g[0];qa=g[1];if(xa!==M[0]||qa!==M[1])x.polygonOffset(xa,qa),M[0]=xa,M[1]=qa;Dc=D.sample_alpha;Dc!==t.sample_alpha&&(Dc?x.enable(32926):x.disable(32926),t.sample_alpha=Dc);da=D.sample_enable;da!==t.sample_enable&&(da?x.enable(32928):
x.disable(32928),t.sample_enable=da);ga=K[0];$b=K[1];if(ga!==Da[0]||$b!==Da[1])x.sampleCoverage(ga,$b),Da[0]=ga,Da[1]=$b;Ga=D.stencil_mask;Ga!==t.stencil_mask&&(x.stencilMask(Ga),t.stencil_mask=Ga);ac=J[0];Sb=J[1];Z=J[2];if(ac!==aa[0]||Sb!==aa[1]||Z!==aa[2])x.stencilFunc(ac,Sb,Z),aa[0]=ac,aa[1]=Sb,aa[2]=Z;Fd=pa[0];yd=pa[1];Vd=pa[2];xe=pa[3];if(Fd!==za[0]||yd!==za[1]||Vd!==za[2]||xe!==za[3])x.stencilOpSeparate(Fd,yd,Vd,xe),za[0]=Fd,za[1]=yd,za[2]=Vd,za[3]=xe;Ad=O[0];Nd=O[1];oe=O[2];fe=O[3];if(Ad!==
ma[0]||Nd!==ma[1]||oe!==ma[2]||fe!==ma[3])x.stencilOpSeparate(Ad,Nd,oe,fe),ma[0]=Ad,ma[1]=Nd,ma[2]=oe,ma[3]=fe}x.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;x.enable(3042);t.blend_enable=!0;x.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;x.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;x.disable(2929);t.depth_enable=!1;x.enable(3089);t.scissor_enable=!0;x.disable(2960);t.stencil_enable=!1;if(l=t.profile)b=performance.now(),ca.count+=d;x.useProgram(F.program);
r=X.angle_instanced_arrays;var Dd;G.setVAO(null);Dd=S.instances;for(n=0;n<d;++n){q=a[n];var be,ge,ae,Be,Ze,$e,Gd,ye,se,Zd,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb;be=q.viewport;ge=be.x|0;ae=be.y|0;Be="width"in be?be.width|0:h.framebufferWidth-ge;Ze="height"in be?be.height|0:h.framebufferHeight-ae;$e=h.viewportWidth;h.viewportWidth=
Be;Gd=h.viewportHeight;h.viewportHeight=Ze;x.viewport(ge,ae,Be,Ze);fa[0]=ge;fa[1]=ae;fa[2]=Be;fa[3]=Ze;ye=q.viewport;se=ye.x|0;Zd=ye.y|0;Wd="width"in ye?ye.width|0:h.framebufferWidth-se;Bd="height"in ye?ye.height|0:h.framebufferHeight-Zd;x.scissor(se,Zd,Wd,Bd);m[0]=se;m[1]=Zd;m[2]=Wd;m[3]=Bd;ka.buffer=q.positionBuffer;ld=!1;$c=null;rd=0;Lc=!1;Gc=od=0;ed=1;Oc=0;jd=5126;xb=tc=Fb=Bb=0;Y(ka)?(ld=!0,$c=ia.createStream(34962,ka),jd=$c.dtype):($c=ia.getBuffer(ka))?jd=$c.dtype:"constant"in ka?(ed=2,"number"===
typeof ka.constant?(Fb=ka.constant,tc=xb=Bb=0):(Fb=0<ka.constant.length?ka.constant[0]:0,tc=1<ka.constant.length?ka.constant[1]:0,xb=2<ka.constant.length?ka.constant[2]:0,Bb=3<ka.constant.length?ka.constant[3]:0)):($c=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),jd="type"in ka?Aa[ka.type]:$c.dtype,Lc=!!ka.normalized,Gc=ka.size|0,od=ka.offset|0,Oc=ka.stride|0,rd=ka.divisor|0);xc=u.location;Cb=Q[xc];if(1===ed){Cb.buffer||x.enableVertexAttribArray(xc);Jc=Gc||2;if(Cb.type!==jd||
Cb.size!==Jc||Cb.buffer!==$c||Cb.normalized!==Lc||Cb.offset!==od||Cb.stride!==Oc)x.bindBuffer(34962,$c.buffer),x.vertexAttribPointer(xc,Jc,jd,Lc,Oc,od),Cb.type=jd,Cb.size=Jc,Cb.buffer=$c,Cb.normalized=Lc,Cb.offset=od,Cb.stride=Oc;Cb.divisor!==rd&&(r.vertexAttribDivisorANGLE(xc,rd),Cb.divisor=rd)}else if(Cb.buffer&&(x.disableVertexAttribArray(xc),Cb.buffer=null),Cb.x!==Fb||Cb.y!==tc||Cb.z!==xb||Cb.w!==Bb)x.vertexAttrib4f(xc,Fb,tc,xb,Bb),Cb.x=Fb,Cb.y=tc,Cb.z=xb,Cb.w=Bb;oa.buffer=q.positionFractBuffer;
lc=!1;Hc=null;Vc=0;Uc=!1;ec=Ec=0;Ic=1;oc=0;pc=5126;uc=Va=fc=mc=0;Y(oa)?(lc=!0,Hc=ia.createStream(34962,oa),pc=Hc.dtype):(Hc=ia.getBuffer(oa))?pc=Hc.dtype:"constant"in oa?(Ic=2,"number"===typeof oa.constant?(fc=oa.constant,Va=uc=mc=0):(fc=0<oa.constant.length?oa.constant[0]:0,Va=1<oa.constant.length?oa.constant[1]:0,uc=2<oa.constant.length?oa.constant[2]:0,mc=3<oa.constant.length?oa.constant[3]:0)):(Hc=Y(oa.buffer)?ia.createStream(34962,oa.buffer):ia.getBuffer(oa.buffer),pc="type"in oa?Aa[oa.type]:
Hc.dtype,Uc=!!oa.normalized,ec=oa.size|0,Ec=oa.offset|0,oc=oa.stride|0,Vc=oa.divisor|0);yb=p.location;db=Q[yb];if(1===Ic){db.buffer||x.enableVertexAttribArray(yb);Nb=ec||2;if(db.type!==pc||db.size!==Nb||db.buffer!==Hc||db.normalized!==Uc||db.offset!==Ec||db.stride!==oc)x.bindBuffer(34962,Hc.buffer),x.vertexAttribPointer(yb,Nb,pc,Uc,oc,Ec),db.type=pc,db.size=Nb,db.buffer=Hc,db.normalized=Uc,db.offset=Ec,db.stride=oc;db.divisor!==Vc&&(r.vertexAttribDivisorANGLE(yb,Vc),db.divisor=Vc)}else if(db.buffer&&
(x.disableVertexAttribArray(yb),db.buffer=null),db.x!==fc||db.y!==Va||db.z!==uc||db.w!==mc)x.vertexAttrib4f(yb,fc,Va,uc,mc),db.x=fc,db.y=Va,db.z=uc,db.w=mc;bb=q.fill;ob=bb[0];Ld=bb[1];Jb=bb[2];Ob=bb[3];n&&Wa===ob&&Ib===Ld&&qc===Jb&&jb===Ob||(Wa=ob,Ib=Ld,qc=Jb,jb=Ob,x.uniform4f(H.location,ob,Ld,Jb,Ob));Gb=q.scale;Db=Gb[0];hb=Gb[1];n&&wb===Db&&Yb===hb||(wb=Db,Yb=hb,x.uniform2f(ba.location,Db,hb));Pb=q.scaleFract;qb=Pb[0];Ub=Pb[1];n&&Ua===qb&&zb===Ub||(Ua=qb,zb=Ub,x.uniform2f(w.location,qb,Ub));bc=q.translate;
ib=bc[0];Ha=bc[1];n&&pb===ib&&rb===Ha||(pb=ib,rb=Ha,x.uniform2f(T.location,ib,Ha));Ka=q.translateFract;fb=Ka[0];La=Ka[1];n&&gb===fb&&kb===La||(gb=fb,kb=La,x.uniform2f(v.location,fb,La));Xa=q.id;n&&tb===Xa||(tb=Xa,x.uniform1f(U.location,Xa));sb=q.opacity;n&&Oa===sb||(Oa=sb,x.uniform1f(y.location,sb));Cc=C.call(this,h,q,n);Qa=null;(Qa=(Kb=Y(Cc))?k.createStream(Cc):k.getElements(Cc))&&x.bindBuffer(34963,Qa.buffer.buffer);if(Eb=Qa?Qa.vertCount:-1)0<Dd?Qa?r.drawElementsInstancedANGLE(4,Eb,Qa.type,0<<(Qa.type-
5121>>1),Dd):r.drawArraysInstancedANGLE(4,0,Eb,Dd):0>Dd&&(Qa?x.drawElements(4,Eb,Qa.type,0<<(Qa.type-5121>>1)):x.drawArrays(4,0,Eb)),h.viewportWidth=$e,h.viewportHeight=Gd,ld&&ia.destroyStream($c),lc&&ia.destroyStream(Hc),Kb&&k.destroyStream(Qa)}t.dirty=!0;G.setVAO(null);l&&(ca.cpuTime+=performance.now()-b)},draw:function(a){var d,c,l,b,r,n,q,A,e,E,C,ha,I,sa,Ba,ra,wa,Ea,la,W,xa,F;d=f.next;d!==f.cur&&(d?x.bindFramebuffer(36160,d.framebuffer):x.bindFramebuffer(36160,null),f.cur=d);if(t.dirty){d=D.dither;
d!==t.dither&&(d?x.enable(3024):x.disable(3024),t.dither=d);d=D.depth_func;d!==t.depth_func&&(x.depthFunc(d),t.depth_func=d);d=P[0];n=P[1];if(d!==B[0]||n!==B[1])x.depthRange(d,n),B[0]=d,B[1]=n;d=D.depth_mask;d!==t.depth_mask&&(x.depthMask(d),t.depth_mask=d);d=ea[0];n=ea[1];c=ea[2];l=ea[3];if(d!==R[0]||n!==R[1]||c!==R[2]||l!==R[3])x.colorMask(d,n,c,l),R[0]=d,R[1]=n,R[2]=c,R[3]=l;d=D.cull_enable;d!==t.cull_enable&&(d?x.enable(2884):x.disable(2884),t.cull_enable=d);d=D.cull_face;d!==t.cull_face&&(x.cullFace(d),
t.cull_face=d);d=D.frontFace;d!==t.frontFace&&(x.frontFace(d),t.frontFace=d);d=D.lineWidth;d!==t.lineWidth&&(x.lineWidth(d),t.lineWidth=d);d=D.polygonOffset_enable;d!==t.polygonOffset_enable&&(d?x.enable(32823):x.disable(32823),t.polygonOffset_enable=d);d=g[0];n=g[1];if(d!==M[0]||n!==M[1])x.polygonOffset(d,n),M[0]=d,M[1]=n;d=D.sample_alpha;d!==t.sample_alpha&&(d?x.enable(32926):x.disable(32926),t.sample_alpha=d);d=D.sample_enable;d!==t.sample_enable&&(d?x.enable(32928):x.disable(32928),t.sample_enable=
d);d=K[0];n=K[1];if(d!==Da[0]||n!==Da[1])x.sampleCoverage(d,n),Da[0]=d,Da[1]=n;d=D.stencil_mask;d!==t.stencil_mask&&(x.stencilMask(d),t.stencil_mask=d);d=J[0];n=J[1];c=J[2];if(d!==aa[0]||n!==aa[1]||c!==aa[2])x.stencilFunc(d,n,c),aa[0]=d,aa[1]=n,aa[2]=c;d=pa[0];n=pa[1];c=pa[2];l=pa[3];if(d!==za[0]||n!==za[1]||c!==za[2]||l!==za[3])x.stencilOpSeparate(d,n,c,l),za[0]=d,za[1]=n,za[2]=c,za[3]=l;d=O[0];n=O[1];c=O[2];l=O[3];if(d!==ma[0]||n!==ma[1]||c!==ma[2]||l!==ma[3])x.stencilOpSeparate(d,n,c,l),ma[0]=
d,ma[1]=n,ma[2]=c,ma[3]=l}d=a.viewport;c=d.x|0;l=d.y|0;b="width"in d?d.width|0:h.framebufferWidth-c;r="height"in d?d.height|0:h.framebufferHeight-l;d=h.viewportWidth;h.viewportWidth=b;n=h.viewportHeight;h.viewportHeight=r;x.viewport(c,l,b,r);fa[0]=c;fa[1]=l;fa[2]=b;fa[3]=r;x.blendColor(0,0,0,0);ta[0]=0;ta[1]=0;ta[2]=0;ta[3]=0;x.enable(3042);t.blend_enable=!0;x.blendEquationSeparate(32774,32774);ja[0]=32774;ja[1]=32774;x.blendFuncSeparate(770,771,773,1);V[0]=770;V[1]=771;V[2]=773;V[3]=1;x.disable(2929);
t.depth_enable=!1;r=a.viewport;c=r.x|0;l=r.y|0;b="width"in r?r.width|0:h.framebufferWidth-c;r="height"in r?r.height|0:h.framebufferHeight-l;x.scissor(c,l,b,r);m[0]=c;m[1]=l;m[2]=b;m[3]=r;x.enable(3089);t.scissor_enable=!0;x.disable(2960);t.stencil_enable=!1;if(c=t.profile)q=performance.now(),ca.count++;x.useProgram(N.program);l=X.angle_instanced_arrays;G.setVAO(null);ka.buffer=a.positionBuffer;b=!1;A=0;e=!1;C=E=0;ha=1;I=0;sa=5126;Ea=wa=ra=Ba=0;Y(ka)?(b=!0,r=ia.createStream(34962,ka),sa=r.dtype):(r=
ia.getBuffer(ka))?sa=r.dtype:"constant"in ka?(ha=2,"number"===typeof ka.constant?(ra=ka.constant,wa=Ea=Ba=0):(ra=0<ka.constant.length?ka.constant[0]:0,wa=1<ka.constant.length?ka.constant[1]:0,Ea=2<ka.constant.length?ka.constant[2]:0,Ba=3<ka.constant.length?ka.constant[3]:0)):(r=Y(ka.buffer)?ia.createStream(34962,ka.buffer):ia.getBuffer(ka.buffer),sa="type"in ka?Aa[ka.type]:r.dtype,e=!!ka.normalized,C=ka.size|0,E=ka.offset|0,I=ka.stride|0,A=ka.divisor|0);la=u.location;W=Q[la];if(1===ha){W.buffer||
x.enableVertexAttribArray(la);C=C||2;if(W.type!==sa||W.size!==C||W.buffer!==r||W.normalized!==e||W.offset!==E||W.stride!==I)x.bindBuffer(34962,r.buffer),x.vertexAttribPointer(la,C,sa,e,I,E),W.type=sa,W.size=C,W.buffer=r,W.normalized=e,W.offset=E,W.stride=I;W.divisor!==A&&(l.vertexAttribDivisorANGLE(la,A),W.divisor=A)}else if(W.buffer&&(x.disableVertexAttribArray(la),W.buffer=null),W.x!==ra||W.y!==wa||W.z!==Ea||W.w!==Ba)x.vertexAttrib4f(la,ra,wa,Ea,Ba),W.x=ra,W.y=wa,W.z=Ea,W.w=Ba;oa.buffer=a.positionFractBuffer;
A=!1;E=0;I=!1;Ba=sa=0;ra=1;la=0;W=5126;F=xa=Ea=wa=0;Y(oa)?(A=!0,e=ia.createStream(34962,oa),W=e.dtype):(e=ia.getBuffer(oa))?W=e.dtype:"constant"in oa?(ra=2,"number"===typeof oa.constant?(Ea=oa.constant,xa=F=wa=0):(Ea=0<oa.constant.length?oa.constant[0]:0,xa=1<oa.constant.length?oa.constant[1]:0,F=2<oa.constant.length?oa.constant[2]:0,wa=3<oa.constant.length?oa.constant[3]:0)):(e=Y(oa.buffer)?ia.createStream(34962,oa.buffer):ia.getBuffer(oa.buffer),W="type"in oa?Aa[oa.type]:e.dtype,I=!!oa.normalized,
Ba=oa.size|0,sa=oa.offset|0,la=oa.stride|0,E=oa.divisor|0);C=p.location;ha=Q[C];if(1===ra){ha.buffer||x.enableVertexAttribArray(C);Ba=Ba||2;if(ha.type!==W||ha.size!==Ba||ha.buffer!==e||ha.normalized!==I||ha.offset!==sa||ha.stride!==la)x.bindBuffer(34962,e.buffer),x.vertexAttribPointer(C,Ba,W,I,la,sa),ha.type=W,ha.size=Ba,ha.buffer=e,ha.normalized=I,ha.offset=sa,ha.stride=la;ha.divisor!==E&&(l.vertexAttribDivisorANGLE(C,E),ha.divisor=E)}else if(ha.buffer&&(x.disableVertexAttribArray(C),ha.buffer=null),
ha.x!==Ea||ha.y!==xa||ha.z!==F||ha.w!==wa)x.vertexAttrib4f(C,Ea,xa,F,wa),ha.x=Ea,ha.y=xa,ha.z=F,ha.w=wa;E=a.fill;x.uniform4f(H.location,E[0],E[1],E[2],E[3]);E=a.scale;x.uniform2f(ba.location,E[0],E[1]);E=a.scaleFract;x.uniform2f(w.location,E[0],E[1]);E=a.translate;x.uniform2f(T.location,E[0],E[1]);E=a.translateFract;x.uniform2f(v.location,E[0],E[1]);x.uniform1f(U.location,a.id);x.uniform1f(y.location,a.opacity);E=L.call(this,h,a,0);(E=(a=Y(E))?k.createStream(E):k.getElements(E))&&x.bindBuffer(34963,
E.buffer.buffer);if(I=E?E.vertCount:-1)sa=S.instances,0<sa?E?l.drawElementsInstancedANGLE(4,I,E.type,0<<(E.type-5121>>1),sa):l.drawArraysInstancedANGLE(4,0,I,sa):0>sa&&(E?x.drawElements(4,I,E.type,0<<(E.type-5121>>1)):x.drawArrays(4,0,I)),t.dirty=!0,G.setVAO(null),h.viewportWidth=d,h.viewportHeight=n,c&&(ca.cpuTime+=performance.now()-q),b&&ia.destroyStream(r),A&&ia.destroyStream(e),a&&k.destroyStream(E)},scope:function(g,f,m){var b,x,r,n,z,J,w,P,O,B,I,sa,Ba,ra,fa,R,G,L,u,K,y,v,aa,M,C,p,pa,N,Da,F,
Q,H,U,T,V,X,ea,ba,ma,ta,ja,za,ga,Z,Gd,ye,se,Zd,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb;b=g.viewport;x=b.x|0;r=b.y|0;n="width"in b?b.width|0:h.framebufferWidth-x;z="height"in b?b.height|0:h.framebufferHeight-r;J=h.viewportWidth;h.viewportWidth=n;w=h.viewportHeight;h.viewportHeight=z;P=xa[0];xa[0]=x;O=xa[1];xa[1]=r;B=xa[2];xa[2]=n;I=xa[3];xa[3]=
z;sa=a[0];a[0]=0;Ba=a[1];a[1]=0;ra=a[2];a[2]=0;fa=a[3];a[3]=0;R=D.blend_enable;D.blend_enable=!0;G=A[0];A[0]=32774;L=A[1];A[1]=32774;u=Dc[0];Dc[0]=770;K=Dc[1];Dc[1]=771;y=Dc[2];Dc[2]=773;v=Dc[3];Dc[3]=1;aa=D.depth_enable;D.depth_enable=!1;M=g.viewport;C=M.x|0;p=M.y|0;pa="width"in M?M.width|0:h.framebufferWidth-C;N="height"in M?M.height|0:h.framebufferHeight-p;Da=qa[0];qa[0]=C;F=qa[1];qa[1]=p;Q=qa[2];qa[2]=pa;H=qa[3];qa[3]=N;U=D.scissor_enable;D.scissor_enable=!0;T=D.stencil_enable;D.stencil_enable=
!1;if(V=t.profile)X=performance.now(),ca.count++;ea=e.call(this,h,g,m);ba=null;ba=(ma=Y(ea))?k.createStream(ea):k.getElements(ea);ta=S.elements;S.elements=ba;ja=S.offset;S.offset=0;za=ba?ba.vertCount:-1;ga=S.count;S.count=za;Z=S.primitive;S.primitive=4;Gd=g.fill;ye=d[14];d[14]=Gd;se=g.id;Zd=d[31];d[31]=se;Wd=g.opacity;Bd=d[10];d[10]=Wd;ld=h.pixelRatio;$c=d[34];d[34]=ld;rd=g.scale;Lc=d[6];d[6]=rd;od=g.scaleFract;Gc=d[7];d[7]=od;ed=g.translate;Oc=d[8];d[8]=ed;jd=g.translateFract;Bb=d[9];d[9]=jd;Fb=
l.call(this,h,g,m);tc=d[3];d[3]=Fb;ka.buffer=g.positionBuffer;xb=!1;xc=null;Cb=0;Jc=!1;Hc=lc=0;Vc=1;Uc=0;Ec=5126;pc=oc=Ic=ec=0;Y(ka)?(xb=!0,xc=ia.createStream(34962,ka),Ec=xc.dtype):(xc=ia.getBuffer(ka))?Ec=xc.dtype:"constant"in ka?(Vc=2,"number"===typeof ka.constant?(Ic=ka.constant,oc=pc=ec=0):(Ic=0<ka.constant.length?ka.constant[0]:0,oc=1<ka.constant.length?ka.constant[1]:0,pc=2<ka.constant.length?ka.constant[2]:0,ec=3<ka.constant.length?ka.constant[3]:0)):(xc=Y(ka.buffer)?ia.createStream(34962,
ka.buffer):ia.getBuffer(ka.buffer),Ec="type"in ka?Aa[ka.type]:xc.dtype,Jc=!!ka.normalized,Hc=ka.size|0,lc=ka.offset|0,Uc=ka.stride|0,Cb=ka.divisor|0);mc=q.buffer;q.buffer=xc;fc=q.divisor;q.divisor=Cb;Va=q.normalized;q.normalized=Jc;uc=q.offset;q.offset=lc;yb=q.size;q.size=Hc;db=q.state;q.state=Vc;Nb=q.stride;q.stride=Uc;bb=q.type;q.type=Ec;ob=q.w;q.w=ec;Wa=q.x;q.x=Ic;Ld=q.y;q.y=oc;Ib=q.z;q.z=pc;oa.buffer=g.positionFractBuffer;Jb=!1;qc=null;Ob=0;jb=!1;Db=Gb=0;wb=1;hb=0;Yb=5126;Ub=Ua=qb=Pb=0;Y(oa)?
(Jb=!0,qc=ia.createStream(34962,oa),Yb=qc.dtype):(qc=ia.getBuffer(oa))?Yb=qc.dtype:"constant"in oa?(wb=2,"number"===typeof oa.constant?(qb=oa.constant,Ua=Ub=Pb=0):(qb=0<oa.constant.length?oa.constant[0]:0,Ua=1<oa.constant.length?oa.constant[1]:0,Ub=2<oa.constant.length?oa.constant[2]:0,Pb=3<oa.constant.length?oa.constant[3]:0)):(qc=Y(oa.buffer)?ia.createStream(34962,oa.buffer):ia.getBuffer(oa.buffer),Yb="type"in oa?Aa[oa.type]:qc.dtype,jb=!!oa.normalized,Db=oa.size|0,Gb=oa.offset|0,hb=oa.stride|0,
Ob=oa.divisor|0);zb=c.buffer;c.buffer=qc;bc=c.divisor;c.divisor=Ob;ib=c.normalized;c.normalized=jb;pb=c.offset;c.offset=Gb;Ha=c.size;c.size=Db;rb=c.state;c.state=wb;Ka=c.stride;c.stride=hb;fb=c.type;c.type=Yb;gb=c.w;c.w=Pb;La=c.x;c.x=qb;kb=c.y;c.y=Ua;Xa=c.z;c.z=Ub;tb=E.vert;E.vert=42;sb=E.frag;E.frag=41;t.dirty=!0;f(h,g,m);h.viewportWidth=J;h.viewportHeight=w;xa[0]=P;xa[1]=O;xa[2]=B;xa[3]=I;a[0]=sa;a[1]=Ba;a[2]=ra;a[3]=fa;D.blend_enable=R;A[0]=G;A[1]=L;Dc[0]=u;Dc[1]=K;Dc[2]=y;Dc[3]=v;D.depth_enable=
aa;qa[0]=Da;qa[1]=F;qa[2]=Q;qa[3]=H;D.scissor_enable=U;D.stencil_enable=T;V&&(ca.cpuTime+=performance.now()-X);ma&&k.destroyStream(ba);S.elements=ta;S.offset=ja;S.count=ga;S.primitive=Z;d[14]=ye;d[31]=Zd;d[10]=Bd;d[34]=$c;d[6]=Lc;d[7]=Gc;d[8]=Oc;d[9]=Bb;d[3]=tc;xb&&ia.destroyStream(xc);q.buffer=mc;q.divisor=fc;q.normalized=Va;q.offset=uc;q.size=yb;q.state=db;q.stride=Nb;q.type=bb;q.w=ob;q.x=Wa;q.y=Ld;q.z=Ib;Jb&&ia.destroyStream(qc);c.buffer=zb;c.divisor=bc;c.normalized=ib;c.offset=pb;c.size=Ha;c.state=
rb;c.stride=Ka;c.type=fb;c.w=gb;c.x=La;c.y=kb;c.z=Xa;E.vert=tb;E.frag=sb;t.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,markerTexture,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,ga,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta){var r,n,z,va,Ca,xd,Hb,ha,I,sa,Ba,ra,wa,Ea,la,W,ua,Fa,Ia,mb,da,Z,
$b,Ga,ac,Sb,Ra,Fd,yd,Vd,xe,Ad,Nd,oe,fe,Dd,be,ge,ae;r=b.attributes;n=b.buffer;z=b.context;va=b.current;Ca=b.draw;xd=b.elements;Hb=b.extensions;ha=b.framebuffer;I=b.gl;sa=b.isBufferArgs;Ba=b.next;ra=b.shader;wa=b.uniforms;Ea=b.vao;la=Ba.blend_color;W=va.blend_color;ua=Ba.blend_equation;Fa=va.blend_equation;Ia=Ba.blend_func;mb=va.blend_func;da=Ba.colorMask;Z=va.colorMask;$b=Ba.depth_range;Ga=va.depth_range;ac=Ba.polygonOffset_offset;Sb=va.polygonOffset_offset;Ra=Ba.sample_coverage;Fd=va.sample_coverage;
yd=Ba.scissor_box;Vd=va.scissor_box;xe=Ba.stencil_func;Ad=va.stencil_func;Nd=Ba.stencil_opBack;oe=va.stencil_opBack;fe=Ba.stencil_opFront;Dd=va.stencil_opFront;be=Ba.viewport;ge=va.viewport;ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,d){var c,f,h,l,k,b;c=ha.next;c!==ha.cur&&(c?I.bindFramebuffer(36160,c.framebuffer):I.bindFramebuffer(36160,null),ha.cur=c);if(va.dirty){var q,t,x,e,w,E,ra,G,L,D,u,la,y,v,C,wa,p,N,F,Q,S,H,U,
T,X,ba,ia,Y,Ia,uc,yb,db,Nb,bb;q=Ba.dither;q!==va.dither&&(q?I.enable(3024):I.disable(3024),va.dither=q);t=ua[0];x=ua[1];if(t!==Fa[0]||x!==Fa[1])I.blendEquationSeparate(t,x),Fa[0]=t,Fa[1]=x;e=Ba.depth_func;e!==va.depth_func&&(I.depthFunc(e),va.depth_func=e);w=$b[0];E=$b[1];if(w!==Ga[0]||E!==Ga[1])I.depthRange(w,E),Ga[0]=w,Ga[1]=E;ra=Ba.depth_mask;ra!==va.depth_mask&&(I.depthMask(ra),va.depth_mask=ra);G=da[0];L=da[1];D=da[2];u=da[3];if(G!==Z[0]||L!==Z[1]||D!==Z[2]||u!==Z[3])I.colorMask(G,L,D,u),Z[0]=
G,Z[1]=L,Z[2]=D,Z[3]=u;la=Ba.cull_enable;la!==va.cull_enable&&(la?I.enable(2884):I.disable(2884),va.cull_enable=la);y=Ba.cull_face;y!==va.cull_face&&(I.cullFace(y),va.cull_face=y);v=Ba.frontFace;v!==va.frontFace&&(I.frontFace(v),va.frontFace=v);C=Ba.lineWidth;C!==va.lineWidth&&(I.lineWidth(C),va.lineWidth=C);wa=Ba.polygonOffset_enable;wa!==va.polygonOffset_enable&&(wa?I.enable(32823):I.disable(32823),va.polygonOffset_enable=wa);p=ac[0];N=ac[1];if(p!==Sb[0]||N!==Sb[1])I.polygonOffset(p,N),Sb[0]=p,
Sb[1]=N;F=Ba.sample_alpha;F!==va.sample_alpha&&(F?I.enable(32926):I.disable(32926),va.sample_alpha=F);Q=Ba.sample_enable;Q!==va.sample_enable&&(Q?I.enable(32928):I.disable(32928),va.sample_enable=Q);S=Ra[0];H=Ra[1];if(S!==Fd[0]||H!==Fd[1])I.sampleCoverage(S,H),Fd[0]=S,Fd[1]=H;U=Ba.stencil_mask;U!==va.stencil_mask&&(I.stencilMask(U),va.stencil_mask=U);T=xe[0];X=xe[1];ba=xe[2];if(T!==Ad[0]||X!==Ad[1]||ba!==Ad[2])I.stencilFunc(T,X,ba),Ad[0]=T,Ad[1]=X,Ad[2]=ba;ia=fe[0];Y=fe[1];Ia=fe[2];uc=fe[3];if(ia!==
Dd[0]||Y!==Dd[1]||Ia!==Dd[2]||uc!==Dd[3])I.stencilOpSeparate(ia,Y,Ia,uc),Dd[0]=ia,Dd[1]=Y,Dd[2]=Ia,Dd[3]=uc;yb=Nd[0];db=Nd[1];Nb=Nd[2];bb=Nd[3];if(yb!==oe[0]||db!==oe[1]||Nb!==oe[2]||bb!==oe[3])I.stencilOpSeparate(yb,db,Nb,bb),oe[0]=yb,oe[1]=db,oe[2]=Nb,oe[3]=bb}I.blendColor(0,0,0,1);W[0]=0;W[1]=0;W[2]=0;W[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;I.enable(3089);va.scissor_enable=!0;I.disable(2960);
va.stencil_enable=!1;if(f=va.profile)h=performance.now(),ca.count+=d;I.useProgram(ta.program);l=Hb.angle_instanced_arrays;var ob;Ea.setVAO(null);I.uniform1i(J.location,!1);I.uniform1i(za.location,M.bind());ob=Ca.instances;for(k=0;k<d;++k){b=a[k];var Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,
Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,yd,be,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf;Wa=b.viewport;Ld=Wa.x|0;Ib=Wa.y|0;Jb="width"in Wa?Wa.width|0:z.framebufferWidth-Ld;qc="height"in Wa?Wa.height|0:z.framebufferHeight-Ib;Ob=z.viewportWidth;
z.viewportWidth=Jb;jb=z.viewportHeight;z.viewportHeight=qc;I.viewport(Ld,Ib,Jb,qc);ge[0]=Ld;ge[1]=Ib;ge[2]=Jb;ge[3]=qc;Gb=b.viewport;Db=Gb.x|0;wb=Gb.y|0;hb="width"in Gb?Gb.width|0:z.framebufferWidth-Db;Yb="height"in Gb?Gb.height|0:z.framebufferHeight-wb;I.scissor(Db,wb,hb,Yb);Vd[0]=Db;Vd[1]=wb;Vd[2]=hb;Vd[3]=Yb;Pb=A.call(this,z,b,k);qb=!1;Ua=null;Ub=0;zb=!1;ib=bc=0;pb=1;Ha=0;rb=5126;La=gb=fb=Ka=0;sa(Pb)?(qb=!0,Ua=n.createStream(34962,Pb),rb=Ua.dtype):(Ua=n.getBuffer(Pb))?rb=Ua.dtype:"constant"in Pb?
(pb=2,"number"===typeof Pb.constant?(fb=Pb.constant,gb=La=Ka=0):(fb=0<Pb.constant.length?Pb.constant[0]:0,gb=1<Pb.constant.length?Pb.constant[1]:0,La=2<Pb.constant.length?Pb.constant[2]:0,Ka=3<Pb.constant.length?Pb.constant[3]:0)):(Ua=sa(Pb.buffer)?n.createStream(34962,Pb.buffer):n.getBuffer(Pb.buffer),rb="type"in Pb?ae[Pb.type]:Ua.dtype,zb=!!Pb.normalized,ib=Pb.size|0,bc=Pb.offset|0,Ha=Pb.stride|0,Ub=Pb.divisor|0);kb=Ja.location;Xa=r[kb];if(1===pb){Xa.buffer||I.enableVertexAttribArray(kb);tb=ib||
1;if(Xa.type!==rb||Xa.size!==tb||Xa.buffer!==Ua||Xa.normalized!==zb||Xa.offset!==bc||Xa.stride!==Ha)I.bindBuffer(34962,Ua.buffer),I.vertexAttribPointer(kb,tb,rb,zb,Ha,bc),Xa.type=rb,Xa.size=tb,Xa.buffer=Ua,Xa.normalized=zb,Xa.offset=bc,Xa.stride=Ha;Xa.divisor!==Ub&&(l.vertexAttribDivisorANGLE(kb,Ub),Xa.divisor=Ub)}else if(Xa.buffer&&(I.disableVertexAttribArray(kb),Xa.buffer=null),Xa.x!==fb||Xa.y!==gb||Xa.z!==La||Xa.w!==Ka)I.vertexAttrib4f(kb,fb,gb,La,Ka),Xa.x=fb,Xa.y=gb,Xa.z=La,Xa.w=Ka;sb=ja.call(this,
z,b,k);Oa=!1;Cc=null;Qa=0;Kb=!1;Ma=Eb=0;vd=1;$a=0;Lb=5126;Zb=Na=lb=Mb=0;sa(sb)?(Oa=!0,Cc=n.createStream(34962,sb),Lb=Cc.dtype):(Cc=n.getBuffer(sb))?Lb=Cc.dtype:"constant"in sb?(vd=2,"number"===typeof sb.constant?(lb=sb.constant,Na=Zb=Mb=0):(lb=0<sb.constant.length?sb.constant[0]:0,Na=1<sb.constant.length?sb.constant[1]:0,Zb=2<sb.constant.length?sb.constant[2]:0,Mb=3<sb.constant.length?sb.constant[3]:0)):(Cc=sa(sb.buffer)?n.createStream(34962,sb.buffer):n.getBuffer(sb.buffer),Lb="type"in sb?ae[sb.type]:
Cc.dtype,Kb=!!sb.normalized,Ma=sb.size|0,Eb=sb.offset|0,$a=sb.stride|0,Qa=sb.divisor|0);Pa=Za.location;ub=r[Pa];if(1===vd){ub.buffer||I.enableVertexAttribArray(Pa);vb=Ma||1;if(ub.type!==Lb||ub.size!==vb||ub.buffer!==Cc||ub.normalized!==Kb||ub.offset!==Eb||ub.stride!==$a)I.bindBuffer(34962,Cc.buffer),I.vertexAttribPointer(Pa,vb,Lb,Kb,$a,Eb),ub.type=Lb,ub.size=vb,ub.buffer=Cc,ub.normalized=Kb,ub.offset=Eb,ub.stride=$a;ub.divisor!==Qa&&(l.vertexAttribDivisorANGLE(Pa,Qa),ub.divisor=Qa)}else if(ub.buffer&&
(I.disableVertexAttribArray(Pa),ub.buffer=null),ub.x!==lb||ub.y!==Na||ub.z!==Zb||ub.w!==Mb)I.vertexAttrib4f(Pa,lb,Na,Zb,Mb),ub.x=lb,ub.y=Na,ub.z=Zb,ub.w=Mb;Sa=ga.call(this,z,b,k);nb=!1;gc=null;Ac=0;vc=!1;jc=cb=0;ad=1;Ya=0;md=5126;sc=Vb=ab=Ab=0;sa(Sa)?(nb=!0,gc=n.createStream(34962,Sa),md=gc.dtype):(gc=n.getBuffer(Sa))?md=gc.dtype:"constant"in Sa?(ad=2,"number"===typeof Sa.constant?(ab=Sa.constant,Vb=sc=Ab=0):(ab=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?
Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(gc=sa(Sa.buffer)?n.createStream(34962,Sa.buffer):n.getBuffer(Sa.buffer),md="type"in Sa?ae[Sa.type]:gc.dtype,vc=!!Sa.normalized,jc=Sa.size|0,cb=Sa.offset|0,Ya=Sa.stride|0,Ac=Sa.divisor|0);Wb=na.location;Qb=r[Wb];if(1===ad){Qb.buffer||I.enableVertexAttribArray(Wb);Kc=jc||1;if(Qb.type!==md||Qb.size!==Kc||Qb.buffer!==gc||Qb.normalized!==vc||Qb.offset!==cb||Qb.stride!==Ya)I.bindBuffer(34962,gc.buffer),I.vertexAttribPointer(Wb,Kc,md,vc,Ya,cb),
Qb.type=md,Qb.size=Kc,Qb.buffer=gc,Qb.normalized=vc,Qb.offset=cb,Qb.stride=Ya;Qb.divisor!==Ac&&(l.vertexAttribDivisorANGLE(Wb,Ac),Qb.divisor=Ac)}else if(Qb.buffer&&(I.disableVertexAttribArray(Wb),Qb.buffer=null),Qb.x!==ab||Qb.y!==Vb||Qb.z!==sc||Qb.w!==Ab)I.vertexAttrib4f(Wb,ab,Vb,sc,Ab),Qb.x=ab,Qb.y=Vb,Qb.z=sc,Qb.w=Ab;Rb=V.call(this,z,b,k);Xd=!1;Fc=null;td=0;Mc=!1;pd=Wc=0;nc=1;wc=0;hc=5126;Xb=Tb=rc=eb=0;sa(Rb)?(Xd=!0,Fc=n.createStream(34962,Rb),hc=Fc.dtype):(Fc=n.getBuffer(Rb))?hc=Fc.dtype:"constant"in
Rb?(nc=2,"number"===typeof Rb.constant?(rc=Rb.constant,Tb=Xb=eb=0):(rc=0<Rb.constant.length?Rb.constant[0]:0,Tb=1<Rb.constant.length?Rb.constant[1]:0,Xb=2<Rb.constant.length?Rb.constant[2]:0,eb=3<Rb.constant.length?Rb.constant[3]:0)):(Fc=sa(Rb.buffer)?n.createStream(34962,Rb.buffer):n.getBuffer(Rb.buffer),hc="type"in Rb?ae[Rb.type]:Fc.dtype,Mc=!!Rb.normalized,pd=Rb.size|0,Wc=Rb.offset|0,wc=Rb.stride|0,td=Rb.divisor|0);dc=Ta.location;ic=r[dc];if(1===nc){ic.buffer||I.enableVertexAttribArray(dc);yc=
pd||1;if(ic.type!==hc||ic.size!==yc||ic.buffer!==Fc||ic.normalized!==Mc||ic.offset!==Wc||ic.stride!==wc)I.bindBuffer(34962,Fc.buffer),I.vertexAttribPointer(dc,yc,hc,Mc,wc,Wc),ic.type=hc,ic.size=yc,ic.buffer=Fc,ic.normalized=Mc,ic.offset=Wc,ic.stride=wc;ic.divisor!==td&&(l.vertexAttribDivisorANGLE(dc,td),ic.divisor=td)}else if(ic.buffer&&(I.disableVertexAttribArray(dc),ic.buffer=null),ic.x!==rc||ic.y!==Tb||ic.z!==Xb||ic.w!==eb)I.vertexAttrib4f(dc,rc,Tb,Xb,eb),ic.x=rc,ic.y=Tb,ic.z=Xb,ic.w=eb;Bc=ea.call(this,
z,b,k);bd=!1;Pc=null;Qc=0;Rc=!1;kd=Xc=0;cd=1;Yc=0;kc=5126;dd=Tc=Zc=cc=0;sa(Bc)?(bd=!0,Pc=n.createStream(34962,Bc),kc=Pc.dtype):(Pc=n.getBuffer(Bc))?kc=Pc.dtype:"constant"in Bc?(cd=2,"number"===typeof Bc.constant?(Zc=Bc.constant,Tc=dd=cc=0):(Zc=0<Bc.constant.length?Bc.constant[0]:0,Tc=1<Bc.constant.length?Bc.constant[1]:0,dd=2<Bc.constant.length?Bc.constant[2]:0,cc=3<Bc.constant.length?Bc.constant[3]:0)):(Pc=sa(Bc.buffer)?n.createStream(34962,Bc.buffer):n.getBuffer(Bc.buffer),kc="type"in Bc?ae[Bc.type]:
Pc.dtype,Rc=!!Bc.normalized,kd=Bc.size|0,Xc=Bc.offset|0,Yc=Bc.stride|0,Qc=Bc.divisor|0);zc=ka.location;gd=r[zc];if(1===cd){gd.buffer||I.enableVertexAttribArray(zc);qd=kd||1;if(gd.type!==kc||gd.size!==qd||gd.buffer!==Pc||gd.normalized!==Rc||gd.offset!==Xc||gd.stride!==Yc)I.bindBuffer(34962,Pc.buffer),I.vertexAttribPointer(zc,qd,kc,Rc,Yc,Xc),gd.type=kc,gd.size=qd,gd.buffer=Pc,gd.normalized=Rc,gd.offset=Xc,gd.stride=Yc;gd.divisor!==Qc&&(l.vertexAttribDivisorANGLE(zc,Qc),gd.divisor=Qc)}else if(gd.buffer&&
(I.disableVertexAttribArray(zc),gd.buffer=null),gd.x!==Zc||gd.y!==Tc||gd.z!==dd||gd.w!==cc)I.vertexAttrib4f(zc,Zc,Tc,dd,cc),gd.x=Zc,gd.y=Tc,gd.z=dd,gd.w=cc;yd=R.call(this,z,b,k);be=!1;hd=null;Re=0;Od=!1;pe=he=0;Pd=1;Jd=0;Hd=5126;sd=ud=Sc=nd=0;sa(yd)?(be=!0,hd=n.createStream(34962,yd),Hd=hd.dtype):(hd=n.getBuffer(yd))?Hd=hd.dtype:"constant"in yd?(Pd=2,"number"===typeof yd.constant?(Sc=yd.constant,ud=sd=nd=0):(Sc=0<yd.constant.length?yd.constant[0]:0,ud=1<yd.constant.length?yd.constant[1]:0,sd=2<yd.constant.length?
yd.constant[2]:0,nd=3<yd.constant.length?yd.constant[3]:0)):(hd=sa(yd.buffer)?n.createStream(34962,yd.buffer):n.getBuffer(yd.buffer),Hd="type"in yd?ae[yd.type]:hd.dtype,Od=!!yd.normalized,pe=yd.size|0,he=yd.offset|0,Jd=yd.stride|0,Re=yd.divisor|0);id=qa.location;wd=r[id];if(1===Pd){wd.buffer||I.enableVertexAttribArray(id);Cd=pe||1;if(wd.type!==Hd||wd.size!==Cd||wd.buffer!==hd||wd.normalized!==Od||wd.offset!==he||wd.stride!==Jd)I.bindBuffer(34962,hd.buffer),I.vertexAttribPointer(id,Cd,Hd,Od,Jd,he),
wd.type=Hd,wd.size=Cd,wd.buffer=hd,wd.normalized=Od,wd.offset=he,wd.stride=Jd;wd.divisor!==Re&&(l.vertexAttribDivisorANGLE(id,Re),wd.divisor=Re)}else if(wd.buffer&&(I.disableVertexAttribArray(id),wd.buffer=null),wd.x!==Sc||wd.y!==ud||wd.z!==sd||wd.w!==nd)I.vertexAttrib4f(id,Sc,ud,sd,nd),wd.x=Sc,wd.y=ud,wd.z=sd,wd.w=nd;Ed=P.call(this,z,b,k);je=!1;we=null;Fe=0;le=!1;ie=ke=0;te=1;de=0;me=5126;qe=ue=fd=Nc=0;sa(Ed)?(je=!0,we=n.createStream(34962,Ed),me=we.dtype):(we=n.getBuffer(Ed))?me=we.dtype:"constant"in
Ed?(te=2,"number"===typeof Ed.constant?(fd=Ed.constant,ue=qe=Nc=0):(fd=0<Ed.constant.length?Ed.constant[0]:0,ue=1<Ed.constant.length?Ed.constant[1]:0,qe=2<Ed.constant.length?Ed.constant[2]:0,Nc=3<Ed.constant.length?Ed.constant[3]:0)):(we=sa(Ed.buffer)?n.createStream(34962,Ed.buffer):n.getBuffer(Ed.buffer),me="type"in Ed?ae[Ed.type]:we.dtype,le=!!Ed.normalized,ie=Ed.size|0,ke=Ed.offset|0,de=Ed.stride|0,Fe=Ed.divisor|0);Kd=m.location;Qd=r[Kd];if(1===te){Qd.buffer||I.enableVertexAttribArray(Kd);Rd=ie||
4;if(Qd.type!==me||Qd.size!==Rd||Qd.buffer!==we||Qd.normalized!==le||Qd.offset!==ke||Qd.stride!==de)I.bindBuffer(34962,we.buffer),I.vertexAttribPointer(Kd,Rd,me,le,de,ke),Qd.type=me,Qd.size=Rd,Qd.buffer=we,Qd.normalized=le,Qd.offset=ke,Qd.stride=de;Qd.divisor!==Fe&&(l.vertexAttribDivisorANGLE(Kd,Fe),Qd.divisor=Fe)}else if(Qd.buffer&&(I.disableVertexAttribArray(Kd),Qd.buffer=null),Qd.x!==fd||Qd.y!==ue||Qd.z!==qe||Qd.w!==Nc)I.vertexAttrib4f(Kd,fd,ue,qe,Nc),Qd.x=fd,Qd.y=ue,Qd.z=qe,Qd.w=Nc;Sd=B.call(this,
z,b,k);ne=!1;Ge=null;Ae=0;re=!1;Te=Se=0;Oe=1;ve=0;He=5126;Ie=Le=Ke=Je=0;sa(Sd)?(ne=!0,Ge=n.createStream(34962,Sd),He=Ge.dtype):(Ge=n.getBuffer(Sd))?He=Ge.dtype:"constant"in Sd?(Oe=2,"number"===typeof Sd.constant?(Ke=Sd.constant,Le=Ie=Je=0):(Ke=0<Sd.constant.length?Sd.constant[0]:0,Le=1<Sd.constant.length?Sd.constant[1]:0,Ie=2<Sd.constant.length?Sd.constant[2]:0,Je=3<Sd.constant.length?Sd.constant[3]:0)):(Ge=sa(Sd.buffer)?n.createStream(34962,Sd.buffer):n.getBuffer(Sd.buffer),He="type"in Sd?ae[Sd.type]:
Ge.dtype,re=!!Sd.normalized,Te=Sd.size|0,Se=Sd.offset|0,ve=Sd.stride|0,Ae=Sd.divisor|0);Md=Da.location;Yd=r[Md];if(1===Oe){Yd.buffer||I.enableVertexAttribArray(Md);ce=Te||4;if(Yd.type!==He||Yd.size!==ce||Yd.buffer!==Ge||Yd.normalized!==re||Yd.offset!==Se||Yd.stride!==ve)I.bindBuffer(34962,Ge.buffer),I.vertexAttribPointer(Md,ce,He,re,ve,Se),Yd.type=He,Yd.size=ce,Yd.buffer=Ge,Yd.normalized=re,Yd.offset=Se,Yd.stride=ve;Yd.divisor!==Ae&&(l.vertexAttribDivisorANGLE(Md,Ae),Yd.divisor=Ae)}else if(Yd.buffer&&
(I.disableVertexAttribArray(Md),Yd.buffer=null),Yd.x!==Ke||Yd.y!==Le||Yd.z!==Ie||Yd.w!==Je)I.vertexAttrib4f(Md,Ke,Le,Ie,Je),Yd.x=Ke,Yd.y=Le,Yd.z=Ie,Yd.w=Je;ee=g.call(this,z,b,k);Me=!1;Id=null;Td=0;Ce=!1;hf=Ne=0;bf=1;Ue=0;Pe=5126;We=Ve=Ye=af=0;sa(ee)?(Me=!0,Id=n.createStream(34962,ee),Pe=Id.dtype):(Id=n.getBuffer(ee))?Pe=Id.dtype:"constant"in ee?(bf=2,"number"===typeof ee.constant?(Ye=ee.constant,Ve=We=af=0):(Ye=0<ee.constant.length?ee.constant[0]:0,Ve=1<ee.constant.length?ee.constant[1]:0,We=2<ee.constant.length?
ee.constant[2]:0,af=3<ee.constant.length?ee.constant[3]:0)):(Id=sa(ee.buffer)?n.createStream(34962,ee.buffer):n.getBuffer(ee.buffer),Pe="type"in ee?ae[ee.type]:Id.dtype,Ce=!!ee.normalized,hf=ee.size|0,Ne=ee.offset|0,Ue=ee.stride|0,Td=ee.divisor|0);Ud=aa.location;$d=r[Ud];if(1===bf){$d.buffer||I.enableVertexAttribArray(Ud);Xe=hf||1;if($d.type!==Pe||$d.size!==Xe||$d.buffer!==Id||$d.normalized!==Ce||$d.offset!==Ne||$d.stride!==Ue)I.bindBuffer(34962,Id.buffer),I.vertexAttribPointer(Ud,Xe,Pe,Ce,Ue,Ne),
$d.type=Pe,$d.size=Xe,$d.buffer=Id,$d.normalized=Ce,$d.offset=Ne,$d.stride=Ue;$d.divisor!==Td&&(l.vertexAttribDivisorANGLE(Ud,Td),$d.divisor=Td)}else if($d.buffer&&(I.disableVertexAttribArray(Ud),$d.buffer=null),$d.x!==Ye||$d.y!==Ve||$d.z!==We||$d.w!==af)I.vertexAttrib4f(Ud,Ye,Ve,We,af),$d.x=Ye,$d.y=Ve,$d.z=We,$d.w=af;jf=z.pixelRatio;k&&nf===jf||(nf=jf,I.uniform1f(xa.location,jf));ef=b.scale;kf=ef[0];mf=ef[1];k&&lf===kf&&rf===mf||(lf=kf,rf=mf,I.uniform2f(fa.location,kf,mf));of=b.scaleFract;sf=of[0];
Cf=of[1];k&&Bf===sf&&Qe===Cf||(Bf=sf,Qe=Cf,I.uniform2f(Aa.location,sf,Cf));De=b.translate;pf=De[0];Df=De[1];k&&qf===pf&&Gf===Df||(qf=pf,Gf=Df,I.uniform2f(oa.location,pf,Df));Af=b.translateFract;Ef=Af[0];wf=Af[1];k&&Ff===Ef&&xf===wf||(Ff=Ef,xf=wf,I.uniform2f(ya.location,Ef,wf));vf=K.call(this,z,b,k);yf=vf[0];If=vf[1];k&&zf===yf&&Jf===If||(zf=yf,Jf=If,I.uniform2f(pa.location,yf,If));Kf=b.opacity;k&&Lf===Kf||(Lf=Kf,I.uniform1f(ma.location,Kf));(tf=b.markerTexture)&&"framebuffer"===tf._reglType&&(tf=
tf.color[0]);Qf=tf._texture;I.uniform1i(O.location,Qf.bind());Hf=b.elements;uf=null;(uf=(cg=sa(Hf))?xd.createStream(Hf):xd.getElements(Hf))&&I.bindBuffer(34963,uf.buffer.buffer);Rf=b.offset;if(Sf=b.count)0<ob?uf?l.drawElementsInstancedANGLE(0,Sf,uf.type,Rf<<(uf.type-5121>>1),ob):l.drawArraysInstancedANGLE(0,Rf,Sf,ob):0>ob&&(uf?I.drawElements(0,Sf,uf.type,Rf<<(uf.type-5121>>1)):I.drawArrays(0,Rf,Sf)),z.viewportWidth=Ob,z.viewportHeight=jb,qb&&n.destroyStream(Ua),Oa&&n.destroyStream(Cc),nb&&n.destroyStream(gc),
Xd&&n.destroyStream(Fc),bd&&n.destroyStream(Pc),be&&n.destroyStream(hd),je&&n.destroyStream(we),ne&&n.destroyStream(Ge),Me&&n.destroyStream(Id),Qf.unbind(),cg&&xd.destroyStream(uf)}M.unbind();va.dirty=!0;Ea.setVAO(null);f&&(ca.cpuTime+=performance.now()-h)},draw:function(a){var d,g,f,h,k,b,t,x,A,w,P,B,E,ra,R,G,D,la,K,v,M,wa,p,Q,S,T,V,X,ea,ba,ia,Y,ta,ja,ga,Dc,Ia,yb,db,Nb,bb,ob,Wa,yd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,
Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,be,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve;d=ha.next;d!==ha.cur&&(d?I.bindFramebuffer(36160,d.framebuffer):I.bindFramebuffer(36160,null),ha.cur=d);if(va.dirty){var He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,
kf,lf,mf,rf,of,sf;He=Ba.dither;He!==va.dither&&(He?I.enable(3024):I.disable(3024),va.dither=He);Je=ua[0];Ke=ua[1];if(Je!==Fa[0]||Ke!==Fa[1])I.blendEquationSeparate(Je,Ke),Fa[0]=Je,Fa[1]=Ke;Le=Ba.depth_func;Le!==va.depth_func&&(I.depthFunc(Le),va.depth_func=Le);Ie=$b[0];Md=$b[1];if(Ie!==Ga[0]||Md!==Ga[1])I.depthRange(Ie,Md),Ga[0]=Ie,Ga[1]=Md;Yd=Ba.depth_mask;Yd!==va.depth_mask&&(I.depthMask(Yd),va.depth_mask=Yd);ce=da[0];ee=da[1];Me=da[2];Id=da[3];if(ce!==Z[0]||ee!==Z[1]||Me!==Z[2]||Id!==Z[3])I.colorMask(ce,
ee,Me,Id),Z[0]=ce,Z[1]=ee,Z[2]=Me,Z[3]=Id;Td=Ba.cull_enable;Td!==va.cull_enable&&(Td?I.enable(2884):I.disable(2884),va.cull_enable=Td);Ce=Ba.cull_face;Ce!==va.cull_face&&(I.cullFace(Ce),va.cull_face=Ce);Ne=Ba.frontFace;Ne!==va.frontFace&&(I.frontFace(Ne),va.frontFace=Ne);hf=Ba.lineWidth;hf!==va.lineWidth&&(I.lineWidth(hf),va.lineWidth=hf);bf=Ba.polygonOffset_enable;bf!==va.polygonOffset_enable&&(bf?I.enable(32823):I.disable(32823),va.polygonOffset_enable=bf);Ue=ac[0];Pe=ac[1];if(Ue!==Sb[0]||Pe!==
Sb[1])I.polygonOffset(Ue,Pe),Sb[0]=Ue,Sb[1]=Pe;af=Ba.sample_alpha;af!==va.sample_alpha&&(af?I.enable(32926):I.disable(32926),va.sample_alpha=af);Ye=Ba.sample_enable;Ye!==va.sample_enable&&(Ye?I.enable(32928):I.disable(32928),va.sample_enable=Ye);Ve=Ra[0];We=Ra[1];if(Ve!==Fd[0]||We!==Fd[1])I.sampleCoverage(Ve,We),Fd[0]=Ve,Fd[1]=We;Ud=Ba.stencil_mask;Ud!==va.stencil_mask&&(I.stencilMask(Ud),va.stencil_mask=Ud);$d=xe[0];Xe=xe[1];jf=xe[2];if($d!==Ad[0]||Xe!==Ad[1]||jf!==Ad[2])I.stencilFunc($d,Xe,jf),
Ad[0]=$d,Ad[1]=Xe,Ad[2]=jf;nf=fe[0];ef=fe[1];kf=fe[2];lf=fe[3];if(nf!==Dd[0]||ef!==Dd[1]||kf!==Dd[2]||lf!==Dd[3])I.stencilOpSeparate(nf,ef,kf,lf),Dd[0]=nf,Dd[1]=ef,Dd[2]=kf,Dd[3]=lf;mf=Nd[0];rf=Nd[1];of=Nd[2];sf=Nd[3];if(mf!==oe[0]||rf!==oe[1]||of!==oe[2]||sf!==oe[3])I.stencilOpSeparate(mf,rf,of,sf),oe[0]=mf,oe[1]=rf,oe[2]=of,oe[3]=sf}g=a.viewport;f=g.x|0;h=g.y|0;k="width"in g?g.width|0:z.framebufferWidth-f;b="height"in g?g.height|0:z.framebufferHeight-h;t=z.viewportWidth;z.viewportWidth=k;x=z.viewportHeight;
z.viewportHeight=b;I.viewport(f,h,k,b);ge[0]=f;ge[1]=h;ge[2]=k;ge[3]=b;I.blendColor(0,0,0,1);W[0]=0;W[1]=0;W[2]=0;W[3]=1;I.enable(3042);va.blend_enable=!0;I.blendFuncSeparate(770,771,773,1);mb[0]=770;mb[1]=771;mb[2]=773;mb[3]=1;I.disable(2929);va.depth_enable=!1;A=a.viewport;w=A.x|0;P=A.y|0;B="width"in A?A.width|0:z.framebufferWidth-w;E="height"in A?A.height|0:z.framebufferHeight-P;I.scissor(w,P,B,E);Vd[0]=w;Vd[1]=P;Vd[2]=B;Vd[3]=E;I.enable(3089);va.scissor_enable=!0;I.disable(2960);va.stencil_enable=
!1;if(ra=va.profile)R=performance.now(),ca.count++;I.useProgram(N.program);G=Hb.angle_instanced_arrays;Ea.setVAO(null);D=L.call(this,z,a,0);la=!1;K=null;v=0;M=!1;p=wa=0;Q=1;S=0;T=5126;ba=ea=X=V=0;sa(D)?(la=!0,K=n.createStream(34962,D),T=K.dtype):(K=n.getBuffer(D))?T=K.dtype:"constant"in D?(Q=2,"number"===typeof D.constant?(X=D.constant,ea=ba=V=0):(X=0<D.constant.length?D.constant[0]:0,ea=1<D.constant.length?D.constant[1]:0,ba=2<D.constant.length?D.constant[2]:0,V=3<D.constant.length?D.constant[3]:
0)):(K=sa(D.buffer)?n.createStream(34962,D.buffer):n.getBuffer(D.buffer),T="type"in D?ae[D.type]:K.dtype,M=!!D.normalized,p=D.size|0,wa=D.offset|0,S=D.stride|0,v=D.divisor|0);ia=Ja.location;Y=r[ia];if(1===Q){Y.buffer||I.enableVertexAttribArray(ia);ta=p||1;if(Y.type!==T||Y.size!==ta||Y.buffer!==K||Y.normalized!==M||Y.offset!==wa||Y.stride!==S)I.bindBuffer(34962,K.buffer),I.vertexAttribPointer(ia,ta,T,M,S,wa),Y.type=T,Y.size=ta,Y.buffer=K,Y.normalized=M,Y.offset=wa,Y.stride=S;Y.divisor!==v&&(G.vertexAttribDivisorANGLE(ia,
v),Y.divisor=v)}else if(Y.buffer&&(I.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ba||Y.w!==V)I.vertexAttrib4f(ia,X,ea,ba,V),Y.x=X,Y.y=ea,Y.z=ba,Y.w=V;ja=e.call(this,z,a,0);ga=!1;Dc=null;Ia=0;yb=!1;Nb=db=0;bb=1;ob=0;Wa=5126;qc=Jb=Ib=yd=0;sa(ja)?(ga=!0,Dc=n.createStream(34962,ja),Wa=Dc.dtype):(Dc=n.getBuffer(ja))?Wa=Dc.dtype:"constant"in ja?(bb=2,"number"===typeof ja.constant?(Ib=ja.constant,Jb=qc=yd=0):(Ib=0<ja.constant.length?ja.constant[0]:0,Jb=1<ja.constant.length?ja.constant[1]:
0,qc=2<ja.constant.length?ja.constant[2]:0,yd=3<ja.constant.length?ja.constant[3]:0)):(Dc=sa(ja.buffer)?n.createStream(34962,ja.buffer):n.getBuffer(ja.buffer),Wa="type"in ja?ae[ja.type]:Dc.dtype,yb=!!ja.normalized,Nb=ja.size|0,db=ja.offset|0,ob=ja.stride|0,Ia=ja.divisor|0);Ob=Za.location;jb=r[Ob];if(1===bb){jb.buffer||I.enableVertexAttribArray(Ob);Gb=Nb||1;if(jb.type!==Wa||jb.size!==Gb||jb.buffer!==Dc||jb.normalized!==yb||jb.offset!==db||jb.stride!==ob)I.bindBuffer(34962,Dc.buffer),I.vertexAttribPointer(Ob,
Gb,Wa,yb,ob,db),jb.type=Wa,jb.size=Gb,jb.buffer=Dc,jb.normalized=yb,jb.offset=db,jb.stride=ob;jb.divisor!==Ia&&(G.vertexAttribDivisorANGLE(Ob,Ia),jb.divisor=Ia)}else if(jb.buffer&&(I.disableVertexAttribArray(Ob),jb.buffer=null),jb.x!==Ib||jb.y!==Jb||jb.z!==qc||jb.w!==yd)I.vertexAttrib4f(Ob,Ib,Jb,qc,yd),jb.x=Ib,jb.y=Jb,jb.z=qc,jb.w=yd;Db=l.call(this,z,a,0);wb=!1;hb=null;Yb=0;Pb=!1;Ua=qb=0;Ub=1;zb=0;bc=5126;rb=Ha=pb=ib=0;sa(Db)?(wb=!0,hb=n.createStream(34962,Db),bc=hb.dtype):(hb=n.getBuffer(Db))?bc=
hb.dtype:"constant"in Db?(Ub=2,"number"===typeof Db.constant?(pb=Db.constant,Ha=rb=ib=0):(pb=0<Db.constant.length?Db.constant[0]:0,Ha=1<Db.constant.length?Db.constant[1]:0,rb=2<Db.constant.length?Db.constant[2]:0,ib=3<Db.constant.length?Db.constant[3]:0)):(hb=sa(Db.buffer)?n.createStream(34962,Db.buffer):n.getBuffer(Db.buffer),bc="type"in Db?ae[Db.type]:hb.dtype,Pb=!!Db.normalized,Ua=Db.size|0,qb=Db.offset|0,zb=Db.stride|0,Yb=Db.divisor|0);Ka=na.location;fb=r[Ka];if(1===Ub){fb.buffer||I.enableVertexAttribArray(Ka);
gb=Ua||1;if(fb.type!==bc||fb.size!==gb||fb.buffer!==hb||fb.normalized!==Pb||fb.offset!==qb||fb.stride!==zb)I.bindBuffer(34962,hb.buffer),I.vertexAttribPointer(Ka,gb,bc,Pb,zb,qb),fb.type=bc,fb.size=gb,fb.buffer=hb,fb.normalized=Pb,fb.offset=qb,fb.stride=zb;fb.divisor!==Yb&&(G.vertexAttribDivisorANGLE(Ka,Yb),fb.divisor=Yb)}else if(fb.buffer&&(I.disableVertexAttribArray(Ka),fb.buffer=null),fb.x!==pb||fb.y!==Ha||fb.z!==rb||fb.w!==ib)I.vertexAttrib4f(Ka,pb,Ha,rb,ib),fb.x=pb,fb.y=Ha,fb.z=rb,fb.w=ib;La=
q.call(this,z,a,0);kb=!1;Xa=null;tb=0;sb=!1;Cc=Oa=0;Qa=1;Kb=0;Eb=5126;Lb=$a=vd=Ma=0;sa(La)?(kb=!0,Xa=n.createStream(34962,La),Eb=Xa.dtype):(Xa=n.getBuffer(La))?Eb=Xa.dtype:"constant"in La?(Qa=2,"number"===typeof La.constant?(vd=La.constant,$a=Lb=Ma=0):(vd=0<La.constant.length?La.constant[0]:0,$a=1<La.constant.length?La.constant[1]:0,Lb=2<La.constant.length?La.constant[2]:0,Ma=3<La.constant.length?La.constant[3]:0)):(Xa=sa(La.buffer)?n.createStream(34962,La.buffer):n.getBuffer(La.buffer),Eb="type"in
La?ae[La.type]:Xa.dtype,sb=!!La.normalized,Cc=La.size|0,Oa=La.offset|0,Kb=La.stride|0,tb=La.divisor|0);Mb=Ta.location;lb=r[Mb];if(1===Qa){lb.buffer||I.enableVertexAttribArray(Mb);Na=Cc||1;if(lb.type!==Eb||lb.size!==Na||lb.buffer!==Xa||lb.normalized!==sb||lb.offset!==Oa||lb.stride!==Kb)I.bindBuffer(34962,Xa.buffer),I.vertexAttribPointer(Mb,Na,Eb,sb,Kb,Oa),lb.type=Eb,lb.size=Na,lb.buffer=Xa,lb.normalized=sb,lb.offset=Oa,lb.stride=Kb;lb.divisor!==tb&&(G.vertexAttribDivisorANGLE(Mb,tb),lb.divisor=tb)}else if(lb.buffer&&
(I.disableVertexAttribArray(Mb),lb.buffer=null),lb.x!==vd||lb.y!==$a||lb.z!==Lb||lb.w!==Ma)I.vertexAttrib4f(Mb,vd,$a,Lb,Ma),lb.x=vd,lb.y=$a,lb.z=Lb,lb.w=Ma;Zb=c.call(this,z,a,0);Pa=!1;ub=null;vb=0;Sa=!1;gc=nb=0;Ac=1;vc=0;cb=5126;md=Ya=ad=jc=0;sa(Zb)?(Pa=!0,ub=n.createStream(34962,Zb),cb=ub.dtype):(ub=n.getBuffer(Zb))?cb=ub.dtype:"constant"in Zb?(Ac=2,"number"===typeof Zb.constant?(ad=Zb.constant,Ya=md=jc=0):(ad=0<Zb.constant.length?Zb.constant[0]:0,Ya=1<Zb.constant.length?Zb.constant[1]:0,md=2<Zb.constant.length?
Zb.constant[2]:0,jc=3<Zb.constant.length?Zb.constant[3]:0)):(ub=sa(Zb.buffer)?n.createStream(34962,Zb.buffer):n.getBuffer(Zb.buffer),cb="type"in Zb?ae[Zb.type]:ub.dtype,Sa=!!Zb.normalized,gc=Zb.size|0,nb=Zb.offset|0,vc=Zb.stride|0,vb=Zb.divisor|0);Ab=ka.location;ab=r[Ab];if(1===Ac){ab.buffer||I.enableVertexAttribArray(Ab);Vb=gc||1;if(ab.type!==cb||ab.size!==Vb||ab.buffer!==ub||ab.normalized!==Sa||ab.offset!==nb||ab.stride!==vc)I.bindBuffer(34962,ub.buffer),I.vertexAttribPointer(Ab,Vb,cb,Sa,vc,nb),
ab.type=cb,ab.size=Vb,ab.buffer=ub,ab.normalized=Sa,ab.offset=nb,ab.stride=vc;ab.divisor!==vb&&(G.vertexAttribDivisorANGLE(Ab,vb),ab.divisor=vb)}else if(ab.buffer&&(I.disableVertexAttribArray(Ab),ab.buffer=null),ab.x!==ad||ab.y!==Ya||ab.z!==md||ab.w!==jc)I.vertexAttrib4f(Ab,ad,Ya,md,jc),ab.x=ad,ab.y=Ya,ab.z=md,ab.w=jc;sc=F.call(this,z,a,0);Wb=!1;Qb=null;Kc=0;Rb=!1;Fc=be=0;td=1;Mc=0;Wc=5126;hc=wc=nc=pd=0;sa(sc)?(Wb=!0,Qb=n.createStream(34962,sc),Wc=Qb.dtype):(Qb=n.getBuffer(sc))?Wc=Qb.dtype:"constant"in
sc?(td=2,"number"===typeof sc.constant?(nc=sc.constant,wc=hc=pd=0):(nc=0<sc.constant.length?sc.constant[0]:0,wc=1<sc.constant.length?sc.constant[1]:0,hc=2<sc.constant.length?sc.constant[2]:0,pd=3<sc.constant.length?sc.constant[3]:0)):(Qb=sa(sc.buffer)?n.createStream(34962,sc.buffer):n.getBuffer(sc.buffer),Wc="type"in sc?ae[sc.type]:Qb.dtype,Rb=!!sc.normalized,Fc=sc.size|0,be=sc.offset|0,Mc=sc.stride|0,Kc=sc.divisor|0);eb=qa.location;rc=r[eb];if(1===td){rc.buffer||I.enableVertexAttribArray(eb);Tb=
Fc||1;if(rc.type!==Wc||rc.size!==Tb||rc.buffer!==Qb||rc.normalized!==Rb||rc.offset!==be||rc.stride!==Mc)I.bindBuffer(34962,Qb.buffer),I.vertexAttribPointer(eb,Tb,Wc,Rb,Mc,be),rc.type=Wc,rc.size=Tb,rc.buffer=Qb,rc.normalized=Rb,rc.offset=be,rc.stride=Mc;rc.divisor!==Kc&&(G.vertexAttribDivisorANGLE(eb,Kc),rc.divisor=Kc)}else if(rc.buffer&&(I.disableVertexAttribArray(eb),rc.buffer=null),rc.x!==nc||rc.y!==wc||rc.z!==hc||rc.w!==pd)I.vertexAttrib4f(eb,nc,wc,hc,pd),rc.x=nc,rc.y=wc,rc.z=hc,rc.w=pd;Xb=C.call(this,
z,a,0);dc=!1;ic=null;yc=0;Bc=!1;Pc=bd=0;Qc=1;Rc=0;Xc=5126;kc=Yc=cd=kd=0;sa(Xb)?(dc=!0,ic=n.createStream(34962,Xb),Xc=ic.dtype):(ic=n.getBuffer(Xb))?Xc=ic.dtype:"constant"in Xb?(Qc=2,"number"===typeof Xb.constant?(cd=Xb.constant,Yc=kc=kd=0):(cd=0<Xb.constant.length?Xb.constant[0]:0,Yc=1<Xb.constant.length?Xb.constant[1]:0,kc=2<Xb.constant.length?Xb.constant[2]:0,kd=3<Xb.constant.length?Xb.constant[3]:0)):(ic=sa(Xb.buffer)?n.createStream(34962,Xb.buffer):n.getBuffer(Xb.buffer),Xc="type"in Xb?ae[Xb.type]:
ic.dtype,Bc=!!Xb.normalized,Pc=Xb.size|0,bd=Xb.offset|0,Rc=Xb.stride|0,yc=Xb.divisor|0);cc=m.location;Zc=r[cc];if(1===Qc){Zc.buffer||I.enableVertexAttribArray(cc);Tc=Pc||4;if(Zc.type!==Xc||Zc.size!==Tc||Zc.buffer!==ic||Zc.normalized!==Bc||Zc.offset!==bd||Zc.stride!==Rc)I.bindBuffer(34962,ic.buffer),I.vertexAttribPointer(cc,Tc,Xc,Bc,Rc,bd),Zc.type=Xc,Zc.size=Tc,Zc.buffer=ic,Zc.normalized=Bc,Zc.offset=bd,Zc.stride=Rc;Zc.divisor!==yc&&(G.vertexAttribDivisorANGLE(cc,yc),Zc.divisor=yc)}else if(Zc.buffer&&
(I.disableVertexAttribArray(cc),Zc.buffer=null),Zc.x!==cd||Zc.y!==Yc||Zc.z!==kc||Zc.w!==kd)I.vertexAttrib4f(cc,cd,Yc,kc,kd),Zc.x=cd,Zc.y=Yc,Zc.z=kc,Zc.w=kd;dd=H.call(this,z,a,0);zc=!1;gd=null;qd=0;Ee=!1;hd=ze=0;Re=1;Od=0;he=5126;Hd=Jd=Pd=pe=0;sa(dd)?(zc=!0,gd=n.createStream(34962,dd),he=gd.dtype):(gd=n.getBuffer(dd))?he=gd.dtype:"constant"in dd?(Re=2,"number"===typeof dd.constant?(Pd=dd.constant,Jd=Hd=pe=0):(Pd=0<dd.constant.length?dd.constant[0]:0,Jd=1<dd.constant.length?dd.constant[1]:0,Hd=2<dd.constant.length?
dd.constant[2]:0,pe=3<dd.constant.length?dd.constant[3]:0)):(gd=sa(dd.buffer)?n.createStream(34962,dd.buffer):n.getBuffer(dd.buffer),he="type"in dd?ae[dd.type]:gd.dtype,Ee=!!dd.normalized,hd=dd.size|0,ze=dd.offset|0,Od=dd.stride|0,qd=dd.divisor|0);nd=Da.location;Sc=r[nd];if(1===Re){Sc.buffer||I.enableVertexAttribArray(nd);ud=hd||4;if(Sc.type!==he||Sc.size!==ud||Sc.buffer!==gd||Sc.normalized!==Ee||Sc.offset!==ze||Sc.stride!==Od)I.bindBuffer(34962,gd.buffer),I.vertexAttribPointer(nd,ud,he,Ee,Od,ze),
Sc.type=he,Sc.size=ud,Sc.buffer=gd,Sc.normalized=Ee,Sc.offset=ze,Sc.stride=Od;Sc.divisor!==qd&&(G.vertexAttribDivisorANGLE(nd,qd),Sc.divisor=qd)}else if(Sc.buffer&&(I.disableVertexAttribArray(nd),Sc.buffer=null),Sc.x!==Pd||Sc.y!==Jd||Sc.z!==Hd||Sc.w!==pe)I.vertexAttrib4f(nd,Pd,Jd,Hd,pe),Sc.x=Pd,Sc.y=Jd,Sc.z=Hd,Sc.w=pe;sd=U.call(this,z,a,0);id=!1;wd=null;Cd=0;Ed=!1;we=je=0;Fe=1;le=0;ke=5126;me=de=te=ie=0;sa(sd)?(id=!0,wd=n.createStream(34962,sd),ke=wd.dtype):(wd=n.getBuffer(sd))?ke=wd.dtype:"constant"in
sd?(Fe=2,"number"===typeof sd.constant?(te=sd.constant,de=me=ie=0):(te=0<sd.constant.length?sd.constant[0]:0,de=1<sd.constant.length?sd.constant[1]:0,me=2<sd.constant.length?sd.constant[2]:0,ie=3<sd.constant.length?sd.constant[3]:0)):(wd=sa(sd.buffer)?n.createStream(34962,sd.buffer):n.getBuffer(sd.buffer),ke="type"in sd?ae[sd.type]:wd.dtype,Ed=!!sd.normalized,we=sd.size|0,je=sd.offset|0,le=sd.stride|0,Cd=sd.divisor|0);Nc=aa.location;fd=r[Nc];if(1===Fe){fd.buffer||I.enableVertexAttribArray(Nc);ue=
we||1;if(fd.type!==ke||fd.size!==ue||fd.buffer!==wd||fd.normalized!==Ed||fd.offset!==je||fd.stride!==le)I.bindBuffer(34962,wd.buffer),I.vertexAttribPointer(Nc,ue,ke,Ed,le,je),fd.type=ke,fd.size=ue,fd.buffer=wd,fd.normalized=Ed,fd.offset=je,fd.stride=le;fd.divisor!==Cd&&(G.vertexAttribDivisorANGLE(Nc,Cd),fd.divisor=Cd)}else if(fd.buffer&&(I.disableVertexAttribArray(Nc),fd.buffer=null),fd.x!==te||fd.y!==de||fd.z!==me||fd.w!==ie)I.vertexAttrib4f(Nc,te,de,me,ie),fd.x=te,fd.y=de,fd.z=me,fd.w=ie;I.uniform1i(J.location,
!1);I.uniform1f(xa.location,z.pixelRatio);qe=a.scale;I.uniform2f(fa.location,qe[0],qe[1]);Kd=a.scaleFract;I.uniform2f(Aa.location,Kd[0],Kd[1]);Qd=a.translate;I.uniform2f(oa.location,Qd[0],Qd[1]);Rd=a.translateFract;I.uniform2f(ya.location,Rd[0],Rd[1]);Sd=y.call(this,z,a,0);I.uniform2f(pa.location,Sd[0],Sd[1]);I.uniform1f(ma.location,a.opacity);I.uniform1i(za.location,u.bind());(ne=a.markerTexture)&&"framebuffer"===ne._reglType&&(ne=ne.color[0]);Ge=ne._texture;I.uniform1i(O.location,Ge.bind());Ae=
a.elements;re=null;(re=(Se=sa(Ae))?xd.createStream(Ae):xd.getElements(Ae))&&I.bindBuffer(34963,re.buffer.buffer);Te=a.offset;if(Oe=a.count)ve=Ca.instances,0<ve?re?G.drawElementsInstancedANGLE(0,Oe,re.type,Te<<(re.type-5121>>1),ve):G.drawArraysInstancedANGLE(0,Te,Oe,ve):0>ve&&(re?I.drawElements(0,Oe,re.type,Te<<(re.type-5121>>1)):I.drawArrays(0,Te,Oe)),va.dirty=!0,Ea.setVAO(null),z.viewportWidth=t,z.viewportHeight=x,ra&&(ca.cpuTime+=performance.now()-R),la&&n.destroyStream(K),ga&&n.destroyStream(Dc),
wb&&n.destroyStream(hb),kb&&n.destroyStream(Xa),Pa&&n.destroyStream(ub),Wb&&n.destroyStream(Qb),dc&&n.destroyStream(ic),zc&&n.destroyStream(gd),id&&n.destroyStream(wd),u.unbind(),Ge.unbind(),Se&&xd.destroyStream(re)},scope:function(c,g,l){var m,r,b,q,I,na,A,e,J,P,O,B,R,fa,ha,Za,L,K,Ja,u,y,M,W,aa,C,N,xa,pa,Ea,F,Da,H,da,U,ka,V,ea,Ta,oa,Aa,ya,ma,ja,qa,ta,ua,Hb,za,Dc,ga,Ga,mb,Fa,Sb,Z,$b,ac,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Vd,Qa,Kb,Eb,Ma,zd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,Fd,Ya,
md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Nd,Fc,ge,Mc,Wc,xe,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Dd,oe,hd,Ad,Ra,fe,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,pg,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,
wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og,Pg;m=c.viewport;r=m.x|0;b=m.y|0;q="width"in m?m.width|0:z.framebufferWidth-r;I="height"in m?m.height|0:z.framebufferHeight-b;na=z.viewportWidth;z.viewportWidth=q;A=z.viewportHeight;z.viewportHeight=I;e=be[0];be[0]=r;J=be[1];be[1]=b;P=be[2];be[2]=q;O=be[3];be[3]=I;B=la[0];la[0]=0;R=la[1];la[1]=0;fa=la[2];la[2]=0;ha=la[3];la[3]=1;Za=Ba.blend_enable;Ba.blend_enable=!0;L=Ia[0];Ia[0]=770;K=Ia[1];Ia[1]=
771;Ja=Ia[2];Ia[2]=773;u=Ia[3];Ia[3]=1;y=Ba.depth_enable;Ba.depth_enable=!1;M=c.viewport;W=M.x|0;aa=M.y|0;C="width"in M?M.width|0:z.framebufferWidth-W;N="height"in M?M.height|0:z.framebufferHeight-aa;xa=yd[0];yd[0]=W;pa=yd[1];yd[1]=aa;Ea=yd[2];yd[2]=C;F=yd[3];yd[3]=N;Da=Ba.scissor_enable;Ba.scissor_enable=!0;H=Ba.stencil_enable;Ba.stencil_enable=!1;if(da=va.profile)U=performance.now(),ca.count++;ka=c.elements;V=null;V=(ea=sa(ka))?xd.createStream(ka):xd.getElements(ka);Ta=Ca.elements;Ca.elements=V;
oa=c.offset;Aa=Ca.offset;Ca.offset=oa;ya=c.count;ma=Ca.count;Ca.count=ya;ja=Ca.primitive;Ca.primitive=0;qa=wa[45];wa[45]=!1;ta=c.markerTexture;ua=wa[48];wa[48]=ta;Hb=c.opacity;za=wa[10];wa[10]=Hb;Dc=p.call(this,z,c,l);ga=wa[46];wa[46]=Dc;Ga=wa[47];wa[47]=ba;mb=z.pixelRatio;Fa=wa[34];wa[34]=mb;Sb=c.scale;Z=wa[6];wa[6]=Sb;$b=c.scaleFract;ac=wa[7];wa[7]=$b;bc=c.translate;ib=wa[8];wa[8]=bc;pb=c.translateFract;Ha=wa[9];wa[9]=pb;rb=w.call(this,z,c,l);Ka=!1;fb=null;gb=0;La=!1;Xa=kb=0;tb=1;sb=0;Oa=5126;Eb=
Kb=Qa=Vd=0;sa(rb)?(Ka=!0,fb=n.createStream(34962,rb),Oa=fb.dtype):(fb=n.getBuffer(rb))?Oa=fb.dtype:"constant"in rb?(tb=2,"number"===typeof rb.constant?(Qa=rb.constant,Kb=Eb=Vd=0):(Qa=0<rb.constant.length?rb.constant[0]:0,Kb=1<rb.constant.length?rb.constant[1]:0,Eb=2<rb.constant.length?rb.constant[2]:0,Vd=3<rb.constant.length?rb.constant[3]:0)):(fb=sa(rb.buffer)?n.createStream(34962,rb.buffer):n.getBuffer(rb.buffer),Oa="type"in rb?ae[rb.type]:fb.dtype,La=!!rb.normalized,Xa=rb.size|0,kb=rb.offset|0,
sb=rb.stride|0,gb=rb.divisor|0);Ma=T.buffer;T.buffer=fb;zd=T.divisor;T.divisor=gb;$a=T.normalized;T.normalized=La;Lb=T.offset;T.offset=kb;Mb=T.size;T.size=Xa;lb=T.state;T.state=tb;Na=T.stride;T.stride=sb;Zb=T.type;T.type=Oa;Pa=T.w;T.w=Vd;ub=T.x;T.x=Qa;vb=T.y;T.y=Kb;Sa=T.z;T.z=Eb;nb=v.call(this,z,c,l);gc=!1;Ac=null;vc=0;cb=!1;Fd=jc=0;Ya=1;md=0;Ab=5126;Wb=sc=Vb=ab=0;sa(nb)?(gc=!0,Ac=n.createStream(34962,nb),Ab=Ac.dtype):(Ac=n.getBuffer(nb))?Ab=Ac.dtype:"constant"in nb?(Ya=2,"number"===typeof nb.constant?
(Vb=nb.constant,sc=Wb=ab=0):(Vb=0<nb.constant.length?nb.constant[0]:0,sc=1<nb.constant.length?nb.constant[1]:0,Wb=2<nb.constant.length?nb.constant[2]:0,ab=3<nb.constant.length?nb.constant[3]:0)):(Ac=sa(nb.buffer)?n.createStream(34962,nb.buffer):n.getBuffer(nb.buffer),Ab="type"in nb?ae[nb.type]:Ac.dtype,cb=!!nb.normalized,Fd=nb.size|0,jc=nb.offset|0,md=nb.stride|0,vc=nb.divisor|0);Qb=Q.buffer;Q.buffer=Ac;Kc=Q.divisor;Q.divisor=vc;Rb=Q.normalized;Q.normalized=cb;Nd=Q.offset;Q.offset=jc;Fc=Q.size;Q.size=
Fd;ge=Q.state;Q.state=Ya;Mc=Q.stride;Q.stride=md;Wc=Q.type;Q.type=Ab;xe=Q.w;Q.w=ab;nc=Q.x;Q.x=Vb;wc=Q.y;Q.y=sc;hc=Q.z;Q.z=Wb;eb=ia.call(this,z,c,l);rc=!1;Tb=null;Xb=0;dc=!1;yc=ic=0;Bc=1;bd=0;Pc=5126;kd=Xc=Rc=Qc=0;sa(eb)?(rc=!0,Tb=n.createStream(34962,eb),Pc=Tb.dtype):(Tb=n.getBuffer(eb))?Pc=Tb.dtype:"constant"in eb?(Bc=2,"number"===typeof eb.constant?(Rc=eb.constant,Xc=kd=Qc=0):(Rc=0<eb.constant.length?eb.constant[0]:0,Xc=1<eb.constant.length?eb.constant[1]:0,kd=2<eb.constant.length?eb.constant[2]:
0,Qc=3<eb.constant.length?eb.constant[3]:0)):(Tb=sa(eb.buffer)?n.createStream(34962,eb.buffer):n.getBuffer(eb.buffer),Pc="type"in eb?ae[eb.type]:Tb.dtype,dc=!!eb.normalized,yc=eb.size|0,ic=eb.offset|0,bd=eb.stride|0,Xb=eb.divisor|0);cd=h.buffer;h.buffer=Tb;Yc=h.divisor;h.divisor=Xb;kc=h.normalized;h.normalized=dc;cc=h.offset;h.offset=ic;Zc=h.size;h.size=yc;Tc=h.state;h.state=Bc;dd=h.stride;h.stride=bd;zc=h.type;h.type=Pc;gd=h.w;h.w=Qc;qd=h.x;h.x=Rc;Dd=h.y;h.y=Xc;oe=h.z;h.z=kd;hd=t.call(this,z,c,l);
Ad=!1;Ra=null;fe=0;pe=!1;Jd=Pd=0;Hd=1;nd=0;Sc=5126;wd=id=sd=ud=0;sa(hd)?(Ad=!0,Ra=n.createStream(34962,hd),Sc=Ra.dtype):(Ra=n.getBuffer(hd))?Sc=Ra.dtype:"constant"in hd?(Hd=2,"number"===typeof hd.constant?(sd=hd.constant,id=wd=ud=0):(sd=0<hd.constant.length?hd.constant[0]:0,id=1<hd.constant.length?hd.constant[1]:0,wd=2<hd.constant.length?hd.constant[2]:0,ud=3<hd.constant.length?hd.constant[3]:0)):(Ra=sa(hd.buffer)?n.createStream(34962,hd.buffer):n.getBuffer(hd.buffer),Sc="type"in hd?ae[hd.type]:Ra.dtype,
pe=!!hd.normalized,Jd=hd.size|0,Pd=hd.offset|0,nd=hd.stride|0,fe=hd.divisor|0);Cd=S.buffer;S.buffer=Ra;Ed=S.divisor;S.divisor=fe;je=S.normalized;S.normalized=pe;we=S.offset;S.offset=Pd;pg=S.size;S.size=Jd;le=S.state;S.state=Hd;ke=S.stride;S.stride=nd;ie=S.type;S.type=Sc;te=S.w;S.w=ud;de=S.x;S.x=sd;me=S.y;S.y=id;Nc=S.z;S.z=wd;fd=k.call(this,z,c,l);ue=!1;qe=null;Kd=0;Qd=!1;Sd=Rd=0;ne=1;Ge=0;Ae=5126;Oe=Te=Se=re=0;sa(fd)?(ue=!0,qe=n.createStream(34962,fd),Ae=qe.dtype):(qe=n.getBuffer(fd))?Ae=qe.dtype:
"constant"in fd?(ne=2,"number"===typeof fd.constant?(Se=fd.constant,Te=Oe=re=0):(Se=0<fd.constant.length?fd.constant[0]:0,Te=1<fd.constant.length?fd.constant[1]:0,Oe=2<fd.constant.length?fd.constant[2]:0,re=3<fd.constant.length?fd.constant[3]:0)):(qe=sa(fd.buffer)?n.createStream(34962,fd.buffer):n.getBuffer(fd.buffer),Ae="type"in fd?ae[fd.type]:qe.dtype,Qd=!!fd.normalized,Sd=fd.size|0,Rd=fd.offset|0,Ge=fd.stride|0,Kd=fd.divisor|0);ve=X.buffer;X.buffer=qe;He=X.divisor;X.divisor=Kd;Je=X.normalized;
X.normalized=Qd;Ke=X.offset;X.offset=Rd;Le=X.size;X.size=Sd;Ie=X.state;X.state=ne;Md=X.stride;X.stride=Ge;Yd=X.type;X.type=Ae;ce=X.w;X.w=re;ee=X.x;X.x=Se;Me=X.y;X.y=Te;Id=X.z;X.z=Oe;Td=f.call(this,z,c,l);Ce=!1;Ne=null;hf=0;bf=!1;Pe=Ue=0;af=1;Ye=0;Ve=5126;Xe=$d=Ud=We=0;sa(Td)?(Ce=!0,Ne=n.createStream(34962,Td),Ve=Ne.dtype):(Ne=n.getBuffer(Td))?Ve=Ne.dtype:"constant"in Td?(af=2,"number"===typeof Td.constant?(Ud=Td.constant,$d=Xe=We=0):(Ud=0<Td.constant.length?Td.constant[0]:0,$d=1<Td.constant.length?
Td.constant[1]:0,Xe=2<Td.constant.length?Td.constant[2]:0,We=3<Td.constant.length?Td.constant[3]:0)):(Ne=sa(Td.buffer)?n.createStream(34962,Td.buffer):n.getBuffer(Td.buffer),Ve="type"in Td?ae[Td.type]:Ne.dtype,bf=!!Td.normalized,Pe=Td.size|0,Ue=Td.offset|0,Ye=Td.stride|0,hf=Td.divisor|0);jf=x.buffer;x.buffer=Ne;nf=x.divisor;x.divisor=hf;ef=x.normalized;x.normalized=bf;kf=x.offset;x.offset=Ue;lf=x.size;x.size=Pe;mf=x.state;x.state=af;rf=x.stride;x.stride=Ye;of=x.type;x.type=Ve;sf=x.w;x.w=We;Bf=x.x;
x.x=Ud;Cf=x.y;x.y=$d;Qe=x.z;x.z=Xe;De=Y.call(this,z,c,l);pf=!1;qf=null;Df=0;Gf=!1;Ef=Af=0;Ff=1;wf=0;xf=5126;If=zf=yf=vf=0;sa(De)?(pf=!0,qf=n.createStream(34962,De),xf=qf.dtype):(qf=n.getBuffer(De))?xf=qf.dtype:"constant"in De?(Ff=2,"number"===typeof De.constant?(yf=De.constant,zf=If=vf=0):(yf=0<De.constant.length?De.constant[0]:0,zf=1<De.constant.length?De.constant[1]:0,If=2<De.constant.length?De.constant[2]:0,vf=3<De.constant.length?De.constant[3]:0)):(qf=sa(De.buffer)?n.createStream(34962,De.buffer):
n.getBuffer(De.buffer),xf="type"in De?ae[De.type]:qf.dtype,Gf=!!De.normalized,Ef=De.size|0,Af=De.offset|0,wf=De.stride|0,Df=De.divisor|0);Jf=D.buffer;D.buffer=qf;Kf=D.divisor;D.divisor=Df;Lf=D.normalized;D.normalized=Gf;tf=D.offset;D.offset=Af;Qf=D.size;D.size=Ef;Hf=D.state;D.state=Ff;uf=D.stride;D.stride=wf;cg=D.type;D.type=xf;Rf=D.w;D.w=vf;Sf=D.x;D.x=yf;qg=D.y;D.y=zf;ff=D.z;D.z=If;cf=E.call(this,z,c,l);Mf=!1;Nf=null;dg=0;eg=!1;gg=fg=0;hg=1;Vf=0;Tf=5126;ig=Yf=Xf=Wf=0;sa(cf)?(Mf=!0,Nf=n.createStream(34962,
cf),Tf=Nf.dtype):(Nf=n.getBuffer(cf))?Tf=Nf.dtype:"constant"in cf?(hg=2,"number"===typeof cf.constant?(Xf=cf.constant,Yf=ig=Wf=0):(Xf=0<cf.constant.length?cf.constant[0]:0,Yf=1<cf.constant.length?cf.constant[1]:0,ig=2<cf.constant.length?cf.constant[2]:0,Wf=3<cf.constant.length?cf.constant[3]:0)):(Nf=sa(cf.buffer)?n.createStream(34962,cf.buffer):n.getBuffer(cf.buffer),Tf="type"in cf?ae[cf.type]:Nf.dtype,eg=!!cf.normalized,gg=cf.size|0,fg=cf.offset|0,Vf=cf.stride|0,dg=cf.divisor|0);rg=d.buffer;d.buffer=
Nf;sg=d.divisor;d.divisor=dg;tg=d.normalized;d.normalized=eg;ug=d.offset;d.offset=fg;vg=d.size;d.size=gg;wg=d.state;d.state=hg;xg=d.stride;d.stride=Vf;yg=d.type;d.type=Tf;zg=d.w;d.w=Wf;Ag=d.x;d.x=Xf;Bg=d.y;d.y=Yf;gf=d.z;d.z=ig;df=G.call(this,z,c,l);Of=!1;Pf=null;jg=0;kg=!1;mg=lg=0;ng=1;Zf=0;Uf=5126;og=bg=ag=$f=0;sa(df)?(Of=!0,Pf=n.createStream(34962,df),Uf=Pf.dtype):(Pf=n.getBuffer(df))?Uf=Pf.dtype:"constant"in df?(ng=2,"number"===typeof df.constant?(ag=df.constant,bg=og=$f=0):(ag=0<df.constant.length?
df.constant[0]:0,bg=1<df.constant.length?df.constant[1]:0,og=2<df.constant.length?df.constant[2]:0,$f=3<df.constant.length?df.constant[3]:0)):(Pf=sa(df.buffer)?n.createStream(34962,df.buffer):n.getBuffer(df.buffer),Uf="type"in df?ae[df.type]:Pf.dtype,kg=!!df.normalized,mg=df.size|0,lg=df.offset|0,Zf=df.stride|0,jg=df.divisor|0);Cg=a.buffer;a.buffer=Pf;Dg=a.divisor;a.divisor=jg;Eg=a.normalized;a.normalized=kg;Fg=a.offset;a.offset=lg;Gg=a.size;a.size=mg;Hg=a.state;a.state=ng;Ig=a.stride;a.stride=Zf;
Jg=a.type;a.type=Uf;Kg=a.w;a.w=$f;Lg=a.x;a.x=ag;Mg=a.y;a.y=bg;Ng=a.z;a.z=og;Og=ra.vert;ra.vert=44;Pg=ra.frag;ra.frag=43;va.dirty=!0;g(z,c,l);z.viewportWidth=na;z.viewportHeight=A;be[0]=e;be[1]=J;be[2]=P;be[3]=O;la[0]=B;la[1]=R;la[2]=fa;la[3]=ha;Ba.blend_enable=Za;Ia[0]=L;Ia[1]=K;Ia[2]=Ja;Ia[3]=u;Ba.depth_enable=y;yd[0]=xa;yd[1]=pa;yd[2]=Ea;yd[3]=F;Ba.scissor_enable=Da;Ba.stencil_enable=H;da&&(ca.cpuTime+=performance.now()-U);ea&&xd.destroyStream(V);Ca.elements=Ta;Ca.offset=Aa;Ca.count=ma;Ca.primitive=
ja;wa[45]=qa;wa[48]=ua;wa[10]=za;wa[46]=ga;wa[47]=Ga;wa[34]=Fa;wa[6]=Z;wa[7]=ac;wa[8]=ib;wa[9]=Ha;Ka&&n.destroyStream(fb);T.buffer=Ma;T.divisor=zd;T.normalized=$a;T.offset=Lb;T.size=Mb;T.state=lb;T.stride=Na;T.type=Zb;T.w=Pa;T.x=ub;T.y=vb;T.z=Sa;gc&&n.destroyStream(Ac);Q.buffer=Qb;Q.divisor=Kc;Q.normalized=Rb;Q.offset=Nd;Q.size=Fc;Q.state=ge;Q.stride=Mc;Q.type=Wc;Q.w=xe;Q.x=nc;Q.y=wc;Q.z=hc;rc&&n.destroyStream(Tb);h.buffer=cd;h.divisor=Yc;h.normalized=kc;h.offset=cc;h.size=Zc;h.state=Tc;h.stride=
dd;h.type=zc;h.w=gd;h.x=qd;h.y=Dd;h.z=oe;Ad&&n.destroyStream(Ra);S.buffer=Cd;S.divisor=Ed;S.normalized=je;S.offset=we;S.size=pg;S.state=le;S.stride=ke;S.type=ie;S.w=te;S.x=de;S.y=me;S.z=Nc;ue&&n.destroyStream(qe);X.buffer=ve;X.divisor=He;X.normalized=Je;X.offset=Ke;X.size=Le;X.state=Ie;X.stride=Md;X.type=Yd;X.w=ce;X.x=ee;X.y=Me;X.z=Id;Ce&&n.destroyStream(Ne);x.buffer=jf;x.divisor=nf;x.normalized=ef;x.offset=kf;x.size=lf;x.state=mf;x.stride=rf;x.type=of;x.w=sf;x.x=Bf;x.y=Cf;x.z=Qe;pf&&n.destroyStream(qf);
D.buffer=Jf;D.divisor=Kf;D.normalized=Lf;D.offset=tf;D.size=Qf;D.state=Hf;D.stride=uf;D.type=cg;D.w=Rf;D.x=Sf;D.y=qg;D.z=ff;Mf&&n.destroyStream(Nf);d.buffer=rg;d.divisor=sg;d.normalized=tg;d.offset=ug;d.size=vg;d.state=wg;d.stride=xg;d.type=yg;d.w=zg;d.x=Ag;d.y=Bg;d.z=gf;Of&&n.destroyStream(Pf);a.buffer=Cg;a.divisor=Dg;a.normalized=Eg;a.offset=Fg;a.size=Gg;a.state=Hg;a.stride=Ig;a.type=Jg;a.w=Kg;a.x=Lg;a.y=Mg;a.z=Ng;ra.vert=Og;ra.frag=Pg;va.dirty=!0}}},"$45,borderColorId,borderSize,colorId,constPointSize,isActive,opacity,paletteSize,paletteTexture,pixelRatio,scale,scaleFract,size,translate,translateFract,x,xFract,y,yFract":function(b,
ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,Dc,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za){var Ta,r,n,z,va,Ca,ga,Hb,ha,I,sa,Ba,ra,wa,Ea,la,W,ua,Fa,Ia,mb,da,Z,$b,Ga,ac,Sb,Ra,Fd,yd,Vd,xe,Ad,Nd,oe,fe,Dd,be,ge;Ta=b.attributes;r=b.buffer;n=b.context;z=b.current;va=b.draw;Ca=b.elements;ga=b.extensions;Hb=b.framebuffer;ha=b.gl;I=b.isBufferArgs;sa=b.next;Ba=b.shader;ra=b.uniforms;wa=b.vao;Ea=sa.blend_color;la=z.blend_color;W=sa.blend_equation;ua=z.blend_equation;
Fa=sa.blend_func;Ia=z.blend_func;mb=sa.colorMask;da=z.colorMask;Z=sa.depth_range;$b=z.depth_range;Ga=sa.polygonOffset_offset;ac=z.polygonOffset_offset;Sb=sa.sample_coverage;Ra=z.sample_coverage;Fd=sa.scissor_box;yd=z.scissor_box;Vd=sa.stencil_func;xe=z.stencil_func;Ad=sa.stencil_opBack;Nd=z.stencil_opBack;oe=sa.stencil_opFront;fe=z.stencil_opFront;Dd=sa.viewport;be=z.viewport;ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};return{batch:function(a,
d){var c,f,h,l,k,b;c=Hb.next;c!==Hb.cur&&(c?ha.bindFramebuffer(36160,c.framebuffer):ha.bindFramebuffer(36160,null),Hb.cur=c);if(z.dirty){var q,t,x,e,w,Ba,E,ra,D,G,L,u,y,v,C,p,N,S,Ea,Q,F,H,T,U,X,ba,ia,Y,Fa,Va,uc,yb,db,Nb;q=sa.dither;q!==z.dither&&(q?ha.enable(3024):ha.disable(3024),z.dither=q);t=W[0];x=W[1];if(t!==ua[0]||x!==ua[1])ha.blendEquationSeparate(t,x),ua[0]=t,ua[1]=x;e=sa.depth_func;e!==z.depth_func&&(ha.depthFunc(e),z.depth_func=e);w=Z[0];Ba=Z[1];if(w!==$b[0]||Ba!==$b[1])ha.depthRange(w,
Ba),$b[0]=w,$b[1]=Ba;E=sa.depth_mask;E!==z.depth_mask&&(ha.depthMask(E),z.depth_mask=E);ra=mb[0];D=mb[1];G=mb[2];L=mb[3];if(ra!==da[0]||D!==da[1]||G!==da[2]||L!==da[3])ha.colorMask(ra,D,G,L),da[0]=ra,da[1]=D,da[2]=G,da[3]=L;u=sa.cull_enable;u!==z.cull_enable&&(u?ha.enable(2884):ha.disable(2884),z.cull_enable=u);y=sa.cull_face;y!==z.cull_face&&(ha.cullFace(y),z.cull_face=y);v=sa.frontFace;v!==z.frontFace&&(ha.frontFace(v),z.frontFace=v);C=sa.lineWidth;C!==z.lineWidth&&(ha.lineWidth(C),z.lineWidth=
C);p=sa.polygonOffset_enable;p!==z.polygonOffset_enable&&(p?ha.enable(32823):ha.disable(32823),z.polygonOffset_enable=p);N=Ga[0];S=Ga[1];if(N!==ac[0]||S!==ac[1])ha.polygonOffset(N,S),ac[0]=N,ac[1]=S;Ea=sa.sample_alpha;Ea!==z.sample_alpha&&(Ea?ha.enable(32926):ha.disable(32926),z.sample_alpha=Ea);Q=sa.sample_enable;Q!==z.sample_enable&&(Q?ha.enable(32928):ha.disable(32928),z.sample_enable=Q);F=Sb[0];H=Sb[1];if(F!==Ra[0]||H!==Ra[1])ha.sampleCoverage(F,H),Ra[0]=F,Ra[1]=H;T=sa.stencil_mask;T!==z.stencil_mask&&
(ha.stencilMask(T),z.stencil_mask=T);U=Vd[0];X=Vd[1];ba=Vd[2];if(U!==xe[0]||X!==xe[1]||ba!==xe[2])ha.stencilFunc(U,X,ba),xe[0]=U,xe[1]=X,xe[2]=ba;ia=oe[0];Y=oe[1];Fa=oe[2];Va=oe[3];if(ia!==fe[0]||Y!==fe[1]||Fa!==fe[2]||Va!==fe[3])ha.stencilOpSeparate(ia,Y,Fa,Va),fe[0]=ia,fe[1]=Y,fe[2]=Fa,fe[3]=Va;uc=Ad[0];yb=Ad[1];db=Ad[2];Nb=Ad[3];if(uc!==Nd[0]||yb!==Nd[1]||db!==Nd[2]||Nb!==Nd[3])ha.stencilOpSeparate(uc,yb,db,Nb),Nd[0]=uc,Nd[1]=yb,Nd[2]=db,Nd[3]=Nb}ha.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;
la[3]=1;ha.enable(3042);z.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;ha.disable(2929);z.depth_enable=!1;ha.enable(3089);z.scissor_enable=!0;ha.disable(2960);z.stencil_enable=!1;if(f=z.profile)h=performance.now(),ca.count+=d;ha.useProgram(ta.program);l=ga.angle_instanced_arrays;var bb;wa.setVAO(null);ha.uniform1i(J.location,!1);ha.uniform1i(pa.location,M.bind());bb=va.instances;for(k=0;k<d;++k){b=a[k];var ob,Wa,Fd,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,
Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Dd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,De,pf,qf,Df,Gf,
Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,Qf,Hf,uf;ob=b.viewport;Wa=ob.x|0;Fd=ob.y|0;Ib="width"in ob?ob.width|0:n.framebufferWidth-Wa;Jb="height"in ob?ob.height|0:n.framebufferHeight-Fd;qc=n.viewportWidth;n.viewportWidth=Ib;Ob=n.viewportHeight;n.viewportHeight=Jb;ha.viewport(Wa,Fd,Ib,Jb);be[0]=Wa;be[1]=Fd;be[2]=Ib;be[3]=Jb;jb=b.viewport;Gb=jb.x|0;Db=jb.y|0;wb="width"in jb?jb.width|0:n.framebufferWidth-Gb;hb="height"in jb?jb.height|0:n.framebufferHeight-Db;ha.scissor(Gb,Db,wb,hb);yd[0]=Gb;yd[1]=Db;yd[2]=
wb;yd[3]=hb;Yb=A.call(this,n,b,k);Pb=!1;qb=null;Ua=0;Ub=!1;bc=zb=0;ib=1;pb=0;Ha=5126;gb=fb=Ka=rb=0;I(Yb)?(Pb=!0,qb=r.createStream(34962,Yb),Ha=qb.dtype):(qb=r.getBuffer(Yb))?Ha=qb.dtype:"constant"in Yb?(ib=2,"number"===typeof Yb.constant?(Ka=Yb.constant,fb=gb=rb=0):(Ka=0<Yb.constant.length?Yb.constant[0]:0,fb=1<Yb.constant.length?Yb.constant[1]:0,gb=2<Yb.constant.length?Yb.constant[2]:0,rb=3<Yb.constant.length?Yb.constant[3]:0)):(qb=I(Yb.buffer)?r.createStream(34962,Yb.buffer):r.getBuffer(Yb.buffer),
Ha="type"in Yb?ge[Yb.type]:qb.dtype,Ub=!!Yb.normalized,bc=Yb.size|0,zb=Yb.offset|0,pb=Yb.stride|0,Ua=Yb.divisor|0);La=ya.location;kb=Ta[La];if(1===ib){kb.buffer||ha.enableVertexAttribArray(La);Xa=bc||1;if(kb.type!==Ha||kb.size!==Xa||kb.buffer!==qb||kb.normalized!==Ub||kb.offset!==zb||kb.stride!==pb)ha.bindBuffer(34962,qb.buffer),ha.vertexAttribPointer(La,Xa,Ha,Ub,pb,zb),kb.type=Ha,kb.size=Xa,kb.buffer=qb,kb.normalized=Ub,kb.offset=zb,kb.stride=pb;kb.divisor!==Ua&&(l.vertexAttribDivisorANGLE(La,Ua),
kb.divisor=Ua)}else if(kb.buffer&&(ha.disableVertexAttribArray(La),kb.buffer=null),kb.x!==Ka||kb.y!==fb||kb.z!==gb||kb.w!==rb)ha.vertexAttrib4f(La,Ka,fb,gb,rb),kb.x=Ka,kb.y=fb,kb.z=gb,kb.w=rb;tb=ja.call(this,n,b,k);sb=!1;Oa=null;Cc=0;Qa=!1;Eb=Kb=0;Ma=1;vd=0;$a=5126;Na=lb=Mb=Lb=0;I(tb)?(sb=!0,Oa=r.createStream(34962,tb),$a=Oa.dtype):(Oa=r.getBuffer(tb))?$a=Oa.dtype:"constant"in tb?(Ma=2,"number"===typeof tb.constant?(Mb=tb.constant,lb=Na=Lb=0):(Mb=0<tb.constant.length?tb.constant[0]:0,lb=1<tb.constant.length?
tb.constant[1]:0,Na=2<tb.constant.length?tb.constant[2]:0,Lb=3<tb.constant.length?tb.constant[3]:0)):(Oa=I(tb.buffer)?r.createStream(34962,tb.buffer):r.getBuffer(tb.buffer),$a="type"in tb?ge[tb.type]:Oa.dtype,Qa=!!tb.normalized,Eb=tb.size|0,Kb=tb.offset|0,vd=tb.stride|0,Cc=tb.divisor|0);Zb=na.location;Pa=Ta[Zb];if(1===Ma){Pa.buffer||ha.enableVertexAttribArray(Zb);ub=Eb||1;if(Pa.type!==$a||Pa.size!==ub||Pa.buffer!==Oa||Pa.normalized!==Qa||Pa.offset!==Kb||Pa.stride!==vd)ha.bindBuffer(34962,Oa.buffer),
ha.vertexAttribPointer(Zb,ub,$a,Qa,vd,Kb),Pa.type=$a,Pa.size=ub,Pa.buffer=Oa,Pa.normalized=Qa,Pa.offset=Kb,Pa.stride=vd;Pa.divisor!==Cc&&(l.vertexAttribDivisorANGLE(Zb,Cc),Pa.divisor=Cc)}else if(Pa.buffer&&(ha.disableVertexAttribArray(Zb),Pa.buffer=null),Pa.x!==Mb||Pa.y!==lb||Pa.z!==Na||Pa.w!==Lb)ha.vertexAttrib4f(Zb,Mb,lb,Na,Lb),Pa.x=Mb,Pa.y=lb,Pa.z=Na,Pa.w=Lb;vb=Dc.call(this,n,b,k);Sa=!1;nb=null;gc=0;Ac=!1;cb=vc=0;jc=1;ad=0;Ya=5126;Vb=ab=Ab=md=0;I(vb)?(Sa=!0,nb=r.createStream(34962,vb),Ya=nb.dtype):
(nb=r.getBuffer(vb))?Ya=nb.dtype:"constant"in vb?(jc=2,"number"===typeof vb.constant?(Ab=vb.constant,ab=Vb=md=0):(Ab=0<vb.constant.length?vb.constant[0]:0,ab=1<vb.constant.length?vb.constant[1]:0,Vb=2<vb.constant.length?vb.constant[2]:0,md=3<vb.constant.length?vb.constant[3]:0)):(nb=I(vb.buffer)?r.createStream(34962,vb.buffer):r.getBuffer(vb.buffer),Ya="type"in vb?ge[vb.type]:nb.dtype,Ac=!!vb.normalized,cb=vb.size|0,vc=vb.offset|0,ad=vb.stride|0,gc=vb.divisor|0);sc=Ja.location;Wb=Ta[sc];if(1===jc){Wb.buffer||
ha.enableVertexAttribArray(sc);Qb=cb||1;if(Wb.type!==Ya||Wb.size!==Qb||Wb.buffer!==nb||Wb.normalized!==Ac||Wb.offset!==vc||Wb.stride!==ad)ha.bindBuffer(34962,nb.buffer),ha.vertexAttribPointer(sc,Qb,Ya,Ac,ad,vc),Wb.type=Ya,Wb.size=Qb,Wb.buffer=nb,Wb.normalized=Ac,Wb.offset=vc,Wb.stride=ad;Wb.divisor!==gc&&(l.vertexAttribDivisorANGLE(sc,gc),Wb.divisor=gc)}else if(Wb.buffer&&(ha.disableVertexAttribArray(sc),Wb.buffer=null),Wb.x!==Ab||Wb.y!==ab||Wb.z!==Vb||Wb.w!==md)ha.vertexAttrib4f(sc,Ab,ab,Vb,md),
Wb.x=Ab,Wb.y=ab,Wb.z=Vb,Wb.w=md;Kc=V.call(this,n,b,k);Rb=!1;Dd=null;Fc=0;td=!1;Wc=Mc=0;pd=1;nc=0;wc=5126;Tb=rc=eb=hc=0;I(Kc)?(Rb=!0,Dd=r.createStream(34962,Kc),wc=Dd.dtype):(Dd=r.getBuffer(Kc))?wc=Dd.dtype:"constant"in Kc?(pd=2,"number"===typeof Kc.constant?(eb=Kc.constant,rc=Tb=hc=0):(eb=0<Kc.constant.length?Kc.constant[0]:0,rc=1<Kc.constant.length?Kc.constant[1]:0,Tb=2<Kc.constant.length?Kc.constant[2]:0,hc=3<Kc.constant.length?Kc.constant[3]:0)):(Dd=I(Kc.buffer)?r.createStream(34962,Kc.buffer):
r.getBuffer(Kc.buffer),wc="type"in Kc?ge[Kc.type]:Dd.dtype,td=!!Kc.normalized,Wc=Kc.size|0,Mc=Kc.offset|0,nc=Kc.stride|0,Fc=Kc.divisor|0);Xb=Za.location;dc=Ta[Xb];if(1===pd){dc.buffer||ha.enableVertexAttribArray(Xb);ic=Wc||1;if(dc.type!==wc||dc.size!==ic||dc.buffer!==Dd||dc.normalized!==td||dc.offset!==Mc||dc.stride!==nc)ha.bindBuffer(34962,Dd.buffer),ha.vertexAttribPointer(Xb,ic,wc,td,nc,Mc),dc.type=wc,dc.size=ic,dc.buffer=Dd,dc.normalized=td,dc.offset=Mc,dc.stride=nc;dc.divisor!==Fc&&(l.vertexAttribDivisorANGLE(Xb,
Fc),dc.divisor=Fc)}else if(dc.buffer&&(ha.disableVertexAttribArray(Xb),dc.buffer=null),dc.x!==eb||dc.y!==rc||dc.z!==Tb||dc.w!==hc)ha.vertexAttrib4f(Xb,eb,rc,Tb,hc),dc.x=eb,dc.y=rc,dc.z=Tb,dc.w=hc;yc=ea.call(this,n,b,k);Bc=!1;bd=null;Pc=0;Qc=!1;Xc=Rc=0;kd=1;cd=0;Yc=5126;Tc=Zc=cc=kc=0;I(yc)?(Bc=!0,bd=r.createStream(34962,yc),Yc=bd.dtype):(bd=r.getBuffer(yc))?Yc=bd.dtype:"constant"in yc?(kd=2,"number"===typeof yc.constant?(cc=yc.constant,Zc=Tc=kc=0):(cc=0<yc.constant.length?yc.constant[0]:0,Zc=1<yc.constant.length?
yc.constant[1]:0,Tc=2<yc.constant.length?yc.constant[2]:0,kc=3<yc.constant.length?yc.constant[3]:0)):(bd=I(yc.buffer)?r.createStream(34962,yc.buffer):r.getBuffer(yc.buffer),Yc="type"in yc?ge[yc.type]:bd.dtype,Qc=!!yc.normalized,Xc=yc.size|0,Rc=yc.offset|0,cd=yc.stride|0,Pc=yc.divisor|0);dd=Aa.location;zc=Ta[dd];if(1===kd){zc.buffer||ha.enableVertexAttribArray(dd);gd=Xc||1;if(zc.type!==Yc||zc.size!==gd||zc.buffer!==bd||zc.normalized!==Qc||zc.offset!==Rc||zc.stride!==cd)ha.bindBuffer(34962,bd.buffer),
ha.vertexAttribPointer(dd,gd,Yc,Qc,cd,Rc),zc.type=Yc,zc.size=gd,zc.buffer=bd,zc.normalized=Qc,zc.offset=Rc,zc.stride=cd;zc.divisor!==Pc&&(l.vertexAttribDivisorANGLE(dd,Pc),zc.divisor=Pc)}else if(zc.buffer&&(ha.disableVertexAttribArray(dd),zc.buffer=null),zc.x!==cc||zc.y!==Zc||zc.z!==Tc||zc.w!==kc)ha.vertexAttrib4f(dd,cc,Zc,Tc,kc),zc.x=cc,zc.y=Zc,zc.z=Tc,zc.w=kc;qd=R.call(this,n,b,k);Ee=!1;ze=null;hd=0;Re=!1;he=Od=0;pe=1;Pd=0;Jd=5126;ud=Sc=nd=Hd=0;I(qd)?(Ee=!0,ze=r.createStream(34962,qd),Jd=ze.dtype):
(ze=r.getBuffer(qd))?Jd=ze.dtype:"constant"in qd?(pe=2,"number"===typeof qd.constant?(nd=qd.constant,Sc=ud=Hd=0):(nd=0<qd.constant.length?qd.constant[0]:0,Sc=1<qd.constant.length?qd.constant[1]:0,ud=2<qd.constant.length?qd.constant[2]:0,Hd=3<qd.constant.length?qd.constant[3]:0)):(ze=I(qd.buffer)?r.createStream(34962,qd.buffer):r.getBuffer(qd.buffer),Jd="type"in qd?ge[qd.type]:ze.dtype,Re=!!qd.normalized,he=qd.size|0,Od=qd.offset|0,Pd=qd.stride|0,hd=qd.divisor|0);sd=qa.location;id=Ta[sd];if(1===pe){id.buffer||
ha.enableVertexAttribArray(sd);wd=he||1;if(id.type!==Jd||id.size!==wd||id.buffer!==ze||id.normalized!==Re||id.offset!==Od||id.stride!==Pd)ha.bindBuffer(34962,ze.buffer),ha.vertexAttribPointer(sd,wd,Jd,Re,Pd,Od),id.type=Jd,id.size=wd,id.buffer=ze,id.normalized=Re,id.offset=Od,id.stride=Pd;id.divisor!==hd&&(l.vertexAttribDivisorANGLE(sd,hd),id.divisor=hd)}else if(id.buffer&&(ha.disableVertexAttribArray(sd),id.buffer=null),id.x!==nd||id.y!==Sc||id.z!==ud||id.w!==Hd)ha.vertexAttrib4f(sd,nd,Sc,ud,Hd),
id.x=nd,id.y=Sc,id.z=ud,id.w=Hd;Cd=P.call(this,n,b,k);Ed=!1;je=null;we=0;Fe=!1;ke=le=0;ie=1;te=0;de=5126;ue=fd=Nc=me=0;I(Cd)?(Ed=!0,je=r.createStream(34962,Cd),de=je.dtype):(je=r.getBuffer(Cd))?de=je.dtype:"constant"in Cd?(ie=2,"number"===typeof Cd.constant?(Nc=Cd.constant,fd=ue=me=0):(Nc=0<Cd.constant.length?Cd.constant[0]:0,fd=1<Cd.constant.length?Cd.constant[1]:0,ue=2<Cd.constant.length?Cd.constant[2]:0,me=3<Cd.constant.length?Cd.constant[3]:0)):(je=I(Cd.buffer)?r.createStream(34962,Cd.buffer):
r.getBuffer(Cd.buffer),de="type"in Cd?ge[Cd.type]:je.dtype,Fe=!!Cd.normalized,ke=Cd.size|0,le=Cd.offset|0,te=Cd.stride|0,we=Cd.divisor|0);qe=m.location;Kd=Ta[qe];if(1===ie){Kd.buffer||ha.enableVertexAttribArray(qe);Qd=ke||4;if(Kd.type!==de||Kd.size!==Qd||Kd.buffer!==je||Kd.normalized!==Fe||Kd.offset!==le||Kd.stride!==te)ha.bindBuffer(34962,je.buffer),ha.vertexAttribPointer(qe,Qd,de,Fe,te,le),Kd.type=de,Kd.size=Qd,Kd.buffer=je,Kd.normalized=Fe,Kd.offset=le,Kd.stride=te;Kd.divisor!==we&&(l.vertexAttribDivisorANGLE(qe,
we),Kd.divisor=we)}else if(Kd.buffer&&(ha.disableVertexAttribArray(qe),Kd.buffer=null),Kd.x!==Nc||Kd.y!==fd||Kd.z!==ue||Kd.w!==me)ha.vertexAttrib4f(qe,Nc,fd,ue,me),Kd.x=Nc,Kd.y=fd,Kd.z=ue,Kd.w=me;Rd=B.call(this,n,b,k);Sd=!1;ne=null;Ge=0;Ae=!1;Se=re=0;Te=1;Oe=0;ve=5126;Le=Ke=Je=He=0;I(Rd)?(Sd=!0,ne=r.createStream(34962,Rd),ve=ne.dtype):(ne=r.getBuffer(Rd))?ve=ne.dtype:"constant"in Rd?(Te=2,"number"===typeof Rd.constant?(Je=Rd.constant,Ke=Le=He=0):(Je=0<Rd.constant.length?Rd.constant[0]:0,Ke=1<Rd.constant.length?
Rd.constant[1]:0,Le=2<Rd.constant.length?Rd.constant[2]:0,He=3<Rd.constant.length?Rd.constant[3]:0)):(ne=I(Rd.buffer)?r.createStream(34962,Rd.buffer):r.getBuffer(Rd.buffer),ve="type"in Rd?ge[Rd.type]:ne.dtype,Ae=!!Rd.normalized,Se=Rd.size|0,re=Rd.offset|0,Oe=Rd.stride|0,Ge=Rd.divisor|0);Ie=Da.location;Md=Ta[Ie];if(1===Te){Md.buffer||ha.enableVertexAttribArray(Ie);Yd=Se||4;if(Md.type!==ve||Md.size!==Yd||Md.buffer!==ne||Md.normalized!==Ae||Md.offset!==re||Md.stride!==Oe)ha.bindBuffer(34962,ne.buffer),
ha.vertexAttribPointer(Ie,Yd,ve,Ae,Oe,re),Md.type=ve,Md.size=Yd,Md.buffer=ne,Md.normalized=Ae,Md.offset=re,Md.stride=Oe;Md.divisor!==Ge&&(l.vertexAttribDivisorANGLE(Ie,Ge),Md.divisor=Ge)}else if(Md.buffer&&(ha.disableVertexAttribArray(Ie),Md.buffer=null),Md.x!==Je||Md.y!==Ke||Md.z!==Le||Md.w!==He)ha.vertexAttrib4f(Ie,Je,Ke,Le,He),Md.x=Je,Md.y=Ke,Md.z=Le,Md.w=He;ce=g.call(this,n,b,k);ee=!1;Me=null;Id=0;Td=!1;Ne=Ce=0;hf=1;bf=0;Ue=5126;Ve=Ye=af=Pe=0;I(ce)?(ee=!0,Me=r.createStream(34962,ce),Ue=Me.dtype):
(Me=r.getBuffer(ce))?Ue=Me.dtype:"constant"in ce?(hf=2,"number"===typeof ce.constant?(af=ce.constant,Ye=Ve=Pe=0):(af=0<ce.constant.length?ce.constant[0]:0,Ye=1<ce.constant.length?ce.constant[1]:0,Ve=2<ce.constant.length?ce.constant[2]:0,Pe=3<ce.constant.length?ce.constant[3]:0)):(Me=I(ce.buffer)?r.createStream(34962,ce.buffer):r.getBuffer(ce.buffer),Ue="type"in ce?ge[ce.type]:Me.dtype,Td=!!ce.normalized,Ne=ce.size|0,Ce=ce.offset|0,bf=ce.stride|0,Id=ce.divisor|0);We=aa.location;Ud=Ta[We];if(1===hf){Ud.buffer||
ha.enableVertexAttribArray(We);$d=Ne||1;if(Ud.type!==Ue||Ud.size!==$d||Ud.buffer!==Me||Ud.normalized!==Td||Ud.offset!==Ce||Ud.stride!==bf)ha.bindBuffer(34962,Me.buffer),ha.vertexAttribPointer(We,$d,Ue,Td,bf,Ce),Ud.type=Ue,Ud.size=$d,Ud.buffer=Me,Ud.normalized=Td,Ud.offset=Ce,Ud.stride=bf;Ud.divisor!==Id&&(l.vertexAttribDivisorANGLE(We,Id),Ud.divisor=Id)}else if(Ud.buffer&&(ha.disableVertexAttribArray(We),Ud.buffer=null),Ud.x!==af||Ud.y!==Ye||Ud.z!==Ve||Ud.w!==Pe)ha.vertexAttrib4f(We,af,Ye,Ve,Pe),
Ud.x=af,Ud.y=Ye,Ud.z=Ve,Ud.w=Pe;Xe=n.pixelRatio;k&&jf===Xe||(jf=Xe,ha.uniform1f(za.location,Xe));nf=K.call(this,n,b,k);ef=nf[0];lf=nf[1];k&&kf===ef&&mf===lf||(kf=ef,mf=lf,ha.uniform2f(ma.location,ef,lf));rf=b.scale;of=rf[0];Bf=rf[1];k&&sf===of&&Cf===Bf||(sf=of,Cf=Bf,ha.uniform2f(xa.location,of,Bf));Qe=b.scaleFract;De=Qe[0];qf=Qe[1];k&&pf===De&&Df===qf||(pf=De,Df=qf,ha.uniform2f(fa.location,De,qf));Gf=b.translate;Af=Gf[0];Ff=Gf[1];k&&Ef===Af&&wf===Ff||(Ef=Af,wf=Ff,ha.uniform2f(ka.location,Af,Ff));
xf=b.translateFract;vf=xf[0];zf=xf[1];k&&yf===vf&&If===zf||(yf=vf,If=zf,ha.uniform2f(oa.location,vf,zf));Jf=b.opacity;k&&Kf===Jf||(Kf=Jf,ha.uniform1f(O.location,Jf));Lf=b.elements;tf=null;(tf=(Qf=I(Lf))?Ca.createStream(Lf):Ca.getElements(Lf))&&ha.bindBuffer(34963,tf.buffer.buffer);Hf=b.offset;if(uf=b.count)0<bb?tf?l.drawElementsInstancedANGLE(0,uf,tf.type,Hf<<(tf.type-5121>>1),bb):l.drawArraysInstancedANGLE(0,Hf,uf,bb):0>bb&&(tf?ha.drawElements(0,uf,tf.type,Hf<<(tf.type-5121>>1)):ha.drawArrays(0,
Hf,uf)),n.viewportWidth=qc,n.viewportHeight=Ob,Pb&&r.destroyStream(qb),sb&&r.destroyStream(Oa),Sa&&r.destroyStream(nb),Rb&&r.destroyStream(Dd),Bc&&r.destroyStream(bd),Ee&&r.destroyStream(ze),Ed&&r.destroyStream(je),Sd&&r.destroyStream(ne),ee&&r.destroyStream(Me),Qf&&Ca.destroyStream(tf)}M.unbind();z.dirty=!0;wa.setVAO(null);f&&(ca.cpuTime+=performance.now()-h)},draw:function(a){var d,g,f,h,k,b,t,x,A,w,Ba,P,B,E,ra,D,R,G,K,v,M,p,S,Ea,Q,T,V,X,ea,ba,ia,Y,ja,ta,Dc,Fa,Va,uc,yb,db,Nb,bb,ob,Wa,Fd,Ib,Jb,qc,
Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,Dd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,Ee,ze,hd,Re,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se;d=Hb.next;d!==Hb.cur&&(d?ha.bindFramebuffer(36160,d.framebuffer):ha.bindFramebuffer(36160,null),Hb.cur=d);
if(z.dirty){var Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,hf,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,kf,lf,mf;Te=sa.dither;Te!==z.dither&&(Te?ha.enable(3024):ha.disable(3024),z.dither=Te);Oe=W[0];ve=W[1];if(Oe!==ua[0]||ve!==ua[1])ha.blendEquationSeparate(Oe,ve),ua[0]=Oe,ua[1]=ve;He=sa.depth_func;He!==z.depth_func&&(ha.depthFunc(He),z.depth_func=He);Je=Z[0];Ke=Z[1];if(Je!==$b[0]||Ke!==$b[1])ha.depthRange(Je,Ke),$b[0]=Je,$b[1]=Ke;Le=sa.depth_mask;Le!==z.depth_mask&&(ha.depthMask(Le),z.depth_mask=
Le);Ie=mb[0];Md=mb[1];Yd=mb[2];ce=mb[3];if(Ie!==da[0]||Md!==da[1]||Yd!==da[2]||ce!==da[3])ha.colorMask(Ie,Md,Yd,ce),da[0]=Ie,da[1]=Md,da[2]=Yd,da[3]=ce;ee=sa.cull_enable;ee!==z.cull_enable&&(ee?ha.enable(2884):ha.disable(2884),z.cull_enable=ee);Me=sa.cull_face;Me!==z.cull_face&&(ha.cullFace(Me),z.cull_face=Me);Id=sa.frontFace;Id!==z.frontFace&&(ha.frontFace(Id),z.frontFace=Id);Td=sa.lineWidth;Td!==z.lineWidth&&(ha.lineWidth(Td),z.lineWidth=Td);Ce=sa.polygonOffset_enable;Ce!==z.polygonOffset_enable&&
(Ce?ha.enable(32823):ha.disable(32823),z.polygonOffset_enable=Ce);Ne=Ga[0];hf=Ga[1];if(Ne!==ac[0]||hf!==ac[1])ha.polygonOffset(Ne,hf),ac[0]=Ne,ac[1]=hf;bf=sa.sample_alpha;bf!==z.sample_alpha&&(bf?ha.enable(32926):ha.disable(32926),z.sample_alpha=bf);Ue=sa.sample_enable;Ue!==z.sample_enable&&(Ue?ha.enable(32928):ha.disable(32928),z.sample_enable=Ue);Pe=Sb[0];af=Sb[1];if(Pe!==Ra[0]||af!==Ra[1])ha.sampleCoverage(Pe,af),Ra[0]=Pe,Ra[1]=af;Ye=sa.stencil_mask;Ye!==z.stencil_mask&&(ha.stencilMask(Ye),z.stencil_mask=
Ye);Ve=Vd[0];We=Vd[1];Ud=Vd[2];if(Ve!==xe[0]||We!==xe[1]||Ud!==xe[2])ha.stencilFunc(Ve,We,Ud),xe[0]=Ve,xe[1]=We,xe[2]=Ud;$d=oe[0];Xe=oe[1];jf=oe[2];nf=oe[3];if($d!==fe[0]||Xe!==fe[1]||jf!==fe[2]||nf!==fe[3])ha.stencilOpSeparate($d,Xe,jf,nf),fe[0]=$d,fe[1]=Xe,fe[2]=jf,fe[3]=nf;ef=Ad[0];kf=Ad[1];lf=Ad[2];mf=Ad[3];if(ef!==Nd[0]||kf!==Nd[1]||lf!==Nd[2]||mf!==Nd[3])ha.stencilOpSeparate(ef,kf,lf,mf),Nd[0]=ef,Nd[1]=kf,Nd[2]=lf,Nd[3]=mf}g=a.viewport;f=g.x|0;h=g.y|0;k="width"in g?g.width|0:n.framebufferWidth-
f;b="height"in g?g.height|0:n.framebufferHeight-h;t=n.viewportWidth;n.viewportWidth=k;x=n.viewportHeight;n.viewportHeight=b;ha.viewport(f,h,k,b);be[0]=f;be[1]=h;be[2]=k;be[3]=b;ha.blendColor(0,0,0,1);la[0]=0;la[1]=0;la[2]=0;la[3]=1;ha.enable(3042);z.blend_enable=!0;ha.blendFuncSeparate(770,771,773,1);Ia[0]=770;Ia[1]=771;Ia[2]=773;Ia[3]=1;ha.disable(2929);z.depth_enable=!1;A=a.viewport;w=A.x|0;Ba=A.y|0;P="width"in A?A.width|0:n.framebufferWidth-w;B="height"in A?A.height|0:n.framebufferHeight-Ba;ha.scissor(w,
Ba,P,B);yd[0]=w;yd[1]=Ba;yd[2]=P;yd[3]=B;ha.enable(3089);z.scissor_enable=!0;ha.disable(2960);z.stencil_enable=!1;if(E=z.profile)ra=performance.now(),ca.count++;ha.useProgram(N.program);D=ga.angle_instanced_arrays;wa.setVAO(null);R=L.call(this,n,a,0);G=!1;K=null;v=0;M=!1;S=p=0;Ea=1;Q=0;T=5126;ba=ea=X=V=0;I(R)?(G=!0,K=r.createStream(34962,R),T=K.dtype):(K=r.getBuffer(R))?T=K.dtype:"constant"in R?(Ea=2,"number"===typeof R.constant?(X=R.constant,ea=ba=V=0):(X=0<R.constant.length?R.constant[0]:0,ea=1<
R.constant.length?R.constant[1]:0,ba=2<R.constant.length?R.constant[2]:0,V=3<R.constant.length?R.constant[3]:0)):(K=I(R.buffer)?r.createStream(34962,R.buffer):r.getBuffer(R.buffer),T="type"in R?ge[R.type]:K.dtype,M=!!R.normalized,S=R.size|0,p=R.offset|0,Q=R.stride|0,v=R.divisor|0);ia=ya.location;Y=Ta[ia];if(1===Ea){Y.buffer||ha.enableVertexAttribArray(ia);ja=S||1;if(Y.type!==T||Y.size!==ja||Y.buffer!==K||Y.normalized!==M||Y.offset!==p||Y.stride!==Q)ha.bindBuffer(34962,K.buffer),ha.vertexAttribPointer(ia,
ja,T,M,Q,p),Y.type=T,Y.size=ja,Y.buffer=K,Y.normalized=M,Y.offset=p,Y.stride=Q;Y.divisor!==v&&(D.vertexAttribDivisorANGLE(ia,v),Y.divisor=v)}else if(Y.buffer&&(ha.disableVertexAttribArray(ia),Y.buffer=null),Y.x!==X||Y.y!==ea||Y.z!==ba||Y.w!==V)ha.vertexAttrib4f(ia,X,ea,ba,V),Y.x=X,Y.y=ea,Y.z=ba,Y.w=V;ta=e.call(this,n,a,0);Dc=!1;Fa=null;Va=0;uc=!1;db=yb=0;Nb=1;bb=0;ob=5126;Jb=Ib=Fd=Wa=0;I(ta)?(Dc=!0,Fa=r.createStream(34962,ta),ob=Fa.dtype):(Fa=r.getBuffer(ta))?ob=Fa.dtype:"constant"in ta?(Nb=2,"number"===
typeof ta.constant?(Fd=ta.constant,Ib=Jb=Wa=0):(Fd=0<ta.constant.length?ta.constant[0]:0,Ib=1<ta.constant.length?ta.constant[1]:0,Jb=2<ta.constant.length?ta.constant[2]:0,Wa=3<ta.constant.length?ta.constant[3]:0)):(Fa=I(ta.buffer)?r.createStream(34962,ta.buffer):r.getBuffer(ta.buffer),ob="type"in ta?ge[ta.type]:Fa.dtype,uc=!!ta.normalized,db=ta.size|0,yb=ta.offset|0,bb=ta.stride|0,Va=ta.divisor|0);qc=na.location;Ob=Ta[qc];if(1===Nb){Ob.buffer||ha.enableVertexAttribArray(qc);jb=db||1;if(Ob.type!==
ob||Ob.size!==jb||Ob.buffer!==Fa||Ob.normalized!==uc||Ob.offset!==yb||Ob.stride!==bb)ha.bindBuffer(34962,Fa.buffer),ha.vertexAttribPointer(qc,jb,ob,uc,bb,yb),Ob.type=ob,Ob.size=jb,Ob.buffer=Fa,Ob.normalized=uc,Ob.offset=yb,Ob.stride=bb;Ob.divisor!==Va&&(D.vertexAttribDivisorANGLE(qc,Va),Ob.divisor=Va)}else if(Ob.buffer&&(ha.disableVertexAttribArray(qc),Ob.buffer=null),Ob.x!==Fd||Ob.y!==Ib||Ob.z!==Jb||Ob.w!==Wa)ha.vertexAttrib4f(qc,Fd,Ib,Jb,Wa),Ob.x=Fd,Ob.y=Ib,Ob.z=Jb,Ob.w=Wa;Gb=l.call(this,n,a,0);
Db=!1;wb=null;hb=0;Yb=!1;qb=Pb=0;Ua=1;Ub=0;zb=5126;Ha=pb=ib=bc=0;I(Gb)?(Db=!0,wb=r.createStream(34962,Gb),zb=wb.dtype):(wb=r.getBuffer(Gb))?zb=wb.dtype:"constant"in Gb?(Ua=2,"number"===typeof Gb.constant?(ib=Gb.constant,pb=Ha=bc=0):(ib=0<Gb.constant.length?Gb.constant[0]:0,pb=1<Gb.constant.length?Gb.constant[1]:0,Ha=2<Gb.constant.length?Gb.constant[2]:0,bc=3<Gb.constant.length?Gb.constant[3]:0)):(wb=I(Gb.buffer)?r.createStream(34962,Gb.buffer):r.getBuffer(Gb.buffer),zb="type"in Gb?ge[Gb.type]:wb.dtype,
Yb=!!Gb.normalized,qb=Gb.size|0,Pb=Gb.offset|0,Ub=Gb.stride|0,hb=Gb.divisor|0);rb=Ja.location;Ka=Ta[rb];if(1===Ua){Ka.buffer||ha.enableVertexAttribArray(rb);fb=qb||1;if(Ka.type!==zb||Ka.size!==fb||Ka.buffer!==wb||Ka.normalized!==Yb||Ka.offset!==Pb||Ka.stride!==Ub)ha.bindBuffer(34962,wb.buffer),ha.vertexAttribPointer(rb,fb,zb,Yb,Ub,Pb),Ka.type=zb,Ka.size=fb,Ka.buffer=wb,Ka.normalized=Yb,Ka.offset=Pb,Ka.stride=Ub;Ka.divisor!==hb&&(D.vertexAttribDivisorANGLE(rb,hb),Ka.divisor=hb)}else if(Ka.buffer&&
(ha.disableVertexAttribArray(rb),Ka.buffer=null),Ka.x!==ib||Ka.y!==pb||Ka.z!==Ha||Ka.w!==bc)ha.vertexAttrib4f(rb,ib,pb,Ha,bc),Ka.x=ib,Ka.y=pb,Ka.z=Ha,Ka.w=bc;gb=q.call(this,n,a,0);La=!1;kb=null;Xa=0;tb=!1;Oa=sb=0;Cc=1;Qa=0;Kb=5126;$a=Dd=Ma=Eb=0;I(gb)?(La=!0,kb=r.createStream(34962,gb),Kb=kb.dtype):(kb=r.getBuffer(gb))?Kb=kb.dtype:"constant"in gb?(Cc=2,"number"===typeof gb.constant?(Ma=gb.constant,Dd=$a=Eb=0):(Ma=0<gb.constant.length?gb.constant[0]:0,Dd=1<gb.constant.length?gb.constant[1]:0,$a=2<gb.constant.length?
gb.constant[2]:0,Eb=3<gb.constant.length?gb.constant[3]:0)):(kb=I(gb.buffer)?r.createStream(34962,gb.buffer):r.getBuffer(gb.buffer),Kb="type"in gb?ge[gb.type]:kb.dtype,tb=!!gb.normalized,Oa=gb.size|0,sb=gb.offset|0,Qa=gb.stride|0,Xa=gb.divisor|0);Lb=Za.location;Mb=Ta[Lb];if(1===Cc){Mb.buffer||ha.enableVertexAttribArray(Lb);lb=Oa||1;if(Mb.type!==Kb||Mb.size!==lb||Mb.buffer!==kb||Mb.normalized!==tb||Mb.offset!==sb||Mb.stride!==Qa)ha.bindBuffer(34962,kb.buffer),ha.vertexAttribPointer(Lb,lb,Kb,tb,Qa,
sb),Mb.type=Kb,Mb.size=lb,Mb.buffer=kb,Mb.normalized=tb,Mb.offset=sb,Mb.stride=Qa;Mb.divisor!==Xa&&(D.vertexAttribDivisorANGLE(Lb,Xa),Mb.divisor=Xa)}else if(Mb.buffer&&(ha.disableVertexAttribArray(Lb),Mb.buffer=null),Mb.x!==Ma||Mb.y!==Dd||Mb.z!==$a||Mb.w!==Eb)ha.vertexAttrib4f(Lb,Ma,Dd,$a,Eb),Mb.x=Ma,Mb.y=Dd,Mb.z=$a,Mb.w=Eb;Na=c.call(this,n,a,0);Zb=!1;Pa=null;ub=0;vb=!1;nb=Sa=0;gc=1;Ac=0;vc=5126;Ya=ad=jc=cb=0;I(Na)?(Zb=!0,Pa=r.createStream(34962,Na),vc=Pa.dtype):(Pa=r.getBuffer(Na))?vc=Pa.dtype:"constant"in
Na?(gc=2,"number"===typeof Na.constant?(jc=Na.constant,ad=Ya=cb=0):(jc=0<Na.constant.length?Na.constant[0]:0,ad=1<Na.constant.length?Na.constant[1]:0,Ya=2<Na.constant.length?Na.constant[2]:0,cb=3<Na.constant.length?Na.constant[3]:0)):(Pa=I(Na.buffer)?r.createStream(34962,Na.buffer):r.getBuffer(Na.buffer),vc="type"in Na?ge[Na.type]:Pa.dtype,vb=!!Na.normalized,nb=Na.size|0,Sa=Na.offset|0,Ac=Na.stride|0,ub=Na.divisor|0);md=Aa.location;Ab=Ta[md];if(1===gc){Ab.buffer||ha.enableVertexAttribArray(md);ab=
nb||1;if(Ab.type!==vc||Ab.size!==ab||Ab.buffer!==Pa||Ab.normalized!==vb||Ab.offset!==Sa||Ab.stride!==Ac)ha.bindBuffer(34962,Pa.buffer),ha.vertexAttribPointer(md,ab,vc,vb,Ac,Sa),Ab.type=vc,Ab.size=ab,Ab.buffer=Pa,Ab.normalized=vb,Ab.offset=Sa,Ab.stride=Ac;Ab.divisor!==ub&&(D.vertexAttribDivisorANGLE(md,ub),Ab.divisor=ub)}else if(Ab.buffer&&(ha.disableVertexAttribArray(md),Ab.buffer=null),Ab.x!==jc||Ab.y!==ad||Ab.z!==Ya||Ab.w!==cb)ha.vertexAttrib4f(md,jc,ad,Ya,cb),Ab.x=jc,Ab.y=ad,Ab.z=Ya,Ab.w=cb;Vb=
F.call(this,n,a,0);sc=!1;Wb=null;Qb=0;Kc=!1;Xd=Rb=0;Fc=1;td=0;Mc=5126;wc=nc=pd=Wc=0;I(Vb)?(sc=!0,Wb=r.createStream(34962,Vb),Mc=Wb.dtype):(Wb=r.getBuffer(Vb))?Mc=Wb.dtype:"constant"in Vb?(Fc=2,"number"===typeof Vb.constant?(pd=Vb.constant,nc=wc=Wc=0):(pd=0<Vb.constant.length?Vb.constant[0]:0,nc=1<Vb.constant.length?Vb.constant[1]:0,wc=2<Vb.constant.length?Vb.constant[2]:0,Wc=3<Vb.constant.length?Vb.constant[3]:0)):(Wb=I(Vb.buffer)?r.createStream(34962,Vb.buffer):r.getBuffer(Vb.buffer),Mc="type"in
Vb?ge[Vb.type]:Wb.dtype,Kc=!!Vb.normalized,Xd=Vb.size|0,Rb=Vb.offset|0,td=Vb.stride|0,Qb=Vb.divisor|0);hc=qa.location;eb=Ta[hc];if(1===Fc){eb.buffer||ha.enableVertexAttribArray(hc);rc=Xd||1;if(eb.type!==Mc||eb.size!==rc||eb.buffer!==Wb||eb.normalized!==Kc||eb.offset!==Rb||eb.stride!==td)ha.bindBuffer(34962,Wb.buffer),ha.vertexAttribPointer(hc,rc,Mc,Kc,td,Rb),eb.type=Mc,eb.size=rc,eb.buffer=Wb,eb.normalized=Kc,eb.offset=Rb,eb.stride=td;eb.divisor!==Qb&&(D.vertexAttribDivisorANGLE(hc,Qb),eb.divisor=
Qb)}else if(eb.buffer&&(ha.disableVertexAttribArray(hc),eb.buffer=null),eb.x!==pd||eb.y!==nc||eb.z!==wc||eb.w!==Wc)ha.vertexAttrib4f(hc,pd,nc,wc,Wc),eb.x=pd,eb.y=nc,eb.z=wc,eb.w=Wc;Tb=C.call(this,n,a,0);Xb=!1;dc=null;ic=0;yc=!1;bd=Bc=0;Pc=1;Qc=0;Rc=5126;Yc=cd=kd=Xc=0;I(Tb)?(Xb=!0,dc=r.createStream(34962,Tb),Rc=dc.dtype):(dc=r.getBuffer(Tb))?Rc=dc.dtype:"constant"in Tb?(Pc=2,"number"===typeof Tb.constant?(kd=Tb.constant,cd=Yc=Xc=0):(kd=0<Tb.constant.length?Tb.constant[0]:0,cd=1<Tb.constant.length?
Tb.constant[1]:0,Yc=2<Tb.constant.length?Tb.constant[2]:0,Xc=3<Tb.constant.length?Tb.constant[3]:0)):(dc=I(Tb.buffer)?r.createStream(34962,Tb.buffer):r.getBuffer(Tb.buffer),Rc="type"in Tb?ge[Tb.type]:dc.dtype,yc=!!Tb.normalized,bd=Tb.size|0,Bc=Tb.offset|0,Qc=Tb.stride|0,ic=Tb.divisor|0);kc=m.location;cc=Ta[kc];if(1===Pc){cc.buffer||ha.enableVertexAttribArray(kc);Zc=bd||4;if(cc.type!==Rc||cc.size!==Zc||cc.buffer!==dc||cc.normalized!==yc||cc.offset!==Bc||cc.stride!==Qc)ha.bindBuffer(34962,dc.buffer),
ha.vertexAttribPointer(kc,Zc,Rc,yc,Qc,Bc),cc.type=Rc,cc.size=Zc,cc.buffer=dc,cc.normalized=yc,cc.offset=Bc,cc.stride=Qc;cc.divisor!==ic&&(D.vertexAttribDivisorANGLE(kc,ic),cc.divisor=ic)}else if(cc.buffer&&(ha.disableVertexAttribArray(kc),cc.buffer=null),cc.x!==kd||cc.y!==cd||cc.z!==Yc||cc.w!==Xc)ha.vertexAttrib4f(kc,kd,cd,Yc,Xc),cc.x=kd,cc.y=cd,cc.z=Yc,cc.w=Xc;Tc=H.call(this,n,a,0);dd=!1;zc=null;gd=0;qd=!1;ze=Ee=0;hd=1;Re=0;Od=5126;Jd=Pd=pe=he=0;I(Tc)?(dd=!0,zc=r.createStream(34962,Tc),Od=zc.dtype):
(zc=r.getBuffer(Tc))?Od=zc.dtype:"constant"in Tc?(hd=2,"number"===typeof Tc.constant?(pe=Tc.constant,Pd=Jd=he=0):(pe=0<Tc.constant.length?Tc.constant[0]:0,Pd=1<Tc.constant.length?Tc.constant[1]:0,Jd=2<Tc.constant.length?Tc.constant[2]:0,he=3<Tc.constant.length?Tc.constant[3]:0)):(zc=I(Tc.buffer)?r.createStream(34962,Tc.buffer):r.getBuffer(Tc.buffer),Od="type"in Tc?ge[Tc.type]:zc.dtype,qd=!!Tc.normalized,ze=Tc.size|0,Ee=Tc.offset|0,Re=Tc.stride|0,gd=Tc.divisor|0);Hd=Da.location;nd=Ta[Hd];if(1===hd){nd.buffer||
ha.enableVertexAttribArray(Hd);Sc=ze||4;if(nd.type!==Od||nd.size!==Sc||nd.buffer!==zc||nd.normalized!==qd||nd.offset!==Ee||nd.stride!==Re)ha.bindBuffer(34962,zc.buffer),ha.vertexAttribPointer(Hd,Sc,Od,qd,Re,Ee),nd.type=Od,nd.size=Sc,nd.buffer=zc,nd.normalized=qd,nd.offset=Ee,nd.stride=Re;nd.divisor!==gd&&(D.vertexAttribDivisorANGLE(Hd,gd),nd.divisor=gd)}else if(nd.buffer&&(ha.disableVertexAttribArray(Hd),nd.buffer=null),nd.x!==pe||nd.y!==Pd||nd.z!==Jd||nd.w!==he)ha.vertexAttrib4f(Hd,pe,Pd,Jd,he),
nd.x=pe,nd.y=Pd,nd.z=Jd,nd.w=he;ud=U.call(this,n,a,0);sd=!1;id=null;wd=0;Cd=!1;je=Ed=0;we=1;Fe=0;le=5126;de=te=ie=ke=0;I(ud)?(sd=!0,id=r.createStream(34962,ud),le=id.dtype):(id=r.getBuffer(ud))?le=id.dtype:"constant"in ud?(we=2,"number"===typeof ud.constant?(ie=ud.constant,te=de=ke=0):(ie=0<ud.constant.length?ud.constant[0]:0,te=1<ud.constant.length?ud.constant[1]:0,de=2<ud.constant.length?ud.constant[2]:0,ke=3<ud.constant.length?ud.constant[3]:0)):(id=I(ud.buffer)?r.createStream(34962,ud.buffer):
r.getBuffer(ud.buffer),le="type"in ud?ge[ud.type]:id.dtype,Cd=!!ud.normalized,je=ud.size|0,Ed=ud.offset|0,Fe=ud.stride|0,wd=ud.divisor|0);me=aa.location;Nc=Ta[me];if(1===we){Nc.buffer||ha.enableVertexAttribArray(me);fd=je||1;if(Nc.type!==le||Nc.size!==fd||Nc.buffer!==id||Nc.normalized!==Cd||Nc.offset!==Ed||Nc.stride!==Fe)ha.bindBuffer(34962,id.buffer),ha.vertexAttribPointer(me,fd,le,Cd,Fe,Ed),Nc.type=le,Nc.size=fd,Nc.buffer=id,Nc.normalized=Cd,Nc.offset=Ed,Nc.stride=Fe;Nc.divisor!==wd&&(D.vertexAttribDivisorANGLE(me,
wd),Nc.divisor=wd)}else if(Nc.buffer&&(ha.disableVertexAttribArray(me),Nc.buffer=null),Nc.x!==ie||Nc.y!==te||Nc.z!==de||Nc.w!==ke)ha.vertexAttrib4f(me,ie,te,de,ke),Nc.x=ie,Nc.y=te,Nc.z=de,Nc.w=ke;ha.uniform1i(J.location,!1);ha.uniform1f(za.location,n.pixelRatio);ue=y.call(this,n,a,0);ha.uniform2f(ma.location,ue[0],ue[1]);qe=a.scale;ha.uniform2f(xa.location,qe[0],qe[1]);Kd=a.scaleFract;ha.uniform2f(fa.location,Kd[0],Kd[1]);Qd=a.translate;ha.uniform2f(ka.location,Qd[0],Qd[1]);Rd=a.translateFract;ha.uniform2f(oa.location,
Rd[0],Rd[1]);ha.uniform1f(O.location,a.opacity);ha.uniform1i(pa.location,u.bind());Sd=a.elements;ne=null;(ne=(Ge=I(Sd))?Ca.createStream(Sd):Ca.getElements(Sd))&&ha.bindBuffer(34963,ne.buffer.buffer);Ae=a.offset;if(re=a.count)Se=va.instances,0<Se?ne?D.drawElementsInstancedANGLE(0,re,ne.type,Ae<<(ne.type-5121>>1),Se):D.drawArraysInstancedANGLE(0,Ae,re,Se):0>Se&&(ne?ha.drawElements(0,re,ne.type,Ae<<(ne.type-5121>>1)):ha.drawArrays(0,Ae,re)),z.dirty=!0,wa.setVAO(null),n.viewportWidth=t,n.viewportHeight=
x,E&&(ca.cpuTime+=performance.now()-ra),G&&r.destroyStream(K),Dc&&r.destroyStream(Fa),Db&&r.destroyStream(wb),La&&r.destroyStream(kb),Zb&&r.destroyStream(Pa),sc&&r.destroyStream(Wb),Xb&&r.destroyStream(dc),dd&&r.destroyStream(zc),sd&&r.destroyStream(id),u.unbind(),Ge&&Ca.destroyStream(ne)},scope:function(c,g,l){var m,b,q,A,e,na,J,P,R,B,O,fa,K,ha,L,Za,u,Ja,la,y,M,W,C,aa,wa,N,xa,pa,F,Da,H,U,da,ka,V,ea,Ta,oa,ta,Aa,ya,ja,ma,qa,ua,Hb,za,Dc,ga,Ga,Ia,xd,mb,Sb,Z,Ua,$b,ac,Vd,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,
tb,sb,Oa,yd,Qa,Kb,Eb,Ma,zd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,Ra,Ya,Nd,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,be,Fc,xe,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd,oe,Ad,hd,fe,Od,he,pe,Pd,Jd,Hd,nd,Sc,ud,sd,id,wd,Cd,Ed,je,we,Fe,le,ke,ie,te,de,me,Nc,fd,ue,qe,Kd,Qd,Rd,Sd,ne,Ge,Ae,re,Se,Te,Oe,ve,He,Je,Ke,Le,Ie,Md,Yd,ce,ee,Me,Id,Td,Ce,Ne,pg,bf,Ue,Pe,af,Ye,Ve,We,Ud,$d,Xe,jf,nf,ef,kf,lf,mf,rf,of,sf,Bf,Cf,Qe,De,pf,qf,Df,Gf,Af,Ef,Ff,wf,xf,vf,yf,zf,If,Jf,Kf,Lf,tf,
Qf,Hf,uf,cg,Rf,Sf,qg,ff,cf,Mf,Nf,dg,eg,fg,gg,hg,Vf,Tf,Wf,Xf,Yf,ig,rg,sg,tg,ug,vg,wg,xg,yg,zg,Ag,Bg,gf,df,Of,Pf,jg,kg,lg,mg,ng,Zf,Uf,$f,ag,bg,og,Cg,Dg,Eg,Fg,Gg,Hg,Ig,Jg,Kg,Lg,Mg,Ng,Og;m=c.viewport;b=m.x|0;q=m.y|0;A="width"in m?m.width|0:n.framebufferWidth-b;e="height"in m?m.height|0:n.framebufferHeight-q;na=n.viewportWidth;n.viewportWidth=A;J=n.viewportHeight;n.viewportHeight=e;P=Dd[0];Dd[0]=b;R=Dd[1];Dd[1]=q;B=Dd[2];Dd[2]=A;O=Dd[3];Dd[3]=e;fa=Ea[0];Ea[0]=0;K=Ea[1];Ea[1]=0;ha=Ea[2];Ea[2]=0;L=Ea[3];
Ea[3]=1;Za=sa.blend_enable;sa.blend_enable=!0;u=Fa[0];Fa[0]=770;Ja=Fa[1];Fa[1]=771;la=Fa[2];Fa[2]=773;y=Fa[3];Fa[3]=1;M=sa.depth_enable;sa.depth_enable=!1;W=c.viewport;C=W.x|0;aa=W.y|0;wa="width"in W?W.width|0:n.framebufferWidth-C;N="height"in W?W.height|0:n.framebufferHeight-aa;xa=Fd[0];Fd[0]=C;pa=Fd[1];Fd[1]=aa;F=Fd[2];Fd[2]=wa;Da=Fd[3];Fd[3]=N;H=sa.scissor_enable;sa.scissor_enable=!0;U=sa.stencil_enable;sa.stencil_enable=!1;if(da=z.profile)ka=performance.now(),ca.count++;V=c.elements;ea=null;ea=
(Ta=I(V))?Ca.createStream(V):Ca.getElements(V);oa=va.elements;va.elements=ea;ta=c.offset;Aa=va.offset;va.offset=ta;ya=c.count;ja=va.count;va.count=ya;ma=va.primitive;va.primitive=0;qa=ra[45];ra[45]=!1;ua=c.markerTexture;Hb=ra[48];ra[48]=ua;za=c.opacity;Dc=ra[10];ra[10]=za;ga=p.call(this,n,c,l);Ga=ra[46];ra[46]=ga;Ia=ra[47];ra[47]=ba;xd=n.pixelRatio;mb=ra[34];ra[34]=xd;Sb=c.scale;Z=ra[6];ra[6]=Sb;Ua=c.scaleFract;$b=ra[7];ra[7]=Ua;ac=c.translate;Vd=ra[8];ra[8]=ac;ib=c.translateFract;pb=ra[9];ra[9]=
ib;Ha=w.call(this,n,c,l);rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Xa=1;tb=0;sb=5126;Kb=Qa=yd=Oa=0;I(Ha)?(rb=!0,Ka=r.createStream(34962,Ha),sb=Ka.dtype):(Ka=r.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Xa=2,"number"===typeof Ha.constant?(yd=Ha.constant,Qa=Kb=Oa=0):(yd=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=I(Ha.buffer)?r.createStream(34962,Ha.buffer):r.getBuffer(Ha.buffer),sb="type"in
Ha?ge[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=T.buffer;T.buffer=Ka;Ma=T.divisor;T.divisor=fb;zd=T.normalized;T.normalized=gb;$a=T.offset;T.offset=La;Lb=T.size;T.size=kb;Mb=T.state;T.state=Xa;lb=T.stride;T.stride=tb;Na=T.type;T.type=sb;Zb=T.w;T.w=Oa;Pa=T.x;T.x=yd;ub=T.y;T.y=Qa;vb=T.z;T.z=Kb;Sa=v.call(this,n,c,l);nb=!1;gc=null;Ac=0;vc=!1;jc=cb=0;Ra=1;Ya=0;Nd=5126;sc=Vb=ab=Ab=0;I(Sa)?(nb=!0,gc=r.createStream(34962,Sa),Nd=gc.dtype):(gc=r.getBuffer(Sa))?
Nd=gc.dtype:"constant"in Sa?(Ra=2,"number"===typeof Sa.constant?(ab=Sa.constant,Vb=sc=Ab=0):(ab=0<Sa.constant.length?Sa.constant[0]:0,Vb=1<Sa.constant.length?Sa.constant[1]:0,sc=2<Sa.constant.length?Sa.constant[2]:0,Ab=3<Sa.constant.length?Sa.constant[3]:0)):(gc=I(Sa.buffer)?r.createStream(34962,Sa.buffer):r.getBuffer(Sa.buffer),Nd="type"in Sa?ge[Sa.type]:gc.dtype,vc=!!Sa.normalized,jc=Sa.size|0,cb=Sa.offset|0,Ya=Sa.stride|0,Ac=Sa.divisor|0);Wb=Q.buffer;Q.buffer=gc;Qb=Q.divisor;Q.divisor=Ac;Kc=Q.normalized;
Q.normalized=vc;Rb=Q.offset;Q.offset=cb;be=Q.size;Q.size=jc;Fc=Q.state;Q.state=Ra;xe=Q.stride;Q.stride=Ya;Mc=Q.type;Q.type=Nd;Wc=Q.w;Q.w=Ab;pd=Q.x;Q.x=ab;nc=Q.y;Q.y=Vb;wc=Q.z;Q.z=sc;hc=ia.call(this,n,c,l);eb=!1;rc=null;Tb=0;Xb=!1;ic=dc=0;yc=1;Bc=0;bd=5126;Xc=Rc=Qc=Pc=0;I(hc)?(eb=!0,rc=r.createStream(34962,hc),bd=rc.dtype):(rc=r.getBuffer(hc))?bd=rc.dtype:"constant"in hc?(yc=2,"number"===typeof hc.constant?(Qc=hc.constant,Rc=Xc=Pc=0):(Qc=0<hc.constant.length?hc.constant[0]:0,Rc=1<hc.constant.length?
hc.constant[1]:0,Xc=2<hc.constant.length?hc.constant[2]:0,Pc=3<hc.constant.length?hc.constant[3]:0)):(rc=I(hc.buffer)?r.createStream(34962,hc.buffer):r.getBuffer(hc.buffer),bd="type"in hc?ge[hc.type]:rc.dtype,Xb=!!hc.normalized,ic=hc.size|0,dc=hc.offset|0,Bc=hc.stride|0,Tb=hc.divisor|0);kd=h.buffer;h.buffer=rc;cd=h.divisor;h.divisor=Tb;Yc=h.normalized;h.normalized=Xb;kc=h.offset;h.offset=dc;cc=h.size;h.size=ic;Zc=h.state;h.state=yc;Tc=h.stride;h.stride=Bc;dd=h.type;h.type=bd;zc=h.w;h.w=Pc;gd=h.x;
h.x=Qc;qd=h.y;h.y=Rc;oe=h.z;h.z=Xc;Ad=t.call(this,n,c,l);hd=!1;fe=null;Od=0;he=!1;Pd=pe=0;Jd=1;Hd=0;nd=5126;id=sd=ud=Sc=0;I(Ad)?(hd=!0,fe=r.createStream(34962,Ad),nd=fe.dtype):(fe=r.getBuffer(Ad))?nd=fe.dtype:"constant"in Ad?(Jd=2,"number"===typeof Ad.constant?(ud=Ad.constant,sd=id=Sc=0):(ud=0<Ad.constant.length?Ad.constant[0]:0,sd=1<Ad.constant.length?Ad.constant[1]:0,id=2<Ad.constant.length?Ad.constant[2]:0,Sc=3<Ad.constant.length?Ad.constant[3]:0)):(fe=I(Ad.buffer)?r.createStream(34962,Ad.buffer):
r.getBuffer(Ad.buffer),nd="type"in Ad?ge[Ad.type]:fe.dtype,he=!!Ad.normalized,Pd=Ad.size|0,pe=Ad.offset|0,Hd=Ad.stride|0,Od=Ad.divisor|0);wd=S.buffer;S.buffer=fe;Cd=S.divisor;S.divisor=Od;Ed=S.normalized;S.normalized=he;je=S.offset;S.offset=pe;we=S.size;S.size=Pd;Fe=S.state;S.state=Jd;le=S.stride;S.stride=Hd;ke=S.type;S.type=nd;ie=S.w;S.w=Sc;te=S.x;S.x=ud;de=S.y;S.y=sd;me=S.z;S.z=id;Nc=k.call(this,n,c,l);fd=!1;ue=null;qe=0;Kd=!1;Rd=Qd=0;Sd=1;ne=0;Ge=5126;Te=Se=re=Ae=0;I(Nc)?(fd=!0,ue=r.createStream(34962,
Nc),Ge=ue.dtype):(ue=r.getBuffer(Nc))?Ge=ue.dtype:"constant"in Nc?(Sd=2,"number"===typeof Nc.constant?(re=Nc.constant,Se=Te=Ae=0):(re=0<Nc.constant.length?Nc.constant[0]:0,Se=1<Nc.constant.length?Nc.constant[1]:0,Te=2<Nc.constant.length?Nc.constant[2]:0,Ae=3<Nc.constant.length?Nc.constant[3]:0)):(ue=I(Nc.buffer)?r.createStream(34962,Nc.buffer):r.getBuffer(Nc.buffer),Ge="type"in Nc?ge[Nc.type]:ue.dtype,Kd=!!Nc.normalized,Rd=Nc.size|0,Qd=Nc.offset|0,ne=Nc.stride|0,qe=Nc.divisor|0);Oe=X.buffer;X.buffer=
ue;ve=X.divisor;X.divisor=qe;He=X.normalized;X.normalized=Kd;Je=X.offset;X.offset=Qd;Ke=X.size;X.size=Rd;Le=X.state;X.state=Sd;Ie=X.stride;X.stride=ne;Md=X.type;X.type=Ge;Yd=X.w;X.w=Ae;ce=X.x;X.x=re;ee=X.y;X.y=Se;Me=X.z;X.z=Te;Id=f.call(this,n,c,l);Td=!1;Ce=null;Ne=0;pg=!1;Ue=bf=0;Pe=1;af=0;Ye=5126;$d=Ud=We=Ve=0;I(Id)?(Td=!0,Ce=r.createStream(34962,Id),Ye=Ce.dtype):(Ce=r.getBuffer(Id))?Ye=Ce.dtype:"constant"in Id?(Pe=2,"number"===typeof Id.constant?(We=Id.constant,Ud=$d=Ve=0):(We=0<Id.constant.length?
Id.constant[0]:0,Ud=1<Id.constant.length?Id.constant[1]:0,$d=2<Id.constant.length?Id.constant[2]:0,Ve=3<Id.constant.length?Id.constant[3]:0)):(Ce=I(Id.buffer)?r.createStream(34962,Id.buffer):r.getBuffer(Id.buffer),Ye="type"in Id?ge[Id.type]:Ce.dtype,pg=!!Id.normalized,Ue=Id.size|0,bf=Id.offset|0,af=Id.stride|0,Ne=Id.divisor|0);Xe=x.buffer;x.buffer=Ce;jf=x.divisor;x.divisor=Ne;nf=x.normalized;x.normalized=pg;ef=x.offset;x.offset=bf;kf=x.size;x.size=Ue;lf=x.state;x.state=Pe;mf=x.stride;x.stride=af;
rf=x.type;x.type=Ye;of=x.w;x.w=Ve;sf=x.x;x.x=We;Bf=x.y;x.y=Ud;Cf=x.z;x.z=$d;Qe=Y.call(this,n,c,l);De=!1;pf=null;qf=0;Df=!1;Af=Gf=0;Ef=1;Ff=0;wf=5126;zf=yf=vf=xf=0;I(Qe)?(De=!0,pf=r.createStream(34962,Qe),wf=pf.dtype):(pf=r.getBuffer(Qe))?wf=pf.dtype:"constant"in Qe?(Ef=2,"number"===typeof Qe.constant?(vf=Qe.constant,yf=zf=xf=0):(vf=0<Qe.constant.length?Qe.constant[0]:0,yf=1<Qe.constant.length?Qe.constant[1]:0,zf=2<Qe.constant.length?Qe.constant[2]:0,xf=3<Qe.constant.length?Qe.constant[3]:0)):(pf=
I(Qe.buffer)?r.createStream(34962,Qe.buffer):r.getBuffer(Qe.buffer),wf="type"in Qe?ge[Qe.type]:pf.dtype,Df=!!Qe.normalized,Af=Qe.size|0,Gf=Qe.offset|0,Ff=Qe.stride|0,qf=Qe.divisor|0);If=D.buffer;D.buffer=pf;Jf=D.divisor;D.divisor=qf;Kf=D.normalized;D.normalized=Df;Lf=D.offset;D.offset=Gf;tf=D.size;D.size=Af;Qf=D.state;D.state=Ef;Hf=D.stride;D.stride=Ff;uf=D.type;D.type=wf;cg=D.w;D.w=xf;Rf=D.x;D.x=vf;Sf=D.y;D.y=yf;qg=D.z;D.z=zf;ff=E.call(this,n,c,l);cf=!1;Mf=null;Nf=0;dg=!1;fg=eg=0;gg=1;hg=0;Vf=5126;
Yf=Xf=Wf=Tf=0;I(ff)?(cf=!0,Mf=r.createStream(34962,ff),Vf=Mf.dtype):(Mf=r.getBuffer(ff))?Vf=Mf.dtype:"constant"in ff?(gg=2,"number"===typeof ff.constant?(Wf=ff.constant,Xf=Yf=Tf=0):(Wf=0<ff.constant.length?ff.constant[0]:0,Xf=1<ff.constant.length?ff.constant[1]:0,Yf=2<ff.constant.length?ff.constant[2]:0,Tf=3<ff.constant.length?ff.constant[3]:0)):(Mf=I(ff.buffer)?r.createStream(34962,ff.buffer):r.getBuffer(ff.buffer),Vf="type"in ff?ge[ff.type]:Mf.dtype,dg=!!ff.normalized,fg=ff.size|0,eg=ff.offset|
0,hg=ff.stride|0,Nf=ff.divisor|0);ig=d.buffer;d.buffer=Mf;rg=d.divisor;d.divisor=Nf;sg=d.normalized;d.normalized=dg;tg=d.offset;d.offset=eg;ug=d.size;d.size=fg;vg=d.state;d.state=gg;wg=d.stride;d.stride=hg;xg=d.type;d.type=Vf;yg=d.w;d.w=Tf;zg=d.x;d.x=Wf;Ag=d.y;d.y=Xf;Bg=d.z;d.z=Yf;gf=G.call(this,n,c,l);df=!1;Of=null;Pf=0;jg=!1;lg=kg=0;mg=1;ng=0;Zf=5126;bg=ag=$f=Uf=0;I(gf)?(df=!0,Of=r.createStream(34962,gf),Zf=Of.dtype):(Of=r.getBuffer(gf))?Zf=Of.dtype:"constant"in gf?(mg=2,"number"===typeof gf.constant?
($f=gf.constant,ag=bg=Uf=0):($f=0<gf.constant.length?gf.constant[0]:0,ag=1<gf.constant.length?gf.constant[1]:0,bg=2<gf.constant.length?gf.constant[2]:0,Uf=3<gf.constant.length?gf.constant[3]:0)):(Of=I(gf.buffer)?r.createStream(34962,gf.buffer):r.getBuffer(gf.buffer),Zf="type"in gf?ge[gf.type]:Of.dtype,jg=!!gf.normalized,lg=gf.size|0,kg=gf.offset|0,ng=gf.stride|0,Pf=gf.divisor|0);og=a.buffer;a.buffer=Of;Cg=a.divisor;a.divisor=Pf;Dg=a.normalized;a.normalized=jg;Eg=a.offset;a.offset=kg;Fg=a.size;a.size=
lg;Gg=a.state;a.state=mg;Hg=a.stride;a.stride=ng;Ig=a.type;a.type=Zf;Jg=a.w;a.w=Uf;Kg=a.x;a.x=$f;Lg=a.y;a.y=ag;Mg=a.z;a.z=bg;Ng=Ba.vert;Ba.vert=59;Og=Ba.frag;Ba.frag=58;z.dirty=!0;g(n,c,l);n.viewportWidth=na;n.viewportHeight=J;Dd[0]=P;Dd[1]=R;Dd[2]=B;Dd[3]=O;Ea[0]=fa;Ea[1]=K;Ea[2]=ha;Ea[3]=L;sa.blend_enable=Za;Fa[0]=u;Fa[1]=Ja;Fa[2]=la;Fa[3]=y;sa.depth_enable=M;Fd[0]=xa;Fd[1]=pa;Fd[2]=F;Fd[3]=Da;sa.scissor_enable=H;sa.stencil_enable=U;da&&(ca.cpuTime+=performance.now()-ka);Ta&&Ca.destroyStream(ea);
va.elements=oa;va.offset=Aa;va.count=ja;va.primitive=ma;ra[45]=qa;ra[48]=Hb;ra[10]=Dc;ra[46]=Ga;ra[47]=Ia;ra[34]=mb;ra[6]=Z;ra[7]=$b;ra[8]=Vd;ra[9]=pb;rb&&r.destroyStream(Ka);T.buffer=Eb;T.divisor=Ma;T.normalized=zd;T.offset=$a;T.size=Lb;T.state=Mb;T.stride=lb;T.type=Na;T.w=Zb;T.x=Pa;T.y=ub;T.z=vb;nb&&r.destroyStream(gc);Q.buffer=Wb;Q.divisor=Qb;Q.normalized=Kc;Q.offset=Rb;Q.size=be;Q.state=Fc;Q.stride=xe;Q.type=Mc;Q.w=Wc;Q.x=pd;Q.y=nc;Q.z=wc;eb&&r.destroyStream(rc);h.buffer=kd;h.divisor=cd;h.normalized=
Yc;h.offset=kc;h.size=cc;h.state=Zc;h.stride=Tc;h.type=dd;h.w=zc;h.x=gd;h.y=qd;h.z=oe;hd&&r.destroyStream(fe);S.buffer=wd;S.divisor=Cd;S.normalized=Ed;S.offset=je;S.size=we;S.state=Fe;S.stride=le;S.type=ke;S.w=ie;S.x=te;S.y=de;S.z=me;fd&&r.destroyStream(ue);X.buffer=Oe;X.divisor=ve;X.normalized=He;X.offset=Je;X.size=Ke;X.state=Le;X.stride=Ie;X.type=Md;X.w=Yd;X.x=ce;X.y=ee;X.z=Me;Td&&r.destroyStream(Ce);x.buffer=Xe;x.divisor=jf;x.normalized=nf;x.offset=ef;x.size=kf;x.state=lf;x.stride=mf;x.type=rf;
x.w=of;x.x=sf;x.y=Bf;x.z=Cf;De&&r.destroyStream(pf);D.buffer=If;D.divisor=Jf;D.normalized=Kf;D.offset=Lf;D.size=tf;D.state=Qf;D.stride=Hf;D.type=uf;D.w=cg;D.x=Rf;D.y=Sf;D.z=qg;cf&&r.destroyStream(Mf);d.buffer=ig;d.divisor=rg;d.normalized=sg;d.offset=tg;d.size=ug;d.state=vg;d.stride=wg;d.type=xg;d.w=yg;d.x=zg;d.y=Ag;d.z=Bg;df&&r.destroyStream(Of);a.buffer=og;a.divisor=Cg;a.normalized=Dg;a.offset=Eg;a.size=Fg;a.state=Gg;a.stride=Hg;a.type=Ig;a.w=Jg;a.x=Kg;a.y=Lg;a.z=Mg;Ba.vert=Ng;Ba.frag=Og;z.dirty=
!0}}},"$22,align,atlas,atlasDim,atlasSize,baseline,char,charOffset,charStep,color,em,opacity,position,positionOffset,scale,translate,viewport,width":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,Dc,V,ea){var R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,ga,Hb,ha,I,sa,Ba,ra,wa,Ea,la,W;R=b.attributes;P=b.buffer;B=b.context;g=b.current;M=b.draw;K=b.elements;Da=b.extensions;qa=b.framebuffer;m=b.gl;J=b.isBufferArgs;aa=b.next;O=b.shader;
ma=b.uniforms;pa=b.vao;za=aa.blend_color;xa=g.blend_color;fa=aa.blend_equation;Aa=g.blend_equation;ka=aa.blend_func;oa=g.blend_func;ya=aa.colorMask;Ja=g.colorMask;na=aa.depth_range;Za=g.depth_range;Ta=aa.polygonOffset_offset;r=g.polygonOffset_offset;n=aa.sample_coverage;z=g.sample_coverage;va=aa.scissor_box;Ca=g.scissor_box;ga=aa.stencil_func;Hb=g.stencil_func;ha=aa.stencil_opBack;I=g.stencil_opBack;sa=aa.stencil_opFront;Ba=g.stencil_opFront;ra=aa.viewport;wa=g.viewport;Ea={int8:5120,int16:5122,int32:5124,
uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};la={offset:4,stride:8};W={offset:0,stride:8};return{batch:function(c,l){var b,q,e,w,O,ra,L,u,y,C,p,N,F;b=qa.next;b!==qa.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),qa.cur=b);if(g.dirty){var H,U,ka,ba,ma,za,Z,Ra,Be,Ze,$e,Gd,ye,se,Zd,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec;H=aa.dither;H!==g.dither&&(H?m.enable(3024):m.disable(3024),g.dither=H);U=fa[0];ka=fa[1];if(U!==Aa[0]||
ka!==Aa[1])m.blendEquationSeparate(U,ka),Aa[0]=U,Aa[1]=ka;ba=aa.depth_func;ba!==g.depth_func&&(m.depthFunc(ba),g.depth_func=ba);ma=na[0];za=na[1];if(ma!==Za[0]||za!==Za[1])m.depthRange(ma,za),Za[0]=ma,Za[1]=za;Z=aa.depth_mask;Z!==g.depth_mask&&(m.depthMask(Z),g.depth_mask=Z);Ra=ya[0];Be=ya[1];Ze=ya[2];$e=ya[3];if(Ra!==Ja[0]||Be!==Ja[1]||Ze!==Ja[2]||$e!==Ja[3])m.colorMask(Ra,Be,Ze,$e),Ja[0]=Ra,Ja[1]=Be,Ja[2]=Ze,Ja[3]=$e;Gd=aa.cull_enable;Gd!==g.cull_enable&&(Gd?m.enable(2884):m.disable(2884),g.cull_enable=
Gd);ye=aa.cull_face;ye!==g.cull_face&&(m.cullFace(ye),g.cull_face=ye);se=aa.frontFace;se!==g.frontFace&&(m.frontFace(se),g.frontFace=se);Zd=aa.lineWidth;Zd!==g.lineWidth&&(m.lineWidth(Zd),g.lineWidth=Zd);Wd=aa.polygonOffset_enable;Wd!==g.polygonOffset_enable&&(Wd?m.enable(32823):m.disable(32823),g.polygonOffset_enable=Wd);Bd=Ta[0];ld=Ta[1];if(Bd!==r[0]||ld!==r[1])m.polygonOffset(Bd,ld),r[0]=Bd,r[1]=ld;$c=aa.sample_alpha;$c!==g.sample_alpha&&($c?m.enable(32926):m.disable(32926),g.sample_alpha=$c);
rd=aa.sample_enable;rd!==g.sample_enable&&(rd?m.enable(32928):m.disable(32928),g.sample_enable=rd);Lc=n[0];od=n[1];if(Lc!==z[0]||od!==z[1])m.sampleCoverage(Lc,od),z[0]=Lc,z[1]=od;Gc=aa.stencil_mask;Gc!==g.stencil_mask&&(m.stencilMask(Gc),g.stencil_mask=Gc);ed=ga[0];Oc=ga[1];jd=ga[2];if(ed!==Hb[0]||Oc!==Hb[1]||jd!==Hb[2])m.stencilFunc(ed,Oc,jd),Hb[0]=ed,Hb[1]=Oc,Hb[2]=jd;Bb=sa[0];Fb=sa[1];tc=sa[2];xb=sa[3];if(Bb!==Ba[0]||Fb!==Ba[1]||tc!==Ba[2]||xb!==Ba[3])m.stencilOpSeparate(Bb,Fb,tc,xb),Ba[0]=Bb,
Ba[1]=Fb,Ba[2]=tc,Ba[3]=xb;xc=ha[0];Cb=ha[1];Jc=ha[2];lc=ha[3];if(xc!==I[0]||Cb!==I[1]||Jc!==I[2]||lc!==I[3])m.stencilOpSeparate(xc,Cb,Jc,lc),I[0]=xc,I[1]=Cb,I[2]=Jc,I[3]=lc;Hc=aa.scissor_enable;Hc!==g.scissor_enable&&(Hc?m.enable(3089):m.disable(3089),g.scissor_enable=Hc);Vc=va[0];Uc=va[1];Ec=va[2];ec=va[3];if(Vc!==Ca[0]||Uc!==Ca[1]||Ec!==Ca[2]||ec!==Ca[3])m.scissor(Vc,Uc,Ec,ec),Ca[0]=Vc,Ca[1]=Uc,Ca[2]=Ec,Ca[3]=ec}q=this.viewport;e=q.x|0;w=q.y|0;O="width"in q?q.width|0:B.framebufferWidth-e;ra="height"in
q?q.height|0:B.framebufferHeight-w;L=B.viewportWidth;B.viewportWidth=O;u=B.viewportHeight;B.viewportHeight=ra;m.viewport(e,w,O,ra);wa[0]=e;wa[1]=w;wa[2]=O;wa[3]=ra;m.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;m.enable(3042);g.blend_enable=!0;m.blendFuncSeparate(770,771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;m.disable(2929);g.depth_enable=!1;m.disable(2960);g.stencil_enable=!1;if(y=g.profile)C=performance.now(),ca.count+=l;m.useProgram(T.program);p=Da.angle_instanced_arrays;var Ic,oc,
pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb;pa.setVAO(null);W.buffer=this.sizeBuffer;Ic=!1;oc=null;pc=0;mc=!1;Va=fc=0;uc=1;yb=0;db=5126;Wa=ob=bb=Nb=0;J(W)?(Ic=!0,oc=P.createStream(34962,W),db=oc.dtype):(oc=P.getBuffer(W))?db=oc.dtype:"constant"in W?(uc=2,"number"===typeof W.constant?(bb=W.constant,ob=Wa=Nb=0):(bb=0<W.constant.length?W.constant[0]:
0,ob=1<W.constant.length?W.constant[1]:0,Wa=2<W.constant.length?W.constant[2]:0,Nb=3<W.constant.length?W.constant[3]:0)):(oc=J(W.buffer)?P.createStream(34962,W.buffer):P.getBuffer(W.buffer),db="type"in W?Ea[W.type]:oc.dtype,mc=!!W.normalized,Va=W.size|0,fc=W.offset|0,yb=W.stride|0,pc=W.divisor|0);Ld=ea.location;Ib=R[Ld];if(1===uc){Ib.buffer||m.enableVertexAttribArray(Ld);Jb=Va||1;if(Ib.type!==db||Ib.size!==Jb||Ib.buffer!==oc||Ib.normalized!==mc||Ib.offset!==fc||Ib.stride!==yb)m.bindBuffer(34962,oc.buffer),
m.vertexAttribPointer(Ld,Jb,db,mc,yb,fc),Ib.type=db,Ib.size=Jb,Ib.buffer=oc,Ib.normalized=mc,Ib.offset=fc,Ib.stride=yb;Ib.divisor!==pc&&(p.vertexAttribDivisorANGLE(Ld,pc),Ib.divisor=pc)}else if(Ib.buffer&&(m.disableVertexAttribArray(Ld),Ib.buffer=null),Ib.x!==bb||Ib.y!==ob||Ib.z!==Wa||Ib.w!==Nb)m.vertexAttrib4f(Ld,bb,ob,Wa,Nb),Ib.x=bb,Ib.y=ob,Ib.z=Wa,Ib.w=Nb;la.buffer=this.sizeBuffer;qc=!1;Ob=null;jb=0;Gb=!1;wb=Db=0;hb=1;Yb=0;Pb=5126;zb=Ub=Ua=qb=0;J(la)?(qc=!0,Ob=P.createStream(34962,la),Pb=Ob.dtype):
(Ob=P.getBuffer(la))?Pb=Ob.dtype:"constant"in la?(hb=2,"number"===typeof la.constant?(Ua=la.constant,Ub=zb=qb=0):(Ua=0<la.constant.length?la.constant[0]:0,Ub=1<la.constant.length?la.constant[1]:0,zb=2<la.constant.length?la.constant[2]:0,qb=3<la.constant.length?la.constant[3]:0)):(Ob=J(la.buffer)?P.createStream(34962,la.buffer):P.getBuffer(la.buffer),Pb="type"in la?Ea[la.type]:Ob.dtype,Gb=!!la.normalized,wb=la.size|0,Db=la.offset|0,Yb=la.stride|0,jb=la.divisor|0);bc=D.location;ib=R[bc];if(1===hb){ib.buffer||
m.enableVertexAttribArray(bc);pb=wb||1;if(ib.type!==Pb||ib.size!==pb||ib.buffer!==Ob||ib.normalized!==Gb||ib.offset!==Db||ib.stride!==Yb)m.bindBuffer(34962,Ob.buffer),m.vertexAttribPointer(bc,pb,Pb,Gb,Yb,Db),ib.type=Pb,ib.size=pb,ib.buffer=Ob,ib.normalized=Gb,ib.offset=Db,ib.stride=Yb;ib.divisor!==jb&&(p.vertexAttribDivisorANGLE(bc,jb),ib.divisor=jb)}else if(ib.buffer&&(m.disableVertexAttribArray(bc),ib.buffer=null),ib.x!==Ua||ib.y!==Ub||ib.z!==zb||ib.w!==qb)m.vertexAttrib4f(bc,Ua,Ub,zb,qb),ib.x=
Ua,ib.y=Ub,ib.z=zb,ib.w=qb;Ha=this.charBuffer;rb=!1;Ka=null;fb=0;gb=!1;kb=La=0;Xa=1;tb=0;sb=5126;Kb=Qa=Cc=Oa=0;J(Ha)?(rb=!0,Ka=P.createStream(34962,Ha),sb=Ka.dtype):(Ka=P.getBuffer(Ha))?sb=Ka.dtype:"constant"in Ha?(Xa=2,"number"===typeof Ha.constant?(Cc=Ha.constant,Qa=Kb=Oa=0):(Cc=0<Ha.constant.length?Ha.constant[0]:0,Qa=1<Ha.constant.length?Ha.constant[1]:0,Kb=2<Ha.constant.length?Ha.constant[2]:0,Oa=3<Ha.constant.length?Ha.constant[3]:0)):(Ka=J(Ha.buffer)?P.createStream(34962,Ha.buffer):P.getBuffer(Ha.buffer),
sb="type"in Ha?Ea[Ha.type]:Ka.dtype,gb=!!Ha.normalized,kb=Ha.size|0,La=Ha.offset|0,tb=Ha.stride|0,fb=Ha.divisor|0);Eb=Y.location;Ma=R[Eb];if(1===Xa){Ma.buffer||m.enableVertexAttribArray(Eb);vd=kb||1;if(Ma.type!==sb||Ma.size!==vd||Ma.buffer!==Ka||Ma.normalized!==gb||Ma.offset!==La||Ma.stride!==tb)m.bindBuffer(34962,Ka.buffer),m.vertexAttribPointer(Eb,vd,sb,gb,tb,La),Ma.type=sb,Ma.size=vd,Ma.buffer=Ka,Ma.normalized=gb,Ma.offset=La,Ma.stride=tb;Ma.divisor!==fb&&(p.vertexAttribDivisorANGLE(Eb,fb),Ma.divisor=
fb)}else if(Ma.buffer&&(m.disableVertexAttribArray(Eb),Ma.buffer=null),Ma.x!==Cc||Ma.y!==Qa||Ma.z!==Kb||Ma.w!==Oa)m.vertexAttrib4f(Eb,Cc,Qa,Kb,Oa),Ma.x=Cc,Ma.y=Qa,Ma.z=Kb,Ma.w=Oa;$a=this.position;Lb=!1;Mb=null;lb=0;Na=!1;Pa=Zb=0;ub=1;vb=0;Sa=5126;vc=Ac=gc=nb=0;J($a)?(Lb=!0,Mb=P.createStream(34962,$a),Sa=Mb.dtype):(Mb=P.getBuffer($a))?Sa=Mb.dtype:"constant"in $a?(ub=2,"number"===typeof $a.constant?(gc=$a.constant,Ac=vc=nb=0):(gc=0<$a.constant.length?$a.constant[0]:0,Ac=1<$a.constant.length?$a.constant[1]:
0,vc=2<$a.constant.length?$a.constant[2]:0,nb=3<$a.constant.length?$a.constant[3]:0)):(Mb=J($a.buffer)?P.createStream(34962,$a.buffer):P.getBuffer($a.buffer),Sa="type"in $a?Ea[$a.type]:Mb.dtype,Na=!!$a.normalized,Pa=$a.size|0,Zb=$a.offset|0,vb=$a.stride|0,lb=$a.divisor|0);cb=ta.location;jc=R[cb];if(1===ub){jc.buffer||m.enableVertexAttribArray(cb);ad=Pa||2;if(jc.type!==Sa||jc.size!==ad||jc.buffer!==Mb||jc.normalized!==Na||jc.offset!==Zb||jc.stride!==vb)m.bindBuffer(34962,Mb.buffer),m.vertexAttribPointer(cb,
ad,Sa,Na,vb,Zb),jc.type=Sa,jc.size=ad,jc.buffer=Mb,jc.normalized=Na,jc.offset=Zb,jc.stride=vb;jc.divisor!==lb&&(p.vertexAttribDivisorANGLE(cb,lb),jc.divisor=lb)}else if(jc.buffer&&(m.disableVertexAttribArray(cb),jc.buffer=null),jc.x!==gc||jc.y!==Ac||jc.z!==vc||jc.w!==nb)m.vertexAttrib4f(cb,gc,Ac,vc,nb),jc.x=gc,jc.y=Ac,jc.z=vc,jc.w=nb;Ya=this.viewportArray;m.uniform4f(V.location,Ya[0],Ya[1],Ya[2],Ya[3]);md=this.scale;m.uniform2f(ja.location,md[0],md[1]);Ab=this.translate;m.uniform2f(Dc.location,Ab[0],
Ab[1]);(ab=M.elements)?m.bindBuffer(34963,ab.buffer.buffer):pa.currentVAO&&(ab=K.getElements(pa.currentVAO.elements))&&m.bindBuffer(34963,ab.buffer.buffer);Vb=M.instances;for(N=0;N<l;++N){F=c[N];var sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd,qd;sc=v.call(this,B,F,N);N&&Wb===sc||(Wb=sc,m.uniform1f(E.location,sc));Qb=Q.call(this,B,F,N);N&&Kc===Qb||(Kc=Qb,m.uniform1f(G.location,Qb));Rb=F.align;N&&Xd===Rb||(Xd=Rb,m.uniform1f(S.location,
Rb));Fc=F.baseline;N&&td===Fc||(td=Fc,m.uniform1f(x.location,Fc));Mc=F.color;Wc=Mc[0];nc=Mc[1];hc=Mc[2];rc=Mc[3];N&&pd===Wc&&wc===nc&&eb===hc&&Tb===rc||(pd=Wc,wc=nc,eb=hc,Tb=rc,m.uniform4f(d.location,Wc,nc,hc,rc));Xb=ia.call(this,B,F,N);dc=Xb[0];yc=Xb[1];N&&ic===dc&&Bc===yc||(ic=dc,Bc=yc,m.uniform2f(f.location,dc,yc));bd=h.call(this,B,F,N);Pc=bd[0];Rc=bd[1];N&&Qc===Pc&&Xc===Rc||(Qc=Pc,Xc=Rc,m.uniform2f(X.location,Pc,Rc));kd=F.positionOffset;cd=kd[0];kc=kd[1];N&&Yc===cd&&cc===kc||(Yc=cd,cc=kc,m.uniform2f(A.location,
cd,kc));Zc=F.opacity;N&&Tc===Zc||(Tc=Zc,m.uniform1f(a.location,Zc));(dd=t.call(this,B,F,N))&&"framebuffer"===dd._reglType&&(dd=dd.color[0]);zc=dd._texture;m.uniform1i(k.location,zc.bind());gd=F.offset;if(qd=F.count)0<Vb?ab?p.drawElementsInstancedANGLE(0,qd,ab.type,gd<<(ab.type-5121>>1),Vb):p.drawArraysInstancedANGLE(0,gd,qd,Vb):0>Vb&&(ab?m.drawElements(0,qd,ab.type,gd<<(ab.type-5121>>1)):m.drawArrays(0,gd,qd)),zc.unbind()}Ic&&P.destroyStream(oc);qc&&P.destroyStream(Ob);rb&&P.destroyStream(Ka);Lb&&
P.destroyStream(Mb);g.dirty=!0;pa.setVAO(null);B.viewportWidth=L;B.viewportHeight=u;y&&(ca.cpuTime+=performance.now()-C)},draw:function(h){var b,t,w,O,ra,u,y,v,C,p,F,Q,H,T,U,ka,ba,ia,ma,za,Z,Ra,Be,Ze,$e,Gd,ye,se,Zd,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob,Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb;b=qa.next;b!==qa.cur&&(b?m.bindFramebuffer(36160,b.framebuffer):m.bindFramebuffer(36160,null),qa.cur=
b);if(g.dirty){var Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc;Xa=aa.dither;Xa!==g.dither&&(Xa?m.enable(3024):m.disable(3024),g.dither=Xa);tb=fa[0];sb=fa[1];if(tb!==Aa[0]||sb!==Aa[1])m.blendEquationSeparate(tb,sb),Aa[0]=tb,Aa[1]=sb;Oa=aa.depth_func;Oa!==g.depth_func&&(m.depthFunc(Oa),g.depth_func=Oa);Cc=na[0];Qa=na[1];if(Cc!==Za[0]||Qa!==Za[1])m.depthRange(Cc,Qa),Za[0]=Cc,Za[1]=Qa;Kb=aa.depth_mask;Kb!==g.depth_mask&&(m.depthMask(Kb),
g.depth_mask=Kb);Eb=ya[0];Ma=ya[1];vd=ya[2];$a=ya[3];if(Eb!==Ja[0]||Ma!==Ja[1]||vd!==Ja[2]||$a!==Ja[3])m.colorMask(Eb,Ma,vd,$a),Ja[0]=Eb,Ja[1]=Ma,Ja[2]=vd,Ja[3]=$a;Lb=aa.cull_enable;Lb!==g.cull_enable&&(Lb?m.enable(2884):m.disable(2884),g.cull_enable=Lb);Mb=aa.cull_face;Mb!==g.cull_face&&(m.cullFace(Mb),g.cull_face=Mb);lb=aa.frontFace;lb!==g.frontFace&&(m.frontFace(lb),g.frontFace=lb);Na=aa.lineWidth;Na!==g.lineWidth&&(m.lineWidth(Na),g.lineWidth=Na);Zb=aa.polygonOffset_enable;Zb!==g.polygonOffset_enable&&
(Zb?m.enable(32823):m.disable(32823),g.polygonOffset_enable=Zb);Pa=Ta[0];ub=Ta[1];if(Pa!==r[0]||ub!==r[1])m.polygonOffset(Pa,ub),r[0]=Pa,r[1]=ub;vb=aa.sample_alpha;vb!==g.sample_alpha&&(vb?m.enable(32926):m.disable(32926),g.sample_alpha=vb);Sa=aa.sample_enable;Sa!==g.sample_enable&&(Sa?m.enable(32928):m.disable(32928),g.sample_enable=Sa);nb=n[0];gc=n[1];if(nb!==z[0]||gc!==z[1])m.sampleCoverage(nb,gc),z[0]=nb,z[1]=gc;Ac=aa.stencil_mask;Ac!==g.stencil_mask&&(m.stencilMask(Ac),g.stencil_mask=Ac);vc=
ga[0];cb=ga[1];jc=ga[2];if(vc!==Hb[0]||cb!==Hb[1]||jc!==Hb[2])m.stencilFunc(vc,cb,jc),Hb[0]=vc,Hb[1]=cb,Hb[2]=jc;ad=sa[0];Ya=sa[1];md=sa[2];Ab=sa[3];if(ad!==Ba[0]||Ya!==Ba[1]||md!==Ba[2]||Ab!==Ba[3])m.stencilOpSeparate(ad,Ya,md,Ab),Ba[0]=ad,Ba[1]=Ya,Ba[2]=md,Ba[3]=Ab;ab=ha[0];Vb=ha[1];sc=ha[2];Wb=ha[3];if(ab!==I[0]||Vb!==I[1]||sc!==I[2]||Wb!==I[3])m.stencilOpSeparate(ab,Vb,sc,Wb),I[0]=ab,I[1]=Vb,I[2]=sc,I[3]=Wb;Qb=aa.scissor_enable;Qb!==g.scissor_enable&&(Qb?m.enable(3089):m.disable(3089),g.scissor_enable=
Qb);Kc=va[0];Rb=va[1];Xd=va[2];Fc=va[3];if(Kc!==Ca[0]||Rb!==Ca[1]||Xd!==Ca[2]||Fc!==Ca[3])m.scissor(Kc,Rb,Xd,Fc),Ca[0]=Kc,Ca[1]=Rb,Ca[2]=Xd,Ca[3]=Fc}t=this.viewport;w=t.x|0;O=t.y|0;ra="width"in t?t.width|0:B.framebufferWidth-w;u="height"in t?t.height|0:B.framebufferHeight-O;y=B.viewportWidth;B.viewportWidth=ra;v=B.viewportHeight;B.viewportHeight=u;m.viewport(w,O,ra,u);wa[0]=w;wa[1]=O;wa[2]=ra;wa[3]=u;m.blendColor(0,0,0,1);xa[0]=0;xa[1]=0;xa[2]=0;xa[3]=1;m.enable(3042);g.blend_enable=!0;m.blendFuncSeparate(770,
771,773,1);oa[0]=770;oa[1]=771;oa[2]=773;oa[3]=1;m.disable(2929);g.depth_enable=!1;m.disable(2960);g.stencil_enable=!1;if(C=g.profile)p=performance.now(),ca.count++;m.useProgram(N.program);F=Da.angle_instanced_arrays;pa.setVAO(null);W.buffer=this.sizeBuffer;Q=!1;H=null;T=0;U=!1;ba=ka=0;ia=1;ma=0;za=5126;Ze=Be=Ra=Z=0;J(W)?(Q=!0,H=P.createStream(34962,W),za=H.dtype):(H=P.getBuffer(W))?za=H.dtype:"constant"in W?(ia=2,"number"===typeof W.constant?(Ra=W.constant,Be=Ze=Z=0):(Ra=0<W.constant.length?W.constant[0]:
0,Be=1<W.constant.length?W.constant[1]:0,Ze=2<W.constant.length?W.constant[2]:0,Z=3<W.constant.length?W.constant[3]:0)):(H=J(W.buffer)?P.createStream(34962,W.buffer):P.getBuffer(W.buffer),za="type"in W?Ea[W.type]:H.dtype,U=!!W.normalized,ba=W.size|0,ka=W.offset|0,ma=W.stride|0,T=W.divisor|0);$e=ea.location;Gd=R[$e];if(1===ia){Gd.buffer||m.enableVertexAttribArray($e);ye=ba||1;if(Gd.type!==za||Gd.size!==ye||Gd.buffer!==H||Gd.normalized!==U||Gd.offset!==ka||Gd.stride!==ma)m.bindBuffer(34962,H.buffer),
m.vertexAttribPointer($e,ye,za,U,ma,ka),Gd.type=za,Gd.size=ye,Gd.buffer=H,Gd.normalized=U,Gd.offset=ka,Gd.stride=ma;Gd.divisor!==T&&(F.vertexAttribDivisorANGLE($e,T),Gd.divisor=T)}else if(Gd.buffer&&(m.disableVertexAttribArray($e),Gd.buffer=null),Gd.x!==Ra||Gd.y!==Be||Gd.z!==Ze||Gd.w!==Z)m.vertexAttrib4f($e,Ra,Be,Ze,Z),Gd.x=Ra,Gd.y=Be,Gd.z=Ze,Gd.w=Z;la.buffer=this.sizeBuffer;se=!1;Zd=null;Wd=0;Bd=!1;$c=ld=0;rd=1;Lc=0;od=5126;jd=Oc=ed=Gc=0;J(la)?(se=!0,Zd=P.createStream(34962,la),od=Zd.dtype):(Zd=
P.getBuffer(la))?od=Zd.dtype:"constant"in la?(rd=2,"number"===typeof la.constant?(ed=la.constant,Oc=jd=Gc=0):(ed=0<la.constant.length?la.constant[0]:0,Oc=1<la.constant.length?la.constant[1]:0,jd=2<la.constant.length?la.constant[2]:0,Gc=3<la.constant.length?la.constant[3]:0)):(Zd=J(la.buffer)?P.createStream(34962,la.buffer):P.getBuffer(la.buffer),od="type"in la?Ea[la.type]:Zd.dtype,Bd=!!la.normalized,$c=la.size|0,ld=la.offset|0,Lc=la.stride|0,Wd=la.divisor|0);Bb=D.location;Fb=R[Bb];if(1===rd){Fb.buffer||
m.enableVertexAttribArray(Bb);tc=$c||1;if(Fb.type!==od||Fb.size!==tc||Fb.buffer!==Zd||Fb.normalized!==Bd||Fb.offset!==ld||Fb.stride!==Lc)m.bindBuffer(34962,Zd.buffer),m.vertexAttribPointer(Bb,tc,od,Bd,Lc,ld),Fb.type=od,Fb.size=tc,Fb.buffer=Zd,Fb.normalized=Bd,Fb.offset=ld,Fb.stride=Lc;Fb.divisor!==Wd&&(F.vertexAttribDivisorANGLE(Bb,Wd),Fb.divisor=Wd)}else if(Fb.buffer&&(m.disableVertexAttribArray(Bb),Fb.buffer=null),Fb.x!==ed||Fb.y!==Oc||Fb.z!==jd||Fb.w!==Gc)m.vertexAttrib4f(Bb,ed,Oc,jd,Gc),Fb.x=
ed,Fb.y=Oc,Fb.z=jd,Fb.w=Gc;xb=this.charBuffer;xc=!1;Cb=null;Jc=0;lc=!1;Vc=Hc=0;Uc=1;Ec=0;ec=5126;mc=pc=oc=Ic=0;J(xb)?(xc=!0,Cb=P.createStream(34962,xb),ec=Cb.dtype):(Cb=P.getBuffer(xb))?ec=Cb.dtype:"constant"in xb?(Uc=2,"number"===typeof xb.constant?(oc=xb.constant,pc=mc=Ic=0):(oc=0<xb.constant.length?xb.constant[0]:0,pc=1<xb.constant.length?xb.constant[1]:0,mc=2<xb.constant.length?xb.constant[2]:0,Ic=3<xb.constant.length?xb.constant[3]:0)):(Cb=J(xb.buffer)?P.createStream(34962,xb.buffer):P.getBuffer(xb.buffer),
ec="type"in xb?Ea[xb.type]:Cb.dtype,lc=!!xb.normalized,Vc=xb.size|0,Hc=xb.offset|0,Ec=xb.stride|0,Jc=xb.divisor|0);fc=Y.location;Va=R[fc];if(1===Uc){Va.buffer||m.enableVertexAttribArray(fc);uc=Vc||1;if(Va.type!==ec||Va.size!==uc||Va.buffer!==Cb||Va.normalized!==lc||Va.offset!==Hc||Va.stride!==Ec)m.bindBuffer(34962,Cb.buffer),m.vertexAttribPointer(fc,uc,ec,lc,Ec,Hc),Va.type=ec,Va.size=uc,Va.buffer=Cb,Va.normalized=lc,Va.offset=Hc,Va.stride=Ec;Va.divisor!==Jc&&(F.vertexAttribDivisorANGLE(fc,Jc),Va.divisor=
Jc)}else if(Va.buffer&&(m.disableVertexAttribArray(fc),Va.buffer=null),Va.x!==oc||Va.y!==pc||Va.z!==mc||Va.w!==Ic)m.vertexAttrib4f(fc,oc,pc,mc,Ic),Va.x=oc,Va.y=pc,Va.z=mc,Va.w=Ic;yb=this.position;db=!1;Nb=null;bb=0;ob=!1;Ld=Wa=0;Ib=1;Jb=0;qc=5126;Db=Gb=jb=Ob=0;J(yb)?(db=!0,Nb=P.createStream(34962,yb),qc=Nb.dtype):(Nb=P.getBuffer(yb))?qc=Nb.dtype:"constant"in yb?(Ib=2,"number"===typeof yb.constant?(jb=yb.constant,Gb=Db=Ob=0):(jb=0<yb.constant.length?yb.constant[0]:0,Gb=1<yb.constant.length?yb.constant[1]:
0,Db=2<yb.constant.length?yb.constant[2]:0,Ob=3<yb.constant.length?yb.constant[3]:0)):(Nb=J(yb.buffer)?P.createStream(34962,yb.buffer):P.getBuffer(yb.buffer),qc="type"in yb?Ea[yb.type]:Nb.dtype,ob=!!yb.normalized,Ld=yb.size|0,Wa=yb.offset|0,Jb=yb.stride|0,bb=yb.divisor|0);wb=ta.location;hb=R[wb];if(1===Ib){hb.buffer||m.enableVertexAttribArray(wb);Yb=Ld||2;if(hb.type!==qc||hb.size!==Yb||hb.buffer!==Nb||hb.normalized!==ob||hb.offset!==Wa||hb.stride!==Jb)m.bindBuffer(34962,Nb.buffer),m.vertexAttribPointer(wb,
Yb,qc,ob,Jb,Wa),hb.type=qc,hb.size=Yb,hb.buffer=Nb,hb.normalized=ob,hb.offset=Wa,hb.stride=Jb;hb.divisor!==bb&&(F.vertexAttribDivisorANGLE(wb,bb),hb.divisor=bb)}else if(hb.buffer&&(m.disableVertexAttribArray(wb),hb.buffer=null),hb.x!==jb||hb.y!==Gb||hb.z!==Db||hb.w!==Ob)m.vertexAttrib4f(wb,jb,Gb,Db,Ob),hb.x=jb,hb.y=Gb,hb.z=Db,hb.w=Ob;Pb=L.call(this,B,h,0);m.uniform1f(E.location,Pb);qb=e.call(this,B,h,0);m.uniform1f(G.location,qb);m.uniform1f(S.location,h.align);m.uniform1f(x.location,h.baseline);
Ua=this.viewportArray;m.uniform4f(V.location,Ua[0],Ua[1],Ua[2],Ua[3]);Ub=h.color;m.uniform4f(d.location,Ub[0],Ub[1],Ub[2],Ub[3]);zb=l.call(this,B,h,0);m.uniform2f(f.location,zb[0],zb[1]);bc=q.call(this,B,h,0);m.uniform2f(X.location,bc[0],bc[1]);ib=this.scale;m.uniform2f(ja.location,ib[0],ib[1]);pb=this.translate;m.uniform2f(Dc.location,pb[0],pb[1]);Ha=h.positionOffset;m.uniform2f(A.location,Ha[0],Ha[1]);m.uniform1f(a.location,h.opacity);(rb=c.call(this,B,h,0))&&"framebuffer"===rb._reglType&&(rb=rb.color[0]);
Ka=rb._texture;m.uniform1i(k.location,Ka.bind());(fb=M.elements)?m.bindBuffer(34963,fb.buffer.buffer):pa.currentVAO&&(fb=K.getElements(pa.currentVAO.elements))&&m.bindBuffer(34963,fb.buffer.buffer);gb=h.offset;if(La=h.count)kb=M.instances,0<kb?fb?F.drawElementsInstancedANGLE(0,La,fb.type,gb<<(fb.type-5121>>1),kb):F.drawArraysInstancedANGLE(0,gb,La,kb):0>kb&&(fb?m.drawElements(0,La,fb.type,gb<<(fb.type-5121>>1)):m.drawArrays(0,gb,La)),g.dirty=!0,pa.setVAO(null),B.viewportWidth=y,B.viewportHeight=v,
C&&(ca.cpuTime+=performance.now()-p),Q&&P.destroyStream(H),se&&P.destroyStream(Zd),xc&&P.destroyStream(Cb),db&&P.destroyStream(Nb),Ka.unbind()},scope:function(a,d,c){var f,h,l,k,m,b,r,n,q,I,z,t,x,e,A,na,sa,Ba,R,E,D,G,fa,K,ha,L,Za,Ja,v,N,wa,va,Q,xa,pa,S,Da,T,V,X,ea,Ta,Y,oa,ia,ta,Aa,ya,ja,qa,Ca,Hb,ga,Dc,xd,Z,Va,uc,yb,db,Nb,bb,ob,Wa,Ra,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya,md,Ab,ab,
Vb,sc,Wb,Qb,Kc,Rb,Xd,Fc,td,Mc,Wc,pd,nc,wc,hc,eb,rc,Tb,Xb,dc,ic,yc,Bc,bd,Pc,Qc,Rc,Xc,kd,cd,Yc,kc,cc,Zc,Tc,dd,zc,gd;f=this.viewport;h=f.x|0;l=f.y|0;k="width"in f?f.width|0:B.framebufferWidth-h;m="height"in f?f.height|0:B.framebufferHeight-l;b=B.viewportWidth;B.viewportWidth=k;r=B.viewportHeight;B.viewportHeight=m;n=ra[0];ra[0]=h;q=ra[1];ra[1]=l;I=ra[2];ra[2]=k;z=ra[3];ra[3]=m;t=za[0];za[0]=0;x=za[1];za[1]=0;e=za[2];za[2]=0;A=za[3];za[3]=1;na=aa.blend_enable;aa.blend_enable=!0;sa=ka[0];ka[0]=770;Ba=
ka[1];ka[1]=771;R=ka[2];ka[2]=773;E=ka[3];ka[3]=1;D=aa.depth_enable;aa.depth_enable=!1;G=aa.stencil_enable;aa.stencil_enable=!1;if(fa=g.profile)K=performance.now(),ca.count++;ha=a.offset;L=M.offset;M.offset=ha;Za=a.count;Ja=M.count;M.count=Za;v=M.primitive;M.primitive=0;N=a.align;wa=ma[64];ma[64]=N;va=F.call(this,B,a,c);Q=ma[69];ma[69]=va;xa=C.call(this,B,a,c);pa=ma[67];ma[67]=xa;S=H.call(this,B,a,c);Da=ma[66];ma[66]=S;T=a.baseline;V=ma[65];ma[65]=T;X=U.call(this,B,a,c);ea=ma[62];ma[62]=X;Ta=a.color;
Y=ma[14];ma[14]=Ta;oa=y.call(this,B,a,c);ia=ma[63];ma[63]=oa;ta=a.opacity;Aa=ma[10];ma[10]=ta;ya=a.positionOffset;ja=ma[68];ma[68]=ya;qa=this.scale;Ca=ma[6];ma[6]=qa;Hb=this.translate;ga=ma[8];ma[8]=Hb;Dc=this.viewportArray;xd=ma[3];ma[3]=Dc;Z=this.charBuffer;Va=!1;uc=null;yb=0;db=!1;bb=Nb=0;ob=1;Wa=0;Ra=5126;Ob=qc=Jb=Ib=0;J(Z)?(Va=!0,uc=P.createStream(34962,Z),Ra=uc.dtype):(uc=P.getBuffer(Z))?Ra=uc.dtype:"constant"in Z?(ob=2,"number"===typeof Z.constant?(Jb=Z.constant,qc=Ob=Ib=0):(Jb=0<Z.constant.length?
Z.constant[0]:0,qc=1<Z.constant.length?Z.constant[1]:0,Ob=2<Z.constant.length?Z.constant[2]:0,Ib=3<Z.constant.length?Z.constant[3]:0)):(uc=J(Z.buffer)?P.createStream(34962,Z.buffer):P.getBuffer(Z.buffer),Ra="type"in Z?Ea[Z.type]:uc.dtype,db=!!Z.normalized,bb=Z.size|0,Nb=Z.offset|0,Wa=Z.stride|0,yb=Z.divisor|0);jb=u.buffer;u.buffer=uc;Gb=u.divisor;u.divisor=yb;Db=u.normalized;u.normalized=db;wb=u.offset;u.offset=Nb;hb=u.size;u.size=bb;Yb=u.state;u.state=ob;Pb=u.stride;u.stride=Wa;qb=u.type;u.type=
Ra;Ua=u.w;u.w=Ib;Ub=u.x;u.x=Jb;zb=u.y;u.y=qc;bc=u.z;u.z=Ob;la.buffer=this.sizeBuffer;ib=!1;pb=null;Ha=0;rb=!1;fb=Ka=0;gb=1;La=0;kb=5126;Oa=sb=tb=Xa=0;J(la)?(ib=!0,pb=P.createStream(34962,la),kb=pb.dtype):(pb=P.getBuffer(la))?kb=pb.dtype:"constant"in la?(gb=2,"number"===typeof la.constant?(tb=la.constant,sb=Oa=Xa=0):(tb=0<la.constant.length?la.constant[0]:0,sb=1<la.constant.length?la.constant[1]:0,Oa=2<la.constant.length?la.constant[2]:0,Xa=3<la.constant.length?la.constant[3]:0)):(pb=J(la.buffer)?
P.createStream(34962,la.buffer):P.getBuffer(la.buffer),kb="type"in la?Ea[la.type]:pb.dtype,rb=!!la.normalized,fb=la.size|0,Ka=la.offset|0,La=la.stride|0,Ha=la.divisor|0);Cc=p.buffer;p.buffer=pb;Qa=p.divisor;p.divisor=Ha;Kb=p.normalized;p.normalized=rb;Eb=p.offset;p.offset=Ka;Ma=p.size;p.size=fb;vd=p.state;p.state=gb;$a=p.stride;p.stride=La;Lb=p.type;p.type=kb;Mb=p.w;p.w=Xa;lb=p.x;p.x=tb;Na=p.y;p.y=sb;Zb=p.z;p.z=Oa;Pa=this.position;ub=!1;vb=null;Sa=0;nb=!1;Ac=gc=0;vc=1;cb=0;jc=5126;Ab=md=Ya=ad=0;J(Pa)?
(ub=!0,vb=P.createStream(34962,Pa),jc=vb.dtype):(vb=P.getBuffer(Pa))?jc=vb.dtype:"constant"in Pa?(vc=2,"number"===typeof Pa.constant?(Ya=Pa.constant,md=Ab=ad=0):(Ya=0<Pa.constant.length?Pa.constant[0]:0,md=1<Pa.constant.length?Pa.constant[1]:0,Ab=2<Pa.constant.length?Pa.constant[2]:0,ad=3<Pa.constant.length?Pa.constant[3]:0)):(vb=J(Pa.buffer)?P.createStream(34962,Pa.buffer):P.getBuffer(Pa.buffer),jc="type"in Pa?Ea[Pa.type]:vb.dtype,nb=!!Pa.normalized,Ac=Pa.size|0,gc=Pa.offset|0,cb=Pa.stride|0,Sa=
Pa.divisor|0);ab=ba.buffer;ba.buffer=vb;Vb=ba.divisor;ba.divisor=Sa;sc=ba.normalized;ba.normalized=nb;Wb=ba.offset;ba.offset=gc;Qb=ba.size;ba.size=Ac;Kc=ba.state;ba.state=vc;Rb=ba.stride;ba.stride=cb;Xd=ba.type;ba.type=jc;Fc=ba.w;ba.w=ad;td=ba.x;ba.x=Ya;Mc=ba.y;ba.y=md;Wc=ba.z;ba.z=Ab;W.buffer=this.sizeBuffer;pd=!1;nc=null;wc=0;hc=!1;rc=eb=0;Tb=1;Xb=0;dc=5126;bd=Bc=yc=ic=0;J(W)?(pd=!0,nc=P.createStream(34962,W),dc=nc.dtype):(nc=P.getBuffer(W))?dc=nc.dtype:"constant"in W?(Tb=2,"number"===typeof W.constant?
(yc=W.constant,Bc=bd=ic=0):(yc=0<W.constant.length?W.constant[0]:0,Bc=1<W.constant.length?W.constant[1]:0,bd=2<W.constant.length?W.constant[2]:0,ic=3<W.constant.length?W.constant[3]:0)):(nc=J(W.buffer)?P.createStream(34962,W.buffer):P.getBuffer(W.buffer),dc="type"in W?Ea[W.type]:nc.dtype,hc=!!W.normalized,rc=W.size|0,eb=W.offset|0,Xb=W.stride|0,wc=W.divisor|0);Pc=w.buffer;w.buffer=nc;Qc=w.divisor;w.divisor=wc;Rc=w.normalized;w.normalized=hc;Xc=w.offset;w.offset=eb;kd=w.size;w.size=rc;cd=w.state;w.state=
Tb;Yc=w.stride;w.stride=Xb;kc=w.type;w.type=dc;cc=w.w;w.w=ic;Zc=w.x;w.x=yc;Tc=w.y;w.y=Bc;dd=w.z;w.z=bd;zc=O.vert;O.vert=61;gd=O.frag;O.frag=60;g.dirty=!0;d(B,a,c);B.viewportWidth=b;B.viewportHeight=r;ra[0]=n;ra[1]=q;ra[2]=I;ra[3]=z;za[0]=t;za[1]=x;za[2]=e;za[3]=A;aa.blend_enable=na;ka[0]=sa;ka[1]=Ba;ka[2]=R;ka[3]=E;aa.depth_enable=D;aa.stencil_enable=G;fa&&(ca.cpuTime+=performance.now()-K);M.offset=L;M.count=Ja;M.primitive=v;ma[64]=wa;ma[69]=Q;ma[67]=pa;ma[66]=Da;ma[65]=V;ma[62]=ea;ma[14]=Y;ma[63]=
ia;ma[10]=Aa;ma[68]=ja;ma[6]=Ca;ma[8]=ga;ma[3]=xd;Va&&P.destroyStream(uc);u.buffer=jb;u.divisor=Gb;u.normalized=Db;u.offset=wb;u.size=hb;u.state=Yb;u.stride=Pb;u.type=qb;u.w=Ua;u.x=Ub;u.y=zb;u.z=bc;ib&&P.destroyStream(pb);p.buffer=Cc;p.divisor=Qa;p.normalized=Kb;p.offset=Eb;p.size=Ma;p.state=vd;p.stride=$a;p.type=Lb;p.w=Mb;p.x=lb;p.y=Na;p.z=Zb;ub&&P.destroyStream(vb);ba.buffer=ab;ba.divisor=Vb;ba.normalized=sc;ba.offset=Wb;ba.size=Qb;ba.state=Kc;ba.stride=Rb;ba.type=Xd;ba.w=Fc;ba.x=td;ba.y=Mc;ba.z=
Wc;pd&&P.destroyStream(nc);w.buffer=Pc;w.divisor=Qc;w.normalized=Rc;w.offset=Xc;w.size=kd;w.state=cd;w.stride=Yc;w.type=kc;w.w=cc;w.x=Zc;w.y=Tc;w.z=dd;O.vert=zc;O.frag=gd;g.dirty=!0}}},$2:function(b,ca,N){var L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G;L=b.attributes;e=b.current;l=b.framebuffer;q=b.gl;c=b.next;F=b.vao;C=c.blend_color;H=e.blend_color;U=c.blend_equation;y=e.blend_equation;u=c.blend_func;p=e.blend_func;ba=c.colorMask;w=e.colorMask;T=c.depth_range;v=e.depth_range;Q=
c.polygonOffset_offset;ia=e.polygonOffset_offset;h=c.sample_coverage;t=e.sample_coverage;S=c.scissor_box;k=e.scissor_box;X=c.stencil_func;f=e.stencil_func;x=c.stencil_opBack;Y=e.stencil_opBack;D=c.stencil_opFront;E=e.stencil_opFront;d=c.viewport;G=e.viewport;return{poll:function(){var a,b,A,L,N,F,ea,R,P,B,g,M,K,Da,ca,m,J,aa,O,ma,pa,za;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;L=c.depth_enable;N=c.dither;F=c.polygonOffset_enable;ea=c.sample_alpha;R=c.sample_enable;P=c.scissor_enable;B=c.stencil_enable;
g=c.cull_face;M=e.cull_face;K=c.depth_func;Da=e.depth_func;ca=c.depth_mask;m=e.depth_mask;J=c.frontFace;aa=e.frontFace;O=c.lineWidth;ma=e.lineWidth;pa=c.stencil_mask;za=e.stencil_mask;a=l.next;a!==l.cur&&(a?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null),l.cur=a);b!==e.blend_enable&&(b?q.enable(3042):q.disable(3042),e.blend_enable=b);A!==e.cull_enable&&(A?q.enable(2884):q.disable(2884),e.cull_enable=A);L!==e.depth_enable&&(L?q.enable(2929):q.disable(2929),e.depth_enable=L);N!==
e.dither&&(N?q.enable(3024):q.disable(3024),e.dither=N);F!==e.polygonOffset_enable&&(F?q.enable(32823):q.disable(32823),e.polygonOffset_enable=F);ea!==e.sample_alpha&&(ea?q.enable(32926):q.disable(32926),e.sample_alpha=ea);R!==e.sample_enable&&(R?q.enable(32928):q.disable(32928),e.sample_enable=R);P!==e.scissor_enable&&(P?q.enable(3089):q.disable(3089),e.scissor_enable=P);B!==e.stencil_enable&&(B?q.enable(2960):q.disable(2960),e.stencil_enable=B);if(C[0]!==H[0]||C[1]!==H[1]||C[2]!==H[2]||C[3]!==H[3])q.blendColor(C[0],
C[1],C[2],C[3]),H[0]=C[0],H[1]=C[1],H[2]=C[2],H[3]=C[3];if(U[0]!==y[0]||U[1]!==y[1])q.blendEquationSeparate(U[0],U[1]),y[0]=U[0],y[1]=U[1];if(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3])q.blendFuncSeparate(u[0],u[1],u[2],u[3]),p[0]=u[0],p[1]=u[1],p[2]=u[2],p[3]=u[3];if(ba[0]!==w[0]||ba[1]!==w[1]||ba[2]!==w[2]||ba[3]!==w[3])q.colorMask(ba[0],ba[1],ba[2],ba[3]),w[0]=ba[0],w[1]=ba[1],w[2]=ba[2],w[3]=ba[3];g!==M&&(q.cullFace(g),e.cull_face=g);K!==Da&&(q.depthFunc(K),e.depth_func=K);ca!==m&&(q.depthMask(ca),
e.depth_mask=ca);if(T[0]!==v[0]||T[1]!==v[1])q.depthRange(T[0],T[1]),v[0]=T[0],v[1]=T[1];J!==aa&&(q.frontFace(J),e.frontFace=J);O!==ma&&(q.lineWidth(O),e.lineWidth=O);if(Q[0]!==ia[0]||Q[1]!==ia[1])q.polygonOffset(Q[0],Q[1]),ia[0]=Q[0],ia[1]=Q[1];if(h[0]!==t[0]||h[1]!==t[1])q.sampleCoverage(h[0],h[1]),t[0]=h[0],t[1]=h[1];if(S[0]!==k[0]||S[1]!==k[1]||S[2]!==k[2]||S[3]!==k[3])q.scissor(S[0],S[1],S[2],S[3]),k[0]=S[0],k[1]=S[1],k[2]=S[2],k[3]=S[3];if(X[0]!==f[0]||X[1]!==f[1]||X[2]!==f[2])q.stencilFunc(X[0],
X[1],X[2]),f[0]=X[0],f[1]=X[1],f[2]=X[2];pa!==za&&(q.stencilMask(pa),e.stencil_mask=pa);if(x[0]!==Y[0]||x[1]!==Y[1]||x[2]!==Y[2]||x[3]!==Y[3])q.stencilOpSeparate(x[0],x[1],x[2],x[3]),Y[0]=x[0],Y[1]=x[1],Y[2]=x[2],Y[3]=x[3];if(D[0]!==E[0]||D[1]!==E[1]||D[2]!==E[2]||D[3]!==E[3])q.stencilOpSeparate(D[0],D[1],D[2],D[3]),E[0]=D[0],E[1]=D[1],E[2]=D[2],E[3]=D[3];if(d[0]!==G[0]||d[1]!==G[1]||d[2]!==G[2]||d[3]!==G[3])q.viewport(d[0],d[1],d[2],d[3]),G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3]},refresh:function(){var a,
b,A,N,ca,V,ea,R,P,B,g,M,K,Da,qa,m;e.dirty=!1;b=c.blend_enable;A=c.cull_enable;N=c.depth_enable;ca=c.dither;V=c.polygonOffset_enable;ea=c.sample_alpha;R=c.sample_enable;P=c.scissor_enable;B=c.stencil_enable;g=c.cull_face;M=c.depth_func;K=c.depth_mask;Da=c.frontFace;qa=c.lineWidth;m=c.stencil_mask;(a=l.next)?q.bindFramebuffer(36160,a.framebuffer):q.bindFramebuffer(36160,null);l.cur=a;a=L[0];a.buffer?(q.enableVertexAttribArray(0),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(0,a.size,a.type,
a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(0),q.vertexAttrib4f(0,a.x,a.y,a.z,a.w),a.buffer=null);a=L[1];a.buffer?(q.enableVertexAttribArray(1),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(1,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(1),q.vertexAttrib4f(1,a.x,a.y,a.z,a.w),a.buffer=null);a=L[2];a.buffer?(q.enableVertexAttribArray(2),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(2,a.size,a.type,a.normalized,a.stride,a.offset)):
(q.disableVertexAttribArray(2),q.vertexAttrib4f(2,a.x,a.y,a.z,a.w),a.buffer=null);a=L[3];a.buffer?(q.enableVertexAttribArray(3),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(3,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(3),q.vertexAttrib4f(3,a.x,a.y,a.z,a.w),a.buffer=null);a=L[4];a.buffer?(q.enableVertexAttribArray(4),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(4,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(4),
q.vertexAttrib4f(4,a.x,a.y,a.z,a.w),a.buffer=null);a=L[5];a.buffer?(q.enableVertexAttribArray(5),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(5,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(5),q.vertexAttrib4f(5,a.x,a.y,a.z,a.w),a.buffer=null);a=L[6];a.buffer?(q.enableVertexAttribArray(6),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(6,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(6),q.vertexAttrib4f(6,a.x,a.y,a.z,
a.w),a.buffer=null);a=L[7];a.buffer?(q.enableVertexAttribArray(7),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(7,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(7),q.vertexAttrib4f(7,a.x,a.y,a.z,a.w),a.buffer=null);a=L[8];a.buffer?(q.enableVertexAttribArray(8),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(8,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(8),q.vertexAttrib4f(8,a.x,a.y,a.z,a.w),a.buffer=null);a=L[9];a.buffer?
(q.enableVertexAttribArray(9),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(9,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(9),q.vertexAttrib4f(9,a.x,a.y,a.z,a.w),a.buffer=null);a=L[10];a.buffer?(q.enableVertexAttribArray(10),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(10,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(10),q.vertexAttrib4f(10,a.x,a.y,a.z,a.w),a.buffer=null);a=L[11];a.buffer?(q.enableVertexAttribArray(11),
q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(11,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(11),q.vertexAttrib4f(11,a.x,a.y,a.z,a.w),a.buffer=null);a=L[12];a.buffer?(q.enableVertexAttribArray(12),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(12,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(12),q.vertexAttrib4f(12,a.x,a.y,a.z,a.w),a.buffer=null);a=L[13];a.buffer?(q.enableVertexAttribArray(13),q.bindBuffer(34962,a.buffer.buffer),
q.vertexAttribPointer(13,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(13),q.vertexAttrib4f(13,a.x,a.y,a.z,a.w),a.buffer=null);a=L[14];a.buffer?(q.enableVertexAttribArray(14),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(14,a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(14),q.vertexAttrib4f(14,a.x,a.y,a.z,a.w),a.buffer=null);a=L[15];a.buffer?(q.enableVertexAttribArray(15),q.bindBuffer(34962,a.buffer.buffer),q.vertexAttribPointer(15,
a.size,a.type,a.normalized,a.stride,a.offset)):(q.disableVertexAttribArray(15),q.vertexAttrib4f(15,a.x,a.y,a.z,a.w),a.buffer=null);F.currentVAO=null;F.setVAO(F.targetVAO);b?q.enable(3042):q.disable(3042);e.blend_enable=b;A?q.enable(2884):q.disable(2884);e.cull_enable=A;N?q.enable(2929):q.disable(2929);e.depth_enable=N;ca?q.enable(3024):q.disable(3024);e.dither=ca;V?q.enable(32823):q.disable(32823);e.polygonOffset_enable=V;ea?q.enable(32926):q.disable(32926);e.sample_alpha=ea;R?q.enable(32928):q.disable(32928);
e.sample_enable=R;P?q.enable(3089):q.disable(3089);e.scissor_enable=P;B?q.enable(2960):q.disable(2960);e.stencil_enable=B;q.blendColor(C[0],C[1],C[2],C[3]);H[0]=C[0];H[1]=C[1];H[2]=C[2];H[3]=C[3];q.blendEquationSeparate(U[0],U[1]);y[0]=U[0];y[1]=U[1];q.blendFuncSeparate(u[0],u[1],u[2],u[3]);p[0]=u[0];p[1]=u[1];p[2]=u[2];p[3]=u[3];q.colorMask(ba[0],ba[1],ba[2],ba[3]);w[0]=ba[0];w[1]=ba[1];w[2]=ba[2];w[3]=ba[3];q.cullFace(g);e.cull_face=g;q.depthFunc(M);e.depth_func=M;q.depthMask(K);e.depth_mask=K;
q.depthRange(T[0],T[1]);v[0]=T[0];v[1]=T[1];q.frontFace(Da);e.frontFace=Da;q.lineWidth(qa);e.lineWidth=qa;q.polygonOffset(Q[0],Q[1]);ia[0]=Q[0];ia[1]=Q[1];q.sampleCoverage(h[0],h[1]);t[0]=h[0];t[1]=h[1];q.scissor(S[0],S[1],S[2],S[3]);k[0]=S[0];k[1]=S[1];k[2]=S[2];k[3]=S[3];q.stencilFunc(X[0],X[1],X[2]);f[0]=X[0];f[1]=X[1];f[2]=X[2];q.stencilMask(m);e.stencil_mask=m;q.stencilOpSeparate(x[0],x[1],x[2],x[3]);Y[0]=x[0];Y[1]=x[1];Y[2]=x[2];Y[3]=x[3];q.stencilOpSeparate(D[0],D[1],D[2],D[3]);E[0]=D[0];E[1]=
D[1];E[2]=D[2];E[3]=D[3];q.viewport(d[0],d[1],d[2],d[3]);G[0]=d[0];G[1]=d[1];G[2]=d[2];G[3]=d[3]}}},$7:function(b,ca,N,L,e,l,q,c){var F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,ga,V,ea,R;F=b.context;C=b.current;H=b.framebuffer;U=b.gl;y=b.next;u=b.shader;p=b.vao;ba=y.blend_color;w=C.blend_color;T=y.blend_equation;v=C.blend_equation;Q=y.blend_func;ia=C.blend_func;h=y.colorMask;t=C.colorMask;S=y.depth_range;k=C.depth_range;X=y.polygonOffset_offset;f=C.polygonOffset_offset;x=y.sample_coverage;
Y=C.sample_coverage;D=y.scissor_box;E=C.scissor_box;d=y.stencil_func;G=C.stencil_func;a=y.stencil_opBack;ta=C.stencil_opBack;A=y.stencil_opFront;ja=C.stencil_opFront;ga=y.viewport;V=C.viewport;ea={};R={};return{draw:function(c){var b,g,q,R,D,qa,m,J,aa,O;b=c.framebuffer;g=H.getFramebuffer(b);b&&!g&&ca.commandRaise(e,N);b=H.next;H.next=g;q=F.framebufferWidth;F.framebufferWidth=g?g.width:F.drawingBufferWidth;R=F.framebufferHeight;F.framebufferHeight=g?g.height:F.drawingBufferHeight;g!==H.cur&&(g?U.bindFramebuffer(36160,
g.framebuffer):U.bindFramebuffer(36160,null),H.cur=g);if(C.dirty){g=y.dither;g!==C.dither&&(g?U.enable(3024):U.disable(3024),C.dither=g);g=y.blend_enable;g!==C.blend_enable&&(g?U.enable(3042):U.disable(3042),C.blend_enable=g);g=ba[0];m=ba[1];D=ba[2];qa=ba[3];if(g!==w[0]||m!==w[1]||D!==w[2]||qa!==w[3])U.blendColor(g,m,D,qa),w[0]=g,w[1]=m,w[2]=D,w[3]=qa;g=T[0];m=T[1];if(g!==v[0]||m!==v[1])U.blendEquationSeparate(g,m),v[0]=g,v[1]=m;g=Q[0];m=Q[1];D=Q[2];qa=Q[3];if(g!==ia[0]||m!==ia[1]||D!==ia[2]||qa!==
ia[3])U.blendFuncSeparate(g,m,D,qa),ia[0]=g,ia[1]=m,ia[2]=D,ia[3]=qa;g=y.depth_enable;g!==C.depth_enable&&(g?U.enable(2929):U.disable(2929),C.depth_enable=g);g=y.depth_func;g!==C.depth_func&&(U.depthFunc(g),C.depth_func=g);g=S[0];m=S[1];if(g!==k[0]||m!==k[1])U.depthRange(g,m),k[0]=g,k[1]=m;g=y.depth_mask;g!==C.depth_mask&&(U.depthMask(g),C.depth_mask=g);g=h[0];m=h[1];D=h[2];qa=h[3];if(g!==t[0]||m!==t[1]||D!==t[2]||qa!==t[3])U.colorMask(g,m,D,qa),t[0]=g,t[1]=m,t[2]=D,t[3]=qa;g=y.cull_enable;g!==C.cull_enable&&
(g?U.enable(2884):U.disable(2884),C.cull_enable=g);g=y.cull_face;g!==C.cull_face&&(U.cullFace(g),C.cull_face=g);g=y.frontFace;g!==C.frontFace&&(U.frontFace(g),C.frontFace=g);g=y.lineWidth;g!==C.lineWidth&&(U.lineWidth(g),C.lineWidth=g);g=y.polygonOffset_enable;g!==C.polygonOffset_enable&&(g?U.enable(32823):U.disable(32823),C.polygonOffset_enable=g);g=X[0];m=X[1];if(g!==f[0]||m!==f[1])U.polygonOffset(g,m),f[0]=g,f[1]=m;g=y.sample_alpha;g!==C.sample_alpha&&(g?U.enable(32926):U.disable(32926),C.sample_alpha=
g);g=y.sample_enable;g!==C.sample_enable&&(g?U.enable(32928):U.disable(32928),C.sample_enable=g);g=x[0];m=x[1];if(g!==Y[0]||m!==Y[1])U.sampleCoverage(g,m),Y[0]=g,Y[1]=m;g=y.stencil_enable;g!==C.stencil_enable&&(g?U.enable(2960):U.disable(2960),C.stencil_enable=g);g=y.stencil_mask;g!==C.stencil_mask&&(U.stencilMask(g),C.stencil_mask=g);g=d[0];m=d[1];D=d[2];if(g!==G[0]||m!==G[1]||D!==G[2])U.stencilFunc(g,m,D),G[0]=g,G[1]=m,G[2]=D;g=A[0];m=A[1];D=A[2];qa=A[3];if(g!==ja[0]||m!==ja[1]||D!==ja[2]||qa!==
ja[3])U.stencilOpSeparate(g,m,D,qa),ja[0]=g,ja[1]=m,ja[2]=D,ja[3]=qa;g=a[0];m=a[1];D=a[2];qa=a[3];if(g!==ta[0]||m!==ta[1]||D!==ta[2]||qa!==ta[3])U.stencilOpSeparate(g,m,D,qa),ta[0]=g,ta[1]=m,ta[2]=D,ta[3]=qa;g=y.scissor_enable;g!==C.scissor_enable&&(g?U.enable(3089):U.disable(3089),C.scissor_enable=g)}D=F.framebufferWidth;qa=F.framebufferHeight;g=F.viewportWidth;F.viewportWidth=D;m=F.viewportHeight;F.viewportHeight=qa;U.viewport(0,0,D,qa);V[0]=0;V[1]=0;V[2]=D;V[3]=qa;D=F.framebufferWidth;qa=F.framebufferHeight;
U.scissor(0,0,D,qa);E[0]=0;E[1]=0;E[2]=D;E[3]=qa;if(D=C.profile)J=performance.now(),L.count++;qa=u.program(u.vert,u.frag,N);U.useProgram(qa.program);p.setVAO(null);aa=qa.id;(O=ea[aa])||(O=ea[aa]=l(qa));O.call(this,c);C.dirty=!0;p.setVAO(null);H.next=b;F.framebufferWidth=q;F.framebufferHeight=R;F.viewportWidth=g;F.viewportHeight=m;D&&(L.cpuTime+=performance.now()-J)},scope:function(a,d,c){var f,h,l,b,k,t,x,e,A,w,R,E,G,u,v;f=a.framebuffer;h=H.getFramebuffer(f);f&&!h&&ca.commandRaise(q,N);f=H.next;H.next=
h;l=F.framebufferWidth;F.framebufferWidth=h?h.width:F.drawingBufferWidth;b=F.framebufferHeight;F.framebufferHeight=h?h.height:F.drawingBufferHeight;k=F.framebufferWidth;t=F.framebufferHeight;h=F.viewportWidth;F.viewportWidth=k;x=F.viewportHeight;F.viewportHeight=t;e=ga[0];ga[0]=0;A=ga[1];ga[1]=0;w=ga[2];ga[2]=k;k=ga[3];ga[3]=t;R=F.framebufferWidth;E=F.framebufferHeight;t=D[0];D[0]=0;G=D[1];D[1]=0;u=D[2];D[2]=R;R=D[3];D[3]=E;if(E=C.profile)v=performance.now(),L.count++;C.dirty=!0;d(F,a,c);H.next=f;
F.framebufferWidth=l;F.framebufferHeight=b;F.viewportWidth=h;F.viewportHeight=x;ga[0]=e;ga[1]=A;ga[2]=w;ga[3]=k;D[0]=t;D[1]=G;D[2]=u;D[3]=R;E&&(L.cpuTime+=performance.now()-v);C.dirty=!0},batch:function(l,b){var g,q,e,D,E;if(C.dirty){g=y.dither;g!==C.dither&&(g?U.enable(3024):U.disable(3024),C.dither=g);g=y.blend_enable;g!==C.blend_enable&&(g?U.enable(3042):U.disable(3042),C.blend_enable=g);g=ba[0];e=ba[1];D=ba[2];E=ba[3];if(g!==w[0]||e!==w[1]||D!==w[2]||E!==w[3])U.blendColor(g,e,D,E),w[0]=g,w[1]=
e,w[2]=D,w[3]=E;g=T[0];e=T[1];if(g!==v[0]||e!==v[1])U.blendEquationSeparate(g,e),v[0]=g,v[1]=e;g=Q[0];e=Q[1];D=Q[2];E=Q[3];if(g!==ia[0]||e!==ia[1]||D!==ia[2]||E!==ia[3])U.blendFuncSeparate(g,e,D,E),ia[0]=g,ia[1]=e,ia[2]=D,ia[3]=E;g=y.depth_enable;g!==C.depth_enable&&(g?U.enable(2929):U.disable(2929),C.depth_enable=g);g=y.depth_func;g!==C.depth_func&&(U.depthFunc(g),C.depth_func=g);g=S[0];e=S[1];if(g!==k[0]||e!==k[1])U.depthRange(g,e),k[0]=g,k[1]=e;g=y.depth_mask;g!==C.depth_mask&&(U.depthMask(g),
C.depth_mask=g);g=h[0];e=h[1];D=h[2];E=h[3];if(g!==t[0]||e!==t[1]||D!==t[2]||E!==t[3])U.colorMask(g,e,D,E),t[0]=g,t[1]=e,t[2]=D,t[3]=E;g=y.cull_enable;g!==C.cull_enable&&(g?U.enable(2884):U.disable(2884),C.cull_enable=g);g=y.cull_face;g!==C.cull_face&&(U.cullFace(g),C.cull_face=g);g=y.frontFace;g!==C.frontFace&&(U.frontFace(g),C.frontFace=g);g=y.lineWidth;g!==C.lineWidth&&(U.lineWidth(g),C.lineWidth=g);g=y.polygonOffset_enable;g!==C.polygonOffset_enable&&(g?U.enable(32823):U.disable(32823),C.polygonOffset_enable=
g);g=X[0];e=X[1];if(g!==f[0]||e!==f[1])U.polygonOffset(g,e),f[0]=g,f[1]=e;g=y.sample_alpha;g!==C.sample_alpha&&(g?U.enable(32926):U.disable(32926),C.sample_alpha=g);g=y.sample_enable;g!==C.sample_enable&&(g?U.enable(32928):U.disable(32928),C.sample_enable=g);g=x[0];e=x[1];if(g!==Y[0]||e!==Y[1])U.sampleCoverage(g,e),Y[0]=g,Y[1]=e;g=y.stencil_enable;g!==C.stencil_enable&&(g?U.enable(2960):U.disable(2960),C.stencil_enable=g);g=y.stencil_mask;g!==C.stencil_mask&&(U.stencilMask(g),C.stencil_mask=g);g=
d[0];e=d[1];D=d[2];if(g!==G[0]||e!==G[1]||D!==G[2])U.stencilFunc(g,e,D),G[0]=g,G[1]=e,G[2]=D;g=A[0];e=A[1];D=A[2];E=A[3];if(g!==ja[0]||e!==ja[1]||D!==ja[2]||E!==ja[3])U.stencilOpSeparate(g,e,D,E),ja[0]=g,ja[1]=e,ja[2]=D,ja[3]=E;g=a[0];e=a[1];D=a[2];E=a[3];if(g!==ta[0]||e!==ta[1]||D!==ta[2]||E!==ta[3])U.stencilOpSeparate(g,e,D,E),ta[0]=g,ta[1]=e,ta[2]=D,ta[3]=E;g=y.scissor_enable;g!==C.scissor_enable&&(g?U.enable(3089):U.disable(3089),C.scissor_enable=g)}if(g=C.profile)q=performance.now(),L.count+=
b;e=u.program(u.vert,u.frag,N);U.useProgram(e.program);p.setVAO(null);D=e.id;(E=R[D])||(E=R[D]=c(e));E.call(this,l,b);C.dirty=!0;p.setVAO(null);g&&(L.cpuTime+=performance.now()-q)}}},$5:function(b,ca,N,L,e,l){var q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,ga,V;q=b.context;c=b.current;F=b.framebuffer;C=b.gl;H=b.next;U=b.shader;y=b.vao;u=H.blend_color;p=c.blend_color;ba=H.blend_equation;w=c.blend_equation;T=H.blend_func;v=c.blend_func;Q=H.colorMask;ia=c.colorMask;h=H.depth_range;
t=c.depth_range;S=H.polygonOffset_offset;k=c.polygonOffset_offset;X=H.sample_coverage;f=c.sample_coverage;x=H.scissor_box;Y=c.scissor_box;D=H.stencil_func;E=c.stencil_func;d=H.stencil_opBack;G=c.stencil_opBack;a=H.stencil_opFront;ta=c.stencil_opFront;A=H.viewport;ja=c.viewport;ga={};V={};return{draw:function(l){var b,q,B,g,M;b=F.next;b!==F.cur&&(b?C.bindFramebuffer(36160,b.framebuffer):C.bindFramebuffer(36160,null),F.cur=b);if(c.dirty){b=H.dither;b!==c.dither&&(b?C.enable(3024):C.disable(3024),c.dither=
b);b=H.blend_enable;b!==c.blend_enable&&(b?C.enable(3042):C.disable(3042),c.blend_enable=b);b=u[0];B=u[1];g=u[2];M=u[3];if(b!==p[0]||B!==p[1]||g!==p[2]||M!==p[3])C.blendColor(b,B,g,M),p[0]=b,p[1]=B,p[2]=g,p[3]=M;b=ba[0];B=ba[1];if(b!==w[0]||B!==w[1])C.blendEquationSeparate(b,B),w[0]=b,w[1]=B;b=T[0];B=T[1];g=T[2];M=T[3];if(b!==v[0]||B!==v[1]||g!==v[2]||M!==v[3])C.blendFuncSeparate(b,B,g,M),v[0]=b,v[1]=B,v[2]=g,v[3]=M;b=H.depth_enable;b!==c.depth_enable&&(b?C.enable(2929):C.disable(2929),c.depth_enable=
b);b=H.depth_func;b!==c.depth_func&&(C.depthFunc(b),c.depth_func=b);b=h[0];B=h[1];if(b!==t[0]||B!==t[1])C.depthRange(b,B),t[0]=b,t[1]=B;b=H.depth_mask;b!==c.depth_mask&&(C.depthMask(b),c.depth_mask=b);b=Q[0];B=Q[1];g=Q[2];M=Q[3];if(b!==ia[0]||B!==ia[1]||g!==ia[2]||M!==ia[3])C.colorMask(b,B,g,M),ia[0]=b,ia[1]=B,ia[2]=g,ia[3]=M;b=H.cull_enable;b!==c.cull_enable&&(b?C.enable(2884):C.disable(2884),c.cull_enable=b);b=H.cull_face;b!==c.cull_face&&(C.cullFace(b),c.cull_face=b);b=H.frontFace;b!==c.frontFace&&
(C.frontFace(b),c.frontFace=b);b=H.lineWidth;b!==c.lineWidth&&(C.lineWidth(b),c.lineWidth=b);b=H.polygonOffset_enable;b!==c.polygonOffset_enable&&(b?C.enable(32823):C.disable(32823),c.polygonOffset_enable=b);b=S[0];B=S[1];if(b!==k[0]||B!==k[1])C.polygonOffset(b,B),k[0]=b,k[1]=B;b=H.sample_alpha;b!==c.sample_alpha&&(b?C.enable(32926):C.disable(32926),c.sample_alpha=b);b=H.sample_enable;b!==c.sample_enable&&(b?C.enable(32928):C.disable(32928),c.sample_enable=b);b=X[0];B=X[1];if(b!==f[0]||B!==f[1])C.sampleCoverage(b,
B),f[0]=b,f[1]=B;b=H.stencil_enable;b!==c.stencil_enable&&(b?C.enable(2960):C.disable(2960),c.stencil_enable=b);b=H.stencil_mask;b!==c.stencil_mask&&(C.stencilMask(b),c.stencil_mask=b);b=D[0];B=D[1];g=D[2];if(b!==E[0]||B!==E[1]||g!==E[2])C.stencilFunc(b,B,g),E[0]=b,E[1]=B,E[2]=g;b=a[0];B=a[1];g=a[2];M=a[3];if(b!==ta[0]||B!==ta[1]||g!==ta[2]||M!==ta[3])C.stencilOpSeparate(b,B,g,M),ta[0]=b,ta[1]=B,ta[2]=g,ta[3]=M;b=d[0];B=d[1];g=d[2];M=d[3];if(b!==G[0]||B!==G[1]||g!==G[2]||M!==G[3])C.stencilOpSeparate(b,
B,g,M),G[0]=b,G[1]=B,G[2]=g,G[3]=M;b=H.scissor_enable;b!==c.scissor_enable&&(b?C.enable(3089):C.disable(3089),c.scissor_enable=b);b=x[0];B=x[1];g=x[2];M=x[3];if(b!==Y[0]||B!==Y[1]||g!==Y[2]||M!==Y[3])C.scissor(b,B,g,M),Y[0]=b,Y[1]=B,Y[2]=g,Y[3]=M;b=A[0];B=A[1];g=A[2];M=A[3];if(b!==ja[0]||B!==ja[1]||g!==ja[2]||M!==ja[3])C.viewport(b,B,g,M),ja[0]=b,ja[1]=B,ja[2]=g,ja[3]=M;c.dirty=!1}if(b=c.profile)q=performance.now(),L.count++;B=U.program(U.vert,U.frag,N);C.useProgram(B.program);y.setVAO(null);g=B.id;
(M=ga[g])||(M=ga[g]=e(B));M.call(this,l);y.setVAO(null);b&&(L.cpuTime+=performance.now()-q)},scope:function(a,d,f){var b,g;if(b=c.profile)g=performance.now(),L.count++;d(q,a,f);b&&(L.cpuTime+=performance.now()-g)},batch:function(b,q){var e,B,g,M,K;e=F.next;e!==F.cur&&(e?C.bindFramebuffer(36160,e.framebuffer):C.bindFramebuffer(36160,null),F.cur=e);if(c.dirty){e=H.dither;e!==c.dither&&(e?C.enable(3024):C.disable(3024),c.dither=e);e=H.blend_enable;e!==c.blend_enable&&(e?C.enable(3042):C.disable(3042),
c.blend_enable=e);e=u[0];g=u[1];M=u[2];K=u[3];if(e!==p[0]||g!==p[1]||M!==p[2]||K!==p[3])C.blendColor(e,g,M,K),p[0]=e,p[1]=g,p[2]=M,p[3]=K;e=ba[0];g=ba[1];if(e!==w[0]||g!==w[1])C.blendEquationSeparate(e,g),w[0]=e,w[1]=g;e=T[0];g=T[1];M=T[2];K=T[3];if(e!==v[0]||g!==v[1]||M!==v[2]||K!==v[3])C.blendFuncSeparate(e,g,M,K),v[0]=e,v[1]=g,v[2]=M,v[3]=K;e=H.depth_enable;e!==c.depth_enable&&(e?C.enable(2929):C.disable(2929),c.depth_enable=e);e=H.depth_func;e!==c.depth_func&&(C.depthFunc(e),c.depth_func=e);e=
h[0];g=h[1];if(e!==t[0]||g!==t[1])C.depthRange(e,g),t[0]=e,t[1]=g;e=H.depth_mask;e!==c.depth_mask&&(C.depthMask(e),c.depth_mask=e);e=Q[0];g=Q[1];M=Q[2];K=Q[3];if(e!==ia[0]||g!==ia[1]||M!==ia[2]||K!==ia[3])C.colorMask(e,g,M,K),ia[0]=e,ia[1]=g,ia[2]=M,ia[3]=K;e=H.cull_enable;e!==c.cull_enable&&(e?C.enable(2884):C.disable(2884),c.cull_enable=e);e=H.cull_face;e!==c.cull_face&&(C.cullFace(e),c.cull_face=e);e=H.frontFace;e!==c.frontFace&&(C.frontFace(e),c.frontFace=e);e=H.lineWidth;e!==c.lineWidth&&(C.lineWidth(e),
c.lineWidth=e);e=H.polygonOffset_enable;e!==c.polygonOffset_enable&&(e?C.enable(32823):C.disable(32823),c.polygonOffset_enable=e);e=S[0];g=S[1];if(e!==k[0]||g!==k[1])C.polygonOffset(e,g),k[0]=e,k[1]=g;e=H.sample_alpha;e!==c.sample_alpha&&(e?C.enable(32926):C.disable(32926),c.sample_alpha=e);e=H.sample_enable;e!==c.sample_enable&&(e?C.enable(32928):C.disable(32928),c.sample_enable=e);e=X[0];g=X[1];if(e!==f[0]||g!==f[1])C.sampleCoverage(e,g),f[0]=e,f[1]=g;e=H.stencil_enable;e!==c.stencil_enable&&(e?
C.enable(2960):C.disable(2960),c.stencil_enable=e);e=H.stencil_mask;e!==c.stencil_mask&&(C.stencilMask(e),c.stencil_mask=e);e=D[0];g=D[1];M=D[2];if(e!==E[0]||g!==E[1]||M!==E[2])C.stencilFunc(e,g,M),E[0]=e,E[1]=g,E[2]=M;e=a[0];g=a[1];M=a[2];K=a[3];if(e!==ta[0]||g!==ta[1]||M!==ta[2]||K!==ta[3])C.stencilOpSeparate(e,g,M,K),ta[0]=e,ta[1]=g,ta[2]=M,ta[3]=K;e=d[0];g=d[1];M=d[2];K=d[3];if(e!==G[0]||g!==G[1]||M!==G[2]||K!==G[3])C.stencilOpSeparate(e,g,M,K),G[0]=e,G[1]=g,G[2]=M,G[3]=K;e=H.scissor_enable;e!==
c.scissor_enable&&(e?C.enable(3089):C.disable(3089),c.scissor_enable=e);e=x[0];g=x[1];M=x[2];K=x[3];if(e!==Y[0]||g!==Y[1]||M!==Y[2]||K!==Y[3])C.scissor(e,g,M,K),Y[0]=e,Y[1]=g,Y[2]=M,Y[3]=K;e=A[0];g=A[1];M=A[2];K=A[3];if(e!==ja[0]||g!==ja[1]||M!==ja[2]||K!==ja[3])C.viewport(e,g,M,K),ja[0]=e,ja[1]=g,ja[2]=M,ja[3]=K;c.dirty=!1}if(e=c.profile)B=performance.now(),L.count+=q;g=U.program(U.vert,U.frag,N);C.useProgram(g.program);y.setVAO(null);M=g.id;(K=V[M])||(K=V[M]=l(g));K.call(this,b,q);y.setVAO(null);
e&&(L.cpuTime+=performance.now()-B)}}},"$26,color,freq,phase,projection,time,view":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G){var a,ta,A,ja,ga,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,Z,Hb,ha;a=b.attributes;ta=b.context;A=b.current;ja=b.draw;ga=b.elements;V=b.framebuffer;ea=b.gl;R=b.isArrayLike;P=b.next;B=b.shader;g=b.uniforms;M=b.vao;K=P.blend_color;Da=A.blend_color;qa=P.blend_equation;m=A.blend_equation;J=P.blend_func;
aa=A.blend_func;O=P.colorMask;ma=A.colorMask;pa=P.depth_range;za=A.depth_range;xa=P.polygonOffset_offset;fa=A.polygonOffset_offset;Aa=P.sample_coverage;ka=A.sample_coverage;oa=P.scissor_box;ya=A.scissor_box;Ja=P.stencil_func;na=A.stencil_func;Za=P.stencil_opBack;Ta=A.stencil_opBack;r=P.stencil_opFront;n=A.stencil_opFront;z=P.viewport;va=A.viewport;Ca=new Float32Array(16);Z=new Float32Array(16);Hb=new Float32Array(16);ha=new Float32Array(16);return{draw:function(g){var f,b,h,k;f=V.next;f!==V.cur&&
(f?ea.bindFramebuffer(36160,f.framebuffer):ea.bindFramebuffer(36160,null),V.cur=f);if(A.dirty){var t;f=P.dither;f!==A.dither&&(f?ea.enable(3024):ea.disable(3024),A.dither=f);f=P.blend_enable;f!==A.blend_enable&&(f?ea.enable(3042):ea.disable(3042),A.blend_enable=f);f=K[0];h=K[1];k=K[2];t=K[3];if(f!==Da[0]||h!==Da[1]||k!==Da[2]||t!==Da[3])ea.blendColor(f,h,k,t),Da[0]=f,Da[1]=h,Da[2]=k,Da[3]=t;f=qa[0];h=qa[1];if(f!==m[0]||h!==m[1])ea.blendEquationSeparate(f,h),m[0]=f,m[1]=h;f=J[0];h=J[1];k=J[2];t=J[3];
if(f!==aa[0]||h!==aa[1]||k!==aa[2]||t!==aa[3])ea.blendFuncSeparate(f,h,k,t),aa[0]=f,aa[1]=h,aa[2]=k,aa[3]=t;f=P.depth_enable;f!==A.depth_enable&&(f?ea.enable(2929):ea.disable(2929),A.depth_enable=f);f=P.depth_func;f!==A.depth_func&&(ea.depthFunc(f),A.depth_func=f);f=pa[0];h=pa[1];if(f!==za[0]||h!==za[1])ea.depthRange(f,h),za[0]=f,za[1]=h;f=P.depth_mask;f!==A.depth_mask&&(ea.depthMask(f),A.depth_mask=f);f=O[0];h=O[1];k=O[2];t=O[3];if(f!==ma[0]||h!==ma[1]||k!==ma[2]||t!==ma[3])ea.colorMask(f,h,k,t),
ma[0]=f,ma[1]=h,ma[2]=k,ma[3]=t;f=P.cull_enable;f!==A.cull_enable&&(f?ea.enable(2884):ea.disable(2884),A.cull_enable=f);f=P.cull_face;f!==A.cull_face&&(ea.cullFace(f),A.cull_face=f);f=P.frontFace;f!==A.frontFace&&(ea.frontFace(f),A.frontFace=f);f=P.lineWidth;f!==A.lineWidth&&(ea.lineWidth(f),A.lineWidth=f);f=P.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=f);f=xa[0];h=xa[1];if(f!==fa[0]||h!==fa[1])ea.polygonOffset(f,h),fa[0]=f,fa[1]=
h;f=P.sample_alpha;f!==A.sample_alpha&&(f?ea.enable(32926):ea.disable(32926),A.sample_alpha=f);f=P.sample_enable;f!==A.sample_enable&&(f?ea.enable(32928):ea.disable(32928),A.sample_enable=f);f=Aa[0];h=Aa[1];if(f!==ka[0]||h!==ka[1])ea.sampleCoverage(f,h),ka[0]=f,ka[1]=h;f=P.stencil_enable;f!==A.stencil_enable&&(f?ea.enable(2960):ea.disable(2960),A.stencil_enable=f);f=P.stencil_mask;f!==A.stencil_mask&&(ea.stencilMask(f),A.stencil_mask=f);f=Ja[0];h=Ja[1];k=Ja[2];if(f!==na[0]||h!==na[1]||k!==na[2])ea.stencilFunc(f,
h,k),na[0]=f,na[1]=h,na[2]=k;f=r[0];h=r[1];k=r[2];t=r[3];if(f!==n[0]||h!==n[1]||k!==n[2]||t!==n[3])ea.stencilOpSeparate(f,h,k,t),n[0]=f,n[1]=h,n[2]=k,n[3]=t;f=Za[0];h=Za[1];k=Za[2];t=Za[3];if(f!==Ta[0]||h!==Ta[1]||k!==Ta[2]||t!==Ta[3])ea.stencilOpSeparate(f,h,k,t),Ta[0]=f,Ta[1]=h,Ta[2]=k,Ta[3]=t;f=P.scissor_enable;f!==A.scissor_enable&&(f?ea.enable(3089):ea.disable(3089),A.scissor_enable=f);f=oa[0];h=oa[1];k=oa[2];t=oa[3];if(f!==ya[0]||h!==ya[1]||k!==ya[2]||t!==ya[3])ea.scissor(f,h,k,t),ya[0]=f,ya[1]=
h,ya[2]=k,ya[3]=t;f=z[0];h=z[1];k=z[2];t=z[3];if(f!==va[0]||h!==va[1]||k!==va[2]||t!==va[3])ea.viewport(f,h,k,t),va[0]=f,va[1]=h,va[2]=k,va[3]=t;A.dirty=!1}if(f=A.profile)b=performance.now(),L.count++;ea.useProgram(e.program);M.setVAO(null);h=Y.location;k=a[h];k.buffer||ea.enableVertexAttribArray(h);if(5126!==k.type||4!==k.size||k.buffer!==l||!1!==k.normalized||0!==k.offset||44!==k.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(h,4,5126,!1,44,0),k.type=5126,k.size=4,k.buffer=l,k.normalized=
!1,k.offset=0,k.stride=44;h=D.location;k=a[h];k.buffer||ea.enableVertexAttribArray(h);if(5126!==k.type||4!==k.size||k.buffer!==q||!1!==k.normalized||16!==k.offset||44!==k.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(h,4,5126,!1,44,16),k.type=5126,k.size=4,k.buffer=q,k.normalized=!1,k.offset=16,k.stride=44;h=x.location;k=a[h];k.buffer||ea.enableVertexAttribArray(h);if(5126!==k.type||3!==k.size||k.buffer!==c||!1!==k.normalized||32!==k.offset||44!==k.stride)ea.bindBuffer(34962,c.buffer),
ea.vertexAttribPointer(h,3,5126,!1,44,32),k.type=5126,k.size=3,k.buffer=c,k.normalized=!1,k.offset=32,k.stride=44;h=F.call(this,ta,g,0);"number"!==typeof h&&ca.commandRaise(C,N);ea.uniform1f(d.location,h);h=H.call(this,ta,g,0);R(h)&&16===h.length||ca.commandRaise(U,N);ea.uniformMatrix4fv(G.location,!1,Array.isArray(h)||h instanceof Float32Array?h:(Ca[0]=h[0],Ca[1]=h[1],Ca[2]=h[2],Ca[3]=h[3],Ca[4]=h[4],Ca[5]=h[5],Ca[6]=h[6],Ca[7]=h[7],Ca[8]=h[8],Ca[9]=h[9],Ca[10]=h[10],Ca[11]=h[11],Ca[12]=h[12],Ca[13]=
h[13],Ca[14]=h[14],Ca[15]=h[15],Ca));g=y.call(this,ta,g,0);R(g)&&16===g.length||ca.commandRaise(u,N);ea.uniformMatrix4fv(E.location,!1,Array.isArray(g)||g instanceof Float32Array?g:(Z[0]=g[0],Z[1]=g[1],Z[2]=g[2],Z[3]=g[3],Z[4]=g[4],Z[5]=g[5],Z[6]=g[6],Z[7]=g[7],Z[8]=g[8],Z[9]=g[9],Z[10]=g[10],Z[11]=g[11],Z[12]=g[12],Z[13]=g[13],Z[14]=g[14],Z[15]=g[15],Z));(g=ja.elements)?ea.bindBuffer(34963,g.buffer.buffer):M.currentVAO&&(g=ga.getElements(M.currentVAO.elements))&&ea.bindBuffer(34963,g.buffer.buffer);
h=ja.offset;g?ea.drawElements(0,1E4,g.type,h<<(g.type-5121>>1)):ea.drawArrays(0,h,1E4);M.setVAO(null);f&&(L.cpuTime+=performance.now()-b)},scope:function(a,d,f){var h,b,k,m,r,n,e,z,t,x,na,D,J,E,O,G,fa,ha,u,Za,Ja,y,C,M,N,aa,K,F,va,P,R,S,pa,xa,H,U,ka,V,X,ca,ea,Da,Ta,Y,oa;if(h=A.profile)b=performance.now(),L.count++;k=ja.count;ja.count=1E4;m=ja.primitive;ja.primitive=0;r=p.call(this,ta,a,f);n=g[5];g[5]=r;e=ba.call(this,ta,a,f);r=g[3];g[3]=e;z=w.call(this,ta,a,f);e=g[4];g[4]=z;z=T.buffer;T.buffer=c;t=
T.divisor;T.divisor=0;x=T.normalized;T.normalized=!1;na=T.offset;T.offset=32;D=T.size;T.size=0;J=T.state;T.state=1;E=T.stride;T.stride=44;O=T.type;T.type=5126;G=T.w;T.w=0;fa=T.x;T.x=0;ha=T.y;T.y=0;u=T.z;T.z=0;Za=v.buffer;v.buffer=l;Ja=v.divisor;v.divisor=0;y=v.normalized;v.normalized=!1;C=v.offset;v.offset=0;M=v.size;v.size=0;N=v.state;v.state=1;aa=v.stride;v.stride=44;K=v.type;v.type=5126;F=v.w;v.w=0;va=v.x;v.x=0;P=v.y;v.y=0;R=v.z;v.z=0;S=Q.buffer;Q.buffer=q;pa=Q.divisor;Q.divisor=0;xa=Q.normalized;
Q.normalized=!1;H=Q.offset;Q.offset=16;U=Q.size;Q.size=0;ka=Q.state;Q.state=1;V=Q.stride;Q.stride=44;X=Q.type;Q.type=5126;ca=Q.w;Q.w=0;ea=Q.x;Q.x=0;Da=Q.y;Q.y=0;Ta=Q.z;Q.z=0;Y=B.vert;B.vert=2;oa=B.frag;B.frag=1;d(ta,a,f);h&&(L.cpuTime+=performance.now()-b);ja.count=k;ja.primitive=m;g[5]=n;g[3]=r;g[4]=e;T.buffer=z;T.divisor=t;T.normalized=x;T.offset=na;T.size=D;T.state=J;T.stride=E;T.type=O;T.w=G;T.x=fa;T.y=ha;T.z=u;v.buffer=Za;v.divisor=Ja;v.normalized=y;v.offset=C;v.size=M;v.state=N;v.stride=aa;
v.type=K;v.w=F;v.x=va;v.y=P;v.z=R;Q.buffer=S;Q.divisor=pa;Q.normalized=xa;Q.offset=H;Q.size=U;Q.state=ka;Q.stride=V;Q.type=X;Q.w=ca;Q.x=ea;Q.y=Da;Q.z=Ta;B.vert=Y;B.frag=oa},batch:function(g,b){var e,w,B;e=V.next;e!==V.cur&&(e?ea.bindFramebuffer(36160,e.framebuffer):ea.bindFramebuffer(36160,null),V.cur=e);if(A.dirty){var u,v,y;e=P.dither;e!==A.dither&&(e?ea.enable(3024):ea.disable(3024),A.dither=e);e=P.blend_enable;e!==A.blend_enable&&(e?ea.enable(3042):ea.disable(3042),A.blend_enable=e);e=K[0];u=
K[1];v=K[2];y=K[3];if(e!==Da[0]||u!==Da[1]||v!==Da[2]||y!==Da[3])ea.blendColor(e,u,v,y),Da[0]=e,Da[1]=u,Da[2]=v,Da[3]=y;e=qa[0];u=qa[1];if(e!==m[0]||u!==m[1])ea.blendEquationSeparate(e,u),m[0]=e,m[1]=u;e=J[0];u=J[1];v=J[2];y=J[3];if(e!==aa[0]||u!==aa[1]||v!==aa[2]||y!==aa[3])ea.blendFuncSeparate(e,u,v,y),aa[0]=e,aa[1]=u,aa[2]=v,aa[3]=y;e=P.depth_enable;e!==A.depth_enable&&(e?ea.enable(2929):ea.disable(2929),A.depth_enable=e);e=P.depth_func;e!==A.depth_func&&(ea.depthFunc(e),A.depth_func=e);e=pa[0];
u=pa[1];if(e!==za[0]||u!==za[1])ea.depthRange(e,u),za[0]=e,za[1]=u;e=P.depth_mask;e!==A.depth_mask&&(ea.depthMask(e),A.depth_mask=e);e=O[0];u=O[1];v=O[2];y=O[3];if(e!==ma[0]||u!==ma[1]||v!==ma[2]||y!==ma[3])ea.colorMask(e,u,v,y),ma[0]=e,ma[1]=u,ma[2]=v,ma[3]=y;e=P.cull_enable;e!==A.cull_enable&&(e?ea.enable(2884):ea.disable(2884),A.cull_enable=e);e=P.cull_face;e!==A.cull_face&&(ea.cullFace(e),A.cull_face=e);e=P.frontFace;e!==A.frontFace&&(ea.frontFace(e),A.frontFace=e);e=P.lineWidth;e!==A.lineWidth&&
(ea.lineWidth(e),A.lineWidth=e);e=P.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?ea.enable(32823):ea.disable(32823),A.polygonOffset_enable=e);e=xa[0];u=xa[1];if(e!==fa[0]||u!==fa[1])ea.polygonOffset(e,u),fa[0]=e,fa[1]=u;e=P.sample_alpha;e!==A.sample_alpha&&(e?ea.enable(32926):ea.disable(32926),A.sample_alpha=e);e=P.sample_enable;e!==A.sample_enable&&(e?ea.enable(32928):ea.disable(32928),A.sample_enable=e);e=Aa[0];u=Aa[1];if(e!==ka[0]||u!==ka[1])ea.sampleCoverage(e,u),ka[0]=e,ka[1]=u;e=P.stencil_enable;
e!==A.stencil_enable&&(e?ea.enable(2960):ea.disable(2960),A.stencil_enable=e);e=P.stencil_mask;e!==A.stencil_mask&&(ea.stencilMask(e),A.stencil_mask=e);e=Ja[0];u=Ja[1];v=Ja[2];if(e!==na[0]||u!==na[1]||v!==na[2])ea.stencilFunc(e,u,v),na[0]=e,na[1]=u,na[2]=v;e=r[0];u=r[1];v=r[2];y=r[3];if(e!==n[0]||u!==n[1]||v!==n[2]||y!==n[3])ea.stencilOpSeparate(e,u,v,y),n[0]=e,n[1]=u,n[2]=v,n[3]=y;e=Za[0];u=Za[1];v=Za[2];y=Za[3];if(e!==Ta[0]||u!==Ta[1]||v!==Ta[2]||y!==Ta[3])ea.stencilOpSeparate(e,u,v,y),Ta[0]=e,
Ta[1]=u,Ta[2]=v,Ta[3]=y;e=P.scissor_enable;e!==A.scissor_enable&&(e?ea.enable(3089):ea.disable(3089),A.scissor_enable=e);e=oa[0];u=oa[1];v=oa[2];y=oa[3];if(e!==ya[0]||u!==ya[1]||v!==ya[2]||y!==ya[3])ea.scissor(e,u,v,y),ya[0]=e,ya[1]=u,ya[2]=v,ya[3]=y;e=z[0];u=z[1];v=z[2];y=z[3];if(e!==va[0]||u!==va[1]||v!==va[2]||y!==va[3])ea.viewport(e,u,v,y),va[0]=e,va[1]=u,va[2]=v,va[3]=y;A.dirty=!1}if(e=A.profile)w=performance.now(),L.count+=b;ea.useProgram(ia.program);M.setVAO(null);u=Y.location;v=a[u];v.buffer||
ea.enableVertexAttribArray(u);if(5126!==v.type||4!==v.size||v.buffer!==l||!1!==v.normalized||0!==v.offset||44!==v.stride)ea.bindBuffer(34962,l.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,0),v.type=5126,v.size=4,v.buffer=l,v.normalized=!1,v.offset=0,v.stride=44;u=D.location;v=a[u];v.buffer||ea.enableVertexAttribArray(u);if(5126!==v.type||4!==v.size||v.buffer!==q||!1!==v.normalized||16!==v.offset||44!==v.stride)ea.bindBuffer(34962,q.buffer),ea.vertexAttribPointer(u,4,5126,!1,44,16),v.type=5126,v.size=
4,v.buffer=q,v.normalized=!1,v.offset=16,v.stride=44;u=x.location;v=a[u];v.buffer||ea.enableVertexAttribArray(u);if(5126!==v.type||3!==v.size||v.buffer!==c||!1!==v.normalized||32!==v.offset||44!==v.stride)ea.bindBuffer(34962,c.buffer),ea.vertexAttribPointer(u,3,5126,!1,44,32),v.type=5126,v.size=3,v.buffer=c,v.normalized=!1,v.offset=32,v.stride=44;u=h.call(this,ta,void 0,B);"number"!==typeof u&&ca.commandRaise(t,N);ea.uniform1f(d.location,u);u=S.call(this,ta,void 0,B);R(u)&&16===u.length||ca.commandRaise(k,
N);ea.uniformMatrix4fv(G.location,!1,Array.isArray(u)||u instanceof Float32Array?u:(Hb[0]=u[0],Hb[1]=u[1],Hb[2]=u[2],Hb[3]=u[3],Hb[4]=u[4],Hb[5]=u[5],Hb[6]=u[6],Hb[7]=u[7],Hb[8]=u[8],Hb[9]=u[9],Hb[10]=u[10],Hb[11]=u[11],Hb[12]=u[12],Hb[13]=u[13],Hb[14]=u[14],Hb[15]=u[15],Hb));B=X.call(this,ta,void 0,B);R(B)&&16===B.length||ca.commandRaise(f,N);ea.uniformMatrix4fv(E.location,!1,Array.isArray(B)||B instanceof Float32Array?B:(ha[0]=B[0],ha[1]=B[1],ha[2]=B[2],ha[3]=B[3],ha[4]=B[4],ha[5]=B[5],ha[6]=B[6],
ha[7]=B[7],ha[8]=B[8],ha[9]=B[9],ha[10]=B[10],ha[11]=B[11],ha[12]=B[12],ha[13]=B[13],ha[14]=B[14],ha[15]=B[15],ha));(u=ja.elements)?ea.bindBuffer(34963,u.buffer.buffer):M.currentVAO&&(u=ga.getElements(M.currentVAO.elements))&&ea.bindBuffer(34963,u.buffer.buffer);v=ja.offset;for(B=0;B<b;++B)u?ea.drawElements(0,1E4,u.type,v<<(u.type-5121>>1)):ea.drawArrays(0,v,1E4);M.setVAO(null);e&&(L.cpuTime+=performance.now()-w)}}},"$34,atlas,normal,position,projection,uv,view":function(b,ca,N,L,e,l,q,c,F,C,H,U,
y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,ga,V,ea,R){var P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,Z,Hb,ha,I,sa,Ba,ra,wa,Ea,la,W,ua,Fa,Ia;P=b.attributes;B=b.buffer;g=b.context;M=b.current;K=b.draw;Da=b.elements;qa=b.framebuffer;m=b.gl;J=b.isArrayLike;aa=b.isBufferArgs;O=b.next;ma=b.shader;pa=b.uniforms;za=b.vao;xa=O.blend_color;fa=M.blend_color;Aa=O.blend_equation;ka=M.blend_equation;oa=O.blend_func;ya=M.blend_func;Ja=O.colorMask;na=M.colorMask;Za=O.depth_range;
Ta=M.depth_range;r=O.polygonOffset_offset;n=M.polygonOffset_offset;z=O.sample_coverage;va=M.sample_coverage;Ca=O.scissor_box;Z=M.scissor_box;Hb=O.stencil_func;ha=M.stencil_func;I=O.stencil_opBack;sa=M.stencil_opBack;Ba=O.stencil_opFront;ra=M.stencil_opFront;wa=O.viewport;Ea=M.viewport;la={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126};W=new Float32Array(16);ua=new Float32Array(16);Fa=new Float32Array(16);Ia=new Float32Array(16);return{draw:function(a){var d,
f,h,b,k,t,x,w,D,v,E,G,K,Q,S,pa,T,X,ba,Y,ia,ma,ta,Fa,Ia,Ra,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb,bb,ob;d=g.view;f=e.call(this,g,a,0);g.view=f;h=qa.next;h!==qa.cur&&(h?m.bindFramebuffer(36160,h.framebuffer):m.bindFramebuffer(36160,null),qa.cur=h);if(M.dirty){var Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb;Wa=O.dither;Wa!==M.dither&&
(Wa?m.enable(3024):m.disable(3024),M.dither=Wa);Ld=O.blend_enable;Ld!==M.blend_enable&&(Ld?m.enable(3042):m.disable(3042),M.blend_enable=Ld);Ib=xa[0];Jb=xa[1];qc=xa[2];Ob=xa[3];if(Ib!==fa[0]||Jb!==fa[1]||qc!==fa[2]||Ob!==fa[3])m.blendColor(Ib,Jb,qc,Ob),fa[0]=Ib,fa[1]=Jb,fa[2]=qc,fa[3]=Ob;jb=Aa[0];Gb=Aa[1];if(jb!==ka[0]||Gb!==ka[1])m.blendEquationSeparate(jb,Gb),ka[0]=jb,ka[1]=Gb;Db=oa[0];wb=oa[1];hb=oa[2];Yb=oa[3];if(Db!==ya[0]||wb!==ya[1]||hb!==ya[2]||Yb!==ya[3])m.blendFuncSeparate(Db,wb,hb,Yb),
ya[0]=Db,ya[1]=wb,ya[2]=hb,ya[3]=Yb;Pb=O.depth_enable;Pb!==M.depth_enable&&(Pb?m.enable(2929):m.disable(2929),M.depth_enable=Pb);qb=O.depth_func;qb!==M.depth_func&&(m.depthFunc(qb),M.depth_func=qb);Ua=Za[0];Ub=Za[1];if(Ua!==Ta[0]||Ub!==Ta[1])m.depthRange(Ua,Ub),Ta[0]=Ua,Ta[1]=Ub;zb=O.depth_mask;zb!==M.depth_mask&&(m.depthMask(zb),M.depth_mask=zb);bc=Ja[0];ib=Ja[1];pb=Ja[2];Ha=Ja[3];if(bc!==na[0]||ib!==na[1]||pb!==na[2]||Ha!==na[3])m.colorMask(bc,ib,pb,Ha),na[0]=bc,na[1]=ib,na[2]=pb,na[3]=Ha;rb=O.frontFace;
rb!==M.frontFace&&(m.frontFace(rb),M.frontFace=rb);Ka=O.lineWidth;Ka!==M.lineWidth&&(m.lineWidth(Ka),M.lineWidth=Ka);fb=O.polygonOffset_enable;fb!==M.polygonOffset_enable&&(fb?m.enable(32823):m.disable(32823),M.polygonOffset_enable=fb);gb=r[0];La=r[1];if(gb!==n[0]||La!==n[1])m.polygonOffset(gb,La),n[0]=gb,n[1]=La;kb=O.sample_alpha;kb!==M.sample_alpha&&(kb?m.enable(32926):m.disable(32926),M.sample_alpha=kb);Xa=O.sample_enable;Xa!==M.sample_enable&&(Xa?m.enable(32928):m.disable(32928),M.sample_enable=
Xa);tb=z[0];sb=z[1];if(tb!==va[0]||sb!==va[1])m.sampleCoverage(tb,sb),va[0]=tb,va[1]=sb;Oa=O.stencil_enable;Oa!==M.stencil_enable&&(Oa?m.enable(2960):m.disable(2960),M.stencil_enable=Oa);Cc=O.stencil_mask;Cc!==M.stencil_mask&&(m.stencilMask(Cc),M.stencil_mask=Cc);Qa=Hb[0];Kb=Hb[1];Eb=Hb[2];if(Qa!==ha[0]||Kb!==ha[1]||Eb!==ha[2])m.stencilFunc(Qa,Kb,Eb),ha[0]=Qa,ha[1]=Kb,ha[2]=Eb;Ma=Ba[0];vd=Ba[1];$a=Ba[2];Lb=Ba[3];if(Ma!==ra[0]||vd!==ra[1]||$a!==ra[2]||Lb!==ra[3])m.stencilOpSeparate(Ma,vd,$a,Lb),ra[0]=
Ma,ra[1]=vd,ra[2]=$a,ra[3]=Lb;Mb=I[0];lb=I[1];Na=I[2];Zb=I[3];if(Mb!==sa[0]||lb!==sa[1]||Na!==sa[2]||Zb!==sa[3])m.stencilOpSeparate(Mb,lb,Na,Zb),sa[0]=Mb,sa[1]=lb,sa[2]=Na,sa[3]=Zb;Pa=O.scissor_enable;Pa!==M.scissor_enable&&(Pa?m.enable(3089):m.disable(3089),M.scissor_enable=Pa);ub=Ca[0];vb=Ca[1];Sa=Ca[2];nb=Ca[3];if(ub!==Z[0]||vb!==Z[1]||Sa!==Z[2]||nb!==Z[3])m.scissor(ub,vb,Sa,nb),Z[0]=ub,Z[1]=vb,Z[2]=Sa,Z[3]=nb;gc=wa[0];Ac=wa[1];vc=wa[2];cb=wa[3];if(gc!==Ea[0]||Ac!==Ea[1]||vc!==Ea[2]||cb!==Ea[3])m.viewport(gc,
Ac,vc,cb),Ea[0]=gc,Ea[1]=Ac,Ea[2]=vc,Ea[3]=cb}m.enable(2884);M.cull_enable=!0;m.cullFace(1029);M.cull_face=1029;if(b=M.profile)k=performance.now(),L.count++;m.useProgram(l.program);za.setVAO(null);(t=a.position)&&("object"===typeof t||"function"===typeof t)&&(aa(t)||B.getBuffer(t)||B.getBuffer(t.buffer)||aa(t.buffer)||"constant"in t&&("number"===typeof t.constant||J(t.constant)))||ca.commandRaise(q,N);x=!1;w=null;D=!1;E=v=0;G=1;K=0;Q=5126;X=T=pa=S=0;aa(t)?(x=!0,w=B.createStream(34962,t),Q=w.dtype):
(w=B.getBuffer(t))?Q=w.dtype:"constant"in t?(G=2,"number"===typeof t.constant?(pa=t.constant,T=X=S=0):(pa=0<t.constant.length?t.constant[0]:0,T=1<t.constant.length?t.constant[1]:0,X=2<t.constant.length?t.constant[2]:0,S=3<t.constant.length?t.constant[3]:0)):(w=aa(t.buffer)?B.createStream(34962,t.buffer):B.getBuffer(t.buffer),Q="type"in t?la[t.type]:w.dtype,D=!!t.normalized,E=t.size|0,v=t.offset|0,K=t.stride|0);ba=ga.location;Y=P[ba];if(1===G){if(Y.buffer||m.enableVertexAttribArray(ba),ia=E||3,Y.type!==
Q||Y.size!==ia||Y.buffer!==w||Y.normalized!==D||Y.offset!==v||Y.stride!==K)m.bindBuffer(34962,w.buffer),m.vertexAttribPointer(ba,ia,Q,D,K,v),Y.type=Q,Y.size=ia,Y.buffer=w,Y.normalized=D,Y.offset=v,Y.stride=K}else if(Y.buffer&&(m.disableVertexAttribArray(ba),Y.buffer=null),Y.x!==pa||Y.y!==T||Y.z!==X||Y.w!==S)m.vertexAttrib4f(ba,pa,T,X,S),Y.x=pa,Y.y=T,Y.z=X,Y.w=S;(ma=a.normal)&&("object"===typeof ma||"function"===typeof ma)&&(aa(ma)||B.getBuffer(ma)||B.getBuffer(ma.buffer)||aa(ma.buffer)||"constant"in
ma&&("number"===typeof ma.constant||J(ma.constant)))||ca.commandRaise(c,N);ta=!1;Fa=null;Ia=!1;Wd=Ra=0;Bd=1;ld=0;$c=5126;Gc=od=Lc=rd=0;aa(ma)?(ta=!0,Fa=B.createStream(34962,ma),$c=Fa.dtype):(Fa=B.getBuffer(ma))?$c=Fa.dtype:"constant"in ma?(Bd=2,"number"===typeof ma.constant?(Lc=ma.constant,od=Gc=rd=0):(Lc=0<ma.constant.length?ma.constant[0]:0,od=1<ma.constant.length?ma.constant[1]:0,Gc=2<ma.constant.length?ma.constant[2]:0,rd=3<ma.constant.length?ma.constant[3]:0)):(Fa=aa(ma.buffer)?B.createStream(34962,
ma.buffer):B.getBuffer(ma.buffer),$c="type"in ma?la[ma.type]:Fa.dtype,Ia=!!ma.normalized,Wd=ma.size|0,Ra=ma.offset|0,ld=ma.stride|0);ed=ja.location;Oc=P[ed];if(1===Bd){if(Oc.buffer||m.enableVertexAttribArray(ed),jd=Wd||3,Oc.type!==$c||Oc.size!==jd||Oc.buffer!==Fa||Oc.normalized!==Ia||Oc.offset!==Ra||Oc.stride!==ld)m.bindBuffer(34962,Fa.buffer),m.vertexAttribPointer(ed,jd,$c,Ia,ld,Ra),Oc.type=$c,Oc.size=jd,Oc.buffer=Fa,Oc.normalized=Ia,Oc.offset=Ra,Oc.stride=ld}else if(Oc.buffer&&(m.disableVertexAttribArray(ed),
Oc.buffer=null),Oc.x!==Lc||Oc.y!==od||Oc.z!==Gc||Oc.w!==rd)m.vertexAttrib4f(ed,Lc,od,Gc,rd),Oc.x=Lc,Oc.y=od,Oc.z=Gc,Oc.w=rd;(Bb=a.uv)&&("object"===typeof Bb||"function"===typeof Bb)&&(aa(Bb)||B.getBuffer(Bb)||B.getBuffer(Bb.buffer)||aa(Bb.buffer)||"constant"in Bb&&("number"===typeof Bb.constant||J(Bb.constant)))||ca.commandRaise(F,N);Fb=!1;tc=null;xb=!1;Cb=xc=0;Jc=1;lc=0;Hc=5126;ec=Ec=Uc=Vc=0;aa(Bb)?(Fb=!0,tc=B.createStream(34962,Bb),Hc=tc.dtype):(tc=B.getBuffer(Bb))?Hc=tc.dtype:"constant"in Bb?(Jc=
2,"number"===typeof Bb.constant?(Uc=Bb.constant,Ec=ec=Vc=0):(Uc=0<Bb.constant.length?Bb.constant[0]:0,Ec=1<Bb.constant.length?Bb.constant[1]:0,ec=2<Bb.constant.length?Bb.constant[2]:0,Vc=3<Bb.constant.length?Bb.constant[3]:0)):(tc=aa(Bb.buffer)?B.createStream(34962,Bb.buffer):B.getBuffer(Bb.buffer),Hc="type"in Bb?la[Bb.type]:tc.dtype,xb=!!Bb.normalized,Cb=Bb.size|0,xc=Bb.offset|0,lc=Bb.stride|0);Ic=ea.location;oc=P[Ic];if(1===Jc){if(oc.buffer||m.enableVertexAttribArray(Ic),pc=Cb||2,oc.type!==Hc||
oc.size!==pc||oc.buffer!==tc||oc.normalized!==xb||oc.offset!==xc||oc.stride!==lc)m.bindBuffer(34962,tc.buffer),m.vertexAttribPointer(Ic,pc,Hc,xb,lc,xc),oc.type=Hc,oc.size=pc,oc.buffer=tc,oc.normalized=xb,oc.offset=xc,oc.stride=lc}else if(oc.buffer&&(m.disableVertexAttribArray(Ic),oc.buffer=null),oc.x!==Uc||oc.y!==Ec||oc.z!==ec||oc.w!==Vc)m.vertexAttrib4f(Ic,Uc,Ec,ec,Vc),oc.x=Uc,oc.y=Ec,oc.z=ec,oc.w=Vc;mc=C.call(this,g,a,0);J(mc)&&16===mc.length||ca.commandRaise(H,N);m.uniformMatrix4fv(V.location,
!1,Array.isArray(mc)||mc instanceof Float32Array?mc:(W[0]=mc[0],W[1]=mc[1],W[2]=mc[2],W[3]=mc[3],W[4]=mc[4],W[5]=mc[5],W[6]=mc[6],W[7]=mc[7],W[8]=mc[8],W[9]=mc[9],W[10]=mc[10],W[11]=mc[11],W[12]=mc[12],W[13]=mc[13],W[14]=mc[14],W[15]=mc[15],W));fc=g.view;J(fc)&&16===fc.length||ca.commandRaise(U,N);m.uniformMatrix4fv(R.location,!1,Array.isArray(fc)||fc instanceof Float32Array?fc:(ua[0]=fc[0],ua[1]=fc[1],ua[2]=fc[2],ua[3]=fc[3],ua[4]=fc[4],ua[5]=fc[5],ua[6]=fc[6],ua[7]=fc[7],ua[8]=fc[8],ua[9]=fc[9],
ua[10]=fc[10],ua[11]=fc[11],ua[12]=fc[12],ua[13]=fc[13],ua[14]=fc[14],ua[15]=fc[15],ua));(Va=a.atlas)&&"framebuffer"===Va._reglType&&(Va=Va.color[0]);"function"===typeof Va&&"texture2d"===Va._reglType||ca.commandRaise(y,N);uc=Va._texture;m.uniform1i(A.location,uc.bind());yb=a.elements;db=null;(Nb=aa(yb))?db=Da.createStream(yb):(db=Da.getElements(yb),yb&&!db&&ca.commandRaise(u,N));db&&m.bindBuffer(34963,db.buffer.buffer);bb=db?db.primType:4;ob=db?db.vertCount:-1;0<=ob||ca.commandRaise(p,N);ob&&(db?
m.drawElements(bb,ob,db.type,0<<(db.type-5121>>1)):m.drawArrays(bb,0,ob),M.dirty=!0,za.setVAO(null),g.view=d,b&&(L.cpuTime+=performance.now()-k),x&&B.destroyStream(w),ta&&B.destroyStream(Fa),Fb&&B.destroyStream(tc),uc.unbind(),Nb&&Da.destroyStream(db))},scope:function(a,d,c){var f,b,k,l,m,r,n,e,q,I,z,x,A,na,D,u,E,G,y,fa,ha,Za,Ja,C,sa,p,Ba,F,va,P,ra,R,W,xa,H,U,ka,V,X,Y,ea,Ta,wa,oa,Aa,ya,ta,ja,Ea,Ca,za,Hb,qa,ga,Z,ua,Fa,Dc,Ia,xd,Wa,Ra,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,
gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb;f=g.view;b=ba.call(this,g,a,c);g.view=b;k=O.cull_enable;O.cull_enable=!0;l=O.cull_face;O.cull_face=1029;if(m=M.profile)r=performance.now(),L.count++;n=a.elements;e=null;(q=aa(n))?e=Da.createStream(n):(e=Da.getElements(n),n&&!e&&ca.commandRaise(w,N));I=K.elements;K.elements=e;z=K.offset;K.offset=0;x=e?e.vertCount:-1;A=K.count;K.count=x;na=e?e.primType:4;D=K.primitive;K.primitive=na;u=a.atlas;E=pa[5];pa[5]=u;G=T.call(this,g,a,c);y=pa[3];pa[3]=G;fa=
g.view;ha=pa[4];pa[4]=fa;(Za=a.normal)&&("object"===typeof Za||"function"===typeof Za)&&(aa(Za)||B.getBuffer(Za)||B.getBuffer(Za.buffer)||aa(Za.buffer)||"constant"in Za&&("number"===typeof Za.constant||J(Za.constant)))||ca.commandRaise(v,N);Ja=!1;C=null;sa=0;p=!1;F=Ba=0;va=1;P=0;ra=5126;H=xa=W=R=0;aa(Za)?(Ja=!0,C=B.createStream(34962,Za),ra=C.dtype):(C=B.getBuffer(Za))?ra=C.dtype:"constant"in Za?(va=2,"number"===typeof Za.constant?(W=Za.constant,xa=H=R=0):(W=0<Za.constant.length?Za.constant[0]:0,
xa=1<Za.constant.length?Za.constant[1]:0,H=2<Za.constant.length?Za.constant[2]:0,R=3<Za.constant.length?Za.constant[3]:0)):(C=aa(Za.buffer)?B.createStream(34962,Za.buffer):B.getBuffer(Za.buffer),ra="type"in Za?la[Za.type]:C.dtype,p=!!Za.normalized,F=Za.size|0,Ba=Za.offset|0,P=Za.stride|0,sa=Za.divisor|0);U=Q.buffer;Q.buffer=C;ka=Q.divisor;Q.divisor=sa;V=Q.normalized;Q.normalized=p;X=Q.offset;Q.offset=Ba;Y=Q.size;Q.size=F;ea=Q.state;Q.state=va;Ta=Q.stride;Q.stride=P;wa=Q.type;Q.type=ra;oa=Q.w;Q.w=
R;Aa=Q.x;Q.x=W;ya=Q.y;Q.y=xa;ta=Q.z;Q.z=H;(ja=a.position)&&("object"===typeof ja||"function"===typeof ja)&&(aa(ja)||B.getBuffer(ja)||B.getBuffer(ja.buffer)||aa(ja.buffer)||"constant"in ja&&("number"===typeof ja.constant||J(ja.constant)))||ca.commandRaise(ia,N);Ea=!1;Ca=null;za=0;Hb=!1;ga=qa=0;Z=1;ua=0;Fa=5126;Wa=xd=Ia=Dc=0;aa(ja)?(Ea=!0,Ca=B.createStream(34962,ja),Fa=Ca.dtype):(Ca=B.getBuffer(ja))?Fa=Ca.dtype:"constant"in ja?(Z=2,"number"===typeof ja.constant?(Ia=ja.constant,xd=Wa=Dc=0):(Ia=0<ja.constant.length?
ja.constant[0]:0,xd=1<ja.constant.length?ja.constant[1]:0,Wa=2<ja.constant.length?ja.constant[2]:0,Dc=3<ja.constant.length?ja.constant[3]:0)):(Ca=aa(ja.buffer)?B.createStream(34962,ja.buffer):B.getBuffer(ja.buffer),Fa="type"in ja?la[ja.type]:Ca.dtype,Hb=!!ja.normalized,ga=ja.size|0,qa=ja.offset|0,ua=ja.stride|0,za=ja.divisor|0);Ra=h.buffer;h.buffer=Ca;Ib=h.divisor;h.divisor=za;Jb=h.normalized;h.normalized=Hb;qc=h.offset;h.offset=qa;Ob=h.size;h.size=ga;jb=h.state;h.state=Z;Gb=h.stride;h.stride=ua;
Db=h.type;h.type=Fa;wb=h.w;h.w=Dc;hb=h.x;h.x=Ia;Yb=h.y;h.y=xd;Pb=h.z;h.z=Wa;(qb=a.uv)&&("object"===typeof qb||"function"===typeof qb)&&(aa(qb)||B.getBuffer(qb)||B.getBuffer(qb.buffer)||aa(qb.buffer)||"constant"in qb&&("number"===typeof qb.constant||J(qb.constant)))||ca.commandRaise(t,N);Ua=!1;Ub=null;zb=0;bc=!1;pb=ib=0;Ha=1;rb=0;Ka=5126;kb=La=gb=fb=0;aa(qb)?(Ua=!0,Ub=B.createStream(34962,qb),Ka=Ub.dtype):(Ub=B.getBuffer(qb))?Ka=Ub.dtype:"constant"in qb?(Ha=2,"number"===typeof qb.constant?(gb=qb.constant,
La=kb=fb=0):(gb=0<qb.constant.length?qb.constant[0]:0,La=1<qb.constant.length?qb.constant[1]:0,kb=2<qb.constant.length?qb.constant[2]:0,fb=3<qb.constant.length?qb.constant[3]:0)):(Ub=aa(qb.buffer)?B.createStream(34962,qb.buffer):B.getBuffer(qb.buffer),Ka="type"in qb?la[qb.type]:Ub.dtype,bc=!!qb.normalized,pb=qb.size|0,ib=qb.offset|0,rb=qb.stride|0,zb=qb.divisor|0);Xa=S.buffer;S.buffer=Ub;tb=S.divisor;S.divisor=zb;sb=S.normalized;S.normalized=bc;Oa=S.offset;S.offset=ib;Cc=S.size;S.size=pb;Qa=S.state;
S.state=Ha;Kb=S.stride;S.stride=rb;Eb=S.type;S.type=Ka;Ma=S.w;S.w=fb;vd=S.x;S.x=gb;$a=S.y;S.y=La;Lb=S.z;S.z=kb;Mb=ma.vert;ma.vert=2;lb=ma.frag;ma.frag=1;M.dirty=!0;d(g,a,c);g.view=f;O.cull_enable=k;O.cull_face=l;m&&(L.cpuTime+=performance.now()-r);q&&Da.destroyStream(e);K.elements=I;K.offset=z;K.count=A;K.primitive=D;pa[5]=E;pa[3]=y;pa[4]=ha;Ja&&B.destroyStream(C);Q.buffer=U;Q.divisor=ka;Q.normalized=V;Q.offset=X;Q.size=Y;Q.state=ea;Q.stride=Ta;Q.type=wa;Q.w=oa;Q.x=Aa;Q.y=ya;Q.z=ta;Ea&&B.destroyStream(Ca);
h.buffer=Ra;h.divisor=Ib;h.normalized=Jb;h.offset=qc;h.size=Ob;h.state=jb;h.stride=Gb;h.type=Db;h.w=wb;h.x=hb;h.y=Yb;h.z=Pb;Ua&&B.destroyStream(Ub);S.buffer=Xa;S.divisor=tb;S.normalized=sb;S.offset=Oa;S.size=Cc;S.state=Qa;S.stride=Kb;S.type=Eb;S.w=Ma;S.x=vd;S.y=$a;S.z=Lb;ma.vert=Mb;ma.frag=lb;M.dirty=!0},batch:function(c,h){var b,l,e,q,t,w,u;b=g.view;l=k.call(this,g,c,0);g.view=l;e=qa.next;e!==qa.cur&&(e?m.bindFramebuffer(36160,e.framebuffer):m.bindFramebuffer(36160,null),qa.cur=e);if(M.dirty){var v,
y,C,p,K,F,Q,W,S,pa,H,T,U,ba,ma,ia,ua,Ra,Wd,Bd,ld,$c,rd,Lc,od,Gc,ed,Oc,jd,Bb,Fb,tc,xb,xc,Cb,Jc,lc,Hc,Vc,Uc,Ec,ec,Ic,oc,pc,mc,fc,Va,uc,yb,db,Nb;v=O.dither;v!==M.dither&&(v?m.enable(3024):m.disable(3024),M.dither=v);y=O.blend_enable;y!==M.blend_enable&&(y?m.enable(3042):m.disable(3042),M.blend_enable=y);C=xa[0];p=xa[1];K=xa[2];F=xa[3];if(C!==fa[0]||p!==fa[1]||K!==fa[2]||F!==fa[3])m.blendColor(C,p,K,F),fa[0]=C,fa[1]=p,fa[2]=K,fa[3]=F;Q=Aa[0];W=Aa[1];if(Q!==ka[0]||W!==ka[1])m.blendEquationSeparate(Q,W),
ka[0]=Q,ka[1]=W;S=oa[0];pa=oa[1];H=oa[2];T=oa[3];if(S!==ya[0]||pa!==ya[1]||H!==ya[2]||T!==ya[3])m.blendFuncSeparate(S,pa,H,T),ya[0]=S,ya[1]=pa,ya[2]=H,ya[3]=T;U=O.depth_enable;U!==M.depth_enable&&(U?m.enable(2929):m.disable(2929),M.depth_enable=U);ba=O.depth_func;ba!==M.depth_func&&(m.depthFunc(ba),M.depth_func=ba);ma=Za[0];ia=Za[1];if(ma!==Ta[0]||ia!==Ta[1])m.depthRange(ma,ia),Ta[0]=ma,Ta[1]=ia;ua=O.depth_mask;ua!==M.depth_mask&&(m.depthMask(ua),M.depth_mask=ua);Ra=Ja[0];Wd=Ja[1];Bd=Ja[2];ld=Ja[3];
if(Ra!==na[0]||Wd!==na[1]||Bd!==na[2]||ld!==na[3])m.colorMask(Ra,Wd,Bd,ld),na[0]=Ra,na[1]=Wd,na[2]=Bd,na[3]=ld;$c=O.frontFace;$c!==M.frontFace&&(m.frontFace($c),M.frontFace=$c);rd=O.lineWidth;rd!==M.lineWidth&&(m.lineWidth(rd),M.lineWidth=rd);Lc=O.polygonOffset_enable;Lc!==M.polygonOffset_enable&&(Lc?m.enable(32823):m.disable(32823),M.polygonOffset_enable=Lc);od=r[0];Gc=r[1];if(od!==n[0]||Gc!==n[1])m.polygonOffset(od,Gc),n[0]=od,n[1]=Gc;ed=O.sample_alpha;ed!==M.sample_alpha&&(ed?m.enable(32926):m.disable(32926),
M.sample_alpha=ed);Oc=O.sample_enable;Oc!==M.sample_enable&&(Oc?m.enable(32928):m.disable(32928),M.sample_enable=Oc);jd=z[0];Bb=z[1];if(jd!==va[0]||Bb!==va[1])m.sampleCoverage(jd,Bb),va[0]=jd,va[1]=Bb;Fb=O.stencil_enable;Fb!==M.stencil_enable&&(Fb?m.enable(2960):m.disable(2960),M.stencil_enable=Fb);tc=O.stencil_mask;tc!==M.stencil_mask&&(m.stencilMask(tc),M.stencil_mask=tc);xb=Hb[0];xc=Hb[1];Cb=Hb[2];if(xb!==ha[0]||xc!==ha[1]||Cb!==ha[2])m.stencilFunc(xb,xc,Cb),ha[0]=xb,ha[1]=xc,ha[2]=Cb;Jc=Ba[0];
lc=Ba[1];Hc=Ba[2];Vc=Ba[3];if(Jc!==ra[0]||lc!==ra[1]||Hc!==ra[2]||Vc!==ra[3])m.stencilOpSeparate(Jc,lc,Hc,Vc),ra[0]=Jc,ra[1]=lc,ra[2]=Hc,ra[3]=Vc;Uc=I[0];Ec=I[1];ec=I[2];Ic=I[3];if(Uc!==sa[0]||Ec!==sa[1]||ec!==sa[2]||Ic!==sa[3])m.stencilOpSeparate(Uc,Ec,ec,Ic),sa[0]=Uc,sa[1]=Ec,sa[2]=ec,sa[3]=Ic;oc=O.scissor_enable;oc!==M.scissor_enable&&(oc?m.enable(3089):m.disable(3089),M.scissor_enable=oc);pc=Ca[0];mc=Ca[1];fc=Ca[2];Va=Ca[3];if(pc!==Z[0]||mc!==Z[1]||fc!==Z[2]||Va!==Z[3])m.scissor(pc,mc,fc,Va),
Z[0]=pc,Z[1]=mc,Z[2]=fc,Z[3]=Va;uc=wa[0];yb=wa[1];db=wa[2];Nb=wa[3];if(uc!==Ea[0]||yb!==Ea[1]||db!==Ea[2]||Nb!==Ea[3])m.viewport(uc,yb,db,Nb),Ea[0]=uc,Ea[1]=yb,Ea[2]=db,Ea[3]=Nb}m.enable(2884);M.cull_enable=!0;m.cullFace(1029);M.cull_face=1029;if(q=M.profile)t=performance.now(),L.count+=h;m.useProgram(X.program);var bb,ob;za.setVAO(null);bb=D.call(this,g,u,w);J(bb)&&16===bb.length||ca.commandRaise(E,N);m.uniformMatrix4fv(V.location,!1,Array.isArray(bb)||bb instanceof Float32Array?bb:(Fa[0]=bb[0],
Fa[1]=bb[1],Fa[2]=bb[2],Fa[3]=bb[3],Fa[4]=bb[4],Fa[5]=bb[5],Fa[6]=bb[6],Fa[7]=bb[7],Fa[8]=bb[8],Fa[9]=bb[9],Fa[10]=bb[10],Fa[11]=bb[11],Fa[12]=bb[12],Fa[13]=bb[13],Fa[14]=bb[14],Fa[15]=bb[15],Fa));ob=g.view;J(ob)&&16===ob.length||ca.commandRaise(d,N);m.uniformMatrix4fv(R.location,!1,Array.isArray(ob)||ob instanceof Float32Array?ob:(Ia[0]=ob[0],Ia[1]=ob[1],Ia[2]=ob[2],Ia[3]=ob[3],Ia[4]=ob[4],Ia[5]=ob[5],Ia[6]=ob[6],Ia[7]=ob[7],Ia[8]=ob[8],Ia[9]=ob[9],Ia[10]=ob[10],Ia[11]=ob[11],Ia[12]=ob[12],Ia[13]=
ob[13],Ia[14]=ob[14],Ia[15]=ob[15],Ia));for(w=0;w<h;++w){u=c[w];var Wa,Ld,Ib,Jb,qc,Ob,jb,Gb,Db,wb,hb,Yb,Pb,qb,Ua,Ub,zb,bc,ib,pb,Ha,rb,Ka,fb,gb,La,kb,Xa,tb,sb,Oa,Cc,Qa,Kb,Eb,Ma,vd,$a,Lb,Mb,lb,Na,Zb,Pa,ub,vb,Sa,nb,gc,Ac,vc,cb,jc,ad,Ya;(Wa=u.position)&&("object"===typeof Wa||"function"===typeof Wa)&&(aa(Wa)||B.getBuffer(Wa)||B.getBuffer(Wa.buffer)||aa(Wa.buffer)||"constant"in Wa&&("number"===typeof Wa.constant||J(Wa.constant)))||ca.commandRaise(f,N);Ld=!1;Ib=null;Jb=!1;Ob=qc=0;jb=1;Gb=0;Db=5126;Pb=Yb=
hb=wb=0;aa(Wa)?(Ld=!0,Ib=B.createStream(34962,Wa),Db=Ib.dtype):(Ib=B.getBuffer(Wa))?Db=Ib.dtype:"constant"in Wa?(jb=2,"number"===typeof Wa.constant?(hb=Wa.constant,Yb=Pb=wb=0):(hb=0<Wa.constant.length?Wa.constant[0]:0,Yb=1<Wa.constant.length?Wa.constant[1]:0,Pb=2<Wa.constant.length?Wa.constant[2]:0,wb=3<Wa.constant.length?Wa.constant[3]:0)):(Ib=aa(Wa.buffer)?B.createStream(34962,Wa.buffer):B.getBuffer(Wa.buffer),Db="type"in Wa?la[Wa.type]:Ib.dtype,Jb=!!Wa.normalized,Ob=Wa.size|0,qc=Wa.offset|0,Gb=
Wa.stride|0);qb=ga.location;Ua=P[qb];if(1===jb){if(Ua.buffer||m.enableVertexAttribArray(qb),Ub=Ob||3,Ua.type!==Db||Ua.size!==Ub||Ua.buffer!==Ib||Ua.normalized!==Jb||Ua.offset!==qc||Ua.stride!==Gb)m.bindBuffer(34962,Ib.buffer),m.vertexAttribPointer(qb,Ub,Db,Jb,Gb,qc),Ua.type=Db,Ua.size=Ub,Ua.buffer=Ib,Ua.normalized=Jb,Ua.offset=qc,Ua.stride=Gb}else if(Ua.buffer&&(m.disableVertexAttribArray(qb),Ua.buffer=null),Ua.x!==hb||Ua.y!==Yb||Ua.z!==Pb||Ua.w!==wb)m.vertexAttrib4f(qb,hb,Yb,Pb,wb),Ua.x=hb,Ua.y=
Yb,Ua.z=Pb,Ua.w=wb;(zb=u.normal)&&("object"===typeof zb||"function"===typeof zb)&&(aa(zb)||B.getBuffer(zb)||B.getBuffer(zb.buffer)||aa(zb.buffer)||"constant"in zb&&("number"===typeof zb.constant||J(zb.constant)))||ca.commandRaise(x,N);bc=!1;ib=null;pb=!1;rb=Ha=0;Ka=1;fb=0;gb=5126;tb=Xa=kb=La=0;aa(zb)?(bc=!0,ib=B.createStream(34962,zb),gb=ib.dtype):(ib=B.getBuffer(zb))?gb=ib.dtype:"constant"in zb?(Ka=2,"number"===typeof zb.constant?(kb=zb.constant,Xa=tb=La=0):(kb=0<zb.constant.length?zb.constant[0]:
0,Xa=1<zb.constant.length?zb.constant[1]:0,tb=2<zb.constant.length?zb.constant[2]:0,La=3<zb.constant.length?zb.constant[3]:0)):(ib=aa(zb.buffer)?B.createStream(34962,zb.buffer):B.getBuffer(zb.buffer),gb="type"in zb?la[zb.type]:ib.dtype,pb=!!zb.normalized,rb=zb.size|0,Ha=zb.offset|0,fb=zb.stride|0);sb=ja.location;Oa=P[sb];if(1===Ka){if(Oa.buffer||m.enableVertexAttribArray(sb),Cc=rb||3,Oa.type!==gb||Oa.size!==Cc||Oa.buffer!==ib||Oa.normalized!==pb||Oa.offset!==Ha||Oa.stride!==fb)m.bindBuffer(34962,
ib.buffer),m.vertexAttribPointer(sb,Cc,gb,pb,fb,Ha),Oa.type=gb,Oa.size=Cc,Oa.buffer=ib,Oa.normalized=pb,Oa.offset=Ha,Oa.stride=fb}else if(Oa.buffer&&(m.disableVertexAttribArray(sb),Oa.buffer=null),Oa.x!==kb||Oa.y!==Xa||Oa.z!==tb||Oa.w!==La)m.vertexAttrib4f(sb,kb,Xa,tb,La),Oa.x=kb,Oa.y=Xa,Oa.z=tb,Oa.w=La;(Qa=u.uv)&&("object"===typeof Qa||"function"===typeof Qa)&&(aa(Qa)||B.getBuffer(Qa)||B.getBuffer(Qa.buffer)||aa(Qa.buffer)||"constant"in Qa&&("number"===typeof Qa.constant||J(Qa.constant)))||ca.commandRaise(Y,
N);Kb=!1;Eb=null;Ma=!1;$a=vd=0;Lb=1;Mb=0;lb=5126;ub=Pa=Zb=Na=0;aa(Qa)?(Kb=!0,Eb=B.createStream(34962,Qa),lb=Eb.dtype):(Eb=B.getBuffer(Qa))?lb=Eb.dtype:"constant"in Qa?(Lb=2,"number"===typeof Qa.constant?(Zb=Qa.constant,Pa=ub=Na=0):(Zb=0<Qa.constant.length?Qa.constant[0]:0,Pa=1<Qa.constant.length?Qa.constant[1]:0,ub=2<Qa.constant.length?Qa.constant[2]:0,Na=3<Qa.constant.length?Qa.constant[3]:0)):(Eb=aa(Qa.buffer)?B.createStream(34962,Qa.buffer):B.getBuffer(Qa.buffer),lb="type"in Qa?la[Qa.type]:Eb.dtype,
Ma=!!Qa.normalized,$a=Qa.size|0,vd=Qa.offset|0,Mb=Qa.stride|0);vb=ea.location;Sa=P[vb];if(1===Lb){if(Sa.buffer||m.enableVertexAttribArray(vb),nb=$a||2,Sa.type!==lb||Sa.size!==nb||Sa.buffer!==Eb||Sa.normalized!==Ma||Sa.offset!==vd||Sa.stride!==Mb)m.bindBuffer(34962,Eb.buffer),m.vertexAttribPointer(vb,nb,lb,Ma,Mb,vd),Sa.type=lb,Sa.size=nb,Sa.buffer=Eb,Sa.normalized=Ma,Sa.offset=vd,Sa.stride=Mb}else if(Sa.buffer&&(m.disableVertexAttribArray(vb),Sa.buffer=null),Sa.x!==Zb||Sa.y!==Pa||Sa.z!==ub||Sa.w!==
Na)m.vertexAttrib4f(vb,Zb,Pa,ub,Na),Sa.x=Zb,Sa.y=Pa,Sa.z=ub,Sa.w=Na;(gc=u.atlas)&&"framebuffer"===gc._reglType&&(gc=gc.color[0]);"function"===typeof gc&&"texture2d"===gc._reglType||ca.commandRaise(G,N);Ac=gc._texture;m.uniform1i(A.location,Ac.bind());vc=u.elements;cb=null;(jc=aa(vc))?cb=Da.createStream(vc):(cb=Da.getElements(vc),vc&&!cb&&ca.commandRaise(a,N));cb&&m.bindBuffer(34963,cb.buffer.buffer);ad=cb?cb.primType:4;Ya=cb?cb.vertCount:-1;0<=Ya||ca.commandRaise(ta,N);Ya&&(cb?m.drawElements(ad,Ya,
cb.type,0<<(cb.type-5121>>1)):m.drawArrays(ad,0,Ya),Ld&&B.destroyStream(Ib),bc&&B.destroyStream(ib),Kb&&B.destroyStream(Eb),Ac.unbind(),jc&&Da.destroyStream(cb))}M.dirty=!0;za.setVAO(null);g.view=b;q&&(L.cpuTime+=performance.now()-t)}}},"$7,color,position":function(b,ca,N,L,e,l,q,c,F,C){var H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,ga,V,ea,R,P,B,g,M,K;H=b.attributes;U=b.context;y=b.current;u=b.draw;p=b.elements;ba=b.framebuffer;w=b.gl;T=b.next;v=b.shader;Q=b.uniforms;ia=b.vao;h=T.blend_color;
t=y.blend_color;S=T.blend_equation;k=y.blend_equation;X=T.blend_func;f=y.blend_func;x=T.colorMask;Y=y.colorMask;D=T.depth_range;E=y.depth_range;d=T.polygonOffset_offset;G=y.polygonOffset_offset;a=T.sample_coverage;ta=y.sample_coverage;A=T.scissor_box;ja=y.scissor_box;ga=T.stencil_func;V=y.stencil_func;ea=T.stencil_opBack;R=y.stencil_opBack;P=T.stencil_opFront;B=y.stencil_opFront;g=T.viewport;M=y.viewport;K=[1,0,0,1];return{draw:function(c){var b,m,q,v;c=ba.next;c!==ba.cur&&(c?w.bindFramebuffer(36160,
c.framebuffer):w.bindFramebuffer(36160,null),ba.cur=c);if(y.dirty){c=T.dither;c!==y.dither&&(c?w.enable(3024):w.disable(3024),y.dither=c);c=T.blend_enable;c!==y.blend_enable&&(c?w.enable(3042):w.disable(3042),y.blend_enable=c);c=h[0];m=h[1];q=h[2];v=h[3];if(c!==t[0]||m!==t[1]||q!==t[2]||v!==t[3])w.blendColor(c,m,q,v),t[0]=c,t[1]=m,t[2]=q,t[3]=v;c=S[0];m=S[1];if(c!==k[0]||m!==k[1])w.blendEquationSeparate(c,m),k[0]=c,k[1]=m;c=X[0];m=X[1];q=X[2];v=X[3];if(c!==f[0]||m!==f[1]||q!==f[2]||v!==f[3])w.blendFuncSeparate(c,
m,q,v),f[0]=c,f[1]=m,f[2]=q,f[3]=v;c=T.depth_enable;c!==y.depth_enable&&(c?w.enable(2929):w.disable(2929),y.depth_enable=c);c=T.depth_func;c!==y.depth_func&&(w.depthFunc(c),y.depth_func=c);c=D[0];m=D[1];if(c!==E[0]||m!==E[1])w.depthRange(c,m),E[0]=c,E[1]=m;c=T.depth_mask;c!==y.depth_mask&&(w.depthMask(c),y.depth_mask=c);c=x[0];m=x[1];q=x[2];v=x[3];if(c!==Y[0]||m!==Y[1]||q!==Y[2]||v!==Y[3])w.colorMask(c,m,q,v),Y[0]=c,Y[1]=m,Y[2]=q,Y[3]=v;c=T.cull_enable;c!==y.cull_enable&&(c?w.enable(2884):w.disable(2884),
y.cull_enable=c);c=T.cull_face;c!==y.cull_face&&(w.cullFace(c),y.cull_face=c);c=T.frontFace;c!==y.frontFace&&(w.frontFace(c),y.frontFace=c);c=T.lineWidth;c!==y.lineWidth&&(w.lineWidth(c),y.lineWidth=c);c=T.polygonOffset_enable;c!==y.polygonOffset_enable&&(c?w.enable(32823):w.disable(32823),y.polygonOffset_enable=c);c=d[0];m=d[1];if(c!==G[0]||m!==G[1])w.polygonOffset(c,m),G[0]=c,G[1]=m;c=T.sample_alpha;c!==y.sample_alpha&&(c?w.enable(32926):w.disable(32926),y.sample_alpha=c);c=T.sample_enable;c!==
y.sample_enable&&(c?w.enable(32928):w.disable(32928),y.sample_enable=c);c=a[0];m=a[1];if(c!==ta[0]||m!==ta[1])w.sampleCoverage(c,m),ta[0]=c,ta[1]=m;c=T.stencil_enable;c!==y.stencil_enable&&(c?w.enable(2960):w.disable(2960),y.stencil_enable=c);c=T.stencil_mask;c!==y.stencil_mask&&(w.stencilMask(c),y.stencil_mask=c);c=ga[0];m=ga[1];q=ga[2];if(c!==V[0]||m!==V[1]||q!==V[2])w.stencilFunc(c,m,q),V[0]=c,V[1]=m,V[2]=q;c=P[0];m=P[1];q=P[2];v=P[3];if(c!==B[0]||m!==B[1]||q!==B[2]||v!==B[3])w.stencilOpSeparate(c,
m,q,v),B[0]=c,B[1]=m,B[2]=q,B[3]=v;c=ea[0];m=ea[1];q=ea[2];v=ea[3];if(c!==R[0]||m!==R[1]||q!==R[2]||v!==R[3])w.stencilOpSeparate(c,m,q,v),R[0]=c,R[1]=m,R[2]=q,R[3]=v;c=T.scissor_enable;c!==y.scissor_enable&&(c?w.enable(3089):w.disable(3089),y.scissor_enable=c);c=A[0];m=A[1];q=A[2];v=A[3];if(c!==ja[0]||m!==ja[1]||q!==ja[2]||v!==ja[3])w.scissor(c,m,q,v),ja[0]=c,ja[1]=m,ja[2]=q,ja[3]=v;c=g[0];m=g[1];q=g[2];v=g[3];if(c!==M[0]||m!==M[1]||q!==M[2]||v!==M[3])w.viewport(c,m,q,v),M[0]=c,M[1]=m,M[2]=q,M[3]=
v;y.dirty=!1}if(c=y.profile)b=performance.now(),L.count++;w.useProgram(e.program);ia.setVAO(null);m=C.location;q=H[m];q.buffer||w.enableVertexAttribArray(m);if(q.type!==l.dtype||2!==q.size||q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)w.bindBuffer(34962,l.buffer),w.vertexAttribPointer(m,2,l.dtype,!1,0,0),q.type=l.dtype,q.size=2,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;w.uniform4f(F.location,1,0,0,1);(m=u.elements)?w.bindBuffer(34963,m.buffer.buffer):ia.currentVAO&&(m=p.getElements(ia.currentVAO.elements))&&
w.bindBuffer(34963,m.buffer.buffer);q=u.primitive;v=u.offset;m?w.drawElements(q,3,m.type,v<<(m.type-5121>>1)):w.drawArrays(q,v,3);ia.setVAO(null);c&&(L.cpuTime+=performance.now()-b)},scope:function(a,c,d){var f,g,h,b,k,e,t,x,A,w,D,E,B,na,Za,G,r,n;if(f=y.profile)g=performance.now(),L.count++;h=u.count;u.count=3;b=Q[3];Q[3]=K;k=q.buffer;q.buffer=l;e=q.divisor;q.divisor=0;t=q.normalized;q.normalized=!1;x=q.offset;q.offset=0;A=q.size;q.size=0;w=q.state;q.state=1;D=q.stride;q.stride=0;E=q.type;q.type=
l.dtype;B=q.w;q.w=0;na=q.x;q.x=0;Za=q.y;q.y=0;G=q.z;q.z=0;r=v.vert;v.vert=2;n=v.frag;v.frag=1;c(U,a,d);f&&(L.cpuTime+=performance.now()-g);u.count=h;Q[3]=b;q.buffer=k;q.divisor=e;q.normalized=t;q.offset=x;q.size=A;q.state=w;q.stride=D;q.type=E;q.w=B;q.x=na;q.y=Za;q.z=G;v.vert=r;v.frag=n},batch:function(b,e){var m,q,v;m=ba.next;m!==ba.cur&&(m?w.bindFramebuffer(36160,m.framebuffer):w.bindFramebuffer(36160,null),ba.cur=m);if(y.dirty){var O,K;m=T.dither;m!==y.dither&&(m?w.enable(3024):w.disable(3024),
y.dither=m);m=T.blend_enable;m!==y.blend_enable&&(m?w.enable(3042):w.disable(3042),y.blend_enable=m);m=h[0];v=h[1];O=h[2];K=h[3];if(m!==t[0]||v!==t[1]||O!==t[2]||K!==t[3])w.blendColor(m,v,O,K),t[0]=m,t[1]=v,t[2]=O,t[3]=K;m=S[0];v=S[1];if(m!==k[0]||v!==k[1])w.blendEquationSeparate(m,v),k[0]=m,k[1]=v;m=X[0];v=X[1];O=X[2];K=X[3];if(m!==f[0]||v!==f[1]||O!==f[2]||K!==f[3])w.blendFuncSeparate(m,v,O,K),f[0]=m,f[1]=v,f[2]=O,f[3]=K;m=T.depth_enable;m!==y.depth_enable&&(m?w.enable(2929):w.disable(2929),y.depth_enable=
m);m=T.depth_func;m!==y.depth_func&&(w.depthFunc(m),y.depth_func=m);m=D[0];v=D[1];if(m!==E[0]||v!==E[1])w.depthRange(m,v),E[0]=m,E[1]=v;m=T.depth_mask;m!==y.depth_mask&&(w.depthMask(m),y.depth_mask=m);m=x[0];v=x[1];O=x[2];K=x[3];if(m!==Y[0]||v!==Y[1]||O!==Y[2]||K!==Y[3])w.colorMask(m,v,O,K),Y[0]=m,Y[1]=v,Y[2]=O,Y[3]=K;m=T.cull_enable;m!==y.cull_enable&&(m?w.enable(2884):w.disable(2884),y.cull_enable=m);m=T.cull_face;m!==y.cull_face&&(w.cullFace(m),y.cull_face=m);m=T.frontFace;m!==y.frontFace&&(w.frontFace(m),
y.frontFace=m);m=T.lineWidth;m!==y.lineWidth&&(w.lineWidth(m),y.lineWidth=m);m=T.polygonOffset_enable;m!==y.polygonOffset_enable&&(m?w.enable(32823):w.disable(32823),y.polygonOffset_enable=m);m=d[0];v=d[1];if(m!==G[0]||v!==G[1])w.polygonOffset(m,v),G[0]=m,G[1]=v;m=T.sample_alpha;m!==y.sample_alpha&&(m?w.enable(32926):w.disable(32926),y.sample_alpha=m);m=T.sample_enable;m!==y.sample_enable&&(m?w.enable(32928):w.disable(32928),y.sample_enable=m);m=a[0];v=a[1];if(m!==ta[0]||v!==ta[1])w.sampleCoverage(m,
v),ta[0]=m,ta[1]=v;m=T.stencil_enable;m!==y.stencil_enable&&(m?w.enable(2960):w.disable(2960),y.stencil_enable=m);m=T.stencil_mask;m!==y.stencil_mask&&(w.stencilMask(m),y.stencil_mask=m);m=ga[0];v=ga[1];O=ga[2];if(m!==V[0]||v!==V[1]||O!==V[2])w.stencilFunc(m,v,O),V[0]=m,V[1]=v,V[2]=O;m=P[0];v=P[1];O=P[2];K=P[3];if(m!==B[0]||v!==B[1]||O!==B[2]||K!==B[3])w.stencilOpSeparate(m,v,O,K),B[0]=m,B[1]=v,B[2]=O,B[3]=K;m=ea[0];v=ea[1];O=ea[2];K=ea[3];if(m!==R[0]||v!==R[1]||O!==R[2]||K!==R[3])w.stencilOpSeparate(m,
v,O,K),R[0]=m,R[1]=v,R[2]=O,R[3]=K;m=T.scissor_enable;m!==y.scissor_enable&&(m?w.enable(3089):w.disable(3089),y.scissor_enable=m);m=A[0];v=A[1];O=A[2];K=A[3];if(m!==ja[0]||v!==ja[1]||O!==ja[2]||K!==ja[3])w.scissor(m,v,O,K),ja[0]=m,ja[1]=v,ja[2]=O,ja[3]=K;m=g[0];v=g[1];O=g[2];K=g[3];if(m!==M[0]||v!==M[1]||O!==M[2]||K!==M[3])w.viewport(m,v,O,K),M[0]=m,M[1]=v,M[2]=O,M[3]=K;y.dirty=!1}if(m=y.profile)q=performance.now(),L.count+=e;w.useProgram(c.program);var N;ia.setVAO(null);v=C.location;O=H[v];O.buffer||
w.enableVertexAttribArray(v);if(O.type!==l.dtype||2!==O.size||O.buffer!==l||!1!==O.normalized||0!==O.offset||0!==O.stride)w.bindBuffer(34962,l.buffer),w.vertexAttribPointer(v,2,l.dtype,!1,0,0),O.type=l.dtype,O.size=2,O.buffer=l,O.normalized=!1,O.offset=0,O.stride=0;w.uniform4f(F.location,1,0,0,1);(O=u.elements)?w.bindBuffer(34963,O.buffer.buffer):ia.currentVAO&&(O=p.getElements(ia.currentVAO.elements))&&w.bindBuffer(34963,O.buffer.buffer);K=u.primitive;N=u.offset;for(v=0;v<e;++v)O?w.drawElements(K,
3,O.type,N<<(O.type-5121>>1)):w.drawArrays(K,N,3);ia.setVAO(null);m&&(L.cpuTime+=performance.now()-q)}}},"$19,angle,color,offset,position":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S){var k,X,f,x,Y,D,E,d,G,a,ta,A,ja,ga,V,ea,R,P,B,g,M,K,Z,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa;k=b.attributes;X=b.context;f=b.current;x=b.draw;Y=b.elements;D=b.framebuffer;E=b.gl;d=b.isArrayLike;G=b.next;a=b.shader;ta=b.uniforms;A=b.vao;ja=G.blend_color;ga=f.blend_color;V=G.blend_equation;ea=f.blend_equation;
R=G.blend_func;P=f.blend_func;B=G.colorMask;g=f.colorMask;M=G.depth_range;K=f.depth_range;Z=G.polygonOffset_offset;qa=f.polygonOffset_offset;m=G.sample_coverage;J=f.sample_coverage;aa=G.scissor_box;O=f.scissor_box;ma=G.stencil_func;pa=f.stencil_func;za=G.stencil_opBack;xa=f.stencil_opBack;fa=G.stencil_opFront;Aa=f.stencil_opFront;ka=G.viewport;oa=f.viewport;return{draw:function(a){var b,v,w,u;b=D.next;b!==D.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),D.cur=b);if(f.dirty){var r;
b=G.dither;b!==f.dither&&(b?E.enable(3024):E.disable(3024),f.dither=b);b=G.blend_enable;b!==f.blend_enable&&(b?E.enable(3042):E.disable(3042),f.blend_enable=b);b=ja[0];w=ja[1];u=ja[2];r=ja[3];if(b!==ga[0]||w!==ga[1]||u!==ga[2]||r!==ga[3])E.blendColor(b,w,u,r),ga[0]=b,ga[1]=w,ga[2]=u,ga[3]=r;b=V[0];w=V[1];if(b!==ea[0]||w!==ea[1])E.blendEquationSeparate(b,w),ea[0]=b,ea[1]=w;b=R[0];w=R[1];u=R[2];r=R[3];if(b!==P[0]||w!==P[1]||u!==P[2]||r!==P[3])E.blendFuncSeparate(b,w,u,r),P[0]=b,P[1]=w,P[2]=u,P[3]=r;
b=G.depth_func;b!==f.depth_func&&(E.depthFunc(b),f.depth_func=b);b=M[0];w=M[1];if(b!==K[0]||w!==K[1])E.depthRange(b,w),K[0]=b,K[1]=w;b=G.depth_mask;b!==f.depth_mask&&(E.depthMask(b),f.depth_mask=b);b=B[0];w=B[1];u=B[2];r=B[3];if(b!==g[0]||w!==g[1]||u!==g[2]||r!==g[3])E.colorMask(b,w,u,r),g[0]=b,g[1]=w,g[2]=u,g[3]=r;b=G.cull_enable;b!==f.cull_enable&&(b?E.enable(2884):E.disable(2884),f.cull_enable=b);b=G.cull_face;b!==f.cull_face&&(E.cullFace(b),f.cull_face=b);b=G.frontFace;b!==f.frontFace&&(E.frontFace(b),
f.frontFace=b);b=G.lineWidth;b!==f.lineWidth&&(E.lineWidth(b),f.lineWidth=b);b=G.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),f.polygonOffset_enable=b);b=Z[0];w=Z[1];if(b!==qa[0]||w!==qa[1])E.polygonOffset(b,w),qa[0]=b,qa[1]=w;b=G.sample_alpha;b!==f.sample_alpha&&(b?E.enable(32926):E.disable(32926),f.sample_alpha=b);b=G.sample_enable;b!==f.sample_enable&&(b?E.enable(32928):E.disable(32928),f.sample_enable=b);b=m[0];w=m[1];if(b!==J[0]||w!==J[1])E.sampleCoverage(b,
w),J[0]=b,J[1]=w;b=G.stencil_enable;b!==f.stencil_enable&&(b?E.enable(2960):E.disable(2960),f.stencil_enable=b);b=G.stencil_mask;b!==f.stencil_mask&&(E.stencilMask(b),f.stencil_mask=b);b=ma[0];w=ma[1];u=ma[2];if(b!==pa[0]||w!==pa[1]||u!==pa[2])E.stencilFunc(b,w,u),pa[0]=b,pa[1]=w,pa[2]=u;b=fa[0];w=fa[1];u=fa[2];r=fa[3];if(b!==Aa[0]||w!==Aa[1]||u!==Aa[2]||r!==Aa[3])E.stencilOpSeparate(b,w,u,r),Aa[0]=b,Aa[1]=w,Aa[2]=u,Aa[3]=r;b=za[0];w=za[1];u=za[2];r=za[3];if(b!==xa[0]||w!==xa[1]||u!==xa[2]||r!==xa[3])E.stencilOpSeparate(b,
w,u,r),xa[0]=b,xa[1]=w,xa[2]=u,xa[3]=r;b=G.scissor_enable;b!==f.scissor_enable&&(b?E.enable(3089):E.disable(3089),f.scissor_enable=b);b=aa[0];w=aa[1];u=aa[2];r=aa[3];if(b!==O[0]||w!==O[1]||u!==O[2]||r!==O[3])E.scissor(b,w,u,r),O[0]=b,O[1]=w,O[2]=u,O[3]=r;b=ka[0];w=ka[1];u=ka[2];r=ka[3];if(b!==oa[0]||w!==oa[1]||u!==oa[2]||r!==oa[3])E.viewport(b,w,u,r),oa[0]=b,oa[1]=w,oa[2]=u,oa[3]=r}E.disable(2929);f.depth_enable=!1;if(b=f.profile)v=performance.now(),L.count++;E.useProgram(e.program);A.setVAO(null);
w=S.location;u=k[w];u.buffer||E.enableVertexAttribArray(w);if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)E.bindBuffer(34962,l.buffer),E.vertexAttribPointer(w,2,l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;w=q.call(this,X,a,0);"number"!==typeof w&&ca.commandRaise(c,N);E.uniform1f(ia.location,w);w=a.offset;d(w)&&2===w.length||ca.commandRaise(F,N);E.uniform2f(t.location,w[0],w[1]);a=C.call(this,X,a,0);d(a)&&4===
a.length||ca.commandRaise(H,N);E.uniform4f(h.location,a[0],a[1],a[2],a[3]);(a=x.elements)?E.bindBuffer(34963,a.buffer.buffer):A.currentVAO&&(a=Y.getElements(A.currentVAO.elements))&&E.bindBuffer(34963,a.buffer.buffer);w=x.primitive;u=x.offset;a?E.drawElements(w,3,a.type,u<<(a.type-5121>>1)):E.drawArrays(w,u,3);f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-v)},scope:function(c,d,g){var b,h,k,m,e,q,t,w,v,A,I,D,E,B,O,J,fa,K,C,p,N;b=G.depth_enable;G.depth_enable=!1;if(h=f.profile)k=performance.now(),
L.count++;m=x.count;x.count=3;e=U.call(this,X,c,g);q=ta[3];ta[3]=e;t=y.call(this,X,c,g);e=ta[5];ta[5]=t;w=c.offset;t=ta[4];ta[4]=w;w=u.buffer;u.buffer=l;v=u.divisor;u.divisor=0;A=u.normalized;u.normalized=!1;I=u.offset;u.offset=0;D=u.size;u.size=0;E=u.state;u.state=1;B=u.stride;u.stride=0;O=u.type;u.type=l.dtype;J=u.w;u.w=0;fa=u.x;u.x=0;K=u.y;u.y=0;C=u.z;u.z=0;p=a.vert;a.vert=2;N=a.frag;a.frag=1;f.dirty=!0;d(X,c,g);G.depth_enable=b;h&&(L.cpuTime+=performance.now()-k);x.count=m;ta[3]=q;ta[5]=e;ta[4]=
t;u.buffer=w;u.divisor=v;u.normalized=A;u.offset=I;u.size=D;u.state=E;u.stride=B;u.type=O;u.w=J;u.x=fa;u.y=K;u.z=C;a.vert=p;a.frag=N;f.dirty=!0},batch:function(a,c){var b,e,q,r;b=D.next;b!==D.cur&&(b?E.bindFramebuffer(36160,b.framebuffer):E.bindFramebuffer(36160,null),D.cur=b);if(f.dirty){var n,z,u;b=G.dither;b!==f.dither&&(b?E.enable(3024):E.disable(3024),f.dither=b);b=G.blend_enable;b!==f.blend_enable&&(b?E.enable(3042):E.disable(3042),f.blend_enable=b);b=ja[0];n=ja[1];z=ja[2];u=ja[3];if(b!==ga[0]||
n!==ga[1]||z!==ga[2]||u!==ga[3])E.blendColor(b,n,z,u),ga[0]=b,ga[1]=n,ga[2]=z,ga[3]=u;b=V[0];n=V[1];if(b!==ea[0]||n!==ea[1])E.blendEquationSeparate(b,n),ea[0]=b,ea[1]=n;b=R[0];n=R[1];z=R[2];u=R[3];if(b!==P[0]||n!==P[1]||z!==P[2]||u!==P[3])E.blendFuncSeparate(b,n,z,u),P[0]=b,P[1]=n,P[2]=z,P[3]=u;b=G.depth_func;b!==f.depth_func&&(E.depthFunc(b),f.depth_func=b);b=M[0];n=M[1];if(b!==K[0]||n!==K[1])E.depthRange(b,n),K[0]=b,K[1]=n;b=G.depth_mask;b!==f.depth_mask&&(E.depthMask(b),f.depth_mask=b);b=B[0];
n=B[1];z=B[2];u=B[3];if(b!==g[0]||n!==g[1]||z!==g[2]||u!==g[3])E.colorMask(b,n,z,u),g[0]=b,g[1]=n,g[2]=z,g[3]=u;b=G.cull_enable;b!==f.cull_enable&&(b?E.enable(2884):E.disable(2884),f.cull_enable=b);b=G.cull_face;b!==f.cull_face&&(E.cullFace(b),f.cull_face=b);b=G.frontFace;b!==f.frontFace&&(E.frontFace(b),f.frontFace=b);b=G.lineWidth;b!==f.lineWidth&&(E.lineWidth(b),f.lineWidth=b);b=G.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?E.enable(32823):E.disable(32823),f.polygonOffset_enable=b);b=Z[0];
n=Z[1];if(b!==qa[0]||n!==qa[1])E.polygonOffset(b,n),qa[0]=b,qa[1]=n;b=G.sample_alpha;b!==f.sample_alpha&&(b?E.enable(32926):E.disable(32926),f.sample_alpha=b);b=G.sample_enable;b!==f.sample_enable&&(b?E.enable(32928):E.disable(32928),f.sample_enable=b);b=m[0];n=m[1];if(b!==J[0]||n!==J[1])E.sampleCoverage(b,n),J[0]=b,J[1]=n;b=G.stencil_enable;b!==f.stencil_enable&&(b?E.enable(2960):E.disable(2960),f.stencil_enable=b);b=G.stencil_mask;b!==f.stencil_mask&&(E.stencilMask(b),f.stencil_mask=b);b=ma[0];
n=ma[1];z=ma[2];if(b!==pa[0]||n!==pa[1]||z!==pa[2])E.stencilFunc(b,n,z),pa[0]=b,pa[1]=n,pa[2]=z;b=fa[0];n=fa[1];z=fa[2];u=fa[3];if(b!==Aa[0]||n!==Aa[1]||z!==Aa[2]||u!==Aa[3])E.stencilOpSeparate(b,n,z,u),Aa[0]=b,Aa[1]=n,Aa[2]=z,Aa[3]=u;b=za[0];n=za[1];z=za[2];u=za[3];if(b!==xa[0]||n!==xa[1]||z!==xa[2]||u!==xa[3])E.stencilOpSeparate(b,n,z,u),xa[0]=b,xa[1]=n,xa[2]=z,xa[3]=u;b=G.scissor_enable;b!==f.scissor_enable&&(b?E.enable(3089):E.disable(3089),f.scissor_enable=b);b=aa[0];n=aa[1];z=aa[2];u=aa[3];
if(b!==O[0]||n!==O[1]||z!==O[2]||u!==O[3])E.scissor(b,n,z,u),O[0]=b,O[1]=n,O[2]=z,O[3]=u;b=ka[0];n=ka[1];z=ka[2];u=ka[3];if(b!==oa[0]||n!==oa[1]||z!==oa[2]||u!==oa[3])E.viewport(b,n,z,u),oa[0]=b,oa[1]=n,oa[2]=z,oa[3]=u}E.disable(2929);f.depth_enable=!1;if(b=f.profile)e=performance.now(),L.count+=c;E.useProgram(p.program);A.setVAO(null);n=S.location;z=k[n];z.buffer||E.enableVertexAttribArray(n);if(z.type!==l.dtype||2!==z.size||z.buffer!==l||!1!==z.normalized||0!==z.offset||0!==z.stride)E.bindBuffer(34962,
l.buffer),E.vertexAttribPointer(n,2,l.dtype,!1,0,0),z.type=l.dtype,z.size=2,z.buffer=l,z.normalized=!1,z.offset=0,z.stride=0;q=ba.call(this,X,r,q);"number"!==typeof q&&ca.commandRaise(w,N);E.uniform1f(ia.location,q);(n=x.elements)?E.bindBuffer(34963,n.buffer.buffer):A.currentVAO&&(n=Y.getElements(A.currentVAO.elements))&&E.bindBuffer(34963,n.buffer.buffer);z=x.primitive;u=x.offset;for(q=0;q<c;++q){r=a[q];var y,C,F,ha,I,sa,Ba,ra,H;y=r.offset;d(y)&&2===y.length||ca.commandRaise(T,N);C=y[0];y=y[1];q&&
F===C&&ha===y||(F=C,ha=y,E.uniform2f(t.location,C,y));I=v.call(this,X,r,q);d(I)&&4===I.length||ca.commandRaise(Q,N);r=I[0];C=I[1];y=I[2];I=I[3];q&&sa===r&&Ba===C&&ra===y&&H===I||(sa=r,Ba=C,ra=y,H=I,E.uniform4f(h.location,r,C,y,I));n?E.drawElements(z,3,n.type,u<<(n.type-5121>>1)):E.drawArrays(z,u,3)}f.dirty=!0;A.setVAO(null);b&&(L.cpuTime+=performance.now()-e)}}},"$23,model,position,projection,view":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x){var Y,D,E,d,G,a,ta,A,ja,ga,V,ea,
R,P,B,g,M,K,Z,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca;Y=b.attributes;D=b.context;E=b.current;d=b.draw;G=b.framebuffer;a=b.gl;ta=b.isArrayLike;A=b.next;ja=b.shader;ga=b.uniforms;V=b.vao;ea=A.blend_color;R=E.blend_color;P=A.blend_equation;B=E.blend_equation;g=A.blend_func;M=E.blend_func;K=A.colorMask;Z=E.colorMask;qa=A.depth_range;m=E.depth_range;J=A.polygonOffset_offset;aa=E.polygonOffset_offset;O=A.sample_coverage;ma=E.sample_coverage;pa=A.scissor_box;za=E.scissor_box;xa=A.stencil_func;
fa=E.stencil_func;Aa=A.stencil_opBack;ka=E.stencil_opBack;oa=A.stencil_opFront;ya=E.stencil_opFront;Ja=A.viewport;na=E.viewport;Za=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);Ta=new Float32Array(16);r=new Float32Array(16);n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];z=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);va=new Float32Array(16);Ca=new Float32Array(16);return{draw:function(d){var b,h,n,t;b=G.next;b!==G.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),G.cur=
b);if(E.dirty){var z;b=A.dither;b!==E.dither&&(b?a.enable(3024):a.disable(3024),E.dither=b);b=A.blend_enable;b!==E.blend_enable&&(b?a.enable(3042):a.disable(3042),E.blend_enable=b);b=ea[0];n=ea[1];t=ea[2];z=ea[3];if(b!==R[0]||n!==R[1]||t!==R[2]||z!==R[3])a.blendColor(b,n,t,z),R[0]=b,R[1]=n,R[2]=t,R[3]=z;b=P[0];n=P[1];if(b!==B[0]||n!==B[1])a.blendEquationSeparate(b,n),B[0]=b,B[1]=n;b=g[0];n=g[1];t=g[2];z=g[3];if(b!==M[0]||n!==M[1]||t!==M[2]||z!==M[3])a.blendFuncSeparate(b,n,t,z),M[0]=b,M[1]=n,M[2]=
t,M[3]=z;b=A.depth_enable;b!==E.depth_enable&&(b?a.enable(2929):a.disable(2929),E.depth_enable=b);b=A.depth_func;b!==E.depth_func&&(a.depthFunc(b),E.depth_func=b);b=qa[0];n=qa[1];if(b!==m[0]||n!==m[1])a.depthRange(b,n),m[0]=b,m[1]=n;b=A.depth_mask;b!==E.depth_mask&&(a.depthMask(b),E.depth_mask=b);b=K[0];n=K[1];t=K[2];z=K[3];if(b!==Z[0]||n!==Z[1]||t!==Z[2]||z!==Z[3])a.colorMask(b,n,t,z),Z[0]=b,Z[1]=n,Z[2]=t,Z[3]=z;b=A.cull_enable;b!==E.cull_enable&&(b?a.enable(2884):a.disable(2884),E.cull_enable=b);
b=A.cull_face;b!==E.cull_face&&(a.cullFace(b),E.cull_face=b);b=A.frontFace;b!==E.frontFace&&(a.frontFace(b),E.frontFace=b);b=A.lineWidth;b!==E.lineWidth&&(a.lineWidth(b),E.lineWidth=b);b=A.polygonOffset_enable;b!==E.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),E.polygonOffset_enable=b);b=J[0];n=J[1];if(b!==aa[0]||n!==aa[1])a.polygonOffset(b,n),aa[0]=b,aa[1]=n;b=A.sample_alpha;b!==E.sample_alpha&&(b?a.enable(32926):a.disable(32926),E.sample_alpha=b);b=A.sample_enable;b!==E.sample_enable&&
(b?a.enable(32928):a.disable(32928),E.sample_enable=b);b=O[0];n=O[1];if(b!==ma[0]||n!==ma[1])a.sampleCoverage(b,n),ma[0]=b,ma[1]=n;b=A.stencil_enable;b!==E.stencil_enable&&(b?a.enable(2960):a.disable(2960),E.stencil_enable=b);b=A.stencil_mask;b!==E.stencil_mask&&(a.stencilMask(b),E.stencil_mask=b);b=xa[0];n=xa[1];t=xa[2];if(b!==fa[0]||n!==fa[1]||t!==fa[2])a.stencilFunc(b,n,t),fa[0]=b,fa[1]=n,fa[2]=t;b=oa[0];n=oa[1];t=oa[2];z=oa[3];if(b!==ya[0]||n!==ya[1]||t!==ya[2]||z!==ya[3])a.stencilOpSeparate(b,
n,t,z),ya[0]=b,ya[1]=n,ya[2]=t,ya[3]=z;b=Aa[0];n=Aa[1];t=Aa[2];z=Aa[3];if(b!==ka[0]||n!==ka[1]||t!==ka[2]||z!==ka[3])a.stencilOpSeparate(b,n,t,z),ka[0]=b,ka[1]=n,ka[2]=t,ka[3]=z;b=A.scissor_enable;b!==E.scissor_enable&&(b?a.enable(3089):a.disable(3089),E.scissor_enable=b);b=pa[0];n=pa[1];t=pa[2];z=pa[3];if(b!==za[0]||n!==za[1]||t!==za[2]||z!==za[3])a.scissor(b,n,t,z),za[0]=b,za[1]=n,za[2]=t,za[3]=z;b=Ja[0];n=Ja[1];t=Ja[2];z=Ja[3];if(b!==na[0]||n!==na[1]||t!==na[2]||z!==na[3])a.viewport(b,n,t,z),na[0]=
b,na[1]=n,na[2]=t,na[3]=z;E.dirty=!1}if(b=E.profile)h=performance.now(),L.count++;a.useProgram(e.program);V.setVAO(null);n=X.location;t=Y[n];t.buffer||a.enableVertexAttribArray(n);if(t.type!==l.dtype||3!==t.size||t.buffer!==l||!1!==t.normalized||0!==t.offset||0!==t.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(n,3,l.dtype,!1,0,0),t.type=l.dtype,t.size=3,t.buffer=l,t.normalized=!1,t.offset=0,t.stride=0;a.uniformMatrix4fv(k.location,!1,Za);n=q.call(this,D,d,0);ta(n)&&16===n.length||ca.commandRaise(c,
N);a.uniformMatrix4fv(x.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ta[0]=n[0],Ta[1]=n[1],Ta[2]=n[2],Ta[3]=n[3],Ta[4]=n[4],Ta[5]=n[5],Ta[6]=n[6],Ta[7]=n[7],Ta[8]=n[8],Ta[9]=n[9],Ta[10]=n[10],Ta[11]=n[11],Ta[12]=n[12],Ta[13]=n[13],Ta[14]=n[14],Ta[15]=n[15],Ta));d=F.call(this,D,d,0);ta(d)&&16===d.length||ca.commandRaise(C,N);a.uniformMatrix4fv(f.location,!1,Array.isArray(d)||d instanceof Float32Array?d:(r[0]=d[0],r[1]=d[1],r[2]=d[2],r[3]=d[3],r[4]=d[4],r[5]=d[5],r[6]=d[6],r[7]=d[7],r[8]=
d[8],r[9]=d[9],r[10]=d[10],r[11]=d[11],r[12]=d[12],r[13]=d[13],r[14]=d[14],r[15]=d[15],r));H&&a.bindBuffer(34963,H.buffer.buffer);d=H.primType;n=H.vertCount-0;0<=n||ca.commandRaise(U,N);n&&(a.drawElements(d,n,H.type,0<<(H.type-5121>>1)),V.setVAO(null),b&&(L.cpuTime+=performance.now()-h))},scope:function(a,c,b){var f,g,h,k,m,r,e,q,t,z,v,x,A,B,O,G,J,fa,na,K,C,Za,M;if(f=E.profile)g=performance.now(),L.count++;h=d.elements;d.elements=y;k=d.offset;d.offset=0;m=y.vertCount-0;0<=m||ca.commandRaise(u,N);
r=d.count;d.count=m;e=y.primType;m=d.primitive;d.primitive=e;e=ga[3];ga[3]=n;q=p.call(this,D,a,b);t=ga[5];ga[5]=q;z=ba.call(this,D,a,b);q=ga[4];ga[4]=z;z=w.buffer;w.buffer=l;v=w.divisor;w.divisor=0;x=w.normalized;w.normalized=!1;A=w.offset;w.offset=0;B=w.size;w.size=0;O=w.state;w.state=1;G=w.stride;w.stride=0;J=w.type;w.type=l.dtype;fa=w.w;w.w=0;na=w.x;w.x=0;K=w.y;w.y=0;C=w.z;w.z=0;Za=ja.vert;ja.vert=2;M=ja.frag;ja.frag=1;c(D,a,b);f&&(L.cpuTime+=performance.now()-g);d.elements=h;d.offset=k;d.count=
r;d.primitive=m;ga[3]=e;ga[5]=t;ga[4]=q;w.buffer=z;w.divisor=v;w.normalized=x;w.offset=A;w.size=B;w.state=O;w.stride=G;w.type=J;w.w=fa;w.x=na;w.y=K;w.z=C;ja.vert=Za;ja.frag=M},batch:function(d,c){var b,r,n;b=G.next;b!==G.cur&&(b?a.bindFramebuffer(36160,b.framebuffer):a.bindFramebuffer(36160,null),G.cur=b);if(E.dirty){var e,q,w;b=A.dither;b!==E.dither&&(b?a.enable(3024):a.disable(3024),E.dither=b);b=A.blend_enable;b!==E.blend_enable&&(b?a.enable(3042):a.disable(3042),E.blend_enable=b);b=ea[0];e=ea[1];
q=ea[2];w=ea[3];if(b!==R[0]||e!==R[1]||q!==R[2]||w!==R[3])a.blendColor(b,e,q,w),R[0]=b,R[1]=e,R[2]=q,R[3]=w;b=P[0];e=P[1];if(b!==B[0]||e!==B[1])a.blendEquationSeparate(b,e),B[0]=b,B[1]=e;b=g[0];e=g[1];q=g[2];w=g[3];if(b!==M[0]||e!==M[1]||q!==M[2]||w!==M[3])a.blendFuncSeparate(b,e,q,w),M[0]=b,M[1]=e,M[2]=q,M[3]=w;b=A.depth_enable;b!==E.depth_enable&&(b?a.enable(2929):a.disable(2929),E.depth_enable=b);b=A.depth_func;b!==E.depth_func&&(a.depthFunc(b),E.depth_func=b);b=qa[0];e=qa[1];if(b!==m[0]||e!==
m[1])a.depthRange(b,e),m[0]=b,m[1]=e;b=A.depth_mask;b!==E.depth_mask&&(a.depthMask(b),E.depth_mask=b);b=K[0];e=K[1];q=K[2];w=K[3];if(b!==Z[0]||e!==Z[1]||q!==Z[2]||w!==Z[3])a.colorMask(b,e,q,w),Z[0]=b,Z[1]=e,Z[2]=q,Z[3]=w;b=A.cull_enable;b!==E.cull_enable&&(b?a.enable(2884):a.disable(2884),E.cull_enable=b);b=A.cull_face;b!==E.cull_face&&(a.cullFace(b),E.cull_face=b);b=A.frontFace;b!==E.frontFace&&(a.frontFace(b),E.frontFace=b);b=A.lineWidth;b!==E.lineWidth&&(a.lineWidth(b),E.lineWidth=b);b=A.polygonOffset_enable;
b!==E.polygonOffset_enable&&(b?a.enable(32823):a.disable(32823),E.polygonOffset_enable=b);b=J[0];e=J[1];if(b!==aa[0]||e!==aa[1])a.polygonOffset(b,e),aa[0]=b,aa[1]=e;b=A.sample_alpha;b!==E.sample_alpha&&(b?a.enable(32926):a.disable(32926),E.sample_alpha=b);b=A.sample_enable;b!==E.sample_enable&&(b?a.enable(32928):a.disable(32928),E.sample_enable=b);b=O[0];e=O[1];if(b!==ma[0]||e!==ma[1])a.sampleCoverage(b,e),ma[0]=b,ma[1]=e;b=A.stencil_enable;b!==E.stencil_enable&&(b?a.enable(2960):a.disable(2960),
E.stencil_enable=b);b=A.stencil_mask;b!==E.stencil_mask&&(a.stencilMask(b),E.stencil_mask=b);b=xa[0];e=xa[1];q=xa[2];if(b!==fa[0]||e!==fa[1]||q!==fa[2])a.stencilFunc(b,e,q),fa[0]=b,fa[1]=e,fa[2]=q;b=oa[0];e=oa[1];q=oa[2];w=oa[3];if(b!==ya[0]||e!==ya[1]||q!==ya[2]||w!==ya[3])a.stencilOpSeparate(b,e,q,w),ya[0]=b,ya[1]=e,ya[2]=q,ya[3]=w;b=Aa[0];e=Aa[1];q=Aa[2];w=Aa[3];if(b!==ka[0]||e!==ka[1]||q!==ka[2]||w!==ka[3])a.stencilOpSeparate(b,e,q,w),ka[0]=b,ka[1]=e,ka[2]=q,ka[3]=w;b=A.scissor_enable;b!==E.scissor_enable&&
(b?a.enable(3089):a.disable(3089),E.scissor_enable=b);b=pa[0];e=pa[1];q=pa[2];w=pa[3];if(b!==za[0]||e!==za[1]||q!==za[2]||w!==za[3])a.scissor(b,e,q,w),za[0]=b,za[1]=e,za[2]=q,za[3]=w;b=Ja[0];e=Ja[1];q=Ja[2];w=Ja[3];if(b!==na[0]||e!==na[1]||q!==na[2]||w!==na[3])a.viewport(b,e,q,w),na[0]=b,na[1]=e,na[2]=q,na[3]=w;E.dirty=!1}if(b=E.profile)r=performance.now(),L.count+=c;a.useProgram(T.program);V.setVAO(null);e=X.location;q=Y[e];q.buffer||a.enableVertexAttribArray(e);if(q.type!==l.dtype||3!==q.size||
q.buffer!==l||!1!==q.normalized||0!==q.offset||0!==q.stride)a.bindBuffer(34962,l.buffer),a.vertexAttribPointer(e,3,l.dtype,!1,0,0),q.type=l.dtype,q.size=3,q.buffer=l,q.normalized=!1,q.offset=0,q.stride=0;a.uniformMatrix4fv(k.location,!1,z);e=v.call(this,D,void 0,n);ta(e)&&16===e.length||ca.commandRaise(Q,N);a.uniformMatrix4fv(x.location,!1,Array.isArray(e)||e instanceof Float32Array?e:(va[0]=e[0],va[1]=e[1],va[2]=e[2],va[3]=e[3],va[4]=e[4],va[5]=e[5],va[6]=e[6],va[7]=e[7],va[8]=e[8],va[9]=e[9],va[10]=
e[10],va[11]=e[11],va[12]=e[12],va[13]=e[13],va[14]=e[14],va[15]=e[15],va));n=ia.call(this,D,void 0,n);ta(n)&&16===n.length||ca.commandRaise(h,N);a.uniformMatrix4fv(f.location,!1,Array.isArray(n)||n instanceof Float32Array?n:(Ca[0]=n[0],Ca[1]=n[1],Ca[2]=n[2],Ca[3]=n[3],Ca[4]=n[4],Ca[5]=n[5],Ca[6]=n[6],Ca[7]=n[7],Ca[8]=n[8],Ca[9]=n[9],Ca[10]=n[10],Ca[11]=n[11],Ca[12]=n[12],Ca[13]=n[13],Ca[14]=n[14],Ca[15]=n[15],Ca));t&&a.bindBuffer(34963,t.buffer.buffer);e=t.primType;q=t.vertCount-0;0<=q||ca.commandRaise(S,
N);for(n=0;n<c;++n)q&&a.drawElements(e,q,t.type,0<<(t.type-5121>>1));V.setVAO(null);b&&(L.cpuTime+=performance.now()-r)}}},$20:function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia){var h,t,S,k,X,f,x,Y,D,E,d,G,a,ta,A,ja,ga,V,ea,R,P,B,g,M,K,Z,qa,m,J,aa,O,ma,pa,za;h=b.context;t=b.current;S=b.framebuffer;k=b.gl;X=b.next;f=b.shader;x=b.uniforms;Y=b.vao;D=X.blend_color;E=t.blend_color;d=X.blend_equation;G=t.blend_equation;a=X.blend_func;ta=t.blend_func;A=X.colorMask;ja=t.colorMask;ga=X.depth_range;V=t.depth_range;
ea=X.polygonOffset_offset;R=t.polygonOffset_offset;P=X.sample_coverage;B=t.sample_coverage;g=X.scissor_box;M=t.scissor_box;K=X.stencil_func;Z=t.stencil_func;qa=X.stencil_opBack;m=t.stencil_opBack;J=X.stencil_opFront;aa=t.stencil_opFront;O=X.viewport;ma=t.viewport;pa={};za={};return{draw:function(b){var w,u,v,x,y,p,na,Za,Q,r,n,z,H;w=h.center;u=h.distance;v=h.eye;x=h.phi;y=h.projection;p=q.call(this,h,b,0);na=h.theta;Za=h.up;Q=h.view;h.center=e;h.distance=2.302585092994046;h.eye=l;h.phi=0;h.projection=
p;h.theta=0;h.up=c;h.view=F;p=S.next;p!==S.cur&&(p?k.bindFramebuffer(36160,p.framebuffer):k.bindFramebuffer(36160,null),S.cur=p);if(t.dirty){p=X.dither;p!==t.dither&&(p?k.enable(3024):k.disable(3024),t.dither=p);p=X.blend_enable;p!==t.blend_enable&&(p?k.enable(3042):k.disable(3042),t.blend_enable=p);p=D[0];n=D[1];z=D[2];H=D[3];if(p!==E[0]||n!==E[1]||z!==E[2]||H!==E[3])k.blendColor(p,n,z,H),E[0]=p,E[1]=n,E[2]=z,E[3]=H;p=d[0];n=d[1];if(p!==G[0]||n!==G[1])k.blendEquationSeparate(p,n),G[0]=p,G[1]=n;p=
a[0];n=a[1];z=a[2];H=a[3];if(p!==ta[0]||n!==ta[1]||z!==ta[2]||H!==ta[3])k.blendFuncSeparate(p,n,z,H),ta[0]=p,ta[1]=n,ta[2]=z,ta[3]=H;p=X.depth_enable;p!==t.depth_enable&&(p?k.enable(2929):k.disable(2929),t.depth_enable=p);p=X.depth_func;p!==t.depth_func&&(k.depthFunc(p),t.depth_func=p);p=ga[0];n=ga[1];if(p!==V[0]||n!==V[1])k.depthRange(p,n),V[0]=p,V[1]=n;p=X.depth_mask;p!==t.depth_mask&&(k.depthMask(p),t.depth_mask=p);p=A[0];n=A[1];z=A[2];H=A[3];if(p!==ja[0]||n!==ja[1]||z!==ja[2]||H!==ja[3])k.colorMask(p,
n,z,H),ja[0]=p,ja[1]=n,ja[2]=z,ja[3]=H;p=X.cull_enable;p!==t.cull_enable&&(p?k.enable(2884):k.disable(2884),t.cull_enable=p);p=X.cull_face;p!==t.cull_face&&(k.cullFace(p),t.cull_face=p);p=X.frontFace;p!==t.frontFace&&(k.frontFace(p),t.frontFace=p);p=X.lineWidth;p!==t.lineWidth&&(k.lineWidth(p),t.lineWidth=p);p=X.polygonOffset_enable;p!==t.polygonOffset_enable&&(p?k.enable(32823):k.disable(32823),t.polygonOffset_enable=p);p=ea[0];n=ea[1];if(p!==R[0]||n!==R[1])k.polygonOffset(p,n),R[0]=p,R[1]=n;p=X.sample_alpha;
p!==t.sample_alpha&&(p?k.enable(32926):k.disable(32926),t.sample_alpha=p);p=X.sample_enable;p!==t.sample_enable&&(p?k.enable(32928):k.disable(32928),t.sample_enable=p);p=P[0];n=P[1];if(p!==B[0]||n!==B[1])k.sampleCoverage(p,n),B[0]=p,B[1]=n;p=X.stencil_enable;p!==t.stencil_enable&&(p?k.enable(2960):k.disable(2960),t.stencil_enable=p);p=X.stencil_mask;p!==t.stencil_mask&&(k.stencilMask(p),t.stencil_mask=p);p=K[0];n=K[1];z=K[2];if(p!==Z[0]||n!==Z[1]||z!==Z[2])k.stencilFunc(p,n,z),Z[0]=p,Z[1]=n,Z[2]=
z;p=J[0];n=J[1];z=J[2];H=J[3];if(p!==aa[0]||n!==aa[1]||z!==aa[2]||H!==aa[3])k.stencilOpSeparate(p,n,z,H),aa[0]=p,aa[1]=n,aa[2]=z,aa[3]=H;p=qa[0];n=qa[1];z=qa[2];H=qa[3];if(p!==m[0]||n!==m[1]||z!==m[2]||H!==m[3])k.stencilOpSeparate(p,n,z,H),m[0]=p,m[1]=n,m[2]=z,m[3]=H;p=X.scissor_enable;p!==t.scissor_enable&&(p?k.enable(3089):k.disable(3089),t.scissor_enable=p);p=g[0];n=g[1];z=g[2];H=g[3];if(p!==M[0]||n!==M[1]||z!==M[2]||H!==M[3])k.scissor(p,n,z,H),M[0]=p,M[1]=n,M[2]=z,M[3]=H;p=O[0];n=O[1];z=O[2];
H=O[3];if(p!==ma[0]||n!==ma[1]||z!==ma[2]||H!==ma[3])k.viewport(p,n,z,H),ma[0]=p,ma[1]=n,ma[2]=z,ma[3]=H;t.dirty=!1}if(p=t.profile)r=performance.now(),L.count++;n=f.program(f.vert,f.frag,N);k.useProgram(n.program);Y.setVAO(null);z=n.id;(H=pa[z])||(H=pa[z]=C(n));H.call(this,b);Y.setVAO(null);h.center=w;h.distance=u;h.eye=v;h.phi=x;h.projection=y;h.theta=na;h.up=Za;h.view=Q;p&&(L.cpuTime+=performance.now()-r)},scope:function(a,d,c){var b,f,g,k,l,m,e,r,n,q,w,v,A,D,E,I,B,O,G;b=h.center;f=h.distance;g=
h.eye;k=h.phi;l=h.projection;m=y.call(this,h,a,c);e=h.theta;r=h.up;n=h.view;h.center=H;h.distance=2.302585092994046;h.eye=U;h.phi=0;h.projection=m;h.theta=0;h.up=u;h.view=p;if(m=t.profile)q=performance.now(),L.count++;w=h.center;v=x[1];x[1]=w;A=h.distance;w=x[2];x[2]=A;D=h.eye;A=x[3];x[3]=D;E=h.phi;D=x[4];x[4]=E;I=h.projection;E=x[5];x[5]=I;B=h.theta;I=x[6];x[6]=B;O=h.up;B=x[7];x[7]=O;O=h.view;G=x[8];x[8]=O;d(h,a,c);h.center=b;h.distance=f;h.eye=g;h.phi=k;h.projection=l;h.theta=e;h.up=r;h.view=n;
m&&(L.cpuTime+=performance.now()-q);x[1]=v;x[2]=w;x[3]=A;x[4]=D;x[5]=E;x[6]=I;x[7]=B;x[8]=G},batch:function(c,b){var l,e,q,u,x,p,y,C,r,n,z,H,F;l=h.center;e=h.distance;q=h.eye;u=h.phi;x=h.projection;p=T.call(this,h,c,0);y=h.theta;C=h.up;r=h.view;h.center=ba;h.distance=2.302585092994046;h.eye=w;h.phi=0;h.projection=p;h.theta=0;h.up=v;h.view=Q;p=S.next;p!==S.cur&&(p?k.bindFramebuffer(36160,p.framebuffer):k.bindFramebuffer(36160,null),S.cur=p);if(t.dirty){p=X.dither;p!==t.dither&&(p?k.enable(3024):k.disable(3024),
t.dither=p);p=X.blend_enable;p!==t.blend_enable&&(p?k.enable(3042):k.disable(3042),t.blend_enable=p);p=D[0];z=D[1];H=D[2];F=D[3];if(p!==E[0]||z!==E[1]||H!==E[2]||F!==E[3])k.blendColor(p,z,H,F),E[0]=p,E[1]=z,E[2]=H,E[3]=F;p=d[0];z=d[1];if(p!==G[0]||z!==G[1])k.blendEquationSeparate(p,z),G[0]=p,G[1]=z;p=a[0];z=a[1];H=a[2];F=a[3];if(p!==ta[0]||z!==ta[1]||H!==ta[2]||F!==ta[3])k.blendFuncSeparate(p,z,H,F),ta[0]=p,ta[1]=z,ta[2]=H,ta[3]=F;p=X.depth_enable;p!==t.depth_enable&&(p?k.enable(2929):k.disable(2929),
t.depth_enable=p);p=X.depth_func;p!==t.depth_func&&(k.depthFunc(p),t.depth_func=p);p=ga[0];z=ga[1];if(p!==V[0]||z!==V[1])k.depthRange(p,z),V[0]=p,V[1]=z;p=X.depth_mask;p!==t.depth_mask&&(k.depthMask(p),t.depth_mask=p);p=A[0];z=A[1];H=A[2];F=A[3];if(p!==ja[0]||z!==ja[1]||H!==ja[2]||F!==ja[3])k.colorMask(p,z,H,F),ja[0]=p,ja[1]=z,ja[2]=H,ja[3]=F;p=X.cull_enable;p!==t.cull_enable&&(p?k.enable(2884):k.disable(2884),t.cull_enable=p);p=X.cull_face;p!==t.cull_face&&(k.cullFace(p),t.cull_face=p);p=X.frontFace;
p!==t.frontFace&&(k.frontFace(p),t.frontFace=p);p=X.lineWidth;p!==t.lineWidth&&(k.lineWidth(p),t.lineWidth=p);p=X.polygonOffset_enable;p!==t.polygonOffset_enable&&(p?k.enable(32823):k.disable(32823),t.polygonOffset_enable=p);p=ea[0];z=ea[1];if(p!==R[0]||z!==R[1])k.polygonOffset(p,z),R[0]=p,R[1]=z;p=X.sample_alpha;p!==t.sample_alpha&&(p?k.enable(32926):k.disable(32926),t.sample_alpha=p);p=X.sample_enable;p!==t.sample_enable&&(p?k.enable(32928):k.disable(32928),t.sample_enable=p);p=P[0];z=P[1];if(p!==
B[0]||z!==B[1])k.sampleCoverage(p,z),B[0]=p,B[1]=z;p=X.stencil_enable;p!==t.stencil_enable&&(p?k.enable(2960):k.disable(2960),t.stencil_enable=p);p=X.stencil_mask;p!==t.stencil_mask&&(k.stencilMask(p),t.stencil_mask=p);p=K[0];z=K[1];H=K[2];if(p!==Z[0]||z!==Z[1]||H!==Z[2])k.stencilFunc(p,z,H),Z[0]=p,Z[1]=z,Z[2]=H;p=J[0];z=J[1];H=J[2];F=J[3];if(p!==aa[0]||z!==aa[1]||H!==aa[2]||F!==aa[3])k.stencilOpSeparate(p,z,H,F),aa[0]=p,aa[1]=z,aa[2]=H,aa[3]=F;p=qa[0];z=qa[1];H=qa[2];F=qa[3];if(p!==m[0]||z!==m[1]||
H!==m[2]||F!==m[3])k.stencilOpSeparate(p,z,H,F),m[0]=p,m[1]=z,m[2]=H,m[3]=F;p=X.scissor_enable;p!==t.scissor_enable&&(p?k.enable(3089):k.disable(3089),t.scissor_enable=p);p=g[0];z=g[1];H=g[2];F=g[3];if(p!==M[0]||z!==M[1]||H!==M[2]||F!==M[3])k.scissor(p,z,H,F),M[0]=p,M[1]=z,M[2]=H,M[3]=F;p=O[0];z=O[1];H=O[2];F=O[3];if(p!==ma[0]||z!==ma[1]||H!==ma[2]||F!==ma[3])k.viewport(p,z,H,F),ma[0]=p,ma[1]=z,ma[2]=H,ma[3]=F;t.dirty=!1}if(p=t.profile)n=performance.now(),L.count+=b;z=f.program(f.vert,f.frag,N);k.useProgram(z.program);
Y.setVAO(null);H=z.id;(F=za[H])||(F=za[H]=ia(z));F.call(this,c,b);Y.setVAO(null);h.center=l;h.distance=e;h.eye=q;h.phi=u;h.projection=x;h.theta=y;h.up=C;h.view=r;p&&(L.cpuTime+=performance.now()-n)}}},"$27,position,projection,tex,uv,view":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G){var a,ga,A,ja,Z,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na,Za,Ta,r,n,z,va,Ca,Ra,Hb;a=b.attributes;ga=b.context;A=b.current;ja=b.draw;Z=b.framebuffer;V=b.gl;ea=b.isArrayLike;
R=b.next;P=b.shader;B=b.uniforms;g=b.vao;M=R.blend_color;K=A.blend_color;Da=R.blend_equation;qa=A.blend_equation;m=R.blend_func;J=A.blend_func;aa=R.colorMask;O=A.colorMask;ma=R.depth_range;pa=A.depth_range;za=R.polygonOffset_offset;xa=A.polygonOffset_offset;fa=R.sample_coverage;Aa=A.sample_coverage;ka=R.scissor_box;oa=A.scissor_box;ya=R.stencil_func;Ja=A.stencil_func;na=R.stencil_opBack;Za=A.stencil_opBack;Ta=R.stencil_opFront;r=A.stencil_opFront;n=R.viewport;z=A.viewport;va=new Float32Array(16);
Ca=new Float32Array(16);Ra=new Float32Array(16);Hb=new Float32Array(16);return{draw:function(b){var f,h,k,t;f=Z.next;f!==Z.cur&&(f?V.bindFramebuffer(36160,f.framebuffer):V.bindFramebuffer(36160,null),Z.cur=f);if(A.dirty){var w;f=R.dither;f!==A.dither&&(f?V.enable(3024):V.disable(3024),A.dither=f);f=R.blend_enable;f!==A.blend_enable&&(f?V.enable(3042):V.disable(3042),A.blend_enable=f);f=M[0];k=M[1];t=M[2];w=M[3];if(f!==K[0]||k!==K[1]||t!==K[2]||w!==K[3])V.blendColor(f,k,t,w),K[0]=f,K[1]=k,K[2]=t,K[3]=
w;f=Da[0];k=Da[1];if(f!==qa[0]||k!==qa[1])V.blendEquationSeparate(f,k),qa[0]=f,qa[1]=k;f=m[0];k=m[1];t=m[2];w=m[3];if(f!==J[0]||k!==J[1]||t!==J[2]||w!==J[3])V.blendFuncSeparate(f,k,t,w),J[0]=f,J[1]=k,J[2]=t,J[3]=w;f=R.depth_enable;f!==A.depth_enable&&(f?V.enable(2929):V.disable(2929),A.depth_enable=f);f=R.depth_func;f!==A.depth_func&&(V.depthFunc(f),A.depth_func=f);f=ma[0];k=ma[1];if(f!==pa[0]||k!==pa[1])V.depthRange(f,k),pa[0]=f,pa[1]=k;f=R.depth_mask;f!==A.depth_mask&&(V.depthMask(f),A.depth_mask=
f);f=aa[0];k=aa[1];t=aa[2];w=aa[3];if(f!==O[0]||k!==O[1]||t!==O[2]||w!==O[3])V.colorMask(f,k,t,w),O[0]=f,O[1]=k,O[2]=t,O[3]=w;f=R.cull_enable;f!==A.cull_enable&&(f?V.enable(2884):V.disable(2884),A.cull_enable=f);f=R.cull_face;f!==A.cull_face&&(V.cullFace(f),A.cull_face=f);f=R.frontFace;f!==A.frontFace&&(V.frontFace(f),A.frontFace=f);f=R.lineWidth;f!==A.lineWidth&&(V.lineWidth(f),A.lineWidth=f);f=R.polygonOffset_enable;f!==A.polygonOffset_enable&&(f?V.enable(32823):V.disable(32823),A.polygonOffset_enable=
f);f=za[0];k=za[1];if(f!==xa[0]||k!==xa[1])V.polygonOffset(f,k),xa[0]=f,xa[1]=k;f=R.sample_alpha;f!==A.sample_alpha&&(f?V.enable(32926):V.disable(32926),A.sample_alpha=f);f=R.sample_enable;f!==A.sample_enable&&(f?V.enable(32928):V.disable(32928),A.sample_enable=f);f=fa[0];k=fa[1];if(f!==Aa[0]||k!==Aa[1])V.sampleCoverage(f,k),Aa[0]=f,Aa[1]=k;f=R.stencil_enable;f!==A.stencil_enable&&(f?V.enable(2960):V.disable(2960),A.stencil_enable=f);f=R.stencil_mask;f!==A.stencil_mask&&(V.stencilMask(f),A.stencil_mask=
f);f=ya[0];k=ya[1];t=ya[2];if(f!==Ja[0]||k!==Ja[1]||t!==Ja[2])V.stencilFunc(f,k,t),Ja[0]=f,Ja[1]=k,Ja[2]=t;f=Ta[0];k=Ta[1];t=Ta[2];w=Ta[3];if(f!==r[0]||k!==r[1]||t!==r[2]||w!==r[3])V.stencilOpSeparate(f,k,t,w),r[0]=f,r[1]=k,r[2]=t,r[3]=w;f=na[0];k=na[1];t=na[2];w=na[3];if(f!==Za[0]||k!==Za[1]||t!==Za[2]||w!==Za[3])V.stencilOpSeparate(f,k,t,w),Za[0]=f,Za[1]=k,Za[2]=t,Za[3]=w;f=R.scissor_enable;f!==A.scissor_enable&&(f?V.enable(3089):V.disable(3089),A.scissor_enable=f);f=ka[0];k=ka[1];t=ka[2];w=ka[3];
if(f!==oa[0]||k!==oa[1]||t!==oa[2]||w!==oa[3])V.scissor(f,k,t,w),oa[0]=f,oa[1]=k,oa[2]=t,oa[3]=w;f=n[0];k=n[1];t=n[2];w=n[3];if(f!==z[0]||k!==z[1]||t!==z[2]||w!==z[3])V.viewport(f,k,t,w),z[0]=f,z[1]=k,z[2]=t,z[3]=w;A.dirty=!1}if(f=A.profile)h=performance.now(),L.count++;V.useProgram(e.program);g.setVAO(null);k=Y.location;t=a[k];t.buffer||V.enableVertexAttribArray(k);if(t.type!==l.dtype||3!==t.size||t.buffer!==l||!1!==t.normalized||0!==t.offset||0!==t.stride)V.bindBuffer(34962,l.buffer),V.vertexAttribPointer(k,
3,l.dtype,!1,0,0),t.type=l.dtype,t.size=3,t.buffer=l,t.normalized=!1,t.offset=0,t.stride=0;k=d.location;t=a[k];t.buffer||V.enableVertexAttribArray(k);if(t.type!==q.dtype||2!==t.size||t.buffer!==q||!1!==t.normalized||0!==t.offset||0!==t.stride)V.bindBuffer(34962,q.buffer),V.vertexAttribPointer(k,2,q.dtype,!1,0,0),t.type=q.dtype,t.size=2,t.buffer=q,t.normalized=!1,t.offset=0,t.stride=0;k=c.call(this,ga,b,0);ea(k)&&16===k.length||ca.commandRaise(F,N);V.uniformMatrix4fv(D.location,!1,Array.isArray(k)||
k instanceof Float32Array?k:(va[0]=k[0],va[1]=k[1],va[2]=k[2],va[3]=k[3],va[4]=k[4],va[5]=k[5],va[6]=k[6],va[7]=k[7],va[8]=k[8],va[9]=k[9],va[10]=k[10],va[11]=k[11],va[12]=k[12],va[13]=k[13],va[14]=k[14],va[15]=k[15],va));k=C.call(this,ga,b,0);ea(k)&&16===k.length||ca.commandRaise(H,N);V.uniformMatrix4fv(G.location,!1,Array.isArray(k)||k instanceof Float32Array?k:(Ca[0]=k[0],Ca[1]=k[1],Ca[2]=k[2],Ca[3]=k[3],Ca[4]=k[4],Ca[5]=k[5],Ca[6]=k[6],Ca[7]=k[7],Ca[8]=k[8],Ca[9]=k[9],Ca[10]=k[10],Ca[11]=k[11],
Ca[12]=k[12],Ca[13]=k[13],Ca[14]=k[14],Ca[15]=k[15],Ca));(b=b.texture)&&"framebuffer"===b._reglType&&(b=b.color[0]);"function"===typeof b&&"texture2d"===b._reglType||ca.commandRaise(U,N);b=b._texture;V.uniform1i(E.location,b.bind());y&&V.bindBuffer(34963,y.buffer.buffer);k=y.primType;t=y.vertCount-0;0<=t||ca.commandRaise(u,N);t&&(V.drawElements(k,t,y.type,0<<(y.type-5121>>1)),g.setVAO(null),f&&(L.cpuTime+=performance.now()-h),b.unbind())},scope:function(a,d,c){var b,f,g,h,k,m,r,n,e,t,z,u,x,D,E,O,
y,G,J,fa,K,H,C,F,M,Za,R,S,pa,xa,U,na,V,ka,X;if(b=A.profile)f=performance.now(),L.count++;g=ja.elements;ja.elements=p;h=ja.offset;ja.offset=0;k=p.vertCount-0;0<=k||ca.commandRaise(ba,N);m=ja.count;ja.count=k;r=p.primType;k=ja.primitive;ja.primitive=r;n=w.call(this,ga,a,c);r=B[3];B[3]=n;e=a.texture;n=B[5];B[5]=e;t=T.call(this,ga,a,c);e=B[4];B[4]=t;t=v.buffer;v.buffer=l;z=v.divisor;v.divisor=0;u=v.normalized;v.normalized=!1;x=v.offset;v.offset=0;D=v.size;v.size=0;E=v.state;v.state=1;O=v.stride;v.stride=
0;y=v.type;v.type=l.dtype;G=v.w;v.w=0;J=v.x;v.x=0;fa=v.y;v.y=0;K=v.z;v.z=0;H=Q.buffer;Q.buffer=q;C=Q.divisor;Q.divisor=0;F=Q.normalized;Q.normalized=!1;M=Q.offset;Q.offset=0;Za=Q.size;Q.size=0;R=Q.state;Q.state=1;S=Q.stride;Q.stride=0;pa=Q.type;Q.type=q.dtype;xa=Q.w;Q.w=0;U=Q.x;Q.x=0;na=Q.y;Q.y=0;V=Q.z;Q.z=0;ka=P.vert;P.vert=2;X=P.frag;P.frag=1;d(ga,a,c);b&&(L.cpuTime+=performance.now()-f);ja.elements=g;ja.offset=h;ja.count=m;ja.primitive=k;B[3]=r;B[5]=n;B[4]=e;v.buffer=t;v.divisor=z;v.normalized=
u;v.offset=x;v.size=D;v.state=E;v.stride=O;v.type=y;v.w=G;v.x=J;v.y=fa;v.z=K;Q.buffer=H;Q.divisor=C;Q.normalized=F;Q.offset=M;Q.size=Za;Q.state=R;Q.stride=S;Q.type=pa;Q.w=xa;Q.x=U;Q.y=na;Q.z=V;P.vert=ka;P.frag=X},batch:function(c,b){var e,w,p,u;e=Z.next;e!==Z.cur&&(e?V.bindFramebuffer(36160,e.framebuffer):V.bindFramebuffer(36160,null),Z.cur=e);if(A.dirty){var v,B,y;e=R.dither;e!==A.dither&&(e?V.enable(3024):V.disable(3024),A.dither=e);e=R.blend_enable;e!==A.blend_enable&&(e?V.enable(3042):V.disable(3042),
A.blend_enable=e);e=M[0];v=M[1];B=M[2];y=M[3];if(e!==K[0]||v!==K[1]||B!==K[2]||y!==K[3])V.blendColor(e,v,B,y),K[0]=e,K[1]=v,K[2]=B,K[3]=y;e=Da[0];v=Da[1];if(e!==qa[0]||v!==qa[1])V.blendEquationSeparate(e,v),qa[0]=e,qa[1]=v;e=m[0];v=m[1];B=m[2];y=m[3];if(e!==J[0]||v!==J[1]||B!==J[2]||y!==J[3])V.blendFuncSeparate(e,v,B,y),J[0]=e,J[1]=v,J[2]=B,J[3]=y;e=R.depth_enable;e!==A.depth_enable&&(e?V.enable(2929):V.disable(2929),A.depth_enable=e);e=R.depth_func;e!==A.depth_func&&(V.depthFunc(e),A.depth_func=
e);e=ma[0];v=ma[1];if(e!==pa[0]||v!==pa[1])V.depthRange(e,v),pa[0]=e,pa[1]=v;e=R.depth_mask;e!==A.depth_mask&&(V.depthMask(e),A.depth_mask=e);e=aa[0];v=aa[1];B=aa[2];y=aa[3];if(e!==O[0]||v!==O[1]||B!==O[2]||y!==O[3])V.colorMask(e,v,B,y),O[0]=e,O[1]=v,O[2]=B,O[3]=y;e=R.cull_enable;e!==A.cull_enable&&(e?V.enable(2884):V.disable(2884),A.cull_enable=e);e=R.cull_face;e!==A.cull_face&&(V.cullFace(e),A.cull_face=e);e=R.frontFace;e!==A.frontFace&&(V.frontFace(e),A.frontFace=e);e=R.lineWidth;e!==A.lineWidth&&
(V.lineWidth(e),A.lineWidth=e);e=R.polygonOffset_enable;e!==A.polygonOffset_enable&&(e?V.enable(32823):V.disable(32823),A.polygonOffset_enable=e);e=za[0];v=za[1];if(e!==xa[0]||v!==xa[1])V.polygonOffset(e,v),xa[0]=e,xa[1]=v;e=R.sample_alpha;e!==A.sample_alpha&&(e?V.enable(32926):V.disable(32926),A.sample_alpha=e);e=R.sample_enable;e!==A.sample_enable&&(e?V.enable(32928):V.disable(32928),A.sample_enable=e);e=fa[0];v=fa[1];if(e!==Aa[0]||v!==Aa[1])V.sampleCoverage(e,v),Aa[0]=e,Aa[1]=v;e=R.stencil_enable;
e!==A.stencil_enable&&(e?V.enable(2960):V.disable(2960),A.stencil_enable=e);e=R.stencil_mask;e!==A.stencil_mask&&(V.stencilMask(e),A.stencil_mask=e);e=ya[0];v=ya[1];B=ya[2];if(e!==Ja[0]||v!==Ja[1]||B!==Ja[2])V.stencilFunc(e,v,B),Ja[0]=e,Ja[1]=v,Ja[2]=B;e=Ta[0];v=Ta[1];B=Ta[2];y=Ta[3];if(e!==r[0]||v!==r[1]||B!==r[2]||y!==r[3])V.stencilOpSeparate(e,v,B,y),r[0]=e,r[1]=v,r[2]=B,r[3]=y;e=na[0];v=na[1];B=na[2];y=na[3];if(e!==Za[0]||v!==Za[1]||B!==Za[2]||y!==Za[3])V.stencilOpSeparate(e,v,B,y),Za[0]=e,Za[1]=
v,Za[2]=B,Za[3]=y;e=R.scissor_enable;e!==A.scissor_enable&&(e?V.enable(3089):V.disable(3089),A.scissor_enable=e);e=ka[0];v=ka[1];B=ka[2];y=ka[3];if(e!==oa[0]||v!==oa[1]||B!==oa[2]||y!==oa[3])V.scissor(e,v,B,y),oa[0]=e,oa[1]=v,oa[2]=B,oa[3]=y;e=n[0];v=n[1];B=n[2];y=n[3];if(e!==z[0]||v!==z[1]||B!==z[2]||y!==z[3])V.viewport(e,v,B,y),z[0]=e,z[1]=v,z[2]=B,z[3]=y;A.dirty=!1}if(e=A.profile)w=performance.now(),L.count+=b;V.useProgram(ia.program);g.setVAO(null);v=Y.location;B=a[v];B.buffer||V.enableVertexAttribArray(v);
if(B.type!==l.dtype||3!==B.size||B.buffer!==l||!1!==B.normalized||0!==B.offset||0!==B.stride)V.bindBuffer(34962,l.buffer),V.vertexAttribPointer(v,3,l.dtype,!1,0,0),B.type=l.dtype,B.size=3,B.buffer=l,B.normalized=!1,B.offset=0,B.stride=0;v=d.location;B=a[v];B.buffer||V.enableVertexAttribArray(v);if(B.type!==q.dtype||2!==B.size||B.buffer!==q||!1!==B.normalized||0!==B.offset||0!==B.stride)V.bindBuffer(34962,q.buffer),V.vertexAttribPointer(v,2,q.dtype,!1,0,0),B.type=q.dtype,B.size=2,B.buffer=q,B.normalized=
!1,B.offset=0,B.stride=0;v=h.call(this,ga,u,p);ea(v)&&16===v.length||ca.commandRaise(t,N);V.uniformMatrix4fv(D.location,!1,Array.isArray(v)||v instanceof Float32Array?v:(Ra[0]=v[0],Ra[1]=v[1],Ra[2]=v[2],Ra[3]=v[3],Ra[4]=v[4],Ra[5]=v[5],Ra[6]=v[6],Ra[7]=v[7],Ra[8]=v[8],Ra[9]=v[9],Ra[10]=v[10],Ra[11]=v[11],Ra[12]=v[12],Ra[13]=v[13],Ra[14]=v[14],Ra[15]=v[15],Ra));p=S.call(this,ga,u,p);ea(p)&&16===p.length||ca.commandRaise(k,N);V.uniformMatrix4fv(G.location,!1,Array.isArray(p)||p instanceof Float32Array?
p:(Hb[0]=p[0],Hb[1]=p[1],Hb[2]=p[2],Hb[3]=p[3],Hb[4]=p[4],Hb[5]=p[5],Hb[6]=p[6],Hb[7]=p[7],Hb[8]=p[8],Hb[9]=p[9],Hb[10]=p[10],Hb[11]=p[11],Hb[12]=p[12],Hb[13]=p[13],Hb[14]=p[14],Hb[15]=p[15],Hb));f&&V.bindBuffer(34963,f.buffer.buffer);v=f.primType;B=f.vertCount-0;0<=B||ca.commandRaise(x,N);for(p=0;p<b;++p)u=c[p],(u=u.texture)&&"framebuffer"===u._reglType&&(u=u.color[0]),"function"===typeof u&&"texture2d"===u._reglType||ca.commandRaise(X,N),u=u._texture,V.uniform1i(E.location,u.bind()),B&&(V.drawElements(v,
B,f.type,0<<(f.type-5121>>1)),u.unbind());g.setVAO(null);e&&(L.cpuTime+=performance.now()-w)}}},"$19,normal,position,projection,view":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ia,h,t,S){var k,X,f,x,Y,D,E,d,G,a,ga,A,ja,Z,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya,Ja,na;k=b.attributes;X=b.context;f=b.current;x=b.draw;Y=b.framebuffer;D=b.gl;E=b.isArrayLike;d=b.next;G=b.shader;a=b.uniforms;ga=b.vao;A=d.blend_color;ja=f.blend_color;Z=d.blend_equation;V=f.blend_equation;ea=d.blend_func;
R=f.blend_func;P=d.colorMask;B=f.colorMask;g=d.depth_range;M=f.depth_range;K=d.polygonOffset_offset;Da=f.polygonOffset_offset;qa=d.sample_coverage;m=f.sample_coverage;J=d.scissor_box;aa=f.scissor_box;O=d.stencil_func;ma=f.stencil_func;pa=d.stencil_opBack;za=f.stencil_opBack;xa=d.stencil_opFront;fa=f.stencil_opFront;Aa=d.viewport;ka=f.viewport;oa=new Float32Array(16);ya=new Float32Array(16);Ja=new Float32Array(16);na=new Float32Array(16);return{draw:function(b){var v,r,n;b=Y.next;b!==Y.cur&&(b?D.bindFramebuffer(36160,
b.framebuffer):D.bindFramebuffer(36160,null),Y.cur=b);if(f.dirty){var z;b=d.dither;b!==f.dither&&(b?D.enable(3024):D.disable(3024),f.dither=b);b=d.blend_enable;b!==f.blend_enable&&(b?D.enable(3042):D.disable(3042),f.blend_enable=b);b=A[0];r=A[1];n=A[2];z=A[3];if(b!==ja[0]||r!==ja[1]||n!==ja[2]||z!==ja[3])D.blendColor(b,r,n,z),ja[0]=b,ja[1]=r,ja[2]=n,ja[3]=z;b=Z[0];r=Z[1];if(b!==V[0]||r!==V[1])D.blendEquationSeparate(b,r),V[0]=b,V[1]=r;b=ea[0];r=ea[1];n=ea[2];z=ea[3];if(b!==R[0]||r!==R[1]||n!==R[2]||
z!==R[3])D.blendFuncSeparate(b,r,n,z),R[0]=b,R[1]=r,R[2]=n,R[3]=z;b=d.depth_enable;b!==f.depth_enable&&(b?D.enable(2929):D.disable(2929),f.depth_enable=b);b=d.depth_func;b!==f.depth_func&&(D.depthFunc(b),f.depth_func=b);b=g[0];r=g[1];if(b!==M[0]||r!==M[1])D.depthRange(b,r),M[0]=b,M[1]=r;b=d.depth_mask;b!==f.depth_mask&&(D.depthMask(b),f.depth_mask=b);b=P[0];r=P[1];n=P[2];z=P[3];if(b!==B[0]||r!==B[1]||n!==B[2]||z!==B[3])D.colorMask(b,r,n,z),B[0]=b,B[1]=r,B[2]=n,B[3]=z;b=d.cull_enable;b!==f.cull_enable&&
(b?D.enable(2884):D.disable(2884),f.cull_enable=b);b=d.cull_face;b!==f.cull_face&&(D.cullFace(b),f.cull_face=b);b=d.frontFace;b!==f.frontFace&&(D.frontFace(b),f.frontFace=b);b=d.lineWidth;b!==f.lineWidth&&(D.lineWidth(b),f.lineWidth=b);b=d.polygonOffset_enable;b!==f.polygonOffset_enable&&(b?D.enable(32823):D.disable(32823),f.polygonOffset_enable=b);b=K[0];r=K[1];if(b!==Da[0]||r!==Da[1])D.polygonOffset(b,r),Da[0]=b,Da[1]=r;b=d.sample_alpha;b!==f.sample_alpha&&(b?D.enable(32926):D.disable(32926),f.sample_alpha=
b);b=d.sample_enable;b!==f.sample_enable&&(b?D.enable(32928):D.disable(32928),f.sample_enable=b);b=qa[0];r=qa[1];if(b!==m[0]||r!==m[1])D.sampleCoverage(b,r),m[0]=b,m[1]=r;b=d.stencil_enable;b!==f.stencil_enable&&(b?D.enable(2960):D.disable(2960),f.stencil_enable=b);b=d.stencil_mask;b!==f.stencil_mask&&(D.stencilMask(b),f.stencil_mask=b);b=O[0];r=O[1];n=O[2];if(b!==ma[0]||r!==ma[1]||n!==ma[2])D.stencilFunc(b,r,n),ma[0]=b,ma[1]=r,ma[2]=n;b=xa[0];r=xa[1];n=xa[2];z=xa[3];if(b!==fa[0]||r!==fa[1]||n!==
fa[2]||z!==fa[3])D.stencilOpSeparate(b,r,n,z),fa[0]=b,fa[1]=r,fa[2]=n,fa[3]=z;b=pa[0];r=pa[1];n=pa[2];z=pa[3];if(b!==za[0]||r!==za[1]||n!==za[2]||z!==za[3])D.stencilOpSeparate(b,r,n,z),za[0]=b,za[1]=r,za[2]=n,za[3]=z;b=d.scissor_enable;b!==f.scissor_enable&&(b?D.enable(3089):D.disable(3089),f.scissor_enable=b);b=J[0];r=J[1];n=J[2];z=J[3];if(b!==aa[0]||r!==aa[1]||n!==aa[2]||z!==aa[3])D.scissor(b,r,n,z),aa[0]=b,aa[1]=r,aa[2]=n,aa[3]=z;b=Aa[0];r=Aa[1];n=Aa[2];z=Aa[3];if(b!==ka[0]||r!==ka[1]||n!==ka[2]||
z!==ka[3])D.viewport(b,r,n,z),ka[0]=b,ka[1]=r,ka[2]=n,ka[3]=z;f.dirty=!1}if(b=f.profile)v=performance.now(),L.count++;D.useProgram(e.program);ga.setVAO(null);r=h.location;n=k[r];n.buffer||D.enableVertexAttribArray(r);if(n.type!==l.dtype||3!==n.size||n.buffer!==l||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(r,3,l.dtype,!1,0,0),n.type=l.dtype,n.size=3,n.buffer=l,n.normalized=!1,n.offset=0,n.stride=0;r=ia.location;n=k[r];n.buffer||D.enableVertexAttribArray(r);
if(n.type!==q.dtype||3!==n.size||n.buffer!==q||!1!==n.normalized||0!==n.offset||0!==n.stride)D.bindBuffer(34962,q.buffer),D.vertexAttribPointer(r,3,q.dtype,!1,0,0),n.type=q.dtype,n.size=3,n.buffer=q,n.normalized=!1,n.offset=0,n.stride=0;r=a[5];E(r)&&16===r.length||ca.commandRaise(c,N);D.uniformMatrix4fv(t.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(oa[0]=r[0],oa[1]=r[1],oa[2]=r[2],oa[3]=r[3],oa[4]=r[4],oa[5]=r[5],oa[6]=r[6],oa[7]=r[7],oa[8]=r[8],oa[9]=r[9],oa[10]=r[10],oa[11]=r[11],
oa[12]=r[12],oa[13]=r[13],oa[14]=r[14],oa[15]=r[15],oa));r=a[8];E(r)&&16===r.length||ca.commandRaise(F,N);D.uniformMatrix4fv(S.location,!1,Array.isArray(r)||r instanceof Float32Array?r:(ya[0]=r[0],ya[1]=r[1],ya[2]=r[2],ya[3]=r[3],ya[4]=r[4],ya[5]=r[5],ya[6]=r[6],ya[7]=r[7],ya[8]=r[8],ya[9]=r[9],ya[10]=r[10],ya[11]=r[11],ya[12]=r[12],ya[13]=r[13],ya[14]=r[14],ya[15]=r[15],ya));C&&D.bindBuffer(34963,C.buffer.buffer);r=C.primType;n=C.vertCount-0;0<=n||ca.commandRaise(H,N);n&&(D.drawElements(r,n,C.type,
0<<(C.type-5121>>1)),ga.setVAO(null),b&&(L.cpuTime+=performance.now()-v))},scope:function(a,b,d){var c,g,h,k,e,m,t,v,w,A,B,D,E,O,J,fa,K,H,C,F,M,P,Q,R,S,pa,T,xa,na,V,ka,aa;if(c=f.profile)g=performance.now(),L.count++;h=x.elements;x.elements=U;k=x.offset;x.offset=0;e=U.vertCount-0;0<=e||ca.commandRaise(y,N);m=x.count;x.count=e;t=U.primType;e=x.primitive;x.primitive=t;t=u.buffer;u.buffer=q;v=u.divisor;u.divisor=0;w=u.normalized;u.normalized=!1;A=u.offset;u.offset=0;B=u.size;u.size=0;D=u.state;u.state=
1;E=u.stride;u.stride=0;O=u.type;u.type=q.dtype;J=u.w;u.w=0;fa=u.x;u.x=0;K=u.y;u.y=0;H=u.z;u.z=0;C=p.buffer;p.buffer=l;F=p.divisor;p.divisor=0;M=p.normalized;p.normalized=!1;P=p.offset;p.offset=0;Q=p.size;p.size=0;R=p.state;p.state=1;S=p.stride;p.stride=0;pa=p.type;p.type=l.dtype;T=p.w;p.w=0;xa=p.x;p.x=0;na=p.y;p.y=0;V=p.z;p.z=0;ka=G.vert;G.vert=10;aa=G.frag;G.frag=9;b(X,a,d);c&&(L.cpuTime+=performance.now()-g);x.elements=h;x.offset=k;x.count=m;x.primitive=e;u.buffer=t;u.divisor=v;u.normalized=w;
u.offset=A;u.size=B;u.state=D;u.stride=E;u.type=O;u.w=J;u.x=fa;u.y=K;u.z=H;p.buffer=C;p.divisor=F;p.normalized=M;p.offset=P;p.size=Q;p.state=R;p.stride=S;p.type=pa;p.w=T;p.x=xa;p.y=na;p.z=V;G.vert=ka;G.frag=aa},batch:function(b,c){var e,n,z;e=Y.next;e!==Y.cur&&(e?D.bindFramebuffer(36160,e.framebuffer):D.bindFramebuffer(36160,null),Y.cur=e);if(f.dirty){var p,u;e=d.dither;e!==f.dither&&(e?D.enable(3024):D.disable(3024),f.dither=e);e=d.blend_enable;e!==f.blend_enable&&(e?D.enable(3042):D.disable(3042),
f.blend_enable=e);e=A[0];z=A[1];p=A[2];u=A[3];if(e!==ja[0]||z!==ja[1]||p!==ja[2]||u!==ja[3])D.blendColor(e,z,p,u),ja[0]=e,ja[1]=z,ja[2]=p,ja[3]=u;e=Z[0];z=Z[1];if(e!==V[0]||z!==V[1])D.blendEquationSeparate(e,z),V[0]=e,V[1]=z;e=ea[0];z=ea[1];p=ea[2];u=ea[3];if(e!==R[0]||z!==R[1]||p!==R[2]||u!==R[3])D.blendFuncSeparate(e,z,p,u),R[0]=e,R[1]=z,R[2]=p,R[3]=u;e=d.depth_enable;e!==f.depth_enable&&(e?D.enable(2929):D.disable(2929),f.depth_enable=e);e=d.depth_func;e!==f.depth_func&&(D.depthFunc(e),f.depth_func=
e);e=g[0];z=g[1];if(e!==M[0]||z!==M[1])D.depthRange(e,z),M[0]=e,M[1]=z;e=d.depth_mask;e!==f.depth_mask&&(D.depthMask(e),f.depth_mask=e);e=P[0];z=P[1];p=P[2];u=P[3];if(e!==B[0]||z!==B[1]||p!==B[2]||u!==B[3])D.colorMask(e,z,p,u),B[0]=e,B[1]=z,B[2]=p,B[3]=u;e=d.cull_enable;e!==f.cull_enable&&(e?D.enable(2884):D.disable(2884),f.cull_enable=e);e=d.cull_face;e!==f.cull_face&&(D.cullFace(e),f.cull_face=e);e=d.frontFace;e!==f.frontFace&&(D.frontFace(e),f.frontFace=e);e=d.lineWidth;e!==f.lineWidth&&(D.lineWidth(e),
f.lineWidth=e);e=d.polygonOffset_enable;e!==f.polygonOffset_enable&&(e?D.enable(32823):D.disable(32823),f.polygonOffset_enable=e);e=K[0];z=K[1];if(e!==Da[0]||z!==Da[1])D.polygonOffset(e,z),Da[0]=e,Da[1]=z;e=d.sample_alpha;e!==f.sample_alpha&&(e?D.enable(32926):D.disable(32926),f.sample_alpha=e);e=d.sample_enable;e!==f.sample_enable&&(e?D.enable(32928):D.disable(32928),f.sample_enable=e);e=qa[0];z=qa[1];if(e!==m[0]||z!==m[1])D.sampleCoverage(e,z),m[0]=e,m[1]=z;e=d.stencil_enable;e!==f.stencil_enable&&
(e?D.enable(2960):D.disable(2960),f.stencil_enable=e);e=d.stencil_mask;e!==f.stencil_mask&&(D.stencilMask(e),f.stencil_mask=e);e=O[0];z=O[1];p=O[2];if(e!==ma[0]||z!==ma[1]||p!==ma[2])D.stencilFunc(e,z,p),ma[0]=e,ma[1]=z,ma[2]=p;e=xa[0];z=xa[1];p=xa[2];u=xa[3];if(e!==fa[0]||z!==fa[1]||p!==fa[2]||u!==fa[3])D.stencilOpSeparate(e,z,p,u),fa[0]=e,fa[1]=z,fa[2]=p,fa[3]=u;e=pa[0];z=pa[1];p=pa[2];u=pa[3];if(e!==za[0]||z!==za[1]||p!==za[2]||u!==za[3])D.stencilOpSeparate(e,z,p,u),za[0]=e,za[1]=z,za[2]=p,za[3]=
u;e=d.scissor_enable;e!==f.scissor_enable&&(e?D.enable(3089):D.disable(3089),f.scissor_enable=e);e=J[0];z=J[1];p=J[2];u=J[3];if(e!==aa[0]||z!==aa[1]||p!==aa[2]||u!==aa[3])D.scissor(e,z,p,u),aa[0]=e,aa[1]=z,aa[2]=p,aa[3]=u;e=Aa[0];z=Aa[1];p=Aa[2];u=Aa[3];if(e!==ka[0]||z!==ka[1]||p!==ka[2]||u!==ka[3])D.viewport(e,z,p,u),ka[0]=e,ka[1]=z,ka[2]=p,ka[3]=u;f.dirty=!1}if(e=f.profile)n=performance.now(),L.count+=c;D.useProgram(ba.program);ga.setVAO(null);z=h.location;p=k[z];p.buffer||D.enableVertexAttribArray(z);
if(p.type!==l.dtype||3!==p.size||p.buffer!==l||!1!==p.normalized||0!==p.offset||0!==p.stride)D.bindBuffer(34962,l.buffer),D.vertexAttribPointer(z,3,l.dtype,!1,0,0),p.type=l.dtype,p.size=3,p.buffer=l,p.normalized=!1,p.offset=0,p.stride=0;z=ia.location;p=k[z];p.buffer||D.enableVertexAttribArray(z);if(p.type!==q.dtype||3!==p.size||p.buffer!==q||!1!==p.normalized||0!==p.offset||0!==p.stride)D.bindBuffer(34962,q.buffer),D.vertexAttribPointer(z,3,q.dtype,!1,0,0),p.type=q.dtype,p.size=3,p.buffer=q,p.normalized=
!1,p.offset=0,p.stride=0;z=a[5];E(z)&&16===z.length||ca.commandRaise(w,N);D.uniformMatrix4fv(t.location,!1,Array.isArray(z)||z instanceof Float32Array?z:(Ja[0]=z[0],Ja[1]=z[1],Ja[2]=z[2],Ja[3]=z[3],Ja[4]=z[4],Ja[5]=z[5],Ja[6]=z[6],Ja[7]=z[7],Ja[8]=z[8],Ja[9]=z[9],Ja[10]=z[10],Ja[11]=z[11],Ja[12]=z[12],Ja[13]=z[13],Ja[14]=z[14],Ja[15]=z[15],Ja));z=a[8];E(z)&&16===z.length||ca.commandRaise(T,N);D.uniformMatrix4fv(S.location,!1,Array.isArray(z)||z instanceof Float32Array?z:(na[0]=z[0],na[1]=z[1],na[2]=
z[2],na[3]=z[3],na[4]=z[4],na[5]=z[5],na[6]=z[6],na[7]=z[7],na[8]=z[8],na[9]=z[9],na[10]=z[10],na[11]=z[11],na[12]=z[12],na[13]=z[13],na[14]=z[14],na[15]=z[15],na));v&&D.bindBuffer(34963,v.buffer.buffer);p=v.primType;u=v.vertCount-0;0<=u||ca.commandRaise(Q,N);for(z=0;z<c;++z)u&&D.drawElements(p,u,v.type,0<<(v.type-5121>>1));ga.setVAO(null);e&&(L.cpuTime+=performance.now()-n)}}},"$14,angle,color,position":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T){var v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ga,A,ja,
Z,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa;v=b.attributes;Q=b.context;ia=b.current;h=b.draw;t=b.elements;S=b.framebuffer;k=b.gl;X=b.isArrayLike;f=b.next;x=b.shader;Y=b.uniforms;D=b.vao;E=f.blend_color;d=ia.blend_color;G=f.blend_equation;a=ia.blend_equation;ga=f.blend_func;A=ia.blend_func;ja=f.colorMask;Z=ia.colorMask;V=f.depth_range;ea=ia.depth_range;R=f.polygonOffset_offset;P=ia.polygonOffset_offset;B=f.sample_coverage;g=ia.sample_coverage;M=f.scissor_box;K=ia.scissor_box;Da=f.stencil_func;qa=ia.stencil_func;
m=f.stencil_opBack;J=ia.stencil_opBack;aa=f.stencil_opFront;O=ia.stencil_opFront;ma=f.viewport;pa=ia.viewport;return{draw:function(b){var p,u,x,y;p=S.next;p!==S.cur&&(p?k.bindFramebuffer(36160,p.framebuffer):k.bindFramebuffer(36160,null),S.cur=p);if(ia.dirty){var H;p=f.dither;p!==ia.dither&&(p?k.enable(3024):k.disable(3024),ia.dither=p);p=f.blend_enable;p!==ia.blend_enable&&(p?k.enable(3042):k.disable(3042),ia.blend_enable=p);p=E[0];x=E[1];y=E[2];H=E[3];if(p!==d[0]||x!==d[1]||y!==d[2]||H!==d[3])k.blendColor(p,
x,y,H),d[0]=p,d[1]=x,d[2]=y,d[3]=H;p=G[0];x=G[1];if(p!==a[0]||x!==a[1])k.blendEquationSeparate(p,x),a[0]=p,a[1]=x;p=ga[0];x=ga[1];y=ga[2];H=ga[3];if(p!==A[0]||x!==A[1]||y!==A[2]||H!==A[3])k.blendFuncSeparate(p,x,y,H),A[0]=p,A[1]=x,A[2]=y,A[3]=H;p=f.depth_func;p!==ia.depth_func&&(k.depthFunc(p),ia.depth_func=p);p=V[0];x=V[1];if(p!==ea[0]||x!==ea[1])k.depthRange(p,x),ea[0]=p,ea[1]=x;p=f.depth_mask;p!==ia.depth_mask&&(k.depthMask(p),ia.depth_mask=p);p=ja[0];x=ja[1];y=ja[2];H=ja[3];if(p!==Z[0]||x!==Z[1]||
y!==Z[2]||H!==Z[3])k.colorMask(p,x,y,H),Z[0]=p,Z[1]=x,Z[2]=y,Z[3]=H;p=f.cull_enable;p!==ia.cull_enable&&(p?k.enable(2884):k.disable(2884),ia.cull_enable=p);p=f.cull_face;p!==ia.cull_face&&(k.cullFace(p),ia.cull_face=p);p=f.frontFace;p!==ia.frontFace&&(k.frontFace(p),ia.frontFace=p);p=f.lineWidth;p!==ia.lineWidth&&(k.lineWidth(p),ia.lineWidth=p);p=f.polygonOffset_enable;p!==ia.polygonOffset_enable&&(p?k.enable(32823):k.disable(32823),ia.polygonOffset_enable=p);p=R[0];x=R[1];if(p!==P[0]||x!==P[1])k.polygonOffset(p,
x),P[0]=p,P[1]=x;p=f.sample_alpha;p!==ia.sample_alpha&&(p?k.enable(32926):k.disable(32926),ia.sample_alpha=p);p=f.sample_enable;p!==ia.sample_enable&&(p?k.enable(32928):k.disable(32928),ia.sample_enable=p);p=B[0];x=B[1];if(p!==g[0]||x!==g[1])k.sampleCoverage(p,x),g[0]=p,g[1]=x;p=f.stencil_enable;p!==ia.stencil_enable&&(p?k.enable(2960):k.disable(2960),ia.stencil_enable=p);p=f.stencil_mask;p!==ia.stencil_mask&&(k.stencilMask(p),ia.stencil_mask=p);p=Da[0];x=Da[1];y=Da[2];if(p!==qa[0]||x!==qa[1]||y!==
qa[2])k.stencilFunc(p,x,y),qa[0]=p,qa[1]=x,qa[2]=y;p=aa[0];x=aa[1];y=aa[2];H=aa[3];if(p!==O[0]||x!==O[1]||y!==O[2]||H!==O[3])k.stencilOpSeparate(p,x,y,H),O[0]=p,O[1]=x,O[2]=y,O[3]=H;p=m[0];x=m[1];y=m[2];H=m[3];if(p!==J[0]||x!==J[1]||y!==J[2]||H!==J[3])k.stencilOpSeparate(p,x,y,H),J[0]=p,J[1]=x,J[2]=y,J[3]=H;p=f.scissor_enable;p!==ia.scissor_enable&&(p?k.enable(3089):k.disable(3089),ia.scissor_enable=p);p=M[0];x=M[1];y=M[2];H=M[3];if(p!==K[0]||x!==K[1]||y!==K[2]||H!==K[3])k.scissor(p,x,y,H),K[0]=p,
K[1]=x,K[2]=y,K[3]=H;p=ma[0];x=ma[1];y=ma[2];H=ma[3];if(p!==pa[0]||x!==pa[1]||y!==pa[2]||H!==pa[3])k.viewport(p,x,y,H),pa[0]=p,pa[1]=x,pa[2]=y,pa[3]=H}k.disable(2929);ia.depth_enable=!1;if(p=ia.profile)u=performance.now(),L.count++;k.useProgram(e.program);D.setVAO(null);x=T.location;y=v[x];y.buffer||k.enableVertexAttribArray(x);if(y.type!==l.dtype||2!==y.size||y.buffer!==l||!1!==y.normalized||0!==y.offset||0!==y.stride)k.bindBuffer(34962,l.buffer),k.vertexAttribPointer(x,2,l.dtype,!1,0,0),y.type=
l.dtype,y.size=2,y.buffer=l,y.normalized=!1,y.offset=0,y.stride=0;x=q.call(this,Q,b,0);"number"!==typeof x&&ca.commandRaise(c,N);k.uniform1f(ba.location,x);b=b.color;X(b)&&4===b.length||ca.commandRaise(F,N);k.uniform4f(w.location,b[0],b[1],b[2],b[3]);(b=h.elements)?k.bindBuffer(34963,b.buffer.buffer):D.currentVAO&&(b=t.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,b.buffer.buffer);x=h.primitive;y=h.offset;b?k.drawElements(x,3,b.type,y<<(b.type-5121>>1)):k.drawArrays(x,y,3);ia.dirty=!0;D.setVAO(null);
p&&(L.cpuTime+=performance.now()-u)},scope:function(a,b,c){var d,g,k,e,m,q,p,t,r,n,v,w,u,A,B,y,D,E,O,G;d=f.depth_enable;f.depth_enable=!1;if(g=ia.profile)k=performance.now(),L.count++;e=h.count;h.count=3;m=C.call(this,Q,a,c);q=Y[3];Y[3]=m;p=a.color;m=Y[4];Y[4]=p;p=H.buffer;H.buffer=l;t=H.divisor;H.divisor=0;r=H.normalized;H.normalized=!1;n=H.offset;H.offset=0;v=H.size;H.size=0;w=H.state;H.state=1;u=H.stride;H.stride=0;A=H.type;H.type=l.dtype;B=H.w;H.w=0;y=H.x;H.x=0;D=H.y;H.y=0;E=H.z;H.z=0;O=x.vert;
x.vert=2;G=x.frag;x.frag=1;ia.dirty=!0;b(Q,a,c);f.depth_enable=d;g&&(L.cpuTime+=performance.now()-k);h.count=e;Y[3]=q;Y[4]=m;H.buffer=p;H.divisor=t;H.normalized=r;H.offset=n;H.size=v;H.state=w;H.stride=u;H.type=A;H.w=B;H.x=y;H.y=D;H.z=E;x.vert=O;x.frag=G;ia.dirty=!0},batch:function(b,c){var e,q,x,H;e=S.next;e!==S.cur&&(e?k.bindFramebuffer(36160,e.framebuffer):k.bindFramebuffer(36160,null),S.cur=e);if(ia.dirty){var C,F,na;e=f.dither;e!==ia.dither&&(e?k.enable(3024):k.disable(3024),ia.dither=e);e=f.blend_enable;
e!==ia.blend_enable&&(e?k.enable(3042):k.disable(3042),ia.blend_enable=e);e=E[0];C=E[1];F=E[2];na=E[3];if(e!==d[0]||C!==d[1]||F!==d[2]||na!==d[3])k.blendColor(e,C,F,na),d[0]=e,d[1]=C,d[2]=F,d[3]=na;e=G[0];C=G[1];if(e!==a[0]||C!==a[1])k.blendEquationSeparate(e,C),a[0]=e,a[1]=C;e=ga[0];C=ga[1];F=ga[2];na=ga[3];if(e!==A[0]||C!==A[1]||F!==A[2]||na!==A[3])k.blendFuncSeparate(e,C,F,na),A[0]=e,A[1]=C,A[2]=F,A[3]=na;e=f.depth_func;e!==ia.depth_func&&(k.depthFunc(e),ia.depth_func=e);e=V[0];C=V[1];if(e!==ea[0]||
C!==ea[1])k.depthRange(e,C),ea[0]=e,ea[1]=C;e=f.depth_mask;e!==ia.depth_mask&&(k.depthMask(e),ia.depth_mask=e);e=ja[0];C=ja[1];F=ja[2];na=ja[3];if(e!==Z[0]||C!==Z[1]||F!==Z[2]||na!==Z[3])k.colorMask(e,C,F,na),Z[0]=e,Z[1]=C,Z[2]=F,Z[3]=na;e=f.cull_enable;e!==ia.cull_enable&&(e?k.enable(2884):k.disable(2884),ia.cull_enable=e);e=f.cull_face;e!==ia.cull_face&&(k.cullFace(e),ia.cull_face=e);e=f.frontFace;e!==ia.frontFace&&(k.frontFace(e),ia.frontFace=e);e=f.lineWidth;e!==ia.lineWidth&&(k.lineWidth(e),
ia.lineWidth=e);e=f.polygonOffset_enable;e!==ia.polygonOffset_enable&&(e?k.enable(32823):k.disable(32823),ia.polygonOffset_enable=e);e=R[0];C=R[1];if(e!==P[0]||C!==P[1])k.polygonOffset(e,C),P[0]=e,P[1]=C;e=f.sample_alpha;e!==ia.sample_alpha&&(e?k.enable(32926):k.disable(32926),ia.sample_alpha=e);e=f.sample_enable;e!==ia.sample_enable&&(e?k.enable(32928):k.disable(32928),ia.sample_enable=e);e=B[0];C=B[1];if(e!==g[0]||C!==g[1])k.sampleCoverage(e,C),g[0]=e,g[1]=C;e=f.stencil_enable;e!==ia.stencil_enable&&
(e?k.enable(2960):k.disable(2960),ia.stencil_enable=e);e=f.stencil_mask;e!==ia.stencil_mask&&(k.stencilMask(e),ia.stencil_mask=e);e=Da[0];C=Da[1];F=Da[2];if(e!==qa[0]||C!==qa[1]||F!==qa[2])k.stencilFunc(e,C,F),qa[0]=e,qa[1]=C,qa[2]=F;e=aa[0];C=aa[1];F=aa[2];na=aa[3];if(e!==O[0]||C!==O[1]||F!==O[2]||na!==O[3])k.stencilOpSeparate(e,C,F,na),O[0]=e,O[1]=C,O[2]=F,O[3]=na;e=m[0];C=m[1];F=m[2];na=m[3];if(e!==J[0]||C!==J[1]||F!==J[2]||na!==J[3])k.stencilOpSeparate(e,C,F,na),J[0]=e,J[1]=C,J[2]=F,J[3]=na;e=
f.scissor_enable;e!==ia.scissor_enable&&(e?k.enable(3089):k.disable(3089),ia.scissor_enable=e);e=M[0];C=M[1];F=M[2];na=M[3];if(e!==K[0]||C!==K[1]||F!==K[2]||na!==K[3])k.scissor(e,C,F,na),K[0]=e,K[1]=C,K[2]=F,K[3]=na;e=ma[0];C=ma[1];F=ma[2];na=ma[3];if(e!==pa[0]||C!==pa[1]||F!==pa[2]||na!==pa[3])k.viewport(e,C,F,na),pa[0]=e,pa[1]=C,pa[2]=F,pa[3]=na}k.disable(2929);ia.depth_enable=!1;if(e=ia.profile)q=performance.now(),L.count+=c;k.useProgram(U.program);D.setVAO(null);C=T.location;F=v[C];F.buffer||
k.enableVertexAttribArray(C);if(F.type!==l.dtype||2!==F.size||F.buffer!==l||!1!==F.normalized||0!==F.offset||0!==F.stride)k.bindBuffer(34962,l.buffer),k.vertexAttribPointer(C,2,l.dtype,!1,0,0),F.type=l.dtype,F.size=2,F.buffer=l,F.normalized=!1,F.offset=0,F.stride=0;x=y.call(this,Q,H,x);"number"!==typeof x&&ca.commandRaise(u,N);k.uniform1f(ba.location,x);(C=h.elements)?k.bindBuffer(34963,C.buffer.buffer):D.currentVAO&&(C=t.getElements(D.currentVAO.elements))&&k.bindBuffer(34963,C.buffer.buffer);F=
h.primitive;na=h.offset;for(x=0;x<c;++x){H=b[x];var Y,Ta,r,n,z,va,Ca;Y=H.color;X(Y)&&4===Y.length||ca.commandRaise(p,N);H=Y[0];r=Y[1];z=Y[2];Y=Y[3];x&&Ta===H&&n===r&&va===z&&Ca===Y||(Ta=H,n=r,va=z,Ca=Y,k.uniform4f(w.location,H,r,z,Y));C?k.drawElements(F,3,C.type,na<<(C.type-5121>>1)):k.drawArrays(F,na,3)}ia.dirty=!0;D.setVAO(null);e&&(L.cpuTime+=performance.now()-q)}}},"$13,color,position":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba){var w,T,v,Q,ia,h,t,S,k,X,f,x,Y,D,E,d,G,a,ga,A,ja,Z,V,ea,R,P,B,g,
M,K,Da,qa,m,J,aa;w=b.attributes;T=b.context;v=b.current;Q=b.draw;ia=b.framebuffer;h=b.gl;t=b.next;S=b.shader;k=b.uniforms;X=b.vao;f=t.blend_color;x=v.blend_color;Y=t.blend_equation;D=v.blend_equation;E=t.blend_func;d=v.blend_func;G=t.colorMask;a=v.colorMask;ga=t.depth_range;A=v.depth_range;ja=t.polygonOffset_offset;Z=v.polygonOffset_offset;V=t.sample_coverage;ea=v.sample_coverage;R=t.scissor_box;P=v.scissor_box;B=t.stencil_func;g=v.stencil_func;M=t.stencil_opBack;K=v.stencil_opBack;Da=t.stencil_opFront;
qa=v.stencil_opFront;m=t.viewport;J=v.viewport;aa=[1,0,0,1];return{draw:function(b){var k,u,y;b=ia.next;b!==ia.cur&&(b?h.bindFramebuffer(36160,b.framebuffer):h.bindFramebuffer(36160,null),ia.cur=b);if(v.dirty){var C;b=t.dither;b!==v.dither&&(b?h.enable(3024):h.disable(3024),v.dither=b);b=t.blend_enable;b!==v.blend_enable&&(b?h.enable(3042):h.disable(3042),v.blend_enable=b);b=f[0];u=f[1];y=f[2];C=f[3];if(b!==x[0]||u!==x[1]||y!==x[2]||C!==x[3])h.blendColor(b,u,y,C),x[0]=b,x[1]=u,x[2]=y,x[3]=C;b=Y[0];
u=Y[1];if(b!==D[0]||u!==D[1])h.blendEquationSeparate(b,u),D[0]=b,D[1]=u;b=E[0];u=E[1];y=E[2];C=E[3];if(b!==d[0]||u!==d[1]||y!==d[2]||C!==d[3])h.blendFuncSeparate(b,u,y,C),d[0]=b,d[1]=u,d[2]=y,d[3]=C;b=t.depth_enable;b!==v.depth_enable&&(b?h.enable(2929):h.disable(2929),v.depth_enable=b);b=t.depth_func;b!==v.depth_func&&(h.depthFunc(b),v.depth_func=b);b=ga[0];u=ga[1];if(b!==A[0]||u!==A[1])h.depthRange(b,u),A[0]=b,A[1]=u;b=t.depth_mask;b!==v.depth_mask&&(h.depthMask(b),v.depth_mask=b);b=G[0];u=G[1];
y=G[2];C=G[3];if(b!==a[0]||u!==a[1]||y!==a[2]||C!==a[3])h.colorMask(b,u,y,C),a[0]=b,a[1]=u,a[2]=y,a[3]=C;b=t.cull_enable;b!==v.cull_enable&&(b?h.enable(2884):h.disable(2884),v.cull_enable=b);b=t.cull_face;b!==v.cull_face&&(h.cullFace(b),v.cull_face=b);b=t.frontFace;b!==v.frontFace&&(h.frontFace(b),v.frontFace=b);b=t.polygonOffset_enable;b!==v.polygonOffset_enable&&(b?h.enable(32823):h.disable(32823),v.polygonOffset_enable=b);b=ja[0];u=ja[1];if(b!==Z[0]||u!==Z[1])h.polygonOffset(b,u),Z[0]=b,Z[1]=u;
b=t.sample_alpha;b!==v.sample_alpha&&(b?h.enable(32926):h.disable(32926),v.sample_alpha=b);b=t.sample_enable;b!==v.sample_enable&&(b?h.enable(32928):h.disable(32928),v.sample_enable=b);b=V[0];u=V[1];if(b!==ea[0]||u!==ea[1])h.sampleCoverage(b,u),ea[0]=b,ea[1]=u;b=t.stencil_enable;b!==v.stencil_enable&&(b?h.enable(2960):h.disable(2960),v.stencil_enable=b);b=t.stencil_mask;b!==v.stencil_mask&&(h.stencilMask(b),v.stencil_mask=b);b=B[0];u=B[1];y=B[2];if(b!==g[0]||u!==g[1]||y!==g[2])h.stencilFunc(b,u,y),
g[0]=b,g[1]=u,g[2]=y;b=Da[0];u=Da[1];y=Da[2];C=Da[3];if(b!==qa[0]||u!==qa[1]||y!==qa[2]||C!==qa[3])h.stencilOpSeparate(b,u,y,C),qa[0]=b,qa[1]=u,qa[2]=y,qa[3]=C;b=M[0];u=M[1];y=M[2];C=M[3];if(b!==K[0]||u!==K[1]||y!==K[2]||C!==K[3])h.stencilOpSeparate(b,u,y,C),K[0]=b,K[1]=u,K[2]=y,K[3]=C;b=t.scissor_enable;b!==v.scissor_enable&&(b?h.enable(3089):h.disable(3089),v.scissor_enable=b);b=R[0];u=R[1];y=R[2];C=R[3];if(b!==P[0]||u!==P[1]||y!==P[2]||C!==P[3])h.scissor(b,u,y,C),P[0]=b,P[1]=u,P[2]=y,P[3]=C;b=
m[0];u=m[1];y=m[2];C=m[3];if(b!==J[0]||u!==J[1]||y!==J[2]||C!==J[3])h.viewport(b,u,y,C),J[0]=b,J[1]=u,J[2]=y,J[3]=C}h.lineWidth(1);v.lineWidth=1;if(b=v.profile)k=performance.now(),L.count++;h.useProgram(e.program);X.setVAO(null);u=ba.location;y=w[u];y.buffer||h.enableVertexAttribArray(u);if(y.type!==l.dtype||2!==y.size||y.buffer!==l||!1!==y.normalized||0!==y.offset||0!==y.stride)h.bindBuffer(34962,l.buffer),h.vertexAttribPointer(u,2,l.dtype,!1,0,0),y.type=l.dtype,y.size=2,y.buffer=l,y.normalized=
!1,y.offset=0,y.stride=0;h.uniform4f(p.location,1,0,0,1);q&&h.bindBuffer(34963,q.buffer.buffer);u=q.primType;y=q.vertCount-0;0<=y||ca.commandRaise(c,N);y&&(h.drawElements(u,y,q.type,0<<(q.type-5121>>1)),v.dirty=!0,X.setVAO(null),b&&(L.cpuTime+=performance.now()-k))},scope:function(a,b,c){var d,f,e,g,h,m,q,p,u,w,x,r,n,z,y,A,B,D,E,I,G,J;d=t.lineWidth;t.lineWidth=1;if(f=v.profile)e=performance.now(),L.count++;g=Q.elements;Q.elements=F;h=Q.offset;Q.offset=0;m=F.vertCount-0;0<=m||ca.commandRaise(C,N);
q=Q.count;Q.count=m;p=F.primType;m=Q.primitive;Q.primitive=p;p=k[3];k[3]=aa;u=H.buffer;H.buffer=l;w=H.divisor;H.divisor=0;x=H.normalized;H.normalized=!1;r=H.offset;H.offset=0;n=H.size;H.size=0;z=H.state;H.state=1;y=H.stride;H.stride=0;A=H.type;H.type=l.dtype;B=H.w;H.w=0;D=H.x;H.x=0;E=H.y;H.y=0;I=H.z;H.z=0;G=S.vert;S.vert=2;J=S.frag;S.frag=1;v.dirty=!0;b(T,a,c);t.lineWidth=d;f&&(L.cpuTime+=performance.now()-e);Q.elements=g;Q.offset=h;Q.count=q;Q.primitive=m;k[3]=p;H.buffer=u;H.divisor=w;H.normalized=
x;H.offset=r;H.size=n;H.state=z;H.stride=y;H.type=A;H.w=B;H.x=D;H.y=E;H.z=I;S.vert=G;S.frag=J;v.dirty=!0},batch:function(b,c){var e,k,q;e=ia.next;e!==ia.cur&&(e?h.bindFramebuffer(36160,e.framebuffer):h.bindFramebuffer(36160,null),ia.cur=e);if(v.dirty){var C,F;e=t.dither;e!==v.dither&&(e?h.enable(3024):h.disable(3024),v.dither=e);e=t.blend_enable;e!==v.blend_enable&&(e?h.enable(3042):h.disable(3042),v.blend_enable=e);e=f[0];q=f[1];C=f[2];F=f[3];if(e!==x[0]||q!==x[1]||C!==x[2]||F!==x[3])h.blendColor(e,
q,C,F),x[0]=e,x[1]=q,x[2]=C,x[3]=F;e=Y[0];q=Y[1];if(e!==D[0]||q!==D[1])h.blendEquationSeparate(e,q),D[0]=e,D[1]=q;e=E[0];q=E[1];C=E[2];F=E[3];if(e!==d[0]||q!==d[1]||C!==d[2]||F!==d[3])h.blendFuncSeparate(e,q,C,F),d[0]=e,d[1]=q,d[2]=C,d[3]=F;e=t.depth_enable;e!==v.depth_enable&&(e?h.enable(2929):h.disable(2929),v.depth_enable=e);e=t.depth_func;e!==v.depth_func&&(h.depthFunc(e),v.depth_func=e);e=ga[0];q=ga[1];if(e!==A[0]||q!==A[1])h.depthRange(e,q),A[0]=e,A[1]=q;e=t.depth_mask;e!==v.depth_mask&&(h.depthMask(e),
v.depth_mask=e);e=G[0];q=G[1];C=G[2];F=G[3];if(e!==a[0]||q!==a[1]||C!==a[2]||F!==a[3])h.colorMask(e,q,C,F),a[0]=e,a[1]=q,a[2]=C,a[3]=F;e=t.cull_enable;e!==v.cull_enable&&(e?h.enable(2884):h.disable(2884),v.cull_enable=e);e=t.cull_face;e!==v.cull_face&&(h.cullFace(e),v.cull_face=e);e=t.frontFace;e!==v.frontFace&&(h.frontFace(e),v.frontFace=e);e=t.polygonOffset_enable;e!==v.polygonOffset_enable&&(e?h.enable(32823):h.disable(32823),v.polygonOffset_enable=e);e=ja[0];q=ja[1];if(e!==Z[0]||q!==Z[1])h.polygonOffset(e,
q),Z[0]=e,Z[1]=q;e=t.sample_alpha;e!==v.sample_alpha&&(e?h.enable(32926):h.disable(32926),v.sample_alpha=e);e=t.sample_enable;e!==v.sample_enable&&(e?h.enable(32928):h.disable(32928),v.sample_enable=e);e=V[0];q=V[1];if(e!==ea[0]||q!==ea[1])h.sampleCoverage(e,q),ea[0]=e,ea[1]=q;e=t.stencil_enable;e!==v.stencil_enable&&(e?h.enable(2960):h.disable(2960),v.stencil_enable=e);e=t.stencil_mask;e!==v.stencil_mask&&(h.stencilMask(e),v.stencil_mask=e);e=B[0];q=B[1];C=B[2];if(e!==g[0]||q!==g[1]||C!==g[2])h.stencilFunc(e,
q,C),g[0]=e,g[1]=q,g[2]=C;e=Da[0];q=Da[1];C=Da[2];F=Da[3];if(e!==qa[0]||q!==qa[1]||C!==qa[2]||F!==qa[3])h.stencilOpSeparate(e,q,C,F),qa[0]=e,qa[1]=q,qa[2]=C,qa[3]=F;e=M[0];q=M[1];C=M[2];F=M[3];if(e!==K[0]||q!==K[1]||C!==K[2]||F!==K[3])h.stencilOpSeparate(e,q,C,F),K[0]=e,K[1]=q,K[2]=C,K[3]=F;e=t.scissor_enable;e!==v.scissor_enable&&(e?h.enable(3089):h.disable(3089),v.scissor_enable=e);e=R[0];q=R[1];C=R[2];F=R[3];if(e!==P[0]||q!==P[1]||C!==P[2]||F!==P[3])h.scissor(e,q,C,F),P[0]=e,P[1]=q,P[2]=C,P[3]=
F;e=m[0];q=m[1];C=m[2];F=m[3];if(e!==J[0]||q!==J[1]||C!==J[2]||F!==J[3])h.viewport(e,q,C,F),J[0]=e,J[1]=q,J[2]=C,J[3]=F}h.lineWidth(1);v.lineWidth=1;if(e=v.profile)k=performance.now(),L.count+=c;h.useProgram(U.program);X.setVAO(null);q=ba.location;C=w[q];C.buffer||h.enableVertexAttribArray(q);if(C.type!==l.dtype||2!==C.size||C.buffer!==l||!1!==C.normalized||0!==C.offset||0!==C.stride)h.bindBuffer(34962,l.buffer),h.vertexAttribPointer(q,2,l.dtype,!1,0,0),C.type=l.dtype,C.size=2,C.buffer=l,C.normalized=
!1,C.offset=0,C.stride=0;h.uniform4f(p.location,1,0,0,1);y&&h.bindBuffer(34963,y.buffer.buffer);C=y.primType;F=y.vertCount-0;0<=F||ca.commandRaise(u,N);for(q=0;q<c;++q)F&&h.drawElements(C,F,y.type,0<<(y.type-5121>>1));v.dirty=!0;X.setVAO(null);e&&(L.cpuTime+=performance.now()-k)}}},"$20,mouse,position,t,texture":function(b,ca,N,L,e,l,q,c,F,C,H,U,y,u,p,ba,w,T,v,Q,ga,h,t,S,k){var X,f,x,Y,D,E,d,G,a,Z,A,ja,Ra,V,ea,R,P,B,g,M,K,Da,qa,m,J,aa,O,ma,pa,za,xa,fa,Aa,ka,oa,ya;X=b.attributes;f=b.context;x=b.current;
Y=b.draw;D=b.elements;E=b.framebuffer;d=b.gl;G=b.isArrayLike;a=b.next;Z=b.shader;A=b.uniforms;ja=b.vao;Ra=a.blend_color;V=x.blend_color;ea=a.blend_equation;R=x.blend_equation;P=a.blend_func;B=x.blend_func;g=a.colorMask;M=x.colorMask;K=a.depth_range;Da=x.depth_range;qa=a.polygonOffset_offset;m=x.polygonOffset_offset;J=a.sample_coverage;aa=x.sample_coverage;O=a.scissor_box;ma=x.scissor_box;pa=a.stencil_func;za=x.stencil_func;xa=a.stencil_opBack;fa=x.stencil_opBack;Aa=a.stencil_opFront;ka=x.stencil_opFront;
oa=a.viewport;ya=x.viewport;return{draw:function(b){var p,u,v,r;p=E.next;p!==E.cur&&(p?d.bindFramebuffer(36160,p.framebuffer):d.bindFramebuffer(36160,null),E.cur=p);if(x.dirty){var n;p=a.dither;p!==x.dither&&(p?d.enable(3024):d.disable(3024),x.dither=p);p=a.blend_enable;p!==x.blend_enable&&(p?d.enable(3042):d.disable(3042),x.blend_enable=p);p=Ra[0];v=Ra[1];r=Ra[2];n=Ra[3];if(p!==V[0]||v!==V[1]||r!==V[2]||n!==V[3])d.blendColor(p,v,r,n),V[0]=p,V[1]=v,V[2]=r,V[3]=n;p=ea[0];v=ea[1];if(p!==R[0]||v!==R[1])d.blendEquationSeparate(p,
v),R[0]=p,R[1]=v;p=P[0];v=P[1];r=P[2];n=P[3];if(p!==B[0]||v!==B[1]||r!==B[2]||n!==B[3])d.blendFuncSeparate(p,v,r,n),B[0]=p,B[1]=v,B[2]=r,B[3]=n;p=a.depth_enable;p!==x.depth_enable&&(p?d.enable(2929):d.disable(2929),x.depth_enable=p);p=a.depth_func;p!==x.depth_func&&(d.depthFunc(p),x.depth_func=p);p=K[0];v=K[1];if(p!==Da[0]||v!==Da[1])d.depthRange(p,v),Da[0]=p,Da[1]=v;p=a.depth_mask;p!==x.depth_mask&&(d.depthMask(p),x.depth_mask=p);p=g[0];v=g[1];r=g[2];n=g[3];if(p!==M[0]||v!==M[1]||r!==M[2]||n!==M[3])d.colorMask(p,
v,r,n),M[0]=p,M[1]=v,M[2]=r,M[3]=n;p=a.cull_enable;p!==x.cull_enable&&(p?d.enable(2884):d.disable(2884),x.cull_enable=p);p=a.cull_face;p!==x.cull_face&&(d.cullFace(p),x.cull_face=p);p=a.frontFace;p!==x.frontFace&&(d.frontFace(p),x.frontFace=p);p=a.lineWidth;p!==x.lineWidth&&(d.lineWidth(p),x.lineWidth=p);p=a.polygonOffset_enable;p!==x.polygonOffset_enable&&(p?d.enable(32823):d.disable(32823),x.polygonOffset_enable=p);p=qa[0];v=qa[1];if(p!==m[0]||v!==m[1])d.polygonOffset(p,v),m[0]=p,m[1]=v;p=a.sample_alpha;
p!==x.sample_alpha&&(p?d.enable(32926):d.disable(32926),x.sample_alpha=p);p=a.sample_enable;p!==x.sample_enable&&(p?d.enable(32928):d.disable(32928),x.sample_enable=p);p=J[0];v=J[1];if(p!==aa[0]||v!==aa[1])d.sampleCoverage(p,v),aa[0]=p,aa[1]=v;p=a.stencil_enable;p!==x.stencil_enable&&(p?d.enable(2960):d.disable(2960),x.stencil_enable=p);p=a.stencil_mask;p!==x.stencil_mask&&(d.stencilMask(p),x.stencil_mask=p);p=pa[0];v=pa[1];r=pa[2];if(p!==za[0]||v!==za[1]||r!==za[2])d.stencilFunc(p,v,r),za[0]=p,za[1]=
v,za[2]=r;p=Aa[0];v=Aa[1];r=Aa[2];n=Aa[3];if(p!==ka[0]||v!==ka[1]||r!==ka[2]||n!==ka[3])d.stencilOpSeparate(p,v,r,n),ka[0]=p,ka[1]=v,ka[2]=r,ka[3]=n;p=xa[0];v=xa[1];r=xa[2];n=xa[3];if(p!==fa[0]||v!==fa[1]||r!==fa[2]||n!==fa[3])d.stencilOpSeparate(p,v,r,n),fa[0]=p,fa[1]=v,fa[2]=r,fa[3]=n;p=a.scissor_enable;p!==x.scissor_enable&&(p?d.enable(3089):d.disable(3089),x.scissor_enable=p);p=O[0];v=O[1];r=O[2];n=O[3];if(p!==ma[0]||v!==ma[1]||r!==ma[2]||n!==ma[3])d.scissor(p,v,r,n),ma[0]=p,ma[1]=v,ma[2]=r,ma[3]=
n;p=oa[0];v=oa[1];r=oa[2];n=oa[3];if(p!==ya[0]||v!==ya[1]||r!==ya[2]||n!==ya[3])d.viewport(p,v,r,n),ya[0]=p,ya[1]=v,ya[2]=r,ya[3]=n;x.dirty=!1}if(p=x.profile)u=performance.now(),L.count++;d.useProgram(e.program);ja.setVAO(null);v=t.location;r=X[v];r.buffer||d.enableVertexAttribArray(v);if(r.type!==l.dtype||2!==r.size||r.buffer!==l||!1!==r.normalized||0!==r.offset||0!==r.stride)d.bindBuffer(34962,l.buffer),d.vertexAttribPointer(v,2,l.dtype,!1,0,0),r.type=l.dtype,r.size=2,r.buffer=l,r.normalized=!1,
r.offset=0,r.stride=0;v=q.call(this,f,b,0);G(v)&&2===v.length||ca.commandRaise(c,N);d.uniform2f(h.location,v[0],v[1]);b=F.call(this,f,b,0);"number"!==typeof b&&ca.commandRaise(C,N);d.uniform1f(S.location,b);d.uniform1i(k.location,H.bind());(b=Y.elements)?d.bindBuffer(34963,b.buffer.buffer):ja.currentVAO&&(b=D.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,b.buffer.buffer);v=Y.primitive;r=Y.offset;b?d.drawElements(v,3,b.type,r<<(b.type-5121>>1)):d.drawArrays(v,r,3);ja.setVAO(null);p&&(L.cpuTime+=
performance.now()-u);H.unbind()},scope:function(a,b,c){var d,e,g,h,k,m,q,t,v,w,B,C,D,E,F,G,H,J,K,M;if(d=x.profile)e=performance.now(),L.count++;g=Y.count;Y.count=3;h=U.call(this,f,a,c);k=A[3];A[3]=h;m=y.call(this,f,a,c);h=A[4];A[4]=m;m=A[5];A[5]=u;q=p.buffer;p.buffer=l;t=p.divisor;p.divisor=0;v=p.normalized;p.normalized=!1;w=p.offset;p.offset=0;B=p.size;p.size=0;C=p.state;p.state=1;D=p.stride;p.stride=0;E=p.type;p.type=l.dtype;F=p.w;p.w=0;G=p.x;p.x=0;H=p.y;p.y=0;J=p.z;p.z=0;K=Z.vert;Z.vert=2;M=Z.frag;
Z.frag=1;b(f,a,c);d&&(L.cpuTime+=performance.now()-e);Y.count=g;A[3]=k;A[4]=h;A[5]=m;p.buffer=q;p.divisor=t;p.normalized=v;p.offset=w;p.size=B;p.state=C;p.stride=D;p.type=E;p.w=F;p.x=G;p.y=H;p.z=J;Z.vert=K;Z.frag=M},batch:function(b,c){var e,q,p;e=E.next;e!==E.cur&&(e?d.bindFramebuffer(36160,e.framebuffer):d.bindFramebuffer(36160,null),E.cur=e);if(x.dirty){var n,u,y;e=a.dither;e!==x.dither&&(e?d.enable(3024):d.disable(3024),x.dither=e);e=a.blend_enable;e!==x.blend_enable&&(e?d.enable(3042):d.disable(3042),
x.blend_enable=e);e=Ra[0];n=Ra[1];u=Ra[2];y=Ra[3];if(e!==V[0]||n!==V[1]||u!==V[2]||y!==V[3])d.blendColor(e,n,u,y),V[0]=e,V[1]=n,V[2]=u,V[3]=y;e=ea[0];n=ea[1];if(e!==R[0]||n!==R[1])d.blendEquationSeparate(e,n),R[0]=e,R[1]=n;e=P[0];n=P[1];u=P[2];y=P[3];if(e!==B[0]||n!==B[1]||u!==B[2]||y!==B[3])d.blendFuncSeparate(e,n,u,y),B[0]=e,B[1]=n,B[2]=u,B[3]=y;e=a.depth_enable;e!==x.depth_enable&&(e?d.enable(2929):d.disable(2929),x.depth_enable=e);e=a.depth_func;e!==x.depth_func&&(d.depthFunc(e),x.depth_func=
e);e=K[0];n=K[1];if(e!==Da[0]||n!==Da[1])d.depthRange(e,n),Da[0]=e,Da[1]=n;e=a.depth_mask;e!==x.depth_mask&&(d.depthMask(e),x.depth_mask=e);e=g[0];n=g[1];u=g[2];y=g[3];if(e!==M[0]||n!==M[1]||u!==M[2]||y!==M[3])d.colorMask(e,n,u,y),M[0]=e,M[1]=n,M[2]=u,M[3]=y;e=a.cull_enable;e!==x.cull_enable&&(e?d.enable(2884):d.disable(2884),x.cull_enable=e);e=a.cull_face;e!==x.cull_face&&(d.cullFace(e),x.cull_face=e);e=a.frontFace;e!==x.frontFace&&(d.frontFace(e),x.frontFace=e);e=a.lineWidth;e!==x.lineWidth&&(d.lineWidth(e),
x.lineWidth=e);e=a.polygonOffset_enable;e!==x.polygonOffset_enable&&(e?d.enable(32823):d.disable(32823),x.polygonOffset_enable=e);e=qa[0];n=qa[1];if(e!==m[0]||n!==m[1])d.polygonOffset(e,n),m[0]=e,m[1]=n;e=a.sample_alpha;e!==x.sample_alpha&&(e?d.enable(32926):d.disable(32926),x.sample_alpha=e);e=a.sample_enable;e!==x.sample_enable&&(e?d.enable(32928):d.disable(32928),x.sample_enable=e);e=J[0];n=J[1];if(e!==aa[0]||n!==aa[1])d.sampleCoverage(e,n),aa[0]=e,aa[1]=n;e=a.stencil_enable;e!==x.stencil_enable&&
(e?d.enable(2960):d.disable(2960),x.stencil_enable=e);e=a.stencil_mask;e!==x.stencil_mask&&(d.stencilMask(e),x.stencil_mask=e);e=pa[0];n=pa[1];u=pa[2];if(e!==za[0]||n!==za[1]||u!==za[2])d.stencilFunc(e,n,u),za[0]=e,za[1]=n,za[2]=u;e=Aa[0];n=Aa[1];u=Aa[2];y=Aa[3];if(e!==ka[0]||n!==ka[1]||u!==ka[2]||y!==ka[3])d.stencilOpSeparate(e,n,u,y),ka[0]=e,ka[1]=n,ka[2]=u,ka[3]=y;e=xa[0];n=xa[1];u=xa[2];y=xa[3];if(e!==fa[0]||n!==fa[1]||u!==fa[2]||y!==fa[3])d.stencilOpSeparate(e,n,u,y),fa[0]=e,fa[1]=n,fa[2]=u,
fa[3]=y;e=a.scissor_enable;e!==x.scissor_enable&&(e?d.enable(3089):d.disable(3089),x.scissor_enable=e);e=O[0];n=O[1];u=O[2];y=O[3];if(e!==ma[0]||n!==ma[1]||u!==ma[2]||y!==ma[3])d.scissor(e,n,u,y),ma[0]=e,ma[1]=n,ma[2]=u,ma[3]=y;e=oa[0];n=oa[1];u=oa[2];y=oa[3];if(e!==ya[0]||n!==ya[1]||u!==ya[2]||y!==ya[3])d.viewport(e,n,u,y),ya[0]=e,ya[1]=n,ya[2]=u,ya[3]=y;x.dirty=!1}if(e=x.profile)q=performance.now(),L.count+=c;d.useProgram(ba.program);ja.setVAO(null);n=t.location;u=X[n];u.buffer||d.enableVertexAttribArray(n);
if(u.type!==l.dtype||2!==u.size||u.buffer!==l||!1!==u.normalized||0!==u.offset||0!==u.stride)d.bindBuffer(34962,l.buffer),d.vertexAttribPointer(n,2,l.dtype,!1,0,0),u.type=l.dtype,u.size=2,u.buffer=l,u.normalized=!1,u.offset=0,u.stride=0;n=w.call(this,f,void 0,p);G(n)&&2===n.length||ca.commandRaise(T,N);d.uniform2f(h.location,n[0],n[1]);p=v.call(this,f,void 0,p);"number"!==typeof p&&ca.commandRaise(Q,N);d.uniform1f(S.location,p);d.uniform1i(k.location,ga.bind());(n=Y.elements)?d.bindBuffer(34963,n.buffer.buffer):
ja.currentVAO&&(n=D.getElements(ja.currentVAO.elements))&&d.bindBuffer(34963,n.buffer.buffer);u=Y.primitive;y=Y.offset;for(p=0;p<c;++p)n?d.drawElements(u,3,n.type,y<<(n.type-5121>>1)):d.drawArrays(u,y,3);ga.unbind();ja.setVAO(null);e&&(L.cpuTime+=performance.now()-q)}}}}},{}],25:[function(ga,Z,Ra){var b=ga("./sorted-object-keys");Z.exports=function(ca,N){for(var L=b(N),e=0;e<L.length;++e)ca[L[e]]=N[L[e]];return ca}},{"./sorted-object-keys":34}],26:[function(ga,Z,Ra){function b(b,e,l,q,c,F){for(var C=
0;C<e;++C)for(var H=b[C],N=0;N<l;++N)for(var y=H[N],u=0;u<q;++u)c[F++]=y[u]}function ca(L,e,l,q,c){for(var F=1,C=l+1;C<e.length;++C)F*=e[C];var H=e[l];if(4===e.length-l){var N=e[l+1],y=e[l+2];e=e[l+3];for(C=0;C<H;++C)b(L[C],N,y,e,q,c),c+=F}else for(C=0;C<H;++C)ca(L[C],e,l+1,q,c),c+=F}var N=ga("./pool");Z.exports={shape:function(b){for(var e=[];b.length;b=b[0])e.push(b.length);return e},flatten:function(L,e,l,q){var c=1;if(e.length)for(var F=0;F<e.length;++F)c*=e[F];else c=0;l=q||N.allocType(l,c);
switch(e.length){case 0:break;case 1:q=e[0];for(e=0;e<q;++e)l[e]=L[e];break;case 2:q=e[0];e=e[1];for(F=c=0;F<q;++F)for(var C=L[F],H=0;H<e;++H)l[c++]=C[H];break;case 3:b(L,e[0],e[1],e[2],l,0);break;default:ca(L,e,0,l,0)}return l}}},{"./pool":32}],27:[function(ga,Z,Ra){var b=ga("./is-typed-array");Z.exports=function(ca){return Array.isArray(ca)||b(ca)}},{"./is-typed-array":30}],28:[function(ga,Z,Ra){var b=ga("./is-typed-array");Z.exports=function(ca){return!!ca&&"object"===typeof ca&&Array.isArray(ca.shape)&&
Array.isArray(ca.stride)&&"number"===typeof ca.offset&&ca.shape.length===ca.stride.length&&(Array.isArray(ca.data)||b(ca.data))}},{"./is-typed-array":30}],29:[function(ga,Z,Ra){Z.exports=function(b){return!(b&b-1)&&!!b}},{}],30:[function(ga,Z,Ra){Z.exports=function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Uint8ClampedArray}},
{}],31:[function(ga,Z,Ra){Z.exports=function(b,ca){for(var N=Array(b),L=0;L<b;++L)N[L]=ca(L);return N}},{}],32:[function(ga,Z,Ra){function b(b){var e,l;e=(65535<b)<<4;b>>>=e;l=(255<b)<<3;b>>>=l;e|=l;l=(15<b)<<2;b>>>=l;e|=l;l=(3<b)<<1;return e|l|b>>>l>>1}function ca(){function L(e){a:{for(var c=16;268435456>=c;c*=16)if(e<=c){e=c;break a}e=0}c=l[b(e)>>2];return 0<c.length?c.pop():new ArrayBuffer(e)}function e(e){l[b(e.byteLength)>>2].push(e)}var l=N(8,function(){return[]});return{alloc:L,free:e,allocType:function(b,
c){var e=null;switch(b){case 5120:e=new Int8Array(L(c),0,c);break;case 5121:e=new Uint8Array(L(c),0,c);break;case 5122:e=new Int16Array(L(2*c),0,c);break;case 5123:e=new Uint16Array(L(2*c),0,c);break;case 5124:e=new Int32Array(L(4*c),0,c);break;case 5125:e=new Uint32Array(L(4*c),0,c);break;case 5126:e=new Float32Array(L(4*c),0,c);break;default:return null}return e.length!==c?e.subarray(0,c):e},freeType:function(b){e(b.buffer)}}}var N=ga("./loop");ga=ca();ga.zero=ca();Z.exports=ga},{"./loop":31}],
33:[function(ga,Z,Ra){Z.exports={next:"function"===typeof requestAnimationFrame?function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:clearTimeout}},{}],34:[function(ga,Z,Ra){Z.exports=function(b){return Object.keys(b).sort()}},{}],35:[function(ga,Z,Ra){var b=ga("./pool"),ca=new Float32Array(1),N=new Uint32Array(ca.buffer);Z.exports=function(L){for(var e=b.allocType(5123,L.length),
l=0;l<L.length;++l)if(isNaN(L[l]))e[l]=65535;else if(Infinity===L[l])e[l]=31744;else if(-Infinity===L[l])e[l]=64512;else{ca[0]=L[l];var q=N[0],c=q>>>31<<15,F=(q<<1>>>24)-127,q=q>>13&1023;e[l]=-24>F?c:-14>F?c+(q+1024>>-14-F):15<F?c+31744:c+(F+15<<10)+q}return e}},{"./pool":32}],36:[function(ga,Z,Ra){var b=ga("./sorted-object-keys");Z.exports=function(ca){return b(ca).map(function(b){return ca[b]})}},{"./sorted-object-keys":34}],37:[function(ga,Z,Ra){function b(b,c,e){function C(){var c=window.innerWidth,
l=window.innerHeight;b!==document.body&&(l=H.getBoundingClientRect(),c=l.right-l.left,l=l.bottom-l.top);H.width=e*c;H.height=e*l}var H=document.createElement("canvas");l(H.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"});b.appendChild(H);b===document.body&&(H.style.position="absolute",l(b.style,{margin:0,padding:0}));var L;b!==document.body&&"function"===typeof ResizeObserver?(L=new ResizeObserver(function(){setTimeout(C)}),L.observe(b)):window.addEventListener("resize",
C,!1);C();return{canvas:H,onDestroy:function(){L?L.disconnect():window.removeEventListener("resize",C);b.removeChild(H)}}}function ca(b,c){function e(l){try{return b.getContext(l,c)}catch(F){return null}}return e("webgl")||e("experimental-webgl")||e("webgl-experimental")}function N(b){if("string"===typeof b)return b.split();e(Array.isArray(b),"invalid extension array");return b}function L(b){return"string"===typeof b?(e("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(b)):
b}var e=ga("./util/check"),l=ga("./util/extend");Z.exports=function(l){var c=l||{},F,C,H,U;l={};var y=[],u=[],p="undefined"===typeof window?1:window.devicePixelRatio,ba=!1,w=function(b){b&&e.raise(b)},T=function(){};"string"===typeof c?(e("undefined"!==typeof document,"selector queries only supported in DOM environments"),F=document.querySelector(c),e(F,"invalid query string for element")):"object"===typeof c?"string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?
F=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(U=c,H=U.canvas):(e.constructor(c),"gl"in c?U=c.gl:"canvas"in c?H=L(c.canvas):"container"in c&&(C=L(c.container)),"attributes"in c&&(l=c.attributes,e.type(l,"object","invalid context attributes")),"extensions"in c&&(y=N(c.extensions)),"optionalExtensions"in c&&(u=N(c.optionalExtensions)),"onDone"in c&&(e.type(c.onDone,"function","invalid or missing onDone callback"),w=c.onDone),"profile"in c&&(ba=!!c.profile),"pixelRatio"in c&&
(p=+c.pixelRatio,e(0<p,"invalid pixel ratio"))):e.raise("invalid arguments to regl");F&&("canvas"===F.nodeName.toLowerCase()?H=F:C=F);if(!U){if(!H){e("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");F=b(C||document.body,w,p);if(!F)return null;H=F.canvas;T=F.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0);U=ca(H,l)}return U?{gl:U,canvas:H,container:C,extensions:y,optionalExtensions:u,pixelRatio:p,profile:ba,onDone:w,onDestroy:T}:(T(),
w("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}},{"./util/check":21,"./util/extend":25}],38:[function(ga,Z,Ra){function b(b,c){for(var e=0;e<b.length;++e)if(b[e]===c)return e;return-1}var ca=ga("./lib/util/check"),N=ga("./lib/util/extend"),L=ga("./lib/dynamic"),e=ga("./lib/util/raf"),l=ga("./lib/util/clock"),q=ga("./lib/strings"),c=ga("./lib/webgl"),F=ga("./lib/extension"),C=ga("./lib/limits"),H=ga("./lib/buffer"),U=ga("./lib/elements"),y=ga("./lib/texture"),
u=ga("./lib/renderbuffer"),p=ga("./lib/framebuffer"),ba=ga("./lib/attribute"),w=ga("./lib/shader"),T=ga("./lib/read"),v=ga("./lib/core"),Q=ga("./lib/stats"),ia=ga("./lib/timer");Z.exports=function(h){function t(){if(0===Aa.length)P&&P.update(),Ja=null;else{Ja=e.next(t);d();for(var a=Aa.length-1;0<=a;--a){var b=Aa[a];b&&b(K,null,0)}Z.flush();P&&P.update()}}function S(){!Ja&&0<Aa.length&&(Ja=e.next(t))}function k(){Ja&&(e.cancel(t),Ja=null)}function X(a){a.preventDefault();ga=!0;k();ka.forEach(function(a){a()})}
function f(a){Z.getError();ga=!1;Ra.restore();aa.restore();qa.restore();O.restore();ma.restore();pa.restore();J.restore();P&&P.restore();za.procs.refresh();S();oa.forEach(function(a){a()})}function x(a){function b(a,c){var d={},e={};Object.keys(a).forEach(function(b){var f=a[b];if(L.isDynamic(f))e[b]=L.unbox(f,b);else{if(c&&Array.isArray(f))for(var g=0;g<f.length;++g)if(L.isDynamic(f[g])){e[b]=L.unbox(f,b);return}d[b]=f}});return{dynamic:e,"static":d}}function c(a){for(;p.length<a;)p.push(null);return p}
ca(!!a,"invalid args to regl({...})");ca.type(a,"object","invalid args to regl({...})");var d=b(a.context||{},!0),e=b(a.uniforms||{},!0),f=b(a.attributes||{},!1);a=b(function(a){function b(a){if(a in c){var d=c[a];delete c[a];Object.keys(d).forEach(function(b){c[a+"."+b]=d[b]})}}var c=N({},a);delete c.uniforms;delete c.attributes;delete c.context;delete c.vao;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");b("cull");b("stencil");
b("polygonOffset");b("scissor");b("sample");"vao"in a&&(c.vao=a.vao);return c}(a),!1);var g={gpuTime:0,cpuTime:0,count:0},h=za.compile(a,f,e,d,g),k=h.draw,l=h.batch,m=h.scope,p=[];return N(function(a,b){var d;ga&&ca.raise("context lost");if("function"===typeof a)return m.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)m.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)m.call(this,a[d],b,d);else return m.call(this,a,b,0);else if("number"===typeof a){if(0<
a)return l.call(this,c(a|0),a|0)}else if(Array.isArray(a)){if(a.length)return l.call(this,a,a.length)}else return k.call(this,a)},{stats:g,destroy:function(){h.destroy()}})}function Y(a,b){var c=0;za.procs.poll();var d=b.color;d&&(Z.clearColor(+d[0]||0,+d[1]||0,+d[2]||0,+d[3]||0),c|=16384);"depth"in b&&(Z.clearDepth(+b.depth),c|=256);"stencil"in b&&(Z.clearStencil(b.stencil|0),c|=1024);ca(!!c,"called regl.clear with no buffer specified");Z.clear(c)}function D(a){ca.type(a,"function","regl.frame() callback must be a function");
Aa.push(a);S();return{cancel:function(){function c(){var a=b(Aa,c);Aa[a]=Aa[Aa.length-1];--Aa.length;0>=Aa.length&&k()}var d=b(Aa,a);ca(0<=d,"cannot cancel a frame twice");Aa[d]=c}}}function E(){var a=xa.viewport,b=xa.scissor_box;a[0]=a[1]=b[0]=b[1]=0;K.viewportWidth=K.framebufferWidth=K.drawingBufferWidth=a[2]=b[2]=Z.drawingBufferWidth;K.viewportHeight=K.framebufferHeight=K.drawingBufferHeight=a[3]=b[3]=Z.drawingBufferHeight}function d(){K.tick+=1;K.time=a();E();za.procs.poll()}function G(){O.refresh();
E();za.procs.refresh();P&&P.update()}function a(){return(l()-B)/1E3}console.log("REGL args are:",h);h=c(h);console.log("REGL configs are:",h);if(!h)return null;var Z=h.gl,A=Z.getContextAttributes(),ga=Z.isContextLost(),Ra=F(Z,h);if(!Ra)return null;var V=q(),ea=Q(),R=Ra.extensions,P=ia(Z,R),B=l(),g=Z.drawingBufferWidth,M=Z.drawingBufferHeight,K={tick:0,time:0,viewportWidth:g,viewportHeight:M,framebufferWidth:g,framebufferHeight:M,drawingBufferWidth:g,drawingBufferHeight:M,pixelRatio:h.pixelRatio},
g={elements:null,primitive:4,count:-1,offset:0,instances:-1},Da=C(Z,R),qa=H(Z,ea,h,function(a){return J.destroyBuffer(a)}),m=U(Z,R,qa,ea),J=ba(Z,R,Da,ea,qa,m,g),aa=w(Z,V,ea,h),O=y(Z,R,Da,function(){za.procs.poll()},K,ea,h),ma=u(Z,R,Da,ea,h),pa=p(Z,R,Da,O,ma,ea),za=v(Z,V,R,Da,qa,m,O,pa,{},J,aa,g,K,P,h),V=T(Z,pa,za.procs.poll,K,A,R,Da),xa=za.next,fa=Z.canvas,Aa=[],ka=[],oa=[],ya=[h.onDestroy],Ja=null;fa&&(fa.addEventListener("webglcontextlost",X,!1),fa.addEventListener("webglcontextrestored",f,!1));
var na=pa.setFBO=x({framebuffer:L.define.call(null,1,"framebuffer")});G();A=N(x,{clear:function(a){ca("object"===typeof a&&a,"regl.clear() takes an object as input");if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)na(N({framebuffer:a.framebuffer.faces[b]},a),Y);else na(a,Y);else Y(null,a)},prop:L.define.bind(null,1),context:L.define.bind(null,2),"this":L.define.bind(null,3),draw:x({}),buffer:function(a){return qa.create(a,34962,!1,!1)},elements:function(a){return m.create(a,
!1)},texture:O.create2D,cube:O.createCube,renderbuffer:ma.create,framebuffer:pa.create,framebufferCube:pa.createCube,vao:J.createVAO,attributes:A,frame:D,on:function(a,b){ca.type(b,"function","listener callback must be a function");var c;switch(a){case "frame":return D(b);case "lost":c=ka;break;case "restore":c=oa;break;case "destroy":c=ya;break;default:ca.raise("invalid event, must be one of frame,lost,restore,destroy")}c.push(b);return{cancel:function(){for(var a=0;a<c.length;++a)if(c[a]===b){c[a]=
c[c.length-1];c.pop();break}}}},limits:Da,hasExtension:function(a){return 0<=Da.extensions.indexOf(a.toLowerCase())},read:V,destroy:function(){Aa.length=0;k();fa&&(fa.removeEventListener("webglcontextlost",X),fa.removeEventListener("webglcontextrestored",f));aa.clear();pa.clear();ma.clear();J.clear();O.clear();m.clear();qa.clear();P&&P.clear();ya.forEach(function(a){a()})},_gl:Z,_refresh:G,poll:function(){d();P&&P.update()},now:a,stats:ea});h.onDone(null,A);return A}},{"./lib/attribute":2,"./lib/buffer":3,
"./lib/core":8,"./lib/dynamic":9,"./lib/elements":10,"./lib/extension":11,"./lib/framebuffer":12,"./lib/limits":13,"./lib/read":14,"./lib/renderbuffer":15,"./lib/shader":16,"./lib/stats":17,"./lib/strings":18,"./lib/texture":19,"./lib/timer":20,"./lib/util/check":21,"./lib/util/clock":22,"./lib/util/extend":25,"./lib/util/raf":33,"./lib/webgl":37}]},{},[1]);

        </script>
        </body>
      </html>